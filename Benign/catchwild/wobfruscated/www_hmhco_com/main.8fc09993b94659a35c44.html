<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>main.8fc09993b94659a35c44.html</title>
</head>
<body>
<script>"use strict";(self.webpackChunktag=self.webpackChunktag||[]).push([[792],{4721:(t,e,n)=>{n.d(e,{Is:()=>u,K6:()=>g,Mz:()=>d,fS:()=>o,fh:()=>r,ih:()=>l,l$:()=>a,nc:()=>h,tv:()=>i,vw:()=>s,xu:()=>c});const i="abtasty_resetActionTracking",s="targetPages",a="qaParameters",o="audience",r="segment",c="segmentMode",l="trigger",d="triggerMode",u="$^",g=16,h=1e3},6914:(t,e,n)=>{n.d(e,{p:()=>i});const i=(0,n(721).c)(((t,e)=>e.reduce(((e,n)=>t(n)?[...e,n]:e),[])))},721:(t,e,n)=>{function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];const o=t.length,r=t=>"__missing__"===t,c=e.map((t=>r(t)&&s.length>0?s.shift():t)).concat(s);return c.filter((t=>!r(t))).length<o?i(t,c):t(...c)}}n.d(e,{c:()=>i})},9076:(t,e,n)=>{function i(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return e.reduce(((e,n)=>null!=e?n(e):n(t,...i)),void 0)}}n.d(e,{F:()=>i})},8689:(t,e,n)=>{function i(t){return null!=t&&("string"==typeof t?""===t:Array.isArray(t)?0===t.length:"object"==typeof t&&0===Object.keys(t).length)}n.d(e,{I:()=>i})},3595:(t,e,n)=>{function i(t){return null==t}n.d(e,{g:()=>i})},427:(t,e,n)=>{n.d(e,{A:()=>i});const i=(0,n(721).c)(((t,e)=>t.reduce(((t,e)=>t?t[e]:void 0),e)))},117:(t,e,n)=>{n.d(e,{X:()=>o});var i=n(721),s=n(427);const a=(0,i.c)(((t,e)=>null==e||e!=e?t:e)),o=(0,i.c)(((t,e,n)=>a(t,(0,s.A)(e,n))))},2852:(t,e,n)=>{n.d(e,{l:()=>i});const i=(0,n(721).c)(((t,e)=>e.split(t)))},2524:(t,e,n)=>{n.r(e),n.d(e,{detectDatalayer:()=>f,extractDatalayerToObject:()=>g,getDatalayer:()=>m,putInArrayIfNeeded:()=>h,sendDatalayerIfNeeded:()=>p});var i=n(7643),s=n(1492),a=n(1134),o=n(7862),r=n(7426),c=n(6883);const l="datalayerTimeout",d="hitDatalayerTimeout",u="waitDatalayer";function g(t){const e=t.length!==Object.keys(t).length?{...t}:t,n=Object.entries(e).filter((t=>Array.isArray(t[1])));return n.length>0&&n.forEach((t=>{e[t[0]]=g(t[1])})),e}function h(t,e){return[].concat(null!=t?t:e)}function m(){const{datalayerVariable:t}=(0,a.F5)();if(!t||!window[t])return null;const e=window[t];return Array.isArray(e)&&e.length<1&&Object.keys(e).length>0?g(e):e}function p(){const t=Math.floor((0,a.F5)().datalayerMaxToSend);if((0,c.r)(t)){const t={dlr:m()};(new i.n).setInternalHit(s.YQ.datalayer,t)}}function f(){if(null==window.ABTasty.datalayerEnabled)return new Promise(((t,e)=>{const{datalayerVariable:n}=(0,a.F5)();n||e("Data layer variable is not set");const i=setInterval((()=>{const e=m();e&&(Array.isArray(e)&&e.length||Object.keys(e).length)&&((0,r.fD)(l),t())}),200);(0,o.Xx)(u,i);const s=setTimeout((()=>{(0,o.TQ)(u),e("Data layer variable cannot be found")}),2e3);(0,r.Dk)(l,s)})).then((()=>{window.ABTasty.datalayerEnabled=!0;const t=setTimeout(p,5e3);(0,r.Dk)(d,t)})).catch((t=>(window.ABTasty.datalayerEnabled=!1,t))).finally((()=>{(0,r.fD)(l),(0,o.TQ)(u)}))}},1205:(t,e,n)=>{n.d(e,{G1:()=>c,GW:()=>l,lV:()=>u,sb:()=>d});var i=n(81),s=n(918),a=n(7426),o=n(9700),r=n(3847);function c(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/MSIE [678]/.test(t)}function l(){return window.self!==window.top&&"https:"===window.location.protocol}function d(){return new Promise((t=>{if(null!=window.ABTasty.ADBlockEnabled)return void t();const e=setTimeout((()=>{void 0!==window.ABTasty.ADBlockEnabled&&(window.ABTasty.AdBlockDetectionFailed=!0,t("AbBlock detection failed"))}),2e3);(0,a.Dk)("adblockDetectionLoop",e);const n=[i.o3.fakeAd1,i.o3.fakeAd2,i.o3.fakeAd3].map((t=>`${t}${i.Y0.javascript}`)),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const i=(0,s.k)(`${(0,r.x)()}/${n[e]}`);i.async=!1,i.onload=()=>{e+1<n.length?o(e+1):(window.ABTasty.ADBlockEnabled=!1,t("AdBlock is disabled"))},i.onerror=()=>{window.ABTasty.ADBlockEnabled=!0,t("AdBlock is enabled")}};o()}))}function u(t){const e=(0,o.aR)()?"pagehide":"beforeunload",n=()=>(t(),null);return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}}},6332:(t,e,n)=>{n.d(e,{X8:()=>u,j3:()=>d});var i=n(3595),s=n(427),a=n(648),o=n(7643),r=n(1492);var c=n(1134);const l=(t,e)=>{let{deprecate:n,new:s=null,type:l,el:d}=t;const u=`${l} ${n} is deprecated`+(s?` - Please use ${s} instead.`:"");if((0,a.FF)(u),e){const t={cid:"b1c05f3030611d124ca247d0cffcf1a4",ec:"Deprecated Usage",ea:(0,c.pw)(),el:(0,i.g)(d)?n.replace("window.",""):d};(new o.n).setInternalHit(r.YQ.event,t)}},d=(()=>{const t={};return e=>{const n=(0,i.g)(e.el)?e.deprecate:`${e.deprecate};${e.el}`;t[n]?l(e,!1):(l(e,!0),t[n]=e)}})(),u=(t,e)=>{try{if(0===t.length||0===e.length)return!1;if(e.join(".").indexOf(t.join("."))>-1)throw new Error("Can't deprecate variable from itself");const n=t.length,i=t.slice(0,n-1),a=t[n-1];return Object.defineProperty((0,s.A)(i,window),a,{get:()=>(d({deprecate:`window.${t.join(".")}`,new:`window.${e.join(".")}`,type:"variable"}),(0,s.A)(e,window))}),!0}catch(e){const n=`Failed to deprecate window.${t.join(".")} variable.`;return(0,a.vV)(n),!1}}},918:(t,e,n)=>{n.d(e,{k:()=>s});var i=n(648);function s(t){let{attributes:e,callback:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return void(0,i.vV)('appendScript called with missing "src" parameter');const s=document.getElementsByTagName("head")[0],a=document.createElement("script");return n&&(a.onload=n),a.setAttribute("type","text/javascript"),a.setAttribute("src",t),e&&Object.entries(e).forEach((t=>{let[e,n]=t;a.setAttribute(e,n)})),s.appendChild(a),a}},7550:(t,e,n)=>{function i(t){const{readyState:e}=document,n="interactive"===e||"complete"===e;if(null==t)return n;if(n)t();else{const e=()=>{document.removeEventListener("DOMContentLoaded",e),t()};document.addEventListener("DOMContentLoaded",e)}}n.d(e,{Q:()=>i})},8318:(t,e,n)=>{n.r(e),n.d(e,{addObservance:()=>l,resetObserver:()=>r});var i=n(3595);const s=(t,e)=>t&&"BODY"!==t.tagName?t===e||s(t.parentNode,e):t===e,a={observer:null,observances:[]},o={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeFilter:["checked","class","disabled","form","hidden","href","icon","id","label","max","min","maxLength","minLength","method","name","novalidate","placeholder","readonly","rel","required","selected","size","span","src","target","title","type","value"]},r=()=>{a.observances=[],a.observer?.disconnect(),a.observer=null},c=(t,e)=>{if(t&&t.length){const n=t.reduce(((t,e)=>{let{addedNodes:n,removedNodes:s,target:a,type:o,attributeName:r,oldValue:c}=e,l=[],d=!0;return l=n.length?[...n]:s.length?[...s]:[a],"attributes"!==o||(0,i.g)(r)||c!==a.getAttribute(r)||(d=!1),d?[...t,...l]:t}),[]);a.observances=a.observances.filter((t=>{let{selector:i,include:a,callback:o}=t;const r=(t=>{if(!t.includes("[]"))return t;const[,,e]=t.split("[]");return e.trim()})(i),c=e.querySelectorAll(r);return a&&((t,e)=>[...e].some((e=>!!e&&t.some((t=>s(e,t)||s(t,e))))))(n,c)?(o(),!1):!(!a&&0===c.length)||(o(),!1)}))}},l=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const s=a.observances.some((e=>e.root===t));a.observances.push({root:t,selector:e,include:n,callback:i}),s||(t=>{a.observer=new MutationObserver((e=>c(e,t))),a.observer.observe(t,o)})(t)}},3346:(t,e,n)=>{function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(t,{method:"GET",mode:"cors",headers:{Origin:document.location.origin},...e})}n.d(e,{J:()=>i})},88:(t,e,n)=>{n.d(e,{DC:()=>r,Qm:()=>c,Yx:()=>i,fm:()=>s,nf:()=>a,to:()=>o});n(648);function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!0===t()?e():setTimeout((()=>{i(t,e,n)}),n)}function s(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,i=arguments.length>2?arguments[2]:void 0;return new Promise(((s,a)=>{const o=()=>t()?s(!0):e=setTimeout(o,n);o(),i&&setTimeout((()=>{clearTimeout(e),a(!0)}),i)}))}function a(t,e,n){"sessionStorage"===t?sessionStorage.setItem(e,n):localStorage.setItem(e,n)}function o(t,e){return"sessionStorage"===t?sessionStorage.getItem(e):localStorage.getItem(e)}function r(t,e){"sessionStorage"===t?sessionStorage.removeItem(e):localStorage.removeItem(e)}function c(t){window.addEventListener("pageshow",(e=>{e.persisted&&t()}))}},7707:(t,e,n)=>{function i(){return"4afb3f81"}function s(){return`${"4afb3f81".substring(0,5)}`}n.d(e,{i:()=>s,y:()=>i})},6381:(t,e,n)=>{n.d(e,{P:()=>o,k:()=>c});var i=n(9578),s=n(3595),a=n(2352);const o={};let r;class c extends a.X{constructor(){if(r)return r;super(),r=this}resetCustomEventState(){Object.keys(o).forEach((t=>{delete o[t]})),this.notify(["events"])}resetSpecificsCustomEvents(t){t.forEach((t=>{o[t]={status:i.u.Status.loading}})),this.notify(t.map((t=>`events.${t}`)))}getStatusCustomEvent(t){return(0,s.g)(o[t])?i.u.Status.loading:o[t].status}initCustomEventState(){Object.keys(i.u.Name).forEach((t=>{(0,s.g)(o[t])&&(o[t]={status:i.u.Status.loading})})),window.ABTasty&&(window.ABTasty.eventState=o)}dispatchCustomEvent(t,e){const n=new CustomEvent(`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"abtasty"}_${t}`,{detail:e});window.dispatchEvent(n),o[t]||this.initCustomEventState(),o[t].status=i.u.Status.complete,!(0,s.g)(e)&&(0,s.g)(o[t].detail)?o[t].detail=[e]:(0,s.g)(e)||(o[t].detail=[...o[t].detail,e]),this.notify([`events.${t}`])}notify(t){for(const e of t)this.mediator?.notify(e)}}},6552:(t,e,n)=>{n.d(e,{w:()=>a});var i=n(648);const s=t=>0===t.length?-1:Math.abs(t.split("").reduce(((t,e)=>{const n=(t<<5)-t+e.charCodeAt(0);return 0|n}),0)),a=async t=>{let e=-1;if(window.isSecureContext)try{e=await(async t=>{const e=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-1",e);return new Uint16Array(n)[0]})(t)}catch(n){(0,i.FF)("Hashing by Crypto API failed, fallback to hashing by bits shifting."),e=s(t)}else e=s(t);return e<0?-1:e%100+1}},9700:(t,e,n)=>{n.d(e,{Gr:()=>r,a2:()=>a,aR:()=>c,hw:()=>l,qF:()=>o});var i=n(4423),s=n(3595);function a(t){let e,n=t;return(0,s.g)(t)&&t.indexOf(":eq")>-1&&(n=t.replace(/html:eq\([0-9]+\)/g,"html"),n.match(/:eq\([0-9]+\)/g).forEach((t=>{e=Number(t.replace(":eq(","").replace(")",""))+1,n=n.replace(t,`:nth-of-type(${e})`)}))),n}function o(t){if(void 0===t)return;const e=t.split(".");return 256*(256*(256*+e[0]+ +e[1])+ +e[2])+ +e[3]}function r(){return new RegExp("^(?=.*?\\b(safari)\\b)(?:(?!chrome|crios).)*$","gi").test(navigator.userAgent)}function c(){const t=navigator.userAgent.toLowerCase();return t.indexOf("ipad")>-1||t.indexOf("iphone")>-1}function l(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return(0,i.d_)("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t)()}},7862:(t,e,n)=>{n.d(e,{TQ:()=>a,Xx:()=>s});let i={};function s(t,e){i[t]=e}function a(t){clearInterval(i[t])}},9404:(t,e,n)=>{n.d(e,{IF:()=>a,pK:()=>s});const i={},s=(t,e)=>{i[t]?i[t].push(e):i[t]=[e]},a=t=>{i[t]&&(i[t].forEach((t=>t())),delete i[t])}},3847:(t,e,n)=>{n.d(e,{De:()=>c,x:()=>o});var i=n(81),s=n(648);const a=(()=>{const t={origin:""};return function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&""!==t.origin)return t.origin;try{const e=document.currentScript?.getAttribute("src");return t.origin=r()||e?.replace(/\/[^\/]+\.js$/,"")||"https://try.abtasty.com",t.origin}catch(t){return(0,s.FF)("Error getting tag origin. Fallback to default origin.",t.message),"https://try.abtasty.com"}}})(),o=function(){return a(arguments.length>0&&void 0!==arguments[0]&&arguments[0]).replace("/4ddf6e3d73ad646ebb967355beb17933","").replace(`/${i.$f.SHARED}`,"")},r=()=>{const t=document.querySelector("#abtasty-initiator")?.getAttribute("data-abtasty-path");return t||null},c=function(){const t=o(arguments.length>0&&void 0!==arguments[0]&&arguments[0]);try{return new URL(t,window.location.href).origin}catch(e){(0,s.FF)(`Error getting tag origin. Fallback to manual origin getter from tagPath: ${t}.`,e.message);const n=t.match(/^((?:[a-z+]+:)?\/\/[^\/]+).*/i);return n?n[1]:window.location.origin}}},7426:(t,e,n)=>{n.d(e,{Dk:()=>s,fD:()=>o,sm:()=>a});let i={};function s(t,e){i[t]=e}function a(){Object.keys(i).forEach((t=>clearTimeout(i[t]))),i={}}function o(t){clearTimeout(i[t])}},6729:(t,e,n)=>{n.d(e,{W:()=>s});var i=n(1134);async function s(){const{addJquery:t,jqueryVarName:e}=(0,i.F5)();if(t){let t;return""!==e&&null!=e&&(t=e.split(".").reduce(((t,e)=>t?t[e]:t),window)),t||window.jQuery||window.$}return window.jQuery}},5437:(t,e,n)=>{n.d(e,{y3:()=>$,Yj:()=>V,Cq:()=>E,R2:()=>_,oE:()=>N,NU:()=>O,Vf:()=>R,Uv:()=>D,sd:()=>B,Zo:()=>L,yq:()=>K,wM:()=>G,Pk:()=>k,aQ:()=>F,Dj:()=>P});var i=n(648),s=n(1134),a=n(3595),o=n(6914);const r=t=>t.reduce(((t,e)=>{const[n,i]=e;return 2===e.length?Object.assign(t,{[n]:i}):t}),{});var c=n(721);const l=(0,c.c)(((t,e,n,i)=>t(i)?e(i):n(i)));var d=n(8689);const u=t=>t[t.length-1],g=(0,c.c)(((t,e)=>e.map(t))),h=(0,c.c)(((t,e)=>e.match(t)));var m=n(9076);const p=(0,c.c)(((t,e)=>e[t])),f=(0,c.c)(((t,e)=>e.reduce(((e,n)=>t(n)?e:e.concat(n)),[])));var y=n(2852),v=n(1205),w=n(3337);function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,m.F)(h(t),l(a.g,(()=>""),u),(0,y.l)("&"),f(d.I),g((0,y.l)("=")),r)(e)}function S(t){return function(t){return/^(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:?[0-9]*)$/.test(t)}(t)||/\[(.)+\]/.test(t)}function T(t){try{const{protocol:e}=t instanceof URL?t:new URL(t);return["http:","https:"].includes(e)}catch(t){return!1}}function E(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;if(!T(t))return(0,i.vV)(`'${t}' is not an http url`),[];const e=O(t);return S(e)?[e]:(0,m.F)((t=>t.split(".")),(t=>t.reverse()),(t=>t.map(((e,n)=>{const i=t.reduce(((t,e,i)=>i<=n?`${e}.${t}`:t));return`.${i}`}))),(t=>t.length>1?t.slice(1):t))(e)}function I(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const e="ABTastyDomainTest=true",n=(0,s.F5)().isSecureCookie||(0,v.GW)()?"Samesite=None;Secure;":"Samesite=Lax;",o=(0,m.F)((t=>E(t)),(t=>t.find((t=>(document.cookie=`${e};path=/;domain=${t};${n}`,-1!==document.cookie.indexOf(e))))))(t);return document.cookie=`${e};expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;domain=${o};${n}`,(0,a.g)(o)||(0,d.I)(o)?((0,i.vV)(`no valid domain found for '${t}'`),null):o}function b(t){return S(t)?1:t.split(".").length}function C(t){if((0,w.lG)(t))return I(t);if(!T(t))return(0,i.vV)(`'${t}' is not an http url (getCookieDomain)`),null;const e=O(t),{authorizedDomains:n=[]}=(0,s.F5)();if(0===n.length)return(0,i.vV)("no authorizedDomains set for the account (getCookieDomain)"),null;if(n.length>1)return I(t);const o=(0,w.aV)(n,e);if(0===o.length)return(0,i.vV)(`no valid domain found for '${t}' (getCookieDomain)`),I(t);const r=function(t){return t.reduce(((t,e)=>{const n=b(t)>b(e);return!t||S(e)||n?e:t}),"")}(o),c=function(t){return t.split(":")[0]}(r);return(0,a.g)(c)||(0,d.I)(c)?((0,i.vV)(`empty domain found for '${t}' (getCookieDomain)`),null):`.${c}`}const _=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;const e={};return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;const i=O(n);return e[i]||(e[i]=t(n)),e[i]}}();function O(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;try{return new URL(t).host||t}catch(e){return t}}function k(t){if(!t.includes("?")&&!t.includes("#"))return t;const e=t.match(/([^#?]+)((?:\?|\#)(?:.+))/i),n=e&&e[2]?e[2].match(/(?:\#|\?)([^#?]+)/gi):[],i=n&&n.reduce(((t,e)=>"?"===e[0]?[[...t[0],e],t[1]]:[t[0],[...t[1],e]]),[[],[]]).map((t=>t.map((t=>t.substring(1))))),s=i&&i[0].length?`?${i[0].join("&")}`:"",a=i&&i[1].length?`#${i[1].join("&")}`:"";return e?`${e[1]}${s}${a}`:t}function D(){return A(/\?([^#]+)/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href)}function N(){return A(/#([^?]+)/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href)}function R(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,m.F)(D,p(t))(e)}function P(t){return-1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href).indexOf(t)}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;return(0,m.F)(L,p(t))(e)}function V(t,e,n){const i=new URL(n),s=""===i.search?"?":"&";return i.search+=`${s}${t}=${e}`,i.href}const M=/^([^=]+)=?(.*)$/;function L(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.includes("?")?(0,m.F)((t=>t.match(/\?([^#]+)/)),l(a.g,(()=>""),(t=>t[t.length-1])),(0,y.l)("&"),f((t=>(0,d.I)(t)||!M.test(t))),g((t=>t.match(M).slice(1))),l((()=>e),r,(t=>t)))(t):e?{}:[]}function $(t){if(null==t||""===t)return"";const e=t.includes("?")?"&":"?",n=L(t),i=L(window.location.href,!1),s=["gclid","cid","utm_source","utm_medium","utm_campaign","utm_term","utm_content","xtor","xts","xtdt","cm_mmc","MKZOID"],a=(0,m.F)((0,o.p)((t=>{let[e]=t;return!(e in n)&&s.includes(e)})),g((t=>`${t[0]}=${t[1]}`)))(i);return 0===a.length?t:t+e+a.join("&")}function j(t){return Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}function F(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;if(!t.includes("?")&&!e.includes("?"))return t;const n=L(t),i=L(e),s=`?${j(Object.assign({},i,n))}`,o=t.includes("#")?`#${j(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return t.includes("#")?(0,m.F)((t=>t.match(/#([^?]+)/)),l(a.g,(()=>""),(t=>t[t.length-1])),(0,y.l)("&"),f((t=>(0,d.I)(t)||"#"===t.replace(/#+/,"#").split("=")[0]||!M.test(t))),g((t=>t.match(M).slice(1))),r)(t):{}}(t))}`:"",c=function(t){return t.includes("?")?t.indexOf("?"):t.includes("#")?t.indexOf("#"):t.length}(t);return`${t.slice(0,c)}${s}${o}`}function H(t,e){if(!t.includes(e))return t;const n=new URL(t);return n.search=n.search.replace(new RegExp(`${e}[^=&#?]*(=[^&#]+)?`,"g"),""),n.hash=n.hash.replace(new RegExp(`${e}[^=&#?]*(=[^&?]+)?`,"g"),""),n.href=n.href.replace(/\?$|\#$|&+$|(\?)&+|(\#)&+|(&)&+|\?(\#)|\#(\?)/g,"$1$2$3$4$5"),/\/[?#]/.test(t)?n.href:n.href.replace(/\/(\?|\#|$)/,"$1")}function U(t){return["tastypreprod","abtasty_qa_assistant"].reduce(H,t)}function x(t){try{return decodeURI(t)}catch(t){}return null}function G(t,e){let n,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;switch(t){case"is":case"simplematch":case"ignore_parameters":return n=function(t){const e=t?new URL(t):window.location,{origin:n,pathname:i}=e;return`${n}${i}`}(a),s=x(n),e===n||`${e}/`===n||e===s||`${e}/`===s;case"exact":case"equals":case"is strictly":return n=U(a||window.location.href),s=x(n),e===n||`${e}/`===n||e===s||`${e}/`===s;case"substring":case"contains":case"contain":return n=U(a||window.location.href),s=x(n),-1!==n.indexOf(e)||-1!==s.indexOf(e);case"regex":case"regexp":n=U(a||window.location.href);try{return new RegExp(e,"i").test(n)}catch(t){const n=`The url check used an invalid regular expression => ${e}`;return(0,i.vV)(n,t),!1}}}function K(t){const e=O(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.host);return!(0,a.g)(t)&&!(0,d.I)(t)&&e.endsWith(t)}},1134:(t,e,n)=>{n.d(e,{$E:()=>m,AU:()=>p,B9:()=>y,Bz:()=>f,F5:()=>d,Fc:()=>a,Ut:()=>o,bA:()=>g,cR:()=>h,iN:()=>c,m_:()=>l,pw:()=>u,yn:()=>r});var i=n(4804);const s={accountSettings:{id:54058,identifier:"4ddf6e3d73ad646ebb967355beb17933",accountName:"hmhco.com - HMH",frameworkVersion:"latest",pack:"premium",quota:0,useChina:!1,toleranceParams:[],toleranceRegex:null,omnitureIntegration:0,accountIframeException:!1,runAsThread:!1,addJquery:!1,jqueryVarName:null,ajaxAutoReload:!0,excludeIE:!0,hashMrasnAllowed:!0,globalCode:"",globalCodeOnDocReady:!0,customCookieDomain:null,customCookiePath:"/",isSecureCookie:!1,oneVisitorOneTest:!1,cookieLifespan:13,waitForConsent:{data:null,campaignRestrictions:{test:!0,perso:!0,redirection:!0,aa:!0,patch:!0},mode:"disabled"},storageMode:"cookies",datalayerVariable:"dataLayer",datalayerMaxToSend:100,tealiumAccountName:null,tealiumProfileName:null,apiTokenWeborama:null,getAlwaysWeborama:null,kruxNamespace:null,eulerianPixelURL:null,clarityProjectId:null,cookielessEnabled:!1,byoidConfig:!1,epoqId:null,emotionAiId:null,recoAndMerchId:null,sampling:100,authorizedDomains:["hmhco.com"]},tests:{1342447:{name:"Subscribe modal form copy optimization New",traffic:50,type:"ab",sub_type:"ab",parentID:0,targetingMode:"noajax",dynamicTrafficModulation:50,dynamicTestedTraffic:100,priority:0,size:2,mutationObserverEnabled:!1,displayFrequencyType:"any",codeOnDomReady:!0,isHashAllocationEnabled:!0,m2eStartRange:0,segmentMode:"some",triggerMode:"some",scopes:{urlScope:[{include:!0,condition:10,value:"https://www.hmhco.com/programs/into-reading"},{include:!0,condition:10,value:"https://www.hmhco.com/programs/into-literature"},{include:!0,condition:10,value:"https://www.hmhco.com/programs/classcraft"},{include:!0,condition:10,value:"https://www.hmhco.com/programs/math-180"}],testId:1342447,qaUrlParameterEnabled:!0},campaignHash:"aad3c73ed82ff26dff8273023e858900",id:1342447,additionalType:"",isAsync:!0,asyncVariationInfoById:{1663960:{id:1663960,traffic:50,name:"Variation 1"}}},global:{needIPFetch:[],needGeolocFetch:[],needAdBlockDetection:[],needUAParserFetch:[],needDCInfosFetch:[],needModificationEngine:!0,needEngagementLevelFetch:[],needDynamicAlloc:[]}},accountLevelTrackings:{mousedown:[{name:"Login Clicks",selector:".header .menu-item .pill"},{name:"Submit button mousedown",selector:"#new-subscribe .button-group .pill"}],submit:[{name:"Submit Subscribe Form",selector:"#new-subscribe .button-group .pill"}]},accountRights:{emotionAiEnabled:!1,collectOnlyInternalEmotionAi:!1,recoAndMerchEnabled:!1},obsoletes:[1310468],integrationConnectors:[{id:3,name:"Datalayer",connectorType:"datalayer",js_key:"dataLayer",type:"ct",custom_trackings:[{id:1634887,name:"Form submit attempt",matches:"some",conditions:[{id:1,operator:"equals",secondValue:null,type:"string",key:"form_submit_attempt",value:"page_url",is_array:!1}],scope:"all"}],transaction_trackings:[],conf:[],instances:[],code:'(()=>{"use strict";const e="some",t="ABT_DATALAYER_INTERVAL_ID",n="ABT_IS_DATALAYER_CHECKED",r="ABT_ALREADY_SENT_CUSTOM_TRACKING",s="event",i="[Integrations][DataLayer][CustomTracking]",o="new_item_pushed_event",a=(e,t,n=100,r=5,s=0)=>{!0===e()?t():s<r&&setTimeout((()=>{a(e,t,n,r,s+1)}),n)},c=(e,t)=>{if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;let n,r,s;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!=r--;)if(!c(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,s[r]))return!1;for(r=n;0!=r--;){const n=s[r];if(!c(e[n],t[n]))return!1}return!0}return e!=e&&t!=t},l=e=>Array.isArray(e)||"object"==typeof e&&"number"==typeof e.length&&e.length>=0,d=e=>e.reduce(((e,t)=>{const[n,r]=e;return l(t)?n.push(t):r.push(t),[n,r]}),[[],[]]),u=e=>e.startsWith(\'"\')&&e.endsWith(\'"\'),g=(e=[],t)=>{e.forEach((e=>{const n={ec:"Action Tracking",ea:e.name,el:e.name};t.logger.info(`${i}: ${e.name} sending to the collect`),t.logger.info(`${i}: customTrackingEvent = `,n),window.abtasty.send("event",n)}))},h={equals:(e,t)=>{return r=t,("string"!=typeof(n=e)?n.toString():n)===("string"!=typeof r?r.toString():r);var n,r},"does not equals":(e,t)=>e!==t,"is lower than":(e,t)=>parseInt(e,10)<parseInt(t,10),"is higher than":(e,t)=>parseInt(e,10)>parseInt(t,10),"is included between":(e,t,n)=>parseInt(e,10)>parseInt(t,10)&&parseInt(e,10)<parseInt(n,10),contains:(e,t)=>"function"==typeof(null==e?void 0:e.includes)&&e.includes(t),"does not contains":(e,t)=>"function"==typeof(null==e?void 0:e.includes)&&!e.includes(t),is_true:e=>!0===e,is_false:e=>!1===e,default:()=>{const e=`${i} This operator is not supported.`;throw console.log(e),new Error(e)}},w=(t,n,r,i)=>"all"!==n&&n!==e?(null==i||i.logger.info("[Datalayer Integration]: VALUE OF MATCHING IS NOT CORRECT",n),!1):"all"===n?!(r===s&&t.length>1)&&t.every((e=>{var t;return l(e)?null===(t=e[e.length-1])||void 0===t?void 0:t.is_success:e.is_success})):t.some((e=>{var t;return l(e)?null===(t=e[e.length-1])||void 0===t?void 0:t.is_success:e.is_success})),v=(e,t)=>{const n=e.key.trim(),r=u(n)?n.replace(/"([^"]*)"/g,"$1"):n;if("is declared"===e.operator)return t[r];if("is not declared"===e.operator)return!t[r];if(![void 0,null].includes(t[r]))return(h[e.operator]||h.default)(t[r],e.value,e.secondValue||void 0,e.type||"string");if(!u(n)){const n=r.split(".");if(t[n[0]]&&n.length>1){const s=((e,t)=>{const[n,...r]=t.split(".");let s,i;for(s=e,i=0;s&&i<r.length;i+=1)s=s[r[i]];return s})(t[n[0]],r),i=h[e.operator];return!(!s||!i)&&i(s,e.value,e.secondValue,e.type||"string")}}return!1},f=(e,t,n)=>e.filter((e=>{try{return v(t,e)}catch(e){return null==n||n.logger.error(`${i} Failed to find event: `,e.message),!1}})),y=(e,t,n)=>{const[r,s]=t;return e.custom_trackings.filter((t=>{const i=t.conditions.reduce(((e,t)=>{if(t.is_array){const s=m(r,t,n);if(s.length){const t=s.map((e=>(e[e.length]={is_success:!0},e.length++,e)));return[...e,...t]}return[...e,{length:1,0:{is_success:!1,"gtm.uniqueEventId":crypto.randomUUID()}}]}const i=f(s,t,n);if(i.length){const t=(e=>e.map((e=>Object.assign(Object.assign({},e),{is_success:!0}))))(i);return[...e,t.flat()]}return[...e,{is_success:!1,"gtm.uniqueEventId":crypto.randomUUID()}]}),[]);return"dataLayer"===e.js_key?w((e=>{const t=new Set;return e.filter((e=>{var n;const r=l(e)?null===(n=e[e.length-1])||void 0===n?void 0:n["gtm.uniqueEventId"]:e["gtm.uniqueEventId"];return!t.has(r)&&(t.add(r),!0)}))})(i.flat()),t.matches,t.scope,n):w(i.flat(),t.matches,t.scope,n)}))},m=(e,t,n)=>e.filter((e=>{if("object"!=typeof e[t.position]||"string"==typeof e[t.position])return!1;try{const n=e[t.position];return v(t,n)}catch(e){return null==n||n.logger.error("Failed to find event: ",e.message),!1}}));class p{constructor(){this.handle=(e,t)=>{try{this.init(e,t),((e,t,n)=>{const r=window[e.js_key];if(!r._isCustomPushDefined)try{const n=r.push.bind(r);r.push=function(r){const s=n(r);return window.dispatchEvent(new CustomEvent(o,{detail:{newItem:r,dataLayerConfig:e,settings:t}})),s},r._isCustomPushDefined=!0}catch(e){t.logger.error(`${n} initDataLayerPush: `,e.message)}})(e,t,i)}catch(e){t.logger.error(`${i}: `,e.message)}},this.init=(e,t)=>{a((()=>{var e;return"true"!==(null===(e=window.sessionStorage)||void 0===e?void 0:e.getItem(n))||!window.ABTasty.isAlreadyChecked}),(()=>{var r;const s=this.getFilteredCustomTracking(e,t);g(s,t),null===(r=window.sessionStorage)||void 0===r||r.setItem(n,"true"),window.ABTasty.isAlreadyChecked=!0}),100)},this.getFilteredCustomTracking=(e,t,n)=>{const r=n?window[e.js_key].slice(n):window[e.js_key],s=d(r);return y(e,s,t)},window._is_ABT_CT_GTM_ALREADY_LISTENING||(window.addEventListener(o,_),window._is_ABT_CT_GTM_ALREADY_LISTENING=!0)}static getInstance(){return p.instance||(p.instance=new p),p.instance}}function _(e){const{detail:{newItem:t,dataLayerConfig:n,settings:r}}=e;p.handleNewValueAdded(t,n,r)}p.handleNewValueAdded=(t,n,r)=>{const i=n.custom_trackings.filter((({id:i,conditions:o,matches:a,scope:c})=>{const u=e=>!!(l(t)?m([t],e,r):f([t],e,r)).length;if(a===e)return o.some(u);const g=o.filter((e=>!1===u(e)));return!g.length||g.length!==o.length&&c!==s&&g.every((e=>{const[t,s]=d(window[n.js_key]);return!![...f(s,e,r),...m(t,e,r)].length}))}));i.length&&g(i,r)};const I=(e,t)=>Object.keys(t).reduce(((n,r)=>(c(t[r],e[r])||(n[r]=t[r]),n)),{}),S=(t,n,r)=>{const s=(e=>(t,n)=>!!f([n],t,e).length)(r),o=n.custom_trackings.filter((({conditions:o,matches:a,name:c})=>{if(a===e)return o.some((e=>s(e,t)));const l=o.filter((e=>!1===s(e,t)));return!l.length||l.length!==o.length&&l.every((e=>{try{return!!f([window[n.js_key]],e,r).length}catch(e){return r.logger.error(`${i} findEventsError: `,e.message),!1}}))}));o.length&&g(o,r)},A=(e,t,n)=>y(e,[[],[t]],n),k=(e,t)=>{var n;const s=null===(n=window.sessionStorage)||void 0===n?void 0:n.getItem(r),o=Object.assign({},window[e.js_key]);if(null==s?void 0:s.trim()){if(JSON.stringify(o)!==s)try{const n=A(e,o,t),r=A(e,JSON.parse(s),t),i=n.filter(((e,t)=>!c(r[t],n[t])));g(i,t)}catch(e){t.logger.error(`${i} initialization failed: `,e.message)}}else{const n=A(e,o,t);g(n,t)}};const E="abtasty_utag_link",T={dataLayer:p.getInstance().handle,utag_data:(new class{constructor(){this.handle=(e,t)=>{a((()=>{var e;return"function"==typeof(null===(e=window.utag)||void 0===e?void 0:e.track)}),(()=>{try{let r;this.init(e,t),n=window.utag.track,window.utag.track=function(s,o,a,c){try{r=s,n.call(this,s,o,a,c),window.dispatchEvent(new CustomEvent(E,{detail:{eventData:r,datalayerConfig:e,settings:t}}))}catch(e){t.logger.error(`${i} WrapError:`,e.message)}}}catch(e){t.logger.error(`${i} Wrapped Link error: `,e.message)}var n}),500,10)},this.init=(e,t)=>{k(e,t)},this.watchDataLayer=(e,n)=>{var s,o;let a=JSON.parse(JSON.stringify(window[e.js_key])),c=null===(s=window.sessionStorage)||void 0===s?void 0:s.getItem(t);c&&clearInterval(c),c=setInterval((()=>{var t;try{const s=JSON.stringify(Object.assign({},window[e.js_key]));null===(t=window.sessionStorage)||void 0===t||t.setItem(r,s);const i=JSON.parse(s),o=I(a,i);Object.keys(o).length&&(a=i,S(o,e,n))}catch(e){n.logger.error(`${i} Error: `,e.message)}}),400),null===(o=window.sessionStorage)||void 0===o||o.setItem(t,String(c))},this.isObject=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,window.addEventListener(E,(e=>{return t=this,n=void 0,s=function*(){a((()=>{var t,n;const{detail:r}=e;return void 0!==(null===(n=null===(t=r.eventData)||void 0===t?void 0:t.data)||void 0===n?void 0:n.tealium_event)}),(()=>{const{detail:t}=e,n=A(t.datalayerConfig,t.eventData.data,t.settings);n.length&&g(n,t.settings)}),1e3,5)},new((r=void 0)||(r=Promise))((function(e,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,a)}c((s=s.apply(t,n||[])).next())}));var t,n,r,s}))}}).handle,tc_vars:(new class{constructor(){this.handle=(e,t)=>{try{this.init(e,t),this.watchDataLayer(e,t)}catch(e){t.logger.error(`${i}: `,e.message)}},this.init=(e,t)=>{k(e,t)},this.watchDataLayer=(e,n)=>{var s,o;let a=JSON.parse(JSON.stringify(Object.assign({},window[e.js_key]))),c=null===(s=window.sessionStorage)||void 0===s?void 0:s.getItem(t);c&&clearInterval(c),c=setInterval((()=>{var t;try{const s=JSON.stringify(Object.assign({},window[e.js_key]));null===(t=window.sessionStorage)||void 0===t||t.setItem(r,s);const i=JSON.parse(s),o=I(a,i);Object.keys(o).length&&(a=i,S(o,e,n))}catch(e){n.logger.error(`${i} Error: `,e.message)}}),400),null===(o=window.sessionStorage)||void 0===o||o.setItem(t,String(c))}}}).handle,default:(e,{logger:t})=>t.error(`${i}: This dataLayer is not supported.`)};window.addEventListener("load",(()=>{var e;null===(e=window.sessionStorage)||void 0===e||e.setItem(n,String(!1))})),window.addEventListener("pageshow",(e=>{var t;null===(t=window.sessionStorage)||void 0===t||t.setItem(n,String(!1))})),window.addEventListener("unload",(function(){var e;null===(e=window.sessionStorage)||void 0===e||e.setItem(r,JSON.stringify({}))})),document.addEventListener("abtasty_resetActionTracking",(()=>{var e;null===(e=window.sessionStorage)||void 0===e||e.setItem(n,String(!1))})),window.ABTastyOnRequest=(e,t)=>{t.logger.info(`${i}: starting execution....`),a((()=>!!window[e.js_key]),(()=>{try{(T[e.js_key]||T.default)(e,t)}catch(e){t.logger.error(`${i} main error:`,e.message)}}),500)}})();const main = window.ABTastyOnRequest;\ndelete window.ABTastyOnRequest;\n'}]},a=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;const{pack:e,quota:n}=t.accountSettings;return 0===e.indexOf("quota")&&n<=0},o=function(){let{accountSettings:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return 1===Number(t.runAsThread)},r=()=>s,c=()=>r().accountLevelTrackings,l=t=>r().tests[t],d=()=>r().accountSettings,u=()=>d().identifier,g=()=>d().id,h=()=>r().crossDomainSettings||[],m=()=>i.Hu.getGlobalCampaignsInfos().needGeolocFetch.length>0,p=()=>"cookies"===d().storageMode,f=()=>r().integrationConnectors,y=()=>d().cookieLifespan||13},5415:(t,e,n)=>{n.d(e,{UT:()=>i,W8:()=>o,Wm:()=>a,sz:()=>s});const i=1,s=10,a=11,o=40},8399:(t,e,n)=>{n.r(e),n.d(e,{ABANDONED_CART:()=>W,ACTION_TRACKING:()=>M,ADBLOCK:()=>_,ADOBE_DMP:()=>d,ADVALO_DMP:()=>r,AMOUNT:()=>Z,BLUEKAI_DMP:()=>a,BROWSER:()=>y,BROWSER_LANGUAGE:()=>p,CAMPAIGN_EXPOSITION:()=>E,CODE:()=>B,CONTENT_INTEREST:()=>G,COOKIE:()=>m,COUPON:()=>tt,CSAT:()=>J,CUSTOM_VARIABLE:()=>V,DATALAYER:()=>$,DAYS_SINCE_FIRST_SESSION:()=>N,DAYS_SINCE_LAST_SESSION:()=>D,DELIVERY_METHOD:()=>X,DEVICE:()=>u,ECOMMERCE_VARIABLE:()=>R,ENGAGEMENT_LEVEL:()=>x,EULERIAN_DMP:()=>i,GEOLOCATION:()=>h,INTEGRATIONS_PROVIDER:()=>Y,IP:()=>g,JS_VARIABLE:()=>T,KEYWORD:()=>H,KRUX_DMP:()=>c,LANDING_PAGE:()=>f,LAST_PURCHASE:()=>j,NPS:()=>z,NUMBER_PAGES_VIEWED:()=>b,PAGE_INTEREST:()=>q,PAGE_VIEW:()=>K,PAYMENT_METHOD:()=>Q,PREVIOUS_PAGE:()=>A,PRODUCT_CATEGORY:()=>nt,PRODUCT_SKU:()=>et,PURCHASE_FREQUENCY:()=>F,RETURNING_VISITOR:()=>v,SAME_DAY_VISIT:()=>C,SCREEN_SIZE:()=>S,SELECTOR:()=>L,SESSION_NUMBER:()=>O,SOURCE:()=>I,SOURCE_TYPE:()=>w,TAGCOMMANDER_DMP:()=>s,TEALIUM_DMP:()=>U,URL_PARAMETER:()=>P,WEATHER:()=>k,WEBORAMA_DMP:()=>l,YSANCE_DMP:()=>o});const i=1,s=2,a=4,o=5,r=6,c=7,l=8,d=10,u=17,g=18,h=19,m=20,p=21,f=22,y=23,v=24,w=25,A=26,S=27,T=28,E=29,I=30,b=31,C=32,_=33,O=34,k=35,D=36,N=37,R=38,P=39,B=40,V=41,M=42,L=43,$=44,j=45,F=46,H=47,U=48,x=49,G=50,K=51,q=52,Y=53,W=54,J=55,z=56,Q=1,X=2,Z=3,tt=4,et=5,nt=6},7405:(t,e,n)=>{n.d(e,{li:()=>w,mn:()=>p,Xp:()=>y,BA:()=>f,z:()=>v,PA:()=>A});var i=n(648),s=n(4721),a=n(4804),o=n(6596);n(1134),n(6257);!function(){const t={}}();var r=n(3346),c=n(3595),l=n(7426),d=n(2484);const u="ABTastyVisitorHistory",g={timeout:3e3,timeoutName:"visitorHistoryFetch",route:"https://dcinfos-cache.abtasty.com/v1/visitor-history/accounts/{clientID}/visitors/{visitorID}"};(()=>{const t={}})();n(6692),n(8987),n(9578),n(88),n(3621),n(117);n(7471),n(4502),n(8009);n(2538),n(8445),n(9467),n(5066);var h=n(977);const m={};function p(t){return a.Hu.getGlobalCampaignsInfos().needDCInfosFetch.indexOf(t)>-1}function f(t){return a.Hu.getGlobalCampaignsInfos().needIPFetch.indexOf(t)>-1}function y(t){return a.Hu.getGlobalCampaignsInfos().needGeolocFetch.indexOf(t)>-1}function v(t){return a.Hu.getGlobalCampaignsInfos().needUAParserFetch.indexOf(t)>-1}function w(t){return a.Hu.getGlobalCampaignsInfos().needAdBlockDetection.indexOf(t)>-1}const A=t=>async(e,n,i)=>(a.Hu.updatePublicTargetingAudienceMode(e),!i||!i?.length||Promise.all(i.map(((n,i)=>S(t)(e,i,n)))).then((t=>n===h.SC.some?t.some((t=>t)):t.every((t=>t))))),S=t=>async(e,n,r)=>{if(void 0===r||null==r.targeting_groups||0===r.targeting_groups.length)return!0;const c=r.is_segment?s.fh:s.ih,l=(await Promise.all(r.targeting_groups.map((async s=>(await Promise.all(s.targetings.map((async l=>{const{targeting_type:d,success:u}=l;let g=void 0===u||u;if(!(0,o.isOnceTargeting)(d)||void 0===u){const u=await m[d](t);if("function"==typeof u)return g=await u(l,e.id,s.position),(0,o.storeTargetingSuccess)(l,g),a.Hu.updatePublicTargetingData(e.id,l,g,c,s.position,n,r.name),g;i.FF("Cannot apply targeting",l),(0,o.storeTargetingSuccess)(l,g),a.Hu.updatePublicTargetingData(e.id,l,g,c,s.position,n,r.name)}return g})))).every(Boolean))))).some(Boolean);return i.NI("Applying audience",r," for ",e,"result = ",l),l}},3026:(t,e,n)=>{n.d(e,{L:()=>E,a:()=>v});var i=n(6046),s=n(3002),a=n(648);const o=(0,i.I)();let r=!1;const c=[];let l,d={mousedown:[],click:[],submit:[],focus:[],blur:[],hover:[]};const u={childList:!0,subtree:!0},g=[document],h=[],m=t=>t.includes("[]")?t.split("[]")[2]:t,p=t=>{const e=h.reduce(((t,e)=>{let{get:n}=e;const i=n();return null===i||"hidden"===i.visibilityState?t:[...new Set([...t,i])]}),[document]);if(e.length&&e.some((t=>!g.includes(t)))){g.length=0,g.push(...e);const n=Object.keys(d);for(const e of n)d[e]&&d[e]?.length&&w(t)(e)}return e},f=(t,e)=>c.some((n=>n.root===t&&n.event===e)),y=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(d[e]||[]).filter((e=>{let{clicked:i,selector:s}=e;if(n&&!i)return!1;const a=m(s);return t.matches(a)||t.closest(a)}))},v=()=>{for(const{root:t,event:e,listener:n}of c)t?.removeEventListener(e,n,!0);c.length=0,l?.disconnect(),d={mousedown:[],click:[],submit:[],focus:[],blur:[],hover:[]},r=!1},w=t=>async e=>{const n=n=>{let{target:i}=n;return A(t)(i,e)},[i]=await(0,s.g)(!0,["type"]),a=i?.toLowerCase()??null;if(["mousedown","click"].includes(e)&&a&&"desktop"!==a&&"ontouchstart"in document.documentElement)r||(()=>{const t=t=>{let{target:e}=t;y(e,"mousedown").forEach((t=>t.clicked=!0)),y(e,"click").forEach((t=>t.clicked=!0))},e=t=>{let{target:e}=t;y(e,"mousedown").forEach((t=>t.clicked=!1)),y(e,"click").forEach((t=>t.clicked=!1))},n=t=>{let{target:e}=t;y(e,"mousedown",!0).forEach((t=>{const n=[t.name,null,t.testId??null,e];o?.then((t=>t?.aggregateActionTracking(...n)))})),y(e,"click",!0).forEach((t=>{const n=[t.name,null,t.testId??null,e];o?.then((t=>t?.aggregateActionTracking(...n)))}))};for(const i of g){if(f(i,"touchstart"))continue;const s=[{event:"touchstart",listener:t},{event:"touchmove",listener:e},{event:"touchend",listener:n}];for(const{event:t,listener:e}of s)i.addEventListener(t,e,!0),c.push({root:i,event:t,listener:e})}})();else if("hover"===e&&"desktop"===a)(t=>{let e,n,i=!1;const s=s=>{if(i||!d.hover||!d.hover.length)return;i=!0,setTimeout((()=>i=!1));const a=s.target;for(const{selector:i}of d.hover){const s=m(i);(a.matches?.(s)||a.closest?.(s))&&(n=a,e=setTimeout((()=>{e=null,A(t)(a,"hover")}),500))}},a=t=>{let{target:i}=t;e&&i===n&&(clearTimeout(e),e=null)};for(const t of g){if(f(t,"pointerenter"))continue;const e=[{event:"pointerenter",listener:s},{event:"pointerleave",listener:a}];for(const{event:n,listener:i}of e)t.addEventListener(n,i,!0),c.push({root:t,event:n,listener:i})}})(t);else for(const t of g)f(t,e)||(t.addEventListener(e,n,!0),c.push({root:t,event:e,listener:n}));r||(r=!0)},A=t=>(t,e)=>{if(d[e])for(const{selector:n,name:i,testId:s}of d[e]){const e=m(n);try{if(t.matches(e)||t.closest(e)){const e=[i,null,s??null,t];o?.then((t=>t?.aggregateActionTracking(...e)))}}catch(t){(0,a.FF)(`Provided for ${s} test selector ${e} is not valid: ${t}`)}}},S=(t,e,n)=>{for(const i of e)d[t]?.push({...i,testId:n})},T=(t,e)=>{for(const{selector:e}of t){if(!e.includes("[]"))continue;const t=e.split("[]").map((t=>t.trim()));if(3!==t.length)continue;const[n,i]=t,s=()=>{const t=document.querySelector(n);if(!t||!(i in t))return null;if("contentDocument"===i){return t.contentDocument}return t[i]};h.push({get:s})}h.length&&(t=>{l??=new MutationObserver((()=>p(t))),l.observe(document.querySelector("body"),u)})(e)},E=t=>(e,n)=>{const i=Object.keys(e);for(const s of i){const i=e[s];T(i,t),p(t),d[s]&&0===d[s]?.length&&w(t)(s),S(s,i,n)}}},9498:(t,e,n)=>{n.d(e,{KK:()=>l,sC:()=>r});var i=n(6552),s=n(7725),a=n(2484),o=n(3595);const r=async(t,e)=>{const n=[],i=(0,s.vm)(),r=i?JSON.parse(a.Ks.getItem(a.b1,"ABTastyForcedM2eCampaigns")||"{}"):{},u=t.reduce(((t,e,n)=>(0!==e.parentID&&(t[e.parentID]?t[e.parentID].push(n):t[e.parentID]=[n]),{...t})),{}),g=e=>{u[e]?.forEach((e=>n.push(t[e])))};for(const s of t)if(!c(s))if(l(s))if(i&&!(0,o.g)(r[s.exclusionGroupId])){r[s.exclusionGroupId]===s.id&&(n.push(s),g(s.id))}else{const[t,i]=[s.m2eStartRange,s.m2eStartRange+s.m2eCoefficient],a=await d(s.exclusionGroupId,e);a>=t&&a<=i&&(n.push(s),g(s.id))}else n.push(s),g(s.id);return n},c=t=>0!==t.parentID,l=t=>!!t?.exclusionGroupId,d=(t,e)=>(0,i.w)(`${t}.${e}`)},9467:(t,e,n)=>{n.d(e,{H:()=>o,d:()=>a});var i=n(2492),s=n(8445);const a=(t,e)=>{const n=new i.E;return n.getHitHistorySessionCst()===t?n.checkHitHistorySession(s._V.CAMPAIGNS,e):(n.cleanHitHistorySession(s._V.CAMPAIGNS),n.cleanHitHistorySession(s._V.CURRENT_SESSION_TIMESTAMP),!1)},o=(t,e)=>(new i.E).setHitHistorySession(s._V.CAMPAIGNS,e,t.getCurrentSessionTimestamp())},4804:(t,e,n)=>{n.d(e,{Hu:()=>it,me:()=>Z,iE:()=>nt});var i=n(977),s=n(9578),a=(n(81),n(3340)),o=n(1134),r=n(9076),c=n(3595),l=n(8689),d=n(6914),u=n(721);const g=(0,u.c)(((t,e)=>e.map((e=>e[t])))),h=(0,u.c)(((t,e,n)=>n[t]===e)),m=(0,u.c)(((t,e)=>{const n={};for(const i in e)t(e[i],i,e)&&(n[i]=e[i]);return n})),p=(0,u.c)(((t,e)=>Object.keys(e).reduce(((n,i)=>(n[i]=t(e[i],i,e),n)),{})));var f=n(648),y=n(7765);const v=["addCSS","addImage","addLink","addParagraph","addHtml","addHTML","advanced sort","bring2back","bring2front","changeImage","changeLink","copy","copyAfter","copyBefore","cut","cutAfter","cutBefore","editAttributes","editHtml","editHTML","editPicture","editStyle","editText","editDirect","hide","hideByClass","hideContent","move","multivarCode","resize","resizeAndDrag","s&rImage","s&rText","sort","addCSS","editStyleCSS","hideByClassCSS","hideCSS"];var w=n(7550),A=n(1387),S=(n(6804),n(5974));n(6361);let T;T=(0,S._)().then((t=>t?.start));const E=["editStyleCSS","sort","changeLink","addLink","editAttributes","addCSS","editPicture"],I=t=>t.filter((t=>{let{type:e,value:n}=t;return v.includes(e)&&null!=n})).map((t=>{const e=t;return E.includes(t.type)&&(e.value=(t=>{try{return JSON.parse(t)}catch(e){return t}})(t.value)),e})),b=async(t,e,n,i,s)=>{(0,l.I)(i)||await(0,A.K6)(i,e,n)},C=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];if(a?.aborted)return void(0,f.NI)(`Campaign instance is outdated. Campaign ${n}`);if((0,c.g)(t))return;const r="string"==typeof e&&""!==e;let l=document,d=e;if(r&&e.includes("[]")){const t=e.split("[]").map((t=>t.trim())),[n,i,s]=t;l=document.querySelector(n)?.[i],l&&(d=s)}r&&l&&Boolean(l.querySelector(d))?await b(0,n,i,t):r?setTimeout((async()=>await C(t,e,n,i,s,a,o)),50):s?(0,w.Q)((async()=>{a?.aborted?(0,f.NI)(`Campaign instance is outdated. Campaign ${n}`):await b(0,n,i,t)})):await b(0,n,i,t)},_=async function(t,e,n,i,s){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=await T,r=I(t);r.length>0&&o&&o(r);const c=(t=>t.filter((t=>{let{type:e,value:n}=t;return-1===v.indexOf(e)})))(t);c.length>0&&await Promise.all(c.map((async t=>{const{type:o}=t;["customScriptNew","changeWithAI"].includes(o)?await C(t.oldValue,t.selector,e,n,i,s,a):/plugin_/.test(o)&&(0,f.FF)("Ignoring old plugin modification.")})))};class O{constructor(t,e,n,i){let{id:s,name:a,traffic:o,modifications:r,widgets:c,components:l,redirections:d}=e;this.testId=t,this.id=s,this.name=a,this.traffic=o,this.modifications=r,this.codeOnDomReady=n,this.widgets=c,this.components=l,this.redirections=d,this.isDeferred=i}async apply(t){(0,f.fH)(`applying modifications (campaign ${this.testId} - variation ${this.id})`,this.modifications),!(0,c.g)(this.redirections)&&this.redirections.length>0?(0,y.oT)(this.redirections,this.testId,this.id):((0,c.g)(this.modifications)||_(this.modifications,this.testId,this.id,this.codeOnDomReady,t,this.isDeferred),["widgets","components"].forEach((async(t,e)=>{(0,c.g)(this[t])})))}}var k=n(6381);n(3002);const D={};var N=function(t){return t.single="'",t.double='"',t.back="`",t}(N||{});const R=async(t,e,n)=>{(0,f.fH)(`applying analytics (campaign ${e.campaignId})`),(0,c.g)(t)||(async(t,e)=>{t.forEach((t=>{let{name:n,wave:i,tracker:s,implementation:a,functionName:o}=t;const r=D[n];r?r(e,i,s,a,o):(0,f.FF)("Analytics tool is not supported by AB Tasty: ",n,`(for campaign ${e.campaignId})`)}))})(t,e),(0,c.g)(n)||(async(t,e)=>{const n=/([\'\"\`]{1})?{{([a-z]*)}}([\'\"\`]{1})?/gi,i=/([\`\'\"]{1})/gi;t.forEach((t=>{let{code:s}=t;const a=s.replace(n,((t,n,s,a)=>{const o="string"==typeof e[s]?e[s].replace(i,((t,e)=>`\\${e}`)):e[s];return[...Object.values(N).includes(n)?[n]:[N.back],o,...Object.values(N).includes(a)?[a]:[N.back]].join("")}));(0,A.K6)(a,e.campaignId,e.variationId)}))})(n,e)};var P=n(3026),B=n(7643),V=n(6046),M=n(1492),L=n(8399),$=n(4721),j=n(3346),F=n(7426),H=n(3847);var U=n(6596),x=n(8009),G=n(5066),K=n(9825);var q=n(9467);const Y=864e5,W=t=>{const e=new Date;return e.setUTCHours(t.getUTCHours()),e.setUTCMinutes(t.getUTCMinutes()),e.setUTCSeconds(t.getUTCSeconds()),e.setUTCMilliseconds(t.getUTCMilliseconds()),e},J=(t,e)=>{const n=e.getCampaign(t.data.id);if(!n)return!0;const{lastSessionSeen:s,lastViewTimestamp:a}=n,{type:o,unit:r,value:c}=t.getTargetingDisplayFrequency();switch(o){case i.fH.any:break;case i.fH.once:return!a;case i.fH.oncePerSession:if(a)return s!==e.getNumberOfSessions();case i.fH.regular:if(a)switch(r){case i.Vd.session:return s===e.getNumberOfSessions()||s+c<=e.getNumberOfSessions();case i.Vd.day:return((t,e)=>{const n=new Date(t),i=(W(n).getTime()-t)/Y;return 0===i||i/e>=1})(a,c);case i.Vd.week:return((t,e)=>{const n=new Date(t),i=W(n);for(;i.getUTCDay()!==n.getUTCDay();)i.setUTCDate(i.getUTCDate()-1);const s=(i.getTime()-t)/Y/7;return 0===s||s/e>=1})(a,c)}}return!0};var z=n(20),Q=n(9498),X=n(6259);let Z=function(t){return t[t.Original=0]="Original",t[t.Untracked=-1]="Untracked",t[t.Timeout=-2]="Timeout",t}({});const tt={id:0,name:"Original",masterVariationId:0},et={},nt=t=>et[t];class it{abortController=(()=>new AbortController)();constructor(t){const{id:e}=t;if(nt(e))return nt(e);this.data=t,this.forceUntracking=!1,et[e]=this,this.initPublicData(),this.hasBeenChecked=this.memoizeHasBeenChecked()}static resetCampaigns(){Object.keys(et).forEach((t=>{const e=nt(Number(t));e.abortController.abort("Campaign has been reset."),e.chosenVariation=null,e.updatePublicData({id:null,name:null}),e.setStatus(a.B.pending),e.data.audienceTrigger&&(0,U.resetTargetingSuccess)(e.data.audienceTrigger),e.data.audienceSegment&&(0,U.resetTargetingSuccess)(e.data.audienceSegment),delete et[t]}))}getType(){return this.data.type}getSubType(){if(this.isMultipageChild())return i.qA.multipageTest;if(this.isMultivariateChild())return i.qA.multivariate;if(this.isPersonalisationChild()){const t=it.instantiate(this.data.parentID);return!!t&&t.data.sub_type||i.cz.subsegment}return this.isAA()?i.cz.aa:this.data.sub_type||i.cz.ab}getAdditionalType(){return this.data.additionalType||null}getConsentType(){return this.getAdditionalType()?this.getAdditionalType():this.isPersonalisation()||this.isPersonalisationChild()?"perso":this.isAA()?"aa":this.isMultipagePatch()?"patch":"test"}getChildren(){return this.data.children||[]}getId(){return this.data.id}getName(){return this.data.name}getChosenVariation(){return this.chosenVariation}static instantiate(t){const e=it.getCampaignData(t);if(e)return new it(e)}static getActiveCampaigns(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,r.F)(m(((e,n)=>{let{status:i,variationID:s}=e;return(null!==t&&t===Number(n)||null===t)&&[a.B.accepted,a.B.acceptedByRedirection].includes(i)&&null!==s&&s!==Z.Untracked})),p(((t,e)=>({...t,testDatas:nt(e).data}))))(window.ABTasty.results)}static getCampaignData(t){return(0,o.yn)().tests[t]}static getCampaignsDatas(t){const e=t||(0,o.yn)(),{global:n,...i}=e.tests;return Object.values(i)}static sortCampaignsParentsByPrioASC(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.sort(((t,e)=>Number(t.priority)-Number(e.priority))).reduce(((t,n)=>{const{priority:i,parentID:s}=n,o=0!==s,r=it.instantiate(n.id);if(o)return r.isPersonalisationChild()&&e&&r.setStatus(a.B.notPrioritizedYet),t;r.isPersonalisation()&&e&&r.setStatus(a.B.notChecked);const c=void 0!==t[i]?[...t[i],n]:[n];return{...t,[i]:c}}),{})}static getGlobalCampaignsInfos(t){const e=t||(0,o.yn)(),{global:n}=e.tests;return n}static getParentCampaignsIDs=t=>(0,r.F)((0,d.p)(h("parentID",0)),g("id"))(t);static getCampaignsSortedByPrio=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return it.sortCampaignsParentsByPrioASC(t,e)};static filterCampaignByPrio=(t,e)=>t[e];getVariation(t){return t===Z.Original?tt:this.data.variations[t]}getVariationInfoByMasterId(t){return this.isAsync()?Object.values(this.data.asyncVariationInfoById).find((e=>this.data.variations[e.id].masterVariationId===t)):Object.values(this.data.variations).find((e=>e.masterVariationId===t))}getMasterVariationId(t){return this.getVariation(t).masterVariationId}getParent(){const t=it.getCampaignData(this.data.parentID);return new it(t)}getParentId(){return this.getParent().data.id}getParentName(){return this.getParent().data.name}getStatus(){return this.data.status||a.B.pending}getAbortSignal(){return this.abortController.signal}getSeenBrothers(t){const{parentID:e,siblings:n}=this.data;return 0===e||null==n||0===n.length?null:n.map((e=>{const n=t.getCampaign(e);return n?{campaignId:e,...n}:null})).filter((t=>!(0,c.g)(t)))}setStatus(t){this.data.status=t,(0,c.g)(window.ABTasty.results[this.data.id])&&this.initPublicData(),this.hasBeenCheckedResolve&&t!==a.B.checking&&this.hasBeenCheckedResolve(t),window.ABTasty.results[this.data.id].status=t}memoizeHasBeenChecked(){let t=null;return()=>t||(t=new Promise((t=>{this.hasBeenCheckedResolve=t})),t)}isAA(t,e){return(t||this.data.type)===i.cz.aa||(e||this.getAdditionalType())===i.JP.aaTest}isContainer(){return[i.cz.multipage,i.cz.multivariate,i.cz.mastersegment].includes(this.data.type)}isChild(){return this.isMultipageChild()||this.isMultivariateChild()||this.isPersonalisationChild()}isMultivariate(){return this.data.type===i.cz.multivariate}isMultipage(){return this.data.type===i.cz.multipage}isMultipagePatch(t,e){return(t||this.data.type)===i.cz.multipage&&(e||this.data.sub_type)===i.qA.patch}isPersonalisation(){return this.data.type===i.cz.mastersegment}isPatch(t,e){return(t||this.data.sub_type)===i.qA.patch||(e||this.data.additionalType)===i.JP.patch}isMultivariateChild(){if(0===this.data.parentID)return!1;return it.instantiate(this.data.parentID).isMultivariate()}isMultipageChild(){if(0===this.data.parentID)return!1;return it.instantiate(this.data.parentID).isMultipage()}isPersonalisationChild(){if(0===this.data.parentID)return!1;return it.instantiate(this.data.parentID).isPersonalisation()}isDynamicAllocation(){return null!=this.data.dynamicTrafficGoalId&&""!==this.data.dynamicTrafficGoalId}isUsingHashAllocation(){return this.isChild()?this.getParent()?.data.isHashAllocationEnabled:this.data.isHashAllocationEnabled}getDynamicAllocationProperties(){return{isDynamic:this.isDynamicAllocation(),testedTraffic:this.data.dynamicTestedTraffic,modulation:this.data.dynamicTrafficModulation}}getTargetingDisplayFrequency(){const t={type:this.data.displayFrequencyType};return this.data.displayFrequencyUnit&&(t.unit=this.data.displayFrequencyUnit),this.data.displayFrequencyUnit&&(t.value=this.data.displayFrequencyValue),t}isAsync(){return this.data.isAsync||!1}isTargetByEvent(){return Boolean(this.data.scopes.urlScope?.find((t=>{let{value:e}=t;return e===$.Is})))}isUsingCodeOnDomReady(){return this.isChild()?it.instantiate(this.data.parentID).data.codeOnDomReady:this.data.codeOnDomReady}alreadySeenOneTest=t=>e=>{let n=!1;const{siblings:i=[]}=this.data,s=t.getCampaigns();return Object.keys(s).forEach((t=>{const a=(0,o.m_)(Number(t)),r=s[t];null!=a&&null==a.type.match(/(mastersegment|subsegment)/)&&!this.isPatch(a.sub_type,a.additionalType)&&!this.isAA(a.type,a.additionalType)&&!this.isMultipagePatch(a.type,a.sub_type)&&Number(t)!==e&&r.variationID!==Z.Untracked&&i.indexOf(Number(t))<0&&(n=!0)})),n};initPublicData(){const{id:t,name:e,type:n,status:i}=this.data,s={name:e,type:n,sub_type:this.getSubType(),additional_type:this.getAdditionalType(),status:i,variationID:this.chosenVariation,variationName:null,targetings:{[$.vw]:{},[$.l$]:{}}};window.ABTasty.results&&(window.ABTasty.results[t]=window.ABTasty.results[t]??s)}static updatePublicTargetingData(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.fS,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;const r=window.ABTasty.results[t];if(void 0===r||!e)return;let c=r.targetings[i];if([$.ih,$.fh].indexOf(i)>-1){c=c||[];const t={success:n,conditions:e.conditions,targeting_type:e.targeting_type,operator:e.operator,name:Object.keys(L).find((t=>L[t]===e.targeting_type)),group:s,audiencePosition:a,audienceName:o};c=c.filter((e=>e.targeting_type!==t.targeting_type||e.group!==t.group||e.audiencePosition!==t.audiencePosition)),c.push(t),c.sort(((t,e)=>t.audiencePosition-e.audiencePosition))}else c=c||{},c[e.targeting_type]={...c[e.targeting_type],conditions:e.conditions,success:n},i===$.fS&&(c[e.targeting_type]={...c[e.targeting_type],operator:e.operator,name:Object.keys(L).find((t=>L[t]===e.targeting_type))});r.targetings[i]=c,window.ABTasty.results[t]=r}static updatePublicTargetingAudienceMode(t){const e=t.id,n=window.ABTasty.results[e];t&&e&&(n[$.xu]=t.segmentMode,n[$.Mz]=t.triggerMode),window.ABTasty.results[e]=n}updatePublicData(t){let{id:e,name:n}=t;window.ABTasty.results[this.data.id].variationID=e,window.ABTasty.results[this.data.id].variationName=n}hasSeenMaster(t){const{parentID:e}=this.data;return 0===e?null:!(0,c.g)(t.getCampaign(e))}hasBrotherAlreadyStarted(){const{parentID:t,siblings:e}=this.data;return 0!==t&&(null!=e&&0!==e.length&&e.some((t=>it.instantiate(t).getStatus()===a.B.accepted)))}hasAlreadySeenBrothers(t){const e=this.getSeenBrothers(t);return!(0,c.g)(e)&&!(0,l.I)(e)}isCheckingOtherCampaigns(){if(this.isPersonalisation()||this.isPersonalisationChild())return!1;return it.getCampaignsDatas().filter((t=>{let{id:e}=t;const n=nt(e);return e!==this.data.id&&!(0,c.g)(n)&&(!(n.isPersonalisation()||n.isMultipage()||n.isMultivariate())&&e!==this.data.id&&n.getStatus()===a.B.checking)})).length>0}isOneVisitorOneTestDone(t){const{oneVisitorOneTest:e}=(0,o.F5)(),{id:n,type:s,parentID:a}=this.data;if(e&&s!==i.cz.subsegment&&!this.isPatch()&&!this.isAA()){let e=n;return s===i.cz.ab&&this.isMultipageChild()&&(e=a),this.alreadySeenOneTest(t)(e)}return!1}static abTastyStartTest=t=>async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=nt(e);if(void 0!==i){if(n===Z.Untracked)return void i.setStatus(a.B.traffic);if(n===Z.Timeout)return void i.setStatus(a.B.timeout);const s=t.getCampaign(e);if(!(0,c.g)(n)&&(0,c.g)(s)){i.isUsingHashAllocation()?(0,X.L)(e,n):t.campaignView(e,n,a.B.accepted,!0)}await i.executeCampaign(t)}else{const t=it.getCampaignsDatas().find((t=>t.id===e));t&&(0,Q.KK)(t)&&(0,f.FF)(`the campaign ${e} hasn't been executed through ABTastyStartTest() method since it's part of an exclusion group`)}};async updateCampaign(t,e){if(!this.isAsync()||t===Z.Timeout||t===Z.Untracked)return;const n=await Promise.all(e.map((async t=>await async function(t,e,n){const i=`${(0,H.x)()}/${(0,o.pw)()}/${t}.${e}.json?${n}`;let s=!1;const a=(()=>{try{return new AbortController}catch(t){(0,f.FF)("Cannot create AbortController",t)}})(),r=setTimeout((()=>{s||(a?.abort(),(0,f.FF)(`Modifications can't be fetched for ${t}`))}),3e3);return(0,F.Dk)(`modifiationsFetchLoop_${t}`,r),(0,j.J)(i,{signal:a?.signal}).then((t=>t.json())).then((t=>(clearTimeout(r),t&&t._taginfo&&delete t._taginfo,s=!0,[t,null]))).catch((t=>(clearTimeout(r),[null,t])))}(this.data.id,Number(t),this.data.campaignHash)))),i=n.map((t=>{let[e]=t;return e})),s=n.map((t=>{let[,e]=t;return e})),r=i.find((e=>e?.id===t));s.every((t=>null===t))?(0,l.I)(r)||(this.data.variations={[t]:r}):s.some((t=>"AbortError"===t?.name))?this.setStatus(a.B.timeout):this.forceUntracking=!0}sendExecutedCampaignEvent(t){(new k.k).dispatchCustomEvent(s.u.Name.executedCampaign,{campaignId:this.data.id,variationId:this.getVariation(t).id,status:this.getStatus(),type:this.getSubType()})}async applyGlobalCode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;(0,f.NI)(`Executing campaign ${e} JavaScript code.`);const s=async()=>{if(this.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${e}`),!1;(0,c.g)(t)||(0,l.I)(t)||(0,A.K6)(t,e,n)};i?(0,w.Q)((async()=>await s())):await s()}async executeCampaign(t){if(this.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${this.getId()}`),!1;const e=t.getVisitorId(),n=this.data.id,i=this.data.parentID,o=t.getCampaign(n);let r=await(0,G.h)(this,e,t,o,i,(0,y.sw)(this.getId()));return this.updateCampaign(r,this.data.asyncVariationInfoById?Object.keys(this.data.asyncVariationInfoById):[]).then((async()=>{const{id:e,parentID:n,status:i,name:o,variations:l,globalCode:d,widgets:u,analytics:g,customAnalytics:h,actionTrackings:m}=this.data;if(this.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${e}`),!1;i===a.B.timeout?r=Z.Timeout:this.forceUntracking&&this.isAsync()?(r=Z.Timeout,this.setStatus(a.B.failedLoading)):(0,y.sw)(e)?this.setStatus(a.B.acceptedByRedirection):this.setStatus(a.B.accepted),this.isDynamicAllocation()&&this.isUsingHashAllocation()&&(0,z.ws)(e,r),(0,f.fH)("Campaign Viewed =",e,r),t.campaignView(e,r,this.data.status,!this.isUsingHashAllocation());const p=this.isUsingCodeOnDomReady();if([Z.Timeout,Z.Untracked].includes(r)||!l?.[r]&&r!==Z.Original)return this.forceUntracking&&r===Z.Timeout?(this.setStatus(a.B.failedLoading),!1):r===Z.Timeout?(this.setStatus(a.B.timeout),!1):(this.setStatus(a.B.traffic),!1);{const n={caid:String(e),vaid:String(r)};if((0,q.d)(t.getCurrentSessionTimestamp(),this.getId()))(0,V.I)().then((t=>{if(this.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${e}`),!1;t?.notifyHit(M.YQ.campaign,n,Date.now())}));else{(new B.n).setInternalHit(M.YQ.campaign,n)}(0,c.g)(d)||p||this.applyGlobalCode(d,this.getId(),r,!1),r===Z.Original||(0,y.sw)(e)||(this.chosenVariation=new O(e,l[r],p,this.isAsync()),await this.chosenVariation.apply(this.getAbortSignal())),(0,w.Q)((async()=>{if(this.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${e}`),!1;p&&this.applyGlobalCode(d,this.getId(),r,!0),m&&((0,c.g)(m)||(0,P.L)(t)(m,e));const n=this.getVariation(r),i=this.isChild()?this.getParent().data.analytics:void 0,a=!(0,c.g)(i)&&i.length>0?i:g;if(!(0,c.g)(a)||!(0,c.g)(h)){const t={campaignName:o,campaignId:e,variationName:n.name,variationId:n.id},i=()=>{(new x.NO).haveConsent([x.rv.collect])?R(a,t,h):window.addEventListener(`abtasty_${s.u.Name.consentValid}`,(t=>{const{detail:e}=t;e&&e.consentFor.includes(x.rv.collect)&&i()}))};(0,y.oi)()||i()}return this.updatePublicData(n),(0,y.oi)()||(0,q.H)(t,this.getId()),this.sendExecutedCampaignEvent(r),!0}))}}))}async apply(t){const{id:e}=this.data;let n=!1;if((0,y.sw)(e))return this.executeCampaign(t),!0;if(!J(this,t))return this.setStatus(a.B.displayFrequency),!1;const s=(0,U.checkTargeting)(t,this);return await Promise.race([s,new Promise((t=>setTimeout((()=>{n=!0,t(!1)}),$.nc)))])?(await this.executeCampaign(t),!0):(n&&s.then((async e=>{if((t=>e=>{const{id:n,type:s}=e.data;if(e.getAbortSignal().aborted)return(0,f.NI)(`Campaign instance is outdated. Campaign ${n}`),!1;if(s===i.cz.subsegment&&e.hasBrotherAlreadyStarted())return e.setStatus(a.B.otherSubsegment),!1;if(e.isOneVisitorOneTestDone(t))return e.setStatus(a.B.oneVisitorOneTest),!1;const o=e.isChild()?e.getParent().data.priority:e.data.priority;return!(o>0&&(0,K.nU)([o]).length>0&&(e.setStatus(a.B.notPrioritizedYet),1))})(t)(this)&&e)return await this.executeCampaign(t),!0})),!1)}}},9825:(t,e,n)=>{n.d(e,{Mm:()=>h,nU:()=>u,tP:()=>g});var i=n(977),s=n(4804),a=n(648),o=n(9578),r=n(8009);const c=t=>async(e,n,i)=>{e.setStatus(i);const s=i=>{const{detail:c}=i;e.getAbortSignal().aborted?(window.removeEventListener(`abtasty_${o.u.Name.consentValid}`,s),(0,a.NI)(`Campaign instance is outdated. Campaign ${e.getId()}`)):c&&c.consentFor.includes(r.rv[n])&&(window.removeEventListener(`abtasty_${o.u.Name.consentValid}`,s),t())};return window.addEventListener(`abtasty_${o.u.Name.consentValid}`,s),!1};n(7405);var l=n(3340);const d=t=>async e=>{(0,a.fH)(`Starting ${e.length} campaigns: ${e}`);const i=e.map(s.Hu.instantiate);Promise.resolve().then(n.bind(n,4349)).then((e=>{e.addCheckTargetingListener(t)}));const o=i.reduce(((e,n)=>{if(n.isContainer()){n.setStatus(l.B.notChecked);const i=n.getChildren().map(s.Hu.instantiate).map((e=>{const n=()=>e.apply(t);return(0,r.Vn)(e.getConsentType())?((0,a.fH)("----- child campaign::",e.getType()),e.apply(t)):c(n)(e,e.getConsentType(),l.B.consent)}));return[...e,...i]}{const i=()=>n.apply(t);return(0,r.Vn)(n.getConsentType())?((0,a.fH)("campaign::",n),[...e,n.apply(t)]):[...e,c(i)(n,n.getConsentType(),l.B.consent)]}}),[]);return Promise.all(o).then((t=>t.some((t=>!!t))))},u=t=>{const e=s.Hu.getCampaignsDatas(),n=s.Hu.getActiveCampaigns();return Object.values(n).filter((n=>{const i=n.testDatas.parentID>0?e.find((t=>{let{id:e}=t;return e===n.testDatas.parentID}))?.priority||0:n.testDatas.priority;return 0!==i&&!t?.includes(i)}))};function g(t,e){const n=Object.keys(t);return Object.keys(e).sort(((t,e)=>Number(t)-Number(e))).reduce(((t,s)=>{if("0"===s)return t;const a=e[Number(s)].reduce(((t,e)=>{const s=e.children;if(s){const a=s.some((t=>n.includes(t.toString())&&e.sub_type&&[i.qA.multipagePersonalization,i.qA.multiexperiencePersonalization].includes(e.sub_type)));return a?[...t,e.id]:t}return t}),[]);return a.length&&t.set(Number(s),a),t}),new Map)}const h=async function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;const i=[];if(n.size)for(const[e,s]of n){if(await d(t)(s)){i.push(...s);break}}for(const[n,s]of Object.entries(e)){const e=s.map((t=>t.id));if("0"===n)await d(t)([...e]);else{const n=await d(t)(e),s=e.length>0&&n;if(i.length&&i.some((t=>e.includes(t))))break;if(s)break}}}},7765:(t,e,n)=>{n.d(e,{oT:()=>y,kQ:()=>h,o9:()=>p,oi:()=>f,SL:()=>g,sw:()=>m});const i=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;const e=document.createElement("style");e.type="text/css";const n=".ABTastyHidden { display: none !important }";e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("html")[0].setAttribute("class","ABTastyHidden"),setTimeout((()=>{const t=document.getElementsByTagName("html")[0];t.className=t.className.replace("ABTastyHidden","")}),t)};var s=n(3595),a=n(5437),o=n(1134),r=n(1873),c=n(7471),l=n(648),d=n(8009);n(6692);const u={testID:null,variationID:null,previousLogicalView:null,visitorId:null},g=()=>{u.testID=null,u.variationID=null,u.previousLogicalView=null,u.visitorId=null,delete window.ABTasty.redirectedFrom,window.ABTasty.pendingRedirection=!1},h=()=>u,m=t=>{const{testID:e}=h();return!(0,s.g)(e)&&e===t},p=()=>{if(f())return!1;if(h().testID)return!0;const t=new c.n,e=((0,a.Vf)(c.t.mrasn)||t.getMrasn()).split(".");if(e.length>=2){const n=e[2]&&e[2].length>0?e[2]:null;let i=null,s=null;return s=e[3]?Number(e[3]):null,s&&Date.now()-s>=1e4?!1:(function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u.testID=t,u.variationID=e,u.previousLogicalView=n,u.visitorId=i}(Number(e[0]),Number(e[1]),n,i),window.ABTasty.redirectedFrom={...h()},t.setMrasn(""),!0)}return!1},f=()=>!!window.ABTasty.pendingRedirection,y=async(t,e,n)=>{const{ATInternetReferrer:u,transferParameters:g,isRegex:h,target:m,pattern:y}=t[0];if((0,s.g)(m))return void(0,l.FF)(`Couldn't apply redirection of campaign ${e} and variation ${n}`);const v=new RegExp(c.t.mrasn);if(f()||p()||v.test(m))return;i(1e3),window.ABTasty.pendingRedirection=!0;let w=m;if(h&&(w=((t,e)=>{const n=new RegExp(e,"i"),i=window.location.href.replace(n,t);return(0,a.Pk)(i)})(m,y)),g&&(w=(0,a.aQ)(w,window.location.href)),w=(0,a.y3)(w),w=await(async(t,e,n)=>{const i=[e,n,(0,r.D0)()||""];if((0,d.Vn)("storage"),(0,o.yn)().accountSettings.hashMrasnAllowed){const e=i.filter((t=>t.toString().length>0)).join(".");return(0,a.Yj)("mrasn",e,t)}{i.push(Date.now());const t=new c.n;t.setMrasn(i.join(".")),t.save()}return t})(w,e,n),u&&document.referrer){const t=new URL(document.referrer).hostname;w=(0,a.Yj)("xtref",t,w)}/MSIE/.test(navigator.userAgent)&&(w=w.replace("&","&#38")),window.location.replace(w),i(1)}},4349:(t,e,n)=>{n.r(e),n.d(e,{addCheckTargetingListener:()=>c,allowedStatus:()=>o,checkTargetingEventName:()=>r});var i=n(6596),s=n(4804),a=n(3340);const o=[a.B.checking,a.B.pending,a.B.qaMode,a.B.targetPages,a.B.trigger,a.B.segment,a.B.rejected,a.B.audience,a.B.targetByEventPending],r="abtasty_checkTargeting",c=(()=>{let t=!1;return function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t=!1),t||(t=!0,window.addEventListener(r,(t=>{if(!t.detail)return;const{campaignId:n,withUrl:a,shouldCheckAll:r}=t.detail;n&&(t=>async function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=(0,s.iE)(e);r&&o.includes(r.getStatus())&&(a&&(r.data.audienceTrigger&&(0,i.resetTargetingSuccess)(r.data.audienceTrigger),r.data.audienceSegment&&(0,i.resetTargetingSuccess)(r.data.audienceSegment)),(n?await(0,i.checkTargeting)(t,r):await(0,i.checkScopesAndAudiences)(t,!0,r))&&await r.executeCampaign(t))})(e)(n,a,r)})))}})()},6596:(t,e,n)=>{n.r(e),n.d(e,{audienceUseTargetingType:()=>nt,checkAudiences:()=>x,checkScopes:()=>U,checkScopesAndAudiences:()=>G,checkTargeting:()=>K,containsOnlyOnceTargetings:()=>W,handleTargetingFailure:()=>Z,handleTargetingSuccess:()=>X,isOnceTargeting:()=>Y,pendingModeLoader:()=>z,recheckTargetingByHit:()=>c,registerPendingCriteria:()=>J,resetTargetingSuccess:()=>tt,storeTargetingSuccess:()=>et,waitDatalayerDetection:()=>ut,waitForTargetingAvailability:()=>dt});var i=n(8399),s=n(3595),a=n(4349),o=n(4804);const r=(t,e,n)=>n.filter((t=>{let{targetingMode:e}=t;return"noajax"===e})).filter((n=>{let{id:i,audienceTrigger:r,audienceSegment:c}=n;const l=(0,o.iE)(i);return!(!l||!a.allowedStatus.includes(l.getStatus()))&&("segment"===e&&!(0,s.g)(c)&&Array.isArray(c)?nt(c,t):!("trigger"!==e||(0,s.g)(r)||!Array.isArray(r))&&nt(r,t))})).map((t=>{let{id:e}=t;return e})),c=(t,e)=>{const n=o.Hu.getCampaignsDatas(),s=[];switch(t.toUpperCase()){case"EVENT":const{ec:t}=e;"eco"===t?s.push(...r(i.ECOMMERCE_VARIABLE,"trigger",n)):"Action Tracking"===t&&s.push(...r(i.ACTION_TRACKING,"segment",n));break;case"CAMPAIGN":s.push(...r(i.CAMPAIGN_EXPOSITION,"segment",n));break;case"TRANSACTION":case"ITEM":s.push(...r(i.LAST_PURCHASE,"segment",n)),s.push(...r(i.PURCHASE_FREQUENCY,"segment",n));break;case"SEGMENT":s.push(...r(i.CUSTOM_VARIABLE,"segment",n)),s.push(...r(i.INTEGRATIONS_PROVIDER,"segment",n))}s.forEach((t=>{const e=new CustomEvent(a.checkTargetingEventName,{detail:{campaignId:t,shouldCheckAll:!0,withUrl:!0}});window.dispatchEvent(e)}))};var l=n(648),d=n(1134),u=n(7405),g=n(5437),h=n(5415);const m={[h.UT]:"equals",[h.sz]:"contains",[h.Wm]:"regexp",[h.W8]:"ignore_parameters"};function p(t){let{value:e,condition:n}=t;return(0,g.wM)(m[n],e)}n(81);var f=n(3340),y=n(1387),v=n(6804);var w=n(6729),A=n(9700);async function S(t){let{value:e,include:i}=t,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;const o=(0,w.W)();let r=(0,A.a2)(e),c=document;const l=e.includes("[]");if(l){const t=e.split("[]").map((t=>t.trim())),[n,i,s]=t,a=(0,A.a2)(n),o=document.querySelector(a)?.[i];o&&(c=o,r=(0,A.a2)(s))}return o.then((async t=>void 0===t||l?Promise.resolve(Boolean(c.querySelector(r))):(await t(e).promise()).length>0)).then((async t=>{const o=i?t:!t;return s&&a&&!o&&Promise.all([Promise.resolve().then(n.bind(n,4349)),Promise.resolve().then(n.bind(n,8318))]).then((t=>{let[n,s]=t;s.addObservance(c,e,i,(()=>{const t={campaignId:a},e=new CustomEvent(n.checkTargetingEventName,{detail:t});window.dispatchEvent(e)}))})),o}))}async function T(t,e,n){try{const i=await async function(t,e,n){return Promise.all(t.reduce(((t,i)=>{let{value:s,include:a}=i;if(s.includes("[]")){const i=s.split("[]").map((t=>t.trim())),[o]=i;t.push(S({value:o,include:a},e,n))}return t.push(S({value:s,include:a},e,n)),t}),[]))}(t,n,e);return i.some((t=>t))}catch(e){const n="Scope error (selector)";return l.vV(n,t),!1}}var E=n(8987);function I(t){let{name:e,value:n,include:i}=t;const s=E.A.get(e);let a=!1;return(s||""===s)&&(a=!0,null!=n&&(a=null!==s.match(new RegExp(n,"i")))),i?a:!a}const b=(0,n(721).c)(((t,e)=>{const n={};return e.forEach((e=>{const i=t(e);n[i]=n[i]||[],n[i].push(e)})),n}));var C=n(1666);const _=t=>e=>{let{range:n,from:i,to:s}=e;return n?t>=Number(i)&&t<=Number(s):t===Number(i)};function O(t){return void 0!==t.favorite_url_id}function k(t,e){let{url:n,operator:i}=t;return(0,g.wM)(i,n,e)}function D(t,e){let{favorite_url_id:n}=t;return function(t,e){const n=t.filter((t=>{let{include:e}=t;return!e})),i=t.filter((t=>{let{include:e}=t;return e}));return!n.some((t=>k(t,e)))&&(!!i.some((t=>k(t,e)))||0===i.length)}(e.filter((t=>{let{favorite_url_id:e}=t;return e===n})))}var N=n(4721);const R="abtasty_qa_assistant_campaign_id";function P(t,e){try{return((t,e)=>!!t&&(0,g.Dj)(R)&&Number((0,g.Vf)(R))===e)(t,e)}catch(e){const n="Scope error (QA URL PARAMETER ENABLED)";return l.vV(n,t),!1}}const B=t=>t,V={url_scope:{method:t=>Promise.resolve(function(t){try{const e=t.filter((t=>{let{include:e}=t;return!e})),n=t.filter((t=>{let{include:e}=t;return e}));return!(e.some(p)||!n.some(p)&&0!==n.length)}catch(e){const n="Scope error (currentUrl)";return l.vV(n,t),!1}}(t)),group:N.vw},favorite_url_scope:{method:t=>Promise.resolve(function(t){let{urlScopes:e,favoriteUrlScopeConditions:n}=t;try{const t=e.filter((t=>{let{include:e}=t;return!e})),i=e.filter((t=>{let{include:e}=t;return e}));return!(t.some((t=>O(t)?D(t,n):p(t)))||!i.some((t=>O(t)?D(t,n):p(t)))&&0!==i.length)}catch(t){const n="Scope error (CurrentFavoriteUrlCondition)";return l.vV(n,e),!1}}(t)),group:N.vw},code_scope:{method:async function(t,e){const n=e=>function(t,e){l.vV("Scope error (code)",e)}(0,t);return Promise.all(t.map((t=>{let{id:i,value:s,isAsync:a}=t;return((t,e,n,i)=>async s=>{let{value:a,isAsync:o}=s;if(o)return i.setStatus(f.B.waitingCodeResolution),new Promise((async(e,i)=>{const s={resolve:e,reject:i};n?await n().then((e=>{let{code:n}=e;return(0,v.F)(n,{campaign:t},void 0,[s.resolve])})):await!!(0,y.K6)(a,t,void 0,void 0,s)})).then((t=>t)).catch((t=>(e(t),!1)));try{return n?n().then((e=>{let{code:n}=e;return(0,v.F)(n,{campaign:t})})):(0,y.K6)(a,t)}catch(t){return e(t),Promise.resolve(!1)}})(e,n,undefined,a?(0,o.iE)(e):void 0)({id:i,value:s,isAsync:a})}))).then((t=>t.every((t=>!!t))))},group:N.vw},selector_scope:{method:(t,e,n)=>Promise.resolve(T(t,e,n)),group:N.vw},cookie_scope:{method:t=>Promise.resolve(function(t){try{return t.some(I)}catch(e){const n="Scope error (cookie)";return l.vV(n,t),!1}}(t)),group:N.l$},ip_scope:{method:t=>Promise.resolve(function(t){try{const{exclusions:e,inclusions:n}=b((t=>{let{include:e}=t;return e?"inclusions":"exclusions"}),t),i=(0,A.qF)((0,C.Tt)());return!(e&&e.some(_(i))||(!n||!n.some(_(i)))&&n)}catch(e){const n="Scope error (IP)";return l.vV(n,t),!1}}(t)),group:N.l$},qa_url_parameter_enabled:{method:(t,e)=>Promise.resolve(P(t,e)),group:N.l$}};async function M(t,e,n){const{id:i,mutationObserverEnabled:s}=n,a=V[e].method,r=V[e].group,c=await a(t,i,s);return l.fH("Applying scope",e," for ",n,"result = ",c),o.Hu.updatePublicTargetingData(i,{conditions:t,targeting_type:e},c,r),c}async function L(){let{codeScope:t,selectorScope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;const i=[!t?.length||M(t,"code_scope",n).catch((t=>t)),!e?.length||M(e,"selector_scope",n).catch((t=>t))];return Promise.all(i).then((t=>t.every(B)))}async function $(){let{cookieScope:t,ipScope:e,qaUrlParameterEnabled:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;const s=[!t?.length||M(t,"cookie_scope",i).catch((t=>t)),!e?.length||M(e,"ip_scope",i).catch((t=>t)),!n||M(n,"qa_url_parameter_enabled",i).catch((t=>t))];return Promise.all(s).then((t=>t.every(B)))}var j=n(7386),F=n(977);const H=t=>(e,n)=>{let{oneVisitorOneTest:i}=n;const{id:s,status:a,type:o}=e.data;return a&&a===f.B.accepted?((0,l.fH)(`campaign:: Campaign ${s} has already been accepted`),!1):a&&a===f.B.checking?((0,l.fH)(`campaign:: Campaign ${s} is already in checking state`),!1):o===F.cz.subsegment&&e.hasBrotherAlreadyStarted()?(e.setStatus(f.B.otherSubsegment),!1):!e.isOneVisitorOneTestDone(t)||(e.setStatus(f.B.oneVisitorOneTest),!1)},U=t=>{const{scopes:e}=t.data;return Promise.all([L(e,t.data),$(e,t.data)])},x=(t,e)=>{const{audienceTrigger:n,audienceSegment:i,segmentMode:s,triggerMode:a}=e.data;return Promise.all([(0,u.PA)(t)(e.data,a,n).catch((t=>t)),(0,u.PA)(t)(e.data,s,i).catch((t=>t))])},G=async function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const{oneVisitorOneTest:i}=(0,d.F5)();if(e&&!H(t)(n,{oneVisitorOneTest:i}))return!1;n.setStatus(f.B.checking);const s=await U(n);if(s.every((t=>t))){const e=await x(t,n);return e.every((t=>t))?X(n):Z(e,[f.B.trigger,f.B.segment],t,n)}return Z(s,[f.B.targetPages,f.B.qaMode],t,n)},K=async(t,e)=>{const{oneVisitorOneTest:n,hashMrasnAllowed:i}=(0,d.F5)(),{id:a,audienceTrigger:r,scopes:c,targetingMode:u}=e.data;if(!(t=>(e,n)=>{let{oneVisitorOneTest:i,hashMrasnAllowed:s}=n;return e.isTargetByEvent()?(e.setStatus(f.B.targetByEventPending),!1):H(t)(e,{oneVisitorOneTest:i})})(t)(e,{oneVisitorOneTest:n,hashMrasnAllowed:i}))return!1;if(e.setStatus(f.B.checking),u===F.Vp.waitUntil)return(0,l.FF)(`Target rejected (campaign ${a}) because "waituntil" (ajax) mode is deprecated.`),e.setStatus(f.B.rejected),!1;if(await ut(r),await dt(a),e.isDynamicAllocation())try{await(0,j.zj)()}catch(t){(0,l.FF)(`Allocation fetch failed (campaign ${a} will not be able to run corectly)`)}if(e.isPersonalisationChild()&&e.data.siblings&&e.data.siblings.length>0){e.setStatus(f.B.waitingForSubsegmentCheck);const t=[e.data.id,...e.data.siblings].sort(),n=await(async(t,e)=>{const n=e.map((e=>{const n=(0,o.iE)(e);return t.data.priority>1&&n.data.priority<t.data.priority||n.data.id<t.data.id?n:null})).filter((t=>!!t));return Promise.all(n.map((t=>[f.B.checking,f.B.waitingForSubsegmentCheck].includes(t.getStatus())?t.hasBeenChecked():Promise.resolve(t.getStatus()))))})(e,t).then((t=>t.includes(f.B.accepted)));if(n)return e.setStatus(f.B.otherSubsegment),!1}const g=void 0!==c&&await async function(t,e){let{urlScope:n,favoriteUrlScope:i,favoriteUrlScopeConditions:a}=t;const o=i?.length;if(o){const t=(0,s.g)(n)?i:[...n,...i];return await M({urlScopes:t,favoriteUrlScopeConditions:a},"favorite_url_scope",e)}{const t=await M(n,"url_scope",e);return!n?.length||t}}(c,e.data);return g?G(t,!1,e):((0,l.fH)("Targeting rejected."),e.setStatus(f.B.targetPages),!1)};var q=n(6158);const Y=t=>{const e=[...q.DCInfosTargetings,...q.OnceTriggerTargetings,...q.OnceSegmentTargetings];return!(0,s.g)(t)&&e.includes(t)},W=(t,e)=>t.filter((t=>t?.targeting_groups?.length)).map((t=>{let{targeting_groups:e}=t;return e.map((t=>{let{targetings:e}=t;return e.map((t=>{let{targeting_type:e}=t;return e}))})).reduce(((t,e)=>t.concat(e)),[])})).reduce(((t,e)=>t.concat(e)),[]).every((t=>!(0,s.g)(t)&&Y(t)))&&["codeScope","selectorScope","cookieScope"].every((t=>{const n=e[t];return"boolean"==typeof n?!n:!n?.length})),J=(()=>{const t={};return function(e,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&Object.keys(t).forEach((e=>delete t[e])),(0,s.g)(e)||(0,s.g)(n)||(t[`${e}`]?t[`${e}`].push(n):(t[`${e}`]=[n],(e=>{setTimeout((()=>{const n=t[e];delete t[e],n&&n.forEach((t=>t()))}),e)})(e)))}})(),z=()=>Promise.resolve({});var Q=n(7550);const X=async t=>{const{id:e,targetingMode:n}=t.data;return t.getAbortSignal().aborted?((0,l.NI)(`Campaign instance is outdated. Campaign ${e}`),!1):((0,l.SW)(`Targeting OK (campaign ${e})`),!0)},Z=async(t,e,n,i)=>{if(i.getAbortSignal().aborted)return(0,l.NI)(`Campaign instance is outdated. Campaign ${i.getId()}`),!1;const{targetingMode:s,audienceTrigger:a,audienceSegment:o,scopes:r}=i.data,c=[a,o].flat().filter((t=>void 0!==t));if((s===F.Vp.fastest||[F.Vp.noAjax].includes(s))&&!(0,Q.Q)())return(0,l.NI)("Targeting waiting for DOM Ready."),i.setStatus(f.B.pending),(0,Q.Q)((async()=>{await G(n,!0,i)&&await i.executeCampaign(n)})),!1;const d=()=>((0,l.fH)("Targeting rejected."),t.some(((t,n)=>(t||i.setStatus(e[n]),!t))),!1);return(0,Q.Q)()?d():await async function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return await z().then((e=>{if("startPendingMode"in e&&"isPendingModeOver"in e){const{startPendingMode:s,isPendingModeOver:a}=e;if(!t||!W(c,r)&&!a())return(0,l.NI)("Targeting loop."),i.setStatus(f.B.pending),s(i,(async()=>!!await G(n,!0,i)&&(await i.executeCampaign(n),!0))),!1}return d()}))}(!1)},tt=t=>{t.forEach((t=>{t.targeting_groups.forEach((t=>{t.targetings.forEach((t=>{delete t.success}))}))}))},et=(t,e)=>{t.success=e},nt=(t,e)=>{const n=t?.map((t=>t.targeting_groups)).flat();return n&&n.some((t=>t.targetings&&t.targetings.some((t=>t.targeting_type===e))))};var it=n(1205),st=n(88);const at="DCInfos",ot={dcInfosWait:{promise:null,resolve:null,reject:null},dcInfosData:null};function rt(){return ot.dcInfosWait.promise}function ct(){try{const t=sessionStorage.getItem(at);return!(0,s.g)(t)&&t.length>0?JSON.parse(t):window.ABTasty.DCInfos}catch(t){return l.vV("Error parsing dcinfos",t),null}}!function(){const t=ot.dcInfosWait;t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n}))}();var lt=n(3002);const dt=async t=>{const e=`fetch failed (campaign ${t} will not be able to be checked)`,n=async(t,n,i)=>{if(t())try{return await n(),!0}catch(t){return(0,l.FF)(`${i} ${e}`),!1}return Promise.resolve(!1)},i=[n((()=>(0,u.mn)(t)&&(0,s.g)(ct())),rt,"DCInfos"),n((()=>(0,u.BA)(t)),C.uA,"IP"),n((()=>(0,u.Xp)(t)),C.q0,"Geolocation"),n((()=>(0,u.z)(t)),(async()=>await(0,lt.a)(!0)),"Parsed UserAgent")];(0,u.li)(t)&&i.push((0,it.sb)()),await Promise.all(i)},ut=async t=>{if("boolean"!=typeof window.ABTasty.datalayerEnabled&&t&&nt(t,i.DATALAYER))return await(0,st.fm)((()=>"boolean"==typeof window.ABTasty.datalayerEnabled))}},5066:(t,e,n)=>{n.d(e,{h:()=>v});var i=n(977),s=n(3595),a=n(648),o=n(4804),r=n(721),c=n(9076),l=n(20);const d=-1;function u(t){return t.reduce(((t,e)=>{const n=t[t.length-1]||0;return[...t,n+e]}),[])}const g=(0,r.c)(((t,e,n,i)=>{let{isDynamic:s=!1,testedTraffic:o,modulation:r}=n;const c=i[i.length-1];let d=Math.max(...t);if(s){const t=(0,l.A5)(e,o,r);t&&(d=t.traffic)}c+d>100&&(s&&(0,a.vV)(`[addOriginalVariationSlots] The sum of dc infos traffics got greater than 100! We've ignored it but it's weird. Last slot: ${c}. OriginalVariationTraffic: ${d}`),d=100-c);const u=c+d;return[...i,u]}));function h(t,e,n){let i=[];const s=function(t,e,n){let{isDynamic:i=!1,testedTraffic:s,modulation:a}=n;const o=Object.keys(t);let r=t;if(i){const t=(0,l.h3)(e,s,a);t.length&&(r={},t.forEach((t=>{let{id:e,traffic:n}=t;r[e]={traffic:n}})))}return o.reduce(((t,e)=>[...t,r[e].traffic]),[])}(t,e,n);return i=(0,c.F)(u,g(s,e,n))(s),i}function m(t,e,n,s,o){let r=[];try{r=h(e,n,s)}catch(t){return(0,a.vV)("Error on function allocateTraffic.",t),d}return function(t,e,n,s){const a=n.findIndex((e=>e>=t));return-1===a?i.cz.subsegment===s?0:d:a===n.length-1?0:parseInt(e[a],10)}(t,Object.keys(e),r,o)}var p=n(7765),f=n(7725),y=n(6259);const v=async(t,e,n,r,c,d)=>{const u=(0,f.vm)(),g=t.getId(),h=(0,y.d)(g),v=!(0,s.g)(h),w=!t.isUsingHashAllocation(),A=async()=>{if(w)return Math.floor(100*Math.random()+1);try{const n=((t,e)=>{const n=new TextEncoder;return[i.qA.multipageTest,i.qA.multipagePersonalization].includes(t.getSubType())?n.encode(`${t.data.parentID}.${e}`):n.encode(`${t.data.id}.${e}`)})(t,e);return new Uint16Array(await crypto.subtle.digest("SHA-1",n))[0]%100+1}catch(t){return(0,a.FF)("Check that your website is in https otherwise cookieless allocation won't work"),Math.floor(100*Math.random()+1)}};if(u&&v)return h;if(w||!t.isDynamicAllocation()||(0,s.g)((0,l.ho)(g))){if(w&&r)return r.variationID;if(!w&&v)return h;if(w&&[i.qA.multipageTest,i.qA.multipagePersonalization].includes(t.getSubType())&&t.hasAlreadySeenBrothers(n)){const e=t.getSeenBrothers(n)[0];let i=null;if(e.variationID===o.me.Untracked)return e.variationID;{const n=(0,o.iE)(e.campaignId).getVariation(e.variationID);return i=n?n.masterVariationId:0,(0,s.g)(i)||0===i?o.me.Original:t.getVariationInfoByMasterId(i).id}}if(w&&t.isMultipageChild()&&t.hasSeenMaster(n)){const e=n.getCampaign(c);return n.removeCampaign(c),e.variationID===o.me.Untracked?e.variationID:e.variationID!==o.me.Original?t.getVariationInfoByMasterId(e.variationID).id:o.me.Original}return d&&!(0,s.g)((0,p.kQ)().variationID)?(0,p.kQ)().variationID:t.isAsync()?m(await A(),t.data.asyncVariationInfoById,g,t.getDynamicAllocationProperties(),t.getType()):m(await A(),t.data.variations,g,t.getDynamicAllocationProperties(),t.getType())}return(0,l.ho)(g)}},20:(t,e,n)=>{n.d(e,{A5:()=>r,h3:()=>o,ho:()=>l,ws:()=>d});var i=n(7386),s=n(2484);function a(t,e,n){const s=((0,i.E)()||{})[`${t}`]||[],a=s.length;return s.map((t=>{const i=function(t,e,n){const i=e||50;return t*(i/100)+(100-i)/n}(t.traffic,n,a),s=function(t,e){return t*((e||100)/100)}(i,e);return{...t,traffic:s}}))}function o(t,e,n){return a(t,e,n).filter((t=>{let{id:e}=t;return e!==i.Cy}))}function r(t,e,n){return a(t,e,n).find((t=>{let{id:e}=t;return e===i.Cy}))}const c="ABTastyPreviousDynamicAllocation",l=t=>JSON.parse(s.Ks.getItem(s.Sd,c)||"{}")[t]||null,d=(t,e)=>{const n={...JSON.parse(s.Ks.getItem(s.Sd,c)||"{}"),[t]:e};s.Ks.setItem(s.Sd,c,JSON.stringify(n))}},3340:(t,e,n)=>{n.d(e,{B:()=>i});let i=function(t){return t.accepted="accepted",t.pending="pending",t.rejected="rejected",t.oneVisitorOneTest="one_visitor_one_test",t.traffic="traffic_rejected",t.timeout="timeout",t.checking="currently_checking",t.otherSubsegment="another_subsegment_already_started",t.targetByEventPending="target_by_event_pending",t.acceptedByRedirection="accepted_by_redirection",t.targetPages="target_pages_rejected",t.qaMode="qa_parameters_rejected",t.audience="audience_rejected",t.trigger="trigger_rejected",t.segment="segment_rejected",t.notChecked="master_campaign_not_checked",t.waitingForSubsegmentCheck="other_subsegment_is_checking",t.consent="campaign_type_rejected_by_consent",t.failedLoading="deferred_loading_failed",t.notPrioritizedYet="not_prioritized_yet",t.geoipConsent="geolocation_rejected_by_consent",t.waitingCodeResolution="waiting_code_resolution",t.displayFrequency="display_frequency_rejected",t.redirectDisallowed="redirect_disallowed",t}({})},6259:(t,e,n)=>{n.d(e,{L:()=>r,d:()=>c});var i=n(3595),s=n(2484);const a="ABTastyForcedVariations";function o(){return JSON.parse(s.Ks.getItem(s.b1,a)||"{}")}const r=(t,e)=>function(t,e){const n=o();(0,i.g)(e)?delete n[t]:n[t]=e,s.Ks.setItem(s.b1,a,JSON.stringify(n))}(t,e);function c(t){return o()[t]??null}},3663:(t,e,n)=>{n.d(e,{M:()=>a,a:()=>c});var i=n(648),s=n(7426);const a="c:abtasty2-izjJRMEi",o=["cookies","improve_products","measure_content_performance"];function r(){return"object"==typeof window.Didomi&&"function"==typeof window.Didomi.getUserStatus&&window.Didomi.getUserStatus()||void 0}function c(t,e,n){i.NI("Consent compliance check: Waiting for Didomi loaded and start.");const c=setTimeout((()=>n()),5e3);(0,s.Dk)("didomiTimeout",c);const l=()=>{i.fH("Consent compliance check: Start Didomi consent check."),clearTimeout(c);const s=t||a;!(!window.Didomi.getUserConsentStatusForVendor(s)||!t&&!o.every((t=>!!window.Didomi.getUserConsentStatusForPurpose(t))))?e():n()};r()?l():(window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{r()&&l()}))),window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push({event:"consent.changed",listener:l})}},8009:(t,e,n)=>{n.d(e,{NO:()=>b,rv:()=>I,Vn:()=>C,ac:()=>T,T$:()=>_});var i=n(108),s=n(9578),a=n(648),o=n(6381),r=n(1134),c=n(6692),l=n(2484);var d=n(8987),u=n(7862),g=n(5415);var h=n(3663);n(81);function m(t,e,n){return a.fH("Consent compliance check: Executing custom code."),new Promise(((e,n)=>{try{new Function("abResolve",t.value)(e)}catch(t){n(t)}})).then((t=>{t?e():(a.FF("Consent compliance check: custom code return false"),n())})).catch((t=>{a.vV("Consent compliance check: could not execute custom code",t),n()}))}function p(t,e,n){return new Promise((async(i,s)=>{a.fH("Consent compliance check: Executing custom code.");const o=()=>e(),r=async()=>new Function(t.value)();try{if(await r())o(),i();else{const t=setInterval((async()=>{a.NI("Consent compliance check (loop): Executing custom code."),await r()&&(clearInterval(t),o(),i())}),500);(0,u.Xx)("consentCustomJs",t),n()}}catch(t){a.vV("Consent compliance check: could not execute custom code",t),n(),s()}}))}const f="abtasty_grantConsent",y="abtasty_revokeConsent";var v=n(7643),w=n(1492),A=n(2352),S=n(9404);const T=200;let E,I=function(t){return t.start="start",t.test="test",t.perso="perso",t.aa="aa",t.patch="patch",t.redirection="redirection",t.storage="storage",t.collect="collect",t.dmp="dmp",t.geoloc="geoloc",t}({});class b extends A.X{constructor(){if(super(),E)return E;const{waitForConsent:{mode:t,campaignRestrictions:e,data:n}}=(0,r.F5)();this.mode=t,this.data=n,this.isStrict=!!Object.keys(e).length&&!Object.values(e).filter((t=>!t)).length,this.campaignRestrictions=e,this.consentAtInit=c.bo.exists(),this.isListen=!1,this.isValid=!1,this.setConsentReady(!1),this.consentFor=Object.keys(e).filter((t=>!e[t])).map((t=>t)),this.isStrict||this.consentFor.push(I.start),E=this,this.shouldListen()?(l.Ks.setState("inmemory",!this.consentAtInit),this.listen()):this.valid()}static resetInstance(){E=null}haveConsent(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(I)).every((t=>this.consentFor.includes(t)))}sendConsentHit(t){(async()=>{const e={co:t};(new v.n).setInternalHit(w.YQ.consent,e)})()}emitConsentValidEvent(){const t=new CustomEvent("consentValid");document.dispatchEvent(t),(new o.k).dispatchCustomEvent(s.u.Name.consentValid,{mode:(0,r.F5)().waitForConsent.mode,consentFor:this.consentFor})}valid(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(I);if(this.isValid=!0,this.setConsentReady(!0),this.notify("general.consent"),this.consentFor=[...this.consentFor,...t],(0,a.fH)("Consent compliance check: Consent has been granted."),this.haveConsent([I.storage])){if(c.bo.cookieReady&&c.bo.getInstance()){const t=c.bo.getInstance(),e=t.sessionCookie;t.save(),e.save()}l.Ks.migrate()}!this.consentAtInit&&this.isListen&&this.sendConsentHit(!0),this.emitConsentValidEvent(),this.consentAtInit=c.bo.exists(),this.isListen=!1}revoke(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.values(I);this.isValid=!1,this.shouldRevoke()&&(this.consentFor=this.consentFor.filter((e=>e===I.start&&!this.isStrict||(Object.keys(this.campaignRestrictions).includes(e)?!this.campaignRestrictions[e]:!t.includes(e)))),this.consentFor.length===Object.values(I).length&&(this.isValid=!0),(0,a.fH)("Consent compliance check: Consent has been revoked."),this.haveConsent([I.storage])||(l.Ks.migrate(),c.bo.cookieReady&&c.bo.getInstance()?c.bo.getInstance().clearAll():(0,S.pK)(c.H_,(()=>c.bo.getInstance().clearAll())),this.setConsentReady(!1),this.notify("general.consent")),this.sendConsentHit(!1))}shouldRevoke(){return!this.isValid&&c.bo.exists()}shouldListen(){return this.mode===i.Ey.userAction&&!c.bo.exists()||![i.Ey.thirdParty,i.Ey.disabled,i.Ey.userAction].includes(this.mode)}listen(){if(!this.isListen)switch(this.isListen=!0,this.mode){case i.Ey.userAction:!function(t){a.NI("Consent compliance check: Waiting for a visitor's action.");const e=()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchmove",e,!0),window.removeEventListener("scroll",e,!0),t()};document.addEventListener("mousedown",e,!0),document.addEventListener("touchmove",e,!0),window.addEventListener("scroll",e,!0)}((t=>this.valid(t)));break;case i.Ey.anyCookie:!function(t){a.NI("Consent compliance check: Waiting for any cookie deposit on the website.");const e=()=>t(),n=()=>document.cookie.length>0;if(n())e();else{const t=setInterval((()=>{n()&&(clearInterval(t),e())}),T);(0,u.Xx)("consentAnyCookie",t)}}((t=>this.valid(t)));break;case i.Ey.specificCookie:!function(t,e,n){a.NI(`Consent compliance check: Waiting for "${t.name}" cookie deposit on the website.`);const i=()=>e(),s=()=>{const{condition:e,value:n,name:i}=t,s=d.A.get(i);if(!s)return!1;switch(Number(e)){case g.Wm:return new RegExp(n).test(s);case g.sz:return s.indexOf(n)>-1;case g.UT:default:return s===n}};if(s())i();else{const t=setInterval((()=>{s()&&(clearInterval(t),i())}),T);(0,u.Xx)("consentSpecificCookie",t),n()}}(this.data,(t=>this.valid(t)),(t=>this.revoke(t)));break;case i.Ey.didomi:(0,h.a)(this.data,(t=>this.valid(t)),(t=>this.revoke(t)));break;case i.Ey.customJs:(this.data.isAsync?m:p)(this.data,(t=>this.valid(t)),(t=>this.revoke(t)));break;case i.Ey.customEvent:((t,e)=>{a.NI("Consent compliance check: Waiting for custom event.");const n=()=>(a.NI("Consent compliance check: Custom event triggered. Consent granted"),t()),i=()=>(a.NI("Consent compliance check: Custom event triggered. Consent revoked"),e());!0===window.abtastyGrantConsent&&(a.NI("Consent compliance check: window.abtastyGrantConsent is truthy. Consent granted"),n()),window.addEventListener(f,n),window.addEventListener(y,i)})((t=>this.valid(t)),(t=>this.revoke(t)));break;default:this.valid()}}getConsentReady(){return this.consentReady}setConsentReady(t){this.consentReady=t,window.ABTasty.consentReady=t}notify(t){this.mediator?.notify(t,{started:!0})}}const C=t=>(new b).haveConsent([I[t]]),_=(t,e)=>{const n=`abtasty_${s.u.Name.consentValid}`,i=s=>{const{detail:a}=s;a&&a.consentFor.includes(t)&&(window.removeEventListener(n,i),e(s))};window.addEventListener(n,i)}},6804:(t,e,n)=>{n.d(e,{F:()=>a});var i=n(6729),s=n(1387);async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const{campaign:o,variation:r,fragment:c}=e;try{if("function"!=typeof t)throw new Error("Code parameter is not a function.");const e=await(0,i.W)();return((e,n,i,s)=>t(e,n,i,...s))(e,e,{...(0,s.Ry)(o,r),...n},a)}catch(t){return(0,s.C_)(t,o,r,c),!1}}},1387:(t,e,n)=>{n.d(e,{C_:()=>m,K6:()=>p,Ry:()=>h});var i=n(6729),s=n(88),a=n(648),o=n(8987),r=n(6692),c=n(7471),l=n(6257),d=n(1666),u=n(3002),g=n(4804);const h=(t,e)=>({doWhen:s.Yx,jsCookie:o.A,ABTastyCookie:r.bo,ABTastySessionCookie:c.n,ABTastyLocalStorage:l.x,getGeoloc:d.KL,getParsedUserAgent:u.a,campaignId:t,variationId:e,campaign:t?g.Hu.instantiate(t):void 0,getParsedUserAgentAsync:async()=>await(0,u.a)(!0)}),m=(t,e,n,i)=>{const s=void 0!==e?void 0!==n?`Campaign ${e} | Variation ${n}`:`Campaign ${e}`:void 0!==i?`Script fragment: Additional information ${i}`:"Global Script";(0,a.FF)(`${s} - Error during custom code execution (or code targeting)`,t)};async function p(t,e,n,s,a,o){if(void 0===t)return!1;try{const s=await(0,i.W)(),r=h(e,n);let c,l=t;return o||(l=l.replace(/\$\.doWhen/g,"HELPERS.doWhen")),c=void 0!==s||o?new Function("$","jQuery","HELPERS","abResolve",l)(s,s,r,!!a&&a.resolve):new Function("HELPERS","abResolve",l)(r,!!a&&a.resolve),c}catch(t){return m(t,e,n,s),!(!a||!a.reject)&&a.reject(t)}}},8353:(t,e,n)=>{n.d(e,{FZ:()=>h,P9:()=>u,kA:()=>g});var i=n(6332),s=n(7707),a=n(1134),o=n(1666),r=n(3002),c=n(4804),l=n(5712);const d="ABTasty",u=()=>{(0,i.X8)([d,"cnilReady"],[d,"consentReady"])},g=t=>{window[d].started=!0,window[d].visitor={id:t}},h=t=>{const e=t.accountSettings.ajaxAutoReload,n=l.g.getInstance(),u={getAccountSettings:()=>(0,a.F5)(),getGeoloc:()=>(0,o.KL)(),getParsedUserAgent:()=>((0,i.j3)({deprecate:"getParsedUserAgent",new:"getParsedUserAgentAsync",type:"function"}),(0,r.a)()),getParsedUserAgentAsync:async()=>await(0,r.a)(!0),getTestsOnPage:c.Hu.getActiveCampaigns,hitServiceNotifierSubscribe:n.subscribe,hitServiceNotifierUnSubscribe:n.unsubscribe},g={accountData:t,consentReady:!1,omnitureProcessed:!1,pendingRedirection:!1,pendingUAParser:!0,results:{},started:!1,tagInfos:{commitHash:(0,s.y)()||"",version:"latest",enabledFlagshipExperiments:[{name:"tag_lp_url_cookie",value:"true"},{name:"tag_1domain_lock",value:"true"},{name:"tag_1domain_sampling",value:1e4},{name:"tag_perf_exec_time_sample",value:1e3},{name:"tag_disable_ajax_mode",value:"true"}].filter((t=>!1!==t.value))},...e?{urlHistory:{previous:document.referrer,current:window.location.href}}:{}};window[d]=window[d]||{...g,...u}}},2352:(t,e,n)=>{n.d(e,{X:()=>i});class i{setMediator(t){this.mediator=t}}},3337:(t,e,n)=>{n.d(e,{aV:()=>Pt,i9:()=>Ot,Jr:()=>kt,c1:()=>Bt,lG:()=>Rt,ln:()=>Dt});var i=n(8987),s=n(1205),a=n(5437),o=n(648),r=n(3595),c=n(1134),l=n(2492),d=n(8445),u=n(918);const g={abtasty_editor:"https://teddytor.abtasty.com",abtasty_editor_local:"https://local.editorv3.abtasty.com",abtasty_editor_preprod:"https://preprod-editorv3.abtasty.com"};function h(){return Object.keys(g).find((t=>(0,a.Dj)(t)&&(0,a.Vf)(t)))}function m(){const t=h();if(!t)return void(0,o.FF)("The tag could not find which editor to launch");const e=(0,a.Vf)(t);e?(0,u.k)(g[t]+"/dist/main.js",{attributes:{id:"abtasty-editor","data-campaignid":e}}):(0,o.FF)("The tag could not find which testID the editor should use")}var p=n(4804);const f={prod:"https://app.abtasty.com",local:"https://local.app.abtasty.com",preprod:"https://preprod-app.abtasty.com"};function y(){const t=Object.keys(f).find((t=>(0,a.sd)("env")===t))||"prod";if(t)try{let e={testId:0,variationId:p.me.Original};(0,a.sd)("testId")&&(0,a.sd)("variationId")?e={testId:Number((0,a.sd)("testId")),variationId:Number((0,a.sd)("variationId"))}:null!==sessionStorage.getItem("ABTastyPreview")&&(e=JSON.parse(sessionStorage.getItem("ABTastyPreview")));let n=f[t];n+=`/ready/previewVariation.php?testID=${e.testId}`,n+=`&variationID=${e.variationId}`,n+=null!=(0,a.sd)("hideBar")?"&hideBar=true":"",n+=(0,a.sd)("disabledModifications")?`&disabledModifications=${(0,a.sd)("disabledModifications")}`:"",(0,u.k)(n)}catch(t){const e="Preview mode error";return(0,o.vV)(e,t),!1}else(0,o.FF)("The tag could not find which preview to launch")}var v=n(7643),w=n(1492),A=n(4502),S=n(9578),T=n(4721),E=n(9825),I=n(9498);var b=n(7765),C=n(6692),_=n(8009),O=n(81),k=n(7550),D=n(1387);n(6804);const N=async t=>{(0,o.fH)("Executing account JavaScript code."),(0,D.K6)(t)},R=t=>{t.forEach((async t=>{(0,D.K6)(t.code,void 0,void 0,t.id)}))};var P=n(6381);const B={hasRefreshed:!1,callbacks:[]};class V{jsCacheRefreshed=!1;internalEmotionAiMethods=null;emotionAiMethods=null;constructor(t,e,n,i,s){this.visitorId=t,this.consent=e,this.started=n,this.lastUpdateDate=i,this.jsCacheRefreshed=(t=>(t&&B.callbacks.push(t),B.hasRefreshed))((t=>this.setJsCacheRefreshed(t))),this.dataV1={visitorId:this.visitorId,account:(0,c.F5)(),events:P.P,general:{consent:this.consent.getConsentReady(),started:this.started,jsCacheRefreshed:this.jsCacheRefreshed,lastUpdateDate:i}},this.handlers={},s&&(this.internalEmotionAiMethods=s),this.consent.setMediator(this),(new P.k).setMediator(this)}setStarted(t){this.started=t}setJsCacheRefreshed(t){this.jsCacheRefreshed=t,this.notify("general.jsCacheRefreshed")}setEmotionAiMethods(t){this.emotionAiMethods=t}notify(t,e){if(t.startsWith("general")||t.startsWith("events")){t.startsWith("general")&&e?.started&&this.setStarted(e.started);const n=this.getHandlerCallback(t);n&&this.runCallback(n)}}runCallback(t){const{callbackKey:e,callbacks:n}=t,i=e.split(".");for(const t of n)t(this.getValue(i),i)}getValue(t){if(!t.length)throw new Error("No key is given in argument!");this.dataV1.general={consent:this.consent.getConsentReady(),started:this.started,lastUpdateDate:this.lastUpdateDate,jsCacheRefreshed:this.jsCacheRefreshed},this.dataV1.emotionsAiSegment=this.emotionAiMethods?.getEmotionAiSegment()||"";const e=t[t.length-1];if("function"==typeof e){const n=(t=t.slice(0,-1)).join(".");this.handlers[n]=[...this.handlers[n]??[],e]}return t.reduce(((t,e)=>{if(t&&void 0!==t[e])return t[e];throw new Error(`Unknown key: ${e}!`)}),this.dataV1)}getApi(){var t=this;return{v1:{getValue:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.getValue(n)}}}}getHandlerCallback(t){const e=this.handlers[t];if(void 0!==e)return{callbackKey:t,callbacks:e};const n=t.split("."),i=n.slice(0,n.length-1);return i.length?this.getHandlerCallback(i.join(".")):null}}var M=n(6332);const L=(t,e)=>{window.ABTastyStartTest=p.Hu.abTastyStartTest(t),window.ABTastyReload=()=>{(0,o.fH)("Tag reloading from ABTastyReload"),e(!0)},window.ABTastyPageView=()=>{(0,o.fH)("Tag reloading from ABTastyPageView"),(0,M.j3)({deprecate:"ABTastyPageView",new:"ABTastyReload",type:"function"}),e(!0)}};var $=n(8353),j=n(3410),F=n(7904);let H=document.location.href,U=!1;const x=[];function G(){document.location.href!==H&&((0,o.fH)("Url change detected",`${x.length} callback to apply`),H=document.location.href,x.forEach((t=>t())))}function K(t){x.push(t),U||(U=!0,new MutationObserver((t=>{t.forEach(G)})).observe(window.document,{childList:!0,subtree:!0}))}var q=n(88);var Y=n(1666),W=n(3002);const J=(t,e,i)=>{(0,W.a)(),(0,c.$E)()&&(0,Y.u$)(),Promise.resolve().then(n.bind(n,7177)).then((n=>{window.ABTasty.getAbandonedCart=async function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n.getAbandonedCart(i,s,a)}}))};var z=n(7725),Q=n(6916),X=n(3847);const Z={[w.YQ.consent]:"onConsent",[w.YQ.campaign]:"onCampaign",[w.YQ.event]:"onEvent",[w.YQ.item]:"onItem",[w.YQ.pageview]:"onPageview",[w.YQ.segment]:"onSegment",[w.YQ.transaction]:"onTransaction",[w.YQ.visitorevent]:"onVisitorevent",[w.YQ.nps]:"onNps",[w.YQ.datalayer]:"onDatalayer",[w.YQ.product]:"onProduct"},tt=t=>{const e=(new C.bo).getNumberOfSessions();return Promise.all(t.map((t=>{const{segmentHash:n,instances:i,id:s,conf:a,name:r}=t,l={id:s,provider:r,conf:a,logger:{info:o.fH,error:o.vV},instances:i};switch(t.connectorType){case Q.q.PULL:return async function(t,e,n){let i=[];if(e.segmentHash){const t=`${(0,X.x)()}/${(0,c.pw)()}/integrations/${e.provider.toLowerCase()}.json?${e.segmentHash}`,n=await fetch(t);i=await(n.ok?n.json():Promise.resolve([]))}await async function(t,e,n){if(n&&""!==n){const i=`\n      !function(session, settings){\n        try {\n          ${n}\n          onRequest(session, settings);\n        } catch(e){\n          console.log(\`AB Tasty: error while executing connector \${settings.provider}: \`, e.message)}\n        }(session, settings)\n    `;await et(["session","settings"],i,[t,e])}}(t,{...e,segmentList:i},n)}({pv:e},{...l,segmentHash:n},t.code);case Q.q.PUSH:return async function(t,e){let n;if(e){const i=`\n        return (function(){\n          try{\n            ${e}\n            return getConnectors();\n          }catch(e){\n            console.log(\`AB Tasty: error while setting up push connector ${t.provider}: \`, e)\n          }\n        })()\n      `;n=Function(i)()}n&&Object.keys(n).length&&Object.entries(Z).forEach((e=>{let[i,s]=e;s in n&&window.ABTasty.hitServiceNotifierSubscribe(n[s],i,t)}))}(l,t.code);case Q.q.DATALAYER:return async function(t,e,n){if(n&&""!==n){const i=`\n      !function(datalayer, settings){\n        try {\n          ${n}\n          main(datalayer, settings);\n        } catch(e){\n          console.log(\`AB Tasty: error while executing connector \${datalayer.name}: \`, e.message)}\n        }(datalayer, settings)\n    `;await et(["datalayer","settings"],i,[t,e])}}(t,l,t.code);default:return(0,o.vV)(`Unknown integration connector type ${t.connectorType}`),Promise.resolve()}}))).catch((t=>(0,o.vV)("Integration connector execution failed with error:",t)))};function et(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Promise.resolve(Function(...t,e)(...n))}var nt=n(2484);const it=t=>{const e=(t=>!t&&"object"!=typeof t||!Object.values(t).every((t=>"string"==typeof t)))(t);if(e)(t=>{o.FF("'CustomIdentities' cannot be set, format is not correct. It should be a dict of {string: string}",t)})(t);else{(t=>{if(!t&&"object"!=typeof t)return;const e=JSON.parse(nt.Ks.getItem(nt.b1,d.ok.CUSTOM_IDENTITIES))||{},n=t;Object.entries(n).forEach((t=>{let[n,i]=t;(0,r.g)(i)||(e[n]=i)})),nt.Ks.setItem(nt.b1,d.ok.CUSTOM_IDENTITIES,JSON.stringify(e))})(t);const e=S.u.Name.identityAdded;(new P.k).dispatchCustomEvent(e)}},st=()=>{window.abtasty=window.abtasty||{},window.abtasty.addCustomIdentity=it},at=t=>()=>({campaignHistory:()=>t.getCampaignHistory(),visitorId:t.getVisitorId(),currentSessionTimestamp:t.getCurrentSessionTimestamp(),numberOfSessions:t.getNumberOfSessions()});var ot=n(6046),rt=n(3026);function ct(){const t=function(t){return t.reduce(((t,e)=>{let{method:n,url:i,category:s,action:o}=e;return(0,a.wM)(n,i)?{...t,[s]:o}:t}),{})}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]);if(Object.keys(t).length>0){const e={s:t};(new v.n).setInternalHit(w.YQ.segment,e)}}var lt=n(1873),dt=n(7426),ut=n(6596),gt=n(7471),ht=n(5974);var mt=n(9404),pt=n(7795);const ft="abtasty-execution-ended",yt="executionTime";let vt=!1;const wt=()=>{try{const t=new l.E;if(vt||!(0,pt.iU)()||window.performance.getEntriesByName(ft).length>0||t.checkHitHistorySession(d._V.PERFORMANCE,yt))return;window.performance.mark(ft);const e=window.performance.measure("abtasty-execution",pt.Rh,ft),n=(()=>{const t=window.performance.getEntries().filter((t=>t.name.includes((0,X.x)()))),e=t.find((t=>t.name.includes(`/${O.o3.manifest}`)))?.startTime||-1;return(t=>t.sort(((t,e)=>t.startTime-e.startTime)).reduce(((t,e)=>e.startTime>t.currentEnd?{totalTime:t.totalTime+e.duration,currentEnd:e.responseEnd}:e.responseEnd>t.currentEnd?{totalTime:t.totalTime+e.responseEnd-t.currentEnd,currentEnd:e.responseEnd}:t),{totalTime:0,currentEnd:0}).totalTime)(t.filter((t=>!(e>-1&&[O.o3.initiator,O.o3.main].some((e=>t.name.includes(`/${e}`)))&&t.startTime>e)&&[O.o3.initiator,O.o3.commons,O.o3.main,O.o3.modificationEngine,O.o3.jquery].some((e=>t.name.includes(`/${e}`))))))})();(new v.n).setInternalHit(w.YQ.performance,{ext:Math.round(e.duration-n)}),t.setHitHistorySession(d._V.PERFORMANCE,yt)}catch(t){(0,o.FF)("Can't send execution time performance measure due to:",t.message)}},At=function(){vt=!(arguments.length>0&&void 0!==arguments[0])||arguments[0]};n(3692);var St=n(6883);let Tt=!1;function Et(){if(Bt()){if((0,F.BZ)()&&(0,F.Ey)())if(Dt())(0,o.FF)("[ABTasty tag is locked]"),new Promise((t=>{window.unlockABTasty=()=>(delete window.lockABTastyTag,(0,o.fH)("[ABTasty tag is unlocked]"),t(!0)),At()})).then(It);else if((0,c.Fc)())(0,o.FF)("[ABTasty quota limit reached]");else{if(!(0,c.Ut)())return It();setTimeout(It,0)}}else(0,o.vV)("Tag has been stopped: Current page domain is not matching with account configuration.")}async function It(){(0,o.fH)("Init process started...");const t=new _.NO;let e=!0,i=null;(0,mt.pK)(C.H_,(async()=>{i&&clearTimeout(i),e=!1;const s=C.bo.getInstance();t&&s?await async function(t,e){const i=new V(e.getVisitorId(),t,!1,"2024/11/22 17:03:38 UTC",null);0;window.ABTasty.api=i.getApi(),(0,$.P9)(),t.haveConsent([_.rv.start])||((0,o.FF)("Waiting for consent."),At(),await new Promise((t=>{(0,_.T$)(_.rv.start,(()=>t(!0)))})));(0,o.fH)("Main process started..."),(0,$.kA)(e.getVisitorId()),i.setStarted(!0);(new P.k).initCustomEventState(),(0,z.jk)(),await(0,j.Om)(e.getVisitorId())||(0,z.vm)()||(e.save(),(0,o.FF)("Tag has been stopped caused by sampling configuration."),At(),await(0,j.EN)(),(0,o.NI)("Tag has been unlocked using sampling bypass event."));e.setSaveable([C.$K.uid,C.$K.cst,C.$K.fst,C.$K.ns,C.$K.pst,C.$K.pvis,C.$K.pvt,C.$K.th],!0),L(e,bt(e)),new v.n,!1;0;J((0,c.pw)(),e.getVisitorId(),t);n(2524).detectDatalayer();(0,ot.I)().then((t=>t?.setGlobals(at(e)))),(0,c.F5)().ajaxAutoReload&&K((()=>{bt(e)(!0)}));(0,q.Qm)((()=>bt(e)(!0))),bt(e)(),st()}(t,s):(0,o.vV)("Init process missing consent or cookie",`Consent: ${t}`,`Cookie: ${s}`)})),(0,b.o9)(),await C.bo.build(),e&&(i=setTimeout((()=>{(0,o.vV)("Init process timeout")}),2e3))}const bt=t=>async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,ot.I)().then((t=>{t?.dispatchBatch()})),e&&await(async()=>{(0,ht._)().then((t=>t?.rollback())),(0,rt.a)(),p.Hu.resetCampaigns(),(0,b.SL)(),(0,lt.wi)(),await(0,ut.pendingModeLoader)().then((t=>{"resetPendingMode"in t&&t.resetPendingMode()})),(0,ut.registerPendingCriteria)(null,null,!0),(0,dt.sm)(),new gt.n(!0),(new P.k).resetSpecificsCustomEvents([S.u.Name.executedCampaign,S.u.Name.tagContentExecuted]),window.ABTasty.results={},window.ABTasty.omnitureProcessed=!1,window.ABTasty.urlHistory&&(window.ABTasty.urlHistory={previous:window.ABTasty.urlHistory.current?window.ABTasty.urlHistory.current:document.referrer,current:document.location.href})})().then((()=>{(0,b.o9)()})),document.dispatchEvent(new CustomEvent(T.tv)),(0,lt.k5)(),Tt||(Tt=!0,Ct(t))};async function Ct(t){const{accountSettings:{globalCode:e="",globalCodeOnDocReady:n},globalCodeFragments:i,customVariables:s}=(0,c.yn)();if(!C.bo.cookieReady)return void setTimeout((()=>Ct(t)),T.K6);Tt=!1,t.pageView(),(new v.n).setInternalHit(w.YQ.pageview,{});const a=(0,c.Bz)()||[];(0,o.fH)("Integration connectors::",a),a&&a.length&&await tt(a),s&&ct(s),async function(t,e,n){const i=""!==t,s=n&&n.length>0;if((i||s)&&(i&&(e?(0,k.Q)((()=>N(t))):await N(t)),s)){const t=n.filter((t=>t.onDocumentReady)),e=n.filter((t=>!t.onDocumentReady));t.length>0&&(0,k.Q)((()=>R(t))),e.length>0&&R(e)}}(e,n,i),await(async t=>{const{getCampaignsDatas:e,getCampaignsSortedByPrio:n}=p.Hu,i=e(),s=n(await(0,I.sC)(i,t.getVisitorId())),a=(0,E.tP)(t.getCampaignHistory(),s);await(0,E.Mm)(t,s,a)})(t),function(t){const e=(0,c.iN)();e&&(0,rt.L)(t)(e)}(t),(0,k.Q)((()=>{(()=>{const t=["try.abtasty.com"],e=(0,X.De)(),n=t.some((t=>e.includes(t))),i=e.includes("localhost")||"null"===e,s=e.includes(".");!n&&!i&&s&&(0,St.r)(1e5)&&(new v.n).setInternalHit(w.YQ.usage,{cv:{selfHost:"true",tagOrigin:e}})})(),(new P.k).dispatchCustomEvent(S.u.Name.tagContentExecuted),wt()}))}const _t="ABTastyOptout",Ot=()=>h()?m:"preview"===(0,a.Zo)(window.location.href,!0).ab_project||"undefined"!=typeof sessionStorage&&void 0!==sessionStorage.ABTastyPreview&&null!=sessionStorage.ABTastyPreview?y:Et,kt=()=>!!h()||!window.ABTasty.started&&!(()=>{if((0,s.G1)())return!0;const{abtastyeditorlock:t,abtastyoptout:e}=(0,a.oE)();let n=!1;try{n=!(0,r.g)(t)||!(0,r.g)(window.top?.ABTASTY_S)}catch(t){}return(0,r.g)(e)?Boolean(i.A.get(_t))||n:(i.A.set(_t,"1",(0,A.jS)(388)),!0)})(),Dt=()=>window.lockABTastyTag||!1,Nt=["localhost","127.0.0.1"],Rt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;const e=(0,a.NU)(t);return Nt.some((t=>e.includes(t)))},Pt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.host;return t.filter((t=>(0,a.yq)(t,e)))};const Bt=()=>{const{authorizedDomains:t=[]}=(0,c.F5)(),e=Pt(t).length>0,n=Rt()||e;if(!n&&t.length>0){const e=new l.E;return!e.checkHitHistorySession(d._V.TROUBLESHOOT,"domainNotAuthorized")&&(0,St.r)(1e4)&&(0,mt.pK)(C.H_,(()=>function(t,e){const n={cv:{detectedDomain:`${window.location.origin.replace(/^https?:\/\//,"")}`,expectedDomain:`${t.slice(0,5).join(",").concat(t.length>5?",...":"").toString()}`}};(new v.n).setInternalHit(w.YQ.usage,n),e.setHitHistorySession(d._V.TROUBLESHOOT,"domainNotAuthorized")}(t,e))),(0,o.FF)("Domain restriction configuration: the current domain is not matching with the domain set in the account configuration. Please check your settings to avoid any service disruption in the future."),!0}return n}},1873:(t,e,n)=>{n.d(e,{D0:()=>c,k5:()=>o,wi:()=>r});var i=n(3595),s=n(9700);let a=null;function o(){(0,i.g)(c())||r(),a=(0,s.hw)()}const r=()=>a=null,c=()=>a},602:(t,e,n)=>{n.r(e),n.d(e,{mainTag:()=>c});var i=n(648),s=n(1134),a=n(8353),o=n(6381),r=n(3337);const c=()=>{(new o.k).initCustomEventState();const t=(0,s.yn)();(function(){try{const{accountIframeException:t,identifier:e}=(0,s.F5)();if(!t&&window.top!==window.self&&"object"==typeof window.top?.ABTasty&&window.top.ABTasty.accountData.accountSettings.identifier===e)return!1}catch(t){}return!0})()&&((0,i.fH)("Starting execution...",t),(0,a.FZ)(t),(0,r.Jr)()&&(0,r.i9)()())}},5974:(t,e,n)=>{n.d(e,{_:()=>a});var i=n(6361),s=n(648);const a=async()=>{try{return await(0,i._)((()=>Promise.all([n.e(223,"high"),n.e(693,"high")]).then(n.bind(n,107))))}catch(t){return(0,s.vV)("AB Tasty's Tag can't be loaded. Caused by:",t),null}}},7725:(t,e,n)=>{n.d(e,{jk:()=>u,vm:()=>h});var i=n(918),s=n(5437),a=n(3410),o=n(648);const r="AB_TASTY_QA_ASSISTANT_ENV",c={abtasty_qa_assistant:"prod",abtasty_qa_assistant_staging:"staging",abtasty_qa_assistant_local:"local"},l={prod:"https://qa-assistant.abtasty.com",staging:"https://staging-qa-assistant.abtasty.com",local:"https://local-qa-assistant.abtasty.com:5000"},d=(Object.keys(c),"bundle.js");function u(){!function(){(0,o.fH)("Listening for keyboard events to launch QA Assistant");const t={q:!1,a:!1},e=Object.keys(t),n=n=>{(n.altKey||n.ctrlKey)&&e.includes(n.key.toLocaleLowerCase())&&(t[n.key.toLocaleLowerCase()]=!0),Object.values(t).every((t=>t))&&m()},i=function(n){e.includes(n.key)&&(t[n.key]=!1)},s=()=>{document.removeEventListener("keydown",n,!1),document.removeEventListener("keyup",i,!1)};s(),document.addEventListener("keydown",n,!1),document.addEventListener("keyup",i,!1)}(),h()&&m()}function g(){return Object.keys(c).find((t=>!!(0,s.Vf)(t)))}function h(){return!(!g()&&!sessionStorage.getItem(r))}function m(){if(!window.frames.ABTastyQaAssistant){const t=function(){const t=g();return(()=>{const e=sessionStorage.getItem(r);return e&&[...Object.keys(l)].includes(e)?e:t&&c[t]?c[t]:"prod"})()}(),e=l[t];(0,o.fH)("Loading QA Assistant"),(0,i.k)(`${e}/${d}`),sessionStorage.setItem(r,t),window.dispatchEvent(new CustomEvent(a.kj))}}},3410:(t,e,n)=>{n.d(e,{EN:()=>c,Om:()=>r,kj:()=>o});var i=n(6552),s=n(1134),a=n(648);const o="abtasty_bypassSampling",r=async t=>{try{const e=await(0,i.w)(t);return e>0&&e<=((0,s.F5)().sampling||100)}catch(t){return(0,a.vV)("Sampling has failed",t),!1}},c=()=>new Promise((t=>{window.addEventListener(o,(()=>t()))}))},7177:(t,e,n)=>{n.r(e),n.d(e,{getAbandonedCart:()=>g});var i=n(648),s=n(3346),a=n(3595),o=n(7426),r=n(2484);const c="ABTastyAbandonedCart",l=3e3,d="abandonedCartFetch",u="https://dcinfos-cache.abtasty.com/v1/cart",g=(()=>{const t={};return async function(e,n){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&delete t.abandonedCart,t.abandonedCart)return t.abandonedCart;if(!r.Ks.getItem(r.b1,c)){const g=e=>{(0,a.g)(e)||r.Ks.setItem(r.b1,c,JSON.stringify(e)),t.abandonedCart=e};return await(async(t,e)=>{const n=(()=>{try{return new AbortController}catch(t){(0,i.FF)("Cannot create AbortController.",t)}})(),a=d+Date.now(),r=setTimeout((()=>{n?.abort(),(0,i.FF)("Call to Abandoned cart service timeout. Abandoned cart targeting is going to reject visitor.")}),l);(0,o.Dk)(a,r);const c=`${u}?clientId=${t}&fullVisitorId=${e}`;return await(0,s.J)(c,{signal:n?.signal}).then((t=>{switch((0,o.fD)(a),t.status){case 200:return t.json();case 204:return{};default:return}})).catch((t=>{"AbortError"!==t.name&&(0,i.vV)(`Error while fetching Abandoned cart data: ${t}`)}))})(e,n).then((t=>(g(t),t)))}try{const e=JSON.parse(r.Ks.getItem(r.b1,c));return t.abandonedCart=e,t.abandonedCart}catch(e){return(0,i.FF)(`Error while parsing abandoned cart data from sessionStorage: ${e}`),t.abandonedCart}}})()},7643:(t,e,n)=>{n.d(e,{n:()=>r});var i=n(9578),s=n(3595),a=n(6381),o=n(6046);class r{static instance=null;data=null;commonDataRefresher=null;constructor(){return(0,s.g)(r.instance)?(r.instance=this,this.data={eventTracking:[],collectHit:[]},this.createMethods(),(new a.k).dispatchCustomEvent(i.u.Name.trackingInitialized),this):r.instance}static reset(){(0,s.g)(r.instance)||(0,s.g)(r.instance.data)||(r.instance.data.eventTracking=[],r.instance.data.collectHit=[])}setEventTracking(t,e,n){if((new a.k).getStatusCustomEvent(i.u.Name.analyticsLoaded)===i.u.Status.complete)return;const s=Date.now(),o=this.data.eventTracking.length;this.data.eventTracking[o]={name:t,data:e,campaignId:n,time:s}}static getEventTracking(){return(0,s.g)(r.instance)||(0,s.g)(r.instance.data)?[]:r.instance.data.eventTracking}setInternalHit(t,e){(new a.k).getStatusCustomEvent(i.u.Name.analyticsLoaded)===i.u.Status.complete&&r.instance?.commonDataRefresher?(0,o.I)().then((n=>n?.dispatchHit(t,e))):this.setCollectHit(t,e)}setCollectHit(t,e){if((new a.k).getStatusCustomEvent(i.u.Name.analyticsLoaded)===i.u.Status.complete)return;const n=Date.now(),s=this.data.collectHit.length;this.data.collectHit[s]={type:t,args:e,time:n}}static getCollectHit(){return(0,s.g)(r.instance)||(0,s.g)(r.instance.data)?[]:r.instance.data.collectHit}static setCommonDataRefresher(t){(0,s.g)(r.instance)||(r.instance.commonDataRefresher=t)}static getCommonDataRefresher(){return(0,s.g)(r.instance)?null:r.instance.commonDataRefresher}createMethods(){var t=this;const e=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.setCollectHit.apply(t,[...n])};window.abtasty?window.abtasty.send||(window.abtasty.send=e):window.abtasty={send:e};const n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.setEventTracking.apply(t,[...n])};window.ABTastyClickTracking||(window.ABTastyClickTracking=n),window.ABTastyEvent||(window.ABTastyEvent=n)}}},5712:(t,e,n)=>{n.d(e,{g:()=>l});var i=n(88),s=n(4804),a=n(1492),o=n(8009),r=n(9578);let c=[];class l{constructor(){l.observers=[],l.hitHistory=[]}subscribe(t,e,n){const i=function(t){let e=0;const n=t.toString().replace(/\s/g,"");for(let t=0;t<n.length;t++){e=(e<<5)-e+n.charCodeAt(t)}return e}(t),s={measurementId:null,instances:[],...n,observerId:i};if(l.observers.every((t=>{let{settings:e}=t;return i!==e.observerId}))){const i={fn:t,hitType:e,settings:s};if(l.observers.push(i),n?.withHitHistory&&l.hitHistory.length)for(const n of l.hitHistory)l.hasToSendDataToSubscriber(i,n.data,e)&&t.call(window,n,s)}}unsubscribe(t){l.observers=l.observers.filter((e=>{let{settings:n}=e;return n.observerId!==t}))}emit(t,e,n){let d=Object.assign({},e);if(t===a.YQ.campaign){const{caid:t,vaid:n}=e,i=(0,s.iE)(Number(t));if(i?.isMultipageChild()){const t=i.getParentId(),e=i.getParentName(),s=i.getVariation?.(Number(n));d={...d,caid:t.toString(),caname:e,vaid:s?.masterVariationId?.toString(),vaname:s?.name}}else d={...d,caname:i?.getName(),vaname:i?.getVariation?.(Number(n))?.name};d.sub_type=i?.data.sub_type,d.parentId=i?.isChild()?i.getParentId().toString():null}const u={type:t,timestamp:n,data:d,doWhen:i.Yx};t===a.YQ.pageview?l.hitHistory=[]:l.hitHistory.push(u);(new o.NO).haveConsent([o.rv.collect])?l.sendEvent(u,d,t):(0===c.length&&window.addEventListener(`abtasty_${r.u.Name.consentValid}`,(t=>{const{detail:e}=t;e&&e.consentFor.includes(o.rv.collect)&&(c.forEach((t=>{let{event:e,hit:n,type:i}=t;l.sendEvent(e,n,i)})),c=[])})),c.push({event:u,hit:d,type:t}))}static sendEvent(t,e,n){l.observers.forEach((i=>{l.hasToSendDataToSubscriber(i,e,n)&&i.fn.call(window,t,i.settings)}))}static isAnActiveIntegrationForThisCampaign(t,e,n){let{instances:i=[]}=e;return n!==a.YQ.campaign||!i.length||i.some((e=>{let{testIds:n}=e;return n?.includes(Number(t.caid))||n?.includes(Number(t.parentId))}))}static getInstance(){return l.instance||(l.instance=new l),l.instance}static hasToSendDataToSubscriber(t,e,n){let{hitType:i,settings:s}=t;return l.isAnActiveIntegrationForThisCampaign(e,s,n)&&(!i||i===n)}}},3692:(t,e,n)=>{n.d(e,{x:()=>i});let i=function(t){return t.visitorevent="EAI_VISITOREVENT",t.pageview="EAI_PAGEVIEW",t}({})},1492:(t,e,n)=>{n.d(e,{R1:()=>a,X8:()=>s,YQ:()=>i,aE:()=>o,qz:()=>r});let i=function(t){return t.campaign="CAMPAIGN",t.event="EVENT",t.item="ITEM",t.pageview="PAGEVIEW",t.segment="SEGMENT",t.transaction="TRANSACTION",t.visitorevent="VISITOREVENT",t.nps="NPS",t.batch="BATCH",t.datalayer="DATALAYER",t.consent="CONSENT",t.product="PRODUCT",t.usage="USAGE",t.troubleshooting="TROUBLESHOOTING",t.performance="PERFORMANCE",t}({}),s=function(t){return t.CART_ITEM="CART_ITEM",t.CART_TOTAL="CART_TOTAL",t.VIEW="VIEW",t}({}),a=function(t){return t.strict="STRICT_MODE",t.permissive="PERMISSIVE_MODE",t}({}),o=function(t){return t.any_cookie="LOW_COOKIE",t.specific_cookie="COMPLIANT_COOKIE",t.custom_js="MANUAL_CODE",t.third_party="THIRD_PARTY",t.didomi="DIDOMI",t}({}),r=function(t){return t.Boolean="boolean",t.IntegerArray="integer[]",t.Integer="integer",t.FloatArray="float[]",t.Float="float",t.ArrayArray="array[]",t.Array="array",t.ObjectArray="object[]",t.Object="object",t.StringArray="string[]",t.String="string",t}({})},6046:(t,e,n)=>{n.d(e,{I:()=>a});var i=n(648),s=n(6361);const a=async()=>{try{return await(0,s._)((()=>n.e(153,"low").then(n.bind(n,206))))}catch(t){return(0,i.vV)("AB Tasty's Tag can't be loaded. Caused by:",t),null}}},7386:(t,e,n)=>{n.d(e,{Cy:()=>o,E:()=>d,zj:()=>l});n(1134);var i=n(648),s=n(2484);const a="ABTastyAllocation",o="0",r={dynAllocWait:{promise:null,resolve:null,reject:null}};function c(){const t=r.dynAllocWait;t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n}))}function l(){return r.dynAllocWait.promise}function d(){let t;try{t=JSON.parse(s.Ks.getItem(s.b1,a))}catch(t){i.vV(`Error parsing allocations data: ${t}`)}return t}c()},1666:(t,e,n)=>{n.d(e,{u$:()=>h,KL:()=>m,q0:()=>f,uA:()=>y,Tt:()=>p});var i=n(3346),s=n(7426),a=n(2484),o=n(3595),r=n(648);const c="ABTastyGeoloc";class l{constructor(t,e){this.name=t,this.state=e,this.createWaitPromise()}resetState(){this.state.wait.reject?.(`${this.name} service state is being reset`),this.state.wait={promise:null,resolve:null,reject:null},this.state.data=null,this.createWaitPromise()}createWaitPromise(){const t=this.state.wait;t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n}))}getWaitPromise(){return this.state.wait.promise}getData(){try{return(0,o.g)(this.state.data)?JSON.parse(a.Ks.getItem(a.b1,c)):this.state.data}catch(t){return(0,r.vV)(`Error parsing ${this.name}: ${t}`),null}}setData(t){this.state.data=t,a.Ks.setItem(a.b1,c,JSON.stringify(t))}async fetch(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{weather:!1};if(!(this.state.isNotFilled||o.g)(this.getData()))return(0,o.g)(this.state.data)&&(this.state.data=JSON.parse(a.Ks.getItem(a.b1,c))),void this.state.wait.resolve?.(!0);this.state.wait.promise||this.createWaitPromise();const e=setTimeout((()=>{(0,o.g)(this.getData())&&this.serviceFailure()}),this.state.service.timeout);(0,s.Dk)(this.state.service.timeoutName,e);const n=Object.entries(t).reduce(((t,e,n)=>{let[i,s]=e;return 0===n?`?${i}=${s}`:`${t}&${i}=${s}`}),"");await(0,i.J)(`${this.state.service.route}${n}`).then((t=>t.json())).then((t=>(this.setData(t),this.state.wait.resolve?.(!0),(0,s.fD)(this.state.service.timeoutName),!0))).catch((t=>(this.serviceFailure(),this.state.wait.reject?.(`An error occurred on ${this.name} service: ${t}`),(0,r.vV)(`Error while fetching ${this.name} data: ${t}`),!1)))}serviceFailure(){sessionStorage.setItem(c,""),this.state.wait.reject?.(`${this.name} service failure`),(0,s.fD)(this.state.service.timeoutName)}}const d={wait:{promise:null,resolve:null,reject:null},data:null,service:{timeout:3e3,timeoutName:"ipFetchLoop",route:"https://dcinfos-cache.abtasty.com/v1/geoip"}},u=new l("geoloc",{wait:{promise:null,resolve:null,reject:null},data:null,isNotFilled:t=>!t?.country_name,service:{timeout:3e3,timeoutName:"geolocFetchLoop",route:"https://dcinfos-cache.abtasty.com/v1/geoip"}}),g=new l("ip",d),h=()=>u.fetch({weather:!1}),m=()=>u.getData(),p=()=>(u.getData()||g.getData())?.ip_address,f=()=>u.getWaitPromise(),y=()=>g.getWaitPromise()},3002:(t,e,n)=>{n.d(e,{a:()=>g,g:()=>h});var i=n(648),s=n(3346),a=n(427),o=n(7426),r=n(2484),c=void 0;const l="ABTastyUA",d={timeout:3e3,timeoutName:"userAgentFetchLoop",route:"https://dcinfos-cache.abtasty.com/v1/ua-parser"},u=()=>{window.ABTasty.pendingUAParser=!1,sessionStorage.setItem(l,""),(0,o.fD)(d.timeoutName)},g=(t=>{const e={request:void 0,ua:void 0};return function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e.request=void 0,e.ua=void 0,r.Ks.removeItem(r.b1,l)),e.ua)return window.ABTasty.pendingUAParser=!1,e.ua;if(!r.Ks.getItem(r.b1,l)){const i=t=>{t&&r.Ks.setItem(r.b1,l,JSON.stringify(t)),e.ua=t};return n?(e.request||(e.request=t.apply(c)),e.request.then((t=>(i(t),t)))):(e.request||(e.request=t.apply(c,[i])),e.ua)}window.ABTasty.pendingUAParser=!1;try{const t=JSON.parse(r.Ks.getItem(r.b1,l));return e.ua=t,e.ua}catch(t){return(0,i.FF)(`Error while parsing UserAgent from sessionStorage: ${t}`),e.ua}}})((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};window.ABTasty.pendingUAParser=!0;const e=(()=>{try{return new AbortController}catch(t){(0,i.FF)("Could not create AbortController",t)}})(),n=setTimeout((()=>{void 0===g()&&(e?.abort(),u())}),d.timeout);return(0,o.Dk)(d.timeoutName,n),await(0,s.J)(d.route,{signal:e?.signal}).then((t=>t.json())).then((e=>(window.ABTasty.pendingUAParser=!1,(0,o.fD)(d.timeoutName),t(e),e))).catch((e=>{u(),(0,i.vV)(`Error while fetching userAgentParser data: ${e}`),t(void 0)}))})),h=async function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;const n=t?await g(t):g(t);return 0===e.length?[n]:e.map((t=>(0,a.A)(t.split("."),n)))}},6692:(t,e,n)=>{n.d(e,{bo:()=>G,H_:()=>F,$K:()=>U});var i=n(977),s=n(5909),a=n(8987),o=n(1134),r=n(7471),c=n(648),l=n(3595),d=n(8689),u=n(2852);const g=(0,n(721).c)(((t,e)=>e.join(t)));var h=n(5437),m=n(6257),p=n(3847),f=function(t){return t.get="get",t.set="set",t.remove="remove",t}(f||{});const y="ABTasty",v=[],w=(0,p.x)(),A=(0,p.De)(),S=`${w}/cross-domain-iframe.html`,T=`[src*="${S}"]`;function E(){return new Promise(((t,e)=>{if(document.querySelectorAll(T).length>0)return void t();window.addEventListener("message",b,!1);const n=document.createElement("iframe");n.src=S,n.onload=function(){t()},n.setAttribute("frameborder","0"),n.style.width="0",n.style.height="0",n.style.display="none";const i=document.body||document.head,s=i.childNodes;i.insertBefore(n,s[s.length-1])}))}function I(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){const n={resolve:e,name:t.method===f.remove?`${t.key}-${t.method}`:t.key};v.push(n)}document.querySelector(T).contentWindow.postMessage(JSON.stringify(t),"*")}function b(t){if(t.origin.indexOf(A)<0||!t.data||"string"!=typeof t.data||!/^\{.*"key":"ABTasty(-remove)?".*\}$/.test(t.data))return;const e=JSON.parse(t.data),n=v.find((t=>t.resolve&&t.name===e.key));return n&&(n.resolve(e),n.resolve=null),!1}var C=n(9700),_=n(7904),O=n(88),k=n(2484),D=n(4502),N=n(9076);const R=t=>{try{const e=(document.cookie.match(new RegExp(`(^| |;)${G.getCookieName()}=([^;]+)`,"g"))||[]).map((t=>t.replace(new RegExp(`(^| |;)${G.getCookieName()}=`),""))).map((t=>unescape(t)));if(e.length>1){const n=e.map((e=>((t,e)=>{const n=e=>{const n=t.find((t=>{let{key:n}=t;return n===e}));return n?"th"===e?t=>t:n.typeCast:()=>{}};return e.split("&").map((t=>t.split("="))).map((t=>{let[e,n]=t;return[e,n]})).reduce(((t,e)=>{let[i,s]=e;return{...t,[i]:n(i)(decodeURI(s))}}),{})})(t,e))),i={};return t.forEach((t=>{let{key:e}=t;const s=n.reduce(((t,n)=>(0,l.g)(n[e])?t:[...t,n[e]]),[]);if(s.every((t=>t===s[0])))i[e]=s[0];else switch(e){case"uid":i[e]=(t=>{t.sort(((t,e)=>{let{fst:n}=t,{fst:i}=e;return n-i}));const e=t.filter((t=>{let{fst:e}=t;return e>=0}));return e.length>0?e[0].uid:t[0].uid})(n);break;case"pst":const t=s.some((t=>t>=0));i[e]=t?Math.min(...s.filter((t=>t>=0))):s[0];break;case"fst":i[e]=Math.min(...s);break;case"cst":case"ns":case"pvt":case"pvis":i[e]=Math.max(...s);break;case"th":i[e]=(t=>{const e={};return t.forEach((t=>{t.split("_").forEach((t=>{const n=t.split(".")[0];Object.keys(e).indexOf(n)<0&&(e[n]=t)}))})),Object.values(e).join("_")})(s)}})),(t=>{const{path:e}=(0,D.jS)(0);(0,N.F)(h.Cq,(n=>n.forEach((n=>{a.A.remove(t,{path:e,domain:n})}))))(window.location.href)})(G.getCookieName()),Object.entries(i).reduce(((t,e,n)=>t+(n>0?"&":"")+e.join("=")),"")}return null}catch(t){const e="Handle duplicated ABTasty cookies error.";return c.vV(e),null}};var P=n(8009),B=n(4804),V=n(3340),M=n(9404),L=n(2538),$=n(8445);const j="ABTastyVisitorId";n(7765);const F="cookie-ready";let H,U=function(t){return t.uid="uid",t.fst="fst",t.pst="pst",t.cst="cst",t.ns="ns",t.pvt="pvt",t.pvis="pvis",t.th="th",t.eas="eas",t}({}),x=function(t){return t.visitorID="visitorID",t.firstSessionTimestamp="firstSessionTimestamp",t.previousSessionTimestamp="previousSessionTimestamp",t.currentSessionTimestamp="currentSessionTimestamp",t.numberOfSessions="numberOfSessions",t.pagesViewedTotal="pagesViewedTotal",t.pagesViewedInSession="pagesViewedInSession",t.testsHistory="testsHistory",t.emotionAiSegment="emotionAiSegment",t}({});class G{dictionary=(()=>[{key:U.uid,humanKey:x.visitorID,value:"",typeCast:t=>String(t),saveable:!0},{key:U.fst,humanKey:x.firstSessionTimestamp,value:0,typeCast:t=>Number(t),saveable:!1},{key:U.pst,humanKey:x.previousSessionTimestamp,value:-1,typeCast:t=>Number(t),saveable:!1},{key:U.cst,humanKey:x.currentSessionTimestamp,value:0,typeCast:t=>Number(t),saveable:!1},{key:U.ns,humanKey:x.numberOfSessions,value:0,typeCast:t=>Number(t),saveable:!1},{key:U.pvt,humanKey:x.pagesViewedTotal,value:0,typeCast:t=>Number(t),saveable:!1},{key:U.pvis,humanKey:x.pagesViewedInSession,value:0,typeCast:t=>Number(t),saveable:!1},{key:U.th,humanKey:x.testsHistory,value:{},typeCast:this.deserializeTestsHistory,saveable:!1}])();constructor(){if(H)return H;const{customCookieDomain:t,customCookiePath:e}=(0,o.F5)();this.sessionCookie=new r.n,this.name=G.getCookieName(),this.customDomain=t,this.customPath=e,window.ABTasty.clearCookie=this.clear.bind(this),window.ABTasty.clearAllCookies=this.clearAll.bind(this),H=this;const n=R(this.dictionary);return(0,l.g)(n)||a.A.set(this.name,n,this.getConfig()),H}static build(){return new Promise((async t=>{if(H)return t(H);const e=new G;return e.isCrossDomainUsed()?await new Promise(((t,e)=>{E().then((()=>{I({key:y,identifier:(0,o.pw)(),method:f.get},t)}))})).then((async t=>await e.crossCookieMerge(t.value,e.sessionCookie))):await e.setUp(e.sessionCookie),"function"!=typeof window.ABTasty.getCampaignHistory&&(window.ABTasty.getCampaignHistory=()=>e.getCampaignHistory()),t(H||e)}))}async clearAllStorage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];k.Ks.clear(e),t.resetDictionary(),t.clear(),this.clear(),await(this.isCrossDomainUsed()?new Promise(((t,e)=>{E().then((()=>{I({key:y,identifier:(0,o.pw)(),method:f.remove},t)}))})):null)}setUp(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e;return null!=e&&""!==e.trim()||(n=(new m.x).getFromLocalStorage(this.name),(null===n||(0,C.Gr)()&&(0,_.hL)())&&(n=a.A.get(this.name)||n)),this.assureVisitorId(n).then((async e=>{if(!e&&n){this.load(n,this.getVisitorId());const e=this.calculateExpires();e.getTime()-(new Date).getTime()<=0?(await this.clearAllStorage(t,[j]),this.resetDictionary(),G.resetInstance(),H=await G.build()):this.expires=e}else this.clearAllStorage(t,[j,$.ok.HIT_HISTORY_SESSION]),this.sessionCookie=new r.n(!0),this.sessionCookie.save();return G.cookieReady||(G.cookieReady=!0,(0,M.IF)(F)),!0}))}static getCookieName(){return"ABTasty"}static exists(){return!!(0,O.to)(k.Sd,this.getCookieName())||!!a.A.get(this.getCookieName())}static getRawData(){return(0,O.to)(k.Sd,this.getCookieName())||a.A.get(this.getCookieName())}static hasVisitorIdStored(){return G.exists()&&new RegExp(`${U.uid}=[^&]+&`).test(G.getRawData())}async crossCookieMerge(t,e){if(!t||null==t){return void(await this.setUp(e)&&this.save(!0))}let n=(new m.x).getFromLocalStorage(this.name);if((null===n||(0,C.Gr)()&&(0,_.hL)())&&(n=a.A.get(this.name)),!n||null===n){return void(await this.setUp(e,t)&&this.save(!0))}const i=t.split("&").find((t=>"th"===t.split("=")[0]));if(!i)return this.load(n);const s=i.split("=")[1],o=n.split("&").find((t=>"th"===t.split("=")[0]))||"";s.split("_").map((t=>{o.indexOf(t.split(".")[0])>=0||(n=n+"_"+t)}));await this.setUp(e,n)&&this.save(!0)}matchUrlSettings(){return(0,o.cR)().some((t=>{let{includeOrExclude:e,url:n,method:i}=t;return"exclude"!==e&&(0,h.wM)(i,n)}))}get(t){return this.dictionary.find((e=>e.key===t||e.humanKey===t))}set(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==n?this.get(t).value=e:this.get(t).value[n]=e}setSaveable(t,e){t.forEach((t=>{this.get(t).saveable=e}))}incr(t,e){const n=this.get(t);n.value=n.value+e}resetDictionary(){this.dictionary.forEach((t=>{const e=(()=>{switch(t.key){case U.pst:return"-1";case U.ns:return"1";default:return""}})();t.value=t.typeCast(e)}))}load(t,e){try{unescape(t).split("&").map((t=>t.split("="))).map((t=>{let[n,i]=t;return n===U.uid&&e?[n,e]:[n,i]})).forEach((t=>{let[e,n]=t;if(void 0!==this.get(e))return e===U.eas&&n.length>50?((0,c.FF)(`Cookie key 'eas' is too large ${n.length} char (> 50 char) ; removing it from the cookie: `,n),void(this.get(e).value?.length>50&&this.set(e,""))):void this.set(e,this.get(e).typeCast(decodeURI(n)));(0,c.FF)(`Cookie key '${e}' is unknown ; removing it from the cookie.${n?` Value attached '${n}'.`:""}`)})),this.removePausedTests()}catch(t){(0,c.vV)(`Error loading the cookie. ${t}`),this.resetDictionary()}}removePausedTests(){const t=(0,o.yn)();if(!t||!t.obsoletes)return[];const e=[];return Object.keys(this.get(x.testsHistory).value).forEach((n=>{t.obsoletes.includes(parseInt(n,10))&&(this.removeCampaign(n),e.push(parseInt(n,10)))})),this.save(),e}getVisitorId(){return this.get(x.visitorID).value}getCampaignHistory(){const t=this.getCampaigns(),e={},n=[4581,8924,47674].includes((0,o.bA)());return Object.keys(t).filter((t=>n||void 0!==(0,o.yn)().tests[t])).filter((e=>t[e].variationID!==B.me.Untracked)).map((n=>{const s=(0,o.yn)().tests[n];return void 0!==s&&s.parentID>0&&(0,o.yn)().tests[s.parentID]?.type===i.cz.multipage&&(e[s.parentID]=t[n].variationID!==B.me.Original?String(s.variations[t[n].variationID].masterVariationId):"0"),e[n]=String(t[n].variationID)})),e}getCampaign(t){return this.get(x.testsHistory).value[t]}getCampaigns(){return this.get(x.testsHistory).value}setCampaign(t,e){this.set(x.testsHistory,e,t)}removeCampaign(t){delete this.get(x.testsHistory).value[t]}getFirstSessionTimestamp(){return this.get(x.firstSessionTimestamp).value}getCurrentSessionTimestamp(){return this.get(x.currentSessionTimestamp).value}getPreviousSessionTimestamp(){return this.get(x.previousSessionTimestamp).value}getNumberOfSessions(){return this.get(x.numberOfSessions).value}getPagesViewedInSession(){return this.get(x.pagesViewedInSession).value}hasSeenCampaign(t,e){const n=this.getCampaign(t);return!!n&&((0,l.g)(e)?n.variationID!==B.me.Untracked:n.variationID===e)}isValid(t){return/^uid=.*&fst=[0-9]{13,}&pst=(-1|[0-9]{13,})&cst=[0-9]{13,}&ns=[0-9]\d*&pvt=[1-9]\d*&pvis=[1-9]\d*&th=(\d+\.(-1|\d)+\.[1-9]\d*\.[0-9]\d*\.[1-9]\d*\.[1|0]\.[0-9]{13,}\.[0-9]{13,}\.[1|0]_?)*$/.test(t)}calculateExpires(){const t=(0,o.B9)(),e=this.getFirstSessionTimestamp(),n=e>0?new Date(e):new Date;return new Date(n.setMonth(n.getMonth()+t))}getConfig(){return(0,D.jS)(this.expires||this.calculateExpires())}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;delete window.ABTasty.temporaryCookieValues?.[this.name],t===_.rb||(0,l.g)(t)&&(0,_.og)()?(new m.x).removeLocalStorage(this.name):a.A.remove(this.name,this.getConfig())}clearAll(){this.clear(),(new r.n).clear()}static resetInstance(){H=null}static getInstance(){return H}encodeValue(t){return null!=t&&"object"==typeof t?this.serializeTestsHistory(t):encodeURI(t)}async save(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!G.cookieReady&&!t)return;this.setSaveable([x.visitorID],true);const e=this.dictionary.map((t=>t.saveable?[`${t.key}=${this.encodeValue(t.value)}`]:null)).filter((t=>!(0,l.g)(t))).join("&");if(!(new P.NO).haveConsent([P.rv.storage]))return(0,l.g)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:e,config:this.getConfig()});const n=(0,_.og)();e!==(n?(new m.x).getFromLocalStorage(this.name):a.A.get(this.name))&&(n?(new m.x).updateLocalStorage(this.name,e):a.A.set(this.name,e,this.getConfig()),this.isCrossDomainUsed()&&!t&&function(t){new Promise(((e,n)=>{E().then((()=>{I({key:y,value:t,identifier:(0,o.pw)(),method:f.set},e)}))}))}(e),(0,C.Gr)()?n||(new m.x).updateLocalStorage(this.name,e):this.clear(n?_.ai:_.rb),(0,c.SW)("Saving data to "+(n?"localStorage":"cookie"),e))}isFirstSession(){return 0===this.get(x.numberOfSessions).value}isNewSession(){return this.sessionCookie.isNewSession}pageView(){const t=new r.n,e=new m.x;this.incr(x.pagesViewedTotal,1);const n=Date.now();t.isNewSession?(this.isFirstSession()?(this.set(x.firstSessionTimestamp,n),this.assureVisitorId()):this.set(x.previousSessionTimestamp,this.get(x.currentSessionTimestamp).value),(0,L.e)()&&k.Ks.setItem(k.b1,$.ok.SESSION_DATA,JSON.stringify({[$.pi.CURRENT_SESSION_TIMESTAMP]:n})),this.set(x.currentSessionTimestamp,n),this.incr(x.numberOfSessions,1),this.set(x.pagesViewedInSession,1)):(this.incr(x.pagesViewedInSession,1),0===this.getFirstSessionTimestamp()&&this.set(x.firstSessionTimestamp,n),0===this.getCurrentSessionTimestamp()&&((0,L.e)()&&k.Ks.setItem(k.b1,$.ok.SESSION_DATA,JSON.stringify({[$.pi.CURRENT_SESSION_TIMESTAMP]:n})),this.set(x.currentSessionTimestamp,n))),e.addVisitedPage(this)(),this.save()}assureVisitorId(t){return new Promise(((e,n)=>e((()=>!(((0,d.I)(this.getVisitorId())?t?.match(new RegExp(`${U.uid}=([^&]+)`))?.[1]||G.getRawData()?.match(new RegExp(`${U.uid}=([^&]+)`))?.[1]||null:this.getVisitorId())||!(0,d.I)(this.getVisitorId()))&&(this.set(x.visitorID,(0,s.generateId)()),!0))())))}campaignView(t,e,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=new r.n,a=this.getCampaign(t);[V.B.timeout,V.B.failedLoading].includes(n)||(a?this.setCampaign(t,{variationID:e,nbSeenTotal:a.nbSeenTotal+1,nbSeenInSession:s.isNewSession?1:a.nbSeenInSession+1,nbSessions:s.isNewSession?a.nbSessions+1:a.nbSessions,currentlyApplied:1,firstViewTimestamp:a.firstViewTimestamp,lastViewTimestamp:Date.now(),randomAllocation:a.randomAllocation,lastSessionSeen:this.getNumberOfSessions()}):this.setCampaign(t,{variationID:e,nbSeenTotal:1,nbSeenInSession:1,nbSessions:1,currentlyApplied:1,firstViewTimestamp:Date.now(),lastViewTimestamp:Date.now(),randomAllocation:i?1:0,lastSessionSeen:this.getNumberOfSessions()})),this.save()}serializeTestsHistory(t){return Object.keys(t).map((e=>{const n=t[e];return[e,n.variationID,n.nbSeenTotal,n.nbSeenInSession,n.nbSessions,n.currentlyApplied,n.firstViewTimestamp,n.lastViewTimestamp,n.randomAllocation,n.lastSessionSeen]})).map(g(".")).join("_")}deserializeTestsHistory(t){return t.split("_").filter((t=>!(0,d.I)(t))).map((0,u.l)(".")).reduce(((t,e)=>(t[Number(e[0])]={variationID:Number(e[1]),nbSeenTotal:Number(e[2]),nbSeenInSession:Number(e[3]),nbSessions:Number(e[4]),currentlyApplied:Number(e[5]),firstViewTimestamp:Number(e[6]),lastViewTimestamp:Number(e[7]),randomAllocation:Number(e[8]),lastSessionSeen:Number(e[9])},t)),{})}isCrossDomainUsed(){return(0,o.cR)().length>0&&this.matchUrlSettings()}getEmotionAiSegment(){return this.get(x.emotionAiSegment).value}setEmotionAiSegment(t){if(t.length<=50)return this.set(x.emotionAiSegment,t),this.save();(0,c.NI)(`[Cookie] 'eas' key not saved due to large value (> 50 char): was ${t.length} with value ${t}`)}}},7471:(t,e,n)=>{n.d(e,{n:()=>g,t:()=>u});var i=n(8987),s=n(3595),a=n(1134),o=n(648),r=n(4502),c=n(8009);let l,d,u=function(t){return t.mrasn="mrasn",t.referrer="referrer",t.landingPage="lp",t}({});class g{dictionary=(()=>[{key:u.mrasn,value:"",typeCast:t=>String(t)}])();constructor(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.dictionary.push({key:u.landingPage,value:window.location.href,typeCast:t=>String(t)}),l&&!t)return l;const{customCookieDomain:e,customCookiePath:n}=(0,a.F5)();this.name=g.getCookieName(),this.customDomain=e,this.customPath=n;const i=this.getCookieValue();return i?(this.isNewSession=!1,void 0===d&&(d=!1),this.load(i)):(this.isNewSession=!0,void 0===d&&(d=!0),this.setLandingPage(this.decodeURIComponentSafely(window.location.href))),l=this,window.ABTasty.clearSessionCookie=this.clear.bind(this),this.save(),l}isEncoded(t){return(t=t||"")!==decodeURIComponent(t)}fullyDecodeURI(t){for(;this.isEncoded(t);)t=decodeURIComponent(t);return t}decodeURIComponentSafely(t){try{return this.fullyDecodeURI(t)}catch(e){try{return this.fullyDecodeURI(decodeURIComponent(t))}catch(e){return t}}}static getCookieName(){return"ABTastySession"}getCookieValue(){return(new c.NO).haveConsent([c.rv.storage])||(0,s.g)(window.ABTasty.temporaryCookieValues)||(0,s.g)(window.ABTasty.temporaryCookieValues[this.name])?i.A.get(this.name):window.ABTasty.temporaryCookieValues[this.name].value}get(t){return this.dictionary.find((e=>e.key===t))}set(t,e){this.get(t).value=e,this.save()}incr(t,e){const n=this.get(t);n.value=n.value+e,this.save()}resetDictionary(){this.dictionary.forEach((t=>{switch(t.key){case u.referrer:t.value=t.typeCast("");break;case u.landingPage:t.value=t.typeCast(window.location.href);break;default:t.value=t.typeCast("")}}))}load(t){try{const e=new RegExp(this.dictionary.map((t=>`(${t.key}=.*)`)).join("&"));t.match(e).slice(1).map(((t,e)=>{const n=new RegExp(`(${this.dictionary[e].key})=(.*)`);return t.match(n).slice(1)})).forEach((t=>{let[e,n]=t;void 0!==this.get(e)?this.set(e,this.get(e).typeCast(decodeURIComponent(n))):(0,o.FF)(`Session cookie key '${e}' is unknown ; removing it from the cookie.${n?` Value attached '${n}'.`:""}`)}))}catch(t){(0,o.vV)("Error loading the session cookie.",t),this.resetDictionary(),this.isNewSession=!0,void 0===d&&(d=!0)}}save(){const t=this.dictionary.map((t=>[`${t.key}=${encodeURIComponent(t.value)}`])).join("&");if(this.isValid(t)){if(!(new c.NO).haveConsent([c.rv.storage]))return(0,s.g)(window.ABTasty.temporaryCookieValues)&&(window.ABTasty.temporaryCookieValues={}),void(window.ABTasty.temporaryCookieValues[this.name]={value:t,config:this.getConfig()});i.A.set(this.name,t,this.getConfig())}else(0,o.vV)("Session cookie cannot be saved, incorrect value",t)}clear(){delete window.ABTasty?.temporaryCookieValues?.[this.name],i.A.remove(this.name,this.getConfig())}isValid(t){return!0}getConfig(){const t=new Date((new Date).getTime()+18e5);return(0,r.jS)(t)}setMrasn(t){this.set(u.mrasn,t)}getMrasn(){return this.get(u.mrasn).value}setLandingPage(t){this.set(u.landingPage,t)}getLandingPage(){return this.get(u.landingPage).value}getReferrer(){return""}isItNewSession(){return d}}},6257:(t,e,n)=>{n.d(e,{x:()=>l});var i=n(648),s=n(3595),a=n(8689),o=n(88),r=n(2484),c=n(3476);class l{constructor(){}setEmotionAiData(t,e){const n=this.getABTastyData();this.updateLocalStorage(c.d.LOCAL_STORAGE,JSON.stringify({...n,[c.d.EMOTION_AI]:{...n[c.d.EMOTION_AI],[t]:e}}))}getEmotionAiData(){return this.getABTastyData()[c.d.EMOTION_AI]||{}}getABTastyData(){try{return JSON.parse(this.getFromLocalStorage(c.d.LOCAL_STORAGE))||{}}catch(t){return(0,i.FF)("Could not parse ABTastyData.",t),{}}}getItemFromABTastyData(t){return this.getABTastyData()[t]}getActionTrackings(){return this.getABTastyData()&&this.getABTastyData()[c.d.ACTION_TRACKING]}addActionTracking(t){this.addItemToABTastyData(c.d.ACTION_TRACKING,t)}getTransactions(){return this.getABTastyData()&&this.getABTastyData()[c.d.TRANSACTION]}addTransaction(t){this.addItemToABTastyData(c.d.TRANSACTION,t)}getItems(){return this.getABTastyData()&&this.getABTastyData()[c.d.ITEM]}addItem(t){this.addItemToABTastyData(c.d.ITEM,t)}getSegments(){return this.getABTastyData()[c.d.SEGMENT]}addSegment(t){this.addItemToABTastyData(c.d.SEGMENT,t)}setSegments(t){const e=this.getABTastyData();this.updateLocalStorage(c.d.LOCAL_STORAGE,JSON.stringify({...e,[c.d.SEGMENT]:t}))}getCustomVariables(){return this.getABTastyData()&&this.getABTastyData()[c.d.CUSTOM_VARIABLE]}addCustomVariable(t){this.addItemToABTastyData(c.d.CUSTOM_VARIABLE,t)}getVisitedPages(){return this.getABTastyData()&&this.getABTastyData()[c.d.VISITED_PAGES]}editLastVisitedPage(t){const e=this.getVisitedPages();if((0,s.g)(e)||(0,a.I)(e))return;const n=e[e.length-1];e[e.length-1]={...n,...t};const i=this.getABTastyData();this.updateLocalStorage(c.d.LOCAL_STORAGE,JSON.stringify({...i,[c.d.VISITED_PAGES]:e}))}addVisitedPage=t=>{var e=this;return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.location.href,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;const s={url:n,visite:t.getNumberOfSessions(),time:Date.now(),title:i};e.addItemToABTastyData(c.d.VISITED_PAGES,s),(0,a.I)(i)&&(0,o.Yx)((()=>!(0,a.I)(document.title)),(()=>e.editLastVisitedPage({title:document.title})))}};addVote(t){const e="maxScore"in t?c.d.CSAT_VOTES:c.d.NPS_VOTES,n=this.getABTastyData();let i=n[e]||[];const s=i.findIndex((e=>{let{caid:n}=e;return n===t.caid}));-1===s?i=[...i,t]:i[s]=t,this.updateLocalStorage(c.d.LOCAL_STORAGE,JSON.stringify({...n,[e]:i}))}getVotes(t){return this.getABTastyData()&&this.getABTastyData()[t]}addItemToABTastyData(t,e){const n=this.getABTastyData();n[t]&&Array.isArray(n[t])||(n[t]=[]),n[t].push(e),this.updateLocalStorage(c.d.LOCAL_STORAGE,JSON.stringify(n))}updateLocalStorage(t,e){return r.Ks.setItem(r.Sd,t,e)}getFromLocalStorage(t){return r.Ks.getItem(r.Sd,t)}removeLocalStorage(t){return r.Ks.removeItem(r.Sd,t)}}},3476:(t,e,n)=>{n.d(e,{a:()=>s,d:()=>i});let i=function(t){return t.LOCAL_STORAGE="ABTastyData",t.ACTION_TRACKING="ActionTracking",t.CUSTOM_VARIABLE="CV",t.ITEM="items",t.SEGMENT="segments",t.TRANSACTION="transactions",t.VISITED_PAGES="VisitedPages",t.CSAT_VOTES="CsatVotes",t.NPS_VOTES="NpsVotes",t.EMOTION_AI="eai",t}({}),s=function(t){return t.CV="cv",t.ECO="eco",t}({})},2492:(t,e,n)=>{n.d(e,{E:()=>o});var i=n(88),s=n(2484),a=n(8445);class o{constructor(){}getItems(t){return(0,i.to)("sessionStorage",t)}addItem(t,e){(0,i.nf)("sessionStorage",t,e)}getHitHistorySession(){return JSON.parse(s.Ks.getItem(s.b1,a.ok.HIT_HISTORY_SESSION)||"{}")}setHitHistorySession(t,e,n){const i=this.getHitHistorySession();if(i[t]?.includes(e))return i;const o=n?i[t]&&i.cst===n?{...i,[t]:[...i[t],e]}:{...i,cst:n,[t]:[e]}:i[t]?{...i,[t]:[...i[t],e]}:{...i,[t]:[e]};return s.Ks.setItem(s.b1,a.ok.HIT_HISTORY_SESSION,JSON.stringify(o)),o}getHitHistorySessionCst(){return this.getHitHistorySession().cst}checkHitHistorySession(t,e){const n=this.getHitHistorySession();return!!n[t]&&n[t]?.includes(e)||!1}cleanHitHistorySession(t){const e=this.getHitHistorySession(),n=Object.entries(e).filter((e=>{let[n]=e;return n!==t}));Object.keys(n).length>0?s.Ks.setItem(s.b1,a.ok.HIT_HISTORY_SESSION,JSON.stringify(n.reduce(((t,e)=>{let[n,i]=e;return{...t,[n]:i}}),{}))):s.Ks.removeItem(s.b1,a.ok.HIT_HISTORY_SESSION)}}},8445:(t,e,n)=>{n.d(e,{_V:()=>s,ok:()=>i,pi:()=>a});let i=function(t){return t.CUSTOM_IDENTITIES="ABTastyCustomIdentities",t.CUSTOM_SEGMENTS="ABTastyCustomSegments",t.HIT_HISTORY_SESSION="ABTastySessionHitHistory",t.SESSION_DATA="ABTastySession",t}({}),s=function(t){return t.CURRENT_SESSION_TIMESTAMP="cst",t.CAMPAIGNS="campaigns",t.TROUBLESHOOT="troubleshoot",t.PERFORMANCE="performance",t}({}),a=function(t){return t.CURRENT_SESSION_TIMESTAMP="cst",t}({})},2484:(t,e,n)=>{n.d(e,{Ks:()=>g,Sd:()=>c,b1:()=>l});var i=n(648),s=n(88),a=n(117),o=n(1134),r=n(8009);const c="localStorage",l="sessionStorage";function d(){return!!(new r.NO).haveConsent([r.rv.storage])||!(!(0,o.F5)().waitForConsent||"disabled"!==(0,o.F5)().waitForConsent.mode)}function u(t){const e=/^(ab\s?tasty)/i;let n="";for(let i=window[t].length-1;i>=0;i--)n=window[t].key(i),n.match(e)&&(this.data[t][n]=window[t][n],(0,s.DC)(t,n))}const g={state:{inmemory:!0},data:{localStorage:{},sessionStorage:{}},migrate:function(){switch(d()?"browser":"memory"){case"browser":if(!this.state.inmemory)return;Object.keys(this.data).forEach((t=>{Object.keys(this.data[t]).forEach((e=>{(0,s.nf)(t,e,this.data[t][e])}))})),this.state.inmemory=!1,(0,i.fH)("Data storage: data has been written in storage thanks to consent validation.");break;case"memory":u.call(this,"localStorage"),u.call(this,"sessionStorage"),this.state.inmemory=!0,(0,i.fH)("Data storage: data has been put in memory due to consent revoked.")}},setItem:function(t,e,n){this.state.inmemory&&d()&&this.migrate(),this.state.inmemory?this.data[t]=Object.assign(this.data[t],{[e]:n}):(0,s.nf)(t,e,n)},getItem:function(t,e){return this.state.inmemory&&d()&&this.migrate(),this.state.inmemory?(0,a.X)(null,[t,e],this.data):(0,s.to)(t,e)||null},removeItem:function(t,e){this.state.inmemory&&d()&&this.migrate(),this.state.inmemory?delete this.data[t][e]:(0,s.DC)(t,e)},clear:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=/^(ab\s?tasty)/i;[c,l].forEach((n=>{Object.keys(window[n]).forEach((i=>{!t.includes(i)&&e.test(i)&&this.removeItem(n,i)}))}))},setState:function(t,e){this.state[t]=e}}},2538:(t,e,n)=>{n.d(e,{e:()=>s});var i=n(1134);const s=()=>{const{cookielessEnabled:t}=(0,i.F5)();return t}},4502:(t,e,n)=>{n.d(e,{jS:()=>r,rh:()=>c});var i=n(8987),s=n(1205),a=n(5437),o=n(1134);function r(t){const{isSecureCookie:e,customCookieDomain:n,customCookiePath:i}=(0,o.F5)();return{expires:t,path:i||"/",domain:n||(0,a.R2)()||void 0,secure:e||(0,s.GW)()||!1,samesite:e||(0,s.GW)()?"none":"lax"}}function c(t,e){const n="ABTastyCookieQuickTest",s=`${t}${n}`;let a=!1;i.A.set(e,s,r(388));try{a=document.cookie.indexOf(n)>-1,t&&a?i.A.set(e,t,r(388)):i.A.remove(e,r(1))}catch(t){i.A.remove(e,r(1))}return a}},7904:(t,e,n)=>{n.d(e,{BZ:()=>g,Ey:()=>u,ai:()=>l,hL:()=>m,og:()=>h,rb:()=>c});var i=n(8987),s=n(1134),a=n(648),o=n(4502),r=n(6692);const c="local",l="cookies",d=3900;function u(){if((0,s.AU)()){const t=i.A.get(r.bo.getCookieName());if(t&&t.length>=d)return(0,a.FF)("Cookies size is too big, ABTasty tag stopped execution."),!1;if(!(0,o.rh)(t,r.bo.getCookieName())){const{domain:t,path:e,secure:n}=(0,o.jS)(0),i=[t&&!`.${window.location.hostname}`.includes(t)?`domain ${t}`:null,"/"!==e?`path ${e}`:null];return n&&!window.isSecureContext?((0,a.FF)("ABTasty data can't be saved to cookie, ABTasty tag stopped execution. A custom configuration ask to use secure cookie but page context is not secure."),!1):i.find((t=>t))?((0,a.FF)(`ABTasty data can't be saved to cookie, ABTasty tag stopped execution. A custom configuration with ${i.filter((t=>t)).join(" and ")} is set for this account. Please check it matches the current URL.`),!1):((0,a.FF)(`ABTasty data can't be saved to cookie on domain ${t} and path ${e}, ABTasty tag stopped execution.`),!1)}}return!0}function g(){const t=(h()&&null!=localStorage&&null!=localStorage.setItem&&null!=localStorage.getItem||m()&&navigator.cookieEnabled)&&null!=sessionStorage&&null!=sessionStorage.setItem&&null!=sessionStorage.getItem;return t||(0,a.FF)("AB Tasty script encountered an error: LocalStorage, SessionStorage & Cache option aren't allowed on this browser. Execution has stopped."),t}function h(){const{storageMode:t}=(0,s.F5)();return t===c}function m(){return(0,s.F5)().storageMode===l}},3621:(t,e)=>{var n;!function(t){t.Cookie="cookie",t.LocalStorage="local_storage",t.JSVariable="js_variable"}(n||(n={}))},108:(t,e)=>{var n,i;e.gp=e.Ey=void 0,function(t){t.anyCookie="any_cookie",t.customJs="custom_js",t.didomi="didomi",t.disabled="disabled",t.specificCookie="specific_cookie",t.thirdParty="third_party",t.userAction="user_action",t.customEvent="custom_event"}(n||(e.Ey=n={})),function(t){t[t.test=1]="test",t[t.perso=2]="perso",t[t.redirection=4]="redirection",t[t.aa=8]="aa",t[t.patch=16]="patch"}(i||(e.gp=i={}))},6916:(t,e)=>{var n,i;e.q=void 0,function(t){t.PULL="pull",t.PUSH="push",t.DATALAYER="datalayer"}(n||(e.q=n={})),function(t){t.CUSTOM_TRACKING="ct",t.TRANSACTION_TRACKING="tt",t.CUSTOM_AND_TRANSACTION_TRACKING="all"}(i||(i={}))},9578:(t,e,n)=>{let i;n.d(e,{u:()=>i}),function(t){let e=function(t){return t.consentValid="consentValid",t.executedCampaign="executedCampaign",t.tagContentExecuted="tagContentExecuted",t.trackingInitialized="trackingInitialized",t.identityAdded="identityAdded",t.analyticsLoaded="analyticsLoaded",t}({});t.Name=e;let n=function(t){return t.loading="loading",t.complete="complete",t}({});t.Status=n}(i||(i={}))},977:(t,e)=>{var n,i,s,a,o,r,c;e.SC=e.Vd=e.fH=e.Vp=e.JP=e.qA=e.cz=void 0,function(t){t.aa="aa",t.ab="ab",t.multipage="multipage",t.multivariate="multivariate",t.mastersegment="mastersegment",t.subsegment="subsegment"}(n||(e.cz=n={})),function(t){t.simplePersonalization="sp",t.multipagePersonalization="mpp",t.multiexperiencePersonalization="mep",t.patch="patch",t.multipageTest="mpt",t.multivariate="mvt"}(i||(e.qA=i={})),function(t){t.aaTest="aa",t.redirection="redirection",t.patch="patch"}(s||(e.JP=s={})),function(t){t.fastest="fastest",t.waitUntil="waituntil",t.noAjax="noajax"}(a||(e.Vp=a={})),function(t){t.any="any",t.once="once",t.oncePerSession="once_per_session",t.regular="regular"}(o||(e.fH=o={})),function(t){t.day="day",t.week="week",t.session="session"}(r||(e.Vd=r={})),function(t){t.all="all",t.some="some"}(c||(e.SC=c={}))},6158:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,s)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.OnceSegmentTargetings=e.OnceTriggerTargetings=e.DCInfosTargetings=e.NPS_CONDITION_PROPERTY=e.CSAT_FEEDBACK=e.ABANDONED_CART_PROPERTY_OPERATOR=e.ABANDONED_CART_PROPERTY_TYPE=e.Timeframe=e.CheckMode=void 0;const o=a(n(9469));var r,c,l,d,u,g;!function(t){t.loading="loading",t.periodic="periodic",t.custom="custom",t.lastEntry="last_entry"}(r||(e.CheckMode=r={})),function(t){t[t.lastSession=-1]="lastSession",t[t.pastTwoWeeks=15]="pastTwoWeeks",t[t.pastMonth=30]="pastMonth",t[t.pastYear=390]="pastYear"}(c||(e.Timeframe=c={})),function(t){t.PRODUCT_NUMBER="product number",t.TOTAL_AMOUNT="total amount"}(l||(e.ABANDONED_CART_PROPERTY_TYPE=l={})),function(t){t.EQUAL="equal",t.GREATER="greater",t.LOWER="lower",t.BETWEEN="between"}(d||(e.ABANDONED_CART_PROPERTY_OPERATOR=d={})),function(t){t.POSITIVE="positive",t.NEUTRAL="neutral",t.NEGATIVE="negative"}(u||(e.CSAT_FEEDBACK=u={})),function(t){t.EQUALS="equals",t.GREATER="equal_to_or_greater_than",t.LOWER="lower_than_or_equals",t.BETWEEN="between"}(g||(e.NPS_CONDITION_PROPERTY=g={})),e.DCInfosTargetings=[o.DEVICE,o.BROWSER,o.IP,o.GEOLOCATION,o.WEATHER,o.EULERIAN_DMP],e.OnceTriggerTargetings=[o.DEVICE,o.IP,o.GEOLOCATION,o.BROWSER_LANGUAGE,o.LANDING_PAGE,o.BROWSER,o.SOURCE_TYPE,o.PREVIOUS_PAGE,o.SCREEN_SIZE,o.SOURCE,o.NUMBER_PAGES_VIEWED,o.SAME_DAY_VISIT,o.WEATHER,o.ECOMMERCE_VARIABLE,o.URL_PARAMETER,o.KEYWORD,o.ADBLOCK,o.PAGE_VIEW,o.PAGE_INTEREST],e.OnceSegmentTargetings=[o.ENGAGEMENT_LEVEL,o.RETURNING_VISITOR,o.SESSION_NUMBER,o.DAYS_SINCE_FIRST_SESSION,o.DAYS_SINCE_LAST_SESSION,o.GEOLOCATION,o.CONTENT_INTEREST,o.DEVICE,o.ABANDONED_CART,o.CSAT,o.NPS]},9469:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONTENT_INTEREST=e.ENGAGEMENT_LEVEL=e.TEALIUM=e.KEYWORD=e.PURCHASE_FREQUENCY=e.LAST_PURCHASE=e.DATALAYER=e.SELECTOR=e.ACTION_TRACKING=e.CUSTOM_VARIABLE=e.BROWSER=e.CODE=e.URL_PARAMETER=e.ECOMMERCE_VARIABLE=e.DAYS_SINCE_FIRST_SESSION=e.DAYS_SINCE_LAST_SESSION=e.WEATHER=e.SESSION_NUMBER=e.ADBLOCK=e.SAME_DAY_VISIT=e.NUMBER_PAGES_VIEWED=e.SOURCE=e.CAMPAIGN_EXPOSITION=e.JS_VARIABLE=e.SCREEN_SIZE=e.PREVIOUS_PAGE=e.SOURCE_TYPE=e.RETURNING_VISITOR=e.LANDING_PAGE=e.BROWSER_LANGUAGE=e.COOKIE=e.GEOLOCATION=e.IP=e.DEVICE=e.SIRDATA_DMP=e.EASYDMP_DMP=e.MAKAZI_DMP=e.LEROYMERLIN_DMP=e.MEDIARITHMICS_DMP=e.LIVERAMP_DMP=e.ADOBE_DMP=e.TEMELIO_DMP=e.WEBORAMA_DMP=e.KRUX_DMP=e.ADVALO_DMP=e.YSANCE_DMP=e.BLUEKAI_DMP=e.CABESTAN_DMP=e.TAGCOMMANDER_DMP=e.EULERIAN_DMP=void 0,e.NPS=e.CSAT=e.ABANDONED_CART=e.INTEGRATIONS_PROVIDER=e.PAGE_INTEREST=e.PAGE_VIEW=void 0,e.EULERIAN_DMP=1,e.TAGCOMMANDER_DMP=2,e.CABESTAN_DMP=3,e.BLUEKAI_DMP=4,e.YSANCE_DMP=5,e.ADVALO_DMP=6,e.KRUX_DMP=7,e.WEBORAMA_DMP=8,e.TEMELIO_DMP=9,e.ADOBE_DMP=10,e.LIVERAMP_DMP=11,e.MEDIARITHMICS_DMP=12,e.LEROYMERLIN_DMP=13,e.MAKAZI_DMP=14,e.EASYDMP_DMP=15,e.SIRDATA_DMP=16,e.DEVICE=17,e.IP=18,e.GEOLOCATION=19,e.COOKIE=20,e.BROWSER_LANGUAGE=21,e.LANDING_PAGE=22,e.RETURNING_VISITOR=24,e.SOURCE_TYPE=25,e.PREVIOUS_PAGE=26,e.SCREEN_SIZE=27,e.JS_VARIABLE=28,e.CAMPAIGN_EXPOSITION=29,e.SOURCE=30,e.NUMBER_PAGES_VIEWED=31,e.SAME_DAY_VISIT=32,e.ADBLOCK=33,e.SESSION_NUMBER=34,e.WEATHER=35,e.DAYS_SINCE_LAST_SESSION=36,e.DAYS_SINCE_FIRST_SESSION=37,e.ECOMMERCE_VARIABLE=38,e.URL_PARAMETER=39,e.CODE=40,e.BROWSER=23,e.CUSTOM_VARIABLE=41,e.ACTION_TRACKING=42,e.SELECTOR=43,e.DATALAYER=44,e.LAST_PURCHASE=45,e.PURCHASE_FREQUENCY=46,e.KEYWORD=47,e.TEALIUM=48,e.ENGAGEMENT_LEVEL=49,e.CONTENT_INTEREST=50,e.PAGE_VIEW=51,e.PAGE_INTEREST=52,e.INTEGRATIONS_PROVIDER=53,e.ABANDONED_CART=54,e.CSAT=55,e.NPS=56},81:(t,e)=>{var n,i,s,a;e.Y0=e.$f=e.o3=void 0,function(t){t.identifier="index",t.initiator="initiator",t.manifest="manifest",t.commons="commons",t.main="main",t.modificationEngine="me",t.jquery="jquery",t.crossDomainIframe="cross-domain-iframe",t.fakeAd1="-banner-ad.abt",t.fakeAd2="banner-ads-abt",t.fakeAd3="static-ad-abt"}(n||(e.o3=n={})),function(t){t.IDENTIFIER="identifier",t.INITIATOR="initiator",t.CLIENT="client",t.JSON="json",t.MANIFEST="manifest",t.SHARED="shared"}(i||(e.$f=i={})),e.Y0={javascript:".js",gzip:".gz",json:".json",map:".map",html:".html"},function(t){t.accountJs="accountJs",t.consentJs="consentJs",t.fragmentJs="fragment-",t.customAnalytics="custom-analytics-",t.campaignJs="campaign-js-",t.variationJs="variation-js-",t.scopeJs="scope-js-",t.triggerJs="trigger-js-",t.componentJs="component-js-",t.integration="integration-"}(s||(s={})),function(t){t.widgets="widgets"}(a||(a={}))}}]);</script>
</body>
</html>
