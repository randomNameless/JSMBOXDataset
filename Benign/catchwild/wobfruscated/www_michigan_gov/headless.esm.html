<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>headless.esm.html</title>
</head>
<body>
<script>/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var UR=Object.create;var Pc=Object.defineProperty;var _R=Object.getOwnPropertyDescriptor;var jR=Object.getOwnPropertyNames;var $R=Object.getPrototypeOf,GR=Object.prototype.hasOwnProperty;var zR=(e,t,r)=>t in e?Pc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var HR=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ye=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),WR=(e,t)=>{for(var r in t)Pc(e,r,{get:t[r],enumerable:!0})},YR=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of jR(t))!GR.call(e,o)&&o!==r&&Pc(e,o,{get:()=>t[o],enumerable:!(n=_R(t,o))||n.enumerable});return e};var $e=(e,t,r)=>(r=e!=null?UR($R(e)):{},YR(t||!e||!e.__esModule?Pc(r,"default",{value:e,enumerable:!0}):r,e));var wc=(e,t,r)=>zR(e,typeof t!="symbol"?t+"":t,r);var kg=ye((LN,Tg)=>{"use strict";function KR(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}Tg.exports=JR;function JR(e,t,r){var n=r&&r.stringify||KR,o=1;if(typeof e=="object"&&e!==null){var a=t.length+o;if(a===1)return e;var i=new Array(a);i[0]=n(e);for(var s=1;s<a;s++)i[s]=n(t[s]);return i.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-o,m=-1,d=e&&e.length||0,p=0;p<d;){if(e.charCodeAt(p)===37&&p+1<d){switch(m=m>-1?m:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=u||t[l]==null)break;m<p&&(c+=e.slice(m,p)),c+=Number(t[l]),m=p+2,p++;break;case 105:if(l>=u||t[l]==null)break;m<p&&(c+=e.slice(m,p)),c+=Math.floor(Number(t[l])),m=p+2,p++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;m<p&&(c+=e.slice(m,p));var f=typeof t[l];if(f==="string"){c+="'"+t[l]+"'",m=p+2,p++;break}if(f==="function"){c+=t[l].name||"<anonymous>",m=p+2,p++;break}c+=n(t[l]),m=p+2,p++;break;case 115:if(l>=u)break;m<p&&(c+=e.slice(m,p)),c+=String(t[l]),m=p+2,p++;break;case 37:m<p&&(c+=e.slice(m,p)),c+="%",m=p+2,p++,l--;break}++l}++p}return m===-1?e:(m<d&&(c+=e.slice(m)),c)}});var Pp=ye((QN,kc)=>{"use strict";var Og=kg();kc.exports=Ir;var os=pb().console||{},XR={mapHttpRequest:Ec,mapHttpResponse:Ec,wrapRequestSerializer:Fp,wrapResponseSerializer:Fp,wrapErrorSerializer:Fp,req:Ec,res:Ec,err:Dg,errWithCause:Dg};function Ic(e,t){return e==="silent"?1/0:t.levels.values[e]}var vp=Symbol("pino.logFuncs"),Rp=Symbol("pino.hierarchy"),ZR={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function qg(e,t){let r={logger:t,parent:e[Rp]};t[Rp]=r}function eb(e,t,r){let n={};t.forEach(o=>{n[o]=r[o]?r[o]:os[o]||os[ZR[o]||"log"]||as}),e[vp]=n}function tb(e,t){return Array.isArray(e)?e.filter(function(n){return n!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function Ir(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||os;e.browser.write&&(e.browser.asObject=!0);let n=e.serializers||{},o=tb(e.browser.serialize,n),a=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(a=!1);let i=Object.keys(e.customLevels||{}),s=["error","fatal","warn","info","debug","trace"].concat(i);typeof r=="function"&&s.forEach(function(A){r[A]=r}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let u=e.level||"info",c=Object.create(r);c.log||(c.log=as),eb(c,s,r),qg({},c),Object.defineProperty(c,"levelVal",{get:m}),Object.defineProperty(c,"level",{get:d,set:p});let l={transmit:t,serialize:o,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:s,timestamp:ub(e)};c.levels=rb(e),c.level=u,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=as,c.serializers=n,c._serialize=o,c._stdErrSerialize=a,c.child=f,t&&(c._logEvent=bp());function m(){return Ic(this.level,this)}function d(){return this._level}function p(A){if(A!=="silent"&&!this.levels.values[A])throw Error("unknown level "+A);this._level=A,Yn(this,l,c,"error"),Yn(this,l,c,"fatal"),Yn(this,l,c,"warn"),Yn(this,l,c,"info"),Yn(this,l,c,"debug"),Yn(this,l,c,"trace"),i.forEach(C=>{Yn(this,l,c,C)})}function f(A,C){if(!A)throw new Error("missing bindings for child Pino");C=C||{},o&&A.serializers&&(C.serializers=A.serializers);let y=C.serializers;if(o&&y){var g=Object.assign({},n,y),h=e.browser.serialize===!0?Object.keys(g):o;delete A.serializers,Tc([A],h,g,this._stdErrSerialize)}function x(P){this._childLevel=(P._childLevel|0)+1,this.bindings=A,g&&(this.serializers=g,this._serialize=h),t&&(this._logEvent=bp([].concat(P._logEvent.bindings,A)))}x.prototype=this;let R=new x(this);return qg(this,R),R.level=this.level,R}return c}function rb(e){let t=e.customLevels||{},r=Object.assign({},Ir.levels.values,t),n=Object.assign({},Ir.levels.labels,nb(t));return{values:r,labels:n}}function nb(e){let t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}Ir.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ir.stdSerializers=XR;Ir.stdTimeFunctions=Object.assign({},{nullTime:Vg,epochTime:Ng,unixTime:lb,isoTime:db});function ob(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[Rp];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function Yn(e,t,r,n){if(Object.defineProperty(e,n,{value:Ic(e.level,r)>Ic(n,r)?as:r[vp][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===as)return;e[n]=ib(e,t,r,n);let o=ob(e);o.length!==0&&(e[n]=ab(o,e[n]))}function ab(e,t){return function(){return t.apply(this,[...e,...arguments])}}function ib(e,t,r,n){return function(o){return function(){let i=t.timestamp(),s=new Array(arguments.length),u=Object.getPrototypeOf&&Object.getPrototypeOf(this)===os?os:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(t.serialize&&!t.asObject&&Tc(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?o.call(u,sb(this,n,s,i,t.formatters)):o.apply(u,s),t.transmit){let l=t.transmit.level||e._level,m=r.levels.values[l],d=r.levels.values[n];if(d<m)return;cb(this,{ts:i,methodLevel:n,methodValue:d,transmitLevel:l,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:Ic(e._level,r)},s)}}}(e[vp][n])}function sb(e,t,r,n,o={}){let{level:a=()=>e.levels.values[t],log:i=d=>d}=o;e._serialize&&Tc(r,e._serialize,e.serializers,e._stdErrSerialize);let s=r.slice(),u=s[0],c={};n&&(c.time=n),c.level=a(t,e.levels.values[t]);let l=(e._childLevel|0)+1;if(l<1&&(l=1),u!==null&&typeof u=="object"){for(;l--&&typeof s[0]=="object";)Object.assign(c,s.shift());u=s.length?Og(s.shift(),s):void 0}else typeof u=="string"&&(u=Og(s.shift(),s));return u!==void 0&&(c.msg=u),i(c)}function Tc(e,t,r,n){for(let o in e)if(n&&e[o]instanceof Error)e[o]=Ir.stdSerializers.err(e[o]);else if(typeof e[o]=="object"&&!Array.isArray(e[o]))for(let a in e[o])t&&t.indexOf(a)>-1&&a in r&&(e[o][a]=r[a](e[o][a]))}function cb(e,t,r){let n=t.send,o=t.ts,a=t.methodLevel,i=t.methodValue,s=t.val,u=e._logEvent.bindings;Tc(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=o,e._logEvent.messages=r.filter(function(c){return u.indexOf(c)===-1}),e._logEvent.level.label=a,e._logEvent.level.value=i,n(a,e._logEvent,s),e._logEvent=bp(u)}function bp(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function Dg(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function ub(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?Vg:Ng}function Ec(){return{}}function Fp(e){return e}function as(){}function Vg(){return!1}function Ng(){return Date.now()}function lb(){return Math.round(Date.now()/1e3)}function db(){return new Date(Date.now()).toISOString()}function pb(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}kc.exports.default=Ir;kc.exports.pino=Ir});var qc=ye((Ep,Ip)=>{"use strict";(function(e,t){typeof Ep=="object"&&typeof Ip<"u"?Ip.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs=t()})(Ep,function(){"use strict";var e=1e3,t=6e4,r=36e5,n="millisecond",o="second",a="minute",i="hour",s="day",u="week",c="month",l="quarter",m="year",d="date",p="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,A=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(V){var L=["th","st","nd","rd"],M=V%100;return"["+V+(L[(M-20)%10]||L[M]||L[0])+"]"}},y=function(V,L,M){var _=String(V);return!_||_.length>=L?V:""+Array(L+1-_.length).join(M)+V},g={s:y,z:function(V){var L=-V.utcOffset(),M=Math.abs(L),_=Math.floor(M/60),Q=M%60;return(L<=0?"+":"-")+y(_,2,"0")+":"+y(Q,2,"0")},m:function V(L,M){if(L.date()<M.date())return-V(M,L);var _=12*(M.year()-L.year())+(M.month()-L.month()),Q=L.clone().add(_,c),Y=M-Q<0,z=L.clone().add(_+(Y?-1:1),c);return+(-(_+(M-Q)/(Y?Q-z:z-Q))||0)},a:function(V){return V<0?Math.ceil(V)||0:Math.floor(V)},p:function(V){return{M:c,y:m,w:u,d:s,D:d,h:i,m:a,s:o,ms:n,Q:l}[V]||String(V||"").toLowerCase().replace(/s$/,"")},u:function(V){return V===void 0}},h="en",x={};x[h]=C;var R="$isDayjsObject",P=function(V){return V instanceof $||!(!V||!V[R])},b=function V(L,M,_){var Q;if(!L)return h;if(typeof L=="string"){var Y=L.toLowerCase();x[Y]&&(Q=Y),M&&(x[Y]=M,Q=Y);var z=L.split("-");if(!Q&&z.length>1)return V(z[0])}else{var oe=L.name;x[oe]=L,Q=oe}return!_&&Q&&(h=Q),Q||!_&&h},I=function(V,L){if(P(V))return V.clone();var M=typeof L=="object"?L:{};return M.date=V,M.args=arguments,new $(M)},N=g;N.l=b,N.i=P,N.w=function(V,L){return I(V,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var $=function(){function V(M){this.$L=b(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[R]=!0}var L=V.prototype;return L.parse=function(M){this.$d=function(_){var Q=_.date,Y=_.utc;if(Q===null)return new Date(NaN);if(N.u(Q))return new Date;if(Q instanceof Date)return new Date(Q);if(typeof Q=="string"&&!/Z$/i.test(Q)){var z=Q.match(f);if(z){var oe=z[2]-1||0,se=(z[7]||"0").substring(0,3);return Y?new Date(Date.UTC(z[1],oe,z[3]||1,z[4]||0,z[5]||0,z[6]||0,se)):new Date(z[1],oe,z[3]||1,z[4]||0,z[5]||0,z[6]||0,se)}}return new Date(Q)}(M),this.init()},L.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},L.$utils=function(){return N},L.isValid=function(){return this.$d.toString()!==p},L.isSame=function(M,_){var Q=I(M);return this.startOf(_)<=Q&&Q<=this.endOf(_)},L.isAfter=function(M,_){return I(M)<this.startOf(_)},L.isBefore=function(M,_){return this.endOf(_)<I(M)},L.$g=function(M,_,Q){return N.u(M)?this[_]:this.set(Q,M)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(M,_){var Q=this,Y=!!N.u(_)||_,z=N.p(M),oe=function(It,we){var rt=N.w(Q.$u?Date.UTC(Q.$y,we,It):new Date(Q.$y,we,It),Q);return Y?rt:rt.endOf(s)},se=function(It,we){return N.w(Q.toDate()[It].apply(Q.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(we)),Q)},me=this.$W,ae=this.$M,ue=this.$D,Jr="set"+(this.$u?"UTC":"");switch(z){case m:return Y?oe(1,0):oe(31,11);case c:return Y?oe(1,ae):oe(0,ae+1);case u:var Mt=this.$locale().weekStart||0,wr=(me<Mt?me+7:me)-Mt;return oe(Y?ue-wr:ue+(6-wr),ae);case s:case d:return se(Jr+"Hours",0);case i:return se(Jr+"Minutes",1);case a:return se(Jr+"Seconds",2);case o:return se(Jr+"Milliseconds",3);default:return this.clone()}},L.endOf=function(M){return this.startOf(M,!1)},L.$set=function(M,_){var Q,Y=N.p(M),z="set"+(this.$u?"UTC":""),oe=(Q={},Q[s]=z+"Date",Q[d]=z+"Date",Q[c]=z+"Month",Q[m]=z+"FullYear",Q[i]=z+"Hours",Q[a]=z+"Minutes",Q[o]=z+"Seconds",Q[n]=z+"Milliseconds",Q)[Y],se=Y===s?this.$D+(_-this.$W):_;if(Y===c||Y===m){var me=this.clone().set(d,1);me.$d[oe](se),me.init(),this.$d=me.set(d,Math.min(this.$D,me.daysInMonth())).$d}else oe&&this.$d[oe](se);return this.init(),this},L.set=function(M,_){return this.clone().$set(M,_)},L.get=function(M){return this[N.p(M)]()},L.add=function(M,_){var Q,Y=this;M=Number(M);var z=N.p(_),oe=function(ae){var ue=I(Y);return N.w(ue.date(ue.date()+Math.round(ae*M)),Y)};if(z===c)return this.set(c,this.$M+M);if(z===m)return this.set(m,this.$y+M);if(z===s)return oe(1);if(z===u)return oe(7);var se=(Q={},Q[a]=t,Q[i]=r,Q[o]=e,Q)[z]||1,me=this.$d.getTime()+M*se;return N.w(me,this)},L.subtract=function(M,_){return this.add(-1*M,_)},L.format=function(M){var _=this,Q=this.$locale();if(!this.isValid())return Q.invalidDate||p;var Y=M||"YYYY-MM-DDTHH:mm:ssZ",z=N.z(this),oe=this.$H,se=this.$m,me=this.$M,ae=Q.weekdays,ue=Q.months,Jr=Q.meridiem,Mt=function(we,rt,Er,Xr){return we&&(we[rt]||we(_,Y))||Er[rt].slice(0,Xr)},wr=function(we){return N.s(oe%12||12,we,"0")},It=Jr||function(we,rt,Er){var Xr=we<12?"AM":"PM";return Er?Xr.toLowerCase():Xr};return Y.replace(A,function(we,rt){return rt||function(Er){switch(Er){case"YY":return String(_.$y).slice(-2);case"YYYY":return N.s(_.$y,4,"0");case"M":return me+1;case"MM":return N.s(me+1,2,"0");case"MMM":return Mt(Q.monthsShort,me,ue,3);case"MMMM":return Mt(ue,me);case"D":return _.$D;case"DD":return N.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return Mt(Q.weekdaysMin,_.$W,ae,2);case"ddd":return Mt(Q.weekdaysShort,_.$W,ae,3);case"dddd":return ae[_.$W];case"H":return String(oe);case"HH":return N.s(oe,2,"0");case"h":return wr(1);case"hh":return wr(2);case"a":return It(oe,se,!0);case"A":return It(oe,se,!1);case"m":return String(se);case"mm":return N.s(se,2,"0");case"s":return String(_.$s);case"ss":return N.s(_.$s,2,"0");case"SSS":return N.s(_.$ms,3,"0");case"Z":return z}return null}(we)||z.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(M,_,Q){var Y,z=this,oe=N.p(_),se=I(M),me=(se.utcOffset()-this.utcOffset())*t,ae=this-se,ue=function(){return N.m(z,se)};switch(oe){case m:Y=ue()/12;break;case c:Y=ue();break;case l:Y=ue()/3;break;case u:Y=(ae-me)/6048e5;break;case s:Y=(ae-me)/864e5;break;case i:Y=ae/r;break;case a:Y=ae/t;break;case o:Y=ae/e;break;default:Y=ae}return Q?Y:N.a(Y)},L.daysInMonth=function(){return this.endOf(c).$D},L.$locale=function(){return x[this.$L]},L.locale=function(M,_){if(!M)return this.$L;var Q=this.clone(),Y=b(M,_,!0);return Y&&(Q.$L=Y),Q},L.clone=function(){return N.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},V}(),ee=$.prototype;return I.prototype=ee,[["$ms",n],["$s",o],["$m",a],["$H",i],["$W",s],["$M",c],["$y",m],["$D",d]].forEach(function(V){ee[V[1]]=function(L){return this.$g(L,V[0],V[1])}}),I.extend=function(V,L){return V.$i||(V(L,$,I),V.$i=!0),I},I.locale=b,I.isDayjs=P,I.unix=function(V){return I(1e3*V)},I.en=x[h],I.Ls=x,I.p={},I})});var Ug=ye((Tp,kp)=>{"use strict";(function(e,t){typeof Tp=="object"&&typeof kp<"u"?kp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_timezone=t()})(Tp,function(){"use strict";var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,o){var a,i=function(l,m,d){d===void 0&&(d={});var p=new Date(l),f=function(A,C){C===void 0&&(C={});var y=C.timeZoneName||"short",g=A+"|"+y,h=t[g];return h||(h=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:A,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),t[g]=h),h}(m,d);return f.formatToParts(p)},s=function(l,m){for(var d=i(l,m),p=[],f=0;f<d.length;f+=1){var A=d[f],C=A.type,y=A.value,g=e[C];g>=0&&(p[g]=parseInt(y,10))}var h=p[3],x=h===24?0:h,R=p[0]+"-"+p[1]+"-"+p[2]+" "+x+":"+p[4]+":"+p[5]+":000",P=+l;return(o.utc(R).valueOf()-(P-=P%1e3))/6e4},u=n.prototype;u.tz=function(l,m){l===void 0&&(l=a);var d,p=this.utcOffset(),f=this.toDate(),A=f.toLocaleString("en-US",{timeZone:l}),C=Math.round((f-new Date(A))/1e3/60),y=15*-Math.round(f.getTimezoneOffset()/15)-C;if(!Number(y))d=this.utcOffset(0,m);else if(d=o(A,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(y,!0),m){var g=d.utcOffset();d=d.add(p-g,"minute")}return d.$x.$timezone=l,d},u.offsetName=function(l){var m=this.$x.$timezone||o.tz.guess(),d=i(this.valueOf(),m,{timeZoneName:l}).find(function(p){return p.type.toLowerCase()==="timezonename"});return d&&d.value};var c=u.startOf;u.startOf=function(l,m){if(!this.$x||!this.$x.$timezone)return c.call(this,l,m);var d=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(d,l,m).tz(this.$x.$timezone,!0)},o.tz=function(l,m,d){var p=d&&m,f=d||m||a,A=s(+o(),f);if(typeof l!="string")return o(l).tz(f);var C=function(x,R,P){var b=x-60*R*1e3,I=s(b,P);if(R===I)return[b,R];var N=s(b-=60*(I-R)*1e3,P);return I===N?[b,I]:[x-60*Math.min(I,N)*1e3,Math.max(I,N)]}(o.utc(l,p).valueOf(),A,f),y=C[0],g=C[1],h=o(y).utcOffset(g);return h.$x.$timezone=f,h},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(l){a=l}}})});var _g=ye((Op,qp)=>{"use strict";(function(e,t){typeof Op=="object"&&typeof qp<"u"?qp.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_utc=t()})(Op,function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,o,a){var i=o.prototype;a.utc=function(p){var f={date:p,utc:!0,args:arguments};return new o(f)},i.utc=function(p){var f=a(this.toDate(),{locale:this.$L,utc:!0});return p?f.add(this.utcOffset(),e):f},i.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var s=i.parse;i.parse=function(p){p.utc&&(this.$u=!0),this.$utils().u(p.$offset)||(this.$offset=p.$offset),s.call(this,p)};var u=i.init;i.init=function(){if(this.$u){var p=this.$d;this.$y=p.getUTCFullYear(),this.$M=p.getUTCMonth(),this.$D=p.getUTCDate(),this.$W=p.getUTCDay(),this.$H=p.getUTCHours(),this.$m=p.getUTCMinutes(),this.$s=p.getUTCSeconds(),this.$ms=p.getUTCMilliseconds()}else u.call(this)};var c=i.utcOffset;i.utcOffset=function(p,f){var A=this.$utils().u;if(A(p))return this.$u?0:A(this.$offset)?c.call(this):this.$offset;if(typeof p=="string"&&(p=function(h){h===void 0&&(h="");var x=h.match(t);if(!x)return null;var R=(""+x[0]).match(r)||["-",0,0],P=R[0],b=60*+R[1]+ +R[2];return b===0?0:P==="+"?b:-b}(p),p===null))return this;var C=Math.abs(p)<=16?60*p:p,y=this;if(f)return y.$offset=C,y.$u=p===0,y;if(p!==0){var g=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(C+g,e)).$offset=C,y.$x.$localOffset=g}else y=this.utc();return y};var l=i.format;i.format=function(p){var f=p||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,f)},i.valueOf=function(){var p=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*p},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var m=i.toDate;i.toDate=function(p){return p==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var d=i.diff;i.diff=function(p,f,A){if(p&&this.$u===p.$u)return d.call(this,p,f,A);var C=this.local(),y=a(p).local();return d.call(C,y,f,A)}}})});var $g=ye((XN,jg)=>{"use strict";jg.exports=fetch});var Gg=ye(cs=>{"use strict";var Dc=cs&&cs.__assign||function(){return Dc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Dc.apply(this,arguments)};Object.defineProperty(cs,"__esModule",{value:!0});var Ab={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Fb(e){var t=Dc(Dc({},Ab),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}cs.getSanitizedOptions=Fb});var zg=ye(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});function Rb(e){var t=Math.random()*e;return Math.round(t)}Dp.fullJitter=Rb});var Hg=ye(Vp=>{"use strict";Object.defineProperty(Vp,"__esModule",{value:!0});function bb(e){return e}Vp.noJitter=bb});var Wg=ye(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});var vb=zg(),Pb=Hg();function wb(e){switch(e.jitter){case"full":return vb.fullJitter;case"none":default:return Pb.noJitter}}Np.JitterFactory=wb});var Lp=ye(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});var Eb=Wg(),Ib=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(r){return setTimeout(r,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=Eb.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,r=this.options.timeMultiple,n=this.numOfDelayedAttempts,o=t*Math.pow(r,n);return Math.min(o,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();Mp.Delay=Ib});var Yg=ye(kr=>{"use strict";var Tb=kr&&kr.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kb=kr&&kr.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l))}catch(m){i(m)}}function u(l){try{c(n.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):o(l.value).then(s,u)}c((n=n.apply(e,t||[])).next())})},Ob=kr&&kr.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],o=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(kr,"__esModule",{value:!0});var qb=Lp(),Db=function(e){Tb(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return kb(this,void 0,void 0,function(){return Ob(this,function(r){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(qb.Delay);kr.SkipFirstDelay=Db});var Kg=ye(us=>{"use strict";var Vb=us&&us.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(us,"__esModule",{value:!0});var Nb=Lp(),Mb=function(e){Vb(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Nb.Delay);us.AlwaysDelay=Mb});var Jg=ye(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});var Lb=Yg(),Qb=Kg();function Bb(e,t){var r=Ub(e);return r.setAttemptNumber(t),r}Qp.DelayFactory=Bb;function Ub(e){return e.delayFirstAttempt?new Qb.AlwaysDelay(e):new Lb.SkipFirstDelay(e)}});var Xg=ye(Kn=>{"use strict";var Bp=Kn&&Kn.__awaiter||function(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l))}catch(m){i(m)}}function u(l){try{c(n.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):o(l.value).then(s,u)}c((n=n.apply(e,t||[])).next())})},Up=Kn&&Kn.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,o=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(c[0]===6&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(l){c=[6,l],o=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(Kn,"__esModule",{value:!0});var _b=Gg(),jb=Jg();function $b(e,t){return t===void 0&&(t={}),Bp(this,void 0,void 0,function(){var r,n;return Up(this,function(o){switch(o.label){case 0:return r=_b.getSanitizedOptions(t),n=new Gb(e,r),[4,n.execute()];case 1:return[2,o.sent()]}})})}Kn.backOff=$b;var Gb=function(){function e(t,r){this.request=t,this.options=r,this.attemptNumber=0}return e.prototype.execute=function(){return Bp(this,void 0,void 0,function(){var t,r;return Up(this,function(n){switch(n.label){case 0:if(this.attemptLimitReached)return[3,7];n.label=1;case 1:return n.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return n.sent(),[4,this.request()];case 3:return[2,n.sent()];case 4:return t=n.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(r=n.sent(),!r||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return Bp(this,void 0,void 0,function(){var t;return Up(this,function(r){switch(r.label){case 0:return t=jb.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return r.sent(),[2]}})})},e}()});var eS=ye((pM,Zg)=>{"use strict";function zb(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let o=0;o<e.length;o++)r<<=6,r|=Wb(e[o]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var Hb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Wb(e){let t=Hb.indexOf(e);return t<0?void 0:t}Zg.exports=zb});var rS=ye((mM,tS)=>{"use strict";function Yb(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let o=0;o<n.length;o++)typeof n[o]>"u"?r+="=":r+=Jb(n[o])}return r}var Kb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Jb(e){if(e>=0&&e<64)return Kb[e]}tS.exports=Yb});var _p=ye((fM,nS)=>{"use strict";var Xb=eS(),Zb=rS();nS.exports={atob:Xb,btoa:Zb}});var ph=ye((u0,dh)=>{"use strict";var Cm=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!Cm)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!Cm.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');dh.exports.AbortController=Cm.AbortController});var Ty=ye((tf,rf)=>{"use strict";(function(e,t){typeof tf=="object"&&typeof rf<"u"?rf.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_quarterOfYear=t()})(tf,function(){"use strict";var e="month",t="quarter";return function(r,n){var o=n.prototype;o.quarter=function(s){return this.$utils().u(s)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(s-1))};var a=o.add;o.add=function(s,u){return s=Number(s),this.$utils().p(u)===t?this.add(3*s,e):a.bind(this)(s,u)};var i=o.startOf;o.startOf=function(s,u){var c=this.$utils(),l=!!c.u(u)||u;if(c.p(s)===t){var m=this.quarter()-1;return l?this.month(3*m).startOf(e).startOf("day"):this.month(3*m+2).endOf(e).endOf("day")}return i.bind(this)(s,u)}}})});var ky=ye((nf,of)=>{"use strict";(function(e,t){typeof nf=="object"&&typeof of<"u"?of.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self).dayjs_plugin_customParseFormat=t()})(nf,function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},i=function(p){return(p=+p)+(p>68?1900:2e3)},s=function(p){return function(f){this[p]=+f}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(p){(this.zone||(this.zone={})).offset=function(f){if(!f||f==="Z")return 0;var A=f.match(/([+-]|\d\d)/g),C=60*A[1]+(+A[2]||0);return C===0?0:A[0]==="+"?-C:C}(p)}],c=function(p){var f=a[p];return f&&(f.indexOf?f:f.s.concat(f.f))},l=function(p,f){var A,C=a.meridiem;if(C){for(var y=1;y<=24;y+=1)if(p.indexOf(C(y,0,f))>-1){A=y>12;break}}else A=p===(f?"pm":"PM");return A},m={A:[o,function(p){this.afternoon=l(p,!1)}],a:[o,function(p){this.afternoon=l(p,!0)}],S:[/\d/,function(p){this.milliseconds=100*+p}],SS:[r,function(p){this.milliseconds=10*+p}],SSS:[/\d{3}/,function(p){this.milliseconds=+p}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[o,function(p){var f=a.ordinal,A=p.match(/\d+/);if(this.day=A[0],f)for(var C=1;C<=31;C+=1)f(C).replace(/\[|\]/g,"")===p&&(this.day=C)}],M:[n,s("month")],MM:[r,s("month")],MMM:[o,function(p){var f=c("months"),A=(c("monthsShort")||f.map(function(C){return C.slice(0,3)})).indexOf(p)+1;if(A<1)throw new Error;this.month=A%12||A}],MMMM:[o,function(p){var f=c("months").indexOf(p)+1;if(f<1)throw new Error;this.month=f%12||f}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(p){this.year=i(p)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function d(p){var f,A;f=p,A=a&&a.formats;for(var C=(p=f.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(b,I,N){var $=N&&N.toUpperCase();return I||A[N]||e[N]||A[$].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ee,V,L){return V||L.slice(1)})})).match(t),y=C.length,g=0;g<y;g+=1){var h=C[g],x=m[h],R=x&&x[0],P=x&&x[1];C[g]=P?{regex:R,parser:P}:h.replace(/^\[|\]$/g,"")}return function(b){for(var I={},N=0,$=0;N<y;N+=1){var ee=C[N];if(typeof ee=="string")$+=ee.length;else{var V=ee.regex,L=ee.parser,M=b.slice($),_=V.exec(M)[0];L.call(I,_),b=b.replace(_,"")}}return function(Q){var Y=Q.afternoon;if(Y!==void 0){var z=Q.hours;Y?z<12&&(Q.hours+=12):z===12&&(Q.hours=0),delete Q.afternoon}}(I),I}}return function(p,f,A){A.p.customParseFormat=!0,p&&p.parseTwoDigitYear&&(i=p.parseTwoDigitYear);var C=f.prototype,y=C.parse;C.parse=function(g){var h=g.date,x=g.utc,R=g.args;this.$u=x;var P=R[1];if(typeof P=="string"){var b=R[2]===!0,I=R[3]===!0,N=b||I,$=R[2];I&&($=R[2]),a=this.$locale(),!b&&$&&(a=A.Ls[$]),this.$d=function(M,_,Q){try{if(["x","X"].indexOf(_)>-1)return new Date((_==="X"?1e3:1)*M);var Y=d(_)(M),z=Y.year,oe=Y.month,se=Y.day,me=Y.hours,ae=Y.minutes,ue=Y.seconds,Jr=Y.milliseconds,Mt=Y.zone,wr=new Date,It=se||(z||oe?1:wr.getDate()),we=z||wr.getFullYear(),rt=0;z&&!oe||(rt=oe>0?oe-1:wr.getMonth());var Er=me||0,Xr=ae||0,xp=ue||0,Ap=Jr||0;return Mt?new Date(Date.UTC(we,rt,It,Er,Xr,xp,Ap+60*Mt.offset*1e3)):Q?new Date(Date.UTC(we,rt,It,Er,Xr,xp,Ap)):new Date(we,rt,It,Er,Xr,xp,Ap)}catch{return new Date("")}}(h,P,x),this.init(),$&&$!==!0&&(this.$L=this.locale($).$L),N&&h!=this.format(P)&&(this.$d=new Date("")),a={}}else if(P instanceof Array)for(var ee=P.length,V=1;V<=ee;V+=1){R[1]=P[V-1];var L=A.apply(this,R);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}V===ee&&(this.$d=new Date(""))}else y.call(this,g)}}})});var qC=ye((QG,OC)=>{"use strict";var cT=/(^|; )Coveo-Pendragon=([^;]*)/;OC.exports=()=>cT.exec(document.cookie)?.pop()||null});var ns=()=>global.crypto,Ig=()=>{typeof window<"u"||(ns()||(global.crypto=HR("crypto")),!ns().getRandomValues&&ns().webcrypto&&(global.crypto.getRandomValues=ns().webcrypto.getRandomValues.bind(ns().webcrypto)))};var Mg=$e(Pp());var wp=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),is=()=>({referrer:null,userAgent:null,location:null,clientId:""});var mb="coveo-headless-internal-state",Tr=Symbol.for(mb);function fb(e){return Object.assign(e,{debug:jest.fn(),info:jest.fn(),warn:jest.fn(),error:jest.fn(),fatal:jest.fn()})}function gb(){return{emit:jest.fn(),getMeta:jest.fn().mockReturnValue({clientId:"test"}),off:jest.fn(),on:jest.fn(),updateConfig:jest.fn(),version:"test"}}function Sb(e){return{state:e,dispatch:jest.fn(),addReducers:jest.fn(),disableAnalytics:jest.fn(),enableAnalytics:jest.fn(),logger:fb((0,Mg.default)({level:"silent"})),relay:gb(),store:{dispatch:jest.fn(),getState:jest.fn(),replaceReducer:jest.fn(),subscribe:jest.fn(),[Symbol.observable]:jest.fn()},subscribe:jest.fn(),navigatorContext:is()}}function Lg(e){return{...Sb(e),executeFirstSearch:jest.fn(),executeFirstSearchAfterStandaloneSearchBoxRedirect:jest.fn()}}function ss(e={}){return{urihash:"",parents:"",sfid:"",sfparentid:"",sfinsertedbyid:"",documenttype:"",sfcreatedbyid:"",permanentid:"",date:0,objecttype:"",sourcetype:"",sftitle:"",size:0,sffeeditemid:"",clickableuri:"",sfcreatedby:"",source:"",collection:"",connectortype:"",filetype:"",sfcreatedbyname:"",sflikecount:0,language:[],...e}}function Qg(e={}){return{title:"",uri:"",printableUri:"",clickUri:"",uniqueId:"",excerpt:"",firstSentences:"",summary:null,flags:"",hasHtmlVersion:!1,score:0,percentScore:0,rankingInfo:null,isTopResult:!1,isRecommendation:!1,titleHighlights:[],firstSentencesHighlights:[],excerptHighlights:[],printableUriHighlights:[],summaryHighlights:[],absentTerms:[],raw:ss(),isUserActionView:!1,searchUid:"",...e}}var WN={title:"example documentTitle",uri:"example documentUri",printableUri:"printable-uri",clickUri:"example documentUrl",uniqueId:"unique-id",excerpt:"excerpt",firstSentences:"first-sentences",flags:"flags",rankingModifier:"example rankingModifier",raw:ss({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"})};var hb=10,Oc=e=>({past:[],present:e,future:[]}),yb=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let o=t[t.length-1];return{past:t.slice(0,t.length-1),present:o,future:[r,...n]}},Cb=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let o=n[0],a=n.slice(1);return{past:[...t,r],present:o,future:a}},xb=e=>{let{action:t,state:r,reducer:n}=e,{past:o,present:a}=r,i=n(a,t);return a?a===i?r:{past:[...o,a].slice(-hb),present:i,future:[]}:Oc(i)},Bg=e=>{let{actionTypes:t,reducer:r}=e,n=Oc();return(o=n,a)=>{switch(a.type){case t.undo:return yb(o);case t.redo:return Cb(o);case t.snapshot:return xb({state:o,reducer:r,action:a});default:return o}}};var nt=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var Qc=$e(qc()),gS=$e(Ug()),SS=$e(_g());var pS=$e($g()),mS=$e(Xg());var O=new Error("Failed to load reducers."),Mo=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}};var Jn=class extends Error{constructor(t,r){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${t}`,this.statusCode=r??0}};var oS=$e(_p()),Zr=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function Vc(e){return Array.isArray(e)}function Nc(e){return e.trim()===""}function aS(e,t){return[...e.reduce((r,n)=>{let o=t(n);return r.has(o)||r.set(o,n),r},new Map).values()]}function ev(e){return(typeof btoa<"u"?btoa:oS.btoa)(encodeURI(e))}function Mc(e,t){let{[e]:r,...n}=t;return n}function Lo(e){return ev(JSON.stringify(e))}var tv=new Set(["1",1,"yes",!0]);function iS(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(r=>tv.has(r))}function sS(e){let t={};for(let[r,n]of e)t[r]=n;return t}function cS(e,t,r){return clearTimeout(t),setTimeout(e,r)}function ls(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function uS(e){let t=[];for(let r in e){let n=encodeURIComponent(r),o=encodeURIComponent(e[r]);t.push(`${n}=${o}`)}return t.join("&")}function lS(e){return typeof e!="object"||!e?!1:Object.values(e).every(rv)}function rv(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function dS(e){return e===429}var ot=class e{static async call(t){let r=nv(t),{logger:n}=t,o=await e.preprocessRequest(r,t);n.info(o,"Platform request");let{url:a,...i}=o,s=async()=>{let u=await(0,pS.default)(a,i);if(dS(u.status))throw u;return u};try{let u=await(0,mS.backOff)(s,{retry:c=>{let l=c&&dS(c.status);return l&&n.info("Platform retrying request"),l}});switch(u.status){case 419:case 401:throw n.info("Platform renewing token"),new Mo;case 404:throw new Jn(a,u.status);default:return n.info({response:u,requestInfo:o},"Platform response"),u}}catch(u){return u.message==="Failed to fetch"?new Jn(a):u}}static async preprocessRequest(t,r){let{origin:n,preprocessRequest:o,logger:a,requestMetadata:i}=r,{signal:s,...u}=t,c=ls(u);try{let l=await o(t,n,i);return{...t,...l}}catch(l){a.error(l,"Platform request preprocessing failed. Returning default request options.")}return c}};function fS(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function ds(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,o=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,i=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:o,search:a,admin:i}}function Lc(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:fS("platform",e)}function jp(e){return fS("analytics",e)}function nv(e){let{url:t,method:r,requestParams:n,contentType:o,accessToken:a,signal:i}=e,s=e.method==="POST"||e.method==="PUT",u=ov(n,o);return{url:t,method:r,headers:{"Content-Type":o,Authorization:`Bearer ${a}`,...e.headers},...s&&{body:u},signal:i}}function ov(e,t){return t==="application/x-www-form-urlencoded"?lS(e)?uS(e):"":JSON.stringify(e)}Qc.default.extend(SS.default);Qc.default.extend(gS.default);var $p="/rest/search/v2",Gp="/rest/ua",en=()=>({organizationId:"",accessToken:"",platformUrl:Lc(),search:{apiBaseUrl:`${Lc()}${$p}`,locale:"en-US",timezone:Qc.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${jp()}${Gp}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}});function Qo(){return{contextValues:{}}}var Lt=()=>!1;function Bo(){return{contextValues:{}}}var Bc=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),hS=()=>({correctedQuery:"",corrections:[],originalQuery:""});function Uc(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Bc(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}function _c(){return{length:void 0}}function Uo(){return{enabled:!0}}function _o(){return{freezeFacetOrder:!1,facets:{}}}function tn(){return{desiredCount:5,numberOfValues:8,set:{}}}function rn(){return{}}function jo(){return[]}function jc(){return{}}function $c(){return{}}function yS(e){return{request:e,hasBreadcrumbs:!0}}function nn(){return{}}function CS(e){return{request:e}}function on(){return{}}function xS(e){return{request:e}}function an(){return{}}var Wp=["author","language","urihash","objecttype","collection","source","permanentid"],AS=[...Wp,"date","filetype","parents"],av=[...AS,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Gc=()=>({fieldsToInclude:Wp,fetchAllFields:!1,fieldsDescription:[]});var $o=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function ps(){return{id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default",contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1}}function Ge(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var Qt=()=>"";function Go(){return{}}var Ce=()=>({q:"",enableQuerySyntax:!1});var ft=()=>"default";function iv(e,t){let r=`
  The following properties are invalid:

    ${e.join(`
	`)}
  
  ${t}
  `;return new ms(r)}var ms=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},Z=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let o in this.definition){let a=this.definition[o].validate(r[o]);a&&n.push(`${o}: ${a}`)}if(n.length)throw iv(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},fe=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&H(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function Fe(e){return e===void 0}function sv(e){return e===null}function H(e){return Fe(e)||sv(e)}var B=class{constructor(e={}){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(cv(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function cv(e){return Fe(e)||FS(e)}function FS(e){return typeof e=="number"&&!isNaN(e)}var G=class{constructor(e={}){this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t||(uv(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function uv(e){return Fe(e)||zc(e)}function zc(e){return typeof e=="boolean"}var lv=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,dv=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,E=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new fe(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:o,ISODate:a}=this.config,i=this.value.validate(e);return i||(Fe(e)?null:zo(e)?!t&&!e.length?"value is an empty string.":r&&!lv.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:o&&!o.includes(e)?`value should be one of: ${o.join(", ")}.`:a&&!(dv.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function zo(e){return Object.prototype.toString.call(e)==="[object String]"}var q=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(Fe(e))return this.config.options.required?"value is required and is currently undefined":null;if(!RS(e))return"value is not an object";for(let[r,n]of Object.entries(this.config.values))if(n.required&&H(e[r]))return`value does not contain ${r}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let o=e[r],a=n.validate(o);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function RS(e){return e!==void 0&&typeof e=="object"}var J=class{constructor(e={}){this.config=e,this.value=new fe(this.config)}validate(e){if(!H(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(H(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let r="";return e.forEach(n=>{this.config.each.required&&H(n)&&(r=`value is null or undefined: ${e.join(",")}`);let o=this.validatePrimitiveValue(n,this.config.each);o!==null&&(r+=" "+o)}),r===""?null:r}return null}validatePrimitiveValue(e,t){return zc(e)||zo(e)||FS(e)||RS(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function Ho(e){return Array.isArray(e)}var Tt=class{constructor(e){this.config=e,this.value=new fe(e)}validate(e){let t=this.value.validate(e);return t!==null?t:Fe(e)||Object.values(this.config.enum).find(n=>n===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var Hc=(r=>(r.Ascending="ascending",r.Descending="descending",r))(Hc||{}),Wo=(a=>(a.Relevancy="relevancy",a.QRE="qre",a.Date="date",a.Field="field",a.NoSort="nosort",a))(Wo||{}),Or=e=>{if(Ho(e))return e.map(t=>Or(t)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},fs=()=>({by:"relevancy"}),Yp=e=>({by:"date",order:e}),Kp=(e,t)=>({by:"field",order:t,field:e}),Jp=()=>({by:"qre"}),Xp=()=>({by:"nosort"}),bS=new q({values:{by:new Tt({enum:Wo,required:!0}),order:new Tt({enum:Hc}),field:new E}});function ze(){return Or(fs())}function Yo(){return{}}function Ko(){return{}}function Wc(){return kt({})}function kt(e){return{context:e.context||Qo(),dictionaryFieldContext:e.dictionaryFieldContext||Bo(),facetSet:e.facetSet||nn(),numericFacetSet:e.numericFacetSet||an(),dateFacetSet:e.dateFacetSet||on(),categoryFacetSet:e.categoryFacetSet||rn(),automaticFacetSet:e.automaticFacetSet??tn(),pagination:e.pagination||Ge(),query:e.query||Ce(),tabSet:e.tabSet||Ko(),advancedSearchQueries:e.advancedSearchQueries||nt(),staticFilterSet:e.staticFilterSet||Yo(),querySet:e.querySet||Go(),sortCriteria:e.sortCriteria||ze(),pipeline:e.pipeline||Qt(),searchHub:e.searchHub||ft(),facetOptions:e.facetOptions||_o(),facetOrder:e.facetOrder??jo(),debug:e.debug??Lt()}}function Yc(){return{}}var gs=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});function Kc(){return{queries:[],maxLength:10}}function Jc(){return{results:[],maxLength:10}}function Ss(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}function Jo(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function je(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Jo(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Jo(),extendedResults:{}}}function Xc(){return{}}var Zc=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});function vS(e={}){return{configuration:en(),advancedSearchQueries:nt(),staticFilterSet:Yo(),facetSet:nn(),dateFacetSet:on(),numericFacetSet:an(),categoryFacetSet:rn(),facetSearchSet:$c(),categoryFacetSearchSet:jc(),facetOptions:_o(),pagination:Ge(),query:Ce(),querySet:Go(),instantResults:Yc(),tabSet:Ko(),querySuggest:{},search:je(),sortCriteria:ze(),context:Qo(),dictionaryFieldContext:Bo(),didYouMean:Uc(),fields:Gc(),history:Oc(Wc()),pipeline:Qt(),facetOrder:jo(),searchHub:ft(),debug:Lt(),resultPreview:Ss(),version:"unit-testing-version",folding:$o(),triggers:Zc(),questionAnswering:gs(),standaloneSearchBoxSet:Xc(),recentResults:Jc(),recentQueries:Kc(),excerptLength:_c(),automaticFacetSet:tn(),generatedAnswer:ps(),...e}}var PS={};WR(PS,{escape:()=>Xo,getHighlightedSuggestion:()=>em,highlightString:()=>pv});function pv(e){if(Nc(e.openingDelimiter)||Nc(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(H(e.content)||Nc(e.content))return e.content;if(e.highlights.length===0)return Xo(e.content);let t=e.content.length,r="",n=0;for(let o=0;o<e.highlights.length;o++){let a=e.highlights[o],i=a.offset,s=i+a.length;if(s>t)break;r+=Xo(e.content.slice(n,i)),r+=e.openingDelimiter,r+=Xo(e.content.slice(i,s)),r+=e.closingDelimiter,n=s}return n!==t&&(r+=Xo(e.content.slice(n))),r}function em(e,t){return e=Xo(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(r,n,o,a)=>n?Zp(n,t.notMatchDelimiters):o?Zp(o,t.exactMatchDelimiters):a?Zp(a,t.correctionDelimiters):r)}function Zp(e,t){return t?t.open+e+t.close:e}function Xo(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return n.test(e)?e.replace(o,a=>t[a]):e}function qe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mv=typeof Symbol=="function"&&Symbol.observable||"@@observable",wS=mv,tm=()=>Math.random().toString(36).substring(7).split("").join("."),fv={INIT:`@@redux/INIT${tm()}`,REPLACE:`@@redux/REPLACE${tm()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tm()}`},eu=fv;function Bt(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function rm(e,t,r){if(typeof e!="function")throw new Error(qe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(qe(1));return r(rm)(e,t)}let n=e,o=t,a=new Map,i=a,s=0,u=!1;function c(){i===a&&(i=new Map,a.forEach((C,y)=>{i.set(y,C)}))}function l(){if(u)throw new Error(qe(3));return o}function m(C){if(typeof C!="function")throw new Error(qe(4));if(u)throw new Error(qe(5));let y=!0;c();let g=s++;return i.set(g,C),function(){if(y){if(u)throw new Error(qe(6));y=!1,c(),i.delete(g),a=null}}}function d(C){if(!Bt(C))throw new Error(qe(7));if(typeof C.type>"u")throw new Error(qe(8));if(typeof C.type!="string")throw new Error(qe(17));if(u)throw new Error(qe(9));try{u=!0,o=n(o,C)}finally{u=!1}return(a=i).forEach(g=>{g()}),C}function p(C){if(typeof C!="function")throw new Error(qe(10));n=C,d({type:eu.REPLACE})}function f(){let C=m;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(qe(11));function g(){let x=y;x.next&&x.next(l())}return g(),{unsubscribe:C(g)}},[wS](){return this}}}return d({type:eu.INIT}),{dispatch:d,subscribe:m,getState:l,replaceReducer:p,[wS]:f}}function gv(e){Object.keys(e).forEach(t=>{let r=e[t];if(typeof r(void 0,{type:eu.INIT})>"u")throw new Error(qe(12));if(typeof r(void 0,{type:eu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qe(13))})}function Zo(e){let t=Object.keys(e),r={};for(let i=0;i<t.length;i++){let s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}let n=Object.keys(r),o,a;try{gv(r)}catch(i){a=i}return function(s={},u){if(a)throw a;let c=!1,l={};for(let m=0;m<n.length;m++){let d=n[m],p=r[d],f=s[d],A=p(f,u);if(typeof A>"u"){let C=u&&u.type;throw new Error(qe(14))}l[d]=A,c=c||A!==f}return c=c||n.length!==Object.keys(s).length,c?l:s}}function ea(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function ES(...e){return t=>(r,n)=>{let o=t(r,n),a=()=>{throw new Error(qe(15))},i={getState:o.getState,dispatch:(u,...c)=>a(u,...c)},s=e.map(u=>u(i));return a=ea(...s)(o.dispatch),{...o,dispatch:a}}}function tu(e){return Bt(e)&&"type"in e&&typeof e.type=="string"}var pm=Symbol.for("immer-nothing"),hs=Symbol.for("immer-draftable"),He=Symbol.for("immer-state");function De(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zn=Object.getPrototypeOf;function at(e){return!!e&&!!e[He]}function We(e){return e?qS(e)||Array.isArray(e)||!!e[hs]||!!e.constructor?.[hs]||As(e)||Fs(e):!1}var Sv=Object.prototype.constructor.toString();function qS(e){if(!e||typeof e!="object")return!1;let t=Zn(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Sv}function mm(e){return at(e)||De(15,e),e[He].base_}function ta(e,t){eo(e)===0?Object.entries(e).forEach(([r,n])=>{t(r,n,e)}):e.forEach((r,n)=>t(n,r,e))}function eo(e){let t=e[He];return t?t.type_:Array.isArray(e)?1:As(e)?2:Fs(e)?3:0}function ys(e,t){return eo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nm(e,t){return eo(e)===2?e.get(t):e[t]}function DS(e,t,r){let n=eo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function hv(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function As(e){return e instanceof Map}function Fs(e){return e instanceof Set}function Xn(e){return e.copy_||e.base_}function im(e,t){if(As(e))return new Map(e);if(Fs(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&qS(e))return Zn(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[He];let n=Reflect.ownKeys(r);for(let o=0;o<n.length;o++){let a=n[o],i=r[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(r[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Zn(e),r)}function ou(e,t=!1){return au(e)||at(e)||!We(e)||(eo(e)>1&&(e.set=e.add=e.clear=e.delete=yv),Object.freeze(e),t&&ta(e,(r,n)=>ou(n,!0),!0)),e}function yv(){De(2)}function au(e){return Object.isFrozen(e)}var sm={};function to(e){let t=sm[e];return t||De(0,e),t}function Cv(e,t){sm[e]||(sm[e]=t)}var Cs;function VS(){return Cs}function xv(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IS(e,t){t&&(to("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cm(e){um(e),e.drafts_.forEach(Av),e.drafts_=null}function um(e){e===Cs&&(Cs=e.parent_)}function TS(e){return Cs=xv(Cs,e)}function Av(e){let t=e[He];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function kS(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[He].modified_&&(cm(t),De(4)),We(e)&&(e=ru(t,e),t.parent_||nu(t,e)),t.patches_&&to("Patches").generateReplacementPatches_(r[He].base_,e,t.patches_,t.inversePatches_)):e=ru(t,r,[]),cm(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pm?e:void 0}function ru(e,t,r){if(au(t))return t;let n=t[He];if(!n)return ta(t,(o,a)=>OS(e,n,t,o,a,r),!0),t;if(n.scope_!==e)return t;if(!n.modified_)return nu(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let o=n.copy_,a=o,i=!1;n.type_===3&&(a=new Set(o),o.clear(),i=!0),ta(a,(s,u)=>OS(e,n,o,s,u,r,i)),nu(e,o,!1),r&&e.patches_&&to("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function OS(e,t,r,n,o,a,i){if(at(o)){let s=a&&t&&t.type_!==3&&!ys(t.assigned_,n)?a.concat(n):void 0,u=ru(e,o,s);if(DS(r,n,u),at(u))e.canAutoFreeze_=!1;else return}else i&&r.add(o);if(We(o)&&!au(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ru(e,o),(!t||!t.scope_.parent_)&&nu(e,o)}}function nu(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ou(t,r)}function Fv(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:VS(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},o=n,a=fm;r&&(o=[n],a=xs);let{revoke:i,proxy:s}=Proxy.revocable(o,a);return n.draft_=s,n.revoke_=i,s}var fm={get(e,t){if(t===He)return e;let r=Xn(e);if(!ys(r,t))return Rv(e,r,t);let n=r[t];return e.finalized_||!We(n)?n:n===om(e.base_,t)?(am(e),e.copy_[t]=dm(n,e)):n},has(e,t){return t in Xn(e)},ownKeys(e){return Reflect.ownKeys(Xn(e))},set(e,t,r){let n=NS(Xn(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let o=om(Xn(e),t),a=o?.[He];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(hv(r,o)&&(r!==void 0||ys(e.base_,t)))return!0;am(e),lm(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return om(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,am(e),lm(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=Xn(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){De(11)},getPrototypeOf(e){return Zn(e.base_)},setPrototypeOf(){De(12)}},xs={};ta(fm,(e,t)=>{xs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xs.deleteProperty=function(e,t){return xs.set.call(this,e,t,void 0)};xs.set=function(e,t,r){return fm.set.call(this,e[0],t,r,e[0])};function om(e,t){let r=e[He];return(r?Xn(r):e)[t]}function Rv(e,t,r){let n=NS(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function NS(e,t){if(!(t in e))return;let r=Zn(e);for(;r;){let n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Zn(r)}}function lm(e){e.modified_||(e.modified_=!0,e.parent_&&lm(e.parent_))}function am(e){e.copy_||(e.copy_=im(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bv=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){let a=r;r=t;let i=this;return function(u=a,...c){return i.produce(u,l=>r.call(this,l,...c))}}typeof r!="function"&&De(6),n!==void 0&&typeof n!="function"&&De(7);let o;if(We(t)){let a=TS(this),i=dm(t,void 0),s=!0;try{o=r(i),s=!1}finally{s?cm(a):um(a)}return IS(a,n),kS(o,a)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===pm&&(o=void 0),this.autoFreeze_&&ou(o,!0),n){let a=[],i=[];to("Patches").generateReplacementPatches_(t,o,a,i),n(a,i)}return o}else De(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...s)=>this.produceWithPatches(i,u=>t(u,...s));let n,o;return[this.produce(t,r,(i,s)=>{n=i,o=s}),n,o]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){We(e)||De(8),at(e)&&(e=MS(e));let t=TS(this),r=dm(e,void 0);return r[He].isManual_=!0,um(t),r}finishDraft(e,t){let r=e&&e[He];(!r||!r.isManual_)&&De(9);let{scope_:n}=r;return IS(n,t),kS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));let n=to("Patches").applyPatches_;return at(e)?n(e,t):this.produce(e,o=>n(o,t))}};function dm(e,t){let r=As(e)?to("MapSet").proxyMap_(e,t):Fs(e)?to("MapSet").proxySet_(e,t):Fv(e,t);return(t?t.scope_:VS()).drafts_.push(r),r}function MS(e){return at(e)||De(10,e),LS(e)}function LS(e){if(!We(e)||au(e))return e;let t=e[He],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=im(e,t.scope_.immer_.useStrictShallowCopy_)}else r=im(e,!0);return ta(r,(n,o)=>{DS(r,n,LS(o))}),t&&(t.finalized_=!1),r}function QS(){let t="replace",r="add",n="remove";function o(d,p,f,A){switch(d.type_){case 0:case 2:return i(d,p,f,A);case 1:return a(d,p,f,A);case 3:return s(d,p,f,A)}}function a(d,p,f,A){let{base_:C,assigned_:y}=d,g=d.copy_;g.length<C.length&&([C,g]=[g,C],[f,A]=[A,f]);for(let h=0;h<C.length;h++)if(y[h]&&g[h]!==C[h]){let x=p.concat([h]);f.push({op:t,path:x,value:m(g[h])}),A.push({op:t,path:x,value:m(C[h])})}for(let h=C.length;h<g.length;h++){let x=p.concat([h]);f.push({op:r,path:x,value:m(g[h])})}for(let h=g.length-1;C.length<=h;--h){let x=p.concat([h]);A.push({op:n,path:x})}}function i(d,p,f,A){let{base_:C,copy_:y}=d;ta(d.assigned_,(g,h)=>{let x=nm(C,g),R=nm(y,g),P=h?ys(C,g)?t:r:n;if(x===R&&P===t)return;let b=p.concat(g);f.push(P===n?{op:P,path:b}:{op:P,path:b,value:R}),A.push(P===r?{op:n,path:b}:P===n?{op:r,path:b,value:m(x)}:{op:t,path:b,value:m(x)})})}function s(d,p,f,A){let{base_:C,copy_:y}=d,g=0;C.forEach(h=>{if(!y.has(h)){let x=p.concat([g]);f.push({op:n,path:x,value:h}),A.unshift({op:r,path:x,value:h})}g++}),g=0,y.forEach(h=>{if(!C.has(h)){let x=p.concat([g]);f.push({op:r,path:x,value:h}),A.unshift({op:n,path:x,value:h})}g++})}function u(d,p,f,A){f.push({op:t,path:[],value:p===pm?void 0:p}),A.push({op:t,path:[],value:d})}function c(d,p){return p.forEach(f=>{let{path:A,op:C}=f,y=d;for(let R=0;R<A.length-1;R++){let P=eo(y),b=A[R];typeof b!="string"&&typeof b!="number"&&(b=""+b),(P===0||P===1)&&(b==="__proto__"||b==="constructor")&&De(19),typeof y=="function"&&b==="prototype"&&De(19),y=nm(y,b),typeof y!="object"&&De(18,A.join("/"))}let g=eo(y),h=l(f.value),x=A[A.length-1];switch(C){case t:switch(g){case 2:return y.set(x,h);case 3:De(16);default:return y[x]=h}case r:switch(g){case 1:return x==="-"?y.push(h):y.splice(x,0,h);case 2:return y.set(x,h);case 3:return y.add(h);default:return y[x]=h}case n:switch(g){case 1:return y.splice(x,1);case 2:return y.delete(x);case 3:return y.delete(f.value);default:return delete y[x]}default:De(17,C)}}),d}function l(d){if(!We(d))return d;if(Array.isArray(d))return d.map(l);if(As(d))return new Map(Array.from(d.entries()).map(([f,A])=>[f,l(A)]));if(Fs(d))return new Set(Array.from(d).map(l));let p=Object.create(Zn(d));for(let f in d)p[f]=l(d[f]);return ys(d,hs)&&(p[hs]=d[hs]),p}function m(d){return at(d)?l(d):d}Cv("Patches",{applyPatches_:c,generatePatches_:o,generateReplacementPatches_:u})}var it=new bv,qr=it.produce,iu=it.produceWithPatches.bind(it),bQ=it.setAutoFreeze.bind(it),vQ=it.setUseStrictShallowCopy.bind(it),gm=it.applyPatches.bind(it),PQ=it.createDraft.bind(it),wQ=it.finishDraft.bind(it);function vv(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Pv(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function wv(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){let r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var BS=e=>Array.isArray(e)?e:[e];function Ev(e){let t=Array.isArray(e[0])?e[0]:e;return wv(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Iv(e,t){let r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}var TQ=Symbol();var kQ=Object.getPrototypeOf({});var Tv=class{constructor(e){this.value=e}deref(){return this.value}},kv=typeof WeakRef<"u"?WeakRef:Tv,Ov=0,US=1;function su(){return{s:Ov,v:void 0,o:null,p:null}}function ra(e,t={}){let r=su(),{resultEqualityCheck:n}=t,o,a=0;function i(){let s=r,{length:u}=arguments;for(let m=0,d=u;m<d;m++){let p=arguments[m];if(typeof p=="function"||typeof p=="object"&&p!==null){let f=s.o;f===null&&(s.o=f=new WeakMap);let A=f.get(p);A===void 0?(s=su(),f.set(p,s)):s=A}else{let f=s.p;f===null&&(s.p=f=new Map);let A=f.get(p);A===void 0?(s=su(),f.set(p,s)):s=A}}let c=s,l;if(s.s===US?l=s.v:(l=e.apply(null,arguments),a++),c.s=US,n){let m=o?.deref?.()??o;m!=null&&n(m,l)&&(l=m,a!==0&&a--),o=typeof l=="object"&&l!==null||typeof l=="function"?new kv(l):l}return c.v=l,l}return i.clearCache=()=>{r=su(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function _S(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...o)=>{let a=0,i=0,s,u={},c=o.pop();typeof c=="object"&&(u=c,c=o.pop()),vv(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);let l={...r,...u},{memoize:m,memoizeOptions:d=[],argsMemoize:p=ra,argsMemoizeOptions:f=[],devModeChecks:A={}}=l,C=BS(d),y=BS(f),g=Ev(o),h=m(function(){return a++,c.apply(null,arguments)},...C),x=!0,R=p(function(){i++;let b=Iv(g,arguments);return s=h.apply(null,b),s},...y);return Object.assign(R,{resultFunc:c,memoizedResultFunc:h,dependencies:g,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>s,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:m,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var re=_S(ra),qv=Object.assign((e,t=re)=>{Pv(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,s,u)=>(i[r[u]]=s,i),{}))},{withTypes:()=>qv});function jS(e){return({dispatch:r,getState:n})=>o=>a=>typeof a=="function"?a(r,n,e):o(a)}var $S=jS(),GS=jS;var Dv=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ea:ea.apply(null,arguments)},UQ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__:function(){return function(e){return e}},Vv=e=>e&&typeof e.match=="function";function S(e,t){function r(...n){if(t){let o=t(...n);if(!o)throw new Error(st(0));return{type:e,payload:o.payload,..."meta"in o&&{meta:o.meta},..."error"in o&&{error:o.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>tu(n)&&n.type===e,r}var YS=class Rs extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Rs.prototype)}static get[Symbol.species](){return Rs}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Rs(...t[0].concat(this)):new Rs(...t.concat(this))}};function zS(e){return We(e)?qr(e,()=>{}):e}function HS(e,t,r){if(e.has(t)){let o=e.get(t);return r.update&&(o=r.update(o,t,e),e.set(t,o)),o}if(!r.insert)throw new Error(st(10));let n=r.insert(t,e);return e.set(t,n),n}function Nv(e){return typeof e=="boolean"}var Mv=()=>function(t){let{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=t??{},i=new YS;return r&&(Nv(r)?i.push($S):i.push(GS(r.extraArgument))),i},no="RTK_autoBatch",oa=()=>e=>({payload:e,meta:{[no]:!0}}),KS=e=>t=>{setTimeout(t,e)},Lv=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:KS(10),Qv=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),o=!0,a=!1,i=!1,s=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Lv:e.type==="callback"?e.queueNotification:KS(e.timeout),c=()=>{i=!1,a&&(a=!1,s.forEach(l=>l()))};return Object.assign({},n,{subscribe(l){let m=()=>o&&l(),d=n.subscribe(m);return s.add(l),()=>{d(),s.delete(l)}},dispatch(l){try{return o=!l?.meta?.[no],a=!o,a&&(i||(i=!0,u(c))),n.dispatch(l)}finally{o=!0}}})},Bv=e=>function(r){let{autoBatch:n=!0}=r??{},o=new YS(e);return n&&o.push(Qv(typeof n=="object"?n:void 0)),o};function JS(e){let t=Mv(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{},s;if(typeof r=="function")s=r;else if(Bt(r))s=Zo(r);else throw new Error(st(1));let u;typeof n=="function"?u=n(t):u=t();let c=ea;o&&(c=Dv({trace:!1,...typeof o=="object"&&o}));let l=ES(...u),m=Bv(l),d=typeof i=="function"?i(m):m(),p=c(...d);return rm(s,a,p)}function XS(e){let t={},r=[],n,o={addCase(a,i){let s=typeof a=="string"?a:a.type;if(!s)throw new Error(st(28));if(s in t)throw new Error(st(29));return t[s]=i,o},addMatcher(a,i){return r.push({matcher:a,reducer:i}),o},addDefaultCase(a){return n=a,o}};return e(o),[t,r,n]}function Uv(e){return typeof e=="function"}function j(e,t){let[r,n,o]=XS(t),a;if(Uv(e))a=()=>zS(e());else{let s=zS(e);a=()=>s}function i(s=a(),u){let c=[r[u.type],...n.filter(({matcher:l})=>l(u)).map(({reducer:l})=>l)];return c.filter(l=>!!l).length===0&&(c=[o]),c.reduce((l,m)=>{if(m)if(at(l)){let p=m(l,u);return p===void 0?l:p}else{if(We(l))return qr(l,d=>m(d,u));{let d=m(l,u);if(d===void 0){if(l===null)return l;throw new Error(st(9))}return d}}return l},s)}return i.getInitialState=a,i}var ZS=(e,t)=>Vv(e)?e.match(t):e(t);function Ut(...e){return t=>e.some(r=>ZS(r,t))}function na(...e){return t=>e.every(r=>ZS(r,t))}function uu(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function bs(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function lu(...e){return e.length===0?t=>uu(t,["pending"]):bs(e)?Ut(...e.map(t=>t.pending)):lu()(e[0])}function ro(...e){return e.length===0?t=>uu(t,["rejected"]):bs(e)?Ut(...e.map(t=>t.rejected)):ro()(e[0])}function vs(...e){let t=r=>r&&r.meta&&r.meta.rejectedWithValue;return e.length===0?na(ro(...e),t):bs(e)?na(ro(...e),t):vs()(e[0])}function Dr(...e){return e.length===0?t=>uu(t,["fulfilled"]):bs(e)?Ut(...e.map(t=>t.fulfilled)):Dr()(e[0])}function du(...e){return e.length===0?t=>uu(t,["pending","fulfilled","rejected"]):bs(e)?Ut(...e.flatMap(t=>[t.pending,t.rejected,t.fulfilled])):du()(e[0])}var _v="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hm=(e=21)=>{let t="",r=e;for(;r--;)t+=_v[Math.random()*64|0];return t},jv=["name","message","stack","code"],Sm=class{constructor(e,t){wc(this,"_type");this.payload=e,this.meta=t}},WS=class{constructor(e,t){wc(this,"_type");this.payload=e,this.meta=t}},$v=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of jv)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},W=(()=>{function e(t,r,n){let o=S(t+"/fulfilled",(u,c,l,m)=>({payload:u,meta:{...m||{},arg:l,requestId:c,requestStatus:"fulfilled"}})),a=S(t+"/pending",(u,c,l)=>({payload:void 0,meta:{...l||{},arg:c,requestId:u,requestStatus:"pending"}})),i=S(t+"/rejected",(u,c,l,m,d)=>({payload:m,error:(n&&n.serializeError||$v)(u||"Rejected"),meta:{...d||{},arg:l,requestId:c,rejectedWithValue:!!m,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"}}));function s(u){return(c,l,m)=>{let d=n?.idGenerator?n.idGenerator(u):hm(),p=new AbortController,f,A;function C(g){A=g,p.abort()}let y=async function(){let g;try{let x=n?.condition?.(u,{getState:l,extra:m});if(zv(x)&&(x=await x),x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let R=new Promise((P,b)=>{f=()=>{b({name:"AbortError",message:A||"Aborted"})},p.signal.addEventListener("abort",f)});c(a(d,u,n?.getPendingMeta?.({requestId:d,arg:u},{getState:l,extra:m}))),g=await Promise.race([R,Promise.resolve(r(u,{dispatch:c,getState:l,extra:m,requestId:d,signal:p.signal,abort:C,rejectWithValue:(P,b)=>new Sm(P,b),fulfillWithValue:(P,b)=>new WS(P,b)})).then(P=>{if(P instanceof Sm)throw P;return P instanceof WS?o(P.payload,d,u,P.meta):o(P,d,u)})])}catch(x){g=x instanceof Sm?i(null,d,u,x.payload,x.meta):i(x,d,u)}finally{f&&p.signal.removeEventListener("abort",f)}return n&&!n.dispatchConditionRejection&&i.match(g)&&g.meta.condition||c(g),g}();return Object.assign(y,{abort:C,requestId:d,arg:u,unwrap(){return y.then(Gv)}})}}return Object.assign(s,{pending:a,rejected:i,fulfilled:o,settled:Ut(i,o),typePrefix:t})}return e.withTypes=()=>e,e})();function Gv(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function zv(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var eh=Symbol.for("rtk-slice-createasyncthunk"),zQ={[eh]:W};function Hv(e,t){return`${e}/${t}`}function Wv({creators:e}={}){let t=e?.asyncThunk?.[eh];return function(n){let{name:o,reducerPath:a=o}=n;if(!o)throw new Error(st(11));typeof process<"u";let i=(typeof n.reducers=="function"?n.reducers(Kv()):n.reducers)||{},s=Object.keys(i),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(g,h){let x=typeof g=="string"?g:g.type;if(!x)throw new Error(st(12));if(x in u.sliceCaseReducersByType)throw new Error(st(13));return u.sliceCaseReducersByType[x]=h,c},addMatcher(g,h){return u.sliceMatchers.push({matcher:g,reducer:h}),c},exposeAction(g,h){return u.actionCreators[g]=h,c},exposeCaseReducer(g,h){return u.sliceCaseReducersByName[g]=h,c}};s.forEach(g=>{let h=i[g],x={reducerName:g,type:Hv(o,g),createNotation:typeof n.reducers=="function"};Xv(h)?eP(x,h,c,t):Jv(x,h,c)});function l(){let[g={},h=[],x=void 0]=typeof n.extraReducers=="function"?XS(n.extraReducers):[n.extraReducers],R={...g,...u.sliceCaseReducersByType};return j(n.initialState,P=>{for(let b in R)P.addCase(b,R[b]);for(let b of u.sliceMatchers)P.addMatcher(b.matcher,b.reducer);for(let b of h)P.addMatcher(b.matcher,b.reducer);x&&P.addDefaultCase(x)})}let m=g=>g,d=new Map,p;function f(g,h){return p||(p=l()),p(g,h)}function A(){return p||(p=l()),p.getInitialState()}function C(g,h=!1){function x(P){let b=P[g];return typeof b>"u"&&h&&(b=A()),b}function R(P=m){let b=HS(d,h,{insert:()=>new WeakMap});return HS(b,P,{insert:()=>{let I={};for(let[N,$]of Object.entries(n.selectors??{}))I[N]=Yv($,P,A,h);return I}})}return{reducerPath:g,getSelectors:R,get selectors(){return R(x)},selectSlice:x}}let y={name:o,reducer:f,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:A,...C(a),injectInto(g,{reducerPath:h,...x}={}){let R=h??a;return g.inject({reducerPath:R,reducer:f},x),{...y,...C(R,!0)}}};return y}}function Yv(e,t,r,n){function o(a,...i){let s=t(a);return typeof s>"u"&&n&&(s=r()),e(s,...i)}return o.unwrapped=e,o}var oo=Wv();function Kv(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Jv({type:e,reducerName:t,createNotation:r},n,o){let a,i;if("reducer"in n){if(r&&!Zv(n))throw new Error(st(17));a=n.reducer,i=n.prepare}else a=n;o.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?S(e,i):S(e))}function Xv(e){return e._reducerDefinitionType==="asyncThunk"}function Zv(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eP({type:e,reducerName:t},r,n,o){if(!o)throw new Error(st(18));let{payloadCreator:a,fulfilled:i,pending:s,rejected:u,settled:c,options:l}=r,m=o(e,a,l);n.exposeAction(t,m),i&&n.addCase(m.fulfilled,i),s&&n.addCase(m.pending,s),u&&n.addCase(m.rejected,u),c&&n.addMatcher(m.settled,c),n.exposeCaseReducer(t,{fulfilled:i||cu,pending:s||cu,rejected:u||cu,settled:c||cu})}function cu(){}var th="listener",rh="completed",nh="cancelled",HQ=`task-${nh}`,WQ=`task-${rh}`,YQ=`${th}-${nh}`,KQ=`${th}-${rh}`;var{assign:oh}=Object;var ym="listenerMiddleware";var tP=oh(S(`${ym}/add`),{withTypes:()=>tP}),JQ=S(`${ym}/removeAll`),rP=oh(S(`${ym}/remove`),{withTypes:()=>rP});var XQ=Symbol.for("rtk-state-proxy-original");function st(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}async function ih(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function sh(e){let t,r,n,o=!1;return function(i){t===void 0?(t=i,r=0,n=-1):t=nP(t,i);let s=t.length,u=0;for(;r<s;){o&&(t[r]===10&&(u=++r),o=!1);let c=-1;for(;r<s&&c===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-u);break;case 13:o=!0;case 10:c=r;break}if(c===-1)break;e(t.subarray(u,c),n),u=r,n=-1}u===s?t=void 0:u!==0&&(t=t.subarray(u),r-=u)}}function ch(e,t,r){let n=ah(),o=new TextDecoder;return function(i,s){if(i.length===0)r?.(n),n=ah();else if(s>0){let u=o.decode(i.subarray(0,s)),c=s+(i[s+1]===32?2:1),l=o.decode(i.subarray(c));switch(u){case"data":n.data=n.data?n.data+`
`+l:l;break;case"event":n.event=l;break;case"id":e(n.id=l);break;case"retry":let m=parseInt(l,10);isNaN(m)||t(n.retry=m);break}}}}function nP(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function ah(){return{data:"",event:"",id:"",retry:void 0}}var oP=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r},pu="text/event-stream",aP=1e3,uh="last-event-id";function lh(){typeof window<"u"}function Ps(e,t){var{signal:r,headers:n,onopen:o,onmessage:a,onclose:i,onerror:s,openWhenHidden:u,fetch:c}=t,l=oP(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((m,d)=>{let p=Object.assign({},n);p.accept||(p.accept=pu);let f;function A(){f?.abort(),document.hidden||R()}!u&&lh()&&document.addEventListener("visibilitychange",A);let C=aP,y=0;function g(){lh()&&document.removeEventListener("visibilitychange",A),clearTimeout(y),f?.abort()}r?.addEventListener("abort",()=>{g(),m()});let h=c??h,x=o??iP;async function R(){var P;f=typeof AbortController>"u"?null:new AbortController;try{let b=await h(e,Object.assign(Object.assign({},l),{headers:p,signal:f?.signal}));await x(b),await ih(b.body,sh(ch(I=>{I?p[uh]=I:delete p[uh]},I=>{C=I},a))),i?.(),g(),m()}catch(b){if(!f?.signal.aborted)try{let I=(P=s?.(b))!==null&&P!==void 0?P:C;clearTimeout(y),y=setTimeout(R,I)}catch(I){g(),d(I)}}}R()})}function iP(e){let t=e.headers.get("content-type");if(!t?.startsWith(pu))throw new Error(`Expected content-type to be ${pu}, Actual: ${t}`)}function mu(){if(typeof window>"u"){let{AbortController:e}=ph();return new e}return typeof AbortController>"u"?null:new AbortController}var sn=class{constructor(t){this._params={};this._basePath=t}addParam(t,r){this._params={...this.params,[t]:r}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([t,r])=>`${t}=${encodeURIComponent(r)}`).join("&")}`:this.basePath}},mh=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),fh=(e,t)=>{let r=xm(e);return r&&r.organizationId===t?r:null},xm=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};var sP=(e,t,r)=>new sn(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,gh=3,cP=5e3,uP="text/event-stream",Rm=1,Am=class extends Error{},ws=class extends Error{constructor(r){super(r.message);this.payload=r}},Fm=class{constructor(){this.timeouts=new Set}add(t){this.timeouts.add(t)}remove(t){clearTimeout(t),this.timeouts.delete(t)}isActive(t){return this.timeouts.has(t)}},fu=class{constructor(t){this.logger=t.logger}streamGeneratedAnswer(t,r){let{url:n,organizationId:o,streamId:a,accessToken:i}=t,{write:s,abort:u,close:c,resetAnswer:l}=r,m=new Fm;if(!a){this.logger.error("No stream ID found");return}let d=0,p,f=()=>{p&&!m.isActive(p)&&(C?.abort(),l(),y())},A=()=>{m.remove(p),p=cS(f,p,cP),m.add(p)},C=mu(),y=()=>Ps(sP(n,o,a),{method:"GET",fetch,headers:{Authorization:`Bearer ${i}`,accept:"*/*"},openWhenHidden:!0,signal:C?.signal,async onopen(g){if(g.ok&&g.headers.get("content-type")===uP)return;throw g.status>=400&&g.status<500&&g.status!==429?new ws({message:"Error opening stream",code:g.status}):new Am},onmessage:g=>{if(C?.signal.aborted)return;let h=JSON.parse(g.data);if(h.finishReason==="ERROR"){m.remove(p),C?.abort(),u({message:h.errorMessage,code:h.statusCode});return}s(h),d=0,h.finishReason==="COMPLETED"?(m.remove(p),c()):A()},onerror:g=>{if(!C?.signal.aborted){if(m.remove(p),g instanceof ws)throw C?.abort(),u(g),g;if(++d>gh){this.logger.info("Maximum retry exceeded.");let h={message:"Failed to complete stream.",code:Rm};throw C?.abort(),u(h),new ws(h)}this.logger.info(`Retrying...(${d}/${gh})`),l()}}});return y(),C}};var gu=e=>e;function Vr(e){let{url:t,accessToken:r,organizationId:n,authentication:o,...a}=e;return a}var Nr=e=>{let{response:t}=e;return t.body?lP(e):dP(t)},lP=e=>mP(e)?fP(e):pP(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},dP=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function pP(e){return e.body.statusCode!==void 0}function mP(e){return e.body.exception!==void 0}var fP=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var cn=class{constructor(){this.currentAbortController=null}async enqueue(t,r){let n=this.currentAbortController,o=this.currentAbortController=mu();n&&(r.warnOnAbort&&r.logger.warn("Cancelling current pending search query"),n.abort());try{return await t(o?.signal??null)}finally{this.currentAbortController===o&&(this.currentAbortController=null)}}};function Sh(e){return((e.headers.get("content-type")||"").split(";").find(n=>n.indexOf("charset=")!==-1)||"").split("=")[1]||"UTF-8"}var _t=(e,t,r,n)=>{let o=new sn(`${e.url}${n}`);return o.addParam("organizationId",e.organizationId),e.authentication&&o.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:o.href,origin:"searchApiFetch"}};var hh=(e,t)=>{let r=new sn(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},yh=async(e,t)=>{let r=await ot.call({..._t(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:Vr(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=Sh(r),o=await r.arrayBuffer(),i=new TextDecoder(n).decode(o);return gP(i)?{success:i}:{error:Nr({response:r,body:i})}};function gP(e){return typeof e=="string"}function SP(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function hP(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Es(e,t){if(t&&e.name==="AbortError")return{error:hP(e)};if(e instanceof Jn)return{error:SP(e)};throw e}var Su=class{constructor(t){this.options=t;this.apiCallsQueues={unknown:new cn,mainSearch:new cn,facetValues:new cn,foldingCollection:new cn,instantResults:new cn}}async plan(t){let r=await ot.call({..._t(t,"POST","application/json","/plan"),requestParams:Vr(t),requestMetadata:{method:"plan"},...this.options});if(r instanceof Error)return Es(r);let n=await r.json();return CP(n)?{success:n}:{error:Nr({response:r,body:n})}}async querySuggest(t){let r=await ot.call({..._t(t,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:Vr(t),...this.options});if(r instanceof Error)return Es(r);let n=await r.json(),o={response:r,body:n};return yP(n)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(o)).body}:{error:Nr(o)}}async search(t,r){let n=r?.origin??"unknown",o=await this.apiCallsQueues[n].enqueue(s=>ot.call({..._t(t,"POST","application/json",""),requestParams:Vr(t),requestMetadata:{method:"search",origin:r?.origin},...this.options,signal:s??void 0}),{logger:this.options.logger,warnOnAbort:!r?.disableAbortWarning});if(o instanceof Error)return Es(o,r?.disableAbortWarning);let a=await o.json(),i={response:o,body:a};return bm(a)?(i.body=Ch(a),{success:(await this.options.postprocessSearchResponseMiddleware(i)).body}):{error:Nr(i)}}async facetSearch(t){let r=await ot.call({..._t(t,"POST","application/json","/facet"),requestParams:Vr(t),requestMetadata:{method:"facetSearch"},...this.options});if(r instanceof Error)throw r;let n=await r.json(),o={response:r,body:n};return(await this.options.postprocessFacetSearchResponseMiddleware(o)).body}async recommendations(t){let r=await ot.call({..._t(t,"POST","application/json",""),requestParams:Vr(t),requestMetadata:{method:"recommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();if(bm(n)){let o={response:r,body:n};return o.body=Ch(n),{success:(await this.options.postprocessSearchResponseMiddleware(o)).body}}return{error:Nr({response:r,body:n})}}async html(t){return yh(t,{...this.options})}async productRecommendations(t){let r=await ot.call({..._t(t,"POST","application/json",""),requestParams:Vr(t),requestMetadata:{method:"productRecommendations"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return bm(n)?{success:n}:{error:Nr({response:r,body:n})}}async fieldDescriptions(t){let r=await ot.call({..._t(t,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(r instanceof Error)throw r;let n=await r.json();return xP(n)?{success:n}:{error:Nr({response:r,body:n})}}},hu=e=>e.success!==void 0,Ee=e=>e.error!==void 0;function bm(e){return e.results!==void 0}function Ch(e){let t=Jo();return H(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function yP(e){return e.completions!==void 0}function CP(e){return e.preprocessingOutput!==void 0}function xP(e){return e.fields!==void 0}var xh=e=>e,Ah=e=>e,Fh=e=>e;var k=new E({required:!0,emptyAllowed:!1}),le=new E({required:!1,emptyAllowed:!1}),pe=new E({required:!0,emptyAllowed:!0}),Rh=new E({required:!1,emptyAllowed:!0}),yu=new J({each:k,required:!0}),bh=new E({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Mr=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),gt=(e,t)=>{if("required"in t)return{payload:new Z({value:t}).validate({value:e}).value};let o=new q({options:{required:!0},values:t}).validate(e);if(o)throw new ms(o);return{payload:e}},F=(e,t)=>{try{return gt(e,t)}catch(r){return{payload:e,error:Mr(r)}}},Re=(e,t,r,n)=>{let o=`Check the initialState of ${n}`;return vh(e,t,r,o,"Controller initialization error")},ge=(e,t,r,n)=>{let o=`Check the options of ${n}`;return vh(e,t,r,o,"Controller initialization error")},vh=(e,t,r,n,o)=>{try{return t.validate(r,n)}catch(a){throw e.logger.error(a,o),a}};function AP({config:e,environment:t,event:r,listenerManager:n}){let{url:o,token:a,mode:i}=e;i!=="disabled"&&(n.call(r),t.send(o,a,r))}var FP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function RP(e){return typeof e=="string"&&FP.test(e)}function bP(e){return{getClientId:()=>{let t="visitorId",r=e.get(),n=r.storage,o=n.getItem(t),a=o&&RP(o)?o:r.generateUUID();return n.setItem(t,a),a}}}var wh="0.7.10";function vP(e){let{trackingId:t}=e;return{trackingId:t}}function PP(e){return(e.source||[]).concat([`relay@${wh}`])}function Eh(e,t,r,n){let{getReferrer:o,getLocation:a,getUserAgent:i}=r,s=vP(t),u=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:PP(t),clientId:u,userAgent:i(),referrer:o(),location:a()})}function wP(e,t,r,n,o){return{...t,meta:Eh(e,r,n,o)}}var EP="*";function IP(){let e=[];function t({type:u,callback:c}){return e.findIndex(l=>l.type===u&&l.callback===c)}function r(u,c){return u.type==="*"||c===u.type}function n(u){return t(u)<0&&e.push(u),()=>s(u.type,u.callback)}function o(u){e.forEach(c=>{if(r(c,u.meta.type))try{c.callback(u)}catch(l){console.error(l)}})}function a(u){if(u===EP)e.length=0;else for(let c=e.length-1;c>=0;c--)e[c].type===u&&e.splice(c,1)}function i(u){let c=t(u);c>=0&&e.splice(c,1)}function s(u,c){c?i({type:u,callback:c}):a(u)}return{add:n,call:o,remove:s}}function Ph({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function TP(e){let t=Ph(e);return{get:()=>t,update:r=>{t=Ph({...t,...r})}}}function kP(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var vm=OP();function OP(){let e="coveo_",t=r=>{let n=r.split(".").slice(-2);return n.length==2?n.join("."):""};return{getItem(r){let n=`${e}${r}=`,o=document.cookie.split(";");for(let a of o){let i=a.replace(/^\s+/,"");if(i.lastIndexOf(n,0)===0)return i.substring(n.length,i.length)}return null},setItem(r,n,o){let a=t(window.location.hostname),i=`;expires=${new Date(new Date().getTime()+o).toUTCString()}`,s=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${i}${s};path=/;SameSite=Lax`},removeItem(r){this.setItem(r,"",-1)}}}function qP(){return{getItem(e){return vm.getItem(e)||localStorage.getItem(e)},removeItem(e){vm.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),vm.setItem(e,t,31556952e3)}}}function DP(){let e=document.referrer;return e===""?null:e}function VP(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(kP().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>DP(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:qP()}}function NP(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function MP(){return{getItem(){return null},removeItem(){},setItem(){}}}function LP(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:MP()}}function QP(e){return e.get().mode!=="disabled"&&BP()&&NP()?VP():LP()}function BP(){try{return typeof window=="object"}catch{return!1}}function UP(e){return{get:()=>Object.freeze(QP(e))}}function Ih(e){let t=TP(e),r=IP(),n=UP(t),o=bP(n);return{emit:(a,i)=>{let s=t.get(),u=n.get(),c=wP(a,i,s,u,o);return AP({config:s,environment:u,event:c,listenerManager:r})},getMeta:a=>Eh(a,t.get(),n.get(),o),on:(a,i)=>r.add({type:a,callback:i}),off:(a,i)=>r.remove(a,i),updateConfig:a=>t.update(a),version:wh}}var ao="2.80.5",Th=["@coveo/atomic","@coveo/quantic"];var jt=re(e=>e.source,e=>Object.entries(e).map(([t,r])=>`${t}@${r}`).concat(`@coveo/headless@${ao}`));var aa=re(e=>e.configuration.accessToken,e=>e.configuration.analytics,e=>jt(e.configuration.analytics),(e,{trackingId:t,nextApiBaseUrl:r,enabled:n},o)=>Ih({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:o}));function Lr(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function v(e,t,r,n){function o(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function s(l){try{c(n.next(l))}catch(m){i(m)}}function u(l){try{c(n.throw(l))}catch(m){i(m)}}function c(l){l.done?a(l.value):o(l.value).then(s,u)}c((n=n.apply(e,t||[])).next())})}var ie;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(ie||(ie={}));function kh(){return typeof window<"u"}function Bm(){return typeof navigator<"u"}function ia(){return typeof document<"u"}function Em(){try{return typeof localStorage<"u"}catch{return!1}}function _P(){try{return typeof sessionStorage<"u"}catch{return!1}}function $h(){return Bm()&&navigator.cookieEnabled}var jP=[ie.click,ie.custom,ie.search,ie.view],$P=(e,t)=>jP.indexOf(e)!==-1?Object.assign({language:ia()?document.documentElement.lang:"unknown",userAgent:Bm()?navigator.userAgent:"unknown"},t):t,ks=class e{static set(t,r,n){var o,a,i,s;n&&(a=new Date,a.setTime(a.getTime()+n)),s=window.location.hostname,s.indexOf(".")===-1?Oh(t,r,a):(i=s.split("."),o=i[i.length-2]+"."+i[i.length-1],Oh(t,r,a,o))}static get(t){for(var r=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o];if(a=a.replace(/^\s+/,""),a.lastIndexOf(r,0)===0)return a.substring(r.length,a.length)}return null}static erase(t){e.set(t,"",-1)}};function Oh(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function GP(){return Em()?localStorage:$h()?new Os:_P()?sessionStorage:new ca}var Os=class e{getItem(t){return ks.get(`${e.prefix}${t}`)}removeItem(t){ks.erase(`${e.prefix}${t}`)}setItem(t,r,n){ks.set(`${e.prefix}${t}`,r,n)}};Os.prefix="coveo_";var Im=class{constructor(){this.cookieStorage=new Os}getItem(t){return localStorage.getItem(t)||this.cookieStorage.getItem(t)}removeItem(t){this.cookieStorage.removeItem(t),localStorage.removeItem(t)}setItem(t,r){localStorage.setItem(t,r),this.cookieStorage.setItem(t,r,31556926e3)}},ca=class{getItem(t){return null}removeItem(t){}setItem(t,r){}},Is="__coveo.analytics.history",Gh=20,zh=1e3*60,Hh=75,ua=class{constructor(t){this.store=t||GP()}addElement(t){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=this.getHistoryWithInternalTime();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])}addElementAsync(t){return v(this,void 0,void 0,function*(){t.internalTime=new Date().getTime(),t=this.cropQueryElement(this.stripEmptyQuery(t));let r=yield this.getHistoryWithInternalTimeAsync();r!=null?this.isValidEntry(t)&&this.setHistory([t].concat(r)):this.setHistory([t])})}getHistory(){let t=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(t))}getHistoryAsync(){return v(this,void 0,void 0,function*(){let t=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(t))})}getHistoryWithInternalTime(){try{let t=this.store.getItem(Is);return t&&typeof t=="string"?JSON.parse(t):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return v(this,void 0,void 0,function*(){try{let t=yield this.store.getItem(Is);return t?JSON.parse(t):[]}catch{return[]}})}setHistory(t){try{this.store.setItem(Is,JSON.stringify(t.slice(0,Gh)))}catch{}}clear(){try{this.store.removeItem(Is)}catch{}}getMostRecentElement(){let t=this.getHistoryWithInternalTime();return Array.isArray(t)?t.sort((n,o)=>(o.internalTime||0)-(n.internalTime||0))[0]:null}cropQueryElement(t){return t.name&&t.value&&t.name.toLowerCase()==="query"&&(t.value=t.value.slice(0,Hh)),t}isValidEntry(t){let r=this.getMostRecentElement();return r&&r.value==t.value?(t.internalTime||0)-(r.internalTime||0)>zh:!0}stripInternalTime(t){return Array.isArray(t)?t.map(r=>{let{name:n,time:o,value:a}=r;return{name:n,time:o,value:a}}):[]}stripEmptyQuery(t){let{name:r,time:n,value:o}=t;return r&&typeof o=="string"&&r.toLowerCase()==="query"&&o.trim()===""?{name:r,time:n}:t}stripEmptyQueries(t){return t.map(r=>this.stripEmptyQuery(r))}},Wh=Object.freeze({__proto__:null,HistoryStore:ua,MAX_NUMBER_OF_HISTORY_ELEMENTS:Gh,MAX_VALUE_SIZE:Hh,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:zh,STORE_KEY:Is,default:ua}),zP=(e,t)=>v(void 0,void 0,void 0,function*(){return e===ie.view?(yield HP(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),HP=e=>v(void 0,void 0,void 0,function*(){let t=new ua,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),Cu,WP=new Uint8Array(16);function YP(){if(!Cu&&(Cu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cu(WP)}var KP=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Au(e){return typeof e=="string"&&KP.test(e)}var Ve=[];for(let e=0;e<256;++e)Ve.push((e+256).toString(16).slice(1));function Yh(e,t=0){return(Ve[e[t+0]]+Ve[e[t+1]]+Ve[e[t+2]]+Ve[e[t+3]]+"-"+Ve[e[t+4]]+Ve[e[t+5]]+"-"+Ve[e[t+6]]+Ve[e[t+7]]+"-"+Ve[e[t+8]]+Ve[e[t+9]]+"-"+Ve[e[t+10]]+Ve[e[t+11]]+Ve[e[t+12]]+Ve[e[t+13]]+Ve[e[t+14]]+Ve[e[t+15]]).toLowerCase()}function JP(e){if(!Au(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function XP(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var ZP="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ew="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function tw(e,t,r){function n(o,a,i,s){var u;if(typeof o=="string"&&(o=XP(o)),typeof a=="string"&&(a=JP(a)),((u=a)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(a),c.set(o,a.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){s=s||0;for(let l=0;l<16;++l)i[s+l]=c[l];return i}return Yh(c)}try{n.name=e}catch{}return n.DNS=ZP,n.URL=ew,n}var rw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qh={randomUUID:rw};function io(e,t,r){if(qh.randomUUID&&!t&&!e)return qh.randomUUID();e=e||{};let n=e.random||(e.rng||YP)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return Yh(n)}function nw(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Pm(e,t){return e<<t|e>>>32-t}function ow(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let i=unescape(encodeURIComponent(e));e=[];for(let s=0;s<i.length;++s)e.push(i.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,o=Math.ceil(n/16),a=new Array(o);for(let i=0;i<o;++i){let s=new Uint32Array(16);for(let u=0;u<16;++u)s[u]=e[i*64+u*4]<<24|e[i*64+u*4+1]<<16|e[i*64+u*4+2]<<8|e[i*64+u*4+3];a[i]=s}a[o-1][14]=(e.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<o;++i){let s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=a[i][p];for(let p=16;p<80;++p)s[p]=Pm(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let u=r[0],c=r[1],l=r[2],m=r[3],d=r[4];for(let p=0;p<80;++p){let f=Math.floor(p/20),A=Pm(u,5)+nw(f,c,l,m)+d+t[f]+s[p]>>>0;d=m,m=l,l=Pm(c,30)>>>0,c=u,u=A}r[0]=r[0]+u>>>0,r[1]=r[1]+c>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+m>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var aw=tw("v5",80,ow),Dh=aw,Kh="2.30.38",Vh=e=>`${e.protocol}//${e.hostname}${e.pathname.indexOf("/")===0?e.pathname:`/${e.pathname}`}${e.search}`,Ts={pageview:"pageview",event:"event"},Fu=class{constructor({client:t,uuidGenerator:r=io}){this.client=t,this.uuidGenerator=r}},Tm=class extends Fu{constructor({client:t,uuidGenerator:r=io}){super({client:t,uuidGenerator:r}),this.actionData={},this.pageViewId=r(),this.nextPageViewId=this.pageViewId,this.currentLocation=Vh(window.location),this.lastReferrer=ia()?document.referrer:"",this.addHooks()}getApi(t){switch(t){case"setAction":return this.setAction;default:return null}}setAction(t,r){this.action=t,this.actionData=r}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(t,r){return Object.assign({hitType:t},this.getNextValues(t,r))}updateLocationInformation(t,r){this.updateLocationForNextPageView(t,r)}getDefaultContextInformation(t){let r={title:ia()?document.title:"",encoding:ia()?document.characterSet:"UTF-8"},n={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},o={language:navigator.language,userAgent:navigator.userAgent},a={time:Date.now(),eventId:this.uuidGenerator()};return Object.assign(Object.assign(Object.assign(Object.assign({},a),n),o),r)}updateLocationForNextPageView(t,r){let{pageViewId:n,referrer:o,location:a}=this.getNextValues(t,r);this.lastReferrer=o,this.pageViewId=n,this.currentLocation=a,t===Ts.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(t,r){return{pageViewId:t===Ts.pageview?this.nextPageViewId:this.pageViewId,referrer:t===Ts.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:t===Ts.pageview?this.getCurrentLocationFromPayload(r):this.currentLocation}}getCurrentLocationFromPayload(t){if(t.page){let r=o=>o.replace(/^\/?(.*)$/,"/$1");return`${(o=>o.split("/").slice(0,3).join("/"))(this.currentLocation)}${r(t.page)}`}else return Vh(window.location)}},un=class e{constructor(t,r){if(!Au(t))throw Error("Not a valid uuid");this.clientId=t,this.creationDate=Math.floor(r/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(t,r){return!this.expired&&this.matchReferrer(t,r)}matchReferrer(t,r){try{let n=new URL(t);return r.some(o=>new RegExp(o.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(n.host))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,o]=r;if(n.length!==32||isNaN(parseInt(o)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Au(a)?new e(a,Number.parseInt(o)*1e3):null}};un.cvo_cid="cvo_cid";un.expirationTime=120;var km=class extends Fu{constructor({client:t,uuidGenerator:r=io}){super({client:t,uuidGenerator:r})}getApi(t){switch(t){case"decorate":return this.decorate;case"acceptFrom":return this.acceptFrom;default:return null}}decorate(t){return v(this,void 0,void 0,function*(){if(!this.client.getCurrentVisitorId)throw new Error("Could not retrieve current clientId");try{let r=new URL(t),n=yield this.client.getCurrentVisitorId();return r.searchParams.set(un.cvo_cid,new un(n,Date.now()).toString()),r.toString()}catch{throw new Error("Invalid URL provided")}})}acceptFrom(t){this.client.setAcceptedLinkReferrers(t)}};km.Id="link";var St=Object.keys;function xu(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var wm=128,Jh=192,Nh=224,Mh=240;function iw(e){return(e&248)===Mh?4:(e&Mh)===Nh?3:(e&Nh)===Jh?2:1}function sw(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&wm)!=wm)break;if(r-=3,(n&Jh)!=wm){t-r>=iw(n)*3&&(r=t);break}}return e.substring(0,r)}var Om={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},cw=St(Om).map(e=>Om[e]),uw=[...cw].join("|"),lw=new RegExp(`^(${uw}$)`),dw={svcAction:"svc_action",svcActionData:"svc_action_data"},pw=e=>St(e).filter(t=>e[t]!==void 0).reduce((t,r)=>{let n=Om[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),mw=e=>lw.test(e),fw=[mw],Lh={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},Qh={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Ne={action:"pa",list:"pal",listSource:"pls"},Ru={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},gw=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],qm={id:"quoteId",affiliation:"quoteAffiliation"},Dm={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},Sw={add:Ne,bookmark_add:Ne,bookmark_remove:Ne,click:Ne,checkout:Ne,checkout_option:Ne,detail:Ne,impression:Ne,remove:Ne,refund:Object.assign(Object.assign({},Ne),Ru),purchase:Object.assign(Object.assign({},Ne),Ru),quickview:Ne,quote:Object.assign(Object.assign({},Ne),qm),review:Object.assign(Object.assign({},Ne),Dm)},hw=St(Lh).map(e=>Lh[e]),yw=St(Qh).map(e=>Qh[e]),Cw=St(Ne).map(e=>Ne[e]),xw=St(Ru).map(e=>Ru[e]),Aw=St(Dm).map(e=>Dm[e]),Fw=St(qm).map(e=>qm[e]),Rw=[...hw,"custom"].join("|"),bw=[...yw,"custom"].join("|"),Xh="(pr[0-9]+)",Zh="(il[0-9]+pi[0-9]+)",vw=new RegExp(`^${Xh}(${Rw})$`),Pw=new RegExp(`^(${Zh}(${bw}))|(il[0-9]+nm)$`),ww=new RegExp(`^(${Cw.join("|")})$`),Ew=new RegExp(`^(${xw.join("|")})$`),Iw=new RegExp(`^${Xh}custom$`),Tw=new RegExp(`^${Zh}custom$`),kw=new RegExp(`^(${[...gw,...Aw,...Fw].join("|")})$`),Ow=e=>vw.test(e),qw=e=>Pw.test(e),Dw=e=>ww.test(e),Vw=e=>Ew.test(e),Nw=e=>kw.test(e),Mw=[qw,Ow,Dw,Vw,Nw],Lw=[Iw,Tw],Qw={anonymizeIp:"aip"},Bw={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},Uw={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},_w=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],jw=Object.assign(Object.assign(Object.assign(Object.assign({},Qw),Bw),Uw),_w.reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{})),Vm=Object.assign(Object.assign({},jw),dw),$w=e=>{let t=!!e.action&&Sw[e.action]||{};return St(e).reduce((r,n)=>{let o=t[n]||Vm[n]||n;return Object.assign(Object.assign({},r),{[o]:e[n]})},{})},Gw=St(Vm).map(e=>Vm[e]),zw=e=>Gw.indexOf(e)!==-1,Hw=e=>e==="custom",Ww=e=>[...Mw,...fw,zw,Hw].some(t=>t(e)),Yw=e=>St(e).reduce((t,r)=>{let n=Kw(r);return n?Object.assign(Object.assign({},t),Jw(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),Kw=e=>{let t;return[...Lw].every(r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t}),t},Jw=(e,t)=>St(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),Nm=class{constructor(t){this.opts=t}sendEvent(t,r){return v(this,void 0,void 0,function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:n,preprocessRequest:o}=this.opts,a=yield this.getQueryParamsForEventType(t),{url:i,payload:s}=yield this.preProcessRequestAsPotentialJSONString(`${n}/analytics/${t}?${a}`,r,o),u=this.encodeForEventType(t,s),c=new Blob([u],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,c)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(t,r,n){return v(this,void 0,void 0,function*(){let o=t,a=r;if(n){let i=yield n({url:t,body:JSON.stringify(r)},"analyticsBeacon"),{url:s,body:u}=i;o=s||t;try{a=JSON.parse(u)}catch(c){console.error("Unable to process the request body as a JSON string",c)}}return{payload:a,url:o}})}encodeForEventType(t,r){return this.isEventTypeLegacy(t)?this.encodeEventToJson(t,r):this.encodeEventToJson(t,r,this.opts.token)}getQueryParamsForEventType(t){return v(this,void 0,void 0,function*(){let{token:r,visitorIdProvider:n}=this.opts,o=yield n.getCurrentVisitorId();return[r&&this.isEventTypeLegacy(t)?`access_token=${r}`:"",o?`visitorId=${o}`:"","discardVisitInfo=true"].filter(a=>!!a).join("&")})}isEventTypeLegacy(t){return[ie.click,ie.custom,ie.search,ie.view].indexOf(t)!==-1}encodeEventToJson(t,r,n){let o=`${t}Event=${encodeURIComponent(JSON.stringify(r))}`;return n&&(o=`access_token=${encodeURIComponent(n)}&${o}`),o}},Mm=class{sendEvent(t,r){return v(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){return Promise.resolve()})}},bu=class{constructor(t){this.opts=t}sendEvent(t,r){return v(this,void 0,void 0,function*(){let{baseUrl:n,visitorIdProvider:o,preprocessRequest:a}=this.opts,i=this.shouldAppendVisitorId(t)?yield this.getVisitorIdParam():"",s={url:`${n}/analytics/${t}${i}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(r)},u=Object.assign(Object.assign({},s),a?yield a(s,"analyticsFetch"):{}),{url:c}=u,l=Lr(u,["url"]),m;try{m=yield fetch(c,l)}catch(d){console.error("An error has occured when sending the event.",d);return}if(m.ok){let d=yield m.json();return d.visitorId&&o.setCurrentVisitorId(d.visitorId),d}else{try{m.json()}catch{}throw console.error(`An error has occured when sending the "${t}" event.`,m,r),new Error(`An error has occurred when sending the "${t}" event. Check the console logs for more details.`)}})}deleteHttpCookieVisitorId(){return v(this,void 0,void 0,function*(){let{baseUrl:t}=this.opts,r=`${t}/analytics/visit`;yield fetch(r,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(t){return[ie.click,ie.custom,ie.search,ie.view].indexOf(t)!==-1}getVisitorIdParam(){return v(this,void 0,void 0,function*(){let{visitorIdProvider:t}=this.opts,r=yield t.getCurrentVisitorId();return r?`?visitor=${r}`:""})}getHeaders(){let{token:t}=this.opts;return Object.assign(Object.assign({},t?{Authorization:`Bearer ${t}`}:{}),{"Content-Type":"application/json"})}},Lm=class{constructor(t,r){Em()&&$h()?this.storage=new Im:Em()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new ca),this.client=new bu(t),this.beaconClient=new Nm(t),window.addEventListener("beforeunload",()=>{let n=r();for(let{eventType:o,payload:a}of n)this.beaconClient.sendEvent(o,a)})}getClientDependingOnEventType(t){return t==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},Qm=class{constructor(t,r){this.storage=r||new ca,this.client=new bu(t)}getClientDependingOnEventType(t){return this.client}},vu=class{constructor(){this.storage=new ca,this.client=new Mm}getClientDependingOnEventType(t){return this.client}},Xw="xx",Zw=e=>e?.startsWith(Xw)||!1,eE=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `;function tE(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var rE=["1",1,"yes",!0];function Pu(){return Bm()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>rE.indexOf(e)!==-1)}var ey="v15",ty={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function nE(e=ty.default,t=ey,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var oE="38824e1f-37f5-42d3-8372-a4b8fa9df946",Br=class{get defaultOptions(){return{endpoint:ty.default,isCustomEndpoint:!1,token:"",version:ey,beforeSendHooks:[],afterSendHooks:[]}}get version(){return Kh}constructor(t){if(this.acceptedLinkReferrers=[],!t)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),t),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[zP,$P].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let r={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Pu()?this.runtime=new vu:this.runtime=this.options.runtimeEnvironment||this.initRuntime(r),this.addEventTypeMapping(ie.view,{newEventType:ie.view,addClientIdParameter:!0}),this.addEventTypeMapping(ie.click,{newEventType:ie.click,addClientIdParameter:!0}),this.addEventTypeMapping(ie.custom,{newEventType:ie.custom,addClientIdParameter:!0}),this.addEventTypeMapping(ie.search,{newEventType:ie.search,addClientIdParameter:!0})}initRuntime(t){return kh()&&ia()?new Lm(t,()=>{let r=[...this.bufferedRequests];return this.bufferedRequests=[],r}):(tE()&&console.warn(eE),new Qm(t))}get storage(){return this.runtime.storage}determineVisitorId(){return v(this,void 0,void 0,function*(){try{return kh()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||io()}catch(t){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",t),io()}})}getCurrentVisitorId(){return v(this,void 0,void 0,function*(){if(!this.visitorId){let t=yield this.determineVisitorId();yield this.setCurrentVisitorId(t)}return this.visitorId})}setCurrentVisitorId(t){return v(this,void 0,void 0,function*(){this.visitorId=t,yield this.storage.setItem("visitorId",t)})}setClientId(t,r){return v(this,void 0,void 0,function*(){if(Au(t))this.setCurrentVisitorId(t.toLowerCase());else{if(!r)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(Dh(t,Dh(r,oE)))}})}getParameters(t,...r){return v(this,void 0,void 0,function*(){return yield this.resolveParameters(t,...r)})}getPayload(t,...r){return v(this,void 0,void 0,function*(){let n=yield this.resolveParameters(t,...r);return yield this.resolvePayloadForParameters(t,n)})}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(io()),this.visitorId}set currentVisitorId(t){this.visitorId=t,this.storage.setItem("visitorId",t)}extractClientIdFromLink(t){if(Pu())return null;try{let r=new URL(t).searchParams.get(un.cvo_cid);if(r==null)return null;let n=un.fromString(r);return!n||!ia()||!n.validate(document.referrer,this.acceptedLinkReferrers)?null:n.clientId}catch{}return null}resolveParameters(t,...r){return v(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:n=[],addVisitorIdParameter:o=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[t]||{};return yield[p=>n.length>0?this.parseVariableArgumentsPayload(n,p):p[0],p=>v(this,void 0,void 0,function*(){return Object.assign(Object.assign({},p),{visitorId:o?yield this.getCurrentVisitorId():""})}),p=>v(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},p),{clientId:yield this.getCurrentVisitorId()}):p}),p=>a?this.ensureAnonymousUserWhenUsingApiKey(p):p,p=>this.beforeSendHooks.reduce((f,A)=>v(this,void 0,void 0,function*(){let C=yield f;return yield A(t,C)}),p)].reduce((p,f)=>v(this,void 0,void 0,function*(){let A=yield p;return yield f(A)}),Promise.resolve(r))})}resolvePayloadForParameters(t,r){return v(this,void 0,void 0,function*(){let{usesMeasurementProtocol:n=!1}=this.eventTypeMapping[t]||{};return yield[m=>this.setTrackingIdIfTrackingIdNotPresent(m),m=>this.removeEmptyPayloadValues(m,t),m=>this.validateParams(m,t),m=>n?$w(m):m,m=>n?this.removeUnknownParameters(m):m,m=>n?this.processCustomParameters(m):this.mapCustomParametersToCustomData(m)].reduce((m,d)=>v(this,void 0,void 0,function*(){let p=yield m;return yield d(p)}),Promise.resolve(r))})}makeEvent(t,...r){return v(this,void 0,void 0,function*(){let{newEventType:n=t}=this.eventTypeMapping[t]||{},o=yield this.resolveParameters(t,...r),a=yield this.resolvePayloadForParameters(t,o);return{eventType:n,payload:a,log:i=>v(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:n,payload:Object.assign(Object.assign({},a),i)}),yield Promise.all(this.afterSendHooks.map(s=>s(t,Object.assign(Object.assign({},o),i)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(t,...r){return v(this,void 0,void 0,function*(){return(yield this.makeEvent(t,...r)).log({})})}deferExecution(){return new Promise(t=>setTimeout(t,0))}sendFromBuffer(){return v(this,void 0,void 0,function*(){let t=this.bufferedRequests.shift();if(t){let{eventType:r,payload:n}=t;return this.runtime.getClientDependingOnEventType(r).sendEvent(r,n)}})}clear(){this.storage.removeItem("visitorId"),new ua().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(t){return v(this,void 0,void 0,function*(){return this.makeEvent(ie.search,t)})}sendSearchEvent(t){var{searchQueryUid:r}=t,n=Lr(t,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(n)).log({searchQueryUid:r})})}makeClickEvent(t){return v(this,void 0,void 0,function*(){return this.makeEvent(ie.click,t)})}sendClickEvent(t){var{searchQueryUid:r}=t,n=Lr(t,["searchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(n)).log({searchQueryUid:r})})}makeCustomEvent(t){return v(this,void 0,void 0,function*(){return this.makeEvent(ie.custom,t)})}sendCustomEvent(t){var{lastSearchQueryUid:r}=t,n=Lr(t,["lastSearchQueryUid"]);return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(n)).log({lastSearchQueryUid:r})})}makeViewEvent(t){return v(this,void 0,void 0,function*(){return this.makeEvent(ie.view,t)})}sendViewEvent(t){return v(this,void 0,void 0,function*(){return(yield this.makeViewEvent(t)).log({})})}getVisit(){return v(this,void 0,void 0,function*(){let r=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=r.visitorId,r})}getHealth(){return v(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(t){this.beforeSendHooks.push(t)}registerAfterSendEventHook(t){this.afterSendHooks.push(t)}addEventTypeMapping(t,r){this.eventTypeMapping[t]=r}setAcceptedLinkReferrers(t){if(Array.isArray(t)&&t.every(r=>typeof r=="string"))this.acceptedLinkReferrers=t;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(t,r){let n={};for(let o=0,a=r.length;o<a;o++){let i=r[o];if(typeof i=="string")n[t[o]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},n),i)}return n}isKeyAllowedEmpty(t,r){return({[ie.search]:["queryText"]}[t]||[]).indexOf(r)!==-1}removeEmptyPayloadValues(t,r){let n=o=>typeof o<"u"&&o!==null&&o!=="";return Object.keys(t).filter(o=>this.isKeyAllowedEmpty(r,o)||n(t[o])).reduce((o,a)=>Object.assign(Object.assign({},o),{[a]:t[a]}),{})}removeUnknownParameters(t){return Object.keys(t).filter(n=>{if(Ww(n))return!0;console.log(n,"is not processed by coveoua")}).reduce((n,o)=>Object.assign(Object.assign({},n),{[o]:t[o]}),{})}processCustomParameters(t){let{custom:r}=t,n=Lr(t,["custom"]),o={};r&&xu(r)&&(o=this.lowercaseKeys(r));let a=Yw(n);return Object.assign(Object.assign({},o),a)}mapCustomParametersToCustomData(t){let{custom:r}=t,n=Lr(t,["custom"]);if(r&&xu(r)){let o=this.lowercaseKeys(r);return Object.assign(Object.assign({},n),{customData:Object.assign(Object.assign({},o),t.customData)})}else return t}lowercaseKeys(t){let r=Object.keys(t),n={};return r.forEach(o=>{n[o.toLowerCase()]=t[o]}),n}validateParams(t,r){let{anonymizeIp:n}=t,o=Lr(t,["anonymizeIp"]);return n!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${n}`.toLowerCase())==-1&&(o.anonymizeIp=1),(r==ie.view||r==ie.click||r==ie.search||r==ie.custom)&&(o.originLevel3=this.limit(o.originLevel3,1024)),r==ie.view&&(o.location=this.limit(o.location,1024)),(r=="pageview"||r=="event")&&(o.referrer=this.limit(o.referrer,2048),o.location=this.limit(o.location,2048),o.page=this.limit(o.page,2048)),o}ensureAnonymousUserWhenUsingApiKey(t){let{userId:r}=t,n=Lr(t,["userId"]);return Zw(this.options.token)&&!r?(n.userId="anonymous",n):t}setTrackingIdIfTrackingIdNotPresent(t){let{trackingId:r}=t,n=Lr(t,["trackingId"]);return r?t:(n.hasOwnProperty("custom")&&xu(n.custom)&&(n.custom.hasOwnProperty("context_website")||n.custom.hasOwnProperty("siteName"))&&(n.trackingId=n.custom.context_website||n.custom.siteName),n.hasOwnProperty("customData")&&xu(n.customData)&&(n.customData.hasOwnProperty("context_website")||n.customData.hasOwnProperty("siteName"))&&(n.trackingId=n.customData.context_website||n.customData.siteName),n)}limit(t,r){return typeof t=="string"?sw(t,r):t}get baseUrl(){return nE(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Qr;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Qr||(Qr={}));var w;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"})(w||(w={}));var Bh={[w.triggerNotify]:"queryPipelineTriggers",[w.triggerExecute]:"queryPipelineTriggers",[w.triggerQuery]:"queryPipelineTriggers",[w.triggerRedirect]:"queryPipelineTriggers",[w.queryError]:"errors",[w.queryErrorBack]:"errors",[w.queryErrorClear]:"errors",[w.queryErrorRetry]:"errors",[w.pagerNext]:"getMoreResults",[w.pagerPrevious]:"getMoreResults",[w.pagerNumber]:"getMoreResults",[w.pagerResize]:"getMoreResults",[w.pagerScrolling]:"getMoreResults",[w.facetSearch]:"facet",[w.facetShowLess]:"facet",[w.facetShowMore]:"facet",[w.recommendation]:"recommendation",[w.likeSmartSnippet]:"smartSnippet",[w.dislikeSmartSnippet]:"smartSnippet",[w.expandSmartSnippet]:"smartSnippet",[w.collapseSmartSnippet]:"smartSnippet",[w.openSmartSnippetFeedbackModal]:"smartSnippet",[w.closeSmartSnippetFeedbackModal]:"smartSnippet",[w.sendSmartSnippetReason]:"smartSnippet",[w.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[w.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[w.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[w.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[w.clearRecentQueries]:"recentQueries",[w.recentResultClick]:"recentlyClickedDocuments",[w.clearRecentResults]:"recentlyClickedDocuments",[w.showLessFoldedResults]:"folding",[w.caseDetach]:"case",[w.likeGeneratedAnswer]:"generatedAnswer",[w.dislikeGeneratedAnswer]:"generatedAnswer",[w.openGeneratedAnswerSource]:"generatedAnswer",[w.generatedAnswerStreamEnd]:"generatedAnswer",[w.generatedAnswerSourceHover]:"generatedAnswer",[w.generatedAnswerCopyToClipboard]:"generatedAnswer",[w.generatedAnswerHideAnswers]:"generatedAnswer",[w.generatedAnswerShowAnswers]:"generatedAnswer",[w.generatedAnswerExpand]:"generatedAnswer",[w.generatedAnswerCollapse]:"generatedAnswer",[w.generatedAnswerFeedbackSubmit]:"generatedAnswer",[w.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Qr.expandToFullUI]:"interface",[Qr.openUserActions]:"User Actions",[Qr.showPrecedingSessions]:"User Actions",[Qr.showFollowingSessions]:"User Actions",[Qr.clickViewedDocument]:"User Actions",[Qr.clickPageView]:"User Actions",[Qr.createArticle]:"createArticle"},la=class{constructor(){this.runtime=new vu,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(t){return Promise.resolve({eventType:t,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(ie.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(ie.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(ie.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(ie.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return Kh}};function aE(e){let t="";return e.filter(r=>{let n=r!==t;return t=r,n})}function iE(e){return e.map(t=>t.replace(/;/g,""))}function ry(e){let r=e.join(";");return r.length<=256?r:ry(e.slice(1))}var Uh=e=>{let t=iE(e),r=aE(t);return ry(r)};function _h(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Uh(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Uh(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var da=class{constructor(t,r){this.opts=t,this.provider=r;let n=t.enableAnalytics===!1||Pu();this.coveoAnalyticsClient=n?new la:new Br(t)}disable(){this.coveoAnalyticsClient=new la}enable(){this.coveoAnalyticsClient=new Br(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(w.interfaceLoad)}logInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(w.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(w.recommendation)}logRecommendation(){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(t,r){return this.makeClickEvent(w.recommendationOpen,t,r)}logRecommendationOpen(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(t){return this.makeSearchEvent(w.staticFilterClearAll,t)}logStaticFilterClearAll(t){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(t){return this.makeSearchEvent(w.staticFilterSelect,t)}logStaticFilterSelect(t){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(t){return this.makeSearchEvent(w.staticFilterDeselect,t)}logStaticFilterDeselect(t){return v(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(w.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return v(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(t){return this.makeSearchEvent(w.interfaceChange,t)}logInterfaceChange(t){return v(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(t)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(w.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(w.didyoumeanClick)}logDidYouMeanClick(){return v(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(t){return this.makeSearchEvent(w.resultsSort,t)}logResultsSort(t){return v(this,void 0,void 0,function*(){return(yield this.makeResultsSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(w.searchboxSubmit)}logSearchboxSubmit(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(w.searchboxClear)}logSearchboxClear(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(w.searchboxAsYouType)}logSearchboxAsYouType(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(t){return this.makeSearchEvent(w.breadcrumbFacet,t)}logBreadcrumbFacet(t){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(t)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(w.breadcrumbResetAll)}logBreadcrumbResetAll(){return v(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(t,r){return this.makeClickEvent(w.documentQuickview,t,r)}logDocumentQuickview(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(t,r){return this.makeClickEvent(w.documentOpen,t,r)}logDocumentOpen(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(t){return this.makeSearchEvent(w.omniboxAnalytics,_h(t))}logOmniboxAnalytics(t){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(t){return this.makeSearchEvent(w.omniboxFromLink,_h(t))}logOmniboxFromLink(t){return v(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(w.searchFromLink)}logSearchFromLink(){return v(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(t){return this.makeCustomEvent(w.triggerNotify,t)}logTriggerNotify(t){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(t){return this.makeCustomEvent(w.triggerExecute,t)}logTriggerExecute(t){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(w.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(t){return this.makeSearchEvent(w.undoTriggerQuery,t)}logUndoTriggerQuery(t){return v(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(t)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(t){return this.makeCustomEvent(w.triggerRedirect,Object.assign(Object.assign({},t),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(t){return v(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(t){return this.makeCustomEvent(w.pagerResize,t)}logPagerResize(t){return v(this,void 0,void 0,function*(){return(yield this.makePagerResize(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(t){return this.makeCustomEvent(w.pagerNumber,t)}logPagerNumber(t){return v(this,void 0,void 0,function*(){return(yield this.makePagerNumber(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(t){return this.makeCustomEvent(w.pagerNext,t)}logPagerNext(t){return v(this,void 0,void 0,function*(){return(yield this.makePagerNext(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(t){return this.makeCustomEvent(w.pagerPrevious,t)}logPagerPrevious(t){return v(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(t)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(w.pagerScrolling)}logPagerScrolling(){return v(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(t){return this.makeSearchEvent(w.facetClearAll,t)}logFacetClearAll(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(t){return this.makeSearchEvent(w.facetSearch,t)}logFacetSearch(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(t){return this.makeSearchEvent(w.facetSelect,t)}logFacetSelect(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(t){return this.makeSearchEvent(w.facetDeselect,t)}logFacetDeselect(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(t){return this.makeSearchEvent(w.facetExclude,t)}logFacetExclude(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(t){return this.makeSearchEvent(w.facetUnexclude,t)}logFacetUnexclude(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(t){return this.makeSearchEvent(w.facetSelectAll,t)}logFacetSelectAll(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(t){return this.makeSearchEvent(w.facetUpdateSort,t)}logFacetUpdateSort(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(t){return this.makeCustomEvent(w.facetShowMore,t)}logFacetShowMore(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(t)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(t){return this.makeCustomEvent(w.facetShowLess,t)}logFacetShowLess(t){return v(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(t){return this.makeCustomEvent(w.queryError,t)}logQueryError(t){return v(this,void 0,void 0,function*(){return(yield this.makeQueryError(t)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return v(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(w.queryErrorBack);return{description:t.description,log:()=>v(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(w.queryErrorBack)})}})}logQueryErrorBack(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return v(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(w.queryErrorRetry);return{description:t.description,log:()=>v(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(w.queryErrorRetry)})}})}logQueryErrorRetry(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return v(this,void 0,void 0,function*(){let t=yield this.makeCustomEvent(w.queryErrorClear);return{description:t.description,log:()=>v(this,void 0,void 0,function*(){return yield t.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(w.queryErrorClear)})}})}logQueryErrorClear(){return v(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(w.likeSmartSnippet)}logLikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(w.dislikeSmartSnippet)}logDislikeSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(w.expandSmartSnippet)}logExpandSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(w.collapseSmartSnippet)}logCollapseSmartSnippet(){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(w.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(w.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return v(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(t,r){return this.makeCustomEvent(w.sendSmartSnippetReason,{reason:t,details:r})}logSmartSnippetFeedbackReason(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(t){return this.makeCustomEvent(w.expandSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logExpandSmartSnippetSuggestion(t){return v(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(t){return this.makeCustomEvent(w.collapseSmartSnippetSuggestion,"documentId"in t?t:{documentId:t})}logCollapseSmartSnippetSuggestion(t){return v(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(t){return this.makeCustomEvent(w.showMoreSmartSnippetSuggestion,t)}logShowMoreSmartSnippetSuggestion(t){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(t){return this.makeCustomEvent(w.showLessSmartSnippetSuggestion,t)}logShowLessSmartSnippetSuggestion(t){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(t,r){return this.makeClickEvent(w.openSmartSnippetSource,t,r)}logOpenSmartSnippetSource(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(t,r){return this.makeClickEvent(w.openSmartSnippetSuggestionSource,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}makeCopyToClipboard(t,r){return this.makeClickEvent(w.copyToClipboard,t,r)}logCopyToClipboard(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(t,r)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(t,r){return this.makeClickEvent(w.openSmartSnippetInlineLink,t,{contentIDKey:r.contentIDKey,contentIDValue:r.contentIDValue},r)}logOpenSmartSnippetInlineLink(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(t,r){return this.makeClickEvent(w.openSmartSnippetSuggestionInlineLink,t,{contentIDKey:r.documentId.contentIdKey,contentIDValue:r.documentId.contentIdValue},r)}logOpenSmartSnippetSuggestionInlineLink(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(w.recentQueryClick)}logRecentQueryClick(){return v(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(w.clearRecentQueries)}logClearRecentQueries(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(t,r){return this.makeCustomEvent(w.recentResultClick,{info:t,identifier:r})}logRecentResultClick(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(w.clearRecentResults)}logClearRecentResults(){return v(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(w.noResultsBack)}logNoResultsBack(){return v(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(t,r){return this.makeClickEvent(w.showMoreFoldedResults,t,r)}logShowMoreFoldedResults(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(w.showLessFoldedResults)}logShowLessFoldedResults(){return v(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(t,r){var n;return{actionCause:r,customData:(n=t.payload)===null||n===void 0?void 0:n.customData}}makeCustomEvent(t,r,n=Bh[t]){return v(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:n,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEvent(t,r,n=Bh[t]){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(t,r,n){return v(this,void 0,void 0,function*(){let o=Object.assign(Object.assign({},this.provider.getBaseMetadata()),n),a=Object.assign(Object.assign({},yield this.getBaseEventRequest(o)),{eventType:r,eventValue:t}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({lastSearchQueryUid:s})}})}logCustomEventWithType(t,r,n){return v(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(t,r,n)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(t,r){return v(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(t,r)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(t,r){return v(this,void 0,void 0,function*(){let n=yield this.getBaseSearchEventRequest(t,r),o=yield this.coveoAnalyticsClient.makeSearchEvent(n);return{description:this.makeEventDescription(o,t),log:({searchUID:a})=>o.log({searchQueryUid:a})}})}makeClickEvent(t,r,n,o){return v(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},r),yield this.getBaseEventRequest(Object.assign(Object.assign({},n),o))),{queryPipeline:this.provider.getPipeline(),actionCause:t}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,t),log:({searchUID:s})=>i.log({searchQueryUid:s})}})}logClickEvent(t,r,n,o){return v(this,void 0,void 0,function*(){return(yield this.makeClickEvent(t,r,n,o)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(t,r){var n,o;return v(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},r),(o=(n=this.provider).getGeneratedAnswerMetadata)===null||o===void 0?void 0:o.call(n)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:t})})}getBaseEventRequest(t){return v(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:r,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var t,r;return{originContext:(r=(t=this.provider).getOriginContext)===null||r===void 0?void 0:r.call(t),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Br?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let t=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",r=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},t&&{splitTestRunName:t}),r&&{splitTestRunVersion:r})}makeLikeGeneratedAnswer(t){return this.makeCustomEvent(w.likeGeneratedAnswer,t)}logLikeGeneratedAnswer(t){return v(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(t){return this.makeCustomEvent(w.dislikeGeneratedAnswer,t)}logDislikeGeneratedAnswer(t){return v(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(t){return this.makeCustomEvent(w.openGeneratedAnswerSource,t)}logOpenGeneratedAnswerSource(t){return v(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(t){return this.makeCustomEvent(w.generatedAnswerSourceHover,t)}logGeneratedAnswerSourceHover(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(t){return this.makeCustomEvent(w.generatedAnswerCopyToClipboard,t)}logGeneratedAnswerCopyToClipboard(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(t){return this.makeCustomEvent(w.generatedAnswerHideAnswers,t)}logGeneratedAnswerHideAnswers(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(t){return this.makeCustomEvent(w.generatedAnswerShowAnswers,t)}logGeneratedAnswerShowAnswers(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerExpand(t){return this.makeCustomEvent(w.generatedAnswerExpand,t)}logGeneratedAnswerExpand(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerExpand(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCollapse(t){return this.makeCustomEvent(w.generatedAnswerCollapse,t)}logGeneratedAnswerCollapse(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCollapse(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(t){return this.makeCustomEvent(w.generatedAnswerFeedbackSubmit,t)}logGeneratedAnswerFeedbackSubmit(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(t)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmitV2(t){return this.makeCustomEvent(w.generatedAnswerFeedbackSubmitV2,t)}logGeneratedAnswerFeedbackSubmitV2(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(t)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(t){return this.makeSearchEvent(w.rephraseGeneratedAnswer,t)}logRephraseGeneratedAnswer(t){return v(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(t)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(w.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return v(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(t){return this.makeCustomEvent(w.generatedAnswerStreamEnd,t)}logGeneratedAnswerStreamEnd(t){return v(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(t)).log({searchUID:this.provider.getSearchUID()})})}},wu=Object.assign({},Ts),jh=Object.keys(wu).map(e=>wu[e]),sa=class extends Tm{constructor({client:t,uuidGenerator:r=io}){super({client:t,uuidGenerator:r}),this.ticket={}}getApi(t){let r=super.getApi(t);if(r!==null)return r;switch(t){case"setTicket":return this.setTicket;default:return null}}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(t){this.ticket=t}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((t,...[r])=>jh.indexOf(t)!==-1?this.addSVCDataToPayload(t,r):r),this.client.registerAfterSendEventHook((t,...[r])=>(jh.indexOf(t)!==-1&&this.updateLocationInformation(t,r),r))}addHooksForPageView(){this.client.addEventTypeMapping(wu.pageview,{newEventType:ie.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(wu.event,{newEventType:ie.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(t,r){var n;let o=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(t,r)),this.getDefaultContextInformation(t)),this.action?{svcAction:this.action}:{}),Object.keys((n=this.actionData)!==null&&n!==void 0?n:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),o),r)}getTicketPayload(){return pw(this.ticket)}};sa.Id="svc";var Eu;(function(e){e.click="click",e.flowStart="flowStart"})(Eu||(Eu={}));var Ot;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Ot||(Ot={}));var Iu;(function(e){e.quit="Quit",e.solved="Solved"})(Iu||(Iu={}));var Tu=class{constructor(t,r){var n;this.options=t,this.provider=r;let o=((n=t.enableAnalytics)!==null&&n!==void 0?n:!0)&&!Pu();this.coveoAnalyticsClient=o?new Br(t):new la,this.svc=new sa({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient=new la,this.svc=new sa({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new Br(this.options),this.svc=new sa({client:this.coveoAnalyticsClient})}logEnterInterface(t){return this.svc.setAction(Ot.enterInterface),this.svc.setTicket(t.ticket),this.sendFlowStartEvent()}logUpdateCaseField(t){return this.svc.setAction(Ot.fieldUpdate,{fieldName:t.fieldName}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectFieldSuggestion(t){return this.svc.setAction(Ot.fieldSuggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(t){return this.svc.setAction(Ot.suggestionClick,t.suggestion),this.svc.setTicket(t.ticket),this.sendClickEvent()}logRateDocumentSuggestion(t){return this.svc.setAction(Ot.suggestionRate,Object.assign({rate:t.rating},t.suggestion)),this.svc.setTicket(t.ticket),this.sendClickEvent()}logMoveToNextCaseStep(t){return this.svc.setAction(Ot.nextCaseStep,{stage:t?.stage}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCancelled(t){return this.svc.setAction(Ot.caseCancelled,{reason:Iu.quit}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseSolved(t){return this.svc.setAction(Ot.caseSolved,{reason:Iu.solved}),this.svc.setTicket(t.ticket),this.sendClickEvent()}logCaseCreated(t){return this.svc.setAction(Ot.caseCreated),this.svc.setTicket(t.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Eu.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",Eu.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}};var ht=e=>new Br(e).getCurrentVisitorId(),yt=new Wh.HistoryStore,so=(e,t)=>typeof t=="function"?(...r)=>{let n=ls(r[0]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,co=(e,t)=>(...r)=>{let n=ls(r[1]);try{return t.apply(t,r)}catch(o){return e.error(o,"Error in analytics hook. Returning original request."),n}};var qs=class{constructor(t){this.state=t()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||ft()}},ny=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new qs(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Tu({enableAnalytics:c,token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:so(e,n),beforeSendHooks:[co(e,r),(m,d)=>(e.info({...d,type:m,endpoint:s,token:i},"Analytics request"),d)]},o);return c||l.disable(),l};var $t=(e,t)=>{let r=n=>n.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},Um=(e,t)=>e.facetSet[t]?.request;function sE(e,t){return!!t&&t.facetId in e.facetSet}var Ds=(e,t)=>{let r=$t(e,t);if(sE(e,r))return r},cE=(e,t)=>{let r=Ds(e,t);return r?r.values.filter(n=>n.state==="selected"):[]},oy=(e,t)=>{let r=Ds(e,t);return r?r.values.filter(n=>n.state!=="idle"):[]},Gt=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function ay(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find(o=>o.state==="selected");return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function Ye(e){let{activeValue:t,ancestryMap:r}=uE(e);return t?lE(t,r):[]}function uE(e){let t=[...e],r=new Map;for(;t.length>0;){let n=t.shift();if(n.state==="selected")return{activeValue:n,ancestryMap:r};if(r)for(let o of n.children)r.set(o,n);t.unshift(...n.children)}return{}}function lE(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}function dE(e,t){return!!t&&t.facetId in e.categoryFacetSet}var _m=(e,t)=>{let r=$t(e,t);if(dE(e,r))return r},jm=(e,t)=>e.categoryFacetSet[t]?.request,iy=(e,t)=>{let r=_m(e,t);return Ye(r?.values??[])},$m=(e,t)=>{let r=jm(e,t);return Ye(r?.currentValues??[])};var pa=(e,t)=>{let r=ly(t,e),n=r?r.field:"",o=zm(n,e);return{facetId:e,facetField:n,facetTitle:o}};function ma(e,t){let{facetId:r,facetValue:n}=e,o=pa(r,t),a=dy(t,r);return{...o,facetValue:a==="hierarchical"?uy(t,r):n}}function ct(e){return{facetSet:e.facetSet??nn(),categoryFacetSet:e.categoryFacetSet??rn(),dateFacetSet:e.dateFacetSet??on(),numericFacetSet:e.numericFacetSet??an(),automaticFacetSet:e.automaticFacetSet??tn()}}var Gm=e=>{let t=[];return fE(e).forEach((r,n)=>{let o=dy(e,r.facetId),a=CE(r,n+1);if(mE(r)){if(!!!$m(e,r.facetId).length)return;t.push({...a,...hE(e,r.facetId),facetType:o,state:"selected"});return}r.currentValues.forEach((i,s)=>{if(i.state==="idle")return;let u=sy(i,s+1,o),c=pE(r)?cy(i):SE(i);t.push({...a,...u,...c})})}),gE(e).forEach((r,n)=>{let o=yE(r,n+1);r.values.forEach((a,i)=>{if(a.state==="idle")return;let s=sy(a,i+1,"specific"),u=cy(a);t.push({...o,...s,...u})})}),t},pE=e=>e.type==="specific",mE=e=>e.type==="hierarchical",fE=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(t=>t.request),gE=e=>[...Object.values(e.automaticFacetSet.set)].map(t=>t.response),sy=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),SE=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),cy=e=>({displayValue:e.value,value:e.value}),uy=(e,t)=>$m(e,t).map(n=>n.value).join(";"),hE=(e,t)=>{let n=uy(e,t);return{value:n,valuePosition:1,displayValue:n}},yE=(e,t)=>({title:zm(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),CE=(e,t)=>({title:zm(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),zm=(e,t)=>`${e}_${t}`,ly=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,dy=(e,t)=>{let r=ly(e,t);return r?r.type:"specific"};var xE=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},uo=class{constructor(t){this.getState=t;this.state=t()}getLanguage(){return xE(this.state)}getBaseMetadata(){let{context:t,configuration:r}=this.state,n=t?.contextValues||{},o={};for(let[a,i]of Object.entries(n)){let s=`context_${a}`;o[s]=i}return r.analytics.analyticsMode==="legacy"&&(o.coveoHeadlessVersion=ao),o}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||ft()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var py=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var lo=class extends uo{constructor(){super(...arguments);this.initialState=py()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map(r=>({documentUri:r.documentUri,documentUriHash:r.documentUriHash,permanentid:r.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},my=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new lo(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new da({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:so(e,n),beforeSendHooks:[co(e,r),(m,d)=>(e.info({...d,type:m,endpoint:s,token:i},"Analytics request"),d)]},o);return c||l.disable(),l};var Vs=class Vs extends uo{constructor(){super(...arguments);this.getFacetRequest=r=>this.state.facetSet?.[r]?.request||this.state.categoryFacetSet?.[r]?.request||this.state.dateFacetSet?.[r]?.request||this.state.numericFacetSet?.[r]?.request||this.state.automaticFacetSet?.set[r]?.response}getFacetState(){return Gm(ct(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||Vs.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let r=this.getState();return r.search?.searchResponseId||r.search?.response.searchUid||je().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let r=!!this.getSplitTestRunName(),n=this.state.search?.response.pipeline||this.state.pipeline||Vs.fallbackPipelineName;return r?n:void 0}getBaseMetadata(){let r=this.getState(),n=super.getBaseMetadata(),o=r.search?.response?.extendedResults?.generativeQuestionAnsweringId;return o&&(n.generativeQuestionAnsweringId=o),n}getFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetValue:n,facetTitle:`${a}_${r}`}}getFacetClearAllMetadata(r){let o=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:o,facetTitle:`${o}_${r}`}}getFacetUpdateSortMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,criteria:n,facetTitle:`${a}_${r}`}}getRangeBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),facetId:r,facetField:a,facetRangeEnd:n.end,facetRangeEndInclusive:n.endInclusive,facetRangeStart:n.start,facetTitle:`${a}_${r}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??ze()}}getStaticFilterToggleMetadata(r,n){return{...this.getBaseMetadata(),staticFilterId:r,staticFilterValue:n}}getStaticFilterClearAllMetadata(r){return{...this.getBaseMetadata(),staticFilterId:r}}getUndoTriggerQueryMetadata(r){return{...this.getBaseMetadata(),undoneQuery:r}}getCategoryBreadcrumbFacetMetadata(r,n){let a=this.getFacetRequest(r)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:r,categoryFacetField:a,categoryFacetPath:n,categoryFacetTitle:`${a}_${r}`}}getOmniboxAnalyticsMetadata(r,n){let o=this.state.querySuggest&&this.state.querySuggest[r],a=o.completions.map(c=>c.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",u=o.responseId;return{...this.getBaseMetadata(),suggestionRanking:a.indexOf(n),partialQuery:s,partialQueries:o.partialQueries.length>0?o.partialQueries:"",suggestions:a.length>0?a:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(r){return{...this.getBaseMetadata(),...r}}getGeneratedAnswerMetadata(){let r=this.getState(),n={};return r.generatedAnswer?.isVisible!==void 0&&(n.showGeneratedAnswer=r.generatedAnswer.isVisible),n}get resultURIs(){return this.results?.map(r=>({documentUri:r.uri,documentUriHash:r.raw.urihash}))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||Ce().q}get responseTime(){return this.state.search?.duration||je().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||je().response.totalCountFiltered}};Vs.fallbackPipelineName="default";var Ct=Vs,fy=({logger:e,getState:t,analyticsClientMiddleware:r=(a,i)=>i,preprocessRequest:n,provider:o=new Ct(t)})=>{let a=t(),i=a.configuration.accessToken,s=a.configuration.analytics.apiBaseUrl,u=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new da({token:i,endpoint:s,runtimeEnvironment:u,preprocessRequest:so(e,n),beforeSendHooks:[co(e,r),(m,d)=>(e.info({...d,type:m,endpoint:s,token:i},"Analytics request"),d)]},o);return c||l.disable(),l},Hm=()=>{let t=yt.getHistory().reverse().find(r=>r.name==="PageView"&&r.value);return t?t.value:""};function ku(e){let t=gy(e),r=[e,...t].filter(o=>o.parentResult).map(o=>o.parentResult);return aS([e,...t,...r],o=>o.uniqueId)}function gy(e){return e.childResults?e.childResults.flatMap(t=>[t,...gy(t)]):[]}function Sy(e,t){return{...new Ct(t).getBaseMetadata(),actionCause:e,type:e}}function AE(e){return Object.assign(e,{instantlyCallable:!0})}function FE(e,t){let r=a=>AE(W(e,a)),n=r(async(a,{getState:i,extra:s})=>{let{analyticsClientMiddleware:u,preprocessRequest:c,logger:l}=s;return await(await t({getState:i,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})).log({state:i(),extra:s})});return Object.assign(n,{prepare:async({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u})=>{let{description:c,log:l}=await t({getState:a,analyticsClientMiddleware:i,preprocessRequest:s,logger:u});return{description:c,action:r(async(m,{getState:d,extra:p})=>await l({state:d(),extra:p}))}}}),n}var Wm=(e,t,r)=>{function n(...o){let a=o.length===1?{...o[0],__legacy__getBuilder:t(o[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:o[0],__legacy__getBuilder:t(o[1]),__legacy__provider:o[2],analyticsConfigurator:e,providerClass:r};return vE(a)}return n},RE=e=>e.configuration.analytics.analyticsMode==="legacy",bE=e=>e.configuration.analytics.analyticsMode==="next",vE=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:o,analyticsConfigurator:a,providerClass:i})=>(r??(r=s=>new i(s)),FE(e,async({getState:s,analyticsClientMiddleware:u,preprocessRequest:c,logger:l})=>{let m=[],d={log:async({state:y})=>{for(let g of m)await g(y)}},p=s(),f=a({getState:s,logger:l,analyticsClientMiddleware:u,preprocessRequest:c,provider:r(s)}),A=await t(f,s());d.description=A?.description,m.push(async y=>{RE(y)&&await PE(A,r,y,l,f.coveoAnalyticsClient)});let{emit:C}=aa(p);return m.push(async y=>{if(bE(y)&&o&&n){let g=n(y);await DE(C,o,g)}}),d}));async function PE(e,t,r,n,o){t(()=>r);let a=await e?.log({searchUID:t(()=>r).getSearchUID()});n.info({client:o,response:a},"Analytics response")}var wE=e=>r=>(n,o)=>Promise.resolve({description:{actionCause:e},log:async a=>{r(n,o)}}),D=Wm(fy,e=>e,Ct),PU=Wm(ny,wE("caseAssist"),qs);var hy=Wm(my,e=>e,lo);var be=(e,t)=>{let r=a=>a+(t.pagination?.firstResult??0),n=-1,o=t.search?.results;return n=Cy(e,o),n<0&&(n=qE(e,o)),n<0&&(n=0),EE(e,r(n),t)};function EE(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:kE(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:OE(e),queryPipeline:r.pipeline||Qt()}}var ve=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),yy={urihash:new E,sourcetype:new E,permanentid:new E},Ns={uniqueId:k,raw:new q({values:yy}),title:k,uri:k,clickUri:k,rankingModifier:new E({required:!1,emptyAllowed:!0})};function IE(e){return Object.assign({},...Object.keys(yy).map(t=>({[t]:e[t]})))}function TE(e){return Object.assign({},...Object.keys(Ns).map(t=>({[t]:e[t]})),{raw:IE(e.raw)})}function kE(e){let t=e.raw.author;return H(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function OE(e){let t=e.raw.source;return H(t)?"unknown":t}var Ke=e=>new Z(Ns).validate(TE(e));function qE(e,t){for(let[r,n]of t.entries()){let o=ku(n);if(Cy(e,o)!==-1)return r}return-1}function Cy(e,t=[]){return t.findIndex(({uniqueId:r})=>r===e.uniqueId)}async function DE(e,t,r){await e(t,r)}var Ym=e=>F(e,{evt:k,type:le}),xy=e=>D("analytics/generic/search",t=>{Ym(e);let{evt:r,meta:n}=e;return t.makeSearchEvent(r,n)}),Ay=e=>D("analytics/generic/click",(t,r)=>(Ke(e.result),Ym(e),t.makeClickEvent(e.evt,be(e.result,r),ve(e.result),e.meta))),Fy=e=>D("analytics/generic/custom",t=>(Ym(e),t.makeCustomEventWithType(e.evt,e.type,e.meta))),Ou=()=>D("analytics/interface/load",e=>e.makeInterfaceLoad()),ln=()=>D("analytics/interface/change",(e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2})),qu=()=>D("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),Du=e=>D("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),Ry=()=>({actionCause:"interfaceLoad"}),fa=()=>({actionCause:"interfaceChange"}),by=()=>({actionCause:"searchFromLink"}),vy=()=>({actionCause:"omniboxFromLink"});var Km=()=>le,Py=()=>k,zt=S("configuration/updateBasicConfiguration",e=>F(e,{accessToken:le,organizationId:le,platformUrl:le})),xt=S("configuration/updateSearchConfiguration",e=>F(e,{apiBaseUrl:le,pipeline:new E({required:!1,emptyAllowed:!0}),searchHub:le,timezone:le,locale:le,authenticationProviders:new J({required:!1,each:k})})),Ms={enabled:new G({default:!0}),originContext:Km(),originLevel2:Km(),originLevel3:Km(),apiBaseUrl:le,nextApiBaseUrl:le,runtimeEnvironment:new fe,anonymous:new G({default:!1}),deviceId:le,userDisplayName:le,documentLocation:le,trackingId:le,analyticsMode:new E({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new q({options:{required:!1},values:Th.reduce((e,t)=>(e[t]=bh,e),{})})},dn=S("configuration/updateAnalyticsConfiguration",e=>F(e,Ms)),ga=S("configuration/analytics/disable"),Sa=S("configuration/analytics/enable"),Vu=S("configuration/analytics/originlevel2",e=>F(e,{originLevel2:Py()})),Nu=S("configuration/analytics/originlevel3",e=>F(e,{originLevel3:Py()}));var Mu={q:new E,enableQuerySyntax:new G,aq:new E,cq:new E,firstResult:new B({min:0}),numberOfResults:new B({min:0}),sortCriteria:new E,f:new q,fExcluded:new q,cf:new q,nf:new q,mnf:new q,df:new q,debug:new G,sf:new q,tab:new E,af:new q};var de=S("searchParameters/restore",e=>F(e,Mu));var pn=S("debug/enable"),ha=S("debug/disable");var ya=j(Lt(),e=>{e.addCase(pn,()=>!0).addCase(ha,()=>!1).addCase(de,(t,r)=>r.payload.debug??t)});var Jm=S("history/undo"),Xm=S("history/redo"),ut=S("history/snapshot"),Ls=W("history/back",async(e,{dispatch:t})=>{t(Jm()),await t(ce())}),Lu=W("history/forward",async(e,{dispatch:t})=>{t(Xm()),await t(ce())}),ce=W("history/change",async(e,{getState:t})=>t().history.present);var Ca=S("pipeline/set",e=>F(e,new E({required:!0,emptyAllowed:!0})));var xa=j(Qt(),e=>{e.addCase(Ca,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>r.payload?.pipeline??t).addCase(xt,(t,r)=>r.payload.pipeline||t)});var Aa=S("searchHub/set",e=>F(e,new E({required:!0,emptyAllowed:!0})));var Fa=j(ft(),e=>{e.addCase(Aa,(t,r)=>r.payload).addCase(ce.fulfilled,(t,r)=>r.payload?.searchHub??t).addCase(xt,(t,r)=>r.payload.searchHub||t)});var xe=S("breadcrumb/deselectAll"),Ht=S("breadcrumb/deselectAllNonBreadcrumbs");var At=S("facet/updateFacetAutoSelection",e=>F(e,{allow:new G({required:!0})}));var Qs=class extends Ct{constructor(r){super(r);this.getState=r}get activeInstantResultQuery(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].q;return null}get activeInstantResultCache(){let r=this.getState().instantResults;for(let n in r)for(let o in r[n].cache)if(r[n].cache[o].isActive)return r[n].cache[o];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??Ce().q}get responseTime(){return this.activeInstantResultCache?.duration??je().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??je().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var wy=e=>D({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(Ke(e),t.makeDocumentOpen(be(e,r),ve(e))),__legacy__provider:t=>new Qs(t),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=be(e,t),n=ve(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,actionCause:"open",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),Ey=()=>D("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new Qs(e)),Iy=()=>({actionCause:"searchboxAsYouType"});var Zm={id:k},VE={...Zm,q:pe},Ra=S("instantResults/register",e=>F(e,Zm)),Wt=S("instantResults/updateQuery",e=>F(e,VE)),ba=S("instantResults/clearExpired",e=>F(e,Zm));var Qu=new B({required:!0,min:0}),va=S("pagination/registerNumberOfResults",e=>F(e,Qu)),Pa=S("pagination/updateNumberOfResults",e=>F(e,Qu)),wa=S("pagination/registerPage",e=>F(e,Qu)),Ft=S("pagination/updatePage",e=>F(e,Qu)),Ea=S("pagination/nextPage"),Ia=S("pagination/previousPage");var Me=S("query/updateQuery",e=>F(e,{q:new E,enableQuerySyntax:new G}));var Ta=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:new Date().toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:jt(e)}});var ka=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:t.clientId},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&Ta(e.configuration.analytics,t,r),...e.excerptLength&&!H(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Oa=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await ht(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...Hm()&&{pageId:Hm()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:jt(e)}}}};var mn=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await ht(e.configuration.analytics),actionsHistory:yt.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await Oa(e.configuration.analytics,t),...e.excerptLength&&!H(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var ef=()=>D("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),Yt=e=>D("search/queryError",(t,r)=>t.makeQueryError({query:r.query?.q||Ce().q,aq:r.advancedSearchQueries?.aq||nt().aq,cq:r.advancedSearchQueries?.cq||nt().cq,dq:r.advancedSearchQueries?.dq||nt().dq,errorType:e.type,errorMessage:e.message}));var _s=$e(qc()),Dy=$e(Ty());var Bu=$e(qc()),Oy=$e(ky());Bu.default.extend(Oy.default);var Bs="YYYY/MM/DD@HH:mm:ss",NE="1401-01-01";function po(e,t){let r=(0,Bu.default)(e,t);return!r.isValid()&&!t?(0,Bu.default)(e,Bs):r}function Us(e){return e.format(Bs)}function qy(e){return Us(po(e))===e}function Uu(e,t){let r=po(e,t);if(!r.isValid()){let n=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",o=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?o:n}`)}af(r)}function af(e){if(e.isBefore(NE))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}_s.default.extend(Dy.default);var Vy=["past","now","next"],Ny=["minute","hour","day","week","month","quarter","year"],ME=e=>{let t=e==="now";return{amount:new B({required:!t,min:1}),unit:new E({required:!t,constrainTo:Ny}),period:new E({required:!0,constrainTo:Vy})}};function mo(e){if(typeof e=="string"&&!Kt(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?sf(e):e;new Z(ME(t.period)).validate(t);let r=Ly(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);af(r)}function My(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function Ly(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,_s.default)().subtract(r,n);case"next":return(0,_s.default)().add(r,n);case"now":return(0,_s.default)()}}function js(e){return Us(Ly(sf(e)))}function Qy(e){return e.toLocaleLowerCase().split("-")}function Kt(e){let[t,r,n]=Qy(e);if(t==="now")return!0;if(!Vy.includes(t)||!Ny.includes(n))return!1;let o=parseInt(r);return!(isNaN(o)||o<=0)}function By(e){return!!e&&typeof e=="object"&&"period"in e}function sf(e){let[t,r,n]=Qy(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function LE(e){return mo(e),sf(e)}function Uy(e){return e.type==="dateRange"}function _y(e){return`start${e}`}function jy(e){return`end${e}`}var cf=()=>({dateFacetValueMap:{}});function QE(e,t,r){let n=e.start,o=e.end;return Kt(n)&&(n=js(n),r.dateFacetValueMap[t][_y(n)]=e.start),Kt(o)&&(o=js(o),r.dateFacetValueMap[t][jy(o)]=e.end),{...e,start:n,end:o}}function uf(e,t){if(Uy(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(o=>QE(o,r,t))}}return e}function fn(e){let t=cf();return{request:{...e,facets:e.facets?.map(n=>uf(n,t))},mappings:t}}function BE(e,t,r){return{...e,start:r.dateFacetValueMap[t][_y(e.start)]||e.start,end:r.dateFacetValueMap[t][jy(e.end)]||e.end}}function UE(e,t){return e.facetId in t.dateFacetValueMap}function _E(e,t){return UE(e,t)?{...e,values:e.values.map(r=>BE(r,e.facetId,t))}:e}function _u(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map(n=>_E(n,t))}}:e}var qa=S("didYouMean/enable"),ju=S("didYouMean/disable"),Da=S("didYouMean/automaticCorrections/disable"),$u=S("didYouMean/automaticCorrections/enable"),Rt=S("didYouMean/correction",e=>F(e,k)),Va=S("didYouMean/automaticCorrections/mode",e=>F(e,new E({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0})));var Gu=()=>D("analytics/didyoumean/click",e=>e.makeDidYouMeanClick()),lf=()=>D("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),$y=()=>({actionCause:"didYouMeanClick"}),Gy=()=>({actionCause:"didYouMeanAutomatic"});var jE=new q({values:{undoneQuery:pe},options:{required:!0}}),zu=()=>D("analytics/trigger/query",(e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null),Hu=e=>D("analytics/trigger/query/undo",t=>(F(e,jE),t.makeUndoTriggerQuery(e))),Wu=()=>D("analytics/trigger/notify",(e,t)=>t.triggers?.notifications.length?e.makeTriggerNotify({notifications:t.triggers.notifications}):null),Yu=()=>D("analytics/trigger/redirect",(e,t)=>t.triggers?.redirectTo?e.makeTriggerRedirect({redirectedTo:t.triggers.redirectTo}):null),Ku=()=>D("analytics/trigger/execute",(e,t)=>t.triggers?.executions.length?e.makeTriggerExecute({executions:t.triggers.executions}):null),zy=()=>({actionCause:"undoQuery"});var gn=S("trigger/query/ignore",e=>F(e,new E({emptyAllowed:!0,required:!0}))),Na=S("trigger/query/modification",e=>F(e,new q({values:{originalQuery:le,modification:le}})));function lt(e){return Object.values(e).map(t=>t.request)}function fo(e,t){let r={};e.forEach(a=>r[a.facetId]=a);let n=[];t.forEach(a=>{a in r&&(n.push(r[a]),delete r[a])});let o=Object.values(r);return[...n,...o]}function Hy(e){return lt(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}function $E(e){return lt(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function GE(e){return[...$E(e.facetSet??{}),...Hy(e.numericFacetSet??{}),...Hy(e.dateFacetSet??{}),...lt(e.categoryFacetSet??{})]}function zE(e){return GE(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function Ju(e){return fo(zE(e),e.facetOrder??[])}var Sn=async(e,t)=>{let r=YE(e),n=Ju(e),o=HE(e),a=await mn(e,t),i=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return fn({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:i(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:o}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function HE(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(WE).filter(r=>r.currentValues.length>0):void 0}function WE(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function YE(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=KE(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}function KE(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var hn=class{constructor(t,r=n=>{this.dispatch(Me({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=_u(await this.extra.apiClient.search(r,n),t),i=new Date().getTime()-o,s=this.getState().query?.q||"";return{response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=n;if(!o||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!H(u)&&!H(u.correctedQuery);if(!c&&!l)return null;let d=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(ut(kt(this.getState()))),d}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Yt(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(t),this.dispatch(ut(kt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r,analyticsAction:lf()})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o,analyticsAction:lf()}}logOriginalAnalyticsQueryBeforeAutoCorrection(t){let r=this.getState(),n=this.getSuccessResponse(t);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(t.queryExecuted,t.duration,r,n),this.extra)}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(s=>s.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(gn("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(n);return Ee(i.response)?(this.dispatch(Yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ut(kt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a,analyticsAction:zu()})}getStateAfterResponse(t,r,n,o){return{...n,query:{q:t,enableQuerySyntax:n.query?.enableQuerySyntax??Ce().enableQuerySyntax},search:{...je(),duration:r,response:o,results:o.results}}}processSuccessResponse(t){return this.dispatch(ut(kt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(t){return hu(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=await this.fetchFromAPI(await Sn(this.getState()),{origin:"mainSearch"});return this.dispatch(Rt(t)),r}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Na({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await Sn(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};var U1=W("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;F(e,{q:new E,enableQuerySyntax:new G,clearFilters:new G}),e.clearFilters&&(r(xe()),r(Ht())),r(At({allow:!0})),r(Me({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Ft(1))}),Ma=W("search/executeSearch",async(e,t)=>{let r=t.getState();return await Zu(r,t,e)}),La=W("search/fetchPage",async(e,t)=>{let r=t.getState();return await pf(r,t,e)}),Qa=W("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await mf(t,r)}),Xu=W("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await eI(t,e,r)}),Wy=W("search/fetchInstantResults",async(e,t)=>df(e,t)),JE=async(e,t)=>{let r=await Sn(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},XE=async(e,t,r)=>{let n=await mn(e);return fn({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},ZE=async(e,t)=>{let r=await Sn(e,t);return r.request.numberOfResults=0,r},Yy=e=>{e.configuration.analytics.enabled&&yt.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function df(e,t){F(e,{id:k,q:k,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B});let{q:r,maxResultsPerQuery:n}=e,o=t.getState(),a=new hn({...t,analyticsAction:Ey()},c=>{t.dispatch(Wt({q:c,id:e.id}))}),i=await XE(o,r,n),s=await a.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),u=await a.process(s);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,analyticsAction:u.analyticsAction,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}async function pf(e,t,r){Yy(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=new hn({...t,analyticsAction:r}),u=await Sn(e,i),c=await s.fetchFromAPI(u,{origin:"mainSearch"});return await s.process(c)}async function mf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:o}=e.extra,{description:a}=await ef().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:o}),i=new hn({...e,analyticsAction:ef()}),s=await JE(t,a),u=await i.fetchFromAPI(s,{origin:"mainSearch"});return await i.process(u)}async function eI(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=e.extra,{description:i}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=new hn({...e,analyticsAction:t}),u=await ZE(r,i),c=await s.fetchFromAPI(u,{origin:"facetValues"});return await s.process(c)}async function Zu(e,t,r){Yy(e);let{analyticsClientMiddleware:n,preprocessRequest:o,logger:a}=t.extra,{description:i}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:o,logger:a}),s=await Sn(e,i),u=new hn({...t,analyticsAction:r}),c=await u.fetchFromAPI(s,{origin:"mainSearch"});return await u.process(c)}var bt=async(e,t,r)=>{let n=sI(e),o=tI(e),a=rI(e),i=e.configuration.analytics.analyticsMode==="legacy"?await mn(e,r):ka(e,t,r),s=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return fn({...i,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...o.length&&{facets:o},...e.pagination&&{numberOfResults:s(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function tI(e){return fo(oI(e),e.facetOrder??[])}function rI(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map(r=>r.response).map(nI).filter(r=>r.currentValues.length>0):void 0}function nI(e){let{field:t,label:r,values:n}=e,o=n.filter(a=>a.state==="selected");return{field:t,label:r,currentValues:o}}function oI(e){return aI(e).filter(({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0)}function aI(e){return[...iI(e.facetSet??{}),...Ky(e.numericFacetSet??{}),...Ky(e.dateFacetSet??{}),...lt(e.categoryFacetSet??{})]}function iI(e){return lt(e).map(t=>t.sortCriteria==="alphanumericDescending"?{...t,sortCriteria:{type:"alphanumeric",order:"descending"}}:t)}function Ky(e){return lt(e).map(t=>{let n=t.currentValues.some(({state:o})=>o!=="idle");return t.generateAutomaticRanges&&!n?{...t,currentValues:[]}:t})}function sI(e){let t=e.advancedSearchQueries?.cq.trim()||"",n=Object.values(e.tabSet||{}).find(a=>a.isActive)?.expression.trim()||"",o=cI(e);return[t,n,...o].filter(a=>!!a).join(" AND ")}function cI(e){return Object.values(e.staticFilterSet||{}).map(r=>{let n=r.values.filter(a=>a.state==="selected"&&!!a.expression.trim()),o=n.map(a=>a.expression).join(" OR ");return n.length>1?`(${o})`:o})}var yn=class{constructor(t,r=n=>{this.dispatch(Me({q:n}))}){this.config=t;this.onUpdateQueryForCorrection=r}async fetchFromAPI({mappings:t,request:r},n){let o=new Date().getTime(),a=_u(await this.extra.apiClient.search(r,n),t),i=new Date().getTime()-o,s=this.getState().query?.q||"";return{response:a,duration:i,queryExecuted:s,requestExecuted:r}}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}processQueryErrorOrContinue(t){return Ee(t.response)?(this.dispatch(Yt(t.response.error)),this.rejectWithValue(t.response.error)):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{enableDidYouMean:o,automaticallyCorrectQuery:a}=r.didYouMean,{results:i,queryCorrections:s,queryCorrection:u}=n;if(!o||!a)return null;let c=i.length===0&&s&&s.length!==0,l=!H(u)&&!H(u.correctedQuery);if(!c&&!l)return null;let d=c?await this.processLegacyDidYouMeanAutoCorrection(t):this.processModernDidYouMeanAutoCorrection(t);return this.dispatch(ut(kt(this.getState()))),d}async processLegacyDidYouMeanAutoCorrection(t){let r=this.getCurrentQuery(),n=this.getSuccessResponse(t);if(!n.queryCorrections)return null;let{correctedQuery:o}=n.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(o);return Ee(a.response)?(this.dispatch(Yt(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(ut(kt(this.getState()))),{...a,response:{...a.response.success,queryCorrections:n.queryCorrections},automaticallyCorrected:!0,originalQuery:r})}processModernDidYouMeanAutoCorrection(t){let r=this.getSuccessResponse(t),{correctedQuery:n,originalQuery:o}=r.queryCorrection;return this.onUpdateQueryForCorrection(n),{...t,response:{...r},queryExecuted:n,automaticallyCorrected:!0,originalQuery:o}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(s=>s.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(gn("")),null;let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(n);return Ee(i.response)?(this.dispatch(Yt(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(ut(kt(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:a})}processSuccessResponse(t){return this.dispatch(ut(kt(this.getState()))),{...t,response:this.getSuccessResponse(t),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(t){return hu(t.response)?t.response.success:null}async automaticallyRetryQueryWithCorrection(t){this.onUpdateQueryForCorrection(t);let r=this.getState(),{actionCause:n}=Gy(),o=await this.fetchFromAPI(await bt(r,this.extra.navigatorContext,{actionCause:n}),{origin:"mainSearch"});return this.dispatch(Rt(t)),o}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Na({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI(await bt(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let t=this.getState();return t.query?.q!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var Ba=W("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;F(e,{q:new E,enableQuerySyntax:new G,clearFilters:new G}),e.clearFilters&&(r(xe()),r(Ht())),r(At({allow:!0})),r(Me({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(Ft(1))}),T=W("search/executeSearch",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Zu(r,t,e.legacy);Jy(r);let n=e.next?Xy(e.next):void 0,o=await bt(r,t.extra.navigatorContext,n),a=new yn({...t,analyticsAction:n??{}}),i=await a.fetchFromAPI(o,{origin:"mainSearch"});return await a.process(i)}),Xt=W("search/fetchPage",async(e,t)=>{let r=t.getState();if(Jy(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return pf(r,t,e.legacy);let n=new yn({...t,analyticsAction:e.next}),o=await bt(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(o,{origin:"mainSearch"});return await n.process(a)}),Cn=W("search/fetchMoreResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return mf(t,r);let n=Sy("browseResults",t.getState),o=new yn({...t,analyticsAction:n}),a=await uI(r,t.extra.navigatorContext,n),i=await o.fetchFromAPI(a,{origin:"mainSearch"});return await o.process(i)}),Zt=W("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Zu(r,t,e.legacy);let n=new yn({...t,analyticsAction:{}}),o=await dI(r,t.extra.navigatorContext),a=await n.fetchFromAPI(o,{origin:"facetValues"});return await n.process(a)}),Ua=W("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return df(e,t);F(e,{id:k,q:k,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B});let{q:n,maxResultsPerQuery:o}=e,a=Xy(Iy()),i=await lI(r,t.extra.navigatorContext,n,o,a),s=new yn({...t,analyticsAction:a},l=>{t.dispatch(Wt({q:l,id:e.id}))}),u=await s.fetchFromAPI(i,{origin:"instantResults",disableAbortWarning:!0}),c=await s.process(u);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c}),uI=async(e,t,r)=>{let n=await bt(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},lI=async(e,t,r,n,o)=>{let a=ka(e,t,o);return fn({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},dI=async(e,t,r)=>{let n=await bt(e,t,r);return n.request.numberOfResults=0,n},Jy=e=>{e.configuration.analytics.enabled&&yt.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},Xy=e=>({actionCause:e.actionCause,type:e.actionCause});var xn=(e,t)=>{let r=e;return H(r[t])?H(e.raw[t])?null:e.raw[t]:r[t]},pI=e=>t=>e.every(r=>!H(xn(t,r))),mI=e=>t=>e.every(r=>H(xn(t,r))),fI=(e,t)=>r=>{let n=Zy(e,r);return t.some(o=>n.some(a=>`${a}`.toLowerCase()===o.toLowerCase()))},gI=(e,t)=>r=>{let n=Zy(e,r);return t.every(o=>n.every(a=>`${a}`.toLowerCase()!==o.toLowerCase()))},Zy=(e,t)=>{let r=xn(t,e);return Vc(r)?r:[r]},SI={getResultProperty:xn,fieldsMustBeDefined:pI,fieldsMustNotBeDefined:mI,fieldMustMatch:fI,fieldMustNotMatch:gI};function $s(e){return e.search.response.searchUid!==""}function eC(e,t,r){return e.search.results.find(n=>xn(n,t)===r)}function ff(e,t){let r=t.payload??null;r&&(e.response=je().response,e.results=[],e.questionAnswer=Jo()),e.error=r,e.isLoading=!1}function Sf(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function hI(e,t){Sf(e,t),e.results=t.payload.response.results.map(r=>({...r,searchUid:t.payload.response.searchUid})),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function gf(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var X=j(je(),e=>{e.addCase(Ma.rejected,(t,r)=>ff(t,r)),e.addCase(Qa.rejected,(t,r)=>ff(t,r)),e.addCase(La.rejected,(t,r)=>ff(t,r)),e.addCase(Ma.fulfilled,(t,r)=>{hI(t,r)}),e.addCase(Qa.fulfilled,(t,r)=>{Sf(t,r),t.results=[...t.results,...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(La.fulfilled,(t,r)=>{Sf(t,r),t.results=[...r.payload.response.results.map(n=>({...n,searchUid:r.payload.response.searchUid}))]}),e.addCase(Xu.fulfilled,(t,r)=>{t.response.facets=r.payload.response.facets,t.response.searchUid=r.payload.response.searchUid}),e.addCase(Ma.pending,gf),e.addCase(Qa.pending,gf),e.addCase(La.pending,gf)});var Gs=re(e=>e.query,e=>e);var Xe=e=>CI(e)?{answerAPIEnabled:!0,id:zs(e).data?.answerId}:yI(e)?{answerAPIEnabled:!1,id:e.search.response.extendedResults.generativeQuestionAnsweringId}:{answerAPIEnabled:!1,id:void 0},yI=e=>"search"in e,CI=e=>"answer"in e&&"generatedAnswer"in e&&!H(e.generatedAnswer?.answerConfigurationId),tC=e=>e.generatedAnswer?.fieldsToIncludeInCitations,hf=re(e=>e.generatedAnswer?.citations,(e,t)=>t,(e,t)=>e?.find(r=>r.id===t)),eG=re(e=>Gs(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t}));var rC=re(e=>e.pipeline,e=>e);var nC=re(e=>e.searchHub,e=>e);function xI(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var oC=Bt;function yC(e,t){if(e===t||!(oC(e)&&oC(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),o=r.length===n.length,a=Array.isArray(t)?[]:{};for(let i of r)a[i]=yC(e[i],t[i]),o&&(o=e[i]===a[i]);return o?e:a}function _a(e){let t=0;for(let r in e)t++;return t}var aC=e=>[].concat(...e);function AI(e){return new RegExp("(^|:)//").test(e)}function FI(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function iC(e){return e!=null}function RI(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var bI=e=>e.replace(/\/$/,""),vI=e=>e.replace(/^\//,"");function PI(e,t){if(!e)return t;if(!t)return e;if(AI(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=bI(e),t=vI(t),`${e}${r}${t}`}var sC=(...e)=>fetch(...e),wI=e=>e.status>=200&&e.status<=299,EI=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function cC(e){if(!Bt(e))return e;let t={...e};for(let[r,n]of Object.entries(t))n===void 0&&delete t[r];return t}function CC({baseUrl:e,prepareHeaders:t=m=>m,fetchFn:r=sC,paramsSerializer:n,isJsonContentType:o=EI,jsonContentType:a="application/json",jsonReplacer:i,timeout:s,responseHandler:u,validateStatus:c,...l}={}){return typeof fetch>"u"&&r===sC&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(d,p)=>{let{signal:f,getState:A,extra:C,endpoint:y,forced:g,type:h}=p,x,{url:R,headers:P=new Headers(l.headers),params:b=void 0,responseHandler:I=u??"json",validateStatus:N=c??wI,timeout:$=s,...ee}=typeof d=="string"?{url:d}:d,V={...l,signal:f,...ee};P=new Headers(cC(P)),V.headers=await t(P,{getState:A,extra:C,endpoint:y,forced:g,type:h})||P;let L=ae=>typeof ae=="object"&&(Bt(ae)||Array.isArray(ae)||typeof ae.toJSON=="function");if(!V.headers.has("content-type")&&L(V.body)&&V.headers.set("content-type",a),L(V.body)&&o(V.headers)&&(V.body=JSON.stringify(V.body,i)),b){let ae=~R.indexOf("?")?"&":"?",ue=n?n(b):new URLSearchParams(cC(b));R+=ae+ue}R=PI(e,R);let M=new Request(R,V);x={request:new Request(R,V)};let Q,Y=!1,z=$&&setTimeout(()=>{Y=!0,p.abort()},$);try{Q=await r(M)}catch(ae){return{error:{status:Y?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(ae)},meta:x}}finally{z&&clearTimeout(z)}let oe=Q.clone();x.response=oe;let se,me="";try{let ae;if(await Promise.all([m(Q,I).then(ue=>se=ue,ue=>ae=ue),oe.text().then(ue=>me=ue,()=>{})]),ae)throw ae}catch(ae){return{error:{status:"PARSING_ERROR",originalStatus:Q.status,data:me,error:String(ae)},meta:x}}return N(Q,se)?{data:se,meta:x}:{error:{status:Q.status,data:se},meta:x}};async function m(d,p){if(typeof p=="function")return p(d);if(p==="content-type"&&(p=o(d.headers)?"json":"text"),p==="json"){let f=await d.text();return f.length?JSON.parse(f):null}return d.text()}}var ja=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function II(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise(o=>setTimeout(a=>o(a),n))}function TI(e){throw Object.assign(new ja({error:e}),{throwImmediately:!0})}var uC={},kI=(e,t)=>async(r,n,o)=>{let a=[5,(t||uC).maxRetries,(o||uC).maxRetries].filter(l=>l!==void 0),[i]=a.slice(-1),u={maxRetries:i,backoff:II,retryCondition:(l,m,{attempt:d})=>d<=i,...t,...o},c=0;for(;;)try{let l=await e(r,n,o);if(l.error)throw new ja(l);return l}catch(l){if(c++,l.throwImmediately){if(l instanceof ja)return l.value;throw l}if(l instanceof ja&&!u.retryCondition(l.value.error,r,{attempt:c,baseQueryApi:n,extraOptions:o}))return l.value;await u.backoff(c,u.maxRetries)}},xC=Object.assign(kI,{fail:TI}),Af=S("__rtkq/focused"),AC=S("__rtkq/unfocused"),Ff=S("__rtkq/online"),FC=S("__rtkq/offline");function RC(e){return e.type==="query"}function OI(e){return e.type==="mutation"}function Rf(e,t,r,n,o,a){return qI(e)?e(t,r,n,o).map(Cf).map(a):Array.isArray(e)?e.map(Cf).map(a):[]}function qI(e){return typeof e=="function"}function Cf(e){return typeof e=="string"?{type:e}:e}function DI(e,t){return e.catch(t)}var Ws=Symbol("forceQueryFn"),xf=e=>typeof e[Ws]=="function";function VI({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:n,context:o}){let a=new Map,i=new Map,{unsubscribeQueryResult:s,removeMutationResult:u,updateSubscriptionOptions:c}=n.internalActions;return{buildInitiateQuery:A,buildInitiateMutation:C,getRunningQueryThunk:l,getRunningMutationThunk:m,getRunningQueriesThunk:d,getRunningMutationsThunk:p};function l(y,g){return h=>{let x=o.endpointDefinitions[y],R=e({queryArgs:g,endpointDefinition:x,endpointName:y});return a.get(h)?.[R]}}function m(y,g){return h=>i.get(h)?.[g]}function d(){return y=>Object.values(a.get(y)||{}).filter(iC)}function p(){return y=>Object.values(i.get(y)||{}).filter(iC)}function f(y){}function A(y,g){let h=(x,{subscribe:R=!0,forceRefetch:P,subscriptionOptions:b,[Ws]:I,...N}={})=>($,ee)=>{let V=e({queryArgs:x,endpointDefinition:g,endpointName:y}),L=t({...N,type:"query",subscribe:R,forceRefetch:P,subscriptionOptions:b,endpointName:y,originalArgs:x,queryCacheKey:V,[Ws]:I}),M=n.endpoints[y].select(x),_=$(L),Q=M(ee());let{requestId:Y,abort:z}=_,oe=Q.requestId!==Y,se=a.get($)?.[V],me=()=>M(ee()),ae=Object.assign(I?_.then(me):oe&&!se?Promise.resolve(Q):Promise.all([se,_]).then(me),{arg:x,requestId:Y,subscriptionOptions:b,queryCacheKey:V,abort:z,async unwrap(){let ue=await ae;if(ue.isError)throw ue.error;return ue.data},refetch:()=>$(h(x,{subscribe:!1,forceRefetch:!0})),unsubscribe(){R&&$(s({queryCacheKey:V,requestId:Y}))},updateSubscriptionOptions(ue){ae.subscriptionOptions=ue,$(c({endpointName:y,requestId:Y,queryCacheKey:V,options:ue}))}});if(!se&&!oe&&!I){let ue=a.get($)||{};ue[V]=ae,a.set($,ue),ae.then(()=>{delete ue[V],_a(ue)||a.delete($)})}return ae};return h}function C(y){return(g,{track:h=!0,fixedCacheKey:x}={})=>(R,P)=>{let b=r({type:"mutation",endpointName:y,originalArgs:g,track:h,fixedCacheKey:x}),I=R(b);let{requestId:N,abort:$,unwrap:ee}=I,V=DI(I.unwrap().then(Q=>({data:Q})),Q=>({error:Q})),L=()=>{R(u({requestId:N,fixedCacheKey:x}))},M=Object.assign(V,{arg:I.arg,requestId:N,abort:$,unwrap:ee,reset:L}),_=i.get(R)||{};return i.set(R,_),_[N]=M,M.then(()=>{delete _[N],_a(_)||i.delete(R)}),x&&(_[x]=M,M.then(()=>{_[x]===M&&(delete _[x],_a(_)||i.delete(R))})),M}}}function lC(e){return e}function NI({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:o,assertTagType:a}){let i=(g,h,x,R)=>(P,b)=>{let I=r[g],N=n({queryArgs:h,endpointDefinition:I,endpointName:g});if(P(o.internalActions.queryResultPatched({queryCacheKey:N,patches:x})),!R)return;let $=o.endpoints[g].select(h)(b()),ee=Rf(I.providesTags,$.data,void 0,h,{},a);P(o.internalActions.updateProvidedBy({queryCacheKey:N,providedTags:ee}))},s=(g,h,x,R=!0)=>(P,b)=>{let N=o.endpoints[g].select(h)(b()),$={patches:[],inversePatches:[],undo:()=>P(o.util.patchQueryData(g,h,$.inversePatches,R))};if(N.status==="uninitialized")return $;let ee;if("data"in N)if(We(N.data)){let[V,L,M]=iu(N.data,x);$.patches.push(...L),$.inversePatches.push(...M),ee=V}else ee=x(N.data),$.patches.push({op:"replace",path:[],value:ee}),$.inversePatches.push({op:"replace",path:[],value:N.data});return $.patches.length===0||P(o.util.patchQueryData(g,h,$.patches,R)),$},u=(g,h,x)=>R=>R(o.endpoints[g].initiate(h,{subscribe:!1,forceRefetch:!0,[Ws]:()=>({data:x})})),c=async(g,{signal:h,abort:x,rejectWithValue:R,fulfillWithValue:P,dispatch:b,getState:I,extra:N})=>{let $=r[g.endpointName];try{let ee=lC,V,L={signal:h,abort:x,dispatch:b,getState:I,extra:N,endpoint:g.endpointName,type:g.type,forced:g.type==="query"?l(g,I()):void 0},M=g.type==="query"?g[Ws]:void 0;if(M?V=M():$.query?(V=await t($.query(g.originalArgs),L,$.extraOptions),$.transformResponse&&(ee=$.transformResponse)):V=await $.queryFn(g.originalArgs,L,$.extraOptions,_=>t(_,L,$.extraOptions)),typeof process<"u",V.error)throw new ja(V.error,V.meta);return P(await ee(V.data,V.meta,g.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:V.meta,[no]:!0})}catch(ee){let V=ee;if(V instanceof ja){let L=lC;$.query&&$.transformErrorResponse&&(L=$.transformErrorResponse);try{return R(await L(V.value,V.meta,g.originalArgs),{baseQueryMeta:V.meta,[no]:!0})}catch(M){V=M}}throw typeof process<"u",console.error(V),V}};function l(g,h){let x=h[e]?.queries?.[g.queryCacheKey],R=h[e]?.config.refetchOnMountOrArgChange,P=x?.fulfilledTimeStamp,b=g.forceRefetch??(g.subscribe&&R);return b?b===!0||(Number(new Date)-Number(P))/1e3>=b:!1}let m=W(`${e}/executeQuery`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[no]:!0}},condition(g,{getState:h}){let x=h(),R=x[e]?.queries?.[g.queryCacheKey],P=R?.fulfilledTimeStamp,b=g.originalArgs,I=R?.originalArgs,N=r[g.endpointName];return xf(g)?!0:R?.status==="pending"?!1:l(g,x)||RC(N)&&N?.forceRefetch?.({currentArg:b,previousArg:I,endpointState:R,state:x})?!0:!P},dispatchConditionRejection:!0}),d=W(`${e}/executeMutation`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[no]:!0}}}),p=g=>"force"in g,f=g=>"ifOlderThan"in g,A=(g,h,x)=>(R,P)=>{let b=p(x)&&x.force,I=f(x)&&x.ifOlderThan,N=(ee=!0)=>{let V={forceRefetch:ee,isPrefetch:!0};return o.endpoints[g].initiate(h,V)},$=o.endpoints[g].select(h)(P());if(b)R(N());else if(I){let ee=$?.fulfilledTimeStamp;if(!ee){R(N());return}(Number(new Date)-Number(new Date(ee)))/1e3>=I&&R(N())}else R(N(!1))};function C(g){return h=>h?.meta?.arg?.endpointName===g}function y(g,h){return{matchPending:na(lu(g),C(h)),matchFulfilled:na(Dr(g),C(h)),matchRejected:na(ro(g),C(h))}}return{queryThunk:m,mutationThunk:d,prefetch:A,updateQueryData:s,upsertQueryData:u,patchQueryData:i,buildMatchThunkActions:y}}function bC(e,t,r,n){return Rf(r[e.meta.arg.endpointName][t],Dr(e)?e.payload:void 0,vs(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function el(e,t,r){let n=e[t];n&&r(n)}function Ys(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function dC(e,t,r){let n=e[Ys(t)];n&&r(n)}var Hs={};function MI({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:n,apiUid:o,extractRehydrationInfo:a,hasRehydrationInfo:i},assertTagType:s,config:u}){let c=S(`${e}/resetApiState`),l=oo({name:`${e}/queries`,initialState:Hs,reducers:{removeQueryResult:{reducer(h,{payload:{queryCacheKey:x}}){delete h[x]},prepare:oa()},queryResultPatched:{reducer(h,{payload:{queryCacheKey:x,patches:R}}){el(h,x,P=>{P.data=gm(P.data,R.concat())})},prepare:oa()}},extraReducers(h){h.addCase(t.pending,(x,{meta:R,meta:{arg:P}})=>{var I;let b=xf(P);x[I=P.queryCacheKey]??(x[I]={status:"uninitialized",endpointName:P.endpointName}),el(x,P.queryCacheKey,N=>{N.status="pending",N.requestId=b&&N.requestId?N.requestId:R.requestId,P.originalArgs!==void 0&&(N.originalArgs=P.originalArgs),N.startedTimeStamp=R.startedTimeStamp})}).addCase(t.fulfilled,(x,{meta:R,payload:P})=>{el(x,R.arg.queryCacheKey,b=>{if(b.requestId!==R.requestId&&!xf(R.arg))return;let{merge:I}=n[R.arg.endpointName];if(b.status="fulfilled",I)if(b.data!==void 0){let{fulfilledTimeStamp:N,arg:$,baseQueryMeta:ee,requestId:V}=R,L=qr(b.data,M=>I(M,P,{arg:$.originalArgs,baseQueryMeta:ee,fulfilledTimeStamp:N,requestId:V}));b.data=L}else b.data=P;else b.data=n[R.arg.endpointName].structuralSharing??!0?yC(at(b.data)?mm(b.data):b.data,P):P;delete b.error,b.fulfilledTimeStamp=R.fulfilledTimeStamp})}).addCase(t.rejected,(x,{meta:{condition:R,arg:P,requestId:b},error:I,payload:N})=>{el(x,P.queryCacheKey,$=>{if(!R){if($.requestId!==b)return;$.status="rejected",$.error=N??I}})}).addMatcher(i,(x,R)=>{let{queries:P}=a(R);for(let[b,I]of Object.entries(P))(I?.status==="fulfilled"||I?.status==="rejected")&&(x[b]=I)})}}),m=oo({name:`${e}/mutations`,initialState:Hs,reducers:{removeMutationResult:{reducer(h,{payload:x}){let R=Ys(x);R in h&&delete h[R]},prepare:oa()}},extraReducers(h){h.addCase(r.pending,(x,{meta:R,meta:{requestId:P,arg:b,startedTimeStamp:I}})=>{b.track&&(x[Ys(R)]={requestId:P,status:"pending",endpointName:b.endpointName,startedTimeStamp:I})}).addCase(r.fulfilled,(x,{payload:R,meta:P})=>{P.arg.track&&dC(x,P,b=>{b.requestId===P.requestId&&(b.status="fulfilled",b.data=R,b.fulfilledTimeStamp=P.fulfilledTimeStamp)})}).addCase(r.rejected,(x,{payload:R,error:P,meta:b})=>{b.arg.track&&dC(x,b,I=>{I.requestId===b.requestId&&(I.status="rejected",I.error=R??P)})}).addMatcher(i,(x,R)=>{let{mutations:P}=a(R);for(let[b,I]of Object.entries(P))(I?.status==="fulfilled"||I?.status==="rejected")&&b!==I?.requestId&&(x[b]=I)})}}),d=oo({name:`${e}/invalidation`,initialState:Hs,reducers:{updateProvidedBy:{reducer(h,x){var b,I;let{queryCacheKey:R,providedTags:P}=x.payload;for(let N of Object.values(h))for(let $ of Object.values(N)){let ee=$.indexOf(R);ee!==-1&&$.splice(ee,1)}for(let{type:N,id:$}of P){let ee=(b=h[N]??(h[N]={}))[I=$||"__internal_without_id"]??(b[I]=[]);ee.includes(R)||ee.push(R)}},prepare:oa()}},extraReducers(h){h.addCase(l.actions.removeQueryResult,(x,{payload:{queryCacheKey:R}})=>{for(let P of Object.values(x))for(let b of Object.values(P)){let I=b.indexOf(R);I!==-1&&b.splice(I,1)}}).addMatcher(i,(x,R)=>{var b,I;let{provided:P}=a(R);for(let[N,$]of Object.entries(P))for(let[ee,V]of Object.entries($)){let L=(b=x[N]??(x[N]={}))[I=ee||"__internal_without_id"]??(b[I]=[]);for(let M of V)L.includes(M)||L.push(M)}}).addMatcher(Ut(Dr(t),vs(t)),(x,R)=>{let P=bC(R,"providesTags",n,s),{queryCacheKey:b}=R.meta.arg;d.caseReducers.updateProvidedBy(x,d.actions.updateProvidedBy({queryCacheKey:b,providedTags:P}))})}}),p=oo({name:`${e}/subscriptions`,initialState:Hs,reducers:{updateSubscriptionOptions(h,x){},unsubscribeQueryResult(h,x){},internal_getRTKQSubscriptions(){}}}),f=oo({name:`${e}/internalSubscriptions`,initialState:Hs,reducers:{subscriptionsUpdated:{reducer(h,x){return gm(h,x.payload)},prepare:oa()}}}),A=oo({name:`${e}/config`,initialState:{online:RI(),focused:FI(),middlewareRegistered:!1,...u},reducers:{middlewareRegistered(h,{payload:x}){h.middlewareRegistered=h.middlewareRegistered==="conflict"||o!==x?"conflict":!0}},extraReducers:h=>{h.addCase(Ff,x=>{x.online=!0}).addCase(FC,x=>{x.online=!1}).addCase(Af,x=>{x.focused=!0}).addCase(AC,x=>{x.focused=!1}).addMatcher(i,x=>({...x}))}}),C=Zo({queries:l.reducer,mutations:m.reducer,provided:d.reducer,subscriptions:f.reducer,config:A.reducer}),y=(h,x)=>C(c.match(x)?void 0:h,x),g={...A.actions,...l.actions,...p.actions,...f.actions,...m.actions,...d.actions,resetApiState:c};return{reducer:y,actions:g}}var yf=Symbol.for("RTKQ/skipToken"),vC={status:"uninitialized"},pC=qr(vC,()=>{}),mC=qr(vC,()=>{});function LI({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=m=>pC,o=m=>mC;return{buildQuerySelector:s,buildMutationSelector:u,selectInvalidatedBy:c,selectCachedArgsForQuery:l};function a(m){return{...m,...xI(m.status)}}function i(m){return m[t]}function s(m,d){return p=>{let f=e({queryArgs:p,endpointDefinition:d,endpointName:m});return r(p===yf?n:y=>i(y)?.queries?.[f]??pC,a)}}function u(){return m=>{let d;return typeof m=="object"?d=Ys(m)??yf:d=m,r(d===yf?o:A=>i(A)?.mutations?.[d]??mC,a)}}function c(m,d){let p=m[t],f=new Set;for(let A of d.map(Cf)){let C=p.provided[A.type];if(!C)continue;let y=(A.id!==void 0?C[A.id]:aC(Object.values(C)))??[];for(let g of y)f.add(g)}return aC(Array.from(f.values()).map(A=>{let C=p.queries[A];return C?[{queryCacheKey:A,endpointName:C.endpointName,originalArgs:C.originalArgs}]:[]}))}function l(m,d){return Object.values(m[t].queries).filter(p=>p?.endpointName===d&&p.status!=="uninitialized").map(p=>p.originalArgs)}}var fC=WeakMap?new WeakMap:void 0,gC=({endpointName:e,queryArgs:t})=>{let r="",n=fC?.get(t);if(typeof n=="string")r=n;else{let o=JSON.stringify(t,(a,i)=>(i=typeof i=="bigint"?{$bigint:i.toString()}:i,i=Bt(i)?Object.keys(i).sort().reduce((s,u)=>(s[u]=i[u],s),{}):i,i));Bt(t)&&fC?.set(t,o),r=o}return`${e}(${r})`};function QI(...e){return function(r){let n=ra(c=>r.extractRehydrationInfo?.(c,{reducerPath:r.reducerPath??"api"})),o={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...r,extractRehydrationInfo:n,serializeQueryArgs(c){let l=gC;if("serializeQueryArgs"in c.endpointDefinition){let m=c.endpointDefinition.serializeQueryArgs;l=d=>{let p=m(d);return typeof p=="string"?p:gC({...d,queryArgs:p})}}else r.serializeQueryArgs&&(l=r.serializeQueryArgs);return l(c)},tagTypes:[...r.tagTypes||[]]},a={endpointDefinitions:{},batch(c){c()},apiUid:hm(),extractRehydrationInfo:n,hasRehydrationInfo:ra(c=>n(c)!=null)},i={injectEndpoints:u,enhanceEndpoints({addTagTypes:c,endpoints:l}){if(c)for(let m of c)o.tagTypes.includes(m)||o.tagTypes.push(m);if(l)for(let[m,d]of Object.entries(l))typeof d=="function"?d(a.endpointDefinitions[m]):Object.assign(a.endpointDefinitions[m]||{},d);return i}},s=e.map(c=>c.init(i,o,a));function u(c){let l=c.endpoints({query:m=>({...m,type:"query"}),mutation:m=>({...m,type:"mutation"})});for(let[m,d]of Object.entries(l)){if(c.overrideExisting!==!0&&m in a.endpointDefinitions){if(c.overrideExisting==="throw")throw new Error(st(39));typeof process<"u";continue}a.endpointDefinitions[m]=d;for(let p of s)p.injectEndpoint(m,d)}return i}return i.injectEndpoints({endpoints:r.endpoints})}}function An(e,...t){return Object.assign(e,...t)}var BI=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,o=null,a=null,{updateSubscriptionOptions:i,unsubscribeQueryResult:s}=e.internalActions,u=(p,f)=>{var C,y;if(i.match(f)){let{queryCacheKey:g,requestId:h,options:x}=f.payload;return p?.[g]?.[h]&&(p[g][h]=x),!0}if(s.match(f)){let{queryCacheKey:g,requestId:h}=f.payload;return p[g]&&delete p[g][h],!0}if(e.internalActions.removeQueryResult.match(f))return delete p[f.payload.queryCacheKey],!0;if(t.pending.match(f)){let{meta:{arg:g,requestId:h}}=f,x=p[C=g.queryCacheKey]??(p[C]={});return x[`${h}_running`]={},g.subscribe&&(x[h]=g.subscriptionOptions??x[h]??{}),!0}let A=!1;if(t.fulfilled.match(f)||t.rejected.match(f)){let g=p[f.meta.arg.queryCacheKey]||{},h=`${f.meta.requestId}_running`;A||(A=!!g[h]),delete g[h]}if(t.rejected.match(f)){let{meta:{condition:g,arg:h,requestId:x}}=f;if(g&&h.subscribe){let R=p[y=h.queryCacheKey]??(p[y]={});R[x]=h.subscriptionOptions??R[x]??{},A=!0}}return A},c=()=>r.currentSubscriptions,d={getSubscriptions:c,getSubscriptionCount:p=>{let A=c()[p]??{};return _a(A)},isRequestSubscribed:(p,f)=>!!c()?.[p]?.[f]};return(p,f)=>{if(o||(o=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(p))return o=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(p))return[!1,d];let A=u(r.currentSubscriptions,p),C=!0;if(A){a||(a=setTimeout(()=>{let h=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,x]=iu(o,()=>h);f.next(e.internalActions.subscriptionsUpdated(x)),o=h,a=null},500));let y=typeof p.type=="string"&&!!p.type.startsWith(n),g=t.rejected.match(p)&&p.meta.condition&&!!p.meta.arg.subscribe;C=!y&&!g}return[C,!1]}};function UI(e){for(let t in e)return!1;return!0}var _I=2147483647/1e3-1,jI=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:o})=>{let{removeQueryResult:a,unsubscribeQueryResult:i}=t.internalActions,s=Ut(i.match,r.fulfilled,r.rejected);function u(d){let p=o.currentSubscriptions[d];return!!p&&!UI(p)}let c={},l=(d,p,f)=>{if(s(d)){let A=p.getState()[e],{queryCacheKey:C}=i.match(d)?d.payload:d.meta.arg;m(C,A.queries[C]?.endpointName,p,A.config)}if(t.util.resetApiState.match(d))for(let[A,C]of Object.entries(c))C&&clearTimeout(C),delete c[A];if(n.hasRehydrationInfo(d)){let A=p.getState()[e],{queries:C}=n.extractRehydrationInfo(d);for(let[y,g]of Object.entries(C))m(y,g?.endpointName,p,A.config)}};function m(d,p,f,A){let y=n.endpointDefinitions[p]?.keepUnusedDataFor??A.keepUnusedDataFor;if(y===1/0)return;let g=Math.max(0,Math.min(y,_I));if(!u(d)){let h=c[d];h&&clearTimeout(h),c[d]=setTimeout(()=>{u(d)||f.dispatch(a({queryCacheKey:d})),delete c[d]},g*1e3)}}return l},SC=new Error("Promise never resolved before cacheEntryRemoved."),$I=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:o,internalState:a})=>{let i=du(n),s=du(o),u=Dr(n,o),c={},l=(p,f,A)=>{let C=m(p);if(n.pending.match(p)){let y=A[t].queries[C],g=f.getState()[t].queries[C];!y&&g&&d(p.meta.arg.endpointName,p.meta.arg.originalArgs,C,f,p.meta.requestId)}else if(o.pending.match(p))f.getState()[t].mutations[C]&&d(p.meta.arg.endpointName,p.meta.arg.originalArgs,C,f,p.meta.requestId);else if(u(p)){let y=c[C];y?.valueResolved&&(y.valueResolved({data:p.payload,meta:p.meta.baseQueryMeta}),delete y.valueResolved)}else if(e.internalActions.removeQueryResult.match(p)||e.internalActions.removeMutationResult.match(p)){let y=c[C];y&&(delete c[C],y.cacheEntryRemoved())}else if(e.util.resetApiState.match(p))for(let[y,g]of Object.entries(c))delete c[y],g.cacheEntryRemoved()};function m(p){return i(p)?p.meta.arg.queryCacheKey:s(p)?p.meta.arg.fixedCacheKey??p.meta.requestId:e.internalActions.removeQueryResult.match(p)?p.payload.queryCacheKey:e.internalActions.removeMutationResult.match(p)?Ys(p.payload):""}function d(p,f,A,C,y){let g=r.endpointDefinitions[p],h=g?.onCacheEntryAdded;if(!h)return;let x={},R=new Promise(ee=>{x.cacheEntryRemoved=ee}),P=Promise.race([new Promise(ee=>{x.valueResolved=ee}),R.then(()=>{throw SC})]);P.catch(()=>{}),c[A]=x;let b=e.endpoints[p].select(g.type==="query"?f:A),I=C.dispatch((ee,V,L)=>L),N={...C,getCacheEntry:()=>b(C.getState()),requestId:y,extra:I,updateCachedData:g.type==="query"?ee=>C.dispatch(e.util.updateQueryData(p,f,ee)):void 0,cacheDataLoaded:P,cacheEntryRemoved:R},$=h(f,N);Promise.resolve($).catch(ee=>{if(ee!==SC)throw ee})}return l},GI=({api:e,context:{apiUid:t},reducerPath:r})=>(n,o)=>{e.util.resetApiState.match(n)&&o.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"},zI=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:o,api:a,assertTagType:i,refetchQuery:s,internalState:u})=>{let{removeQueryResult:c}=a.internalActions,l=Ut(Dr(n),vs(n)),m=Ut(Dr(n,o),ro(n,o)),d=[],p=(C,y)=>{l(C)?A(bC(C,"invalidatesTags",r,i),y):m(C)?A([],y):a.util.invalidateTags.match(C)&&A(Rf(C.payload,void 0,void 0,void 0,void 0,i),y)};function f(C){for(let y in C.queries)if(C.queries[y]?.status==="pending")return!0;for(let y in C.mutations)if(C.mutations[y]?.status==="pending")return!0;return!1}function A(C,y){let g=y.getState(),h=g[e];if(d.push(...C),h.config.invalidationBehavior==="delayed"&&f(h))return;let x=d;if(d=[],x.length===0)return;let R=a.util.selectInvalidatedBy(g,x);t.batch(()=>{let P=Array.from(R.values());for(let{queryCacheKey:b}of P){let I=h.queries[b],N=u.currentSubscriptions[b]??{};I&&(_a(N)===0?y.dispatch(c({queryCacheKey:b})):I.status!=="uninitialized"&&y.dispatch(s(I,b)))}})}return p},HI=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:o})=>{let a={},i=(d,p)=>{(r.internalActions.updateSubscriptionOptions.match(d)||r.internalActions.unsubscribeQueryResult.match(d))&&u(d.payload,p),(t.pending.match(d)||t.rejected.match(d)&&d.meta.condition)&&u(d.meta.arg,p),(t.fulfilled.match(d)||t.rejected.match(d)&&!d.meta.condition)&&s(d.meta.arg,p),r.util.resetApiState.match(d)&&l()};function s({queryCacheKey:d},p){let f=p.getState()[e],A=f.queries[d],C=o.currentSubscriptions[d];if(!A||A.status==="uninitialized")return;let{lowestPollingInterval:y,skipPollingIfUnfocused:g}=m(C);if(!Number.isFinite(y))return;let h=a[d];h?.timeout&&(clearTimeout(h.timeout),h.timeout=void 0);let x=Date.now()+y;a[d]={nextPollTimestamp:x,pollingInterval:y,timeout:setTimeout(()=>{(f.config.focused||!g)&&p.dispatch(n(A,d)),s({queryCacheKey:d},p)},y)}}function u({queryCacheKey:d},p){let A=p.getState()[e].queries[d],C=o.currentSubscriptions[d];if(!A||A.status==="uninitialized")return;let{lowestPollingInterval:y}=m(C);if(!Number.isFinite(y)){c(d);return}let g=a[d],h=Date.now()+y;(!g||h<g.nextPollTimestamp)&&s({queryCacheKey:d},p)}function c(d){let p=a[d];p?.timeout&&clearTimeout(p.timeout),delete a[d]}function l(){for(let d of Object.keys(a))c(d)}function m(d={}){let p=!1,f=Number.POSITIVE_INFINITY;for(let A in d)d[A].pollingInterval&&(f=Math.min(d[A].pollingInterval,f),p=d[A].skipPollingIfUnfocused||p);return{lowestPollingInterval:f,skipPollingIfUnfocused:p}}return i},WI=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let o=lu(r,n),a=ro(r,n),i=Dr(r,n),s={};return(c,l)=>{if(o(c)){let{requestId:m,arg:{endpointName:d,originalArgs:p}}=c.meta,f=t.endpointDefinitions[d],A=f?.onQueryStarted;if(A){let C={},y=new Promise((R,P)=>{C.resolve=R,C.reject=P});y.catch(()=>{}),s[m]=C;let g=e.endpoints[d].select(f.type==="query"?p:m),h=l.dispatch((R,P,b)=>b),x={...l,getCacheEntry:()=>g(l.getState()),requestId:m,extra:h,updateCachedData:f.type==="query"?R=>l.dispatch(e.util.updateQueryData(d,p,R)):void 0,queryFulfilled:y};A(p,x)}}else if(i(c)){let{requestId:m,baseQueryMeta:d}=c.meta;s[m]?.resolve({data:c.payload,meta:d}),delete s[m]}else if(a(c)){let{requestId:m,rejectedWithValue:d,baseQueryMeta:p}=c.meta;s[m]?.reject({error:c.payload??c.error,isUnhandledError:!d,meta:p}),delete s[m]}}},YI=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:o})=>{let{removeQueryResult:a}=r.internalActions,i=(u,c)=>{Af.match(u)&&s(c,"refetchOnFocus"),Ff.match(u)&&s(c,"refetchOnReconnect")};function s(u,c){let l=u.getState()[e],m=l.queries,d=o.currentSubscriptions;t.batch(()=>{for(let p of Object.keys(d)){let f=m[p],A=d[p];if(!A||!f)continue;(Object.values(A).some(y=>y[c]===!0)||Object.values(A).every(y=>y[c]===void 0)&&l.config[c])&&(_a(A)===0?u.dispatch(a({queryCacheKey:p})):f.status!=="uninitialized"&&u.dispatch(n(f,p)))}})}return i};function KI(e){let{reducerPath:t,queryThunk:r,api:n,context:o}=e,{apiUid:a}=o,i={invalidateTags:S(`${t}/invalidateTags`)},s=m=>m.type.startsWith(`${t}/`),u=[GI,jI,zI,HI,$I,WI];return{middleware:m=>{let d=!1,f={...e,internalState:{currentSubscriptions:{}},refetchQuery:l,isThisApiSliceAction:s},A=u.map(g=>g(f)),C=BI(f),y=YI(f);return g=>h=>{if(!tu(h))return g(h);d||(d=!0,m.dispatch(n.internalActions.middlewareRegistered(a)));let x={...m,next:g},R=m.getState(),[P,b]=C(h,x,R),I;if(P?I=g(h):I=b,m.getState()[t]&&(y(h,x,R),s(h)||o.hasRehydrationInfo(h)))for(let N of A)N(h,x,R);return I}},actions:i};function l(m,d,p={}){return r({type:"query",endpointName:m.endpointName,originalArgs:m.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:d,...p})}}var hC=Symbol(),JI=({createSelector:e=re}={})=>({name:hC,init(t,{baseQuery:r,tagTypes:n,reducerPath:o,serializeQueryArgs:a,keepUnusedDataFor:i,refetchOnMountOrArgChange:s,refetchOnFocus:u,refetchOnReconnect:c,invalidationBehavior:l},m){QS();let d=z=>(typeof process<"u",z);Object.assign(t,{reducerPath:o,endpoints:{},internalActions:{onOnline:Ff,onOffline:FC,onFocus:Af,onFocusLost:AC},util:{}});let{queryThunk:p,mutationThunk:f,patchQueryData:A,updateQueryData:C,upsertQueryData:y,prefetch:g,buildMatchThunkActions:h}=NI({baseQuery:r,reducerPath:o,context:m,api:t,serializeQueryArgs:a,assertTagType:d}),{reducer:x,actions:R}=MI({context:m,queryThunk:p,mutationThunk:f,reducerPath:o,assertTagType:d,config:{refetchOnFocus:u,refetchOnReconnect:c,refetchOnMountOrArgChange:s,keepUnusedDataFor:i,reducerPath:o,invalidationBehavior:l}});An(t.util,{patchQueryData:A,updateQueryData:C,upsertQueryData:y,prefetch:g,resetApiState:R.resetApiState}),An(t.internalActions,R);let{middleware:P,actions:b}=KI({reducerPath:o,context:m,queryThunk:p,mutationThunk:f,api:t,assertTagType:d});An(t.util,b),An(t,{reducer:x,middleware:P});let{buildQuerySelector:I,buildMutationSelector:N,selectInvalidatedBy:$,selectCachedArgsForQuery:ee}=LI({serializeQueryArgs:a,reducerPath:o,createSelector:e});An(t.util,{selectInvalidatedBy:$,selectCachedArgsForQuery:ee});let{buildInitiateQuery:V,buildInitiateMutation:L,getRunningMutationThunk:M,getRunningMutationsThunk:_,getRunningQueriesThunk:Q,getRunningQueryThunk:Y}=VI({queryThunk:p,mutationThunk:f,api:t,serializeQueryArgs:a,context:m});return An(t.util,{getRunningMutationThunk:M,getRunningMutationsThunk:_,getRunningQueryThunk:Y,getRunningQueriesThunk:Q}),{name:hC,injectEndpoint(z,oe){var me;let se=t;(me=se.endpoints)[z]??(me[z]={}),RC(oe)?An(se.endpoints[z],{name:z,select:I(z,oe),initiate:V(z,oe)},h(p,z)):OI(oe)&&An(se.endpoints[z],{name:z,select:N(),initiate:L(z)},h(f,z))}}}}),PC=QI(JI());var XI=async(e,t,r)=>{let n=t.getState(),{accessToken:o,organizationId:a,platformUrl:i}=n.configuration,s=n.generatedAnswer.answerConfigurationId,u={...e,headers:{...e?.headers||{},Authorization:`Bearer ${o}`}};try{return{data:CC({baseUrl:`${i}/rest/organizations/${a}/answer/v1/configs/${s}`})(u,t,r)}}catch(c){return{error:c}}},tl=PC({reducerPath:"answer",baseQuery:xC(XI,{maxRetries:3}),endpoints:()=>({})});var ZI=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},eT=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},tT=(e,t)=>{e.citations=t.citations},rT=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},nT=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},oT=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&nT(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&ZI(t,n);break;case"genqa.messageType":n.textDelta&&eT(t,n);break;case"genqa.citationsType":n.citations&&tT(t,n);break;case"genqa.endOfStreamType":(t.answer?.length||n.answerGenerated)&&rT(t,n);break}},go=tl.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(t,{getState:r,cacheDataLoaded:n,updateCachedData:o}){await n;let{configuration:a,generatedAnswer:i}=r(),{platformUrl:s,organizationId:u,accessToken:c}=a;await Ps(`${s}/rest/organizations/${u}/answer/v1/configs/${i.answerConfigurationId}/generate`,{method:"POST",body:JSON.stringify(t),headers:{Authorization:`Bearer ${c}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onopen:async l=>{let m=l.headers.get("x-answer-id");m&&o(d=>{d.answerId=m})},onmessage:l=>{o(m=>{oT(l,m)})},onerror:l=>{throw l}})}})})}),wC=re(e=>Gs(e)?.q,e=>e.search.requestId,(e,t)=>({q:e,requestId:t})),rl={},aT=(e,t)=>({...rl,[e]:Ju(t)?.map(r=>uf(r,cf())).sort((r,n)=>r.facetId>n.facetId?1:n.facetId>r.facetId?-1:0)}),iT=e=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,EC=(e,t)=>{let r=Gs(e)?.q,n=nC(e),o=rC(e),a=tC(e)??[];return r&&t==="fetch"&&(rl=aT(r,e)),{q:r,pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:a}},...n?.length&&{searchHub:n},...o?.length&&{pipeline:o},...rl[r]?.length&&{facets:rl[r]},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:iT(e),firstResult:e.pagination.firstResult},tab:e.configuration.analytics.originLevel2}},nl=e=>go.endpoints.getAnswer.initiate(EC(e,"fetch")),zs=e=>go.endpoints.getAnswer.select(EC(e,"select"))(e);var IC=j(ao,e=>e);function bf(){return typeof window<"u"&&typeof document<"u"}function sT(e){let t=e.payload?.analyticsAction;return TC(e)&&!H(t)}function TC(e){return"type"in e}var kC=e=>t=>r=>{let n;sT(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let o=t(r);return TC(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),o};var QC=$e(qC());var DC=S("commerce/configuration/updateBasicConfiguration",e=>F(e,{accessToken:le,organizationId:le,platformUrl:le})),VC=S("commerce/configuration/updateAnalyticsConfiguration",e=>F(e,{enabled:Ms.enabled,source:Ms.source,trackingId:Ms.trackingId})),NC=S("commerce/configuration/analytics/disable"),MC=S("commerce/configuration/analytics/enable");var $a=S("tab/register",e=>{let t=new q({values:{id:k,expression:pe}});return F(e,t)}),qt=S("tab/updateActiveTab",e=>F(e,k));function uT(e,t){if(mh(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+Gp;let n=fh(e,t);return n?ds(t,n.environment).analytics:e}var ol=j(en(),e=>e.addCase(zt,(t,r)=>{LC(t,r.payload)}).addCase(DC,(t,r)=>{LC(t,r.payload)}).addCase(xt,(t,r)=>{r.payload.apiBaseUrl&&(t.search.apiBaseUrl=r.payload.apiBaseUrl),r.payload.locale&&(t.search.locale=r.payload.locale),r.payload.timezone&&(t.search.timezone=r.payload.timezone),r.payload.authenticationProviders&&(t.search.authenticationProviders=r.payload.authenticationProviders)}).addCase(dn,(t,r)=>{H(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),H(r.payload.originContext)||(t.analytics.originContext=r.payload.originContext),H(r.payload.originLevel2)||(t.analytics.originLevel2=r.payload.originLevel2),H(r.payload.originLevel3)||(t.analytics.originLevel3=r.payload.originLevel3),H(r.payload.apiBaseUrl)||(t.analytics.apiBaseUrl=r.payload.apiBaseUrl),H(r.payload.nextApiBaseUrl)||(t.analytics.nextApiBaseUrl=r.payload.nextApiBaseUrl),H(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),H(r.payload.analyticsMode)||(t.analytics.analyticsMode=r.payload.analyticsMode),H(r.payload.source)||(t.analytics.source=r.payload.source);let n=(0,QC.default)();n&&(t.analytics.analyticsMode="next",t.analytics.trackingId=n),H(r.payload.runtimeEnvironment)||(t.analytics.runtimeEnvironment=r.payload.runtimeEnvironment),H(r.payload.anonymous)||(t.analytics.anonymous=r.payload.anonymous),H(r.payload.deviceId)||(t.analytics.deviceId=r.payload.deviceId),H(r.payload.userDisplayName)||(t.analytics.userDisplayName=r.payload.userDisplayName),H(r.payload.documentLocation)||(t.analytics.documentLocation=r.payload.documentLocation)}).addCase(VC,(t,r)=>{H(r.payload.enabled)||(t.analytics.enabled=r.payload.enabled),H(r.payload.trackingId)||(t.analytics.trackingId=r.payload.trackingId),H(r.payload.source)||(t.analytics.source=r.payload.source)}).addCase(ga,t=>{t.analytics.enabled=!1}).addCase(NC,t=>{t.analytics.enabled=!1}).addCase(Sa,t=>{t.analytics.enabled=!0}).addCase(MC,t=>{t.analytics.enabled=!0}).addCase(Vu,(t,r)=>{t.analytics.originLevel2=r.payload.originLevel2}).addCase(Nu,(t,r)=>{t.analytics.originLevel3=r.payload.originLevel3}).addCase(qt,(t,r)=>{t.analytics.originLevel2=r.payload}).addCase(de,(t,r)=>{t.analytics.originLevel2=r.payload.tab||t.analytics.originLevel2}));function LC(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl=`${t.platformUrl}${$p}`,e.analytics.apiBaseUrl=uT(t.platformUrl,e.organizationId))}var K=ol;function lT(e){return e.instantlyCallable}var BC=()=>e=>t=>e(lT(t)?t():t);var UC=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let o=n.error;if(n.payload?.ignored||e.error(o.stack||o.message||o.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},_C=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function jC(e,t){let r={...e},n,o=a=>(i,s)=>{let u=a(i,s);return n?n(u,s):u};return{get combinedReducer(){let a=sS(Object.entries(t).filter(([i])=>!(i in r)).map(([i,s])=>[i,()=>s]));return o(Zo({...a,...r}))},containsAll(a){return Object.keys(a).every(s=>s in r)},add(a){Object.keys(a).filter(i=>!(i in r)).forEach(i=>r[i]=a[i])},addCrossReducer(a){n=a}}}function al(e,t,r){var n,o,a;t===void 0&&(t=50),r===void 0&&(r={});var i=(n=r.isImmediate)!=null&&n,s=(o=r.callback)!=null&&o,u=r.maxWait,c=Date.now(),l=[];function m(){if(u!==void 0){var p=Date.now()-c;if(p+t>=u)return u-p}return t}var d=function(){var p=[].slice.call(arguments),f=this;return new Promise(function(A,C){var y=i&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,c=Date.now(),!i){var h=e.apply(f,p);s&&s(h),l.forEach(function(x){return(0,x.resolve)(h)}),l=[]}},m()),y){var g=e.apply(f,p);return s&&s(g),A(g)}l.push({resolve:A,reject:C})})};return d.cancel=function(p){a!==void 0&&clearTimeout(a),l.forEach(function(f){return(0,f.reject)(p)}),l=[]},d}function $C(e,t){let r=0,n=al(()=>r=0,500);return o=>a=>async i=>{if(!(typeof i=="function"))return a(i);let u=await a(i);if(!dT(u))return u;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),u;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),u;r++,n();let c=await pT(t);o.dispatch(zt({accessToken:c})),o.dispatch(i)}}function dT(e){return e?.error?.name===new Mo().name}async function pT(e){try{return await e()}catch{return""}}function GC({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:o}){return JS({reducer:e,preloadedState:t,devTools:{stateSanitizer:a=>a.history?{...a,history:"<<OMIT>>"}:a,name:o,shouldHotReload:!1},middleware:a=>a({thunk:{extraArgument:n}}).prepend(...r).concat(_C(n.logger))})}var mT={configuration:K,version:IC};function fT(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...o}=e.analytics??{},a={...o,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(a.analyticsMode!=="next"&&iS())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!o.trackingId)throw new vf('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function zC(e,t){let r=gT(e,t),{accessToken:n,organizationId:o}=e.configuration,{organizationEndpoints:a}=e.configuration,i=a?.platform||e.configuration.platformUrl;CT(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),yT(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):xT(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(zt({accessToken:n,organizationId:o,platformUrl:i}));let s=fT(e.configuration,r.logger);return s&&r.dispatch(dn(s)),r}function gT(e,t){let{reducers:r}=e,n=jC({...mT,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let o=t.logger,a=()=>{let c="";try{c=aa(u.state).getMeta("").clientId}catch(l){o.warn("Error while obtaining clientID from relay",l)}return c},i={...t,get relay(){return aa(u.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():bf()?wp(a()):is()}},s=ST(e,i,n),u={addReducers(c){n.containsAll(c)||(n.add(c),s.replaceReducer(n.combinedReducer))},dispatch:s.dispatch,subscribe:s.subscribe,enableAnalytics(){s.dispatch(Sa())},disableAnalytics(){s.dispatch(ga())},get state(){return s.getState()},get relay(){return aa(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():bf()?wp(a()):is()},logger:o,store:s};return u}function ST(e,t,r){let{preloadedState:n,configuration:o}=e,a=o.name||"coveo-headless",i=hT(e,t.logger);return GC({preloadedState:n,reducer:r.combinedReducer,middlewares:i,thunkExtraArguments:t,name:a})}function hT(e,t){let{renewAccessToken:r}=e.configuration,n=$C(t,r);return[BC,n,UC(t),kC].concat(go.middleware,e.middlewares||[])}function yT(e){return Fe(e.organizationEndpoints)}function CT(e){return!H(e.platformUrl)||H(e.organizationEndpoints?.platform)}function xT(e){let{platform:t}=e.organizationEndpoints;if(Fe(t))return!1;let r=xm(t);return r&&r.organizationId!==e.organizationId}var vf=class extends Error{constructor(t){super(t),this.name="InvalidEngineConfiguration"}};var HC=$e(Pp());function WC(e){return(0,HC.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function YC(e,t){let r=AT(e),n=gt,o=FT(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:o,logger:t}}function AT(e){let{analytics:t}=e,r=(n,o)=>o;return t?.analyticsClientMiddleware||r}function FT(e){return e.preprocessRequest||gu}var XC=$e(_p());var Pf=(e,t,r,n,o,a)=>{let i=e[t];H(i)||H(o)||o!==i&&o!==n&&(a.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),a.warn(`To remove this warning, make sure that access token value [${i}] matches engine configuration value [${r}]`))},wf=(e,t)=>!(H(e)||t===e),Ks=e=>{try{let t=typeof atob<"u"?atob:XC.atob,n=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=t(n);if(!o)return!1;let a=decodeURIComponent(o.split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch{return!1}},ZC=(e,t)=>(wf(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),KC=(e,t,r,n)=>(Pf(e,"searchHub",t.searchHub,ft(),r,n),ZC(e,t)),ex=(e,t)=>(wf(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),JC=(e,t,r,n)=>(Pf(e,"pipeline",t.pipeline,Qt(),r,n),ex(e,t)),tx=(e,t)=>(wf(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),RT=(e,t,r,n)=>(Pf(e,"userDisplayName",t.configuration.analytics.userDisplayName,en().analytics.userDisplayName,r,n),tx(e,t)),rx=e=>j({},t=>{t.addCase(Aa,(r,n)=>{let o=Ks(r.configuration.accessToken);return o?KC(o,r,n.payload,e):r}).addCase(Ca,(r,n)=>{let o=Ks(r.configuration.accessToken);return o?JC(o,r,n.payload,e):r}).addCase(zt,(r,n)=>{if(r.configuration.accessToken!==n.payload.accessToken)return r;let{accessToken:o}=n.payload;if(!o)return r;let a=Ks(o);return a?[ex,ZC,tx].reduce((i,s)=>s(a,i),r):r}).addCase(xt,(r,n)=>{let o=Ks(r.configuration.accessToken);if(!o)return r;let a=KC(o,r,n.payload.searchHub,e);return JC(o,a,n.payload?.pipeline,e)}).addCase(dn,(r,n)=>{let o=Ks(r.configuration.accessToken);return o?RT(o,r,n.payload.userDisplayName,e):r})});var nx={organizationId:k,accessToken:k,platformUrl:new E({required:!1,emptyAllowed:!1}),name:new E({required:!1,emptyAllowed:!1}),analytics:new q({options:{required:!1},values:{enabled:new G({required:!1}),originContext:new E({required:!1}),originLevel2:new E({required:!1}),originLevel3:new E({required:!1}),analyticsMode:new E({constrainTo:["legacy","next"],required:!1})}})};function ox(){return{organizationId:"searchuisamples",accessToken:"xx564559b1-0045-48e1-953c-3addd1ee4457",organizationEndpoints:ds("searchuisamples")}}var ax=new Z({...nx,search:new q({options:{required:!1},values:{pipeline:new E({required:!1,emptyAllowed:!0}),searchHub:le,locale:le,timezone:le,authenticationProviders:new J({required:!1,each:k})}})});function ix(){return{...ox(),search:{searchHub:"default"}}}var bT={debug:ya,pipeline:xa,searchHub:Fa,search:X};function vT(e){let t=e.configuration.search,r=e.configuration.organizationEndpoints?.search||void 0;return{...t,apiBaseUrl:r}}function PT(e){let t=WC(e.loggerOptions);wT(e.configuration,t);let r=ET(e.configuration,t),n=IT(t),o={...YC(e.configuration,t),apiClient:r,streamingClient:n},a={...e,reducers:bT,crossReducer:rx(t)},i=zC(a,o),s=vT(e);return s&&i.dispatch(xt(s)),{...i,get state(){return i.state},executeFirstSearch(u=Ou()){if($s(i.state))return;let c=T({legacy:u,next:Ry()});i.dispatch(c)},executeFirstSearchAfterStandaloneSearchBoxRedirect(u){let{cause:c,metadata:l}=u;if($s(i.state))return;let m=l&&c==="omniboxFromLink",d=T({legacy:m?Du(l):qu(),next:m?vy():by()});i.dispatch(d)}}}function wT(e,t){try{ax.validate(e)}catch(r){throw t.error(r,"Search engine configuration error"),r}}function ET(e,t){let{search:r}=e;return new Su({logger:t,preprocessRequest:e.preprocessRequest||gu,postprocessSearchResponseMiddleware:r?.preprocessSearchResponseMiddleware||xh,postprocessFacetSearchResponseMiddleware:r?.preprocessFacetSearchResponseMiddleware||Ah,postprocessQuerySuggestResponseMiddleware:r?.preprocessQuerySuggestResponseMiddleware||Fh})}function IT(e){return new fu({logger:e})}function U(e){let t,r=new Map,n=()=>r.size===0,o=a=>{try{let i=JSON.stringify(a),s=t!==i;return t=i,s}catch(i){return console.warn('Could not detect if state has changed, check the controller "get state method"',i),!0}};return{subscribe(a){a();let i=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{o(this.state)&&r.forEach(u=>u())})),r.set(i,a),()=>{r.delete(i),n()&&s&&s()}},get state(){return{}}}}var cx=e=>{let t=/Document weights:\n((?:.)*?)\n+/g,r=/Terms weights:\n((?:.|\n)*)\n+/g,n=/Total weight: ([0-9]+)/g;if(!e)return null;let o=t.exec(e),a=r.exec(e),i=n.exec(e),s=kT(e),u=ux(o?o[1]:null),c=TT(a),l=i?Number(i[1]):null;return{documentWeights:u,termsWeight:c,totalWeight:l,qreWeights:s}},ux=e=>{let t=/(\w+(?:\s\w+)*): ([-0-9]+)/g,r=/^(\w+(?:\s\w+)*): ([-0-9]+)$/;if(!e)return null;let n=e.match(t);if(!n)return null;let o={};for(let a of n){let i=a.match(r);if(i){let s=i[1],u=i[2];o[s]=Number(u)}}return o},sx=(e,t)=>{let r=[],n;for(;(n=t.exec(e))!==null;)r.push(n);return r},TT=e=>{let t=/((?:[^:]+: [0-9]+, [0-9]+; )+)\n((?:\w+: [0-9]+; )+)/g,r=/([^:]+): ([0-9]+), ([0-9]+); /g;if(!e||!e[1])return null;let n=sx(e[1],t);if(!n)return null;let o={};for(let a of n){let i=sx(a[1],r),s={};for(let c of i)s[c[1]]={Correlation:Number(c[2]),"TF-IDF":Number(c[3])};let u=ux(a[2]);o[Object.keys(s).join(", ")]={terms:s,Weights:u}}return o},kT=e=>{let t=/(Expression:\s".*")\sScore:\s(?!0)([-0-9]+)\n+/g,r=t.exec(e),n=[];for(;r;)n.push({expression:r[1],score:parseInt(r[2],10)}),r=t.exec(e);return n};function lx(e){return e.search.response.results.map(r=>{let n=cx(r.rankingInfo);return{result:r,ranking:n}})}var Fn=S("fields/registerFieldsToInclude",e=>F(e,yu)),Ga=S("fields/fetchall/enable"),So=S("fields/fetchall/disable"),za=W("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),{accessToken:a,organizationId:i}=o.configuration,{apiBaseUrl:s}=o.configuration.search,u=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:i,url:s});return Ee(u)?n(u.error):u.success.fields});var Ef={collectionField:new E({emptyAllowed:!1,required:!1}),parentField:new E({emptyAllowed:!1,required:!1}),childField:new E({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new B({min:0,required:!1})},Rn=S("folding/register",e=>F(e,Ef)),bn=W("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),i=a.configuration.analytics.analyticsMode==="legacy"?await mn(a):ka(a,o),s=await n.search({...i,q:OT(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Ee(s)?r(s.error):{collectionId:e,results:s.success.results,searchUid:s.success.searchUid,rootResult:a.folding.collections[e].result}});function OT(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var vn=j(Gc(),e=>e.addCase(Fn,(t,r)=>{t.fieldsToInclude=[...new Set(t.fieldsToInclude.concat(r.payload))]}).addCase(Ga,t=>{t.fetchAllFields=!0}).addCase(So,t=>{t.fetchAllFields=!1}).addCase(za.fulfilled,(t,{payload:r})=>{t.fieldsDescription=r}).addCase(Rn,(t,{payload:r})=>{let n=$o().fields;t.fieldsToInclude.push(r.collectionField??n.collection,r.parentField??n.parent,r.childField??n.child)}));var qT=new Z({enabled:new G({default:!1})});function DT(e,t={}){if(!VT(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state;Re(e,qT,t.initialState,"buildRelevanceInspector").enabled&&n(pn());let i=s=>{e.logger.warn(`Flag [ ${s} ] is now activated. This should *not* be used in any production environment as it negatively impact performance.`)};return{...r,get state(){let s=o(),u=s.debug;if(!s.debug)return{isEnabled:u};let{executionReport:c,basicExpression:l,advancedExpression:m,constantExpression:d,userIdentities:p,rankingExpressions:f}=s.search.response,{fieldsDescription:A,fetchAllFields:C}=s.fields;return{isEnabled:u,rankingInformation:lx(s),executionReport:c,expressions:{basicExpression:l,advancedExpression:m,constantExpression:d},userIdentities:p,rankingExpressions:f,fieldsDescription:A,fetchAllFields:C}},enable(){n(pn()),i("debug")},disable(){n(ha()),n(So())},enableFetchAllFields(){n(Ga()),i("fetchAllFields")},disableFetchAllFields(){n(So())},fetchFieldsDescription(){!this.state.isEnabled&&n(pn()),n(za()),i("fieldsDescription"),e.logger.warn(`For production environment, please specify the necessary fields either when instantiating a ResultList controller, or by dispatching a registerFieldsToInclude action.
        
        https://docs.coveo.com/en/headless/latest/reference/search/controllers/result-list/#resultlistoptions
        https://docs.coveo.com/en/headless/latest/reference/search/actions/field/#registerfieldstoinclude`)}}}function VT(e){return e.addReducers({debug:ya,search:X,configuration:K,fields:vn}),!0}var NT=new J({each:k,required:!0}),dx=(e,t)=>(F(e,k),zo(t)?F(t,k):F(t,NT),{payload:{contextKey:e,contextValue:t}}),ho=S("context/set",e=>{for(let[t,r]of Object.entries(e))dx(t,r);return{payload:e}}),yo=S("context/add",e=>dx(e.contextKey,e.contextValue)),Co=S("context/remove",e=>F(e,k));var il=j(Qo(),e=>{e.addCase(ho,(t,r)=>{t.contextValues=r.payload}).addCase(yo,(t,r)=>{t.contextValues[r.payload.contextKey]=r.payload.contextValue}).addCase(Co,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.context.contextValues)})});var MT=["caseId","caseNumber"],LT={caseId:"caseContext",caseNumber:"caseContext"},Js=class extends Error{constructor(t){super(`The key "${t}" is reserved for internal use. Use ${LT[t]} to set this value.}`)}};function If(e){return MT.includes(e)}var QT=new Z({values:new q({options:{required:!1}})});function px(e,t={}){if(!_T(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a=Re(e,QT,t.initialState,"buildContext");return a.values&&n(ho(a.values)),{...r,get state(){return{values:o().context.contextValues}},set(i){n(ho(i))},...o().configuration.analytics.analyticsMode==="legacy"?BT(n):UT(n)}}var BT=e=>({add(t,r){e(yo({contextKey:t,contextValue:r}))},remove(t){e(Co(t))}}),UT=e=>({add(t,r){if(If(t))throw new Js(t);e(yo({contextKey:t,contextValue:r}))},remove(t){if(If(t))throw new Js(t);e(Co(t))}});function _T(e){return e.addReducers({context:il}),!0}function jT(e,t){return px(e,t)}var Ha=S("dictionaryFieldContext/set",e=>{let t=new q({options:{required:!0}}),r=F(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),o=new J({each:pe}),a=F(n,o).error;return a?{payload:e,error:a}:{payload:e}}),Wa=S("dictionaryFieldContext/add",e=>{let t=new q({options:{required:!0},values:{field:pe,key:pe}});return F(e,t)}),Ya=S("dictionaryFieldContext/remove",e=>F(e,pe));var sl=j(Bo(),e=>{e.addCase(Ha,(t,r)=>{t.contextValues=r.payload}).addCase(Wa,(t,r)=>{let{field:n,key:o}=r.payload;t.contextValues[n]=o}).addCase(Ya,(t,r)=>{delete t.contextValues[r.payload]}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.contextValues=r.payload.dictionaryFieldContext.contextValues)})});function $T(e){if(!GT(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state;return{...t,get state(){return{values:n().dictionaryFieldContext.contextValues}},set(o){r(Ha(o))},add(o,a){r(Wa({field:o,key:a}))},remove(o){r(Ya(o))}}}function GT(e){return e.addReducers({dictionaryFieldContext:sl}),!0}var mx=re(e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!=="",e=>e);var fx=(e,t)=>{let r={...hS(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var cl=j(Uc(),e=>{e.addCase(qa,t=>{t.enableDidYouMean=!0}).addCase(ju,t=>{t.enableDidYouMean=!1}).addCase($u,t=>{t.automaticallyCorrectQuery=!0}).addCase(Da,t=>{t.automaticallyCorrectQuery=!1}).addCase(T.pending,t=>{t.queryCorrection=Bc(),t.wasAutomaticallyCorrected=!1,t.wasCorrectedTo=""}).addCase(T.fulfilled,(t,r)=>{let{queryCorrection:n,queryCorrections:o}=r.payload.response;if(t.queryCorrectionMode==="legacy"){let a=o&&o[0]?o[0]:Bc();t.queryCorrection=a}t.queryCorrectionMode==="next"&&fx(t,n),t.wasAutomaticallyCorrected=r.payload.automaticallyCorrected,t.originalQuery=r.payload.originalQuery}).addCase(Rt,(t,r)=>{t.wasCorrectedTo=r.payload}).addCase(Va,(t,r)=>{t.queryCorrectionMode=r.payload})});function gx(e,t={}){if(!zT(e))throw O;let r=U(e),{dispatch:n}=e;n(qa()),t.options?.automaticallyCorrectQuery===!1&&n(Da()),n(Va(t.options?.queryCorrectionMode||"legacy"));let o=()=>e.state,a=()=>mx(o().didYouMean);return{...r,get state(){let i=o();return{originalQuery:i.didYouMean.originalQuery,wasCorrectedTo:i.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:i.didYouMean.wasAutomaticallyCorrected,queryCorrection:i.didYouMean.queryCorrection,hasQueryCorrection:a()}},applyCorrection(){n(Rt(this.state.queryCorrection.correctedQuery))}}}function zT(e){return e.addReducers({configuration:K,didYouMean:cl}),!0}function HT(e,t={}){let r=gx(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},applyCorrection(){r.applyCorrection(),n(T({legacy:Gu(),next:$y()}))}}}var te=k;var ne=S("facetOptions/update",(e={freezeFacetOrder:!0})=>F(e,{freezeFacetOrder:new G({required:!1})})),Le=S("facetOptions/facet/enable",e=>F(e,te)),Se=S("facetOptions/facet/disable",e=>F(e,te));var Xs={facetId:te,captions:new q({options:{required:!1}}),numberOfValues:new B({required:!1,min:1}),query:new E({required:!1,emptyAllowed:!0})};var WT={path:new J({required:!0,each:k}),displayValue:pe,rawValue:pe,count:new B({required:!0,min:0})},Ka=S("categoryFacet/selectSearchResult",e=>F(e,{facetId:te,value:new q({values:WT})})),Ja=S("categoryFacetSearch/register",e=>F(e,Xs));function Xa(e,t){let{facetId:r,criterion:n}=t,o=e[r]?.request;o&&(o.sortCriteria=n)}function Zs(e){e&&(e.currentValues=e.currentValues.map(t=>({...t,state:"idle"})),e.preventAutoSelect=!0)}function ul(e,t){e&&(e.numberOfValues=t)}function ll(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function Tf(e,t,r){e.currentValues=YT(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function YT(e,t){if(!e.length)return[];let r=Sx(e[0],t),n=r;for(let o of e.splice(1)){let a=Sx(o,t);n.children.push(a),n=a}return n.state="selected",n.retrieveChildren=!0,[r]}function Sx(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var KT={state:new fe({required:!0}),numberOfResults:new B({required:!0,min:0}),value:new E({required:!0,emptyAllowed:!0}),path:new J({required:!0,each:k}),moreValuesAvailable:new G({required:!1})};function kf(e){e.children.forEach(t=>{kf(t)}),gt({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},KT)}var Za={facetId:te,field:k,delimitingCharacter:new E({required:!1,emptyAllowed:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new fe({required:!1}),basePath:new J({required:!1,each:k}),filterByBasePath:new G({required:!1})};var er=S("categoryFacet/register",e=>F(e,Za)),Pn=S("categoryFacet/toggleSelectValue",e=>{try{return gt(e.facetId,k),kf(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Mr(t)}}}),tr=S("categoryFacet/deselectAll",e=>F(e,Za.facetId)),xo=S("categoryFacet/updateNumberOfValues",e=>F(e,{facetId:Za.facetId,numberOfValues:Za.numberOfValues})),ei=S("categoryFacet/updateSortCriterion",e=>F(e,{facetId:Za.facetId,criterion:new fe})),dl=S("categoryFacet/updateBasePath",e=>F(e,{facetId:Za.facetId,basePath:new J({each:k})}));var rr=j(rn(),e=>{e.addCase(er,(t,r)=>{let n=r.payload,{facetId:o}=n;if(o in t)return;let a=XT(n),i=a.numberOfValues;t[o]={request:a,initialNumberOfValues:i}}).addCase(ce.fulfilled,(t,r)=>r.payload?.categoryFacetSet??t).addCase(de,(t,r)=>{let n=r.payload.cf||{};Object.keys(t).forEach(o=>{let a=t[o].request,i=n[o]||[];(i.length||a.currentValues.length)&&Tf(a,i,t[o].initialNumberOfValues)})}).addCase(ei,(t,r)=>{let{facetId:n,criterion:o}=r.payload,a=t[n]?.request;a&&(a.sortCriteria=o)}).addCase(dl,(t,r)=>{let{facetId:n,basePath:o}=r.payload,a=t[n]?.request;a&&(a.basePath=[...o])}).addCase(Pn,(t,r)=>{let{facetId:n,selection:o,retrieveCount:a}=r.payload,i=t[n]?.request;if(!i)return;let{path:s}=o,u=s.slice(0,s.length-1),c=JT(i,u,a);if(c.length){let m=c[0];m.retrieveChildren=!0,m.state="selected",m.children=[];return}let l=yx(o.value,a);l.state="selected",c.push(l),i.numberOfValues=1}).addCase(tr,(t,r)=>{let n=r.payload;ll(t,n)}).addCase(xe,t=>{Object.keys(t).forEach(r=>ll(t,r))}).addCase(At,(t,r)=>Object.keys(t).forEach(n=>{t[n].request.preventAutoSelect=!r.payload.allow})).addCase(xo,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload,a=t[n]?.request;if(a){if(!a.currentValues.length)return ul(a,o);ZT(t,r.payload)}}).addCase(Ka,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n];if(!a)return;let i=[...o.path,o.rawValue];Tf(a.request,i,a.initialNumberOfValues)}).addCase(Zt.fulfilled,(t,r)=>{hx(t,r.payload.response.facets)}).addCase(T.fulfilled,(t,r)=>{hx(t,r.payload.response.facets)}).addCase(Se,(t,r)=>{ll(t,r.payload)})}),ec={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function JT(e,t,r){let n=e.currentValues;for(let o of t){let a=n[0];(!a||o!==a.value)&&(a=yx(o,r),n.length=0,n.push(a)),a.retrieveChildren=!1,a.state="idle",n=a.children}return n}function XT(e){return{...ec,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function yx(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function hx(e,t){t.forEach(r=>{if(!ek(e,r))return;let n=r.facetId,o=e[n]?.request;if(!o)return;let a=tk(o,r);o.currentValues=a?[]:o.currentValues,o.preventAutoSelect=!1})}function ZT(e,t){let{facetId:r,numberOfValues:n}=t,o=e[r]?.request.currentValues[0];if(o){for(;o.children.length&&o?.state!=="selected";)o=o.children[0];o.retrieveCount=n}}function ek(e,t){return t.facetId in e}function tk(e,t){let r=Ye(e.currentValues),n=Ye(t.values);return r.length!==n.length}var pl=e=>rk(e.cartItems,e.cart);function rk(e,t){let r=e.reduce((n,o)=>{let{productId:a,quantity:i}=t[o];return a in n||(n[a]={productId:a,quantity:0}),n[a].quantity+=i,n},{});return[...Object.values(r)]}var ti=(r=>(r.Relevance="relevance",r.Fields="fields",r))(ti||{}),ml=(r=>(r.Ascending="asc",r.Descending="desc",r))(ml||{});var MY=new q({options:{required:!1},values:{by:new Tt({enum:ti,required:!0}),fields:new J({each:new q({values:{name:new E,direction:new Tt({enum:ml})}})})}});var $Y=new q({options:{required:!1},values:{by:new Tt({enum:ti,required:!0}),fields:new J({each:new q({values:{field:new E({required:!0}),direction:new Tt({enum:ml}),displayName:new E}})})}});var dt=(e,t)=>({...ok(e,t),facets:[...ik(e),...sk(e)],...e.commerceSort&&{sort:ck(e.commerceSort.appliedSort)}}),ok=(e,t,r)=>{let{view:n,...o}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...o,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{...t.userAgent?{user:{userAgent:t.userAgent}}:{},view:{...n,...t.referrer?{referrer:t.referrer}:{}},capture:e.configuration.analytics.enabled,cart:pl(e.cart),source:jt(e.configuration.analytics)},...ak(e,r)}},ak=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function ik(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter(t=>e.commerceFacetSet?.[t]).map(t=>e.commerceFacetSet[t].request).filter(t=>t&&t.values.length>0)}function sk(e){return e.manualNumericFacetSet?Object.entries(e.manualNumericFacetSet).filter(([t,r])=>r.manualRange!==void 0).map(([t,r])=>({facetId:t,field:t,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[r.manualRange],initialNumberOfValues:1})):[]}function ck(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map(({name:t,direction:r})=>({field:t,direction:r}))}}var Cx=(e,t,r,n)=>{let a=`*${t.categoryFacetSearchSet[e].options.query}*`,i=t.commerceFacetSet[tc(e)]?.request,s=i&&uk(i)?i&&lk(i):[],u=s.length?[s]:[],c=t.commerceQuery?.query,{url:l,accessToken:m,organizationId:d,trackingId:p,language:f,country:A,currency:C,clientId:y,context:g,...h}=dt(t,n);return{url:l,accessToken:m,organizationId:d,facetId:tc(e),facetQuery:a,ignorePaths:u,trackingId:p,language:f,country:A,currency:C,clientId:y,context:g,query:c,...!r&&{...h,query:""}}};function uk(e){return e.type==="hierarchical"}var lk=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var xx=(e,t,r,n)=>{let a=`*${t.facetSearchSet[e].options.query}*`,i=t.commerceQuery?.query,{url:s,accessToken:u,organizationId:c,trackingId:l,language:m,country:d,currency:p,clientId:f,context:A,...C}=dt(t,n);return{url:s,accessToken:u,organizationId:c,facetId:tc(e),facetQuery:a,trackingId:l,language:m,country:d,currency:p,clientId:f,context:A,query:i,...!r&&{...C,query:""}}};var Ax=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:o,navigatorContext:a,apiClient:i}})=>{let s=n();o(t,k);let u=dk(s,t)||pk(s,t)?xx(t,s,e,a):Cx(t,s,e,a),c=await i.facetSearch(u,r);return{facetId:t,response:c}},wn=W("commerce/facetSearch/executeSearch",Ax(!1)),En=W("commerce/facetSearch/facetFieldSuggest",Ax(!0)),dk=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,pk=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some(r=>r.facetId===t&&r.type==="regular"):!1,fl="field_suggestion:";function tc(e){return e.startsWith(fl)?e.slice(fl.length):e}function In(e){return e.startsWith(fl)?e:`${fl}${e}`}var pt=e=>e.error!==void 0;var gl=re(e=>e.commercePagination?.principal.perPage||0,e=>e),IK=re((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0,e=>e),Sl=re(e=>e.commercePagination?.principal.totalEntries||0,e=>e),TK=re((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0,e=>e),kK=re(e=>e.commercePagination?.principal.page||0,e=>e),OK=re((e,t)=>e.commercePagination?.recommendations[t]?.page||0,e=>e);var LK=re(e=>e[Tr].productListing.responseId,e=>e),QK=re(e=>e.productListing.responseId,e=>e),BK=re(e=>e.productListing.requestId,e=>e),Of=re(e=>e.productListing?.products.length||0,e=>e),Fx=re(e=>({total:Sl(e),current:Of(e)}),({current:e,total:t})=>e<t),UK=re(e=>e.productListing?.isLoading,e=>H(e)?!1:e),_K=re(e=>e.productListing?.error,e=>e??null);var ri=W("commerce/productListing/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t(),i=await n.getProductListing(dt(a,o));return pt(i)?r(i.error):{response:i.success}}),e3=W("commerce/productListing/fetchMoreProducts",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:o}})=>{let a=t();if(!Fx(a))return null;let s=gl(a),c=Of(a)/s,l=await n.getProductListing({...dt(a,o),page:c});return pt(l)?r(l.error):{response:l.success}}),fk={child:new q({options:{required:!0},values:{permanentid:new E({required:!0})}})},t3=S("commerce/productListing/promoteChildToParent",e=>F(e,fk));var Rx=S("commerce/querySuggest/clear",e=>F(e,{id:k})),Tn=W("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,{id:k});let i=t(),s=gk(e.id,i,a),u=await n.querySuggest(s);return pt(u)?r(u.error):{id:e.id,query:s.query,...u.success}}),bx=S("commerce/querySuggest/register",e=>F(e,{id:k,count:new B({min:0})})),vx=S("commerce/querySuggest/selectSuggestion",e=>F(e,{id:k,expression:pe})),gk=(e,t,r)=>{let{view:n,...o}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...o,...t.configuration.analytics.enabled?{clientId:r.clientId}:{},context:{...r.userAgent?{user:{userAgent:r.userAgent}}:{},view:{...n,...r.referrer?{referrer:r.referrer}:{}},capture:t.configuration.analytics.enabled,cart:pl(t.cart),source:jt(t.configuration.analytics)}}};var f3=S("commerce/facets/core/updateNumberOfValues",e=>F(e,{facetId:k,numberOfValues:new B({required:!0,min:1})})),g3=S("commerce/facets/core/updateIsFieldExpanded",e=>F(e,{facetId:k,isFieldExpanded:new G({required:!0})})),Px=S("commerce/facets/core/clearAll"),S3=S("commerce/facets/core/deselectAllValues",e=>F(e,{facetId:k})),h3=S("commerce/facets/core/updateFreezeCurrentValues",e=>F(e,{facetId:k,freezeCurrentValues:new G({required:!0})})),wx=S("commerce/facets/core/updateAutoSelectionForAll",e=>F(e,{allow:new G({required:!0})}));var hl={slotId:Rh},Sk={...hl,pageSize:new B({required:!0,min:0})},F3=S("commerce/pagination/setPageSize",e=>F(e,Sk)),hk={...hl,page:new B({required:!0,min:0})},Ex=S("commerce/pagination/selectPage",e=>F(e,hk)),R3=S("commerce/pagination/nextPage",e=>F(e,hl)),b3=S("commerce/pagination/previousPage",e=>F(e,hl)),v3=S("commerce/pagination/registerRecommendationsSlot",e=>F(e,{slotId:k}));var yl=S("commerce/query/update",e=>F(e,{query:new E}));var Ix=S("commerce/triggers/query/updateIgnore",e=>F(e,{q:new E({emptyAllowed:!0,required:!0})})),Tx=S("commerce/triggers/query/applyModification",e=>F(e,new q({values:{originalQuery:le,modification:le}})));function qf(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function Df(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function Ao(e,t,r,n){if(e===void 0)return{};let o=Object.entries(e).filter(([a])=>t(a)).map(([a,{request:i}])=>{let s=r(i);return s.length?{[a]:s}:{}}).reduce((a,i)=>({...a,...i}),{});return Object.keys(o).length?{[n]:o}:{}}var a4=re(e=>e[Tr].commerceSearch.responseId,e=>e),i4=re(e=>e.commerceSearch.responseId,e=>e),s4=re(e=>e.commerceSearch.requestId,e=>e),Vf=re(e=>e.commerceSearch?.products.length||0,e=>e),kx=re(e=>({total:Sl(e),current:Vf(e)}),({current:e,total:t})=>e<t),c4=re(e=>e.commerceSearch?.isLoading,e=>H(e)?!1:e),u4=re(e=>e.commerceSearch?.error,e=>e??null),Cl=re(e=>e.commerceQuery?.query,e=>e??""),l4=re(e=>e.commerceSearch?.queryExecuted,e=>e),Ox=(e,t)=>H(t.queryCorrection?.correctedQuery)?Cl(e):t.queryCorrection.correctedQuery;var rc=class{constructor(t){this.config=t}async process(t){return this.processQueryErrorOrContinue(t)??await this.processQueryCorrectionsOrContinue(t)??await this.processQueryTriggersOrContinue(t)??this.processSuccessResponse(t)}async fetchFromAPI(t){let r=new Date().getTime(),n=await this.extra.apiClient.search(t),o=new Date().getTime()-r,a=this.getState().commerceQuery.query||"";return{response:n,duration:o,queryExecuted:a,requestExecuted:t}}processSuccessResponse(t){return{...t,response:this.getSuccessResponse(t),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(t){return pt(t.response)?this.rejectWithValue(t.response.error):null}async processQueryCorrectionsOrContinue(t){let r=this.getState(),n=this.getSuccessResponse(t);if(!n||!r.didYouMean)return null;let{queryCorrection:o}=n;if(!(!H(o)&&!H(o.correctedQuery)))return null;let{correctedQuery:i,originalQuery:s}=n.queryCorrection;return this.onUpdateQueryForCorrection(i),{...t,response:{...n},queryExecuted:Ox(r,n),originalQuery:s}}async processQueryTriggersOrContinue(t){let r=this.getSuccessResponse(t);if(!r)return null;let n=r.triggers.find(s=>s.type==="query")?.content||"";if(!n)return null;if(this.getState().triggers?.queryModification.queryToIgnore===n)return this.dispatch(Ix({q:""})),null;let a=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(n);return pt(i.response)?this.rejectWithValue(i.response.error):{...i,response:{...i.response.success},originalQuery:a}}async automaticallyRetryQueryWithTriggerModification(t){return this.dispatch(Tx({newQuery:t,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(t),await this.fetchFromAPI({...dt(this.getState(),this.navigatorContext),query:t})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let t=this.getState();return t.commerceQuery.query!==void 0?t.commerceQuery.query:""}getSuccessResponse(t){return pt(t.response)?null:t.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(t){this.dispatch(yl({query:t}))}};var kn=W("commerce/search/executeSearch",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra,a=dt(n,o),i=Cl(n),s=new rc(t),u=await s.fetchFromAPI({...a,query:i});return s.process(u)}),M4=W("commerce/search/fetchMoreProducts",async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:o}=t.extra;if(!kx(n))return null;let i=gl(n),u=Vf(n)/i,c=Cl(n),l=dt(n,o),m=new rc(t),d=await m.fetchFromAPI({...l,query:c,page:u});return m.process(d)}),L4=W("commerce/search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;F(e,{query:new E,clearFilters:new G}),e.clearFilters&&(r(Px()),r(Ht())),r(wx({allow:!0})),r(yl({query:e.query})),r(Ex({page:0}))}),Q4=W("commerce/search/fetchInstantProducts",async(e,{getState:t,rejectWithValue:r,extra:n})=>{let o=t(),{apiClient:a,navigatorContext:i}=n,{q:s}=e,u=await a.productSuggestions({...dt(o,i),query:s});if(pt(u))return r(u.error);let c=u.success.products.slice(0,5);return{response:{...u.success,products:c}}}),yk={child:new q({options:{required:!0},values:{permanentid:new E({required:!0})}})},B4=S("commerce/search/promoteChildToParent",e=>F(e,yk));function nc(e,t,r){let{facetId:n}=t;if(e[n])return;let o=!1,a={...Ze,...t},i=r();e[n]={options:a,isLoading:o,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function xl(e,t){let{facetId:r,...n}=t,o=e[r];o&&(o.options={...o.options,...n})}function On(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function qn(e,t){let r=e[t];r&&(r.isLoading=!1)}function Al(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=o)}function Fl(e,t,r){let{facetId:n,response:o}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in o&&(a.response=o.success))}function Rl(e,t,r,n){let{facetId:o,response:a}=t,i=In(o),s=e[i];if(!s)nc(e,{facetId:i},n),s=e[i];else if(s.requestId!==r)return;s.isLoading=!1,"success"in a&&(s.response=a.success)}function qx(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets)o.facetId in e||o.type!=="regular"||(e[o.facetId]={options:{...Ze,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Ze.numberOfValues,requestId:r})}function Dx(e,t,r,n){if(t.fieldSuggestionsFacets)for(let o of t.fieldSuggestionsFacets){let a=In(o.facetId);a in e||o.type!=="hierarchical"||(e[a]={options:{...Ze,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Ze.numberOfValues,requestId:r})}}function oc(e,t,r){let{facetId:n}=t,o=e[n];o&&(o.requestId="",o.isLoading=!1,o.response=r(),o.options.numberOfValues=o.initialNumberOfValues,o.options.query=Ze.query)}function Ur(e,t){Object.keys(e).forEach(r=>oc(e,{facetId:r},t))}var Ze={captions:{},numberOfValues:10,query:""};var Vx=async(e,t,r,n)=>{let o=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:i,query:s,numberOfValues:u}=o,{field:c,delimitingCharacter:l,basePath:m,filterFacetCount:d}=a,p=Ck(a),f=p.length?[p]:[],A=`*${s}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:m,captions:i,numberOfValues:u,query:A,field:c,delimitingCharacter:l,ignorePaths:f,filterFacetCount:d,type:"hierarchical",...n?{}:{searchContext:(await bt(t,r)).request}}},Ck=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Nx=async(e,t,r,n)=>{let{captions:o,query:a,numberOfValues:i}=t.facetSearchSet[e].options,{field:s,currentValues:u,filterFacetCount:c}=t.facetSet[e].request,l=u.filter(d=>d.state!=="idle").map(d=>d.value),m=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:o,numberOfValues:i,query:m,field:s,ignoreValues:l,filterFacetCount:c,type:"specific",...n?{}:{searchContext:(await bt(t,r)).request}}};var Mx=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{let i=r(),s;o(t,k),xk(i,t)?s=await Nx(t,i,a,e):s=await Vx(t,i,a,e);let u=await n.facetSearch(s);return{facetId:t,response:u}},Ie=W("facetSearch/executeSearch",Mx(!1)),nr=W("facetSearch/executeSearch",Mx(!0)),ni=S("facetSearch/clearResults",e=>F(e,{facetId:te})),xk=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var Lx={facetId:te,value:new q({values:{displayValue:pe,rawValue:pe,count:new B({required:!0,min:0})}})},bl=S("facetSearch/register",e=>F(e,Xs)),Dn=S("facetSearch/update",e=>F(e,Xs)),Fo=S("facetSearch/toggleSelectValue",e=>F(e,Lx)),Ro=S("facetSearch/toggleExcludeValue",e=>F(e,Lx));var oi=j(jc(),e=>{e.addCase(Ja,(t,r)=>{let n=r.payload;nc(t,n,bo)}).addCase(Dn,(t,r)=>{xl(t,r.payload)}).addCase(wn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;On(t,n,r.meta.requestId)}).addCase(En.pending,(t,r)=>{let{facetId:n}=r.meta.arg;On(t,n,r.meta.requestId)}).addCase(Ie.pending,(t,r)=>{let n=r.meta.arg;On(t,n,r.meta.requestId)}).addCase(wn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;qn(t,n)}).addCase(En.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;qn(t,In(n))}).addCase(Ie.rejected,(t,r)=>{let n=r.meta.arg;qn(t,n)}).addCase(wn.fulfilled,(t,r)=>{Fl(t,r.payload,r.meta.requestId)}).addCase(En.fulfilled,(t,r)=>{Rl(t,r.payload,r.meta.requestId,bo)}).addCase(Tn.fulfilled,(t,r)=>{Dx(t,r.payload,r.meta.requestId,bo)}).addCase(Ie.fulfilled,(t,r)=>{Al(t,r.payload,r.meta.requestId)}).addCase(ni,(t,{payload:{facetId:r}})=>{oc(t,{facetId:r},bo)}).addCase(ri.fulfilled,t=>Ur(t,bo)).addCase(kn.fulfilled,t=>Ur(t,bo)).addCase(T.fulfilled,t=>{Ur(t,bo)})});function bo(){return{moreValuesAvailable:!1,values:[]}}var ai=e=>D("analytics/facet/showMore",(t,r)=>{F(e,te);let n=pa(e,ct(r));return t.makeFacetShowMore(n)}),ii=e=>D("analytics/facet/showLess",(t,r)=>{F(e,te);let n=pa(e,ct(r));return t.makeFacetShowLess(n)}),or=e=>D("analytics/facet/sortChange",(t,r)=>{F(e,{facetId:te,criterion:new fe({required:!0})});let{facetId:n,criterion:o}=e,a=ct(r),s={...pa(n,a),criteria:o};return t.makeFacetUpdateSort(s)}),Te=e=>D("analytics/facet/reset",(t,r)=>{F(e,te);let n=ct(r),o=pa(e,n);return t.makeFacetClearAll(o)}),Ae=e=>D("analytics/facet/select",(t,r)=>{F(e,{facetId:te,facetValue:k});let n=ct(r),o=ma(e,n);return t.makeFacetSelect(o)}),mt=e=>D("analytics/facet/exclude",(t,r)=>{F(e,{facetId:te,facetValue:k});let n=ct(r),o=ma(e,n);return t.makeFacetExclude(o)}),Dt=e=>D("analytics/facet/deselect",(t,r)=>{F(e,{facetId:te,facetValue:k});let n=ct(r),o=ma(e,n);return t.makeFacetDeselect(o)}),_r=e=>D("analytics/facet/unexclude",(t,r)=>{F(e,{facetId:te,facetValue:k});let n=ct(r),o=ma(e,n);return t.makeFacetUnexclude(o)}),si=e=>D("analytics/facet/breadcrumb",(t,r)=>{F(e,{facetId:te,facetValue:k});let n=ma(e,ct(r));return t.makeBreadcrumbFacet(n)}),Vn=()=>({actionCause:"facetUpdateSort"}),Qe=()=>({actionCause:"facetClearAll"}),Pe=()=>({actionCause:"facetSelect"}),ar=()=>({actionCause:"facetExclude"}),jr=()=>({actionCause:"facetDeselect"}),Nf=()=>({actionCause:"facetUnexclude"}),vl=()=>({actionCause:"breadcrumbFacet"});var ir=(e,t)=>e.facetOptions.facets[t]?.enabled??!0;var sr=new E({regex:/^[a-zA-Z0-9-_]+$/}),cr=new E({required:!0}),Qx=new J({each:new E}),Bx=new E,Ux=new G,ur=new G,lr=new B({min:0}),Vt=new B({min:1}),Pl=new G({required:!0}),Ak=new q,Fk=new E,Rk={captions:Ak,numberOfValues:Vt,query:Fk},ci=new q({values:Rk}),wl=new q({options:{required:!1},values:{type:new E({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new J({required:!0,max:25,each:new E({emptyAllowed:!1,required:!0})})}}),_x=new G,El=new J({min:1,max:25,required:!1,each:new E({emptyAllowed:!1,required:!0})});var vo={value:k,numberOfResults:new B({min:0}),state:k};var bk={facetId:te,field:new E({required:!0,emptyAllowed:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new fe({required:!1}),resultsMustMatch:new fe({required:!1}),allowedValues:wl,customSort:El},dr=S("facet/register",e=>F(e,bk)),pr=S("facet/toggleSelectValue",e=>F(e,{facetId:te,selection:new q({values:vo})})),mr=S("facet/toggleExcludeValue",e=>F(e,{facetId:te,selection:new q({values:vo})})),he=S("facet/deselectAll",e=>F(e,te)),ui=S("facet/updateSortCriterion",e=>F(e,{facetId:te,criterion:new fe({required:!0})})),Po=S("facet/updateNumberOfValues",e=>F(e,{facetId:te,numberOfValues:new B({required:!0,min:1})})),wo=S("facet/updateIsFieldExpanded",e=>F(e,{facetId:te,isFieldExpanded:new G({required:!0})})),$r=S("facet/updateFreezeCurrentValues",e=>F(e,{facetId:te,freezeCurrentValues:new G({required:!0})}));function Eo(e){let t=jx(e.start,e),r=jx(e.end,e),n=e.endInclusive??!1,o=e.state??"idle";return{start:t,end:r,endInclusive:n,state:o}}function jx(e,t){let{dateFormat:r}=t;return By(e)?(mo(e),My(e)):typeof e=="string"&&Kt(e)?(mo(e),e):(Uu(e,r),Us(po(e,r)))}var li=S("rangeFacet/updateSortCriterion",e=>F(e,{facetId:te,criterion:new fe({required:!0})}));var Io={state:k,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new G({required:!0}),numberOfResults:new B({required:!0,min:0})},To={start:k,end:k,endInclusive:new G({required:!0}),state:k,numberOfResults:new B({required:!0,min:0})},ko=e=>({facetId:te,selection:typeof e.start=="string"?new q({values:To}):new q({values:Io})});var vk={start:k,end:k,endInclusive:new G({required:!0}),state:k},Pk={facetId:te,field:k,currentValues:new J({required:!1,each:new q({values:vk})}),generateAutomaticRanges:new G({required:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function $x(e){return Kt(e)?js(e):e}function Il(e){e.currentValues&&e.currentValues.forEach(t=>{let{start:r,end:n}=Eo(t);if(po($x(r)).isAfter(po($x(n))))throw new Error(`The start value is greater than the end value for the date range ${t.start} to ${t.end}`)})}var fr=S("dateFacet/register",e=>{try{return gt(e,Pk),Il(e),{payload:e,error:null}}catch(t){return{payload:e,error:Mr(t)}}}),gr=S("dateFacet/toggleSelectValue",e=>F(e,{facetId:te,selection:new q({values:To})})),Sr=S("dateFacet/toggleExcludeValue",e=>F(e,{facetId:te,selection:new q({values:To})})),Gr=S("dateFacet/updateFacetValues",e=>{try{return gt(e,{facetId:te,values:new J({each:new q({values:To})})}),Il({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Mr(t)}}}),Tl=li,kl=he;var wk={state:k,start:new B({required:!0}),end:new B({required:!0}),endInclusive:new G({required:!0})},Ek={facetId:te,field:k,currentValues:new J({required:!1,each:new q({values:wk})}),generateAutomaticRanges:new G({required:!0}),filterFacetCount:new G({required:!1}),injectionDepth:new B({required:!1,min:0}),numberOfValues:new B({required:!1,min:1}),sortCriteria:new fe({required:!1}),rangeAlgorithm:new fe({required:!1})};function Ol(e){e.currentValues&&e.currentValues.forEach(({start:t,end:r})=>{if(t>r)throw new Error(`The start value is greater than the end value for the numeric range ${t} to ${r}`)})}var hr=S("numericFacet/register",e=>{try{return F(e,Ek),Ol(e),{payload:e,error:null}}catch(t){return{payload:e,error:Mr(t)}}}),yr=S("numericFacet/toggleSelectValue",e=>F(e,{facetId:te,selection:new q({values:Io})})),Cr=S("numericFacet/toggleExcludeValue",e=>F(e,{facetId:te,selection:new q({values:Io})})),zr=S("numericFacet/updateFacetValues",e=>{try{return gt(e,{facetId:te,values:new J({each:new q({values:Io})})}),Ol({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Mr(t)}}}),ql=li,Dl=he;var ke=j(_o(),e=>{e.addCase(ne,(t,r)=>({...t,...r.payload})).addCase(T.fulfilled,t=>{t.freezeFacetOrder=!1}).addCase(T.rejected,t=>{t.freezeFacetOrder=!1}).addCase(ce.fulfilled,(t,r)=>r.payload?.facetOptions??t).addCase(er,(t,r)=>{t.facets[r.payload.facetId]=Uo()}).addCase(dr,(t,r)=>{t.facets[r.payload.facetId]=Uo()}).addCase(fr,(t,r)=>{t.facets[r.payload.facetId]=Uo()}).addCase(hr,(t,r)=>{t.facets[r.payload.facetId]=Uo()}).addCase(Le,(t,r)=>{t.facets[r.payload].enabled=!0}).addCase(Se,(t,r)=>{t.facets[r.payload].enabled=!1}).addCase(de,(t,r)=>{[...Object.keys(r.payload.f??{}),...Object.keys(r.payload.fExcluded??{}),...Object.keys(r.payload.cf??{}),...Object.keys(r.payload.nf??{}),...Object.keys(r.payload.df??{})].forEach(n=>{n in t||(t.facets[n]=Uo()),t.facets[n].enabled=!0})})});function Gx(e,t){let{field:r,state:n}=e;if(!Ik(e))return r;let o=`${r}_`,a=Tk(o,n);return Ok(r,t),`${o}${a}`}function Ik(e){let{field:t,state:r}=e;return zx(r).some(o=>o&&t in o)}function Tk(e,t){let n=zx(t).map(o=>Object.keys(o||{})).reduce((o,a)=>o.concat(a),[]);return kk(n,e)+1}function zx(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:o}=e;return[t,r,n,o]}function kk(e,t){return e.map(a=>{let i=a.split(t)[1],s=parseInt(i,10);return Number.isNaN(s)?0:s}).sort().pop()??0}function Ok(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function Be(e,t){let{state:r,logger:n}=e,{field:o,facetId:a}=t;return a||Gx({field:o,state:r},n)}var Hx=["alphanumeric","occurrences"];var Wx=new Z({field:cr,basePath:Qx,delimitingCharacter:Bx,facetId:sr,facetSearch:ci,filterByBasePath:Ux,filterFacetCount:ur,injectionDepth:lr,numberOfValues:Vt,sortCriteria:new E({constrainTo:Hx})});function Yx(e,t){if(!qk(e))throw O;let r=U(e),{dispatch:n}=e,o=Be(e,t.options),a={...ec,...Mc("facetSearch",t.options),field:t.options.field,facetId:o},i={facetSearch:{...Ze,...t.options.facetSearch},...a};ge(e,Wx,i,"buildCategoryFacet");let s=()=>jm(e.state,o),u=()=>_m(e.state,o),c=()=>Gt(e.state),l=()=>ir(e.state,o);return n(er(a)),{...r,toggleSelect(m){let d=i.numberOfValues;n(Pn({facetId:o,selection:m,retrieveCount:d})),n(ne())},deselectAll(){n(tr(o)),n(ne())},sortBy(m){n(ei({facetId:o,criterion:m})),n(ne())},isSortedBy(m){return s().sortCriteria===m},showMoreValues(){let{numberOfValues:m}=i,{activeValue:d,valuesAsTrees:p}=this.state,f=(d?.children.length??p.length)+m;n(xo({facetId:o,numberOfValues:f})),n(ne())},showLessValues(){let{numberOfValues:m}=i;n(xo({facetId:o,numberOfValues:m})),n(ne())},enable(){n(Le(o))},disable(){n(Se(o))},get state(){let m=s(),d=u(),p=c(),f=l(),A=d?.values??[],C=A.some(I=>I.children.length>0)??!1,{parents:y,values:g}=ay(d?.values),h=Ye(A),x=h.length?h[h.length-1]:void 0,R=!!x,P=x?.moreValuesAvailable??d?.moreValuesAvailable??!1,b=x?x.children.length>i.numberOfValues:A.length>i.numberOfValues;return{facetId:o,parents:y,selectedValueAncestry:h,values:g,isHierarchical:C,valuesAsTrees:A,activeValue:x,isLoading:p,hasActiveValues:R,canShowMoreValues:P,canShowLessValues:b,sortCriteria:m.sortCriteria,enabled:f}}}}function qk(e){return e.addReducers({categoryFacetSet:rr,categoryFacetSearchSet:oi,facetOptions:ke,configuration:K,search:X}),!0}function di(e,t){let r=e.dispatch,{options:n,getFacetSearch:o,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:i}=t,{facetId:s}=n;return{updateText(u){r(Dn({facetId:s,query:u,numberOfValues:o().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:u,options:c}=o();r(Dn({facetId:s,numberOfValues:c.numberOfValues+u})),r(t.isForFieldSuggestions?i(s):a(s))},search(){r(t.isForFieldSuggestions?i(s):a(s))},clear(){r(ni({facetId:s}))},updateCaptions(u){r(Dn({facetId:s,captions:u}))},get state(){let{response:u,isLoading:c,options:l}=o(),{query:m}=l,d=u.values;return{...u,values:d,isLoading:c,query:m}}}}function Kx(e,t){let{dispatch:r}=e,n={...Ze,...t.options},{facetId:o}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[o]:e[Tr].categoryFacetSearchSet[o];r(Ja(n));let i=di(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...i,select(s){r(Ka({facetId:o,value:s})),t.select(s)},get state(){return i.state}}}function Vl(e,t){let{executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:o,isForFieldSuggestions:a}=t,{dispatch:i}=e,s={...Ze,...t.options},{facetId:u}=s,c=()=>e.state.categoryFacetSearchSet[u],l=Kx(e,{options:{...s},executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:o,isForFieldSuggestions:a});i(Ja(s));let m=di(e,{options:s,getFacetSearch:c,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:Ie,executeFieldSuggestActionCreator:nr});return{...m,...l,get state(){return{...m.state,...l.state}}}}function Dk(e,t){if(!Vk(e))throw O;let r=Yx(e,t),{dispatch:n}=e,o=()=>r.state.facetId,a=Vl(e,{options:{facetId:o(),...t.options.facetSearch},executeFacetSearchActionCreator:Ie,executeFieldSuggestActionCreator:nr,select:u=>{n(ne()),n(T({legacy:Ae({facetId:o(),facetValue:u.rawValue}),next:Pe()}))},isForFieldSuggestions:!1}),{state:i,...s}=a;return{...r,facetSearch:s,toggleSelect(u){r.toggleSelect(u),n(T({legacy:Nk(o(),u),next:Mk(u)}))},deselectAll(){r.deselectAll(),n(T({legacy:Te(o()),next:Qe()}))},sortBy(u){r.sortBy(u),n(T({legacy:or({facetId:o(),criterion:u}),next:Vn()}))},showMoreValues(){r.showMoreValues(),n(Zt({legacy:ai(o())}))},showLessValues(){r.showLessValues(),n(Zt({legacy:ii(o())}))},get state(){return{...r.state,facetSearch:a.state}}}}function Vk(e){return e.addReducers({categoryFacetSet:rr,categoryFacetSearchSet:oi,configuration:K,search:X}),!0}function Nk(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Dt(r):Ae(r)}function Mk(e){return e.state==="selected"?jr():Pe()}var Lk=Intl.supportedValuesOf("currency"),Qk=new E({required:!0,emptyAllowed:!1,constrainTo:Lk}),Mf={url:k},Lf={language:k,country:k,currency:Qk,view:new q({options:{required:!0},values:Mf})},W5=new Z(Lf);var Z5=S("commerce/context/set",e=>F(e,Lf)),Jx=S("commerce/context/setView",e=>F(e,Mf));var pi=j($c(),e=>{e.addCase(bl,(t,r)=>{let n=r.payload;nc(t,n,Nn)}).addCase(Dn,(t,r)=>{xl(t,r.payload)}).addCase(wn.pending,(t,r)=>{let{facetId:n}=r.meta.arg;On(t,n,r.meta.requestId)}).addCase(En.pending,(t,r)=>{let{facetId:n}=r.meta.arg;On(t,In(n),r.meta.requestId)}).addCase(Ie.pending,(t,r)=>{let n=r.meta.arg;On(t,n,r.meta.requestId)}).addCase(wn.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;qn(t,n)}).addCase(En.rejected,(t,r)=>{let{facetId:n}=r.meta.arg;qn(t,In(n))}).addCase(Ie.rejected,(t,r)=>{let n=r.meta.arg;qn(t,n)}).addCase(wn.fulfilled,(t,r)=>{Fl(t,r.payload,r.meta.requestId)}).addCase(En.fulfilled,(t,r)=>{Rl(t,r.payload,r.meta.requestId,Nn)}).addCase(Tn.fulfilled,(t,r)=>{qx(t,r.payload,r.meta.requestId,Nn)}).addCase(Ie.fulfilled,(t,r)=>{Al(t,r.payload,r.meta.requestId)}).addCase(ni,(t,{payload:r})=>{oc(t,r,Nn)}).addCase(T.fulfilled,t=>{Ur(t,Nn)}).addCase(ri.fulfilled,t=>Ur(t,Nn)).addCase(kn.fulfilled,t=>Ur(t,Nn)).addCase(Jx,t=>Ur(t,Nn))});function Nn(){return{moreValuesAvailable:!1,values:[]}}var Xx=()=>hy("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new lo(e));var E8=S("productlisting/setUrl",e=>F(e,{url:new E({required:!0,url:!0})})),I8=S("productlisting/setAdditionalFields",e=>F(e,{additionalFields:new J({required:!0,each:new E({required:!0,emptyAllowed:!1})})})),Mn=W("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:o})=>{let a=t(),{apiClient:i}=o,s=await i.getProducts(await Bk(a));return pt(s)?(r(Yt(s.error)),n(s.error)):{response:s.success,analyticsAction:Xx()}}),Bk=async e=>{let t=_k(e),r=await ht(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Uk(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Uk(e){return e.debug}function _k(e){return fo(jk(e),e.facetOrder??[])}function jk(e){return[...lt(e.facetSet??{}),...lt(e.numericFacetSet??{}),...lt(e.dateFacetSet??{}),...lt(e.categoryFacetSet??{})]}var xr=j(nn(),e=>{e.addCase(dr,(t,r)=>{let{facetId:n}=r.payload;n in t||(t[n]=yS($k(r.payload)))}).addCase(ce.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.facetSet).length!==0)return r.payload.facetSet}).addCase(de,(t,r)=>{let n=r.payload.f||{},o=r.payload.fExcluded||{};Object.keys(t).forEach(i=>{let{request:s}=t[i],u=n[i]||[],c=o[i]||[],l=u.length+c.length,m=s.currentValues.filter(d=>!u.includes(d.value)&&!c.includes(d.value));s.currentValues=[...u.map(Zx),...c.map(eA),...m.map(zk)],s.preventAutoSelect=l>0,s.numberOfValues=Math.max(l,s.numberOfValues)})}).addCase(pr,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===o.value);if(!i){Nl(a,o);return}let s=i.state==="selected";i.state=s?"idle":"selected",a.freezeCurrentValues=!0}).addCase(mr,(t,r)=>{let{facetId:n,selection:o}=r.payload,a=t[n]?.request;if(!a)return;a.preventAutoSelect=!0;let i=a.currentValues.find(u=>u.value===o.value);if(!i){Nl(a,o);return}let s=i.state==="excluded";i.state=s?"idle":"excluded",a.freezeCurrentValues=!0}).addCase($r,(t,r)=>{let{facetId:n,freezeCurrentValues:o}=r.payload,a=t[n]?.request;a&&(a.freezeCurrentValues=o)}).addCase(he,(t,r)=>{Zs(t[r.payload]?.request)}).addCase(xe,t=>{Object.values(t).filter(r=>r.hasBreadcrumbs).forEach(({request:r})=>Zs(r))}).addCase(Ht,t=>{Object.values(t).filter(r=>!r.hasBreadcrumbs).forEach(({request:r})=>Zs(r))}).addCase(At,(t,r)=>Object.values(t).forEach(n=>{n.request.preventAutoSelect=!r.payload.allow})).addCase(ui,(t,r)=>{Xa(t,r.payload)}).addCase(Po,(t,r)=>{let{facetId:n,numberOfValues:o}=r.payload;ul(t[n]?.request,o)}).addCase(wo,(t,r)=>{let{facetId:n,isFieldExpanded:o}=r.payload,a=t[n]?.request;a&&(a.isFieldExpanded=o)}).addCase(T.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Qf(t[o.facetId]?.request,o))}).addCase(Mn.fulfilled,(t,r)=>{(r.payload.response?.facets?.results||[]).forEach(o=>Qf(t[o.facetId]?.request,o))}).addCase(Zt.fulfilled,(t,r)=>{r.payload.response.facets.forEach(o=>Qf(t[o.facetId]?.request,o))}).addCase(Fo,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:i}=o,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="selected";return}let c=Zx(i);Nl(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Ro,(t,r)=>{let{facetId:n,value:o}=r.payload,a=t[n]?.request;if(!a)return;let{rawValue:i}=o,{currentValues:s}=a,u=s.find(l=>l.value===i);if(u){u.state="excluded";return}let c=eA(i);Nl(a,c),a.freezeCurrentValues=!0,a.preventAutoSelect=!0}).addCase(Se,(t,r)=>{if(!(r.payload in t))return;let{request:n}=t[r.payload];Zs(n)})});function Nl(e,t){let{currentValues:r}=e,n=r.findIndex(s=>s.state==="idle"),o=n===-1?r.length:n,a=r.slice(0,o),i=r.slice(o+1);e.currentValues=[...a,t,...i],e.numberOfValues=e.currentValues.length}function Qf(e,t){e&&(e.currentValues=t.values.map(Gk),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var ac={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function $k(e){return{...ac,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Gk(e){let{value:t,state:r}=e;return{value:t,state:r}}function Zx(e){return{value:e,state:"selected"}}function eA(e){return{value:e,state:"excluded"}}function zk(e){return{...e,state:"idle"}}var Ml=e=>e.state==="selected",Ll=e=>e.state==="excluded",Ql=(e,t)=>{let r={facetId:e,facetValue:t.value};return Ml(t)?Dt(r):Ae(r)},Bl=e=>Ml(e)?jr():Pe(),tA=(e,t)=>{let r={facetId:e,facetValue:t.value};return Ll(t)?_r(r):mt(r)},rA=e=>Ll(e)?Nf():ar();function Ul(e,t){let{dispatch:r}=e,{options:n,select:o,exclude:a,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:u}=t,{facetId:c}=n,l=()=>"state"in e?e.state.facetSearchSet[c]:e[Tr].facetSearchSet[c];r(bl(n));let m=di(e,{options:n,getFacetSearch:l,isForFieldSuggestions:i,executeFacetSearchActionCreator:s,executeFieldSuggestActionCreator:u});return{...m,select(d){r(Fo({facetId:c,value:d})),o(d)},exclude(d){r(Ro({facetId:c,value:d})),a(d)},singleSelect(d){r(he(c)),r(Fo({facetId:c,value:d})),o(d)},singleExclude(d){r(he(c)),r(Ro({facetId:c,value:d})),a(d)},get state(){let{values:d}=m.state;return{...m.state,values:d.map(({count:p,displayValue:f,rawValue:A})=>({count:p,displayValue:f,rawValue:A}))}}}}var nA={facetId:te,selection:new q({values:vo})},oA=W("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},nA),n(pr({facetId:e,selection:t})),n(ne())}),aA=W("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:o}}=r;o({facetId:e,selection:t},nA),n(mr({facetId:e,selection:t})),n(ne())});var mi=["allValues","atLeastOneValue"];var _l=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var iA=new Z({facetId:sr,field:cr,filterFacetCount:ur,injectionDepth:lr,numberOfValues:Vt,sortCriteria:new E({constrainTo:_l}),resultsMustMatch:new E({constrainTo:mi}),facetSearch:ci});function sA(e,t,r=iA){if(!Hk(e))throw O;let{dispatch:n}=e,o=U(e),a=Be(e,t.options),i={...ac,...Mc("facetSearch",t.options),field:t.options.field,facetId:a},s={facetSearch:{...Ze,...t.options.facetSearch},...i};ge(e,r,s,"buildFacet");let u=()=>Um(e.state,a),c=()=>Ds(e.state,a),l=()=>Gt(e.state),m=()=>ir(e.state,a),d=()=>{let{currentValues:f}=u();return f.filter(A=>A.state!=="idle").length},p=()=>{let{currentValues:f}=u(),A=s.numberOfValues,C=!!f.find(y=>y.state==="idle");return A<f.length&&C};return n(dr(i)),{...o,toggleSelect:f=>n(oA({facetId:s.facetId,selection:f})),toggleExclude:f=>n(aA({facetId:s.facetId,selection:f})),toggleSingleSelect:function(f){f.state==="idle"&&n(he(a)),this.toggleSelect(f)},toggleSingleExclude:function(f){f.state==="idle"&&n(he(a)),this.toggleExclude(f)},isValueSelected:Ml,isValueExcluded:Ll,deselectAll(){n(he(a)),n(ne())},sortBy(f){n(ui({facetId:a,criterion:f})),n(ne())},isSortedBy(f){return this.state.sortCriterion===f},showMoreValues(){let f=u().numberOfValues,A=s.numberOfValues,C=A-f%A,y=f+C;n(Po({facetId:a,numberOfValues:y})),n(wo({facetId:a,isFieldExpanded:!0})),n(ne())},showLessValues(){let f=s.numberOfValues,A=Math.max(f,d());n(Po({facetId:a,numberOfValues:A})),n(wo({facetId:a,isFieldExpanded:!1})),n(ne())},enable(){n(Le(a))},disable(){n(Se(a))},get state(){let f=u(),A=c(),C=l(),y=m(),g;typeof f.sortCriteria=="object"?g=f.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":g=f.sortCriteria;let h=A?A.values:[],x=h.some(b=>b.state!=="idle"),R=A?A.moreValuesAvailable:!1,P=f.resultsMustMatch;return{label:A?.label,facetId:a,values:h,sortCriterion:g,resultsMustMatch:P,isLoading:C,hasActiveValues:x,canShowMoreValues:R,canShowLessValues:p(),enabled:y}}}}function Hk(e){return e.addReducers({facetSet:xr,facetOptions:ke,configuration:K,facetSearchSet:pi}),!0}var cA=new Z({facetId:sr,field:cr,filterFacetCount:ur,injectionDepth:lr,numberOfValues:Vt,sortCriteria:new E({constrainTo:_l}),resultsMustMatch:new E({constrainTo:mi}),facetSearch:ci,allowedValues:wl,hasBreadcrumbs:_x,customSort:El});function Wk(e,t){if(!Yk(e))throw O;let{dispatch:r}=e,n=sA(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},cA),o=()=>n.state.facetId,i=(()=>{let{facetSearch:c}=t.options;return Ul(e,{options:{facetId:o(),...c},select:l=>{r(ne()),r(T({legacy:Ae({facetId:o(),facetValue:l.rawValue}),next:Pe()}))},exclude:l=>{r(ne()),r(T({legacy:mt({facetId:o(),facetValue:l.rawValue}),next:ar()}))},isForFieldSuggestions:!1,executeFacetSearchActionCreator:Ie,executeFieldSuggestActionCreator:nr})})(),{state:s,...u}=i;return{...n,facetSearch:u,toggleSelect(c){n.toggleSelect(c),r(T({legacy:Ql(o(),c),next:Bl(c)}))},toggleExclude(c){n.toggleExclude(c),r(T({legacy:tA(o(),c),next:rA(c)}))},deselectAll(){n.deselectAll(),r(T({legacy:Te(o()),next:Qe()}))},sortBy(c){n.sortBy(c),r(T({legacy:or({facetId:o(),criterion:c}),next:Vn()}))},isSortedBy(c){return this.state.sortCriterion===c},showMoreValues(){n.showMoreValues(),r(Zt({legacy:ai(o())}))},showLessValues(){n.showLessValues(),r(Zt({legacy:ii(o())}))},get state(){return{...n.state,facetSearch:i.state}}}}function Yk(e){return e.addReducers({facetSet:xr,configuration:K,facetSearchSet:pi,search:X}),!0}var jl=e=>e.state==="selected",Bf=e=>e.state==="excluded",$l=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return jl(t)?Dt(n):Ae(n)},Gl=e=>jl(e)?jr():Pe(),uA=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return Bf(t)?_r(n):mt(n)};var zl=S("rangeFacet/executeToggleSelect",e=>F(e,ko(e.selection))),Hl=S("rangeFacet/executeToggleExclude",e=>F(e,ko(e.selection)));var lA={facetId:te,selection:new q({values:To})},dA=W("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,lA),t(gr(e)),t(zl(e)),t(ne())}),pA=W("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,lA),t(Sr(e)),t(Hl(e)),t(ne())});var Yl={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function Kl(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let o=mA(r);r.numberOfValues=o,e[n]=t}function Jl(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=mA(n))}function Xl(e,t,r){let n=e[t]?.request;if(!n)return;let o=Wl(n.currentValues,r);if(!o)return;let a=o.state==="selected";o.state=a?"idle":"selected",n.preventAutoSelect=!0}function Zl(e,t,r){let n=e[t]?.request;if(!n)return;let o=Wl(n.currentValues,r);if(!o)return;let a=o.state==="excluded";o.state=a?"idle":"excluded",n.preventAutoSelect=!0}function Ln(e,t){let r=e[t]?.request;r&&r.currentValues.forEach(n=>n.state="idle")}function ed(e,t){Object.entries(e).forEach(([r,{request:n}])=>{let o=t[r]||[];n.currentValues.forEach(s=>{let u=!!Wl(o,s);return s.state=u?"selected":"idle",s});let a=o.filter(s=>!Wl(n.currentValues,s)),i=n.currentValues;i.push(...a),n.numberOfValues=Math.max(n.numberOfValues,i.length)})}function fi(e,t,r){t.forEach(n=>{let o=n.facetId,a=e[o]?.request;if(!a)return;let i=r(n.values);a.currentValues=i,a.preventAutoSelect=!1})}function Wl(e,t){let{start:r,end:n}=t;return e.find(o=>o.start===r&&o.end===n)}function mA(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var Ar=j(on(),e=>{e.addCase(fr,(t,r)=>{let{payload:n}=r,o=Kk(n);Kl(t,CS(o))}).addCase(ce.fulfilled,(t,r)=>r.payload?.dateFacetSet??t).addCase(de,(t,r)=>{let n=r.payload.df||{};ed(t,n)}).addCase(gr,(t,r)=>{let{facetId:n,selection:o}=r.payload;Xl(t,n,o)}).addCase(Sr,(t,r)=>{let{facetId:n,selection:o}=r.payload;Zl(t,n,o)}).addCase(Gr,(t,r)=>{let{facetId:n,values:o}=r.payload;Jl(t,n,o)}).addCase(kl,(t,r)=>{Ln(t,r.payload)}).addCase(xe,t=>{Object.keys(t).forEach(r=>{Ln(t,r)})}).addCase(Tl,(t,r)=>{Xa(t,r.payload)}).addCase(T.fulfilled,(t,r)=>{let n=r.payload.response.facets;fi(t,n,fA)}).addCase(Mn.fulfilled,(t,r)=>{let n=r.payload.response?.facets?.results||[];fi(t,n,fA)}).addCase(Se,(t,r)=>{Ln(t,r.payload)})});function Kk(e){return{...Yl,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function fA(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}function td(e,t){let{facetId:r,getRequest:n}=t,o=U(e),a=e.dispatch,i=()=>ir(e.state,r);return{...o,isValueSelected:jl,isValueExcluded:Bf,deselectAll(){a(he(r)),a(ne())},sortBy(s){a(li({facetId:r,criterion:s})),a(ne())},isSortedBy(s){return this.state.sortCriterion===s},enable(){a(Le(r))},disable(){a(Se(r))},get state(){let s=n(),u=$t(e.state,r),c=s.sortCriteria,l=s.resultsMustMatch,m=u?u.values:[],d=Gt(e.state),p=i(),f=m.some(A=>A.state!=="idle");return{facetId:r,values:m,sortCriterion:c,resultsMustMatch:l,hasActiveValues:f,isLoading:d,enabled:p}}}}function rd(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let r=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(r)}}var nd=["idle","selected","excluded"];var od=["ascending","descending"],ad=["even","equiprobable"];var Jk={start:new E,end:new E,endInclusive:new G,state:new E({constrainTo:nd})},Xk=new Z({facetId:sr,field:cr,generateAutomaticRanges:Pl,filterFacetCount:ur,injectionDepth:lr,numberOfValues:Vt,currentValues:new J({each:new q({values:Jk})}),sortCriteria:new E({constrainTo:od}),rangeAlgorithm:new E({constrainTo:ad})});function id(e,t){ge(e,Xk,t,"buildDateFacet"),Il(t)}function gA(e,t){if(!Zk(e))throw O;rd(t.options,"buildDateFacet");let r=e.dispatch,n=Be(e,t.options),o={currentValues:[],...t.options,facetId:n};id(e,o),r(fr(o));let a=td(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...a,toggleSelect:i=>r(dA({facetId:n,selection:i})),toggleSingleSelect:function(i){i.state==="idle"&&r(he(n)),this.toggleSelect(i)},toggleExclude:i=>r(pA({facetId:n,selection:i})),toggleSingleExclude:function(i){i.state==="idle"&&r(he(n)),this.toggleExclude(i)},get state(){return a.state}}}function Zk(e){return e.addReducers({configuration:K,search:X,dateFacetSet:Ar,facetOptions:ke}),!0}function eO(e,t){let r=gA(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(T({legacy:Te(o()),next:Qe()}))},sortBy(a){r.sortBy(a),n(T({legacy:or({facetId:o(),criterion:a}),next:Vn()}))},toggleSelect:a=>{r.toggleSelect(a),n(T({legacy:$l(o(),a),next:Gl(a)}))},toggleExclude:a=>{r.toggleExclude(a),n(T({legacy:uA(o(),a)}))},get state(){return r.state}}}var vt=j(an(),e=>{e.addCase(hr,(t,r)=>{let{payload:n}=r,o=tO(n);Kl(t,xS(o))}).addCase(ce.fulfilled,(t,r)=>r.payload?.numericFacetSet??t).addCase(de,(t,r)=>{let n=r.payload.nf||{};ed(t,n)}).addCase(yr,(t,r)=>{let{facetId:n,selection:o}=r.payload;Xl(t,n,o)}).addCase(Cr,(t,r)=>{let{facetId:n,selection:o}=r.payload;Zl(t,n,o)}).addCase(zr,(t,r)=>{let{facetId:n,values:o}=r.payload;Jl(t,n,o)}).addCase(Dl,(t,r)=>{Ln(t,r.payload)}).addCase(xe,t=>{Object.keys(t).forEach(r=>{Ln(t,r)})}).addCase(ql,(t,r)=>{Xa(t,r.payload)}).addCase(T.fulfilled,(t,r)=>{let n=r.payload.response.facets;fi(t,n,SA)}).addCase(Mn.fulfilled,(t,r)=>{let n=r.payload.response?.facets?.results||[];fi(t,n,SA)}).addCase(Se,(t,r)=>{Ln(t,r.payload)})});function tO(e){return{...Yl,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function SA(e){return e.map(t=>{let{numberOfResults:r,...n}=t;return n})}var hA={facetId:te,selection:new q({values:Io})},yA=W("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hA),t(yr(e)),t(zl(e)),t(ne())}),tZ=W("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,hA),t(Cr(e)),t(Hl(e)),t(ne())});var rO={start:new B,end:new B,endInclusive:new G,state:new E({constrainTo:nd})},nO=new Z({facetId:sr,field:cr,generateAutomaticRanges:Pl,filterFacetCount:ur,injectionDepth:lr,numberOfValues:Vt,currentValues:new J({each:new q({values:rO})}),sortCriteria:new E({constrainTo:od}),resultsMustMatch:new E({constrainTo:mi}),rangeAlgorithm:new E({constrainTo:ad})});function sd(e,t){ge(e,nO,t,"buildNumericFacet"),Ol(t)}function ic(e){return{endInclusive:!1,state:"idle",...e}}function CA(e,t){if(!oO(e))throw O;rd(t.options,"buildNumericFacet");let r=e.dispatch,n=Be(e,t.options),o={currentValues:[],...t.options,facetId:n};sd(e,o),r(hr(o));let a=td(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...a,toggleSelect:i=>r(yA({facetId:n,selection:i})),toggleSingleSelect(i){i.state==="idle"&&r(he(n)),this.toggleSelect(i)},get state(){return a.state}}}function oO(e){return e.addReducers({numericFacetSet:vt,facetOptions:ke,configuration:K,search:X}),!0}function aO(e,t){if(!iO(e))throw O;let r=CA(e,t),n=e.dispatch,o=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(T({legacy:Te(o()),next:Qe()}))},sortBy(a){r.sortBy(a),n(T({legacy:or({facetId:o(),criterion:a}),next:Vn()}))},toggleSelect:a=>{r.toggleSelect(a),n(T({legacy:$l(o(),a),next:Gl(a)}))},get state(){return{...r.state}}}}function iO(e){return e.addReducers({numericFacetSet:vt,configuration:K,search:X}),!0}function sO(e,t){return!!t&&t.facetId in e.numericFacetSet}var xA=(e,t)=>{let r=$t(e,t);if(sO(e,r))return r},AA=(e,t)=>(xA(e,t)||{values:[]}).values.filter(n=>n.state!=="idle"),FA=(e,t)=>(xA(e,t)||{values:[]}).values.filter(n=>n.state==="selected");function RA(e,t){if(!cO(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a=Be(e,t.options),i={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};sd(e,i),n(hr(i));let s=()=>ir(e.state,a);return{...r,clear:()=>{n(zr({facetId:a,values:[]})),n(ne())},setRange:u=>{let c={...u,state:"selected",numberOfResults:0,endInclusive:!0},l=zr({facetId:a,values:[c]});return l.error?!1:(n(l),n(ne()),!0)},enable(){n(Le(a))},disable(){n(Se(a))},get state(){let u=Gt(o()),c=s(),l=FA(o(),a),m=l.length?l[0]:void 0;return{facetId:a,isLoading:u,range:m,enabled:c}}}}function cO(e){return e.addReducers({numericFacetSet:vt,facetOptions:ke,configuration:K,search:X}),!0}function uO(e,t){if(!lO(e))throw O;let r=RA(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(T({legacy:Te(o()),next:Qe()}))},setRange:a=>{let i=r.setRange(a);return i&&n(T({legacy:Ae({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:Pe()})),i},get state(){return{...r.state}}}}function lO(e){return e.addReducers({numericFacetSet:vt,configuration:K,search:X}),!0}function dO(e,t){return!!t&&t.facetId in e.dateFacetSet}var bA=(e,t)=>{let r=$t(e,t);if(dO(e,r))return r},vA=(e,t)=>(bA(e,t)||{values:[]}).values.filter(n=>n.state==="selected"),PA=(e,t)=>(bA(e,t)||{values:[]}).values.filter(n=>n.state!=="idle");function wA(e,t){if(!pO(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a=Be(e,t.options),i={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};id(e,i),n(fr(i));let s=()=>ir(e.state,a);return{...r,clear:()=>{n(Gr({facetId:a,values:[]})),n(ne())},setRange:u=>{let c={...u,state:"selected",numberOfResults:0,endInclusive:!0},l=Gr({facetId:a,values:[c]});return l.error?!1:(n(l),n(ne()),!0)},enable(){n(Le(a))},disable(){n(Se(a))},get state(){let u=Gt(o()),c=s(),l=vA(o(),a),m=l.length?l[0]:void 0;return{facetId:a,isLoading:u,range:m,enabled:c}}}}function pO(e){return e.addReducers({dateFacetSet:Ar,facetOptions:ke,configuration:K,search:X}),!0}function mO(e,t){if(!fO(e))throw O;let r=wA(e,t),{dispatch:n}=e,o=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(T({legacy:Te(o()),next:Qe()}))},setRange:a=>{let i=r.setRange(a);return i&&n(T({legacy:Ae({facetId:o(),facetValue:`${a.start}..${a.end}`}),next:Pe()})),i},get state(){return{...r.state}}}}function fO(e){return e.addReducers({dateFacetSet:Ar,configuration:K,search:X}),!0}var cd={f:new q,cf:new q,nf:new q,mnf:new q,df:new q,sortCriteria:new q,page:new B({min:0}),perPage:new B({min:1})};var EA=S("commerce/productListingParameters/restore",e=>F(e,cd));var IA={q:new E,...cd};var ud=S("commerce/searchParameters/restore",e=>F(e,IA));var ld=j(jo(),e=>{e.addCase(T.fulfilled,Uf).addCase(ri.fulfilled,Uf).addCase(kn.fulfilled,Uf).addCase(ud,TA).addCase(EA,TA).addCase(ce.fulfilled,(t,r)=>r.payload?.facetOrder??t)});function Uf(e,t){return t.payload.response.facets.map(r=>r.facetId)}function TA(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}var dd=()=>D("history/analytics/forward",e=>e.makeSearchEvent("historyForward")),pd=()=>D("history/analytics/backward",e=>e.makeSearchEvent("historyBackward")),md=()=>D("history/analytics/noresultsback",e=>e.makeNoResultsBack()),kA=()=>({actionCause:"historyForward"}),OA=()=>({actionCause:"historyBackward"}),qA=()=>({actionCause:"noResultsBack"});var gO=Object.getOwnPropertyNames,SO=Object.getOwnPropertySymbols,hO=Object.prototype.hasOwnProperty;function DA(e,t){return function(n,o,a){return e(n,o,a)&&t(n,o,a)}}function fd(e){return function(r,n,o){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,o);var a=o.cache,i=a.get(r),s=a.get(n);if(i&&s)return i===n&&s===r;a.set(r,n),a.set(n,r);var u=e(r,n,o);return a.delete(r),a.delete(n),u}}function VA(e){return gO(e).concat(SO(e))}var _A=Object.hasOwn||function(e,t){return hO.call(e,t)};function gi(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var jA="_owner",NA=Object.getOwnPropertyDescriptor,MA=Object.keys;function yO(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function CO(e,t){return gi(e.getTime(),t.getTime())}function LA(e,t,r){if(e.size!==t.size)return!1;for(var n={},o=e.entries(),a=0,i,s;(i=o.next())&&!i.done;){for(var u=t.entries(),c=!1,l=0;(s=u.next())&&!s.done;){var m=i.value,d=m[0],p=m[1],f=s.value,A=f[0],C=f[1];!c&&!n[l]&&(c=r.equals(d,A,a,l,e,t,r)&&r.equals(p,C,d,A,e,t,r))&&(n[l]=!0),l++}if(!c)return!1;a++}return!0}function xO(e,t,r){var n=MA(e),o=n.length;if(MA(t).length!==o)return!1;for(var a;o-- >0;)if(a=n[o],a===jA&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!_A(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function sc(e,t,r){var n=VA(e),o=n.length;if(VA(t).length!==o)return!1;for(var a,i,s;o-- >0;)if(a=n[o],a===jA&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!_A(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(i=NA(e,a),s=NA(t,a),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function AO(e,t){return gi(e.valueOf(),t.valueOf())}function FO(e,t){return e.source===t.source&&e.flags===t.flags}function QA(e,t,r){if(e.size!==t.size)return!1;for(var n={},o=e.values(),a,i;(a=o.next())&&!a.done;){for(var s=t.values(),u=!1,c=0;(i=s.next())&&!i.done;)!u&&!n[c]&&(u=r.equals(a.value,i.value,a.value,i.value,e,t,r))&&(n[c]=!0),c++;if(!u)return!1}return!0}function RO(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var bO="[object Arguments]",vO="[object Boolean]",PO="[object Date]",wO="[object Map]",EO="[object Number]",IO="[object Object]",TO="[object RegExp]",kO="[object Set]",OO="[object String]",qO=Array.isArray,BA=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,UA=Object.assign,DO=Object.prototype.toString.call.bind(Object.prototype.toString);function VO(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,o=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,i=e.areRegExpsEqual,s=e.areSetsEqual,u=e.areTypedArraysEqual;return function(l,m,d){if(l===m)return!0;if(l==null||m==null||typeof l!="object"||typeof m!="object")return l!==l&&m!==m;var p=l.constructor;if(p!==m.constructor)return!1;if(p===Object)return o(l,m,d);if(qO(l))return t(l,m,d);if(BA!=null&&BA(l))return u(l,m,d);if(p===Date)return r(l,m,d);if(p===RegExp)return i(l,m,d);if(p===Map)return n(l,m,d);if(p===Set)return s(l,m,d);var f=DO(l);return f===PO?r(l,m,d):f===TO?i(l,m,d):f===wO?n(l,m,d):f===kO?s(l,m,d):f===IO?typeof l.then!="function"&&typeof m.then!="function"&&o(l,m,d):f===bO?o(l,m,d):f===vO||f===EO||f===OO?a(l,m,d):!1}}function NO(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,o={areArraysEqual:n?sc:yO,areDatesEqual:CO,areMapsEqual:n?DA(LA,sc):LA,areObjectsEqual:n?sc:xO,arePrimitiveWrappersEqual:AO,areRegExpsEqual:FO,areSetsEqual:n?DA(QA,sc):QA,areTypedArraysEqual:n?sc:RO};if(r&&(o=UA({},o,r(o))),t){var a=fd(o.areArraysEqual),i=fd(o.areMapsEqual),s=fd(o.areObjectsEqual),u=fd(o.areSetsEqual);o=UA({},o,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return o}function MO(e){return function(t,r,n,o,a,i,s){return e(t,r,s)}}function LO(e){var t=e.circular,r=e.comparator,n=e.createState,o=e.equals,a=e.strict;if(n)return function(u,c){var l=n(),m=l.cache,d=m===void 0?t?new WeakMap:void 0:m,p=l.meta;return r(u,c,{cache:d,equals:o,meta:p,strict:a})};if(t)return function(u,c){return r(u,c,{cache:new WeakMap,equals:o,meta:void 0,strict:a})};var i={cache:void 0,equals:o,meta:void 0,strict:a};return function(u,c){return r(u,c,i)}}var kte=Fr(),Ote=Fr({strict:!0}),qte=Fr({circular:!0}),Dte=Fr({circular:!0,strict:!0}),Vte=Fr({createInternalComparator:function(){return gi}}),Nte=Fr({strict:!0,createInternalComparator:function(){return gi}}),Mte=Fr({circular:!0,createInternalComparator:function(){return gi}}),Lte=Fr({circular:!0,createInternalComparator:function(){return gi},strict:!0});function Fr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,o=e.createState,a=e.strict,i=a===void 0?!1:a,s=NO(e),u=VO(s),c=n?n(u):MO(u);return LO({circular:r,comparator:u,createState:o,equals:c,strict:i})}function Oo(e,t,r=(n,o)=>n===o){return e.length===t.length&&e.findIndex((n,o)=>!r(t[o],n))===-1}function QO(e,t){return e.length!==t.length?!1:e.every(r=>t.findIndex(n=>cc(r,n))!==-1)}var cc=Fr({createCustomConfig:e=>({...e,areArraysEqual:QO})});var BO=j(Wc(),e=>{e.addCase(ut,(t,r)=>UO(t,r.payload)?void 0:r.payload)}),UO=(e,t)=>_O(e.context,t.context)&&jO(e.dictionaryFieldContext,t.dictionaryFieldContext)&&KO(e.advancedSearchQueries,t.advancedSearchQueries)&&$O(e.tabSet,t.tabSet)&&GO(e.staticFilterSet,t.staticFilterSet)&&_f(e.facetSet,t.facetSet)&&_f(e.dateFacetSet,t.dateFacetSet)&&_f(e.numericFacetSet,t.numericFacetSet)&&HO(e.automaticFacetSet,t.automaticFacetSet)&&zO(e.categoryFacetSet,t.categoryFacetSet)&&WO(e.pagination,t.pagination)&&YO(e.query,t.query)&&JO(e,t)&&XO(e.pipeline,t.pipeline)&&ZO(e.searchHub,t.searchHub)&&eq(e.facetOrder,t.facetOrder)&&tq(e.debug,t.debug),_O=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),jO=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),$O=(e,t)=>{let r=$A(e),n=$A(t);return r?.id===n?.id},$A=e=>Object.values(e).find(t=>t.isActive),GO=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=GA(e[r]),a=GA(n);if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},GA=e=>e.values.filter(t=>t.state!=="idle"),_f=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=e[r].request.currentValues.filter(i=>i.state!=="idle"),a=n.request.currentValues.filter(i=>i.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},zO=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let o=Ye(e[r]?.request.currentValues).map(({value:i})=>i),a=Ye(n?.request.currentValues).map(({value:i})=>i);if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},HO=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let o=e.set[r].response.values.filter(i=>i.state!=="idle"),a=n.response.values.filter(i=>i.state!=="idle");if(JSON.stringify(o)!==JSON.stringify(a))return!1}return!0},WO=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,YO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),KO=(e,t)=>JSON.stringify(e)===JSON.stringify(t),JO=(e,t)=>e.sortCriteria===t.sortCriteria,XO=(e,t)=>e===t,ZO=(e,t)=>e===t,eq=(e,t)=>Oo(e,t),tq=(e,t)=>e===t,gd=Bg({actionTypes:{redo:Xm.type,undo:Jm.type,snapshot:ut.type},reducer:BO});function rq(e){if(!nq(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state,o=a=>a.past.length>0&&!H(a.present);return{...t,subscribe(a){a();let i=JSON.stringify(n().history.present),s=()=>{let u=JSON.stringify(n().history.present);i!==u&&(i=u,a())};return e.subscribe(()=>s())},get state(){return n().history},async back(){o(this.state)&&(await r(Ls()),r(T({legacy:pd(),next:OA()})))},async forward(){!this.state.future.length||!this.state.present||(await r(Lu()),r(T({legacy:dd(),next:kA()})))},async backOnNoResults(){o(this.state)&&(await r(Ls()),r(T({legacy:md(),next:qA()})))}}}function nq(e){return e.addReducers({history:gd,configuration:K,facetOrder:ld}),!0}var sq=new B({min:1,default:8,required:!1}),cq=new B({min:1,max:20,default:5,required:!1}),uq={desiredCount:cq,numberOfValues:sq},Sd=S("automaticFacet/setOptions",e=>F(e,uq)),hd=S("automaticFacet/deselectAll",e=>F(e,te)),lq=k,Qn=S("automaticFacet/toggleSelectValue",e=>F(e,{field:lq,selection:new q({values:vo})}));var Rr=j(Ge(),e=>{e.addCase(va,(t,r)=>{let n=jf(t),o=r.payload;t.defaultNumberOfResults=t.numberOfResults=o,t.firstResult=uc(n,o)}).addCase(Pa,(t,r)=>{t.numberOfResults=r.payload,t.firstResult=0}).addCase(qt,t=>{t.firstResult=0}).addCase(wa,(t,r)=>{let n=r.payload;t.firstResult=uc(n,t.numberOfResults)}).addCase(Ft,(t,r)=>{let n=r.payload;t.firstResult=uc(n,t.numberOfResults)}).addCase(Ia,t=>{let r=jf(t),n=Math.max(r-1,1);t.firstResult=uc(n,t.numberOfResults)}).addCase(Ea,t=>{let r=jf(t),n=dq(t),o=Math.min(r+1,n);t.firstResult=uc(o,t.numberOfResults)}).addCase(ce.fulfilled,(t,r)=>{r.payload&&(t.numberOfResults=r.payload.pagination.numberOfResults,t.firstResult=r.payload.pagination.firstResult)}).addCase(de,(t,r)=>{t.firstResult=r.payload.firstResult??t.firstResult,t.numberOfResults=r.payload.numberOfResults??t.defaultNumberOfResults}).addCase(T.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.totalCountFiltered}).addCase(Mn.fulfilled,(t,r)=>{let{response:n}=r.payload;t.totalCountFiltered=n.pagination.totalCount}).addCase(he,t=>{Ue(t)}).addCase(Sr,t=>{Ue(t)}).addCase(mr,t=>{Ue(t)}).addCase(Cr,t=>{Ue(t)}).addCase(Ro,t=>{Ue(t)}).addCase(pr,t=>{Ue(t)}).addCase(tr,t=>{Ue(t)}).addCase(Pn,t=>{Ue(t)}).addCase(Ka,t=>{Ue(t)}).addCase(gr,t=>{Ue(t)}).addCase(yr,t=>{Ue(t)}).addCase(xe,t=>{Ue(t)}).addCase(Gr,t=>{Ue(t)}).addCase(zr,t=>{Ue(t)}).addCase(Fo,t=>{Ue(t)}).addCase(Qn,t=>{Ue(t)})});function Ue(e){e.firstResult=Ge().firstResult}function jf(e){let{firstResult:t,numberOfResults:r}=e;return $f(t,r)}function dq(e){let{totalCountFiltered:t,numberOfResults:r}=e;return Gf(t,r)}function uc(e,t){return(e-1)*t}function $f(e,t){return Math.round(e/t)+1}function Gf(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function pq(e){return e.pagination.firstResult}function zA(e){return e.pagination.numberOfResults}function mq(e){return e.pagination.totalCountFiltered}var Bn=e=>{let t=pq(e),r=zA(e);return $f(t,r)},yd=e=>{let t=mq(e),r=zA(e);return Gf(t,r)},zf=(e,t)=>{let r=Bn(e),n=yd(e),o=fq(r,t);return o=gq(o),o=Sq(o,n),hq(o)};function fq(e,t){let r=t%2===0,n=Math.floor(t/2),o=r?n-1:n,a=e-n,i=e+o;return{start:a,end:i}}function gq(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function Sq(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),o=e.end-r;return{start:n,end:o}}function hq(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var hi=()=>D("analytics/pager/resize",(e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||Ge().numberOfResults})),yi=()=>D("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:Bn(t)})),Cd=()=>D("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:Bn(t)})),xd=()=>D("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:Bn(t)})),Ci=()=>({actionCause:"browseResults"});var yq=new Z({numberOfPages:new B({default:5,min:0})}),Cq=new Z({page:new B({min:1})});function HA(e,t={}){if(!xq(e))throw O;let r=U(e),{dispatch:n}=e,o=ge(e,yq,t.options,"buildPager"),i=Re(e,Cq,t.initialState,"buildPager").page;i&&n(wa(i));let s=()=>Bn(e.state),u=()=>{let{numberOfPages:l}=o;return zf(e.state,l)},c=()=>yd(e.state);return{...r,get state(){let l=s(),m=c(),d=l>1&&m>0,p=l<m;return{currentPage:l,currentPages:u(),maxPage:m,hasPreviousPage:d,hasNextPage:p}},selectPage(l){n(Ft(l))},nextPage(){n(Ea())},previousPage(){n(Ia())},isCurrentPage(l){return l===this.state.currentPage}}}function xq(e){return e.addReducers({configuration:K,pagination:Rr}),!0}function Aq(e,t={}){let{dispatch:r}=e,n=HA(e,t);return{...n,get state(){return n.state},selectPage(o){n.selectPage(o),r(Xt({legacy:yi(),next:Ci()}))},nextPage(){n.nextPage(),r(Xt({legacy:Cd(),next:Ci()}))},previousPage(){n.previousPage(),r(Xt({legacy:xd(),next:Ci()}))}}}function WA(e){if(!Fq(e))throw O;let t=U(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function Fq(e){return e.addReducers({search:X}),!0}function Rq(e){return WA(e)}function xi(e){if(!bq(e))throw O;let t=U(e),r=()=>e.state;return{...t,get state(){let n=r();return{hasError:n.search.error!==null,isLoading:n.search.isLoading,hasResults:!!n.search.results.length,firstSearchExecuted:$s(n)}}}}function bq(e){return e.addReducers({search:X}),!0}function YA(e){if(!vq(e))throw O;let t=U(e),r=xi(e),n=()=>e.state,o=()=>{let a=n().search.duration/1e3;return Math.round((a+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:o(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function vq(e){return e.addReducers({search:X,pagination:Rr}),!0}function Pq(e){return YA(e)}var wq=new Z({fieldsToInclude:new J({required:!1,each:new E({required:!0,emptyAllowed:!1})})});function Ad(e,t){if(!Eq(e))throw O;let r=U(e),n=xi(e),{dispatch:o}=e,a=()=>e.state,i=ge(e,wq,t?.options,"buildCoreResultList");i.fieldsToInclude&&o(Fn(i.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,u=0,c=0,l=5,m=200,d=!1;return{...r,get state(){let f=a();return{...n.state,results:f.search.results,moreResultsAvailable:s(),searchResponseId:f.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-u<m){if(c++,c>=l){u=Date.now(),!d&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),d=!0;return}}else c=0;d=!1,t?.fetchMoreResultsActionCreator&&(await o(t?.fetchMoreResultsActionCreator()),u=Date.now())}}}function Eq(e){return e.addReducers({search:X,configuration:K,fields:vn}),!0}function Iq(e,t){return Ad(e,{...t,fetchMoreResultsActionCreator:Cn})}var Tq={results:new J({required:!0,each:new q({values:Ns})}),maxLength:new B({required:!0,min:1,default:10})},Ai=S("recentResults/registerRecentResults",e=>F(e,Tq)),Pt=S("recentResults/pushRecentResult",e=>(Ke(e),{payload:e})),Fi=S("recentResults/clearRecentResults");var Fd=e=>D({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(Ke(e),t.makeDocumentOpen(be(e,r),ve(e))),__legacy__provider:t=>{let r=new Ct(t);return r.getSearchUID=()=>e.searchUid??"",r},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=be(e,t),n=ve(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function et(e,t,r){if(!kq(e))throw O;let n=1e3,o={selectionDelay:n,debounceWait:n,...t.options},a;return{select:al(r,o.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,o.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function kq(e){return e.addReducers({configuration:K}),!0}function Oq(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(Fd(t.options.result)))};return et(e,t,()=>{n(),e.dispatch(Pt(t.options.result))})}function qq(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(wy(t.options.result)))};return et(e,t,()=>{n(),e.dispatch(Pt(t.options.result))})}var Dq=new Z({numberOfResults:new B({min:0})});function KA(e,t={}){if(!Vq(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,i=Re(e,Dq,t.initialState,"buildResultsPerPage").numberOfResults;return i!==void 0&&n(va(i)),{...r,get state(){return{numberOfResults:o().pagination.numberOfResults}},set(s){n(Pa(s))},isSetTo(s){return s===this.state.numberOfResults}}}function Vq(e){return e.addReducers({pagination:Rr,configuration:K}),!0}function Nq(e,t={}){if(!Mq(e))throw O;let r=KA(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(o){r.set(o),n(Xt({legacy:hi(),next:Ci()}))}}}function Mq(e){return e.addReducers({pagination:Rr,configuration:K}),!0}var lc={id:k},Ri=S("querySuggest/register",e=>F(e,{...lc,count:new B({min:0})})),JA=S("querySuggest/unregister",e=>F(e,lc)),br=S("querySuggest/selectSuggestion",e=>F(e,{...lc,expression:pe})),Un=S("querySuggest/clear",e=>F(e,lc)),_n=W("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:o,navigatorContext:a}})=>{o(e,lc);let i=e.id,s=await Lq(i,t(),a),u=await n.querySuggest(s);return Ee(u)?r(u.error):{id:i,q:s.q,...u.success}}),Lq=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?yt.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await ht(t.configuration.analytics),...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await Oa(t.configuration.analytics):Ta(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var jn=()=>D("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),Rd=()=>({actionCause:"searchboxSubmit"});var dc={id:k,query:pe},bi=S("querySet/register",e=>F(e,dc)),qo=S("querySet/update",e=>F(e,dc));var XA=S("commerce/querySet/register",e=>F(e,dc)),ZA=S("commerce/querySet/update",e=>F(e,dc));var vi=j(Go(),e=>{e.addCase(bi,(t,r)=>tF(t,r.payload)).addCase(XA,(t,r)=>tF(t,r.payload)).addCase(qo,(t,r)=>{let{id:n,query:o}=r.payload;pc(t,n,o)}).addCase(ZA,(t,r)=>{let{id:n,query:o}=r.payload;pc(t,n,o)}).addCase(br,(t,r)=>{let{id:n,expression:o}=r.payload;pc(t,n,o)}).addCase(vx,(t,r)=>{let{id:n,expression:o}=r.payload;pc(t,n,o)}).addCase(kn.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Hf(t,n)}).addCase(T.fulfilled,(t,r)=>{let{queryExecuted:n}=r.payload;Hf(t,n)}).addCase(de,eF).addCase(ud,eF).addCase(ce.fulfilled,(t,r)=>{if(r.payload)for(let[n,o]of Object.entries(r.payload.querySet))pc(t,n,o)})});function eF(e,t){H(t.payload.q)||Hf(e,t.payload.q)}function Hf(e,t){Object.keys(e).forEach(r=>e[r]=t)}var pc=(e,t,r)=>{t in e&&(e[t]=r)},tF=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};var bd=e=>D("analytics/querySuggest",(t,r)=>{let n=Wf(r,e);return t.makeOmniboxAnalytics(n)}),rF=()=>({actionCause:"omniboxAnalytics"});function Wf(e,t){let{id:r,suggestion:n}=t,o=e.querySuggest&&e.querySuggest[r];if(!o)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=o.completions.map(c=>c.expression),i=o.partialQueries.length-1,s=o.partialQueries[i]||"",u=o.responseId;return{suggestionRanking:a.indexOf(n),partialQuery:s,partialQueries:o.partialQueries,suggestions:a,querySuggestResponseId:u}}var nF=()=>({});var Pi=j(nF(),e=>e.addCase(Ri,(t,r)=>{oF(t,r.payload)}).addCase(bx,(t,r)=>{oF(t,r.payload)}).addCase(JA,(t,r)=>{delete t[r.payload.id]}).addCase(_n.pending,aF).addCase(_n.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{q:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions,n.isLoading=!1,n.error=null}).addCase(_n.rejected,iF).addCase(Tn.pending,aF).addCase(Tn.fulfilled,(t,r)=>{let n=t[r.meta.arg.id];if(!n||r.meta.requestId!==n.currentRequestId)return;let{query:o}=r.payload;o&&n.partialQueries.push(o.replace(/;/,encodeURIComponent(";"))),n.responseId=r.payload.responseId,n.completions=r.payload.completions.map(a=>({expression:a.expression,highlighted:a.highlighted,score:0,executableConfidence:0})),n.isLoading=!1,n.error=null}).addCase(Tn.rejected,iF).addCase(Un,(t,r)=>{sF(t,r.payload)}).addCase(Rx,(t,r)=>{sF(t,r.payload)}));function oF(e,t){let r=t.id;r in e||(e[r]=Qq(t))}function Qq(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function aF(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function iF(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function sF(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}var tt=j(Ce(),e=>e.addCase(Me,(t,r)=>({...t,...r.payload})).addCase(Rt,(t,r)=>{t.q=r.payload}).addCase(br,(t,r)=>{t.q=r.payload.expression}).addCase(ce.fulfilled,(t,r)=>r.payload?.query??t).addCase(de,(t,r)=>{t.q=r.payload.q??t.q,t.enableQuerySyntax=r.payload.enableQuerySyntax??t.enableQuerySyntax}));var vd={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},Yf={open:new E,close:new E},Kf={id:k,numberOfSuggestions:new B({min:0}),enableQuerySyntax:new G,highlightOptions:new q({values:{notMatchDelimiters:new q({values:Yf}),exactMatchDelimiters:new q({values:Yf}),correctionDelimiters:new q({values:Yf})}}),clearFilters:new G},cF=new Z(Kf);function uF(e,t){if(!Uq(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a=t.options?.id||Zr("search_box"),i={id:a,highlightOptions:{...t.options?.highlightOptions},...vd,...t.options};ge(e,cF,i,"buildSearchBox"),n(bi({id:a,query:e.state.query.q})),i.numberOfSuggestions&&n(Ri({id:a,count:i.numberOfSuggestions}));let s=()=>e.state.querySet[i.id],u=async c=>{let{enableQuerySyntax:l,clearFilters:m}=i;n(Ba({q:s(),enableQuerySyntax:l,clearFilters:m})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(c)):n(t.executeSearchActionCreator(c.legacy))};return{...r,updateText(c){n(qo({id:a,query:c})),this.showSuggestions()},clear(){n(qo({id:a,query:""})),n(Un({id:a}))},showSuggestions(){i.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:a}))},selectSuggestion(c){n(br({id:a,expression:c})),u({legacy:bd({id:a,suggestion:c}),next:rF()}).then(()=>{n(Un({id:a}))})},submit(c=jn(),l){u({legacy:c,next:l}),n(Un({id:a}))},get state(){let c=o(),l=c.querySuggest[i.id],m=Bq(l,i.highlightOptions),d=l?l.isLoading:!1;return{value:s(),suggestions:m,isLoading:c.search.isLoading,isLoadingSuggestions:d}}}}function Bq(e,t){return e?e.completions.map(r=>({highlightedValue:em(r.highlighted,t),rawValue:r.expression})):[]}function Uq(e){return e.addReducers({query:tt,querySuggest:Pi,configuration:K,querySet:vi,search:X}),!0}function Jf(e,t={}){let r=uF(e,{...t,executeSearchActionCreator:T,fetchQuerySuggestionsActionCreator:_n,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(jn(),Rd())},get state(){return r.state}}}function Pd(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var lF=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},dF=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},pF=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach(([n,o])=>{Pd(o)&&delete t[r].cache[n]})},mF=(e,t,r)=>{for(let o in t)for(let a in t[o].cache)t[o].cache[a].isActive=!1;if(!Xf(e,t)){_q(e,t,r);return}let n=Xf(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},fF=(e,t,r)=>{let{id:n,q:o,searchUid:a,cacheTimeout:i,totalCountFiltered:s,duration:u}=e;t[n].cache[o]={...Xf(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:i?i+Date.now():0,totalCountFiltered:s,duration:u}},gF=(e,t)=>{let{id:r,q:n,error:o}=e;t[r].cache[n].error=o||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},Xf=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},_q=(e,t,r)=>{let{q:n,id:o}=e;t[o].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};var wd=j(Yc(),e=>{e.addCase(Ra,(t,r)=>{lF(r.payload,t)}),e.addCase(Wt,(t,r)=>{dF(r.payload,t)}),e.addCase(ba,(t,r)=>{pF(r.payload,t)}),e.addCase(Ua.pending,(t,r)=>{mF(r.meta.arg,t,{results:[]})}),e.addCase(Ua.fulfilled,(t,r)=>{let{results:n}=r.payload;fF({...r.payload,...r.meta.arg},t,{results:n})}),e.addCase(Ua.rejected,(t,r)=>{gF(r.meta.arg,t)})});var jq={searchBoxId:le,maxResultsPerQuery:new B({required:!0,min:1}),cacheTimeout:new B},SF=new Z(jq);function $q(e,t){if(!Gq(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a={searchBoxId:t.options.searchBoxId||Zr("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};ge(e,SF,a,"buildInstantResults");let i=a.searchBoxId;n(Ra({id:i}));let s=()=>o().instantResults[i],u=m=>s().cache[m],c=()=>s().q,l=()=>{let m=u(c());return m?m.isLoading?[]:m.results:[]};return{...r,updateQuery(m){if(!m)return;let d=u(m);(!d||!d.isLoading&&(d.error||Pd(d)))&&n(Ua({id:i,q:m,maxResultsPerQuery:a.maxResultsPerQuery,cacheTimeout:a.cacheTimeout})),n(Wt({id:i,q:m}))},clearExpired(){n(ba({id:i}))},get state(){let m=c(),d=u(m);return{q:m,isLoading:d?.isLoading||!1,error:d?.error||null,results:l()}}}}function Gq(e){return e.addReducers({instantResults:wd}),!0}var wi=()=>D("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||ze()})),Ed=()=>({actionCause:"resultsSort"});var hF={by:new Tt({enum:Wo,required:!0})},Ei=S("sortCriteria/register",e=>yF(e)),Ii=S("sortCriteria/update",e=>yF(e)),yF=e=>Ho(e)?(e.forEach(t=>F(t,hF)),{payload:e}):F(e,hF);var Id=j(ze(),e=>{e.addCase(Ei,(t,r)=>Or(r.payload)).addCase(Ii,(t,r)=>Or(r.payload)).addCase(ce.fulfilled,(t,r)=>r.payload?.sortCriteria??t).addCase(de,(t,r)=>r.payload.sortCriteria??t)});function zq(e,t){if(!t)return;let r=new Z({criterion:new J({each:bS})}),n=Hq(t),o={...t,criterion:n};Re(e,r,o,"buildSort")}function Hq(e){return e.criterion?Ho(e.criterion)?e.criterion:[e.criterion]:[]}function CF(e,t){if(!Wq(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state;zq(e,t.initialState);let a=t.initialState?.criterion;return a&&n(Ei(a)),{...r,sortBy(i){n(Ii(i)),n(Ft(1))},isSortedBy(i){return this.state.sortCriteria===Or(i)},get state(){return{sortCriteria:o().sortCriteria}}}}function Wq(e){return e.addReducers({configuration:K,sortCriteria:Id}),!0}function Yq(e,t={}){let{dispatch:r}=e,n=CF(e,t),o=()=>r(T({legacy:wi(),next:Ed()}));return{...n,get state(){return n.state},sortBy(a){n.sortBy(a),o()}}}var Do=k,Td=new q({options:{required:!0},values:{caption:pe,expression:pe,state:new E({constrainTo:["idle","selected","excluded"]})}}),kd=new J({required:!0,each:Td});var Ti=S("staticFilter/register",e=>F(e,{id:Do,values:kd})),Hr=S("staticFilter/toggleSelect",e=>F(e,{id:Do,value:Td})),Wr=S("staticFilter/toggleExclude",e=>F(e,{id:Do,value:Td})),$n=S("staticFilter/deselectAllFilterValues",e=>F(e,Do)),Od=e=>D("analytics/staticFilter/select",t=>t.makeStaticFilterSelect(e)),ki=e=>D("analytics/staticFilter/deselect",t=>t.makeStaticFilterDeselect(e)),qd=e=>D("analytics/staticFilter/clearAll",t=>t.makeStaticFilterClearAll(e)),xF=()=>({actionCause:"staticFilterSelect"}),Dd=()=>({actionCause:"staticFilterDeselect"}),AF=()=>({actionCause:"staticFilterClearAll"});var Vd=j(Yo(),e=>e.addCase(Ti,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]=n)}).addCase(Hr,(t,r)=>{let{id:n,value:o}=r.payload,a=t[n];if(!a)return;let i=a.values.find(u=>u.caption===o.caption);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(Wr,(t,r)=>{let{id:n,value:o}=r.payload,a=t[n];if(!a)return;let i=a.values.find(u=>u.caption===o.caption);if(!i)return;let s=i.state==="excluded";i.state=s?"idle":"excluded"}).addCase($n,(t,r)=>{let n=r.payload,o=t[n];o&&o.values.forEach(a=>a.state="idle")}).addCase(xe,t=>{Object.values(t).forEach(r=>{r.values.forEach(n=>n.state="idle")})}).addCase(de,(t,r)=>{let n=r.payload.sf||{};Object.entries(t).forEach(([o,a])=>{let i=n[o]||[];a.values.forEach(s=>{s.state=i.includes(s.caption)?"selected":"idle"})})}));function FF(e){return{state:"idle",...e}}var Kq=new Z({id:Do,values:kd});function Jq(e,t){if(!Xq(e))throw O;ge(e,Kq,t.options,"buildStaticFilter");let r=U(e),{dispatch:n}=e,o=()=>e.state,{id:a}=t.options;return n(Ti(t.options)),{...r,toggleSelect(i){n(Hr({id:a,value:i})),n(T({legacy:Nd(a,i),next:Md(i)}))},toggleSingleSelect(i){i.state==="idle"&&n($n(a)),n(Hr({id:a,value:i})),n(T({legacy:Nd(a,i),next:Md(i)}))},toggleExclude(i){n(Wr({id:a,value:i})),n(T({legacy:Nd(a,i),next:Md(i)}))},toggleSingleExclude(i){i.state==="idle"&&n($n(a)),n(Wr({id:a,value:i})),n(T({legacy:Nd(a,i),next:Md(i)}))},deselectAll(){n($n(a)),n(T({legacy:qd({staticFilterId:a}),next:AF()}))},isValueSelected(i){return i.state==="selected"},isValueExcluded(i){return i.state==="excluded"},get state(){let i=o().staticFilterSet[a]?.values||[],s=i.some(u=>u.state!=="idle");return{id:a,values:i,hasActiveValues:s}}}}function Xq(e){return e.addReducers({staticFilterSet:Vd}),!0}function Nd(e,t){let{caption:r,expression:n,state:o}=t;return(o==="idle"?Od:ki)({staticFilterId:e,staticFilterValue:{caption:r,expression:n}})}function Md(e){return e.state==="selected"?xF():Dd()}var Oi=j(Ko(),e=>{e.addCase($a,(t,r)=>{let n=r.payload,{id:o}=n;o in t||(t[o]={...n,isActive:!1})}).addCase(qt,(t,r)=>{let n=r.payload;RF(t,n)}).addCase(de,(t,r)=>{let n=r.payload.tab||"";RF(t,n)}).addCase(ce.fulfilled,(t,r)=>r.payload?.tabSet??t)});function RF(e,t){t in e&&Object.keys(e).forEach(n=>{e[n].isActive=n===t})}var Zq=new Z({expression:pe,id:k,clearFiltersOnTabChange:new G}),eD=new Z({isActive:new G});function bF(e,t){if(rD(t.options.id),!tD(e))throw O;let r=U(e),{dispatch:n}=e;ge(e,Zq,t.options,"buildTab");let o=Re(e,eD,t.initialState,"buildTab"),{id:a,expression:i}=t.options;return n($a({id:a,expression:i})),o.isActive&&n(qt(a)),{...r,select(){t.options.clearFiltersOnTabChange&&n(Ba({q:"",clearFilters:!0})),n(qt(a))},get state(){return{isActive:e.state.tabSet[a]?.isActive}}}}function tD(e){return e.addReducers({configuration:K,tabSet:Oi}),!0}function rD(e){let t=en().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function nD(e,t){let{dispatch:r}=e,n=bF(e,t),o=()=>r(T({legacy:ln(),next:fa()}));return{...n,get state(){return n.state},select(){n.select(),o()}}}function vF(e){if(!oD(e))throw O;let t=U(e),r=re(n=>n.tabSet,n=>Object.values(n).find(a=>a.isActive)?.id??"");return{...t,get state(){return{activeTab:r(e.state)}}}}function oD(e){return e.addReducers({tabSet:Oi}),!0}function aD(e){let t=vF(e);return{...t,get state(){return t.state}}}function PF(e){if(!iD(e))throw O;let t=U(e),r=()=>e.state;return{...t,sort(n){return fo(n,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(a=>a.facetId)}}}}function iD(e){return e.addReducers({search:X,facetOptions:ke}),!0}function sD(e){return PF(e)}var cD={categoryFacetId:te,categoryFacetPath:new J({required:!0,each:k})},uD=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let o=e.categoryFacetSet[t]?.request.field,a=`${o}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:o,categoryFacetTitle:a}},Ld=e=>D("analytics/categoryFacet/breadcrumb",(t,r)=>(F(e,cD),t.makeBreadcrumbFacet(uD(r,e)))),wF=()=>({actionCause:"breadcrumbFacet"});var Qd=()=>D("analytics/facet/deselectAllBreadcrumbs",e=>e.makeBreadcrumbResetAll());var Bd=(e,{facetId:t,selection:r})=>{let o=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,a=`${o}_${t}`;return{facetId:t,facetField:o,facetTitle:a,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},Ud=()=>({actionCause:"breadcrumbFacet"});var mc=e=>D("analytics/dateFacet/breadcrumb",(t,r)=>{F(e,ko(e.selection));let n=Bd(r,e);return t.makeBreadcrumbFacet(n)}),Zf=Ud;var fc=e=>D("analytics/numericFacet/breadcrumb",(t,r)=>{F(e,ko(e.selection));let n=Bd(r,e);return t.makeBreadcrumbFacet(n)}),eg=Ud;var _d=e=>Object.keys(e.facetSet).map(t=>{let r=e.facetValuesSelector(e.engine.state,t).map(n=>({value:n,deselect:()=>{n.state==="selected"?e.executeToggleSelect({facetId:t,selection:n}):n.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:n})}}));return{facetId:t,field:e.facetSet[t].request.field,values:r}}).filter(t=>t.values.length);function EF(e){let t=U(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(xe())},deselectBreadcrumb(n){n.deselect()}}}function lD(e){if(!dD(e))throw O;let t=EF(e),{dispatch:r}=e,n=()=>e.state,o=()=>{let C={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:y,selection:g})=>{r(pr({facetId:y,selection:g})),r($r({facetId:y,freezeCurrentValues:!1})),r(T({legacy:si({facetId:y,facetValue:g.value}),next:vl()}))},executeToggleExclude:({facetId:y,selection:g})=>{r(mr({facetId:y,selection:g})),r($r({facetId:y,freezeCurrentValues:!1})),r(T({legacy:si({facetId:y,facetValue:g.value}),next:vl()}))},facetValuesSelector:oy};return _d(C)},a=()=>{let C={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:y=>{r(yr(y)),r(T({legacy:fc(y),next:eg()}))},executeToggleExclude:y=>{r(Cr(y)),r(T({legacy:fc(y),next:eg()}))},facetValuesSelector:AA};return _d(C)},i=()=>{let C={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:y=>{r(gr(y)),r(T({legacy:mc(y),next:Zf()}))},executeToggleExclude:y=>{r(Sr(y)),r(T({legacy:mc(y),next:Zf()}))},facetValuesSelector:PA};return _d(C)},s=()=>Object.keys(n().categoryFacetSet).map(u).filter(C=>C.path.length),u=C=>{let y=iy(n(),C);return{facetId:C,field:n().categoryFacetSet[C].request.field,path:y,deselect:()=>{r(tr(C)),r(T({legacy:Ld({categoryFacetPath:y.map(g=>g.value),categoryFacetId:C}),next:wF()}))}}},c=()=>{let C=n().staticFilterSet??{};return Object.values(C).map(l)},l=C=>{let{id:y,values:g}=C,h=g.filter(x=>x.state!=="idle").map(x=>m(y,x));return{id:y,values:h}},m=(C,y)=>({value:y,deselect:()=>{let{caption:g,expression:h}=y;y.state==="selected"?r(Hr({id:C,value:y})):y.state==="excluded"&&r(Wr({id:C,value:y})),r(T({legacy:ki({staticFilterId:C,staticFilterValue:{caption:g,expression:h}}),next:Dd()}))}}),d=()=>{let C=n().automaticFacetSet?.set??{};return Object.values(C).map(y=>p(y.response)).filter(y=>y.values.length>0)},p=C=>{let{field:y,label:g}=C,h=C.values.filter(x=>x.state!=="idle").map(x=>f(y,x));return{facetId:y,field:y,label:g,values:h}},f=(C,y)=>({value:y,deselect:()=>{r(Qn({field:C,selection:y})),r(T({legacy:si({facetId:C,facetValue:y.value}),next:vl()}))}});function A(){return!![...o(),...a(),...i(),...s(),...c(),...d()].length}return{...t,get state(){return{facetBreadcrumbs:o(),categoryFacetBreadcrumbs:s(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:i(),staticFilterBreadcrumbs:c(),automaticFacetBreadcrumbs:d(),hasBreadcrumbs:A()}},deselectAll:()=>{t.deselectAll(),r(T({legacy:Qd()}))}}}function dD(e){return e.addReducers({configuration:K,search:X,facetSet:xr,numericFacetSet:vt,dateFacetSet:Ar,categoryFacetSet:rr}),!0}function IF(e){return e.type==="redirect"}var jd=class{constructor(t){this.response=t}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let t=this.response.preprocessingOutput.triggers.filter(IF);return t.length?t[0].content:null}};var qi=S("standaloneSearchBox/register",e=>F(e,{id:k,redirectionUrl:k,overwrite:new G({required:!1})})),Di=S("standaloneSearchBox/updateRedirectionUrl",e=>F(e,{id:k,redirectionUrl:k})),Vi=S("standaloneSearchBox/reset",e=>F(e,{id:k})),Ni=S("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>F(e,{id:k})),Mi=S("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Gn=W("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:o,validatePayload:a,navigatorContext:i}})=>{a(e,{id:new E({emptyAllowed:!1})});let s=await mD(r(),i),u=await o.plan(s);if(Ee(u))return n(u.error);let{redirectionUrl:c}=new jd(u.success);return c&&t(pD(c)),c||""}),pD=e=>D("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),mD=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await ht(e.configuration.analytics)},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await Oa(e.configuration.analytics):Ta(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var $d=j(Xc(),e=>e.addCase(qi,(t,r)=>{let{id:n,redirectionUrl:o,overwrite:a}=r.payload;!a&&n in t||(t[n]=tg(o))}).addCase(Vi,(t,r)=>{let{id:n}=r.payload,o=t[n];if(o){t[n]=tg(o.defaultRedirectionUrl);return}}).addCase(Di,(t,r)=>{let{id:n,redirectionUrl:o}=r.payload;n in t&&(t[n]=tg(o))}).addCase(Gn.pending,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!0)}).addCase(Gn.fulfilled,(t,r)=>{let n=r.payload,o=t[r.meta.arg.id];o&&(o.redirectTo=n||o.defaultRedirectionUrl,o.isLoading=!1)}).addCase(Gn.rejected,(t,r)=>{let n=t[r.meta.arg.id];n&&(n.isLoading=!1)}).addCase(Ni,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="searchFromLink")}).addCase(Mi,(t,r)=>{let n=t[r.payload.id];n&&(n.analytics.cause="omniboxFromLink",n.analytics.metadata=r.payload.metadata)}));function tg(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var TF=new Z({...Kf,redirectionUrl:new E({required:!0,emptyAllowed:!1}),overwrite:new G({required:!1})});function fD(e,t){if(!gD(e))throw O;let{dispatch:r}=e,n=()=>e.state,o=t.options.id||Zr("standalone_search_box"),a={id:o,highlightOptions:{...t.options.highlightOptions},...vd,overwrite:!1,...t.options};ge(e,TF,a,"buildStandaloneSearchBox");let i=Jf(e,{options:a});return r(qi({id:o,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...i,updateText(s){i.updateText(s),r(Ni({id:o}))},selectSuggestion(s){let u=Wf(n(),{id:o,suggestion:s});r(br({id:o,expression:s})),r(Mi({id:o,metadata:u})),this.submit()},afterRedirection(){r(Vi({id:o}))},updateRedirectUrl(s){r(Di({id:o,redirectionUrl:s}))},submit(){r(Me({q:this.state.value,enableQuerySyntax:a.enableQuerySyntax})),r(Gn({id:o}))},get state(){let u=n().standaloneSearchBoxSet[o];return{...i.state,isLoading:u.isLoading,redirectTo:u.redirectTo,analytics:u.analytics}}}}function gD(e){return e.addReducers({standaloneSearchBoxSet:$d,configuration:K,query:tt,querySuggest:Pi}),!0}function OF(e,t){return e.q!==t.q?jn():e.sortCriteria!==t.sortCriteria?wi():e.firstResult!==t.firstResult?yi():e.numberOfResults!==t.numberOfResults?hi():wt(e.f,t.f)?gc(e.f,t.f):wt(e.fExcluded,t.fExcluded)?gc(e.fExcluded,t.fExcluded,!0):wt(e.cf,t.cf)?gc(e.cf,t.cf):wt(e.af,t.af)?gc(e.af,t.af):wt(e.nf,t.nf)?kF(e.nf,t.nf):wt(e.df,t.df)?kF(e.df,t.df):ln()}function gc(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(d=>!o.includes(d));if(a.length){let d=a[0];switch(!0){case e[d].length>1:return Te(d);case r:return _r({facetId:d,facetValue:e[d][0]});default:return Dt({facetId:d,facetValue:e[d][0]})}}let i=o.filter(d=>!n.includes(d));if(i.length){let d=i[0];return r?mt({facetId:d,facetValue:t[d][0]}):Ae({facetId:d,facetValue:t[d][0]})}let s=o.find(d=>t[d].filter(p=>e[d].includes(p)));if(!s)return ln();let u=e[s],c=t[s],l=c.filter(d=>!u.includes(d));if(l.length)return r?mt({facetId:s,facetValue:l[0]}):Ae({facetId:s,facetValue:l[0]});let m=u.filter(d=>!c.includes(d));return m.length?r?_r({facetId:s,facetValue:m[0]}):Dt({facetId:s,facetValue:m[0]}):ln()}function kF(e={},t={}){return gc(Qi(e),Qi(t))}function qF(e,t){return e.q!==t.q?Rd():e.sortCriteria!==t.sortCriteria?Ed():wt(e.f,t.f)?Li(e.f,t.f):wt(e.fExcluded,t.fExcluded)?Li(e.fExcluded,t.fExcluded,!0):wt(e.cf,t.cf)?Li(e.cf,t.cf):wt(e.af,t.af)?Li(e.af,t.af):wt(e.nf,t.nf)?Li(Qi(e.nf),Qi(t.nf)):wt(e.df,t.df)?Li(Qi(e.df),Qi(t.df)):fa()}function wt(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function Li(e={},t={},r=!1){let n=Object.keys(e),o=Object.keys(t),a=n.filter(d=>!o.includes(d));if(a.length){let d=a[0];return e[d].length>1?Qe():jr()}if(o.filter(d=>!n.includes(d)).length)return r?ar():Pe();let s=o.find(d=>t[d].filter(p=>e[d].includes(p)));if(!s)return fa();let u=e[s],c=t[s];return c.filter(d=>!u.includes(d)).length?r?ar():Pe():u.filter(d=>!c.includes(d)).length?jr():fa()}function Qi(e={}){let t={};return Object.keys(e).forEach(r=>t[r]=e[r].map(n=>`${n.start}..${n.end}`)),t}function DF(e){return{q:Ce().q,enableQuerySyntax:Ce().enableQuerySyntax,aq:e.advancedSearchQueries?.defaultFilters.aq??nt().defaultFilters.aq,cq:e.advancedSearchQueries?.defaultFilters.cq??nt().defaultFilters.cq,firstResult:Ge().firstResult,numberOfResults:e.pagination?.defaultNumberOfResults??Ge().defaultNumberOfResults,sortCriteria:ze(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Lt(),sf:{},tab:"",af:{},mnf:{}}}var SD=new Z({parameters:new q({options:{required:!0},values:Mu})});function VF(e,t){let{dispatch:r}=e,n=U(e);return Re(e,SD,t.initialState,"buildSearchParameterManager"),r(de(t.initialState.parameters)),{...n,synchronize(o){let a=Gd(e,o);r(de(a))},get state(){return{parameters:rg(e)}}}}function Gd(e,t){return{...DF(e.state),...t}}function NF(e,t){return yD(e,t)}function rg(e){let t=e.state;return{...qf(t.query,r=>r.q,Ce().q),...hD(t),...Df(t.sortCriteria,r=>r,ze()),...Ao(t.facetSet,Sc(t),CD,"f"),...Ao(t.facetSet,Sc(t),xD,"fExcluded"),...AD(t),...FD(t),...RD(t),...bD(t)}}function Sc(e){return t=>e.facetOptions?.facets[t]?.enabled??!0}function hD(e){let t=Object.values(e.tabSet??{}).find(r=>r.isActive);return t?{tab:t.id}:{}}function yD(e,t){let r=e.state.tabSet,n=t.tab;if(!r||!Object.entries(r).length||!n)return!0;let o=n in r;return o||e.logger.warn(`The tab search parameter "${n}" is invalid. Ignoring change.`),o}function CD(e){return e.currentValues.filter(t=>t.state==="selected").map(t=>t.value)}function MF(e){return e.currentValues.filter(t=>t.state==="selected")}function xD(e){return e.currentValues.filter(t=>t.state==="excluded").map(t=>t.value)}function AD(e){return Ao(e.categoryFacetSet,Sc(e),t=>Ye(t.currentValues).map(r=>r.value),"cf")}function FD(e){return Ao(e.numericFacetSet,Sc(e),MF,"nf")}function RD(e){return Ao(e.dateFacetSet,Sc(e),MF,"df")}function bD(e){let t=e.automaticFacetSet?.set;if(t===void 0)return{};let r=Object.entries(t).map(([n,{response:o}])=>{let a=vD(o);return a.length?{[n]:a}:{}}).reduce((n,o)=>({...n,...o}),{});return Object.keys(r).length?{af:r}:{}}function vD(e){return e.values.filter(t=>t.state==="selected").map(t=>t.value)}function ng(e,t){let{dispatch:r}=e,n=VF(e,t);return{...n,synchronize(o){let a=LF(e),i=Gd(e,a),s=Gd(e,o);cc(i,s)||NF(e,s)&&(n.synchronize(o),r(T({legacy:OF(i,s),next:qF(i,s)})))},get state(){return{parameters:LF(e)}}}}function LF(e){let t=e.state;return{...rg(e),...PD(t),...wD(t),...ED(t),...ID(t),...TD(t),...qD(t),...kD(t)}}function PD(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==Ce().enableQuerySyntax?{enableQuerySyntax:t}:{}}function wD(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function ED(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function ID(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==Ge().firstResult?{firstResult:t}:{}}function TD(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function kD(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map(([r,n])=>{let o=OD(n.values);return o.length?{[r]:o}:{}}).reduce((r,n)=>({...r,...n}),{});return Object.keys(t).length?{sf:t}:{}}function OD(e){return e.filter(t=>t.state==="selected").map(t=>t.caption)}function qD(e){if(e.debug===void 0)return{};let t=e.debug;return t!==Lt()?{debug:t}:{}}var BF="..",og="...",DD=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,VD={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},zd="&",hc="=";function Hd(){return{serialize:LD(QD),deserialize:GD}}function yc(e){return e in VD}function ND(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function MD(e){let r=e in{nf:!0,df:!0,mnf:!0};return yc(e)&&r}function UF(e){return ND(e)||yc(e)}var LD=e=>t=>Object.entries(t).map(e).filter(r=>r).join(zd);function QD(e){let[t,r]=e;return UF(t)?yc(t)&&!MD(t)?UD(r)?jD(t,r):"":t==="nf"||t==="df"?_D(r)?$D(t,r):"":BD(t,r):""}function BD(e,t){return`${e}${hc}${encodeURIComponent(t)}`}function UD(e){return ag(e)?_F(e,r=>typeof r=="string"):!1}function _D(e){return ag(e)?_F(e,r=>ag(r)&&"start"in r&&"end"in r):!1}function ag(e){return!!(e&&typeof e=="object")}function _F(e,t){return Object.entries(e).filter(n=>{let o=n[1];return!Array.isArray(o)||!o.every(t)}).length===0}function jD(e,t){return Object.entries(t).map(([r,n])=>`${e}-${r}${hc}${n.map(o=>encodeURIComponent(o)).join(",")}`).join(zd)}function $D(e,t){return Object.entries(t).map(([r,n])=>{let o=n.map(({start:a,end:i,endInclusive:s})=>`${a}${s?og:BF}${i}`).join(",");return`${e}-${r}${hc}${o}`}).join(zd)}function GD(e){return e.split(zd).map(n=>zD(n)).map(HD).filter(JD).map(n=>XD(n)).reduce((n,o)=>{let[a,i]=o;if(yc(a)){let s={...n[a],...i};return{...n,[a]:s}}return{...n,[a]:i}},{})}function zD(e){let[t,...r]=e.split(hc),n=r.join(hc);return[t,n]}function HD(e){let[t,r]=e,n=DD.exec(t);if(!n)return e;let o=n[1],a=n[2],i=r.split(","),s=WD(o,i),u={[a]:s};return[o,JSON.stringify(u)]}function WD(e,t){return e==="nf"||e==="mnf"?YD(t):e==="df"?KD(t):t}function YD(e){return e.map(t=>{let{startAsString:r,endAsString:n,isEndInclusive:o}=jF(t);return{start:parseFloat(r),end:parseFloat(n),endInclusive:o}}).filter(({start:t,end:r})=>Number.isFinite(t)&&Number.isFinite(r)).map(({start:t,end:r,endInclusive:n})=>ic({start:t,end:r,state:"selected",endInclusive:n}))}function QF(e){try{return qy(e)?(Uu(e,Bs),!0):Kt(e)?(mo(e),!0):!1}catch{return!1}}function KD(e){return e.map(t=>{let{isEndInclusive:r,startAsString:n,endAsString:o}=jF(t);return{start:n,end:o,endInclusive:r}}).filter(({start:t,end:r})=>QF(t)&&QF(r)).map(({start:t,end:r,endInclusive:n})=>Eo({start:t,end:r,state:"selected",endInclusive:n}))}function JD(e){let t=UF(e[0]),r=e.length===2;return t&&r}function XD(e,t=!0){let[r,n]=e;return r==="enableQuerySyntax"?[r,n==="true"]:r==="debug"?[r,n==="true"]:r==="firstResult"?[r,parseInt(n)]:r==="numberOfResults"?[r,parseInt(n)]:yc(r)?[r,ZD(n)]:[r,t?decodeURIComponent(n):n]}function ZD(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach(n=>{let[o,a]=n;r[o]=a.map(i=>zo(i)?decodeURIComponent(i):i)}),r}function jF(e){let t=e.indexOf(og)!==-1,[r,n]=e.split(t?og:BF);return{isEndInclusive:t,startAsString:r,endAsString:n}}var eV=new Z({fragment:new E});function tV(e,t){let r;function n(){r=e.state.search.requestId}function o(){return r!==e.state.search.requestId}if(!nV(e))throw O;Re(e,eV,t.initialState,"buildUrlManager");let a=U(e),i=t.initialState.fragment;n();let s=ng(e,{initialState:{parameters:Wd(i)}});return{...a,subscribe(u){let c=()=>{let l=this.state.fragment;!rV(i,l)&&o()&&(i=l,u()),n()};return c(),e.subscribe(c)},get state(){return{fragment:Hd().serialize(s.state.parameters)}},synchronize(u){i=u;let c=Wd(u);s.synchronize(c)}}}function rV(e,t){if(e===t)return!0;let r=Wd(e),n=Wd(t);return cc(r,n)}function Wd(e){return Hd().deserialize(e)}function nV(e){return e.addReducers({configuration:K}),!0}function oV(e){return xi(e)}async function Yd(e,t){let{search:r,accessToken:n,organizationId:o,analytics:a}=e.configuration,i=e.query?.q||"";return{url:r.apiBaseUrl,accessToken:n,organizationId:o,enableNavigation:!1,...a.enabled&&{visitorId:await ht(e.configuration.analytics)},q:i,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var Vo=W("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let o=r(),a=await Yd(o,e),i=await t.apiClient.html(a);return Ee(i)?n(i.error):{content:i.success,uniqueId:e.uniqueId}}),Bi=S("resultPreview/next"),Ui=S("resultPreview/previous"),_i=S("resultPreview/prepare",e=>F(e,{results:new J({required:!0})})),$F=2048,ji=W("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),o=hh(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return o?.length>$F&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${$F} characters.`),{contentURL:o}});var GF=e=>D({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{Ke(e);let n=be(e,r),o=ve(e);return t.makeDocumentQuickview(n,o)},__legacy__provider:t=>{let r=new Ct(t);return r.getSearchUID=()=>e.searchUid??"",r},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=be(e,t),n=ve(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,actionCause:"preview",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var ig=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:o}=Ss();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=o},sg=e=>e.filter(t=>t.hasHtmlVersion).map(t=>t.uniqueId),Kd=j(Ss(),e=>{e.addCase(Vo.pending,t=>{t.isLoading=!0}).addCase(Vo.fulfilled,(t,r)=>{let{content:n,uniqueId:o}=r.payload;t.position=t.resultsWithPreview.indexOf(o),t.content=n,t.uniqueId=o,t.isLoading=!1}).addCase(T.fulfilled,(t,r)=>{ig(t),t.resultsWithPreview=sg(r.payload.response.results)}).addCase(Cn.fulfilled,(t,r)=>{ig(t),t.resultsWithPreview=t.resultsWithPreview.concat(sg(r.payload.response.results))}).addCase(Xt.fulfilled,ig).addCase(_i,(t,r)=>{t.resultsWithPreview=sg(r.payload.results)}).addCase(Bi,t=>{if(t.isLoading)return;let r=t.position+1;r>t.resultsWithPreview.length-1&&(r=0),t.position=r}).addCase(Ui,t=>{if(t.isLoading)return;let r=t.position-1;r<0&&(r=t.resultsWithPreview.length-1),t.position=r}).addCase(ji.fulfilled,(t,r)=>{t.contentURL=r.payload.contentURL})});function zF(e,t,r,n,o){if(!aV(e))throw O;let{dispatch:a}=e,i=()=>e.state,s=U(e),{result:u,maximumPreviewSize:c}=t.options,l=()=>{let{resultsWithPreview:d,position:p}=i().resultPreview;return d[p]},m=d=>{a(ji({uniqueId:d,requestedOutputSize:c,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||a(Vo({uniqueId:d,requestedOutputSize:c})),o&&o()};return{...s,fetchResultContent(){m(u.uniqueId)},next(){a(Bi()),m(l())},previous(){a(Ui()),m(l())},get state(){let d=i(),p=u.hasHtmlVersion,f=d.resultPreview,A=u.uniqueId===f.uniqueId?f.content:"",C=f.isLoading,y=f.contentURL,g=l();return{content:A,resultHasPreview:p,isLoading:C,contentURL:y,currentResultUniqueId:g}}}}function aV(e){return e.addReducers({configuration:K,resultPreview:Kd}),!0}function iV(e,t){if(!sV(e))throw O;let{dispatch:r}=e,n=()=>e.state,o=()=>n().search.results,s=zF(e,t,Yd,"/html",()=>{e.dispatch(GF(t.options.result))});return r(_i({results:o()})),{...s,get state(){return{...s.state,currentResult:o().findIndex(u=>u.uniqueId===s.state.currentResultUniqueId)+1,totalResults:o().length}}}}function sV(e){return e.addReducers({search:X}),!0}var cV=e=>D("analytics/folding/showMore",(t,r)=>(Ke(e),t.makeShowMoreFoldedResults(be(e,r),ve(e)))),uV=()=>D("analytics/folding/showLess",e=>e.makeShowLessFoldedResults()),HF={logShowMoreFoldedResults:cV,logShowLessFoldedResults:uV};function lV(e,t){return e.raw[t.collection]}function cg(e,t){return e.raw[t.parent]}function Cc(e,t){let r=e.raw[t.child];return Vc(r)?r[0]:r}function dV(e,t){return(e||t)!==void 0&&e===t}function YF(e,t,r,n=[]){let o=Cc(e,r);return o?n.indexOf(o)!==-1?[]:t.filter(a=>{let i=Cc(a,r)===Cc(e,r);return cg(a,r)===o&&!i}).map(a=>{let i={...a,searchUid:e.searchUid};return{result:i,children:YF(i,t,r,[...n,o])}}):[]}function pV(e,t){return e.find(r=>{let n=cg(r,t)===void 0,o=dV(cg(r,t),Cc(r,t));return n||o})}function KF(e){return e.parentResult?KF(e.parentResult):e}function mV(e,t,r,n){let o=ku(e),i={...n??pV(o,t)??KF(e),searchUid:r};return{result:i,children:YF(i,o,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function Jd(e,t,r,n){let o={};return e.forEach(a=>{let i=lV(a,t);i&&(!Cc(a,t)&&!a.parentResult||(o[i]=mV(a,t,r,n)))}),o}function WF(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var Xd=j($o(),e=>e.addCase(T.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Jd(r.response.results,t.fields,r.response.searchUid):{}}).addCase(Xt.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?Jd(r.response.results,t.fields,r.response.searchUid):{}}).addCase(Cn.fulfilled,(t,{payload:r})=>{t.collections=t.enabled?{...t.collections,...Jd(r.response.results,t.fields,r.response.searchUid)}:{}}).addCase(Rn,(t,{payload:r})=>t.enabled?t:{enabled:!0,collections:{},fields:{collection:r.collectionField??t.fields.collection,parent:r.parentField??t.fields.parent,child:r.childField??t.fields.child},filterFieldRange:r.numberOfFoldedResults??t.filterFieldRange}).addCase(bn.pending,(t,{meta:r})=>{let n=r.arg;WF(t,n).isLoadingMoreResults=!0}).addCase(bn.rejected,(t,{meta:r})=>{let n=r.arg;WF(t,n).isLoadingMoreResults=!1}).addCase(bn.fulfilled,(t,{payload:{collectionId:r,results:n,rootResult:o,searchUid:a}})=>{let i=Jd(n,t.fields,a,o);if(!i||!i[r])throw new Error(`Unable to create collection ${r} from received results: ${JSON.stringify(n)}. Folding most probably in an invalid state... `);t.collections[r]=i[r],t.collections[r].moreResultsAvailable=!1}));var fV=new Z(Ef);function JF(e,t,r){if(!gV(e))throw O;let n=Ad(e,t),{dispatch:o}=e,a=()=>e.state,i=t.options?.folding?ge(e,fV,t.options.folding,"buildFoldedResultList"):{};return o(Rn({...i})),{...n,loadCollection:s=>{o(t.loadCollectionActionCreator(s.result.raw[e.state.folding.fields.collection])),o(r.logShowMoreFoldedResults(s.result))},logShowMoreFoldedResults:s=>{o(r.logShowMoreFoldedResults(s))},logShowLessFoldedResults:()=>{o(r.logShowLessFoldedResults())},findResultById(s){return ug(this.state.results,u=>u.result.uniqueId===s.result.uniqueId)},findResultByCollection(s){return ug(this.state.results,u=>u.result.raw.foldingcollection===s.result.raw.foldingcollection)},get state(){let s=a();return{...n.state,results:n.state.results.map(u=>{let c=u.raw[s.folding.fields.collection];return!c||!s.folding.collections[c]?{result:u,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:s.folding.collections[c]})}}}}function gV(e){return e.addReducers({search:X,configuration:ol,folding:Xd,query:tt}),!0}function ug(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let o=ug(n.children,t);if(o)return o}}return null}function SV(e,t={}){let r=JF(e,{...t,loadCollectionActionCreator:bn,fetchMoreResultsActionCreator:Cn},HF);return{...r,get state(){return r.state}}}function XF(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function ZF(e,t){let r=[],n=[],o=[],a=[];return t.forEach(i=>{switch(i.type){case"redirect":r.push(i.content);break;case"query":n.push(i.content);break;case"execute":o.push({functionName:i.content.name,params:i.content.params});break;case"notify":a.push(i.content);break}}),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=o,e.notifications=a,e}function eR(e,t){return e.queryModification={...t,queryToIgnore:""},e}function tR(e,t){return e.queryModification.queryToIgnore=t,e}var zn=j(Zc(),e=>e.addCase(T.pending,XF).addCase(T.fulfilled,(t,r)=>ZF(t,r.payload.response.triggers)).addCase(Na,(t,r)=>eR(t,r.payload)).addCase(gn,(t,r)=>tR(t,r.payload)));function hV(e){if(!yV(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state,o=n().triggers.redirectTo;return{...t,subscribe(a){let i=()=>{let s=o!==this.state.redirectTo;o=this.state.redirectTo,s&&this.state.redirectTo&&(a(),r(Yu()))};return i(),e.subscribe(i)},get state(){return{redirectTo:n().triggers.redirectTo}}}}function yV(e){return e.addReducers({triggers:zn}),!0}function CV(e){if(!xV(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state,o=()=>n().triggers.queryModification.newQuery,a=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:o(),originalQuery:a(),wasQueryModified:o()!==""}},undo(){r(gn(o())),r(Me({q:a()})),r(T({legacy:Hu({undoneQuery:o()}),next:zy()}))}}}function xV(e){return e.addReducers({triggers:zn,query:tt}),!0}function AV(e){if(!FV(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state,o=n().triggers.executions;return{...t,subscribe(a){let i=()=>{let s=!Oo(this.state.executions,o,(u,c)=>u.functionName===c.functionName&&Oo(u.params,c.params));o=this.state.executions,s&&this.state.executions.length&&(a(),r(Ku()))};return i(),e.subscribe(i)},get state(){return{executions:n().triggers.executions}}}}function FV(e){return e.addReducers({triggers:zn}),!0}function RV(e){if(!bV(e))throw O;let t=U(e),{dispatch:r}=e,n=()=>e.state,o=n().triggers.notifications;return{...t,subscribe(a){let i=()=>{let s=!Oo(o,this.state.notifications);o=this.state.notifications,s&&(a(),r(Wu()))};return i(),e.subscribe(i)},get state(){return{notifications:n().triggers.notifications}}}}function bV(e){return e.addReducers({triggers:zn}),!0}var Zd=()=>new q({values:{questionAnswerId:k},options:{required:!0}}),lg=()=>new q({values:{linkText:pe,linkURL:pe},options:{required:!0}});function $i(e){return F(e,Zd())}function Nt(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&eC(e,r.contentIdKey,r.contentIdValue)}function Yr(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex(o=>o.questionAnswerId===t)??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var dg=()=>D({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:e=>e.makeExpandSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),pg=()=>D({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:e=>e.makeCollapseSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),mg=()=>D({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:e=>e.makeLikeSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"like",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),fg=()=>D({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:e=>e.makeDislikeSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"dislike",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),gg=()=>D({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=Nt(t);return e.makeOpenSmartSnippetSource(be(r,t),ve(r))},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:e=>{let t=Nt(e),r=ve(t);return{answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:r.contentIDValue,type:"Source"}}}}),xc=e=>D({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{F(e,lg());let n=Nt(r);return n?t.makeOpenSmartSnippetInlineLink(be(n,r),{...ve(n),...e}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=Nt(t),n=ve(r);return{answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:n.contentIDValue,type:"InlineLink"}}}}),Sg=()=>D("analytics/smartSnippet/feedbackModal/open",e=>e.makeOpenSmartSnippetFeedbackModal()),hg=()=>D("analytics/smartSnippet/feedbackModal/close",e=>e.makeCloseSmartSnippetFeedbackModal()),yg=e=>D({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason(e),analyticsType:"Qna.SubmitSmartSnippetFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||""},feedback:{reason:e}})}),Cg=e=>D({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason("other",e),analyticsType:"Qna.SubmitSmartSnippetFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||""},feedback:{reason:"other",details:e}})}),xg=e=>D({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{$i(e);let n=Yr(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:t=>({action:"expand",answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),Ag=e=>D({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{$i(e);let n=Yr(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:t=>({action:"collapse",answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),Ac=e=>D({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{F(e,Zd());let n=Yr(r,e.questionAnswerId);if(!n)return null;let o=Nt(r,n.documentId);return o?t.makeOpenSmartSnippetSuggestionSource(be(o,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=Yr(t,e.questionAnswerId);return{answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:r?.documentId.contentIdValue||"",type:"Source"}}}}),ep=(e,t)=>D({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{F(e,Zd()),F(t,lg());let o=Yr(n,e.questionAnswerId);if(!o)return null;let a=Nt(n,o.documentId);return a?r.makeOpenSmartSnippetSuggestionInlineLink(be(a,n),{question:o.question,answerSnippet:o.answerSnippet,documentId:o.documentId,linkText:t.linkText,linkURL:t.linkURL}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:r=>{let n=Yr(r,e.questionAnswerId);return{answer:{responseId:r.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:n?.documentId.contentIdValue||"",type:"InlineLink"}}}}),tp={logExpandSmartSnippet:dg,logCollapseSmartSnippet:pg,logLikeSmartSnippet:mg,logDislikeSmartSnippet:fg,logOpenSmartSnippetSource:gg,logOpenSmartSnippetInlineLink:xc,logOpenSmartSnippetFeedbackModal:Sg,logCloseSmartSnippetFeedbackModal:hg,logSmartSnippetFeedback:yg,logSmartSnippetDetailedFeedback:Cg,logExpandSmartSnippetSuggestion:xg,logCollapseSmartSnippetSuggestion:Ag,logOpenSmartSnippetSuggestionSource:Ac};var Gi=S("smartSnippet/expand"),zi=S("smartSnippet/collapse"),Hi=S("smartSnippet/like"),Wi=S("smartSnippet/dislike"),Yi=S("smartSnippet/feedbackModal/open"),Hn=S("smartSnippet/feedbackModal/close"),Ki=S("smartSnippet/related/expand",e=>$i(e)),Ji=S("smartSnippet/related/collapse",e=>$i(e));var rR=(e,t)=>e.findIndex(r=>r.questionAnswerId===t.questionAnswerId);function nR({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return Lo({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function vV(e,t){let r=nR(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var vr=j(gs(),e=>e.addCase(Gi,t=>{t.expanded=!0}).addCase(zi,t=>{t.expanded=!1}).addCase(Hi,t=>{t.liked=!0,t.disliked=!1,t.feedbackModalOpen=!1}).addCase(Wi,t=>{t.liked=!1,t.disliked=!0}).addCase(Yi,t=>{t.feedbackModalOpen=!0}).addCase(Hn,t=>{t.feedbackModalOpen=!1}).addCase(T.fulfilled,(t,r)=>{let n=r.payload.response.questionAnswer.relatedQuestions.map((a,i)=>vV(a,t.relatedQuestions[i])),o=nR(r.payload.response.questionAnswer);return t.questionAnswerId===o?{...t,relatedQuestions:n}:{...gs(),relatedQuestions:n,questionAnswerId:o}}).addCase(Ki,(t,r)=>{let n=rR(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!0)}).addCase(Ji,(t,r)=>{let n=rR(t.relatedQuestions,r.payload);n!==-1&&(t.relatedQuestions[n].expanded=!1)}));function oR(e,t,r){if(!PV(e))throw O;let n=U(e),o=()=>e.state,a=()=>Nt(o()),i=null,s=et(e,{options:{selectionDelay:r?.options?.selectionDelay}},()=>{let u=a();if(!u){i=null;return}let{searchResponseId:c}=o().search;i!==c&&(i=c,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(Pt(u)))});return{...n,get state(){let u=o();return{question:u.search.questionAnswer.question,answer:u.search.questionAnswer.answerSnippet,documentId:u.search.questionAnswer.documentId,expanded:u.questionAnswering.expanded,answerFound:u.search.questionAnswer.answerSnippet!=="",liked:u.questionAnswering.liked,disliked:u.questionAnswering.disliked,feedbackModalOpen:u.questionAnswering.feedbackModalOpen,source:a()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(Gi())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(zi())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(Hi())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(Wi())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(Yi())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(Hn())},sendFeedback(u){e.dispatch(t.logSmartSnippetFeedback(u)),e.dispatch(Hn())},sendDetailedFeedback(u){e.dispatch(t.logSmartSnippetDetailedFeedback(u)),e.dispatch(Hn())},selectSource(){s.select()},beginDelayedSelectSource(){s.beginDelayedSelect()},cancelPendingSelectSource(){s.cancelPendingSelect()}}}function PV(e){return e.addReducers({search:X,questionAnswering:vr}),!0}function rp(e,t){if(!wV(e))throw O;let r=()=>e.state,n=new Set,o=l=>n.has(l)?!0:(n.add(l),!1),a=null,i=l=>{a!==l&&(a=l,u={},n.clear())},s=(l,m,d)=>et(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{o(m)||e.dispatch(d?ep({questionAnswerId:d},l):xc(l))}),u={},c=(l,m)=>{let{searchResponseId:d}=r().search;i(d);let p=Lo({...l,questionAnswerId:m});return p in u||(u[p]=s(l,p,m)),u[p]};return{selectInlineLink(l,m){c(l,m)?.select()},beginDelayedSelectInlineLink(l,m){c(l,m)?.beginDelayedSelect()},cancelPendingSelectInlineLink(l,m){c(l,m)?.cancelPendingSelect()}}}function wV(e){return e.addReducers({search:X,questionAnswering:vr}),!0}function EV(e,t){let r=oR(e,tp,t),n=rp(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(o){n.selectInlineLink(o)},beginDelayedSelectInlineLink(o){n.beginDelayedSelectInlineLink(o)},cancelPendingSelectInlineLink(o){n.cancelPendingSelectInlineLink(o)}}}function aR(e,t){if(!IV(e))throw O;let r=U(e),n=()=>e.state,o=a=>{let{contentIdKey:i,contentIdValue:s}=a;return e.state.search.results.find(u=>xn(u,i)===s)};return{...r,get state(){let a=n();return{questions:a.search.questionAnswer.relatedQuestions.map((i,s)=>({question:i.question,answer:i.answerSnippet,documentId:i.documentId,questionAnswerId:a.questionAnswering.relatedQuestions[s].questionAnswerId,expanded:a.questionAnswering.relatedQuestions[s].expanded,source:o(i.documentId)}))}},expand(a){let i={questionAnswerId:a};e.dispatch(t.logExpandSmartSnippetSuggestion(i)),e.dispatch(Ki(i))},collapse(a){let i={questionAnswerId:a};e.dispatch(t.logCollapseSmartSnippetSuggestion(i)),e.dispatch(Ji(i))}}}function IV(e){return e.addReducers({search:X,questionAnswering:vr}),!0}function iR(e,t){if(!TV(e))throw O;let r=()=>e.state,n=m=>{let d=r(),p=Yr(d,m);return p?Nt(d,p.documentId):null},o=new Set,a=m=>o.has(m)?!0:(o.add(m),!1),i=null,s=m=>{i!==m&&(i=m,c={},o.clear())},u=(m,d)=>et(e,{options:{selectionDelay:t?.options?.selectionDelay}},()=>{a(d)||(e.dispatch(Ac({questionAnswerId:d})),e.dispatch(Pt(m)))}),c={},l=m=>{let{searchResponseId:d}=r().search;s(d);let p=n(m);return p?(m in c||(c[m]=u(p,m)),c[m]):null};return{selectSource(m){l(m)?.select()},beginDelayedSelectSource(m){l(m)?.beginDelayedSelect()},cancelPendingSelectSource(m){l(m)?.cancelPendingSelect()}}}function TV(e){return e.addReducers({search:X,questionAnswering:vr}),!0}function kV(e,t){let r=aR(e,tp),n=rp(e,{options:{selectionDelay:t?.options?.selectionDelay}}),o=iR(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectSource(a){o.selectSource(a)},beginDelayedSelectSource(a){o.beginDelayedSelectSource(a)},cancelPendingSelectSource(a){o.cancelPendingSelectSource(a)},selectInlineLink(a,i){n.selectInlineLink(i,a)},beginDelayedSelectInlineLink(a,i){n.beginDelayedSelectInlineLink(i,a)},cancelPendingSelectInlineLink(a,i){n.cancelPendingSelectInlineLink(i,a)}}}var OV={queries:new J({required:!0,each:new E({emptyAllowed:!1})}),maxLength:new B({required:!0,min:1,default:10})},Xi=S("recentQueries/registerRecentQueries",e=>F(e,OV)),Zi=S("recentQueries/clearRecentQueries");var sR=()=>D("analytics/recentQueries/clear",e=>e.makeClearRecentQueries()),cR=()=>D("analytics/recentQueries/click",e=>e.makeRecentQueryClick());var np=j(Kc(),e=>{e.addCase(Xi,qV).addCase(Zi,DV).addCase(T.fulfilled,(t,r)=>{let n=r.payload.queryExecuted.trim(),o=r.payload.response.results;!n.length||!o.length||VV(n,t)})});function qV(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function DV(e){e.queries=[]}function VV(e,t){t.queries=t.queries.filter(n=>n!==e);let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}var NV={queries:[]},MV={maxLength:10,clearFilters:!0},LV=new Z({queries:new J({required:!0})}),QV=new Z({maxLength:new B({required:!0,min:1}),clearFilters:new G});function BV(e,t){ge(e,QV,t?.options,"buildRecentQueriesList"),Re(e,LV,t?.initialState,"buildRecentQueriesList")}function UV(e,t){if(!_V(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a={...MV,...t?.options},i={...NV,...t?.initialState};BV(e,{options:a,initialState:i});let s={queries:i.queries,maxLength:a.maxLength};return n(Xi(s)),{...r,get state(){let u=o();return{...u.recentQueries,analyticsEnabled:u.configuration.analytics.enabled}},clear(){n(sR()),n(Zi())},executeRecentQuery(u){let c=new B({required:!0,min:0,max:this.state.queries.length}).validate(u);if(c)throw new Error(c);let l={q:this.state.queries[u],clearFilters:a.clearFilters};zc(e.state.query?.enableQuerySyntax)&&(l.enableQuerySyntax=e.state.query.enableQuerySyntax),n(Ba(l)),n(T({legacy:cR()}))}}}function _V(e){return e.addReducers({search:X,recentQueries:np}),!0}var uR=e=>D("analytics/recentResults/click",(t,r)=>(Ke(e),t.makeRecentResultClick(be(e,r),ve(e)))),lR=()=>D("analytics/recentResults/clear",e=>e.makeClearRecentResults());var op=j(Jc(),e=>{e.addCase(Ai,(t,r)=>{t.results=r.payload.results.slice(0,r.payload.maxLength),t.maxLength=r.payload.maxLength}).addCase(Fi,t=>{t.results=[]}).addCase(Pt,(t,r)=>{let n=r.payload;t.results=t.results.filter(a=>a.uniqueId!==n.uniqueId);let o=t.results.slice(0,t.maxLength-1);t.results=[n,...o]})});var jV={initialState:{results:[]},options:{maxLength:10}},$V=new Z({results:new J({required:!0})}),GV=new Z({maxLength:new B({required:!0,min:1})});function zV(e,t){ge(e,GV,t?.options,"buildRecentResultsList"),Re(e,$V,t?.initialState,"buildRecentResultsList")}function HV(e,t){if(!WV(e))throw O;let r=U(e),{dispatch:n}=e,o=()=>e.state,a={...jV,...t};zV(e,a);let i={results:a.initialState.results,maxLength:a.options.maxLength};return n(Ai(i)),{...r,get state(){return o().recentResults},clear(){n(lR()),n(Fi())}}}function WV(e){return e.addReducers({recentResults:op}),!0}function YV(e,t){return et(e,t,()=>e.dispatch(uR(t.options.result)))}function KV(e,t){if(!JV(e))throw O;let r=d=>e.state.facetOptions.facets[d]?.enabled??!1,n=d=>e.state.facetSet?.[d]?.request?.currentValues??e.state.categoryFacetSet?.[d]?.request?.currentValues??e.state.numericFacetSet?.[d]?.request?.currentValues??e.state.dateFacetSet?.[d]?.request?.currentValues??null,o=d=>d in e.state.facetOptions.facets,a=()=>Lo({isFacetRegistered:o(t.facetId),parentFacets:t.conditions.map(({parentFacetId:d})=>o(d)?{enabled:r(d),values:n(d)}:null)}),i=()=>{let d=a();return d===l?!1:(l=d,!0)},s=()=>t.conditions.some(d=>{if(!r(d.parentFacetId))return!1;let p=n(d.parentFacetId);return p===null?!1:d.condition(p)}),u=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach(([d,p])=>p.request.freezeCurrentValues&&e.dispatch($r({facetId:d,freezeCurrentValues:!1})))},c=()=>{if(!o(t.facetId))return;let d=r(t.facetId),p=s();d!==p&&(e.dispatch(p?Le(t.facetId):Se(t.facetId)),u())};if(!t.conditions.length)return{stopWatching(){}};let l=a(),m=e.subscribe(()=>{i()&&c()});return c(),{stopWatching(){m()}}}function JV(e){return e.addReducers({facetOptions:ke}),!0}function XV(e,t){if(!ZV(e))throw O;let{facetSearch:r,allowedValues:n,...o}=t.options.facet,a=Be(e,o);e.dispatch(dr({...ac,...o,facetId:a,...n&&{allowedValues:{type:"simple",values:n}}}));let i=Ul(e,{options:{...r,facetId:a},select:u=>{e.dispatch(ne()),e.dispatch(T({legacy:Ae({facetId:a,facetValue:u.rawValue}),next:Pe()}))},exclude:u=>{e.dispatch(ne()),e.dispatch(T({legacy:mt({facetId:a,facetValue:u.rawValue}),next:ar()}))},isForFieldSuggestions:!0,executeFacetSearchActionCreator:Ie,executeFieldSuggestActionCreator:nr});return{...U(e),...i,updateText:function(u){i.updateText(u),i.search()},get state(){return i.state}}}function ZV(e){return e.addReducers({facetSet:xr,configuration:K,facetSearchSet:pi,search:X}),!0}function eN(e,t){if(!tN(e))throw O;let{facetSearch:r,...n}=t.options.facet,o=Be(e,n);e.dispatch(er({...ec,...n,facetId:o}));let a=Vl(e,{options:{...r,facetId:o},executeFacetSearchActionCreator:Ie,executeFieldSuggestActionCreator:nr,select:s=>{e.dispatch(ne()),e.dispatch(T({legacy:Ae({facetId:o,facetValue:s.rawValue}),next:Pe()}))},isForFieldSuggestions:!0});return{...U(e),...a,updateText:function(s){a.updateText(s),a.search()},get state(){return a.state}}}function tN(e){return e.addReducers({categoryFacetSet:rr,configuration:K,categoryFacetSearchSet:oi,search:X}),!0}var pR=j(tn(),e=>{e.addCase(T.fulfilled,(t,r)=>{t.set={},r.payload.response.generateAutomaticFacets?.facets?.forEach(o=>{t.set[o.field]={response:o}})}).addCase(Sd,(t,r)=>{r.payload.desiredCount&&(t.desiredCount=r.payload.desiredCount),r.payload.numberOfValues&&(t.numberOfValues=r.payload.numberOfValues)}).addCase(Qn,(t,r)=>{let{field:n,selection:o}=r.payload,a=t.set[n]?.response;if(!a)return;let i=a.values.find(u=>u.value===o.value);if(!i)return;let s=i.state==="selected";i.state=s?"idle":"selected"}).addCase(hd,(t,r)=>{let n=r.payload,o=t.set[n]?.response;if(o)for(let a of o.values)a.state="idle"}).addCase(de,(t,r)=>{let n=r.payload.af??{},o=Object.keys(t.set);for(let a in n)if(!t.set[a]){let i=rN(a),s=n[a].map(u=>dR(u));i.values.push(...s),t.set[a]={response:i}}for(let a of o)if(!(a in n)){let i=t.set[a]?.response;for(let s of i.values)s.state="idle"}for(let a in n){let i=t.set[a]?.response;if(i){let s=i.values,u=new Set(n[a]);for(let c of s)u.has(c.value)?(c.state="selected",u.delete(c.value)):c.state="idle";for(let c of u)i.values.push(dR(c))}}}).addCase(ce.fulfilled,(t,r)=>{if(r.payload&&Object.keys(r.payload.automaticFacetSet.set).length!==0)return r.payload.automaticFacetSet}).addCase(xe,t=>{Object.values(t.set).forEach(({response:r})=>{r.values.forEach(n=>n.state="idle")})})});function rN(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function dR(e){return{value:e,state:"selected",numberOfResults:0}}function mR(e,t){let{dispatch:r}=e,n=U(e),{field:o}=t;return{...n,toggleSelect(a){r(Qn({field:o,selection:a})),r(T({legacy:Ql(o,a),next:Bl(a)}))},deselectAll(){r(hd(o)),r(T({legacy:Te(o),next:Qe()}))},get state(){let a=e.state.automaticFacetSet?.set[o]?.response;return a?{field:a.field,label:a.label,values:a.values}:{field:"",values:[],label:""}}}}function fR(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function nN(e,t){if(!oN(e))throw O;let{dispatch:r}=e,n=fR(t.options);return r(Sd(n)),{...U(e),get state(){return{automaticFacets:e.state.search.response.generateAutomaticFacets?.facets.map(i=>mR(e,{field:i.field}))??[]}}}}function oN(e){return e.addReducers({automaticFacetSet:pR,configuration:K,search:X}),!0}var Kr="RGA";function Fg(e){return typeof e=="object"}var aN=()=>D("analytics/generatedAnswer/retry",e=>e.makeRetryGeneratedAnswer()),iN=e=>D("analytics/generatedAnswer/rephrase",(t,r)=>{let{id:n,answerAPIEnabled:o}=Xe(r);return n?t.makeRephraseGeneratedAnswer({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},rephraseFormat:e.answerStyle}):null}),sN=e=>D({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Xe(r),a=hf(r,e);return!n||!a?null:t.makeOpenGeneratedAnswerSource({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},permanentId:a.permanentid,citationId:a.id})},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:Kr},citation:{id:e,type:"Source"}})}),cN=(e,t)=>D({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let{id:o,answerAPIEnabled:a}=Xe(n),i=hf(n,e);return!o||!i?null:r.makeGeneratedAnswerSourceHover({...a?{answerAPIStreamId:o}:{generativeQuestionAnsweringId:o},permanentId:i.permanentid,citationId:i.id,citationHoverTimeMs:t})},analyticsType:"Qna.CitationHover",analyticsPayloadBuilder:r=>({answer:{responseId:r.search?.response.searchUid||"",type:Kr},citation:{id:e,type:"Source"},citationHoverTimeInMs:t})}),uN=()=>D({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeLikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"like",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),lN=()=>D({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeDislikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"dislike",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),dN=e=>D({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Xe(r);if(!n)return null;let a=o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n};return Fg(e)?t.makeGeneratedAnswerFeedbackSubmitV2({...a,...e}):t.makeGeneratedAnswerFeedbackSubmit({...a,reason:e})},analyticsType:Fg(e)?"Qna.SubmitRgaFeedback":void 0,analyticsPayloadBuilder:Fg(e)?t=>{let{search:r}=t,{response:n}=r||{},o=n?.searchUid||"",{helpful:a,readable:i,documented:s,details:u,hallucinationFree:c,correctTopic:l,documentUrl:m}=e;return{answer:{responseId:o},feedback:{helpful:a,readable:i,documented:s,details:u,hallucination_free:c,correct_topic:l,document_url:m}}}:void 0}),pN=e=>D({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:o}=Xe(r);return n?t.makeGeneratedAnswerFeedbackSubmit({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},reason:"other",details:e}):null}}),Rg=e=>D("analytics/generatedAnswer/streamEnd",(t,r)=>{let{id:n,answerAPIEnabled:o}=Xe(r),a=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({...o?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},answerGenerated:e,answerTextIsEmpty:a}):null}),mN=()=>D({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeGeneratedAnswerShowAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"show",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),fN=()=>D({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeGeneratedAnswerHideAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"hide",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),gN=()=>D({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeGeneratedAnswerExpand({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),SN=()=>D({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeGeneratedAnswerCollapse({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})}),hN=()=>D({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Xe(t);return r?e.makeGeneratedAnswerCopyToClipboard({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"copyToClipboard",answer:{responseId:e.search?.response.searchUid||"",type:Kr}})});var gR=()=>({actionCause:"rephraseGeneratedAnswer"}),Fc={logCopyGeneratedAnswer:hN,logGeneratedAnswerHideAnswers:fN,logGeneratedAnswerShowAnswers:mN,logGeneratedAnswerStreamEnd:Rg,logGeneratedAnswerDetailedFeedback:pN,logGeneratedAnswerFeedback:dN,logDislikeGeneratedAnswer:lN,logLikeGeneratedAnswer:uN,logHoverCitation:cN,logOpenGeneratedAnswerSource:sN,logRetryGeneratedAnswer:aN,logRephraseGeneratedAnswer:iN,logGeneratedAnswerExpand:gN,logGeneratedAnswerCollapse:SN};var SR=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:e.search.extendedResults?.generativeQuestionAnsweringId});var hR=["default","bullet","step","concise"],yR=["text/plain","text/markdown"];var es=new E({required:!0}),CR=new E,ip=new G({required:!0}),yN={id:es,title:es,uri:es,permanentid:es,clickUri:CR},xR=new E({required:!0,constrainTo:yR}),ts=S("generatedAnswer/setIsVisible",e=>F(e,ip)),bg=S("generatedAnswer/updateMessage",e=>F(e,{textDelta:es})),vg=S("generatedAnswer/updateCitations",e=>F(e,{citations:new J({required:!0,each:new q({values:yN})})})),Pg=S("generatedAnswer/updateError",e=>F(e,{message:CR,code:new B({min:0})})),Pr=S("generatedAnswer/resetAnswer"),sp=S("generatedAnswer/like"),cp=S("generatedAnswer/dislike"),up=S("generatedAnswer/feedbackModal/open"),bc=S("generatedAnswer/expand"),lp=S("generatedAnswer/collapse"),dp=S("generatedAnswer/setId",e=>F(e,{id:new E({required:!0})})),pp=S("generatedAnswer/feedbackModal/close"),No=S("generatedAnswer/sendFeedback"),Rc=S("generatedAnswer/setIsLoading",e=>F(e,ip)),ap=S("generatedAnswer/setIsStreaming",e=>F(e,ip)),wg=S("generatedAnswer/setAnswerContentFormat",e=>F(e,xR)),vc=S("generatedAnswer/updateResponseFormat",e=>F(e,{answerStyle:new E({required:!0,constrainTo:hR}),contentFormat:new J({each:xR,default:["text/plain"]})})),mp=S("knowledge/updateAnswerConfigurationId",e=>F(e,es)),fp=S("generatedAnswer/registerFieldsToIncludeInCitations",e=>F(e,yu)),Eg=S("generatedAnswer/setIsAnswerGenerated",e=>F(e,ip)),AR=W("generatedAnswer/streamAnswer",async(e,t)=>{let r=t.getState(),{dispatch:n,extra:o}=t,{setAbortControllerRef:a}=e,i=await SR(r),s=(l,m)=>{switch(l){case"genqa.headerMessageType":{let d=JSON.parse(m);n(wg(d.contentFormat));break}case"genqa.messageType":n(bg(JSON.parse(m)));break;case"genqa.citationsType":n(vg(JSON.parse(m)));break;case"genqa.endOfStreamType":{let d=JSON.parse(m).answerGenerated;n(ap(!1)),n(Eg(d)),n(Rg(d));break}default:r.debug&&o.logger.warn(`Unknown payloadType: "${l}"`)}};n(Rc(!0));let u=l=>l.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=o.streamingClient?.streamGeneratedAnswer(i,{write:l=>{u(i)&&(n(Rc(!1)),l.payload&&l.payloadType&&s(l.payloadType,l.payload))},abort:l=>{u(i)&&n(Pg(l))},close:()=>{u(i)&&n(ap(!1))},resetAnswer:()=>{u(i)&&n(Pr())}});c?a(c):n(Rc(!1))});var rs=j(ps(),e=>e.addCase(ts,(t,{payload:r})=>{t.isVisible=r}).addCase(dp,(t,{payload:r})=>{t.id=r.id}).addCase(bg,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0,t.answer||(t.answer=""),t.answer+=r.textDelta,delete t.error}).addCase(vg,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!0;let n=new Map;for(let o of[t.citations,r.citations])for(let a of o)n.set(a.uri,a);t.citations=Array.from(n.values()),delete t.error}).addCase(Pg,(t,{payload:r})=>{t.isLoading=!1,t.isStreaming=!1,t.error={...r,isRetryable:r.code===Rm},t.citations=[],delete t.answer}).addCase(sp,t=>{t.liked=!0,t.disliked=!1}).addCase(cp,t=>{t.liked=!1,t.disliked=!0}).addCase(up,t=>{t.feedbackModalOpen=!0}).addCase(pp,t=>{t.feedbackModalOpen=!1}).addCase(No,t=>{t.feedbackSubmitted=!0}).addCase(Pr,t=>({...ps(),...t.answerConfigurationId?{answerConfigurationId:t.answerConfigurationId}:{},responseFormat:t.responseFormat,fieldsToIncludeInCitations:t.fieldsToIncludeInCitations,isVisible:t.isVisible,id:t.id})).addCase(Rc,(t,{payload:r})=>{t.isLoading=r}).addCase(ap,(t,{payload:r})=>{t.isStreaming=r}).addCase(wg,(t,{payload:r})=>{t.answerContentFormat=r}).addCase(vc,(t,{payload:r})=>{t.responseFormat=r}).addCase(fp,(t,r)=>{t.fieldsToIncludeInCitations=[...new Set(t.fieldsToIncludeInCitations.concat(r.payload))]}).addCase(Eg,(t,{payload:r})=>{t.isAnswerGenerated=r}).addCase(bc,t=>{t.expanded=!0}).addCase(lp,t=>{t.expanded=!1}).addCase(mp,(t,{payload:r})=>{t.answerConfigurationId=r}));function gp(e,t,r={}){if(!CN(e))throw O;let{dispatch:n}=e,o=U(e),a=()=>e.state,i=r.initialState?.isVisible;i!==void 0&&n(ts(i));let s=r.initialState?.responseFormat;s&&n(vc(s));let u=r.fieldsToIncludeInCitations;return u&&n(fp(u)),r.initialState?.expanded&&n(bc()),{...o,get state(){return a().generatedAnswer},like(){this.state.liked||(n(sp()),n(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(n(cp()),n(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){n(up())},closeFeedbackModal(){n(pp())},sendFeedback(l){n(t.logGeneratedAnswerFeedback(l)),n(No())},sendDetailedFeedback(l){n(t.logGeneratedAnswerDetailedFeedback(l)),n(No())},logCitationClick(l){n(t.logOpenGeneratedAnswerSource(l))},logCitationHover(l,m){n(t.logHoverCitation(l,m))},rephrase(l){n(vc(l))},show(){this.state.isVisible||(n(ts(!0)),n(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(n(ts(!1)),n(t.logGeneratedAnswerHideAnswers()))},expand(){this.state.expanded||(n(bc()),n(t.logGeneratedAnswerExpand()))},collapse(){this.state.expanded&&(n(lp()),n(t.logGeneratedAnswerCollapse()))},logCopyToClipboard(){n(t.logCopyGeneratedAnswer())},retry(){}}}function CN(e){return e.addReducers({generatedAnswer:rs}),!0}var _e={engines:{},setAbortControllerRef:(e,t)=>{_e.engines[t].abortController=e},getIsStreamInProgress:e=>!_e.engines[e].abortController||_e.engines[e].abortController?.signal.aborted?(_e.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let r=e.state,n=r.search.requestId,o=r.search.extendedResults.generativeQuestionAnsweringId,a=r.generatedAnswer.id;_e.engines[a].lastRequestId!==n&&(_e.engines[a].lastRequestId=n,_e.engines[a].abortController?.abort(),e.dispatch(Pr())),!_e.getIsStreamInProgress(a)&&o&&o!==_e.engines[a].lastStreamId&&(_e.engines[a].lastStreamId=o,e.dispatch(AR({setAbortControllerRef:s=>_e.setAbortControllerRef(s,a)})))};return e.subscribe(t)}};function FR(e,t,r={}){if(!xN(e))throw O;let n=gp(e,t,r),o=()=>e.state;if(e.state.generatedAnswer.id&&!_e.engines[e.state.generatedAnswer.id]&&(_e.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:e.state.search.requestId,lastStreamId:e.state.search.extendedResults.generativeQuestionAnsweringId??""}),!e.state.generatedAnswer.id){let i=Zr("genQA-",12);e.dispatch(dp({id:i}))}_e.engines[e.state.generatedAnswer.id]||(_e.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:"",lastStreamId:""}),_e.subscribeToSearchRequests(e);let a=i=>"executeFirstSearchAfterStandaloneSearchBoxRedirect"in i;return{...n,get state(){return o().generatedAnswer},retry(){a(e)&&e.dispatch(T({legacy:t.logRetryGeneratedAnswer()}))},rephrase(i){n.rephrase(i),a(e)&&e.dispatch(T({legacy:t.logRephraseGeneratedAnswer(i),next:gR()}))}}}function xN(e){return e.addReducers({generatedAnswer:rs}),!0}var RR=tl.injectEndpoints({endpoints:e=>({post:e.mutation({query:t=>({url:"/evaluations",method:"POST",body:t})})})});var Sp=e=>e==="yes"?!0:e==="no"?!1:null,AN=({answerApiState:e,feedback:t,query:r})=>({additionalNotes:t.details??null,answer:{text:e.answer,responseId:e.answerId,format:e.contentFormat??"text/plain"},correctAnswerUrl:t.documentUrl??null,details:{correctTopic:Sp(t.correctTopic),documented:Sp(t.documented),hallucinationFree:Sp(t.hallucinationFree),readable:Sp(t.readable)},helpful:t.helpful,question:r}),FN=e=>{let t,r=()=>{let n=e.state,o=wC(n);o.q.length===0||o.requestId.length===0||o?.requestId!==t?.requestId&&(t=o,e.dispatch(Pr()),e.dispatch(nl(n)))};e.subscribe(r)};function bR(e,t,r={}){if(!RN(e))throw O;let{rephrase:n,...o}=gp(e,t,r),a=()=>e.state;return e.dispatch(mp(r.answerConfigurationId)),FN(e),{...o,get state(){let i=zs(e.state).data;return{...a().generatedAnswer,answer:i?.answer,citations:i?.citations??[],error:{message:i?.error?.message,statusCode:i?.error?.code},isLoading:i?.isLoading??!1,isStreaming:i?.isStreaming??!1,answerContentFormat:i?.contentFormat??"text/plain",isAnswerGenerated:i?.generated??!1}},rephrase(i){n(i),e.dispatch(nl(a()))},retry(){e.dispatch(nl(a()))},reset(){e.dispatch(Pr())},async sendFeedback(i){let s=AN({query:a().query.q,feedback:i,answerApiState:zs(e.state).data});e.dispatch(RR.endpoints.post.initiate(s)),e.dispatch(No())}}}function RN(e){return e.addReducers({[go.reducerPath]:go.reducer,query:tt}),!0}function bN(e,t={}){let r=t.answerConfigurationId?bR(e,Fc,t):FR(e,Fc,t);return{...r,get state(){return r.state}}}function vR(e,t,r){let n=!1,o=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return et(e,r,()=>{o()})}function vN(e,t){return vR(e,Fc,t)}var Wn=()=>new E({required:!1,emptyAllowed:!0}),hp=S("advancedSearchQueries/update",e=>F(e,{aq:Wn(),cq:Wn(),lq:Wn(),dq:Wn()})),yp=S("advancedSearchQueries/register",e=>F(e,{aq:Wn(),cq:Wn(),lq:Wn(),dq:Wn()}));var PR=j(nt(),e=>{e.addCase(hp,(t,r)=>{let{aq:n,cq:o,lq:a,dq:i}=r.payload;Fe(n)||(t.aq=n,t.aqWasSet=!0),Fe(o)||(t.cq=o,t.cqWasSet=!0),Fe(a)||(t.lq=a,t.lqWasSet=!0),Fe(i)||(t.dq=i,t.dqWasSet=!0)}).addCase(yp,(t,r)=>{let{aq:n,cq:o,lq:a,dq:i}=r.payload;Fe(n)||(t.defaultFilters.aq=n,t.aqWasSet||(t.aq=n)),Fe(o)||(t.defaultFilters.cq=o,t.cqWasSet||(t.cq=o)),Fe(a)||(t.defaultFilters.lq=a,t.lqWasSet||(t.lq=a)),Fe(i)||(t.defaultFilters.dq=i,t.dqWasSet||(t.dq=i))}).addCase(ce.fulfilled,(t,r)=>r.payload?.advancedSearchQueries??t).addCase(de,(t,r)=>{let{aq:n,cq:o}=r.payload;Fe(n)||(t.aq=n,t.aqWasSet=!0),Fe(o)||(t.cq=o,t.cqWasSet=!0)})});function vCe(e){return e.addReducers({advancedSearchQueries:PR}),{updateAdvancedSearchQueries:hp,registerAdvancedSearchQueries:yp}}function NCe(e){return e.addReducers({categoryFacetSet:rr}),{deselectAllCategoryFacetValues:tr,registerCategoryFacet:er,toggleSelectCategoryFacetValue:Pn,updateCategoryFacetNumberOfValues:xo,updateCategoryFacetSortCriterion:ei,updateFacetAutoSelection:At,updateCategoryFacetBasePath:dl}}function WCe(e){return e.addReducers({facetSet:xr}),{deselectAllFacetValues:he,registerFacet:dr,toggleSelectFacetValue:pr,toggleExcludeFacetValue:mr,updateFacetIsFieldExpanded:wo,updateFacetNumberOfValues:Po,updateFacetSortCriterion:ui,updateFreezeCurrentValues:$r,updateFacetAutoSelection:At}}function nxe(e){return e.addReducers({configuration:K}),{disableAnalytics:ga,enableAnalytics:Sa,setOriginLevel2:Vu,setOriginLevel3:Nu,updateAnalyticsConfiguration:dn,updateBasicConfiguration:zt}}function lxe(e){return e.addReducers({configuration:K,pipeline:xa,searchHub:Fa}),{updateSearchConfiguration:xt}}function gxe(e){return e.addReducers({context:il}),{addContext:yo,removeContext:Co,setContext:ho}}function xxe(e){return e.addReducers({dictionaryFieldContext:sl}),{addContext:Wa,removeContext:Ya,setContext:Ha}}function bxe(e){return e.addReducers({debug:ya}),{disableDebug:ha,enableDebug:pn}}function Oxe(e){return e.addReducers({dateFacetSet:Ar}),{deselectAllDateFacetValues:kl,registerDateFacet:fr,toggleSelectDateFacetValue:gr,toggleExcludeDateFacetValue:Sr,updateDateFacetSortCriterion:Tl,updateDateFacetValues:Gr}}function Qxe(e){return e.addReducers({facetOptions:ke}),{updateFacetOptions:ne,enableFacet:Le,disableFacet:Se}}function $xe(e){return e.addReducers({didYouMean:cl,query:tt}),{applyDidYouMeanCorrection:Rt,disableDidYouMean:ju,enableDidYouMean:qa,enableAutomaticQueryCorrection:$u,disableAutomaticQueryCorrection:Da,setCorrectionMode:Va}}function Wxe(e){return e.addReducers({fields:vn}),{registerFieldsToInclude:Fn,enableFetchAllFields:Ga,disableFetchAllFields:So,fetchFieldsDescription:za}}function Zxe(e){return e.addReducers({history:gd,facetOrder:ld}),{back:Ls,forward:Lu}}function sAe(e){return e.addReducers({numericFacetSet:vt}),{deselectAllNumericFacetValues:Dl,registerNumericFacet:hr,toggleSelectNumericFacetValue:yr,toggleExcludeNumericFacetValue:Cr,updateNumericFacetSortCriterion:ql,updateNumericFacetValues:zr}}function fAe(e){return e.addReducers({folding:Xd}),{registerFolding:Rn,loadCollection:bn}}function yAe(e){return e.addReducers({pagination:Rr}),{nextPage:Ea,previousPage:Ia,registerNumberOfResults:va,registerPage:wa,updateNumberOfResults:Pa,updatePage:Ft}}function FAe(e){return e.addReducers({pipeline:xa}),{setPipeline:Ca}}function wAe(e){return e.addReducers({query:tt}),{updateQuery:Me}}function qAe(e){return e.addReducers({querySet:vi}),{registerQuerySetQuery:bi,updateQuerySetQuery:qo}}function _Ae(e){return e.addReducers({instantResults:wd}),{registerInstantResults:Ra,updateInstantResultsQuery:Wt,clearExpiredResults:ba}}function ZAe(e){return e.addReducers({querySuggest:Pi,querySet:vi}),{clearQuerySuggest:Un,fetchQuerySuggestions:_n,registerQuerySuggest:Ri,selectQuerySuggestion:br}}function oFe(e){return e.addReducers({search:X}),{executeSearch:Ma,fetchMoreResults:Qa,fetchFacetValues:Xu,fetchPage:La,fetchInstantResults:Wy}}function cFe(e){return e.addReducers({searchHub:Fa}),{setSearchHub:Aa}}function pFe(e){return e.addReducers({sortCriteria:Id}),{registerSortCriterion:Ei,updateSortCriterion:Ii}}function FFe(e){return e.addReducers({standaloneSearchBoxSet:$d}),{registerStandaloneSearchBox:qi,fetchRedirectUrl:Gn,updateStandaloneSearchBoxRedirectionUrl:Di,updateAnalyticsToSearchFromLink:Ni,updateAnalyticsToOmniboxFromLink:Mi,resetStandaloneSearchBox:Vi}}function EFe(e){return e.addReducers({staticFilterSet:Vd}),{registerStaticFilter:Ti,toggleSelectStaticFilterValue:Hr,toggleExcludeStaticFilterValue:Wr,deselectAllStaticFilterValues:$n}}function qFe(e){return e.addReducers({tabSet:Oi}),{registerTab:$a,updateActiveTab:qt}}function MFe(e){return e.addReducers({questionAnswering:vr}),{collapseSmartSnippet:zi,expandSmartSnippet:Gi,dislikeSmartSnippet:Wi,likeSmartSnippet:Hi,openFeedbackModal:Yi,closeFeedbackModal:Hn,expandSmartSnippetRelatedQuestion:Ki,collapseSmartSnippetRelatedQuestion:Ji}}function BFe(e){return e.addReducers({}),{deselectAllBreadcrumbs:xe,deselectAllNonBreadcrumbs:Ht}}function GFe(e){return e.addReducers({recentQueries:np}),{registerRecentQueries:Xi,clearRecentQueries:Zi}}function KFe(e){return e.addReducers({recentResults:op}),{registerRecentResults:Ai,clearRecentResults:Fi,pushRecentResult:Pt}}var Cp=S("excerptLength/set",e=>F(e,new B({min:0,required:!0})));var wR=j(_c(),e=>{e.addCase(Cp,(t,r)=>{t.length=r.payload})});function cRe(e){return e.addReducers({excerptLength:wR}),{setExcerptLength:Cp}}function hRe(e){return e.addReducers({resultPreview:Kd}),{fetchResultContent:Vo,updateContentURL:ji,nextPreview:Bi,previousPreview:Ui,preparePreviewPagination:_i}}function ARe(e){return e.addReducers({generatedAnswer:rs}),{resetAnswer:Pr}}var PN=new Z({content:new fe({required:!0}),conditions:new fe({required:!0}),priority:new B({required:!1,default:0,min:0}),fields:new J({required:!1,each:k})});function ER(){let e=[],t=r=>{let n=PN.validate(r);if(!r.conditions.every(a=>a instanceof Function))throw new ms("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return n};return{registerTemplates(...r){r.forEach(n=>{let o={...t(n),fields:n.fields||[]};e.push(o)}),e.sort((n,o)=>o.priority-n.priority)},selectTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.content:null},selectLinkTemplate(r){let n=e.find(o=>o.conditions.every(a=>a(r)));return n?n.linkContent:null}}}function wN(e){if(!EN(e))throw O;let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=ER();return{registerTemplates:(...o)=>{t(...o);let a=[];o.forEach(i=>{i.fields&&a.push(...i.fields)}),e.dispatch(Fn(a))},selectTemplate:r,selectLinkTemplate:n}}function EN(e){return e.addReducers({fields:vn}),!0}function lbe(e){return e.addReducers({}),{logClearBreadcrumbs:Qd,logInterfaceLoad:Ou,logSearchFromLink:qu,logOmniboxFromLink:Du,logInterfaceChange:ln,logDidYouMeanClick:Gu,logCategoryFacetBreadcrumb:Ld,logFacetBreadcrumb:si,logFacetClearAll:Te,logFacetUnexclude:_r,logFacetExclude:mt,logFacetDeselect:Dt,logFacetSelect:Ae,logFacetShowLess:ii,logFacetShowMore:ai,logFacetUpdateSort:or,logDateFacetBreadcrumb:mc,logNumericFacetBreadcrumb:fc,logNavigateBackward:pd,logNavigateForward:dd,logPageNext:Cd,logPageNumber:yi,logPagePrevious:xd,logPagerResize:hi,logSearchboxSubmit:jn,logQuerySuggestionClick:bd,logResultsSort:wi,logDislikeSmartSnippet:fg,logLikeSmartSnippet:mg,logOpenSmartSnippetFeedbackModal:Sg,logCloseSmartSnippetFeedbackModal:hg,logSmartSnippetFeedback:yg,logSmartSnippetDetailedFeedback:Cg,logExpandSmartSnippet:dg,logCollapseSmartSnippet:pg,logExpandSmartSnippetSuggestion:xg,logCollapseSmartSnippetSuggestion:Ag,logNoResultsBack:md,logStaticFilterSelect:Od,logStaticFilterDeselect:ki,logStaticFilterClearAll:qd,logTriggerQuery:zu,logUndoTriggerQuery:Hu,logNotifyTrigger:Wu,logTriggerRedirect:Yu,logTriggerExecute:Ku}}function fbe(e){return e.addReducers({}),{logDocumentOpen:Fd,logOpenSmartSnippetSource:gg,logOpenSmartSnippetSuggestionSource:Ac,logOpenSmartSnippetInlineLink:xc,logOpenSmartSnippetSuggestionInlineLink:ep}}function xbe(e){return e.addReducers({}),{logSearchEvent:xy,logClickEvent:Ay,logCustomEvent:Fy}}var IR=W("analytics/addPageViewEntry",async(e,{getState:t})=>{t().configuration.analytics.enabled&&yt.addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})});function Pbe(e){return e.addReducers({}),{addPageViewEntryInActionsHistory:IR}}function IN(e){let{by:t,order:r}=e;switch(t){case"relevancy":return fs();case"qre":return Jp();case"nosort":return Xp();case"date":if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Yp(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return Kp(t,r)}}function TN(e){return e===void 0||e==="ascending"||e==="descending"}function kN(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map(n=>{let o=n.trim().split(" "),a=o[0].toLowerCase(),i=o[1]&&o[1].toLowerCase();if(o.length>2||a==="")throw r;if(!TN(i))throw new Error(`Wrong criterion sort order "${i}" in expression "${e}". Order should either be "ascending" or "descending"`);return IN({by:a,order:i})})}function Oe(e){return e.negate?"NOT ":""}function Et(e){return{contains:"=",differentThan:"<>",fuzzyMatch:"~=",greaterThan:">",greaterThanOrEqual:">=",isExactly:"==",lowerThan:"<",lowerThanOrEqual:"<=",phoneticMatch:"%=",regexMatch:"/=",wildcardMatch:"*="}[e]}function TR(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Et(e.operator);return`${Oe(e)}@${t}${n}${r}`}}}function kR(e){return{toQuerySyntax(){let t=Oe(e),{field:r,from:n,to:o}=e,a=Et("isExactly");return`${t}@${r}${a}${n}..${o}`}}}function OR(e){return{toQuerySyntax(){let t=Oe(e),{expression:r}=e;return`${t}"${r}"`}}}function qR(e){return{toQuerySyntax(){let t=Oe(e),{field:r}=e;return`${t}@${r}`}}}function DR(e){return{toQuerySyntax(){let{expression:t,negate:r}=e;return r?`NOT (${t})`:t}}}function VR(e){return{toQuerySyntax(){let t=Oe(e),{startTerm:r,otherTerms:n}=e,o=ON(n),a=`${r} ${o}`;return e.negate?`${t}(${a})`:a}}}function ON(e){return e.map(t=>{let{endTerm:r,maxKeywordsBetween:n}=t;return`near:${n} ${r}`}).join(" ")}function NR(e){return{toQuerySyntax(){let{field:t,value:r}=e,n=Oe(e),o=Et(e.operator);return`${n}@${t}${o}${r}`}}}function MR(e){return{toQuerySyntax(){let t=Oe(e),{field:r,from:n,to:o}=e,a=Et("isExactly");return`${t}@${r}${a}${n}..${o}`}}}function LR(e){return{toQuerySyntax(){let{name:t,parameters:r}=e,n=qN(r);return`$${t}(${n})`}}}function qN(e){return Object.entries(e).map(t=>{let[r,n]=t,o=typeof n=="string"?n:n.toQuerySyntax();return`${r}: ${o}`}).join(", ")}function QR(e){return{toQuerySyntax(){let t=Oe(e),{field:r,operator:n,value:o}=e,a=Et(n),i=n==="fuzzyMatch"?` $quoteVar(value: ${o})`:`("${o}")`;return`${t}@${r}${a}${i}`}}}function BR(e){return{toQuerySyntax(){let{field:t}=e,r=Oe(e),n=Et(e.operator),o=e.values.map(i=>`"${i}"`),a=o.length===1?o[0]:`(${o.join(",")})`;return`${r}@${t}${n}${a}`}}}function Uve(){let e=[],t="and";return{addExpression(r){return e.push(r),this},addKeyword(r){return e.push(DR(r)),this},addNear(r){return e.push(VR(r)),this},addExactMatch(r){return e.push(OR(r)),this},addFieldExists(r){return e.push(qR(r)),this},addStringField(r){return e.push(BR(r)),this},addStringFacetField(r){return e.push(QR(r)),this},addNumericField(r){return e.push(NR(r)),this},addNumericRangeField(r){return e.push(MR(r)),this},addDateField(r){return e.push(TR(r)),this},addDateRangeField(r){return e.push(kR(r)),this},addQueryExtension(r){return e.push(LR(r)),this},joinUsing(r){return t=r,this},toQuerySyntax(){let r=DN(t),n=e.map(o=>o.toQuerySyntax()).join(`) ${r} (`);return e.length<=1?n:`(${n})`}}}function DN(e){return e==="and"?"AND":"OR"}var Wve={buildMockRaw:ss,buildMockSearchEngine:Lg,buildMockResult:Qg,createMockState:vS};Ig();export{Bs as API_DATE_FORMAT,AS as DefaultFieldsToInclude,av as EcommerceDefaultFieldsToInclude,PS as HighlightUtils,Wp as MinimumFieldsToInclude,SI as ResultTemplatesHelpers,Wo as SortBy,Hc as SortOrder,Wve as TestUtils,ao as VERSION,jp as analyticsUrl,$t as baseFacetResponseSelector,nN as buildAutomaticFacetGenerator,lD as buildBreadcrumbManager,Dk as buildCategoryFacet,eN as buildCategoryFieldSuggestions,jT as buildContext,U as buildController,Or as buildCriterionExpression,eO as buildDateFacet,mO as buildDateFilter,Eo as buildDateRange,Yp as buildDateSortCriterion,$T as buildDictionaryFieldContext,HT as buildDidYouMean,AV as buildExecuteTrigger,Wk as buildFacet,KV as buildFacetConditionsManager,sD as buildFacetManager,Kp as buildFieldSortCriterion,XV as buildFieldSuggestions,SV as buildFoldedResultList,bN as buildGeneratedAnswer,rq as buildHistoryManager,$q as buildInstantResults,vN as buildInteractiveCitation,qq as buildInteractiveInstantResult,YV as buildInteractiveRecentResult,Oq as buildInteractiveResult,Xp as buildNoSortCriterion,RV as buildNotifyTrigger,aO as buildNumericFacet,uO as buildNumericFilter,ic as buildNumericRange,Aq as buildPager,Rq as buildQueryError,Uve as buildQueryExpression,Jp as buildQueryRankingExpressionSortCriterion,Pq as buildQuerySummary,CV as buildQueryTrigger,iV as buildQuickview,UV as buildRecentQueriesList,HV as buildRecentResultsList,hV as buildRedirectionTrigger,DT as buildRelevanceInspector,fs as buildRelevanceSortCriterion,Iq as buildResultList,wN as buildResultTemplatesManager,Nq as buildResultsPerPage,Jf as buildSearchBox,PT as buildSearchEngine,ng as buildSearchParameterManager,Hd as buildSearchParameterSerializer,oV as buildSearchStatus,EV as buildSmartSnippet,kV as buildSmartSnippetQuestionsList,Yq as buildSort,fD as buildStandaloneSearchBox,Jq as buildStaticFilter,FF as buildStaticFilterValue,nD as buildTab,aD as buildTabManager,tV as buildUrlManager,S as createAction,W as createAsyncThunk,j as createReducer,Bn as currentPageSelector,zf as currentPagesSelector,LE as deserializeRelativeDate,Um as facetRequestSelector,cE as facetResponseSelectedValuesSelector,Ds as facetResponseSelector,ds as getOrganizationEndpoints,ix as getSampleSearchEngineConfiguration,vCe as loadAdvancedSearchQueryActions,BFe as loadBreadcrumbActions,NCe as loadCategoryFacetSetActions,fbe as loadClickAnalyticsActions,nxe as loadConfigurationActions,gxe as loadContextActions,Oxe as loadDateFacetSetActions,bxe as loadDebugActions,xxe as loadDictionaryFieldContextActions,$xe as loadDidYouMeanActions,cRe as loadExcerptLengthActions,Qxe as loadFacetOptionsActions,WCe as loadFacetSetActions,Wxe as loadFieldActions,fAe as loadFoldingActions,ARe as loadGeneratedAnswerActions,xbe as loadGenericAnalyticsActions,Zxe as loadHistoryActions,Pbe as loadIPXActionsHistoryActions,_Ae as loadInstantResultsActions,sAe as loadNumericFacetSetActions,yAe as loadPaginationActions,FAe as loadPipelineActions,wAe as loadQueryActions,qAe as loadQuerySetActions,ZAe as loadQuerySuggestActions,MFe as loadQuestionAnsweringActions,GFe as loadRecentQueriesActions,KFe as loadRecentResultsActions,hRe as loadResultPreviewActions,oFe as loadSearchActions,lbe as loadSearchAnalyticsActions,lxe as loadSearchConfigurationActions,cFe as loadSearchHubActions,pFe as loadSortCriteriaActions,FFe as loadStandaloneSearchBoxSetActions,EFe as loadStaticFilterSetActions,qFe as loadTabSetActions,yd as maxPageSelector,kN as parseCriterionExpression,Lc as platformUrl,mo as validateRelativeDate};
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//# sourceMappingURL=headless.esm.js.map</script>
</body>
</html>
