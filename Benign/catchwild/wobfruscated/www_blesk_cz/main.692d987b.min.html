<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>main.692d987b.min.html</title>
</head>
<body>
<script>/*! For license information please see main.min.js.LICENSE.txt */
(()=>{var e={312:(e,t,n)=>{var i;!function(){"use strict";var t="input is invalid type",r="object"==typeof window,o=r?window:{};o.JS_SHA256_NO_WINDOW&&(r=!1);var s=!r&&"object"==typeof self,a=!o.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;a?o=n.g:s&&(o=self);var d=!o.JS_SHA256_NO_COMMON_JS&&e.exports,l=n.amdO,c=!o.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),g=[-2147483648,8388608,32768,128],h=[24,16,8,0],f=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],p=["hex","array","digest","arrayBuffer"],m=[];!o.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!c||!o.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var _=function(e,t){return function(n){return new y(t,!0).update(n)[e]()}},b=function(e){var t=_("hex",e);a&&(t=v(t,e)),t.create=function(){return new y(e)},t.update=function(e){return t.create().update(e)};for(var n=0;n<p.length;++n){var i=p[n];t[i]=_(i,e)}return t},v=function(e,i){var r,s=n(394),a=n(903).Buffer,d=i?"sha224":"sha256";return r=a.from&&!o.JS_SHA256_NO_BUFFER_FROM?a.from:function(e){return new a(e)},function(n){if("string"==typeof n)return s.createHash(d).update(n,"utf8").digest("hex");if(null==n)throw new Error(t);return n.constructor===ArrayBuffer&&(n=new Uint8Array(n)),Array.isArray(n)||ArrayBuffer.isView(n)||n.constructor===a?s.createHash(d).update(r(n)).digest("hex"):e(n)}},w=function(e,t){return function(n,i){return new E(n,t,!0).update(i)[e]()}},S=function(e){var t=w("hex",e);t.create=function(t){return new E(t,e)},t.update=function(e,n){return t.create(e).update(n)};for(var n=0;n<p.length;++n){var i=p[n];t[i]=w(i,e)}return t};function y(e,t){t?(m[0]=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0,this.blocks=m):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function E(e,n,i){var r,o=typeof e;if("string"===o){var s,a=[],d=e.length,l=0;for(r=0;r<d;++r)(s=e.charCodeAt(r))<128?a[l++]=s:s<2048?(a[l++]=192|s>>>6,a[l++]=128|63&s):s<55296||s>=57344?(a[l++]=224|s>>>12,a[l++]=128|s>>>6&63,a[l++]=128|63&s):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++r)),a[l++]=240|s>>>18,a[l++]=128|s>>>12&63,a[l++]=128|s>>>6&63,a[l++]=128|63&s);e=a}else{if("object"!==o)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw new Error(t)}e.length>64&&(e=new y(n,!0).update(e).array());var u=[],g=[];for(r=0;r<64;++r){var h=e[r]||0;u[r]=92^h,g[r]=54^h}y.call(this,n,i),this.update(g),this.oKeyPad=u,this.inner=!0,this.sharedMemory=i}y.prototype.update=function(e){if(!this.finalized){var n,i=typeof e;if("string"!==i){if("object"!==i)throw new Error(t);if(null===e)throw new Error(t);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw new Error(t);n=!0}for(var r,o,s=0,a=e.length,d=this.blocks;s<a;){if(this.hashed&&(this.hashed=!1,d[0]=this.block,this.block=d[16]=d[1]=d[2]=d[3]=d[4]=d[5]=d[6]=d[7]=d[8]=d[9]=d[10]=d[11]=d[12]=d[13]=d[14]=d[15]=0),n)for(o=this.start;s<a&&o<64;++s)d[o>>>2]|=e[s]<<h[3&o++];else for(o=this.start;s<a&&o<64;++s)(r=e.charCodeAt(s))<128?d[o>>>2]|=r<<h[3&o++]:r<2048?(d[o>>>2]|=(192|r>>>6)<<h[3&o++],d[o>>>2]|=(128|63&r)<<h[3&o++]):r<55296||r>=57344?(d[o>>>2]|=(224|r>>>12)<<h[3&o++],d[o>>>2]|=(128|r>>>6&63)<<h[3&o++],d[o>>>2]|=(128|63&r)<<h[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++s)),d[o>>>2]|=(240|r>>>18)<<h[3&o++],d[o>>>2]|=(128|r>>>12&63)<<h[3&o++],d[o>>>2]|=(128|r>>>6&63)<<h[3&o++],d[o>>>2]|=(128|63&r)<<h[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=d[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>>2]|=g[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},y.prototype.hash=function(){var e,t,n,i,r,o,s,a,d,l=this.h0,c=this.h1,u=this.h2,g=this.h3,h=this.h4,p=this.h5,m=this.h6,_=this.h7,b=this.blocks;for(e=16;e<64;++e)t=((r=b[e-15])>>>7|r<<25)^(r>>>18|r<<14)^r>>>3,n=((r=b[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,b[e]=b[e-16]+t+b[e-7]+n|0;for(d=c&u,e=0;e<64;e+=4)this.first?(this.is224?(o=300032,_=(r=b[0]-1413257819)-150054599|0,g=r+24177077|0):(o=704751109,_=(r=b[0]-210244248)-1521486534|0,g=r+143694565|0),this.first=!1):(t=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),i=(o=l&c)^l&u^d,_=g+(r=_+(n=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&m)+f[e]+b[e])|0,g=r+(t+i)|0),t=(g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10),i=(s=g&l)^g&c^o,m=u+(r=m+(n=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&h^~_&p)+f[e+1]+b[e+1])|0,t=((u=r+(t+i)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),i=(a=u&g)^u&l^s,p=c+(r=p+(n=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&_^~m&h)+f[e+2]+b[e+2])|0,t=((c=r+(t+i)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),i=(d=c&u)^c&g^a,h=l+(r=h+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&_)+f[e+3]+b[e+3])|0,l=r+(t+i)|0,this.chromeBugWorkAround=!0;this.h0=this.h0+l|0,this.h1=this.h1+c|0,this.h2=this.h2+u|0,this.h3=this.h3+g|0,this.h4=this.h4+h|0,this.h5=this.h5+p|0,this.h6=this.h6+m|0,this.h7=this.h7+_|0},y.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,s=this.h6,a=this.h7,d=u[e>>>28&15]+u[e>>>24&15]+u[e>>>20&15]+u[e>>>16&15]+u[e>>>12&15]+u[e>>>8&15]+u[e>>>4&15]+u[15&e]+u[t>>>28&15]+u[t>>>24&15]+u[t>>>20&15]+u[t>>>16&15]+u[t>>>12&15]+u[t>>>8&15]+u[t>>>4&15]+u[15&t]+u[n>>>28&15]+u[n>>>24&15]+u[n>>>20&15]+u[n>>>16&15]+u[n>>>12&15]+u[n>>>8&15]+u[n>>>4&15]+u[15&n]+u[i>>>28&15]+u[i>>>24&15]+u[i>>>20&15]+u[i>>>16&15]+u[i>>>12&15]+u[i>>>8&15]+u[i>>>4&15]+u[15&i]+u[r>>>28&15]+u[r>>>24&15]+u[r>>>20&15]+u[r>>>16&15]+u[r>>>12&15]+u[r>>>8&15]+u[r>>>4&15]+u[15&r]+u[o>>>28&15]+u[o>>>24&15]+u[o>>>20&15]+u[o>>>16&15]+u[o>>>12&15]+u[o>>>8&15]+u[o>>>4&15]+u[15&o]+u[s>>>28&15]+u[s>>>24&15]+u[s>>>20&15]+u[s>>>16&15]+u[s>>>12&15]+u[s>>>8&15]+u[s>>>4&15]+u[15&s];return this.is224||(d+=u[a>>>28&15]+u[a>>>24&15]+u[a>>>20&15]+u[a>>>16&15]+u[a>>>12&15]+u[a>>>8&15]+u[a>>>4&15]+u[15&a]),d},y.prototype.toString=y.prototype.hex,y.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3,r=this.h4,o=this.h5,s=this.h6,a=this.h7,d=[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,n>>>24&255,n>>>16&255,n>>>8&255,255&n,i>>>24&255,i>>>16&255,i>>>8&255,255&i,r>>>24&255,r>>>16&255,r>>>8&255,255&r,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s];return this.is224||d.push(a>>>24&255,a>>>16&255,a>>>8&255,255&a),d},y.prototype.array=y.prototype.digest,y.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},E.prototype=new y,E.prototype.finalize=function(){if(y.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();y.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),y.prototype.finalize.call(this)}};var C=b();C.sha256=C,C.sha224=b(!0),C.sha256.hmac=S(),C.sha224.hmac=S(!0),d?e.exports=C:(o.sha256=C.sha256,o.sha224=C.sha224,l&&(void 0===(i=function(){return C}.call(C,n,C,e))||(e.exports=i)))}()},903:()=>{},394:()=>{}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.amdO={},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";const e=(e,t,n)=>Math.min(Math.max(e,t),n),t=e=>{const t=e.toString(16);return 1===t.length?`0${t}`:t},i=(n,i,r)=>{const o=n.replace("#",""),{r:s,g:a,b:d}=(e=>{const t=parseInt(e,16);return{r:Math.floor(t/65536),g:Math.floor(t%65536/256),b:t%256}})(o),l=Math.round(2.55*i)*(r?1:-1);return((e,n,i)=>`#${t(e)}${t(n)}${t(i)}`)(e(s+l,0,255),e(a+l,0,255),e(d+l,0,255))},r=(e,t)=>i(e,t,!1),o=(e,t)=>i(e,t,!0);class s{static instance=new s;supported;static getInstance=()=>s.instance;constructor(){this.supported=s.isSupported()}static isSupported(){try{const e=localStorage.getItem("");return localStorage.removeItem(""),localStorage.setItem("",e),null===e?localStorage.removeItem(""):localStorage.setItem("",e),!0}catch(e){return!1}}static hasItem(e){return null!==localStorage.getItem(e)}getItem(e){return this.supported&&s.hasItem(e)?localStorage.getItem(e):null}setItem(e,t){this.supported&&localStorage.setItem(e,t)}clearItem(e){this.supported&&s.hasItem(e)&&localStorage.removeItem(e)}}const a=s.getInstance();var d,l;(l=d||(d={})).DEBUG="cnc_ads_debug",l.DEBUG_STYLES="cnc_ads_debug_styles",l.DEBUG_TARGET="cnc_ads_debug_target",l.DEBUG_GAM="gamdebug",l.BISKO_ID="biskoId",l.BISKO_SEGMENTS="biskoSegments",l.DEV_REMOTE="cnc-ad-remote-env",l.PPID="cnc_alien_invasion_code",l.LOG_TO_CONSOLE="cnc_ad_script_log_to_console",l.LOG_LEVEL="cnc_ad_script_log_level",l.DEV_GAM="cnc_cmi_gam",l.DEV_AD_UNIT="cnc_dev_ad",l.CNC_NEW_SCRIPT="cnc_new_script",l.OPEN_DEBUG="cnc_ad_script_debug_open";const c=e=>{const t=e.toLowerCase().replace(/ /g,"_");return t.charAt(0).toUpperCase()+t.slice(1)};class u{static instance=new u;moduleName="Module_settings";moduleNames=[this.moduleName];loggingSettings;static getInstance=()=>u.instance;constructor(){this.loggingSettings={[this.moduleName]:{textColor:"#992299",backgroundColor:"#000"}}}addModuleName(e,t){const n=c(e);this.moduleNames.includes(n)?m.warn("Module_settings",`Module name ${n} already exists`):(this.moduleNames.push(n),this.loggingSettings[n]=t,m.rebuildModuleColorMap())}getModuleNames(){return this.moduleNames}getLoggingSettings(e){return this.loggingSettings[e]}}const g=u.getInstance();var h;!function(e){e.Debug="debug",e.Info="info",e.Error="error",e.Warning="warning",e.Important="important"}(h||(h={}));const f={[h.Debug]:{emoji:"🔧",color:"#4caf50",bgColor:"#000"},[h.Info]:{emoji:"ℹ️",color:"#99ccff",bgColor:"#000"},[h.Error]:{emoji:"🛑",color:"#f44336",bgColor:"#000"},[h.Warning]:{emoji:"⚠️",color:"#ff9800",bgColor:"#000"},[h.Important]:{emoji:"❗",color:"#aaffaa",bgColor:"#000"}};class p{static instance=new p;startTime;settings;logHistory=[];formatLogTime(){return`[${Date.now()-this.startTime}ms]`}logMessage(e,t,n,...i){if(this.shouldLog(t)){this.logHistory.push({timestamp:Date.now(),moduleName:e,level:t,description:n,objects:i,elapsed:Date.now()-this.startTime});const r=f[t],o=this.formatLogTime(),{emoji:s}=r,a=this.settings.moduleColorMap[e]||{textColor:"black",backgroundColor:"white"};console.log(`%c${o} %c${s} %c [${e}]: %c ${n}`,`color: ${r.color}; background-color: ${r.bgColor}`,`color: ${r.color}; background-color: ${r.bgColor}`,`color: ${a.textColor}; background-color: ${a.backgroundColor}`,`color: ${r.color};`,...i)}}shouldLog(e){const t=[h.Debug,h.Info,h.Important,h.Warning,h.Error];return t.indexOf(e)>=t.indexOf(this.settings.currentLogLevel)}static getLoggerSettings(){return{currentLogLevel:p.getLogLevel(),moduleColorMap:p.initializeModuleColorMap()}}static getLogLevel(){const e=a.getItem(d.LOG_TO_CONSOLE);if(!e||"false"===e)return h.Error;const t=a.getItem(d.LOG_LEVEL);return t===h.Info?h.Info:t===h.Warning?h.Warning:t===h.Important?h.Important:t===h.Error?h.Error:h.Debug}static initializeModuleColorMap(){const e={},t={textColor:"black",backgroundColor:"white"};return g.getModuleNames().forEach((n=>{const i=g.getLoggingSettings(n);e[n]=i?{textColor:i.textColor,backgroundColor:i.backgroundColor}:t})),e}static getStartTime(){return window?.__cncAdsMonitoringStartTime??Date.now()}static getInstance=()=>p.instance;constructor(){this.startTime=p.getStartTime(),this.settings=p.getLoggerSettings()}setLogLevel(e){this.settings.currentLogLevel=e}log(e,t,...n){this.info(e,t,...n)}debug(e,t,...n){this.settings.currentLogLevel===h.Debug&&this.logMessage(e,h.Debug,t,...n)}info(e,t,...n){this.settings.currentLogLevel!==h.Info&&this.settings.currentLogLevel!==h.Debug||this.logMessage(e,h.Info,t,...n)}error(e,t,...n){this.logMessage(e,h.Error,t,...n)}warn(e,t,...n){this.shouldLog(h.Warning)&&this.logMessage(e,h.Warning,t,...n)}important(e,t,...n){this.shouldLog(h.Important)&&this.logMessage(e,h.Important,t,...n)}rebuildModuleColorMap(){this.settings.moduleColorMap=p.initializeModuleColorMap()}downloadLogs=()=>{try{const e=()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular Reference]";e.add(n)}return n}},t=JSON.stringify(this.logHistory,e(),2),n=new Blob([t],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=`logs-${(new Date).toISOString()}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(i)}catch(e){console.error("Error downloading logs:",e)}};clearLogs=()=>{this.logHistory=[]}}const m=p.getInstance();class _{moduleName;logger;constructor(e){this.moduleName=c(e),this.logger=p.getInstance()}log(e,...t){this.logger.log(this.moduleName,e,...t)}debug(e,...t){this.logger.debug(this.moduleName,e,...t)}info(e,...t){this.logger.info(this.moduleName,e,...t)}error(e,...t){this.logger.error(this.moduleName,e,...t)}warn(e,...t){this.logger.warn(this.moduleName,e,...t)}important(e,...t){this.logger.important(this.moduleName,e,...t)}}const b=e=>{try{return e()}catch(e){return null}},v="Ad Height Handler",w=new _(v);g.addModuleName(v,{textColor:"#000",backgroundColor:o("#e516e9",40)});class S{static ADVERTISER_ID_TO_REMOVE_HEIGHT=[4971778780];static removeHeightStyle=e=>{if(w.debug("Removing height style for ad slot"),!(e instanceof HTMLElement))return void w.error("Slot element is not an instance of HTMLElement");const t=b((()=>e.querySelector("iframe")));t?S.waitForIframeContent(t,(()=>{w.debug("Content inside the iframe is now rendered!"),b((()=>e.style.height))?e.style.removeProperty("height"):w.error("Slot is without height style")})):w.error("Iframe is not an instance of HTMLIFrameElement")};static waitForIframeContent=(e,t)=>{if("complete"===e?.contentDocument?.readyState){const n=new Event("load");t.call(e,n)}else e.addEventListener("load",t,{once:!0})};static removeInLineHeightStyle=(e,{advertiserId:t},n)=>{t?e.wrapper?S.ADVERTISER_ID_TO_REMOVE_HEIGHT.includes(t)&&(w.debug(`Removing inline height style for ad slot: { AdSlot ID: ${e.idDOM}, Advertiser ID: ${t}, Advertiser NAME: ${n} }`),S.removeHeightStyle(e.wrapper)):w.warn("Ad slot wrapper is not defined"):w.error("Advertiser ID is not defined")}}var y;!function(e){e.PERFORMAX="performax",e.R2B2="r2b2",e.TEADS="teads",e.OTHER="other",e.TEST_CNC="test_cnc",e.NONE="none"}(y||(y={}));const E={4834158929:y.PERFORMAX,4975138286:y.R2B2,4831032460:y.TEST_CNC,4971778780:y.TEADS},C="creative size from metadata",A=new _(C);g.addModuleName(C,{textColor:"#000",backgroundColor:"#e516e9"});class I{static ALERT_COLOR="#ff0000";static PPID_ALLOWED=!0;static ENABLE_INTOWOW=!0}const T="BRANDING",O=new _(T);g.addModuleName(T,{textColor:"#fff",backgroundColor:r("##2ccBc2",20)});const D="Custom format exceptions",k=new _(D);g.addModuleName(D,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)});class N{controller;static hasExceptions=e=>void 0!==e.exceptions;getExceptionValues=e=>{const{renderEvent:t}=e;if(!t)return k.warn("No render event found on adSlot",e.configuration.slotName),null;const n=this.controller.configuration.pageDefinition.keywords||[];return{advertiserId:`${t.advertiserId??""}`,lineItemId:`${t.lineItemId??""}`,keywords:n}};checkExceptionConfig=(e,t,n)=>{const{configuration:i}=e,r=i.enabledFormats[t];if(!r||!N.hasExceptions(r))return k.warn("No valid format config or exceptions found for adSlot"),!1;const{exceptions:o}=r;if(!o)return k.warn("No exceptions found for custom format"),!1;const s=o[n];if(!s)return k.error("No exception config found for custom format"),!1;const a=this.getExceptionValues(e);return a?(k.debug(`Checking exceptions for format: ${t} under ${n} state`,a),s.advertiser.includes(a.advertiserId)?(k.debug(`${t} ${n} by advertiser: ${a.advertiserId}`),!0):s.lineItems.includes(a.lineItemId)?(k.debug(`${t} ${n} by line item: ${a.lineItemId}`),!0):!!a.keywords.some((e=>{const i=s.keywords.includes(e);return i&&k.debug(`${t} ${n} by keyword: ${e}`),i}))):(k.warn("No exception values found for adSlot",e.configuration.slotName),!1)};static checkForSizeMismatch=(e,t)=>{const{creativeSize:n,configuration:i}=e,r=i.enabledFormats[t].creativeSizes,o=r?.some((e=>((e,t)=>{if(!t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0})(e,n)));return o||k.debug(`${t} did not find size match for size: ${n}`),!o};constructor(e){k.debug("Exceptions instance created"),this.controller=e}init=()=>{k.info("Initializing Exceptions",this.controller.configuration.pageConfiguration)};isBlockedByExceptions=(e,t,n)=>this.checkExceptionConfig(e,t,n);isBlockedByExceptionsThroughTemplate=(e,t)=>{const{enabledFormats:n}=e;for(const[e,i]of Object.entries(n))if(i.enabled){k.debug(`Checking exceptions for format: ${e} under ${t} state`);const{exceptions:n}=i;if(!n)return k.warn("No exceptions found for custom format"),!1;const r=i.exceptions[t],o={advertiserId:"",lineItemId:"",keywords:this.controller.configuration.pageDefinition.keywords||[]};return r&&o?!!o.keywords.some((n=>{const i=r.keywords.includes(n);return i&&k.debug(`${e} ${t} by keyword: ${n}`),i})):(k.error("No exceptions config or exception values found for adSlot"),!1)}return!1}}class R{static isHTMLElement(e){return e instanceof HTMLElement}static isAdSlotSize(e){return"fluid"===e||!(!Array.isArray(e)||2!==e.length||!e.every((e=>"number"==typeof e)))}static isNotNamedSize=e=>"string"!=typeof e&&2===e.length;static isRenderedSizeNumberArray=e=>Array.isArray(e)&&e.every((e=>"number"==typeof e));static isLocalStorageKey=e=>Object.values(d).includes(e);static isAreaName(e){return"string"==typeof e&&["homepage","ostatni","abecedazahrady","avmania","azz","bleskpromuze","blesksport","bundesliga","bydleni","celebrity","cestovani","connect","digiarena","doupe","elh","embed","f1sport","fitweb","formen","fotbal","hokej","hokejka","isportlife","laliga","lideazeme","magazin","mimiaukce","mimishop","motogpsport","nejrychlejsi","olympijskehry","premierleague","regiony","reprezentace","sleviste","supermamy","tenis","zboziblesk","zbozimobilmania","zpravy"].includes(e)}}const M="INTERSCROLLER",L=new _(M);g.addModuleName(M,{textColor:"#fff",backgroundColor:r("##2ccBc2",20)});const P=e=>`cnc-ads--${e.isRepeater?e.idDOM.replace("cnc_","").replace(/__(\d+)$/,""):e.idDOM.replace("cnc_","")}--interscroller`,x="Out of page module",z=new _(x);g.addModuleName(x,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)});class F{static instance=new F;static keywordsToDisable=["oop_off"];wrapperId="cnc_out_of_page_wrapper";adPlacementId="cnc_out_of_page";_wrapper=null;_adPlacement=null;getOrCreateWrapper=()=>b((()=>(this._wrapper||(z.debug("Creating OutOfPage wrapper"),this._wrapper=F.findOrCreateElement(this.wrapperId)),this._wrapper)));getOrCreateAdPlacement=()=>b((()=>(this._adPlacement||(this._adPlacement=F.findOrCreateElement(this.adPlacementId)),this._adPlacement)));addElementToWrapper=e=>{this._wrapper?.appendChild(e)};addWrapperToBody=()=>{document.body.contains(this._wrapper)||document.body.appendChild(this._wrapper)};static findOrCreateElement=(e,t)=>{let n=document.getElementById(e);return n||(n=document.createElement("div"),n.id=e,t&&n.classList.add(t)),n};static getInstance=()=>F.instance;static getOutOfPageFormat=()=>({enabled:!0,creativeSizes:[],exceptions:{ignore:{lineItems:[],keywords:F.keywordsToDisable,advertiser:[]},off:{lineItems:[],keywords:[],advertiser:[]}}});constructor(){z.debug("OutOfPage instance created")}init=()=>{z.info("Initializing OutOfPage"),this._wrapper=this.getOrCreateWrapper(),this._adPlacement=this.getOrCreateAdPlacement(),this.addElementToWrapper(this._adPlacement),this.addWrapperToBody()};onRenderEnded=e=>{z.info("Handling OutOfPage onRenderEnded",e),z.debug("OutOfPage wrapper",this._wrapper)}}const $="utils_resize",B=new _($);g.addModuleName($,{textColor:r("#bada33",20),backgroundColor:"#000"});const U=(e,t=null)=>{const n=t??("BackCompat"===document.compatMode?{width:document.body.clientWidth,height:document.body.clientHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight});B.debug(`scale sizes { width: ${n.width}px, height: ${n.height}px }`);const i=n.width/n.height,r=e.width/e.height;if(n.height<e.height||n.width<e.width){const t=i>r;return B.debug("scale by "+(t?"height":"width")),t?n.height/e.height:n.width/e.width}return 1},G=(e,t)=>{const n=e.getElementsByTagName("div")[0];if(n?.id.match("google_ads_iframe_")){B.debug("Google element ID MATCH"),n.style.width="100%",n.style.height="100%";const e=n.getElementsByTagName("iframe")[0];e.id.match("google_ads_iframe_")?(B.debug("iFrame ID MATCH"),e.style.position="absolute",e.style.transformOrigin="left top",e.style.left="50%",e.style.top="50%",e.style.transform=`scale(${t}) translate(-50%, -50%)`):B.warn("iframe ID NOT MATCH")}else B.warn("google element ID NOT MATCH")},H="Slide_up_cnc",V=new _(H);g.addModuleName(H,{textColor:"#fff",backgroundColor:r("#2ccBc2",40)});const j="cnc_slide_up_wrapper",W="out",q="cnc_slide_up_close_button",K="cnc_slide_up_close_button_wrapper",X="slide_up_performax",Y=new _(X);g.addModuleName(X,{textColor:"#fff",backgroundColor:r("#2ccBc2",40)});const J="pfx_slideup_wrapper",Q=()=>{Y.info("Destroying performax slide up wrapper content");const e=document.getElementById(J);e&&(Y.debug("Found slide up wrapper, destroying content"),e.innerHTML="")},Z="slide_up_r2b2",ee=new _(Z);g.addModuleName(Z,{textColor:"#fff",backgroundColor:r("#2ccBc2",40)});const te="r2b2_slide_up_wrapper",ne="SLIDE_UP",ie=new _(ne);g.addModuleName(ne,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)});class re{static instance=new re;isOpen=!1;adSlot=null;get isOpened(){return this.isOpen}static getInstance=()=>re.instance;static initialize=()=>{ie.info("Initializing slide up"),(()=>{V.info("Setting up DOM wrappers for CNC slide up");let e=document.getElementById(j);e||(e=document.createElement("div"),e.id=j,e.classList.add("cnc-ad-overlay--slide_up__wrapper"),e.classList.add(W),document.body.appendChild(e));let t=document.getElementById(K);t||(t=document.createElement("div"),t.id=K,t.classList.add("cnc-ad-overlay--slide_up__close-wrapper"),e.appendChild(t));const n="cnc_slide_up";let i=document.getElementById(n);if(i||(i=document.createElement("div"),i.id=n,i.classList.add("cnc-rendered"),e.appendChild(i)),!document.getElementById(q)){const n=()=>{const e=document.createElement("button");e.type="button",e.id=q,e.classList.add("cnc-ad-overlay--slide_up__close-button");const t=document.createElement("span");return t.classList.add("cnc-ad-overlay--slide_up__close-button__text"),t.innerHTML="Zavřít reklamu",e.appendChild(t),e},i=n();i.addEventListener("click",(()=>{V.info("Close button clicked"),V.info("Closing CNC slide up [ close ]"),e?.classList.add(W)})),t.appendChild(i)}})(),(()=>{if(Y.info("Creating performax slide up wrapper"),!document.getElementById(J)){Y.debug("Didn't find slide up wrapper, creating new one");const e=document.createElement("div");e.id=J,document.body.appendChild(e)}})(),(()=>{if(ee.info("Checking or setting up R2B2 slide up wrapper [ checkOrSetupR2B2SlideUpWrapper ]"),null===document.getElementById(te)){ee.debug("Didn't find slide up wrapper, creating new one");const e=document.createElement("div");e.id=te,document.body.appendChild(e)}})()};constructor(){ie.info("Create SlideUp instance")}setAdSlot=e=>{this.adSlot=e};handleOnRenderEnded=()=>{if(this.adSlot&&this.adSlot.renderEvent)switch(this.adSlot.advertiser){case y.R2B2:ie.info("R2B2 slide up should be handled by R2B2 script");break;case y.PERFORMAX:ie.info("Performax slide up should be handled by Performax script");break;default:(e=>{const t=document.getElementById(j);if(!t)return void V.error(`${j} not found in DOM`);const n=document.getElementById(e.idDOM);if(!R.isRenderedSizeNumberArray(e.creativeSize))return void V.error("Creative size is not a number array");if(!n)return void V.error("Position not found in DOM");const i={width:e.creativeSize[0],height:e.creativeSize[1]},r=U(i),o=i.height*r;V.debug(`iFrame resize >> scale ratio [${r}] >> scaled height [${o}px]`),r<1&&G(n,r),t.style.height=`${o}px`})(this.adSlot),this.open()}};close=()=>{ie.info("Closing slide up"),this.adSlot?(this.adSlot.advertiser===y.R2B2?(ie.info("destroy R2B2 slide up"),(()=>{ee.info("Destroying R2B2 slide up wrapper content [ destroyR2B2SlideUpWrapperContent ]");const e=document.getElementById(te);null!==e&&(ee.debug("Found slide up wrapper, destroying content"),e.innerHTML="")})()):this.adSlot.advertiser===y.PERFORMAX?(ie.info("destroy Performax slide up"),Q()):(ie.info("close CNC slide up"),(()=>{V.info("Closing CNC slide up [ closeCNCSlideUp ]");const e=document.getElementById(j);e?e.classList.add(W):V.error("CNC slide up not found in DOM")})()),this.isOpen=!1):ie.error("No ad slot found")};open=()=>{ie.info("Opening slide up"),this.adSlot?this.adSlot.advertiser!==y.TEST_CNC&&this.adSlot.advertiser!==y.OTHER&&this.adSlot.advertiser!==y.TEADS||((()=>{V.info("Opening CNC slide up");const e=document.getElementById(j);e?e.classList.remove(W):V.error("CNC slide up not found in DOM")})(),this.isOpen=!0):ie.error("No ad slot found")};pauseRefresh=()=>{this.adSlot&&ie.debug("Pause refresh for slide up")}}const oe="SMARTICLE",se=new _(oe);var ae;g.addModuleName(oe,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)}),function(e){e.STANDARD="standard",e.ADVERTORIAL="advertorial"}(ae||(ae={}));const de="cnc-ads--native_wrapper",le="cnc-ads--native",ce=e=>{const t=document.getElementById(e.idDOM);if(!t)return void se.error(`Did not find ad slot element for id: ${e.idDOM}`);const n=t.closest(`.${de}`);if(!n)return void se.error(`Did not find wrapper (${de}) for adSlot id: ${e.idDOM}`);const i=n.querySelector(`.${le}`);if(i)return{nativeWrapper:n,nativeElement:i,slotElement:t};se.error(`Did not find native element (${le}) for adSlot id: ${e.idDOM}`)},ue=e=>{se.debug(`Adding tracking pixel: ${e}`),(new Image).src=e},ge=e=>{se.debug("Running native handler");const{CLICK_URL_UNESC:t,DEST_URL_UNESC:n,articleHash:i,SITE:r,iFrameRender:o,wrapper:s}=e;se.debug("iFrameRender, wrapper",o,s);const a=Fr.getInstance().adSlots.find((e=>"cnc_native_1"===e.idDOM));if(!a)return void se.error("Native ad slot not found");const d=ce(a);if(!d)return;const l=((e,t,n)=>{se.debug("Creating native template");const i={LINK:n,TITLE:t.title,LABEL:t.type!==ae.STANDARD?"reklama":"advertorial",IMAGE:t.image,PEREX:t.perex};return i.PEREX||(i.PEREX="&nbsp;"),e.html.replace(/%%(.*?)%%/g,((e,t)=>i[t]||e))})(a.configuration.enabledFormats.smarticle,e,i?`${t}https://${r}/obchodni-sdeleni#${i}`:`${t}${n}`);d.nativeElement.innerHTML=l,(e=>{se.debug("Adding trackers");const{third_party_imp_url:t,third_party_imp_url_2:n}=e;se.debug(`DEBUG: Third party imp url: ${t}`),se.debug(`DEBUG: Third party imp url 2: ${n}`),t&&ue(t),n&&ue(n)})(e)},he="CUSTOM_FORMATS_UTILS";new _(he),g.addModuleName(he,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)});const fe="VIGNETTE_CNC",pe=new _(fe);g.addModuleName(fe,{textColor:"#fff",backgroundColor:r("#2ccBc2",40)});const me="open",_e="cnc_vignette_wrapper",be="cnc_vignette",ve="vignette_close_button",we="cnc_vignette_close_button_wrapper",Se="cnc_vignette_label_ads",ye=["diskuse","diskuze","registrace","music-chart"],Ee=["#","a.blesk.cz","adform","aplikace","cookies","diskuse","diskuze","facebook","google","imedia","javascript","linkin","login","mailto","mver","objednat","premium","prihlaseni","rss","sklik","tel","twitter"],Ce={id:["hockey-today","login-modal","footer-global","didomi-popup","didomi-host","didomi-notice-agree-button"],classNames:["ads","no-vignette-link","button","btn","cookie-bar","subscription","px-zone","fancybox","main-button"],parentElement:["nav","footer"]};var Ae=n(312);const Ie="utils";new _(Ie),g.addModuleName(Ie,{textColor:"#bada33",backgroundColor:"#000"});class Te{static isObject(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}static isObjectEmpty(e){return 0===Reflect.ownKeys(e).length&&e.constructor===Object}static generateStringId=()=>Math.random().toString(36).slice(2).toUpperCase();static hash=e=>{const t="string"==typeof e?e:JSON.stringify(e);return(0,Ae.sha256)(t)};static readableTime=e=>`${Math.floor(e/36e5)} hodin ${Math.floor(e%36e5/6e4)} minut ${Math.floor(e%6e4/1e3)} sekund`;static selectEveryNthElement=(e,t=0,n=1)=>e.filter(((e,i)=>(i-t)%n==0&&i>=t));static containsSubstring(e,t){return e.includes(t)}static isTabVisible=()=>!document.hidden}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}var De=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=Oe({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in r)r[s]&&(o+="; "+s,!0!==r[s]&&(o+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+o}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],i={},r=0;r<n.length;r++){var o=n[r].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(i[a]=t.read(s,a),e===a)break}catch(e){}}return e?i[e]:i}},remove:function(e,t){i(e,"",Oe({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,Oe({},this.attributes,t))},withConverter:function(t){return e(Oe({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class ke{_unicodeIcon="🍪";_emojiIcon="🍪";get emojiIcon(){return this._emojiIcon}get unicodeIcon(){return this._unicodeIcon}static setCookie(e,t,n){De.set(e,t,n)}static getCookie(e){return De.get(e)}static removeCookie(e,t){De.remove(e,t)}}const Ne=new ke;var Re;!function(e){e.VIGNETTE_FREQUENCY_CAPPING_KEY="cnc_space_cowboy"}(Re||(Re={}));class Me{static vignetteFrequency=Re.VIGNETTE_FREQUENCY_CAPPING_KEY}const Le="URL handler",Pe=new _(Le);g.addModuleName(Le,{textColor:"#000",backgroundColor:r("#bada33",40)});class xe{static getFullDomain=()=>(({tryFn:e,catchFn:t})=>{try{return e()}catch(e){return t(e)}})({tryFn:()=>new URL(window.location.href).hostname.toLowerCase(),catchFn:e=>(Pe.error("Error while getting full domain",e),null)});static getSubdomain=()=>{const e=xe.getFullDomain();return e?e.split(".")[0]:null};static getRootDomain=()=>{const e=xe.getFullDomain();return e?e.split(".").slice(-2).join("."):null}}const ze="Vignette frequency capping",Fe=new _(ze);g.addModuleName(ze,{textColor:"#fff",backgroundColor:r("#2ccBc2",40)});class $e{controller;frequency;DEFAULT_FREQUENCY=666;_KEY=Me.vignetteFrequency;enabled=!1;lastVignetteTime=null;domain=null;getLastVignetteTime=()=>{const{emojiIcon:e}=Ne;Fe.debug(`[ getLastVignetteTime ${e} ]`);const t=ke.getCookie(this._KEY);if(!t)return Fe.warn(`no last vignette call in ${e}`),null;const n=+t;return Fe.debug(`last vignette call in ${e}:`,Te.readableTime(Date.now()-n)),n};setTimeStamp=()=>{Fe.debug("update time stamp");const e=Date.now(),t=`${e}`;this.lastVignetteTime=e,Fe.debug(`\n\t\t\t\t[ set timestamp: ${t} ]\n\t\t\t\t[ domain: ${this.domain} ]`),this.domain?ke.setCookie(this._KEY,t,{path:"/",expires:1,domain:`.${this.domain}`}):ke.setCookie(this._KEY,t,{path:"/",expires:1})};init=()=>{if(Fe.debug("init"),!this.frequency)return void Fe.warn("no vignette frequency capping config found");if(!this.enabled)return void Fe.warn("frequency capping is disabled");const{DEV_AD_UNIT_ENABLED:e}=this.controller.slotPath;return e?(Fe.warn("Dev ad unit enabled, skipping frequency capping"),void(this.enabled=!1)):$e.checkForPurpose()?(Fe.debug("is allowed"),this.enabled=!0,void(this.lastVignetteTime=this.getLastVignetteTime())):(Fe.warn("is NOT allowed - NO purposes"),void(this.enabled=!1))};static checkForPurpose=()=>!0;constructor({frequency:e},t){this.controller=t,this.frequency=e;const{enabled:n}=this.frequency;this.enabled=n,this.domain=xe.getRootDomain(),Fe.debug(`[ domain: ${this.domain} ]`),this.init()}handleFrequency=async()=>{Fe.debug("handle frequency");const{emojiIcon:e}=Ne;if(!this.enabled)return Fe.warn(`frequencyCapping [ frequency capping through ${e} is not enabled ]`),!0;if(!this.lastVignetteTime)return Fe.warn(`frequencyCapping [ no last vignette call in ${e} / timestamp is missing ]`),this.setTimeStamp(),!0;const t=Date.now()-this.lastVignetteTime,{time:n}=this.frequency??this.DEFAULT_FREQUENCY,i=1e3*n,r=i-t;return Fe.debug(`\n\t\t\t- elapsed time from last one: ${Te.readableTime(t)}\n\t\t\t- remaining time to next one: ${Te.readableTime(r)}\n\t\t\t- frequency: ${Te.readableTime(i)}`),t>i?(Fe.debug("frequency passed"),this.setTimeStamp(),!0):(Fe.warn("frequency NOT passed"),!1)}}const Be="VIGNETTE",Ue=new _(Be);g.addModuleName(Be,{textColor:"#fff",backgroundColor:r("#2ccBc2",20)});class Ge{static instance=new Ge;_configuration=null;_linksMounted=!1;_timeout=null;_fetchingAd=!1;adSlot=null;destinationUrl=null;frequencyCapping=null;get linksMounted(){return this._linksMounted}static removeListeners=()=>{Ue.debug("Removing vignette listeners (needs to be implemented here)")};static display=()=>{Ue.info("Displaying vignette"),(()=>{pe.info("Displaying vignette");const e=document.getElementById(_e);e&&e.classList.add(me)})()};static getInstance=()=>Ge.instance;static initialize=async()=>{(()=>{pe.info("Setting up DOM wrappers for CNC vignette");let e=document.getElementById(_e);e||(e=document.createElement("div"),e.id=_e,e.classList.add("cnc-ad-overlay--vignette__wrapper"),document.body.appendChild(e));let t=document.getElementById(we);t||(t=document.createElement("div"),t.id=we,t.classList.add("cnc-ad-overlay--vignette__close-wrapper"),e.appendChild(t));let n=document.getElementById(Se);if(!n){n=document.createElement("div"),n.id=Se,n.classList.add("cnc-ad-overlay--vignette__label-ads-wrapper"),e.appendChild(n);const t=document.createElement("div");t.classList.add("cnc-ad-overlay--vignette__label-ads"),t.innerHTML="Reklama",n.appendChild(t)}let i=document.getElementById(be);if(i||(i=document.createElement("div"),i.id=be,i.classList.add("cnc-ad-format--vignette"),e.appendChild(i)),!document.getElementById(ve)){const e=document.createElement("button");e.type="button",e.id=ve,e.classList.add("cnc-ad-overlay--vignette__close-button"),e.innerHTML=`\n\t<svg height="40" width="40">\n\t\t<line x1="12" y1="12" x2="28" y2="28" class="cnc-ad-overlay--${r="vignette"}__close-button__cross-line" />\n\t\t<line x1="28" y1="12" x2="12" y2="28" class="cnc-ad-overlay--${r}__close-button__cross-line" />\n\t</svg>`,e.addEventListener("click",(()=>{})),t.appendChild(e)}var r})()};static destroy=()=>{Ue.info("Destroying vignette"),Ge.removeListeners()};constructor(){Ue.info("Create Vignette instance")}setMountedLinks(e){this._linksMounted=e}setDestinationUrl=e=>{this.destinationUrl=e};setConfiguration=e=>{Ue.debug("Setting vignette configuration");const t=e.configuration.pageConfiguration.adTemplates.find((e=>"vignette"===e.slotName))?.enabledFormats.vignette;t?(this._configuration=t,this.frequencyCapping=new $e(t,e)):Ue.warn("No vignette configuration found")};setAdSlot=e=>{this.adSlot=e};handleOnRenderEnded=()=>{this.adSlot&&this.adSlot.renderEvent&&((e=>{const t=document.getElementById(e.idDOM);if(!t)return void pe.error("Position not found");if(!R.isRenderedSizeNumberArray(e.creativeSize))return void pe.error("Creative size is not a number array");const n={width:e.creativeSize[0],height:e.creativeSize[1]},i=U(n);pe.debug(`scale ratio [${i}]`),i<1&&G(t,i)})(this.adSlot),Ge.display(),this._fetchingAd=!1,this._timeout&&clearTimeout(this._timeout))};fetchAd=async e=>{if(Ue.info("Fetching vignette"),this.adSlot)if(this.destinationUrl){if(this.frequencyCapping){if(!await this.frequencyCapping.handleFrequency())return Ue.warn("Frequency capping failed"),void this.skip();Ue.debug("Frequency capping passed")}((e,t)=>{pe.debug("Setting up vignette and fetching ad");const n=document.getElementById(_e),i=document.getElementById(ve);n&&i&&(pe.debug(`slotName: ${e.configuration.slotName}, adServerSlot: ${e.adServerSlot} `),googletag.cmd.push((()=>{e.createAdServerSlot(),e.setTargeting(),googletag.cmd.push((()=>{const{adServerSlot:t}=e;t?googletag.pubads().refresh([t]):pe.error("Ad server slot not found")})),pe.debug("Fetched vignette from googletag")})),i.addEventListener("click",(()=>{pe.info("Close button clicked"),n.classList.remove(me),window.location.href=t.href})),pe.debug("Added close button event listener"))})(this.adSlot,e),this._fetchingAd=!0,setTimeout((()=>{this._fetchingAd&&(Ue.warn("Vignette ad request timeout reached, skipping vignette and redirecting to destination URL"),this.skip())}),2e3)}else Ue.error("No destination URL found");else Ue.error("No ad slot found")};mountVignetteToLinks=()=>{this._linksMounted||(e=>{pe.info("Adding vignette listener to links in page");const t=document.querySelectorAll("a");pe.debug("All links",t);const n=(e=>{const t=[];return e.forEach((e=>{(e=>{const{id:t,className:n,target:i,href:r}=e;let o=!1;if(Ee.some((e=>r.includes(e))))return!0;if(ye.some((e=>window.location.href.includes(e))))return!0;if(t&&Ce.id.includes(t))return!0;if("_blank"===i)return!0;if(n){const e=n.split(" ");o=!!Ce.classNames.some((t=>e.includes(t)))}return o})(e)||t.push(e)})),t})(t);pe.debug("Filtered links",n),e.linksMounted?pe.debug("Links already mounted"):(n.forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault(),e.setDestinationUrl(t.href),e.fetchAd(t)}))})),e.setMountedLinks(!0),pe.debug("Mounted vignette to filtered links on page"))})(this)};skip=()=>{Ue.info("Skipping vignette"),this.goToDestination()};goToDestination=()=>{Ue.info(`Going to destination URL: ${this.destinationUrl}`),this.destinationUrl&&(window.location.href=this.destinationUrl)};close=()=>{Ue.info("Closing vignette"),this.adSlot?this.adSlot.advertiser===y.PERFORMAX?(Q(),this.goToDestination()):((()=>{pe.info("Closing CNC vignette");const e=document.getElementById(_e);e&&e.classList.remove(me)})(),this.goToDestination()):Ue.error("No ad slot found")};open=()=>{Ue.info("Opening slide up"),this.adSlot?this.adSlot.advertiser===y.TEST_CNC||this.adSlot.advertiser===y.OTHER||(this.adSlot.advertiser,y.TEADS):Ue.error("No ad slot found")}}var He;!function(e){e.SLIDE_UP="slideup",e.BRANDING="branding",e.VIGNETTE="vignette",e.INTERSCROLLER="interscroller",e.SMARTICLE="smarticle",e.OUT_OF_PAGE="out_of_page"}(He||(He={}));const Ve="Custom format module",je=new _(Ve);g.addModuleName(Ve,{textColor:"#000",backgroundColor:I.ALERT_COLOR});class We{controller;_exceptionModule;slideUp;vignette;outOfPage;get exceptionModule(){return this._exceptionModule}isFormatAllowed(e,t){return!(this._exceptionModule.isBlockedByExceptions(e,t,"off")||N.checkForSizeMismatch(e,t))||(je.debug(`${t} format is not allowed for this ad slot`),!1)}handleBranding=e=>{if(!this.isFormatAllowed(e,He.BRANDING))return;We.logFormatHandling(He.BRANDING,e);const{menu:t}=this.controller.configuration.pageConfiguration.global;(e=>{O.info("Setup branding");const t=document.getElementById("cnc_branding_creative_wrapper");if(!t)return void O.error("BRANDING_WRAPPER_ID not found in DOM");t.classList.contains("cnc-branding")||t.classList.add("cnc-branding");const n=document.querySelector("#cnc_branding_creative_wrapper.cnc-branding .cnc-ads--leaderboard iframe:first-child");if(!n)return void O.error("Branding iframe not found in DOM");const{top:i,height:r,fixed:o}=e,s=()=>{const e=o?i-r:i,{scrollY:t}=window;n.style.top=t<e?i-t+"px":o?`${r}px`:"0px"};(i||r||o)&&(n.style.top=`${i}px`,s(),window.addEventListener("scroll",s))})(t),e.setCustomFormat(He.BRANDING)};handleInterscroller=e=>{this.isFormatAllowed(e,He.INTERSCROLLER)&&(We.logFormatHandling(He.INTERSCROLLER,e),(e=>{L.info("Render Interscroller");const t=document.getElementById(e.idDOM);if(!t)return void L.error("Couldn't find wrapper in DOM");const{parentElement:n}=t;if(!n)return void L.error("Wrapper element has no parent");L.debug(`Adding class to parent element: ${P(e)} parent of ${e.idDOM}`),n.classList.add(P(e));const i=t.firstElementChild;if(!i)return void L.error("Wrapper has no child");const r=document.getElementById(e.iframeId);if(!r)return void L.error("Couldn't find ad iframe");if(!e.creativeSize)return void L.error("Creative size is not set");if(!R.isRenderedSizeNumberArray(e.creativeSize))return void L.error("Creative size is not a number array");const o=e.creativeSize[0]/e.creativeSize[1];L.debug(`Creative image ratio: ${o}`);const s=window.innerHeight,a=window.innerWidth,d=t.offsetWidth?t.offsetWidth:a;if(L.debug(`INT DEBUG ${e.adServerSlot?.getSlotElementId()}`),!(i instanceof HTMLElement))return void L.error("child is not instance of HTMLElement");const l=d/e.creativeSize[0],c=s/e.creativeSize[1],u=Math.min(l,c),g=(s-u*e.creativeSize[1])/2;i.style.top=`${g}px`,i.style.transform=`scale(${u})`,i.style.transformOrigin="top center",((e,t)=>{const n=e.contentDocument;if(!n)return void L.debug("Interscroller: missing iFrame content document");const i=n.createElement("style"),r=`.abgcp {\n\t\t\ttop: 170px !important;\n\t\t\tright: 10px !important;\n\t\t\t${t&&t<1?`transform: scale(${2-t}) !important;`:""}\n\t\t}`;i.innerHTML=r,n.head.appendChild(i)})(r,u)})(e),e.setCustomFormat(He.INTERSCROLLER))};handleSlideUp=e=>{this.isFormatAllowed(e,He.SLIDE_UP)&&(We.logFormatHandling(He.SLIDE_UP,e),this.slideUp.setAdSlot(e),this.slideUp.handleOnRenderEnded(),e.setCustomFormat(He.SLIDE_UP))};handleVignette=e=>{this.isFormatAllowed(e,He.VIGNETTE)&&(We.logFormatHandling(He.VIGNETTE,e),this.vignette.setAdSlot(e),this.vignette.handleOnRenderEnded(),this.slideUp.pauseRefresh(),this.slideUp.close(),e.setCustomFormat(He.VIGNETTE))};handleSmarticle=e=>{this.isFormatAllowed(e,He.SMARTICLE)?(We.logFormatHandling(He.SMARTICLE,e),(e=>{const t=ce(e),n=e.configuration.enabledFormats.smarticle;if(!n)return void se.error("Smarticle configuration not found");if(!t)return void se.error("Did not find native wrappers");const{nativeWrapper:i,slotElement:r}=t;r.style.backgroundColor="transparent",r.style.position="absolute",i.classList.contains("cnc-ads")&&i.classList.remove("cnc-ads"),i.setAttribute("style",`margin-top: ${n.paddingTop.toString()}px;`)})(e),e.setCustomFormat(He.SMARTICLE)):(e=>{const t=ce(e);t&&(t.nativeElement.style.display="none")})(e)};handleOutOfPage=e=>{je.debug("Handling out-of-page format",this.controller.configuration.pageConfiguration),this.isFormatAllowed(e,He.OUT_OF_PAGE)?(We.logFormatHandling(He.OUT_OF_PAGE,e),this.outOfPage.onRenderEnded(e)):je.debug("Out-of-page functionality is blocked for this ad slot")};getFormatHandler(){return{[He.BRANDING]:this.handleBranding.bind(this),[He.INTERSCROLLER]:this.handleInterscroller.bind(this),[He.SLIDE_UP]:this.handleSlideUp.bind(this),[He.VIGNETTE]:this.handleVignette.bind(this),[He.SMARTICLE]:this.handleSmarticle.bind(this),[He.OUT_OF_PAGE]:this.handleOutOfPage.bind(this)}}static logFormatHandling(e,t){je.info(`Handling ${e} for ad slot: `,t)}static executeFirstEnabledFormat(e,t,n){for(const[i,r]of Object.entries(e))if(t[i]?.enabled)return je.info(`Handling format: ${i}`),void r(n);je.debug("No custom format is enabled for this ad slot")}constructor(e){je.info("Creating CustomFormatsModule instance"),this.controller=e,this._exceptionModule=new N(e),this.slideUp=re.getInstance(),this.outOfPage=F.getInstance(),this.vignette=Ge.getInstance(),this.vignette.setConfiguration(e)}handleOnRenderEnded=e=>{je.info(`Handling custom formats for ad slot ${e.idDOM} ${e.isRepeater?`${e.repeaterIndex}`:""}`);const{enabledFormats:t}=e.configuration;if(!t)return void je.warn("No custom format is enabled for this ad slot");const n=this.getFormatHandler();We.executeFirstEnabledFormat(n,t,e)};handleFormat=(e,t)=>{const{isOutOfPage:n,enabledFormats:{vignette:i,slideup:r}}=e;return n?(je.debug("Handling out-of-page format"),void this.outOfPage.init()):i?.enabled&&!this.exceptionModule.isBlockedByExceptions(t,He.VIGNETTE,"ignore")?(je.debug("Handling vignette format"),Ge.initialize(),void this.vignette.setAdSlot(t)):void(r?.enabled&&!this.exceptionModule.isBlockedByExceptions(t,He.SLIDE_UP,"ignore")&&(je.debug("Handling slideup format"),re.initialize(),this.slideUp.setAdSlot(t)))}}class qe{value;subscribers=new Set;notify=()=>{[...this.subscribers].forEach((e=>e(this.value)))};constructor(e){this.value=e}subscribe(e){return this.subscribers.add(e),e(this.value),()=>{this.subscribers.delete(e)}}set(e){this.value!==e&&(this.value=e,this.notify())}update(e){const t=e(this.value);this.value!==t&&(this.value=t,this.notify())}get(){return this.value}}const Ke=e=>{const t={creativeSize:e.creativeSize,requestedTimestamp:0,renderedTimestamp:0,idDOM:e.idDOM,isRepeater:e.isRepeater,repeaterIndex:e.repeaterIndex,advertiser:e.advertiser,isAdX:e.isAdX,customFormatUsed:e.customFormatUsed,format:He.SMARTICLE};window.__cncAdScript.liveState.update((e=>({...e,adSlots:[...e.adSlots.filter((e=>e.idDOM!==t.idDOM)),t]})))},Xe=e=>{window.__cncAdScript.liveState.update((t=>({...t,idMap:e})))},Ye="tracking_admon",Je=new _(Ye);g.addModuleName(Ye,{textColor:"#000",backgroundColor:o("#BADA33",20)});const Qe=e=>{Je.info(`Removing admon comments [${e}]`);const t=document.getElementById(e);if(!t)return void Je.error(`Element with id [${e}] not found`);let n=t.firstChild;for(;n;){const e=n.nextSibling;n.nodeType===Node.COMMENT_NODE&&t.removeChild(n),n=e}},Ze="adSlot",et=new _(Ze);g.addModuleName(Ze,{textColor:"#fff",backgroundColor:"#333EEE"});class tt{controller;_configuration;_adUnitPath;_idDOM;_wrapper=null;_adServerSlot;_renderOnLoad;_creativeSize=null;_renderEvent=null;_iframeId="";_advertiser=y.NONE;_isAdX=!1;_customFormatUsed=null;_repeaterIndex=null;_isEmpty=!1;_switchOffInterscroller=!1;get wrapper(){return this._wrapper}get iframeId(){return this._iframeId}get isEmpty(){return this._isEmpty}get isRepeater(){return null!==this._repeaterIndex}get repeaterIndex(){return this._repeaterIndex}get advertiser(){return this._advertiser}get renderOnLoad(){return this._renderOnLoad}get configuration(){return this._configuration}get idDOM(){return this._idDOM}get adUnitPath(){return this._adUnitPath}get creativeSize(){return this._creativeSize}get adServerSlot(){return this._adServerSlot}get renderEvent(){return this._renderEvent}get switchOffInterscroller(){return this._switchOffInterscroller}get isAdX(){return this._isAdX}get customFormatUsed(){return this._customFormatUsed}createAdUnitPath(){et.info(`Create ad unit path for ad slot [${this.idDOM}]`);const{slotName:e}=this._configuration;return this.controller.slotPath.getSlotPath(e)}setRenderOnLoad(){return et.debug(`Set render on load for ad slot [${this.idDOM}]`),!this.configuration.pseudoLazyLoad?.enabled&&!this.configuration.enabledFormats.vignette?.enabled}setRepeaterIndex(e){e.match(/__[0-9]$/)&&(this._repeaterIndex=parseInt(e.slice(-1),10)),e.match(/__[0-9]{2}$/)&&(this._repeaterIndex=parseInt(e.slice(-2),10)),et.debug(`Set repeater index for ad slot [${e}] ${this._repeaterIndex}`)}setRenderEvent=e=>{et.debug("Set render event for ad slot: ",this.idDOM),this._renderEvent=e};setAdvertiser=e=>{et.debug(`Set advertiser for ad slot [${this.idDOM}]: `,e),this._advertiser=e};getSizes=()=>{const e=this.configuration.enabledFormats.interscroller?.enabled&&!this.switchOffInterscroller,{creativeSizes:t}=this.configuration;return e?this.configuration.enabledFormats.interscroller.creativeSizes.concat(t):t};setCreativeSize=e=>{et.debug("Set creative size to:",e),this._creativeSize=e};handleCreativeSize=async({slot:e,size:t})=>{if(t)if("string"!=typeof t||t.includes("x")){if(1===t[0]&&1===t[1]){et.debug("Handling 1x1 size - getting size from creative metadata");const t=e.getSlotElementId(),n=await(async e=>{A.info(`Getting size from creative metadata for slot [${e}]`);const t=document.getElementById(e);if(!t)return A.error(`Ad slot wrapper not found for slot [${e}]`),[1,1];const n=t.querySelector("iframe");if(!n)return A.error(`Iframe not found for slot [${e}]`),[1,1];await new Promise((e=>{"complete"===n?.contentWindow?.document.readyState?e():n.addEventListener("load",(()=>e()))}));const i=n.contentWindow;if(!i)return A.error(`Iframe window not found for slot [${e}]`),[1,1];const{ucTagData:r}=i;if(!r)return A.error(`ucTagData not found for slot [${e}]`),[1,1];const{size:o}=r;return A.debug("Size from ucTagData: ",o),o&&o.includes("x")?o.split("x").map((e=>parseInt(e,10))):(A.error(`Size not found in ucTagData for slot [${e}]`),[1,1])})(t),i=[...n];return et.debug(`New creative size is [${i}] for slot [${t}]`),void this.setCreativeSize(i)}this.setCreativeSize(t)}else this.setCreativeSize(t);else et.error("Creative size not found")};setIframeId=e=>{e?(et.debug("Set iframe id to: ",e),this._iframeId=e):et.debug("Iframe id is not defined for ad slot: ",this.idDOM)};getWrapper=()=>(this._wrapper||(this._wrapper=document.getElementById(this.idDOM)),this._wrapper);addRenderedClass=()=>{this._wrapper?this._wrapper.classList.add("cnc-rendered"):et.warn("Slot element not found, cannot add rendered class",this._configuration.slotName)};constructor(e,t,n=!1){et.info(`Create ad slot [${t}]`),this.controller=Fr.getInstance(),this._configuration=e,this._idDOM=t,this._wrapper=this.getWrapper(),this.setRepeaterIndex(t),this._adUnitPath=this.createAdUnitPath(),this._renderOnLoad=this.setRenderOnLoad(),this.configuration.enabledFormats.vignette?.enabled&&(this.controller.customFormats.vignette.setAdSlot(this),this.controller.customFormats.vignette.mountVignetteToLinks()),n&&(this.createAdServerSlot(),this.setTargeting())}createAdServerSlot=()=>{et.info(`Define ad slot [${this.idDOM}]`),this.configuration.enabledFormats.vignette?.enabled||this.configuration.enabledFormats.slideup?.enabled||this._wrapper?.classList.add("cnc-ads__within");const e=this.configuration.isOutOfPage;et.debug(`OOP [${this.idDOM}]: ${e}`),et.debug("Defining slot in googletag",this.adUnitPath,this.idDOM),et.debug("Sever slot current",this._adServerSlot,JSON.stringify(this._adServerSlot)),this._adServerSlot||(this._adServerSlot=e?googletag.defineOutOfPageSlot(this.adUnitPath,this.idDOM):googletag.defineSlot(this.adUnitPath,this.getSizes(),this.idDOM)),this._adServerSlot?.addService(googletag.pubads())};refresh=()=>{et.info(`Refresh ad slot [${this.idDOM}]`),Qe(this.idDOM),this.configuration.enabledFormats.slideup.enabled&&(et.debug("Close slideup before refresh"),this.controller.customFormats.slideUp.close());const e=this;this._adServerSlot&&(googletag.cmd.push((()=>{e._adServerSlot&&googletag.pubads().refresh([e._adServerSlot])})),et.debug(`Googletag slot refreshed [${this.idDOM}]`))};destroy=()=>{var e;et.debug(`Destroy ad slot [${this.idDOM}]`),e=this,window.__cncAdScript.liveState.update((t=>({...t,adSlots:[...t.adSlots.filter((t=>t.idDOM!==e.idDOM))]})));const t=this._wrapper?.parentElement;if(t){const e=t.classList;for(let n=0;n<e.length;n+=1)if(e[n].includes("interscroller")){t.classList.remove(e[n]);break}}Qe(this.idDOM)};setTargeting=()=>{et.debug("Set targeting for ad slot: ",this.idDOM);const e=this._adServerSlot;if(!e)return void et.error("Ad server slot is not defined");const{slotName:t}=this._configuration;et.debug(`Target position [${this.idDOM}]: `,t),e.setTargeting("target_position",t),e.setTargeting("consent_target",this.controller.userConsent.consentType)};setEmptyAdSlot(){this._isEmpty=!0}setCustomFormat=e=>{this._customFormatUsed=e,Ke(this)};setSwitchOffInterscroller(e){this._switchOffInterscroller=e}handleOnRenderEnded=async e=>{et.info("Render ended slot event (SlotRenderEndedEvent): ",this.idDOM);const{advertiserId:t,slot:n,campaignId:i,creativeId:r,lineItemId:o,sourceAgnosticCreativeId:s,sourceAgnosticLineItemId:a,size:d}=e,l=null!==(c=t)&&E[c]?E[c]:y.OTHER;var c;S.removeInLineHeightStyle(this,e,l),2640043670===i&&(this._isAdX=!0);const u=["\nAd Slot",`\tname >> [ ${this.configuration.slotName} ]`,`\tID   >> [ ${this.idDOM} ]`,`\tpath >> [ ${this.adUnitPath} ]`,`\n\tRendered sizes [ ${d} ]`,`\n\tCampaign ID  >> [ ${i}${this._isAdX?" <--\x3e AdX":""} ]`,`\tLineItem ID  >> [ ${o} ]`,`\tCreative ID  >> [ ${r} ]`,`\n\tCreative ID  >> [ ${s} ] - source agnostic`,`\tLineItem ID  >> [ ${a} ] - source agnostic`,`\n\tAdvertiser ID    >> [ ${t} ]`,`\tAdvertiser name  >> [ ${l} ]`];this.addRenderedClass(),et.debug(u.join("\n")),((e,t,n)=>{Je.info(`Adding admon comments [${e}]`);const i=document.getElementById(e);if(!i)return void Je.error(`Slot element with id [${e}] not found`);const r=i.firstChild;if(!r)return void Je.error(`IframeWrapper not found on [${e}]`);Je.debug(`Adding admon comments [${e}]`);const o=document.createComment(` spir.czMonS[189_${t}_3CNC_CPT_${n}] `),s=document.createComment(" spir.czMonE ");i.insertBefore(o,r);const{nextSibling:a}=r;Je.debug("Next sibling",a),i.appendChild(s)})(this.idDOM,i,r),this.setAdvertiser(l),this.setRenderEvent(e);const g=(e=>{const t=e.getSlotId()?.getId();return t?`google_ads_iframe_${t}`:null})(n);this.setIframeId(g),await this.handleCreativeSize(e),Ke(this),this.controller.customFormats.handleOnRenderEnded(this)}}var nt,it,rt,ot,st,at;!function(e){e.MOBILE="mobile",e.DESKTOP="desktop"}(nt||(nt={})),function(e){e.MOBILE="mobile",e.DESKTOP="desktop",e.RESPONSIVE="responsive"}(it||(it={})),function(e){e.CATEGORY="category",e.ARTICLE="article",e.GALLERY="gallery"}(rt||(rt={})),function(e){e.CNC="cnc260",e.CNR="cnr260",e.CVC="cvc260",e.MARKET="marketplace",e.DEV="dev"}(ot||(ot={})),function(e){e.SSR="SSR",e.SPA="SPA"}(st||(st={})),function(e){e.UNIWEB="uniweb",e.HYBRID="hybrid"}(at||(at={}));const dt="gallery_handler",lt=new _(dt);g.addModuleName(dt,{textColor:"#000",backgroundColor:"#9400D3"});const ct="cnc_gallery_side_placeholder",ut="cnc_gallery_top_placeholder",gt=e=>{if("desktop"===e){const e=document.getElementById(ct);e&&(lt.info("Cleaning up mobile landscape gallery wrapper"),e.innerHTML="")}if("mobile-landscape"===e){const e=document.getElementById(ut);e&&(lt.info("Cleaning up desktop gallery wrapper"),e.innerHTML="")}if("mobile-portrait"===e){const e=document.getElementById(ut),t=document.getElementById(ct);e&&(lt.info("Cleaning up desktop gallery wrapper"),e.innerHTML=""),t&&(lt.info("Cleaning up mobile landscape gallery wrapper"),t.innerHTML="")}},ht=e=>{if("desktop"===e){const e=document.getElementById(ut);return!(""!==e?.innerHTML)}if("mobile-landscape"===e){const e=document.getElementById(ct);return!(""!==e?.innerHTML)}return!1},ft=(e,t)=>{if(e.global.galleryType===at.HYBRID&&"gallery"===t.template)if(lt.debug("Handling old hybrid gallery and setting up wrappers"),window.innerWidth<600)gt("mobile-portrait");else if(window.innerHeight<675){if(gt("mobile-landscape"),ht("mobile-landscape")){const e=document.getElementById(ct);if(!e)return void lt.error("brandingGalleryWrapper not found");const t=document.createElement("div");t.classList.add("cnc-ads"),t.classList.add("cnc-ads--mobile_rectangle_2");const n=document.createElement("div");n.id="cnc_mobile_rectangle_2",t.appendChild(n),e.appendChild(t)}}else if(gt("desktop"),ht("desktop")){const e=document.getElementById(ut);if(!e)return void lt.error("brandingGalleryWrapper not found");const t=document.createElement("div");t.id="cnc_branding_creative_wrapper",t.classList.add("new-gallery");const n=document.createElement("div");n.classList.add("cnc-ads"),n.classList.add("cnc-ads--leaderboard");const i=document.createElement("div");i.id="cnc_leaderboard_1",n.appendChild(i),t.appendChild(n),e.appendChild(t)}},pt="GPT event Log",mt=new _(pt);g.addModuleName(pt,{textColor:"#000",backgroundColor:o("#e516e9",60)});const _t=(e,t)=>{if(!t?.slot)return void mt.error("Invalid event or missing slot.");const{slot:n}=t,i={slotElementId:n.getSlotElementId(),adUnitPath:n.getAdUnitPath(),targeting:n.getTargetingKeys().reduce(((e,t)=>{const i=n.getTargeting(t);return e[t]=i.join(","),e}),{})};mt.debug(`${e} \nEvent data:`,i)},bt="GPT event [ Response received ]",vt=new _(bt);g.addModuleName(bt,{textColor:"#000",backgroundColor:o("#e516e9",40)});const wt="Slot Render Ended",St=new _(wt);g.addModuleName(wt,{textColor:"#000",backgroundColor:o("#e516e9",20)});const yt=new _("GPT");g.addModuleName("GPT",{textColor:"#000",backgroundColor:"#e516e9"});class Et{controller;configuration;addEventListeners=()=>{yt.info("Adding event listeners"),googletag.cmd.push((()=>{googletag.pubads().addEventListener("slotRequested",(e=>(e=>{_t("Requested Slot Event (SlotRequestedEvent)",e)})(e))),googletag.pubads().addEventListener("slotOnload",(e=>(e=>{_t("On load adSlot event (SlotOnloadEvent)",e)})(e))),googletag.pubads().addEventListener("slotResponseReceived",(e=>(e=>{const{slot:t}=e,n=t.getResponseInformation(),i=t.getSlotElementId();n?_t("Response received slot event (SlotResponseReceived)",e):vt.error("No response information available for slot",i)})(e))),googletag.pubads().addEventListener("slotRenderEnded",(e=>{(async(e,t)=>{St.info("Handling slotRenderEnded event");const{isEmpty:n,slot:i}=e,r=i.getSlotElementId(),o=t.getAdSlotByIdDOM(r);if(St.debug("Ad Slot id (get by DOM id): ",o?.idDOM),n)return St.important(`Slot Render Ended [ Handling empty slot - ${r} => EMPTY ]`),void((e,t)=>{e.customFormats.vignette.skip(),t&&(t.setEmptyAdSlot(),Ke(t))})(t,o);o?await o.handleOnRenderEnded(e):St.error("Could not find adSlot for slotRenderEnded event")})(e,this.controller)}))}))};setConfig=()=>{yt.debug("Setting GPT configuration");const{SRA:e,enableVideoAds:t,enableAsyncRendering:n,safeFrame:i,adCentering:r,disableInitialLoad:o}=this.configuration;googletag.cmd.push((()=>{if(e?googletag.pubads().enableSingleRequest():googletag.pubads().enableLazyLoad(),n)try{googletag.pubads().enableAsyncRendering()}catch(e){yt.error("Error enabling async rendering",e)}o&&googletag.pubads().disableInitialLoad(),t&&googletag.pubads().enableVideoAds(),i&&googletag.pubads().setForceSafeFrame(!0).setSafeFrameConfig({useUniqueDomain:!0}),r&&googletag.pubads().setCentering(!0),this.controller.ppid.isAllowed&&this.controller.ppid.init()}))};static refreshAdSlots=e=>{yt.debug("Refreshing ad slots"),googletag.cmd.push((()=>{googletag.pubads().refresh(e)}))};constructor(e){this.controller=e,this.configuration=e.configuration.pageConfiguration.global.gptConfig,this.configuration.disableInitialLoad=!0}initialize=()=>{yt.info("Initializing GPT module"),this.setConfig(),this.controller.targeting.setTargeting(),this.addEventListeners(),googletag.cmd.push((()=>{googletag.enableServices()}))}}var Ct;!function(e){e.BEFORE_DISPLAY_CALL="adopsBeforeDisplayCall",e.CONSENT="adopsConsent"}(Ct||(Ct={}));const At="utils_is_in_dom_and_visible",It=new _(At);g.addModuleName(At,{textColor:r("#bada33",20),backgroundColor:"#000"});const Tt=(e,t)=>{const n=document.getElementById(e);return n?(i=n,"none"!==getComputedStyle(i).display||(It.warn(`Element or its ancestor with id "${i.id}" is hidden (display: none).`),!1)):(It.warn(`Element with id "${e}" not found in the DOM.`),!1);var i},Ot=(e,t)=>{let n=e;return n=n.toLowerCase().replace(/\\-/g,"_"),t||"cnc_"!==n.substr(0,4)&&(n=`cnc_${n}`),n=n.replace("halfpagead","halfpage"),n=n.replace("rectangle480","rectangle_480"),n=n.replace(/-/g,"_"),n},Dt="AdSlot services",kt=new _(Dt);g.addModuleName(Dt,{textColor:"#000",backgroundColor:"#e516e9"});class Nt{controller;static shouldAddOutOfPageFormat=({isOutOfPage:e})=>e;static shouldAddPopUpFormat=e=>e.vignette?.enabled||e.slideup?.enabled;static shouldAddGalleryWrapper=e=>{const{template:t,galleryType:n}=e.global;return t===rt.GALLERY&&n===at.HYBRID&&window.innerWidth>600&&window.innerHeight<675};static shouldAddAdFormat(e,t,n){kt.debug("Checking if ad format should be added",{idDOM:e,pageConfig:t,template:n});const i=this.shouldAddPopUpFormat(n.enabledFormats);return Tt(e)||i||this.shouldAddOutOfPageFormat(n)}static isRepeaterEnabled=(e,t)=>e.enabled||t.enabled;static adjustForInterscroller(e,t){e.forEach(((e,n)=>{n%(t+1)!=0&&(e.setSwitchOffInterscroller(!0),kt.debug(`Switching off interscroller for ${e.idDOM}`))}))}handleRepeaterSlots=(e,t,n,i)=>{kt.debug("Repeater enabled - adTemplate: ",n),this.controller.repeaterHandler.create(n);const r=this.controller.repeaterHandler.storage.find((t=>t.slotName===e)),o=r?.slotIds||[];return Nt.shouldAddGalleryWrapper(i)&&o.push(t),kt.debug("Wrapper IDs for slot",{slotName:e,wrapperIds:o}),o};static createAdServerSlot=async e=>{await new Promise((t=>{googletag.cmd.push((()=>{e.createAdServerSlot(),kt.debug("Ad server slot created",e.adServerSlot),e.setTargeting(),kt.debug("Targeting set for ad server slot",e.configuration.slotName),t()}))}))};static createAdServerSlots=async e=>{kt.info("Creating ad server slots",e),await Promise.all(e.filter((e=>e.renderOnLoad)).map(Nt.createAdServerSlot))};constructor(e){this.controller=e}createIdMapOfSlotTemplatesAndPrepareDomWrappers=e=>{kt.info("Create id map of slot templates and prepare dom wrappers [pageConfiguration]",e);const t={},{adTemplates:n}=e;return n.forEach((async n=>{const{slotName:i,repeater:r,repeaterFeed:o,enabledFormats:s}=n,a=Ot(i);if(kt.debug("Slot name",i),kt.debug("\t⇒ ID DOM",a),kt.debug("\t⇒ enabledFormats",s),Nt.isRepeaterEnabled(r,o))return void(t[i]=this.handleRepeaterSlots(i,a,n,e));const{galleryType:d}=e.global;(Nt.shouldAddOutOfPageFormat(n)||Nt.shouldAddPopUpFormat(s)||Tt(a))&&(kt.debug("Adding slot to map",i,a),t[i]=[a])})),kt.debug("Map: ",t),t};displayAdSlot=async e=>{const{adServerSlot:t,idDOM:n}=e;if(!t)return void kt.warn("Ad server slot is not defined");kt.debug("Displaying ad slot: ",n);const i=this.controller.configuration.pageConfiguration.global.gptConfig.SRA;await new Promise((e=>{googletag.cmd.push((()=>{const n=googletag.pubads().isInitialLoadDisabled();kt.debug("googletag isInitialLoadDisabled: ",n),i?(kt.debug("SRA"),n?(kt.debug("Initial load is disabled -> refreshing ad slots"),Et.refreshAdSlots([t])):(kt.debug("Initial load is enabled -> displaying ad slots"),googletag.display(t))):kt.debug("Not SRA"),e()}))}))};displayAdSlots=async()=>{const{adSlots:e}=this.controller,t=e.filter((e=>!0===e.renderOnLoad)),n=this.controller.configuration.pageConfiguration.global.gptConfig.SRA;this.controller.tracking.callEvent(Ct.BEFORE_DISPLAY_CALL);const i=t.filter((e=>e.adServerSlot)).map((e=>e.adServerSlot));i.length<=0?kt.warn("No ad slots to refresh"):await new Promise((e=>{googletag.cmd.push((()=>{const t=googletag.pubads().isInitialLoadDisabled();kt.debug("googletag isInitialLoadDisabled: ",t),n?t?(kt.debug("Initial load is disabled -> refreshing ad slots"),Et.refreshAdSlots(i)):(kt.debug("Initial load is enabled -> displaying ad slots"),i.forEach((e=>googletag.display(e)))):kt.debug("Not SRA"),e()}))}))};createAdSlotsFromMap=(e,t)=>{kt.debug("Creating ad slots from map");const n=[];return Object.entries(e).forEach((([e,i])=>{kt.debug("Slot name",e);const r=[],o=t.adTemplates.find((t=>t.slotName===e));if(!o)return void kt.warn("No configuration for slot ",e);const{isOutOfPage:s}=o;i.forEach((n=>{if(s){const e=F.getOutOfPageFormat();e&&o.enabledFormats&&(kt.debug("OOP Hack"),o.enabledFormats.out_of_page=e)}if(this.controller.customFormats.exceptionModule.isBlockedByExceptionsThroughTemplate(o,"ignore"))return void kt.debug("Ad slot is blocked by exceptions",n);if(!Nt.shouldAddAdFormat(n,t,o))return void kt.debug(`Could not create slot with name [${e}] and idDOM [${n}]`);const i=new tt(o,n);kt.debug("Ad slot created",i),r.push(i),this.controller.customFormats.handleFormat(o,i)})),t.global.template===rt.GALLERY&&o?.enabledFormats.interscroller?.skipRepeaterWrappers&&Nt.adjustForInterscroller(r,o.enabledFormats.interscroller.skipRepeaterWrappers),n.push(...r)})),n.forEach((e=>Ke(e))),n};cleanUpAdSlots=(e,t)=>{kt.info("Recreate ad slots");const{adSlots:n}=this.controller;if(JSON.stringify(e)===JSON.stringify(t))return kt.debug("No changes in adSlots - skipping recreation"),!1;kt.debug("Old id map",e,"New id map",t);const i=Object.keys(e).filter((e=>!t[e]));kt.debug(`Difference between old and new id map: [${i}]`);const r=i.reduce(((t,n)=>[...t,...e[n]]),[]);return kt.debug(`Slots to be deleted [${r}]`),n.forEach((e=>e.destroy())),googletag.destroySlots(),kt.debug("Old ad slots destroyed"),!0}}const Rt="Lazy Load",Mt=new _(Rt);g.addModuleName(Rt,{textColor:"#000",backgroundColor:"#16d9fc"});class Lt{controller;constructor(e){Mt.debug("initialized"),this.controller=e}loadAd=async e=>{const{id:t}=e;t&&Mt.debug("input element id",t),Mt.important("input element",e);const{className:n,firstChild:i}=e;if(Mt.debug("input element className",n),Mt.debug("input element firstChild",i),i){const{id:e}=i;Mt.debug("input element firstChildId",e);const t=this.controller.getAdSlotByIdDOM(e);if(!t){Mt.warn(`Ad slot with ID ${e} not found.`);const t=await this.controller.createAdSlot(e);return Mt.debug("Ad server slot created and displayed",t),t||(Mt.error("Ad slot not created"),null)}return await Nt.createAdServerSlot(t),await this.controller.adSlotServices.displayAdSlot(t),t}const r=this.controller._configuration.findAdTemplateByRepeaterSelector(n);if(!r)return Mt.warn("adTemplate not found"),null;const{slotName:o}=r,s=this.controller.repeaterHandler.find(o);return s?(Mt.debug("Repeater found",s),s.add(e),null):(Mt.warn("Repeater not found"),null)}}const Pt="Element Observer",xt=new _(Pt);g.addModuleName(Pt,{textColor:"#fff",backgroundColor:r("#666EEE",20)});class zt{controller;refreshManager;observer;handleIntersect(e){e.forEach((e=>{const{target:t}=e,{id:n}=t,i=this.controller.getAdSlotByIdDOM(n);i?this.refreshManager.updateVisibility(i,e.isIntersecting):xt.warn("AdSlot not found",n)}))}constructor(e,t,n=.5){this.controller=e,this.refreshManager=t,this.observer=new IntersectionObserver(this.handleIntersect.bind(this),{threshold:n})}observeElement(e){this.observer.observe(e)}}const Ft="Active Tab Handler",$t=new _(Ft);g.addModuleName(Ft,{textColor:"#bada33",backgroundColor:o("#000",20)});class Bt{_isActive;static instance=new Bt;listener=null;get isActive(){return this._isActive}handleVisibilityChange=()=>{this._isActive=Te.isTabVisible(),$t.debug("is active: ",this._isActive)};addVisibilityChangeListener(){this.listener=this.handleVisibilityChange,document.addEventListener("visibilitychange",this.listener)}static getInstance=()=>Bt.instance;constructor(){$t.debug("initialized"),this.addVisibilityChangeListener(),this._isActive=Te.isTabVisible()}removeVisibilityChangeListener(){this.listener?document.removeEventListener("visibilitychange",this.listener):$t.warn("removeVisibilityChangeListener: [ listener NOT exist ]")}}const Ut="time refresh manager",Gt=new _(Ut);g.addModuleName(Ut,{textColor:"#fff",backgroundColor:r("#333EEE",40)});class Ht{controller;refreshInterval;elements=[];intervalId;activeTabHandler;startTimer(){Gt.debug(`Starting timer with interval: ${this.refreshInterval}ms`),this.intervalId=setInterval((()=>this.refreshVisibleElements()),this.refreshInterval)}getTimeState=()=>{const e={};return this.elements.forEach((({adSlot:t,refreshData:n})=>{e[t.idDOM]={isIntersecting:n.isIntersecting,refreshTime:n.refreshTime,timePassed:n.timePassed,observerless:n.observerless}})),e};refreshVisibleElements(){if(!this.activeTabHandler.isActive)return;this.elements.forEach((({adSlot:e,refreshData:t})=>{if(t.isIntersecting||t.observerless){t.timePassed+=this.refreshInterval/1e3;const n=t.refreshTime-t.timePassed;(n<=5||n%10==0)&&Gt.debug(`Time to refresh [ ${e.configuration.slotName} ]: `,n),t.timePassed>=t.refreshTime&&(Ht.refreshAdSlot(e),t.timePassed=0,Gt.debug(`Element refreshed: ${e.idDOM}, timePassed reset to 0`))}}));const e=this.getTimeState(),t=this.controller.refreshHandler.clickRefreshManager.state;var n;n={time:e,click:t},window.__cncAdScript.liveState.update((e=>({...e,refreshState:n})))}static refreshAdSlot(e){Gt.debug(`Refreshing adSlot: ${e.idDOM}`),e.refresh()}constructor(e,t=1e3){this.controller=e,this.refreshInterval=t,this.activeTabHandler=Bt.getInstance(),this.startTimer()}addElement(e){if(!document.getElementById(e.idDOM))return void Gt.error(`Element with id ${e.idDOM} not found`);const{refreshTime:{observerless:t,duration:n}}=e.configuration;this.elements.push({adSlot:e,refreshData:{isIntersecting:!1,refreshTime:n,timePassed:0,observerless:t||!1}}),Gt.debug(`Added element: ${e.idDOM}, refreshTime: ${n}, observerless: ${t}`)}updateVisibility(e,t){const n=this.elements.find((({adSlot:t})=>t===e));n&&(n.refreshData.isIntersecting=t,Gt.debug(`Updated visibility for ${e.idDOM}: isIntersecting = ${t}`))}resetTimePassed(e){const t=this.elements.find((({adSlot:t})=>t===e));t&&(Gt.debug("Resetting time passed for ",e.idDOM),t.refreshData.timePassed=0)}}const Vt="click refresh manager",jt=new _(Vt);g.addModuleName(Vt,{textColor:"#bada55",backgroundColor:r("#333EEE",40)});class Wt{controller;_state;_clickRefreshSlots=[];get state(){return this._state}constructor(e){jt.debug("Create Click Refresh Manager"),this.controller=e,this._state={}}createState=e=>{const t={};this._clickRefreshSlots=e,e.forEach((e=>{const n=Object.keys(e.configuration.refreshClick);t[e.idDOM]=n.reduce(((t,n)=>{if(!e.configuration.refreshClick[n].enabled)return t;const i={maxClickCount:e.configuration.refreshClick[n].clickCount,currentClickCount:0};return{...t,[n]:i}}),{})})),jt.debug("clickState",t),this._state=t};handleClick=e=>{jt.debug("Handling click event -- for type: ",e),this._clickRefreshSlots?(this._state||(jt.warn("Click state not initialized, creating new state"),this.createState(this._clickRefreshSlots)),this._clickRefreshSlots.forEach((t=>{const n=t.idDOM,i=this._state[n],r=i[e];if(!i||!r)return;jt.debug(`update click state for ${n} and type: `,e);const o={...r,currentClickCount:r.currentClickCount+1};if(this._state[n]={...i,[e]:o},o.currentClickCount<o.maxClickCount)return;jt.debug("Refreshing adSlot: ",n),t.refresh();const s={...o,currentClickCount:0};this._state[n]={...i,[e]:s},this.controller.refreshHandler.timeRefreshManager.resetTimePassed(t)})),jt.debug("clickState",this._state)):jt.error("Click refresh slots not initialized")};addElement=e=>{jt.debug(`Adding adSlot to click refresh state: ${e.idDOM}`),Object.keys(e.configuration.refreshClick).forEach((t=>{e.configuration.refreshClick[t].enabled&&(this._state[e.idDOM]={...this._state[e.idDOM],[t]:{maxClickCount:e.configuration.refreshClick[t].clickCount,currentClickCount:0}})})),jt.debug("clickState",this._state)}}const qt="refresh handler",Kt=new _(qt);g.addModuleName(qt,{textColor:"#fff",backgroundColor:r("#333EEE",20)});class Xt{controller;_timeRefreshManager;_clickRefreshManager;elementObserver;timeRefreshSlots=[];clickRefreshSlots=[];get timeRefreshManager(){return this._timeRefreshManager}get clickRefreshManager(){return this._clickRefreshManager}initTime=()=>{Kt.log("Initializing time refresh"),this.timeRefreshSlots.forEach((e=>{Kt.debug(`Setting up time refresh for adSlot: ${e.idDOM}`);const{refreshTime:{observerless:t}}=e.configuration;this._timeRefreshManager.addElement(e);const n=document.getElementById(e.idDOM);!t&&n&&this.elementObserver.observeElement(n)}))};initClick=()=>{Kt.debug("Initializing click refresh"),Kt.debug("Click refresh slots",this.clickRefreshSlots),this.clickRefreshManager.createState(this.clickRefreshSlots)};constructor(e){Kt.log("Initializing refresh handler"),this.controller=e,this._timeRefreshManager=new Ht(this.controller),this.elementObserver=new zt(e,this._timeRefreshManager),this._clickRefreshManager=new Wt(this.controller)}init=()=>{Kt.log("Initializing refresh handler"),this.timeRefreshSlots=this.controller.adSlots.filter((e=>e.configuration.refreshTime.enabled)),Kt.debug(`Time refresh slots: ${this.timeRefreshSlots.length}`),this.initTime(),this.clickRefreshSlots=this.controller.adSlots.filter((e=>e.configuration.refreshClick)),Kt.debug(`Click refresh slots: ${this.clickRefreshSlots.length}`),this.initClick()};registerAdSlot=e=>{if(Kt.debug(`Adding adSlot to refresh handler: ${e.idDOM}`),this.timeRefreshSlots.includes(e))Kt.warn("AdSlot already in time refresh list",e.idDOM);else{if(e.configuration.refreshTime.enabled){this.timeRefreshSlots.push(e),this._timeRefreshManager.addElement(e);const t=document.getElementById(e.idDOM);t&&this.elementObserver.observeElement(t),Kt.debug(`AdSlot added to time refresh list: ${e.idDOM}`)}e.configuration.refreshClick&&(this.clickRefreshSlots.push(e),this.clickRefreshManager.addElement(e),Kt.debug(`AdSlot added to click refresh list: ${e.idDOM}`))}}}var Yt;!function(e){e.ARTICLE_GALLERY="articleGallery",e.LIST_ARTICLE="listArticle",e.GALLERY="gallery",e.DEFAULT="default"}(Yt||(Yt={}));const Jt="Ad Placement",Qt=new _(Jt);g.addModuleName(Jt,{textColor:"#fff",backgroundColor:r("#6495ED",20)});class Zt{placeholder;positionWrapper;adPositionId;adPosition;get id(){return this.adPositionId}static getAdPositionId=(e,t)=>void 0!==t?`cnc_${e}__${t+1}`:`cnc_${e}`;static createNewElement=(e,t)=>{const n=document.createElement("div");return n.id=e,t&&(n.className=t),n};static getOrCreateElement=(e,t)=>{const n=document.getElementById(e);return n?(Qt.info("Element already exists, cleaning it up",e),n.innerHTML="",t&&(n.className=t),n):Zt.createNewElement(e,t)};constructor(e,t,n){this.placeholder=e,this.adPositionId=Zt.getAdPositionId(t,n),this.positionWrapper=Zt.getOrCreateElement(`${this.adPositionId}__wrapper`,`cnc-ads cnc-ads--${t}`),this.adPosition=Zt.getOrCreateElement(this.adPositionId),this.init()}init=()=>{Qt.info("Init AdPlacement [adPositionId]",this.adPositionId),this.positionWrapper.appendChild(this.adPosition),this.placeholder.appendChild(this.positionWrapper)}}const en="Counter";new _(en),g.addModuleName(en,{textColor:"#bada33",backgroundColor:o("#000",20)});class tn{_value;get value(){return this._value}constructor(e=0){this._value=e}increase=()=>{this._value+=1};decrease=()=>{this._value-=1};reset=()=>{this._value=0}}const nn="Repeater",rn=new _(nn);g.addModuleName(nn,{textColor:"#fff",backgroundColor:r("#333AAA",40)});class on{adTemplate;controller;_placeholders;_slotIds=[];_counter;get counter(){return this._counter}get slotName(){return this.adTemplate.slotName}get slotIds(){return this._slotIds}get placeholders(){return this._placeholders}getSelectors=()=>{const e=[];return this.adTemplate.repeater?.enabled&&e.push(this.adTemplate.repeater.selector),this.adTemplate.repeaterFeed?.enabled&&e.push(this.adTemplate.repeaterFeed.selector),e.flatMap((e=>e.split(",").map((e=>e.trim())))).filter(Boolean)};selectNthElements=e=>{const{startFromWrapper:t,skipWrappers:n}=this.adTemplate.repeater,i=t-1,r=n+1;return rn.debug("Start index",i),rn.debug("Nth element",r),Te.selectEveryNthElement(e,i,r)};getPlaceholders=e=>{if(e.length<1)return[];const t=e.join(","),n=document.querySelectorAll(t);n.forEach((e=>{e.innerHTML=""}));const i=Array.from(n).filter(R.isHTMLElement);return 0===i.length?(rn.warn("No elements found for repeater",e),[]):this.selectNthElements(i)};constructor(e,t){this.adTemplate=e,this.controller=t;const n=this.getSelectors();rn.debug("Repeater selectors",n),this._placeholders=this.getPlaceholders(n),rn.debug("Repeater placeholders",this._placeholders),this._counter=new tn(this._placeholders.length),rn.debug("Repeater counter",this._counter.value),this._placeholders.forEach(((t,n)=>{const i=new Zt(t,e.slotName,n);this._slotIds.push(i.id)}))}add=e=>{if(rn.debug("Adding new ad slot to repeater",e),!R.isHTMLElement(e))return void rn.warn("Placeholder is not HTMLElement",e);this._counter.increase();const t=new Zt(e,this.adTemplate.slotName,this._counter.value);rn.important("!!!!",this.adTemplate);const n=new tt(this.adTemplate,t.id,!0),{adServerSlot:i}=n;rn.debug("Ad server slot",i),i&&Et.refreshAdSlots([i]);const r=this.adTemplate.refreshTime?.enabled,o=this.adTemplate.refreshClick;(r||o)&&this.controller.refreshHandler.registerAdSlot(n),this._slotIds.push(t.id),this.controller.adSlots.push(n)}}const sn="Repeater Handler",an=new _(sn);g.addModuleName(sn,{textColor:"#fff",backgroundColor:r("#333AAA",20)});class dn{controller;_storage=[];get storage(){return this._storage}addToStorage=e=>{this._storage.push(e)};constructor(e){this.controller=e}create=e=>{const t=this._storage.find((t=>t.slotName===e.slotName));if(t)return void an.warn("Repeater already exists in storage",t);const n=new on(e,this.controller);this.addToStorage(n)};find=e=>this._storage.find((t=>t.slotName===e))}const ln="slot path storage manager",cn=new _(ln);var un,gn;g.addModuleName(ln,{textColor:"#000",backgroundColor:r("#50C878",40)}),function(e){e.ENABLE="enableCMI",e.DISABLE="disableCMI"}(un||(un={})),function(e){e.ENABLE="enableDevAdUnit",e.DISABLE="disableDevAdUnit"}(gn||(gn={}));class hn{static gamAccountIds={CNC:"21869710533",CMI:"21844247697"};static gamIdKey=d.DEV_GAM;static devAdUnitKey=d.DEV_AD_UNIT;static updateLocalStorage(e,t){cn.debug(`updateLocalStorage: ${e}, ${t}`),a.setItem(e,t)}static getStatusFromLocalStorage(e,t){if(!R.isLocalStorageKey(e))return cn.warn(`Invalid key: ${e}. Defaulting to false.`),!1;const n=a.getItem(e);return n===t.ENABLE||(n===t.DISABLE||null===n||cn.warn(`Unknown status for key ${e}: ${n}. Defaulting to false.`),!1)}static enableTestGamAccount(){hn.updateLocalStorage(d.DEV_GAM,un.ENABLE)}static disableTestGamAccount(){hn.updateLocalStorage(d.DEV_GAM,un.DISABLE)}static enableDevAdUnitPath(){hn.updateLocalStorage(d.DEV_AD_UNIT,gn.ENABLE)}static disableDevAdUnitPath(){hn.updateLocalStorage(d.DEV_AD_UNIT,gn.DISABLE)}static isDevAccountEnabled(){return hn.getStatusFromLocalStorage(this.gamIdKey,un)}static isDevAdUnitEnabled(){return hn.getStatusFromLocalStorage(this.devAdUnitKey,gn)}static getGamAccountId(e){return e?(cn.important("CMI account is enabled"),hn.gamAccountIds.CMI):hn.gamAccountIds.CNC}}const fn="slot path",pn=new _(fn);g.addModuleName(fn,{textColor:"#fff",backgroundColor:o("#333AAA",20)});class mn{controller;accountId;isDevAccountEnabled;isDevAdUnitEnabled;get DEV_ACCOUNT_ENABLED(){return this.isDevAccountEnabled}get DEV_AD_UNIT_ENABLED(){return this.isDevAdUnitEnabled}get GOOGLE_ACCOUNT_ID(){return this.accountId}constructor(e){this.controller=e,this.isDevAccountEnabled=hn.isDevAccountEnabled(),this.isDevAdUnitEnabled=hn.isDevAdUnitEnabled(),this.accountId=hn.getGamAccountId(this.isDevAccountEnabled)}init=async()=>{this.isDevAdUnitEnabled&&(pn.important("Dev ad unit is enabled, updating placement to DEV"),this.controller._configuration.updatePlacement(ot.DEV))};getSlotPath(e){const{placement:t}=this.controller.configuration.pageConfiguration.global,{area:n,template:i,site:r}=this.controller.configuration.pageDefinition,o=r.startsWith("dev_")?r.slice(4):r,s=`${this.accountId}/${t}/${o}/${e}/${i}/${n}`;return pn.debug(`Constructed Slot Path: [${s}]`),s}}const _n={GOOGLE_AD_MANAGER_ID:"21869710533",ADVERTISER_GAM_IDS:{PERFORMAX:4834158929,R2B2:4975138286,CNC:4831032460,TEADS:4971778780}},bn={5:"celebrity",7:"zpravy",1196:"zpravy",12:"cestovani",37:"bleskpromuze",38:"bydleni",55:"hokej",56:"fotbal",79:"premierleague",80:"bundesliga",83:"laliga",174:"tenis",214:"olympijskehry",782:"magazin",3957:"blesksport",5520:"isportlife",5334:"supermamy",5644:"regiony",8075:"formen"},vn="Area Configuration (getArea)",wn=new _(vn);g.addModuleName(vn,{textColor:"#fff",backgroundColor:r("#0000ff",40)});const Sn="ostatni",yn="homepage",En="Transport configuration",Cn=new _(En);g.addModuleName(En,{textColor:"#fff",backgroundColor:r("#0000ff",40)});const An=[nt.DESKTOP,nt.MOBILE],In=[rt.ARTICLE,rt.CATEGORY,rt.GALLERY],Tn=(e,t)=>{const n={...e};return Object.keys(t).forEach((e=>{t[e]&&"object"==typeof t[e]?Array.isArray(t[e])?n[e]=[...n[e]||[],...t[e]]:n[e]=Tn(n[e]||{},t[e]):n[e]=t[e]})),n},On="debug_utils";new _(On),g.addModuleName(On,{textColor:o("#4caf50",20),backgroundColor:"#000"});const Dn="Page configuration",kn=new _(Dn);g.addModuleName(Dn,{textColor:"#fff",backgroundColor:r("#0000ff",20)});const Nn=["","clanek"],Rn=e=>{if(kn.debug("Getting keywords"),e.keywords&&Array.isArray(e.keywords))return e.keywords;const t=[],n=document.getElementsByTagName("meta");for(let e=0;e<n.length;e+=1){const i=n[e],r=i.getAttribute("name");if(r&&"keywords"===r.toLowerCase()){const e=i.getAttribute("content");if(e){const n=e.split(",");t.push(...n)}}}return kn.debug("Keywords",t),t},Mn=e=>{kn.debug("Finding configuration for current page");const t=(()=>{const e=(Cn.debug("Getting transport configuration from window"),window.__cncAdScript.transportConfig||window.__cncAdScript.configs);return Cn.debug("Generating configurations from transport configuration",e),e.areas.flatMap((t=>An.flatMap((n=>In.flatMap((i=>{const r=JSON.parse(JSON.stringify(e.baseSettingValues)),o=JSON.parse(JSON.stringify(e.adSlotBaseSettingValues)),s=JSON.parse(JSON.stringify(e.overrides)).filter((e=>{const r=e.selector.split("|").map((e=>e.split(",").filter((e=>""!==e&&"*"!==e))));if("*|*|*"===e.selector)return!0;const[o,s,a]=r;return(0===o.length||o.includes(n))&&(0===s.length||s.includes(i))&&(0===a.length||a.includes(t))}));s.sort(((e,t)=>{const n=e.selector.split("|").filter((e=>""!==e&&"*"!==e)),i=t.selector.split("|").filter((e=>""!==e&&"*"!==e));return n.length-i.length}));const a=((e,t)=>{let n={...t};return e.forEach((e=>{const{overrideSiteSettings:t}=e;n=Tn(n,t)})),n})(s,r),d={site:e.site,area:t,device:n,template:i,...a},l=((e,t)=>{const n=[];return t.forEach((t=>{const{adSlotName:i,settings:r}=t;let o={...r};e.forEach((e=>{const t=e.overrideAdSlotSettings.find((e=>e.adSlotName===i));t&&(o=Tn(o,t.settings))}));let s=!1;e.forEach((e=>{e.enabledAdSlots.includes(i)?s=!0:e.disabledAdSlots.includes(i)&&(s=!1)})),s&&n.push({...o,slotName:i})})),n})(s,o);return{global:d,adTemplates:l}}))))))})(),{template:n,area:i,device:r,isResponsive:o}=e;kn.debug("Configurations for all pages:",t),kn.debug(`device: (${r}), area: (${i}), template: (${n})`);const s=e=>t.find((t=>t.global.template===n&&t.global.area===e&&t.global.device===r)),a=s(i)||s(Sn);if(!a)throw kn.error("Page configuration for current page not found"),new Error("ERROR: Page configuration for current page not found");return kn.important("Found configuration for current page",a),kn.debug("is responsive",e.isResponsive),window.__cncAdScript.currentConfiguration=a,a},Ln="Page definition",Pn=new _(Ln);g.addModuleName(Ln,{textColor:"#fff",backgroundColor:r("#0000ff",20)});const xn=rt.CATEGORY,zn=(nt.DESKTOP,576),Fn=e=>{const{isDiscussion:t=!1,isGalleryInArticle:n=!1,isListArticle:i=!1,keywords:r,responsiveBreakpoint:o=zn,safety:s=[],site:a,template:d=xn}=e;if(!a)throw new Error("Site is required");return{isGalleryInArticle:n,isDiscussion:t,isListArticle:i,keywords:r,responsiveBreakpoint:o,safety:s,site:a,template:d}},$n=()=>{Pn.debug("Get page definition from window");const e=(()=>{const{__cncPageDefinition:e}=window;if(!e)throw Pn.error("No page definition found in window"),new Error("No page definition found in window");if(!e.site)throw Pn.error("No site found in page definition"),new Error("No site found in page definition");return e})(),t=(e=>{const t=(({forceArea:e})=>"string"!=typeof e||""===e?(wn.warn("Force AREA is not set correctly, trying to find the area from categoryTree"),!1):e)(e);if(t)return wn.info("Force AREA: ",t),t;const n=(({categoryTree:e})=>{if(!e)return;const t=Array.isArray(e)?e:e.split(",");return wn.info("Category TREE: ",t),t.map((e=>e.trim()))})(e);if(!n)return wn.error("No categoryTree -> set default AREA to:",Sn),Sn;const i=(e=>{const t=e.filter((e=>e)).map((e=>e.toString()));return wn.info("Filtered category TREE: ",t),t})(n);if(0===i.length)return wn.error("Empty categoryTree -> set default AREA to:",Sn),Sn;const{template:r=rt.CATEGORY}=e,o=r===rt.CATEGORY;if(1===i.length&&o)return wn.info(`Template is "${r}". Found one record in CategoryTree, Area set to:`,yn),yn;const s=(e=>{const t=e.filter((e=>bn[e])).map((e=>bn[e]));return wn.info("Filtered CMS Areas: ",t),t})(i);if(0===s.length)return wn.error("Area not found (foundAreas array is empty) -> set default AREA to:",Sn),Sn;const a=s[s.length-1];return wn.info("Found category Areas -> ",s.join(",")),a})(e),n=(e=>{const{webType:t,responsiveBreakpoint:n}=e;if(t===it.RESPONSIVE){const e=n||zn;return{device:window.innerWidth<e?nt.MOBILE:nt.DESKTOP,isResponsive:!0}}return{device:t===it.MOBILE?nt.MOBILE:nt.DESKTOP,isResponsive:!1}})(e);return{...Fn(e),area:t,...n}},Bn="configuration",Un=new _(Bn);g.addModuleName(Bn,{textColor:"#fff",backgroundColor:"#0000ff"});class Gn{controller;_constants={};_pageDefinition={area:"",device:nt.DESKTOP,isResponsive:!1,keywords:[],responsiveBreakpoint:0,safety:[],site:"",template:rt.CATEGORY,isDiscussion:!1};_currentPageConfiguration;get pageDefinition(){return this._pageDefinition}get pageTargeting(){return((e,t)=>{kn.debug("Getting page targeting");let n=null;window.location.hash.match("test_target=")&&(n=window.location.hash.split("=")[1]||null),n&&(kn.debug(`Setting test target from url [${n}]`),(e=>{localStorage.setItem(d.DEBUG_TARGET,e)})(n));const i=localStorage.getItem(d.DEBUG_TARGET);return i&&kn.debug(`Test target: ${i}`),{L2:e?.global.placement,area:e?.global.area,site:e?.global.site,template:e?.global.template,URL:window.location.pathname.split("/").filter((e=>-1===Nn.indexOf(e))).map((e=>e.substr(0,40))),keywords:Rn(t),safety:t.safety&&t.safety.length>0?t.safety:null,test_target:i}})(this.currentPageConfiguration,this.pageDefinition)}get currentPageConfiguration(){return this._currentPageConfiguration}get constants(){return this._constants}constructor(e){this.controller=e,Un.info("Initialize page configuration"),this._constants=_n,this._pageDefinition=$n(),Un.debug("Page definition",this._pageDefinition),this._currentPageConfiguration=Mn(this.pageDefinition)}updatePage=()=>{this._pageDefinition=$n(),this._currentPageConfiguration=Mn(this.pageDefinition)};getConfiguration=()=>({constants:this._constants,pageDefinition:this._pageDefinition,pageConfiguration:this._currentPageConfiguration});updateAdslotSizes=(e,t)=>{const n=this.currentPageConfiguration.adTemplates.find((t=>t.slotName===e));n?(n.creativeSizes=t,Un.debug("Ad slot updated",n)):Un.error("Ad slot not found")};disableAdSlot=e=>{Un.debug("Disabling ad slot",e),this.currentPageConfiguration.adTemplates=this.currentPageConfiguration.adTemplates.filter((t=>t.slotName!==e)),Un.debug("Ad slot disabled",e)};isAdSlotEnabled=e=>!!this.currentPageConfiguration.adTemplates.find((t=>t.slotName===e));updatePlacement=e=>{this._currentPageConfiguration.global.placement=e};findAdTemplateBySlotId=e=>{const{adTemplates:t}=this._currentPageConfiguration,n=t.find((t=>t.slotName===e||Te.containsSubstring(e,t.slotName)));return Un.debug("adTemplate",n),n};findAdTemplateByRepeaterSelector=e=>{const{adTemplates:t}=this._currentPageConfiguration,n=t.find((t=>Te.containsSubstring(t.repeater?.selector,e)||Te.containsSubstring(t.repeaterFeed?.selector,e)));return Un.debug("adTemplate",n),n}}var Hn,Vn;!function(e){e.CNC="cnc260",e.CNR="cnr260",e.CVC="cvc260",e.MARKET="marketplace",e.DEV="dev"}(Hn||(Hn={})),function(e){e.SSR="SSR",e.SPA="SPA"}(Vn||(Vn={}));const jn="cnc_ad_script_debug",Wn="cnc_ads_debug",qn=()=>{const e=localStorage.getItem("cnc-ad-script-env")||"prod";let t="https://cnc-ad-script-uncached.b-cdn.net/prod";const{hostname:n}=window.location;switch(console.log(`Determining script URL for environment: ${e}`),e){case"dev":t=n.includes("local")?`https://${n}/debug`:`https://local.${n.replace("www.","")}/debug`;break;case"stage":t="https://cnc-ad-script-uncached.b-cdn.net/stage"}return t},Kn=()=>{const e=document.createElement("script");e.src=`${qn()}/cnc-ads-debug.js`,document.body.appendChild(e)};var Xn,Yn,Jn,Qn;!function(e){e.CMP="cnc_cpex_cmp",e.GPT="cnc_gpt",e.HB_SETTINGS="cnc_cpex_prebid_settings",e.GLOBAL_CSS="cnc_global_css",e.CARODA="cnc_caroda",e.PFX="cnc_pfx",e.R2B2="cnc_r2b2_loader",e.SEZNAM_TRAFFIC="seznam-ssp"}(Xn||(Xn={})),function(e){e.JS="js",e.CSS="css",e.JSON="json"}(Yn||(Yn={})),function(e){e.ANONYMOUS="anonymous",e.USE_CREDENTIALS="use-credentials"}(Jn||(Jn={})),function(e){e.NO_REFERRER="no-referrer",e.NO_REFERRER_WHEN_DOWNGRADE="no-referrer-when-downgrade",e.SAME_ORIGIN="same-origin",e.ORIGIN="origin",e.STRICT_ORIGIN="strict-origin",e.ORIGIN_WHEN_CROSS_ORIGIN="origin-when-cross-origin",e.STRICT_ORIGIN_WHEN_CROSS_ORIGIN="strict-origin-when-cross-origin",e.UNSAFE_URL="unsafe-url"}(Qn||(Qn={}));const Zn="file loader",ei=new _(Zn);g.addModuleName(Zn,{textColor:"#000",backgroundColor:o("#E9967A",20)});class ti{files={};head=document.head||document.getElementsByTagName("head")[0];static isFileInDOM=e=>!!document.getElementById(e);loadScript=e=>(ei.info(`Loading script ${e.id}`),new Promise(((t,n)=>{const i=document.createElement("script");i.id=e.id,i.src=e.src,i.async=e.options?.async??!0,i.defer=e.options?.defer??!1,e.options?.crossOrigin&&(i.crossOrigin=e.options.crossOrigin),i.onload=()=>{this.files[e.id]=!0,ei.info(`Script ${e.id} loaded`),t()},i.onerror=()=>n(new Error(`Failed to load script ${e.src}`)),this.head.appendChild(i)})));loadStylesheet=e=>new Promise(((t,n)=>{const i=document.createElement("link");i.id=e.id,i.rel="stylesheet",i.href=e.src,e.options?.dataAttribute&&e.options.dataAttribute.forEach((e=>{i.setAttribute(e.name,e.value)})),i.onload=()=>{this.files[e.id]=!0,ei.info(`Stylesheet ${e.id} loaded`),t()},i.onerror=()=>n(new Error(`Failed to load stylesheet ${e.src}`)),this.head.appendChild(i)}));loadJSON=e=>new Promise(((t,n)=>{fetch(e.src).then((t=>{if(!t.ok)throw new Error(`Failed to load JSON ${e.src}`);return t.json()})).then((()=>{this.files[e.id]=!0,ei.info(`JSON ${e.id} loaded`),t()})).catch((e=>n(e)))}));loadFile=e=>{if(ti.isFileInDOM(e.id))return this.files[e.id]=!0,ei.info(`File ${e.id} already loaded`),Promise.resolve();switch(e.type){case Yn.JS:return this.loadScript(e);case Yn.CSS:return this.loadStylesheet(e);case Yn.JSON:return this.loadJSON(e);default:return Promise.reject(new Error(`Unknown file type ${e.type}`))}};loadFiles=e=>Promise.all(e.map((e=>b((()=>this.loadFile(e)))))).then((()=>{}));isFileReady=e=>!!this.files[e];areFilesReady=e=>e.every((e=>this.isFileReady(e)));getFileStatus=e=>this.files[e]||!1}const ni=()=>({id:Xn.CMP,src:"//cdn.cpex.cz/cmp/v2/cpex-cmp.min.js",type:Yn.JS,options:{async:!1,defer:!1}}),ii=()=>({id:Xn.GPT,src:"https://securepubads.g.doubleclick.net/tag/js/gpt.js",type:Yn.JS,options:{async:!0,defer:!1}}),ri=()=>({id:Xn.GLOBAL_CSS,src:"//w.cncenter.cz/styles/cnc-slot-sizes.min.css",type:Yn.CSS,options:{dataAttribute:[{name:"data-cnc-style",value:"2024"}]}});function oi(e){return e&&"string"==typeof e.id&&(void 0===e.settings||function(e){return e&&(void 0===e.fileName||"string"==typeof e.fileName)}(e.settings))}const si="external_files",ai=new _(si);g.addModuleName(si,{textColor:"#000",backgroundColor:"#E9967A"});class di{controller;_fileLoader=new ti;primaryFiles=[ni(),ii(),ri()];dependingOnConsentFiles=[];nonDependingOnConsentFiles=[];get fileLoader(){return this._fileLoader}static mapIdToFileLoaderProps(e,t){switch(e){case Xn.GPT:return ii();case Xn.CMP:return ni();case Xn.GLOBAL_CSS:return ri();case Xn.HB_SETTINGS:return{id:Xn.HB_SETTINGS,src:"//micro.rubiconproject.com/prebid/dynamic/22918.js",type:Yn.JS,options:{async:!0,defer:!1,skipError:!0,refererPolicy:Qn.STRICT_ORIGIN_WHEN_CROSS_ORIGIN}};case Xn.PFX:return{id:Xn.PFX,src:"https://cdn.performax.cz/px2/flexo.js",type:Yn.JS,options:{async:!0,defer:!0}};case Xn.CARODA:return{id:Xn.CARODA,src:"//publisher.caroda.io/videoPlayer/caroda.min.js?ctok=0323d82660232006462908c08f",type:Yn.JS,options:{async:!0,defer:!0,crossOrigin:Jn.ANONYMOUS}};case Xn.R2B2:return t?(({fileName:e})=>({id:Xn.R2B2,src:`//delivery.r2b2.cz/hb/cnc/${e}.cz`,type:Yn.JS,options:{async:!0,defer:!0}}))(t):(ai.warn(`No settings found for script ID: ${e}`),null);default:return ai.warn(`No configuration found for script ID: ${e}`),null}}async loadDefaultScripts(){ai.info("Loading default scripts"),await b((()=>this._fileLoader.loadFiles(this.primaryFiles)))}processExternalFiles(e){const t=[],n=[];return e.forEach((e=>{if(!oi(e))return void ai.warn(`Invalid file object: ${JSON.stringify(e)}`);if(!function(e){return Object.values(Xn).includes(e)}(e.id))return void ai.warn(`Invalid file ID: ${e.id}`);const{id:i,settings:r}=e;if(!Object.values(Xn).includes(i))return void ai.warn(`Invalid file ID: ${i}`);const o=di.mapIdToFileLoaderProps(i,r);null!==o&&(r?.dependencyOnConsent?t.push(o):n.push(o))})),ai.info("Valid external files",{dependingOnConsent:t,nonDependingOnConsent:n}),{dependingOnConsent:t.filter((e=>!this.primaryFiles.some((t=>t.id===e.id)))),nonDependingOnConsent:n.filter((e=>!this.primaryFiles.some((t=>t.id===e.id))))}}constructor(e){this.controller=e,ai.info("Constructing ExternalFilesModule")}async init(){ai.info("Initializing ExternalFilesModule"),await this.loadDefaultScripts();const{externalFiles:e}=this.controller?.configuration?.pageConfiguration?.global??{};if(!e||!Array.isArray(e)||!e.every(oi))return void ai.warn("\n\t\t\t\tInvalid external files configuration, or no external files specified (or not an array of ExternalFile objects).\n\t\t\t\tSkipping external files loading.\n\t\t\t");ai.info("External files",e);const{dependingOnConsent:t,nonDependingOnConsent:n}=this.processExternalFiles(e);this.dependingOnConsentFiles=t,this.nonDependingOnConsentFiles=n,ai.info("Secondary external files (primary files filtered out)",{dependingOnConsent:this.dependingOnConsentFiles,nonDependingOnConsent:this.nonDependingOnConsentFiles}),this.dependingOnConsentFiles.length||this.nonDependingOnConsentFiles.length?ai.info("ExternalFilesModule initialized"):ai.warn("No additional external files specified (after filtering primary files).")}loadNonConsentFiles=async()=>{this.nonDependingOnConsentFiles.length&&this._fileLoader.loadFiles(this.nonDependingOnConsentFiles)};async loadDependingOnConsentFiles(){ai.info("Loading a consent-dependent file",this.dependingOnConsentFiles);const e=this.controller.userConsent;this.dependingOnConsentFiles.forEach((t=>{const n=e.findVendorIdByFileId(t.id);if(!n)return void ai.warn(`Vendor ID not found for file ID: ${t.id}`);ai.info(`Vendors file id [${t.id}]`,n);const i=e.getStatusForVendor(n);ai.info(`Status for file [${t.id}]`,i),i?this._fileLoader.loadFile(t):ai.warn(`No consent status found for vendor ID: ${n}`)}))}}const li="PPID",ci=new _(li);g.addModuleName(li,{textColor:"#000",backgroundColor:"#BADA33"});class ui{allowed=I.PPID_ALLOWED;localStorageKey=d.PPID;get isAllowed(){return this.allowed}setPpid=e=>{this.allowed?e?(ci.debug(`Setting PPID to GPT ${e} (length: ${e.length})`),googletag.pubads()?.setPublisherProvidedId(e)):ci.warn("Set PPID > ID is null"):ci.warn("PPID is not allowed")};generateAndSet=()=>{const e=Te.generateStringId(),t=Te.hash(e);this.setPpid(t),a.setItem(this.localStorageKey,t)};init=()=>{const e=a.getItem(this.localStorageKey);e?this.setPpid(e):this.generateAndSet()}}const gi="header bidding",hi=new _(gi);g.addModuleName(gi,{textColor:"#000",backgroundColor:"#DAA520"});class fi{controller;provider="cpexrubicon";configuration;timeout=null;_canBeRefreshed=!0;get canBeRefreshed(){return this._canBeRefreshed}set canBeRefreshed(e){this._canBeRefreshed=e}static validateConfig=e=>{if(!e)throw new Error("Header bidding configuration is missing.");if("boolean"!=typeof e.enabled)throw new Error("Header bidding configuration 'enabled' flag must be a boolean.");if("number"!=typeof e.timeout)throw new Error("Header bidding configuration 'timeout' must be a number.")};pbjsCallPromise=e=>new Promise((t=>{window.pbjs.que.push((()=>{const n=Date.now();hi.debug("Request Bids added to PBJS QUE"),window.pbjs.rp.requestBids({gptSlotObjects:e,callback:(e,i,r)=>{hi.debug("PBJS callback - bidResponses",e),hi.debug("PBJS callback - timeout/ auction ID: ",i," / ",r),window.__cncAdsMonitoring.hb_finished=Date.now()-window.__cncAdsMonitoringStartTime;const o=Date.now()-n;hi.debug(`PBJS bid responses [${o} ms]`);const s=e.map((e=>e.getSlotElementId()));hi.debug("cpexHeaderBiddingController [ bidResponses ]",s),this.timeout&&clearTimeout(this.timeout),t(e)}})}))}));getAdServerSlots=()=>this.controller.adSlots.map((e=>e.adServerSlot)).filter((e=>void 0!==e));static setHeaderBiddingStart=()=>{window.__cncAdsMonitoring.hb_start=Date.now()-window.__cncAdsMonitoringStartTime};refreshAdSlots=e=>{this._canBeRefreshed?Et.refreshAdSlots(e):hi.warn("AdSlots can't be refreshed")};setHeaderBiddingTimeout=(e,t)=>setTimeout((()=>{hi.warn("Headerbidding timeouted"),this.refreshAdSlots(e)}),t);constructor(e){this.controller=e,hi.info("construct"),this.configuration=this.controller.configuration.pageConfiguration.global.headerBidding,fi.validateConfig(this.configuration),window.__cncAdsMonitoring=window.__cncAdsMonitoring||{},window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[]}run=async()=>{if(hi.info("Run"),!this.configuration.enabled)return[];const e=this.getAdServerSlots();if(!e.length)return hi.warn("No AdSlots"),[];const{timeout:t}=this.configuration;hi.debug("Headerbidding timeout",t),fi.setHeaderBiddingStart(),this.timeout=this.setHeaderBiddingTimeout(e,t);const n=await this.pbjsCallPromise(e);return n.length?n:(hi.warn("bid responses are empty"),[])}}const pi="pseudo_lazyload",mi=new _(pi);g.addModuleName(pi,{textColor:"#000",backgroundColor:"#AFEEEE"});class _i{controller;observers=[];async triggerLoadAdSlot(e){mi.debug("Ad slot load",e);let t=this.controller.getAdSlotByIdDOM(e)??null;t||(mi.warn(`Ad slot with ID ${e} not found.`),t=await this.controller.createAdSlot(e)),t?(t.createAdServerSlot(),t.setTargeting(),this.controller.adSlotServices.displayAdSlot(t),mi.debug("Ad slot created and displayed",t)):mi.error("Ad slot not found and not created")}setupObserver=(e,t)=>{mi.debug("Setting up observer for",t);const n=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(this.triggerLoadAdSlot(t),n.unobserve(e.target),mi.debug("Observer unobserved",t))}))}),{rootMargin:`${e.distance}px`});mi.debug("Observer created with distance",e.distance);const i=document.getElementById(t);return i?n.observe(i):mi.error(`Element with ID ${t} not found.`),n};constructor(e){this.controller=e}initialize=()=>{mi.debug("Module initialized");const{adSlots:e}=this.controller;e.forEach((e=>{const{pseudoLazyLoad:t}=e.configuration;t.enabled&&(mi.important("Ad slot name: ",e.configuration.slotName),this.observers.push(this.setupObserver(t,e.idDOM)))})),mi.debug("Observers set",this.observers)}}const bi="PERFORMAX",vi=new _(bi);var wi;g.addModuleName(bi,{textColor:"#fff",backgroundColor:r("##2ccBc2",40)}),function(e){e.VIGNETTE="vignette",e.SLIDE_UP="slide_up",e.NOT_SET="pfx_wrapper"}(wi||(wi={}));const Si=e=>{vi.info("Performax handler function triggered");const{slot_ID:t,format:n}=e;let{wrapper_ID:i=wi.NOT_SET}=e;var r,o;vi.debug(`Slot id:[${t}], format:[${n}], wrapper id:[${i}]`),n===wi.VIGNETTE||n===wi.SLIDE_UP&&(i=J),vi.debug(`Performax wrapper id set to ${i}`),r=t,o=i,vi.info("Pushing slot to performax queue"),vi.debug(`Slot id:[${r}], wrapper id:[${o}]`),window.px2.queue.push((()=>{vi.debug("Pushing render function into performax queue"),window.px2?.render({slot:{id:r},elem:o})}))},yi="gemius handler",Ei=new _(yi);g.addModuleName(yi,{textColor:"#000",backgroundColor:o("#BADA33",20)});class Ci{static callGemiusHit(e,t){const{gemius_hit:n}=window;"function"==typeof n?(Ei.important(`callGemiusHit [ identifier : ${e} ] ${t?"(with extraparameters)":""}`),n(...t?[e,t]:[e])):Ei.important("callGemiusHit - gemius_hit is not a function")}static extractGemiusIdentifier(){const{pp_gemius_identifier:e}=window;if(void 0!==e){if("string"==typeof e)return e.startsWith("USED_")?e.substring(5):e;Ei.important("extractGemiusIdentifier - pp_gemius_identifier is not a string ")}else Ei.important(" extractGemiusIdentifier - pp_gemius_identifier is not defined ")}static isGemiusEnabled(){return!0===window?.cncgemius}static checkAndCall(e,t){const n=Ci.isGemiusEnabled();if(Ei.important(`callGemiusOnPageEvent: ${e}`),n&&"boolean"!=typeof t&&(Ei.important("gemiusEnabled is true and callNotAllowed is not a boolean (probably azet)"),t=!0),t)return void Ei.important("checkAndCall - NOT called ");const i=Ci.extractGemiusIdentifier();if(!i)return void Ei.important("checkAndCall - gemiusIdentifier is not defined");const{pp_gemius_extraparameters:r}=window;Ci.callGemiusHit(i,r)}}const Ai="queue handler",Ii=new _(Ai);g.addModuleName(Ai,{textColor:"#000",backgroundColor:r("#AFEEEE",20)});class Ti{static executionDelayInMs=100;queue=[];processing=!1;initialized=!1;get size(){return this.queue.length}async processQueue(){!this.processing&&this.initialized&&(this.processing=!0,await this.processQueueRecursively(),this.processing=!1)}async processQueueRecursively(){if(0===this.queue.length)return;const e=this.dequeue();void 0!==e&&(await Ti.processItem(e),await this.processQueueRecursively())}static async processItem(e){Ii.debug(`Processing item: ${e}`);try{await new Promise((e=>{setTimeout(e,Ti.executionDelayInMs)})),e()}catch(e){Ii.error("QUEUE item error",e)}}static logEnqueue(e){Ii.debug(`QUEUE pushed ${e}`)}constructor(){window.__cncAdsQueue&&Array.isArray(window.__cncAdsQueue)&&(window.__cncAdsQueue.forEach((e=>this.enqueue(e))),window.__cncAdsQueue={items:0,push:()=>{}}),this.initialized=!0,this.processQueue()}enqueue(e){this.queue.push(e),Ti.logEnqueue(e),this.processQueue()}dequeue(){if(0!==this.queue.length)return this.queue.shift()}}const Oi="public_interface_queue",Di=new _(Oi);var ki,Ni;g.addModuleName(Oi,{textColor:"#000",backgroundColor:r("#AFEEEE",20)}),function(e){e.LIMITED_ADS="limited_ads",e.PERSONALIZED="personalized",e.NON_PERSONALIZED="non_personalized",e.NONE="none",e.NOT_RECOGNIZED="consent_not_recognized"}(ki||(ki={})),function(e){e.CARODA="Caroda s.r.o. (954)",e.CNC="CNCenter",e.CPEX="CPEx (570)",e.GEMIUS="Gemius SA (328)",e.GOOGLE_AD="Google Advertising Products",e.PFX="Performax.cz, s.r.o. (732)",e.R2B2="R2B2 a.s. (1235)",e.SEZNAM="Seznam.cz, a.s. (621)"}(Ni||(Ni={}));const Ri="Tc Data Consent Handler",Mi=new _(Ri);g.addModuleName(Ri,{textColor:"#000",backgroundColor:o("#0faaaa",40)});class Li{static personalizedPurposes=[1,2,3,4,7,9,10];static nonPersonalizedPurposes=[1,2,7,9,10];static limitedAdsPurposes=[2,7,9,10];static isObject=Te.isObject;static isObjectEmpty=Te.isObjectEmpty;static areAllConsentsPresent(e,t){return!!e&&t.every((t=>e[t.toString()]??!1))}static getConsentFromTcData(e){if(!e||!this.isObject(e.purpose)||this.isObjectEmpty(e.purpose))return Mi.error("TCData is not valid"),ki.NOT_RECOGNIZED;const{consents:t,legitimateInterests:n}=e.purpose;if(!this.isObject(t)||this.isObjectEmpty(t)||!this.isObject(n)||this.isObjectEmpty(n))return Mi.error("Consents are not valid in TCData"),ki.NOT_RECOGNIZED;if(this.areAllConsentsPresent(t,this.personalizedPurposes))return Mi.debug("Personalized consent"),ki.PERSONALIZED;if(this.areAllConsentsPresent(t,this.nonPersonalizedPurposes))return Mi.debug("Non-personalized consent"),ki.NON_PERSONALIZED;const i=this.areAllConsentsPresent(t,this.limitedAdsPurposes),r=this.areAllConsentsPresent(n,this.limitedAdsPurposes);return i||r?(Mi.debug("Limited ads consent"),ki.LIMITED_ADS):ki.NONE}static getAndReturnTcData=()=>new Promise((e=>{window.__tcfapi("getTCData",2,((t,n)=>{const i=n&&t?Li.getConsentFromTcData(t):ki.NOT_RECOGNIZED;Mi.debug(`Get TCData: consent => ${i||"NO CONSENT"}`),e(i)}))}))}const Pi="Didomi listeners",xi=new _(Pi);g.addModuleName(Pi,{textColor:"#000",backgroundColor:o("#0faaaa",40)});class zi{controller;consentChanged={event:"consent.changed",listener:()=>{xi.debug("Consent changed"),Li.getAndReturnTcData().then((e=>{xi.debug("Consent type: ",e),this.controller.userConsent.consentType=e,this.controller.targeting.consent.update(e),e!==ki.NONE?googletag.cmd.push((()=>{googletag.pubads().refresh()})):xi.debug("can not reload ads")}))}};noticeClickAgree={event:"notice.clickagree",listener:()=>{xi.debug('The user has clicked on the "Agree and close" button')}};noticeClickDisAgree={event:"notice.clickdisagree",listener:()=>{xi.debug('The user has clicked on the "Decline" button')}};clickMoreInfo={event:"notice.clickmoreinfo",listener:()=>{xi.debug('The user has clicked on the "More information" link')}};constructor(e){this.controller=e}init=()=>{xi.debug("Didomi listeners initialized"),window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push(this.consentChanged,this.noticeClickAgree,this.noticeClickDisAgree,this.clickMoreInfo)}}const Fi="Didomi handler",$i=new _(Fi);g.addModuleName(Fi,{textColor:"#000",backgroundColor:o("#0faaaa",20)});class Bi{static getDidomiInstance=()=>new Promise(((e,t)=>{window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{const{Didomi:n}=window;if(!n)return $i.error("[ Didomi NOT exist ]"),void t(ki.NOT_RECOGNIZED);$i.debug("[ Didomi exist ]"),e(n)}))}));static showNotice=()=>{$i.debug("[ notice shown ]");try{const e=window,{cpexCmpSubscription:t}=e;if(t)t.showModal();else{const{Didomi:e}=window;e?e.notice.show():$i.warn("[ Didomi NOT exist on window ]")}}catch(e){$i.error("[ notice shown error ]",e)}};static addConsentChangedListener=e=>{new zi(e).init()}}const Ui="public_interface",Gi=new _(Ui);g.addModuleName(Ui,{textColor:"#000",backgroundColor:"#AFEEEE"});class Hi{controller;static ALLOWED_PAGE_EVENTS=[Yt.DEFAULT,Yt.ARTICLE_GALLERY,Yt.LIST_ARTICLE,Yt.GALLERY];mountInterfaceAfterAdsLoad=()=>{Gi.debug("Mounting public interface after ads load"),window.__cncRefreshAds=this.refreshAllAdSlots.bind(this),window.__cncAdsNewAdSlots=this.handleNewWrappersInDom.bind(this),window.__cncLazyLoad=this.handleLazyLoad.bind(this),window.__cncPageEvent=this.handlePageEvent.bind(this),window.__cncAdsReload=this.handleAdsReload.bind(this),window.adoR={reload:this.handleAdoR.bind(this)}};mountInterfaceToWindow=()=>{Gi.debug("Mounting public interface to window"),this.mountInterfaceAfterAdsLoad(),Hi.mountLogMethods(),Hi.mountSlotPathMethods(),Hi.mountCmpHandler(),Hi.mountDebugHandler(),Hi.initializeLiveState(),Hi.mountNativeHandler(),window.px2=window.px2||{conf:{},queue:[]},window.pfx_4_gtm_non_oop=Si};getEventType=()=>{const{template:e,isGalleryInArticle:t,isListArticle:n}=this.controller.configuration.pageDefinition;return t?Yt.ARTICLE_GALLERY:e===rt.GALLERY?Yt.GALLERY:n?Yt.LIST_ARTICLE:Yt.DEFAULT};static mountCmpHandler=()=>{window.__cncOpenCmp=()=>{Bi.showNotice()}};static mountDebugHandler=()=>{window.__cncEnableDebug=()=>{localStorage.setItem("cnc_ad_script_debug","true"),Kn()}};static mountNativeHandler=()=>{window.__cncNativeHandler=ge};static initializeLiveState=()=>{(()=>{const e=new qe({adSlots:[],refreshState:{time:{},click:{}},idMap:{}});window.__cncAdScript.liveState=e})()};static mountSlotPathMethods=()=>{Gi.debug("Mounting slot path methods to window");const e=window;e.enableTestGamAccount=hn.enableTestGamAccount,e.disableTestGamAccount=hn.disableTestGamAccount,e.enableDevAdUnitPath=hn.enableDevAdUnitPath,e.disableDevAdUnitPath=hn.disableDevAdUnitPath};static switchOnQueueHandler(){Gi.debug("Switching on queue handler",window.__cncAdsQueue?.items),(()=>{const e=new Ti;window.__cncAdsQueue&&Array.isArray(window.__cncAdsQueue)?(Di.debug("Queue is already populated"),window.__cncAdsQueue.forEach((t=>e.enqueue(t))),window.__cncAdsQueue={items:e.size,push:t=>e.enqueue(t)}):(Di.debug("Queue is not populated"),window.__cncAdsQueue={items:e.size,push:t=>e.enqueue(t)})})()}static mountLogMethods(){window.__cncDownloadLogs=m.downloadLogs}constructor(e){Gi.info("Create PublicInterface module"),this.controller=e,this.mountInterfaceToWindow()}handleLazyLoad=e=>{Gi.debug("Lazy loading ads __cncLazyLoad"),Gi.debug("Arguments:",e),this.controller.lazyLoad.loadAd(e)};refreshAllAdSlots=(...e)=>{Gi.debug("Refreshing all ad slots with arguments:",e),this.controller.refreshHandler.clickRefreshManager.handleClick(Yt.DEFAULT)};handlePageEvent=(e,t)=>{Gi.debug("Handling page event");const n=e&&Hi.ALLOWED_PAGE_EVENTS.includes(e)?e:Yt.DEFAULT;Ci.checkAndCall(n,t),Gi.debug("Handling page event: ",n),this.controller.refreshHandler.clickRefreshManager.handleClick(n)};handleAdoR(e,t){Gi.debug("Ads reload  AdoR.reload"),Gi.debug("Arguments:",e,t);const n=this.getEventType();Gi.debug("eventType",n),this.handlePageEvent(n,t)}handleAdsReload(e,t){Gi.debug("Ads reload __cncAdsReload"),Gi.debug("Arguments:",e,t);const n=this.getEventType();Gi.debug("eventType",n),this.handlePageEvent(n,t)}handleNewWrappersInDom=(...e)=>{Gi.debug("Handling new wrappers in DOM __cncAdsNewAdSlots"),Gi.debug("Arguments:",...e),this.controller.handleNewWrappersInDom(!0)}}const Vi="Screen resize",ji=new _(Vi);g.addModuleName(Vi,{textColor:"#fff",backgroundColor:"#ff0fff"});class Wi{controller;device=nt.DESKTOP;static getDevice=e=>window.innerWidth<e?nt.MOBILE:nt.DESKTOP;commonDeviceMode=()=>{this.controller._configuration.updatePage(),this.controller.handleNewWrappersInDom()};desktopMode=()=>{const{slideUp:e}=this.controller.customFormats;e&&e.close();const{vignette:t}=this.controller.customFormats;t&&Ge.destroy(),this.commonDeviceMode()};mobileMode=()=>{this.commonDeviceMode()};handleResize=e=>{const t=Wi.getDevice(e);this.device!==t&&(this.device=t,ji.debug("Device changed to:",t),t===nt.DESKTOP?this.desktopMode():this.mobileMode())};constructor(e){this.controller=e}init=()=>{const{isResponsive:e,responsiveBreakpoint:t}=this.controller.configuration.pageDefinition;e&&t?(ji.debug("Page is responsive"),this.device=Wi.getDevice(t),window.addEventListener("resize",(()=>this.handleResize(t)))):ji.debug("Page is NOT responsive")}}var qi,Ki;!function(e){e.PIXEL="pixel",e.CONTROL_ZONE="control_zone",e.NONE="none"}(qi||(qi={})),function(e){e.UNKNOWN="unknown",e.SEZNAM="seznam_from_feed",e.CROSS="seznam_cross_domain",e.COOKIE="seznam_domain",e.OTHER="other"}(Ki||(Ki={}));const Xi="Seznam Traffic Controller",Yi=new _(Xi);g.addModuleName(Xi,{textColor:"#CD2024",backgroundColor:"#ffffbf"});class Ji{controller;isSeznamTraffic=!1;source=Ki.UNKNOWN;static COOKIE_NAME="SeznamNewsFeed";static UTM_SOURCE="www.seznam.cz";static UTM_MEDIUM="sekce-z-internetu";static CROSS_SOURCE="seznamnewsfeed";static COOKIE_EXPIRATION=30;get isTraffic(){return this.isSeznamTraffic}static checkSeznamSSSPCookie=()=>{Yi.debug("Check for seznam cookie existence");try{if(ke.getCookie("sssp_session"))Yi.debug("sssp_session cookie already set, skipping creation");else{const e='{media:"sekce-z-internetu"}';Yi.debug("Setting sssp_session cookie");const t={expires:30/1440,domain:`.${xe.getRootDomain()}`,path:"/",secure:"https:"===window.location.protocol,sameSite:"None"};ke.setCookie("sssp_session",encodeURIComponent(e),t),Yi.debug("Successfully set sssp_session cookie")}}catch(e){Yi.error("Error setting sssp_session cookie",e)}try{Yi.important("Running sssp script set cookie");const e="sekce-z-internetu",t=setInterval((()=>{window.sssp&&"function"==typeof window.sssp.setSessionCookie&&(clearInterval(t),Yi.important("SSSP script loaded"),window.sssp.existSessionCookie()?Yi.important("SSSP cookie already set"):(window.sssp.setSessionCookie(e),Yi.important("SSSP setSessionCookie called")))}),100);Yi.important("SSSP script load check interval set"),setTimeout((()=>{t&&(clearInterval(t),Yi.error(" not loaded in time"))}),5e3)}catch(e){Yi.error("Error setting SSSP cookie",e)}};updateTrafficStatus=e=>{Yi.debug("SeznamTrafficController [ Updating traffic status ]",e),this.isSeznamTraffic=e,e&&(Ji.checkSeznamSSSPCookie(),Ji.setCookie(Ji.COOKIE_NAME,"true",Ji.COOKIE_EXPIRATION))};checkUrlParameters=()=>{Yi.debug("SeznamTrafficController [ Checking URL parameters ]");const e=new URLSearchParams(window.location.search);return Ji.isSeznamUtm(e)?(this.source=Ki.SEZNAM,void this.updateTrafficStatus(!0)):Ji.isCrossDomain(e)?(this.source=Ki.CROSS,void this.updateTrafficStatus(!0)):(this.source=Ki.OTHER,void this.updateTrafficStatus(!1))};checkSeznamTraffic=async()=>{Yi.debug("SeznamTrafficController [ Checking Seznam traffic ]");const e=Ji.getCookie(Ji.COOKIE_NAME);Yi.debug(`SeznamTrafficController [ Cookie value: ${e} ]`),e?(Yi.important("SeznamTrafficController [ Seznam traffic cookie found ]"),this.source=Ki.COOKIE,this.updateTrafficStatus(!0)):this.checkUrlParameters()};static getCookie(e){try{const{emojiIcon:t}=Ne;return Yi.debug(`[ Fetching cookie ${t} ]`),ke.getCookie(e)}catch(e){return void Yi.error(" [ Error getting cookie ]",e)}}static setCookie(e,t,n){const i=xe.getRootDomain();Yi.debug(`[ rootDomain: ${i}]`);const{emojiIcon:r}=Ne;try{Yi.debug(`[ Setting cookie ${r} ]`);const t={expires:n/1440,domain:`.${i}`,path:"/",secure:"https:"===window.location.protocol,sameSite:"Lax"};ke.setCookie(e,"true",t)}catch(e){Yi.error("[ Error setting cookie ] ",e)}}static isSeznamUtm(e){Yi.debug("SeznamTrafficController [ Checking Seznam UTM parameters ]");const t=e.get("utm_source")===Ji.UTM_SOURCE&&e.get("utm_medium")===Ji.UTM_MEDIUM;return t&&Yi.important("SeznamTrafficController [ Seznam UTM traffic detected ]"),t}static isCrossDomain(e){Yi.debug("SeznamTrafficController [ Checking cross-domain parameters ]");const t=e.has(Ji.CROSS_SOURCE)&&"true"===e.get(Ji.CROSS_SOURCE);return t&&Yi.important(`SeznamTrafficController [ Seznam cross-domain traffic detected via query parameter: ${Ji.CROSS_SOURCE}=1] `),t}constructor(e){this.controller=e,Yi.debug("SeznamTrafficController instance created")}async init(){try{if(!this.controller.configuration.pageConfiguration.global.seznamTraffic.enabled)return void Yi.debug("SeznamTrafficController [ Seznam traffic disabled in configuration ]");await this.checkSeznamTraffic()}catch(e){Yi.error("SeznamTrafficController [ Error initializing SeznamTrafficController]",e)}}}const Qi="Seznam Traffic handler",Zi=new _(Qi);g.addModuleName(Qi,{textColor:"#CD2024",backgroundColor:o("#ffffbf",20)});const er=[[320,100],[300,120],[500,200]];class tr{controller;trackingVariant;static SCRIPT_URL="//ssp.seznam.cz/static/js/ssp.js";static statusIcon={ON:"✅",OFF:"⛔️"};static TARGETING_KEY="show_vignette";disableAdSlot=e=>{this.controller._configuration.disableAdSlot(e)};disableAdSlots=e=>{e.forEach((e=>{Zi.debug(`[ ** Disabling ${e} ** ]`),this.disableAdSlot(e)}))};disableVignette=()=>{Zi.debug("[ ** Disabling vignette ** ]"),this.disableAdSlot("vignette")};updateSlideupSizes=async()=>{Zi.debug("[ ** Updating slideup sizes ** ]"),this.controller._configuration.updateAdslotSizes("slide_up",er)};loadSeznamScript=async()=>{Zi.debug("SeznamTrafficHandler [ Loading Seznam script ]");const e={id:Xn.SEZNAM_TRAFFIC,src:tr.SCRIPT_URL,type:Yn.JS,options:{async:!0}};return this.controller.externalFiles.fileLoader.loadFile(e)};getMobileAdSlotNameForSwitch=()=>this.controller._configuration.isAdSlotEnabled("mobile_rectangle_4")?"mobile_rectangle_4":"mobile_rectangle_3";switchAdSlots=()=>{const e=["billboard_bottom_1",this.getMobileAdSlotNameForSwitch()];this.disableAdSlots(e),Zi.debug("[ ** Fetching Seznam ad slots ** ]")};handleTracking=()=>{switch(Zi.debug("[ Handling tracking ]"),this.trackingVariant){case qi.PIXEL:Zi.debug("[ Tracking variant: 1x1 pixel ]");break;case qi.CONTROL_ZONE:Zi.debug("[ Tracking variant: control zone ]"),this.loadSeznamScript();break;default:Zi.debug("[ Tracking variant: none ]")}};handleExceptions=e=>{this.disableVignette(),this.updateSlideupSizes(),this.handleTracking(),tr.setTargeting(e),Zi.debug("Current page configuration",this.controller.configuration.pageConfiguration)};static setTargeting=e=>{Zi.debug("[ Setting targeting ]"),e&&googletag.cmd.push((()=>{googletag.pubads().setTargeting(tr.TARGETING_KEY,"true")}))};constructor(e,t=qi.CONTROL_ZONE){this.controller=e,this.trackingVariant=t,Zi.debug("instance created")}init=async()=>{const e=this.controller.seznamTrafficController.isTraffic;Zi.debug(`[ init:  ${e?tr.statusIcon.ON:tr.statusIcon.OFF} ]`),e&&this.handleExceptions(e)}}const nr="Consent Targeting",ir=new _(nr);g.addModuleName(nr,{textColor:"#fff",backgroundColor:o("#6944ce",20)});class rr{static instance=new rr;CONSENT_TARGETING_KEY="consent_target";static getInstance(){return rr.instance}clear(){ir.info("Clearing consent targeting"),googletag.cmd.push((()=>{try{googletag.pubads().clearTargeting(this.CONSENT_TARGETING_KEY)}catch(e){ir.error("Error clearing consent targeting",e)}}))}clearForSlot(e){const t=e.getSlotElementId();ir.debug(`Clearing consent targeting for adslot [${t}]`);try{e.clearTargeting(this.CONSENT_TARGETING_KEY)}catch(e){ir.error(`Error clearing consent targeting for slot [${t}]`,e)}}apply(e){ir.info(`Setting consent targeting [${e}]`),googletag.cmd.push((()=>{try{const t=e||ki.NOT_RECOGNIZED;e?ir.debug(`Setting consent targeting to [${e}]`):ir.warn(`Consent type not recognized. Setting to [${ki.NOT_RECOGNIZED}]`),googletag.pubads().setTargeting(this.CONSENT_TARGETING_KEY,t)}catch(e){ir.error("Error setting consent targeting",e)}}))}applyForSlot(e,t){const n=e.getSlotElementId();ir.debug(`Setting consent targeting for adslot [${n}] to [${t}]`);try{e.setTargeting(this.CONSENT_TARGETING_KEY,t)}catch(e){ir.error(`Error setting consent targeting for slot [${n}]`,e)}}update(e){ir.info(`Updating consent targeting to [${e}]`),this.clear(),this.apply(e),googletag.pubads().getSlots().forEach((t=>{this.clearForSlot(t),this.applyForSlot(t,e)}))}}const or="Targeting",sr=new _(or);g.addModuleName(or,{textColor:"#fff",backgroundColor:"#6944ce"});class ar{controller;consent=rr.getInstance();setPageTargeting=()=>{sr.info("Setting page targeting");const e=this.controller.getPageTargeting();e?ar.applyTargeting(e,"page"):sr.warn("No page targeting data found")};setAudienceTargeting=async()=>{sr.debug("Setting audience targeting");const e=await this.controller.audience.getTargetingData();sr.debug("audienceTargetingData",e),e?ar.applyTargeting(e,"audience"):sr.warn("No audience targeting data found")};static applyTargeting=(e,t)=>{sr.debug(`Applying targeting data for ${t}`,e),googletag.cmd.push((()=>{Object.entries(e).forEach((([e,t])=>{if(t){const n=Array.isArray(t)?t.join(","):t;googletag.pubads().setTargeting(e,n)}}))}))};constructor(e){this.controller=e}setTargeting=async()=>{this.setPageTargeting(),await this.setAudienceTargeting()}}const dr="utils_get_random_string_id",lr=new _(dr);g.addModuleName(dr,{textColor:r("#bada33",20),backgroundColor:"#000"});const cr="audience/piano",ur=new _(cr);g.addModuleName(cr,{textColor:"#000",backgroundColor:"#BADA33"});const gr="c0805a5c871b6f03b4987ee02666f136d5ea656e",hr="cxprnd",fr="cxid",pr="cxsiteid",mr="cxSegments",_r=(e=5e3)=>new Promise(((t,n)=>{const i=Date.now(),r=setInterval((()=>{window.cX&&"function"==typeof window.cX.getUserId&&"function"==typeof window.cX.getPageContext?(clearInterval(r),t()):Date.now()-i>e&&(clearInterval(r),n(ur.warn("Timeouted while waiting for cX object")))}),200)})),br="audience/bisko",vr=new _(br);g.addModuleName(br,{textColor:"#000",backgroundColor:o("#1BD2D7",20)});class wr{controller;constructor(e){vr.info("Audience module initialized"),this.controller=e,(async()=>{try{await _r(),ur.debug("Cx object found, running callback"),e=window.cX,ur.debug("Adding segments to local storage"),(e.callQueue||[]).push(["getUserSegmentIds",{persistedQueryId:gr,callback(e){ur.debug(`DEBUG: cX persistedQueryId is set to: ${gr}`),ur.debug("DEBUG: Piano segments",e),localStorage.setItem(mr,e.join(","))}}]),ur.debug("Cx values after callback",{cX:window.cX,cXUserId:window.cX?.getUserId?.(),cXPageContext:window.cX?.getPageContext?.()})}catch(e){ur.warn("Failed to initialize Piano segments:",e)}var e})()}getTargetingData=()=>(async e=>{if(ur.debug("Getting piano targeting data"),!e.enabled)return ur.important("Piano is disabled in configuration"),null;ur.debug("Piano configuration",e);try{await _r(),ur.debug("Cx values when reading",{cX:window.cX,cXUserId:window.cX?.getUserId?.(),cXPageContext:window.cX?.getPageContext?.()});const t=document.cookie.split("; ").find((e=>e.startsWith("cX_P="))),n=t?t.split("=")[1]:null;ur.debug("cX_P cookie value",n);const i=window.cX?.getUserId?.()||n||((e=32)=>{lr.info(`Generating random string id with length ${e}`);const t=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");return Array.from({length:e},(()=>t[Math.floor(Math.random()*t.length)])).join("")})(),r={[fr]:i,[pr]:e.siteId,[hr]:window.cX?.getPageContext?.()?.pageViewRandom??null,bisko:localStorage.getItem(mr)};return ur.debug("Piano targeting data",r),r}catch(e){return ur.error("Failed to get Piano targeting data:",e),null}})(this.controller.configuration.pageConfiguration.global.piano)}function Sr(e,t,n,i,r,o,s){try{if(window.__iwcshook__&&window.__iwcshook__(),t&&0!==t.length&&n&&i&&r&&o&&s&&(e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],e.googletag.cmd.push)&&!e.googletag.__yb_init){e.googletag.__yb_init=1;var a,d=function(){a=Date.now()},l=window.document.hasFocus();l&&d();try{window.addEventListener("focus",(function(){try{l=!0,d()}catch(e){}})),window.addEventListener("focusin",(function(){try{l=!0,d()}catch(e){}})),window.addEventListener("blur",(function(){try{l=window.document.hasFocus()}catch(e){}})),window.addEventListener("focusout",(function(){try{l=window.document.hasFocus()}catch(e){}}));for(var c="mousedown scroll touchstart touchend".split(" "),u=0;u<c.length;u++)window.addEventListener(c[u],d)}catch(o){}var g,h=function(e){return parseInt(100*e+1e-4)},f=function(){for(var e=[],t={},n=0;n<e.length;n++)try{for(var i=e[n].split("~"),r=h(parseFloat(i[0])),o=h(parseFloat(i[1])),s=i[2].split("#"),a=0,d=0;d<s.length;d++)try{for(var l=parseInt(a*r+o),c=[],u=s[d],g=(-1!==u.indexOf(",")?c=u.split(","):c.push(u),l/100),f=0;f<c.length;f++)t[c[f]]=g;a++}catch(e){}}catch(e){}return t}(),p=function(e,t){try{for(var n=0;n<e.length;n++)if("string"==typeof e[n])for(var i=e[n].split(","),r=0;r<t.length;r++)for(var o=0;o<i.length;o++)if(i[o]===t[r])return!0}catch(e){}return!1},m=function(e){var t="u";try{var o,s=e.getTargeting(n);p(s,i)?t="b":p(s,r)?t="o":(o=googletag.pubads().getTargeting(n),p(o,i)?t="b":p(o,r)&&(t="o"))}catch(e){}return t},_=function(e){var t=[{inclusive_min:0,exclusive_max:7.5,delta:.25},{inclusive_min:7.5,exclusive_max:17.5,delta:.5},{inclusive_min:17.5,exclusive_max:32.5,delta:.75},{inclusive_min:32.5,exclusive_max:52.5,delta:1},{inclusive_min:52.5,exclusive_max:77.5,delta:1.25},{inclusive_min:77.5,exclusive_max:107.5,delta:1.5},{inclusive_min:107.5,exclusive_max:147.5,delta:2},{inclusive_min:147.5,exclusive_max:162.5,delta:3},{inclusive_min:162.5,exclusive_max:163.5,delta:1}];if(e<0)return e;for(var n=h(e),i=0;i<t.length;i++){var r=h((s=t[i]).inclusive_min),o=h(s.exclusive_max),s=h(s.delta);if(r<=n&&n<o)return parseInt((n-r)/s)*s+r}return h(t[t.length-1].inclusive_min)},b=function(e){return parseFloat(e)},v=function(e){var t,n=-1;try{void 0!==e&&2===(t=e.split("x")).length&&(n=parseInt(t[0]*t[1]))}catch(e){}return n},w=function(e){try{if(e.getTargeting&&e.__setTargeting){var t=[],n=m(e);if("o"===n||"b"===n){var i,r=e.getTargeting("amznbid")[0],o=f[r];void 0!==o&&(i=e.getTargeting("amznsz")[0],t.push({bidder:"amznbid",price:[o],size:void 0!==i?"a"+i:-1,area:v(i)}));try{for(var s=e.getTargetingKeys()||[],a=0;a!==s.length;++a){var d,l,c,u=s[a];0===u.indexOf("hb_pb_")&&(d=u.substring(6),void 0!==(l=e.getTargeting(u)[0]))&&(c=e.getTargeting(("hb_size_"+d).substring(0,20))[0],t.push({bidder:d,price:[b(l)],size:void 0!==c?"p"+c:-1,area:v(c)}))}}catch(e){}t.sort((function(e,t){var n,i=t.price[0]-e.price[0];return 0==i?0==(n=t.area-e.area)?t.bidder.localeCompare(e):n:i}))}!function(e,t,n){for(var i=0;i<3;i++){var r="",o=(0<i&&(r=i+1),[-1]),s="nobidder",a=-1;i<=t.length-1&&(o[0]=_(t[i].price[0]).toString(),s=t[i].bidder,a=t[i].size),"o"===n&&o.push("o_"+o[0]),e.__setTargeting("in2w_upa_price"+r,o),e.__setTargeting("in2w_upa_bidder"+r,s),0===i&&e.__setTargeting("in2w_upa_size"+r,a)}}(e,t,n)}}catch(e){}},S=1,y=o,E=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],C={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},A={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},I={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},T={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},O={ios:0,android:1,macos:2,windows:3,others:35},D={chrome:0,safari:1,edge:2,others:35},k={},N={},R={childDirectedTreatment:1,underAgeOfConsent:8,nonPersonalizedAds:64,limitedAds:256,restrictDataProcessing:1024},M={},L=function(e){return U(e,"Win")?"windows":U(e,"like Mac")?"ios":U(e,"Mac")?"macos":U(e,"Android")?"android":"others"},P=function(e){return z(e)?"tablet":x(e)?"smartphone":F(e)?"connecttv":"desktop"},x=function(e){return U(e,"iPod")||U(e,"iPhone")||U(e,"Android")||U(e,"IEMobile")},z=function(e){return U(e,"iPad")||U(e,"Tablet")||U(e,"Android")&&!U(e,"Mobile")||U(e,"Silk")},F=function(e){return U(e,"Roku")||U(e,"SMART-TV")||U(e,"SmartTV")||U(e,"NetCast")||U(e,"crkey")},$=function(e,t){return(t=B(t))||(U(e,"OPR/")||U(e,"Opera")?"others":U(e,"Edg")?"edge":U(e,"Firefox")?"others":U(e,"Chrome")?"chrome":U(e,"Safari")||U(e,"iPad")||U(e,"iPhone")||U(e,"iphone")?"safari":"others")},B=function(e){if(e&&e.brands){if(G(e.brands,"Opera"))return"opera";if(G(e.brands,"Microsoft Edge"))return"edge";if(G(e.brands,"Chrome"))return"chrome"}return null},U=function(e,t){return-1!==e.indexOf(t)},G=function(e,t){return e.some((function(e){return e.brand===t}))},H=function(e,t){if(e)return["0"];for(var n=Math.floor(1e3*Math.random()+1),i=[],r=0,o=0;o<t.length;++o){for(var s=1,a=t[o],d=0,l=0;l<a.length;l++)if(n<=(d+=a[l])){s=l+1;break}1<s&&0<r&&(s=s+r-1),r+=t[o].length;var c=E[s];for(l=0;l<i.length;++l)if(i[l]===c){l=-1;break}-1!==l&&i.push(c)}for(l=0;l<i.length;++l)"1"===i[l]&&(i[l]=Math.random()<=.37?"x":i[l]);return i},V=null,j=null,W=function(e){e=(new Date).getTime()+36e5*e;var t=parseInt(e/36e5,10)%24;return[[1,0],[3,24],[6,32]].map((function(e){return E[Math.floor(t/e[0])+e[1]]}))},q=function(){var e,t,n;return g||(n=function(){var e=function(){var e=window.navigator;return(e=e&&e.userAgent)||""}(),t=function(){var e=window.navigator;return(e=e&&e.userAgentData)||null}();return{os:L(e),dc:P(e),browser:$(e,t)}}(),e=void 0!==D[n.browser]?D[n.browser]:D.others,t=void 0!==O[n.os]?O[n.os]:O.others,n=void 0!==T[n.dc]?T[n.dc]:T.others,g={dc:E[n],os:E[t],browser:E[e]}),g},K=function(e,t){if(void 0===(e=A[e]))throw new Error;return t=void 0!==I[t="top_anchor"!==t&&"bottom_anchor"!==t?t:"anchor"]?I[t]:I.others,{rt:E[e],ivf:E[t]}},X=function(e){var t;return k[e]||(t=function(){var e=window.navigator;return(e=e&&e.language)||""}(),k[e]=ne(t,e)),k[e]},Y=function(e){var t;return N[e]||(t=function(){var e=window.location;return(e=e&&e.hostname)||""}(),N[e]=te(t,e)),N[e]},J=function(e,t,n,i,r,o,s,a){for(var d=[],l=("0"===n||"3"===n?(r=C["2_"+e+t+n+r])&&d.push(r):(r=C["1_"+e+t+n+i])&&d.push(r),[]),c=[],u=0;u<d.length;u++){var g=d[u];for(l.push("-"+g),u=0;u<o.length;++u){var h=g+o[u];l.push(h);for(var f=0;f<a.length;f++){var p=a[f];c.push(h+p)}}for(u=0;u<s.length;++u)for(h="_"+g+s[u],l.push(h),f=0;f<a.length;f++)p=a[f],c.push(h+p)}return{short:l,full:c}},Q=function(e){try{if(!e.length)return"0";for(var t=305419896,n=0;n<e.length;++n)t^=(t<<5)+(t>>2)+e.charCodeAt(n)&4294967295;return(t<0?4294967296+t:t)+""}catch(e){return"-1"}},Z=function(e,t){try{var n=t?(e+"").toLowerCase():e+"";return n.length+"_"+Q(n)}catch(e){return"-1"}},ee=function(e){var t;try{t=""===e||null==e?"-2":Z(e,!0)}catch(e){t="-1"}return t},te=function(e,t){var n,i,r=[];try{""===e||null==e?r=["-2"]:(n=e.split(".")).length<2?r=["-3"]:(i=n[n.length-2]+"."+n[n.length-1],r.push(Z(i,!0)))}catch(e){r=["-1"]}if(!t)for(var o=r.length,s=0;s<o;++s)r.push("o_"+r[s]);return r},ne=function(e,t){var n,i,r,o,s,a=[];try{""===e||null==e?a=["-2"]:(i=(n=e.split("-"))[0],r=Z(i,!0),a.push(r),1<n.length&&(o=n[0]+"-"+n[1],s=Z(o,!0),a.push(s)))}catch(e){a=["-1"]}if(!t)for(var d=a.length,l=0;l<d;++l)a.push("o_"+a[l]);return a},ie=function(e,t){var n=["u"];try{if(""===e||null==e)throw n=["u1"],new Error("u1");var i=window.document.getElementById(e);if(null==i)throw n=["u2"],new Error("u2");var r=window.innerHeight;if(void 0===r||r<=0)throw n=["u3"],new Error("u3");var o,s,a=i.getBoundingClientRect(),d=void 0!==a.y?a.y:a.top;if(void 0===d)throw n=["u4"],new Error("u4");n=d<0?["a","a"+(o=(o=parseInt(d/r,10)-1)<-2?-2:o)]:d<r?["i","i"+(parseInt(d/(r/3),10)+1)]:["b","b"+(s=9<(s=parseInt((d-r)/r,10)+1)?9:s),"bg"+Math.ceil(s/3)]}catch(e){}if(!t)for(var l=n.length,c=0;c<l;++c)n.push("o_"+n[c]);return n},re=function(e){var t=[];try{var n,i=0;for(n in R)!!(2751&R[n])&&t.push(R[n].toString(36)),i+=R[n];t.push(i.toString(36))}catch(e){t=["-1"]}if(!e)for(var r=t.length,o=0;o<r;++o)t.push("o_"+t[o]);return t},oe=function(e){try{return M[e]||(M[e]=re(e)),M[e]}catch(e){return["-1"]}},se=function(e,t){return(t-=(e+="").length)<=0?e:function(e,t){for(var n="",i=0;i<t;i++)n+="0";return n}(0,t)+e},ae=function(){try{var e=1+parseInt(20*Math.random(),10);return se(e,2)}catch(e){return"-1"}},de=function(e,t){var n=[];try{var i=(new Date).getTime()+36e5*e,r=parseInt(i/36e5,10)%24,o=Math.floor(r);n.push(se(o,2))}catch(e){n=["-1"]}if(!t)for(var s=n.length,a=0;a<s;++a)n.push("o_"+n[a]);return n},le=function(e){var t=[];try{var n,i=l?"1":"0",r=(n=null==a?"0":(Date.now()-a)/1e3<=3?"1":"2","visible"===window.document.visibilityState?"1":"0");t.push(i+n+r)}catch(e){t=["-1"]}if(!e)for(var o=t.length,s=0;s<o;++s)t.push("o_"+t[s]);return t},ce=function(e){try{if(e.__should_skip_labeling)e.__should_skip_labeling=!1;else{var t,n=m(e),i="banner";if(e.__is_oop)i=googletag.enums.OutOfPageFormat[e.__oop_format]?googletag.enums.OutOfPageFormat[e.__oop_format].toLowerCase():"out_of_page";else try{if(e.__sz_mapping)for(var r=Math.round(window.innerWidth),o=Math.round(window.innerHeight),s=0;s<e.__sz_mapping.length;s++){var a=e.__sz_mapping[s][0];if(a[0]<=r&&a[1]<=o){t=e.__sz_mapping[s][1];break}}else e.__def_sizes&&(t=e.__def_sizes)}catch(e){}var d=function(e,t,n,i,r,o,s,a){try{if("u"===n)return[{key:"in2w_key16",values:[]},{key:"in2w_key20",values:[]},{key:"in2w_key21",values:null},{key:"in2w_key23",values:null},{key:"in2w_key24",values:[]},{key:"in2w_key26",values:[]},{key:"in2w_key27",values:[]},{key:"in2w_key28",values:[]},{key:"in2w_key30",values:null},{key:"in2w_key31",values:[]},{key:"in2w_key33",values:[]},{key:"in2w_key34",values:null},{key:"in2w_key35",values:null},{key:"in2w_upa_bidder",values:null},{key:"in2w_upa_price",values:[]},{key:"in2w_upa_size",values:null},{key:"in2w_upa_bidder2",values:null},{key:"in2w_upa_price2",values:[]},{key:"in2w_upa_bidder3",values:null},{key:"in2w_upa_price3",values:[]}];for(var d=K(i,r),l=q(),c=d.rt,u=d.ivf,g=l.dc,h=l.os,f=l.browser,p="b"===n,m=H(p,t),_=function(e,t){return e?["0"]:((null===V||null===j||36e5<Date.now()-j)&&(V=H(!1,t),j=Date.now()),V)}(p,t),b=W(e),v=J(c,u,g,h,f,m,_,b),w=(p&&(v.short=[]),[]),S=(o&&o.length&&w.push(function(e){for(var t,n,i=e,r=(("fluid"===e||"number"==typeof i[0]&&"number"==typeof i[1])&&(i=[e]),[]),o=1e5,s=1,a=1e5,d=1,l=0;l<i.length;l++)"fluid"===i[l]?r.push(i[l]):((t=i[l][0])<o&&(o=t),s<t&&(s=t),(n=i[l][1])<a&&(a=n),d<n&&(d=n),r.push(t+"x"+n));return r.sort((function(e,t){return e<t?-1:1})),e=r.length,r.push(o),r.push(s),r.push(a),r.push(d),r.push(e),Q(r.join(","))}(o)),[{key:"in2w_key16",values:v.short},{key:"in2w_key20",values:v.full},{key:"in2w_key21",values:w}]),y=["in2w_key23","in2w_key24","in2w_key26","in2w_key27","in2w_key28","in2w_key30","in2w_key31","in2w_key33","in2w_key34","in2w_key35"],E=0;E<y.length;E++)try{switch(y[E]){case"in2w_key23":S.push({key:y[E],values:ee(s)});break;case"in2w_key24":S.push({key:y[E],values:Y(p)});break;case"in2w_key26":S.push({key:y[E],values:X(p)});break;case"in2w_key27":S.push({key:y[E],values:ie(a,p)});break;case"in2w_key28":S.push({key:y[E],values:oe(p)});break;case"in2w_key30":S.push({key:y[E],values:ae()});break;case"in2w_key31":S.push({key:y[E],values:de(e,p)});break;case"in2w_key33":S.push({key:y[E],values:le(p)});break;case"in2w_key34":S.push({key:y[E],values:"w33"});break;case"in2w_key35":S.push({key:y[E],values:"9sng"})}}catch(e){}return S}catch(e){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}}(S,y,n,"gpt",i,t,e.getAdUnitPath(),e.getSlotElementId());for(s=0;s<d.length;s++)e.__setTargeting(d[s].key,d[s].values)}}catch(e){}},ue=function(){try{var n=new Date,i=new Date(n.toLocaleString("en-US",{timeZone:"UTC"})),r=new Date(n.toLocaleString("en-US",{timeZone:s}));S=(r.getTime()-i.getTime())/36e5}catch(n){S=1}var o=["slotRequested","slotResponseReceived","slotRenderEnded","slotOnload","impressionViewable","slotVisibilityChanged"],a=o.slice(1),d=e.googletag.pubads(),l=(d.__product_version=4,d.__pkgv="33",d.__build_id="9sng",d.__hook_version=8,e.googletag.__display=e.googletag.display,e.googletag.display=function(t){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);try{var r=this.pubads().getSlots();for(i=0;i<r.length;i++){var o=r[i];w(o)}}catch(t){}return e.googletag.__display.apply(d,n)}.bind(e.googletag),d.__refresh=d.refresh,d.refresh=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);try{for(e=e||this.getSlots(),n=0;n<e.length;n++){var i,r=e[n],o=(w(r),i=s=c=l=a=void 0,r);try{var s,a=null,l=null,c=m(o);"o"!==c&&"b"!==c||(0<(s=o.__refreshCount||0)&&(l="1"),a=c+((i=s)<11?i:i<26?"10-":i<51?"25-":i<101?"50-":"100-")),o.setTargeting("in2w_key15",a),o.__setTargeting("in2w_key22",l)}catch(e){}}}catch(e){}d.__refresh.apply(d,t)}.bind(d),d.__setPrivacySettings=d.setPrivacySettings,d.setPrivacySettings=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);try{void 0!==e.childDirectedTreatment&&(null===e.childDirectedTreatment?R.childDirectedTreatment=1:e.childDirectedTreatment?R.childDirectedTreatment=4:R.childDirectedTreatment=2),void 0!==e.underAgeOfConsent&&(null===e.underAgeOfConsent?R.underAgeOfConsent=8:e.underAgeOfConsent?R.underAgeOfConsent=32:R.underAgeOfConsent=16),void 0!==e.nonPersonalizedAds&&(e.nonPersonalizedAds?R.nonPersonalizedAds=128:R.nonPersonalizedAds=64),void 0!==e.limitedAds&&(e.limitedAds?R.limitedAds=512:R.limitedAds=256),void 0!==e.restrictDataProcessing&&(e.restrictDataProcessing?R.restrictDataProcessing=2048:R.restrictDataProcessing=1024),M[!0]=re(!0),M[!1]=re(!1)}catch(e){}return d.__setPrivacySettings.apply(d,t)}.bind(d),d.__setTargeting=d.setTargeting,d.__clearTargeting=d.clearTargeting,e.googletag.__defineOutOfPageSlot=e.googletag.defineOutOfPageSlot,e.googletag.__defineSlot=e.googletag.defineSlot,d.setTargeting=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=d.__setTargeting.apply(d,e);try{var i=this.getSlots();for(t=0;t<i.length;t++){var r=i[t];ce(r)}}catch(e){}return n}.bind(d),d.clearTargeting=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=d.__clearTargeting.apply(d,e);try{var i=this.getSlots();for(t=0;t<i.length;t++){var r=i[t];ce(r)}}catch(e){}return n}.bind(d),function(e){e.__setTargeting=e.setTargeting,e.setTargeting=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.__setTargeting.apply(e,t);return ce(e),i}.bind(e)}),c=function(e){e.__clearTargeting=e.clearTargeting,e.clearTargeting=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.__clearTargeting.apply(e,t);return ce(e),i}.bind(e)},u=function(e){e.__updateTargetingFromMap=e.updateTargetingFromMap,e.updateTargetingFromMap=function(){try{for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);e.__updateTargetingFromMap.apply(e,t),w(e)}catch(t){}return e}.bind(e)};e.googletag.defineOutOfPageSlot=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.googletag.__defineOutOfPageSlot.apply(e.googletag,t);return i&&(i.__is_oop=!0,i.__oop_format=t[1],l(i),c(i),u(i),ce(i)),i}.bind(e.googletag),e.googletag.defineSlot=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=e.googletag.__defineSlot.apply(e.googletag,t);return i&&(i.__is_oop=!1,i.__def_sizes=arguments[1],l(i),c(i),u(i),i.__defineSizeMapping=i.defineSizeMapping,i.defineSizeMapping=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=i.__defineSizeMapping.apply(i,t);return i.__sz_mapping=e,ce(i),r}.bind(i),ce(i)),i}.bind(e.googletag);try{for(var g=d.getSlots(),h=0;h<g.length;h++)try{var f=g[h];void 0!==f.__setTargeting||f.getOutOfPage()||(f.__is_oop=!1,l(f),c(f),ce(f))}catch(n){}}catch(n){}d.__reportEvents=function(e,t){if(d.__eventProxy&&d.__eventProxy[e])for(var n=0;n<d.__eventProxy[e].length;n++)try{d.__eventProxy[e][n](t)}catch(e){}},d.__addEventListener=d.addEventListener,d.addEventListener=function(e,n){if(-1!==o.indexOf(e))try{return this.__eventProxy=this.__eventProxy||{},this.__eventProxy[e]?(-1===this.__eventProxy[e].indexOf(n)&&this.__eventProxy[e].push(n),d):(this.__eventProxy[e]=[n],d.__addEventListener(e,(function(n){var i=n.slot;if(i.__skipEvent&&i.__skipEvent[e]&&(new Date).getTime()-i.__skipEvent[e]<3e3)delete i.__skipEvent[e];else if(-1===a.indexOf(e)||!function(e){return(e=e.__getResponseInformation?e.__getResponseInformation():e.getResponseInformation())&&e.advertiserId&&-1!==t.indexOf(e.advertiserId)}(i))for(var r=0;r<d.__eventProxy[e].length;r++)try{d.__eventProxy[e][r](n)}catch(n){}})))}catch(n){}return d.__addEventListener(e,n)}.bind(d),d.__removeEventListener=d.removeEventListener,d.removeEventListener=function(e,t){try{var n=this.__eventProxy;if(n&&n[e])return-1!==n[e].indexOf(t)&&(n[e].splice(n[e].indexOf(t),1),!0)}catch(e){}return d.__removeEventListener(e,t)}.bind(d),d.addEventListener("slotRequested",(function(e){delete(e=e.slot).__responseInfo,e.__refreshCount=e.__refreshCount||0,++e.__refreshCount}))};e.googletag.cmd.unshift?(e.googletag.cmd.unshift(ue),e.googletag.cmd.unshift=function(t){e.googletag.cmd.splice(1,0,t)}):e.googletag.cmd.push(ue)}}catch(o){}}const yr="Intowow",Er=new _(yr);g.addModuleName(yr,{textColor:"#000",backgroundColor:r("#BADA33",20)});class Cr{static OPT_RATIO=.9;static BILLING_KEY="intowow_optimized";isOptIn;canRun;setAdTargeting(){const e={[Cr.BILLING_KEY]:this.isOptIn?"true":"false"};ar.applyTargeting(e,"intowow")}applyTrafficOptimizer(){Er.debug("Applying Traffic Optimizer with isOptIn:",this.isOptIn);try{Sr(window,[-404],Cr.BILLING_KEY,["false"],["true"],[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]],"Europe/Prague"),this.setAdTargeting()}catch(e){Er.error("Error in applying traffic optimizer",e)}}constructor(e=I.ENABLE_INTOWOW){this.canRun=e,Er.debug("Initialized, it can run: ",this.canRun),this.isOptIn=Math.random()<Cr.OPT_RATIO}init=async()=>{this.canRun?this.applyTrafficOptimizer():Er.warn("cannot run - is disabled")}}const Ar="base tracking module",Ir=new _(Ar);g.addModuleName(Ar,{textColor:"#000",backgroundColor:r("#BADA33",20)});class Tr{static scriptVersion="2";adsMonitoringStartTime;controller;constructor(e){this.controller=e,this.adsMonitoringStartTime="number"==typeof window.__cncAdsMonitoringStartTime?window.__cncAdsMonitoringStartTime:Date.now()}static pushToDataLayer(e,t){const n=window?.dataLayer;n?n.push({event:e,adops:t}):Ir.error("DataLayer is not available.")}}const Or="user consent",Dr=new _(Or);g.addModuleName(Or,{textColor:"#000",backgroundColor:"#0faaaa"});class kr{controller;didomiInstance=null;consents=[];_consentType=ki.NOT_RECOGNIZED;PURPOSES=["cookies","select_basic_ads","select_personalized_ads","create_content_profile","select_personalized_content","create_ads_profile","measure_ad_performance","measure_content_performance","market_research","improve_products"];VENDORS=[[Ni.CARODA,954],[Ni.CNC,"c:czechnews-nJYjk3Bf"],[Ni.CPEX,570],[Ni.GEMIUS,328],[Ni.GOOGLE_AD,"google"],[Ni.PFX,732],[Ni.R2B2,1235],[Ni.SEZNAM,621]];FILE_ID_TO_VENDOR={[Xn.CMP]:Ni.CPEX,[Xn.GPT]:Ni.CNC,[Xn.HB_SETTINGS]:Ni.CPEX,[Xn.GLOBAL_CSS]:Ni.GOOGLE_AD,[Xn.CARODA]:Ni.CARODA,[Xn.PFX]:Ni.PFX,[Xn.R2B2]:Ni.R2B2,[Xn.SEZNAM_TRAFFIC]:Ni.SEZNAM};get vendor(){return this.VENDORS}get consentType(){return this._consentType}set consentType(e){this._consentType=e}getConsents=()=>this.PURPOSES.map((e=>{if(!this.didomiInstance)throw new Error("Didomi instance not initialized");return this.didomiInstance.getUserConsentStatusForPurpose(e)}));logConsentDetails(){Dr.debug("------- CONSENT STATUS DETAILS -------"),this.consents.length<=0?Dr.warn("No consents found"):this.PURPOSES.forEach(((e,t)=>{kr.logConsentStatusForPurpose(e,this.consents[t],t)}))}logVendorStatus(e,t){const n=this.getStatusForVendor(t);Dr[n?"debug":"warn"](`${e} / status: `,n)}vendorStatusLog=()=>{Dr.debug("------- VENDOR STATUS -------"),this.VENDORS.forEach((([e,t])=>this.logVendorStatus(e,t)))};logLegitimateInterests(){if(!this.didomiInstance)return void Dr.error("Didomi instance not initialized");const{legitimate_interest:e}=this.didomiInstance.getUserStatus().purposes,t=e.enabled.map((e=>`\t\t\t[ ${e} ]`)).join("\n");Dr.debug(`------- LEGITIMATE INTERESTS -------\n${t}`)}initDidomiInstance=async()=>{if(this.didomiInstance=await Bi.getDidomiInstance(),!this.didomiInstance)throw new Error("Didomi instance could not be initialized")};static getConsentType(e){const[t,n,i,r,o,s,a]=e;return t&&n&&i&&r&&o&&s&&a?ki.PERSONALIZED:t&&r&&o&&s&&a?ki.NON_PERSONALIZED:r&&o&&s&&a?ki.LIMITED_ADS:ki.NONE}static logConsentStatusForPurpose(e,t,n){Dr[t?"debug":"warn"](`(${n+1})  ${e}: `,t)}static areAllPurposesStatusFalse=e=>e.every((e=>void 0===e.status));static areAllVendorsStatusFalseExceptCNCenter=e=>e.every((e=>e.vendor===Ni.CNC?!0===e.status:!1===e.status||void 0===e.status));static payOrOkConsentHandler=(e,t,n)=>{Dr.debug("payOrOkConsentHandler"),e===ki.NONE&&(kr.areAllPurposesStatusFalse(n)?(Dr.important("All vendors are false (except CNC), calling CMP"),Bi.showNotice()):Dr.debug("All purposes are NOT false"))};constructor(e){this.controller=e}init=async()=>{await this.initDidomiInstance(),this.consents=this.getConsents(),this._consentType=kr.getConsentType(this.consents),Bi.addConsentChangedListener(this.controller),this.controller.tracking.callEvent(Ct.CONSENT)};getStatusForVendor=e=>this.didomiInstance?this.didomiInstance.getUserConsentStatusForVendor(e):(Dr.error("Didomi instance not initialized"),null);getVendorsStatus=()=>this.VENDORS.map((e=>({vendor:e[0],status:this.getStatusForVendor(e[1])??!1})));getPurposesStatus=()=>this.PURPOSES.map((e=>this.didomiInstance?{purpose:e,status:this.didomiInstance.getUserConsentStatusForPurpose(e)}:(Dr.error("Didomi instance not initialized"),{purpose:e,status:!1})));getLegitimateInterests=()=>this.didomiInstance?this.didomiInstance.getUserStatus().purposes.legitimate_interest:(Dr.error("Didomi instance not initialized"),null);findVendorIdByName=e=>{const t=this.VENDORS.find((([t])=>t===e));return t?t[1]:(Dr.error(`Vendor with name ${e} not found`),null)};findVendorIdByFileId=e=>{const t=this.FILE_ID_TO_VENDOR[e];if(!t)return Dr.error(`Vendor for FileId ${e} not found`),null;const n=this.VENDORS.find((([e])=>e===t));return n?n[1]:(Dr.error(`Vendor ${t} not found in VENDORS array`),null)};logConsentStatus=()=>{this.vendorStatusLog(),this.logConsentDetails(),this.logLegitimateInterests()}}const Nr="tracking module",Rr=new _(Nr);g.addModuleName(Nr,{textColor:"#000",backgroundColor:"#BADA33"});class Mr extends Tr{callBeforeDisplayEvent(e){if(null===this.adsMonitoringStartTime)return void Rr.error("adsMonitoringStartTime is not set.");const t=Date.now()-this.adsMonitoringStartTime;Rr.debug(`Time before display call: ${t}ms`);const n={tracking:{beforeDisplayCall:{time:t,scriptVersion:Mr.scriptVersion}}};Mr.pushToDataLayer(e,n)}callConsentEvent=async e=>{const{userConsent:t}=this.controller,{consentType:n}=t,i=t.getVendorsStatus(),r=t.getPurposesStatus(),o=t.getLegitimateInterests(),s={tracking:{consent:{scriptVersion:Mr.scriptVersion,type:n,trackingData:{purposes:r,vendors:i,legitimateInterest:o}}}};Rr.debug("Consent event data: ",s),Mr.pushToDataLayer(e,s),kr.payOrOkConsentHandler(n,i,r)};callEvent(e){switch(e){case Ct.BEFORE_DISPLAY_CALL:this.callBeforeDisplayEvent(e);break;case Ct.CONSENT:this.callConsentEvent(e);break;default:Rr.error(`Unknown event name: ${e}`)}}}const Lr="utils_is_dom_content_loaded",Pr=new _(Lr);g.addModuleName(Lr,{textColor:r("#bada33",20),backgroundColor:"#000"});const xr="controller",zr=new _(xr);g.addModuleName(xr,{textColor:"#000000",backgroundColor:"#ffffff"});class Fr{static instance=new Fr;idMap={};slotPath;adSlots=[];adSlotServices;activeTabHandler=Bt.getInstance();audience;_configuration;externalFiles;gpt;refreshHandler;repeaterHandler;seznamTrafficController;screenResize;seznamTrafficHandler;targeting;tracking;publicInterface;headerBidding;userConsent;customFormats;pseudoLazyLoad;lazyLoad;ppid;get configuration(){if(!this._configuration)throw new Error("Configuration not initialized");return this._configuration.getConfiguration()}createAdSlots=()=>{ft(this.configuration.pageConfiguration,this.configuration.pageDefinition),this.idMap=this.adSlotServices.createIdMapOfSlotTemplatesAndPrepareDomWrappers(this.configuration.pageConfiguration),Xe(this.idMap),this.adSlots=this.adSlotServices.createAdSlotsFromMap(this.idMap,this.configuration.pageConfiguration)};static getInstance=()=>Fr.instance;constructor(){zr.info("Initializing configuration"),this.userConsent=new kr(this),this._configuration=new Gn(this),this.externalFiles=new di(this),this.slotPath=new mn(this),this.headerBidding=new fi(this),this.adSlotServices=new Nt(this),this.lazyLoad=new Lt(this),this.publicInterface=new Hi(this),this.refreshHandler=new Xt(this),this.ppid=new ui,this.gpt=new Et(this),this.audience=new wr(this),this.repeaterHandler=new dn(this),this.screenResize=new Wi(this),this.seznamTrafficController=new Ji(this),this.seznamTrafficHandler=new tr(this),this.targeting=new ar(this),this.tracking=new Mr(this),this.customFormats=new We(this),this.pseudoLazyLoad=new _i(this),window.googletag=window.googletag||{cmd:[]}}async run(){zr.info("Running ad script controllers main logic"),await(Pr.info("Check if DOM content is loaded"),new Promise((e=>{"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>{e(!0)}),!1):e(!0)}))),((()=>{const e=new URLSearchParams(window.location.search);return!!e.has(Wn)&&(console.log("Debug enabled via query param"),"0"===e.get(Wn)?(localStorage.setItem(jn,"false"),!1):(localStorage.setItem(jn,"true"),!0))})()||"true"===localStorage.getItem(jn))&&(Kn(),(()=>{const e=document.createElement("link");e.rel="stylesheet",e.href=`${qn()}/cnc-ads-debug.css`,document.head.appendChild(e)})()),zr.info("Debug interface setup"),await this.seznamTrafficController.init(),await this.externalFiles.init(),zr.info("External module initialized"),await this.userConsent.init(),await this.externalFiles.loadNonConsentFiles(),this.userConsent.logConsentStatus();const e=this.userConsent.consentType;zr.info(`Consent acquired, consent type [${e}]`),await this.externalFiles.loadDependingOnConsentFiles(),(new Cr).init(),await this.slotPath.init(),await this.seznamTrafficHandler.init(),zr.important("BEFORE GPT INIT"),this.gpt.initialize(),zr.important("AFTER GPT INIT"),this.targeting.consent.apply(e),this.createAdSlots(),zr.info("Ad slots created",this.adSlots),await Nt.createAdServerSlots(this.adSlots),zr.info("Ad server slots defined"),this.pseudoLazyLoad.initialize(),this.screenResize.init(),this.refreshHandler.init();const t=await this.headerBidding.run();zr.info("Header bidding done",t),this.configuration.pageConfiguration.global.engine!==Vn.SPA&&(await this.adSlotServices.displayAdSlots(),zr.info("Ad slots displayed")),Hi.switchOnQueueHandler()}getServerSlots(){return this.adSlots.map((e=>e.adServerSlot)).filter((e=>void 0!==e))}getAdSlotByIdDOM=e=>this.adSlots.find((t=>t.idDOM===e));getPageTargeting=()=>this._configuration.pageTargeting;refreshAllAdSlots=()=>{zr.info("Refresh all ad slots"),this.adSlots.forEach((e=>{e&&e.refresh()}))};createAdSlot=async e=>{const t=this.getAdSlotByIdDOM(e);if(t)return zr.warn(`Ad slot found ${e} (skipping creation)`,t),t;const n=this.configuration.pageConfiguration.adTemplates.find((t=>e===Ot(t.slotName)));if(!n)return zr.error(`Ad slot template with ID ${e} not found.`),null;const i=new tt(n,e,!0);return this.adSlots.push(i),zr.debug("Ad slot created",t),await this.adSlotServices.displayAdSlot(i),i};handleNewWrappersInDom(e=!1){zr.info("Handling new wrappers in DOM"),ft(this.configuration.pageConfiguration,this.configuration.pageDefinition);const t=this.adSlotServices.createIdMapOfSlotTemplatesAndPrepareDomWrappers(this.configuration.pageConfiguration),n=this.idMap,i=this.adSlotServices.cleanUpAdSlots(n,t);zr.important(`Ad slots changed on new wrappers: ${i}`),i?(this.idMap=t,Xe(this.idMap),this.adSlots=this.adSlotServices.createAdSlotsFromMap(this.idMap,this.configuration.pageConfiguration),Nt.createAdServerSlots(this.adSlots),zr.debug("Ad server slots redefined on new wrappers"),this.adSlotServices.displayAdSlots(),zr.info("Ad slots displayed on new wrappers")):e&&(zr.important("Adslots did not change. Forcing ad slots refresh"),this.refreshHandler.clickRefreshManager.handleClick(Yt.DEFAULT))}}g.addModuleName("utility",{textColor:"#FFA500",backgroundColor:"#000"});new _("utility").important("\n\t\r\n██████╗ ███████╗██████╗ ██╗   ██╗ ██████╗ \r\n██╔══██╗██╔════╝██╔══██╗██║   ██║██╔════╝ \r\n██║  ██║█████╗  ██████╔╝██║   ██║██║  ███╗\r\n██║  ██║██╔══╝  ██╔══██╗██║   ██║██║   ██║\r\n██████╔╝███████╗██████╔╝╚██████╔╝╚██████╔╝\r\n╚═════╝ ╚══════╝╚═════╝  ╚═════╝  ╚═════╝ \r\n\n>> >> >> >>     [ 7.1.9 ]     << << << <<\n\t"),Fr.getInstance().run()})()})();</script>
</body>
</html>
