<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>FastList.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGx4CAgAAMfwBBAQt/AEEQC38AQZIBC38AQbICC38AQf4CC38AQYYDC38AQYwDC38AQZIDC38AQZoDC38AQaADC38AQaYDC38AQcwDCwfsgICAAA0GbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwuKhICAAAwAQQELDXVzZSUyMHN0cmljdAAAQRALgQElMjBkb2VzJTIwbm90JTIwcmVmZXJlbmNlJTIwYW4lMjBleGlzdGluZyUyMG5vZGUuJTIwJTIwQ3JlYXRlJTIwYSUyMG5vZGUlMjB3aXRoJTIwdGhpcyUyMGtleSUyMGZpcnN0JTIwdXNpbmclMjBhbiUyMGFkZCUyMG1ldGhvZAAAQZIBC58BJTIwYWxyZWFkeSUyMHJlZmVycyUyMHRvJTIwYW4lMjBleGlzdGluZyUyMG5vZGUuJTIwJTIwVXNlJTIwJ3NldCclMjB0byUyMHVwZGF0ZSUyMGFuJTIwZXhpc3RpbmclMjBub2RlJTIwb3IlMjBtYWtlJTIwc3VyZSUyMHRvJTIwcGFzcyUyMGluJTIwYSUyMHVuaXF1ZSUyMGtleS4AAEGyAgtLTGlzdCUyMGFscmVhZHklMjBoYXMlMjBlbGVtZW50cy4lMjAlMjBVc2UlMjBhZGQlMjBiZWZvcmUlMkZhZnRlciUyMGluc3RlYWQAAEH+AgsHcGFyZW50AABBhgMLBW5leHQAAEGMAwsFbmV4dAAAQZIDCwdwYXJlbnQAAEGaAwsFbnVsbAAAQaADCwVudWxsAABBpgMLJXh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eAAAQcwDCwJ4AA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
(() => {
    const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                (function (context) {
                    lS(0, 0);
                    var FastList = function () {
                        this.head = null;
                        this.tail = null;
                        this.length = 0;
                        this.listIndex = {};
                    };
                    FastList.prototype._mustFind = function (keyAt) {
                        var node = this.listIndex[keyAt];
                        if (node)
                            return node;
                        throw new Error(keyAt + lS(0, 1));
                    };
                    FastList.prototype._mustNotFind = function (keyAt) {
                        if (this.listIndex[keyAt])
                            throw new Error(keyAt + lS(0, 2));
                    };
                    FastList.prototype._add = function (val, key) {
                        key = key || getUUID();
                        try {
                            (() => {
                                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._mustNotFind(key);
                                        }
                                    }
                                });
                                const __exports = __callInstance3.exports;
                                return __exports.data();
                            })();
                            var newNode = new Node({
                                value: val,
                                key: key
                            });
                            this.listIndex[key] = newNode;
                            this.length++;
                            return newNode;
                        } catch (e) {
                            throw e;
                        }
                    };
                    FastList.prototype._addFirst = function (val, key) {
                        if (!this.length)
                            this.head = this.tail = this._add(val, key);
                        else
                            throw new Error(lS(0, 3));
                        return this.head.__key__;
                    };
                    FastList.prototype._placeIn = function (newNode, keyAt, placeAbove) {
                        try {
                            var nodeAt = this._mustFind(keyAt);
                            var placeAt = placeAbove ? lS(0, 4) : lS(0, 5);
                            var relation = placeAbove ? lS(0, 6) : lS(0, 7);
                            (() => {
                                const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                newNode[placeAt] = nodeAt[placeAt];
                                                nodeAt[placeAt][relation] = newNode;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance0.exports;
                                return __exports.data(nodeAt[placeAt] ? 1 : 0);
                            })();
                            newNode[relation] = nodeAt;
                            nodeAt[placeAt] = newNode;
                            (() => {
                                const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            this.head = newNode;
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            this.tail = newNode;
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance2.exports;
                                                return __exports.data(!placeAbove && nodeAt === this.tail ? 1 : 0);
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance1.exports;
                                return __exports.data(placeAbove && nodeAt === this.head ? 1 : 0);
                            })();
                        } catch (e) {
                            throw e;
                        }
                    };
                    FastList.prototype.addBefore = function (keyAt, val, key) {
                        try {
                            var newNode = this._add(val, key);
                            (() => {
                                const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._placeIn(newNode, keyAt, true);
                                        }
                                    }
                                });
                                const __exports = __callInstance2.exports;
                                return __exports.data();
                            })();
                            return newNode.__key__;
                        } catch (e) {
                            throw e;
                        }
                    };
                    FastList.prototype.addAfter = function (keyAt, val, key) {
                        try {
                            var newNode = this._add(val, key);
                            (() => {
                                const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._placeIn(newNode, keyAt, false);
                                        }
                                    }
                                });
                                const __exports = __callInstance1.exports;
                                return __exports.data();
                            })();
                            return newNode.__key__;
                        } catch (e) {
                            throw e;
                        }
                    };
                    FastList.prototype.addToTail = function (val, key) {
                        if (this.head)
                            return this.addAfter(this.tail.__key__, val, key);
                        return this._addFirst(val, key);
                    };
                    FastList.prototype.addToHead = function (val, key) {
                        if (this.head)
                            return this.addBefore(this.head.__key__, val, key);
                        return this._addFirst(val, key);
                    };
                    FastList.prototype.removeAt = function (keyAt) {
                        var nodeAt = this.listIndex[keyAt];
                        if (nodeAt) {
                            (() => {
                                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            nodeAt.parent.next = nodeAt.next;
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            this.head = nodeAt.next;
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance4.exports;
                                                return __exports.data(this.head === nodeAt ? 1 : 0);
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance3.exports;
                                return __exports.data(nodeAt.parent ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            nodeAt.next.parent = nodeAt.parent;
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            this.tail = nodeAt.parent;
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance6.exports;
                                                return __exports.data(this.tail === nodeAt ? 1 : 0);
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance5.exports;
                                return __exports.data(nodeAt.next ? 1 : 0);
                            })();
                            delete this.listIndex[keyAt];
                            this.length--;
                            return nodeAt.value;
                        }
                    };
                    FastList.prototype.removeFromHead = function () {
                        if (this.head)
                            return this.removeAt(this.head.__key__);
                        return null;
                    };
                    FastList.prototype.removeFromTail = function () {
                        if (this.tail)
                            return this.removeAt(this.tail.__key__);
                        return null;
                    };
                    FastList.prototype.get = function (keyAt) {
                        var node = this.listIndex[keyAt];
                        if (node)
                            return node.value;
                    };
                    FastList.prototype.first = function () {
                        if (this.length)
                            return this.get(this.head.__key__);
                    };
                    FastList.prototype.last = function () {
                        if (this.length)
                            return this.get(this.tail.__key__);
                    };
                    FastList.prototype.set = function (keyAt, val) {
                        try {
                            var node = this._mustFind(keyAt);
                            node.value = val;
                        } catch (e) {
                            throw e;
                        }
                    };
                    FastList.prototype.forEach = FastList.prototype.each = function (cb) {
                        (() => {
                            var node = this.head;
                            const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                                env: {
                                    test: () => {
                                        return node ? 1 : 0;
                                    },
                                    update: () => {
                                        node = node.next;
                                    },
                                    body: () => {
                                        {
                                            (() => {
                                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            cb(node.value, node.__key__, this);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance0.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __forInstance0.exports;
                            return __exports.data();
                        })();
                    };
                    function defaultSort(a, b) {
                        (() => {
                            const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        a = lS(0, 8);
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance7.exports;
                            return __exports.data(a === null ? 1 : 0);
                        })();
                        (() => {
                            const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        b = lS(0, 9);
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance8.exports;
                            return __exports.data(b === null ? 1 : 0);
                        })();
                        return a.toString() < b.toString() ? -1 : 1;
                    }
                    FastList.prototype.sort = function (sortFn) {
                        sortFn = sortFn || defaultSort;
                        (() => {
                            var node = this.head;
                            const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                                env: {
                                    test: () => {
                                        return node ? 1 : 0;
                                    },
                                    update: () => {
                                        node = node.next;
                                    },
                                    body: () => {
                                        {
                                            var oldParent = node.parent;
                                            (() => {
                                                const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
                                                    env: {
                                                        test: () => {
                                                            return oldParent && sortFn(node.value, oldParent.value) < 0 ? 1 : 0;
                                                        },
                                                        update: () => {
                                                        },
                                                        body: () => {
                                                            {
                                                                oldParent.next = node.next;
                                                                node.parent = oldParent.parent;
                                                                (() => {
                                                                    const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                                                                        env: {
                                                                            impFunc1: () => {
                                                                                this.head = node;
                                                                            },
                                                                            impFunc2: () => {
                                                                                oldParent.parent.next = node;
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __ifInstance9.exports;
                                                                    return __exports.data(oldParent === this.head ? 1 : 0);
                                                                })();
                                                                (() => {
                                                                    const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                                                        env: {
                                                                            impFunc1: () => {
                                                                                this.tail = oldParent;
                                                                            },
                                                                            impFunc2: () => {
                                                                                node.next.parent = oldParent;
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __ifInstance10.exports;
                                                                    return __exports.data(node === this.tail ? 1 : 0);
                                                                })();
                                                                oldParent.parent = node;
                                                                node.next = oldParent;
                                                                oldParent = node.parent;
                                                            }
                                                        }
                                                    }
                                                });
                                                const __exports = __forInstance2.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __forInstance1.exports;
                            return __exports.data();
                        })();
                    };
                    function Node(node) {
                        this.value = node.value;
                        this.next = node.next || null;
                        this.parent = node.parent || null;
                        this.__key__ = node.key;
                    }
                    context.FastList = FastList;
                    function getUUID() {
                        var d = new Date().getTime();
                        var uuid = lS(0, 10).replace(/[xy]/g, function (c) {
                            var r = (d + Math.random() * 16) % 16 | 0;
                            d = Math.floor(d / 16);
                            return (c == lS(0, 11) ? r : r & 3 | 8).toString(16);
                        });
                        return uuid;
                    }
                }(window));
            }
        }
    });
    const __exports = __callInstance4.exports;
    return __exports.data();
})();</script>
</body>
</html>
