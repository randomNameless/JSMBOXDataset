<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>bundle.html</title>
</head>
<body>
<script>/* version 3.0.6 */
(()=>{"use strict";var e={amdO:{}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var t,r,i=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},n=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},o=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};t=new WeakMap;const s=new class{constructor(e={}){t.set(this,void 0),n(this,t,e,"f")}set config(e){n(this,t,e,"f")}get tenant(){return o(this,t,"f").tenant}set tenant(e){o(this,t,"f").tenant=e}get basePath(){return null!=o(this,t,"f").basePath?o(this,t,"f").basePath:"https://api.autointel.ai"}set basePath(e){o(this,t,"f").basePath=e}get fetchApi(){return o(this,t,"f").fetchApi}get middleware(){return o(this,t,"f").middleware||[]}get queryParamsStringify(){return o(this,t,"f").queryParamsStringify||d}get username(){return o(this,t,"f").username}get password(){return o(this,t,"f").password}get apiKey(){const e=o(this,t,"f").apiKey;return e?"function"==typeof e?e:()=>e:()=>""}useHmacCredentials(e,r){o(this,t,"f").username=e,o(this,t,"f").apiKey=r}get accessToken(){const e=o(this,t,"f").accessToken;if(e)return"function"==typeof e?e:()=>i(this,void 0,void 0,(function*(){return e}))}get headers(){return o(this,t,"f").headers}get credentials(){return o(this,t,"f").credentials}set trackedUser(e){o(this,t,"f").trackedUser=e}get trackedUser(){return o(this,t,"f").trackedUser}};class a{constructor(e=s){r.set(this,void 0),this.fetchApi=(e,t)=>i(this,void 0,void 0,(function*(){let i,n={url:e,init:t};for(const e of this.middleware)e.pre&&(n=(yield e.pre(Object.assign({fetch:this.fetchApi},n)))||n);try{i=yield(o(this,r,"f").fetchApi||fetch)(n.url,n.init)}catch(e){for(const t of this.middleware)t.onError&&(i=(yield t.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:e,response:i?i.clone():void 0}))||i);if(void 0===i)throw e instanceof Error?new c(e,"The request failed and the interceptors did not return an alternative response"):e}for(const e of this.middleware)e.post&&(i=(yield e.post({fetch:this.fetchApi,url:n.url,init:n.init,response:i.clone()}))||i);return i})),n(this,r,e,"f"),this.middleware=e.middleware}useTenant(e){o(this,r,"f").tenant=e}enableStaging(){o(this,r,"f").basePath="https://api.dev.autointel.ai"}disableStaging(){o(this,r,"f").basePath="https://api.autointel.ai"}useHmacCredentials(e,t){o(this,r,"f").useHmacCredentials(e,t)}withMiddleware(...e){const t=this.clone();return t.middleware=t.middleware.concat(...e),t}withPreMiddleware(...e){const t=e.map((e=>({pre:e})));return this.withMiddleware(...t)}withPostMiddleware(...e){const t=e.map((e=>({post:e})));return this.withMiddleware(...t)}isJsonMime(e){return!!e&&a.jsonRegex.test(e)}request(e,t){return i(this,void 0,void 0,(function*(){const{url:r,init:i}=yield this.createFetchParams(e,t),n=yield this.fetchApi(r,i);if(n&&n.status>=200&&n.status<300)return n;throw new h(n,`Response returned an error code ${null==n?void 0:n.status}: ${yield null==n?void 0:n.text()}`)}))}createFetchParams(e,t){return i(this,void 0,void 0,(function*(){let n=o(this,r,"f").basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(n+="?"+o(this,r,"f").queryParamsStringify(e.query));const s=Object.assign({},o(this,r,"f").headers,e.headers);Object.keys(s).forEach((e=>void 0===s[e]?delete s[e]:{}));const a="function"==typeof t?t:()=>i(this,void 0,void 0,(function*(){return t})),h={method:e.method,headers:s,body:e.body,credentials:o(this,r,"f").credentials},c=Object.assign(Object.assign({},h),yield a({init:h,context:e}));var u;return{url:n,init:Object.assign(Object.assign({},c),{body:(u=c.body,"undefined"!=typeof FormData&&u instanceof FormData||c.body instanceof URLSearchParams||l(c.body)?c.body:JSON.stringify(c.body))})}}))}clone(){const e=new(0,this.constructor)(o(this,r,"f"));return e.middleware=this.middleware.slice(),e}}function l(e){return"undefined"!=typeof Blob&&e instanceof Blob}r=new WeakMap,a.jsonRegex=new RegExp("^(:?application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(:?;.*)?$","i");class h extends Error{constructor(e,t){super(t),this.response=e,this.name="ResponseError"}}class c extends Error{constructor(e,t){super(t),this.cause=e,this.name="FetchError"}}class u extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}function f(e,t){const r=e[t];return null!=r}function d(e,t=""){return Object.keys(e).map((r=>p(r,e[r],t))).filter((e=>e.length>0)).join("&")}function p(e,t,r=""){const i=r+(r.length?`[${e}]`:e);if(t instanceof Array){const e=t.map((e=>encodeURIComponent(String(e)))).join(`&${encodeURIComponent(i)}=`);return`${encodeURIComponent(i)}=${e}`}if(t instanceof Set){return p(e,Array.from(t),r)}return t instanceof Date?`${encodeURIComponent(i)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?d(t,i):`${encodeURIComponent(i)}=${encodeURIComponent(String(t))}`}class g{constructor(e,t=e=>e){this.raw=e,this.transformer=t}value(){return i(this,void 0,void 0,(function*(){return this.transformer(yield this.raw.json())}))}}class y{constructor(e){this.raw=e}value(){return i(this,void 0,void 0,(function*(){}))}}const b=("undefined"!=typeof globalThis?globalThis:void 0)?.crypto||("undefined"!=typeof global?global:void 0)?.crypto||("undefined"!=typeof window?window:void 0)?.crypto||("undefined"!=typeof self?self:void 0)?.crypto||("undefined"!=typeof frames?frames:void 0)?.[0]?.crypto;let m;m=b?e=>{const t=[];for(let r=0;r<e;r+=4)t.push(b.getRandomValues(new Uint32Array(1))[0]);return new _(t,e)}:e=>{const t=[],r=e=>{let t=e,r=987654321;const i=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&i,t=18e3*(65535&t)+(t>>16)&i;let e=(r<<16)+t&i;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let i,n=0;n<e;n+=4){const e=r(4294967296*(i||Math.random()));i=987654071*e(),t.push(4294967296*e()|0)}return new _(t,e)};class w{static create(...e){return new this(...e)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class _ extends w{constructor(e=[],t=4*e.length){super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let i=0;i<e;i+=1)t[i>>>2]|=r[i]<<24-i%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=m;toString(e=v){return e.stringify(this)}concat(e){const t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(let e=0;e<n;e+=1){const n=r[e>>>2]>>>24-e%4*8&255;t[i+e>>>2]|=n<<24-(i+e)%4*8}else for(let e=0;e<n;e+=4)t[i+e>>>2]=r[e>>>2];return this.sigBytes+=n,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const v={stringify(e){const{words:t,sigBytes:r}=e,i=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse(e){const t=e.length,r=[];for(let i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new _(r,t/2)}},E={stringify(e){const{words:t,sigBytes:r}=e,i=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse(e){const t=e.length,r=[];for(let i=0;i<t;i+=1)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new _(r,t)}},S={stringify(e){try{return decodeURIComponent(escape(E.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>E.parse(unescape(encodeURIComponent(e)))};class A extends w{constructor(){super(),this._minBufferSize=0}reset(){this._data=new _,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=S.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:r,blockSize:i}=this,n=r.words,o=r.sigBytes;let s=o/(4*i);s=e?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0);const a=s*i,l=Math.min(4*a,o);if(a){for(let e=0;e<a;e+=i)this._doProcessBlock(n,e);t=n.splice(0,a),r.sigBytes-=l}return new _(t,l)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class k extends A{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new w,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new I(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class I extends w{constructor(e,t){super();const r=new e;this._hasher=r;let i=t;"string"==typeof i&&(i=S.parse(i));const n=r.blockSize,o=4*n;i.sigBytes>o&&(i=r.finalize(t)),i.clamp();const s=i.clone();this._oKey=s;const a=i.clone();this._iKey=a;const l=s.words,h=a.words;for(let e=0;e<n;e+=1)l[e]^=1549556828,h[e]^=909522486;s.sigBytes=o,a.sigBytes=o,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}}const T=_;class C extends w{constructor(e,t){super(),this.high=e,this.low=t}}class O extends w{constructor(e=[],t=8*e.length){super(),this.words=e,this.sigBytes=t}toX32(){const e=this.words,t=e.length,r=[];for(let i=0;i<t;i+=1){const t=e[i];r.push(t.high),r.push(t.low)}return T.create(r,this.sigBytes)}clone(){const e=super.clone.call(this);e.words=this.words.slice(0);const{words:t}=e,r=t.length;for(let e=0;e<r;e+=1)t[e]=t[e].clone();return e}}const R=(e,t,r)=>{const i=[];let n=0;for(let o=0;o<t;o+=1)if(o%4){const t=r[e.charCodeAt(o-1)]<<o%4*2|r[e.charCodeAt(o)]>>>6-o%4*2;i[n>>>2]|=t<<24-n%4*8,n+=1}return _.create(i,n)},B={stringify(e){const{words:t,sigBytes:r}=e,i=this._map;e.clamp();const n=[];for(let e=0;e<r;e+=3){const o=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)n.push(i.charAt(o>>>6*(3-t)&63))}const o=i.charAt(64);if(o)for(;n.length%4;)n.push(o);return n.join("")},parse(e){let t=e.length;const r=this._map;let i=this._reverseMap;if(!i){this._reverseMap=[],i=this._reverseMap;for(let e=0;e<r.length;e+=1)i[r.charCodeAt(e)]=e}const n=r.charAt(64);if(n){const r=e.indexOf(n);-1!==r&&(t=r)}return R(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},P=[];for(let e=0;e<64;e+=1)P[e]=4294967296*Math.abs(Math.sin(e+1))|0;const x=(e,t,r,i,n,o,s)=>{const a=e+(t&r|~t&i)+n+s;return(a<<o|a>>>32-o)+t},M=(e,t,r,i,n,o,s)=>{const a=e+(t&i|r&~i)+n+s;return(a<<o|a>>>32-o)+t},U=(e,t,r,i,n,o,s)=>{const a=e+(t^r^i)+n+s;return(a<<o|a>>>32-o)+t},j=(e,t,r,i,n,o,s)=>{const a=e+(r^(t|~i))+n+s;return(a<<o|a>>>32-o)+t};class L extends k{_doReset(){this._hash=new _([1732584193,4023233417,2562383102,271733878])}_doProcessBlock(e,t){const r=e;for(let i=0;i<16;i+=1){const n=t+i,o=e[n];r[n]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}const i=this._hash.words,n=r[t+0],o=r[t+1],s=r[t+2],a=r[t+3],l=r[t+4],h=r[t+5],c=r[t+6],u=r[t+7],f=r[t+8],d=r[t+9],p=r[t+10],g=r[t+11],y=r[t+12],b=r[t+13],m=r[t+14],w=r[t+15];let _=i[0],v=i[1],E=i[2],S=i[3];_=x(_,v,E,S,n,7,P[0]),S=x(S,_,v,E,o,12,P[1]),E=x(E,S,_,v,s,17,P[2]),v=x(v,E,S,_,a,22,P[3]),_=x(_,v,E,S,l,7,P[4]),S=x(S,_,v,E,h,12,P[5]),E=x(E,S,_,v,c,17,P[6]),v=x(v,E,S,_,u,22,P[7]),_=x(_,v,E,S,f,7,P[8]),S=x(S,_,v,E,d,12,P[9]),E=x(E,S,_,v,p,17,P[10]),v=x(v,E,S,_,g,22,P[11]),_=x(_,v,E,S,y,7,P[12]),S=x(S,_,v,E,b,12,P[13]),E=x(E,S,_,v,m,17,P[14]),v=x(v,E,S,_,w,22,P[15]),_=M(_,v,E,S,o,5,P[16]),S=M(S,_,v,E,c,9,P[17]),E=M(E,S,_,v,g,14,P[18]),v=M(v,E,S,_,n,20,P[19]),_=M(_,v,E,S,h,5,P[20]),S=M(S,_,v,E,p,9,P[21]),E=M(E,S,_,v,w,14,P[22]),v=M(v,E,S,_,l,20,P[23]),_=M(_,v,E,S,d,5,P[24]),S=M(S,_,v,E,m,9,P[25]),E=M(E,S,_,v,a,14,P[26]),v=M(v,E,S,_,f,20,P[27]),_=M(_,v,E,S,b,5,P[28]),S=M(S,_,v,E,s,9,P[29]),E=M(E,S,_,v,u,14,P[30]),v=M(v,E,S,_,y,20,P[31]),_=U(_,v,E,S,h,4,P[32]),S=U(S,_,v,E,f,11,P[33]),E=U(E,S,_,v,g,16,P[34]),v=U(v,E,S,_,m,23,P[35]),_=U(_,v,E,S,o,4,P[36]),S=U(S,_,v,E,l,11,P[37]),E=U(E,S,_,v,u,16,P[38]),v=U(v,E,S,_,p,23,P[39]),_=U(_,v,E,S,b,4,P[40]),S=U(S,_,v,E,n,11,P[41]),E=U(E,S,_,v,a,16,P[42]),v=U(v,E,S,_,c,23,P[43]),_=U(_,v,E,S,d,4,P[44]),S=U(S,_,v,E,y,11,P[45]),E=U(E,S,_,v,w,16,P[46]),v=U(v,E,S,_,s,23,P[47]),_=j(_,v,E,S,n,6,P[48]),S=j(S,_,v,E,u,10,P[49]),E=j(E,S,_,v,m,15,P[50]),v=j(v,E,S,_,h,21,P[51]),_=j(_,v,E,S,y,6,P[52]),S=j(S,_,v,E,a,10,P[53]),E=j(E,S,_,v,p,15,P[54]),v=j(v,E,S,_,o,21,P[55]),_=j(_,v,E,S,f,6,P[56]),S=j(S,_,v,E,w,10,P[57]),E=j(E,S,_,v,c,15,P[58]),v=j(v,E,S,_,b,21,P[59]),_=j(_,v,E,S,l,6,P[60]),S=j(S,_,v,E,g,10,P[61]),E=j(E,S,_,v,s,15,P[62]),v=j(v,E,S,_,d,21,P[63]),i[0]=i[0]+_|0,i[1]=i[1]+v|0,i[2]=i[2]+E|0,i[3]=i[3]+S|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32;const n=Math.floor(r/4294967296),o=r;t[15+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();const s=this._hash,a=s.words;for(let e=0;e<4;e+=1){const t=a[e];a[e]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8)}return s}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const N=k._createHelper(L),D=k._createHmacHelper(L);class F extends w{constructor(e){super(),this.cfg=Object.assign(new w,{keySize:4,hasher:L,iterations:1},e)}compute(e,t){let r;const{cfg:i}=this,n=i.hasher.create(),o=_.create(),s=o.words,{keySize:a,iterations:l}=i;for(;s.length<a;){r&&n.update(r),r=n.update(e).finalize(t),n.reset();for(let e=1;e<l;e+=1)r=n.finalize(r),n.reset();o.concat(r)}return o.sigBytes=4*a,o}}class W extends A{constructor(e,t,r){super(),this.cfg=Object.assign(new w,r),this._xformMode=e,this._key=t,this.reset()}static createEncryptor(e,t){return this.create(this._ENC_XFORM_MODE,e,t)}static createDecryptor(e,t){return this.create(this._DEC_XFORM_MODE,e,t)}static _createHelper(e){const t=e=>"string"==typeof e?X:Q;return{encrypt:(r,i,n)=>t(i).encrypt(e,r,i,n),decrypt:(r,i,n)=>t(i).decrypt(e,r,i,n)}}reset(){super.reset.call(this),this._doReset()}process(e){return this._append(e),this._process()}finalize(e){e&&this._append(e);return this._doFinalize()}}W._ENC_XFORM_MODE=1,W._DEC_XFORM_MODE=2,W.keySize=4,W.ivSize=4;class $ extends W{constructor(...e){super(...e),this.blockSize=1}_doFinalize(){return this._process(!0)}}class z extends w{constructor(e,t){super(),this._cipher=e,this._iv=t}static createEncryptor(e,t){return this.Encryptor.create(e,t)}static createDecryptor(e,t){return this.Decryptor.create(e,t)}}function H(e,t,r){const i=e;let n;const o=this._iv;o?(n=o,this._iv=void 0):n=this._prevBlock;for(let e=0;e<r;e+=1)i[t+e]^=n[e]}class q extends z{}q.Encryptor=class extends q{processBlock(e,t){const r=this._cipher,{blockSize:i}=r;H.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}},q.Decryptor=class extends q{processBlock(e,t){const r=this._cipher,{blockSize:i}=r,n=e.slice(t,t+i);r.decryptBlock(e,t),H.call(this,e,t,i),this._prevBlock=n}};const V={pad(e,t){const r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,o=[];for(let e=0;e<i;e+=4)o.push(n);const s=_.create(o,i);e.concat(s)},unpad(e){const t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}};class K extends W{constructor(e,t,r){super(e,t,Object.assign({mode:q,padding:V},r)),this.blockSize=4}reset(){let e;super.reset.call(this);const{cfg:t}=this,{iv:r,mode:i}=t;this._xformMode===this.constructor._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e}_doProcessBlock(e,t){this._mode.processBlock(e,t)}_doFinalize(){let e;const{padding:t}=this.cfg;return this._xformMode===this.constructor._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e}}class G extends w{constructor(e){super(),this.mixIn(e)}toString(e){return(e||this.formatter).stringify(this)}}const Y={stringify(e){let t;const{ciphertext:r,salt:i}=e;return t=i?_.create([1398893684,1701076831]).concat(i).concat(r):r,t.toString(B)},parse(e){let t;const r=B.parse(e),i=r.words;return 1398893684===i[0]&&1701076831===i[1]&&(t=_.create(i.slice(2,4)),i.splice(0,4),r.sigBytes-=16),G.create({ciphertext:r,salt:t})}};class Q extends w{static encrypt(e,t,r,i){const n=Object.assign(new w,this.cfg,i),o=e.createEncryptor(r,n),s=o.finalize(t),a=o.cfg;return G.create({ciphertext:s,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:o.blockSize,formatter:n.format})}static decrypt(e,t,r,i){let n=t;const o=Object.assign(new w,this.cfg,i);n=this._parse(n,o.format);return e.createDecryptor(r,o).finalize(n.ciphertext)}static _parse(e,t){return"string"==typeof e?t.parse(e,this):e}}Q.cfg=Object.assign(new w,{format:Y});const J={execute(e,t,r,i,n){let o,s=i;s||(s=_.random(8)),o=n?F.create({keySize:t+r,hasher:n}).compute(e,s):F.create({keySize:t+r}).compute(e,s);const a=_.create(o.words.slice(t),4*r);return o.sigBytes=4*t,G.create({key:o,iv:a,salt:s})}};class X extends Q{static encrypt(e,t,r,i){const n=Object.assign(new w,this.cfg,i),o=n.kdf.execute(r,e.keySize,e.ivSize,n.salt,n.hasher);n.iv=o.iv;const s=Q.encrypt.call(this,e,t,o.key,n);return s.mixIn(o),s}static decrypt(e,t,r,i){let n=t;const o=Object.assign(new w,this.cfg,i);n=this._parse(n,o.format);const s=o.kdf.execute(r,e.keySize,e.ivSize,n.salt,o.hasher);o.iv=s.iv;return Q.decrypt.call(this,e,n,s.key,o)}}X.cfg=Object.assign(Q.cfg,{kdf:J});const Z=e=>e<<8&4278255360|e>>>8&16711935,ee={stringify(e){const{words:t,sigBytes:r}=e,i=[];for(let e=0;e<r;e+=2){const r=t[e>>>2]>>>16-e%4*8&65535;i.push(String.fromCharCode(r))}return i.join("")},parse(e){const t=e.length,r=[];for(let i=0;i<t;i+=1)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return _.create(r,2*t)}},te=ee,re={stringify(e){const{words:t,sigBytes:r}=e,i=[];for(let e=0;e<r;e+=2){const r=Z(t[e>>>2]>>>16-e%4*8&65535);i.push(String.fromCharCode(r))}return i.join("")},parse(e){const t=e.length,r=[];for(let i=0;i<t;i+=1)r[i>>>1]|=Z(e.charCodeAt(i)<<16-i%2*16);return _.create(r,2*t)}},ie={stringify(e,t=!0){const{words:r,sigBytes:i}=e,n=t?this._safeMap:this._map;e.clamp();const o=[];for(let e=0;e<i;e+=3){const t=(r[e>>>2]>>>24-e%4*8&255)<<16|(r[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|r[e+2>>>2]>>>24-(e+2)%4*8&255;for(let r=0;r<4&&e+.75*r<i;r+=1)o.push(n.charAt(t>>>6*(3-r)&63))}const s=n.charAt(64);if(s)for(;o.length%4;)o.push(s);return o.join("")},parse(e,t=!0){let r=e.length;const i=t?this._safeMap:this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<i.length;e+=1)n[i.charCodeAt(e)]=e}const o=i.charAt(64);if(o){const t=e.indexOf(o);-1!==t&&(r=t)}return R(e,r,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safeMap:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},ne=[];class oe extends k{_doReset(){this._hash=new _([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=this._hash.words;let i=r[0],n=r[1],o=r[2],s=r[3],a=r[4];for(let r=0;r<80;r+=1){if(r<16)ne[r]=0|e[t+r];else{const e=ne[r-3]^ne[r-8]^ne[r-14]^ne[r-16];ne[r]=e<<1|e>>>31}let l=(i<<5|i>>>27)+a+ne[r];l+=r<20?1518500249+(n&o|~n&s):r<40?1859775393+(n^o^s):r<60?(n&o|n&s|o&s)-1894007588:(n^o^s)-899497514,a=s,s=o,o=n<<30|n>>>2,n=i,i=l}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const se=k._createHelper(oe),ae=k._createHmacHelper(oe),le=[],he=[],ce=e=>{const t=Math.sqrt(e);for(let r=2;r<=t;r+=1)if(!(e%r))return!1;return!0},ue=e=>4294967296*(e-(0|e))|0;let fe=2,de=0;for(;de<64;)ce(fe)&&(de<8&&(le[de]=ue(fe**.5)),he[de]=ue(fe**(1/3)),de+=1),fe+=1;const pe=[];class ge extends k{_doReset(){this._hash=new _(le.slice(0))}_doProcessBlock(e,t){const r=this._hash.words;let i=r[0],n=r[1],o=r[2],s=r[3],a=r[4],l=r[5],h=r[6],c=r[7];for(let r=0;r<64;r+=1){if(r<16)pe[r]=0|e[t+r];else{const e=pe[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,i=pe[r-2],n=(i<<15|i>>>17)^(i<<13|i>>>19)^i>>>10;pe[r]=t+pe[r-7]+n+pe[r-16]}const u=i&n^i&o^n&o,f=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),d=c+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+he[r]+pe[r];c=h,h=l,l=a,a=s+d|0,s=o,o=n,n=i,i=d+(f+u)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+h|0,r[7]=r[7]+c|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const ye=k._createHelper(ge),be=k._createHmacHelper(ge);class me extends ge{_doReset(){this._hash=new _([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])}_doFinalize(){const e=super._doFinalize.call(this);return e.sigBytes-=4,e}}const we=ge._createHelper(me),_e=ge._createHmacHelper(me),ve=[new C(1116352408,3609767458),new C(1899447441,602891725),new C(3049323471,3964484399),new C(3921009573,2173295548),new C(961987163,4081628472),new C(1508970993,3053834265),new C(2453635748,2937671579),new C(2870763221,3664609560),new C(3624381080,2734883394),new C(310598401,1164996542),new C(607225278,1323610764),new C(1426881987,3590304994),new C(1925078388,4068182383),new C(2162078206,991336113),new C(2614888103,633803317),new C(3248222580,3479774868),new C(3835390401,2666613458),new C(4022224774,944711139),new C(264347078,2341262773),new C(604807628,2007800933),new C(770255983,1495990901),new C(1249150122,1856431235),new C(1555081692,3175218132),new C(1996064986,2198950837),new C(2554220882,3999719339),new C(2821834349,766784016),new C(2952996808,2566594879),new C(3210313671,3203337956),new C(3336571891,1034457026),new C(3584528711,2466948901),new C(113926993,3758326383),new C(338241895,168717936),new C(666307205,1188179964),new C(773529912,1546045734),new C(1294757372,1522805485),new C(1396182291,2643833823),new C(1695183700,2343527390),new C(1986661051,1014477480),new C(2177026350,1206759142),new C(2456956037,344077627),new C(2730485921,1290863460),new C(2820302411,3158454273),new C(3259730800,3505952657),new C(3345764771,106217008),new C(3516065817,3606008344),new C(3600352804,1432725776),new C(4094571909,1467031594),new C(275423344,851169720),new C(430227734,3100823752),new C(506948616,1363258195),new C(659060556,3750685593),new C(883997877,3785050280),new C(958139571,3318307427),new C(1322822218,3812723403),new C(1537002063,2003034995),new C(1747873779,3602036899),new C(1955562222,1575990012),new C(2024104815,1125592928),new C(2227730452,2716904306),new C(2361852424,442776044),new C(2428436474,593698344),new C(2756734187,3733110249),new C(3204031479,2999351573),new C(3329325298,3815920427),new C(3391569614,3928383900),new C(3515267271,566280711),new C(3940187606,3454069534),new C(4118630271,4000239992),new C(116418474,1914138554),new C(174292421,2731055270),new C(289380356,3203993006),new C(460393269,320620315),new C(685471733,587496836),new C(852142971,1086792851),new C(1017036298,365543100),new C(1126000580,2618297676),new C(1288033470,3409855158),new C(1501505948,4234509866),new C(1607167915,987167468),new C(1816402316,1246189591)],Ee=[];for(let e=0;e<80;e+=1)Ee[e]=new C;class Se extends k{constructor(){super(),this.blockSize=32}_doReset(){this._hash=new O([new C(1779033703,4089235720),new C(3144134277,2227873595),new C(1013904242,4271175723),new C(2773480762,1595750129),new C(1359893119,2917565137),new C(2600822924,725511199),new C(528734635,4215389547),new C(1541459225,327033209)])}_doProcessBlock(e,t){const r=this._hash.words,i=r[0],n=r[1],o=r[2],s=r[3],a=r[4],l=r[5],h=r[6],c=r[7],u=i.high;let f=i.low;const d=n.high;let p=n.low;const g=o.high;let y=o.low;const b=s.high;let m=s.low;const w=a.high;let _=a.low;const v=l.high;let E=l.low;const S=h.high;let A=h.low;const k=c.high;let I=c.low,T=u,C=f,O=d,R=p,B=g,P=y,x=b,M=m,U=w,j=_,L=v,N=E,D=S,F=A,W=k,$=I;for(let r=0;r<80;r+=1){let i,n;const o=Ee[r];if(r<16)o.high=0|e[t+2*r],n=o.high,o.low=0|e[t+2*r+1],i=o.low;else{const e=Ee[r-15],t=e.high,s=e.low,a=(t>>>1|s<<31)^(t>>>8|s<<24)^t>>>7,l=(s>>>1|t<<31)^(s>>>8|t<<24)^(s>>>7|t<<25),h=Ee[r-2],c=h.high,u=h.low,f=(c>>>19|u<<13)^(c<<3|u>>>29)^c>>>6,d=(u>>>19|c<<13)^(u<<3|c>>>29)^(u>>>6|c<<26),p=Ee[r-7],g=p.high,y=p.low,b=Ee[r-16],m=b.high,w=b.low;i=l+y,n=a+g+(i>>>0<l>>>0?1:0),i+=d,n=n+f+(i>>>0<d>>>0?1:0),i+=w,n=n+m+(i>>>0<w>>>0?1:0),o.high=n,o.low=i}const s=U&L^~U&D,a=j&N^~j&F,l=T&O^T&B^O&B,h=C&R^C&P^R&P,c=(T>>>28|C<<4)^(T<<30|C>>>2)^(T<<25|C>>>7),u=(C>>>28|T<<4)^(C<<30|T>>>2)^(C<<25|T>>>7),f=(U>>>14|j<<18)^(U>>>18|j<<14)^(U<<23|j>>>9),d=(j>>>14|U<<18)^(j>>>18|U<<14)^(j<<23|U>>>9),p=ve[r],g=p.high,y=p.low;let b=$+d,m=W+f+(b>>>0<$>>>0?1:0);b+=a,m=m+s+(b>>>0<a>>>0?1:0),b+=y,m=m+g+(b>>>0<y>>>0?1:0),b+=i,m=m+n+(b>>>0<i>>>0?1:0);const w=u+h;W=D,$=F,D=L,F=N,L=U,N=j,j=M+b|0,U=x+m+(j>>>0<M>>>0?1:0)|0,x=B,M=P,B=O,P=R,O=T,R=C,C=b+w|0,T=m+(c+l+(w>>>0<u>>>0?1:0))+(C>>>0<b>>>0?1:0)|0}i.low=f+C,f=i.low,i.high=u+T+(f>>>0<C>>>0?1:0),n.low=p+R,p=n.low,n.high=d+O+(p>>>0<R>>>0?1:0),o.low=y+P,y=o.low,o.high=g+B+(y>>>0<P>>>0?1:0),s.low=m+M,m=s.low,s.high=b+x+(m>>>0<M>>>0?1:0),a.low=_+j,_=a.low,a.high=w+U+(_>>>0<j>>>0?1:0),l.low=E+N,E=l.low,l.high=v+L+(E>>>0<N>>>0?1:0),h.low=A+F,A=h.low,h.high=S+D+(A>>>0<F>>>0?1:0),c.low=I+$,I=c.low,c.high=k+W+(I>>>0<$>>>0?1:0)}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process();return this._hash.toX32()}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const Ae=k._createHelper(Se),ke=k._createHmacHelper(Se);class Ie extends Se{_doReset(){this._hash=new O([new C(3418070365,3238371032),new C(1654270250,914150663),new C(2438529370,812702999),new C(355462360,4144912697),new C(1731405415,4290775857),new C(2394180231,1750603025),new C(3675008525,1694076839),new C(1203062813,3204075428)])}_doFinalize(){const e=super._doFinalize.call(this);return e.sigBytes-=16,e}}const Te=Se._createHelper(Ie),Ce=Se._createHmacHelper(Ie),Oe=[],Re=[],Be=[];let Pe=1,xe=0;for(let e=0;e<24;e+=1){Oe[Pe+5*xe]=(e+1)*(e+2)/2%64;const t=(2*Pe+3*xe)%5;Pe=xe%5,xe=t}for(let e=0;e<5;e+=1)for(let t=0;t<5;t+=1)Re[e+5*t]=t+(2*e+3*t)%5*5;let Me=1;for(let e=0;e<24;e+=1){let t=0,r=0;for(let e=0;e<7;e+=1){if(1&Me){const i=(1<<e)-1;i<32?r^=1<<i:t^=1<<i-32}128&Me?Me=Me<<1^113:Me<<=1}Be[e]=C.create(t,r)}const Ue=[];for(let e=0;e<25;e+=1)Ue[e]=C.create();class je extends k{constructor(e){super(Object.assign({outputLength:512},e))}_doReset(){this._state=[];const e=this._state;for(let t=0;t<25;t+=1)e[t]=new C;this.blockSize=(1600-2*this.cfg.outputLength)/32}_doProcessBlock(e,t){const r=this._state,i=this.blockSize/2;for(let n=0;n<i;n+=1){let i=e[t+2*n],o=e[t+2*n+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);const s=r[n];s.high^=o,s.low^=i}for(let e=0;e<24;e+=1){for(let e=0;e<5;e+=1){let t=0,i=0;for(let n=0;n<5;n+=1){const o=r[e+5*n];t^=o.high,i^=o.low}const n=Ue[e];n.high=t,n.low=i}for(let e=0;e<5;e+=1){const t=Ue[(e+4)%5],i=Ue[(e+1)%5],n=i.high,o=i.low,s=t.high^(n<<1|o>>>31),a=t.low^(o<<1|n>>>31);for(let t=0;t<5;t+=1){const i=r[e+5*t];i.high^=s,i.low^=a}}for(let e=1;e<25;e+=1){let t,i;const n=r[e],o=n.high,s=n.low,a=Oe[e];a<32?(t=o<<a|s>>>32-a,i=s<<a|o>>>32-a):(t=s<<a-32|o>>>64-a,i=o<<a-32|s>>>64-a);const l=Ue[Re[e]];l.high=t,l.low=i}const t=Ue[0],i=r[0];t.high=i.high,t.low=i.low;for(let e=0;e<5;e+=1)for(let t=0;t<5;t+=1){const i=e+5*t,n=r[i],o=Ue[i],s=Ue[(e+1)%5+5*t],a=Ue[(e+2)%5+5*t];n.high=o.high^~s.high&a.high,n.low=o.low^~s.low&a.low}const n=r[0],o=Be[e];n.high^=o.high,n.low^=o.low}}_doFinalize(){const e=this._data,t=e.words,r=8*e.sigBytes,i=32*this.blockSize;t[r>>>5]|=1<<24-r%32,t[(Math.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();const n=this._state,o=this.cfg.outputLength/8,s=o/8,a=[];for(let e=0;e<s;e+=1){const t=n[e];let r=t.high,i=t.low;r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a.push(i),a.push(r)}return new _(a,o)}clone(){const e=super.clone.call(this);e._state=this._state.slice(0);const t=e._state;for(let e=0;e<25;e+=1)t[e]=t[e].clone();return e}}const Le=k._createHelper(je),Ne=k._createHmacHelper(je),De=_.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),Fe=_.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),We=_.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),$e=_.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),ze=_.create([0,1518500249,1859775393,2400959708,2840853838]),He=_.create([1352829926,1548603684,1836072691,2053994217,0]),qe=(e,t,r)=>e^t^r,Ve=(e,t,r)=>e&t|~e&r,Ke=(e,t,r)=>(e|~t)^r,Ge=(e,t,r)=>e&r|t&~r,Ye=(e,t,r)=>e^(t|~r),Qe=(e,t)=>e<<t|e>>>32-t;class Je extends k{_doReset(){this._hash=_.create([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=e;for(let e=0;e<16;e+=1){const i=t+e,n=r[i];r[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}const i=this._hash.words,n=ze.words,o=He.words,s=De.words,a=Fe.words,l=We.words,h=$e.words;let c,u=i[0],f=i[1],d=i[2],p=i[3],g=i[4],y=i[0],b=i[1],m=i[2],w=i[3],_=i[4];for(let e=0;e<80;e+=1)c=u+r[t+s[e]]|0,c+=e<16?qe(f,d,p)+n[0]:e<32?Ve(f,d,p)+n[1]:e<48?Ke(f,d,p)+n[2]:e<64?Ge(f,d,p)+n[3]:Ye(f,d,p)+n[4],c|=0,c=Qe(c,l[e]),c=c+g|0,u=g,g=p,p=Qe(d,10),d=f,f=c,c=y+r[t+a[e]]|0,c+=e<16?Ye(b,m,w)+o[0]:e<32?Ge(b,m,w)+o[1]:e<48?Ke(b,m,w)+o[2]:e<64?Ve(b,m,w)+o[3]:qe(b,m,w)+o[4],c|=0,c=Qe(c,h[e]),c=c+_|0,y=_,_=w,w=Qe(m,10),m=b,b=c;c=i[1]+d+w|0,i[1]=i[2]+p+_|0,i[2]=i[3]+g+y|0,i[3]=i[4]+u+b|0,i[4]=i[0]+f+m|0,i[0]=c}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();const n=this._hash,o=n.words;for(let e=0;e<5;e+=1){const t=o[e];o[e]=16711935&(t<<8|t>>>24)|4278255360&(t<<24|t>>>8)}return n}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const Xe=k._createHelper(Je),Ze=k._createHmacHelper(Je);class et extends w{constructor(e){super(),this.cfg=Object.assign(new w,{keySize:4,hasher:ge,iterations:25e4},e)}compute(e,t){const{cfg:r}=this,i=I.create(r.hasher,e),n=_.create(),o=_.create([1]),s=n.words,a=o.words,{keySize:l,iterations:h}=r;for(;s.length<l;){const e=i.update(t).finalize(o);i.reset();const r=e.words,s=r.length;let l=e;for(let e=1;e<h;e+=1){l=i.finalize(l),i.reset();const e=l.words;for(let t=0;t<s;t+=1)r[t]^=e[t]}n.concat(e),a[0]+=1}return n.sigBytes=4*l,n}}const tt=[],rt=[],it=[],nt=[],ot=[],st=[],at=[],lt=[],ht=[],ct=[],ut=[];for(let e=0;e<256;e+=1)ut[e]=e<128?e<<1:e<<1^283;let ft=0,dt=0;for(let e=0;e<256;e+=1){let e=dt^dt<<1^dt<<2^dt<<3^dt<<4;e=e>>>8^255&e^99,tt[ft]=e,rt[e]=ft;const t=ut[ft],r=ut[t],i=ut[r];let n=257*ut[e]^16843008*e;it[ft]=n<<24|n>>>8,nt[ft]=n<<16|n>>>16,ot[ft]=n<<8|n>>>24,st[ft]=n,n=16843009*i^65537*r^257*t^16843008*ft,at[e]=n<<24|n>>>8,lt[e]=n<<16|n>>>16,ht[e]=n<<8|n>>>24,ct[e]=n,ft?(ft=t^ut[ut[ut[i^t]]],dt^=ut[ut[dt]]):(dt=1,ft=dt)}const pt=[0,1,2,4,8,16,32,64,128,27,54];class gt extends K{_doReset(){let e;if(this._nRounds&&this._keyPriorReset===this._key)return;this._keyPriorReset=this._key;const t=this._keyPriorReset,r=t.words,i=t.sigBytes/4;this._nRounds=i+6;const n=4*(this._nRounds+1);this._keySchedule=[];const o=this._keySchedule;for(let t=0;t<n;t+=1)t<i?o[t]=r[t]:(e=o[t-1],t%i?i>6&&t%i==4&&(e=tt[e>>>24]<<24|tt[e>>>16&255]<<16|tt[e>>>8&255]<<8|tt[255&e]):(e=e<<8|e>>>24,e=tt[e>>>24]<<24|tt[e>>>16&255]<<16|tt[e>>>8&255]<<8|tt[255&e],e^=pt[t/i|0]<<24),o[t]=o[t-i]^e);this._invKeySchedule=[];const s=this._invKeySchedule;for(let t=0;t<n;t+=1){const r=n-t;e=t%4?o[r]:o[r-4],s[t]=t<4||r<=4?e:at[tt[e>>>24]]^lt[tt[e>>>16&255]]^ht[tt[e>>>8&255]]^ct[tt[255&e]]}}encryptBlock(e,t){this._doCryptBlock(e,t,this._keySchedule,it,nt,ot,st,tt)}decryptBlock(e,t){const r=e;let i=r[t+1];r[t+1]=r[t+3],r[t+3]=i,this._doCryptBlock(r,t,this._invKeySchedule,at,lt,ht,ct,rt),i=r[t+1],r[t+1]=r[t+3],r[t+3]=i}_doCryptBlock(e,t,r,i,n,o,s,a){const l=e,h=this._nRounds;let c=l[t]^r[0],u=l[t+1]^r[1],f=l[t+2]^r[2],d=l[t+3]^r[3],p=4;for(let e=1;e<h;e+=1){const e=i[c>>>24]^n[u>>>16&255]^o[f>>>8&255]^s[255&d]^r[p];p+=1;const t=i[u>>>24]^n[f>>>16&255]^o[d>>>8&255]^s[255&c]^r[p];p+=1;const a=i[f>>>24]^n[d>>>16&255]^o[c>>>8&255]^s[255&u]^r[p];p+=1;const l=i[d>>>24]^n[c>>>16&255]^o[u>>>8&255]^s[255&f]^r[p];p+=1,c=e,u=t,f=a,d=l}const g=(a[c>>>24]<<24|a[u>>>16&255]<<16|a[f>>>8&255]<<8|a[255&d])^r[p];p+=1;const y=(a[u>>>24]<<24|a[f>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^r[p];p+=1;const b=(a[f>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&u])^r[p];p+=1;const m=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[u>>>8&255]<<8|a[255&f])^r[p];p+=1,l[t]=g,l[t+1]=y,l[t+2]=b,l[t+3]=m}}gt.keySize=8;const yt=K._createHelper(gt),bt=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],mt=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],wt=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],_t=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],vt=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679];function Et(e,t){const r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function St(e,t){const r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}class At extends K{constructor(e,t,r){super(e,t,r),this.blockSize=2}_doReset(){const e=this._key.words,t=[];for(let r=0;r<56;r+=1){const i=bt[r]-1;t[r]=e[i>>>5]>>>31-i%32&1}this._subKeys=[];const r=this._subKeys;for(let e=0;e<16;e+=1){r[e]=[];const i=r[e],n=wt[e];for(let e=0;e<24;e+=1)i[e/6|0]|=t[(mt[e]-1+n)%28]<<31-e%6,i[4+(e/6|0)]|=t[28+(mt[e+24]-1+n)%28]<<31-e%6;i[0]=i[0]<<1|i[0]>>>31;for(let e=1;e<7;e+=1)i[e]>>>=4*(e-1)+3;i[7]=i[7]<<5|i[7]>>>27}this._invSubKeys=[];const i=this._invSubKeys;for(let e=0;e<16;e+=1)i[e]=r[15-e]}encryptBlock(e,t){this._doCryptBlock(e,t,this._subKeys)}decryptBlock(e,t){this._doCryptBlock(e,t,this._invSubKeys)}_doCryptBlock(e,t,r){const i=e;this._lBlock=e[t],this._rBlock=e[t+1],Et.call(this,4,252645135),Et.call(this,16,65535),St.call(this,2,858993459),St.call(this,8,16711935),Et.call(this,1,1431655765);for(let e=0;e<16;e+=1){const t=r[e],i=this._lBlock,n=this._rBlock;let o=0;for(let e=0;e<8;e+=1)o|=_t[e][((n^t[e])&vt[e])>>>0];this._lBlock=n,this._rBlock=i^o}const n=this._lBlock;this._lBlock=this._rBlock,this._rBlock=n,Et.call(this,1,1431655765),St.call(this,8,16711935),St.call(this,2,858993459),Et.call(this,16,65535),Et.call(this,4,252645135),i[t]=this._lBlock,i[t+1]=this._rBlock}}At.keySize=2,At.ivSize=2;const kt=K._createHelper(At);class It extends K{_doReset(){const e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");const t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=At.createEncryptor(_.create(t)),this._des2=At.createEncryptor(_.create(r)),this._des3=At.createEncryptor(_.create(i))}encryptBlock(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)}decryptBlock(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)}}It.keySize=6,It.ivSize=2;const Tt=K._createHelper(It),Ct=[],Ot=[],Rt=[];function Bt(){const e=this._X,t=this._C;for(let e=0;e<8;e+=1)Ot[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<Ot[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<Ot[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<Ot[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<Ot[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<Ot[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<Ot[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<Ot[6]>>>0?1:0)|0,this._b=t[7]>>>0<Ot[7]>>>0?1:0;for(let r=0;r<8;r+=1){const i=e[r]+t[r],n=65535&i,o=i>>>16,s=((n*n>>>17)+n*o>>>15)+o*o,a=((4294901760&i)*i|0)+((65535&i)*i|0);Rt[r]=s^a}e[0]=Rt[0]+(Rt[7]<<16|Rt[7]>>>16)+(Rt[6]<<16|Rt[6]>>>16)|0,e[1]=Rt[1]+(Rt[0]<<8|Rt[0]>>>24)+Rt[7]|0,e[2]=Rt[2]+(Rt[1]<<16|Rt[1]>>>16)+(Rt[0]<<16|Rt[0]>>>16)|0,e[3]=Rt[3]+(Rt[2]<<8|Rt[2]>>>24)+Rt[1]|0,e[4]=Rt[4]+(Rt[3]<<16|Rt[3]>>>16)+(Rt[2]<<16|Rt[2]>>>16)|0,e[5]=Rt[5]+(Rt[4]<<8|Rt[4]>>>24)+Rt[3]|0,e[6]=Rt[6]+(Rt[5]<<16|Rt[5]>>>16)+(Rt[4]<<16|Rt[4]>>>16)|0,e[7]=Rt[7]+(Rt[6]<<8|Rt[6]>>>24)+Rt[5]|0}class Pt extends ${constructor(...e){super(...e),this.blockSize=4,this.ivSize=2}_doReset(){const e=this._key.words,{iv:t}=this.cfg;for(let t=0;t<4;t+=1)e[t]=16711935&(e[t]<<8|e[t]>>>24)|4278255360&(e[t]<<24|e[t]>>>8);this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];const r=this._X;this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];const i=this._C;this._b=0;for(let e=0;e<4;e+=1)Bt.call(this);for(let e=0;e<8;e+=1)i[e]^=r[e+4&7];if(t){const e=t.words,r=e[0],n=e[1],o=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a=o>>>16|4294901760&s,l=s<<16|65535&o;i[0]^=o,i[1]^=a,i[2]^=s,i[3]^=l,i[4]^=o,i[5]^=a,i[6]^=s,i[7]^=l;for(let e=0;e<4;e+=1)Bt.call(this)}}_doProcessBlock(e,t){const r=e,i=this._X;Bt.call(this),Ct[0]=i[0]^i[5]>>>16^i[3]<<16,Ct[1]=i[2]^i[7]>>>16^i[5]<<16,Ct[2]=i[4]^i[1]>>>16^i[7]<<16,Ct[3]=i[6]^i[3]>>>16^i[1]<<16;for(let e=0;e<4;e+=1)Ct[e]=16711935&(Ct[e]<<8|Ct[e]>>>24)|4278255360&(Ct[e]<<24|Ct[e]>>>8),r[t+e]^=Ct[e]}}const xt=$._createHelper(Pt),Mt=[],Ut=[],jt=[];function Lt(){const e=this._X,t=this._C;for(let e=0;e<8;e+=1)Ut[e]=t[e];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<Ut[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<Ut[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<Ut[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<Ut[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<Ut[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<Ut[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<Ut[6]>>>0?1:0)|0,this._b=t[7]>>>0<Ut[7]>>>0?1:0;for(let r=0;r<8;r+=1){const i=e[r]+t[r],n=65535&i,o=i>>>16,s=((n*n>>>17)+n*o>>>15)+o*o,a=((4294901760&i)*i|0)+((65535&i)*i|0);jt[r]=s^a}e[0]=jt[0]+(jt[7]<<16|jt[7]>>>16)+(jt[6]<<16|jt[6]>>>16)|0,e[1]=jt[1]+(jt[0]<<8|jt[0]>>>24)+jt[7]|0,e[2]=jt[2]+(jt[1]<<16|jt[1]>>>16)+(jt[0]<<16|jt[0]>>>16)|0,e[3]=jt[3]+(jt[2]<<8|jt[2]>>>24)+jt[1]|0,e[4]=jt[4]+(jt[3]<<16|jt[3]>>>16)+(jt[2]<<16|jt[2]>>>16)|0,e[5]=jt[5]+(jt[4]<<8|jt[4]>>>24)+jt[3]|0,e[6]=jt[6]+(jt[5]<<16|jt[5]>>>16)+(jt[4]<<16|jt[4]>>>16)|0,e[7]=jt[7]+(jt[6]<<8|jt[6]>>>24)+jt[5]|0}class Nt extends ${constructor(...e){super(...e),this.blockSize=4,this.ivSize=2}_doReset(){const e=this._key.words,{iv:t}=this.cfg;this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16];const r=this._X;this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];const i=this._C;this._b=0;for(let e=0;e<4;e+=1)Lt.call(this);for(let e=0;e<8;e+=1)i[e]^=r[e+4&7];if(t){const e=t.words,r=e[0],n=e[1],o=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),s=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a=o>>>16|4294901760&s,l=s<<16|65535&o;i[0]^=o,i[1]^=a,i[2]^=s,i[3]^=l,i[4]^=o,i[5]^=a,i[6]^=s,i[7]^=l;for(let e=0;e<4;e+=1)Lt.call(this)}}_doProcessBlock(e,t){const r=e,i=this._X;Lt.call(this),Mt[0]=i[0]^i[5]>>>16^i[3]<<16,Mt[1]=i[2]^i[7]>>>16^i[5]<<16,Mt[2]=i[4]^i[1]>>>16^i[7]<<16,Mt[3]=i[6]^i[3]>>>16^i[1]<<16;for(let e=0;e<4;e+=1)Mt[e]=16711935&(Mt[e]<<8|Mt[e]>>>24)|4278255360&(Mt[e]<<24|Mt[e]>>>8),r[t+e]^=Mt[e]}}const Dt=$._createHelper(Nt);function Ft(){const e=this._S;let t=this._i,r=this._j,i=0;for(let n=0;n<4;n+=1){t=(t+1)%256,r=(r+e[t])%256;const o=e[t];e[t]=e[r],e[r]=o,i|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,i}class Wt extends ${_doReset(){const e=this._key,t=e.words,r=e.sigBytes;this._S=[];const i=this._S;for(let e=0;e<256;e+=1)i[e]=e;for(let e=0,n=0;e<256;e+=1){const o=e%r,s=t[o>>>2]>>>24-o%4*8&255;n=(n+i[e]+s)%256;const a=i[e];i[e]=i[n],i[n]=a}this._j=0,this._i=this._j}_doProcessBlock(e,t){e[t]^=Ft.call(this)}}Wt.keySize=8,Wt.ivSize=0;const $t=$._createHelper(Wt);class zt extends Wt{constructor(...e){super(...e),Object.assign(this.cfg,{drop:192})}_doReset(){super._doReset.call(this);for(let e=this.cfg.drop;e>0;e-=1)Ft.call(this)}}const Ht=$._createHelper(zt),qt=16,Vt=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Kt=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]],Gt={pbox:[],sbox:[]};function Yt(e,t){const r=t>>24&255,i=t>>16&255,n=t>>8&255,o=255&t;let s=e.sbox[0][r]+e.sbox[1][i];return s^=e.sbox[2][n],s+=e.sbox[3][o],s}function Qt(e,t,r){let i,n=t,o=r;for(let t=0;t<qt;++t)n^=e.pbox[t],o=Yt(e,n)^o,i=n,n=o,o=i;return i=n,n=o,o=i,o^=e.pbox[qt],n^=e.pbox[17],{left:n,right:o}}class Jt extends K{constructor(e,t,r){super(e,t,r),this.blockSize=2}_doReset(){if(this._keyPriorReset===this._key)return;const e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4;!function(e,t,r){for(let t=0;t<4;t++){e.sbox[t]=[];for(let r=0;r<256;r++)e.sbox[t][r]=Kt[t][r]}let i=0;for(let n=0;n<18;n++)e.pbox[n]=Vt[n]^t[i],i++,i>=r&&(i=0);let n=0,o=0,s=0;for(let t=0;t<18;t+=2)s=Qt(e,n,o),n=s.left,o=s.right,e.pbox[t]=n,e.pbox[t+1]=o;for(let t=0;t<4;t++)for(let r=0;r<256;r+=2)s=Qt(e,n,o),n=s.left,o=s.right,e.sbox[t][r]=n,e.sbox[t][r+1]=o}(Gt,t,r)}encryptBlock(e,t){const r=Qt(Gt,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right}decryptBlock(e,t){const r=function(e,t,r){let i,n=t,o=r;for(let t=17;t>1;--t)n^=e.pbox[t],o=Yt(e,n)^o,i=n,n=o,o=i;return i=n,n=o,o=i,o^=e.pbox[1],n^=e.pbox[0],{left:n,right:o}}(Gt,e[t],e[t+1]);e[t]=r.left,e[t+1]=r.right}}Jt.keySize=4,Jt.ivSize=2;const Xt=K._createHelper(Jt);function Zt(e,t,r,i){const n=e;let o;const s=this._iv;s?(o=s.slice(0),this._iv=void 0):o=this._prevBlock,i.encryptBlock(o,0);for(let e=0;e<r;e+=1)n[t+e]^=o[e]}class er extends z{}er.Encryptor=class extends er{processBlock(e,t){const r=this._cipher,{blockSize:i}=r;Zt.call(this,e,t,i,r),this._prevBlock=e.slice(t,t+i)}},er.Decryptor=class extends er{processBlock(e,t){const r=this._cipher,{blockSize:i}=r,n=e.slice(t,t+i);Zt.call(this,e,t,i,r),this._prevBlock=n}};class tr extends z{}tr.Encryptor=class extends tr{processBlock(e,t){const r=e,i=this._cipher,{blockSize:n}=i,o=this._iv;let s=this._counter;o&&(this._counter=o.slice(0),s=this._counter,this._iv=void 0);const a=s.slice(0);i.encryptBlock(a,0),s[n-1]=s[n-1]+1|0;for(let e=0;e<n;e+=1)r[t+e]^=a[e]}},tr.Decryptor=tr.Encryptor;const rr=e=>{let t=e;if(255&~(e>>24))t+=1<<24;else{let r=e>>16&255,i=e>>8&255,n=255&e;255===r?(r=0,255===i?(i=0,255===n?n=0:n+=1):i+=1):r+=1,t=0,t+=r<<16,t+=i<<8,t+=n}return t};
/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */
class ir extends z{}ir.Encryptor=class extends ir{processBlock(e,t){const r=e,i=this._cipher,{blockSize:n}=i,o=this._iv;let s=this._counter;o&&(this._counter=o.slice(0),s=this._counter,this._iv=void 0),(e=>{const t=e;t[0]=rr(t[0]),0===t[0]&&(t[1]=rr(t[1]))})(s);const a=s.slice(0);i.encryptBlock(a,0);for(let e=0;e<n;e+=1)r[t+e]^=a[e]}},ir.Decryptor=ir.Encryptor;class nr extends z{}nr.Encryptor=class extends nr{processBlock(e,t){this._cipher.encryptBlock(e,t)}},nr.Decryptor=class extends nr{processBlock(e,t){this._cipher.decryptBlock(e,t)}};class or extends z{}or.Encryptor=class extends or{processBlock(e,t){const r=e,i=this._cipher,{blockSize:n}=i,o=this._iv;let s=this._keystream;o&&(this._keystream=o.slice(0),s=this._keystream,this._iv=void 0),i.encryptBlock(s,0);for(let e=0;e<n;e+=1)r[t+e]^=s[e]}},or.Decryptor=or.Encryptor;const sr={pad(e,t){const r=e,i=r.sigBytes,n=4*t,o=n-i%n,s=i+o-1;r.clamp(),r.words[s>>>2]|=o<<24-s%4*8,r.sigBytes+=o},unpad(e){const t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}},ar={pad(e,t){const r=4*t,i=r-e.sigBytes%r;e.concat(_.random(i-1)).concat(_.create([i<<24],1))},unpad(e){const t=e,r=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=r}},lr={pad(e,t){const r=e,i=4*t;r.clamp(),r.sigBytes+=i-(e.sigBytes%i||i)},unpad(e){const t=e,r=t.words;for(let e=t.sigBytes-1;e>=0;e-=1)if(r[e>>>2]>>>24-e%4*8&255){t.sigBytes=e+1;break}}},hr={pad(e,t){e.concat(_.create([2147483648],1)),lr.pad(e,t)},unpad(e){const t=e;lr.unpad(t),t.sigBytes-=1}},cr={pad(){},unpad(){}},ur={stringify:e=>e.ciphertext.toString(v),parse(e){const t=v.parse(e);return G.create({ciphertext:t})}},fr={lib:{Base:w,WordArray:_,BufferedBlockAlgorithm:A,Hasher:k,Cipher:W,StreamCipher:$,BlockCipherMode:z,BlockCipher:K,CipherParams:G,SerializableCipher:Q,PasswordBasedCipher:X},x64:{Word:C,WordArray:O},enc:{Hex:v,Latin1:E,Utf8:S,Utf16:te,Utf16BE:ee,Utf16LE:re,Base64:B,Base64url:ie},algo:{HMAC:I,MD5:L,SHA1:oe,SHA224:me,SHA256:ge,SHA384:Ie,SHA512:Se,SHA3:je,RIPEMD160:Je,PBKDF2:et,EvpKDF:F,AES:gt,DES:At,TripleDES:It,Rabbit:Pt,RabbitLegacy:Nt,RC4:Wt,RC4Drop:zt,Blowfish:Jt},mode:{CBC:q,CFB:er,CTR:tr,CTRGladman:ir,ECB:nr,OFB:or},pad:{Pkcs7:V,AnsiX923:sr,Iso10126:ar,Iso97971:hr,NoPadding:cr,ZeroPadding:lr},format:{OpenSSL:Y,Hex:ur},kdf:{OpenSSL:J},MD5:N,HmacMD5:D,SHA1:se,HmacSHA1:ae,SHA224:we,HmacSHA224:_e,SHA256:ye,HmacSHA256:be,SHA384:Te,HmacSHA384:Ce,SHA512:Ae,HmacSHA512:ke,SHA3:Le,HmacSHA3:Ne,RIPEMD160:Xe,HmacRIPEMD160:Ze,PBKDF2:(e,t,r)=>et.create(r).compute(e,t),EvpKDF:(e,t,r)=>F.create(r).compute(e,t),AES:yt,DES:kt,TripleDES:Tt,Rabbit:xt,RabbitLegacy:Dt,RC4:$t,RC4Drop:Ht,Blowfish:Xt},dr=(e,t)=>{const r=e.body?JSON.stringify(e.body):"",i=fr.enc.Base64.stringify(fr.SHA256(fr.enc.Utf8.parse(r))),n=String(t.basePath),o=n.includes("//")?n.split("//")[1]:n;e.headers.host=`${o}`,e.headers["x-date"]=`${(new Date).toUTCString()}`,e.headers.digest=`SHA-256=${i}`;let s="host x-date @request-target digest",a="";s.split(" ").forEach((t=>{if("@request-target"===t){let r=t.concat(": ",e.method.toLowerCase()," ",e.path,"\n");a=a.concat(r)}else a=a.concat(t,": ",e.headers[t],"\n")})),a=a.replace(/\n$/,"");let l=fr.enc.Base64.stringify(fr.HmacSHA384(fr.enc.Utf8.parse(a),t.apiKey()));const h=`hmac username="${t.username}", algorithm="hmac-sha384", headers="${s}", signature="${l}"`;return e.headers.Authorization=h,e};var pr,gr,yr,br;function mr(e,t){return e}function wr(e,t){if(void 0!==e)return null===e?null:{id:e.id,zipcode:e.zipcode,ipAddress:e.ipAddress,deviceType:e.deviceType}}function _r(e,t){if(void 0!==e)return null===e?null:Object.assign(Object.assign({},e),{id:e.id,productId:e.productId,features:e.features,imageUrl:e.imageUrl})}function vr(e,t){if("undefined"!=typeof window&&(e?e.url||(e.url=window.location.href):e={url:window.location.href}),void 0!==e)return null===e?null:{name:e.name,url:e.url}}function Er(e,t){return t&&t.trackedUser?Object.assign(Object.assign({},t.trackedUser),e):void 0!==e?null===e?null:Object.assign(Object.assign({},e),{id:e.id}):void 0}function Sr(e,t){if(void 0!==e)return null===e?null:Object.assign(Object.assign({},e),{browsingSession:wr(e.browsingSession),user:Er(e.user,t),config:_r(e.config),source:vr(e.source),dealerId:e.dealerId})}function Ar(e){return function(e){if(null==e)return e;return{name:e.name,description:f(e,"description")?e.description:void 0,code:e.code,price:e.price,type:e.type,imageUrl:f(e,"imageUrl")?e.imageUrl:void 0}}(e)}function kr(e,t){if(void 0!==e)return null===e?null:{id:e.id,itemId:e.itemId,context:Sr(e.context,t),action:mr(e.action),subAction:e.subAction,timestamp:e.timestamp}}function Ir(e){return function(e){if(null==e)return e;return{_static:f(e,"static")?e.static:void 0}}(e)}function Tr(e){return function(e){if(null==e)return e;return{acceleration:e.acceleration,driveTrain:e.driveTrain,features:e.features.map(Ar),fuelType:e.fuelType,horsepower:e.horsepower,wheelRange:f(e,"wheelRange")?e.wheelRange:void 0,id:e.id,images:Ir(e.images),label:f(e,"label")?e.label:void 0,modelCode:e.modelCode,modelYear:e.modelYear,name:e.name,price:e.price,productId:e.productId,productType:e.productType,productUrl:e.productUrl,score:e.score,technicalText:e.technicalText}}(e)}function Cr(e,t){if(void 0!==e)return null===e?null:{productType:e.productType,prompt:e.prompt}}function Or(e,t){if(void 0!==e)return null===e?null:{count:e.count,modelIds:e.modelIds,modelNames:e.modelNames,fuelTypes:e.fuelTypes,seriesNames:e.seriesNames,seriesIds:e.seriesIds,bodyStyleNames:e.bodyStyleNames,modelYears:e.modelYears,dealerRegions:e.dealerRegions,dealerIds:e.dealerIds,smartDealerId:e.smartDealerId,dealerNames:e.dealerNames,dealerLocations:e.dealerLocations,exteriorColors:e.exteriorColors,interiorColors:e.interiorColors}}function Rr(e,t){if(void 0!==e)return null===e?null:{browsingSession:wr(e.browsingSession),user:Er(e.user,t),config:_r(e.config),source:vr(e.source),dealerId:e.dealerId,filter:Or(e.filter),context:Cr(e.context)}}function Br(e){return function(e){if(null==e)return e;return{timestamp:f(e,"timestamp")?e.timestamp:void 0,userId:f(e,"userId")?e.userId:void 0}}(e)}function Pr(e){return function(e){if(null==e)return e;return{metadata:f(e,"metadata")?Br(e.metadata):void 0,recommendations:f(e,"recommendations")?e.recommendations.map(Tr):void 0}}(e)}!function(e){e.View="VIEW",e.Select="SELECT",e.Remove="REMOVE",e.Convert="CONVERT"}(pr||(pr={})),function(e){e.Desktop="DESKTOP",e.Tablet="TABLET",e.Mobile="MOBILE",e.Other="OTHER"}(gr||(gr={})),function(e){e.Configuration="configuration",e.Inventory="inventory"}(yr||(yr={})),function(e){e.Configuration="configuration",e.Inventory="inventory"}(br||(br={}));var xr,Mr,Ur,jr,Lr,Nr,Dr,Fr,Wr,$r=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},zr=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},Hr=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class qr extends a{constructor(e=s){super(e),xr.set(this,void 0),Mr.set(this,((e,t)=>$r(this,void 0,void 0,(function*(){if(null===e.recommendationContext||void 0===e.recommendationContext)throw new u("recommendationContext","Required parameter requestParameters.recommendationContext was null or undefined when calling getRecommendation.");const r={"Content-Type":"application/json"};Hr(this,xr,"f")&&Hr(this,xr,"f").accessToken&&(r.Authorization=yield Hr(this,xr,"f").accessToken("OAuth2-M2M",["read:recommendation"]));const i=yield this.request(dr({path:"/v1/recommendation",method:"POST",headers:r,query:{},body:Rr(e.recommendationContext,Hr(this,xr,"f"))},Hr(this,xr,"f")),t);return new g(i,(e=>Pr(e)))})))),Ur.set(this,(e=>$r(this,void 0,void 0,(function*(){const t=yield this.request(dr({path:"/version",method:"GET",headers:{},query:{}},Hr(this,xr,"f")),e);return new g(t)})))),jr.set(this,((e,t)=>$r(this,void 0,void 0,(function*(){if(null===e.interaction||void 0===e.interaction)throw new u("interaction","Required parameter requestParameters.interaction was null or undefined when calling postInteraction.");const r={"Content-Type":"application/json"},i=yield this.request(dr({path:"/v1/interaction",method:"POST",headers:r,query:{},body:kr(e.interaction,Hr(this,xr,"f"))},Hr(this,xr,"f")),t);return new y(i)})))),zr(this,xr,e,"f")}setUser(e){Hr(this,xr,"f").trackedUser=e}getRecommendation(e,t){return $r(this,void 0,void 0,(function*(){const r=yield Hr(this,Mr,"f").call(this,e,t);return yield r.value()}))}getVersion(e){return $r(this,void 0,void 0,(function*(){const t=yield Hr(this,Ur,"f").call(this,e);return yield t.value()}))}postInteraction(e,t){return $r(this,void 0,void 0,(function*(){yield Hr(this,jr,"f").call(this,e,t)}))}}xr=new WeakMap,Mr=new WeakMap,Ur=new WeakMap,jr=new WeakMap,function(e){e.DESKTOP="DESKTOP",e.TABLET="TABLET",e.MOBILE="MOBILE",e.OTHER="OTHER"}(Lr||(Lr={})),function(e){e.SET_DATA="SET_DATA",e.START_SESSION="START_SESSION",e.RESTART_SESSION="RESTART_SESSION"}(Nr||(Nr={})),function(e){e.PDP="PDP",e.BYO="BYO",e.INVENTORY="INVENTORY"}(Dr||(Dr={})),function(e){e.USER_REPLY="USER_REPLY",e.NAVIGATION="NAVIGATION",e.CONFIGURATION="CONFIGURATION"}(Fr||(Fr={})),function(e){e.SUCCESS="SUCCESS",e.FAILURE="FAILURE"}(Wr||(Wr={}));const Vr=e=>{const{pageContext:t,language:r,deviceType:i}=e;return Object.assign({language:r,deviceType:i},(e=>{const{path:t,pageType:r,vehicle:i,location:n}=e,o={path:t,pageType:r};return[i,n].forEach((e=>{e&&Object.entries(e).forEach((([e,t])=>{void 0===t||o[e]||(o[e]=t)}))})),o})(t))},Kr=(e,t,r,i)=>{if(!e||!r||!i)throw new Error("Unable to create Whiz credentials");const n=new Date,o=`${t}-${i.origin}-${e.id}-${n.toUTCString()}`;return`${fr.HmacSHA256(o,r).toString(fr.enc.Base64)}:${n.getTime()}`};var Gr,Yr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,Jr=Object.getOwnPropertyNames,Xr=Object.prototype.hasOwnProperty,Zr=(e,t)=>()=>(e&&(t=e(e=0)),t),ei=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ti=(e,t)=>{for(var r in t)Yr(e,r,{get:t[r],enumerable:!0})},ri=e=>((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of Jr(t))!Xr.call(e,n)&&n!==r&&Yr(e,n,{get:()=>t[n],enumerable:!(i=Qr(t,n))||i.enumerable});return e})(Yr({},"__esModule",{value:!0}),e),ii=Zr((()=>{Gr={deviceMemory:8,hardwareConcurrency:8,language:"en-US"}})),ni={};function oi(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}function si(){!Ei||!Si||(Ei=!1,Si.length?vi=Si.concat(vi):Ai=-1,vi.length&&ai())}function ai(){if(!Ei){var e=setTimeout(si,0);Ei=!0;for(var t=vi.length;t;){for(Si=vi,vi=[];++Ai<t;)Si&&Si[Ai].run();Ai=-1,t=vi.length}Si=null,Ei=!1,clearTimeout(e)}}function li(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];vi.push(new hi(e,t)),1===vi.length&&!Ei&&setTimeout(ai,0)}function hi(e,t){this.fun=e,this.array=t}function ci(){}function ui(e){oi("_linkedBinding")}function fi(e){oi("dlopen")}function di(){return[]}function pi(){return[]}function gi(e,t){if(!e)throw new Error(t||"assertion error")}function yi(){return!1}function bi(){return wn.now()/1e3}function mi(e){var t=Math.floor(.001*(Date.now()-wn.now())),r=.001*wn.now(),i=Math.floor(r)+t,n=Math.floor(r%1*1e9);return e&&(i-=e[0],(n-=e[1])<0&&(i--,n+=vn)),[i,n]}function wi(){return xn}function _i(e){return[]}ti(ni,{_debugEnd:()=>on,_debugProcess:()=>nn,_events:()=>Sn,_eventsCount:()=>An,_exiting:()=>$i,_fatalExceptions:()=>en,_getActiveHandles:()=>pi,_getActiveRequests:()=>di,_kill:()=>qi,_linkedBinding:()=>ui,_maxListeners:()=>En,_preload_modules:()=>bn,_rawDebug:()=>Di,_startProfilerIdleNotifier:()=>sn,_stopProfilerIdleNotifier:()=>an,_tickCallback:()=>rn,abort:()=>un,addListener:()=>kn,allowedNodeEnvironmentFlags:()=>Xi,arch:()=>Ii,argv:()=>Oi,argv0:()=>yn,assert:()=>gi,binding:()=>Mi,chdir:()=>Li,config:()=>zi,cpuUsage:()=>Vi,cwd:()=>ji,debugPort:()=>gn,default:()=>xn,dlopen:()=>fi,domain:()=>Wi,emit:()=>Rn,emitWarning:()=>xi,env:()=>Ci,execArgv:()=>Ri,execPath:()=>pn,exit:()=>Qi,features:()=>Zi,hasUncaughtExceptionCaptureCallback:()=>yi,hrtime:()=>mi,kill:()=>Yi,listeners:()=>_i,memoryUsage:()=>Gi,moduleLoadList:()=>Fi,nextTick:()=>li,off:()=>Tn,on:()=>wi,once:()=>In,openStdin:()=>Ji,pid:()=>fn,platform:()=>Ti,ppid:()=>dn,prependListener:()=>Bn,prependOnceListener:()=>Pn,reallyExit:()=>Hi,release:()=>Ni,removeAllListeners:()=>On,removeListener:()=>Cn,resourceUsage:()=>Ki,setSourceMapsEnabled:()=>mn,setUncaughtExceptionCaptureCallback:()=>tn,stderr:()=>hn,stdin:()=>cn,stdout:()=>ln,title:()=>ki,umask:()=>Ui,uptime:()=>bi,version:()=>Bi,versions:()=>Pi});var vi,Ei,Si,Ai,ki,Ii,Ti,Ci,Oi,Ri,Bi,Pi,xi,Mi,Ui,ji,Li,Ni,Di,Fi,Wi,$i,zi,Hi,qi,Vi,Ki,Gi,Yi,Qi,Ji,Xi,Zi,en,tn,rn,nn,on,sn,an,ln,hn,cn,un,fn,dn,pn,gn,yn,bn,mn,wn,_n,vn,En,Sn,An,kn,In,Tn,Cn,On,Rn,Bn,Pn,xn,Mn=Zr((()=>{Yn(),Un(),ii(),vi=[],Ei=!1,Ai=-1,hi.prototype.run=function(){this.fun.apply(null,this.array)},ki="browser",Ii="x64",Ti="browser",Ci={PATH:"/usr/bin",LANG:Gr.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"},Oi=["/usr/bin/node"],Ri=[],Bi="v16.8.0",Pi={},xi=function(e,t){console.warn((t?t+": ":"")+e)},Mi=function(e){oi("binding")},Ui=function(e){return 0},ji=function(){return"/"},Li=function(e){},Ni={name:"node",sourceUrl:"",headersUrl:"",libUrl:""},Di=ci,Fi=[],Wi={},$i=!1,zi={},Hi=ci,qi=ci,Ki=Vi=function(){return{}},Gi=Vi,Yi=ci,Qi=ci,Ji=ci,Xi={},Zi={inspector:!1,debug:!1,uv:!1,ipv6:!1,tls_alpn:!1,tls_sni:!1,tls_ocsp:!1,tls:!1,cached_builtins:!0},en=ci,tn=ci,rn=ci,nn=ci,on=ci,sn=ci,an=ci,ln=void 0,hn=void 0,cn=void 0,un=ci,fn=2,dn=1,pn="/bin/usr/node",gn=9229,yn="node",bn=[],mn=ci,void 0===(wn={now:typeof performance<"u"?performance.now.bind(performance):void 0,timing:typeof performance<"u"?performance.timing:void 0}).now&&(_n=Date.now(),wn.timing&&wn.timing.navigationStart&&(_n=wn.timing.navigationStart),wn.now=()=>Date.now()-_n),vn=1e9,mi.bigint=function(e){var t=mi(e);return typeof BigInt>"u"?t[0]*vn+t[1]:BigInt(t[0]*vn)+BigInt(t[1])},xn={version:Bi,versions:Pi,arch:Ii,platform:Ti,release:Ni,_rawDebug:Di,moduleLoadList:Fi,binding:Mi,_linkedBinding:ui,_events:Sn={},_eventsCount:An=0,_maxListeners:En=10,on:wi,addListener:kn=wi,once:In=wi,off:Tn=wi,removeListener:Cn=wi,removeAllListeners:On=wi,emit:Rn=ci,prependListener:Bn=wi,prependOnceListener:Pn=wi,listeners:_i,domain:Wi,_exiting:$i,config:zi,dlopen:fi,uptime:bi,_getActiveRequests:di,_getActiveHandles:pi,reallyExit:Hi,_kill:qi,cpuUsage:Vi,resourceUsage:Ki,memoryUsage:Gi,kill:Yi,exit:Qi,openStdin:Ji,allowedNodeEnvironmentFlags:Xi,assert:gi,features:Zi,_fatalExceptions:en,setUncaughtExceptionCaptureCallback:tn,hasUncaughtExceptionCaptureCallback:yi,emitWarning:xi,nextTick:li,_tickCallback:rn,_debugProcess:nn,_debugEnd:on,_startProfilerIdleNotifier:sn,_stopProfilerIdleNotifier:an,stdout:ln,stdin:cn,stderr:hn,abort:un,umask:Ui,chdir:Li,cwd:ji,env:Ci,title:ki,argv:Oi,execArgv:Ri,pid:fn,ppid:dn,execPath:pn,debugPort:gn,hrtime:mi,argv0:yn,_preload_modules:bn,setSourceMapsEnabled:mn}})),Un=Zr((()=>{Mn()})),jn={};function Ln(){if(zn)return $n;zn=!0;let e=function(){if(Dn)return Nn;Dn=!0,Nn.byteLength=function(e){var t=o(e),r=t[0],i=t[1];return 3*(r+i)/4-i},Nn.toByteArray=function(e){var i,n,s=o(e),a=s[0],l=s[1],h=new r(function(e,t,r){return 3*(t+r)/4-r}(0,a,l)),c=0,u=l>0?a-4:a;for(n=0;n<u;n+=4)i=t[e.charCodeAt(n)]<<18|t[e.charCodeAt(n+1)]<<12|t[e.charCodeAt(n+2)]<<6|t[e.charCodeAt(n+3)],h[c++]=i>>16&255,h[c++]=i>>8&255,h[c++]=255&i;return 2===l&&(i=t[e.charCodeAt(n)]<<2|t[e.charCodeAt(n+1)]>>4,h[c++]=255&i),1===l&&(i=t[e.charCodeAt(n)]<<10|t[e.charCodeAt(n+1)]<<4|t[e.charCodeAt(n+2)]>>2,h[c++]=i>>8&255,h[c++]=255&i),h},Nn.fromByteArray=function(t){for(var r,i=t.length,n=i%3,o=[],s=16383,l=0,h=i-n;l<h;l+=s)o.push(a(t,l,l+s>h?h:l+s));return 1===n?(r=t[i-1],o.push(e[r>>2]+e[r<<4&63]+"==")):2===n&&(r=(t[i-2]<<8)+t[i-1],o.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"=")),o.join("")};for(var e=[],t=[],r=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0;n<64;++n)e[n]=i[n],t[i.charCodeAt(n)]=n;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function s(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function a(e,t,r){for(var i,n=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),n.push(s(i));return n.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,Nn}(),t=(Wn||(Wn=!0,Fn.read=function(e,t,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,h=l>>1,c=-7,u=r?n-1:0,f=r?-1:1,d=e[t+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+u],u+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+u],u+=f,c-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=h}return(d?-1:1)*s*Math.pow(2,o-i)},Fn.write=function(e,t,r,i,n,o){var s,a,l,h=8*o-n-1,c=(1<<h)-1,u=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(t*l-1)*Math.pow(2,n),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,n),s=0));n>=8;e[r+d]=255&a,d+=p,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;e[r+d]=255&s,d+=p,s/=256,h-=8);e[r+d-p]|=128*g}),Fn),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;$n.Buffer=o,$n.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},$n.INSPECT_MAX_BYTES=50;let i=2147483647;function n(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=0|f(e,t),i=n(r),s=i.write(e,t);return s!==r&&(i=i.slice(0,s)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){let t=new Uint8Array(e);return c(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');let i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return o.from(i,t,r);let s=function(e){if(o.isBuffer(e)){let t=0|u(e.length),r=n(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||K(e.length)?n(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(s)return s;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return a(e),n(e<0?0:0|u(e))}function h(e){let t=e.length<0?0:0|u(e.length),r=n(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,o.prototype),i}function u(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(n)return i?-1:z(e).length;t=(""+t).toLowerCase(),n=!0}}function d(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function p(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),K(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,i,n){let o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function h(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){let i=-1;for(o=r;o<a;o++)if(h(e,o)===h(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*s}else-1!==i&&(o-=o-i),i=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){let r=!0;for(let i=0;i<l;i++)if(h(e,o+i)!==h(t,i)){r=!1;break}if(r)return o}return-1}function b(e,t,r,i){r=Number(r)||0;let n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;let o,s=t.length;for(i>s/2&&(i=s/2),o=0;o<i;++o){let i=parseInt(t.substr(2*o,2),16);if(K(i))return o;e[r+o]=i}return o}function m(e,t,r,i){return q(z(t,e.length-r),e,r,i)}function w(e,t,r,i){return q(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function _(e,t,r,i){return q(H(t),e,r,i)}function v(e,t,r,i){return q(function(e,t){let r,i,n,o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),i=r>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function E(t,r,i){return 0===r&&i===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(r,i))}function S(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],o=null,s=t>239?4:t>223?3:t>191?2:1;if(n+s<=r){let r,i,a,l;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[n+1],128==(192&r)&&(l=(31&t)<<6|63&r,l>127&&(o=l));break;case 3:r=e[n+1],i=e[n+2],128==(192&r)&&128==(192&i)&&(l=(15&t)<<12|(63&r)<<6|63&i,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:r=e[n+1],i=e[n+2],a=e[n+3],128==(192&r)&&128==(192&i)&&128==(192&a)&&(l=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(e){let t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);let r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=A));return r}(i)}$n.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}(e,t,r)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;let i=o.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(V(t,Uint8Array))n+t.length>i.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,n)}n+=t.length}return i},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)p(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):d.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",t=$n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r&&(o.prototype[r]=o.prototype.inspect),o.prototype.compare=function(e,t,r,i,n){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(n>>>=0)-(i>>>=0),a=(r>>>=0)-(t>>>=0),l=Math.min(s,a),h=this.slice(i,n),c=e.slice(t,r);for(let e=0;e<l;++e)if(h[e]!==c[e]){s=h[e],a=c[e];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},o.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}let n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return m(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};let A=4096;function k(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function I(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function T(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=G[e[i]];return n}function C(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,i,n,s){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function B(e,t,r,i,n){D(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function P(e,t,r,i,n){D(t,i,n,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function x(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,r,i,n,o){return r=+r,i>>>=0,o||x(e,0,i,4),t.write(e,r,i,n,23,4),i+4}function U(e,r,i,n,o){return r=+r,i>>>=0,o||x(e,0,i,8),t.write(e,r,i,n,52,8),i+8}o.prototype.slice=function(e,t){let r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=Y((function(e){F(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&W(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(i)+(BigInt(n)<<BigInt(32))})),o.prototype.readBigUInt64BE=Y((function(e){F(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&W(e,this.length-8);let i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)})),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return n*=128,i>=n&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=Y((function(e){F(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&W(e,this.length-8);let i=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=Y((function(e){F(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&W(e,this.length-8);let i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),o.prototype.readFloatLE=function(e,r){return e>>>=0,r||O(e,4,this.length),t.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,r){return e>>>=0,r||O(e,4,this.length),t.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,r){return e>>>=0,r||O(e,8,this.length),t.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,r){return e>>>=0,r||O(e,8,this.length),t.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t>>>=0,r>>>=0,!i){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=Y((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=Y((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}let n=0,o=1,s=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===s&&0!==this[t+n-1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){let i=Math.pow(2,8*r-1);R(this,e,t,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===s&&0!==this[t+n+1]&&(s=1),this[t+n]=(e/o|0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=Y((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=Y((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,i){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&0!==i&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},o.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let n;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let s=o.isBuffer(e)?e:o.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=s[n%a]}return this};let j={};function L(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function N(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function D(e,t,r,i,n,o){if(e>r||e<t){let i,n="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){F(t,"offset"),(void 0===e[t]||void 0===e[t+r])&&W(t,e.length-(r+1))}(i,n,o)}function F(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,r){throw Math.floor(e)!==e?(F(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new j.ERR_BUFFER_OUT_OF_BOUNDS:new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}L("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),L("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),L("ERR_OUT_OF_RANGE",(function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>2**32?n=N(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=N(n)),n+="n"),i+=` It must be ${t}. Received ${n}`,i}),RangeError);let $=/[^+/0-9A-Za-z-_]/g;function z(e,t){t=t||1/0;let r,i=e.length,n=null,o=[];for(let s=0;s<i;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function H(t){return e.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function q(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}let G=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function Y(e){return typeof BigInt>"u"?Q:e}function Q(){throw new Error("BigInt not supported")}return $n}ti(jn,{Buffer:()=>qn,INSPECT_MAX_BYTES:()=>Vn,default:()=>Hn,kMaxLength:()=>Kn});var Nn,Dn,Fn,Wn,$n,zn,Hn,qn,Vn,Kn,Gn=Zr((()=>{Yn(),Un(),ii(),Nn={},Dn=!1,Fn={},Wn=!1,$n={},zn=!1,(Hn=Ln()).Buffer,Hn.SlowBuffer,Hn.INSPECT_MAX_BYTES,Hn.kMaxLength,qn=Hn.Buffer,Vn=Hn.INSPECT_MAX_BYTES,Kn=Hn.kMaxLength})),Yn=Zr((()=>{Gn()})),Qn=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(e){this.aliasToTopic={},this.max=e}put(e,t){return!(0===t||t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}}})),Jn=ei(((e,t)=>{Yn(),Un(),ii(),t.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Uint8Array}})),Xn=ei(((e,t)=>{Yn(),Un(),ii();var r=(Gn(),ri(jn)),i=Object.getPrototypeOf((async function(){})).constructor,n=globalThis.Blob||r.Blob,o=typeof n<"u"?function(e){return e instanceof n}:function(e){return!1},s=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise(((r,i)=>{e=r,t=i})),resolve:e,reject:t}},promisify:e=>new Promise(((t,r)=>{e(((e,...i)=>e?r(e):t(...i)))})),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[e,r]){let i=t.shift();return"f"===r?i.toFixed(6):"j"===r?JSON.stringify(i):"s"===r&&"object"==typeof i?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof i,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:o},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})),Zn=ei(((e,t)=>{Yn(),Un(),ii();var{AbortController:r,AbortSignal:i}=typeof self<"u"?self:typeof window<"u"?window:void 0;t.exports=r,t.exports.AbortSignal=i,t.exports.default=r})),eo=ei(((e,t)=>{Yn(),Un(),ii();var{format:r,inspect:i,AggregateError:n}=Xn(),o=globalThis.AggregateError||n,s=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],l=/^([A-Z][a-z0-9]*)+$/,h={};function c(e,t){if(!e)throw new h.ERR_INTERNAL_ASSERTION(t)}function u(e){let t="",r=e.length,i="-"===e[0]?1:0;for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function f(e,t,i){i||(i=Error);class n extends i{constructor(...i){super(function(e,t,i){if("function"==typeof t)return c(t.length<=i.length,`Code: ${e}; The provided arguments length (${i.length}) does not match the required ones (${t.length}).`),t(...i);let n=(t.match(/%[dfijoOs]/g)||[]).length;return c(n===i.length,`Code: ${e}; The provided arguments length (${i.length}) does not match the required ones (${n}).`),0===i.length?t:r(t,...i)}(e,t,i))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:i.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[s]=!0,h[e]=n}function d(e){let t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}var p=class extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new h.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",((e,t,r)=>{c("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let o=[],s=[],h=[];for(let e of t)c("string"==typeof e,"All expected entries have to be of type string"),a.includes(e)?o.push(e.toLowerCase()):l.test(e)?s.push(e):(c("object"!==e,'The value "object" should be written as "Object"'),h.push(e));if(s.length>0){let e=o.indexOf("object");-1!==e&&(o.splice(o,e,1),s.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{let e=o.pop();n+=`one of type ${o.join(", ")}, or ${e}`}}(s.length>0||h.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let e=s.pop();n+=`an instance of ${s.join(", ")}, or ${e}`}}h.length>0&&(n+=" or ")}switch(h.length){case 0:break;case 1:h[0].toLowerCase()!==h[0]&&(n+="an "),n+=`${h[0]}`;break;case 2:n+=`one of ${h[0]} or ${h[1]}`;break;default:{let e=h.pop();n+=`one of ${h.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var u;if(null!==(u=r.constructor)&&void 0!==u&&u.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${i(r,{depth:-1})}`}}else{let e=i(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n}),TypeError),f("ERR_INVALID_ARG_VALUE",((e,t,r="is invalid")=>{let n=i(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`}),TypeError),f("ERR_INVALID_RETURN_VALUE",((e,t,r)=>{var i;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(i=r.constructor)&&void 0!==i&&i.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`}),TypeError),f("ERR_MISSING_ARGS",((...e)=>{c(e.length>0,"At least one arg needs to be specified");let t,r=e.length;switch(e=(Array.isArray(e)?e:[e]).map((e=>`"${e}"`)).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`}),TypeError),f("ERR_OUT_OF_RANGE",((e,t,r)=>{let n;return c(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=u(String(r)):"bigint"==typeof r?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=u(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`}),RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),t.exports={AbortError:p,aggregateTwoErrors:d((function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let r=new o([t,e],t.message);return r.code=t.code,r}return e||t})),hideStackFrames:d,codes:h}})),to=ei(((e,t)=>{Yn(),Un(),ii();var{ArrayIsArray:r,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:n,ArrayPrototypeMap:o,NumberIsInteger:s,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:l,NumberMIN_SAFE_INTEGER:h,NumberParseInt:c,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:f,String:d,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Jn(),{hideStackFrames:y,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:m,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:v}}=eo(),{normalizeEncoding:E}=Xn(),{isAsyncFunction:S,isArrayBufferView:A}=Xn().types,k={};var I=/^[0-7]+$/;var T=y(((e,t,r=h,i=l)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!s(e))throw new _(t,"an integer",e);if(e<r||e>i)throw new _(t,`>= ${r} && <= ${i}`,e)})),C=y(((e,t,r=-2147483648,i=2147483647)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!s(e))throw new _(t,"an integer",e);if(e<r||e>i)throw new _(t,`>= ${r} && <= ${i}`,e)})),O=y(((e,t,r=!1)=>{if("number"!=typeof e)throw new m(t,"number",e);if(!s(e))throw new _(t,"an integer",e);let i=r?1:0,n=4294967295;if(e<i||e>n)throw new _(t,`>= ${i} && <= ${n}`,e)}));function R(e,t){if("string"!=typeof e)throw new m(t,"string",e)}var B=y(((e,t,r)=>{if(!i(r,e)){let i="must be one of: "+n(o(r,(e=>"string"==typeof e?`'${e}'`:d(e))),", ");throw new w(t,e,i)}}));function P(e,t){if("boolean"!=typeof e)throw new m(t,"boolean",e)}function x(e,t,r){return null!=e&&u(e,t)?e[t]:r}var M=y(((e,t,i=null)=>{let n=x(i,"allowArray",!1),o=x(i,"allowFunction",!1);if(!x(i,"nullable",!1)&&null===e||!n&&r(e)||"object"!=typeof e&&(!o||"function"!=typeof e))throw new m(t,"Object",e)})),U=y(((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new m(t,"a dictionary",e)})),j=y(((e,t,i=0)=>{if(!r(e))throw new m(t,"Array",e);if(e.length<i){throw new w(t,e,`must be longer than ${i}`)}}));var L=y(((e,t="buffer")=>{if(!A(e))throw new m(t,["Buffer","TypedArray","DataView"],e)}));var N=y(((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new m(t,"AbortSignal",e)})),D=y(((e,t)=>{if("function"!=typeof e)throw new m(t,"Function",e)})),F=y(((e,t)=>{if("function"!=typeof e||S(e))throw new m(t,"Function",e)})),W=y(((e,t)=>{if(void 0!==e)throw new m(t,"undefined",e)}));var $=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function z(e,t){if(typeof e>"u"||!f($,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}t.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if(typeof e>"u"&&(e=r),"string"==typeof e){if(null===f(I,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=c(e,8)}return O(e,t),e},validateArray:j,validateStringArray:function(e,t){j(e,t);for(let r=0;r<e.length;r++)R(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){j(e,t);for(let r=0;r<e.length;r++)P(e[r],`${t}[${r}]`)},validateBoolean:P,validateBuffer:L,validateDictionary:U,validateEncoding:function(e,t){let r=E(t),i=e.length;if("hex"===r&&i%2!=0)throw new w("encoding",t,`is invalid for data of length ${i}`)},validateFunction:D,validateInt32:C,validateInteger:T,validateNumber:function(e,t,r=void 0,i){if("number"!=typeof e)throw new m(t,"number",e);if(null!=r&&e<r||null!=i&&e>i||(null!=r||null!=i)&&a(e))throw new _(t,`${null!=r?`>= ${r}`:""}${null!=r&&null!=i?" && ":""}${null!=i?`<= ${i}`:""}`,e)},validateObject:M,validateOneOf:B,validatePlainFunction:F,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!=+e>>>0||e>65535||0===e&&!r)throw new b(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(R(e,t),void 0===k[e])throw void 0!==k[p(e)]?new v(e+" (signals must use all capital letters)"):new v(e)},validateString:R,validateUint32:O,validateUndefined:W,validateUnion:function(e,t,r){if(!i(r,e))throw new m(t,`('${n(r,"|")}')`,e)},validateAbortSignal:N,validateLinkHeaderValue:function(e){if("string"==typeof e)return z(e,"hints"),e;if(r(e)){let t=e.length,r="";if(0===t)return r;for(let i=0;i<t;i++){let n=e[i];z(n,"hints"),r+=n,i!==t-1&&(r+=", ")}return r}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}})),ro=ei(((e,t)=>{Yn(),Un(),ii();var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch{try{return r.call(null,e,0)}catch{return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch{r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch{i=s}}();var l,h=[],c=!1,u=-1;function f(){!c||!l||(c=!1,l.length?h=l.concat(h):u=-1,h.length&&d())}function d(){if(!c){var e=a(f);c=!0;for(var t=h.length;t;){for(l=h,h=[];++u<t;)l&&l[u].run();u=-1,t=h.length}l=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch{try{return i.call(null,e)}catch{return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new p(e,t)),1===h.length&&!c&&a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}})),io=ei(((e,t)=>{Yn(),Un(),ii();var{Symbol:r,SymbolAsyncIterator:i,SymbolIterator:n,SymbolFor:o}=Jn(),s=r("kDestroyed"),a=r("kIsErrored"),l=r("kIsReadable"),h=r("kIsDisturbed"),c=o("nodejs.webstream.isClosedPromise"),u=o("nodejs.webstream.controllerErrorFunction");function f(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function d(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||p(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function y(e){return!(!e||p(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function b(e){return!(!e||p(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function m(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!!(e.destroyed||e[s]||null!=i&&i.destroyed)}function w(e){if(!d(e))return null;if(!0===e.writableEnded)return!0;let t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof t?.ended?null:t.ended)}function _(e,t){if(!f(e))return null;let r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof r?.endEmitted?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function v(e){return e&&null!=e[l]?e[l]:"boolean"!=typeof e?.readable?null:!m(e)&&(f(e)&&e.readable&&!_(e))}function E(e){return"boolean"!=typeof e?.writable?null:!m(e)&&(d(e)&&e.writable&&!w(e))}function S(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function A(e){return"boolean"==typeof e._sent100&&S(e)}t.exports={kDestroyed:s,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[h])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:h,isErrored:function(e){var t,r,i,n,o,s,l,h,c,u;return!(!e||!(null!==(t=null!==(r=null!==(i=null!==(n=null!==(o=null!==(s=e[a])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==n?n:null===(l=e._readableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==i?i:null===(h=e._writableState)||void 0===h?void 0:h.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null!==(u=e._writableState)&&void 0!==u&&u.errored))},kIsErrored:a,isReadable:v,kIsReadable:l,kIsClosedPromise:c,kControllerErrorFunction:u,isClosed:function(e){if(!p(e))return null;if("boolean"==typeof e.closed)return e.closed;let t=e._writableState,r=e._readableState;return"boolean"==typeof t?.closed||"boolean"==typeof r?.closed?t?.closed||r?.closed:"boolean"==typeof e._closed&&S(e)?e._closed:null},isDestroyed:m,isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return p(e)?!!m(e)||!(!1!==t?.readable&&v(e)||!1!==t?.writable&&E(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[i]:!1===t?"function"==typeof e[n]:"function"==typeof e[i]||"function"==typeof e[n])},isReadableNodeStream:f,isReadableStream:g,isReadableEnded:function(e){if(!f(e))return null;if(!0===e.readableEnded)return!0;let t=e._readableState;return!(!t||t.errored)&&("boolean"!=typeof t?.ended?null:t.ended)},isReadableFinished:_,isReadableErrored:function(e){var t,r;return p(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:p,isWebStream:function(e){return g(e)||y(e)||b(e)},isWritable:E,isWritableNodeStream:d,isWritableStream:y,isWritableEnded:w,isWritableFinished:function(e,t){if(!d(e))return null;if(!0===e.writableFinished)return!0;let r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof r?.finished?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return p(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},isServerResponse:A,willEmitClose:function(e){if(!p(e))return null;let t=e._writableState,r=e._readableState,i=t||r;return!i&&A(e)||!!(i&&i.autoDestroy&&i.emitClose&&!1===i.closed)},isTransformStream:b}})),no=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),{AbortError:i,codes:n}=eo(),{ERR_INVALID_ARG_TYPE:o,ERR_STREAM_PREMATURE_CLOSE:s}=n,{kEmptyObject:a,once:l}=Xn(),{validateAbortSignal:h,validateFunction:c,validateObject:u,validateBoolean:f}=to(),{Promise:d,PromisePrototypeThen:p}=Jn(),{isClosed:g,isReadable:y,isReadableNodeStream:b,isReadableStream:m,isReadableFinished:w,isReadableErrored:_,isWritable:v,isWritableNodeStream:E,isWritableStream:S,isWritableFinished:A,isWritableErrored:k,isNodeStream:I,willEmitClose:T,kIsClosedPromise:C}=io();var O=()=>{};function R(e,t,n){var f,d;if(2===arguments.length?(n=t,t=a):null==t?t=a:u(t,"options"),c(n,"callback"),h(t.signal,"options.signal"),n=l(n),m(e)||S(e))return function(e,t,n){let o=!1,s=O;if(t.signal)if(s=()=>{o=!0,n.call(e,new i(void 0,{cause:t.signal.reason}))},t.signal.aborted)r.nextTick(s);else{let r=n;n=l(((...i)=>{t.signal.removeEventListener("abort",s),r.apply(e,i)})),t.signal.addEventListener("abort",s)}let a=(...t)=>{o||r.nextTick((()=>n.apply(e,t)))};return p(e[C].promise,a,a),O}(e,t,n);if(!I(e))throw new o("stream",["ReadableStream","WritableStream","Stream"],e);let R=null!==(f=t.readable)&&void 0!==f?f:b(e),B=null!==(d=t.writable)&&void 0!==d?d:E(e),P=e._writableState,x=e._readableState,M=()=>{e.writable||L()},U=T(e)&&b(e)===R&&E(e)===B,j=A(e,!1),L=()=>{j=!0,e.destroyed&&(U=!1),(!U||e.readable&&!R)&&(!R||N)&&n.call(e)},N=w(e,!1),D=()=>{N=!0,e.destroyed&&(U=!1),(!U||e.writable&&!B)&&(!B||j)&&n.call(e)},F=t=>{n.call(e,t)},W=g(e),$=()=>{W=!0;let t=k(e)||_(e);return t&&"boolean"!=typeof t?n.call(e,t):R&&!N&&b(e,!0)&&!w(e,!1)?n.call(e,new s):!B||j||A(e,!1)?void n.call(e):n.call(e,new s)},z=()=>{W=!0;let t=k(e)||_(e);if(t&&"boolean"!=typeof t)return n.call(e,t);n.call(e)},H=()=>{e.req.on("finish",L)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?B&&!P&&(e.on("end",M),e.on("close",M)):(e.on("complete",L),U||e.on("abort",$),e.req?H():e.on("request",H)),!U&&"boolean"==typeof e.aborted&&e.on("aborted",$),e.on("end",D),e.on("finish",L),!1!==t.error&&e.on("error",F),e.on("close",$),W?r.nextTick($):null!=P&&P.errorEmitted||null!=x&&x.errorEmitted?U||r.nextTick(z):(!R&&(!U||y(e))&&(j||!1===v(e))||!B&&(!U||v(e))&&(N||!1===y(e))||x&&e.req&&e.aborted)&&r.nextTick(z);let q=()=>{n=O,e.removeListener("aborted",$),e.removeListener("complete",L),e.removeListener("abort",$),e.removeListener("request",H),e.req&&e.req.removeListener("finish",L),e.removeListener("end",M),e.removeListener("close",M),e.removeListener("finish",L),e.removeListener("end",D),e.removeListener("error",F),e.removeListener("close",$)};if(t.signal&&!W){let o=()=>{let r=n;q(),r.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)r.nextTick(o);else{let r=n;n=l(((...i)=>{t.signal.removeEventListener("abort",o),r.apply(e,i)})),t.signal.addEventListener("abort",o)}}return q}t.exports=R,t.exports.finished=function(e,t){var r;let i=!1;return null===t&&(t=a),null!==(r=t)&&void 0!==r&&r.cleanup&&(f(t.cleanup,"cleanup"),i=t.cleanup),new d(((r,n)=>{let o=R(e,t,(e=>{i&&o(),e?n(e):r()}))}))}})),oo=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:o}=eo(),{Symbol:s}=Jn(),{kDestroyed:a,isDestroyed:l,isFinished:h,isServerRequest:c}=io(),u=s("kDestroy"),f=s("kConstruct");function d(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function p(e,t,i){let n=!1;function o(t){if(n)return;n=!0;let o=e._readableState,s=e._writableState;d(t,s,o),s&&(s.closed=!0),o&&(o.closed=!0),"function"==typeof i&&i(t),t?r.nextTick(g,e,t):r.nextTick(y,e)}try{e._destroy(t||null,o)}catch(e){o(e)}}function g(e,t){b(e,t),y(e)}function y(e){let t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function b(e,t){let r=e._readableState,i=e._writableState;null!=i&&i.errorEmitted||null!=r&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function m(e,t,i){let n=e._readableState,o=e._writableState;if(null!=o&&o.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=o&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),i?r.nextTick(b,e,t):b(e,t))}function w(e){let t=!1;function i(i){if(t)return void m(e,i??new n);t=!0;let o=e._readableState,s=e._writableState,a=s||o;o&&(o.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(u,i):i?m(e,i,!0):r.nextTick(_,e)}try{e._construct((e=>{r.nextTick(i,e)}))}catch(e){r.nextTick(i,e)}}function _(e){e.emit(f)}function v(e){return e?.setHeader&&"function"==typeof e.abort}function E(e){e.emit("close")}function S(e,t){e.emit("error",t),r.nextTick(E,e)}t.exports={construct:function(e,t){if("function"!=typeof e._construct)return;let i=e._readableState,n=e._writableState;i&&(i.constructed=!1),n&&(n.constructed=!1),e.once(f,t),!(e.listenerCount(f)>1)&&r.nextTick(w,e)},destroyer:function(e,t){!e||l(e)||(!t&&!h(e)&&(t=new o),c(e)?(e.socket=null,e.destroy(t)):v(e)?e.abort():v(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?r.nextTick(S,e,t):r.nextTick(E,e),e.destroyed||(e[a]=!0))},destroy:function(e,t){let r=this._readableState,n=this._writableState,o=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(d(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?p(this,e,t):this.once(u,(function(r){p(this,i(r,e),t)})),this)},undestroy:function(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:m}}));function so(){so.init.call(this)}function ao(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function lo(e){return void 0===e._maxListeners?so.defaultMaxListeners:e._maxListeners}function ho(e,t,r,i){var n,o,s,a;if(ao(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=lo(e))>0&&s.length>n&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function co(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function uo(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=co.bind(i);return n.listener=r,i.wrapFn=n,n}function fo(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):go(n,n.length)}function po(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function go(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}var yo,bo,mo,wo,_o,vo,Eo,So=Zr((()=>{Yn(),Un(),ii(),mo="object"==typeof Reflect?Reflect:null,wo=mo&&"function"==typeof mo.apply?mo.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},bo=mo&&"function"==typeof mo.ownKeys?mo.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},_o=Number.isNaN||function(e){return e!=e},yo=so,so.EventEmitter=so,so.prototype._events=void 0,so.prototype._eventsCount=0,so.prototype._maxListeners=void 0,vo=10,Object.defineProperty(so,"defaultMaxListeners",{enumerable:!0,get:function(){return vo},set:function(e){if("number"!=typeof e||e<0||_o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");vo=e}}),so.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},so.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||_o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},so.prototype.getMaxListeners=function(){return lo(this)},so.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=n[e];if(void 0===a)return!1;if("function"==typeof a)wo(a,this,t);else{var l=a.length,h=go(a,l);for(r=0;r<l;++r)wo(h[r],this,t)}return!0},so.prototype.addListener=function(e,t){return ho(this,e,t,!1)},so.prototype.on=so.prototype.addListener,so.prototype.prependListener=function(e,t){return ho(this,e,t,!0)},so.prototype.once=function(e,t){return ao(t),this.on(e,uo(this,e,t)),this},so.prototype.prependOnceListener=function(e,t){return ao(t),this.prependListener(e,uo(this,e,t)),this},so.prototype.removeListener=function(e,t){var r,i,n,o,s;if(ao(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,n=o;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},so.prototype.off=so.prototype.removeListener,so.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},so.prototype.listeners=function(e){return fo(this,e,!0)},so.prototype.rawListeners=function(e){return fo(this,e,!1)},so.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):po.call(e,t)},so.prototype.listenerCount=po,so.prototype.eventNames=function(){return this._eventsCount>0?bo(this._events):[]},(Eo=yo).EventEmitter,Eo.defaultMaxListeners,Eo.init,Eo.listenerCount,Eo.EventEmitter,Eo.defaultMaxListeners,Eo.init,Eo.listenerCount})),Ao={};ti(Ao,{EventEmitter:()=>ko,default:()=>Eo,defaultMaxListeners:()=>Io,init:()=>To,listenerCount:()=>Co,on:()=>Oo,once:()=>Ro});var ko,Io,To,Co,Oo,Ro,Bo=Zr((()=>{Yn(),Un(),ii(),So(),So(),Eo.once=function(e,t){return new Promise(((r,i)=>{function n(...t){void 0!==o&&e.removeListener("error",o),r(t)}let o;"error"!==t&&(o=t=>{e.removeListener(name,n),i(t)},e.once("error",o)),e.once(t,n)}))},Eo.on=function(e,t){let r=[],i=[],n=null,o=!1,s={async next(){let e=r.shift();if(e)return createIterResult(e,!1);if(n){let e=Promise.reject(n);return n=null,e}return o?createIterResult(void 0,!0):new Promise(((e,t)=>i.push({resolve:e,reject:t})))},async return(){e.removeListener(t,a),e.removeListener("error",l),o=!0;for(let e of i)e.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(r){n=r,e.removeListener(t,a),e.removeListener("error",l)},[Symbol.asyncIterator](){return this}};return e.on(t,a),e.on("error",l),s;function a(...e){let t=i.shift();t?t.resolve(createIterResult(e,!1)):r.push(e)}function l(e){o=!0;let t=i.shift();t?t.reject(e):n=e,s.return()}},({EventEmitter:ko,defaultMaxListeners:Io,init:To,listenerCount:Co,on:Oo,once:Ro}=Eo)})),Po=ei(((e,t)=>{Yn(),Un(),ii();var{ArrayIsArray:r,ObjectSetPrototypeOf:i}=Jn(),{EventEmitter:n}=(Bo(),ri(Ao));function o(e){n.call(this,e)}function s(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}i(o.prototype,n.prototype),i(o,n),o.prototype.pipe=function(e,t){let r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",o),!e._isStdio&&(!t||!1!==t.end)&&(r.on("end",l),r.on("close",h));let a=!1;function l(){a||(a=!0,e.end())}function h(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){u(),0===n.listenerCount(this,"error")&&this.emit("error",e)}function u(){r.removeListener("data",i),e.removeListener("drain",o),r.removeListener("end",l),r.removeListener("close",h),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return s(r,"error",c),s(e,"error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e},t.exports={Stream:o,prependListener:s}})),xo=ei(((e,t)=>{Yn(),Un(),ii();var{AbortError:r,codes:i}=eo(),{isNodeStream:n,isWebStream:o,kControllerErrorFunction:s}=io(),a=no(),{ERR_INVALID_ARG_TYPE:l}=i;t.exports.addAbortSignal=function(e,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new l(t,"AbortSignal",e)})(e,"signal"),!n(r)&&!o(r))throw new l("stream",["ReadableStream","WritableStream","Stream"],r);return t.exports.addAbortSignalNoValidate(e,r)},t.exports.addAbortSignalNoValidate=function(e,t){if("object"!=typeof e||!("aborted"in e))return t;let i=n(t)?()=>{t.destroy(new r(void 0,{cause:e.reason}))}:()=>{t[s](new r(void 0,{cause:e.reason}))};return e.aborted?i():(e.addEventListener("abort",i),a(t,(()=>e.removeEventListener("abort",i)))),t}})),Mo=ei(((e,t)=>{Yn(),Un(),ii();var{StringPrototypeSlice:r,SymbolIterator:i,TypedArrayPrototypeSet:n,Uint8Array:o}=Jn(),{Buffer:s}=(Gn(),ri(jn)),{inspect:a}=Xn();t.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){let t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;let e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return s.alloc(0);let t=s.allocUnsafe(e>>>0),r=this.head,i=0;for(;r;)n(t,r.data,i),i+=r.data.length,r=r.next;return t}consume(e,t){let r=this.head.data;if(e<r.length){let t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",i=this.head,n=0;do{let o=i.data;if(!(e>o.length)){e===o.length?(t+=o,++n,i.next?this.head=i.next:this.head=this.tail=null):(t+=r(o,0,e),this.head=i,i.data=r(o,e));break}t+=o,e-=o.length,++n}while(null!==(i=i.next));return this.length-=n,t}_getBuffer(e){let t=s.allocUnsafe(e),r=e,i=this.head,a=0;do{let s=i.data;if(!(e>s.length)){e===s.length?(n(t,s,r-e),++a,i.next?this.head=i.next:this.head=this.tail=null):(n(t,new o(s.buffer,s.byteOffset,e),r-e),this.head=i,i.data=s.slice(e));break}n(t,s,r-e),e-=s.length,++a}while(null!==(i=i.next));return this.length-=a,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return a(this,{...t,depth:0,customInspect:!1})}}})),Uo=ei(((e,t)=>{Yn(),Un(),ii();var{MathFloor:r,NumberIsInteger:i}=Jn(),{ERR_INVALID_ARG_VALUE:n}=eo().codes;function o(e){return e?16:16384}t.exports={getHighWaterMark:function(e,t,s,a){let l=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,a,s);if(null!=l){if(!i(l)||l<0){throw new n(a?`options.${s}`:"options.highWaterMark",l)}return r(l)}return o(e.objectMode)},getDefaultHighWaterMark:o}}));function jo(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function Lo(e,t,r){for(var i,n,o=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(Rs[(n=i)>>18&63]+Rs[n>>12&63]+Rs[n>>6&63]+Rs[63&n]);return o.join("")}function No(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,Do.prototype),t}function Do(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return $o(e)}return Fo(e,t,r)}function Fo(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!Do.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|qo(e,t),i=No(r),n=i.write(e,t);return n!==r&&(i=i.slice(0,n)),i}(e,t);if(ArrayBuffer.isView(e))return zo(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ys(e,ArrayBuffer)||e&&ys(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ys(e,SharedArrayBuffer)||e&&ys(e.buffer,SharedArrayBuffer)))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(i,Do.prototype),i}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return Do.from(i,t,r);var n=function(e){if(Do.isBuffer(e)){var t=0|Ho(e.length),r=No(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||bs(e.length)?No(0):zo(e):"Buffer"===e.type&&Array.isArray(e.data)?zo(e.data):void 0}(e);if(n)return n;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Do.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function Wo(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function $o(e){return Wo(e),No(e<0?0:0|Ho(e))}function zo(e){for(var t=e.length<0?0:0|Ho(e.length),r=No(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function Ho(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function qo(e,t){if(Do.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ys(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ds(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ps(e).length;default:if(n)return i?-1:ds(e).length;t=(""+t).toLowerCase(),n=!0}}function Vo(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return ss(this,t,r);case"utf8":case"utf-8":return is(this,t,r);case"ascii":return ns(this,t,r);case"latin1":case"binary":return os(this,t,r);case"base64":return rs(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return as(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function Ko(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function Go(e,t,r,i,n){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),bs(r=+r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=Do.from(t,i)),Do.isBuffer(t))return 0===t.length?-1:Yo(e,t,r,i,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Yo(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function Yo(e,t,r,i,n){var o,s=1,a=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,r/=2}function h(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var c=-1;for(o=r;o<a;o++)if(h(e,o)===h(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var u=!0,f=0;f<l;f++)if(h(e,o+f)!==h(t,f)){u=!1;break}if(u)return o}return-1}function Qo(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var o=t.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(t.substr(2*s,2),16);if(bs(a))return s;e[r+s]=a}return s}function Jo(e,t,r,i){return gs(ds(t,e.length-r),e,r,i)}function Xo(e,t,r,i){return gs(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function Zo(e,t,r,i){return Xo(e,t,r,i)}function es(e,t,r,i){return gs(ps(t),e,r,i)}function ts(e,t,r,i){return gs(function(e,t){for(var r,i,n,o=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n=r%256,o.push(n),o.push(i);return o}(t,e.length-r),e,r,i)}function rs(e,t,r){return 0===t&&r===e.length?Ls.fromByteArray(e):Ls.fromByteArray(e.slice(t,r))}function is(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var o,s,a,l,h=e[n],c=null,u=h>239?4:h>223?3:h>191?2:1;if(n+u<=r)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=e[n+1]))&&(l=(31&h)<<6|63&o)>127&&(c=l);break;case 3:o=e[n+1],s=e[n+2],128==(192&o)&&128==(192&s)&&(l=(15&h)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[n+1],s=e[n+2],a=e[n+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),n+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return r}(i)}function ns(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function os(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function ss(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",o=t;o<r;++o)n+=Ws[e[o]];return n}function as(e,t,r){for(var i=e.slice(t,r),n="",o=0;o<i.length;o+=2)n+=String.fromCharCode(i[o]+256*i[o+1]);return n}function ls(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function hs(e,t,r,i,n,o){if(!Do.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function cs(e,t,r,i,n,o){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function us(e,t,r,i,n){return t=+t,r>>>=0,n||cs(e,0,r,4),Ns.write(e,t,r,i,23,4),r+4}function fs(e,t,r,i,n){return t=+t,r>>>=0,n||cs(e,0,r,8),Ns.write(e,t,r,i,52,8),r+8}function ds(e,t){var r;t=t||1/0;for(var i=e.length,n=null,o=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function ps(e){return Ls.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Fs,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function gs(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function ys(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function bs(e){return e!=e}function ms(e,t){for(var r in e)t[r]=e[r]}function ws(e,t,r){return Hs(e,t,r)}function _s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(Vs.isEncoding===Ks||!Ks(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=Ss,this.end=As,t=4;break;case"utf8":this.fillLast=Es,t=4;break;case"base64":this.text=ks,this.end=Is,t=3;break;default:return this.write=Ts,void(this.end=Cs)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Vs.allocUnsafe(t)}function vs(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function Es(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function Ss(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function As(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function ks(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function Is(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function Ts(e){return e.toString(this.encoding)}function Cs(e){return e&&e.length?this.write(e):""}var Os,Rs,Bs,Ps,xs,Ms,Us,js,Ls,Ns,Ds,Fs,Ws,$s,zs,Hs,qs,Vs,Ks,Gs=Zr((()=>{for(Yn(),Un(),ii(),Os={byteLength:function(e){var t=jo(e),r=t[0],i=t[1];return 3*(r+i)/4-i},toByteArray:function(e){var t,r,i=jo(e),n=i[0],o=i[1],s=new Ps(function(e,t,r){return 3*(t+r)/4-r}(0,n,o)),a=0,l=o>0?n-4:n;for(r=0;r<l;r+=4)t=Bs[e.charCodeAt(r)]<<18|Bs[e.charCodeAt(r+1)]<<12|Bs[e.charCodeAt(r+2)]<<6|Bs[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===o&&(t=Bs[e.charCodeAt(r)]<<2|Bs[e.charCodeAt(r+1)]>>4,s[a++]=255&t),1===o&&(t=Bs[e.charCodeAt(r)]<<10|Bs[e.charCodeAt(r+1)]<<4|Bs[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},fromByteArray:function(e){for(var t,r=e.length,i=r%3,n=[],o=0,s=r-i;o<s;o+=16383)n.push(Lo(e,o,o+16383>s?s:o+16383));return 1===i?(t=e[r-1],n.push(Rs[t>>2]+Rs[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],n.push(Rs[t>>10]+Rs[t>>4&63]+Rs[t<<2&63]+"=")),n.join("")}},Rs=[],Bs=[],Ps=typeof Uint8Array<"u"?Uint8Array:Array,xs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ms=0,64;Ms<64;++Ms)Rs[Ms]=xs[Ms],Bs[xs.charCodeAt(Ms)]=Ms;Bs["-".charCodeAt(0)]=62,Bs["_".charCodeAt(0)]=63,Us={read:function(e,t,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,h=l>>1,c=-7,u=r?n-1:0,f=r?-1:1,d=e[t+u];for(u+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+e[t+u],u+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=i;c>0;s=256*s+e[t+u],u+=f,c-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=h}return(d?-1:1)*s*Math.pow(2,o-i)},write:function(e,t,r,i,n,o){var s,a,l,h=8*o-n-1,c=(1<<h)-1,u=c>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?f/l:f*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(t*l-1)*Math.pow(2,n),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,n),s=0));n>=8;e[r+d]=255&a,d+=p,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;e[r+d]=255&s,d+=p,s/=256,h-=8);e[r+d-p]|=128*g}},js={},Ls=Os,Ns=Us,Ds="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,js.Buffer=Do,js.SlowBuffer=function(e){return+e!=e&&(e=0),Do.alloc(+e)},js.INSPECT_MAX_BYTES=50,js.kMaxLength=2147483647,Do.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),Do.TYPED_ARRAY_SUPPORT||typeof console>"u"||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Do.prototype,"parent",{enumerable:!0,get:function(){if(Do.isBuffer(this))return this.buffer}}),Object.defineProperty(Do.prototype,"offset",{enumerable:!0,get:function(){if(Do.isBuffer(this))return this.byteOffset}}),Do.poolSize=8192,Do.from=function(e,t,r){return Fo(e,t,r)},Object.setPrototypeOf(Do.prototype,Uint8Array.prototype),Object.setPrototypeOf(Do,Uint8Array),Do.alloc=function(e,t,r){return function(e,t,r){return Wo(e),e<=0?No(e):void 0!==t?"string"==typeof r?No(e).fill(t,r):No(e).fill(t):No(e)}(e,t,r)},Do.allocUnsafe=function(e){return $o(e)},Do.allocUnsafeSlow=function(e){return $o(e)},Do.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Do.prototype},Do.compare=function(e,t){if(ys(e,Uint8Array)&&(e=Do.from(e,e.offset,e.byteLength)),ys(t,Uint8Array)&&(t=Do.from(t,t.offset,t.byteLength)),!Do.isBuffer(e)||!Do.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},Do.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Do.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Do.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=Do.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(ys(o,Uint8Array)&&(o=Do.from(o)),!Do.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},Do.byteLength=qo,Do.prototype._isBuffer=!0,Do.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ko(this,t,t+1);return this},Do.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ko(this,t,t+3),Ko(this,t+1,t+2);return this},Do.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ko(this,t,t+7),Ko(this,t+1,t+6),Ko(this,t+2,t+5),Ko(this,t+3,t+4);return this},Do.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?is(this,0,e):Vo.apply(this,arguments)},Do.prototype.toLocaleString=Do.prototype.toString,Do.prototype.equals=function(e){if(!Do.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Do.compare(this,e)},Do.prototype.inspect=function(){var e="",t=js.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},Ds&&(Do.prototype[Ds]=Do.prototype.inspect),Do.prototype.compare=function(e,t,r,i,n){if(ys(e,Uint8Array)&&(e=Do.from(e,e.offset,e.byteLength)),!Do.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(o,s),l=this.slice(i,n),h=e.slice(t,r),c=0;c<a;++c)if(l[c]!==h[c]){o=l[c],s=h[c];break}return o<s?-1:s<o?1:0},Do.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Do.prototype.indexOf=function(e,t,r){return Go(this,e,t,r,!0)},Do.prototype.lastIndexOf=function(e,t,r){return Go(this,e,t,r,!1)},Do.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return Qo(this,e,t,r);case"utf8":case"utf-8":return Jo(this,e,t,r);case"ascii":return Xo(this,e,t,r);case"latin1":case"binary":return Zo(this,e,t,r);case"base64":return es(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ts(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},Do.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Do.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,Do.prototype),i},Do.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||ls(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i},Do.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||ls(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},Do.prototype.readUInt8=function(e,t){return e>>>=0,t||ls(e,1,this.length),this[e]},Do.prototype.readUInt16LE=function(e,t){return e>>>=0,t||ls(e,2,this.length),this[e]|this[e+1]<<8},Do.prototype.readUInt16BE=function(e,t){return e>>>=0,t||ls(e,2,this.length),this[e]<<8|this[e+1]},Do.prototype.readUInt32LE=function(e,t){return e>>>=0,t||ls(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Do.prototype.readUInt32BE=function(e,t){return e>>>=0,t||ls(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Do.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||ls(e,t,this.length);for(var i=this[e],n=1,o=0;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},Do.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||ls(e,t,this.length);for(var i=t,n=1,o=this[e+--i];i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},Do.prototype.readInt8=function(e,t){return e>>>=0,t||ls(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Do.prototype.readInt16LE=function(e,t){e>>>=0,t||ls(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Do.prototype.readInt16BE=function(e,t){e>>>=0,t||ls(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Do.prototype.readInt32LE=function(e,t){return e>>>=0,t||ls(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Do.prototype.readInt32BE=function(e,t){return e>>>=0,t||ls(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Do.prototype.readFloatLE=function(e,t){return e>>>=0,t||ls(e,4,this.length),Ns.read(this,e,!0,23,4)},Do.prototype.readFloatBE=function(e,t){return e>>>=0,t||ls(e,4,this.length),Ns.read(this,e,!1,23,4)},Do.prototype.readDoubleLE=function(e,t){return e>>>=0,t||ls(e,8,this.length),Ns.read(this,e,!0,52,8)},Do.prototype.readDoubleBE=function(e,t){return e>>>=0,t||ls(e,8,this.length),Ns.read(this,e,!1,52,8)},Do.prototype.writeUIntLE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||hs(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},Do.prototype.writeUIntBE=function(e,t,r,i){e=+e,t>>>=0,r>>>=0,i||hs(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},Do.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,1,255,0),this[t]=255&e,t+1},Do.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Do.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Do.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Do.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Do.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);hs(this,e,t,r,n-1,-n)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},Do.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);hs(this,e,t,r,n-1,-n)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s|0)-a&255;return t+r},Do.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Do.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Do.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Do.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Do.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||hs(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Do.prototype.writeFloatLE=function(e,t,r){return us(this,e,t,!0,r)},Do.prototype.writeFloatBE=function(e,t,r){return us(this,e,t,!1,r)},Do.prototype.writeDoubleLE=function(e,t,r){return fs(this,e,t,!0,r)},Do.prototype.writeDoubleBE=function(e,t,r){return fs(this,e,t,!1,r)},Do.prototype.copy=function(e,t,r,i){if(!Do.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var o=n-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return n},Do.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!Do.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=Do.isBuffer(e)?e:Do.from(e,i),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=s[o%a]}return this},Fs=/[^+/0-9A-Za-z-_]/g,Ws=function(){for(var e=new Array(256),t=0;t<16;++t)for(var r=16*t,i=0;i<16;++i)e[r+i]="0123456789abcdef"[t]+"0123456789abcdef"[i];return e}(),js.Buffer,js.INSPECT_MAX_BYTES,js.kMaxLength,$s={},(Hs=(zs=js).Buffer).from&&Hs.alloc&&Hs.allocUnsafe&&Hs.allocUnsafeSlow?$s=zs:(ms(zs,$s),$s.Buffer=ws),ws.prototype=Object.create(Hs.prototype),ms(Hs,ws),ws.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return Hs(e,t,r)},ws.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=Hs(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},ws.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return Hs(e)},ws.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return zs.SlowBuffer(e)},qs={},Vs=$s.Buffer,Ks=Vs.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},qs.StringDecoder=_s,_s.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},_s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},_s.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=vs(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||-2===n?0:(n=vs(t[i]))>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||-2===n?0:(n=vs(t[i]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},_s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},qs.StringDecoder,qs.StringDecoder})),Ys={};ti(Ys,{StringDecoder:()=>Qs,default:()=>qs});var Qs,Js=Zr((()=>{Yn(),Un(),ii(),Gs(),Gs(),Qs=qs.StringDecoder})),Xs=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),{PromisePrototypeThen:i,SymbolAsyncIterator:n,SymbolIterator:o}=Jn(),{Buffer:s}=(Gn(),ri(jn)),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:l}=eo().codes;t.exports=function(e,t,h){let c,u;if("string"==typeof t||t instanceof s)return new e({objectMode:!0,...h,read(){this.push(t),this.push(null)}});if(t&&t[n])u=!0,c=t[n]();else{if(!t||!t[o])throw new a("iterable",["Iterable"],t);u=!1,c=t[o]()}let f=new e({objectMode:!0,highWaterMark:1,...h}),d=!1;return f._read=function(){d||(d=!0,async function(){for(;;){try{let{value:e,done:t}=u?await c.next():c.next();if(t)f.push(null);else{let t=e&&"function"==typeof e.then?await e:e;if(null===t)throw d=!1,new l;if(f.push(t))continue;d=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){i(async function(e){let t=null!=e,r="function"==typeof c.throw;if(t&&r){let{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"==typeof c.return){let{value:e}=await c.return();await e}}(e),(()=>r.nextTick(t,e)),(i=>r.nextTick(t,i||e)))},f}})),Zs=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),{ArrayPrototypeIndexOf:i,NumberIsInteger:n,NumberIsNaN:o,NumberParseInt:s,ObjectDefineProperties:a,ObjectKeys:l,ObjectSetPrototypeOf:h,Promise:c,SafeSet:u,SymbolAsyncIterator:f,Symbol:d}=Jn();t.exports=N,N.ReadableState=L;var{EventEmitter:p}=(Bo(),ri(Ao)),{Stream:g,prependListener:y}=Po(),{Buffer:b}=(Gn(),ri(jn)),{addAbortSignal:m}=xo(),w=no(),_=Xn().debuglog("stream",(e=>{_=e})),v=Mo(),E=oo(),{getHighWaterMark:S,getDefaultHighWaterMark:A}=Uo(),{aggregateTwoErrors:k,codes:{ERR_INVALID_ARG_TYPE:I,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R}}=eo(),{validateObject:B}=to(),P=d("kPaused"),{StringDecoder:x}=(Js(),ri(Ys)),M=Xs();h(N.prototype,g.prototype),h(N,g);var U=()=>{},{errorOrDestroy:j}=E;function L(e,t,r){"boolean"!=typeof r&&(r=t instanceof ra()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?S(this,e,"readableHighWaterMark",r):A(!1),this.buffer=new v,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[P]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new x(e.encoding),this.encoding=e.encoding)}function N(e){if(!(this instanceof N))return new N(e);let t=this instanceof ra();this._readableState=new L(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&m(e.signal,this)),g.call(this,e),E.construct(this,(()=>{this._readableState.needReadable&&q(this,this._readableState)}))}function D(e,t,r,i){_("readableAddChunk",t);let n,o=e._readableState;if(o.objectMode||("string"==typeof t?(r=r||o.defaultEncoding,o.encoding!==r&&(i&&o.encoding?t=b.from(t,r).toString(o.encoding):(t=b.from(t,r),r=""))):t instanceof b?r="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),r=""):null!=t&&(n=new I("chunk",["string","Buffer","Uint8Array"],t))),n)j(e,n);else if(null===t)o.reading=!1,function(e,t){if(_("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?z(e):(t.needReadable=!1,t.emittedReadable=!0,H(e))}}(e,o);else if(o.objectMode||t&&t.length>0)if(i)if(o.endEmitted)j(e,new R);else{if(o.destroyed||o.errored)return!1;F(e,o,t,!0)}else if(o.ended)j(e,new O);else{if(o.destroyed||o.errored)return!1;o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?F(e,o,t,!1):q(e,o)):F(e,o,t,!1)}else i||(o.reading=!1,q(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function F(e,t,r,i){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&z(e)),q(e,t)}N.prototype.destroy=E.destroy,N.prototype._undestroy=E.undestroy,N.prototype._destroy=function(e,t){t(e)},N.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},N.prototype.push=function(e,t){return D(this,e,t,!1)},N.prototype.unshift=function(e,t){return D(this,e,t,!0)},N.prototype.isPaused=function(){let e=this._readableState;return!0===e[P]||!1===e.flowing},N.prototype.setEncoding=function(e){let t=new x(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,i="";for(let e of r)i+=t.write(e);return r.clear(),""!==i&&r.push(i),this._readableState.length=i.length,this};var W;function $(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function z(e){let t=e._readableState;_("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(H,e))}function H(e){let t=e._readableState;_("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Q(e)}function q(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,r.nextTick(V,e,t))}function V(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){let r=t.length;if(_("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function K(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[P]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function G(e){_("readable nexttick read 0"),e.read(0)}function Y(e,t){_("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Q(e),t.flowing&&!t.reading&&e.read(0)}function Q(e){let t=e._readableState;for(_("flow",t.flowing);t.flowing&&null!==e.read(););}function J(e,t){"function"!=typeof e.read&&(e=N.wrap(e,{objectMode:!0}));let r=async function*(e,t){let r=U;function i(t){this===e?(r(),r=U):r=t}e.on("readable",i);let n,o=w(e,{writable:!1},(e=>{n=e?k(n,e):null,r(),r=U}));try{for(;;){let t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(n)throw n;if(null===n)return;await new c(i)}}}catch(e){throw n=k(n,e),n}finally{!n&&!1===t?.destroyOnReturn||void 0!==n&&!e._readableState.autoDestroy?(e.off("readable",i),o()):E.destroyer(e,null)}}(e,t);return r.stream=e,r}function X(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Z(e){let t=e._readableState;_("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(ee,t,e))}function ee(e,t){if(_("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)r.nextTick(te,t);else if(e.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&t.destroy()}}function te(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}function re(){return void 0===W&&(W={}),W}N.prototype.read=function(e){_("read",e),void 0===e?e=NaN:n(e)||(e=s(e,10));let t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new C("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Z(this):z(this),null;if(0===(e=$(e,t))&&t.ended)return 0===t.length&&Z(this),null;let i,o=t.needReadable;if(_("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,_("length less than watermark",o)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)o=!1,_("reading, ended or constructing",o);else if(o){_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(e){j(this,e)}t.sync=!1,t.reading||(e=$(r,t))}return i=e>0?X(e,t):null,null===i?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Z(this)),null!==i&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",i)),i},N.prototype._read=function(e){throw new T("_read()")},N.prototype.pipe=function(e,t){let i=this,n=this._readableState;1===n.pipes.length&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new u(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(e),_("pipe count=%d opts=%j",n.pipes.length,t);let o=t&&!1===t.end||e===r.stdout||e===r.stderr?b:a;function s(t,r){_("onunpipe"),t===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,_("cleanup"),e.removeListener("close",p),e.removeListener("finish",g),l&&e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),i.removeListener("end",a),i.removeListener("end",b),i.removeListener("data",f),h=!0,l&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&l())}function a(){_("onend"),e.end()}n.endEmitted?r.nextTick(o):i.once("end",o),e.on("unpipe",s);let l,h=!1;function c(){h||(1===n.pipes.length&&n.pipes[0]===e?(_("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(_("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),i.pause()),l||(l=function(e,t){return function(){let r=e._readableState;r.awaitDrainWriters===t?(_("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(_("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),(!r.awaitDrainWriters||0===r.awaitDrainWriters.size)&&e.listenerCount("data")&&e.resume()}}(i,e),e.on("drain",l))}function f(t){_("ondata");let r=e.write(t);_("dest.write",r),!1===r&&c()}function d(t){if(_("onerror",t),b(),e.removeListener("error",d),0===e.listenerCount("error")){let r=e._writableState||e._readableState;r&&!r.errorEmitted?j(e,t):e.emit("error",t)}}function p(){e.removeListener("finish",g),b()}function g(){_("onfinish"),e.removeListener("close",p),b()}function b(){_("unpipe"),i.unpipe(e)}return i.on("data",f),y(e,"error",d),e.once("close",p),e.once("finish",g),e.emit("pipe",i),!0===e.writableNeedDrain?n.flowing&&c():n.flowing||(_("pipe resume"),i.resume()),e},N.prototype.unpipe=function(e){let t=this._readableState;if(0===t.pipes.length)return this;if(!e){let e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}let r=i(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},N.prototype.on=function(e,t){let i=g.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,_("on readable",n.length,n.reading),n.length?z(this):n.reading||r.nextTick(G,this)),i},N.prototype.addListener=N.prototype.on,N.prototype.removeListener=function(e,t){let i=g.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(K,this),i},N.prototype.off=N.prototype.removeListener,N.prototype.removeAllListeners=function(e){let t=g.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(K,this),t},N.prototype.resume=function(){let e=this._readableState;return e.flowing||(_("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(Y,e,t))}(this,e)),e[P]=!1,this},N.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[P]=!0,this},N.prototype.wrap=function(e){let t=!1;e.on("data",(r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())})),e.on("end",(()=>{this.push(null)})),e.on("error",(e=>{j(this,e)})),e.on("close",(()=>{this.destroy()})),e.on("destroy",(()=>{this.destroy()})),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let r=l(e);for(let t=1;t<r.length;t++){let i=r[t];void 0===this[i]&&"function"==typeof e[i]&&(this[i]=e[i].bind(e))}return this},N.prototype[f]=function(){return J(this)},N.prototype.iterator=function(e){return void 0!==e&&B(e,"options"),J(this,e)},a(N.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),a(L.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[P]},set(e){this[P]=!!e}}}),N._fromList=X,N.from=function(e,t){return M(N,e,t)},N.fromWeb=function(e,t){return re().newStreamReadableFromReadableStream(e,t)},N.toWeb=function(e,t){return re().newReadableStreamFromStreamReadable(e,t)},N.wrap=function(e,t){var r,i;return new N({objectMode:null===(r=null!==(i=e.readableObjectMode)&&void 0!==i?i:e.objectMode)||void 0===r||r,...t,destroy(t,r){E.destroyer(e,t),r(t)}}).wrap(e)}})),ea=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),{ArrayPrototypeSlice:i,Error:n,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:s,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:h,Symbol:c,SymbolHasInstance:u}=Jn();t.exports=x,x.WritableState=B;var{EventEmitter:f}=(Bo(),ri(Ao)),d=Po().Stream,{Buffer:p}=(Gn(),ri(jn)),g=oo(),{addAbortSignal:y}=xo(),{getHighWaterMark:b,getDefaultHighWaterMark:m}=Uo(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:k,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:T}=eo().codes,{errorOrDestroy:C}=g;function O(){}l(x.prototype,d.prototype),l(x,d);var R=c("kOnFinished");function B(e,t,r){"boolean"!=typeof r&&(r=t instanceof ra()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?b(this,e,"writableHighWaterMark",r):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let i=!(!e||!1!==e.decodeStrings);this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=L.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,P(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[R]=[]}function P(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function x(e){let t=this instanceof ra();if(!t&&!o(x,this))return new x(e);this._writableState=new B(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&y(e.signal,this)),d.call(this,e),g.construct(this,(()=>{let e=this._writableState;e.writing||W(this,e),H(this,e)}))}function M(e,t,i,n){let o,s=e._writableState;if("function"==typeof i)n=i,i=s.defaultEncoding;else{if(i){if("buffer"!==i&&!p.isEncoding(i))throw new T(i)}else i=s.defaultEncoding;"function"!=typeof n&&(n=O)}if(null===t)throw new k;if(!s.objectMode)if("string"==typeof t)!1!==s.decodeStrings&&(t=p.from(t,i),i="buffer");else if(t instanceof p)i="buffer";else{if(!d._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=d._uint8ArrayToBuffer(t),i="buffer"}return s.ending?o=new I:s.destroyed&&(o=new S("write")),o?(r.nextTick(n,o),C(e,o,!0),o):(s.pendingcb++,function(e,t,r,i,n){let o=t.objectMode?1:r.length;t.length+=o;let s=t.length<t.highWaterMark;return s||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:i,callback:n}),t.allBuffers&&"buffer"!==i&&(t.allBuffers=!1),t.allNoop&&n!==O&&(t.allNoop=!1)):(t.writelen=o,t.writecb=n,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1),s&&!t.errored&&!t.destroyed}(e,s,t,i,n))}function U(e,t,r,i,n,o,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(n,t.onwrite):e._write(n,o,t.onwrite),t.sync=!1}function j(e,t,r,i){--t.pendingcb,i(r),F(t),C(e,r)}function L(e,t){let i=e._writableState,n=i.sync,o=i.writecb;"function"==typeof o?(i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0,t?(t.stack,i.errored||(i.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?r.nextTick(j,e,i,t,o):j(e,i,t,o)):(i.buffered.length>i.bufferedIndex&&W(e,i),n?null!==i.afterWriteTickInfo&&i.afterWriteTickInfo.cb===o?i.afterWriteTickInfo.count++:(i.afterWriteTickInfo={count:1,cb:o,stream:e,state:i},r.nextTick(N,i.afterWriteTickInfo)):D(e,i,1,o))):C(e,new v)}function N({stream:e,state:t,count:r,cb:i}){return t.afterWriteTickInfo=null,D(e,t,r,i)}function D(e,t,r,i){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,i();t.destroyed&&F(t),H(e,t)}function F(e){if(e.writing)return;for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;let{chunk:i,callback:n}=e.buffered[r],o=e.objectMode?1:i.length;e.length-=o,n(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}let r=e[R].splice(0);for(let t=0;t<r.length;t++){var i;r[t](null!==(i=e.errored)&&void 0!==i?i:new S("end"))}P(e)}function W(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:o}=t,s=r.length-n;if(!s)return;let a=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let n=t.allNoop?O:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===a?r:i(r,a);o.allBuffers=t.allBuffers,U(e,t,!0,t.length,o,"",n),P(t)}else{do{let{chunk:i,encoding:n,callback:s}=r[a];r[a++]=null,U(e,t,!1,o?1:i.length,i,n,s)}while(a<r.length&&!t.writing);a===r.length?P(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(e,t){!t.prefinished&&!t.finalCalled&&("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.finalCalled=!0,function(e,t){let i=!1;function n(n){if(i)C(e,n??v());else if(i=!0,t.pendingcb--,n){let r=t[R].splice(0);for(let e=0;e<r.length;e++)r[e](n);C(e,n,t.sync)}else $(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,r.nextTick(q,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(e){n(e)}t.sync=!1}(e,t)))}function H(e,t,i){$(t)&&(z(e,t),0===t.pendingcb&&(i?(t.pendingcb++,r.nextTick(((e,t)=>{$(t)?q(e,t):t.pendingcb--}),e,t)):$(t)&&(t.pendingcb++,q(e,t))))}function q(e,t){t.pendingcb--,t.finished=!0;let r=t[R].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){let t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}B.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},s(B.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(x,u,{__proto__:null,value:function(e){return!!o(this,e)||this===x&&(e&&e._writableState instanceof B)}}),x.prototype.pipe=function(){C(this,new E)},x.prototype.write=function(e,t,r){return!0===M(this,e,t,r)},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||W(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=h(e)),!p.isEncoding(e))throw new T(e);return this._writableState.defaultEncoding=e,this},x.prototype._write=function(e,t,r){if(!this._writev)throw new _("_write()");this._writev([{chunk:e,encoding:t}],r)},x.prototype._writev=null,x.prototype.end=function(e,t,i){let o,s=this._writableState;if("function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e){let r=M(this,e,t);r instanceof n&&(o=r)}return s.corked&&(s.corked=1,this.uncork()),o||(s.errored||s.ending?s.finished?o=new A("end"):s.destroyed&&(o=new S("end")):(s.ending=!0,H(this,s,!0),s.ended=!0)),"function"==typeof i&&(o||s.finished?r.nextTick(i,o):s[R].push(i)),this},a(x.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});var V,K=g.destroy;function G(){return void 0===V&&(V={}),V}x.prototype.destroy=function(e,t){let i=this._writableState;return!i.destroyed&&(i.bufferedIndex<i.buffered.length||i[R].length)&&r.nextTick(F,i),K.call(this,e,t),this},x.prototype._undestroy=g.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},x.fromWeb=function(e,t){return G().newStreamWritableFromWritableStream(e,t)},x.toWeb=function(e){return G().newWritableStreamFromStreamWritable(e)}})),ta=ei(((e,t)=>{Yn(),Un(),ii();var r=ro(),i=(Gn(),ri(jn)),{isReadable:n,isWritable:o,isIterable:s,isNodeStream:a,isReadableNodeStream:l,isWritableNodeStream:h,isDuplexNodeStream:c}=io(),u=no(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:p}}=eo(),{destroyer:g}=oo(),y=ra(),b=Zs(),{createDeferredPromise:m}=Xn(),w=Xs(),_=globalThis.Blob||i.Blob,v=typeof _<"u"?function(e){return e instanceof _}:function(e){return!1},E=globalThis.AbortController||Zn().AbortController,{FunctionPrototypeCall:S}=Jn(),A=class extends y{constructor(e){super(e),!1===e?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};function k(e){let t,r,i,s,a,l=e.readable&&"function"!=typeof e.readable.read?b.wrap(e.readable):e.readable,h=e.writable,c=!!n(l),d=!!o(h);function p(e){let t=s;s=null,t?t(e):e&&a.destroy(e)}return a=new A({readableObjectMode:!(null==l||!l.readableObjectMode),writableObjectMode:!(null==h||!h.writableObjectMode),readable:c,writable:d}),d&&(u(h,(e=>{d=!1,e&&g(l,e),p(e)})),a._write=function(e,r,i){h.write(e,r)?i():t=i},a._final=function(e){h.end(),r=e},h.on("drain",(function(){if(t){let e=t;t=null,e()}})),h.on("finish",(function(){if(r){let e=r;r=null,e()}}))),c&&(u(l,(e=>{c=!1,e&&g(l,e),p(e)})),l.on("readable",(function(){if(i){let e=i;i=null,e()}})),l.on("end",(function(){a.push(null)})),a._read=function(){for(;;){let e=l.read();if(null===e)return void(i=a._read);if(!a.push(e))return}}),a._destroy=function(e,n){!e&&null!==s&&(e=new f),i=null,t=null,r=null,null===s?n(e):(s=n,g(h,e),g(l,e))},a}t.exports=function e(t,i){if(c(t))return t;if(l(t))return k({readable:t});if(h(t))return k({writable:t});if(a(t))return k({writable:!1,readable:!1});if("function"==typeof t){let{value:e,write:n,final:o,destroy:a}=function(e){let{promise:t,resolve:i}=m(),n=new E,o=n.signal;return{value:e(async function*(){for(;;){let e=t;t=null;let{chunk:n,done:s,cb:a}=await e;if(r.nextTick(a),s)return;if(o.aborted)throw new f(void 0,{cause:o.reason});({promise:t,resolve:i}=m()),yield n}}(),{signal:o}),write(e,t,r){let n=i;i=null,n({chunk:e,done:!1,cb:r})},final(e){let t=i;i=null,t({done:!0,cb:e})},destroy(e,t){n.abort(),t(e)}}}(t);if(s(e))return w(A,e,{objectMode:!0,write:n,final:o,destroy:a});let l=e?.then;if("function"==typeof l){let t,i=S(l,e,(e=>{if(null!=e)throw new p("nully","body",e)}),(e=>{g(t,e)}));return t=new A({objectMode:!0,readable:!1,write:n,final(e){o((async()=>{try{await i,r.nextTick(e,null)}catch(t){r.nextTick(e,t)}}))},destroy:a})}throw new p("Iterable, AsyncIterable or AsyncFunction",i,e)}if(v(t))return e(t.arrayBuffer());if(s(t))return w(A,t,{objectMode:!0,writable:!1});if("object"==typeof t?.writable||"object"==typeof t?.readable){return k({readable:null!=t&&t.readable?l(t?.readable)?t?.readable:e(t.readable):void 0,writable:null!=t&&t.writable?h(t?.writable)?t?.writable:e(t.writable):void 0})}let n=t?.then;if("function"==typeof n){let e;return S(n,t,(t=>{null!=t&&e.push(t),e.push(null)}),(t=>{g(e,t)})),e=new A({objectMode:!0,writable:!1,read(){}})}throw new d(i,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)}})),ra=ei(((e,t)=>{Yn(),Un(),ii();var{ObjectDefineProperties:r,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:n,ObjectSetPrototypeOf:o}=Jn();t.exports=c;var s,a,l=Zs(),h=ea();o(c.prototype,l.prototype),o(c,l);{let e=n(h.prototype);for(let t=0;t<e.length;t++){let r=e[t];c.prototype[r]||(c.prototype[r]=h.prototype[r])}}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),h.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}function u(){return void 0===s&&(s={}),s}r(c.prototype,{writable:{__proto__:null,...i(h.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(h.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(h.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(h.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(h.prototype,"writableLength")},writableFinished:{__proto__:null,...i(h.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(h.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(h.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(h.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),c.fromWeb=function(e,t){return u().newStreamDuplexFromReadableWritablePair(e,t)},c.toWeb=function(e){return u().newReadableWritablePairFromDuplex(e)},c.from=function(e){return a||(a=ta()),a(e,"body")}})),ia=ei(((e,t)=>{Yn(),Un(),ii();var{ObjectSetPrototypeOf:r,Symbol:i}=Jn();t.exports=l;var{ERR_METHOD_NOT_IMPLEMENTED:n}=eo().codes,o=ra(),{getHighWaterMark:s}=Uo();r(l.prototype,o.prototype),r(l,o);var a=i("kCallback");function l(e){if(!(this instanceof l))return new l(e);let t=e?s(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),o.call(this,e),this._readableState.sync=!1,this[a]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function h(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush(((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())}))}function c(){this._final!==h&&h.call(this)}l.prototype._final=h,l.prototype._transform=function(e,t,r){throw new n("_transform()")},l.prototype._write=function(e,t,r){let i=this._readableState,n=this._writableState,o=i.length;this._transform(e,t,((e,t)=>{e?r(e):(null!=t&&this.push(t),n.ended||o===i.length||i.length<i.highWaterMark?r():this[a]=r)}))},l.prototype._read=function(){if(this[a]){let e=this[a];this[a]=null,e()}}})),na=ei(((e,t)=>{Yn(),Un(),ii();var{ObjectSetPrototypeOf:r}=Jn();t.exports=n;var i=ia();function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}r(n.prototype,i.prototype),r(n,i),n.prototype._transform=function(e,t,r){r(null,e)}})),oa=ei(((e,t)=>{Yn(),Un(),ii();var r,i,n=ro(),{ArrayIsArray:o,Promise:s,SymbolAsyncIterator:a}=Jn(),l=no(),{once:h}=Xn(),c=oo(),u=ra(),{aggregateTwoErrors:f,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:p,ERR_MISSING_ARGS:g,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:m}=eo(),{validateFunction:w,validateAbortSignal:_}=to(),{isIterable:v,isReadable:E,isReadableNodeStream:S,isNodeStream:A,isTransformStream:k,isWebStream:I,isReadableStream:T,isReadableEnded:C}=io(),O=globalThis.AbortController||Zn().AbortController;function R(e,t,r){let i=!1;return e.on("close",(()=>{i=!0})),{destroy:t=>{i||(i=!0,c.destroyer(e,t||new y("pipe")))},cleanup:l(e,{readable:t,writable:r},(e=>{i=!e}))}}function B(e){if(v(e))return e;if(S(e))return async function*(e){i||(i=Zs()),yield*i.prototype[a].call(e)}(e);throw new d("val",["Readable","Iterable","AsyncIterable"],e)}async function P(e,t,r,{end:i}){let n,o=null,a=e=>{if(e&&(n=e),o){let e=o;o=null,e()}},h=()=>new s(((e,t)=>{n?t(n):o=()=>{n?t(n):e()}}));t.on("drain",a);let c=l(t,{readable:!1},a);try{t.writableNeedDrain&&await h();for await(let r of e)t.write(r)||await h();i&&t.end(),await h(),r()}catch(e){r(n!==e?f(n,e):e)}finally{c(),t.off("drain",a)}}async function x(e,t,r,{end:i}){k(t)&&(t=t.writable);let n=t.getWriter();try{for await(let t of e)await n.ready,n.write(t).catch((()=>{}));await n.ready,i&&await n.close(),r()}catch(e){try{await n.abort(e),r(e)}catch(e){r(e)}}}function M(e,t,i){if(1===e.length&&o(e[0])&&(e=e[0]),e.length<2)throw new g("streams");let s=new O,a=s.signal,l=i?.signal,h=[];function c(){j(new m)}_(l,"options.signal"),l?.addEventListener("abort",c);let f,y,b,w=[],C=0;function M(e){j(e,0==--C)}function j(e,r){if(e&&(!f||"ERR_STREAM_PREMATURE_CLOSE"===f.code)&&(f=e),f||r){for(;w.length;)w.shift()(f);l?.removeEventListener("abort",c),s.abort(),r&&(f||h.forEach((e=>e())),n.nextTick(t,f,y))}}for(let t=0;t<e.length;t++){let o=e[t],s=t<e.length-1,l=t>0,c=s||!1!==i?.end,f=t===e.length-1;if(A(o)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&M(e)};if(c){let{destroy:e,cleanup:t}=R(o,s,l);w.push(e),E(o)&&f&&h.push(t)}o.on("error",e),E(o)&&f&&h.push((()=>{o.removeListener("error",e)}))}if(0===t)if("function"==typeof o){if(b=o({signal:a}),!v(b))throw new p("Iterable, AsyncIterable or Stream","source",b)}else b=v(o)||S(o)||k(o)?o:u.from(o);else if("function"==typeof o){var L;if(k(b))b=B(null===(L=b)||void 0===L?void 0:L.readable);else b=B(b);if(b=o(b,{signal:a}),s){if(!v(b,!0))throw new p("AsyncIterable",`transform[${t-1}]`,b)}else{var N;r||(r=na());let e=new r({objectMode:!0}),t=null===(N=b)||void 0===N?void 0:N.then;if("function"==typeof t)C++,t.call(b,(t=>{y=t,null!=t&&e.write(t),c&&e.end(),n.nextTick(M)}),(t=>{e.destroy(t),n.nextTick(M,t)}));else if(v(b,!0))C++,P(b,e,M,{end:c});else{if(!T(b)&&!k(b))throw new p("AsyncIterable or Promise","destination",b);{let t=b.readable||b;C++,P(t,e,M,{end:c})}}b=e;let{destroy:i,cleanup:o}=R(b,!1,!0);w.push(i),f&&h.push(o)}}else if(A(o)){if(S(b)){C+=2;let e=U(b,o,M,{end:c});E(o)&&f&&h.push(e)}else if(k(b)||T(b)){let e=b.readable||b;C++,P(e,o,M,{end:c})}else{if(!v(b))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);C++,P(b,o,M,{end:c})}b=o}else if(I(o)){if(S(b))C++,x(B(b),o,M,{end:c});else if(T(b)||v(b))C++,x(b,o,M,{end:c});else{if(!k(b))throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);C++,x(b.readable,o,M,{end:c})}b=o}else b=u.from(o)}return(null!=a&&a.aborted||null!=l&&l.aborted)&&n.nextTick(c),b}function U(e,t,r,{end:i}){let o=!1;if(t.on("close",(()=>{o||r(new b)})),e.pipe(t,{end:!1}),i){let r=function(){o=!0,t.end()};C(e)?n.nextTick(r):e.once("end",r)}else r();return l(e,{readable:!0,writable:!1},(t=>{let i=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(t)})),l(t,{readable:!1,writable:!0},r)}t.exports={pipelineImpl:M,pipeline:function(...e){return M(e,h(function(e){return w(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}}})),sa=ei(((e,t)=>{Yn(),Un(),ii();var{pipeline:r}=oa(),i=ra(),{destroyer:n}=oo(),{isNodeStream:o,isReadable:s,isWritable:a,isWebStream:l,isTransformStream:h,isWritableStream:c,isReadableStream:u}=io(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:p}}=eo(),g=no();t.exports=function(...e){if(0===e.length)throw new p("streams");if(1===e.length)return i.from(e[0]);let t,y,b,m,w,_=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){let t=e.length-1;e[t]=i.from(e[t])}for(let t=0;t<e.length;++t)if(o(e[t])||l(e[t])){if(t<e.length-1&&!(s(e[t])||u(e[t])||h(e[t])))throw new d(`streams[${t}]`,_[t],"must be readable");if(t>0&&!(a(e[t])||c(e[t])||h(e[t])))throw new d(`streams[${t}]`,_[t],"must be writable")}let v=e[0],E=r(e,(function(e){let t=m;m=null,t?t(e):e?w.destroy(e):!A&&!S&&w.destroy()})),S=!!(a(v)||c(v)||h(v)),A=!!(s(E)||u(E)||h(E));if(w=new i({writableObjectMode:!(null==v||!v.writableObjectMode),readableObjectMode:!(null==E||!E.writableObjectMode),writable:S,readable:A}),S){if(o(v))w._write=function(e,r,i){v.write(e,r)?i():t=i},w._final=function(e){v.end(),y=e},v.on("drain",(function(){if(t){let e=t;t=null,e()}}));else if(l(v)){let e=(h(v)?v.writable:v).getWriter();w._write=async function(t,r,i){try{await e.ready,e.write(t).catch((()=>{})),i()}catch(e){i(e)}},w._final=async function(t){try{await e.ready,e.close().catch((()=>{})),y=t}catch(e){t(e)}}}let e=h(E)?E.readable:E;g(e,(()=>{if(y){let e=y;y=null,e()}}))}if(A)if(o(E))E.on("readable",(function(){if(b){let e=b;b=null,e()}})),E.on("end",(function(){w.push(null)})),w._read=function(){for(;;){let e=E.read();if(null===e)return void(b=w._read);if(!w.push(e))return}};else if(l(E)){let e=(h(E)?E.readable:E).getReader();w._read=async function(){for(;;)try{let{value:t,done:r}=await e.read();if(!w.push(t))return;if(r)return void w.push(null)}catch{return}}}return w._destroy=function(e,r){!e&&null!==m&&(e=new f),b=null,t=null,y=null,null===m?r(e):(m=r,o(E)&&n(E,e))},w}})),aa=ei(((e,t)=>{Yn(),Un(),ii();var r=globalThis.AbortController||Zn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:o,ERR_OUT_OF_RANGE:s},AbortError:a}=eo(),{validateAbortSignal:l,validateInteger:h,validateObject:c}=to(),u=Jn().Symbol("kWeak"),{finished:f}=no(),d=sa(),{addAbortSignalNoValidate:p}=xo(),{isWritable:g,isNodeStream:y}=io(),{ArrayPrototypePush:b,MathFloor:m,Number:w,NumberIsNaN:_,Promise:v,PromiseReject:E,PromisePrototypeThen:S,Symbol:A}=Jn(),k=A("kEmpty"),I=A("kEof");function T(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);null!=t&&c(t,"options"),null!=t?.signal&&l(t.signal,"options.signal");let i=1;return null!=t?.concurrency&&(i=m(t.concurrency)),h(i,"concurrency",1),async function*(){var n,o;let s=new r,l=this,h=[],c=s.signal,u={signal:c},f=()=>s.abort();null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted&&f(),null==t||null===(o=t.signal)||void 0===o||o.addEventListener("abort",f);let d,p,g=!1;function y(){g=!0}!async function(){try{for await(let t of l){var r;if(g)return;if(c.aborted)throw new a;try{t=e(t,u)}catch(e){t=E(e)}t!==k&&("function"==typeof(null===(r=t)||void 0===r?void 0:r.catch)&&t.catch(y),h.push(t),d&&(d(),d=null),!g&&h.length&&h.length>=i&&await new v((e=>{p=e})))}h.push(I)}catch(e){let t=E(e);S(t,void 0,y),h.push(t)}finally{var n;g=!0,d&&(d(),d=null),null==t||null===(n=t.signal)||void 0===n||n.removeEventListener("abort",f)}}();try{for(;;){for(;h.length>0;){let e=await h[0];if(e===I)return;if(c.aborted)throw new a;e!==k&&(yield e),h.shift(),p&&(p(),p=null)}await new v((e=>{d=e}))}}finally{s.abort(),g=!0,p&&(p(),p=null)}}.call(this)}async function C(e,t=void 0){for await(let r of O.call(this,e,t))return!0;return!1}function O(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);return T.call(this,(async function(t,r){return await e(t,r)?t:k}),t)}var R=class extends o{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function B(e){if(e=w(e),_(e))return 0;if(e<0)throw new s("number",">= 0",e);return e}t.exports.streamReturningOperators={asIndexedPairs:function(e=void 0){return null!=e&&c(e,"options"),null!=e?.signal&&l(e.signal,"options.signal"),async function*(){let t=0;for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new a({cause:e.signal.reason});yield[t++,i]}}.call(this)},drop:function(e,t=void 0){return null!=t&&c(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),e=B(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new a;for await(let r of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new a;e--<=0&&(yield r)}}.call(this)},filter:O,flatMap:function(e,t){let r=T.call(this,e,t);return async function*(){for await(let e of r)yield*e}.call(this)},map:T,take:function(e,t=void 0){return null!=t&&c(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),e=B(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new a;for await(let r of this){var i;if(null!=t&&null!==(i=t.signal)&&void 0!==i&&i.aborted)throw new a;if(!(e-- >0))return;yield r}}.call(this)},compose:function(e,t){if(null!=t&&c(t,"options"),null!=t?.signal&&l(t.signal,"options.signal"),y(e)&&!g(e))throw new i("stream",e,"must be writable");let r=d(this,e);return null!=t&&t.signal&&p(t.signal,r),r}},t.exports.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);return!await C.call(this,(async(...t)=>!await e(...t)),t)},forEach:async function(e,t){if("function"!=typeof e)throw new n("fn",["Function","AsyncFunction"],e);for await(let r of T.call(this,(async function(t,r){return await e(t,r),k}),t));},reduce:async function(e,t,i){var o;if("function"!=typeof e)throw new n("reducer",["Function","AsyncFunction"],e);null!=i&&c(i,"options"),null!=i?.signal&&l(i.signal,"options.signal");let s=arguments.length>1;if(null!=i&&null!==(o=i.signal)&&void 0!==o&&o.aborted){let e=new a(void 0,{cause:i.signal.reason});throw this.once("error",(()=>{})),await f(this.destroy(e)),e}let h=new r,d=h.signal;if(null!=i&&i.signal){let e={once:!0,[u]:this};i.signal.addEventListener("abort",(()=>h.abort()),e)}let p=!1;try{for await(let r of this){var g;if(p=!0,null!=i&&null!==(g=i.signal)&&void 0!==g&&g.aborted)throw new a;s?t=await e(t,r,{signal:d}):(t=r,s=!0)}if(!p&&!s)throw new R}finally{h.abort()}return t},toArray:async function(e){null!=e&&c(e,"options"),null!=e?.signal&&l(e.signal,"options.signal");let t=[];for await(let i of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new a(void 0,{cause:e.signal.reason});b(t,i)}return t},some:C,find:async function(e,t){for await(let r of O.call(this,e,t))return r}}})),la=ei(((e,t)=>{Yn(),Un(),ii();var{ArrayPrototypePop:r,Promise:i}=Jn(),{isIterable:n,isNodeStream:o,isWebStream:s}=io(),{pipelineImpl:a}=oa(),{finished:l}=no();ha(),t.exports={finished:l,pipeline:function(...e){return new i(((t,i)=>{let l,h,c=e[e.length-1];if(c&&"object"==typeof c&&!o(c)&&!n(c)&&!s(c)){let t=r(e);l=t.signal,h=t.end}a(e,((e,r)=>{e?i(e):t(r)}),{signal:l,end:h})}))}}})),ha=ei(((e,t)=>{Yn(),Un(),ii();var{Buffer:r}=(Gn(),ri(jn)),{ObjectDefineProperty:i,ObjectKeys:n,ReflectApply:o}=Jn(),{promisify:{custom:s}}=Xn(),{streamReturningOperators:a,promiseReturningOperators:l}=aa(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:h}}=eo(),c=sa(),{pipeline:u}=oa(),{destroyer:f}=oo(),d=no(),p=la(),g=io(),y=t.exports=Po().Stream;y.isDisturbed=g.isDisturbed,y.isErrored=g.isErrored,y.isReadable=g.isReadable,y.Readable=Zs();for(let e of n(a)){let t=function(...e){if(new.target)throw h();return y.Readable.from(o(r,this,e))};t;let r=a[e];i(t,"name",{__proto__:null,value:r.name}),i(t,"length",{__proto__:null,value:r.length}),i(y.Readable.prototype,e,{__proto__:null,value:t,enumerable:!1,configurable:!0,writable:!0})}for(let e of n(l)){let t=function(...e){if(new.target)throw h();return o(r,this,e)};t;let r=l[e];i(t,"name",{__proto__:null,value:r.name}),i(t,"length",{__proto__:null,value:r.length}),i(y.Readable.prototype,e,{__proto__:null,value:t,enumerable:!1,configurable:!0,writable:!0})}y.Writable=ea(),y.Duplex=ra(),y.Transform=ia(),y.PassThrough=na(),y.pipeline=u;var{addAbortSignal:b}=xo();y.addAbortSignal=b,y.finished=d,y.destroy=f,y.compose=c,i(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>p}),i(u,s,{__proto__:null,enumerable:!0,get:()=>p.pipeline}),i(d,s,{__proto__:null,enumerable:!0,get:()=>p.finished}),y.Stream=y,y._isUint8Array=function(e){return e instanceof Uint8Array},y._uint8ArrayToBuffer=function(e){return r.from(e.buffer,e.byteOffset,e.byteLength)}})),ca=ei(((e,t)=>{Yn(),Un(),ii();var r=ha(),i=la(),n=r.Readable.destroy;t.exports=r.Readable,t.exports._uint8ArrayToBuffer=r._uint8ArrayToBuffer,t.exports._isUint8Array=r._isUint8Array,t.exports.isDisturbed=r.isDisturbed,t.exports.isErrored=r.isErrored,t.exports.isReadable=r.isReadable,t.exports.Readable=r.Readable,t.exports.Writable=r.Writable,t.exports.Duplex=r.Duplex,t.exports.Transform=r.Transform,t.exports.PassThrough=r.PassThrough,t.exports.addAbortSignal=r.addAbortSignal,t.exports.finished=r.finished,t.exports.destroy=r.destroy,t.exports.destroy=n,t.exports.pipeline=r.pipeline,t.exports.compose=r.compose,Object.defineProperty(r,"promises",{configurable:!0,enumerable:!0,get:()=>i}),t.exports.Stream=r.Stream,t.exports.default=t.exports})),ua=ei(((e,t)=>{Yn(),Un(),ii(),"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),fa=ei(((e,t)=>{Yn(),Un(),ii();var{Buffer:r}=(Gn(),ri(jn)),i=Symbol.for("BufferList");function n(e){if(!(this instanceof n))return new n(e);n._init.call(this,e)}n._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},n.prototype._new=function(e){return new n(e)},n.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){let i=t+this._bufs[r].length;if(e<i||r===this._bufs.length-1)return[r,e-t];t=i}},n.prototype._reverseOffset=function(e){let t=e[0],r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},n.prototype.get=function(e){if(e>this.length||e<0)return;let t=this._offset(e);return this._bufs[t[0]][t[1]]},n.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},n.prototype.copy=function(e,t,i,n){if(("number"!=typeof i||i<0)&&(i=0),("number"!=typeof n||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||r.alloc(0);let o=!!e,s=this._offset(i),a=n-i,l=a,h=o&&t||0,c=s[1];if(0===i&&n===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,h),h+=this._bufs[t].length;return e}if(l<=this._bufs[s[0]].length-c)return o?this._bufs[s[0]].copy(e,t,c,c+l):this._bufs[s[0]].slice(c,c+l);o||(e=r.allocUnsafe(a));for(let t=s[0];t<this._bufs.length;t++){let r=this._bufs[t].length-c;if(!(l>r)){this._bufs[t].copy(e,h,c,c+l),h+=r;break}this._bufs[t].copy(e,h,c),h+=r,l-=r,c&&(c=0)}return e.length>h?e.slice(0,h):e},n.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();let r=this._offset(e),i=this._offset(t),n=this._bufs.slice(r[0],i[0]+1);return 0===i[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,i[1]),0!==r[1]&&(n[0]=n[0].slice(r[1])),this._new(n)},n.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},n.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},n.prototype.duplicate=function(){let e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},n.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(r.from(e));return this},n.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},n.prototype.indexOf=function(e,t,i){if(void 0===i&&"string"==typeof t&&(i=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,i):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let n=this._offset(t),o=n[0],s=n[1];for(;o<this._bufs.length;o++){let t=this._bufs[o];for(;s<t.length;)if(t.length-s>=e.length){let r=t.indexOf(e,s);if(-1!==r)return this._reverseOffset([o,r]);s=t.length-e.length+1}else{let t=this._reverseOffset([o,s]);if(this._match(t,e))return t;s++}s=0}return-1},n.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){let e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let t in e)!function(t){n.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),n.prototype._isBufferList=function(e){return e instanceof n||n.isBufferList(e)},n.isBufferList=function(e){return null!=e&&e[i]},t.exports=n})),da=ei(((e,t)=>{Yn(),Un(),ii();var r=ca().Duplex,i=ua(),n=fa();function o(e){if(!(this instanceof o))return new o(e);if("function"==typeof e){this._callback=e;let t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}n._init.call(this,e),r.call(this)}i(o,r),Object.assign(o.prototype,n.prototype),o.prototype._new=function(e){return new o(e)},o.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},o.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},o.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},o.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},o.prototype._isBufferList=function(e){return e instanceof o||e instanceof n||o.isBufferList(e)},o.isBufferList=n.isBufferList,t.exports=o,t.exports.BufferListStream=o,t.exports.BufferList=n})),pa=ei(((e,t)=>{Yn(),Un(),ii();t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}})),ga=ei(((e,t)=>{Yn(),Un(),ii();var r=t.exports,{Buffer:i}=(Gn(),ri(jn));r.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},r.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},r.requiredHeaderFlagsErrors={};for(let e in r.requiredHeaderFlags){let t=r.requiredHeaderFlags[e];r.requiredHeaderFlagsErrors[e]="Invalid header flag bits, must be 0x"+t.toString(16)+" for "+r.types[e]+" packet"}r.codes={};for(let e in r.types){let t=r.types[e];r.codes[t]=e}r.CMD_SHIFT=4,r.CMD_MASK=240,r.DUP_MASK=8,r.QOS_MASK=3,r.QOS_SHIFT=1,r.RETAIN_MASK=1,r.VARBYTEINT_MASK=127,r.VARBYTEINT_FIN_MASK=128,r.VARBYTEINT_MAX=268435455,r.SESSIONPRESENT_MASK=1,r.SESSIONPRESENT_HEADER=i.from([r.SESSIONPRESENT_MASK]),r.CONNACK_HEADER=i.from([r.codes.connack<<r.CMD_SHIFT]),r.USERNAME_MASK=128,r.PASSWORD_MASK=64,r.WILL_RETAIN_MASK=32,r.WILL_QOS_MASK=24,r.WILL_QOS_SHIFT=3,r.WILL_FLAG_MASK=4,r.CLEAN_SESSION_MASK=2,r.CONNECT_HEADER=i.from([r.codes.connect<<r.CMD_SHIFT]),r.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},r.propertiesCodes={};for(let e in r.properties){let t=r.properties[e];r.propertiesCodes[t]=e}function n(e){return[0,1,2].map((t=>[0,1].map((n=>[0,1].map((o=>{let s=i.alloc(1);return s.writeUInt8(r.codes[e]<<r.CMD_SHIFT|(n?r.DUP_MASK:0)|t<<r.QOS_SHIFT|o,0,!0),s}))))))}r.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},r.PUBLISH_HEADER=n("publish"),r.SUBSCRIBE_HEADER=n("subscribe"),r.SUBSCRIBE_OPTIONS_QOS_MASK=3,r.SUBSCRIBE_OPTIONS_NL_MASK=1,r.SUBSCRIBE_OPTIONS_NL_SHIFT=2,r.SUBSCRIBE_OPTIONS_RAP_MASK=1,r.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,r.SUBSCRIBE_OPTIONS_RH_MASK=3,r.SUBSCRIBE_OPTIONS_RH_SHIFT=4,r.SUBSCRIBE_OPTIONS_RH=[0,16,32],r.SUBSCRIBE_OPTIONS_NL=4,r.SUBSCRIBE_OPTIONS_RAP=8,r.SUBSCRIBE_OPTIONS_QOS=[0,1,2],r.UNSUBSCRIBE_HEADER=n("unsubscribe"),r.ACKS={unsuback:n("unsuback"),puback:n("puback"),pubcomp:n("pubcomp"),pubrel:n("pubrel"),pubrec:n("pubrec")},r.SUBACK_HEADER=i.from([r.codes.suback<<r.CMD_SHIFT]),r.VERSION3=i.from([3]),r.VERSION4=i.from([4]),r.VERSION5=i.from([5]),r.VERSION131=i.from([131]),r.VERSION132=i.from([132]),r.QOS=[0,1,2].map((e=>i.from([e]))),r.EMPTY={pingreq:i.from([r.codes.pingreq<<4,0]),pingresp:i.from([r.codes.pingresp<<4,0]),disconnect:i.from([r.codes.disconnect<<4,0])},r.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},r.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},r.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},r.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},r.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}})),ya=ei(((e,t)=>{Yn(),Un(),ii();var r=1e3,i=6e4,n=60*i,o=24*n,s=7*o,a=365.25*o;function l(e,t,r,i){var n=t>=1.5*r;return Math.round(e/r)+" "+i+(n?"s":"")}t.exports=function(e,t){t=t||{};var h=typeof e;if("string"===h&&e.length>0)return function(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var l=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*n;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}(e);if("number"===h&&isFinite(e))return t.long?function(e){var t=Math.abs(e);return t>=o?l(e,t,o,"day"):t>=n?l(e,t,n,"hour"):t>=i?l(e,t,i,"minute"):t>=r?l(e,t,r,"second"):e+" ms"}(e):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=n?Math.round(e/n)+"h":t>=i?Math.round(e/i)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}})),ba=ei(((e,t)=>{Yn(),Un(),ii(),t.exports=function(e){function t(e){let i,n,o,s=null;function a(...e){if(!a.enabled)return;let r=a,n=Number(new Date),o=n-(i||n);r.diff=o,r.prev=i,r.curr=n,i=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((i,n)=>{if("%%"===i)return"%";s++;let o=t.formatters[n];if("function"==typeof o){let t=e[s];i=o.call(r,t),e.splice(s,1),s--}return i})),t.formatArgs.call(r,e),(r.log||t.log).apply(r,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=r,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(n!==t.namespaces&&(n=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"==typeof t.init&&t.init(a),a}function r(e,r){let i=t(this.namespace+(typeof r>"u"?":":r)+e);return i.log=this.log,i}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];let r,i=("string"==typeof e?e:"").split(/[\s,]+/),n=i.length;for(r=0;r<n;r++)i[r]&&("-"===(e=i[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,i;for(r=0,i=t.skips.length;r<i;r++)if(t.skips[r].test(e))return!1;for(r=0,i=t.names.length;r<i;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=ya(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}})),ma=ei(((e,t)=>{Yn(),Un(),ii(),e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;e.splice(1,0,r,"color: inherit");let i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(i++,"%c"===e&&(n=i))})),e.splice(n,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch{}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch{}return!t&&typeof ni<"u"&&"env"in ni&&(t=ni.env.DEBUG),t},e.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof Gr<"u"&&Gr.userAgent&&Gr.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof Gr<"u"&&Gr.userAgent&&Gr.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof Gr<"u"&&Gr.userAgent&&Gr.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch{}}(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=ba()(e);var{formatters:r}=t.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),wa=ei(((e,t)=>{Yn(),Un(),ii();var r=da(),{EventEmitter:i}=(Bo(),ri(Ao)),n=pa(),o=ga(),s=ma()("mqtt-packet:parser");t.exports=class e extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(t){return this instanceof e?(this.settings=t||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new e).parser(t)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new n,this.error=null,this._list=r(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),t=e>>o.CMD_SHIFT;this.packet.cmd=o.types[t];let r=15&e,i=o.requiredHeaderFlags[t];return null!=i&&r!==i?this._emitError(new Error(o.requiredHeaderFlagsErrors[t])):(this.packet.retain=!!(e&o.RETAIN_MASK),this.packet.qos=e>>o.QOS_SHIFT&o.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=!!(e&o.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){s("_parseConnect");let e,t,r,i,n={},a=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(a.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(a.protocolVersion=this._list.readUInt8(this._pos),a.protocolVersion>=128&&(a.bridgeMode=!0,a.protocolVersion=a.protocolVersion-128),3!==a.protocolVersion&&4!==a.protocolVersion&&5!==a.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(1&this._list.readUInt8(this._pos))return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));n.username=this._list.readUInt8(this._pos)&o.USERNAME_MASK,n.password=this._list.readUInt8(this._pos)&o.PASSWORD_MASK,n.will=this._list.readUInt8(this._pos)&o.WILL_FLAG_MASK;let h=!!(this._list.readUInt8(this._pos)&o.WILL_RETAIN_MASK),c=(this._list.readUInt8(this._pos)&o.WILL_QOS_MASK)>>o.WILL_QOS_SHIFT;if(n.will)a.will={},a.will.retain=h,a.will.qos=c;else{if(h)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(c)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(a.clean=!!(this._list.readUInt8(this._pos)&o.CLEAN_SESSION_MASK),this._pos++,a.keepalive=this._parseNum(),-1===a.keepalive)return this._emitError(new Error("Packet too short"));if(5===a.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(a.properties=e)}let u=this._parseString();if(null===u)return this._emitError(new Error("Packet too short"));if(a.clientId=u,s("_parseConnect: packet.clientId: %s",a.clientId),n.will){if(5===a.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(a.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(a.will.topic=e,s("_parseConnect: packet.will.topic: %s",a.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));a.will.payload=t,s("_parseConnect: packet.will.paylaod: %s",a.will.payload)}if(n.username){if(i=this._parseString(),null===i)return this._emitError(new Error("Cannot parse username"));a.username=i,s("_parseConnect: packet.username: %s",a.username)}if(n.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));a.password=r}return this.settings=a,s("_parseConnect: complete"),a}_parseConnack(){s("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&o.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");let e,t,r,i,n,a,l,h=this.packet;if(h.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(h.properties=e)}if(h.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<h.length;){if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=h.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(t=this._parseByte(),5===this.settings.protocolVersion){if(192&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(252&t)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(r=t&o.SUBSCRIBE_OPTIONS_QOS_MASK,r>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(a=!!(t>>o.SUBSCRIBE_OPTIONS_NL_SHIFT&o.SUBSCRIBE_OPTIONS_NL_MASK),n=!!(t>>o.SUBSCRIBE_OPTIONS_RAP_SHIFT&o.SUBSCRIBE_OPTIONS_RAP_MASK),i=t>>o.SUBSCRIBE_OPTIONS_RH_SHIFT&o.SUBSCRIBE_OPTIONS_RH_MASK,i>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:e,qos:r},5===this.settings.protocolVersion?(l.nl=a,l.rap=n,l.rh=i):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",l),h.subscriptions.push(l)}}}_parseSuback(){s("_parseSuback");let e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(5===this.settings.protocolVersion){if(!o.MQTT5_SUBACK_CODES[e])return this._emitError(new Error("Invalid suback code"))}else if(e>2&&128!==e)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(e)}}}_parseUnsubscribe(){s("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){s("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((3===this.settings.protocolVersion||4===this.settings.protocolVersion)&&2!==e.length)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(5===this.settings.protocolVersion){let t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){let e=this._list.readUInt8(this._pos++);if(!o.MQTT5_UNSUBACK_CODES[e])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(e)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!o.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!o.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"))}s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){let e=this.packet;if(s("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?(e.reasonCode=this._parseByte(),o.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;let t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");let e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!o.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),s("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let t=this._parseNum(),r=t+this._pos;if(-1===t||r>this._list.length||r>this.packet.length)return null;let i=this._list.toString("utf8",this._pos,r);return this._pos+=t,s("_parseString: result: %s",i),i}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;let r=this._list.slice(this._pos,t);return this._pos+=e,s("_parseBuffer: result: %o",r),r}_parseNum(){if(this._list.length-this._pos<2)return-1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");let t,r=0,i=1,n=0,a=!1,l=this._pos?this._pos:0;for(;r<4&&l+r<this._list.length;){if(t=this._list.readUInt8(l+r++),n+=i*(t&o.VARBYTEINT_MASK),i*=128,!(t&o.VARBYTEINT_FIN_MASK)){a=!0;break}if(this._list.length<=r)break}return!a&&4===r&&this._list.length>=r&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=r),a=!!a&&(e?{bytes:r,value:n}:n),s("_parseVarByteNum: result: %o",a),a}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");let e=this._parseVarByteNum(),t=this._pos+e,r={};for(;this._pos<t;){let e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;let t=o.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==t)r[t]?(Array.isArray(r[t])||(r[t]=[r[t]]),r[t].push(this._parseByType(o.propertiesTypes[t]))):r[t]=this._parseByType(o.propertiesTypes[t]);else{r[t]||(r[t]=Object.create(null));let e=this._parseByType(o.propertiesTypes[t]);if(r[t][e.name])if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{let i=r[t][e.name];r[t][e.name]=[i],r[t][e.name].push(e.value)}else r[t][e.name]=e.value}}return r}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new n,this._pos=0,!0}_emitError(e){s("_emitError",e),this.error=e,this.emit("error",e)}}})),_a=ei(((e,t)=>{Yn(),Un(),ii();var{Buffer:r}=(Gn(),ri(jn)),i={},n=r.isBuffer(r.from([1,2]).subarray(0,1));function o(e){let t=r.allocUnsafe(2);return t.writeUInt8(e>>8,0),t.writeUInt8(255&e,1),t}t.exports={cache:i,generateCache:function(){for(let e=0;e<65536;e++)i[e]=o(e)},generateNumber:o,genBufVariableByteInt:function(e){let t=0,i=0,o=r.allocUnsafe(4);do{t=e%128|0,(e=e/128|0)>0&&(t|=128),o.writeUInt8(t,i++)}while(e>0&&i<4);return e>0&&(i=0),n?o.subarray(0,i):o.slice(0,i)},generate4ByteBuffer:function(e){let t=r.allocUnsafe(4);return t.writeUInt32BE(e,0),t}}})),va=ei(((e,t)=>{Yn(),Un(),ii(),typeof ni>"u"||!ni.version||0===ni.version.indexOf("v0.")||0===ni.version.indexOf("v1.")&&0!==ni.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var n,o,s=arguments.length;switch(s){case 0:case 1:return ni.nextTick(e);case 2:return ni.nextTick((function(){e.call(null,t)}));case 3:return ni.nextTick((function(){e.call(null,t,r)}));case 4:return ni.nextTick((function(){e.call(null,t,r,i)}));default:for(n=new Array(s-1),o=0;o<n.length;)n[o++]=arguments[o];return ni.nextTick((function(){e.apply(null,n)}))}}}:t.exports=ni})),Ea=ei(((e,t)=>{Yn(),Un(),ii();var r=ga(),{Buffer:i}=(Gn(),ri(jn)),n=i.allocUnsafe(0),o=i.from([0]),s=_a(),a=va().nextTick,l=ma()("mqtt-packet:writeToStream"),h=s.cache,c=s.generateNumber,u=s.generateCache,f=s.genBufVariableByteInt,d=s.generate4ByteBuffer,p=E,g=!0;function y(e,t,s){switch(l("generate called"),t.cork&&(t.cork(),a(b,t)),g&&(g=!1,u()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t){let n=e||{},o=n.protocolId||"MQTT",s=n.protocolVersion||4,a=n.will,l=n.clean,h=n.keepalive||0,c=n.clientId||"",u=n.username,f=n.password,d=n.properties;void 0===l&&(l=!0);let g,y,b=0;if(!o||"string"!=typeof o&&!i.isBuffer(o))return t.destroy(new Error("Invalid protocolId")),!1;if(b+=o.length+2,3!==s&&4!==s&&5!==s)return t.destroy(new Error("Invalid protocol version")),!1;if(b+=1,("string"==typeof c||i.isBuffer(c))&&(c||s>=4)&&(c||l))b+=i.byteLength(c)+2;else{if(s<4)return t.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(1*l==0)return t.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof h||h<0||h>65535||h%1!=0)return t.destroy(new Error("Invalid keepalive")),!1;if(b+=2,b+=1,5===s){if(g=k(t,d),!g)return!1;b+=g.length}if(a){if("object"!=typeof a)return t.destroy(new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.destroy(new Error("Invalid will topic")),!1;if(b+=i.byteLength(a.topic)+2,b+=2,a.payload){if(!(a.payload.length>=0))return t.destroy(new Error("Invalid will payload")),!1;"string"==typeof a.payload?b+=i.byteLength(a.payload):b+=a.payload.length}if(y={},5===s){if(y=k(t,a.properties),!y)return!1;b+=y.length}}let m=!1;if(null!=u){if(!R(u))return t.destroy(new Error("Invalid username")),!1;m=!0,b+=i.byteLength(u)+2}if(null!=f){if(!m)return t.destroy(new Error("Username is required to use password")),!1;if(!R(f))return t.destroy(new Error("Invalid password")),!1;b+=O(f)+2}t.write(r.CONNECT_HEADER),w(t,b),A(t,o),n.bridgeMode&&(s+=128),t.write(131===s?r.VERSION131:132===s?r.VERSION132:4===s?r.VERSION4:5===s?r.VERSION5:r.VERSION3);let v=0;return v|=null!=u?r.USERNAME_MASK:0,v|=null!=f?r.PASSWORD_MASK:0,v|=a&&a.retain?r.WILL_RETAIN_MASK:0,v|=a&&a.qos?a.qos<<r.WILL_QOS_SHIFT:0,v|=a?r.WILL_FLAG_MASK:0,v|=l?r.CLEAN_SESSION_MASK:0,t.write(i.from([v])),p(t,h),5===s&&g.write(),A(t,c),a&&(5===s&&y.write(),_(t,a.topic),A(t,a.payload)),null!=u&&A(t,u),null!=f&&A(t,f),!0}(e,t);case"connack":return function(e,t,n){let s=n?n.protocolVersion:4,a=e||{},l=5===s?a.reasonCode:a.returnCode,h=a.properties,c=2;if("number"!=typeof l)return t.destroy(new Error("Invalid return code")),!1;let u=null;if(5===s){if(u=k(t,h),!u)return!1;c+=u.length}return t.write(r.CONNACK_HEADER),w(t,c),t.write(a.sessionPresent?r.SESSIONPRESENT_HEADER:o),t.write(i.from([l])),u?.write(),!0}(e,t,s);case"publish":return function(e,t,o){l("publish: packet: %o",e);let s=o?o.protocolVersion:4,a=e||{},h=a.qos||0,c=a.retain?r.RETAIN_MASK:0,u=a.topic,f=a.payload||n,d=a.messageId,g=a.properties,y=0;if("string"==typeof u)y+=i.byteLength(u)+2;else{if(!i.isBuffer(u))return t.destroy(new Error("Invalid topic")),!1;y+=u.length+2}if(i.isBuffer(f)?y+=f.length:y+=i.byteLength(f),h&&"number"!=typeof d)return t.destroy(new Error("Invalid messageId")),!1;h&&(y+=2);let b=null;if(5===s){if(b=k(t,g),!b)return!1;y+=b.length}return t.write(r.PUBLISH_HEADER[h][a.dup?1:0][c?1:0]),w(t,y),p(t,O(u)),t.write(u),h>0&&p(t,d),b?.write(),l("publish: payload: %o",f),t.write(f)}(e,t,s);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.cmd||"puback",l=s.messageId,h=s.dup&&"pubrel"===a?r.DUP_MASK:0,c=0,u=s.reasonCode,f=s.properties,d=5===o?3:2;if("pubrel"===a&&(c=1),"number"!=typeof l)return t.destroy(new Error("Invalid messageId")),!1;let g=null;if(5===o&&"object"==typeof f){if(g=I(t,f,n,d),!g)return!1;d+=g.length}return t.write(r.ACKS[a][c][h][0]),3===d&&(d+=0!==u?1:-1),w(t,d),p(t,l),5===o&&2!==d&&t.write(i.from([u])),null!==g?g.write():4===d&&t.write(i.from([0])),!0}(e,t,s);case"subscribe":return function(e,t,n){l("subscribe: packet: ");let o=n?n.protocolVersion:4,s=e||{},a=s.dup?r.DUP_MASK:0,h=s.messageId,c=s.subscriptions,u=s.properties,f=0;if("number"!=typeof h)return t.destroy(new Error("Invalid messageId")),!1;f+=2;let d=null;if(5===o){if(d=k(t,u),!d)return!1;f+=d.length}if("object"!=typeof c||!c.length)return t.destroy(new Error("Invalid subscriptions")),!1;for(let e=0;e<c.length;e+=1){let r=c[e].topic,n=c[e].qos;if("string"!=typeof r)return t.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof n)return t.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(c[e].nl||!1))return t.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(c[e].rap||!1))return t.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let r=c[e].rh||0;if("number"!=typeof r||r>2)return t.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}f+=i.byteLength(r)+2+1}l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),t.write(r.SUBSCRIBE_HEADER[1][a?1:0][0]),w(t,f),p(t,h),null!==d&&d.write();let g=!0;for(let e of c){let n,s=e.topic,a=e.qos,l=+e.nl,h=+e.rap,c=e.rh;_(t,s),n=r.SUBSCRIBE_OPTIONS_QOS[a],5===o&&(n|=l?r.SUBSCRIBE_OPTIONS_NL:0,n|=h?r.SUBSCRIBE_OPTIONS_RAP:0,n|=c?r.SUBSCRIBE_OPTIONS_RH[c]:0),g=t.write(i.from([n]))}return g}(e,t,s);case"suback":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.granted,h=s.properties,c=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(c+=2,"object"!=typeof l||!l.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.destroy(new Error("Invalid qos vector")),!1;c+=1}let u=null;if(5===o){if(u=I(t,h,n,c),!u)return!1;c+=u.length}return t.write(r.SUBACK_HEADER),w(t,c),p(t,a),null!==u&&u.write(),t.write(i.from(l))}(e,t,s);case"unsubscribe":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,h=s.unsubscriptions,c=s.properties,u=0;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof h||!h.length)return t.destroy(new Error("Invalid unsubscriptions")),!1;for(let e=0;e<h.length;e+=1){if("string"!=typeof h[e])return t.destroy(new Error("Invalid unsubscriptions")),!1;u+=i.byteLength(h[e])+2}let f=null;if(5===o){if(f=k(t,c),!f)return!1;u+=f.length}t.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),w(t,u),p(t,a),null!==f&&f.write();let d=!0;for(let e=0;e<h.length;e++)d=_(t,h[e]);return d}(e,t,s);case"unsuback":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.messageId,l=s.dup?r.DUP_MASK:0,h=s.granted,c=s.properties,u=s.cmd,f=0,d=2;if("number"!=typeof a)return t.destroy(new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof h||!h.length)return t.destroy(new Error("Invalid qos vector")),!1;for(let e=0;e<h.length;e+=1){if("number"!=typeof h[e])return t.destroy(new Error("Invalid qos vector")),!1;d+=1}}let g=null;if(5===o){if(g=I(t,c,n,d),!g)return!1;d+=g.length}return t.write(r.ACKS[u][f][l][0]),w(t,d),p(t,a),null!==g&&g.write(),5===o&&t.write(i.from(h)),!0}(e,t,s);case"pingreq":case"pingresp":return function(e,t){return t.write(r.EMPTY[e.cmd])}(e,t);case"disconnect":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,h=5===o?1:0,c=null;if(5===o){if(c=I(t,l,n,h),!c)return!1;h+=c.length}return t.write(i.from([r.codes.disconnect<<4])),w(t,h),5===o&&t.write(i.from([a])),null!==c&&c.write(),!0}(e,t,s);case"auth":return function(e,t,n){let o=n?n.protocolVersion:4,s=e||{},a=s.reasonCode,l=s.properties,h=5===o?1:0;5!==o&&t.destroy(new Error("Invalid mqtt version for auth packet"));let c=I(t,l,n,h);return!!c&&(h+=c.length,t.write(i.from([r.codes.auth<<4])),w(t,h),t.write(i.from([a])),null!==c&&c.write(),!0)}(e,t,s);default:return t.destroy(new Error("Unknown command")),!1}}function b(e){e.uncork()}Object.defineProperty(y,"cacheNumbers",{get:()=>p===E,set(e){e?((!h||0===Object.keys(h).length)&&(g=!0),p=E):(g=!1,p=S)}});var m={};function w(e,t){if(t>r.VARBYTEINT_MAX)return e.destroy(new Error(`Invalid variable byte integer: ${t}`)),!1;let i=m[t];return i||(i=f(t),t<16384&&(m[t]=i)),l("writeVarByteInt: writing to stream: %o",i),e.write(i)}function _(e,t){let r=i.byteLength(t);return p(e,r),l("writeString: %s",t),e.write(t,"utf8")}function v(e,t,r){_(e,t),_(e,r)}function E(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",h[t]),e.write(h[t])}function S(e,t){let r=c(t);return l("writeNumberGenerated: %o",r),e.write(r)}function A(e,t){"string"==typeof t?_(e,t):t?(p(e,t.length),e.write(t)):p(e,0)}function k(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){C(e,{},0)}};let n=0;function o(t,n){let o=0;switch(r.propertiesTypes[t]){case"byte":if("boolean"!=typeof n)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=2;break;case"int8":if("number"!=typeof n||n<0||n>255)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=2;break;case"binary":if(n&&null===n)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=1+i.byteLength(n)+2;break;case"int16":if("number"!=typeof n||n<0||n>65535)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=3;break;case"int32":if("number"!=typeof n||n<0||n>4294967295)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=5;break;case"var":if("number"!=typeof n||n<0||n>268435455)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=1+i.byteLength(f(n));break;case"string":if("string"!=typeof n)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=3+i.byteLength(n.toString());break;case"pair":if("object"!=typeof n)return e.destroy(new Error(`Invalid ${t}: ${n}`)),!1;o+=Object.getOwnPropertyNames(n).reduce(((e,t)=>{let r=n[t];return Array.isArray(r)?e+=r.reduce(((e,r)=>e+=3+i.byteLength(t.toString())+2+i.byteLength(r.toString())),0):e+=3+i.byteLength(t.toString())+2+i.byteLength(n[t].toString()),e}),0);break;default:return e.destroy(new Error(`Invalid property ${t}: ${n}`)),!1}return o}if(t)for(let e in t){let r=0,i=0,s=t[e];if(Array.isArray(s))for(let t=0;t<s.length;t++){if(i=o(e,s[t]),!i)return!1;r+=i}else{if(i=o(e,s),!i)return!1;r=i}if(!r)return!1;n+=r}return{length:i.byteLength(f(n))+n,write(){C(e,t,n)}}}function I(e,t,r,i){let n=["reasonString","userProperties"],o=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,s=k(e,t);if(o)for(;i+s.length>o;){let r=n.shift();if(!r||!t[r])return!1;delete t[r],s=k(e,t)}return s}function T(e,t,n){switch(r.propertiesTypes[t]){case"byte":e.write(i.from([r.properties[t]])),e.write(i.from([+n]));break;case"int8":e.write(i.from([r.properties[t]])),e.write(i.from([n]));break;case"binary":e.write(i.from([r.properties[t]])),A(e,n);break;case"int16":e.write(i.from([r.properties[t]])),p(e,n);break;case"int32":e.write(i.from([r.properties[t]])),function(e,t){let r=d(t);l("write4ByteNumber: %o",r),e.write(r)}(e,n);break;case"var":e.write(i.from([r.properties[t]])),w(e,n);break;case"string":e.write(i.from([r.properties[t]])),_(e,n);break;case"pair":Object.getOwnPropertyNames(n).forEach((o=>{let s=n[o];Array.isArray(s)?s.forEach((n=>{e.write(i.from([r.properties[t]])),v(e,o.toString(),n.toString())})):(e.write(i.from([r.properties[t]])),v(e,o.toString(),s.toString()))}));break;default:return e.destroy(new Error(`Invalid property ${t} value: ${n}`)),!1}}function C(e,t,r){w(e,r);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!==t[r]){let i=t[r];if(Array.isArray(i))for(let t=0;t<i.length;t++)T(e,r,i[t]);else T(e,r,i)}}function O(e){return e?e instanceof i?e.length:i.byteLength(e):0}function R(e){return"string"==typeof e||e instanceof i}t.exports=y})),Sa=ei(((e,t)=>{Yn(),Un(),ii();var r=Ea(),{EventEmitter:i}=(Bo(),ri(Ao)),{Buffer:n}=(Gn(),ri(jn));var o=class extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e,t=0,r=new Array(this._array.length),i=this._array,o=0;for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?r[e]=i[e].length:r[e]=n.byteLength(i[e]),t+=r[e];let s=n.allocUnsafe(t);for(e=0;e<i.length&&void 0!==i[e];e++)"string"!=typeof i[e]?(i[e].copy(s,o),o+=r[e]):(s.write(i[e],o),o+=r[e]);return s}destroy(e){e&&this.emit("error",e)}};t.exports=function(e,t){let i=new o;return r(e,i,t),i.concat()}})),Aa=ei((e=>{Yn(),Un(),ii(),e.parser=wa().parser,e.generate=Sa(),e.writeToStream=Ea()})),ka=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.nextId=Math.max(1,Math.floor(65535*Math.random()))}allocate(){let e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e}getLastAllocated(){return 1===this.nextId?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}}})),Ia=ei(((e,t)=>{function r(e){return e instanceof qn?qn.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}Yn(),Un(),ii(),t.exports=function(e){return(e=e||{}).circles?function(e){var t=[],i=[];return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,e);if(o instanceof Map)return new Map(n(Array.from(o),e));if(o instanceof Set)return new Set(n(Array.from(o),e));var s={};for(var a in t.push(o),i.push(s),o){var l=o[a];if("object"!=typeof l||null===l)s[a]=l;else if(l instanceof Date)s[a]=new Date(l);else if(l instanceof Map)s[a]=new Map(n(Array.from(l),e));else if(l instanceof Set)s[a]=new Set(n(Array.from(l),e));else if(ArrayBuffer.isView(l))s[a]=r(l);else{var h=t.indexOf(l);s[a]=-1!==h?i[h]:e(l)}}return t.pop(),i.pop(),s}:function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,e);if(o instanceof Map)return new Map(n(Array.from(o),e));if(o instanceof Set)return new Set(n(Array.from(o),e));var s={};for(var a in t.push(o),i.push(s),o)if(!1!==Object.hasOwnProperty.call(o,a)){var l=o[a];if("object"!=typeof l||null===l)s[a]=l;else if(l instanceof Date)s[a]=new Date(l);else if(l instanceof Map)s[a]=new Map(n(Array.from(l),e));else if(l instanceof Set)s[a]=new Set(n(Array.from(l),e));else if(ArrayBuffer.isView(l))s[a]=r(l);else{var h=t.indexOf(l);s[a]=-1!==h?i[h]:e(l)}}return t.pop(),i.pop(),s};function n(e,n){for(var o=Object.keys(e),s=new Array(o.length),a=0;a<o.length;a++){var l=o[a],h=e[l];if("object"!=typeof h||null===h)s[l]=h;else if(h instanceof Date)s[l]=new Date(h);else if(ArrayBuffer.isView(h))s[l]=r(h);else{var c=t.indexOf(h);s[l]=-1!==c?i[c]:n(h)}}return s}}(e):e.proto?function e(i){if("object"!=typeof i||null===i)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,e);if(i instanceof Map)return new Map(t(Array.from(i),e));if(i instanceof Set)return new Set(t(Array.from(i),e));var n={};for(var o in i){var s=i[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):s instanceof Map?n[o]=new Map(t(Array.from(s),e)):s instanceof Set?n[o]=new Set(t(Array.from(s),e)):ArrayBuffer.isView(s)?n[o]=r(s):n[o]=e(s)}return n}:function e(i){if("object"!=typeof i||null===i)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return t(i,e);if(i instanceof Map)return new Map(t(Array.from(i),e));if(i instanceof Set)return new Set(t(Array.from(i),e));var n={};for(var o in i)if(!1!==Object.hasOwnProperty.call(i,o)){var s=i[o];"object"!=typeof s||null===s?n[o]=s:s instanceof Date?n[o]=new Date(s):s instanceof Map?n[o]=new Map(t(Array.from(s),e)):s instanceof Set?n[o]=new Set(t(Array.from(s),e)):ArrayBuffer.isView(s)?n[o]=r(s):n[o]=e(s)}return n};function t(e,t){for(var i=Object.keys(e),n=new Array(i.length),o=0;o<i.length;o++){var s=i[o],a=e[s];"object"!=typeof a||null===a?n[s]=a:a instanceof Date?n[s]=new Date(a):ArrayBuffer.isView(a)?n[s]=r(a):n[s]=t(a)}return n}}})),Ta=ei(((e,t)=>{Yn(),Un(),ii(),t.exports=Ia()()})),Ca=ei((e=>{function t(e){let t=e.split("/");for(let e=0;e<t.length;e++)if("+"!==t[e]){if("#"===t[e])return e===t.length-1;if(-1!==t[e].indexOf("+")||-1!==t[e].indexOf("#"))return!1}return!0}Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.validateTopics=e.validateTopic=void 0,e.validateTopic=t,e.validateTopics=function(e){if(0===e.length)return"empty_topic_list";for(let r=0;r<e.length;r++)if(!t(e[r]))return e[r];return null}})),Oa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t=ca(),r={objectMode:!0},i={clean:!0};e.default=class{constructor(e){this.options=e||{},this.options=Object.assign(Object.assign({},i),e),this._inflights=new Map}put(e,t){return this._inflights.set(e.messageId,e),t&&t(),this}createStream(){let e=new t.Readable(r),i=[],n=!1,o=0;return this._inflights.forEach(((e,t)=>{i.push(e)})),e._read=()=>{!n&&o<i.length?e.push(i[o++]):e.push(null)},e.destroy=t=>{if(!n)return n=!0,setTimeout((()=>{e.emit("close")}),0),e},e}del(e,t){let r=this._inflights.get(e.messageId);return r?(this._inflights.delete(e.messageId),t(null,r)):t&&t(new Error("missing packet")),this}get(e,t){let r=this._inflights.get(e.messageId);return r?t(null,r):t&&t(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}}})),Ra=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t=[0,16,128,131,135,144,145,151,153];e.default=(e,r,i)=>{e.log("handlePublish: packet %o",r),i=typeof i<"u"?i:e.noop;let n=r.topic.toString(),o=r.payload,{qos:s}=r,{messageId:a}=r,{options:l}=e;if(5===e.options.protocolVersion){let t;if(r.properties&&(t=r.properties.topicAlias),typeof t<"u")if(0===n.length){if(!(t>0&&t<=65535))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));{let r=e.topicAliasRecv.getTopicByAlias(t);if(!r)return e.log("handlePublish :: unregistered topic alias. alias: %d",t),void e.emit("error",new Error("Received unregistered Topic Alias"));n=r,e.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",n,t)}}else{if(!e.topicAliasRecv.put(n,t))return e.log("handlePublish :: topic alias out of range. alias: %d",t),void e.emit("error",new Error("Received Topic Alias is out of range"));e.log("handlePublish :: registered topic: %s - alias: %d",n,t)}}switch(e.log("handlePublish: qos %d",s),s){case 2:l.customHandleAcks(n,o,r,((n,o)=>("number"==typeof n&&(o=n,n=null),n?e.emit("error",n):-1===t.indexOf(o)?e.emit("error",new Error("Wrong reason code for pubrec")):void(o?e._sendPacket({cmd:"pubrec",messageId:a,reasonCode:o},i):e.incomingStore.put(r,(()=>{e._sendPacket({cmd:"pubrec",messageId:a},i)}))))));break;case 1:l.customHandleAcks(n,o,r,((s,l)=>("number"==typeof s&&(l=s,s=null),s?e.emit("error",s):-1===t.indexOf(l)?e.emit("error",new Error("Wrong reason code for puback")):(l||e.emit("message",n,o,r),void e.handleMessage(r,(t=>{if(t)return i&&i(t);e._sendPacket({cmd:"puback",messageId:a,reasonCode:l},i)}))))));break;case 0:e.emit("message",n,o,r),e.handleMessage(r,i);break;default:e.log("handlePublish: unknown QoS. Doing nothing.")}}})),Ba=ei(((e,t)=>{t.exports={version:"5.7.0"}})),Pa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.MQTTJS_VERSION=e.nextTick=e.applyMixin=e.ErrorWithReasonCode=void 0;var t=class e extends Error{constructor(t,r){super(t),this.code=r,Object.setPrototypeOf(this,e.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};e.ErrorWithReasonCode=t,e.applyMixin=function(e,t,r=!1){var i;let n=[t];for(;;){let e=n[0],t=Object.getPrototypeOf(e);if(!t?.prototype)break;n.unshift(t)}for(let t of n)for(let n of Object.getOwnPropertyNames(t.prototype))(r||"constructor"!==n)&&Object.defineProperty(e.prototype,n,null!==(i=Object.getOwnPropertyDescriptor(t.prototype,n))&&void 0!==i?i:Object.create(null))},e.nextTick="function"==typeof(null==ni?void 0:ni.nextTick)?ni.nextTick:e=>{setTimeout(e,0)},e.MQTTJS_VERSION=Ba().version})),xa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=void 0,e.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};e.default=(t,r)=>{let i,{messageId:n}=r,o=r.cmd,s=null,a=t.outgoing[n]?t.outgoing[n].cb:null;if(a){switch(t.log("_handleAck :: packet type",o),o){case"pubcomp":case"puback":{let o=r.reasonCode;o&&o>0&&16!==o?(i=new Error(`Publish error: ${e.ReasonCodes[o]}`),i.code=o,t._removeOutgoingAndStoreMessage(n,(()=>{a(i,r)}))):t._removeOutgoingAndStoreMessage(n,a);break}case"pubrec":{s={cmd:"pubrel",qos:2,messageId:n};let o=r.reasonCode;o&&o>0&&16!==o?(i=new Error(`Publish error: ${e.ReasonCodes[o]}`),i.code=o,t._removeOutgoingAndStoreMessage(n,(()=>{a(i,r)}))):t._sendPacket(s);break}case"suback":{delete t.outgoing[n],t.messageIdProvider.deallocate(n);let e=r.granted;for(let r=0;r<e.length;r++)if(128&e[r]){let e=t.messageIdToTopic[n];e&&e.forEach((e=>{delete t._resubscribeTopics[e]}))}delete t.messageIdToTopic[n],t._invokeStoreProcessingQueue(),a(null,r);break}case"unsuback":delete t.outgoing[n],t.messageIdProvider.deallocate(n),t._invokeStoreProcessingQueue(),a(null);break;default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&0===Object.keys(t.outgoing).length&&t.emit("outgoingEmpty")}else t.log("_handleAck :: Server sent an ack in error. Ignoring.")}})),Ma=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t=Pa(),r=xa();e.default=(e,i)=>{let{options:n}=e,o=n.protocolVersion,s=5===o?i.reasonCode:i.returnCode;if(5===o)e.handleAuth(i,((i,n)=>{if(i)e.emit("error",i);else if(24===s)e.reconnecting=!1,e._sendPacket(n);else{let i=new t.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[s]}`,s);e.emit("error",i)}}));else{let r=new t.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${o}`,s);e.emit("error",r)}}})),Ua=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=void 0;var t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=new Set,i="object"==typeof ni&&ni?ni:{},n=(e,t,r,n)=>{"function"==typeof i.emitWarning?i.emitWarning(e,t,r,n):console.error(`[${r}] ${t}: ${e}`)},o=globalThis.AbortController,s=globalThis.AbortSignal;if(typeof o>"u"){s=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,t){this._onabort.push(t)}},o=class{constructor(){t()}signal=new s;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(let t of this.signal._onabort)t(e);this.signal.onabort?.(e)}}};let e="1"!==i.env?.LRU_CACHE_IGNORE_AC_WARNING,t=()=>{e&&(e=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Symbol("type");var a=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),l=e=>a(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?h:null:null,h=class extends Array{constructor(e){super(e),this.fill(0)}},c=class e{heap;length;static#e=!1;static create(t){let r=l(t);if(!r)return[];e.#e=!0;let i=new e(t,r);return e.#e=!1,i}constructor(t,r){if(!e.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},u=class e{#e;#t;#r;#i;#n;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#o;#s;#a;#l;#h;#c;#u;#f;#d;#p;#g;#y;#b;#m;#w;#_;#v;static unsafeExposeInternals(e){return{starts:e.#b,ttls:e.#m,sizes:e.#y,keyMap:e.#a,keyList:e.#l,valList:e.#h,next:e.#c,prev:e.#u,get head(){return e.#f},get tail(){return e.#d},free:e.#p,isBackgroundFetch:t=>e.#E(t),backgroundFetch:(t,r,i,n)=>e.#S(t,r,i,n),moveToTail:t=>e.#A(t),indexes:t=>e.#k(t),rindexes:t=>e.#I(t),isStale:t=>e.#T(t)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#s}get size(){return this.#o}get fetchMethod(){return this.#n}get dispose(){return this.#r}get disposeAfter(){return this.#i}constructor(t){let{max:i=0,ttl:o,ttlResolution:s=1,ttlAutopurge:h,updateAgeOnGet:u,updateAgeOnHas:f,allowStale:d,dispose:p,disposeAfter:g,noDisposeOnSet:y,noUpdateTTL:b,maxSize:m=0,maxEntrySize:w=0,sizeCalculation:_,fetchMethod:v,noDeleteOnFetchRejection:E,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:k,ignoreFetchAbort:I}=t;if(0!==i&&!a(i))throw new TypeError("max option must be a nonnegative integer");let T=i?l(i):Array;if(!T)throw new Error("invalid max value: "+i);if(this.#e=i,this.#t=m,this.maxEntrySize=w||this.#t,this.sizeCalculation=_,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==v&&"function"!=typeof v)throw new TypeError("fetchMethod must be a function if specified");if(this.#n=v,this.#_=!!v,this.#a=new Map,this.#l=new Array(i).fill(void 0),this.#h=new Array(i).fill(void 0),this.#c=new T(i),this.#u=new T(i),this.#f=0,this.#d=0,this.#p=c.create(i),this.#o=0,this.#s=0,"function"==typeof p&&(this.#r=p),"function"==typeof g?(this.#i=g,this.#g=[]):(this.#i=void 0,this.#g=void 0),this.#w=!!this.#r,this.#v=!!this.#i,this.noDisposeOnSet=!!y,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!E,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!k,this.ignoreFetchAbort=!!I,0!==this.maxEntrySize){if(0!==this.#t&&!a(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#C()}if(this.allowStale=!!d,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!u,this.updateAgeOnHas=!!f,this.ttlResolution=a(s)||0===s?s:1,this.ttlAutopurge=!!h,this.ttl=o||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(0===this.#e&&0===this.ttl&&0===this.#t)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let t="LRU_CACHE_UNBOUNDED";(e=>!r.has(e))(t)&&(r.add(t),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,e))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#O(){let e=new h(this.#e),r=new h(this.#e);this.#m=e,this.#b=r,this.#R=(i,n,o=t.now())=>{if(r[i]=0!==n?o:0,e[i]=n,0!==n&&this.ttlAutopurge){let e=setTimeout((()=>{this.#T(i)&&this.delete(this.#l[i])}),n+1);e.unref&&e.unref()}},this.#B=i=>{r[i]=0!==e[i]?t.now():0},this.#P=(t,o)=>{if(e[o]){let s=e[o],a=r[o];t.ttl=s,t.start=a,t.now=i||n();let l=t.now-a;t.remainingTTL=s-l}};let i=0,n=()=>{let e=t.now();if(this.ttlResolution>0){i=e;let t=setTimeout((()=>i=0),this.ttlResolution);t.unref&&t.unref()}return e};this.getRemainingTTL=t=>{let o=this.#a.get(t);if(void 0===o)return 0;let s=e[o],a=r[o];return 0===s||0===a?1/0:s-((i||n())-a)},this.#T=t=>0!==e[t]&&0!==r[t]&&(i||n())-r[t]>e[t]}#B=()=>{};#P=()=>{};#R=()=>{};#T=()=>!1;#C(){let e=new h(this.#e);this.#s=0,this.#y=e,this.#x=t=>{this.#s-=e[t],e[t]=0},this.#M=(e,t,r,i)=>{if(this.#E(t))return 0;if(!a(r)){if(!i)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof i)throw new TypeError("sizeCalculation must be a function");if(r=i(t,e),!a(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.#U=(t,r,i)=>{if(e[t]=r,this.#t){let r=this.#t-e[t];for(;this.#s>r;)this.#j(!0)}this.#s+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#s)}}#x=e=>{};#U=(e,t,r)=>{};#M=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#o)for(let t=this.#d;this.#L(t)&&((e||!this.#T(t))&&(yield t),t!==this.#f);)t=this.#u[t]}*#I({allowStale:e=this.allowStale}={}){if(this.#o)for(let t=this.#f;this.#L(t)&&((e||!this.#T(t))&&(yield t),t!==this.#d);)t=this.#c[t]}#L(e){return void 0!==e&&this.#a.get(this.#l[e])===e}*entries(){for(let e of this.#k())void 0!==this.#h[e]&&void 0!==this.#l[e]&&!this.#E(this.#h[e])&&(yield[this.#l[e],this.#h[e]])}*rentries(){for(let e of this.#I())void 0!==this.#h[e]&&void 0!==this.#l[e]&&!this.#E(this.#h[e])&&(yield[this.#l[e],this.#h[e]])}*keys(){for(let e of this.#k()){let t=this.#l[e];void 0!==t&&!this.#E(this.#h[e])&&(yield t)}}*rkeys(){for(let e of this.#I()){let t=this.#l[e];void 0!==t&&!this.#E(this.#h[e])&&(yield t)}}*values(){for(let e of this.#k())void 0!==this.#h[e]&&!this.#E(this.#h[e])&&(yield this.#h[e])}*rvalues(){for(let e of this.#I())void 0!==this.#h[e]&&!this.#E(this.#h[e])&&(yield this.#h[e])}[Symbol.iterator](){return this.entries()}find(e,t={}){for(let r of this.#k()){let i=this.#h[r],n=this.#E(i)?i.__staleWhileFetching:i;if(void 0!==n&&e(n,this.#l[r],this))return this.get(this.#l[r],t)}}forEach(e,t=this){for(let r of this.#k()){let i=this.#h[r],n=this.#E(i)?i.__staleWhileFetching:i;void 0!==n&&e.call(t,n,this.#l[r],this)}}rforEach(e,t=this){for(let r of this.#I()){let i=this.#h[r],n=this.#E(i)?i.__staleWhileFetching:i;void 0!==n&&e.call(t,n,this.#l[r],this)}}purgeStale(){let e=!1;for(let t of this.#I({allowStale:!0}))this.#T(t)&&(this.delete(this.#l[t]),e=!0);return e}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let i=this.#l[r],n=this.#h[r],o=this.#E(n)?n.__staleWhileFetching:n;if(void 0===o||void 0===i)continue;let s={value:o};if(this.#m&&this.#b){s.ttl=this.#m[r];let e=t.now()-this.#b[r];s.start=Math.floor(Date.now()-e)}this.#y&&(s.size=this.#y[r]),e.unshift([i,s])}return e}load(e){this.clear();for(let[r,i]of e){if(i.start){let e=Date.now()-i.start;i.start=t.now()-e}this.set(r,i.value,i)}}set(e,t,r={}){if(void 0===t)return this.delete(e),this;let{ttl:i=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:s=this.sizeCalculation,status:a}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,h=this.#M(e,t,r.size||0,s);if(this.maxEntrySize&&h>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.delete(e),this;let c=0===this.#o?void 0:this.#a.get(e);if(void 0===c)c=0===this.#o?this.#d:0!==this.#p.length?this.#p.pop():this.#o===this.#e?this.#j(!1):this.#o,this.#l[c]=e,this.#h[c]=t,this.#a.set(e,c),this.#c[this.#d]=c,this.#u[c]=this.#d,this.#d=c,this.#o++,this.#U(c,h,a),a&&(a.set="add"),l=!1;else{this.#A(c);let r=this.#h[c];if(t!==r){if(this.#_&&this.#E(r)){r.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:t}=r;void 0!==t&&!o&&(this.#w&&this.#r?.(t,e,"set"),this.#v&&this.#g?.push([t,e,"set"]))}else o||(this.#w&&this.#r?.(r,e,"set"),this.#v&&this.#g?.push([r,e,"set"]));if(this.#x(c),this.#U(c,h,a),this.#h[c]=t,a){a.set="replace";let e=r&&this.#E(r)?r.__staleWhileFetching:r;void 0!==e&&(a.oldValue=e)}}else a&&(a.set="update")}if(0!==i&&!this.#m&&this.#O(),this.#m&&(l||this.#R(c,i,n),a&&this.#P(a,c)),!o&&this.#v&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}return this}pop(){try{for(;this.#o;){let e=this.#h[this.#f];if(this.#j(!0),this.#E(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(void 0!==e)return e}}finally{if(this.#v&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}}}#j(e){let t=this.#f,r=this.#l[t],i=this.#h[t];return this.#_&&this.#E(i)?i.__abortController.abort(new Error("evicted")):(this.#w||this.#v)&&(this.#w&&this.#r?.(i,r,"evict"),this.#v&&this.#g?.push([i,r,"evict"])),this.#x(t),e&&(this.#l[t]=void 0,this.#h[t]=void 0,this.#p.push(t)),1===this.#o?(this.#f=this.#d=0,this.#p.length=0):this.#f=this.#c[t],this.#a.delete(r),this.#o--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,n=this.#a.get(e);if(void 0!==n){let e=this.#h[n];if(this.#E(e)&&void 0===e.__staleWhileFetching)return!1;if(!this.#T(n))return r&&this.#B(n),i&&(i.has="hit",this.#P(i,n)),!0;i&&(i.has="stale",this.#P(i,n))}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#a.get(e);if(void 0!==i&&(r||!this.#T(i))){let e=this.#h[i];return this.#E(e)?e.__staleWhileFetching:e}}#S(e,t,r,i){let n=void 0===t?void 0:this.#h[t];if(this.#E(n))return n;let s=new o,{signal:a}=r;a?.addEventListener("abort",(()=>s.abort(a.reason)),{signal:s.signal});let l={signal:s.signal,options:r,context:i},h=(i,n=!1)=>{let{aborted:o}=s.signal,a=r.ignoreFetchAbort&&void 0!==i;if(r.status&&(o&&!n?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,a&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),o&&!a&&!n)return c(s.signal.reason);let h=u;return this.#h[t]===u&&(void 0===i?h.__staleWhileFetching?this.#h[t]=h.__staleWhileFetching:this.delete(e):(r.status&&(r.status.fetchUpdated=!0),this.set(e,i,l.options))),i},c=i=>{let{aborted:n}=s.signal,o=n&&r.allowStaleOnFetchAbort,a=o||r.allowStaleOnFetchRejection,l=a||r.noDeleteOnFetchRejection,h=u;if(this.#h[t]===u&&(l&&void 0!==h.__staleWhileFetching?o||(this.#h[t]=h.__staleWhileFetching):this.delete(e)),a)return r.status&&void 0!==h.__staleWhileFetching&&(r.status.returnedStale=!0),h.__staleWhileFetching;if(h.__returned===h)throw i};r.status&&(r.status.fetchDispatched=!0);let u=new Promise(((t,i)=>{let o=this.#n?.(e,n,l);o&&o instanceof Promise&&o.then((e=>t(void 0===e?void 0:e)),i),s.signal.addEventListener("abort",(()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(t(void 0),r.allowStaleOnFetchAbort&&(t=e=>h(e,!0)))}))})).then(h,(e=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=e),c(e)))),f=Object.assign(u,{__abortController:s,__staleWhileFetching:n,__returned:void 0});return void 0===t?(this.set(e,f,{...l.options,status:void 0}),t=this.#a.get(e)):this.#h[t]=f,f}#E(e){if(!this.#_)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof o}async fetch(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:p,forceRefresh:g=!1,status:y,signal:b}=t;if(!this.#_)return y&&(y.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:n,status:y});let m={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:s,size:a,sizeCalculation:l,noUpdateTTL:h,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:d,ignoreFetchAbort:f,status:y,signal:b},w=this.#a.get(e);if(void 0===w){y&&(y.fetch="miss");let t=this.#S(e,w,m,p);return t.__returned=t}{let t=this.#h[w];if(this.#E(t)){let e=r&&void 0!==t.__staleWhileFetching;return y&&(y.fetch="inflight",e&&(y.returnedStale=!0)),e?t.__staleWhileFetching:t.__returned=t}let n=this.#T(w);if(!g&&!n)return y&&(y.fetch="hit"),this.#A(w),i&&this.#B(w),y&&this.#P(y,w),t;let o=this.#S(e,w,m,p),s=void 0!==o.__staleWhileFetching&&r;return y&&(y.fetch=n?"stale":"refresh",s&&n&&(y.returnedStale=!0)),s?o.__staleWhileFetching:o.__returned=o}}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=t,s=this.#a.get(e);if(void 0!==s){let t=this.#h[s],a=this.#E(t);return o&&this.#P(o,s),this.#T(s)?(o&&(o.get="stale"),a?(o&&r&&void 0!==t.__staleWhileFetching&&(o.returnedStale=!0),r?t.__staleWhileFetching:void 0):(n||this.delete(e),o&&r&&(o.returnedStale=!0),r?t:void 0)):(o&&(o.get="hit"),a?t.__staleWhileFetching:(this.#A(s),i&&this.#B(s),t))}o&&(o.get="miss")}#N(e,t){this.#u[t]=e,this.#c[e]=t}#A(e){e!==this.#d&&(e===this.#f?this.#f=this.#c[e]:this.#N(this.#u[e],this.#c[e]),this.#N(this.#d,e),this.#d=e)}delete(e){let t=!1;if(0!==this.#o){let r=this.#a.get(e);if(void 0!==r)if(t=!0,1===this.#o)this.clear();else{this.#x(r);let t=this.#h[r];this.#E(t)?t.__abortController.abort(new Error("deleted")):(this.#w||this.#v)&&(this.#w&&this.#r?.(t,e,"delete"),this.#v&&this.#g?.push([t,e,"delete"])),this.#a.delete(e),this.#l[r]=void 0,this.#h[r]=void 0,r===this.#d?this.#d=this.#u[r]:r===this.#f?this.#f=this.#c[r]:(this.#c[this.#u[r]]=this.#c[r],this.#u[this.#c[r]]=this.#u[r]),this.#o--,this.#p.push(r)}}if(this.#v&&this.#g?.length){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}return t}clear(){for(let e of this.#I({allowStale:!0})){let t=this.#h[e];if(this.#E(t))t.__abortController.abort(new Error("deleted"));else{let r=this.#l[e];this.#w&&this.#r?.(t,r,"delete"),this.#v&&this.#g?.push([t,r,"delete"])}}if(this.#a.clear(),this.#h.fill(void 0),this.#l.fill(void 0),this.#m&&this.#b&&(this.#m.fill(0),this.#b.fill(0)),this.#y&&this.#y.fill(0),this.#f=0,this.#d=0,this.#p.length=0,this.#s=0,this.#o=0,this.#v&&this.#g){let e,t=this.#g;for(;e=t?.shift();)this.#i?.(...e)}}};e.LRUCache=u})),ja=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.ContainerIterator=e.Container=e.Base=void 0;e.ContainerIterator=class{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};var t=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return 0===this.i}};e.Base=t;e.Container=class extends t{}})),La=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ja(),r=class extends t.Base{constructor(e=[]){super(),this.S=[];let t=this;e.forEach((function(e){t.push(e)}))}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(0!==this.i)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}};e.default=r})),Na=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ja(),r=class extends t.Base{constructor(e=[]){super(),this.j=0,this.q=[];let t=this;e.forEach((function(e){t.push(e)}))}clear(){this.q=[],this.i=this.j=0}push(e){let t=this.q.length;if(this.j/t>.5&&this.j+this.i>=t&&t>4096){let t=this.i;for(let e=0;e<t;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(0===this.i)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(0!==this.i)return this.q[this.j]}},i=r;e.default=i})),Da=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ja(),r=class extends t.Base{constructor(e=[],t=function(e,t){return e>t?-1:e<t?1:0},r=!0){if(super(),this.v=t,Array.isArray(e))this.C=r?[...e]:e;else{this.C=[];let t=this;e.forEach((function(e){t.C.push(e)}))}this.i=this.C.length;let i=this.i>>1;for(let e=this.i-1>>1;e>=0;--e)this.k(e,i)}m(e){let t=this.C[e];for(;e>0;){let r=e-1>>1,i=this.C[r];if(this.v(i,t)<=0)break;this.C[e]=i,e=r}this.C[e]=t}k(e,t){let r=this.C[e];for(;e<t;){let t=e<<1|1,i=t+1,n=this.C[t];if(i<this.i&&this.v(n,this.C[i])>0&&(t=i,n=this.C[i]),this.v(n,r)>=0)break;this.C[e]=n,e=t}this.C[e]=r}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(0===this.i)return;let e=this.C[0],t=this.C.pop();return this.i-=1,this.i&&(this.C[0]=t,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let t=this.C.indexOf(e);return!(t<0)&&(0===t?this.pop():t===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(t,1,this.C.pop()),this.i-=1,this.m(t),this.k(t,this.i>>1)),!0)}updateItem(e){let t=this.C.indexOf(e);return!(t<0)&&(this.m(t),this.k(t,this.i>>1),!0)}toArray(){return[...this.C]}},i=r;e.default=i})),Fa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ja(),r=class extends t.Container{};e.default=r})),Wa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.throwIteratorAccessError=function(){throw new RangeError("Iterator access denied!")}})),$a=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.RandomIterator=void 0;var t=ja(),r=Wa(),i=class extends t.ContainerIterator{constructor(e,t){super(t),this.o=e,0===this.iteratorType?(this.pre=function(){return 0===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,r.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,r.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return-1===this.o&&(0,r.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};e.RandomIterator=i})),za=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Fa())&&t.t?t:{default:t},i=$a();var n=class e extends i.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(e=[],t=!0){if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];let t=this;e.forEach((function(e){t.pushBack(e)}))}}clear(){this.i=0,this.J.length=0}begin(){return new n(0,this)}end(){return new n(this.i,this)}rBegin(){return new n(this.i-1,this,1)}rEnd(){return new n(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let t=0;for(let r=0;r<this.i;++r)this.J[r]!==e&&(this.J[t++]=this.J[r]);return this.i=this.J.length=t,this.i}eraseElementByIterator(e){let t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(0!==this.i)return this.i-=1,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(r).fill(t)),this.i+=r,this.i}find(e){for(let t=0;t<this.i;++t)if(this.J[t]===e)return new n(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[e++]=this.J[t]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let t=0;t<this.i;++t)e(this.J[t],t,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},s=o;e.default=s})),Ha=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Fa())&&t.t?t:{default:t},i=ja(),n=Wa();var o=class e extends i.ContainerIterator{constructor(e,t,r,i){super(i),this.o=e,this.h=t,this.container=r,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o.l=e}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let t=this;e.forEach((function(e){t.pushBack(e)}))}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}G(e,t){let r=t.B,i={l:e,L:t,B:r};t.B=i,r.L=i,t===this.h&&(this.p=i),r===this.h&&(this._=i),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}eraseElementByValue(e){let t=this.p;for(;t!==this.h;)t.l===e&&this.V(t),t=t.B;return this.i}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,n.throwIteratorAccessError)(),e=e.next(),this.V(t),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(0===this.i)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(0===this.i)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;r.l=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;if(r<=0)return this.i;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let i=this.p;for(let t=1;t<e;++t)i=i.B;let n=i.B;for(this.i+=r;r--;)i.B={l:t,L:i},i.B.L=i,i=i.B;i.B=n,n.L=i}return this.i}find(e){let t=this.p;for(;t!==this.h;){if(t.l===e)return new o(t,this.h,this);t=t.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,t=this._,r=0;for(;r<<1<this.i;){let i=e.l;e.l=t.l,t.l=i,e=e.B,t=t.L,r+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let t=e;for(;t.B!==this.h&&t.l===t.B.l;)t=t.B,this.i-=1;e.B=t.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let t=[];this.forEach((function(e){t.push(e)})),t.sort(e);let r=this.p;t.forEach((function(e){r.l=e,r=r.B}))}merge(e){let t=this;if(0===this.i)e.forEach((function(e){t.pushBack(e)}));else{let r=this.p;e.forEach((function(e){for(;r!==t.h&&r.l<=e;)r=r.B;t.G(e,r.L)}))}return this.i}forEach(e){let t=this.p,r=0;for(;t!==this.h;)e(t.l,r++,this),t=t.B}[Symbol.iterator](){return function*(){if(0===this.i)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}.bind(this)()}},a=s;e.default=a})),qa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=(t=Fa())&&t.t?t:{default:t},i=$a();var n=class e extends i.RandomIterator{constructor(e,t,r){super(e,r),this.container=t}copy(){return new e(this.o,this.container,this.iteratorType)}},o=class extends r.default{constructor(e=[],t=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let r=(()=>{if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("function"==typeof e.size)return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(r/this.F),1);for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));let i=Math.ceil(r/this.F);this.j=this.R=(this.P>>1)-(i>>1),this.D=this.N=this.F-r%this.F>>1;let n=this;e.forEach((function(e){n.pushBack(e)}))}T(){let e=[],t=Math.max(this.P>>1,1);for(let r=0;r<t;++r)e[r]=new Array(this.F);for(let t=this.j;t<this.P;++t)e[e.length]=this.A[t];for(let t=0;t<this.R;++t)e[e.length]=this.A[t];e[e.length]=[...this.A[this.R]],this.j=t,this.R=e.length-1;for(let r=0;r<t;++r)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){let t=this.D+e+1,r=t%this.F,i=r-1,n=this.j+(t-r)/this.F;return 0===r&&(n-=1),n%=this.P,i<0&&(i+=this.F),{curNodeBucketIndex:n,curNodePointerIndex:i}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new n(0,this)}end(){return new n(this.i,this)}rBegin(){return new n(this.i-1,this,1)}rEnd(){return new n(-1,this,1)}front(){if(0!==this.i)return this.A[this.j][this.D]}back(){if(0!==this.i)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(0===this.i)return;let e=this.A[this.R][this.N];return 1!==this.i&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(0===this.i)return;let e=this.A[this.j][this.D];return 1!==this.i&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.A[t][r]}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:i}=this.O(e);this.A[r][i]=t}insert(e,t,r=1){if(e<0||e>this.i)throw new RangeError;if(0===e)for(;r--;)this.pushFront(t);else if(e===this.i)for(;r--;)this.pushBack(t);else{let i=[];for(let t=e;t<this.i;++t)i.push(this.getElementByPos(t));this.cut(e-1);for(let e=0;e<r;++e)this.pushBack(t);for(let e=0;e<i.length;++e)this.pushBack(i[e])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:t,curNodePointerIndex:r}=this.O(e);return this.R=t,this.N=r,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(0===e)this.popFront();else if(e===this.i-1)this.popBack();else{let t=[];for(let r=e+1;r<this.i;++r)t.push(this.getElementByPos(r));this.cut(e),this.popBack();let r=this;t.forEach((function(e){r.pushBack(e)}))}return this.i}eraseElementByValue(e){if(0===this.i)return 0;let t=[];for(let r=0;r<this.i;++r){let i=this.getElementByPos(r);i!==e&&t.push(i)}let r=t.length;for(let e=0;e<r;++e)this.setElementByPos(e,t[e]);return this.cut(r-1)}eraseElementByIterator(e){let t=e.o;return this.eraseElementByPos(t),e=e.next()}find(e){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===e)return new n(t,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){let r=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,r),e+=1,t-=1}}unique(){if(this.i<=1)return this.i;let e=1,t=this.getElementByPos(0);for(let r=1;r<this.i;++r){let i=this.getElementByPos(r);i!==t&&(t=i,this.setElementByPos(e++,i))}for(;this.i>e;)this.popBack();return this.i}sort(e){let t=[];for(let e=0;e<this.i;++e)t.push(this.getElementByPos(e));t.sort(e);for(let e=0;e<this.i;++e)this.setElementByPos(e,t[e])}shrinkToFit(){if(0===this.i)return;let e=[];this.forEach((function(t){e.push(t)})),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let e=0;e<this.P;++e)this.A.push(new Array(this.F));for(let t=0;t<e.length;++t)this.pushBack(e[t])}forEach(e){for(let t=0;t<this.i;++t)e(this.getElementByPos(t),t,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}},s=o;e.default=s})),Va=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.TreeNodeEnableIndex=e.TreeNode=void 0;var t=class{constructor(e,t){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=t}L(){let e=this;if(1===e.ee&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let t=e.tt;for(;t.U===e;)e=t,t=e.tt;e=t}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}{let t=e.tt;for(;t.W===e;)e=t,t=e.tt;return e.W!==t?t:e}}te(){let e=this.tt,t=this.W,r=t.U;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.U=this,this.tt=t,this.W=r,r&&(r.tt=this),t}se(){let e=this.tt,t=this.U,r=t.W;return e.tt===this?e.tt=t:e.U===this?e.U=t:e.W=t,t.tt=e,t.W=this,this.tt=t,this.U=r,r&&(r.tt=this),t}};e.TreeNode=t;e.TreeNodeEnableIndex=class extends t{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}})),Ka=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Va(),r=ja(),i=Wa(),n=class extends r.Container{constructor(e=function(e,t){return e<t?-1:e>t?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=t.TreeNodeEnableIndex,this.M=function(e,t,r){let i=this.ne(e,t,r);if(i){let e=i.tt;for(;e!==this.h;)e.rt+=1,e=e.tt;let t=this.he(i);if(t){let{parentNode:e,grandParent:r,curNode:i}=t;e.ie(),r.ie(),i.ie()}}return this.i},this.V=function(e){let t=this.fe(e);for(;t!==this.h;)t.rt-=1,t=t.tt}):(this.re=t.TreeNode,this.M=function(e,t,r){let i=this.ne(e,t,r);return i&&this.he(i),this.i},this.V=this.fe),this.h=new this.re}X(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);if(i<0)e=e.W;else{if(!(i>0))return e;r=e,e=e.U}}return r}Z(e,t){let r=this.h;for(;e;)this.v(e.u,t)<=0?e=e.W:(r=e,e=e.U);return r}$(e,t){let r=this.h;for(;e;){let i=this.v(e.u,t);if(i<0)r=e,e=e.W;else{if(!(i>0))return e;e=e.U}}return r}rr(e,t){let r=this.h;for(;e;)this.v(e.u,t)<0?(r=e,e=e.W):e=e.U;return r}ue(e){for(;;){let t=e.tt;if(t===this.h)return;if(1===e.ee)return void(e.ee=0);if(e===t.U){let r=t.W;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.te():t.te();else{if(r.W&&1===r.W.ee)return r.ee=t.ee,t.ee=0,r.W.ee=0,void(t===this.Y?this.Y=t.te():t.te());r.U&&1===r.U.ee?(r.ee=1,r.U.ee=0,r.se()):(r.ee=1,e=t)}}else{let r=t.U;if(1===r.ee)r.ee=0,t.ee=1,t===this.Y?this.Y=t.se():t.se();else{if(r.U&&1===r.U.ee)return r.ee=t.ee,t.ee=0,r.U.ee=0,void(t===this.Y?this.Y=t.se():t.se());r.W&&1===r.W.ee?(r.ee=1,r.W.ee=0,r.te()):(r.ee=1,e=t)}}}}fe(e){if(1===this.i)return this.clear(),this.h;let t=e;for(;t.U||t.W;){if(t.W)for(t=t.W;t.U;)t=t.U;else t=t.U;[e.u,t.u]=[t.u,e.u],[e.l,t.l]=[t.l,e.l],e=t}this.h.U===t?this.h.U=t.tt:this.h.W===t&&(this.h.W=t.tt),this.ue(t);let r=t.tt;return t===r.U?r.U=void 0:r.W=void 0,this.i-=1,this.Y.ee=0,r}oe(e,t){return void 0!==e&&(!(!this.oe(e.U,t)&&!t(e))||this.oe(e.W,t))}he(e){for(;;){let t=e.tt;if(0===t.ee)return;let r=t.tt;if(t===r.U){let i=r.W;if(i&&1===i.ee){if(i.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.W){if(e.ee=0,e.U&&(e.U.tt=t),e.W&&(e.W.tt=r),t.W=e.U,r.U=e.W,e.U=t,e.W=r,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.se():r.se(),r.ee=1}else{let i=r.U;if(i&&1===i.ee){if(i.ee=t.ee=0,r===this.Y)return;r.ee=1,e=r;continue}if(e===t.U){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=t),r.W=e.U,t.U=e.W,e.U=r,e.W=t,r===this.Y)this.Y=e,this.h.tt=e;else{let t=r.tt;t.U===r?t.U=e:t.W=e}return e.tt=r.tt,t.tt=e,r.tt=e,r.ee=1,{parentNode:t,grandParent:r,curNode:e}}t.ee=0,r===this.Y?this.Y=r.te():r.te(),r.ee=1}return}}ne(e,t,r){if(void 0===this.Y)return this.i+=1,this.Y=new this.re(e,t),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,void(this.h.W=this.Y);let i,n=this.h.U,o=this.v(n.u,e);if(0!==o){if(o>0)n.U=new this.re(e,t),n.U.tt=n,i=n.U,this.h.U=i;else{let n=this.h.W,o=this.v(n.u,e);if(0===o)return void(n.l=t);if(o<0)n.W=new this.re(e,t),n.W.tt=n,i=n.W,this.h.W=i;else{if(void 0!==r){let n=r.o;if(n!==this.h){let r=this.v(n.u,e);if(0===r)return void(n.l=t);if(r>0){let r=n.L(),o=this.v(r.u,e);if(0===o)return void(r.l=t);o<0&&(i=new this.re(e,t),void 0===r.W?(r.W=i,i.tt=r):(n.U=i,i.tt=n))}}}if(void 0===i)for(i=this.Y;;){let r=this.v(i.u,e);if(r>0){if(void 0===i.U){i.U=new this.re(e,t),i.U.tt=i,i=i.U;break}i=i.U}else{if(!(r<0))return void(i.l=t);if(void 0===i.W){i.W=new this.re(e,t),i.W.tt=i,i=i.W;break}i=i.W}}}}return this.i+=1,i}n.l=t}I(e,t){for(;e;){let r=this.v(e.u,t);if(r<0)e=e.W;else{if(!(r>0))return e;e=e.U}}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,t){let r=e.o;if(r===this.h&&(0,i.throwIteratorAccessError)(),1===this.i)return r.u=t,!0;if(r===this.h.U)return this.v(r.B().u,t)>0&&(r.u=t,!0);if(r===this.h.W)return this.v(r.L().u,t)<0&&(r.u=t,!0);let n=r.L().u;if(this.v(n,t)>=0)return!1;let o=r.B().u;return!(this.v(o,t)<=0)&&(r.u=t,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=0,r=this;return this.oe(this.Y,(function(i){return e===t?(r.V(i),!0):(t+=1,!1)})),this.i}eraseElementByKey(e){if(0===this.i)return!1;let t=this.I(this.Y,e);return t!==this.h&&(this.V(t),!0)}eraseElementByIterator(e){let t=e.o;t===this.h&&(0,i.throwIteratorAccessError)();let r=void 0===t.W;return 0===e.iteratorType?r&&e.next():(!r||void 0===t.U)&&e.next(),this.V(t),e}forEach(e){let t=0;for(let r of this)e(r,t++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t,r=0;for(let i of this){if(r===e){t=i;break}r+=1}return t}getHeight(){if(0===this.i)return 0;let e=function(t){return t?Math.max(e(t.U),e(t.W))+1:0};return e(this.Y)}},o=n;e.default=o})),Ga=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=ja(),r=Wa(),i=class extends t.ContainerIterator{constructor(e,t,i){super(i),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o===this.h.U&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,r.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,t=this.h.tt;if(e===this.h)return t?t.rt-1:0;let r=0;for(e.U&&(r+=e.U.rt);e!==t;){let t=e.tt;e===t.W&&(r+=1,t.U&&(r+=t.U.rt)),e=t}return r}},n=i;e.default=n})),Ya=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(Ka()),r=n(Ga()),i=Wa();function n(e){return e&&e.t?e:{default:e}}var o=class e extends r.default{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){return this.o===this.h&&(0,i.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(e=[],t,r){super(t,r);let i=this;e.forEach((function(e){i.insert(e)}))}*K(e){void 0!==e&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,t){return this.M(e,void 0,t)}find(e){let t=this.I(this.Y,e);return new o(t,this.h,this)}lowerBound(e){let t=this.X(this.Y,e);return new o(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new o(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new o(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new o(t,this.h,this)}union(e){let t=this;return e.forEach((function(e){t.insert(e)})),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=s;e.default=a})),Qa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=n(Ka()),r=n(Ga()),i=Wa();function n(e){return e&&e.t?e:{default:e}}var o=class e extends r.default{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){this.o===this.h&&(0,i.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,i){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends t.default{constructor(e=[],t,r){super(t,r);let i=this;e.forEach((function(e){i.setElement(e[0],e[1])}))}*K(e){void 0!==e&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new o(this.h.U||this.h,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this.h.W||this.h,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(0===this.i)return;let e=this.h.U;return[e.u,e.l]}back(){if(0===this.i)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let t=this.X(this.Y,e);return new o(t,this.h,this)}upperBound(e){let t=this.Z(this.Y,e);return new o(t,this.h,this)}reverseLowerBound(e){let t=this.$(this.Y,e);return new o(t,this.h,this)}reverseUpperBound(e){let t=this.rr(this.Y,e);return new o(t,this.h,this)}setElement(e,t,r){return this.M(e,t,r)}find(e){let t=this.I(this.Y,e);return new o(t,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let t=this;return e.forEach((function(e){t.setElement(e[0],e[1])})),this.i}[Symbol.iterator](){return this.K(this.Y)}},a=s;e.default=a})),Ja=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=function(e){let t=typeof e;return"object"===t&&null!==e||"function"===t}})),Xa=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.HashContainerIterator=e.HashContainer=void 0;var t,r=ja(),i=(t=Ja())&&t.t?t:{default:t},n=Wa();var o=class extends r.ContainerIterator{constructor(e,t,r){super(r),this.o=e,this.h=t,0===this.iteratorType?(this.pre=function(){return this.o.L===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,n.throwIteratorAccessError)(),this.o=this.o.L,this})}};e.HashContainerIterator=o;var s=class extends r.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:t,B:r}=e;t.B=r,r.L=t,e===this.p&&(this.p=r),e===this._&&(this._=t),this.i-=1}M(e,t,r){let n;if(void 0===r&&(r=(0,i.default)(e)),r){let r=e[this.HASH_TAG];if(void 0!==r)return this.H[r].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),n={u:e,l:t,L:this._,B:this.h},this.H.push(n)}else{let r=this.g[e];if(r)return r.l=t,this.i;n={u:e,l:t,L:this._,B:this.h},this.g[e]=n}return 0===this.i?(this.p=n,this.h.B=n):this._.B=n,this._=n,this.h.L=n,++this.i}I(e,t){if(void 0===t&&(t=(0,i.default)(e)),t){let t=e[this.HASH_TAG];return void 0===t?this.h:this.H[t]}return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach((function(t){delete t.u[e]})),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let r;if(void 0===t&&(t=(0,i.default)(e)),t){let t=e[this.HASH_TAG];if(void 0===t)return!1;delete e[this.HASH_TAG],r=this.H[t],delete this.H[t]}else{if(r=this.g[e],void 0===r)return!1;delete this.g[e]}return this.V(r),!0}eraseElementByIterator(e){let t=e.o;return t===this.h&&(0,n.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}};e.HashContainer=s})),Za=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t=Xa(),r=Wa(),i=class e extends t.HashContainerIterator{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){return this.o===this.h&&(0,r.throwIteratorAccessError)(),this.o.u}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},n=class extends t.HashContainer{constructor(e=[]){super();let t=this;e.forEach((function(e){t.insert(e)}))}begin(){return new i(this.p,this.h,this)}end(){return new i(this.h,this.h,this)}rBegin(){return new i(this._,this.h,this,1)}rEnd(){return new i(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,t){return this.M(e,void 0,t)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return t.u}find(e,t){let r=this.I(e,t);return new i(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e(r.u,t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}};e.default=n})),el=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),e.default=void 0;var t,r=Xa(),i=(t=Ja())&&t.t?t:{default:t},n=Wa();var o=class e extends r.HashContainerIterator{constructor(e,t,r,i){super(e,t,i),this.container=r}get pointer(){this.o===this.h&&(0,n.throwIteratorAccessError)();let e=this;return new Proxy([],{get:(t,r)=>"0"===r?e.o.u:"1"===r?e.o.l:void 0,set(t,r,i){if("1"!==r)throw new TypeError("props must be 1");return e.o.l=i,!0}})}copy(){return new e(this.o,this.h,this.container,this.iteratorType)}},s=class extends r.HashContainer{constructor(e=[]){super();let t=this;e.forEach((function(e){t.setElement(e[0],e[1])}))}begin(){return new o(this.p,this.h,this)}end(){return new o(this.h,this.h,this)}rBegin(){return new o(this._,this.h,this,1)}rEnd(){return new o(this.h,this.h,this,1)}front(){if(0!==this.i)return[this.p.u,this.p.l]}back(){if(0!==this.i)return[this._.u,this._.l]}setElement(e,t,r){return this.M(e,t,r)}getElementByKey(e,t){if(void 0===t&&(t=(0,i.default)(e)),t){let t=e[this.HASH_TAG];return void 0!==t?this.H[t].l:void 0}let r=this.g[e];return r?r.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return[t.u,t.l]}find(e,t){let r=this.I(e,t);return new o(r,this.h,this)}forEach(e){let t=0,r=this.p;for(;r!==this.h;)e([r.u,r.l],t++,this),r=r.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}},a=s;e.default=a})),tl=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"t",{value:!0}),Object.defineProperty(e,"Deque",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"HashMap",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"HashSet",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"LinkList",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"OrderedMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"OrderedSet",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"PriorityQueue",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Queue",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Stack",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"Vector",{enumerable:!0,get:function(){return n.default}});var t=u(La()),r=u(Na()),i=u(Da()),n=u(za()),o=u(Ha()),s=u(qa()),a=u(Ya()),l=u(Qa()),h=u(Za()),c=u(el());function u(e){return e&&e.t?e:{default:e}}})),rl=ei(((e,t)=>{Yn(),Un(),ii();var r=tl().OrderedSet,i=ma()("number-allocator:trace"),n=ma()("number-allocator:error");function o(e,t){this.low=e,this.high=t}function s(e,t){if(!(this instanceof s))return new s(e,t);this.min=e,this.max=t,this.ss=new r([],((e,t)=>e.compare(t))),i("Create"),this.clear()}o.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},o.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},s.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},s.prototype.alloc=function(){if(0===this.ss.size())return i("alloc():empty"),null;let e=this.ss.begin(),t=e.pointer.low,r=e.pointer.high,n=t;return n+1<=r?this.ss.updateKeyByIterator(e,new o(t+1,r)):this.ss.eraseElementByPos(0),i("alloc():"+n),n},s.prototype.use=function(e){let t=new o(e,e),r=this.ss.lowerBound(t);if(!r.equals(this.ss.end())){let n=r.pointer.low,s=r.pointer.high;return r.pointer.equals(t)?(this.ss.eraseElementByIterator(r),i("use():"+e),!0):!(n>e)&&(n===e?(this.ss.updateKeyByIterator(r,new o(n+1,s)),i("use():"+e),!0):s===e?(this.ss.updateKeyByIterator(r,new o(n,s-1)),i("use():"+e),!0):(this.ss.updateKeyByIterator(r,new o(e+1,s)),this.ss.insert(new o(n,e-1)),i("use():"+e),!0))}return i("use():failed"),!1},s.prototype.free=function(e){if(e<this.min||e>this.max)return void n("free():"+e+" is out of range");let t=new o(e,e),r=this.ss.upperBound(t);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin()))return void this.ss.insert(t);r.pre();let i=r.pointer.high;r.pointer.high+1===e?this.ss.updateKeyByIterator(r,new o(i,e)):this.ss.insert(t)}else if(r.equals(this.ss.begin()))if(e+1===r.pointer.low){let t=r.pointer.high;this.ss.updateKeyByIterator(r,new o(e,t))}else this.ss.insert(t);else{let i=r.pointer.low,n=r.pointer.high;r.pre();let s=r.pointer.low;r.pointer.high+1===e?e+1===i?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new o(s,n))):this.ss.updateKeyByIterator(r,new o(s,e)):e+1===i?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new o(e,n))):this.ss.insert(t)}i("free():"+e)},s.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new o(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(let e of this.ss)console.log(e)},t.exports=s})),il=ei(((e,t)=>{Yn(),Un(),ii();var r=rl();t.exports.NumberAllocator=r})),nl=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t=Ua(),r=il();e.default=class{constructor(e){e>0&&(this.aliasToTopic=new t.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new r.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,t){if(0===t||t>this.max)return!1;let r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let t=this.topicToAlias[e];return typeof t<"u"&&this.aliasToTopic.get(t),t}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){return this.numberAllocator.firstVacant()||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}})),ol=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=xa(),i=t(nl()),n=Pa();e.default=(e,t)=>{e.log("_handleConnack");let{options:o}=e,s=5===o.protocolVersion?t.reasonCode:t.returnCode;if(clearTimeout(e.connackTimer),delete e.topicAliasSend,t.properties){if(t.properties.topicAliasMaximum){if(t.properties.topicAliasMaximum>65535)return void e.emit("error",new Error("topicAliasMaximum from broker is out of range"));t.properties.topicAliasMaximum>0&&(e.topicAliasSend=new i.default(t.properties.topicAliasMaximum))}t.properties.serverKeepAlive&&o.keepalive&&(o.keepalive=t.properties.serverKeepAlive),t.properties.maximumPacketSize&&(o.properties||(o.properties={}),o.properties.maximumPacketSize=t.properties.maximumPacketSize)}if(0===s)e.reconnecting=!1,e._onConnect(t);else if(s>0){let t=new n.ErrorWithReasonCode(`Connection refused: ${r.ReasonCodes[s]}`,s);e.emit("error",t)}}})),sl=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});e.default=(e,t,r)=>{e.log("handling pubrel packet");let i=typeof r<"u"?r:e.noop,{messageId:n}=t,o={cmd:"pubcomp",messageId:n};e.incomingStore.get(t,((t,r)=>{t?e._sendPacket(o,i):(e.emit("message",r.topic,r.payload,r),e.handleMessage(r,(t=>{if(t)return i(t);e.incomingStore.del(r,e.noop),e._sendPacket(o,i)})))}))}})),al=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(Ra()),i=t(Ma()),n=t(ol()),o=t(xa()),s=t(sl());e.default=(e,t,a)=>{let{options:l}=e;if(5===l.protocolVersion&&l.properties&&l.properties.maximumPacketSize&&l.properties.maximumPacketSize<t.length)return e.emit("error",new Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,r.default)(e,t,a);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":e.reschedulePing(),(0,o.default)(e,t),a();break;case"pubrel":e.reschedulePing(),(0,s.default)(e,t,a);break;case"connack":(0,n.default)(e,t),a();break;case"auth":e.reschedulePing(),(0,i.default)(e,t),a();break;case"pingresp":e.log("_handlePacket :: received pingresp"),e.reschedulePing(),a();break;case"disconnect":e.emit("disconnect",t),a();break;default:e.log("_handlePacket :: unknown command"),a()}}})),ll=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEventEmitter=void 0;var r=t((Bo(),ri(Ao))),i=Pa(),n=class{};e.TypedEventEmitter=n,(0,i.applyMixin)(n,r.default)})),hl=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.isReactNativeBrowser=e.isWebWorker=void 0;var t,r=()=>{var e,t;return!("object"!=typeof self||null===(t=null===(e=self?.constructor)||void 0===e?void 0:e.name)||void 0===t||!t.includes("WorkerGlobalScope"))},i=()=>typeof Gr<"u"&&"ReactNative"===Gr.product,n=typeof window<"u"&&(typeof Gr<"u"&&(null===(t=Gr.userAgent)||void 0===t?void 0:t.toLowerCase().indexOf(" electron/"))>-1&&null!=ni&&ni.versions?!Object.prototype.hasOwnProperty.call(ni.versions,"electron"):typeof window.document<"u")||r()||i();e.isWebWorker=r(),e.isReactNativeBrowser=i(),e.default=n})),cl=ei(((t,r)=>{var i,n;Yn(),Un(),ii(),i=t,n=function(e){var t,r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,n=2*i,o=new WeakMap,s=function(e,t){return function(o){var s=t.get(o),a=void 0===s?o.size:s<n?s+1:0;if(!o.has(a))return e(o,a);if(o.size<i){for(;o.has(a);)a=Math.floor(Math.random()*n);return e(o,a)}if(o.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;o.has(a);)a=Math.floor(Math.random()*r);return e(o,a)}}((t=o,function(e,r){return t.set(e,r),r}),o),a=function(e){return function(t){var r=e(t);return t.add(r),r}}(s);e.addUniqueNumber=a,e.generateUniqueNumber=s},"object"==typeof t&&typeof r<"u"?n(t):"function"==typeof define&&e.amdO?define(["exports"],n):n((i=typeof globalThis<"u"?globalThis:i||self).fastUniqueNumbers={})})),ul=ei(((t,r)=>{var i,n;Yn(),Un(),ii(),i=t,n=function(e,t){e.load=function(e){var r=new Map([[0,function(){}]]),i=new Map([[0,function(){}]]),n=new Map,o=new Worker(e);return o.addEventListener("message",(function(e){var t=e.data;if(function(e){return void 0!==e.method&&"call"===e.method}(t)){var o=t.params,s=o.timerId,a=o.timerType;if("interval"===a){var l=r.get(s);if("number"==typeof l){var h=n.get(l);if(void 0===h||h.timerId!==s||h.timerType!==a)throw new Error("The timer is in an undefined state.")}else{if(!(typeof l<"u"))throw new Error("The timer is in an undefined state.");l()}}else if("timeout"===a){var c=i.get(s);if("number"==typeof c){var u=n.get(c);if(void 0===u||u.timerId!==s||u.timerType!==a)throw new Error("The timer is in an undefined state.")}else{if(!(typeof c<"u"))throw new Error("The timer is in an undefined state.");c(),i.delete(s)}}}else{if(!function(e){return null===e.error&&"number"==typeof e.id}(t)){var f=t.error.message;throw new Error(f)}var d=t.id,p=n.get(d);if(void 0===p)throw new Error("The timer is in an undefined state.");var g=p.timerId,y=p.timerType;n.delete(d),"interval"===y?r.delete(g):i.delete(g)}})),{clearInterval:function(e){var i=t.generateUniqueNumber(n);n.set(i,{timerId:e,timerType:"interval"}),r.set(e,i),o.postMessage({id:i,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:function(e){var r=t.generateUniqueNumber(n);n.set(r,{timerId:e,timerType:"timeout"}),i.set(e,r),o.postMessage({id:r,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.generateUniqueNumber(r);return r.set(n,(function(){e(),"function"==typeof r.get(n)&&o.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}})})),o.postMessage({id:null,method:"set",params:{delay:i,now:performance.now(),timerId:n,timerType:"interval"}}),n},setTimeout:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.generateUniqueNumber(i);return i.set(n,e),o.postMessage({id:null,method:"set",params:{delay:r,now:performance.now(),timerId:n,timerType:"timeout"}}),n}}}},"object"==typeof t&&typeof r<"u"?n(t,cl()):"function"==typeof define&&e.amdO?define(["exports","fast-unique-numbers"],n):n((i=typeof globalThis<"u"?globalThis:i||self).workerTimersBroker={},i.fastUniqueNumbers)})),fl=ei(((t,r)=>{var i,n;Yn(),Un(),ii(),i=t,n=function(e,t){var r=function(e,t){var r=null;return function(){if(null!==r)return r;var i=new Blob([t],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(i);return r=e(n),setTimeout((function(){return URL.revokeObjectURL(n)})),r}}(t.load,'(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error(\'The given type "\'.concat(c,\'" is not supported\'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error(\'The given method "\'.concat(t.method,\'" is not supported\'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error(\'The given type "\'.concat(v,\'" is not supported\'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();');e.clearInterval=function(e){return r().clearInterval(e)},e.clearTimeout=function(e){return r().clearTimeout(e)},e.setInterval=function(){var e;return(e=r()).setInterval.apply(e,arguments)},e.setTimeout=function(){var e;return(e=r()).setTimeout.apply(e,arguments)}},"object"==typeof t&&typeof r<"u"?n(t,ul()):"function"==typeof define&&e.amdO?define(["exports","worker-timers-broker"],n):n((i=typeof globalThis<"u"?globalThis:i||self).workerTimers={},i.workerTimersBroker)})),dl=ei((e=>{Yn(),Un(),ii();var t=e&&e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(i,e,n);return r(i,e),i};Object.defineProperty(e,"__esModule",{value:!0});var n=i(hl()),o=fl(),s={set:o.setInterval,clear:o.clearInterval},a={set:(e,t)=>setInterval(e,t),clear:e=>clearInterval(e)};e.default=e=>{switch(e){case"native":return a;case"worker":return s;default:return!n.default||n.isWebWorker||n.isReactNativeBrowser?a:s}}})),pl=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t(dl());e.default=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,t){this.destroyed=!1,this.client=e,this.timer=(0,r.default)(t),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(1.5*this._keepalive);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set((()=>{this.destroyed||(this.counter+=1,2===this.counter?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())}),this._intervalEvery)}}})),gl=ei((e=>{Yn(),Un(),ii();var t=e&&e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(i,e,n);return r(i,e),i},n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(Qn()),s=n(Aa()),a=n(ka()),l=ca(),h=n(Ta()),c=i(Ca()),u=n(ma()),f=n(Oa()),d=n(al()),p=Pa(),g=ll(),y=n(pl()),b=i(hl()),m=globalThis.setImmediate||((...e)=>{let t=e.shift();(0,p.nextTick)((()=>{t(...e)}))}),w={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},_=class e extends g.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(t,r){super(),this.options=r||{};for(let e in w)typeof this.options[e]>"u"?this.options[e]=w[e]:this.options[e]=r[e];this.log=this.options.log||(0,u.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",e.VERSION),b.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",b.default?"browser":"node"),this.log("MqttClient :: options.protocol",r.protocol),this.log("MqttClient :: options.protocolVersion",r.protocolVersion),this.log("MqttClient :: options.username",r.username),this.log("MqttClient :: options.keepalive",r.keepalive),this.log("MqttClient :: options.reconnectPeriod",r.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",r.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",r.properties?r.properties.topicAliasMaximum:void 0),this.options.clientId="string"==typeof r.clientId?r.clientId:e.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===r.protocolVersion&&r.customHandleAcks?r.customHandleAcks:(...e)=>{e[3](null,0)},this.options.writeCache||(s.default.writeToStream.cacheNumbers=!1),this.streamBuilder=t,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new a.default:this.options.messageIdProvider,this.outgoingStore=r.outgoingStore||new f.default,this.incomingStore=r.incomingStore||new f.default,this.queueQoSZero=void 0===r.queueQoSZero||r.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,r.properties&&r.properties.topicAliasMaximum>0&&(r.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new o.default(r.properties.topicAliasMaximum)),this.on("connect",(()=>{let{queue:e}=this,t=()=>{let r=e.shift();this.log("deliver :: entry %o",r);let i=null;if(!r)return void this._resubscribe();i=r.packet,this.log("deliver :: call _sendPacket for %o",i);let n=!0;i.messageId&&0!==i.messageId&&(this.messageIdProvider.register(i.messageId)||(n=!1)),n?this._sendPacket(i,(e=>{r.cb&&r.cb(e),t()})):(this.log("messageId: %d has already used. The message is skipped and removed.",i.messageId),t())};this.log("connect :: sending queued packets"),t()})),this.on("close",(()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()})),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,t){t()}handleMessage(e,t){t()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;let t=new l.Writable,r=s.default.parser(this.options),i=null,n=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),r.on("packet",(e=>{this.log("parser :: on packet push to packets array."),n.push(e)}));let o=()=>{this.log("work :: getting next packet in queue");let e=n.shift();if(e)this.log("work :: packet pulled from queue"),(0,d.default)(this,e,a);else{this.log("work :: no packets in queue");let e=i;i=null,this.log("work :: done flag is %s",!!e),e&&e()}},a=()=>{if(n.length)(0,p.nextTick)(o);else{let e=i;i=null,e()}};t._write=(e,t,n)=>{i=n,this.log("writable stream :: parsing buffer"),r.parse(e),o()};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",(e=>{this.log("streamErrorHandler :: error",e.message),e.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",e)):this.noop(e)})),this.stream.on("close",(()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")})),this.log("connect: sending packet `connect`");let h={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(h.will=Object.assign(Object.assign({},this.options.will),{payload:null===(e=this.options.will)||void 0===e?void 0:e.payload})),this.topicAliasRecv&&(h.properties||(h.properties={}),this.topicAliasRecv&&(h.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(h),r.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){let e=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(e)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)}),this.options.connectTimeout),this}publish(e,t,r,i){this.log("publish :: message `%s` to topic `%s`",t,e);let{options:n}=this;"function"==typeof r&&(i=r,r=null),r=r||{},r=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),r);let{qos:o,retain:s,dup:a,properties:l,cbStorePut:h}=r;if(this._checkDisconnecting(i))return this;let c=()=>{let r=0;if((1===o||2===o)&&(r=this._nextId(),null===r))return this.log("No messageId left"),!1;let c={cmd:"publish",topic:e,payload:t,qos:o,retain:s,messageId:r,dup:a};switch(5===n.protocolVersion&&(c.properties=l),this.log("publish :: qos",o),o){case 1:case 2:this.outgoing[c.messageId]={volatile:!1,cb:i||this.noop},this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,void 0,h);break;default:this.log("MqttClient:publish: packet cmd: %s",c.cmd),this._sendPacket(c,i,h)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!c())&&this._storeProcessingQueue.push({invoke:c,cbStorePut:r.cbStorePut,callback:i}),this}publishAsync(e,t,r){return new Promise(((i,n)=>{this.publish(e,t,r,((e,t)=>{e?n(e):i(t)}))}))}subscribe(e,t,r){let i=this.options.protocolVersion;"function"==typeof t&&(r=t),r=r||this.noop;let n=!1,o=[];"string"==typeof e?o=e=[e]:Array.isArray(e)?o=e:"object"==typeof e&&(n=e.resubscribe,delete e.resubscribe,o=Object.keys(e));let s=c.validateTopics(o);if(null!==s)return m(r,new Error(`Invalid topic ${s}`)),this;if(this._checkDisconnecting(r))return this.log("subscribe: discconecting true"),this;let a={qos:0};5===i&&(a.nl=!1,a.rap=!1,a.rh=0);let l=(t=Object.assign(Object.assign({},a),t)).properties,h=[],u=(e,r)=>{if(r=r||t,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,e)||this._resubscribeTopics[e].qos<r.qos||n){let t={topic:e,qos:r.qos};5===i&&(t.nl=r.nl,t.rap=r.rap,t.rh=r.rh,t.properties=l),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",t.topic,t.qos),h.push(t)}};if(Array.isArray(e)?e.forEach((e=>{this.log("subscribe: array topic %s",e),u(e)})):Object.keys(e).forEach((t=>{this.log("subscribe: object topic %s, %o",t,e[t]),u(t,e[t])})),!h.length)return r(null,[]),this;let f=()=>{let e=this._nextId();if(null===e)return this.log("No messageId left"),!1;let t={cmd:"subscribe",subscriptions:h,messageId:e};if(l&&(t.properties=l),this.options.resubscribe){this.log("subscribe :: resubscribe true");let e=[];h.forEach((t=>{if(this.options.reconnectPeriod>0){let r={qos:t.qos};5===i&&(r.nl=t.nl||!1,r.rap=t.rap||!1,r.rh=t.rh||0,r.properties=t.properties),this._resubscribeTopics[t.topic]=r,e.push(t.topic)}})),this.messageIdToTopic[t.messageId]=e}return this.outgoing[t.messageId]={volatile:!0,cb(e,t){if(!e){let{granted:e}=t;for(let t=0;t<e.length;t+=1)h[t].qos=e[t]}r(e,h)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(t),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!f())&&this._storeProcessingQueue.push({invoke:f,callback:r}),this}subscribeAsync(e,t){return new Promise(((r,i)=>{this.subscribe(e,t,((e,t)=>{e?i(e):r(t)}))}))}unsubscribe(e,t,r){"string"==typeof e&&(e=[e]),"function"==typeof t&&(r=t),r=r||this.noop;let i=c.validateTopics(e);if(null!==i)return m(r,new Error(`Invalid topic ${i}`)),this;if(this._checkDisconnecting(r))return this;let n=()=>{let i=this._nextId();if(null===i)return this.log("No messageId left"),!1;let n={cmd:"unsubscribe",messageId:i,unsubscriptions:[]};return"string"==typeof e?n.unsubscriptions=[e]:Array.isArray(e)&&(n.unsubscriptions=e),this.options.resubscribe&&n.unsubscriptions.forEach((e=>{delete this._resubscribeTopics[e]})),"object"==typeof t&&t.properties&&(n.properties=t.properties),this.outgoing[n.messageId]={volatile:!0,cb:r},this.log("unsubscribe: call _sendPacket"),this._sendPacket(n),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!n())&&this._storeProcessingQueue.push({invoke:n,callback:r}),this}unsubscribeAsync(e,t){return new Promise(((r,i)=>{this.unsubscribe(e,t,((e,t)=>{e?i(e):r(t)}))}))}end(e,t,r){this.log("end :: (%s)",this.options.clientId),(null==e||"boolean"!=typeof e)&&(r=r||t,t=e,e=!1),"object"!=typeof t&&(r=r||t,t=null),this.log("end :: cb? %s",!!r),(!r||"function"!=typeof r)&&(r=this.noop);let i=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close((e=>{this.outgoingStore.close((t=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),r){let i=e||t;this.log("end :: closeStores: invoking callback with args"),r(i)}}))})),this._deferredReconnect&&this._deferredReconnect()},n=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,(()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,p.nextTick)(i)}),t)};return this.disconnecting?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,n,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),n()),this)}endAsync(e,t){return new Promise(((r,i)=>{this.end(e,t,(e=>{e?i(e):r()}))}))}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:t}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,(()=>{t(new Error("Message removed"))}))}return this}reconnect(e){this.log("client reconnect");let t=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new f.default,this.outgoingStore=this.options.outgoingStore||new f.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=t:t(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach((e=>{this.outgoing[e].volatile&&"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])})))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach((e=>{"function"==typeof this.outgoing[e].cb&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])})))}_removeTopicAliasAndRecoverTopicName(e){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",t,r),0===r.length){if(typeof t>"u")return new Error("Unregistered Topic Alias");if(r=this.topicAliasSend.getTopicByAlias(t),typeof r>"u")return new Error("Unregistered Topic Alias");e.topic=r}t&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end((()=>{this.connect()})),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval((()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()}),this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,t,r={}){if(t&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),this.log("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let e=Object.assign({cmd:"disconnect"},r);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,(()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),m((()=>{this.stream.end((()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)}))}))}))}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),t&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())}_storeAndSend(e,t,r){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let i,n=e;if("publish"===n.cmd&&(n=(0,h.default)(e),i=this._removeTopicAliasAndRecoverTopicName(n),i))return t&&t(i);this.outgoingStore.put(n,(i=>{if(i)return t&&t(i);r(),this._writePacket(e,t)}))}_applyTopicAlias(e){if(5===this.options.protocolVersion&&"publish"===e.cmd){let t;e.properties&&(t=e.properties.topicAlias);let r=e.topic.toString();if(this.topicAliasSend)if(t){if(0!==r.length&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",r,t),!this.topicAliasSend.put(r,t)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(this.options.autoAssignTopicAlias?(t=this.topicAliasSend.getAliasByTopic(r),t?(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,t)):(t=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(r,t),e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",r,t))):this.options.autoUseTopicAlias&&(t=this.topicAliasSend.getAliasByTopic(r),t&&(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:t}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",r,t))));else if(t)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,t),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,t){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let r=s.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",r),!r&&t&&t!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",t)):t&&(this.log("_writePacket :: invoking cb"),t())}_sendPacket(e,t,r,i){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||this.noop,t=t||this.noop;let n=this._applyTopicAlias(e);if(n)t(n);else{if(!this.connected)return"auth"===e.cmd?void this._writePacket(e,t):(this.log("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));if(i)this._writePacket(e,t);else{switch(e.cmd){case"publish":break;case"pubrel":return void this._storeAndSend(e,t,r);default:return void this._writePacket(e,t)}switch(e.qos){case 2:case 1:this._storeAndSend(e,t,r);break;default:this._writePacket(e,t)}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}}}_storePacket(e,t,r){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!t),r=r||this.noop;let i=e;if("publish"===i.cmd){i=(0,h.default)(e);let r=this._removeTopicAliasAndRecoverTopicName(i);if(r)return t&&t(r)}let n=i.qos||0;0===n&&this.queueQoSZero||"publish"!==i.cmd?this.queue.push({packet:i,cb:t}):n>0?(t=this.outgoing[i.messageId]?this.outgoing[i.messageId].cb:null,this.outgoingStore.put(i,(e=>{if(e)return t&&t(e);r()}))):t&&t(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new y.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(){this.keepaliveManager&&this.options.keepalive&&this.options.reschedulePings&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){this.log("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){let r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected)return void this.emit("connect",e);this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let t=()=>{let r=this.outgoingStore.createStream(),i=()=>{r.destroy(),r=null,this._flushStoreProcessingQueue(),n()},n=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",i),r.on("error",(e=>{n(),this._flushStoreProcessingQueue(),this.removeListener("close",i),this.emit("error",e)}));let o=()=>{if(!r)return;let e,t=r.read(1);t?(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[t.messageId]?o():this.disconnecting||this.reconnectTimer?r.destroy&&r.destroy():(e=this.outgoing[t.messageId]?this.outgoing[t.messageId].cb:null,this.outgoing[t.messageId]={volatile:!1,cb(t,r){e&&e(t,r),o()}},this._packetIdsDuringStoreProcessing[t.messageId]=!0,this.messageIdProvider.register(t.messageId)?this._sendPacket(t,void 0,void 0,!0):this.log("messageId: %d has already used.",t.messageId))):r.once("readable",o)};r.on("end",(()=>{let r=!0;for(let e in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[e]){r=!1;break}this.removeListener("close",i),r?(n(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):t()})),o()};t()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,t){delete this.outgoing[e],this.outgoingStore.del({messageId:e},((r,i)=>{t(r,i),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()}))}};_.VERSION=p.MQTTJS_VERSION,e.default=_})),yl=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t=il();e.default=class{constructor(){this.numberAllocator=new t.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}}}));function bl(e){throw new RangeError(Sl[e])}function ml(e,t){let r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+function(e,t){let r=[],i=e.length;for(;i--;)r[i]=t(e[i]);return r}((e=e.replace(El,".")).split("."),t).join(".")}function wl(e){let t=[],r=0,i=e.length;for(;r<i;){let n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<i){let i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),r--)}else t.push(n)}return t}var _l,vl,El,Sl,Al,kl,Il,Tl,Cl,Ol,Rl,Bl=Zr((()=>{Yn(),Un(),ii(),_l=/^xn--/,vl=/[^\0-\x7E]/,El=/[\x2E\u3002\uFF0E\uFF61]/g,Sl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Al=Math.floor,kl=String.fromCharCode,Il=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},Tl=function(e,t,r){let i=0;for(e=r?Al(e/700):e>>1,e+=Al(e/t);e>455;i+=36)e=Al(e/35);return Al(i+36*e/(e+38))},Cl=function(e){let t=[],r=e.length,i=0,n=128,o=72,s=e.lastIndexOf("-");s<0&&(s=0);for(let r=0;r<s;++r)e.charCodeAt(r)>=128&&bl("not-basic"),t.push(e.charCodeAt(r));for(let l=s>0?s+1:0;l<r;){let s=i;for(let t=1,n=36;;n+=36){l>=r&&bl("invalid-input");let s=(a=e.charCodeAt(l++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(s>=36||s>Al((2147483647-i)/t))&&bl("overflow"),i+=s*t;let h=n<=o?1:n>=o+26?26:n-o;if(s<h)break;let c=36-h;t>Al(2147483647/c)&&bl("overflow"),t*=c}let h=t.length+1;o=Tl(i-s,h,0==s),Al(i/h)>2147483647-n&&bl("overflow"),n+=Al(i/h),i%=h,t.splice(i++,0,n)}var a;return String.fromCodePoint(...t)},Ol=function(e){let t=[],r=(e=wl(e)).length,i=128,n=0,o=72;for(let r of e)r<128&&t.push(kl(r));let s=t.length,a=s;for(s&&t.push("-");a<r;){let r=2147483647;for(let t of e)t>=i&&t<r&&(r=t);let l=a+1;r-i>Al((2147483647-n)/l)&&bl("overflow"),n+=(r-i)*l,i=r;for(let r of e)if(r<i&&++n>2147483647&&bl("overflow"),r==i){let e=n;for(let r=36;;r+=36){let i=r<=o?1:r>=o+26?26:r-o;if(e<i)break;let n=e-i,s=36-i;t.push(kl(Il(i+n%s,0))),e=Al(n/s)}t.push(kl(Il(e,0))),o=Tl(n,l,a==s),n=0,++a}++n,++i}return t.join("")},Rl={version:"2.1.0",ucs2:{decode:wl,encode:e=>String.fromCodePoint(...e)},decode:Cl,encode:Ol,toASCII:function(e){return ml(e,(function(e){return vl.test(e)?"xn--"+Ol(e):e}))},toUnicode:function(e){return ml(e,(function(e){return _l.test(e)?Cl(e.slice(4).toLowerCase()):e}))}},Rl.encode,Rl.toASCII,Rl.toUnicode,Rl.ucs2,Rl.version}));function Pl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var xl,Ml,Ul,jl,Ll=Zr((()=>{Yn(),Un(),ii(),xl=function(e,t,r,i){t=t||"&",r=r||"=";var n={};if("string"!=typeof e||0===e.length)return n;var o=/\+/g;e=e.split(t);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var h,c,u,f,d=e[l].replace(o,"%20"),p=d.indexOf(r);p>=0?(h=d.substr(0,p),c=d.substr(p+1)):(h=d,c=""),u=decodeURIComponent(h),f=decodeURIComponent(c),Pl(n,u)?Array.isArray(n[u])?n[u].push(f):n[u]=[n[u],f]:n[u]=f}return n},Ml=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Ul=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var n=encodeURIComponent(Ml(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return n+encodeURIComponent(Ml(e))})).join(t):n+encodeURIComponent(Ml(e[i]))})).join(t):i?encodeURIComponent(Ml(i))+r+encodeURIComponent(Ml(e)):""},(jl={}).decode=jl.parse=xl,jl.encode=jl.stringify=Ul,jl.decode,jl.encode,jl.parse,jl.stringify}));function Nl(){throw new Error("setTimeout has not been defined")}function Dl(){throw new Error("clearTimeout has not been defined")}function Fl(e){if(Vl===setTimeout)return setTimeout(e,0);if((Vl===Nl||!Vl)&&setTimeout)return Vl=setTimeout,setTimeout(e,0);try{return Vl(e,0)}catch{try{return Vl.call(null,e,0)}catch{return Vl.call(this||Gl,e,0)}}}function Wl(){Xl&&Ql&&(Xl=!1,Ql.length?Jl=Ql.concat(Jl):Zl=-1,Jl.length&&$l())}function $l(){if(!Xl){var e=Fl(Wl);Xl=!0;for(var t=Jl.length;t;){for(Ql=Jl,Jl=[];++Zl<t;)Ql&&Ql[Zl].run();Zl=-1,t=Jl.length}Ql=null,Xl=!1,function(e){if(Kl===clearTimeout)return clearTimeout(e);if((Kl===Dl||!Kl)&&clearTimeout)return Kl=clearTimeout,clearTimeout(e);try{Kl(e)}catch{try{return Kl.call(null,e)}catch{return Kl.call(this||Gl,e)}}}(e)}}function zl(e,t){(this||Gl).fun=e,(this||Gl).array=t}function Hl(){}var ql,Vl,Kl,Gl,Yl,Ql,Jl,Xl,Zl,eh,th=Zr((()=>{Yn(),Un(),ii(),Gl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:e.g,Yl=ql={},function(){try{Vl="function"==typeof setTimeout?setTimeout:Nl}catch{Vl=Nl}try{Kl="function"==typeof clearTimeout?clearTimeout:Dl}catch{Kl=Dl}}(),Jl=[],Xl=!1,Zl=-1,Yl.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Jl.push(new zl(e,t)),1!==Jl.length||Xl||Fl($l)},zl.prototype.run=function(){(this||Gl).fun.apply(null,(this||Gl).array)},Yl.title="browser",Yl.browser=!0,Yl.env={},Yl.argv=[],Yl.version="",Yl.versions={},Yl.on=Hl,Yl.addListener=Hl,Yl.once=Hl,Yl.off=Hl,Yl.removeListener=Hl,Yl.removeAllListeners=Hl,Yl.emit=Hl,Yl.prependListener=Hl,Yl.prependOnceListener=Hl,Yl.listeners=function(e){return[]},Yl.binding=function(e){throw new Error("process.binding is not supported")},Yl.cwd=function(){return"/"},Yl.chdir=function(e){throw new Error("process.chdir is not supported")},Yl.umask=function(){return 0},eh=ql,eh.argv,eh.binding,eh.browser,eh.chdir,eh.cwd,eh.emit,eh.env,eh.listeners,eh.nextTick,eh.off,eh.on,eh.once,eh.prependListener,eh.prependOnceListener,eh.removeAllListeners,eh.removeListener,eh.title,eh.umask,eh.version,eh.versions}));function rh(){if(nh)return ih;nh=!0;var e,t,r=ih={};function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch{try{return e.call(null,t,0)}catch{return e.call(this||oh,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch{e=i}try{t="function"==typeof clearTimeout?clearTimeout:n}catch{t=n}}();var s,a=[],l=!1,h=-1;function c(){!l||!s||(l=!1,s.length?a=s.concat(a):h=-1,a.length&&u())}function u(){if(!l){var e=o(c);l=!0;for(var r=a.length;r;){for(s=a,a=[];++h<r;)s&&s[h].run();h=-1,r=a.length}s=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===n||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{return t(e)}catch{try{return t.call(null,e)}catch{return t.call(this||oh,e)}}}(e)}}function f(e,t){(this||oh).fun=e,(this||oh).array=t}function d(){}return r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.push(new f(e,t)),1===a.length&&!l&&o(u)},f.prototype.run=function(){(this||oh).fun.apply(null,(this||oh).array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0},ih}var ih,nh,oh,sh,ah=Zr((()=>{Yn(),Un(),ii(),ih={},nh=!1,oh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:e.g,(sh=rh()).platform="browser",sh.addListener,sh.argv,sh.binding,sh.browser,sh.chdir,sh.cwd,sh.emit,sh.env,sh.listeners,sh.nextTick,sh.off,sh.on,sh.once,sh.prependListener,sh.prependOnceListener,sh.removeAllListeners,sh.removeListener,sh.title,sh.umask,sh.version,sh.versions}));var lh,hh,ch,uh=Zr((()=>{Yn(),Un(),ii(),ah(),lh={},hh=!1,ch=function(){if(hh)return lh;hh=!0;var e=sh;function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,i="",n=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o!==a-1&&1!==s)if(o!==a-1&&2===s){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",n=0):n=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",n=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),n=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var i,n="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var a;s>=0?a=arguments[s]:(void 0===i&&(i=e.cwd()),a=i),t(a),0!==a.length&&(n=a+"/"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0===(e=r(e,!i)).length&&!i&&(e="."),e.length>0&&n&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];t(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=i.resolve(e))===(r=i.resolve(r)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,s=o-n,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var l=r.length-a,h=s<l?s:l,c=-1,u=0;u<=h;++u){if(u===h){if(l>h){if(47===r.charCodeAt(a+u))return r.slice(a+u+1);if(0===u)return r.slice(a+u)}else s>h&&(47===e.charCodeAt(n+u)?c=u:0===u&&(c=0));break}var f=e.charCodeAt(n+u);if(f!==r.charCodeAt(a+u))break;47===f&&(c=u)}var d="";for(u=n+c+1;u<=o;++u)(u===o||47===e.charCodeAt(u))&&(0===d.length?d+="..":d+="/..");return d.length>0?d+r.slice(a+c):(a+=c,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"//":e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var i,n=0,o=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(i=e.length-1;i>=0;--i){var h=e.charCodeAt(i);if(47===h){if(!s){n=i+1;break}}else-1===l&&(s=!1,l=i+1),a>=0&&(h===r.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){n=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(n,o)},extname:function(e){t(e);for(var r=-1,i=0,n=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===n&&(o=!1,n=a+1),46===l?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!o){i=a+1;break}}return-1===r||-1===n||0===s||1===s&&r===n-1&&r===i+1?"":e.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+e+i:i}("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var i,n=e.charCodeAt(0),o=47===n;o?(r.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,h=!0,c=e.length-1,u=0;c>=i;--c)if(47!==(n=e.charCodeAt(c)))-1===l&&(h=!1,l=c+1),46===n?-1===s?s=c:1!==u&&(u=1):-1!==s&&(u=-1);else if(!h){a=c+1;break}return-1===s||-1===l||0===u||1===u&&s===l-1&&s===a+1?-1!==l&&(r.base=r.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(r.name=e.slice(1,s),r.base=e.slice(1,l)):(r.name=e.slice(a,s),r.base=e.slice(a,l)),r.ext=e.slice(s,l)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,lh=i}()})),fh={};function dh(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function ph(e,t,r){if(e&&vh.isObject(e)&&e instanceof dh)return e;var i=new dh;return i.parse(e,t,r),i}function gh(e){if("string"==typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return zh?function(e){let t=e.hostname,r=e.pathname;for(let e=0;e<r.length;e++)if("%"===r[e]){let t=r.codePointAt(e+2)||32;if("2"===r[e+1]&&102===t||"5"===r[e+1]&&99===t)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(Hh,"\\"),r=decodeURIComponent(r),""!==t)return`\\\\${t}${r}`;{let e=32|r.codePointAt(1),t=r[2];if(e<Wh||e>$h||":"!==t)throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}(e):function(e){if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let e=0;e<t.length;e++)if("%"===t[e]){let r=t.codePointAt(e+2)||32;if("2"===t[e+1]&&102===r)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function yh(e){let t=Lh.resolve(e),r=e.charCodeAt(e.length-1);(r===Fh||zh&&r===Dh)&&t[t.length-1]!==Lh.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(qh,"%25")),!zh&&t.includes("\\")&&(t=t.replace(Vh,"%5C")),t.includes("\n")&&(t=t.replace(Kh,"%0A")),t.includes("\r")&&(t=t.replace(Gh,"%0D")),t.includes("\t")&&(t=t.replace(Yh,"%09")),i.pathname=t,i}function bh(e){if("string"==typeof e)e=new URL(e);else if(!(e instanceof URL))throw new Deno.errors.InvalidData("invalid argument path , must be a string or URL");if("file:"!==e.protocol)throw new Deno.errors.InvalidData("invalid url scheme");return ac?function(e){let t=e.hostname,r=e.pathname;for(let e=0;e<r.length;e++)if("%"===r[e]){let t=r.codePointAt(e+2)||32;if("2"===r[e+1]&&102===t||"5"===r[e+1]&&99===t)throw new Deno.errors.InvalidData("must not include encoded \\ or / characters")}if(r=r.replace(lc,"\\"),r=decodeURIComponent(r),""!==t)return`\\\\${t}${r}`;{let e=32|r.codePointAt(1),t=r[2];if(e<oc||e>sc||":"!==t)throw new Deno.errors.InvalidData("file url path must be absolute");return r.slice(1)}}(e):function(e){if(""!==e.hostname)throw new Deno.errors.InvalidData("invalid file url hostname");let t=e.pathname;for(let e=0;e<t.length;e++)if("%"===t[e]){let r=t.codePointAt(e+2)||32;if("2"===t[e+1]&&102===r)throw new Deno.errors.InvalidData("must not include encoded / characters")}return decodeURIComponent(t)}(e)}function mh(e){let t=ch.resolve(e),r=e.charCodeAt(e.length-1);(r===nc||ac&&r===ic)&&t[t.length-1]!==ch.sep&&(t+="/");let i=new URL("file://");return t.includes("%")&&(t=t.replace(hc,"%25")),!ac&&t.includes("\\")&&(t=t.replace(cc,"%5C")),t.includes("\n")&&(t=t.replace(uc,"%0A")),t.includes("\r")&&(t=t.replace(fc,"%0D")),t.includes("\t")&&(t=t.replace(dc,"%09")),i.pathname=t,i}ti(fh,{URL:()=>rc,Url:()=>Jh,default:()=>wh,fileURLToPath:()=>bh,format:()=>Xh,parse:()=>tc,pathToFileURL:()=>mh,resolve:()=>Zh,resolveObject:()=>ec});var wh,_h,vh,Eh,Sh,Ah,kh,Ih,Th,Ch,Oh,Rh,Bh,Ph,xh,Mh,Uh,jh,Lh,Nh,Dh,Fh,Wh,$h,zh,Hh,qh,Vh,Kh,Gh,Yh,Qh,Jh,Xh,Zh,ec,tc,rc,ic,nc,oc,sc,ac,lc,hc,cc,uc,fc,dc,pc=Zr((()=>{Yn(),Un(),ii(),Bl(),Ll(),th(),uh(),ah(),_h=Rl,vh={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},(wh={}).parse=ph,wh.resolve=function(e,t){return ph(e,!1,!0).resolve(t)},wh.resolveObject=function(e,t){return e?ph(e,!1,!0).resolveObject(t):t},wh.format=function(e){return vh.isString(e)&&(e=ph(e)),e instanceof dh?e.format():dh.prototype.format.call(e)},wh.Url=dh,Eh=/^([a-z0-9.+-]+:)/i,Sh=/:[0-9]*$/,Ah=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,kh=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ih=["'"].concat(kh),Th=["%","/","?",";","#"].concat(Ih),Ch=["/","?","#"],Oh=/^[+a-z0-9A-Z_-]{0,63}$/,Rh=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Bh={javascript:!0,"javascript:":!0},Ph={javascript:!0,"javascript:":!0},xh={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Mh=jl,dh.prototype.parse=function(e,t,r){if(!vh.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),n=-1!==i&&i<e.indexOf("#")?"?":"#",o=e.split(n);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(n);if(s=s.trim(),!r&&1===e.split("#").length){var a=Ah.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?Mh.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=Eh.exec(s);if(l){var h=(l=l[0]).toLowerCase();this.protocol=h,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===s.substr(0,2);!c||l&&Ph[l]||(s=s.substr(2),this.slashes=!0)}if(!Ph[l]&&(c||l&&!xh[l])){for(var u,f,d=-1,p=0;p<Ch.length;p++)-1!==(g=s.indexOf(Ch[p]))&&(-1===d||g<d)&&(d=g);for(-1!==(f=-1===d?s.lastIndexOf("@"):s.lastIndexOf("@",d))&&(u=s.slice(0,f),s=s.slice(f+1),this.auth=decodeURIComponent(u)),d=-1,p=0;p<Th.length;p++){var g;-1!==(g=s.indexOf(Th[p]))&&(-1===d||g<d)&&(d=g)}-1===d&&(d=s.length),this.host=s.slice(0,d),s=s.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var b=this.hostname.split(/\./),m=(p=0,b.length);p<m;p++){var w=b[p];if(w&&!w.match(Oh)){for(var _="",v=0,E=w.length;v<E;v++)w.charCodeAt(v)>127?_+="x":_+=w[v];if(!_.match(Oh)){var S=b.slice(0,p),A=b.slice(p+1),k=w.match(Rh);k&&(S.push(k[1]),A.unshift(k[2])),A.length&&(s="/"+A.join(".")+s),this.hostname=S.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=_h.toASCII(this.hostname));var I=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+I,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!Bh[h])for(p=0,m=Ih.length;p<m;p++){var C=Ih[p];if(-1!==s.indexOf(C)){var O=encodeURIComponent(C);O===C&&(O=escape(C)),s=s.split(C).join(O)}}var R=s.indexOf("#");-1!==R&&(this.hash=s.substr(R),s=s.slice(0,R));var B=s.indexOf("?");if(-1!==B?(this.search=s.substr(B),this.query=s.substr(B+1),t&&(this.query=Mh.parse(this.query)),s=s.slice(0,B)):t&&(this.search="",this.query={}),s&&(this.pathname=s),xh[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){I=this.pathname||"";var P=this.search||"";this.path=I+P}return this.href=this.format(),this},dh.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&vh.isObject(this.query)&&Object.keys(this.query).length&&(o=Mh.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||xh[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n||(n=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),t+n+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+i},dh.prototype.resolve=function(e){return this.resolveObject(ph(e,!1,!0)).format()},dh.prototype.resolveObject=function(e){if(vh.isString(e)){var t=new dh;t.parse(e,!1,!0),e=t}for(var r=new dh,i=Object.keys(this),n=0;n<i.length;n++){var o=i[n];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];"protocol"!==l&&(r[l]=e[l])}return xh[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!xh[e.protocol]){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];r[u]=e[u]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||Ph[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",p=r.search||"";r.path=d+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||g||r.host&&e.pathname,m=b,w=r.pathname&&r.pathname.split("/")||[],_=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!xh[r.protocol]);if(_&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===w[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),r.search=e.search,r.query=e.query;else if(!vh.isNullOrUndefined(e.search))return _&&(r.hostname=r.host=w.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),r.search=e.search,r.query=e.query,vh.isNull(r.pathname)&&vh.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var v=w.slice(-1)[0],E=(r.host||e.host||w.length>1)&&("."===v||".."===v)||""===v,S=0,A=w.length;A>=0;A--)"."===(v=w[A])?w.splice(A,1):".."===v?(w.splice(A,1),S++):S&&(w.splice(A,1),S--);if(!b&&!m)for(;S--;S)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),E&&"/"!==w.join("/").substr(-1)&&w.push("");var k,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(r.hostname=r.host=I?"":w.length?w.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),(b=b||r.host&&w.length)&&!I&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),vh.isNull(r.pathname)&&vh.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},dh.prototype.parseHost=function(){var e=this.host,t=Sh.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},wh.Url,wh.format,wh.resolve,wh.resolveObject,Uh={},jh=!1,Lh=function(){if(jh)return Uh;jh=!0;var e=eh;function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,i="",n=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o!==a-1&&1!==s)if(o!==a-1&&2===s){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",n=0):n=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),o=a,s=0;continue}}else if(2===i.length||1===i.length){i="",n=0,o=a,s=0;continue}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+e.slice(o+1,a):i=e.slice(o+1,a),n=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return i}var i={resolve:function(){for(var i,n="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var a;s>=0?a=arguments[s]:(void 0===i&&(i=e.cwd()),a=i),t(a),0!==a.length&&(n=a+"/"+n,o=47===a.charCodeAt(0))}return n=r(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var i=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0===(e=r(e,!i)).length&&!i&&(e="."),e.length>0&&n&&(e+="/"),i?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var n=arguments[r];t(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":i.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=i.resolve(e))===(r=i.resolve(r)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var o=e.length,s=o-n,a=1;a<r.length&&47===r.charCodeAt(a);++a);for(var l=r.length-a,h=s<l?s:l,c=-1,u=0;u<=h;++u){if(u===h){if(l>h){if(47===r.charCodeAt(a+u))return r.slice(a+u+1);if(0===u)return r.slice(a+u)}else s>h&&(47===e.charCodeAt(n+u)?c=u:0===u&&(c=0));break}var f=e.charCodeAt(n+u);if(f!==r.charCodeAt(a+u))break;47===f&&(c=u)}var d="";for(u=n+c+1;u<=o;++u)(u===o||47===e.charCodeAt(u))&&(0===d.length?d+="..":d+="/..");return d.length>0?d+r.slice(a+c):(a+=c,47===r.charCodeAt(a)&&++a,r.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),i=47===r,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(r=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"//":e.slice(0,n)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var i,n=0,o=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var a=r.length-1,l=-1;for(i=e.length-1;i>=0;--i){var h=e.charCodeAt(i);if(47===h){if(!s){n=i+1;break}}else-1===l&&(s=!1,l=i+1),a>=0&&(h===r.charCodeAt(a)?-1==--a&&(o=i):(a=-1,o=l))}return n===o?o=l:-1===o&&(o=e.length),e.slice(n,o)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!s){n=i+1;break}}else-1===o&&(s=!1,o=i+1);return-1===o?"":e.slice(n,o)},extname:function(e){t(e);for(var r=-1,i=0,n=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var l=e.charCodeAt(a);if(47!==l)-1===n&&(o=!1,n=a+1),46===l?-1===r?r=a:1!==s&&(s=1):-1!==r&&(s=-1);else if(!o){i=a+1;break}}return-1===r||-1===n||0===s||1===s&&r===n-1&&r===i+1?"":e.slice(r,n)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+e+i:i}("/",e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var i,n=e.charCodeAt(0),o=47===n;o?(r.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,h=!0,c=e.length-1,u=0;c>=i;--c)if(47!==(n=e.charCodeAt(c)))-1===l&&(h=!1,l=c+1),46===n?-1===s?s=c:1!==u&&(u=1):-1!==s&&(u=-1);else if(!h){a=c+1;break}return-1===s||-1===l||0===u||1===u&&s===l-1&&s===a+1?-1!==l&&(r.base=r.name=0===a&&o?e.slice(1,l):e.slice(a,l)):(0===a&&o?(r.name=e.slice(1,s),r.base=e.slice(1,l)):(r.name=e.slice(a,s),r.base=e.slice(a,l)),r.ext=e.slice(s,l)),a>0?r.dir=e.slice(0,a-1):o&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};return i.posix=i,Uh=i}(),Nh=typeof Deno<"u"?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,wh.URL=typeof URL<"u"?URL:null,wh.pathToFileURL=yh,wh.fileURLToPath=gh,wh.Url,wh.format,wh.resolve,wh.resolveObject,wh.URL,Dh=92,Fh=47,Wh=97,$h=122,zh="win32"===Nh,Hh=/\//g,qh=/%/g,Vh=/\\/g,Kh=/\n/g,Gh=/\r/g,Yh=/\t/g,Qh=typeof Deno<"u"?"windows"===Deno.build.os?"win32":Deno.build.os:void 0,wh.URL=typeof URL<"u"?URL:null,wh.pathToFileURL=mh,wh.fileURLToPath=bh,Jh=wh.Url,Xh=wh.format,Zh=wh.resolve,ec=wh.resolveObject,tc=wh.parse,rc=wh.URL,ic=92,nc=47,oc=97,sc=122,ac="win32"===Qh,lc=/\//g,hc=/%/g,cc=/\\/g,uc=/\n/g,fc=/\r/g,dc=/\t/g})),gc={};function yc(){throw new Error("Node.js net module is not supported by JSPM core outside of Node.js")}ti(gc,{Server:()=>yc,Socket:()=>yc,Stream:()=>yc,_createServerHandle:()=>yc,_normalizeArgs:()=>yc,_setSimultaneousAccepts:()=>yc,connect:()=>yc,createConnection:()=>yc,createServer:()=>yc,default:()=>bc,isIP:()=>yc,isIPv4:()=>yc,isIPv6:()=>yc});var bc,mc=Zr((()=>{Yn(),Un(),ii(),bc={_createServerHandle:yc,_normalizeArgs:yc,_setSimultaneousAccepts:yc,connect:yc,createConnection:yc,createServer:yc,isIP:yc,isIPv4:yc,isIPv6:yc,Server:yc,Socket:yc,Stream:yc}})),wc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t((mc(),ri(gc))),i=(0,t(ma()).default)("mqttjs:tcp");e.default=(e,t)=>{t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";let{port:n,path:o}=t,s=t.hostname;return i("port %d and host %s",n,s),r.default.createConnection({port:n,host:s,path:o})}})),_c={};ti(_c,{default:()=>vc});var vc,Ec=Zr((()=>{Yn(),Un(),ii(),vc={}})),Sc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=t((Ec(),ri(_c))),i=t((mc(),ri(gc))),n=(0,t(ma()).default)("mqttjs:tls");e.default=(e,t)=>{t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===i.default.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,n("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);let o=r.default.connect(t);function s(r){t.rejectUnauthorized&&e.emit("error",r),o.end()}return o.on("secureConnect",(()=>{t.rejectUnauthorized&&!o.authorized?o.emit("error",new Error("TLS not authorized")):o.removeListener("error",s)})),o.on("error",s),o}})),Ac=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferedDuplex=e.writev=void 0;var t=ca(),r=(Gn(),ri(jn));function i(e,t){let i=new Array(e.length);for(let t=0;t<e.length;t++)"string"==typeof e[t].chunk?i[t]=r.Buffer.from(e[t].chunk,"utf8"):i[t]=e[t].chunk;this._write(r.Buffer.concat(i),"binary",t)}e.writev=i;var n=class extends t.Duplex{constructor(e,t,r){super({objectMode:!0}),this.proxy=t,this.socket=r,this.writeQueue=[],e.objectMode||(this._writev=i.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",(e=>{this.push(e)}))}_read(e){this.proxy.read(e)}_write(e,t,r){this.isSocketOpen?this.writeToProxy(e,t,r):this.writeQueue.push({chunk:e,encoding:t,cb:r})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,t){this.writeQueue=[],this.proxy.destroy(),t(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,t,r){!1===this.proxy.write(e,t)?this.proxy.once("drain",r):r()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:t,cb:r}=this.writeQueue.shift();this.writeToProxy(e,t,r)}}};e.BufferedDuplex=n})),kc=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,i,n=(Gn(),ri(jn)),o=ca(),s=Ac();e.default=(e,a)=>{if(a.hostname=a.hostname||a.host,!a.hostname)throw new Error("Could not determine host. Specify host manually.");let l="MQIsdp"===a.protocolId&&3===a.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(a);let h=function(e,t){let r="wxs"===e.protocol?"wss":"ws",i=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(i=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}(a,e);t=wx.connectSocket({url:h,protocols:[l]}),r=function(){let e=new o.Transform;return e._write=(e,r,i)=>{t.send({data:e.buffer,success(){i()},fail(e){i(new Error(e))}})},e._flush=e=>{t.close({success(){e()}})},e}(),(i=new s.BufferedDuplex(a,r,t))._destroy=(e,r)=>{t.close({success(){r&&r(e)}})};let c=i.destroy;return i.destroy=(e,r)=>(i.destroy=c,setTimeout((()=>{t.close({fail(){i._destroy(e,r)}})}),0),i),t.onOpen((()=>{i.socketReady()})),t.onMessage((e=>{let{data:t}=e;t=t instanceof ArrayBuffer?n.Buffer.from(t):n.Buffer.from(t,"utf8"),r.push(t)})),t.onClose((()=>{i.emit("close"),i.end(),i.destroy()})),t.onError((e=>{let t=new Error(e.errMsg);i.destroy(t)})),i}})),Ic=ei((e=>{Yn(),Un(),ii(),Object.defineProperty(e,"__esModule",{value:!0});var t,r,i,n=(Gn(),ri(jn)),o=ca(),s=Ac(),a=!1;e.default=(e,l)=>{if(l.hostname=l.hostname||l.host,!l.hostname)throw new Error("Could not determine host. Specify host manually.");let h="MQIsdp"===l.protocolId&&3===l.protocolVersion?"mqttv3.1":"mqtt";!function(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}(l);let c=function(e,t){let r="alis"===e.protocol?"wss":"ws",i=`${r}://${e.hostname}${e.path}`;return e.port&&80!==e.port&&443!==e.port&&(i=`${r}://${e.hostname}:${e.port}${e.path}`),"function"==typeof e.transformWsUrl&&(i=e.transformWsUrl(i,e,t)),i}(l,e);return(t=l.my).connectSocket({url:c,protocols:h}),r=function(){let e=new o.Transform;return e._write=(e,r,i)=>{t.sendSocketMessage({data:e.buffer,success(){i()},fail(){i(new Error)}})},e._flush=e=>{t.closeSocket({success(){e()}})},e}(),i=new s.BufferedDuplex(l,r,t),a||(a=!0,t.onSocketOpen((()=>{i.socketReady()})),t.onSocketMessage((e=>{if("string"==typeof e.data){let t=n.Buffer.from(e.data,"base64");r.push(t)}else{let t=new FileReader;t.addEventListener("load",(()=>{let e=t.result;e=e instanceof ArrayBuffer?n.Buffer.from(e):n.Buffer.from(e,"utf8"),r.push(e)})),t.readAsArrayBuffer(e.data)}})),t.onSocketClose((()=>{i.end(),i.destroy()})),t.onSocketError((e=>{i.destroy(e)}))),i}})),Tc=ei(((e,t)=>{Yn(),Un(),ii(),t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}})),Cc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0});var r=(Gn(),ri(jn)),i=t(Tc()),n=t(ma()),o=ca(),s=t(hl()),a=Ac(),l=(0,n.default)("mqttjs:ws"),h=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function c(e,t){let r=`${e.protocol}://${e.hostname}:${e.port}${e.path}`;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function u(e){let t=e;return e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),!s.default&&"wss"===e.protocol&&h.forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])})),t}e.default=s.default?(e,t)=>{l("browserStreamBuilder");let i,n=function(e){let t=u(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=Number(e.port))}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t).browserBufferSize||524288,s=t.browserBufferTimeout||1e3,h=!t.objectMode,f=function(e,t){let r,i="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=c(t,e);return r=t.createWebsocket?t.createWebsocket(n,[i],t):new WebSocket(n,[i]),r.binaryType="arraybuffer",r}(e,t),d=function(e,t,r){let i=new o.Transform({objectMode:e.objectMode});return i._write=t,i._flush=r,i}(t,(function e(t,i,o){if(f.bufferedAmount>n)return void setTimeout(e,s,t,i,o);h&&"string"==typeof t&&(t=r.Buffer.from(t,"utf8"));try{f.send(t)}catch(e){return o(e)}o()}),(function(e){f.close(),e()}));t.objectMode||(d._writev=a.writev.bind(d)),d.on("close",(()=>{f.close()}));let p=typeof f.addEventListener<"u";function g(){l("WebSocket onOpen"),i instanceof a.BufferedDuplex&&i.socketReady()}function y(e){l("WebSocket onClose",e),i.end(),i.destroy()}function b(e){l("WebSocket onError",e);let t=new Error("WebSocket error");t.event=e,i.destroy(t)}function m(e){let{data:t}=e;t=t instanceof ArrayBuffer?r.Buffer.from(t):r.Buffer.from(t,"utf8"),d.push(t)}return f.readyState===f.OPEN?(i=d,i.socket=f):(i=new a.BufferedDuplex(t,d,f),p?f.addEventListener("open",g):f.onopen=g),p?(f.addEventListener("close",y),f.addEventListener("error",b),f.addEventListener("message",m)):(f.onclose=y,f.onerror=b,f.onmessage=m),i}:(e,t)=>{l("streamBuilder");let r=u(t);r.hostname=r.hostname||r.host||"localhost";let n=c(r,e),o=function(e,t,r){l("createWebSocket"),l(`protocol: ${r.protocolId} ${r.protocolVersion}`);let n,o="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";return l(`creating new Websocket for url: ${t} and protocol: ${o}`),n=r.createWebsocket?r.createWebsocket(t,[o],r):new i.default(t,[o],r.wsOptions),n}(0,n,r),s=i.default.createWebSocketStream(o,r.wsOptions);return s.url=n,o.on("close",(()=>{s.destroy()})),s}})),Oc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.connectAsync=void 0;var r=t(ma()),i=t((pc(),ri(fh))),n=t(gl()),o=t(hl());"function"!=typeof(null==ni?void 0:ni.nextTick)&&(ni.nextTick=setImmediate);var s=(0,r.default)("mqttjs"),a={};function l(e,t){var r,o,l;if(s("connecting to an MQTT broker..."),"object"==typeof e&&!t&&(t=e,e=""),t=t||{},e&&"string"==typeof e){let n=i.default.parse(e,!0),o={};if(null!=n.port&&(o.port=Number(n.port)),o.host=n.hostname,o.query=n.query,o.auth=n.auth,o.protocol=n.protocol,o.path=n.path,o.protocol=null===(r=o.protocol)||void 0===r?void 0:r.replace(/:$/,""),!(t=Object.assign(Object.assign({},o),t)).protocol)throw new Error("Missing protocol")}if(t.unixSocket=t.unixSocket||(null===(o=t.protocol)||void 0===o?void 0:o.includes("+unix")),t.unixSocket?t.protocol=t.protocol.replace("+unix",""):!(null===(l=t.protocol)||void 0===l)&&l.startsWith("ws")||delete t.path,function(e){let t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${t.protocol}"!`)}}if(!a[t.protocol]){let e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(((t,r)=>(!e||r%2!=0)&&"function"==typeof a[t]))[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);let h=new n.default((function(e){return t.servers&&((!e._reconnectCount||e._reconnectCount===t.servers.length)&&(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),s("calling streambuilder for",t.protocol),a[t.protocol](e,t)}),t);return h.on("error",(()=>{})),h}o.default?(a.wx=kc().default,a.wxs=kc().default,a.ali=Ic().default,a.alis=Ic().default):(a.mqtt=wc().default,a.tcp=wc().default,a.ssl=Sc().default,a.tls=a.ssl,a.mqtts=Sc().default),a.ws=Cc().default,a.wss=Cc().default,e.connectAsync=function(e,t,r=!0){return new Promise(((i,n)=>{let o=l(e,t),s={connect:e=>{a(),i(o)},end:()=>{a(),i(o)},error:e=>{a(),o.end(),n(e)}};function a(){Object.keys(s).forEach((e=>{o.off(e,s[e])}))}!1===r&&(s.close=()=>{s.error(new Error("Couldn't connect to server"))}),Object.keys(s).forEach((e=>{o.on(e,s[e])}))}))},e.default=l})),Rc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(i,e,n);return r(i,e),i},n=e&&e.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)},o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReasonCodes=e.KeepaliveManager=e.UniqueMessageIdProvider=e.DefaultMessageIdProvider=e.Store=e.MqttClient=e.connectAsync=e.connect=e.Client=void 0;var s=o(gl());e.MqttClient=s.default;var a=o(ka());e.DefaultMessageIdProvider=a.default;var l=o(yl());e.UniqueMessageIdProvider=l.default;var h=o(Oa());e.Store=h.default;var c=i(Oc());e.connect=c.default,Object.defineProperty(e,"connectAsync",{enumerable:!0,get:function(){return c.connectAsync}});var u=o(pl());e.KeepaliveManager=u.default,e.Client=s.default,n(gl(),e),n(Pa(),e);var f=xa();Object.defineProperty(e,"ReasonCodes",{enumerable:!0,get:function(){return f.ReasonCodes}})})),Bc=ei((e=>{Yn(),Un(),ii();var t=e&&e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&t(i,e,n);return r(i,e),i},n=e&&e.__exportStar||function(e,r){for(var i in e)"default"!==i&&!Object.prototype.hasOwnProperty.call(r,i)&&t(r,e,i)};Object.defineProperty(e,"__esModule",{value:!0});var o=i(Rc());e.default=o,n(Rc(),e)}));const Pc=Bc();
/*! Bundled license information:

@jspm/core/nodelibs/browser/buffer.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/var xc,Mc,Uc,jc,Lc,Nc,Dc,Fc,Wc,$c,zc,Hc,qc,Vc,Kc,Gc,Yc,Qc=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},Jc=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},Xc=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};const{connect:Zc}=Pc;class eu{constructor(e,t,r){var i,n;xc.add(this),Mc.set(this,void 0),Uc.set(this,void 0),jc.set(this,void 0),Lc.set(this,void 0),Nc.set(this,void 0),Dc.set(this,void 0),Fc.set(this,void 0),Wc.set(this,void 0),$c.set(this,void 0),zc.set(this,void 0),Hc.set(this,(()=>{})),qc.set(this,(()=>{})),Vc.set(this,(()=>{})),Kc.set(this,(()=>{})),Jc(this,jc,e.tenant,"f"),Jc(this,Lc,e.tenant,"f"),Jc(this,Uc,e.socketUrl,"f"),Jc(this,Nc,e.jwtSecret,"f"),Jc(this,Mc,t,"f"),Jc(this,Dc,r,"f"),Jc(this,Wc,`whiz/${Xc(this,jc,"f")}/conversation/${Xc(this,Lc,"f")}/${null===(i=Xc(this,Mc,"f"))||void 0===i?void 0:i.id}`,"f"),Jc(this,$c,`whiz/${Xc(this,jc,"f")}/client/${Xc(this,Lc,"f")}/${null===(n=Xc(this,Mc,"f"))||void 0===n?void 0:n.id}`,"f")}publishMessage(e){return Qc(this,void 0,void 0,(function*(){return Xc(this,Fc,"f")&&Xc(this,Wc,"f")?Xc(this,Fc,"f").publishAsync(Xc(this,Wc,"f"),JSON.stringify(e)).then((t=>({status:Wr.SUCCESS,messageId:e.messageId}))):Xc(this,xc,"m",Gc).call(this,"Client or topic not set.")}))}connectToWhiz(e){return Qc(this,void 0,void 0,(function*(){var t,r,i;if(!(null===(t=Xc(this,Mc,"f"))||void 0===t?void 0:t.id)||!Xc(this,jc,"f")||!Xc(this,Nc,"f"))return Xc(this,Kc,"f").call(this,{message:"Tenant or user or secret not set"}),Xc(this,xc,"m",Gc).call(this,"Tenant or user or secret not set");Jc(this,zc,e,"f");const n={host:Xc(this,Uc,"f")+"/mqtt",options:{keepalive:30,reconnectPeriod:1e3,connectTimeout:15e3,username:`${null===(r=Xc(this,Mc,"f"))||void 0===r?void 0:r.id}?x-amz-customauthorizer-name=whiz-${Xc(this,jc,"f")}-authorizer`,clientId:`${null===(i=Xc(this,Mc,"f"))||void 0===i?void 0:i.id}-${Xc(this,Lc,"f")}-${self.crypto.randomUUID().replace(/-/g,"")}`,password:Kr(Xc(this,Mc,"f"),Xc(this,jc,"f"),Xc(this,Nc,"f"),{origin:window.location.origin}),resubscribe:!0,rejectUnauthorized:!1,qos:1,protocolVersion:5,transformWsUrl:(e,t,r)=>{var i;if(!(null===(i=Xc(this,Mc,"f"))||void 0===i?void 0:i.id)||!Xc(this,jc,"f")||!Xc(this,Nc,"f"))throw new Error("Unable to create Whiz credentials");return r.options.password=Kr(Xc(this,Mc,"f"),Xc(this,jc,"f"),Xc(this,Nc,"f"),{origin:window.location.origin}),e}}};return Jc(this,Fc,Zc(n.host,n.options),"f"),Xc(this,Fc,"f").on("connect",(()=>{if(!Xc(this,Fc,"f")||!Xc(this,Mc,"f"))return void Xc(this,Kc,"f").call(this,{message:"Socket or user not set"});const e=Xc(this,$c,"f").valueOf();Xc(this,Fc,"f").subscribe({[e]:{qos:1}}),this.publishMessage(Xc(this,zc,"f")),Xc(this,Hc,"f").call(this)})),Xc(this,Fc,"f").on("disconnect",(e=>{Xc(this,qc,"f").call(this)})),Xc(this,Fc,"f").on("message",((e,t,r)=>{Xc(this,Mc,"f")&&e===Xc(this,$c,"f").valueOf()&&Xc(this,Vc,"f").call(this,JSON.parse(t.toString()))})),Xc(this,Fc,"f").on("error",(e=>{Xc(this,Kc,"f").call(this,{message:e.message})})),Xc(this,xc,"m",Yc).call(this)}))}disconnect(){return Xc(this,Fc,"f")?(Xc(this,Fc,"f").end(),Xc(this,Fc,"f").disconnected?(Jc(this,Fc,void 0,"f"),Xc(this,xc,"m",Yc).call(this)):Xc(this,xc,"m",Gc).call(this,"Failed to disconnect client.")):Xc(this,xc,"m",Gc).call(this,"Client not set.")}onConnect(e){Jc(this,Hc,e,"f")}onDisconnect(e){Jc(this,qc,e,"f")}onMessage(e){Jc(this,Vc,e,"f")}onError(e){Jc(this,Kc,e,"f")}}Mc=new WeakMap,Uc=new WeakMap,jc=new WeakMap,Lc=new WeakMap,Nc=new WeakMap,Dc=new WeakMap,Fc=new WeakMap,Wc=new WeakMap,$c=new WeakMap,zc=new WeakMap,Hc=new WeakMap,qc=new WeakMap,Vc=new WeakMap,Kc=new WeakMap,xc=new WeakSet,Gc=function(e){return Xc(this,Kc,"f").call(this,{message:e}),new Promise((()=>({status:"FAILURE",error:e})))},Yc=function(){return new Promise((()=>({status:"SUCCESS"})))};var tu,ru,iu,nu,ou,su,au,lu,hu=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},cu=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},uu=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};const fu=new Map([[Nr.SET_DATA,"system_message"],[Nr.START_SESSION,"session_start"],[Nr.RESTART_SESSION,"session_restart"]]);class du{constructor(e,t,r,i){tu.set(this,void 0),ru.set(this,void 0),iu.set(this,void 0),nu.set(this,void 0),ou.set(this,void 0),su.set(this,void 0),au.set(this,void 0),lu.set(this,void 0),cu(this,iu,e.tenant,"f"),cu(this,nu,e.tenant,"f"),cu(this,ru,e.restUrl,"f"),cu(this,tu,t,"f"),cu(this,ou,r,"f"),cu(this,su,i,"f"),cu(this,au,new eu(e,t,i),"f")}connect(e){return hu(this,void 0,void 0,(function*(){cu(this,lu,e,"f");const t=this.createSystemMessageBody({message:Vr(e),messageType:Nr.START_SESSION});return uu(this,au,"f").connectToWhiz(t)}))}updateConnection(e){return hu(this,void 0,void 0,(function*(){return uu(this,tu,"f")&&uu(this,au,"f")&&e?(cu(this,lu,e,"f"),this.sendSystemMessage({messageType:Nr.SET_DATA,message:Vr(e)})):new Promise((()=>({status:"FAILURE",error:"User or socket or connection options not set"})))}))}disconnect(){return hu(this,void 0,void 0,(function*(){return uu(this,au,"f").disconnect()}))}sendUserMessage(e){return hu(this,void 0,void 0,(function*(){const t=crypto.randomUUID();let r=Object.assign(Object.assign({},e),{sessionId:uu(this,tu,"f").id,messageId:t});return uu(this,au,"f").publishMessage(r)}))}createSystemMessageBody(e){let t=`/${fu.get(e.messageType)}`;return e.message&&(t+=`${JSON.stringify(e.message)}`),{message:t,sessionId:uu(this,tu,"f").id,messageId:crypto.randomUUID(),metadata:e.metadata}}sendSystemMessage(e){return hu(this,void 0,void 0,(function*(){return uu(this,au,"f").publishMessage(this.createSystemMessageBody(e))}))}executeUserReplyAction(e){return hu(this,void 0,void 0,(function*(){return e.type===Fr.USER_REPLY?this.sendUserMessage({message:e.data.reply,metadata:e}):new Promise((()=>({status:"FAILURE",error:"Cannot submit action of type "+e.type+" as a user reply"})))}))}sendFeedback(e){return hu(this,void 0,void 0,(function*(){const t=uu(this,iu,"f"),r=uu(this,tu,"f").id,{sentiment:i,messageId:n,comment:o}=e,s={"Content-Type":"application/json"};return uu(this,ou,"f").call(this,`${uu(this,ru,"f")}/whiz/feedback/${t}`,{method:"POST",headers:s,body:{tenant:t,userId:r,messageId:n,sentiment:i,comment:o}})}))}getHistory(){return hu(this,arguments,void 0,(function*(e=50,t=0){var r;const i=null===(r=uu(this,tu,"f"))||void 0===r?void 0:r.id;if(!i)throw new Error("Method ai.setUser({id: user_id}) needs to be called prior to getting history.");const n={"Content-Type":"application/json"},o=[["page_size",e],["page_num",t]].filter((([e,t])=>null!=t)).map((([e,t])=>`${e}=${t}`)).join("&"),s=o.length?`?${o}`:"",a=`${uu(this,ru,"f")}/whiz/history/${uu(this,iu,"f")}/${uu(this,nu,"f")}/${i}${s}`;return uu(this,ou,"f").call(this,a,{method:"GET",headers:n}).then((e=>200===e.status?e.json():(console.warn(`Error fetching history: ${e.status} ${e.statusText}`),[]))).catch((e=>(console.warn(`Error fetching history: ${e.message}`),[])))}))}clearHistory(){return hu(this,void 0,void 0,(function*(){var e;const t=null===(e=uu(this,tu,"f"))||void 0===e?void 0:e.id;if(!t)throw new Error("Method ai.setUser({id: user_id}) needs to be called prior to clearing history.");const r={"Content-Type":"application/json"};return uu(this,ou,"f").call(this,`${uu(this,ru,"f")}/whiz/history/${uu(this,iu,"f")}/${uu(this,nu,"f")}/${t}`,{method:"DELETE",headers:r}).then((e=>200===e.status||(console.warn(`Error clearing history: ${e.status} ${e.statusText}`),!1))).catch((e=>(console.warn(`Error clearing history: ${e.message}`),!1)))}))}onConnect(e){uu(this,au,"f").onConnect(e)}onDisconnect(e){uu(this,au,"f").onDisconnect(e)}onMessage(e){uu(this,au,"f").onMessage(e)}onError(e){uu(this,au,"f").onError(e)}}tu=new WeakMap,ru=new WeakMap,iu=new WeakMap,nu=new WeakMap,ou=new WeakMap,su=new WeakMap,au=new WeakMap,lu=new WeakMap;var pu,gu,yu,bu,mu,wu,_u,vu,Eu,Su=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},Au=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},ku=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class Iu{constructor(){pu.add(this),gu.set(this,void 0),yu.set(this,void 0),bu.set(this,"wss://whiz.api.autointel.ai"),mu.set(this,"https://api.autointel.ai"),wu.set(this,void 0),_u.set(this,void 0),vu.set(this,void 0)}enableStaging(){Au(this,bu,"wss://whiz.api.dev.autointel.ai","f"),Au(this,mu,"https://api.dev.autointel.ai","f")}disableStaging(){Au(this,bu,"wss://whiz.api.autointel.ai","f"),Au(this,mu,"https://api.autointel.ai","f")}useHmacCredentials(e,t){Au(this,wu,e,"f"),Au(this,_u,(()=>t),"f")}setSecret(e){this.chat&&this.chat.disconnect(),Au(this,vu,(()=>e),"f")}setUser(e){this.chat&&this.chat.disconnect(),Au(this,gu,e,"f")}setTenant(e){this.chat&&this.chat.disconnect(),Au(this,yu,e,"f")}createChat(e){var t;const r=null===(t=ku(this,vu,"f"))||void 0===t?void 0:t.call(this);if(!r||!ku(this,yu,"f")||!ku(this,gu,"f"))throw console.log(ku(this,yu,"f"),ku(this,gu,"f")),r||console.log("No secret set"),new Error("Unable to create Whiz chat");const i={tenant:ku(this,yu,"f"),restUrl:ku(this,mu,"f"),socketUrl:ku(this,bu,"f"),jwtSecret:r};return new du(i,ku(this,gu,"f"),ku(this,pu,"m",Eu).bind(this),e)}getEnrichedUserProfile(e){return Su(this,void 0,void 0,(function*(){var t;const r=null==e?void 0:e.id;if(!r)throw new Error("User ID not set");const i=Object.assign(Object.assign({},e),{whizEnabled:!1,purchaseIntent:0,firstTimeUser:!0}),n={"Content-Type":"application/json"};try{const t=yield ku(this,pu,"m",Eu).call(this,`${ku(this,mu,"f")}/whiz/whiz-enabled/${ku(this,yu,"f")}`,{method:"POST",headers:n,body:{user:{id:r}}});if(200!==t.status)return console.warn(`Error fetching whiz enabled: ${t.status} ${t.statusText}`),i;const o=yield t.json();return Object.assign(Object.assign({},e),o)}catch(e){return console.warn(`Error fetching whiz enabled: ${null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e}`),i}}))}createChatIfNecessary(){this.chat||(this.chat=this.createChat())}connect(e){var t;return this.createChatIfNecessary(),null===(t=this.chat)||void 0===t?void 0:t.connect(e)}disconnect(){var e;return null===(e=this.chat)||void 0===e?void 0:e.disconnect()}onConnect(e){var t;this.createChatIfNecessary(),null===(t=this.chat)||void 0===t||t.onConnect(e)}onDisconnect(e){var t;this.createChatIfNecessary(),null===(t=this.chat)||void 0===t||t.onDisconnect(e)}onMessage(e){var t;this.createChatIfNecessary(),null===(t=this.chat)||void 0===t||t.onMessage(e)}onError(e){var t;this.createChatIfNecessary(),null===(t=this.chat)||void 0===t||t.onError(e)}}gu=new WeakMap,yu=new WeakMap,bu=new WeakMap,mu=new WeakMap,wu=new WeakMap,_u=new WeakMap,vu=new WeakMap,pu=new WeakSet,Eu=function(e,t){if(!ku(this,wu,"f")||!ku(this,_u,"f"))throw new Error("Unable to make Whiz API calls without HMAC user and API key");const r=e.replace(/^.+\/\//,""),i=r.split("/")[0],n=`/${r.split("/").slice(1).join("/")}`,o={"Content-Type":"application/json"},s=dr(Object.assign({path:n,headers:o},t),{basePath:i,apiKey:ku(this,_u,"f"),username:ku(this,wu,"f")});return s.body=s.body&&JSON.stringify(s.body),fetch(e,s)};var Tu,Cu,Ou,Ru=function(e,t,r,i){return new(r||(r=Promise))((function(n,o){function s(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((i=i.apply(e,t||[])).next())}))},Bu=function(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},Pu=function(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};Cu=new WeakMap,Tu=new WeakSet,Ou=function(){var e,t;if("undefined"==typeof window||!(null===(e=this.user)||void 0===e?void 0:e.id)||!Pu(this,Cu,"f"))return;const r=Date.now();this.app.postInteraction({interaction:{itemId:window.location.pathname,context:{browsingSession:Object.assign({id:`${this.user.id}-${r}`},(null===(t=window.navigator.userAgentData)||void 0===t?void 0:t.mobile)&&{deviceType:Lr.MOBILE}),user:Object.assign(Object.assign({},this.user),{userAgent:window.navigator.userAgent}),source:{url:window.location.href,name:document.title},sdkVersion:"3.0.6"},action:pr.View,subAction:"Page Load",timestamp:r}})};const xu=new class{constructor(){Tu.add(this),this.app=new qr,this.whiz=new Iu,Cu.set(this,!1)}setCredentials(e,t,r,i){this.app.useTenant(e),this.whiz.setTenant(e),this.app.useHmacCredentials(t,r),this.whiz.useHmacCredentials(t,r),i&&this.whiz.setSecret(i),e&&t&&r&&Bu(this,Cu,!0,"f"),Pu(this,Tu,"m",Ou).call(this)}enableStaging(){this.whiz.enableStaging(),this.app.enableStaging()}disableStaging(){this.whiz.disableStaging(),this.app.disableStaging()}setUser(e){return Ru(this,void 0,void 0,(function*(){if(!e.id)throw new Error("User ID not set");e.id=e.id.replace(/-/g,"");const t=yield this.whiz.getEnrichedUserProfile(e);return this.app.setUser(t),this.whiz.setUser(t),this.user=t,Pu(this,Tu,"m",Ou).call(this),Promise.resolve(t)}))}getUserProfile(){return this.user}};window.ai=xu})();
//# sourceMappingURL=bundle.js.map</script>
</body>
</html>
