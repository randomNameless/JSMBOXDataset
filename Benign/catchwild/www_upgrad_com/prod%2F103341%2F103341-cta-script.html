<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>prod%2F103341%2F103341-cta-script.html</title>
</head>
<body>

<script>
(function () {
        var engtCoursesThreshold = window.innerWidth < 650 ? 1 : 3;
        var engtCountOfCourses = 0;
        var isCrossingThreshold = false; // Variable to track if crossing threshold 650
        var allEngtcourses = [{}];
        const engtStutdentsName = [
          "Alex",
          "Jordan",
          "Taylor",
          "Morgan",
          "Casey",
          "James",
          "Emily",
          "Michael",
          "Sarah",
          "William",
        ];
        const engtCoursesForStudents = [
          "DBA from GGU",
          "MBA from Edgewood",
          "PGP in Data Science from IIITB",
          "MBA from upGrad School of Management",
          "PGC in GenAI",
        ];

        function engtGetRandomElement(arr) {
          return arr[Math.floor(Math.random() * arr.length)];
        }

        var engtRandomName = engtGetRandomElement(engtStutdentsName);
        var engtRandomCourse = engtGetRandomElement(engtCoursesForStudents);

        var randomCombinationString = `<b>${engtRandomName}</b> asked queries on our assistant and enrolled for <b>${engtRandomCourse} </b>, \n we could assist you in the same way! `;

        var engtModalOverlay = document.createElement("div");
        engtModalOverlay.setAttribute("id", "engt-modal-overlay");
        engtModalOverlay.setAttribute(
          "style",
          "position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0, 0, 0, 0.5);z-index:49;opacity:0;visibility:hidden;transition:opacity 0.3s ease;"
        );
        document.body.appendChild(engtModalOverlay);
        var engtRecommendedCoursesModal = document.createElement("div");
        engtRecommendedCoursesModal.setAttribute(
          "id",
          "engt-recommended-courses-modal"
        );
        engtRecommendedCoursesModal.setAttribute(
          "style",
          "position:fixed;top:50%;left:50%;transform:translate(-50%, -50%) scale(0.7);z-index:50;opacity:0;visibility:hidden;font-family:inherit;transition:opacity 0.3s ease, transform 0.5s ease;"
        );
        document.body.appendChild(engtRecommendedCoursesModal);
        engtRecommendedCoursesModal.innerHTML =
          "" +
          '<div style="background-color: white; border-radius: 1.5rem;display:flex;flex-direction:column;flex-wrap:wrap;width:100%;">' +
          '<div style="display: flex; flex-direction: column; padding: 2rem; height:100%;width:100%">' +
          '<span style="cursor: pointer; font-size: x-large; height: 0rem; width: 0rem; top: 8px; position: absolute; right: 30px;text-align: center;" onclick="engtCloseModal()">&times;</span>' +
          '<div style="gap: 1rem; display: flex; flex-direction: column; align-items: center; position: relative;">' +
          '<div style="display: flex; flex-direction: column; gap: 0.3rem; text-align: center;">' +
          '<span id="engt-modal-main-heading" style="font-size: 1.5rem; font-weight: 650;background:linear-gradient(132deg,#ee2c3c 14.58%,#c5135d 65.1%,#6a11b0);-webkit-background-clip: text;-webkit-text-fill-color: transparent;letter-spacing: -.01em;line-height:1.8rem;">Can\'t find what you are looking for?</span>' +
          '<p style="font-size: 1rem; font-weight: 550; color:#666">Check out our <b>most popular</b> Programs! </p>' +
          "</div>" +
          "</div>" +
          '<div style="display: flex; height: 100%; width: 100%;align-items: center;justify-content:space-between;margin-top:1rem">' +
          '<div style="border: none; cursor: pointer; font-size: 20px;background-color:#ee2c3c;border-radius:50%;color:white;height:2rem;width:2rem;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-left:-1rem;margin-top:2rem;" id="engt-courses-left-arrow">&lt;</div>' +
          '<div id="engt-course-cards-container" style="width: 35rem; overflow: hidden; margin: 0 10px;">' +
          '<div id="engt-courses-cards-wrapper" style="display: flex; transition: transform 0.3s ease-in-out;">' +
          "<!-- Cards will be dynamically generated here -->" +
          "</div>" +
          "</div>" +
          '<div style="border: none; cursor: pointer; font-size: 20px;background-color:#ee2c3c;border-radius:50%;color:white;height:2rem;width:2rem;display:flex;flex-direction:column;justify-content:center;align-items:center; margin-right:-1rem;margin-top:2rem;" id="engt-courses-right-arrow">&gt;</div>' +
          "</div>" +
          '<div style="display: flex;flex-direction: row;margin-top:1rem">' +
          '<div style="border-bottom: 1px solid #C0C0C0; width:100%; margin-bottom: 0.75rem;margin-right:1rem;margin-left:2rem;"></div>' +
          "<span>OR</span>" +
          '<div style="border-bottom: 1px solid #C0C0C0; width:100%;margin-bottom: 0.75rem;margin-left:1rem;margin-right:2rem;"></div>' +
          "</div>" +
          '<div id="engt-talk-to-gia" style="display: flex; flex-direction:column;align-items: center; justify-content: center;margin-top:1rem;gap:1rem;">' +
          '<span style="font-size: 1rem; font-weight: 550; color:#666;text-align:center">' +
          randomCombinationString +
          "</span>" +
          '<button id="engtTalkToGia" style="padding: 8px; font-size: 1rem;font-weight:700; border: none; border-radius: 5px; color: white; background: linear-gradient(180deg, #ee2c3c, #da202f); min-width:8rem;cursor:pointer" onclick="engtTalkToGia()">Chat with GIA</button>' +
          "</div>" +
          "</div>" +
          "</div>";

        function getValueOfCookieStartingWithPk(prefix) {
          const engtCookies = document.cookie.split("; ");
          for (const engtCookie of engtCookies) {
            if (engtCookie.startsWith(prefix)) {
              return engtCookie.split("=")[1].split(".")[0];
            }
          }
          return null;
        }

        function engtSaveModalClicksAnalytics(clickEvent) {
          const myHeaders = new Headers();
          myHeaders.append("Content-Type", "application/json");
          myHeaders.append(
            "Authorization",
            "Basic da1451de-34b4-4b38-b7f2-88951ccd2170-HtQjhDM"
          );

          const raw = JSON.stringify({
            domain: "https://www.upgrad.com",
            page_path: window.location.href,
            matomo_user_id: getValueOfCookieStartingWithPk("_pk_id"),
            popup_modal_type: "discovery",
            popup_modal_click_event_count: 1,
            popup_modal_click_event_name: clickEvent,
          });

          const requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: raw,
            redirect: "follow",
          };

          fetch(
            "https://api.engati.com/pde-api/v1.0/customer/88870/save-popup-modal-analytics",
            requestOptions
          );
        }

        function engtOpenModal() {
          document.body.style.overflow = "hidden";
          engtRecommendedCoursesModal.style.display = "block";
          engtModalOverlay.style.display = "block";
          requestAnimationFrame(function () {
            engtRecommendedCoursesModal.style.opacity = "1";
            engtRecommendedCoursesModal.style.visibility = "visible";
            engtRecommendedCoursesModal.style.transform =
              "translate(-50%, -50%) scale(1)";
            engtModalOverlay.style.opacity = "1";
            engtModalOverlay.style.visibility = "visible";
          });
          engtModalOverlay.addEventListener("click", engtCloseModal);
          engtRecommendedCoursesModal.addEventListener(
            "click",
            function (event) {
              event.stopPropagation();
            }
          );
        }
        function engtCloseModal(isToCallSaveAnalyticsApi = true) {
          document.body.style.overflow = "";
          engtRecommendedCoursesModal.style.opacity = "0";
          engtRecommendedCoursesModal.style.visibility = "hidden";
          engtRecommendedCoursesModal.style.transform =
            "translate(-50%, -50%) scale(0.7)";
          engtModalOverlay.style.opacity = "0";
          engtModalOverlay.style.visibility = "hidden";
          engtRecommendedCoursesModal.style.display = "none";
          engtModalOverlay.style.display = "none";
          engtModalOverlay.removeEventListener("click", engtCloseModal);
          if (isToCallSaveAnalyticsApi) {
            engtSaveModalClicksAnalytics("popupModalCloseClicks");
          }
        }
        function engtTalkToGia() {
          engtCloseModal(false);
          engtSaveModalClicksAnalytics("talkToBotClicks");
          var button = document.getElementById("engtLauncherIcon");
          var chatOpen = document.getElementById("engt-popup");
          if (button) {
            if (
              chatOpen &&
              chatOpen.classList &&
              chatOpen.classList.contains &&
              chatOpen.classList.contains("engt-popup-hidden")
            ) {
              button.click();
            }
          }
        }

        document.getElementById("engtTalkToGia").onclick = function () {
          engtTalkToGia();
        };
        var engtCourseCardsContainer = document.getElementById(
          "engt-course-cards-container"
        );
        var engtCoursesCardsWrapper = document.getElementById(
          "engt-courses-cards-wrapper"
        );
        var engtCoursesLeftArrow = document.getElementById(
          "engt-courses-left-arrow"
        );
        var engtCoursesRightArrow = document.getElementById(
          "engt-courses-right-arrow"
        );
        var engtModalMainHeading = document.getElementById(
          "engt-modal-main-heading"
        );
        var engtCardWidth = 186; // Width of each card including margin
        var engtCurrentIndex = 2; // Start from the first real card (considering duplicated ones)
        var engtCloneClass = "cloned-card";
        function updateEngtCards() {
          // Remove previously inserted clones if they exist
          var existingClones = engtCoursesCardsWrapper.querySelectorAll(
            "." + engtCloneClass
          );
          existingClones.forEach(function (clone) {
            clone.remove();
          });
          if (engtCountOfCourses > engtCoursesThreshold) {
            var firstCourse = createEngtCard(allEngtcourses[0]);
            var lastCourse = createEngtCard(
              allEngtcourses[engtCountOfCourses - 1]
            );
            // Add a class to identify the clones
            firstCourse.classList.add(engtCloneClass);
            lastCourse.classList.add(engtCloneClass);
            engtCoursesCardsWrapper.appendChild(firstCourse);
            engtCoursesCardsWrapper.insertBefore(
              lastCourse,
              engtCoursesCardsWrapper.children[0]
            );
            // Adjust the initial position
            engtCoursesCardsWrapper.style.transform =
              "translateX(-" + engtCurrentIndex * engtCardWidth + "px)";
          }
          if (window.innerWidth > 650 && engtCountOfCourses <= 3) {
            engtCoursesCardsWrapper.style.justifyContent = "center";
          } else {
            if (engtCountOfCourses == 1) {
              engtCoursesCardsWrapper.style.justifyContent = "center";
            } else {
              engtCoursesCardsWrapper.style.justifyContent = "start";
            }
          }
        }
        function updateEngtModalProperties() {
          var isWindowNarrow = window.innerWidth < 650;
          // If the state of crossing the threshold changes, update the variable and call updateEngtCards
          if (isWindowNarrow !== isCrossingThreshold) {
            isCrossingThreshold = isWindowNarrow;
            if (isCrossingThreshold) {
              engtRecommendedCoursesModal.style.width = "95%";
              engtCoursesLeftArrow.style.width = "3rem";
              engtCoursesLeftArrow.style.height = "1.5rem";
              engtCoursesLeftArrow.style.fontSize = "1rem";
              engtCoursesRightArrow.style.width = "3rem";
              engtCoursesRightArrow.style.height = "1.5rem";
              engtCoursesRightArrow.style.fontSize = "1rem";
              engtModalMainHeading.style.fontSize = "1.3rem";
              engtCoursesThreshold = 1;
              engtSlideToIndex(0);
            } else {
              engtRecommendedCoursesModal.style.width = "";
              engtCoursesLeftArrow.style.width = "2rem";
              engtCoursesLeftArrow.style.height = "2rem";
              engtCoursesLeftArrow.style.fontSize = "1.25rem";
              engtCoursesRightArrow.style.width = "2rem";
              engtCoursesRightArrow.style.height = "2rem";
              engtCoursesRightArrow.style.fontSize = "1.25rem";
              engtModalMainHeading.style.fontSize = "1.5rem";
              engtCoursesThreshold = 3;
              engtSlideToIndex(0);
            }
            if (engtCountOfCourses) {
              updateEngtCards(); // Call updateEngtCards when the threshold state changes
            }
          }
        }
        updateEngtModalProperties();
        window.addEventListener("resize", updateEngtModalProperties);
        window.addEventListener("load", updateEngtModalProperties);
        window.engtOpenModal = engtOpenModal;
        window.engtCloseModal = engtCloseModal;
        function createEngtCard(courseInfo) {
          var course = courseInfo.upgradConversationalDialogueDTO;
          var engtCourseWrapper = document.createElement("div");
          engtCourseWrapper.setAttribute("id", "engt-course-wrapper");
          engtCourseWrapper.setAttribute(
            "style",
            "display: flex; flex-direction: column;height:14rem; width: 13rem; min-width: 176px; border-radius: 10px;gap:0.5rem; padding-bottom: 1rem; margin: 0 5px 0.5rem 5px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);"
          );
          var engtImageWrapper = document.createElement("div");
          engtImageWrapper.setAttribute("id", "engt-image-wrapper");
          engtImageWrapper.setAttribute(
            "style",
            "display: flex; align-items: center; width: 100%; flex-direction: column; "
          );
          var engtImage = document.createElement("img");
          engtImage.src = course.program_image;
          engtImage.alt = "Course Image";
          engtImage.setAttribute("loader", "lazy");
          engtImage.setAttribute("tabindex", "0");
          engtImage.setAttribute(
            "style",
            "width: 100%; height: 6rem; border-top-left-radius: 10px; border-top-right-radius: 10px;border-bottom-left-radius: 0px; border-bottom-right-radius: 0px;"
          );
          var engtCourseName = document.createElement("div");
          engtCourseName.setAttribute("id", "engtCourseName");
          engtCourseName.setAttribute(
            "style",
            "text-align: center;height: 2.5rem;padding:0 5px;margin-bottom:5px;line-height: 1.3rem;min-height:2.5rem;"
          );
          var truncatedCourseName =
            course.cta_popup_display_name.length > 36
              ? course.cta_popup_display_name.slice(0, 36) + "..."
              : course.cta_popup_display_name;
          engtCourseName.innerHTML =
            '<span style="font-size: 0.85rem;font-weight:600;">' +
            truncatedCourseName +
            "</span>";
          var universityName = document.createElement("div");
          universityName.setAttribute(
            "style",
            "background-color: #fcf0f1; color: #ee2c3c; font-size: 0.85rem; font-weight: 700; height: 1.75rem; line-height: 1.75rem; overflow: hidden; padding-left: 10px; padding-right: 10px; text-align: center; text-overflow: ellipsis; white-space: nowrap;width:100%"
          );
          universityName.textContent = course.university_name;
          var engtViewProgramWrapper = document.createElement("div");
          engtViewProgramWrapper.setAttribute(
            "id",
            "engt-view-program-wrapper"
          );
          engtViewProgramWrapper.setAttribute(
            "style",
            "display: flex; align-items: center; justify-content: center;"
          );
          var engtViewProgram = document.createElement("button");
          engtViewProgram.setAttribute(
            "style",
            "padding: 5px; font-size: 0.85rem;font-weight:600; border: none; border-radius: 5px; color: white; background: linear-gradient(180deg, #ee2c3c, #da202f); min-width:8rem; cursor: pointer;"
          );
          engtViewProgram.textContent = "View Program";
          engtViewProgram.onclick = function () {
            engtSaveModalClicksAnalytics("popupModalSuccessClicks");
            window.open(course.program_link, "_blank");
          };
          engtViewProgramWrapper.appendChild(engtViewProgram);
          engtImageWrapper.appendChild(engtImage);
          engtImageWrapper.appendChild(universityName);
          engtCourseWrapper.appendChild(engtImageWrapper);
          engtCourseWrapper.appendChild(engtCourseName);
          engtCourseWrapper.appendChild(engtViewProgramWrapper);
          return engtCourseWrapper;
        }
        function engtFetchCourses() {
          var myHeaders = new Headers();
          myHeaders.append("Content-Type", "application/json");
          myHeaders.append(
            "Authorization",
            "Basic da1451de-34b4-4b38-b7f2-88951ccd2170-HtQjhDM" // replaced with upgrad token
          );
          var raw = JSON.stringify({
            program_link: window.location.href.replace(/\/$/, ""),
          });
          var requestOptions = {
            method: "POST",
            headers: myHeaders,
            body: raw,
            redirect: "follow",
          };
          fetch(
            "https://api.engati.com/dls-api/v1.0/external/document/customer/88870/botRef/103341",
            requestOptions
          )
            .then(function (response) {
              return response.json();
            })
            .then(function (engtCoursesJsonData) {
              allEngtcourses = engtCoursesJsonData.conversationalDialogueDto;
              engtCountOfCourses = allEngtcourses.length;
              if (engtCountOfCourses) {
                allEngtcourses.forEach(function (course) {
                  var engtCard = createEngtCard(course);
                  engtCoursesCardsWrapper.appendChild(engtCard);
                });
              }
            })
            .then(function () {
              if (engtCountOfCourses) {
                updateEngtCards();
                //open modal after given time, right now it is 20s
                setTimeout(engtOpenModal, 20000);
              }
            });
        }
        function engtSlideToIndex(index) {
          engtCoursesCardsWrapper.style.transition =
            "transform 0.3s ease-in-out";
          engtCoursesCardsWrapper.style.transform =
            "translateX(-" + index * engtCardWidth + "px)";
          engtCurrentIndex = index;
        }
        function handleEngtArrowClick(direction) {
          var scrollThreshold = window.innerWidth < 650 ? 2 : 3;
          if (engtCountOfCourses > engtCoursesThreshold) {
            if (direction === "left") {
              if (engtCurrentIndex > 1) {
                engtSlideToIndex(engtCurrentIndex - 1);
              } else {
                engtSlideToIndex(0);
                setTimeout(function () {
                  engtCoursesCardsWrapper.style.transition = "none";
                  engtCoursesCardsWrapper.style.transform =
                    "translateX(-" +
                    (engtCoursesCardsWrapper.children.length -
                      scrollThreshold) *
                      engtCardWidth +
                    "px)";
                  engtCurrentIndex =
                    engtCoursesCardsWrapper.children.length - scrollThreshold;
                }, 300);
              }
            } else if (direction === "right") {
              if (
                engtCurrentIndex <
                engtCoursesCardsWrapper.children.length - scrollThreshold
              ) {
                engtSlideToIndex(engtCurrentIndex + 1);
              } else {
                engtSlideToIndex(engtCoursesCardsWrapper.children.length - 1);
                setTimeout(function () {
                  engtCoursesCardsWrapper.style.transition = "none";
                  engtCoursesCardsWrapper.style.transform =
                    "translateX(-" + engtCardWidth + "px)";
                  engtCurrentIndex = 1;
                }, 300);
              }
            }
          }
        }
        engtCoursesLeftArrow.addEventListener("click", function () {
          return handleEngtArrowClick("left");
        });
        engtCoursesRightArrow.addEventListener("click", function () {
          return handleEngtArrowClick("right");
        });
        engtCoursesCardsWrapper.addEventListener(
          "touchstart",
          handleEngtTouchStart
        );
        engtCoursesCardsWrapper.addEventListener(
          "touchmove",
          handleEngtTouchMove
        );
        engtCoursesCardsWrapper.addEventListener(
          "touchend",
          handleEngtTouchEnd
        );
        // Variables to store touch event data
        var touchStartX = 0;
        var touchEndX = 0;
        // Function to handle touch start event
        function handleEngtTouchStart(event) {
          touchStartX = event.touches[0].clientX;
        }
        // Function to handle touch move event
        function handleEngtTouchMove(event) {
          touchEndX = event.touches[0].clientX;
        }
        // Function to handle touch end event
        function handleEngtTouchEnd() {
          var swipeDistance = touchEndX - touchStartX;
          var sensitivity = 20; // Adjust sensitivity as needed
          if (Math.abs(swipeDistance) > sensitivity) {
            var swipeDirection = swipeDistance > 0 ? "right" : "left";
            handleEngtSwipe(swipeDirection);
          }
        }
        // Function to handle swipe gesture
        function handleEngtSwipe(direction) {
          if (direction === "left") {
            handleEngtArrowClick("right");
          } else {
            handleEngtArrowClick("left");
          }
        }
        engtFetchCourses();
        // replace the engati(m) tracking code generated from clickstream and remove the script tag

        var _paq = (window._paq = window._paq || []);
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
        _paq.push(["setCookieDomain", "*.www.upgrad.com"]);
        _paq.push(["setDomains", ["*.www.upgrad.com"]]);
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function () {
          var u = "//clickstream.engati.com/";
          _paq.push(["setTrackerUrl", u + "matomo.php"]);
          _paq.push(["setSiteId", "19"]);
          var d = document,
            g = d.createElement("script"),
            s = d.getElementsByTagName("script")[0];
          g.async = true;
          g.src = u + "matomo.js";
          s.parentNode.insertBefore(g, s);
        })();
        //upto here , tracking code
      })();
</script>

</body>
</html>
