<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blockMeasurement.html</title>
</head>
<body>

<script>
(function($) {
  // 読了率を図るポイントに到達したかどうかを保持する変数。
  var first = false;
  var second = false;
  var third = false;
  var fourth = false;
  var fifth = false;
  var sixth = false;
  var seventh = false;
  $(function() {
    // ページ描画時に画像を全てロードする。
    window.responsiveImage.prepareLoadAll($('.lazyload'), true);
    var cnt = 0;
    // 0.5秒ごとに全ての画像が読み込まれたかチェック。
    var func = function() {
      if (!window.responsiveImage.confirmLoadAll($('.lazyload'))) {
        cnt++;
        timer = setTimeout(func, 500);
      } else {
        timer = null;
        var delay = null;
        // スクロールイベントに読了率計測の処理をバインド。
        $(window).scroll(function() {
          clearTimeout(delay);
          delay = setTimeout(function() {
            judge();
          }, 500);
        });
      }
    };
    timer = setTimeout(func, 0);
  });
  // 読了率計測処理
  function judge() {
    // 各見出しのところを通過したことをチェックして、1回だけログを出力する。
    if (!first) {
      var $first = $('#firstHeading');
      if (($first.offset().top + $first.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        first = true;
        console.log("this,'aucom-TOP','block-living','',event");
        trEventBe(this,'aucom-TOP','block-living','',event);
      }
    }
    if (!second) {
      var $second = $('#secondHeading');
      if (($second.offset().top + $second.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        second = true;
        console.log("this,'aucom-TOP','block-living-campaign','',event");
        trEventBe(this,'aucom-TOP','block-living-campaign','',event);
      }
    }
    /*
    if (!third) {
      var $third = $('#thirdHeading');
      if (($third.offset().top + $third.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        third = true;
        console.log("this,'aucom-TOP','block-know-respect','',event");
        trEventBe(this,'aucom-TOP','block-know-respect','',event);
      }
    }
    */
    if (!fourth) {
      var $fourth = $('#fourthHeading');
      if (($fourth.offset().top + $fourth.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        fourth = true;
        console.log("this,'aucom-TOP','block-know-respect-brand','',event");
        trEventBe(this,'aucom-TOP','block-know-respect-brand','',event);
      }
    }
    /*
    if (!fifth) {
      var $fifth = $('#fifthHeading');
      if (($fifth.offset().top + $fifth.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        fifth = true;
        console.log("this,'aucom-TOP','block-know-respect-action','',event");
        trEventBe(this,'aucom-TOP','block-know-respect-action','',event);
      }
    }
    if (!sixth) {
      var $sixth = $('#sixthHeading');
      if (($sixth.offset().top + $sixth.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        sixth = true;
        console.log("this,'aucom-TOP','block-know-times','',event");
        trEventBe(this,'aucom-TOP','block-know-times','',event);
      }
    }
    */
    if (!seventh) {
      var $seventh = $('#seventhHeading');
      if (($seventh.offset().top + $seventh.height()) <= ($(window).scrollTop() + $(window).innerHeight() + 45)) {
        seventh = true;
        console.log("this,'aucom-TOP','block-footer','',event");
        trEventBe(this,'aucom-TOP','block-footer','',event);
      }
    }
  }
})(jQuery);

</script>

</body>
</html>
