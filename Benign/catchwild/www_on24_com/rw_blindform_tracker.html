<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rw_blindform_tracker.html</title>
</head>
<body>

<script>

MktoForms2.whenReady(function (form) {
    
    let formEl = form.getFormElem()[0];
      // setting the attribute so that we can catch if the script is loaded twice.
    if( formEl.getAttribute("data-inline-behaviors-loaded") == "true" ) {
        return;
    }
    console.log('form is loaded');
    formEl.setAttribute("data-inline-behaviors-loaded", "true");
    // Cookie names as per the customer from the rwts
    const rw_entry_url_cookie = 'RW_Entry_URL';
    const rw_referer_url_cookie = 'RW_Refer_URL';
    const rw_currenturl_cookie = 'RW_Current_Url';
    const rw_src_cookie = 'RW_Source';
    const rw_chn_cookie = 'RW_Channel';
    const rw_utm_campaign_cookie = 'RW_Utm_Campaign';
    const rw_utm_content_cookie = 'RW_Utm_Content';
    const rw_utm_contrib_cookie = 'RW_Utm_Contrib';
    const rw_utm_ic_cookie = 'RW_Utm_IC';
    const rw_utm_partnerref_cookie = 'RW_Utm_Partnerref';
    const rw_utm_region_cookie = 'RW_Utm_Region';
    form.addHiddenFields({UTM_Campaign_LT__c: rwGetTrackingCookie(rw_utm_campaign_cookie)||"-"});  
    form.addHiddenFields({UTM_Contrib_LT__c: rwGetTrackingCookie(rw_utm_contrib_cookie)||"-"});   
    form.addHiddenFields({UTM_Content_LT__c: rwGetTrackingCookie(rw_utm_content_cookie)||"-"});  
    form.addHiddenFields({UTM_Partnerref_LT__c: rwGetTrackingCookie(rw_utm_partnerref_cookie)||"-"});  
    form.addHiddenFields({UTM_Region_LT__c: rwGetTrackingCookie(rw_utm_region_cookie)||"-"});  
    form.addHiddenFields({UTM_IC_LT__c: rwGetTrackingCookie(rw_utm_ic_cookie)||"-"});  
    form.addHiddenFields({UTM_Source_LT__c: rwGetTrackingCookie(rw_src_cookie)||"-"});  
    form.addHiddenFields({UTM_Medium_LT__c: rwGetTrackingCookie(rw_chn_cookie)||"-"});  
    form.addHiddenFields({Current_URL_LT__c: rwGetTrackingCookie(rw_currenturl_cookie)||"-"});  
    form.addHiddenFields({Referral_URL_LT__c: rwGetTrackingCookie(rw_referer_url_cookie)||"-"});  
    form.addHiddenFields({Entry_URL_LT__c: rwGetTrackingCookie(rw_entry_url_cookie)||"-"});
    console.log('added hidden fields to the form');
    
});

function rwGetTrackingCookie(cookieName) {
    var name = cookieName.toLowerCase() + '=';
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return null;
}

</script>

</body>
</html>
