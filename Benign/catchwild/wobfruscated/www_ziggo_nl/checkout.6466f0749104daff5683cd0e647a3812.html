<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>checkout.6466f0749104daff5683cd0e647a3812.html</title>
</head>
<body>
<script>"use strict";(self.webpackChunkaem_vfz_core_frontend=self.webpackChunkaem_vfz_core_frontend||[]).push([[251],{8206:function(e,t,i){i.d(t,{C:function(){return s},h:function(){return r}});const s={B2C:"b2c",B2B:"b2b",UNKNOWN:"unknown"},r={B2C:"CUST_B2C",B2B:"CUST_B2B",UNKNOWN:""}},9176:function(e,t){const i=Object.freeze({CUST:"cust",NONCUST:"nonCust",PROBCUST:"probCust",PROBNONCUST:"probNonCust",UNKNOWN:"unknown"});t.A=i},6937:function(e,t){const i="/services/blueriq",s={b2c:{compare:`${i}/b2c/compare`,calc:`${i}/b2c/calc`,info:`${i}/b2c/info`},b2bSmall:{compare:`${i}/b2b/small/compare`,calc:`${i}/b2b/small/calc`,info:`${i}/b2b/small/info`},b2bSoho:{compare:`${i}/b2b/soho/compare`,calc:`${i}/b2b/soho/calc`,info:`${i}/b2b/soho/info`}};t.A=s},8579:function(e,t,i){var s=i(1244),r=i(5129);t.A=async e=>{try{const t=await s.Ay.get(`${(0,r.d7)()}${e}.html${"author"===(0,r.d5)()?"?wcmmode=disabled":""}`),i=(new DOMParser).parseFromString(t.data,"text/html"),{children:a}=i.querySelector("body"),o=Array.from(a).filter((e=>"SCRIPT"!==e.tagName));return{title:i.title,content:o.map((e=>e.outerHTML)).join("")}}catch(e){return{title:null,content:null}}}},511:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=i(9335),r=i(4226),a=i(2541);var o={name:"z-add-on-list",mixins:[r.A,a.A],props:{predefinedAddOnIds:{type:Array,required:!0},limitedAmountOfItemsValue:{type:Number,required:!1,default:null},uuid:{type:String,required:!0}},data(){return{addOns:[],initialized:!1,showAll:null===this.limitedAmountOfItemsValue,showToggle:!1,selectedAddOnIds:[]}},computed:{...(0,s.mapState)("bundleBuilder",["productData"]),...(0,s.mapGetters)("addressData",["internetAvailable"]),...(0,s.mapGetters)("bundleBuilder",["isLoading"]),...(0,s.mapGetters)("VZglobal",["expandedAddOnLists"])},watch:{productData:{handler(e){if(!e.data)return;this.addOns=this.getAddOnsByPredefinedAddOnIds();this.isLoading&&this.initialized||(this.initialized=!0,this.selectedAddOnIds=this.addOns.filter((e=>e.isSelected)).map((e=>e.id)),this.setShowToggle())},deep:!0}},created(){this.addAvailableItems(this.predefinedAddOnIds),this.isListExpanded()&&(this.showAll=!0)},beforeUnmount(){this.removeAvailableItems(this.predefinedAddOnIds)},methods:{...(0,s.mapActions)("VZglobal",["setExpandedAddOnList"]),...(0,s.mapActions)("bundleBuilder",["addAvailableItems","removeAvailableItems","toggleProduct","removeUserDeclinedItems","addUserDeclinedItem"]),setShowToggle(){const e=this.getEnabledAddOnsLength();this.showToggle=null!==this.limitedAmountOfItemsValue&&this.limitedAmountOfItemsValue<e},addUserDeclinedItemToBlacklist(e){this.isAddOnDeletable(e)&&this.addUserDeclinedItem(e)},removeUserDeclinedItemFromBlacklist(e){this.isAddOnDeletable(e)&&this.removeUserDeclinedItems(e)},onClickShowAll(){this.showAll=!this.showAll,this.setListIsExpanded()},isListExpanded(){return this.expandedAddOnLists.includes(this.uuid)},setListIsExpanded(){let e=this.expandedAddOnLists;e.includes(this.uuid)?e=e.filter((e=>e!==this.uuid)):e.push(this.uuid),this.setExpandedAddOnList(e)},onChange(e){const t=e?.currentTarget,i=t?.value,s=this.isAddOnEnabled(i);this.internetAvailable&&s?(this.isAddOnSelected(i)?this.removeUserDeclinedItemFromBlacklist(i):this.addUserDeclinedItemToBlacklist(i),this.toggleProduct(i)):t.checked=!t.checked},isAddOnEnabled(e){if(!this.internetAvailable)return!1;const t=this.getAddOnById(e);return!(!t||!0===t.isDisabled)},isAddOnDeletable(e){const t=this.getAddOnById(e);return!!t?.isDeletable},isAddOnPricedMonthly(e){const t=this.getAddOnById(e);return!!t?.pricing?.valueMonthly},isAddOnPricedOneOff(e){const t=this.getAddOnById(e);return!!t?.pricing?.valueOneOff},isAddOnSelected(e){return this.selectedAddOnIds.includes(e)},isAddOnVisible(e){const t=this.addOns.filter((e=>e.isVisible)).map((e=>e.id)).indexOf(e);let i=t>-1;return i&&this.showToggle&&!this.showAll&&(i=this.limitedAmountOfItemsValue>t),i},hasVisibleAddOns(){return void 0!==this.addOns.find((e=>e.isVisible))},getAddOnsByPredefinedAddOnIds(){const e=e=>this.predefinedAddOnIds.includes(e.id),t=this.productData?.data?.subCatalog[0]?.productFamily?.map((t=>[...t.addon.filter(e),...t.product.filter(e)])),i=[].concat(...t);return this.sortByPredefinedIdOrder(i)},getEnabledAddOnsLength(){return this.addOns.filter((e=>this.predefinedAddOnIds.includes(e.id)&&!0!==e.isDisabled)).length},getAddOnById(e){return this.addOns.find((t=>e===t.id))},sortByPredefinedIdOrder(e){const t=this.predefinedAddOnIds;return e.sort(((e,i)=>t.indexOf(e.id)-t.indexOf(i.id)))}}}},2452:function(e,t,i){i.r(t),i.d(t,{default:function(){return u}});var s=i(9335),r=i(1895),a=i(3167),o=i(2661),d=i(7877);const n="ff-postal-checkbox0",c="ff-billing-checkbox0",l="ff-technical-checkbox0";var u={name:"z-b2b-checkout-form",props:{zipcodeLabel:{type:String,required:!0},houseNumberLabel:{type:String,required:!0},extensionLabel:{type:String,required:!0},streetLabel:{type:String,required:!0},cityLabel:{type:String,required:!0},uuidPrefix:{type:String,required:!0},errorTitle:{type:String,required:!0},errorMessage:{type:String,required:!0},isAuthor:{type:Boolean,default:!1,required:!1},enableDdmSuccessPurchaseScript:{type:Boolean,default:!1,required:!1}},data(){return{ibanComponent:{},kvkCheckerComponent:{},kvkCheckerLoaded:!1,basketItems:null,form:null,uuid:"",postalCheckbox:null,billingCheckbox:null,technicalCheckbox:null,showPostalFields:!1,showBillingFields:!1,showTechnicalFields:!1}},computed:{...(0,s.mapState)("addressData",["address"]),...(0,s.mapState)("targeting",["user"]),...(0,s.mapState)("bundleBuilder",["referrer"]),...(0,s.mapGetters)("addressData",["zipcode"]),userDataLoaded(){return!!this.zipcode&&!!this.address.ID&&this.isSoho},orderBundle(){const{id:e,name:t,pricing:i}=this.basketItems?.orderBundle||{};return{id:e,name:t,price:i?.valueMonthly}},monthlyProducts(){return this.basketItems?.monthlyProducts?.map((({id:e,name:t,pricing:i,priceZeroText:s})=>({id:e,name:t,price:i?.valueMonthly,priceZeroText:s})))},oneOffProducts(){return this.basketItems?.oneOffProducts?.map((({id:e,name:t,pricing:i,priceZeroText:s})=>({id:e,name:t,price:i?.valueOneOff,priceZeroText:s})))},discounts(){return this.basketItems?.orderBundle?.pricing?.discounts?.filter((({type:e})=>"promo-longevity"!==e&&"promo-bundleprice"!==e))},contractDuration(){return this.basketItems?.orderBundle?.pricing?.bindingPeriod||this.basketItems?.orderBundle?.pricing?.discounts.find((e=>"promo-bundleprice"===e.type.toLowerCase()))?.durationValue},basketItemsString(){const{orderBundle:e,monthlyProducts:t,oneOffProducts:i,discounts:s,contractDuration:r}=this;return JSON.stringify({orderBundle:e,monthlyProducts:t,oneOffProducts:i,discounts:s,contractDuration:r})},ddmProductArray(){const{bindingPeriod:e,promoValueMonthly:t,valueMonthly:i,discountDuration:s}=this.basketItems?.orderBundle?.pricing||{},{id:r,name:a}=this.basketItems?.orderBundle||{};return[{binding_months:e,brand:"ziggo",category:this.productCategory,id:r,is_package:!0,market:"b2b",name:a,pcms:"",price_monthly_discount:t,price_monthly_regular:i,price_setup:0,promo_period_months:s,quantity:1,type:"main-product"}]},productCategory(){let e="";const{products:t}=this.basketItems?.orderBundle||{};return t?.forEach((t=>{"1000"===t&&(e+="catv-")})),t?.forEach((t=>{"10"!==t&&"20"!==t||(e+="dtv-")})),e+="int",t?.forEach((t=>{"1801"===t&&(e+="-tel")})),`b2b/b2c-transfer/main-product/${e}`},revenue(){const{discounts:e,bindingPeriod:t,valueMonthly:i}=this.basketItems?.orderBundle?.pricing||{};let s=0;return e?.forEach((({discountInEuro:e,durationValue:t})=>{s+=e*t})),i*t-s},isSoho(){return"b2b soho"===this.basketItems?.orderBundle?.subcatalog?.toLowerCase()},checkoutDescription(){return this.isSoho?"b2c-b2b-transfer":"b2b-internet-pro"}},beforeMount(){d.A.$on("basket:items",this.setBasketItems),d.A.$on("kvk-checker:loaded",this.handleKvkCheckerLoaded)},mounted(){this.init()},beforeUnmount(){this.removeSubscriptions()},methods:{...(0,s.mapActions)("targeting",["ddmGet","ddmTrigger"]),init(){this.uuid=r.A.createUuid(),o.A.getWindow().setTimeout(this.checkForUserDataLoaded,1e3),this.enableDdmSuccessPurchaseScript?a.A.isDataInLocalStorage("ziggoPurchaseDdmData",!1)&&(this.triggerDdmPurchaseEvent(),this.removeLocalZiggoPurchaseData()):this.addEventListenerToForm()},addEventListenerToForm(){this.form=this.$el.closest("form"),this.form.addEventListener("submit",this.handleFormSubmit)},async addEventListenerToProFields(){await this.$nextTick(),this.postalCheckbox=this.$el.querySelector(`#${n}`),this.postalCheckbox&&this.postalCheckbox.addEventListener("change",this.handleChangeEvent),this.billingCheckbox=this.$el.querySelector(`#${c}`),this.billingCheckbox&&this.billingCheckbox.addEventListener("change",this.handleChangeEvent),this.technicalCheckbox=this.$el.querySelector(`#${l}`),this.technicalCheckbox&&this.technicalCheckbox.addEventListener("change",this.handleChangeEvent)},handleChangeEvent(e){switch(e.target.id){case n:this.showPostalFields=!this.showPostalFields;break;case c:this.showBillingFields=!this.showBillingFields;break;case l:this.showTechnicalFields=!this.showTechnicalFields}},async prefillCustomerIdAndIban(){await this.ddmGet({key:"user.pii"}),this.user?.pii?.party_id&&d.A.$emit("customer-id-prefilled",this.user?.pii.party_id),this.user?.pii?.bank_account_number&&(this.ibanComponent=this.getRootRef("ff-ibanfield"),this.ibanComponent.val=this.user?.pii.bank_account_number,this.ibanComponent.formatInput())},setBasketItems(e){this.basketItems=e},handleKvkCheckerLoaded(){this.kvkCheckerLoaded=!0,this.triggerDdmCheckoutEvent(),this.isSoho&&this.prefillCustomerIdAndIban()},handleFormSubmit(e){this.kvkCheckerComponent=this.getRootRef("z-kvk-checker"),this.kvkCheckerComponent?.kvkItems.length?this.setLocalZiggoPurchaseData():(e.preventDefault(),this.kvkCheckerComponent.validateAndSubmit())},triggerDdmCheckoutEvent(){this.ddmTrigger({key:"ecommerce.checkout",value:{action:"checkout",checkout_descr:this.checkoutDescription,market:"b2b",payment_method:"ideal",products:this.ddmProductArray,revenue:this.revenue,step_name:"overview",step_nr:1}})},triggerDdmPurchaseEvent(){this.ddmTrigger({key:"ecommerce.purchase",value:a.A.getLocalData("ziggoPurchaseDdmData")})},setLocalZiggoPurchaseData(){a.A.setLocalData("ziggoPurchaseDdmData",{action:"purchase",checkout_descr:this.checkoutDescription,transaction_id:this.uuidPrefix+this.uuid,market:"b2b",products:this.ddmProductArray,revenue:this.revenue,shipping:null,tax:null})},removeLocalZiggoPurchaseData(){a.A.removeLocalData("ziggoPurchaseDdmData")},checkForUserDataLoaded(){this.userDataLoaded||this.triggerDdmCheckoutErrorEvent()},triggerDdmCheckoutErrorEvent(){this.ddmTrigger({key:"fe.ga_event",value:{type:"system_event",interaction:{event:"checkout_error",type:"impression",description:this.checkoutDescription,text:this.errorMessage?.toLowerCase(),status:void 0,detail:this.ddmProductArray},component:{technical_name:this.$options.name,meaningful_name:"b2b-checkout-form",location:"residential-checkout_details",id:this.uuidPrefix+this.uuid,type:"form"}}})},getRootRef(e){return this.$root.$refs[e]},removeSubscriptions(){d.A.$off("basket:items",this.setBasketItems),d.A.$off("kvk-checker:loaded",this.handleKvkCheckerLoaded),this.form.removeEventListener("submit",this.handleFormSubmit),this.postalCheckbox.removeEventListener("change",this.handleChangeEvent),this.billingCheckbox.removeEventListener("change",this.handleChangeEvent),this.technicalCheckbox.removeEventListener("change",this.handleChangeEvent)}},template:'<div class="z-b2b-checkout-form"> <template v-if="isAuthor && enableDdmSuccessPurchaseScript"> <div>Enabled the ddm script for success purchase</div> </template> <template v-if="!enableDdmSuccessPurchaseScript"> <template v-if="isAuthor || userDataLoaded"> <slot name="kvk-checker"></slot> </template> <template v-if="isAuthor || kvkCheckerLoaded"> <div class="z-b2b-checkout-form__section z-b2b-checkout-form__kvk-checker"> <slot name="digital-invoice" v-if="kvkCheckerLoaded"></slot> </div> <div class="z-b2b-checkout-form__section"> <slot name="delivery-address"></slot> <div class="z-b2b-checkout-form__address-row"> <vfz-input :default-value="zipcode" :label="zipcodeLabel" name="ff-zipcode" id="zipcode" readonly="readonly"> </vfz-input> <vfz-input :default-value="address.HOUSENUMBER" :label="houseNumberLabel" name="ff-houseNumber" id="houseNumber" readonly="readonly"> </vfz-input> <vfz-input :default-value="address.CPRHOUSEEXTENSION" :label="extensionLabel" name="ff-extension" id="extension" readonly="readonly"> </vfz-input> </div> <vfz-input :default-value="address.STREET" :label="streetLabel" name="ff-street" id="street" readonly="readonly"> </vfz-input> <vfz-input :default-value="address.CITY" :label="cityLabel" name="ff-city" id="city" readonly="readonly"> </vfz-input> </div> <template v-if="isSoho"> <div class="z-b2b-checkout-form__section"> <slot name="soho"></slot> </div> </template> <div data-test-hidden-fields="basketItemsAndUuid"> <input type="hidden" name="ff-basketItems" :value="basketItemsString"> <input type="hidden" name="ff-hiddenField" :value="uuidPrefix + uuid"> </div> <div class="z-b2b-checkout-form__required-message"> <slot name="required-message"></slot> </div> </template> <div class="z-b2b-checkout-form__error" v-if="!userDataLoaded"> <h4>{{ errorTitle }}</h4> <p class="z-b2b-checkout-form__error-message vfz-text--branded">{{ errorMessage }}</p> </div> <div class="z-b2b-checkout-form__section z-b2b-checkout-form__buttons"> <div class="button btn-wrap btn-wrap--sm--fullwidth btn-wrap--lg--left" v-if="(isAuthor || referrer)"> <a data-test="resi-button-back" class="vfz-spacing-top vfz-spacing-bottom btn btn-outline-dark ddm-dap-a-button" :href="referrer"> <span aria-hidden="true" class="icon icon-chevron-left"></span> <span class="resi-button-title">Terug</span> </a> </div> <div class="button btn-wrap btn-wrap--sm--fullwidth btn-wrap--lg--right" v-if="isAuthor || (kvkCheckerLoaded)"> <slot name="submit-button"></slot> </div> </div> </template> </div> '}},2250:function(e,t,i){i.r(t),i.d(t,{default:function(){return T}});var s=i(9335),r=i(8221),a=i.n(r),o=i(7877),d=i(417),n=i(2661),c=i(3201),l=i(6937),u=i(3167);var h={ddmLoaded:"function"==typeof n.A.getWindow()._ddm?.get,isReady:!1,timeoutTime:3e3,readyEvent:"blueriq.custumer-information.ready",updateEvent:"blueriq.custumer-information.updated",pricingSegmentReady:"targeting.pricingsegment.ready"},p=i(9286);const m=e=>e.sort();var b=e=>{const t=new Set,i={Television:"dtv",Internet:"int",Telephone:"tel"};return Object.values(e).forEach((e=>{const s=i[e.productFamily];void 0!==s&&t.add(s)})),m([...t]).join("-")},g=e=>{const t=e.toLowerCase();return"b2c"===t?"b2c":t.replace("/","|")},f=(e,t,i)=>{p.A.ddmTrigger(`${t}.${i}`,{action:i,products:e})};var v=e=>e&&e.startsWith("s_"),k={data(){return{targetSegment:""}},computed:{...(0,s.mapState)("addressData",["availability"])},beforeMount(){this.setTargetSegment()},methods:{...(0,s.mapActions)("targeting",["ddmTrigger"]),getWindowLocationPathname(){return n.A.getWindow().location.pathname},getActiveProducts(e){return Object.entries(e).reduce(((e,t)=>{const i=t[0],s=t[1];return s.isActive?{...e,[i]:s}:e}),{})},getValueOfBundleKey(e){return void 0!==e?e:null},getValueActivation(e,t){return void 0!==e?e:this.getValueOfBundleKey(t)},formatIncludedProducts(e){return Object.values(e).map((e=>({external_offerid:e.externalOfferId,id:e.id,name:e.name?e.name.toLowerCase():"",product_family:e.productFamily?e.productFamily.toLowerCase():"",product_type:e.productType,sub_type:e.subType})))},transformItemsForProductEvents(e){const t=e.find((({sku:e})=>v(e)));return Object.entries(e).map(((e,i)=>{const{id:s,sku:r,contractDuration:a,externalOfferId:o,subcatalog:d,name:n,productDetailPage:c,products:l,pricing:u,bundleType:h}=e[1],p=h?"bundle":"product";if(r===t?.sku&&"product"===p)return null;let m=[];"Bundle-standard"!==h&&"Bundle-customized"!==h||!this.isEshopCheckout||(m=[s]);const f=g(d),v=l?this.getActiveProducts(l):[],k=l?b(v):[];let y={name:n,type:p,id:r||s.toString(),category:`${f}/${this.targetSegment}/${p}/${k}`,brand:"ziggo",external_offerid:o,list:this.getWindowLocationPathname(),price:this.getValueOfBundleKey(u.valueMonthly),position:i+1,quantity:1,market:g(d),details:{contract_duration:a||this.getValueOfBundleKey(u.bindingPeriod),discount_descr:"",price_monthly_promo:this.getValueOfBundleKey(u.promoValueMonthly),price_monthly_regular:this.getValueOfBundleKey(u.valueMonthly),price_oneoff:this.getValueOfBundleKey(u.valueOneOff),price_setup:this.getValueActivation(u.promoValueActivation,u.valueActivation),promo_duration:this.getValueOfBundleKey(u.discountDuration),promo_type:"",promo_segment:"",pdp_url:c,rgu_count:k,included_products:l?this.formatIncludedProducts(v):[]}};return m.length>0&&(y={...y,eshop_ids:m}),t&&"bundle"===p&&(y=this.enrichObjectForVodafone(y,t)),y})).filter((e=>!!e))},enrichObjectForVodafone(e,t){const{details:i,id:s,market:r,name:a,price:o}=e;return{...e,id:`${s}-${t.sku}`,name:`${a} & ${t.name}`,category:`${r}/acq/main-product/dtv-int-mob`,mobtype:"sim-only",mobtier:t.name,price:o+t.pricing.valueMonthly,details:{...i,price_monthly_promo:i.price_monthly_promo+t.pricing.promoValueMonthly,price_monthly_regular:i.valueMonthly+t.pricing.valueMonthly}}},sendProductDdmEvent(e,t){if(!e||0===e.length)return;const i=this.transformItemsForProductEvents(e);f(i,"ecommerce",t)},setTargetSegment(){p.A.ddmGet("targeting._vzt","").then((e=>{this.targetSegment=e}))}}};var y=k,_=i(5129),P=i(6881);var S=(e,t="https://shop.ziggo.nl/bestellen/direct")=>{const i=`addressId=${e?.PAID}`,s=e?.IDS?.filter((e=>e))||[],r=s.map(((e,t)=>`products[${t}][fixedSku]=${e}`)),a=s.some((e=>v(e)))?"&promos[0]=segmented_fmc":"";return`${t}?${i}&${r.join("&")}${a}`},C=i(9176);const B="/zakelijk/stel-samen/residential-checkout",I="/zakelijk/internet/pro/bestellen/checkout",z="b2c",D="b2bSmall",A="b2bSoHo",w="b2b",O="b2c";var L={mixins:[y,P.A],props:{isCrossedOutProduct:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},catalog:{type:String,required:!0},alternativeCheckoutLink:{type:String,required:!1,default:""},countdownAudience:{type:String,required:!1,default:"all"},emptyBasketMessage:{type:String,required:!1,default:""},errorMessage:{type:String,required:!1,default:""},loadingMessage:{type:String,required:!1,default:""},showEuroSign:{type:Boolean,required:!1,default:!1},basketHeader:{type:String,required:!1,default:""},activationCostCustomerLabel:{type:String,required:!1,default:"Eenmalige kosten"},footerLinkText:{type:String,required:!1,default:""},footerLink:{type:String,required:!1,default:""},isAuthor:{type:Boolean,required:!1,default:!1},showTaxByline:{type:Boolean,required:!1,default:!1},showTerms:{type:Boolean,required:!1,default:!1},taxByline:{type:String,required:!1,default:""},termsLinkText:{type:String,required:!1,default:""},termsLink:{type:String,required:!1,default:""},showContractDurationLabel:{type:Boolean,required:!1,default:!1},contractDurationLabel:{type:String,required:!1,default:""},hasPredefinedProduct:{type:Boolean,required:!1,default:!1},predefinedProducts:{type:String,required:!1,default:""},forceDesktopView:{type:Boolean,required:!1,default:!1},forceMobileView:{type:Boolean,required:!1,default:!1},forceSideBasketOnDesktop:{type:Boolean,required:!1,default:!1},hideForCustomers:{type:Boolean,required:!1,default:!1},hideTitles:{type:Boolean,required:!1,default:!1},eshopCheckoutBaseUrl:{type:String,required:!1,default:null}},data(){return{basketItems:[],checkoutButtonIsDisabled:!1,combinedOrderItems:[],ddmDebounceDelay:1e3,debounceTime:300,checkoutUrl:"",hardware:{},initializedDdmEvent:!1,isCustomer:!1,isLoadingDelay:1e3,isLoading:!0,loaderTimeout:null,orderBundle:{bundleType:"",externalOfferId:"",id:"",name:"",pricing:{},productDetailPage:"",products:[],promoShort:"",subcatalog:"",uspsList:[]},orderProducts:[],orderProcessLink:"",paid:"",predefinedProductIds:this.getPredefinedProductIds(),priceMonthly:0,priceOnce:0,priceDiscounts:[],selectedProducts:[],subCatalog:"",activationCosts:{},addressDataCheckout:{},showBasket:!0,isEshopCheckout:!1}},computed:{...(0,s.mapState)("bundleBuilder",["contractDuration","productData","selectedItems","userDeclinedItems","hasError","availableItems"]),...(0,s.mapGetters)("bundleBuilder",[{isLoadingState:"isLoading"},"isInitializingProductCardGroups","isProductDetailPage"]),...(0,s.mapState)("addressData",["address","availability"]),...(0,s.mapGetters)("addressData",["gigaAvailable"]),...(0,s.mapState)("targeting",["targeting","sources","user"]),...(0,s.mapGetters)("targeting",["ziggoCustMarket","customerInformation"]),isBasketEmpty(){return""===this.orderProcessLink||void 0===this.orderProcessLink},blueriqEndpoint(){return this.catalog===z?l.A.b2c.calc:this.catalog===D?l.A.b2bSmall.calc:l.A.b2bSoho.calc},bundleHasUsps(){return void 0!==this.orderBundle.uspsList},discounts(){return this.orderBundle.pricing?this.orderBundle.pricing.discounts:[]},oneOffCostsIsVisible(){if(this.orderProducts){if(this.orderProducts.find((e=>e.pricing&&"number"==typeof e.pricing.valueOneOff)))return!0}if(this.orderBundle.pricing&&this.orderBundle.pricing.discounts){if(this.orderBundle.pricing.discounts.find((e=>e.isVisible)))return!0}return!!this.activationCosts?.isVisible},monthlyProducts(){return this.orderProducts.filter((e=>void 0!==e.pricing.valueMonthly))},oneOffProducts(){return this.orderProducts.filter((e=>void 0!==e.pricing.valueOneOff))},checkoutButtonIsDisabledState(){return this.isDisabled||this.checkoutButtonIsDisabled},priceDiscount(){if(!this.priceDiscounts[0])return"";const{discount:e,endMonth:t}=this.priceDiscounts[0];return e>0?`Nu ${t} ${1===t?"maand":"maanden"}`:""},localContractDuration(){return this.readOnly?this.orderBundle?.pricing?.discounts?.find((e=>"promo-bundleprice"===e.type.toLowerCase()))?.durationValue:this.contractDuration}},watch:{productData({eventType:e}){this.newBasketRequest(e)},"availability.PAID":function(e){e&&this.getEshopCheckoutUrl()},orderProcessLink(){this.getEshopCheckoutUrl()},availableItems(){this.fetchData()},async gigaAvailable(){await this.fetchData()},"targeting.customOffer":async function(){await this.fetchData(),this.newBasketRequest("add_to_cart")},"sources.user_input.cust_status_ziggo":function(){this.handleCustStatusZiggo(),this.setCheckoutStatusAndUrl()},isLoadingState(e){e?this.loaderTimeout=n.A.getWindow().setTimeout((()=>{this.isLoading=!0}),this.isLoadingDelay):(this.isLoading=!this.selectedBundle,n.A.getWindow().clearTimeout(this.loaderTimeout))},isInitializingProductCardGroups(e){e||this.init()},ziggoCustMarket(e){this.hideForCustomers&&(this.showBasket=this.catalog===A&&e!==w||this.catalog===z&&e!==O)},subCatalog(){this.setCheckoutStatusAndUrl()},selectedBundle(e){this.isLoading=!e}},created(){this.debouncedSendProductToDdmEvent=a()((e=>{this.sendProductDdmEvent(this.combinedOrderItems,e)}),this.ddmDebounceDelay),this.setCheckoutStatusAndUrl()},mounted(){this.setPageType(_.Ay.getPageType()),this.isLoading=!0,(this.isAuthor||this.isProductDetailPage)&&this.init()},methods:{...(0,s.mapActions)("bundleBuilder",["fetchData","addProduct","removeProduct","setPageType","toggleProduct","removeUserDeclinedItem"]),...(0,s.mapActions)("targeting",["ddmGet","ddmListen"]),init(){this.readOnly||!this.selectedItems?.length&&!this.isAuthor||this.fetchData(),this.hasPredefinedProduct&&""!==this.predefinedProducts&&this.getTargetedPredefinedProductData(),this.debouncedNewBasketRequest=a()(this.newBasketRequest,this.debounceTime),this.readOnly&&(this.isLoading=!1,this.retrieveFromStorage()),this.triggerDdmActions()},triggerDdmActions(){this.ddmListen({key:h.updateEvent,callback:this.newBasketRequest}),this.ddmGet({key:"user.custMarket.ziggo"}),this.ddmGet({key:"targeting.customOffer"}),this.ddmGet({key:"sources.user_input.cust_status_ziggo"}),this.ddmGet({key:"user.products.ziggo.hardware",defaultValue:{modem_name:"",modem_model:"",stb_name:""}})},listenForSegmentChange(){h.ddmLoaded&&this.ddmListen(h.updateEvent,this.newBasketRequest)},handleCustStatusZiggo(){this.isCustomer=this.sources.user_input.cust_status_ziggo===C.A.PROBCUST,this.newBasketRequest("add_to_cart")},retrieveFromStorage(){const e=u.A.getLocalData("ziggoBasketItems"),t=u.A.getLocalData("ziggoBasketSummary");e&&this.setBasketOrder(e),t&&this.setBasketSummary(t);const i={orderBundle:this.orderBundle,monthlyProducts:this.monthlyProducts,oneOffProducts:this.oneOffProducts};o.A.$emit("basket:items",i)},isSelectedProduct(e){return this.selectedProducts.findIndex((t=>t.id===e))>=0},addToBasket(e,t=!0){return this.isSelectedProduct(e)?Promise.resolve():(this.cancelPreviousRequest(),this.setCancelToken(),this.selectedProducts.push({id:e,isSelectedItem:t}),o.A.$emit("add-product-to-basket",e,t),this.initializedDdmEvent?this.newBasketRequest("add_to_cart"):(this.initializedDdmEvent=!0,this.newBasketRequest("detail")))},async removeFromBasket(e,t=!0){t&&await this.removeProduct([e]),o.A.$emit("product-from-basket-deleted",e)},newBasketRequest(e){if(this.readOnly)return;o.A.$emit("new-basket-request-start");const t=this.selectedProducts.map((e=>({id:e.id})));return u.A.setLocalData("ziggoBasketSelectedItems",t),this.checkoutButtonIsDisabled=!1,this.handleBasketResponse(this.productData,e)},handleBasketResponse(e,t){const i=e.data;if(i?.order){const e=i.order,s=i.subCatalog;this.hardware=i.hardware,this.setBasketSummary(e),this.setBasketOrder(s),u.A.setLocalData("ziggoBasketItems",s),o.A.$emit("new-basket-request-success",{responseData:i}),t&&this.debouncedSendProductToDdmEvent(t)}},setBasketSummary(e){const{orderProcessLink:t,period:i,summaryOrderLines:s}=e.summary,[r,a]=s;this.orderProcessLink=t,this.priceMonthly=r.value,this.promoPriceMonthly=i[0].price,this.priceOnce=a.value,this.priceDiscounts=i,u.A.setLocalData("ziggoBasketSummary",e)},setBasketOrder(e){this.subCatalog=e[0].title,this.orderProducts=[],this.combinedOrderItems=[],this.orderBundle={},e.forEach((e=>{this.getOrderBundle(e),this.getOrderProducts(e)}))},getPredefinedProductIds(){return this.predefinedProducts.split(",").map((e=>e.split("/").pop()))},getTargetedPredefinedProductData(){const e=this.predefinedProductIds;h.ddmLoaded&&!this.isAuthor?this.ddmListen({key:h.readyEvent,callback:()=>{e.forEach((e=>{this.addProduct([{id:e,isSelectedItem:!1}]),this.addToBasket(e,!1)}))}}):e.forEach((e=>{this.addProduct([{id:e,isSelectedItem:!1}]),this.addToBasket(e,!1)}))},isPredefinedProduct(e){return this.predefinedProductIds.includes(e)},getPromoShortForBundle(){const e=this.orderBundle.pricing.discounts,t=e?.find((e=>"promo-bundleprice"!==e.type));return t?.name||""},getOrderBundle(e){e.productFamily.forEach((e=>{e.bundle.forEach((e=>{e.isSelected&&(this.orderBundle.bundleType=e.bundleType,this.orderBundle.contractDuration=Number(this.localContractDuration),this.orderBundle.externalOfferId=e.externalOfferId,this.orderBundle.id=e.id,this.orderBundle.name=e.name,this.orderBundle.isSelected=e.isSelected,this.orderBundle.pricing=e.pricing,this.orderBundle.productDetailPage=e.productDetailPage,this.orderBundle.products=e.includedItems,this.orderBundle.promoShort=e.basketPromoShort||this.getPromoShortForBundle(),this.orderBundle.sku=e.sku,this.orderBundle.subcatalog=this.subCatalog,this.orderBundle.uspsList=e.uspsList,this.combinedOrderItems.push(this.orderBundle),this.setActivationCosts(e.pricing))}))})),this.orderBundle.id&&o.A.$emit("basket-items-loaded")},activationCostsIsVisible(e,t){return!(!e||!t)&&e===t},setActivationCosts(e){const{promoValueActivation:t,valueActivation:i}=e,s=this.activationCostsIsVisible(t,i);this.activationCosts={name:this.activationCostCustomerLabel,isVisible:s,pricing:{promoValueActivation:t,valueActivation:i,discounts:[]}}},getOrderProducts(e){e.productFamily.forEach((e=>{e.product.forEach((t=>{if("Alternative"!==t.subType&&t.isSelected&&!this.productIsInActiveBundle(t.id)){const i=this.isPredefinedProduct(t.id),s=this.isInSelectedItems(t.id);this.addOrderProduct(t,i,s,e.title)}})),e.addon.forEach((t=>{if(t.isSelected||this.userDeclinedItems.includes(t.id)&&this.isCrossedOutProduct){const i=this.isPredefinedProduct(t.id),s=this.isInSelectedItems(t.id);this.addOrderProduct(t,i,s,e.title)}}))}))},productIsInActiveBundle(e){return!!this.orderBundle.products&&this.orderBundle.products.includes(e)},isInSelectedItems(e){return!!this.selectedItems.find((t=>t.id===e))},addOrderProduct(e,t=!1,i=!0,s=""){const r={id:e.id,sku:e.sku,name:e.name,products:e.addOns,externalOfferId:e.externalOfferId,subcatalog:this.subCatalog,productDetailPage:e.productDetailPage,promoShort:e.basketPromoShort,pricing:e.pricing?e.pricing:0,subtitlesList:e.subtitlesList,isDeletable:e.isDeletable,isSelected:e.isSelected,isVisible:e.isVisible,isPredefined:t,isSelectedItem:i,productFamily:s,priceZeroText:e.priceZeroText};this.orderProducts.push(r),this.combinedOrderItems.push(r)},setCheckoutStatusAndUrl(){switch(this.catalog){case z:this.isEshopCheckout=!0;break;case D:this.isEshopCheckout=!1,this.checkoutUrl=this.alternativeCheckoutLink||I;break;case A:this.isCustomer?(this.isEshopCheckout=!1,this.checkoutUrl=this.alternativeCheckoutLink||B):this.isEshopCheckout=!0;break;default:this.isEshopCheckout=!1,this.checkoutUrl=""}},getEshopCheckoutUrl(){if(!this.isEshopCheckout||!this.orderProcessLink)return;if(this.checkoutButtonIsDisabled=!1,!this.availability.PAID)return;this.checkoutButtonIsDisabled=!0;const e=this.orderProcessLink?.slice(8).split("+"),t={PAID:this.availability.PAID,IDS:[...new Set(e?.filter((e=>e)))]};this.checkoutButtonIsDisabled=!1,this.checkoutUrl=S(t,this.eshopCheckoutBaseUrl)}}};var T={name:"z-basket",mixins:[L,i(9669).A],data(){const e=n.A.getWindow().innerWidth<d.A.md;return{collapsed:e,debounceTime:250,isMobile:e,isDisabled:!1}},computed:{...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapGetters)("addressData",["connectionTypeSupported","internetAvailable"]),...(0,s.mapGetters)("bundleBuilder",["selectedBundle"]),...(0,s.mapGetters)("targeting",["ziggoCustStatus"]),isValidInternetAvailable(){return this.availabilityDataIsFetched&&this.internetAvailable&&this.connectionTypeSupported},showFooterLink(){return!this.readOnly&&this.isMobile&&this.footerLink&&!!this.footerLinkText},showDesktopFooterLink(){return!this.isMobile&&this.footerLink&&!!this.footerLinkText},showEmptyBasketMessage(){return!this.isLoading&&this.isBasketEmpty&&this.isMobile},showMobileBasket(){return!this.isLoading&&this.isMobile&&!this.isBasketEmpty},showDesktopBasket(){return!this.isLoading&&!this.readOnly&&!this.isMobile}},watch:{isValidInternetAvailable(e){this.setBasketDisabledState(!e)},ziggoCustStatus(){this.retainOrRemoveCountdownInSlots()}},mounted(){this.setBasketDisabledState(!this.isValidInternetAvailable),o.A.$on("add-product-to-basket",this.checkMobile),o.A.$on("basket-items-loaded",this.checkMobile),this.forceMobileView?(this.isMobile=!0,this.collapsed=!0):this.forceDesktopView?this.isMobile=!1:this.initStickyBasket()},beforeUnmount(){n.A.getWindow().removeEventListener("resize",this.debouncedResize),o.A.$off("add-product-to-basket",this.checkMobile),o.A.$off("basket-items-loaded",this.checkMobile)},methods:{...(0,s.mapActions)("targeting",["ddmTrigger"]),initStickyBasket(){this.debouncedResize=a()(this.handleResizeEvent,this.debounceTime),this.handleResizeEvent(),n.A.getWindow().addEventListener("resize",this.debouncedResize)},handleResizeEvent(){this.checkMobile(),this.collapse()},checkMobile(){if(!this.showBasket)return;const e=n.A.getWindow().innerWidth<d.A.md;if(this.forceSideBasketOnDesktop)this.isMobile=e;else{const t=this.$refs.defaultBasket.clientHeight;let i=e||t<70;i||(i=n.A.getWindow().innerHeight-100<=t,i&&this.ddmTriggerBasketOverflow()),this.isMobile=i}},setBasketDisabledState(e){this.isAuthor?this.isDisabled=!1:this.isDisabled=e},collapse(){this.collapsed=this.isMobile,c.A.enableScrolling()},toggleCollapsible(){this.collapsed=!this.collapsed,this.forceMobileView||(this.collapsed?c.A.enableScrolling():c.A.disableScrolling())},ddmTriggerBasketOverflow(){this.ddmTrigger({key:"basket.overflow",value:{category:"logs",action:"basket.overflow",send_to_ga:!0}})},retainOrRemoveCountdownInSlots(){const e=this.$el.querySelector(".countdown-v2");e&&([this.ziggoCustStatus,"all"].includes(this.countdownAudience)?e.style.display="block":e.style.display="none")}},template:'<div data-test="z-basket" class="z-basket vfz-shadow--xs" :class="[ {\n        \'z-basket--sticky-container\': isMobile,\n        \'z-basket--disabled\': isDisabled,\n        \'z-basket--desktop-view\': forceDesktopView,\n    } ]" v-show="showBasket"> <div ref="defaultBasket" id="basket-root" :inert="isDisabled && !isAuthor" class="z-basket__root"> <vfz-height-transition id="basket-transition-element" aria-labelledby="basket-root" class="basket-transition-element-body z-basket__transition"> <div v-show="!collapsed" v-cloak> <div class="z-basket__transition-wrapper"> <header class="z-basket__top"> <h2 class="z-basket__header" id="basket-header"> <span class="z-basket__header-text"> <span class="z-basket__header-icon icon icon-cart" aria-hidden="true"></span> <span class="z-basket__header-title">{{ basketHeader }}</span> </span> <a class="z-basket__secondary-cta" :href="footerLink" v-if="showFooterLink"> <span class="z-basket__secondary-cta-icon icon icon-chevron-right" aria-hidden="true"></span> {{ footerLinkText }} </a> </h2> <button type="button" class="z-basket__mobile-header-icon" aria-controls="basket-transition-element" :aria-expanded="!collapsed ? \'true\' : \'false\'" v-if="isMobile" @click.prevent="toggleCollapsible"> <span class="icon icon-close" aria-hidden="true"></span> <span class="sr-only">Sluit je bestelling</span> </button> </header> <div class="z-basket__body"> <div class="z-basket__inner-body"> <div class="z-basket__overlay z-basket__overlay--body" v-show="!isMobile && isLoading"> <span class="sr-only">Laden...</span> <vfz-image class="z-basket__spinner" src="/content/dam/nlgeneric/ziggo/generic-assets/loader.gif" alt=""> </vfz-image> <div class="z-basket__loading-message">{{ loadingMessage }}</div> </div> <div class="z-basket__empty" v-if="isBasketEmpty"> <p class="z-basket__empty-message"> {{ emptyBasketMessage }} </p> </div> <div class="z-basket__selected-products"> <div class="z-basket__monthly-container" v-if="orderBundle.id"> <h2 class="z-basket__bundle-section-title" v-if="!hideTitles">Maandelijks</h2> <div class="z-basket__list-item" :class="{\'z-basket__list-item--margin-spacing\' : hideTitles}" v-if="orderBundle.id"> <z-basket-list-item-row :read-only="readOnly" type="bundle" :product="orderBundle" :key="\'item-row-monthly-product-\' + orderBundle.id" :show-euro-sign="showEuroSign"> </z-basket-list-item-row> </div> <div class="z-basket__list-item" v-for="(product, index) in monthlyProducts"> <z-basket-list-item-row v-if="product.isVisible" :read-only="readOnly" type="monthly" :product="product" :show-euro-sign="showEuroSign" :key="\'item-row-monthly-product-\' + product.id" @remove-item-from-basket="removeFromBasket"> </z-basket-list-item-row> </div> </div> <div class="z-basket__once-container" :class="{\'z-basket__once-container--no-border-top\' : hideTitles}" v-if="oneOffCostsIsVisible"> <h2 class="z-basket__bundle-section-title" v-if="!hideTitles">Eenmalig</h2> <div class="z-basket__list-item" :class="{\'z-basket__list-item--margin-spacing\' : hideTitles}" v-for="(product, index) in oneOffProducts"> <z-basket-list-item-row v-if="product.isVisible" :read-only="readOnly" type="one-off" :is-crossed-out-product="isCrossedOutProduct.toString()" :product="product" :show-euro-sign="showEuroSign" :key="\'item-row-one-off-product-\' + product.id" @remove-item-from-basket="removeFromBasket"> </z-basket-list-item-row> </div> <div class="z-basket__list-item" v-for="(discount, index) in discounts"> <z-basket-list-item-row :read-only="readOnly" v-if="discount.isVisible" type="discount" :product="discount" :show-euro-sign="showEuroSign" :key="\'item-row-one-off-product-\' + discount.id" @remove-item-from-basket="removeFromBasket"> </z-basket-list-item-row> </div> <div class="z-basket__list-item" v-if="activationCosts.isVisible"> <z-basket-list-item-row :read-only="readOnly" type="activation" :product="activationCosts" :show-euro-sign="showEuroSign" @remove-item-from-basket="removeFromBasket"> </z-basket-list-item-row> </div> </div> </div> <div class="z-basket__summary" :class="{\'z-basket__summary--top-spacing\':hideTitles}" v-if="!isBasketEmpty"> <h2 class="z-basket__bundle-section-title" v-if="!hideTitles">Totaal</h2> <z-basket-price-detail class="z-basket__list-item" :class="{\'z-basket__list-item--margin-spacing\':hideTitles}" v-for="(period, index) in priceDiscounts" :key="index + JSON.stringify(priceDiscounts)" :period="period" :is-last-discount="priceDiscounts.length === (index + 1)" :show-euro-sign="showEuroSign"> </z-basket-price-detail> <div class="z-basket__summary-once" v-if="priceOnce"> <p class="z-basket__summary-once-total-text"> <span class="sr-only">Kosten totaal</span> Eenmalig </p> <span class="z-basket__price" data-test="discountedRecurringChargePrice"> <span class="z-basket__summary-once-total-text-euro-sign" v-if="showEuroSign">&euro;</span> {{ productValueFormatted(priceOnce) }} </span> </div> </div> <div class="z-basket__bylines" v-if="showContractDurationLabel || showTaxByline"> <p class="z-basket__bylines-duration" v-if="showContractDurationLabel">{{ localContractDuration }} {{ contractDurationLabel }}</p> <p class="z-basket__bylines-tax" v-if="showTaxByline">{{ taxByline }}</p> </div> </div> </div> </div> </div> </vfz-height-transition> <div class="z-basket__footer"> <div class="z-basket__overlay z-basket__overlay--footer" v-show="isLoading"> <span class="sr-only">Laden...</span> <vfz-image class="z-basket__spinner z-basket__spinner--small" src="/content/dam/nlgeneric/ziggo/generic-assets/loader.gif" alt="" v-show="isMobile"> </vfz-image> <div class="z-basket__loading-message" v-show="isMobile">{{ loadingMessage }}</div> </div> <div class="z-basket__empty" v-if="showEmptyBasketMessage"> <p class="z-basket__empty-message"> {{ emptyBasketMessage }} </p> </div> <div class="z-basket__summary--small" :class="{ \'z-basket__summary--expanded\': !collapsed }" v-if="showMobileBasket"> <slot name="editable" v-cloak></slot> <div class="z-basket__countdown-wrap"> <button type="button" class="z-basket__collapse-button" aria-controls="basket-transition-element" :aria-expanded="collapsed ? \'false\' : \'true\'" @click.prevent="toggleCollapsible"> <span class="icon" :class="!collapsed ? \'icon-chevron-down\' : \'icon-chevron-up\'" aria-hidden="true"> </span> <span class="sr-only">{{ !collapsed ? \'Sluit je bestelling\' : \'Open je bestelling\' }}</span> </button> <div class="z-basket__summary--small-prices"> <div class="z-basket__summary--small-monthly"> <p class="z-basket__summary--small-subline"> <span class="sr-only">Kosten</span> {{ priceDiscount || \'Per maand\' }} </p> <p class="z-basket__summary--small-monthly-amount"> <span :class="{\'z-basket__summary--small-crossed-out\': priceDiscounts[0] && priceDiscounts[0].discount}"> <span v-if="showEuroSign">&euro;&nbsp;</span> {{ productValueFormatted(priceMonthly) }} </span> <span class="z-basket__summary--small-promo" data-test="discountedRecurringChargePrice" v-if="priceDiscounts[0] && priceDiscounts[0].discount"> <span v-if="showEuroSign">&euro;&nbsp;</span> {{ productValueFormatted(promoPriceMonthly) }} </span> </p> </div> <div class="z-basket__promo" v-if="orderBundle.promoShort"> <p class="z-basket__promo-short"> <span class="sr-only">De gekozen bundel heeft de volgende promotie</span> {{ orderBundle.promoShort }} </p> </div> </div> <a class="z-basket__footer-btn btn btn-primary" :class="{\'z-basket__footer-btn--disabled\' : checkoutButtonIsDisabledState}" :tabindex="checkoutButtonIsDisabledState ? \'-1\' : \'0\'" :aria-disabled="checkoutButtonIsDisabledState.toString()" :href="checkoutUrl" v-if="!readOnly"> Ga verder </a> </div> </div> <div class="z-basket__summary--large" v-show="showDesktopBasket"> <a class="z-basket__footer-btn btn btn-primary" :class="{\'z-basket__footer-btn--disabled\' : checkoutButtonIsDisabledState}" :tabindex="checkoutButtonIsDisabledState ? \'-1\' : \'0\'" :aria-disabled="checkoutButtonIsDisabledState.toString()" :href="checkoutUrl"> Ga verder </a> <div class="z-basket__error vfz-input__validation" v-if="hasError && errorMessage"> <p>{{ errorMessage }}</p> </div> <a class="z-basket__secondary-cta-footer vfz-link" :href="footerLink" v-if="showDesktopFooterLink"> <span class="z-basket__secondary-cta-icon icon icon-chevron-right" aria-hidden="true"></span> <span class="vfz-link__title">{{ footerLinkText }}</span> </a> <a class="z-basket__terms" rel="noopener noreferrer" target="_blank" :href="termsLink" v-if="showTerms"> {{ termsLinkText }} </a> </div> <slot name="editable" v-if="!isMobile" v-cloak> </slot> </div> </div> </div> '}},3139:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var s=i(9335);var r={name:"z-basket-list-item-row",mixins:[i(9669).A],props:{type:{type:String,required:!0},product:{type:Object,required:!0},showEuroSign:{type:Boolean,required:!0},readOnly:{type:Boolean,default:!1,required:!1}},emits:["remove-item-from-basket"],data(){return{isActive:!1,promoPrice:void 0,price:void 0,uspsList:[]}},computed:{...(0,s.mapGetters)("bundleBuilder",["contractCards","selectedContractDuration"]),showPromoPrice(){switch(this.type){case"discount":return!0;case"one-off":return!1;case"activation":return this.product.pricing.promoValueActivation<this.product.pricing.valueActivation;case"bundle":return!!(this.isB2bSoho&&this.promoLongevity>0)||this.product.pricing.promoValueMonthly>=0&&this.product.pricing.valueMonthly>=0&&this.product.pricing.promoValueMonthly<this.product.pricing.valueMonthly;default:return this.product.pricing?.discounts?.length>0}},isB2bSoho(){return"b2b soho"===this.product.subcatalog?.toLowerCase()},isRemovable(){const{readOnly:e,product:{isDeletable:t,isPredefined:i,isSelectedItem:s,pricing:r}}=this;return!e&&(!!t||!(i||!s||0===r?.valueMonthly))},promoLongevity(){if(this.readOnly)return this.product?.pricing?.discounts?.find((e=>"promo-bundleprice"===e.type.toLowerCase()))?.value;const e=this.contractCards?.find((e=>e.durationValue===this.selectedContractDuration));return e?.value},promoLongevityMessage(){const e=this.product.pricing?.discounts?.find((e=>"promo-bundleprice"===e.type));if(!e||0===e.value)return"";const t=this.productValueFormatted(e.value);return`${e.durationValue} maanden extra &euro;${t} korting op je pakket`},showPromoLongevityMessage(){return this.showPromoPrice&&this.promoLongevity>0}},mounted(){this.determinePriceType(this.product.pricing?this.product.pricing:this.product),this.setUsps(this.product)},beforeUpdate(){this.determinePriceType(this.product.pricing?this.product.pricing:this.product),this.setUsps(this.product)},methods:{...(0,s.mapActions)("bundleBuilder",["addUserDeclinedItem","removeUserDeclinedItem","toggleProduct"]),determinePriceType(e){switch(this.type){case"discount":this.setPrice(e.setupPrice,e.value);break;case"one-off":this.setPrice(e.promoValueOneOff,e.valueOneOff);break;case"activation":this.setPrice(e.promoValueActivation,e.valueActivation);break;default:this.setPrice(e.promoValueMonthly,e.valueMonthly)}},setPrice(e,t){this.promoPrice=e,this.price=t},setUsps(e){const{uspsList:t,subtitlesList:i}=e;this.uspsList=t||i||[]},toggleRow(){this.isActive=!this.isActive},removeFromBasket(e){e.isDeletable&&this.addUserDeclinedItem(e.id),this.$emit("remove-item-from-basket",e.id)},addToBasket(e){e.isDeletable&&this.removeUserDeclinedItem(e.id),this.toggleProduct(e.id)}},template:'<section class="z-basket__item-row"> <div class="z-basket__item-container-content"> <div class="z-basket__item-title"> <span class="z-basket__actions"> <button type="button" class="z-basket__plus-button" aria-label="Voeg optie toe aan je bestelling" @click.prevent="addToBasket(product)" v-if="product.isSelected === false"> <span class="z-basket__plus-button-icon icon icon-plus" aria-hidden="true"></span> </button> <button type="button" class="z-basket__close-button" aria-label="Verwijder optie uit je bestelling" @click.prevent="removeFromBasket(product)" v-else-if="isRemovable"> <span class="z-basket__close-button-icon icon icon-close" aria-hidden="true"></span> </button> </span> <span class="z-basket__title-container"> <button type="button" class="z-basket__clickable-list-item" translate="no" :aria-expanded="isActive.toString()" @click="toggleRow" v-if="uspsList.length"> <span class="z-basket__clickable-list-item__title" :class="{ \'z-basket__text--crossed-out\': product.isSelected === false }"> {{ product.name }} </span> <span class="z-basket__clickable-list-item__icon icon" :class="isActive ? \'icon-chevron-up\' : \'icon-chevron-down\'" aria-hidden="true"> </span> </button> <h3 class="z-basket__list-item-title" :class="{ \'z-basket__text--crossed-out\': product.isSelected === false }" translate="no" v-else> {{ product.name }} </h3> </span> <div class="z-basket__item-container-price"> <div class="z-basket__price" :class="{ \'z-basket__price--crossed-out\': showPromoPrice }"> <span v-if="showEuroSign">&euro;</span> {{ productValueFormatted(price, product.priceZeroText) }} </div> <div class="z-basket__price" :class="{ \'z-basket__price--crossed-out\': product.isSelected === false }" :data-test="product.isSelected ? \'recurringChargePrice\' : null" v-if="showPromoPrice"> <span v-if="showEuroSign">&euro;</span> {{ productValueFormatted(promoPrice, product.priceZeroText) }} </div> </div> </div> <p class="z-basket__discounts" v-if="showPromoLongevityMessage" v-html="promoLongevityMessage"> </p> <p class="sr-only" v-if="product.promoShort">Dit product heeft de volgende promotie:</p> <div class="z-basket__promo-short" :class="{ \'z-basket__promo-short--crossed-out\': product.isSelected === false }" v-if="product.promoShort" v-html="product.promoShort"> </div> <vfz-height-transition role="region" v-if="uspsList.length"> <div class="z-basket__item-row-usps" v-cloak v-show="isActive"> <p class="sr-only">Dit product heeft de volgende voordelen:</p> <ul class="z-basket__usps"> <li class="z-basket__usps-info" v-for="usp in uspsList"> <span class="z-basket__usps-info-icon icon icon-check" aria-hidden="true"></span> <span class="z-basket__usps-info-title">{{ usp.title }}</span> </li> </ul> </div> </vfz-height-transition> </div> </section> '}},9669:function(e,t,i){i.d(t,{A:function(){return s}});var s={methods:{productValueFormatted(e,t="Gratis"){return 0===e?t:Number(e).toFixed(2).toString().replace(".",",")}}}},5646:function(e,t,i){i.r(t),i.d(t,{default:function(){return s}});var s={name:"z-basket-price-detail",mixins:[i(9669).A],props:{showEuroSign:{type:Boolean,required:!1,default:!1},period:{type:Object,required:!1,default:()=>({})},isLastDiscount:{type:Boolean,required:!1,default:!1}},computed:{priceIsValid(){return"number"==typeof this.period.price},formattedPrice(){const{price:e}=this.period;return this.productValueFormatted(e)},formattedLabel(){const{startMonth:e,endMonth:t}=this.period;return 1!==e||this.isLastDiscount?e>1?this.labelPeriodAfterStart(e,t):"Totaal per maand":this.labelPeriodStart(t)},applyDataTest(){const{startMonth:e}=this.period;return 1===e}},methods:{labelPeriodStart(e){return 1===e?"Eerste maand":`Eerste ${e} maanden`},labelPeriodAfterStart(e,t){return e===t?`Maand ${e}`:t&&!this.isLastDiscount?`Maand ${e} t/m ${t}`:"Daarna per maand"}},template:'<div class="z-basket__price-detail" v-if="priceIsValid"> <p class="z-basket__price-label">{{ formattedLabel }}</p> <span class="z-basket__price-value" :data-test="applyDataTest ? \'discountedRecurringChargePrice\' : null"> <span class="z-basket__price-detail-value-euro-sign" v-if="showEuroSign">&euro;</span> {{ formattedPrice }} </span> </div> '}},8566:function(e,t,i){i.r(t),i.d(t,{default:function(){return n}});var s=i(9335),r=i(7877),a=i(2661),o=i(8412),d=i(5129);var n={name:"z-bundle-builder",props:{endpoint:{type:String,required:!0},errorImage:{type:String,required:!1,default:""},errorTitle:{type:String,required:!0},errorMessage:{type:String,required:!0},errorUspTitle:{type:String,required:!0},errorUspMessage:{type:String,required:!0},reloadButtonText:{type:String,required:!0},isEditMode:{type:Boolean,required:!0}},data(){return{showError:!1,uspTitle:"",uspDetails:"",showLoader:!0,loaderTimeout:null,isLoadingDelay:1e3}},computed:{...(0,s.mapState)("bundleBuilder",["productData","selectedItems","hasFetchedInitialData"]),...(0,s.mapGetters)("bundleBuilder",["selectedProducts","isLoading"])},watch:{isLoading(e){e?this.loaderTimeout=setTimeout((()=>{this.showLoader=!0}),this.isLoadingDelay):(this.showLoader=!1,clearTimeout(this.loaderTimeout))}},created(){this.fetch()},mounted(){r.A.$on("product-card:usp-modal",this.triggerUspModal),this.setReferrer(a.A.getDocument().location.href)},methods:{...(0,s.mapActions)("bundleBuilder",["fetchData","setEndpoint","setPreselectedItems","setPageType","setReferrer"]),async fetch(){const e=o.A.getQueryString("preselect");e&&!this.isEditMode&&this.setPreselectedItems(e.split(",")),this.setPageType(d.Ay.getPageType()),this.setEndpoint(this.endpoint);try{await this.fetchData({type:"info"})}catch(e){this.handleError()}},handleError(){this.showError=!0},reloadPage(){a.A.getWindow().location.reload()},triggerUspModal({title:e,content:t}){this.uspTitle=e,this.uspDetails=t,this.$refs.productCardUspModal?.openModal()}},template:'<div class="z-bundle-builder" :class="{\n        \'z-bundle-builder--loading\' : showLoader,\n        \'z-bundle-builder--error\' : showError\n    }" v-cloak> <div ref="z-bundle-builder-overlay" class="z-bundle-builder__overlay" v-show="!hasFetchedInitialData || showLoader"> <div class="z-bundle-builder__spinner" ref="z-bundle-builder-spinner"> <div class="z-bundle-builder__spinner-image"></div> </div> </div> <div class="z-bundle-builder__notification" v-if="showError"> <vfz-modal class="z-bundle-builder__error-modal" :listen-to-events="true" :open-on-mount="true" :force-visible="false" :is-closable="true" v-cloak> <template v-slot:content> <vfz-image alt="" class="z-bundle-builder__error-modal-image" :src="errorImage" :cover="true" v-if="errorImage"> </vfz-image> <h3 class="z-bundle-builder__error-modal-title">{{ errorTitle }}</h3> <p class="z-bundle-builder__error-modal-message">{{ errorMessage }}</p> <button type="button" class="btn btn-primary" @click="reloadPage">{{ reloadButtonText }}</button> </template> </vfz-modal> </div> <div v-if="hasFetchedInitialData || isEditMode" class="z-bundle-builder__steps"> <slot></slot> </div> <vfz-modal :class="!uspDetails ? \'z-bundle-builder__error-modal\' : \'\'" ref="productCardUspModal" :listen-to-events="true"> <template v-slot:header> <span v-html="uspTitle"></span> </template> <template v-slot:content> <div v-if="uspDetails" v-html="uspDetails"></div> <div v-else> <vfz-image alt="" class="z-bundle-builder__error-modal-image" :src="errorImage" :cover="true" v-if="errorImage"> </vfz-image> <h3 class="z-bundle-builder__error-modal-title">{{ errorUspTitle }}</h3> <p class="z-bundle-builder__error-modal-message">{{ errorUspMessage }}</p> </div> </template> </vfz-modal> </div> '}},5258:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(9335),r=i(3427),a=i(4226),o=i(2541);var d={name:"z-choose-your-benefit",mixins:[r.A,a.A,o.A],props:{hasDeselectOption:{type:Boolean,required:!1,default:!1},uuid:{type:String,required:!0}},computed:{...(0,s.mapGetters)("VZglobal",["deselectSelectedCYB"])},watch:{productData:{handler(e){!e.data||this.isLoading&&this.dirty||(this.products=this.getProductsByPredefinedProductIds(),this.setSelectedProductId())},deep:!0},selectedProductId:{async handler(e){const t=this.predefinedProductIds.filter((t=>e!==t));await this.updateSelectedBenefit({selectedProductId:e,productFamily:this.productFamily,deselectProductIds:t})}}},methods:{...(0,s.mapActions)("VZglobal",["setDeselectSelected"]),...(0,s.mapActions)("bundleBuilder",["addAvailableItems","updateSelectedBenefit","removeUserDeclinedItems","addUserDeclinedItem"]),setSelectedProductId(){const e=this.products.find((e=>e.isSelected));this.deselectSelectedCYB.includes(this.uuid)?this.selectedProductId=null:(e?.id&&!e?.isDisabled?this.selectedProductId=e.id:!this.dirty&&this.preselectedProductId?this.selectedProductId=this.preselectedProductId:this.hasDeselectOption&&(this.selectedProductId=null),this.dirty=!0)},addUserDeclinedItemToBlacklist(e){this.isProductDeletable(e)&&this.addUserDeclinedItem(e)},removeUserDeclinedItemFromBlacklist(e){this.isProductDeletable(e)&&this.removeUserDeclinedItems(e)},onClickSelect(e){if(!this.internetAvailable)return;if(e&&!this.isProductEnabled(e))return;this.dirty=!0;const t=this.selectedProductId;this.selectedProductId=e,this.addUserDeclinedItemToBlacklist(t),this.removeUserDeclinedItemFromBlacklist(e);let i=this.deselectSelectedCYB;0!==i.length&&(i=i.filter((e=>e!==this.uuid)),this.setDeselectSelected(i))},onClickDeselect(){if(!this.internetAvailable)return;this.dirty=!0;const e=this.selectedProductId;this.selectedProductId=null,this.addUserDeclinedItemToBlacklist(e),this.setDeselectSelected([...this.deselectSelectedCYB,this.uuid])},isProductDeletable(e){const t=this.getProductById(e);return t&&!0===t.isDeletable},getProductsByPredefinedProductIds(){const e=e=>this.predefinedProductIds.includes(e.id),t=this.productData?.data?.subCatalog[0]?.productFamily?.map((t=>[...t.addon.filter(e),...t.product.filter(e)])),i=[].concat(...t);return this.sortByPredefinedIdOrder(i)}}}},7518:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var s=i(9335);var r={name:"z-contract-card-group",props:{themeName:{type:String,required:!0}},data(){return{isActive:!1}},computed:{...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapGetters)("addressData",["internetAvailable"]),...(0,s.mapGetters)("bundleBuilder",["contractCards","selectedContractDuration"])},watch:{availabilityDataIsFetched(e){this.isActive=e&&this.internetAvailable},contractCards(e){this.setDefaultContractDuration(e)}},methods:{...(0,s.mapActions)("bundleBuilder",["setContractDuration"]),isCardSelected(e){return e.durationValue===this.selectedContractDuration},async setDefaultContractDuration(e){if(!this.selectedContractDuration){const[t]=e;await this.setContractDuration(t?.durationValue)}}},template:'<div class="z-contract-card-group" data-test="z-contract-card-group"> <z-contract-card :contract-duration="contractCard.durationValue" :discount-value="contractCard.value" :is-active="isActive" :is-selected="isCardSelected(contractCard)" :key="contractCard.id" :theme-name="themeName" v-for="(contractCard, index) in contractCards"> </z-contract-card> </div> '}},2073:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(9335),r=i(3427),a=i(4226),o=i(2541);var d={name:"z-contract-promo-card-group",mixins:[r.A,a.A,o.A],props:{preselectedProductBindingPeriod:{type:String,required:!1,default:null}},data(){return{selectedProductBindingPeriod:null}},watch:{productData:{handler(e){!e.data||this.isLoading&&this.dirty||(this.products=this.getProductsByPredefinedProductIds(),this.setSelectedProduct())},deep:!0},selectedProductId:{async handler(e){const t=this.predefinedProductIds.filter((t=>e!==t));await this.updateSelectedContractPromo({selectedProductId:e,productFamily:this.productFamily,deselectProductIds:t,selectedProductBindingPeriod:this.selectedProductBindingPeriod})}}},methods:{...(0,s.mapActions)("bundleBuilder",["updateSelectedContractPromo"]),getContractBindingLabel(e){if(1===e)return"1 maand contract";const t=!(e%12);return`${t?e/12:e} ${t?"jaar":"maanden"} contract`},setSelectedProduct(){const e=this.products.find((e=>e.isSelected));e?.id&&!e?.isDisabled?(this.selectedProductId=e.id,this.selectedProductBindingPeriod=e.bindingPeriod):!this.dirty&&this.preselectedProductId&&(this.selectedProductId=this.preselectedProductId,this.selectedProductBindingPeriod=this.preselectedProductBindingPeriod)},onChange(e,t){this.internetAvailable&&(e&&!this.isProductEnabled(e)||(this.dirty=!0,this.selectedProductId=e,this.selectedProductBindingPeriod=t))},getProductsByPredefinedProductIds(){const e=e=>this.predefinedProductIds.includes(e.id),t=this.productData?.data?.subCatalog[0]?.productFamily?.map((t=>[...t.product.filter(e)])),i=[].concat(...t);return this.sortByPredefinedIdOrder(i)}}}},4755:function(e,t,i){i.r(t),i.d(t,{default:function(){return r}});var s=i(9335);var r={name:"z-hardware-card-group",props:{themeName:{type:String,required:!0}},data(){return{isActive:!1}},computed:{...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapGetters)("addressData",["internetAvailable"]),...(0,s.mapGetters)("bundleBuilder",["selectedProducts","getHardwareForSelectedItems"])},watch:{availabilityDataIsFetched(e){this.isActive=e&&this.internetAvailable},selectedProducts(){this.fetchHardwareDetails()}},methods:{...(0,s.mapActions)("bundleBuilder",["fetchHardwareDetails"])},template:'<div class="z-hardware-card-group" data-test="z-hardware-card-group" v-if="getHardwareForSelectedItems.length"> <p> <slot name="title"></slot> </p> <div class="z-hardware-card-group__content"> <z-hardware-card v-for="(hardwareCard, index) in getHardwareForSelectedItems" :key="index" :title="hardwareCard.title" :description="hardwareCard.description" :image-path="hardwareCard.assetPath" :is-active="isActive" :theme-name="themeName"> </z-hardware-card> </div> </div> '}},3427:function(e,t,i){i.d(t,{A:function(){return r}});var s=i(9335);var r={props:{predefinedProductIds:{type:Array,required:!0},preselectedProductId:{type:String,required:!1,default:null}},data(){return{dirty:!1,products:[],productFamily:"all",selectedProductId:null}},computed:{...(0,s.mapGetters)("addressData",["internetAvailable"]),...(0,s.mapGetters)("bundleBuilder",["isLoading"]),...(0,s.mapState)("bundleBuilder",["productData"])},created(){this.addAvailableItems(this.predefinedProductIds)},beforeUnmount(){this.removeAvailableItems(this.predefinedProductIds)},methods:{...(0,s.mapActions)("bundleBuilder",["addAvailableItems","removeAvailableItems"]),isProductEnabled(e){if(!this.internetAvailable)return!1;const t=this.getProductById(e);return!(!t||!0===t.isDisabled)},isProductSelected(e){return this.selectedProductId===e},isProductVisible(e){const t=this.getProductById(e);return!(!t||!0!==t.isVisible)},hasASelectedProduct(){return!!this.selectedProductId},hasAVisibleEnabledProduct(){return void 0!==this.products.find((e=>this.isProductVisible(e.id)&&this.isProductEnabled(e.id)))},getProductById(e){return this.products.find((t=>e===t.id))},sortByPredefinedIdOrder(e){const t=this.predefinedProductIds;return e.sort(((e,i)=>t.indexOf(e.id)-t.indexOf(i.id)))}}}},5169:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var s=i(9335),r=i(1796);var a={name:"z-product-card-group",mixins:[i(4226).A],props:{preselectedProductId:{type:String,required:!1,default:""},productFamily:{type:String,required:!0},isAuthorEnvironment:{type:Boolean,required:!0},predefinedProductIds:{type:Array,required:!0},hidePromoRibbon:{type:Boolean,default:!1,required:!1},showBundlePromo:{type:Boolean,default:!1,required:!1},promoSegmentsToHide:{type:String,required:!1,default:""},hasDeselectCard:{type:Boolean,required:!1,default:!1},hasCountdown:{type:Boolean,required:!1,default:!1},countdownLabel:{type:String,required:!1,default:""},countdownProductCardPath:{type:String,default:"",required:!1},enableProductCardAlert:{type:Boolean,required:!1,default:!1},alertProductPath:{type:String,required:!1,default:""},uuid:{type:String,required:!0}},data(){return{selectedProductId:null,products:[],bundlePromoShort:"",segmentPromoHideStatus:!1,isCountDownTimerOnPage:!1,isDirty:!1}},computed:{...(0,s.mapState)("bundleBuilder",["productData","availableItems","selectedItems","hasError","preselectedItems"]),...(0,s.mapGetters)("bundleBuilder",["isLoading","selectedBundle"]),...(0,s.mapGetters)("targeting",["customerInformation"]),...(0,s.mapGetters)("addressData",["internetAvailable"]),isDeselectedCardSelected(){return null===this.selectedProductId||this.isPreselectedDeselectedState(this.productFamily)},extractProductIdFromCountdownProductCardPath(){const e=this.countdownProductCardPath?.match(/\/(\d+)$/);return e?e[1]:""},shouldHidePromoRibbon(){return this.hidePromoRibbon||this.segmentPromoHideStatus}},watch:{productData:{async handler(e,t){if(e.data&&t.data){this.setProductData(this.productData.data),this.isAuthorEnvironment&&await this.selectInitialProduct();const e=this.products.find((e=>e.isSelected&&!e.isDisabled));this.selectedProductId=e?.id||null,this.hasDeselectCard||this.selectedProductId||await this.selectInitialProduct()}},deep:!0},"customerInformation.profile":function(){this.checkSegmentPromoHideStatus()},selectedBundle(){this.getBundlePromoShort()}},beforeUnmount(){this.selectedProductId&&this.removeProduct([this.selectedProductId]),this.removeAvailableItems(this.predefinedProductIds)},created(){this.increaseCounter("initializingProductCardGroups"),this.addAvailableItems(this.predefinedProductIds)},mounted(){this.decreaseCounter("initializingProductCardGroups"),this.productData?.data&&this.setProductData(this.productData.data),this.selectInitialProduct(),this.checkSegmentPromoHideStatus()},methods:{...(0,s.mapActions)("bundleBuilder",["increaseCounter","decreaseCounter","addAvailableItems","removeAvailableItems","updatePromoProducts","addProduct","removeProduct","updateSelectedProduct"]),getProductDataOfAllSelectedItems(e,t){const i=e.subCatalog[0].productFamily.map((e=>[...e.addon.filter((e=>t.includes(e.id))),...e.bundle.filter((e=>t.includes(e.id))),...e.product.filter((e=>t.includes(e.id)))]));return[].concat(...i)},sortProductDataOnConfiguredOrder(e,t){return e.sort(((e,i)=>t.indexOf(e.id)-t.indexOf(i.id)))},setProductData(e){const t=this.products.length,i=this.getProductDataOfAllSelectedItems(e,this.predefinedProductIds);this.products=this.sortProductDataOnConfiguredOrder(i,this.predefinedProductIds),t||this.updatePromoProducts(this.products)},promoRibbonText(e){return this.shouldHidePromoRibbon?"":this.showBundlePromo?this.promoSummaryLine(e):this.getProduct(e).basketPromoShort||""},promoSummaryLine(e){const{bundleSummaries:t}=this.getProduct(e),i=t&&t.length>0;if(!this.bundlePromoShort&&i){const e=t[0].promoSummaries?.map((e=>e.name));return e.length>1?"":e[0]}return this.bundlePromoShort||""},checkSegmentPromoHideStatus(){this.segmentPromoHideStatus=!!this.promoSegmentsToHide&&this.promoSegmentsToHide.split(",").includes(this.customerInformation.profile)},getBundlePromoShort(){this.bundlePromoShort=this.selectedBundle?.basketPromoShort},isCountDownTimerEnabled(e){return this.hasCountdown&&""!==this.countdownLabel&&e===this.extractProductIdFromCountdownProductCardPath},countdownTimerStart(){this.isCountDownTimerOnPage=!0},countdownTimerEnd(){this.isCountDownTimerOnPage=!1},getPriceContent(e){const{pricing:t}=this.getProduct(e);return`${t?.rounding},${"-"===t?.decimals?"00":t?.decimals}`},getProduct(e){return{isSelected:this.getProductById(e)?.isSelected,isDisabled:this.isDisabled(e),bundleSummaries:this.getProductById(e)?.bundleSummaries,basketPromoShort:this.getProductById(e)?.basketPromoShort,pricing:this.getPrice(e)}},async selectInitialProduct(){let e;if(this.selectedItems?.length){const t=this.selectedItems.map((({id:e})=>e));e=this.products.findLast((({id:e})=>t.includes(e)))}!e&&this.preselectedItems.length&&(e=this.products.find((({id:e})=>this.preselectedItems.includes(e))));const t=e?.id&&!e?.isDisabled?e.id:this.preselectedProductId;if(t){const e=this.predefinedProductIds.filter((e=>e!==t));await this.removeProduct(e),await this.addProduct([{id:t}]),this.selectedProductId=t}},async selectProduct(e){this.productFamily&&(await this.updateSelectedProduct({selectedProductId:e,productFamily:this.productFamily}),this.hasError||(this.selectedProductId=e))},isPreselectedDeselectedState(e){return!this.isDirty&&(!!this.preselectedItems.includes(`${e.toLowerCase()}-no`)||this.preselectedDeselectCard)},async onClickProductCard(e){if(!(this.isLoading||e&&this.isDisabled(e)))if(this.isDirty=!0,e){if(this.selectedProductId!==e){if(this.enableProductCardAlert&&this.alertProductPath.split("/").slice(-1)[0]===e){const e=this.getProductAlertModalRef(`productCardAlert${this.uuid}`);e?.openModal()}this.selectProduct(e)}}else await this.updateSelectedProduct({productFamily:this.productFamily}),this.selectedProductId=null},getProductAlertModalRef(e){return this.$root.$refs[e]},getProductById(e){return this.products?.find((({id:t})=>e===t))},isDisabled(e){return!this.internetAvailable||this.getProductById(e)?.isDisabled},getPrice(e){const t=this.getProductById(e)?.pricing;return{...t,...r.A.formatProductPrice(t)}}}}},2796:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var s=i(7877),r=i(8579);var a={name:"z-product-card-usps",props:{hideUsps:{type:Boolean,required:!1,default:!1},emphasized:{type:Boolean,required:!1,default:!1},uspsList:{type:Array,default:()=>[],required:!1}},methods:{async showUspDetails(e){e.stopPropagation();const t=await(0,r.A)(e.currentTarget.dataset.path);s.A.$emit("product-card:usp-modal",t)}},template:'<ul class="z-product-card__usps" v-if="!hideUsps"> <li class="z-product-card__usp" :class="{ \'z-product-card__usp--emphasised\': emphasized && index < 2 }" v-for="(usp, index) in uspsList" :key="index"> <button type="button" data-test="usp-item-trigger" class="z-product-card__usp--container z-product-card__usp--button" :data-path="usp.fragmentPath" v-if="!usp.isCrossed && usp.fragmentPath" @click="showUspDetails"> <span aria-hidden="true" class="z-product-card__usp-icon icon-check"></span> <span class="z-product-card__usp--title">{{ usp.title }}</span> </button> <span class="z-product-card__usp--container" v-else-if="!usp.isCrossed"> <span aria-hidden="true" class="z-product-card__usp-icon icon-check"></span> <span>{{ usp.title }}</span> </span> <span class="z-product-card__usp--container" v-else> <span aria-hidden="true" class="z-product-card__usp-icon icon-close"></span> <span class="z-product-card__usp--crossed"> <span class="sr-only">Niet van toepassing</span> {{ usp.title }} </span> </span> </li> </ul> '}},330:function(e,t,i){i.r(t),i.d(t,{default:function(){return n},hideConditionValidator:function(){return d}});var s=i(9335),r=i(7877),a=i(9176),o=i(8206);const d=e=>-1!==["productFamily","certainProducts","hideAll","certainSegmentCodeActive","certainSegmentCodeNotActive",""].indexOf(e);var n={name:"z-bundle-builder-progress-step",props:{hideCondition:{type:String,required:!1,default:"",validator:d},productFamily:{type:String,required:!1,default:""},selectedProductIfHideAll:{type:String,required:!1,default:""},productsString:{type:String,required:!1,default:""},segmentCodeActive:{type:String,required:!1,default:""},segmentCodeNotActive:{type:String,required:!1,default:""},isAuthorEnvironment:{type:Boolean,required:!0}},data(){return{isVisible:!1,interactedWith:!1,products:[],isBundleDisabled:!1,isRfsCheckerPresent:!1}},computed:{...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapGetters)("addressData",["connectionTypeSupported","internetAvailable"]),...(0,s.mapState)("targeting",["targeting","sources"]),...(0,s.mapGetters)("targeting",["ziggoCustMarket"]),...(0,s.mapState)("bundleBuilder",["productData","endpoint"]),isStepVisible(){return this.isRfsCheckerPresent||!this.isBundleDisabled},isStepDisabled(){return!this.isAuthorEnvironment&&!(this.isRfsCheckerPresent||this.availabilityDataIsFetched&&this.internetAvailable&&this.connectionTypeSupported)}},watch:{"targeting.customOffer":function(){"certainSegmentCodeActive"===this.hideCondition?this.handleHideIfSegmentCodeIsActive():"certainSegmentCodeNotActive"===this.hideCondition&&this.handleHideIfSegmentCodeIsNotActive()},"sources.user_input.cust_status_ziggo":function(){this.updateBundleAccessibility()},"sources.user_input.market_ziggo":function(){this.updateBundleAccessibility()},productData(){"productFamily"===this.hideCondition&&this.handleHideConditionOfProductFamily()}},mounted(){this.init()},methods:{...(0,s.mapActions)("targeting",["ddmGet"]),init(){switch(this.hideCondition){case"certainProducts":this.products=this.getDataFromProductsString(this.productsString),this.handleHideConditionOfCertainProducts();break;case"hideAll":this.products=this.getDataFromProductsString(this.selectedProductIfHideAll),this.handleHideIfConditionIsHideAll();break;case"productFamily":this.handleHideConditionOfProductFamily();break;case"certainSegmentCodeActive":this.ddmGet({key:"targeting.customOffer"}),this.handleHideIfSegmentCodeIsActive();break;case"certainSegmentCodeNotActive":this.ddmGet({key:"targeting.customOffer"}),this.handleHideIfSegmentCodeIsNotActive();break;default:this.isVisible=!0}this.$nextTick((()=>{this.isRfsCheckerPresent=null!==this.$el.querySelector(".user-identification, .rfs-checker-v2")}))},getDataFromProductsString(e){const t=e?e.split(","):[];return 0===t.length?[]:t.map((e=>{const t=e.split("/");return{productFamily:t[6],type:t[7],id:t[8]}}))},showProgressStep(){this.isVisible=!0},hideProgressStep(){this.isVisible=!1},handleProgressStepClick(){this.interactedWith=!0},getProductsOfProductFamilyFromResponseData(e,t){if(!t)return[];return t.subCatalog[0].productFamily.filter((t=>t.title===e))[0].product},getProductDataFromResponseData(e,t){if(!t)return[];return t.subCatalog[0].productFamily.filter((t=>t.title.toLowerCase()===e.productFamily.toLowerCase()))[0].product.filter((t=>t.id===e.id))[0]},handleHideConditionOfProductFamily(){const e=this.getProductsOfProductFamilyFromResponseData(this.productFamily,this.productData.data),t=e?.filter((e=>"base"===e.subType.toLowerCase()&&e.isVisible));t.length>0?this.showProgressStep():this.hideProgressStep()},handleHideIfConditionIsHideAll(){if(this.hideProgressStep(),1===this.products.length){const[{id:e,productFamily:t}]=this.products;r.A.$emit("product-card-selected",{id:e,index:0,isSelectedItem:!1,productFamily:t})}},handleHideConditionOfCertainProducts(){this.products.map((e=>this.getProductDataFromResponseData(e,this.productData.data).isSelected)).indexOf(!0)>-1?this.showProgressStep():this.hideProgressStep()},handleSegmentCodeCheck(e){return e.split(",").map((e=>e.trim())).includes(this.targeting.customOffer)},handleHideIfSegmentCodeIsActive(){this.handleSegmentCodeCheck(this.segmentCodeActive)?this.hideProgressStep():this.showProgressStep()},handleHideIfSegmentCodeIsNotActive(){this.handleSegmentCodeCheck(this.segmentCodeNotActive)?this.showProgressStep():this.hideProgressStep()},updateBundleAccessibility(){const e=this.ziggoCustMarket;if("b2bSoHo"===this.endpoint)this.isBundleDisabled=e===o.C.B2B;else{const e=[a.A.PROBCUST,a.A.CUST].includes(this.sources.user_input.cust_status_ziggo);this.isBundleDisabled=e}}},template:'<div class="z-bundle-builder-progress-step" :class="{ \'z-bundle-builder-progress-step--disabled\': this.isStepDisabled }" :inert="isStepDisabled" v-if="isStepVisible" @click="handleProgressStepClick"> <div class="z-bundle-builder-progress-step__content" v-if="isAuthorEnvironment || isVisible"> <slot name="content"></slot> </div> <div class="z-bundle-builder-progress-step__content z-bundle-builder-progress-step__content--hidden-content" v-show="isAuthorEnvironment || (!isVisible && interactedWith)" v-cloak> <slot name="optional-hidden-content"></slot> </div> </div> '}},4078:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=i(9335),r=i(2493),a=i(7877);var o={name:"z-kvk-checker",mixins:[r.A],props:{kvkInputLabel:{type:String,required:!0},submitLabel:{type:String,required:!0},kvkErrorRequired:{type:String,required:!0},kvkErrorDigits:{type:String,required:!0},kvkErrorMinlength:{type:String,required:!0},kvkErrorMaxlength:{type:String,required:!0},kvkErrorNoCompanies:{type:String,required:!0},chooseCompanyLabel:{type:String,required:!0},companyNameLabel:{type:String,required:!0}},emits:["change"],data(){return{ddmDataLoaded:!1,formHidden:!1,kvkItems:[]}},computed:{...(0,s.mapState)("addressData",["address","companyInfo"]),...(0,s.mapGetters)("addressData",["zipcode"]),kvkInputValidations(){return{required:this.kvkErrorRequired,digits:this.kvkErrorDigits,minlength:this.kvkErrorMinlength,maxlength:this.kvkErrorMaxlength}}},mounted(){this.init()},methods:{...(0,s.mapActions)("addressData",["fetchCompanyInfo"]),async init(){await this.fetchCompanyInfo(),this.kvkItems=this.companyInfo?.companies||[],this.ddmDataLoaded=!0,a.A.$emit("kvk-checker:loaded")},validateAndSubmit(){this.$refs.kvkNumber.val=this.$refs.kvkNumber.val.toString().trim(),this.$refs.kvkNumber.validate(),this.$refs.kvkNumber.isValid&&this.getKvkOutput()},handleKvkOutputResponse(e){const t=this.$refs.kvkNumber.$refs.input,{trade_name_full:i}=e.data.data.getDutchBusinessDossier;this.kvkItems=[{dossier_number:t.value,trade_name:i}],this.kvkResponse=!0,this.isLoading=!1,this.companyName=i,this.$emit("change",t)},onKvkCompanyChange({target:e}){this.$refs.selectedKvkNumber.val=e.options[e.selectedIndex].dataset.kvkNumber}},template:'<div class="z-kvk-checker"> <span class="vfz-loader" v-if="!ddmDataLoaded"><span></span></span> <template v-else> <form class="z-kvk-checker__form" @submit.prevent="validateAndSubmit" v-if="!companyInfo?.id"> <vfz-input ref="kvkNumber" v-model="kvk" :required="true" :onlydigits="true" minlength="8" maxlength="8" :label="kvkInputLabel" name="kvkNumber" id="kvkNumber" :messages="kvkInputValidations" @keydown.enter="validateAndSubmit"> </vfz-input> <button type="submit" class="btn btn-primary ddm-dap-a-button" :disabled="isLoading" data-test="kvk-submit"> {{ submitLabel }} </button> </form> <p class="z-kvk-checker__error" data-test="kvk-error-message" v-if="hasError"> {{ kvkErrorNoCompanies }} </p> <div class="z-kvk-checker__result" v-if="kvkItems.length"> <vfz-input ref="selectedKvkNumber" :default-value="kvkItems[0]?.dossier_number?.toString()" label="KvK nummer" name="ff-selectedKvkNumber" id="selectedKvkNumber" readonly="readonly"> </vfz-input> <vfz-select :label="chooseCompanyLabel" name="ff-kvkCompanyName" id="kvkCompanyName" :default-value="kvkItems[0]?.trade_name" v-if="kvkItems.length > 1" @change="onKvkCompanyChange"> <template v-slot:options> <option v-for="company in kvkItems" :data-kvk-number="company.dossier_number" :value="company.trade_name"> {{ company.trade_name }} </option> </template> </vfz-select> <vfz-input :default-value="kvkItems[0]?.trade_name" :label="companyNameLabel" name="ff-kvkCompanyName" id="kvkCompanyName" readonly="readonly" v-else> </vfz-input> </div> </template> </div> '}},634:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=i(9335),r=i(2661),a=i(9176);var o={name:"z-user-identification-bar",props:{flavour:{type:String,required:!1,default:""},label:{type:String,required:!1,default:""},title:{type:String,required:!1,default:""},yesButtonLabel:{type:String,required:!1,default:"Ja"},noButtonLabel:{type:String,required:!1,default:"Nee"},alwaysShowBar:{type:Boolean,required:!1,default:!1},isHideYesButton:{type:Boolean,required:!1,default:!1},isHideNoButton:{type:Boolean,required:!1,default:!1},isHideLabel:{type:Boolean,required:!1,default:!1},modalBackgroundImage:{type:String,required:!1,default:""},feedbackText:{type:String,required:!1,default:""},isAuthor:{type:Boolean,required:!0},theme:{type:String,required:!1,default:""},prospectRedirectPath:{type:String,required:!1,default:""},prospectRedirectMessage:{type:String,required:!1,default:""},customerRedirectPath:{type:String,required:!1,default:""},customerRedirectMessage:{type:String,required:!1,default:""}},data(){return{hasResult:!1,hideComponent:!1,feedback:this.feedbackText,modalInnerWidth:"200px"}},computed:{...(0,s.mapGetters)("targeting",["ziggoCustStatus"]),buttonTheme(){return["black","dark","secondary","black-primary"].includes(this.theme)?"btn-light":["primary","white","light"].includes(this.theme)?"btn-dark":"btn-light"}},watch:{hasResult(e){if(e){const e="modal"===this.flavour?200:4e3;this.alwaysShowBar||r.A.getWindow().setTimeout(this.doHideComponent,e)}}},mounted(){this.handleResize(),window.addEventListener("resize",this.handleResize),this.displayComponentBasedOnUserInfo()},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{...(0,s.mapActions)("targeting",["ddmTrigger","ddmGet"]),handleResize(){const e=this.$refs.userIdentificationModal?.offsetWidth;this.modalInnerWidth=e>200?`${e}px`:"200px"},doHideComponent(){this.hideComponent=!0},async displayComponentBasedOnUserInfo(){await this.ddmGet({key:"user.custStatus.ziggo",defaultValue:""}),this.isAuthor?this.hideComponent=!1:(this.hideComponent=!this.alwaysShowBar&&this.ziggoCustStatus!==a.A.UNKNOWN,this.hideComponent||"modal"!==this.flavour||this.$refs.vfzUserIdentificationModal?.openModal(!0))},submitUserChoice(e){"modal"===this.flavour&&this.$refs.vfzUserIdentificationModal?.closeModal(!0),this.submitToDdm(e),this.hasResult=!0,this.checkRedirect(e)},submitToDdm(e){"yes"===e?(this.ddmTrigger({key:"user_input.multiple",value:{internet:"yes",market_ziggo:"b2c",cust_status_ziggo:a.A.PROBCUST}}),this.ddmTrigger({key:"ga.event",value:{category:"Targeting",action:"Internet_popup",label:"yes"}})):(this.ddmTrigger({key:"user_input.multiple",value:{internet:"no",cust_status_ziggo:a.A.PROBNONCUST}}),this.ddmTrigger({key:"ga.event",value:{category:"Targeting",action:"Internet_popup",label:"no"}}))},checkRedirect(e){this.prospectRedirectPath&&"no"===e?this.doRedirect("no"):this.customerRedirectPath&&"yes"===e&&this.doRedirect("yes")},doRedirect(e){this.feedback="yes"===e?this.customerRedirectMessage:this.prospectRedirectMessage,r.A.getWindow().setTimeout(this.handleRedirect(e),4e3)},handleRedirect(e){const t="yes"===e?this.customerRedirectPath:this.prospectRedirectPath;r.A.getWindow().location.assign(t)}},template:'<div class="z-user-identification-bar" :class="[\n    `z-user-identification-bar--${theme}`,\n    {\'z-user-identification-bar--has-result\': hasResult,\n    \'z-user-identification-bar--hidden\': hideComponent}]" v-if="!flavour"> <div class="z-user-identification-bar__column"> <p class="z-user-identification-bar__text" v-if="!hasResult && !isHideLabel">{{ label }}</p> <p class="z-user-identification-bar__text" v-if="hasResult">{{ feedback }}</p> </div> <div class="z-user-identification-bar__column" v-if="!hasResult"> <button type="button" class="btn" :class="buttonTheme" v-if="!isHideYesButton" @click="submitUserChoice(\'yes\')"> {{ yesButtonLabel }} </button> <button type="button" class="btn" :class="buttonTheme" v-if="!isHideNoButton" @click="submitUserChoice(\'no\')"> {{ noButtonLabel }} </button> </div> </div> <div class="z-user-identification-bar__modal-flavour col-12 col-sm-6 col-md-4 col-lg-4" :class="{\'z-user-identification-bar--hidden\': hideComponent}" v-else> <div ref="userIdentificationModal"> <vfz-modal ref="vfzUserIdentificationModal" class="z-user-identification-bar__modal" :listen-to-events="true" :open-on-mount="isAuthor ? true : false" :force-visible="false" :is-closable="false" v-cloak> <template v-slot:content> <div class="z-user-identification-bar__modal-container" :class="[`z-user-identification-bar--${theme}`]" :style="{ \'background-image\': \'url(\' + modalBackgroundImage + \')\' }"> <div class="z-user-identification-bar__modal-content" :style="{ width: modalInnerWidth }" :class="{\'z-user-identification-bar__modal-gradient\': modalBackgroundImage }"> <p class="z-user-identification-bar__modal-label vfz-heading__h4">{{ label }}</p> <p class="z-user-identification-bar__modal-title vfz-heading__h2">{{ title }}</p> <div class="z-user-identification-bar__modal-button-wrapper"> <button class="btn" :class="buttonTheme" type="button" @click="submitUserChoice(\'yes\')"> {{ yesButtonLabel }} </button> <button class="btn" :class="buttonTheme" type="button" @click="submitUserChoice(\'no\')"> {{ noButtonLabel }} </button> </div> </div> </div> </template> </vfz-modal> </div> </div> '}},5301:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=i(9335),r=i(7877),a=i(8206);var o={name:"z-user-identification",props:{b2cOptionText:{type:String,required:!0},b2bOptionShowAs:{type:String,required:!1,default:"button",validator:e=>["button","checkbox"].includes(e)},b2bOptionText:{type:String,required:!0},submitButtonLabel:{type:String,required:!1,default:""},submitButtonLabelWhenB2bCheckboxIsTrue:{type:String,required:!1,default:""},submitButtonUrlWhenB2bCheckboxIsTrue:{type:String,required:!1,default:"#"},prospectOptionText:{type:String,required:!0},isAuthor:{type:Boolean,default:!1,required:!1}},data(){return{userType:a.C.UNKNOWN,showProspectQuestion:!0,hasRfsResult:!1,isCheckedB2bCheckbox:!1,isB2bVariant:!1}},computed:{...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapState)("targeting",["targeting"]),...(0,s.mapGetters)("targeting",["ziggoCustMarket"]),prospectQuestionOptions(){const e=[{label:this.b2cOptionText,value:a.C.B2C},{label:this.prospectOptionText,value:a.C.UNKNOWN}];return"button"===this.b2bOptionShowAs&&e.splice(1,0,{label:this.b2bOptionText,value:a.C.B2B}),JSON.stringify(e)},b2BCustomerOptions(){const e=[{label:this.b2bOptionText,value:"true"}];return JSON.stringify(e)},isB2b(){return this.userType===a.C.B2B},isCustomer(){return this.isB2bVariant&&this.userType===a.C.B2B||!this.isB2bVariant&&this.userType===a.C.B2C}},watch:{availabilityDataIsFetched(e){e?this.onRfsCheckerResult():this.onChangeAddress()}},mounted(){this.isB2bVariant="button"===this.b2bOptionShowAs,this.getUserInfoFromDdm()},methods:{...(0,s.mapMutations)("targeting",["setDdmData"]),...(0,s.mapActions)("targeting",["ddmTrigger","ddmGet"]),async getUserInfoFromDdm(){await this.ddmGet({key:"targeting.customOffer"}),await this.ddmGet({key:"user.custMarket.ziggo",defaultValue:a.C.UNKNOWN});let e=this.ziggoCustMarket;[a.C.B2B,a.C.B2C].includes(e)&&("checkbox"===this.b2bOptionShowAs&&e===a.C.B2B&&(e=a.C.B2C,this.$refs.isB2bCheckbox.val="true",this.isCheckedB2bCheckbox=!0),this.$refs.isProspectOptiongroup.val=e,this.userType=e),this.persistUsersAnswerOnDdm()},async onProspectQuestionAnswered(e){this.hasRfsResult&&e.value!==a.C.B2B&&(this.userType=a.C.B2B,this.hasRfsResult=!1,await this.$nextTick()),this.userType=e.value,this.persistUsersAnswerOnDdm()},onRfsCheckerResult(){this.showProspectQuestion=!1,this.hasRfsResult=!0},onChangeAddress(){this.showProspectQuestion=!0,this.hasRfsResult=!1},onChangeB2bCheckbox(){this.isCheckedB2bCheckbox=!!this.$refs.isB2bCheckbox.val},onSubmitForm(){r.A.$emit("rfs-checker:submit")},setCustomOffer(){let e="";switch(this.userType){case a.C.B2C:e=a.h.B2C;break;case a.C.B2B:e=a.h.B2B;break;default:this.targeting.customOffer&&![a.h.B2B,a.h.B2C].includes(this.targeting.customOffer)&&(e=this.targeting.customOffer)}this.setDdmData({key:"targeting.customOffer",value:e})},persistUsersAnswerOnDdm(){const e={cust_status_ziggo:"probNonCust",market_ziggo:this.userType};let t="no";this.userType!==a.C.UNKNOWN&&(e.cust_status_ziggo="probCust",t="yes"),this.ddmTrigger({key:"user_input.ziggo_internet",value:{...e,internet:t}}),this.setDdmData({key:"sources.user_input",value:{...e,internet:t}}),this.setDdmData({key:"user.custStatus.ziggo",value:e.cust_status_ziggo}),this.setDdmData({key:"user.custMarket.ziggo",value:this.userType}),this.setCustomOffer()}},template:'<div class="z-user-identification vfz-shadow--xs bg-white" :class="{ \'z-user-identification--has-b2b-checkbox\': b2bOptionShowAs === \'checkbox\' }"> <div class="z-user-identification__prospect-question" v-show="isCustomer || showProspectQuestion"> <slot name="prospect-question"/> <vfz-optiongroup ref="isProspectOptiongroup" :required="true" type="radio" :options="prospectQuestionOptions" id="user-identification-prospect-question" name="user-identification-prospect-question" :boxed="true" :horizontal="true" default-value="unknown" @change="onProspectQuestionAnswered"> </vfz-optiongroup> </div> <form v-if="!isCustomer" v-submit="onSubmitForm"> <slot name="rfs-checker" v-if="!isB2b"/> <div v-if="b2bOptionShowAs === \'checkbox\' && !hasRfsResult"> <vfz-optiongroup ref="isB2bCheckbox" type="checkbox" :options="b2BCustomerOptions" :id="\'ff-\' + b2bOptionText" :name="\'ff-\' + b2bOptionText" :data-test="\'ff-\' + b2bOptionText" :boxed="false" @change="onChangeB2bCheckbox"> </vfz-optiongroup> <a class="btn btn-primary" v-show="isCheckedB2bCheckbox" :href="submitButtonUrlWhenB2bCheckboxIsTrue"> {{ submitButtonLabelWhenB2bCheckboxIsTrue }} </a> <button class="vfz-spacing-top vfz-spacing-bottom btn btn-primary" v-show="!isCheckedB2bCheckbox" type="submit" data-click-cat="click.button" :data-click-action="submitButtonLabel" :data-click-label="submitButtonLabel" :data-test="submitButtonLabel"> <span class="btn-title">{{ submitButtonLabel }}</span> </button> </div> </form> <p v-if="isAuthor"> <strong>For editors:</strong> Configure the message and links in case the user chooses that they are a customer. </p> <div class="z-user-identification__customer-result" v-if="isAuthor || isCustomer"> <slot name="customer-result"/> </div> </div> '}},1626:function(e,t,i){i.r(t),i.d(t,{default:function(){return l}});var s=i(9335),r=i(9286),a=i(8412),o=i(4226),d=i(9176),n=i(8206);const c="user.custStatus.vf";var l={name:"z-vodafone-benefits",mixins:[o.A],props:{productId:{type:String,required:!0}},data(){return{isVFCustomer:!1,isVisible:!0}},computed:{...(0,s.mapState)("bundleBuilder",["selectedItems","availableItems","endpoint"]),...(0,s.mapState)("addressData",["availabilityDataIsFetched"]),...(0,s.mapState)("targeting",["sources"]),...(0,s.mapGetters)("targeting",["ziggoCustMarket"]),...(0,s.mapGetters)("addressData",["connectionTypeSupported","internetAvailable","readyForCheckout"]),processedProductId(){return this.productId.split("/").pop()}},watch:{"sources.user_input.cust_status_ziggo":function(){this.updateVisibility()},"sources.user_input.market_ziggo":function(){this.updateVisibility()}},mounted(){this.init()},methods:{...(0,s.mapActions)("bundleBuilder",["toggleProduct","addAvailableItems"]),init(){this.availableItems.includes(this.processedProductId)||this.addAvailableItems([this.processedProductId]),this.checkForPreselection();const e=this.selectedItems.some((e=>e.id===this.processedProductId));this.isVFCustomer=e},async checkForPreselection(){let e=!1;const t=a.A.getQueryString("vf");if("true"===t?.toLowerCase())e=!0;else{const t=await r.A.ddmGet(c,null);[d.A.CUST,d.A.PROBCUST].includes(t)&&(e=!0)}e&&(this.isVFCustomer=!0)},handleClick(e){this.isVFCustomer!==e&&(this.isVFCustomer=e,this.toggleProduct(this.processedProductId),r.A.ddmTrigger("user_input.vf_cust",{data:{component:"benefit toggle",choice:this.isVFCustomer,ga_data:{category:"engagement",action:"converged toggle",label:this.isVFCustomer}}}),r.A.ddmSet(c,this.isVFCustomer?d.A.CUST:null))},updateVisibility(){const e=this.ziggoCustMarket;if("b2bSoHo"===this.endpoint)this.isVisible=e!==n.C.B2B;else{const e=[d.A.PROBCUST,d.A.CUST].includes(this.sources.user_input.cust_status_ziggo);this.isVisible=!e}}}}},2541:function(e,t,i){i.d(t,{A:function(){return r}});var s=i(8579);var r={props:{uuid:{type:String,required:!0}},data(){return{moreInformationContent:"",moreInformationTitle:""}},computed:{moreInformationModalRef(){return`moreInformationModal${this.uuid}`}},methods:{async onClickMoreInformation(e){const t=await(0,s.A)(e);this.triggerModal(t)},triggerModal({title:e,content:t}){const i=this.getMoreInformationModalRef(this.moreInformationModalRef);this.moreInformationTitle=e,this.moreInformationContent=t,i?.openModal()},getMoreInformationModalRef(e){return this.$root.$refs[e]}}}}}]);</script>
</body>
</html>
