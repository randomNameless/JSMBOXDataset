<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>application-636ba3e8a87f41752738e5ccfcac80c6899b4d452155cb0eb80749ca4e6eac0e.html</title>
</head>
<body>

<script>
!function(e){var t;if("function"==typeof define&&define.amd&&(define(e),t=!0),"object"==typeof exports&&(module.exports=e(),t=!0),!t){var n=window.Cookies,i=window.Cookies=e();i.noConflict=function(){return window.Cookies=n,i}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function n(i){function o(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},o.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var r=JSON.stringify(n);/^[\{\[]/.test(r)&&(n=r)}catch(e){}n=i.write?i.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var l in s)s[l]&&(a+="; "+l,!0!==s[l]&&(a+="="+s[l].split(";")[0]));return document.cookie=t+"="+n+a}}function r(e,n){if("undefined"!=typeof document){for(var o={},s=document.cookie?document.cookie.split("; "):[],r=0;r<s.length;r++){var a=s[r].split("="),l=a.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(a[0]);if(l=(i.read||i)(l,c)||t(l),n)try{l=JSON.parse(l)}catch(e){}if(o[c]=l,e===c)break}catch(e){}}return e?o[e]:o}}return o.set=s,o.get=function(e){return r(e,!1)},o.getJSON=function(e){return r(e,!0)},o.remove=function(t,n){s(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}return n((function(){}))})),function(e,t){"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e():t.rangy=e()}((function(){function e(e,t){var n=typeof e[t];return n==C||!(n!=w||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=w||!e[t])}function n(e,t){return typeof e[t]!=$}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function o(e){return e&&R(e,k)&&N(e,x)}function s(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function r(t){typeof console!=$&&e(console,"log")&&console.log(t)}function a(e,t){P&&t?alert(e):r(e)}function l(e){I.initialized=!0,I.supported=!1,a("Rangy is not supported in this environment. Reason: "+e,I.config.alertOnFail)}function c(e){a("Rangy warning: "+e,I.config.alertOnWarn)}function d(e){return e.message||e.description||String(e)}function u(){if(P&&!I.initialized){var t,n=!1,i=!1;e(document,"createRange")&&(t=document.createRange(),R(t,T)&&N(t,S)&&(n=!0));var a,c=s(document);if(!c||"body"!=c.nodeName.toLowerCase())return void l("No body element found");if(c&&e(c,"createTextRange")&&(o(t=c.createTextRange())&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");for(var u in I.initialized=!0,I.features={implementsDomRange:n,implementsTextRange:i},O)(a=O[u])instanceof m&&a.init(a,I);for(var h=0,f=z.length;f>h;++h)try{z[h](I)}catch(e){r("Rangy init listener threw an exception. Continuing. Detail: "+d(e))}}}function h(e,t,n){n&&(e+=" in module "+n.name),I.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function f(e,t,n,i){e[t]=function(){return h(t,n,i),e[n].apply(e,D.toArray(arguments))}}function p(e){e=e||window,u();for(var t=0,n=M.length;n>t;++t)M[t](e)}function m(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function g(e,t,n){var i=new m(e,t,(function(t){if(!t.initialized){t.initialized=!0;try{n(I,t),t.supported=!0}catch(t){r("Module '"+e+"' failed to load: "+d(t)),t.stack&&r(t.stack)}}}));return O[e]=i,i}function v(){}function _(){}var y,b,w="object",C="function",$="undefined",S=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],T=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],x=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],k=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],R=i(e),E=i(t),N=i(n),A=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,i=e.length;i>n;++n)t(e[n],n)},O={},P=typeof window!=$&&typeof document!=$,D={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:R,areHostObjects:E,areHostProperties:N,isTextRange:o,getBody:s,forEach:A},I={version:"1.3.0",initialized:!1,isBrowser:P,supported:!0,util:D,features:{},modules:O,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==$||rangyAutoInitialize}};I.fail=l,I.warn=c,!{}.hasOwnProperty?l("hasOwnProperty not supported"):(D.extend=y=function(e,t,n){var i,o;for(var s in t)t.hasOwnProperty(s)&&(i=e[s],o=t[s],n&&null!==i&&"object"==typeof i&&null!==o&&"object"==typeof o&&y(i,o,!0),e[s]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},D.createOptions=function(e,t){var n={};return y(n,t),e&&y(n,e),n}),P||l("Rangy can only run in a browser"),function(){var e;if(P){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,i=e.length;i>n;++n)t[n]=e[n];return t}),D.toArray=e}(),P&&(e(document,"addEventListener")?b=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?b=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),D.addListener=b);var z=[];D.deprecationNotice=h,D.createAliasForDeprecatedMethod=f,I.init=u,I.addInitListener=function(e){I.initialized?e(I):z.push(e)};var M=[];I.addShimListener=function(e){M.push(e)},P&&(I.shim=I.createMissingNativeApi=p,f(I,"createMissingNativeApi","shim")),m.prototype={init:function(){for(var e,t,n=this.dependencies||[],i=0,o=n.length;o>i;++i){if(t=n[i],!((e=O[t])&&e instanceof m))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){I.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){I.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},I.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var i=g(e,n,t);I.initialized&&I.supported&&i.init()},I.createCoreModule=function(e,t,n){g(e,t,n)},I.RangePrototype=v,I.rangePrototype=new v,I.selectionPrototype=new _,I.createCoreModule("DomUtil",[],(function(e,t){function n(e){var t;return typeof e.namespaceURI==A||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function o(e){for(var t=0;e=e.previousSibling;)++t;return t}function s(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function r(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(M(i,n))return n;return null}function a(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t){return a(e,t,!0)}function c(e,t,n){for(var i,o=n?e:e.parentNode;o;){if((i=o.parentNode)===t)return o;o=i}return null}function d(e){var t=e.nodeType;return 3==t||4==t||8==t}function u(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function h(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function f(e,t,n){var i=e.cloneNode(!1);if(i.deleteData(0,t),e.deleteData(t,e.length-t),h(i,e),n)for(var s,r=0;s=n[r++];)s.node==e&&s.offset>t?(s.node=i,s.offset-=t):s.node==e.parentNode&&s.offset>o(e)&&++s.offset;return i}function p(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=A)return e.ownerDocument;if(typeof e.document!=A)return e.document;if(e.parentNode)return p(e.parentNode);throw t.createError("getDocument: no document found for node")}function m(e){var n=p(e);if(typeof n.defaultView!=A)return n.defaultView;if(typeof n.parentWindow!=A)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=A)return e.contentDocument;if(typeof e.contentWindow!=A)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){if(typeof e.contentWindow!=A)return e.contentWindow;if(typeof e.contentDocument!=A)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function _(e){return e&&O.isHostMethod(e,"setTimeout")&&O.isHostObject(e,"document")}function y(e,t,n){var i;if(e?O.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):p(e):_(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i}function b(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,i,s){var a,l,d,u,h;if(e==i)return n===s?0:s>n?-1:1;if(a=c(i,e,!0))return n<=o(a)?-1:1;if(a=c(e,i,!0))return o(a)<s?-1:1;if(!(l=r(e,i)))throw new Error("comparePoints error: nodes have no common ancestor");if((d=e===l?l:c(e,l,!0))===(u=i===l?l:c(i,l,!0)))throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=l.firstChild;h;){if(h===d)return-1;if(h===u)return 1;h=h.nextSibling}}function C(e){try{return e.parentNode,!1}catch(e){return!0}}function $(e){if(!e)return"[No node]";if(H&&C(e))return"[Broken node]";if(d(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+o(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function S(e){for(var t,n=p(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function T(e,t,n){var i=P(e),o=e.createElement("div");o.contentEditable=""+!!n,t&&(o.innerHTML=t);var s=i.firstChild;return s?i.insertBefore(o,s):i.appendChild(o),o}function x(e){return e.parentNode.removeChild(e)}function k(e){this.root=e,this._next=e}function R(e){return new k(e)}function E(e,t){this.node=e,this.offset=t}function N(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var A="undefined",O=e.util,P=O.getBody;O.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),O.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var D=document.createElement("div");O.areHostMethods(D,["insertBefore","appendChild","cloneNode"]||!O.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),O.isHostProperty(D,"innerHTML")||t.fail("Element is missing innerHTML property");var I=document.createTextNode("test");O.areHostMethods(I,["splitText","deleteData","insertData","appendData","cloneNode"]||!O.areHostObjects(D,["previousSibling","nextSibling","childNodes","parentNode"])||!O.areHostProperties(I,["data"]))||t.fail("Incomplete Text Node implementation");var z,M=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},H=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",H=C(n),e.features.crashyTextNodes=H}(),typeof window.getComputedStyle!=A?z=function(e,t){return m(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=A?z=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),k.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},E.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+$(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},N.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},N.prototype.toString=function(){return this.message},e.dom={arrayContains:M,isHtmlNamespace:n,parentElement:i,getNodeIndex:o,getNodeLength:s,getCommonAncestor:r,isAncestorOf:a,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:d,isTextOrCommentNode:u,insertAfter:h,splitDataNode:f,getDocument:p,getWindow:m,getIframeWindow:v,getIframeDocument:g,getBody:P,isWindow:_,getContentDocument:y,getRootContainer:b,comparePoints:w,isBrokenNode:C,inspectNode:$,getComputedStyleProperty:z,createTestElement:T,removeNode:x,fragmentFromNodeChildren:S,createIterator:R,DomPosition:E},e.DOMException=N})),I.createCoreModule("DomRange",["DomUtil"],(function(e){function t(e,t){return 3!=e.nodeType&&(j(e,t.startContainer)||j(e,t.endContainer))}function n(e){return e.document||W(e.startContainer)}function i(e){return Y(e.startContainer)}function o(e){return new z(e.parentNode,L(e))}function s(e){return new z(e.parentNode,L(e)+1)}function r(e,t,n){var i=11==e.nodeType?e.firstChild:e;return H(t)?n==t.length?D.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:F(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function a(e,t,i){if(S(e),S(t),n(t)!=n(e))throw new M("WRONG_DOCUMENT_ERR");var o=B(e.startContainer,e.startOffset,t.endContainer,t.endOffset),s=B(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return i?0>=o&&s>=0:0>o&&s>0}function l(e){for(var t,i,o,s=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(o=e.getSubtreeIterator(),i.appendChild(l(o)),o.detach()),10==i.nodeType)throw new M("HIERARCHY_REQUEST_ERR");s.appendChild(i)}return s}function c(e,t,n){var i,o,s,r;for(n=n||{stop:!1};s=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(s))return void(n.stop=!0);if(c(r=e.getSubtreeIterator(),t,n),r.detach(),n.stop)return}else for(i=D.createIterator(s);o=i.next();)if(!1===t(o))return void(n.stop=!0)}function d(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(d(t=e.getSubtreeIterator()),t.detach()):e.remove()}function u(e){for(var t,i,o=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach()):e.remove(),10==t.nodeType)throw new M("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function h(e,t,n){var i,o=!(!t||!t.length),s=!!n;o&&(i=new RegExp("^("+t.join("|")+")$"));var r=[];return c(new p(e,!1),(function(t){if(!(o&&!i.test(t.nodeType)||s&&!n(t))){var a=e.startContainer;if(t!=a||!H(a)||e.startOffset!=a.length){var l=e.endContainer;t==l&&H(l)&&0==e.endOffset||r.push(t)}}})),r}function f(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+D.inspectNode(e.startContainer)+":"+e.startOffset+", "+D.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function p(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&H(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||H(this.sc)?q(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||H(this.ec)?q(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.nodeType,V(e,i))return o;o=o.parentNode}return null}}function g(e,t){if(ie(e,t))throw new M("INVALID_NODE_TYPE_ERR")}function v(e,t){if(!V(t,e.nodeType))throw new M("INVALID_NODE_TYPE_ERR")}function _(e,t){if(0>t||t>(H(e)?e.length:e.childNodes.length))throw new M("INDEX_SIZE_ERR")}function y(e,t){if(te(e,!0)!==te(t,!0))throw new M("WRONG_DOCUMENT_ERR")}function b(e){if(ne(e,!0))throw new M("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new M(t)}function C(e,t){return t<=(H(e)?e.length:e.childNodes.length)}function $(e){return!!e.startContainer&&!!e.endContainer&&!(G&&(D.isBrokenNode(e.startContainer)||D.isBrokenNode(e.endContainer)))&&Y(e.startContainer)==Y(e.endContainer)&&C(e.startContainer,e.startOffset)&&C(e.endContainer,e.endOffset)}function S(e){if(!$(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function T(e,t){S(e);var n=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,r=n===o;H(o)&&s>0&&s<o.length&&F(o,s,t),H(n)&&i>0&&i<n.length&&(n=F(n,i,t),r?(s-=i,o=n):o==n.parentNode&&s>=L(n)&&s++,i=0),e.setStartAndEnd(n,i,o,s)}function x(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function k(e){e.START_TO_START=le,e.START_TO_END=ce,e.END_TO_END=de,e.END_TO_START=ue,e.NODE_BEFORE=he,e.NODE_AFTER=fe,e.NODE_BEFORE_AND_AFTER=pe,e.NODE_INSIDE=me}function R(e){k(e),k(e.prototype)}function E(e,t){return function(){S(this);var n,i=this.startContainer,o=this.startOffset,r=this.commonAncestorContainer,a=new p(this,!0);i!==r&&(i=(n=s(q(i,r,!0))).node,o=n.offset),c(a,b),a.reset();var l=e(a);return a.detach(),t(this,i,o,i,o),l}}function N(n,i){function r(e,t){return function(n){v(n,Q),v(Y(n),J);var i=(e?o:s)(n);(t?a:l)(this,i.node,i.offset)}}function a(e,t,n){var o=e.endContainer,s=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((Y(t)!=Y(o)||1==B(t,n,o,s))&&(o=t,s=n),i(e,t,n,o,s))}function l(e,t,n){var o=e.startContainer,s=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((Y(t)!=Y(o)||-1==B(t,n,o,s))&&(o=t,s=n),i(e,o,s,t,n))}var c=function(){};c.prototype=e.rangePrototype,n.prototype=new c,I.extend(n.prototype,{setStart:function(e,t){g(e,!0),_(e,t),a(this,e,t)},setEnd:function(e,t){g(e,!0),_(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],o=t,s=n;switch(e.length){case 3:s=e[2];break;case 4:o=e[2],s=e[3]}i(this,t,n,o,s)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:r(!0,!0),setStartAfter:r(!1,!0),setEndBefore:r(!0,!1),setEndAfter:r(!1,!1),collapse:function(e){S(this),e?i(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):i(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){g(e,!0),i(this,e,0,e,U(e))},selectNode:function(e){g(e,!1),v(e,Q);var t=o(e),n=s(e);i(this,t.node,t.offset,n.node,n.offset)},extractContents:E(u,i),deleteContents:E(d,i),canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},splitBoundaries:function(){T(this)},splitBoundariesPreservingPositions:function(e){T(this,e)},normalizeBoundaries:function(){S(this);var e,t=this.startContainer,n=this.startOffset,o=this.endContainer,s=this.endOffset,r=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(o=e,s=e.length,e.appendData(t.data),X(t))},a=function(e){var i=e.previousSibling;if(i&&i.nodeType==e.nodeType){t=e;var r=e.length;if(n=i.length,e.insertData(0,i.data),X(i),t==o)s+=n,o=t;else if(o==e.parentNode){var a=L(e);s==a?(o=e,s=r):s>a&&s--}}},l=!0;if(H(o))s==o.length?r(o):0==s&&((e=o.previousSibling)&&e.nodeType==o.nodeType&&(s=e.length,t==o&&(l=!1),e.appendData(o.data),X(o),o=e));else{if(s>0){var c=o.childNodes[s-1];c&&H(c)&&r(c)}l=!this.collapsed}if(l){if(H(t))0==n?a(t):n==t.length&&((e=t.nextSibling)&&e.nodeType==t.nodeType&&(o==e&&(o=t,s+=t.length),t.appendData(e.data),X(e)));else if(n<t.childNodes.length){var d=t.childNodes[n];d&&H(d)&&a(d)}}else t=o,n=s;i(this,t,n,o,s)},collapseToPoint:function(e,t){g(e,!0),_(e,t),this.setStartAndEnd(e,t)}}),R(n)}function A(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:D.getCommonAncestor(e.startContainer,e.endContainer)}function O(e,t,n,i,o){e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=o,e.document=D.getDocument(t),A(e)}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,A(this)}var D=e.dom,I=e.util,z=D.DomPosition,M=e.DOMException,H=D.isCharacterDataNode,L=D.getNodeIndex,j=D.isOrIsAncestorOf,W=D.getDocument,B=D.comparePoints,F=D.splitDataNode,q=D.getClosestAncestorIn,U=D.getNodeLength,V=D.arrayContains,Y=D.getRootContainer,G=e.features.crashyTextNodes,X=D.removeNode;p.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,H(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!H(n)||n!==this.sc&&n!==this.ec?n.parentNode&&X(n):(e=n===this.sc?this.so:0)!=(t=n===this.ec?this.eo:n.length)&&n.deleteData(e,t-e)},isPartiallySelectedSubtree:function(){return t(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new P(n(this.range));var t=this._current,i=t,o=0,s=t,r=U(t);j(t,this.sc)&&(i=this.sc,o=this.so),j(t,this.ec)&&(s=this.ec,r=this.eo),O(e,i,o,s,r)}return new p(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var Q=[1,3,4,5,7,8,10],J=[2,9,11],K=[5,6,10,12],Z=[1,3,4,5,7,8,10,11],ee=[1,3,4,5,7,8],te=m([9,11]),ne=m(K),ie=m([6,10,12]),oe=document.createElement("style"),se=!1;try{oe.innerHTML="<b>x</b>",se=3==oe.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=se;var re=se?function(e){var t=this.startContainer,n=W(t);if(!t)throw new M("INVALID_STATE_ERR");var i=null;return 1==t.nodeType?i=t:H(t)&&(i=D.parentElement(t)),(i=null===i||"HTML"==i.nodeName&&D.isHtmlNamespace(W(i).documentElement)&&D.isHtmlNamespace(i)?n.createElement("body"):i.cloneNode(!1)).innerHTML=e,D.fragmentFromNodeChildren(i)}:function(e){var t=n(this).createElement("body");return t.innerHTML=e,D.fragmentFromNodeChildren(t)},ae=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],le=0,ce=1,de=2,ue=3,he=0,fe=1,pe=2,me=3;I.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){S(this),y(this.startContainer,t.startContainer);var n,i,o,s,r=e==ue||e==le?"start":"end",a=e==ce||e==le?"start":"end";return n=this[r+"Container"],i=this[r+"Offset"],o=t[a+"Container"],s=t[a+"Offset"],B(n,i,o,s)},insertNode:function(e){if(S(this),v(e,Z),b(this.startContainer),j(e,this.startContainer))throw new M("HIERARCHY_REQUEST_ERR");var t=r(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t;if(S(this),this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&H(this.startContainer))return(e=this.startContainer.cloneNode(!0)).data=e.data.slice(this.startOffset,this.endOffset),(t=n(this).createDocumentFragment()).appendChild(e),t;var i=new p(this,!0);return e=l(i),i.detach(),e},canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new p(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(v(e,ee),!this.canSurroundContents())throw new M("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);r(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(n(this)),i=ae.length;i--;)t[e=ae[i]]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&H(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new p(this,!0);return c(n,(function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)})),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=L(e);if(!t)throw new M("NOT_FOUND_ERR");var i=this.comparePoint(t,n),o=this.comparePoint(t,n+1);return 0>i?o>0?pe:he:o>0?fe:me},comparePoint:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),B(e,t,this.startContainer,this.startOffset)<0?-1:B(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:re,toHtml:function(){return x(this)},intersectsNode:function(e,t){if(S(this),Y(e)!=i(this))return!1;var n=e.parentNode,o=L(e);if(!n)return!0;var s=B(n,o,this.endContainer,this.endOffset),r=B(n,o+1,this.startContainer,this.startOffset);return t?0>=s&&r>=0:0>s&&r>0},isPointInRange:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),B(e,t,this.startContainer,this.startOffset)>=0&&B(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return a(this,e,!1)},intersectsOrTouchesRange:function(e){return a(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=B(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=B(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange();return-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==B(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==B(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new M("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,U(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var i=n.pop();return t.setEnd(i,i.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return S(this),h(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var i=n(this),o=e.createRange(i);t=t||D.getBody(i),o.selectNodeContents(t);var s=this.intersection(o),r=0,a=0;return s&&(o.setEnd(s.startContainer,s.startOffset),a=(r=o.toString().length)+s.toString().length),{start:r,end:a,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var i,o,s,r,a=[t],l=!1,c=!1;!c&&(i=a.pop());)if(3==i.nodeType)o=n+i.length,!l&&e.start>=n&&e.start<=o&&(this.setStart(i,e.start-n),l=!0),l&&e.end>=n&&e.end<=o&&(this.setEnd(i,e.end-n),c=!0),n=o;else for(s=(r=i.childNodes).length;s--;)a.push(r[s])},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},isValid:function(){return $(this)},inspect:function(){return f(this)},detach:function(){}}),N(P,O),I.extend(P,{rangeProperties:ae,RangeIterator:p,copyComparisonConstants:R,createPrototypeRange:N,inspect:f,toHtml:x,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=P})),I.createCoreModule("WrappedRange",["DomRange"],(function(e,t){var n,i,o=e.dom,s=e.util,r=o.DomPosition,a=e.DomRange,l=o.getBody,c=o.getContentDocument,d=o.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function i(e){for(var t,n=h.length;n--;)e[t=h[n]]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function r(e,t,n,i,o){var s=e.startContainer!==t||e.startOffset!=n,r=e.endContainer!==i||e.endOffset!=o,a=!e.equals(e.nativeRange);(s||r||a)&&(e.setEnd(i,o),e.setStart(t,n))}var d,u,h=a.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},a.createPrototypeRange(n,r),(d=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),i(this)},d.cloneContents=function(){return this.nativeRange.cloneContents()},d.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},d.collapse=function(e){this.nativeRange.collapse(e),i(this)},d.cloneRange=function(){return new n(this.nativeRange.cloneRange())},d.refresh=function(){i(this)},d.toString=function(){return this.nativeRange.toString()};var f=document.createTextNode("test");l(document).appendChild(f);var p=document.createRange();p.setStart(f,0),p.setEnd(f,0);try{p.setStart(f,1),d.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},d.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},u=function(e){return function(t){this.nativeRange[e](t),i(this)}}}catch(e){d.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},d.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},u=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}i(this)}}}d.setStartBefore=u("setStartBefore","setEndBefore"),d.setStartAfter=u("setStartAfter","setEndAfter"),d.setEndBefore=u("setEndBefore","setStartBefore"),d.setEndAfter=u("setEndAfter","setStartAfter"),d.selectNodeContents=function(e){this.setStartAndEnd(e,0,o.getNodeLength(e))},p.selectNodeContents(f),p.setEnd(f,3);var m=document.createRange();m.selectNodeContents(f),m.setEnd(f,4),m.setStart(f,2),d.compareBoundaryPoints=-1==p.compareBoundaryPoints(p.START_TO_END,m)&&1==p.compareBoundaryPoints(p.END_TO_START,m)?function(e,t){return e==(t=t.nativeRange||t).START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var g=document.createElement("div");g.innerHTML="123";var v=g.firstChild,_=l(document);_.appendChild(g),p.setStart(v,1),p.setEnd(v,2),p.deleteContents(),"13"==v.data&&(d.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},d.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),_.removeChild(g),_=null,s.isHostMethod(p,"createContextualFragment")&&(d.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(f),d.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=c(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var u=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var i=n.parentElement();(n=e.duplicate()).collapse(!1);var s=n.parentElement(),r=i==s?i:o.getCommonAncestor(i,s);return r==t?r:o.getCommonAncestor(t,r)},h=function(e){return 0==e.compareEndPoints("StartToEnd",e)},f=function(e,t,n,i,s){var a=e.duplicate();a.collapse(n);var l=a.parentElement();if(o.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var c=new r(l.parentNode,o.getNodeIndex(l));return{boundaryPosition:c,nodeInfo:{nodeIndex:c.offset,containerElement:c.node}}}var u=o.getDocument(l).createElement("span");u.parentNode&&o.removeNode(u);for(var h,f,p,m,g,v=n?"StartToStart":"StartToEnd",_=s&&s.containerElement==l?s.nodeIndex:0,y=l.childNodes.length,b=y,w=b;w==y?l.appendChild(u):l.insertBefore(u,l.childNodes[w]),a.moveToElementText(u),0!=(h=a.compareEndPoints(v,e))&&_!=b;){if(-1==h){if(b==_+1)break;_=w}else b=b==_+1?_:w;w=Math.floor((_+b)/2),l.removeChild(u)}if(g=u.nextSibling,-1==h&&g&&d(g)){var C;if(a.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(g.data)){var $=a.duplicate(),S=$.text.replace(/\r\n/g,"\r").length
;for(C=$.moveStart("character",S);-1==(h=$.compareEndPoints("StartToEnd",$));)C++,$.moveStart("character",1)}else C=a.text.length;m=new r(g,C)}else f=(i||!n)&&u.previousSibling,m=(p=(i||n)&&u.nextSibling)&&d(p)?new r(p,0):f&&d(f)?new r(f,f.data.length):new r(l,o.getNodeIndex(u));return o.removeNode(u),{boundaryPosition:m,nodeInfo:{nodeIndex:w,containerElement:l}}},p=function(e,t){var n,i,s,r,a=e.offset,c=o.getDocument(e.node),u=l(c).createTextRange(),h=d(e.node);return h?i=(n=e.node).parentNode:(n=a<(r=e.node.childNodes).length?r[a]:null,i=e.node),(s=c.createElement("span")).innerHTML="&#feff;",n?i.insertBefore(s,n):i.appendChild(s),u.moveToElementText(s),u.collapse(!t),i.removeChild(s),h&&u[t?"moveStart":"moveEnd"]("character",a),u};i=function(e){this.textRange=e,this.refresh()},i.prototype=new a(document),i.prototype.refresh=function(){var e,t,n,i=u(this.textRange);h(this.textRange)?t=e=f(this.textRange,i,!0,!0).boundaryPosition:(e=(n=f(this.textRange,i,!0,!1)).boundaryPosition,t=f(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},a.copyComparisonConstants(i);var m=function(e){if(e.collapsed)return p(new r(e.startContainer,e.startOffset),!0);var t=p(new r(e.startContainer,e.startOffset),!0),n=p(new r(e.endContainer,e.endOffset),!1),i=l(a.getRangeDocument(e)).createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i};if(i.rangeToTextRange=m,i.prototype.toTextRange=function(){return m(this)},e.WrappedTextRange=i,!e.features.implementsDomRange||e.config.preferTextRange){var g=Function("return this;")();void 0===g.Range&&(g.Range=i),e.createNativeRange=function(e){return e=c(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=i}}e.createRange=function(n){return n=c(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=c(e,t,"createRangyRange"),new a(e)},s.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),s.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener((function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null}))})),I.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],(function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function i(e,n){if(e){if(R.isWindow(e))return e;if(e instanceof v)return e.win;var i=R.getContentDocument(e,t,n);return R.getWindow(i)}return window}function o(e){return i(e,"getWinSelection").getSelection()}function s(e){return i(e,"getDocSelection").document.selection}function r(e){var t=!1;return e.anchorNode&&(t=1==R.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function a(e,t,n){var i=n?"end":"start",o=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function d(t){var n;return t instanceof A?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof O?n=t.nativeRange:I.implementsDomRange&&t instanceof R.getWindow(t.startContainer).Range&&(n=t),n}function u(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!R.isAncestorOf(e[0],e[t]))return!1;return!0}function h(e){var n=e.getNodes();if(!u(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function f(e){return!!e&&void 0!==e.text}function p(e,t){var n=new O(t);e._ranges=[n],a(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function m(t){if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else{var n=t.docSelection.createRange();if(f(n))p(t,n);else{t.rangeCount=n.length;for(var i,o=M(n.item(0)),s=0;s<t.rangeCount;++s)(i=e.createRange(o)).selectNode(n.item(s)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,a(t,t._ranges[t.rangeCount-1],!1)}}}function g(e,n){for(var i=e.docSelection.createRange(),o=h(n),s=M(i.item(0)),r=H(s).createControlRange(),a=0,l=i.length;l>a;++a)r.add(i.item(a));try{r.add(o)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}r.select(),m(e)}function v(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function _(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function y(e,t){for(var n,i,o=te.length;o--;)if(i=(n=te[o]).selection,"deleteAll"==t)_(i);else if(n.win==e)return"delete"==t?(te.splice(o,1),!0):i;return"deleteAll"==t&&(te.length=0),null}function b(e,n){for(var i,o=M(n[0].startContainer),s=H(o).createControlRange(),r=0,a=n.length;a>r;++r){i=h(n[r]);try{s.add(i)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}s.select(),m(e)}function w(e,t){if(e.win.document!=M(t))throw new P("WRONG_DOCUMENT_ERR")}function C(t){return function(n,i){var o;this.rangeCount?(o=this.getRangeAt(0))["set"+(t?"Start":"End")](n,i):(o=e.createRange(this.win.document)).setStartAndEnd(n,i),this.setSingleRange(o,this.isBackward())}}function $(e){var t=[],n=new D(e.anchorNode,e.anchorOffset),i=new D(e.focusNode,e.focusOffset),o="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var s=0,r=e.rangeCount;r>s;++s)t[s]=A.inspect(e.getRangeAt(s));return"["+o+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+i.inspect()+"]"}e.config.checkSelectionRanges=!0;var S,T,x="boolean",k="number",R=e.dom,E=e.util,N=E.isHostMethod,A=e.DomRange,O=e.WrappedRange,P=e.DOMException,D=R.DomPosition,I=e.features,z="Control",M=R.getDocument,H=R.getBody,L=A.rangesEqual,j=N(window,"getSelection"),W=E.isHostObject(document,"selection");I.implementsWinGetSelection=j,I.implementsDocSelection=W;var B=W&&(!j||e.config.preferTextRange);if(B)S=s,e.isSelectionValid=function(e){var t=i(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||M(n.createRange().parentElement())==t};else{if(!j)return t.fail("Neither document.selection or window.getSelection() detected."),!1;S=o,e.isSelectionValid=function(){return!0}}e.getNativeSelection=S;var F=S();if(!F)return t.fail("Native selection was null (possibly issue 138?)"),!1;var q=e.createNativeRange(document),U=H(document),V=E.areHostProperties(F,["anchorNode","focusNode","anchorOffset","focusOffset"]);I.selectionHasAnchorAndFocus=V;var Y=N(F,"extend");I.selectionHasExtend=Y;var G=typeof F.rangeCount==k;I.selectionHasRangeCount=G;var X=!1,Q=!0,J=Y?function(t,n){var i=A.getRangeDocument(n),o=e.createRange(i);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(d(o)),t.extend(n.startContainer,n.startOffset)}:null;E.areHostMethods(F,["addRange","getRangeAt","removeAllRanges"])&&typeof F.rangeCount==k&&I.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,i=n>1,o=[],s=r(t),a=0;n>a;++a)o[a]=t.getRangeAt(a);var l=R.createTestElement(document,"",!1),c=l.appendChild(document.createTextNode("\xa0\xa0\xa0")),d=document.createRange();if(d.setStart(c,1),d.collapse(!0),t.removeAllRanges(),t.addRange(d),Q=1==t.rangeCount,t.removeAllRanges(),!i){var u=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(u&&parseInt(u[1])>=36)X=!1;else{var h=d.cloneRange();d.setStart(c,0),h.setEnd(c,3),h.setStart(c,2),t.addRange(d),t.addRange(h),X=2==t.rangeCount}}for(R.removeNode(l),t.removeAllRanges(),a=0;n>a;++a)0==a&&s?J?J(t,o[a]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(o[a])):t.addRange(o[a])}}(),I.selectionSupportsMultipleRanges=X,I.collapsedNonEditableSelectionsSupported=Q;var K,Z,ee=!1;U&&N(U,"createControlRange")&&(K=U.createControlRange(),E.areHostProperties(K,["item","add"])&&(ee=!0)),I.implementsControlRange=ee,T=V?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},N(F,"getRangeAt")?Z=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:V&&(Z=function(t){var n=M(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),v.prototype=e.selectionPrototype;var te=[],ne=function(e){if(e&&e instanceof v)return e.refresh(),e;var t=y(e=i(e,"getNativeSelection")),n=S(e),o=W?s(e):null;return t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new v(n,o,e),te.push({win:e,selection:t})),t};e.getSelection=ne,E.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var ie,oe=v.prototype;if(!B&&V&&E.areHostMethods(F,["removeAllRanges","addRange"])){oe.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)};var se=function(e,t){J(e.nativeSelection,t),e.refresh()};oe.addRange=G?function(t,i){if(ee&&W&&this.docSelection.type==z)g(this,t);else if(n(i)&&Y)se(this,t);else{var o;X?o=this.rangeCount:(this.removeAllRanges(),o=0);var s=d(t).cloneRange();try{this.nativeSelection.addRange(s)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1){if(e.config.checkSelectionRanges){var r=Z(this.nativeSelection,this.rangeCount-1);r&&!L(r,t)&&(t=new O(r))}this._ranges[this.rangeCount-1]=t,a(this,t,re(this.nativeSelection)),this.isCollapsed=T(this)}else this.refresh()}}:function(e,t){n(t)&&Y?se(this,e):(this.nativeSelection.addRange(d(e)),this.refresh())},oe.setRanges=function(e){if(ee&&W&&e.length>1)b(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(N(F,"empty")&&N(q,"select")&&ee&&B))return t.fail("No means of selecting a Range or TextRange was found"),!1;oe.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=M(this.anchorNode);else if(this.docSelection.type==z){var t=this.docSelection.createRange();t.length&&(e=M(t.item(0)))}if(e)H(e).createTextRange().select(),this.docSelection.empty()}}catch(e){}c(this)},oe.addRange=function(t){this.docSelection.type==z?g(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,a(this,t,!1))},oe.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?b(this,e):t&&this.addRange(e[0])}}if(oe.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new P("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},B)ie=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=H(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==z?m(t):f(n)?p(t,n):c(t)};else if(N(F,"getRangeAt")&&typeof F.rangeCount==k)ie=function(t){if(ee&&W&&t.docSelection.type==z)m(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));a(t,t._ranges[t.rangeCount-1],re(t.nativeSelection)),t.isCollapsed=T(t)}else c(t)};else{if(!V||typeof F.isCollapsed!=x||typeof q.collapsed!=x||!I.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;ie=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=Z(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=T(e)):c(e)}}oe.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,i=this.anchorOffset;if(ie(this),e){var o=t.length;if(o!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=i)return!0;for(;o--;)if(!L(t[o],this._ranges[o]))return!0;return!1}};var re,ae=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var i=0,o=n.length;o>i;++i)L(t,n[i])||e.addRange(n[i]);e.rangeCount||c(e)};oe.removeRange=ee&&W?function(e){if(this.docSelection.type==z){for(var t=this.docSelection.createRange(),n=h(e),i=M(t.item(0)),o=H(i).createControlRange(),s=!1,r=0,a=t.length;a>r;++r)t.item(r)!==n||s?o.add(t.item(r)):s=!0;o.select(),m(this)}else ae(this,e)}:function(e){ae(this,e)},!B&&V&&I.implementsDomRange?(re=r,oe.isBackward=function(){return re(this)}):re=oe.isBackward=function(){return!1},oe.isBackwards=oe.isBackward,oe.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},oe.collapse=function(t,n){w(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},oe.collapseToStart=function(){if(!this.rangeCount)throw new P("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},oe.collapseToEnd=function(){if(!this.rangeCount)throw new P("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},oe.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},oe.deleteFromDocument=function(){if(ee&&W&&this.docSelection.type==z){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),R.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var i=0,o=n.length;o>i;++i)n[i].deleteContents();this.addRange(n[o-1])}}},oe.eachRange=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(e(this.getRangeAt(n)))return t},oe.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},oe.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},oe.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange((function(i){n.push(i[e].apply(i,t||[]))})),n},oe.setStart=C(!0),oe.setEnd=C(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},oe.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange((function(n){e(n),t.push(n)})),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},oe.containsNode=function(e,t){return this.eachRange((function(n){return n.containsNode(e,t)}),!0)||!1},oe.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},oe.moveToBookmark=function(t){for(var n,i,o=[],s=0;n=t.rangeBookmarks[s++];)(i=e.createRange(this.win)).moveToBookmark(n),o.push(i);t.backward?this.setSingleRange(o[0],"backward"):this.setRanges(o)},oe.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},oe.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},oe.toHtml=function(){var e=[];return this.eachRange((function(t){e.push(A.toHtml(t))})),e.join("")},I.implementsTextRange&&(oe.getNativeTextRange=function(){var n;if(n=this.docSelection){var i=n.createRange();if(f(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),oe.getName=function(){return"WrappedSelection"},oe.inspect=function(){return $(this)},oe.detach=function(){y(this.win,"delete"),_(this)},v.detachAll=function(){y(null,"deleteAll")},v.inspect=$,v.isDirectionBackward=n,e.Selection=v,e.selectionPrototype=oe,e.addShimListener((function(e){void 0===e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null}))}));var H=!1,L=function(){H||(H=!0,!I.initialized&&I.config.autoInitialize&&u())};return P&&("complete"==document.readyState?L():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",L,!1),b(window,"load",L))),I}),this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}((function(e){return e.createModule("ClassApplier",["WrappedSelection"],(function(e,t){function n(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!1===t(n,e[n]))return!1;return!0}function o(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function s(e,t){return!!e&&new RegExp("(?:^|\\s)"+t+"(?:\\s|$)").test(e)}function r(e,t){return"object"==typeof e.classList?e.classList.contains(t):s("string"==typeof e.className?e.className:e.getAttribute("class"),t)}function a(e,t){if("object"==typeof e.classList)e.classList.add(t);else{var n="string"==typeof e.className,i=n?e.className:e.getAttribute("class");i?s(i,t)||(i+=" "+t):i=t,n?e.className=i:e.setAttribute("class",i)}}function l(e){return"string"==typeof e.className?e.className:e.getAttribute("class")}function c(e){return e&&e.split(/\s+/).sort().join(" ")}function d(e){return c(l(e))}function u(e,t){return d(e)==d(t)}function h(e,t){for(var n=t.split(/\s+/),i=0,s=n.length;s>i;++i)if(!r(e,o(n[i])))return!1;return!0}function f(e){var t=e.parentNode;return t&&1==t.nodeType&&!/^(textarea|style|script|select|iframe)$/i.test(t.nodeName)}function p(e,t,n,i,o){var s=e.node,r=e.offset,a=s,l=r;s==i&&r>o&&++l,s!=t||r!=n&&r!=n+1||(a=i,l+=o-n),s==t&&r>n+1&&--l,e.node=a,e.offset=l}function m(e,t,n){e.node==t&&e.offset>n&&--e.offset}function g(e,t,n,i){-1==n&&(n=t.childNodes.length);var o=e.parentNode,s=M.getNodeIndex(e);W(i,(function(e){p(e,o,s,t,n)})),t.childNodes.length==n?t.appendChild(e):t.insertBefore(e,t.childNodes[n])}function v(e,t){var n=e.parentNode,i=M.getNodeIndex(e);W(t,(function(e){m(e,n,i)})),M.removeNode(e)}function _(e,t,n,i,o){for(var s,r=[];s=e.firstChild;)g(s,t,n++,o),r.push(s);return i&&v(e,o),r}function y(e,t){return _(e,e.parentNode,M.getNodeIndex(e),!0,t)}function b(e,t){var n=e.cloneRange();n.selectNodeContents(t);var i=n.intersection(e);return""!=(i?i.toString():"")}function w(e){for(var t,n=e.getNodes([3]),i=0;(t=n[i])&&!b(e,t);)++i;for(var o=n.length-1;(t=n[o])&&!b(e,t);)--o;return n.slice(i,o+1)}function C(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,o,s=0,r=e.attributes.length;r>s;++s)if("class"!=(o=(n=e.attributes[s]).name)){if(null===n!=(null===(i=t.attributes.getNamedItem(o))))return!1;if(n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function $(e,t){for(var n,i=0,o=e.attributes.length;o>i;++i)if(n=e.attributes[i].name,(!t||!L(t,n))&&e.attributes[i].specified&&"class"!=n)return!0;return!1}function S(e){var t;return e&&1==e.nodeType&&((t=e.parentNode)&&9==t.nodeType&&"on"==t.designMode||V(e)&&!V(e.parentNode))}function T(e){return(V(e)||1!=e.nodeType&&V(e.parentNode))&&!S(e)}function x(e){return e&&1==e.nodeType&&!Y.test(U(e,"display"))}function k(e){if(0==e.data.length)return!0;if(G.test(e.data))return!1;switch(U(e.parentNode,"whiteSpace")){case"pre":case"pre-wrap":case"-moz-pre-wrap":return!1;case"pre-line":if(/[\r\n]/.test(e.data))return!1}return x(e.previousSibling)||x(e.nextSibling)}function R(e){var t,n,i=[];for(t=0;n=e[t++];)i.push(new H(n.startContainer,n.startOffset),new H(n.endContainer,n.endOffset));return i}function E(e,t){for(var n,i,o,s=0,r=e.length;r>s;++s)n=e[s],i=t[2*s],o=t[2*s+1],n.setStartAndEnd(i.node,i.offset,o.node,o.offset)}function N(e,t){return M.isCharacterDataNode(e)?0==t?!!e.previousSibling:t!=e.length||!!e.nextSibling:t>0&&t<e.childNodes.length}function A(e,n,i,o){var s,r,a=0==i;if(M.isAncestorOf(n,e))return e;if(M.isCharacterDataNode(n)){var l=M.getNodeIndex(n);if(0==i)i=l;else{if(i!=n.length)throw t.createError("splitNodeAt() should not be called with offset in the middle of a data node ("+i+" in "+n.data);i=l+1}n=n.parentNode}if(N(n,i)){s=n.cloneNode(!1),r=n.parentNode,s.id&&s.removeAttribute("id");for(var c,d=0;c=n.childNodes[i];)g(c,s,d++,o);return g(s,r,M.getNodeIndex(n)+1,o),n==e?s:A(e,r,M.getNodeIndex(s),o)}if(e!=n){s=n.parentNode;var u=M.getNodeIndex(n);return a||u++,A(e,s,u,o)}return e}function O(e,t){return e.namespaceURI==t.namespaceURI&&e.tagName.toLowerCase()==t.tagName.toLowerCase()&&u(e,t)&&C(e,t)&&"inline"==U(e,"display")&&"inline"==U(t,"display")}function P(e){var t=e?"nextSibling":"previousSibling";return function(n,i){var o=n.parentNode,s=n[t];if(s){if(s&&3==s.nodeType)return s}else if(i&&((s=o[t])&&1==s.nodeType&&O(o,s))){var r=s[e?"firstChild":"lastChild"];if(r&&3==r.nodeType)return r}return null}}function D(e){this.isElementMerge=1==e.nodeType,this.textNodes=[];var t=this.isElementMerge?e.lastChild:e;t&&(this.textNodes[0]=t)}function I(e,t,i){var s,r,a,l,d=this;d.cssClass=d.className=e;var u=null,h={};if("object"==typeof t&&null!==t){for(void 0!==t.elementTagName&&(t.elementTagName=t.elementTagName.toLowerCase()),i=t.tagNames,u=t.elementProperties,h=t.elementAttributes,r=0;l=J[r++];)t.hasOwnProperty(l)&&(d[l]=t[l]);s=t.normalize}else s=t;d.normalize=void 0===s||s,d.attrExceptions=[];var f=document.createElement(d.elementTagName);d.elementProperties=d.copyPropertiesToElement(u,f,!0),n(h,(function(e,t){d.attrExceptions.push(e),h[e]=""+t})),d.elementAttributes=h,d.elementSortedClassName=d.elementProperties.hasOwnProperty("className")?c(d.elementProperties.className+" "+e):e,d.applyToAnyTagName=!1;var p=typeof i;if("string"==p)"*"==i?d.applyToAnyTagName=!0:d.tagNames=o(i.toLowerCase()).split(/\s*,\s*/);else if("object"==p&&"number"==typeof i.length)for(d.tagNames=[],r=0,a=i.length;a>r;++r)"*"==i[r]?d.applyToAnyTagName=!0:d.tagNames.push(i[r].toLowerCase());else d.tagNames=[d.elementTagName]}function z(e,t,n){return new I(e,t,n)}var M=e.dom,H=M.DomPosition,L=M.arrayContains,j=e.util,W=j.forEach,B="span",F=j.isHostMethod(document,"createElementNS"),q=function(){function e(e,t,n){return t&&n?" ":""}return function(t,n){if("object"==typeof t.classList)t.classList.remove(n);else{var i="string"==typeof t.className,o=i?t.className:t.getAttribute("class");o=o.replace(new RegExp("(^|\\s)"+n+"(\\s|$)"),e),i?t.className=o:t.setAttribute("class",o)}}}(),U=M.getComputedStyleProperty,V="boolean"==typeof document.createElement("div").isContentEditable?function(e){return e&&1==e.nodeType&&e.isContentEditable}:function(e){return!(!e||1!=e.nodeType||"false"==e.contentEditable)&&("true"==e.contentEditable||V(e.parentNode))},Y=/^inline(-block|-table)?$/i,G=/[^\r\n\t\f \u200B]/,X=P(!1),Q=P(!0);D.prototype={doMerge:function(e){var t=this.textNodes,n=t[0];if(t.length>1){var i,o=M.getNodeIndex(n),s=[],r=0;W(t,(function(t,a){i=t.parentNode,a>0&&(i.removeChild(t),i.hasChildNodes()||M.removeNode(i),e&&W(e,(function(e){e.node==t&&(e.node=n,e.offset+=r),e.node==i&&e.offset>o&&(--e.offset,e.offset==o+1&&len-1>a&&(e.node=n,e.offset=r))}))),s[a]=t.data,r+=t.data.length})),n.data=s.join("")}return n.data},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e=[];return W(this.textNodes,(function(t,n){e[n]="'"+t.data+"'"})),"[Merge("+e.join(",")+")]"}};var J=["elementTagName","ignoreWhiteSpace","applyToEditableOnly","useExistingElements","removeEmptyElements","onElementCreate"],K={};I.prototype={elementTagName:B,elementProperties:{},elementAttributes:{},ignoreWhiteSpace:!0,applyToEditableOnly:!1,useExistingElements:!0,removeEmptyElements:!0,onElementCreate:null,copyPropertiesToElement:function(e,t,n){var i,o,s,r,l,d,u={};for(var h in e)if(e.hasOwnProperty(h))if(r=e[h],l=t[h],"className"==h)a(t,r),a(t,this.className),t[h]=c(t[h]),n&&(u[h]=r);else if("style"==h){for(i in o=l,n&&(u[h]=s={}),e[h])e[h].hasOwnProperty(i)&&(o[i]=r[i],n&&(s[i]=o[i]));this.attrExceptions.push(h)}else t[h]=r,n&&(u[h]=t[h],d=K.hasOwnProperty(h)?K[h]:h,this.attrExceptions.push(d));return n?u:""},copyAttributesToElement:function(e,t){for(var n in e)e.hasOwnProperty(n)&&!/^class(?:Name)?$/i.test(n)&&t.setAttribute(n,e[n])},appliesToElement:function(e){return L(this.tagNames,e.tagName.toLowerCase())},getEmptyElements:function(e){var t=this;return e.getNodes([1],(function(e){return t.appliesToElement(e)&&!e.hasChildNodes()}))},hasClass:function(e){return 1==e.nodeType&&(this.applyToAnyTagName||this.appliesToElement(e))&&r(e,this.className)},getSelfOrAncestorWithClass:function(e){for(;e;){if(this.hasClass(e))return e;e=e.parentNode}return null},isModifiable:function(e){return!this.applyToEditableOnly||T(e)},isIgnorableWhiteSpaceNode:function(e){return this.ignoreWhiteSpace&&e&&3==e.nodeType&&k(e)},postApply:function(e,t,n,o){var s,r,a=e[0],l=e[e.length-1],c=[],d=a,u=l,h=0,f=l.length;W(e,(function(e){(r=X(e,!o))?(s||(s=new D(r),c.push(s)),s.textNodes.push(e),e===a&&(d=s.textNodes[0],h=d.length),e===l&&(u=s.textNodes[0],f=s.getLength())):s=null}));var p=Q(l,!o);if(p&&(s||(s=new D(l),c.push(s)),s.textNodes.push(p)),c.length){for(i=0,len=c.length;len>i;++i)c[i].doMerge(n);t.setStartAndEnd(d,h,u,f)}},createContainer:function(e){var t=M.getDocument(e),n=F&&!M.isHtmlNamespace(e)&&e.namespaceURI?t.createElementNS(e.namespaceURI,this.elementTagName):t.createElement(this.elementTagName);return this.copyPropertiesToElement(this.elementProperties,n,!1),this.copyAttributesToElement(this.elementAttributes,n),a(n,this.className),this.onElementCreate&&this.onElementCreate(n,this),n},elementHasProperties:function(e,t){var i=this;return n(t,(function(t,n){if("className"==t)return h(e,n);if("object"==typeof n){if(!i.elementHasProperties(e[t],n))return!1}else if(e[t]!==n)return!1}))},elementHasAttributes:function(e,t){return n(t,(function(t,n){return e.getAttribute(t)===n&&void 0}))},applyToTextNode:function(e){if(f(e)){var t=e.parentNode;if(1==t.childNodes.length&&this.useExistingElements&&this.appliesToElement(t)&&this.elementHasProperties(t,this.elementProperties)&&this.elementHasAttributes(t,this.elementAttributes))a(t,this.className);else{var n=e.parentNode,i=this.createContainer(n);n.insertBefore(i,e),i.appendChild(e)}}},isRemovable:function(e){return e.tagName.toLowerCase()==this.elementTagName&&d(e)==this.elementSortedClassName&&this.elementHasProperties(e,this.elementProperties)&&!$(e,this.attrExceptions)&&this.elementHasAttributes(e,this.elementAttributes)&&this.isModifiable(e)},isEmptyContainer:function(e){var t=e.childNodes.length;return 1==e.nodeType&&this.isRemovable(e)&&(0==t||1==t&&this.isEmptyContainer(e.firstChild))},removeEmptyContainers:function(e){var t=this,n=e.getNodes([1],(function(e){return t.isEmptyContainer(e)})),i=[e],o=R(i);W(n,(function(e){v(e,o)})),E(i,o)},undoToTextNode:function(e,t,n,i){if(!t.containsNode(n)){var o=t.cloneRange();o.selectNode(n),o.isPointInRange(t.endContainer,t.endOffset)&&(A(n,t.endContainer,t.endOffset,i),t.setEndAfter(n)),o.isPointInRange(t.startContainer,t.startOffset)&&(n=A(n,t.startContainer,t.startOffset,i))}this.isRemovable(n)?y(n,i):q(n,this.className)},splitAncestorWithClass:function(e,t,n){var i=this.getSelfOrAncestorWithClass(e);i&&A(i,e,t,n)},undoToAncestor:function(e,t){this.isRemovable(e)?y(e,t):q(e,this.className)},applyToRange:function(e,t){var n=this,i=R((t=t||[])||[]);e.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(e);var o=w(e);if(o.length){W(o,(function(e){n.isIgnorableWhiteSpaceNode(e)||n.getSelfOrAncestorWithClass(e)||!n.isModifiable(e)||n.applyToTextNode(e,i)}));var s=o[o.length-1];e.setStartAndEnd(o[0],0,s,s.length),n.normalize&&n.postApply(o,e,i,!1),E(t,i)}var r=n.getEmptyElements(e);W(r,(function(e){a(e,n.className)}))},applyToRanges:function(e){for(var t=e.length;t--;)this.applyToRange(e[t],e);return e},applyToSelection:function(t){var n=e.getSelection(t);n.setRanges(this.applyToRanges(n.getAllRanges()))},undoToRange:function(e,t){var n=this,i=R(t=t||[]);e.splitBoundariesPreservingPositions(i),n.removeEmptyElements&&n.removeEmptyContainers(e,i);var o,s,r=w(e),a=r[r.length-1];if(r.length){n.splitAncestorWithClass(e.endContainer,e.endOffset,i),n.splitAncestorWithClass(e.startContainer,e.startOffset,i);for(var l=0,c=r.length;c>l;++l)o=r[l],(s=n.getSelfOrAncestorWithClass(o))&&n.isModifiable(o)&&n.undoToAncestor(s,i);e.setStartAndEnd(r[0],0,a,a.length),n.normalize&&n.postApply(r,e,i,!0),E(t,i)}var d=n.getEmptyElements(e);W(d,(function(e){q(e,n.className)}))},undoToRanges:function(e){for(var t=e.length;t--;)this.undoToRange(e[t],e);return e},undoToSelection:function(t){var n=e.getSelection(t),i=e.getSelection(t).getAllRanges();this.undoToRanges(i),n.setRanges(i)},isAppliedToRange:function(e){if(e.collapsed||""==e.toString())return!!this.getSelfOrAncestorWithClass(e.commonAncestorContainer);var t=e.getNodes([3]);if(t.length)for(var n,i=0;n=t[i++];)if(!this.isIgnorableWhiteSpaceNode(n)&&b(e,n)&&this.isModifiable(n)&&!this.getSelfOrAncestorWithClass(n))return!1;return!0},isAppliedToRanges:function(e){var t=e.length;if(0==t)return!1;for(;t--;)if(!this.isAppliedToRange(e[t]))return!1;return!0},isAppliedToSelection:function(t){var n=e.getSelection(t);return this.isAppliedToRanges(n.getAllRanges())},toggleRange:function(e){this.isAppliedToRange(e)?this.undoToRange(e):this.applyToRange(e)},toggleSelection:function(e){this.isAppliedToSelection(e)?this.undoToSelection(e):this.applyToSelection(e)},getElementsWithClassIntersectingRange:function(e){var t=[],n=this;return e.getNodes([3],(function(e){var i=n.getSelfOrAncestorWithClass(e);i&&!L(t,i)&&t.push(i)})),t},detach:function(){}},I.util={hasClass:r,addClass:a,removeClass:q,getClass:l,hasSameClasses:u,hasAllClasses:h,replaceWithOwnChildren:y,elementsHaveSameNonClassAttributes:C,elementHasNonClassAttributes:$,splitNodeAt:A,isEditableElement:V,isEditingHost:S,isEditable:T},e.CssClassApplier=e.ClassApplier=I,e.createClassApplier=z,j.createAliasForDeprecatedMethod(e,"createCssClassApplier","createClassApplier",t)})),e}),this),function(e,t){"function"==typeof define&&define.amd?define(["./rangy-core"],e):"undefined"!=typeof module&&"object"==typeof exports?module.exports=e(require("rangy")):e(t.rangy)}((function(e){return e.createModule("Highlighter",["ClassApplier"],(function(e){function t(e,t){return e.characterRange.start-t.characterRange.start}function n(e,t){return t?e.getElementById(t):u(e)}function i(e,t){this.type=e,this.converterCreator=t}function o(e,t){m[e]=new i(e,t)}function s(e){var t=m[e];if(t instanceof i)return t.create();throw new Error("Highlighter type '"+e+"' is not valid")}function r(e,t){this.start=e,this.end=t}function a(e,t,n,i,o,s){o?(this.id=o,p=Math.max(p,o+1)):this.id=p++,this.characterRange=t,this.doc=e,this.classApplier=n,this.converter=i,this.containerElementId=s||null,this.applied=!1}function l(e,t){t=t||"textContent",this.doc=e||document,this.classAppliers={},this.highlights=[],this.converter=s(t)}var c=e.dom,d=c.arrayContains,u=c.getBody,h=e.util.createOptions,f=e.util.forEach,p=1,m={};i.prototype.create=function(){var e=this.converterCreator();return e.type=this.type,e},e.registerHighlighterType=o,r.prototype={intersects:function(e){return this.start<e.end&&this.end>e.start},isContiguousWith:function(e){return this.start==e.end||this.end==e.start},union:function(e){return new r(Math.min(this.start,e.start),Math.max(this.end,e.end))},intersection:function(e){return new r(Math.max(this.start,e.start),Math.min(this.end,e.end))},getComplements:function(e){var t=[];if(this.start>=e.start){if(this.end<=e.end)return[];t.push(new r(e.end,this.end))}else t.push(new r(this.start,Math.min(this.end,e.start))),this.end>e.end&&t.push(new r(e.end,this.end));return t},toString:function(){return"[CharacterRange("+this.start+", "+this.end+")]"}},r.fromCharacterRange=function(e){return new r(e.start,e.end)};var g={rangeToCharacterRange:function(e,t){var n=e.getBookmark(t);return new r(n.start,n.end)},characterRangeToRange:function(t,n,i){var o=e.createRange(t);return o.moveToBookmark({start:n.start,end:n.end,containerNode:i}),o},serializeSelection:function(e,t){for(var n=e.getAllRanges(),i=[],o=1==n.length&&e.isBackward(),s=0,r=n.length;r>s;++s)i[s]={characterRange:this.rangeToCharacterRange(n[s],t),backward:o};return i},restoreSelection:function(e,t,n){e.removeAllRanges();for(var i,o,s=e.win.document,r=0,a=t.length;a>r;++r)(o=t[r]).characterRange,i=this.characterRangeToRange(s,o.characterRange,n),e.addRange(i,o.backward)}};o("textContent",(function(){return g})),o("TextRange",function(){var t;return function(){if(!t){var n=e.modules.TextRange;if(!n)throw new Error("TextRange module is missing.");if(!n.supported)throw new Error("TextRange module is present but not supported.");t={rangeToCharacterRange:function(e,t){return r.fromCharacterRange(e.toCharacterRange(t))},
characterRangeToRange:function(t,n,i){var o=e.createRange(t);return o.selectCharacters(i,n.start,n.end),o},serializeSelection:function(e,t){return e.saveCharacterRanges(t)},restoreSelection:function(e,t,n){e.restoreCharacterRanges(n,t)}}}return t}}()),a.prototype={getContainerElement:function(){return n(this.doc,this.containerElementId)},getRange:function(){return this.converter.characterRangeToRange(this.doc,this.characterRange,this.getContainerElement())},fromRange:function(e){this.characterRange=this.converter.rangeToCharacterRange(e,this.getContainerElement())},getText:function(){return this.getRange().toString()},containsElement:function(e){return this.getRange().containsNodeContents(e.firstChild)},unapply:function(){this.classApplier.undoToRange(this.getRange()),this.applied=!1},apply:function(){this.classApplier.applyToRange(this.getRange()),this.applied=!0},getHighlightElements:function(){return this.classApplier.getElementsWithClassIntersectingRange(this.getRange())},toString:function(){return"[Highlight(ID: "+this.id+", class: "+this.classApplier.className+", character range: "+this.characterRange.start+" - "+this.characterRange.end+")]"}},l.prototype={addClassApplier:function(e){this.classAppliers[e.className]=e},getHighlightForElement:function(e){for(var t=this.highlights,n=0,i=t.length;i>n;++n)if(t[n].containsElement(e))return t[n];return null},removeHighlights:function(e){for(var t,n=0,i=this.highlights.length;i>n;++n)t=this.highlights[n],d(e,t)&&(t.unapply(),this.highlights.splice(n--,1))},removeAllHighlights:function(){this.removeHighlights(this.highlights)},getIntersectingHighlights:function(e){var t=[],n=this.highlights;return f(e,(function(e){f(n,(function(n){e.intersectsRange(n.getRange())&&!d(t,n)&&t.push(n)}))})),t},highlightCharacterRanges:function(t,n,i){var o,s,l,c,d,u,p,m,g,v,_,y,b=this.highlights,w=this.converter,C=this.doc,$=[],S=t?this.classAppliers[t]:null,T=(i=h(i,{containerElementId:null,exclusive:!0})).containerElementId,x=i.exclusive;for(T&&((c=this.doc.getElementById(T))&&((d=e.createRange(this.doc)).selectNodeContents(c),u=new r(0,d.toString().length))),o=0,s=n.length;s>o;++o)if(p=n[o],_=[],u&&(p=p.intersection(u)),p.start!=p.end){for(l=0;l<b.length;++l)g=!1,T==b[l].containerElementId&&(m=b[l].characterRange,y=!(v=S==b[l].classApplier)&&x,(m.intersects(p)||m.isContiguousWith(p))&&(v||y)&&(y&&f(m.getComplements(p),(function(e){_.push(new a(C,e,b[l].classApplier,w,null,T))})),g=!0,v&&(p=m.union(p)))),g?($.push(b[l]),b[l]=new a(C,m.union(p),S,w,null,T)):_.push(b[l]);S&&_.push(new a(C,p,S,w,null,T)),this.highlights=b=_}f($,(function(e){e.unapply()}));var k=[];return f(b,(function(e){e.applied||(e.apply(),k.push(e))})),k},highlightRanges:function(t,n,i){var o,s=[],r=this.converter,a=(i=h(i,{containerElement:null,exclusive:!0})).containerElement,l=a?a.id:null;return a&&(o=e.createRange(a)).selectNodeContents(a),f(n,(function(e){var t=a?o.intersection(e):e;s.push(r.rangeToCharacterRange(t,a||u(e.getDocument())))})),this.highlightCharacterRanges(t,s,{containerElementId:l,exclusive:i.exclusive})},highlightSelection:function(t,i){var o=this.converter,s=!!t&&this.classAppliers[t],a=(i=h(i,{containerElementId:null,selection:e.getSelection(this.doc),exclusive:!0})).containerElementId,l=i.exclusive,c=i.selection,d=n(c.win.document,a);if(!s&&!1!==t)throw new Error("No class applier found for class '"+t+"'");var u=o.serializeSelection(c,d),p=[];f(u,(function(e){p.push(r.fromCharacterRange(e.characterRange))}));var m=this.highlightCharacterRanges(t,p,{containerElementId:a,exclusive:l});return o.restoreSelection(c,u,d),m},unhighlightSelection:function(t){t=t||e.getSelection(this.doc);var n=this.getIntersectingHighlights(t.getAllRanges());return this.removeHighlights(n),t.removeAllRanges(),n},getHighlightsInSelection:function(t){return t=t||e.getSelection(this.doc),this.getIntersectingHighlights(t.getAllRanges())},selectionOverlapsHighlight:function(e){return this.getHighlightsInSelection(e).length>0},serialize:function(e){var n,i,o,r,a=this,l=a.highlights;return l.sort(t),n=(e=h(e,{serializeHighlightText:!1,type:a.converter.type})).type,(o=n!=a.converter.type)&&(r=s(n)),i=["type:"+n],f(l,(function(t){var n,s=t.characterRange;o&&(n=t.getContainerElement(),s=r.rangeToCharacterRange(a.converter.characterRangeToRange(a.doc,s,n),n));var l=[s.start,s.end,t.id,t.classApplier.className,t.containerElementId];e.serializeHighlightText&&l.push(t.getText()),i.push(l.join("$"))})),i.join("|")},deserialize:function(e){var t,i,o,l=e.split("|"),c=[],d=l[0],u=!1;if(!d||!(t=/^type:(\w+)$/.exec(d)))throw new Error("Serialized highlights are invalid.");(i=t[1])!=this.converter.type&&(o=s(i),u=!0),l.shift();for(var h,f,p,m,g,v,_=l.length;_-- >0;){if(p=new r(+(v=l[_].split("$"))[0],+v[1]),m=v[4]||null,u&&(g=n(this.doc,m),p=this.converter.rangeToCharacterRange(o.characterRangeToRange(this.doc,p,g),g)),!(h=this.classAppliers[v[3]]))throw new Error("No class applier found for class '"+v[3]+"'");(f=new a(this.doc,p,h,this.converter,parseInt(v[2]),m)).apply(),c.push(f)}this.highlights=c}},e.Highlighter=l,e.createHighlighter=function(e,t){return new l(e,t)}})),e}),this),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}((function(e){"use strict";var t=window.Slick||{};(t=function(){function t(t,i){var o,s,r,a=this;if(a.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(t),appendDots:e(t),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="previous">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,t){return'<button type="button" data-role="none">'+(t+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0},a.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},e.extend(a,a.initials),a.activeBreakpoint=null,a.animType=null,a.animProp=null,a.breakpoints=[],a.breakpointSettings=[],a.cssTransitions=!1,a.hidden="hidden",a.paused=!1,a.positionProp=null,a.respondTo=null,a.rowCount=1,a.shouldClick=!0,a.$slider=e(t),a.$slidesCache=null,a.transformType=null,a.transitionType=null,a.visibilityChange="visibilitychange",a.windowWidth=0,a.windowTimer=null,o=e(t).data("slick")||{},a.options=e.extend({},a.defaults,o,i),a.currentSlide=a.options.initialSlide,a.originalSettings=a.options,(s=a.options.responsive||null)&&s.length>-1){for(r in a.respondTo=a.options.respondTo||"window",s)s.hasOwnProperty(r)&&(a.breakpoints.push(s[r].breakpoint),a.breakpointSettings[s[r].breakpoint]=s[r].settings);a.breakpoints.sort((function(e,t){return!0===a.options.mobileFirst?e-t:t-e}))}void 0!==document.mozHidden?(a.hidden="mozHidden",a.visibilityChange="mozvisibilitychange"):void 0!==document.msHidden?(a.hidden="msHidden",a.visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(a.hidden="webkitHidden",a.visibilityChange="webkitvisibilitychange"),a.autoPlay=e.proxy(a.autoPlay,a),a.autoPlayClear=e.proxy(a.autoPlayClear,a),a.changeSlide=e.proxy(a.changeSlide,a),a.clickHandler=e.proxy(a.clickHandler,a),a.selectHandler=e.proxy(a.selectHandler,a),a.setPosition=e.proxy(a.setPosition,a),a.swipeHandler=e.proxy(a.swipeHandler,a),a.dragHandler=e.proxy(a.dragHandler,a),a.keyHandler=e.proxy(a.keyHandler,a),a.autoPlayIterator=e.proxy(a.autoPlayIterator,a),a.instanceUid=n++,a.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,a.init(),a.checkResponsive(!0)}var n=0;return t}()).prototype.addSlide=t.prototype.slickAdd=function(t,n,i){var o=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=o.slideCount)return!1;o.unload(),"number"==typeof n?0===n&&0===o.$slides.length?e(t).appendTo(o.$slideTrack):i?e(t).insertBefore(o.$slides.eq(n)):e(t).insertAfter(o.$slides.eq(n)):!0===i?e(t).prependTo(o.$slideTrack):e(t).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each((function(t,n){e(n).attr("data-slick-index",t)})),o.$slidesCache=o.$slides,o.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,n){var i={},o=this;o.animateHeight(),!0===o.options.rtl&&!1===o.options.vertical&&(t=-t),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:t},o.options.speed,o.options.easing,n):o.$slideTrack.animate({top:t},o.options.speed,o.options.easing,n):!1===o.cssTransitions?(!0===o.options.rtl&&(o.currentLeft=-o.currentLeft),e({animStart:o.currentLeft}).animate({animStart:t},{duration:o.options.speed,easing:o.options.easing,step:function(e){e=Math.ceil(e),!1===o.options.vertical?(i[o.animType]="translate("+e+"px, 0px)",o.$slideTrack.css(i)):(i[o.animType]="translate(0px,"+e+"px)",o.$slideTrack.css(i))},complete:function(){n&&n.call()}})):(o.applyTransition(),t=Math.ceil(t),i[o.animType]=!1===o.options.vertical?"translate3d("+t+"px, 0px, 0px)":"translate3d(0px,"+t+"px, 0px)",o.$slideTrack.css(i),n&&setTimeout((function(){o.disableTransition(),n.call()}),o.options.speed))},t.prototype.asNavFor=function(t){var n=this,i=null!==n.options.asNavFor?e(n.options.asNavFor).slick("getSlick"):null;null!==i&&i.slideHandler(t,!0)},t.prototype.applyTransition=function(e){var t=this,n={};n[t.transitionType]=!1===t.options.fade?t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:"opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.autoPlay=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer),e.slideCount>e.options.slidesToShow&&!0!==e.paused&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){var e=this;e.autoPlayTimer&&clearInterval(e.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this;!1===e.options.infinite?1===e.direction?(e.currentSlide+1===e.slideCount-1&&(e.direction=0),e.slideHandler(e.currentSlide+e.options.slidesToScroll)):(0==e.currentSlide-1&&(e.direction=1),e.slideHandler(e.currentSlide-e.options.slidesToScroll)):e.slideHandler(e.currentSlide+e.options.slidesToScroll)},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow=e(t.options.prevArrow),t.$nextArrow=e(t.options.nextArrow),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.appendTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled"))},t.prototype.buildDots=function(){var t,n,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(n='<ul class="'+i.options.dotsClass+'">',t=0;t<=i.getDotCount();t+=1)n+="<li>"+i.options.customPaging.call(this,i,t)+"</li>";n+="</ul>",i.$dots=e(n).appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each((function(t,n){e(n).attr("data-slick-index",t)})),t.$slidesCache=t.$slides,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),(!0===t.options.centerMode||!0===t.options.swipeToSlide)&&(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),!0===t.options.accessibility&&t.$list.prop("tabIndex",0),t.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,n,i,o,s,r,a=this;if(i=document.createDocumentFragment(),s=a.$slider.children(),a.options.rows>1){for(r=a.options.slidesPerRow*a.options.rows,o=Math.ceil(s.length/r),e=0;o>e;e++){var l=document.createElement("div");for(t=0;t<a.options.rows;t++){var c=document.createElement("div");for(n=0;n<a.options.slidesPerRow;n++){var d=e*r+(t*a.options.slidesPerRow+n);s.get(d)&&c.appendChild(s.get(d))}l.appendChild(c)}i.appendChild(l)}a.$slider.html(i),a.$slider.children().children().children().width(100/a.options.slidesPerRow+"%").css({display:"inline-block"})}},t.prototype.checkResponsive=function(t){var n,i,o,s=this,r=s.$slider.width(),a=window.innerWidth||e(window).width();if("window"===s.respondTo?o=a:"slider"===s.respondTo?o=r:"min"===s.respondTo&&(o=Math.min(a,r)),s.originalSettings.responsive&&s.originalSettings.responsive.length>-1&&null!==s.originalSettings.responsive){for(n in i=null,s.breakpoints)s.breakpoints.hasOwnProperty(n)&&(!1===s.originalSettings.mobileFirst?o<s.breakpoints[n]&&(i=s.breakpoints[n]):o>s.breakpoints[n]&&(i=s.breakpoints[n]));null!==i?null!==s.activeBreakpoint?i!==s.activeBreakpoint&&(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick():(s.options=e.extend({},s.originalSettings,s.breakpointSettings[i]),!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh())):(s.activeBreakpoint=i,"unslick"===s.breakpointSettings[i]?s.unslick():(s.options=e.extend({},s.originalSettings,s.breakpointSettings[i]),!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh())):null!==s.activeBreakpoint&&(s.activeBreakpoint=null,s.options=s.originalSettings,!0===t&&(s.currentSlide=s.options.initialSlide),s.refresh())}},t.prototype.changeSlide=function(t,n){var i,o,s=this;switch(e(t.target).is("a")&&t.preventDefault(),i=0!=s.slideCount%s.options.slidesToScroll?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,t.data.message){case"previous":o=0===i?s.options.slidesToScroll:s.options.slidesToShow-i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-o,!1,n);break;case"next":o=0===i?s.options.slidesToScroll:i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+o,!1,n);break;case"index":var r=0===t.data.index?0:t.data.index||e(t.target).parent().index()*s.options.slidesToScroll;s.slideHandler(s.checkNavigable(r),!1,n);break;default:return}},t.prototype.checkNavigable=function(e){var t,n;if(n=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var i in t){if(e<t[i]){e=n;break}n=t[i]}return e},t.prototype.cleanUpEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).off("click.slick",t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&!0===t.options.autoplay&&e("li",t.$dots).off("mouseenter.slick",t.setPaused.bind(t,!0)).off("mouseleave.slick",t.setPaused.bind(t,!1)),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide)),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),!0===t.options.autoplay&&e(document).off(t.visibilityChange,t.visibility),t.$list.off("mouseenter.slick",t.setPaused.bind(t,!0)),t.$list.off("mouseleave.slick",t.setPaused.bind(t,!1)),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).off("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>1&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.html(e))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(){var t=this;t.autoPlayClear(),t.touchObject={},t.cleanUpEvents(),e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides&&(t.$slides.removeClass("slick-slide slick-active slick-center slick-visible").attr("aria-hidden","true").removeAttr("data-slick-index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),t.$slider.html(t.$slides)),t.cleanUpRows(),t.$slider.removeClass("slick-slider"),t.$slider.removeClass("slick-initialized")},t.prototype.disableTransition=function(e){var t=this,n={};n[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(n):t.$slides.eq(e).css(n)},t.prototype.fadeSlide=function(e,t){var n=this;!1===n.cssTransitions?(n.$slides.eq(e).css({zIndex:1e3}),n.$slides.eq(e).animate({opacity:1},n.options.speed,n.options.easing,t)):(n.applyTransition(e),n.$slides.eq(e).css({opacity:1,zIndex:1e3}),t&&setTimeout((function(){n.disableTransition(e),t.call()}),n.options.speed))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,n=0,i=0;if(!0===e.options.infinite)i=Math.ceil(e.slideCount/e.options.slidesToScroll);else if(!0===e.options.centerMode)i=e.slideCount;else for(;t<e.slideCount;)++i,t=n+e.options.slidesToShow,n+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return i-1},t.prototype.getLeft=function(e){var t,n,i,o=this,s=0;return o.slideOffset=0,n=o.$slides.first().outerHeight(),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=-1*o.slideWidth*o.options.slidesToShow,s=-1*n*o.options.slidesToShow),0!=o.slideCount%o.options.slidesToScroll&&e+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(e>o.slideCount?(o.slideOffset=-1*(o.options.slidesToShow-(e-o.slideCount))*o.slideWidth,s=-1*(o.options.slidesToShow-(e-o.slideCount))*n):(o.slideOffset=-1*o.slideCount%o.options.slidesToScroll*o.slideWidth,s=-1*o.slideCount%o.options.slidesToScroll*n))):e+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(e+o.options.slidesToShow-o.slideCount)*o.slideWidth,s=(e+o.options.slidesToShow-o.slideCount)*n),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,s=0),!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),t=!1===o.options.vertical?-1*e*o.slideWidth+o.slideOffset:-1*e*n+s,!0===o.options.variableWidth&&(t=(i=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow))[0]?-1*i[0].offsetLeft:0,!0===o.options.centerMode&&(t=(i=!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(e):o.$slideTrack.children(".slick-slide").eq(e+o.options.slidesToShow+1))[0]?-1*i[0].offsetLeft:0,t+=(o.$list.width()-i.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,n=0,i=0,o=[];for(!1===t.options.infinite?(e=t.slideCount-t.options.slidesToShow+1,!0===t.options.centerMode&&(e=t.slideCount)):(n=-1*t.options.slidesToScroll,i=-1*t.options.slidesToScroll,e=2*t.slideCount);e>n;)o.push(n),n=i+t.options.slidesToScroll,i+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return o},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,n,i=this;return n=!0===i.options.centerMode?i.slideWidth*Math.floor(i.options.slidesToShow/2):0,!0===i.options.swipeToSlide?(i.$slideTrack.find(".slick-slide").each((function(o,s){return s.offsetLeft-n+e(s).outerWidth()/2>-1*i.swipeLeft?(t=s,!1):void 0})),Math.abs(e(t).attr("data-slick-index")-i.currentSlide)||1):i.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(){var t=this;e(t.$slider).hasClass("slick-initialized")||(e(t.$slider).addClass("slick-initialized"),t.buildRows(),t.buildOut(),t.setProps(),t.startLoad(),t.loadSlider(),t.initializeEvents(),t.updateArrows(),t.updateDots()),t.$slider.trigger("init",[t])},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.on("click.slick",{message:"next"},e.changeSlide))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&!0===t.options.autoplay&&e("li",t.$dots).on("mouseenter.slick",t.setPaused.bind(t,!0)).on("mouseleave.slick",t.setPaused.bind(t,!1))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),!0===t.options.autoplay&&e(document).on(t.visibilityChange,t.visibility.bind(t)),t.$list.on("mouseenter.slick",t.setPaused.bind(t,!0)),t.$list.on("mouseleave.slick",t.setPaused.bind(t,!1)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange.bind(t)),e(window).on("resize.slick.slick-"+t.instanceUid,t.resize.bind(t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(document).on("ready.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show(),!0===e.options.autoplay&&e.autoPlay()},t.prototype.keyHandler=function(e){var t=this;37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:"next"}})},t.prototype.lazyLoad=function(){function t(t){e("img[data-lazy]",t).each((function(){var t=e(this),n=e(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){t.animate({opacity:1},200)},i.src=n,t.css({opacity:0}).attr("src",n).removeAttr("data-lazy").removeClass("slick-loading")}))}var n,i,o=this;!0===o.options.centerMode?!0===o.options.infinite?i=(n=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(n=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),i=o.options.slidesToShow/2+1+2+o.currentSlide):(i=(n=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide)+o.options.slidesToShow,!0===o.options.fade&&(n>0&&n--,i<=o.slideCount&&i++)),t(o.$slider.find(".slick-slide").slice(n,i)),o.slideCount<=o.options.slidesToShow?t(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?t(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&t(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){var e=this;e.checkResponsive(),e.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){var e=this;e.autoPlayClear(),e.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.paused=!1,e.autoPlay()},t.prototype.postSlide=function(e){var t=this;t.$slider.trigger("afterChange",[t,e]),t.animating=!1,t.setPosition(),t.swipeLeft=null,!0===t.options.autoplay&&!1===t.paused&&t.autoPlay()},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(){var t,n=this;e("img[data-lazy]",n.$slider).length>0&&(t=e("img[data-lazy]",n.$slider).first()).attr("src",t.attr("data-lazy")).removeClass("slick-loading").load((function(){t.removeAttr("data-lazy"),n.progressiveLazyLoad(),!0===n.options.adaptiveHeight&&n.setPosition()})).error((function(){t.removeAttr("data-lazy"),n.progressiveLazyLoad()}))},t.prototype.refresh=function(){var t=this,n=t.currentSlide;t.destroy(),e.extend(t,t.initials),t.init(),t.changeSlide({data:{message:"index",index:n}},!1)},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses(0),t.setPosition(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout((function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.setPosition()}),50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,n){var i=this;return"boolean"==typeof e?e=!0===(t=e)?0:i.slideCount-1:e=!0===t?--e:e,!(i.slideCount<1||0>e||e>i.slideCount-1)&&(i.unload(),!0===n?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(e).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},t.prototype.setCSS=function(e){var t,n,i=this,o={};!0===i.options.rtl&&(e=-e),t="left"==i.positionProp?Math.ceil(e)+"px":"0px",n="top"==i.positionProp?Math.ceil(e)+"px":"0px",o[i.positionProp]=e,!1===i.transformsEnabled?i.$slideTrack.css(o):(o={},!1===i.cssTransitions?(o[i.animType]="translate("+t+", "+n+")",i.$slideTrack.css(o)):(o[i.animType]="translate3d("+t+", "+n+", 0px)",i.$slideTrack.css(o)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,n=this;n.$slides.each((function(i,o){t=-1*n.slideWidth*i,!0===n.options.rtl?e(o).css({position:"relative",right:t,top:0,zIndex:800,opacity:0}):e(o).css({position:"relative",left:t,top:0,zIndex:800,opacity:0})})),n.$slides.eq(n.currentSlide).css({zIndex:900,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(e,t,n){var i=this;i.options[e]=t,!0===n&&(i.unload(),i.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),(void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.msTransition)&&!0===e.options.useCSS&&(e.cssTransitions=!0),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,n,i,o,s=this;s.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true").removeClass("slick-center"),n=s.$slider.find(".slick-slide"),!0===s.options.centerMode?(t=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(e>=t&&e<=s.slideCount-1-t?s.$slides.slice(e-t,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(i=s.options.slidesToShow+e,n.slice(i-t+1,i+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):e===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(e).addClass("slick-center")):e>=0&&e<=s.slideCount-s.options.slidesToShow?s.$slides.slice(e,e+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(o=s.slideCount%s.options.slidesToShow,i=!0===s.options.infinite?s.options.slidesToShow+e:e,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-e<s.options.slidesToShow?n.slice(i-(s.options.slidesToShow-o),i+o).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},t.prototype.setupInfinite=function(){
var t,n,i,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(n=null,o.slideCount>o.options.slidesToShow)){for(i=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,t=o.slideCount;t>o.slideCount-i;t-=1)n=t-1,e(o.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(t=0;i>t;t+=1)n=t,e(o.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each((function(){e(this).attr("id","")}))}},t.prototype.setPaused=function(e){var t=this;!0===t.options.autoplay&&!0===t.options.pauseOnHover&&(t.paused=e,t.autoPlayClear())},t.prototype.selectHandler=function(t){var n=this,i=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),o=parseInt(i.attr("data-slick-index"));return o||(o=0),n.slideCount<=n.options.slidesToShow?(n.$slider.find(".slick-slide").removeClass("slick-active").attr("aria-hidden","true"),n.$slides.eq(o).addClass("slick-active").attr("aria-hidden","false"),!0===n.options.centerMode&&(n.$slider.find(".slick-slide").removeClass("slick-center"),n.$slides.eq(o).addClass("slick-center")),void n.asNavFor(o)):void n.slideHandler(o)},t.prototype.slideHandler=function(e,t,n){var i,o,s,r=null,a=this;return t=t||!1,!0===a.animating&&!0===a.options.waitForAnimate||!0===a.options.fade&&a.currentSlide===e||a.slideCount<=a.options.slidesToShow?void 0:(!1===t&&a.asNavFor(e),i=e,r=a.getLeft(i),s=a.getLeft(a.currentSlide),a.currentLeft=null===a.swipeLeft?s:a.swipeLeft,!1===a.options.infinite&&!1===a.options.centerMode&&(0>e||e>a.getDotCount()*a.options.slidesToScroll)||!1===a.options.infinite&&!0===a.options.centerMode&&(0>e||e>a.slideCount-a.options.slidesToScroll)?void(!1===a.options.fade&&(i=a.currentSlide,!0!==n?a.animateSlide(s,(function(){a.postSlide(i)})):a.postSlide(i))):(!0===a.options.autoplay&&clearInterval(a.autoPlayTimer),o=0>i?0!=a.slideCount%a.options.slidesToScroll?a.slideCount-a.slideCount%a.options.slidesToScroll:a.slideCount+i:i>=a.slideCount?0!=a.slideCount%a.options.slidesToScroll?0:i-a.slideCount:i,a.animating=!0,a.$slider.trigger("beforeChange",[a,a.currentSlide,o]),a.currentSlide,a.currentSlide=o,a.setSlideClasses(a.currentSlide),a.updateDots(),a.updateArrows(),!0===a.options.fade?(!0!==n?a.fadeSlide(o,(function(){a.postSlide(o)})):a.postSlide(o),void a.animateHeight()):void(!0!==n?a.animateSlide(r,(function(){a.postSlide(o)})):a.postSlide(o))))},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,n,i,o=this;return e=o.touchObject.startX-o.touchObject.curX,t=o.touchObject.startY-o.touchObject.curY,n=Math.atan2(t,e),0>(i=Math.round(180*n/Math.PI))&&(i=360-Math.abs(i)),45>=i&&i>=0||360>=i&&i>=315?!1===o.options.rtl?"left":"right":i>=135&&225>=i?!1===o.options.rtl?"right":"left":!0===o.options.verticalSwiping?i>=35&&135>=i?"left":"right":"vertical"},t.prototype.swipeEnd=function(){var e,t=this;if(t.dragging=!1,t.shouldClick=!(t.touchObject.swipeLength>10),void 0===t.touchObject.curX)return!1;if(!0===t.touchObject.edgeHit&&t.$slider.trigger("edge",[t,t.swipeDirection()]),t.touchObject.swipeLength>=t.touchObject.minSwipe)switch(t.swipeDirection()){case"left":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide+t.getSlideCount()):t.currentSlide+t.getSlideCount(),t.slideHandler(e),t.currentDirection=0,t.touchObject={},t.$slider.trigger("swipe",[t,"left"]);break;case"right":e=t.options.swipeToSlide?t.checkNavigable(t.currentSlide-t.getSlideCount()):t.currentSlide-t.getSlideCount(),t.slideHandler(e),t.currentDirection=1,t.touchObject={},t.$slider.trigger("swipe",[t,"right"])}else t.touchObject.startX!==t.touchObject.curX&&(t.slideHandler(t.currentSlide),t.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,n,i,o,s,r=this;return s=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!r.dragging||s&&1!==s.length)&&(t=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==s?s[0].pageX:e.clientX,r.touchObject.curY=void 0!==s?s[0].pageY:e.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),!0===r.options.verticalSwiping&&(r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2)))),"vertical"!==(n=r.swipeDirection())?(void 0!==e.originalEvent&&r.touchObject.swipeLength>4&&e.preventDefault(),o=(!1===r.options.rtl?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),!0===r.options.verticalSwiping&&(o=r.touchObject.curY>r.touchObject.startY?1:-1),i=r.touchObject.swipeLength,r.touchObject.edgeHit=!1,!1===r.options.infinite&&(0===r.currentSlide&&"right"===n||r.currentSlide>=r.getDotCount()&&"left"===n)&&(i=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),r.swipeLeft=!1===r.options.vertical?t+i*o:t+i*(r.$list.height()/r.listWidth)*o,!0===r.options.verticalSwiping&&(r.swipeLeft=t+i*o),!0!==r.options.fade&&!1!==r.options.touchMove&&(!0===r.animating?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))):void 0)},t.prototype.swipeStart=function(e){var t,n=this;return 1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow?(n.touchObject={},!1):(void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==t?t.pageX:e.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==t?t.pageY:e.clientY,void(n.dragging=!0))},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&"object"!=typeof t.options.prevArrow&&t.$prevArrow.remove(),t.$nextArrow&&"object"!=typeof t.options.nextArrow&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(){this.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&!0!==e.options.infinite&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):(e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode||e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode)&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},t.prototype.visibility=function(){var e=this;document[e.hidden]?(e.paused=!0,e.autoPlayClear()):(e.paused=!1,e.autoPlay())},e.fn.slick=function(){for(var e,n=this,i=arguments[0],o=Array.prototype.slice.call(arguments,1),s=n.length,r=0;s>r;r++)if("object"==typeof i||void 0===i?n[r].slick=new t(n[r],i):e=n[r].slick[i].apply(n[r].slick,o),void 0!==e)return e;return n}})),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ResizeSensor=t()}("undefined"!=typeof window?window:this,(function(){function e(e,t){var n=Object.prototype.toString.call(e),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,s=e.length;if(i)for(;o<s;o++)t(e[o]);else t(e)}function t(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}if("undefined"==typeof window)return null;var n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)},i=function(o,s){function r(){var e,t,n=[];this.add=function(e){n.push(e)},this.call=function(i){for(e=0,t=n.length;e<t;e++)n[e].call(this,i)},this.remove=function(i){var o=[];for(e=0,t=n.length;e<t;e++)n[e]!==i&&o.push(n[e]);n=o},this.length=function(){return n.length}}function a(e,i){if(e)if(e.resizedAttached)e.resizedAttached.add(i);else{e.resizedAttached=new r,e.resizedAttached.add(i),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var o="position: absolute; left: -10px; top: -10px; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",s="position: absolute; left: 0; top: 0; transition: 0s;";e.resizeSensor.style.cssText=o,e.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+o+'"><div style="'+s+'"></div></div><div class="resize-sensor-shrink" style="'+o+'"><div style="'+s+' width: 200%; height: 200%"></div></div>',e.appendChild(e.resizeSensor);var a=window.getComputedStyle(e).getPropertyValue("position");"absolute"!==a&&"relative"!==a&&"fixed"!==a&&(e.style.position="relative");var l,c,d,u=e.resizeSensor.childNodes[0],h=u.childNodes[0],f=e.resizeSensor.childNodes[1],p=t(e),m=p.width,g=p.height,v=!0,_=function(){h.style.width="100000px",h.style.height="100000px",u.scrollLeft=1e5,u.scrollTop=1e5,f.scrollLeft=1e5,f.scrollTop=1e5},y=function(){if(v){if(!u.scrollTop&&!u.scrollLeft)return _(),void(d||(d=n((function(){d=0,y()}))));v=!1}_()};e.resizeSensor.resetSensor=y;var b=function(){c=0,l&&(m=p.width,g=p.height,e.resizedAttached&&e.resizedAttached.call(p))},w=function(){p=t(e),(l=p.width!==m||p.height!==g)&&!c&&(c=n(b)),y()},C=function(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n)};C(u,"scroll",w),C(f,"scroll",w),n(y)}}var l;"undefined"!=typeof ResizeObserver?(l=new ResizeObserver((function(t){e(t,(function(e){s.call(this,{width:e.contentRect.width,height:e.contentRect.height})}))})),void 0!==o&&e(o,(function(e){l.observe(e)}))):e(o,(function(e){a(e,s)})),this.detach=function(t){"undefined"!=typeof ResizeObserver?e(o,(function(e){l.unobserve(e)})):i.detach(o,t)},this.reset=function(){o.resizeSensor.resetSensor()}};return i.reset=function(t){e(t,(function(e){e.resizeSensor.resetSensor()}))},i.detach=function(t,n){e(t,(function(e){e&&(e.resizedAttached&&"function"==typeof n&&(e.resizedAttached.remove(n),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},i})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.StickySidebar={})}(this,(function(e){"use strict";function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var i=n((function(e,t){var n;n=function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){var e=".stickySidebar",i={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1},o=function(){function o(e){var n=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,o),this.options=o.extend(i,s),this.sidebar="string"==typeof e?document.querySelector(e):e,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this.dimensions={translateY:0,maxTranslateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach((function(e){n[e]=n[e].bind(n)})),this.initialize()}return n(o,[{key:"initialize",value:function(){var e=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var n=document.querySelectorAll(this.options.containerSelector);if((n=Array.prototype.slice.call(n)).forEach((function(t){t.contains(e.sidebar)&&(e.container=t)})),!n.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+e,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var e=this.dimensions;e.containerTop=o.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerBottom=e.containerTop+e.containerHeight,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebarInner.offsetWidth,e.viewportHeight=window.innerHeight,e.maxTranslateY=e.containerHeight-e.sidebarHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var e=this.dimensions;e.sidebarLeft=o.offsetRelative(this.sidebar).left,e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,e.viewportBottom=e.viewportTop+e.viewportHeight,e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,e.topSpacing=this.options.topSpacing,e.bottomSpacing=this.options.bottomSpacing,"function"==typeof e.topSpacing&&(e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0),"function"==typeof e.bottomSpacing&&(e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?e.topSpacing<e.lastTopSpacing&&(e.translateY+=e.lastTopSpacing-e.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&e.bottomSpacing<e.lastBottomSpacing&&(e.translateY+=e.lastBottomSpacing-e.bottomSpacing,this._reStyle=!0),e.lastTopSpacing=e.topSpacing,e.lastBottomSpacing=e.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){var e=this.dimensions,t="down"===this.scrollDirection?e.lastBottomSpacing:e.lastTopSpacing;return this.dimensions.sidebarHeight+t<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){this._calcDimensionsWithScroll();var e=this.dimensions,t=e.viewportTop+e.topSpacing,n=this.affixedType;return t<=e.containerTop||e.containerHeight<=e.sidebarHeight?(e.translateY=0,n="STATIC"):n="up"===this.direction?this._getAffixTypeScrollingUp():this._getAffixTypeScrollingDown(),e.translateY=Math.max(0,e.translateY),e.translateY=Math.min(e.containerHeight,e.translateY),e.translateY=Math.round(e.translateY),e.lastViewportTop=e.viewportTop,n}},{key:"_getAffixTypeScrollingDown",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,n=e.viewportTop+e.topSpacing,i=e.viewportBottom-e.bottomSpacing,o=this.affixedType;return this.isSidebarFitsViewport()?e.sidebarHeight+n>=e.containerBottom?(e.translateY=e.containerBottom-t,o="CONTAINER-BOTTOM"):n>=e.containerTop&&(e.translateY=n-e.containerTop,o="VIEWPORT-TOP"):e.containerBottom<=i?(e.translateY=e.containerBottom-t,o="CONTAINER-BOTTOM"):t+e.translateY<=i?(e.translateY=i-t,o="VIEWPORT-BOTTOM"):e.containerTop+e.translateY<=n&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getAffixTypeScrollingUp",value:function(){var e=this.dimensions,t=e.sidebarHeight+e.containerTop,n=e.viewportTop+e.topSpacing,i=e.viewportBottom-e.bottomSpacing,o=this.affixedType;return n<=e.translateY+e.containerTop?(e.translateY=n-e.containerTop,o="VIEWPORT-TOP"):e.containerBottom<=i?(e.translateY=e.containerBottom-t,o="CONTAINER-BOTTOM"):this.isSidebarFitsViewport()||e.containerTop<=n&&0!==e.translateY&&e.maxTranslateY!==e.translateY&&(o="VIEWPORT-UNBOTTOM"),o}},{key:"_getStyle",value:function(e){if(void 0!==e){var t={inner:{},outer:{}},n=this.dimensions;switch(e){case"VIEWPORT-TOP":t.inner={position:"fixed",top:n.topSpacing,left:n.sidebarLeft-n.viewportLeft,width:n.sidebarWidth};break;case"VIEWPORT-BOTTOM":t.inner={position:"fixed",top:"auto",left:n.sidebarLeft,bottom:n.bottomSpacing,width:n.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var i=this._getTranslate(0,n.translateY+"px");t.inner=i?{transform:i}:{position:"absolute",top:n.translateY,width:n.sidebarWidth}}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":t.outer={height:n.sidebarHeight,position:"relative"}}return t.outer=o.extend({height:"",position:""},t.outer),t.inner=o.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:""},t.inner),t}}},{key:"stickyPosition",value:function(t){if(!this._breakpoint){t=this._reStyle||t||!1,this.options.topSpacing,this.options.bottomSpacing;var n=this.getAffixType(),i=this._getStyle(n);if((this.affixedType!=n||t)&&n){var s="affix."+n.toLowerCase().replace("viewport-","")+e;for(var r in o.eventTrigger(this.sidebar,s),"STATIC"===n?o.removeClass(this.sidebar,this.options.stickyClass):o.addClass(this.sidebar,this.options.stickyClass),i.outer){var a="number"==typeof i.outer[r]?"px":"";this.sidebar.style[r]=i.outer[r]+a}for(var l in i.inner){var c="number"==typeof i.inner[l]?"px":"";this.sidebarInner.style[l]=i.inner[l]+c}var d="affixed."+n.toLowerCase().replace("viewport-","")+e;o.eventTrigger(this.sidebar,d)}else this._initialized&&(this.sidebarInner.style.left=i.inner.left);this.affixedType=n}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),o.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,e=n.type,requestAnimationFrame((function(){"scroll"===e?(t._calcDimensionsWithScroll(),t.observeScrollDir(),t.stickyPosition()):(t._widthBreakpoint(),t.calcDimensions(),t.stickyPosition(!0)),t._running=!1})))}},{key:"_setSupportFeatures",value:function(){var e=this.support;e.transform=o.supportTransform(),e.transform3d=o.supportTransform(!0)}},{key:"_getTranslate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+e+", "+t+", "+n+")":!!this.support.translate&&"translate("+e+", "+t+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{capture:!1}),window.removeEventListener("scroll",this,{capture:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+e,this);var t={inner:{},outer:{}};for(var n in t.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},t.outer={height:"",position:""},t.outer)this.sidebar.style[n]=t.outer[n];for(var i in t.inner)this.sidebarInner.style[i]=t.inner[i];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(e){var t=!1,n=e?"perspective":"transform",i=n.charAt(0).toUpperCase()+n.slice(1),o=["Webkit","Moz","O","ms"],s=document.createElement("support").style;return(n+" "+o.join(i+" ")+i).split(" ").forEach((function(e){if(void 0!==s[e])return t=e,!1})),t}},{key:"eventTrigger",value:function(e,t,n){try{var i=new CustomEvent(t,{detail:n})}catch(e){(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n)}e.dispatchEvent(i)}},{key:"extend",value:function(e,t){var n={};for(var i in e)void 0!==t[i]?n[i]=t[i]:n[i]=e[i];return n}},{key:"offsetRelative",value:function(e){var t={left:0,top:0};do{var n=e.offsetTop,i=e.offsetLeft;isNaN(n)||(t.top+=n),isNaN(i)||(t.left+=i),e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return t}},{key:"addClass",value:function(e,t){o.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}},{key:"removeClass",value:function(e,t){o.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}},{key:"defaults",get:function(){return i}}]),o}();return o}();e.default=i,window.StickySidebar=i},n(t)})),o=t(i);e.default=o,e.__moduleExports=i,Object.defineProperty(e,"__esModule",{value:!0})})),function(){var e,t,n,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;(i=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,n,i,o,s,r;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:e.label,title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),r=[],n=0,i=(s=e.childNodes).length;n<i;n++)o=s[n],r.push(this.add_option(o,t,e.disabled));return r},e.prototype.add_option=function(e,t,n){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:!0===n?n:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e}()).select_to_array=function(e){var t,n,o,s,r;for(s=new i,n=0,o=(r=e.childNodes).length;n<o;n++)t=r[n],s.add_node(t);return s.parsed},t=function(){function e(t,n){this.form_field=t,this.options=null!=n?n:{},this.label_click_handler=o(this.label_click_handler,this),e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){return this.click_test_action=function(e){return function(t){return e.test_active_click(t)}}(this),this.activate_action=function(e){return function(t){return e.activate_field(t)}}(this),this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.is_rtl=this.options.rtl||/\bchosen-rtl\b/.test(this.form_field.className),this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY,this.case_sensitive_search=this.options.case_sensitive_search||!1,this.hide_results_on_select=null==this.options.hide_results_on_select||this.options.hide_results_on_select},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.default_text=this.escape_html(this.default_text),this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+this.escape_html(e.group_label)+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){if(this.is_multiple){if(!this.active_field)return setTimeout(function(e){return function(){return e.container_mousedown()}}(this),50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(e){return function(){return e.blur_test()}}(this),100)},e.prototype.label_click_handler=function(e){return this.is_multiple?this.container_mousedown(e):this.activate_field()},e.prototype.results_option_build=function(e){var t,n,i,o,s,r,a;for(t="",a=0,o=0,s=(r=this.results_data).length;o<s&&(i="",""!==(i=(n=r[o]).group?this.result_add_group(n):this.result_add_option(n))&&(a++,t+=i),(null!=e?e.first:void 0)&&(n.selected&&this.is_multiple?this.choice_build(n):n.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(n))),!(a>=this.max_shown_results));o++);return t},e.prototype.result_add_option=function(e){var t,n;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),(n=document.createElement("li")).className=t.join(" "),e.style&&(n.style.cssText=e.style),n.setAttribute("data-option-array-index",e.array_index),n.innerHTML=e.highlighted_html||e.html,e.title&&(n.title=e.title),this.outerHTML(n)):""},e.prototype.result_add_group=function(e){var t,n;return(e.search_match||e.group_match)&&e.active_options>0?((t=[]).push("group-result"),e.classes&&t.push(e.classes),(n=document.createElement("li")).className=t.join(" "),n.innerHTML=e.highlighted_html||this.escape_html(e.label),e.title&&(n.title=e.title),this.outerHTML(n)):""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var e,t,n,i,o;for(o=[],e=0,t=(n=this.results_data).length;e<t;e++)(i=n[e]).selected?o.push(i.selected=!1):o.push(void 0);return o},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(e){var t,n,i,o,s,r,a,l,c,d,u,h,f,p,m;for(this.no_results_clear(),d=0,t=(a=this.get_search_text()).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),c=this.get_search_regex(t),i=0,o=(l=this.results_data).length;i<o;i++)(s=l[i]).search_match=!1,u=null,h=null,s.highlighted_html="",this.include_option_in_results(s)&&(s.group&&(s.group_match=!1,s.active_options=0),null!=s.group_array_index&&this.results_data[s.group_array_index]&&(0===(u=this.results_data[s.group_array_index]).active_options&&u.search_match&&(d+=1),u.active_options+=1),m=s.group?s.label:s.text,s.group&&!this.group_search||(h=this.search_string_match(m,c),s.search_match=null!=h,s.search_match&&!s.group&&(d+=1),s.search_match?(a.length&&(f=h.index,r=m.slice(0,f),n=m.slice(f,f+a.length),p=m.slice(f+a.length),s.highlighted_html=this.escape_html(r)+"<em>"+this.escape_html(n)+"</em>"+this.escape_html(p)),null!=u&&(u.group_match=!0)):null!=s.group_array_index&&this.results_data[s.group_array_index].search_match&&(s.search_match=!0)));return this.result_clear_highlight(),d<1&&a.length?(this.update_results_content(""),this.no_results(a)):(this.update_results_content(this.results_option_build()),(null!=e?e.skip_highlight:void 0)?void 0:this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t,n;return n=this.search_contains?e:"(^|\\s|\\b)"+e+"[^\\s]*",this.enable_split_word_search||this.search_contains||(n="^"+n),t=this.case_sensitive_search?"":"i",new RegExp(n,t)},e.prototype.search_string_match=function(e,t){var n;return n=t.exec(e),!this.search_contains&&(null!=n?n[1]:void 0)&&(n.index+=1),n},e.prototype.choices_count=function(){var e,t,n;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,e=0,t=(n=this.form_field.options).length;e<t;e++)n[e].selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){if(e.preventDefault(),this.activate_field(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keydown_checker=function(e){var t,n;switch(n=null!=(t=e.which)?t:e.keyCode,this.search_field_scale(),8!==n&&this.pending_backstroke&&this.clear_backstroke(),n){case 8:this.backstroke_length=this.get_search_field_value().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:case 27:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:
e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},e.prototype.keyup_checker=function(e){var t,n;switch(n=null!=(t=e.which)?t:e.keyCode,this.search_field_scale(),n){case 8:this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0?this.keydown_backstroke():this.pending_backstroke||(this.result_clear_highlight(),this.results_search());break;case 13:e.preventDefault(),this.results_showing&&this.result_select(e);break;case 27:this.results_showing&&this.results_hide();break;case 9:case 16:case 17:case 18:case 38:case 40:case 91:break;default:this.results_search()}},e.prototype.clipboard_event_checker=function(){if(!this.is_disabled)return setTimeout(function(e){return function(){return e.results_search()}}(this),50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return!(this.is_multiple&&!this.display_selected_options&&e.selected||!this.display_disabled_options&&e.disabled||e.empty)},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){if(this.touch_started)return this.search_results_mouseup(e)},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:((t=document.createElement("div")).appendChild(e),t.innerHTML)},e.prototype.get_single_html=function(){return'<a class="chosen-single chosen-default">\n  <span>'+this.default_text+'</span>\n  <div><b></b></div>\n</a>\n<div class="chosen-drop">\n  <div class="chosen-search">\n    <input class="chosen-search-input" type="text" autocomplete="off" />\n  </div>\n  <ul class="chosen-results"></ul>\n</div>'},e.prototype.get_multi_html=function(){return'<ul class="chosen-choices">\n  <li class="search-field">\n    <input class="chosen-search-input" type="text" autocomplete="off" value="'+this.default_text+'" />\n  </li>\n</ul>\n<div class="chosen-drop">\n  <ul class="chosen-results"></ul>\n</div>'},e.prototype.get_no_results_html=function(e){return'<li class="no-results">\n  '+this.results_none_found+" <span>"+this.escape_html(e)+"</span>\n</li>"},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!(/iP(od|hone)/i.test(window.navigator.userAgent)||/IEMobile/i.test(window.navigator.userAgent)||/Windows Phone/i.test(window.navigator.userAgent)||/BlackBerry/i.test(window.navigator.userAgent)||/BB10/i.test(window.navigator.userAgent)||/Android.*Mobile/i.test(window.navigator.userAgent))},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),(e=jQuery).fn.extend({chosen:function(i){return t.browser_is_supported()?this.each((function(){var t,o;o=(t=e(this)).data("chosen"),"destroy"!==i?o instanceof n||t.data("chosen",new n(this,i)):o instanceof n&&o.destroy()})):this}}),n=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,t),n.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex},n.prototype.set_up_html=function(){var t,n;return(t=["chosen-container"]).push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),n={class:t.join(" "),title:this.form_field.title},this.form_field.id.length&&(n.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",n),this.container.width(this.container_width()),this.is_multiple?this.container.html(this.get_multi_html()):this.container.html(this.get_single_html()),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},n.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},n.prototype.register_observers=function(){return this.container.on("touchstart.chosen",function(e){return function(t){e.container_mousedown(t)}}(this)),this.container.on("touchend.chosen",function(e){return function(t){e.container_mouseup(t)}}(this)),this.container.on("mousedown.chosen",function(e){return function(t){e.container_mousedown(t)}}(this)),this.container.on("mouseup.chosen",function(e){return function(t){e.container_mouseup(t)}}(this)),this.container.on("mouseenter.chosen",function(e){return function(t){e.mouse_enter(t)}}(this)),this.container.on("mouseleave.chosen",function(e){return function(t){e.mouse_leave(t)}}(this)),this.search_results.on("mouseup.chosen",function(e){return function(t){e.search_results_mouseup(t)}}(this)),this.search_results.on("mouseover.chosen",function(e){return function(t){e.search_results_mouseover(t)}}(this)),this.search_results.on("mouseout.chosen",function(e){return function(t){e.search_results_mouseout(t)}}(this)),this.search_results.on("mousewheel.chosen DOMMouseScroll.chosen",function(e){return function(t){e.search_results_mousewheel(t)}}(this)),this.search_results.on("touchstart.chosen",function(e){return function(t){e.search_results_touchstart(t)}}(this)),this.search_results.on("touchmove.chosen",function(e){return function(t){e.search_results_touchmove(t)}}(this)),this.search_results.on("touchend.chosen",function(e){return function(t){e.search_results_touchend(t)}}(this)),this.form_field_jq.on("chosen:updated.chosen",function(e){return function(t){e.results_update_field(t)}}(this)),this.form_field_jq.on("chosen:activate.chosen",function(e){return function(t){e.activate_field(t)}}(this)),this.form_field_jq.on("chosen:open.chosen",function(e){return function(t){e.container_mousedown(t)}}(this)),this.form_field_jq.on("chosen:close.chosen",function(e){return function(t){e.close_field(t)}}(this)),this.search_field.on("blur.chosen",function(e){return function(t){e.input_blur(t)}}(this)),this.search_field.on("keyup.chosen",function(e){return function(t){e.keyup_checker(t)}}(this)),this.search_field.on("keydown.chosen",function(e){return function(t){e.keydown_checker(t)}}(this)),this.search_field.on("focus.chosen",function(e){return function(t){e.input_focus(t)}}(this)),this.search_field.on("cut.chosen",function(e){return function(t){e.clipboard_event_checker(t)}}(this)),this.search_field.on("paste.chosen",function(e){return function(t){e.clipboard_event_checker(t)}}(this)),this.is_multiple?this.search_choices.on("click.chosen",function(e){return function(t){e.choices_click(t)}}(this)):this.container.on("click.chosen",(function(e){e.preventDefault()}))},n.prototype.destroy=function(){return e(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.form_field_label.length>0&&this.form_field_label.off("click.chosen"),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},n.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field.disabled||this.form_field_jq.parents("fieldset").is(":disabled"),this.container.toggleClass("chosen-disabled",this.is_disabled),this.search_field[0].disabled=this.is_disabled,this.is_multiple||this.selected_item.off("focus.chosen",this.activate_field),this.is_disabled?this.close_field():this.is_multiple?void 0:this.selected_item.on("focus.chosen",this.activate_field)},n.prototype.container_mousedown=function(t){var n;if(!this.is_disabled)return!t||"mousedown"!==(n=t.type)&&"touchstart"!==n||this.results_showing||t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close")?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).on("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},n.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName&&!this.is_disabled)return this.results_reset(e)},n.prototype.search_results_mousewheel=function(e){var t;if(e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t)return e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop(t+this.search_results.scrollTop())},n.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},n.prototype.close_field=function(){return e(this.container[0].ownerDocument).off("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale(),this.search_field.blur()},n.prototype.activate_field=function(){if(!this.is_disabled)return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},n.prototype.test_active_click=function(t){var n;return(n=e(t.target).closest(".chosen-container")).length&&this.container[0]===n[0]?this.active_field=!0:this.close_field()},n.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},n.prototype.result_do_highlight=function(e){var t,n,i,o,s;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),o=(i=parseInt(this.search_results.css("maxHeight"),10))+(s=this.search_results.scrollTop()),(t=(n=this.result_highlight.position().top+this.search_results.scrollTop())+this.result_highlight.outerHeight())>=o)return this.search_results.scrollTop(t-i>0?t-i:0);if(n<s)return this.search_results.scrollTop(n)}},n.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},n.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.get_search_field_value()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},n.prototype.update_results_content=function(e){return this.search_results.html(e)},n.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},n.prototype.set_tab_index=function(){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e},n.prototype.set_label_behavior=function(){if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.on("click.chosen",this.label_click_handler)},n.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},n.prototype.search_results_mouseup=function(t){var n;if((n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first()).length)return this.result_highlight=n,this.result_select(t),this.search_field.focus()},n.prototype.search_results_mouseover=function(t){var n;if(n=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first())return this.result_do_highlight(n)},n.prototype.search_results_mouseout=function(t){if(e(t.target).hasClass("active-result")||e(t.target).parents(".active-result").first())return this.result_clear_highlight()},n.prototype.choice_build=function(t){var n,i;return n=e("<li />",{class:"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?n.addClass("search-choice-disabled"):((i=e("<a />",{class:"search-choice-close","data-option-array-index":t.array_index})).on("click.chosen",function(e){return function(t){return e.choice_destroy_link_click(t)}}(this)),n.append(i)),this.search_container.before(n)},n.prototype.choice_destroy_link_click=function(t){if(t.preventDefault(),t.stopPropagation(),!this.is_disabled)return this.choice_destroy(e(t.target))},n.prototype.choice_destroy=function(e){if(this.result_deselect(e[0].getAttribute("data-option-array-index")))return this.active_field?this.search_field.focus():this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.get_search_field_value().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()},n.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.trigger_form_field_change(),this.active_field)return this.results_hide()},n.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},n.prototype.result_select=function(e){var t,n;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),(n=this.results_data[t[0].getAttribute("data-option-array-index")]).selected=!0,this.form_field.options[n.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(n):this.single_set_selected_text(this.choice_label(n)),this.is_multiple&&(!this.hide_results_on_select||e.metaKey||e.ctrlKey)?e.metaKey||e.ctrlKey?this.winnow_results({skip_highlight:!0}):(this.search_field.val(""),this.winnow_results()):(this.results_hide(),this.show_search_field_default()),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.trigger_form_field_change({selected:this.form_field.options[n.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())},n.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},n.prototype.result_deselect=function(e){var t;return t=this.results_data[e],!this.form_field.options[t.options_index].disabled&&(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.trigger_form_field_change({deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},n.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},n.prototype.get_search_field_value=function(){return this.search_field.val()},n.prototype.get_search_text=function(){return e.trim(this.get_search_field_value())},n.prototype.escape_html=function(t){return e("<div/>").text(t).html()},n.prototype.winnow_results_set_highlight=function(){var e,t;if(null!=(e=(t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result")).length?t.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(e)},n.prototype.no_results=function(e){var t;return t=this.get_no_results_html(e),this.search_results.append(t),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},n.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},n.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},n.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result")).length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight()):void 0:this.results_show()},n.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last()).length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0},n.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},n.prototype.search_field_scale=function(){var t,n,i,o,s,r,a;if(this.is_multiple){for(s={position:"absolute",left:"-1000px",top:"-1000px",display:"none",whiteSpace:"pre"},n=0,i=(r=["fontSize","fontStyle","fontWeight","fontFamily","lineHeight","textTransform","letterSpacing"]).length;n<i;n++)s[o=r[n]]=this.search_field.css(o);return(t=e("<div />").css(s)).text(this.get_search_field_value()),e("body").append(t),a=t.width()+25,t.remove(),this.container.is(":visible")&&(a=Math.min(this.container.outerWidth()-10,a)),this.search_field.width(a)}},n.prototype.trigger_form_field_change=function(e){return this.form_field_jq.trigger("input",e),this.form_field_jq.trigger("change",e)},n}()}.call(this),function(e){var t=function(e,t,n){"use strict";var i,o;if(function(){var t,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(t in o=e.lazySizesConfig||e.lazysizesConfig||{},n)t in o||(o[t]=n[t])}(),!t||!t.getElementsByClassName)return{init:function(){},cfg:o,noSupport:!0};var s=t.documentElement,r=e.HTMLPictureElement,a="addEventListener",l="getAttribute",c=e[a].bind(e),d=e.setTimeout,u=e.requestAnimationFrame||d,h=e.requestIdleCallback,f=/^picture$/i,p=["load","error","lazyincluded","_lazyloaded"],m={},g=Array.prototype.forEach,v=function(e,t){return m[t]||(m[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),m[t].test(e[l]("class")||"")&&m[t]},_=function(e,t){v(e,t)||e.setAttribute("class",(e[l]("class")||"").trim()+" "+t)},y=function(e,t){var n;(n=v(e,t))&&e.setAttribute("class",(e[l]("class")||"").replace(n," "))},b=function(e,t,n){var i=n?a:"removeEventListener";n&&b(e,t),p.forEach((function(n){e[i](n,t)}))},w=function(e,n,o,s,r){var a=t.createEvent("Event");return o||(o={}),o.instance=i,a.initEvent(n,!s,!r),a.detail=o,e.dispatchEvent(a),a},C=function(t,n){var i;!r&&(i=e.picturefill||o.pf)?(n&&n.src&&!t[l]("srcset")&&t.setAttribute("srcset",n.src),i({reevaluate:!0,elements:[t]})):n&&n.src&&(t.src=n.src)},$=function(e,t){return(getComputedStyle(e,null)||{})[t]},S=function(e,t,n){for(n=n||e.offsetWidth;n<o.minSize&&t&&!e._lazysizesWidth;)n=t.offsetWidth,t=t.parentNode;return n},T=function(){var e,n,i=[],o=[],s=i,r=function(){var t=s;for(s=i.length?o:i,e=!0,n=!1;t.length;)t.shift()();e=!1},a=function(i,o){e&&!o?i.apply(this,arguments):(s.push(i),n||(n=!0,(t.hidden?d:u)(r)))};return a._lsFlush=r,a}(),x=function(e,t){return t?function(){T(e)}:function(){var t=this,n=arguments;T((function(){e.apply(t,n)}))}},k=function(e){var t,i=0,s=o.throttleDelay,r=o.ricTimeout,a=function(){t=!1,i=n.now(),e()},l=h&&r>49?function(){h(a,{timeout:r}),r!==o.ricTimeout&&(r=o.ricTimeout)}:x((function(){d(a)}),!0);return function(e){var o;(e=!0===e)&&(r=33),t||(t=!0,(o=s-(n.now()-i))<0&&(o=0),e||o<9?l():d(l,o))}},R=function(e){var t,i,o=99,s=function(){t=null,e()},r=function(){var e=n.now()-i;e<o?d(r,o-e):(h||s)(s)};return function(){i=n.now(),t||(t=d(r,o))}},E=function(){var r,h,p,m,S,E,A,O,P,D,I,z,M=/^img$/i,H=/^iframe$/i,L="onscroll"in e&&!/(gle|ing)bot/.test(navigator.userAgent),j=0,W=0,B=0,F=-1,q=function(e){B--,(!e||B<0||!e.target)&&(B=0)},U=function(e){return null==z&&(z="hidden"==$(t.body,"visibility")),z||!("hidden"==$(e.parentNode,"visibility")&&"hidden"==$(e,"visibility"))},V=function(e,n){var i,o=e,r=U(e);for(O-=n,I+=n,P-=n,D+=n;r&&(o=o.offsetParent)&&o!=t.body&&o!=s;)(r=($(o,"opacity")||1)>0)&&"visible"!=$(o,"overflow")&&(i=o.getBoundingClientRect(),r=D>i.left&&P<i.right&&I>i.top-1&&O<i.bottom+1);return r},Y=function(){var e,n,a,c,d,u,f,p,g,v,_,y,b=i.elements;if((m=o.loadMode)&&B<8&&(e=b.length)){for(n=0,F++;n<e;n++)if(b[n]&&!b[n]._lazyRace)if(!L||i.prematureUnveil&&i.prematureUnveil(b[n]))te(b[n]);else if((p=b[n][l]("data-expand"))&&(u=1*p)||(u=W),v||(v=!o.expand||o.expand<1?s.clientHeight>500&&s.clientWidth>500?500:370:o.expand,i._defEx=v,_=v*o.expFactor,y=o.hFac,z=null,W<_&&B<1&&F>2&&m>2&&!t.hidden?(W=_,F=0):W=m>1&&F>1&&B<6?v:j),g!==u&&(E=innerWidth+u*y,A=innerHeight+u,f=-1*u,g=u),a=b[n].getBoundingClientRect(),(I=a.bottom)>=f&&(O=a.top)<=A&&(D=a.right)>=f*y&&(P=a.left)<=E&&(I||D||P||O)&&(o.loadHidden||U(b[n]))&&(h&&B<3&&!p&&(m<3||F<4)||V(b[n],u))){if(te(b[n]),d=!0,B>9)break}else!d&&h&&!c&&B<4&&F<4&&m>2&&(r[0]||o.preloadAfterLoad)&&(r[0]||!p&&(I||D||P||O||"auto"!=b[n][l](o.sizesAttr)))&&(c=r[0]||b[n]);c&&!d&&te(c)}},G=k(Y),X=function(e){var t=e.target;t._lazyCache?delete t._lazyCache:(q(e),_(t,o.loadedClass),y(t,o.loadingClass),b(t,J),w(t,"lazyloaded"))},Q=x(X),J=function(e){Q({target:e.target})},K=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},Z=function(e){var t,n=e[l](o.srcsetAttr);(t=o.customMedia[e[l]("data-media")||e[l]("media")])&&e.setAttribute("media",t),n&&e.setAttribute("srcset",n)},ee=x((function(e,t,n,i,s){var r,a,c,u,h,m;(h=w(e,"lazybeforeunveil",t)).defaultPrevented||(i&&(n?_(e,o.autosizesClass):e.setAttribute("sizes",i)),a=e[l](o.srcsetAttr),r=e[l](o.srcAttr),s&&(u=(c=e.parentNode)&&f.test(c.nodeName||"")),m=t.firesLoad||"src"in e&&(a||r||u),h={target:e},_(e,o.loadingClass),m&&(clearTimeout(p),p=d(q,2500),b(e,J,!0)),u&&g.call(c.getElementsByTagName("source"),Z),a?e.setAttribute("srcset",a):r&&!u&&(H.test(e.nodeName)?K(e,r):e.src=r),s&&(a||u)&&C(e,{src:r})),e._lazyRace&&delete e._lazyRace,y(e,o.lazyClass),T((function(){var t=e.complete&&e.naturalWidth>1;m&&!t||(t&&_(e,"ls-is-cached"),X(h),e._lazyCache=!0,d((function(){"_lazyCache"in e&&delete e._lazyCache}),9)),"lazy"==e.loading&&B--}),!0)})),te=function(e){if(!e._lazyRace){var t,n=M.test(e.nodeName),i=n&&(e[l](o.sizesAttr)||e[l]("sizes")),s="auto"==i;(!s&&h||!n||!e[l]("src")&&!e.srcset||e.complete||v(e,o.errorClass)||!v(e,o.lazyClass))&&(t=w(e,"lazyunveilread").detail,s&&N.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,B++,ee(e,t,s,i,n))}},ne=R((function(){o.loadMode=3,G()})),ie=function(){3==o.loadMode&&(o.loadMode=2),ne()},oe=function(){h||(n.now()-S<999?d(oe,999):(h=!0,o.loadMode=3,G(),c("scroll",ie,!0)))};return{_:function(){S=n.now(),i.elements=t.getElementsByClassName(o.lazyClass),r=t.getElementsByClassName(o.lazyClass+" "+o.preloadClass),c("scroll",G,!0),c("resize",G,!0),c("pageshow",(function(e){if(e.persisted){var n=t.querySelectorAll("."+o.loadingClass);n.length&&n.forEach&&u((function(){n.forEach((function(e){e.complete&&te(e)}))}))}})),e.MutationObserver?new MutationObserver(G).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s[a]("DOMNodeInserted",G,!0),s[a]("DOMAttrModified",G,!0),setInterval(G,999)),c("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach((function(e){t[a](e,G,!0)})),/d$|^c/.test(t.readyState)?oe():(c("load",oe),t[a]("DOMContentLoaded",G),d(oe,2e4)),i.elements.length?(Y(),T._lsFlush()):G()},checkElems:G,unveil:te,_aLSL:ie}}(),N=function(){var e,n=x((function(e,t,n,i){var o,s,r;if(e._lazysizesWidth=i,i+="px",e.setAttribute("sizes",i),f.test(t.nodeName||""))for(s=0,r=(o=t.getElementsByTagName("source")).length;s<r;s++)o[s].setAttribute("sizes",i);n.detail.dataAttr||C(e,n.detail)})),i=function(e,t,i){var o,s=e.parentNode;s&&(i=S(e,s,i),(o=w(e,"lazybeforesizes",{width:i,dataAttr:!!t})).defaultPrevented||(i=o.detail.width)&&i!==e._lazysizesWidth&&n(e,s,o,i))},s=function(){var t,n=e.length;if(n)for(t=0;t<n;t++)i(e[t])},r=R(s);return{_:function(){e=t.getElementsByClassName(o.autosizesClass),c("resize",r)},checkElems:r,updateElem:i}}(),A=function(){!A.i&&t.getElementsByClassName&&(A.i=!0,N._(),E._())};return d((function(){o.init&&A()})),i={cfg:o,autoSizer:N,loader:E,init:A,uP:C,aC:_,rC:y,hC:v,fire:w,gW:S,rAF:T}}(e,e.document,Date);e.lazySizes=t,"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof window?window:{}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ActionCable={})}(this,(function(e){"use strict";function t(e){if("function"==typeof e&&(e=e()),e&&!/^wss?:/i.test(e)){const t=document.createElement("a");return t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href}return e}function n(e=i("url")||c.default_mount_path){return new y(e)}function i(e){const t=document.head.querySelector(`meta[name='action-cable-${e}']`);if(t)return t.getAttribute("content")}var o={logger:self.console,WebSocket:self.WebSocket},s={log(...e){this.enabled&&(e.push(Date.now()),o.logger.log("[ActionCable]",...e))}};const r=()=>(new Date).getTime(),a=e=>(r()-e)/1e3;class l{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=r(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),s.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=r(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),s.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=r()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,s.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=r(),s.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout((()=>{this.reconnectIfStale(),this.poll()}),this.getPollInterval())}getPollInterval(){const{staleThreshold:e,reconnectionBackoffRate:t}=this.constructor;return 1e3*e*Math.pow(1+t,Math.min(this.reconnectAttempts,10))*(1+(0===this.reconnectAttempts?1:t)*Math.random())}reconnectIfStale(){this.connectionIsStale()&&(s.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${a(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?s.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${a(this.disconnectedAt)} s`):(s.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return a(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&a(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){"visible"===document.visibilityState&&setTimeout((()=>{!this.connectionIsStale()&&this.connection.isOpen()||(s.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())}),200)}}l.staleThreshold=6,l.reconnectionBackoffRate=.15;var c={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]};const{message_types:d,protocols:u}=c,h=u.slice(0,u.length-1),f=[].indexOf;class p{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new l(this),this.disconnected=!0}send(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)}open(){return this.isActive()?(s.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(s.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${u}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new o.WebSocket(this.consumer.url,u),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(s.log(`Reopening WebSocket, current state is ${this.getState()}`),!this.isActive())return this.open();try{return this.close()}catch(e){s.log("Failed to reopen WebSocket",e)}finally{s.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return f.call(h,this.getProtocol())>=0}isState(...e){return f.call(e,this.getState())>=0}getState(){if(this.webSocket)for(let e in o.WebSocket)if(o.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase();return null}installEventHandlers(){for(let e in this.events){const t=this.events[e].bind(this);this.webSocket[`on${e}`]=t}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}}p.reopenDelay=500,p.prototype.events={message(e){if(!this.isProtocolSupported())return;const{identifier:t,message:n,reason:i,reconnect:o,type:r}=JSON.parse(e.data);switch(r){case d.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case d.disconnect:return s.log(`Disconnecting. Reason: ${i}`),this.close({allowReconnect:o});case d.ping:return this.monitor.recordPing();case d.confirmation:return this.subscriptions.confirmSubscription(t),this.subscriptions.notify(t,"connected");case d.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open(){if(s.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return s.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(e){if(s.log("WebSocket onclose event"),
!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){s.log("WebSocket onerror event")}};const m=function(e,t){if(null!=t)for(let n in t){const i=t[n];e[n]=i}return e};class g{constructor(e,t={},n){this.consumer=e,this.identifier=JSON.stringify(t),m(this,n)}perform(e,t={}){return t.action=e,this.send(t)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}class v{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){-1==this.pendingSubscriptions.indexOf(e)?(s.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):s.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){s.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter((t=>t!==e))}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout((()=>{this.subscriptions&&"function"==typeof this.subscriptions.subscribe&&this.pendingSubscriptions.map((e=>{s.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)}))}),500)}}class _{constructor(e){this.consumer=e,this.guarantor=new v(this),this.subscriptions=[]}create(e,t){const n="object"==typeof e?e:{channel:e},i=new g(this.consumer,n,t);return this.add(i)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map((e=>(this.forget(e),this.notify(e,"rejected"),e)))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter((t=>t!==e)),e}findAll(e){return this.subscriptions.filter((t=>t.identifier===e))}reload(){return this.subscriptions.map((e=>this.subscribe(e)))}notifyAll(e,...t){return this.subscriptions.map((n=>this.notify(n,e,...t)))}notify(e,t,...n){let i;return i="string"==typeof e?this.findAll(e):[e],i.map((e=>"function"==typeof e[t]?e[t](...n):void 0))}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){s.log(`Subscription confirmed ${e}`),this.findAll(e).map((e=>this.guarantor.forget(e)))}sendCommand(e,t){const{identifier:n}=e;return this.consumer.send({command:t,identifier:n})}}class y{constructor(e){this._url=e,this.subscriptions=new _(this),this.connection=new p(this)}get url(){return t(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}console.log("DEPRECATION: action_cable.js has been renamed to actioncable.js \u2013 please update your reference before Rails 8"),e.Connection=p,e.ConnectionMonitor=l,e.Consumer=y,e.INTERNAL=c,e.Subscription=g,e.SubscriptionGuarantor=v,e.Subscriptions=_,e.adapters=o,e.createConsumer=n,e.createWebSocketURL=t,e.getConfig=i,e.logger=s,Object.defineProperty(e,"__esModule",{value:!0})})),StickySidebar.prototype.calcDimensions=function(){if(!this._breakpoint){var e=this.dimensions;e.containerTop=StickySidebar.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerBottom=e.containerTop+e.containerHeight,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebar.offsetWidth,e.viewportHeight=window.innerHeight,e.maxTranslateY=e.containerHeight-e.sidebarHeight,this._calcDimensionsWithScroll()}},$(document).ready((function(){var e=$("div[data-remote-source], span[data-remote-source]");if(e.length>0){var t=function(e){var t={};return e.each((function(e,n){var i=$(n),o=i.data("remote-source");t.hasOwnProperty(o)||(t[o]=[]),t[o].push(i)})),t}(e),n=function(){console.log("Sorry, there was an unexpected problem retrieving the remote source")},i=function(e,t){var o={url:e,error:n,statusCode:{200:function(e){jQuery.each(t,(function(t,n){n.html(e),n.trigger("remoteSource:arrive",e)}))},202:function(){var n=t[0],o=1.25,s=n.data("remote-source:retry-delay")||800,r=Math.round(o*s);r<25e4&&(n.data("remote-source:retry-delay",r),setTimeout(i,r,e,t))}}};$.ajax(o)};$.each(t,(function(e,t){i(e,t)}))}})),function(e){e.Validation=e.Validation||{};var t=e.Validation;t.validateEmail=function(e,t){var n=[],i=e.val(),o=t.val();0==i.length?n.push("Email can't be blank."):/^[^@\s]+@[^@\s]+$/.test(i)||n.push("Email is invalid.");n.length>0?e.data("lc-errors",n):e.removeData("lc-errors"),o?i!==o?t.data("lc-errors",["Email address and confirmation must match."]):t.removeData("lc-errors"):t.data("lc-errors",["Email confirmation can't be blank."])},t.validateUsername=function(e){var t=[],n=e.val();0==n.length&&t.push("Username can't be blank."),n.length<4&&t.push("Username is too short (minimum is 4 characters)."),n.length>30&&t.push("Username is too long (maximum is 30 characters)."),/^[A-Za-z0-9\-\_]+$/.test(n)||t.push("Username may only contain letters, numbers, dashes, and underscores."),t.length>0?e.data("lc-errors",t):e.removeData("lc-errors")},t.validatePassword=function(e){var t=[],n=e.val();0==n.length?t.push("Password can't be blank."):n.length<8&&t.push("Password is too short (minimum is 8 characters)."),t.length>0?e.data("lc-errors",t):e.removeData("lc-errors")},t.validateDate=function(e,t,n,i){if(""==e.val()||""==t.val()||""==n.val()){var o=[];o.push("Please enter your birthday in the MM/DD/YYYY format."),i.data("lc-errors",o)}else i.removeData("lc-errors")},t.validateCountry=function(e,t){if(""==(t||e.val())){var n=[];n.push("Please select your country."),e.data("lc-errors",n)}else e.removeData("lc-errors")},t.validateRole=function(e,t){if(""==(t||e.val())){var n=[];n.push("Please specify whether you are a teacher, student, parent, librarian, or general-interest reader."),e.data("lc-errors",n)}else e.removeData("lc-errors")},t.validatePlan=function(e,t){0==e.filter(":checked").length?t.data("lc-errors",{display:!0}):t.removeData("lc-errors")},t.validateCard=function(t,n){var i=e.validateCreditCard(t);return{fullMessages:$.map(i,(function(e){return e})),isEmpty:function(){return 0==this.fullMessages.length},render:function(){if(!this.isEmpty()){var e="<ul><li>"+this.fullMessages.join("</li><li>")+"</li></ul>";n.find(".payment-errors").show().append(e)}}}}}(window.LitCharts=window.LitCharts||{}),$((function(){var e=function(e){if("click"==e.type||"Enter"==e.key)return!0};$("#switch-to-ai").on("click keydown",(function(t){e(t)&&(localStorage.setItem("switch-to-content-position",$(window).scrollTop()),$(".litguides-content").addClass("hidden-sm hidden-xs"),$(".ask-ai-content").removeClass("hidden-sm hidden-xs"),setTimeout((function(){$(window).scrollTop($(".context-switch-banner:visible").offset().top)}),20))})),$("#switch-to-content").on("click keydown",(function(t){e(t)&&($(".ask-ai-content").addClass("hidden-sm hidden-xs"),$(".litguides-content").removeClass("hidden-sm hidden-xs"),null!=localStorage.getItem("switch-to-content-position")&&$(window).scrollTop(localStorage.getItem("switch-to-content-position")))}))})),$((function(){var e=$(".cookie-notification"),t=$(".hod-promo");$("#cookie-opt-in").on("click",(function(n){return n.preventDefault(),$.ajax({url:e.data("opt-in-path"),method:"post",success:function(){e.hide(),t.trigger("hod:reposition")}}),!1}))})),$((function(){var e=$("img.download-sell-fan-image");if(!e.length)return!1;e.one("load",(function(){$(this).slideDown()}))})),function(e){e.fn.featureInterestModal=function(t){var n=this,i=this.find("form"),o=i.find(".email");return i.on("submit",(function(s){s.preventDefault();var r=o.val();return!!r&&(i.find(".submit").prop("disabled",!1),o.prop("readonly",!0),i.find(".error").slideUp(),e.ajax({url:i.attr("action"),method:"post",data:{feature_interest_contact:{email:r,feature:t}}}).done((function(e){e.success?i.slideUp((function(){n.find(".thanks").slideDown()})):i.find(".error").html(e.errors.join("<br>")).slideDown()})).fail((function(){i.find(".error").text("Hm, it looks like there was an error saving your email. Sorry about that! Please close this popup and contact us below if you see this error message again.").slideDown()})).always((function(){i.find(".submit").prop("disabled",!1),o.prop("readonly",!1)})),!1)})),n.on("hidden.bs.modal",(function(){i.show().get(0).reset(),n.find(".error").hide(),n.find(".thanks").hide()})),this}}(jQuery),$((function(){var e=$(".free-tier-confirmation-modal");e.length>0&&(e.modal(),e.on("hidden.bs.modal",(function(){e.detach()})))})),$((function(){var e=".highlightable-content",t=$(e);if(!LitCharts.highlightsEnabled||!t.length)return!1;var n=$("#create-highlight-registration-modal .registration-modal"),i=$("body");rangy.init();var o=rangy.createHighlighter();o.addClassApplier(rangy.createClassApplier("user-highlight",{ignoreWhiteSpace:!0,tagNames:["span"],elementProperties:{className:"just-highlighted"},onElementCreate:function(){}}));var s=$('<div id="highlightable-note-modal" class="modal lc-modal fade" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><div class="modal-title">Add a note to this highlight</div></div><div class="modal-body"><blockquote></blockquote><textarea placeholder="Write note (optional)" class="form-control note" name="highlight-note"></textarea><div class="text-right"><a href="/account/highlights-and-notes" target="_blank"><small>View all my notes and highlights</small></a></div></div><div class="modal-footer"><button type="button" class="btn btn-md btn-default" data-dismiss="modal">Cancel</button><button type="button" class="btn btn-md btn-primary submit">Submit</button></div></div></div></div>').appendTo(i).modal({show:!1}),r=s.find("textarea[name=highlight-note]"),a='<svg width="25" height="25" viewBox="0 0 25 25"><path d="M13.7 15.964l5.204-9.387-4.726-2.62-5.204 9.387 4.726 2.62zm-.493.885l-1.313 2.37-1.252.54-.702 1.263-3.796-.865 1.228-2.213-.202-1.35 1.314-2.37 4.722 2.616z" fill-rule="evenodd"></path></svg>',l='<svg width="25" height="25" viewBox="0 0 25 25"><path d="M19.074 21.117c-1.244 0-2.432-.37-3.532-1.096a7.792 7.792 0 0 1-.703-.52c-.77.21-1.57.32-2.38.32-4.67 0-8.46-3.5-8.46-7.8C4 7.7 7.79 4.2 12.46 4.2c4.662 0 8.457 3.5 8.457 7.803 0 2.058-.85 3.984-2.403 5.448.023.17.06.35.118.55.192.69.537 1.38 1.026 2.04.15.21.172.48.058.7a.686.686 0 0 1-.613.38h-.03z" fill-rule="evenodd"></path></svg>',c=$('<div id="highlightable-content-popup"><div class="content"><div class="new-selection"><a href="#" id="highlightable-create-highlight" class="create-highlight" data-amplitude="selectedTextHighlight" title="Highlight">'+a+'</a><a href="#" id="highlightable-add-note" class="add-note" data-amplitude="selectedTextAddNote" title="Add Note">'+l+'</a></div><div class="existing-highlight"><a href="#" id="highlightable-delete-highlight" class="delete-highlight" title="Delete Highlight">'+a+'</a><a href="#" id="highlightable-edit-note" class="edit-note" title="Add/Edit Note">'+l+'</a></div></div><div class="arrow-clip"><div class="arrow"></div></div></div>');c.appendTo(i);var d=function(e,t){var n=t.getRangeAt(0).nativeRange.getBoundingClientRect();c.find(".new-selection").show(),c.find(".existing-highlight").hide(),c.removeClass("has-note"),h(n)},u=function(e){var t=o.getHighlightForElement(e[0]);$(t.getHighlightElements()).addClass("active popup"),c.find(".new-selection").hide(),c.find(".existing-highlight").show(),c.data("highlight-id",t.id),c.toggleClass("has-note",!!e.data("note"));var n=e[0].getBoundingClientRect();h(n)},h=function(e){c.show();var t=window.pageXOffset+e.x+e.width/2-c.width()/2;t+c.width()>$(window).width()&&(t-=t+c.width()-$(window).width()),t<0&&(t=0);var n=window.pageYOffset+e.y-c.height()-10;c.css({left:t,top:n})},f=function(){c.hide(),$(".user-highlight.active.popup").removeClass("active popup")},p=function(e){return e&&e.rangeCount>=1&&e.getRangeAt(0).getNodes().length},m=function(){o.highlightSelection("user-highlight");var e=$(".just-highlighted"),t=o.getHighlightForElement(e[0]);e.data("highlight-id",t.id),u(e),e.removeClass("just-highlighted")},g=function(e){e=e||{};var t=_();$.ajax({method:"POST",url:"/highlights",data:{page_h1:$(".highlight__component-title").text(),serialization:o.serialize(),highlights:Object.values(t)}}).done((function(){e.success&&e.success()})).fail((function(){alert("Failed to save the latest highlight! Please refresh the page and try again."),e.error&&e.error()}))},v=function(){m(),b(),t.attr("data-highlight-save","pending"),g({success:function(){t.attr("data-highlight-save","success")},error:function(){t.attr("data-highlight-save","error"),o.removeHighlights([highlight]),f()}})},_=function(){var e={};return $(".user-highlight").each((function(){var t=$(this),n=o.getHighlightForElement(this);e[n.id]=e[n.id]||{},e[n.id].rangy_highlight_id=n.id,e[n.id].text=(e[n.id].text||"")+t.text(),e[n.id].note=t.data("note"),e[n.id].character_range?e[n.id].character_range.end=e[n.id].character_range.end+n.character_range.end:e[n.id].character_range=n.character_range})),e},y=function(){var e=w();window.confirm("Are you sure you want to delete this highlight?")&&(t.attr("data-highlight-deletion","pending"),o.removeHighlights([e])),g({success:function(){t.attr("data-highlight-deletion","success")},error:function(){t.attr("data-highlight-deletion","error")}}),f()},b=function(){window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},w=function(){return C(parseInt(c.data("highlight-id")))},C=function(e){for(var t=o.highlights,n=0,i=t.length;n<i;n++)if(t[n].id===e)return t[n]},S=function(){var e=w();r.val($(e.getHighlightElements()).data("note")),s.find("blockquote").text(e.getText()),s.modal("show"),r.focus()},T=function(e){try{setTimeout((function(){T(e)}),300)}catch(t){console.log(t),console.log("c5"),T(e)}};T=function(e){var t=n.find("#registration-modal__utm-highlight");n.data("utm-content",e),m();var i=_(),s={page_h1:$("h1").text(),serialization:o.serialize(),highlights:Object.values(i)};t.val(JSON.stringify(s)),n.modal("show")};if(n.on("hide.bs.modal",(function(){var e=w();f(),o.removeHighlights([e])})),c.on("click",".new-selection .create-highlight",(function(e){return e.preventDefault(),LitCharts.isAnonUser()?(T("highlight"),!1):(v(),!1)})).on("click",".new-selection .add-note",(function(e){return e.preventDefault(),LitCharts.isAnonUser()?(T("note"),!1):(v(),S(),!1)})).on("click",".existing-highlight .edit-note",(function(e){return e.preventDefault(),S(),!1})).on("click",".existing-highlight .delete-highlight",(function(e){return e.preventDefault(),y(),!1})),s.on("click",".submit.btn",(function(){var e=parseInt(c.data("highlight-id")),t=C(e);$(t.getHighlightElements()).data("note",r.val()),g({success:function(){s.modal("hide")}})})),i.on("mouseup",(function(){var t=rangy.getSelection(),n=$(this);p(t)||n.hasClass(e.replace(/^\./,"")).length||n.parents(e).length||f()})).on("mouseup",e,(function(){var t=rangy.getSelection();if(!p(t))return!0;for(var n=t.getRangeAt(0).commonAncestorContainer;1!==n.nodeType;)n=n.parentNode;var i=$(n);(i.hasClass(e.replace(/^\./,""))||i.parents(e).length)&&d(i,t)})).on("click",".user-highlight",(function(){u($(this))})).on("mouseover",".user-highlight",(function(){var e=o.getHighlightForElement(this);$(e.getHighlightElements()).addClass("active")})).on("mouseout",".user-highlight",(function(){$(".user-highlight:not(.popup)").removeClass("active")})),LitCharts.userHighlights&&LitCharts.userHighlights.serialization){o.deserialize(LitCharts.userHighlights.serialization);var x=window.location.hash&&window.location.hash.substring(1);$(".user-highlight").removeClass("just-highlighted").each((function(){var e=o.getHighlightForElement(this),t=LitCharts.userHighlights.highlights[e.id];$(this).data({id:t.id,"highlight-id":e.id,note:t.note}),x===t.id&&$("html, body").animate({scrollTop:Math.max($(this).offset().top-140,0)})}))}})),$((function(){if(!/Edge\/|Trident\/|MSIE /.test(window.navigator.userAgent))return!1;$("img.ie-fallback[data-ie-fallback]").each((function(){$(this).attr("src",$(this).data("ie-fallback"))}))})),function(e){if(!jQuery||!$)throw"expecting jquery!";e.ads={},e.isValidUSZip=function(e){return/^\d{5}(-\d{4})?$/.test(e)},e.validateCreditCard=function(e){var t={number:"Please enter a credit card number.",code:"Please enter a security code (CVC).",expiration:"Please enter a valid expiration date.",country:"Please select a country.",zip:"Please enter a valid zip code."};return e.number&&delete t.number,e.code&&delete t.code,e.exp_month&&e.exp_year&&delete t.expiration,e.country&&delete t.country,"US"!==e.country&&delete t.zip,"US"===e.country&&e.zip&&this.isValidUSZip(e.zip)&&delete t.zip,t},e.getWindowLocationParams=function(){var e={};try{for(var t=window.location.search.substr(1).split("&"),n=(e={},0),i=t.length;n<i;n++){var o=t[n].split("=");e[o[0]]=o[1]}}catch(e){console.log("error getting params",e)}return e},e.revealUserIamaDialogAfter=function(e){window.LitCharts.revealUserIamaDialogTimeout&&clearTimeout(window.LitCharts.revealUserIamaDialogTimeout),window.LitCharts.revealUserIamaDialogTimeout=setTimeout((function(){$(".user-iama").trigger("reveal")}),e)},e.trackEvent=function(e,t,n){var i={event_type:e,event_name:t};n&&n.extraData&&(i.extra_data=n.extraData,delete n.extraData);var o=$.extend({method:"post",url:"/lc-events/track",data:i},n);return $.ajax(o)},e.isAnonUser=function(){return!$("html.signed-in").length},e.isSubscribed=function(){return!!$("html.subscribed").length}}(window.LitCharts=window.LitCharts||{}),$((function(){var e=$(".mobile-menu");if(!e.length)return!1;$(".sub-header").on("click",".menu",(function(t){t.preventDefault();var n=$("#panel > .header");return e.css({marginTop:n.outerHeight()+n.position().top}).show(),$(".distance-learning-promo").addClass("hidden"),$(".hod-promo").addClass("hidden"),!1})),e.on("click",".sub-header .close-btn",(function(t){return t.preventDefault(),e.hide(),$(".default.layout > .distance-learning-promo").removeClass("hidden"),$(".hod-promo").removeClass("hidden"),!1})).on("click",".component > .tappable",(function(){var e=$(this);e.find(".toggle").toggleClass("lc-icon-down lc-icon-up"),e.parents(".component").find(".subcomponents").slideToggle()}))})),function(e){var t={hideAll:function(){$(".modal").modal("hide"),$('[role="dialog"]:not(.modal)').hide()}};e.modal=t;var n={_locked:!1,lock:function(){if(n._locked)throw new Error("modal mutex already locked.");n._locked=!0},unlock:function(){n._locked=!1},isLocked:function(){return!!n._locked}};e.modal.mutex=n}(window.LitCharts=window.LitCharts||{}),function(e,t){e.Payment=e.Payment||{};var n=e.Payment,i=e.Validation;n.xxsBreakpoint=320,n.signupFormSelector="#signup-subscribe-form",n.errorsSelector=".payment-errors",n.fieldWithErrors='<div class="field-with-errors">',n.errorMessages={defaultHtml:'We&rsquo;re sorry but there was a problem with your payment. Please try again. Please contact <a href="/contact">LitCharts support</a> if the problem persists.'};var o=n.payAttemptPoller={pollFrequencyInMillis:1e3,maxRequests:900,requestsCount:0,errorsCount:0,incrementRequests:function(){o.requestsCount++},incrementErrors:function(){o.errorsCount++},isRequestLimitExceeded:function(){return o.requestsCount>o.maxRequests},poll:function(e,t,n){if(o.isRequestLimitExceeded())n();else{var i={url:e.url,dataType:"json"};o.incrementRequests(),$.ajax(i).done((function(e){var n="/close_registration",i=e.pay_attempt;"upgrade"==i.origin&&(n="/account"),t(i,n)})).fail((function(){var i=3;o.incrementErrors(),o.pollLater(e,t,n,i*o.pollFrequencyInMillis)}))}},pollLater:function(e,t,n,i){i=i||o.pollFrequencyInMillis,setTimeout((function(){o.poll(e,t,n)}),i)}},s=function(e){return e.hasClass("js-subscription-form")},r=function(e){return e.hasClass("js-renewal-form")};n.isUpgradeForm=function(e){return e.hasClass("js-upgrade-form")};var a=function(e,t){e.find("button").filter("[data-disable-with]").filter(":visible").removeAttr("data-disable-with"),window.location.href=t},l={};n.setupCache=function(e){var n=$();return l.form=e,s(e)&&(l.userErrors=e.find(".user-errors"),l.emailInput=e.find("input#user_email"),l.emailConfirmationInput=e.find("input#user_email_confirmation"),l.usernameInput=e.find("input#user_username"),l.passwordInput=e.find("input#user_password"),l.countryInput=e.find("#user_country_code"),l.birthdayYearInput=e.find('[name="user[birthday(1i)]"]'),l.birthdayField=l.birthdayYearInput.closest(".lc-field"),l.birthdayMonthInput=l.birthdayField.find('[name="user[birthday(2i)]"]'),l.birthdayDayInput=l.birthdayField.find('[name="user[birthday(3i)]"]'),l.roleInput=e.find("#user_i_am_a"),n=n.add(l.emailInput).add(l.emailConfirmationInput).add(l.usernameInput).add(l.passwordInput).add(l.countryInput).add(l.birthdayField).add(l.roleInput)),l.planRadios=e.find('input[type="radio"][name="subscription"]'),l.planErrorStore=e.find(".plans .errors"),n=n.add(l.planErrorStore),l.errors={errorStores:n,errorStoresWithErrors:function(){return this.errorStores.filter((function(e,t){return $(t).data("lc-errors")}))},fullMessages:function(){return $.map(this.errorStores,(function(e){var t=e.id.split("user_")[1],n=$(e).data("lc-errors");if(!$.isPlainObject(n))return{field:t,message:n}})).filter((function(e){return e.message!==t}))},isEmpty:function(){return 0==this.errorStoresWithErrors().length},renderRemainingErrors:function(){var t=this.errorStoresWithErrors(),n=t.filter((function(e,t){var n=$(t).data("lc-errors");return $.isPlainObject(n)&&n.display}));t.not(n).each((function(t,n){n.classList.contains("birthday")?['label[for="user[birthday(1i)]"]','label[for="user[birthday(2i)]"]','label[for="user[birthday(3i)]"]'].forEach((function(e){$(e).siblings(".lc-select-container").addClass("lc-select-container--error")})):(e.find("#"+n.id).addClass("error"),e.find("#"+n.id).closest(".lc-select-container").addClass("lc-select-container--error"))})),n.show()},render:function(){if(!this.isEmpty()){var t=this.fullMessages();if(t.length>0){t.forEach((function(t){var n=t.field,i=t.message[0];$control=e.find('input[id="user_'+n+'"]'),$control.attr("readonly")?($control=e.find('label[for="user['+n+']"]').siblings(".lc-select-container, .lc-select-container--md"),$control.addClass("lc-select-container--error"),$control.after("<div class='input__error-message'>"+i+"</div>")):($control.addClass("error"),$control.after("<div class='input__error-message'>"+i+"</div>"))}));var n=e.offset().top;$("html, body").animate({scrollTop:n},1e3)}this.renderRemainingErrors()}}},l},n.getChosenPlan=function(){var e=$("input[name=subscription]");return e.is(":radio")&&(e=e.filter(":checked")),e.val()};var c=/\d+\.\d+/,d=function(e){return e.find("[data-upgrade-price]").data("upgrade-price")};n.setupSubscriptionForm=function(e){n.setupCache(e),n.setupPlanChooser(e),n.setupAddressFields(e),n.setupBirthdayTooltip(e),n.setupCouponCode(e),n.setupPayMethodChoices(e),n.setupCardForm(e),n.setupPaypalButton(e)},n.setupRenewalForm=function(e){n.setupCache(e),n.setupPlanChooser(e),n.setupAddressFields(e),n.setupCouponCode(e),n.setupPayMethodChoices(e),n.setupCardForm(e),n.setupPaypalButton(e)},n.setupUpdateCardForm=function(e){n.setupAddressFields(e),n.setupCardForm(e)},n.setupUpgradeForm=function(){var e=$("form.js-upgrade-form");if(e.length>0){var t=e.find(".js-upgrade-price"),i=e.find("button").filter(".js-upgrade-button"),o=e.find("input[name=proration_date]"),s=function(){var t=d(e).prorationDate;o.val(t)},r=function(t,n,i,o){var s=o.getResponseHeader("Location");a(e,s)},l=function(e){return n.createPaymentFlow(e).process(),!1},c=function(){i.remove(),e.off("submit.upgrade-with-payment").on("submit.upgrade-with-payment",l),e.find("fieldset[data-pay-method=card]").prop("disabled",!1),e.find(".js-payment-fields").show()},u=function(t,i){c(),n.enableControls(e),n.handleError(i,e)},h=function(){return!!d(e)},f=function(){h()&&(0==i.length?c():i.show())},p=function(){s(),f()};t.on("remoteSource:arrive.upgrade",p),e.on("ajax:success.upgrade",r),e.on("ajax:error.upgrade",u),n.setupAddressFields(e),n.setupPayMethodChoices(e),n.setupCardForm(e),f(),n.setupPaypalButton(e)}},n.setupPlanChooser=function(e){var t=e.find("#plan-chooser").find('input[type="radio"][name="subscription"]'),n=e.find(".selected-plan"),i=n.find(".plan"),o=e.find(".coupon-disclaimer");t.on("change",(function(t){var s=$(t.target),r=s.data("name"),a=s.val();i.text(r),n.show(),e.find("#subscription").filter(":input").val(a),o.children().hide().filter("."+a).show()}))},n.setupAddressFields=function(e){e.find(".js-country").on("change",(function(){e.find(".js-zip-code").parents(".form-group").toggle("US"===$(this).val())})).trigger("change")},n.setupBirthdayTooltip=function(e){e.on("click",".birthday-tooltip",(function(e){return e.preventDefault(),$(this).find(".explanation").slideToggle(),!1}))},n.resetErrorsDisplay=function(e){e&&0!=e.length||(e=h()),e.find(".field-with-errors").contents().unwrap(),e.find(".user-errors").empty(),f(e).empty().hide(),e.find(".plans .errors").hide(),e.find(".lc-select-container--error").removeClass("lc-select-container--error"),e.find("input.error").removeClass("error"),e.find(".input__error-message").remove()},n.nonAjaxValidate=function(e){var t=s(e),n=$(".signup-subscribe-form--checkout-variant").length>0;t&&(l.emailInput.length>0&&i.validateEmail(l.emailInput,l.emailConfirmationInput),l.passwordInput.length>0&&i.validatePassword(l.passwordInput),i.validateCountry(l.countryInput,l.form.find('[name="user[country_code]"]').val()),n||(i.validateUsername(l.usernameInput),i.validateRole(l.roleInput,l.form.find('[name="user[i_am_a]"]').val()),i.validateDate(l.birthdayYearInput,l.birthdayMonthInput,l.birthdayDayInput,l.birthdayField)));return l.planRadios.length>0&&i.validatePlan(l.planRadios,l.planErrorStore),l.errors},n.passesNonAjaxValidation=function(e){return n.nonAjaxValidate(e).isEmpty()},n.renderAnyNonAjaxValidationErrors=function(e){var t=n.nonAjaxValidate(e);n.resetErrorsDisplay(e),t.render()},n.showFormAndExternalControls=function(e){e.show(),$(n.externalDisabledControlsSelector(e)).show()},n.enableControls=function(e){if(n.isUpgradeForm(e))$.rails.enableFormElements(e);else{var t=n.disabledControlsSelector(e);e.find(t).prop("disabled",!1);var i=n.externalDisabledControlsSelector(e);$(i).prop("disabled",!1)}e.data("lc-payment-flow-in-progress",!1)},n.disableControls=function(e){if(n.isUpgradeForm(e))$.rails.disableFormElements(e);else{var t=n.disabledControlsSelector(e);e.find(t).prop("disabled",!0);var i=n.externalDisabledControlsSelector(e);$(i).prop("disabled",!0)}},n.disabledControlsSelector=function(e){if(s(e))return"button[data-disable-on-submit], fieldset[data-disable-on-submit]";if(r(e))return"button[data-disable-on-submit], fieldset[data-disable-on-submit], :text";throw new Error("Given payment form not supported")},n.externalDisabledControlsSelector=function(e){if(!s(e)){if(r(e))return'button[form="'+(e.attr("id")||"")+'"]';throw new Error("Given payment form not supported")}},n.handleError=function(e,t){var i,o=e.responseJSON;i=jQuery.isEmptyObject(o)||jQuery.isEmptyObject(o.errorMessage)?n.errorMessages.defaultHtml:o.errorMessage,n.renderError(i,t),n.scrollToError(t)},n.renderError=function(e,t){f(t).show().html("<ul><li>"+e+"</li></ul>")},n.scrollToError=function(e){n.scrollToElement(f(e))},n.scrollToElement=function(e){e&&e.length&&$("html, body").animate({scrollTop:e.offset().top},1e3)},n.buildCreditCard=function(e){var t=e.find('[data-stripe="number"]').val(),n=e.find('[data-stripe="exp_month"]').val(),i=e.find('[data-stripe="exp_year"]').val();return{number:t,code:e.find('[data-stripe="cvc"]').val(),exp_month:n,exp_year:i,country:e.find('[data-stripe="address_country"]').val(),zip:e.find('[data-stripe="address_zip"]').val()}},n.buildStripeData=function(e){var t={number:e.number,exp_month:e.exp_month,exp_year:e.exp_year,cvc:e.code,address_country:e.country};return"US"===t.address_country&&(t.address_zip=e.zip),t};var u=function(e){e.find("input[name=stripe_token]").remove(),e.find("input[name=paypal_token]").remove()};n.addStripeTokenToForm=function(t,i){if(u(i),!t||!t.id){var o="We\u2019re sorry but there was a problem with your payment. Please try again. Please contact <a href='/contact'>LitCharts support</a> if the problem persists.";throw n.renderError(o),n.scrollToError(),e.trackEvent("payment error","missing stripe token id"),new Error("Stripe token ID is null")}i.append($('<input type="hidden" name="stripe_token">').val(t.id))};var h=function(){var e=$(n.signupFormSelector);if(e.length<1)throw new Error("Payment form could not be found");return e},f=function(e){return e?e.find(n.errorsSelector):$(n.errorsSelector).first()};n.addPaypalTokenToForm=function(e,t){u(t),t.append($('<input type="hidden" name="paypal_token">').val(e))},n.buildStripeResponseHandler=function(t){return function(i){i.error?(n.renderError(i.error.message,t),n.scrollToError(t),n.enableControls(t),e.trackEvent("stripe error",i.error.message)):(n.addStripeTokenToForm(i.token,t),$.rails.isRemote(t)?$.rails.handleRemote(t):t.get(0).submit())}},n.ajaxOptionsForFormSubmission=function(e){return{method:e.attr("method"),url:e.attr("action"),data:e.serialize()+"&format=json",dataType:"json"}},n.setupPayMethodChoices=function(e){var t=e.find("[data-pay-method]"),n=e.find("[data-pay-method-target]"),i=n.filter("a"),o=n.filter("input[type=radio]"),s=e.find("[data-pay-method-picker]"),r=function(e,i){var o=t.filter("[data-pay-method='"+e+"']"),s=t.not(o),r=n.filter("[data-pay-method-target='"+e+"']"),a=n.not(r),l=r.not("input[type=radio]"),c=a.not("input[type=radio]"),d=i?0:400,u=function(){return t.finish()},h=function(){return s.slideUp(d)},f=function(){return l.hide()},p=function(){return c.show()},m=function(){return o.slideDown(d)};$.when(u()).then(h).then(f).then(p).then(m)},a=function(e){var t=$(e.currentTarget).data("pay-method-target");r(t)};i.on("click",a),o.on("change",a),s.show()};var p=function(){return!!window.Stripe};n.setupCardForm=function(t){if(p()){n.stripeElements=e.stripe.elements({fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Nunito+Sans"}]});var i=n.stripeElements.create("card",{style:{base:{fontSize:"16px",fontFamily:'"Nunito Sans", sans-serif',color:"#181919"}}});if(t.data("stripeCard",i),i.on){var o=function(){t.addClass("lc-stripe-card-inputs-ready")};i.on("ready",o)}window.addEventListener("resize",(function(){n.updateStripeElementIcon(i)})),n.updateStripeElementIcon(i);var s=t.find(".card-element")[0];i.mount(s)}},n.updateStripeElementIcon=function(e){var t=$(window).width()<=n.xxsBreakpoint;e.update&&e.update({hideIcon:t})},n.setupCouponCode=function(t){var i=$("#coupon-code-modal");if(!i.length)return!1;var o=i.find("form");o.find(".error, .success").hide(),i.on("shown.bs.modal",(function(){i.find(".code").focus()})),i.on("hidden.bs.modal",(function(){o.find(".error").hide(),o.find(".btn").prop("disabled",!1),o.find(".code").prop("readonly",!1).val(""),o.find(".success").hide()})),i.on("submit","form",(function(e){e.preventDefault(),o.find(".error").hide(),o.find(".btn").prop("disabled",!0),o.find(".code").prop("readonly",!0);var s=o.find(".code").val();return n.validateCoupon(s).done((function(e){if(!e.valid)return o.find(".error").show().text("Looks like that coupon code is invalid or expired. Please try again."),o.find(".btn").prop("disabled",!1),o.find(".code").prop("readonly",!1),!1;o.find(".success").show(),n.applyDiscount(t,s),setTimeout((function(){i.modal("hide"),$("html, body").animate({scrollTop:$("h3.choose-your-plan").offset().top})}),500)})).fail((function(e){o.find(".error").show().text("Oh no! There was an error validating the coupon code. Sorry about that. Please refresh the page and contact us if you see this message again."),console.log(e)})),!1}));var s=e.getWindowLocationParams();s.coupon_code&&n.validateCoupon(s.coupon_code).done((function(e){e.valid&&n.applyDiscount(t,s.coupon_code)})).fail((function(e){console.log("error validating coupon code!",e)}))},n.validateCoupon=function(e){var t=$("#validate-coupon-form");return $.ajax({url:t.attr("action"),method:t.attr("method"),data:{coupon_code:e}})},n.validatePlan=function(e){
var t=!0,n=e.find('input[type="radio"][name="subscription"]');n.length>0&&(n.filter(":checked").length||(e.find(".plans .errors").show(),t=!1));return t},n.applyDiscount=function(e,t){var n=e.find(".selected-subscription-type");n.find(".promo .emphasis").show(),n.find(".price").addClass("discounted"),n.find(".discounted-price").show(),n.find(".coupon-code .ask").hide(),n.find(".coupon-code .applied").show(),e.find('input[name="coupon_code"]').val(t),e.find(".disclaimer").hide(),e.find(".coupon-disclaimer").show();var i=e.find(".annual-monthly-savings"),o=i.data("discounted-savings");o&&i.text(o),annualPrice=$(".plans .annual .discounted-price").text().match(c)[0],monthlyPrice=$(".plans .monthly .discounted-price").text().match(c)[0]};var m={setup:function(){$('<div style="position:fixed; top: 0; left: 0; width: 100%; background-color: white;"><pre id="log-output" style="max-height: 70px; font-size: 10px; line-height: 12px;"></pre></div>').appendTo("body"),this.logOutput=$("#log-output")},info:function(e){console.log(e),this.logOutput.prepend(e+"\n")},hide:function(){this.logOutput.parent().hide()},show:function(){this.logOutput.parent().show()}};m.setup(),m.hide();var g,v=function(e){var t={form:e,begin:function(){n.disableControls(t.form),n.resetErrorsDisplay(t.form)},validatePlan:function(){return n.validatePlan(t.form)},validateTerms:function(){var e=t.form.find('fieldset[data-pay-method]:visible [name="terms_checkbox"]'),n=!e.length||e.is(":checked");return e.parents(".optin-checkbox").toggleClass("error",!n),n},validate:function(){return!0},invalidate:function(e){e=e||{},n.scrollToElement(e.scrollTo),n.enableControls(t.form)},isUpgrade:function(){return n.isUpgradeForm(t.form)},isInProgress:function(){return!!t.form.data("lc-payment-flow-in-progress")},setInProgress:function(e){t.form.data("lc-payment-flow-in-progress",e)},process:function(){t.isInProgress()||(t.setInProgress(!0),t.isUpgrade()?n.processUpgradePaymentFlow(t):n.processPaymentFlow(t))}};return t};n.createPaypalFlow=function(t,i,o){var s=v(t);return s.resolve=i,s.reject=o,s.originalInvalidate=s.invalidate,s.invalidate=function(e){s.originalInvalidate(e),s.reject(new Error("Validation failed, please review any errors."))},s.takePayment=function(){var t={type:"POST",url:"/paypal/billing_agreements",dataType:"json"};if(s.isUpgrade()){var i=s.form.find("input[name=proration_date], input[name=plan_id]").serialize();t.data=i}else t.data={subscription:n.getChosenPlan()};var o=function(e){s.resolve(e.token)},r=function(t,i,o){s.reject(o),n.enableControls(s.form),n.handleError(t),e.trackEvent("payment error","paypal onBillingAgreementCreateFailed",{extraData:{responseJSON:t.responseJSON,textStatus:i,errorThrown:o}})};$.ajax(t).done(o).fail(r)},s},n.setPaypalOptions=function(e){g=e},n.setupPaypalButton=function(t){if(!($.isEmptyObject(g)||$.isEmptyObject(window.paypal))){var i=!n.isUpgradeForm(t),s=g.container,r=g.environment,l=function(){n.enableControls(t),$("html").removeClass("paypal-authorized")};"live"==r&&(r="production");var c={size:"responsive",color:"gold",shape:"rect",label:"pay",tagline:!1,height:44,layout:"horizontal"};$(".signup-subscribe-form--checkout-variant").length&&(c.height=55),paypal.Button.render({env:r,style:c,validate:function(e){if(i){var o=function(){n.passesNonAjaxValidation(t)?e.enable():e.disable()};o();var s="change.non-ajax-validations",r="#"+t.attr("id");$(document).off(s,r).on(s,r,o)}$("html").addClass("paypal-js-loaded")},onClick:function(){i&&n.renderAnyNonAjaxValidationErrors(t)},payment:function(e,i){n.createPaypalFlow(t,e,i).process()},onAuthorize:function(i){$("html").addClass("paypal-authorized");var s=function(){l(),n.renderError(n.errorMessages.defaultHtml,t),n.scrollToError(t)},r=function(e,n){"succeeded"!=e.state?"failed"!=e.state?"pending"!=e.state?alert("Unexpected pay attempt state: "+e.state):o.pollLater(e,r,s):s():"upgrade"==e.origin?a(t,n):window.location.href=n},c=function(e,t,n){var i=n.getResponseHeader("Location"),o=e&&e.pay_attempt;o?r(o,i):window.location.href=i},d=function(t,i,o){l(),n.handleError(t),e.trackEvent("payment error","paypal onSubscribeFailed",{extraData:{responseJSON:t.responseJSON,textStatus:i,errorThrown:o}})};n.addPaypalTokenToForm(i.paymentToken,t);var u=n.ajaxOptionsForFormSubmission(t);$.ajax(u).done(c).fail(d)},onCancel:function(){l()},onError:function(){l()}},s)}};var _={creditCard:function(t){var i=v(t);return i.takePayment=function(){e.stripe.createToken(i.form.data("stripeCard")).then(n.buildStripeResponseHandler(i.form))},i}};n.createPaymentFlow=function(e){var t="creditCard",n=y(e);return _[t](n)};var y=function(e){var t=$(e.currentTarget);return t.is("form")?t:t.is("button")?t.closest("form"):$(n.signupFormSelector)};n.processUpgradePaymentFlow=function(e){if(e.begin(),!e.validate())return e.invalidate(),!1;e.takePayment()}}(window.LitCharts=window.LitCharts||{}),$((function(){if(!$(".pdf-download-page").length)return!1;var e=$("#download");$("#share");e.on("click",".download.btn",(function(){$(".flash").hide(),$("html, body").animate({scrollTop:0}),e.addClass("download-success"),e.find(".pre-download").hide(),e.find(".post-download").fadeIn()}))})),$((function(){var e=$("#quote-slider");if(!e.length)return!1;var t=e.find(".quote");e.on("mousedown",".gripper",(function(){e.data("gripper-down",!0)})),$(window).on("mousemove",(function(n){if(!e.data("gripper-down"))return!0;var i=t.offset(),o=t.width(),s=n.pageX-i.left;s<18?s=18:s>o-20&&(s=o-20),n.preventDefault(),e.find(".blurred-container").css({left:s}),e.find(".blurred-content").css({"margin-left":-s-4}),e.find(".gripper").css({left:s})})).on("mouseup",(function(){e.data("gripper-down",!1)})),e.find('[data-toggle="popover"]').removeAttr("data-toggle").popover("destroy"),e.find("a").attr("href","#").on("click",(function(e){return e.preventDefault(),!1}));var n='<i class="fa fa-quote-left quote-icon"></i>',i=e.find(".quote .text"),o=i.find("p.quote-text");o.length?o.first().prepend(n):i.prepend(n),t.is(":visible")&&$(".subscribe-today-and-get.panel").outerHeight(e.height())})),$((function(){var e=$("#request-content-registration-modal .registration-modal"),t=$("#create-highlight-registration-modal .registration-modal"),n=$("#bookmark-registration-modal .registration-modal"),i=$("#quiz-free-tier .registration-modal"),o=$("#sell-plan-free-card .registration-modal");i.length>0&&LitCharts.CreateRegistrationModal.bind(i),o.length>0&&LitCharts.CreateRegistrationModal.bind(o),e.length>0&&LitCharts.CreateRegistrationModal.bind(e),t.length>0&&LitCharts.CreateRegistrationModal.bind(t),n.length>0&&LitCharts.CreateRegistrationModal.bind(n)})),function(e){function t(e,t){this.modal=e,this.form=t,this.countryFormGroup=t.find(".registration-modal__country_code").closest(".modal__form-group"),this.isSubmitting=!1}e.CreateRegistrationModal=e.CreateRegistrationModal||{},e.CreateRegistrationModal.bind=function(e){var n=new t(e,e.find("form"));n.modal.on("oauthRegistrationInProgress",n.onNextStep.bind(n)),n.modal.find('[name="user[country_code]"]').on("change",n.onCountrySelectChange.bind(n)),n.form.on("submit",n.onFormSubmit.bind(n)),n.modal.on("hidden.bs.modal",n.resetForm.bind(n))},t.prototype.moveCountryToStepTwo=function(){if(2!==this.countryFormGroup.data("currentStep")){var e=$("<div style='display: none;'><!-- placeholder for country --></div>");this.countryFormGroup.after(e),this.modal.find(".registration-modal__step-2").find(".modal__form-group").first().before(this.countryFormGroup.detach()),this.countryFormGroup.data({previousPlaceholder:e,currentStep:2})}},t.prototype.resetCountry=function(){2===this.countryFormGroup.data("currentStep")&&(this.countryFormGroup.data("previousPlaceholder").before(this.countryFormGroup.detach()).remove(),this.countryFormGroup.removeData(["previousPlaceholder","currentStep"]))},t.prototype.ignoreFields=function(e){var t=e.closest(".modal__form-group");e.attr("data-ignored-field",!0),e.prop("disabled",!0),t.hide()},t.prototype.unignoreFields=function(){var e=this.form.find("[data-ignored-field]"),t=e.closest(".modal__form-group");e.prop("disabled",!1).removeAttr("data-ignored-field"),t.show()},t.prototype.onNextStep=function(e){function t(){n.moveCountryToStepTwo();var e=$(".registration-modal__email, .registration-modal__email-confirmation, .registration-modal__password, .registration-modal__username");n.ignoreFields(e)}e.preventDefault();var n=this;$.when(this.validateStepOne(e)).then((function(){var i=n.modal.find(".registration-modal__step-1"),o=n.modal.find(".registration-modal__step-2"),s="true"==$("#from_gdpr_country").val(),r="true"==$("#ip_address_recognized").val();i.hide(),o.fadeIn(),"oauthRegistrationInProgress"===e.type&&(t(),!s&&r&&$(".registration-modal__birthday").hide())}))},t.prototype.onCountrySelectChange=function(e,t){var n=!!t.conforms_to_gdpr,i=n,o=!n;this.modal.find(".registration-modal__marketing-opt-in").toggleClass("hidden",!i),this.modal.find("#email-marketing-optin-hidden").toggleClass("hidden",i),this.modal.find('.registration-modal__marketing-opt-in input[type="checkbox"]').prop("checked",o)},t.prototype.resetForm=function(){this.unignoreFields(),this.resetCountry(),this.modal.find(".registration-modal__step-1").show(),this.modal.find(".registration-modal__step-2").hide(),this.modal.find('input[type="checkbox"]').prop("checked",!1),this.form.find("button[type=submit]").prop("disabled",!1),this.resetErrors(),this.modal.find("form input").not('[name="authenticity_token"]').val(null)},t.prototype.onFormSubmit=function(e){if(this.modal.find(".registration-modal__step-1").is(":visible"))this.onNextStep(e);else if(e.preventDefault(),!this.isSubmitting){this.isSubmitting=!0;var t=this.form.find("button[type=submit]");t.prop("disabled",!0);var n=this;$.when(this.validateStepTwo()).then((function(){n.form.find(".registration-modal__email-confirmation").val(n.form.find(".registration-modal__email").val()),$.ajax({data:n.form.serialize(),dataType:"json",method:"POST",url:n.form.attr("action"),success:function(e,t,n){window.location.href=n.getResponseHeader("Location")},error:function(e){n.resetErrors(),n.handleErrors(e.responseJSON.errors),n.isSubmitting=!1,t.prop("disabled",!1)}})}),(function(){n.isSubmitting=!1,t.prop("disabled",!1)}))}},t.prototype.handleErrors=function(e,t){if(!Array.isArray(e)){var n=e;e=[],Object.entries(n).forEach((function(t){e.push({field:t[0],message:t[1]})}))}this.form.find('input[name="user[terms_checkbox]"]').prop("checked")||e.push({field:"terms",message:["You must accept our Terms of Service."]});var i=this.modal.find(".registration-modal__step-1, .registration-modal__step-2").filter(":visible");if((e=e.filter((function(e){return"base"===e.field||i.find(".registration-modal__"+e.field).is(":visible")}))).length>0){var o=i.find(".modal__errors");o.show();var s=this,r=e.map((function(e){return s.form.find(".registration-modal__"+e.field).addClass("error"),s.form.find(".registration-modal__"+e.field).addClass("lc-select-container--error"),"birthday"===e.field&&$(".registration-modal__birthday input").addClass("error"),"<li>"+e.message[0]+"</li>"})).join("");o.html("<ul>"+r+"</ul>"),t&&t.reject()}else t&&t.resolve()},t.prototype.validateStepOne=function(e){this.resetErrors();var t=this,n=$.Deferred();return"oauthRegistrationInProgress"===e.type?n.resolve():($.ajax({method:"post",url:t.form.data("validate-path"),data:t.form.serialize()}).done((function(e,i,o){var s=o.getResponseHeader("Location");if(s)return window.location.href=s,n.reject();t.handleErrors(e.fullErrors,n)})),n.promise())},t.prototype.validateStepTwo=function(){this.resetErrors();var e=this,t=$.Deferred();return $.ajax({method:"post",url:e.form.data("validate-path"),data:e.form.serialize()}).done((function(n,i,o){var s=o.getResponseHeader("Location");if(s)return window.location.href=s,t.reject();e.handleErrors(n.fullErrors,t)})),t.promise()},t.prototype.resetErrors=function(){$(document).trigger({type:"AppBanner:clear"});var e=this.modal.find(".modal__errors");e.html(""),e.hide(),this.modal.find(".error").removeClass("error"),this.modal.find(".lc-select-container--error").removeClass("lc-select-container--error")}}(window.LitCharts=window.LitCharts||{}),$((function(){function e(){return $(".registration-modal:visible").length>0||$(".free-tier-confirmation-modal:visible").length>0||$("#free-tier-welcome-modal:visible").length>0}function t(){return $("#onetrust-banner-sdk:visible").length>0}function n(){return LitCharts.modal.mutex.isLocked()||e()||t()}var i=$("#signup-promo-modal"),o=12e4,s="/"==window.location.pathname?3e4:15e3;if(!i.length)return!1;i.on("hide.bs.modal",(function(){i.attr("data-dismissed",!0),$.ajax({url:i.data("on-close-path"),method:"post"}).always((function(){LitCharts.revealUserIamaDialogAfter(o)}))})),i.on("click",".signup-btn",(function(e){e.preventDefault();var t=$(this);return $.ajax({url:i.data("on-close-path"),method:"post",data:{signup_btn:!0},async:!1}).always((function(){LitCharts.revealUserIamaDialogAfter(o),window.location=t.attr("href")})),!1})),setTimeout((function(){n()||i.modal("show")}),s)})),$((function(){var e=$(".js-subscription-form");if(!e.length)return!1;var t=e.find(".errors:visible").first((function(){return $(this).text().length}));t.length&&$("html, body").animate({scrollTop:t.offset().top},1e3);var n=LitCharts.Payment;n.setupSubscriptionForm(e),n.processPaymentFlow=function(e){var t=e.form;e.begin();var n=null;$.ajax({method:"post",url:t.data("validate-path"),data:t.serialize()}).done((function(i,o,s){var r=s.getResponseHeader("Location");if(r)window.location.href=r;else{t.find(".user-errors").html(i.errorMessageHtml);for(var a=0,l=i.fullErrors.length;a<l;a++){var c=i.fullErrors[a].field,d=i.fullErrors[a].message[0],u=t.find('input[id="user_'+c+'"]');u.attr("readonly")?((u=t.find('label[for="user['+c+']"]').siblings(".lc-select-container, .lc-select-container--md")).addClass("lc-select-container--error"),u.after("<div class='input__error-message'>"+d+"</div>")):(u.addClass("error"),u.after("<div class='input__error-message'>"+d+"</div>"))}if(i.errors.length&&(n=n||t.find(".user-errors"),$("html, body").animate({scrollTop:t.offset().top},1e3)),e.validatePlan()||(n=n||t.find(".plans .errors")),e.validate()||(n=n||t.find(".payment-errors")),e.validateTerms()||(n=n||t.find('fieldset[data-pay-method]:visible [name="terms_checkbox"]')),n)return e.invalidate({scrollTo:n}),!1;e.takePayment()}}))};var i=function(e){return n.createPaymentFlow(e).process(),!1};e.submit(i)})),$((function(){var e=992;$(window).on("resize",(function(){$(".stretch-left-promo").trigger("reposition")})),$("body").on("reposition",".stretch-left-promo",(function(){var t=$(this),n=t.find(".stretcher"),i=t.offset(),o=t.parents(".container").offset();$(window).width()>=e?n.css({left:-i.left,paddingLeft:o.left,right:0}).fadeIn():n.css({left:-i.left,paddingLeft:"",right:-i.left}).fadeIn(),t.css({height:n.outerHeight(!0)})})),$(".stretch-left-promo").trigger("reposition")})),$((function(){function e(e){var t=$(".book-component.layout > .book-nav"),n=($(".book-component.layout > .book-header"),$("#sticky-mobile-header-promo")),i=(t.offset()||{}).top,o=$(window).scrollTop(),s=$("#"+e).offset().top-t.outerHeight();o<i&&!t.hasClass("fixed")&&(s-=t.outerHeight()),n.length&&(s-=n.outerHeight()),$("html, body").animate({scrollTop:s},200)}var t=$(".summary-section-quotes");t.on("click",".summary-section .header",(function(){var e=$(this),t=e.parents(".summary-section");e.find(".toggle").toggleClass("lc-icon-down lc-icon-up");var n=t.hasClass("closed");n&&t.removeClass("closed"),t.find(".quotes").slideToggle((function(){n||t.addClass("closed")}))}));var n='<i class="lc-icon lc-icon-quote-filled lc-icon-lg quote-icon"></i>';t.find(".quote .text").each((function(){var e=$(this),t=e.find("p.quote-text");t.length?t.first().prepend(n):e.prepend(n)})),t.find(".blurred-text").attr("unselectable","on").css("user-select","none").on("selectstart",!1).on("selectstart",!1).on("contextmenu",!1).on("keydown",!1).on("mousedown",!1),$(".attrs.anonymous").length&&($(window).on("mouseup keyup selectionchange",(function(){var e=rangy.getSelection();$(e.anchorNode).parents(".quote").find(".text").get(0)===$(e.focusNode).parents(".quote").find(".text").get(0)||e.anchorNode===e.focusNode||e.removeAllRanges()})),$(document).on("keydown",(function(e){if((e.ctrlKey||e.metaKey)&&65===e.keyCode)return!1})));var i=window.location.search.slice(1).split("&").find((function(e){return e.startsWith("id")}));if(i){var o=(i=i.split("="))[1];setTimeout((function(){e(o)}),500)}})),$((function(){$(".summary-section-timeline").on("click",".summary-section .header",(function(){var e=$(this),t=e.parents(".summary-section");e.find(".toggle").toggleClass("lc-icon-down lc-icon-right"),t.toggleClass("closed");var n=t.find(".summaries");t.hasClass("closed")?n.find(".summary").animate({opacity:0},(function(){n.slideUp()})):n.slideDown((function(){n.find(".summary").animate({opacity:1})}))}))})),$((function(){"undefined"==typeof SVGRect&&$(".inline-svg-fallbackable").each((function(){var e=$(this),t=e.data("fallback"),n=e.attr("class").replace(/\s+inline-svg-fallbackable\s+/g," ");e.replaceWith('<img src="'+t+'" class="'+n+'" />')}))})),$((function(){var e=!1,t=992;$(window).on("resize",(function(){$(window).width()>=t&&!e?($('.theme[data-toggle="popover"]').popover(),$('.quote-popover[data-toggle="popover"]').popover()):$(window).width()<t&&e&&($('.theme[data-toggle="popover"]').popover("destroy"),$('.quote-popover[data-toggle="popover"]').popover("destroy"))})).trigger("resize")})),function(e){function t(){n(),c.data("canceled")&&window.location.reload()}function n(){a(),o(!0),d.find('input[type="radio"]').prop("checked",!1),d.find(".step-1").show(),d.find(".step-confirmed").hide(),d.find(".cancellation-description").removeClass("selected")}function i(e){if(e.preventDefault(),o(!1),!c.data("cancelled")){var t=c.find('input[type="radio"]:checked'),n=r(t);if(a(),n){var i=c.serialize();$.ajax({type:"POST",url:"/account/cancel",data:i}).done((function(e){if(e.canceled)c.data("canceled",!0),d.find(".unsubscribe-modal__confirmation-number").html(e.confirmation),$(".step-1").hide(),$(".step-confirmed").show();else{var t=e.errors;t=t.map((function(e){return"<li>"+e+"</li>"})).join(""),d.find(".cancellation-form-errors").html("<ul>"+t+"</ul>").show(),o(!0)}})).fail((function(e){if(e&&422===e.status){var t="You are already unsubscribed. Please refresh the account page to see your updated status.";d.find(".cancellation-form-errors").html(t).show()}else{t="There was an error processing your request. Please try again, and refresh the page if the issue persists.";d.find(".cancellation-form-errors").html(t).show()}o(!0)}))}else o(!0),s(t)}}function o(e){d.find(".unsubscribe-modal__submit").attr("disabled",!e)}function s(e){e.length>0?$("#"+e.data("error-id")).show():$(".blank-selection-error").show()}function r(e){return 0!==e.length&&(!e.data("needs-validation")||!!$("#"+e.data("textarea-id")).val())}function a(){d.find(".error").hide(),d.find(".cancellation-form-errors").html("")}function l(){a();var e=$(this);$(".cancellation-description").removeClass("selected"),e.closest(".cancellation-reason").find(".cancellation-description").addClass("selected")}var c,d;e.UserCancellation=e.UserCancellation||{},e.UserCancellation.bindToModal=function(e){(d=e).find('input[type="radio"]').on("change",l),d.find(".unsubscribe-modal__submit").on("click",i),d.on("hidden.bs.modal",t),c=d.find("form")}}(window.LitCharts=window.LitCharts||{}),function(e){var t=e=$.extend(e,{section_ring_radius:20,stroke_width:1,stroke_color:"#fff",default_opacity:.6,mouseover_opacity:1,blank_theme_color:"#d6d6d6",summary_locked:!1,center_title_id:"chartboard-center-title",min_width:768,visualization_g_id:"chartboard-g",center_locator_id:"chartboard-center",center_adjustment_for_actual_height:0,touchstartedAt:null,tapTimeLimit:300});t.mobile={visualization_table_id:"chartboard-mobile-visualization-table"},t.theme_colors=["#0e7983","#4b8cdc","#dc5f5f","#0cc2e6","#269e79","#fdb14e"],t.header_and_visualization_wrapper_selector="#chartboard",t.loading_selector="#chartboard-loading",t.visualization_selector="#chartboard-visualization",t.theme_container_selector="#chartboard-theme-container",t.theme_container_themes_selector="#chartboard-theme-container-themes",t.info_box_selector="#chartboard-info-box",t.info_box_content_selector="#chartboard-info-box .content",t.clear_info_box_selector="#chartboard-info-box .clear",t.header_selector="#chartboard-header",t.mobile_theme_toggle_selector="#chartboard-mobile-theme-toggle",t.mobile_chapter_header_selector="#chartboard-mobile-chapter-header",t.intro_selector="#chartboard-intro",t.mobile_intro_selector="#chartboard-mobile-intro",t.$header_and_visualization_wrapper=$(t.header_and_visualization_wrapper_selector),t.$loading=$(t.loading_selector),t.$visualization=$(t.visualization_selector),t.$theme_container=$(t.theme_container_selector),t.$theme_container_themes=$(t.theme_container_themes_selector),t.$info_box=$(t.info_box_selector),t.$info_box_content=$(t.info_box_content_selector),t.$clear_info_box=$(t.clear_info_box_selector),t.$header=$(t.header_selector),t.$mobile_theme_toggle=$(t.mobile_theme_toggle_selector),t.$mobile_chapter_header=$(t.mobile_chapter_header_selector),t.$intro=$(t.intro_selector),t.$mobile_intro=$(t.mobile_intro_selector),t.$themesAndColorsKey=$(".themes-and-colors.key"),t.default_info_box_content=t.$info_box_content.html(),t.book_title=t.$visualization.data("book-title"),t.now=function(){return(new Date).getTime()},t.getMaxSummaryCount=function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n].summaries.length);return Math.max.apply(null,t)},t.getWedgePaddingVal=function(e){return e.length<=1?0:.25},t.getWedgeElementVal=function(){return 1},t.getCenterDiameter=function(e){var n=e.length,i=980;return 1==n&&(i=50),n>=2&&n<=5&&(i=80),n>=6&&n<=10&&(i=140),n>=11&&n<=20&&(i=230),n>=21&&n<=30&&(i=320),n>=31&&n<=40&&(i=440),n>=41&&n<=50&&(i=480),n>=51&&n<=60&&(i=520),n>=61&&n<=70&&(i=600),n>=71&&n<=80&&(i=700),n>=81&&n<=90&&(i=760),n>=91&&n<=100&&(i=820),n>=101&&n<=110&&(i=860),n>=111&&n<=120&&(i=900),n>=121&&n<=130&&(i=950),i*(t.width/1100)},t.generateDataset=function(){for(var e={0:[],1:[]},n=0;n<t.summary_section_count;n++)e[1].push(t.wedge_padding_value),e[1].push(t.wedge_element_value*t.theme_count),e[1].push(t.wedge_padding_value);var i=[];i.push(t.wedge_padding_value);for(n=0;n<t.theme_count;n++)i.push(t.wedge_element_value);i.push(t.wedge_padding_value);var o=[];for(n=0;n<t.summary_section_count;n++)Array.prototype.push.apply(o,i);for(n=2;n<t.max_summary_count+2;n++)e[n]=o;return e},t.getSummarySectionHash=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e[n].id]=e[n];return t},t.getSummaries=function(e){for(var t=[],n=0,i=e.length;n<i;n++)Array.prototype.push.apply(t,e[n].summaries);return t},t.getSummaryHash=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e[n].id]=e[n];return t},t.parseJSON=function(e,n){t.summary_sections=n.summary_sections,t.summary_section_count=t.summary_sections.length,t.summary_section_hash=t.getSummarySectionHash(t.summary_sections),t.summaries=t.getSummaries(t.summary_sections),t.summary_hash=t.getSummaryHash(t.summaries),t.themes=n.themes,t.theme_count=Object.keys(t.themes).length,t.max_summary_count=t.getMaxSummaryCount(t.summary_sections),t.wedge_padding_value=t.getWedgePaddingVal(t.summary_sections),t.wedge_element_value=t.getWedgeElementVal(t.summary_sections),t.dataset=t.generateDataset()},t.getHeightWidth=function(){return t.$visualization.width()},t.getRadius=function(e,n){return Math.floor((Math.min(e,n)/2-t.center_radius-t.section_ring_radius)/t.max_summary_count)},t.getVisualizationGTransfrom=function(){return"translate("+t.width/2+","+(t.height/2-t.center_adjustment_for_actual_height)+")"},t.render=function(){t.$visualization.empty(),t.isMobile()?t.renderMobile():t.renderDesktop()},t.mobile.defaultSummaryThemesHTML=function(){for(var e="",n=0;n<t.theme_count;n++)e=e+'<div class="theme theme-'+t.themes[n].id+'"></div>';return e},t.renderMobile=function(){t.addMobileClasses();var e=$("<table>").appendTo(t.$visualization);e.attr("id",t.mobile.visualization_table_id);for(var n,i,o,s,r=t.mobile.defaultSummaryThemesHTML(),a=0;a<t.summary_section_count;a++){i=(n=t.summary_sections[a].summaries).length,(o=$("<tr>").appendTo(e)).addClass("summary-section-"+t.summary_sections[a].id),(s=$("<td>").addClass("summary-section-title").appendTo(o)).text(t.summarySectionRedRingHeading(t.summary_sections[a])),s=$("<td>").addClass("summary-container").appendTo(o);for(var l=0;l<i;l++)(c=$("<div>").appendTo(s)).addClass("summary summary-"+n[l].id),c.data({id:n[l].id,theme_tracker_code:n[l].theme_tracker_code}),c.append(r);e.append('<tr class="padding"></tbody>')}for(var c,d,u,h=e.find(".summary"),f=(a=0,h.length);a<f;a++){d=(c=h.eq(a)).find(".theme");l=0;for(var p=(u=c.data("theme_tracker_code")).length;l<p;l++)"1"===u[l]&&d.eq(l).css("background",t.theme_colors[l])}t.$visualization.find(".theme").css("opacity",t.default_opacity)},t.renderDesktop=function(){t.removeMobileClasses(),t.width=t.height=t.getHeightWidth(),t.center_adjustment_for_actual_height=0,t.center_radius=t.getCenterDiameter(t.summary_sections)/2,t.radius=t.getRadius(t.height,t.width),t.svg=d3.select(t.visualization_selector).append("svg").attr("height",t.height).attr("width",t.width).append("g").attr("id",t.visualization_g_id).attr("transform",t.getVisualizationGTransfrom());var e=d3.values(t.dataset);t.svg.selectAll("g").data(e).enter().append("g").attr("class","ring").selectAll("path").data((function(e){return t.pie(e)})).enter().append("path").attr("display",(function(e,t,n){return n>0?null:"none"})).attr("fill",t.getWedgeElementFill).attr("class",t.getWedgeElementClass).attr("d",t.getWedgeElementD).attr("stroke",t.stroke_color).attr("stroke-width",t.stroke_width).attr("data-id",t.getWedgeElementDataId).style({cursor:"pointer"}),$("path").css("opacity",t.default_opacity),t.groupPathsBySummarySection(),t.addSummarySectionWedgeText(),t.addCenterLocator(),t.adjustContainerToActualVisible(),t.fadeInWedges()},t.addCenterLocator=function(){t.svg.append("g").attr("id",t.center_locator_id).attr("x",0).attr("y",0)},t.adjustContainerToActualVisible=function(){var e=t.$visualization.find("#"+t.visualization_g_id),n=e.get(0).getBBox();t.height=n.height,t.$visualization.find("svg").attr("height",t.height),t.center_adjustment_for_actual_height=t.height/2+n.y,e.attr("transform",t.getVisualizationGTransfrom())},t.addTitleToCenterCircle=function(){var e=t.svg.append("g");e.append("circle").attr("r",t.center_radius).attr("cx",0).attr("cy",0).attr("fill","none"),e.append("text").attr("id",t.center_title_id).text(t.book_title),d3plus.textwrap().container("#"+t.center_title_id).padding(0).resize(!0).valign("middle").draw()},t.getVisualizationOffsetFromTop=function(){return t.$visualization.offset().top+t.$header.height()+t.height/2-t.center_adjustment_for_actual_height-$(window).height()/2},t.scrollToCenterAndFadeInWedges=function(e){e=e||function(){};var n=!1;$("html, body").animate({scrollTop:t.getVisualizationOffsetFromTop()},(function(){if(n)return!1;n=!0,t.fadeInWedges()}))},t.fadeInWedges=function(){var e="g.summary-section",n=function(i){if(!i.length)return!1;$.when(i.animate({opacity:1},1e3/t.summary_section_count)).done((function(){n(i.next(e))}))};n(t.$visualization.find(e).first())},t.summarySectionRedRingHeading=function(e){return e.title?"blank"==e.abbreviated_title?"":e.abbreviated_title?e.abbreviated_title:e.title.match(/-|\u2013/)&&e.title.match(/\d+/)?e.title.match(/\d+/)[0]:e.title.replace(/[^\d,\.]/g,"").replace(/,/g,"."):""},t.addSummarySectionWedgeText=function(){t.$visualization.find(".summary-section-header").each((function(e,n){var i=n.getTotalLength(),o=$(this).data("id"),s=t.summary_section_hash[o],r=n.getPointAtLength(i/4),a=n.getPointAtLength(3*i/4);t.svg.append("text").text(t.summarySectionRedRingHeading(s)).attr("data-id",s.id).attr("data-title",s.title).attr("x",(r.x+a.x)/2).attr("y",(r.y+a.y)/2).attr("text-anchor","middle").attr("font-size",9).attr("font-weight","bold").attr("fill","#fff").attr("dy",4.5)}))},t.getWedgeElementDataId=function(e,n,i){var o=t.getSummary(n,i),s=t.getSummarySection(n,i);return o?o.id:s?s.id:null},t.themeTemplate=function(e){return'<div id="theme-'+e.id+'" class="theme" data-code_index="'+e.code_index+'"><div class="background" style="background: '+t.theme_colors[e.code_index]+';"></div><div class="theme-block" style="background: '+t.theme_colors[e.code_index]+';"></div> <span class="title">'+e.title+'</span><div class="clear">X</div></div>'},t.addThemes=function(){t.$theme_container.find(".theme").remove();for(var e=0;e<t.theme_count;e++)t.$theme_container_themes.append(t.themeTemplate(t.themes[e]))},t.groupPathsBySummarySection=function(){for(var e,n=0;n<t.summary_section_count;n++)e=t.svg.append("g").attr("class","summary-section summary-section-"+t.summary_sections[n].id),$(e.node()).data({summary_section_index:n,summary_section_id:t.summary_sections[n].id}).css("opacity",0).append($("path.summary-section-"+t.summary_sections[n].id));$("g.ring").remove()},t.showClearInfoBox=function(){t.$clear_info_box.show()},t.onSummaryClick=function(e){return!(t.theme_locked&&!t.summaryHasTheme(e,t.selected_theme))&&(t.summary_locked&&t.selected_summary==e?(t.clearInfoBox(),!1):(t.summary_locked&&(t.summary_locked=!1),t.onSummaryMouseover(e),t.showClearInfoBox(),t.summary_locked=!0,t.selected_summary=e,void(t.selected_summary_section=t.getSummarySectionById(e.summary_section_id))))},t.onSummaryMouseout=function(){if(t.summary_locked)return!1;t.theme_locked&&!t.isMobile()?(t.$info_box_content.html(t.selectedThemeInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0)):(t.$info_box_content.html(t.default_info_box_content),t.$info_box.addClass("default").scrollTop(0)),t.isMobile()?t.$visualization.find(".theme").css("opacity",t.default_opacity):t.$visualization.find("path").css("opacity",t.default_opacity)},t.summaryHasTheme=function(e,t){return"1"===e.theme_tracker_code[t.code_index]},t.onSummaryMouseover=function(e){if(t.summary_locked)return!1;var n=t.getSummarySectionById(e.summary_section_id);t.isMobile()?(t.$visualization.find(".theme").css("opacity",t.default_opacity),t.$visualization.find(".summary-section-"+n.id+" .theme")):(t.$visualization.find("path").css("opacity",t.default_opacity),t.$visualization.find("path.summary-section-"+n.id).css("opacity",.75),t.$visualization.find("path.summary-section-header.summary-section-"+n.id).css("opacity",1)),(!t.theme_locked||t.theme_locked&&t.summaryHasTheme(e,t.selected_theme))&&(t.isMobile()?t.$visualization.find(".summary-"+e.id+" .theme").css("opacity",1):t.$visualization.find("path.summary-"+e.id).css("opacity",1),t.$info_box_content.html(t.summaryInfoBoxContent(n,e)),t.$info_box.removeClass("default").scrollTop(0))},t.getSummaryById=function(e){return t.summary_hash[e]},t.getSummarySectionById=function(e){return t.summary_section_hash[e]},t.miniSummarySectionVizHTML=function(e,t){for(var n,i='<span class="dot">&#8226;</span>',o='<span class="dash">&#8212;</span>',s=[],r=0,a=e.summaries.length;r<a;r++)e.summaries[r].id==t.id&&(n=r),s.push(i);var l=$("<div>").append(s.join(o));return l.find(".dot").eq(n).addClass("selected"),l.find(".dot.selected").prev(".dash").addClass("selected"),l.find(".dot.selected").next(".dash").addClass("selected"),l.html()},t.summaryInfoBoxContent=function(e,t){var n=(e.summaries.indexOf(t)+1)/e.summaries.length*100,i='<div class="readable">'+t.text+"</div>";return i=i+'<div class="read-the-rest">Read our <a href="'+e.path+'">detailed analysis</a> of this summary.</div>','<div class="header"><div class="title">'+e.title+' Summary</div><div class="summary-section-progress-bar"><div class="start text">start</div><div class="end text">end</div><div class="percent-complete" style="width: '+n+'%;"></div></div></div><div class="text">'+i+"</div>"},t.selectedSummaryInfoBoxContent=function(){return t.summaryInfoBoxContent(t.selected_summary_section,t.selected_summary)},t.getSummarySection=function(e,n){return t.summary_sections[1===n?Math.floor(e/3):Math.floor(e/(t.theme_count+2))]},t.getSummary=function(e,n){return t.getSummarySection(e,n).summaries[n-2]},t.getThemeIndex=function(e){var n=e%(t.theme_count+2)-1;return(n<0||n>=t.theme_count)&&(n=null),n},t.getThemeColor=function(e,n){var i=t.getSummary(e,n);if(i){var o=t.getThemeIndex(e,n);return"1"==i.theme_tracker_code[o]?t.theme_colors[o]:t.blank_theme_color}return"#fff"},t.getWedgeElementClass=function(e,n,i){var o=t.getSummarySection(n,i),s=t.getSummary(n,i),r=t.getThemeIndex(n,i)
;return e.value==t.wedge_padding_value?null:o&&s&&null!=r?["summary","summary-"+s.id,"summary-section-"+o.id,"theme","theme-"+r].join(" "):1==i&&o?"summary-section-header summary-section-"+o.id:null},t.getWedgeElementD=function(e,n,i){var o,s;return 0==i?(o=0,s=t.center_radius):1==i?(o=t.center_radius,s=t.center_radius+t.section_ring_radius):(o=t.center_radius+t.section_ring_radius+t.radius*(i-2),s=t.center_radius+t.section_ring_radius+t.radius*(i-1)),t.arc.innerRadius(o).outerRadius(s)(e)},t.getWedgeElementFill=function(e,n,i){return e.value==t.wedge_padding_value||0==i?"#fff":1==i?"#054046":i>1?t.getThemeColor(n,i):void 0},t.getMouseAngleFromCenter=function(e){var n=t.$visualization.find("svg").offset(),i=(180*Math.atan2(-(n.top+t.height/2-e.pageY),-(n.left+t.width/2-e.pageX))/Math.PI+360)%360-270;return i<0&&(i+=360),i},t.getSummarySectionAtAngle=function(e){return t.summary_sections[Math.floor(e/360/t.summary_section_count)]},t.clearSelectedTheme=function(){t.theme_locked=!1,t.selected_theme=null,t.$theme_container.find(".clear").hide(),t.$theme_container.find(".theme").trigger("mouseout"),t.summary_locked&&t.clearSelectedSummary()},t.clearSelectedSummary=function(){t.summary_locked=!1,t.selected_summary=null,t.selected_summary_section=null,t.onSummaryMouseout(),t.$visualization.find("path").css("opacity",t.default_opacity)},t.clearInfoBox=function(){t.summary_locked&&t.theme_locked?(t.clearSelectedSummary(),t.isMobile()||(t.$info_box_content.html(t.selectedThemeInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0))):t.summary_locked?(t.clearSelectedSummary(),t.$info_box_content.html(t.default_info_box_content),t.$info_box.addClass("default").scrollTop(0),t.$clear_info_box.hide()):t.theme_locked&&(t.clearSelectedTheme(),t.$info_box_content.html(t.default_info_box_content),t.$info_box.addClass("default").scrollTop(0),t.$clear_info_box.hide())},t.selectedThemeInfoBoxContent=function(){return t.themeInfoBoxContent(t.selected_theme)},t.themeInfoBoxContent=function(e){var n='<div class="readable">'+e.description+"</div>";return n=n+'<div class="read-the-rest">Read our <a href="'+e.path+'">complete explanation</a> of this theme.</div>','<div class="header"><div class="theme title">'+$("<div>").append(t.$themesAndColorsKey.find(".theme.active .theme-icon").clone()).html()+e.title+'</div></div><div class="text">'+n+"</div>"},t.onThemeMouseover=function(e){if(t.theme_locked)return!1;var n=t.themes[e.data("code_index")];e.find(".background").show(),t.isMobile()?(t.$visualization.find(".theme").addClass("blank"),t.$visualization.find(".theme-"+n.id).removeClass("blank")):(t.$visualization.find(".theme").css("fill",t.blank_theme_color),t.$visualization.find(".theme-"+n.code_index).css("fill",""),t.$info_box_content.html(t.themeInfoBoxContent(n)),t.$info_box.removeClass("default").scrollTop(0),t.$clear_info_box.show())},t.onThemeMouseout=function(){if(t.theme_locked)return!1;t.$theme_container.find(".background").hide(),t.isMobile()?t.$visualization.find(".theme").removeClass("blank"):t.$visualization.find(".theme").css("fill",""),t.summary_locked?(t.$info_box_content.html(t.selectedSummaryInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0)):(t.$info_box_content.html(t.default_info_box_content),t.$info_box.addClass("default").scrollTop(0),t.$clear_info_box.hide())},t.onThemeClearClick=function(){t.summary_locked&&t.clearSelectedSummary(),t.clearInfoBox()},t.onWindowResize=function(){var e=t.selected_theme,n=t.selected_summary;t.clearSelectedSummary(),t.clearSelectedTheme(),t.render(),e&&$("#theme-"+e.id).trigger("mouseover").trigger("click"),n&&(t.onSummaryMouseover(n),t.onSummaryClick(n))},t.addEventListeners=function(){var e=null;$(window).on("resize",(function(){clearTimeout(e),e=setTimeout(t.onWindowResize,100)})),t.$visualization.on("mouseover",".summary-section-header",(function(){var e=t.getSummarySectionById($(this).data("id"));t.onSummaryMouseover(e.summaries[0])})),t.$visualization.on("mouseover",".summary",(function(){var e=t.getSummaryById($(this).data("id"));t.onSummaryMouseover(e)})),t.$visualization.on("mouseout",".summary",(function(){t.onSummaryMouseout()})),t.$visualization.on("click",".summary",(function(){var e=t.getSummaryById($(this).data("id"));t.onSummaryClick(e)})),t.$visualization.on("touchmove",".summary",(function(){t.touchstartedAt=null})),t.$visualization.on("touchend",".summary",(function(){if(t.now()-t.touchstartedAt<t.tapTimeLimit){var e=t.getSummaryById($(this).data("id"));t.onSummaryClick(e)}})),t.$clear_info_box.on("click touchstart",(function(){return t.clearInfoBox(),!1})),t.$theme_container.on("mouseover",".theme",(function(){t.onThemeMouseover($(this))})),t.$theme_container.on("mouseout",".theme",(function(){t.onThemeMouseout($(this))})),t.$theme_container.on("click touchstart",".theme",(function(e){if("click"===e.type&&"ontouchstart"in document.documentElement)return!1;var n=$(this),i=t.themes[n.data("code_index")];return t.theme_locked&&t.selected_theme==i?(t.onThemeClearClick(),!1):(t.theme_locked&&t.onThemeClearClick(),t.onThemeMouseover(n),t.theme_locked=!0,t.selected_theme=i,t.clearSelectedSummary(),t.isMobile()||(t.$info_box_content.html(t.selectedThemeInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0),t.showClearInfoBox()),n.find(".clear").show(),!1)})),t.$theme_container.on("click touchstart",".clear",(function(){})),t.$mobile_theme_toggle.on("click touchstart",(function(e){return"click"===e.type&&"ontouchstart"in document.documentElement||(t.$header.hasClass("fixed")||$("html, body").animate({scrollTop:t.$mobile_theme_toggle.offset().top},1e3),t.$mobile_theme_toggle.toggleClass("open"),t.$theme_container.find(".theme").toggle()),!1})),t.$mobile_intro.on("click",".toggle-additional-content",(function(){var e=t.$mobile_intro.find(".additional-content"),n=$(this);return e.is(":visible")?(e.hide(),n.text("more")):(e.show(),n.text("less")),!1})),$(window).on("scroll",(function(){t.$header.hasClass("mobile")&&(!t.$header.hasClass("fixed")&&$(window).scrollTop()>t.$visualization.offset().top?t.$header.addClass("fixed"):t.$header.hasClass("fixed")&&$(window).scrollTop()<=t.$visualization.offset().top&&t.$header.removeClass("fixed"))}));var n=t.$themesAndColorsKey,i=function(e){return"theme-"+e+"-active-background"};n.on("click",".header",(function(){n.toggleClass("open");var e=n.hasClass("open"),t=$(this);t.find(".lc-icon").toggleClass("lc-icon-down lc-icon-up");var i=t.find(".icon");e&&i.reverse(),i.each((function(e){$(this).delay(20*e).fadeToggle(300)})),n.find(".content").slideToggle()})),n.on("mouseover",".theme",(function(){var e=$(this);if(t.theme_locked)return!0;var n=e.data("code-index"),o=i(n);e.addClass(o);var s=t.themes[n];t.$visualization.find(".theme").css("fill",t.blank_theme_color),t.$visualization.find(".theme-"+s.code_index).css("fill",""),t.$info_box_content.html(t.themeInfoBoxContent(s)),t.$info_box.removeClass("default").scrollTop(0),t.$clear_info_box.show()})).on("mouseout",".theme",(function(){var e=$(this);if(t.theme_locked)return!0;var n=e.data("code-index"),o=i(n);e.removeClass(o),t.$visualization.find(".theme").css("fill",""),t.summary_locked?(t.$info_box_content.html(t.selectedSummaryInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0)):(t.$info_box_content.html(t.default_info_box_content),t.$info_box.addClass("default").scrollTop(0),t.$clear_info_box.hide())})).on("click",".theme",(function(){var e=n.find(".theme.active");if(e.length){var o=e.data("code-index"),s=i(o);e.removeClass(s),e.removeClass("active");var r=t.themes[o];t.onThemeClearClick()}var a=$(this);if(e.is(a))return!0;o=a.data("code-index"),s=i(o),r=t.themes[o];a.addClass("active"),a.addClass(s),t.$visualization.find(".theme").css("fill",t.blank_theme_color),t.$visualization.find(".theme-"+r.code_index).css("fill",""),t.theme_locked=!0,t.selected_theme=r,t.clearSelectedSummary(),t.$info_box_content.html(t.selectedThemeInfoBoxContent()),t.$info_box.removeClass("default").scrollTop(0),t.showClearInfoBox()}))},t.isMobile=function(){return $(window).width()<t.min_width},t.setup=function(e,n){t.$loading.hide(),t.$header.fadeIn(),t.$visualization.fadeIn(),t.parseJSON(e,n),t.render(),t.addThemes(),t.addEventListeners()},t.addMobileClasses=function(){t.$visualization.removeClass("desktop").addClass("mobile"),t.$header.removeClass("desktop").addClass("mobile"),t.$mobile_chapter_header.show(),t.$info_box.addClass("default"),t.$header_and_visualization_wrapper.addClass("mobile"),t.$mobile_intro.find(".additional-content").hide(),t.$mobile_intro.find(".toggle-additional-content").text("more")},t.removeMobileClasses=function(){t.$visualization.addClass("desktop").removeClass("mobile"),t.$header.addClass("desktop").removeClass("mobile fixed"),t.$theme_container.find(".theme").show(),t.$theme_container.css({width:""}),t.$mobile_chapter_header.hide(),t.$info_box.removeClass("default"),t.$header_and_visualization_wrapper.removeClass("mobile")},t.init=function(){t.pie=d3.layout.pie().sort(null),t.arc=d3.svg.arc(),t[t.isMobile()?"addMobileClasses":"removeMobileClasses"](),d3.json(t.$visualization.data("path"),t.setup)}}(window.LitCharts.Chartboard=window.LitCharts.Chartboard||{}),$((function(){if(!$("html.books.compare").length)return!1;var e=$("#compare-form").on("change","select.form-control",(function(){var t=$(this).parents(".books-controls").find("select.form-control option:selected");if(2===t.length&&t.first().val()&&t.last().val()){var n=e.attr("action");n=(n=n.replace(/book_1/,t.first().val())).replace(/book_2/,t.last().val()),window.location.href=n}}));$("td").on("click",".more",(function(e){return e.preventDefault(),$(this).parents("tr").find("td").each((function(){var e=$(this),t=e.find(".value"),n=e.find(".more").removeClass("more").addClass("less").text("less");n.data("truncated",t.html()),t.html(n.data("full"))})),!1})).on("click",".less",(function(e){return e.preventDefault(),$(this).parents("tr").find("td").each((function(){var e=$(this),t=e.find(".value"),n=e.find(".less").removeClass("less").addClass("more").text("more");t.html(n.data("truncated"))})),!1})),$(window).on("scroll",(function(){$(window).scrollTop()>$("#compare-form").offset().top?$("#navbar").slideDown("fast"):$("#navbar").slideUp("fast")})),$("#comparison-pdf-modal").featureInterestModal("comparison pdf");var t=$("#inline-popup-modal");$("#compare-form").on("click",".character",(function(e){e.preventDefault();var n=$(this);return t.find(".modal-title .text").text("Character: "+n.data("name")),t.find(".modal-body").html('<div class="readable">'+n.data("description")+' <em><a href="'+n.data("path")+'">read analysis of '+n.data("name")+"</a></em></div>"),t.modal("show"),!1})).on("click",".simbol",(function(e){e.preventDefault();var n=$(this);return t.find(".modal-title .text").text("Symbol: "+n.data("name")),t.find(".modal-body").html('<div class="readable"><span class="pull-left" style="margin-right: 10px">'+n.data("icon")+"</span>"+n.data("description")+' <em><a href="'+n.data("path")+'">read analysis of '+n.data("title")+"</a></em></div>"),t.modal("show"),!1})).on("click",".theme",(function(e){e.preventDefault();var n=$(this);return t.find(".modal-title .text").text("Theme: "+n.data("title")),t.find(".header-icon").html(n.data("icon")),t.find(".modal-body").html('<div class="readable"><span class="pull-left" style="margin-right: 10px">'+n.data("icon")+"</span>"+n.data("description")+' <em><a href="'+n.data("path")+'">read analysis of '+n.data("title")+"</a></em></div>"),t.modal("show"),!1}))})),$((function(){if(!$(".books.index .view").length)return!1;$("#sticky-sidebar").length&&new StickySidebar("#sticky-sidebar",{topSpacing:10,bottomSpacing:10,containerSelector:".row"})})),$((function(){var e=$("section.contact");if(!e.length)return!1;for(var t,n=$("#edit-cid").change((function(){var e=$(this).val();$(".form-item-topic").toggle("requests"!==e&&"lit_term_requests"!==e),$(".form-item-requested-book").toggle("requests"===e),$(".form-item-even-better .form-required").toggle("requests"===e||"lit_term_requests"===e),$(".form-item-requested-lit-term").toggle("lit_term_requests"===e)})).trigger("change"),i=window.location.search.replace(/^\?/,"").split(/&/),o=0,s=i.length;o<s;o++)"category"===(t=i[o].split(/=/))[0]&&(n.find('option[value="'+t[1]+'"]').prop("selected",!0),n.trigger("change"));var r=e.find("button.yes"),a=e.find("button.no"),l=e.find(".if-yes"),c=e.find(".if-no");r.on("click",(function(){l.slideDown(),c.hide()})),a.on("click",(function(){c.slideDown(),l.hide()}))})),$((function(){if($(".book-nav .dropdown").on("shown.bs.dropdown",(function(){var e=$(this).find("ul");0===e.scrollTop()&&(e.scrollTop(1),e.scrollTop(0))})),!$(".book-component.layout").length)return!1;new StickySidebar("#sticky-sidebar",{topSpacing:120,bottomSpacing:20,containerSelector:".row"}),$(".book-nav .component").on("click",(function(e){if(e.target===this){var t=$(this);return t.hasClass("dropdown")?t.find(".dropdown-toggle").dropdown("toggle"):window.location=t.find("a").attr("href"),!1}})).filter("."+$(".book-nav .components").data("current")).addClass("current");var e=function(){if(!LitCharts.inlineComponents||!LitCharts.inlineComponents.inlineCharacters)return!1;$(".inline-character").each((function(){var e=$(this);if(e.parents(".no-inline-characters").length)return!1;var t=e.text().toLowerCase(),n=LitCharts.inlineComponents.inlineCharacters[t];if(n)for(var i,o=0,s=n.length;o<s;o++)i=LitCharts.inlineComponents.characters[n[o]],e.wrap('<a class="inline-popup-trigger inline-character" href="'+i.path+'" data-character-id="'+n[o]+'"></a>')}))},t=function(){if(!LitCharts.inlineComponents||!LitCharts.inlineComponents.inlineSimbols)return!1;$(".inline-symbol").each((function(){var e=$(this);if(e.parents(".no-inline-symbols").length)return!1;var t=e.text().toLowerCase(),n=LitCharts.inlineComponents.inlineSimbols[t];if(n)for(var i,o=0,s=n.length;o<s;o++)i=LitCharts.inlineComponents.simbols[n[o]],e.wrap('<a class="inline-popup-trigger inline-simbol" href="'+i.path+'" data-simbol-id="'+n[o]+'"></a>')}))},n=function(){if(!LitCharts.inlineComponents||!LitCharts.inlineComponents.inlineTerms)return!1;$(".inline-term").each((function(){var e=$(this);if(e.parents(".no-inline-terms").length)return!1;var t=e.text().toLowerCase(),n=LitCharts.inlineComponents.inlineTerms[t];if(n)for(var i,o=0,s=n.length;o<s;o++)i=LitCharts.inlineComponents.terms[n[o]],e.wrap('<a class="inline-popup-trigger inline-term" href="'+i.path+'" data-term-id="'+n[o]+'"></a>')}))};(function(){if(!LitCharts.inlineComponents)return!1;e(),t(),n()})();var i=$("#inline-popup-modal");i.on("show.bs.modal",(function(){$('.theme[data-toggle="popover"]').popover("hide")})),$("body").on("click",".inline-popup-trigger.inline-character",(function(e){e.preventDefault();var t=parseInt($(this).data("character-id")),n=LitCharts.inlineComponents.characters[t];return i.find(".modal-title .text").text("Character: "+n.name),i.find(".modal-body").html('<div class="readable">'+n.description+(n.majorCharacter?' <a href="'+n.path+'">read analysis of '+n.name+"</a>":"")+"</div>"),i.modal("show"),!1})).on("click",".inline-popup-trigger.inline-simbol",(function(e){e.preventDefault();var t=parseInt($(this).data("simbol-id")),n=LitCharts.inlineComponents.simbols[t];return i.find(".modal-title .text").text("Symbol: "+n.name),i.find(".modal-body").html('<div class="readable"><span class="pull-left" style="margin-right: 10px">'+n.icon+"</span>"+n.description+' <a href="'+n.path+'">read analysis of '+n.name+"</a></div>"),i.modal("show"),!1})).on("click",".inline-popup-trigger.theme",(function(e){e.preventDefault();var t=parseInt($(this).data("code-index")),n=LitCharts.popupThemes[t];return i.find(".modal-title .text").text("Theme: "+n.title),i.find(".header-icon").html(n.icon),i.find(".modal-body").html('<div class="readable"><span class="pull-left" style="margin-right: 10px">'+n.icon+"</span>"+n.description+' <a href="'+n.path+'">read analysis of '+n.title+"</a></div>"),i.modal("show"),!1})).on("click",".inline-popup-trigger.inline-term",(function(e){e.preventDefault();var t=parseInt($(this).data("term-id")),n=LitCharts.inlineComponents.terms[t];return i.find(".modal-title .text").text("Term: "+n.name),i.find(".modal-body").html('<div class="readable">'+n.description+' <a href="'+n.path+'">(read full term analysis)</a></div>'),i.modal("show"),!1}))})),$((function(){$(".header").on("click",".search.form .submit",(function(){$(this).parents(".form").submit()})).on("click",".small .controls .search",(function(e){return e.preventDefault(),!1}));var e=$(".nav-search");e.length&&($navSearchInput=e.find('input[name="query"]'),$navSearchClear=e.find(".input-group-addon.postfix"),$navSearchClear.on("click",(function(t){t.preventDefault(),$navSearchInput.val(""),e.addClass("empty")})),$navSearchInput.on("input",(function(t){t.target.value.length>0?e.removeClass("empty"):e.addClass("empty")}))),$(".dropdown-toggle").dropdown(),$("#toggleable-search-toggle").on("click",(function(e){e.preventDefault(),$("#toggleable-search").slideToggle(),$("#toggleable-search").toggleClass("visible")}))})),$((function(){if(!$(".translation-component.layout"))return!1;(function(){$(".annotation").each((function(){$(this).wrap('<a class="inline-popup-trigger annotation" href="#"></a>')}))})();var e=$("#inline-popup-modal");e.on("show.bs.modal",(function(){$('.theme[data-toggle="popover"]').popover("hide")})),$("body").on("click",".inline-popup-trigger.annotation",(function(t){t.preventDefault();var n=this.children[0].title;return e.find(".modal-body").html("<div>"+n+"</div>"),e.modal("show"),!1}))})),$(".translation-nav .component").on("click",(function(e){if(e.target===this){var t=$(this);return t.hasClass("dropdown")?t.find(".dropdown-toggle").dropdown("toggle"):window.location=t.find("a").attr("href"),!1}})).filter("."+$(".translation-nav .components").data("current")).addClass("current"),$((function(){if(!$(".lit-terms.index").length)return!1;var e=$("#lit-terms-list .lit-term"),t=$("#lit-terms-alphabetical-controls"),n=$("#lit-terms-mobile-alphabetical-control"),i=function(t){if("All"===t)return e.show(),!0;var n=new RegExp("^"+t,"i");e.each((function(){$(this).toggle(n.test($(this).find(".name").text()))}))};t.on("click","a",(function(e){e.preventDefault();var n=$(this);return t.find("a").removeClass("selected"),n.addClass("selected"),i(n.text()),!1})),n.on("change",(function(){i($(this).find("option:selected").val())}))})),$((function(){if(!$(".lit-terms.show").length)return!1;var e=$("#lit-term-nav"),t=e.outerHeight(!0),n=(e.offset()||{}).top,i=e.parents(".nav-container"),o=e.next(".banner-promo.large-viewport"),s="current",r=function(t){var n=e.find(".component");n.removeClass(s);for(var i,o,r=n.length-1,a=0;r>=a;r--)if(i=n.eq(r).find(".nav-link").attr("href"),(o=$(i)).length&&t>o.offset().top)return n.eq(r).addClass(s);return n.first().addClass(s)};e.on("click",".nav-link",(function(e){e.preventDefault();var n=$(this);return $("html, body").animate({scrollTop:$(n.attr("href")).offset().top-t-20},"slow"),!1})),$(".mobile-menu").on("click",".nav-link",(function(e){e.preventDefault();var n=$(this);return $("html, body").animate({scrollTop:$(n.attr("href")).offset().top-t-20},"slow"),n.parents(".mobile-menu").find(".sub-header .close-btn").trigger("click"),!1})),$(window).on("scroll",(function(){if(!e.is(":visible"))return!0;var s=$(window).scrollTop();if(s>=n&&!e.hasClass("fixed")){var a=t+(o.outerHeight(!0)||0);i.css({height:a}),o.css({top:t}).addClass("fixed"),e.addClass("fixed"),$(".menu-list:visible").length||e.next(".distance-learning-promo").removeClass("hidden")}else s<n&&e.hasClass("fixed")&&(i.css({height:""}),e.removeClass("fixed"),$(".menu-list:visible").length||e.next(".distance-learning-promo").addClass("hidden"),o.removeClass("fixed"),n=e.offset().top,t=e.outerHeight(!0));r(s)})),$(window).trigger("scroll"),$("#lit-term-content img").one("load",(function(){var e=$(this);e.height()>e.width()&&e.css({"max-height":500,"max-width":"none",width:"auto"})})).each((function(){this.complete&&$(this).load()}))})),$((function(){var e=$(".plot-summary.show .view");if(!e.length)return!1;e.find("p.plot-text:eq(2)").before(LitCharts.ads.pdfPromo),e.find(".stretch-left-promo").trigger("reposition")})),$((function(){if(!$(".quotes.index .view").length)return!1;var e=$(".quotes-controls");e.on("click",".header",(function(){$(this).find(".toggle").toggleClass("lc-icon-up lc-icon-down"),e.find(".content").slideToggle()}));var t={summarySection:'[name="summary_section"]',character:'[name="character"]',theme:'[name="theme"]',literaryDevice:'[name="literary_device"]'},n=$(".summary-section-quotes .quote"),i=$(".summary-section-quotes .summary-section"),o=$(".quotes .no-matches"),s=function(){$(".stretch-left-promo").remove();var e=$(t.summarySection).val()||"",s=$(t.character).val()||"",r=$(t.theme).val()||"",a=$(t.literaryDevice).val()||"";n.each((function(){var t=$(this);(""===e||e===t.data("summary-section"))&&(""===s||t.data("characters").indexOf(s)>-1)&&(""===r||t.data("themes").indexOf(r)>-1)&&(""===a||t.data("literary-devices").indexOf(a)>-1)?t.removeClass("hidden").slideDown():t.addClass("hidden").slideDown()}));var l=0;i.each((function(){var e=$(this);!!e.find(".quote:not(.hidden)").length?(e.slideDown(),l+=1):e.slideUp()})).promise().done((function(){var e=$(".summary-section.list-group:visible");e.length>1&&e.eq(0).after(LitCharts.ads.pdfPromo),$(window).trigger("load")})),0==l?o.slideDown():o.slideUp()};for(var r in t)e.on("change",t[r],(function(){s()}));var a=$(".summary-section.list-group");a.length>1&&a.eq(0).after(LitCharts.ads.pdfPromo)})),$((function(){if(!$(".search.simple .search-container").length)return!1;var e=$("#results");e.on("click",".more",(function(t){t.preventDefault();var n=$(this),i=n.parents(".result");return n.replaceWith('<i class="fa fa-cog fa-spin fa-3x fa-fw loading"></i>'),$.ajax({data:{book:i.data("book"),query:e.data("query")},url:e.data("get-all-path")}).done((function(e){i.find(".panel-body .matches").html(e),i.find(".loading").remove()})),!1}))})),$((function(){function e(){v.css({left:m.offset().left})}function t(){u?(f=$(".paywall").height()/2-o/2+"px",p=0):(f=d.position().top+l+"px",p=$(".comparison-row").last().position().top-o+"px"),m.css({top:f}),g.css({top:p})}function n(){var e=m.height(),t=_/2-e/2;$(window).scrollTop()+t>m.offset().top&&!($(".bottom-nav-container").offset().top-100<$(".analysis-dialog--fixed").offset().top+e)?(m.css({"z-index":"-1"}),g.css({"z-index":"-1"}),v.removeClass("hidden").css({top:t,"z-index":"1"})):(m.css({"z-index":"1"}),g.css({"z-index":"1"}),v.css({"z-index":"-1"}))}function i(){var e,t=$(".paywall").height()/2,n=$(".paywall").width()/2,i=s/2;e=$(window).width()<=c?a/2:r/2,$(".analysis-dialog--mobile-sonnet").css({top:t-i,left:n-e})}if(!$(".blur-inline-promo").length)return!1;var o=236,s=40,r=248,a=177,l=60,c=767,d=null,u=!1;if(!window.location.pathname.match(/sonnet-dedication/)){if(window.location.pathname.match(/the-rape-of-lucrece/))d=$('span[data-line-count="80"]').closest(".comparison-row").nextAll(".comparison-row");else if(window.location.pathname.match(/venus-and-adonis/))d=$('span[data-line-count="40"]').closest(".comparison-row").nextAll(".comparison-row");else if(window.location.pathname.match(/sonnet/)){u=!0;var h=$($(".translation-content br")[1]);"speaker-text"===h.parent().attr("class")?(h.nextAll().addBack().wrapAll('<span class="paywall paywall--sonnet"></span>'),h.detach()):h.parent().nextAll().addBack().wrapAll('<span class="paywall paywall--sonnet"></span>'),$(".modern-translation .paywall a").replaceWith((function(){return"<span>"+$(this).html()+"</span>"})),$(".paywall").prepend($(".analysis-dialog--mobile").detach()),$(".paywall").prepend($(".analysis-dialog--absolute-top").detach()),$(".analysis-dialog--mobile").addClass("analysis-dialog--mobile-sonnet"),$(".analysis-dialog").addClass("analysis-dialog--sonnet"),i()}else d=$('span[data-line-count="15"]').closest(".comparison-row").nextAll(".comparison-row");d&&(d.find(".modern-translation .translation-content").addClass("paywall"),d.find(".modern-translation").prepend($(".analysis-dialog--mobile").detach()),d.find(".modern-translation .paywall a").replaceWith((function(){return"<span>"+$(this).html()+"</span>"}))),$(".analysis-dialog--mobile").removeClass("hidden");var f,p,m=$(".analysis-dialog--absolute-top"),g=$(".analysis-dialog--absolute-bot"),v=$(".analysis-dialog--fixed"),_=$(window).height();u&&g.css({"z-index":"-1"}),t(),m.removeClass("hidden"),g.removeClass("hidden"),e(),n(),$(window).on("scroll",(function(){$(window).width()>c&&n()})),$(window).on("resize",(function(){_=$(window).height(),e(),u&&i(),$(window).width()>c&&n(),t()}))}})),$((function(){var e=$("#translations");$("#translations-toggle").on("change",(function(){var t=$(this).find(":checked").val();e.find(".grouping:visible").fadeOut("fast",(function(){e.find(".grouping."+t).fadeIn()}))}))})),$((function(){function e(){var e=$(".comparison-row"),n=0;e.each((function(){var e=$(this).find(".original-play").find(".line-mapping");if(e.length)e.each((function(){if(!$(this).hasClass("mapped")){var e="[data-id="+$(this).data("id")+"]";$(e).addClass("mapped"),$(e).attr("data-color",(n+1).toString()),n>=4?n=0:n++}}));else{var i="<span class='line-mapping' data-id='"+t()+"' data-color='"+(n+1)+"'></span>";$(this).find(".speaker-text").each((function(e,t){var n=$(t).find(".shakespeare-translation-line");n.length?n.each((function(e,t){$(t).wrapInner(i)})):$(this).wrapInner(i)})),n>=4?n=0:n++}}))}function t(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}if(!$(".acs-speech-acts.show .view").length)return!1;$(".shakespeare-translation-line").filter((function(){return $(this).data("line-count")%5==0})).map((function(){var e=$(this).data("line-count");$(this).before('<span class="line-count-display">'+e+"</span>")})),e(),$("body").on("mouseenter",".line-mapping",(function(){var e=$(this).data("id");$("[data-id="+e+"]").addClass("acs__lm--hover")})),$("body").on("mouseleave",".line-mapping",(function(){var e=$(this).data("id");$("[data-id="+e+"]").removeClass("acs__lm--hover")})),$(".btn-toggle").on("click",(function(){var e="true"===$(".shakespeare-translations-container").attr("data-lm-color-enabled");$(".shakespeare-translations-container").attr("data-lm-color-enabled",e?"false":"true"),$(".btn-toggle").each((function(){$(this);$(this).css("display","inline"===$(this).css("display")?"none":"inline")}))}))})),$((function(){var e=$(".alphabetical-filters");if(!e.length)return!1;var t=e.data("selector"),n=e.find(".filter-entry"),i=function(){$(t+":visible").each((function(e){$(this).attr("data-column-no",e%4)}))};i();var o=function(e){$(t).addClass("notransition"),n.removeAttr("data-selected"),n.filter('[data-filter="'+e+'"]').attr("data-selected","true"),"all"===e?$(t).show():$(t).hide().filter('[data-sortable^="'+e+'"]').show(),i(),$(t).each((function(e,t){t.offsetHeight})),$(t).removeClass("notransition")};n.on("click",(function(){var e=$(this);o(e.data("filter"))}))})),$((function(){function e(){a.css({"box-shadow":"none"})}function t(){a.css({"box-shadow":""})}function n(){e()}function i(){var e="https:"===document.location.protocol;Cookies.set("annual_upgrade_banner_closed","true",{expires:365,secure:e})}function o(){r.remove(),t(),i()}function s(){r.find(".js-banner-closer").click(o),n()}var r=$(".js-upgrade-banner");if(!r.length)return!1;var a=$(".js-overshadower");s()})),$((function(){function e(){helpers.array.eachByN(c.toArray(),l.length,(function(e){var t=helpers.array.shuffle(l.slice(0,l.length));helpers.array.each(e,(function(e){var n=t.shift();$(e).addClass("theme-"+n+"-background")}))}))}if(!$(".guide-panel").length)return!1;$(window).width();var t=768,n=992,i=helpers.isSubscribed()?10:9,o=5,s=4,r=2,a=2,l=[0,1,2,3,4,5,6,7],c=$(".guide-panel"),d=function(){var e=helpers.getViewportWidth(),l=e>=t?s:r,d=c.parent()[0].getBoundingClientRect().width;d-=e>=n?2*i*(l-1):2*o*(l-1);var u=Math.floor(d/l)-2*a;c.addClass("notransition"),c.width(u).height(u).show(),c.removeClass("notransition")};d(),e(),$(window).on("resize",d),c.css("visibility","visible")})),$((function(){function e(){var e="https:"===document.location.protocol;Cookies.set("te_distance_learning_banner_closed","true",{expires:365,secure:e})}function t(){i.remove(),e()}function n(){i.find(".js-banner-closer").click(t)}var i=$(".js-te-distance-learning-banner");if(!i.length)return!1;$(window).on("scroll",(function(){if(i.data("fix-on-scroll")){var e=$(window).scrollTop();$(".header").offset();e>0?i.addClass("fixed"):i.removeClass("fixed")}})),n()})),$((function(){if(!$(".sign-up-wrap").length||!$(".sign-up-wrap--registration").length)return!1;jQuery.fn.reverse=[].reverse,$(".section-controls.sell-section").on("click",".sell-section-control, .sign-up.btn",(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},1e3),!1}));var e=$("#signup-focus"),t=function(){var t=e.find(".menu"),n=e.find(".promo .valign");n.css({marginTop:Math.max((t.height()-n.height())/2,0)})};e.find(".promo .valign").length&&(t(),e.find(".promo .valign img").on("load",t),$(window).on("resize",t));var n=$("#pdfs.sell-section");n.find(".pdf").each((function(){var e=$(this);e.data({"default-height":e.height(),"default-width":e.width()}),("img"===e.prop("tagName")?e:e.find("img")).on("load",(function(){e.data({"default-height":e.height(),"default-width":e.width()})}))}));var i=function(e){if(0===n.length)return!1;var t=n.hasClass("animation-complete");if(t&&!e)return!0;var i=$(window).width(),o=n.find(".pdf"),s=o.length-1;o.each((function(e){var n=$(this);n.show().css({height:"",width:""});var o=n.height(),r=n.width(),a=o*Math.pow(.9,s-e),l=r*Math.pow(.9,s-e),c=20,d=1183,u=975,h=768;i>d?c=100:i>u?c=120:i>h&&(c=54);for(var f=0,p=s-e;f<p;f++)c+=(i>h?.2:.3)*r*Math.pow(.9,f);var m=Math.pow(.9,s-e)*e*20-70;i>d?m=Math.pow(.9,s-e)*e*20-200:i>u?m=Math.pow(.9,s-e)*e*20-125:i>h&&(m=Math.pow(.9,s-e)*e*20-60),n.show().css({marginLeft:c+(i>h?60:0),marginTop:m,height:a,width:l}),t||n.css({left:i}).delay(100*e).animate({left:"0"},800)})),n.addClass("animation-complete")},o=function(e){if(0===n.length)return!1;var t=$(window),o=t.scrollTop()+t.height(),s=.25*t.height();o>=n.offset().top+s&&i(e)};$(window).on("scroll",(function(){o()})),$(window).on("resize",(function(){o(!0)})),o();var s=null,r=8e3;n.on("click",".controls .dot",(function(){clearTimeout(s);var e=n.find(".controls .dot");e.filter(".fa-circle").removeClass("fa-circle").addClass("fa-circle-thin"),$(this).removeClass("fa-circle-thin").addClass("fa-circle");var t=e.index(this);n.find(".pdf.active .images img").removeClass("current").eq(t).addClass("current"),s=setTimeout(a,r)}));var a=function(){var e=n.find(".controls .dot.fa-circle").next(".dot");e.length||(e=n.find(".dot").first()),e.click()};s=setTimeout(a,r);var l=$("#quotes-explanations");l.on("click",".options .option:not(.selected)",(function(){var e=$(this),t=l.find(".option").removeClass("selected").index(e);e.addClass("selected"),l.find(".sell-section__browser").transition({opacity:0,y:60},200).queue((function(){$(this).dequeue(),l.find(".sell-section__browser").each((function(){$(this).find(".image").removeClass("current").eq(t).addClass("current")}))})).transition({opacity:1,y:0},250,"cubic-bezier(0.175,0.885,0.32,1.275)")}));var c=function(){var e=$(window),t=e.scrollTop()+e.height(),n=2*e.height()/3;$(".scroll-anim-threshold:not(.scroll-anim-animated)").each((function(){var e=$(this);t>=e.offset().top+n&&e.addClass("scroll-anim-animated")}))};$(window).on("scroll",c),$(window).on("resize",c),c();var d=$("#teacher-editions.sell-section"),u=!0;d.on("click",".see-details",(function(){var e=$(this),t=d.find(".image.column .details"),n=d.find(".image.column .pdf-container");u?(u=!1,n.fadeToggle((function(){t.fadeToggle()}))):(u=!0,t.fadeToggle((function(){n.fadeToggle()}))),e.toggleClass("back-to-image"),e.text(e.hasClass("back-to-image")?"Back to Image":"See Details")}));var h=function(){var e=d.find(".image.column"),t=e.find(".details");t.height("auto");var n=t.position().top+t.height();t.height(""),n>e.height()?e.animate({height:n}):e.css("height","")};d.on("click",".option:not(.selected)",(function(){f($(this))}));var f=function(e){var t=d.find(".option").each((function(){var e=$(this).find(".icon img"),t=e.data("default-src");t&&e.attr("src",t)})).removeClass("selected").index(e);e.addClass("selected");var n=e.find(".icon img");n.data("default-src",n.attr("src")),n.attr("src",n.data("hover-path")),
d.find(".image").removeClass("current").filter('[data-index="'+t+'"]').addClass("current"),d.find(".details .text").html(e.data("detail-text")),d.find(".details .ccss").html(e.data("detail-ccss")),d.find(".testimonial-quote").fadeIn().find(".text").html(e.data("testimonial")),d.find(".image-title").text(e.text()),d.find(".btn.left").toggle(!!e.prev().length),d.find(".btn.right").toggle(!!e.next(":not([data-ignore-nav=true])").length),d.find(".details").is(":visible")&&h()};f(d.find(".option.selected"));var p="";d.find(".option").each((function(e){p+='<div class="image'+(0==e?" current":"")+'" data-index="'+e+'"><img src="'+$(this).data("image-url")+'" /></div>'})),d.find(".pdf").html(p),d.on("click",".navigation .btn",(function(){var e=$(this),t=d.find(".option.selected");t=e.hasClass("right")?t.next():t.prev(),f(t)}));var m=$("#shakespeare.sell-section");m.on("mousedown, touchstart",".gripper",(function(){m.data("gripper-activated",!0)})).on("mousemove, touchmove",".original-modern-slider",(function(e){if(!m.data("gripper-activated"))return!0;var t=$(this),n=(e.pageX||e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]&&e.originalEvent.touches[0].pageX)-t.offset().left;n<0&&(n=0),n>t.width()-4&&(n=t.width()-4),t.find(".modern.pane").css({left:n}),t.find(".gripper").css({left:n}).data("moved",!0)})),$(window).on("mouseup.shakespeare-slider, touchend.shakespeare-slider",(function(){m.data("gripper-activated",!1)})),$(window).on("resize",(function(){var e=m.find(".modern.pane .block");m.find(".original.pane .block").each((function(t){var n=e.eq(t);n.css({"margin-top":""}).css({"margin-top":$(this).offset().top-n.offset().top})}))})).trigger("resize");var g=function(){var e=$(window),t=m.find(".gripper"),n=m.find(".modern.pane");if(0===m.length||t.data("moved"))return!0;n.width();var i=60*(1-(e.scrollTop()+e.height()-n.offset().top-n.height()/4)/e.height());i=Math.max(0,i);var o=20+(i=Math.min(i,60))+"%";t.css({left:o}),n.css({left:o})};$(window).on("scroll",g),g(),setTimeout(g,100);var v=$("#sign-me-up").on("click",(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:$("#sign-up").offset().top},1e3),!1}));$(window).on("scroll",(function(){var e=$(window),t=$("#sign-up");v.data("show-on-load")?e.scrollTop()<$(".sell-page__theme-visualization").offset().top?v.slideDown():v.slideUp():t.length&&(e.scrollTop()>t.offset().top+t.height()?v.slideDown():v.slideUp())})).trigger("scroll")})),$((function(){if(!$(".static.search").length)return!1;var e=$("#refinement-container").data("limited-search");$("#refinement-container").on("click",".title",(function(e){return e.preventDefault(),$("#refinement-list").slideToggle(),$(this).find(".toggle .lc-icon").toggleClass("lc-icon-down lc-icon-up"),!1})),$(window).on("resize",(function(){$(window).width()>768&&$("#refinement-list").show()}));var t=$("#search-input"),n=instantsearch({appId:t.data("app-id"),apiKey:t.data("api-key"),indexName:"litcharts_things",urlSync:!0});n.addWidget(instantsearch.widgets.searchBox({container:"#search-input",reset:!1,magnifier:!1})),n.addWidget(instantsearch.widgets.pagination({container:"#pagination",maxPages:20}));var i=$("#hits"),o=function(t,n){if(n)return null;var i=t.hits;if(!i||!i.length){r.hide();var o="<p>There are no results for your search. <br /> If you're searching for something we don't cover, <a href='#' data-toggle='modal' data-target='#request-content-registration-modal .modal'>request it</a>!</p>";return $("#request-content-modal").length&&(o="<p>There are no results for your search. <br /> If you're searching for something we don't cover, <a href='#' data-toggle='modal' data-target='#request-content-modal'>request it</a>!</p>"),t.widgetParams.containerNode.html(o)}if(e){for(var s=[],l=[],c=0,d=i.length;c<d;c++)["Lit Guide","Lit Term","Shakescleare"].indexOf(i[c].category)>=0?s.push(i[c]):l.push(i[c]);i=s.concat(l)}var u=i.map((function(t){var n=t._highlightResult.primaryTitle.value;t.secondaryTitle&&(n=t._highlightResult.secondaryTitle.value+" > "+n);var i=t.category.toLowerCase().replace(/\W/g,"-").replace(/-+/g,"-");if(e&&["lit-guide","lit-term","shakescleare"].indexOf(i)<0)return'<div class="hit-item blurred"><div><span class="category blurred '+i+'">'+t.category+'</span> <span class="title blurred-text">Lorem Ipsum > Dolor Sit Amet</a></div><p class="blurb blurred-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam...</p></div>';var o=t.displayCategory||t.category;return'<div class="hit-item"><div><a href="'+t.path+'" class="category '+i+'">'+o+'</span> <a class="title" href="'+t.path+'">'+n+'</a></div><p class="blurb">'+t.blurb+"</p></div>"}));t.widgetParams.containerNode.html(u),a()},s=instantsearch.connectors.connectHits(o);n.addWidget(s({containerNode:i}));var r=$("#promo"),a=function(){if(!e)return null;var n=$(".hit-item.blurred");if(!n.length)return r.hide(),null;var o=i.offset().top+i.height(),s=n.first().offset().top,a=-(o-s),l=o-s-r.height();r.show().css({"margin-top":a,"margin-bottom":l<0?0:l}),r.find(".current-query").text(t.val())};e&&$(window).on("resize",a),t.on("keydown, keyup",(function(){r.find(".current-query").text($(this).val())})),r.find(".current-query").text(t.val());var l=$("#refinement-list"),c=$("#refinement-promo"),d=instantsearch.connectors.connectRefinementList((function(t){l.find(".refinement .count").text("0"),l.find(":checkbox").off("change.refinement"),e&&l.find(":checkbox").on("change.refinement",(function(e){return e.preventDefault(),c.show(),this.checked=!1,!1}));var n={};if(t.canRefine)for(var i,o=t.items,s=0,a=o.length;s<a;s++)i=o[s].label.toLowerCase().replace(/\W/g,"-").replace(/-+/g,"-"),n[i]=o[s];l.find(".refinement").each((function(){var i=$(this),o=n[i.data("label")];i.find(":checkbox").prop("checked",o&&o.isRefined),i.find(".count").text(o&&o.count||0),r.find("."+i.data("label")+" .current-count").text((o&&o.count||0).toLocaleString()),i.data("refine-value",o&&o.value),i.find(":checkbox").off("change.refinement").on("change.refinement",(function(n){if(n.stopPropagation(),n.preventDefault(),e)return c.show(),this.checked=!1,!1;t.refine($(this).parents(".refinement").data("refine-value"))}))}))}));c.on("click",".close",(function(e){e.preventDefault(),c.hide()}));var u=d({attributeName:"category",containerNode:"#refinement-list"});n.addWidget(u),n.start()})),$((function(){var e=$(".js-renewal-form");if(!e.length)return!1;var t=LitCharts.Payment;t.setupRenewalForm(e),t.processPaymentFlow=function(e){var t=e.form;e.begin();var n=null;if(e.validatePlan()||(n=n||t.find(".plans .errors")),e.validate()||(n=n||t.find(".payment-errors")),e.validateTerms()||(n=n||t.find('fieldset[data-pay-method]:visible [name="terms_checkbox"]')),n)return e.invalidate({scrollTo:n}),LitCharts.trackEvent("renewal debug","validation errors found"),!1;e.takePayment()};var n=function(e){return e.preventDefault(),t.createPaymentFlow(e).process(),!1};e.on("submit",n),t.showFormAndExternalControls(e)})),$((function(){if(!$(".summary-sections.show .view").length)return!1;var e=$(".themes-and-colors.key"),t=$(".summary-analysis"),n=$("#summary-quote-modal");n.length&&(n.modal({show:!1}),n.on("show.bs.modal",(function(e){var t=$(e.relatedTarget),i=t.attr("data-content"),o=n.find("a"),s=o.attr("data-original-href")+"?id="+t.attr("id");o.attr("href",s);var r=t.attr("data-section");n.find(".modal-title-data").text(r),n.find("#summary-quote-modal-content").html(i)})));var i={},o={};e.find(".theme").each((function(){var e=$(this),t=e.data("code-index");i[t]=$(),o[t]=e})),t.find(".active-themes .theme").each((function(){var e=$(this),t=e.data("code-index");i[t]=i[t].add(e.parents(".summary"))}));var s=function(e){return"theme-"+e+"-active-background"};e.on("click",".header",(function(){e.toggleClass("open");var t=e.hasClass("open"),n=$(this);n.find(".lc-icon").toggleClass("lc-icon-up lc-icon-down");var i=n.find(".icon");t&&i.reverse(),i.each((function(e){$(this).delay(20*e).fadeToggle(300)})),e.find(".subheader").slideToggle(),e.find(".content").slideToggle()})),e.on("mouseover",".theme",(function(){var e=$(this);if(e.hasClass("active"))return!0;var t=e.data("code-index"),n=s(t);e.addClass(n),i[t].addClass(n),i[t].addClass("hover")})).on("mouseout",".theme",(function(){var e=$(this);if(e.hasClass("active"))return!0;var t=e.data("code-index"),n=s(t);e.removeClass(n),i[t].removeClass(n),i[t].removeClass("hover")})).on("click",".theme",(function(){var t=e.find(".theme.active");if(t.length){var n=t.data("code-index"),o=s(n);t.removeClass(o),t.removeClass("active"),i[n].removeClass("active"),i[n].removeClass(o)}var r=$(this);if(t.is(r))return!0;n=r.data("code-index"),o=s(n);r.addClass("active"),r.addClass(o),i[n].addClass("active"),i[n].addClass(o)})),$(window.location.hash).addClass("highlighted")})),$((function(){var e=LitCharts.Payment;if(e.setupUpgradeForm(),!$(".registrations.edit").length&&!$(".registrations.update").length)return!1;var t=$(".update-card-modal.modal"),n=t.find(".js-cc-form"),i=function(e){if(e.error){n.find(".payment-errors").show().html("<ul><li>"+e.error.message+"</li></ul>");var i=t.find("button.form-submit");i.prop("disabled",!1).html(i.data("text"))}else{var o=e.token.id;n.append($('<input type="hidden" name="stripe_token">').val(o)),n.get(0).submit()}};n.length&&(e.setupUpdateCardForm(n),n.submit((function(){var e=t.find("button.form-submit");return e.prop("disabled",!0).html(e.data("text-submitting")+"..."),t.find("button.form-submit-cancel").prop("disabled",!0),LitCharts.stripe.createToken(n.data("stripeCard")).then(i),!1})));var o=$(".account-settings__profile-delete-data");o.on("click",".account-settings__profile-slide",(function(e){return e.preventDefault(),o.find(".account-settings__profile-delete-data-extra").slideToggle(),!1})),$('li[data-toggle="tab"]').on("show.bs.tab",(function(e){$(e.target).parent().find("li").removeClass("active"),$(e.target).addClass(".active"),$(".devise.layout").find(".lc-banner-success, .lc-banner-warning").hide()})),"true"===LitCharts.getWindowLocationParams().upgrade&&$("#upgrade-subscription").modal(),LitCharts.UserCancellation.bindToModal($(".unsubscribe-modal")),$('input[data-pay-method-target="paypal"]').on("click",(function(){$(".reactivation-modal button.form-submit").hide()})),$('input[data-pay-method-target="card"]').on("click",(function(){$(".reactivation-modal button.form-submit").show(),$(".paypal-authorized--visible").hide()}))})),jQuery.fn.reverse=[].reverse,helpers=window.LitChartsPack.helpers;
</script>

</body>
</html>
