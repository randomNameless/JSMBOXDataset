<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>scripts.db0ade8fd6f38bed.html</title>
</head>
<body>

<script>
(function(o){o.hibid=o.hibid||{},o.hibid.origConsoleLog=console.log,o.hibid.enableConsoleLog=function t(){return o.console.log=o.hibid.origConsoleLog,"enabled"},o.hibid.disableConsoleLog=function e(){return o.console.log=function(){},"disabled"}})(window),typeof global<"u"&&!global.window&&(global.window=global,global.document={cookie:""}),window.fm||(window.fm={});var __bind=function(o,t){return function(){return o.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(o,t){for(var e in t)__hasProp.call(t,e)&&(o[e]=t[e]);function n(){this.constructor=o}return n.prototype=t.prototype,o.prototype=new n,o.__super__=t.prototype,o},JSON;JSON||(JSON={}),function(){"use strict";function f(o){return o<10?"0"+o:o}"function"!=typeof Date.prototype.toJSONFM&&(Date.prototype.toJSONFM=function(o){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSONFM=Number.prototype.toJSONFM=Boolean.prototype.toJSONFM=function(o){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(o){return escapable.lastIndex=0,escapable.test(o)?'"'+o.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+o+'"'}function str(o,t){var e,n,s,r,a,i=gap,u=t[o];switch(u&&"object"==typeof u&&"function"==typeof u.toJSONFM&&(u=u.toJSONFM(o)),"function"==typeof rep&&(u=rep.call(t,o,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(r=u.length,e=0;e<r;e+=1)a[e]=str(e,u)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+i+"]":"["+a.join(",")+"]",gap=i,s}if(rep&&"object"==typeof rep)for(r=rep.length,e=0;e<r;e+=1)"string"==typeof rep[e]&&(s=str(n=rep[e],u))&&a.push(quote(n)+(gap?": ":":")+s);else for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(s=str(n,u))&&a.push(quote(n)+(gap?": ":":")+s);return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+i+"}":"{"+a.join(",")+"}",gap=i,s}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(o,t,e){var n;if(gap="",indent="","number"==typeof e)for(n=0;n<e;n+=1)indent+=" ";else"string"==typeof e&&(indent=e);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":o})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(o,t){var e,n,s=o[t];if(s&&"object"==typeof s)for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(void 0!==(n=walk(s,e))?s[e]=n:delete s[e]);return reviver.call(o,t,s)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(o){return"\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),fm.util=function(){function t(){}return t._xdCache={},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isPlainObject=function(e){var n;if(!e||"[object Object]"!==Object.prototype.toString.call(e)||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e,"constructor")&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}for(n in e);return void 0===n||Object.prototype.hasOwnProperty.call(e,n)},t.canAttachProperties=function(e,n){var s,r;for(s in n)if(!(r=e["set"+s.charAt(0).toUpperCase()+s.substring(1)])||"[object Function]"!==Object.prototype.toString.call(r))return!1;return!0},t.attachProperties=function(e,n){var s,i,a,u;for(s in u=[],n)a=n[s],i="set"+s.charAt(0).toUpperCase()+s.substring(1),u.push(e[i].call(e,a));return u},t.isIE=function(){return!!document.protocol},t.isIE6=function(){return t.isIE()&&!window.XMLHttpRequest},t.isIE7=function(){return t.isIE()&&window.XMLHttpRequest&&!document.implementation},t.isIE8=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isIE9=function(){return t.isIE()&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},t.isXD=function(e,n){var s,r,i,a;try{return n?(r=t.getHost(e),i=t.getHost(n),t.compareHost(r,i)):(t._xdCache[e]||(s=t.getHost(e),a=t.getHost(),t._xdCache[e]=t.compareHost(s,a)?"y":"n"),"y"===t._xdCache[e])}catch{return!1}},t.getHost=function(e){var n;return e&&(n=t.parseUrl(e)).protocol?n:t.getCurrentHost()},t.compareHost=function(e,n){return e.server!==n.server||(e.port||n.port)&&e.port!==n.port},t.getCurrentHost=function(){var e;return{protocol:(e=document.location).protocol,server:e.hostname,port:e.port}},t.parseUrl=function(e){var n;if((n=/(((http|ws)s?:)\/\/)?([\-\w\.\*]+)+(:(\d+))?(\/([^\?]*(\?\S+)?)?)?/i.exec(e)).length<6)throw new Error("Invalid URL ("+e+").");return{prefix:n[1],protocol:n[2],server:n[4],postfix:n[5],port:n[6],path:n[7]}},t.absolutizeUrl=function(e){var n,s,r;return e&&((r=t.parseUrl(e)).protocol?(-1===r.server.indexOf("*")||(e=r.prefix+t.wildcard(r.server),r.postfix&&(e+=r.postfix),r.path&&(e+=r.path)),e):(n=(s=document.location).protocol+"//"+s.host,"/"===e.charAt(0)?n+e:n+s.pathname.substring(0,s.pathname.lastIndexOf("/")+1)+e))},t.wildcard=function(e){return e.replace("*",t.getWildcard())},t._chars="abcdefghijklmnopqrstuvwxyz",t.getWildcard=function(){return t._wildcard||(t._wildcard=t.randomChar(t._chars)),t._wildcard},t.randomChar=function(e){return e&&e.charAt(Math.floor(Math.random()*e.length))},t.observe=function(e,n,s){return e.addEventListener?e.addEventListener(n,s,!1):e.attachEvent?e.attachEvent("on"+n,s):e["on"+n]=s},t.unobserve=function(e,n,s){return e.removeEventListener?e.removeEventListener(n,s,!1):e.detachEvent("on"+n,s)},t.extend=function(e,n){var s;for(s in n)e[s]=n[s];return e},t.logging=!0,t.log=function(e){var n;if(t.logging)return document.body?(t._logContainer||((t._logContainer=document.createElement("div")).className="fm-log",t._logContainer.style.position="absolute",t._logContainer.style.zIndex=99999,t._logContainer.style.right="5px",t._logContainer.style.top="5px",document.body.appendChild(t._logContainer)),(n=document.createElement("div")).innerHTML=e,t._logContainer.appendChild(n)):void t.addOnLoad(function(){return t.log(e)})},t._loadFunctions=[],t.addOnLoad=function(e){return t._readyRun?window.setTimeout(e,1):t._loadFunctions.push(e)},t.ready=function(){if(!t._readyRun)return t._readyRun=!0,window.setTimeout(function(){var n,s,r,i;for(i=[],n=0,s=(r=t._loadFunctions).length;n<s;n++)i.push((0,r[n])());return i},1)},t.bindReady=function(){var e;if(!t._readyBound){if(t._readyBound=!0,document.addEventListener)return document.addEventListener("DOMContentLoaded",function(){return document.removeEventListener("DOMContentLoaded",arguments.callee,!1),t.ready()},!1);if(!document.attachEvent)return t.ready();document.attachEvent("onreadystatechange",function(){if("complete"===document.readyState)return document.detachEvent("onreadystatechange",arguments.callee),t.ready()});try{e=null===window.frameElement}catch{}if(document.documentElement.doScroll&&e)return function(){if(!t._loaded){try{document.documentElement.doScroll("left")}catch{return void window.setTimeout(arguments.callee,0)}return t.ready()}}()}},t._loaded||t.addOnLoad(function(){return t._loaded=!0}),t.bindReady(),t}.call(this),fm.object=function o(){},fm.global=function(){function o(){}return o.tryCast=function(t,e){return!t||t instanceof e?t:null},o.tryCastArray=function(t){return!t||t instanceof Array?t:null},o.tryCastObject=function(t){return!t||t instanceof Object?t:null},o.tryCastString=function(t){if(!t||"string"==typeof t)return t},o.tryCastInt=function(t){return t&&isNaN(parseInt(t))?null:t},o.tryCastFloat=function(t){return t&&isNaN(parseFloat(t))?null:t},o}.call(this),fm.stringComparison={CurrentCulture:0,CurrentCultureIgnoreCase:1,InvariantCulture:2,InvariantCultureIgnoreCase:3,Ordinal:4,OrdinalIgnoreCase:5};var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.dateTime=function(){function o(){if(this.getSecond=__bind(this.getSecond,this),this.getMinute=__bind(this.getMinute,this),this.getHour=__bind(this.getHour,this),this.getDay=__bind(this.getDay,this),this.getMonth=__bind(this.getMonth,this),this.getYear=__bind(this.getYear,this),this.toUniversalTime=__bind(this.toUniversalTime,this),this.getTicks=__bind(this.getTicks,this),1===arguments.length)this._date=arguments[0];else{if(6!==arguments.length)throw new Error("Unknown argument set.");this._date=new Date(Date.UTC(arguments[0],arguments[1]-1,arguments[2],arguments[3],arguments[4],arguments[5]))}}return o.getNow=function(){return new fm.dateTime(new Date)},o.getUtcNow=function(){return new fm.dateTime(new Date)},o.prototype.getTicks=function(){return 621355968e9+1e4*this._date.getTime()},o.prototype.toUniversalTime=function(){return new fm.dateTime(this._date)},o.prototype.getYear=function(){return this._date.getUTCFullYear()},o.prototype.getMonth=function(){return this._date.getUTCMonth()+1},o.prototype.getDay=function(){return this._date.getUTCDate()},o.prototype.getHour=function(){return this._date.getUTCHours()},o.prototype.getMinute=function(){return this._date.getUTCMinutes()},o.prototype.getSecond=function(){return this._date.getUTCSeconds()},o}.call(this);var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.nameValueCollection=function(){function o(){var t,n;if(this.getAllKeys=__bind(this.getAllKeys,this),this.getKeys=__bind(this.getKeys,this),this._value={},1===arguments.length)for(t in n=arguments[0])this._value[t]=n[t]}return o.prototype.source=function(){return this._value},o.prototype.get=function(t){var e;for(e in this._value)if(e.toLowerCase()===t.toLowerCase())return this._value[e];return null},o.prototype.set=function(t,e){var n;for(n in this._value)if(n.toLowerCase()===t.toLowerCase())return void(this._value[n]=e);return this._value[t]=e},o.prototype.getCount=function(){var t,e;for(e in t=0,this._value)t++;return t},o.prototype.toHash=function(){return this._value},o.prototype.getKeys=function(){return this.getAllKeys()},o.prototype.getAllKeys=function(){var t,e;for(t in e=[],this._value)e.push(t);return e},o}(),fm.stringBuilder=function(){function o(){this._value="",1===arguments.length&&(this._value=arguments[0])}return o.prototype.append=function(t){return this._value=this._value+t,this},o.prototype.toString=function(){return this._value},o.prototype.getLength=function(){return this._value.length},o.prototype.remove=function(t,e){return this._value=this._value.substring(0,t)+this._value.substring(t+e),this},o}(),fm.uri=function(){function o(){}return o.tryCreate=function(t,e,n){return n.setValue(t),!0},o.tryCreate=function(t,e,n){return-1===t.indexOf("/",t.length-1)&&(t+="/"),0===e.indexOf("/")&&(e=e.substring(1)),n.setValue(t+e),!0},o.escapeDataString=function(t){return encodeURIComponent(t)},o}(),fm.guid=function(){function o(){this._guid=0===arguments.length?"00000000-0000-0000-0000-000000000000":arguments[0]}return o.prototype.equals=function(t){return!!t&&t.toString()===this._guid},o.prototype.toString=function(){return this._guid},o.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e;return e=16*Math.random()|0,("x"===t?e:3&e|8).toString(16)})},o.empty=new o,o}.call(this),fm.holder=function(){function o(t){this._value=t}return o.prototype.getValue=function(){return this._value},o.prototype.setValue=function(t){return this._value=t},o}(),fm.interlocked=function(){function o(){}return o.increment=function(t){var e;return e=t.getValue(),e++,t.setValue(e),e},o.compareExchange=function(t,e,n){var s;return(s=t.getValue())===n&&t.setValue(e),s},o}(),fm.delegate=function(){function o(){}return o.combine=function(t,e){var n,r,i,a,u,c,l,h,g;if(!t)return e;if(!e)return t;if(i=this,n=[],r=function(){var m,_,d;for(d=[],m=0,_=n.length;m<_;m++)d.push(n[m].apply(i,arguments));return d},t._chain)for(a=0,c=(h=t._chain).length;a<c;a++)n.push(h[a]);else n.push(t);if(e._chain)for(u=0,l=(g=e._chain).length;u<l;u++)n.push(g[u]);else n.push(e);return r._chain=n,r},o.remove=function(t,e){var s,r,i,a;if(!t||t===e)return null;if(t._chain)for(s=r=0,i=(a=t._chain).length;r<i;s=++r)if(a[s]===e){t._chain.splice(s,1);break}return t},o}();var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.stack=function(){function o(){this.peek=__bind(this.peek,this),this.pop=__bind(this.pop,this),this.push=__bind(this.push,this),this._list=[]}return o.prototype.push=function(t){return this._list.push(t)},o.prototype.pop=function(t){return this._list.pop()},o.prototype.peek=function(){return 0===this._list.length?null:this._list[this._list.length-1]},o}();var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.thread=function(){function o(){this.getManagedThreadId=__bind(this.getManagedThreadId,this),this._id=++fm.thread._lastThreadId}return o._lastThreadId=0,o.prototype.getManagedThreadId=function(){return this._id},o.getCurrentThread=function(){return o._thread||(o._thread=new fm.thread),o._thread},o}.call(this),fm.deferrer=function(){function o(){}return o.defer=function(t,e,n){return window.setTimeout(function(){return t(n)},e)},o}(),fm.dateTimeStyles={AssumeUniversal:1,AdjustToUniversal:2},fm.dateTimeFormatInfo=function(){function o(){}return o.getInvariantInfo=function(){return new fm.dateTimeFormatInfo},o}.call(this),fm.convert=function(){function o(){}return o.toInt32=function(t){return t.charCodeAt()},o}.call(this),fm.parseAssistant=function(){function o(){}return o.tryParseInteger=function(t,e){return!isNaN(parseInt(t))&&(e.setValue(parseInt(t)),!0)},o.tryParseLong=function(t,e){return!isNaN(parseInt(t))&&(e.setValue(parseInt(t)),!0)},o.tryParseFloat=function(t,e){return!isNaN(parseFloat(t))&&(e.setValue(parseFloat(t)),!0)},o.tryParseDouble=function(t,e){return!isNaN(parseFloat(t))&&(e.setValue(parseFloat(t)),!0)},o.tryParseDecimal=function(t,e){return!isNaN(parseFloat(t))&&(e.setValue(parseFloat(t)),!0)},o.tryParseBoolean=function(t,e){return"true"===t.toLowerCase()||"y"===t.toLowerCase()||"1"===t?e.setValue(!0):e.setValue(!1),!0},o.tryParseGuid=function(t,e){return!!/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/i.test(t)&&(e.setValue(new fm.guid(t)),!0)},o}.call(this),fm.stringExtensions=function(){function o(){}return o.empty="",o.concat=function(t){var e,s,r;for(e=new fm.stringBuilder,s=0,r=t.length;s<r;s++)e.append(t[s]);return e.toString()},o.toString=function(){return arguments[0]},o.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},o.concat=function(){var t,n,s,r,i,a;if(t="",1===arguments.length&&fm.util.isArray(arguments[0]))for(n=0,r=(a=arguments[0]).length;n<r;n++)t+=a[n];else for(s=0,i=arguments.length;s<i;s++)t+=arguments[s];return t},o.join=function(t,e){var n,s,r,i,a;for(s=new fm.stringBuilder,n=i=0,a=e.length;i<a;n=++i)r=e[n],n>0&&s.append(t),s.append(r);return s.toString()},o.split=function(t,e){var s,r,i,a,u,c,l;for(r=[],i=0,s=a=0,l=t.length-1;0<=l?a<=l:a>=l;s=0<=l?++a:--a)for(u=0,c=e.length;u<c;u++)e[u]===t.charAt(s)&&(r.push(t.substring(i,s)),i=s+1);return r.push(t.substring(i,t.length)),r},o.isNullOrEmpty=function(t){return null===t||""===t},o.indexOf=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&((n=arguments[2])===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?e.toLowerCase().indexOf(t.toLowerCase()):e.indexOf(t)},o.startsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&((n=arguments[2])===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?0===e.toLowerCase().indexOf(t.toLowerCase()):0===e.indexOf(t)},o.endsWith=function(){var t,e,n;return e=arguments[0],t=arguments[1],arguments.length>2&&((n=arguments[2])===fm.stringComparison.CurrentCultureIgnoreCase||n===fm.stringComparison.InvariantCultureIgnoreCase||n===fm.stringComparison.OrdinalIgnoreCase)?-1!==e.toLowerCase().indexOf(t.toLowerCase(),e.length-t.length):-1!==e.indexOf(t,e.length-t.length)},o.compareTo=function(){var t,e;return e=arguments[1],(t=arguments[0]).toString()<e.toString()?-1:t.toString()>e.toString()?1:0},o.format=function(){var t,e,s,r,i;for(e=arguments[0],t=[],s=r=1,i=arguments.length-1;1<=i?r<=i:r>=i;s=1<=i?++r:--r)t.push(arguments[s]?arguments[s]:"");return e.replace(/{(\d+)}/g,function(a,u){return null!=t[u]?t[u]:a})},o.toLower=function(){return arguments[0].toLowerCase()},o.getLength=function(){return arguments[0].length},o.getChars=function(t){var e,n,s,r;for(e=[],n=s=0,r=t.length-1;0<=r?s<=r:s>=r;n=0<=r?++s:--s)e.push(t[n]);return new e},o.substring=function(t,e,n){return t.substring(e,e+n)},o}.call(this),fm.arrayExtensions=function(){function o(){}return o.getCount=function(t){return t.length},o.add=function(t,e){return t.push(e)},o.remove=function(t,e){var n,r,i;for(n=r=0,i=t.length;r<i;n=++r)if(t[n]===e)return t.splice(n,1),!0;return!1},o.toArray=function(t){return t},o.clear=function(t){return t.splice(0,t.length)},o.addRange=function(t,e){var s,r,i;for(i=[],s=0,r=e.length;s<r;s++)i.push(t.push(e[s]));return i},o.contains=function(t,e){var s,r;for(s=0,r=t.length;s<r;s++)if(t[s]===e)return!0;return!1},o}.call(this),fm.hashExtensions=function(){function o(){}return o.getCount=function(t){var e,n;for(n in e=0,t)e++;return e},o.getKeys=function(t){var e,n;for(e in n=[],t)n.push(e);return n},o.getValues=function(t){var e,s;for(e in s=[],t)s.push(t[e]);return s},o.tryGetValue=function(t,e,n){return!!o.containsKey(t,e)&&(n.setValue(t[e]),!0)},o.containsKey=function(t,e){return e in t},o.containsValue=function(t,e){var n;for(n in t)if(t[n]===e)return!0;return!1},o.add=function(t,e,n){return t[e]=n},o.remove=function(t,e){return delete t[e]},o.clear=function(t){var e,n;for(e in n=[],t)n.push(delete t[e]);return n},o}.call(this),fm.intExtensions=function(){function o(){}return o.toString=function(){return arguments[0].toString()},o}(),fm.xhr=function(){function t(){}return t._count=0,t._current={},fm.util.observe(window,"unload",function(){var e,n,s;for(e in s=t._current){n=s[e];try{n._abortingOnUnload=!0,n.abort()}catch{}}}),t.failureHandler=function(e,n){if(e.onFailure)return e.onFailure({message:n})},t.successHandler=function(e,n){var s,r,a,u,c,l,h,g;if(e.onSuccess){if(r={},s=n.getAllResponseHeaders()){for(l=0,h=(g=s.split(/\r?\n/)).length;l<h;l++)2===(u=g[l].split(":")).length&&(a=u[0].replace(/\s+$/,""),c=u[1].replace(/^\s+/,""),r[a]=c);return e.onSuccess({content:n.responseText,statusCode:n.status,headers:r})}return e.onSuccess({content:n.responseText,statusCode:n.status,headers:{}})}},t.handler=function(e,n){return n._aborting?t.failureHandler(e,"XHR request timed out."):(e.onResponseReceived&&e.onResponseReceived(n),t.successHandler(e,n))},t.send=function(e){var n,s,r,i,a,u,c;e=fm.util.extend({sync:!1,url:"",method:"POST",content:null,headers:{},timeout:15e3,abortOnUnload:!1,cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},e||{});try{if(window.XMLHttpRequest)a=new XMLHttpRequest;else{try{a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch{}if(!a)try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch{}}if(!a)return!1;for(s in r=(r=e.url)+(-1===r.indexOf("?")?"?":"&")+e.cacheBusterParameterName+"="+(new Date).getTime(),a.open(e.method,r,!e.sync),c=e.headers)i=c[s],"referer"!==s.toLowerCase()&&"origin"!==s.toLowerCase()&&a.setRequestHeader(s,i);return"withCredentials"in a&&(a.withCredentials=!0),e.onRequestCreated&&e.onRequestCreated(a),e.abortOnUnload&&(n=++t._count,t._current[n]=a),e.sync||(a.onreadystatechange=function(){if(a.readyState>3&&!a._abortingOnUnload){clearTimeout(u);try{a.onreadystatechange=null}catch{a.onreadystatechange=function(){}}if(a.status>0?t.handler(e,a):t.failureHandler(e,"Invalid XHR response."),e.abortOnUnload)return delete t._current[n]}}),e.content?a.send(e.content):a.send(),u=window.setTimeout(function(){try{return a._aborting=!0,a.abort()}catch{}},e.timeout),e.sync&&(t.handler(e,a),e.abortOnUnload&&delete t._xhrCurrent[n]),!0}catch(l){return t.failureHandler(e,"XHR request failed. "+(l.message||l.error||l.description||l))}},t}.call(this),fm.postMessage=function(){function o(){}return o._cache={},o.createFrame=function(t,e){var s,r,i,a;return(a=o._cache[t.frameUrl])?a.frame.loading?a.callbacks.push(e):window.setTimeout(function(){return e(a.frame.loaded?a.frame:null)},1):((r=document.createElement("iframe")).style.display="none",document.body.appendChild(r),o._cache[t.frameUrl]=a={frame:r,callbacks:s=[e]},i=window.setTimeout(function(){var u;for(r.loading=!1,r.loaded=!1,r.timedOut=!0,u=[];s.length>0;)u.push(s.shift()(null));return u},t.timeout),r.loading=!0,fm.util.observe(r,"load",function(){var u,c;if(!r.timedOut)return clearTimeout(i),c=function(l){if(l.source===r.contentWindow&&"pong"===l.data){if(r.timedOut)return;for(clearTimeout(u),r.loading=!1,r.loaded=!0,r.timedOut=!1,o.listen(t,r);s.length>0;)s.shift()(r);return fm.util.unobserve(window,"message",c)}},u=window.setTimeout(function(){for(r.loading=!1,r.loaded=!1,r.timedOut=!0;s.length>0;)s.shift()(null);if(c)return fm.util.unobserve(window,"message",c)},500),fm.util.observe(window,"message",c),r.contentWindow.postMessage("ping",o.getOrigin(t.url))}),r.src=fm.httpTransfer.addQueryToUrl(t.frameUrl,"type","pmf"))},o._optionsCounter=0,o._optionsCache={},o.getOrigin=function(t){return/\w+:\/\/[^/]+/.exec(t)[0]},o.send=function(t){return t=fm.util.extend({url:"",onFailure:function(){},onSuccess:function(){},onRequestCreated:function(){},onResponseReceived:function(){}},t||{}),o.createFrame(t,function(e){return e?(t.id=++o._optionsCounter,o._optionsCache[t.id]=t,e.contentWindow.postMessage(fm.json.serialize(t),o.getOrigin(t.url))):t.onFailure?t.onFailure({message:"Could not initialize postMessage frame."}):void 0})},o.listen=function(t,e){return fm.util.observe(window,"message",function(n){if(n.source===e.contentWindow){try{n=fm.json.deserialize(n.data)}catch{return}if(!n.id||!(t=o._optionsCache[n.id]))return;if((1===n.type||2===n.type)&&delete o._optionsCache[n.id],1===n.type){if(t.onFailure)return t.onFailure(n)}else if(2===n.type){if(t.onSuccess)return t.onSuccess(n)}else if(3===n.type){if(t.onRequestCreated)return t.onRequestCreated(null)}else if(4===n.type&&t.onResponseReceived)return t.onResponseReceived(null)}})},o}.call(this),fm.jsonp=function(){function o(){}return o.send=function(t){},o._scriptFrame=null,o._scriptFrameLoaded=!1,o._callbackCount=0,o._cb={},o._pastScriptFrames=[],o._scriptFrameDestroyer=null,o.maxUrlLength=2048,o.getNextCallback=function(t){var e,n;return e="cb"+o._callbackCount++,n="fm.jsonp._cb.",o._cb[e]=function(s){var r;try{if(t.onResponseReceived&&t.onResponseReceived(null),t.onSuccess)return t.robustResponse?((r=s[t.contentParameterName])?"string"!=typeof r&&(r=fm.json.serialize(r)):r="",t.onSuccess({content:r,statusCode:s[t.statusCodeParameterName]||200,headers:s[t.headersParameterName]||{}})):((r=s)?"string"!=typeof r&&(r=fm.json.serialize(r)):r="",t.onSuccess({content:r,statusCode:200,headers:{}}))}catch(i){throw i}finally{o.cleanup((t.useFrame?"parent.":"")+n+e,t.useFrame)}},(t.useFrame?"parent.":"")+n+e},o.failureHandler=function(t,e,n){return t.onFailure&&t.onFailure({message:n}),o.cleanup(e,t.useFrame)},o.send=function(t){var e,n,s,r,i;try{if((t=fm.util.extend({url:"",method:"POST",content:null,headers:{},timeout:15e3,canSegmentJsonArray:!1,robustResponse:!1,callbackParameterName:"jsonp",contentParameterName:"content",methodParameterName:"method",headersParameterName:"headers",statusCodeParameterName:"statusCode",cacheBusterParameterName:"_cb",onRequestCreated:function(){},onResponseReceived:function(){},onFailure:function(){},onSuccess:function(){}},t||{})).useFrame=!0,e=o.getNextCallback(t),t.useFrame&&(o._scriptFrameDestroyer||(o._scriptFrameDestroyer=window.setInterval(function(){var u,c,l;if(null!==o._scriptFrame&&(o._pastScriptFrames.push(o._scriptFrame),o._scriptFrame=null,o._scriptFrameLoaded=!1,2===o._pastScriptFrames.length)){for(u=0,c=(l=o._pastScriptFrames[0]).length;u<c;u++)delete o._pastScriptFrames[0][l[u]];return document.body.removeChild(o._pastScriptFrames[0]),o._pastScriptFrames.splice(0,1)}},3e5))),n=document.getElementsByTagName("head")[0],t.useFrame){if(o._scriptFrame||((o._scriptFrame=document.createElement("iframe")).style.display="none",o._scriptFrame.src="ignore_this_404.htm",document.body.appendChild(o._scriptFrame)),!(s=o._scriptFrame.contentWindow.document))throw"Could not create script frame.";r=s.createElement("script")}else r=document.createElement("script");if(r.type="text/javascript",r.charset="utf-8",r.id=e,i=t.url,i=fm.httpTransfer.addQueryToUrl(i,t.methodParameterName,t.method),i=fm.httpTransfer.addQueryToUrl(i,t.headersParameterName,fm.json.serialize(t.headers)),i=fm.httpTransfer.addQueryToUrl(i,t.callbackParameterName,e),i=fm.httpTransfer.addQueryToUrl(i,t.cacheBusterParameterName,(new Date).getTime()),(i=fm.httpTransfer.addQueryToUrl(i,t.contentParameterName,t.content)).length>o.maxUrlLength&&alert("URL length "+i.length+" exceeds maximum for JSON-P ("+o.maxUrlLength+")."),r.src=i,t.onRequestCreated&&t.onRequestCreated(null),window.setTimeout(function(){if(o.callbackExists(e))return o.failureHandler(t,e,"JSONP request timed out.")},t.timeout),!t.useFrame)return n.appendChild(r);if(!o._scriptFrameLoaded)return fm.util.observe(o._scriptFrame,"load",function(){return window.setTimeout(function(){try{return(n=o._scriptFrame.contentWindow.document.body).appendChild(r)}catch{return o.failureHandler(t,e,"JSONP request failed. Could not access script frame.")}},10),o._scriptFrameLoaded=!0});try{return(n=o._scriptFrame.contentWindow.document.body).appendChild(r)}catch{return o.failureHandler(t,e,"JSONP request failed. Could not access script frame.")}}catch(a){return o.failureHandler(t,e,"JSONP request failed. "+(a.message||a.error||a.description||a))}},o.cleanup=function(t,e){var n,s,r,i,a,u,c,l;i=t.split("."),o._cb[r=i[i.length-1]]=null,delete o._cb[r];try{if(e){for(u=o._pastScriptFrames.concat([]),null!==o._scriptFrame&&u.push(o._scriptFrame),s=c=l=u.length-1;(l<=0?c<=0:c>=0)&&((n=u[s].contentWindow.document)&&(a=n.getElementById(t)),!a);s=l<=0?++c:--c);if(a)return n.body.removeChild(a)}else if(a=document.getElementById(t))return document.getElementsByTagName("head")[0].removeChild(a)}catch(h){if(window&&window.console&&window.console.error)return window.console.error("Could not remove script element. "+(h.message||h.error||h.description||h))}},o.callbackExists=function(t){var n;return(n=t.split("."))[n.length-1]in o._cb},o}.call(this),fm.json=function(){function o(){}return o.useMicrosoftDateFormat=!0,o._dateRegex=/\/Date\((\d+[\-|\+]?\d{0,4})\)\//,o._reviver=function(t,e){var n,s,r,i;return e&&"string"==typeof e&&o._dateRegex.test(e)?(n=(i=e.match(o._dateRegex)[1]).indexOf("-")>-1?"-":"+",s=i.split(n),r=parseInt(s[0],10),new Date(r)):e},Date.prototype.toJSONFM=function(t){return isFinite(this.valueOf())?"/Date("+this.getTime()+"-0000)/":null},o.deserialize=function(){return 0===arguments.length||null===arguments[0]||""===arguments[0]?null:o.useMicrosoftDateFormat?JSON.parse(arguments[0],o._reviver):JSON.parse.apply(o,arguments)},o.serialize=function(){var t,e,n,s,r;return o.useMicrosoftDateFormat?(e=Date.prototype.toJSON,r=String.prototype.toJSON,s=Number.prototype.toJSON,t=Boolean.prototype.toJSON,Date.prototype.toJSON=Date.prototype.toJSONFM,String.prototype.toJSON=String.prototype.toJSONFM,Number.prototype.toJSON=Number.prototype.toJSONFM,Boolean.prototype.toJSON=Boolean.prototype.toJSONFM,n=JSON.stringify.apply(o,arguments).replace(/\//g,"\\/"),Date.prototype.toJSON=e,String.prototype.toJSON=r,Number.prototype.toJSON=s,Boolean.prototype.toJSON=t,n):JSON.stringify.apply(o,arguments)},o}.call(this),fm.asyncException=function(){function o(){}return o.asyncThrow=function(t){return window.setTimeout(function(){throw t},1)},o}.call(this);var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.timeoutTimer=function(){function o(){this._timerCallback=__bind(this._timerCallback,this),this.stop=__bind(this.stop,this),this.start=__bind(this.start,this)}return o.prototype._timer=null,o.prototype._callback=null,o.prototype._state=null,o.prototype.start=function(t,e,n){if(this._timer)throw new Error("Timer is currently active.");return this._callback=e,this._state=n,this._timer=setTimeout(this._timerCallback,t)},o.prototype.stop=function(){return!!this._timer&&(clearTimeout(this._timer),this._timer=null,!0)},o.prototype._timerCallback=function(){if(this.stop()&&this._callback)return this._callback(this._state)},o}(),fm.httpMethod={Get:1,Head:2,Post:3,Put:4,Patch:5,Delete:6},fm.backoffMode={Additive:1,Constant:2,None:3},fm.jsonCheckerMode={Array:1,Done:2,Key:3,Object:4,String:5},fm.logLevel={Debug:1,Info:2,Warn:3,Error:4,Fatal:5},fm.stringType={None:1,Single:2,Double:3},fm.serializable=function(o){function t(){if(this.setSerialized=__bind(this.setSerialized,this),this.setIsSerialized=__bind(this.setIsSerialized,this),this.setIsDirty=__bind(this.setIsDirty,this),this.getSerialized=__bind(this.getSerialized,this),this.getIsSerialized=__bind(this.getIsSerialized,this),this.getIsDirty=__bind(this.getIsDirty,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setIsSerialized(!1),this.setIsDirty(!1),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setIsSerialized(!1),this.setIsDirty(!1)}return __extends(t,o),t.prototype.__serialized=null,t.prototype._isDirty=!1,t.prototype._isSerialized=!1,t.prototype.getIsDirty=function(){return this._isDirty},t.prototype.getIsSerialized=function(){return this._isSerialized},t.prototype.getSerialized=function(){return this.__serialized},t.prototype.setIsDirty=function(){return this._isDirty=arguments[0]},t.prototype.setIsSerialized=function(){return this._isSerialized=arguments[0]},t.prototype.setSerialized=function(){return this.__serialized=arguments[0],this.setIsSerialized(!0),this.setIsDirty(!1)},t}(fm.object),fm.dynamic=function(o){function t(){if(this.unsetDynamicValue=__bind(this.unsetDynamicValue,this),this.setDynamicValue=__bind(this.setDynamicValue,this),this.setDynamicProperties=__bind(this.setDynamicProperties,this),this.getDynamicValue=__bind(this.getDynamicValue,this),this.getDynamicProperties=__bind(this.getDynamicProperties,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.__dynamicProperties={},void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.__dynamicProperties={}}return __extends(t,o),t.prototype.__dynamicProperties=null,t.prototype.getDynamicProperties=function(){return this.__dynamicProperties},t.prototype.getDynamicValue=function(){var e,n,s,r;return e=arguments[0],n=null,s=new fm.holder(n),r=fm.hashExtensions.tryGetValue(this.getDynamicProperties(),e,s),n=s.getValue(),r?n:null},t.prototype.setDynamicProperties=function(){return this.__dynamicProperties=arguments[0]??{}},t.prototype.setDynamicValue=function(){var e,n;return e=arguments[0],n=arguments[1],this.getDynamicProperties()[e]=n},t.prototype.unsetDynamicValue=function(){var e;return e=arguments[0],fm.hashExtensions.remove(this.getDynamicProperties(),e)},t}(fm.serializable),fm.httpResponseReceivedArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setResponse=__bind(this.setResponse,this),this.setRequestArgs=__bind(this.setRequestArgs,this),this.getSender=__bind(this.getSender,this),this.getResponse=__bind(this.getResponse,this),this.getRequestArgs=__bind(this.getRequestArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requestArgs=null,t.prototype._response=null,t.prototype._sender=null,t.prototype.getRequestArgs=function(){return this._requestArgs},t.prototype.getResponse=function(){return this._response},t.prototype.getSender=function(){return this._sender},t.prototype.setRequestArgs=function(){return this._requestArgs=arguments[0]},t.prototype.setResponse=function(){return this._response=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.callbackState=function(o){function t(){var e,n;if(this.setState=__bind(this.setState,this),this.setCallback=__bind(this.setCallback,this),this.getState=__bind(this.getState,this),this.getCallback=__bind(this.getCallback,this),this.execute=__bind(this.execute,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],n=arguments[1],t.__super__.constructor.call(this),this.setCallback(e),this.setState(n)}return __extends(t,o),t.prototype._callback=null,t.prototype._state=null,t.prototype.execute=function(){var e;if(null!==(e=this.getCallback())&&typeof e<"u")return this.getCallback()(this.getState())},t.prototype.getCallback=function(){return this._callback},t.prototype.getState=function(){return this._state},t.prototype.setCallback=function(){return this._callback=arguments[0]},t.prototype.setState=function(){return this._state=arguments[0]},t}(fm.object),fm.logProvider=function(o){function t(){if(this.warnFormat=__bind(this.warnFormat,this),this.warn=__bind(this.warn,this),this.log=__bind(this.log,this),this.isEnabled=__bind(this.isEnabled,this),this.infoFormat=__bind(this.infoFormat,this),this.info=__bind(this.info,this),this.getIsWarnEnabled=__bind(this.getIsWarnEnabled,this),this.getIsInfoEnabled=__bind(this.getIsInfoEnabled,this),this.getIsFatalEnabled=__bind(this.getIsFatalEnabled,this),this.getIsErrorEnabled=__bind(this.getIsErrorEnabled,this),this.getIsDebugEnabled=__bind(this.getIsDebugEnabled,this),this.fatalFormat=__bind(this.fatalFormat,this),this.fatal=__bind(this.fatal,this),this.errorFormat=__bind(this.errorFormat,this),this.error=__bind(this.error,this),this.debugFormat=__bind(this.debugFormat,this),this.debug=__bind(this.debug,this),this._log=__bind(this._log,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._log=function(){var e,n,s;if(3===arguments.length)return s=arguments[1],e=arguments[2],void(this.isEnabled(n=arguments[0])&&this.log(n,s,e));2===arguments.length&&(s=arguments[1],this.isEnabled(n=arguments[0])&&this.log(n,s))},t.prototype.debug=function(){var n;if(2===arguments.length)return n=arguments[0],void this._log(fm.logLevel.Debug,n,arguments[1]);1===arguments.length&&(n=arguments[0],this._log(fm.logLevel.Debug,n))},t.prototype.debugFormat=function(){return this.debug(fm.stringExtensions.format(arguments[0],arguments[1]))},t.prototype.error=function(){var n;if(1===arguments.length)return n=arguments[0],void this._log(fm.logLevel.Error,n);2===arguments.length&&(n=arguments[0],this._log(fm.logLevel.Error,n,arguments[1]))},t.prototype.errorFormat=function(){return this.error(fm.stringExtensions.format(arguments[0],arguments[1]))},t.prototype.fatal=function(){var n;if(1===arguments.length)return n=arguments[0],void this._log(fm.logLevel.Fatal,n);2===arguments.length&&(n=arguments[0],this._log(fm.logLevel.Fatal,n,arguments[1]))},t.prototype.fatalFormat=function(){return this.fatal(fm.stringExtensions.format(arguments[0],arguments[1]))},t.prototype.getIsDebugEnabled=function(){return this.isEnabled(fm.logLevel.Debug)},t.prototype.getIsErrorEnabled=function(){return this.isEnabled(fm.logLevel.Error)},t.prototype.getIsFatalEnabled=function(){return this.isEnabled(fm.logLevel.Fatal)},t.prototype.getIsInfoEnabled=function(){return this.isEnabled(fm.logLevel.Info)},t.prototype.getIsWarnEnabled=function(){return this.isEnabled(fm.logLevel.Warn)},t.prototype.info=function(){var n;if(1===arguments.length)return n=arguments[0],void this._log(fm.logLevel.Info,n);2===arguments.length&&(n=arguments[0],this._log(fm.logLevel.Info,n,arguments[1]))},t.prototype.infoFormat=function(){return this.info(fm.stringExtensions.format(arguments[0],arguments[1]))},t.prototype.isEnabled=function(){return arguments[0]},t.prototype.log=function(){},t.prototype.warn=function(){var n;if(2===arguments.length)return n=arguments[0],void this._log(fm.logLevel.Warn,n,arguments[1]);1===arguments.length&&(n=arguments[0],this._log(fm.logLevel.Warn,n))},t.prototype.warnFormat=function(){return this.warn(fm.stringExtensions.format(arguments[0],arguments[1]))},t}(fm.object),fm.httpRequestArgs=function(o){function t(){if(this.setUrl=__bind(this.setUrl,this),this.setTimeout=__bind(this.setTimeout,this),this.setTextContent=__bind(this.setTextContent,this),this.setSender=__bind(this.setSender,this),this.setOnResponseReceived=__bind(this.setOnResponseReceived,this),this.setOnRequestCreated=__bind(this.setOnRequestCreated,this),this.setMethod=__bind(this.setMethod,this),this.setHeaders=__bind(this.setHeaders,this),this.setBinaryContent=__bind(this.setBinaryContent,this),this.getUrl=__bind(this.getUrl,this),this.getTimeout=__bind(this.getTimeout,this),this.getTextContent=__bind(this.getTextContent,this),this.getSender=__bind(this.getSender,this),this.getOnResponseReceived=__bind(this.getOnResponseReceived,this),this.getOnRequestCreated=__bind(this.getOnRequestCreated,this),this.getMethod=__bind(this.getMethod,this),this.getHeaders=__bind(this.getHeaders,this),this.getBinaryContent=__bind(this.getBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),this.setHeaders(new fm.nameValueCollection),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setTimeout(15e3),this.setMethod(fm.httpMethod.Post),this.setHeaders(new fm.nameValueCollection)}return __extends(t,o),t.prototype._binaryContent=null,t.prototype._headers=null,t.prototype._method=null,t.prototype._onRequestCreated=null,t.prototype._onResponseReceived=null,t.prototype._sender=null,t.prototype._textContent=null,t.prototype._timeout=0,t.prototype._url=null,t.prototype.getBinaryContent=function(){return this._binaryContent},t.prototype.getHeaders=function(){return this._headers},t.prototype.getMethod=function(){return this._method},t.prototype.getOnRequestCreated=function(){return this._onRequestCreated},t.prototype.getOnResponseReceived=function(){return this._onResponseReceived},t.prototype.getSender=function(){return this._sender},t.prototype.getTextContent=function(){return this._textContent},t.prototype.getTimeout=function(){return this._timeout},t.prototype.getUrl=function(){return this._url},t.prototype.setBinaryContent=function(){return this._binaryContent=arguments[0]},t.prototype.setHeaders=function(){return this._headers=arguments[0]},t.prototype.setMethod=function(){return this._method=arguments[0]},t.prototype.setOnRequestCreated=function(){return this._onRequestCreated=arguments[0]},t.prototype.setOnResponseReceived=function(){return this._onResponseReceived=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t.prototype.setTextContent=function(){return this._textContent=arguments[0]},t.prototype.setTimeout=function(){return this._timeout=arguments[0]},t.prototype.setUrl=function(){return this._url=arguments[0]},t}(fm.dynamic),fm.httpRequestCreatedArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setRequestArgs=__bind(this.setRequestArgs,this),this.setRequest=__bind(this.setRequest,this),this.getSender=__bind(this.getSender,this),this.getRequestArgs=__bind(this.getRequestArgs,this),this.getRequest=__bind(this.getRequest,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._request=null,t.prototype._requestArgs=null,t.prototype._sender=null,t.prototype.getRequest=function(){return this._request},t.prototype.getRequestArgs=function(){return this._requestArgs},t.prototype.getSender=function(){return this._sender},t.prototype.setRequest=function(){return this._request=arguments[0]},t.prototype.setRequestArgs=function(){return this._requestArgs=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.httpResponseArgs=function(o){function t(){var e;if(this.setTextContent=__bind(this.setTextContent,this),this.setStatusCode=__bind(this.setStatusCode,this),this.setRequestArgs=__bind(this.setRequestArgs,this),this.setHeaders=__bind(this.setHeaders,this),this.setException=__bind(this.setException,this),this.setBinaryContent=__bind(this.setBinaryContent,this),this.getTextContent=__bind(this.getTextContent,this),this.getStatusCode=__bind(this.getStatusCode,this),this.getRequestArgs=__bind(this.getRequestArgs,this),this.getHeaders=__bind(this.getHeaders,this),this.getException=__bind(this.getException,this),this.getBinaryContent=__bind(this.getBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setRequestArgs(e),this.setHeaders(new fm.nameValueCollection)}return __extends(t,o),t.prototype._binaryContent=null,t.prototype._exception=null,t.prototype._headers=null,t.prototype._requestArgs=null,t.prototype._statusCode=0,t.prototype._textContent=null,t.prototype.getBinaryContent=function(){return this._binaryContent},t.prototype.getException=function(){return this._exception},t.prototype.getHeaders=function(){return this._headers},t.prototype.getRequestArgs=function(){return this._requestArgs},t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setBinaryContent=function(){return this._binaryContent=arguments[0]},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setHeaders=function(){return this._headers=arguments[0]},t.prototype.setRequestArgs=function(){return this._requestArgs=arguments[0]},t.prototype.setStatusCode=function(){return this._statusCode=arguments[0]},t.prototype.setTextContent=function(){return this._textContent=arguments[0]},t}(fm.object),fm.httpSendFinishArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setResponseTextContent=__bind(this.setResponseTextContent,this),this.setResponseHeaders=__bind(this.setResponseHeaders,this),this.setResponseBinaryContent=__bind(this.setResponseBinaryContent,this),this.setRequestTextContent=__bind(this.setRequestTextContent,this),this.setRequestBinaryContent=__bind(this.setRequestBinaryContent,this),this.getSender=__bind(this.getSender,this),this.getResponseTextContent=__bind(this.getResponseTextContent,this),this.getResponseHeaders=__bind(this.getResponseHeaders,this),this.getResponseBinaryContent=__bind(this.getResponseBinaryContent,this),this.getRequestTextContent=__bind(this.getRequestTextContent,this),this.getRequestBinaryContent=__bind(this.getRequestBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requestBinaryContent=null,t.prototype._requestTextContent=null,t.prototype._responseBinaryContent=null,t.prototype._responseHeaders=null,t.prototype._responseTextContent=null,t.prototype._sender=null,t.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},t.prototype.getRequestTextContent=function(){return this._requestTextContent},t.prototype.getResponseBinaryContent=function(){return this._responseBinaryContent},t.prototype.getResponseHeaders=function(){return this._responseHeaders},t.prototype.getResponseTextContent=function(){return this._responseTextContent},t.prototype.getSender=function(){return this._sender},t.prototype.setRequestBinaryContent=function(){return this._requestBinaryContent=arguments[0]},t.prototype.setRequestTextContent=function(){return this._requestTextContent=arguments[0]},t.prototype.setResponseBinaryContent=function(){return this._responseBinaryContent=arguments[0]},t.prototype.setResponseHeaders=function(){return this._responseHeaders=arguments[0]},t.prototype.setResponseTextContent=function(){return this._responseTextContent=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.httpSendStartArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setRequestTextContent=__bind(this.setRequestTextContent,this),this.setRequestBinaryContent=__bind(this.setRequestBinaryContent,this),this.getSender=__bind(this.getSender,this),this.getRequestTextContent=__bind(this.getRequestTextContent,this),this.getRequestBinaryContent=__bind(this.getRequestBinaryContent,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requestBinaryContent=null,t.prototype._requestTextContent=null,t.prototype._sender=null,t.prototype.getRequestBinaryContent=function(){return this._requestBinaryContent},t.prototype.getRequestTextContent=function(){return this._requestTextContent},t.prototype.getSender=function(){return this._sender},t.prototype.setRequestBinaryContent=function(){return this._requestBinaryContent=arguments[0]},t.prototype.setRequestTextContent=function(){return this._requestTextContent=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.log=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.__provider=null,t.debug=function(){var e,n;if(2===arguments.length)return n=arguments[0],e=arguments[1],void fm.log.getProvider().debug(n,e);1===arguments.length&&(n=arguments[0],fm.log.getProvider().debug(n))},t.debugFormat=function(){var e,n;return n=arguments[0],e=arguments[1],fm.log.getProvider().debugFormat(n,e)},t.error=function(){var e,n;if(2===arguments.length)return n=arguments[0],e=arguments[1],void fm.log.getProvider().error(n,e);1===arguments.length&&(n=arguments[0],fm.log.getProvider().error(n))},t.errorFormat=function(){var e,n;return n=arguments[0],e=arguments[1],fm.log.getProvider().errorFormat(n,e)},t.fatal=function(){var e,n;if(1===arguments.length)return n=arguments[0],void fm.log.getProvider().fatal(n);2===arguments.length&&(n=arguments[0],e=arguments[1],fm.log.getProvider().fatal(n,e))},t.fatalFormat=function(){var e,n;return n=arguments[0],e=arguments[1],fm.log.getProvider().fatalFormat(n,e)},t.getIsDebugEnabled=function(){return fm.log.getProvider().getIsDebugEnabled()},t.getIsErrorEnabled=function(){return fm.log.getProvider().getIsErrorEnabled()},t.getIsFatalEnabled=function(){return fm.log.getProvider().getIsFatalEnabled()},t.getIsInfoEnabled=function(){return fm.log.getProvider().getIsInfoEnabled()},t.getIsWarnEnabled=function(){return fm.log.getProvider().getIsWarnEnabled()},t.getProvider=function(){var e;return(null===(e=fm.log.__provider)||typeof e>"u")&&(t.__provider=new fm.nullLogProvider),fm.log.__provider},t.info=function(){var e,n;if(1===arguments.length)return n=arguments[0],void fm.log.getProvider().info(n);2===arguments.length&&(n=arguments[0],e=arguments[1],fm.log.getProvider().info(n,e))},t.infoFormat=function(){var e,n;return n=arguments[0],e=arguments[1],fm.log.getProvider().infoFormat(n,e)},t.setProvider=function(){var e,n;return(null===(n=e=arguments[0])||typeof n>"u")&&(e=new fm.nullLogProvider),t.__provider=e},t.warn=function(){var e,n;if(2===arguments.length)return n=arguments[0],e=arguments[1],void fm.log.getProvider().warn(n,e);1===arguments.length&&(n=arguments[0],fm.log.getProvider().warn(n))},t.warnFormat=function(){var e,n;return n=arguments[0],e=arguments[1],fm.log.getProvider().warnFormat(n,e)},t}.call(this,fm.object),fm.stringAssistant=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.subArray=function(){var e,n,s,r,i;if(3===arguments.length){for(e=arguments[0],r=arguments[1],n=arguments[2],i=[],s=0;s<n;)try{i[s]=e[r+s]}finally{s++}return i}if(2===arguments.length)return e=arguments[0],r=arguments[1],fm.stringAssistant.subArray(e,r,e.length-r)},t}.call(this,fm.object),fm.httpTransfer=function(o){function t(){if(this.startRequest=__bind(this.startRequest,this),this.shutdown=__bind(this.shutdown,this),this.sendTextAsync=__bind(this.sendTextAsync,this),this.sendText=__bind(this.sendText,this),this.sendBinaryAsync=__bind(this.sendBinaryAsync,this),this.sendBinary=__bind(this.sendBinary,this),this.sendAsyncCallback=__bind(this.sendAsyncCallback,this),this.sendAsync=__bind(this.sendAsync,this),this.send=__bind(this.send,this),this.raiseOnSendStart=__bind(this.raiseOnSendStart,this),this.raiseOnSendFinish=__bind(this.raiseOnSendFinish,this),this.finishRequest=__bind(this.finishRequest,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this._httpTransferCallbackKey="fm.httpTransfer.callback",void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this._httpTransferCallbackKey="fm.httpTransfer.callback"}return __extends(t,o),t.prototype._httpTransferCallbackKey=null,t._onSendFinish=null,t._onSendStart=null,t.addOnSendFinish=function(){return fm.httpTransfer._onSendFinish=fm.delegate.combine(fm.httpTransfer._onSendFinish,arguments[0])},t.addOnSendStart=function(){return fm.httpTransfer._onSendStart=fm.delegate.combine(fm.httpTransfer._onSendStart,arguments[0])},t.addQueryToUrl=function(){var e,n,s,r;return 2===arguments.length?(n=arguments[0],e=arguments[1],fm.httpTransfer.addQueryToUrl(n,e,null)):3===arguments.length?(n=arguments[0],e=arguments[1],s=arguments[2],fm.stringExtensions.isNullOrEmpty(e)?n:((null===(r=s)||typeof r>"u")&&(s=fm.stringExtensions.empty),e=fm.uri.escapeDataString(e),s=fm.uri.escapeDataString(s),fm.stringExtensions.concat([n,-1===fm.stringExtensions.indexOf(n,"?",fm.stringComparison.OrdinalIgnoreCase)?"?":"&",e,"=",s]))):void 0},t.removeOnSendFinish=function(){return fm.httpTransfer._onSendFinish=fm.delegate.remove(fm.httpTransfer._onSendFinish,arguments[0])},t.removeOnSendStart=function(){return fm.httpTransfer._onSendStart=fm.delegate.remove(fm.httpTransfer._onSendStart,arguments[0])},t.prototype.finishRequest=function(){return this.raiseOnSendFinish(arguments[0])},t.prototype.raiseOnSendFinish=function(){var e,n,s,r;if(s=arguments[0],null!==(r=e=fm.httpTransfer._onSendFinish)&&typeof r<"u")return(n=new fm.httpSendFinishArgs).setSender(s.getRequestArgs().getSender()),n.setRequestBinaryContent(s.getRequestArgs().getBinaryContent()),n.setRequestTextContent(s.getRequestArgs().getTextContent()),n.setResponseBinaryContent(s.getBinaryContent()),n.setResponseTextContent(s.getTextContent()),n.setResponseHeaders(s.getHeaders()),e(n)},t.prototype.raiseOnSendStart=function(){var e,n,s,r;if(s=arguments[0],null!==(r=e=fm.httpTransfer._onSendStart)&&typeof r<"u")return(n=new fm.httpSendStartArgs).setSender(s.getSender()),n.setRequestBinaryContent(s.getBinaryContent()),n.setRequestTextContent(s.getTextContent()),e(n)},t.prototype.send=function(){var e,n,s,r;this.startRequest(s=arguments[0]);try{e=null!==(r=s.getBinaryContent())&&typeof r<"u"?this.sendBinary(s):this.sendText(s)}catch(i){(n=new fm.httpResponseArgs(s)).setException(i),e=n}return this.finishRequest(e),e},t.prototype.sendAsync=function(){var e,n,s,r;e=arguments[1],this.startRequest(s=arguments[0]),s.setDynamicValue(this._httpTransferCallbackKey,e);try{return null!==(r=s.getBinaryContent())&&typeof r<"u"?this.sendBinaryAsync(s,this.sendAsyncCallback):this.sendTextAsync(s,this.sendAsyncCallback)}catch(i){return(n=new fm.httpResponseArgs(s)).setException(i),e(n)}},t.prototype.sendAsyncCallback=function(){var e,n;return e=(n=arguments[0]).getRequestArgs().getDynamicValue(this._httpTransferCallbackKey),this.finishRequest(n),e(n)},t.prototype.sendBinary=function(){return arguments[0]},t.prototype.sendBinaryAsync=function(){return arguments[1]},t.prototype.sendText=function(){return arguments[0]},t.prototype.sendTextAsync=function(){return arguments[1]},t.prototype.shutdown=function(){},t.prototype.startRequest=function(){return this.raiseOnSendStart(arguments[0])},t}.call(this,fm.object),fm.httpTransferFactory=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t._createHttpTransfer=null,t.defaultCreateHttpTransfer=function(){return new fm.httpWebRequestTransfer},t.getCreateHttpTransfer=function(){return fm.httpTransferFactory._createHttpTransfer},t.getHttpTransfer=function(){var e,n,s;return(null===(n=fm.httpTransferFactory.getCreateHttpTransfer())||typeof n>"u")&&t.setCreateHttpTransfer(t.defaultCreateHttpTransfer),(null===(s=e=fm.httpTransferFactory.getCreateHttpTransfer()())||typeof s>"u")&&(e=fm.httpTransferFactory.defaultCreateHttpTransfer()),e},t.setCreateHttpTransfer=function(){return t._createHttpTransfer=arguments[0]},t}.call(this,fm.object),fm.jsonChecker=function(o){function t(){var e;if(this.push=__bind(this.push,this),this.pop=__bind(this.pop,this),this.onError=__bind(this.onError,this),this.finalCheck=__bind(this.finalCheck,this),this.checkString=__bind(this.checkString,this),this.check=__bind(this.check,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.call(this,0),void fm.util.attachProperties(this,arguments[0]);if(0!==arguments.length){if(1===arguments.length){if(e=arguments[0],t.__super__.constructor.call(this),e<0)throw new Error("Invalid depth.");return this.__state=0,this.__depth=e,this.__stack=new fm.stack(e),void this.push(fm.jsonCheckerMode.Done)}}else t.call(this,0)}return __extends(t,o),t.prototype.__depth=0,t.prototype.__offset=0,t.prototype.__stack=null,t.prototype.__state=0,t._ascii_class=null,t._state_transition_table=null,t.prototype.check=function(){var e,n,s,r;return(e=arguments[0])<0&&this.onError(),e>=128?s=30:(s=fm.jsonChecker._ascii_class[e])<=-1&&this.onError(),(r=fm.jsonChecker._state_transition_table[this.__state][s])>=0?(this.__state=r,this.__offset=this.__offset+1):(-9===r?(this.pop(fm.jsonCheckerMode.Key),this.__state=1):-8===r?(this.pop(fm.jsonCheckerMode.Object),this.__state=1):-7===r?(this.pop(fm.jsonCheckerMode.Array),this.__state=1):-6===r?(this.push(fm.jsonCheckerMode.Key),this.__state=2):-5===r?(this.push(fm.jsonCheckerMode.Array),this.__state=6):-4===r?(n=this.__stack.peek())===fm.jsonCheckerMode.Key?this.__state=4:n===fm.jsonCheckerMode.Array||n===fm.jsonCheckerMode.Object?this.__state=1:n===fm.jsonCheckerMode.Done?(this.push(fm.jsonCheckerMode.String),this.__state=7):n===fm.jsonCheckerMode.String?(this.pop(fm.jsonCheckerMode.String),this.__state=1):this.onError():-3===r?(n=this.__stack.peek())===fm.jsonCheckerMode.Object?(this.pop(fm.jsonCheckerMode.Object),this.push(fm.jsonCheckerMode.Key),this.__state=3):n===fm.jsonCheckerMode.Array?this.__state=5:this.onError():-2===r?(this.pop(fm.jsonCheckerMode.Key),this.push(fm.jsonCheckerMode.Object),this.__state=5):this.onError(),this.__offset=this.__offset+1)},t.prototype.checkString=function(){var e,n,s,r,i,a,u,c;if(r=arguments[0],n=0,e=0,i=new fm.holder(n),a=fm.parseAssistant.tryParseDouble(r,i),n=i.getValue(),u=new fm.holder(e),c=fm.parseAssistant.tryParseDecimal(r,u),e=u.getValue(),"true"===r||"false"===r||"null"===r||a||c)return!0;try{for(s=0;s<r.length;)try{this.check(fm.convert.toInt32(r.charAt(s)))}finally{s++}return this.finalCheck(),!0}catch{return!1}},t.prototype.finalCheck=function(){return 1!==this.__state&&this.onError(),this.pop(fm.jsonCheckerMode.Done)},t.prototype.onError=function(){throw new Error(fm.stringExtensions.format("Invalid JSON text at character offset {0}.",fm.intExtensions.toString(this.__offset,"N0")))},t.prototype.pop=function(){var e;if(e=arguments[0],this.__stack.pop()!==e)return this.onError()},t.prototype.push=function(){var e;return e=arguments[0],this.__depth>0&&this.__stack.getCount()>=this.__depth&&this.onError(),this.__stack.push(e)},t._ascii_class=[-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,30,8,30,30,30,30,30,30,30,30,11,7,12,13,10,14,15,15,15,15,15,15,15,15,15,6,30,30,30,30,30,30,28,28,28,28,29,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,4,9,5,30,30,30,16,17,18,19,20,21,30,30,30,30,30,22,30,23,30,30,30,24,25,26,27,30,30,30,30,30,2,30,3,30,30],t._state_transition_table=[[0,0,-6,-1,-5,-1,-1,-1,-4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,2,-1,-9,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,3,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,4,-1,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,5,-6,-1,-5,-1,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[6,6,-6,-1,-5,-7,-1,-1,7,-1,-1,-1,13,-1,14,15,-1,-1,-1,-1,-1,23,-1,27,-1,-1,20,-1,-1,-1,-1],[7,-1,7,7,7,7,7,7,-4,8,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],[-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,-1,-1,-1,-1,-1,-1,7,-1,-1,-1,7,-1,7,7,-1,7,9,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,10,10,10,10,10,10,10,-1,-1,-1,-1,-1,-1,10,10,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,11,11,11,11,11,11,11,-1,-1,-1,-1,-1,-1,11,11,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,12,12,12,12,12,12,12,12,-1,-1,-1,-1,-1,-1,12,12,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,7,7,7,7,7,7,7,-1,-1,-1,-1,-1,-1,7,7,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,16,15,15,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,16,16,-1,-1,-1,-1,17,-1,-1,-1,-1,-1,-1,-1,-1,17,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,18,18,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,1,-1,-8,-1,-7,-1,-3,-1,-1,-1,-1,-1,-1,19,19,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,21,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,22,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,24,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,25,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,28,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,29,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1]],t}(fm.object),fm.nullLogProvider=function(o){function t(){if(this.log=__bind(this.log,this),this.isEnabled=__bind(this.isEnabled,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.isEnabled=function(){return!1},t.prototype.log=function(){},t}(fm.logProvider),fm.serializer=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.charToUnicodeString=function(){var e,n,s,r,i;return i=arguments[0],e=fm.serializer.intToHex(i>>12&"\x0f"),n=fm.serializer.intToHex(i>>8&"\x0f"),s=fm.serializer.intToHex(i>>4&"\x0f"),r=fm.serializer.intToHex("\x0f"&i),fm.stringExtensions.concat(["\\u",e,n,s,r])},t.deserializeBoolean=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=!1,s=new fm.holder(e),r=fm.parseAssistant.tryParseBoolean(n,s),e=s.getValue(),r)return e}return null},t.deserializeBooleanArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(n=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))n=[];else for(r=fm.stringExtensions.split(e,[","]),n=[],s=0;s<r.length;)try{n[s]=fm.serializer.deserializeBoolean(fm.stringExtensions.trim(r[s]))}finally{s++}return n},t.deserializeDecimal=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=0,s=new fm.holder(e),r=fm.parseAssistant.tryParseDecimal(n,s),e=s.getValue(),r)return e}return null},t.deserializeDecimalArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(s=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(r=fm.stringExtensions.split(e,[","]),s=[],n=0;n<r.length;)try{s[n]=fm.serializer.deserializeDecimal(fm.stringExtensions.trim(r[n]))}finally{n++}return s},t.deserializeDouble=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=0,s=new fm.holder(e),r=fm.parseAssistant.tryParseDouble(n,s),e=s.getValue(),r)return e}return null},t.deserializeDoubleArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(s=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(r=fm.stringExtensions.split(e,[","]),s=[],n=0;n<r.length;)try{s[n]=fm.serializer.deserializeDouble(fm.stringExtensions.trim(r[n]))}finally{n++}return s},t.deserializeFloat=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=0,s=new fm.holder(e),r=fm.parseAssistant.tryParseFloat(n,s),e=s.getValue(),r)return e}return null},t.deserializeFloatArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(s=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(r=fm.stringExtensions.split(e,[","]),s=[],n=0;n<r.length;)try{s[n]=fm.serializer.deserializeFloat(fm.stringExtensions.trim(r[n]))}finally{n++}return s},t.deserializeGuid=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=fm.guid.empty,s=new fm.holder(e),r=fm.parseAssistant.tryParseGuid(fm.serializer.deserializeString(n),s),e=s.getValue(),r)return e}return null},t.deserializeGuidArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(n=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))n=[];else for(r=fm.stringExtensions.split(e,[","]),n=[],s=0;s<r.length;)try{n[s]=fm.serializer.deserializeGuid(fm.stringExtensions.trim(r[s]))}finally{s++}return n},t.deserializeInteger=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=0,s=new fm.holder(e),r=fm.parseAssistant.tryParseInteger(n,s),e=s.getValue(),r)return e}return null},t.deserializeIntegerArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(s=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(r=fm.stringExtensions.split(e,[","]),s=[],n=0;n<r.length;)try{s[n]=fm.serializer.deserializeInteger(fm.stringExtensions.trim(r[n]))}finally{n++}return s},t.deserializeLong=function(){var e,n,s,r;if(n=arguments[0],!fm.stringExtensions.isNullOrEmpty(n)){if("null"===(n=fm.stringExtensions.trim(n)))return null;if(e=0,s=new fm.holder(e),r=fm.parseAssistant.tryParseLong(n,s),e=s.getValue(),r)return e}return null},t.deserializeLongArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if(s=null,"["===e.charAt(0))if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(r=fm.stringExtensions.split(e,[","]),s=[],n=0;n<r.length;)try{s[n]=fm.serializer.deserializeLong(fm.stringExtensions.trim(r[n]))}finally{n++}return s},t.deserializeObject=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,b,y,C,v;if(s=arguments[1],e=arguments[2],null===(v=c=arguments[0])||typeof v>"u"||"null"===(c=fm.stringExtensions.trim(c))||c.length<2)return null;if(b=s(),"{"===c.charAt(0)&&"}"===c.charAt(c.length-1)&&c.length>2)for(c=fm.stringExtensions.concat(fm.stringExtensions.substring(c,1,c.length-2),","),h=0,g=0,r=!1,p=-2,l=fm.stringType.None,_=0,m=0,C=fm.stringExtensions.empty,d=fm.stringExtensions.empty,u=0;u<c.length;)try{if(n=c.charAt(u),i=p===u-1,a=!1,!r)switch(n){case"[":g++,a=!0;break;case"]":g--,a=!0;break;case"{":h++,a=!0;break;case"}":h--,a=!0}if(!a&&(r&&!("\\"!==n||i)&&(p=u,a=!0),!a)){if(0===h&&0===g)switch(n){case",":r||(d=fm.stringExtensions.trim(fm.stringExtensions.substring(c,m,u-m)),e(b,fm.serializer.deserializeString(C),d),_=u+1),a=!0;break;case":":r||(C=fm.stringExtensions.trim(fm.stringExtensions.substring(c,_,u-_)),m=u+1),a=!0}!a&&("'"===n||'"'===n)&&!i&&(y='"'===n?fm.stringType.Double:fm.stringType.Single,r?l===y&&(r=!1,l=fm.stringType.None):(r=!0,l=y),a=!0)}}finally{u++}return b},t.deserializeObjectArray=function(){var e,n,s,i,a,c,l,h,g;if(n=arguments[1],e=arguments[2],null===(h=i=fm.serializer.deserializeRawArray(arguments[0]))||typeof h>"u")return null;for(a=[],c=0,l=(g=i).length;c<l;c++)s=fm.serializer.deserializeObject(g[c],n,e),fm.arrayExtensions.add(a,s);return a},t.deserializeObjectArrayFast=function(){var e,n,s,i,a,u,c,l,h,g;if(n=arguments[1],e=arguments[2],null===(h=i=fm.serializer.deserializeRawArray(arguments[0]))||typeof h>"u")return null;for(a=[],c=0,l=(g=i).length;c<l;c++)u=g[c],(s=fm.serializer.deserializeObject(u,n,e)).setSerialized(u),fm.arrayExtensions.add(a,s);return a},t.deserializeObjectFast=function(){var s,r,i;return s=arguments[0],null!==(i=r=fm.serializer.deserializeObject(s,arguments[1],arguments[2]))&&typeof i<"u"&&r.setSerialized(s),r},t.deserializeRaw=function(){var e;return e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)?null:fm.stringExtensions.trim(e)},t.deserializeRawArray=function(){var e,n,s,r,i,a,u,c,l,h,g,p;if(null===(p=i=arguments[0])||typeof p>"u"||"null"===(i=fm.stringExtensions.trim(i))||i.length<2)return null;if(a=[],"["===i.charAt(0)&&"]"===i.charAt(i.length-1)&&i.length>2)for(c=0,h=0,n=!1,l=-2,u=fm.stringType.None,r=1;r<i.length-1;)try{if(e=i.charAt(r),s=l===r-1,!n)switch(e){case"{":0===c&&(h=r),c++;break;case"}":0==--c&&fm.arrayExtensions.add(a,fm.stringExtensions.substring(i,h,r-h+1))}n&&"\\"===e&&!s?l=r:("'"===e||'"'===e)&&!s&&(g='"'===e?fm.stringType.Double:fm.stringType.Single,n?u===g&&(n=!1,u=fm.stringType.None):(n=!0,u=g))}finally{r++}return a},t.deserializeString=function(){var e;return e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e))?null:fm.serializer.unescapeString(fm.serializer.trimQuotes(e))},t.deserializeStringArray=function(){var e,n,s;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===(e=fm.stringExtensions.trim(e)))return null;if("["===e.charAt(0)){if(e=fm.stringExtensions.substring(e,1,e.length-2),fm.stringExtensions.isNullOrEmpty(e))s=[];else for(s=fm.stringExtensions.split(e,[","]),n=0;n<s.length;)try{s[n]=fm.serializer.unescapeString(fm.serializer.trimQuotes(fm.stringExtensions.trim(s[n])))}finally{n++}return s}return[e]},t.escapeString=function(){var e,n,s,r;for(r=arguments[0],e=new fm.stringBuilder,s=0;s<r.length;)try{n=r.charAt(s),e.append(n>"~"?fm.serializer.charToUnicodeString(n):"\b"===n?"\\b":"\f"===n?"\\f":"\n"===n?"\\n":"\r"===n?"\\r":"\t"===n?"\\t":'"'===n?'\\"':"/"===n?"\\/":"\\"===n?"\\\\":n.toString())}finally{s++}return e.toString()},t.intToHex=function(){var e;return(e=arguments[0])<=9?e+48:e-10+97},t.isValidJson=function(){var e;return e=arguments[0],(new fm.jsonChecker).checkString(e)},t.serializeBoolean=function(){var e;return null===(e=arguments[0])?"null":e?"true":"false"},t.serializeBooleanArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeBoolean(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeDecimal=function(){var e;return null===(e=arguments[0])?"null":e.toString()},t.serializeDecimalArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeDecimal(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeDouble=function(){var e;return null===(e=arguments[0])?"null":e.toString()},t.serializeDoubleArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeDouble(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeFloat=function(){var e;return null===(e=arguments[0])?"null":e.toString()},t.serializeFloatArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeFloat(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeGuid=function(){var e;return null===(e=arguments[0])?"null":fm.stringExtensions.concat('"',e.toString(),'"')},t.serializeGuidArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeGuid(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeInteger=function(){var e;return null===(e=arguments[0])?"null":fm.intExtensions.toString(e)},t.serializeIntegerArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeInteger(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeLong=function(){var e;return null===(e=arguments[0])?"null":fm.intExtensions.toString(e)},t.serializeLongArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeLong(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeObject=function(){var n,s,r,i,a,u,c,l;if(null===(c=r=arguments[0])||typeof c>"u")return"null";for((0,arguments[1])(r,n={}),s=[],a=0,u=(l=fm.hashExtensions.getKeys(n)).length;a<u;a++)i=l[a],fm.arrayExtensions.add(s,fm.stringExtensions.concat(fm.serializer.serializeString(i),":",n[i]));return fm.stringExtensions.concat("{",fm.stringExtensions.join(",",fm.arrayExtensions.toArray(s)),"}")},t.serializeObjectArray=function(){var e,n,s,r,i;if(e=arguments[1],null===(i=s=arguments[0])||typeof i>"u")return"null";if(0===s.length)return"[]";for(r=[],n=0;n<s.length;)try{r[n]=fm.serializer.serializeObject(s[n],e)}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},t.serializeObjectArrayFast=function(){var e,n,s,r,i;if(e=arguments[1],null===(i=s=arguments[0])||typeof i>"u")return"null";if(0===s.length)return"[]";for(r=[],n=0;n<s.length;)try{r[n]=fm.serializer.serializeObjectFast(s[n],e)}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",r),"]")},t.serializeObjectFast=function(){var e,n,s;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"?"null":(n.getIsSerialized()&&!n.getIsDirty()||n.setSerialized(fm.serializer.serializeObject(n,e)),n.getSerialized())},t.serializeRaw=function(){return arguments[0]},t.serializeRawArray=function(){var e,n;return null===(n=e=arguments[0])||typeof n>"u"?"null":fm.stringExtensions.concat("[",fm.stringExtensions.join(",",e),"]")},t.serializeString=function(){var e,n;return null===(n=e=arguments[0])||typeof n>"u"?"null":fm.stringExtensions.concat('"',fm.serializer.escapeString(e),'"')},t.serializeStringArray=function(){var e,n,s,r;if(null===(r=e=arguments[0])||typeof r>"u")return"null";for(s=[],n=0;n<e.length;)try{s[n]=fm.serializer.serializeString(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.trimQuotes=function(){var e,s;return(s=arguments[0]).length>1&&(e=s.charAt(0))===s.charAt(s.length-1)&&("'"===e||'"'===e)&&(s=fm.stringExtensions.substring(s,1,s.length-2)),s},t.unescapeString=function(){var e,n,s,r,i;for(i=arguments[0],e=new fm.stringBuilder,r=0;r<i.length;)try{if("\\"===(n=i.charAt(r))){if(r===i.length-1)continue;switch(s=i.charAt(r+1)){case"b":e.append("\b");break;case"f":e.append("\f");break;case"n":e.append("\n");break;case"r":e.append("\r");break;case"t":e.append("\t");break;case"/":e.append("/");break;case"u":r<i.length-5?(e.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,6)).toString()),r+=4):e.append(s.toString());break;case"x":r<i.length-3?(e.append(fm.serializer.unicodeStringToChar(fm.stringExtensions.substring(i,r,4)).toString()),r+=2):e.append(s.toString());break;default:e.append(s.toString())}r++;continue}e.append(n.toString())}finally{r++}return e.toString()},t.unicodeStringToChar=function(){var e;if((e=arguments[0]).length<2)throw new Error("Unicode string has invalid length.");return fm.convert.toInt32(e.substring(2),16)},t}.call(this,fm.object);var __bind=function(o,t){return function(){return o.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(o,t){for(var e in t)__hasProp.call(t,e)&&(o[e]=t[e]);function n(){this.constructor=o}return n.prototype=t.prototype,o.prototype=new n,o.__super__=t.prototype,o};fm.httpWebRequestTransfer=function(o){function t(){return this.sendInternal=__bind(this.sendInternal,this),this.process=__bind(this.process,this),this.sendText=__bind(this.sendText,this),this.sendTextAsync=__bind(this.sendTextAsync,this),t.__super__.constructor.apply(this,arguments)}return __extends(t,o),t._corsFailCache={},t._pmFailCache={},t.getPlatformCode=function(){return"js"},t.setDisableCORS=function(e){return t._disableCORS=e},t.getDisableCORS=function(){return t._disableCORS||!1},t.setDisablePostMessage=function(e){return t._disablePostMessage=e},t.getDisablePostMessage=function(){return t._disablePostMessage||!1},t.setForceJSONP=function(e){return t._forceJSONP=e},t.getForceJSONP=function(){return t._forceJSONP||!1},t.prototype.sendTextAsync=function(e,n){var s=this;return fm.util.addOnLoad(function(){return s.process(e,n)})},t.prototype.sendText=function(e){return this.process(e,null)},t.prototype.process=function(e,n){var s,r,i,a,u,c,l,h;return c=fm.httpWebRequestTransfer,h=e.getUrl(),e._processed||(h=fm.util.absolutizeUrl(h),e.setUrl(h),e._processed=!0),r=c.getDisableCORS()||e.getSender().getDisableCORS(),i=c.getDisablePostMessage()||e.getSender().getDisablePostMessage(),u=c.getForceJSONP()||e.getSender().getForceJSONP(),a=fm.xhr.send,s=!1,l=!1,fm.util.isXD(h)&&(r||!c.canCORS()||c._corsFailCache[h]?i||!c.canPostMessage()||c._pmFailCache[h]?a=fm.jsonp.send:(l=!0,a=fm.postMessage.send):s=!0),u&&(a=fm.jsonp.send),this.sendInternal(a,s,l,e,n)},t.prototype.sendInternal=function(e,n,s,r,i){var a,u,l,h,g;switch(h=this,(l=new fm.httpResponseArgs(r)).setException(new Error("Environment does not support synchronous requests.")),g=r.getUrl(),a=r.getDynamicProperties().frameUrl||g,u="GET",r.getMethod()){case fm.httpMethod.Head:u="HEAD";break;case fm.httpMethod.Post:u="POST";break;case fm.httpMethod.Put:u="PUT";break;case fm.httpMethod.Patch:u="PATCH";break;case fm.httpMethod.Delete:u="DELETE"}return e({sync:!i,url:g,frameUrl:a,method:u,content:r.getTextContent(),headers:r.getHeaders().toHash(),timeout:r.getTimeout(),robustResponse:!0,onRequestCreated:function(m){var _,d;if(d=r.getOnRequestCreated())return(_=new fm.httpRequestCreatedArgs).setRequestArgs(r),_.setSender(r.getSender()),_.setRequest(m),d(_)},onResponseReceived:function(m){var _,d;if(d=r.getOnResponseReceived())return(_=new fm.httpResponseReceivedArgs).setRequestArgs(r),_.setSender(r.getSender()),_.setResponse(m),d(_)},onSuccess:function(m){return 0===m.statusCode&&n?(fm.httpWebRequestTransfer._corsFailCache[g]=!0,void(i?h.sendTextAsync(r,i):l=h.sendText(r))):(l.setException(null),l.setTextContent(m.content),l.setStatusCode(m.statusCode),l.setHeaders(new fm.nameValueCollection(m.headers)),i?i(l):void 0)},onFailure:function(m){var _;return n?(fm.httpWebRequestTransfer._corsFailCache[g]=!0,void(i?h.sendTextAsync(r,i):l=h.sendText(r))):s?(fm.httpWebRequestTransfer._pmFailCache[g]=!0,void(i?h.sendTextAsync(r,i):l=h.sendText(r))):(_=new Error(m.message),l.setException(_),i?i(l):void 0)}}),l},t.canCORS=function(){return window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest},t.canPostMessage=function(){return!fm.util.isIE6()&&!fm.util.isIE7()&&!!window.postMessage},t}.call(this,fm.httpTransfer);var __bind=function(o,t){return function(){return o.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(o,t){for(var e in t)__hasProp.call(t,e)&&(o[e]=t[e]);function n(){this.constructor=o}return n.prototype=t.prototype,o.prototype=new n,o.__super__=t.prototype,o};if(fm.domLogProvider=function(o){function t(e,n){this.log=__bind(this.log,this),this.isEnabled=__bind(this.isEnabled,this),this._container=e,this._level=n,t.__super__.constructor.call(this),this._level||(this._level=fm.logLevel.Warn)}return __extends(t,o),t.prototype._container=null,t.prototype._level=null,t.prototype.isEnabled=function(e){return e-this._level>=0},t.prototype.log=function(e,n,s){var r,i;switch(i="",e){case fm.logLevel.Debug:i+="DEBUG";break;case fm.logLevel.Info:i+="INFO ";break;case fm.logLevel.Warn:i+="WARN ";break;case fm.logLevel.Error:i+="ERROR";break;case fm.logLevel.Fatal:i+="FATAL"}return i+=" "+n,s&&(i+=" "+s.message),(r=document.createElement("div")).innerHTML=i,this._container.appendChild(r)},t}(fm.logProvider),fm.httpTransfer.addQueryToUrl=function(){var o,t,e,n;return 2===arguments.length?(t=arguments[0],o=arguments[1],fm.httpTransfer.addQueryToUrl(t,o,null)):3===arguments.length?(t=arguments[0],o=arguments[1],e=arguments[2],fm.stringExtensions.isNullOrEmpty(o)?t:((null===(n=e)||typeof n>"u")&&(e=fm.stringExtensions.empty),fm.stringExtensions.concat([t,-1===fm.stringExtensions.indexOf(t,"?",fm.stringComparison.OrdinalIgnoreCase)?"?":"&",o,"=",e]))):void 0},typeof global<"u"&&!global.window&&(global.window=global,global.document={cookie:""}),!window.fm)throw new Error("fm must be loaded before fm.websync.");window.fm.websync||(window.fm.websync={});var __bind=function(o,t){return function(){return o.apply(t,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(o,t){for(var e in t)__hasProp.call(t,e)&&(o[e]=t[e]);function n(){this.constructor=o}return n.prototype=t.prototype,o.prototype=new n,o.__super__=t.prototype,o};fm.websync.crypto=function(){function o(){}return o.tryBase64Decode=function(t,e){return e.setValue(null),!1},o}();var __bind=function(o,t){return function(){return o.apply(t,arguments)}};fm.websync.webSocket=function(){function o(t){this.raiseOnResponseReceived=__bind(this.raiseOnResponseReceived,this),this.raiseOnRequestCreated=__bind(this.raiseOnRequestCreated,this),this.raiseCloseComplete=__bind(this.raiseCloseComplete,this),this.raiseReceive=__bind(this.raiseReceive,this),this.raiseStreamFailure=__bind(this.raiseStreamFailure,this),this.raiseOpenFailure=__bind(this.raiseOpenFailure,this),this.raiseOpenSuccess=__bind(this.raiseOpenSuccess,this),this.close=__bind(this.close,this),this.send=__bind(this.send,this),this.open=__bind(this.open,this),this.getIsOpen=__bind(this.getIsOpen,this),this.getBufferedAmount=__bind(this.getBufferedAmount,this),t=(t=(t=fm.util.absolutizeUrl(t)).replace("https://","wss://")).replace("http://","ws://"),this._requestUrl=t}return o.prototype.getBufferedAmount=function(){return this._webSocket?this._webSocket.bufferedAmount:0},o.prototype.getIsOpen=function(){return!!this._webSocket&&1===this._webSocket.readyState},o.prototype.open=function(t){var e,n,s=this;if(n=this._requestUrl,(e=t.getHeaders())&&(n=fm.httpTransfer.addQueryToUrl(n,"headers",fm.json.serialize(e.toHash()))),"WebSocket"in window?this._webSocket=new WebSocket(n):"MozWebSocket"in window&&(this._webSocket=new MozWebSocket(n)),this._webSocket)return this._onRequestCreated=t.getOnRequestCreated(),this._onResponseReceived=t.getOnResponseReceived(),this.raiseOnRequestCreated(t),this._opening=!0,this._closing=!1,this._webSocket.onopen=function(r){return s.raiseOnResponseReceived(t),s._opening=!1,s.raiseOpenSuccess(t)},this._webSocket.onerror=function(r){return s._opening?(s._opening=!1,s.raiseOpenFailure(t,{statusCode:r.code,exception:new Error(r.message||"Unspecified WebSocket error.")})):s._closing?void 0:s.raiseStreamFailure(t,{statusCode:r.code,exception:new Error(r.message||"Unspecified WebSocket error.")})},this._webSocket.onclose=function(r){return s._opening?(s._opening=!1,s.raiseOpenFailure(t,{statusCode:r.code,exception:new Error("Could not open WebSocket.")})):s._aborting?s.raiseStreamFailure(t,{statusCode:r.code,exception:new Error("WebSocket request timed out.")}):void 0},this._webSocket.onmessage=function(r){return s._timer&&window.clearTimeout(s._timer),s.raiseOnResponseReceived(s._sendArgs),s._sendArgs=null,s.raiseReceive(t,{textMessage:r.data})};raiseOpenFailure(t,{statusCode:0,exception:new Error("Could not create WebSocket.")})},o.prototype.send=function(t){var e=this;if(this._webSocket)return this._sendArgs=t,this.raiseOnRequestCreated(t),this._timer=window.setTimeout(function(){if(e._webSocket)return e._aborting=!0,e._webSocket.close()},t.getTimeout()),this._webSocket.send(t.getTextMessage())},o.prototype.close=function(t){var e,n;return t||this.close(new fm.websync.webSocketCloseArgs),!!this._webSocket&&(e=t.getStatusCode()||fm.websync.webSocketStatusCode.Normal,n=t.getReason()||"",this._closing=!0,this._webSocket.close(e,n),this._webSocket=null,this.raiseCloseComplete(t,{statusCode:e,reason:n}),!0)},o.prototype.raiseOpenSuccess=function(t){var e;if(e=t.getOnSuccess())return e(new fm.websync.webSocketOpenSuccessArgs)},o.prototype.raiseOpenFailure=function(t,e){var n;if(n=t.getOnFailure())return n(new fm.websync.webSocketOpenFailureArgs(e))},o.prototype.raiseStreamFailure=function(t,e){var n;if(n=t.getOnStreamFailure())return n(new fm.websync.webSocketStreamFailureArgs(e))},o.prototype.raiseReceive=function(t,e){var n;if(n=t.getOnReceive())return n(new fm.websync.webSocketReceiveArgs(e))},o.prototype.raiseCloseComplete=function(t,e){var n;if(n=t.getOnComplete())return n(new fm.websync.webSocketCloseCompleteArgs(e))},o.prototype.raiseOnRequestCreated=function(t){var e,n;if(n=this._onRequestCreated())return(e=new fm.httpRequestCreatedArgs).setRequestArgs(t),e.setSender(t.getSender()),e.setRequest(null),n(e)},o.prototype.raiseOnResponseReceived=function(t){var e,n;if(n=this._onResponseReceived())return(e=new fm.httpResponseReceivedArgs).setRequestArgs(t),e.setSender(t.getSender()),e.setResponse(null),n(e)},o}(),fm.websync.connectRetryMode={Aggressive:1,Intelligent:2,None:3,Default:2},fm.websync.concurrencyMode={Low:1,High:2,Default:1},fm.websync.reconnect={Retry:1,Handshake:2,None:3},fm.websync.connectionType={WebSocket:1,LongPolling:2,CallbackPolling:3,IFrame:4,Flash:5},fm.websync.messageType={Connect:1,Disconnect:2,Bind:3,Unbind:4,Subscribe:5,Unsubscribe:6,Publish:7,Notify:8,Service:9,Stream:10,Unknown:11},fm.websync.webSocketStatusCode={Normal:1e3,GoingAway:1001,ProtocolError:1002,InvalidType:1003,NoStatus:1005,Abnormal:1006,InvalidData:1007,PolicyViolation:1008,MessageTooLarge:1009,UnsupportedExtension:1010,UnexpectedCondition:1011,SecureHandshakeFailure:1015},fm.websync.backoffArgs=function(o){function t(){if(this.setLastTimeout=__bind(this.setLastTimeout,this),this.setIndex=__bind(this.setIndex,this),this.getLastTimeout=__bind(this.getLastTimeout,this),this.getIndex=__bind(this.getIndex,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._index=0,t.prototype._lastTimeout=0,t.prototype.getIndex=function(){return this._index},t.prototype.getLastTimeout=function(){return this._lastTimeout},t.prototype.setIndex=function(){return this._index=arguments[0]},t.prototype.setLastTimeout=function(){return this._lastTimeout=arguments[0]},t}(fm.object),fm.websync.extensible=function(o){function t(){if(this.setMeta=__bind(this.setMeta,this),this.setExtensionValue=__bind(this.setExtensionValue,this),this.getMeta=__bind(this.getMeta,this),this.getExtensionValue=__bind(this.getExtensionValue,this),this.setMetaJson=__bind(this.setMetaJson,this),this.setExtensionValueJson=__bind(this.setExtensionValueJson,this),this.setExtensions=__bind(this.setExtensions,this),this.getMetaJson=__bind(this.getMetaJson,this),this.getExtensionValueJson=__bind(this.getExtensionValueJson,this),this.getExtensions=__bind(this.getExtensions,this),this.getExtensionNames=__bind(this.getExtensionNames,this),this.getExtensionCount=__bind(this.getExtensionCount,this),this.copyExtensions=__bind(this.copyExtensions,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__extensions=null,t._acknowledgementExtensionName="fm.ack",t._disableBinaryExtensionName="fm.dbin",t._lastClientIdExtensionName="fm.lcid",t._lastSessionIdExtensionName="fm.lsid",t._metaExtensionName="fm.meta",t._notifyClientIdExtensionName="fm.notify",t._notifyingClientExtensionName="fm.notifying",t._publishingClientExtensionName="fm.publishing",t._serverActionsExtensionName="fm.server",t._serverTimeoutExtensionName="fm.timeout",t._sessionIdExtensionName="fm.sessionId",t._tagExtensionName="fm.tag",t.convertKeyToRecord=function(){return new fm.websync.record(arguments[0])},t.convertRecordToKey=function(){return arguments[0].getKey()},t.sharedGetChannel=function(){var e,n;return null===(n=e=arguments[0])||typeof n>"u"||0===e.length?null:e[0]},t.sharedGetChannels=function(){return arguments[0]},t.sharedGetKey=function(){var e,s;return null===(s=e=fm.websync.extensible.sharedGetRecord(arguments[0]))||typeof s>"u"?null:fm.websync.extensible.convertRecordToKey(e)},t.sharedGetKeys=function(){var e,s,r,i,a,u;if(s=arguments[0],null===(a=s=fm.websync.extensible.sharedGetRecords(s))||typeof a>"u")return null;for(e=[],r=0,i=(u=s).length;r<i;r++)fm.arrayExtensions.add(e,fm.websync.extensible.convertRecordToKey(u[r]));return fm.arrayExtensions.toArray(e)},t.sharedGetRecord=function(){var e,n;return null===(n=e=arguments[0])||typeof n>"u"||0===e.length?null:e[0]},t.sharedGetRecords=function(){return arguments[0]},t.sharedSetChannel=function(){var e,n,s,r,i,a;if(1===arguments.length)return e=arguments[0],fm.websync.extensible.sharedSetChannel(e,!0);if(2===arguments.length){if(s=arguments[1],null===(r=e=arguments[0])||typeof r>"u")return null;if(n=null,i=new fm.holder(n),a=fm.websync.extensible.validateChannel(e,i),n=i.getValue(),s&&!a)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return[e]}},t.sharedSetChannels=function(){var e,n,s,r,i,a,u,c,l,h;if(1===arguments.length)return e=arguments[0],fm.websync.extensible.sharedSetChannels(e,!0);if(2===arguments.length){if(r=arguments[1],null!==(u=e=arguments[0])&&typeof u<"u")for(i=0,a=(c=e).length;i<a;i++)if(s=c[i],n=null,l=new fm.holder(n),h=fm.websync.extensible.validateChannel(s,l),n=l.getValue(),r&&!h)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",n));return e}},t.sharedSetKey=function(){var e,n,s,r,i,a,u;if(2===arguments.length){if(r=arguments[1],null===(i=n=arguments[0])||typeof i>"u")return null;if(s=fm.websync.extensible.convertKeyToRecord(n),e=null,a=new fm.holder(e),u=fm.websync.extensible.validateRecord(s,a),e=a.getValue(),r&&!u)throw new Error(fm.stringExtensions.format("Invalid record. {0}",e));return[s]}if(1===arguments.length)return n=arguments[0],fm.websync.extensible.sharedSetKey(n,!0)},t.sharedSetKeys=function(){var e,n,s,r,a,u,c,l,h,g,p;if(2===arguments.length){if(a=arguments[1],null===(l=n=arguments[0])||typeof l>"u")return null;for(s=[],u=0,c=(h=n).length;u<c;u++){if(r=fm.websync.extensible.convertKeyToRecord(h[u]),e=null,g=new fm.holder(e),p=fm.websync.extensible.validateRecord(r,g),e=g.getValue(),a&&!p)throw new Error(fm.stringExtensions.format("Invalid record. {0}",e));fm.arrayExtensions.add(s,r)}return fm.arrayExtensions.toArray(s)}if(1===arguments.length)return n=arguments[0],fm.websync.extensible.sharedSetKeys(n,!0)},t.sharedSetRecord=function(){var e,n,s,r,i;if(2===arguments.length){if(n=arguments[0],s=arguments[1],e=null,r=new fm.holder(e),i=fm.websync.extensible.validateRecord(n,r),e=r.getValue(),s&&!i)throw new Error(fm.stringExtensions.format("Invalid record. {0}",e));return[n]}if(1===arguments.length)return n=arguments[0],fm.websync.extensible.sharedSetRecord(n,!0)},t.sharedSetRecords=function(){var e,n,s,r,i,a,u,c,l,h;if(1===arguments.length)return s=arguments[0],fm.websync.extensible.sharedSetRecords(s,!0);if(2===arguments.length){if(r=arguments[1],null!==(u=s=arguments[0])&&typeof u<"u")for(i=0,a=(c=s).length;i<a;i++)if(n=c[i],e=null,l=new fm.holder(e),h=fm.websync.extensible.validateRecord(n,l),e=l.getValue(),r&&!h)throw new Error(fm.stringExtensions.format("Invalid record. {0}",e));return s}},t.validateChannel=function(){var e,n,s;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"?(n.setValue("Channel is null."),!1):fm.stringExtensions.startsWith(e,"/",fm.stringComparison.Ordinal)?fm.stringExtensions.indexOf(e,"*",fm.stringComparison.Ordinal)>=0?(n.setValue("Channel may not contain asterisks (*)."),!1):fm.websync.metaChannels.isReservedChannel(e)?(n.setValue("Channel is reserved."),!1):(n.setValue(null),!0):(n.setValue("Channel must start with a forward-slash (/)."),!1)},t.validateRecord=function(){var e,n,s;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"?(e.setValue("Record is null."),!1):fm.stringExtensions.isNullOrEmpty(n.getKey())?(e.setValue("Key is null or empty."),!1):(e.setValue(null),!0)},t.prototype.copyExtensions=function(){var e,n,s,r,i,a;for(i=[],s=0,r=(a=(e=arguments[0]).getExtensionNames()).length;s<r;s++)i.push(this.setExtensionValueJson(n=a[s],e.getExtensionValueJson(n),!1));return i},t.prototype.getExtensionCount=function(){return this.getExtensions().getCount()},t.prototype.getExtensionNames=function(){return this.getExtensions().getNames()},t.prototype.getExtensions=function(){var e;return(null===(e=this.__extensions)||typeof e>"u")&&(this.__extensions=new fm.websync.extensions),this.__extensions},t.prototype.getExtensionValueJson=function(){var e;return e=arguments[0],this.getExtensions().getValueJson(e)},t.prototype.getMetaJson=function(){return this.getExtensionValueJson("fm.meta")},t.prototype.setExtensions=function(){var e,n;return this.__extensions=null===(n=e=arguments[0])||typeof n>"u"?new fm.websync.extensions:e},t.prototype.setExtensionValueJson=function(){var e,n,s;if(3===arguments.length)return e=arguments[0],s=arguments[1],n=arguments[2],this.getExtensions().setValueJson(e,s,n),void this.setIsDirty(!0);2===arguments.length&&(e=arguments[0],s=arguments[1],this.getExtensions().setValueJson(e,s),this.setIsDirty(!0))},t.prototype.setMetaJson=function(){return this.setExtensionValueJson("fm.meta",arguments[0])},t.prototype.getExtensionValue=function(){return fm.json.deserialize(this.getExtensionValueJson.apply(this,arguments))},t.prototype.getMeta=function(){return fm.json.deserialize(this.getMetaJson.apply(this,arguments))},t.prototype.setExtensionValue=function(){if(3===arguments.length)return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setExtensionValueJson.apply(this,arguments);2===arguments.length&&(arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setExtensionValueJson.apply(this,arguments))},t.prototype.setMeta=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setMetaJson.apply(this,arguments)},t}.call(this,fm.dynamic),fm.websync.baseInputArgs=function(o){function t(){if(this.setSynchronous=__bind(this.setSynchronous,this),this.setRequestUrl=__bind(this.setRequestUrl,this),this.setIsRetry=__bind(this.setIsRetry,this),this.getSynchronous=__bind(this.getSynchronous,this),this.getRequestUrl=__bind(this.getRequestUrl,this),this.getIsRetry=__bind(this.getIsRetry,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isRetry=!1,t.prototype._requestUrl=null,t.prototype._synchronous=null,t.prototype.getIsRetry=function(){return this._isRetry},t.prototype.getRequestUrl=function(){return this._requestUrl},t.prototype.getSynchronous=function(){return this._synchronous},t.prototype.setIsRetry=function(){return this._isRetry=arguments[0]},t.prototype.setRequestUrl=function(){return this._requestUrl=arguments[0]},t.prototype.setSynchronous=function(){return this._synchronous=arguments[0]},t}(fm.websync.extensible),fm.websync.baseOutputArgs=function(o){function t(){if(this.setTimestamp=__bind(this.setTimestamp,this),this.setClient=__bind(this.setClient,this),this.getTimestamp=__bind(this.getTimestamp,this),this.getClient=__bind(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__timestamp=null,t.prototype._client=null,t.prototype.getClient=function(){return this._client},t.prototype.getTimestamp=function(){return this.__timestamp},t.prototype.setClient=function(){return this._client=arguments[0]},t.prototype.setTimestamp=function(){var e;return this.__timestamp=null!==(e=arguments[0])?e:null},t}(fm.websync.extensible),fm.websync.basePublisherEventArgs=function(o){function t(){if(this.setPublisher=__bind(this.setPublisher,this),this.getPublisher=__bind(this.getPublisher,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._publisher=null,t.prototype.getPublisher=function(){return this._publisher},t.prototype.setPublisher=function(){return this._publisher=arguments[0]},t}(fm.object),fm.websync.basePublisherResponseEventArgs=function(o){function t(){if(this.setException=__bind(this.setException,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype.getException=function(){return this._exception},t.prototype.setException=function(){return this._exception=arguments[0]},t}(fm.websync.basePublisherEventArgs),fm.websync.basePublisherResponseEventArgsGeneric=function(o){function t(){if(this.setResponses=__bind(this.setResponses,this),this.setRequests=__bind(this.setRequests,this),this.getResponses=__bind(this.getResponses,this),this.getRequests=__bind(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requests=null,t.prototype._responses=null,t.prototype.getRequests=function(){return this._requests},t.prototype.getResponses=function(){return this._responses},t.prototype.setRequests=function(){return this._requests=arguments[0]},t.prototype.setResponses=function(){return this._responses=arguments[0]},t}(fm.websync.basePublisherResponseEventArgs),fm.websync.basePublisherRequestEventArgs=function(o){function t(){if(this.setCancel=__bind(this.setCancel,this),this.getCancel=__bind(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._cancel=!1,t.prototype.getCancel=function(){return this._cancel},t.prototype.setCancel=function(){return this._cancel=arguments[0]},t}(fm.websync.basePublisherEventArgs),fm.websync.basePublisherRequestEventArgsGeneric=function(o){function t(){if(this.setRequests=__bind(this.setRequests,this),this.getRequests=__bind(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requests=null,t.prototype.getRequests=function(){return this._requests},t.prototype.setRequests=function(){return this._requests=arguments[0]},t}(fm.websync.basePublisherRequestEventArgs),fm.websync.baseClientEventArgs=function(o){function t(){if(this.setClient=__bind(this.setClient,this),this.getClient=__bind(this.getClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._client=null,t.prototype.getClient=function(){return this._client},t.prototype.setClient=function(){return this._client=arguments[0]},t}(fm.object),fm.websync.baseClientEndEventArgs=function(o){function t(){if(this.setResponse=__bind(this.setResponse,this),this.setException=__bind(this.setException,this),this.getResponse=__bind(this.getResponse,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype._response=null,t.prototype.getException=function(){return this._exception},t.prototype.getResponse=function(){return this._response},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setResponse=function(){return this._response=arguments[0]},t}(fm.websync.baseClientEventArgs),fm.websync.baseClientEndEventArgsGeneric=function(o){function t(){if(this.setMethodArgs=__bind(this.setMethodArgs,this),this.getMethodArgs=__bind(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._methodArgs=null,t.prototype.getMethodArgs=function(){return this._methodArgs},t.prototype.setMethodArgs=function(){return this._methodArgs=arguments[0]},t}(fm.websync.baseClientEndEventArgs),fm.websync.baseClientResponseEventArgs=function(o){function t(){if(this.setResponse=__bind(this.setResponse,this),this.setException=__bind(this.setException,this),this.getResponse=__bind(this.getResponse,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype._response=null,t.prototype.getException=function(){return this._exception},t.prototype.getResponse=function(){return this._response},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setResponse=function(){return this._response=arguments[0]},t}(fm.websync.baseClientEventArgs),fm.websync.baseClientResponseEventArgsGeneric=function(o){function t(){if(this.setMethodArgs=__bind(this.setMethodArgs,this),this.getMethodArgs=__bind(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._methodArgs=null,t.prototype.getMethodArgs=function(){return this._methodArgs},t.prototype.setMethodArgs=function(){return this._methodArgs=arguments[0]},t}(fm.websync.baseClientResponseEventArgs),fm.websync.clientNotifyResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.baseServerArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseOutputArgs),fm.websync.baseSuccessArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseOutputArgs),fm.websync.baseReceiveArgs=function(o){function t(){var e;if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getIsBinary=__bind(this.getIsBinary,this),this.getDataJson=__bind(this.getDataJson,this),this.getDataBytes=__bind(this.getDataBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.__dataJson=e}return __extends(t,o),t.prototype.__dataJson=null,t.prototype.getDataBytes=function(){var e,n;return e=null,n=new fm.holder(e),fm.websync.crypto.tryBase64Decode(fm.serializer.deserializeString(this.__dataJson),n),n.getValue()},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getIsBinary=function(){var e;return null!==(e=this.getDataBytes())&&typeof e<"u"},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseSuccessArgs),fm.websync.baseClientRequestEventArgs=function(o){function t(){if(this.setCancel=__bind(this.setCancel,this),this.getCancel=__bind(this.getCancel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._cancel=!1,t.prototype.getCancel=function(){return this._cancel},t.prototype.setCancel=function(){return this._cancel=arguments[0]},t}(fm.websync.baseClientEventArgs),fm.websync.baseClientRequestEventArgsGeneric=function(o){function t(){if(this.setMethodArgs=__bind(this.setMethodArgs,this),this.getMethodArgs=__bind(this.getMethodArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._methodArgs=null,t.prototype.getMethodArgs=function(){return this._methodArgs},t.prototype.setMethodArgs=function(){return this._methodArgs=arguments[0]},t}(fm.websync.baseClientRequestEventArgs),fm.websync.clientNotifyRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientSubscribeEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientBindEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientConnectEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientDisconnectEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientNotifyEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientPublishEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientServiceEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientUnbindEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.clientUnsubscribeEndArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientEndEventArgsGeneric),fm.websync.notifyReceiveArgs=function(o){function t(){if(this.getWasSentByMe=__bind(this.getWasSentByMe,this),this.getNotifyingClient=__bind(this.getNotifyingClient,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this,arguments[0])}return __extends(t,o),t.prototype.getNotifyingClient=function(){return fm.websync.notifyingClient.fromJson(this.getExtensionValueJson("fm.notifying"))},t.prototype.getWasSentByMe=function(){var e,n,s;return e=this.getNotifyingClient(),n=this.getClient(),s=this.getNotifyingClient().getClientId(),null!==e&&typeof e<"u"&&null!==n&&typeof n<"u"&&null!==this.getNotifyingClient().getClientId()&&(null===s?s===this.getClient().getClientId():s.equals(this.getClient().getClientId()))},t}(fm.websync.baseReceiveArgs),fm.websync.socketOpenFailureArgs=function(o){function t(){if(this.setException=__bind(this.setException,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype.getException=function(){return this._exception},t.prototype.setException=function(){return this._exception=arguments[0]},t}(fm.dynamic),fm.websync.socketOpenSuccessArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.dynamic),fm.websync.socketStreamFailureArgs=function(o){function t(){if(this.setException=__bind(this.setException,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype.getException=function(){return this._exception},t.prototype.setException=function(){return this._exception=arguments[0]},t}(fm.dynamic),fm.websync.serverSubscribeArgs=function(o){function t(){if(this.getTag=__bind(this.getTag,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t}(fm.websync.baseSuccessArgs),fm.websync.serverUnsubscribeArgs=function(o){function t(){if(this.getTag=__bind(this.getTag,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t}(fm.websync.baseSuccessArgs),fm.websync.serverUnbindArgs=function(o){function t(){if(this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__records=null,t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t}(fm.websync.baseSuccessArgs),fm.websync.serverBindArgs=function(o){function t(){if(this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__records=null,t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t}(fm.websync.baseServerArgs),fm.websync.messageRequestCreatedArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setRequests=__bind(this.setRequests,this),this.getSender=__bind(this.getSender,this),this.getRequests=__bind(this.getRequests,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requests=null,t.prototype._sender=null,t.prototype.getRequests=function(){return this._requests},t.prototype.getSender=function(){return this._sender},t.prototype.setRequests=function(){return this._requests=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.websync.messageResponseReceivedArgs=function(o){function t(){if(this.setSender=__bind(this.setSender,this),this.setResponses=__bind(this.setResponses,this),this.getSender=__bind(this.getSender,this),this.getResponses=__bind(this.getResponses,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._responses=null,t.prototype._sender=null,t.prototype.getResponses=function(){return this._responses},t.prototype.getSender=function(){return this._sender},t.prototype.setResponses=function(){return this._responses=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t}(fm.object),fm.websync.messageRequestArgs=function(o){function t(){var e;if(this.setUrl=__bind(this.setUrl,this),this.setTimeout=__bind(this.setTimeout,this),this.setSender=__bind(this.setSender,this),this.setOnResponseReceived=__bind(this.setOnResponseReceived,this),this.setOnRequestCreated=__bind(this.setOnRequestCreated,this),this.setOnHttpResponseReceived=__bind(this.setOnHttpResponseReceived,this),this.setOnHttpRequestCreated=__bind(this.setOnHttpRequestCreated,this),this.setMessages=__bind(this.setMessages,this),this.setHeaders=__bind(this.setHeaders,this),this.getUrl=__bind(this.getUrl,this),this.getTimeout=__bind(this.getTimeout,this),this.getSender=__bind(this.getSender,this),this.getOnResponseReceived=__bind(this.getOnResponseReceived,this),this.getOnRequestCreated=__bind(this.getOnRequestCreated,this),this.getOnHttpResponseReceived=__bind(this.getOnHttpResponseReceived,this),this.getOnHttpRequestCreated=__bind(this.getOnHttpRequestCreated,this),this.getMessages=__bind(this.getMessages,this),this.getIsBinary=__bind(this.getIsBinary,this),this.getHeaders=__bind(this.getHeaders,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setTimeout(15e3),this.setHeaders(e)}return __extends(t,o),t.prototype._headers=null,t.prototype._messages=null,t.prototype._onHttpRequestCreated=null,t.prototype._onHttpResponseReceived=null,t.prototype._onRequestCreated=null,t.prototype._onResponseReceived=null,t.prototype._sender=null,t.prototype._timeout=0,t.prototype._url=null,t.prototype.getHeaders=function(){return this._headers},t.prototype.getIsBinary=function(){var e,n,s,r;for(n=0,s=(r=this.getMessages()).length;n<s;n++)if(!0===(e=r[n]).getDisableBinary()||!e.getIsBinary())return!1;return!0},t.prototype.getMessages=function(){return this._messages},t.prototype.getOnHttpRequestCreated=function(){return this._onHttpRequestCreated},t.prototype.getOnHttpResponseReceived=function(){return this._onHttpResponseReceived},t.prototype.getOnRequestCreated=function(){return this._onRequestCreated},t.prototype.getOnResponseReceived=function(){return this._onResponseReceived},t.prototype.getSender=function(){return this._sender},t.prototype.getTimeout=function(){return this._timeout},t.prototype.getUrl=function(){return this._url},t.prototype.setHeaders=function(){return this._headers=arguments[0]},t.prototype.setMessages=function(){return this._messages=arguments[0]},t.prototype.setOnHttpRequestCreated=function(){return this._onHttpRequestCreated=arguments[0]},t.prototype.setOnHttpResponseReceived=function(){return this._onHttpResponseReceived=arguments[0]},t.prototype.setOnRequestCreated=function(){return this._onRequestCreated=arguments[0]},t.prototype.setOnResponseReceived=function(){return this._onResponseReceived=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t.prototype.setTimeout=function(){return this._timeout=arguments[0]},t.prototype.setUrl=function(){return this._url=arguments[0]},t}(fm.dynamic),fm.websync.messageResponseArgs=function(o){function t(){var e;if(this.setRequestArgs=__bind(this.setRequestArgs,this),this.setMessages=__bind(this.setMessages,this),this.setHeaders=__bind(this.setHeaders,this),this.setException=__bind(this.setException,this),this.getRequestArgs=__bind(this.getRequestArgs,this),this.getMessages=__bind(this.getMessages,this),this.getHeaders=__bind(this.getHeaders,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setRequestArgs(e)}return __extends(t,o),t.prototype._exception=null,t.prototype._headers=null,t.prototype._messages=null,t.prototype._requestArgs=null,t.prototype.getException=function(){return this._exception},t.prototype.getHeaders=function(){return this._headers},t.prototype.getMessages=function(){return this._messages},t.prototype.getRequestArgs=function(){return this._requestArgs},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setHeaders=function(){return this._headers=arguments[0]},t.prototype.setMessages=function(){return this._messages=arguments[0]},t.prototype.setRequestArgs=function(){return this._requestArgs=arguments[0]},t}(fm.dynamic),fm.websync.notifyArgs=function(o){function t(){var e,n,s;return this.setData=__bind(this.setData,this),this.getData=__bind(this.getData,this),this.setTag=__bind(this.setTag,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setDataJson=__bind(this.setDataJson,this),this.setClientId=__bind(this.setClientId,this),this.getTag=__bind(this.getTag,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getDataJson=__bind(this.getDataJson,this),this.getClientId=__bind(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2!==arguments.length?3===arguments.length?(e=arguments[0],n=arguments[1],s=arguments[2],t.__super__.constructor.call(this),this.setClientId(e),this.setDataJson(n),void this.setTag(s)):void 0:void t.call(this,e=arguments[0],n=arguments[1],null)}return __extends(t,o),t.prototype.__dataJson=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getClientId=function(){var e;return null!==(e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")))?e:fm.guid.empty},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.setClientId=function(){return this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(arguments[0]),!1)},t.prototype.setDataJson=function(){var e,n;if(!(null===(n=e=arguments[0])||typeof n>"u"||fm.serializer.isValidJson(e)))throw new Error("The value is not valid JSON.");return this.__dataJson=e},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]),!1)},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t.prototype.setData=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},t}(fm.websync.baseInputArgs),fm.websync.baseCompleteArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseOutputArgs),fm.websync.notifyCompleteArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseCompleteArgs),fm.websync.baseFailureArgs=function(o){function t(){if(this.setRetry=__bind(this.setRetry,this),this.setException=__bind(this.setException,this),this.getRetry=__bind(this.getRetry,this),this.getException=__bind(this.getException,this),this.getErrorMessage=__bind(this.getErrorMessage,this),this.getErrorCode=__bind(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype._retry=!1,t.getErrorCode=function(){var e,n,s,r,i;e=arguments[0],n=-1;try{if(null===(r=e)||typeof r>"u"||fm.stringExtensions.isNullOrEmpty(e.message))return n;fm.stringExtensions.indexOf(e.message,"::")>-1&&(s=fm.websync.splitter.split(e.message,"::")[0],i=new fm.holder(n),fm.parseAssistant.tryParseInteger(s,i),n=i.getValue())}catch{}return n},t.getErrorMessage=function(){var e,n,s;e=arguments[0],n=null;try{if(null===(s=e)||typeof s>"u"||fm.stringExtensions.isNullOrEmpty(e.message))return n;if(fm.stringExtensions.indexOf(e.message,"::")>-1)return fm.websync.splitter.split(e.message,"::")[1];n=e.message}catch{}return n},t.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},t.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},t.prototype.getException=function(){return this._exception},t.prototype.getRetry=function(){return this._retry},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setRetry=function(){return this._retry=arguments[0]},t}.call(this,fm.websync.baseOutputArgs),fm.websync.notifyFailureArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getClientId=__bind(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__dataJson=null,t.prototype.getClientId=function(){var e;return null!==(e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")))?e:fm.guid.empty},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseFailureArgs),fm.websync.notifySuccessArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getClientId=__bind(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__dataJson=null,t.prototype.getClientId=function(){var e;return null!==(e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")))?e:fm.guid.empty},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseSuccessArgs),fm.websync.publisherNotifyResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.basePublisherResponseEventArgsGeneric),fm.websync.publisherNotifyRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.basePublisherRequestEventArgsGeneric),fm.websync.clientResponseArgs=function(o){function t(){var e;if(this.setResponses=__bind(this.setResponses,this),this.setResponse=__bind(this.setResponse,this),this.setException=__bind(this.setException,this),this.getResponses=__bind(this.getResponses,this),this.getResponse=__bind(this.getResponse,this),this.getException=__bind(this.getException,this),this.getErrorMessage=__bind(this.getErrorMessage,this),this.getErrorCode=__bind(this.getErrorCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setDynamicProperties(e)}return __extends(t,o),t.prototype._exception=null,t.prototype._responses=null,t.prototype.getErrorCode=function(){return fm.websync.baseFailureArgs.getErrorCode(this.getException())},t.prototype.getErrorMessage=function(){return fm.websync.baseFailureArgs.getErrorMessage(this.getException())},t.prototype.getException=function(){return this._exception},t.prototype.getResponse=function(){var e;return null===(e=this.getResponses())||typeof e>"u"||0===this.getResponses().length?null:this.getResponses()[0]},t.prototype.getResponses=function(){return this._responses},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setResponse=function(){return this.setResponses([arguments[0]])},t.prototype.setResponses=function(){return this._responses=arguments[0]},t}(fm.dynamic),fm.websync.connectArgs=function(o){function t(){if(this.setRetryMode=__bind(this.setRetryMode,this),this.setRetryBackoff=__bind(this.setRetryBackoff,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnStreamFailure=__bind(this.setOnStreamFailure,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setLastSessionId=__bind(this.setLastSessionId,this),this.setLastClientId=__bind(this.setLastClientId,this),this.setIsReconnect=__bind(this.setIsReconnect,this),this.getRetryMode=__bind(this.getRetryMode,this),this.getRetryBackoff=__bind(this.getRetryBackoff,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnStreamFailure=__bind(this.getOnStreamFailure,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getLastSessionId=__bind(this.getLastSessionId,this),this.getLastClientId=__bind(this.getLastClientId,this),this.getIsReconnect=__bind(this.getIsReconnect,this),this.defaultRetryBackoff=__bind(this.defaultRetryBackoff,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this._defaultRetryBackoffTimeout=500,this.setRetryMode(fm.websync.connectRetryMode.Intelligent),this.setRetryBackoff(this.defaultRetryBackoff)}return __extends(t,o),t.prototype._defaultRetryBackoffTimeout=0,t.prototype._isReconnect=!1,t.prototype._lastClientId=null,t.prototype._lastSessionId=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onStreamFailure=null,t.prototype._onSuccess=null,t.prototype._retryBackoff=null,t.prototype._retryMode=null,t.prototype.defaultRetryBackoff=function(){var e;return 0===(e=arguments[0]).getIndex()?this._defaultRetryBackoffTimeout:2*e.getLastTimeout()},t.prototype.getIsReconnect=function(){return this._isReconnect},t.prototype.getLastClientId=function(){return this._lastClientId},t.prototype.getLastSessionId=function(){return this._lastSessionId},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnStreamFailure=function(){return this._onStreamFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getRetryBackoff=function(){return this._retryBackoff},t.prototype.getRetryMode=function(){return this._retryMode},t.prototype.setIsReconnect=function(){return this._isReconnect=arguments[0]},t.prototype.setLastClientId=function(){return this._lastClientId=arguments[0]},t.prototype.setLastSessionId=function(){return this._lastSessionId=arguments[0]},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnStreamFailure=function(){return this._onStreamFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setRetryBackoff=function(){return this._retryBackoff=arguments[0]},t.prototype.setRetryMode=function(){return this._retryMode=arguments[0]},t}(fm.websync.baseInputArgs),fm.websync.bindArgs=function(o){function t(){var e;if(this.setRecords=__bind(this.setRecords,this),this.setRecord=__bind(this.setRecord,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setIsRebind=__bind(this.setIsRebind,this),this.setAutoRebind=__bind(this.setAutoRebind,this),this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getIsRebind=__bind(this.getIsRebind,this),this.getAutoRebind=__bind(this.getAutoRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setRecords(e)}return __extends(t,o),t.prototype.__records=null,t.prototype._autoRebind=null,t.prototype._isRebind=!1,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getAutoRebind=function(){return this._autoRebind},t.prototype.getIsRebind=function(){return this._isRebind},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t.prototype.setAutoRebind=function(){return this._autoRebind=arguments[0]},t.prototype.setIsRebind=function(){return this._isRebind=arguments[0]},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setRecord=function(){return this.__records=fm.websync.extensible.sharedSetRecord(arguments[0])},t.prototype.setRecords=function(){return this.__records=fm.websync.extensible.sharedSetRecords(arguments[0])},t}(fm.websync.baseInputArgs),fm.websync.serviceArgs=function(o){function t(){var e,n,s;return this.setData=__bind(this.setData,this),this.getData=__bind(this.getData,this),this.setTag=__bind(this.setTag,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setDataJson=__bind(this.setDataJson,this),this.setChannel=__bind(this.setChannel,this),this.getTag=__bind(this.getTag,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2!==arguments.length?3===arguments.length?(e=arguments[0],n=arguments[1],s=arguments[2],t.__super__.constructor.call(this),this.setChannel(e),this.setDataJson(n),void this.setTag(s)):void 0:void t.call(this,e=arguments[0],n=arguments[1],null)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.setChannel=function(){var e,n,s,r;if(n=arguments[0],e=null,s=new fm.holder(e),r=fm.websync.extensible.validateChannel(n,s),e=s.getValue(),!r)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",e));return this.__channel=n},t.prototype.setDataJson=function(){var e,n;if(!(null===(n=e=arguments[0])||typeof n>"u"||fm.serializer.isValidJson(e)))throw new Error("The value is not valid JSON.");return this.__dataJson=e},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]),!1)},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t.prototype.setData=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},t}(fm.websync.baseInputArgs),fm.websync.unbindArgs=function(o){function t(){var e;if(this.setRecords=__bind(this.setRecords,this),this.setRecord=__bind(this.setRecord,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setKeys=__bind(this.setKeys,this),this.setKey=__bind(this.setKey,this),this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),this.setRecords(e)}return __extends(t,o),t.prototype.__records=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t.prototype.setKey=function(){return this.__records=fm.websync.extensible.sharedSetKey(arguments[0])},t.prototype.setKeys=function(){return this.__records=fm.websync.extensible.sharedSetKeys(arguments[0])},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setRecord=function(){return this.__records=fm.websync.extensible.sharedSetRecord(arguments[0])},t.prototype.setRecords=function(){return this.__records=fm.websync.extensible.sharedSetRecords(arguments[0])},t}(fm.websync.baseInputArgs),fm.websync.disconnectArgs=function(o){function t(){if(this.setOnComplete=__bind(this.setOnComplete,this),this.getOnComplete=__bind(this.getOnComplete,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._onComplete=null,t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t}(fm.websync.baseInputArgs),fm.websync.publishArgs=function(o){function t(){var e,n,s;return this.setData=__bind(this.setData,this),this.getData=__bind(this.getData,this),this.setTag=__bind(this.setTag,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setDataJson=__bind(this.setDataJson,this),this.setChannel=__bind(this.setChannel,this),this.getTag=__bind(this.getTag,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):2!==arguments.length?3===arguments.length?(e=arguments[0],n=arguments[1],s=arguments[2],t.__super__.constructor.call(this),this.setChannel(e),this.setDataJson(n),void this.setTag(s)):void 0:void t.call(this,e=arguments[0],n=arguments[1],null)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.setChannel=function(){var e,n,s,r;if(n=arguments[0],e=null,s=new fm.holder(e),r=fm.websync.extensible.validateChannel(n,s),e=s.getValue(),!r)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",e));return this.__channel=n},t.prototype.setDataJson=function(){var e,n;if(!(null===(n=e=arguments[0])||typeof n>"u"||fm.serializer.isValidJson(e)))throw new Error("The value is not valid JSON.");return this.__dataJson=e},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]),!1)},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t.prototype.setData=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},t}(fm.websync.baseInputArgs),fm.websync.subscribeArgs=function(o){function t(){var e,n;return this.setTag=__bind(this.setTag,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnReceive=__bind(this.setOnReceive,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setIsResubscribe=__bind(this.setIsResubscribe,this),this.setChannels=__bind(this.setChannels,this),this.setChannel=__bind(this.setChannel,this),this.setAutoResubscribe=__bind(this.setAutoResubscribe,this),this.getTag=__bind(this.getTag,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnReceive=__bind(this.getOnReceive,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getIsResubscribe=__bind(this.getIsResubscribe,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),this.getAutoResubscribe=__bind(this.getAutoResubscribe,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):1===arguments.length?(e=arguments[0],t.__super__.constructor.call(this),void this.setChannels(e)):2===arguments.length?(e=arguments[0],n=arguments[1],t.__super__.constructor.call(this),this.setChannels(e),void this.setTag(n)):void 0}return __extends(t,o),t.prototype.__channels=null,t.prototype._autoResubscribe=null,t.prototype._isResubscribe=!1,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onReceive=null,t.prototype._onSuccess=null,t.prototype.getAutoResubscribe=function(){return this._autoResubscribe},t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getIsResubscribe=function(){return this._isResubscribe},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnReceive=function(){return this._onReceive},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t.prototype.setAutoResubscribe=function(){return this._autoResubscribe=arguments[0]},t.prototype.setChannel=function(){return this.__channels=fm.websync.extensible.sharedSetChannel(arguments[0])},t.prototype.setChannels=function(){return this.__channels=fm.websync.extensible.sharedSetChannels(arguments[0])},t.prototype.setIsResubscribe=function(){return this._isResubscribe=arguments[0]},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnReceive=function(){return this._onReceive=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]??fm.stringExtensions.empty),!1)},t}(fm.websync.baseInputArgs),fm.websync.unsubscribeArgs=function(o){function t(){var e,n;return this.setTag=__bind(this.setTag,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setOnComplete=__bind(this.setOnComplete,this),this.setChannels=__bind(this.setChannels,this),this.setChannel=__bind(this.setChannel,this),this.getTag=__bind(this.getTag,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getOnComplete=__bind(this.getOnComplete,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):1===arguments.length?(e=arguments[0],t.__super__.constructor.call(this),void this.setChannels(e)):2===arguments.length?(e=arguments[0],n=arguments[1],t.__super__.constructor.call(this),this.setChannels(e),void this.setTag(n)):void 0}return __extends(t,o),t.prototype.__channels=null,t.prototype._onComplete=null,t.prototype._onFailure=null,t.prototype._onSuccess=null,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t.prototype.setChannel=function(){return this.__channels=fm.websync.extensible.sharedSetChannel(arguments[0])},t.prototype.setChannels=function(){return this.__channels=fm.websync.extensible.sharedSetChannels(arguments[0])},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]??fm.stringExtensions.empty),!1)},t}(fm.websync.baseInputArgs),fm.websync.connectCompleteArgs=function(o){function t(){if(this.setIsReconnect=__bind(this.setIsReconnect,this),this.getIsReconnect=__bind(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isReconnect=!1,t.prototype.getIsReconnect=function(){return this._isReconnect},t.prototype.setIsReconnect=function(){return this._isReconnect=arguments[0]},t}(fm.websync.baseCompleteArgs),fm.websync.bindCompleteArgs=function(o){function t(){if(this.setIsRebind=__bind(this.setIsRebind,this),this.getIsRebind=__bind(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isRebind=!1,t.prototype.getIsRebind=function(){return this._isRebind},t.prototype.setIsRebind=function(){return this._isRebind=arguments[0]},t}(fm.websync.baseCompleteArgs),fm.websync.serviceCompleteArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseCompleteArgs),fm.websync.unbindCompleteArgs=function(o){function t(){if(this.getForced=__bind(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__forced=!1,t.prototype.getForced=function(){return this.__forced},t}(fm.websync.baseCompleteArgs),fm.websync.disconnectCompleteArgs=function(o){function t(){if(this.setException=__bind(this.setException,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype.getException=function(){return this._exception},t.prototype.setException=function(){return this._exception=arguments[0]},t}(fm.websync.baseCompleteArgs),fm.websync.publishCompleteArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseCompleteArgs),fm.websync.subscribeCompleteArgs=function(o){function t(){if(this.setIsResubscribe=__bind(this.setIsResubscribe,this),this.getIsResubscribe=__bind(this.getIsResubscribe,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isResubscribe=!1,t.prototype.getIsResubscribe=function(){return this._isResubscribe},t.prototype.setIsResubscribe=function(){return this._isResubscribe=arguments[0]},t}(fm.websync.baseCompleteArgs),fm.websync.unsubscribeCompleteArgs=function(o){function t(){if(this.getForced=__bind(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__forced=!1,t.prototype.getForced=function(){return this.__forced},t}(fm.websync.baseCompleteArgs),fm.websync.clientConnectResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientDisconnectResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientPublishResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientSubscribeResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientUnsubscribeResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientBindResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientUnbindResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientServiceResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientResponseEventArgsGeneric),fm.websync.clientConnectRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientDisconnectRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientPublishRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientSubscribeRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientUnsubscribeRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientBindRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientUnbindRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.clientServiceRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseClientRequestEventArgsGeneric),fm.websync.connectFailureArgs=function(o){function t(){if(this.setIsReconnect=__bind(this.setIsReconnect,this),this.getIsReconnect=__bind(this.getIsReconnect,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isReconnect=!1,t.prototype.getIsReconnect=function(){return this._isReconnect},t.prototype.setIsReconnect=function(){return this._isReconnect=arguments[0]},t}(fm.websync.baseFailureArgs),fm.websync.bindFailureArgs=function(o){function t(){if(this.setIsRebind=__bind(this.setIsRebind,this),this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),this.getIsRebind=__bind(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__records=null,t.prototype._isRebind=!1,t.prototype.getIsRebind=function(){return this._isRebind},t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t.prototype.setIsRebind=function(){return this._isRebind=arguments[0]},t}(fm.websync.baseFailureArgs),fm.websync.serviceFailureArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseFailureArgs),fm.websync.unbindFailureArgs=function(o){function t(){if(this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__records=null,t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t}(fm.websync.baseFailureArgs),fm.websync.streamFailureArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.baseFailureArgs),fm.websync.publishFailureArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseFailureArgs),fm.websync.subscribeFailureArgs=function(o){function t(){if(this.setIsResubscribe=__bind(this.setIsResubscribe,this),this.getTag=__bind(this.getTag,this),this.getIsResubscribe=__bind(this.getIsResubscribe,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype._isResubscribe=!1,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getIsResubscribe=function(){return this._isResubscribe},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t.prototype.setIsResubscribe=function(){return this._isResubscribe=arguments[0]},t}(fm.websync.baseFailureArgs),fm.websync.unsubscribeFailureArgs=function(o){function t(){if(this.getTag=__bind(this.getTag,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t}(fm.websync.baseFailureArgs),fm.websync.connectSuccessArgs=function(o){function t(){if(this.setIsReconnect=__bind(this.setIsReconnect,this),this.setConnectionType=__bind(this.setConnectionType,this),this.getIsReconnect=__bind(this.getIsReconnect,this),this.getConnectionType=__bind(this.getConnectionType,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._connectionType=null,t.prototype._isReconnect=!1,t.prototype.getConnectionType=function(){return this._connectionType},t.prototype.getIsReconnect=function(){return this._isReconnect},t.prototype.setConnectionType=function(){return this._connectionType=arguments[0]},t.prototype.setIsReconnect=function(){return this._isReconnect=arguments[0]},t}(fm.websync.baseSuccessArgs),fm.websync.bindSuccessArgs=function(o){function t(){if(this.setIsRebind=__bind(this.setIsRebind,this),this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),this.getIsRebind=__bind(this.getIsRebind,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__records=null,t.prototype._isRebind=!1,t.prototype.getIsRebind=function(){return this._isRebind},t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t.prototype.setIsRebind=function(){return this._isRebind=arguments[0]},t}(fm.websync.baseSuccessArgs),fm.websync.serviceSuccessArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseSuccessArgs),fm.websync.unbindSuccessArgs=function(o){function t(){if(this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),this.getForced=__bind(this.getForced,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__forced=!1,t.prototype.__records=null,t.prototype.getForced=function(){return this.__forced},t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t}(fm.websync.baseSuccessArgs),fm.websync.publishSuccessArgs=function(o){function t(){if(this.getData=__bind(this.getData,this),this.getTag=__bind(this.getTag,this),this.getDataJson=__bind(this.getDataJson,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channel=null,t.prototype.__dataJson=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t}(fm.websync.baseSuccessArgs),fm.websync.subscribeReceiveArgs=function(o){function t(){var e;if(this.getWasSentByMe=__bind(this.getWasSentByMe,this),this.getPublishingClient=__bind(this.getPublishingClient,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this,arguments[1]),this.__channel=e}return __extends(t,o),t.prototype.__channel=null,t.prototype.getChannel=function(){return this.__channel},t.prototype.getPublishingClient=function(){return fm.websync.publishingClient.fromJson(this.getExtensionValueJson("fm.publishing"))},t.prototype.getWasSentByMe=function(){var e,n,s;return e=this.getPublishingClient(),n=this.getClient(),s=this.getPublishingClient().getClientId(),null!==e&&typeof e<"u"&&null!==n&&typeof n<"u"&&null!==this.getPublishingClient().getClientId()&&(null===s?s===this.getClient().getClientId():s.equals(this.getClient().getClientId()))},t}(fm.websync.baseReceiveArgs),fm.websync.subscribeSuccessArgs=function(o){function t(){if(this.setIsResubscribe=__bind(this.setIsResubscribe,this),this.getTag=__bind(this.getTag,this),this.getIsResubscribe=__bind(this.getIsResubscribe,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype._isResubscribe=!1,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getIsResubscribe=function(){return this._isResubscribe},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t.prototype.setIsResubscribe=function(){return this._isResubscribe=arguments[0]},t}(fm.websync.baseSuccessArgs),fm.websync.unsubscribeSuccessArgs=function(o){function t(){if(this.getTag=__bind(this.getTag,this),this.getForced=__bind(this.getForced,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channels=null,t.prototype.__forced=!1,t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getForced=function(){return this.__forced},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t}(fm.websync.baseSuccessArgs),fm.websync.publisherPublishResponseArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.basePublisherResponseEventArgsGeneric),fm.websync.publisherPublishRequestArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.basePublisherRequestEventArgsGeneric),fm.websync.deferredRetryConnectState=function(o){function t(){if(this.setConnectArgs=__bind(this.setConnectArgs,this),this.setBackoffTimeout=__bind(this.setBackoffTimeout,this),this.getConnectArgs=__bind(this.getConnectArgs,this),this.getBackoffTimeout=__bind(this.getBackoffTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._backoffTimeout=0,t.prototype._connectArgs=null,t.prototype.getBackoffTimeout=function(){return this._backoffTimeout},t.prototype.getConnectArgs=function(){return this._connectArgs},t.prototype.setBackoffTimeout=function(){return this._backoffTimeout=arguments[0]},t.prototype.setConnectArgs=function(){return this._connectArgs=arguments[0]},t}(fm.object),fm.websync.deferredStreamState=function(o){function t(){if(this.setReceivedMessages=__bind(this.setReceivedMessages,this),this.setConnectArgs=__bind(this.setConnectArgs,this),this.getReceivedMessages=__bind(this.getReceivedMessages,this),this.getConnectArgs=__bind(this.getConnectArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._connectArgs=null,t.prototype._receivedMessages=!1,t.prototype.getConnectArgs=function(){return this._connectArgs},t.prototype.getReceivedMessages=function(){return this._receivedMessages},t.prototype.setConnectArgs=function(){return this._connectArgs=arguments[0]},t.prototype.setReceivedMessages=function(){return this._receivedMessages=arguments[0]},t}(fm.object),fm.websync.messageTransfer=function(o){function t(){if(this.shutdown=__bind(this.shutdown,this),this.sendMessagesAsync=__bind(this.sendMessagesAsync,this),this.sendMessages=__bind(this.sendMessages,this),this.sendAsyncCallback=__bind(this.sendAsyncCallback,this),this.sendAsync=__bind(this.sendAsync,this),this.send=__bind(this.send,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback",void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this._messageTransferCallbackKey="fm.websync.messageTransfer.callback"}return __extends(t,o),t.prototype._messageTransferCallbackKey=null,t.raiseRequestCreated=function(){var e,n,s;if(null!==(s=(n=arguments[0]).getOnRequestCreated())&&typeof s<"u")return(e=new fm.websync.messageRequestCreatedArgs).setRequests(n.getMessages()),e.setSender(n.getSender()),n.getOnRequestCreated()(e)},t.raiseResponseReceived=function(){var e,n,s,r;if(s=(n=arguments[0]).getException(),r=n.getRequestArgs().getOnResponseReceived(),(null===s||typeof s>"u")&&null!==r&&typeof r<"u")return(e=new fm.websync.messageResponseReceivedArgs).setResponses(n.getMessages()),e.setSender(n.getRequestArgs().getSender()),n.getRequestArgs().getOnResponseReceived()(e)},t.prototype.send=function(){var e,n,s;s=arguments[0],fm.websync.messageTransfer.raiseRequestCreated(s);try{e=this.sendMessages(s),fm.websync.messageTransfer.raiseResponseReceived(e)}catch(r){(n=new fm.websync.messageResponseArgs(s)).setException(r),e=n}return e},t.prototype.sendAsync=function(){var e,n,s;s=arguments[0],e=arguments[1],fm.websync.messageTransfer.raiseRequestCreated(s),s.setDynamicValue(this._messageTransferCallbackKey,e);try{return this.sendMessagesAsync(s,this.sendAsyncCallback)}catch(r){return(n=new fm.websync.messageResponseArgs(s)).setException(r),e(n)}},t.prototype.sendAsyncCallback=function(){var e,n;return e=(n=arguments[0]).getRequestArgs().getDynamicValue(this._messageTransferCallbackKey),fm.websync.messageTransfer.raiseResponseReceived(n),e(n)},t.prototype.sendMessages=function(){return arguments[0]},t.prototype.sendMessagesAsync=function(){return arguments[1]},t.prototype.shutdown=function(){},t}.call(this,fm.object),fm.websync.socketMessageTransfer=function(o){function t(){if(this.setStreamTimeout=__bind(this.setStreamTimeout,this),this.setSender=__bind(this.setSender,this),this.setOnStreamFailure=__bind(this.setOnStreamFailure,this),this.setOnResponseReceived=__bind(this.setOnResponseReceived,this),this.setOnRequestCreated=__bind(this.setOnRequestCreated,this),this.setOnOpenSuccess=__bind(this.setOnOpenSuccess,this),this.setOnOpenFailure=__bind(this.setOnOpenFailure,this),this.setHandshakeTimeout=__bind(this.setHandshakeTimeout,this),this.open=__bind(this.open,this),this.getStreamTimeout=__bind(this.getStreamTimeout,this),this.getSender=__bind(this.getSender,this),this.getOnStreamFailure=__bind(this.getOnStreamFailure,this),this.getOnResponseReceived=__bind(this.getOnResponseReceived,this),this.getOnRequestCreated=__bind(this.getOnRequestCreated,this),this.getOnOpenSuccess=__bind(this.getOnOpenSuccess,this),this.getOnOpenFailure=__bind(this.getOnOpenFailure,this),this.getHandshakeTimeout=__bind(this.getHandshakeTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._handshakeTimeout=0,t.prototype._onOpenFailure=null,t.prototype._onOpenSuccess=null,t.prototype._onRequestCreated=null,t.prototype._onResponseReceived=null,t.prototype._onStreamFailure=null,t.prototype._sender=null,t.prototype._streamTimeout=0,t.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},t.prototype.getOnOpenFailure=function(){return this._onOpenFailure},t.prototype.getOnOpenSuccess=function(){return this._onOpenSuccess},t.prototype.getOnRequestCreated=function(){return this._onRequestCreated},t.prototype.getOnResponseReceived=function(){return this._onResponseReceived},t.prototype.getOnStreamFailure=function(){return this._onStreamFailure},t.prototype.getSender=function(){return this._sender},t.prototype.getStreamTimeout=function(){return this._streamTimeout},t.prototype.open=function(){return arguments[0]},t.prototype.setHandshakeTimeout=function(){return this._handshakeTimeout=arguments[0]},t.prototype.setOnOpenFailure=function(){return this._onOpenFailure=arguments[0]},t.prototype.setOnOpenSuccess=function(){return this._onOpenSuccess=arguments[0]},t.prototype.setOnRequestCreated=function(){return this._onRequestCreated=arguments[0]},t.prototype.setOnResponseReceived=function(){return this._onResponseReceived=arguments[0]},t.prototype.setOnStreamFailure=function(){return this._onStreamFailure=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t.prototype.setStreamTimeout=function(){return this._streamTimeout=arguments[0]},t}(fm.websync.messageTransfer),fm.websync.messageTransferFactory=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t._createHttpMessageTransfer=null,t._createWebSocketMessageTransfer=null,t.defaultCreateHttpMessageTransfer=function(){return new fm.websync.httpWebRequestTransfer},t.defaultCreateWebSocketMessageTransfer=function(){return new fm.websync.webSocketTransfer(arguments[0])},t.getCreateHttpMessageTransfer=function(){return fm.websync.messageTransferFactory._createHttpMessageTransfer},t.getCreateWebSocketMessageTransfer=function(){return fm.websync.messageTransferFactory._createWebSocketMessageTransfer},t.getHttpMessageTransfer=function(){var e,n,s;return(null===(n=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer())||typeof n>"u")&&t.setCreateHttpMessageTransfer(t.defaultCreateHttpMessageTransfer),(null===(s=e=fm.websync.messageTransferFactory.getCreateHttpMessageTransfer()())||typeof s>"u")&&(e=fm.websync.messageTransferFactory.defaultCreateHttpMessageTransfer()),e},t.getWebSocketMessageTransfer=function(){var e,n,s,r;return e=arguments[0],(null===(s=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer())||typeof s>"u")&&t.setCreateWebSocketMessageTransfer(t.defaultCreateWebSocketMessageTransfer),(null===(r=n=fm.websync.messageTransferFactory.getCreateWebSocketMessageTransfer()(e))||typeof r>"u")&&(n=fm.websync.messageTransferFactory.defaultCreateWebSocketMessageTransfer(e)),n},t.setCreateHttpMessageTransfer=function(){return t._createHttpMessageTransfer=arguments[0]},t.setCreateWebSocketMessageTransfer=function(){return t._createWebSocketMessageTransfer=arguments[0]},t}.call(this,fm.object),fm.websync.webSocketCloseArgs=function(o){function t(){if(this.setStatusCode=__bind(this.setStatusCode,this),this.setReason=__bind(this.setReason,this),this.setOnComplete=__bind(this.setOnComplete,this),this.getStatusCode=__bind(this.getStatusCode,this),this.getReason=__bind(this.getReason,this),this.getOnComplete=__bind(this.getOnComplete,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setStatusCode(fm.websync.webSocketStatusCode.Normal),this.setReason(fm.stringExtensions.empty),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setStatusCode(fm.websync.webSocketStatusCode.Normal),this.setReason(fm.stringExtensions.empty)}return __extends(t,o),t.prototype._onComplete=null,t.prototype._reason=null,t.prototype._statusCode=null,t.prototype.getOnComplete=function(){return this._onComplete},t.prototype.getReason=function(){return this._reason},t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.setOnComplete=function(){return this._onComplete=arguments[0]},t.prototype.setReason=function(){return this._reason=arguments[0]},t.prototype.setStatusCode=function(){return this._statusCode=arguments[0]},t}(fm.dynamic),fm.websync.webSocketCloseCompleteArgs=function(o){function t(){if(this.setStatusCode=__bind(this.setStatusCode,this),this.setReason=__bind(this.setReason,this),this.getStatusCode=__bind(this.getStatusCode,this),this.getReason=__bind(this.getReason,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._reason=null,t.prototype._statusCode=null,t.prototype.getReason=function(){return this._reason},t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.setReason=function(){return this._reason=arguments[0]},t.prototype.setStatusCode=function(){return this._statusCode=arguments[0]},t}(fm.dynamic),fm.websync.webSocketSendState=function(o){function t(){if(this.setSendArgs=__bind(this.setSendArgs,this),this.setRequestBytes=__bind(this.setRequestBytes,this),this.getSendArgs=__bind(this.getSendArgs,this),this.getRequestBytes=__bind(this.getRequestBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._requestBytes=null,t.prototype._sendArgs=null,t.prototype.getRequestBytes=function(){return this._requestBytes},t.prototype.getSendArgs=function(){return this._sendArgs},t.prototype.setRequestBytes=function(){return this._requestBytes=arguments[0]},t.prototype.setSendArgs=function(){return this._sendArgs=arguments[0]},t}(fm.object),fm.websync.httpWebRequestTransfer=function(o){function t(){if(this.shutdown=__bind(this.shutdown,this),this.sendMessagesAsyncCallback=__bind(this.sendMessagesAsyncCallback,this),this.sendMessagesAsync=__bind(this.sendMessagesAsync,this),this.sendMessages=__bind(this.sendMessages,this),this.messageToHttpRequest=__bind(this.messageToHttpRequest,this),this.httpToMessageResponse=__bind(this.httpToMessageResponse,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),this._callbackKey="fm.websync.httpWebRequestTransfer.callback",this._requestArgsKey="fm.websync.httpWebRequestTransfer.requestArgs",void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this._httpTransfer=fm.httpTransferFactory.getHttpTransfer(),this._callbackKey="fm.websync.httpWebRequestTransfer.callback",this._requestArgsKey="fm.websync.httpWebRequestTransfer.requestArgs"}return __extends(t,o),t.prototype._callbackKey=null,t.prototype._httpTransfer=null,t.prototype._requestArgsKey=null,t.prototype.httpToMessageResponse=function(){var e,n,s,r,i;return s=(r=arguments[0]).getRequestArgs().getDynamicValue(this._requestArgsKey),(n=new fm.websync.messageResponseArgs(s)).setException(r.getException()),n.setHeaders(r.getHeaders()),e=n,fm.stringExtensions.isNullOrEmpty(r.getTextContent())?(null!==(i=r.getBinaryContent())&&typeof i<"u"&&e.setMessages(fm.websync.binaryMessage.fromBinaryMultiple(r.getBinaryContent())),e):(e.setMessages(fm.websync.message.fromJsonMultiple(r.getTextContent())),e)},t.prototype.messageToHttpRequest=function(){var e,n,s,r,i,a,u;for(s=arguments[0],(n=new fm.httpRequestArgs).setMethod(fm.httpMethod.Post),n.setOnRequestCreated(s.getOnHttpRequestCreated()),n.setOnResponseReceived(s.getOnHttpResponseReceived()),n.setSender(s.getSender()),n.setTimeout(s.getTimeout()),n.setUrl(s.getUrl()),n.setDynamicProperties(s.getDynamicProperties()),(e=n).setDynamicValue(this._requestArgsKey,s),i=0,a=(u=s.getHeaders().getAllKeys()).length;i<a;i++)r=u[i],e.getHeaders().set(r,s.getHeaders().get(r));return s.getIsBinary()?(e.setBinaryContent(fm.websync.binaryMessage.toBinaryMultiple(s.getMessages())),e.getHeaders().set("Content-Type","application/octet-stream"),e):(e.setTextContent(fm.websync.message.toJsonMultiple(s.getMessages())),e.getHeaders().set("Content-Type","application/json"),e)},t.prototype.sendMessages=function(){var e,n;return e=this.messageToHttpRequest(arguments[0]),n=this._httpTransfer.send(e),this.httpToMessageResponse(n)},t.prototype.sendMessagesAsync=function(){var e,n;return n=arguments[1],(e=this.messageToHttpRequest(arguments[0])).setDynamicValue(this._callbackKey,n),this._httpTransfer.sendAsync(e,this.sendMessagesAsyncCallback)},t.prototype.sendMessagesAsyncCallback=function(){var n;return(n=arguments[0]).getRequestArgs().getDynamicValue(this._callbackKey)(this.httpToMessageResponse(n))},t.prototype.shutdown=function(){try{return this._httpTransfer.shutdown()}catch{}},t}(fm.websync.messageTransfer),fm.websync.notifyingClient=function(o){function t(){var e,n;return this.toJson=__bind(this.toJson,this),this.setClientId=__bind(this.setClientId,this),this.setBoundRecords=__bind(this.setBoundRecords,this),this.getClientId=__bind(this.getClientId,this),this.getBoundRecords=__bind(this.getBoundRecords,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(t.__super__.constructor.call(this),void this.setBoundRecords({})):2===arguments.length?(n=arguments[0],e=arguments[1],t.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(e)):void 0}return __extends(t,o),t.prototype._boundRecords=null,t.prototype._clientId=null,t.fromJson=function(){return fm.websync.serializer.deserializeNotifyingClient(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeNotifyingClient(arguments[0])},t.prototype.getBoundRecords=function(){return this._boundRecords},t.prototype.getClientId=function(){return this._clientId},t.prototype.setBoundRecords=function(){return this._boundRecords=arguments[0]},t.prototype.setClientId=function(){return this._clientId=arguments[0]},t.prototype.toJson=function(){return fm.websync.notifyingClient.toJson(this)},t}.call(this,fm.serializable),fm.websync.baseMessage=function(o){function t(){if(this.setData=__bind(this.setData,this),this.getData=__bind(this.getData,this),this.setValidate=__bind(this.setValidate,this),this.setTimestamp=__bind(this.setTimestamp,this),this.setSuccessful=__bind(this.setSuccessful,this),this.setError=__bind(this.setError,this),this.setDataJson=__bind(this.setDataJson,this),this.setDataBytes=__bind(this.setDataBytes,this),this.getValidate=__bind(this.getValidate,this),this.getTimestamp=__bind(this.getTimestamp,this),this.getSuccessful=__bind(this.getSuccessful,this),this.getIsBinary=__bind(this.getIsBinary,this),this.getError=__bind(this.getError,this),this.getDataJson=__bind(this.getDataJson,this),this.getDataBytes=__bind(this.getDataBytes,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setValidate(!0),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setValidate(!0)}return __extends(t,o),t.prototype.__dataJson=null,t.prototype.__error=null,t.prototype.__successful=!1,t.prototype.__timestamp=null,t.prototype._validate=!1,t.prototype.getDataBytes=function(){var e,n;return e=null,n=new fm.holder(e),fm.websync.crypto.tryBase64Decode(fm.serializer.deserializeString(this.__dataJson),n),n.getValue()},t.prototype.getDataJson=function(){return this.__dataJson},t.prototype.getError=function(){return this.__error},t.prototype.getIsBinary=function(){var e;return null!==(e=this.getDataBytes())&&typeof e<"u"},t.prototype.getSuccessful=function(){return this.__successful},t.prototype.getTimestamp=function(){return this.__timestamp},t.prototype.getValidate=function(){return this._validate},t.prototype.setDataBytes=function(){return this.__dataJson=fm.serializer.serializeString(fm.websync.crypto.base64Encode(arguments[0])),this.setIsDirty(!0)},t.prototype.setDataJson=function(){var e,n;if(n=e=arguments[0],!(!this.getValidate()||null===n||typeof n>"u"||fm.serializer.isValidJson(e)))throw new Error("The value is not valid JSON.");return this.__dataJson=e,this.setIsDirty(!0)},t.prototype.setError=function(){return this.__error=arguments[0],this.setIsDirty(!0)},t.prototype.setSuccessful=function(){return this.__successful=arguments[0],this.setIsDirty(!0)},t.prototype.setTimestamp=function(){return this.__timestamp=arguments[0],this.setIsDirty(!0)},t.prototype.setValidate=function(){return this._validate=arguments[0]},t.prototype.getData=function(){return fm.json.deserialize(this.getDataJson.apply(this,arguments))},t.prototype.setData=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setDataJson.apply(this,arguments)},t}(fm.websync.extensible),fm.websync.notification=function(o){function t(){var e,n,s;if(this.toJson=__bind(this.toJson,this),this.setTag=__bind(this.setTag,this),this.setClientId=__bind(this.setClientId,this),this.getTag=__bind(this.getTag,this),this.getClientId=__bind(this.getClientId,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);if(0!==arguments.length){if(1===arguments.length)return e=arguments[0],t.__super__.constructor.call(this),void this.setClientId(e);if(2!==arguments.length)return 3===arguments.length?(e=arguments[0],n=arguments[1],s=arguments[2],t.__super__.constructor.call(this),this.setClientId(e),this.setDataJson(n),void this.setTag(s)):void 0;t.call(this,e=arguments[0],n=arguments[1],null)}else t.__super__.constructor.call(this)}return __extends(t,o),t.fromJson=function(){return fm.websync.serializer.deserializeNotification(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializeNotificationArray(arguments[0])},t.fromMessage=function(){var e,n,s;return null===(s=e=arguments[0])||typeof s>"u"?null:((n=new fm.websync.notification).setClientId(e.getNotifyClientId()),n.setSuccessful(e.getSuccessful()),n.setError(e.getError()),n.setTimestamp(e.getTimestamp()),n.setDataJson(e.getDataJson()),n.setExtensions(e.getExtensions()),n)},t.fromMessages=function(){var e,n,s,r;if(null===(r=n=arguments[0])||typeof r>"u")return null;for(s=[],e=0;e<n.length;)try{s[e]=fm.websync.notification.fromMessage(n[e])}finally{e++}return s},t.toJson=function(){return fm.websync.serializer.serializeNotification(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializeNotificationArray(arguments[0])},t.toMessage=function(){var e,n,s;return null===(s=n=arguments[0])||typeof s>"u"?null:((e=new fm.websync.message).setNotifyClientId(n.getClientId()),e.setSuccessful(n.getSuccessful()),e.setError(n.getError()),e.setTimestamp(n.getTimestamp()),e.setDataJson(n.getDataJson()),e.setExtensions(n.getExtensions()),e)},t.toMessages=function(){var e,n,s,r;if(null===(r=s=arguments[0])||typeof r>"u")return null;for(n=[],e=0;e<s.length;)try{n[e]=fm.websync.notification.toMessage(s[e])}finally{e++}return n},t.prototype.getClientId=function(){var e;return null!==(e=fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify")))?e:fm.guid.empty},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.setClientId=function(){return this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.notification.toJson(this)},t}.call(this,fm.websync.baseMessage),fm.websync.publisherResponseArgs=function(o){function t(){if(this.setResponses=__bind(this.setResponses,this),this.setResponse=__bind(this.setResponse,this),this.setException=__bind(this.setException,this),this.getResponses=__bind(this.getResponses,this),this.getResponse=__bind(this.getResponse,this),this.getException=__bind(this.getException,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._exception=null,t.prototype._responses=null,t.prototype.getException=function(){return this._exception},t.prototype.getResponse=function(){var e;return null===(e=this.getResponses())||typeof e>"u"||0===this.getResponses().length?null:this.getResponses()[0]},t.prototype.getResponses=function(){return this._responses},t.prototype.setException=function(){return this._exception=arguments[0]},t.prototype.setResponse=function(){return this.setResponses([arguments[0]])},t.prototype.setResponses=function(){return this._responses=arguments[0]},t}(fm.object),fm.websync.baseClient=function(o){function t(){var e,n;if(this.setRequestUrl=__bind(this.setRequestUrl,this),this.setRequestTimeout=__bind(this.setRequestTimeout,this),this.setDomainName=__bind(this.setDomainName,this),this.setDomainKey=__bind(this.setDomainKey,this),this.setDisableBinary=__bind(this.setDisableBinary,this),this.setConcurrencyMode=__bind(this.setConcurrencyMode,this),this.removeOnResponseReceived=__bind(this.removeOnResponseReceived,this),this.removeOnRequestCreated=__bind(this.removeOnRequestCreated,this),this.removeOnHttpResponseReceived=__bind(this.removeOnHttpResponseReceived,this),this.removeOnHttpRequestCreated=__bind(this.removeOnHttpRequestCreated,this),this.internalOnResponseReceived=__bind(this.internalOnResponseReceived,this),this.internalOnRequestCreated=__bind(this.internalOnRequestCreated,this),this.internalOnHttpResponseReceived=__bind(this.internalOnHttpResponseReceived,this),this.internalOnHttpRequestCreated=__bind(this.internalOnHttpRequestCreated,this),this.getRequestUrl=__bind(this.getRequestUrl,this),this.getRequestTimeout=__bind(this.getRequestTimeout,this),this.getDomainName=__bind(this.getDomainName,this),this.getDomainKey=__bind(this.getDomainKey,this),this.getDisableBinary=__bind(this.getDisableBinary,this),this.getConcurrencyMode=__bind(this.getConcurrencyMode,this),this.createHeadersNoCache=__bind(this.createHeadersNoCache,this),this.createHeaders=__bind(this.createHeaders,this),this.addOnResponseReceived=__bind(this.addOnResponseReceived,this),this.addOnRequestCreated=__bind(this.addOnRequestCreated,this),this.addOnHttpResponseReceived=__bind(this.addOnHttpResponseReceived,this),this.addOnHttpRequestCreated=__bind(this.addOnHttpRequestCreated,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);if(e=arguments[0],t.__super__.constructor.call(this),null===(n=e)||typeof n>"u")throw new Error("requestUrl cannot be null.");this.setRequestUrl(e),this.setRequestTimeout(15e3),this.setDomainKey(fm.websync.defaults.getDomainKey()),this.setDomainName(fm.websync.defaults.getDomainName()),this.setConcurrencyMode(fm.websync.concurrencyMode.Low)}return __extends(t,o),t.prototype.__domainName=null,t.prototype._concurrencyMode=null,t.prototype._disableBinary=!1,t.prototype._domainKey=null,t._headers=null,t._invalidResponseMessage="Invalid response received from server.",t.prototype._onHttpRequestCreated=null,t.prototype._onHttpResponseReceived=null,t.prototype._onRequestCreated=null,t.prototype._onResponseReceived=null,t.prototype._requestTimeout=0,t.prototype._requestUrl=null,t.sanitizeDomainName=function(){var e,n;return e=arguments[0],fm.stringExtensions.startsWith(e,"http://",fm.stringComparison.Ordinal)?e=e.substring(7):fm.stringExtensions.startsWith(e,"https://",fm.stringComparison.Ordinal)&&(e=e.substring(8)),-1!==(n=fm.stringExtensions.indexOf(e,"/"))&&(e=fm.stringExtensions.substring(e,0,n)),e},t.prototype.addOnHttpRequestCreated=function(){return this._onHttpRequestCreated=fm.delegate.combine(this._onHttpRequestCreated,arguments[0])},t.prototype.addOnHttpResponseReceived=function(){return this._onHttpResponseReceived=fm.delegate.combine(this._onHttpResponseReceived,arguments[0])},t.prototype.addOnRequestCreated=function(){return this._onRequestCreated=fm.delegate.combine(this._onRequestCreated,arguments[0])},t.prototype.addOnResponseReceived=function(){return this._onResponseReceived=fm.delegate.combine(this._onResponseReceived,arguments[0])},t.prototype.createHeaders=function(){var e;return this.getConcurrencyMode()===fm.websync.concurrencyMode.High?((null===(e=fm.websync.baseClient._headers)||typeof e>"u")&&(this._headers=this.createHeadersNoCache()),fm.websync.baseClient._headers):this.createHeadersNoCache()},t.prototype.createHeadersNoCache=function(){var e,n;return e=new fm.nameValueCollection,this.getDomainName()!==fm.websync.defaults.getDomainName()&&e.set("X-FM-DomainName",this.getDomainName()),(null===(n=this.getDomainKey())?n!==fm.websync.defaults.getDomainKey():!n.equals(fm.websync.defaults.getDomainKey()))&&e.set("X-FM-DomainKey",this.getDomainKey().toString()),e},t.prototype.getConcurrencyMode=function(){return this._concurrencyMode},t.prototype.getDisableBinary=function(){return this._disableBinary},t.prototype.getDomainKey=function(){return this._domainKey},t.prototype.getDomainName=function(){return this.__domainName},t.prototype.getRequestTimeout=function(){return this._requestTimeout},t.prototype.getRequestUrl=function(){return this._requestUrl},t.prototype.internalOnHttpRequestCreated=function(){var n,s;if(null!==(s=n=this._onHttpRequestCreated)&&typeof s<"u")return n(arguments[0])},t.prototype.internalOnHttpResponseReceived=function(){var n,s;if(null!==(s=n=this._onHttpResponseReceived)&&typeof s<"u")return n(arguments[0])},t.prototype.internalOnRequestCreated=function(){var n,s;if(null!==(s=n=this._onRequestCreated)&&typeof s<"u")return n(arguments[0])},t.prototype.internalOnResponseReceived=function(){var n,s;if(null!==(s=n=this._onResponseReceived)&&typeof s<"u")return n(arguments[0])},t.prototype.removeOnHttpRequestCreated=function(){return this._onHttpRequestCreated=fm.delegate.remove(this._onHttpRequestCreated,arguments[0])},t.prototype.removeOnHttpResponseReceived=function(){return this._onHttpResponseReceived=fm.delegate.remove(this._onHttpResponseReceived,arguments[0])},t.prototype.removeOnRequestCreated=function(){return this._onRequestCreated=fm.delegate.remove(this._onRequestCreated,arguments[0])},t.prototype.removeOnResponseReceived=function(){return this._onResponseReceived=fm.delegate.remove(this._onResponseReceived,arguments[0])},t.prototype.setConcurrencyMode=function(){return this._concurrencyMode=arguments[0]},t.prototype.setDisableBinary=function(){return this._disableBinary=arguments[0]},t.prototype.setDomainKey=function(){return this._domainKey=arguments[0]},t.prototype.setDomainName=function(){var e,n;return(null===(n=e=arguments[0])||typeof n>"u")&&(e=fm.websync.defaults.getDomainName()),this.__domainName=fm.websync.baseClient.sanitizeDomainName(e)},t.prototype.setRequestTimeout=function(){return this._requestTimeout=arguments[0]},t.prototype.setRequestUrl=function(){return this._requestUrl=arguments[0]},t._headers=null,t}.call(this,fm.dynamic),fm.websync.baseAdvice=function(o){function t(){if(this.toJson=__bind(this.toJson,this),this.setReconnect=__bind(this.setReconnect,this),this.setInterval=__bind(this.setInterval,this),this.setHosts=__bind(this.setHosts,this),this.getReconnect=__bind(this.getReconnect,this),this.getInterval=__bind(this.getInterval,this),this.getHosts=__bind(this.getHosts,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__hosts=null,t.prototype.__interval=null,t.prototype.__reconnect=null,t.fromJson=function(){return fm.websync.serializer.deserializeBaseAdvice(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeBaseAdvice(arguments[0])},t.prototype.getHosts=function(){return this.__hosts},t.prototype.getInterval=function(){return this.__interval},t.prototype.getReconnect=function(){return this.__reconnect},t.prototype.setHosts=function(){return this.__hosts=arguments[0],this.setIsDirty(!0)},t.prototype.setInterval=function(){return this.__interval=arguments[0],this.setIsDirty(!0)},t.prototype.setReconnect=function(){return this.__reconnect=arguments[0],this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.baseAdvice.toJson(this)},t}.call(this,fm.serializable),fm.websync.advice=function(o){function t(){if(this.toJson=__bind(this.toJson,this),this.setLongPolling=__bind(this.setLongPolling,this),this.setCallbackPolling=__bind(this.setCallbackPolling,this),this.getLongPolling=__bind(this.getLongPolling,this),this.getCallbackPolling=__bind(this.getCallbackPolling,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._callbackPolling=null,t.prototype._longPolling=null,t.fromJson=function(){return fm.websync.serializer.deserializeAdvice(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeAdvice(arguments[0])},t.prototype.getCallbackPolling=function(){return this._callbackPolling},t.prototype.getLongPolling=function(){return this._longPolling},t.prototype.setCallbackPolling=function(){return this._callbackPolling=arguments[0]},t.prototype.setLongPolling=function(){return this._longPolling=arguments[0]},t.prototype.toJson=function(){return fm.websync.advice.toJson(this)},t}.call(this,fm.websync.baseAdvice),fm.websync.metaChannels=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])}return __extends(t,o),t._bind="/meta/bind",t._connect="/meta/connect",t._disconnect="/meta/disconnect",t._handshake="/meta/handshake",t._metaPrefix="/meta/",t._notify="/meta/notify",t._servicePrefix="/service/",t._subscribe="/meta/subscribe",t._unbind="/meta/unbind",t._unsubscribe="/meta/unsubscribe",t.convertChannelFromServiced=function(){var e;return e=arguments[0],fm.websync.metaChannels.isServiceChannel(e)?e.substring(8):e},t.convertChannelToServiced=function(){var e,n;return null===(n=e=arguments[0])||typeof n>"u"||e.length<1?"/service/":fm.stringExtensions.concat("/service/",e.substring(1))},t.getMessageType=function(){var e;return"/meta/handshake"===(e=arguments[0])?fm.websync.messageType.Connect:"/meta/connect"===e?fm.websync.messageType.Stream:"/meta/disconnect"===e?fm.websync.messageType.Disconnect:"/meta/bind"===e?fm.websync.messageType.Bind:"/meta/unbind"===e?fm.websync.messageType.Unbind:"/meta/subscribe"===e?fm.websync.messageType.Subscribe:"/meta/unsubscribe"===e?fm.websync.messageType.Unsubscribe:"/meta/notify"===e?fm.websync.messageType.Notify:fm.websync.metaChannels.isServiceChannel(e)?fm.websync.messageType.Service:fm.websync.metaChannels.isMetaChannel(e)?fm.websync.messageType.Unknown:fm.websync.messageType.Publish},t.isMetaChannel=function(){var e,n;return null!==(n=e=arguments[0])&&typeof n<"u"&&fm.stringExtensions.startsWith(e,"/meta/",fm.stringComparison.Ordinal)},t.isReservedChannel=function(){var e;return e=arguments[0],fm.websync.metaChannels.isMetaChannel(e)||fm.websync.metaChannels.isServiceChannel(e)},t.isServiceChannel=function(){var e,n;return null!==(n=e=arguments[0])&&typeof n<"u"&&fm.stringExtensions.startsWith(e,"/service/",fm.stringComparison.Ordinal)},t}.call(this,fm.object),fm.websync.client=function(o){function t(){var e,n,s;if(this.webSocketStreamFailure=__bind(this.webSocketStreamFailure,this),this.webSocketOpenSuccess=__bind(this.webSocketOpenSuccess,this),this.webSocketOpenFailure=__bind(this.webSocketOpenFailure,this),this.unsubscribe=__bind(this.unsubscribe,this),this.unsetCustomOnReceiveWithTag=__bind(this.unsetCustomOnReceiveWithTag,this),this.unsetCustomOnReceive=__bind(this.unsetCustomOnReceive,this),this.unbind=__bind(this.unbind,this),this.subscribe=__bind(this.subscribe,this),this.streamDeferred=__bind(this.streamDeferred,this),this.streamCallback=__bind(this.streamCallback,this),this.stream=__bind(this.stream,this),this.startBatch=__bind(this.startBatch,this),this.setToken=__bind(this.setToken,this),this.setSynchronous=__bind(this.setSynchronous,this),this.setStreamRequestUrl=__bind(this.setStreamRequestUrl,this),this.setSessionId=__bind(this.setSessionId,this),this.setServerTimeout=__bind(this.setServerTimeout,this),this.setIsDisconnecting=__bind(this.setIsDisconnecting,this),this.setIsConnecting=__bind(this.setIsConnecting,this),this.setIsConnected=__bind(this.setIsConnected,this),this.setDisableWebSockets=__bind(this.setDisableWebSockets,this),this.setCustomOnReceiveWithTag=__bind(this.setCustomOnReceiveWithTag,this),this.setCustomOnReceive=__bind(this.setCustomOnReceive,this),this.setClientId=__bind(this.setClientId,this),this.service=__bind(this.service,this),this.sendMany=__bind(this.sendMany,this),this.sendCallback=__bind(this.sendCallback,this),this.send=__bind(this.send,this),this.retryConnectDeferred=__bind(this.retryConnectDeferred,this),this.retryConnect=__bind(this.retryConnect,this),this.restream=__bind(this.restream,this),this.removeSubscribedOnReceive=__bind(this.removeSubscribedOnReceive,this),this.removeSubscribedChannels=__bind(this.removeSubscribedChannels,this),this.removeOnUnsubscribeSuccess=__bind(this.removeOnUnsubscribeSuccess,this),this.removeOnUnsubscribeFailure=__bind(this.removeOnUnsubscribeFailure,this),this.removeOnUnsubscribeComplete=__bind(this.removeOnUnsubscribeComplete,this),this.removeOnUnbindSuccess=__bind(this.removeOnUnbindSuccess,this),this.removeOnUnbindFailure=__bind(this.removeOnUnbindFailure,this),this.removeOnUnbindComplete=__bind(this.removeOnUnbindComplete,this),this.removeOnSubscribeSuccess=__bind(this.removeOnSubscribeSuccess,this),this.removeOnSubscribeFailure=__bind(this.removeOnSubscribeFailure,this),this.removeOnSubscribeComplete=__bind(this.removeOnSubscribeComplete,this),this.removeOnStreamFailure=__bind(this.removeOnStreamFailure,this),this.removeOnServiceSuccess=__bind(this.removeOnServiceSuccess,this),this.removeOnServiceFailure=__bind(this.removeOnServiceFailure,this),this.removeOnServiceComplete=__bind(this.removeOnServiceComplete,this),this.removeOnServerUnsubscribe=__bind(this.removeOnServerUnsubscribe,this),this.removeOnServerUnbind=__bind(this.removeOnServerUnbind,this),this.removeOnServerSubscribe=__bind(this.removeOnServerSubscribe,this),this.removeOnServerBind=__bind(this.removeOnServerBind,this),this.removeOnPublishSuccess=__bind(this.removeOnPublishSuccess,this),this.removeOnPublishFailure=__bind(this.removeOnPublishFailure,this),this.removeOnPublishComplete=__bind(this.removeOnPublishComplete,this),this.removeOnNotifySuccess=__bind(this.removeOnNotifySuccess,this),this.removeOnNotifyFailure=__bind(this.removeOnNotifyFailure,this),this.removeOnNotifyComplete=__bind(this.removeOnNotifyComplete,this),this.removeOnNotify=__bind(this.removeOnNotify,this),this.removeOnDisconnectComplete=__bind(this.removeOnDisconnectComplete,this),this.removeOnConnectSuccess=__bind(this.removeOnConnectSuccess,this),this.removeOnConnectFailure=__bind(this.removeOnConnectFailure,this),this.removeOnConnectComplete=__bind(this.removeOnConnectComplete,this),this.removeOnBindSuccess=__bind(this.removeOnBindSuccess,this),this.removeOnBindFailure=__bind(this.removeOnBindFailure,this),this.removeOnBindComplete=__bind(this.removeOnBindComplete,this),this.removeBoundRecords=__bind(this.removeBoundRecords,this),this.reconnect=__bind(this.reconnect,this),this.receiveMessage=__bind(this.receiveMessage,this),this.raiseUnsubscribeSuccess=__bind(this.raiseUnsubscribeSuccess,this),this.raiseUnsubscribeFailure=__bind(this.raiseUnsubscribeFailure,this),this.raiseUnsubscribeComplete=__bind(this.raiseUnsubscribeComplete,this),this.raiseUnbindSuccess=__bind(this.raiseUnbindSuccess,this),this.raiseUnbindFailure=__bind(this.raiseUnbindFailure,this),this.raiseUnbindComplete=__bind(this.raiseUnbindComplete,this),this.raiseSubscribeSuccess=__bind(this.raiseSubscribeSuccess,this),this.raiseSubscribeFailure=__bind(this.raiseSubscribeFailure,this),this.raiseSubscribeDelivery=__bind(this.raiseSubscribeDelivery,this),this.raiseSubscribeComplete=__bind(this.raiseSubscribeComplete,this),this.raiseStreamFailure=__bind(this.raiseStreamFailure,this),this.raiseServiceSuccess=__bind(this.raiseServiceSuccess,this),this.raiseServiceFailure=__bind(this.raiseServiceFailure,this),this.raiseServiceComplete=__bind(this.raiseServiceComplete,this),this.raiseServerUnsubscribe=__bind(this.raiseServerUnsubscribe,this),this.raiseServerUnbind=__bind(this.raiseServerUnbind,this),this.raiseServerSubscribe=__bind(this.raiseServerSubscribe,this),this.raiseServerBind=__bind(this.raiseServerBind,this),this.raiseSendException=__bind(this.raiseSendException,this),this.raiseRetriable=__bind(this.raiseRetriable,this),this.raiseResponseEvent=__bind(this.raiseResponseEvent,this),this.raiseRequestEvent=__bind(this.raiseRequestEvent,this),this.raisePublishSuccess=__bind(this.raisePublishSuccess,this),this.raisePublishFailure=__bind(this.raisePublishFailure,this),this.raisePublishComplete=__bind(this.raisePublishComplete,this),this.raiseNotifySuccess=__bind(this.raiseNotifySuccess,this),this.raiseNotifyFailure=__bind(this.raiseNotifyFailure,this),this.raiseNotifyDelivery=__bind(this.raiseNotifyDelivery,this),this.raiseNotifyComplete=__bind(this.raiseNotifyComplete,this),this.raiseFunctionManual=__bind(this.raiseFunctionManual,this),this.raiseFunction=__bind(this.raiseFunction,this),this.raiseForcedUnsubscribes=__bind(this.raiseForcedUnsubscribes,this),this.raiseForcedUnbinds=__bind(this.raiseForcedUnbinds,this),this.raiseEvent=__bind(this.raiseEvent,this),this.raiseDisconnectComplete=__bind(this.raiseDisconnectComplete,this),this.raiseConnectSuccess=__bind(this.raiseConnectSuccess,this),this.raiseConnectFailure=__bind(this.raiseConnectFailure,this),this.raiseConnectComplete=__bind(this.raiseConnectComplete,this),this.raiseCompleteEvent=__bind(this.raiseCompleteEvent,this),this.raiseBindSuccess=__bind(this.raiseBindSuccess,this),this.raiseBindFailure=__bind(this.raiseBindFailure,this),this.raiseBindComplete=__bind(this.raiseBindComplete,this),this.raiseActionManual=__bind(this.raiseActionManual,this),this.raiseAction=__bind(this.raiseAction,this),this.publish=__bind(this.publish,this),this.processServerAction=__bind(this.processServerAction,this),this.processRequestUrl=__bind(this.processRequestUrl,this),this.processQueue=__bind(this.processQueue,this),this.processPendingReceives=__bind(this.processPendingReceives,this),this.processAdvice=__bind(this.processAdvice,this),this.preRaise=__bind(this.preRaise,this),this.postRaise=__bind(this.postRaise,this),this.performUnsubscribeCallback=__bind(this.performUnsubscribeCallback,this),this.performUnsubscribe=__bind(this.performUnsubscribe,this),this.performUnbindCallback=__bind(this.performUnbindCallback,this),this.performUnbind=__bind(this.performUnbind,this),this.performSubscribeCallback=__bind(this.performSubscribeCallback,this),this.performSubscribe=__bind(this.performSubscribe,this),this.performServiceCallback=__bind(this.performServiceCallback,this),this.performService=__bind(this.performService,this),this.performPublishCallback=__bind(this.performPublishCallback,this),this.performPublish=__bind(this.performPublish,this),this.performNotifyCallback=__bind(this.performNotifyCallback,this),this.performNotify=__bind(this.performNotify,this),this.performDisconnectCallback=__bind(this.performDisconnectCallback,this),this.performDisconnect=__bind(this.performDisconnect,this),this.performConnectCallback=__bind(this.performConnectCallback,this),this.performConnect=__bind(this.performConnect,this),this.performBindCallback=__bind(this.performBindCallback,this),this.performBind=__bind(this.performBind,this),this.notify=__bind(this.notify,this),this.inCallback=__bind(this.inCallback,this),this.inBatch=__bind(this.inBatch,this),this.getToken=__bind(this.getToken,this),this.getThreadId=__bind(this.getThreadId,this),this.getSynchronous=__bind(this.getSynchronous,this),this.getSubscribedChannels=__bind(this.getSubscribedChannels,this),this.getStreamRequestUrl=__bind(this.getStreamRequestUrl,this),this.getStreamRequestTimeout=__bind(this.getStreamRequestTimeout,this),this.getSessionId=__bind(this.getSessionId,this),this.getServerTimeout=__bind(this.getServerTimeout,this),this.getIsDisconnecting=__bind(this.getIsDisconnecting,this),this.getIsConnecting=__bind(this.getIsConnecting,this),this.getIsConnected=__bind(this.getIsConnected,this),this.getDisableWebSockets=__bind(this.getDisableWebSockets,this),this.getCustomOnReceiveWithTag=__bind(this.getCustomOnReceiveWithTag,this),this.getCustomOnReceive=__bind(this.getCustomOnReceive,this),this.getClientId=__bind(this.getClientId,this),this.getBoundRecords=__bind(this.getBoundRecords,this),this.endBatch=__bind(this.endBatch,this),this.disconnect=__bind(this.disconnect,this),this.connect=__bind(this.connect,this),this.clearSubscribedChannels=__bind(this.clearSubscribedChannels,this),this.clearBoundRecords=__bind(this.clearBoundRecords,this),this.checkSynchronous=__bind(this.checkSynchronous,this),this.bind=__bind(this.bind,this),this.addToQueue=__bind(this.addToQueue,this),this.addSubscribedOnReceive=__bind(this.addSubscribedOnReceive,this),this.addSubscribedChannels=__bind(this.addSubscribedChannels,this),this.addOnUnsubscribeSuccess=__bind(this.addOnUnsubscribeSuccess,this),this.addOnUnsubscribeFailure=__bind(this.addOnUnsubscribeFailure,this),this.addOnUnsubscribeComplete=__bind(this.addOnUnsubscribeComplete,this),this.addOnUnbindSuccess=__bind(this.addOnUnbindSuccess,this),this.addOnUnbindFailure=__bind(this.addOnUnbindFailure,this),this.addOnUnbindComplete=__bind(this.addOnUnbindComplete,this),this.addOnSubscribeSuccess=__bind(this.addOnSubscribeSuccess,this),this.addOnSubscribeFailure=__bind(this.addOnSubscribeFailure,this),this.addOnSubscribeComplete=__bind(this.addOnSubscribeComplete,this),this.addOnStreamFailure=__bind(this.addOnStreamFailure,this),this.addOnServiceSuccess=__bind(this.addOnServiceSuccess,this),this.addOnServiceFailure=__bind(this.addOnServiceFailure,this),this.addOnServiceComplete=__bind(this.addOnServiceComplete,this),this.addOnServerUnsubscribe=__bind(this.addOnServerUnsubscribe,this),this.addOnServerUnbind=__bind(this.addOnServerUnbind,this),this.addOnServerSubscribe=__bind(this.addOnServerSubscribe,this),this.addOnServerBind=__bind(this.addOnServerBind,this),this.addOnPublishSuccess=__bind(this.addOnPublishSuccess,this),this.addOnPublishFailure=__bind(this.addOnPublishFailure,this),this.addOnPublishComplete=__bind(this.addOnPublishComplete,this),this.addOnNotifySuccess=__bind(this.addOnNotifySuccess,this),this.addOnNotifyFailure=__bind(this.addOnNotifyFailure,this),this.addOnNotifyComplete=__bind(this.addOnNotifyComplete,this),this.addOnNotify=__bind(this.addOnNotify,this),this.addOnDisconnectComplete=__bind(this.addOnDisconnectComplete,this),this.addOnConnectSuccess=__bind(this.addOnConnectSuccess,this),this.addOnConnectFailure=__bind(this.addOnConnectFailure,this),this.addOnConnectComplete=__bind(this.addOnConnectComplete,this),this.addOnBindSuccess=__bind(this.addOnBindSuccess,this),this.addOnBindFailure=__bind(this.addOnBindFailure,this),this.addOnBindComplete=__bind(this.addOnBindComplete,this),this.addBoundRecords=__bind(this.addBoundRecords,this),this.activateStream=__bind(this.activateStream,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);if(1!==arguments.length){if(2===arguments.length){if(n=arguments[1],t.__super__.constructor.call(this,e=arguments[0]),this._counter=0,this._lastBackoffTimeout=0,this._lastBackoffIndex=-1,this._threadCounters={},this._threadCountersLock=new fm.object,this._lastInterval=0,this._lastReconnect=null,this._connectArgs=null,this._responseArgs=null,this._reconnectCacheLock=new fm.object,this._reconnectCache=[],this._rebindCache={},this._resubscribeCache={},this._boundRecordsLock=new fm.object,this._boundRecords={},this._subscribedChannelsLock=new fm.object,this._subscribedChannels={},this._subscribedOnReceivesLock=new fm.object,this._subscribedOnReceives={},this._subscribedDynamicProperties={},this._pendingReceives={},this._customOnReceivesLock=new fm.object,this._customOnReceives={},this._stateLock=new fm.object,this._queueLock=new fm.object,this._queueActivated=!1,this._requestQueue={},this._connectionType=fm.websync.connectionType.LongPolling,this._batchCounter=0,this._batchCounterLock=new fm.object,null===(s=n)||typeof s>"u")throw new Error("streamRequestUrl cannot be null.");return this.setStreamRequestUrl(n),this.setSynchronous(!1),this.setToken(fm.websync.client.generateToken()),void(this._requestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer())}}else t.call(this,e=arguments[0],e)}return __extends(t,o),t._argsKey=null,t.prototype._batchCounter=0,t.prototype._batchCounterLock=null,t.prototype._boundRecords=null,t.prototype._boundRecordsLock=null,t.prototype._clientId=null,t.prototype._connectArgs=null,t.prototype._connectionType=null,t.prototype._counter=0,t.prototype._customOnReceives=null,t.prototype._customOnReceivesLock=null,t.prototype._disableWebSockets=!1,t.prototype._isConnected=!1,t.prototype._isConnecting=!1,t.prototype._isDisconnecting=!1,t.prototype._lastBackoffIndex=0,t.prototype._lastBackoffTimeout=0,t.prototype._lastInterval=0,t.prototype._lastReconnect=null,t.prototype._onBindComplete=null,t._onBindEnd=null,t.prototype._onBindFailure=null,t._onBindRequest=null,t._onBindResponse=null,t.prototype._onBindSuccess=null,t.prototype._onConnectComplete=null,t._onConnectEnd=null,t.prototype._onConnectFailure=null,t._onConnectRequest=null,t._onConnectResponse=null,t.prototype._onConnectSuccess=null,t.prototype._onDisconnectComplete=null,t._onDisconnectEnd=null,t._onDisconnectRequest=null,t._onDisconnectResponse=null,t.prototype._onNotify=null,t.prototype._onNotifyComplete=null,t._onNotifyEnd=null,t.prototype._onNotifyFailure=null,t._onNotifyRequest=null,t._onNotifyResponse=null,t.prototype._onNotifySuccess=null,t.prototype._onPublishComplete=null,t._onPublishEnd=null,t.prototype._onPublishFailure=null,t._onPublishRequest=null,t._onPublishResponse=null,t.prototype._onPublishSuccess=null,t.prototype._onServerBind=null,t.prototype._onServerSubscribe=null,t.prototype._onServerUnbind=null,t.prototype._onServerUnsubscribe=null,t.prototype._onServiceComplete=null,t._onServiceEnd=null,t.prototype._onServiceFailure=null,t._onServiceRequest=null,t._onServiceResponse=null,t.prototype._onServiceSuccess=null,t.prototype._onStreamFailure=null,t.prototype._onSubscribeComplete=null,t._onSubscribeEnd=null,t.prototype._onSubscribeFailure=null,t._onSubscribeRequest=null,t._onSubscribeResponse=null,t.prototype._onSubscribeSuccess=null,t.prototype._onUnbindComplete=null,t._onUnbindEnd=null,t.prototype._onUnbindFailure=null,t._onUnbindRequest=null,t._onUnbindResponse=null,t.prototype._onUnbindSuccess=null,t.prototype._onUnsubscribeComplete=null,t._onUnsubscribeEnd=null,t.prototype._onUnsubscribeFailure=null,t._onUnsubscribeRequest=null,t._onUnsubscribeResponse=null,t.prototype._onUnsubscribeSuccess=null,t.prototype._pendingReceives=null,t.prototype._queueActivated=!1,t.prototype._queueLock=null,t.prototype._rebindCache=null,t.prototype._reconnectCache=null,t.prototype._reconnectCacheLock=null,t.prototype._requestQueue=null,t.prototype._requestTransfer=null,t._requestUrlCache=null,t._requestUrlCacheLock=null,t.prototype._responseArgs=null,t.prototype._resubscribeCache=null,t.prototype._serverTimeout=0,t.prototype._sessionId=null,t._stateKey=null,t.prototype._stateLock=null,t.prototype._streamRequestTransfer=null,t.prototype._streamRequestUrl=null,t.prototype._subscribedChannels=null,t.prototype._subscribedChannelsLock=null,t.prototype._subscribedDynamicProperties=null,t.prototype._subscribedOnReceives=null,t.prototype._subscribedOnReceivesLock=null,t._supportedConnectionTypes=null,t.prototype._synchronous=null,t.prototype._threadCounters=null,t.prototype._threadCountersLock=null,t.prototype._token=null,t.addOnBindEnd=function(){return fm.websync.client._onBindEnd=fm.delegate.combine(fm.websync.client._onBindEnd,arguments[0])},t.addOnBindRequest=function(){return fm.websync.client._onBindRequest=fm.delegate.combine(fm.websync.client._onBindRequest,arguments[0])},t.addOnBindResponse=function(){return fm.websync.client._onBindResponse=fm.delegate.combine(fm.websync.client._onBindResponse,arguments[0])},t.addOnConnectEnd=function(){return fm.websync.client._onConnectEnd=fm.delegate.combine(fm.websync.client._onConnectEnd,arguments[0])},t.addOnConnectRequest=function(){return fm.websync.client._onConnectRequest=fm.delegate.combine(fm.websync.client._onConnectRequest,arguments[0])},t.addOnConnectResponse=function(){return fm.websync.client._onConnectResponse=fm.delegate.combine(fm.websync.client._onConnectResponse,arguments[0])},t.addOnDisconnectEnd=function(){return fm.websync.client._onDisconnectEnd=fm.delegate.combine(fm.websync.client._onDisconnectEnd,arguments[0])},t.addOnDisconnectRequest=function(){return fm.websync.client._onDisconnectRequest=fm.delegate.combine(fm.websync.client._onDisconnectRequest,arguments[0])},t.addOnDisconnectResponse=function(){return fm.websync.client._onDisconnectResponse=fm.delegate.combine(fm.websync.client._onDisconnectResponse,arguments[0])},t.addOnNotifyEnd=function(){return fm.websync.client._onNotifyEnd=fm.delegate.combine(fm.websync.client._onNotifyEnd,arguments[0])},t.addOnNotifyRequest=function(){return fm.websync.client._onNotifyRequest=fm.delegate.combine(fm.websync.client._onNotifyRequest,arguments[0])},t.addOnNotifyResponse=function(){return fm.websync.client._onNotifyResponse=fm.delegate.combine(fm.websync.client._onNotifyResponse,arguments[0])},t.addOnPublishEnd=function(){return fm.websync.client._onPublishEnd=fm.delegate.combine(fm.websync.client._onPublishEnd,arguments[0])},t.addOnPublishRequest=function(){return fm.websync.client._onPublishRequest=fm.delegate.combine(fm.websync.client._onPublishRequest,arguments[0])},t.addOnPublishResponse=function(){return fm.websync.client._onPublishResponse=fm.delegate.combine(fm.websync.client._onPublishResponse,arguments[0])},t.addOnServiceEnd=function(){return fm.websync.client._onServiceEnd=fm.delegate.combine(fm.websync.client._onServiceEnd,arguments[0])},t.addOnServiceRequest=function(){return fm.websync.client._onServiceRequest=fm.delegate.combine(fm.websync.client._onServiceRequest,arguments[0])},t.addOnServiceResponse=function(){return fm.websync.client._onServiceResponse=fm.delegate.combine(fm.websync.client._onServiceResponse,arguments[0])},t.addOnSubscribeEnd=function(){return fm.websync.client._onSubscribeEnd=fm.delegate.combine(fm.websync.client._onSubscribeEnd,arguments[0])},t.addOnSubscribeRequest=function(){return fm.websync.client._onSubscribeRequest=fm.delegate.combine(fm.websync.client._onSubscribeRequest,arguments[0])},t.addOnSubscribeResponse=function(){return fm.websync.client._onSubscribeResponse=fm.delegate.combine(fm.websync.client._onSubscribeResponse,arguments[0])},t.addOnUnbindEnd=function(){return fm.websync.client._onUnbindEnd=fm.delegate.combine(fm.websync.client._onUnbindEnd,arguments[0])},t.addOnUnbindRequest=function(){return fm.websync.client._onUnbindRequest=fm.delegate.combine(fm.websync.client._onUnbindRequest,arguments[0])},t.addOnUnbindResponse=function(){return fm.websync.client._onUnbindResponse=fm.delegate.combine(fm.websync.client._onUnbindResponse,arguments[0])},t.addOnUnsubscribeEnd=function(){return fm.websync.client._onUnsubscribeEnd=fm.delegate.combine(fm.websync.client._onUnsubscribeEnd,arguments[0])},t.addOnUnsubscribeRequest=function(){return fm.websync.client._onUnsubscribeRequest=fm.delegate.combine(fm.websync.client._onUnsubscribeRequest,arguments[0])},t.addOnUnsubscribeResponse=function(){return fm.websync.client._onUnsubscribeResponse=fm.delegate.combine(fm.websync.client._onUnsubscribeResponse,arguments[0])},t.generateToken=function(){var e;return e=fm.intExtensions.toString(fm.dateTime.getUtcNow().getTicks()),fm.stringExtensions.substring(e,e.length-12,8)},t.getChannelForPublish=function(){var e,n,s,r;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"||null===(r=n.getChannel())||typeof r>"u"?e.getChannel():n.getChannel()},t.getChannelForService=function(){var e,n,s,r;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"||null===(r=e.getChannel())||typeof r>"u"?n.getChannel():e.getChannel()},t.getChannelsForSubscribe=function(){var e,n,s,r;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"||null===(r=e.getChannels())||typeof r>"u"?n.getChannels():e.getChannels()},t.getChannelsForUnsubscribe=function(){var e,n,s,r;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"||null===(r=e.getChannels())||typeof r>"u"?n.getChannels():e.getChannels()},t.getDataJsonForNotify=function(){var e,n,s,r;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"||null===(r=n.getDataJson())||typeof r>"u"?e.getDataJson():n.getDataJson()},t.getDataJsonForPublish=function(){var e,n,s,r;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"||null===(r=n.getDataJson())||typeof r>"u"?e.getDataJson():n.getDataJson()},t.getDataJsonForService=function(){var e,n,s,r;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"||null===(r=e.getDataJson())||typeof r>"u"?n.getDataJson():e.getDataJson()},t.getExtensions=function(){var e,n,s;return e=arguments[1],null!==(s=n=arguments[0])&&typeof s<"u"?n.getExtensions():e.getExtensions()},t.getRecordsForBind=function(){var e,n,s,r;return e=arguments[1],null===(s=n=arguments[0])||typeof s>"u"||null===(r=n.getRecords())||typeof r>"u"?e.getRecords():n.getRecords()},t.getRecordsForUnbind=function(){var e,n,s,r;return n=arguments[1],null===(s=e=arguments[0])||typeof s>"u"||null===(r=e.getRecords())||typeof r>"u"?n.getRecords():e.getRecords()},t.getSubscribeKey=function(){var e,n,s;return e=arguments[0],null===(s=n=arguments[1])||typeof s>"u"?fm.stringExtensions.format("-1|{0}",e):fm.stringExtensions.format("{0}|{1}{2}",fm.intExtensions.toString(n.length),n,e)},t.getTimestamp=function(){var e,n;return null!==(n=e=arguments[0])&&typeof n<"u"?e.getTimestamp():null},t.removeOnBindEnd=function(){return fm.websync.client._onBindEnd=fm.delegate.remove(fm.websync.client._onBindEnd,arguments[0])},t.removeOnBindRequest=function(){return fm.websync.client._onBindRequest=fm.delegate.remove(fm.websync.client._onBindRequest,arguments[0])},t.removeOnBindResponse=function(){return fm.websync.client._onBindResponse=fm.delegate.remove(fm.websync.client._onBindResponse,arguments[0])},t.removeOnConnectEnd=function(){return fm.websync.client._onConnectEnd=fm.delegate.remove(fm.websync.client._onConnectEnd,arguments[0])},t.removeOnConnectRequest=function(){return fm.websync.client._onConnectRequest=fm.delegate.remove(fm.websync.client._onConnectRequest,arguments[0])},t.removeOnConnectResponse=function(){return fm.websync.client._onConnectResponse=fm.delegate.remove(fm.websync.client._onConnectResponse,arguments[0])},t.removeOnDisconnectEnd=function(){return fm.websync.client._onDisconnectEnd=fm.delegate.remove(fm.websync.client._onDisconnectEnd,arguments[0])},t.removeOnDisconnectRequest=function(){return fm.websync.client._onDisconnectRequest=fm.delegate.remove(fm.websync.client._onDisconnectRequest,arguments[0])},t.removeOnDisconnectResponse=function(){return fm.websync.client._onDisconnectResponse=fm.delegate.remove(fm.websync.client._onDisconnectResponse,arguments[0])},t.removeOnNotifyEnd=function(){return fm.websync.client._onNotifyEnd=fm.delegate.remove(fm.websync.client._onNotifyEnd,arguments[0])},t.removeOnNotifyRequest=function(){return fm.websync.client._onNotifyRequest=fm.delegate.remove(fm.websync.client._onNotifyRequest,arguments[0])},t.removeOnNotifyResponse=function(){return fm.websync.client._onNotifyResponse=fm.delegate.remove(fm.websync.client._onNotifyResponse,arguments[0])},t.removeOnPublishEnd=function(){return fm.websync.client._onPublishEnd=fm.delegate.remove(fm.websync.client._onPublishEnd,arguments[0])},t.removeOnPublishRequest=function(){return fm.websync.client._onPublishRequest=fm.delegate.remove(fm.websync.client._onPublishRequest,arguments[0])},t.removeOnPublishResponse=function(){return fm.websync.client._onPublishResponse=fm.delegate.remove(fm.websync.client._onPublishResponse,arguments[0])},t.removeOnServiceEnd=function(){return fm.websync.client._onServiceEnd=fm.delegate.remove(fm.websync.client._onServiceEnd,arguments[0])},t.removeOnServiceRequest=function(){return fm.websync.client._onServiceRequest=fm.delegate.remove(fm.websync.client._onServiceRequest,arguments[0])},t.removeOnServiceResponse=function(){return fm.websync.client._onServiceResponse=fm.delegate.remove(fm.websync.client._onServiceResponse,arguments[0])},t.removeOnSubscribeEnd=function(){return fm.websync.client._onSubscribeEnd=fm.delegate.remove(fm.websync.client._onSubscribeEnd,arguments[0])},t.removeOnSubscribeRequest=function(){return fm.websync.client._onSubscribeRequest=fm.delegate.remove(fm.websync.client._onSubscribeRequest,arguments[0])},t.removeOnSubscribeResponse=function(){return fm.websync.client._onSubscribeResponse=fm.delegate.remove(fm.websync.client._onSubscribeResponse,arguments[0])},t.removeOnUnbindEnd=function(){return fm.websync.client._onUnbindEnd=fm.delegate.remove(fm.websync.client._onUnbindEnd,arguments[0])},t.removeOnUnbindRequest=function(){return fm.websync.client._onUnbindRequest=fm.delegate.remove(fm.websync.client._onUnbindRequest,arguments[0])},t.removeOnUnbindResponse=function(){return fm.websync.client._onUnbindResponse=fm.delegate.remove(fm.websync.client._onUnbindResponse,arguments[0])},t.removeOnUnsubscribeEnd=function(){return fm.websync.client._onUnsubscribeEnd=fm.delegate.remove(fm.websync.client._onUnsubscribeEnd,arguments[0])},t.removeOnUnsubscribeRequest=function(){return fm.websync.client._onUnsubscribeRequest=fm.delegate.remove(fm.websync.client._onUnsubscribeRequest,arguments[0])},t.removeOnUnsubscribeResponse=function(){return fm.websync.client._onUnsubscribeResponse=fm.delegate.remove(fm.websync.client._onUnsubscribeResponse,arguments[0])},t.prototype.activateStream=function(){var e,n,s;return n=arguments[0],s=arguments[1],this.raiseConnectSuccess(this._connectArgs,this._responseArgs),this.raiseConnectComplete(this._connectArgs,this._responseArgs),(e=new fm.websync.clientConnectEndArgs).setMethodArgs(n),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,e,s),this.processQueue(!0),this.stream(this._connectArgs,!1)},t.prototype.addBoundRecords=function(){var e,s,r,i,a;for(i=[],s=0,r=(a=arguments[0]).length;s<r;s++)i.push(this._boundRecords[(e=a[s]).getKey()]=e);return i},t.prototype.addOnBindComplete=function(){return this._onBindComplete=fm.delegate.combine(this._onBindComplete,arguments[0])},t.prototype.addOnBindFailure=function(){return this._onBindFailure=fm.delegate.combine(this._onBindFailure,arguments[0])},t.prototype.addOnBindSuccess=function(){return this._onBindSuccess=fm.delegate.combine(this._onBindSuccess,arguments[0])},t.prototype.addOnConnectComplete=function(){return this._onConnectComplete=fm.delegate.combine(this._onConnectComplete,arguments[0])},t.prototype.addOnConnectFailure=function(){return this._onConnectFailure=fm.delegate.combine(this._onConnectFailure,arguments[0])},t.prototype.addOnConnectSuccess=function(){return this._onConnectSuccess=fm.delegate.combine(this._onConnectSuccess,arguments[0])},t.prototype.addOnDisconnectComplete=function(){return this._onDisconnectComplete=fm.delegate.combine(this._onDisconnectComplete,arguments[0])},t.prototype.addOnNotify=function(){return this._onNotify=fm.delegate.combine(this._onNotify,arguments[0])},t.prototype.addOnNotifyComplete=function(){return this._onNotifyComplete=fm.delegate.combine(this._onNotifyComplete,arguments[0])},t.prototype.addOnNotifyFailure=function(){return this._onNotifyFailure=fm.delegate.combine(this._onNotifyFailure,arguments[0])},t.prototype.addOnNotifySuccess=function(){return this._onNotifySuccess=fm.delegate.combine(this._onNotifySuccess,arguments[0])},t.prototype.addOnPublishComplete=function(){return this._onPublishComplete=fm.delegate.combine(this._onPublishComplete,arguments[0])},t.prototype.addOnPublishFailure=function(){return this._onPublishFailure=fm.delegate.combine(this._onPublishFailure,arguments[0])},t.prototype.addOnPublishSuccess=function(){return this._onPublishSuccess=fm.delegate.combine(this._onPublishSuccess,arguments[0])},t.prototype.addOnServerBind=function(){return this._onServerBind=fm.delegate.combine(this._onServerBind,arguments[0])},t.prototype.addOnServerSubscribe=function(){return this._onServerSubscribe=fm.delegate.combine(this._onServerSubscribe,arguments[0])},t.prototype.addOnServerUnbind=function(){return this._onServerUnbind=fm.delegate.combine(this._onServerUnbind,arguments[0])},t.prototype.addOnServerUnsubscribe=function(){return this._onServerUnsubscribe=fm.delegate.combine(this._onServerUnsubscribe,arguments[0])},t.prototype.addOnServiceComplete=function(){return this._onServiceComplete=fm.delegate.combine(this._onServiceComplete,arguments[0])},t.prototype.addOnServiceFailure=function(){return this._onServiceFailure=fm.delegate.combine(this._onServiceFailure,arguments[0])},t.prototype.addOnServiceSuccess=function(){return this._onServiceSuccess=fm.delegate.combine(this._onServiceSuccess,arguments[0])},t.prototype.addOnStreamFailure=function(){return this._onStreamFailure=fm.delegate.combine(this._onStreamFailure,arguments[0])},t.prototype.addOnSubscribeComplete=function(){return this._onSubscribeComplete=fm.delegate.combine(this._onSubscribeComplete,arguments[0])},t.prototype.addOnSubscribeFailure=function(){return this._onSubscribeFailure=fm.delegate.combine(this._onSubscribeFailure,arguments[0])},t.prototype.addOnSubscribeSuccess=function(){return this._onSubscribeSuccess=fm.delegate.combine(this._onSubscribeSuccess,arguments[0])},t.prototype.addOnUnbindComplete=function(){return this._onUnbindComplete=fm.delegate.combine(this._onUnbindComplete,arguments[0])},t.prototype.addOnUnbindFailure=function(){return this._onUnbindFailure=fm.delegate.combine(this._onUnbindFailure,arguments[0])},t.prototype.addOnUnbindSuccess=function(){return this._onUnbindSuccess=fm.delegate.combine(this._onUnbindSuccess,arguments[0])},t.prototype.addOnUnsubscribeComplete=function(){return this._onUnsubscribeComplete=fm.delegate.combine(this._onUnsubscribeComplete,arguments[0])},t.prototype.addOnUnsubscribeFailure=function(){return this._onUnsubscribeFailure=fm.delegate.combine(this._onUnsubscribeFailure,arguments[0])},t.prototype.addOnUnsubscribeSuccess=function(){return this._onUnsubscribeSuccess=fm.delegate.combine(this._onUnsubscribeSuccess,arguments[0])},t.prototype.addSubscribedChannels=function(){var e,n,r,i,a,u,c,l,h;for(r=arguments[0],e=arguments[1],n=null,c=new fm.holder(n),l=fm.hashExtensions.tryGetValue(this._subscribedChannels,r,c),n=c.getValue(),l||(this._subscribedChannels[r]=n=[]),u=[],i=0,a=(h=e).length;i<a;i++)u.push(fm.arrayExtensions.add(n,h[i]));return u},t.prototype.addSubscribedOnReceive=function(){var e,n,s,r,i,a,u,c,l,h,g;for(a=arguments[0],e=arguments[1],r=arguments[2],s=arguments[3],n=null,l=new fm.holder(n),h=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,a,l),n=l.getValue(),h||(this._subscribedOnReceives[a]=n={}),u=0,c=(g=e).length;u<c;u++)n[i=g[u]]=r,this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(i,a)]=s;return this.processPendingReceives(e)},t.prototype.addToQueue=function(){var e,n,s,r;return n=arguments[0],s=arguments[2],r=(r=arguments[1])??this.getRequestUrl(),e=fm.stringExtensions.format("{0}{1}",s?"1":"0",r),fm.hashExtensions.containsKey(this._requestQueue,e)||(this._requestQueue[e]=[]),fm.arrayExtensions.add(this._requestQueue[e],n)},t.prototype.bind=function(){var e,n,s,r,i,a,u,c;if(null===(i=(e=arguments[0]).getRecords())||typeof i>"u"||0===e.getRecords().length)throw new Error("records cannot be null.");for(s=0,r=(a=e.getRecords()).length;s<r;s++){if(null===(u=(n=a[s]).getKey())||typeof u>"u")throw new Error("key cannot be null.");if(null===(c=n.getValueJson())||typeof c>"u")throw new Error("valueJson cannot be null.")}return this.performBind(e),this},t.prototype.checkSynchronous=function(){var e;return null!==(e=arguments[0])?e:null!==this.getSynchronous()&&this.getSynchronous()},t.prototype.clearBoundRecords=function(){return fm.hashExtensions.clear(this._boundRecords)},t.prototype.clearSubscribedChannels=function(){return fm.hashExtensions.clear(this._subscribedChannels),fm.hashExtensions.clear(this._customOnReceives)},t.prototype.connect=function(){return 0===arguments.length?this.connect(new fm.websync.connectArgs):1===arguments.length?(this.performConnect(arguments[0]),this):void 0},t.prototype.disconnect=function(){return 0===arguments.length?this.disconnect(new fm.websync.disconnectArgs):1===arguments.length?(this.performDisconnect(arguments[0]),this):void 0},t.prototype.endBatch=function(){var e;return e=!1,this._batchCounter--,this._batchCounter<=0&&(this._batchCounter=0,e=!0),e&&this.processQueue(!1),this},t.prototype.getBoundRecords=function(){var e,n,s,r,i;for(e={},s=0,r=(i=fm.hashExtensions.getKeys(this._boundRecords)).length;s<r;s++)e[n=i[s]]=this._boundRecords[n].duplicate();return e},t.prototype.getClientId=function(){return this._clientId},t.prototype.getCustomOnReceive=function(){return this.getCustomOnReceiveWithTag(arguments[0],fm.stringExtensions.empty)},t.prototype.getCustomOnReceiveWithTag=function(){var e,n,s,r,i,a,u,c,l;if(r=arguments[1],null===(i=n=arguments[0])||typeof i>"u")throw new Error("channel cannot be null.");return(null===(a=r)||typeof a>"u")&&(r=fm.stringExtensions.empty),e=null,s=null,u=new fm.holder(s),c=fm.hashExtensions.tryGetValue(this._customOnReceives,r,u),s=u.getValue(),c&&(l=new fm.holder(e),fm.hashExtensions.tryGetValue(s,n,l),e=l.getValue()),e},t.prototype.getDisableWebSockets=function(){return this._disableWebSockets},t.prototype.getIsConnected=function(){return this._isConnected},t.prototype.getIsConnecting=function(){return this._isConnecting},t.prototype.getIsDisconnecting=function(){return this._isDisconnecting},t.prototype.getServerTimeout=function(){return this._serverTimeout},t.prototype.getSessionId=function(){return this._sessionId},t.prototype.getStreamRequestTimeout=function(){return this.getRequestTimeout()+this.getServerTimeout()},t.prototype.getStreamRequestUrl=function(){return this._streamRequestUrl},t.prototype.getSubscribedChannels=function(){var e,s,r,i,a,c;if(1===arguments.length)return s=arguments[0],e=null,a=new fm.holder(e),fm.hashExtensions.tryGetValue(this._subscribedChannels,s,a),(null===(c=e=a.getValue())||typeof c>"u")&&(e=[]),fm.arrayExtensions.toArray(e);if(0===arguments.length){for(e=[],r=0,i=(a=fm.hashExtensions.getKeys(this._subscribedChannels)).length;r<i;r++)fm.arrayExtensions.addRange(e,this._subscribedChannels[a[r]]);return fm.arrayExtensions.toArray(e)}},t.prototype.getSynchronous=function(){return this._synchronous},t.prototype.getThreadId=function(){return fm.intExtensions.toString(fm.thread.getCurrentThread().getManagedThreadId())},t.prototype.getToken=function(){return this._token},t.prototype.inBatch=function(){return this._batchCounter>0},t.prototype.inCallback=function(){var e;return e=this.getThreadId(),fm.hashExtensions.containsKey(this._threadCounters,e)&&this._threadCounters[e]>0},t.prototype.notify=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performNotify(e),this},t.prototype.performBind=function(){var e,n,s,r,i,a;if(null===(n=arguments[0]).getAutoRebind()&&n.setAutoRebind(!this.inCallback()),(e=new fm.websync.clientBindRequestArgs).setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onBindRequest,e))return a=this.checkSynchronous(n.getSynchronous()),i=new fm.websync.clientRequest,(s=new fm.websync.message("/meta/bind")).setValidate(!1),s.setRecords(n.getRecords()),s.setExtensions(n.getExtensions()),i.setMessage(s),i.setCallback(this.performBindCallback),(r=i).setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(r,n.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performBindCallback=function(){var e,n,s,r,i,u,c,l,h,g;if(r=(u=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientBindResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onBindResponse,e,u),!(null!==(h=u.getException())&&typeof h<"u")){if(!0===r.getAutoRebind())for(fm.arrayExtensions.add(this._reconnectCache,r),c=0,l=(g=u.getResponse().getRecords()).length;c<l;c++)this._rebindCache[g[c].getKey()]=r;return this.addBoundRecords(u.getResponse().getRecords()),this.raiseBindSuccess(r,u),this.raiseBindComplete(r,u),(s=new fm.websync.clientBindEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onBindEnd,s,u)}if(i=this.raiseBindFailure(r,u,!1),this.raiseBindComplete(r,u),(n=new fm.websync.clientBindEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onBindEnd,n,u),i)return r.setIsRetry(!0),this.bind(r)},t.prototype.performConnect=function(){var e,n,s,r,i,a,u,c,l,h,g,p;if(i=arguments[0],(r=new fm.websync.clientConnectRequestArgs).setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onConnectRequest,r))return this.getIsConnecting()||this.getIsConnected()?(g=this.getIsConnecting()?"Already connecting.":"Already connected.",n=new fm.websync.clientResponseArgs(i.getDynamicProperties()),(a=new fm.websync.message("/meta/handshake")).setExtensions(i.getExtensions()),a.setTimestamp(fm.dateTime.getUtcNow()),a.setSuccessful(!1),a.setError(g),n.setResponse(a),n.setException(new Error(g)),h=n,(e=new fm.websync.clientConnectResponseArgs).setMethodArgs(i),this.raiseResponseEvent(fm.websync.client._onConnectResponse,e,h),this.raiseConnectFailure(i,h,!1),this.raiseConnectComplete(i,h),(s=new fm.websync.clientConnectEndArgs).setMethodArgs(i),void this.raiseCompleteEvent(fm.websync.client._onConnectEnd,s,h)):(this.setIsConnecting(!0),this._connectArgs=i,p=this.checkSynchronous(i.getSynchronous()),l=new fm.websync.clientRequest,(u=new fm.websync.message("/meta/handshake")).setVersion("1.0"),u.setMinimumVersion("1.0"),u.setSupportedConnectionTypes(fm.websync.client._supportedConnectionTypes),u.setExtensions(i.getExtensions()),l.setMessage(u),l.setCallback(this.performConnectCallback),c=l,null!==i.getLastClientId()&&null!==i.getLastSessionId()&&(c.getMessage().setLastClientId(i.getLastClientId()),c.getMessage().setLastSessionId(i.getLastSessionId())),c.setDynamicValue(fm.websync.client._argsKey,i),this.send(c,i.getRequestUrl(),p))},t.prototype.performConnectCallback=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,b,y,C,v,R,S,T,P,A,x,E,w,z,O,q;if(r=(g=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientConnectResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onConnectResponse,e,g),null===(A=g.getException())||typeof A>"u"){for(this.setClientId(g.getResponse().getClientId()),null!==(_=g.getResponse().getSessionId())&&this.setSessionId(_),m=g.getResponse().getServerTimeout(),this.setServerTimeout(null!==m?m:25e3),c=2147483647,R=0,T=(x=g.getResponse().getSupportedConnectionTypes()).length;R<T;R++)for(C=x[R],u=0;u<fm.websync.client._supportedConnectionTypes.length;)try{if(fm.websync.client._supportedConnectionTypes[u]===C){u<c&&(c=u);break}}finally{u++}c<0||c>fm.websync.client._supportedConnectionTypes.length?g.setException(new Error("Could not negotiate a connection type with the server.")):this._connectionType=fm.websync.client._supportedConnectionTypes[c]}if(null===(E=g.getException())||typeof E>"u"){for(this._lastBackoffIndex=-1,this._lastBackoffTimeout=0,l=[],fm.arrayExtensions.addRange(l,this._reconnectCache),fm.arrayExtensions.clear(this._reconnectCache),fm.hashExtensions.clear(this._rebindCache),fm.hashExtensions.clear(this._resubscribeCache),S=0,P=(w=l).length;S<P;S++)if(i=w[S],null!==(z=s=fm.global.tryCast(i,fm.websync.bindArgs))&&typeof z<"u")s.setIsRetry(!1),s.setIsRebind(!0),this.bind(s);else if(null!==(O=b=fm.global.tryCast(i,fm.websync.subscribeArgs))&&typeof O<"u"){b.setIsRetry(!1),b.setIsResubscribe(!0),this.subscribe(b);continue}if(this.setIsConnecting(!1),this.setIsConnected(!0),this._responseArgs=g,this._connectionType===fm.websync.connectionType.LongPolling||this.getDisableWebSockets())return this._connectionType=fm.websync.connectionType.LongPolling,this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(r,g);try{return(v=fm.websync.messageTransferFactory.getWebSocketMessageTransfer(this.processRequestUrl(this.getStreamRequestUrl()))).setHandshakeTimeout(this.getRequestTimeout()),v.setStreamTimeout(this.getStreamRequestTimeout()),v.setOnRequestCreated(this.internalOnHttpRequestCreated),v.setOnResponseReceived(this.internalOnHttpResponseReceived),v.setOnOpenSuccess(this.webSocketOpenSuccess),v.setOnOpenFailure(this.webSocketOpenFailure),v.setOnStreamFailure(this.webSocketStreamFailure),v.setSender(this),a=this.createHeaders(),this._streamRequestTransfer=v,v.open(a)}catch{return this._connectionType=fm.websync.connectionType.LongPolling,this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(r,g)}}else{switch(this.setIsConnecting(!1),p=!1,r.getRetryMode()){case fm.websync.connectRetryMode.Aggressive:p=!0;break;case fm.websync.connectRetryMode.Intelligent:p=g.getErrorCode()<800||g.getErrorCode()>899}if(p=this.raiseConnectFailure(r,g,p),this.raiseConnectComplete(r,g),(n=new fm.websync.clientConnectEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onConnectEnd,n,g),p)return y=0,null!==(q=r.getRetryBackoff())&&typeof q<"u"&&((h=new fm.websync.backoffArgs).setIndex(this._lastBackoffIndex+1),h.setLastTimeout(this._lastBackoffTimeout),y=r.getRetryBackoff()(h)),y>0?((d=new fm.websync.deferredRetryConnectState).setConnectArgs(r),d.setBackoffTimeout(y),fm.deferrer.defer(this.retryConnectDeferred,y,d)):this.retryConnect(r,y)}},t.prototype.performDisconnect=function(){var e,n,s,r,i,a;if(n=arguments[0],(e=new fm.websync.clientDisconnectRequestArgs).setMethodArgs(n),this.raiseRequestEvent(fm.websync.client._onDisconnectRequest,e))return this.setIsDisconnecting(!0),a=this.checkSynchronous(n.getSynchronous()),i=new fm.websync.clientRequest,(s=new fm.websync.message("/meta/disconnect")).setExtensions(n.getExtensions()),i.setMessage(s),i.setCallback(this.performDisconnectCallback),(r=i).setDynamicValue(fm.websync.client._argsKey,n),this.addToQueue(r,n.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performDisconnectCallback=function(){var e,n,s,r,i,a;s=(r=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientDisconnectResponseArgs).setMethodArgs(s),this.raiseResponseEvent(fm.websync.client._onDisconnectResponse,e,r),this.raiseForcedUnsubscribes(s,r),this.raiseForcedUnbinds(s,r),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsDisconnecting(!1),this.setIsConnected(!1);try{null!==(i=this._requestTransfer)&&typeof i<"u"&&this._requestTransfer.shutdown(),null!==(a=this._streamRequestTransfer)&&typeof a<"u"&&this._streamRequestTransfer.shutdown()}catch{}return this.raiseDisconnectComplete(s,r),this._queueActivated=!1,(n=new fm.websync.clientDisconnectEndArgs).setMethodArgs(s),this.raiseCompleteEvent(fm.websync.client._onDisconnectEnd,n,r)},t.prototype.performNotify=function(){var e,n,s,r,i,a;if(s=arguments[0],(e=new fm.websync.clientNotifyRequestArgs).setMethodArgs(s),this.raiseRequestEvent(fm.websync.client._onNotifyRequest,e))return a=this.checkSynchronous(s.getSynchronous()),i=new fm.websync.clientRequest,(n=new fm.websync.message("/meta/notify")).setValidate(!1),n.setDataJson(s.getDataJson()),n.setExtensions(s.getExtensions()),i.setMessage(n),i.setCallback(this.performNotifyCallback),(r=i).setDynamicValue(fm.websync.client._argsKey,s),this.addToQueue(r,s.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performNotifyCallback=function(){var e,n,s,r,i,a,u;return r=(a=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientNotifyResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onNotifyResponse,e,a),null!==(u=a.getException())&&typeof u<"u"?(i=this.raiseNotifyFailure(r,a,!1),this.raiseNotifyComplete(r,a),(n=new fm.websync.clientNotifyEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,n,a),i?(r.setIsRetry(!0),this.notify(r)):void 0):(this.raiseNotifySuccess(r,a),this.raiseNotifyComplete(r,a),(s=new fm.websync.clientNotifyEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onNotifyEnd,s,a))},t.prototype.performPublish=function(){var e,n,s,r,i,a;if(s=arguments[0],(e=new fm.websync.clientPublishRequestArgs).setMethodArgs(s),this.raiseRequestEvent(fm.websync.client._onPublishRequest,e))return a=this.checkSynchronous(s.getSynchronous()),i=new fm.websync.clientRequest,(n=new fm.websync.message(s.getChannel())).setValidate(!1),n.setDataJson(s.getDataJson()),n.setExtensions(s.getExtensions()),i.setMessage(n),i.setCallback(this.performPublishCallback),(r=i).setDynamicValue(fm.websync.client._argsKey,s),this.addToQueue(r,s.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performPublishCallback=function(){var e,n,s,r,i,a,u;return r=(a=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientPublishResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onPublishResponse,e,a),null!==(u=a.getException())&&typeof u<"u"?(i=this.raisePublishFailure(r,a,!1),this.raisePublishComplete(r,a),(n=new fm.websync.clientPublishEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,n,a),i?(r.setIsRetry(!0),this.publish(r)):void 0):(this.raisePublishSuccess(r,a),this.raisePublishComplete(r,a),(s=new fm.websync.clientPublishEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onPublishEnd,s,a))},t.prototype.performService=function(){var e,n,s,r,i,a;if(i=arguments[0],(e=new fm.websync.clientServiceRequestArgs).setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onServiceRequest,e))return a=this.checkSynchronous(i.getSynchronous()),r=new fm.websync.clientRequest,(n=new fm.websync.message(fm.websync.metaChannels.convertChannelToServiced(i.getChannel()))).setValidate(!1),n.setDataJson(i.getDataJson()),n.setExtensions(i.getExtensions()),r.setMessage(n),r.setCallback(this.performServiceCallback),(s=r).setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(s,i.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performServiceCallback=function(){var e,n,s,r,i,a,u;return r=(a=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientServiceResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onServiceResponse,e,a),null!==(u=a.getException())&&typeof u<"u"?(i=this.raiseServiceFailure(r,a,!1),this.raiseServiceComplete(r,a),(n=new fm.websync.clientServiceEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,n,a),i?(r.setIsRetry(!0),this.service(r)):void 0):(this.raiseServiceSuccess(r,a),this.raiseServiceComplete(r,a),(s=new fm.websync.clientServiceEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onServiceEnd,s,a))},t.prototype.performSubscribe=function(){var e,n,s,r,i,a;if(null===(i=arguments[0]).getAutoResubscribe()&&i.setAutoResubscribe(!this.inCallback()),(e=new fm.websync.clientSubscribeRequestArgs).setMethodArgs(i),this.raiseRequestEvent(fm.websync.client._onSubscribeRequest,e))return a=this.checkSynchronous(i.getSynchronous()),r=new fm.websync.clientRequest,(n=new fm.websync.message("/meta/subscribe")).setValidate(!1),n.setChannels(i.getChannels()),n.setExtensions(i.getExtensions()),r.setMessage(n),r.setCallback(this.performSubscribeCallback),(s=r).setDynamicValue(fm.websync.client._argsKey,i),this.addToQueue(s,i.getRequestUrl(),a),this.processQueue(!1)},t.prototype.performSubscribeCallback=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_;if(r=(a=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientSubscribeResponseArgs).setMethodArgs(r),this.raiseResponseEvent(fm.websync.client._onSubscribeResponse,e,a),!(null!==(p=a.getException())&&typeof p<"u")){if(!0===r.getAutoResubscribe())for(fm.arrayExtensions.add(this._reconnectCache,r),c=0,h=(m=a.getResponse().getChannels()).length;c<h;c++)u=m[c],this._resubscribeCache[fm.websync.client.getSubscribeKey(u,r.getTag())]=r;for(l=0,g=(_=a.getResponse().getChannels()).length;l<g;l++)u=_[l],this._subscribedDynamicProperties[fm.websync.client.getSubscribeKey(u,r.getTag())]=r.getDynamicProperties();return this.addSubscribedChannels(a.getResponse().getTag(),a.getResponse().getChannels()),this.raiseSubscribeSuccess(r,a),this.raiseSubscribeComplete(r,a),this.addSubscribedOnReceive(a.getResponse().getTag(),a.getResponse().getChannels(),r.getOnReceive(),r.getDynamicProperties()),(s=new fm.websync.clientSubscribeEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,s,a)}if(i=this.raiseSubscribeFailure(r,a,!1),this.raiseSubscribeComplete(r,a),(n=new fm.websync.clientSubscribeEndArgs).setMethodArgs(r),this.raiseCompleteEvent(fm.websync.client._onSubscribeEnd,n,a),i)return r.setIsRetry(!0),this.subscribe(r)},t.prototype.performUnbind=function(){var e,n,s,r,i,a;if(a=arguments[0],(e=new fm.websync.clientUnbindRequestArgs).setMethodArgs(a),this.raiseRequestEvent(fm.websync.client._onUnbindRequest,e))return i=this.checkSynchronous(a.getSynchronous()),r=new fm.websync.clientRequest,(n=new fm.websync.message("/meta/unbind")).setValidate(!1),n.setRecords(a.getRecords()),n.setExtensions(a.getExtensions()),r.setMessage(n),r.setCallback(this.performUnbindCallback),(s=r).setDynamicValue(fm.websync.client._argsKey,a),this.addToQueue(s,a.getRequestUrl(),i),this.processQueue(!1)},t.prototype.performUnbindCallback=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,y;if(i=(h=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientUnbindResponseArgs).setMethodArgs(i),this.raiseResponseEvent(fm.websync.client._onUnbindResponse,e,h),!(null!==(m=h.getException())&&typeof m<"u")){for(g=0,p=(_=h.getResponse().getRecords()).length;g<p;g++)if(l=_[g],s=null,d=new fm.holder(s),fm.hashExtensions.tryGetValue(this._rebindCache,l.getKey(),d),null!==(y=s=d.getValue())&&typeof y<"u"){for(c=[],u=0;u<fm.arrayExtensions.getCount(c);)try{c[u].getKey()===l.getKey()&&(c.removeAt(u),u--)}finally{u++}s.setRecords(fm.arrayExtensions.toArray(c)),fm.hashExtensions.remove(this._rebindCache,l.getKey()),fm.hashExtensions.containsValue(this._rebindCache,s)||fm.arrayExtensions.remove(this._reconnectCache,s)}return this.removeBoundRecords(h.getResponse().getRecords()),this.raiseUnbindSuccess(i,h,!1),this.raiseUnbindComplete(i,h,!1),(r=new fm.websync.clientUnbindEndArgs).setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,r,h)}if(a=this.raiseUnbindFailure(i,h,!1),this.raiseUnbindComplete(i,h,!1),(n=new fm.websync.clientUnbindEndArgs).setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onUnbindEnd,n,h),a)return i.setIsRetry(!0),this.unbind(i)},t.prototype.performUnsubscribe=function(){var e,n,s,r,i,a;if(a=arguments[0],(e=new fm.websync.clientUnsubscribeRequestArgs).setMethodArgs(a),this.raiseRequestEvent(fm.websync.client._onUnsubscribeRequest,e))return i=this.checkSynchronous(a.getSynchronous()),r=new fm.websync.clientRequest,(n=new fm.websync.message("/meta/unsubscribe")).setValidate(!1),n.setChannels(a.getChannels()),n.setExtensions(a.getExtensions()),r.setMessage(n),r.setCallback(this.performUnsubscribeCallback),(s=r).setDynamicValue(fm.websync.client._argsKey,a),this.addToQueue(s,a.getRequestUrl(),i),this.processQueue(!1)},t.prototype.performUnsubscribeCallback=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,y;if(i=(c=arguments[0]).getDynamicValue(fm.websync.client._argsKey),(e=new fm.websync.clientUnsubscribeResponseArgs).setMethodArgs(i),this.raiseResponseEvent(fm.websync.client._onUnsubscribeResponse,e,c),!(null!==(m=c.getException())&&typeof m<"u")){for(g=0,p=(_=c.getResponse().getChannels()).length;g<p;g++)l=_[g],s=null,h=fm.websync.client.getSubscribeKey(l,i.getTag()),d=new fm.holder(s),fm.hashExtensions.tryGetValue(this._resubscribeCache,h,d),null!==(y=s=d.getValue())&&typeof y<"u"&&(u=[],fm.arrayExtensions.remove(u,l),s.setChannels(fm.arrayExtensions.toArray(u)),fm.hashExtensions.remove(this._resubscribeCache,h),fm.hashExtensions.containsValue(this._resubscribeCache,s)||fm.arrayExtensions.remove(this._reconnectCache,s));return this.removeSubscribedChannels(c.getResponse().getTag(),c.getResponse().getChannels()),this.removeSubscribedOnReceive(c.getResponse().getTag(),c.getResponse().getChannels()),this.raiseUnsubscribeSuccess(i,c,!1),this.raiseUnsubscribeComplete(i,c,!1),(r=new fm.websync.clientUnsubscribeEndArgs).setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,r,c)}if(a=this.raiseUnsubscribeFailure(i,c,!1),this.raiseUnsubscribeComplete(i,c,!1),(n=new fm.websync.clientUnsubscribeEndArgs).setMethodArgs(i),this.raiseCompleteEvent(fm.websync.client._onUnsubscribeEnd,n,c),a)return i.setIsRetry(!0),this.unsubscribe(i)},t.prototype.postRaise=function(){var e,n;return n=arguments[0],this.getConcurrencyMode()===fm.websync.concurrencyMode.Low?1===(e=this._threadCounters[n])?fm.hashExtensions.remove(this._threadCounters,n):this._threadCounters[n]=e-1:this._threadCounters[n]=(e=this._threadCounters[n])-1},t.prototype.preRaise=function(){var e,n;return n=arguments[0],e=0,fm.hashExtensions.containsKey(this._threadCounters,n)&&(e=this._threadCounters[n]),this._threadCounters[n]=e+1},t.prototype.processAdvice=function(){var e;if(null!==(e=arguments[0]).getInterval()&&(this._lastInterval=e.getInterval()),null!==e.getReconnect())return this._lastReconnect=e.getReconnect()},t.prototype.processPendingReceives=function(){var n,r,i,a,u,c,l,h,g,p;for(u=[],i=0,a=(c=arguments[0]).length;i<a;i++)r=c[i],n=null,l=new fm.holder(n),h=fm.hashExtensions.tryGetValue(this._pendingReceives,r,l),n=l.getValue(),h&&fm.hashExtensions.remove(this._pendingReceives,r),null!==(g=n)&&typeof g<"u"?(p=n,u.push(function(){var m,_,d;for(d=[],m=0,_=p.length;m<_;m++)d.push(this.receiveMessage(p[m]));return d}.call(this))):u.push(void 0);return u},t.prototype.processQueue=function(){var n,s,r,i,a,u,c,l,h;if(arguments[0]&&(this._queueActivated=!0),this._queueActivated&&!this.inBatch()){for(n=this._requestQueue,this._requestQueue={},l=[],u=0,c=(h=fm.hashExtensions.getKeys(n)).length;u<c;u++)r=h[u],i="1"===fm.stringExtensions.substring(r,0,1),a=r.substring(1),s=fm.arrayExtensions.toArray(n[r]),l.push(this.sendMany(s,a,i));return l}},t.prototype.processRequestUrl=function(){var e,n,s,r,i;if(n=arguments[0],fm.stringExtensions.isNullOrEmpty(n)&&(n=this.getRequestUrl()),e=!1,s=null,this.getConcurrencyMode()===fm.websync.concurrencyMode.High&&(r=new fm.holder(s),i=fm.hashExtensions.tryGetValue(fm.websync.client._requestUrlCache,n,r),s=r.getValue(),e=i),!e){if(s=n,s=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(s,"token",this.getToken()),"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.websync.concurrencyMode.High)return s;fm.websync.client._requestUrlCache[n]=s}return s},t.prototype.processServerAction=function(){var e,n,s;if("/meta/bind"===(n=arguments[0]).getBayeuxChannel())return this.addBoundRecords(n.getRecords()),this.raiseServerBind(n);if("/meta/unbind"===n.getBayeuxChannel())return this.removeBoundRecords(n.getRecords()),this.raiseServerUnbind(n);if("/meta/subscribe"===n.getBayeuxChannel()){if(this.addSubscribedChannels(n.getTag(),n.getChannels()),null===(s=e=this.raiseServerSubscribe(n))||typeof s>"u")throw new Error(fm.stringExtensions.format("The server subscribed the client to [{0}], but the client did not supply a callback to handle received messages. A callback must be specified in the client's OnServerSubscribe event.",fm.stringExtensions.join(", ",n.getChannels())));return this.addSubscribedOnReceive(n.getTag(),n.getChannels(),e,n.getDynamicProperties())}return"/meta/unsubscribe"===n.getBayeuxChannel()?(this.removeSubscribedChannels(n.getTag(),n.getChannels()),this.raiseServerUnsubscribe(n),this.removeSubscribedOnReceive(n.getTag(),n.getChannels())):void 0},t.prototype.publish=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");if(fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performPublish(e),this},t.prototype.raiseAction=function(){return this.raiseActionManual(arguments[0],arguments[1],!1)},t.prototype.raiseActionManual=function(){var e,n,s,i;if(n=arguments[0],e=arguments[1],arguments[2])try{return n(e)}catch(a){return s=a,fm.asyncException.asyncThrow(s)}else{i=this.getThreadId(),this.preRaise(i);try{return n(e)}catch(a){return s=a,fm.asyncException.asyncThrow(s)}finally{this.postRaise(i)}}},t.prototype.raiseBindComplete=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.bindCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setIsRebind(s.getIsRebind()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onBindComplete)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnComplete())&&typeof u<"u")return this.raiseAction(s.getOnComplete(),e)},t.prototype.raiseBindFailure=function(){var e,n,s,r,i,a,u,c;return s=arguments[0],i=arguments[1],a=arguments[2],(n=new fm.websync.bindFailureArgs).__records=fm.websync.client.getRecordsForBind(i.getResponse(),s),n.setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setIsRebind(s.getIsRebind()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(u=r=this._onBindFailure)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=s.getOnFailure())&&typeof c<"u"&&(a=this.raiseRetriable(s.getOnFailure(),a,e)),a},t.prototype.raiseBindSuccess=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.bindSuccessArgs).__records=fm.websync.client.getRecordsForBind(i.getResponse(),s),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setIsRebind(s.getIsRebind()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onBindSuccess)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnSuccess())&&typeof u<"u")return this.raiseAction(s.getOnSuccess(),e)},t.prototype.raiseCompleteEvent=function(){var e,n,s;return n=arguments[0],(e=arguments[1]).setException((s=arguments[2]).getException()),e.setResponse(s.getResponse()),this.raiseEvent(n,e)},t.prototype.raiseConnectComplete=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.connectCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setIsReconnect(s.getIsReconnect()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onConnectComplete)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnComplete())&&typeof u<"u")return this.raiseAction(s.getOnComplete(),e)},t.prototype.raiseConnectFailure=function(){var e,n,s,r,i,a,u,c;return s=arguments[0],i=arguments[1],a=arguments[2],(n=new fm.websync.connectFailureArgs).setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setIsReconnect(s.getIsReconnect()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(u=r=this._onConnectFailure)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=s.getOnFailure())&&typeof c<"u"&&(a=this.raiseRetriable(s.getOnFailure(),a,e)),a},t.prototype.raiseConnectSuccess=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.connectSuccessArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setConnectionType(this._connectionType),n.setIsReconnect(s.getIsReconnect()),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onConnectSuccess)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnSuccess())&&typeof u<"u")return this.raiseAction(s.getOnSuccess(),e)},t.prototype.raiseDisconnectComplete=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.disconnectCompleteArgs).setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onDisconnectComplete)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnComplete())&&typeof u<"u")return this.raiseAction(s.getOnComplete(),e)},t.prototype.raiseEvent=function(){var e,n,s;if(n=arguments[0],(e=arguments[1]).setClient(this),null!==(s=n)&&typeof s<"u")try{return n(this,e)}catch(r){return fm.asyncException.asyncThrow(r)}},t.prototype.raiseForcedUnbinds=function(){var e,n,s,r,i,u,c,l,h,g,p,m;for(n=arguments[0],i=arguments[1],r=[],u=0,l=(p=fm.hashExtensions.getKeys(this._boundRecords)).length;u<l;u++)(s=new fm.websync.unbindArgs([this._boundRecords[p[u]]])).setRequestUrl(n.getRequestUrl()),s.setSynchronous(n.getSynchronous()),s.setIsRetry(n.getIsRetry()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),n)),s.setDynamicProperties(n.getDynamicProperties()),fm.arrayExtensions.add(r,s);for(g=[],c=0,h=(m=r).length;c<h;c++)this.raiseUnbindSuccess(e=m[c],i,!0),g.push(this.raiseUnbindComplete(e,i,!0));return g},t.prototype.raiseForcedUnsubscribes=function(){var e,n,s,r,i,a,c,l,h,g,p,m,_,d,b,y;for(n=arguments[0],i=arguments[1],r=[],c=0,g=(d=fm.hashExtensions.getKeys(this._subscribedChannels)).length;c<g;c++)for(l=0,p=(b=this._subscribedChannels[a=d[c]]).length;l<p;l++)(s=new fm.websync.unsubscribeArgs([b[l]],a)).setRequestUrl(n.getRequestUrl()),s.setSynchronous(n.getSynchronous()),s.setIsRetry(n.getIsRetry()),s.setExtensions(fm.websync.client.getExtensions(i.getResponse(),n)),s.setDynamicProperties(n.getDynamicProperties()),fm.arrayExtensions.add(r,s);for(_=[],h=0,m=(y=r).length;h<m;h++)this.raiseUnsubscribeSuccess(e=y[h],i,!0),_.push(this.raiseUnsubscribeComplete(e,i,!0));return _},t.prototype.raiseFunction=function(){return this.raiseFunctionManual(arguments[0],arguments[1],!1)},t.prototype.raiseFunctionManual=function(){var e,n,s,r,a;if(n=arguments[0],e=arguments[1],arguments[2])try{return n(e)}catch(u){return s=u,fm.asyncException.asyncThrow(s),null}a=this.getThreadId(),this.preRaise(a);try{r=n(e)}catch(u){s=u,fm.asyncException.asyncThrow(s),r=null}finally{this.postRaise(a)}return r},t.prototype.raiseNotifyComplete=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.notifyCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onNotifyComplete)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnComplete())&&typeof u<"u")return this.raiseAction(s.getOnComplete(),e)},t.prototype.raiseNotifyDelivery=function(){var e,n,s,r;if(s=arguments[1],null!==(r=n=arguments[0])&&typeof r<"u")return(e=new fm.websync.notifyReceiveArgs(s.getDataJson())).setExtensions(s.getExtensions()),e.setTimestamp(fm.websync.client.getTimestamp(s)),e.setClient(this),this.raiseActionManual(n,e,!0)},t.prototype.raiseNotifyFailure=function(){var e,n,s,r,i,a,u,c;return s=arguments[0],i=arguments[1],a=arguments[2],(n=new fm.websync.notifyFailureArgs).__dataJson=fm.websync.client.getDataJsonForNotify(i.getResponse(),s),n.setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(u=r=this._onNotifyFailure)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=s.getOnFailure())&&typeof c<"u"&&(a=this.raiseRetriable(s.getOnFailure(),a,e)),a},t.prototype.raiseNotifySuccess=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.notifySuccessArgs).__dataJson=fm.websync.client.getDataJsonForNotify(i.getResponse(),s),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onNotifySuccess)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnSuccess())&&typeof u<"u")return this.raiseAction(s.getOnSuccess(),e)},t.prototype.raisePublishComplete=function(){var e,n,s,r,i,a,u;if(r=arguments[0],i=arguments[1],(n=new fm.websync.publishCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),r)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(r.getDynamicProperties()),e=n,null!==(a=s=this._onPublishComplete)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=r.getOnComplete())&&typeof u<"u")return this.raiseAction(r.getOnComplete(),e)},t.prototype.raisePublishFailure=function(){var e,n,s,r,i,a,u,c;return r=arguments[0],i=arguments[1],a=arguments[2],(n=new fm.websync.publishFailureArgs).__channel=fm.websync.client.getChannelForPublish(i.getResponse(),r),n.__dataJson=fm.websync.client.getDataJsonForPublish(i.getResponse(),r),n.setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),r)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(r.getDynamicProperties()),e=n,null!==(u=s=this._onPublishFailure)&&typeof u<"u"&&this.raiseAction(s,e),null!==(c=r.getOnFailure())&&typeof c<"u"&&(a=this.raiseRetriable(r.getOnFailure(),a,e)),a},t.prototype.raisePublishSuccess=function(){var e,n,s,r,i,a,u;if(r=arguments[0],i=arguments[1],(n=new fm.websync.publishSuccessArgs).__channel=fm.websync.client.getChannelForPublish(i.getResponse(),r),n.__dataJson=fm.websync.client.getDataJsonForPublish(i.getResponse(),r),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),r)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(r.getDynamicProperties()),e=n,null!==(a=s=this._onPublishSuccess)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=r.getOnSuccess())&&typeof u<"u")return this.raiseAction(r.getOnSuccess(),e)},t.prototype.raiseRequestEvent=function(){var e;return this.raiseEvent(arguments[0],e=arguments[1]),!e.getCancel()},t.prototype.raiseResponseEvent=function(){var e,n,s;return n=arguments[0],(e=arguments[1]).setException((s=arguments[2]).getException()),e.setResponse(s.getResponse()),this.raiseEvent(n,e)},t.prototype.raiseRetriable=function(){var e,n;return n=arguments[0],(e=arguments[2]).setRetry(arguments[1]),this.raiseAction(n,e),e.getRetry()},t.prototype.raiseSendException=function(){var e,n,s,i,a,u,c;for(e=arguments[1],u=[],i=0,a=(c=arguments[0].getRequests()).length;i<a;i++)s=c[i],(n=new fm.websync.clientResponseArgs(s.getDynamicProperties())).setException(e),u.push(s.getCallback()(n));return u},t.prototype.raiseServerBind=function(){var e,n,s,r;if(s=arguments[0],null!==(r=n=this._onServerBind)&&typeof r<"u")return(e=new fm.websync.serverBindArgs).__records=s.getRecords(),e.setExtensions(s.getExtensions()),e.setTimestamp(s.getTimestamp()),e.setClient(this),this.raiseAction(n,e)},t.prototype.raiseServerSubscribe=function(){var e,n,s,r;return s=arguments[0],null!==(r=n=this._onServerSubscribe)&&typeof r<"u"?((e=new fm.websync.serverSubscribeArgs).__channels=s.getChannels(),e.setExtensions(s.getExtensions()),e.setTimestamp(s.getTimestamp()),e.setClient(this),this.raiseFunction(n,e)):null},t.prototype.raiseServerUnbind=function(){var e,n,s,r;if(s=arguments[0],null!==(r=n=this._onServerUnbind)&&typeof r<"u")return(e=new fm.websync.serverUnbindArgs).__records=s.getRecords(),e.setExtensions(s.getExtensions()),e.setTimestamp(s.getTimestamp()),e.setClient(this),this.raiseAction(n,e)},t.prototype.raiseServerUnsubscribe=function(){var e,n,s,r;if(s=arguments[0],null!==(r=n=this._onServerUnsubscribe)&&typeof r<"u")return(e=new fm.websync.serverUnsubscribeArgs).__channels=s.getChannels(),e.setExtensions(s.getExtensions()),e.setTimestamp(s.getTimestamp()),e.setClient(this),this.raiseAction(n,e)},t.prototype.raiseServiceComplete=function(){var e,n,s,r,i,a,u;if(i=arguments[0],r=arguments[1],(n=new fm.websync.serviceCompleteArgs).setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(i.getDynamicProperties()),e=n,null!==(a=s=this._onServiceComplete)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=i.getOnComplete())&&typeof u<"u")return this.raiseAction(i.getOnComplete(),e)},t.prototype.raiseServiceFailure=function(){var e,n,s,r,i,a,u,c;return a=arguments[0],r=arguments[1],i=arguments[2],(n=new fm.websync.serviceFailureArgs).__channel=fm.websync.client.getChannelForService(r.getResponse(),a),n.__dataJson=fm.websync.client.getDataJsonForService(r.getResponse(),a),n.setException(r.getException()),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),e=n,null!==(u=s=this._onServiceFailure)&&typeof u<"u"&&this.raiseAction(s,e),null!==(c=a.getOnFailure())&&typeof c<"u"&&(i=this.raiseRetriable(a.getOnFailure(),i,e)),i},t.prototype.raiseServiceSuccess=function(){var e,n,s,r,i,a,u;if(i=arguments[0],r=arguments[1],(n=new fm.websync.serviceSuccessArgs).__channel=fm.websync.client.getChannelForService(r.getResponse(),i),n.__dataJson=fm.websync.client.getDataJsonForService(r.getResponse(),i),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(i.getDynamicProperties()),e=n,null!==(a=s=this._onServiceSuccess)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=i.getOnSuccess())&&typeof u<"u")return this.raiseAction(i.getOnSuccess(),e)},t.prototype.raiseStreamFailure=function(){var e,n,s,r,i,a,u;if(s=arguments[0],i=arguments[1],(n=new fm.websync.streamFailureArgs).setException(i.getException()),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),s)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(s.getDynamicProperties()),e=n,null!==(a=r=this._onStreamFailure)&&typeof a<"u"&&this.raiseAction(r,e),null!==(u=s.getOnStreamFailure())&&typeof u<"u")return this.raiseAction(s.getOnStreamFailure(),e)},t.prototype.raiseSubscribeComplete=function(){var e,n,s,r,i,a,u;if(i=arguments[0],r=arguments[1],(n=new fm.websync.subscribeCompleteArgs).setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),n.setIsResubscribe(i.getIsResubscribe()),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(i.getDynamicProperties()),e=n,null!==(a=s=this._onSubscribeComplete)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=i.getOnComplete())&&typeof u<"u")return this.raiseAction(i.getOnComplete(),e)},t.prototype.raiseSubscribeDelivery=function(){var e,n,s,r,i;if(n=arguments[1],r=arguments[2],null!==(i=s=arguments[0])&&typeof i<"u")return(e=new fm.websync.subscribeReceiveArgs(r.getBayeuxChannel(),r.getDataJson())).setExtensions(r.getExtensions()),e.setTimestamp(fm.websync.client.getTimestamp(r)),e.setClient(this),e.setDynamicProperties(n),this.raiseActionManual(s,e,!0)},t.prototype.raiseSubscribeFailure=function(){var e,n,s,r,i,a,u,c;return a=arguments[0],r=arguments[1],i=arguments[2],(n=new fm.websync.subscribeFailureArgs).__channels=fm.websync.client.getChannelsForSubscribe(r.getResponse(),a),n.setException(r.getException()),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),a)),n.setIsResubscribe(a.getIsResubscribe()),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),e=n,null!==(u=s=this._onSubscribeFailure)&&typeof u<"u"&&this.raiseAction(s,e),null!==(c=a.getOnFailure())&&typeof c<"u"&&(i=this.raiseRetriable(a.getOnFailure(),i,e)),i},t.prototype.raiseSubscribeSuccess=function(){var e,n,s,r,i,a,u;if(i=arguments[0],r=arguments[1],(n=new fm.websync.subscribeSuccessArgs).__channels=fm.websync.client.getChannelsForSubscribe(r.getResponse(),i),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),i)),n.setIsResubscribe(i.getIsResubscribe()),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(i.getDynamicProperties()),e=n,null!==(a=s=this._onSubscribeSuccess)&&typeof a<"u"&&this.raiseAction(s,e),null!==(u=i.getOnSuccess())&&typeof u<"u")return this.raiseAction(i.getOnSuccess(),e)},t.prototype.raiseUnbindComplete=function(){var e,n,s,r,i,a,u,c;if(a=arguments[0],i=arguments[1],s=arguments[2],(n=new fm.websync.unbindCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),n.__forced=s,e=n,null!==(u=r=this._onUnbindComplete)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=a.getOnComplete())&&typeof c<"u")return this.raiseAction(a.getOnComplete(),e)},t.prototype.raiseUnbindFailure=function(){var e,n,s,r,i,a,u,c;return a=arguments[0],r=arguments[1],i=arguments[2],(n=new fm.websync.unbindFailureArgs).__records=fm.websync.client.getRecordsForUnbind(r.getResponse(),a),n.setException(r.getException()),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),e=n,null!==(u=s=this._onUnbindFailure)&&typeof u<"u"&&this.raiseAction(s,e),null!==(c=a.getOnFailure())&&typeof c<"u"&&(i=this.raiseRetriable(a.getOnFailure(),i,e)),i},t.prototype.raiseUnbindSuccess=function(){var e,n,s,r,i,a,u,c;if(a=arguments[0],i=arguments[1],s=arguments[2],(n=new fm.websync.unbindSuccessArgs).__records=fm.websync.client.getRecordsForUnbind(i.getResponse(),a),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),n.__forced=s,e=n,null!==(u=r=this._onUnbindSuccess)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=a.getOnSuccess())&&typeof c<"u")return this.raiseAction(a.getOnSuccess(),e)},t.prototype.raiseUnsubscribeComplete=function(){var e,n,s,r,i,a,u,c;if(a=arguments[0],i=arguments[1],s=arguments[2],(n=new fm.websync.unsubscribeCompleteArgs).setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),n.__forced=s,e=n,null!==(u=r=this._onUnsubscribeComplete)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=a.getOnComplete())&&typeof c<"u")return this.raiseAction(a.getOnComplete(),e)},t.prototype.raiseUnsubscribeFailure=function(){var e,n,s,r,i,a,u,c;return a=arguments[0],r=arguments[1],i=arguments[2],(n=new fm.websync.unsubscribeFailureArgs).__channels=fm.websync.client.getChannelsForUnsubscribe(r.getResponse(),a),n.setException(r.getException()),n.setExtensions(fm.websync.client.getExtensions(r.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(r.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),e=n,null!==(u=s=this._onUnsubscribeFailure)&&typeof u<"u"&&this.raiseAction(s,e),null!==(c=a.getOnFailure())&&typeof c<"u"&&(i=this.raiseRetriable(a.getOnFailure(),i,e)),i},t.prototype.raiseUnsubscribeSuccess=function(){var e,n,s,r,i,a,u,c;if(a=arguments[0],i=arguments[1],s=arguments[2],(n=new fm.websync.unsubscribeSuccessArgs).__channels=fm.websync.client.getChannelsForUnsubscribe(i.getResponse(),a),n.setExtensions(fm.websync.client.getExtensions(i.getResponse(),a)),n.setTimestamp(fm.websync.client.getTimestamp(i.getResponse())),n.setClient(this),n.setDynamicProperties(a.getDynamicProperties()),n.__forced=s,e=n,null!==(u=r=this._onUnsubscribeSuccess)&&typeof u<"u"&&this.raiseAction(r,e),null!==(c=a.getOnSuccess())&&typeof c<"u")return this.raiseAction(a.getOnSuccess(),e)},t.prototype.receiveMessage=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,b,y,C,v,R,S,T,P,A,x,E,w,z,O,q,k;if("/meta/notify"!==(c=arguments[0]).getBayeuxChannel()){for(i=[],a=[],_=0,C=(A=fm.hashExtensions.getKeys(this._customOnReceives)).length;_<C;_++)for(e=this._customOnReceives[p=A[_]],d=0,v=(x=fm.hashExtensions.getKeys(e)).length;d<v;d++)(m=x[d])===c.getChannel()&&(fm.arrayExtensions.add(i,e[m]),fm.arrayExtensions.add(a,{}));for(b=0,R=(E=fm.hashExtensions.getKeys(this._subscribedOnReceives)).length;b<R;b++)for(n=this._subscribedOnReceives[p=E[b]],y=0,S=(w=fm.hashExtensions.getKeys(n)).length;y<S;y++)(m=w[y])===c.getChannel()&&(fm.arrayExtensions.add(i,n[m]),s=null,z=new fm.holder(s),O=fm.hashExtensions.tryGetValue(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(m,p),z),s=z.getValue(),O||(s={}),fm.arrayExtensions.add(a,s));if(0===fm.arrayExtensions.getCount(i))return u=null,q=new fm.holder(u),k=fm.hashExtensions.tryGetValue(this._pendingReceives,c.getChannel(),q),u=q.getValue(),k||(u=[],this._pendingReceives[c.getChannel()]=u),void fm.arrayExtensions.add(u,c);for(r=0,T=[];r<fm.arrayExtensions.getCount(i);)try{h=i[r],s=null,r<fm.arrayExtensions.getCount(a)&&(s=a[r]),T.push(this.raiseSubscribeDelivery(h,s,c))}finally{r++}return T}return"fm.server"===c.getTag()?(g=fm.websync.message.fromJson(c.getDataJson()),this.processServerAction(g)):null!==(P=l=this._onNotify)&&typeof P<"u"?this.raiseNotifyDelivery(l,c):void 0},t.prototype.reconnect=function(){var e,n;return this.raiseForcedUnsubscribes(e=arguments[0],n=arguments[1]),this.raiseForcedUnbinds(e,n),this.clearBoundRecords(),this.clearSubscribedChannels(),this.setIsConnected(!1),this._queueActivated=!1,e.setIsReconnect(!0),e.setLastClientId(this.getClientId()),e.setLastSessionId(this.getSessionId()),this.connect(e),this},t.prototype.removeBoundRecords=function(){var s,r,i,a;for(i=[],s=0,r=(a=arguments[0]).length;s<r;s++)i.push(fm.hashExtensions.remove(this._boundRecords,a[s].getKey()));return i},t.prototype.removeOnBindComplete=function(){return this._onBindComplete=fm.delegate.remove(this._onBindComplete,arguments[0])},t.prototype.removeOnBindFailure=function(){return this._onBindFailure=fm.delegate.remove(this._onBindFailure,arguments[0])},t.prototype.removeOnBindSuccess=function(){return this._onBindSuccess=fm.delegate.remove(this._onBindSuccess,arguments[0])},t.prototype.removeOnConnectComplete=function(){return this._onConnectComplete=fm.delegate.remove(this._onConnectComplete,arguments[0])},t.prototype.removeOnConnectFailure=function(){return this._onConnectFailure=fm.delegate.remove(this._onConnectFailure,arguments[0])},t.prototype.removeOnConnectSuccess=function(){return this._onConnectSuccess=fm.delegate.remove(this._onConnectSuccess,arguments[0])},t.prototype.removeOnDisconnectComplete=function(){return this._onDisconnectComplete=fm.delegate.remove(this._onDisconnectComplete,arguments[0])},t.prototype.removeOnNotify=function(){return this._onNotify=fm.delegate.remove(this._onNotify,arguments[0])},t.prototype.removeOnNotifyComplete=function(){return this._onNotifyComplete=fm.delegate.remove(this._onNotifyComplete,arguments[0])},t.prototype.removeOnNotifyFailure=function(){return this._onNotifyFailure=fm.delegate.remove(this._onNotifyFailure,arguments[0])},t.prototype.removeOnNotifySuccess=function(){return this._onNotifySuccess=fm.delegate.remove(this._onNotifySuccess,arguments[0])},t.prototype.removeOnPublishComplete=function(){return this._onPublishComplete=fm.delegate.remove(this._onPublishComplete,arguments[0])},t.prototype.removeOnPublishFailure=function(){return this._onPublishFailure=fm.delegate.remove(this._onPublishFailure,arguments[0])},t.prototype.removeOnPublishSuccess=function(){return this._onPublishSuccess=fm.delegate.remove(this._onPublishSuccess,arguments[0])},t.prototype.removeOnServerBind=function(){return this._onServerBind=fm.delegate.remove(this._onServerBind,arguments[0])},t.prototype.removeOnServerSubscribe=function(){return this._onServerSubscribe=fm.delegate.remove(this._onServerSubscribe,arguments[0])},t.prototype.removeOnServerUnbind=function(){return this._onServerUnbind=fm.delegate.remove(this._onServerUnbind,arguments[0])},t.prototype.removeOnServerUnsubscribe=function(){return this._onServerUnsubscribe=fm.delegate.remove(this._onServerUnsubscribe,arguments[0])},t.prototype.removeOnServiceComplete=function(){return this._onServiceComplete=fm.delegate.remove(this._onServiceComplete,arguments[0])},t.prototype.removeOnServiceFailure=function(){return this._onServiceFailure=fm.delegate.remove(this._onServiceFailure,arguments[0])},t.prototype.removeOnServiceSuccess=function(){return this._onServiceSuccess=fm.delegate.remove(this._onServiceSuccess,arguments[0])},t.prototype.removeOnStreamFailure=function(){return this._onStreamFailure=fm.delegate.remove(this._onStreamFailure,arguments[0])},t.prototype.removeOnSubscribeComplete=function(){return this._onSubscribeComplete=fm.delegate.remove(this._onSubscribeComplete,arguments[0])},t.prototype.removeOnSubscribeFailure=function(){return this._onSubscribeFailure=fm.delegate.remove(this._onSubscribeFailure,arguments[0])},t.prototype.removeOnSubscribeSuccess=function(){return this._onSubscribeSuccess=fm.delegate.remove(this._onSubscribeSuccess,arguments[0])},t.prototype.removeOnUnbindComplete=function(){return this._onUnbindComplete=fm.delegate.remove(this._onUnbindComplete,arguments[0])},t.prototype.removeOnUnbindFailure=function(){return this._onUnbindFailure=fm.delegate.remove(this._onUnbindFailure,arguments[0])},t.prototype.removeOnUnbindSuccess=function(){return this._onUnbindSuccess=fm.delegate.remove(this._onUnbindSuccess,arguments[0])},t.prototype.removeOnUnsubscribeComplete=function(){return this._onUnsubscribeComplete=fm.delegate.remove(this._onUnsubscribeComplete,arguments[0])},t.prototype.removeOnUnsubscribeFailure=function(){return this._onUnsubscribeFailure=fm.delegate.remove(this._onUnsubscribeFailure,arguments[0])},t.prototype.removeOnUnsubscribeSuccess=function(){return this._onUnsubscribeSuccess=fm.delegate.remove(this._onUnsubscribeSuccess,arguments[0])},t.prototype.removeSubscribedChannels=function(){var e,n,r,i,a,u,c,l;if(r=arguments[0],e=arguments[1],n=null,u=new fm.holder(n),c=fm.hashExtensions.tryGetValue(this._subscribedChannels,r,u),n=u.getValue(),c){for(i=0,a=(l=e).length;i<a;i++)fm.arrayExtensions.remove(n,l[i]);if(0===fm.arrayExtensions.getCount(n))return fm.hashExtensions.remove(this._subscribedChannels,r)}},t.prototype.removeSubscribedOnReceive=function(){var e,n,s,r,i,a,u,c,l;if(r=arguments[0],e=arguments[1],n=null,u=new fm.holder(n),c=fm.hashExtensions.tryGetValue(this._subscribedOnReceives,r,u),n=u.getValue(),c){for(i=0,a=(l=e).length;i<a;i++)s=l[i],fm.hashExtensions.remove(n,s),fm.hashExtensions.remove(this._subscribedDynamicProperties,fm.websync.client.getSubscribeKey(s,r));if(0===fm.hashExtensions.getCount(n))return fm.hashExtensions.remove(this._subscribedOnReceives,r)}},t.prototype.restream=function(){var e,n,s;return e=arguments[0],n=arguments[1],this.getConcurrencyMode()===fm.websync.concurrencyMode.Low&&this._lastInterval>0?((s=new fm.websync.deferredStreamState).setConnectArgs(e),s.setReceivedMessages(n),fm.deferrer.defer(this.streamDeferred,this._lastInterval,s)):this.stream(e,n)},t.prototype.retryConnect=function(){var e,n;return n=arguments[0],e=arguments[1],this._lastBackoffIndex++,this._lastBackoffTimeout=e,n.setIsRetry(!0),this.connect(n)},t.prototype.retryConnectDeferred=function(){var n;return this.retryConnect((n=arguments[0]).getConnectArgs(),n.getBackoffTimeout())},t.prototype.send=function(){return this.sendMany([arguments[0]],arguments[1],arguments[2])},t.prototype.sendCallback=function(){var e,n,s,r,i,a,c,l,h,g,p,m,_,d,b,y,C,v,R,S,T,P,A,x,E;if(s=(h=arguments[0]).getRequestArgs().getDynamicValue(fm.websync.client._stateKey),null!==(y=h.getException())&&typeof y<"u")return this.raiseSendException(s,h.getException());if(null===(C=h.getMessages())||typeof C>"u"||0===h.getMessages().length)return this.raiseSendException(s,new Error("Invalid response received from server."));for(r=[],p=0,_=(v=h.getMessages()).length;p<_;p++)if(null!==(R=e=(a=v[p]).getAdvice())&&typeof R<"u"&&(this.processAdvice(e),null!==(S=i=e.getLongPolling())&&typeof S<"u"&&this.processAdvice(i)),s.getIsStream()&&"/meta/connect"!==a.getBayeuxChannel())fm.arrayExtensions.add(r,a);else{if(fm.stringExtensions.isNullOrEmpty(a.getId()))return void this.raiseSendException(s,new Error(a.getError()));if(l=null,T=new fm.holder(l),P=fm.hashExtensions.tryGetValue(s.getRequestMapping(),a.getId(),T),l=T.getValue(),!P)return void this.raiseSendException(s,new Error(a.getError()));(c=new fm.websync.clientResponseArgs(l.getDynamicProperties())).setResponse(a),c.setException(a.getSuccessful()?null:new Error(a.getError())),l.getCallback()(c)}for(fm.arrayExtensions.getCount(r)>0&&((n=new fm.websync.clientResponseArgs(s.getRequests()[0].getDynamicProperties())).setResponses(fm.arrayExtensions.toArray(r)),s.getRequests()[0].getCallback()(n)),b=[],m=0,d=(A=h.getMessages()).length;m<d;m++)null!==(x=g=(a=A[m]).getServerActions())&&typeof x<"u"?(E=g,b.push(function(){var w,z,O;for(O=[],w=0,z=E.length;w<z;w++)O.push(this.processServerAction(E[w]));return O}.call(this))):b.push(void 0);return b},t.prototype.sendMany=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,b,y,C,v,R;for(_=arguments[1],p=arguments[2],s=!1,1===(c=arguments[0]).length&&(s="/meta/connect"===c[0].getMessage().getBayeuxChannel()),n={},r=[],d=0,b=(y=c).length;d<b;d++)a=y[d],!(null===(C=this.getClientId())?C!==fm.guid.empty:!C.equals(fm.guid.empty))||a.getMessage().isConnect()||(a.getMessage().setClientId(this.getClientId()),a.getMessage().setSessionId(this.getSessionId())),this.getDisableBinary()&&a.getMessage().setDisableBinary(this.getDisableBinary()),v=new fm.holder(this._counter),R=fm.interlocked.increment(v),this._counter=v.getValue(),a.getMessage().setId(fm.intExtensions.toString(R)),fm.arrayExtensions.add(r,a.getMessage()),n[a.getMessage().getId()]=a;return g=this.processRequestUrl(_),_=this.processRequestUrl(_),i=s?this.getStreamRequestTimeout():this.getRequestTimeout(),m=s?this._streamRequestTransfer:this._requestTransfer,(e=new fm.websync.messageRequestArgs(this.createHeaders())).setMessages(fm.arrayExtensions.toArray(r)),e.setOnRequestCreated(this.internalOnRequestCreated),e.setOnResponseReceived(this.internalOnResponseReceived),e.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),e.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),e.setSender(this),e.setTimeout(i),e.setUrl(_),(u=e).setDynamicValue("frameUrl",g),(h=new fm.websync.clientSendState).setRequests(c),h.setRequestMapping(n),h.setIsStream(s),u.setDynamicValue(fm.websync.client._stateKey,h),p?(l=m.send(u),this.sendCallback(l)):m.sendAsync(u,this.sendCallback)},t.prototype.service=function(){var e;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e.getChannel()))throw new Error("channel cannot be null.");if(fm.stringExtensions.isNullOrEmpty(e.getDataJson()))throw new Error("dataJson cannot be null.");return this.performService(e),this},t.prototype.setClientId=function(){return this._clientId=arguments[0]},t.prototype.setCustomOnReceive=function(){return this.setCustomOnReceiveWithTag(arguments[0],fm.stringExtensions.empty,arguments[1])},t.prototype.setCustomOnReceiveWithTag=function(){var e,n,s,r,i,a,u,c,l;if(r=arguments[1],s=arguments[2],null===(i=e=arguments[0])||typeof i>"u")throw new Error("channel cannot be null.");if(null===(a=s)||typeof a>"u")throw new Error("onReceive cannot be null.");return(null===(u=r)||typeof u>"u")&&(r=fm.stringExtensions.empty),n=null,c=new fm.holder(n),l=fm.hashExtensions.tryGetValue(this._customOnReceives,r,c),n=c.getValue(),l||(this._customOnReceives[r]=n={}),n[e]=s,this.processPendingReceives([e])},t.prototype.setDisableWebSockets=function(){return this._disableWebSockets=arguments[0]},t.prototype.setIsConnected=function(){return this._isConnected=arguments[0]},t.prototype.setIsConnecting=function(){return this._isConnecting=arguments[0]},t.prototype.setIsDisconnecting=function(){return this._isDisconnecting=arguments[0]},t.prototype.setServerTimeout=function(){return this._serverTimeout=arguments[0]},t.prototype.setSessionId=function(){return this._sessionId=arguments[0]},t.prototype.setStreamRequestUrl=function(){return this._streamRequestUrl=arguments[0]},t.prototype.setSynchronous=function(){return this._synchronous=arguments[0]},t.prototype.setToken=function(){return this._token=arguments[0]},t.prototype.startBatch=function(){return this._batchCounter++,this},t.prototype.stream=function(){var e,n,s,r,i;return e=arguments[0],s=arguments[1],i=new fm.websync.clientRequest,(n=new fm.websync.message("/meta/connect")).setConnectionType(this._connectionType),n.setAcknowledgement(s),i.setMessage(n),i.setCallback(this.streamCallback),(r=i).setDynamicValue(fm.websync.client._argsKey,e),this.send(r,this.getStreamRequestUrl(),!1)},t.prototype.streamCallback=function(){var e,s,r,i,a,u,c,l;if(e=(s=arguments[0]).getDynamicValue(fm.websync.client._argsKey),this.getIsConnected()&&!this.getIsConnecting()&&!this.getIsDisconnecting()){if(null!==(u=s.getException())&&typeof u<"u")return null!==(c=s.getResponses())&&typeof c<"u"&&null!==this._lastReconnect&&this._lastReconnect===fm.websync.reconnect.Retry?this.restream(e,!1):(this.raiseStreamFailure(e,s),this.reconnect(e,s));if(1===s.getResponses().length&&"/meta/connect"===s.getResponses()[0].getBayeuxChannel())return this.restream(e,!1);r=this.getThreadId(),this.preRaise(r);try{for(l=s.getResponses(),i=0,a=l.length;i<a;i++)this.receiveMessage(l[i])}finally{this.postRaise(r)}return this.restream(e,!0)}},t.prototype.streamDeferred=function(){var n;return this.stream((n=arguments[0]).getConnectArgs(),n.getReceivedMessages())},t.prototype.subscribe=function(){var e,n,s,r;if(null===(n=(e=arguments[0]).getChannels())||typeof n>"u"||0===e.getChannels().length)throw new Error("channels cannot be null.");if(null===(s=e.getOnReceive())||typeof s>"u")throw new Error("onReceive cannot be null.");return(null===(r=e.getTag())||typeof r>"u")&&e.setTag(fm.stringExtensions.empty),this.performSubscribe(e),this},t.prototype.unbind=function(){var n,s,r,i,a,u;if(null===(i=(n=arguments[0]).getRecords())||typeof i>"u"||0===n.getRecords().length)throw new Error("records cannot be null.");for(s=0,r=(a=n.getRecords()).length;s<r;s++)if(null===(u=a[s].getKey())||typeof u>"u")throw new Error("key cannot be null.");return this.performUnbind(n),this},t.prototype.unsetCustomOnReceive=function(){return this.unsetCustomOnReceiveWithTag(arguments[0],fm.stringExtensions.empty)},t.prototype.unsetCustomOnReceiveWithTag=function(){var e,n,s,r,i,a,u;if(s=arguments[1],null===(r=e=arguments[0])||typeof r>"u")throw new Error("channel cannot be null.");return(null===(i=s)||typeof i>"u")&&(s=fm.stringExtensions.empty),n=null,a=new fm.holder(n),u=fm.hashExtensions.tryGetValue(this._customOnReceives,s,a),n=a.getValue(),!(!u||!fm.hashExtensions.remove(n,e)||(0===fm.hashExtensions.getCount(n)&&fm.hashExtensions.remove(this._customOnReceives,s),0))},t.prototype.unsubscribe=function(){var e,n,s;if(null===(n=(e=arguments[0]).getChannels())||typeof n>"u"||0===e.getChannels().length)throw new Error("channels cannot be null.");return(null===(s=e.getTag())||typeof s>"u")&&e.setTag(fm.stringExtensions.empty),this.performUnsubscribe(e),this},t.prototype.webSocketOpenFailure=function(){return this._connectionType=fm.websync.connectionType.LongPolling,this._streamRequestTransfer=fm.websync.messageTransferFactory.getHttpMessageTransfer(),this.activateStream(this._connectArgs,this._responseArgs)},t.prototype.webSocketOpenSuccess=function(){return this.activateStream(this._connectArgs,this._responseArgs)},t.prototype.webSocketStreamFailure=function(){var e,n;return e=arguments[0],(n=new fm.websync.clientResponseArgs(this._responseArgs.getDynamicProperties())).setException(new Error(fm.stringExtensions.format("WebSocket stream error. {0}",e.getException().message))),this.streamCallback(n)},t._supportedConnectionTypes=[fm.websync.connectionType.WebSocket,fm.websync.connectionType.LongPolling],t._argsKey="fm.args",t._stateKey="fm.state",t._requestUrlCache={},t._requestUrlCacheLock=new fm.object,t}.call(this,fm.websync.baseClient),fm.websync.clientSendState=function(o){function t(){if(this.setRequests=__bind(this.setRequests,this),this.setRequestMapping=__bind(this.setRequestMapping,this),this.setIsStream=__bind(this.setIsStream,this),this.getRequests=__bind(this.getRequests,this),this.getRequestMapping=__bind(this.getRequestMapping,this),this.getIsStream=__bind(this.getIsStream,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._isStream=!1,t.prototype._requestMapping=null,t.prototype._requests=null,t.prototype.getIsStream=function(){return this._isStream},t.prototype.getRequestMapping=function(){return this._requestMapping},t.prototype.getRequests=function(){return this._requests},t.prototype.setIsStream=function(){return this._isStream=arguments[0]},t.prototype.setRequestMapping=function(){return this._requestMapping=arguments[0]},t.prototype.setRequests=function(){return this._requests=arguments[0]},t}(fm.object),fm.websync.clientRequest=function(o){function t(){if(this.setMessage=__bind(this.setMessage,this),this.setCallback=__bind(this.setCallback,this),this.getMessage=__bind(this.getMessage,this),this.getCallback=__bind(this.getCallback,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._callback=null,t.prototype._message=null,t.prototype.getCallback=function(){return this._callback},t.prototype.getMessage=function(){return this._message},t.prototype.setCallback=function(){return this._callback=arguments[0]},t.prototype.setMessage=function(){return this._message=arguments[0]},t}(fm.dynamic),fm.websync.defaults=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.__domainKey=null,t.__domainName=null,t.getDomainKey=function(){return fm.websync.defaults.__domainKey},t.getDomainName=function(){return fm.websync.defaults.__domainName},t.__domainKey=new fm.guid("11111111-1111-1111-1111-111111111111"),t.__domainName="localhost",t}.call(this,fm.object),fm.websync.publishingClient=function(o){function t(){var e,n;return this.toJson=__bind(this.toJson,this),this.setClientId=__bind(this.setClientId,this),this.setBoundRecords=__bind(this.setBoundRecords,this),this.getClientId=__bind(this.getClientId,this),this.getBoundRecords=__bind(this.getBoundRecords,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(t.__super__.constructor.call(this),void this.setBoundRecords({})):2===arguments.length?(n=arguments[0],e=arguments[1],t.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(e)):void 0}return __extends(t,o),t.prototype._boundRecords=null,t.prototype._clientId=null,t.fromJson=function(){return fm.websync.serializer.deserializePublishingClient(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializePublishingClient(arguments[0])},t.prototype.getBoundRecords=function(){return this._boundRecords},t.prototype.getClientId=function(){return this._clientId},t.prototype.setBoundRecords=function(){return this._boundRecords=arguments[0]},t.prototype.setClientId=function(){return this._clientId=arguments[0]},t.prototype.toJson=function(){return fm.websync.publishingClient.toJson(this)},t}.call(this,fm.serializable),fm.websync.extensions=function(o){function t(){if(this.setValue=__bind(this.setValue,this),this.getValue=__bind(this.getValue,this),this.toJson=__bind(this.toJson,this),this.setValueJson=__bind(this.setValueJson,this),this.setExtensionJsons=__bind(this.setExtensionJsons,this),this.getValueJson=__bind(this.getValueJson,this),this.getNames=__bind(this.getNames,this),this.getExtensionJsons=__bind(this.getExtensionJsons,this),this.getCount=__bind(this.getCount,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setExtensionJsons({}),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setExtensionJsons({})}return __extends(t,o),t.prototype._extensionJsons=null,t.fromJson=function(){return fm.websync.serializer.deserializeExtensions(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeExtensions(arguments[0])},t.prototype.getCount=function(){return fm.hashExtensions.getCount(this.getExtensionJsons())},t.prototype.getExtensionJsons=function(){return this._extensionJsons},t.prototype.getNames=function(){var e;return e=[],fm.arrayExtensions.addRange(e,fm.hashExtensions.getKeys(this.getExtensionJsons())),e},t.prototype.getValueJson=function(){var e;return e=arguments[0],fm.hashExtensions.containsKey(this.getExtensionJsons(),e)?this.getExtensionJsons()[e]:null},t.prototype.setExtensionJsons=function(){return this._extensionJsons=arguments[0]},t.prototype.setValueJson=function(){var e,n,s,r;if(2!==arguments.length){if(3===arguments.length){if(e=arguments[0],n=arguments[2],null===(r=s=arguments[1])||typeof r>"u")fm.hashExtensions.containsKey(this.getExtensionJsons(),e)&&fm.hashExtensions.remove(this.getExtensionJsons(),e);else{if(n&&!fm.serializer.isValidJson(s))throw new Error("The value is not valid JSON.");this.getExtensionJsons()[e]=s}this.setIsDirty(!0)}}else this.setValueJson(e=arguments[0],s=arguments[1],!0)},t.prototype.toJson=function(){return fm.websync.extensions.toJson(this)},t.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments))},t.prototype.setValue=function(){if(2===arguments.length)return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),void this.setValueJson.apply(this,arguments);3===arguments.length&&(arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments))},t}.call(this,fm.dynamic),fm.websync.message=function(o){function t(){var e;return this.toJson=__bind(this.toJson,this),this.setVersion=__bind(this.setVersion,this),this.setTag=__bind(this.setTag,this),this.setSupportedConnectionTypes=__bind(this.setSupportedConnectionTypes,this),this.setSessionId=__bind(this.setSessionId,this),this.setServerTimeout=__bind(this.setServerTimeout,this),this.setServerActions=__bind(this.setServerActions,this),this.setRecords=__bind(this.setRecords,this),this.setRecord=__bind(this.setRecord,this),this.setPublishingClient=__bind(this.setPublishingClient,this),this.setNotifyingClient=__bind(this.setNotifyingClient,this),this.setNotifyClientId=__bind(this.setNotifyClientId,this),this.setMinimumVersion=__bind(this.setMinimumVersion,this),this.setLastSessionId=__bind(this.setLastSessionId,this),this.setLastClientId=__bind(this.setLastClientId,this),this.setKeys=__bind(this.setKeys,this),this.setKey=__bind(this.setKey,this),this.setId=__bind(this.setId,this),this.setDisableBinary=__bind(this.setDisableBinary,this),this.setConnectionType=__bind(this.setConnectionType,this),this.setClientId=__bind(this.setClientId,this),this.setChannels=__bind(this.setChannels,this),this.setChannel=__bind(this.setChannel,this),this.setBayeuxChannel=__bind(this.setBayeuxChannel,this),this.setAdvice=__bind(this.setAdvice,this),this.setAcknowledgement=__bind(this.setAcknowledgement,this),this.isUnsubscribingFrom=__bind(this.isUnsubscribingFrom,this),this.isUnsubscribe=__bind(this.isUnsubscribe,this),this.isUnbindingFrom=__bind(this.isUnbindingFrom,this),this.isUnbind=__bind(this.isUnbind,this),this.isSubscribingTo=__bind(this.isSubscribingTo,this),this.isSubscribe=__bind(this.isSubscribe,this),this.isStream=__bind(this.isStream,this),this.isService=__bind(this.isService,this),this.isPublish=__bind(this.isPublish,this),this.isNotify=__bind(this.isNotify,this),this.isDisconnect=__bind(this.isDisconnect,this),this.isConnect=__bind(this.isConnect,this),this.isBindingTo=__bind(this.isBindingTo,this),this.isBind=__bind(this.isBind,this),this.getVersion=__bind(this.getVersion,this),this.getType=__bind(this.getType,this),this.getTag=__bind(this.getTag,this),this.getSupportedConnectionTypes=__bind(this.getSupportedConnectionTypes,this),this.getSessionId=__bind(this.getSessionId,this),this.getServerTimeout=__bind(this.getServerTimeout,this),this.getServerActions=__bind(this.getServerActions,this),this.getRecords=__bind(this.getRecords,this),this.getRecord=__bind(this.getRecord,this),this.getPublishingClient=__bind(this.getPublishingClient,this),this.getNotifyingClient=__bind(this.getNotifyingClient,this),this.getNotifyClientId=__bind(this.getNotifyClientId,this),this.getMinimumVersion=__bind(this.getMinimumVersion,this),this.getLastSessionId=__bind(this.getLastSessionId,this),this.getLastClientId=__bind(this.getLastClientId,this),this.getKeys=__bind(this.getKeys,this),this.getKey=__bind(this.getKey,this),this.getId=__bind(this.getId,this),this.getDisableBinary=__bind(this.getDisableBinary,this),this.getConnectionType=__bind(this.getConnectionType,this),this.getClientId=__bind(this.getClientId,this),this.getChannels=__bind(this.getChannels,this),this.getChannel=__bind(this.getChannel,this),this.getBayeuxChannel=__bind(this.getBayeuxChannel,this),this.getAdvice=__bind(this.getAdvice,this),this.getAcknowledgement=__bind(this.getAcknowledgement,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):0!==arguments.length?1===arguments.length?(e=arguments[0],t.__super__.constructor.call(this),this.setValidate(!1),this.setBayeuxChannel(e),void this.setValidate(!0)):void 0:void t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__advice=null,t.prototype.__bayeuxChannel=null,t.prototype.__channels=null,t.prototype.__clientId=null,t.prototype.__connectionType=null,t.prototype.__id=null,t.prototype.__minimumVersion=null,t.prototype.__records=null,t.prototype.__supportedConnectionTypes=null,t.prototype.__version=null,t.fromJson=function(){return fm.websync.serializer.deserializeMessage(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializeMessageArray(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeMessage(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializeMessageArray(arguments[0])},t.prototype.getAcknowledgement=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.ack"))},t.prototype.getAdvice=function(){return this.__advice},t.prototype.getBayeuxChannel=function(){return this.__bayeuxChannel},t.prototype.getChannel=function(){return fm.websync.extensible.sharedGetChannel(this.__channels)},t.prototype.getChannels=function(){return fm.websync.extensible.sharedGetChannels(this.__channels)},t.prototype.getClientId=function(){return this.__clientId},t.prototype.getConnectionType=function(){return this.__connectionType},t.prototype.getDisableBinary=function(){return fm.serializer.deserializeBoolean(this.getExtensionValueJson("fm.dbin"))},t.prototype.getId=function(){return this.__id},t.prototype.getKey=function(){return fm.websync.extensible.sharedGetKey(this.__records)},t.prototype.getKeys=function(){return fm.websync.extensible.sharedGetKeys(this.__records)},t.prototype.getLastClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lcid"))},t.prototype.getLastSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.lsid"))},t.prototype.getMinimumVersion=function(){return this.__minimumVersion},t.prototype.getNotifyClientId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.notify"))},t.prototype.getNotifyingClient=function(){return fm.websync.serializer.deserializeNotifyingClient(this.getExtensionValueJson("fm.notifying"))},t.prototype.getPublishingClient=function(){return fm.websync.serializer.deserializePublishingClient(this.getExtensionValueJson("fm.publishing"))},t.prototype.getRecord=function(){return fm.websync.extensible.sharedGetRecord(this.__records)},t.prototype.getRecords=function(){return fm.websync.extensible.sharedGetRecords(this.__records)},t.prototype.getServerActions=function(){var e,n,s;return e=this.getExtensionValueJson("fm.server"),!fm.stringExtensions.isNullOrEmpty(e)&&null!==(s=n=fm.websync.message.fromJsonMultiple(e))&&typeof s<"u"?n:null},t.prototype.getServerTimeout=function(){return fm.serializer.deserializeInteger(this.getExtensionValueJson("fm.timeout"))},t.prototype.getSessionId=function(){return fm.serializer.deserializeGuid(this.getExtensionValueJson("fm.sessionId"))},t.prototype.getSupportedConnectionTypes=function(){return this.__supportedConnectionTypes},t.prototype.getTag=function(){var e;return null!=(e=fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag")))?e:fm.stringExtensions.empty},t.prototype.getType=function(){return fm.websync.metaChannels.getMessageType(this.getBayeuxChannel())},t.prototype.getVersion=function(){return this.__version},t.prototype.isBind=function(){return this.getType()===fm.websync.messageType.Bind},t.prototype.isBindingTo=function(){var e,s,r,i,a;if(e=arguments[0],this.getType()===fm.websync.messageType.Bind){if(null===(i=this.getRecords())||typeof i>"u")return!1;for(s=0,r=(a=this.getRecords()).length;s<r;s++)if(a[s].getKey()===e)return!0}return!1},t.prototype.isConnect=function(){return this.getType()===fm.websync.messageType.Connect},t.prototype.isDisconnect=function(){return this.getType()===fm.websync.messageType.Disconnect},t.prototype.isNotify=function(){return this.getType()===fm.websync.messageType.Notify},t.prototype.isPublish=function(){return this.getType()===fm.websync.messageType.Publish},t.prototype.isService=function(){return this.getType()===fm.websync.messageType.Service},t.prototype.isStream=function(){return this.getType()===fm.websync.messageType.Stream},t.prototype.isSubscribe=function(){return this.getType()===fm.websync.messageType.Subscribe},t.prototype.isSubscribingTo=function(){var e,s,r,i,a;if(e=arguments[0],this.getType()===fm.websync.messageType.Subscribe){if(null===(i=this.getChannels())||typeof i>"u")return!1;for(s=0,r=(a=this.getChannels()).length;s<r;s++)if(a[s]===e)return!0}return!1},t.prototype.isUnbind=function(){return this.getType()===fm.websync.messageType.Unbind},t.prototype.isUnbindingFrom=function(){var e,s,r,i,a;if(e=arguments[0],this.getType()===fm.websync.messageType.Unbind){if(null===(i=this.getRecords())||typeof i>"u")return!1;for(s=0,r=(a=this.getRecords()).length;s<r;s++)if(a[s].getKey()===e)return!0}return!1},t.prototype.isUnsubscribe=function(){return this.getType()===fm.websync.messageType.Unsubscribe},t.prototype.isUnsubscribingFrom=function(){var e,s,r,i,a;if(e=arguments[0],this.getType()===fm.websync.messageType.Unsubscribe){if(null===(i=this.getChannels())||typeof i>"u")return!1;for(s=0,r=(a=this.getChannels()).length;s<r;s++)if(a[s]===e)return!0}return!1},t.prototype.setAcknowledgement=function(){return this.setExtensionValueJson("fm.ack",fm.serializer.serializeBoolean(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setAdvice=function(){return this.__advice=arguments[0],this.setIsDirty(!0)},t.prototype.setBayeuxChannel=function(){var e;return this.__bayeuxChannel=e=arguments[0],fm.websync.metaChannels.isServiceChannel(e)?this.setChannel(fm.websync.metaChannels.convertChannelFromServiced(e)):fm.websync.metaChannels.isMetaChannel(e)||this.setChannel(e),this.setIsDirty(!0)},t.prototype.setChannel=function(){return this.__channels=fm.websync.extensible.sharedSetChannel(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setChannels=function(){return this.__channels=fm.websync.extensible.sharedSetChannels(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setClientId=function(){return this.__clientId=arguments[0],this.setIsDirty(!0)},t.prototype.setConnectionType=function(){return this.__connectionType=arguments[0],this.setIsDirty(!0)},t.prototype.setDisableBinary=function(){return this.setExtensionValueJson("fm.dbin",fm.serializer.serializeBoolean(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setId=function(){return this.__id=arguments[0],this.setIsDirty(!0)},t.prototype.setKey=function(){return this.__records=fm.websync.extensible.sharedSetKey(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setKeys=function(){return this.__records=fm.websync.extensible.sharedSetKeys(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setLastClientId=function(){return this.setExtensionValueJson("fm.lcid",fm.serializer.serializeGuid(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setLastSessionId=function(){return this.setExtensionValueJson("fm.lsid",fm.serializer.serializeGuid(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setMinimumVersion=function(){return this.__minimumVersion=arguments[0],this.setIsDirty(!0)},t.prototype.setNotifyClientId=function(){return this.setExtensionValueJson("fm.notify",fm.serializer.serializeGuid(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setNotifyingClient=function(){return this.setExtensionValueJson("fm.notifying",fm.websync.serializer.serializeNotifyingClient(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setPublishingClient=function(){return this.setExtensionValueJson("fm.publishing",fm.websync.serializer.serializePublishingClient(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setRecord=function(){return this.__records=fm.websync.extensible.sharedSetRecord(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setRecords=function(){return this.__records=fm.websync.extensible.sharedSetRecords(arguments[0],this.getValidate()),this.setIsDirty(!0)},t.prototype.setServerActions=function(){return this.setExtensionValueJson("fm.server",fm.websync.message.toJsonMultiple(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setServerTimeout=function(){return this.setExtensionValueJson("fm.timeout",fm.serializer.serializeInteger(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setSessionId=function(){return this.setExtensionValueJson("fm.sessionId",fm.serializer.serializeGuid(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.setSupportedConnectionTypes=function(){return this.__supportedConnectionTypes=arguments[0],this.setIsDirty(!0)},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]??fm.stringExtensions.empty),!1),this.setIsDirty(!0)},t.prototype.setVersion=function(){return this.__version=arguments[0],this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.message.toJson(this)},t}.call(this,fm.websync.baseMessage),fm.websync.publication=function(o){function t(){var e,n,s;if(this.toJson=__bind(this.toJson,this),this.setTag=__bind(this.setTag,this),this.setChannel=__bind(this.setChannel,this),this.getTag=__bind(this.getTag,this),this.getChannel=__bind(this.getChannel,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);if(0!==arguments.length){if(1===arguments.length)return e=arguments[0],t.__super__.constructor.call(this),void this.setChannel(e);if(2!==arguments.length)return 3===arguments.length?(e=arguments[0],n=arguments[1],s=arguments[2],t.__super__.constructor.call(this),this.setChannel(e),this.setDataJson(n),void this.setTag(s)):void 0;t.call(this,e=arguments[0],n=arguments[1],null)}else t.__super__.constructor.call(this)}return __extends(t,o),t.prototype.__channel=null,t.fromJson=function(){return fm.websync.serializer.deserializePublication(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializePublicationArray(arguments[0])},t.fromMessage=function(){var e,n,s;return null===(s=e=arguments[0])||typeof s>"u"?null:((n=new fm.websync.publication).setChannel(e.getBayeuxChannel()),n.setSuccessful(e.getSuccessful()),n.setError(e.getError()),n.setTimestamp(e.getTimestamp()),n.setDataJson(e.getDataJson()),n.setExtensions(e.getExtensions()),n)},t.fromMessages=function(){var e,n,s,r;if(null===(r=n=arguments[0])||typeof r>"u")return null;for(s=[],e=0;e<n.length;)try{s[e]=fm.websync.publication.fromMessage(n[e])}finally{e++}return s},t.toJson=function(){return fm.websync.serializer.serializePublication(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializePublicationArray(arguments[0])},t.toMessage=function(){var e,n,s;return null===(s=n=arguments[0])||typeof s>"u"?null:((e=new fm.websync.message).setBayeuxChannel(n.getChannel()),e.setSuccessful(n.getSuccessful()),e.setError(n.getError()),e.setTimestamp(n.getTimestamp()),e.setDataJson(n.getDataJson()),e.setExtensions(n.getExtensions()),e)},t.toMessages=function(){var e,n,s,r;if(null===(r=s=arguments[0])||typeof r>"u")return null;for(n=[],e=0;e<s.length;)try{n[e]=fm.websync.publication.toMessage(s[e])}finally{e++}return n},t.prototype.getChannel=function(){return this.__channel},t.prototype.getTag=function(){return fm.serializer.deserializeString(this.getExtensionValueJson("fm.tag"))},t.prototype.setChannel=function(){var e,n,s,r,i;if(null===(s=n=arguments[0])||typeof s>"u")return this.__channel=n,this.setIsDirty(!0);if(e=null,r=new fm.holder(e),i=fm.websync.extensible.validateChannel(n,r),e=r.getValue(),this.getValidate()&&!i)throw new Error(fm.stringExtensions.format("Invalid channel. {0}",e));return this.__channel=n,this.setIsDirty(!0)},t.prototype.setTag=function(){return this.setExtensionValueJson("fm.tag",fm.serializer.serializeString(arguments[0]),!1),this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.publication.toJson(this)},t}.call(this,fm.websync.baseMessage),fm.websync.publisher=function(o){function t(){if(this.send=__bind(this.send,this),this.raiseResponseEvent=__bind(this.raiseResponseEvent,this),this.raiseRequestEvent=__bind(this.raiseRequestEvent,this),this.raiseEvent=__bind(this.raiseEvent,this),this.publishMany=__bind(this.publishMany,this),this.publish=__bind(this.publish,this),this.processRequestUrl=__bind(this.processRequestUrl,this),this.performPublish=__bind(this.performPublish,this),this.performNotify=__bind(this.performNotify,this),this.notifyMany=__bind(this.notifyMany,this),this.notify=__bind(this.notify,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this,arguments[0])}return __extends(t,o),t._onNotifyRequest=null,t._onNotifyResponse=null,t._onPublishRequest=null,t._onPublishResponse=null,t._requestUrlCache=null,t._requestUrlCacheLock=null,t.addOnNotifyRequest=function(){return fm.websync.publisher._onNotifyRequest=fm.delegate.combine(fm.websync.publisher._onNotifyRequest,arguments[0])},t.addOnNotifyResponse=function(){return fm.websync.publisher._onNotifyResponse=fm.delegate.combine(fm.websync.publisher._onNotifyResponse,arguments[0])},t.addOnPublishRequest=function(){return fm.websync.publisher._onPublishRequest=fm.delegate.combine(fm.websync.publisher._onPublishRequest,arguments[0])},t.addOnPublishResponse=function(){return fm.websync.publisher._onPublishResponse=fm.delegate.combine(fm.websync.publisher._onPublishResponse,arguments[0])},t.removeOnNotifyRequest=function(){return fm.websync.publisher._onNotifyRequest=fm.delegate.remove(fm.websync.publisher._onNotifyRequest,arguments[0])},t.removeOnNotifyResponse=function(){return fm.websync.publisher._onNotifyResponse=fm.delegate.remove(fm.websync.publisher._onNotifyResponse,arguments[0])},t.removeOnPublishRequest=function(){return fm.websync.publisher._onPublishRequest=fm.delegate.remove(fm.websync.publisher._onPublishRequest,arguments[0])},t.removeOnPublishResponse=function(){return fm.websync.publisher._onPublishResponse=fm.delegate.remove(fm.websync.publisher._onPublishResponse,arguments[0])},t.prototype.notify=function(){var e,n,r,a;return 2===arguments.length?(e=arguments[0],n=arguments[1],this.notify(new fm.websync.notification(e,n))):3===arguments.length?(e=arguments[0],n=arguments[1],this.notify(new fm.websync.notification(e,n,arguments[2]))):1===arguments.length?null===(a=r=this.notifyMany([arguments[0]]))||typeof a>"u"||0===r.length?null:r[0]:void 0},t.prototype.notifyMany=function(){var e,n;if(null===(n=e=arguments[0])||typeof n>"u"||0===e.length)throw new Error("notifications cannot be null/empty.");return this.performNotify(e)},t.prototype.performNotify=function(){var e,n,s,r,i,a,u;if(i=arguments[0],(n=new fm.websync.publisherNotifyRequestArgs).setRequests(i),this.raiseRequestEvent(fm.websync.publisher._onNotifyRequest,n)){if(r=fm.websync.notification.toMessages(i),a=this.send(r,this.getRequestUrl()),s=fm.websync.notification.fromMessages(a.getResponses()),(e=new fm.websync.publisherNotifyResponseArgs).setRequests(i),e.setResponses(s),this.raiseResponseEvent(fm.websync.publisher._onNotifyResponse,e,a),null!==(u=a.getException())&&typeof u<"u")throw a.getException();return s}return null},t.prototype.performPublish=function(){var e,n,s,r,i,a,u;if(i=arguments[0],(n=new fm.websync.publisherPublishRequestArgs).setRequests(i),this.raiseRequestEvent(fm.websync.publisher._onPublishRequest,n)){if(r=fm.websync.publication.toMessages(i),a=this.send(r,this.getRequestUrl()),s=fm.websync.publication.fromMessages(a.getResponses()),(e=new fm.websync.publisherPublishResponseArgs).setRequests(i),e.setResponses(s),this.raiseResponseEvent(fm.websync.publisher._onPublishResponse,e,a),null!==(u=a.getException())&&typeof u<"u")throw a.getException();return s}return null},t.prototype.processRequestUrl=function(){var e,n,s,r,i;if(n=arguments[0],fm.stringExtensions.isNullOrEmpty(n)&&(n=this.getRequestUrl()),e=!1,s=null,this.getConcurrencyMode()===fm.websync.concurrencyMode.High&&(r=new fm.holder(s),i=fm.hashExtensions.tryGetValue(fm.websync.publisher._requestUrlCache,n,r),s=r.getValue(),e=i),!e){if(s=n,s=fm.httpTransfer.addQueryToUrl(fm.httpTransfer.addQueryToUrl(s,"src",fm.httpWebRequestTransfer.getPlatformCode()),"AspxAutoDetectCookieSupport","1"),this.getConcurrencyMode()!==fm.websync.concurrencyMode.High)return s;fm.websync.publisher._requestUrlCache[n]=s}return s},t.prototype.publish=function(){var e,n,r,a;return 1===arguments.length?null===(a=r=this.publishMany([arguments[0]]))||typeof a>"u"||0===r.length?null:r[0]:3===arguments.length?(e=arguments[0],n=arguments[1],this.publish(new fm.websync.publication(e,n,arguments[2]))):2===arguments.length?(e=arguments[0],n=arguments[1],this.publish(new fm.websync.publication(e,n))):void 0},t.prototype.publishMany=function(){var e,n;if(null===(n=e=arguments[0])||typeof n>"u"||0===e.length)throw new Error("publications cannot be null/empty.");return this.performPublish(e)},t.prototype.raiseEvent=function(){var e,n,s;if(n=arguments[0],(e=arguments[1]).setPublisher(this),null!==(s=n)&&typeof s<"u")return n(this,e)},t.prototype.raiseRequestEvent=function(){var e;return this.raiseEvent(arguments[0],e=arguments[1]),!e.getCancel()},t.prototype.raiseResponseEvent=function(){var e,n;return n=arguments[0],(e=arguments[1]).setException(arguments[2].getException()),this.raiseEvent(n,e)},t.prototype.send=function(){var e,n,s,r,i,a,u,c,l,h,g,p,m,_,d,b;for(l=arguments[0],h=this.processRequestUrl(g=arguments[1]),g=this.processRequestUrl(g),p=0,m=(_=l).length;p<m;p++)u=_[p],this.getDisableBinary()&&u.setDisableBinary(this.getDisableBinary());(i=new fm.websync.messageRequestArgs(this.createHeaders())).setMessages(l),i.setOnRequestCreated(this.internalOnRequestCreated),i.setOnResponseReceived(this.internalOnResponseReceived),i.setOnHttpRequestCreated(this.internalOnHttpRequestCreated),i.setOnHttpResponseReceived(this.internalOnHttpResponseReceived),i.setSender(this),i.setTimeout(this.getRequestTimeout()),i.setUrl(g),(c=i).setDynamicValue("frameUrl",h),e=(a=fm.websync.messageTransferFactory.getHttpMessageTransfer()).send(c);try{a.shutdown()}catch{}return null!==(d=e.getException())&&typeof d<"u"?((n=new fm.websync.publisherResponseArgs).setException(e.getException()),n):null===(b=e.getMessages())||typeof b>"u"||0===e.getMessages().length?((s=new fm.websync.publisherResponseArgs).setException(new Error("Invalid response received from server.")),s):((r=new fm.websync.publisherResponseArgs).setResponses(e.getMessages()),r)},t._requestUrlCache={},t._requestUrlCacheLock=new fm.object,t}.call(this,fm.websync.baseClient),fm.websync.record=function(o){function t(){var e,n,s;return this.setValue=__bind(this.setValue,this),this.getValue=__bind(this.getValue,this),this.toJson=__bind(this.toJson,this),this.setValueJson=__bind(this.setValueJson,this),this.setValidate=__bind(this.setValidate,this),this.setPrivate=__bind(this.setPrivate,this),this.setKey=__bind(this.setKey,this),this.getValueJson=__bind(this.getValueJson,this),this.getValidate=__bind(this.getValidate,this),this.getPrivate=__bind(this.getPrivate,this),this.getKey=__bind(this.getKey,this),this.getHashCode=__bind(this.getHashCode,this),this.equals=__bind(this.equals,this),this.duplicate=__bind(this.duplicate,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):3===arguments.length?(e=arguments[0],s=arguments[1],n=arguments[2],t.__super__.constructor.call(this),this.setValidate(!0),this.setKey(e),this.setValueJson(s),void this.setPrivate(n)):void(1!==arguments.length?2!==arguments.length||t.call(this,e=arguments[0],s=arguments[1],!1):t.call(this,e=arguments[0],null))}return __extends(t,o),t.prototype.__key=null,t.prototype.__priv=!1,t.prototype.__valueJson=null,t.prototype._validate=!1,t.fromJson=function(){return fm.websync.serializer.deserializeRecord(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializeRecordArray(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeRecord(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializeRecordArray(arguments[0])},t.prototype.duplicate=function(){return new fm.websync.record(this.getKey(),this.getValueJson(),this.getPrivate())},t.prototype.equals=function(){return fm.global.tryCast(arguments[0],fm.websync.record)===this},t.prototype.getHashCode=function(){var e,n,s;return e=17,null!==(n=this.getKey())&&typeof n<"u"&&(e=23*e+this.getKey().hashCode()),null!==(s=this.getValueJson())&&typeof s<"u"&&(e=23*e+this.getValueJson().hashCode()),23*e+this.getPrivate().hashCode()},t.prototype.getKey=function(){return this.__key},t.prototype.getPrivate=function(){return this.__priv},t.prototype.getValidate=function(){return this._validate},t.prototype.getValueJson=function(){return this.__valueJson},t.prototype.setKey=function(){var e,n;if(null===(n=e=arguments[0])||typeof n>"u")throw new Error("key cannot be null.");return this.__key=e,this.setIsDirty(!0)},t.prototype.setPrivate=function(){return this.__priv=arguments[0],this.setIsDirty(!0)},t.prototype.setValidate=function(){return this._validate=arguments[0]},t.prototype.setValueJson=function(){var e,n;if(n=e=arguments[0],!(!this.getValidate()||null===n||typeof n>"u"||fm.serializer.isValidJson(e)))throw new Error("value is not valid JSON.");return this.__valueJson=e,this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.record.toJson(this)},t.prototype.getValue=function(){return fm.json.deserialize(this.getValueJson.apply(this,arguments))},t.prototype.setValue=function(){return arguments[arguments.length-1]=fm.json.serialize(arguments[arguments.length-1]),this.setValueJson.apply(this,arguments)},t}.call(this,fm.dynamic),fm.websync.serializer=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.createAdvice=function(){return new fm.websync.advice},t.createBaseAdvice=function(){return new fm.websync.baseAdvice},t.createBoundRecords=function(){return{}},t.createExtensions=function(){return new fm.websync.extensions},t.createMessage=function(){return new fm.websync.message},t.createNotification=function(){return new fm.websync.notification},t.createNotifyingClient=function(){return new fm.websync.notifyingClient},t.createPublication=function(){return new fm.websync.publication},t.createPublishingClient=function(){return new fm.websync.publishingClient},t.createRecord=function(){return new fm.websync.record("key")},t.createSubscribedClient=function(){return new fm.websync.subscribedClient},t.createSubscription=function(){return new fm.websync.subscription("/")},t.deserializeAdvice=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createAdvice,t.deserializeAdviceCallback)},t.deserializeAdviceCallback=function(){var e,n,s;switch(e=arguments[0],s=arguments[2],n=arguments[1]){case"long-polling":return void e.setLongPolling(fm.websync.serializer.deserializeBaseAdvice(s));case"callback-polling":return void e.setCallbackPolling(fm.websync.serializer.deserializeBaseAdvice(s))}return fm.websync.serializer.deserializeBaseAdviceCallback(e,n,s)},t.deserializeBaseAdvice=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createBaseAdvice,t.deserializeBaseAdviceCallback)},t.deserializeBaseAdviceCallback=function(){var e,s,r,i;if(e=arguments[0],r=arguments[2],null!==(i=s=arguments[1])&&typeof i<"u"){if("hosts"===s)return e.setHosts(fm.serializer.deserializeStringArray(r));if("interval"===s)return e.setInterval(fm.serializer.deserializeInteger(r));if("reconnect"===s)return e.setReconnect(fm.websync.serializer.deserializeReconnect(r))}},t.deserializeBoundRecords=function(){return fm.serializer.deserializeObject(arguments[0],t.createBoundRecords,t.deserializeBoundRecordsCallback)},t.deserializeBoundRecordsCallback=function(){var n;return arguments[0][n=arguments[1]]=new fm.websync.record(n,fm.serializer.deserializeRaw(arguments[2]))},t.deserializeConnectionType=function(){switch(fm.serializer.deserializeString(arguments[0])){case"long-polling":return fm.websync.connectionType.LongPolling;case"callback-polling":return fm.websync.connectionType.CallbackPolling;case"websocket":return fm.websync.connectionType.WebSocket;case"iframe":return fm.websync.connectionType.IFrame;case"flash":return fm.websync.connectionType.Flash}throw new Error("Unknown connection type.")},t.deserializeConnectionTypeArray=function(){var e,n,s,r;if(e=arguments[0],fm.stringExtensions.isNullOrEmpty(e)||"null"===e||e.length<2||"["!==e.charAt(0)||"]"!==e.charAt(e.length-1))return null;for(e=fm.stringExtensions.substring(e,1,e.length-2),s=fm.stringExtensions.split(e,[","]),r=[],n=0;n<s.length;)try{r[n]=fm.websync.serializer.deserializeConnectionType(s[n])}finally{n++}return r},t.deserializeExtensions=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createExtensions,t.deserializeExtensionsCallback)},t.deserializeExtensionsCallback=function(){return arguments[0].setValueJson(arguments[1],fm.serializer.deserializeRaw(arguments[2]),!1)},t.deserializeMessage=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createMessage,t.deserializeMessageCallback)},t.deserializeMessageArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createMessage,t.deserializeMessageCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializeMessageCallback=function(){var e,n,s,r,i;switch(n=arguments[1],i=arguments[2],(e=arguments[0]).setValidate(!1),n){case"advice":e.setAdvice(fm.websync.serializer.deserializeAdvice(i));break;case"binding":e.setRecords(fm.websync.serializer.deserializeRecordArray(i));break;case"channel":e.setBayeuxChannel(fm.serializer.deserializeString(i));break;case"clientId":e.setClientId(fm.serializer.deserializeGuid(i));break;case"connectionType":e.setConnectionType(fm.websync.serializer.deserializeConnectionType(i));break;case"data":e.setDataJson(fm.serializer.deserializeRaw(i));break;case"error":e.setError(fm.serializer.deserializeString(i));break;case"ext":e.setExtensions(fm.websync.serializer.deserializeExtensions(i));break;case"id":e.setId(fm.serializer.deserializeString(i));break;case"minimumVersion":e.setMinimumVersion(fm.serializer.deserializeString(i));break;case"subscription":if(!fm.stringExtensions.startsWith(i,"[")){r=fm.serializer.deserializeString(i),fm.stringExtensions.isNullOrEmpty(r)||e.setChannels([r]);break}e.setChannels(fm.serializer.deserializeStringArray(i));break;case"successful":s=fm.serializer.deserializeBoolean(i),e.setSuccessful(!0===s);break;case"supportedConnectionTypes":e.setSupportedConnectionTypes(fm.websync.serializer.deserializeConnectionTypeArray(i));break;case"timestamp":e.setTimestamp(fm.websync.serializer.deserializeTimestamp(i));break;case"version":e.setVersion(fm.serializer.deserializeString(i))}return e.setValidate(!0)},t.deserializeNotification=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createNotification,t.deserializeNotificationCallback)},t.deserializeNotificationArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createNotification,t.deserializeNotificationCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializeNotificationCallback=function(){var e,n,s,r,i,a;return e=arguments[1],i=arguments[2],(n=arguments[0]).setValidate(!1),null!==(a=r=e)&&typeof a<"u"&&("data"!==r?"ext"===r?n.setExtensions(fm.websync.serializer.deserializeExtensions(i)):"successful"===r?(s=fm.serializer.deserializeBoolean(i),n.setSuccessful(!0===s)):"error"===r?n.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&n.setTimestamp(fm.websync.serializer.deserializeTimestamp(i)):n.setDataJson(fm.serializer.deserializeRaw(i))),n.setValidate(!0)},t.deserializeNotifyingClient=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createNotifyingClient,t.deserializeNotifyingClientCallback)},t.deserializeNotifyingClientCallback=function(){var n,s,r,i;if(n=arguments[0],r=arguments[2],null!==(i=s=arguments[1])&&typeof i<"u"){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},t.deserializePublication=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createPublication,t.deserializePublicationCallback)},t.deserializePublicationArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createPublication,t.deserializePublicationCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializePublicationCallback=function(){var e,n,s,r,i,a;return e=arguments[1],i=arguments[2],(s=arguments[0]).setValidate(!1),null!==(a=r=e)&&typeof a<"u"&&("channel"!==r?"data"===r?s.setDataJson(fm.serializer.deserializeRaw(i)):"ext"===r?s.setExtensions(fm.websync.serializer.deserializeExtensions(i)):"successful"===r?(n=fm.serializer.deserializeBoolean(i),s.setSuccessful(!0===n)):"error"===r?s.setError(fm.serializer.deserializeString(i)):"timestamp"===r&&s.setTimestamp(fm.websync.serializer.deserializeTimestamp(i)):s.setChannel(fm.serializer.deserializeString(i))),s.setValidate(!0)},t.deserializePublishingClient=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createPublishingClient,t.deserializePublishingClientCallback)},t.deserializePublishingClientCallback=function(){var n,s,r,i;if(n=arguments[0],r=arguments[2],null!==(i=s=arguments[1])&&typeof i<"u"){if("clientId"===s)return n.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===s)return n.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},t.deserializeReconnect=function(){switch(fm.serializer.deserializeString(arguments[0])){case"retry":return fm.websync.reconnect.Retry;case"handshake":return fm.websync.reconnect.Handshake;case"none":return fm.websync.reconnect.None}throw new Error("Unknown reconnect advice.")},t.deserializeRecord=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createRecord,t.deserializeRecordCallback)},t.deserializeRecordArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createRecord,t.deserializeRecordCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializeRecordCallback=function(){var e,n,s,r,i,a;return e=arguments[1],i=arguments[2],(s=arguments[0]).setValidate(!1),null!==(a=r=e)&&typeof a<"u"&&("key"!==r?"private"===r?(n=fm.serializer.deserializeBoolean(i),s.setPrivate(!0===n)):"value"===r&&s.setValueJson(fm.serializer.deserializeRaw(i)):s.setKey(fm.serializer.deserializeString(i))),s.setValidate(!0)},t.deserializeSubscribedClient=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createSubscribedClient,t.deserializeSubscribedClientCallback)},t.deserializeSubscribedClientArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createSubscribedClient,t.deserializeSubscribedClientCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializeSubscribedClientCallback=function(){var n,s,r,i;if(s=arguments[0],r=arguments[2],null!==(i=n=arguments[1])&&typeof i<"u"){if("clientId"===n)return s.setClientId(fm.serializer.deserializeGuid(r));if("boundRecords"===n)return s.setBoundRecords(fm.websync.serializer.deserializeBoundRecords(r))}},t.deserializeSubscription=function(){return fm.serializer.deserializeObjectFast(arguments[0],t.createSubscription,t.deserializeSubscriptionCallback)},t.deserializeSubscriptionArray=function(){var e,s;return null===(s=e=fm.serializer.deserializeObjectArrayFast(arguments[0],t.createSubscription,t.deserializeSubscriptionCallback))||typeof s>"u"?null:fm.arrayExtensions.toArray(e)},t.deserializeSubscriptionCallback=function(){var n,s,r,i;if(s=arguments[0],r=arguments[2],null!==(i=n=arguments[1])&&typeof i<"u"){if("channel"===n)return s.setChannel(fm.serializer.deserializeString(r));if("tag"===n)return s.setTag(fm.serializer.deserializeString(r))}},t.deserializeTimestamp=function(){var e,n,s,r,i,a,u,c,l,g,p,m,_,d,b,C,v,R,S,T,P,A,x,E,w,z,O,q;if(c=fm.serializer.deserializeString(arguments[0]),C=fm.dateTime.getUtcNow(),!fm.stringExtensions.isNullOrEmpty(c)){if(2!==(b=fm.stringExtensions.split(c,["T"])).length||(g=b[1],3!==(b=fm.stringExtensions.split(b[0],["-"])).length)||(u=b[0],p=b[1],m=b[2],3!==(b=fm.stringExtensions.split(g,[":"])).length)||(_=b[0],d=b[1],2!==(b=fm.stringExtensions.split(b[2],["."])).length))return C;l=b[0],e=0,n=0,s=0,r=0,i=0,a=0,v=new fm.holder(e),R=fm.parseAssistant.tryParseInteger(u,v),e=v.getValue(),P=new fm.holder(n),A=fm.parseAssistant.tryParseInteger(p,P),n=P.getValue(),x=new fm.holder(s),E=fm.parseAssistant.tryParseInteger(m,x),s=x.getValue(),w=new fm.holder(r),z=fm.parseAssistant.tryParseInteger(_,w),r=w.getValue(),O=new fm.holder(i),q=fm.parseAssistant.tryParseInteger(d,O),i=O.getValue(),S=new fm.holder(a),T=fm.parseAssistant.tryParseInteger(l,S),a=S.getValue(),R&&A&&E&&z&&q&&T&&(C=new fm.dateTime(e,n,s,r,i,a))}return C},t.serializeAdvice=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeAdviceCallback)},t.serializeAdviceCallback=function(){var e,n,s,r;if(e=arguments[0],n=arguments[1],fm.websync.serializer.serializeBaseAdviceCallback(e,n),null!==(s=e.getCallbackPolling())&&typeof s<"u"&&(n["callback-polling"]=fm.websync.serializer.serializeBaseAdvice(e.getCallbackPolling())),null!==(r=e.getLongPolling())&&typeof r<"u")return n["long-polling"]=fm.websync.serializer.serializeBaseAdvice(e.getLongPolling())},t.serializeBaseAdvice=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeBaseAdviceCallback)},t.serializeBaseAdviceCallback=function(){var e,n,s;if(n=arguments[1],null!==(s=(e=arguments[0]).getHosts())&&typeof s<"u"&&(n.hosts=fm.serializer.serializeStringArray(e.getHosts())),null!==e.getInterval()&&(n.interval=fm.serializer.serializeInteger(e.getInterval())),null!==e.getReconnect())return n.reconnect=fm.websync.serializer.serializeReconnect(e.getReconnect())},t.serializeBoundRecords=function(){return fm.serializer.serializeObject(arguments[0],t.serializeBoundRecordsCallback)},t.serializeBoundRecordsCallback=function(){var e,n,s,r,i,a,u;for(e=arguments[0],n=arguments[1],a=[],r=0,i=(u=fm.hashExtensions.getKeys(e)).length;r<i;r++)a.push(n[s=u[r]]=fm.serializer.serializeRaw(e[s].getValueJson()));return a},t.serializeConnectionType=function(){var n;switch(n=null,arguments[0]){case fm.websync.connectionType.WebSocket:n="websocket";break;case fm.websync.connectionType.LongPolling:n="long-polling";break;case fm.websync.connectionType.CallbackPolling:n="callback-polling";break;case fm.websync.connectionType.IFrame:n="iframe";break;case fm.websync.connectionType.Flash:n="flash"}return fm.serializer.serializeString(n)},t.serializeConnectionTypeArray=function(){var e,n,s;for(e=arguments[0],s=[],n=0;n<e.length;)try{s[n]=fm.websync.serializer.serializeConnectionType(e[n])}finally{n++}return fm.stringExtensions.concat("[",fm.stringExtensions.join(",",s),"]")},t.serializeExtensions=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeExtensionsCallback)},t.serializeExtensionsCallback=function(){var e,n,s,r,i,a,u;for(n=arguments[1],a=[],r=0,i=(u=(e=arguments[0]).getNames()).length;r<i;r++)a.push(n[s=u[r]]=fm.serializer.serializeRaw(e.getValueJson(s)));return a},t.serializeMessage=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeMessageCallback)},t.serializeMessageArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializeMessageCallback)},t.serializeMessageCallback=function(){var e,n,s,r,i,a,u,c,l,h,g,p;if(e=arguments[1],null!==(n=arguments[0]).getClientId()&&(e.clientId=fm.serializer.serializeGuid(n.getClientId())),null!==n.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(n.getTimestamp())),null!==(s=n.getAdvice())&&typeof s<"u"&&(e.advice=fm.websync.serializer.serializeAdvice(n.getAdvice())),null!==(r=n.getRecords())&&typeof r<"u"&&(n.getType()===fm.websync.messageType.Bind||n.getType()===fm.websync.messageType.Unbind)&&(e.binding=fm.websync.serializer.serializeRecordArray(n.getRecords())),null!==(i=n.getBayeuxChannel())&&typeof i<"u"&&(e.channel=fm.serializer.serializeString(n.getBayeuxChannel())),null!==n.getConnectionType()&&(e.connectionType=fm.websync.serializer.serializeConnectionType(n.getConnectionType())),null!==(a=n.getDataJson())&&typeof a<"u"&&(e.data=fm.serializer.serializeRaw(n.getDataJson())),null!==(u=n.getError())&&typeof u<"u"&&(e.error=fm.serializer.serializeString(n.getError())),n.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(n.getExtensions())),null!==(c=n.getId())&&typeof c<"u"&&(e.id=fm.serializer.serializeString(n.getId())),null!==(l=n.getMinimumVersion())&&typeof l<"u"&&(e.minimumVersion=fm.serializer.serializeString(n.getMinimumVersion())),null!==(h=n.getChannels())&&typeof h<"u"&&(n.getType()===fm.websync.messageType.Subscribe||n.getType()===fm.websync.messageType.Unsubscribe)&&(e.subscription=fm.serializer.serializeStringArray(n.getChannels())),n.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(n.getSuccessful())),null!==(g=n.getSupportedConnectionTypes())&&typeof g<"u"&&(e.supportedConnectionTypes=fm.websync.serializer.serializeConnectionTypeArray(n.getSupportedConnectionTypes())),null!==(p=n.getVersion())&&typeof p<"u")return e.version=fm.serializer.serializeString(n.getVersion())},t.serializeNotification=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeNotificationCallback)},t.serializeNotificationArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializeNotificationCallback)},t.serializeNotificationCallback=function(){var e,n,s,r;if(e=arguments[1],null!==(s=(n=arguments[0]).getError())&&typeof s<"u"&&(e.error=fm.serializer.serializeString(n.getError())),n.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(n.getSuccessful())),null!==n.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(n.getTimestamp())),n.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(n.getExtensions())),null!==(r=n.getDataJson())&&typeof r<"u")return e.data=fm.serializer.serializeRaw(n.getDataJson())},t.serializeNotifyingClient=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeNotifyingClientCallback)},t.serializeNotifyingClientCallback=function(){var e,n,s;if(e=arguments[1],null!==(n=arguments[0]).getClientId()&&(e.clientId=fm.serializer.serializeGuid(n.getClientId())),null!==(s=n.getBoundRecords())&&typeof s<"u")return e.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords())},t.serializePublication=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializePublicationCallback)},t.serializePublicationArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializePublicationCallback)},t.serializePublicationCallback=function(){var e,n,s,r,i;if(e=arguments[1],null!==(s=(n=arguments[0]).getChannel())&&typeof s<"u"&&(e.channel=fm.serializer.serializeString(n.getChannel())),null!==(r=n.getError())&&typeof r<"u"&&(e.error=fm.serializer.serializeString(n.getError())),n.getSuccessful()&&(e.successful=fm.serializer.serializeBoolean(n.getSuccessful())),null!==n.getTimestamp()&&(e.timestamp=fm.websync.serializer.serializeTimestamp(n.getTimestamp())),n.getExtensions().getCount()>0&&(e.ext=fm.websync.serializer.serializeExtensions(n.getExtensions())),null!==(i=n.getDataJson())&&typeof i<"u")return e.data=fm.serializer.serializeRaw(n.getDataJson())},t.serializePublishingClient=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializePublishingClientCallback)},t.serializePublishingClientCallback=function(){var e,n,s;if(e=arguments[1],null!==(n=arguments[0]).getClientId()&&(e.clientId=fm.serializer.serializeGuid(n.getClientId())),null!==(s=n.getBoundRecords())&&typeof s<"u")return e.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords())},t.serializeReconnect=function(){var n;switch(n=null,arguments[0]){case fm.websync.reconnect.Retry:n="retry";break;case fm.websync.reconnect.Handshake:n="handshake";break;case fm.websync.reconnect.None:n="none"}return fm.serializer.serializeString(n)},t.serializeRecord=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeRecordCallback)},t.serializeRecordArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializeRecordCallback)},t.serializeRecordCallback=function(){var e,n,s,r;if(e=arguments[1],null!==(s=(n=arguments[0]).getKey())&&typeof s<"u"&&(e.key=fm.serializer.serializeString(n.getKey())),n.getPrivate()&&(e.private=fm.serializer.serializeBoolean(n.getPrivate())),null!==(r=n.getValueJson())&&typeof r<"u")return e.value=fm.serializer.serializeRaw(n.getValueJson())},t.serializeSubscribedClient=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeSubscribedClientCallback)},t.serializeSubscribedClientArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializeSubscribedClientCallback)},t.serializeSubscribedClientCallback=function(){var e,n,s;if(n=arguments[0],(e=arguments[1]).clientId=fm.serializer.serializeGuid(n.getClientId()),null!==(s=n.getBoundRecords())&&typeof s<"u")return e.boundRecords=fm.websync.serializer.serializeBoundRecords(n.getBoundRecords())},t.serializeSubscription=function(){return fm.serializer.serializeObjectFast(arguments[0],t.serializeSubscriptionCallback)},t.serializeSubscriptionArray=function(){return fm.serializer.serializeObjectArrayFast(arguments[0],t.serializeSubscriptionCallback)},t.serializeSubscriptionCallback=function(){var e,n,s;if(n=arguments[0],(e=arguments[1]).channel=fm.serializer.serializeString(n.getChannel()),null!==(s=n.getTag())&&typeof s<"u")return e.tag=fm.serializer.serializeString(n.getTag())},t.serializeTimestamp=function(){var e,n,s,r,i,a,u,c;if(e=null,null!==(c=arguments[0])){for(n=fm.intExtensions.toString(c.getYear()),s=fm.intExtensions.toString(c.getMonth()),r=fm.intExtensions.toString(c.getDay()),i=fm.intExtensions.toString(c.getHour()),a=fm.intExtensions.toString(c.getMinute()),u=fm.intExtensions.toString(c.getSecond());n.length<4;)n=fm.stringExtensions.concat("0",n);for(;s.length<2;)s=fm.stringExtensions.concat("0",s);for(;r.length<2;)r=fm.stringExtensions.concat("0",r);for(;i.length<2;)i=fm.stringExtensions.concat("0",i);for(;a.length<2;)a=fm.stringExtensions.concat("0",a);for(;u.length<2;)u=fm.stringExtensions.concat("0",u);e=fm.stringExtensions.format("{0}-{1}-{2}T{3}:{4}:{5}.00",[n,s,r,i,a,u])}return fm.serializer.serializeString(e)},t}.call(this,fm.object),fm.websync.splitter=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.split=function(){var s,r,i,a,u,c,l,h;if(s=arguments[1],null===(l=c=arguments[0])||typeof l>"u")throw new Error("str cannot be null.");if(null===(h=s)||typeof h>"u")throw new Error("delimiter cannot be null.");if(0===s.length)return[c];for(u=0,a=0,i=[],r=0;r<c.length;)try{c.charAt(r)===s.charAt(a)?a===s.length-1?(fm.arrayExtensions.add(i,fm.stringExtensions.substring(c,u,r-a-u)),u=r+1,a=0):a++:a=0}finally{r++}return fm.arrayExtensions.add(i,c.substring(u)),fm.arrayExtensions.toArray(i)},t}.call(this,fm.object),fm.websync.subscription=function(o){function t(){var e,n;return this.toJson=__bind(this.toJson,this),this.setTag=__bind(this.setTag,this),this.setChannel=__bind(this.setChannel,this),this.getTag=__bind(this.getTag,this),this.getHashCode=__bind(this.getHashCode,this),this.getChannel=__bind(this.getChannel,this),this.equals=__bind(this.equals,this),this.duplicate=__bind(this.duplicate,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0])):1===arguments.length?(e=arguments[0],t.__super__.constructor.call(this),void this.setChannel(e)):2===arguments.length?(e=arguments[0],n=arguments[1],t.__super__.constructor.call(this),this.setChannel(e),void this.setTag(n)):void 0}return __extends(t,o),t.prototype.__channel=null,t.prototype.__tag=null,t.fromJson=function(){return fm.websync.serializer.deserializeSubscription(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializeSubscriptionArray(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeSubscription(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializeSubscriptionArray(arguments[0])},t.prototype.duplicate=function(){return new fm.websync.subscription(this.getChannel(),this.getTag())},t.prototype.equals=function(){return fm.global.tryCast(arguments[0],fm.websync.subscription)===this},t.prototype.getChannel=function(){return this.__channel},t.prototype.getHashCode=function(){var e,n;return e=23*(e=17)+this.getChannel().hashCode(),null!==(n=this.getTag())&&typeof n<"u"&&(e=23*e+this.getTag().hashCode()),e},t.prototype.getTag=function(){var e;return null!=(e=this.__tag)?e:fm.stringExtensions.empty},t.prototype.setChannel=function(){var e,n;if(null===(n=e=arguments[0])||typeof n>"u")throw new Error("channel cannot be null.");return this.__channel=e,this.setIsDirty(!0)},t.prototype.setTag=function(){return this.__tag=arguments[0]??fm.stringExtensions.empty,this.setIsDirty(!0)},t.prototype.toJson=function(){return fm.websync.subscription.toJson(this)},t}.call(this,fm.dynamic),fm.websync.subscribedClient=function(o){function t(){var e,n;return this.toJson=__bind(this.toJson,this),this.setClientId=__bind(this.setClientId,this),this.setBoundRecords=__bind(this.setBoundRecords,this),this.getClientId=__bind(this.getClientId,this),this.getBoundRecords=__bind(this.getBoundRecords,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0])?(t.__super__.constructor.call(this),this.setBoundRecords({}),void fm.util.attachProperties(this,arguments[0])):0===arguments.length?(t.__super__.constructor.call(this),void this.setBoundRecords({})):2===arguments.length?(n=arguments[0],e=arguments[1],t.__super__.constructor.call(this),this.setClientId(n),void this.setBoundRecords(e)):void 0}return __extends(t,o),t.prototype._boundRecords=null,t.prototype._clientId=null,t.fromJson=function(){return fm.websync.serializer.deserializeSubscribedClient(arguments[0])},t.fromJsonMultiple=function(){return fm.websync.serializer.deserializeSubscribedClientArray(arguments[0])},t.toJson=function(){return fm.websync.serializer.serializeSubscribedClient(arguments[0])},t.toJsonMultiple=function(){return fm.websync.serializer.serializeSubscribedClientArray(arguments[0])},t.prototype.getBoundRecords=function(){return this._boundRecords},t.prototype.getClientId=function(){return this._clientId},t.prototype.setBoundRecords=function(){return this._boundRecords=arguments[0]},t.prototype.setClientId=function(){return this._clientId=arguments[0]},t.prototype.toJson=function(){return fm.websync.subscribedClient.toJson(this)},t}.call(this,fm.serializable),fm.websync.webSocketOpenArgs=function(o){function t(){if(this.setStreamTimeout=__bind(this.setStreamTimeout,this),this.setSender=__bind(this.setSender,this),this.setOnSuccess=__bind(this.setOnSuccess,this),this.setOnStreamFailure=__bind(this.setOnStreamFailure,this),this.setOnResponseReceived=__bind(this.setOnResponseReceived,this),this.setOnRequestCreated=__bind(this.setOnRequestCreated,this),this.setOnReceive=__bind(this.setOnReceive,this),this.setOnFailure=__bind(this.setOnFailure,this),this.setHeaders=__bind(this.setHeaders,this),this.setHandshakeTimeout=__bind(this.setHandshakeTimeout,this),this.getStreamTimeout=__bind(this.getStreamTimeout,this),this.getSender=__bind(this.getSender,this),this.getOnSuccess=__bind(this.getOnSuccess,this),this.getOnStreamFailure=__bind(this.getOnStreamFailure,this),this.getOnResponseReceived=__bind(this.getOnResponseReceived,this),this.getOnRequestCreated=__bind(this.getOnRequestCreated,this),this.getOnReceive=__bind(this.getOnReceive,this),this.getOnFailure=__bind(this.getOnFailure,this),this.getHeaders=__bind(this.getHeaders,this),this.getHandshakeTimeout=__bind(this.getHandshakeTimeout,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),this.setStreamTimeout(4e4),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setHandshakeTimeout(15e3),this.setStreamTimeout(4e4)}return __extends(t,o),t.prototype._handshakeTimeout=0,t.prototype._headers=null,t.prototype._onFailure=null,t.prototype._onReceive=null,t.prototype._onRequestCreated=null,t.prototype._onResponseReceived=null,t.prototype._onStreamFailure=null,t.prototype._onSuccess=null,t.prototype._sender=null,t.prototype._streamTimeout=0,t.prototype.getHandshakeTimeout=function(){return this._handshakeTimeout},t.prototype.getHeaders=function(){return this._headers},t.prototype.getOnFailure=function(){return this._onFailure},t.prototype.getOnReceive=function(){return this._onReceive},t.prototype.getOnRequestCreated=function(){return this._onRequestCreated},t.prototype.getOnResponseReceived=function(){return this._onResponseReceived},t.prototype.getOnStreamFailure=function(){return this._onStreamFailure},t.prototype.getOnSuccess=function(){return this._onSuccess},t.prototype.getSender=function(){return this._sender},t.prototype.getStreamTimeout=function(){return this._streamTimeout},t.prototype.setHandshakeTimeout=function(){return this._handshakeTimeout=arguments[0]},t.prototype.setHeaders=function(){return this._headers=arguments[0]},t.prototype.setOnFailure=function(){return this._onFailure=arguments[0]},t.prototype.setOnReceive=function(){return this._onReceive=arguments[0]},t.prototype.setOnRequestCreated=function(){return this._onRequestCreated=arguments[0]},t.prototype.setOnResponseReceived=function(){return this._onResponseReceived=arguments[0]},t.prototype.setOnStreamFailure=function(){return this._onStreamFailure=arguments[0]},t.prototype.setOnSuccess=function(){return this._onSuccess=arguments[0]},t.prototype.setSender=function(){return this._sender=arguments[0]},t.prototype.setStreamTimeout=function(){return this._streamTimeout=arguments[0]},t}(fm.dynamic),fm.websync.webSocketOpenFailureArgs=function(o){function t(){if(this.setStatusCode=__bind(this.setStatusCode,this),this.getStatusCode=__bind(this.getStatusCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._statusCode=null,t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.setStatusCode=function(){return this._statusCode=arguments[0]},t}(fm.websync.socketOpenFailureArgs),fm.websync.webSocketOpenSuccessArgs=function(o){function t(){if(1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t}(fm.websync.socketOpenSuccessArgs),fm.websync.webSocketReceiveArgs=function(o){function t(){if(this.setTextMessage=__bind(this.setTextMessage,this),this.setBinaryMessage=__bind(this.setBinaryMessage,this),this.getTextMessage=__bind(this.getTextMessage,this),this.getIsText=__bind(this.getIsText,this),this.getBinaryMessage=__bind(this.getBinaryMessage,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._binaryMessage=null,t.prototype._textMessage=null,t.prototype.getBinaryMessage=function(){return this._binaryMessage},t.prototype.getIsText=function(){var e;return null!==(e=this.getTextMessage())&&typeof e<"u"},t.prototype.getTextMessage=function(){return this._textMessage},t.prototype.setBinaryMessage=function(){return this._binaryMessage=arguments[0]},t.prototype.setTextMessage=function(){return this._textMessage=arguments[0]},t}(fm.dynamic),fm.websync.webSocketRequest=function(o){function t(){if(this.setCallback=__bind(this.setCallback,this),this.setArgs=__bind(this.setArgs,this),this.getCallback=__bind(this.getCallback,this),this.getArgs=__bind(this.getArgs,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._args=null,t.prototype._callback=null,t.prototype.getArgs=function(){return this._args},t.prototype.getCallback=function(){return this._callback},t.prototype.setArgs=function(){return this._args=arguments[0]},t.prototype.setCallback=function(){return this._callback=arguments[0]},t}(fm.object),fm.websync.webSocketSendArgs=function(o){function t(){if(this.setTimeout=__bind(this.setTimeout,this),this.setTextMessage=__bind(this.setTextMessage,this),this.setBinaryMessage=__bind(this.setBinaryMessage,this),this.getTimeout=__bind(this.getTimeout,this),this.getTextMessage=__bind(this.getTextMessage,this),this.getIsText=__bind(this.getIsText,this),this.getBinaryMessage=__bind(this.getBinaryMessage,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),this.setTimeout(15e3),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this),this.setTimeout(15e3)}return __extends(t,o),t.prototype._binaryMessage=null,t.prototype._textMessage=null,t.prototype._timeout=0,t.prototype.getBinaryMessage=function(){return this._binaryMessage},t.prototype.getIsText=function(){var e;return null!==(e=this.getTextMessage())&&typeof e<"u"},t.prototype.getTextMessage=function(){return this._textMessage},t.prototype.getTimeout=function(){return this._timeout},t.prototype.setBinaryMessage=function(){return this._binaryMessage=arguments[0]},t.prototype.setTextMessage=function(){return this._textMessage=arguments[0]},t.prototype.setTimeout=function(){return this._timeout=arguments[0]},t}(fm.dynamic),fm.websync.webSocketStreamFailureArgs=function(o){function t(){if(this.setStatusCode=__bind(this.setStatusCode,this),this.getStatusCode=__bind(this.getStatusCode,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);t.__super__.constructor.call(this)}return __extends(t,o),t.prototype._statusCode=null,t.prototype.getStatusCode=function(){return this._statusCode},t.prototype.setStatusCode=function(){return this._statusCode=arguments[0]},t}(fm.websync.socketStreamFailureArgs),fm.websync.webSocketTransfer=function(o){function t(){var e;if(this.streamFailure=__bind(this.streamFailure,this),this.shutdown=__bind(this.shutdown,this),this.setWebSocket=__bind(this.setWebSocket,this),this.sendMessagesAsync=__bind(this.sendMessagesAsync,this),this.sendMessages=__bind(this.sendMessages,this),this.receive=__bind(this.receive,this),this.open=__bind(this.open,this),this.getWebSocket=__bind(this.getWebSocket,this),this.connectSuccess=__bind(this.connectSuccess,this),this.connectFailure=__bind(this.connectFailure,this),1===arguments.length&&fm.util.isPlainObject(arguments[0])&&fm.util.canAttachProperties(this,arguments[0]))return t.__super__.constructor.call(this),void fm.util.attachProperties(this,arguments[0]);e=arguments[0],t.__super__.constructor.call(this),e=(e=e.replace("https://","wss://")).replace("http://","ws://"),this.setWebSocket(new fm.websync.webSocket(e))}return __extends(t,o),t.prototype._activeRequest=null,t.prototype._webSocket=null,t.prototype.connectFailure=function(){var e,n;if(e=arguments[0],null!==(n=this.getOnOpenFailure())&&typeof n<"u")return this.getOnOpenFailure()(e)},t.prototype.connectSuccess=function(){var e,n;if(e=arguments[0],null!==(n=this.getOnOpenSuccess())&&typeof n<"u")return this.getOnOpenSuccess()(e)},t.prototype.getWebSocket=function(){return this._webSocket},t.prototype.open=function(){var e,n;return e=arguments[0],(n=new fm.websync.webSocketOpenArgs).setHandshakeTimeout(this.getHandshakeTimeout()),n.setHeaders(e),n.setOnSuccess(this.connectSuccess),n.setOnFailure(this.connectFailure),n.setOnStreamFailure(this.streamFailure),n.setOnRequestCreated(this.getOnRequestCreated()),n.setOnResponseReceived(this.getOnResponseReceived()),n.setOnReceive(this.receive),n.setSender(this.getSender()),this.getWebSocket().open(n)},t.prototype.receive=function(){var e,n,s;return n=(e=arguments[0]).getIsText()?fm.websync.message.fromJsonMultiple(e.getTextMessage()):fm.websync.binaryMessage.fromBinaryMultiple(e.getBinaryMessage()),(s=new fm.websync.messageResponseArgs(this._activeRequest.getArgs())).setHeaders(new fm.nameValueCollection),s.setMessages(n),this._activeRequest.getCallback()(s)},t.prototype.sendMessages=function(){throw new Error("Synchronous WebSockets are not supported.")},t.prototype.sendMessagesAsync=function(){var e,n,s,r,i,a;return i=arguments[0],n=arguments[1],(r=new fm.websync.webSocketRequest).setArgs(i),r.setCallback(n),s=r,(e=new fm.websync.webSocketSendArgs).setTimeout(s.getArgs().getTimeout()),a=e,s.getArgs().getIsBinary()?a.setBinaryMessage(fm.websync.binaryMessage.toBinaryMultiple(s.getArgs().getMessages())):a.setTextMessage(fm.websync.message.toJsonMultiple(s.getArgs().getMessages())),this._activeRequest=s,this.getWebSocket().send(a)},t.prototype.setWebSocket=function(){return this._webSocket=arguments[0]},t.prototype.shutdown=function(){return this.getWebSocket().close()},t.prototype.streamFailure=function(){var e,n;if(e=arguments[0],null!==(n=this.getOnStreamFailure())&&typeof n<"u")return this.getOnStreamFailure()(e)},t}(fm.websync.socketMessageTransfer),function(){var o,t,e,n,s,r,i,a,u,c,l,h;(o=fm.websync.client).addOnConnectRequest(function(g,p){var m;!(m=p.getMethodArgs()).getIsReconnect()&&!m.getLastClientId()&&!m.getLastSessionId()&&(o=u())&&(m.setLastClientId(o.clientId),m.setLastSessionId(o.sessionId),o.token&&g.setToken(o.token),n(o.clientId))}),o.addOnConnectEnd(function(g,p){var m;p.getException()||((m=p.getMethodArgs()).getLastClientId()&&t(m.getLastClientId()),s({clientId:g.getClientId(),sessionId:g.getSessionId(),token:g.getToken()}))}),o.addOnDisconnectEnd(function(g,p){p.getException()||t(g.getClientId())}),fm.util.observe(window,"beforeunload",function(){var p,m,_;for(m=0,_=(p=a()).length;m<_;m++)i(p[m])}),l=[],a=function(){return l},s=function(g){l.push(g)},t=function(g){var m,_,d;for(m=_=0,d=l.length;_<d;m=++_)if(l[m].clientId.equals(g))return void l.splice(m,1)},h="fm-websync-",u=function(){var g,p,m,_;for(p in g=null,_=c())m=_[p],fm.stringExtensions.startsWith(p,h)&&(m=fm.json.deserialize(m),g={clientId:new fm.guid(m.clientId),sessionId:new fm.guid(m.sessionId),token:m.token});return g},i=function(g){var p;p={clientId:g.clientId.toString(),sessionId:g.sessionId.toString(),token:g.token},r(h+g.clientId.toString(),fm.json.serialize(p),60)},n=function(g){e(h+g.toString())},c=function(){var g,p,m,_,d,b;for(m={},d=0,b=(p=document.cookie.split(";")).length;d<b;d++){for(g=p[d];" "===g.charAt(0);)g=g.substring(1,g.length);(_=g.indexOf("="))>=0&&(m[g.substring(0,_)]=g.substring(_+1,g.length))}return m},r=function(g,p,m){var _,d;d="",m&&((_=new Date).setTime(_.getTime()+1e3*m),d="; expires="+_.toGMTString()),document.cookie=g+"="+p+d+"; path=/"},e=function(g){r(g,"",-1)}}(),function(){var o,e,n,s,r,i,a,u,c,l;for(o=fm.websync.client,a=function(h){var g;return g=o.prototype[h],o.prototype[h]=function(){var p,m,d,b;if(1===arguments.length&&fm.util.isPlainObject(arguments[0])){if((m=arguments[0]).record&&fm.util.isPlainObject(m.record)&&(m.record=new fm.websync.record(m.record)),m.records)for(p=d=0,b=m.records.length;d<b;p=++d)fm.util.isPlainObject(m.records[p])&&(m.records[p]=new fm.websync.record(m.records[p]));return g.call(this,new fm.websync[h+"Args"](m))}return g.apply(this,arguments)}},u=0,c=(l=["connect","disconnect","subscribe","unsubscribe","bind","unbind","publish","notify","service"]).length;u<c;u++)a(l[u]);for(r in n=o.prototype.constructor,s=o.prototype,e=o,i=!1,fm.websync.client.enableMultiple=!1,fm.websync.client=function(){var h;if(i&&!o.enableMultiple)throw Error("To create multiple instances of the JavaScript client, set fm.websync.client.enableMultiple to true.");return i=!0,n.apply(this,arguments),h=this,fm.util.observe(window,"beforeunload",function(){var p;h._autoDisconnect&&((p=h._autoDisconnectConfig)?h.disconnect(p):h.disconnect())}),h},fm.websync.client.prototype=s,e)fm.websync.client[r]=e[r];(o=fm.websync.client).prototype.setDisableCORS=function(h){return this._disableCORS=h},o.prototype.getDisableCORS=function(){return this._disableCORS||!1},o.prototype.setDisablePostMessage=function(h){return this._disablePostMessage=h},o.prototype.getDisablePostMessage=function(){return this._disablePostMessage||!1},o.prototype.setForceJSONP=function(h){return this._forceJSONP=h},o.prototype.getForceJSONP=function(){return this._forceJSONP||!1},o.prototype.setAutoDisconnect=function(h){return this._autoDisconnect=!0,this._autoDisconnectConfig=h}}();
</script>

</body>
</html>
