<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>application-8d2f635f90bbaa8f8cbc02f7281c7e59.html</title>
</head>
<body>

<script>
function DropMenuManager(){this.initialize=function(){document.addEventListener("click",this.handleClick.bind(this)),this.iframe_shim=document.createElement("iframe"),this.iframe_shim.src="javascript:false;",jQuery(this.iframe_shim).css({display:"none",opacity:0,position:"absolute",zIndex:2})},this.handleClick=function(t){var e=jQuery(t.target).closest(".drop-menu")[0];this.deactivateMenus(),e&&(e.classList.add("active"),this.updateIframeShim(e),jQuery(t.target).closest(".drop-menu>span").length>0&&(t.preventDefault(),t.stopPropagation()))},this.deactivateMenus=function(){jQuery(".drop-menu.active").removeClass("active"),jQuery(this.iframe_shim).hide()},this.updateIframeShim=function(t){var e=t.querySelector(".sub-menu");if(e){t.insertAdjacentHTML("beforeend",this.iframe_shim.innerHTML),jQuery(this.iframe_shim).show();var n=jQuery(e).offset(),i=jQuery(e).width(),o=jQuery(e).height();jQuery(this.iframe_shim).css({position:"absolute",left:n.left,top:n.top,width:i,height:o})}},this.initialize()}function closeAllDropdowns(){}function openCard(t){address_importer_panel||(address_importer_panel=new Panel({panelId:"lightbox",displayOverlay:!0})),address_importer_panel.open().update(t)}function closeCard(t){address_importer_panel.close(),(undefined==t||t)&&window.location.reload()}function createCounter(t,e,n){null==n&&(n=!0);var i=document.getElementById(t);i&&(i.addEventListener("keyup",function(){charCounter(t,e,n)}),i.addEventListener("keydown",function(){charCounter(t,e,n)}),charCounter(t,e,n))}function charCounter(t,e,n){var i=document.getElementById(t),o=document.getElementById("counter-"+t);o||(i.insertAdjacentHTML("afterend",'<div class="charcount-counter" id="counter-'+t+'"></div>'),o=document.getElementById("counter-"+t));var s=e-i.value.length,r=document.getElementById("counter-submit-"+t);s<0?(n?(i.value=i.value.substring(0,e),o.classList.add("charcount-warning"),i.classList.add("charcount-warning"),s=0):(o.classList.add("charcount-over"),i.classList.add("charcount-over"),o.classList.remove("charcount-warning"),i.classList.remove("charcount-warning")),r&&r.classList.add("disabled")):s<10?(o.classList.add("charcount-warning"),i.classList.add("charcount-warning"),o.classList.remove("charcount-over"),i.classList.remove("charcount-over"),r&&r.classList.remove("disabled")):(o.classList.remove("charcount-warning"),o.classList.remove("charcount-over"),i.classList.remove("charcount-warning"),i.classList.remove("charcount-over"),r&&r.classList.remove("disabled")),o.innerHTML=s}function returnSelectedContact(t){return{first:document.getElementById("fn_"+t).value,last:document.getElementById("ln_"+t).value,email:document.getElementById("email_"+t).value}}function returnMultipleSelectedContacts(t){for(allNodes=document.getElementsByClassName(t),output=[],i=0;i<allNodes.length;i++)1==allNodes[i].checked&&output.push(allNodes[i].value);return output.join(", ")}function toggleIfEqual(t,e,n){document.getElementById(e).value==n&&jQuery(asElement(t)).toggle()}function resolvePartnerFields(t){t&&(ii_string="_"+t),jQuery("#divorce"+ii_string).hide(),jQuery("#married"+ii_string).hide(),toggleIfEqual("married"+ii_string,"partner"+ii_string,"spouse"),toggleIfEqual("married"+ii_string,"partner"+ii_string,"ex_spouse"),toggleIfEqual("divorce"+ii_string,"partner"+ii_string,"ex_spouse"),toggleIfEqual("married"+ii_string,"partner"+ii_string,"fiance"),document.getElementById("marriage_date"+ii_string).innerHTML=tr("Married on","for spouse relationship"),document.getElementById("marriage_location"+ii_string).innerHTML=tr("Married in","wedding location for spouse relationship"),document.getElementById("divorce_date"+ii_string).innerHTML=tr("Divorced on","divorce date"),document.getElementById("divorce_location"+ii_string).innerHTML=tr("Divorced in","divorce location"),document.getElementById("partner"+ii_string).value.match(/fiance{1,2}/)&&(document.getElementById("marriage_date"+ii_string).innerHTML=tr("Wedding date","for fianc\xe9e relationship"),document.getElementById("marriage_location"+ii_string).innerHTML=tr("Wedding location","for fianc\xe9e relationship"))}function loadRelationshipPath(t,e,n,i){if(t=document.getElementById(t)){var o=setTimeout(function(){t.classList.add("loading")},300);new Geni.Request("/profile/relationship_path/"+page_profile.id,{method:"POST",parameters:{through:e,relationship_path:n,slug:i},onComplete:function(){clearTimeout(o),t.classList.remove("loading")},onFailure:function(){t.classList.add("fail")},onSuccess:function(e){jQuery(t).replaceWith(e.responseText)}})}}function toggleRelationshipAnchor(t){new Geni.Request("/profile/toggle_anchor_rel/"+t,{method:"POST",success:function(t){jQuery("#relation_partial").replaceWith(t),Geni.Tipped.hideAll()}})}function showHideCaptions(t){var e=jQuery("#"+t).is(":checked");e?jQuery(".img-overlay").show():jQuery(".img-overlay").hide(),Geni.saveSettings({hide_photo_captions:!e})}function monitorCaptionsCheckbox(t){jQuery("#"+t).change(function(){showHideCaptions(t)}),GeniLoader.ready(function(){showHideCaptions(t)})}function changeState(t,e,n){e?(n=t+"_"+e,field_name=t+"["+e+"]"):n?field_name=t:(n=t,field_name=t),code=document.getElementById(n+"_country").value,new Ajax.Request("/options/dropdown_or_text?field=province&field_id="+n+"_state&field_name="+field_name+"[state]&scope="+code+"&value="+document.getElementById(n+"_state").value+"&include_blank=1&no_code=1&label_name=State/Province",{onSuccess:function(t){document.getElementById(n+"_state").id=n+"_state_old";new Insertion.Before(n+"_state_old",t.responseText);document.getElementById(n+"_state_old").parentNode.removeChild(document.getElementById(n+"_state_old"))}})}function hideConnectingPath(t){jQuery("#"+t+"_relationship #pathway").removeClass("adjusted"),jQuery("#"+t+"_relationship #connecting_path").css({display:"none"}),jQuery("#"+t+"_relationship #connecting_path_toggle").show(),jQuery("#"+t+"_relationship #toggled_path_actions").hide()}function showConnectingPath(t){jQuery("#"+t+"_relationship #pathway").addClass("adjusted"),jQuery("#"+t+"_relationship #connecting_path").css({display:"inline"}),jQuery("#"+t+"_relationship #connecting_path_toggle").hide(),jQuery("#"+t+"_relationship #toggled_path_actions").show()}function asElement(t){return"object"==typeof t?t:document.getElementById(t)}function $RF(t,e){if("radio"==document.getElementById(t).type)t=document.getElementById(t).form,e=document.getElementById(t).name;else if("form"!=document.getElementById(t).tagName.toLowerCase())return!1;var n=document.getElementById(t).querySelectorAll('input[type="radio"][name="'+e+'"]');return Array.from(n).find(function(t){return t.checked}).value}function togglePrivacyTray(t){jQuery("#"+t).toggle(),jQuery("#"+t+"_arrow_down, #"+t+"_arrow_right").toggle(),jQuery("#"+t+"_expand_link, #"+t+"_close_link").toggle()}function moveTooltip(t,e){moveTooltipBumpCenter(t,e,0)}function moveTooltipBumpCenter(t,e,n){var i,o,s,r,a,l=jQuery("#"+t);"object"==typeof e?(i=(a=jQuery(e)).outerWidth(),o=a.outerHeight(),s=a.offset().left,r=a.offset().top):(i=(a=jQuery("#"+e)).outerWidth(),o=a.outerHeight(),s=a.offset().left,r=a.offset().top);s+=i/2+(n||0),r-=o,dialogW=l.width(),dialogH=l.height(),offsetW=-parseInt(dialogW)/2-12,offsetH=-parseInt(dialogH)-20,s+=offsetW,r+=offsetH,l.css({left:s+"px",top:r+"px",visibility:"visible",display:"block",backgroundPosition:-250-n+"px bottom"})}function hideTooltip(t){jQuery("#"+t).css({visibility:"hidden"})}function jconfirm_alert(t,e){Geni.alert({title:e||!1,content:t,confirmButton:Geni.Strings.Ok})}function jconfirm_error(t,e){Geni.alert({title:e||Geni.Strings.Error,content:t,confirmButton:Geni.Strings.Ok})}function trim(t,e){return ltrim(rtrim(t,e),e)}function ltrim(t,e){return e=e||"\\s",t.replace(new RegExp("^["+e+"]+","g"),"")}function rtrim(t,e){return e=e||"\\s",t.replace(new RegExp("["+e+"]+$","g"),"")}function removeLocationHash(){if("replaceState"in history)history.replaceState("",document.title,window.location.pathname+window.location.search);else{var t=document.body.scrollTop,e=document.body.scrollLeft;window.location.hash="",document.body.scrollTop=t,document.body.scrollLeft=e}}function checkAllHolidays(t){var e=0;for(chk=document.getElementById("holiday_"+e);chk;)chk.checked=t,e++,chk=document.getElementById("holiday_"+e)}function resetStatusEditor(){var t=document.getElementById("status_input");!t&&document.getElementById("commnet")&&(t=document.getElementById("comment_input")),t&&(t.value=""),LabelMaker.init_labels(),bindInlineEventHandlers()}function insertStory(t=null){var e=document.getElementById("status_input"),n=document.getElementById("status_input_label"),i=document.getElementById("status_form");if(!e&&document.getElementById("comment")&&(e=document.getElementById("comment"),n=document.getElementById("comment_label"),i=document.getElementById("comment_form")),e.value.strip()!=n.value.strip()&&e.value.strip().length>0){t&&(e.value=e.value.truncate(t)),$S(i.id);var o=Geni.util.escapeHTML(e.value),s=document.getElementById("story_preview");s.querySelector(".status_preview_title").innerHTML=o;var r=s.querySelector("tr").cloneNode(!0),a=document.getElementById("display_holiday_reminder_excerpt");if(a)a.insertAdjacentHTML("afterend",r);else{var l=document.getElementById("newsfeed_table").querySelector("tr");l.parentNode.insertBefore(r,l)}jQuery("#newsfeed_table .display_profile_status_excerpt").fadeIn();var c=document.getElementById("latest_status");c&&(document.getElementById("latest_status_timestamp").innerHTML=tr("Today:"),c.innerHTML=o)}}function insertStoryAndResetEditor(t=null){var e=document.getElementById("counter-submit-status_input");if(e&&!e.classList.contains("disabled"))return insertStory(t),resetStatusEditor(),!1}function addLightBoxControls(){var t=document.getElementsByTagName("body")[0];t&&!t.classList.contains("lightboxesAdded")&&(t.classList.add("lightboxesAdded"),document.addEventListener("click",function(t){var e=jQuery(t.target).closest("a")[0];e&&e.classList.contains("lbOn")&&(active_panel=createPanel(e.getAttribute("data-panel-id"),e.getAttribute("data-panel-class"),e.getAttribute("href"),{width:e.getAttribute("data-panel-width")}),t.preventDefault(),t.stopPropagation())}),document.addEventListener("change",function(t){var e=jQuery(t.target).closest("select")[0];e&&e.classList.contains("lbOn")&&"addLanguage"==e.value&&(active_panel=createPanel(e.getAttribute("data-panel-id"),e.getAttribute("data-panel-class"),e.getAttribute("data-panel-url"),{width:e.getAttribute("data-panel-width")}))}))}function createPanel(t,e,n,i){return i||(i={}),new Panel({panelId:t||"lightbox",panelClass:e||"panel",url:n,displayOverlay:!0,width:i.width||null,onLoadComplete:function(){hookPleaseWaitButtons(),hookButtonConfirmations(),i.onLoadComplete&&i.onLoadComplete()}}).open()}function documentReady(){bindInlineEventHandlers(),addLightBoxControls(),hookPleaseWaitButtons(),hookButtonConfirmations(),hookTabrowClasses(),fixBrokenImages(),hookDragScroll()}function clearForm(t){var e,n,i,o;if(e=document.getElementById?document.getElementById(t):document.forms[t],document.getElementsByTagName){for(n=e.getElementsByTagName("input"),i=0;o=n.item(i++);)0==o.disabled&&("text"==o.getAttribute("type")||"password"==o.getAttribute("type")?o.value="":"checkbox"!=o.getAttribute("type")&&"radio"!=o.getAttribute("type")||(o.checked=!1));for(n=e.getElementsByTagName("select"),i=0;o=n.item(i++);)0==o.disabled&&(o.options.selectedIndex=0)}else for(n=e.elements,i=0;o=n[i++];)0==o.disabled&&("text"==o.type||"password"==o.type?o.value="":"checkbox"!=o.type&&"radio"!=o.type||(o.checked=!1))}function updateMatchCount(t,e,n){if(jQuery(".duplicates-found").length>0){if(jQuery(".match-count-upsell").length>0){var i=parseInt(jQuery("#match_count_upsell_value").val()),o=jQuery("span#safe-name").html();"remove"==n&&(i-=1);var s=tr("{count||Match} Found for {name}","",{count:i,name:"<span id='safe-name'>"+o+"</span>"});jQuery(".match-count-upsell").html(s),jQuery("#match_count_upsell_value").val(i)}var r=parseInt(jQuery("#duplicate_count").val());if("remove"==n&&(r-=1),jQuery("#duplicate_count").val(r),jQuery(".duplicate-phrase").show(),r>0){var a=tr("{count||Match} {count|is a, are} Possible {count|Duplicate} in Your Family Tree","",{count:r});jQuery(".duplicate-phrase").html(a)}else jQuery(".duplicates-found").hide()}origin_div=document.getElementById(t),destination_div=document.getElementById(e),origin_div&&destination_div&&(origin_count=parseInt(origin_div.innerHTML),destination_count=parseInt(destination_div.innerHTML),origin_div.innerHTML=origin_count-1,destination_div.innerHTML=destination_count+1)}function isValidEmail(t){return/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(String(t).toLowerCase())}function checkAll(t,e){(t=document.getElementById(t)).select("input[type=checkbox]").each(function(t){t.checked=e})}function disableAll(t,e){jQuery(t).prop("disabled",e)}function verticallyCenterImage(t){var e=jQuery(t),n=e.outerHeight(),i=e.outerWidth();e.css({position:"absolute",top:"50%",left:"50%",marginTop:-n/2,marginLeft:-i/2}),e.css({opacity:1});var o=e.position().top-n/2-18,s=e.position().left-i/2-13;e.prev("[data-genicon]").css({top:o,left:s}).show()}function errorLoadingImage(t,e,n){var i=jQuery(t);if(["RecordMatch","MyHeritage::Record","record-match"].includes(e))i.attr("src","/images/matches/missing_recordmatch_thumb.png");else if(["SmartMatch","MyHeritage::Profile","smart-match"].includes(e))i.attr("src","/images/matches/missing_smartmatch_thumb.png");else if(0==e.indexOf("Profile")){var o;[s,r,o]=e.split("."),r||(r="u"),o?i.attr("src","/images/photo_silhouette_"+r+"_"+o+".gif"):i.attr("src","/images/photo_silhouette_"+r+".gif")}else if(0==e.indexOf("Facebook")){var s,r;[s,r]=e.split("."),"male"!=r&&"female"!=r&&(r="unknown"),i.attr("src","/images/facebook/objects/profile"+r+".jpg")}else i.attr("src","/images/matches/missing_recordmatch_thumb.png");n&&t.addEventListener("load",function(){verticallyCenterImage(t)})}function fixBrokenImages(){GeniLoader.ready(function(){jQuery("img[data-onerror]").each(function(){if(!this.complete||"undefined"==typeof this.naturalWidth||0==this.naturalWidth){var t=jQuery(this).data("onerror"),e=!1,n=t.match(/(.*)\|([TF])$/);n&&(t=n[1],e="T"==n[2]),errorLoadingImage(this,t,e)}}),jQuery(".no-enter-submit").keypress(function(t){"Enter"==t.code&&t.preventDefault()})})}function hiddenDefaultInput(t){if(!Geni.isMobilePhone()){var e="#"+t,n=t+"_hidden_input",i="#"+n;0==jQuery(i).length?jQuery(e).before("<div style='width:0;height:0;overflow:hidden;display:inline-block;'><input type=text id="+n+"></div>"):jQuery(i).val(""),jQuery(i).on("keyup",function(){var t=jQuery(i).val();jQuery(i).remove(),jQuery(e).val(t),jQuery(e)[0].focus(),jQuery(e)[0].setSelectionRange(1,1)}),jQuery(e).addClass("input_focus"),jQuery(e).on("focusout",function(){jQuery(e).removeClass("input_focus")}),jQuery(i).on("focusout",function(){jQuery(e).removeClass("input_focus")}),jQuery(i)[0].focus()}}function submitFormWithFeedback(t,e){return!jQuery("#submit_button").hasClass("disabled")&&(jQuery("#submit_button").addClass("disabled"),e===undefined&&(e=!0),formHasBeenSubmitted||(formHasBeenSubmitted=!0,jQuery("#submit_button").html("<span>"+Geni.Strings.PleaseWait+"...</span>"),e&&jQuery("#cancel_button").length>0&&jQuery("#cancel_button").hide(),recordBrowserTime(t),$S(t)),!1)}function confirmAndSubmitFormWithFeedback(t,e,n){return confirm(t)&&submitFormWithFeedback(e,n),!1}function recordBrowserTime(t){jQuery("#"+t+" #local-time").val((new Date).toUTCString())}function showCodeOfConductAgreement(t){var e="/discussions/agreement_code_of_conduct_lb",n=jQuery(t).attr("id");jQuery(t).find(".conduct-check").addClass("disabled"),jQuery(t).find(".conduct-check").attr("disabled","disabled");new Panel({panelId:"codeOfConduct",panelClass:"thin_border_lightbox",url:e,overlayId:"overlay_coc",displayOverlay:!0,enableClickOut:!0,ajaxOptions:{parameters:{submit_form_id:n}},onClickOut:function(){closeCodeOfConductAgreement("cancel"),"undefined"!=typeof sent&&(sent=!1)}}).open()}function submitAfterAgreeingToConductTerms(t){jQuery(t).submit()}function closeCodeOfConductAgreement(t){var e=jQuery("#codeOfConduct"),n=jQuery("input#submitted_form[value='true']").closest("form");if(e){e.hide(),jQuery("#overlay_coc").hide();var i=jQuery(n).find(".conduct-check").data("button");"cancel"===t&&(jQuery(n).find(".conduct-check").removeAttr("disabled"),jQuery(n).find(".conduct-check").removeClass("disabled"),jQuery(n).find(".conduct-check").html("<span>"+tr(i)+"</span>"))}}function userHasAgreedToConduct(t){return jQuery(t).closest("form").find("input#conductAgreement").val()}function hookPleaseWaitButtons(){jQuery(".please-wait").removeClass("please-wait").click(function(t){var e=jQuery(t.target),n=e.outerWidth();e.css("min-width",n+"px").addClass("disabled").html("<span>"+Geni.Strings.PleaseWait+"...</span>")})}function hookButtonConfirmations(){jQuery("button[confirm]").click(function(t){var e=new t.originalEvent.constructor(t.originalEvent.type,t.originalEvent),n=jQuery(t.target).closest("[confirm]")[0],i=jQuery(n).attr("confirm");return"GeniConfirmed"==t.originalEvent.data||(Geni.confirm({content:i,buttons:{confirm:function(){e.data="GeniConfirmed",n.dispatchEvent(e)},cancel:function(){}}}),t.preventDefault(),!1)})}function hookTabrowClasses(t){jQuery("ul.tabrow li").click(function(e){e.preventDefault(),jQuery(this).closest(".tabrow").find("li").removeClass("selected"),jQuery(this).addClass("selected"),t&&t(e)})}function inviteProfile(t,e,n){jQuery("#profile_spinner_"+t).show(),jQuery("#submit_links_"+t)&&jQuery("#submit_links_"+t).hide(),jQuery("#profile_email_form_"+t)&&jQuery("#profile_email_form_"+t).hide(),void 0===n&&(n={}),jQuery("#profile_email_"+t)&&(n.email=jQuery("#profile_email_"+t).val()),new Geni.Request("/profile_actions/invite_tree/"+t,{method:"post",parameters:n,onSuccess:function(){jQuery("#profile_spinner_"+t).hide(),jQuery("#profile_email_success_"+t).show(),"separate_controls"==e&&(jQuery("#profile_email_"+t).hide(),jQuery("#entered_email_address_"+t).html(jQuery("#profile_email_"+t).val()),jQuery("#entered_email_address_"+t).show())},onFailure:function(){jQuery("#profile_spinner_"+t).hide(),jQuery("#profile_email_failure_"+t).show()}})}function tryInvitingProfileAgain(t){document.getElementById("profile_email_success_"+t).hide(),document.getElementById("profile_email_failure_"+t).hide(),document.getElementById("profile_email_form_"+t).show();var e=document.getElementById("profile_email_"+t);e&&e.focus()}function getNewRow(t,e){document.getElementById("add_new_row").classList.add("loading"),new Ajax.Request("/invite/ifs_row",{method:"get",parameters:{new_id:t,id:page_profile.id,locale:e},onSuccess:function(e){document.getElementById("add_new_row").classList.remove("loading"),t--;document.getElementById("immediate_family_table").insertAdjacentHTML("afterbegin",e.responseText)}})}function openIFSLightbox(t){var e=!((typeof editCard).match(/undefined/)&&(typeof freezeTree).match(/undefined/));e&&(editCard.close(),freezeTree()),addNodeForm=new Panel({panelId:"add_node",panelClass:"add_node_panel",url:"/profile/ifs_lb?add_onto_id="+t,displayOverlay:!0,beforeSetPosition:function(t){jQuery(t.element).css({zIndex:-9999})},onLoadComplete:function(){adjustAddNodeHeight({zIndex:addNodeForm.zIndex})},onClose:function(){e&&unfreezeTree()}}),addNodeForm.open()}function adjustAddNodeHeight(t){var e=jQuery("#lightbox_container").parent(),n=jQuery("#new_family_form"),i=n.outerHeight()-n.height(),o=180,s=(e.outerHeight(),e.height(),jQuery(".add_node_footer").outerHeight()),r=i;n[0]&&(r+=n[0].scrollHeight);var a=Math.min(r+s,jQuery(window).height()-o);e.height(a),n.height(a-i-s);var l=jQuery(window).scrollLeft()-e.width()/2,c=jQuery(window).scrollTop()-e.height()/2;t==undefined&&(t={}),e.css(jQuery.extend({},t,{top:"50%",left:"50%",marginLeft:l+"px",marginTop:c+"px",maxHeight:"none"})),jQuery(window).on("resize",function(){adjustAddNodeHeight(t)})}function adjustSosHeight(t){var e=jQuery(t.scrollable_sel),n=jQuery(t.onscreen_sel),i=t.min_scroll_height||100,o=e[0].scrollHeight;e.css({"overflow-y":"visible"}).height(o);var s=n.position().top+n[0].scrollHeight-jQuery(window).height();e.height();if(s>0){var r=Math.max(i,o-s);e.addClass("scrollframe").css({"overflow-y":"scroll"}).height(r)}else e.removeClass("scrollframe").css({"overflow-y":"visible"}).height(o)}function scrollableOnscreen(t){var e=t.resize_delay||100,n=null;GeniLoader.ready(function(){adjustSosHeight(t)}),jQuery(window).resize(function(){n&&(clearTimeout(n),n=null),n=setTimeout(function(){adjustSosHeight(t)},e)})}function createAutoCompleteCountry(t,e){jQuery(t).attr("placeholder",trl("Country","Default label for country dropdown")),jQuery(t).autocomplete({source:function(t,n){var i=this.element.attr("id")+"_spinner";0==jQuery("#"+i).length&&(jQuery("<div id = '"+i+"' class='country_loading'></div>").insertAfter(this.element),Spinners.create(jQuery("#"+i)[0],{radius:4,dashes:10,width:2,height:4}).play()),new Geni.Request("/autocomplete/country_options",{method:"get",parameters:{partial:t.term,exclude_countries:e.no_embargoed_countries},success:function(t){t=JSON.parse(t);jQuery("#"+i).remove(),n(jQuery.map(t,function(t){if(1==e.show_cc3){var n="";return null!=t.code3&&3==t.code3.length&&(n=" ("+t.code3+")"),{label:t.label+n,value:t.value}}return{label:t.label,value:t.value}}))}})},appendTo:jQuery(t).parent(),select:function(t,n){var i=jQuery(this).attr("id"),o=!1;return jQuery(this).hasClass("autocomplete_country_mobile")?(jQuery("#"+i+".autocomplete_country_mobile").val(removeCountryCC3FromLabel(n.item.label)),o=!0):jQuery("#"+i).val(removeCountryCC3FromLabel(n.item.label)),1==e.hide_cc2_in_form&&(!0===o?jQuery("#"+i+"_code.autocomplete_country_mobile").val(n.item.value):jQuery("#"+i+"_code").val(n.item.value)),!1},minLength:2,delay:0})}function removeCountryCC3FromLabel(t){return t.replace(/\s\(([A-Z]){3}\)/g,"")}function logJSObject(t,e){var n={msg:t,environment:JSON.stringify(e)};new Geni.Request("/error/log_js_exception",{data:n})}function blueskyShareUrl(t,e,n){var i="";n&&(i=n.map(function(t){return"+%23"+encodeURIComponent(t)}).join(""));var o=e?"+"+e:"";return"https://bsky.app/intent/compose?text="+encodeURIComponent(t)+i+o}function openDocs(t,e){e=e||{};switch(docLightbox=window.docLightbox&&!e.reset_docs?window.docLightbox:new DocLightbox,t){case"choose":e.action||(e.action="associate"),docLightbox.choose(e.class_and_id,e.action,e);break;case"edit":docLightbox.lbMode=!1,docLightbox.edit(e.doc_id,e.class_and_id);break;case"cite":docLightbox.selectAndCite(e.class_and_id,e);break;case"upload":docLightbox.upload(e);break;case"view":docLightbox.view(e.class_and_id,e.documents,e.selected_id);break;case"profiles":docLightbox.profiles(e.doc_id)}return docLightbox}function setDocumentPrivacy(t){new Geni.Request("/media/set_media_privacy",{method:"post",parameters:{media_id:t,"public":jQuery("#public_"+t)[0].checked}})}function selectDocument(t,e){e?(jQuery("#select_wrapper_"+t).toggleClass("selected"),setTimeout(function(){jQuery("#selected_"+t).prop("checked",jQuery("#select_wrapper_"+t).hasClass("selected"))},5)):(jQuery("#media_selector").find(".selected")&&jQuery("#media_selector").find(".selected").removeClass("selected"),jQuery("#select_wrapper_"+t).addClass("selected"),jQuery("#source_id").value=t),setTimeout(function(){Geni.J.TippedTip.makeTippedTip()},500)}function DocLightbox(){return window.addEventListener("resize",this.resize.bind(this)),this.lbs=[],this.parseConfig(),this}function isPageProfileMissing(t){var e=t,n=jQuery("#id").val();return e.includes("#")||(e="#"+t),!(jQuery(e).find("#profile_facts_container input[id*='"+n+"']:checked").length>0)&&!(jQuery(e).find("input[id*='"+n+"-']:checked").length>0)}function booleanHelper(t){return t?1:null}function updateSaveButton(t){t>0?(jQuery("#new_fact_count").show(),jQuery("#new_fact_count").text("("+t+")")):jQuery("#new_fact_count").hide()}function toggleUnionFieldEdit(t,e,n,i,o){t.checked?toggleEdit(t,{union_id:e,field_name:n}):clearEdit(t.siblings().first(),{profile_id:i,citation_id:o,field:n,union_id:e})}function toggleEdit(t,e){if(!jQuery(".quick_add_unmatched_profile_label").is(":visible")){var n,i,o;if((t=jQuery(t)).is("input")?(changesToSave++,o=t.siblings().first().html().trim()):t.is("label")&&e==undefined?(changesToSave++,o=t.html().trim()):(t.prev()[0].checked||changesToSave++,o=t.html().trim()),i=n=e.field_name.trim(),updateSaveButton(changesToSave),e.union_id===undefined?union_id=undefined:(union_id=e.union_id,n=e.field_name),["Name","Parent Relationship"].includes(n)?field_slug=(e.field_name+" "+e.profile_id).replace(/\W/g,"-"):field_slug=n.replace(/\W/g,"-"),jQuery(".field_name_label").css("color",""),jQuery(".source_citation_language").hide(),jQuery(".source_citation_value").hide(),jQuery(".source_citation_note").hide(),t.css("color","blue"),jQuery("#add_child_profile").hide(),jQuery("#add_partner_profile").hide(),jQuery("#additional_information").show(),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"up",fromWhere:"updateSaveButton"}),"Name"===n&&e.page_profile===e.profile_id?(jQuery("#union-"+union_id+" #fact-"+field_slug+"-"+union_id).prop("checked",!0),jQuery("#value-can-not-edit").show()):union_id===undefined?(jQuery("#fact-"+field_slug+"-"+e.profile_id).prop("checked",!0),jQuery("#value-"+field_slug+"-"+e.profile_id).show(),jQuery("#note-"+field_slug+"-"+e.profile_id).show()):(jQuery("#union-"+union_id+" #fact-"+field_slug+"-"+union_id).prop("checked",!0),jQuery("#value-"+field_slug+"-"+union_id).show(),jQuery("#note-"+field_slug+"-"+union_id).show()),"Name"==n){var s=o.match(/\(([^)]+)\)/g);s&&(o=s[0].replace(/[()]/g,"")),jQuery("#info_for_field").text(o)}else"Parent Relationship"===n?(o=t.parent().prev().text().trim(),jQuery("#info_for_field").text(o)):jQuery("#info_for_field").html(tr(i,"Field name for additional information"));jQuery("#multilingual-"+field_slug+"-"+e.profile_id).show()}}function toggleCitationSelection(t){if("label"===t.target.tagName.toLowerCase()){var e=t.target.previousElementSibling,n=JSON.parse(e.getAttribute("data-citation-toggle"));return toggleEdit(t.target,n),!1}n=JSON.parse(t.target.getAttribute("data-citation-toggle"));return t.target.checked?toggleEdit(t.target,n):clearEdit(t.target.siblings().first(),n),!1}function bindCitationToggles(){document.querySelectorAll("[data-citation-toggle]").forEach(function(t){t.getAttribute("data-citation-toggle-bound")||(t.setAttribute("data-citation-toggle-bound",1),t.addEventListener("click",toggleCitationSelection))})}function additionalInformationPanel(t,e,n,i){var o=t;return["Name","Parent Relationship"].includes(t)?(field_slug=(t+" "+n).replace(/\W/,"-"),o="Parent Relationship"===t?trl("Parent Relationship"):jQuery("#union-"+e+" #fact-Name-"+n).next().text().trim()):field_slug=t.replace(/\W/,"-"),"Name"===t&&n===i?jQuery("#value-can-not-edit").show():e===undefined||""===e?(jQuery("#multilingual-"+field_slug+"-"+n).show(),jQuery("#fact-"+field_slug+"-"+n).prop("checked",!0),jQuery("#value-"+field_slug+"-"+n).show(),jQuery("#note-"+field_slug+"-"+n).show()):(jQuery("#union-"+e+" #fact-"+field_slug).prop("checked",!0),jQuery("#value-"+field_slug+"-"+e).show(),jQuery("#note-"+field_slug+"-"+e).show()),jQuery("#info_for_field").html(o),jQuery("#additional_information").show(),!1}function addNewFamilyProfile(t,e){new Geni.Request("/sources/get_add_profile_form",{method:"get",parameters:{union_id:t,role:e.type},onSuccess:function(n){var i=jQuery(".matching-container").find(".unmatched_quick_add_fields"),o=n.responseText;i.show(),i.html(""),i.append(o),Geni.isMobilePhone()&&window.callAddNewFamilyProfileForCitations(),jQuery("#additional_information").hide(),jQuery("#save_button").hide(),jQuery("#quick_add_union").val(t),resetUnmatchedUnionId(),setUnmatchedUnionId(t),disableRelationshipCheckboxes(),disableNavBars(),displayAddNewFamily(e)}})}function displayAddNewFamily(t){"partner"==t.type?jQuery(".add_unmatched_partner_profile").fadeIn("slow"):"child"==t.type?jQuery(".add_unmatched_child_profile").fadeIn("slow"):"parent"==t.type?jQuery(".add_unmatched_parent_profile").fadeIn("slow"):"sibling"==t.type&&jQuery(".add_unmatched_sibling_profile").fadeIn("slow"),!0===t.living?(jQuery('input[name="qa_child_living_status"]')[0].checked=!0,jQuery('input[name="qa_'+t.type+'_living_status"]')[0].checked=!0):(t.living,jQuery('input[name="qa_'+t.type+'_living_status"]')[1].checked=!0)}function disableRelationshipCheckboxes(){jQuery(".union_container input").attr("disabled",!0),jQuery(".union_container").css({opacity:.15})}function enableRelationshipCheckboxes(){jQuery(".union_container input").attr("disabled",!1),jQuery(".union_container").css({opacity:1})}function disableNavBars(){jQuery("#source_tab_nav").css({opacity:.15}),jQuery(".source_group_tab").attr("disabled",!0),jQuery("#unmatched_sources_tab").css({opacity:.15})}function enableNavBars(){jQuery("#source_tab_nav").css({opacity:1}),jQuery(".source_group_tab").attr("disabled",!1),jQuery("#unmatched_sources_tab").css({opacity:1})}function disableUnmatchedCitationsContainer(){jQuery(".unmatched_facts_container").css({opacity:.15}),jQuery(".unmatched_facts_container a").css("pointer-events","none")}function enableUnmatchedCitationsContainer(){jQuery(".unmatched_facts_container").css({opacity:1}),jQuery(".unmatched_facts_container a").css("pointer-events","auto")}function clearEdit(t,e){t=jQuery(t),field_slug=t.text().replace(/\W/,"-"),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"down",fromWhere:"clearEdit"}),jQuery("#additional_information").hide(),""===e.citation_id||"false"===e.citation_id||"[]"===e.citation_id?(changesToSave--,updateSaveButton(changesToSave)):removeCitation(e.profile_id,e.citation_id,e.field_name,e.union_id),t.css("color",""),jQuery("#fact-"+field_slug).prop("checked",!1)}function ProjectTagger(t){this.initialize=function(t){t=t||{},this.taggableProjects=t.taggable_projects||[],this.tagger=jQuery(t.input_selector),this.onSelect=t.onSelect,this.focus_project_id=t.focus_project_id,this.noResultsText=jQuery("#no-search-results"),this.taggerPrompt=this.tagger.val(),this.taggableProjectsHash=this.projectNameToIDHash(this.taggableProjects),this.taggableProjectsPaths=this.projectNameToPathHash(this.taggableProjects),this.taggableProjectsList=this.projectNames(this.taggableProjectsHash),this.spinner=this.makeSpinner(),this.dropArrow=this.makeDropArrow(),this.isShown=!1,this.spinnerVisible=!1,this.fadeDuration=200,this.autoCompleter=this.makeAutoCompletable(),this.bindProjectTaggerEvents()},this.makeDropArrow=function(){this.tagger.outerHeight();style='height:" + taggerHeight + "px;';var t=jQuery("<span class='drop_arrow autocomplete_drop_arrow' >\u25bc</span>");this.tagger&&this.tagger.after(t);var e=this;return Geni.onVisible(t[0],function(){e.setDropArrowHeight()}),t},this.setDropArrowHeight=function(){if(this.tagger&&this.dropArrow){var t=this.tagger.outerHeight();this.dropArrow.height(t)}},this.makeSpinner=function(){var t=jQuery("<div style='display:inline-block; margin: -4px 5px 0px 5px;'><img src='/images/spinner.gif' class='project-loading' style='display:none;'> </div>");return this.tagger&&this.tagger.after(t),jQuery(".project-loading")},this.projectNames=function(t){var e=[];return jQuery.each(t,function(t){e.push(t)}),e},this.projectNameToIDHash=function(t){var e={};return jQuery.each(t,function(t,n){n.name&&n.id&&(e[n.name]=n.id)}),e},this.projectNameToPathHash=function(t){var e={};return jQuery.each(t,function(t,n){n.name&&n.path&&(e[n.name]=n.path)}),e},this.bindProjectTaggerEvents=function(){var t=this;this.tagger.focus(function(){t.tagger.val(""),t.tagger.catcomplete("close")}),this.tagger.blur(function(){t.tagger.val(t.taggerPrompt)}),this.dropArrow.click(function(){t.toggleDrop()})},this.makeAutoCompletable=function(){var t=this;this.tagger.catcomplete({classes:{"ui-autocomplete":"project-list"},minLength:2,select:function(e,n){t.callOnSelect(e,n)},open:function(){t.isShown=!0,jQuery(this).catcomplete("widget").css("z-index",9100)},close:function(){t.isShown=!1},source:function(e,n){1==e.term.cached?n(t.taggableProjects):(t.toggleSpinner(),new Geni.Request("/project/search_all_related",{method:"POST",parameters:{focus_project_id:t.focus_project_id,search_text:e.term,category:trl("Found Results","")},onSuccess:function(e){t.toggleSpinner(),
"[]"===e.responseText?t.noResultsText.show().fadeOut(2e3):n(JSON.parse(e.responseText))}}))}})},this.toggleDrop=function(){if(this.isShown)this.tagger.catcomplete("close");else{this.tagger.catcomplete("close"),this.tagger.catcomplete("search",{cached:!0})}},this.callOnSelect=function(t,e){var n=this;if(e.item.value)var i=e.item.id||this.taggableProjectsHash[e.item.value],o=e.item.value,s=e.item.path||this.taggableProjectsPaths[e.item.value];i&&"function"==typeof this.onSelect&&(this.onSelect(i,o,s),n.tagger.val("")),n.isShown=!1},this.rebuildAutoCompleter=function(t,e){null==e&&delete this.taggableProjectsHash[t],null!=e&&(this.taggableProjectsHash[t]=e),this.taggableProjectsList=this.projectNames(this.taggableProjectsHash),this.tagger.catcomplete("destroy"),this.makeAutoCompletable()},this.toggleSpinner=function(){this.spinnerVisible?(this.spinner.hide(),this.spinnerVisible=!1):(this.spinner.show(),this.spinnerVisible=!0)},jQuery.widget("custom.catcomplete",jQuery.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(t,e){var n=this,i="";jQuery.each(e,function(e,o){var s;o.category!=i&&(t.append("<li class='ui-autocomplete-category'>"+o.category+"</li>"),i=o.category),s=n._renderItemData(t,o),o.category&&s.attr("aria-label",o.category+" : "+o.label)})}}),this.initialize(t)}function RadioMenu(t,e){this.initialize=function(t,e){return this.element=document.getElementById(t),this.callback=e,this.element!=undefined&&this.element.addEventListener("click",this.handleClick.bind(this)),this},this.highlightLink=function(t){var e=jQuery(this.element).find("a[value="+t+"]")[0];if(e!=undefined){jQuery(this.element).find("a").removeClass("selected"),e.classList.add("selected");var n=e.closest(".drop-menu.active");n!=undefined&&n.classList.remove("active")}this.element.querySelector("input[type=hidden]").value=t},this.handleClick=function(t){var e=jQuery(t.target).closest("a"),n=e.attr("value");this.highlightLink(n),this.callback&&this.callback(e[0],n),t.stopPropagation()},this.initialize(t,e)}function RelationshipDeleter(t,e){this.initialize=function(t,e){this.allowSplit=t,this.ignoreSplit=e,this.deletedUnions=[],this.cycleUnions={}},this.setCycleUnion=function(t,e){this.cycleUnions[t]=e},this.checkConnection=function(t,e){e?this.deletedUnions.push(t):this.deletedUnions=this.deletedUnions.without(t),this.ignoreSplit?this.enableSubmitButton(!0):this.checkTreeSplit()},this.checkTreeSplit=function(){return this.treeSplit()?(document.getElementById("cycles_list_inner").classList.add("warning_msg"),document.getElementById("split_warning").style.display="block",this.enableSubmitButton(this.allowSplit),!0):(document.getElementById("cycles_list_inner").classList.remove("warning_msg"),document.getElementById("split_warning").style.display="none",this.enableSubmitButton(!0),!1)},this.enableSubmitButton=function(t){var e=document.getElementById("submitRemoveConnections");e&&(t&&this.deletedUnions.length>0?(e.classList.remove("disabled"),e.removeAttribute("disabled")):(e.classList.add("disabled"),e.setAttribute("disabled","disabled")))},this.treeSplit=function(){return deleter=this,this.deletedUnions.some(function(t){return deleter.cycleUnions[t]==undefined||deleter.cycleUnions[t].every(function(t){return deleter.deletedUnions.includes(t)})})},this.initialize(t,e)}function FamilyMapper(t){this.$map=jQuery("#map"),this.$spinner=jQuery("#add-location-spinner"),this.mapData=t,this.markerURLs={self:"/images/map/marker_self_solo.png",living:"/images/map/marker_living_solo.png",deceased:"/images/map/marker_deceased_solo.png",inlaw:"/images/map/marker_inlaw_solo.png",highlight:"/images/map/marker_highlight_solo.png"},this.markers={},this.lastLatLng=null,this.highlightMarker=null,this.initialize()}function FlashMatchRequester(){this.initialize=function(){this.$tree=jQuery("#TreeMap"),this.tree=this.$tree[0]},this.listenForMatchData=function(t){t=t||[],t=_.uniq(t);var e=this;G.Debug&&console.log("Listening for match data for ids: ",t),_.each(t,function(t){Geni.Hermes.subscribe("profile-"+t+":match-counts",!0,function(n){G.Debug&&console.log("[HERMES] Received data for profile-"+t,n),e.sendDataToFlash(t,n.data)},"flash-tree")})},this.sendDataToFlash=function(t,e){this.tree.matchDataForProfile(t,e)},this.initialize()}function NewHovercard(){this.spinner={radius:12,dashes:20,width:2,height:8,opacity:1,padding:3,rotation:600,color:"#777"},this.bindEvents()}function TemplateFetcher(){this.templatePath="/jst/",this.templates={}}function ProjectsLabelsTagger(t,e){this.$input=jQuery(t),this.options=e,this.makeAutocompleter()}function CommentActions(){this.fadeInterval=200}function scrollMiddle(t,e){var n=jQuery(t);jQuery("html, body").animate({scrollTop:n.offset().top-jQuery(window).height()/2},e)}function SiteCampaign(){this.initialize=function(){this.$banner=jQuery(".site-campaign.banner"),this.$dismiss=jQuery(".dismiss-right, .dismiss-left",this.$banner),this.bindEvents()},this.bindEvents=function(){var t=this;this.$dismiss.on("click",function(){t.dismissBanner()})},this.dismissBanner=function(){this.$banner.animate({height:0},300,function(){jQuery(this).hide()}),key=Geni.SiteCampaignSettings.cookie||"_sc",console.log(key),data={key:key},jQuery.post("/home/set_expiring_cookie",data,function(){})},this.initialize()}function OverflowCrawler(){this.bindEvents()}function DnaFAQ(){this.initialize=function(){this.$toggle=jQuery("ul.dna-faq-list li .toggle, ul.dna-faq-list li .subject"),this.bindEvents()},this.bindEvents=function(){this.$toggle.on("click",function(){var t=jQuery(this),e=t.parents("li"),n=t.hasClass("toggle")?t:e.find(".toggle");e.hasClass("expanded")?n.text("+"):n.text("-"),e.toggleClass("expanded")})},this.initialize()}function DnaCheckout(){this.initialize=function(){this.$flowIndicator=jQuery(".dna-checkout-flow-indicator"),this.$pageTitle=jQuery(".dna-checkout-title"),this.$error=jQuery(".dna-checkout-error"),this.$shippingContent=jQuery(".dna-two-third.checkout.shipping"),this.$ccPaymentContent=jQuery(".dna-two-third.checkout.payment-cc"),this.$paypalPaymentContent=jQuery(".dna-two-third.checkout.payment-paypal"),this.$paymentContentWrap=jQuery(".payment-content-wrap"),this.$confirmContent=jQuery(".dna-full.checkout.order-confirmation"),this.$shippingForm=this.$shippingContent.find("form"),this.$shippingStateSelect=this.$shippingForm.find(".pretty-state"),this.$shippingCountrySelect=this.$shippingForm.find(".pretty-country"),this.$ccForm=this.$ccPaymentContent.find("form"),this.$billingStateSelect=this.$ccForm.find(".pretty-state"),this.$billingCountrySelect=this.$ccForm.find(".pretty-country"),this.$useShipping=this.$ccForm.find(".use-shipping input"),this.$useShippingWrap=this.$ccForm.find(".use-shipping-wrap"),this.$orderModule=jQuery(".order-module.checkout").parent(),this.$nextToPayment=this.$shippingContent.find(".next"),this.$nextToConfirmation=this.$ccPaymentContent.find(".next"),this.$backToShipping=this.$ccPaymentContent.find(".back"),this.$cvv2Alt=this.$ccForm.find(".sec-code.alt"),this.$shippingConfirm=this.$confirmContent.find(".dna-confirmation-module.shipping"),this.$billingConfirm=this.$confirmContent.find(".dna-confirmation-module.billing"),this.$ccConfirm=this.$confirmContent.find(".dna-confirmation-payment"),this.$ccFieldsWrap=this.$ccPaymentContent.find(".cc-fields-wrap"),this.$ccSelector=this.$ccPaymentContent.find("#credit_card_selector"),this.$newCardHiddenField=this.$ccPaymentContent.find("[name='billing[new_card_payment]']"),this.$completeDNAOrder=this.$confirmContent.find(".complete-dna-order"),this.$editBillingAndPayment=this.$confirmContent.find(".edit.billing, .edit.payment"),this.$editShipping=this.$confirmContent.find(".edit.shipping"),this.$nextButtons=jQuery(".dna-two-third.checkout .next"),this.$ccToggle=this.$ccPaymentContent.find(".select-cc"),this.$ccFormWrap=this.$ccPaymentContent.find(".form-wrap"),this.$paypalToggle=this.$paypalPaymentContent.find(".select-paypal"),this.$paypalFormWrap=this.$paypalPaymentContent.find(".form-wrap"),this.$paymentToggles=this.$paymentContentWrap.find(".select-cc, .select-paypal"),this.$orderModule=jQuery(".order-module.checkout"),this.$orderModuleTotal=jQuery(".dna-total"),this.$shippingPrices=jQuery(".shipping-prices"),this.$taxAmount=jQuery(".tax-amount"),this.$shippingExplanation=jQuery(".dna-shipping-explanation"),this.debug="dna-debug"==url("?"),this.shippingID=null,this.ccID=null,this.ccInfo=null,this.orderID=null,this.shippingPrice=0,this.taxAmount=0,this.updateBillingAddressDefaults(this.$ccSelector.val()),this.bindShippingValidation(),this.bindCCValidation(),this.bindEvents()},this.bindEvents=function(){var t=this;this.$ccToggle.on("click",function(){t.showCC()}),this.$paypalToggle.on("click",function(){t.showPaypal()}),this.$nextButtons.on("click",function(){jQuery(this).parents("form").submit()}),this.$shippingForm.on("submit",function(t){t.preventDefault()}),this.$ccForm.on("submit",function(t){t.preventDefault()}),this.$completeDNAOrder.on("click",function(){t.postCompleteOrder()}),this.$editBillingAndPayment.on("click",function(e){e.preventDefault(),t.goToPayment()}),this.$editShipping.on("click",function(e){e.preventDefault(),t.goToShipping()}),this.$shippingStateSelect.on("change",function(){t.handleShippingStateSelection(jQuery(this))}),this.$shippingCountrySelect.on("change",function(){t.handleShippingCountrySelection(jQuery(this))}),this.$useShipping.on("click",function(e){t.handleUseShipping(e,jQuery(this))}),this.$billingStateSelect.on("change",function(){t.handleBillingStateSelection(jQuery(this))}),this.$billingCountrySelect.on("change",function(){t.handleBillingCountrySelection(jQuery(this))}),this.$ccSelector.on("change",function(e){t.handleCCSelection(e,jQuery(this))}),this.$backToShipping.on("click",function(e){t.goToShipping(e)})},this.bindShippingValidation=function(){var t=this;this.$shippingForm.validationEngine("attach",{binded:!0,promptPosition:"centerTop",onValidationComplete:function(e,n){(!0===n||t.debug)&&(t.postShippingInfo(e),t.debug&&jQuery(e).validationEngine("hideAll"))},custom_error_messages:{".validate[equals[shipping-region-confirmation]]":{equals:{message:tr("DNA testing not available in this State, Province or Region")}}}})},this.bindCCValidation=function(){var t=this;this.$ccForm.validationEngine("attach",{binded:!0,promptPosition:"centerTop",onValidationComplete:function(e,n){(!0===n||t.debug)&&(t.postCCInfo(e),t.debug&&jQuery(e).validationEngine("hideAll"))},custom_error_messages:{".validate[required,equals[billing-region-confirmation]]":{equals:{message:tr("DNA testing not available to residents of this State, Province or Region")}}}})},this.postShippingInfo=function(){var t=this.$shippingForm.serializeObject(),e=this;this.fadeContent(this.$shippingContent),jQuery.ajax({url:"/dna-tests/shipping_address",type:"POST",data:jQuery.extend({},t,{r_id:Geni.Dna.MetricID,dna_product:Geni.Dna.ProductName}),success:function(t){Geni.Dna.MetricID=t.metric_id,e.shippingID=t.shipping_id,e.phoneID=t.phone_id,e.shippingHTML=t.shipping_html,e.taxAmount=parseFloat(t.tax),e.goToPayment(),e.defadeContent(e.$shippingContent)},error:function(t){e.showError(t.responseText),e.defadeContent(e.$shippingContent)}})},this.postCCInfo=function(){var t=this,e=this.$ccForm.serializeObject();this.fadeContent(this.$ccPaymentContent),jQuery.ajax({url:"/dna-tests/credit_card",type:"POST",data:jQuery.extend({},e,{r_id:Geni.Dna.MetricID,dna_product:Geni.Dna.ProductName,shipping_id:t.shippingID}),success:function(e){Geni.Dna.MetricID=e.metric_id,t.ccInfo=e.cc_info,t.ccID=e.cc_id,t.billingHTML=e.billing_html,t.taxAmount=parseFloat(e.tax),t.goToConfirmation(),t.defadeContent(t.$ccPaymentContent)},error:function(e){t.showError(e.responseText),t.defadeContent(t.$ccPaymentContent)}})},this.postCompleteOrder=function(){var t=this;this.fadeContent(this.$confirmContent),jQuery.ajax({url:"/dna-tests/complete_checkout",type:"POST",data:{shipping_id:this.shippingID,cc_id:this.ccID,phone_id:this.phoneID,dna_product:Geni.Dna.ProductName,r_id:Geni.Dna.MetricID},success:function(e){t.orderID=e.order_id,t.test=e.phone_data,G.Dna.PhoneConfirm?t.gotoPhoneConfirm():t.gotoReceipt()},error:function(e){t.showError(e.responseText),t.defadeContent(t.$confirmContent)}})},this.updateTax=function(){var t;"none"!=this.$shippingContent.css("display")||"none"!=this.$paymentContentWrap.css("display")?(this.$taxAmount.first().find(".flt_l").css("width",this.$shippingPrices.first().find(".flt_l")),this.$shippingPrices.first().find(".flt_r").each(function(e,n){"none"!=jQuery(n).css("display")&&(t=jQuery(n).width())}),this.$taxAmount.first().find(".flt_r").width(t),this.$taxAmount.first().find(".flt_r").html("US $"+this.taxAmount)):(this.$taxAmount.last().find("flt_l").css("width",this.$shippingPrices.last().find(".flt_l")),this.$taxAmount.last().find(".flt_r").html("US $"+this.taxAmount)),this.updateTotal()},this.goToPayment=function(){this.hideError(),this.$shippingContent.hide(),this.$shippingExplanation.hide(),this.$confirmContent.hide(),this.$paymentContentWrap.show(),this.updateTax(),this.handleShippingCountrySelection(this.$shippingCountrySelect),this.handleBillingCountrySelection(this.$billingCountrySelect),this.$orderModule.show(),this.alterTitle("payment"),this.gotoFlowIndicator("payment")},this.goToConfirmation=function(){this.hideError(),this.$paymentContentWrap.hide(),this.$confirmContent.show(),this.updateTax(),this.handleShippingCountrySelection(this.$shippingCountrySelect),this.handleBillingCountrySelection(this.$billingCountrySelect),this.alterTitle("confirmation"),this.$orderModule.hide(),this.gotoFlowIndicator("confirmation"),this.fillConfirmationFields()},this.goToShipping=function(){this.hideError(),this.$shippingContent.show(),this.updateTax(),this.$shippingExplanation.show(),this.$paymentContentWrap.hide(),this.$confirmContent.hide(),this.alterTitle("shipping"),this.$orderModule.show(),this.gotoFlowIndicator("shipping")},this.gotoReceipt=function(t){this.hideError(),t&&t.preventDefault(),window.location="/dna-tests/receipt?order_id="+this.orderID},this.gotoPhoneConfirm=function(){var t=encodeURIComponent("/dna-tests/receipt?order_id="+this.orderID);window.location="/telephone/confirm?hide_bc=1&for=dna&return_to="+t},this.showCC=function(){this.$paypalToggle.attr("checked",!1),this.$paypalFormWrap.hide(),this.$ccFormWrap.fadeToggle(200),this.handlePaymentSelection()},this.showPaypal=function(){this.$ccToggle.attr("checked",!1),this.$ccFormWrap.hide(),this.$paypalFormWrap.fadeToggle(200),this.handlePaymentSelection()},this.handlePaymentSelection=function(){var t=this.$paymentToggles.filter(":checked");0===t.length?(this.$paypalPaymentContent.removeClass("faded"),this.$ccPaymentContent.removeClass("faded")):t.hasClass("select-cc")?(this.$paypalPaymentContent.addClass("faded"),this.$ccPaymentContent.removeClass("faded")):(this.$ccPaymentContent.addClass("faded"),this.$paypalPaymentContent.removeClass("faded"))},this.handleCCSelection=function(t,e){""==e.val()?(this.$newCardHiddenField.attr("value","1"),this.updateBillingAddressDefaults(e.val()),this.$ccFieldsWrap.show(),this.$cvv2Alt.hide()):(this.updateBillingAddressDefaults(e.val()),this.handleBillingCountrySelection(this.$billingCountrySelect),this.$cvv2Alt.show(),this.$newCardHiddenField.attr("value","0"),this.$ccFieldsWrap.hide())},this.updateBillingAddressDefaults=function(t){jQuery('[name*="billing["]').each(function(e,n){$el=jQuery(n),$el.data("billing-default")&&$el.val($el.data("billing-default")[t])})},this.gotoFlowIndicator=function(t){this.$flowIndicator.find("span").removeClass("current"),this.$flowIndicator.find("."+t).addClass("current")},this.handleShippingStateSelection=function(t){var e=Geni.Dna.RestrictedRegions[this.$shippingCountrySelect.val()];e&&e.find(function(e){return e.toLowerCase()==t.val().toLowerCase()})?this.$shippingForm.find(".region-confirmation").val(""):this.$shippingForm.find(".region-confirmation").val(t.val())},this.handleShippingCountrySelection=function(t){this.$shippingPrices.show();"United States"==t.val()?(this.$shippingPrices.find(".domestic[data-price]").show(),this.$shippingPrices.find(".international[data-price]").hide(),this.shippingPrice=this.$shippingPrices.find(".domestic[data-price]").data("price")):(this.$shippingPrices.find(".domestic[data-price]").hide(),this.$shippingPrices.find(".international[data-price]").show(),this.shippingPrice=this.$shippingPrices.find(".international[data-price]").data("price")),this.handleShippingStateSelection(this.$shippingStateSelect),this.updateTotal()},this.updateTotal=function(){var t=Geni.Dna.ProductPrice+this.shippingPrice+this.taxAmount;this.$orderModuleTotal.text("US $"+t.toFixed(2))},this.handleUseShipping=function(t,e){var n=this.$shippingForm.serializeObject();e.is(":checked")?(this.$ccForm.find("[name='billing[street_address1]']").val(n["shipping[street_address1]"]),this.$ccForm.find("[name='billing[street_address2]']").val(n["shipping[street_address2]"]),this.$ccForm.find("[name='billing[city]']").val(n["shipping[city]"]),this.$ccForm.find("[name='billing[state]']").val(n["shipping[state]"]),this.$ccForm.find("[name='billing[postal_code]']").val(n["shipping[postal_code]"]),this.$ccForm.find("[name='billing[country]']").val(n["shipping[country]"]),this.$ccForm.find(".region-confirmation").val(this.$billingStateSelect.val())):this.updateBillingAddressDefaults(this.$ccSelector.val())},this.handleBillingStateSelection=function(t){var e=Geni.Dna.RestrictedRegions[this.$billingCountrySelect.val()];e&&e.find(function(e){return e.toLowerCase()==t.val().toLowerCase()})?this.$ccForm.find(".region-confirmation").val(""):this.$ccForm.find(".region-confirmation").val(t.val())},this.handleBillingCountrySelection=function(){this.handleBillingStateSelection(this.$billingStateSelect),this.updateTotal()},this.fillConfirmationFields=function(){this.$shippingConfirm.find(".address-content").html(this.shippingHTML),this.$billingConfirm.find(".address-content").html(this.billingHTML),this.$ccConfirm.html(this.ccInfo)},this.alterTitle=function(t){this.$pageTitle.find("strong").hide().filter("."+t).show()},this.fadeContent=function(t){t.css({position:"relative"});var e=jQuery("<div class='overlay'></div>").css({background:"white",opacity:.9,position:"absolute",top:0,right:0,left:0,bottom:0}),n=jQuery("<div class='spinner'></div>").css({position:"absolute",top:"50%",left:"50%",marginLeft:-40,marginTop:-60});t.append(e),t.append(n),Spinners.create(n,{radius:12,dashes:15,width:2.5,height:15,opacity:1,padding:3,rotation:500,color:"#333"}).play()},this.defadeContent=function(t){t.find(".overlay, .spinner").remove()},this.showError=function(t){this.$error.fadeIn().text(t)},this.hideError=function(){this.$error.hide()},this.initialize()}var address_importer_panel;window.dragScroll={isDown:!1,startX:0,startY:0,scrollLeft:0},window.hookDragScroll=function(t){t?t.parentNode&&(t=t.parentNode):t=document,GeniLoader.ready(function(){t.querySelectorAll("[data-drag-scroll]").forEach(function(t){var e=_markDataAttributeBound(t,"drag-scroll");t.addEventListener("mousedown",n=>{window.dragScroll.isDown=!0,t.style.cursor="grabbing","x"!=e&&"xy"!=e||(window.dragScroll.startX=n.pageX-t.offsetLeft,window.dragScroll.scrollLeft=t.scrollLeft),"y"!=e&&"xy"!=e||(window.dragScroll.startY=n.pageY-t.offsetTop,window.dragScroll.scrollTop=t.scrollTop)}),t.addEventListener("mouseleave",()=>{window.dragScroll.isDown=!1,t.style.cursor="grab"}),t.addEventListener("mouseup",()=>{window.dragScroll.isDown=!1,t.style.cursor="grab"}),t.addEventListener("mousemove",n=>{if(window.dragScroll.isDown){if(n.preventDefault(),"x"==e||"xy"==e){const e=2*(n.pageX-t.offsetLeft-window.dragScroll.startX);t.scrollLeft=window.dragScroll.scrollLeft-e}if("y"==e||"xy"==e){const e=2*(n.pageY-t.offsetTop-window.dragScroll.startY);t.scrollTop=window.dragScroll.scrollTop-e}}})})})},document.addEventListener("DOMContentLoaded",function(){hookDragScroll(document),window.CSPDomObserver=new MutationObserver(function(t){t.reduce(function(t,e){return e.addedNodes.length>0&&e.addedNodes.forEach(function(e){1==e.nodeType&&t.add(e)}),t},new Set).forEach(function(t){hookDragScroll(t)})}),window.CSPDomObserver.observe(document.documentElement||document.body,{childList:!0,subtree:!0})}),$S=function(t){f=document.getElementById(t),f.getAttribute("data-deny-submit")||f.requestSubmit()},HTMLFormElement.prototype.requestSubmit||(HTMLFormElement.prototype.requestSubmit=function(t){if(t){var e=new Event("submit",{bubbles:!0,cancelable:!0});if(t.dispatchEvent(e),e.defaultPrevented)return}this.submit()});var active_panel=null;GeniLoader.ready(documentReady);var activePanelConfirmPending=!1;document.addEventListener("keyup",function(t){if("Escape"==t.code&&active_panel&&jQuery(active_panel.element).is(":visible"))if(jQuery(active_panel.element).find("[data-panel-confirm-close=0]").length>0)activePanelConfirmPending=!1,active_panel.close();else if(jQuery(active_panel.element).find("input[type=submit]").length>0||jQuery(active_panel.element).find("button[type=submit]").length>0||jQuery(active_panel.element).find("[data-panel-confirm-close=1]").length>0){if(!activePanelConfirmPending){var e=jQuery("[data-panel-confirm-close-title]").data("panel-confirm-close-title")||tr("Confirm close window"),n=jQuery("[data-panel-confirm-close-content]").data("panel-confirm-close-content")||tr("Changes to this window will be lost.  Are you sure you wish to close this window?"),i=jQuery("[data-panel-confirm-close-confirm-button]").data("panel-confirm-close-confirm-button")||tr("Yes, close this window"),o=jQuery("[data-panel-confirm-close-cancel-button]").data("panel-confirm-close-cancel-button")||tr("cancel");activePanelConfirmPending=!0,Geni.confirm({title:e,content:n,confirmButton:i,cancelButton:o,keyboardEnabled:!0,confirm:function(){activePanelConfirmPending=!1,active_panel.close()},cancel:function(){activePanelConfirmPending=!1}})}}else activePanelConfirmPending=!1,active_panel.close()});var formHasBeenSubmitted=!1;imported_addrs=null,ImportedAddressTagger={initialize:function(t,e,n){this.element=document.getElementById(t),imported_addrs&&imported_addrs.any()&&new Autocomplete(this.element,imported_addrs,{inputTemplate:function(t){return n?[t.first_name,t.last_name].join(" "):t.email},listTemplate:"<strong>#{first_name} #{last_name}</strong><br><em>#{email}</em>",onSelect:function(t){var n=document.getElementById(e+"_display_name"),i=document.getElementById(e+"_email");n&&(n.value=[t.first_name,t.last_name].join(" "),n.focus(),n.blur()),i&&(i.value=t.email,i.focus(),i.blur())}})}},CreditCardDetails={initialize:function(t){this.profile_id=t,this.initEditables()},initEditables:function(){document.getElementById("cc_body").addEventListener("click",function(t){var e=jQuery(t.target).closest("a")[0];if(e)switch(e.getAttribute("rel")){case"edit_toggle":this.toggleEditEditable(t);break;case"edit_submit":this.editCreditCard(t);break;case"add_toggle":this.toggleAddEditable(t);break;case"add_submit":this.addCreditCard(t)}}.bind(this))},toggleAddEditable:function(){return jQuery("#add_fields").toggle(),jQuery("#add_link").toggle(),!1},toggleEditEditable:function(t){var e=jQuery(t.target).closest(".credit_card_container");return jQuery("#edit_fields").toggle(),e.find(".credit_card_body").toggle(),!1},addCreditCard:function(){return!jQuery("#add_submit").hasClass("disabled")&&(jQuery("#add_fields").addClass("loading"),jQuery("#add_submit").addClass("loading"),$S("form_add_credit_card"),!1)},editCreditCard:function(t){var e=jQuery(t.target).closest("form");return e.find(".edit_fields").addClass("loading"),e.submit(),!1}},window.is_focused=!0,window.onblur=function(){window.is_focused=!1},window.onfocus=function(){window.is_focused=!0},NoticePoller=function(t){this.initialize(t)},NoticePoller.prototype={initialize:function(t){this.poller=null,this.poll_url="/notification/alert",this.read_msg_url="/notification/alert_read",this.notice_container=document.getElementById("active_notice"),this.notice_body=this.notice_container.querySelector(".message"),this.close_btn=this.notice_container.querySelector(".close"),this.notice_id=t,this.poll_interval=6e4,this.close_btn.addEventListener("click",this.hideNotice.bind(this)),document.addEventListener("scroll",this.markNoticeReadIfVisible.bind(this)),window.addEventListener("focus",this.start.bind(this,!0)),window.addEventListener("blur",this.stop.bind(this)),this.start()},start:function(){jQuery(this.notice_container).is(":visible")||(this.poller&&this.stop(),this.poller=setInterval(this.poll.bind(this),this.poll_interval),this.poll())},stop:function(){this.poller&&clearInterval(this.poller),this.poller=null},poll:function(){this.loading||(this.loading=!0,new Geni.Request(this.poll_url,{parameters:{source_url:window.location.href},onSuccess:function(t){if(this.loading=!1,t.responseText&&!t.responseText.blank()){var e=JSON.parse(t.responseText);e.counts&&Geni.headerController&&Geni.headerController.updateNotificationBadge(e.counts),this.notice_id=e.id,e.url||e.text&&e.text.length>0&&this.showTextNotice(e.text)}}.bind(this)}))},showTextNotice:function(t){window.is_focused&&(jQuery(this.notice_container).is(":visible")||(jQuery(this.notice_container).find("div").show(),jQuery(this.notice_container).slideDown()),this.notice_body.innerHTML=t,this.stop(),this.markNoticeReadIfVisible())},showLightboxNotice:function(t){new Panel({panelId:"lightbox",url:t,displayOverlay:!0,onClose:function(){this.start()}.bind(this)}).open(),this.stop(),this.markNoticeRead()},markNoticeReadIfVisible:function(){jQuery(window).scrollTop()<25&&this.markNoticeRead()},hideNotice:function(){jQuery(this.notice_container).slideUp({duration:.3,done:function(){this.notice_body.innerHTML="",this.start()}.bind(this)})},markNoticeRead:function(){this.notice_id&&(new Geni.Request(this.read_msg_url,{parameters:{id:this.notice_id}}),this.notice_id=null)},setPollInterval:function(t){this.poll_interval=t,this.start()}},GeniLoader.ready(function(){window.dropMenuManager=new DropMenuManager,jQuery(document).on("keyup","input[data_validate=number]",function(t){var e=t.target.value;if(0!=e.length){var n=e.charAt(0);return e=e.replace(/[^0-9]/g,""),e="-"==n?n+e.substring(0,4):e.substring(0,4),t.target.value=e,!0}})});var PhotoGrid=function(t){var e=document.getElementById(t||document.body);e&&jQuery(e).on("click",".delete_media",this.delete_media.bind(this))};PhotoGrid.prototype.delete_media=function(t){var e=jQuery(t.target).closest("li"),n=e.data("photo_id");new Geni.Request("/photo/remove_multi_tags",{parameters:{profile_id:page_profile.id,"photos[]":[n]},onSuccess:function(){e.fadeOut(400,e.remove)}}),t.preventDefault(),t.stopPropagation()};var Orderable=function(t,e){this.element=jQuery("#"+t),this.options=this.setOptions(e);var n=this;this.element.sortable({change:function(){n.updateNumFields(),n.findDuplicates()}}),this.element.find(".num_field").change(function(){n.findDuplicates()}),this.findDuplicates()};Orderable.prototype={updateNumFields:function(){var t=[];this.element.find("li .num_field").each(function(e,n){var i=n.getBoundingClientRect();t.push([i.top*i.left,n])}),t.sort(function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0}),t.forEach(function(t,e){t[1].value=e+1})},findDuplicates:function(){var t=[],e=!1;if(this.element.find(".num_field").each(function(n,i){t[i.value]?(jQuery(i).addClass("orderable-error-field"),jQuery(t[i.value]).addClass("orderable-error-field"),e=!0):(t[i.value]=i,jQuery(i).removeClass("orderable-error-field"))}),this.options.error_element){var n=jQuery("#"+this.options.error_element);e?n.html(this.options.duplicate_error).show():n.hide()}},setOptions:function(t){return Object.assign({scroll:null,error_element:null,duplicate_error:"Duplicates are not allowed."},t||{})}},"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),jQuery.browser={},jQuery.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit    /.test(navigator.userAgent.toLowerCase()),jQuery.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),jQuery.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),jQuery.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),
/**
 * jsBezier-0.7
 *
 * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)
 *
 * licensed under the MIT license.
 *
 * a set of Bezier curve functions that deal with Beziers, used by jsPlumb, and perhaps useful for other people.  These functions work with Bezier
 * curves of arbitrary degree.
 *
 * - functions are all in the 'jsBezier' namespace.
 *
 * - all input points should be in the format {x:.., y:..}. all output points are in this format too.
 *
 * - all input curves should be in the format [ {x:.., y:..}, {x:.., y:..}, {x:.., y:..}, {x:.., y:..} ]
 *
 * - 'location' as used as an input here refers to a decimal in the range 0-1 inclusive, which indicates a point some proportion along the length
 * of the curve.  location as output has the same format and meaning.
 *
 *
 * Function List:
 * --------------
 *
 * distanceFromCurve(point, curve)
 *
 * 	Calculates the distance that the given point lies from the given Bezier.  Note that it is computed relative to the center of the Bezier,
 * so if you have stroked the curve with a wide pen you may wish to take that into account!  The distance returned is relative to the values
 * of the curve and the point - it will most likely be pixels.
 *
 * gradientAtPoint(curve, location)
 *
 * 	Calculates the gradient to the curve at the given location, as a decimal between 0 and 1 inclusive.
 *
 * gradientAtPointAlongCurveFrom (curve, location)
 *
 *	Calculates the gradient at the point on the given curve that is 'distance' units from location.
 *
 * nearestPointOnCurve(point, curve)
 *
 *	Calculates the nearest point to the given point on the given curve.  The return value of this is a JS object literal, containing both the
 *point's coordinates and also the 'location' of the point (see above), for example:  { point:{x:551,y:150}, location:0.263365 }.
 *
 * pointOnCurve(curve, location)
 *
 * 	Calculates the coordinates of the point on the given Bezier curve at the given location.
 *
 * pointAlongCurveFrom(curve, location, distance)
 *
 * 	Calculates the coordinates of the point on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate
 * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.
 *
 * locationAlongCurveFrom(curve, location, distance)
 *
 * 	Calculates the location on the given curve that is 'distance' units from location.  'distance' should be in the same coordinate
 * space as that used to construct the Bezier curve.  For an HTML Canvas usage, for example, distance would be a measure of pixels.
 *
 * perpendicularToCurveAt(curve, location, length, distance)
 *
 * 	Calculates the perpendicular to the given curve at the given location.  length is the length of the line you wish for (it will be centered
 * on the point at 'location'). distance is optional, and allows you to specify a point along the path from the given location as the center of
 * the perpendicular returned.  The return value of this is an array of two points: [ {x:...,y:...}, {x:...,y:...} ].
 *
 *
 */
function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var t={subtract:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},dotProduct:function(t,e){return t.x*e.x+t.y*e.y},square:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},scale:function(t,e){return{x:t.x*e,y:t.y*e}}},e=64,n=Math.pow(2,-e-1),i=function(e,n){for(var i=[],o=s(e,n),a=n.length-1,l=r(o,2*a-1,i,0),c=t.subtract(e,n[0]),d=t.square(c),h=0,p=0;p<l;p++){c=t.subtract(e,u(n,a,i[p],null,null));var f=t.square(c);f<d&&(d=f,h=i[p])}return c=t.subtract(e,n[a]),(f=t.square(c))<d&&(d=f,h=1),{location:h,distance:d}},o=function(t,e){var n=i(t,e);return{point:u(e,e.length-1,n.location,null,null),location:n.location}},s=function(e,n){for(var i=n.length-1,o=2*i-1,s=[],r=[],a=[],l=[],c=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],u=0;u<=i;u++)s[u]=t.subtract(n[u],e);for(u=0;u<=i-1;u++)r[u]=t.subtract(n[u+1],n[u]),r[u]=t.scale(r[u],3);for(var d=0;d<=i-1;d++)for(var h=0;h<=i;h++)a[d]||(a[d]=[]),a[d][h]=t.dotProduct(r[d],s[h]);for(u=0;u<=o;u++)l[u]||(l[u]=[]),l[u].y=0,l[u].x=parseFloat(u)/o;for(var p=i,f=i-1,m=0;m<=p+f;m++){var g=Math.max(0,m-f),v=Math.min(m,p);for(u=g;u<=v;u++)j=m-u,l[u+j].y+=a[j][u]*c[j][u]}return l},r=function(t,n,i,o){var s,d,h=[],p=[],f=[],m=[];switch(a(t,n)){case 0:return 0;case 1:if(o>=e)return i[0]=(t[0].x+t[n].x)/2,1;if(l(t,n))return i[0]=c(t,n),1}u(t,n,.5,h,p),s=r(h,n,f,o+1),d=r(p,n,m,o+1);for(var g=0;g<s;g++)i[g]=f[g];for(g=0;g<d;g++)i[g+s]=m[g];return s+d},a=function(t,e){var n,i,o=0;n=i=Math.sgn(t[0].y);for(var s=1;s<=e;s++)(n=Math.sgn(t[s].y))!=i&&o++,i=n;return o},l=function(t,e){var i,o,s,r,a,l,c,u,d,h,p;r=t[0].y-t[e].y,a=t[e].x-t[0].x,l=t[0].x*t[e].y-t[e].x*t[0].y;for(var f=max_distance_below=0,m=1;m<e;m++){var g=r*t[m].x+a*t[m].y+l;g>f?f=g:g<max_distance_below&&(max_distance_below=g)}return i=((u=1)*(l-f)-(p=a)*(d=0))*(1/((c=0)*p-(h=r)*u)),h=r,p=a,o=(u*(l-max_distance_below)-p*d)*(1/(c*p-h*u)),s=Math.min(i,o),Math.max(i,o)-s<n?1:0},c=function(t,e){var n=1,i=0,o=t[e].x-t[0].x,s=t[e].y-t[0].y,r=t[0].x-0;return 0+n*((o*(t[0].y-0)-s*r)*(1/(o*i-s*n)))},u=function(t,e,n,i,o){for(var s=[[]],r=0;r<=e;r++)s[0][r]=t[r];for(var a=1;a<=e;a++)for(r=0;r<=e-a;r++)s[a]||(s[a]=[]),s[a][r]||(s[a][r]={}),s[a][r].x=(1-n)*s[a-1][r].x+n*s[a-1][r+1].x,s[a][r].y=(1-n)*s[a-1][r].y+n*s[a-1][r+1].y;if(null!=i)for(r=0;r<=e;r++)i[r]=s[r][0];if(null!=o)for(r=0;r<=e;r++)o[r]=s[e-r][r];return s[e][0]},d={},h=function(t){var e=d[t];if(!e){var n=function(){return function(e){return Math.pow(e,t)}},i=function(){return function(e){return Math.pow(1-e,t)}},o=function(t){return function(){return t}},s=function(){return function(t){return t}},r=function(){return function(t){return 1-t}},a=function(t){return function(e){for(var n=1,i=0;i<t.length;i++)n*=t[i](e);return n}};(e=[]).push(new n);for(var l=1;l<t;l++){for(var c=[new o(t)],u=0;u<t-l;u++)c.push(new s);for(u=0;u<l;u++)c.push(new r);e.push(new a(c))}e.push(new i),d[t]=e}return e},p=function(t,e){for(var n=h(t.length-1),i=0,o=0,s=0;s<t.length;s++)i+=t[s].x*n[s](e),o+=t[s].y*n[s](e);return{x:i,y:o}},f=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},m=function(t){return t[0].x==t[1].x&&t[0].y==t[1].y},g=function(t,e,n){if(m(t))return{point:t[0],location:e};for(var i=p(t,e),o=0,s=e,r=n>0?1:-1,a=null;o<Math.abs(n);)a=p(t,s+=.005*r),o+=f(a,i),i=a;return{point:a,location:s}},v=function(t){if(m(t))return 0;for(var e=p(t,0),n=0,i=0,o=1,s=null;i<1;)s=p(t,i+=.005*o),n+=f(s,e),e=s;return n},y=function(t,e,n){return g(t,e,n).point},b=function(t,e,n){return g(t,e,n).location},_=function(t,e){var n=p(t,e),i=p(t.slice(0,t.length-1),e),o=i.y-n.y,s=i.x-n.x;return 0==o?Infinity:Math.atan(o/s)},w=function(t,e,n){var i=g(t,e,n);return i.location>1&&(i.location=1),i.location<0&&(i.location=0),_(t,i.location)},C=function(t,e,n,i){var o=g(t,e,i=null==i?0:i),s=_(t,o.location),r=Math.atan(-1/s),a=n/2*Math.sin(r),l=n/2*Math.cos(r);return[{x:o.point.x+l,y:o.point.y+a},{x:o.point.x-l,y:o.point.y-a}]};this.jsBezier={distanceFromCurve:i,gradientAtPoint:_,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:o,pointOnCurve:p,pointAlongCurveFrom:y,perpendicularToCurveAt:C,locationAlongCurveFrom:b,getLength:v}}.call(this),function(){"use strict";var t=this.Biltong={},e=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=function(t,n,i){return i(t=e(t)?t:[t.x,t.y],n=e(n)?n:[n.x,n.y])},i=t.gradient=function(t,e){return n(t,e,function(t,e){return e[0]==t[0]?e[1]>t[1]?Infinity:-Infinity:e[1]==t[1]?e[0]>t[0]?0:-0:(e[1]-t[1])/(e[0]-t[0])})},o=(t.normal=function(t,e){return-1/i(t,e)},t.lineLength=function(t,e){return n(t,e,function(t,e){return Math.sqrt(Math.pow(e[1]-t[1],2)+Math.pow(e[0]-t[0],2))})},t.quadrant=function(t,e){return n(t,e,function(t,e){return e[0]>t[0]?e[1]>t[1]?2:1:e[0]==t[0]?e[1]>t[1]?2:1:e[1]>t[1]?3:4})}),s=(t.theta=function(t,e){return n(t,e,function(t,e){var n=i(t,e),s=Math.atan(n),r=o(t,e);return 4!=r&&3!=r||(s+=Math.PI),s<0&&(s+=2*Math.PI),s})},t.intersects=function(t,e){var n=t.x,i=t.x+t.w,o=t.y,s=t.y+t.h,r=e.x,a=e.x+e.w,l=e.y,c=e.y+e.h;return n<=r&&r<=i&&o<=l&&l<=s||n<=a&&a<=i&&o<=l&&l<=s||n<=r&&r<=i&&o<=c&&c<=s||n<=a&&r<=i&&o<=c&&c<=s||r<=n&&n<=a&&l<=o&&o<=c||r<=i&&i<=a&&l<=o&&o<=c||r<=n&&n<=a&&l<=s&&s<=c||r<=i&&n<=a&&l<=s&&s<=c},t.encloses=function(t,e,n){var i=t.x,o=t.x+t.w,s=t.y,r=t.y+t.h,a=e.x,l=e.x+e.w,c=e.y,u=e.y+e.h,d=function(t,e,i,o){return n?t<=e&&i>=o:t<e&&i>o};return d(i,a,o,l)&&d(s,c,r,u)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),r=[null,[-1,-1],[-1,1],[1,1],[1,-1]];t.pointOnLine=function(t,e,n){var a=i(t,e),l=o(t,e),c=n>0?s[l]:r[l],u=Math.atan(a),d=Math.abs(n*Math.sin(u))*c[1],h=Math.abs(n*Math.cos(u))*c[0];return{x:t.x+h,y:t.y+d}},t.perpendicularLineTo=function(t,e,n){var o=i(t,e),s=Math.atan(-1/o),r=n/2*Math.sin(s),a=n/2*Math.cos(s);return[{x:e.x+a,y:e.y+r},{x:e.x-a,y:e.y-r}]}}.call(this),function(){"use strict";var t={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},e=function(t,e,n){for(var i=(n=n||t.parentNode).querySelectorAll(e),o=0;o<i.length;o++)if(i[o]===t)return!0;return!1},n=function(t){return"string"==typeof t?document.getElementById(t):t},i=function(t){return t.srcElement||t.target},o=function(t,e){for(var n=0,i=t.length;n<i&&t[n]!=e;n++);n<t.length&&t.splice(n,1)},s=1,r=function(t,e,n){var i=s++;return t.__ta=t.__ta||{},t.__ta[e]=t.__ta[e]||{},t.__ta[e][i]=n,n.__tauid=i,i},a=function(t,e,n){if(t.__ta&&t.__ta[e]&&delete t.__ta[e][n.__tauid],n.__taExtra){for(var i=0;i<n.__taExtra.length;i++)E(t,n.__taExtra[i][0],n.__taExtra[i][1]);n.__taExtra.length=0}n.__taUnstore&&n.__taUnstore()},l=function(t,n,o,s){if(null==t)return o;var r=t.split(","),a=function(t){a.__tauid=o.__tauid;for(var s=i(t),l=0;l<r.length;l++)e(s,r[l],n)&&o.apply(s,arguments)};return c(o,s,a),a},c=function(t,e,n){t.__taExtra=t.__taExtra||[],t.__taExtra.push([e,n])},u=function(t,e,n,i){if(g&&y[e]){var o=l(i,t,n,y[e]);T(t,y[e],o,n)}"focus"===e&&null==t.getAttribute("tabindex")&&t.setAttribute("tabindex","1"),T(t,e,l(i,t,n,e),n)},d=function(t,e,n,s){if(null==t.__taSmartClicks){var r=function(e){t.__tad=C(e)},a=function(e){t.__tau=C(e)},l=function(e){if(t.__tad&&t.__tau&&t.__tad[0]===t.__tau[0]&&t.__tad[1]===t.__tau[1])for(var n=0;n<t.__taSmartClicks.length;n++)t.__taSmartClicks[n].apply(i(e),[e])};u(t,"mousedown",r,s),u(t,"mouseup",a,s),u(t,"click",l,s),t.__taSmartClicks=[]}t.__taSmartClicks.push(n),n.__taUnstore=function(){o(t.__taSmartClicks,n)}},h={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},p=function(t,n){return function(s,r,a,l){if("contextmenu"==r&&v)u(s,r,a,l);else{if(null==s.__taTapHandler){var c=s.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},d=function(i){for(var o=i.srcElement||i.target,r=0;r<c.downSelectors.length;r++)if(null==c.downSelectors[r]||e(o,c.downSelectors[r],s)){c.down=!0,setTimeout(f,t),setTimeout(m,n);break}},p=function(t){if(c.down){var n=t.srcElement||t.target;c.taps++;var o=k(t);for(var r in h){var a=h[r];if(a.touches===o&&(1===a.taps||a.taps===c.taps))for(var l=0;l<c[r].length;l++)(null==c[r][l][1]||e(n,c[r][l][1],s))&&c[r][l][0].apply(i(t),[t])}}},f=function(){c.down=!1},m=function(){c.taps=0};u(s,"mousedown",d),u(s,"mouseup",p)}s.__taTapHandler.downSelectors.push(l),s.__taTapHandler[r].push([a,l]),a.__taUnstore=function(){o(s.__taTapHandler[r],a)}}}},f=function(t,e,n,i){for(var o in n.__tamee[t])n.__tamee[t][o].apply(i,[e])},m=function(){var t=[];return function(n,o,s,a){if(!n.__tamee){n.__tamee={over:!1,mouseenter:[],mouseexit:[]};var c=function(o){var s=i(o);(null==a&&s==n&&!n.__tamee.over||e(s,a,n)&&(null==s.__tamee||!s.__tamee.over))&&(f("mouseenter",o,n,s),s.__tamee=s.__tamee||{},s.__tamee.over=!0,t.push(s))},u=function(o){for(var s=i(o),r=0;r<t.length;r++)s!=t[r]||e(o.relatedTarget||o.toElement,"*",s)||(s.__tamee.over=!1,t.splice(r,1),f("mouseexit",o,n,s))};T(n,"mouseover",l(a,n,c,"mouseover"),c),T(n,"mouseout",l(a,n,u,"mouseout"),u)}s.__taUnstore=function(){delete n.__tamee[o][s.__tauid]},r(n,o,s),n.__tamee[o][s.__tauid]=s}},g="ontouchstart"in document.documentElement,v="onmousedown"in document.documentElement,y={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},b=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),_=b>-1&&b<9,w=function(t,e){if(null==t)return[0,0];var n=P(t),i=x(n,0);return[i[e+"X"],i[e+"Y"]]},C=function(t){return null==t?[0,0]:_?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:w(t,"page")},j=function(t){return w(t,"screen")},S=function(t){return w(t,"client")},x=function(t,e){return t.item?t.item(e):t[e]},P=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},k=function(t){return P(t).length},T=function(t,e,n,i){if(r(t,e,n),i.__tauid=n.__tauid,t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent){var o=e+n.__tauid;t["e"+o]=n,t[o]=function(){t["e"+o]&&t["e"+o](window.event)},t.attachEvent("on"+e,t[o])}},E=function(t,e,i){null!=i&&D(t,function(){var o=n(this);if(a(o,e,i),null!=i.__tauid)if(o.removeEventListener)o.removeEventListener(e,i,!1),g&&y[e]&&o.removeEventListener(y[e],i,!1);else if(this.detachEvent){var s=e+i.__tauid;o[s]&&o.detachEvent("on"+e,o[s]),o[s]=null,o["e"+s]=null}i.__taTouchProxy&&E(t,i.__taTouchProxy[1],i.__taTouchProxy[0])})},D=function(t,e){if(null!=t){t="undefined"!=typeof Window&&"unknown"!=typeof t.top&&t==t.top?[t]:"string"!=typeof t&&null==t.tagName&&null!=t.length?t:"string"==typeof t?document.querySelectorAll(t):[t];for(var n=0;n<t.length;n++)e.apply(t[n])}};this.Mottle=function(e){var i=(e=e||{}).clickThreshold||150,o=e.dblClickThreshold||350,s=new m,r=new p(i,o),a=e.smartClicks,l=function(t,e,i,o){null!=i&&D(t,function(){var t=n(this);a&&"click"===e?d(t,e,i,o):"tap"===e||"dbltap"===e||"contextmenu"===e?r(t,e,i,o):"mouseenter"===e||"mouseexit"==e?s(t,e,i,o):u(t,e,i,o)})};this.remove=function(t){return D(t,function(){var t=n(this);if(t.__ta)for(var e in t.__ta)for(var i in t.__ta[e])E(t,e,t.__ta[e][i]);t.parentNode&&t.parentNode.removeChild(t)}),this},this.on=function(){var t=arguments[0],e=4==arguments.length?arguments[2]:null,n=arguments[1],i=arguments[arguments.length-1];return l(t,n,i,e),this},this.off=function(t,e,n){return E(t,e,n),this},this.trigger=function(e,i,o,s){var r=v&&("undefined"==typeof MouseEvent||null==o||o.constructor===MouseEvent),a=g&&!v&&y[i]?y[i]:i,l=!(g&&!v&&y[i]),c=C(o),u=j(o),d=S(o);return D(e,function(){var e,h=n(this);o=o||{screenX:u[0],screenY:u[1],clientX:d[0],clientY:d[1]};var p=function(t){s&&(t.payload=s)},f={TouchEvent:function(t){var e=document.createTouch(window,h,0,c[0],c[1],u[0],u[1],d[0],d[1],0,0,0,0),n=document.createTouchList(e),i=document.createTouchList(e),o=document.createTouchList(e);t.initTouchEvent(a,!0,!0,window,null,u[0],u[1],d[0],d[1],!1,!1,!1,!1,n,i,o,1,0)},MouseEvents:function(e){if(e.initMouseEvent(a,!0,!0,window,0,u[0],u[1],d[0],d[1],!1,!1,!1,!1,1,h),t.android){var n=document.createTouch(window,h,0,c[0],c[1],u[0],u[1],d[0],d[1],0,0,0,0);e.touches=e.targetTouches=e.changedTouches=document.createTouchList(n)}}};if(document.createEvent){var m=!l&&!r&&g&&y[i]&&!t.android?"TouchEvent":"MouseEvents";e=document.createEvent(m),f[m](e),p(e),h.dispatchEvent(e)}else document.createEventObject&&((e=document.createEventObject()).eventType=e.eventName=a,e.screenX=u[0],e.screenY=u[1],e.clientX=d[0],e.clientY=d[1],p(e),h.fireEvent("on"+a,e))}),this}},Mottle.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},Mottle.pageLocation=C,Mottle.setForceTouchEvents=function(t){g=t},Mottle.setForceMouseEvents=function(t){v=t}}.call(this),function(){"use strict";var t=function(t){var e=t.getBoundingClientRect(),n=document.body,i=document.documentElement,o=window.pageYOffset||i.scrollTop||n.scrollTop,s=window.pageXOffset||i.scrollLeft||n.scrollLeft,r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,l=e.top+o-r,c=e.left+s-a;return{top:Math.round(l),left:Math.round(c)}},e=function(t,e,n){for(var i=(n=n||t.parentNode).querySelectorAll(e),o=0;o<i.length;o++)if(i[o]===t)return!0;return!1},n=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),i=50,o=50,s=n>-1&&n<9,r=function(t){if(s)return[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop];var e=l(t),n=a(e,0);return[n.pageX,n.pageY]},a=function(t,e){return t.item?t.item(e):t[e]},l=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},c={draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select"},u="katavorio-drag-scope",d=["stop","start","drag","drop","over","out"],h=function(){},p=function(){return!0},f=function(t,e,n){for(var i=0;i<t.length;i++)t[i]!=n&&e(t[i])},m=function(t,e,n,i){f(t,function(t){t.setActive(e),e&&t.updatePosition(),n&&t.setHover(i,e)})},g=function(t,e){if(null!=t){t="string"!=typeof t&&null==t.tagName&&null!=t.length?t:[t];for(var n=0;n<t.length;n++)e.apply(t[n],[t[n]])}},v=function(t){t.stopPropagation?(t.stopPropagation(),t.preventDefault()):t.returnValue=!1},y="input,textarea,select,button,option",b=function(t,n,i){var o=t.srcElement||t.target;return!e(o,i.getInputFilterSelector(),n)},_=function(t,e,n,i){this.params=e||{},this.el=t,this.params.addClass(this.el,this._class),this.uuid=j();var o=!0;return this.setEnabled=function(t){o=t},this.isEnabled=function(){return o},this.toggleEnabled=function(){o=!o},this.setScope=function(t){this.scopes=t?t.split(/\s+/):[i]},this.addScope=function(t){var e={};for(var n in g(this.scopes,function(t){e[t]=!0}),g(t?t.split(/\s+/):[],function(t){e[t]=!0}),this.scopes=[],e)this.scopes.push(n)},this.removeScope=function(t){var e={};for(var n in g(this.scopes,function(t){e[t]=!0}),g(t?t.split(/\s+/):[],function(t){delete e[t]}),this.scopes=[],e)this.scopes.push(n)},this.toggleScope=function(t){var e={};for(var n in g(this.scopes,function(t){e[t]=!0}),g(t?t.split(/\s+/):[],function(t){e[t]?delete e[t]:e[t]=!0}),this.scopes=[],e)this.scopes.push(n)},this.setScope(e.scope),this.k=e.katavorio,e.katavorio},w=function(n,s,a){this._class=a.draggable;var l=_.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var c=[0,0],u=null,d=!1,h=!1!==this.params.consumeStartEvent,f=this.el,g=this.params.clone,y=(this.params.scroll,s.multipleDrop,s.snapThreshold||5),w=function(t,e,n,i,o){i=i||y,o=o||y;var s=e*Math.floor(t[0]/e),r=s+e,a=Math.abs(t[0]-s)<=i?s:Math.abs(r-t[0])<=i?r:t[0],l=n*Math.floor(t[1]/n),c=l+n;return[a,Math.abs(t[1]-l)<=o?l:Math.abs(c-t[1])<=o?c:t[1]]};this.toGrid=function(t){return null==this.params.grid?t:w(t,this.params.grid[0],this.params.grid[1])},this.snap=function(t,e){if(null!=f){t=t||(this.params.grid?this.params.grid[0]:i),e=e||(this.params.grid?this.params.grid[1]:o);var n=this.params.getPosition(f);this.params.setPosition(f,w(n,t,e,t,e))}},this.constrain="function"==typeof this.params.constrain?this.params.constrain:this.params.constrain||this.params.containment?function(t){return[Math.max(0,Math.min(k.w-this.size[0],t[0])),Math.max(0,Math.min(k.h-this.size[1],t[1]))]}:function(t){return t};var C=function(t){return"function"==typeof t?(t._katavorioId=j(),t._katavorioId):t},S={},x=function(t){for(var e in S){var n=S[e],i=n[0](t);if(n[1]&&(i=!i),!i)return!1}return!0},P=this.setFilter=function(t,i){if(t){var o=C(t);S[o]=[function(i){var o,s=i.srcElement||i.target;return"string"==typeof t?o=e(s,t,n):"function"==typeof t&&(o=t(i,n)),o},!1!==i]}};this.addFilter=P,this.removeFilter=function(t){var e="function"==typeof t?t._katavorioId:t;delete S[e]};this.clearAllFilters=function(){S={}},this.canDrag=this.params.canDrag||p;var k,T=[],E=[];this.downListener=function(e){if((this.rightButtonCanDrag||3!==e.which&&2!==e.button)&&this.isEnabled()&&this.canDrag())if(x(e)&&b(e,this.el,this.k)){if(g){(f=this.el.cloneNode(!0)).setAttribute("id",null),f.style.position="absolute";var n=t(this.el);f.style.left=n.left+"px",f.style.top=n.top+"px",document.body.appendChild(f)}else f=this.el;h&&v(e),c=r(e),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),l.markSelection(this),this.params.addClass(document.body,a.noSelect)}else this.params.consumeFilteredEvents&&v(e)}.bind(this),this.moveListener=function(t){if(c){if(!d)if(!1!==this.params.events.start({el:this.el,pos:u,e:t,drag:this})){if(!c)return;this.mark(!0),d=!0}if(c){E.length=0;var e=r(t),n=e[0]-c[0],i=e[1]-c[1],o=this.params.ignoreZoom?1:l.getZoom();n/=o,i/=o,this.moveBy(n,i,t),l.updateSelection(n,i,this)}}}.bind(this),this.upListener=function(t){c&&(c=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,a.noSelect),this.unmark(t),l.unmarkSelection(this,t),this.stop(t),l.notifySelectionDragStop(this,t),d=!1,g&&(f&&f.parentNode&&f.parentNode.removeChild(f),f=null))}.bind(this),this.getFilters=function(){return S},this.abort=function(){null!=c&&this.upListener()},this.getDragElement=function(){return f||this.el},this.notifyStart=function(t){this.params.events.start({el:this.el,pos:this.params.getPosition(f),e:t,drag:this})},this.stop=function(t,e){if(e||d){var n=[],i=l.getSelection(),o=this.params.getPosition(f);if(i.length>1)for(var s=0;s<i.length;s++){var r=this.params.getPosition(i[s].el);n.push([i[s].el,{left:r[0],top:r[1]},i[s]])}else n.push([f,{left:o[0],top:o[1]},this]);this.params.events.stop({el:f,pos:o,e:t,drag:this,selection:n})}},this.mark=function(t){if(u=this.params.getPosition(f),this.size=this.params.getSize(f),T=l.getMatchingDroppables(this),m(T,!0,!1,this),this.params.addClass(f,this.params.dragClass||a.drag),this.params.constrain||this.params.containment){var e=this.params.getSize(f.parentNode);k={w:e[0],h:e[1]}}t&&l.notifySelectionDragStart(this)},this.unmark=function(t){m(T,!1,!0,this),this.params.removeClass(f,this.params.dragClass||a.drag),T.length=0;for(var e=0;e<E.length;e++){if(!0===E[e].drop(this,t))break}},this.moveBy=function(t,e,n){E.length=0;var i=this.constrain(this.toGrid([u[0]+t,u[1]+e]),f),o={x:i[0],y:i[1],w:this.size[0],h:this.size[1]};this.params.setPosition(f,i);for(var s=0;s<T.length;s++){var r={x:T[s].position[0],y:T[s].position[1],w:T[s].size[0],h:T[s].size[1]};this.params.intersects(o,r)&&T[s].canDrop(this)?(E.push(T[s]),T[s].setHover(this,!0,n)):T[s].isHover()&&T[s].setHover(this,!1,n)}this.params.events.drag({el:this.el,pos:i,e:n,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?P(this.params.handle,!1):P(this.params.filter,this.params.filterExclude)},C=function(t,e,n){this._class=n.droppable,this.params=e||{},this._activeClass=e.activeClass||n.active,this._hoverClass=e.hoverClass||n.hover,_.apply(this,arguments);var i=!1;this.setActive=function(t){this.params[t?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(){return!0},this.isHover=function(){return i},this.setHover=function(t,e,n){(e||null==this.el._katavorioDragHover||this.el._katavorioDragHover==t.el._katavorio)&&(this.params[e?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=e?t.el._katavorio:null,i!==e&&this.params.events[e?"over":"out"]({el:this.el,e:n,drag:t,drop:this}),i=e)},this.drop=function(t,e){return this.params.events.drop({drag:t,e:e,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,i=null}},j=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},S=function(t){return null==t?null:null==(t="string"==typeof t?document.getElementById(t):t)?null:(t._katavorio=t._katavorio||j(),t)};this.Katavorio=function(t){var e=[],n={};this._dragsByScope={},this._dropsByScope={};var i=1,o=function(t,e){for(var n=0;n<t.scopes.length;n++)e[t.scopes[n]]=e[t.scopes[n]]||[],e[t.scopes[n]].push(t)},s=function(e,n){for(var i=0,o=0;o<e.scopes.length;o++)if(n[e.scopes[o]]){var s=t.indexOf(n[e.scopes[o]],e);-1!=s&&(n[e.scopes[o]].splice(s,1),i++)}return i>0},r=(this.getMatchingDroppables=function(t){for(var e=[],n={},i=0;i<t.scopes.length;i++){var o=this._dropsByScope[t.scopes[i]];if(o)for(var s=0;s<o.length;s++)o[s].canDrop(t)&&!n[o[s].uuid]&&o[s].el!==t.el&&(n[o[s].uuid]=!0,e.push(o[s]))}return e},function(e){e=e||{};var n={events:{}};for(var i in t)n[i]=t[i];for(var i in e)n[i]=e[i];for(i=0;i<d.length;i++)n.events[d[i]]=e[d[i]]||h;return n.katavorio=this,n}.bind(this)),a={},l=t.css||{},p=t.scope||u;for(var m in c)a[m]=c[m];for(var m in l)a[m]=l[m];var v=t.inputFilterSelector||y;this.getInputFilterSelector=function(){return v},this.setInputFilterSelector=function(t){return v=t,this},this.draggable=function(e,n){var i=[];return g(e,function(e){if(null!=(e=S(e))){var s=r(n);e._katavorioDrag=new w(e,s,a,p),o(e._katavorioDrag,this._dragsByScope),i.push(e._katavorioDrag),t.addClass(e,a.draggable)}}.bind(this)),i},this.droppable=function(e,n){var i=[];return g(e,function(e){null!=(e=S(e))&&(e._katavorioDrop=new C(e,r(n),a,p),o(e._katavorioDrop,this._dropsByScope),i.push(e._katavorioDrop),t.addClass(e,a.droppable))}.bind(this)),i},this.select=function(i){return g(i,function(){var i=S(this);i&&i._katavorioDrag&&(n[i._katavorio]||(e.push(i._katavorioDrag),n[i._katavorio]=[i,e.length-1],t.addClass(i,a.selected)))}),this},this.deselect=function(i){return g(i,function(){var i=S(this);if(i&&i._katavorio&&n[i._katavorio]){for(var o=[],s=0;s<e.length;s++)e[s].el!==i&&o.push(e[s]);e=o,delete n[i._katavorio],t.removeClass(i,a.selected)}}),this},this.deselectAll=function(){for(var i in n){var o=n[i];t.removeClass(o[0],a.selected)}e.length=0,n={}},this.markSelection=function(t){f(e,function(t){t.mark()},t)},this.unmarkSelection=function(t,n){f(e,function(t){t.unmark(n)},t)},this.getSelection=function(){return e.slice(0)},this.updateSelection=function(t,n,i){f(e,function(e){e.moveBy(t,n)},i)},this.notifySelectionDragStop=function(t,n){f(e,function(t){t.stop(n,!0)},t)},this.notifySelectionDragStart=function(t,n){f(e,function(t){t.notifyStart(n)},t)},this.setZoom=function(t){i=t},this.getZoom=function(){return i};var b=function(t,e,n,i){null!=t&&(s(t,n),t[i](e),o(t,n))};g(["set","add","remove","toggle"],function(t){this[t+"Scope"]=function(e,n){b(e._katavorioDrag,n,this._dragsByScope,t+"Scope"),b(e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this),this[t+"DragScope"]=function(e,n){b(e._katavorioDrag,n,this._dragsByScope,t+"Scope")}.bind(this),this[t+"DropScope"]=function(e,n){b(e._katavorioDrop,n,this._dropsByScope,t+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(t,e){for(var n in this._dragsByScope)f(this._dragsByScope[n],function(n){n.snap(t,e)})},this.getDragsForScope=function(t){return this._dragsByScope[t]},this.getDropsForScope=function(t){return this._dropsByScope[t]};var _=function(t,e,n){(t=S(t))[e]&&(s(t[e],n)&&t[e].destroy(),t[e]=null)};this.elementRemoved=function(t){this.destroyDraggable(t),this.destroyDroppable(t)},this.destroyDraggable=function(t){_(t,"_katavorioDrag",this._dragsByScope)},this.destroyDroppable=function(t){_(t,"_katavorioDrop",this._dropsByScope)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},e=[],n={}}}}.call(this),function(){var t=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e=function(t){return"[object Number]"===Object.prototype.toString.call(t)},n=function(t){return"string"==typeof t},i=function(t){return"boolean"==typeof t},o=function(t){return null==t},s=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},r=function(t){return"[object Date]"===Object.prototype.toString.call(t)},a=function(t){return"[object Function]"===Object.prototype.toString.call(t)},l=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},c=this.jsPlumbUtil={isArray:t,isString:n,isBoolean:i,isNull:o,isObject:s,isDate:r,isFunction:a,isEmpty:l,isNumber:e,clone:function(e){if(n(e))return""+e;if(i(e))return!!e;if(r(e))return new Date(e.getTime());if(a(e))return e;if(t(e)){for(var o=[],l=0;l<e.length;l++)o.push(this.clone(e[l]));return o}if(s(e)){var c={};for(var u in e)c[u]=this.clone(e[u]);return c}return e},merge:function(e,o,r){var a,l,c={};for(r=r||[],l=0;l<r.length;l++)c[r[l]]=!0;var u=this.clone(e);for(l in o)if(null==u[l])u[l]=o[l];else if(n(o[l])||i(o[l]))c[l]?((a=[]).push.apply(a,t(u[l])?u[l]:[u[l]]),a.push.apply(a,t(o[l])?o[l]:[o[l]]),u[l]=a):u[l]=o[l];else if(t(o[l]))a=[],t(u[l])&&a.push.apply(a,u[l]),a.push.apply(a,o[l]),u[l]=a;else if(s(o[l]))for(var d in s(u[l])||(u[l]={}),o[l])u[l][d]=o[l][d];return u},replace:function(t,e,n){if(null!=t){var i=t;return e.replace(/([^\.])+/g,function(t,e,o,s){var r=t.match(/([^\[0-9]+){1}(\[)([0-9+])/),a=function(){return i[r[1]]||(i[r[1]]=[],i[r[1]])};if(o+t.length>=s.length)r?a()[r[3]]=n:i[t]=n;else if(r){var l=a();i=l[r[3]]||(l[r[3]]={},l[r[3]])}else i=i[t]||(i[t]={},i[t])}),t}},functionChain:function(t,e,n){for(var i=0;i<n.length;i++){var o=n[i][0][n[i][1]].apply(n[i][0],n[i][2]);if(o===e)return o}return t},populate:function(e,i){var o=function(t){var e=t.match(/(\${.*?})/g);if(null!=e)for(var n=0;n<e.length;n++){var o=i[e[n].substring(2,e[n].length-1)]||"";null!=o&&(t=t.replace(e[n],o))}return t},r=function(e){if(null!=e){if(n(e))return o(e);if(t(e)){for(var i=[],a=0;a<e.length;a++)i.push(r(e[a]));return i}if(s(e)){var l={};for(var c in e)l[c]=r(e[c]);return l}return e}};return r(e)},convertStyle:function(t,e){if("transparent"===t)return t;var n=t,i=function(t){return 1==t.length?"0"+t:t},o=function(t){return i(Number(t).toString(16))},s=/(rgb[a]?\()(.*)(\))/;if(t.match(s)){var r=t.match(s)[2].split(",");n="#"+o(r[0])+o(r[1])+o(r[2]),e||4!=r.length||(n+=o(r[3]))}return n},findWithFunction:function(t,e){if(t)for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},indexOf:function(t,e){return t.indexOf?t.indexOf(e):c.findWithFunction(t,function(t){return t==e})},removeWithFunction:function(t,e){var n=c.findWithFunction(t,e);return n>-1&&t.splice(n,1),-1!=n},remove:function(t,e){var n=c.indexOf(t,e);return n>-1&&t.splice(n,1),-1!=n},addWithFunction:function(t,e,n){-1==c.findWithFunction(t,n)&&t.push(e)},addToList:function(t,e,n,i){var o=t[e];return null==o&&(o=[],t[e]=o),o[i?"unshift":"push"](n),o},extend:function(e,n){var i;for(n=t(n)?n:[n],i=0;i<n.length;i++)for(var o in n[i].prototype)n[i].prototype.hasOwnProperty(o)&&(e.prototype[o]=n[i].prototype[o]);var s=function(t,e){return function(){for(i=0;i<n.length;i++)n[i].prototype[t]&&n[i].prototype[t].apply(this,arguments);return e.apply(this,arguments)}},r=function(t){for(var n in t)e.prototype[n]=s(n,t[n])};if(arguments.length>2)for(i=2;i<arguments.length;i++)r(arguments[i]);return e},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})},logEnabled:!0,log:function(){if(c.logEnabled&&"undefined"!=typeof console)try{var t=arguments[arguments.length-1];console.log(t)}catch(e){}},wrap:function(t,e,n){return t=t||function(){},e=e||function(){},function(){var i=null;try{i=e.apply(this,arguments)}catch(o){c.log("jsPlumb function failed : "+o)}if(null==n||i!==n)try{i=t.apply(this,arguments)}catch(o){c.log("wrapped function failed : "+o)}return i}}};c.EventGenerator=function(){var t={},e=!1,n={ready:!0};this.bind=function(e,n,i){var o=function(e){c.addToList(t,e,n,i),n.__jsPlumb=n.__jsPlumb||{},n.__jsPlumb[jsPlumbUtil.uuid()]=e};if("string"==typeof e)o(e);else if(null!=e.length)for(var s=0;s<e.length;s++)o(e[s]);return this},this.fire=function(i,o,s){if(!e&&t[i]){var r=t[i].length,a=0,l=!1,u=null;if(!this.shouldFireEvent||this.shouldFireEvent(i,o,s))for(;!l&&a<r&&!1!==u;){if(n[i])t[i][a].apply(this,[o,s]);else try{u=t[i][a].apply(this,[o,s])}catch(d){c.log("jsPlumb: fire failed for event "+i+" : "+d)}a++,null!=t&&null!=t[i]||(l=!0)}}return this},this.unbind=function(e,n){if(0===arguments.length)t={};else if(1===arguments.length){if("string"==typeof e)delete t[e];else if(e.__jsPlumb){var i;for(var o in e.__jsPlumb)i=e.__jsPlumb[o],c.remove(t[i]||[],e)}}else 2===arguments.length&&c.remove(t[e]||[],n);return this},this.getListener=function(e){return t[e]},this.setSuspendEvents=function(t){e=t},this.isSuspendEvents=function(){return e},this.silently=function(t){this.setSuspendEvents(!0);try{t()}catch(e){jsPlumbUtil.log("Cannot execute silent function "+e)}this.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var e in t)t[e]=null}},c.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,o.prototype=new i,o})}.call(this),function(){"use strict";var t=this.jsPlumbUtil;t.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,t.oldIE=t.ieVersion>-1&&t.ieVersion<9,t.matchesSelector=function(t,e,n){for(var i=(n=n||t.parentNode).querySelectorAll(e),o=0;o<i.length;o++)if(i[o]===t)return!0;return!1},t.consume=function(t,e){t.stopPropagation?t.stopPropagation():t.returnValue=!1,!e&&t.preventDefault&&t.preventDefault()},t.sizeElement=function(t,e,n,i,o){t&&(t.style.height=o+"px",t.height=o,t.style.width=i+"px",t.width=i,t.style.left=e+"px",t.style.top=n+"px")}}.call(this),
/*
 * jsPlumb
 * 
 * Title:jsPlumb 1.7.6
 * 
 * Provides a way to visually connect elements on an HTML page, using SVG or VML.  
 * 
 * This file contains the core code.
 *
 * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)
 * 
 * http://jsplumbtoolkit.com
 * http://github.com/sporritt/jsplumb
 * 
 * Dual licensed under the MIT and GPL2 licenses.
 */
function(){"use strict";var t,e=[],n=this.jsPlumbUtil,i=function(){return""+(new Date).getTime()},o=function(t){if(t._jsPlumb.paintStyle&&t._jsPlumb.hoverPaintStyle){var e={};m.extend(e,t._jsPlumb.paintStyle),m.extend(e,t._jsPlumb.hoverPaintStyle),delete t._jsPlumb.hoverPaintStyle,e.gradient&&t._jsPlumb.paintStyle.fillStyle&&delete e.gradient,t._jsPlumb.hoverPaintStyle=e}},s=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],r=function(t,e,n,i){var o=t.getAttachedElements();if(o)for(var s=0,r=o.length;s<r;s++)i&&i==o[s]||o[s].setHover(e,!0,n)},a=function(t){return null==t?null:t.split(" ")},l=function(t,e,n){for(var i in e)t[i]=n},c=function(t,e,i){if(t.getDefaultType){var o=t.getTypeDescriptor(),s={},r=t.getDefaultType(),a=n.merge({},r);l(s,r,"__default");for(var c=0,u=t._jsPlumb.types.length;c<u;c++){var d=t._jsPlumb.types[c];if("__default"!==d){var h=t._jsPlumb.instance.getType(d,o);null!=h&&(a=n.merge(a,h,["cssClass"]),l(s,h,d))}}e&&(a=n.populate(a,e)),t.applyType(a,i,s),i||t.repaint()}},u=window.jsPlumbUIComponent=function(t){jsPlumbUtil.EventGenerator.apply(this,arguments);var e=this,i=arguments,o=e.idPrefix+(new Date).getTime();this._jsPlumb={instance:t._jsPlumb,parameters:t.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:t.beforeDetach,beforeDrop:t.beforeDrop,overlayPlacements:[],hoverClass:t.hoverClass||t._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(t,e,n){this._jsPlumb.typeCache[n]=this._jsPlumb.typeCache[n]||{},this._jsPlumb.typeCache[n][t]=e},this.getCachedTypeItem=function(t,e){return this._jsPlumb.typeCache[e]?this._jsPlumb.typeCache[e][t]:null},this.getId=function(){return o};var s=t.overlays||[],r={};if(this.defaultOverlayKeys){for(var a=0;a<this.defaultOverlayKeys.length;a++)Array.prototype.push.apply(s,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[a]]||[]);for(a=0;a<s.length;a++){var l=m.convertToFullOverlaySpec(s[a]);r[l[1].id]=l}}var c={overlays:r,parameters:t.parameters||{},scope:t.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return c},this.appendToDefaultType=function(t){for(var e in t)c[e]=t[e]},t.events)for(a in t.events)e.bind(a,t.events[a]);this.clone=function(){var t={};return this.constructor.apply(t,i),t}.bind(this),this.isDetachAllowed=function(t){var e=!0;if(this._jsPlumb.beforeDetach)try{e=this._jsPlumb.beforeDetach(t)}catch(i){n.log("jsPlumb: beforeDetach callback failed",i)}return e},this.isDropAllowed=function(t,e,i,o,s,r,a){var l=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:t,targetId:e,scope:i,connection:o,dropEndpoint:s,source:r,target:a});if(this._jsPlumb.beforeDrop)try{l=this._jsPlumb.beforeDrop({sourceId:t,targetId:e,scope:i,connection:o,dropEndpoint:s,source:r,target:a})}catch(c){n.log("jsPlumb: beforeDrop callback failed",c)}return l};var u=[];this.setListenerComponent=function(t){for(var e=0;e<u.length;e++)u[e][3]=t}},d=function(t,e){var n=t._jsPlumb.types[e],i=t._jsPlumb.instance.getType(n,t.getTypeDescriptor());null!=i&&i.cssClass&&t.canvas&&t._jsPlumb.instance.removeClass(t.canvas,i.cssClass)};jsPlumbUtil.extend(u,jsPlumbUtil.EventGenerator,{getParameter:function(t){return this._jsPlumb.parameters[t]},setParameter:function(t,e){this._jsPlumb.parameters[t]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(t){this._jsPlumb.parameters=t},hasClass:function(t){return m.hasClass(this.canvas,t)},addClass:function(t){m.addClass(this.canvas,t)},removeClass:function(t){m.removeClass(this.canvas,t)},updateClasses:function(t,e){m.updateClasses(this.canvas,t,e)},setType:function(t,e,n){this.clearTypes(),this._jsPlumb.types=a(t)||[],c(this,e,n)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(t,e){c(this,t,e)},hasType:function(t){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,t)},addType:function(t,e,n){var i=a(t),o=!1;if(null!=i){for(var s=0,r=i.length;s<r;s++)this.hasType(i[s])||(this._jsPlumb.types.push(i[s]),o=!0);o&&c(this,e,n)}},removeType:function(t,e){var i=a(t),o=!1,s=function(t){var e=n.indexOf(this._jsPlumb.types,t);return-1!=e&&(d(this,e),this._jsPlumb.types.splice(e,1),!0)}.bind(this);if(null!=i){for(var r=0,l=i.length;r<l;r++)o=s(i[r])||o;o&&c(this,null,e)}},clearTypes:function(t){for(var e=this._jsPlumb.types.length,n=0;n<e;n++)d(this,0),this._jsPlumb.types.splice(0,1);c(this,{},t)},toggleType:function(t,e,n){var i=a(t);if(null!=i){for(var o=0,s=i.length;o<s;o++){var r=jsPlumbUtil.indexOf(this._jsPlumb.types,i[o]);-1!=r?(d(this,r),this._jsPlumb.types.splice(r,1)):this._jsPlumb.types.push(i[o])}c(this,e,n)}},applyType:function(t,e){if(this.setPaintStyle(t.paintStyle,e),this.setHoverPaintStyle(t.hoverPaintStyle,e),t.parameters)for(var n in t.parameters)this.setParameter(n,t.parameters[n]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(t,e){this._jsPlumb.paintStyle=t,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,o(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(t,e){this._jsPlumb.hoverPaintStyle=t,o(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(t){(t||null==this.typeId)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(t,e,n){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=t,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var o=t?"addClass":"removeClass";this._jsPlumb.instance[o](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[o](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=t?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(n=n||i(),this.repaint({timestamp:n,recalc:!1}))),this.getAttachedElements&&!e&&r(this,t,i(),this)}}});var h=0,p=function(){var t=h+1;return h++,t},f=window.jsPlumbInstance=function(o){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},o&&m.extend(this.Defaults,o),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var r=this,a=p(),l=r.bind,c={},d=1,h=function(t){if(null==t)return null;if(3==t.nodeType||8==t.nodeType)return{el:t,text:!0};var e=r.getElement(t);return{el:e,id:jsPlumbUtil.isString(t)&&null==e?t:X(e)}};for(var f in this.getInstanceIndex=function(){return a},this.setZoom=function(t,e){return jsPlumbUtil.oldIE||(d=t,r.fire("zoom",d),e&&r.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return d},this.Defaults)c[f]=this.Defaults[f];var g,v=[];this.unbindContainer=function(){if(null!=g&&v.length>0)for(var t=0;t<v.length;t++)r.off(g,v[t][0],v[t][1])},this.setContainer=function(t){this.unbindContainer(),t=this.getElement(t),this.select().each(function(e){e.moveParent(t)}),this.selectEndpoints().each(function(e){e.moveParent(t)}),g=t,v.length=0;for(var e=function(t,e){var n=e.srcElement||e.target,i=(n&&n.parentNode?n.parentNode._jsPlumb:null)||(n?n._jsPlumb:null)||(n&&n.parentNode&&n.parentNode.parentNode?n.parentNode.parentNode._jsPlumb:null);i&&(i.fire(t,i,e),r.fire(t,i.component||i,e))},n=function(t,e,n){v.push([t,n]),r.on(g,t,e,n)},i=function(t){n(t,"._jsPlumb_connector > *",function(n){e(t,n)}),n(t,"._jsPlumb_endpoint, ._jsPlumb_endpoint > *, ._jsPlumb_endpoint svg *",function(n){e(t,n)}),n(t,"._jsPlumb_overlay, ._jsPlumb_overlay *",function(n){e(t,n)})},o=0;o<s.length;o++)i(s[o])},this.getContainer=function(){return g},this.bind=function(t,e){"ready"===t&&b?e():l.apply(r,[t,e])},r.importDefaults=function(t){for(var e in t)r.Defaults[e]=t[e];return t.Container&&r.setContainer(t.Container),r},r.restoreDefaults=function(){return r.Defaults=m.extend({},c),r};var y=null,b=!1,_=[],w={},C={},j={},S={},x={},P={},k=!1,T=[],E=!1,D=null,A=this.Defaults.Scope,I=null,$=1,M=function(){return""+$++},L=function(t,e){g?g.appendChild(t):e?this.getElement(e).appendChild(t):this.appendToRoot(t)}.bind(this),O=function(t,e,n,o){if(!m.headless&&!E){var s=X(t),a=r.getDragManager().getElementsForDraggable(s);null==n&&(n=i());var l=gt({elId:s,offset:e,recalc:!1,timestamp:n});if(a)for(var c in a)gt({elId:a[c].id,offset:{left:l.o.left+a[c].offset.left,top:l.o.top+a[c].offset.top},recalc:!1,timestamp:n});if(r.anchorManager.redraw(s,e,n,null,o),a)for(var u in a)r.anchorManager.redraw(a[u].id,e,n,a[u].offset,o,!0)}},Q=function(t){return C[t]},B=function(t,e,i,o){if(!m.headless&&(null!=e&&e&&m.isDragSupported(t,r)&&!m.isAlreadyDraggable(t,r))){var s=i||r.Defaults.DragOptions;s=m.extend({},s);var a=m.dragEvents.drag,l=m.dragEvents.stop,c=m.dragEvents.start,u=r.getElement(t),d=r.getDragManager().getDragAncestor(u),h={left:0,top:0},p=h,f=!1;mt(o,t),s[c]=n.wrap(s[c],function(){if(p=null!=d?r.getOffset(d):h,r.setHoverSuspended(!0),r.select({source:t}).addClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:t}).addClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.setConnectionBeingDragged(!0),s.canDrag)return i.canDrag()},!1),s[a]=n.wrap(s[a],function(){var e=r.getUIPosition(arguments,r.getZoom());e.left+=p.left,e.top+=p.top,O(t,e,null,!0),f&&r.addClass(t,"jsPlumb_dragged"),f=!0}),s[l]=n.wrap(s[l],function(){var e=[];e=1==arguments.length&&arguments[0].selection&&arguments[0].selection.length>0?arguments[0].selection:[[t,r.getUIPosition(arguments,r.getZoom(),!0)]];for(var n=function(t){O(t[0],t[1]),r.removeClass(t[0],"jsPlumb_dragged"),r.select({source:t[0]}).removeClass(r.elementDraggingClass+" "+r.sourceElementDraggingClass,!0),r.select({target:t[0]}).removeClass(r.elementDraggingClass+" "+r.targetElementDraggingClass,!0),r.getDragManager().dragEnded(t[0])},i=0;i<e.length;i++)n(e[i]);f=!1,r.setHoverSuspended(!1),r.setConnectionBeingDragged(!1)});var g=X(t);P[g]=!0;var v=P[g];s.disabled=null!=v&&!v,r.initDraggable(t,s),r.getDragManager().register(t)}},F=function(t,e){for(var n=t.scope.split(/\s/),i=e.scope.split(/\s/),o=0;o<n.length;o++)for(var s=0;s<i.length;s++)if(i[s]==n[o])return!0;return!1},N=function(t,e){var i=m.extend({},t);if(e&&m.extend(i,e),i.source&&(i.source.endpoint?i.sourceEndpoint=i.source:i.source=r.getElement(i.source)),i.target&&(i.target.endpoint?i.targetEndpoint=i.target:i.target=r.getElement(i.target)),t.uuids&&(i.sourceEndpoint=Q(t.uuids[0]),i.targetEndpoint=Q(t.uuids[1])),i.sourceEndpoint&&i.sourceEndpoint.isFull())n.log(r,"could not add connection; source endpoint is full");else if(i.targetEndpoint&&i.targetEndpoint.isFull())n.log(r,"could not add connection; target endpoint is full");else{if(!i.type&&i.sourceEndpoint&&(i.type=i.sourceEndpoint.connectionType),i.sourceEndpoint&&i.sourceEndpoint.connectorOverlays){i.overlays=i.overlays||[];for(var o=0,s=i.sourceEndpoint.connectorOverlays.length;o<s;o++)i.overlays.push(i.sourceEndpoint.connectorOverlays[o])}!i["pointer-events"]&&i.sourceEndpoint&&i.sourceEndpoint.connectorPointerEvents&&(i["pointer-events"]=i.sourceEndpoint.connectorPointerEvents);var a=function(t,e){var n=m.extend({},t);for(var i in e)e[i]&&(n[i]=e[i]);return n},l=function(t,e,n){return r.addEndpoint(t,a(e,{anchor:i.anchors?i.anchors[n]:i.anchor,endpoint:i.endpoints?i.endpoints[n]:i.endpoint,paintStyle:i.endpointStyles?i.endpointStyles[n]:i.endpointStyle,hoverPaintStyle:i.endpointHoverStyles?i.endpointHoverStyles[n]:i.endpointHoverStyle}))},c=function(t,e,n){if(i[t]&&!i[t].endpoint&&!i[t+"Endpoint"]&&!i.newConnection){var o=n[X(i[t])];if(o){if(!o.enabled)return!1;var s=null!=o.endpoint&&o.endpoint._jsPlumb?o.endpoint:l(i[t],o.def,e);if(s.isFull())return!1;i[t+"Endpoint"]=s,s._doNotDeleteOnDetach=!1,s._deleteOnDetach=!0,o.uniqueEndpoint&&(o.endpoint?s.finalEndpoint=o.endpoint:(o.endpoint=s,s._deleteOnDetach=!1,s._doNotDeleteOnDetach=!0))}}};if(!1!==c("source",0,this.sourceEndpointDefinitions)&&!1!==c("target",1,this.targetEndpointDefinitions))return i.sourceEndpoint&&i.targetEndpoint&&(F(i.sourceEndpoint,i.targetEndpoint)||(i=null)),i}}.bind(r),H=function(t){var e=r.Defaults.ConnectionType||r.getDefaultConnectionType();t._jsPlumb=r,t.newConnection=H,t.newEndpoint=R,t.endpointsByUUID=C,t.endpointsByElement=w,t.finaliseConnection=G,t.id="con_"+M();var n=new e(t);return n.isDetachable()&&(n.endpoints[0].initDraggable("_jsPlumbSource"),n.endpoints[1].initDraggable("_jsPlumbTarget")),n},G=r.finaliseConnection=function(t,e,n,i){if(e=e||{},t.suspendedEndpoint||_.push(t),t.endpoints[0].isTemporarySource=!1,(null==t.suspendedEndpoint||i)&&r.anchorManager.newConnection(t),O(t.source),!e.doNotFireConnectionEvent&&!1!==e.fireEvent){var o={connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]};r.fire("connection",o,n)}},R=function(t,e){var n=r.Defaults.EndpointType||m.Endpoint,i=m.extend({},t);i._jsPlumb=r,i.newConnection=H,i.newEndpoint=R,i.endpointsByUUID=C,i.endpointsByElement=w,i.fireDetachEvent=K,i.elementId=e||X(i.source);var o=new n(i);return o.id="ep_"+M(),mt(i.elementId,i.source),m.headless||r.getDragManager().endpointAdded(i.source,e),o},U=function(t,e,n){var i=w[t];if(i&&i.length)for(var o=0,s=i.length;o<s;o++){for(var r=0,a=i[o].connections.length;r<a;r++){if(e(i[o].connections[r]))return}n&&n(i[o])}},z=function(t,e){return m.each(t,function(t){r.isDragSupported(t)&&(P[r.getAttribute(t,"id")]=e,r.setElementDraggable(t,e))})},W=function(t,e,n){e="block"===e;var i=null;n&&(i=e?function(t){t.setVisible(!0,!0,!0)}:function(t){t.setVisible(!1,!0,!0)});var o=h(t);U(o.id,function(t){if(e&&n){var i=t.sourceId===o.id?1:0;t.endpoints[i].isVisible()&&t.setVisible(!0)}else t.setVisible(e)},i)},V=function(t){return m.each(t,function(t){var e=r.getAttribute(t,"id"),n=null!=P[e]&&P[e];return n=!n,P[e]=n,r.setDraggable(t,n),n}.bind(this))},Y=function(t,e){var n=null;e&&(n=function(t){var e=t.isVisible();t.setVisible(!e)}),U(t,function(t){var e=t.isVisible();t.setVisible(!e)},n)},q=function(t){var e=S[t];return e?{o:e,s:T[t]}:gt({elId:t})},X=function(t,e,n){if(jsPlumbUtil.isString(t))return t;if(null==t)return null;var i=r.getAttribute(t,"id");return i&&"undefined"!==i||(2==arguments.length&&arguments[1]!==undefined?i=e:(1==arguments.length||3==arguments.length&&!arguments[2])&&(i="jsPlumb_"+a+"_"+M()),n||r.setAttribute(t,"id",i)),i};this.setConnectionBeingDragged=function(t){k=t},this.isConnectionBeingDragged=function(){return k},this.connectorClass="_jsPlumb_connector",this.connectorOutlineClass="_jsPlumb_connector_outline",this.connectedClass="_jsPlumb_connected",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.VML="vml",this.addEndpoint=function(t,e,i){i=i||{};var o=m.extend({},i);m.extend(o,e),o.endpoint=o.endpoint||r.Defaults.Endpoint,o.paintStyle=o.paintStyle||r.Defaults.EndpointStyle;for(var s=[],a=n.isArray(t)||null!=t.length&&!n.isString(t)?t:[t],l=0,c=a.length;l<c;l++){o.source=r.getElement(a[l]),pt(o.source);var u=X(o.source),d=R(o,u),h=mt(u,o.source).info.o;n.addToList(w,u,d),E||d.paint({anchorLoc:d.anchor.compute({xy:[h.left,h.top],wh:T[u],element:d,timestamp:D}),timestamp:D}),s.push(d),d._doNotDeleteOnDetach=!0}return 1==s.length?s[0]:s},this.addEndpoints=function(t,e,i){for(var o=[],s=0,a=e.length;s<a;s++){var l=r.addEndpoint(t,e[s],i);n.isArray(l)?Array.prototype.push.apply(o,l):o.push(l)}return o},this.animate=function(t,e,i){if(!this.animationSupported)return!1;i=i||{};var o=r.getElement(t),s=X(o),a=m.animEvents.step,l=m.animEvents.complete;i[a]=n.wrap(i[a],function(){r.revalidate(s)}),i[l]=n.wrap(i[l],function(){r.revalidate(s)}),r.doAnimate(o,e,i)},this.checkCondition=function(t){var e=r.getListener(t),i=!0;if(e&&e.length>0){var o=Array.prototype.slice.call(arguments,1);try{for(var s=0,a=e.length;s<a;s++)i=i&&e[s].apply(e[s],o)}catch(l){n.log(r,"cannot check condition ["+t+"]"+l)}}return i},this.connect=function(t,e){var n,i=N(t,e);if(i){if(null==i.source&&null==i.sourceEndpoint)return void jsPlumbUtil.log("Cannot establish connection - source does not exist");if(null==i.target&&null==i.targetEndpoint)return void jsPlumbUtil.log("Cannot establish connection - target does not exist");pt(i.source),n=H(i),G(n,i)}return n};var J=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],Z=function(t,e,n,i){var o,s,r,a=J[n],l=t[a.elId],c=(t[a.el],t.endpoints[n]),u={index:n,originalSourceId:0===n?l:t.sourceId,newSourceId:t.sourceId,originalTargetId:1==n?l:t.targetId,newTargetId:t.targetId,connection:t};if(e.constructor==m.Endpoint)(o=e).addConnection(t);else if(s=X(e),r=this[a.epDefs][s],s===t[a.elId])o=null;else if(r){if(!r.enabled)return;o=null!=r.endpoint&&r.endpoint._jsPlumb?r.endpoint:this.addEndpoint(e,r.def),r.uniqueEndpoint&&(r.endpoint=o),o._doNotDeleteOnDetach=!1,o._deleteOnDetach=!0,o.addConnection(t)}else(o=t.makeEndpoint(0===n,e,s))._doNotDeleteOnDetach=!1,o._deleteOnDetach=!0;return null!=o&&(c.detachFromConnection(t),t.endpoints[n]=o,t[a.el]=o.element,t[a.elId]=o.elementId,u[0===n?"newSourceId":"newTargetId"]=o.elementId,tt(u),i||t.repaint()),u}.bind(this);this.setSource=function(t,e,n){var i=Z(t,e,0,n);this.anchorManager.sourceChanged(i.originalSourceId,i.newSourceId,t)},this.setTarget=function(t,e,n){var i=Z(t,e,1,n);this.anchorManager.updateOtherEndpoint(i.originalSourceId,i.originalTargetId,i.newTargetId,t)},this.deleteEndpoint=function(t,e){var n="string"==typeof t?C[t]:t;return n&&r.deleteObject({endpoint:n,dontUpdateHover:e}),r},this.deleteEveryEndpoint=function(){var t=r.setSuspendDrawing(!0);for(var e in w){var n=w[e];if(n&&n.length)for(var i=0,o=n.length;i<o;i++)r.deleteEndpoint(n[i],!0)}return w={},j={},C={},S={},x={},r.anchorManager.reset(),r.getDragManager().reset(),t||r.setSuspendDrawing(!1),r};var K=function(t,e,n){var i=r.Defaults.ConnectionType||r.getDefaultConnectionType(),o=t.constructor==i?{connection:t,source:t.source,target:t.target,sourceId:t.sourceId,targetId:t.targetId,sourceEndpoint:t.endpoints[0],targetEndpoint:t.endpoints[1]}:t;e&&r.fire("connectionDetached",o,n),r.anchorManager.connectionDetached(o)},tt=r.fireMoveEvent=function(t,e){r.fire("connectionMoved",t,e)};this.unregisterEndpoint=function(t){for(var e in t._jsPlumb.uuid&&(C[t._jsPlumb.uuid]=null),r.anchorManager.deleteEndpoint(t),w){var n=w[e];if(n){for(var i=[],o=0,s=n.length;o<s;o++)n[o]!=t&&i.push(n[o]);w[e]=i}w[e].length<1&&delete w[e]}},this.detach=function(){if(0!==arguments.length){var t=r.Defaults.ConnectionType||r.getDefaultConnectionType(),e=arguments[0].constructor==t,n=2==arguments.length&&e?arguments[1]||{}:arguments[0],i=!1!==n.fireEvent,o=n.forceDetach,s=e?arguments[0]:n.connection;if(s)(o||jsPlumbUtil.functionChain(!0,!1,[[s.endpoints[0],"isDetachAllowed",[s]],[s.endpoints[1],"isDetachAllowed",[s]],[s,"isDetachAllowed",[s]],[r,"checkCondition",["beforeDetach",s]]]))&&s.endpoints[0].detach(s,!1,!0,i);else{var a=m.extend({},n);if(a.uuids)Q(a.uuids[0]).detachFrom(Q(a.uuids[1]),i);else if(a.sourceEndpoint&&a.targetEndpoint)a.sourceEndpoint.detachFrom(a.targetEndpoint);else{var l=X(r.getElement(a.source)),c=X(r.getElement(a.target));U(l,function(t){(t.sourceId==l&&t.targetId==c||t.targetId==l&&t.sourceId==c)&&r.checkCondition("beforeDetach",t)&&t.endpoints[0].detach(t,!1,!0,i)})}}}},this.detachAllConnections=function(t,e){e=e||{},t=r.getElement(t);var n=X(t),i=w[n];if(i&&i.length)for(var o=0,s=i.length;o<s;o++)i[o].detachAll(!1!==e.fireEvent,e.forceDetach);return r},this.detachEveryConnection=function(t){return t=t||{},r.batch(function(){for(var e in w){var n=w[e];if(n&&n.length)for(var i=0,o=n.length;i<o;i++)n[i].detachAll(!1!==t.fireEvent,t.forceDetach)}_.length=0}),r},this.deleteObject=function(t){var e={endpoints:{},connections:{},endpointCount:0,connectionCount:0},n=!1!==t.fireEvent,i=!1!==t.deleteAttachedObjects,o=function(n){if(null!=n&&null==e.connections[n.id]&&(t.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),e.connections[n.id]=n,e.connectionCount++,i))for(var o=0;o<n.endpoints.length;o++)n.endpoints[o]._deleteOnDetach&&s(n.endpoints[o])},s=function(n){if(null!=n&&null==e.endpoints[n.id]&&(t.dontUpdateHover||null==n._jsPlumb||n.setHover(!1),e.endpoints[n.id]=n,e.endpointCount++,i))for(var s=0;s<n.connections.length;s++){var r=n.connections[s];o(r)}};for(var a in t.connection?o(t.connection):s(t.endpoint),e.connections){var l=e.connections[a];l._jsPlumb&&(jsPlumbUtil.removeWithFunction(_,function(t){return l.id==t.id}),K(l,n,t.originalEvent),l.endpoints[0].detachFromConnection(l),l.endpoints[1].detachFromConnection(l),l.cleanup(!0),l.destroy(!0))}for(var c in e.endpoints){var u=e.endpoints[c];u._jsPlumb&&(r.unregisterEndpoint(u),u.cleanup(!0),u.destroy(!0))}return e},this.draggable=function(t,e){var n,i,o;if("object"==typeof t&&t.length)for(n=0,i=t.length;n<i;n++)(o=h(t[n])).el&&B(o.el,!0,e,o.id);else(o=h(t)).el&&B(o.el,!0,e,o.id);return r};var et=function(t,e,n,i){for(var o=0,s=t.length;o<s;o++)t[o][e].apply(t[o],n);return i(t)},nt=function(t,e,n){for(var i=[],o=0,s=t.length;o<s;o++)i.push([t[o][e].apply(t[o],n),t[o]]);return i},it=function(t,e,n){return function(){return et(t,e,arguments,n)}},ot=function(t,e){return function(){return nt(t,e,arguments)}},st=function(t,e){var n=[];if(t)if("string"==typeof t){if("*"===t)return t;n.push(t)}else if(e)n=t;else if(t.length)for(var i=0,o=t.length;i<o;i++)n.push(h(t[i]).id);else n.push(h(t).id);return n},rt=function(t,e,n){return"*"===t||(t.length>0?-1!=jsPlumbUtil.indexOf(t,e):!n)};this.getConnections=function(t,e){t?t.constructor==String&&(t={scope:t}):t={};for(var n=t.scope||r.getDefaultScope(),i=st(n,!0),o=st(t.source),s=st(t.target),a=!e&&i.length>1?{}:[],l=function(t,n){if(!e&&i.length>1){var o=a[t];null==o&&(o=a[t]=[]),o.push(n)}else a.push(n)},c=0,u=_.length;c<u;c++){var d=_[c];rt(i,d.scope)&&rt(o,d.sourceId)&&rt(s,d.targetId)&&l(d.scope,d)}return a};var at=function(t,e){return function(n){for(var i=0,o=t.length;i<o;i++)n(t[i]);return e(t)}},lt=function(t){return function(e){return t[e]}},ct=function(t,e){var n,i,o={length:t.length,each:at(t,e),get:lt(t)},s=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],r=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(n=0,i=s.length;n<i;n++)o[s[n]]=it(t,s[n],e);for(n=0,i=r.length;n<i;n++)o[r[n]]=ot(t,r[n]);return o},ut=function(t){var e=ct(t,ut);return m.extend(e,{setDetachable:it(t,"setDetachable",ut),setReattach:it(t,"setReattach",ut),setConnector:it(t,"setConnector",ut),detach:function(){for(var e=0,n=t.length;e<n;e++)r.detach(t[e])},isDetachable:ot(t,"isDetachable"),isReattach:ot(t,"isReattach")})},dt=function(t){var e=ct(t,dt);return m.extend(e,{setEnabled:it(t,"setEnabled",dt),setAnchor:it(t,"setAnchor",dt),isEnabled:ot(t,"isEnabled"),detachAll:function(){for(var e=0,n=t.length;e<n;e++)t[e].detachAll()},remove:function(){for(var e=0,n=t.length;e<n;e++)r.deleteObject({endpoint:t[e]})}})};this.select=function(t){return(t=t||{}).scope=t.scope||"*",ut(t.connections||r.getConnections(t,!0))},this.selectEndpoints=function(t){(t=t||{}).scope=t.scope||"*";var e=!t.element&&!t.source&&!t.target,n=e?"*":st(t.element),i=e?"*":st(t.source),o=e?"*":st(t.target),s=st(t.scope,!0),r=[];for(var a in w){var l=rt(n,a,!0),c=rt(i,a,!0),u="*"!=i,d=rt(o,a,!0),h="*"!=o;if(l||c||d)t:for(var p=0,f=w[a].length;p<f;p++){var m=w[a][p];if(rt(s,m.scope,!0)){var g=u&&i.length>0&&!m.isSource,v=h&&o.length>0&&!m.isTarget;if(g||v)continue t;r.push(m)}}}return dt(r)},this.getAllConnections=function(){return _},this.getDefaultScope=function(){return A},this.getEndpoint=Q,this.getEndpoints=function(t){return w[h(t).id]},this.getDefaultEndpointType=function(){return m.Endpoint},this.getDefaultConnectionType=function(){return m.Connection},this.getId=X,this.appendElement=L;var ht=!1;this.isHoverSuspended=function(){return ht},this.setHoverSuspended=function(t){ht=t},this.hide=function(t,e){return W(t,"none",e),r},this.idstamp=M,this.connectorsInitialized=!1,this.registerConnectorType=function(t,n){e.push([t,n])};var pt=function(t){if(!g&&t){var e=r.getElement(t);e.offsetParent&&r.setContainer(e.offsetParent)}},ft=function(){r.Defaults.Container&&r.setContainer(r.Defaults.Container)},mt=r.manage=function(t,e){return j[t]||(j[t]={el:e,endpoints:[],connections:[]},j[t].info=gt({elId:t,timestamp:D})),j[t]},gt=this.updateOffset=function(t){var e,n=t.timestamp,i=t.recalc,o=t.offset,s=t.elId;return E&&!n&&(n=D),!i&&n&&n===x[s]?{o:t.offset||S[s],s:T[s]}:(i||!o&&null==S[s]?null!=(e=j[s]?j[s].el:null)&&(T[s]=r.getSize(e),S[s]=r.getOffset(e),x[s]=n):(S[s]=o||S[s],null==T[s]&&null!=(e=j[s].el)&&(T[s]=r.getSize(e)),x[s]=n),S[s]&&!S[s].right&&(S[s].right=S[s].left+T[s][0],S[s].bottom=S[s].top+T[s][1],S[s].width=T[s][0],S[s].height=T[s][1],S[s].centerx=S[s].left+S[s].width/2,S[s].centery=S[s].top+S[s].height/2),{o:S[s],s:T[s]})};this.init=function(){t=m.getRenderModes();var n=function(t,e,n){m.Connectors[t][e]=function(){n.apply(this,arguments),m.ConnectorRenderers[t].apply(this,arguments)},jsPlumbUtil.extend(m.Connectors[t][e],[n,m.ConnectorRenderers[t]])};if(!m.connectorsInitialized){for(var i=0;i<e.length;i++)for(var o=0;o<t.length;o++)n(t[o],e[i][1],e[i][0]);m.connectorsInitialized=!0}b||(ft(),r.anchorManager=new m.AnchorManager({jsPlumbInstance:r}),r.setRenderMode(r.Defaults.RenderMode),b=!0,r.fire("ready",r))}.bind(this),this.log=y,this.jsPlumbUIComponent=u,this.makeAnchor=function(){var t,e=function(t,e){if(m.Anchors[t])return new m.Anchors[t](e);if(!r.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+t+"'"}};if(0===arguments.length)return null;var i=arguments[0],o=arguments[1],s=(arguments[2],null);if(i.compute&&i.getOrientation)return i;if("string"==typeof i)s=e(arguments[0],{elementId:o,jsPlumbInstance:r});else if(n.isArray(i))if(n.isArray(i[0])||n.isString(i[0]))2==i.length&&n.isObject(i[1])?n.isString(i[0])?(t=m.extend({elementId:o,jsPlumbInstance:r},i[1]),s=e(i[0],t)):(t=m.extend({elementId:o,jsPlumbInstance:r,anchors:i[0]},i[1]),s=new m.DynamicAnchor(t)):s=new m.DynamicAnchor({anchors:i,selector:null,elementId:o,jsPlumbInstance:r});else{var a={x:i[0],y:i[1],orientation:i.length>=4?[i[2],i[3]]:[0,0],offsets:i.length>=6?[i[4],i[5]]:[0,0],elementId:o,jsPlumbInstance:r,cssClass:7==i.length?i[6]:null};(s=new m.Anchor(a)).clone=function(){return new m.Anchor(a)}}return s.id||(s.id="anchor_"+M()),s},this.makeAnchors=function(t,e,i){for(var o=[],s=0,a=t.length;s<a;s++)"string"==typeof t[s]?o.push(m.Anchors[t[s]]({elementId:e,jsPlumbInstance:i})):n.isArray(t[s])&&o.push(r.makeAnchor(t[s],e,i));return o},this.makeDynamicAnchor=function(t,e){return new m.DynamicAnchor({anchors:t,selector:e,elementId:null,jsPlumbInstance:r})},this.targetEndpointDefinitions={};var vt=function(t,e,n){t.paintStyle=t.paintStyle||n.Defaults.EndpointStyles[e]||n.Defaults.EndpointStyle,t.hoverPaintStyle=t.hoverPaintStyle||n.Defaults.EndpointHoverStyles[e]||n.Defaults.EndpointHoverStyle,t.anchor=t.anchor||n.Defaults.Anchors[e]||n.Defaults.Anchor,t.endpoint=t.endpoint||n.Defaults.Endpoints[e]||n.Defaults.Endpoint};this.sourceEndpointDefinitions={};var yt=function(t,e,n,i,o){for(var s=t.target||t.srcElement,r=!1,a=i.getSelector(e,n),l=0;l<a.length;l++)if(a[l]==s){r=!0;break}return o?!r:r},bt=function(t,e,i,o,s,a){var l=new u(e),c=e._jsPlumb.EndpointDropHandler({jsPlumb:r,enabled:function(){return t.el[a].enabled},isFull:function(){var e=r.select({target:t.id}).length,n=t.el[a];return n.maxConnections>0&&e>=n.maxConnections},element:t.el,elementId:t.id,isSource:o,isTarget:s,addClass:function(e){r.addClass(t.el,e)},removeClass:function(e){r.removeClass(t.el,e)},onDrop:function(t){t.endpoints[0].anchor.locked=!1},isDropAllowed:function(){return l.isDropAllowed.apply(l,arguments)},isRedrop:function(e){return null!=e.suspendedElement&&null!=e.suspendedEndpoint&&e.suspendedEndpoint.element===t.el},getEndpoint:function(n){var i=t.el[a],o=i.endpoint;if(null!=o&&null!=o._jsPlumb||((o=r.addEndpoint(t.el,e))._mtNew=!0),e.uniqueEndpoint&&(i.endpoint=o),o._doNotDeleteOnDetach=!1,o._deleteOnDetach=!0,n.isDetachable()&&o.initDraggable(),null!=o.anchor.positionFinder){var s=r.getUIPosition(arguments,r.getZoom()),l=r.getOffset(t.el),c=r.getSize(t.el),u=o.anchor.positionFinder(s,l,c,o.anchor.constructorParams);o.anchor.x=u[0],o.anchor.y=u[1]}return o},maybeCleanup:function(t){t._mtNew&&0===t.connections.length?r.deleteObject({endpoint:t}):delete t._mtNew}}),d=m.dragEvents.drop;return i.scope=i.scope||e.scope||r.Defaults.Scope,i[d]=n.wrap(i[d],c,!0),s&&(i[m.dragEvents.over]=function(){return!0}),i.definitionId=a,!1===e.allowLoopback&&(i.canDrop=function(e){return e.getDragElement()._jsPlumbRelatedElement!=t.el}),r.initDroppable(t.el,i,"internal"),c};this.makeTarget=function(t,e,n){var i=m.extend({_jsPlumb:this},n);m.extend(i,e),vt(i,1,this);i.deleteEndpointsOnDetach;for(var o=i.maxConnections||-1,s=function(t){var e=h(t),n=e.id,s=m.extend({},i.dropOptions||{});pt(n);var r={def:i,uniqueEndpoint:i.uniqueEndpoint,maxConnections:o,enabled:!0};e.el._jsPlumbTarget=r,this.targetEndpointDefinitions[n]=r,bt(e,i,s,!0===i.isSource,!0,"_jsPlumbTarget")}.bind(this),r=t.length&&t.constructor!=String?t:[t],a=0,l=r.length;a<l;a++)s(r[a]);return this},this.unmakeTarget=function(t,e){var n=h(t);return m.destroyDroppable(n.el),e||delete this.targetEndpointDefinitions[n.id],this},this.makeSource=function(t,e,i){var o=m.extend({_jsPlumb:this},i);m.extend(o,e),vt(o,0,this);for(var s=o.maxConnections||1,a=o.onMaxConnections,l=function(t){var e=t.id,i=this.getElement(t.el);pt(e);var l={def:o,uniqueEndpoint:o.uniqueEndpoint,maxConnections:s,enabled:!0};this.sourceEndpointDefinitions[e]=l,t.el._jsPlumbSource=l;var c=m.dragEvents.stop,u=m.dragEvents.drag,h=m.extend({},o.dragOptions||{}),p=h.drag,f=h.stop,g=null,v=!1;h.scope=h.scope||o.scope,h[u]=n.wrap(h[u],function(){p&&p.apply(this,arguments),v=!1}),h[c]=n.wrap(h[c],function(){if(f&&f.apply(this,arguments),this.currentlyDragging=!1,null!=g._jsPlumb){var t=o.anchor||this.Defaults.Anchor,n=g.anchor,i=g.connections[0],s=this.makeAnchor(t,e,this),a=g.element;if(null!=s.positionFinder){var l=r.getOffset(a),c=this.getSize(a),u={left:l.left+n.x*c[0],top:l.top+n.y*c[1]},d=s.positionFinder(u,l,c,s.constructorParams);s.x=d[0],s.y=d[1]}g.setAnchor(s,!0),g.repaint(),this.repaint(g.elementId),null!=i&&this.repaint(i.targetId)}}.bind(this));var y=function(n){var l=this.getOriginalEvent(n);if(3!==n.which&&2!==n.button){var c=this.sourceEndpointDefinitions[e];if(c.enabled){if(e=this.getId(this.getElement(t.el)),o.filter)if(!1===(jsPlumbUtil.isString(o.filter)?yt(l,t.el,o.filter,this,o.filterExclude):o.filter(l,t.el)))return;var u=this.select({source:e}).length;if(c.maxConnections>=0&&c.uniqueEndpoint&&u>=c.maxConnections)return a&&a({element:t.el,maxConnections:s},n),!1;var p=m.getPositionOnElement(l,i,d),f={}
;m.extend(f,o),f.isTemporarySource=!0,f.anchor=[p[0],p[1],0,0],f.dragOptions=h,g=this.addEndpoint(e,f),v=!0,g._doNotDeleteOnDetach=!1,g._deleteOnDetach=!0,c.uniqueEndpoint&&(c.endpoint?g.finalEndpoint=c.endpoint:(c.endpoint=g,g._deleteOnDetach=!1,g._doNotDeleteOnDetach=!0));var y=function(){r.off(g.canvas,"mouseup",y),r.off(t.el,"mouseup",y),v&&(v=!1,r.deleteEndpoint(g))};r.on(g.canvas,"mouseup",y),r.on(t.el,"mouseup",y),r.trigger(g.canvas,"mousedown",n),jsPlumbUtil.consume(n)}}}.bind(this);this.on(t.el,"mousedown",y),l.trigger=y,o.filter&&(jsPlumbUtil.isString(o.filter)||jsPlumbUtil.isFunction(o.filter))&&r.setDragFilter(t.el,o.filter);var b=m.extend({},o.dropOptions||{});bt(t,o,b,!0,!0===o.isTarget,"_jsPlumbSource")}.bind(this),c=t.length&&t.constructor!=String?t:[t],u=0,p=c.length;u<p;u++)l(h(c[u]));return this},this.unmakeSource=function(t,e){var n=h(t),i=this.sourceEndpointDefinitions[n.id].trigger;return i&&r.off(n.el,"mousedown",i),e||delete this.sourceEndpointDefinitions[n.id],this},this.unmakeEverySource=function(){for(var t in this.sourceEndpointDefinitions)r.unmakeSource(t,!0);return this.sourceEndpointDefinitions={},this};var _t=function(t,e){e=jsPlumbUtil.isArray(e)?e:[e];for(var n=X(t),i=0;i<e.length;i++){var o=this[e[i]][n];if(o)return o.def.scope||this.Defaults.Scope}}.bind(this),wt=function(t,e,n){n=jsPlumbUtil.isArray(n)?n:[n];for(var i=X(t),o=0;o<n.length;o++){var s=this[n[o]][i];s&&(s.def.scope=e,null!=this.scopeChange&&this.scopeChange(t,i,w[i],e,n[o]))}}.bind(this);this.getScope=function(t){return _t(t,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(t){return _t(t,"sourceEndpointDefinitions")},this.getTargetScope=function(t){return _t(t,"targetEndpointDefinitions")},this.setScope=function(t,e){wt(t,e,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.setSourceScope=function(t,e){wt(t,e,"sourceEndpointDefinitions")},this.setTargetScope=function(t,e){wt(t,e,"targetEndpointDefinitions")},this.unmakeEveryTarget=function(){for(var t in this.targetEndpointDefinitions)r.unmakeTarget(t,!0);return this.targetEndpointDefinitions={},this};var Ct=function(t,e,i,o){var s="source"==t?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(n.isString(e))s[e].enabled=o?!s[e].enabled:i;else if(e.length)for(var r=0,a=e.length;r<a;r++){var l=h(e[r]);s[l.id]&&(s[l.id].enabled=o?!s[l.id].enabled:i)}else{var c=h(e).id;s[c].enabled=o?!s[c].enabled:i}return this}.bind(this),jt=function(t,e){return n.isString(t)||!t.length?e.apply(this,[t]):t.length?e.apply(this,[t[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(t){return Ct("source",t,null,!0),this.isSourceEnabled(t)},this.setSourceEnabled=function(t,e){return Ct("source",t,e)},this.isSource=function(t){return jt(t,function(t){return null!=this.sourceEndpointDefinitions[h(t).id]}.bind(this))},this.isSourceEnabled=function(t){return jt(t,function(t){var e=this.sourceEndpointDefinitions[h(t).id];return e&&!0===e.enabled}.bind(this))},this.toggleTargetEnabled=function(t){return Ct("target",t,null,!0),this.isTargetEnabled(t)},this.isTarget=function(t){return jt(t,function(t){return null!=this.targetEndpointDefinitions[h(t).id]}.bind(this))},this.isTargetEnabled=function(t){return jt(t,function(t){var e=this.targetEndpointDefinitions[h(t).id];return e&&!0===e.enabled}.bind(this))},this.setTargetEnabled=function(t,e){return Ct("target",t,e)},this.ready=function(t){r.bind("ready",t)};var St=function(t,e){if("object"==typeof t&&t.length)for(var n=0,i=t.length;n<i;n++)e(t[n]);else e(t);return r};this.repaint=function(t,e,n){return St(t,function(t){O(t,e,n)})},this.revalidate=function(t,e,n){return St(t,function(t){var i=n?t:r.getId(t);r.updateOffset({elId:i,recalc:!0,timestamp:e}),r.repaint(t)})},this.repaintEverything=function(){var t,e=i();for(t in w)r.updateOffset({elId:t,recalc:!0,timestamp:e});for(t in w)O(t,null,e);return this},this.removeAllEndpoints=function(t,e,n){n=n||[];var i=function(t){var o,s,a=h(t),l=w[a.id];if(l)for(n.push(a),o=0,s=l.length;o<s;o++)r.deleteEndpoint(l[o]);if(delete w[a.id],e&&a.el&&3!=a.el.nodeType&&8!=a.el.nodeType)for(o=0,s=a.el.childNodes.length;o<s;o++)i(a.el.childNodes[o])};return i(t),this};var xt=function(t,e){r.removeAllEndpoints(t.id,!0,e);for(var n=function(t){r.getDragManager().elementRemoved(t.id),r.anchorManager.clearFor(t.id),r.anchorManager.removeFloatingConnection(t.id),delete r.floatingConnections[t.id],delete j[t.id],delete S[t.id],t.el&&(r.removeElement(t.el),t.el._jsPlumb=null)},i=1;i<e.length;i++)n(e[i]);n(t)};this.remove=function(t,e){var n=h(t),i=[];return n.text?n.el.parentNode.removeChild(n.el):n.id&&r.batch(function(){xt(n,i)},!1===e),r},this.empty=function(t,e){var n=[],i=function(t,e){var o=h(t);if(o.text)o.el.parentNode.removeChild(o.el);else if(o.el){for(;o.el.childNodes.length>0;)i(o.el.childNodes[0]);e||xt(o,n)}};return r.batch(function(){i(t,!0)},!1===e),r},this.reset=function(){r.silently(function(){r.deleteEveryEndpoint(),r.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},_.length=0,this.doReset&&this.doReset()}.bind(this))};var Pt=function(t){t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.cleanup(),t.destroy()};this.clear=function(){r.select().each(Pt),r.selectEndpoints().each(Pt),w={},C={}},this.setDefaultScope=function(t){return A=t,r},this.setDraggable=z,this.setId=function(t,e,n){var i;jsPlumbUtil.isString(t)?i=t:(t=this.getElement(t),i=this.getId(t));var o=this.getConnections({source:i,scope:"*"},!0),s=this.getConnections({target:i,scope:"*"},!0);e=""+e,n?t=this.getElement(e):(t=this.getElement(i),this.setAttribute(t,"id",e)),w[e]=w[i]||[];for(var r=0,a=w[e].length;r<a;r++)w[e][r].setElementId(e),w[e][r].setReferenceElement(t);delete w[i],this.anchorManager.changeId(i,e),this.getDragManager().changeId(i,e),j[e]=j[i],delete j[i];var l=function(n,i,o){for(var s=0,r=n.length;s<r;s++)n[s].endpoints[i].setElementId(e),n[s].endpoints[i].setReferenceElement(t),n[s][o+"Id"]=e,n[s][o]=t};l(o,0,"source"),l(s,1,"target"),this.repaint(e)},this.setDebugLog=function(t){y=t},this.setSuspendDrawing=function(t,e){var n=E;return E=t,D=t?(new Date).getTime():null,e&&this.repaintEverything(),n},this.isSuspendDrawing=function(){return E},this.getSuspendedAt=function(){return D},this.batch=function(t,e){var i=this.isSuspendDrawing();i||this.setSuspendDrawing(!0);try{t()}catch(o){n.log("Function run while suspended failed",o)}i||this.setSuspendDrawing(!1,!e)},this.doWhileSuspended=this.batch,this.getCachedData=q,this.timestamp=i,this.setRenderMode=function(t){if(t!==m.SVG&&t!==m.VML)throw new TypeError("Render mode ["+t+"] not supported");return I=this.trySetRenderMode(t)},this.getRenderMode=function(){return I},this.show=function(t,e){return W(t,"block",e),r},this.toggleVisible=Y,this.toggleDraggable=V,this.addListener=this.bind};jsPlumbUtil.extend(f,jsPlumbUtil.EventGenerator,{setAttribute:function(t,e,n){this.setAttribute(t,e,n)},getAttribute:function(t,e){return this.getAttribute(m.getElement(t),e)},convertToFullOverlaySpec:function(t){return jsPlumbUtil.isString(t)&&(t=[t,{}]),t[1].id=t[1].id||jsPlumbUtil.uuid(),t},registerConnectionType:function(t,e){if(this._connectionTypes[t]=m.extend({},e),e.overlays){for(var n={},i=0;i<e.overlays.length;i++){var o=this.convertToFullOverlaySpec(e.overlays[i]);n[o[1].id]=o}this._connectionTypes[t].overlays=n}},registerConnectionTypes:function(t){for(var e in t)this.registerConnectionType(e,t[e])},registerEndpointType:function(t,e){this._endpointTypes[t]=m.extend({},e)},registerEndpointTypes:function(t){for(var e in t)this._endpointTypes[e]=m.extend({},t[e])},getType:function(t,e){return"connection"===e?this._connectionTypes[t]:this._endpointTypes[t]},setIdChanged:function(t,e){this.setId(t,e,!0)},setParent:function(t,e){var n=this.getElement(t),i=this.getId(n),o=this.getElement(e),s=this.getId(o);n.parentNode.removeChild(n),o.appendChild(n),this.getDragManager().setParent(n,i,o,s)},extend:function(t,e,n){var i;if(n)for(i=0;i<n.length;i++)t[n[i]]=e[n[i]];else for(i in e)t[i]=e[i];return t},floatingConnections:{},getFloatingAnchorIndex:function(t){return t.endpoints[0].isFloating()?0:1}});var m=new f;"undefined"!=typeof window&&(window.jsPlumb=m),m.getInstance=function(t){var e=new f(t);return e.init(),e},m.each=function(t,e){if(null!=t)if("string"==typeof t)e(m.getElement(t));else if(null!=t.length)for(var n=0;n<t.length;n++)e(m.getElement(t[n]));else e(t)},"function"==typeof define&&(define("jsplumb",[],function(){return m}),define("jsplumbinstance",[],function(){return m.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=m)}.call(this),function(){this.jsPlumbUtil;var t=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),e=function(){if(e.vml===undefined){var t=document.body.appendChild(document.createElement("div"));t.innerHTML='<v:shape id="vml_flag1" adj="1" />';var n=t.firstChild;null!=n&&null!=n.style?(n.style.behavior="url(#default#VML)",e.vml=!n||"object"==typeof n.adj):e.vml=!1,t.parentNode.removeChild(t)}return e.vml},n=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(e)&&(t=parseFloat(RegExp.$1))}return t}(),i=n>-1&&n<9,o=function(t,e){if(null==t)return[0,0];var n=c(t),i=l(n,0);return[i[e+"X"],i[e+"Y"]]},s=function(t){return null==t?[0,0]:i?[t.clientX+document.documentElement.scrollLeft,t.clientY+document.documentElement.scrollTop]:o(t,"page")},r=function(t){return o(t,"screen")},a=function(t){return o(t,"client")},l=function(t,e){return t.item?t.item(e):t[e]},c=function(t){return t.touches&&t.touches.length>0?t.touches:t.changedTouches&&t.changedTouches.length>0?t.changedTouches:t.targetTouches&&t.targetTouches.length>0?t.targetTouches:[t]},u=function(t){var e={},n=[],i={},o={},s={};this.register=function(r){var a=t.getId(r),l=t.getOffset(r);e[a]||(e[a]=r,n.push(r),i[a]={});var c=function(e){if(e)for(var n=0;n<e.childNodes.length;n++)if(3!=e.childNodes[n].nodeType&&8!=e.childNodes[n].nodeType){var r=jsPlumb.getElement(e.childNodes[n]),u=t.getId(e.childNodes[n],null,!0);if(u&&o[u]&&o[u]>0){var d=t.getOffset(r);i[a][u]={id:u,offset:{left:d.left-l.left,top:d.top-l.top}},s[u]=a}c(e.childNodes[n])}};c(r)},this.updateOffsets=function(e){if(null!=e){var n=jsPlumb.getElement(e),o=t.getId(n),r=i[o],a=t.getOffset(n);if(r)for(var l in r)if(r.hasOwnProperty(l)){var c=jsPlumb.getElement(l),u=t.getOffset(c);i[o][l]={id:l,offset:{left:u.left-a.left,top:u.top-a.top}},s[l]=o}}},this.endpointAdded=function(n,r){r=r||t.getId(n);var a=document.body,l=n.parentNode;for(o[r]=o[r]?o[r]+1:1;null!=l&&l!=a;){var c=t.getId(l,null,!0);if(c&&e[c]){var u=t.getOffset(l);if(null==i[c][r]){var d=t.getOffset(n);i[c][r]={id:r,offset:{left:d.left-u.left,top:d.top-u.top}},s[r]=c}break}l=l.parentNode}},this.endpointDeleted=function(t){if(o[t.elementId]&&(o[t.elementId]--,o[t.elementId]<=0))for(var e in i)i.hasOwnProperty(e)&&i[e]&&(delete i[e][t.elementId],delete s[t.elementId])},this.changeId=function(t,e){i[e]=i[t],i[t]={},s[e]=s[t],s[t]=null},this.getElementsForDraggable=function(t){return i[t]},this.elementRemoved=function(t){var e=s[t];e&&(delete i[e][t],delete s[t])},this.reset=function(){e={},n=[],i={},o={}},this.dragEnded=function(e){var n=t.getId(e),i=s[n];i&&this.updateOffsets(i)},this.setParent=function(e,n,o,r){var a=s[n];if(a){i[r]||(i[r]={}),i[r][n]=i[a][n],delete i[a][n];var l=t.getOffset(o),c=t.getOffset(e);i[r][n].offset={left:c.left-l.left,top:c.top-l.top},s[n]=r}},this.getDragAncestor=function(e){var n=jsPlumb.getElement(e),i=t.getId(n),o=s[i];return o?jsPlumb.getElement(o):null}},d=function(t){return null==t?null:t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},h=function(t,e){e=d(e),"undefined"!=typeof t.className.baseVal?t.className.baseVal=e:t.className=e},p=function(t){return"undefined"==typeof t.className.baseVal?t.className:t.className.baseVal},f=function(t,e,n){e=null==e?[]:jsPlumbUtil.isArray(e)?e:e.split(/\s+/),n=null==n?[]:jsPlumbUtil.isArray(n)?n:n.split(/\s+/);var i=p(t).split(/\s+/),o=function(t,e){for(var n=0;n<e.length;n++)if(t)-1==jsPlumbUtil.indexOf(i,e[n])&&i.push(e[n]);else{var o=jsPlumbUtil.indexOf(i,e[n]);-1!=o&&i.splice(o,1)}};o(!0,e),o(!1,n),h(t,i.join(" "))};jsPlumb.extend(jsPlumbInstance.prototype,{headless:!1,pageLocation:s,screenLocation:r,clientLocation:a,getDragManager:function(){return null==this.dragManager&&(this.dragManager=new u(this)),this.dragManager},recalculateOffsets:function(t){this.getDragManager().updateOffsets(t)},createElement:function(t,e,n,i){return this.createElementNS(null,t,e,n,i)},createElementNS:function(t,e,n,i,o){var s,r=null==t?document.createElement(e):document.createElementNS(t,e);for(s in n=n||{})r.style[s]=n[s];for(s in i&&(r.className=i),o=o||{})r.setAttribute(s,""+o[s]);return r},getAttribute:function(t,e){return null!=t.getAttribute?t.getAttribute(e):null},setAttribute:function(t,e,n){null!=t.setAttribute&&t.setAttribute(e,n)},setAttributes:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])},appendToRoot:function(t){document.body.appendChild(t)},getRenderModes:function(){return["svg","vml"]},isRenderModeAvailable:function(n){return{svg:t,vml:e()}[n]},trySetRenderMode:function(t){var e;if(t){t=t.toLowerCase();var n=this.isRenderModeAvailable("svg"),i=this.isRenderModeAvailable("vml");"svg"===t&&n?e="svg":i&&(e="vml")}return e},addClass:function(t,e){jsPlumb.each(t,function(t){f(t,e)})},hasClass:function(t,e){return(t=jsPlumb.getElement(t)).classList?t.classList.contains(e):-1!=p(t).indexOf(e)},removeClass:function(t,e){jsPlumb.each(t,function(t){f(t,null,e)})},updateClasses:function(t,e,n){jsPlumb.each(t,function(t){f(t,e,n)})},setClass:function(t,e){jsPlumb.each(t,function(t){h(t,e)})},setPosition:function(t,e){t.style.left=e.left+"px",t.style.top=e.top+"px"},getPosition:function(t){var e=function(e){var n=t.style[e];return n?n.substring(0,n.length-2):0};return{left:e("left"),top:e("top")}},getStyle:function(t,e){return"undefined"!=typeof window.getComputedStyle?getComputedStyle(t,null).getPropertyValue(e):t.currentStyle[e]},getSelector:function(t,e){return 1==arguments.length?null!=t.nodeType?t:document.querySelectorAll(t):t.querySelectorAll(e)},getOffset:function(t,e){t=jsPlumb.getElement(t);for(var n=this.getContainer(),i={left:t.offsetLeft,top:t.offsetTop},o=e||null!=n&&t.offsetParent!=n?t.offsetParent:null,s=function(e){if(null!=e&&e!==document.body&&(e.scrollTop>0||e.scrollLeft>0)){this.getStyle(t,"position");i.left-=e.scrollLeft,i.top-=e.scrollTop}}.bind(this);null!=o;)i.left+=o.offsetLeft,i.top+=o.offsetTop,s(o),o=e?o.offsetParent:o.offsetParent==n?null:o.offsetParent;if(null!=n&&!e&&(n.scrollTop>0||n.scrollLeft>0)){var r=null!=t.offsetParent?this.getStyle(t.offsetParent,"position"):"static",a=this.getStyle(t,"position");"absolute"!==a&&"fixed"!==a&&"absolute"!==r&&"fixed"!=r&&(i.left-=n.scrollLeft,i.top-=n.scrollTop)}return i},getPositionOnElement:function(t,e,n){var i="undefined"!=typeof e.getBoundingClientRect?e.getBoundingClientRect():{left:0,top:0,width:0,height:0},o=document.body,s=document.documentElement,r=window.pageYOffset||s.scrollTop||o.scrollTop,a=window.pageXOffset||s.scrollLeft||o.scrollLeft,l=s.clientTop||o.clientTop||0,c=s.clientLeft||o.clientLeft||0,u=0,d=0,h=i.top+r-l+u*n,p=i.left+a-c+d*n,f=jsPlumb.pageLocation(t),m=i.width||e.offsetWidth*n,g=i.height||e.offsetHeight*n;return[(f[0]-p)/m,(f[1]-h)/g]},getAbsolutePosition:function(t){var e=function(e){var n=t.style[e];if(n)return parseFloat(n.substring(0,n.length-2))};return[e("left"),e("top")]},setAbsolutePosition:function(t,e,n,i){n?this.animate(t,{left:"+="+(e[0]-n[0]),top:"+="+(e[1]-n[1])},i):(t.style.left=e[0]+"px",t.style.top=e[1]+"px")},getSize:function(t){return[t.offsetWidth,t.offsetHeight]},getWidth:function(t){return t.offsetWidth},getHeight:function(t){return t.offsetHeight}})}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i="__label",o=function(t,n){var o={cssClass:n.cssClass,labelStyle:t.labelStyle,id:i,component:t,_jsPlumb:t._jsPlumb.instance},s=jsPlumb.extend(o,n);return new(e.Overlays[t._jsPlumb.instance.getRenderMode()].Label)(s)},s=function(t,i){var o=null;if(n.isArray(i)){var s=i[0],r=e.extend({component:t,_jsPlumb:t._jsPlumb.instance},i[1]);3==i.length&&e.extend(r,i[2]),o=new(e.Overlays[t._jsPlumb.instance.getRenderMode()][s])(r)}else o=i.constructor==String?new(e.Overlays[t._jsPlumb.instance.getRenderMode()][i])({component:t,_jsPlumb:t._jsPlumb.instance}):i;return o.id=o.id||n.uuid(),t.cacheTypeItem("overlay",o,o.id),t._jsPlumb.overlays[o.id]=o,o};e.OverlayCapableJsPlumbUIComponent=function(t){jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},t.label&&(this.getDefaultType().overlays[i]=["Label",{label:t.label,location:t.labelLocation||this.defaultLabelLocation||.5,labelStyle:t.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:i}]),this.setListenerComponent=function(t){if(this._jsPlumb)for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].setListenerComponent(t)}},e.OverlayCapableJsPlumbUIComponent.applyType=function(t,e){if(e.overlays){var n,i={};for(n in e.overlays){var o=t._jsPlumb.overlays[e.overlays[n][1].id];if(o)o.updateFrom(e.overlays[n][1]),i[e.overlays[n][1].id]=!0;else{var s=t.getCachedTypeItem("overlay",e.overlays[n][1].id);null!=s?(s.reattach(t._jsPlumb.instance),s.updateFrom(e.overlays[n][1]),t._jsPlumb.overlays[s.id]=s):s=t.addOverlay(e.overlays[n],!0),i[s.id]=!0}}for(n in t._jsPlumb.overlays)null==i[t._jsPlumb.overlays[n].id]&&t.removeOverlay(t._jsPlumb.overlays[n].id)}},n.extend(e.OverlayCapableJsPlumbUIComponent,jsPlumbUIComponent,{setHover:function(t){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e][t?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(t,e){var n=s(this,t);return e||this.repaint(),n},getOverlay:function(t){return this._jsPlumb.overlays[t]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(t){var e=this.getOverlay(t);e&&e.hide()},hideOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].hide()},showOverlay:function(t){var e=this.getOverlay(t);e&&e.show()},showOverlays:function(){for(var t in this._jsPlumb.overlays)this._jsPlumb.overlays[t].show()},removeAllOverlays:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup&&this._jsPlumb.overlays[e].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,t||this.repaint()},removeOverlay:function(t){var e=this._jsPlumb.overlays[t];e&&(e.cleanup&&e.cleanup(),delete this._jsPlumb.overlays[t],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[t])},removeOverlays:function(){for(var t=0,e=arguments.length;t<e;t++)this.removeOverlay(arguments[t])},moveParent:function(t){for(var e in this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),t.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),t.appendChild(this.canvas),this._jsPlumb.overlays)if(this._jsPlumb.overlays[e].isAppendedAtTopLevel){var n=this._jsPlumb.overlays[e].getElement();n.parentNode.removeChild(n),t.appendChild(n)}},getLabel:function(){var t=this.getOverlay(i);return null!=t?t.getLabel():null},getLabelOverlay:function(){return this.getOverlay(i)},setLabel:function(t){var e=this.getOverlay(i);if(e)t.constructor==String||t.constructor==Function?e.setLabel(t):(t.label&&e.setLabel(t.label),t.location&&e.setLocation(t.location));else{var n=t.constructor==String||t.constructor==Function?{label:t}:t;e=o(this,n),this._jsPlumb.overlays[i]=e}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(t){for(var e in this._jsPlumb.overlays)this._jsPlumb.overlays[e].cleanup(t),this._jsPlumb.overlays[e].destroy(t);t&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(t){this[t?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(t,e){this._jsPlumb.overlayPositions[t.id]=e},getAbsoluteOverlayPosition:function(t){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[t.id]:null}})}.call(this),
/*
 * jsPlumb
 * 
 * Title:jsPlumb 1.7.6
 * 
 * Provides a way to visually connect elements on an HTML page, using SVG or VML.  
 * 
 * This file contains the code for Endpoints.
 *
 * Copyright (c) 2010 - 2015 jsPlumb (hello@jsplumbtoolkit.com)
 * 
 * http://jsplumbtoolkit.com
 * http://github.com/sporritt/jsplumb
 * 
 * Dual licensed under the MIT and GPL2 licenses.
 */
function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=function(t,n){var i=!1;return{drag:function(){if(i)return i=!1,!0;var o=e.getUIPosition(arguments,n.getZoom());t.element&&(jsPlumb.setPosition(t.element,o),n.repaint(t.element,o))},stopDrag:function(){i=!0}}},o=function(t,e){var n=jsPlumb.createElement("div",{position:"absolute"});e.appendElement(n);var i=e.getId(n);e.manage(i,n),t.id=i,t.element=n},s=function(t,n,i,o,s,r,a,l){return a({paintStyle:t,endpoint:i,anchor:new e.FloatingAnchor({reference:n,referenceCanvas:o,jsPlumbInstance:r}),source:s,scope:l})},r=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],a=function(t,e){var n=0;if(null!=e)for(var i=0;i<t.connections.length;i++)if(t.connections[i].sourceId==e||t.connections[i].targetId==e){n=i;break}return t.connections[n]},l=function(t,e){return n.findWithFunction(e.connections,function(e){return e.id==t.id})};e.Endpoint=function(t){var c=t._jsPlumb,u=t.newConnection,d=t.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:t.connectionType,maxConnections:null==t.maxConnections?this._jsPlumb.instance.Defaults.MaxConnections:t.maxConnections,paintStyle:t.endpointStyle||t.paintStyle||t.style||this._jsPlumb.instance.Defaults.EndpointStyle||e.Defaults.EndpointStyle,hoverPaintStyle:t.endpointHoverStyle||t.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||e.Defaults.EndpointHoverStyle,connectorStyle:t.connectorStyle,connectorHoverStyle:t.connectorHoverStyle,connectorClass:t.connectorClass,connectorHoverClass:t.connectorHoverClass,connectorOverlays:t.connectorOverlays,connector:t.connector,connectorTooltip:t.connectorTooltip}),this._jsPlumb.enabled=!(!1===t.enabled),this._jsPlumb.visible=!0,this.element=e.getElement(t.source),this._jsPlumb.uuid=t.uuid,this._jsPlumb.floatingEndpoint=null;var h=null;this._jsPlumb.uuid&&(t.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=t.elementId,this._jsPlumb.connectionCost=t.connectionCost,this._jsPlumb.connectionsDirected=t.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var p=function(){var t=c.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var e=c.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"_"+this._jsPlumb.currentAnchorClass:"");this.removeClass(t),this.addClass(e),jsPlumb.updateClasses(this.element,e,t)}.bind(this);this.prepareAnchor=function(t){var e=this._jsPlumb.instance.makeAnchor(t,this.elementId,c);return e.bind("anchorChanged",function(t){this.fire("anchorChanged",{endpoint:this,anchor:t}),p()}.bind(this)),e},this.setPreparedAnchor=function(t,e){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=t,p(),e||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(t,e){var n=this.prepareAnchor(t);return this.setPreparedAnchor(n,e),this};var f=function(t){if(this.connections.length>0)for(var e=0;e<this.connections.length;e++)this.connections[e].setHover(t,!1);else this.setHover(t)}.bind(this);this.bind("mouseover",function(){f(!0)}),this.bind("mouseout",function(){f(!1)}),t._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.prepareEndpoint=function(i,o){var s,r=function(t,n){var i=c.getRenderMode();if(e.Endpoints[i][t])return new e.Endpoints[i][t](n);if(!c.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+t+"'"}},a={_jsPlumb:this._jsPlumb.instance,cssClass:t.cssClass,container:t.container,tooltip:t.tooltip,connectorTooltip:t.connectorTooltip,endpoint:this};return n.isString(i)?s=r(i,a):n.isArray(i)?(a=n.merge(i[1],a),s=r(i[0],a)):s=i.clone(),s.clone=function(){return n.isString(i)?r(i,a):n.isArray(i)?(a=n.merge(i[1],a),r(i[0],a)):void 0}.bind(this),s.typeId=o,s},this.setEndpoint=function(t){var e=this.prepareEndpoint(t);this.setPreparedEndpoint(e,!0)},this.setPreparedEndpoint=function(t){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=t,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},e.extend(this,t,r),this.isSource=t.isSource||!1,this.isTemporarySource=t.isTemporarySource||!1,this.isTarget=t.isTarget||!1,this.connections=t.connections||[],this.connectorPointerEvents=t["connector-pointer-events"],this.scope=t.scope||c.getDefaultScope(),this.timestamp=null,this.reattachConnections=t.reattach||c.Defaults.ReattachConnections,this.connectionsDetachable=c.Defaults.ConnectionsDetachable,!1!==t.connectionsDetachable&&!1!==t.detachable||(this.connectionsDetachable=!1),this.dragAllowedWhenFull=!1!==t.dragAllowedWhenFull,t.onMaxConnections&&this.bind("maxConnections",t.onMaxConnections),this.addConnection=function(t){this.connections.push(t),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)},this.detachFromConnection=function(t,e,n){(e=null==e?l(t,this):e)>=0&&(this.connections.splice(e,1),this[(this.connections.length>0?"add":"remove")+"Class"](c.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](c.endpointFullClass)),!n&&this._deleteOnDetach&&0===this.connections.length&&c.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(t,e,n,i,o,s,r){var a=!1;return i=!1!==i,(null==r?l(t,this):r)>=0&&(n||t._forceDetach||t.isDetachable()&&t.isDetachAllowed(t)&&this.isDetachAllowed(t)&&c.checkCondition("beforeDetach",t,s))&&(c.deleteObject({connection:t,fireEvent:!e&&i,originalEvent:o,deleteAttachedObjects:!1}),a=!0),a},this.detachAll=function(t,e){for(var n=[];this.connections.length>0;){this.detach(this.connections[0],!1,!0===e,!1!==t,null,this,0)||(n.push(this.connections[0]),this.connections.splice(0,1))}return this.connections=n,this},this.detachFrom=function(t,e,n){for(var i=[],o=0;o<this.connections.length;o++)this.connections[o].endpoints[1]!=t&&this.connections[o].endpoints[0]!=t||i.push(this.connections[o]);for(var s=0;s<i.length;s++)this.detach(i[s],!1,!0,e,n);return this},this.getElement=function(){return this.element},this.setElement=function(e){var i=this._jsPlumb.instance.getId(e),o=this.elementId;return n.removeWithFunction(t.endpointsByElement[this.elementId],function(t){return t.id==this.id}.bind(this)),this.element=jsPlumb.getElement(e),this.elementId=c.getId(this.element),c.anchorManager.rehomeEndpoint(this,o,this.element),c.dragManager.endpointAdded(this.element),n.addToList(t.endpointsByElement,i,this),this},this.makeInPlaceCopy=function(){var e=this.anchor.getCurrentLocation({element:this}),n=this.anchor.getOrientation(this),i=this.anchor.getCssClass(),o={bind:function(){},compute:function(){return[e[0],e[1]]},getCurrentLocation:function(){return[e[0],e[1]]},getOrientation:function(){return n},getCssClass:function(){return i}};return d({dropOptions:t.dropOptions,anchor:o,source:this.element,paintStyle:this.getPaintStyle(),endpoint:t.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){var t=this.connections[0];return t||(this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:t)},this.setStyle=this.setPaintStyle,this.paint=function(t){var e=(t=t||{}).timestamp,n=!(!1===t.recalc);if(!e||this.timestamp!==e){var i=c.updateOffset({elId:this.elementId,timestamp:e}),o=t.offset?t.offset.o:i.o;if(null!=o){var s=t.anchorPoint,r=t.connectorPaintStyle;if(null==s){var l=t.dimensions||i.s,u={xy:[o.left,o.top],wh:l,element:this,timestamp:e};if(n&&this.anchor.isDynamic&&this.connections.length>0){var d=a(this,t.elementWithPrecedence),h=d.endpoints[0]==this?1:0,p=0===h?d.sourceId:d.targetId,f=c.getCachedData(p),m=f.o,g=f.s;u.txy=[m.left,m.top],u.twh=g,u.tElement=d.endpoints[h]}s=this.anchor.compute(u)}for(var v in this.endpoint.compute(s,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,r||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=e,this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(v)){var y=this._jsPlumb.overlays[v];y.isVisible()&&(this._jsPlumb.overlayPlacements[v]=y.draw(this.endpoint,this._jsPlumb.paintStyleInUse),y.paint(this._jsPlumb.overlayPlacements[v]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var m=!1;this.initDraggable=function(r){if(!m&&e.isDragSupported(this.element)){var a={id:null,element:null},l=null,p=!1,f=null,g=i(a,c),v=t.dragOptions||{},y={},b=e.dragEvents.start,_=e.dragEvents.stop,w=e.dragEvents.drag,C=function(){l=this.connectorSelector();var e=!0;this.isEnabled()||(e=!1),null!=l||this.isSource||this.isTemporarySource||(e=!1),!this.isSource||!this.isFull()||null!=l&&this.dragAllowedWhenFull||(e=!1),null==l||l.isDetachable(this)||(e=!1);var i=c.checkCondition(null==l?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:l});if(!1===i&&(e=!1),!1===e)return c.stopDrag&&c.stopDrag(this.canvas),g.stopDrag(),!1;for(var r=0;r<this.connections.length;r++)this.connections[r].setHover(!1);this.addClass("endpointDrag"),c.setConnectionBeingDragged(!0),l&&!this.isFull()&&this.isSource&&(l=null),c.updateOffset({elId:this.elementId}),(h=this.makeInPlaceCopy()).addClass(c.draggingClass),h.referenceEndpoint=this,h.paint(),o(a,c);var m=this._jsPlumb.instance.getOffset(h.canvas),v=this.canvas;if(jsPlumb.setPosition(a.element,m),this.parentAnchor&&(this.anchor=c.makeAnchor(this.parentAnchor,this.elementId,c)),c.setAttributes(this.canvas,{dragId:a.id,elId:this.elementId}),this._jsPlumb.floatingEndpoint=s(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,a.element,c,d,this.scope),this.canvas.style.visibility="hidden",null==l)this.anchor.locked=!0,this.setHover(!1,!1),(l=u({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:a.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:t.connectorStyle,hoverPaintStyle:t.connectorHoverStyle,connector:t.connector,overlays:t.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,data:i})).addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass),c.fire("connectionDrag",l);else{p=!0,l.setHover(!1);var y=l.endpoints[0].id==this.id?0:1;this.detachFromConnection(l,null,!0);var b=c.getDragScope(v);c.setAttribute(this.canvas,"originalScope",b);var _=c.getDropScope(v);c.setDragScope(v,_),c.fire("connectionDrag",l),0===y?(f=[l.source,l.sourceId,v,b],l.source=a.element,l.sourceId=a.id):(f=[l.target,l.targetId,v,b],l.target=a.element,l.targetId=a.id),l.endpoints[0===y?1:0].anchor.locked=!0,l.suspendedEndpoint=l.endpoints[y],l.suspendedElement=l.endpoints[y].getElement(),l.suspendedElementId=l.endpoints[y].elementId,l.suspendedElementType=0===y?"source":"target",l.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=l.suspendedEndpoint,l.endpoints[y]=this._jsPlumb.floatingEndpoint,l.addClass(c.draggingClass),this._jsPlumb.floatingEndpoint.addClass(c.draggingClass)}c.floatingConnections[a.id]=l,c.anchorManager.addFloatingConnection(a.id,l),n.addToList(t.endpointsByElement,a.id,this._jsPlumb.floatingEndpoint),c.currentlyDragging=!0}.bind(this),j=function(){if(c.setConnectionBeingDragged(!1),l&&null!=l.endpoints){var t=c.getDropEvent(arguments),e=c.getFloatingAnchorIndex(l);if(l.endpoints[0===e?1:0].anchor.locked=!1,l.removeClass(c.draggingClass),this._jsPlumb&&(l.deleteConnectionNow||l.endpoints[e]==this._jsPlumb.floatingEndpoint)&&p&&l.suspendedEndpoint){0===e?(l.source=f[0],l.sourceId=f[1]):(l.target=f[0],l.targetId=f[1]);var n=this._jsPlumb.floatingEndpoint;c.setDragScope(f[2],f[3]),l.endpoints[e]=l.suspendedEndpoint,l.isReattach()||l._forceReattach||l._forceDetach||!l.endpoints[0===e?1:0].detach(l,!1,!1,!0,t,!0)?(l.setHover(!1),l._forceDetach=null,l._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(l),l.suspendedEndpoint.addConnection(l),c.repaint(f[1])):c.deleteObject({endpoint:n})}c.remove(a.element,!1),c.deleteObject({endpoint:h}),this.deleteAfterDragStop?c.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),c.fire("connectionDragStop",l,t),c.currentlyDragging=!1,l=null}}.bind(this);(v=e.extend(y,v)).scope=this.scope||v.scope,v[b]=n.wrap(v[b],C,!1),v[w]=n.wrap(v[w],g.drag),v[_]=n.wrap(v[_],j),v.multipleDrop=!1,v.definitionId=r,v.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0}.bind(this),c.initDraggable(this.canvas,v,"internal"),this.canvas._jsPlumbRelatedElement=this.element,m=!0}};var g=t.endpoint||this._jsPlumb.instance.Defaults.Endpoint||e.Defaults.Endpoint;this.setEndpoint(g,!0);var v=t.anchor?t.anchor:t.anchors?t.anchors:c.Defaults.Anchor||"Top";this.setAnchor(v,!0);var y=["default",t.type||""].join(" ");this.addType(y,t.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable(this.isTarget?"_jsPlumbTarget":"_jsPlumbSource");var b=function(i,o,s,r,a){if((this.isTarget||o)&&e.isDropSupported(this.element)){var l=t.dropOptions||c.Defaults.DropOptions||e.Defaults.DropOptions;(l=e.extend({},l)).scope=l.scope||this.scope;var u=e.dragEvents.drop,d=e.dragEvents.over,h=e.dragEvents.out,p=this,f=c.EndpointDropHandler({getEndpoint:function(){return p},jsPlumb:c,enabled:function(){return null==r||r.isEnabled()},isFull:function(){return r.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(t){p.addClass(t)},removeClass:function(t){p.removeClass(t)},isDropAllowed:function(){return p.isDropAllowed.apply(p,arguments)},reference:a,isRedrop:function(t,e){return t.suspendedEndpoint&&e.reference&&t.suspendedEndpoint.id===e.reference.id}});l[u]=n.wrap(l[u],f,!0),l[d]=n.wrap(l[d],function(){var t=e.getDragObject(arguments),n=c.getAttribute(e.getElement(t),"dragId"),i=c.floatingConnections[n];if(null!=i){var o=c.getFloatingAnchorIndex(i);if(this.isTarget&&0!==o||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==i.suspendedEndpoint.id){var s=c.checkCondition("checkDropAllowed",{sourceEndpoint:i.endpoints[o],targetEndpoint:this,connection:i});this[(s?"add":"remove")+"Class"](c.endpointDropAllowedClass),this[(s?"remove":"add")+"Class"](c.endpointDropForbiddenClass),i.endpoints[o].anchor.over(this.anchor,this)}}}.bind(this)),l[h]=n.wrap(l[h],function(){var t=e.getDragObject(arguments),n=null==t?null:c.getAttribute(e.getElement(t),"dragId"),i=n?c.floatingConnections[n]:null;if(null!=i){var o=c.getFloatingAnchorIndex(i);(this.isTarget&&0!==o||i.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==i.suspendedEndpoint.id)&&(this.removeClass(c.endpointDropAllowedClass),this.removeClass(c.endpointDropForbiddenClass),i.endpoints[o].anchor.out())}}.bind(this)),c.initDroppable(i,l,"internal",s)}}.bind(this);return this.anchor.isFloating||b(this.canvas,!0,!(t._transient||this.anchor.isFloating),this,t.reference),this},n.extend(e.Endpoint,e.OverlayCapableJsPlumbUIComponent,{setVisible:function(t,e,n){if(this._jsPlumb.visible=t,this.canvas&&(this.canvas.style.display=t?"block":"none"),this[t?"showOverlays":"hideOverlays"](),!e)for(var i=0;i<this.connections.length;i++)if(this.connections[i].setVisible(t),!n){var o=this===this.connections[i].endpoints[0]?1:0;1==this.connections[i].endpoints[o].connections.length&&this.connections[i].endpoints[o].setVisible(t,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(t,n){this.setPaintStyle(t.endpointStyle||t.paintStyle,n),this.setHoverPaintStyle(t.endpointHoverStyle||t.hoverPaintStyle,n),null!=t.maxConnections&&(this._jsPlumb.maxConnections=t.maxConnections),t.scope&&(this.scope=t.scope),e.extend(this,t,r),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(t){this._jsPlumb.enabled=t},cleanup:function(){var t=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"_"+this._jsPlumb.currentAnchorClass:"");jsPlumb.removeClass(this.element,t),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(t){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(t)},isFull:function(){return 0===this._jsPlumb.maxConnections||!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(t){var e=!1;if(t)for(var n=0;n<this.connections.length;n++)if(this.connections[n].endpoints[1]==t||this.connections[n].endpoints[0]==t){e=!0;break}return e},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(t){this._jsPlumb.connectionCost=t},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(t){this._jsPlumb.connectionsDirected=t},setElementId:function(t){this.elementId=t,this.anchor.elementId=t},setReferenceElement:function(t){this.element=e.getElement(t)},setDragAllowedWhenFull:function(t){this.dragAllowedWhenFull=t},equals:function(t){return this.anchor.equals(t.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(t){return this.anchor.compute(t)}}),t.jsPlumbInstance.prototype.EndpointDropHandler=function(t){return function(e){var n=t.jsPlumb;t.removeClass(n.endpointDropAllowedClass),t.removeClass(n.endpointDropForbiddenClass);var i=n.getDropEvent(arguments),o=n.getDragObject(arguments),s=n.getAttribute(o,"dragId"),r=(n.getAttribute(o,"elId"),n.getAttribute(o,"originalScope")),a=n.floatingConnections[s];if(null!=a&&!(e.drag&&e.drop&&e.drag.params.definitionId===e.drop.params.definitionId&&null==a.suspendedEndpoint||a.suspendedEndpoint&&null==a.suspendedEndpoint._jsPlumb)){var l=t.getEndpoint(a);if(t.isRedrop(a,t))return a._forceReattach=!0,a.setHover(!1),void(t.maybeCleanup&&t.maybeCleanup(l));var c=n.getFloatingAnchorIndex(a);if((0!==c||t.isSource)&&(1!==c||t.isTarget)){if(t.onDrop&&t.onDrop(a),r&&n.setDragScope(o,r),t.isFull(e)&&l.fire("maxConnections",{endpoint:this,connection:a,maxConnections:l._jsPlumb.maxConnections},i),!t.isFull()&&(0!==c||t.isSource)&&(1!=c||t.isTarget)&&t.enabled()){var u=!0;0===c?(a.source=t.element,a.sourceId=t.elementId):(a.target=t.element,a.targetId=t.elementId),a.suspendedEndpoint&&a.suspendedEndpoint._jsPlumb&&a.suspendedEndpoint.id!=l.id&&(a.isDetachAllowed(a)&&a.endpoints[c].isDetachAllowed(a)&&a.suspendedEndpoint.isDetachAllowed(a)&&n.checkCondition("beforeDetach",a)||(u=!1));var d=function(t){a.endpoints[c].detachFromConnection(a),a.suspendedEndpoint&&a.suspendedEndpoint.detachFromConnection(a),a.endpoints[c]=l,l.addConnection(a);var e=l.getParameters();for(var o in e)a.setParameter(o,e[o]);if(a.suspendedEndpoint){var s=a.suspendedEndpoint.elementId;n.fireMoveEvent({index:c,originalSourceId:0===c?s:a.sourceId,newSourceId:0===c?l.elementId:a.sourceId,originalTargetId:1==c?s:a.targetId,newTargetId:1==c?l.elementId:a.targetId,originalSourceEndpoint:0===c?a.suspendedEndpoint:a.endpoints[0],newSourceEndpoint:0===c?l:a.endpoints[0],originalTargetEndpoint:1==c?a.suspendedEndpoint:a.endpoints[1],newTargetEndpoint:1==c?l:a.endpoints[1],connection:a},i)}else e.draggable&&n.initDraggable(this.element,dragOptions,"internal",n);(1==c?n.anchorManager.updateOtherEndpoint(a.sourceId,a.suspendedElementId,a.targetId,a):n.anchorManager.sourceChanged(a.suspendedEndpoint.elementId,a.sourceId,a),a.endpoints[0].finalEndpoint)&&(a.endpoints[0].detachFromConnection(a),a.endpoints[0]=a.endpoints[0].finalEndpoint,a.endpoints[0].addConnection(a));jsPlumbUtil.isObject(t)&&a.mergeData(t),n.finaliseConnection(a,null,i),a.setHover(!1)}.bind(this),h=function(){a.suspendedEndpoint&&(a.endpoints[c]=a.suspendedEndpoint,a.setHover(!1),a._forceDetach=!0,0===c?(a.source=a.suspendedEndpoint.element,a.sourceId=a.suspendedEndpoint.elementId):(a.target=a.suspendedEndpoint.element,a.targetId=a.suspendedEndpoint.elementId),a.suspendedEndpoint.addConnection(a),n.repaint(a.sourceId),a._forceDetach=!1)};if(u=u&&t.isDropAllowed(a.sourceId,a.targetId,a.scope,a,l))return d(u),!0;h()}t.maybeCleanup&&t.maybeCleanup(l),n.currentlyDragging=!1}}}}}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=function(t,n,i,o,s){if(!t.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[n][i])throw{msg:"jsPlumb: unknown connector type '"+i+"'"};return new e.Connectors[n][i](o,s)},o=function(t,e,n){return t?n.makeAnchor(t,e,n):null},s=function(t,e,i,o){null!=e&&(e._jsPlumbConnections=e._jsPlumbConnections||{},o?delete e._jsPlumbConnections[t.id]:e._jsPlumbConnections[t.id]=!0,n.isEmpty(e._jsPlumbConnections)?i.removeClass(e,i.connectedClass):i.addClass(e,i.connectedClass))};e.Connection=function(t){var i=t.newEndpoint;this.id=t.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=t.previousConnection,this.source=e.getElement(t.source),this.target=e.getElement(t.target),t.sourceEndpoint&&(this.source=t.sourceEndpoint.getElement()),t.targetEndpoint&&(this.target=t.targetEndpoint.getElement()),e.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=t.scope,this.endpoints=[],this.endpointStyles=[];var o=this._jsPlumb.instance;o.manage(this.sourceId,this.source),o.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=!0===t.editable,this._jsPlumb.params={cssClass:t.cssClass,container:t.container,"pointer-events":t["pointer-events"],editorParams:t.editorParams,overlays:t.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(e,n,s,r){return s=s||this._jsPlumb.instance.getId(n),this.prepareEndpoint(o,i,this,r,e?0:1,t,n,s)};var s=this.makeEndpoint(!0,this.source,this.sourceId,t.sourceEndpoint),r=this.makeEndpoint(!1,this.target,this.targetId,t.targetEndpoint);s&&n.addToList(t.endpointsByElement,this.sourceId,s),r&&n.addToList(t.endpointsByElement,this.targetId,r),this.scope||(this.scope=this.endpoints[0].scope),null!=t.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=t.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=t.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0));var a=o.Defaults.ConnectionsDetachable;!1===t.detachable&&(a=!1),!1===this.endpoints[0].connectionsDetachable&&(a=!1),!1===this.endpoints[1].connectionsDetachable&&(a=!1);var l=t.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||o.Defaults.ReattachConnections;this.appendToDefaultType({detachable:a,rettach:l,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||t.paintStyle||o.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||t.hoverPaintStyle||o.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle});var c=o.getSuspendedAt();if(!o.isSuspendDrawing()){var u=o.getCachedData(this.sourceId),d=u.o,h=u.s,p=o.getCachedData(this.targetId),f=p.o,m=p.s,g=c||o.timestamp(),v=this.endpoints[0].anchor.compute({xy:[d.left,d.top],wh:h,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[f.left,f.top],twh:m,tElement:this.endpoints[1],timestamp:g});this.endpoints[0].paint({anchorLoc:v,timestamp:g}),v=this.endpoints[1].anchor.compute({xy:[f.left,f.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[d.left,d.top],twh:h,tElement:this.endpoints[0],timestamp:g}),this.endpoints[1].paint({anchorLoc:v,timestamp:g})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(){return!0===this._jsPlumb.detachable},this.setDetachable=function(t){this._jsPlumb.detachable=!0===t},this.isReattach=function(){return!0===this._jsPlumb.reattach||!0===this.endpoints[0].reattachConnections||!0===this.endpoints[1].reattachConnections},this.setReattach=function(t){this._jsPlumb.reattach=!0===t},this._jsPlumb.cost=t.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=t.directed,null==t.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var y=jsPlumb.extend({},this.endpoints[1].getParameters());e.extend(y,this.endpoints[0].getParameters()),e.extend(y,this.getParameters()),this.setParameters(y),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||t.connector||o.Defaults.Connector||e.Defaults.Connector,!0);var b=null!=t.data&&jsPlumbUtil.isObject(t.data)?t.data:{};this.getData=function(){return b},this.setData=function(t){b=t||{}},this.mergeData=function(t){b=jsPlumb.extend(b,t)};var _=["default",t.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[^\s]/.test(_)&&this.addType(_,t.data,!0),this.updateConnectedClass()},n.extend(e.Connection,e.OverlayCapableJsPlumbUIComponent,{applyType:function(t,n,i){null!=t.detachable&&this.setDetachable(t.detachable),null!=t.reattach&&this.setReattach(t.reattach),t.scope&&(this.scope=t.scope),null!=t.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,t.cssClass);var o=null;t.anchor?null==(o=this.getCachedTypeItem("anchors",i.anchor))&&(o=[this._jsPlumb.instance.makeAnchor(t.anchor),this._jsPlumb.instance.makeAnchor(t.anchor)],this.cacheTypeItem("anchors",o,i.anchor)):t.anchors&&null==(o=this.getCachedTypeItem("anchors",i.anchors))&&(o=[this._jsPlumb.instance.makeAnchor(t.anchors[0]),this._jsPlumb.instance.makeAnchor(t.anchors[1])],this.cacheTypeItem("anchors",o,i.anchors)),null!=o&&(this.endpoints[0].anchor=o[0],this.endpoints[1].anchor=o[1]),e.OverlayCapableJsPlumbUIComponent.applyType(this,t)},addClass:function(t,e){e&&(this.endpoints[0].addClass(t),this.endpoints[1].addClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(t)),this.connector&&this.connector.addClass(t)},removeClass:function(t,e){e&&(this.endpoints[0].removeClass(t),this.endpoints[1].removeClass(t),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(t)),this.connector&&this.connector.removeClass(t)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(t){this._jsPlumb.visible=t,this.connector&&this.connector.setVisible(t),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(t){s(this,this.source,this._jsPlumb.instance,t),s(this,this.target,this._jsPlumb.instance,t)},setHover:function(e){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(e),t.jsPlumb[e?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),t.jsPlumb[e?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb.cost},setCost:function(t){this._jsPlumb.cost=t},isDirected:function(){return!0===this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(t,e){var o,s={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},r=this._jsPlumb.instance.getRenderMode();return n.isString(t)?o=i(this._jsPlumb.instance,r,t,s,this):n.isArray(t)&&(o=1==t.length?i(this._jsPlumb.instance,r,t[0],s,this):i(this._jsPlumb.instance,r,t[0],n.merge(t[1],s),this)),null!=e&&(o.typeId=e),o},setPreparedConnector:function(t,e,n,i){var o;if(null!=this.connector&&(o=this.connector,this.connector.cleanup(),this.connector.destroy()),this.connector=t,i&&this.cacheTypeItem("connector",t,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),null!=o)for(var s=this.getOverlays(),r=0;r<s.length;r++)s[r].transfer&&s[r].transfer(this.connector);n||this.setListenerComponent(this.connector),e||this.repaint()},setConnector:function(t,e,n,i){var o=this.prepareConnector(t,i);this.setPreparedConnector(o,e,n,i)},paint:function(t){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){var e=(t=t||{}).timestamp,n=!1,i=n?this.sourceId:this.targetId,o=n?this.targetId:this.sourceId,s=n?0:1,r=n?1:0;if(null==e||e!=this._jsPlumb.lastPaintedAt){var a=this._jsPlumb.instance.updateOffset({elId:o}).o,l=this._jsPlumb.instance.updateOffset({elId:i}).o,c=this.endpoints[r],u=this.endpoints[s],d=c.anchor.getCurrentLocation({xy:[a.left,a.top],wh:[a.width,a.height],element:c,timestamp:e}),h=u.anchor.getCurrentLocation({xy:[l.left,l.top],wh:[l.width,l.height],element:u,timestamp:e});this.connector.resetBounds(),this.connector.compute({sourcePos:d,targetPos:h,sourceEndpoint:this.endpoints[r],targetEndpoint:this.endpoints[s],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:a,targetInfo:l});var p={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity};for(var f in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(f)){var m=this._jsPlumb.overlays[f];m.isVisible()&&(this._jsPlumb.overlayPlacements[f]=m.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(m)),p.minX=Math.min(p.minX,this._jsPlumb.overlayPlacements[f].minX),p.maxX=Math.max(p.maxX,this._jsPlumb.overlayPlacements[f].maxX),p.minY=Math.min(p.minY,this._jsPlumb.overlayPlacements[f].minY),p.maxY=Math.max(p.maxY,this._jsPlumb.overlayPlacements[f].maxY))}var g=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,v=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),y={xmin:Math.min(this.connector.bounds.minX-(g+v),p.minX),ymin:Math.min(this.connector.bounds.minY-(g+v),p.minY),xmax:Math.max(this.connector.bounds.maxX+(g+v),p.maxX),ymax:Math.max(this.connector.bounds.maxY+(g+v),p.maxY)};for(var b in this.connector.paint(this._jsPlumb.paintStyleInUse,null,y),this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var _=this._jsPlumb.overlays[b];_.isVisible()&&_.paint(this._jsPlumb.overlayPlacements[b],y)}}this._jsPlumb.lastPaintedAt=e}},repaint:function(t){t=t||{},this.paint({elId:this.sourceId,recalc:!(!1===t.recalc),timestamp:t.timestamp})},prepareEndpoint:function(t,n,i,s,r,a,l,c){var u;if(s)i.endpoints[r]=s,s.addConnection(i);else{a.endpoints||(a.endpoints=[null,null]);var d=a.endpoints[r]||a.endpoint||t.Defaults.Endpoints[r]||jsPlumb.Defaults.Endpoints[r]||t.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;a.endpointStyles||(a.endpointStyles=[null,null]),a.endpointHoverStyles||(a.endpointHoverStyles=[null,null]);var h=a.endpointStyles[r]||a.endpointStyle||t.Defaults.EndpointStyles[r]||jsPlumb.Defaults.EndpointStyles[r]||t.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==h.fillStyle&&null!=a.paintStyle&&(h.fillStyle=a.paintStyle.strokeStyle),null==h.outlineColor&&null!=a.paintStyle&&(h.outlineColor=a.paintStyle.outlineColor),null==h.outlineWidth&&null!=a.paintStyle&&(h.outlineWidth=a.paintStyle.outlineWidth);var p=a.endpointHoverStyles[r]||a.endpointHoverStyle||t.Defaults.EndpointHoverStyles[r]||jsPlumb.Defaults.EndpointHoverStyles[r]||t.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=a.hoverPaintStyle&&(null==p&&(p={}),null==p.fillStyle&&(p.fillStyle=a.hoverPaintStyle.strokeStyle))
;var f=a.anchors?a.anchors[r]:a.anchor?a.anchor:o(t.Defaults.Anchors[r],c,t)||o(e.Defaults.Anchors[r],c,t)||o(t.Defaults.Anchor,c,t)||o(e.Defaults.Anchor,c,t);u=n({paintStyle:h,hoverPaintStyle:p,endpoint:d,connections:[i],uuid:a.uuids?a.uuids[r]:null,anchor:f,source:l,scope:a.scope,reattach:a.reattach||t.Defaults.ReattachConnections,detachable:a.detachable||t.Defaults.ConnectionsDetachable}),i.endpoints[r]=u,!1===a.drawEndpoints&&u.setVisible(!1,!0,!0)}return u}})}.call(this),function(){"use strict";var t=this,e=t.jsPlumbUtil,n=t.jsPlumb;n.AnchorManager=function(t){var i={},o={},s={},r={},a={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},l=["left","top","right","bottom"],c={},u=this,d={},h=t.jsPlumbInstance,p={},f=function(t,e,n,i,o,s){if(t===e)return{orientation:a.IDENTITY,a:["top","top"]};var r=Math.atan2(i.centery-n.centery,i.centerx-n.centerx),c=Math.atan2(n.centery-i.centery,n.centerx-i.centerx),u=[],d={};!function(t,e){for(var n=0;n<t.length;n++)d[t[n]]={left:[e[n].left,e[n].centery],right:[e[n].right,e[n].centery],top:[e[n].centerx,e[n].top],bottom:[e[n].centerx,e[n].bottom]}}(["source","target"],[n,i]);for(var h=0;h<l.length;h++)for(var p=0;p<l.length;p++)h!=p&&u.push({source:l[h],target:l[p],dist:Biltong.lineLength(d.source[l[h]],d.target[l[p]])});u.sort(function(t,e){return t.dist<e.dist?-1:t.dist>e.dist?1:0});for(var f=u[0].source,m=u[0].target,g=0;g<u.length&&(f=!o.isContinuous||o.isEdgeSupported(u[g].source)?u[g].source:null,m=!s.isContinuous||s.isEdgeSupported(u[g].target)?u[g].target:null,null==f||null==m);g++);return{a:[f,m],theta:r,theta2:c}},m=function(t,e,n,i,o,s,r){for(var a=[],l=e[o?0:1]/(i.length+1),c=0;c<i.length;c++){var u=(c+1)*l,d=s*e[o?1:0];r&&(u=e[o?0:1]-u);var h=o?u:d,p=n[0]+h,f=h/e[0],m=o?d:u,g=n[1]+m,v=m/e[1];a.push([p,g,f,v,i[c][1],i[c][2]])}return a},g=function(t){return function(e,n){return!1===(t?e[0][0]<n[0][0]:e[0][0]>n[0][0])?-1:1}},v=function(t,e){return(t[0][0]<0?-Math.PI-t[0][0]:Math.PI-t[0][0])>(e[0][0]<0?-Math.PI-e[0][0]:Math.PI-e[0][0])?1:t[0][1]>e[0][1]?1:-1},y={top:function(t,e){return t[0]>e[0]?1:-1},right:g(!0),bottom:g(!0),left:v},b=function(t,e){return t.sort(e)},_=function(t,e){var n=h.getCachedData(t),i=n.s,s=n.o,a=function(e,n,i,s,a,l,c){if(s.length>0)for(var u=b(s,y[e]),d=m(e,n,i,u,a,l,"right"===e||"top"===e),h=function(t,e){o[t.id]=[e[0],e[1],e[2],e[3]],r[t.id]=c},p=0;p<d.length;p++){var f=d[p][4],g=f.endpoints[0].elementId===t,v=f.endpoints[1].elementId===t;g?h(f.endpoints[0],d[p]):v&&h(f.endpoints[1],d[p])}};a("bottom",i,[s.left,s.top],e.bottom,!0,1,[0,1]),a("top",i,[s.left,s.top],e.top,!0,0,[0,-1]),a("left",i,[s.left,s.top],e.left,!1,0,[-1,0]),a("right",i,[s.left,s.top],e.right,!1,1,[1,0])};this.reset=function(){i={},c={},d={}},this.addFloatingConnection=function(t,e){p[t]=e},this.removeFloatingConnection=function(t){delete p[t]},this.newConnection=function(t){var i=t.sourceId,o=t.targetId,s=t.endpoints,r=!0,a=function(a,l,u,d,h){i==o&&u.isContinuous&&(t._jsPlumb.instance.removeElement(s[1].canvas),r=!1),e.addToList(c,d,[h,l,u.constructor==n.DynamicAnchor])};a(0,s[0],s[0].anchor,o,t),r&&a(1,s[1],s[1].anchor,i,t)};var w=function(t){!function(t,n){if(t){var i=function(t){return t[4]==n};e.removeWithFunction(t.top,i),e.removeWithFunction(t.left,i),e.removeWithFunction(t.bottom,i),e.removeWithFunction(t.right,i)}}(d[t.elementId],t.id)};this.connectionDetached=function(t){var i=t.connection||t,o=t.sourceId,s=t.targetId,r=i.endpoints,a=function(t,i,o,s,r){null!=o&&o.constructor==n.FloatingAnchor||e.removeWithFunction(c[s],function(t){return t[0].id==r.id})};a(1,r[1],r[1].anchor,o,i),a(0,r[0],r[0].anchor,s,i),w(i.endpoints[0]),w(i.endpoints[1]),u.redraw(i.sourceId),u.redraw(i.targetId)},this.add=function(t,n){e.addToList(i,n,t)},this.changeId=function(t,e){c[e]=c[t],i[e]=i[t],delete c[t],delete i[t]},this.getConnectionsFor=function(t){return c[t]||[]},this.getEndpointsFor=function(t){return i[t]||[]},this.deleteEndpoint=function(t){e.removeWithFunction(i[t.elementId],function(e){return e.id==t.id}),w(t)},this.clearFor=function(t){delete i[t],i[t]=[]};var C=function(n,i,o,s,r,a,l,c,u,d,h,p){var f,m,g=-1,v=-1,y=s.endpoints[l],b=y.id,_=[1,0][l],w=[[i,o],s,r,a,b],C=n[u],j=y._continuousAnchorEdge?n[y._continuousAnchorEdge]:null;if(j){var S=e.findWithFunction(j,function(t){return t[4]==b});if(-1!=S)for(j.splice(S,1),f=0;f<j.length;f++)m=j[f][1],e.addWithFunction(h,m,function(t){return t.id==m.id}),e.addWithFunction(p,j[f][1].endpoints[l],function(t){return t.id==m.endpoints[l].id}),e.addWithFunction(p,j[f][1].endpoints[_],function(t){return t.id==m.endpoints[_].id})}for(f=0;f<C.length;f++)m=C[f][1],1==t.idx&&C[f][3]===a&&-1==v&&(v=f),e.addWithFunction(h,m,function(t){return t.id==m.id}),e.addWithFunction(p,C[f][1].endpoints[l],function(t){return t.id==m.endpoints[l].id}),e.addWithFunction(p,C[f][1].endpoints[_],function(t){return t.id==m.endpoints[_].id});if(-1!=g)C[g]=w;else{var x=c?-1!=v?v:0:C.length;C.splice(x,0,w)}y._continuousAnchorEdge=u};this.updateOtherEndpoint=function(t,i,o,s){var r=e.findWithFunction(c[t],function(t){return t[0].id===s.id}),a=e.findWithFunction(c[i],function(t){return t[0].id===s.id});-1!=r&&(c[t][r][0]=s,c[t][r][1]=s.endpoints[1],c[t][r][2]=s.endpoints[1].anchor.constructor==n.DynamicAnchor),a>-1&&(c[i].splice(a,1),e.addToList(c,o,[s,s.endpoints[0],s.endpoints[0].anchor.constructor==n.DynamicAnchor])),s.updateConnectedClass()},this.sourceChanged=function(t,i,o){if(t!==i){e.removeWithFunction(c[t],function(t){return t[0].id===o.id});var s=e.findWithFunction(c[o.targetId],function(t){return t[0].id===o.id});s>-1&&(c[o.targetId][s][0]=o,c[o.targetId][s][1]=o.endpoints[0],c[o.targetId][s][2]=o.endpoints[0].anchor.constructor==n.DynamicAnchor),e.addToList(c,i,[o,o.endpoints[1],o.endpoints[1].anchor.constructor==n.DynamicAnchor]),o.updateConnectedClass()}},this.rehomeEndpoint=function(t,n,o){var s=i[n]||[],r=h.getId(o);if(r!==n){var a=e.indexOf(s,t);if(a>-1){var l=s.splice(a,1)[0];u.add(l,r)}}for(var c=0;c<t.connections.length;c++)t.connections[c].sourceId==n?(t.connections[c].sourceId=t.elementId,t.connections[c].source=t.element,u.sourceChanged(n,t.elementId,t.connections[c])):t.connections[c].targetId==n&&(t.connections[c].targetId=t.elementId,t.connections[c].target=t.element,u.updateOtherEndpoint(t.connections[c].sourceId,n,t.elementId,t.connections[c]))},this.redraw=function(t,o,s,r,a,l){if(!h.isSuspendDrawing()){var u=i[t]||[],m=c[t]||[],g=[],v=[],y=[];s=s||h.timestamp(),r=r||{left:0,top:0},o&&(o={left:o.left+r.left,top:o.top+r.top});for(var b=h.updateOffset({elId:t,offset:o,recalc:!1,timestamp:s}),w={},j=0;j<m.length;j++){var S=m[j][0],x=S.sourceId,P=S.targetId,k=S.endpoints[0].anchor.isContinuous,T=S.endpoints[1].anchor.isContinuous;if(k||T){var E=x+"_"+P,D=w[E],A=S.sourceId==t?1:0;k&&!d[x]&&(d[x]={top:[],right:[],bottom:[],left:[]}),T&&!d[P]&&(d[P]={top:[],right:[],bottom:[],left:[]}),t!=P&&h.updateOffset({elId:P,timestamp:s}),t!=x&&h.updateOffset({elId:x,timestamp:s});var I=h.getCachedData(P),$=h.getCachedData(x);P==x&&(k||T)?C(d[x],-Math.PI/2,0,S,!1,P,0,!1,"top",x,g,v):(D||(D=f(x,P,$.o,I.o,S.endpoints[0].anchor,S.endpoints[1].anchor),w[E]=D),k&&C(d[x],D.theta,0,S,!1,P,0,!1,D.a[0],x,g,v),T&&C(d[P],D.theta2,-1,S,!0,x,1,!0,D.a[1],P,g,v)),k&&e.addWithFunction(y,x,function(t){return t===x}),T&&e.addWithFunction(y,P,function(t){return t===P}),e.addWithFunction(g,S,function(t){return t.id==S.id}),(k&&0===A||T&&1===A)&&e.addWithFunction(v,S.endpoints[A],function(t){return t.id==S.endpoints[A].id})}}for(j=0;j<u.length;j++)0===u[j].connections.length&&u[j].anchor.isContinuous&&(d[t]||(d[t]={top:[],right:[],bottom:[],left:[]}),C(d[t],-Math.PI/2,0,{endpoints:[u[j],u[j]],paint:function(){}},!1,t,0,!1,u[j].anchor.getDefaultFace(),t,g,v),e.addWithFunction(y,t,function(e){return e===t}));for(j=0;j<y.length;j++)_(y[j],d[y[j]]);for(j=0;j<u.length;j++)u[j].paint({timestamp:s,offset:b,dimensions:b.s,recalc:!0!==l});for(j=0;j<v.length;j++){var M=h.getCachedData(v[j].elementId);v[j].paint({timestamp:s,offset:M,dimensions:M.s})}for(j=0;j<m.length;j++){var L=m[j][1];if(L.anchor.constructor==n.DynamicAnchor){L.paint({elementWithPrecedence:t,timestamp:s}),e.addWithFunction(g,m[j][0],function(t){return t.id==m[j][0].id});for(var O=0;O<L.connections.length;O++)L.connections[O]!==m[j][0]&&e.addWithFunction(g,L.connections[O],function(t){return t.id==L.connections[O].id})}else L.anchor.constructor==n.Anchor&&e.addWithFunction(g,m[j][0],function(t){return t.id==m[j][0].id})}var Q=p[t];for(Q&&Q.paint({timestamp:s,recalc:!1,elId:t}),j=0;j<g.length;j++)g[j].paint({elId:t,timestamp:s,recalc:!1,clearEdits:a})}};var j=function(t){e.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var n=t.faces||["top","right","bottom","left"],i=!(!1===t.clockwise),a={},l={top:"bottom",right:"left",left:"right",bottom:"top"},c={top:"right",right:"bottom",left:"top",bottom:"left"},u={top:"left",right:"top",left:"bottom",bottom:"right"},d=i?c:u,h=i?u:c,p=t.cssClass||"",f=0;f<n.length;f++)a[n[f]]=!0;this.getDefaultFace=function(){return 0===n.length?"top":n[0]},this.verifyEdge=function(t){return a[t]?t:a[l[t]]?l[t]:a[d[t]]?d[t]:a[h[t]]?h[t]:t},this.isEdgeSupported=function(t){return!0===a[t]},this.compute=function(t){return s[t.element.id]||o[t.element.id]||[0,0]},this.getCurrentLocation=function(t){return s[t.element.id]||o[t.element.id]||[0,0]},this.getOrientation=function(t){return r[t.id]||[0,0]},this.clearUserDefinedLocation=function(){delete s[t.elementId]},this.setUserDefinedLocation=function(e){s[t.elementId]=e},this.getCssClass=function(){return p}};h.continuousAnchorFactory={get:function(t){return new j(t)},clear:function(t){delete s[t],delete o[t]}}},n.Anchor=function(t){this.x=t.x||0,this.y=t.y||0,this.elementId=t.elementId,this.cssClass=t.cssClass||"",this.userDefinedLocation=null,this.orientation=t.orientation||[0,0],this.lastReturnValue=null,this.offsets=t.offsets||[0,0],this.timestamp=null,e.EventGenerator.apply(this),this.compute=function(t){var e=t.xy,n=t.wh,i=t.timestamp;return t.clearUserDefinedLocation&&(this.userDefinedLocation=null),i&&i===self.timestamp?this.lastReturnValue:(null!=this.userDefinedLocation?this.lastReturnValue=this.userDefinedLocation:this.lastReturnValue=[e[0]+this.x*n[0]+this.offsets[0],e[1]+this.y*n[1]+this.offsets[1]],this.timestamp=i,this.lastReturnValue)},this.getCurrentLocation=function(t){return null==this.lastReturnValue||null!=t.timestamp&&this.timestamp!=t.timestamp?this.compute(t):this.lastReturnValue}},e.extend(n.Anchor,e.EventGenerator,{equals:function(t){if(!t)return!1;var e=t.getOrientation(),n=this.getOrientation();return this.x==t.x&&this.y==t.y&&this.offsets[0]==t.offsets[0]&&this.offsets[1]==t.offsets[1]&&n[0]==e[0]&&n[1]==e[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(t){this.userDefinedLocation=t},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),n.FloatingAnchor=function(t){n.Anchor.apply(this,arguments);var e=t.reference,i=t.referenceCanvas,o=n.getSize(i),s=0,r=0,a=null,l=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(t){var e=t.xy,n=[e[0]+o[0]/2,e[1]+o[1]/2];return l=n,n},this.getOrientation=function(t){if(a)return a;var n=e.getOrientation(t);return[Math.abs(n[0])*s*-1,Math.abs(n[1])*r*-1]},this.over=function(t,e){a=t.getOrientation(e)},this.out=function(){a=null},this.getCurrentLocation=function(t){return null==l?this.compute(t):l}},e.extend(n.FloatingAnchor,n.Anchor);var i=function(t,e,i){return t.constructor==n.Anchor?t:e.makeAnchor(t,i,e)};n.DynamicAnchor=function(t){n.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=t.elementId,this.jsPlumbInstance=t.jsPlumbInstance;for(var e=0;e<t.anchors.length;e++)this.anchors[e]=i(t.anchors[e],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors},this.locked=!1;var o=this.anchors.length>0?this.anchors[0]:null,s=o,r=this,a=function(t,e,n,i,o){var s=i[0]+t.x*o[0],r=i[1]+t.y*o[1],a=i[0]+o[0]/2,l=i[1]+o[1]/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(n-r,2))+Math.sqrt(Math.pow(a-s,2)+Math.pow(l-r,2))},l=t.selector||function(t,e,n,i,o){for(var s=n[0]+i[0]/2,r=n[1]+i[1]/2,l=-1,c=Infinity,u=0;u<o.length;u++){var d=a(o[u],s,r,t,e);d<c&&(l=u+0,c=d)}return o[l]};this.compute=function(t){var e=t.xy,n=t.wh,i=t.txy,a=t.twh;this.timestamp=t.timestamp;var c=r.getUserDefinedLocation();return null!=c?c:this.locked||null==i||null==a?o.compute(t):(t.timestamp=null,o=l(e,n,i,a,this.anchors),this.x=o.x,this.y=o.y,o!=s&&this.fire("anchorChanged",o),s=o,o.compute(t))},this.getCurrentLocation=function(t){return this.getUserDefinedLocation()||(null!=o?o.getCurrentLocation(t):null)},this.getOrientation=function(t){return null!=o?o.getOrientation(t):[0,0]},this.over=function(t,e){null!=o&&o.over(t,e)},this.out=function(){null!=o&&o.out()},this.getCssClass=function(){return o&&o.getCssClass()||""}},e.extend(n.DynamicAnchor,n.Anchor);var o=function(t,e,i,o,s,r){n.Anchors[s]=function(n){var a=n.jsPlumbInstance.makeAnchor([t,e,i,o,0,0],n.elementId,n.jsPlumbInstance);return a.type=s,r&&r(a,n),a}};o(.5,0,0,-1,"TopCenter"),o(.5,1,0,1,"BottomCenter"),o(0,.5,-1,0,"LeftMiddle"),o(1,.5,1,0,"RightMiddle"),o(.5,0,0,-1,"Top"),o(.5,1,0,1,"Bottom"),o(0,.5,-1,0,"Left"),o(1,.5,1,0,"Right"),o(.5,.5,0,0,"Center"),o(1,0,0,-1,"TopRight"),o(1,1,0,1,"BottomRight"),o(0,0,0,-1,"TopLeft"),o(0,1,0,1,"BottomLeft"),n.Defaults.DynamicAnchors=function(t){return t.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],t.elementId,t.jsPlumbInstance)},n.Anchors.AutoDefault=function(t){var e=t.jsPlumbInstance.makeDynamicAnchor(n.Defaults.DynamicAnchors(t));return e.type="AutoDefault",e};var s=function(t,e){n.Anchors[t]=function(n){var i=n.jsPlumbInstance.makeAnchor(["Continuous",{faces:e}],n.elementId,n.jsPlumbInstance);return i.type=t,i}};n.Anchors.Continuous=function(t){return t.jsPlumbInstance.continuousAnchorFactory.get(t)},s("ContinuousLeft",["left"]),s("ContinuousTop",["top"]),s("ContinuousBottom",["bottom"]),s("ContinuousRight",["right"]),o(0,0,0,0,"Assign",function(t,e){var n=e.position||"Fixed";t.positionFinder=n.constructor==String?e.jsPlumbInstance.AnchorPositionFinders[n]:n,t.constructorParams=e}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(t,e,n){return[(t.left-e.left)/n[0],(t.top-e.top)/n[1]]},Grid:function(t,e,n,i){var o=t.left-e.left,s=t.top-e.top,r=n[0]/i.grid[0],a=n[1]/i.grid[1],l=Math.floor(o/r),c=Math.floor(s/a);return[(l*r+r/2)/n[0],(c*a+a/2)/n[1]]}},n.Anchors.Perimeter=function(t){var e=(t=t||{}).anchorCount||60,n=t.shape;if(!n)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var t=.5,n=2*Math.PI/e,i=0,o=[],s=0;s<e;s++){var r=t+t*Math.sin(i),a=t+t*Math.cos(i);o.push([r,a,0,0]),i+=n}return o},o=function(t){for(var n=e/t.length,i=[],o=function(t,o,s,r,a){for(var l=(s-t)/(n=e*a),c=(r-o)/n,u=0;u<n;u++)i.push([t+l*u,o+c*u,0,0])},s=0;s<t.length;s++)o.apply(null,t[s]);return i},s=function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n][0],t[n][1],t[n][2],t[n][3],1/t.length]);return o(e)},r=function(){return s([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},a={Circle:i,Ellipse:i,Diamond:function(){return s([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:r,Square:r,Triangle:function(){return s([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(t){for(var e=t.points,n=[],i=0,s=0;s<e.length-1;s++){var r=Math.sqrt(Math.pow(e[s][2]-e[s][0])+Math.pow(e[s][3]-e[s][1]));i+=r,n.push([e[s][0],e[s][1],e[s+1][0],e[s+1][1],r])}for(var a=0;a<n.length;a++)n[a][4]=n[a][4]/i;return o(n)}},l=function(t,e){for(var n=[],i=e/180*Math.PI,o=0;o<t.length;o++){var s=t[o][0]-.5,r=t[o][1]-.5;n.push([s*Math.cos(i)-r*Math.sin(i)+.5,s*Math.sin(i)+r*Math.cos(i)+.5,t[o][2],t[o][3]])}return n};if(!a[n])throw new Error("Shape ["+n+"] is unknown by Perimeter Anchor type");var c=a[n](t);t.rotation&&(c=l(c,t.rotation));var u=t.jsPlumbInstance.makeDynamicAnchor(c);return u.type="Perimeter",u}}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=t.Biltong;e.Segments={AbstractSegment:function(t){this.params=t,this.findClosestPointOnPath=function(){return{d:Infinity,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(t.x1,t.x2),minY:Math.min(t.y1,t.y2),maxX:Math.max(t.x1,t.x2),maxY:Math.max(t.y1,t.y2)}}},Straight:function(t){e.Segments.AbstractSegment.apply(this,arguments);var n,o,s,r,a,l,c,u=function(){n=Math.sqrt(Math.pow(a-r,2)+Math.pow(c-l,2)),o=i.gradient({x:r,y:l},{x:a,y:c}),s=-1/o};this.type="Straight",this.getLength=function(){return n},this.getGradient=function(){return o},this.getCoordinates=function(){return{x1:r,y1:l,x2:a,y2:c}},this.setCoordinates=function(t){r=t.x1,l=t.y1,a=t.x2,c=t.y2,u()},this.setCoordinates({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}),this.getBounds=function(){return{minX:Math.min(r,a),minY:Math.min(l,c),maxX:Math.max(r,a),maxY:Math.max(l,c)}},this.pointOnPath=function(t,e){if(0!==t||e){if(1!=t||e){var o=e?t>0?t:n+t:t*n;return i.pointOnLine({x:r,y:l},{x:a,y:c},o)}return{x:a,y:c}}return{x:r,y:l}},this.gradientAtPoint=function(){return o},this.pointAlongPathFrom=function(t,e,n){var o=this.pointOnPath(t,n),s=e<=0?{x:r,y:l}:{x:a,y:c};return e<=0&&Math.abs(e)>1&&(e*=-1),i.pointOnLine(o,s,e)};var d=function(t,e,n){return n>=Math.min(t,e)&&n<=Math.max(t,e)},h=function(t,e,n){return Math.abs(n-t)<Math.abs(n-e)?t:e};this.findClosestPointOnPath=function(t,e){var u={d:Infinity,x:null,y:null,l:null,x1:r,x2:a,y1:l,y2:c};if(0===o)u.y=l,u.x=d(r,a,t)?t:h(r,a,t);else if(o==Infinity||o==-Infinity)u.x=r,u.y=d(l,c,e)?e:h(l,c,e);else{var p=l-o*r,f=(e-s*t-p)/(o-s),m=o*f+p;u.x=d(r,a,f)?f:h(r,a,f),u.y=d(l,c,m)?m:h(l,c,m)}var g=i.lineLength([u.x,u.y],[r,l]);return u.d=i.lineLength([t,e],[u.x,u.y]),u.l=g/n,u}},Arc:function(t){e.Segments.AbstractSegment.apply(this,arguments);var n=function(e,n){return i.theta([t.cx,t.cy],[e,n])},o=function(t,e){if(t.anticlockwise){var n=t.startAngle<t.endAngle?t.startAngle+s:t.startAngle;return n-Math.abs(n-t.endAngle)*e}var i=t.endAngle<t.startAngle?t.endAngle+s:t.endAngle,o=Math.abs(i-t.startAngle);return t.startAngle+o*e},s=2*Math.PI;this.radius=t.r,this.anticlockwise=t.ac,this.type="Arc",t.startAngle&&t.endAngle?(this.startAngle=t.startAngle,this.endAngle=t.endAngle,this.x1=t.cx+this.radius*Math.cos(t.startAngle),this.y1=t.cy+this.radius*Math.sin(t.startAngle),this.x2=t.cx+this.radius*Math.cos(t.endAngle),this.y2=t.cy+this.radius*Math.sin(t.endAngle)):(this.startAngle=n(t.x1,t.y1),this.endAngle=n(t.x2,t.y2),this.x1=t.x1,this.y1=t.y1,this.x2=t.x2,this.y2=t.y2),this.endAngle<0&&(this.endAngle+=s),this.startAngle<0&&(this.startAngle+=s),this.segment=i.quadrant([this.x1,this.y1],[this.x2,this.y2]);var r=this.endAngle<this.startAngle?this.endAngle+s:this.endAngle;this.sweep=Math.abs(r-this.startAngle),this.anticlockwise&&(this.sweep=s-this.sweep);var a=2*Math.PI*this.radius,l=this.sweep/s,c=a*l;this.getLength=function(){return c},this.getBounds=function(){return{minX:t.cx-t.r,maxX:t.cx+t.r,minY:t.cy-t.r,maxY:t.cy+t.r}};var u=1e-10,d=function(t){var e=Math.floor(t),n=Math.ceil(t);return t-e<u?e:n-t<u?n:t};this.pointOnPath=function(e,n){if(0===e)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==e)return{x:this.x2,y:this.y2,theta:this.endAngle};n&&(e/=c);var i=o(this,e),s=t.cx+t.r*Math.cos(i),r=t.cy+t.r*Math.sin(i);return{x:d(s),y:d(r),theta:i}},this.gradientAtPoint=function(e,n){var o=this.pointOnPath(e,n),s=i.normal([t.cx,t.cy],[o.x,o.y]);return this.anticlockwise||s!=Infinity&&s!=-Infinity||(s*=-1),s},this.pointAlongPathFrom=function(e,n,i){var o=this.pointOnPath(e,i),s=n/a*2*Math.PI,r=this.anticlockwise?-1:1,l=o.theta+r*s;return{x:t.cx+this.radius*Math.cos(l),y:t.cy+this.radius*Math.sin(l)}}},Bezier:function(n){this.curve=[{x:n.x1,y:n.y1},{x:n.cp1x,y:n.cp1y},{x:n.cp2x,y:n.cp2y},{x:n.x2,y:n.y2}];e.Segments.AbstractSegment.apply(this,arguments);this.bounds={minX:Math.min(n.x1,n.x2,n.cp1x,n.cp2x),minY:Math.min(n.y1,n.y2,n.cp1y,n.cp2y),maxX:Math.max(n.x1,n.x2,n.cp1x,n.cp2x),maxY:Math.max(n.y1,n.y2,n.cp1y,n.cp2y)},this.type="Bezier";var i=function(e,n,i){return i&&(n=t.jsBezier.locationAlongCurveFrom(e,n>0?0:1,n)),n};this.pointOnPath=function(e,n){return e=i(this.curve,e,n),t.jsBezier.pointOnCurve(this.curve,e)},this.gradientAtPoint=function(e,n){return e=i(this.curve,e,n),t.jsBezier.gradientAtPoint(this.curve,e)},this.pointAlongPathFrom=function(e,n,o){return e=i(this.curve,e,o),t.jsBezier.pointAlongCurveFrom(this.curve,e,n)},this.getLength=function(){return t.jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var o=function(){this.resetBounds=function(){this.bounds={minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}},this.resetBounds()};e.Connectors.AbstractConnector=function(t){o.apply(this,arguments);var s=[],r=0,a=[],l=[],c=t.stub||0,u=n.isArray(c)?c[0]:c,d=n.isArray(c)?c[1]:c,h=t.gap||0,p=n.isArray(h)?h[0]:h,f=n.isArray(h)?h[1]:h,m=null,g=!1,v=null;this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(t,e){for(var n={d:Infinity,s:null,x:null,y:null,l:null},i=0;i<s.length;i++){var o=s[i].findClosestPointOnPath(t,e);o.d<n.d&&(n.d=o.d,n.l=o.l,n.x=o.x,n.y=o.y,n.s=s[i],n.x1=o.x1,n.x2=o.x2,n.y1=o.y1,n.y2=o.y2,n.index=i)}return n};var y=function(){for(var t=0,e=0;e<s.length;e++){var n=s[e].getLength();l[e]=n/r,a[e]=[t,t+=n/r]}},b=function(t,e){e&&(t=t>0?t/r:(r+t)/r);for(var n=a.length-1,i=1,o=0;o<a.length;o++)if(a[o][1]>=t){n=o,i=1==t?1:0===t?0:(t-a[o][0])/l[o];break}return{segment:s[n],proportion:i,index:n}},_=function(t,n,i){if(i.x1!=i.x2||i.y1!=i.y2){var o=new e.Segments[n](i);s.push(o),r+=o.getLength(),t.updateBounds(o)}},w=function(){r=s.length=a.length=l.length=0};this.setSegments=function(t){m=[],r=0;for(var e=0;e<t.length;e++)m.push(t[e]),r+=t[e].getLength()},this.getLength=function(){return r};var C=function(t){this.lineWidth=t.lineWidth;var e=i.quadrant(t.sourcePos,t.targetPos),n=t.targetPos[0]<t.sourcePos[0],o=t.targetPos[1]<t.sourcePos[1],s=t.lineWidth||1,r=t.sourceEndpoint.anchor.getOrientation(t.sourceEndpoint),a=t.targetEndpoint.anchor.getOrientation(t.targetEndpoint),l=n?t.targetPos[0]:t.sourcePos[0],c=o?t.targetPos[1]:t.sourcePos[1],h=Math.abs(t.targetPos[0]-t.sourcePos[0]),m=Math.abs(t.targetPos[1]-t.sourcePos[1]);if(0===r[0]&&0===r[1]||0===a[0]&&0===a[1]){var g=h>m?0:1,v=[1,0][g];a=[],(r=[])[g]=t.sourcePos[g]>t.targetPos[g]?-1:1,a[g]=t.sourcePos[g]>t.targetPos[g]?1:-1,r[v]=0,a[v]=0}var y=n?h+p*r[0]:p*r[0],b=o?m+p*r[1]:p*r[1],_=n?f*a[0]:h+f*a[0],w=o?f*a[1]:m+f*a[1],C=r[0]*a[0]+r[1]*a[1],j={sx:y,sy:b,tx:_,ty:w,lw:s,xSpan:Math.abs(_-y),ySpan:Math.abs(w-b),mx:(y+_)/2,my:(b+w)/2,so:r,to:a,x:l,y:c,w:h,h:m,segment:e,startStubX:y+r[0]*u,startStubY:b+r[1]*u,endStubX:_+a[0]*d,endStubY:w+a[1]*d,isXGreaterThanStubTimes2:Math.abs(y-_)>u+d,isYGreaterThanStubTimes2:Math.abs(b-w)>u+d,opposite:-1==C,perpendicular:0===C,orthogonal:1==C,sourceAxis:0===r[0]?"y":"x",points:[l,c,h,m,y,b,_,w]};return j.anchorOrientation=j.opposite?"opposite":j.orthogonal?"orthogonal":"perpendicular",j};this.getSegments=function(){return s},this.updateBounds=function(t){var e=t.getBounds();this.bounds.minX=Math.min(this.bounds.minX,e.minX),this.bounds.maxX=Math.max(this.bounds.maxX,e.maxX),this.bounds.minY=Math.min(this.bounds.minY,e.minY),this.bounds.maxY=Math.max(this.bounds.maxY,e.maxY)};return this.pointOnPath=function(t,e){var n=b(t,e);return n.segment&&n.segment.pointOnPath(n.proportion,!1)||[0,0]},this.gradientAtPoint=function(t,e){var n=b(t,e);return n.segment&&n.segment.gradientAtPoint(n.proportion,!1)||0},this.pointAlongPathFrom=function(t,e,n){var i=b(t,n);return i.segment&&i.segment.pointAlongPathFrom(i.proportion,e,!1)||[0,0]},this.compute=function(t){g||(v=C.call(this,t)),w(),this._compute(v,t),this.x=v.points[0],this.y=v.points[1],this.w=v.points[2],this.h=v.points[3],this.segment=v.segment,y()},{addSegment:_,prepareCompute:C,sourceStub:u,targetStub:d,maxStub:Math.max(u,d),sourceGap:p,targetGap:f,maxGap:Math.max(p,f)}},n.extend(e.Connectors.AbstractConnector,o);var s=e.Connectors.Straight=function(){this.type="Straight";var t=e.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(e){t.addSegment(this,"Straight",{x1:e.sx,y1:e.sy,x2:e.startStubX,y2:e.startStubY}),t.addSegment(this,"Straight",{x1:e.startStubX,y1:e.startStubY,x2:e.endStubX,y2:e.endStubY}),t.addSegment(this,"Straight",{x1:e.endStubX,y1:e.endStubY,x2:e.tx,y2:e.ty})}};n.extend(e.Connectors.Straight,e.Connectors.AbstractConnector),e.registerConnectorType(s,"Straight"),e.Endpoints.AbstractEndpoint=function(t){return o.apply(this,arguments),{compute:this.compute=function(){var t=this._compute.apply(this,arguments);return this.x=t[0],this.y=t[1],this.w=t[2],this.h=t[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,t},cssClass:t.cssClass}},n.extend(e.Endpoints.AbstractEndpoint,o),e.Endpoints.Dot=function(t){this.type="Dot";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.radius=t.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(t,e,n){this.radius=n.radius||this.radius;var i=t[0]-this.radius,o=t[1]-this.radius,s=2*this.radius,r=2*this.radius;if(n.strokeStyle){var a=n.lineWidth||1;i-=a,o-=a,s+=2*a,r+=2*a}return[i,o,s,r,this.radius]}},n.extend(e.Endpoints.Dot,e.Endpoints.AbstractEndpoint),e.Endpoints.Rectangle=function(t){this.type="Rectangle";e.Endpoints.AbstractEndpoint.apply(this,arguments);t=t||{},this.width=t.width||20,this.height=t.height||20,this._compute=function(t,e,n){var i=n.width||this.width,o=n.height||this.height;return[t[0]-i/2,t[1]-o/2,i,o]}},n.extend(e.Endpoints.Rectangle,e.Endpoints.AbstractEndpoint);var r=function(){e.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};n.extend(r,e.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(t){this._jsPlumb.displayElements.push(t)}}),e.Endpoints.Image=function(i){this.type="Image",r.apply(this,arguments),e.Endpoints.AbstractEndpoint.apply(this,arguments);var o=i.onload,s=i.src||i.url,a=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,o&&o(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(t,e){var n=t.constructor==String?t:t.src;o=e,this._jsPlumb.img.src=n,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(s,o),this._compute=function(t){return this.anchorPoint=t,this._jsPlumb.ready?[t[0]-this._jsPlumb.widthToUse/2,t[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=jsPlumb.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+a),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var t=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,e=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;n.sizeElement(this.canvas,t,e,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(e,n){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(e,n):t.setTimeout(function(){this.paint(e,n)}.bind(this),200))}},n.extend(e.Endpoints.Image,[r,e.Endpoints.AbstractEndpoint],{cleanup:function(t){t&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),e.Endpoints.Blank=function(t){e.Endpoints.AbstractEndpoint.apply(this,arguments);this.type="Blank",r.apply(this,arguments),this._compute=function(t){return[t[0],t[1],10,0]};var i=t.cssClass?" "+t.cssClass:"";this.canvas=jsPlumb.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+i),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(){n.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},n.extend(e.Endpoints.Blank,[e.Endpoints.AbstractEndpoint,r],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),e.Endpoints.Triangle=function(t){this.type="Triangle",e.Endpoints.AbstractEndpoint.apply(this,arguments),(t=t||{}).width=t.width||55,t.height=t.height||55,this.width=t.width,this.height=t.height,this._compute=function(t,e,n){var i=n.width||self.width,o=n.height||self.height;return[t[0]-i/2,t[1]-o/2,i,o]}};var a=e.Overlays.AbstractOverlay=function(t){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=t.component,this.loc=null==t.location?.5:t.location,this.endpointLoc=null==t.endpointLocation?[.5,.5]:t.endpointLocation};a.prototype={cleanup:function(t){t&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(){},setVisible:function(t){this.visible=t,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(t){this.loc+=t,this.component.repaint()},setLocation:function(t){this.loc=t,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},e.Overlays.Arrow=function(t){this.type="Arrow",a.apply(this,arguments),this.isAppendedAtTopLevel=!1,t=t||{},this.length=t.length||20,this.width=t.width||20,this.id=t.id;var e=(t.direction||1)<0?-1:1,o=t.paintStyle||{lineWidth:1},s=t.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(t,r){var a,l,c,u;if(t.pointAlongPathFrom){if(n.isString(this.loc)||this.loc>1||this.loc<0){var d=parseInt(this.loc,10),h=this.loc<0?1:0;a=t.pointAlongPathFrom(h,d,!1),l=t.pointAlongPathFrom(h,d-e*this.length/2,!1),c=i.pointOnLine(a,l,this.length)}else if(1==this.loc){if(a=t.pointOnPath(this.loc),l=t.pointAlongPathFrom(this.loc,-this.length),c=i.pointOnLine(a,l,this.length),-1==e){var p=c;c=a,a=p}}else if(0===this.loc){if(c=t.pointOnPath(this.loc),l=t.pointAlongPathFrom(this.loc,this.length),a=i.pointOnLine(c,l,this.length),-1==e){var f=c;c=a,a=f}}else a=t.pointAlongPathFrom(this.loc,e*this.length/2),l=t.pointOnPath(this.loc),c=i.pointOnLine(a,l,this.length);var m={hxy:a,tail:u=i.perpendicularLineTo(a,c,this.width),cxy:i.pointOnLine(a,c,s*this.length)},g=o.strokeStyle||r.strokeStyle,v=o.fillStyle||r.strokeStyle;return{component:t,d:m,lineWidth:o.lineWidth||r.lineWidth,strokeStyle:g,fillStyle:v,minX:Math.min(a.x,u[0].x,u[1].x),maxX:Math.max(a.x,u[0].x,u[1].x),minY:Math.min(a.y,u[0].y,u[1].y),maxY:Math.max(a.y,u[0].y,u[1].y)}}return{component:t,minX:0,maxX:0,minY:0,maxY:0}}},n.extend(e.Overlays.Arrow,a,{updateFrom:function(t){this.length=t.length||this.length,this.width=t.width||this.width,this.direction=null!=t.direction?t.direction:this.direction,this.foldback=t.foldback||this.foldback}}),e.Overlays.PlainArrow=function(t){t=t||{};var n=e.extend(t,{foldback:1});e.Overlays.Arrow.call(this,n),this.type="PlainArrow"},n.extend(e.Overlays.PlainArrow,e.Overlays.Arrow),e.Overlays.Diamond=function(t){var n=(t=t||{}).length||40,i=jsPlumb.extend(t,{length:n/2,foldback:2});e.Overlays.Arrow.call(this,i),this.type="Diamond"},n.extend(e.Overlays.Diamond,e.Overlays.Arrow);var l=function(t,e){return(null==t._jsPlumb.cachedDimensions||e)&&(t._jsPlumb.cachedDimensions=t.getDimensions()),t._jsPlumb.cachedDimensions},c=function(t){e.jsPlumbUIComponent.apply(this,arguments),a.apply(this,arguments);var i=this.fire;this.fire=function(){i.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=t.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=t.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=t.create,this._jsPlumb.initiallyInvisible=!1===t.visible,this.getElement=function(){if(null==this._jsPlumb.div){
var e=this._jsPlumb.div=jsPlumb.getElement(this._jsPlumb.create(this._jsPlumb.component));e.style.position="absolute",e.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:t.cssClass?t.cssClass:""),this._jsPlumb.instance.appendElement(e),this._jsPlumb.instance.getId(e),this.canvas=e;var n="translate(-50%, -50%)";e.style.webkitTransform=n,e.style.mozTransform=n,e.style.msTransform=n,e.style.oTransform=n,e.style.transform=n,e._jsPlumb=this,!1===t.visible&&(e.style.display="none")}return this._jsPlumb.div},this.draw=function(t,e,i){var o=l(this);if(null!=o&&2==o.length){var s={x:0,y:0};if(i)s={x:i[0],y:i[1]};else if(t.pointOnPath){var r=this.loc,a=!1;(n.isString(this.loc)||this.loc<0||this.loc>1)&&(r=parseInt(this.loc,10),a=!0),s=t.pointOnPath(r,a)}else{var c=this.loc.constructor==Array?this.loc:this.endpointLoc;s={x:c[0]*t.w,y:c[1]*t.h}}var u=s.x-o[0]/2,d=s.y-o[1]/2;return{component:t,d:{minx:u,miny:d,td:o,cxy:s},minX:u,maxX:u+o[0],minY:d,maxY:d+o[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};n.extend(c,[e.jsPlumbUIComponent,a],{getDimensions:function(){return n.oldIE?e.getSize(this.getElement()):[1,1]},setVisible:function(t){this._jsPlumb.div&&(this._jsPlumb.div.style.display=t?"block":"none",t&&this._jsPlumb.initiallyInvisible&&(l(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(t){t?null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(t){null!=this._jsPlumb.div&&t.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var t=l(this);return Math.max(t[0],t[1])},paint:function(t){this._jsPlumb.initialised||(this.getElement(),t.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=t.component.x+t.d.minx+"px",this._jsPlumb.div.style.top=t.component.y+t.d.miny+"px"}}),e.Overlays.Custom=function(){this.type="Custom",c.apply(this,arguments)},n.extend(e.Overlays.Custom,c),e.Overlays.GuideLines=function(){var t=this;t.length=50,t.lineWidth=5,this.type="GuideLines",a.apply(this,arguments),e.jsPlumbUIComponent.apply(this,arguments),this.draw=function(e){var n=e.pointAlongPathFrom(t.loc,t.length/2),o=e.pointOnPath(t.loc),s=i.pointOnLine(n,o,t.length),r=i.perpendicularLineTo(n,s,40),a=i.perpendicularLineTo(s,n,20);return{connector:e,head:n,tail:s,headLine:a,tailLine:r,minX:Math.min(n.x,s.x,a[0].x,a[1].x),minY:Math.min(n.y,s.y,a[0].y,a[1].y),maxX:Math.max(n.x,s.x,a[0].x,a[1].x),maxY:Math.max(n.y,s.y,a[0].y,a[1].y)}}},e.Overlays.Label=function(t){this.labelStyle=t.labelStyle;this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var n=e.extend({create:function(){return jsPlumb.createElement("div")}},t);if(e.Overlays.Custom.call(this,n),this.type="Label",this.label=t.label||"",this.labelText=null,this.labelStyle){var i=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",i.style.font=this.labelStyle.font,i.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(i.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var o=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";i.style.border=this.labelStyle.borderWidth+"px solid "+o}this.labelStyle.padding&&(i.style.padding=this.labelStyle.padding)}},n.extend(e.Overlays.Label,e.Overlays.Custom,{cleanup:function(t){t&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(t){this.label=t,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),c.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var t=this.label(this);this.getElement().innerHTML=t.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(t){t.label&&this.setLabel(t.label)}})}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=function(e){var n=e._mottle;return n||(n=e._mottle=new t.Mottle),n};e.extend(t.jsPlumbInstance.prototype,{getEventManager:function(){return n(this)},on:function(){this.getEventManager().on.apply(this,arguments)},off:function(){this.getEventManager().off.apply(this,arguments)}})}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=function(t){this.type="Flowchart",(t=t||{}).stub=null==t.stub?30:t.stub;var n,i=e.Connectors.AbstractConnector.apply(this,arguments),o=null==t.midpoint?.5:t.midpoint,s=!0===t.alwaysRespectStubs,r=null,a=null,l=null,c=null!=t.cornerRadius?t.cornerRadius:0,u=function(t){return t<0?-1:0===t?0:1},d=function(t,e,n,i){if(a!=e||l!=n){var o=null==a?i.sx:a,s=null==l?i.sy:l,r=o==e?"v":"h",c=u(e-o),d=u(n-s);a=e,l=n,t.push([o,s,e,n,r,c,d])}},h=function(t){return Math.sqrt(Math.pow(t[0]-t[2],2)+Math.pow(t[1]-t[3],2))},p=function(t){var e=[];return e.push.apply(e,t),e},f=function(t,e,n){for(var o,s=null,r=0;r<e.length-1;r++){if(s=s||p(e[r]),o=p(e[r+1]),c>0&&s[4]!=o[4]){var a=Math.min(c,h(s),h(o));s[2]-=s[5]*a,s[3]-=s[6]*a,o[0]+=o[5]*a,o[1]+=o[6]*a;var l=s[6]==o[5]&&1==o[5]||s[6]==o[5]&&0===o[5]&&s[5]!=o[6]||s[6]==o[5]&&-1==o[5],u=(o[1]>s[3]?1:-1)==(o[0]>s[2]?1:-1),d=u&&l||!u&&!l?o[0]:s[2],f=u&&l||!u&&!l?s[3]:o[1];i.addSegment(t,"Straight",{x1:s[0],y1:s[1],x2:s[2],y2:s[3]}),i.addSegment(t,"Arc",{r:a,x1:s[2],y1:s[3],x2:o[0],y2:o[1],cx:d,cy:f,ac:l})}else{var m=s[2]==s[0]?0:s[2]>s[0]?n.lw/2:-n.lw/2,g=s[3]==s[1]?0:s[3]>s[1]?n.lw/2:-n.lw/2;i.addSegment(t,"Straight",{x1:s[0]-m,y1:s[1]-g,x2:s[2]+m,y2:s[3]+g})}s=o}null!=o&&i.addSegment(t,"Straight",{x1:o[0],y1:o[1],x2:o[2],y2:o[3]})};this.setSegments=function(t){r=t},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return r||n},this._compute=function(t,e){if(e.clearEdits&&(r=null),null==r){n=[],a=null,l=null,null;var c=t.startStubX+(t.endStubX-t.startStubX)*o,u=t.startStubY+(t.endStubY-t.startStubY)*o,h={x:[0,1],y:[1,0]},p=function(){return[t.startStubX,t.startStubY,t.endStubX,t.endStubY]},m={perpendicular:function(e){var n=t,i={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},o={x:[[n.startStubX,n.endStubX],null,[n.endStubX,n.startStubX]],y:[[n.startStubY,n.endStubY],null,[n.endStubY,n.startStubY]]},s={x:[[c,n.startStubY],[c,n.endStubY]],y:[[n.startStubX,u],[n.endStubX,u]]},r={x:[[n.endStubX,n.startStubY]],y:[[n.startStubX,n.endStubY]]},a={x:[[n.startStubX,n.endStubY],[n.endStubX,n.endStubY]],y:[[n.endStubX,n.startStubY],[n.endStubX,n.endStubY]]},l={x:[[n.startStubX,u],[n.endStubX,u],[n.endStubX,n.endStubY]],y:[[c,n.startStubY],[c,n.endStubY],[n.endStubX,n.endStubY]]},d={x:[n.startStubY,n.endStubY],y:[n.startStubX,n.endStubX]},p=h[e][0],f=h[e][1],m=n.so[p]+1,g=n.to[f]+1,v=-1==n.to[f]&&d[e][1]<d[e][0]||1==n.to[f]&&d[e][1]>d[e][0],y=o[e][m][0],b=o[e][m][1],_=i[e][m][g];return n.segment==_[3]||n.segment==_[2]&&v?s[e]:n.segment==_[2]&&b<y?r[e]:n.segment==_[2]&&b>=y||n.segment==_[1]&&!v?l[e]:n.segment==_[0]||n.segment==_[1]&&v?a[e]:void 0},orthogonal:function(e,n,i,o,s){var r=t,a={x:-1==r.so[0]?Math.min(n,o):Math.max(n,o),y:-1==r.so[1]?Math.min(n,o):Math.max(n,o)}[e];return{x:[[a,i],[a,s],[o,s]],y:[[i,a],[s,a],[s,o]]}[e]},opposite:function(n,o,s,r){var a=t,l={x:"y",y:"x"}[n],d={x:"height",y:"width"}[n],h=a["is"+n.toUpperCase()+"GreaterThanStubTimes2"];if(e.sourceEndpoint.elementId==e.targetEndpoint.elementId){var p=s+(1-e.sourceEndpoint.anchor[l])*e.sourceInfo[d]+i.maxStub;return{x:[[o,p],[r,p]],y:[[p,o],[p,r]]}[n]}return!h||1==a.so[v]&&o>r||-1==a.so[v]&&o<r?{x:[[o,u],[r,u]],y:[[c,o],[c,r]]}[n]:1==a.so[v]&&o<r||-1==a.so[v]&&o>r?{x:[[c,a.sy],[c,a.ty]],y:[[a.sx,u],[a.tx,u]]}[n]:void 0}},g={perpendicular:p,orthogonal:p,opposite:function(e){var n=t,i="x"==e?0:1;return!s&&{x:function(){return 1==n.so[i]&&(n.startStubX>n.endStubX&&n.tx>n.startStubX||n.sx>n.endStubX&&n.tx>n.sx)||-1==n.so[i]&&(n.startStubX<n.endStubX&&n.tx<n.startStubX||n.sx<n.endStubX&&n.tx<n.sx)},y:function(){return 1==n.so[i]&&(n.startStubY>n.endStubY&&n.ty>n.startStubY||n.sy>n.endStubY&&n.ty>n.sy)||-1==n.so[i]&&(n.startStubY<n.endStubY&&n.ty<n.startStubY||n.sy<n.endStubY&&n.ty<n.sy)}}[e]()?{x:[(t.sx+t.tx)/2,t.startStubY,(t.sx+t.tx)/2,t.endStubY],y:[t.startStubX,(t.sy+t.ty)/2,t.endStubX,(t.sy+t.ty)/2]}[e]:[t.startStubX,t.startStubY,t.endStubX,t.endStubY]}}[t.anchorOrientation](t.sourceAxis),v="x"==t.sourceAxis?0:1,y="x"==t.sourceAxis?1:0,b=g[v],_=g[y],w=g[v+2],C=g[y+2];d(n,g[0],g[1],t);var j=m[t.anchorOrientation](t.sourceAxis,b,_,w,C);if(j)for(var S=0;S<j.length;S++)d(n,j[S][0],j[S][1],t);d(n,g[2],g[3],t),d(n,t.tx,t.ty,t),f(this,n,t)}else f(this,r,t)},this.getPath=function(){for(var t=null,e=null,i=[],o=r||n,s=0;s<o.length;s++){var a=o[s],l=a[4],c="v"==l?3:2;null!=t&&e===l?t[c]=a[c]:a[0]==a[2]&&a[1]==a[3]||(i.push({start:[a[0],a[1]],end:[a[2],a[3]]}),t=a,e=a[4])}return i},this.setPath=function(t){r=[];for(var e=0;e<t.length;e++){var n=t[e].start[0],i=t[e].start[1],o=t[e].end[0],s=t[e].end[1],a=n==o?"v":"h",l=u(o-n),c=u(s-i);r.push([n,i,o,s,a,l,c])}}};t.jsPlumbUtil.extend(n,e.Connectors.AbstractConnector),e.registerConnectorType(n,"Flowchart")}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=function(t,e,n,i){return t<=n&&i<=e?1:t<=n&&e<=i?2:n<=t&&i>=e?3:4},o=function(t,e,n,i,o,s,r,a,l){return a<=l?[t,e]:1===n?i[3]<=0&&o[3]>=1?[t+(i[2]<.5?-1*s:s),e]:i[2]>=1&&o[2]<=0?[t,e+(i[3]<.5?-1*r:r)]:[t+-1*s,e+-1*r]:2===n?i[3]>=1&&o[3]<=0?[t+(i[2]<.5?-1*s:s),e]:i[2]>=1&&o[2]<=0?[t,e+(i[3]<.5?-1*r:r)]:[t+s,e+-1*r]:3===n?i[3]>=1&&o[3]<=0?[t+(i[2]<.5?-1*s:s),e]:i[2]<=0&&o[2]>=1?[t,e+(i[3]<.5?-1*r:r)]:[t+-1*s,e+-1*r]:4===n?i[3]<=0&&o[3]>=1?[t+(i[2]<.5?-1*s:s),e]:i[2]<=0&&o[2]>=1?[t,e+(i[3]<.5?-1*r:r)]:[t+s,e+-1*r]:void 0},s=function(t){t=t||{},this.type="StateMachine";var n=e.Connectors.AbstractConnector.apply(this,arguments),s=t.curviness||10,r=t.margin||5,a=t.proximityLimit||80,l=t.orientation&&"clockwise"===t.orientation,c=t.loopbackRadius||25,u=!1!==t.showLoopback;this._compute=function(t,e){var d=Math.abs(e.sourcePos[0]-e.targetPos[0]),h=Math.abs(e.sourcePos[1]-e.targetPos[1]);if(u&&e.sourceEndpoint.elementId===e.targetEndpoint.elementId){var p=e.sourcePos[0],f=e.sourcePos[1]-r,m=p,g=f-c,v=2*c,y=2*c,b=m-c,_=g-c;t.points[0]=b,t.points[1]=_,t.points[2]=v,t.points[3]=y,n.addSegment(this,"Arc",{loopback:!0,x1:p-b+4,y1:f-_,startAngle:0,endAngle:2*Math.PI,r:c,ac:!l,x2:p-b-4,y2:f-_,cx:m-b,cy:g-_})}else{var w=e.sourcePos[0]<e.targetPos[0]?0:d,C=e.sourcePos[1]<e.targetPos[1]?0:h,j=e.sourcePos[0]<e.targetPos[0]?d:0,S=e.sourcePos[1]<e.targetPos[1]?h:0;0===e.sourcePos[2]&&(w-=r),1===e.sourcePos[2]&&(w+=r),0===e.sourcePos[3]&&(C-=r),1===e.sourcePos[3]&&(C+=r),0===e.targetPos[2]&&(j-=r),1===e.targetPos[2]&&(j+=r),0===e.targetPos[3]&&(S-=r),1===e.targetPos[3]&&(S+=r);var x=(w+j)/2,P=(C+S)/2,k=i(w,C,j,S),T=Math.sqrt(Math.pow(j-w,2)+Math.pow(S-C,2)),E=o(x,P,k,e.sourcePos,e.targetPos,s,s,T,a);n.addSegment(this,"Bezier",{x1:j,y1:S,x2:w,y2:C,cp1x:E[0],cp1y:E[1],cp2x:E[0],cp2y:E[1]})}}};n.extend(s,e.Connectors.AbstractConnector),e.registerConnectorType(s,"StateMachine")}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=function(t){t=t||{};var n=e.Connectors.AbstractConnector.apply(this,arguments),i=t.curviness||150,o=10;this.type="Bezier",this.getCurviness=function(){return i},this._findControlPoint=function(t,e,n,s,r,a,l){var c=[];return a[0]!=l[0]||a[1]==l[1]?(0===l[0]?c.push(n[0]<e[0]?t[0]+o:t[0]-o):c.push(t[0]+i*l[0]),0===l[1]?c.push(n[1]<e[1]?t[1]+o:t[1]-o):c.push(t[1]+i*a[1])):(0===a[0]?c.push(e[0]<n[0]?t[0]+o:t[0]-o):c.push(t[0]-i*a[0]),0===a[1]?c.push(e[1]<n[1]?t[1]+o:t[1]-o):c.push(t[1]+i*l[1])),c},this._compute=function(t,e){var i=e.sourcePos,o=e.targetPos,s=Math.abs(i[0]-o[0]),r=Math.abs(i[1]-o[1]),a=i[0]<o[0]?s:0,l=i[1]<o[1]?r:0,c=i[0]<o[0]?0:s,u=i[1]<o[1]?0:r,d=this._findControlPoint([a,l],i,o,e.sourceEndpoint,e.targetEndpoint,t.so,t.to),h=this._findControlPoint([c,u],o,i,e.targetEndpoint,e.sourceEndpoint,t.to,t.so);n.addSegment(this,"Bezier",{x1:a,y1:l,x2:c,y2:u,cp1x:d[0],cp1y:d[1],cp2x:h[0],cp2y:h[1]})}};t.jsPlumbUtil.extend(n,e.Connectors.AbstractConnector),e.registerConnectorType(n,"Bezier")}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},o="stroke-dasharray",s="dashstyle",r="linearGradient",a="radialGradient",l="defs",c="fill",u="stop",d="stroke",h="stroke-width",p="style",f="none",m="jsplumb_gradient_",g="lineWidth",v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},y=function(t,e){for(var n in e)t.setAttribute(n,""+e[n])},b=function(t,e){return(e=e||{}).version="1.1",e.xmlns=v.xhtml,jsPlumb.createElementNS(v.svg,t,null,null,e)},_=function(t){return"position:absolute;left:"+t[0]+"px;top:"+t[1]+"px"},w=function(t){for(var e=t.querySelectorAll(" defs linearGradient radialGradient"),n=0;n<e.length;n++)e[n].parentNode.removeChild(e[n])},C=function(t,e,i,o,s){var h,p=m+s._jsPlumb.instance.idstamp();w(t),h=i.gradient.offset?b(a,{id:p}):b(r,{id:p,gradientUnits:"userSpaceOnUse"});var f=b(l);t.appendChild(f),f.appendChild(h);for(var g=0;g<i.gradient.stops.length;g++){var v=1==s.segment||2==s.segment?g:i.gradient.stops.length-1-g,y=n.convertStyle(i.gradient.stops[v][1],!0),_=b(u,{offset:Math.floor(100*i.gradient.stops[g][0])+"%","stop-color":y});h.appendChild(_)}var C=i.strokeStyle?d:c;e.setAttribute(C,"url(#"+p+")")},j=function(t,e,r,a,l){if(e.setAttribute(c,r.fillStyle?n.convertStyle(r.fillStyle,!0):f),e.setAttribute(d,r.strokeStyle?n.convertStyle(r.strokeStyle,!0):f),r.gradient?C(t,e,r,a,l):(w(t),e.setAttribute(p,"")),r.lineWidth&&e.setAttribute(h,r.lineWidth),r[s]&&r[g]&&!r[o]){var u=-1==r[s].indexOf(",")?" ":",",m=r[s].split(u),v="";m.forEach(function(t){v+=Math.floor(t*r.lineWidth)+u}),e.setAttribute(o,v)}else r[o]&&e.setAttribute(o,r[o]);for(var y in i)r[y]&&e.setAttribute(i[y],r[y])},S=function(t,e,n){t.childNodes.length>n?t.insertBefore(e,t.childNodes[n]):t.appendChild(e)};n.svg={node:b,attr:y,pos:_};var x=function(t){var i=t.pointerEventsSpec||"all",o={};e.jsPlumbUIComponent.apply(this,t.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var s=t.cssClass+" "+(t.originalArgs[0].cssClass||""),r={style:"",width:0,height:0,"pointer-events":i,position:"absolute"};this.svg=b("svg",r),t.useDivWrapper?(this.canvas=jsPlumb.createElement("div",{position:"absolute"}),n.sizeElement(this.canvas,0,0,1,1),this.canvas.className=s):(y(this.svg,{"class":s}),this.canvas=this.svg),t._jsPlumb.appendElement(this.canvas,t.originalArgs[0].parent),t.useDivWrapper&&this.canvas.appendChild(this.svg);var a=[this.canvas];return this.getDisplayElements=function(){return a},this.appendDisplayElement=function(t){a.push(t)},this.paint=function(e,i,s){if(null!=e){var r,a=[this.x,this.y],l=[this.w,this.h];null!=s&&(s.xmin<0&&(a[0]+=s.xmin),s.ymin<0&&(a[1]+=s.ymin),l[0]=s.xmax+(s.xmin<0?-s.xmin:0),l[1]=s.ymax+(s.ymin<0?-s.ymin:0)),t.useDivWrapper?(n.sizeElement(this.canvas,a[0],a[1],l[0],l[1]),a[0]=0,a[1]=0,r=_([0,0])):r=_([a[0],a[1]]),o.paint.apply(this,arguments),y(this.svg,{style:r,width:l[0]||0,height:l[1]||0})}},{renderer:o}};n.extend(x,e.jsPlumbUIComponent,{cleanup:function(t){t||null==this.typeId?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(t){var e=t.getContainer();this.canvas&&null==this.canvas.parentNode&&e.appendChild(this.canvas),this.bgCanvas&&null==this.bgCanvas.parentNode&&e.appendChild(this.bgCanvas)},setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none")}}),e.ConnectorRenderers.svg=function(t){var i=this;x.apply(this,[{cssClass:t._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:t._jsPlumb}]).renderer.paint=function(o,s,r){var a=i.getSegments(),l="",c=[0,0];if(r.xmin<0&&(c[0]=-r.xmin),r.ymin<0&&(c[1]=-r.ymin),a.length>0){for(var u=0;u<a.length;u++)l+=e.Segments.svg.SegmentRenderer.getPath(a[u]),l+=" ";var d={d:l,transform:"translate("+c[0]+","+c[1]+")","pointer-events":t["pointer-events"]||"visibleStroke"},h=null,p=[i.x,i.y,i.w,i.h];if(o.outlineColor){var f=o.outlineWidth||1,m=o.lineWidth+2*f;delete(h=e.extend({},o)).gradient,h.strokeStyle=n.convertStyle(o.outlineColor),h.lineWidth=m,null==i.bgPath?(i.bgPath=b("path",d),e.addClass(i.bgPath,e.connectorOutlineClass),S(i.svg,i.bgPath,0)):y(i.bgPath,d),j(i.svg,i.bgPath,h,p,i)}null==i.path?(i.path=b("path",d),S(i.svg,i.path,o.outlineColor?1:0)):y(i.path,d),j(i.svg,i.path,o,p,i)}}},n.extend(e.ConnectorRenderers.svg,x),e.Segments.svg={SegmentRenderer:{getPath:function(t){return{Straight:function(){var e=t.getCoordinates();return"M "+e.x1+" "+e.y1+" L "+e.x2+" "+e.y2},Bezier:function(){var e=t.params;return"M "+e.x1+" "+e.y1+" C "+e.cp1x+" "+e.cp1y+" "+e.cp2x+" "+e.cp2y+" "+e.x2+" "+e.y2},Arc:function(){var e=t.params,n=t.sweep>Math.PI?1:0,i=t.anticlockwise?0:1;return"M"+t.x1+" "+t.y1+" A "+t.radius+" "+e.r+" 0 "+n+","+i+" "+t.x2+" "+t.y2}}[t.type]()}}};var P=e.SvgEndpoint=function(t){x.apply(this,[{cssClass:t._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:t._jsPlumb}]).renderer.paint=function(t){var i=e.extend({},t);i.outlineColor&&(i.strokeWidth=i.outlineWidth,i.strokeStyle=n.convertStyle(i.outlineColor,!0)),null==this.node?(this.node=this.makeNode(i),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),j(this.svg,this.node,i,[this.x,this.y,this.w,this.h],this),_(this.node,[this.x,this.y])}.bind(this)};n.extend(P,x),e.Endpoints.svg.Dot=function(){e.Endpoints.Dot.apply(this,arguments),P.apply(this,arguments),this.makeNode=function(){return b("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(t){y(t,{cx:this.w/2,cy:this.h/2,r:this.radius})}},n.extend(e.Endpoints.svg.Dot,[e.Endpoints.Dot,P]),e.Endpoints.svg.Rectangle=function(){e.Endpoints.Rectangle.apply(this,arguments),P.apply(this,arguments),this.makeNode=function(){return b("rect",{width:this.w,height:this.h})},this.updateNode=function(t){y(t,{width:this.w,height:this.h})}},n.extend(e.Endpoints.svg.Rectangle,[e.Endpoints.Rectangle,P]),e.Endpoints.svg.Image=e.Endpoints.Image,e.Endpoints.svg.Blank=e.Endpoints.Blank,e.Overlays.svg.Label=e.Overlays.Label,e.Overlays.svg.Custom=e.Overlays.Custom;var k=function(t,n){t.apply(this,n),e.jsPlumbUIComponent.apply(this,n),this.isAppendedAtTopLevel=!1;this.path=null,this.paint=function(t,e){if(t.component.svg&&e){null==this.path&&(this.path=b("path",{"pointer-events":"all"}),t.component.svg.appendChild(this.path),this.canvas=t.component.svg);var o=n&&1==n.length&&n[0].cssClass||"",s=[0,0];e.xmin<0&&(s[0]=-e.xmin),e.ymin<0&&(s[1]=-e.ymin),y(this.path,{d:i(t.d),"class":o,stroke:t.strokeStyle?t.strokeStyle:null,fill:t.fillStyle?t.fillStyle:null,transform:"translate("+s[0]+","+s[1]+")"})}};var i=function(t){return isNaN(t.cxy.x)||isNaN(t.cxy.y)?"":"M"+t.hxy.x+","+t.hxy.y+" L"+t.tail[0].x+","+t.tail[0].y+" L"+t.cxy.x+","+t.cxy.y+" L"+t.tail[1].x+","+t.tail[1].y+" L"+t.hxy.x+","+t.hxy.y};this.transfer=function(t){t.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),t.canvas.appendChild(this.path))}};n.extend(k,[e.jsPlumbUIComponent,e.Overlays.AbstractOverlay],{cleanup:function(t){null!=this.path&&(t?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(){this.path&&this.canvas&&null==this.path.parentNode&&this.canvas.appendChild(this.path)},setVisible:function(t){null!=this.path&&(this.path.style.display=t?"block":"none")}}),e.Overlays.svg.Arrow=function(){k.apply(this,[e.Overlays.Arrow,arguments])},n.extend(e.Overlays.svg.Arrow,[e.Overlays.Arrow,k]),e.Overlays.svg.PlainArrow=function(){k.apply(this,[e.Overlays.PlainArrow,arguments])},n.extend(e.Overlays.svg.PlainArrow,[e.Overlays.PlainArrow,k]),e.Overlays.svg.Diamond=function(){k.apply(this,[e.Overlays.Diamond,arguments])},n.extend(e.Overlays.svg.Diamond,[e.Overlays.Diamond,k]),e.Overlays.svg.GuideLines=function(){var t,n,i=null,o=this;e.Overlays.GuideLines.apply(this,arguments),this.paint=function(e,r){null==i&&(i=b("path"),e.connector.svg.appendChild(i),o.attachListeners(i,e.connector),o.attachListeners(i,o),t=b("path"),e.connector.svg.appendChild(t),o.attachListeners(t,e.connector),o.attachListeners(t,o),n=b("path"),e.connector.svg.appendChild(n),o.attachListeners(n,e.connector),o.attachListeners(n,o));var a=[0,0];r.xmin<0&&(a[0]=-r.xmin),r.ymin<0&&(a[1]=-r.ymin),y(i,{d:s(e.head,e.tail),stroke:"red",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),y(t,{d:s(e.tailLine[0],e.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+a[0]+","+a[1]+")"}),y(n,{d:s(e.headLine[0],e.headLine[1]),stroke:"green",fill:null,transform:"translate("+a[0]+","+a[1]+")"})};var s=function(t,e){return"M "+t.x+","+t.y+" L"+e.x+","+e.y}},n.extend(e.Overlays.svg.GuideLines,e.Overlays.GuideLines)}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},o=null;if(document.createStyleSheet&&document.namespaces){var s=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],r="behavior:url(#default#VML);position:absolute;";o=document.createStyleSheet();for(var a=0;a<s.length;a++)o.addRule(s[a],r);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}e.vml={};var l=1e3,c=function(t,e){for(var n in e)t[n]=e[n]},u=function(t,e,n,i,o,s){n=n||{};var r=document.createElement("jsplumb:"+t);return s?o.appendElement(r,i):i.appendChild(r),r.className=(n["class"]?n["class"]+" ":"")+"jsplumb_vml",d(r,e),c(r,n),r},d=function(t,e,n){t.style.left=e[0]+"px",t.style.top=e[1]+"px",t.style.width=e[2]+"px",t.style.height=e[3]+"px",t.style.position="absolute",n&&(t.style.zIndex=n)},h=e.vml.convertValue=function(t){return Math.floor(t*l)},p=function(t,e,n,i){"transparent"===e?i.setOpacity(n,"0.0"):i.setOpacity(n,"1.0")},f=function(t,e,i,o){var s={};if(e.strokeStyle){s.stroked="true";var r=n.convertStyle(e.strokeStyle,!0);s.strokecolor=r,p(s,r,"stroke",i),s.strokeweight=e.lineWidth+"px"}else s.stroked="false";if(e.fillStyle){s.filled="true";var a=n.convertStyle(e.fillStyle,!0);s.fillcolor=a,p(s,a,"fill",i)}else s.filled="false";if(e.dashstyle)null==i.strokeNode?i.strokeNode=u("stroke",[0,0,0,0],{dashstyle:e.dashstyle},t,o):i.strokeNode.dashstyle=e.dashstyle;else if(e["stroke-dasharray"]&&e.lineWidth){for(var l=-1==e["stroke-dasharray"].indexOf(",")?" ":",",d=e["stroke-dasharray"].split(l),h="",f=0;f<d.length;f++)h+=Math.floor(d[f]/e.lineWidth)+l;null==i.strokeNode?i.strokeNode=u("stroke",[0,0,0,0],{dashstyle:h},t,o):i.strokeNode.dashstyle=h}c(t,s)},m=function(){var t=this;e.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(e){t.opacityNodes.stroke=u("stroke",[0,0,1,1],{opacity:"0.0"},e,t._jsPlumb.instance),t.opacityNodes.fill=u("fill",[0,0,1,1],{opacity:"0.0"},e,t._jsPlumb.instance)},this.setOpacity=function(e,n){var i=t.opacityNodes[e];i&&(i.opacity=""+n)};var n=[];this.getDisplayElements=function(){return n},this.appendDisplayElement=function(e,i){i||t.canvas.parentNode.appendChild(e),n.push(e)}};n.extend(m,e.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});var g=e.ConnectorRenderers.vml=function(t,o){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var s=this._jsPlumb.instance.connectorClass+(t.cssClass?" "+t.cssClass:"");this.paint=function(r){if(null!==r){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var a=this.getSegments(),h={path:""},p=[this.x,this.y,this.w,this.h],m=0;m<a.length;m++)h.path+=e.Segments.vml.SegmentRenderer.getPath(a[m]),h.path+=" ";if(r.outlineColor){var g=r.outlineWidth||1,v=r.lineWidth+2*g,y={strokeStyle:n.convertStyle(r.outlineColor),lineWidth:v};for(var b in i)y[b]=r[b];null==this.bgCanvas?(h["class"]=s,h.coordsize=p[2]*l+","+p[3]*l,this.bgCanvas=u("shape",p,h,t.parent,this._jsPlumb.instance,!0),d(this.bgCanvas,p),this.appendDisplayElement(this.bgCanvas,!0),this.initOpacityNodes(this.bgCanvas,["stroke"]),this.bgCanvas._jsPlumb=o):(h.coordsize=p[2]*l+","+p[3]*l,d(this.bgCanvas,p),c(this.bgCanvas,h)),f(this.bgCanvas,y,this)}null==this.canvas?(h["class"]=s,h.coordsize=p[2]*l+","+p[3]*l,this.canvas=u("shape",p,h,t.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(this.canvas,["stroke"]),this.canvas._jsPlumb=o):(h.coordsize=p[2]*l+","+p[3]*l,d(this.canvas,p),c(this.canvas,h)),f(this.canvas,r,this,this._jsPlumb.instance)}}};n.extend(g,m,{setVisible:function(t){this.canvas&&(this.canvas.style.display=t?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=t?"block":"none")}});var v=e.VmlEndpoint=function(t){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(t.cssClass?" "+t.cssClass:""),t._jsPlumb.appendElement(this.canvas,t.parent),this.paint=function(t,e){var i={},o=this._jsPlumb.vml;n.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(i["class"]=this._jsPlumb.clazz,o=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],i,e,this.canvas,this._jsPlumb.instance),this.appendDisplayElement(o,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(o,["fill"])):(d(o,[0,0,this.w,this.h]),c(o,i)),f(o,t,this)}};n.extend(v,m),e.Segments.vml={SegmentRenderer:{getPath:function(t){return{Straight:function(t){var e=t.params;return"m"+h(e.x1)+","+h(e.y1)+" l"+h(e.x2)+","+h(e.y2)+" e"},Bezier:function(t){var e=t.params;return"m"+h(e.x1)+","+h(e.y1)+" c"+h(e.cp1x)+","+h(e.cp1y)+","+h(e.cp2x)+","+h(e.cp2y)+","+h(e.x2)+","+h(e.y2)+" e"},Arc:function(t){var e=t.params,n=Math.min(e.x1,e.x2),i=(Math.max(e.x1,e.x2),Math.min(e.y1,e.y2)),o=(Math.max(e.y1,e.y2),t.anticlockwise?1:0);return(t.anticlockwise?"at ":"wa ")+" "+function(){if(e.loopback)return"0,0,"+h(2*e.r)+","+h(2*e.r);var s=[null,[function(){return[n,i]},function(){return[n-e.r,i-e.r]}],[function(){return[n-e.r,i]},function(){return[n,i-e.r]}],[function(){return[n-e.r,i-e.r]},function(){return[n,i]}],[function(){return[n,i-e.r]},function(){return[n-e.r,i]}]][t.segment][o]();return h(s[0])+","+h(s[1])+","+h(s[0]+2*e.r)+","+h(s[1]+2*e.r)}()+","+h(e.x1)+","+h(e.y1)+","+h(e.x2)+","+h(e.y2)+" e"}}[t.type](t)}}},e.Endpoints.vml.Dot=function(){e.Endpoints.Dot.apply(this,arguments),v.apply(this,arguments),this.getVml=function(t,e,n,i,o){return u("oval",t,e,i,o)}},n.extend(e.Endpoints.vml.Dot,v),e.Endpoints.vml.Rectangle=function(){e.Endpoints.Rectangle.apply(this,arguments),v.apply(this,arguments),this.getVml=function(t,e,n,i,o){return u("rect",t,e,i,o)}},n.extend(e.Endpoints.vml.Rectangle,v),e.Endpoints.vml.Image=e.Endpoints.Image,e.Endpoints.vml.Blank=e.Endpoints.Blank,e.Overlays.vml.Label=e.Overlays.Label,e.Overlays.vml.Custom=e.Overlays.Custom;var y=function(t,e){t.apply(this,e),m.apply(this,e);var i=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var o=function(t){return"m "+h(t.hxy.x)+","+h(t.hxy.y)+" l "+h(t.tail[0].x)+","+h(t.tail[0].y)+" "+h(t.cxy.x)+","+h(t.cxy.y)+" "+h(t.tail[1].x)+","+h(t.tail[1].y)+" x e"};this.paint=function(t,s){if(t.component.canvas&&s){var r={},a=t.d,h=t.component;t.strokeStyle&&(r.stroked="true",r.strokecolor=n.convertStyle(t.strokeStyle,!0)),t.lineWidth&&(r.strokeweight=t.lineWidth+"px"),t.fillStyle&&(r.filled="true",r.fillcolor=t.fillStyle);var p=Math.min(a.hxy.x,a.tail[0].x,a.tail[1].x,a.cxy.x),f=Math.min(a.hxy.y,a.tail[0].y,a.tail[1].y,a.cxy.y),m=Math.max(a.hxy.x,a.tail[0].x,a.tail[1].x,a.cxy.x),g=Math.max(a.hxy.y,a.tail[0].y,a.tail[1].y,a.cxy.y),v=[p,f,Math.abs(m-p),Math.abs(g-f)];if(r.path=o(a),r.coordsize=h.w*l+","+h.h*l,v[0]=h.x,v[1]=h.y,v[2]=h.w,v[3]=h.h,null==i.canvas){var y=h._jsPlumb.overlayClass||"",b=e&&1==e.length&&e[0].cssClass||"";r["class"]=b+" "+y,i.canvas=u("shape",v,r,h.canvas.parentNode,h._jsPlumb.instance,!0),h.appendDisplayElement(i.canvas,!0)}else d(i.canvas,v),c(i.canvas,r)}},this.cleanup=function(){null!=this.canvas&&this._jsPlumb.instance.removeElement(this.canvas)}};n.extend(y,[m,e.Overlays.AbstractOverlay],{setVisible:function(t){this.canvas.style.display=t?"block":"none"}}),e.Overlays.vml.Arrow=function(){y.apply(this,[e.Overlays.Arrow,arguments])},n.extend(e.Overlays.vml.Arrow,[e.Overlays.Arrow,y]),e.Overlays.vml.PlainArrow=function(){y.apply(this,[e.Overlays.PlainArrow,arguments])},n.extend(e.Overlays.vml.PlainArrow,[e.Overlays.PlainArrow,y]),e.Overlays.vml.Diamond=function(){y.apply(this,[e.Overlays.Diamond,arguments])},n.extend(e.Overlays.vml.Diamond,[e.Overlays.Diamond,y])}.call(this),function(){"use strict";var t=this,e=t.jsPlumb,n=t.jsPlumbUtil,i=t.Katavorio,o=t.Biltong,s=function(t,e){var s="_katavorio_"+(e=e||"main"),r=t[s],a=t.getEventManager();return r||(r=new i({bind:a.on,unbind:a.off,getSize:jsPlumb.getSize,getPosition:function(e){var n=t.getOffset(e);return[n.left,n.top]},setPosition:function(t,e){t.style.left=e[0]+"px",t.style.top=e[1]+"px"},addClass:jsPlumb.addClass,removeClass:jsPlumb.removeClass,intersects:o.intersects,indexOf:n.indexOf,css:{noSelect:t.dragSelectClass,droppable:"jsplumb-droppable",draggable:"jsplumb-draggable",drag:"jsplumb-drag",selected:"jsplumb-drag-selected",active:"jsplumb-drag-active",hover:"jsplumb-drag-hover"}}),t[s]=r,t.bind("zoom",r.setZoom)),r},r=function(t,e){var i=function(i){if(e[i]){if(n.isString(e[i])){var o=e[i].match(/-=/)?-1:1,s=e[i].substring(2);return t[i]+o*s}return e[i]}return t[i]};return[i("left"),i("top")]};e.extend(t.jsPlumbInstance.prototype,{animationSupported:!0,scopeChange:function(){},getElement:function(t){return null==t?null:"string"==typeof(t="string"==typeof t?t:null!=t.length&&null==t.enctype?t[0]:t)?document.getElementById(t):t},removeElement:function(t){s(this).elementRemoved(t),this.getEventManager().remove(t)},doAnimate:function(t,e,n){n=n||{};var i=this.getOffset(t),o=r(i,e),s=o[0]-i.left,a=o[1]-i.top,l=n.duration||250,c=15,u=l/c,d=c/l*s,h=c/l*a,p=0,f=setInterval(function(){jsPlumb.setPosition(t,{left:i.left+d*(p+1),top:i.top+h*(p+1)}),null!=n.step&&n.step(),++p>=u&&(window.clearInterval(f),null!=n.complete&&n.complete())},c)},destroyDraggable:function(t,e){s(this,e).destroyDraggable(t)},destroyDroppable:function(t,e){s(this,e).destroyDroppable(t)},initDraggable:function(t,e,n){s(this,n).draggable(t,e)},initDroppable:function(t,e,n){s(this,n).droppable(t,e)},isAlreadyDraggable:function(t){return null!=t._katavorioDrag},isDragSupported:function(){return!0},isDropSupported:function(){return!0},isElementDraggable:function(t){return(t=jsPlumb.getElement(t))._katavorioDrag&&t._katavorioDrag.isEnabled()},getDragObject:function(t){return t[0].drag.getDragElement()},getDragScope:function(t){return t._katavorioDrag&&t._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(t){return t[0].e},getDropScope:function(t){return t._katavorioDrop&&t._katavorioDrop.scopes.join(" ")||""},getUIPosition:function(t){return{left:t[0].pos[0],top:t[0].pos[1]}},setDragFilter:function(t,e,n){t._katavorioDrag&&t._katavorioDrag.setFilter(e,n)},setElementDraggable:function(t,e){(t=jsPlumb.getElement(t))._katavorioDrag&&t._katavorioDrag.setEnabled(e)},setDragScope:function(t,e){t._katavorioDrag&&t._katavorioDrag.k.setDragScope(t,e)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},animEvents:{step:"step",complete:"complete"},stopDrag:function(t){
t._katavorioDrag&&t._katavorioDrag.abort()},addToDragSelection:function(t){s(this).select(t)},removeFromDragSelection:function(t){s(this).deselect(t)},clearDragSelection:function(){s(this).deselectAll()},getOriginalEvent:function(t){return t},trigger:function(t,e,n){this.getEventManager().trigger(t,e,n)},doReset:function(){for(var t in this)0===t.indexOf("_katavorio_")&&this[t].reset()}}),a=e.init,l=function(){/complete|loaded|interactive/.test(document.readyState)&&"undefined"!=typeof document.body&&null!=document.body?a():setTimeout(l,9)},l();var a,l}.call(this);var Graph={follow:function(t){this.showSpinner(t),new Geni.Request("/graph/follow",{method:"POST",parameters:{id:t},onSuccess:function(){this.showUnfollowBtn(t)}.bind(this),onComplete:function(){this.hideSpinner(t)}.bind(this)})},unfollow:function(t){this.showSpinner(t),new Geni.Request("/graph/unfollow",{method:"POST",parameters:{id:t},onSuccess:function(){this.showFollowBtn(t)}.bind(this),onComplete:function(){this.hideSpinner(t)}.bind(this)})},showFollowBtn:function(t){jQuery("#unfollow_btn_"+t).hide(),jQuery("#follow_btn_"+t).show()},showUnfollowBtn:function(t){jQuery("#follow_btn_"+t).hide(),jQuery("#unfollow_btn_"+t).show()},showSpinner:function(t){jQuery("#follow_btn_spinner_"+t).show()},hideSpinner:function(t){jQuery("#follow_btn_spinner_"+t).hide()},showSuggestionSpinner:function(t){jQuery("#suggestion_follow_btn_spinner_"+t).show()},replaceSuggestedFollow:function(t,e){jQuery("#suggested_following_"+t).replaceWith(e),jQuery("#suggested_following_"+t).fadeIn({duration:.4})},removeSuggestedFollow:function(t){jQuery("#suggested_following_"+t).length>0&&jQuery("#suggested_following_"+t)[0].parentNode.removeChild(jQuery("#suggested_following_"+t)[0])},displayedFollowingSuggestions:function(t){t=t||"following_suggestion_id";for(var e=document.getElementsByClassName(t),n="",i=0;i<e.length;i++)""!=n&&(n+=","),n+=e[i].innerHTML;return n},followingSuggestionAlreadyDisplayed:function(t,e){t=t||"following_suggestion_id";for(var n=document.getElementsByClassName(t),i=0;i<n.length;i++)if(-1!=e.indexOf(n[i].innerHTML))return!0;return!1},ignoreSuggestedFollowing:function(t,e){this.showSuggestionSpinner(t),e=e||"home";var n="following_suggestion_id";-1!=t.indexOf("project")&&(n="project_suggestion_id"),new Geni.Request("/graph/ignore_suggested_following",{method:"POST",parameters:{id:t,flow:e,exclude_ids:Graph.displayedFollowingSuggestions(n)},onSuccess:function(i){jQuery("#suggested_following_"+t).fadeOut({duration:.4,done:function(){if(i.responseText.blank()){Graph.removeSuggestedFollow(t),""==Graph.displayedFollowingSuggestions(n)&&(-1!=t.indexOf("project")?new Geni.Updater("suggested_projects_module_content","/project/suggested_projects_module_content?flow="+e,{method:"POST"}):new Geni.Updater("suggested_following_module_content","/graph/suggested_following_module_content?flow="+e,{method:"POST"}))}else{if(Graph.followingSuggestionAlreadyDisplayed(n,i.responseText))return void Graph.ignoreSuggestedFollowing(t,e);Graph.replaceSuggestedFollow(t,i.responseText)}}})}.bind(this)})},followAndSuggestAnotherFollowing:function(t,e){this.showSuggestionSpinner(t),e=e||"home";var n="following_suggestion_id";-1!=t.indexOf("project")&&(n="project_suggestion_id"),new Geni.Request("/graph/follow",{method:"POST",parameters:{id:t,flow:e,suggest_another:!0,exclude_ids:Graph.displayedFollowingSuggestions(n)},onSuccess:function(i){jQuery("#suggested_following_"+t).fadeOut({duration:.4,done:function(){if(i.responseText.blank()){Graph.removeSuggestedFollow(t),""==Graph.displayedFollowingSuggestions(n)&&(-1!=t.indexOf("project")?new Geni.Updater("suggested_projects_module_content","/project/suggested_projects_module_content?flow="+e,{method:"POST"}):new Geni.Updater("suggested_following_module_content","/graph/suggested_following_module_content?flow="+e,{method:"POST"}))}else{if(Graph.followingSuggestionAlreadyDisplayed(n,i.responseText))return void Graph.followAndSuggestAnotherFollowing(t,e);Graph.replaceSuggestedFollow(t,i.responseText)}}})}.bind(this)})}};getMoreDocuments=function(t,e,n){t=jQuery(t);var i=n&&n.controller?n.controller:"documents";t.append(Geni.Site.SpinnerTag),new Geni.Request("/"+i+"/select",{method:"POST",parameters:Object.assign(n,{page:e,more:1}),onSuccess:function(e){jQuery("#media_selector").append(e.responseText),t.remove()},onFailure:function(){t.html("There was an error retrieving your documents. Click here to try again.")}})},getDocumentCollection=function(t,e,n){new Geni.Updater(e,"/documents/select",{method:"get",parameters:Object.assign(n,{collection:t})})},getSourceCollection=function(t,e,n){new Geni.Updater(e,"/sources/select",{evalScripts:!0,method:"get",parameters:Object.assign(n,{collection:t})})},getSourceCollectionWithSelect=function(t,e,n,i,o){new Geni.Updater(e,"/sources/select",{method:"get",parameters:Object.assign(o,{collection:t,doc_id:n}),onComplete:function(){selectDocument(n,!1)}})},showFactsFor=function(t,e,n,i,o,s,r){t&&(hasUnsavedChanges()?Geni.confirm({title:"",content:tr("You have unsaved changes. Are you sure you want to switch to a different document?"),confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,confirm:function(){source_id=t,updateAndShowFacts(t,e,n,i,o,s,r)},cancel:function(){var t=jQuery("form#form_cite_source #source_id").val();t!=undefined&&selectDocument(t)}}):updateAndShowFacts(t,e,n,i,o,s,r,r))},updateAndShowFacts=function(t,e,n,i,o,s,r){asElement("facts_module").innerHTML="<div class='txt_c' style='margin-top:150px; margin-left: 195px;'>"+Geni.Site.SpinnerTag+"</div>",n?new Geni.Updater("#facts_module","/sources/facts",{evalScripts:!0,parameters:{id:e,source_id:t,more:1,union_focus_id:i,fact_focus:o,profile_focus_id:s,resolve_focus_id:r,authenticity_token:Geni.AuthenticityToken}}):new Geni.Updater("#facts_module","/documents/facts",{evalScripts:!0,parameters:{id:e,doc_id:t,more:1,authenticity_token:Geni.AuthenticityToken}})},hasUnsavedChanges=function(){return!!jQuery("#form_cite_source")&&("undefined"!=typeof changesToSave&&changesToSave>0)},removeDocumentFact=function(t,e,n,i,o){Geni.confirm({title:"",content:tr("Are you sure you want to remove this source?"),confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,confirm:function(){new Geni.Updater("#sources","/sources/remove_source_citation",{method:"post",parameters:{id:t,citation_id:e,field_name:n,union_id:i,document_id:o},onSuccess:function(){var e=jQuery("#"+t+"-fact-count").text().trim().split(" ")[0]-1,n="facts";1==e&&(n="fact");var i=e+" "+tr(n);jQuery("#"+t+"-fact-count").html(i)}})}})},removeFact=function(t,e,n,i,o,s){Geni.confirm({title:"",content:tr("Are you sure you want to remove this source?"),confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,confirm:function(){new Geni.Updater("#source_tab_content","/sources/remove_source_citation",{method:"post",parameters:{id:t,page_profile_id:e,citation_id:n,field_name:i,union_id:o,focus:s},onSuccess:function(){refreshInconsistencyCount()}})}})},removeSource=function(t,e,n){Geni.confirm({title:"",content:tr("Are you sure you want to remove this source?"),confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,confirm:function(){new Geni.Updater("#source_tab_content","/sources/remove_source_citation",{method:"post",parameters:{id:t,page_profile_id:t,citation_id:JSON.stringify(e),source_id:n},onSuccess:function(){var t=jQuery(".source-count").text().trim().split(/\(|\)/),e=parseInt(t[1])-1,n="";e>0&&(n="("+e+")"),jQuery(".source-count").html(n),refreshInconsistencyCount()}})}})},removeCitation=function(t,e,n,i){Geni.confirm({title:"",content:trl("Are you sure you want to remove this fact?"),confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,field_name:n,profile_id:t,union_id:i,confirm:function(){new Geni.Updater("#source_tab_content","/sources/remove_source_citation",{method:"post",parameters:{id:t,citation_id:e,field_name:n,union_id:i,lb:!0},onSuccess:function(){var e="fact-"+n.replace(/\W/,"-"),o=i==undefined?" #"+e:"#union-"+i+" #"+e;["Name","Parent Relationship"].includes(n)&&(o="#union-"+i+" #"+e+"-"+t),jQuery(o).removeAttr("disabled"),jQuery(o).prop("checked",!1),DocLightbox.prototype.dirty=!0},onFailure:function(){revertCheckBox(t,e,n,i),Geni.alert({content:trl("There was a problem removing this fact."),confirmButton:Geni.Strings.Ok})}})},cancel:function(){revertCheckBox(t,e,n,i)}})},revertCheckBox=function(t,e,n,i){var o="fact-"+n.replace(/\W/,"-"),s=i==undefined?"#"+o+"-"+t:"#union-"+i+" #"+o;["Name","Parent Relationship"].includes(n)&&(s="#union-"+i+" #"+o+"-"+t),jQuery(s).prop("checked",!0)},all_relationships=function(t){jQuery("#union-"+t).fadeOut("fast"),start_spinner(),jQuery(".source_citation_language").hide(),jQuery(".source_citation_value").hide(),jQuery(".source_citation_note").hide(),jQuery("#additional_information").hide(),jQuery("#union-0").delay(1e3).removeAttr("img").fadeIn("fast",function(){stop_spinner()}),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"down",fromWhere:"all_relationships"})},next_relationship=function(t){var e=JSON.parse(union_ids.value),n=e.length,i=e.indexOf(t);jQuery("#union-"+t).fadeOut("fast"),start_spinner(),jQuery(".source_citation_language").hide(),jQuery(".source_citation_value").hide(),jQuery(".source_citation_note").hide(),jQuery("#additional_information").hide(),i>=n-1?jQuery("#union-"+e[0]).delay(1e3).removeAttr("img").fadeIn("fast",function(){stop_spinner()}):jQuery("#union-"+e[i+1]).delay(1e3).removeAttr("img").fadeIn("fast",function(){stop_spinner()}),manage_prev_next_buttons(i+1,n,e),Geni.isMobilePhone()&&window.callElongateChildrenListContainer(),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"down",fromWhere:"next_relationship"})},prev_relationship=function(t){var e=JSON.parse(union_ids.value),n=e.length,i=e.indexOf(t);jQuery("#union-"+t).fadeOut("fast"),start_spinner(),jQuery(".source_citation_language").hide(),jQuery(".source_citation_value").hide(),jQuery(".source_citation_note").hide(),jQuery("#additional_information").hide(),0===i?jQuery("#union-"+e[0]).delay(1e3).fadeIn("fast",function(){stop_spinner()}):jQuery("#union-"+e[i-1]).delay(1e3).fadeIn("fast",function(){stop_spinner()}),manage_prev_next_buttons(i-1,n,e),Geni.isMobilePhone()&&window.callElongateChildrenListContainer(),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"down",fromWhere:"prev_relationship"})},goto_relationship=function(t){var e=JSON.parse(union_ids.value),n=e.length,i=e.indexOf(t);jQuery("#union-0").fadeOut("fast"),start_spinner(),jQuery(".source_citation_language").hide(),jQuery(".source_citation_value").hide(),jQuery(".source_citation_note").hide(),0===i?jQuery("#union-"+e[0]).delay(1e3).fadeIn("fast",function(){stop_spinner()}):jQuery("#union-"+e[i]).delay(1e3).fadeIn("fast",function(){stop_spinner()}),manage_prev_next_buttons(i,n,e),Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAdditionalInformatioPanel&&window.callSlideUpAdditionalInformatioPanel({direction:"down",fromWhere:"goto_relationship"}),Geni.isMobilePhone()&&window.callElongateChildrenListContainer()},goto_profile=function(t,e){JSON.parse(jQuery("#profile_ids").val());jQuery("#profile_facts_container #profile-0").hide(),jQuery(".facts_container").hide(),jQuery("#profile_facts_container #profile-"+t).show(),jQuery("#profile_index_link").show(),jQuery("#header_profile_name").fadeOut(500,function(){jQuery("#header_profile_name").text(e)}).fadeIn(1e3)},goto_profile_index=function(){jQuery(".facts_container").hide(),jQuery("#additional_information").hide(),jQuery("#profile_index_link").hide(),jQuery("#profile_facts_container #profile-0").show()},start_spinner=function(){Geni.isMobilePhone()&&window.callShowProgressIndicator?window.callShowProgressIndicator():jQuery("#union_container").addClass("union_container_loading")},stop_spinner=function(){Geni.isMobilePhone()&&window.callHideProgressIndicator?window.callHideProgressIndicator():jQuery("#union_container").removeClass("union_container_loading")},manage_prev_next_buttons=function(t,e,n){0===t&&e-1>0?(jQuery("#union-"+n[t]+" #next_relationship").show(),jQuery("#union-"+n[t]+" a#prev_relationship").replaceWith("<div id='prev_relationship'>&nbsp;</div>")):t===e-1?(jQuery("#union-"+n[t]+" #next_relationship").hide(),jQuery("#union-"+n[t]+" #prev_relationship").show()):(jQuery("#union-"+n[t]+" #next_relationship").show(),jQuery("#union-"+n[t]+" #prev_relationship").show())},resetMiniFacts=function(t){t?jQuery("#facts_module").html("<h4 class='txt_c' style='color:#9a9a9a; padding-left:40px; padding-right:40px; padding-top:135px;'>"+tr("Fact citations saved! Select another document from the list to add more citations.")+"</h4>"):jQuery("#facts_module").html(""),jQuery("#media_selector").find(".selected")&&jQuery("#media_selector").find(".selected").removeClass("selected")},openCitationsAddNewDocument=function(t,e,n){setTimeout(function(){"undefined"!=typeof window.callCreateScrollableModal&&window.callCreateScrollableModal(t),openDocs(e,{class_and_id:n,origin:"citations_lb"})},50)},DocLightbox.prototype={lightboxPath:"/documents/upload_lightbox",displayAndEditPath:"/documents/view_and_edit_lightbox",displayPath:"/documents/view_lightbox",selectPath:"/documents/select",selectAndCitePath:"/sources/select_and_cite",saveCitationPath:"/sources/add_source_citation",editPath:"/documents/edit",updatePath:"/documents/update_document",statusPath:"/documents/check_status",associatePath:"/documents/associate",updateTilePath:"/documents/tile",profilesPath:"/documents/profiles",iframe:"document_upload_frame",zIndex:9001,lbWidth:"90vw",lbMaxWidth:"850px",dirty:!1,lbMode:!0,class_and_id:"",toplb:null,parseConfig:function(){this.getConfig("onClose")&&(this.onClose=this.getConfig("onClose"))},setConfig:function(t,e){window.documents_config||(window.documents_config={}),window.documents_config[t]=e},getConfig:function(t){return window.documents_config?window.documents_config[t]:null},addLightbox:function(t){var e=this.zIndex+=2,n={panelClass:"modal_lightbox",displayOverlay:!0,loadingText:Geni.Site.SpinnerTag,width:this.lbWidth,maxWidth:this.lbMaxWidth,zIndex:e,panelId:"document_"+e,overlayId:"overlay_"+e,onClose:this.closeLightbox.bind(this),onLoadComplete:this.onLoadComplete.bind(this)},i=new Panel(jQuery.extend(n,t));return this.toplb=i,this.lbs.push(i),i.open(),i},closeLightbox:function(t){this.lbs=this.lbs.filter(e=>e!==t),0==this.lbs.length?this.destroy():this.toplb=jQuery(this.lbs).last()},onLoadComplete:function(){this.errorMessage&&this.setNotice(this.errorMessage)},destroy:function(){this.dirty&&(this.onClose?this.onClose.apply():window.location.reload()),this.lbs.length>0&&(this.lbs.each(function(t){t.close()}),this.lbs=[]),window.docLightbox=null},upload:function(t){return this.class_and_id=t.class_and_id,this.pathParams={section:"upload",id:this.class_and_id,origin:t.origin||""},this.uploadLightbox=this.addLightbox({url:this.lightboxPath,ajaxOptions:{parameters:this.pathParams,evalScripts:!0}}),this.track("lb_upload"),this},uploadDocument:function(t){if(jQuery("#url_input_0")[0]&&!jQuery("#url_input_0")[0].value)return alert("Please enter a URL");jQuery("#upload_buttons").hide(),jQuery("#"+t).submit()},evalUploadResponse:function(t){if(t.documents&&(this.documents=t.documents.split(",")),1==t.edit)return this.viewAndEdit(this.class_and_id,this.documents),this.uploadLightbox.close(),!1;if(t.error||!t.documents){var e=this.uploadLightbox,n=this.upload(this.class_and_id);e&&e.close(),n&&(n.errorMessage=t.response)}else t.processing?(this.processing=t.documents,this.checkUploadStatus(t)):this.completeUpload(t.notice)},setNotice:function(t){0!==jQuery("#lb_notice").length&&jQuery("#lb_notice").addClass("warning_msg").text(t)},checkUploadStatus:function(){Geni.isMobilePhone()&&window.callShowProgressIndicator?window.callShowProgressIndicator():jQuery("#document_wrapper").html(jQuery("#processing_status").html()),new Geni.Request(this.statusPath,{method:"get",evalJSON:!0,parameters:{"docs[]":this.processing},onSuccess:function(t){if(Geni.isMobilePhone()&&window.callHideProgressIndicator&&window.callHideProgressIndicator(),t&&t.responseText&&!t.responseText.blank()){var e=JSON.parse(t.responseText);this.processing=e.pending,this.processing&&this.processing.length>0?window.setTimeout(this.checkUploadStatus.bind(this),1e3):this.completeUpload()}}.bind(this),onFailure:function(){jQuery("#upload_buttons")&&jQuery("#upload_buttons").show();var t="We encountered an error uploading your document.";this.error("upload",{msg:t})}.bind(this)})},completeUpload:function(){if("citations_lb"==this.pathParams.origin)return Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAddSourceCitationPanel&&window.callSlideUpAddSourceCitationPanel({direction:"down",fromWhere:"completeUpload"}),this.uploadLightbox.close(),openDocs("cite",{class_and_id:this.class_and_id,documents_uploaded:this.documents}),!1;this.dirty=!0,this.view(this.class_and_id,this.documents),this.uploadLightbox&&this.uploadLightbox.close()},view:function(t,e,n){return jQuery(".t_Tooltip").hide(),this.documents=e,this.class_and_id=t,this.selected_id=n,this.viewLightbox?(this.viewLightbox.ajaxOptions.parameters={documents:e.join(","),id:t,selected:this.selected_id},this.viewLightbox.loadInfo(this.displayPath)):this.viewLightbox=this.addLightbox({url:this.displayPath,onLoadComplete:this.resize.bind(this),ajaxOptions:{parameters:{documents:e.join(","),id:t,selected:this.selected_id}}}),this.track("lb_view"),this},viewAndEdit:function(t,e){return this.documents=e,this.class_and_id=t,this.viewLightbox=this.addLightbox({url:this.displayAndEditPath,onLoadComplete:this.resize.bind(this),ajaxOptions:{parameters:{document:e[0],id:t,origin:"citations_lb",mode:"edit"}}}),this.track("lb_view"),this},swapUploadTabs:function(t){this.uploadLightbox&&(Geni.isMobilePhone()&&"undefined"!=typeof window.callSlideUpAddSourceCitationPanel&&window.callSlideUpAddSourceCitationPanel({direction:"up",fromWhere:"swapUploadTabs"}),this.wait(),this.pathParams.section=t.docType,this.uploadLightbox.update(this.lightboxPath+"?"+Object.keys(this.pathParams).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.pathParams[t])}`).join("&")))},wait:function(){Geni.isMobilePhone()&&window.callShowProgressIndicator&&(window.callShowProgressIndicator(),setTimeout(()=>{window.callHideProgressIndicator()},1100))},edit:function(t,e){return this.class_and_id=this.class_and_id||e,this.editorLightbox=this.addLightbox({url:this.editPath,ajaxOptions:{parameters:{doc_id:t,id:this.class_and_id,lightbox:!0}}}),this.track("edit"),this},submitEdit:function(t,e){this.dirty=!0,new Geni.Request(this.updatePath,{evalScripts:!0,parameters:jQuery("#"+t).serializeObject(),onLoading:function(){jQuery("#"+t+" :input").prop("disabled",!0),this.savingButton("edit_submit_button")}.bind(this),onSuccess:function(){this.lbMode?this.view(this.class_and_id,this.documents,this.selected_id):jQuery("#doc_tile_"+e).length>0&&(this.loadTile(e),this.dirty=!1),this.editorLightbox.close()}.bind(this),onFailure:function(){jQuery("#"+t+" :input").prop("disabled",!1);var e="We encountered an error saving your edit.";this.error("edit",{msg:e})}.bind(this)})},profiles:function(t){return this.profilesLightbox=this.addLightbox({width:"500px",url:this.profilesPath,ajaxOptions:{parameters:{doc_id:t}}}),this.track("profiles"),this},submitProfiles:function(t){this.dirty=!0,new Geni.Request(this.updatePath,{evalScripts:!0,parameters:jQuery("#"+t).serializeObject(),onLoading:function(){this.savingButton("profiles_submit_button"),jQuery("#"+t+" :input").prop("disabled",!0)}.bind(this),onSuccess:function(){this.profilesLightbox.close()}.bind(this),onFailure:function(){jQuery("#"+t+" :input").prop("disabled",!1);var e="We could not load profiles for this document.";this.error("profiles",{msg:e})}.bind(this)})},loadTile:function(t){var e=document.getElementById("doc_tile_"+t);e&&(G.UI.TooltipManager.clearCache("/documents/hovercard?doc_id="+t+"&id="+this.class_and_id),new Geni.Request(this.updateTilePath,{parameters:{doc_id:t,id:this.class_and_id,doc_count:e.getAttribute("doc_count")},onLoading:function(){},onSuccess:function(t){e.replace(t.responseText)}}))},selectAndCite:function(t,e){return(e=e||{}).documents_uploaded?1===e.documents_uploaded.length&&(source_id=e.documents_uploaded[0],e.doc_id=source_id):source_id=e.doc_id,this.setConfig("facts",e.facts),this.chooserLightbox=this.addLightbox({url:this.selectAndCitePath,ajaxOptions:{evalScripts:!0,parameters:{id:t,lightbox:!0,"facts[]":e.facts,doc_id:e.doc_id,source_id:source_id,union_focus_id:e.union_focus_id,fact_focus:e.fact_focus,profile_focus_id:e.profile_focus_id,resolve_focus_id:e.resolve_focus_id}},width:"830px"}),source_id?this.track("edit"):this.track("cite"),this},choose:function(t,e,n){return n=n||{},this.setConfig("facts",n.facts),this.chooserLightbox=this.addLightbox({url:this.selectPath,ajaxOptions:{parameters:{id:t,multi_select:booleanHelper("associate"==e),only_tagged:booleanHelper("cite"==e),hide_tagged:booleanHelper("associate"==e),select_action:e,lightbox:!0,"facts[]":n.facts}}}),this.track("chooser"),this},submitCite:function(t,e){isPageProfileMissing(t)?(Geni.PageProfile.name==undefined||""==Geni.PageProfile.name?message=trl("No facts have been cited for the current profile. If you want this source citation to be listed on this profile, please confirm a fact in the [bold:Basic Information] tab, or choose the profile's name in the [bold:Relationships] tab. Click cancel to return to the form.",""):message=trl("No facts have been cited for the current profile. If you want this source citation to be listed on the profile for [bold:{name}], please confirm a fact in the [bold:Basic Information] tab, or choose the profile's name in the [bold:Relationships] tab. Click cancel to return to the form.","",{name:Geni.PageProfile.name}),Geni.confirm({title:trl("No Citations for Current Profile"),content:message,confirmButton:Geni.Strings.Ok,cancelButton:Geni.Strings.Cancel,keyboardEnabled:!0,confirm:function(){DocLightbox.prototype.saveForm(t,e)},cancel:function(){}})):DocLightbox.prototype.saveForm(t,e)},saveForm:function(t,e){this.dirty=!0,new Geni.Request(this.saveCitationPath,{evalScripts:!0,parameters:jQuery("#"+t).serializeObject(),onLoading:function(){jQuery("#"+t+" :input").prop("disabled",!0),e&&this.savingButton("submit_cite_button")}.bind(this),onSuccess:function(){changesToSave=0,e?(Geni.isMobilePhone()&&window.callSlideBackToMoreForm({calledFrom:"saveForm-onSuccess"}),resetMiniFacts(!0)):(this.citationLightbox.close(),this.lb||this.destroy())}.bind(this),onFailure:function(){resetMiniFacts(!1);var t="We encountered an error saving your citation.";this.error("cite",{msg:t})}.bind(this)})},associate:function(form_id,class_and_id){this.dirty=!0,this.class_and_id=class_and_id;var doc_ids=[];return jQuery("#"+form_id+" input[type=checkbox]:checked").each(function(){doc_ids.push(jQuery(this).attr("doc_id"))}),new Geni.Request(this.associatePath,{method:"post",evalScripts:!0,parameters:{id:class_and_id,"doc_ids[]":doc_ids,lightbox:!0},onLoading:function(){jQuery("#"+form_id).disable(),this.savingButton("submit_button")}.bind(this),onSuccess:function(response){-1!=this.class_and_id.indexOf("profile")&&this.view(this.class_and_id,eval(response.responseText)),this.chooserLightbox.close()}.bind(this),onFailure:function(){var t="We encountered an error associating this profile with this document.";this.error("associate",{msg:t}),this.chooserLightbox.close()}.bind(this)}),!1},swapDocuments:function(t){this.selected_id=t;try{jQuery("#document_thumbnails").find(".selected").each(function(t){t.removeClass("selected")}),jQuery("#doc_tmb_"+t).addClass("selected")}catch(e){}new Geni.Updater("#document_view","/documents/lb_view",{parameters:{id:this.class_and_id,doc_id:this.selected_id}})},swapDocumentPage:function(t,e,n){new Geni.Updater("#document_view","/documents/lb_view",{parameters:{id:this.class_and_id,doc_id:this.selected_id,current_page:e+n}})},resize:function(){document.getElementById("document_wrapper")&&(jQuery("#document_wrapper").css({height:document.documentElement.clientHeight-240+"px"}),this.updateSize())},savingButton:function(t){jQuery("#"+t)&&(jQuery("#"+t).removeClass("blue"),jQuery("#"+t).addClass("white"),jQuery("#"+t).html("<span>Saving...&nbsp;&nbsp;"+Geni.Site.SpinnerTag+"</span>"),jQuery("#"+t).on("click",""))},error:function(t,e){this.track("error/"+t),e||(e={}),e.msg&&alert(e.msg)},updateSize:function(){jQuery(this.toplb).length>0&&jQuery(this.toplb)[0].setPosition()},track:function(t){try{ga("send","pageview","/documents/"+t)}catch(e){}}};var Revision=function(t,e,n,i){this.nodeId=t,this.action=e,this.tab=n,this.tabHtml="",this.rh_locale=i,this.element=jQuery("#history_content"),this.element.on("change","input[type=radio]",this.updateRadios.bind(this)),this.updateRadios()};Revision.prototype={showTab:function(t){this.tab=t,this.ajaxUpdate("list",{})},showRevisionTab:function(){this.showTab(Geni.revision.tab)},showList:function(t){this.ajaxUpdate("list",{page:t})},compareRevisions:function(t,e){t&&e?this.ajaxUpdate("compare",{from_id:t,to_id:e}):alert("Please select a 'from' revision using the left radio buttons, and a 'to' revision using the right radio buttons.")},compareFormRevisions:function(t,e,n){this.compareRevisions($RF(t,e),$RF(t,n))},showRevision:function(t){this.ajaxUpdate("show",{rev_id:t})},updateRadios:function(){for(var t=0,e=!1,n=!1;from_rb=jQuery("#"+this.tab+" #compare_from_"+t)[0],to_rb=jQuery("#"+this.tab+" #compare_to_"+t)[0],t+=1,from_rb!=undefined;)from_rb.disabled=!e,from_rb.checked&&(n=!0),to_rb.disabled=!!n,to_rb.checked&&(e=!0)},ajaxUpdate:function(t,e){this.action=t,this.showSpinner();var n={graph_node_id:this.nodeId,a:this.action,tab:this.tab,lbc:1};this.rh_locale&&(n.rh_locale=this.rh_locale),jQuery.ajax("//"+window.location.host+"/revisions/history",{data:jQuery.extend(n,e),context:this,success:function(e){this.updateTab(t,e),bindInlineEventHandlers()},error:function(){this.showError()}})},tabSel:function(){return jQuery("#"+this.tab)},actionSel:function(t){return t?this.tabSel().find("div[data-action="+t+"]"):this.tabSel().find("div[data-action]:visible")},showSpinner:function(){this.updateTab("compare",'<div class="txt_c">'+Geni.Site.SpinnerTag+"</div>")},showError:function(){this.updateTab('<span class="warning_msg pll prl bord1">Error</span>')},updateTab:function(t,e){this.actionSel(t).html(e),this.actionSel(t).is(":visible")||(this.actionSel().hide(),this.actionSel(t).fadeIn(50)),"list"==t&&this.updateRadios},selectColumnData:function(t,e){for(var n,i=t.find("input").first(),o=0,s=jQuery(t.children("th,td")[o]);s.length>0;)o==e?(s.prop("tagName").match(/td/i)&&s.addClass("selected"),n=s.find("[data-rev-id]").first().data("rev-id")):s.removeClass("selected"),s=jQuery(t.children("th,td")[++o]);i.length>0&&(n==undefined?i.value="":i.val(n))},selectData:function(t){var e=jQuery(t.target).closest("td"),n=e.prevAll().length,i=e.parents("tr");this.selectColumnData(i,n)},selectColumn:function(t){for(var e=jQuery(t.target).parents("th").first(),n=e.prevAll().length,i=e.parents("table").first(),o=0,s=jQuery(i.find("tr")[o]);s.length>0;)this.selectColumnData(s,n),s=jQuery(i.find("tr")[++o])}};var SleepWakeMonitor=function(t){var e=this;this.initialize=function(t){t=t||{},e.monitoredElement=t.monitoredElement||window,e.wakeEvents=t.wakeEvents||["focus","mousemove","touchmove"],e.sleepTimeoutSeconds=t.sleepTimeoutSeconds||3600},this.start=function(){return jQuery(e.monitoredElement).on(e.wakeEvents.join(" "),e.onWake),e.isMonitoringWindow()&&e.monitorWindowEvents(),e.startSleepTimer(),e},this.monitorWindowEvents=function(){e.isMonitoringFocusEvent()&&(e.oldOnFocus=window.onfocus,window.onfocus=function(t){e.oldOnFocus&&e.oldOnFocus(t),e.onWake(t)})},this.stop=function(){return jQuery(e.monitoredElement).off(e.wakeEvents.join(" "),e.onWake),e.isMonitoringWindow()&&e.unMonitorWindowEvents(),e.clearSleepTimer(),e},this.unMonitorWindowEvents=function(){e.isMonitoringFocusEvent()&&(window.onfocus=e.oldOnFocus)},this.isMonitoringWindow=function(){return e.monitoredElement==window},this.isMonitoringFocusEvent=function(){return e.wakeEvents.indexOf("focus")>-1},this.isAsleep=function(){return!e.sleepTimer},this.setAsleep=function(){return e.clearSleepTimer(),e},this.clearSleepTimer=function(){return e.sleepTimer&&clearTimeout(e.sleepTimer),e.sleepTimer=null,e},this.startSleepTimer=function(){return e.clearSleepTimer(),e.sleepTimer=setTimeout(e.onSleep,1e3*e.sleepTimeoutSeconds),e},this.onSleep=function(){e.clearSleepTimer(),e.onStateChangeCallbacks&&e.onStateChangeCallbacks.fire("asleep"),e.onSleepCallbacks&&e.onSleepCallbacks.fire("asleep")},this.onWake=function(){e.isAsleep()&&(e.onStateChangeCallbacks&&e.onStateChangeCallbacks.fire("awake"),e.onWakeCallbacks&&e.onWakeCallbacks.fire("awake")),e.startSleepTimer()},this.addOnWakeCallback=function(t){return e.onWakeCallbacks=e.onWakeCallbacks||jQuery.Callbacks(),e.onWakeCallbacks.add(t),e},this.addOnSleepCallback=function(t){return e.onSleepCallbacks=e.onSleepCallbacks||jQuery.Callbacks(),e.onSleepCallbacks.add(t),e},this.addOnStateChangeCallback=function(t){return e.onStateChangeCallbacks=e.onStateChangeCallbacks||jQuery.Callbacks(),e.onStateChangeCallbacks.add(t),e},this.initialize(t)};
/******************************************
 * ContainerFetcher
 *
 * @author          Michael Stangel
 * @copyright       Copyright (c) 2019 MyHeritage, Ltd.
 * @license         Distribution and re-use prohibited
 * @version         1.2
 *
 ******************************************/
var ContainerFetcher=function(t){this.nodeElement=jQuery(t),this.nodeElement.length>0?(this.templateElement=this.nodeElement.closest(".template-container"),this.templateElement.length>0?(this.nodeElement.addClass("template-hooked"),this.onVisible(this.fetch.bind(this))):this.alert("Error: cannot find template-container for node")):this.alert("Error: template node not found")};ContainerFetcher.bindTemplateNodes=function(){jQuery(".template-node:not(.template-hooked)").each(function(t,e){new ContainerFetcher(e)})},ContainerFetcher.prototype={alert:function(t){console.log(t)},onVisible:function(t){var e=this;if(this.nodeElement.is(":visible"))t(this.nodeElement[0]);else if("function"==typeof IntersectionObserver){(n=new IntersectionObserver(function(){e.nodeElement.is(":visible")&&t(e.nodeElement[0])},{})).observe(this.nodeElement[0])}else if("function"==typeof MutationObserver){var n=new MutationObserver(function(){e.nodeElement.is(":visible")&&t(e.nodeElement[0])});"none"==this.nodeElement.css("display")?n.observe(this.nodeElement[0],{attributes:!0}):this.nodeElement.parents().each(function(t,e){return"none"!=jQuery(e).css("display")||(n.observe(e,{attributes:!0}),!1)})}},fetch:function(){var t=this,e=this.nodeElement.data("template-params")||{},n=this.templateElement.data("template-url"),i=this.nodeElement.closest(".template-node-wrapper");if(0==i.length&&(i=this.nodeElement.closest(".template-node-replace")),0==i.length&&(i=this.nodeElement),n){n=n.replace(/\{[^\}]+\}/g,function(t){return value=e[t.substring(1,t.length-1)],"undefined"==typeof value?"":value});jQuery.ajax(n).done(function(n){i.hasClass("template-node-replace")?i.replaceWith(n):i.html(n),t.callbackDone(e),n.indexOf("template-container")&&window.setTimeout(ContainerFetcher.bindTemplateNodes,50)}).fail(function(n,i,o){t.alert("Ajax call failed: "+n.responseText),t.callbackFail(e,n.responseText,o)})}else this.alert("Error: template URL is blank!")},callbackDone:function(t){var e=window[this.templateElement.data("template-done")];"function"==typeof e&&e(this.nodeElement[0],t)},callbackFail:function(t,e,n){var i=window[this.templateElement.data("template-fail")];"function"==typeof i&&i(this.nodeElement[0],t,e,n)}},GeniLoader.ready(function(){ContainerFetcher.bindTemplateNodes()}),FamilyMapper.prototype.initialize=function(){var t={zoom:2,center:new google.maps.LatLng(this.mapData.panTo.lat,this.mapData.panTo.lng),mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(this.$map[0],t),this.addMarkers(),this.bindEvents()},FamilyMapper.prototype.bindEvents=function(){var t=this;jQuery(".add-location").click(function(e){e.preventDefault(),t._addLocation(jQuery(this))}),jQuery(".cancel","#add-location-controls").click(function(){t._toggleInputs("disable"),t._hide()}),jQuery(".clear","#add-location-content").click(function(e){e.preventDefault(),t._toggleInputs("disable")}),jQuery(".submit","#add-location-content").click(function(e){e.preventDefault(),t._onSubmit()}),jQuery("input[type=checkbox]","#toggle-markers").click(function(){t._manageMarkers(jQuery(this))})},FamilyMapper.prototype.addMarkers=function(){var t=this;_.each(this.mapData.markers,function(e){t._placeMarker(e.type,{name:e.name,profiles:e.profiles,locationName:e.locationName,locationAbbr:e.locationAbbr,position:new google.maps.LatLng(e.latitude,e.longitude),icon:t.markerURLs[e.type]})});for(var e=0,n=Object.keys(this.markers),i=n.length;e<i;e++)for(var o=0;o<this.markers[n[e]].length;o++)this.markers[n[e]][o].addListener("click",function(e){t.onMarkerClick(e.latLng)})},FamilyMapper.prototype._placeMarker=function(t,e){var n={map:this.map,draggable:!1};e=e||{},e=_.extend(n,e);var i=!1,o=null;return _.each(this.markers[t],function(t){if(Geni.util.coordinatesDistanceMeters(t.getPosition().lat(),t.getPosition().lng(),e.position.lat(),e.position.lng())<10){var n=t.getTitle()+"\n"+e.name,s=t.profiles.concat(e.profiles);t.setOptions({title:n,profiles:s,animation:e.animation||null}),o=t,i=!0}}),i||(e.title=e.locationAbbr+":\n"+e.name,o=new google.maps.Marker(e),this.markers[t]=this.markers[t]||[],this.markers[t].push(o)),this._incrementCount(),jQuery("#show_"+t).parent().show(),o},FamilyMapper.prototype._placeHighlightMarker=function(t){var e=this,n={map:this.map,draggable:!1,position:t,icon:this.markerURLs.highlight};this.highlightMarker=new google.maps.Marker(n),this.highlightMarker.addListener("click",function(t){e.onMarkerClick(t.latLng)})},FamilyMapper.prototype._removeHighlightMarker=function(){this.highlightMarker&&(this.highlightMarker.setMap(null),this.highlightMarker=null)},FamilyMapper.prototype.onMarkerClick=function(t){if(this._removeHighlightMarker(),jQuery("#map-profiles .map-profile").hide(),this.lastLatLng&&this.lastLatLng.lat()==t.lat()&&this.lastLatLng.lng()==t.lng())return jQuery("#map-profiles").animate({width:"hide"},400),void(this.lastLatLng=null);this.lastLatLng=t,this._placeHighlightMarker(t);for(var e=null,n=0,i=Object.keys(this.markers),o=i.length;n<o;n++)for(var s=0;s<this.markers[i[n]].length;s++)if(this.markers[i[n]][s].position.lat()==t.lat()&&this.markers[i[n]][s].position.lng()==t.lng()){!e&&this.markers[i[n]][s].locationName&&(e=this.markers[i[n]][s].locationName);for(var r=0;r<this.markers[i[n]][s].profiles.length;r++)jQuery("#map-profiles .map-profile[data-profile-id="+this.markers[i[n]][s].profiles[r]+"]").show()}jQuery("#map-profiles span[data-location-name]").html(e||trl("here")),jQuery("#map-profiles").animate({width:"show"},400)},FamilyMapper.prototype._addLocation=function(t){var e=jQuery("#add-location-container");e.length>0?e.fadeIn():(e=jQuery(this._getAddLocationTemplate()).css({display:"none"}),this.$map.append(e),this._buildLocationTagger(),e.fadeIn(),this.bindEvents()),this.curName=jQuery(t).closest(".marker").find(".marker-name").text().trim(),this.curID=t.attr("id"),this.curType=t.attr("data-type"),jQuery("h1",e).html(tr("Add "+this.mapData.addrDesc+" for {profile}",null,{profile:Geni.util.escapeHTML(this.curName)}))},FamilyMapper.prototype._getAddLocationTemplate=function(){return"addLocationTemplate"in this||(this.addLocationTemplate=getGeniTemplate("map.family.add-location")),this.addLocationTemplate},FamilyMapper.prototype._buildLocationTagger=function(){var t=this;new LocationTagger("add-location-tagger",{clear_button:"",details_button:"",prefix:"fm",onSelect:function(){t._onSelect("enable")}})},FamilyMapper.prototype._onSelect=function(){this._toggleInputs("enable")},FamilyMapper.prototype._onSubmit=function(){if(this._shouldSubmit()){var t=this;this._ajaxAddLocation(function(e){var n=new google.maps.LatLng(jQuery("#fm_latitude").val(),jQuery("#fm_longitude").val()),i=t._placeMarker(t.curType,{name:e.responseJSON.name,profiles:[e.responseJSON.profile_id],locationName:e.responseJSON.location_name,locationAbbr:e.responseJSON.location_abbr,position:n,animation:google.maps.Animation.BOUNCE,icon:t.markerURLs[t.curType]});setTimeout(function(){i.setAnimation(null)},3e3),1==i.profiles.length&&i.addListener("click",function(e){t.onMarkerClick(e.latLng)});var o=document.createElement("div");o.className="map-profile",o.setAttribute("data-profile-id",e.responseJSON.profile_id);var s=document.createElement("div");s.className="bd",o.appendChild(s);var r=document.createElement("strong");r.innerHTML=e.responseJSON.hovercard,s.appendChild(r);var a=document.createElement("div");a.className="quiet small",a.innerHTML=e.responseJSON.rel,s.appendChild(a),document.getElementById("map-profiles").appendChild(o),Geni.J&&Geni.J.TippedTip&&Geni.J.TippedTip.makeTippedTip(),t._decrementCount(),t.map.panTo(n),t._toggleInputs("disable"),t._hide(),jQuery("#marker_"+t.curID).fadeOut(1e3)})}else{var e=jQuery("#add-location-tagger").css("borderColor");jQuery("#add-location-tagger").val(trl("Please enter a location.")).animate({borderColor:"red"},2e3,function(){jQuery(this).css({borderColor:e})})}},FamilyMapper.prototype._toggleInputs=function(t){var e=jQuery(".sub","#add-location-content"),n=jQuery("input","#add-location-content"),i=jQuery(".sub input","#add-location-content");!e.hasClass("disabled")&&"enable"!=t||"disable"===t?(e.addClass("disabled"),i.attr("disabled",!0),n.val("")):(e.removeClass("disabled"),i.attr("disabled",!1))},FamilyMapper.prototype._hide=function(){jQuery("#add-location-container").fadeOut()},FamilyMapper.prototype._ajaxAddLocation=function(t){var e=this;this.$spinner.show();var n=this._getLocationHash(),i={addr_type:this.mapData.addrType,newAddress:n};i[Geni.AuthenticityParam]=Geni.AuthenticityToken,new Geni.JsonxRequest("/map/add_location/"+this.curID,{method:"POST",data:i,onSuccess:function(n){t(n),e.$spinner.hide()},onFailure:function(){e.$spinner.hide(),console.log("Error")}})},FamilyMapper.prototype._getLocationHash=function(){var t=jQuery(".sub input","#add-location-content"),e={};return jQuery.each(t,function(t,n){e[jQuery(n).attr("name")]=jQuery(n).val()}),e},FamilyMapper.prototype._shouldSubmit=function(){var t=jQuery(".sub input","#add-location-content"),e=!1;return jQuery.each(t,function(t,n){jQuery(n).val().length>0&&(e=!0)}),e},FamilyMapper.prototype._manageMarkers=function(t){var e=t.is(":checked"),n=t.attr("data-type"),i=this.markers[n];e?_.each(i,function(t){t.setVisible(!0)}):_.each(i,function(t){t.setVisible(!1)})},FamilyMapper.prototype._incrementCount=function(){var t=jQuery("#top-count"),e=parseInt(t.text());0===e&&(e=1),e++,t.text(e)},FamilyMapper.prototype._decrementCount=function(){var t=jQuery("#bottom-count strong"),e=parseInt(t.text());e--,t.text(e)},GeniLoader.ready(function(){Geni.FlashMatchRequester=new FlashMatchRequester}),NewHovercard.prototype.bindEvents=function(){var t=this;jQuery(document).on("click",".action-show",function(t){t.preventDefault(),jQuery(this).next(".action-list").css({right:0})}),jQuery(document).on("click",".action-hide",function(t){t.preventDefault(),jQuery(this).parents(".action-list").css({right:-220})}),jQuery(document).on("click",".hovercard-follow",function(e){e.preventDefault(),t.follow(jQuery(this))}),jQuery(document).on("click",".hovercard-unfollow",function(e){e.preventDefault(),t.unfollow(jQuery(this))})},NewHovercard.prototype.follow=function(t){var e=t.attr("data-id"),n=t.attr("data-type");t.empty(),Spinners.create(t,this.spinner).play(),new Geni.Request("/graph/follow",{method:"POST",data:{id:n+"-"+e},success:function(){t.html(tr("Unfollow")).removeClass("hovercard-follow").addClass("hovercard-unfollow")},error:function(){}})},NewHovercard.prototype.unfollow=function(t){var e=t.attr("data-id"),n=t.attr("data-type");t.empty(),Spinners.create(t,this.spinner).play(),new Geni.Request("/graph/unfollow",{method:"POST",data:{id:n+"-"+e},success:function(){t.html(tr("Follow")).removeClass("hovercard-unfollow").addClass("hovercard-follow")},error:function(){}})},GeniLoader.ready(function(){Geni=Geni||{},Geni.J=Geni.J||{},Geni.J.NewHovercard=new NewHovercard}),function(t,e,n){function i(){this.$onlineList=jQuery("#recently-online-wrapper ul"),this.$online=jQuery("li.online",this.$onlineList),this.timeoutStart=100,this.timeoutInterval=100,this.fadeDuration=100,this.fadeInOnline()}i.prototype.fadeInOnline=function(){var e=this,n=this.timeoutStart;jQuery.each(this.$online,function(i,o){setTimeout(function(){t(o).fadeIn(e.fadeDuration)},n),n+=e.timeoutInterval})},GeniLoader.ready(function(){(n=n||{}).J=n.J||{},n.J.RecentlyOnline=new i})}(jQuery,_,Geni,Geni.Tipped),function(t){t.fn.serializeObject=function(){var e={},n=this.serializeArray();return t.each(n,function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e}}(jQuery);var underscore=_,jconfirm,Jconfirm,matchButtonAnimTimeout;
/*!
 * jquery-confirm v3.3.0 (http://craftpip.github.io/jquery-confirm/)
 * Author: Boniface Pereira
 * Website: www.craftpip.com
 * Contact: hey@craftpip.com
 *
 * Copyright 2013-2017 jquery-confirm
 * Licensed under MIT (https://github.com/craftpip/jquery-confirm/blob/master/LICENSE)
 */
if(underscore.templateSettings.interpolate=/\{\{(.+?)\}\}/g,underscore.templateSettings.evaluate=/\{%(.+?)%\}/g,underscore.templateSettings.escape=/\{-(.+?)-\}/g,TemplateFetcher.prototype.getTemplate=function(t,e){if(this.templates.hasOwnProperty(t))return this.templates[t](e);var n=this._ajaxTemplate(t);return this.templates[t]=underscore.template(n,null,{variable:"data"}),this.templates[t](e)},TemplateFetcher.prototype._ajaxTemplate=function(t){var e="",n="",i=t.match(/\?c=[a-f0-9]+$/);return i?(n=i[0].sub(/\?c=/,""),t=t.replaceAll(i[0],"")):n=Geni.TemplateCache||(new Date).getTime(),jQuery.ajax({url:this.templatePath+t+".jst?c="+n,async:!1,success:function(t){e=t},error:function(){console.log("Error loading template: "+t)}}),this._replaceTemplateMacros(e)},TemplateFetcher.prototype._replaceTemplateMacros=function(t){return t.replace(/CSP_NONCE/g,Geni.CSPNonce)},getGeniTemplate=function(...t){return Geni=Geni||{},Geni.J=Geni.J||{},Geni.J.templateFetcher=Geni.J.templateFetcher||new TemplateFetcher,Geni.J.templateFetcher.getTemplate(...t)},function(t,e,n){GeniLoader.ready(function(){function t(){this.months=["January","February","March","April","May","June","July","August","September","October","November","December"]}t.prototype.prettyDate=function(t){t=parseInt(t);var e=new Date(1e3*t),n=((new Date).getTime()-e.getTime())/1e3,i=Math.floor(n/86400);if(!(isNaN(i)||i<0))return 0==i&&((n<60?"just now":n<120&&"about a minute ago")||n<3600&&Math.floor(n/60)+" minutes ago"||n<7200&&"1 hour ago"||n<86400&&Math.floor(n/3600)+" hours ago")||1==i&&"yesterday"||i<7&&"about "+i+" days ago"||7==i&&"about a week ago"||i<31&&trl("{weeks} weeks ago",null,{weeks:Math.ceil(i/7)})||31==i&&"about a month ago"||i<365&&trl("{months} months ago",null,{months:Math.ceil(i/31)})||365==i&&"about a year ago"||i>=365&&trl("{years} years ago",null,{years:Math.ceil(i/365)})},(n=n||{}).J=n.J||{},n.J.TemplateHelper=new t})}(jQuery,_,Geni),jQuery,GeniLoader.ready(function(){jQuery("input[type=text], input[type=password]").on("keypress",function(t){if("Enter"==t.code){var e=jQuery(this).parents("form")[0];e&&(t.preventDefault(),e.requestSubmit())}})}),jQuery,GeniLoader.ready(function(){jQuery("input").on("keydown",function(){jQuery(this).data("modified","1")})}),ProjectsLabelsTagger.prototype.makeAutocompleter=function(){var t=this;this.$input.autocomplete({minLength:this.options.minLength,source:function(e,n){var i=t.prefix(e.term).toLowerCase();jQuery.ajax({dataType:"jsonp",url:G.API.location.url+"/labels/completions?prefix="+i+"&limit="+t.options.limit,success:function(e){var i=_.map(t.$input.val().split(","),function(t){return t.trim()});i=_.compact(i);var o=_.difference(e.results,i),s=_.uniq(o);n(s)}})},select:function(e,n){t.options.select&&t.options.select(n.item.label);var i=t.beforePrefix(t.$input.val());return console.log(i),t.$input.val(i+n.item.label+", "),!1},focus:function(){return!1}})},ProjectsLabelsTagger.prototype.prefix=function(t){return-1===t.indexOf(",")?t:t.split(/,\s*/).pop()},ProjectsLabelsTagger.prototype.beforePrefix=function(t){if(-1===t.indexOf(","))return"";var e=t.split(/,\s*/);return(e=e.splice(0,e.length-1)).join(", ")+", "},Geni.ProjectsLabelsTagger=ProjectsLabelsTagger,CommentActions.prototype.bindEvents=function(){this.commentDrop=jQuery(".comment_actions .drop"),this.commentActions=jQuery(".comment_actions");var t=this;this.commentDrop.on("click",function(e){e.preventDefault(),$this=jQuery(e.target).hasClass("icon-alone drop")?jQuery(e.target):jQuery(e.target).parent(".icon-alone.drop"),1==$this.parents(".comment_actions").attr("data-active")?($this.removeClass("active"),$this.parents(".comment_actions").attr("data-active","0"),$this.parent().next("ul").hide(),jQuery("[data-icon]",$this).attr("data-icon",t.htmlDecode("&#xE04b"))):($this.addClass("active"),$this.parents(".comment_actions").attr("data-active","1"),jQuery("ul",t.commentActions).hide(),$this.parents(".comment_actions").css({zIndex:101}),$this.parent().next("ul").fadeIn(t.fadeInterval),jQuery("[data-icon]",$this).attr("data-icon",t.htmlDecode("&#xE05c")))})},CommentActions.prototype.handleOthers=function(t){this.commentActions.css({zIndex:100}),this.commentDrop.removeClass("active"),jQuery("[data-icon]",t.commentDrop).attr("data-icon",this.htmlDecode("&#xE04b")),this.commentDrop.parent().next("ul").hide(),this.commentActions.not(t.parents(".comment_actions")).attr("data-active","0")},CommentActions.prototype.htmlDecode=function(t){return jQuery("<div/>").html(t).text()},GeniLoader.ready(function(){Geni=Geni||{},Geni.J=Geni.J||{},Geni.J.CommentActions=new CommentActions,Geni.J.CommentActions.bindEvents()}),GeniLoader.ready(function(){Geni.SiteCampaign=new SiteCampaign}),
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,a=l.call(arguments,1),c=0,d=0,h=0,p=0,f=0,m=0;if((e=t.event.fix(r)).type="mousewheel","detail"in r&&(h=-1*r.detail),"wheelDelta"in r&&(h=r.wheelDelta),"wheelDeltaY"in r&&(h=r.wheelDeltaY),"wheelDeltaX"in r&&(d=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in r&&(c=h=-1*r.deltaY),"deltaX"in r&&(d=r.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===r.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,h*=g,d*=g}else if(2===r.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,h*=v,d*=v}if(p=Math.max(Math.abs(h),Math.abs(d)),(!s||p<s)&&(s=p,i(r,p)&&(s/=40)),i(r,p)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/s),d=Math[d>=1?"floor":"ceil"](d/s),h=Math[h>=1?"floor":"ceil"](h/s),u.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=d,e.deltaY=h,e.deltaFactor=s,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,c,d,h),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function n(){s=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var o,s,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=r.length;c;)t.event.fixHooks[r[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),
/**
 * @license jquery.panzoom.js v3.2.2
 * Updated: Wed May 08 2019
 * Add pan and zoom functionality to any element
 * Copyright (c) timmy willison
 * Released under the MIT license
 * https://github.com/timmywil/jquery.panzoom/blob/master/MIT-License.txt
 */
function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return e(t,n)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){for(var n=t.length;--n;)if(Math.round(+t[n])!==Math.round(+e[n]))return!1;return!0}function i(t){var n={range:!0,animate:!0};return"boolean"==typeof t?n.animate=t:e.extend(n,t),n}function o(t,n,i,o,s,r,a,l,c){"array"===e.type(t)?this.elements=[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:this.elements=[t,n,i,o,s,r,a||0,l||0,c||1]}function s(t,e,n){this.elements=[t,e,n]}function r(t,n){if(!(this instanceof r))return new r(t,n);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(a,t)||e.error("Panzoom element must be attached to the document");var i=e.data(t,l);if(i)return i;this.options=n=e.extend({},r.defaults,n),this.elem=t;var o=this.$elem=e(t);this.$set=n.$set&&n.$set.length?n.$set:o,this.$doc=e(t.ownerDocument||a),this.$parent=o.parent(),this.parent=this.$parent[0],this.isSVG=h.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=e.cssProps.transform?e.cssProps.transform.replace(d,"-$1").toLowerCase():"transform",this._buildTransition(),this.resetDimensions();var s=e(),c=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){c[e]=n[e]||s}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),e.data(t,l,this)}var a=t.document,l="__pz__",c=Array.prototype.slice,u=!/trident\/7./i.test(navigator.userAgent),d=/([A-Z])/g,h=/^http:[\w\.\/]+svg$/,p="(\\-?\\d[\\d\\.e-]*)",f="\\,?\\s*",m=new RegExp("^matrix\\("+p+f+p+f+p+f+p+f+p+f+p+"\\)$");return o.prototype={x:function(t){var e=t instanceof s,n=this.elements,i=t.elements;return e&&3===i.length?new s(n[0]*i[0]+n[1]*i[1]+n[2]*i[2],n[3]*i[0]+n[4]*i[1]+n[5]*i[2],n[6]*i[0]+n[7]*i[1]+n[8]*i[2]):i.length===n.length&&new o(n[0]*i[0]+n[1]*i[3]+n[2]*i[6],n[0]*i[1]+n[1]*i[4]+n[2]*i[7],n[0]*i[2]+n[1]*i[5]+n[2]*i[8],n[3]*i[0]+n[4]*i[3]+n[5]*i[6],n[3]*i[1]+n[4]*i[4]+n[5]*i[7],n[3]*i[2]+n[4]*i[5]+n[5]*i[8],n[6]*i[0]+n[7]*i[3]+n[8]*i[6],n[6]*i[1]+n[7]*i[4]+n[8]*i[7],n[6]*i[2]+n[7]*i[5]+n[8]*i[8])},inverse:function(){var t=1/this.determinant(),e=this.elements;return new o(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},s.prototype.e=o.prototype.e=function(t){return this.elements[t]},r.rmatrix=m,r.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,linearZoom:!1,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},r.prototype={constructor:r,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,l)},resetDimensions:function(){this.container=this.parent.getBoundingClientRect();var t=this.elem,n=t.getBoundingClientRect(),i=Math.abs(this.scale);this.dimensions={width:n.width,height:n.height,left:e.css(t,"left",!0)||0,top:e.css(t,"top",!0)||0,border:{top:e.css(t,"borderTopWidth",!0)*i||0,bottom:e.css(t,"borderBottomWidth",!0)*i||0,left:e.css(t,"borderLeftWidth",!0)*i||0,right:e.css(t,"borderRightWidth",!0)*i||0},margin:{top:e.css(t,"marginTop",!0)*i||0,left:e.css(t,"marginLeft",!0)*i||0}}},reset:function(t){t=i(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=i(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],i(t))},setTransform:function(t){for(var n=this.$set,i=n.length;i--;)e.style(n[i],"transform",t),this.isSVG&&n[i].setAttribute("transform",t)},getTransform:function(t){var n=this.$set[0];return t?this.setTransform(t):(t=e.style(n,"transform"),!this.isSVG||t&&"none"!==t||(t=e.attr(n,"transform")||"none")),"none"===t||m.test(t)||this.setTransform(t=e.css(n,"transform")),t||"none"},getMatrix:function(t){var e=m.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},getScale:function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},setMatrix:function(t,n){if(!this.disabled){n||(n={}),"string"==typeof t&&(t=this.getMatrix(t));var i=this.getScale(t),o="undefined"!=typeof n.contain?n.contain:this.options.contain;if(o){var s,r,a,l=n.dims;l||(this.resetDimensions(),l=this.dimensions);var c=this.container,u=l.width,d=l.height,h=c.width,p=c.height,f=h/u,m=p/d;"center"!==this.$parent.css("textAlign")||"inline"!==e.css(this.elem,"display")?(s=(a=(u-this.elem.offsetWidth)/2)-l.border.left,r=u-h-a+l.border.right):s=r=(u-h)/2;var g=(d-p)/2+l.border.top,v=(d-p)/2-l.border.top-l.border.bottom;t[4]="invert"===o||"automatic"===o&&f<1.01?Math.max(Math.min(t[4],s-l.border.left),-r):Math.min(Math.max(t[4],s),-r),t[5]="invert"===o||"automatic"===o&&m<1.01?Math.max(Math.min(t[5],g-l.border.top),-v):Math.min(Math.max(t[5],g),-v)}if("skip"!==n.animate&&this.transition(!n.animate),n.range&&this.$zoomRange.val(i),this.options.disableXAxis||this.options.disableYAxis){var y=this.getMatrix();this.options.disableXAxis&&(t[4]=y[4]),this.options.disableYAxis&&(t[5]=y[5])}return this.setTransform("matrix("+t.join(",")+")"),this.scale=i,this._checkPanWhenZoomed(i),n.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var n=t||!this.options.transition?"none":this._transition,i=this.$set,o=i.length;o--;)e.style(i[o],"transition")!==n&&e.style(i[o],"transition",n)},pan:function(t,e,n){if(!this.options.disablePan){n||(n={});var i=n.matrix;i||(i=this.getMatrix()),n.relative&&(t+=+i[4],e+=+i[5]),i[4]=t,i[5]=e,this.setMatrix(i,n),n.silent||this._trigger("pan",i[4],i[5])}},zoom:function(t,n){"object"==typeof t?(n=t,t=null):n||(n={});var i=e.extend({},this.options,n);if(!i.disableZoom){var r=!1,a=i.matrix||this.getMatrix(),l=new o(a),c=this.getScale(a);"number"!=typeof t?(t=i.linearZoom?1+i.increment*(t?-1:1)/c:t?1/(1+i.increment):1+i.increment,r=!0):t=1/c,t=Math.max(Math.min(t,i.maxScale/c),i.minScale/c);var u=l.x(new o(t,0,0,0,"number"==typeof i.dValue?i.dValue/c:t,0)),d=i.focal;if(d&&!i.disablePan){this.resetDimensions();var h=i.dims=this.dimensions,p=d.clientX,f=d.clientY;this.isSVG||(p-=h.width/c/2,f-=h.height/c/2);var m=new s(p,f,1),g=this.parentOffset||this.$parent.offset(),v=new o(1,0,g.left-this.$doc.scrollLeft(),0,1,g.top-this.$doc.scrollTop()),y=l.inverse().x(v.inverse().x(m));l=l.x(new o([t,0,0,t,0,0])),m=v.x(l.x(y)),a[4]=+a[4]+(p-m.e(0)),a[5]=+a[5]+(f-m.e(1))}a[0]=u.e(0),a[1]=u.e(3),a[2]=u.e(1),a[3]=u.e(4),this.setMatrix(a,{animate:"undefined"!=typeof i.animate?i.animate:r,range:!i.noSetRange}),i.silent||this._trigger("zoom",t,i)}},option:function(t,n){var i;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return this.options[t]!==undefined?this.options[t]:null;(i={})[t]=n}else i=t;this._setOptions(i)},_setOptions:function(t){e.each(t,e.proxy(function(t,n){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=n,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=n;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",n);break;case"minScale":this.$zoomRange.attr("min",n);break;case"maxScale":this.$zoomRange.attr("max",n);break;case"rangeStep":this.$zoomRange.attr("step",n);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":n instanceof e&&n.length&&(this.$set=n,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(t){var e=this.options;if(e.panOnlyWhenZoomed){t||(t=this.getMatrix()[0]);var n=t<=e.minScale;e.disablePan!==n&&this.option("disablePan",n)}},_initStyle:function(){var t={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var n=this.$parent;n.length&&!e.nodeName(this.parent,"body")&&(t={overflow:"hidden"},"static"===n.css("position")&&(t.position="relative"),n.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,n=this.options,i=n.eventNamespace,o="mousedown"+i+" pointerdown"+i+" MSPointerDown"+i,s="touchstart"+i+" "+o,a="touchend"+i+" click"+i+" pointerup"+i+" MSPointerUp"+i,l={},c=this.$reset,d=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=n["on"+this];e.isFunction(t)&&(l["panzoom"+this.toLowerCase()+i]=t)}),n.disablePan&&n.disableZoom||(l[s]=function(e){var i;("touchstart"===e.type?!(i=e.touches||e.originalEvent.touches)||(1!==i.length||n.disablePan)&&2!==i.length:n.disablePan||(e.which||e.originalEvent.which)!==n.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,i))},3===n.which&&(l.contextmenu=!1)),this.$elem.on(l),c.length&&c.on(a,function(e){e.preventDefault(),t.reset()}),d.length&&d.attr({step:n.rangeStep===r.defaults.rangeStep&&d.attr("step")||n.rangeStep,min:n.minScale,max:n.maxScale}).prop({value:this.getMatrix()[0]}),!n.disableZoom){var h=this.$zoomIn,p=this.$zoomOut;h.length&&p.length&&(h.on(a,function(e){e.preventDefault(),t.zoom()}),p.on(a,function(e){e.preventDefault(),t.zoom(!0)})),d.length&&((l={})[o]=function(){t.transition(!0)},l[(u?"input":"change")+i]=function(){t.zoom(+this.value,{noSetRange:!0})},d.on(l))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_getDistance:function(t){var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],n=t[1];return{clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(c.call(arguments,1)))},_startMove:function(t,i){if(!this.panning){var o,s,r,l,c,u,d,h,p=this,f=this.options,m=f.eventNamespace,g=this.getMatrix(),v=g.slice(0),y=+v[4],b=+v[5],_={matrix:g,animate:"skip"},w=t.type;"pointerdown"===w?(o="pointermove",s="pointerup"):"touchstart"===w?(o="touchmove",s="touchend"):"MSPointerDown"===w?(o="MSPointerMove",s="MSPointerUp"):(o="mousemove",s="mouseup"),o+=m,s+=m,this.transition(!0),this.panning=!0,this._trigger("start",t,i);var C=function(t,e){if(e){if(2===e.length){if(null!=r)return;return r=p._getDistance(e),l=p.getScale(g),void(c=p._getMiddle(e))}if(null!=u)return;(h=e[0])&&(u=h.pageX,d=h.pageY)}null==u&&(u=t.pageX,d=t.pageY)};C(t,i);var j=function(t){var e;if(t.preventDefault(),i=t.touches||t.originalEvent.touches,C(t,i),i){if(2===i.length){var n=p._getMiddle(i),o=p._getDistance(i)-r;return p.zoom(o*(f.increment/100)+l,{focal:n,matrix:g,animate:"skip"}),p.pan(+g[4]+n.clientX-c.clientX,+g[5]+n.clientY-c.clientY,_),void(c=n)}e=i[0]||{pageX:0,pageY:0}}e||(e=t),p.pan(y+e.pageX-u,b+e.pageY-d,_)};e(a).off(m).on(o,j).on(s,function(t){t.preventDefault(),e(this).off(m),p.panning=!1,t.type="panzoomend",p._trigger(t,g,!n(g,v))})}}},e.Panzoom=r,e.fn.panzoom=function(t){var n,i,o,s;return"string"==typeof t?(s=[],i=c.call(arguments,1),this.each(function(){(n=e.data(this,l))?"_"!==t.charAt(0)&&"function"==typeof(o=n[t])&&(o=o.apply(n,i))!==undefined&&s.push(o):s.push(undefined)}),s.length?1===s.length?s[0]:s:this):this.each(function(){new r(this,t)})},r}),"undefined"==typeof jQuery)throw new Error("jquery-confirm requires jQuery");!function(t,e){t.fn.confirm=function(e,n){return void 0===e&&(e={}),"string"==typeof e&&(e={content:e,title:n||!1}),t(this).each(function(){var n=t(this);n.attr("jc-attached")?console.warn("jConfirm has already been attached to this element ",n[0]):(n.on("click",function(i){i.preventDefault();var o=t.extend({},e);if(n.attr("data-title")&&(o.title=n.attr("data-title")),n.attr("data-content")&&(o.content=n.attr("data-content")),"undefined"==typeof o.buttons&&(o.buttons={}),o.$target=n,n.attr("href")&&0==Object.keys(o.buttons).length){var s=t.extend(!0,{},jconfirm.pluginDefaults.defaultButtons,(jconfirm.defaults||{}).defaultButtons||{}),r=Object.keys(s)[0];o.buttons=s,o.buttons[r].action=function(){location.href=n.attr("href")}}o.closeIcon=!1;t.confirm(o)}),n.attr("jc-attached",!0))}),t(this)},t.confirm=function(e,n){if(void 0===e&&(e={}),"string"==typeof e&&(e={content:e,title:n||!1}),"object"!=typeof e.buttons&&(e.buttons={}),0==Object.keys(e.buttons).length){var i=t.extend(!0,{},jconfirm.pluginDefaults.defaultButtons,(jconfirm.defaults||{}).defaultButtons||{});e.buttons=i}return jconfirm(e)},t.alert=function(e,n){if(void 0===e&&(e={}),"string"==typeof e&&(e={content:e,title:n||!1}),"object"!=typeof e.buttons&&(e.buttons={}),0==Object.keys(e.buttons).length){var i=t.extend(!0,{},jconfirm.pluginDefaults.defaultButtons,(jconfirm.defaults||{}).defaultButtons||{}),o=Object.keys(i)[0];e.buttons[o]=i[o]}return jconfirm(e)},t.dialog=function(t,e){return void 0===t&&(t={}),"string"==typeof t&&(t={content:t,title:e||!1,closeIcon:function(){}}),t.buttons={},"undefined"==typeof t.closeIcon&&(t.closeIcon=function(){}),t.confirmKeys=[13],jconfirm(t)},jconfirm=function(e){void 0===e&&(e={});var n=t.extend(!0,{},jconfirm.pluginDefaults);jconfirm.defaults&&(n=t.extend(!0,n,jconfirm.defaults)),n=t.extend(!0,{},n,e);var i=new Jconfirm(n);return jconfirm.instances.push(i),i},(Jconfirm=function(e){t.extend(this,e),this._init()}).prototype={_init:function(){var e=this;jconfirm.instances.length||(jconfirm.lastFocused=t("body").find(":focus")),this._id=Math.round(99999*Math.random()),this.contentParsed=t(document.createElement("div")),this.lazyOpen||setTimeout(function(){e.open()},0)},_buildHTML:function(){var e=this;this._parseAnimation(this.animation,"o"),this._parseAnimation(this.closeAnimation,"c"),this._parseBgDismissAnimation(this.backgroundDismissAnimation),this._parseColumnClass(this.columnClass),this._parseTheme(this.theme),this._parseType(this.type);var n=t(this.template);n.find(".jconfirm-box").addClass(this.animationParsed).addClass(this.backgroundDismissAnimationParsed).addClass(this.typeParsed),this.typeAnimated&&n.find(".jconfirm-box").addClass("jconfirm-type-animated"),this.useBootstrap?(n.find(".jc-bs3-row").addClass(this.bootstrapClasses.row),n.find(".jc-bs3-row").addClass("justify-content-md-center justify-content-sm-center justify-content-xs-center justify-content-lg-center"),n.find(".jconfirm-box-container").addClass(this.columnClassParsed),this.containerFluid?n.find(".jc-bs3-container").addClass(this.bootstrapClasses.containerFluid):n.find(".jc-bs3-container").addClass(this.bootstrapClasses.container)):n.find(".jconfirm-box").css("width",this.boxWidth),this.titleClass&&n.find(".jconfirm-title-c").addClass(this.titleClass),n.addClass(this.themeParsed);var i="jconfirm-box"+this._id;n.find(".jconfirm-box").attr("aria-labelledby",i).attr("tabindex",-1),n.find(".jconfirm-content").attr("id",i),null!==this.bgOpacity&&n.find(".jconfirm-bg").css("opacity",this.bgOpacity),this.rtl&&n.addClass("jconfirm-rtl"),this.$el=n.appendTo(this.container),this.$jconfirmBoxContainer=this.$el.find(".jconfirm-box-container"),this.$jconfirmBox=this.$body=this.$el.find(".jconfirm-box"),this.$jconfirmBg=this.$el.find(".jconfirm-bg"),this.$title=this.$el.find(".jconfirm-title"),this.$titleContainer=this.$el.find(".jconfirm-title-c"),this.$content=this.$el.find("div.jconfirm-content"),this.$contentPane=this.$el.find(".jconfirm-content-pane"),this.$icon=this.$el.find(".jconfirm-icon-c"),this.$closeIcon=this.$el.find(".jconfirm-closeIcon"),this.$holder=this.$el.find(".jconfirm-holder"),this.$btnc=this.$el.find(".jconfirm-buttons"),this.$scrollPane=this.$el.find(".jconfirm-scrollpane"),e.setStartingPoint(),this._contentReady=t.Deferred(),this._modalReady=t.Deferred(),this.$holder.css({"padding-top":this.offsetTop,"padding-bottom":this.offsetBottom}),this.setTitle(),this.setIcon(),this._setButtons(),this._parseContent(),this.initDraggable(),this.isAjax&&this.showLoading(!1),t.when(this._contentReady,this._modalReady).then(function(){e.isAjaxLoading?setTimeout(function(){e.isAjaxLoading=!1,e.setContent(),e.setTitle(),e.setIcon(),setTimeout(function(){e.hideLoading(!1),e._updateContentMaxHeight()},100),"function"==typeof e.onContentReady&&e.onContentReady()},50):(e._updateContentMaxHeight(),e.setTitle(),e.setIcon(),"function"==typeof e.onContentReady&&e.onContentReady()),e.autoClose&&e._startCountDown()}),this._watchContent(),"none"===this.animation&&(this.animationSpeed=1,this.animationBounce=1),this.$body.css(this._getCSS(this.animationSpeed,this.animationBounce)),this.$contentPane.css(this._getCSS(this.animationSpeed,1)),this.$jconfirmBg.css(this._getCSS(this.animationSpeed,1)),this.$jconfirmBoxContainer.css(this._getCSS(this.animationSpeed,1))},_typePrefix:"jconfirm-type-",typeParsed:"",_parseType:function(t){this.typeParsed=this._typePrefix+t},setType:function(t){var e=this.typeParsed;this._parseType(t),this.$jconfirmBox.removeClass(e).addClass(this.typeParsed)},themeParsed:"",_themePrefix:"jconfirm-",setTheme:function(t){var e=this.theme;this.theme=t||this.theme,this._parseTheme(this.theme),e&&this.$el.removeClass(e),this.$el.addClass(this.themeParsed),this.theme=t},_parseTheme:function(e){var n=this;e=e.split(","),t.each(e,function(i,o){-1===o.indexOf(n._themePrefix)&&(e[i]=n._themePrefix+t.trim(o))}),this.themeParsed=e.join(" ").toLowerCase()},backgroundDismissAnimationParsed:"",_bgDismissPrefix:"jconfirm-hilight-",_parseBgDismissAnimation:function(e){var n=e.split(","),i=this;t.each(n,function(e,o){-1===o.indexOf(i._bgDismissPrefix)&&(n[e]=i._bgDismissPrefix+t.trim(o))}),this.backgroundDismissAnimationParsed=n.join(" ").toLowerCase()},animationParsed:"",closeAnimationParsed:"",_animationPrefix:"jconfirm-animation-",setAnimation:function(t){this.animation=t||this.animation,this._parseAnimation(this.animation,"o")},_parseAnimation:function(e,n){n=n||"o";var i=e.split(","),o=this;t.each(i,function(e,n){-1===n.indexOf(o._animationPrefix)&&(i[e]=o._animationPrefix+t.trim(n))});var s=i.join(" ").toLowerCase();return"o"===n?this.animationParsed=s:this.closeAnimationParsed=s,s},setCloseAnimation:function(t){this.closeAnimation=t||this.closeAnimation,this._parseAnimation(this.closeAnimation,"c")},setAnimationSpeed:function(t){this.animationSpeed=t||this.animationSpeed},columnClassParsed:"",setColumnClass:function(t){this.useBootstrap?(this.columnClass=t||this.columnClass,this._parseColumnClass(this.columnClass),this.$jconfirmBoxContainer.addClass(this.columnClassParsed)):console.warn("cannot set columnClass, useBootstrap is set to false")},_updateContentMaxHeight:function(){var n=t(e).height()-(this.$jconfirmBox.outerHeight()-this.$contentPane.outerHeight())-(this.offsetTop+this.offsetBottom);this.$contentPane.css({"max-height":n+"px"})},setBoxWidth:function(t){this.useBootstrap?console.warn("cannot set boxWidth, useBootstrap is set to true"):(this.boxWidth=t,this.$jconfirmBox.css("width",t))},_parseColumnClass:function(t){var e;switch(t=t.toLowerCase()){case"xl":case"xlarge":e="col-md-12";break;case"l":case"large":e="col-md-8 col-md-offset-2";break;case"m":case"medium":e="col-md-6 col-md-offset-3";break;case"s":case"small":e="col-md-4 col-md-offset-4";break;case"xs":case"xsmall":e="col-md-2 col-md-offset-5";break;default:e=t}this.columnClassParsed=e},initDraggable:function(){var n=this,i=this.$titleContainer;this.resetDrag(),this.draggable&&(i.on("mousedown",function(t){i.addClass("jconfirm-hand"),n.mouseX=t.clientX,n.mouseY=t.clientY,n.isDrag=!0}),t(e).on("mousemove."+this._id,function(t){n.isDrag&&(n.movingX=t.clientX-n.mouseX+n.initialX,n.movingY=t.clientY-n.mouseY+n.initialY,n.setDrag())}),t(e).on("mouseup."+this._id,function(){i.removeClass("jconfirm-hand"),n.isDrag&&(n.isDrag=!1,n.initialX=n.movingX,n.initialY=n.movingY)}))},resetDrag:function(){this.isDrag=!1,this.initialX=0,this.initialY=0,this.movingX=0,this.movingY=0,this.mouseX=0,this.mouseY=0,this.$jconfirmBoxContainer.css("transform","translate(0px, 0px)")},setDrag:function(){if(this.draggable){this.alignMiddle=!1;var n=this.$jconfirmBox.outerWidth(),i=this.$jconfirmBox.outerHeight(),o=t(e).width(),s=t(e).height(),r=this,a=1;if(r.movingX%a==0||r.movingY%a==0){if(r.dragWindowBorder){var l=o/2-n/2,c=s/2-i/2;c-=r.dragWindowGap,(l-=r.dragWindowGap)+r.movingX<0?r.movingX=-l:l-r.movingX<0&&(r.movingX=l),c+r.movingY<0?r.movingY=-c:c-r.movingY<0&&(r.movingY=c)}r.$jconfirmBoxContainer.css("transform","translate("+r.movingX+"px, "+r.movingY+"px)")}}},_scrollTop:function(){if("undefined"!=typeof pageYOffset)return pageYOffset;var t=document.body,e=document.documentElement;return(e=e.clientHeight?e:t).scrollTop},_watchContent:function(){var n=this;this._timer&&clearInterval(this._timer);var i=0;this._timer=setInterval(function(){if(n.smoothContent){var o=n.$content.outerHeight()||0;o!==i&&(n.$contentPane.css({height:o}).scrollTop(0),i=o);var s=t(e).height();n.offsetTop+n.offsetBottom+n.$jconfirmBox.height()-n.$contentPane.height()+n.$content.height()<s?n.$contentPane.addClass("no-scroll"):n.$contentPane.removeClass("no-scroll")}},this.watchInterval)},_overflowClass:"jconfirm-overflow",_hilightAnimating:!1,highlight:function(){this.hiLightModal()},hiLightModal:function(){var t=this;if(!this._hilightAnimating){t.$body.addClass("hilight");var e=parseFloat(t.$body.css("animation-duration"))||2;this._hilightAnimating=!0,setTimeout(function(){t._hilightAnimating=!1,t.$body.removeClass("hilight")},1e3*e)}},_bindEvents:function(){var n=this;this.boxClicked=!1,this.$scrollPane.click(function(){if(!n.boxClicked){var t,e=!1,i=!1;if("string"==typeof(t="function"==typeof n.backgroundDismiss?n.backgroundDismiss():n.backgroundDismiss)&&"undefined"!=typeof n.buttons[t]?(e=t,i=!1):i=void 0===t||1==!!t,e){var o=n.buttons[e].action.apply(n);i=void 0===o||!!o}i?n.close():n.hiLightModal()}n.boxClicked=!1}),this.$jconfirmBox.click(function(){n.boxClicked=!0});var i=!1;t(e).on("jcKeyDown."+n._id,function(){i||(i=!0)}),t(e).on("keyup."+n._id,function(t){i&&(n.reactOnKey(t),i=!1)}),t(e).on("resize."+this._id,function(){n._updateContentMaxHeight(),setTimeout(function(){n.resetDrag()},100)})},_cubic_bezier:"0.36, 0.55, 0.19",_getCSS:function(t,e){return{"-webkit-transition-duration":t/1e3+"s","transition-duration":t/1e3+"s","-webkit-transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+e+")","transition-timing-function":"cubic-bezier("+this._cubic_bezier+", "+e+")"}},_setButtons:function(){var e=this,n=0;if("object"!=typeof this.buttons&&(this.buttons={}),t.each(this.buttons,function(i,o){n+=1,"function"==typeof o&&(e.buttons[i]=o={action:o}),e.buttons[i].text=o.text||i,e.buttons[i].btnClass=o.btnClass||"btn-default",e.buttons[i].action=o.action||function(){},e.buttons[i].keys=o.keys||[],e.buttons[i].isHidden=o.isHidden||!1,e.buttons[i].isDisabled=o.isDisabled||!1,t.each(e.buttons[i].keys,function(t,n){e.buttons[i].keys[t]=n.toLowerCase()});var s=t('<button type="button" class="btn"></button>').html(e.buttons[i].text).addClass(e.buttons[i].btnClass).prop("disabled",e.buttons[i].isDisabled).css("display",e.buttons[i].isHidden?"none":"").click(function(t){t.preventDefault();var n=e.buttons[i].action.apply(e,[e.buttons[i]]);e.onAction.apply(e,[i,e.buttons[i]]),e._stopCountDown(),(void 0===n||n)&&e.close()});e.buttons[i].el=s,e.buttons[i].setText=function(t){s.html(t)},e.buttons[i].addClass=function(t){s.addClass(t)},e.buttons[i].removeClass=function(t){s.removeClass(t)},e.buttons[i].disable=function(){e.buttons[i].isDisabled=!0,s.prop("disabled",!0)},e.buttons[i].enable=function(){e.buttons[i].isDisabled=!1,s.prop("disabled",!1)},e.buttons[i].show=function(){e.buttons[i].isHidden=!1,s.css("display","")},e.buttons[i].hide=function(){e.buttons[i].isHidden=!0,s.css("display","none")},e["$_"+i]=e["$$"+i]=s,e.$btnc.append(s)}),0===n&&this.$btnc.hide(),null===this.closeIcon&&0===n&&(this.closeIcon=!0),this.closeIcon){if(this.closeIconClass){var i='<i class="'+this.closeIconClass+'"></i>';this.$closeIcon.html(i)}this.$closeIcon.click(function(t){t.preventDefault();var n,i=!1,o=!1;if("string"==typeof(n="function"==typeof e.closeIcon?e.closeIcon():e.closeIcon)&&"undefined"!=typeof e.buttons[n]?(i=n,o=!1):o=void 0===n||1==!!n,i){var s=e.buttons[i].action.apply(e);o=void 0===s||!!s}o&&e.close()}),this.$closeIcon.show()}else this.$closeIcon.hide()},setTitle:function(t,e){if(e=e||!1,void 0!==t)if("string"==typeof t)this.title=t;else if("function"==typeof t){"function"==typeof t.promise&&console.error("Promise was returned from title function, this is not supported.");var n=t();this.title="string"==typeof n&&n}else this.title=!1;this.isAjaxLoading&&!e||(this.$title.html(this.title||""),this.updateTitleContainer())},setIcon:function(t,e){if(e=e||!1,void 0!==t)if("string"==typeof t)this.icon=t;else if("function"==typeof t){var n=t();this.icon="string"==typeof n&&n}else this.icon=!1;this.isAjaxLoading&&!e||(this.$icon.html(this.icon?'<i class="'+this.icon+'"></i>':""),this.updateTitleContainer())},updateTitleContainer:function(){this.title||this.icon?this.$titleContainer.show():this.$titleContainer.hide()},setContentPrepend:function(t){t&&this.contentParsed.prepend(t)},setContentAppend:function(t){t&&this.contentParsed.append(t)},setContent:function(t,e){e=!!e;var n=this;t&&this.contentParsed.html("").append(t),this.isAjaxLoading&&!e||(this.$content.html(""),this.$content.append(this.contentParsed),setTimeout(function(){n.$body.find("input[autofocus]:visible:first").focus()},100))},loadingSpinner:!1,showLoading:function(t){this.loadingSpinner=!0,this.$jconfirmBox.addClass("loading"),t&&this.$btnc.find("button").prop("disabled",!0)},hideLoading:function(t){this.loadingSpinner=!1,this.$jconfirmBox.removeClass("loading"),t&&this.$btnc.find("button").prop("disabled",!1)},ajaxResponse:!1,contentParsed:"",isAjax:!1,isAjaxLoading:!1,_parseContent:function(){var e=this,n="&nbsp;";if("function"==typeof this.content){var i=this.content.apply(this);"string"==typeof i?this.content=i:"object"==typeof i&&"function"==typeof i.always?(this.isAjax=!0,this.isAjaxLoading=!0,i.always(function(t,n,i){e.ajaxResponse={data:t,status:n,xhr:i},e._contentReady.resolve(t,n,i),"function"==typeof e.contentLoaded&&e.contentLoaded(t,n,i)}),this.content=n):this.content=n}if("string"==typeof this.content&&"url:"===this.content.substr(0,4).toLowerCase()){this.isAjax=!0,this.isAjaxLoading=!0;var o=this.content.substring(4,this.content.length);t.get(o).done(function(t){e.contentParsed.html(t)}).always(function(t,n,i){e.ajaxResponse={data:t,status:n,xhr:i},e._contentReady.resolve(t,n,i),"function"==typeof e.contentLoaded&&e.contentLoaded(t,n,i)})}this.content||(this.content=n),this.isAjax||(this.contentParsed.html(this.content),this.setContent(),e._contentReady.resolve())},_stopCountDown:function(){clearInterval(this.autoCloseInterval),this.$cd&&this.$cd.remove()},_startCountDown:function(){var e=this,n=this.autoClose.split("|");if(2!==n.length)return console.error("Invalid option for autoClose. example 'close|10000'"),!1;var i=n[0],o=parseInt(n[1]);if("undefined"==typeof this.buttons[i])return console.error("Invalid button key '"+i+"' for autoClose"),!1;var s=Math.ceil(o/1e3);this.$cd=t('<span class="countdown"> ('+s+")</span>").appendTo(this["$_"+i]),this.autoCloseInterval=setInterval(function(){e.$cd.html(" ("+(s-=1)+") "),s<=0&&(e["$$"+i].trigger("click"),e._stopCountDown())},1e3)},_getKey:function(t){switch(t){case 192:return"tilde";case 13:return"enter";case 16:return"shift";case 9:return"tab";case 20:return"capslock";case 17:return"ctrl";case 91:return"win";case 18:return"alt";case 27:return"esc";case 32:return"space"}var e=String.fromCharCode(t);return!!/^[A-z0-9]+$/.test(e)&&e.toLowerCase()},reactOnKey:function(e){var n=this,i=t(".jconfirm");if(i.eq(i.length-1)[0]!==this.$el[0])return!1;var o=e.which;if(this.$content.find(":input").is(":focus")&&/13|32/.test(o))return!1;var s,r=this._getKey(o);"esc"===r&&this.escapeKey&&(!0===this.escapeKey?this.$scrollPane.trigger("click"):"string"!=typeof this.escapeKey&&"function"!=typeof this.escapeKey||(s="function"==typeof this.escapeKey?this.escapeKey():this.escapeKey)&&("undefined"==typeof this.buttons[s]?console.warn("Invalid escapeKey, no buttons found with key "+s):this["$_"+s].trigger("click")));t.each(this.buttons,function(t,e){-1!=e.keys.indexOf(r)&&n["$_"+t].trigger("click")})},setDialogCenter:function(){console.info("setDialogCenter is deprecated, dialogs are centered with CSS3 tables")},_unwatchContent:function(){clearInterval(this._timer)},close:function(){var n=this;return"function"==typeof this.onClose&&this.onClose(),this._unwatchContent(),t(e).unbind("resize."+this._id),t(e).unbind("keyup."+this._id),t(e).unbind("jcKeyDown."+this._id),this.draggable&&(t(e).unbind("mousemove."+this._id),t(e).unbind("mouseup."+this._id),this.$titleContainer.unbind("mousedown")),n.$el.removeClass(n.loadedClass),t("body").removeClass("jconfirm-no-scroll-"+n._id),n.$jconfirmBoxContainer.removeClass("jconfirm-no-transition"),setTimeout(function(){n.$body.addClass(n.closeAnimationParsed),n.$jconfirmBg.addClass("jconfirm-bg-h");var i="none"===n.closeAnimation?1:n.animationSpeed;setTimeout(function(){n.$el.remove();jconfirm.instances;for(var i=jconfirm.instances.length-1;i>=0;i--)jconfirm.instances[i]._id===n._id&&jconfirm.instances.splice(i,1);if(!jconfirm.instances.length&&n.scrollToPreviousElement&&jconfirm.lastFocused&&jconfirm.lastFocused.length&&t.contains(document,jconfirm.lastFocused[0])){var o=jconfirm.lastFocused;if(n.scrollToPreviousElementAnimate){var s=t(e).scrollTop(),r=jconfirm.lastFocused.offset().top,a=t(e).height();if(r>s&&r<s+a)o.focus();else{var l=r-Math.round(a/3);t("html, body").animate({scrollTop:l},n.animationSpeed,"swing",function(){o.focus()})}}else o.focus();jconfirm.lastFocused=!1}"function"==typeof n.onDestroy&&n.onDestroy()},.4*i)},50),!0},open:function(){return!this.isOpen()&&(this._buildHTML(),this._bindEvents(),this._open(),!0)},setStartingPoint:function(){var n=!1;if(!0!==this.animateFromElement&&this.animateFromElement)n=this.animateFromElement,jconfirm.lastClicked=!1;else{if(!jconfirm.lastClicked||!0!==this.animateFromElement)return!1;n=jconfirm.lastClicked,jconfirm.lastClicked=!1}if(!n)return!1;var i=n.offset(),o=n.outerHeight()/2,s=n.outerWidth()/2;o-=this.$jconfirmBox.outerHeight()/2,s-=this.$jconfirmBox.outerWidth()/2;var r=i.top+o;r-=this._scrollTop();var a=i.left+s,l=t(e).height()/2,c=t(e).width()/2;if(r-=l-this.$jconfirmBox.outerHeight()/2,a-=c-this.$jconfirmBox.outerWidth()/2,Math.abs(r)>l||Math.abs(a)>c)return!1;this.$jconfirmBoxContainer.css("transform","translate("+a+"px, "+r+"px)")},_open:function(){var t=this;"function"==typeof t.onOpenBefore&&t.onOpenBefore(),this.$body.removeClass(this.animationParsed),this.$jconfirmBg.removeClass("jconfirm-bg-h"),this.$body.focus(),t.$jconfirmBoxContainer.css("transform","translate(0px, 0px)"),setTimeout(function(){t.$body.css(t._getCSS(t.animationSpeed,1)),t.$body.css({"transition-property":t.$body.css("transition-property")+", margin"}),t.$jconfirmBoxContainer.addClass("jconfirm-no-transition"),t._modalReady.resolve(),"function"==typeof t.onOpen&&t.onOpen(),t.$el.addClass(t.loadedClass)},this.animationSpeed)},loadedClass:"jconfirm-open",isClosed:function(){return!this.$el||""===this.$el.css("display")},isOpen:function(){return!this.isClosed()},toggle:function(){this.isOpen()?this.close():this.open()}},jconfirm.instances=[],jconfirm.lastFocused=!1,jconfirm.pluginDefaults={
template:'<div class="jconfirm"><div class="jconfirm-bg jconfirm-bg-h"></div><div class="jconfirm-scrollpane"><div class="jconfirm-row"><div class="jconfirm-cell"><div class="jconfirm-holder"><div class="jc-bs3-container"><div class="jc-bs3-row"><div class="jconfirm-box-container jconfirm-animated"><div class="jconfirm-box" role="dialog" aria-labelledby="labelled" tabindex="-1"><div class="jconfirm-closeIcon">&times;</div><div class="jconfirm-title-c"><span class="jconfirm-icon-c"></span><span class="jconfirm-title"></span></div><div class="jconfirm-content-pane"><div class="jconfirm-content"></div></div><div class="jconfirm-buttons"></div><div class="jconfirm-clear"></div></div></div></div></div></div></div></div></div></div>',title:"Hello",titleClass:"",type:"default",typeAnimated:!0,draggable:!0,dragWindowGap:15,dragWindowBorder:!0,animateFromElement:!0,alignMiddle:!0,smoothContent:!0,content:"Are you sure to continue?",buttons:{},defaultButtons:{ok:{action:function(){}},close:{action:function(){}}},contentLoaded:function(){},icon:"",lazyOpen:!1,bgOpacity:null,theme:"light",animation:"scale",closeAnimation:"scale",animationSpeed:400,animationBounce:1,escapeKey:!0,rtl:!1,container:"body",containerFluid:!1,backgroundDismiss:!1,backgroundDismissAnimation:"shake",autoClose:!1,closeIcon:null,closeIconClass:!1,watchInterval:100,columnClass:"col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3 col-xs-10 col-xs-offset-1",boxWidth:"50%",scrollToPreviousElement:!0,scrollToPreviousElementAnimate:!0,useBootstrap:!0,offsetTop:40,offsetBottom:40,bootstrapClasses:{container:"container",containerFluid:"container-fluid",row:"row"},onContentReady:function(){},onOpenBefore:function(){},onOpen:function(){},onClose:function(){},onDestroy:function(){},onAction:function(){}};var n=!1;t(e).on("keydown",function(i){if(!n){var o=!1;t(i.target).closest(".jconfirm-box").length&&(o=!0),o&&t(e).trigger("jcKeyDown"),n=!0}}),t(e).on("keyup",function(){n=!1}),jconfirm.lastClicked=!1,t(document).on("mousedown","button, a",function(){jconfirm.lastClicked=t(this)})}(jQuery,window),
/*! jquery-qrcode v0.14.0 - https://larsjung.de/jquery-qrcode/ */
function(t){"use strict";function e(e,n,i,o){function s(t,e){return e-=o,!((t-=o)<0||t>=c||e<0||e>=c)&&l.isDark(t,e)}function r(t,e,n,i){var o=a.isDark,s=1/u;a.isDark=function(r,a){var l=a*s,c=r*s,u=l+s,d=c+s;return o(r,a)&&(t>u||l>n||e>d||c>i)}}var a={},l=t(i,n);l.addData(e),l.make(),o=o||0;var c=l.getModuleCount(),u=l.getModuleCount()+2*o;return a.text=e,a.level=n,a.version=i,a.moduleCount=u,a.isDark=s,a.addBlank=r,a}function n(t,n,i,o,s){i=Math.max(1,i||1),o=Math.min(40,o||40);for(var r=i;r<=o;r+=1)try{return e(t,n,r,s)}catch(a){}return undefined}function i(t,e,n){var i=n.size,o="bold "+n.mSize*i+"px "+n.fontname,s=v("<canvas/>")[0].getContext("2d");s.font=o;var r=s.measureText(n.label).width,a=n.mSize,l=r/i,c=(1-l)*n.mPosX,u=(1-a)*n.mPosY,d=c+l,h=u+a,p=.01;1===n.mode?t.addBlank(0,u-p,i,h+p):t.addBlank(c-p,u-p,d+p,h+p),e.fillStyle=n.fontcolor,e.font=o,e.fillText(n.label,c*i,u*i+.75*n.mSize*i)}function o(t,e,n){var i=n.size,o=n.image.naturalWidth||1,s=n.image.naturalHeight||1,r=n.mSize,a=r*o/s,l=(1-a)*n.mPosX,c=(1-r)*n.mPosY,u=l+a,d=c+r,h=.01;3===n.mode?t.addBlank(0,c-h,i,d+h):t.addBlank(l-h,c-h,u+h,d+h),e.drawImage(n.image,l*i,c*i,a*i,r*i)}function s(t,e,n){v(n.background).is("img")?e.drawImage(n.background,0,0,n.size,n.size):n.background&&(e.fillStyle=n.background,e.fillRect(n.left,n.top,n.size,n.size));var s=n.mode;1===s||2===s?i(t,e,n):3!==s&&4!==s||o(t,e,n)}function r(t,e,n,i,o,s,r,a){t.isDark(r,a)&&e.rect(i,o,s,s)}function a(t,e,n,i,o,s,r,a,l,c){r?t.moveTo(e+s,n):t.moveTo(e,n),a?(t.lineTo(i-s,n),t.arcTo(i,n,i,o,s)):t.lineTo(i,n),l?(t.lineTo(i,o-s),t.arcTo(i,o,e,o,s)):t.lineTo(i,o),c?(t.lineTo(e+s,o),t.arcTo(e,o,e,n,s)):t.lineTo(e,o),r?(t.lineTo(e,n+s),t.arcTo(e,n,i,n,s)):t.lineTo(e,n)}function l(t,e,n,i,o,s,r,a,l,c){r&&(t.moveTo(e+s,n),t.lineTo(e,n),t.lineTo(e,n+s),t.arcTo(e,n,e+s,n,s)),a&&(t.moveTo(i-s,n),t.lineTo(i,n),t.lineTo(i,n+s),t.arcTo(i,n,i-s,n,s)),l&&(t.moveTo(i-s,o),t.lineTo(i,o),t.lineTo(i,o-s),t.arcTo(i,o,i-s,o,s)),c&&(t.moveTo(e+s,o),t.lineTo(e,o),t.lineTo(e,o-s),t.arcTo(e,o,e+s,o,s))}function c(t,e,n,i,o,s,r,c){var u=t.isDark,d=i+s,h=o+s,p=n.radius*s,f=r-1,m=r+1,g=c-1,v=c+1,y=u(r,c),b=u(f,g),_=u(f,c),w=u(f,v),C=u(r,v),j=u(m,v),S=u(m,c),x=u(m,g),P=u(r,g);y?a(e,i,o,d,h,p,!_&&!P,!_&&!C,!S&&!C,!S&&!P):l(e,i,o,d,h,p,_&&P&&b,_&&C&&w,S&&C&&j,S&&P&&x)}function u(t,e,n){var i,o,s=t.moduleCount,a=n.size/s,l=r;for(n.radius>0&&n.radius<=.5&&(l=c),e.beginPath(),i=0;i<s;i+=1)for(o=0;o<s;o+=1){l(t,e,n,n.left+o*a,n.top+i*a,a,i,o)}if(v(n.fill).is("img")){e.strokeStyle="rgba(0,0,0,0.5)",e.lineWidth=2,e.stroke();var u=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",e.fill(),e.globalCompositeOperation=u,e.clip(),e.drawImage(n.fill,0,0,n.size,n.size),e.restore()}else e.fillStyle=n.fill,e.fill()}function d(t,e){var i=n(e.text,e.ecLevel,e.minVersion,e.maxVersion,e.quiet);if(!i)return null;var o=v(t).data("qrcode",i),r=o[0].getContext("2d");return s(i,r,e),u(i,r,e),o}function h(t){return d(v("<canvas/>").attr("width",t.size).attr("height",t.size),t)}function p(t){return v("<img/>").attr("src",h(t)[0].toDataURL("image/png"))}function f(t){var e=n(t.text,t.ecLevel,t.minVersion,t.maxVersion,t.quiet);if(!e)return null;var i,o,s=t.size,r=t.background,a=Math.floor,l=e.moduleCount,c=a(s/l),u=a(.5*(s-c*l)),d={position:"relative",left:0,top:0,padding:0,margin:0,width:s,height:s},h={position:"absolute",padding:0,margin:0,width:c,height:c,"background-color":t.fill},p=v("<div/>").data("qrcode",e).css(d);for(r&&p.css("background-color",r),i=0;i<l;i+=1)for(o=0;o<l;o+=1)e.isDark(i,o)&&v("<div/>").css(h).css({left:u+o*c,top:u+i*c}).appendTo(p);return p}function m(t){return y&&"canvas"===t.render?h(t):y&&"image"===t.render?p(t):f(t)}var g,v=window.jQuery,y=!(!(g=document.createElement("canvas")).getContext||!g.getContext("2d")),b={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};v.fn.qrcode=function(t){var e=v.extend({},b,t);return this.each(function(t,n){"canvas"===n.nodeName.toLowerCase()?d(n,e):v(n).append(m(e))})}}(function(){
// Copyright (c) 2009 Kazuhiko Arase
var t,e=function(){function t(e,n){if("undefined"==typeof e.length)throw new Error(e.length+"/"+n);var i=function(){for(var t=0;t<e.length&&0==e[t];)t+=1;for(var i=new Array(e.length-t+n),o=0;o<e.length-t;o+=1)i[o]=e[o+t];return i}(),o={getAt:function(t){return i[t]},getLength:function(){return i.length},multiply:function(e){for(var n=new Array(o.getLength()+e.getLength()-1),i=0;i<o.getLength();i+=1)for(var s=0;s<e.getLength();s+=1)n[i+s]^=h.gexp(h.glog(o.getAt(i))+h.glog(e.getAt(s)));return t(n,0)},mod:function(e){if(o.getLength()-e.getLength()<0)return o;for(var n=h.glog(o.getAt(0))-h.glog(e.getAt(0)),i=new Array(o.getLength()),s=0;s<o.getLength();s+=1)i[s]=o.getAt(s);for(s=0;s<e.getLength();s+=1)i[s]^=h.gexp(h.glog(e.getAt(s))+n);return t(i,0).mod(e)}};return o}var e=function(e,n){var i=236,o=17,s=e,r=c[n],a=null,l=0,u=null,h=new Array,g={},v=function(t,e){a=function(t){for(var e=new Array(t),n=0;n<t;n+=1){e[n]=new Array(t);for(var i=0;i<t;i+=1)e[n][i]=null}return e}(l=4*s+17),y(0,0),y(l-7,0),y(0,l-7),C(),w(),S(t,e),s>=7&&j(t),null==u&&(u=k(s,r,h)),x(u,e)},y=function(t,e){for(var n=-1;n<=7;n+=1)if(!(t+n<=-1||l<=t+n))for(var i=-1;i<=7;i+=1)e+i<=-1||l<=e+i||(a[t+n][e+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},b=function(){for(var t=0,e=0,n=0;n<8;n+=1){v(!0,n);var i=d.getLostPoint(g);(0==n||t>i)&&(t=i,e=n)}return e},w=function(){for(var t=8;t<l-8;t+=1)null==a[t][6]&&(a[t][6]=t%2==0);for(var e=8;e<l-8;e+=1)null==a[6][e]&&(a[6][e]=e%2==0)},C=function(){for(var t=d.getPatternPosition(s),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var i=t[e],o=t[n];if(null==a[i][o])for(var r=-2;r<=2;r+=1)for(var l=-2;l<=2;l+=1)a[i+r][o+l]=-2==r||2==r||-2==l||2==l||0==r&&0==l}},j=function(t){for(var e=d.getBCHTypeNumber(s),n=0;n<18;n+=1){var i=!t&&1==(e>>n&1);a[Math.floor(n/3)][n%3+l-8-3]=i}for(n=0;n<18;n+=1){i=!t&&1==(e>>n&1);a[n%3+l-8-3][Math.floor(n/3)]=i}},S=function(t,e){for(var n=r<<3|e,i=d.getBCHTypeInfo(n),o=0;o<15;o+=1){var s=!t&&1==(i>>o&1);o<6?a[o][8]=s:o<8?a[o+1][8]=s:a[l-15+o][8]=s}for(o=0;o<15;o+=1){s=!t&&1==(i>>o&1);o<8?a[8][l-o-1]=s:o<9?a[8][15-o-1+1]=s:a[8][15-o-1]=s}a[l-8][8]=!t},x=function(t,e){for(var n=-1,i=l-1,o=7,s=0,r=d.getMaskFunction(e),c=l-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var u=0;u<2;u+=1)if(null==a[i][c-u]){var h=!1;s<t.length&&(h=1==(t[s]>>>o&1)),r(i,c-u)&&(h=!h),a[i][c-u]=h,-1==(o-=1)&&(s+=1,o=7)}if((i+=n)<0||l<=i){i-=n,n=-n;break}}},P=function(e,n){for(var i=0,o=0,s=0,r=new Array(n.length),a=new Array(n.length),l=0;l<n.length;l+=1){var c=n[l].dataCount,u=n[l].totalCount-c;o=Math.max(o,c),s=Math.max(s,u),r[l]=new Array(c);for(var h=0;h<r[l].length;h+=1)r[l][h]=255&e.getBuffer()[h+i];i+=c;var p=d.getErrorCorrectPolynomial(u),f=t(r[l],p.getLength()-1).mod(p);a[l]=new Array(p.getLength()-1);for(h=0;h<a[l].length;h+=1){var m=h+f.getLength()-a[l].length;a[l][h]=m>=0?f.getAt(m):0}}var g=0;for(h=0;h<n.length;h+=1)g+=n[h].totalCount;var v=new Array(g),y=0;for(h=0;h<o;h+=1)for(l=0;l<n.length;l+=1)h<r[l].length&&(v[y]=r[l][h],y+=1);for(h=0;h<s;h+=1)for(l=0;l<n.length;l+=1)h<a[l].length&&(v[y]=a[l][h],y+=1);return v},k=function(t,e,n){for(var s=p.getRSBlocks(t,e),r=f(),a=0;a<n.length;a+=1){var l=n[a];r.put(l.getMode(),4),r.put(l.getLength(),d.getLengthInBits(l.getMode(),t)),l.write(r)}var c=0;for(a=0;a<s.length;a+=1)c+=s[a].dataCount;if(r.getLengthInBits()>8*c)throw new Error("code length overflow. ("+r.getLengthInBits()+">"+8*c+")");for(r.getLengthInBits()+4<=8*c&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(!1);for(;!(r.getLengthInBits()>=8*c||(r.put(i,8),r.getLengthInBits()>=8*c));)r.put(o,8);return P(r,s)};return g.addData=function(t){var e=m(t);h.push(e),u=null},g.isDark=function(t,e){if(t<0||l<=t||e<0||l<=e)throw new Error(t+","+e);return a[t][e]},g.getModuleCount=function(){return l},g.make=function(){v(!1,b())},g.createTableTag=function(t,e){t=t||2;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",n+='">',n+="<tbody>";for(var i=0;i<g.getModuleCount();i+=1){n+="<tr>";for(var o=0;o<g.getModuleCount();o+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+t+"px;",n+=" height: "+t+"px;",n+=" background-color: ",n+=g.isDark(i,o)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>"},g.createImgTag=function(t,e){t=t||2,e=void 0===e?4*t:e;var n=g.getModuleCount()*t+2*e,i=e,o=n-e;return _(n,n,function(e,n){if(i<=e&&e<o&&i<=n&&n<o){var s=Math.floor((e-i)/t),r=Math.floor((n-i)/t);return g.isDark(r,s)?0:1}return 1})},g};e.stringToBytes=function(t){for(var e=new Array,n=0;n<t.length;n+=1){var i=t.charCodeAt(n);e.push(255&i)}return e},e.createStringToBytes=function(t,e){var n=function(){for(var n=y(t),i=function(){var t=n.read();if(-1==t)throw new Error;return t},o=0,s={};;){var r=n.read();if(-1==r)break;var a=i(),l=i()<<8|i();s[String.fromCharCode(r<<8|a)]=l,o+=1}if(o!=e)throw new Error(o+" != "+e);return s}(),i="?".charCodeAt(0);return function(t){for(var e=new Array,o=0;o<t.length;o+=1){var s=t.charCodeAt(o);if(s<128)e.push(s);else{var r=n[t.charAt(o)];"number"==typeof r?(255&r)==r?e.push(r):(e.push(r>>>8),e.push(255&r)):e.push(i)}}return e}};var n,i,o,s,r,a,l={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},c={L:1,M:0,Q:3,H:2},u={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},d=(n=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,o=7973,s=21522,a=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(r={}).getBCHTypeInfo=function(t){for(var e=t<<10;a(e)-a(i)>=0;)e^=i<<a(e)-a(i);return(t<<10|e)^s},r.getBCHTypeNumber=function(t){for(var e=t<<12;a(e)-a(o)>=0;)e^=o<<a(e)-a(o);return t<<12|e},r.getPatternPosition=function(t){return n[t-1]},r.getMaskFunction=function(t){switch(t){case u.PATTERN000:return function(t,e){return(t+e)%2==0};case u.PATTERN001:return function(t){return t%2==0};case u.PATTERN010:return function(t,e){return e%3==0};case u.PATTERN011:return function(t,e){return(t+e)%3==0};case u.PATTERN100:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case u.PATTERN101:return function(t,e){return t*e%2+t*e%3==0};case u.PATTERN110:return function(t,e){return(t*e%2+t*e%3)%2==0};case u.PATTERN111:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw new Error("bad maskPattern:"+t)}},r.getErrorCorrectPolynomial=function(e){for(var n=t([1],0),i=0;i<e;i+=1)n=n.multiply(t([1,h.gexp(i)],0));return n},r.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case l.MODE_NUMBER:return 10;case l.MODE_ALPHA_NUM:return 9;case l.MODE_8BIT_BYTE:case l.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case l.MODE_NUMBER:return 12;case l.MODE_ALPHA_NUM:return 11;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case l.MODE_NUMBER:return 14;case l.MODE_ALPHA_NUM:return 13;case l.MODE_8BIT_BYTE:return 16;case l.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},r.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,i=0;i<e;i+=1)for(var o=0;o<e;o+=1){for(var s=0,r=t.isDark(i,o),a=-1;a<=1;a+=1)if(!(i+a<0||e<=i+a))for(var l=-1;l<=1;l+=1)o+l<0||e<=o+l||0==a&&0==l||r==t.isDark(i+a,o+l)&&(s+=1);s>5&&(n+=3+s-5)}for(i=0;i<e-1;i+=1)for(o=0;o<e-1;o+=1){var c=0;t.isDark(i,o)&&(c+=1),t.isDark(i+1,o)&&(c+=1),t.isDark(i,o+1)&&(c+=1),t.isDark(i+1,o+1)&&(c+=1),0!=c&&4!=c||(n+=3)}for(i=0;i<e;i+=1)for(o=0;o<e-6;o+=1)t.isDark(i,o)&&!t.isDark(i,o+1)&&t.isDark(i,o+2)&&t.isDark(i,o+3)&&t.isDark(i,o+4)&&!t.isDark(i,o+5)&&t.isDark(i,o+6)&&(n+=40);for(o=0;o<e;o+=1)for(i=0;i<e-6;i+=1)t.isDark(i,o)&&!t.isDark(i+1,o)&&t.isDark(i+2,o)&&t.isDark(i+3,o)&&t.isDark(i+4,o)&&!t.isDark(i+5,o)&&t.isDark(i+6,o)&&(n+=40);var u=0;for(o=0;o<e;o+=1)for(i=0;i<e;i+=1)t.isDark(i,o)&&(u+=1);return n+=Math.abs(100*u/e/e-50)/5*10},r),h=function(){for(var t=new Array(256),e=new Array(256),n=0;n<8;n+=1)t[n]=1<<n;for(n=8;n<256;n+=1)t[n]=t[n-4]^t[n-5]^t[n-6]^t[n-8];for(n=0;n<255;n+=1)e[t[n]]=n;var i={glog:function(t){if(t<1)throw new Error("glog("+t+")");return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return i}(),p=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var n={};return n.totalCount=t,n.dataCount=e,n},n={},i=function(e,n){switch(n){case c.L:return t[4*(e-1)+0];case c.M:return t[4*(e-1)+1];case c.Q:return t[4*(e-1)+2];case c.H:return t[4*(e-1)+3];default:return undefined}};return n.getRSBlocks=function(t,n){var o=i(t,n);if(void 0===o)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+n);for(var s=o.length/3,r=new Array,a=0;a<s;a+=1)for(var l=o[3*a+0],c=o[3*a+1],u=o[3*a+2],d=0;d<l;d+=1)r.push(e(c,u));return r},n}(),f=function(){var t=new Array,e=0,n={getBuffer:function(){return t},getAt:function(e){var n=Math.floor(e/8);return 1==(t[n]>>>7-e%8&1)},put:function(t,e){for(var i=0;i<e;i+=1)n.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return e},putBit:function(n){var i=Math.floor(e/8);t.length<=i&&t.push(0),n&&(t[i]|=128>>>e%8),e+=1}};return n},m=function(t){var n=l.MODE_8BIT_BYTE,i=e.stringToBytes(t),o={getMode:function(){return n},getLength:function(){return i.length},write:function(t){for(var e=0;e<i.length;e+=1)t.put(i[e],8)}};return o},g=function(){var t=new Array,e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,n,i){n=n||0,i=i||t.length;for(var o=0;o<i;o+=1)e.writeByte(t[o+n])},writeString:function(t){for(var n=0;n<t.length;n+=1)e.writeByte(t.charCodeAt(n))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var n=0;n<t.length;n+=1)n>0&&(e+=","),e+=t[n];return e+="]"}};return e},v=function(){var t=0,e=0,n=0,i="",o={},s=function(t){i+=String.fromCharCode(r(63&t))},r=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw new Error("n:"+t)};return o.writeByte=function(i){for(t=t<<8|255&i,e+=8,n+=1;e>=6;)s(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(s(t<<6-e),t=0,e=0),n%3!=0)for(var o=3-n%3,r=0;r<o;r+=1)i+="="},o.toString=function(){return i},o},y=function(t){var e=t,n=0,i=0,o=0,s={read:function(){for(;o<8;){if(n>=e.length){if(0==o)return-1;throw new Error("unexpected end of file./"+o)}var t=e.charAt(n);if(n+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(i=i<<6|r(t.charCodeAt(0)),o+=6)}var s=i>>>o-8&255;return o-=8,s}},r=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw new Error("c:"+t)};return s},b=function(t,e){var n=t,i=e,o=new Array(t*e),s={setPixel:function(t,e,i){o[e*n+t]=i},write:function(t){t.writeString("GIF87a"),t.writeShort(n),t.writeShort(i),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(n),t.writeShort(i),t.writeByte(0);var e=2,o=a(e);t.writeByte(e);for(var s=0;o.length-s>255;)t.writeByte(255),t.writeBytes(o,s,255),s+=255;t.writeByte(o.length-s),t.writeBytes(o,s,o.length-s),t.writeByte(0),t.writeString(";")}},r=function(t){var e=t,n=0,i=0,o={write:function(t,o){if(t>>>o!=0)throw new Error("length over");for(;n+o>=8;)e.writeByte(255&(t<<n|i)),o-=8-n,t>>>=8-n,i=0,n=0;i|=t<<n,n+=o},flush:function(){n>0&&e.writeByte(i)}};return o},a=function(t){for(var e=1<<t,n=1+(1<<t),i=t+1,s=l(),a=0;a<e;a+=1)s.add(String.fromCharCode(a));s.add(String.fromCharCode(e)),s.add(String.fromCharCode(n));var c=g(),u=r(c);u.write(e,i);var d=0,h=String.fromCharCode(o[d]);for(d+=1;d<o.length;){var p=String.fromCharCode(o[d]);d+=1,s.contains(h+p)?h+=p:(u.write(s.indexOf(h),i),s.size()<4095&&(s.size()==1<<i&&(i+=1),s.add(h+p)),h=p)}return u.write(s.indexOf(h),i),u.write(n,i),u.flush(),c.toByteArray()},l=function(){var t={},e=0,n={add:function(i){if(n.contains(i))throw new Error("dup key:"+i);t[i]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return"undefined"!=typeof t[e]}};return n};return s},_=function(t,e,n,i){for(var o=b(t,e),s=0;s<e;s+=1)for(var r=0;r<t;r+=1)o.setPixel(r,s,n(r,s));var a=g();o.write(a);for(var l=v(),c=a.toByteArray(),u=0;u<c.length;u+=1)l.writeByte(c[u]);l.flush();var d="";return d+="<img",d+=' src="',d+="data:image/gif;base64,",d+=l,d+='"',d+=' width="',d+=t,d+='"',d+=' height="',d+=e,d+='"',i&&(d+=' alt="',d+=i,d+='"'),d+="/>"};return e}();return t=function(){return e},"function"==typeof define&&define.amd?define([],t):"object"==typeof exports&&(module.exports=t()),function(t){t.stringToBytes=function(t){function e(t){for(var e=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e.push(i):i<2048?e.push(192|i>>6,128|63&i):i<55296||i>=57344?e.push(224|i>>12,128|i>>6&63,128|63&i):(n++,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i))}return e}return e(t)}}(e),e}()),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e=window.Slick||{};(e=function(){function e(e,i){var o,s=this;s.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:t(e),appendDots:t(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(e,n){return t('<button type="button" data-role="none" role="button" tabindex="0" />').text(n+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},s.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},t.extend(s,s.initials),s.activeBreakpoint=null,s.animType=null,s.animProp=null,s.breakpoints=[],s.breakpointSettings=[],s.cssTransitions=!1,s.focussed=!1,s.interrupted=!1,s.hidden="hidden",s.paused=!0,s.positionProp=null,s.respondTo=null,s.rowCount=1,s.shouldClick=!0,s.$slider=t(e),s.$slidesCache=null,s.transformType=null,s.transitionType=null,s.visibilityChange="visibilitychange",s.windowWidth=0,s.windowTimer=null,o=t(e).data("slick")||{},s.options=t.extend({},s.defaults,i,o),s.currentSlide=s.options.initialSlide,s.originalSettings=s.options,"undefined"!=typeof document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange"),s.autoPlay=t.proxy(s.autoPlay,s),s.autoPlayClear=t.proxy(s.autoPlayClear,s),s.autoPlayIterator=t.proxy(s.autoPlayIterator,s),s.changeSlide=t.proxy(s.changeSlide,s),s.clickHandler=t.proxy(s.clickHandler,s),s.selectHandler=t.proxy(s.selectHandler,s),s.setPosition=t.proxy(s.setPosition,s),s.swipeHandler=t.proxy(s.swipeHandler,s),s.dragHandler=t.proxy(s.dragHandler,s),s.keyHandler=t.proxy(s.keyHandler,s),s.instanceUid=n++,s.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,s.registerBreakpoints(),s.init(!0)}var n=0;return e}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},e.prototype.addSlide=e.prototype.slickAdd=function(e,n,i){var o=this;if("boolean"==typeof n)i=n,n=null;else if(0>n||n>=o.slideCount)return!1;o.unload(),"number"==typeof n?0===n&&0===o.$slides.length?t(e).appendTo(o.$slideTrack):i?t(e).insertBefore(o.$slides.eq(n)):t(e).insertAfter(o.$slides.eq(n)):!0===i?t(e).prependTo(o.$slideTrack):t(e).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(e,n){t(n).attr("data-slick-index",e)}),o.$slidesCache=o.$slides,o.reinit()},e.prototype.animateHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.animate({height:e},t.options.speed)}},e.prototype.animateSlide=function(e,n){var i={},o=this;o.animateHeight(),!0===o.options.rtl&&!1===o.options.vertical&&(e=-e),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:e},o.options.speed,o.options.easing,n):o.$slideTrack.animate({top:e},o.options.speed,o.options.easing,n):!1===o.cssTransitions?(!0===o.options.rtl&&(o.currentLeft=-o.currentLeft),t({animStart:o.currentLeft}).animate({animStart:e},{duration:o.options.speed,easing:o.options.easing,step:function(t){t=Math.ceil(t),!1===o.options.vertical?(i[o.animType]="translate("+t+"px, 0px)",o.$slideTrack.css(i)):(i[o.animType]="translate(0px,"+t+"px)",o.$slideTrack.css(i))},complete:function(){n&&n.call()}})):(o.applyTransition(),e=Math.ceil(e),!1===o.options.vertical?i[o.animType]="translate3d("+e+"px, 0px, 0px)":i[o.animType]="translate3d(0px,"+e+"px, 0px)",o.$slideTrack.css(i),n&&setTimeout(function(){o.disableTransition(),n.call()},o.options.speed))},e.prototype.getNavTarget=function(){var e=this,n=e.options.asNavFor;return n&&null!==n&&(n=t(n).not(e.$slider)),n},e.prototype.asNavFor=function(e){var n=this.getNavTarget();null!==n&&"object"==typeof n&&n.each(function(){var n=t(this).slick("getSlick");n.unslicked||n.slideHandler(e,!0)})},e.prototype.applyTransition=function(t){var e=this,n={};!1===e.options.fade?n[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:n[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.autoPlay=function(){var t=this;t.autoPlayClear(),t.slideCount>t.options.slidesToShow&&(t.autoPlayTimer=setInterval(t.autoPlayIterator,t.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var t=this;t.autoPlayTimer&&clearInterval(t.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var t=this,e=t.currentSlide+t.options.slidesToScroll;t.paused||t.interrupted||t.focussed||(!1===t.options.infinite&&(1===t.direction&&t.currentSlide+1===t.slideCount-1?t.direction=0:0===t.direction&&(e=t.currentSlide-t.options.slidesToScroll,t.currentSlide-1==0&&(t.direction=1))),t.slideHandler(e))},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&(e.$prevArrow=t(e.options.prevArrow).addClass("slick-arrow"),e.$nextArrow=t(e.options.nextArrow).addClass("slick-arrow"),e.slideCount>e.options.slidesToShow?(e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.prependTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},e.prototype.buildDots=function(){var e,n,i=this;if(!0===i.options.dots&&i.slideCount>i.options.slidesToShow){for(i.$slider.addClass("slick-dotted"),n=t("<ul />").addClass(i.options.dotsClass),e=0;e<=i.getDotCount();e+=1)n.append(t("<li />").append(i.options.customPaging.call(this,i,e)));i.$dots=n.appendTo(i.options.appendDots),i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,n){t(n).attr("data-slick-index",e).data("originalStyling",t(n).attr("style")||"")}),e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?t('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),(!0===e.options.centerMode||!0===e.options.swipeToSlide)&&(e.options.slidesToScroll=1),t("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.buildRows=function(){var t,e,n,i,o,s,r,a=this;if(i=document.createDocumentFragment(),s=a.$slider.children(),a.options.rows>1){for(r=a.options.slidesPerRow*a.options.rows,o=Math.ceil(s.length/r),t=0;o>t;t++){var l=document.createElement("div");for(e=0;e<a.options.rows;e++){var c=document.createElement("div");for(n=0;n<a.options.slidesPerRow;n++){var u=t*r+(e*a.options.slidesPerRow+n);s.get(u)&&c.appendChild(s.get(u))}l.appendChild(c)}i.appendChild(l)}a.$slider.empty().append(i),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},e.prototype.checkResponsive=function(e,n){var i,o,s,r=this,a=!1,l=r.$slider.width(),c=window.innerWidth||t(window).width();if("window"===r.respondTo?s=c:"slider"===r.respondTo?s=l:"min"===r.respondTo&&(s=Math.min(c,l)),r.options.responsive&&r.options.responsive.length&&null!==r.options.responsive){for(i in o=null,r.breakpoints)r.breakpoints.hasOwnProperty(i)&&(!1===r.originalSettings.mobileFirst?s<r.breakpoints[i]&&(o=r.breakpoints[i]):s>r.breakpoints[i]&&(o=r.breakpoints[i]));null!==o?null!==r.activeBreakpoint?(o!==r.activeBreakpoint||n)&&(r.activeBreakpoint=o,"unslick"===r.breakpointSettings[o]?r.unslick(o):(r.options=t.extend({},r.originalSettings,r.breakpointSettings[o]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),a=o):(r.activeBreakpoint=o,"unslick"===r.breakpointSettings[o]?r.unslick(o):(r.options=t.extend({},r.originalSettings,r.breakpointSettings[o]),!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e)),a=o):null!==r.activeBreakpoint&&(r.activeBreakpoint=null,r.options=r.originalSettings,!0===e&&(r.currentSlide=r.options.initialSlide),r.refresh(e),a=o),e||!1===a||r.$slider.trigger("breakpoint",[r,a])}},e.prototype.changeSlide=function(e,n){var i,o,s=this,r=t(e.currentTarget);switch(r.is("a")&&e.preventDefault(),r.is("li")||(r=r.closest("li")),i=s.slideCount%s.options.slidesToScroll!=0?0:(s.slideCount-s.currentSlide)%s.options.slidesToScroll,e.data.message){case"previous":o=0===i?s.options.slidesToScroll:s.options.slidesToShow-i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide-o,!1,n);break;case"next":o=0===i?s.options.slidesToScroll:i,s.slideCount>s.options.slidesToShow&&s.slideHandler(s.currentSlide+o,!1,n);break;case"index":var a=0===e.data.index?0:e.data.index||r.index()*s.options.slidesToScroll;s.slideHandler(s.checkNavigable(a),!1,n),r.children().trigger("focus");break;default:return}},e.prototype.checkNavigable=function(t){var e,n;if(n=0,t>(e=this.getNavigableIndexes())[e.length-1])t=e[e.length-1];else for(var i in e){if(t<e[i]){t=n;break}n=e[i]}return t},e.prototype.cleanUpEvents=function(){var e=this;e.options.dots&&null!==e.$dots&&t("li",e.$dots).off("click.slick",e.changeSlide).off("mouseenter.slick",t.proxy(e.interrupt,e,!0)).off("mouseleave.slick",t.proxy(e.interrupt,e,!1)),e.$slider.off("focus.slick blur.slick"),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow&&e.$prevArrow.off("click.slick",e.changeSlide),e.$nextArrow&&e.$nextArrow.off("click.slick",e.changeSlide)),e.$list.off("touchstart.slick mousedown.slick",e.swipeHandler),e.$list.off("touchmove.slick mousemove.slick",e.swipeHandler),e.$list.off("touchend.slick mouseup.slick",e.swipeHandler),e.$list.off("touchcancel.slick mouseleave.slick",e.swipeHandler),e.$list.off("click.slick",e.clickHandler),t(document).off(e.visibilityChange,e.visibility),e.cleanUpSlideEvents(),!0===e.options.accessibility&&e.$list.off("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().off("click.slick",e.selectHandler),t(window).off("orientationchange.slick.slick-"+e.instanceUid,e.orientationChange),t(window).off("resize.slick.slick-"+e.instanceUid,e.resize),t("[draggable!=true]",e.$slideTrack).off("dragstart",e.preventDefault),t(window).off("load.slick.slick-"+e.instanceUid,e.setPosition),t(document).off("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.cleanUpSlideEvents=function(){var e=this;e.$list.off("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.off("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.cleanUpRows=function(){var t,e=this;e.options.rows>1&&((t=e.$slides.children().children()).removeAttr("style"),e.$slider.empty().append(t))},e.prototype.clickHandler=function(t){!1===this.shouldClick&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())},e.prototype.destroy=function(e){var n=this;n.autoPlayClear(),n.touchObject={},n.cleanUpEvents(),t(".slick-cloned",n.$slider).detach(),n.$dots&&n.$dots.remove(),n.$prevArrow&&n.$prevArrow.length&&(n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.prevArrow)&&n.$prevArrow.remove()),n.$nextArrow&&n.$nextArrow.length&&(n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),n.htmlExpr.test(n.options.nextArrow)&&n.$nextArrow.remove()),n.$slides&&(n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){t(this).attr("style",t(this).data("originalStyling"))}),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.detach(),n.$list.detach(),n.$slider.append(n.$slides)),n.cleanUpRows(),n.$slider.removeClass("slick-slider"),n.$slider.removeClass("slick-initialized"),n.$slider.removeClass("slick-dotted"),n.unslicked=!0,e||n.$slider.trigger("destroy",[n])},e.prototype.disableTransition=function(t){var e=this,n={};n[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(n):e.$slides.eq(t).css(n)},e.prototype.fadeSlide=function(t,e){var n=this;!1===n.cssTransitions?(n.$slides.eq(t).css({zIndex:n.options.zIndex}),n.$slides.eq(t).animate({opacity:1},n.options.speed,n.options.easing,e)):(n.applyTransition(t),n.$slides.eq(t).css({opacity:1,zIndex:n.options.zIndex}),e&&setTimeout(function(){n.disableTransition(t),e.call()},n.options.speed))},e.prototype.fadeSlideOut=function(t){var e=this;!1===e.cssTransitions?e.$slides.eq(t).animate({opacity:0,zIndex:e.options.zIndex-2},e.options.speed,e.options.easing):(e.applyTransition(t),e.$slides.eq(t).css({opacity:0,zIndex:e.options.zIndex-2}))},e.prototype.filterSlides=e.prototype.slickFilter=function(t){var e=this;null!==t&&(e.$slidesCache=e.$slides,e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(t).appendTo(e.$slideTrack),e.reinit())},e.prototype.focusHandler=function(){var e=this;e.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(n){n.stopImmediatePropagation();var i=t(this);setTimeout(function(){e.options.pauseOnFocus&&(e.focussed=i.is(":focus"),e.autoPlay())},0)})},e.prototype.getCurrent=e.prototype.slickCurrentSlide=function(){return this.currentSlide},e.prototype.getDotCount=function(){var t=this,e=0,n=0,i=0;if(!0===t.options.infinite)for(;e<t.slideCount;)++i,e=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else if(!0===t.options.centerMode)i=t.slideCount;else if(t.options.asNavFor)for(;e<t.slideCount;)++i,e=n+t.options.slidesToScroll,n+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;else i=1+Math.ceil((t.slideCount-t.options.slidesToShow)/t.options.slidesToScroll);return i-1},e.prototype.getLeft=function(t){var e,n,i,o=this,s=0;return o.slideOffset=0,n=o.$slides.first().outerHeight(!0),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,s=n*o.options.slidesToShow*-1),o.slideCount%o.options.slidesToScroll!=0&&t+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(t>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(t-o.slideCount))*o.slideWidth*-1,
s=(o.options.slidesToShow-(t-o.slideCount))*n*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,s=o.slideCount%o.options.slidesToScroll*n*-1))):t+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(t+o.options.slidesToShow-o.slideCount)*o.slideWidth,s=(t+o.options.slidesToShow-o.slideCount)*n),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,s=0),!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=!1===o.options.vertical?t*o.slideWidth*-1+o.slideOffset:t*n*-1+s,!0===o.options.variableWidth&&(i=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow),e=!0===o.options.rtl?i[0]?-1*(o.$slideTrack.width()-i[0].offsetLeft-i.width()):0:i[0]?-1*i[0].offsetLeft:0,!0===o.options.centerMode&&(i=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(t):o.$slideTrack.children(".slick-slide").eq(t+o.options.slidesToShow+1),e=!0===o.options.rtl?i[0]?-1*(o.$slideTrack.width()-i[0].offsetLeft-i.width()):0:i[0]?-1*i[0].offsetLeft:0,e+=(o.$list.width()-i.outerWidth())/2)),e},e.prototype.getOption=e.prototype.slickGetOption=function(t){return this.options[t]},e.prototype.getNavigableIndexes=function(){var t,e=this,n=0,i=0,o=[];for(!1===e.options.infinite?t=e.slideCount:(n=-1*e.options.slidesToScroll,i=-1*e.options.slidesToScroll,t=2*e.slideCount);t>n;)o.push(n),n=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;return o},e.prototype.getSlick=function(){return this},e.prototype.getSlideCount=function(){var e,n,i=this;return n=!0===i.options.centerMode?i.slideWidth*Math.floor(i.options.slidesToShow/2):0,!0===i.options.swipeToSlide?(i.$slideTrack.find(".slick-slide").each(function(o,s){return s.offsetLeft-n+t(s).outerWidth()/2>-1*i.swipeLeft?(e=s,!1):void 0}),Math.abs(t(e).attr("data-slick-index")-i.currentSlide)||1):i.options.slidesToScroll},e.prototype.goTo=e.prototype.slickGoTo=function(t,e){this.changeSlide({data:{message:"index",index:parseInt(t)}},e)},e.prototype.init=function(e){var n=this;t(n.$slider).hasClass("slick-initialized")||(t(n.$slider).addClass("slick-initialized"),n.buildRows(),n.buildOut(),n.setProps(),n.startLoad(),n.loadSlider(),n.initializeEvents(),n.updateArrows(),n.updateDots(),n.checkResponsive(!0),n.focusHandler()),e&&n.$slider.trigger("init",[n]),!0===n.options.accessibility&&n.initADA(),n.options.autoplay&&(n.paused=!1,n.autoPlay())},e.prototype.initADA=function(){var e=this;e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),e.$slideTrack.attr("role","listbox"),e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(n){t(this).attr({role:"option","aria-describedby":"slick-slide"+e.instanceUid+n})}),null!==e.$dots&&e.$dots.attr("role","tablist").find("li").each(function(n){t(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+e.instanceUid+n,id:"slick-slide"+e.instanceUid+n})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),e.activateADA()},e.prototype.initArrowEvents=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},t.changeSlide),t.$nextArrow.off("click.slick").on("click.slick",{message:"next"},t.changeSlide))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&t("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&t("li",e.$dots).on("mouseenter.slick",t.proxy(e.interrupt,e,!0)).on("mouseleave.slick",t.proxy(e.interrupt,e,!1))},e.prototype.initSlideEvents=function(){var e=this;e.options.pauseOnHover&&(e.$list.on("mouseenter.slick",t.proxy(e.interrupt,e,!0)),e.$list.on("mouseleave.slick",t.proxy(e.interrupt,e,!1)))},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.initSlideEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),t(document).on(e.visibilityChange,t.proxy(e.visibility,e)),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),t(window).on("orientationchange.slick.slick-"+e.instanceUid,t.proxy(e.orientationChange,e)),t(window).on("resize.slick.slick-"+e.instanceUid,t.proxy(e.resize,e)),t("[draggable!=true]",e.$slideTrack).on("dragstart",e.preventDefault),t(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),t(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.show(),t.$nextArrow.show()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.show()},e.prototype.keyHandler=function(t){var e=this;t.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===t.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:!0===e.options.rtl?"next":"previous"}}):39===t.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:!0===e.options.rtl?"previous":"next"}}))},e.prototype.lazyLoad=function(){function e(e){t("img[data-lazy]",e).each(function(){var e=t(this),n=t(this).attr("data-lazy"),i=document.createElement("img");i.onload=function(){e.animate({opacity:0},100,function(){e.attr("src",n).animate({opacity:1},200,function(){e.removeAttr("data-lazy").removeClass("slick-loading")}),o.$slider.trigger("lazyLoaded",[o,e,n])})},i.onerror=function(){e.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),o.$slider.trigger("lazyLoadError",[o,e,n])},i.src=n})}var n,i,o=this;!0===o.options.centerMode?!0===o.options.infinite?i=(n=o.currentSlide+(o.options.slidesToShow/2+1))+o.options.slidesToShow+2:(n=Math.max(0,o.currentSlide-(o.options.slidesToShow/2+1)),i=o.options.slidesToShow/2+1+2+o.currentSlide):(n=o.options.infinite?o.options.slidesToShow+o.currentSlide:o.currentSlide,i=Math.ceil(n+o.options.slidesToShow),!0===o.options.fade&&(n>0&&n--,i<=o.slideCount&&i++)),e(o.$slider.find(".slick-slide").slice(n,i)),o.slideCount<=o.options.slidesToShow?e(o.$slider.find(".slick-slide")):o.currentSlide>=o.slideCount-o.options.slidesToShow?e(o.$slider.find(".slick-cloned").slice(0,o.options.slidesToShow)):0===o.currentSlide&&e(o.$slider.find(".slick-cloned").slice(-1*o.options.slidesToShow))},e.prototype.loadSlider=function(){var t=this;t.setPosition(),t.$slideTrack.css({opacity:1}),t.$slider.removeClass("slick-loading"),t.initUI(),"progressive"===t.options.lazyLoad&&t.progressiveLazyLoad()},e.prototype.next=e.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},e.prototype.orientationChange=function(){var t=this;t.checkResponsive(),t.setPosition()},e.prototype.pause=e.prototype.slickPause=function(){var t=this;t.autoPlayClear(),t.paused=!0},e.prototype.play=e.prototype.slickPlay=function(){var t=this;t.autoPlay(),t.options.autoplay=!0,t.paused=!1,t.focussed=!1,t.interrupted=!1},e.prototype.postSlide=function(t){var e=this;e.unslicked||(e.$slider.trigger("afterChange",[e,t]),e.animating=!1,e.setPosition(),e.swipeLeft=null,e.options.autoplay&&e.autoPlay(),!0===e.options.accessibility&&e.initADA())},e.prototype.prev=e.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},e.prototype.preventDefault=function(t){t.preventDefault()},e.prototype.progressiveLazyLoad=function(e){e=e||1;var n,i,o,s=this,r=t("img[data-lazy]",s.$slider);r.length?(n=r.first(),i=n.attr("data-lazy"),(o=document.createElement("img")).onload=function(){n.attr("src",i).removeAttr("data-lazy").removeClass("slick-loading"),!0===s.options.adaptiveHeight&&s.setPosition(),s.$slider.trigger("lazyLoaded",[s,n,i]),s.progressiveLazyLoad()},o.onerror=function(){3>e?setTimeout(function(){s.progressiveLazyLoad(e+1)},500):(n.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,n,i]),s.progressiveLazyLoad())},o.src=i):s.$slider.trigger("allImagesLoaded",[s])},e.prototype.refresh=function(e){var n,i,o=this;i=o.slideCount-o.options.slidesToShow,!o.options.infinite&&o.currentSlide>i&&(o.currentSlide=i),o.slideCount<=o.options.slidesToShow&&(o.currentSlide=0),n=o.currentSlide,o.destroy(!0),t.extend(o,o.initials,{currentSlide:n}),o.init(),e||o.changeSlide({data:{message:"index",index:n}},!1)},e.prototype.registerBreakpoints=function(){var e,n,i,o=this,s=o.options.responsive||null;if("array"===t.type(s)&&s.length){for(e in o.respondTo=o.options.respondTo||"window",s)if(i=o.breakpoints.length-1,n=s[e].breakpoint,s.hasOwnProperty(e)){for(;i>=0;)o.breakpoints[i]&&o.breakpoints[i]===n&&o.breakpoints.splice(i,1),i--;o.breakpoints.push(n),o.breakpointSettings[n]=s[e].settings}o.breakpoints.sort(function(t,e){return o.options.mobileFirst?t-e:e-t})}},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.registerBreakpoints(),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),e.cleanUpSlideEvents(),e.initSlideEvents(),e.checkResponsive(!1,!0),!0===e.options.focusOnSelect&&t(e.$slideTrack).children().on("click.slick",e.selectHandler),e.setSlideClasses("number"==typeof e.currentSlide?e.currentSlide:0),e.setPosition(),e.focusHandler(),e.paused=!e.options.autoplay,e.autoPlay(),e.$slider.trigger("reInit",[e])},e.prototype.resize=function(){var e=this;t(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=t(window).width(),e.checkResponsive(),e.unslicked||e.setPosition()},50))},e.prototype.removeSlide=e.prototype.slickRemove=function(t,e,n){var i=this;return"boolean"==typeof t?t=!0===(e=t)?0:i.slideCount-1:t=!0===e?--t:t,!(i.slideCount<1||0>t||t>i.slideCount-1)&&(i.unload(),!0===n?i.$slideTrack.children().remove():i.$slideTrack.children(this.options.slide).eq(t).remove(),i.$slides=i.$slideTrack.children(this.options.slide),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.append(i.$slides),i.$slidesCache=i.$slides,void i.reinit())},e.prototype.setCSS=function(t){var e,n,i=this,o={};!0===i.options.rtl&&(t=-t),e="left"==i.positionProp?Math.ceil(t)+"px":"0px",n="top"==i.positionProp?Math.ceil(t)+"px":"0px",o[i.positionProp]=t,!1===i.transformsEnabled?i.$slideTrack.css(o):(o={},!1===i.cssTransitions?(o[i.animType]="translate("+e+", "+n+")",i.$slideTrack.css(o)):(o[i.animType]="translate3d("+e+", "+n+", 0px)",i.$slideTrack.css(o)))},e.prototype.setDimensions=function(){var t=this;!1===t.options.vertical?!0===t.options.centerMode&&t.$list.css({padding:"0px "+t.options.centerPadding}):(t.$list.height(t.$slides.first().outerHeight(!0)*t.options.slidesToShow),!0===t.options.centerMode&&t.$list.css({padding:t.options.centerPadding+" 0px"})),t.listWidth=t.$list.width(),t.listHeight=t.$list.height(),!1===t.options.vertical&&!1===t.options.variableWidth?(t.slideWidth=Math.ceil(t.listWidth/t.options.slidesToShow),t.$slideTrack.width(Math.ceil(t.slideWidth*t.$slideTrack.children(".slick-slide").length))):!0===t.options.variableWidth?t.$slideTrack.width(5e3*t.slideCount):(t.slideWidth=Math.ceil(t.listWidth),t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0)*t.$slideTrack.children(".slick-slide").length)));var e=t.$slides.first().outerWidth(!0)-t.$slides.first().width();!1===t.options.variableWidth&&t.$slideTrack.children(".slick-slide").width(t.slideWidth-e)},e.prototype.setFade=function(){var e,n=this;n.$slides.each(function(i,o){e=n.slideWidth*i*-1,!0===n.options.rtl?t(o).css({position:"relative",right:e,top:0,zIndex:n.options.zIndex-2,opacity:0}):t(o).css({position:"relative",left:e,top:0,zIndex:n.options.zIndex-2,opacity:0})}),n.$slides.eq(n.currentSlide).css({zIndex:n.options.zIndex-1,opacity:1})},e.prototype.setHeight=function(){var t=this;if(1===t.options.slidesToShow&&!0===t.options.adaptiveHeight&&!1===t.options.vertical){var e=t.$slides.eq(t.currentSlide).outerHeight(!0);t.$list.css("height",e)}},e.prototype.setOption=e.prototype.slickSetOption=function(){var e,n,i,o,s,r=this,a=!1;if("object"===t.type(arguments[0])?(i=arguments[0],a=arguments[1],s="multiple"):"string"===t.type(arguments[0])&&(i=arguments[0],o=arguments[1],a=arguments[2],"responsive"===arguments[0]&&"array"===t.type(arguments[1])?s="responsive":"undefined"!=typeof arguments[1]&&(s="single")),"single"===s)r.options[i]=o;else if("multiple"===s)t.each(i,function(t,e){r.options[t]=e});else if("responsive"===s)for(n in o)if("array"!==t.type(r.options.responsive))r.options.responsive=[o[n]];else{for(e=r.options.responsive.length-1;e>=0;)r.options.responsive[e].breakpoint===o[n].breakpoint&&r.options.responsive.splice(e,1),e--;r.options.responsive.push(o[n])}a&&(r.unload(),r.reinit())},e.prototype.setPosition=function(){var t=this;t.setDimensions(),t.setHeight(),!1===t.options.fade?t.setCSS(t.getLeft(t.currentSlide)):t.setFade(),t.$slider.trigger("setPosition",[t])},e.prototype.setProps=function(){var t=this,e=document.body.style;t.positionProp=!0===t.options.vertical?"top":"left","top"===t.positionProp?t.$slider.addClass("slick-vertical"):t.$slider.removeClass("slick-vertical"),(void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.msTransition)&&!0===t.options.useCSS&&(t.cssTransitions=!0),t.options.fade&&("number"==typeof t.options.zIndex?t.options.zIndex<3&&(t.options.zIndex=3):t.options.zIndex=t.defaults.zIndex),void 0!==e.OTransform&&(t.animType="OTransform",t.transformType="-o-transform",t.transitionType="OTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.MozTransform&&(t.animType="MozTransform",t.transformType="-moz-transform",t.transitionType="MozTransition",void 0===e.perspectiveProperty&&void 0===e.MozPerspective&&(t.animType=!1)),void 0!==e.webkitTransform&&(t.animType="webkitTransform",t.transformType="-webkit-transform",t.transitionType="webkitTransition",void 0===e.perspectiveProperty&&void 0===e.webkitPerspective&&(t.animType=!1)),void 0!==e.msTransform&&(t.animType="msTransform",t.transformType="-ms-transform",t.transitionType="msTransition",void 0===e.msTransform&&(t.animType=!1)),void 0!==e.transform&&!1!==t.animType&&(t.animType="transform",t.transformType="transform",t.transitionType="transition"),t.transformsEnabled=t.options.useTransform&&null!==t.animType&&!1!==t.animType},e.prototype.setSlideClasses=function(t){var e,n,i,o,s=this;n=s.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),s.$slides.eq(t).addClass("slick-current"),!0===s.options.centerMode?(e=Math.floor(s.options.slidesToShow/2),!0===s.options.infinite&&(t>=e&&t<=s.slideCount-1-e?s.$slides.slice(t-e,t+e+1).addClass("slick-active").attr("aria-hidden","false"):(i=s.options.slidesToShow+t,n.slice(i-e+1,i+e+2).addClass("slick-active").attr("aria-hidden","false")),0===t?n.eq(n.length-1-s.options.slidesToShow).addClass("slick-center"):t===s.slideCount-1&&n.eq(s.options.slidesToShow).addClass("slick-center")),s.$slides.eq(t).addClass("slick-center")):t>=0&&t<=s.slideCount-s.options.slidesToShow?s.$slides.slice(t,t+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):n.length<=s.options.slidesToShow?n.addClass("slick-active").attr("aria-hidden","false"):(o=s.slideCount%s.options.slidesToShow,i=!0===s.options.infinite?s.options.slidesToShow+t:t,s.options.slidesToShow==s.options.slidesToScroll&&s.slideCount-t<s.options.slidesToShow?n.slice(i-(s.options.slidesToShow-o),i+o).addClass("slick-active").attr("aria-hidden","false"):n.slice(i,i+s.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===s.options.lazyLoad&&s.lazyLoad()},e.prototype.setupInfinite=function(){var e,n,i,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(n=null,o.slideCount>o.options.slidesToShow)){for(i=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,e=o.slideCount;e>o.slideCount-i;e-=1)n=e-1,t(o.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(e=0;i>e;e+=1)n=e,t(o.$slides[n]).clone(!0).attr("id","").attr("data-slick-index",n+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){t(this).attr("id","")})}},e.prototype.interrupt=function(t){var e=this;t||e.autoPlay(),e.interrupted=t},e.prototype.selectHandler=function(e){var n=this,i=t(e.target).is(".slick-slide")?t(e.target):t(e.target).parents(".slick-slide"),o=parseInt(i.attr("data-slick-index"));return o||(o=0),n.slideCount<=n.options.slidesToShow?(n.setSlideClasses(o),void n.asNavFor(o)):void n.slideHandler(o)},e.prototype.slideHandler=function(t,e,n){var i,o,s,r,a,l=null,c=this;return e=e||!1,!0===c.animating&&!0===c.options.waitForAnimate||!0===c.options.fade&&c.currentSlide===t||c.slideCount<=c.options.slidesToShow?void 0:(!1===e&&c.asNavFor(t),i=t,l=c.getLeft(i),r=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?r:c.swipeLeft,!1===c.options.infinite&&!1===c.options.centerMode&&(0>t||t>c.getDotCount()*c.options.slidesToScroll)?void(!1===c.options.fade&&(i=c.currentSlide,!0!==n?c.animateSlide(r,function(){c.postSlide(i)}):c.postSlide(i))):!1===c.options.infinite&&!0===c.options.centerMode&&(0>t||t>c.slideCount-c.options.slidesToScroll)?void(!1===c.options.fade&&(i=c.currentSlide,!0!==n?c.animateSlide(r,function(){c.postSlide(i)}):c.postSlide(i))):(c.options.autoplay&&clearInterval(c.autoPlayTimer),o=0>i?c.slideCount%c.options.slidesToScroll!=0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+i:i>=c.slideCount?c.slideCount%c.options.slidesToScroll!=0?0:i-c.slideCount:i,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,o]),s=c.currentSlide,c.currentSlide=o,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&((a=(a=c.getNavTarget()).slick("getSlick")).slideCount<=a.options.slidesToShow&&a.setSlideClasses(c.currentSlide)),c.updateDots(),c.updateArrows(),!0===c.options.fade?(!0!==n?(c.fadeSlideOut(s),c.fadeSlide(o,function(){c.postSlide(o)})):c.postSlide(o),void c.animateHeight()):void(!0!==n?c.animateSlide(l,function(){c.postSlide(o)}):c.postSlide(o))))},e.prototype.startLoad=function(){var t=this;!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow.hide(),t.$nextArrow.hide()),!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&t.$dots.hide(),t.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var t,e,n,i,o=this;return t=o.touchObject.startX-o.touchObject.curX,e=o.touchObject.startY-o.touchObject.curY,n=Math.atan2(e,t),0>(i=Math.round(180*n/Math.PI))&&(i=360-Math.abs(i)),45>=i&&i>=0?!1===o.options.rtl?"left":"right":360>=i&&i>=315?!1===o.options.rtl?"left":"right":i>=135&&225>=i?!1===o.options.rtl?"right":"left":!0===o.options.verticalSwiping?i>=35&&135>=i?"down":"up":"vertical"},e.prototype.swipeEnd=function(){var t,e,n=this;if(n.dragging=!1,n.interrupted=!1,n.shouldClick=!(n.touchObject.swipeLength>10),void 0===n.touchObject.curX)return!1;if(!0===n.touchObject.edgeHit&&n.$slider.trigger("edge",[n,n.swipeDirection()]),n.touchObject.swipeLength>=n.touchObject.minSwipe){switch(e=n.swipeDirection()){case"left":case"down":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide+n.getSlideCount()):n.currentSlide+n.getSlideCount(),n.currentDirection=0;break;case"right":case"up":t=n.options.swipeToSlide?n.checkNavigable(n.currentSlide-n.getSlideCount()):n.currentSlide-n.getSlideCount(),n.currentDirection=1}"vertical"!=e&&(n.slideHandler(t),n.touchObject={},n.$slider.trigger("swipe",[n,e]))}else n.touchObject.startX!==n.touchObject.curX&&(n.slideHandler(n.currentSlide),n.touchObject={})},e.prototype.swipeHandler=function(t){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==t.type.indexOf("mouse")))switch(e.touchObject.fingerCount=t.originalEvent&&void 0!==t.originalEvent.touches?t.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,!0===e.options.verticalSwiping&&(e.touchObject.minSwipe=e.listHeight/e.options.touchThreshold),t.data.action){case"start":e.swipeStart(t);break;case"move":e.swipeMove(t);break;case"end":e.swipeEnd(t)}},e.prototype.swipeMove=function(t){var e,n,i,o,s,r=this;return s=void 0!==t.originalEvent?t.originalEvent.touches:null,!(!r.dragging||s&&1!==s.length)&&(e=r.getLeft(r.currentSlide),r.touchObject.curX=void 0!==s?s[0].pageX:t.clientX,r.touchObject.curY=void 0!==s?s[0].pageY:t.clientY,r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curX-r.touchObject.startX,2))),!0===r.options.verticalSwiping&&(r.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(r.touchObject.curY-r.touchObject.startY,2)))),"vertical"!==(n=r.swipeDirection())?(void 0!==t.originalEvent&&r.touchObject.swipeLength>4&&t.preventDefault(),o=(!1===r.options.rtl?1:-1)*(r.touchObject.curX>r.touchObject.startX?1:-1),!0===r.options.verticalSwiping&&(o=r.touchObject.curY>r.touchObject.startY?1:-1),i=r.touchObject.swipeLength,r.touchObject.edgeHit=!1,!1===r.options.infinite&&(0===r.currentSlide&&"right"===n||r.currentSlide>=r.getDotCount()&&"left"===n)&&(i=r.touchObject.swipeLength*r.options.edgeFriction,r.touchObject.edgeHit=!0),!1===r.options.vertical?r.swipeLeft=e+i*o:r.swipeLeft=e+i*(r.$list.height()/r.listWidth)*o,!0===r.options.verticalSwiping&&(r.swipeLeft=e+i*o),!0!==r.options.fade&&!1!==r.options.touchMove&&(!0===r.animating?(r.swipeLeft=null,!1):void r.setCSS(r.swipeLeft))):void 0)},e.prototype.swipeStart=function(t){var e,n=this;return n.interrupted=!0,1!==n.touchObject.fingerCount||n.slideCount<=n.options.slidesToShow?(n.touchObject={},!1):(void 0!==t.originalEvent&&void 0!==t.originalEvent.touches&&(e=t.originalEvent.touches[0]),n.touchObject.startX=n.touchObject.curX=void 0!==e?e.pageX:t.clientX,n.touchObject.startY=n.touchObject.curY=void 0!==e?e.pageY:t.clientY,void(n.dragging=!0))},e.prototype.unfilterSlides=e.prototype.slickUnfilter=function(){var t=this;null!==t.$slidesCache&&(t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.appendTo(t.$slideTrack),t.reinit())},e.prototype.unload=function(){var e=this;t(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.remove(),e.$nextArrow&&e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},e.prototype.unslick=function(t){var e=this;e.$slider.trigger("unslick",[e,t]),e.destroy()},e.prototype.updateArrows=function(){var t=this;Math.floor(t.options.slidesToShow/2),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&!t.options.infinite&&(t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===t.currentSlide?(t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-t.options.slidesToShow&&!1===t.options.centerMode?(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):t.currentSlide>=t.slideCount-1&&!0===t.options.centerMode&&(t.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),t.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},e.prototype.updateDots=function(){var t=this;null!==t.$dots&&(t.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),t.$dots.find("li").eq(Math.floor(t.currentSlide/t.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},e.prototype.visibility=function(){var t=this;t.options.autoplay&&(document[t.hidden]?t.interrupted=!0:t.interrupted=!1)},t.fn.slick=function(){var t,n,i=this,o=arguments[0],s=Array.prototype.slice.call(arguments,1),r=i.length;for(t=0;r>t;t++)if("object"==typeof o||void 0===o?i[t].slick=new e(i[t],o):n=i[t].slick[o].apply(i[t].slick,s),void 0!==n)return n;return i}}),OverflowCrawler.prototype.bindEvents=function(){jQuery(".overflow-crawl").each(function(t,e){var n=e.offsetWidth-e.scrollWidth,i="0s";n<0?(i=(0-n)/100+"s",n+="px"):n="0em",jQuery(e).children().each(function(t,e){jQuery(e).css("-webkit-transition",i),jQuery(e).css("-moz-transition",i),jQuery(e).css("transition",i),jQuery(e).css("-webkit-transition-timing-function","linear"),jQuery(e).css("-moz-transition-timing-function","linear"),jQuery(e).css("transition-timing-function","linear"),jQuery(e).on("mouseenter",function(){jQuery(this).css("margin-left",n)}),jQuery(e).on("mouseleave",function(){jQuery(this).css("margin-left","0em")})})}),jQuery(".overflow-vcrawl").each(function(t,e){var n=e.offsetHeight-e.scrollHeight,i="0s";n<0?(i=(0-n)/50+"s",n+="px"):n="0em",jQuery(e).children().each(function(t,e){jQuery(e).css("-webkit-transition",i),jQuery(e).css("-moz-transition",i),jQuery(e).css("transition",i),jQuery(e).css("-webkit-transition-timing-function","linear"),jQuery(e).css("-moz-transition-timing-function","linear"),jQuery(e).css("transition-timing-function","linear"),jQuery(e).on("mouseenter",function(){jQuery(this).css("margin-top",n)}),jQuery(e).on("mouseleave",function(){jQuery(this).css("margin-top","0em")})})})},GeniLoader.ready(function(){Geni=Geni||{},Geni.J=Geni.J||{},Geni.J.OverflowCrawler=Geni.J.OverflowCrawler||new OverflowCrawler}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var i,o,s,r;r=function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(t){return t&&t.__esModule?t:{"default":t}}(e),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){n(this,t),this.resolveOptions(e),this.initSelection()}return s(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,i["default"])(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,i["default"])(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":o(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=r},o=[t,n(7)],void 0!==(s="function"==typeof(i=r)?i.apply(e,o):i)&&(t.exports=s)},function(t,e,n){function i(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!a.string(e))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(t))return o(t,e,n);if(a.nodeList(t))return s(t,e,n);if(a.string(t))return r(t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function o(t,e,n){return t.addEventListener(e,n),{destroy:function(){t.removeEventListener(e,n)}}}function s(t,e,n){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,n)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,n)})}}}function r(t,e,n){return l(document.body,t,e,n)}var a=n(6),l=n(5);t.exports=i},function(t){function e(){}e.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){o.off(t,i),e.apply(n,arguments)}var o=this;return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,o=n.length;i<o;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],o=[];if(i&&e)for(var s=0,r=i.length;s<r;s++)i[s].fn!==e&&i[s].fn._!==e&&o.push(i[s]);return o.length?n[t]=o:delete n[t],this}},t.exports=e},function(t,e,n){var i,o,s,r;r=function(t,e,n,i){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){var n="data-clipboard-"+t;if(e.hasAttribute(n))return e.getAttribute(n)}var c=o(e),u=o(n),d=o(i),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=function(){function t(e,n){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return a(t,u["default"]),p(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===h(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,d["default"])(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new c["default"]({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return l("action",t)}},{key:"defaultTarget",value:function(t){var e=l("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return l("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,n=!!document.queryCommandSupported;return e.forEach(function(t){n=n&&!!document.queryCommandSupported(t)}),n}}]),t}();t.exports=f},o=[t,n(0),n(2),n(1)],void 0!==(s="function"==typeof(i=r)?i.apply(e,o):i)&&(t.exports=s)},function(t){function e(t,e){for(;t&&t.nodeType!==n;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}t.exports=e},function(t,e,n){function i(t,e,n,i,o){var r=s.apply(this,arguments);return t.addEventListener(n,r,o),{destroy:function(){t.removeEventListener(n,r,o)}}}function o(t,e,n,o,s){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,s)}))}function s(t,e,n,i){return function(n){n.delegateTarget=r(n.target,e),n.delegateTarget&&i.call(t,n)}}var r=n(4);t.exports=o},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var n=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t){function e(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var n=t.hasAttribute("readonly");n||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),n||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var i=window.getSelection(),o=document.createRange();o.selectNodeContents(t),i.removeAllRanges(),i.addRange(o),e=i.toString()}return e}t.exports=e}])}),Geni.Views=Geni.Views||{},Geni.Views.DnaGeneral=Backbone.View.extend({initialize:function(){jQuery(".dna-unit .content p").ellipsis()}}),GeniLoader.ready(function(){new Geni.Views.DnaGeneral}),GeniLoader.ready(function(){Geni.Dna=Geni.Dna||{},Geni.Dna.DnaFAQ=new DnaFAQ}),GeniLoader.ready(function(){Geni.Dna=Geni.Dna||{},Geni.Dna.DnaCheckout=new DnaCheckout}),Geni.Views=Geni.Views||{},Geni.Views.LoginLightbox=Backbone.View.extend({events:{"click .tab.login":"showLogin","click .tab.join":"showJoin","click a.show-login":"showLogin","click a.show-join":"showJoin","click .close":"close","click a.login":"ajaxLogin","click a.join":"ajaxJoin","keydown .content.join input":"handleEnterJoin","keydown .content.login input":"handleEnterlogin"},initialize:function(t,e,n,i,o){this.nextURL=t||window.location.origin,this.login=e||!1,null==n&&(n=!0),this.skipTree=n,this.afterLogin=i||"",this.afterJoin=o||""},relogin:function(t){this.reloginOpts=t},render:function(){this.removeOthers();var t=getGeniTemplate("lightbox.login",{nextURL:this.nextURL,skipTree:this.skipTree,afterLogin:this.afterLogin,afterJoin:this.afterJoin});return this.$el.html(t).hide(),jQuery("body").append(this.$el),this.$el.fadeIn(100),this.$el.find(".login-lightbox").fadeIn(750),this.getElements(),this.login&&this.showLogin(),this.reloginOpts&&(this.$joinTab.hide(),this.$el.find(".join-prompt").hide(),this.$el.find("input[name=username]").val(this.reloginOpts.username),this.$el.find("input[name=redirect_to]").val("relogin"),this.reloginOpts.facebook&&"false"!=this.reloginOpts.facebook||this.$el.find(".extLogin.facebook").hide(),setTimeout(function(){Geni&&Geni.mfaLoginEnabled&&window.geniMFA&&window.geniMFA.showSecurityCode()},100),this.$el.find("input[name=password]").focus()),this},getElements:function(){this.$loginTab=this.$el.find(".tab.login"),this.$joinTab=this.$el.find(".tab.join"),this.$loginContent=this.$el.find(".content.login"),this.$joinContent=this.$el.find(".content.join"),this.$loginForm=this.$el.find(".content.login form"),this.$joinForm=this.$el.find(".content.join form"),this.$spinner=this.$el.find(".spinner"),this.spinner=Spinners.create(this.$spinner)},showLogin:function(){this.$loginTab.addClass("active"),this.$joinTab.removeClass("active"),this.$loginContent.show(),this.$joinContent.hide()},showJoin:function(){this.$joinTab.addClass("active"),this.$loginTab.removeClass("active"),this.$joinContent.show(),this.$loginContent.hide()},ajaxLogin:function(t){this.toggleSpinner();var e=this;t&&t.preventDefault();var n=jQuery(t.target).parents("form"),i=""===n.find('input[name="username"]').val().trim(),o=""===n.find('input[name="password"]').val().trim();i||o?(alert(trl("Please enter a username and password.")),this.toggleSpinner()):this.reloginOpts?new Geni.JsonxRequest("/login/relogin",{method:"post",parameters:n.serialize(),onSuccess:function(){e.close(),jQuery("#static_notice.relogin").fadeOut()},onFailure:function(t){var n=t.responseJSON;e.toggleSpinner(),e.showError(n.error),n.captcha&&e.showCaptcha(n.captcha)}}):n.submit()},ajaxJoin:function(t){this.toggleSpinner();t&&t.preventDefault();var e=jQuery(t.target).parents("form"),n=e.find('input[name="fname"]').val().trim(),i=e.find('input[name="lname"]').val().trim(),o=e.find('input[name="email"]').val().trim(),s=e.find('select[name="birth_year"]').val().trim(),r=""===n?"Please enter a first name":""===i?"Please enter a last name":""===o?"Please enter an email":isValidEmail(n)?"First name cannot be an email address":isValidEmail(i)?"Last name cannot be an email address":isValidEmail(o)?""===s?"Please select a birth year":null:"Please enter a valid email";r?(alert(trl(r)),this.toggleSpinner()):e.submit()},handleEnterJoin:function(t){13===t.which&&this.ajaxJoin(t)},handleEnterlogin:function(t){13===t.which&&this.ajaxLogin(t)},removeOthers:function(){jQuery(".login-lightbox-wrap").remove()},toggleSpinner:function(){this.$spinner.toggle(),this.spinner.toggle()},showError:function(t){jQuery(".login-lightbox .content:visible .error-message").html(t).fadeIn()},hideError:function(){jQuery(".login-lightbox .content .error-message").fadeOut()},showCaptcha:function(t){jQuery(".login-lightbox .content:visible .captcha").html(t).fadeIn()},close:function(t){t&&t.preventDefault(),this.remove()}}),GeniLoader.ready(function(){jQuery("[data-require-login=1]").on("click",function(t){if(Geni.User&&-1==Geni.User.id){t.preventDefault();var e=jQuery(this).attr("href"),n=1==jQuery(this).attr("data-show-login"),i=1==jQuery(this).attr("data-skip-create"),o=jQuery(this).attr("data-after-login-params")||"",s=jQuery(this).attr("data-after-join-params")||"";new Geni.Views.LoginLightbox(e,n,i,o,s).render()}else if(jQuery(this).attr("data-relogin").length>0){e=jQuery(this).attr("href");var r=new Geni.Views.LoginLightbox(e,!0,!0);r.relogin({username:jQuery(this).attr("data-relogin"),facebook:jQuery(this).attr("data-facebook")}),r.render()}})}),Geni.Views=Geni.Views||{},Geni.Views.AnnouncementLightbox=Backbone.View.extend({events:{"click .dismiss":"close","click .accept":"accept"},initialize:function(){this.options.interstitialID?(this.type="interstitial",this.requestURL="/interstitial/lightbox/"+this.options.interstitialID,this.options.adminPreview&&(this.requestURL=this.requestURL+"?admin_preview=1"),this.requestData={}):(this.type="announcement",this.requestURL="/interstitial/lightbox_announcement",this.requestData={template_file:this.options.file,name:this.options.name})},render:function(){var t=null,e=!1;if(jQuery.ajax({url:this.requestURL,async:!1,data:this.requestData,success:function(n){(t=n.html).blank()&&(e=!0)},error:function(){e=!0}}),!e){this.$overlay=jQuery("<div/>",{}).addClass("announcement-overlay"),this.$el.html(t).addClass("announcement-lightbox-fader"),$body=jQuery("body"),$body.append(this.$el);var n=this;return Modernizr.csstransforms?setTimeout(function(){$body.append(n.$overlay),n.$el.addClass("shown")},1e3):($body.append(n.$overlay),n.$el.show(),n.$el.css({opacity:1})),this}},accept:function(t){t.preventDefault();var e=(jQuery(t.target).hasClass("accept")?jQuery(t.target):jQuery(t.target).parents("a.accept")).attr("href");e=e||"no_destination",jQuery.get("/interstitial/accept",{accept_destination:e}).done(function(){window.location=e})},close:function(t){t.preventDefault(),this.$overlay.remove(),this.remove(),"interstitial"==this.type&&jQuery.get("/interstitial/decline")}}),GeniLoader.ready(function(){G.Announcements&&G.Announcements.interstitialID&&new Geni.Views.AnnouncementLightbox({interstitialID:G.Announcements.interstitialID}).render(),G.Announcements&&G.Announcements.announcementName&&G.Announcements.announcementFile&&new Geni.Views.AnnouncementLightbox({name:G.Announcements.announcementName,file:G.Announcements.announcementFile}).render()}),Geni.Views=Geni.Views||{},Geni.Views.HomeMatchesModule=Backbone.View.extend({el:".module.matches-module",events:{"click .all-matches":"expand","click .close":"close"},initialize:function(){this.expanded=!1},expand:function(t){var e=jQuery(t.target),n=e.parents("li");if(!n.hasClass("expanded")){this.hideOthers(),n.addClass("expanded"),n.find(".content").hide();var i=e.hasClass("all-matches")?e:e.parents(".all-matches");i.addClass("full");var o=this;setTimeout(function(){i.find(".match-buttons").trigger("resetValueBars").fadeIn(200).trigger("updateValueBars",[10,!0]),o.centerMatchButtons(i)},350)}},hideOthers:function(){var t=this.$el.find("li.match-module-row.expanded"),e=this;jQuery.each(t,function(t,n){e.closeRow(jQuery(n))})},close:function(t){t&&t.stopPropagation();var e=jQuery(t.target).parents("li.match-module-row");e.find(".all-matches").removeClass("full"),this.closeRow(e)},closeRow:function(t){t.find(".match-buttons").hide(),t.removeClass("expanded"),setTimeout(function(){t.find(".content").fadeIn(50)},400)},centerMatchButtons:function(t){var e=t.find(".match-buttons"),n=t.find(".matches-counter"),i=t.find(".close"),o=t.outerWidth(),s=e.outerWidth(),r=(o-(n.outerWidth()+i.outerWidth())-s)/4;r>5&&e.css({marginLeft:r})}}),GeniLoader.ready(function(){(new Geni.Views.HomeMatchesModule).render()}),Geni.Views=Geni.Views||{},Geni.Views.ProfileMatchesCarousel=Backbone.View.extend({el:".profile-matches-carousel-module",events:{"click .flap.right":"advance","click .flap.left":"decrease"},initialize:function(){if(this.id=this.$el.attr("data-profile-id"),this.$el.data("view",this),0!=this.$el.length){var t=jQuery(window).width();if(t<950){var e=t/10*2;jQuery(".public .match-items-wrap").css("width",t-e-55+"px"),jQuery(".expandable .match-items-wrap").css("width",t-e-100+"px")}this.hermesCMSubscription=this.$el.attr("data-hermes-confirmed-match-subscription"),this.publicModule=this.$el.hasClass("public"),this.expandableModule=this.$el.hasClass("expandable"),this.totalMatchCount=this.$el.attr("data-match-count"),this.mhURL=this.$el.attr("data-mh-url"),this.$matchItemsInner=this.$el.find(".match-items-inner"),this.$matchItems=this.$el.find(".match-item"),this.$pagination=this.$el.find(".pagination"),this.$imgs=this.$el.find(".match-item img"),this.$flap=this.$el.find(".flap"),this.itemCount=this.$matchItems.length,this.itemWidth=this.$matchItems.outerWidth(),this.containerWidth=jQuery(".match-items-wrap").innerWidth(),this.perPage=Math.floor(this.containerWidth/this.itemWidth)||5,this.pageIndex=1,this.totalPageCount=Math.ceil(this.totalMatchCount/this.perPage),this.pageWidth=this.itemWidth*this.perPage,this.currentMarginLeft=0,this.expandableModule&&(this.pagesFetched=Math.ceil(this.itemCount/this.perPage)),this.subscribe(),this.bindURLs(),this.paginate(),this.normalizeMatchItemHeights(),this.handleFlaps(),Geni.Tipped.hideAll(),Geni.J.TippedTip.makeTippedTip(),this.$el.find(".overlay").fadeOut(200)}},subscribe:function(){var t=this;Geni.Hermes&&Geni.Hermes.subscribe(this.hermesCMSubscription,!0,function(e){G.Debug&&console.log("[HERMES] Received data for "+t.hermesCMSubscription,e),t.reloadCarousel(),t.reloadSources()})},bindURLs:function(){this.$matchItems.on("click",function(){var t=jQuery(this).attr("data-url");Geni.Tipped.hideAll(),window.open(t,"_blank")})},handleFlaps:function(){this.totalMatchCount>this.perPage&&this.$flap.removeClass("hidden").filter(".right").addClass("more")},expandCarouselWrapWidth:function(){this.$matchItemsInner.css({width:this.itemWidth*this.itemCount+10})},normalizeMatchItemHeights:function(){var t=0;jQuery.each(this.$matchItems,function(e,n){var i=jQuery(n).outerHeight();t=i>t?i:t}),this.$matchItems.css({height:t}),this.$flap.find("span").css({lineHeight:t+"px"})},advance:function(){if(this.pageIndex!==this.totalPageCount){this.pageIndex++,this.fetched(this.pageIndex)||this.requestMatches(this.pageIndex);var t=this.remaining();this.pageIndex===this.totalPageCount?(this.$flap.filter(".right").removeClass("more").addClass("disabled"),this.totalPageCount>1&&(this.$flap.filter(".left").addClass("more"),this.currentMarginLeft-=this.itemWidth*(this.perPage-t))):(this.$flap.addClass("more"),this.currentMarginLeft=(1-this.pageIndex)*this.pageWidth,t=!1),this.$matchItemsInner.css({marginLeft:this.currentMarginLeft}),this.paginate(t)}},decrease:function(){if(1!==this.pageIndex){this.pageIndex--;var t=this.remaining();this.pageIndex===this.totalPageCount-1&&t<this.perPage?(this.$flap.filter(".right").addClass("more"),this.currentMarginLeft+=this.itemWidth*Math.abs(t)):(this.$flap.addClass("more"),this.currentMarginLeft+=this.pageWidth),1===this.pageIndex&&this.$flap.filter(".left").removeClass("more"),this.$matchItemsInner.css({marginLeft:this.currentMarginLeft}),this.paginate()}},paginate:function(t){var e=(n=t?this.totalMatchCount:this.pageIndex*this.perPage)-(this.perPage-1),n=n>this.totalMatchCount?this.totalMatchCount:n,i="";this.publicModule?this.totalMatchCount&&0!==this.totalMatchCount&&(i=tr("view all matches \u203a"),i=jQuery("<a/>",{href:this.mhURL,html:i,target:"_blank"}).wrap("<div>").parent().html()):i=this.totalMatchCount<=this.perPage?tr("{total||confirmed match}","Total amount of confirmed matches",{total:this.totalMatchCount}):1==this.perPage?tr("{start} of {total}",null,{start:e,end:n,total:this.totalMatchCount}):tr("{start}-{end} of {total}",null,{start:e,end:n,total:this.totalMatchCount}),this.$pagination.html(i)},fetched:function(t){return!this.expandableModule||this.pagesFetched>=t},remaining:function(){return this.perPage*this.pageIndex-this.totalMatchCount},requestMatches:function(){var t=this,e="/profile/load_more_matches",n=this.$el.find(".overlay");n.fadeIn(200),jQuery.ajax({url:e,data:{id:Geni.PageProfile.id,page:this.pageIndex,t:(new Date).getTime()},success:function(e){e.hasOwnProperty("empty")?t.ajaxSuccessWithoutItems():e.html&&t.ajaxSuccessWithItems(e.html),n.fadeOut(200),bindSourceAssistantLinks()}})},ajaxSuccessWithoutItems:function(){this.totalMatchCount,this.itemCount,this.decrease()},ajaxSuccessWithItems:function(t){var e=jQuery(t);this.$matchItemsInner.append(e),this.$matchItems=this.$el.find(".match-item"),this.$imgs=this.$el.find(".match-item img"),this.itemCount=this.$matchItems.length,this.itemWidth=this.$matchItems.outerWidth(),this.pageWidth=this.itemWidth*this.perPage,this.pagesFetched++,Geni.Tipped.hideAll(),Geni.J.TippedTip.makeTippedTip(),this.bindURLs(),this.normalizeMatchItemHeights(),this.expandCarouselWrapWidth(),this.handleFlaps()},reloadCarousel:function(){0!=this.$el.length?this.requestConfirmedMatchesCount():G.debug&&console.log("Carousel undefined")},requestConfirmedMatchesCount:function(){var t=this,e="/profile/confirmed_matches_count";jQuery.ajax({url:e,data:{id:Geni.PageProfile.id,t:(new Date).getTime()},success:function(e){t.reloadMatches(e.confirmed_count)}})},reloadMatches:function(t){(this.totalMatchCount=t,isNaN(this.totalMatchCount))?G.debug&&console.log("No new count"):(this.itemCount=0,this.itemWidth=this.$matchItems.outerWidth(),this.pagesFetched=0,this.pageIndex=0,this.totalPageCount=Math.ceil(this.totalMatchCount/this.perPage),this.pageWidth=this.itemWidth*this.perPage,this.currentMarginLeft=0,this.$matchItemsInner.html(""),0!=this.totalMatchCount?(this.advance(),this.$el.show(),this.$el.find(".overlay").fadeOut(200),this.$el.find(".overlay").fadeIn(200),this.showLoader()):this.$el.hide())},reloadSources:function(){var t=jQuery("#source_tab_content");t.length>0&&t.load("/sources/source_tab/"+Geni.PageProfile.id+"?focus=sources",function(){var t=jQuery("[data-source-row]").length;t>0?jQuery(".source-count").text("("+t+")").show():jQuery(".source-count").hide()})},showLoader:function(){Spinners.create(this.$el.find(".spinner"),{radius:24,height:25,width:4.9,dashes:13,opacity:1,padding:3,rotation:550,color:"#333"}).play().center()}}),GeniLoader.ready(function(){(new Geni.Views.ProfileMatchesCarousel).render()}),
/*!
 * Spinners 3.0.0
 * (c) 2010-2012 Nick Stakenburg - http://www.nickstakenburg.com
 *
 * Spinners is freely distributable under the terms of an MIT-style license.
 *
 * GitHub: http://github.com/staaky/spinners
 */
GeniLoader.ready(function(){window.Spinners={version:"3.0.0"},function(t){function e(t){return t*Math.PI/180}function n(t){this.element=t}function i(e,n){e&&(this.element=e,a.remove(e),a.removeDetached(),this._position=0,this._state="stopped",this.setOptions(t.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,rotation:700},n||{})),this.drawPosition(0),a.add(this))}var o={scroll:function(t,e){if(!e)return t;var n=t.slice(0,e);return t.slice(e,t.length).concat(n)},isElement:function(t){return t&&1==t.nodeType},element:{isAttached:function(t){for(;t&&t.parentNode;)t=t.parentNode;return!!t&&!!t.body}}},s={drawRoundedRectangle:function(n,i){var o=(l=t.extend({top:0,left:0,width:0,height:0,radius:0},i||{})).left,s=l.top,r=l.width,a=l.height,l=l.radius;n.beginPath(),n.moveTo(o+l,s),n.arc(o+r-l,s+l,l,e(-90),e(0),!1),n.arc(o+r-l,s+a-l,l,e(0),e(90),!1),n.arc(o+l,s+a-l,l,e(90),e(180),!1),n.arc(o+l,s+l,l,e(-180),e(-90),!1),n.closePath(),n.fill()}},r=function(){function t(t){var n=[];if(0==t.indexOf("#")&&(t=t.substring(1)),""!=(t=t.toLowerCase()).replace(e,""))return null;for(3==t.length?(n[0]=t.charAt(0)+t.charAt(0),n[1]=t.charAt(1)+t.charAt(1),n[2]=t.charAt(2)+t.charAt(2)):(n[0]=t.substring(0,2),n[1]=t.substring(2,4),n[2]=t.substring(4)),t=0;t<n.length;t++)n[t]=parseInt(n[t],16);return n.red=n[0],n.green=n[1],n.blue=n[2],n}var e=RegExp("[0123456789abcdef]","g"),n=function(){function t(t,e,n){return t=t.toString(n||10),Array(e-t.length).join("0")+t}return function(e,n,i){return"#"+t(e,2,16)+t(n,2,16)+t(i,2,16)}}();return{hex2rgb:t,hex2fill:function(e,n){void 0===n&&(n=1);var i=n,o=t(e);return o[3]=i,o.opacity=i,"rgba("+o.join()+")"},rgb2hex:n}}();t.extend(Spinners,{enabled:!1,support:{canvas:function(){var e=t("<canvas>")[0];return!!e.getContext&&!!e.getContext("2d")}()},init:function(){(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera"))&&(window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0)},create:function(t,e){return n.create(t,e),this.get(t)},get:function(t){return new n(t)},play:function(t){return this.get(t).play(),this},pause:function(t){return this.get(t).pause(),this},toggle:function(t){return this.get(t).toggle(),this},stop:function(t){return this.get(t).stop(),this},remove:function(t){return this.get(t).remove(),this},removeDetached:function(){return a.removeDetached(),this},center:function(t){return this.get(t).center(),this},setOptions:function(t,e){return this.get(t).setOptions(e),this},getDimensions:function(t){return{width:t=2*a.get(t)[0].getLayout().workspace.radius,height:t}}});var a={spinners:[],get:function(e){if(e){var n=[];return t.each(this.spinners,function(i,s){s&&(o.isElement(e)?s.element==e:t(s.element).is(e))&&n.push(s)}),n}},add:function(t){this.spinners.push(t)},remove:function(e){t(t.map(this.spinners,function(n){if(o.isElement(e)?n.element==e:t(n.element).is(e))return n.element})).each(t.proxy(function(t,e){this.removeByElement(e)},this))},removeByElement:function(e){var n=this.get(e)[0];n&&(n.remove(),this.spinners=t.grep(this.spinners,function(t){return t.element!=e}))},removeDetached:function(){t.each(this.spinners,t.proxy(function(t,e){e&&e.element&&!o.element.isAttached(e.element)&&this.remove(e.element)},this))}};t.extend(n,{create:function(e,n){if(e){var s=n||{},r=[];return o.isElement(e)?r.push(new i(e,s)):t(e).each(function(t,e){r.push(new i(e,s))}),r}}}),t.extend(n.prototype,{items:function(){return a.get(this.element)},play:function(){return t.each(this.items(),function(t,e){e.play()}),this},stop:function(){return t.each(this.items(),function(t,e){e.stop()}),this},pause:function(){return t.each(this.items(),function(t,e){e.pause()}),this},toggle:function(){return t.each(this.items(),function(t,e){e.toggle()}),this},center:function(){return t.each(this.items(),function(t,e){e.center()}),this},setOptions:function(e){return t.each(this.items(),function(t,n){n.setOptions(e)}),this},remove:function(){return a.remove(this.element),this}}),t.extend(i.prototype,{setOptions:function(e){this.options=t.extend({},this.options,e||{}),this.options.radii&&(e=this.options.radii,this.options.radius=Math.min(e[0],e[1]),this.options.height=Math.max(e[0],e[1])-this.options.radius),this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1e3*this.options.speed);e=this._state;var n=this._position;switch(this._layout=null,this.build(),n&&n>=this.options.dashes-1&&(this._position=this.options.dashes-1),e){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center()},remove:function(){this.canvas&&(this.pause(),t(this.canvas).remove(),this.ctx=this.canvas=null)},build:function(){this.remove();var e=this.getLayout().workspace.radius;return t(document.body).append(this.canvas=t("<canvas>").attr({width:2*e,height:2*e}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,t(this.element).append(this.canvas),this.ctx.translate(e,e),this},drawPosition:function(t){var n=this.getLayout().workspace,i=(t=o.scroll(n.opacities,-1*t),n.radius),s=e(360/(n=this.options.dashes));for(this.ctx.clearRect(-1*i,-1*i,2*i,2*i),i=0;i<n;i++)this.drawDash(t[i],this.options.color),this.ctx.rotate(s)},drawDash:function(t,e){this.ctx.fillStyle=r.hex2fill(e,t);var n=(o=this.getLayout()).workspace.radius,i=o.dash.position,o=o.dash.dimensions;s.drawRoundedRectangle(this.ctx,{top:i.top-n,left:i.left-n,width:o.width,height:o.height,radius:Math.min(o.height,o.width)/2})},_nextPosition:function(){var e=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(t.proxy(this._nextPosition,this),e)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var e=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(t.proxy(this._nextPosition,this),e),this}},pause:function(){if("paused"!=this._state)return this._pause(),this._state="paused",this},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){if("stopped"!=this._state)return this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout)return this._layout;for(var t=(s=this.options).dashes,e=s.width,n=s.radius,i=s.radius+s.height,o=Math.max(e,i),s=(o=Math.ceil(Math.max(o,Math.sqrt(i*i+e/2*(e/2)))),o+=s.padding),r=1/t,a=[],l=0;l<t;l++)a.push((l+1)*r);return this._layout={workspace:{radius:s,opacities:a},dash:{position:{top:o-i,left:o-e/2},dimensions:{width:e,height:i-n}}}},center:function(){var e=2*this.getLayout().workspace.radius;t(this.element.parentNode).css({position:"relative"}),t(this.element).css({position:"absolute",height:e+"px",width:e+"px",top:"50%",left:"50%",marginLeft:-.5*e+"px",marginTop:-.5*e+"px"}),this._centered=!0}}),Spinners.init(),Spinners.enabled||(n.create=function(){return[]})}(jQuery)}),Geni.Views=Geni.Views||{},Geni.Views.MatchButtons=Backbone.View.extend({events:{"click a.match-button":"handleButtonClick",resetValueBars:"resetValueBars",updateValueBars:"updateValueBars"},types:["tree","smart","record"],initialize:function(){this.$window=jQuery(window),this.matchCountTimeout=1e4,this.$missing=this.$el.find(".missing-count"),this.counterID=this.$el.attr("data-match-counter-id"),this.hermesSubscription=this.$el.attr("data-hermes-subscription"),this.hermesOnChange=this.$el.attr("data-hermes-on-change"),this.$counter=jQuery("[data-match-counter="+this.counterID+"]"),this.$buttons={tree_match:this.$el.find(".tree-match"),record_match:this.$el.find(".record-match"),smart_match:this.$el.find(".smart-match")},this.cachedCounts={},this.$rmValueBar=this.$buttons.record_match.find(".value-wrap .bar"),this.$smValueBar=this.$buttons.smart_match.find(".value-wrap .bar"),this.rmValueScore=this.$buttons.record_match.data("value"),this.smValueScore=this.$buttons.smart_match.data("value"),this.rmValueSumary=this.$buttons.record_match.data("value-summary"),this.smValueSumary=this.$buttons.smart_match.data("value-summary"),this.$valueSummary=this.$el.find(".value-summary"),this.spinnerOpts={radius:3,height:3,width:1.8,dashes:9,opacity:1,padding:0,rotation:400,color:"#fff"},this.loading=!1,"false"==this.total?(this.total=0,this.spinTotal()):(this.total=parseInt(this.total),this.spinTotal()),this.subscribe(),this.handleZeroCase(),this.spinMissing(),this.nullifyLongRunningSpinners(),this.makeTipped();var t=this;setTimeout(function(){t.updateValueBars()},1e3)},subscribe:function(){var t=this;Geni.Hermes.subscribe(this.hermesSubscription,!0,function(e){G.Debug&&console.log("[HERMES] Received data for "+t.hermesSubscription,e),_.each(t.types,function(n){var i=n+"_match",o=parseInt(e.data[i]);if(!_.isNaN(o)){var s=t.$buttons[i];if(t.updateButtonCount(s,o),t.hermesOnChange&&t.hermesOnChange.length>0){var r=window[t.hermesOnChange];"function"==typeof r&&r(o)}}}),t.updateValueBars(e.data),t.updateValueSummaries(e.data),e.data.refresh&&(t.prepForSpinners(),t.spinTotal(),t.spinMissing(),t.nullifyLongRunningSpinners(),t.updateTotal())})},handleButtonClick:function(t){var e=jQuery(t.target).closest(".match-button"),n=e.hasClass("no-match"),i=e.hasClass("tree-match");(e.find(".missing-count").length>0||n&&!i)&&t.preventDefault(),setTimeout(function(){Tipped.hideAll()},2e3)},nullifyLongRunningSpinners:function(){var t=this;this.spinnerTimeout&&clearTimeout(this.spinnerTimeout),this.spinnerTimeout=setTimeout(function(){t.$el.find(".match-button").each(function(e,n){var i=jQuery(n);i.find(".missing-count").length>0&&t.updateButtonCount(i)}),t.handleZeroCase(),t.updateTotal(),t.updateValueBars()},this.matchCountTimeout)},updateButtonCount:function(t,e){t&&(e=void 0===e?t.attr("data-count"):e,t.attr("data-count",e),this.total+=e,e=e>99?"99+":e,this.updateTotal(),t.find(".number").hide().text(e).fadeIn(),t.find(".missing-count").remove(),this.handleZeroCase())},spinMissing:function(){var t=this.$el.find(".missing-count");Spinners.create(t,this.spinnerOpts).play(),t.length>0&&(this.loading=!0,this.resetValueBars())},prepForSpinners:function(){jQuery.each(this.$el.find(".number"),function(t,e){jQuery(e).html("<span class='missing-count'></span>")})},spinTotal:function(){var t=this,e=this.$counter.find(".missing-total");setTimeout(function(){e.empty(),Spinners.create(e,t.spinnerOpts).play()},1e3)},updateTotal:function(){var t=this.$el.find("[data-count]"),e=0;jQuery.each(t,function(t,n){e+=parseInt(jQuery(n).attr("data-count"))}),isNaN(e)||(e=e>99?"99+":e,this.$counter.find(".number").text(e),this.loading=!1)},handleZeroCase:function(){var t=this.$el.find("a[data-count]"),e=this.$el.find("a[data-count=0]");t.removeClass("no-match"),e.addClass("no-match")},makeTipped:function(){this.$el.find(".match-button");var t=this,e={skin:"light",hook:"bottommiddle",hideOthers:!0,spinner:{color:"#000",radius:5,height:5,width:1.8,dashes:12,opacity:1,padding:3,rotation:700},radius:{size:2},offset:{x:-4},showDelay:600,border:{size:1,color:"#333"}};_.each(this.types,function(n){var i=t.$el.find("."+n+"-match");Geni.Tipped.create(i,function(){var e=t.$el.find("."+n+"-match"),i=e.attr("data-count"),o=e.attr("data-value-summary");if(!e.hasClass("no-tip"))return getGeniTemplate("tip.match-button",{count:i,nocache:!0,valueSummary:o||null,type:n})},e)})},updateValueBars:function(t){var e=this;t=t||{},_.isNumber(t.rm_value_score)&&(this.rmValueScore=t.rm_value_score),_.isNumber(t.sm_value_score)&&(this.smValueScore=t.sm_value_score),this.isOnScreen()&&(e.$rmValueBar.animate({width:e.rmValueScore+"%"},500),e.$smValueBar.animate({width:e.smValueScore+"%"},500),e.rmValueScore>90?e.$rmValueBar.addClass("full"):e.$rmValueBar.removeClass("full"),e.smValueScore>90?e.$smValueBar.addClass("full"):e.$smValueBar.removeClass("full"))},resetValueBars:function(){this.$rmValueBar.css({width:0}),this.$smValueBar.css({width:0})},updateValueSummaries:function(t){this.rmValueSummary=t.rm_value_summary||this.rmValueSummary,this.smValueSummary=t.sm_value_summary||this.smValueSummary;var e=this.$buttons.record_match,n=this.$buttons.smart_match;e.attr("data-value-summary",this.rmValueSummary),n.attr("data-value-summary",this.smValueSummary),_.some(e)&&_.some(n)?t.value_summary&&this.$valueSummary.html(t.value_summary):_.some(e)?t.rm_value_summary&&this.$valueSummary.html(t.rm_value_summary):_.some(n)&&t.sm_value_summary&&this.$valueSummary.html(t.rm_value_summary)},isOnScreen:function(){var t=this.$window.scrollTop(),e=t+this.$window.height(),n=this.$el.offset().top;return n+this.$el.height()<=e&&n>=t}}),GeniLoader.ready(function(){Geni.MatchButtonViews=[],jQuery(".match-buttons").each(function(t,e){Geni.MatchButtonViews.push(new Geni.Views.MatchButtons({el:jQuery(e)}))})});var matchButtonAnimDelay=100,$window=jQuery(window),$document=jQuery(document);$document.ready(function(){$window.on("scroll resize",function(){matchButtonAnimTimeout&&clearTimeout(matchButtonAnimTimeout),matchButtonAnimTimeout=setTimeout(function(){_.each(Geni.MatchButtonViews,function(t){t.updateValueBars()})},matchButtonAnimDelay)})}),Geni.Views=Geni.Views||{},Geni.Views.Discussions=Backbone.View.extend({events:{"click .discussion-admin-button.open-close":"toggleOpenClose","click .discussion-admin-button.sticky":"toggleStickiness","click .discussion-admin-button.new-sticky":"toggleStickinessNew","click .discussion-admin-button.continue-discussion":"continueDiscussionModal","click [data-start-discussion]":"scrollToNewDiscussionForm","click [data-new-discussion-modal]":"showNewDiscussionModal","focus #discussion_search_form input":"showSearchIcon","blur #discussion_search_form input":"hideSearchIcon","click .discussion-search-wrap [data-genicon]":"search"},initialize:function(){this.$hiddenSticky=jQuery('[name="sticky"]'),this.$newDiscussionForm=jQuery("form#new_discussion"),new PeopleTagger.Inline("msg_body")},toggleStickiness:function(t){t.preventDefault();var e=jQuery(t.target),n=e.attr("data-id");confirm(["Are you sure you want to",e.text().toLowerCase(),"this discussion?"].join(" "))&&jQuery.ajax({url:"/admin/discussions_admin/toggle_sticky",data:{discussion_id:n},type:"POST",success:function(){window.location.reload()},error:function(){alert("There was an error doing something sticky.")}})},toggleStickinessNew:function(t){t.preventDefault(),t.stopPropagation();var e=jQuery(t.target),n=0===parseInt(this.$hiddenSticky.val())?1:0,i=1===n?"Unsticky":"Sticky";this.$hiddenSticky.val(n),e.toggleClass("off").text(i)},scrollToNewDiscussionForm:function(t){t.preventDefault();var e=this;this.$newDiscussionForm.find(".inner").addClass("highlighted").find("#new_discussion_topic").focus(),setTimeout(function(){e.$newDiscussionForm.find(".inner").removeClass("highlighted")},300),jQuery("body, html").animate({scrollTop:this.$newDiscussionForm.offset().top},500)},toggleOpenClose:function(t){t.preventDefault();var e=jQuery(t.target),n=e.attr("data-type"),i=e.attr("data-id");confirm(["Are you sure you want to",n,"this discussion?"].join(" "))&&jQuery.ajax({url:["/discussions/",n].join(""),data:{id:i},type:"POST",success:function(){window.location.reload()},error:function(){alert(["There was an error ",n,"ing this discussion."].join(""))}})},showNewDiscussionModal:function(t){t.preventDefault(),newDiscussionForm=new Panel({panelId:"new-discussion-lb",panelClass:"modal_lightbox",content:jQuery("#new_discussion_form_container").html(),style:"display:inline-block",displayOverlay:!0,onOpen:function(){unbindWikitextToolbarEvents(this.element),Geni.reinitializeCaptcha("#new-discussion-lb #captcha")}}).open()},continueDiscussionModal:function(t){t.preventDefault(),continueDiscussionForm=new Panel({panelId:"continue-discussion-lb",panelClass:"modal_lightbox continue-discussion",content:jQuery("#continue_discussion_form_container").html(),style:"display:inline-block",displayOverlay:!0,onOpen:function(){unbindWikitextToolbarEvents(this.element),Geni.reinitializeCaptcha("#continue-discussion-lb #captcha")}}).open()},showSearchIcon:function(t){jQuery(t.target).parents("form").next("[data-genicon]").addClass("shown")},hideSearchIcon:function(t){jQuery(t.target).parents("form").next("[data-genicon]").removeClass("shown")},search:function(t){""!==jQuery(t.target).prev("form").find("input").val()&&jQuery(t.target).prev("form").submit()}}),unbindWikitextToolbarEvents=function(t){jQuery(t).find(".wikitoolbar_container").removeClass("wikitoolbar_container")},GeniLoader.ready(function(){new Geni.Views.Discussions({el:jQuery("body.discussions")}),pinFirstMessage=function(t){new Geni.Request("/discussions/pin_first_message",{method:"POST",parameters:{id:t},onSuccess:function(){var e="<a class='small' draggable='false' href='#' id='pin_message' data-disc-unstick='"+t+"'>";e+=tr("Unpin","Unpin first message in discussion")+"</a>",jQuery("#pin_message").replaceWith(e),jQuery("#message_thread .first-message").addClass("pin-first-message")}})},unpinFirstMessage=function(t,e){new Geni.Request("/discussions/unpin_first_message",{method:"POST",parameters:{id:t},onSuccess:function(){var n="<a class='small' draggable='false' href='#' id='pin_message'  data-disc-stick='"+t+"'>";n+=tr("Pin","Pin first message in discussion")+"</a>",jQuery("#pin_message").replaceWith(n),jQuery("#message_thread .first-message").removeClass("pin-first-message"),parseInt(e)>2&&(console.log(e),jQuery("#message_thread .first-message").remove())}})};var t=document.querySelectorAll("a[data-disc-stick]");t.forEach(function(t){t.addEventListener("click",function(t){var e=t.target.getAttribute("data-disc-stick");return pinFirstMessage(e),!1})}),(t=document.querySelectorAll("a[data-disc-unstick]")).forEach(function(t){t.addEventListener("click",function(t){var e=t.target.getAttribute("data-disc-unstick");return unpinFirstMessage(e),!1})})});
</script>

</body>
</html>
