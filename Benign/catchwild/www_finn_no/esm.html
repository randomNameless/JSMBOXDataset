<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>esm.html</title>
</head>
<body>

<script>
const e=["boolean","number","string"];class t extends Error{constructor(e,t){if(super(e),this.name="SDKError","object"==typeof t)try{Object.assign(this,t)}catch(e){}}toString(){const t=`${this.name}: ${this.message}`,s=Object.keys(this).filter((t=>"name"!==t&&e.includes(typeof this[t]))).map((e=>`    ${e}: ${this[e]}`)).join("\n");return s?`${t}\n${s}`:t}}const s=["DEV","PRE_NO","PRE_SE","PRE_DK","PRE_FI","PRO_NO","PRO_DK","PRO_SE","PRO_FI"],i={SPiD:{LOCAL:"http://id.localhost",DEV:"https://login.dev.identity.schibstedmarketplaces.io/",PRE_SE:"https://login.se.pre.identity.schibstedmarketplaces.io",PRE_NO:"https://login.no.pre.identity.schibstedmarketplaces.io",PRE_FI:"https://login.fi.pre.identity.schibstedmarketplaces.io",PRE_DK:"https://login.dk.pre.identity.schibstedmarketplaces.io",PRO_SE:"https://login.schibstedmarketplaces.se",PRO_NO:"https://login.schibstedmarketplaces.no",PRO_FI:"https://login.schibstedmarketplaces.fi",PRO_DK:"https://login.schibstedmarketplaces.dk"},BFF:{LOCAL:"http://id.localhost/authn/",DEV:"https://login.dev.identity.schibstedmarketplaces.io/authn/",PRE_SE:"https://login.se.pre.identity.schibstedmarketplaces.io/authn/",PRE_NO:"https://login.no.pre.identity.schibstedmarketplaces.io/authn/",PRE_FI:"https://login.fi.pre.identity.schibstedmarketplaces.io/authn/",PRE_DK:"https://login.dk.pre.identity.schibstedmarketplaces.io/authn/",PRO_SE:"https://login.schibstedmarketplaces.se/authn/",PRO_NO:"https://login.schibstedmarketplaces.no/authn/",PRO_FI:"https://login.schibstedmarketplaces.fi/authn/",PRO_DK:"https://login.schibstedmarketplaces.dk/authn/"},SESSION_SERVICE:{LOCAL:"http://session.id.localhost",DEV:"https://session.login.dev.identity.schibstedmarketplaces.io",PRE_SE:"https://session.login.se.pre.identity.schibstedmarketplaces.io",PRE_NO:"https://session.login.no.pre.identity.schibstedmarketplaces.io",PRE_FI:"https://session.login.fi.pre.identity.schibstedmarketplaces.io",PRE_DK:"https://session.login.dk.pre.identity.schibstedmarketplaces.io",PRO_SE:"https://session.login.schibstedmarketplaces.se",PRO_NO:"https://session.login.schibstedmarketplaces.no",PRO_FI:"https://session.login.schibstedmarketplaces.fi",PRO_DK:"https://session.login.schibstedmarketplaces.dk"}},n={LOCAL:"id.localhost",DEV:"schibsted.com",PRE_SE:"schibsted.com",PRE_NO:"schibsted.com",PRE_FI:"schibsted.com",PRE_DK:"schibsted.com",PRO_SE:"schibsted.com",PRO_NO:"spid.no",PRO_FI:"schibsted.fi",PRO_DK:"schibsted.dk"};function r(e,s="Assertion failed"){if(!e)throw new t(s)}function o(e){return"string"==typeof e}function a(e){return"string"==typeof e&&e.length>0}function c(e){return"object"==typeof e&&null!==e}function h(e){return c(e)&&Object.keys(e).length>0}function l(e,...t){try{const s=new URL(e);return t.every((e=>s[e]))}catch(e){return!1}}function d(e){return"function"==typeof e}function u(e,t,s=!1){return!(!o(e)||!Array.isArray(t))&&(s?-1!==t.indexOf(e):t.some((t=>o(t)&&e.toUpperCase()===t.toUpperCase())))}function p(...e){const s={};if(!e||!e.length)throw new t("No objects to clone");return e.forEach((e=>{r(c(e)),h(e)&&Object.entries(e).forEach((([e,t])=>{void 0!==t&&(s[e]=c(t)?g(t):t)}))})),s}function g(e){return r("object"==typeof e,`obj should be an object (even null) but it is ${e}`),JSON.parse(JSON.stringify(e))||e}function f(e,t){return r(a(e),'"url" param must be a non empty string: '+typeof e),h(t)&&l(t[e])?t[e]:(r(l(e,"hostname"),`Bad URL given: '${e}'`),e)}function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var S,b={exports:{}};var _=m(function(){if(S)return b.exports;function e(){}return S=1,e.prototype={on:function(e,t,s){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:s}),this},once:function(e,t,s){var i=this;function n(){i.off(e,n),t.apply(s,arguments)}return n._=t,this.on(e,n,s)},emit:function(e){for(var t=[].slice.call(arguments,1),s=((this.e||(this.e={}))[e]||[]).slice(),i=0,n=s.length;i<n;i++)s[i].fn.apply(s[i].ctx,t);return this},off:function(e,t){var s=this.e||(this.e={}),i=s[e],n=[];if(i&&t)for(var r=0,o=i.length;r<o;r++)i[r].fn!==t&&i[r].fn._!==t&&n.push(i[r]);return n.length?s[e]=n:delete s[e],this}},b.exports=e,b.exports.TinyEmitter=e,b.exports}());class w{constructor(e){this.store=e,this.get=e=>this.store.getItem(e),this.set=(e,t)=>this.store.setItem(e,t),this.delete=e=>this.store.removeItem(e)}}class y{constructor(){this.store={},this.get=e=>this.store[e],this.set=(e,t)=>this.store[e]=t,this.delete=e=>delete this.store[e]}}const v=Math.pow(2,31)-1;class k{constructor(e){!function(e){if(!e)return!1;try{const t=e(),s="x-x-x-x".replace(/x/g,(()=>Math.random())),i="TEST-VALUE";t.setItem(s,i);const n=t.getItem(s);return t.removeItem(s),n===i}catch(e){return!1}}(e)?(this.cache=new y,this.type="ObjectLiteralStorage"):(this.cache=new w(e()),this.type="WebStorage")}get(e){try{let t=function(e){try{return JSON.parse(e)}catch(e){return null}}(this.cache.get(e));return t&&Number.isInteger(t.expiresOn)&&t.expiresOn>Date.now()?t.value:(this.delete(e),null)}catch(e){throw new t(e)}}set(e,s,i=0){if(!(i<=0)){i=Math.min(v,i);try{const t=Math.floor(Date.now()+i);this.cache.set(e,JSON.stringify({expiresOn:t,value:s})),setTimeout((()=>this.delete(e)),i)}catch(e){throw new t(e)}}}delete(e){try{this.cache.delete(e)}catch(e){throw new t(e)}}}const I={scrollbars:"yes",location:"yes",status:"no",menubar:"no",toolbar:"no",resizable:"yes"};function U(e,t,s="",i={}){r(c(e),`window was supposed to be an object but it is ${e}`),r(c(e.screen),"window should be a valid Window object but it lacks a 'screen' property"),r(d(e.open),"window should be a valid Window object but it lacks an 'open' function"),r(l(t),"Invalid URL for popup");const{height:n,width:o}=e.screen;let a=p(I,i);Number.isFinite(a.width)&&Number.isFinite(o)&&(a.left=(o-a.width)/2),Number.isFinite(a.height)&&Number.isFinite(n)&&(a.top=(n-a.height)/2);const h=(r(c(u=a),`Object must be an object but it is '${u}'`),Object.keys(u).map((e=>`${e}=${u[e]}`)).join(","));var u;return e.open(t,s,h)}const P=(e,...t)=>"function"==typeof e&&e((e=>e.map((e=>c(e)?JSON.stringify(e,null,2):e)).join(" "))(t));function E(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(e=>t[e]))}const C=()=>window.fetch&&window.fetch.bind(window);class O{constructor({serverUrl:e,envDic:t,fetch:s=C(),log:i,defaultParams:n={}}){r(c(n),"defaultParams should be a non-null object"),r(a(e),"serverUrl should be a non-empty string"),this.url=new URL(f(e,t)),this.defaultParams=n,i&&(r(d(i),`log must be a function but it is ${i}`),this.log=i),s&&(r(d(s),"Fetch should be a function"),this.fetch=s)}async go({method:e,headers:s,pathname:i,data:n={},useDefaultParams:h=!0,fetchOptions:l={method:e,credentials:"include"}}){r(d(this.fetch),"Can't make a call. The reference to fetch is missing or not a function."),r(a(e),`Method must be a non empty string but it is "${e}"`),r(a(i),`Pathname must be string but it is "${i}"`),r(c(n),"data must be a non-null object"),l.headers=c(s)?p(s):{};const u=this.makeUrl(i,n,h);P(this.log,"Request:",l.method.toUpperCase(),u),P(this.log,"Request Headers:",l.headers),P(this.log,"Request Body:",l.body);try{const e=await this.fetch(u,l);if(P(this.log,"Response Code:",e.status,e.statusText),!e.ok)throw new t(e.statusText,{code:e.status});const s=await e.json();return P(this.log,"Response Parsed:",s),s}catch(s){let i=o(s)?s:"Unknown RESTClient error";throw c(s)&&o(s.message)&&(i=s.message),new t(`Failed to '${e}' '${u}': '${i}'`,s)}}makeUrl(e="",t={},s=!0){const i=new URL(e,this.url);return i.search=O.search(t,s,this.defaultParams),i.href}get(e,t){return this.go({method:"get",pathname:e,data:t})}static search(e,t,s){const i=t?p(s,e):p(e);return Object.keys(i).filter((e=>""!==i[e])).map((e=>`${E(e)}=${E(i[e])}`)).join("&")}}const R="6.2.0",D="hasSession-cache",x="sessionCallBlocked-cache",$="tab-id-cache",j=Math.floor(1e5*Math.random()),N=()=>window;class T extends _{constructor({clientId:e,redirectUri:t,sessionDomain:i,env:n,log:o,window:h=N(),callbackBeforeRedirect:u=()=>{}}){var p,g;super(),r(a(e),"clientId parameter is required"),r(a(p=n)&&s.includes(p),"Env parameter is empty or is not a valid environment"),r(c(h),"The reference to window is missing"),r(!t||l(t),"redirectUri parameter is invalid"),r(i&&l(i),"sessionDomain parameter is not a valid URL"),null!==(g=h).SPiD&&"object"==typeof g.SPiD||(g.SPiD={}),null!==g.SPiD.Talk&&"object"==typeof g.SPiD.Talk||(g.SPiD.Talk={}),d(g.SPiD.Talk.response)||(g.SPiD.Talk.response=(e,t)=>g[e](t)),this._sessionInitiatedSent=!1,this.window=h,this.clientId=e,this.sessionStorageCache=new k((()=>this.window&&this.window.sessionStorage)),this.localStorageCache=new k((()=>this.window&&this.window.localStorage)),this.redirectUri=t,this.env=n,this.log=o,this.callbackBeforeRedirect=u,this._sessionDomain=i,this._enableSessionCaching=!0,this._session={},this._setSessionServiceUrl(i),this._setSpidServerUrl(n),this._setBffServerUrl(n),this._setOauthServerUrl(n),this._setGlobalSessionServiceUrl(n),this._unblockSessionCall()}_getTabId(){if(this._enableSessionCaching){const e=this.sessionStorageCache.get($);return e||(this.sessionStorageCache.set($,j,2592e6),j)}}_isSessionCallBlocked(){return this.localStorageCache.get(x)}_blockSessionCall(){this.localStorageCache.set(x,!0,3e5)}_unblockSessionCall(){this.localStorageCache.delete(x)}_setSpidServerUrl(e){r(o(e),`url parameter is invalid: ${e}`),this._spid=new O({serverUrl:f(e,i.SPiD),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setOauthServerUrl(e){r(o(e),`url parameter is invalid: ${e}`),this._oauthService=new O({serverUrl:f(e,i.SPiD),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setBffServerUrl(e){r(o(e),`url parameter is invalid: ${e}`),this._bffService=new O({serverUrl:f(e,i.BFF),log:this.log,defaultParams:{client_id:this.clientId,redirect_uri:this.redirectUri}})}_setSessionServiceUrl(e){r(o(e),`domain parameter is invalid: ${e}`);const t=`sdrn:${n[this.env]}:client:${this.clientId}`;this._sessionService=new O({serverUrl:e,log:this.log,defaultParams:{client_sdrn:t,redirect_uri:this.redirectUri,sdk_version:R}})}_setGlobalSessionServiceUrl(e){r(o(e),`url parameter is invalid: ${e}`);const t=`sdrn:${n[this.env]}:client:${this.clientId}`;this._globalSessionService=new O({serverUrl:f(e,i.SESSION_SERVICE),log:this.log,defaultParams:{client_sdrn:t,sdk_version:R}})}_emitSessionEvent(e,t){t.userId&&this.emit("login",t),e.userId&&!t.userId&&this.emit("logout",t),e.userId&&t.userId&&e.userId!==t.userId&&this.emit("userChange",t),e.userId||t.userId?this.emit("sessionChange",t):this.emit("notLoggedin",t),t.userId&&!this._sessionInitiatedSent&&(this._sessionInitiatedSent=!0,this.emit("sessionInit",t)),e.userStatus!==t.userStatus&&this.emit("statusChange",t)}_closePopup(){this.popup&&(this.popup.closed||this.popup.close(),this.popup=null)}enableVarnishCookie(e){let t,s=0;Number.isInteger(e)?s=e:"object"==typeof e&&(s=e.expiresIn||s,t=e.domain||t),r(Number.isInteger(s),"'expiresIn' must be an integer"),r(s>=0,"'expiresIn' cannot be negative"),this.setVarnishCookie=!0,this.varnishExpiresIn=s,this.varnishCookieDomain=t}_maybeSetVarnishCookie(e){if(!this.setVarnishCookie)return;const t=new Date;if(this.varnishExpiresIn||"number"==typeof e.expiresIn&&e.expiresIn>0){const s=this.varnishExpiresIn||e.expiresIn;t.setTime(t.getTime()+1e3*s)}else t.setTime(0);let s=this.varnishCookieDomain||("string"==typeof e.baseDomain?e.baseDomain:document.domain)||"";const i=[`SP_ID=${e.sp_id}`,`expires=${t.toUTCString()}`,"path=/",`domain=.${s}`].join("; ");document.cookie=i}_maybeClearVarnishCookie(){this.setVarnishCookie&&this._clearVarnishCookie()}_clearVarnishCookie(){const e=this._session&&"string"==typeof this._session.baseDomain?this._session.baseDomain:document.domain;let t=this.varnishCookieDomain||e||"";document.cookie=`SP_ID=nothing; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; domain=.${t}`}logSettings(){if(!this.log&&!window.console)throw new t("You have to provide log method in constructor");const e=this.log||console.log,s={clientId:this.clientId,redirectUri:this.redirectUri,env:this.env,sessionDomain:this._sessionDomain,sdkVersion:R};e(`Schibsted account SDK for browsers settings: \n${JSON.stringify(s,null,2)}`)}hasSession(){if(this._isSessionCallBlocked())return this._session;if(this._hasSessionInProgress)return this._hasSessionInProgress;const e=e=>{if(e.error)throw new t("HasSession failed",e.error);return this._maybeSetVarnishCookie(e),this._emitSessionEvent(this._session,e),this._session=e,e};return this._hasSessionInProgress=(async()=>{if(this._enableSessionCaching){let t=this.sessionStorageCache.get(D);if(t)return e(t)}let t=null;try{t=await this._sessionService.get("/v2/session",{tabId:this._getTabId()})}catch(e){if(e&&400===e.code&&this._enableSessionCaching){const t=1e3*(e.expiresIn||300);this.sessionStorageCache.set(D,{error:e},t)}throw e}if(t){if(((e={})=>{const t=Object.keys(e);return 1===t.length&&"redirectURL"===t[0]})(t))return this._blockSessionCall(),await this.callbackBeforeRedirect(),this._sessionService.makeUrl(t.redirectURL,{tabId:this._getTabId()});if(this._enableSessionCaching){const e=1e3*(t.expiresIn||300);this.sessionStorageCache.set(D,t,e)}}return e(t)})().then((e=>(this._hasSessionInProgress=!1,l(e)?this.window.location.href=e:e)),(e=>{throw this.emit("error",e),this._hasSessionInProgress=!1,new t("HasSession failed",e)})),this._hasSessionInProgress}async isLoggedIn(){try{return"result"in await this.hasSession()}catch(e){return!1}}clearCachedUserSession(){this.sessionStorageCache.delete(D)}async isConnected(){try{return!!(await this.hasSession()).result}catch(e){return!1}}async getUser(){const e=await this.hasSession();if(!e.result)throw new t("The user is not connected to this merchant");return g(e)}async getUserId(){const e=await this.hasSession();if(e.userId&&e.result)return e.userId;throw new t("The user is not connected to this merchant")}async getExternalId(e,s=""){const{pairId:i}=await this.hasSession();if(!i)throw new t("pairId missing in user session!");if(!e||0===e.length)throw new t("externalParty cannot be empty");return(async e=>{const t=(new TextEncoder).encode(e);return(s=t,crypto.subtle.digest("SHA-256",s)).then((e=>{return t=e,Array.from(new Uint8Array(t)).map((e=>e.toString(16).padStart(2,"0"))).join("");var t}));var s})(((e,t,s)=>s?`${e}:${t}:${s}`:`${e}:${t}`)(i,e,s))}async getUserSDRN(){const{sdrn:e}=await this.hasSession();if(e)return e;throw new t("Failed to get SDRN from user session")}async getUserUuid(){const e=await this.hasSession();if(e.uuid&&e.result)return e.uuid;throw new t("The user is not connected to this merchant")}async getUserContextData(){try{return await this._globalSessionService.get("/user-context")}catch(e){return null}}login({state:e,acrValues:t="",scope:s="openid",redirectUri:i=this.redirectUri,preferPopup:n=!1,loginHint:r="",tag:o="",teaser:a="",maxAge:c="",locale:h="",oneStepLogin:l=!1,prompt:d="select_account"}){this._closePopup(),this.sessionStorageCache.delete(D);const u=this.loginUrl({state:e,acrValues:t,scope:s,redirectUri:i,loginHint:r,tag:o,teaser:a,maxAge:c,locale:h,oneStepLogin:l,prompt:d});return n&&(this.popup=U(this.window,u,"Schibsted account",{width:360,height:570}),this.popup)?this.popup:(this.window.location.href=u,null)}async getSpId(){try{return(await this.hasSession()).sp_id||null}catch(e){return null}}logout(e=this.redirectUri){this.sessionStorageCache.delete(D),this._maybeClearVarnishCookie(),this.emit("logout"),this.window.location.href=this.logoutUrl(e)}loginUrl({state:e,acrValues:t="",scope:s="openid",redirectUri:i=this.redirectUri,loginHint:n="",tag:o="",teaser:c="",maxAge:h="",locale:d="",oneStepLogin:p=!1,prompt:g="select_account"}){"object"!=typeof arguments[0]&&(e=arguments[0],t=arguments[1],s=arguments[2]||s,i=arguments[3]||i,n=arguments[4]||n,o=arguments[5]||o,c=arguments[6]||c,h=isNaN(arguments[7])?h:arguments[7]);return r(!t||u(t,["","otp-email"],!0)||t.split(" ").every((e=>u(e,["password","otp","sms","eid-dk","eid-no","eid-se","eid-fi","eid"],!0))),`The acrValues parameter is not acceptable: ${t}`),r(l(i),`loginUrl(): redirectUri must be a valid url but is ${i}`),r(a(e),`the state parameter should be a non empty string but it is ${e}`),this._oauthService.makeUrl("oauth/authorize",{response_type:"code",redirect_uri:i,scope:s,state:e,acr_values:t,login_hint:n,tag:o,teaser:c,max_age:h,locale:d,one_step_login:p||"",prompt:t?"":g})}logoutUrl(e=this.redirectUri){r(l(e),"logoutUrl(): redirectUri is invalid");const t={redirect_uri:e};return this._sessionService.makeUrl("logout",t)}accountUrl(e=this.redirectUri){return this._spid.makeUrl("profile-pages",{response_type:"code",redirect_uri:e})}phonesUrl(e=this.redirectUri){return this._spid.makeUrl("profile-pages/about-you/phone",{response_type:"code",redirect_uri:e})}async showSimplifiedLoginWidget(e,s){const i=await this.getUserContextData(),n={client_id:this.clientId};s&&s.encoding&&(n.encoding=s.encoding);const r=this._bffService.makeUrl("simplified-login-widget",n,!1),o=async e=>("function"==typeof e.state&&(e.state=await e.state()),e);return new Promise(((n,a)=>{if(!i||!i.display_text||!i.identifier)return a(new t("Missing user data"));const c={displayText:i.display_text,env:this.env,clientName:i.client_name,clientId:this.clientId,providerId:i.provider_id,windowWidth:()=>window.innerWidth,windowOnResize:e=>{window.onresize=e}};s&&s.locale&&(c.locale=s.locale);const h=async()=>{this.login(Object.assign(await o(e),{loginHint:i.identifier}))},l=async()=>{this.login(Object.assign(await o(e),{loginHint:i.identifier,prompt:"login"}))},d=()=>{this.emit("simplifiedLoginOpened")},u=()=>{this.emit("simplifiedLoginCancelled")};if(window.openSimplifiedLoginWidget)return window.openSimplifiedLoginWidget(c,h,l,d,u),n(!0);const p=document.createElement("script");p.type="text/javascript",p.src=r,p.onload=()=>{window.openSimplifiedLoginWidget(c,h,l,d,u),n(!0)},p.onerror=()=>{a(new t("Error when loading simplified login widget content"))},document.getElementsByTagName("body")[0].appendChild(p)}))}}var L,F,A,V,B,H={};function K(){if(V)return A;V=1;return A=function(){if(F)return L;F=1;var e=/[+/=]/g,t=/[-_]/g,s=function(t){return t.replace(e,(function(e){return"="==e?"":"+"==e?"-":"/"==e?"_":void 0}))},i=function(e){return n(e.replace(t,(function(e){return"-"==e?"+":"_"==e?"/":void 0})))},n=function(e){var t=4-e.length%4;return 4!==t&&(e+="====".slice(0,t)),e};return L=function(e,t){var n={};return n.originalToUrl=s,n.urlToOriginal=i,n.encode=e,n.decode=t,n.encodeUrl=function(t,i){return s(e(t,i))},n.decodeUrl=function(e,s){return t(i(e),s)},n},L}()((function(e,t){var s="",i=[];if(/^utf-?(8|16)$/i.test(t)||!t)encodeURIComponent(e).replace(/%([0-9A-F]{2})|./g,(function(e,t){i.push(t?parseInt(t,16):e.charCodeAt(0))}));else if("hex"===t)e.replace(/[0-9A-F]{2}/gi,(function(e){i.push(parseInt(e,16))}));else{if("binary"!==t)throw new Error("Invalid inputEncoding supplied");i=e}return i.forEach((function(e){var t=("00"+e.toString(16)).slice(-2);s+=String.fromCharCode("0x"+t)})),btoa(s)}),(function(e,t){var s=Array.prototype.map.call(atob(e),(function(e){return e.charCodeAt(0)}));if("binary"===t)return s;if("hex"===t)return s.map((function(e){return("00"+e.toString(16)).slice(-2)})).join("");if(/^utf-?(8|16)$/i.test(t)||!t)return decodeURIComponent(s.map((function(e){return"%"+("00"+e.toString(16)).slice(-2)})).join(""));throw new Error("Invalid outputEncoding supplied")})),A}var M=function(){if(B)return H;B=1;var e=H&&H.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H,"__esModule",{value:!0}),H.encode=function(e){return t.default.encode(JSON.stringify(e))},H.decode=function(e){return JSON.parse(t.default.decode(e))};const t=e(K());return H}();class J{constructor(e,t){this.trackEndpointUrl=e,this.hash=t}track(e){window.fetch(this.trackEndpointUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result:e})}).catch(console.error)}refreshFinnSession(){fetch(`/auth/refresh?hash=${this.hash}`,{credentials:"include"}).catch(console.error)}}class W{constructor(e,t){this.identity=e,this.clientActions=t}static isHasSessionFailureResponse(e){return void 0!==e.error}refreshSpidSession(){this.identity.hasSession().then((e=>{W.isHasSessionFailureResponse(e)?this.clientActions.track("FailureResponse"):this.clientActions.track("SuccessResponse")})).catch((e=>{"HasSession failed"!==e.message&&console.error(e),this.clientActions.track("ErrorResponse")}))}}window.addEventListener("load",(()=>{const e=document.getElementById("login-frontend-login-refresh-podlet");if(null==e?void 0:e.dataset.props){const t=M.decode(e.dataset.props||""),s=new J(t.trackEndpointUrl,t.hash);s.refreshFinnSession();new W(new T(t.identity),s).refreshSpidSession()}}));
//# sourceMappingURL=esm.js.map

</script>

</body>
</html>
