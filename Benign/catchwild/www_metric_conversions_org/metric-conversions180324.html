<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>metric-conversions180324.html</title>
</head>
<body>

<script>

  
var currentInput;        
var thisUrl= String (document.location);
var isIOS= 0;
var isAndroid= 0;
var isPhone= 0;
var tableView= 0;
	    
if( navigator.userAgent.match(/Android/i)
|| navigator.userAgent.match(/webOS/i)
|| navigator.userAgent.match(/iPhone/i)
|| navigator.userAgent.match(/iPod/i)
|| navigator.userAgent.match(/iPad/i)
|| navigator.userAgent.match(/BlackBerry/i)
){	    
	if (navigator.userAgent.match(/iPad/i)){
		isIOS= 1;
	} else {
		isPhone= 1;
		if (navigator.userAgent.match(/Android/i)){
			isAndroid= 1;
		} else if (navigator.userAgent.match(/iPhone/i)
		|| navigator.userAgent.match(/iPod/i)){
			isIOS= 1;
		}
	}
}	
	    
var historysize=20;
var cookiename="metrichistory"
//var historytitle={}; 
var converttext;
var tabletext;

var typenames={};
typenames[1]='temperature';
typenames[2]='length';
typenames[3]='area';
typenames[4]='volume'; 
typenames[5]='weight';
typenames[6]='speed';
typenames[7]='time';
typenames[12]='currency';
typenames[13]='angle';
typenames[14]='pressure';
typenames[15]='energy-and-power';
typenames[16]='health';

var appPromoCopy= ['Click here to download our phone App',
		   'Click here to download our phone App',
		   'Haga clic aquí para descargar nuestra aplicación de teléfono',
		   'Cliquez ici pour télécharger notre application téléphonique',
		   'Klicken Sie hier, um unsere Telefon-App herunterzuladen',
		   'Clique aqui para baixar nosso aplicativo de telefone',
		   'Clicca qui per scaricare la nostra app del telefono',
		   'Klik hier om onze telefoon-app te downloaden',
		   'Нажмите здесь, чтобы загрузить наш телефон.',
		   '點擊這裡下載我們的手機應用程序',
		   '点击这里下载我们的手机应用程序',
		   '私たちの電話アプリをダウンロードするにはここをクリック',
		   '우리 전화 앱을 다운로드하려면 여기를 클릭하십시오.',
		   'Klicka här för att ladda ner vår telefon App',
		   'Klikk her for å laste ned vår telefon App',
		   'Klik her for at downloade vores telefon App',
		   'Klikněte zde pro stažení aplikace pro telefon',
		   'Feu clic aquí per descarregar la nostra aplicació de telèfon',
		   'Κάντε κλικ εδώ για να κατεβάσετε την εφαρμογή του τηλεφώνου μας',
		   'Kliknij tutaj, aby pobrać naszą aplikację na telefon',
		   'Kliknite tukaj, če želite prenesti telefonsko aplikacijo',
		   'Kliknutím sem stiahnite aplikáciu pre mobil',
		   'Ide kattintva letöltheti telefonunkat App',
		   'Кликнете тук, за да изтеглите приложението на телефона си',
		   'Clique aqui para baixar nosso aplicativo de telefone',
		   'Lataa puhelimesi napsauttamalla tätä App',
		   'Кликните овде да преузмете апликацију за телефон',
		   'Spauskite čia, jei norite atsisiųsti mūsų telefono programą',
		   'हमारे फोन ऐप को डाउनलोड करने के लिए यहां क्लिक करें',
		   'Kliknite ovdje da biste preuzeli naš telefon App',
		   'Націсніце тут, каб загрузіць наш тэлефон App',
		   'Kliko këtu për të shkarkuar aplikacionin tonë të telefonit',
		   'Натисніть тут, щоб завантажити нашу програму телефону',
		   'Faceți clic aici pentru a descărca aplicația telefonului nostru',
		   'Meie telefoni rakenduse allalaadimiseks klõpsake siin',
		   'Klik di sini untuk memuat turun App telefon kami',
		   'Ikklikkja hawn biex tniżżel it-telefon tagħna App',
		   'Click here to download our phone App',
		   'Klik di sini untuk mengunduh Aplikasi telepon kami',
		   'Nhấp vào đây để tải xuống ứng dụng điện thoại của chúng tôi',
		   'Bizim telefon uygulamasını indirmek için buraya tıklayın',
		   'Klik hier om ons foon App af te laai',
		   'Kliknite ovde da preuzmete aplikaciju za telefon',
		   'Cliciwch yma i lawrlwytho ein App ffôn',
		   'আমাদের ফোন অ্যাপ্লিকেশন ডাউনলোড করতে এখানে ক্লিক করুন',
		   'మా ఫోన్ అప్లికేషన్ డౌన్లోడ్ ఇక్కడ క్లిక్ చేయండి',
		   'અમારા ફોન એપ્લિકેશન ડાઉનલોડ કરવા માટે અહીં ક્લિક કરો',
		   'Кликни тука за да ја преземете апликацијата на телефонот',
		   'დააწკაპუნეთ აქ ჩამოტვირთოთ ჩვენი ტელეფონი ოთახი',
		   'Սեղմեք այստեղ, մեր հեռախոսի հավելվածը ներբեռնելու համար',
		   'Telefonumuzu yükləmək üçün buraya vurun',
		   'คลิกที่นี่เพื่อดาวน์โหลด App โทรศัพท์ของเรา',
		   'Kliknite ovde da preuzmete aplikaciju za telefon',
		   'Телефон қолданбасын жүктеу үшін мына жерді басыңыз',
		   'Click here to download our phone App',
		   'எங்கள் தொலைபேசி பயன்பாட்டை பதிவிறக்க இங்கே கிளிக் செய்யவும்'];
    
///////////////// Functional code ////////////////////

  if (isPhone) {
    $('#softSearch li').each(function(){
	var anchor=$(this).find('h2').html();
	var href=$(this).find('.convert').attr('href');
	if (anchor!= null) {
	    $(this).append('<a class="mobileLink" href="'+href+'">'+anchor+'</a>');
	    $(this).find('h2').remove();
	}
    });
  }
    

  $('#convertForm').submit(function(e){
      $('.inputField').blur();
      return false;
  });

  if (isPhone) {
      var homeLink= $('#home').attr('href');
      $('header').append('<a href="'+homeLink+'" id="homeIcon" class="homeIcon"></a>');
  }
           
  $('.controlOptions').change(function(e){
      doConvert();
  });
	        	        
  $( document ).ready(function() {      
                 
      var historycount = countnumberofhtml5lsrecords();
      if (historycount>3) {
	historycount= 3;
      }
      if ((historycount)&&(!(window.location.pathname.match('tool')))){
	
	  propagatehistorytext(historycount);  
      }
      else{
	  $('#search').prepend("<section id=\"results\"><ol></ol></section>").css('display','block');		    
      }
      


//added Mike 14/02/24 to fix currency
     if (typeIndex==12) {
            var numAbbvs= currAbvs.length;
            var selectedCurr= 0;
            for (var i=0;i<numAbbvs;i++) {
              if (toField==currAbvs[i]) {
                $('#to').val(i);
              }
            }	  
            fromUnitRef= $('#from').val();
            fromAbbvs= [currAbvs[fromUnitRef]];
            toIndex= $('#to').val();
            toUnitRef= $('#to').val();
            toAbbvs= [currAbvs[toUnitRef]];
     }    

    
      
      if (isPhone) {
        var passedToIndex= thisUrl.indexOf('to=');
        if (passedToIndex>0) {
            var valPos = thisUrl.indexOf('val=');
            var passedVal= thisUrl.substring(valPos+4,passedToIndex-1);
            var toField= thisUrl.substring(passedToIndex+3,passedToIndex+6);
            
            $('#argumentConvMob').val(passedVal);
            $('#argumentConv1Mob').val(passedVal);
            
        } else {
            passedToIndex= thisUrl.indexOf('?val=');
            var passedVal= thisUrl.substring(passedToIndex+5);
            $('#argumentConvMob').val(passedVal);
            $('#argumentConv1Mob').val(passedVal);
        }
        
        if (typeIndex==12) {
            var numAbbvs= currAbvs.length;
            var selectedCurr= 0;
            for (var i=0;i<numAbbvs;i++) {
              if (toField==currAbvs[i]) {
                $('#to').val(i);
              }
            }	  
            fromUnitRef= $('#from').val();
            fromAbbvs= [currAbvs[fromUnitRef]];
            toIndex= $('#to').val();
            toUnitRef= $('#to').val();
            toAbbvs= [currAbvs[toUnitRef]];
        }
        if (passedToIndex>=0) {
            doConvert();
        }
        
    } else {
        var passedValIndex= thisUrl.indexOf('#metricConversionTable');
        if (passedValIndex>0) {
            tableView= 1;
        }
        $('.topLink').each(function(){
            $('#topMenu').append("<a class=\""+$(this).attr('id')+"\" title=\""+$(this).html()+"\" href=\""+$(this).attr('href')+"\"></a>");
        });
        if ($('#webmaster').hasClass('bluebg')) {
            $('#topMenu').append("<a class=\"webmaster\" title=\""+$('#webmaster').html()+"\" href=\""+$('#webmaster').attr('href')+"\"></a>");
        }
	
        if (typeof typeIndex=="undefined") {} else {
            var passedVal= "";
            var passedValIndex= thisUrl.indexOf('to=');
            if (passedValIndex>0) {
                var startOfVal = thisUrl.indexOf('val=')+4;
                var endOfVal = thisUrl.indexOf('&to=');
                
                var toField= thisUrl.substring(passedValIndex+3,passedValIndex+7);
                var numAbbvs= currAbvs.length;
                var selectedCurr= 0;
                for (var i=0;i<numAbbvs;i++) {
                    if (toField==currAbvs[i]) {
                        $('#to').val(i);
                    }
                }
               
               passedVal= thisUrl.substring(startOfVal,endOfVal);
            }
            else {
                passedValIndex= thisUrl.indexOf('?val=');
                passedVal= thisUrl.substring(passedValIndex+5);
            }
    
          
            $('#argumentConv').val(passedVal);
            $('#argumentConv1').val(passedVal);
    
            if (passedValIndex>=0) {
                if (typeIndex!=12){
                  doConvert();        
                }
                else{            
                    fromUnitRef= $('#from').val();
                    fromAbbvs= [currAbvs[fromUnitRef]];
                    toIndex= $('#to').val();
                    toUnitRef= $('#to').val();
                    toAbbvs= [currAbvs[toUnitRef]];
                    $('#currencyConversionTitle').html(fromAbbvs[0]+" &#8594; "+toAbbvs[0]);
                    
                    if (typeof(rawCurrency)=="undefined") {    
                        console.log("Pause to wait for asynch rates to load... Only needed when val passed in URL and rates not yet loaded");
                        setTimeout(function() {doConvert();},1250);
                    }
                    else{
                        doConvert();  
                    }
                }
            }
        }
    }
    

    $(".currToField").change(function(){		
      toIndex= $(this).val();
      toUnitRef= $(this).val();
      toAbbvs= [currAbvs[toUnitRef]];
      $('#currencyConversionTitle').html(fromAbbvs[0]+" &#8594; "+toAbbvs[0]);
    });
                        
        if (isPhone) {
 
	  $('.mobileField').off('click');
	  $('.mobileField').off('blur');
	  $('.mobileField').removeAttr('readonly');
	  $('.mobileField').last().on('blur',function(e){
	      doConvert();
	      //$('html, body').animate({scrollTop:-1}, 'fast');		    
	  });
		
	  $('.inputField').on('change',function(e){
	      doConvert();
	      $(this).blur();
	      //$('html, body').animate({scrollTop:-1}, 'fast');		    
	      //var searchPosition = $('#userConvert h1').offset().top-10;
	      //$('html, body').animate({scrollTop:searchPosition}, 'fast');		    
	  });
      } else {
	  $('.inputField').on('keyup',function(e){
	      doConvert();
	      //if ($('#answer').visible(true, false, 'vertical')==false) {
//		var objDiv = document.getElementById("answer");
//		$('html, body').animate({scrollTop:objDiv.scrollHeight+50}, 'fast');
	      //}
	  });
      }
      
      
      function layoutSkin() {
	  $('.underButton').css('max-width','').css('width','93.8%');
	  $('.left').css('max-width','970px');
      }

  });
  
  console.log('doc ready done');
		    
		    
////////////////////////////// More info //////////////////////////////////////	    
	    
            $('.infoLink').on('click',function(e){
		var fieldName= $(this).attr('id');
		if ($(this).hasClass('upArrow')) {
		    $('#'+fieldName+'Box').css('display','none');
		    $(this).removeClass('upArrow');    
		} else {
		    $('#'+fieldName+'Box').css('display','block');
		    $(this).addClass('upArrow');
		}
	    });	    

////////////////////////////// More conversions //////////////////////////////////////	    
	    
//            $('#moreConversionsLink').on('click',function(e){
//	      var moreFile= $(this).attr('name');
//	      $('#moreConversions').load(moreFile);
//	      $(this).css('display','none');
//	    });	    

        $('#moreConversionsLink').on('click',function(e){
            var moreFile= $(this).attr('name');
            var url = window.location.href;
            var langTagPattern = /\/([a-z]{2,}-?[a-z]{0,4})\//i;
            var match = url.match(langTagPattern);
            if (match) {
                var langTag = match[1];
                moreFile="/" + langTag + moreFile;
            }
        
            $('#moreConversions').load(moreFile);
            $(this).css('display','none');
        });         
	  
////////////////////////////// Conversion ///////////////////////////////////////////	    
	        
  var firstConvert= 0;		
		
  function doConvert() {
      var args= [];
      var question= "";
      var answer= "";
      var answerRaw= 0.0;
      var numSigFig=$('#sigfig').val();
      if (numSigFig==0) {
	  numSigFig= 7;
      }
      $('.inputField').each(function(){
        console.log('in 336, input field is '+$(this).val());
	  if ($(this).css('display')!='none') {
		  if ($(this).val()!= "") {
		      args.push($(this).val());
		  } else if (args.length==0) {
		      args.push(0);
		  }
	  }
      });
      $('.note').css('display','none');
		
        console.log('in do convert, args is '+args);
    if (typeIndex==12){
	  var epoch = parseInt((new Date).getTime()/1000);
	  val1 = args[0];
	  var array=rawCurrency.split(',');	
	  var createdTime=array[0];


    var fromFactor;
    var toFactor;
    var ethprocessed;
    if ((typeof (ethd)!='undefined')&&((fromUnitRef==161)||(toUnitRef==161))){
            ethprocessed=(1/ethd);
            console.log('create time '+createdTime+', ethepoch' +ethepoch);
            createdTime=Math.min(createdTime,ethepoch);
            console.log('create time now '+createdTime);
            if (fromUnitRef==161) {
                fromFactor=ethprocessed;
                toFactor=array[toUnitRef];
                console.log('in from, fromf is '+fromFactor+', to is '+toFactor);
            }
            else{
                fromFactor=array[fromUnitRef];
                toFactor=ethprocessed;                  
                console.log('in to, fromf is '+fromFactor+', to is '+toFactor);
            }
    }
    else{
      fromFactor=array[fromUnitRef];
      toFactor=array[toUnitRef];            
    }


    var currencyFactor= (toFactor*(1/fromFactor));
    var timeDifference=epoch-createdTime;
    var timeString;
    if (timeDifference<60){
        timeString="Less than 1 minute ago";
    }
    else if(timeDifference<3600){
        timeString=parseInt(timeDifference/60)+" minutes ago";
    }
    else if (timeDifference<7200){
        timeString="1 hour " + parseInt((timeDifference-3600)/60)+" minutes ago";
    }
    else{
        timeString="More than 2 hours ago";
    }
    var maxage=60;
    if ((fromIndex==161)||(toIndex=161)) {
        maxage=400;
    }
    if (timeDifference>=maxage){
        var url=window.location.href;
        var uptohtm=url.match(/.*htm/g); 
        timeString+=". Click here to refresh <a href='"+uptohtm+"?val="+args[0]+"'>"+fromAbbvs[0]+" to "+toAbbvs[0]+ " rate</a>";
    }    
    var currencySigFigs;
    if (toUnitRef==24){
        currencySigFigs=3;
    } else if (toUnitRef==22){
        currencySigFigs=8;
    } else {
        currencySigFigs=2;
    }                                  
    $('#result').css('display','block');
    $('#result2').css('display','block');
    $('#answer').html(fromAbbvs[0]+" "+val1+" = "+toAbbvs[0]+" "+(val1*currencyFactor).toFixed(currencySigFigs));
    $('#mobileAnswer').html(fromAbbvs[0]+" "+val1+" = "+toAbbvs[0]+" "+(val1*currencyFactor).toFixed(currencySigFigs));
    $('#lastUpdateTime').html("<span class='updatedtime'>Currency data last updated: <i>"+timeString+'</i></span>');
    $('#lastUpdateTime').css('display','block');
    if( navigator.userAgent.match(/Android/i)
    || navigator.userAgent.match(/webOS/i)
    || navigator.userAgent.match(/iPhone/i)
    || navigator.userAgent.match(/iPod/i)
    || navigator.userAgent.match(/BlackBerry/i)
    ){
        $('#resultBanner').css('margin-bottom','30px');  
    } else {
        $('#lastUpdateTime').css('display','block');
    }                                  
    } else {		
    if (args.length==1) {
        question= args[0]+fromAbbvs[0];
        answerRaw= ((args[0]-fromOffset)*factor[0]/denominator[0])+toOffset;
    } else if (args.length==2) {
        question= args[0]+fromAbbvs[0]+" "+args[1]+fromAbbvs[1];
        answerRaw= args[0]*factor[0]/denominator[0];
        answerRaw= answerRaw+ args[1]*factor[1]/denominator[1];
    } else if (args.length==3) {
        question= args[0]+"<sup>"+args[1]+"</sup>⁄<sub>"+args[2]+"</sub>"+fromAbbvs[0];
        answerRaw= args[1]/args[2];
        answerRaw= (parseInt(args[0])+answerRaw);
        answerRaw= answerRaw*factor[0]/denominator[0];
        if (isNaN(answerRaw)) {
        question= args[0]+"<sup>"+args[1]+"</sup>⁄<sub>?</sub>"+fromAbbvs[0];
        }
        args.pop();
        args.pop();
    }
    $('#ExponentialBox').empty().html(showExp(answerRaw));
    var showWorkingData = generateShowWorkingData(args,numSigFig);
    showWorkingOutput=generateShowWorkingOutput(showWorkingData);
    $('#WorkingBox').empty().html(showWorkingOutput);		
    $('.wrow').css('padding-bottom', '60px');
    var formatVal= $('#format').val();
    subUnitFacInd= 0;
      console.log('got here 461?');        
    if( navigator.userAgent.match(/Android/i)
    || navigator.userAgent.match(/webOS/i)
    || navigator.userAgent.match(/iPhone/i)
    || navigator.userAgent.match(/iPod/i)
    || navigator.userAgent.match(/BlackBerry/i)
    ){
        $('#resultBanner').css('margin-bottom','30px');  
    } else {
        if (formatVal<0) {
        $('#fraction').css('display','block');
        } else if (formatVal==0) {
        $('#decimal').css('display','block');
        } else {
        $('#subnote').css('display','block');
        }	      
    }
    if (isNaN(answerRaw)) {
        answer= "??";
    } else {
        while (formatVal>0) {
        var argSplit= answerRaw.toString().split('.');
        answer= answer+argSplit[0].toString()+toAbbvs[subUnitFacInd]+" ";
        answerRaw= (answerRaw-argSplit[0])*toFactors[subUnitFacInd];
        formatVal--;
        subUnitFacInd++;
        }
        if (formatVal==-1) {
        answer=answer+makeFraction(answerRaw)+toAbbvs[subUnitFacInd];
        } else {		      
        answer= answer+answerRaw.toPrecision(numSigFig).toString()+toAbbvs[subUnitFacInd];
        }
    }
    $('#answer').empty().html(question+'= '+answer);
    $('#mobileAnswer').empty().html(question+'= '+answer);
    }
    if ($('#result').css('display')!='none') {
    fireLowerAd= 0;
    }
    $('#result').css('display','block');
    $('#result2').css('display','block');	
    var fontsize= 60;
    $('#answer').css('font-size','60px');
    while ($('#answer').height()>100) {		    
    fontsize--;		
    $('#answer').css('font-size',fontsize+"px");
    }		
    $('#mobileAnswer').css('font-size','60px');
    while ($('#mobileAnswer').height()>100) {
    fontsize--;		
    $('#mobileAnswer').css('font-size',fontsize+"px");
    }		
    $('#FromInfoBox').empty().load($('#fromUnitDesc').find('a').attr('href')+" #information");
    $('#ToInfoBox').empty().load($('#toUnitDesc').find('a').attr('href')+" #information");

    if (isPhone) {
      if (isAndroid) {
	var thisAppText= appPromoCopy[langIndex-1];
	$('#appPromoBar').empty().html('<a href="https://play.google.com/store/apps/details?id=com.wighthat.MetricConversion" class="appPromoLink"><img src="/images/metric-icon-72x72.png" class="appPromoIcon"><p class="appPromoText">'+thisAppText+'</p></a>');	
      } else if (isIOS) {
	var thisAppText= appPromoCopy[langIndex-1];
	$('#appPromoBar').empty().html('<a href="https://itunes.apple.com/app/metric-conversion-tool/id1439430070?mt=8" class="appPromoLink"><img src="/images/metric-icon-72x72.png" class="appPromoIcon"><p class="appPromoText">'+thisAppText+'</p></a>');
      }
    } else {    
      var isAboveTheFold = $("#answer").offset().top < ($(window).height()-100);
      if (!isAboveTheFold) {
        window.scrollTo(0,250);	
      }
    }
          
    function makeFraction(input){
    var wholeNum= parseInt(input);
    var fracNum= input-wholeNum;
    var lastDiff;
    var output=[];
    var arrayOfFractions=[];
    var arrayOfDiffs=[];
    var differenceToZero=[];
            
    for (var i=0;i<=64;i++){
        arrayOfFractions[i]=i/64;
        arrayOfDiffs[i]=fracNum-arrayOfFractions[i];
        differenceToZero[i]=Math.abs(arrayOfDiffs[i]);
    }
            
    var minPos=findArrayMinimaPos(differenceToZero);
    output=reduceCommonDenominator(minPos);
    if (output[0]) {
        if (isPhone==1) {
            if (wholeNum> 0) {
            return(wholeNum+" "+output[0]+"/"+output[1]+" ");
            } else {
            return(output[0]+"/"+output[1]+" ");	
            }
        } else {
        return(wholeNum+"<sup>"+output[0]+"</sup>⁄<sub>"+output[1]+"</sub>");
        }
    } else {
        return(wholeNum);
    }
    }
		    
      function showExp(arg) {
	  var answerString= arg.toExponential().toString();
	  return(answerString);
      }		    
		    
      function generateShowWorkingData(val,precision) {
	  var returnArray=[]; 
	  var numberOfNonZeroVals=0;
	  var i;
		
	  for (i=val.length;i>=0;i--){
	    if (val[i]>0){
	      numberOfNonZeroVals=i+1;
	      break;
	    }
	  }
		
	  var rollDownTotal=val[0];
	  for (i=1;i<numberOfNonZeroVals;i++){
	      returnArray.push(["",fromAbbvs[i-1]+ " -> "+fromAbbvs[i],""]);
	      returnArray.push([fromAbbvs[i]+ " = ","("+fromAbbvs[i-1]+" * "+fromFactors[i-1].toPrecision(precision)+") + "+val[i],""]);
	      
	      val[i]*=1;
	      rollDownTotal*=1;
	      returnArray.push([fromAbbvs[i]+" = ","("+rollDownTotal+" * "+fromFactors[i-1].toPrecision(precision)+") + "+val[i],""]);
	      returnArray.push([fromAbbvs[i]+" = ",rollDownTotal*fromFactors[i-1].toPrecision(precision)+" + "+val[i],""]);
	    
	      rollDownTotal*=1;
	      val[i]*=1;
	      rollDownTotal=((rollDownTotal*fromFactors[i-1])+val[i]).toPrecision(precision);
	      returnArray.push([fromAbbvs[i]+ " =  ",rollDownTotal,""]);
	      
	      // Break out of loop if this unit is the unit we're converting to
	      if (fromNames[i] ==toNames[0]){
		break;
	      }
	  }
		
	  // Header now complete, rolldownTotal has the total in lowest needed subunit
	  returnArray.push(["",fromAbbvs[i-1]+ " -> "+toAbbvs[0],""]);
	  if (denominator[i-1]>1){		    
	      var arrayToPush=[];
	      arrayToPush=[toAbbvs[0]+" = ","<numerator>"];
	      if (fromOffset>0){
		  arrayToPush.push(fromAbbvs[i-1]+"-"+fromOffset,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>","");
		  returnArray.push(arrayToPush);
	      } else if (toOffset>0) {
		  arrayToPush.push(fromAbbvs[i-1],"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>"," + "+toOffset);
		  returnArray.push(arrayToPush);
	      } else {
		  arrayToPush.push(fromAbbvs[i-1],"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>","");
		  returnArray.push(arrayToPush);
	      }
	      //returnArray.push([toAbbvs[0]+" = ","<numerator>",fromAbbvs[i-1],"</numerator>","<denominator>",denominator[i-1],"</denominator>",""]);
	      
		
	      arrayToPush=[toAbbvs[0]+" = ","<numerator>"];
	      if (fromOffset>0){
		arrayToPush.push(rollDownTotal+" - "+fromOffset,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>","");
		returnArray.push(arrayToPush);
		arrayToPush=[toAbbvs[0]+" = ","<numerator>",rollDownTotal- fromOffset,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>",""];
		returnArray.push(arrayToPush);
	      } else if (toOffset>0){
		arrayToPush.push(rollDownTotal,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>"," + "+toOffset);
		returnArray.push(arrayToPush);
		arrayToPush=[toAbbvs[0]+" = ","<numerator>",rollDownTotal,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>"," + "+toOffset];
		returnArray.push(arrayToPush);    
	      } else{
		arrayToPush.push(rollDownTotal,"</numerator>","<denominator>",denominator[i-1].toPrecision(precision),"</denominator>","");
		returnArray.push(arrayToPush);
	      }
	      //returnArray.push([toAbbvs[0]+" = ","<numerator>",rollDownTotal,"</numerator>","<denominator>",denominator[i-1],"</denominator>",""]);
	      
		
	      arrayToPush=[toAbbvs[0]+" = "];
	      if (fromOffset>0){
		arrayToPush.push(((rollDownTotal-fromOffset)/denominator[i-1]).toPrecision(precision),"");  
		returnArray.push(arrayToPush);
	      }
	      else if (toOffset>0){
		arrayToPush.push(((rollDownTotal-fromOffset)/denominator[i-1]).toPrecision(precision)+" + " +toOffset,"");  
		returnArray.push(arrayToPush);
		arrayToPush.push(((rollDownTotal-fromOffset)/denominator[i-1])+toOffset.toPrecision(precision),"");  
		returnArray.push(arrayToPush);    
		
	      }
	      else{
		arrayToPush.push((rollDownTotal/denominator[i-1]).toPrecision(precision),"");
		returnArray.push(arrayToPush);
	      }  
	      //returnArray.push([toAbbvs[0]+" = ",(rollDownTotal/denominator[i-1]).toPrecision(precision),""]);		    
	  } else {
	      var arrayToPush=[toAbbvs[0]+" = "];
	      if (fromOffset>0){
		arrayToPush.push("("+fromAbbvs[i-1]+" - "+fromOffset+" ) * "+factor[i-1],"");
	      } else if (toOffset>0){
		  arrayToPush.push(fromAbbvs[i-1]+" * "+factor[i-1].toPrecision(precision)," + "+toOffset);  
	      } else {
		  arrayToPush.push(fromAbbvs[i-1]+" * "+factor[i-1].toPrecision(precision),"");
	      }
	      returnArray.push(arrayToPush);
	      //returnArray.push([toAbbvs[0]+" = ",fromAbbvs[i-1]+" * "+factor[i-1],""]);		    
		
	      arrayToPush=[toAbbvs[0]+" = "];
	      if (fromOffset>0) {
		  arrayToPush.push("(" + rollDownTotal+" - "+fromOffset+" ) * "+factor[i-1].toPrecision(precision),"");    
	      } else if (toOffset>0){
		  arrayToPush.push(rollDownTotal+" * "+factor[i-1].toPrecision(precision)," + "+toOffset);  
	      } else {
		  arrayToPush.push(rollDownTotal+" * "+factor[i-1].toPrecision(precision),"");
	      }
	      returnArray.push(arrayToPush);
	      //returnArray.push([toAbbvs[0]+" = ",rollDownTotal+" * "+factor[i-1],""]);
	      arrayToPush=[toAbbvs[0]+" = "];
	      if (fromOffset>0){
		  arrayToPush.push(rollDownTotal-fromOffset+" * "+factor[i-1].toPrecision(precision),"");
	      }
	      else if (toOffset>0){
		  arrayToPush.push((rollDownTotal*factor[i-1]).toPrecision(precision)," + "+toOffset);  
	      }
	      else{
		  arrayToPush.push((rollDownTotal*factor[i-1]).toPrecision(precision),"");
	      }
	      returnArray.push(arrayToPush);
		
	    
	      if (fromOffset>0){
		  arrayToPush=[toAbbvs[0]+" = "];
		  arrayToPush.push(((rollDownTotal-fromOffset)*factor[i-1]).toPrecision(precision));
	      } else if (toOffset>0){
		  arrayToPush=[toAbbvs[0]+" = "];
		  arrayToPush.push(((rollDownTotal*factor[i-1])+toOffset).toPrecision(precision),"");  
	      }  
	      returnArray.push(arrayToPush);
	      //returnArray.push([toAbbvs[0]+" = ",(rollDownTotal*factor[i-1]).toPrecision(precision),""]);
	  }
	  returnArray=dirtyCleanup(returnArray);
	  return returnArray;
      }
						
      function dirtyCleanup(inArray) {
	  var outArray=[];
	  for (var i=0;i<inArray.length;i++){
	      if (i==0){
		  outArray.push(inArray[i]);
	      } else {
		  if (inArray[i]!=outArray[i-1]) {
		      outArray.push(inArray[i]);
		  }
	      }
	  }
	  return outArray;
      }						
					
      function generateShowWorkingOutput(showWorkingData) {
	  var numOfArrays=showWorkingData.length-1;
	  var returnString="";
	  for (var i=0;i<=numOfArrays;i++){
	      returnString+='<div class="wrow">';		    
	      if (showWorkingData[i][1]=="<numerator>"){
		  returnString+='<div class="wcol wleft">'+showWorkingData[i][0]+'</div>';
		  returnString+='<div class="wcol wmiddle">'+showWorkingData[i][2]+'</div>';
		  returnString+='<div class="wcol wright">&nbsp;</div>';
		  returnString+='<div class="wcol wleft">&nbsp;</div>';
		      		      
		  var divisorLineLength = (showWorkingData[i][2]+"").length;
		  if ((showWorkingData[i][5]+"").length>divisorLineLength){
		      divisorLineLength = (showWorkingData[i][5]+"").length;
		  }
		  returnString+='<div class="wcol wmiddle wline">';
		  for (var j=0;j<=divisorLineLength;j++){
		      returnString+="_";
		  }      
		  returnString+="</div>";		      		      
		  //returnString+='<div class="wcol wmiddle wline">______</div>';
		  returnString+='<div class="wcol wleft">&nbsp;</div>';
		  returnString+='<div class="wcol wmiddle">'+showWorkingData[i][5]+'</div>';      
		  returnString+='</div>';
	      } else {
		  returnString+='<div class="wcol wleft">'+showWorkingData[i][0]+'</div>';
		  returnString+='<div class="wcol wmiddle">'+showWorkingData[i][1]+'</div>';
		  returnString+='<div class="wcol wright">'+showWorkingData[i][2]+'</div>';
		  returnString+='</div>';
	      }
	  }
	  return returnString
      }					
					
      function findArrayMinimaPos(array){
	  var minVal;
	  var minPos;
	  for (var i=0;i<=array.length;i++) {
	      if ((i==0)||(array[i]<minVal)) {
		  minVal=array[i];
		  minPos=i;
	      }
	  }
	  return minPos;
      }				


      function reduceCommonDenominator(i) {
	  // i is number of 64ths we are trying to reduce to a lower denominator
	  var output=[];
	  var numOfMatches=0;
	  for (var loop=5;loop>=1;loop--) {
	      var thisNum=Math.pow(2,loop);
	      if ((i % thisNum)==0){
		  return ([i/thisNum,64/thisNum]);
	      }
	  }
	  return ([i,64]);
      }  		
							
  }
  
  	        
///////////////////////////// Alpha search ////////////////////////////////////

var alphaLoaded= [];
var resultsRequested= 0;
var resultsLoaded= 0;


function eventIfDesktop() {
    
    $('.convertForm .argument').on('keyup',function(e){
      var convertLink= $(this).parent().find('.convert');
      var convertHref= convertLink.attr('href');
      if(e.keyCode == 13) {
        document.location= convertHref;
      } else {
	var tableLink= $(this).parent().find('.tablesButton');
	var tableHref= tableLink.attr('href');
	var hrefQuestionMarkTable= 0;
	if (typeof tableHref!='undefined') {
	  hrefQuestionMarkTable= tableHref.indexOf('?');
	}
    
    var hrefQuestionMark= convertHref.indexOf('?');	
    var currencyParam="";
    var currencyNameIndex = convertHref.indexOf('to=');
    if (currencyNameIndex>0) {
        currencyParam = convertHref.substring(currencyNameIndex+3);
    }
	
	if (hrefQuestionMark>0) {
	  convertHref= convertHref.substring(0,hrefQuestionMark);
	}
	if (hrefQuestionMarkTable>0) {
	  tableHref= tableHref.substring(0,hrefQuestionMarkTable);
	}
	convertHref+= "?val="+$(this).val();
	tableHref+= "?val="+$(this).val();
    
    if (currencyParam) {
        convertHref+= "&to="+currencyParam;
    }
	convertLink.attr('href',convertHref);
	tableLink.attr('href',tableHref);
      }
    });
}

function convertIfMobile() {
  if (isPhone) {   
    $('#results li').each(function(){
       var anchor=$(this).find('h2').html();
       var href=$(this).find('.convert').attr('href');
       if (anchor!= null) {
	  $(this).append('<a class="mobileLink" href="'+href+'">'+anchor+'</a>');
	  $(this).find('h2').remove();
       }
    });
    $('#search').css('display','block');
  }   
}

function searchActivity() {
  var currentSearchFrom= $('#queryFrom').val();
  currentSearchFrom = currentSearchFrom.replace(/\s+$/gi,'');
  if (currentSearchFrom.length>0) {
    $('#queryTo').attr('placeholder','');
  }
  var currentSearchTo= $('#queryTo').val();
  currentSearchTo = currentSearchTo.replace(/\s+$/gi,'');
  fetchResults(currentSearchFrom,currentSearchTo);
}

function fetchResults(currentSearchFrom,currentSearchTo) {  
  if (typeof(typeIndex)=='undefined') {
    var urlCode= encodeURI('/cgi-bin/alphacgi.cgi?searchtextfrom='+currentSearchFrom+'&searchtextto='+currentSearchTo+'&numofresults=10&lang='+langIndex);
    $('#search').load(urlCode+' #results',function(){
	convertIfMobile();
	eventIfDesktop();
	// commented out Mike 12/2/24
	//showCalcButtonIfRequired();
    });  
  } else {
    var urlCode= encodeURI('/cgi-bin/alphacgi.cgi?searchtextfrom='+currentSearchFrom+'&searchtextto='+currentSearchTo+'&numofresults=10&lang='+langIndex+'&type='+typeIndex);
    $('#search').load(urlCode+' #results',function(){
	convertIfMobile();
	eventIfDesktop();
	//commented out Mike 12/2/24
	//showCalcButtonIfRequired();
    });
  }  
}

function autoComplete() {
  var singlefrom= $('#singlefrom').html();
  var singleto= $('#singleto').html();
  if (singlefrom!= '0') {
    $('#queryFrom').val(singlefrom);
  }
  if (singleto!= '0') {
    $('#queryTo').val(singleto);
  }    
}

$('.searchField').keyup(function(){ searchActivity(); });
$('.searchField').on('blur',function(){ autoComplete(); });



///////////////////////////////////////////////////////////////////////////////

var historytableurl= "";
var historycalcurl= "";
		
if (templateIndex==7) {		
  historycalcurl=thisUrl;
  if (typeIndex==2) {
    historytableurl=thisUrl+"#conversionTable";
  } else {
    historytableurl=$('#tableLink').attr('href');
  }
} else if (templateIndex==12) {
  historytableurl=thisUrl;
  historycalcurl=$('#convertLink').attr('href');
}
else if (templateIndex==6) {
  historytableurl=thisUrl;
  historycalcurl=thisUrl;
}
if ((templateIndex==7)||(templateIndex==12)||(templateIndex==6)) {
  var cutoff= historycalcurl.indexOf("metric-conversions.org");
  if (cutoff>0) {
    historycalcurl= historycalcurl.substring(cutoff+22);
  }
  cutoff= historytableurl.indexOf("metric-conversions.org");
  if (cutoff>0) {
    historytableurl= historytableurl.substring(cutoff+22);
  }
  addhistorytohtml5ls($('h1').text()+','+$('h1').attr('class')+','+historycalcurl+','+historytableurl);		  
}

		
function propagatehistorytext(count){
  var historystring="";
  var type=($('#type').val());
  for (var i=0;i<count;i++) {
    var thishistory=gethtml5recordbynumber(i);
    // Add this history record if (we don't have a type, ie this is index.htm) or (we do have a type, which matches the type of this page)
    if ((thishistory[1]==typenames[type])||(typeof type !="string")){
      historystring+='<li><h2 class="';
      historystring+=thishistory[1]+'-blue conversion">';
      historystring+=thishistory[0]+'</h2><div class="convertForm"><input class="argument" placeholder="" >';
      //if (thishistory[1]!='currency') {
                //historystring+='<a href="'+thishistory[3]+'" class="tablesButton blueButton">'+tabletext+'</a>';
      //}
      
      historystring+='<a href="'+thishistory[2]+'" class="convert greenButton">'+converttext+'</a>';      
  //<a style="display:none" href="javascript:$('#results li').hide();var calcfrom='Celsius';var calcto='Fahrenheit';var calcurl='/temperature/celsius-to-fahrenheit.htm';generateCalculator(getLanguage(),1,1,2)" class="convert greenButton calculatorbutton">Click here</a>
      historystring+='</div></li>';
  }
  }
   $('#search').prepend("<section id=\"results\"><ol>"+historystring+"</ol></section>").css('display','block');
    eventIfDesktop()    
    convertIfMobile();
}

function addhistorytohtml5ls(value){
    //console.log('Add history: '+value);
    var inputarray=value.split(",");
    var inputname=inputarray[0];
    var inputicon=inputarray[1];
    var inputurl=inputarray[2];
    var tableurl=inputarray[3];
    
    inputurl = inputurl.replace(/\?.*$/,"");
        
    if (!(cookiename.match(/[a-zA-Z]/))){
        throw new Error("cookiename is not set in history routine!!");
    }
    if (!(historysize)){
        throw new Error("history size is not set!!");
    }
   
    var noduplicatesarray=[];          
    noduplicatesarray.unshift(inputname,inputicon,inputurl,tableurl);

    var cookiearray=gethtml5ls();
    var totallength=cookiearray.length;
    var numofentries=totallength/4;

    // check if we've already got this url in history. If so, don't copy it into our noduplicates array
    for (var i=0;i<numofentries;i++) {
        var thisurl=cookiearray[(i*4)+2];
        if (inputurl==thisurl) {
            continue;
        }
        else{
          noduplicatesarray.push(cookiearray[i*4],cookiearray[(i*4)+1],cookiearray[(i*4)+2],cookiearray[(i*4)+3]);
        }
    }    
    

    var newlength=noduplicatesarray.length;
    while (newlength>(historysize*4)) {
      noduplicatesarray.pop();
      newlength=noduplicatesarray.length;
    }

    
  sethtml5ls(noduplicatesarray);
}


function sethtml5ls(inputarray) {
  try {
    localStorage[cookiename] = JSON.stringify(inputarray);
  }
  catch (error)
  {
    return false;
  }
}

function countnumberofhtml5lsrecords(){
    var cookiearray=gethtml5ls(cookiename);
    return (cookiearray.length/4);
}

function gethtml5ls(c_name) {
    var result;
    if (localStorage[cookiename]) {
        result = JSON.parse(localStorage[cookiename]);      
    }
    else{
        result="";
    }
  
  return result;
}

function gethtml5recordbynumber(index){

    var cookiearray=gethtml5ls(cookiename);
    
    if (cookiearray.length ==0){
        return 0;
    }
    else {
      if (index>(cookiearray.length/4)) {
	    console.log('Requested history index '+index+', but only '+(cookiearray.length/4)+' records are available');
            return 0;
      }        
      else{
	return [cookiearray[index*4],cookiearray[(index*4)+1],cookiearray[(index*4+2)],cookiearray[(index*4+3)]];
      }        
    }
}

// Analytics
// commented out by Mike 12/2/24
//(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//ga('create', '%%analAcc%%', 'auto');
//ga('set', 'anonymizeIP', false);
//ga('send', 'pageview');

function newCurrencySelected(currSelectedValue){
    var next=currAbvs[currSelectedValue];
    var currentUrl = String(document.location.href);
    var upToHtm = currentUrl.indexOf('.htm')
    upToHtm+=4;
    var newUrl=currentUrl.substring(0,upToHtm);
    newUrl+="?to="+next;
    window.location.href = newUrl;
}
    
// Analytics
// commented out by Mike 12/2/24
//(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//ga('create', '%%analAcc%%', 'auto');
//ga('send', 'pageview');

//var _gaq = _gaq || [];_gaq.push(['_setAccount',analAccNo]);
//_gaq.push(['_trackPageview']);(function(){var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();



// GA4 added by Mike 12/2/24
<!-- Google tag (gtag.js) -->
var script = document.createElement('script');
script.src = "https://www.googletagmanager.com/gtag/js?id=G-E3CDSGRVHQ";
script.async = true;
document.head.appendChild(script);


window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-E3CDSGRVHQ');

	
var urlshash={};
var templangsarray=[];


// language selector					  
					  
var langNameArray=["English","Español","Français","Deutsch","Português","Italiano","Nederlands","русский","中國（傳統）","中國（簡體）","日本の","한국의","Svenska","Norsk","Dansk","České","Català","Έλληνες","Polski","Slovenščina","Slovenský","Magyar","български","Português (Brasil)","Suomi","српски","Lietuvių","हिंदी","Hrvatski","беларускі","Shqiptar","український","Român","Eesti","Melayu","Maltese","Tagalog","Bahasa Indonesia","tiếng Việt","Türk","Afrikaans","Srpski","Cymraeg","বাঙালি","తెలుగు","ગુજરાતી","македонски","ქართული","հայերեն","Azərbaycan","ไทย","Bosanski","Қазақ","Türkmençe","தமிழ்"];
var toappend='<select onchange=\'window.location.href=$(this).val();\'>';
var otherLangs=0;
toappend+='<option value=\'1\'>&nbsp;</option>';
//for  (var index = 0; index < langNameArray.length; index++) {
//    if (altUrls[index]) {
//        if (langIndex==(index+1)) {
//            continue;
//        }
//        urlshash[langNameArray[index]]=altUrls[index];
//        templangsarray.push(langNameArray[index]);
//        otherLangs=1;
//    }
//}

for  (var index = 0; index < langNameArray.length; index++) {
    if (altUrls[index]) {
        if ((langIndex==1) && (index==0)) {
                continue;
        }
        if (langIndex==(index+2)) {
            continue;
        }


        urlshash[langNameArray[index]]=altUrls[index];
        templangsarray.push(langNameArray[index]);
        otherLangs=1;
    }
}

templangsarray.sort();
	      
var index;
for (index = 0; index < templangsarray.length; index++) {
    var thislang = templangsarray[index];
    var thisurl = urlshash[thislang];
	toappend=toappend+'<option value=\''+thisurl+'\'>&nbsp;'+thislang+'</option>';
}
toappend+='</select>';

if (otherLangs) {
		$('#language').append(toappend);
		$('#language').css('visibility','visible');                     
}
else{      
		$('#language').css('visibility','hidden');
}                         

// ads code

var resultBanner= 0;
var largeBanner= 0;
var towerAd= 0;
var langTag= $('html').attr('lang');
var adPhase= Math.floor(Math.random() * 10);

//var googletag = googletag || {};
//googletag.cmd = googletag.cmd || [];
//(function() {var gads = document.createElement('script');gads.async = true;gads.type = 'text/javascript';
// var useSSL = 'https:' == document.location.protocol;
// gads.src = (useSSL ? 'https:' : 'http:') + '//www.googletagservices.com/tag/js/gpt.js';
// var node = document.getElementsByTagName('script')[0];
// node.parentNode.insertBefore(gads, node);})();

//googletag.cmd.push(function(){
//	if ($(".exists").length) {	  
//		}					
//		if( navigator.userAgent.match(/Android/i)
//		|| navigator.userAgent.match(/webOS/i)
//		|| navigator.userAgent.match(/iPhone/i)
//		|| navigator.userAgent.match(/iPod/i)
//		|| navigator.userAgent.match(/BlackBerry/i)
//		){	    		  
//			if ($('#resultBanner').hasClass('exists')) {				
//				googletag.defineSlot('/2699452/300x250_mobile_devices', [300,250], 'resultBanner').addService(googletag.pubads()).setTargeting("language",langTag).setTargeting("abtest",adPhase);
//				resultBanner= 1;
//			}
//			if ($('#baseBanner').hasClass('exists')) {
//			}			
//		} else {
//			if ($('#resultBanner').hasClass('exists')) {
//				googletag.defineSlot('/2699452/ConversionLeader', [728,90],'resultBanner').addService(googletag.pubads()).setTargeting("language",langTag).setTargeting("abtest",adPhase);
//				resultBanner= 1;
//			}
//			if (navigator.userAgent.match(/iPad/i)) {
//			  if ($('#towerAd').hasClass('exists')) {
//				  googletag.defineSlot('/2699452/ConversionLargeAd', [300,250], 'towerAd').addService(googletag.pubads()).setTargeting("language",langTag).setTargeting("abtest",adPhase);
//				  towerAd= 1;
//			  }			  
//			} else {
//			  if ($('#towerAd').hasClass('exists')) {
//				  googletag.defineSlot('/2699452/ConversionLargeAd', [[300,600],[300,250]], 'towerAd').addService(googletag.pubads()).setTargeting("language",langTag).setTargeting("abtest",adPhase);
//				  towerAd= 1;
//			  }
//			}
//			if ($('#largeBanner').hasClass('exists')) {
//				googletag.defineSlot('/2699452/ConversionLeader', [728, 90], 'largeBanner').addService(googletag.pubads()).setTargeting("language",langTag).setTargeting("abtest",adPhase);
//				largeBanner= 1;
//			}
//			}			
//		}
//		googletag.pubads().setTargeting("pass","0");
//		googletag.pubads().setTargeting("template",templateIndex);
//		googletag.pubads().setTargeting("typeRef",typeIndex);
//		googletag.pubads().setTargeting("fromUnit",fromIndex);
//		googletag.pubads().setTargeting("toUnit",toIndex);
//		googletag.pubads().setTargeting("typeName",typeName);
//		googletag.pubads().setTargeting("fromName",fromName);
//		googletag.pubads().setTargeting("toName",toName);
//		googletag.pubads().collapseEmptyDivs();
//		googletag.pubads().enableSingleRequest();
//		googletag.enableServices();
//		displayAds();
//	}
//});			      


				
function displayAds() {
//	if ($(".exists").length) {			
//		googletag.cmd.push(function() {
//			if (resultBanner==1) {
//				googletag.display('resultBanner');
//			}
//			if (towerAd==1) {
//				googletag.display('towerAd');
//			}
//			if (largeBanner==1) {
//				googletag.display('largeBanner');
//			}
//			}			
//			}
//		});
//	}	
}
    
function trackThis(){
// dummy since we don't use this any more
}

$('a.featureConv').css('height', 'auto');
$('a.typeConv').css('height', 'auto');
document.getElementById('conversionTable').style.marginTop = '50px';
document.getElementById('userTable').style.marginBottom = '5px';

</script>

</body>
</html>
