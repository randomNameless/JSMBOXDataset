<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SiteFunctions.html</title>
</head>
<body>

<script>
var SiteFunctions = window.SiteFunctions || {};

SiteFunctions.OpenFloatingMenu = function () {
    $(".fixed-menu").toggleClass("fixed-menu1");
};

SiteFunctions.ForceOpenFloatingMenu = function (event) {
    $(".fixed-menu").removeClass("fixed-menu1");
}


SiteFunctions.OpenNavBarMenu = function () {
    $('.nav-bar-menu').toggleClass('d-flex');
}

SiteFunctions.LoadSegment = function (SegmentID) {
    $('head').append('<link rel="stylesheet" href="../MainSite/SiteStyles/' + SegmentID + 'Home.css" type="text/css" />');
    $('head').append('<link rel="stylesheet" href="../MainSite/SiteStyles/' + SegmentID + 'Theme.css" type="text/css" />');

    setTimeout(function () {
        if (config.AppLangID == 'AR')
            $('link[href="../MainSite/SiteStyles/personalTheme.css"]').remove();
    }, 1000);
}

$(document).mouseup(function (e) {
    var $menu = $('ul.nav-bar-menu');
    if ($('.nav-bar-menu-btn').has(e.target).length === 0) {
        $('ul.nav-bar-menu').removeClass('d-flex')
    }
});

function GenerateXSRFToken() {
    Globals.XSRF_Token = GenerateGuidID();
    Cookies.set("X-XSRF", Globals.XSRF_Token);
}

$(document).ready(function () {
    GenerateXSRFToken();
    setTimeout(function () {
        if (window.innerWidth > 991)
            SiteConstants.DeviceType = "Web";
        else if (window.innerWidth < 700)
            SiteConstants.DeviceType = "Mobile";
        else
            SiteConstants.DeviceType = "Tablet";

    }, 1000);


    setInterval(function () {
        $('.accordion').unbind("click");
        $('.accordion').on('click', function () {
            $(this).toggleClass('active');
            $(this).next().slideToggle(200);
        });
    }, 2000);

    $('body').on('click', function () {
        $('.MenuSlidableElement:visible').slideUp();
        $('.close-menu').slideUp();
    })

    $(window).on('resize', function () {
        var x = $("#layout_3VerticalContainers_2sidesContainers_footer").outerHeight();
        $("#ALLPageContent").css("cssText", "margin-bottom:" + x + "px !important");
    });

    setInterval(function () {
        var x = $("#layout_3VerticalContainers_2sidesContainers_footer").outerHeight();
        $("#ALLPageContent").css("cssText", "margin-bottom:" + x + "px !important");
    }, 100);


    setInterval(function () {
        var FloatingMenuWidgetVisibility = $(".MenuWidgetInstance").is(":visible");
        if (FloatingMenuWidgetVisibility) {
            $("#arrow").css("display", 'none');
        }
        else {
            $("#arrow").css("display", 'block');
            $('.fix-tab-link').removeClass('groundFloatMenu');
        }
        $('.fix-tab-link').on("click", function () {
            $('.fix-tab-link').removeClass('groundFloatMenu');
            $(this).addClass("groundFloatMenu");
        })
    }, 100);

    setInterval(function () {
        $("#SideMenuOpenSubMenu").off('click');
        $("#SideMenuOpenSubMenu").on('click', function (event) {
            openNav(event);

        });

        $('.textarea').on('keydown', autosize);
        function autosize() {
            var el = this;
            setTimeout(function () {
                el.style.cssText = 'height:auto; padding:16';
                el.style.cssText = 'height:' + el.scrollHeight + 'px';
            }, 0);
        }

    }, 1000);

    $('.mag-dropdown select').on('blur', function () {
        $(this).removeClass('flip-arrow');
    });

    $('.mag-dropdown select').on('click', function () {
        $(this).toggleClass('flip-arrow');
    });


    setInterval(function () {
        //$('.fixed-label-input-form input').unbind("focus");
        $('.fixed-label-input-form input').focus(function () {
            if ($(this).attr('Placeholder')) {
                $(this).css('margin-top', 0);
                $(this).before('<label class="fixed-label ar-direction">' + $(this).attr('Placeholder') + '</label>');
                $(this).attr('data-holder', $(this).attr('placeholder'));
                $(this).attr('placeholder', '');
            }
        });
        //$('.fixed-label-input-form input').unbind("blur");
        $('.fixed-label-input-form input').blur(function () {
            if ($(this).val() == '') {
                SiteConstants.Thiss = $(this);
                if ($(this).attr('data-holder')) {
                    if ($(this).hasClass("hasDatepicker")) {
                        setTimeout(function () {
                            if (SiteConstants.Thiss.val() == '') {
                                SiteConstants.Thiss.attr('placeholder', SiteConstants.Thiss.attr('data-holder'));
                                SiteConstants.Thiss.siblings('.fixed-label').remove();
                                SiteConstants.Thiss.css('margin-top', '22px');
                            }
                        }, 500);
                    } else {
                        $(this).attr('placeholder', $(this).attr('data-holder'));
                        $(this).siblings('.fixed-label').remove();
                        $(this).css('margin-top', '22px');
                    }
                }
            }
        });
    }, 1000);

    var wow = new WOW({
        boxClass: 'wow',
        animateClass: 'animated',
        offset: 0,
        mobile: true,
        live: true,
        callback: function (box) {
        },
        scrollContainer: null
    });

    wow.init();
    wow.sync();
});

BusinessVirtualFunctions.GeneralHandleCallBridgeError = function () {
    var popupParams = {
        Title: config.AppLangID == 'EN' ? 'Warning' : 'تنبية',
        Message: config.AppLangID == 'EN' ? 'Please check your internet connection' : 'برجاء التحقق من خدمة الإنترنت لديك',
        ButtonText1: config.AppLangID == 'EN' ? 'Refresh page' : 'تحديث الصفحة',
        ButtonText2: config.AppLangID == 'EN' ? 'Cancel' : 'إلغاء',
        Button1Action: function () { location.reload(); SiteFunctions.HidePopup(); },
        Button2Action: function () { SiteFunctions.HidePopup(); HideSpinner(); }
    };
    SiteFunctions.ShowPopup(popupParams);
}

BusinessVirtualFunctions.AfterCancelPendingCalls = function () {
    var popupParams = {
        Title: config.AppLangID == 'EN' ? 'Warning' : 'تنبية',
        Message: config.AppLangID == 'EN' ? 'Please' : 'برجاء ',
        ButtonText1: config.AppLangID == 'EN' ? 'Refresh page' : 'تحديث الصفحة',
        ButtonText2: config.AppLangID == 'EN' ? 'Cancel' : 'إلغاء',
        Button1Action: function () { location.reload(); SiteFunctions.HidePopup(); },
        Button2Action: function () { SiteFunctions.HidePopup(); HideSpinner(); }
    };
    SiteFunctions.ShowPopup(popupParams);
}

BusinessVirtualFunctions.GeneralHandleGetResourceError = function () {
    var popupParams = {
        Title: config.AppLangID == 'EN' ? 'Warning' : 'تنبية',
        Message: config.AppLangID == 'EN' ? 'Please check your internet connection' : 'برجاء التحقق من خدمة الإنترنت لديك',
        ButtonText1: config.AppLangID == 'EN' ? 'Refresh page' : 'تحديث الصفحة',
        ButtonText2: config.AppLangID == 'EN' ? 'Cancel' : 'إلغاء',
        Button1Action: function () { location.reload(); SiteFunctions.HidePopup(); },
        Button2Action: function () { SiteFunctions.HidePopup(); HideSpinner(); }
    };
    SiteFunctions.ShowPopup(popupParams);
}

SiteFunctions.CurrentURL = function () {
    var CurrentUrl = window.location.href;
    CurrentUrl = CurrentUrl.split("/");
    return CurrentUrl[CurrentUrl.length - 1];
}

SiteFunctions.ChangeLanguage = function () {
    if (config.AppLangID == 'EN') {
        ChangeLanguage('AR');
    } else {
        ChangeLanguage('EN');
    }
    var resizeEvent = window.document.createEvent('UIEvents');
    resizeEvent.initUIEvent('resize', true, false, window, 0);
    window.dispatchEvent(resizeEvent);
}

SiteFunctions.LogOut = function () {
    SiteConstants.IsCustomerLoggedIn = false;
    SiteConstants.CustomerData = {};
    SiteFunctions.RemoveLocalStorage('LoginData');
    SiteFunctions.RemoveLocalStorage('SessionKey');
    $("#divAppLayOutHeaderWelcomeMenu").addClass("HideElement");
    $(".divCustomerLoginWidget").removeClass("HideElement");
}

BusinessVirtualFunctions.CanOpenSubPage = function (SubPageID) {
    var Returned = true;
    if (SubPageID == 'CustomerLogin')
        return Returned;

    var CurrentUrl = SiteFunctions.CurrentURL();
    if (SiteConstants.InitData && SiteConstants.InitData.PageSettings) {
        for (var j = 0; j < SiteConstants.InitData.PageSettings.length; j++) {
            if (SiteConstants.InitData.PageSettings[j].PageURL == CurrentUrl) {
                if (SiteConstants.InitData.PageSettings[j].IsPostLogin == "True" && SiteConstants.IsCustomerLoggedIn == false) {
                    ExecutePortalEvent("LoadSubPage_CustomerLogin");
                    Returned = false;
                }
            }
        }
    }
    return Returned;
}

BusinessVirtualFunctions.HandleRspOutputObj = function (RSP) {
    if (RSP.Item.Header.Service.ServiceResult.ResultCode == 0) {
        if (RSP.Item.Header.Customer.CustomerID)
            SiteConstants.IsCustomerLoggedIn = true;
        else
            SiteFunctions.LogOut();
    }
    else if (RSP.Item.Header.Service.ServiceResult.ResultCode == Globals.SessionExpiredErrorNumber) {
        SiteFunctions.LogOut();
        ExecutePortalEvent("LoadSubPage_CustomerLogin");
    }
    else {
        var CurrentUrl = SiteFunctions.CurrentURL();

        if (SiteConstants.InitData) {
            for (var j = 0; j < SiteConstants.InitData.PageSettings.length; j++) {
                if (SiteConstants.InitData.PageSettings[j].PageURL == CurrentUrl) {
                    if (SiteConstants.InitData.PageSettings[j].IsPostLogin == "True") {
                        if (!SiteConstants.IsCustomerLoggedIn) {
                            ExecutePortalEvent("LoadSubPage_CustomerLogin");
                        }
                    }
                }
            }
        }
    }
}


BusinessVirtualFunctions.OnToggleSubMenu = function ($item) {
    $('.close-menu').slideUp();
}
BusinessVirtualFunctions.OnToggleWidgetInstance = function ($item) {
    var CurrentItemID = $item.attr('ItemID');
    var closebtnItemID = $('.close-menu').attr('MenuItemID');
    var btnVisibilty = $('.close-menu').is(':visible');
    if (btnVisibilty) {
        if (CurrentItemID == closebtnItemID) {
            $('.close-menu').slideUp();
            $('.close-menu').attr('MenuItemID', '');
        }
        else
            $('.close-menu').attr('MenuItemID', CurrentItemID);
    }
    else {
        $('.close-menu').slideDown();
        $('.close-menu').attr('MenuItemID', CurrentItemID);
    }

}
BusinessVirtualFunctions.OnToggleContent = function ($item) {
    $('.close-menu').slideUp();
}

SiteFunctions.ValidateMinMaxLength = function (ItemID, MinLength, MaxLength) {
    var Isvalid = true;
    if ($(ItemID).val().length > MaxLength || $(ItemID).val().length < MinLength) {
        this.HandleErrorMessage(ItemID, 'NotValid');
        Isvalid = false;
    }
    return Isvalid;
}

SiteFunctions.ValidateElement = function (Id, Empty, Match, MinLength, MaxLength, Type) {
    if (Type != 'Date') {
        this.RemoveErrorValidations(['#' + Id]);
    }
    var FirstItemID;
    var SecondItemID;
    var ItemID;
    var value;
    var Newvalue;
    var Newvalue2;
    MinLength = MinLength == 0 ? null : MinLength;
    MaxLength = MaxLength == 0 ? null : MaxLength;
    if (Type != "image") {
        if ($.isArray(Id)) {
            FirstItemID = '#' + Id[0];
            SecondItemID = '#' + Id[1];
            Newvalue = SiteFunctions.parseArabic($(FirstItemID).val());
            $(FirstItemID).val(Newvalue);
            Newvalue2 = SiteFunctions.parseArabic($(SecondItemID).val());
            $(SecondItemID).val(Newvalue2);
        } else {
            ItemID = '#' + Id;
            if ($(ItemID).val() != null) {
                Newvalue = SiteFunctions.parseArabic($(ItemID).val());
                $(ItemID).val(Newvalue);
            }
        }
    }

    if (Empty) {
        if ($.isArray(Id)) {
            FirstItemID = '#' + Id[0];
            SecondItemID = '#' + Id[1];
        }
        ItemID = '#' + Id;

        if ($(ItemID).is("select")) {
            if ($(ItemID + ' option:selected').index() == 0) {
                this.HandleErrorMessage(ItemID, 'Empty');
                return false;
            }
        }

        else if ($(ItemID).is("input")) {
            if (FirstItemID && SecondItemID) {
                if (!$(FirstItemID).val() && !$(SecondItemID).val()) {
                    this.HandleErrorMessage(FirstItemID, 'Empty');
                    this.HandleErrorMessage(SecondItemID, 'Empty');
                    return false;
                }
                else if (!$(FirstItemID).val()) {
                    this.HandleErrorMessage(FirstItemID, 'Empty');
                    return false;
                } else if (!$(SecondItemID).val()) {
                    this.HandleErrorMessage(SecondItemID, 'Empty');
                    return false;
                }
            } else {
                if (!$(ItemID).val()) {
                    this.HandleErrorMessage(ItemID, 'Empty');
                    return false;
                }
            }

            if (Type === 'mail') {
                ItemID = '#' + Id;
                $(ItemID).val($(ItemID).val().trim());
                value = $(ItemID).val().toLowerCase();
                regex = /^[a-zA-Z0-9\._-]+@[a-zA-Z0-9_\-]+\.[a-zA-Z]{2,3}(\.[a-zA-Z]{2})?$/;
                if (!regex.test(value)) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            }

            else if (Type === 'Grade') {
                ItemID = '#' + Id;
                if (!$(ItemID).val()) {
                    this.HandleErrorMessage(ItemID, 'Empty');
                    return false;
                }
                if ($(ItemID).val() > 100 || $(ItemID).val() == 00 || $(ItemID).val() == 000) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            }
        }
        else if ($(ItemID).is("textarea")) {
            if (!$(ItemID).val()) {
                this.HandleErrorMessage(ItemID, 'Empty');
                return false;
            }
            if (MinLength && MaxLength) {
                ItemID = '#' + Id;
                if ($(ItemID).val().length > MaxLength || $(ItemID).val().length < MinLength) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            }
        }
        else if ($('Input[name=' + Id + ']:Checked').val()) {
            this.RemoveErrorValidations(['.' + Id]);
            return true;
        }
        else {
            this.HandleErrorMessage('.' + Id, 'Empty');
            return false;
        }

    }
    if (Type) {
        if (Type === 'image') {
            ItemID = '#' + Id;
            if ($(ItemID).prop('files').length === 0) {
                this.HandleErrorMessage(ItemID, 'Empty');
                return false;
            }

            var allowedExtensions = /(\.jpg|\.jpeg|\.png|\.gif)$/i;
            if (!allowedExtensions.exec($(ItemID).prop('files')[0].name)) {
                $(ItemID).val('');
                this.HandleErrorMessage(ItemID, 'Empty');
                return false;
            }
            else if ($(ItemID).prop('files')[0].size > HRConstants.HRPersonalImageAllowedSize) {
                $(ItemID).val('');
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
        else if (Type === 'other') {
            var ItemValue = $('#' + Id[1] + ' option:selected').html();
            if (ItemValue.toLowerCase() === 'other' || ItemValue === 'اخري' || ItemValue === 'أخري') {
                if (!this.ValidateElement(Id[0], true, false, '3', '100', null)) {
                    return false;
                }
            }
        }
        else if (Type === 'SSID') {
            if (Id.includes(',') || Array.isArray(Id)) {
                Id = Array.isArray(Id) ? Id : Id.split(',');

                for (var i = 0; i < Id.length; i++) {
                    ItemID = '#' + Id[i];
                    if (!this.ValidateNationalID($(ItemID).val())) {
                        this.HandleErrorMessage(ItemID, 'NotValid');
                        return false;
                    }
                }
            }
            else {
                ItemID = '#' + Id;
                if (!this.ValidateNationalID($(ItemID).val())) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            }
        }
        else if (Type === 'Passport') {
            ItemID = '#' + Id;
            if (!this.ValidatePassport($(ItemID).val())) {
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
        else if (Type == "MobileNumber") {
            ItemID = '#' + Id;
            if ($(ItemID).val().length == 11) {
                if (!SiteFunctions.ValidateMobileNumber($(ItemID).val())) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            } else if ($(ItemID).val().length > 11 && $(ItemID).val().length <= 15) {
                if (!SiteFunctions.ValidateOutSideMobileNumber($(ItemID).val())) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            } else if ($(ItemID).val().length < 11) {
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
        else if (Type == "PhoneNumber") {
            ItemID = '#' + Id;
            if ($(ItemID).val().length == 10) {
                if (!SiteFunctions.ValidatePhoneNumber($(ItemID).val())) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            } else if ($(ItemID).val().length > 10) {
                if (!SiteFunctions.ValidateOutSidePhoneNumber($(ItemID).val())) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                }
            }
        }
        else if (Type == "ValidateDate") {
            ItemID = '#' + Id;
            if (!/^(\d{1,2}\-\d{1,2}\-\d{4})|(\d{1,2}\/\d{1,2}\/\d{4})|(\d{4}\-\d{1,2}\-\d{1,2})|(\d{4}\/\d{1,2}\/\d{1,2})$/.test($(ItemID).val())) {
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
        else if (Type === 'mail') {
            ItemID = '#' + Id;
            $(ItemID).val($(ItemID).val().trim());
            value = $(ItemID).val().toLowerCase();
            regex = /^[a-zA-Z0-9\._-]+@[a-zA-Z0-9_\-]+\.[a-zA-Z]{2,3}(\.[a-zA-Z]{2})?$/;
            if (!regex.test(value)) {
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
        else if (Type == 'NumberOnly') {
            ItemID = '#' + Id;
            if (!$.isNumeric($(ItemID).val())) {
                this.HandleErrorMessage(ItemID, 'NotValid');
                return false;
            }
        }
    }
    if (MinLength && MaxLength) {
        var Isvalid = true;

        if (Id.includes(',') || Array.isArray(Id)) {

            Id = Array.isArray(Id) ? Id : Id.split(',');
            for (var i = 0; i < Id.length; i++) {
                ItemID = '#' + Id[i];
                if ($(ItemID).val())
                    Isvalid = this.ValidateMinMaxLength(ItemID, MinLength, MaxLength);
            }

            if (!Isvalid)
                return false;
        }
        else
            return this.ValidateMinMaxLength('#' + Id, MinLength, MaxLength);
    }

    if (Match) {
        FirstItemID = '#' + Id[0];
        SecondItemID = '#' + Id[1];
        if (Type === 'mail') {
            $(FirstItemID).val($(FirstItemID).val().trim());
            $(SecondItemID).val($(SecondItemID).val().trim());
            value = $(FirstItemID).val().toLowerCase();
            regex = /^[a-zA-Z0-9\._-]+@[a-zA-Z0-9_\-]+\.[a-zA-Z]{2,3}(\.[a-zA-Z]{2})?$/;
            if (!regex.test(value)) {
                this.HandleErrorMessage(FirstItemID, 'NotValid');
                return false;
            }
            else if ($(FirstItemID).val() !== $(SecondItemID).val()) {
                this.HandleErrorMessage(SecondItemID, 'NotValid');
                return false;
            } else {
                this.RemoveErrorValidations([FirstItemID]);
                this.RemoveErrorValidations([SecondItemID]);
                return true;
            }
        }
        else if (Type === 'password') {
            if (!SiteConstants.InitData.PasswordValidationPattern)
                SiteConstants.InitData.PasswordValidationPattern = '^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$';

            if ($(FirstItemID).val() != $(FirstItemID).val().match(SiteConstants.InitData.PasswordValidationPattern)) {
                this.HandleErrorMessage(FirstItemID, 'NotValid');
                return false;
            }
            else if ($(FirstItemID).val() !== $(SecondItemID).val()) {
                this.HandleErrorMessage(SecondItemID, 'NotValid');
                return false;
            } else {
                this.RemoveErrorValidations([FirstItemID]);
                this.RemoveErrorValidations([SecondItemID]);
                return true;
            }
        }
        else if (Type === 'SSID') {
            FirstItemID = '#' + Id[0];
            SecondItemID = '#' + Id[1];
            if (!this.ValidateNationalID($(FirstItemID).val())) {
                this.HandleErrorMessage(FirstItemID, 'NotValid');
                return false;
            }
            else if ($(SecondItemID).val() !== $(FirstItemID).val()) {
                this.HandleErrorMessage(SecondItemID, 'NotValid');
                return false;
            }
            else {
                this.RemoveErrorValidations([SecondItemID]);
                return true;
            }
        }
        else if (Type == 'Date') {
            if (!this.ValidateDate([FirstItemID, SecondItemID])) {
                this.HandleErrorMessage(SecondItemID, 'NotValid');
                return false;
            } else { return true; }
        }
        else {
            if (this.ValidateInputsXSS(Id)) {
                if ($(FirstItemID).val() !== $(SecondItemID).val()) {
                    this.HandleErrorMessage(SecondItemID, 'NotValid');
                    return false;
                } else { return true; }
            }
        }

    }
    else {
        this.RemoveErrorValidations(['#' + Id]);
        return true;
    }
};

SiteFunctions.ValidateInputsXSS = function (Id) {
    var arrInputs = [];
    var IsValid = true;

    if (Id.includes(',') || Array.isArray(Id)) {
        arrInputs = Array.isArray(Id) ? Id : Id.split(',');

        for (var i = 0; i < arrInputs.length; i++) {
            ItemID = '#' + arrInputs[i];
            IsValid = this.ValidateSingleInputXSS(ItemID);
        }

        if (!IsValid)
            return false;
    }
    else {
        ItemID = '#' + Id;
        return this.ValidateSingleInputXSS(ItemID);
    }
};

SiteFunctions.ValidateSingleInputXSS = function (ItemID) {
    $(ItemID).parent().removeClass("input-validation");
    $(ItemID).parent().find('.errorValidation').remove();
    if ($(ItemID).val()) {
        if ($(ItemID).is("input") || $(ItemID).is("textarea")) {
            var Item = $(ItemID).val();
            if (Item.match(/[A-Za-z0-9٠-٩\u0600-\u06FF]/)) {
                if (!$(ItemID).val().toLowerCase().match(/^([\u0600-\u06FF]|\s|\w|\d|\&|\-|\/|\?|\!|\@|\$|\+|\.|\,|\'|\")*?$/)) {
                    this.HandleErrorMessage(ItemID, 'NotValid');
                    return false;
                } else {
                    this.RemoveErrorValidations([ItemID]);
                    return true;
                }
            }
        }
    }
    return true;
}

SiteFunctions.HandleErrorMessage = function (ElementID, Type) {
    var Element = this.SearchInsideErrorsList(ElementID, SiteConstants.ErrorMessages);
    $(ElementID).parent().addClass("input-validation");
    $(ElementID).parent().find('.errorValidation').remove();
    $(ElementID).parent().find('.disclaimer').addClass("HideElement");
    if (Type === 'Empty') {
        if ($(ElementID).next(".errorValidation").length === 0) {
            if (config.AppLangID === 'EN') {
                $(ElementID).after(
                    '<span class="errorValidation">' + Element.Error.EmptyEN + '</span>'
                );
            }
            else {
                $(ElementID).after(
                    '<span class="errorValidation">' + Element.Error.EmptyAR + '</span>'
                );
            }
        }
    }
    else if (Type === 'NotValid') {
        if ($(ElementID).next(".errorValidation").length === 0) {
            if (config.AppLangID === 'EN') {
                $(ElementID).after(
                    '<span class="errorValidation">' + Element.Error.NotValidEN + '</span>'
                );
            }
            else {
                $(ElementID).after(
                    '<span class="errorValidation">' + Element.Error.NotValidAR + '</span>'
                );
            }
        }
    }
    else if (Type === 'Alphapetic' || Type === 'Letters' || Type === 'Arabic' || Type === 'Password' || Type === 'English' || Type === 'OnlyNumbers' || Type === 'Letters-Numbers' || Type === 'Arabic-Numbers' || Type === 'English-Numbers' || Type === 'Passport-English' || Type === 'Customer-Name' || Type === 'NationalIDWithAge') {
        if (Type === 'Letters') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in english language only not number or any other languages</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> برجاء إدخال البيانات بالغة العربية فقظ لا يمكنك  ادخال ارقام او اى لغات اخرى </span>'
                    );
                }
            }
        }
        else if (Type === 'Arabic') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in arabic language only not number or any other languages</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> برجاء إدخال البيانات بالغة العربية فقظ لا يمكنك  ادخال ارقام او اى لغات اخرى </span>'
                    );
                }
            }
        }
        else if (Type === 'English') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in english language only not number or any other languages</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> برجاء إدخال البيانات بالغة الأنجليزيه فقظ لا يمكنك  ادخال ارقام او اى لغات اخرى</span>'
                    );
                }
            }
        }
        else if (Type === 'OnlyNumbers') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in numbers only</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> من فضلك ادخال ارقام فقط </span>'
                    );
                }
            }
        }
        else if (Type === 'Letters-Numbers') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in english language and numbers only</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> يمكنك إدخال البيانات بالغة العربية و أرقام  فقظ</span>'
                    );
                }
            }
        }
        else if (Type === 'Arabic-Numbers') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in arabic language and numbers only</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> يمكنك إدخال البيانات بالغة العربية وأرقام فقظ </span>'
                    );
                }
            }
        }
        else if (Type === 'English-Numbers') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in english language and numbers only</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> يمكنك إدخال البيانات بالغة الأنجليزيه و أرقام فقظ </span>'
                    );
                }
            }
        }
        else if (Type === 'Passport-English') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Input accepts english letters and numbers only</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> يمكنك إدخال البيانات بالأحرف الأنجليزيه و أرقام فقظ </span>'
                    );
                }
            }
        }
        else if (Type === 'Customer-Name') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter full name at least three segments </span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> برجاء ادخال الاسم الثلاثي </span>'
                    );
                }
            }
        }
        else if (Type === 'Password') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Password accepts english letters , numbers and special characters</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> يمكنك إدخال كلمة المرور بالأحرف الأنجليزيه و أرقام و رموز </span>'
                    );
                }
            }
        }
        else if (Type === 'Alphapetic') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">Please enter data in arabic or english language only not number or any other languages</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> برجاء إدخال البيانات بالغة العربية أو الأنجليزيه فقظ لا يمكنك  ادخال ارقام او اى لغات اخرى</span>'
                    );
                }
            }
        }
        else if (Type === 'NationalIDWithAge') {
            if ($(ElementID).next(".errorValidation").length === 0) {
                if (config.AppLangID === 'EN') {
                    $(ElementID).after(
                        '<span class="errorValidation">The age you entered is not compatible with the National id</span>'
                    );
                } else {
                    $(ElementID).after(
                        '<span class="errorValidation"> تاريخ الميلاد الذي ادخلته لا يتوافق مع الرقم الفومي</span>'
                    );
                }
            }
        }

    }
};

SiteFunctions.RemoveErrorValidations = function (ElementsID) {
    for (var i = 0; i < ElementsID.length; i++) {
        $(ElementsID[i]).parent().removeClass('input-validation');
        $(ElementsID[i]).parent().find('.errorValidation').remove();
        $(ElementsID[i]).parent().find('.errorValidationInfo').remove();
        $(ElementsID[i]).parent().find('.disclaimer').removeClass("HideElement");
    }
};

SiteFunctions.SearchInsideErrorsList = function (ElementID, ErrorArray) {
    for (var i = 0; i < ErrorArray.length; i++) {
        if (ErrorArray[i].id === ElementID) {
            return ErrorArray[i];
        }
    }
};

SiteFunctions.ValidateNationalID = function (NationalID) {
    if (NationalID[0] == 3) {
        var NationalIDyear = "20" + NationalID[1] + "" + NationalID[2];
        var Currentyear = new Date();
        Currentyear = Currentyear.getFullYear() - 16;
        if (parseInt(Currentyear) < parseInt(NationalIDyear))
            return false;
    } else if (NationalID[0] == 1) {
        return false;
    } else if (NationalID.slice(7, 14) == '1111111') {
        return false;
    }
    if (NationalID.match(/(2|3)[0-9][0-9]0[1-9]|1[012]([0-3][1-9]|[1-3][0-9])(01|02|03|04|11|12|13|14|15|16|17|18|19|21|22|23|24|25|26|27|28|29|31|32|33|34|35|88)\d\d\d\d\d/)) {
        return true;
    }
    else {
        return false;
    }

};

SiteFunctions.Bind_Validations = function (Id, Type, Length) {
    $(Id).on('input', function (event) {
        if ($(Id).val() === " " || $(Id).val() === "  ") {
            $(Id).val('');
        }
    });

    if (Length && parseInt(Length) > 0) {
        $(Id).attr('maxlength', Length);
    }

    if (Type === 'numbers-only') {
        $(Id).on('input paste', function (event) {
            if ($(Id).val().length > Length) {
                $(Id).val($(Id).val().substr(0, Length));
            }
            else {
                if (event.type == 'paste') {
                    setTimeout(function () {
                        var Value = $(Id).val();
                        if (!$.isNumeric(Value))
                            $(Id).val('');
                    }, 5);
                }
                else {
                    var inputChar;
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                    if (!/[^٠-٩0-9]/.test($(Id).val()) && (/[٠-٩0-9]/.test(inputChar) || $(Id).val() == '')) {
                        SiteFunctions.RemoveErrorValidations([Id]);
                    }
                    else {
                        SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^٠-٩0-9]/);
                        SiteFunctions.HandleErrorMessage(Id, 'OnlyNumbers');
                    }
                }
            }
        });
    }
    else if (Type === 'Mobile') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (!$.isNumeric(Value.replace('+', '')))
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (inputChar == '+') {
                    if ($(Id).val() == '+' || $(Id).val() == '') {
                    }
                    else {
                        SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^\+[0-9٠-٩]{12,14}]|[^[0-9٠-٩]{11,15}]/);
                        SiteFunctions.HandleErrorMessage(Id, 'OnlyNumbers');
                    }
                }
                else if (/[0-9٠-٩]/.test(inputChar) || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^\+[0-9٠-٩]{12,14}]|[^[0-9٠-٩]{11,15}]/);
                    SiteFunctions.HandleErrorMessage(Id, 'OnlyNumbers');
                }
            }
        });
    }
    else if (Type === 'AddressEN') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[\w\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/g.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[\w\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/g.test(inputChar) || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^\w\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Letters-Numbers');
                }
            }
        });
    }
    else if (Type === 'en-name') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[A-Za-z]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[A-Za-z ]/.test(inputChar) || inputValue == 32 || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z ]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Letters');
                }
            }
        });
    }
    else if (Type === 'age') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (!$.isNumeric(Value))
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if ($(Id).val().length < 1 && inputChar == "0") {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^0-9٠-٩]/);
                }
                else {
                    if (/[0-9٠-٩]/.test(inputChar) || inputValue == 32 || inputValue == 8 || $(Id).val() == '') {
                        SiteFunctions.RemoveErrorValidations([Id]);
                    }
                    else {
                        SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^0-9٠-٩]/);
                        SiteFunctions.HandleErrorMessage(Id, 'OnlyNumbers');
                    }
                }
            }
        });
    }
    else if (Type === 'en-text') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[A-Za-z0-9 ]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[A-Za-z0-9 ]/.test(inputChar) || inputValue == 32 || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z0-9 ]/);
                    SiteFunctions.HandleErrorMessage(Id, 'English-Numbers');
                }
            }
        });
    }
    else if (Type === 'Captcha') {
        $(Id).on('input paste', function (event) {
            var Value = $(Id).val();
            var inputChar;
            var ss = this.selectionStart - 1;
            var ssv = ss || 0;
            inputChar = this.value.substr(ssv, 1);
            if (/[a-zA-z٠-٩0-9]/.test(inputChar) || $(Id).val() == '') {
                SiteFunctions.RemoveErrorValidations([Id]);
            }
            else {
                SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^a-zA-z٠-٩0-9]/);
                SiteFunctions.HandleErrorMessage(Id, 'English-Numbers');
            }
        });
    }
    else if (Type === 'ar-name') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/^[\u0600-\u06FF_ ]*$/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var ss = this.selectionStart - 1;
                var ssv = ss || 0;
                inputChar = $(Id).val().substr(ssv, 1);
                if (!/[^ ء-ي]/.test($(Id).val()) && ((/[ء-ي ]/.test(inputChar) || $(Id).val() == ''))) {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^ ء-ي]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Arabic');
                }
            }
        });
    }
    else if (Type === 'AddressAR') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[\W\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/g.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[\W\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/g.test(inputChar) || inputValue == 8 || inputValue == 32 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^\W\d !|/\\@#\$%\^\&*\)\(+=.,;:'"_-]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Letters-Numbers');
                }
            }
        });
    }
    else if (Type === 'ar-text') {
        $(Id).on('input paste', function (event) {

            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[\u0600-\u06FF ]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputChar;
                var ss = this.selectionStart - 1;
                var ssv = ss || 0;
                inputChar = this.value.substr(ssv, 1);
                if (/[\u0600-\u06FF ]/.test(inputChar) || /[0-9٠-٩]/.test(inputChar) || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^\u0600-\u06FF ]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Arabic-Numbers');
                }
            }
        });
    }
    else if (Type === 'NationalID') {
        $(Id).on('input paste', function (event) {
            if ($(Id).val().length > Length) {
                $(Id).val($(Id).val().substr(0, Length));
            }
            else {
                if (event.type == 'paste') {
                    setTimeout(function () {
                        var Value = $(Id).val();
                        if (/[A-Za-z0-9]/.test(Value) == false)
                            $(Id).val('');
                    }, 5);
                }
                else {
                    var inputChar;
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                    if ((/[A-Za-z0-9]/.test(inputChar) || $(Id).val() == '')) {
                        SiteFunctions.RemoveErrorValidations([Id]);
                    }
                    else {
                        SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z0-9]/);
                        SiteFunctions.HandleErrorMessage(Id, 'Passport-English');
                    }
                }
            }
        });
    }
    else if (Type === 'text-only') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (config.AppLangID == 'EN') {
                        if (/[A-Za-z ]/.test(Value) == false)
                            $(Id).val('');
                    } else {
                        if (/[\u0600-\u06FF]/.test(Value) == false)
                            $(Id).val('');
                    }
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[\u0600-\u06FF ]/.test(inputChar) || /[A-Za-z ]/.test(inputChar) || $(Id).val() == '' || inputValue == 32 || inputValue == 8) {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z\u0600-\u06FF ]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Alphapetic');
                }
            }
        });
    }
    else if (Type === 'username-en') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[A-Za-z0-9]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[A-Za-z0-9]/.test(inputChar) || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z0-9]/);
                    SiteFunctions.HandleErrorMessage(Id, 'English-Numbers');
                }
            }
        });
    }
    else if (Type === 'en-Email') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }

                if (/^[a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]*$/.test(inputChar) || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^a-zA-Z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/);
                    SiteFunctions.HandleErrorMessage(Id, 'English-Numbers');
                }
            }
        });
    }
    else if (Type === 'Alpha-Numiric') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[\u0600-\u06FF]/.test(Value) == false || /[A-Za-z]/.test(Value) == false || /[0-9]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar = event.key;
                if (/[A-Za-z0-9\u0600-\u06FF]/.test(inputChar) || inputValue == 32 || inputValue == 8 || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z0-9\u0600-\u06FF]/);
                }
            }
        });
    }
    else if (Type === 'Password') {
        $(Id).on('input paste', function (event) {

            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[A-Za-z0-9#?!@$%^&*-]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue || inputValue == 229) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[A-Za-z0-9#?!@$%^&*-]/.test(inputChar)) {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^A-Za-z0-9#?!@$%^&*-]/);
                    SiteFunctions.HandleErrorMessage(Id, 'Password');
                }
            }
        });
    }
    else if (Type === 'RefrenceCode') {
        $(Id).on('input paste', function (event) {
            if (event.type == 'paste') {
                setTimeout(function () {
                    var Value = $(Id).val();
                    if (/[a-zA-z0-9-]/.test(Value) == false)
                        $(Id).val('');
                }, 5);
            }
            else {
                var inputValue = event.which;
                var inputChar;
                if (!inputValue) {
                    var ss = this.selectionStart - 1;
                    var ssv = ss || 0;
                    inputChar = this.value.substr(ssv, 1);
                }
                if (/[a-zA-z0-9-]/.test(inputChar) || $(Id).val() == '') {
                    SiteFunctions.RemoveErrorValidations([Id]);
                }
                else {
                    SiteFunctions.HandleValueValidation($(Id).val(), Id, /[^a-zA-z0-9-]/);
                    SiteFunctions.HandleErrorMessage(Id, 'English-Numbers');
                }
            }
        });
    }
};

SiteFunctions.Get_Element_Value = function (ItemID, Widget, ControlType) {

    if (ControlType && ControlType == 'RadioButtonList') {
        var name = ItemID.split('#')[1];
        var Selector = "input:radio[name='" + name + "']:checked";
        return Widget.GetHTMLElement(Selector).val();
    } else if (ControlType && ControlType == 'CheckBoxList') {
        var name = ItemID.split('#')[1];
        var Selector = "input:checkbox[name='" + name + "']:checked";
        return Widget.GetHTMLElement(Selector).val();
    }

    if (Widget.GetHTMLElement(ItemID).is("select")) {
        return Widget.GetHTMLElement(ItemID + ' option:selected').val();
    }
    else if (Widget.GetHTMLElement(ItemID).is("textarea")) {
        return Widget.GetHTMLElement(ItemID).val();
    }
    else if (Widget.GetHTMLElement(ItemID).is("input")) {
        if (Widget.GetHTMLElement(ItemID).attr('type') === 'text') {
            return Widget.GetHTMLElement(ItemID).val();
        }
        else if (Widget.GetHTMLElement(ItemID).attr('type') === 'password') {
            return Widget.GetHTMLElement(ItemID).val();
        }
        else if (Widget.GetHTMLElement(ItemID).attr('type') === 'date') {
            return Widget.GetHTMLElement(ItemID).val();
        }
        else if (Widget.GetHTMLElement(ItemID).attr('type') === 'radio') {
            var name = Widget.GetHTMLElement(ItemID).attr('name');
            var Selector = "input:radio[name='" + name + "']:checked";
            return Widget.GetHTMLElement(Selector).val();
        }
        else if (Widget.GetHTMLElement(ItemID).attr('type') === 'checkbox') {
            var name = Widget.GetHTMLElement(ItemID).attr('name');
            var Selector = "input:checkbox[name='" + name + "']:checked";
            return Widget.GetHTMLElement(Selector).val();
        }
        else
            return undefined;
    }
    else
        return undefined;
};

SiteFunctions.Set_Element_Value = function (ItemID, Value, Widget) {
    if (Widget.GetHTMLElement(ItemID).is("select")) {
        Widget.GetHTMLElement(ItemID).val(Value);
    }
    else if (Widget.GetHTMLElement(ItemID).is("input")) {
        if (Widget.GetHTMLElement(ItemID).attr('type') === 'text') {
            Widget.GetHTMLElement(ItemID).val(Value);
        }
        else if (Widget.GetHTMLElement(ItemID).attr('type') === 'radio') {
            var name = Widget.GetHTMLElement(ItemID).attr('name');
            var Selector = "input:radio[name='" + name + "'][value ='" + Value + "']";
            Widget.GetHTMLElement(Selector).prop('checked', true);
        }
    }
};

SiteFunctions.GetGenderTypeFromNationalID = function (NationalID) {
    if (NationalID[12] % 2 === 0) {
        return 'f';
    }
    else {
        return 'm';
    }
};

SiteFunctions.GetBirthdayFromNationalID = function (NationalID) {
    var year, month, day;
    if (NationalID[0] == 2) {
        year = "19" + NationalID[1] + NationalID[2];
    }
    else if (NationalID[0] == 3) {
        year = "20" + NationalID[1] + NationalID[2];
    }
    month = NationalID[3] + "" + NationalID[4];
    day = NationalID[5] + "" + NationalID[6];


    return year + "-" + month + "-" + day;
};

SiteFunctions.logreg = function (evt, cityName) {
    var i, hrtab, tablinks;
    hrtab = document.getElementsByClassName("hr-tab");
    for (i = 0; i < hrtab.length; i++) {
        hrtab[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("hrtablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(cityName).style.display = "block";
};

SiteFunctions.GoToHome = function () {
    ExecutePortalEvent("LoadSubPage_Home");
};

SiteFunctions.ValidateUserNameAndPassword = function (UserNameID, PasswordID) {
    var isPasswordAndUserNameMatched = false;
    var UserName;
    var Password;
    UserName = '#' + UserNameID;
    Password = '#' + PasswordID;
    UserName = $(UserName).text();
    Password = $(Password).val();
    UserName = UserName.toLowerCase();
    Password = Password.toLowerCase();

    if (Password.search(UserName)) {
        isPasswordAndUserNameMatched = true;
        return true;
    } else {
        this.HandleErrorMessage(isPasswordAndUserNameMatched, 'Empty');
        return false;
    }
};

SiteFunctions.ValidateRegisterationUserNameAndPassword = function (UserNameID, PasswordID) {
    var isPasswordAndUserNameMatched = false;
    var UserName;
    var Password;
    UserName = '#' + UserNameID;
    Password = '#' + PasswordID;
    UserName = $(UserName).val();
    Password = $(Password).val();
    UserName = UserName.toLowerCase();
    Password = Password.toLowerCase();

    if (Password.search(UserName) || UserName == '' || Password == '') {
        isPasswordAndUserNameMatched = true;
        return true;
    } else {
        this.HandleErrorMessage(isPasswordAndUserNameMatched, 'Empty');
        return false;
    }
};

SiteFunctions.HandleBingingObj = function (BindingData) {
    if (BindingData && BindingData.length > 0) {
        for (var i = 0; i < BindingData.length; i++) {
            for (var Prop in BindingData[i]) {
                if (Prop.match("_EN$")) {
                    var LangObj = Prop.slice(0, -3);
                    if (BindingData[i].hasOwnProperty(LangObj + '_AR')) {
                        if (config.AppLangID == 'EN')
                            BindingData[i][LangObj] = BindingData[i][LangObj + '_EN'];
                        else
                            BindingData[i][LangObj] = BindingData[i][LangObj + '_AR'];
                    }
                }
            }
        }
    }

    return BindingData;
};

SiteFunctions.AppendSelectOptions = function (Element, Source, Text, Value, DefaultItem_EN, DefaultItem_AR) {
    $(Element).empty();
    var Template = "<option value='#OptionValue#' Index='#Index#'>#OptionText#</option>";
    var Options = "";
    if (config.AppLangID == 'EN')
        Options = "<option value='0' Index=''>" + DefaultItem_EN + "</option>";
    else
        Options = "<option value='0' Index=''>" + DefaultItem_AR + "</option>";

    if (Source) {
        for (var i = 0; i < Source.length; i++) {
            var OptionTemplate = Template;

            if (config.AppLangID == 'EN')
                OptionTemplate = OptionTemplate.replace("#OptionText#", Source[i][Text]);
            else
                OptionTemplate = OptionTemplate.replace("#OptionText#", Source[i][Text.replace('_EN', '_AR')]);

            OptionTemplate = OptionTemplate.replace("#Index#", Source[i].Index ? Source[i].Index : '');
            OptionTemplate = OptionTemplate.replace("#OptionValue#", Source[i][Value]);

            Options += OptionTemplate;
        }
    }
    Element.find('option').remove().end().append(Options);
}

SiteFunctions.AppendCheckBoxSelectedOptions = function (Element, Source, Text, Value, DefaultItem_EN, DefaultItem_AR) {
    var template = "<label class='radio mob-6'><input type='checkbox' id='#ServiceID#' name='#ServiceName#' value='#CheckBoxValue#'>#CheckBoxText#</label>";
    var CheckBoxes = "";

    for (var i = 0; i < Source.length; i++) {
        var CheckBoxTemplate = template;

        if (config.AppLangID == 'EN')
            CheckBoxTemplate = CheckBoxTemplate.replace("#CheckBoxText#", Source[i][Text]);
        else
            CheckBoxTemplate = CheckBoxTemplate.replace("#CheckBoxText#", Source[i][Text.replace('_EN', '_AR')]);

        CheckBoxTemplate = CheckBoxTemplate.replace("#ServiceID#", Source[i].Index ? Source[i].Index : '');
        CheckBoxTemplate = CheckBoxTemplate.replace("#CheckBoxValue#", Source[i][Value]);
        CheckBoxTemplate = CheckBoxTemplate.replace("#ServiceClass#", "spanATMBranchGetDataServices");
        CheckBoxTemplate = CheckBoxTemplate.replace("#ServiceName#", "ServicesName");

        CheckBoxes += CheckBoxTemplate;
    }
    Element.find('label').remove().end().append(CheckBoxes);
}

SiteFunctions.ValidatePassport = function (Passport) {
    if (Passport == Passport.match(/([A-Za-z])+[0-9]{8}/g)) {
        return true;
    }
    return false;
};

SiteFunctions.ValidateMobileNumber = function (MobileNumber) {
    if (MobileNumber[0] == "0" && MobileNumber[1] == '1') {
        return true;
    }
    return false;
}

SiteFunctions.ValidateOutSideMobileNumber = function (MobileNumber) {
    if (MobileNumber[0] == "+" && MobileNumber[1] == "0" && (MobileNumber[2] == '2' || MobileNumber[2] == '9')) {
        return false;
    } else if (MobileNumber[0] == "0" && MobileNumber[1] == "0" && (MobileNumber[2] == '2' || MobileNumber[2] == '9')) {
        return true
    } else if (MobileNumber[0] == "+" && (MobileNumber[1] == '2' || MobileNumber[1] == '9')) {
        return true
    }
}

SiteFunctions.ValidatePhoneNumber = function (PhoneNumber) {
    if (PhoneNumber[0] == "0" && (PhoneNumber[1] != "1" || PhoneNumber[1] != "0")) {
        return true;
    }
    return false;
}

SiteFunctions.ValidateOutSidePhoneNumber = function (PhoneNumber) {
    if (PhoneNumber[0] == "0" || PhoneNumber[0] == "+") {
        return true;
    }
    return false;
}

SiteFunctions.FormatBalance = function (BalanceAmount) {
    BalanceAmount = parseFloat(BalanceAmount);
    if (BalanceAmount >= 0) {
        return BalanceAmount.toFixed(2).replace(/./g, function (c, i, a) {
            return i > 0 && c !== "." && (a.length - i) % 3 === 0 ? "," + c : c;
        });
    }
    else {
        BalanceAmount = BalanceAmount * -1;

        return "-" + BalanceAmount.toFixed(2).replace(/./g, function (c, i, a) {
            return i > 0 && c !== "." && (a.length - i) % 3 === 0 ? "," + c : c;
        });
    }
}

SiteFunctions.ValidateDate = function (DateList) {
    var CurrentDate;
    if (SiteConstants && SiteConstants.InitData && SiteConstants.InitData.ServerDateTime) {
        CurrentDate = new Date(SiteConstants.InitData.ServerDateTime);
    }
    else {
        CurrentDate = new Date();
    }
    if (DateList && DateList[0] && DateList[1]) {
        var BaseDate = $(DateList[0]).val();
        var ChildDate = $(DateList[1]).val();
        if (config.AppLangID == "EN") {
            if (BaseDate.search('-') > 0)
                BaseDate = BaseDate.split('-');
            else
                BaseDate = BaseDate.split('/');
            BaseDate = new Date(BaseDate[2] + '/' + BaseDate[1] + '/' + BaseDate[0]);
            if (ChildDate.search('-') > 0)
                ChildDate = ChildDate.split('-');
            else
                ChildDate = ChildDate.split('/');
            ChildDate = new Date(ChildDate[2] + '/' + ChildDate[1] + '/' + ChildDate[0]);
        } else {
            if (BaseDate.search('-') > 0)
                BaseDate = BaseDate.split('-');
            else
                BaseDate = BaseDate.split('/');
            BaseDate = new Date(BaseDate[0] + '/' + BaseDate[1] + '/' + BaseDate[2]);
            if (ChildDate.search('-') > 0)
                ChildDate = ChildDate.split('-');
            else
                ChildDate = ChildDate.split('/');
            ChildDate = new Date(ChildDate[0] + '/' + ChildDate[1] + '/' + ChildDate[2]);
        }
        if (ChildDate <= BaseDate || ChildDate >= CurrentDate) {
            return false;
        }
        return true;
    }
    return false;
};

SiteFunctions.ValidateDateIfGreaterThanCurrentDate = function (DateToValidate, ID) {
    var CurrentDate = new Date();
    var MyDay = DateToValidate;
    if (config.AppLangID == "EN") {
        MyDay = MyDay.split('-');
        MyDay = new Date(MyDay[2] + '/' + MyDay[1] + '/' + MyDay[0]);
    } else {
        MyDay = MyDay.split('-');
        MyDay = new Date(MyDay[0] + '/' + MyDay[1] + '/' + MyDay[2]);
    }
    //CurrentDate = (CurrentDate.toLocaleDateString()).split("/")[1] + "/" + (CurrentDate.toLocaleDateString()).split("/")[0] + "/" + (CurrentDate.toLocaleDateString()).split("/")[2];
    if (MyDay >= CurrentDate) {
        SiteFunctions.HandleErrorMessage(ID, 'NotValid');
        return false;
    }
    else {
        this.RemoveErrorValidations([ID]);
        return true;
    }
}

SiteFunctions.ValidateIfFirstDateBiggerThanSecond = function (FirstDate, SecondDate) {

    if (FirstDate && SecondDate) {
        var Date1 = new Date(FirstDate);
        var Date2 = new Date(SecondDate);
        if (Date1 && Date2) {
            if (Date1 > Date2) {
                return true;
            }
        }
    }
    return false;
};

SiteFunctions.ValidateObject = function (Object, ElementID) {
    if (Object && Object.length > 0) {
        this.RemoveErrorValidations([ElementID]);
        return true;
    }
    this.HandleErrorMessage(ElementID, 'Empty');
    return false;
}

SiteFunctions.ValidateHRObject = function (Object, ElementID) {
    if (Object && Object.UniversityNameId) {
        this.RemoveErrorValidations([ElementID]);
        return true;
    }
    this.HandleErrorMessage(ElementID, 'Empty');
    return false;
}

SiteFunctions.Encrypt = function (StringToEncrypt) {

    var hash = CryptoJS.SHA512(StringToEncrypt);
    var hexhash = hash.toString(CryptoJS.enc.hex);
    //var encrypted = CryptoJS.AES.encrypt(StringToEncrypt, SiteConstants.Encrypt_Decrypt_Key, { iv: SiteConstants.iv });
    return hexhash;
}

SiteFunctions.Decrypt = function (StringToDecrypt) {
    var decrypted = (CryptoJS.AES.decrypt(StringToDecrypt, SiteConstants.Encrypt_Decrypt_Key), { iv: SiteConstants.iv }).toString(CryptoJS.enc.Utf8);
    return decrypted;
}

SiteFunctions.checkMail = function (ItemID) {
    ItemID = '#' + Id;
    $(ItemID).val($(ItemID).val().trim());
    if ($(ItemID).val().toLowerCase() !=
        $(ItemID).val().toLowerCase().match(
            '(?:[a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*|"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*")@(?![A-Za-z0-9_\-\.]+\.com\.com)([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/')
    ) {
        this.HandleErrorMessage(ItemID, 'NotValid');
        return false;
    }
};

SiteFunctions.SetLoggedInCustomerFavoritesData = function (Url) {
    var CustomerLoginData = SiteFunctions.GetLocalStorage('LoginData');
    if (CustomerLoginData.FavouritePage == null)
        CustomerLoginData.FavouritePage = [];

    var favouriteList = {
        'PageURL': Url, 'PageTitle': $(document).find("title").text()
    }
    CustomerLoginData.FavouritePage.push(favouriteList);
    SiteFunctions.SetLocalStorage('LoginData', CustomerLoginData);
}

SiteFunctions.ResetInputsValue = function (InputIDs) {
    var IDs = InputIDs.split(',');
    for (var i = 0; i < IDs.length; i++) {
        var InputType = $(IDs[i]).attr('type');

        if (InputType == "text") {
            $(IDs[i]).val('');
        }
        else if ($(IDs[i]).is("select")) {
            $(IDs[i + "option:nth-child(1)"]).prop('selected', 'selected');
        }
        else if (InputType === "checkbox") {
            $(IDs[i]).prop('checked', false);
        }
        else if (InputType === "radio") {
            $(IDs[i]).prop('checked', false);
        }
    }
};

SiteFunctions.CheckIfProductRatedByCustomer = function (ProductID) {
    // Code To Check If Product exists
    if (this.GetLocalStorage('CustomerRatedProducts')) {
        var CustomerRatedProductsValue = this.GetLocalStorage('CustomerRatedProducts');
        for (var i = 0; i < CustomerRatedProductsValue.length; i++) {
            if (CustomerRatedProductsValue[i] == ProductID)
                return false;
        }
    }
    return true;
};

SiteFunctions.CheckInternetConnection = function () {
    if (navigator.onLine == false) {
        jAlert(config.AppLangID == 'EN' ? 'Please check your internet connection' : 'برجاء التحقق من خدمة الإنترنت لديك', config.AppLangID == 'EN' ? 'Information' : 'معلومات', "", config.AppLangID == 'EN' ? 'OK' : 'موافق');
        return false;
    }
}

SiteFunctions.RedirectURL = function (PageLink) {
    var url = location.href;
    url = url.split('/');
    var CallBackIndex = url.indexOf("CallBack");
    url.length = CallBackIndex;
    url.push(PageLink);
    url = url.join('/');
    window.open(url, "_self");
}

SiteFunctions.ScrollToElement = function (ElementID) {
    var elementOffset = $('#' + ElementID).offset().top;
    var windowHeight = $(window).height();
    $(window).scrollTop(elementOffset - (windowHeight / 2));
    $('html, body').animate({
        scrollTop: elementOffset - (windowHeight / 2)
    }, 'slow');
}
// Landing search 
SiteFunctions.ScrollToSpecificElement = function (ElementID) {
    $(document).ready(function () {
        $('html, body').animate({
            scrollTop: $("#" + ElementID).offset().top
        }, 1000);
    });
}
//by karim
SiteFunctions.ScrollToElementByClassName = function (DivID, ElementID) {
    var container = $(DivID);
    var scrollTo = $(ElementID);
    container.animate({
        scrollTop: scrollTo.offset().top - container.offset().top + container.scrollTop()
    });
}
//by karim
SiteFunctions.CalcAge = function (BirthDate) {
    var BD = new Date(BirthDate);
    var Today = new Date();
    return Math.floor((Today - BD) / (365.25 * 24 * 60 * 60 * 1000));
}

SiteFunctions.HandleFontSize = function (ID) {
    var textLen = $(ID).val().length;
    //alert(textLen);
    if (textLen > 0 && textLen <= 5) {
        $(ID).css('font-size', '35px');
        $(ID).css('font-size', '32px');
    }
    else if (textLen > 5 && textLen <= 10) {
        $(ID).css('font-size', '20px');
        $(ID).css('font-size', '18px');
    }
    else if (textLen > 10 && textLen <= 15) {
        $(ID).css('font-size', '12px');
        $(ID).css('font-size', '10px');
    }
    else if (textLen < 5 && textLen > 0) {
        $(ID).css('font-size', '35px');
        $(ID).css('font-size', '32px');
    }
    else if (textLen == 0) {
        $(ID).css('font-size', '20px');
        $(ID).css('font-size', '35px');
    }
}

SiteFunctions.ToFixedWithoutRounding = function (num, fixed) {
    var re = new RegExp('^-?\\d+(?:\.\\d{0,' + (fixed || -1) + '})?');
    return num.toString().match(re)[0];
}

// added to handle firing href on IE
SiteFunctions.OpenHref = function (URL) {
    window.location.href = URL;
    if (SiteFunctions.IsIE()) {
        onpopstate();
    }
}

SiteFunctions.IsIE = function () {
    var UserAgent = navigator.userAgent, tem,
        Match = UserAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
    if (/trident/i.test(Match[1])) {
        return true;
    }
    else
        return false;
}

SiteFunctions.SetBrowserTitle = function (Title_EN, Title_AR) {
    setTimeout(function () {
        if (config.AppLangID == "EN")
            $(document).find("title").text("National Bank of Egypt - " + Title_EN);
        else
            $(document).find("title").text("البنك الأهلى المصرى - " + Title_AR);
    }, 500);
}

SiteFunctions.GetLocalStorage = function (Key) {
    if (localStorage.PersistentData && JSON.parse(localStorage.PersistentData)[Key])
        return JSON.parse(localStorage.PersistentData)[Key];
    else
        return undefined;
}

SiteFunctions.SetLocalStorage = function (Key, Value) {
    var Data = {};
    if (localStorage.PersistentData)
        Data = JSON.parse(localStorage.PersistentData);

    Data[Key] = Value;

    localStorage.PersistentData = JSON.stringify(Data);
}

SiteFunctions.RemoveLocalStorage = function (Key) {
    var Data = {};
    if (localStorage.PersistentData)
        Data = JSON.parse(localStorage.PersistentData);

    Data[Key] = undefined;

    localStorage.PersistentData = JSON.stringify(Data);
}

// Variable to count the length of the text area characters 
this.lenlength = null;
SiteFunctions.TextAreaCounter = function (textlength, Id) {
    lenlength = $(Id).val().length == 0 ? textlength : lenlength;
    //if ($('#counter').text() == "")
    $("#counter").text(config.AppLangID == "EN" ? " Up to " + textlength + " Character " : " متبقي " + textlength + " حرف ");
    $(Id).on('input paste', function (e) {
        if ($(Id).val().length > textlength) {
            $(Id).val($(Id).val().substr(0, textlength));
        }
        else {
            var value = $(Id).val();
            var CurrentChar;
            var CurrentIndex = this.selectionStart - 1;
            var PrevIndex = this.selectionStart - 2;
            CurrentChar = this.value.substr(CurrentIndex, 1);
            PrevChar = this.value.substr(PrevIndex, 1);
            if (config.AppLangID == "EN") {
                if (e.type == 'paste') {
                    e.preventDefault();
                }
                else {
                    if (/[a-zA-Z0-9\n\s|\',]/.test(CurrentChar) || value == "") {
                        SiteFunctions.RemoveErrorValidations([Id]);
                        len = textlength - value.length;
                        var lbltext = $('span[id="counter"]').html();
                        lenlength = lenlength == null ? textlength : lenlength;
                        if (len >= 0 && len <= 500) {
                            $('span[id="counter"]').html(lbltext.replace(lenlength, len));
                            lenlength = len;
                        }
                    }
                    else {
                        SiteFunctions.HandleValueValidation(value, Id, /[^A-Za-z 0-9\n\s|\' ,]/);
                        SiteFunctions.HandleErrorMessage(Id, 'Letters-Numbers');
                    }
                }

            }
            else {
                if (e.type == 'paste') {
                    e.preventDefault();
                }
                else {
                    if (/[\u0621-\u064A\u0660-\u0669\s\n0-9 ٠-٩|\',]/.test(CurrentChar) || value == "") {
                        SiteFunctions.RemoveErrorValidations([Id]);
                        len = textlength - value.length;
                        lenlength = lenlength == null ? textlength : lenlength;
                        var lbltext = $('span[id="counter"]').html();
                        if (len >= 0 && len <= 500) {
                            $('span[id="counter"]').html(lbltext.replace(lenlength, len));
                            lenlength = len;
                        }
                        else {
                            $(Id).attr('maxlength', '500');
                            for (var i = 0; i < value.length; i++) {
                                var LimitedValue = value.replace(CurrentChar, '');
                                $(Id).val(LimitedValue);
                            }
                        }

                    }
                    else {
                        SiteFunctions.HandleValueValidation(value, Id, /[^0-9ء-ي٠-٩]/);
                        SiteFunctions.HandleErrorMessage(Id, 'Arabic-Numbers');

                    }
                }
            }


        }
    });
};

SiteFunctions.ShowPopup = function (popupParams) {
    if (!$('body').hasClass('overflow-hidden')) {
        var PopupTemplate = '<div class="add-feature-popup popup-hide" id="divAppPopup">' +
            '<div class="color-overlay popup-hide"></div>' +
            '<div class="popup-contents">' +
            '<div class="small-popup">' +
            '<div class="page-content">' +
            '<div class="page-title">' +
            '<h3 class="gold-bg-1" id="h3AppPopupTitle">#Title#</h3>' +
            '</div>' +
            '<div class="popup-status-icon">' +
            '<img class="#ImageVisibility#" src="#PopUpImagePath#" alt="">' +
            '</div>' +
            '<div>' +
            '<div class="page">' +
            '<h4 id="h4AppPopupMessage">#Message#</h4>' +
            '</div>' +
            '<div class="page-footer">' +
            '<button class="save-popup bg_secondary btn-second gold-bg-1 #btnVisibility1#" id="btnAppPopup1">#ButtonText1#</button>' +
            '<button class="save-popup bg_secondary btn-second gold-bg-1 #btnVisibility2#" id="btnAppPopup2">#ButtonText2#</button>' +
            '<button class="save-popup bg_secondary btn-second gold-bg-1 #btnVisibility3#" id="btnAppPopup3">#ButtonText3#</button>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>' +
            '</div>'

        PopupTemplate = PopupTemplate.replace('#Title#', popupParams.Title);
        PopupTemplate = PopupTemplate.replace('#Message#', popupParams.Message);

        var BindButton1, BindButton2, BindButton3 = false;
        if (popupParams.ButtonText1 && popupParams.Button1Action) {
            BindButton1 = true;
            PopupTemplate = PopupTemplate.replace('#ButtonText1#', popupParams.ButtonText1);
            PopupTemplate = PopupTemplate.replace('#btnVisibility1#', '');
        }
        else
            PopupTemplate = PopupTemplate.replace('#btnVisibility1#', 'HideElement');

        if (popupParams.ButtonText2 && popupParams.Button2Action) {
            BindButton2 = true;
            PopupTemplate = PopupTemplate.replace('#ButtonText2#', popupParams.ButtonText2);
            PopupTemplate = PopupTemplate.replace('#btnVisibility2#', '');
        }
        else
            PopupTemplate = PopupTemplate.replace('#btnVisibility2#', 'HideElement');

        if (popupParams.ButtonText3 && popupParams.Button3Action) {
            BindButton3 = true;
            PopupTemplate = PopupTemplate.replace('#ButtonText3#', popupParams.ButtonText3);
            PopupTemplate = PopupTemplate.replace('#btnVisibility3#', '');
        }
        else
            PopupTemplate = PopupTemplate.replace('#btnVisibility3#', 'HideElement');

        if (popupParams.PopUpImagePath) {
            PopupTemplate = PopupTemplate.replace('#PopUpImagePath#', popupParams.PopUpImagePath);
            PopupTemplate = PopupTemplate.replace('#ImageVisibility#', '');
        }
        else
            PopupTemplate = PopupTemplate.replace('#ImageVisibility#', 'HideElement');

        //SiteFunctions.HidePopup();
        setTimeout(function () {
            if (!$('body').hasClass('overflow-hidden')) {
                $("body").append(PopupTemplate);
                $('body').addClass('overflow-hidden');
                if (BindButton1) {
                    $("#btnAppPopup1").on('click', popupParams.Button1Action);
                    if (popupParams.Button1IsDisabled)
                        $("#btnAppPopup1").attr('disabled', popupParams.Button1IsDisabled);
                }

                if (BindButton2) {
                    $("#btnAppPopup2").on('click', popupParams.Button2Action);
                    if (popupParams.Button1IsDisabled)
                        $("#btnAppPopup2").attr('disabled', popupParams.Button2IsDisabled);
                }

                if (BindButton3) {
                    $("#btnAppPopup3").on('click', popupParams.Button3Action);
                    if (popupParams.Button1IsDisabled)
                        $("#btnAppPopup3").attr('disabled', popupParams.Button3IsDisabled);
                }

                if (popupParams.AutoHide)
                    setTimeout(SiteFunctions.HidePopup, popupParams.AutoHidePeriod);
            }
        }, 500);
    }
}

SiteFunctions.HidePopup = function () {
    $.when($('#divAppPopup').fadeOut()).done(function () { $("#divAppPopup").remove(); });
    $('body').removeClass('overflow-hidden');
}

SiteFunctions.DownloadFiles = function (URL, FileName) {
    var link = document.createElement('a');
    link.setAttribute('href', URL);
    link.setAttribute('download', FileName);
    link.style.display = 'none';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
};

SiteFunctions.HandleDDLPlaceholder = function () {
    var selectTags = $('select');

    for (var i = 0; i < selectTags.length; i++) {
        if (!$(selectTags[i]).hasClass('no-placeholder'))
            $(selectTags[i]).addClass('placeholder-color');
    }

    for (var i = 0; i < selectTags.length; i++) {

        if (!$(selectTags[i]).hasClass('no-placeholder')) {
            $(selectTags[i]).on("change", function (e) {
                if ($(e.currentTarget).val() != '0')
                    $(e.currentTarget).removeClass("placeholder-color");
                else
                    $(e.currentTarget).addClass("placeholder-color");
            });
        }
    }
}

SiteFunctions.HandleValueValidation = function (Value, ID, Regex) {
    for (var i = 0; i < Value.length; i++) {
        if (Regex.test(Value[i])) {
            NewVal = $(ID).val().replace(Value[i], '');
            $(ID).val(NewVal);
        }
    }
}

SiteFunctions.HandleInputDisclaimer = function (ElementID, ContentEN, ContentAR) {
    $(ElementID).parent().find('.input-validation').remove();
    $(ElementID).parent().find('.disclaimer').remove();
    $(ElementID).parent().find('.errorValidation').remove();
    if (config.AppLangID == 'EN')
        $(ElementID).after('<span class="disclaimer">' + ContentEN + '</span>');
    else
        $(ElementID).after('<span class="disclaimer">' + ContentAR + '</span>');
}

SiteFunctions.CheckValueSegment = function (ElementID, segment) {
    $('#' + ElementID).on('blur', function () {
        var Id = '#' + ElementID;
        var Value = $(Id).val();
        var Segment = segment <= 1 ? 1 : segment - 1;
        var customeRegex = new RegExp('([A-Za-z]+\\s+[A-Za-z]){' + Segment + ',}|([\\u0600-\\u06FF]+\\s+[\\u0600-\\u06FF]){' + Segment + ',}', "g");
        if (customeRegex.test(Value) || Value == '') {
            SiteConstants.IsThree = true;
        }
        else {
            SiteFunctions.HandleErrorMessage(Id, 'Customer-Name');
            SiteConstants.IsThree = false;
        }
        return SiteConstants.IsThree;
    });
};

SiteFunctions.SubmitCheckValueSegment = function (ElementID, segment) {
    var Id = '#' + ElementID;
    var Value = $(Id).val();
    var Segment = segment <= 1 ? 1 : segment - 1;
    var customeRegex = new RegExp('([A-Za-z]+\\s+[A-Za-z]){' + Segment + ',}|([\\u0600-\\u06FF]+\\s+[\\u0600-\\u06FF]){' + Segment + ',}', "g");
    if (customeRegex.test(Value) || Value == '') {
        return true;
    }
    else {
        SiteFunctions.HandleErrorMessage(Id, 'Customer-Name');
        return false;

    }
};

SiteFunctions.FinalProductBreadCrumb = function (ProductName_EN, ProductName_AR) {

    if (SiteConstants.BreadCrumbs.PCModuleTitle_EN) {
        SiteFunctions.SetLocalStorage("BreadCrumbs", SiteConstants.BreadCrumbs);
    }
    else {
        SiteConstants.BreadCrumbs = SiteFunctions.GetLocalStorage("BreadCrumbs");
    }
    var TempEN = SiteConstants.BreadCrumbs.PCModuleTitle_EN;
    TempEN = TempEN.split("#$#");
    var TempAR = SiteConstants.BreadCrumbs.PCModuleTitle_AR;
    TempAR = TempAR.split("#$#");
    // to handle breadcrumbs
    if (SiteConstants.BreadCrumbs.PCModuleTitle_EN && TempEN[0] != TempEN[1]) {
        SiteConstants.BreadCrumbs.ModuleTitle_EN = SiteConstants.BreadCrumbs.PCModuleTitle_EN;
        SiteConstants.BreadCrumbs.ModuleTitle_AR = SiteConstants.BreadCrumbs.PCModuleTitle_AR;
        SiteConstants.BreadCrumbs.ModuleLink = SiteConstants.BreadCrumbs.PCModuleLink;
        SiteConstants.BreadCrumbs.ItemLink = SiteConstants.BreadCrumbs.PCItemLink;
        SiteConstants.BreadCrumbs.ItemTitle_EN = ProductName_EN;
        SiteConstants.BreadCrumbs.ItemTitle_AR = ProductName_AR;
        AppLayoutBreadCrumbs.prototype.HandleBreadCrumbs(SiteConstants.BreadCrumbs);
    }
    else {
        SiteConstants.BreadCrumbs.ModuleTitle_EN = TempEN[0];
        SiteConstants.BreadCrumbs.ModuleTitle_AR = TempAR[0];
        SiteConstants.BreadCrumbs.ModuleLink = SiteConstants.BreadCrumbs.PCModuleLink;
        SiteConstants.BreadCrumbs.ItemLink = SiteConstants.BreadCrumbs.PCItemLink;
        SiteConstants.BreadCrumbs.ItemTitle_EN = ProductName_EN;
        SiteConstants.BreadCrumbs.ItemTitle_AR = ProductName_AR;
        AppLayoutBreadCrumbs.prototype.HandleBreadCrumbs(SiteConstants.BreadCrumbs);
    }
    SiteConstants.AppLayoutBreadCrumbsStatus2 = false;
};

SiteFunctions.parseArabic = function (str) {
    return String(str.replace(/[٠١٢٣٤٥٦٧٨٩]/g, function (d) {
        return d.charCodeAt(0) - 1632; // Convert Arabic numbers
    }));
}

SiteFunctions.HandleBackBtnAndroid = function (event) {
    if (CurrentSubPageID == 'Home') {
        var popupParams = {
            Title_EN: 'Warning',
            Title_AR: 'تنبية',
            Message_EN: 'Are you sure you want to Exit ?',
            Message_AR: 'هل تريد الخروج ؟',
            ButtonText1_EN: 'Confirm',
            ButtonText1_AR: 'تأكيد',
            ButtonText2_EN: 'Cancel',
            ButtonText2_AR: 'إلغاء',
            Button1Action: function () { SiteFunctions.applyPhysicalBackButton(); SiteFunctions.HidePopup(); },
            Button2Action: function () { SiteFunctions.HidePopup(); HideSpinner(); }
        };
        SiteFunctions.ShowPopup(popupParams);
    } else {
        window.history.go(-1);
    }
}

SiteFunctions.applyPhysicalBackButton = function (event) {
    window.location = "callnative:Exit";
}

SiteFunctions.ObserveData = function (data) {
    var isEN = config.AppLangID == 'EN' ? true : false;
    var Data = [];
    $.each(data, function (i, obj) {
        var _object = {};
        $.each(obj, function (prop) {
            var NewProp = isEN ? prop.replace('_EN', '') : prop.replace('_AR', '');
            _object[NewProp] = ko.observable(obj[prop]);
            _object['visiblity'] = ko.observable(false);
        });

        _object.Index = ko.observable(i + 1);
        Data.push(_object)
    });
    return Data;
}

SiteFunctions.GetDifferenceBetweenTwoDates = function (DatesList) {
    DateList = DatesList.split(",")
    if (DateList && DateList[0] && DateList[1]) {
        var date1 = $(DateList[0]).val();
        var date2 = $(DateList[1]).val();
        if (config.AppLangID == "EN") {
            if (date1.search('-') > 0)
                date1 = date1.split('-');
            else
                date1 = date1.split('/');
            date1 = new Date(date1[2] + '/' + date1[1] + '/' + date1[0]);
            if (date2.search('-') > 0)
                date2 = date2.split('-');
            else
                date2 = date2.split('/');
            date2 = new Date(date2[2] + '/' + date2[1] + '/' + date2[0]);
        } else {
            if (date1.search('-') > 0)
                date1 = date1.split('-');
            else
                date1 = date1.split('/');
            date1 = new Date(date1[0] + '/' + date1[1] + '/' + date1[2]);
            if (date2.search('-') > 0)
                date2 = date2.split('-');
            else
                date2 = date2.split('/');
            date2 = new Date(date2[0] + '/' + date2[1] + '/' + date2[2]);
        }
        var timeDiff = Math.abs(date2.getTime() - date1.getTime());
        var diffDays = Math.ceil(timeDiff / (1000 * 3600 * 24));
        return diffDays;
    }
}

SiteFunctions.SetButtonTimer = function (Time, ID, Text_EN, Text_AR) {
    SiteConstants.Timer = Time;
    TimeInterval = setInterval(function () {
        if (SiteConstants.Timer != -1) {
            if (config.AppLangID == "EN")
                $(ID).text(SiteConstants.Timer + " to " + Text_EN);
            else
                $(ID).text(SiteConstants.Timer + " حتي " + Text_AR);

            SiteConstants.Timer--;
        } else {
            if (config.AppLangID == "EN")
                $(ID).text(Text_EN);
            else
                $(ID).text(Text_AR);

            $(ID).attr('disabled', false);
            clearInterval(TimeInterval);
        }
    }, 1000);
}

</script>

</body>
</html>
