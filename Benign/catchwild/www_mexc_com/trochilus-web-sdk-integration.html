<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>trochilus-web-sdk-integration.html</title>
</head>
<body>

<script>
(function(){"use strict";var __accessCheck=(t,r,n)=>{if(!r.has(t))throw TypeError("Cannot "+n)},__privateGet=(t,r,n)=>(__accessCheck(t,r,"read from private field"),n?n.call(t):r.get(t)),__privateAdd=(t,r,n)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,n)},__privateSet=(t,r,n,a)=>(__accessCheck(t,r,"write to private field"),a?a.call(t,n):r.set(t,n),n),__privateWrapper=(t,r,n,a)=>({set _(s){__privateSet(t,r,s,n)},get _(){return __privateGet(t,r,a)}}),_id,_max,_activeCallbacks,_deactiveCallbacks,_dynamicId,_previousDynamicId,_broadcastChannel;const description="trochilus.javascript",version="1.3.13",TRACE_ID_HEADER_KEY="trochilus-trace-id",UID_HEADER_KEY="trochilus-uid",INDEXED_DB_NAME=description,INDEXED_DB_VERSION=5,INDEXED_DB_STORE_NAME="data-items",INDEXED_DB_DATA_INDEX_KEY="_index_",EXPIRED_DATA_COUNT_STORAGE_KEY="trochilus-expired-data-count",DATA_EXPIRATION_DAYS=3,TRANSMITION_COUNT_LIMIT=100,TRANSMITION_INTERVAL=1e3,GETTING_RESOURCE_TIMING_ENTRY_LIST_RETRY_DELAY=300,DEFAULT_RESOURCE_TIMING_BUFFER_SIZE=1e3,CLEARING_RESOURCE_TIMING_BUFFER_DELAY=600,MAX_REQUEST_START_TIME_AND_RESOURCE_TIMING_ENTRY_START_TIME_DIFF=1e3,SYNCHRONIZER_MAX_TIME_DIFF=3e3,CDN_CACHE_HEADER_KEYS=["x-cache","cf-cache-status"],AKAMAI_CACHE_HEADER=["Pragma","akamai-x-cache-on"],PROCESS_BROADCAST_CHANNEL_NAME="trochilus-process-broadcast-channel",SYNC_BROADCAST_CHANNEL_NAME="trochilus-sync-broadcast-channel";let config=null;const getConfig=()=>config,setConfig=t=>{config=t},getUid=()=>{if(config!=null&&config.uid)if(typeof config.uid=="function"){const t=config.uid();return t?t.toString():""}else return config.uid.toString();else return""},apiFilterCheck=t=>{var r;const n=getConfig(),a=(r=n==null?void 0:n.filters)==null?void 0:r.api;return!!n&&(!a||a(t))},defaultCDNCacheHitIndicator=t=>{for(const r of CDN_CACHE_HEADER_KEYS)try{const n=t?t.get instanceof Function?t.get(r):t[r]:null;if(n)return(n==null?void 0:n.toLowerCase().indexOf("hit"))!==-1;continue}catch(n){continue}return!1},defaultResourceTimingBufferConfig={size:DEFAULT_RESOURCE_TIMING_BUFFER_SIZE,clear:!0},getResourceTimingBufferConfig=()=>{const t=getConfig();return t!=null&&t.resourceTimingBuffer?{...defaultResourceTimingBufferConfig,...t.resourceTimingBuffer}:defaultResourceTimingBufferConfig},uuid=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.random()*16|0;return(t==="x"?r:r&3|8).toString(16)}),dateNow=Date.now(),getTimeOrigin=t=>(t||window).performance.timeOrigin||dateNow,withOrigin=(t,r)=>t<31536e6?getTimeOrigin(r)+t:t;var now=()=>performance.now?withOrigin(performance.now()):Date.now?Date.now():new Date().getTime();const getBasicItemData=t=>({type:t,id:uuid(),origin:window.location.href,timestamp:now()}),extractRequestTimestamps=t=>({startTime:t.startTime?withOrigin(t.startTime):0,redirectStart:t.redirectStart?withOrigin(t.redirectStart):0,redirectEnd:t.redirectEnd?withOrigin(t.redirectEnd):0,fetchStart:t.fetchStart?withOrigin(t.fetchStart):0,domainLookupStart:t.domainLookupStart?withOrigin(t.domainLookupStart):0,domainLookupEnd:t.domainLookupEnd?withOrigin(t.domainLookupEnd):0,connectStart:t.connectStart?withOrigin(t.connectStart):0,connectEnd:t.connectEnd?withOrigin(t.connectEnd):0,secureConnectionStart:t.secureConnectionStart?withOrigin(t.secureConnectionStart):0,requestStart:t.requestStart?withOrigin(t.requestStart):0,responseStart:t.responseStart?withOrigin(t.responseStart):0,responseEnd:t.responseEnd?withOrigin(t.responseEnd):0}),getEmptyRequestTimestamps=t=>({startTime:t,redirectStart:0,redirectEnd:0,fetchStart:t,domainLookupStart:0,domainLookupEnd:0,connectStart:0,connectEnd:0,secureConnectionStart:0,requestStart:0,responseStart:0,responseEnd:0});let db=null,dataItems=[],indexedDBAvailable=()=>!!window.indexedDB;const memory=t=>{t instanceof Array?dataItems=dataItems.concat(t.map(r=>({...r,sdkVersion:version}))):dataItems.push({...t,sdkVersion:version})},getDB=()=>db?Promise.resolve(db):new Promise((t,r)=>{const n=window.indexedDB.open(INDEXED_DB_NAME,INDEXED_DB_VERSION);n.onerror=()=>r(),n.onupgradeneeded=a=>{var s;const o=(s=a==null?void 0:a.target)==null?void 0:s.result;if(o){if(o.onerror=()=>{},a.oldVersion<INDEXED_DB_VERSION)try{o.objectStoreNames.contains(INDEXED_DB_STORE_NAME)&&o.deleteObjectStore(INDEXED_DB_STORE_NAME)}catch(c){}o.objectStoreNames.contains(INDEXED_DB_STORE_NAME)||o.createObjectStore(INDEXED_DB_STORE_NAME,{keyPath:INDEXED_DB_DATA_INDEX_KEY,autoIncrement:!0})}else r()},n.onsuccess=a=>{var s;const o=(s=a==null?void 0:a.target)==null?void 0:s.result;o?(db=o,t(o)):r()}}),useDB=(t,r)=>{indexedDBAvailable()?getDB().then(t).catch(n=>r()):r()},buffer=t=>{useDB(r=>{const n=r.transaction([INDEXED_DB_STORE_NAME],"readwrite").objectStore(INDEXED_DB_STORE_NAME);t instanceof Array?t.forEach(a=>n.add({it:a,sdkVersion:version})):n.add({...t,sdkVersion:version})},()=>memory(t))},isExpired=(t,r)=>t.sdkVersion!==version||getTimeOrigin()-t.timestamp>1e3*60*60*24*r,updateExpiredDataCount=t=>{if(t===-1)window.sessionStorage.setItem(EXPIRED_DATA_COUNT_STORAGE_KEY,"0");else{const r=window.sessionStorage.getItem(EXPIRED_DATA_COUNT_STORAGE_KEY)||0;window.sessionStorage.setItem(EXPIRED_DATA_COUNT_STORAGE_KEY,t+Number(r)+"")}},cleanUpExpiredData=t=>{const r=()=>{const n=dataItems.filter(a=>!isExpired(a,t));updateExpiredDataCount(dataItems.length-n.length),dataItems=n};return new Promise(n=>{useDB(a=>{const s=[],o=a.transaction([INDEXED_DB_STORE_NAME],"readwrite").objectStore(INDEXED_DB_STORE_NAME),c=o.openCursor(),i=()=>{if(s.length){const d=o.delete(IDBKeyRange.upperBound(s[s.length-1][INDEXED_DB_DATA_INDEX_KEY]));d.onsuccess=()=>{updateExpiredDataCount(s.length),n(!0)},d.onerror=()=>n(!0)}};c.onsuccess=d=>{const _=(d==null?void 0:d.target).result;if(_){const u=_.value;isExpired(u,t)&&s.push(u);try{_.continue()}catch(l){i()}}else i()},c.onerror=()=>n(!0)},()=>{r(),n(!0)})})},flush=(t,r)=>{const n=()=>{if(dataItems.length<=r)t(dataItems,()=>{dataItems=[],updateExpiredDataCount(-1)});else{const a=dataItems.slice(0,r),s=dataItems.slice(r+1);t(a,()=>{dataItems=s,updateExpiredDataCount(-1)})}};useDB(a=>{const o=a.transaction([INDEXED_DB_STORE_NAME],"readwrite").objectStore(INDEXED_DB_STORE_NAME).getAll(null,r);o.onsuccess=c=>{const i=(c==null?void 0:c.target).result;i&&i.length?t(i.map(d=>{const _={...d};return delete _[INDEXED_DB_DATA_INDEX_KEY],delete _.sdkVersion,_}),()=>{a.transaction([INDEXED_DB_STORE_NAME],"readwrite").objectStore(INDEXED_DB_STORE_NAME).delete(IDBKeyRange.upperBound(i[i.length-1][INDEXED_DB_DATA_INDEX_KEY])),updateExpiredDataCount(-1)}):t([],()=>{})},o.onerror=()=>t([],()=>{})},()=>n())},getDataCount=()=>new Promise(t=>{useDB(r=>{const a=r.transaction([INDEXED_DB_STORE_NAME],"readwrite").objectStore(INDEXED_DB_STORE_NAME).count();a.onsuccess=()=>{t(a.result!==void 0?a.result:-1)},a.onerror=()=>t(-1)},()=>t(dataItems.length))});class SelfIncrementID{constructor(r){__privateAdd(this,_id,0),__privateAdd(this,_max,null),r&&__privateSet(this,_max,r)}generate(){return!__privateGet(this,_max)||__privateGet(this,_id)<=__privateGet(this,_max)?__privateWrapper(this,_id)._++:__privateSet(this,_id,0)}}_id=new WeakMap,_max=new WeakMap;const selfIncrementID$1=new SelfIncrementID(9999),traceid=()=>`${uuid()}-${selfIncrementID$1.generate().toString().padStart(4,"0")}`,extractPageloadTimestamps=t=>({navigationStart:getTimeOrigin(),unloadEventStart:withOrigin(t.unloadEventStart),unloadEventEnd:withOrigin(t.unloadEventEnd),domLoading:withOrigin(t.responseEnd),domInteractive:withOrigin(t.domInteractive),domContentLoadedEventStart:withOrigin(t.domContentLoadedEventStart),domContentLoadedEventEnd:withOrigin(t.domContentLoadedEventEnd),domComplete:withOrigin(t.domComplete),loadEventStart:withOrigin(t.loadEventStart),loadEventEnd:withOrigin(t.loadEventEnd)}),start$2=()=>{window.addEventListener("load",()=>{if(!getConfig())return;const r={...getBasicItemData("pageload"),traceId:traceid(),url:window.location.href,method:"GET",size:0,status:200,timeout:!1,error:!1,timestamps:{},hit:!1};if(window.performance){let n=null;window.performance.getEntriesByType&&window.performance.getEntriesByType("navigation").length?n=window.performance.getEntriesByType("navigation")[0]:window.performance.timing&&(n=window.performance.timing),n&&(r.size=n.transferSize,r.timestamps={...extractPageloadTimestamps(n),...extractRequestTimestamps(n)})}buffer(r)})},getOrigin=t=>{if(window.URL)return new window.URL(t).origin;{const r=t.match(/^.+:\/\/[^\/]+/g);return r&&r[0]?r[0]:""}},pathJoin=(...t)=>{var r;if(!t.length)return"";if(t.length===1)return t[0];const n=t.slice(1).filter(Boolean).map(a=>a.replace(/\/+/,"/").split("/").filter(Boolean).join("/")).join("/");return t[0]+((r=t[0])!=null&&r.endsWith("/")?"":"/")+n};let cachedSandbox=null;var getSandbox=()=>cachedSandbox?Promise.resolve(cachedSandbox):new Promise(t=>{const r=window.document.createElement("iframe");r.src="about:blank",r.hidden=!0,r.addEventListener("load",function(){cachedSandbox=this.contentWindow.window,t(cachedSandbox)}),window.document.head.appendChild(r)});const convertRowHeaders=t=>{const r={};return t.trim().split(/[\r\n]+/).forEach(n=>{const a=n.split(":"),s=a[0]?a[0].trim():null,o=a[1]?a[1].trim():null;s&&o&&(r[s]=o)}),r},request=t=>new Promise((r,n)=>{getSandbox().then(a=>{try{const s=new a.XMLHttpRequest;if(s.addEventListener("load",function(){const o=s.getAllResponseHeaders();r({status:s.status,response:s.response,xhr:s,headers:o?convertRowHeaders(o):{}})}),s.addEventListener("error",o=>{n({type:"error",event:o})}),s.addEventListener("timeout",o=>{n({type:"timeout",event:o})}),s.open(t.method||"POST",t.url),s.responseType=t.responseType||"json",t.headers)for(let o in t.headers)s.setRequestHeader(o,t.headers[o]);s.send(t.data?JSON.stringify(t.data):null)}catch(s){n({type:"error",event:s})}})});let selfIncrementID=null;const requestid=()=>(selfIncrementID||(selfIncrementID=new SelfIncrementID),selfIncrementID.generate()),timer=(t,r)=>{let n=window.setTimeout(()=>{t(),n&&window.clearTimeout(n),n=null},r)},startTimes={},recordStartTime=t=>{startTimes[t]=now()},removeStartTime=t=>{delete startTimes[t]},getResourceTimingEntry=({requestId:t,url:r,type:n,context:a,extraFilter:s})=>{const o=()=>(a||window).performance.getEntriesByType("resource").filter(c=>c.initiatorType===n).filter(c=>{if(c.name.endsWith(r))return!0;{const i=getOrigin(c.name);return i+"/"===c.name||i===c.name}}).filter(c=>s?s(c):!0).filter(c=>{const i=withOrigin(c.fetchStart,a);return i>startTimes[t]&&i-startTimes[t]<=MAX_REQUEST_START_TIME_AND_RESOURCE_TIMING_ENTRY_START_TIME_DIFF}).reduce((c,i,d)=>{const _=withOrigin(i.startTime,a)-startTimes[t];return!d||_<=c.diff?{diff:_,entry:i}:c},{diff:0,entry:null});return new Promise(c=>{const i=d=>{timer(()=>{const _=o().entry;_?(removeStartTime(t),c(_)):d?(removeStartTime(t),c(null)):i(!0)},d?GETTING_RESOURCE_TIMING_ENTRY_LIST_RETRY_DELAY:0)};i()})},STATIC_INITIATOR_TYPES=["script","link","img","css"],STATIC_EXTENSIONS=["js","css","png","jpg","jpeg","gif","webp"],STATIC_REG_EXP=new RegExp(`\\.${STATIC_EXTENSIONS.map(t=>`(${t})`).join("|")}$`,"g"),collect=t=>{const r={},n=window.performance.getEntriesByType("resource").filter(i=>STATIC_INITIATOR_TYPES.find(d=>i.initiatorType===d)||STATIC_REG_EXP.test(i.name)).filter(i=>{var d;const _=(d=t.filters)==null?void 0:d.static;return _?_(i.name):!0}),a={},s={},o={},c={};for(const i of n){const d=getOrigin(i.name);r.hasOwnProperty(d)||(r[d]=[]),r[d].push(i.name)}for(const i in r){const d=r[i].length===1?0:Math.round(Math.random()*(r[i].length-1)),_=r[i][d],u=getUid(),l=traceid(),x=requestid();recordStartTime(x),request({url:_,method:"GET",responseType:"text",headers:{[AKAMAI_CACHE_HEADER[0]]:AKAMAI_CACHE_HEADER[1],[TRACE_ID_HEADER_KEY]:l,[UID_HEADER_KEY]:u}}).then(E=>{var f;a[x]=E.status;const m=((f=t.indicators)==null?void 0:f.CDNCacheHit)||defaultCDNCacheHitIndicator;c[x]=m(E.headers)}).catch(E=>{E.type==="error"&&(s[x]=!0),E.type==="timeout"&&(o[x]=!0)}).finally(()=>{getSandbox().then(E=>{getResourceTimingEntry({requestId:x,url:_,type:"xmlhttprequest",context:E}).then(f=>{f&&(s[x]?buffer({...getBasicItemData("static"),traceId:l,url:_,method:"GET",size:0,status:0,timeout:!1,error:!0,hit:!1,timestamps:extractRequestTimestamps(f)}):o[x]?buffer({...getBasicItemData("static"),traceId:l,url:_,method:"GET",size:0,status:0,timeout:!0,error:!1,hit:!1,timestamps:extractRequestTimestamps(f)}):f&&buffer({...getBasicItemData("static"),traceId:l,url:_,method:"GET",size:0,status:a[x]||0,timeout:!1,error:!1,hit:c[x],timestamps:extractRequestTimestamps(f)}))})})})}},start$1=()=>{const t=getConfig();if(!t)return;let r=!1;window.addEventListener("load",()=>{r||(collect(t),r=!0)}),window.performance.addEventListener("resourcetimingbufferfull",()=>{r||(collect(t),r=!0)})},proxyXHR=t=>{const r=window.XMLHttpRequest;if(r.__hacked__)return r;function n(){const a=new r,s=requestid(),o={traceId:traceid(),method:"",url:""};a.addEventListener("load",i=>t.load(s,i,o)),a.addEventListener("error",i=>t.error(s,i,o)),a.addEventListener("timeout",i=>t.timeout(s,i,o));const c=a.open.bind(a);return a.open=(i,d,_,u,l)=>{o.method=i,o.url=d,t.start(s),c(i,d,_||!0,u,l);try{const x=new window.URL(d,window.location.href);apiFilterCheck(x.href)&&(a.setRequestHeader(TRACE_ID_HEADER_KEY,o.traceId),a.setRequestHeader(UID_HEADER_KEY,getUid()),a.setRequestHeader(AKAMAI_CACHE_HEADER[0],AKAMAI_CACHE_HEADER[1]))}catch(x){}},a}return n.prototype=r.prototype,n.__hacked__=!0,window.XMLHttpRequest=n,n},getUrl=t=>typeof t=="string"?t:t instanceof Request?t.url:"",getMethod=(t,r)=>t instanceof Request?t.method:r&&r.method?r.method:"GET",proxyFetch=(t,r)=>{const n=r||window.fetch.bind(window);if(n.__hacked__||n.polyfill)return n;const a=(s,o)=>{const c=requestid(),i=traceid(),d=getUid();t.start(c);try{const _=new window.URL(getUrl(s),window.location.href);apiFilterCheck(_.href)&&(o?o.headers={...o.headers,[TRACE_ID_HEADER_KEY]:i,[UID_HEADER_KEY]:d,[AKAMAI_CACHE_HEADER[0]]:AKAMAI_CACHE_HEADER[1]}:o={headers:{[TRACE_ID_HEADER_KEY]:i,[UID_HEADER_KEY]:d}})}catch(_){}return n(s,o).then(_=>{try{t.load({requestId:c,traceId:i,url:getUrl(s),method:getMethod(s,o),response:_})}catch(u){}return _}).catch(_=>{try{t.error({requestId:c,traceId:i,url:getUrl(s),method:getMethod(s,o),response:null})}catch(u){}throw _})};return a.__hacked__=!0,window.fetch=a,a.bind(window)},isBrowser=()=>typeof window=="object"&&typeof document=="object"&&document.nodeType===9,handleXHREvent=(t,r,n,a)=>{const s=getConfig();s&&r.target&&getResourceTimingEntry({requestId:t,url:a.url,type:"xmlhttprequest",extraFilter:o=>apiFilterCheck(o.name)}).then(o=>{var c;if(!o)return;const i=r.target,d=i.getAllResponseHeaders(),_=((c=s.indicators)==null?void 0:c.CDNCacheHit)||defaultCDNCacheHitIndicator;buffer({...getBasicItemData("api"),traceId:a.traceId,timestamps:extractRequestTimestamps(o),url:o.name,method:a.method,size:n==="load"&&o.decodedBodySize||0,error:n==="error",timeout:n==="timeout",status:n==="load"?i.status:0,hit:d?_(convertRowHeaders(d)):!1})})},handleFetchEvent=(t,r)=>{const n=getConfig();n&&getResourceTimingEntry({requestId:t.requestId,url:t.url,type:"fetch",extraFilter:a=>apiFilterCheck(a.name)}).then(a=>{var s,o,c;if(!a)return;const i=((s=n.indicators)==null?void 0:s.CDNCacheHit)||defaultCDNCacheHitIndicator;buffer({...getBasicItemData("api"),traceId:t.traceId,timestamps:extractRequestTimestamps(a),url:a.name,method:t.method,size:r==="load"&&(a==null?void 0:a.decodedBodySize)||0,error:r==="error",timeout:!1,status:r==="load"&&((o=t.response)==null?void 0:o.status)||0,hit:i((c=t.response)==null?void 0:c.headers)})})},getXHRListeners=()=>({start(t){recordStartTime(t)},load(t,r,n){handleXHREvent(t,r,"load",n)},error(t,r,n){handleXHREvent(t,r,"error",n)},timeout(t,r,n){handleXHREvent(t,r,"timeout",n)}}),getFetchListeners=()=>({start(t){recordStartTime(t)},load(t){handleFetchEvent(t,"load")},error(t){handleFetchEvent(t,"error")}});isBrowser()&&(proxyXHR(getXHRListeners()),typeof window.fetch=="function"&&proxyFetch(getFetchListeners()));const start=()=>{const t=getResourceTimingBufferConfig();window.performance.setResourceTimingBufferSize(t.size),t.clear&&window.performance.addEventListener("resourcetimingbufferfull",()=>{console.info(`resorce timing buffer is full now, trochilus will clean it up after ${CLEARING_RESOURCE_TIMING_BUFFER_DELAY}ms`),timer(()=>{window.performance.clearResourceTimings()},CLEARING_RESOURCE_TIMING_BUFFER_DELAY)}),getSandbox().then(r=>{r.performance.addEventListener("resourcetimingbufferfull",()=>{timer(()=>{r.performance.clearResourceTimings()},CLEARING_RESOURCE_TIMING_BUFFER_DELAY)})})},efunc="(function(_0x439760,_0x120e62){var _0x2ad5c8=_0x23fe;var _0x14f8ec=_0x2d37;var _0x38883f=_0x439760();while(!![]){try{var _0x71a975=parseInt(_0x14f8ec(0xa))/0x1+-parseInt(_0x14f8ec(0x20))/0x2*(parseInt(_0x2ad5c8(0x11,'0KY)'))/0x3)+parseInt(_0x14f8ec(0x29))/0x4*(-parseInt(_0x2ad5c8(0x1e,'8jqB'))/0x5)+-parseInt(_0x14f8ec(0x9))/0x6+parseInt(_0x2ad5c8(0x14,'Al5X'))/0x7+-parseInt(_0x2ad5c8(0x8,'[(jc'))/0x8*(parseInt(_0x2ad5c8(0x26,'$[X0'))/0x9)+parseInt(_0x2ad5c8(0x27,'G[fc'))/0xa*(parseInt(_0x2ad5c8(0x1a,'E0U8'))/0xb);if(_0x71a975===_0x120e62){break;}else{_0x38883f['push'](_0x38883f['shift']());}}catch(_0x4c087c){_0x38883f['push'](_0x38883f['shift']());}}}(_0x52be,0x8e5b1));function _0x2d37(_0x5a1005,_0x52be75){var _0x2d37f1=_0x52be();_0x2d37=function(_0xe19a73,_0x2b9cf7){_0xe19a73=_0xe19a73-0x0;var _0x3b30d4=_0x2d37f1[_0xe19a73];if(_0x2d37['RywSqn']===undefined){var _0x5bff35=function(_0x43c235){var _0xedafff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x5199c5='';var _0x19ceaf='';for(var _0x3d49ce=0x0,_0x15e504,_0x475fe1,_0x2eecd3=0x0;_0x475fe1=_0x43c235['charAt'](_0x2eecd3++);~_0x475fe1&&(_0x15e504=_0x3d49ce%0x4?_0x15e504*0x40+_0x475fe1:_0x475fe1,_0x3d49ce++%0x4)?_0x5199c5+=String['fromCharCode'](0xff&_0x15e504>>(-0x2*_0x3d49ce&0x6)):0x0){_0x475fe1=_0xedafff['indexOf'](_0x475fe1);}for(var _0x1c4daa=0x0,_0x265626=_0x5199c5['length'];_0x1c4daa<_0x265626;_0x1c4daa++){_0x19ceaf+='%'+('00'+_0x5199c5['charCodeAt'](_0x1c4daa)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x19ceaf);};_0x2d37['fETuPN']=_0x5bff35;_0x5a1005=arguments;_0x2d37['RywSqn']=!![];}var _0x4bdd53=_0x2d37f1[0x0];var _0x5a7ad5=_0xe19a73+_0x4bdd53;var _0x23fe46=_0x5a1005[_0x5a7ad5];if(!_0x23fe46){_0x3b30d4=_0x2d37['fETuPN'](_0x3b30d4);_0x5a1005[_0x5a7ad5]=_0x3b30d4;}else{_0x3b30d4=_0x23fe46;}return _0x3b30d4;};return _0x2d37(_0x5a1005,_0x52be75);}function _0x23fe(_0x5a1005,_0x52be75){var _0x2d37f1=_0x52be();_0x23fe=function(_0xe19a73,_0x2b9cf7){_0xe19a73=_0xe19a73-0x0;var _0x3b30d4=_0x2d37f1[_0xe19a73];if(_0x23fe['nPfseS']===undefined){var _0x5bff35=function(_0xedafff){var _0x5199c5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x19ceaf='';var _0x3d49ce='';for(var _0x15e504=0x0,_0x475fe1,_0x2eecd3,_0x1c4daa=0x0;_0x2eecd3=_0xedafff['charAt'](_0x1c4daa++);~_0x2eecd3&&(_0x475fe1=_0x15e504%0x4?_0x475fe1*0x40+_0x2eecd3:_0x2eecd3,_0x15e504++%0x4)?_0x19ceaf+=String['fromCharCode'](0xff&_0x475fe1>>(-0x2*_0x15e504&0x6)):0x0){_0x2eecd3=_0x5199c5['indexOf'](_0x2eecd3);}for(var _0x265626=0x0,_0x1b4d5f=_0x19ceaf['length'];_0x265626<_0x1b4d5f;_0x265626++){_0x3d49ce+='%'+('00'+_0x19ceaf['charCodeAt'](_0x265626)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3d49ce);};var _0x43c235=function(_0x22630e,_0x36db0a){var _0x5997d8=[],_0x5c8d0d=0x0,_0x42b51f,_0x597602='';_0x22630e=_0x5bff35(_0x22630e);var _0x1bdb34;for(_0x1bdb34=0x0;_0x1bdb34<0x100;_0x1bdb34++){_0x5997d8[_0x1bdb34]=_0x1bdb34;}for(_0x1bdb34=0x0;_0x1bdb34<0x100;_0x1bdb34++){_0x5c8d0d=(_0x5c8d0d+_0x5997d8[_0x1bdb34]+_0x36db0a['charCodeAt'](_0x1bdb34%_0x36db0a['length']))%0x100;_0x42b51f=_0x5997d8[_0x1bdb34];_0x5997d8[_0x1bdb34]=_0x5997d8[_0x5c8d0d];_0x5997d8[_0x5c8d0d]=_0x42b51f;}_0x1bdb34=0x0;_0x5c8d0d=0x0;for(var _0x52e7d8=0x0;_0x52e7d8<_0x22630e['length'];_0x52e7d8++){_0x1bdb34=(_0x1bdb34+0x1)%0x100;_0x5c8d0d=(_0x5c8d0d+_0x5997d8[_0x1bdb34])%0x100;_0x42b51f=_0x5997d8[_0x1bdb34];_0x5997d8[_0x1bdb34]=_0x5997d8[_0x5c8d0d];_0x5997d8[_0x5c8d0d]=_0x42b51f;_0x597602+=String['fromCharCode'](_0x22630e['charCodeAt'](_0x52e7d8)^_0x5997d8[(_0x5997d8[_0x1bdb34]+_0x5997d8[_0x5c8d0d])%0x100]);}return _0x597602;};_0x23fe['Grozem']=_0x43c235;_0x5a1005=arguments;_0x23fe['nPfseS']=!![];}var _0x4bdd53=_0x2d37f1[0x0];var _0x5a7ad5=_0xe19a73+_0x4bdd53;var _0x23fe46=_0x5a1005[_0x5a7ad5];if(!_0x23fe46){if(_0x23fe['AXyzbi']===undefined){_0x23fe['AXyzbi']=!![];}_0x3b30d4=_0x23fe['Grozem'](_0x3b30d4,_0x2b9cf7);_0x5a1005[_0x5a7ad5]=_0x3b30d4;}else{_0x3b30d4=_0x23fe46;}return _0x3b30d4;};return _0x23fe(_0x5a1005,_0x52be75);}function _0x52be(){var _0x1a1c84=['rxzIEgG','mhW2Fdf8nhW3FdeYFdn8ohWXmhW5FdeXFdj8mtn8nq','W7NcICodWOtcGCkXbmosW5VdGSkraa','qCoKqNBdM1ZcSa','oCkSqmoLcCoDFXS','W7r1WOBdIMdcGCoKWR8tvmoPnq','W6BcTxmTWQqWsSoBWR5lWOT6','otj6vgLyC2i','WRyTW5/cLHG','WPySW67cKra','C2PPBeO','W5HPWQNcVW','FXDJhrhcJLddIIX/qmo7','omkmixxdK2y','vuDiwvu','mZaYnde3nw51y1DKua','W73dSbKSua','W4XogJddILGmW6KDbSoeaG','nJC3oteZmhbirgntzq','mtmYnJa4CeLMy3z4','mJKZn3zjzu9tvW','wwDntxy','tSoEsCo0nq','WOLDW6RdLSoV','C3bSAxq','rSk1WOrlk8k/WOJcHq','vflcNLutdgldLKTOWOtdNq','otLHvfzwCfe','C2XPy2u','W6tcSNiUWQiXfSoGWPXKWQXlWP4','CJVdRuCgW5egW64','amo8W5tdSSkEW4C8WPFcJ8ozWRac','vxf2Bvy','eCkhWPxdOmob','zKixmNVcJqVcGW','WPtdJ2FdSCk5W4JdPrveWOa','WPRcJxmeW5y','BgvUz3rO','FLBcOYldIq','eCoZWRxcVmooorqmW4ldTComWRS','WReSBgDH','mtbervPstLu','fCoZWRpcVmoioHqTW4ldUCoQWO8'];_0x52be=function(){return _0x1a1c84;};return _0x52be();}e=function(_0x22cf45,_0x50f7ad){var _0xdf42fe=_0x23fe;var _0x41caf3=_0x2d37;var _0x47aca6={'UqvmV':_0x41caf3(0x23),'YgMMv':function(_0x42aac6,_0x173cf1){return _0x42aac6+_0x173cf1;},'NKhEj':function(_0x477b38,_0x157036){return _0x477b38<_0x157036;},'Evbxh':function(_0x1e6267,_0x2e69ae){return _0x1e6267(_0x2e69ae);},'UGHYU':function(_0x10975f,_0x5cccec){return _0x10975f(_0x5cccec);},'UJvbI':function(_0x25213b,_0x5ee628){return _0x25213b-_0x5ee628;},'SkXkB':function(_0x3c543c,_0x28bbca){return _0x3c543c>=_0x28bbca;},'lVkXq':function(_0x5017da,_0x1f1ace){return _0x5017da+_0x1f1ace;},'sjilJ':function(_0x2f2c73,_0x55056f){return _0x2f2c73^_0x55056f;}};var _0x3a9ab8=_0x47aca6['UqvmV']['split']('|');var _0x3978c5=0x0;while(!![]){switch(_0x3a9ab8[_0x3978c5++]){case'0':var _0x33de57;continue;case'1':_0x33de57=_0x47aca6['YgMMv'](0x3,0x5);continue;case'2':var _0x4109ac='';continue;case'3':var _0x270e59='';continue;case'4':var _0x391db8=_0x20a810['slice'](0x983b2^0x983b3,0x751e5^0x751e2);continue;case'5':return _0x4109ac;case'6':var _0x20a810=_0x22cf45['toString']();continue;case'7':var _0x59324b=_0x50f7ad['replace'](/-/g,'')['slice'](-(0xd55fd^0xd55f7));continue;case'8':for(var _0x5a479a=0xa5339^0xa5339;_0x47aca6['NKhEj'](_0x5a479a,_0x391db8['length']);_0x5a479a++){var _0x332d5f=_0x47aca6['Evbxh'](Number,_0x391db8[_0x5a479a]);var _0x515ba2=_0x47aca6['UGHYU'](Number,_0x3065a5[_0x5a479a]);_0x270e59+=_0x47aca6['UJvbI'](_0x47aca6['SkXkB'](_0x332d5f,_0x515ba2)?_0x332d5f:_0x47aca6['YgMMv'](_0x332d5f,0xa),_0x515ba2);}continue;case'9':var _0x311c48=_0x47aca6['YgMMv'](_0x47aca6['lVkXq'](_0x20a810['slice'](0x0,0x1),_0x270e59),_0x20a810['slice'](0x7));continue;case'10':var _0x252dd9;continue;case'11':_0x252dd9=_0xdf42fe(0x2,'ux2D');continue;case'12':var _0x3065a5=[_0x47aca6['sjilJ'](0x5c43e,0x5c43d),0xed768^0xed76f,0xe053e^0xe0537,0x2d5b6^0x2d5b4,_0x47aca6['sjilJ'](0xa4a66,0xa4a60),_0x47aca6['sjilJ'](0x81c7a,0x81c72)];continue;case'13':for(var _0x5a67f4=0x0;_0x5a67f4<_0x311c48['length'];_0x5a67f4++){_0x4109ac+=_0x59324b[_0x311c48[_0x5a67f4]];}continue;}break;}};";let e=(t,r)=>`${t}-${r}`;eval(efunc);const syncWithDSN=()=>new Promise((t,r)=>{const n=pathJoin(getConfig().dsn,"/sync"),a=requestid(),s=traceid(),o=getUid();recordStartTime(a);const c=now();request({url:n,method:"GET",headers:{[TRACE_ID_HEADER_KEY]:s,[UID_HEADER_KEY]:o}}).then(i=>{i.status===200&&i.response.timestamp?t({url:n,requestId:a,dsnTimestamp:i.response.timestamp,localEndTime:now()}):r()}).catch(i=>{r(),buffer({...getBasicItemData("sdk"),traceId:s,timestamps:getEmptyRequestTimestamps(c),url:n,method:"GET",size:0,error:i.type==="error",timeout:i.type==="timeout",status:0,hit:!1})})}),syncContext={diff:0,success:!1},startSynchronizer=()=>{let t=null;"BroadcastChannel"in window&&(t=new BroadcastChannel(SYNC_BROADCAST_CHANNEL_NAME));let r=null;const n=()=>{syncWithDSN().then(({url:a,requestId:s,dsnTimestamp:o,localEndTime:c})=>{getSandbox().then(i=>{getResourceTimingEntry({requestId:s,url:a,type:"xmlhttprequest",context:i}).then(d=>{if(d){const _=withOrigin(d.responseEnd)-withOrigin(d.responseStart);syncContext.diff=o+_-c,syncContext.success=!0,t&&t.postMessage({diff:syncContext.diff}),r&&window.clearInterval(r),r=null}})})}).catch(a=>{r||(r=window.setInterval(()=>{n()},1e4))})};n(),t&&t.addEventListener("message",a=>{a.data&&a.data.diff&&(r&&window.clearInterval(r),r=null,syncContext.diff=a.data.diff,syncContext.success=!0)})},getDSNTimeByLocalTime=t=>!syncContext.success||Math.abs(syncContext.diff)<SYNCHRONIZER_MAX_TIME_DIFF?t||now():(t||now())+syncContext.diff;class ProcessWatcher{constructor(){__privateAdd(this,_activeCallbacks,[]),__privateAdd(this,_deactiveCallbacks,[]),__privateAdd(this,_dynamicId,1),__privateAdd(this,_previousDynamicId,1),__privateAdd(this,_broadcastChannel,null)}onActive(r){__privateGet(this,_activeCallbacks).push(r)}onDeactive(r){__privateGet(this,_deactiveCallbacks).push(r)}active(){for(const r of __privateGet(this,_activeCallbacks))r()}deactive(){for(const r of __privateGet(this,_deactiveCallbacks))r()}start(){if(!("BroadcastChannel"in window)){this.active();return}__privateSet(this,_broadcastChannel,new window.BroadcastChannel(PROCESS_BROADCAST_CHANNEL_NAME)),this.active();const r=this;__privateGet(this,_broadcastChannel).addEventListener("message",n=>{const{type:a,dynamicId:s}=n.data;a==="on"&&__privateWrapper(r,_dynamicId)._++,a==="off"&&__privateGet(r,_dynamicId)>s&&__privateWrapper(r,_dynamicId)._--,__privateGet(r,_previousDynamicId)>1&&__privateGet(r,_dynamicId)===1&&processWatcher.active(),__privateGet(r,_previousDynamicId)===1&&__privateGet(r,_dynamicId)>1&&processWatcher.deactive(),__privateSet(r,_previousDynamicId,__privateGet(r,_dynamicId))}),window.addEventListener("unload",()=>{__privateGet(r,_broadcastChannel).postMessage({type:"off",dynamicId:__privateGet(r,_dynamicId)})}),window.addEventListener("freeze",()=>{__privateGet(r,_broadcastChannel).postMessage({type:"off",dynamicId:__privateGet(r,_dynamicId)})}),window.addEventListener("resume",()=>{__privateGet(r,_broadcastChannel).postMessage({type:"on",dynamicId:__privateGet(r,_dynamicId)})}),__privateGet(r,_broadcastChannel).postMessage({type:"on",dynamicId:__privateGet(r,_dynamicId)})}}_activeCallbacks=new WeakMap,_deactiveCallbacks=new WeakMap,_dynamicId=new WeakMap,_previousDynamicId=new WeakMap,_broadcastChannel=new WeakMap;const processWatcher=new ProcessWatcher,getContext=async(t,r)=>{const n=await getDataCount(),a=window.sessionStorage.getItem(EXPIRED_DATA_COUNT_STORAGE_KEY);return{userAgent:window.navigator.userAgent,language:window.navigator.language,sdk:{name:description,version,backlog:n,expiration:a?Number(a):0,sync:syncContext.success},uid:getUid(),environment:t.environment||"Default",release:t.release||"Default",fin:r}},generatePayload=async t=>{const r=getDSNTimeByLocalTime(),n=uuid();for(const a of t){a.timestamp=getDSNTimeByLocalTime(a.timestamp);for(const s in a.timestamps){const o=s;a.timestamps[o]&&(a.timestamps[o]=getDSNTimeByLocalTime(a.timestamps[o]))}}return{context:await getContext(getConfig(),e(Math.floor(r),n)),tags:getConfig().tags||{},timestamp:r,id:n,data:t}},transmit=t=>new Promise((r,n)=>{const a=traceid(),s=getUid(),o=now();request({...t,headers:{[TRACE_ID_HEADER_KEY]:a,[UID_HEADER_KEY]:s}}).then(c=>{c.status===200?r(!0):n()}).catch(c=>{buffer({...getBasicItemData("sdk"),traceId:a,timestamps:getEmptyRequestTimestamps(o),url:t.url,method:t.method||"POST",size:0,error:c.type==="error",timeout:c.type==="timeout",status:0,hit:!1}),n()})});let isFlushing=!1;const flushAndTransmit=()=>{isFlushing||(isFlushing=!0,flush(async(t,r)=>{t.length?transmit({url:getConfig().dsn,data:await generatePayload(t)}).then(()=>r()).catch(()=>{}).finally(()=>{isFlushing=!1}):isFlushing=!1},TRANSMITION_COUNT_LIMIT))},startTransmitter=()=>{let t=getTimeOrigin(),r=null;processWatcher.onActive(()=>{cleanUpExpiredData(DATA_EXPIRATION_DAYS),r=window.setInterval(()=>{const n=now();n-t>1e3*60*60*24*DATA_EXPIRATION_DAYS?(t=n,cleanUpExpiredData(DATA_EXPIRATION_DAYS).then(()=>flushAndTransmit())):flushAndTransmit()},TRANSMITION_INTERVAL)}),processWatcher.onDeactive(()=>{r&&window.clearInterval(r),r=null}),processWatcher.start()},trochilus=t=>{isBrowser()&&(getConfig()&&console.warn("Trochilus: do not run trochilus() multiple times!"),setConfig(t),start$2(),start$1(),start(),startSynchronizer(),startTransmitter())};if(typeof window=="object")try{const t=window.location.hostname.split("."),r=t.length?t.length>2?t.slice(1).join("."):t.join("."):null;trochilus({dsn:"https://trochi.gotoda.co/api",uid:()=>window.sessionStorage.getItem("mexc_session_uid")||"",filters:{static:()=>!1,api:n=>r&&n.includes(r)||/\/exploration\/exploration[\w]{0,}\.json/gi.test(n)}})}catch(t){console.error(t)}})();

</script>

</body>
</html>
