<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>GlobalDispatchAndDateCountdownWidget.astro_astro_type_script_index_0_lang.DJu3yDdL.html</title>
</head>
<body>
<script>import{u as v,g as I,t as q}from"./index.CT4hP_Fn.js";let p=0,y=[];function E(){return p+=1,()=>{if(p-=1,p===0){let e=y;y=[];for(let t of e)t()}}}let k=Symbol(),m=Symbol(),M=0,_=(e,t,s,a)=>{let n=++M,o={...e};o.set=(...d)=>{e[k]=t,e[m]=n,e.set(...d),delete e[k],delete e[m]},e.setKey&&(o.setKey=(...d)=>{e[k]=t,e[m]=n,e.setKey(...d),delete e[k],delete e[m]});let i,r;e.action&&([i,r]=e.action(n,t,a));let c=s(o,...a);if(c instanceof Promise){let d=E();return c.catch(w=>{throw i&&i(w),w}).finally(()=>{d(),r&&r()})}return r&&r(),c},b=(e,t,s)=>(...a)=>_(e,t,s,a),l=[],h=(e,t)=>{let s=[],a={get(){return a.lc||a.listen(()=>{})(),a.value},l:0,lc:0,listen(n,o){return a.lc=s.push(n,o||a.l)/2,()=>{let i=s.indexOf(n);~i&&(s.splice(i,2),--a.lc||a.off())}},notify(n){let o=!l.length;for(let i=0;i<s.length;i+=2)l.push(s[i],s[i+1],a.value,n);if(o){for(let i=0;i<l.length;i+=4){let r;for(let c=i+1;!r&&(c+=4)<l.length;)l[c]<l[i+1]&&(r=l.push(l[i],l[i+1],l[i+2],l[i+3]));r||l[i](l[i+2],l[i+3])}l.length=0}},off(){},set(n){a.value!==n&&(a.value=n,a.notify())},subscribe(n,o){let i=a.listen(n,o);return n(a.value),i},value:e};return a},N=(e={})=>{let t=h(e);return t.setKey=function(s,a){typeof a>"u"?s in t.value&&(t.value={...t.value},delete t.value[s],t.notify(s)):t.value[s]!==a&&(t.value={...t.value,[s]:a},t.notify(s))},t},B=h(!1);const C=b(B,"setLogin",(e,t)=>{e.set(t)});async function K(){return(await v({operation:"Customer"}))?.data?.customer?C(!0):C(!1),B.get()}const L=h(null),V=b(L,"setCustomerName",(e,t)=>{e.set(t)}),D=({id:e,items:t,selectYourSample:s,standardPrice:a,totalQuantity:n})=>{const o=localStorage.getItem("miniBasketData"),i={id:e,items:t??o?.items,selectYourSample:s??o?.selectYourSample,standardPrice:a??o?.standardPrice,totalQuantity:n??o?.totalQuantity};localStorage.setItem("miniBasketData",JSON.stringify(i))},{lang:u}=window;function W(){class e extends HTMLElement{quantityInput=this.querySelector("#quantity");atbBtn=this.querySelector("#add-to-basket");instockMsg=this.querySelector("#instock-message");constructor(){super(),this.atbBtn.addEventListener("click",()=>{const a=this.atbBtn.dataset.sku,n=this.quantityInput?.value;this.atbBtn.disabled||(window.tenantConfig?.features?.hasSubscriptions&&this.atbBtn?.dataset?.subscriptionId&&this.atbBtn?.dataset?.subscriptionId!=="undefined"?A(this.atbBtn.dataset?.subscriptionId,[{sku:Number(a),quantity:Number(n)}]):x([{sku:Number(a),quantity:Number(n)}]))}),new MutationObserver(a=>{a?.forEach(n=>{n.type==="attributes"&&(n.attributeName=="data-sku"||n.attributeName=="data-stock")&&(n.target.dataset.stock=="false"?(n.target.disabled=!0,this.atbBtn.querySelector("#add-to-basket-text").innerText=window.altitude.i18n(()=>u.altitude.addtobasket.button.unavailable.text).toUpperCase(),this.instockMsg&&(this.instockMsg.innerHTML=window.altitude.i18n(()=>u.altitude.addtobasket.shipping))):(n.target.removeAttribute("disabled"),this.atbBtn.querySelector("#add-to-basket-text").innerText=window.altitude.i18n(()=>u.altitude.addtobasket.button.available.text).toUpperCase(),this.instockMsg?.dataset?.msn&&(this.instockMsg.innerHTML=this.instockMsg.dataset.msn)))})}).observe(this.atbBtn,{attributes:!0})}}customElements.get("add-to-basket")||customElements.define("add-to-basket",e)}async function x(e,t=!0,s){let a=t;e.length>1&&(a=!1),g({operation:"AddToBasket",variables:{id:f()||null,items:e,currency:window.siteObj.currency,shippingDestination:window.siteObj.country,loyaltyEnabled:window.tenantConfig?.features?.loyalty?.enabled??!1}},a).then(()=>{s&&(document.location.href="/basket")},n=>{console.error(n)})}function f(){const e=I(`ElysiumBasket${window?.tenantConfig?.application?.basketCookieName}_V6`);let t=e;if(e){if(e.includes('"')&&(t=e?.replaceAll('"',"")),btoa(atob(t))===t)return atob(t)}else return null}function P(e){const t=f();if(e!==t)if(localStorage.setItem("basketId",e),e===null)document.cookie=`ElysiumBasket${window.tenantConfig.application.basketCookieName}_V6=; secure; path=/; domain=${T(window.__HOST__)}; Expires=Thu, 01 Jan 1970 00:00:01 GMT;`;else{const s=btoa(e);window.__HOST__.includes("thgaltitude")?document.cookie=`ElysiumBasket${window.tenantConfig?.application?.basketCookieName}_V6=${s};max-age=2500000;  path=/;`:document.cookie=`ElysiumBasket${window.tenantConfig?.application?.basketCookieName}_V6=${s}; secure; path=/;max-age=2500000; domain=${T(window.__HOST__)}`}}function T(e){return e?.includes("localhost:")?"localhost":e?.replace("https://","")?.replace("altitude.","")?.replace("uat.","")?.replace("www.","")}function O(e){const t=document.getElementById("goToBasketLink"),s=document.getElementById("basket-count");if(!s)return!1;if(e&&Number(e)>0){Number(e)>99?s.innerText="99+":s.innerText=e,s.classList.replace("hidden","flex");const a=e===1?u.altitude.header.basket.singleitemarialabel:u.altitude.header.basket.multipleitemarialabel;t&&(t.ariaLabel=window.altitude.i18n(()=>`${u.altitude.header.basket.arialabel}, ${e} ${a}`))}else s.classList.contains("flex")&&s.classList.replace("flex","hidden"),t&&(t.ariaLabel=window.altitude.i18n(()=>u.altitude.header.basket.arialabel));window.Tracker.store.set("basketQuantity",e??0)}async function A(e,t){const s=window.__BASKETITEMS__,a=document.getElementById("subscribe-tab")?.classList.contains("active"),n=document.getElementById("subscription-drawer-content"),o=s?.find(i=>i?.id.includes(t?.[0]?.sku));a||n?o?(!o?.subscriptionContract||o?.subscriptionContract!==e)&&g({operation:"ChangeProductSubscriptionContractInBasket",variables:{basketId:f()||null,sku:Number(t?.[0]?.sku),contractId:e,currency:window.siteObj.currency,shippingDestination:window.siteObj.country,hasSubscriptions:window.tenantConfig?.features?.hasSubscriptions,toSubscription:!0}},!0):g({operation:"AddProductToBasketWithSubscriptionContract",variables:{basketId:f()||null,sku:Number(t?.[0]?.sku),quantity:t?.[0]?.quantity,contractId:e,settings:{currency:window.siteObj.currency,shippingDestination:window.siteObj.country}}},!0):o&&o?.subscriptionContract?g({operation:"ChangeProductSubscriptionContractInBasket",variables:{basketId:f()||null,sku:Number(t?.[0]?.sku),contractId:e,currency:window.siteObj.currency,shippingDestination:window.siteObj.country,hasSubscriptions:window.tenantConfig?.features?.hasSubscriptions,toSubscription:!1}},!0):x(t)}async function g(e,t=!0){const s=e?.variables?.sku??e?.variables?.items?.[0]?.sku;try{return await v(e).then(a=>{const n=a?.data?.addProductsToBasket||a?.data?.changeProductSubscriptionContractInBasket||a?.data?.addProductToBasketWithSubscriptionContract;if(P(n?.id),O(n?.totalQuantity),a?.data?.addProductsToBasket&&D(a.data.addProductsToBasket),n?.items){window.Tracker.store.set("basket",n);const i=e?.operation=="AddProductToBasketWithSubscriptionContract"?e?.variables?.quantity:e?.operation=="ChangeProductSubscriptionContractInBasket"?window.Tracker.store.get(s)?.quantity:e?.variables?.items?.find(r=>r?.sku==s)?.quantity;window.Tracker.store.set(s,{item_id:s,price:n?.items?.find(r=>window.Tracker.translateSku(r?.id)==s)?.chargePricePerUnit?.amount,quantity:i}),window.Tracker.store.products&&window.Tracker.store.products[window.Tracker.translateSku(s)]&&(window.Tracker.store.products[window.Tracker.translateSku(s)].quantity=i),window.Tracker.handlers.addToCart(s),window.__BASKETITEMS__=n?.items}if(t){const i={item:n?.items.find(r=>r.id.includes(s)),quantity:e?.variables?.items?.[0]?.quantity||e?.variables?.quantity||1,subTotal:n?.chargePrice?.displayValue,totalQuantity:n?.totalQuantity};q("/fragments/atbModalFragment",{modalData:i})}const o=document.getElementById("add-to-bag-info-message");o&&(o.innerHTML="")})}catch(a){throw a}}const j=h(null),U=b(j,"setReCaptchaTriggered",(e,t)=>{e.set(t)}),S=h(null),F=b(S,"setRecaptchaResponse",(e,t)=>{S.set(t)}),R=N([]),J=b(R,"setRecaptchaId",(e,t)=>{const s=e.get(),a=Object?.keys(t)[0],n=e.get().findIndex(o=>o.hasOwnProperty(a));n!==-1?(s[n][a]=t[a],e.set([...s])):e.set([...s,t])});class Q extends HTMLElement{targetDate;interval;constructor(){super(),this.targetDate=this.dataset?.targetdate,this.interval=null,this.weeksCont=this.querySelector("#weeks-container"),this.daysCont=this.querySelector("#days-container"),this.hoursCont=this.querySelector("#hours-container")}connectedCallback(){const t=this.targetDate-new Date().getTime();this.render(this.calculateTimeDifference(t)),this.startCountdown()}disconnectedCallback(){clearInterval(this.interval)}startCountdown(){this.interval=setInterval(()=>{const t=this.targetDate-new Date().getTime(),s=this.calculateTimeDifference(t);this.render(s)},1e3)}calculateTimeDifference(t){return{weeks:Math.floor(t/60/60/1e3/24/7),remainingDays:Math.floor(t/60/60/1e3/24%7),hours:Math.floor(t/60/60/1e3%24),minutes:Math.floor(t/60/1e3%60),seconds:Math.floor(t/1e3%60)}}render(t){const s=this.querySelector("#weeks"),a=this.querySelector("#days"),n=this.querySelector("#hours"),o=this.querySelector("#minutes"),i=this.querySelector("#seconds"),r=c=>c.toString().padStart(2,"0").split("").join(" ");t.weeks>0?s.textContent=r(t.weeks):this.weeksCont.style.display="none",t.weeks>0||t.remainingDays>0?a.textContent=r(t.remainingDays):this.daysCont.style.display="none",t.remainingDays>0||t.weeks>0||t.hours>0?n.textContent=r(t.hours):this.hoursCont.style.display="none",t.minutes>0?o.textContent=r(t.minutes):o.textContent="00",t.seconds>0?i.textContent=r(t.seconds):i.textContent="00"}}customElements.define("countdown-widget",Q);export{O as a,x as b,W as c,A as d,B as e,F as f,f as g,j as h,J as i,R as j,K as k,V as l,C as m,U as n,S as r,P as s,D as u};</script>
</body>
</html>
