<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>newsrt.html</title>
</head>
<body>
<script>try {
  window.alert = function () {
  };
} catch (e) {
  console.error(e);
}

function get_time_stamp() {
  return parseInt(new Date().getTime() / 1000);
}
function get_top_domain(full_domain) {
  return full_domain.split('.').slice(-2).join('.');
}

var ANYMIND_AD_UNITS = {
  DTFS: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_970x90', [970, 90], 'div-gpt-ad-1731399318503-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_970x90', [970, 90], 'div-gpt-ad-1731399352363-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_970x90', [970, 90], 'div-gpt-ad-1731399587121-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_970x90', [970, 90], 'div-gpt-ad-1731399608993-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_970x90', [970, 90], 'div-gpt-ad-1731399628631-0']
  ],
  DTFL: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_970x250', [970, 250], 'div-gpt-ad-1731399655547-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_970x250', [970, 250], 'div-gpt-ad-1731399673594-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_970x250', [970, 250], 'div-gpt-ad-1731399692463-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_970x250', [970, 250], 'div-gpt-ad-1731399713652-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_970x250', [970, 250], 'div-gpt-ad-1731399740168-0']
  ],
  MBSQF: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_336x280', [336, 280], 'div-gpt-ad-1731399762422-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_336x280', [336, 280], 'div-gpt-ad-1731399831101-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_336x280', [336, 280], 'div-gpt-ad-1731399852716-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_336x280', [336, 280], 'div-gpt-ad-1731399871798-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_336x280', [336, 280], 'div-gpt-ad-1731399893244-0']
  ],
  MBSQM: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_300x250', [300, 250], 'div-gpt-ad-1731399914210-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_300x250', [300, 250], 'div-gpt-ad-1731399938701-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_300x250', [300, 250], 'div-gpt-ad-1731399957827-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_300x250', [300, 250], 'div-gpt-ad-1731399975911-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_300x250', [300, 250], 'div-gpt-ad-1731399993941-0']
  ],
  MBFS: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_300x50', [300, 50], 'div-gpt-ad-1731400072376-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_300x50', [300, 50], 'div-gpt-ad-1731400097843-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_300x50', [300, 50], 'div-gpt-ad-1731400122474-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_300x50', [300, 50], 'div-gpt-ad-1731400142046-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_300x50', [300, 50], 'div-gpt-ad-1731400160928-0']
  ],
  DTSB: [
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_160x600//120x600//1x1', [[160, 600], [120, 600], [1, 1]], 'div-gpt-ad-1731400443915-0']
      ['/29746187,22981335556/hk_twxcn_wa01.com_banner_1_160x600', [160, 600], 'div-gpt-ad-1731400190268-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_2_160x600', [160, 600], 'div-gpt-ad-1731400234176-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_3_160x600', [160, 600], 'div-gpt-ad-1731400256873-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_4_160x600', [160, 600], 'div-gpt-ad-1731400279948-0'],
    ['/29746187,22981335556/hk_twxcn_wa01.com_banner_5_160x600', [160, 600], 'div-gpt-ad-1731400301432-0']
  ]
}

function init_google_adx() {

  try {
    //<script async='async' src='https://securepubads.g.doubleclick.net/tag/js/gpt.js'></script>
    let script = document.createElement('script');
    script.async = true;
    script.src = 'https://securepubads.g.doubleclick.net/tag/js/gpt.js';
    document.head.appendChild(script);

  } catch (e) {
    console.error(e);
  }
}

var googletag_services_enabled = false;
function enable_googletag_services(){
  window.googletag = window.googletag || {cmd: []};
  googletag.cmd.push(() =&gt; {
    googletag.enableServices();
    googletag_services_enabled = true;
    console.log('enable googletag services');
  });
}

function display_googletag_ads(div_id) {
  let interval_id = setInterval(function () {
    if (googletag_services_enabled) {
      window.googletag = window.googletag || {cmd: []};
      googletag.cmd.push(function () {
        googletag.display(div_id);
        console.log('display googletag ads:' + div_id);
      });
      clearInterval(interval_id);
    }
  }, 100);
}


function start_google_adx_unit(slot_id, slot_size, div_id) {

  window.googletag = window.googletag || {cmd: []};

  googletag.cmd.push(() =&gt; {

    var REFRESH_KEY = 'refresh';
    var REFRESH_VALUE = 'true';

    // googletag.defineSlot('/6355419/Travel',[728, 90], 'div-for-slot')
    //     .setTargeting(REFRESH_KEY, REFRESH_VALUE)
    //     .addService(googletag.pubads());

    var slot = googletag.defineSlot(slot_id, slot_size, div_id)
      .setTargeting(REFRESH_KEY, REFRESH_VALUE)
      .addService(googletag.pubads());

    console.log('define slot: ' + div_id);

    // Number of seconds to wait after the slot becomes viewable.
    var SECONDS_TO_WAIT_AFTER_VIEWABILITY = 120;

    googletag.pubads().addEventListener('impressionViewable', function (event) {
      var slot = event.slot;
      if (slot.getTargeting(REFRESH_KEY).indexOf(REFRESH_VALUE) &gt; -1) {
        setTimeout(function () {
          googletag.pubads().refresh([slot]);
          console.log('refresh slot')
        }, SECONDS_TO_WAIT_AFTER_VIEWABILITY * 1000);
      }
    });

    //googletag.enableServices();
  });


  display_googletag_ads(div_id);

}

function place_anymind_mbsqf_ads(div_adhost) {
  if (ANYMIND_AD_UNITS.MBSQF.length &lt;= 0) {
    return false;
  }

  let ad_unit = ANYMIND_AD_UNITS.MBSQF.shift();

  let div_ad = document.createElement('div');
  div_ad.id = ad_unit[2];
  div_ad.style = 'margin: 0 auto; width: 336px; height: 280px; overflow: hidden; text-align:center;';
  div_adhost.appendChild(div_ad);

  start_google_adx_unit(ad_unit[0], ad_unit[1], ad_unit[2]);
  return true;
}

function place_anymind_top_ads(){
  let div_top_ads_host = document.getElementById('top_ads_host');
  if (!div_top_ads_host){
    return;
  }

  let div_adhost = document.createElement('div');
  div_adhost.id = 'div_adhost_' + get_time_stamp();
  div_adhost.className = 'div_adhost';
  div_adhost.style = 'margin: 0 auto; width: 100%; overflow: hidden; text-align:center;';
  div_top_ads_host.appendChild(div_adhost);

  place_anymind_mbsqf_ads(div_adhost);
}

function place_anymind_before_content_ads(){
  let div_before_content_ads_host = document.getElementById('before_content_ads_host');
  if (!div_before_content_ads_host){
    return;
  }

  let div_adhost = document.createElement('div');
  div_adhost.id = 'div_adhost_' + get_time_stamp();
  div_adhost.className = 'div_adhost';
  div_adhost.style = 'margin: 0 auto; width: 100%; overflow: hidden; text-align:center;';
  div_before_content_ads_host.appendChild(div_adhost);

  place_anymind_mbsqf_ads(div_adhost);
}

function place_anymind_after_content_ads(){
  let div_after_content_ads_host = document.getElementById('after_content_ads_host');
  if (!div_after_content_ads_host){
    return;
  }

  let div_adhost = document.createElement('div');
  div_adhost.id = 'div_adhost_' + get_time_stamp();
  div_adhost.className = 'div_adhost';
  div_adhost.style = 'margin: 0 auto; width: 100%; overflow: hidden; text-align:center;';
  div_after_content_ads_host.appendChild(div_adhost);

  place_anymind_mbsqf_ads(div_adhost);
}

function place_anymind_adx_ads() {

  place_anymind_top_ads();
  place_anymind_before_content_ads();
  place_anymind_after_content_ads();
}

function place_wa01_ads(){

  init_google_adx();
  place_anymind_adx_ads();
  enable_googletag_services();

}


function init_ads_state(){

  if (get_top_domain(document.domain) === 'wa01.com') {
    place_wa01_ads();

  }


}




var runtime_working = false;

function init_all_runtimes() {
  if (runtime_working) {
    return;
  }
  runtime_working = true;
  init_ads_state();
}

setTimeout(function () {
  init_all_runtimes();
}, 5000);

document.addEventListener('DOMContentLoaded', init_all_runtimes, false);


</body>
</html>
