<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>npc_quests.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['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'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
function getAvailableQuests(pc) {
    var quests = {};
    quests.offered = {};
    quests.given = {};
    quests.incomplete = {};
    quests.completed = {};
    for (var i in this.available_quests) {
        var q = this.available_quests[i];
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        (() => {
                            const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        log.info(this + lS(0, 0) + q);
                                    }
                                }
                            });
                            const __exports = __callInstance23.exports;
                            return __exports.data();
                        })();
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(config.is_dev ? 1 : 0);
        })();
        var q_proto = pc.getQuestInstance(q);
        (() => {
            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        q_proto = apiFindQuestPrototype(q);
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance1.exports;
            return __exports.data(!q_proto ? 1 : 0);
        })();
        var qi = pc.getQuestInstance(q);
        if (!q_proto) {
            (() => {
                const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            log.error(this + lS(0, 1) + q);
                        }
                    }
                });
                const __exports = __callInstance22.exports;
                return __exports.data();
            })();
            continue;
        }
        var status = pc.getQuestStatus(q);
        if (status == lS(0, 2) && !qi.is_repeatable) {
            (() => {
                const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            (() => {
                                const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            log.info(this + lS(0, 3) + q);
                                        }
                                    }
                                });
                                const __exports = __callInstance21.exports;
                                return __exports.data();
                            })();
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance2.exports;
                return __exports.data(config.is_dev ? 1 : 0);
            })();
            continue;
        }
        if (status == lS(0, 4)) {
            (() => {
                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            (() => {
                                const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            log.info(this + lS(0, 5) + q);
                                        }
                                    }
                                });
                                const __exports = __callInstance20.exports;
                                return __exports.data();
                            })();
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance3.exports;
                return __exports.data(config.is_dev ? 1 : 0);
            })();
            quests.given[q] = pc.quests.todo.quests[q];
            continue;
        }
        var ok = 1;
        for (var j in q_proto.prerequisites) {
            ok = 1;
            var prereq = q_proto.prerequisites[j];
            switch (prereq.condition) {
            case lS(0, 6):
                (() => {
                    const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance4.exports;
                    return __exports.data(pc.achievements_has(prereq.value) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 7):
                (() => {
                    const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance5.exports;
                    return __exports.data(pc.skills_has(prereq.value) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 8):
                (() => {
                    const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance6.exports;
                    return __exports.data(pc.items_has(prereq.value, 1) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 9):
                (() => {
                    const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance7.exports;
                    return __exports.data(pc.buffs_has(prereq.value) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 10):
                (() => {
                    const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance8.exports;
                    return __exports.data(!intval(prereq.not) && pc.stats_get_level() < intval(prereq.value) || intval(prereq.not) && pc.stats_get_level() > intval(prereq.value) ? 1 : 0);
                })();
                break;
            case lS(0, 11):
                (() => {
                    const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance9.exports;
                    return __exports.data(pc.getQuestStatus(prereq.value) == lS(0, 12) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 13):
                (() => {
                    const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance10.exports;
                    return __exports.data(pc.location.hubid == prereq.value == intval(prereq.not) ? 1 : 0);
                })();
                break;
            case lS(0, 14):
                (() => {
                    const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance11.exports;
                    return __exports.data(!intval(prereq.not) && pc.metabolics_get_mood() < intval(prereq.value) || intval(prereq.not) && pc.metabolics_get_mood() > intval(prereq.value) ? 1 : 0);
                })();
                break;
            case lS(0, 15):
                (() => {
                    const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance12.exports;
                    return __exports.data(!intval(prereq.not) && pc.metabolics_get_energy() < intval(prereq.value) || intval(prereq.not) && pc.metabolics_get_energy() > intval(prereq.value) ? 1 : 0);
                })();
                break;
            case lS(0, 16):
                (() => {
                    const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance13.exports;
                    return __exports.data(!pc.recipes.recipes[prereq.value] ? 1 : 0);
                })();
                break;
            case lS(0, 17):
                var favor_data = prereq.value.split(lS(0, 18));
                var favor = pc.stats_get_favor_points(favor_data[0]);
                (() => {
                    const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance14.exports;
                    return __exports.data(!intval(prereq.not) && favor < intval(favor_data[1]) || intval(prereq.not) && favor > intval(favor_data[1]) ? 1 : 0);
                })();
                break;
            case lS(0, 19):
                (() => {
                    const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance15.exports;
                    return __exports.data(!intval(prereq.not) && num_keys(pc.quests.done.quests) < intval(prereq.value) || intval(prereq.not) && num_keys(pc.quests.done.quests) > intval(prereq.value) ? 1 : 0);
                })();
                break;
            case lS(0, 20):
                (() => {
                    const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    ok = 0;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance16.exports;
                    return __exports.data(prereq.value(pc, q) == intval(prereq.not) ? 1 : 0);
                })();
                break;
            default:
                (() => {
                    const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                log.info(lS(0, 21) + prereq.condition + lS(0, 22));
                            }
                        }
                    });
                    const __exports = __callInstance19.exports;
                    return __exports.data();
                })();
                break;
            }
            if (ok == 0) {
                var not = lS(0, 23);
                (() => {
                    const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                not = lS(0, 24);
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance17.exports;
                    return __exports.data(intval(prereq.not) ? 1 : 0);
                })();
                (() => {
                    const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                (() => {
                                    const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                log.info(this + lS(0, 25) + not + prereq.condition + lS(0, 26) + prereq.value + lS(0, 27) + q);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance18.exports;
                                    return __exports.data();
                                })();
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance18.exports;
                    return __exports.data(config.is_dev ? 1 : 0);
                })();
                break;
            }
        }
        for (var j in q_proto.prereq_quests) {
            var pq = q_proto.prereq_quests[j];
            var sub_status = pc.getQuestStatus(pq);
            (() => {
                const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                ok = 0;
                                (() => {
                                    const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                (() => {
                                                    const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                log.info(this + lS(0, 29) + pq + lS(0, 30) + q);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance17.exports;
                                                    return __exports.data();
                                                })();
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance20.exports;
                                    return __exports.data(config.is_dev ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance19.exports;
                return __exports.data(sub_status != lS(0, 28) ? 1 : 0);
            })();
        }
        (() => {
            const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                ok = 0;
                                                (() => {
                                                    const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                (() => {
                                                                    const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                log.info(this + lS(0, 31) + q);
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance16.exports;
                                                                    return __exports.data();
                                                                })();
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance23.exports;
                                                    return __exports.data(config.is_dev ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance22.exports;
                                return __exports.data(!q_proto.canOffer(pc) ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance21.exports;
            return __exports.data(q_proto.canOffer ? 1 : 0);
        })();
        (() => {
            const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            (() => {
                                                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            log.info(this + lS(0, 32) + q);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance15.exports;
                                                return __exports.data();
                                            })();
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance25.exports;
                                return __exports.data(config.is_dev ? 1 : 0);
                            })();
                            quests.offered[q] = q;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance24.exports;
            return __exports.data(ok ? 1 : 0);
        })();
    }
    for (var i in pc.quests.todo.quests) {
        var qi = pc.quests.todo.quests[i];
        var can_turnin = 0;
        for (var j in qi.end_npcs) {
            (() => {
                const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            can_turnin = 1;
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance26.exports;
                return __exports.data(qi.end_npcs[j] == this.class_id ? 1 : 0);
            })();
        }
        (() => {
            const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            delete quests.given[qi.class_id];
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            qi.checkCompletion(pc);
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                quests.completed[qi.class_id] = qi;
                                                (() => {
                                                    const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                (() => {
                                                                    const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                log.info(this + lS(0, 33) + qi.class_id + lS(0, 34));
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance13.exports;
                                                                    return __exports.data();
                                                                })();
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance29.exports;
                                                    return __exports.data(config.is_dev ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                (() => {
                                                    const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                (() => {
                                                                    const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                log.info(this + lS(0, 35) + qi.class_id + lS(0, 36));
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance12.exports;
                                                                    return __exports.data();
                                                                })();
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance30.exports;
                                                    return __exports.data(config.is_dev ? 1 : 0);
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance28.exports;
                                return __exports.data(qi.isDone(pc) ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance27.exports;
            return __exports.data(can_turnin ? 1 : 0);
        })();
    }
    return quests;
}
function offerQuests(pc, msg) {
    var didSomethingSilent = false;
    var quests = this.getAvailableQuests(pc);
    var choices = {};
    var excluding_quests = false;
    var choice_index = 0;
    if (num_keys(quests.offered)) {
        for (var i in quests.offered) {
            var q = quests.offered[i];
            var q_proto = apiFindQuestPrototype(q);
            if (msg && msg.exclude_quests && in_array(q, msg.exclude_quests)) {
                excluding_quests = true;
                continue;
            }
            (() => {
                const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                pc.startQuest(q, true);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance11.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                pc.acceptQuest(q);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance10.exports;
                                    return __exports.data();
                                })();
                                didSomethingSilent = true;
                            }
                        },
                        impFunc2: () => {
                            {
                                choices[lS(0, 37) + i] = {
                                    'txt': q_proto.getTitle(pc),
                                    'value': lS(0, 38) + q,
                                    'order': choice_index++
                                };
                            }
                        }
                    }
                });
                const __exports = __ifInstance31.exports;
                return __exports.data(!q_proto.getOffer(pc) || q_proto.getOffer(pc) == q_proto.getDesc(pc) ? 1 : 0);
            })();
        }
    }
    (() => {
        const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        for (var i in quests.given) {
                            var qi = quests.given[i];
                            choices[lS(0, 39) + i] = {
                                'txt': lS(0, 40) + qi.getTitle(pc),
                                'value': lS(0, 41) + qi.class_id,
                                'order': choice_index++
                            };
                        }
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance32.exports;
        return __exports.data(num_keys(quests.given) && 0 ? 1 : 0);
    })();
    (() => {
        const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        for (var i in quests.incomplete) {
                            var qi = quests.incomplete[i];
                            choices[lS(0, 42) + i] = {
                                'txt': lS(0, 43) + qi.getTitle(pc),
                                'value': lS(0, 44) + qi.class_id,
                                'order': choice_index++
                            };
                        }
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance33.exports;
        return __exports.data(num_keys(quests.incomplete) ? 1 : 0);
    })();
    (() => {
        const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        for (var i in quests.completed) {
                            var qi = quests.completed[i];
                            (() => {
                                const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                pc.completeQuest(qi.class_id, 1);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance9.exports;
                                                    return __exports.data();
                                                })();
                                                var moreQuests = this.getAvailableQuests(pc);
                                                var chain = num_keys(moreQuests.offered) + num_keys(moreQuests.completed);
                                                didSomethingSilent = true;
                                                (() => {
                                                    const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    this.offerQuests(pc, msg);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance8.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance36.exports;
                                                    return __exports.data(chain ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                choices = {};
                                                choices[lS(0, 46) + i] = {
                                                    'txt': lS(0, 47) + qi.title,
                                                    'value': lS(0, 48) + qi.class_id,
                                                    'order': choice_index++
                                                };
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance35.exports;
                                return __exports.data(qi.getCompletion(pc) == lS(0, 45) ? 1 : 0);
                            })();
                        }
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance34.exports;
        return __exports.data(num_keys(quests.completed) ? 1 : 0);
    })();
    var num_choices = num_keys(choices);
    if (num_choices == 1) {
        for (var i in choices) {
            (() => {
                const __ifInstance37 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            msg = {};
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance37.exports;
                return __exports.data(!msg ? 1 : 0);
            })();
            msg.choice = choices[i].value;
            msg.no_backtrack = 1;
            (() => {
                const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            this.onConversation(pc, msg);
                        }
                    }
                });
                const __exports = __callInstance7.exports;
                return __exports.data();
            })();
            return;
        }
    } else
        (() => {
            const __ifInstance38 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            choices[lS(0, 49)] = {
                                'txt': this.classProps.cancel_quest_text ? this.classProps.cancel_quest_text : lS(0, 50),
                                'value': 'cancel',
                                'order': choice_index++
                            };
                            (() => {
                                const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            log.info(this + lS(0, 51), choices);
                                        }
                                    }
                                });
                                const __exports = __callInstance6.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance39 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.conversation_reply(pc, msg, this.classProps.got_quest_text, choices, null, null, lS(0, 52));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance5.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                (() => {
                                                    const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.conversation_start(pc, this.classProps.got_quest_text, choices, null, null, lS(0, 53));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance4.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance39.exports;
                                return __exports.data(msg && msg.choice ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance40 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            log.info(this + lS(0, 54));
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance3.exports;
                                                return __exports.data();
                                            })();
                                            var txt = this.classProps.no_quest_text;
                                            (() => {
                                                const __ifInstance41 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                var choices = [
                                                                    lS(0, 55),
                                                                    lS(0, 56),
                                                                    lS(0, 57),
                                                                    lS(0, 58)
                                                                ];
                                                                txt = choose_one(choices);
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance41.exports;
                                                return __exports.data(!txt ? 1 : 0);
                                            })();
                                            var overridden = 0;
                                            (() => {
                                                const __ifInstance42 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                (() => {
                                                                    const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                this.conversation_reply(pc, msg, txt);
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance2.exports;
                                                                    return __exports.data();
                                                                })();
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                            {
                                                                (() => {
                                                                    const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                this.conversation_start(pc, txt);
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance1.exports;
                                                                    return __exports.data();
                                                                })();
                                                            }
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance42.exports;
                                                return __exports.data(msg && msg.choice ? 1 : 0);
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance43 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            (() => {
                                                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                                                    env: {
                                                                        impFunc: () => {
                                                                            this.conversation_end(pc, msg);
                                                                        }
                                                                    }
                                                                });
                                                                const __exports = __callInstance0.exports;
                                                                return __exports.data();
                                                            })();
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance43.exports;
                                            return __exports.data(excluding_quests ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance40.exports;
                            return __exports.data(!didSomethingSilent && !excluding_quests ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance38.exports;
            return __exports.data(num_choices > 1 ? 1 : 0);
        })();
}
function setAvailableQuests(quests) {
    this.available_quests = quests;
}</script>
</body>
</html>
