<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>b5399905.html</title>
</head>
<body>

<script>
import{j as I,hP as H,X as q,D as ae,bk as se,da as M,o as c,f as y,w as b,O as p,u as e,b9 as W,bO as Q,q as ne,be as re,r as U,bv as ie,bf as F,z as k,bB as J,b6 as V,az as E,ag as oe,aB as le,x as B,b8 as ce,a1 as ue,$ as x,aO as pe,bd as de,aV as ve,bP as K,dh as Z,ah as me,bh as L,cR as ye,aW as _e,_ as C,I as A,K as T,l as N,Z as h,db as ee,cD as O,ar as z,as as j,B as D,ca as te,bm as fe,de as xe,hQ as P,bH as Y,aM as he,b3 as ge,hR as ke}from"./index-efc70e4a.js";import{u as be}from"./833a5690.js";const Se={style:{flex:"auto"}},R=48,we=I({__name:"AppShellNoticeBase",props:{noticeId:{type:Number,required:!0},message:{type:String,required:!0},autoCloseMs:{type:Number,default:void 0,validator:_=>_===void 0||typeof _=="number"&&_>0},animDurationMs:{type:Number,default:500}},emits:{"show-transition-end":()=>!0},setup(_,{emit:g}){const S=_,{remove:n}=H(),{noticeId:v,message:i,autoCloseMs:o,animDurationMs:t}=q(S),{hovered:m,hoverBinding:w}=be();let f;const $=Date.now();let l=$+((o==null?void 0:o.value)??0),a=l-$;ae([m,()=>o==null?void 0:o.value],([u,d])=>{if(d===void 0||d<=0){s();return}u?(s(),a=l-Date.now()):(l=Date.now()+a,f??(f=setTimeout(()=>{n(v.value)},a)))},{immediate:!0}),se(async()=>{await M(t.value),g("show-transition-end")});function s(){f&&(clearTimeout(f),f=void 0)}function r(){s(),n(v.value)}return(u,d)=>(c(),y("div",me({...e(w)},{class:{"anim-fade-enter-right anim-fade-leave-right":!e(L).isXs,"anim-fade-enter-down anim-back-leave-up":e(L).isXs},style:e(ye)({...e(_e)(e(t)>=0,{animationDuration:`${e(t)}ms`}),display:"inline-flex",justifyContent:"flex-end",minWidth:`${Math.min(200,e(L).width-32)}px`,maxWidth:"350px",marginBottom:"4px"})}),[b("a",{class:"fill-offset",style:p({...e(de)(2),...e(ve),border:`${e(K).px} solid ${e(Z)}`,borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none",padding:"8px 12px",display:"flex",alignItems:"center"}),onClick:r},[b("div",{style:p({...e(W),height:`${R-8}px`,width:"8px",background:e(Q),marginRight:"8px",overflow:"hidden"})},[b("div",{class:ne({"_anim-progress":e(o)}),style:p({...e(W),animationDuration:`${e(o)}ms`,animationPlayState:e(m)?"paused":"running",animationFillMode:"both",animationTimingFunction:"linear",width:"100%",height:"100%",background:e(re)})},null,6)],4),b("div",{style:p({width:`${R}px`,height:`${R}px`,flex:"none",marginRight:"8px",position:"relative"})},[U(u.$slots,"leading",oe(le({size:R})),()=>[b("div",{class:"fill-offset",style:p({...e(ie)(),...e(F)(),borderRadius:"50%"})},[k(E,{icon:"notice",style:p({margin:0,fontSize:e(J).px,color:e(V)})},null,8,["style"])],4)],!0)],4),b("div",Se,[b("div",null,B(e(i)),1),b("div",{style:p({color:e(V),fontSize:e(ce).px})},[U(u.$slots,"subtext",{},()=>[ue(B(e(x)("Click to dismiss")),1)],!0)],4)]),k(pe,{horizontal:"",scale:4})],4)],16))}});const G=C(we,[["__scopeId","data-v-ea6763b5"]]),Ne=I({__name:"AppShellNoticeCreatorExperience",props:{noticeId:{type:Number,required:!0},data:{type:Object,required:!0}},setup(_){const g=_,{noticeId:S,data:n}=q(g),v=A(500),i=A({percent:0,text:0}),o=T(()=>{const l=n.value.experience.current_level_xp,a=Math.max(0,l-n.value.xpGained),s=n.value.experience.current_level;let r=s;n.value.leveledUp&&(r-=1);const u=n.value.leveledUp?0:a/n.value.experience.current_level_xp_required,d=n.value.experience.is_max_level?1:l/n.value.experience.current_level_xp_required;return{currentExperience:l,currentPercent:d,currentLevel:s,previousExperience:a,previousPercent:u,previousLevel:r}}),{previousLevel:t,previousPercent:m}=o.value;i.value={percent:m,text:t};const w=T(()=>{const{leveledUp:l,experience:{current_level:a},xpGained:s}=n.value;return l?x("Level up! You are now level %{ level }.",{level:a}):x("You gained %{ xpGained } experience.",{xpGained:s})}),f=T(()=>{const l=[];return n.value.experience.is_max_level?l.push(x("You've reached the max level... for now."),x("Check your dashboard later for more rewards!")):n.value.experience.ability_on_level_up_display&&l.push(x("Next reward")+`: ${n.value.experience.ability_on_level_up_display}`),l});async function $(){const{currentLevel:l,currentPercent:a}=o.value,{experience:s,leveledUp:r,xpGained:u}=n.value,d=r?1:a;r?i.value.percent=d:i.value={percent:d,text:`+${u}xp`,styles:{fontSize:te.px,textAlign:"center"}},await M(v.value+1e3),i.value={percent:d,text:l},r&&!s.is_max_level&&(v.value=0,i.value.percent=0,await M(50),v.value=500,i.value.percent=a)}return(l,a)=>(c(),N(G,{"notice-id":e(S),message:w.value,"auto-close-ms":5e3,onShowTransitionEnd:a[0]||(a[0]=s=>$())},{leading:h(()=>[k(ee,{style:{width:"100%",height:"100%"},"transition-ms":v.value,percent:i.value.percent},{default:h(()=>[k(O,{name:"fade"},{default:h(()=>[(c(),y("span",{key:`${i.value.text}-${JSON.stringify(i.value.styles)}`,style:p(i.value.styles)},B(i.value.text),5))]),_:1})]),_:1},8,["transition-ms","percent"])]),subtext:h(()=>[f.value.length?(c(!0),y(z,{key:0},j(f.value,s=>(c(),y("div",{key:s},B(s),1))),128)):D("",!0)]),_:1},8,["notice-id","message"]))}});const $e=C(Ne,[["__scopeId","data-v-265f8fe6"]]),X=500,Te=I({__name:"AppShellNoticeStickerMastery",props:{noticeId:{type:Number,required:!0},data:{type:Object,required:!0}},setup(_){const g=_,{noticeId:S,data:n}=q(g),v=xe.value*2;let i;const o=T(()=>{const a=Math.max(1,n.value.max),s=P(n.value.progress,0,a),r=s>=a,u=P(s/a,0,1),d=P(u-1/a,0,1);return{progress:s,maxProgress:a,currentPercent:u,previousPercent:d,isMax:r}}),t=A({key:0,percent:o.value.previousPercent,type:"sticker"});function m(a){t.value={...a,key:t.value.key+1}}const w=T(()=>o.value.isMax?x("You mastered this sticker!"):x("You gained some progress towards mastering this sticker.")),f=T(()=>{const{progress:a,maxProgress:s,isMax:r}=o.value;return r?[x("It can be used as a reaction now.")]:[x("Place %{ count } more to master it.",{count:Math.max(1,s-a)})]});async function $(){const{currentPercent:a,isMax:s,previousPercent:r}=o.value,u=s?1:a,d=P(Math.round((a-r)*100),0,100);m(s?{percent:u,type:"jolticon",icon:"star"}:{percent:u,type:"text",text:`+${d}%`,styles:{fontSize:te.px}}),await M(X+1e3),m({percent:u,type:"sticker"})}function l(a){if((i==null?void 0:i.diameter)===a)return i.squareDimension;const s=a-v*2,r=2,u=Math.floor(Math.SQRT2*(s/2)/1)-r*2;return i={diameter:a,squareDimension:u},u}return(a,s)=>(c(),N(G,{"notice-id":e(S),message:w.value,"auto-close-ms":5e3,onShowTransitionEnd:s[0]||(s[0]=r=>$())},{leading:h(({size:r})=>[k(ee,{style:{width:"100%",height:"100%"},"transition-ms":X,percent:t.value.percent,"stroke-width":v},{default:h(()=>[k(O,{name:"fade"},{default:h(()=>[t.value.type==="text"?(c(),y("span",{key:t.value.key,style:p(t.value.styles)},B(t.value.text),5)):(c(),y("div",{key:t.value.key,style:p({width:`${l(r)}px`,height:`${l(r)}px`,...e(F)()})},[t.value.type==="sticker"?(c(),N(fe,{key:0,src:e(n).sticker.img_url,style:{width:"100%",height:"100%"}},null,8,["src"])):(c(),N(E,{key:1,icon:t.value.icon,style:p({margin:0,fontSize:e(J).px})},null,8,["icon","style"]))],4))]),_:2},1024)]),_:2},1032,["percent"])]),subtext:h(()=>[f.value.length?(c(!0),y(z,{key:0},j(f.value,r=>(c(),y("div",{key:r},B(r),1))),128)):D("",!0)]),_:1},8,["notice-id","message"]))}});const Be=C(Te,[["__scopeId","data-v-609f576a"]]),Me=I({__name:"AppShellNotice",setup(_){const{notices:g,remove:S}=H(),n=A(!1);async function v(){if(n.value)return;n.value=!0;const i=[...g.value],o=50;let t=0,m=0;for(const w of i)m<10&&(++m,t=o*m),setTimeout(()=>S(w.id),t);await M(t),n.value=!1}return(i,o)=>(c(),y("div",{class:"shell-notice-container",style:p({top:"56px",display:"grid",justifyItems:"end"})},[k(O,null,{default:h(()=>[e(g).length>0&&!n.value?(c(),y("a",{key:0,class:"_close anim-fade-enter-right anim-fade-leave-right",style:p({borderTopLeftRadius:e(Y).px,borderBottomLeftRadius:e(Y).px,backgroundColor:e(Q),border:`${e(K).px} solid ${e(Z)}`,borderRight:"none",padding:"12px 16px",marginBottom:"8px",...e(F)()}),onClick:o[0]||(o[0]=he(t=>v(),["stop"]))},[k(E,{icon:"remove",style:p({margin:0,color:e(ge)})},null,8,["style"])],4)):D("",!0)]),_:1}),k(ke,null,{default:h(()=>[(c(!0),y(z,null,j(e(g),t=>(c(),y(z,{key:t.id},[t.data.type==="creator-experience"?(c(),N($e,{key:0,"notice-id":t.id,data:t.data},null,8,["notice-id","data"])):t.data.type==="sticker-mastery"?(c(),N(Be,{key:1,"notice-id":t.id,data:t.data},null,8,["notice-id","data"])):t.data.type==="custom-message"?(c(),N(G,{key:2,"notice-id":t.id,message:t.data.message,"auto-close-ms":t.data.autoCloseMs},null,8,["notice-id","message","auto-close-ms"])):D("",!0)],64))),128))]),_:1})],4))}});const Ae=C(Me,[["__scopeId","data-v-cf58264f"]]);export{Ae as default};

</script>

</body>
</html>
