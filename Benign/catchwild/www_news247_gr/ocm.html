<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ocm.html</title>
</head>
<body>

<script>
/** news247.gr ocm.js-build-2.20241125112941 **/

(()=>{var pi=t=>e=>{var i=t[e];if(i)return i();throw new Error("Module not found in bundle: "+e)};var Lr=(t,e)=>()=>(t&&(e=t(t=0)),e);var V=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var nn=V((sf,ts)=>{var es="adlightning";ts.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("adlightning_start"),this.utils.log.info(es,"Running...");let n=this.utils.window.document.createElement("script");n.setAttribute("defer",""),this.config.services.adlightning.site&&this.config.services.adlightning.site!==""?n.src=`https://tagan.adlightning.com/orangeclickmedia-${this.config.services.adlightning.site}/op.js`:n.src="https://tagan.adlightning.com/orangeclickmedia/op.js",n.onload=()=>e({name:es}),this.utils.doc_head.appendChild(n)})}}});var rn=V((af,is)=>{"use strict";is.exports=function(e,i){return function(){for(var r=new Array(arguments.length),s=0;s<r.length;s++)r[s]=arguments[s];return e.apply(i,r)}}});var Xe=V((of,ss)=>{"use strict";var dl=rn(),Bt=Object.prototype.toString;function on(t){return Bt.call(t)==="[object Array]"}function sn(t){return typeof t>"u"}function cl(t){return t!==null&&!sn(t)&&t.constructor!==null&&!sn(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function hl(t){return Bt.call(t)==="[object ArrayBuffer]"}function fl(t){return typeof FormData<"u"&&t instanceof FormData}function pl(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function gl(t){return typeof t=="string"}function ml(t){return typeof t=="number"}function ns(t){return t!==null&&typeof t=="object"}function yi(t){if(Bt.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function vl(t){return Bt.call(t)==="[object Date]"}function yl(t){return Bt.call(t)==="[object File]"}function wl(t){return Bt.call(t)==="[object Blob]"}function rs(t){return Bt.call(t)==="[object Function]"}function bl(t){return ns(t)&&rs(t.pipe)}function Sl(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function xl(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function El(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ln(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),on(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function an(){var t={};function e(r,s){yi(t[s])&&yi(r)?t[s]=an(t[s],r):yi(r)?t[s]=an({},r):on(r)?t[s]=r.slice():t[s]=r}for(var i=0,n=arguments.length;i<n;i++)ln(arguments[i],e);return t}function _l(t,e,i){return ln(e,function(r,s){i&&typeof r=="function"?t[s]=dl(r,i):t[s]=r}),t}function Al(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}ss.exports={isArray:on,isArrayBuffer:hl,isBuffer:cl,isFormData:fl,isArrayBufferView:pl,isString:gl,isNumber:ml,isObject:ns,isPlainObject:yi,isUndefined:sn,isDate:vl,isFile:yl,isBlob:wl,isFunction:rs,isStream:bl,isURLSearchParams:Sl,isStandardBrowserEnv:El,forEach:ln,merge:an,extend:_l,trim:xl,stripBOM:Al}});var un=V((lf,os)=>{"use strict";var Gt=Xe();function as(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}os.exports=function(e,i,n){if(!i)return e;var r;if(n)r=n(i);else if(Gt.isURLSearchParams(i))r=i.toString();else{var s=[];Gt.forEach(i,function(l,u){l===null||typeof l>"u"||(Gt.isArray(l)?u=u+"[]":l=[l],Gt.forEach(l,function(v){Gt.isDate(v)?v=v.toISOString():Gt.isObject(v)&&(v=JSON.stringify(v)),s.push(as(u)+"="+as(v))}))}),r=s.join("&")}if(r){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}});var us=V((uf,ls)=>{"use strict";var Il=Xe();function wi(){this.handlers=[]}wi.prototype.use=function(e,i,n){return this.handlers.push({fulfilled:e,rejected:i,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};wi.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};wi.prototype.forEach=function(e){Il.forEach(this.handlers,function(n){n!==null&&e(n)})};ls.exports=wi});var cs=V((df,ds)=>{"use strict";var Cl=Xe();ds.exports=function(e,i){Cl.forEach(e,function(r,s){s!==i&&s.toUpperCase()===i.toUpperCase()&&(e[i]=r,delete e[s])})}});var dn=V((cf,hs)=>{"use strict";hs.exports=function(e,i,n,r,s){return e.config=i,n&&(e.code=n),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var cn=V((hf,fs)=>{"use strict";var Fl=dn();fs.exports=function(e,i,n,r,s){var a=new Error(e);return Fl(a,i,n,r,s)}});var gs=V((ff,ps)=>{"use strict";var Tl=cn();ps.exports=function(e,i,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):i(Tl("Request failed with status code "+n.status,n.config,null,n.request,n))}});var vs=V((pf,ms)=>{"use strict";var bi=Xe();ms.exports=bi.isStandardBrowserEnv()?function(){return{write:function(i,n,r,s,a,o){var l=[];l.push(i+"="+encodeURIComponent(n)),bi.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),bi.isString(s)&&l.push("path="+s),bi.isString(a)&&l.push("domain="+a),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var ws=V((gf,ys)=>{"use strict";ys.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var Ss=V((mf,bs)=>{"use strict";bs.exports=function(e,i){return i?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e}});var Es=V((vf,xs)=>{"use strict";var Pl=ws(),Rl=Ss();xs.exports=function(e,i){return e&&!Pl(i)?Rl(e,i):i}});var As=V((yf,_s)=>{"use strict";var hn=Xe(),Dl=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];_s.exports=function(e){var i={},n,r,s;return e&&hn.forEach(e.split(`
`),function(o){if(s=o.indexOf(":"),n=hn.trim(o.substr(0,s)).toLowerCase(),r=hn.trim(o.substr(s+1)),n){if(i[n]&&Dl.indexOf(n)>=0)return;n==="set-cookie"?i[n]=(i[n]?i[n]:[]).concat([r]):i[n]=i[n]?i[n]+", "+r:r}}),i}});var Fs=V((wf,Cs)=>{"use strict";var Is=Xe();Cs.exports=Is.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function r(s){var a=s;return e&&(i.setAttribute("href",a),a=i.href),i.setAttribute("href",a),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=r(window.location.href),function(a){var o=Is.isString(a)?r(a):a;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()});var pn=V((bf,Ts)=>{"use strict";var Si=Xe(),Ol=gs(),kl=vs(),Nl=un(),Bl=Es(),Ml=As(),jl=Fs(),fn=cn();Ts.exports=function(e){return new Promise(function(n,r){var s=e.data,a=e.headers,o=e.responseType;Si.isFormData(s)&&delete a["Content-Type"];var l=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(u+":"+p)}var v=Bl(e.baseURL,e.url);l.open(e.method.toUpperCase(),Nl(v,e.params,e.paramsSerializer),!0),l.timeout=e.timeout;function h(){if(l){var g="getAllResponseHeaders"in l?Ml(l.getAllResponseHeaders()):null,f=!o||o==="text"||o==="json"?l.responseText:l.response,y={data:f,status:l.status,statusText:l.statusText,headers:g,config:e,request:l};Ol(n,r,y),l=null}}if("onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(h)},l.onabort=function(){l&&(r(fn("Request aborted",e,"ECONNABORTED",l)),l=null)},l.onerror=function(){r(fn("Network Error",e,null,l)),l=null},l.ontimeout=function(){var f="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(f=e.timeoutErrorMessage),r(fn(f,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},Si.isStandardBrowserEnv()){var d=(e.withCredentials||jl(v))&&e.xsrfCookieName?kl.read(e.xsrfCookieName):void 0;d&&(a[e.xsrfHeaderName]=d)}"setRequestHeader"in l&&Si.forEach(a,function(f,y){typeof s>"u"&&y.toLowerCase()==="content-type"?delete a[y]:l.setRequestHeader(y,f)}),Si.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&o!=="json"&&(l.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&l.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(f){l&&(l.abort(),r(f),l=null)}),s||(s=null),l.send(s)})}});var Ei=V((Sf,Ds)=>{"use strict";var Le=Xe(),Ps=cs(),Ll=dn(),zl={"Content-Type":"application/x-www-form-urlencoded"};function Rs(t,e){!Le.isUndefined(t)&&Le.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Hl(){var t;return typeof XMLHttpRequest<"u"?t=pn():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(t=pn()),t}function Vl(t,e,i){if(Le.isString(t))try{return(e||JSON.parse)(t),Le.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(i||JSON.stringify)(t)}var xi={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Hl(),transformRequest:[function(e,i){return Ps(i,"Accept"),Ps(i,"Content-Type"),Le.isFormData(e)||Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)?e:Le.isArrayBufferView(e)?e.buffer:Le.isURLSearchParams(e)?(Rs(i,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Le.isObject(e)||i&&i["Content-Type"]==="application/json"?(Rs(i,"application/json"),Vl(e)):e}],transformResponse:[function(e){var i=this.transitional,n=i&&i.silentJSONParsing,r=i&&i.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||r&&Le.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?Ll(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};xi.headers={common:{Accept:"application/json, text/plain, */*"}};Le.forEach(["delete","get","head"],function(e){xi.headers[e]={}});Le.forEach(["post","put","patch"],function(e){xi.headers[e]=Le.merge(zl)});Ds.exports=xi});var ks=V((xf,Os)=>{"use strict";var ql=Xe(),Ul=Ei();Os.exports=function(e,i,n){var r=this||Ul;return ql.forEach(n,function(a){e=a.call(r,e,i)}),e}});var gn=V((Ef,Ns)=>{"use strict";Ns.exports=function(e){return!!(e&&e.__CANCEL__)}});var js=V((_f,Ms)=>{"use strict";var Bs=Xe(),mn=ks(),Kl=gn(),Gl=Ei();function vn(t){t.cancelToken&&t.cancelToken.throwIfRequested()}Ms.exports=function(e){vn(e),e.headers=e.headers||{},e.data=mn.call(e,e.data,e.headers,e.transformRequest),e.headers=Bs.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Bs.forEach(["delete","get","head","post","put","patch","common"],function(r){delete e.headers[r]});var i=e.adapter||Gl.adapter;return i(e).then(function(r){return vn(e),r.data=mn.call(e,r.data,r.headers,e.transformResponse),r},function(r){return Kl(r)||(vn(e),r&&r.response&&(r.response.data=mn.call(e,r.response.data,r.response.headers,e.transformResponse))),Promise.reject(r)})}});var yn=V((Af,Ls)=>{"use strict";var Ve=Xe();Ls.exports=function(e,i){i=i||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],o=["validateStatus"];function l(h,d){return Ve.isPlainObject(h)&&Ve.isPlainObject(d)?Ve.merge(h,d):Ve.isPlainObject(d)?Ve.merge({},d):Ve.isArray(d)?d.slice():d}function u(h){Ve.isUndefined(i[h])?Ve.isUndefined(e[h])||(n[h]=l(void 0,e[h])):n[h]=l(e[h],i[h])}Ve.forEach(r,function(d){Ve.isUndefined(i[d])||(n[d]=l(void 0,i[d]))}),Ve.forEach(s,u),Ve.forEach(a,function(d){Ve.isUndefined(i[d])?Ve.isUndefined(e[d])||(n[d]=l(void 0,e[d])):n[d]=l(void 0,i[d])}),Ve.forEach(o,function(d){d in i?n[d]=l(e[d],i[d]):d in e&&(n[d]=l(void 0,e[d]))});var p=r.concat(s).concat(a).concat(o),v=Object.keys(e).concat(Object.keys(i)).filter(function(d){return p.indexOf(d)===-1});return Ve.forEach(v,u),n}});var zs=V((If,$l)=>{$l.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Ks=V((Cf,Us)=>{"use strict";var Vs=zs(),wn={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){wn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Hs={},Wl=Vs.version.split(".");function qs(t,e){for(var i=e?e.split("."):Wl,n=t.split("."),r=0;r<3;r++){if(i[r]>n[r])return!0;if(i[r]<n[r])return!1}return!1}wn.transitional=function(e,i,n){var r=i&&qs(i);function s(a,o){return"[Axios v"+Vs.version+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return function(a,o,l){if(e===!1)throw new Error(s(o," has been removed in "+i));return r&&!Hs[o]&&(Hs[o]=!0,console.warn(s(o," has been deprecated since v"+i+" and will be removed in the near future"))),e?e(a,o,l):!0}};function Jl(t,e,i){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),r=n.length;r-- >0;){var s=n[r],a=e[s];if(a){var o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(i!==!0)throw Error("Unknown option "+s)}}Us.exports={isOlderVersion:qs,assertOptions:Jl,validators:wn}});var Ys=V((Ff,Xs)=>{"use strict";var Ws=Xe(),Xl=un(),Gs=us(),$s=js(),_i=yn(),Js=Ks(),$t=Js.validators;function ri(t){this.defaults=t,this.interceptors={request:new Gs,response:new Gs}}ri.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=_i(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var i=e.transitional;i!==void 0&&Js.assertOptions(i,{silentJSONParsing:$t.transitional($t.boolean,"1.0.0"),forcedJSONParsing:$t.transitional($t.boolean,"1.0.0"),clarifyTimeoutError:$t.transitional($t.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(r=r&&h.synchronous,n.unshift(h.fulfilled,h.rejected))});var s=[];this.interceptors.response.forEach(function(h){s.push(h.fulfilled,h.rejected)});var a;if(!r){var o=[$s,void 0];for(Array.prototype.unshift.apply(o,n),o=o.concat(s),a=Promise.resolve(e);o.length;)a=a.then(o.shift(),o.shift());return a}for(var l=e;n.length;){var u=n.shift(),p=n.shift();try{l=u(l)}catch(v){p(v);break}}try{a=$s(l)}catch(v){return Promise.reject(v)}for(;s.length;)a=a.then(s.shift(),s.shift());return a};ri.prototype.getUri=function(e){return e=_i(this.defaults,e),Xl(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Ws.forEach(["delete","get","head","options"],function(e){ri.prototype[e]=function(i,n){return this.request(_i(n||{},{method:e,url:i,data:(n||{}).data}))}});Ws.forEach(["post","put","patch"],function(e){ri.prototype[e]=function(i,n,r){return this.request(_i(r||{},{method:e,url:i,data:n}))}});Xs.exports=ri});var Sn=V((Tf,Qs)=>{"use strict";function bn(t){this.message=t}bn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};bn.prototype.__CANCEL__=!0;Qs.exports=bn});var ea=V((Pf,Zs)=>{"use strict";var Yl=Sn();function Ai(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(r){e=r});var i=this;t(function(r){i.reason||(i.reason=new Yl(r),e(i.reason))})}Ai.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Ai.source=function(){var e,i=new Ai(function(r){e=r});return{token:i,cancel:e}};Zs.exports=Ai});var ia=V((Rf,ta)=>{"use strict";ta.exports=function(e){return function(n){return e.apply(null,n)}}});var ra=V((Df,na)=>{"use strict";na.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var oa=V((Of,xn)=>{"use strict";var sa=Xe(),Ql=rn(),Ii=Ys(),Zl=yn(),eu=Ei();function aa(t){var e=new Ii(t),i=Ql(Ii.prototype.request,e);return sa.extend(i,Ii.prototype,e),sa.extend(i,e),i}var ct=aa(eu);ct.Axios=Ii;ct.create=function(e){return aa(Zl(ct.defaults,e))};ct.Cancel=Sn();ct.CancelToken=ea();ct.isCancel=gn();ct.all=function(e){return Promise.all(e)};ct.spread=ia();ct.isAxiosError=ra();xn.exports=ct;xn.exports.default=ct});var En=V((kf,la)=>{la.exports=oa()});var _n=V((Bf,ua)=>{var tu=En(),wt="advertorials",iu="https://ocm-advertorials-api.ocm.workers.dev/api/advertorials";ua.exports=class{constructor(e,i){this.utils=e,this.config=i,this.advertorial_config=e.is_mobile?this.config.services.advertorials.mobile:this.config.services.advertorials.desktop,this.aid=null}run(){return new Promise((e,i)=>(performance.mark("advertorials_start"),this.aid=this.utils.getParameterByName("aid"),this.aid&&this.aid!==""&&(this.setupGA4(),tu(`${iu}/${this.aid}`,{method:"GET",withCredentials:!1,headers:{Accept:"application/json"},validateStatus:function(n){return n>=200&&n<500}}).then(n=>(this.renderAdvertorial(n.data),e({name:wt}))).catch(n=>n.response?(this.utils.log.warn(wt,"Failed to fetch advertorial data"),e({name:wt})):n.request?(this.utils.log.warn(wt,"Failed to fetch advertorial data"),e({name:wt})):(this.utils.log.error(wt,n.message,"Failed to fetch advertorial data"),i({name:wt,message:n.message})))),e({name:wt})))}setupGA4(){let e=this.utils.window.document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=G-H5PRQ51VCP",e.async=!0,this.utils.window.document.head.appendChild(e),window.dataLayer=window.dataLayer||[];function i(){dataLayer.push(arguments)}i("js",new Date),i("config","G-H5PRQ51VCP",{send_page_view:!1})}renderAdvertorial(e){let i=e.type,n=this.utils.window.document.querySelector(this.advertorial_config.selectors.title),r=this.utils.window.document.querySelector(this.advertorial_config.selectors.content);if(this.utils.loadStyle(`${this.advertorial_config.selectors.content} > p, ${this.advertorial_config.selectors.content} > img { margin:0 auto 1rem;}`),this.utils.loadStyle(".ocm-advertorial-img-align-left { float: left;  margin-right: 1.5em; } .ocm-advertorial-img-align-center { display: block; margin-left: auto;  margin-right: auto; } .ocm-advertorial-img-align-right { float: right; margin-left: 1.5em; }"),e.landingPage=this.buildLandingPageUrl(e.landingPage),i==="advertorial")try{n&&(n.innerHTML=e.title),r&&(r.innerHTML=`${e.content} <p></p> <a href="${e.landingPage}" target="_blank" id="advertorial-promo-link">${e.landingPageLabel}</a>`),gtag("event","page_view",{page_title:this.utils.window.document.getElementsByTagName("title")[0].text,page_location:this.utils.window.location.href,content_id:this.aid})}catch(s){this.utils.log.error(wt,s,"Failed to render advertorial content")}}buildLandingPageUrl(e){let{searchParams:i}=new URL(this.utils.window.location.href);i.delete("aid");let n=new URL(e);return i.forEach((r,s)=>{n.searchParams.append(s,r)}),n.toString()}}});var An=V((jf,da)=>{var Q="aniview";da.exports=class{constructor(e,i){this.utils=e,this.config=i,this.aniviewConfig=this.utils.is_mobile?i.services.aniview.mobile:i.services.aniview.desktop,this.aniviewConfig.debug=this.config.services.aniview.debug,this.aniviewConfig.sync_with_storyteller=this.config.services.aniview.sync_with_storyteller,this.aniviewConfig.sound_hack=typeof this.config.services.aniview.sound_hack<"u"?this.config.services.aniview.sound_hack:!0,this.rules=this.aniviewConfig.rules,this.isHeaderBidding=!1,this.ADSQ_TARGETING=null,this.ANIVIEW_FEE=.2,this.rand=Math.random(),this.plcmt=2,this.floatingConfigProperty=null}run(){return new Promise(async(e,i)=>{this.utils.isIOS?this.vpmute=this.rand>.7?0:1:this.aniviewConfig.sound_hack&&await this.determineVpMute(),this.utils.contentLoaded().then(()=>(this.utils.log.info(Q,`After determining vpmute = ${this.vpmute}`),this.aniviewConfig.lazyload&&this.aniviewConfig.lazyload.enable?this.lazyLoadInject(e,i):this.inject(e,i)))})}determineVpMute(){return new Promise(e=>{if(window.top.OCM?.baso)return this.browserAllowsSoundOn=window.top.OCM.baso,this.vpmute=this.browserAllowsSoundOn?0:1,e();let i=document.createElement("video");i.src="//cdn.orangeclickmedia.com/videos/ovp.mp4",i.muted=!1,i.volume=.001,i.play().then(()=>{i.volume=0,this.browserAllowsSoundOn=!0,window.top.OCM.baso=!0,this.vpmute=this.browserAllowsSoundOn?0:1,this.utils.log.info(Q,`Browser allows sound on. Setting vpmute = ${this.vpmute}`),e()}).catch(n=>{window.top.OCM.baso=!1,this.vpmute=this.browserAllowsSoundOn?0:1,this.utils.log.info(Q,`Browser does not allow sound on. Setting vpmute = ${this.vpmute}`,JSON.stringify(n)),e()}).finally(()=>{this.utils.log.info(Q,`Finally, vpmute = ${this.vpmute}`),i.remove()})})}lazyLoadInject(e,i){let n=this.aniviewConfig.lazyload.offset&&this.aniviewConfig.lazyload.offset!==""?+this.aniviewConfig.lazyload.offset:0,r=this.utils.adjustLazyLoadOffset(n);this.utils.lazyLoad(this.rules.selector,{rootMargin:`${r}px 0px`},(s,a)=>{this.isInjected||(this.isInjected=!0,this.inject(e,i))})}inject(e,i){performance.mark("aniview_start"),this.utils.log.info(Q,"Running...");let n=this.utils.determineInjectionTarget(this.aniviewConfig.rules.selector,this.aniviewConfig.rules.position,this.aniviewConfig.rules.count_gt,this.aniviewConfig.rules.word_count,this.aniviewConfig.rules.words_gt);if(!n)return this.utils.shouldLogError?i({name:Q,message:"Target node not found in DOM"}):e({name:Q});this.utils.log.info(Q,"node found: ",n);let r=this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,s=document.createElement("script");s.id=`AV${this.aniviewConfig.playerTagId}`,s.type="text/javascript",s.src=`https://tg1.orangeclickmedia.com/api/adserver/spt?AV_PUBLISHERID=${this.aniviewConfig.publisher}&AV_TAGID=${this.aniviewConfig.playerTagId}&AV_URL=${r}`,s.src+=`&AV_CUSTOM8=${this.vpmute}&AV_CUSTOM9=${this.plcmt}`,s.async=!0,s.setAttribute("data-config-api","avConfig"),s.setAttribute("data-player-api","avPassback"),this.aniviewConfig&&this.aniviewConfig.sticky&&this.aniviewConfig.sticky.enable&&(this.utils.log.info(Q," sticky option is enabled for aniview player"),this.appendStickStyle());let a=this.utils.window.document.createElement("div");a.classList.add("ocm-player"),this.aniviewConfig.classes&&a.classList.add(this.aniviewConfig.classes),this.aniviewConfig.styles&&(a.style=this.aniviewConfig.styles);let o=!!this.utils.window.top.document.querySelector('script[src*="chirp.js"]'),l=!!this.utils.config.services.header_bidding.adsqRTDModuleEnabled;if(!o&&!l)return this.appendTag(n,a,s,e,i);this.utils.waitFor("ADSQ.response",()=>{let u=[],p=null;if(p=window.top.ADSQ?.response,p){p.classified_as&&p.classified_as.forEach(h=>{let d=[];d=h.split("/");let g=null;d.forEach(f=>{g?g+="/"+f:g=f,u.push(g)})}),this.ADSQ_TARGETING={adsq_bs:p.brandSafe?p.brandSafe===!0?"Yes":"No":"notEvaluated",adsq_bs_class:u.length?[...new Set(u)]:[],adsq_bs_sent:p.sentiment||"",hostname:window.top.location.hostname.replace("www.",""),city:p?.geo?.city||"",country:p?.geo?.country||""},s.src+=`&AV_CUSTOM1=${this.ADSQ_TARGETING.adsq_bs}`,s.src+=this.ADSQ_TARGETING.adsq_bs_class.length?`&AV_CUSTOM2=${encodeURIComponent(this.ADSQ_TARGETING.adsq_bs_class.join(","))}`:"",s.src+=this.ADSQ_TARGETING.adsq_bs_sent!==""?`&AV_CUSTOM3=${this.ADSQ_TARGETING.adsq_bs_sent}`:"";let v="adsq_bs="+this.ADSQ_TARGETING.adsq_bs+";";this.ADSQ_TARGETING.adsq_bs_class.length&&this.ADSQ_TARGETING.adsq_bs_class.forEach(h=>{v+="adsq_bs_class="+encodeURIComponent(h)+";"}),v+=this.ADSQ_TARGETING.adsq_bs_sent!==""?"adsq_bs_sent="+this.ADSQ_TARGETING.adsq_bs_sent+";":"",s.src+=`&AV_CUSTOM7=${encodeURIComponent(v)}`}return this.appendTag(n,a,s,e,i)},30,()=>this.appendTag(n,a,s,e,i))}appendTag(e,i,n,r,s){if(this.createPassbacks(),!this.utils.window.googletag.pubads)try{return this.utils.injectTag(e,i,this.aniviewConfig.rules.place),i.append(n),this.utils.log.info(Q,"Selector found and script added",e,n),r({name:Q})}catch{return s({name:Q,message:"Error appending aniview script"})}this.utils.gptApiReady().then(()=>{this.utils.window.googletag.cmd.push(()=>{let a=this.utils.window.googletag.pubads().getTargetingKeys().map(o=>encodeURIComponent(`${o}=${this.utils.window.googletag.pubads().getTargeting(o).join(",")}`)).join("%26");n.src+=`&AV_CUSTOM6=${a}%26plcmt%3D${this.plcmt}`;try{return this.utils.injectTag(e,i,this.aniviewConfig.rules.place),i.append(n),this.utils.log.info(Q,"Selector found and script added",e,n),r({name:Q})}catch{return s({name:Q,message:"Error appending aniview script"})}})})}appendStickStyle(){let e=`${this.aniviewConfig?.sticky?.offsets?.top||0}px`,i=`${this.aniviewConfig?.sticky?.offsets?.bottom||0}px`,n=`${this.aniviewConfig?.sticky?.offsets?.left||0} px`,r=`${this.aniviewConfig?.sticky?.offsets?.right||0}px`,s=`${this.aniviewConfig?.sticky?.height||0}px`,a=`${this.aniviewConfig?.sticky?.width||0}px`;switch(this.aniviewConfig?.sticky?.position){case"bottom_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; right: ${r};  height: ${s}; width: ${a}; }`);break;case"bottom_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; bottom: ${i}; left: ${n};  height: ${s}; width: ${a}; }`);break;case"top_right":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; right: ${r};  height: ${s}; width: ${a}; }`);break;case"top_left":this.utils.loadStyle(`.ocm-player { position: fixed; z-index: 2147483646; top: ${e}; left: ${n};  height: ${s}; width: ${a}; }`);break}}updateAniviewStickyState(e){this.utils.window.postMessage({type:"stickies_sync",service:"aniview",value:e})}isStickyAllowed(){return this.aniviewConfig.sync_with_storyteller?!(this.utils.window.OCM.sws&&this.utils.window.OCM.sws.story_teller_v2&&this.utils.window.OCM.ST?.hasAd):!0}createPassbacks(){this.utils.window.avConfig=(e,i)=>{!this.utils.isIOS&&this.aniviewConfig.sound_hack&&(e.autosounddetect=!0,e.autosoundvolume=.001),this.initialAvConfig=JSON.parse(JSON.stringify(e)),e.openRtb={site:{ext:{data:this.ADSQ_TARGETING}}},e.pbanalytics=[{provider:"ocmpba",options:{callback:n=>{this.handleAnalyticsCallback(n)}}}]},this.utils.window.avPassback=(e,i)=>{if(this.utils.log.info(Q,"Checking if I should run OCM.oipb for specific player"),this.utils.log.info(Q,"config.tagId !== this.aniviewConfig.playerTagId",e.tagId,this.aniviewConfig.playerTagId),e.tagId===this.aniviewConfig.playerTagId){if(this.aniviewConfig&&this.aniviewConfig.sticky&&this.aniviewConfig.sticky.enable){let n=this.aniviewConfig?.sticky?.height||0,r=this.aniviewConfig?.sticky?.width||0;i.resize(r,n)}e?.playOnViewPerc&&(e.playOnViewPerc=30),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!1),e.floating.closeButton=!1,e.floating.backgroundColor="White"),this.utils.window.OCM.handleCustomFloatingConfig&&typeof this.utils.window.OCM.handleCustomFloatingConfig=="function"?(this.utils.window.OCM.handleCustomFloatingConfig(e,i),this.utils.log.info(Q,"Custom handling for the configuration: ",e)):(this.handleVCHackFloatingConfig(e),this.utils.log.info(Q,"VCHack handling for the configuration:",e)),this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"&&(e.enableViewability=!0),this.floatingConfigProperty={...e.floating},i.updateGui(e),i.on("AdImpression",(n,r)=>{!this.utils.isIOS&&this.aniviewConfig.sound_hack&&this.utils.window.document.addEventListener("click",a=>{i.getAdVolume()>0&&i.mute()},{once:!0});let s=this.isStickyAllowed();this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"?this.utils.window.OCM.handleCustomAdImpression(e,i,n):(s&&this.floatingConfigProperty&&(e.floating={...this.floatingConfigProperty},i.updateGui(e),this.updateAniviewStickyState(!0)),s||(delete e.floating,i.updateGui(e),this.updateAniviewStickyState(!1))),this.utils.is_mobile&&this.resizePlayerForVerticalAd(n,i),this.handleAdImpression(n)}),i.on("AdViewableImpression",(n,r)=>{this.utils.log.info(Q,"AdViewableImpression",n,r),this.handleAdViewableImpression(n),this.initialAvConfig?.floating&&(this.initialAvConfig?.closeButton&&(e.closeButton=!0),e.floating.closeButton=!0,i.updateGui(e)),this.utils.window.OCM.handleCustomAdViewableImpression&&typeof this.utils.window.OCM.handleCustomAdViewableImpression=="function"?(e=this.utils.window.OCM.handleCustomAdViewableImpression(e,i,n),i.updateGui(e)):this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.handleCustomAdImpression&&typeof this.utils.window.OCM.handleCustomAdImpression=="function"||!this.initialAvConfig?.floating&&this.aniviewConfig.vchack&&setTimeout(()=>{i.stopFloat(),this.updateAniviewStickyState(!1)},2e3)}),i.on("AdVideoFirstQuartile",(n,r)=>{this.utils.log.info(Q,"AdVideoFirstQuartile",n,r),this.handleAdVideoFirstQuartile(n)}),i.on("AdVideoMidpoint",(n,r)=>{this.utils.log.info(Q,"AdVideoMidpoint",n,r),this.handleAdVideoMidpoint(n)}),i.on("AdVideoThirdQuartile",(n,r)=>{this.utils.log.info(Q,"AdVideoThirdQuartile",n,r),this.handleAdVideoThirdQuartile(n)}),i.on("AdVideoComplete",(n,r)=>{this.utils.log.info(Q,"AdVideoComplete",n,r),this.handleAdVideoComplete(n),this.floatingConfigProperty&&this.updateAniviewStickyState(!1)}),i.on("AdSkipped",(n,r)=>{this.floatingConfigProperty&&this.updateAniviewStickyState(!1)}),i.on("AdClosed",(n,r)=>{this.floatingConfigProperty&&this.updateAniviewStickyState(!1)}),i.on("AdClickThru",(n,r)=>{this.utils.log.info(Q,"AdClickThru",n,r),this.handleAdClickThru(n)}),i.on("AdError",(n,r)=>{this.utils.log.info(Q,"AdError",n,r),typeof this.utils.window.OCM.oipb=="function"&&this.utils.window.OCM.oipb(n,r)})}}}handleAdImpression(e){this.utils.log.info(Q,"An new impression event was triggered:",e);let i={...e.tagInfo};if(i){let n=i.bidder&&this.auction&&this.auction.bidders&&this.auction.bidders[i.bidder].size,r=this.utils.window&&this.utils.window.OCM&&this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),s=i.bidCpm;if(s>0&&(s=r?parseFloat(((s-this.ANIVIEW_FEE)*r).toFixed(5)):s-this.ANIVIEW_FEE),this.isHeaderBidding=i.bidder&&i.bidder!=="GAM"&&i.bidder!=="amazon",!this.isHeaderBidding)return;let a={data:{adUnit:"aniview_outstream",auction:this.auction,auctionId:this.auctionId,bidder:i.bidder,consent:this.utils.window.OCM.hasPurposeOneConsent,cpm:s,dealId:i.bidData.dealId||null,fizz:!1,isNew:1,mediaType:"video",meta:JSON.stringify(i.bidData.meta),oeid:this.utils._oeid,size:n,source:"client"},event:"pba-update",eventName:"Bid won",options:this.options};fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(a)}).then(o=>{o.json().then(()=>{this.utils.log.info(Q,"A pba update was sent to wind runner successfully with data: ",a)})}).catch(o=>{this.utils.log.error(Q,o,"Error: ")})}}handleAnalyticsCallback(e){this.utils.log.info(Q,"An new analytics callback event was triggered:",e);let i=e.data;if(i){let n=Object.assign({},e.options);delete n.callback,n.options={},this.utils.getParameterByName("dicbo")!==""&&(e.options.utmTagData.utm_source="outbrain",n.utmTagData.utm_source="outbrain"),this.utils.getParameterByName("ref")==="storyteller"&&(e.options.utmTagData.utm_source="storyteller",n.utmTagData.utm_source="storyteller"),this.options=n;let a=Object.keys(i.adUnits).map(l=>Object.keys(i.adUnits[l].bidders).map(u=>i.adUnits[l].bidders[u])).flat().reduce((l,u)=>({...l,[u.bidder]:u}),{});this.bidders=a,Object.keys(this.bidders).forEach(l=>{let u=this.utils.window.OCM.getCurrencyConversion&&this.utils.window.OCM.getCurrencyConversion("USD"),p=this.bidders[l].cpm;p>0&&(p=u?parseFloat(((p-this.ANIVIEW_FEE)*u).toFixed(5)):p-this.ANIVIEW_FEE),this.bidders[l].cpm=p}),this.auction={adUnit:"aniview_outstream",bidders:a,finish:i.finish,start:i.start,status:"finished",timeout:i.timeout},this.auctionId=i.id;let o={data:{id:this.auctionId,start:i.start,timeout:i.timeout,adUnits:{aniview_outstream:this.auction},finish:i.finish,oeid:this.utils._oeid,consent:this.utils.window.OCM.hasPurposeOneConsent},event:"pba-stream",eventName:"Auction",options:e.options};fetch("https://windrunner.orangeclickmedia.com/pba-stream",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(o)}).then(l=>{l.json().then(()=>{this.utils.log.info(Q,"A pba stream was sent to wind runner successfully with data: ",o)})}).catch(l=>{["Failed to fetch","NetworkError when attempting to fetch resource","Load failed"].includes(l.message)||this.utils.log.error(Q,l,"Unable to send pba-stream to Jaina")})}}handleVideoEvents(e){if(!this.isHeaderBidding)return;let i={eventName:e,adUnit:"aniview_outstream",auctionId:this.auctionId};fetch(e==="bidViewable"?"https://windrunner.orangeclickmedia.com/pba-viewability":"https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(i)}).then(r=>{r.json().then(s=>{this.utils.log.info(Q,"A pba video event was sent to wind runner successfully with data: ",i)})}).catch(r=>{this.utils.log.error(Q,r,"Error: ")})}handleAdViewableImpression(e){this.utils.log.info(Q,"An new viewable impression event was triggered:",e),this.handleVideoEvents("bidViewable")}handleAdVideoFirstQuartile(e){this.utils.log.info(Q,"An new first quartile event was triggered:",e),this.handleVideoEvents("first_quartile")}handleAdVideoMidpoint(e){this.utils.log.info(Q,"An new mid point event was triggered:",e),this.handleVideoEvents("midpoint")}handleAdVideoThirdQuartile(e){this.utils.log.info(Q,"An new third quartile event was triggered:",e),this.handleVideoEvents("third_quartile")}handleAdVideoComplete(e){this.utils.log.info(Q,"An new video complete event was triggered:",e),this.handleVideoEvents("complete")}handleAdClickThru(e){this.utils.log.info(Q,"An new ad click thru event was triggered:",e),this.handleVideoEvents("click")}handleVCHackFloatingConfig(e){!this.initialAvConfig?.floating&&this.aniviewConfig.vchack&&(e.floating={resize:!0,position:this.aniviewConfig.vchack_position||(this.utils.is_mobile?"Top":"Top-Right"),closeButton:!0,floatOnImp:!0,resizingMethod:1,size:.6,floatOnBottom:!0,backgroundColor:"White",right:0,left:0,top:0,bottom:0})}resizePlayerForVerticalAd(e,i){try{this.utils.log.info(Q,"AdImpression Event: ",e);let n=e?.tagInfo?.mediaInfo?.width,r=i.getWidth(),s=e?.tagInfo?.mediaInfo?.height;if(s<=n)return;this.utils.log.info(Q,"Tag width: ",n," Tag height: ",s);let a=n/s,o=r/a;i.resize(r,o)}catch(n){this.utils.log.error(Q,n,"Error: ")}}}});var In=V((zf,ca)=>{var nu="blockthrough";ca.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("blockthrough_start");let n=this.utils.window.document.createElement("script");n.src="https://cdn.unblockia.com/h.js",n.onload=()=>e({name:nu}),this.utils.doc_head.appendChild(n)})}}});var Ci=V((Vf,ha)=>{var Cn="cmp";ha.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{if(performance.mark("cmp_start"),this.utils.isGoogle())return this.utils.log.info(Cn,"Googlebot/Lighthouse detected."),e({name:"cmp"});if(!this.config.use_window_top)return this.utils.log.warn(Cn,"Not using window.top, so CMP here is not our responsibility."),e({name:"cmp"});this.loadCmpV2(),window.top.__tcfapi("addEventListener",2,(n,r)=>{if(r&&n.cmpStatus==="loaded")return this.utils.log.info(Cn,"Loaded"),e({name:"cmp"})})})}loadCmpV2(){let e=this.config.services.cmp.hasOwnProperty("hostname")&&this.config.services.cmp.hostname!==""&&this.config.services.cmp.hostname!==null?this.config.services.cmp.hostname:window.location.hostname,i=document.createElement("script"),n=document.getElementsByTagName("script")[0],r="https://cmp.inmobi.com".concat("/choice/",this.config.services.cmp.network_id,"/",e,"/choice.js?tag_version=V3"),s=0,a=3;i.async=!0,i.type="text/javascript",i.src=r,n.parentNode.insertBefore(i,n);function o(){let h="__tcfapiLocator",d=[],g=window,f;function y(){let b=g.document,_=!!g.frames[h];if(!_)if(b.body){let I=b.createElement("iframe");I.style.cssText="display:none",I.name=h,b.body.appendChild(I)}else setTimeout(y,5);return!_}function m(){let b,_=arguments;if(_.length)if(_[0]==="setGdprApplies")_.length>3&&_[2]===2&&typeof _[3]=="boolean"&&(b=_[3],typeof _[2]=="function"&&_[2]("set",!0));else if(_[0]==="ping"){let I={gdprApplies:b,cmpLoaded:!1,cmpStatus:"stub"};typeof _[2]=="function"&&_[2](I)}else _[0]==="init"&&typeof _[3]=="object"&&(_[3]=Object.assign(_[3],{tag_version:"V3"})),d.push(_);else return d}function w(b){let _=typeof b.data=="string",I={};try{_?I=JSON.parse(b.data):I=b.data}catch{}let D=I.__tcfapiCall;D&&window.__tcfapi(D.command,D.version,function(S,x){let E={__tcfapiReturn:{returnValue:S,success:x,callId:D.callId}};_&&(E=JSON.stringify(E)),b&&b.source&&b.source.postMessage&&b.source.postMessage(E,"*")},D.parameter)}for(;g;){try{if(g.frames[h]){f=g;break}}catch{}if(g===window.top)break;g=g.parent}f||(y(),g.__tcfapi=m,g.addEventListener("message",w,!1))}o();function l(){let d=["2:tcfeuv2","6:uspv1","7:usnatv1","8:usca","9:usvav1","10:uscov1","11:usutv1","12:usctv1"];window.__gpp_addFrame=function(g){if(!window.frames[g])if(document.body){let f=document.createElement("iframe");f.style.cssText="display:none",f.name=g,document.body.appendChild(f)}else window.setTimeout(window.__gpp_addFrame,10,g)},window.__gpp_stub=function(){let g=arguments;if(__gpp.queue=__gpp.queue||[],__gpp.events=__gpp.events||[],!g.length||g.length==1&&g[0]=="queue")return __gpp.queue;if(g.length==1&&g[0]=="events")return __gpp.events;let f=g[0],y=g.length>1?g[1]:null,m=g.length>2?g[2]:null;if(f==="ping")y({gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:d,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}},!0);else if(f==="addEventListener"){"lastId"in __gpp||(__gpp.lastId=0),__gpp.lastId++;let w=__gpp.lastId;__gpp.events.push({id:w,callback:y,parameter:m}),y({eventName:"listenerRegistered",listenerId:w,data:!0,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:d,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}}},!0)}else if(f==="removeEventListener"){let w=!1;for(let b=0;b<__gpp.events.length;b++)if(__gpp.events[b].id==m){__gpp.events.splice(b,1),w=!0;break}y({eventName:"listenerRemoved",listenerId:m,data:w,pingData:{gppVersion:"1.1",cmpStatus:"stub",cmpDisplayStatus:"hidden",signalStatus:"not ready",supportedAPIs:d,cmpId:10,sectionList:[],applicableSections:[-1],gppString:"",parsedSections:{}}},!0)}else f==="hasSection"?y(!1,!0):f==="getSection"||f==="getField"?y(null,!0):__gpp.queue.push([].slice.apply(g))},window.__gpp_msghandler=function(g){let f=typeof g.data=="string";try{let y=f?JSON.parse(g.data):g.data}catch{let m=null}if(typeof json=="object"&&json!==null&&"__gppCall"in json){let y=json.__gppCall;window.__gpp(y.command,function(m,w){let b={__gppReturn:{returnValue:m,success:w,callId:y.callId}};g.source.postMessage(f?JSON.stringify(b):b,"*")},"parameter"in y?y.parameter:null,"version"in y?y.version:"1.1")}},(!("__gpp"in window)||typeof window.__gpp!="function")&&(window.__gpp=window.__gpp_stub,window.addEventListener("message",window.__gpp_msghandler,!1),window.__gpp_addFrame("__gppLocator"))}l();let u=function(){let h=arguments;typeof window.__uspapi!==u&&setTimeout(function(){typeof window.__uspapi<"u"&&window.__uspapi.apply(window.__uspapi,h)},500)},p=null,v=function(){s++,window.__uspapi===u&&s<a?console.warn("USP is not accessible"):clearInterval(p)};typeof window.__uspapi>"u"&&(window.__uspapi=u,p=setInterval(v,6e3))}}});var Fn=V((Uf,fa)=>{var W="fizz";fa.exports=class{constructor(e,i){this.utils=e,this.config=i,this.fizzConfig=this.config.services.fizz,this.headerBiddingFunctionality=this.config.services.header_bidding&&this.config.services.header_bidding.active?this.config.services.header_bidding.functionality:null,this.engaging=!1,this.engagementTimer=null,this.slotsObserver=null,this.isRefreshIntervalStarted=!1,this.slots=[],this.INTERSECTION_OBSERVER_TIMEOUT=1e3,this.FULLSCREEN_INTERVAL=7e3,this.TEADS_MAX_VIDEO_DURATION=3e4,this.INTERSECTION_OBSERVER_OPTIONS={root:null,rootMargin:"0px",threshold:.5},this.TRIGGER_REFRESH_INTERVAL=3e3,this.BIDDERS_TO_DROP_AT_HB=["amazon","outbrain"]}run(){return new Promise((e,i)=>{if(performance.mark("fizz_start"),this.utils.url.includes("google_preview="))return this.utils.log.warn(W,"SEIZE FIRE. Will not run in google_preview mode."),e({name:W});this.utils.log.info(W,"Running...");try{this.trackUserEngagement()}catch{return i({name:W,message:"Error tracking user engagement"})}try{this.slotsObserver=this.createSlotsObserver()}catch{return i({name:W,message:"Error creating slots observer"})}try{this.slotRenderEndedListener()}catch{return i({name:W,message:"Error registering slotRenderEndedListener for GAM impressions"})}try{this.adRenderSucceededListener()}catch{return i({name:W,message:"Error registering adRenderSucceededListener for HB impressions"})}return e({name:W})})}trackUserEngagement(){["touchstart","touchmove","click","scroll","keyup"].forEach(e=>{this.utils.window.addEventListener(e,this.utils.throttle(()=>{this.engaging=!0,this.utils.log.info(W,"User engaged"),this.engagementTimer&&clearTimeout(this.engagementTimer),this.engagementTimer=setTimeout(()=>{this.engaging=!1,this.utils.log.info(W,"User disengaged")},1e4)},1e3))}),this.utils.log.info(W,"Running user engagement listener")}createSlotsObserver(){return new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&setTimeout(()=>{let n=i?.target?.id;n&&this.slots[n]&&this.utils.isSlotInViewport(n)&&this.utils.isSlotVisible(n)?(this.slots[n].viewedAt=Date.now(),this.utils.log.info(W,`[Intersection Observer] Slot "${i.target.id}" is visible at viewport`),this.slotsObserver.unobserve(i.target)):this.utils.log.info(W,`[Intersection Observer] Slot "${i.target.id}" is out of viewport`)},this.INTERSECTION_OBSERVER_TIMEOUT)})},this.INTERSECTION_OBSERVER_OPTIONS)}slotRenderEndedListener(){this.utils.log.info(W,"Looking for rendered slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.slot.getAdUnitPath(),n=e.slot.getSlotElementId(),r=this.utils.window.document.getElementById(n),s=e.isEmpty?null:e.slot.getResponseInformation();if(!this.allowByAdUnit(i)){this.removeFromSlots(n,i,s),this.utils.log.info(W,`Blocking refresh of "${i}" due to not whitelisted ad unit path`);return}if(!e.isEmpty){if(this.utils.log.info(W,`Checking "${i}" for whitelisted advertiserId = ${s.advertiserId}`),!this.allowByAdvertiser(s.advertiserId)){this.utils.log.info(W,`Removing "${i}" from fizz slots due to not allowed by advertiser`),this.removeFromSlots(n,i,s);return}e.size[0]>1&&e.size[1]>1&&e.slot.defineSizeMapping(googletag.sizeMapping().addSize([0,0],[[e.size[0],e.size[1]]]).build()).addService(googletag.pubads());let a=this.getMaxHeightForSlot(i),o=this.utils.window.document.querySelector(`#${n} iframe`);if(o){let l=o.clientHeight||o.offsetHeight;l&&a===l&&!n.includes("ocm_sticky")&&!r.parentNode.classList.contains("ocm-mis-wrapper")&&(r.style.minHeight=a+"px",this.utils.log.info(W,"Attaching min height to ",i))}}if(this.slots.hasOwnProperty(n))this.slots[n].isEmpty=e.isEmpty,this.slots[n].viewedAt=null,this.slots[n].renderedAt=Date.now(),this.utils.log.info(W,`Updated time for slot "${n}"`,this.slots[n]);else{let a=+this.fizzConfig.interval;this.slots[n]={gptslot:e.slot,div:n,code:i,renderedAt:Date.now(),isEmpty:e.isEmpty,viewedAt:null,hb_only:this.isHBOnly(i),adUnitInterval:a/2,refreshTurn:"HB"},r&&(this.slotsObserver.observe(this.utils.window.document.getElementById(n)),this.utils.log.info(W,`Created a new slot for "${n}"`,this.slots[n]))}this.utils.log.info(W,"All Slots: ",this.slots)})})}startRefreshInterval(){setInterval(()=>{if(this.engaging){this.utils.log.info(W,"User is engaged during refresh interval trigger.");let e=Date.now(),i=[],n=[];Object.keys(this.slots).forEach(r=>{let s=this.slots[r],a=e-s.renderedAt||0,o=e-s.viewedAt||0,l=s.div&&s.div.includes("fullscreen")?this.FULLSCREEN_INTERVAL:s.adUnitInterval,u=!!s.hb_only;if(this.slotContainsVideo(s)){this.utils.log.info(W,`Slot "${s.div}" playing video. Skipping refresh for this slot.`);return}if(s.refreshTurn==="HB")a>=l&&o>=5e3&&(this.utils.log.info(W,`HB Slot "${s.div}" passed time requirements. Turn: ${s.refreshTurn}`),this.utils.isSlotInViewport(s.div)&&this.utils.isSlotVisible(s.div)?i.push(s):this.utils.log.info(W,`HB Slot "${s.div}" not inside viewport`,s));else if(s.refreshTurn==="GAM"){let p=this.fizzConfig.interval-l>0?this.fizzConfig.interval-l:this.fizzConfig.interval;a>=p&&o>=3e3&&(this.utils.log.info(W,s.div+` GAM Slot "${s.div}" passed time requirements`),this.utils.isSlotInViewport(s.div)&&!u&&this.utils.isSlotVisible(s.div)?n.push(s):this.utils.log.info(W,`GAM Slot "${s.div}" not inside viewport`,s))}}),this.refreshHbBubbles(i),this.refreshGAMBubbles(n)}},this.TRIGGER_REFRESH_INTERVAL)}adRenderSucceededListener(){this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{},this.utils.window.ocmpbjs.que=this.utils.window.ocmpbjs.que||[],this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",e=>{this.isRefreshIntervalStarted||(this.isRefreshIntervalStarted=!0,this.startRefreshInterval());let i=e.bid.adUnitCode,n=+this.fizzConfig.interval;this.slots[this.utils.getAdDivElement(i).id]={gptslot:null,div:this.utils.getAdDivElement(i).id,code:i,renderedAt:Date.now(),isEmpty:!1,viewedAt:Date.now()+1e3,hb_only:this.isHBOnly(i),adUnitInterval:n/2,refreshTurn:"HB"},this.utils.log.info(W,"All Slots: ",this.slots)})})}refreshHbBubbles(e){e.length&&(this.utils.log.info(W,"Found HB bubbles: ",e),this.refreshHb(e),e.forEach(i=>{this.slots[i.div]&&(this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn=i.hb_only?"HB":"GAM")}),this.utils.log.info(W,"Resetting all HB slots after refresh",this.slots))}refreshHb(e){let i=this.determineHbAdUnits(e,!0,!0);this.utils.log.info(W,"Ad units for refreshHb",i),i.length&&i.length?this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.requestBids({adUnits:i,bidsBackHandler:(n,r,s)=>{this.utils.log.info(W,"Auction has finished and the bids are : ",n),Object.keys(n).forEach(a=>{n[a].bids=n[a].bids.filter(o=>o.statusMessage!=="bidRejected"&&o.status!=="bidRejected")}),Object.keys(n).forEach(a=>{n[a].bids.length||delete n[a]}),Object.keys(n).length>0&&this.renderBidResponses(n),e.forEach(a=>{this.slots[a.div].isEmpty=n[a.div]&&n[a.div].bids&&n[a.div].bids.length||!1})}})}):e.forEach(n=>{this.slots[n.div]&&(this.slots[n.div].refreshTurn="GAM")})}refreshGAMBubbles(e){if(e.length){switch(this.utils.log.info(W,"Found GAM bubbles: ",e),this.headerBiddingFunctionality){case null:this.refreshDfp(e);break;case"no_adserver":this.refreshHb(e);break;case"lazyload":this.refreshDfpHbLazyload(e);break;default:this.refreshDfpHb(e);break}e.forEach(i=>{this.slots[i.div].viewedAt=null,this.slots[i.div].renderedAt=Date.now(),this.slots[i.div].refreshTurn="HB"}),this.utils.log.info(W,"Resetting all GAM slots after refresh",this.slots)}}refreshDfp(e){this.utils.log.info(W,"in refreshDfp");let i=[];Object.keys(e).forEach(n=>{this.utils.window.googletag.cmd.push(()=>{e[n].gptslot.setTargeting("ocmFizz",["true"])}),i.push(e[n].gptslot)}),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().refresh(i)})}refreshDfpHbLazyload(e){this.utils.log.info(W,"in refreshDfpHbLazyload");for(let i of e){let n=document.querySelector('div[data-oau-code="'+i.code+'"]');n&&!n.hasAttribute("data-lazyincluded-by-ocm")&&(n.removeAttribute("data-lazyloaded-by-ocm"),n.removeAttribute("data-oau-code"),this.utils.window.googletag.cmd.push(()=>{i.gptslot.setTargeting("ocmFizz",["true"])}))}}refreshDfpHb(e){let i=this.determineHbAdUnits(e,!1,!0);this.utils.log.info(W,"Ad units for refreshDfpHb",i),this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.requestBids({adUnits:i,bidsBackHandler:()=>{let n=[];try{Object.keys(e).forEach(r=>{this.utils.window.googletag.cmd.push(()=>{e[r].gptslot.setTargeting("ocmFizz",["true"])}),n.push(e[r].gptslot)})}catch(r){this.utils.log.error(W,r,"OCM Fizz: ")}n.length&&(this.utils.window.ocmpbjs.setTargetingForGPTAsync(n.map(r=>r.getAdUnitPath())),this.utils.window.googletag.pubads().refresh(n),this.utils.window.ocmpbjs.initAdserverSet=!0,this.utils.log.info(W,"=> HB: Called initAdServer"))}})})})}renderBidResponses(e){for(let i in e){this.utils.log.info(W,"Found bid for #"+i,e[i]);let n=i,r=this.utils.getAdDivElement(i);if(r||this.utils.log.info(W,"Ad div #"+n+" not found"),r){this.utils.log.info(W,"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let a=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if(this.utils.log.info(W,"adServerTargeting",a),a&&a.hb_adid){this.utils.log.info(W,"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(u=>u.remove()),r.append(s);let l=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(l,a.hb_adid),setTimeout(()=>{l.body&&(l.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),l.body.style.margin="0px !important")},10),this.slotsObserver.observe(r)}}}}slotContainsVideo(e){let i=this.utils.window.document.getElementById(e.div),r=Date.now()-e.renderedAt||0,s=!!(i&&i.querySelector(".teads-inread")&&r<=this.TEADS_MAX_VIDEO_DURATION),a=!!(i&&i.querySelector("video")),o=!1;try{let l=i&&i.querySelector("iframe");o=!!(l&&l.contentDocument&&l.contentDocument.querySelector("video"))}catch(l){this.utils.log.info(W,"Error checking video inside iframe",l)}return a||o||s}determineHbAdUnits(e,i=!1,n=!1){this.utils.log.info(W,"Determining HB ad units");let r=[],s=this.utils.clone([...this.utils.window.ocmpbjs.adUnits]);for(let a of e)for(let o of s)if(o.code===a.code){let l=o?.ortb2Imp?JSON.parse(JSON.stringify(o.ortb2Imp)):{ext:{data:{}}};l.ext.data.fizz=!0;let u=this.utils.clone(i?[...o.bids.filter(p=>!this.BIDDERS_TO_DROP_AT_HB.includes(p.bidder))]:[...o.bids]);if(n){let p=this.adjustMediaTypesSizes(o.code,o.mediaTypes);if(!!(p.banner&&p.banner.sizes&&p.banner.sizes.length||p.video&&p.video.playerSize&&p.video.playerSize.length)){let h=[...p.banner&&p.banner.sizes||[],...p.video&&p.video.playerSize&&p.video.playerSize||[]],d=[...this.utils.clone(u)].filter(g=>g&&g.params&&g.params.size?this.isSizeValid(g.params.size,h):!0);r.push({...o,code:o.code,mediaTypes:p,bids:d,ortb2Imp:l})}}else r.push({...o,code:o.code,mediaTypes:o.mediaTypes,bids:u,ortb2Imp:l})}return this.utils.log.info(W,"Determined HB ad units",r),r}adjustMediaTypesSizes(e,i){let n={...i},r=this.getSlotByCode(e);if(r){let s=this.utils.window.document.querySelector(`#${r.div}`),a=this.utils.window.document.querySelector(`#${r.div} iframe`);if(s&&a){let o=a.clientHeight||a.offsetHeight,l=s.style&&s.style.minHeight&&s.style.minHeight!=="";o&&(n.banner&&(n.banner.sizes=i.banner.sizes.filter(u=>l?u[1]===o||u[1]<o:u[1]===o),(n.banner.sizes.length===0||n.banner&&!n.banner.sizes)&&delete n.banner),n.video&&(n.video.playerSize=i.video.playerSize.filter(u=>l?u[1]===o||u[1]<o:u[1]===o),(n.video.playerSize.length===0||n.video&&!n.video.playerSize)&&delete n.video))}}return n}isSizeValid(e,i){return i.some(n=>JSON.stringify(n)===JSON.stringify(e))}getMaxHeightForSlot(e){let i=this.utils.clone([...this.utils.window.ocmpbjs.adUnits]);if(!i||i&&i.length)return 0;let n=i.find(r=>r.code===e);return n&&n&&n.sizes?n.sizes.reduce((r,s)=>Math.max(r,s[1]),0):0}getSlotByCode(e){let i=Object.keys(this.slots).find(n=>this.slots[n].code===e);return this.slots[i]}allowByAdUnit(e){return!!this.fizzConfig.ads_whitelist.find(i=>i.path===e)}isHBOnly(e){let i=this.fizzConfig.ads_whitelist.find(n=>n.path===e);return!!(i&&i.hb_only)}allowByAdvertiser(e){if(this.fizzConfig.advertisers_whitelist&&this.fizzConfig.advertisers_whitelist.length===0)return!0;let i=this.fizzConfig.advertisers_whitelist.find(n=>n.id===e);return i&&this.utils.log.info(W,`Found whitelisted advertiser ${i.name}`),!!i}removeFromSlots(e,i,n){this.slots.hasOwnProperty(e)&&(this.utils.log.info(W,`Removing ad slot "${i}" due to not whitelisted advertiserId = ${n.advertiserId}`),delete this.slots[e])}resetSlots(){this.slots=[]}}});var Tn=V((Gf,pa)=>{var ru="fou_analytics";pa.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("fou_analytics_start");let n=this.utils.window.document.createElement("script");n.src="https://eu.b2c.com/api/init-224mtm6aorewjg83k2h.js",n.async=!0,n.setAttribute("data-cfasync","true"),n.onload=()=>e({name:ru}),this.utils.doc_head.appendChild(n)})}}});var ma=V(($f,ga)=>{"use strict";var su=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);ga.exports=t=>!su.has(t&&t.code)});var Sa=V(ge=>{"use strict";var Fi=ge&&ge.__awaiter||function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(p){try{u(n.next(p))}catch(v){a(v)}}function l(p){try{u(n.throw(p))}catch(v){a(v)}}function u(p){p.done?s(p.value):r(p.value).then(o,l)}u((n=n.apply(t,e||[])).next())})},au=ge&&ge.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ge,"__esModule",{value:!0});ge.DEFAULT_OPTIONS=ge.exponentialDelay=ge.retryAfter=ge.isNetworkOrIdempotentRequestError=ge.isIdempotentRequestError=ge.isSafeRequestError=ge.isRetryableError=ge.isNetworkError=ge.namespace=void 0;var ou=au(ma());ge.namespace="axios-retry";function Pn(t){let e=["ERR_CANCELED","ECONNABORTED"];return t.response||!t.code||e.includes(t.code)?!1:(0,ou.default)(t)}ge.isNetworkError=Pn;var ya=["get","head","options"],lu=ya.concat(["put","delete"]);function Ti(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status===429||t.response.status>=500&&t.response.status<=599)}ge.isRetryableError=Ti;function wa(t){var e;return!((e=t.config)===null||e===void 0)&&e.method?Ti(t)&&ya.indexOf(t.config.method)!==-1:!1}ge.isSafeRequestError=wa;function Rn(t){var e;return!((e=t.config)===null||e===void 0)&&e.method?Ti(t)&&lu.indexOf(t.config.method)!==-1:!1}ge.isIdempotentRequestError=Rn;function Dn(t){return Pn(t)||Rn(t)}ge.isNetworkOrIdempotentRequestError=Dn;function On(t=void 0){var e;let i=(e=t?.response)===null||e===void 0?void 0:e.headers["retry-after"];if(!i)return 0;let n=(Number(i)||0)*1e3;return n===0&&(n=(new Date(i).valueOf()||0)-Date.now()),Math.max(0,n)}ge.retryAfter=On;function uu(t=0,e=void 0){return Math.max(0,On(e))}function ba(t=0,e=void 0,i=100){let n=Math.pow(2,t)*i,r=Math.max(n,On(e)),s=r*.2*Math.random();return r+s}ge.exponentialDelay=ba;ge.DEFAULT_OPTIONS={retries:3,retryCondition:Dn,retryDelay:uu,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function du(t,e){return Object.assign(Object.assign(Object.assign({},ge.DEFAULT_OPTIONS),e),t[ge.namespace])}function va(t,e,i=!1){let n=du(t,e||{});return n.retryCount=n.retryCount||0,(!n.lastRequestTime||i)&&(n.lastRequestTime=Date.now()),t[ge.namespace]=n,n}function cu(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}function hu(t,e){return Fi(this,void 0,void 0,function*(){let{retries:i,retryCondition:n}=t,r=(t.retryCount||0)<i&&n(e);if(typeof r=="object")try{return(yield r)!==!1}catch{return!1}return r})}function fu(t,e,i,n){var r;return Fi(this,void 0,void 0,function*(){e.retryCount+=1;let{retryDelay:s,shouldResetTimeout:a,onRetry:o}=e,l=s(e.retryCount,i);if(cu(t,n),!a&&n.timeout&&e.lastRequestTime){let u=Date.now()-e.lastRequestTime,p=n.timeout-u-l;if(p<=0)return Promise.reject(i);n.timeout=p}return n.transformRequest=[u=>u],yield o(e.retryCount,i,n),!((r=n.signal)===null||r===void 0)&&r.aborted?Promise.resolve(t(n)):new Promise(u=>{var p;let v=()=>{clearTimeout(h),u(t(n))},h=setTimeout(()=>{var d;u(t(n)),!((d=n.signal)===null||d===void 0)&&d.removeEventListener&&n.signal.removeEventListener("abort",v)},l);!((p=n.signal)===null||p===void 0)&&p.addEventListener&&n.signal.addEventListener("abort",v,{once:!0})})})}function pu(t,e){return Fi(this,void 0,void 0,function*(){t.retryCount>=t.retries&&(yield t.onMaxRetryTimesExceeded(e,t.retryCount))})}var Mt=(t,e)=>{let i=t.interceptors.request.use(r=>{var s;return va(r,e,!0),!((s=r[ge.namespace])===null||s===void 0)&&s.validateResponse&&(r.validateStatus=()=>!1),r}),n=t.interceptors.response.use(null,r=>Fi(void 0,void 0,void 0,function*(){var s;let{config:a}=r;if(!a)return Promise.reject(r);let o=va(a,e);return r.response&&(!((s=o.validateResponse)===null||s===void 0)&&s.call(o,r.response))?r.response:(yield hu(o,r))?fu(t,o,r,a):(yield pu(o,r),Promise.reject(r))}));return{requestInterceptorId:i,responseInterceptorId:n}};Mt.isNetworkError=Pn;Mt.isSafeRequestError=wa;Mt.isIdempotentRequestError=Rn;Mt.isNetworkOrIdempotentRequestError=Dn;Mt.exponentialDelay=ba;Mt.isRetryableError=Ti;ge.default=Mt});var Pi=V((Xf,Ea)=>{var $e="geolocation",gu="https://wru.orangeclickmedia.com/",xa=En(),mu=Sa().default;Ea.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("geolocation_start");let n=new Date().getTime();if(this.utils.window.OCM.hasOwnProperty("geo"))return this.utils.log.info($e,"Geolocation data already exists. Using it.",this.utils.window.OCM.geo),e({name:$e});if(this.utils.window.OCM.hasPurposeOneConsent){if(this.utils.window.OCM.geo=this.getGeoDataFromLocalStorage(),this.utils.window.OCM.geo&&!this.utils.window.OCM.geo.hasOwnProperty("expires_at")&&(this.deleteGeoDataFromLocalStorage(),this.utils.window.OCM.geo=null),this.utils.window.OCM.geo&&this.utils.window.OCM.geo.expires_at>n)return this.utils.log.info($e,"Geolocation data exists in localStorage and has not expired.",this.utils.window.OCM.geo),e({name:$e});this.utils.log.warn($e,"Geolocation data does not exist in localStorage or has expired. Fetching geolocation data."),this.fetchGeoData(!0).then(s=>(this.utils.window.OCM.geo=s,s&&this.utils.canUseLocalStorage&&this.storeGeoDataInLocalStorage(s),e({name:$e}))).catch(s=>i({name:$e,message:s}))}else this.utils.log.warn($e,"Storage access not allowed. Fetching geolocation data."),this.deleteGeoDataFromLocalStorage(),this.fetchGeoData(!0).then(s=>(this.utils.window.OCM.geo=s,e({name:$e}))).catch(s=>i({name:$e,message:s}))})}deleteGeoDataFromLocalStorage(){try{this.utils.window.localStorage.removeItem("ocm_wru")}catch(e){this.utils.log.warn($e,e,"Error deleting geolocation data from localStorage")}}fetchGeoData(){return new Promise((e,i)=>{let n=!1,r=1e3,s=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(typeof s<"u"&&typeof s.effectiveType<"u")switch(s.effectiveType){case"2g":r=4e3;break;case"3g":r=2500;break;default:r=1e3;break}let a=2;mu(xa,{retries:a,shouldResetTimeout:!0,retryCondition:o=>["ERR_CANCELED","ECONNABORTED"].includes(o.code)||!o.response||o.response.status>=500&&o.response.status<=599,onRetry:()=>{a--,n=a===0}}),xa(gu,{method:"GET",timeout:r,headers:{Accept:"application/json"},validateStatus:function(o){return o>=200&&o<500}}).then(o=>e(o.data)).catch(o=>{if(n)return o.response?(this.utils.log.warn($e,o,"Failed to fetch geolocation data"),e(null)):o.request?(this.utils.log.warn($e,o.request,"Failed to fetch geolocation data"),e(null)):i(o.message)})})}storeGeoDataInLocalStorage(e){try{e.expires_at=new Date().getTime()+60*60*24*1e3,this.utils.window.localStorage.setItem("ocm_wru",JSON.stringify(e))}catch(i){this.utils.log.warn($e,i,"Error storing geolocation data in localStorage")}}getGeoDataFromLocalStorage(){let e=null;try{e=JSON.parse(this.utils.window.localStorage.getItem("ocm_wru"))}catch(i){this.utils.log.warn($e,i,"Error parsing geolocation data from localStorage")}return e}}});var Nn=V((Qf,_a)=>{var kn="gpt";_a.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("gpt_start"),this.utils.log.info(kn,"Loading GPT library and setting ads environment...");let n=document.createElement("script");return n.async="",n.src="//securepubads.g.doubleclick.net/tag/js/gpt.js",n.onerror=r=>i({name:kn,message:`Failed to load GPT library ${n.src}`}),this.utils.window.document.head.append(n),this.utils.window.googletag.cmd.push(()=>{this.config.services.gpt.collapseEmptyDivs[0]&&(this.config.services.gpt.collapseEmptyDivs[1]?this.utils.window.googletag.pubads().collapseEmptyDivs(!0):this.utils.window.googletag.pubads().collapseEmptyDivs()),this.config.services.gpt.enableSingleRequest&&this.utils.window.googletag.pubads().enableSingleRequest(),this.config.services.gpt.setCentering&&this.utils.window.googletag.pubads().setCentering(!0),this.config.services.gpt.disableInitialLoad&&this.utils.window.googletag.pubads().disableInitialLoad(),this.utils.window.googletag.enableServices()}),e({name:kn})})}}});function Ia(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pa(t,e,i){return e&&Ia(t.prototype,e),i&&Ia(t,i),t}function Bn(){return Bn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Bn.apply(this,arguments)}function Ra(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ai(t,e)}function Mn(t){return Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Mn(t)}function ai(t,e){return ai=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},ai(t,e)}function vu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jn(t,e,i){return jn=vu()?Reflect.construct:function(n,r,s){var a=[null];a.push.apply(a,r);var o=new(Function.bind.apply(n,a));return s&&ai(o,s.prototype),o},jn.apply(null,arguments)}function Ln(t){var e=typeof Map=="function"?new Map:void 0;return Ln=function(i){if(i===null||Function.toString.call(i).indexOf("[native code]")===-1)return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return jn(i,arguments,Mn(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ai(n,i)},Ln(t)}function X(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ca(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function he(t){return"__private_"+yu+++"_"+t}function A(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Ri,Aa,Ta,yu,Da,zn,Hn,Ze,ue,ht,ze,wu,bu,Fa,bt,Vn,xt,L,de,re,jt,se,et,H,we,be,Ie,ft,Lt,Se,zt,Re,pt,St,We,De,tt,it,ie,gt,Ht,He,Vt,si,Oa,ka=Lr(()=>{Ri=null,Aa=function(){Ri=null},Ta=function(){var t=window;return t.google&&t.google.ima?Promise.resolve(t.google.ima):Ri||((Ri=new Promise(function(e,i){var n=document.createElement("script");n.async=!0,n.src="https://imasdk.googleapis.com/js/sdkloader/ima3.js",n.onload=e,n.onerror=i,document.body.appendChild(n)}).then(function(){return t.google.ima})).then(Aa).catch(Aa),Ri)};yu=0;Da={};Da.CustomEvent=typeof CustomEvent=="function"?CustomEvent:function(t){return e[t]=new e("").constructor[t],e;function e(i,n){n||(n={});var r=document.createEvent("CustomEvent");return r.initCustomEvent(i,!!n.bubbles,!!n.cancelable,n.detail),r}}("prototype");Ze=Da.CustomEvent,ue=he("mediaElement"),ht=he("currentTime"),ze=he("enabled"),wu=function(){function t(i){Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,ht,{writable:!0,value:void 0}),Object.defineProperty(this,ze,{writable:!0,value:void 0}),this.seeking=void 0,A(this,ue)[ue]=i,A(this,ht)[ht]=0,A(this,ze)[ze]=!1,this.seeking=!1,this.t=this.t.bind(this),this.i=this.i.bind(this),this.h=this.h.bind(this),this.enable()}var e=t.prototype;return e.i=function(){this.seeking=!0},e.h=function(){this.seeking=!1},e.t=function(){var i,n;this.seeking||(i=A(this,ue)[ue])!=null&&i.paused||(A(this,ht)[ht]=(n=A(this,ue)[ue])==null?void 0:n.currentTime)},e.enable=function(){var i,n,r;A(this,ze)[ze]||((i=A(this,ue)[ue])==null||i.addEventListener("seeking",this.i),(n=A(this,ue)[ue])==null||n.addEventListener("seeked",this.h),(r=A(this,ue)[ue])==null||r.addEventListener("timeupdate",this.t),A(this,ze)[ze]=!0)},e.disable=function(){var i,n,r;A(this,ze)[ze]&&((i=A(this,ue)[ue])==null||i.removeEventListener("seeking",this.i),(n=A(this,ue)[ue])==null||n.removeEventListener("seeked",this.h),(r=A(this,ue)[ue])==null||r.removeEventListener("timeupdate",this.t),A(this,ze)[ze]=!1)},e.play=function(){var i=this;return new Promise(function(n){var r;n((r=A(i,ue)[ue])==null?void 0:r.play())})},e.pause=function(){var i;(i=A(this,ue)[ue])==null||i.pause()},e.reset=function(){A(this,ht)[ht]=0,A(this,ze)[ze]=!1,this.seeking=!1,this.enable()},e.destroy=function(){A(this,ht)[ht]=0,A(this,ze)[ze]=!1,this.seeking=!1,this.disable(),A(this,ue)[ue]=void 0},Pa(t,[{key:"enabled",get:function(){return A(this,ze)[ze]}},{key:"currentTime",get:function(){return A(this,ht)[ht]}},{key:"duration",get:function(){var i;return(i=A(this,ue)[ue])==null?void 0:i.duration}},{key:"muted",get:function(){var i;return(i=A(this,ue)[ue])==null?void 0:i.muted}},{key:"volume",get:function(){var i;return(i=A(this,ue)[ue])==null?void 0:i.volume}}]),t}(),bu=function(){function t(){this.delegate=document.createDocumentFragment()}var e=t.prototype;return e.addEventListener=function(){this.delegate.addEventListener.apply(this.delegate,[].slice.call(arguments))},e.dispatchEvent=function(){return this.delegate.dispatchEvent.apply(this.delegate,[].slice.call(arguments))},e.removeEventListener=function(){return this.delegate.removeEventListener.apply(this.delegate,[].slice.call(arguments))},t}(),Fa=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];(function(t){t.MEDIA_START="MediaStart",t.MEDIA_IMPRESSION="MediaImpression",t.MEDIA_STOP="MediaStop",t.MEDIA_CUE_POINTS_CHANGE="MediaCuePointsChange",t.MEDIA_RESUMED="MediaResumed"})(zn||(zn={})),function(t){t.AD_ERROR="AdError",t.AD_BUFFERING="AdBuffering",t.LOADED="AdLoaded",t.IMPRESSION="AdImpression",t.STARTED="AdStarted",t.FIRST_QUARTILE="AdFirstQuartile",t.MIDPOINT="AdMidpoint",t.THIRD_QUARTILE="AdThirdQuartile",t.AD_PROGRESS="AdProgress",t.COMPLETE="AdComplete",t.CLICK="AdClick",t.PAUSED="AdPaused",t.RESUMED="AdResumed",t.SKIPPED="AdSkipped",t.SKIPPABLE_STATE_CHANGED="AdSkippableStateChanged",t.VOLUME_CHANGED="AdVolumeChanged",t.VOLUME_MUTED="AdMuted",t.AD_METADATA="AdMetadata",t.AD_BREAK_READY="AdBreakReady",t.CONTENT_PAUSE_REQUESTED="AdContentPauseRequested",t.CONTENT_RESUME_REQUESTED="AdContentResumeRequested",t.ALL_ADS_COMPLETED="AdAllAdsCompleted",t.DURATION_CHANGE="AdDurationChange",t.INTERACTION="AdInteraction",t.LINEAR_CHANGED="AdLinearChanged",t.LOG="AdLog",t.USER_CLOSE="AdUserClose",t.AD_CAN_PLAY="AdCanPlay",t.EXPANDED_CHANGED="AdExpandedChanged",t.VIEWABLE_IMPRESSION="AdViewableImpression"}(Hn||(Hn={}));bt=Bn({},Hn,zn),Vn=function(){this.disableCustomPlaybackForIOS10Plus=!1,this.autoResize=!0,this.clickTrackingElement=void 0},xt=function(t){function e(){var i;return(i=t.call.apply(t,[this].concat([].slice.call(arguments)))||this).errorCode=void 0,i.innerError=void 0,i.type=void 0,i.vastErrorCode=void 0,i}return Ra(e,t),e}(Ln(Error));xt.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT=9e3,xt.ERROR_CODE_REQUEST_ADS_TIMEOUT=9001;L=he("mediaElement"),de=he("adElement"),re=he("customPlayhead"),jt=he("adsRenderingSettings"),se=he("ima"),et=he("adDisplayContainer"),H=he("adsManager"),we=he("width"),be=he("height"),Ie=he("adsLoader"),ft=he("playerOptions"),Lt=he("resizeObserver"),Se=he("currentAd"),zt=he("loadedAd"),Re=he("mediaStartTriggered"),pt=he("mediaImpressionTriggered"),St=he("mediaInActivation"),We=he("customPlaybackTimeAdjustedOnEnded"),De=he("cuePoints"),tt=he("adCurrentTime"),it=he("adDuration"),ie=he("startAdCallback"),gt=he("adsManagerLoadedTimeout"),Ht=he("requestAdsTimeout"),He=he("wasExternallyPaused"),Vt=he("lastNonZeroAdVolume"),si=he("activatePromise"),Oa=function(t){function e(n,r,s,a,o){var l;a===void 0&&(a=new n.AdsRenderingSettings),o===void 0&&(o=new Vn),l=t.call(this)||this,Object.defineProperty(X(l),L,{writable:!0,value:void 0}),Object.defineProperty(X(l),de,{writable:!0,value:void 0}),Object.defineProperty(X(l),re,{writable:!0,value:void 0}),Object.defineProperty(X(l),jt,{writable:!0,value:void 0}),Object.defineProperty(X(l),se,{writable:!0,value:void 0}),Object.defineProperty(X(l),et,{writable:!0,value:void 0}),Object.defineProperty(X(l),H,{writable:!0,value:void 0}),Object.defineProperty(X(l),we,{writable:!0,value:void 0}),Object.defineProperty(X(l),be,{writable:!0,value:void 0}),Object.defineProperty(X(l),Ie,{writable:!0,value:void 0}),Object.defineProperty(X(l),ft,{writable:!0,value:void 0}),Object.defineProperty(X(l),Lt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Se,{writable:!0,value:void 0}),Object.defineProperty(X(l),zt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Re,{writable:!0,value:!1}),Object.defineProperty(X(l),pt,{writable:!0,value:!1}),Object.defineProperty(X(l),St,{writable:!0,value:!1}),Object.defineProperty(X(l),We,{writable:!0,value:!1}),Object.defineProperty(X(l),De,{writable:!0,value:[]}),Object.defineProperty(X(l),tt,{writable:!0,value:void 0}),Object.defineProperty(X(l),it,{writable:!0,value:void 0}),Object.defineProperty(X(l),ie,{writable:!0,value:void 0}),Object.defineProperty(X(l),gt,{writable:!0,value:void 0}),Object.defineProperty(X(l),Ht,{writable:!0,value:void 0}),Object.defineProperty(X(l),He,{writable:!0,value:!1}),Object.defineProperty(X(l),Vt,{writable:!0,value:1}),Object.defineProperty(X(l),si,{writable:!0,value:Promise.resolve()}),A(X(l),L)[L]=r,A(X(l),de)[de]=s,A(X(l),se)[se]=n,A(X(l),ft)[ft]=o,A(X(l),jt)[jt]=a,A(X(l),jt)[jt].restoreCustomPlaybackStateOnAdBreakComplete=!0,o.disableCustomPlaybackForIOS10Plus&&!A(X(l),L)[L].hasAttribute("playsinline")&&A(X(l),L)[L].setAttribute("playsinline",""),A(X(l),se)[se].settings.setDisableCustomPlaybackForIOS10Plus(o.disableCustomPlaybackForIOS10Plus),A(X(l),re)[re]=new wu(A(X(l),L)[L]),l.o=l.o.bind(X(l)),Fa.forEach(function(h){A(X(l),L)[L].addEventListener(h,l.o)}),l.u=l.u.bind(X(l)),l.l=l.l.bind(X(l));var u=A(X(l),L)[L],p=u.offsetHeight,v=u.offsetWidth;return A(X(l),we)[we]=v,A(X(l),be)[be]=p,o.autoResize&&window.ResizeObserver&&(A(X(l),Lt)[Lt]=new window.ResizeObserver(function(h){return l.v(h)}),A(X(l),Lt)[Lt].observe(A(X(l),L)[L])),l}Ra(e,t);var i=e.prototype;return i.activate=function(){var n=this;if(!A(this,Re)[Re]&&!A(this,St)[St]&&(A(this,St)[St]=!0,A(this,L)[L].paused)){var r=function(){return A(n,L)[L].pause(),new Promise(function(s){setTimeout(function(){A(n,St)[St]=!1,s()},1)})};A(this,si)[si]=new Promise(function(s){return s(A(n,L)[L].play())}).then(r).catch(r)}},i.playAds=function(n){this.m(n)},i.loadAds=function(n,r){this.m(n,!1,r)},i.p=function(){var n=this;return A(this,si)[si].then(function(){return new Promise(function(r){return r(A(n,L)[L].play())})})},i.m=function(n,r,s){var a=this;r===void 0&&(r=!0),this.reset(),this.O(),A(this,se)[se].settings.setAutoPlayAdBreaks(r),A(this,L)[L].ended&&(A(this,re)[re].reset(),A(this,L)[L].currentTime=0),A(this,ie)[ie]=s,n.linearAdSlotWidth=A(this,we)[we],n.linearAdSlotHeight=A(this,be)[be],n.nonLinearAdSlotWidth=A(this,we)[we],n.nonLinearAdSlotHeight=A(this,be)[be],n.contentDuration==null&&(n.contentDuration=-3),A(this,gt)[gt]=window.setTimeout(function(){var o=new xt("No adsManagerLoadedEvent within 5000ms.");o.errorCode=xt.ERROR_CODE_ADS_MANAGER_LOADED_TIMEOUT,a.j(o)},5e3),A(this,Ht)[Ht]=window.setTimeout(function(){var o=new xt("No response for ads-request within 10000ms.");o.errorCode=xt.ERROR_CODE_REQUEST_ADS_TIMEOUT,a.j(o)},1e4),A(this,Ie)[Ie].requestAds(n)},i.O=function(){A(this,et)[et]=new(A(this,se))[se].AdDisplayContainer(A(this,de)[de],A(this,ft)[ft].disableCustomPlaybackForIOS10Plus?void 0:A(this,L)[L],A(this,ft)[ft].clickTrackingElement),A(this,Ie)[Ie]=new(A(this,se))[se].AdsLoader(A(this,et)[et]),A(this,Ie)[Ie].addEventListener(A(this,se)[se].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),A(this,Ie)[Ie].addEventListener(A(this,se)[se].AdErrorEvent.Type.AD_ERROR,this.l,!1)},i.skipAd=function(){A(this,H)[H]&&A(this,H)[H].skip()},i.discardAdBreak=function(){A(this,H)[H]&&A(this,H)[H].discardAdBreak()},i.play=function(){var n=this;A(this,He)[He]=!1,!A(this,re)[re].enabled&&A(this,H)[H]?A(this,H)[H].resume():A(this,gt)[gt]||this.p().then(function(){}).catch(function(){n.dispatchEvent(new Ze("pause"))})},i.pause=function(){A(this,He)[He]=!0,!A(this,re)[re].enabled&&A(this,H)[H]?A(this,H)[H].pause():A(this,L)[L].pause()},i.g=function(n){A(this,De)[De]=[].concat(n),this.dispatchEvent(new Ze(bt.MEDIA_CUE_POINTS_CHANGE,{detail:{cuePoints:[].concat(A(this,De)[De])}}))},i.A=function(n){var r=this.cuePoints.indexOf(n);r>-1&&(A(this,De)[De].splice(r,1),this.g(A(this,De)[De]))},i.resizeAd=function(n,r){A(this,we)[we]=n,A(this,be)[be]=r,A(this,H)[H]&&A(this,H)[H].resize(n,r,this.k()),A(this,de)[de].style.width=n+"px",A(this,de)[de].style.height=r+"px"},i.reset=function(n){n===void 0&&(n=!1),n&&(A(this,pt)[pt]=!1,A(this,Re)[Re]=!1,A(this,We)[We]=!1),this.C(),A(this,De)[De]=[],A(this,He)[He]=!1,A(this,ie)[ie]=void 0,A(this,H)[H]&&A(this,H)[H].destroy(),A(this,H)[H]=void 0,A(this,se)[se].settings.setAutoPlayAdBreaks(!0),n&&this.P(),A(this,de)[de].style.display="none"},i.P=function(){A(this,Ie)[Ie]&&(A(this,Ie)[Ie].removeEventListener(A(this,se)[se].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),A(this,Ie)[Ie].removeEventListener(A(this,se)[se].AdErrorEvent.Type.AD_ERROR,this.l,!1),A(this,Ie)[Ie].destroy()),A(this,et)[et]&&A(this,et)[et].destroy()},i.destroy=function(){var n,r,s,a,o=this;this.reset(!0),A(this,re)[re].destroy(),Fa.forEach(function(l){A(o,L)[L].removeEventListener(l,o.o)}),(n=A(this,Ie)[Ie])==null||n.removeEventListener(A(this,se)[se].AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.u,!1),(r=A(this,et)[et])==null||r.destroy(),(s=A(this,Ie)[Ie])==null||s.destroy(),A(this,pt)[pt]=!1,A(this,We)[We]=!1,A(this,Re)[Re]=!1,(a=A(this,Lt)[Lt])==null||a.disconnect()},i.isCustomPlaybackUsed=function(){return A(this,se)[se].settings.getDisableCustomPlaybackForIOS10Plus()===!1&&!A(this,de)[de].querySelector("video")},i.C=function(){window.clearTimeout(A(this,gt)[gt]),window.clearTimeout(A(this,Ht)[Ht]),A(this,gt)[gt]=void 0,A(this,Ht)[Ht]=void 0,A(this,Se)[Se]=void 0,A(this,tt)[tt]=void 0,A(this,it)[it]=void 0,A(this,de)[de].style.display="none",A(this,de)[de].classList.remove("nonlinear"),A(this,H)[H]&&this.R()},i.o=function(n){var r=this;if(A(this,re)[re].enabled||n.type==="volumechange"){if(n.type==="timeupdate"){if(A(this,L)[L].currentTime<.5)return;if(A(this,H)[H]){var s=A(this,H)[H].getCuePoints().filter(function(u){return u>=0&&u<A(r,re)[re].currentTime}).pop();this.A(s)}!A(this,pt)[pt]&&A(this,Re)[Re]&&(this.dispatchEvent(new Ze(bt.MEDIA_IMPRESSION)),A(this,pt)[pt]=!0)}if(n.type!=="play"||A(this,Re)[Re]||(this.dispatchEvent(new Ze(bt.MEDIA_START)),A(this,Re)[Re]=!0),n.type==="ended"&&(this.isCustomPlaybackUsed()&&A(this,L)[L].currentTime===A(this,L)[L].duration&&A(this,De)[De].indexOf(-1)>-1&&(A(this,L)[L].currentTime=A(this,L)[L].duration-1e-5,A(this,We)[We]=!0),A(this,Ie)[Ie].contentComplete(),A(this,H)[H]||this.T()),!window.ResizeObserver&&A(this,ft)[ft].autoResize&&n.type==="loadedmetadata"){var a=A(this,L)[L],o=a.offsetHeight,l=a.offsetWidth;A(this,we)[we]=l,A(this,be)[be]=o,this.R()}A(this,St)[St]&&n.type!=="volumechange"||this.dispatchEvent(new Ze(n.type))}},i.S=function(n){var r=this,s=A(this,se)[se].AdEvent;switch(n.type){case s.Type.LOADED:var a=n.getAd();A(this,ie)[ie]&&A(this,De)[De].length===0?A(this,ie)[ie]({ad:a,start:function(){r.M(),A(r,ie)[ie]=void 0},startWithoutReset:function(){r.M()}}):A(this,zt)[zt]=a;break;case s.Type.AD_BREAK_READY:this.C(),A(this,ie)[ie]?(A(this,ie)[ie]({ad:A(this,zt)[zt],adBreakTime:n.getAdData().adBreakTime,start:function(){r.M(),A(r,ie)[ie]=void 0},startWithoutReset:function(){r.M()}}),A(this,zt)[zt]=void 0):this.M();break;case s.Type.STARTED:var o=A(this,Se)[Se]=n.getAd();o.getAdPodInfo().getAdPosition()>1&&A(this,H)[H].setVolume(A(this,H)[H].getVolume()),A(this,de)[de].classList.remove("nonlinear"),this.R(),o.isLinear()?(A(this,re)[re].disable(),A(this,it)[it]=o.getDuration(),A(this,tt)[tt]=0):(A(this,de)[de].classList.add("nonlinear"),this.I()),A(this,de)[de].style.display="",A(this,He)[He]&&(A(this,He)[He]=!1,A(this,H)[H].pause());break;case s.Type.ALL_ADS_COMPLETED:if(A(this,We)[We])return;this.isCustomPlaybackUsed()&&A(this,Se)[Se]&&A(this,Se)[Se].getAdPodInfo().getTimeOffset()!==-1&&this.I(),this.reset();break;case s.Type.CONTENT_PAUSE_REQUESTED:this.C(),A(this,Se)[Se]=n.getAd(),A(this,de)[de].style.display="",A(this,L)[L].pause(),this.R(),A(this,Se)[Se]&&this.A(A(this,Se)[Se].getAdPodInfo().getTimeOffset()),A(this,H)[H].setVolume(A(this,L)[L].muted?0:A(this,L)[L].volume),A(this,re)[re].disable(),A(this,it)[it]=A(this,Se)[Se].getDuration(),A(this,tt)[tt]=0;break;case s.Type.CONTENT_RESUME_REQUESTED:var l=!!A(this,Se)[Se];if(l){var u=A(this,H)[H].getVolume();A(this,L)[L].muted=u===0,A(this,L)[L].volume=A(this,Vt)[Vt]}A(this,We)[We]&&(A(this,L)[L].currentTime=A(this,L)[L].duration+1,A(this,We)[We]=!1),A(this,L)[L].ended?(this.reset(),this.T()):this.C(),l&&(A(this,He)[He]=!1,this.I());break;case s.Type.AD_METADATA:this.g(A(this,H)[H].getCuePoints()),A(this,De)[De].indexOf(0)===-1&&(A(this,ie)[ie]?A(this,ie)[ie]({start:function(){r.I(),A(r,ie)[ie]=void 0},startWithoutReset:function(){r.I()}}):this.I());break;case s.Type.AD_PROGRESS:var p=n.getAdData();A(this,tt)[tt]=p.currentTime,A(this,it)[it]=p.duration;break;case s.Type.LOG:var v=n.getAdData();A(this,ie)[ie]?A(this,ie)[ie]({start:function(){r.I(),A(r,ie)[ie]=void 0},startWithoutReset:function(){r.I()}}):v.adError&&!A(this,Se)[Se]&&this.I();break;case s.Type.VOLUME_CHANGED:var h=A(this,H)[H].getVolume();h>0&&(A(this,Vt)[Vt]=h)}},i.l=function(n){this.j(this.B(n))},i.u=function(n){var r=this,s=A(this,se)[se],a=s.AdEvent,o=s.AdErrorEvent.Type.AD_ERROR;window.clearTimeout(A(this,gt)[gt]);var l=A(this,H)[H]=n.getAdsManager(A(this,re)[re],A(this,jt)[jt]);Object.keys(a.Type).forEach(function(p){l.addEventListener(a.Type[p],function(v){if(r.S(v),bt[p]){var h=["LOG","AD_PROGRESS"].indexOf(p)>-1;r.dispatchEvent(new Ze(bt[p],{detail:{ad:v.getAd()||A(r,Se)[Se],adData:h?v.getAdData():{}}}))}})}),l.addEventListener(o,function(p){return r.j(r.B(p))});try{var u;l.init(A(this,we)[we],A(this,be)[be],this.k()),l.setVolume(A(this,L)[L].muted?0:A(this,L)[L].volume),(u=A(this,et)[et])==null||u.initialize(),A(this,ie)[ie]||this.M()}catch(p){this.j(new xt(p.message))}},i.M=function(){if(A(this,Re)[Re]||(this.dispatchEvent(new Ze(bt.MEDIA_START)),A(this,Re)[Re]=!0),A(this,H)[H])try{A(this,H)[H].start()}catch(n){this.j(new xt(n.message))}else this.I()},i.T=function(){var n=this;setTimeout(function(){A(n,pt)[pt]=!1,A(n,Re)[Re]=!1,A(n,We)[We]=!1,n.dispatchEvent(new Ze(bt.MEDIA_STOP))},1)},i.v=function(n){for(var r,s=function(o,l){var u=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(u)return(u=u.call(o)).next.bind(u);if(Array.isArray(o)||(u=function(v,h){if(v){if(typeof v=="string")return Ca(v,h);var d=Object.prototype.toString.call(v).slice(8,-1);return d==="Object"&&v.constructor&&(d=v.constructor.name),d==="Map"||d==="Set"?Array.from(v):d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?Ca(v,h):void 0}}(o))){u&&(o=u);var p=0;return function(){return p>=o.length?{done:!0}:{done:!1,value:o[p++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(n);!(r=s()).done;){var a=r.value;a.contentBoxSize&&a.contentBoxSize.length===1?(A(this,we)[we]=a.contentBoxSize[0].inlineSize,A(this,be)[be]=a.contentBoxSize[0].blockSize):a.contentBoxSize&&a.contentBoxSize.inlineSize?(A(this,we)[we]=a.contentBoxSize.inlineSize,A(this,be)[be]=a.contentBoxSize.blockSize):(A(this,we)[we]=a.contentRect.width,A(this,be)[be]=a.contentRect.height)}this.R()},i.R=function(){if(A(this,ft)[ft].autoResize&&A(this,H)[H]){var n=A(this,Se)[Se],r=this.k();n&&!n.isLinear()?n&&(n.getWidth()>A(this,we)[we]||n.getHeight()>A(this,be)[be]?this.resizeAd(A(this,we)[we],A(this,be)[be]):(A(this,H)[H].resize(n.getWidth(),n.getHeight()+20,r),A(this,de)[de].style.width=n.getWidth()+"px",A(this,de)[de].style.height=n.getHeight()+20+"px")):this.resizeAd(A(this,we)[we],A(this,be)[be])}},i.k=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||A(this,L)[L].webkitDisplayingFullscreen?A(this,se)[se].ViewMode.FULLSCREEN:A(this,se)[se].ViewMode.NORMAL},i.I=function(){var n=this;A(this,de)[de].style.display="none",A(this,L)[L].ended||(A(this,re)[re].enable(),A(this,He)[He]?(A(this,L)[L].pause(),this.dispatchEvent(new Ze("pause"))):(this.p().then(function(){}).catch(function(){n.dispatchEvent(new Ze("pause"))}),this.dispatchEvent(new Ze("play")),this.dispatchEvent(new Ze(bt.MEDIA_RESUMED))),A(this,He)[He]=!1)},i.B=function(n){var r=n.getError(),s=new xt(r.getMessage());return s.type=r.getType(),s.errorCode=r.getErrorCode(),s.vastErrorCode=r.getVastErrorCode&&r.getVastErrorCode(),s.innerError=r.getInnerError(),s},i.j=function(n){var r=this;this.dispatchEvent(new Ze(bt.AD_ERROR,{detail:{error:n}})),this.C(),A(this,ie)[ie]?A(this,ie)[ie]({start:function(){r.I(),A(r,ie)[ie]=void 0},startWithoutReset:function(){r.I()}}):this.I()},Pa(e,[{key:"volume",get:function(){return!A(this,re)[re].enabled&&A(this,H)[H]?A(this,H)[H].getVolume():A(this,L)[L].volume},set:function(n){!A(this,re)[re].enabled&&A(this,H)[H]&&A(this,H)[H].setVolume(n),A(this,L)[L].volume=n}},{key:"muted",get:function(){return!A(this,re)[re].enabled&&A(this,H)[H]?A(this,H)[H].getVolume()===0:A(this,L)[L].muted},set:function(n){!A(this,re)[re].enabled&&A(this,H)[H]&&A(this,H)[H].setVolume(n?0:A(this,Vt)[Vt]),A(this,L)[L].muted=n}},{key:"currentTime",get:function(){return A(this,tt)[tt]!==void 0?A(this,tt)[tt]:A(this,L)[L].currentTime},set:function(n){A(this,re)[re].enabled&&(A(this,L)[L].currentTime=n)}},{key:"duration",get:function(){return A(this,it)[it]!==void 0?A(this,it)[it]:A(this,L)[L].duration}},{key:"cuePoints",get:function(){return[].concat(A(this,De)[De])}}]),e}(bu)});var Ba=V((ip,Na)=>{ka();Na.exports=class{constructor(e,i,n,r){this.utils=e,this.config=this.utils.config,this.hb_config=this.utils.config.services.header_bidding,this.adDiv=i,this.size=n,this.bid=r,this.vastUrl=this.bid.vastUrl||null,this.vastXml=this.bid.vastXml||null,this.mediaElement=null,this.adContainer=null,this.controlsContainer=null,this.volumeButton=null}run(){this.styles(),this.html(),this.play()}play(){Ta().then(()=>{window.google.ima.settings.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE),window.google.ima.settings.setNumRedirects(3);let e=new window.google.ima.AdsRenderingSettings;e.loadVideoTimeout=1e4,e.useStyledLinearAds=!1,e.useStyledNonLinearAds=!1;let i=new Vn;this.player=new Oa(window.google.ima,this.mediaElement,this.adContainer,e,i),this.player.addEventListener("AdError",r=>{this.handleAdError(r.detail.error)}),this.player.addEventListener("AdImpression",r=>{this.handleAdImpression()}),this.player.addEventListener("AdClick",r=>{this.handleVideoEvents("click",r.detail)}),this.player.addEventListener("AdFirstQuartile",r=>{this.handleVideoEvents("first_quartile",r.detail)}),this.player.addEventListener("AdMidpoint",r=>{this.handleVideoEvents("midpoint",r.detail)}),this.player.addEventListener("AdThirdQuartile",r=>{this.handleVideoEvents("third_quartile",r.detail)}),this.player.addEventListener("AdComplete",r=>{this.handleAdEnd()}),this.controlsMute(),this.mediaElement.muted=!0,this.mediaElement.volume=0;let n=new window.google.ima.AdsRequest;n.vastLoadTimeout=1e4,this.vastUrl?n.adTagUrl=this.vastUrl:this.vastXml&&(n.adsResponse=this.vastXml),this.player.playAds(n),this.controlsContainer&&window.getComputedStyle(this.controlsContainer).display==="none"&&this.controlsContainer.setAttribute("style","display:block !important")})}handleLoaded(e){try{e.data.B.vpaid||(this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3))}catch{this.playerState=!0,setTimeout(()=>{this.playerState&&(this.visible?this.player.play():this.player.pause())},1e3)}this.resizeAd()}resizeAd(){if(this.bid.width<=this.size.width)return;let e=this.bid.height/this.bid.width;this.size.height=Math.floor(this.size.width*e),this.player.resize(this.size.width,this.size.height)}handleAdPlay(){this.controlsMute(),this.player.setVolume(0)}handleAdImpression(){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let e=this.utils.window.OCM.vidimps[this.bid.auctionId];fetch("https://windrunner.orangeclickmedia.com/pba-update",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(e)}).then(i=>{}).catch(i=>{console.error(i)})}}handleVideoEvents(e,i){if(this.utils.window.OCM?.vidimps&&this.utils.window.OCM.vidimps[this.bid.auctionId]){let n=this.utils.window.OCM.vidimps[this.bid.auctionId],r={eventName:e,adUnit:n.data.adUnit,auctionId:n.data.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-video",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(r)}).then(s=>{s.json().then(a=>{})}).catch(s=>{console.error(s)})}}handleAdEnd(){this.player.destroy(),this.videoContainer.style.height=0,setTimeout(()=>{this.videoContainer.remove()},500),this.refreshAd()}handleAdError(e){console.error(e),this.refreshAd()}refreshAd(){if(this.hb_config.functionality!=="no_adserver")if(this.hb_config.functionality.includes("lazyload"))this.resetLazyLoadForAdDiv();else{let e=this.utils.window.googletag.pubads().getSlots().filter(i=>i.getSlotElementId()===this.adDiv.id);e.length&&this.utils.window.googletag.pubads().refresh(e)}}resetLazyLoadForAdDiv(){this.adDiv.removeAttribute("data-lazyloaded-by-ocm"),this.adDiv.removeAttribute("data-oau-code")}styles(){this.utils.loadStyle(`
        .ocmVideoContainer {
           display:block; margin:0 auto; width:100%; transition: height 1s, transform 1s;
        }
        .ocmAdContainer {
            position:absolute;
            left:0px;
            top:0px;
            z-index:100;
        }
        .ocmAdControls {
        	display:none;
        	width:0px;
        	height:auto;
        	position: absolute;
        	left:0px;
        	top:0px;
        	z-index:101;
        }
        /*.ocmAdPlay, */
        .ocmAdVolume {
        	position:absolute;
        	top:10px;
        	width:32px;
        	height:32px;
        	cursor: pointer;
        	border-radius:50%;
        	background-color: rgb(223 129 0 / 85%);
        	background-origin:border-box;
        	background-position:center center;
        	background-repeat: no-repeat;
        	background-size:20px;
        }
        .ocmAdLabel {
        	position:absolute;
        	top:16px;
        	left:50px;
        	width:16px;
        	height:16px;
        	font-size:12px;
        	color:#000;
        	text-shadow:1px 1px 0px rgba(255, 255, 255, 0.6)
        }
        .scaled {
            transform: scale(0.8) !important;        
        }
        .ocmAdLabel.scaled {
            left: 46px !important;
        }
        .ocmAdVolume {
        	left:10px;
        }
        /*
        .ocmAdPlay {
    		left:10px;
        }
        .ocmAdPlay.playing {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/pause.png');
        }
        .ocmAdPlay.paused {
        	background-position: 9px 6px;
		    background-size: 18px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/play.png');
        }
        */
        .ocmAdVolume.unmuted {
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/mute.png');
        }
        .ocmAdVolume.muted {
        	background-position: 9px 9px;
        	background-image:url('//cdn.orangeclickmedia.com/assets/outstream-player/unmute.png');
        }
        `)}html(){let e=`<div id="ocmVideo-${this.adDiv.id}" class="ocmVideoContainer">
              <video id="ocmMediaElement-${this.adDiv.id}" style="width:100%; height:100%;" autoplay webkit-playsinline="true" playsinline="true" muted="true" preload="none">
              </video>
              <div id="ocmAdContainer-${this.adDiv.id}" class="ocmAdContainer"></div>
              <div class="ocmAdControls">
                <div class="ocmAdLabel">Ad</div>
                <div class="ocmAdPlay"></div>
                <div class="ocmAdVolume"></div>
                <div class="ocmAdReplay"></div>
              </div>
            </div>`;this.adDiv.insertAdjacentHTML("afterbegin",e),this.videoContainer=document.getElementById(`ocmVideo-${this.adDiv.id}`),this.mediaElement=document.getElementById(`ocmMediaElement-${this.adDiv.id}`),this.adContainer=document.getElementById(`ocmAdContainer-${this.adDiv.id}`),this.controlsContainer=document.querySelector(`#ocmVideo-${this.adDiv.id} .ocmAdControls`),this.volumeButton=document.querySelector(`#ocmVideo-${this.adDiv.id} .ocmAdControls .ocmAdVolume`),this.size.width===300&&(this.controlsContainer.classList.add("scaled"),this.volumeButton.classList.add("scaled")),this.elementListeners()}elementListeners(){this.volumeButton.addEventListener("click",e=>{this.volumeState?(this.controlsMute(),this.player.volume=0):(this.controlsUnMute(),this.player.volume=.2)})}controlsMute(){this.volumeState=!1,this.player.volume=0,this.volumeButton.classList.remove("unmuted"),this.volumeButton.classList.add("muted")}controlsUnMute(){this.volumeState=!0,this.player.volume=.1,this.volumeButton.classList.remove("muted"),this.volumeButton.classList.add("unmuted")}}});var Di=V((rp,Ma)=>{var G="header_bidding",Su=["Article","article","news_article","Recipe","Teen Article"],xu="https://windrunner.orangeclickmedia.com/insert",Eu=Ba();Ma.exports=class{constructor(e,i){this.utils=e,this.config=i,this.hb_config=this.config.services.header_bidding,this.analytics_adapters=[],this.viewedBids=[],this.mode=this.hb_config.functionality}run(){return new Promise(async(e,i)=>{if(performance.mark("header_bidding_start"),this.utils.window.OCM.s?.header_bidding)return e({name:G});if(this.hasS2sEnabled=Math.random()<=.5&&this.hb_config.bidders.some(n=>!!n.s2s),!this.config.services.lazyload.active){switch(this.hb_config.functionality){case"lazyload":this.hb_config.functionality="adserver";break;case"no_adserver":this.hb_config.functionality="no_adserver";break;default:this.hb_config.functionality="adserver"}this.mode=this.hb_config.functionality}if(!this.utils.allowedPageType(this.hb_config.page_types))return this.utils.log.warn(G,"Header Bidding is not allowed on this page type"),e({name:G});await this.ocmpbjsInit(),this.prebidEventListeners(),await this.loadPrebidLibrary().catch(n=>(this.initAdServer([],!1),i({name:G,message:n}))),this.loadAdformCookie(),this.prepare(this.config.services.lazyload.active).then(()=>e({name:G})).catch(n=>i({name:G,message:n}))})}prepare(e){return new Promise(async(i,n)=>{if(e=typeof e>"u"?!1:e,this.hb_config.bidderTimeout===1)return this.utils.log.warn(G,"Timeout was set to 1ms, terminating process."),i();this.adjustBidderTimeout(e),this.buildAdUnits().then(()=>(this.utils.window.OCM.adBlocked||this.setupAnalytics(),this.utils.window.OCM.s&&!this.utils.window.OCM.s.ocm_gone_mad_preview&&this.utils.contentLoaded().then(()=>{this.injectHbOnlyDivs()}),this.configure(),this.mode!=="no_adserver"&&this.gptEventListeners(),i())).catch(r=>n(r))})}buildAdUnits(){return new Promise((e,i)=>{this.utils.log.info(G,"Building ocmpbjs.adUnits...");try{let n=[];try{n=[...this.utils.window.ocmpbjs.adUnits]}catch{}let r=this.hb_config.adUnits.map(s=>{this.utils.log.info(G,`--=== START of processing ad unit ${s.code} ===--`);let a=!0,o=!0,l=!0;if(a=this.filterAdUnitByPageType(s),o=this.filterAdUnitByDevice(s),l=o&&a,l){if(s=this.jsonifyAd(s),s=this.removeInactiveBidderBids(s),!s)return this.utils.log.warn(G,"--=== (removeInactiveBidderBids) END of processing ad unit ===--"),null;if(s=this.removeNullBidParams(s),s=this.hbSizeMap(s),!s)return this.utils.log.warn(G,"--=== (hbSizeMap) END of processing ad unit ===--"),null;s=this.removeBadBidSizes(s),this.utils.window.OCM?.geo?.country&&(s=this.geoFilter(s)),s=this.buildMediaTypes(s),s.hb_only=!!s.hb_only}else this.utils.log.info(G,`--=== END of processing ad unit ${s.code} ===--`),s=null;return s&&this.utils.log.info(G,`--=== END of processing ad unit ${s.code} ===--`),s}).filter(s=>s!=null);return this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.addAdUnits([...new Set([...n,...r])])}),e()}catch(n){return i(n)}})}configure(){this.sendViewabilityEvent(),this.utils.window.ocmpbjs.que.push(()=>{(typeof this.config.uses_cmp>"u"||this.config.uses_cmp)&&this.utils.window.ocmpbjs.setConfig({consentManagement:{gdpr:{cmpApi:"iab",timeout:this.hb_config.bidderTimeout+2e4,defaultGdprScope:!0,rules:[{purpose:"storage",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]},{purpose:"basicAds",enforcePurpose:!0,enforceVendor:!0},{purpose:"measurement",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]},{purpose:"reportAnalytics",enforcePurpose:!0,enforceVendor:!0,vendorExceptions:["ocmpba"]}]}}}),this.hb_config?.adsqRTDModuleEnabled&&!this.utils.is_bot&&this.utils.window.ocmpbjs.setConfig({realTimeData:{auctionDelay:this.utils.window.ocmpbjs?.adUnits.length===1&&this.utils.window.ocmpbjs.adUnits[0].code==="ocm-gone-mad"?1500:700,dataProviders:[{name:"adsquirrel",waitForIt:!0,params:{}}]}}),this.hasS2sEnabled?this.handleS2SConfig():this.utils.hostname.includes("iefimerida.gr")&&this.hb_config.bidders.some(i=>!!i.s2s)&&this.hb_config.s2sProvider==="assertive-yield"&&function(){window.assertive={entityId:"iA6DnRMwWAYDNvCLK",analytics:{logUnfilled:!0,override:{adid:"hb_adid",pbjs:"ocmpbjs"}},hash:{generator:"list",list:["S2S-OFF","S2S-ON"],key:"S2S-OFF",values:2}};var i=document.createElement("script");i.src="https://ia6dnrmwwaydnvclk.ay.delivery/client-v2.js",document.head.appendChild(i)}(),this.utils.window.ocmpbjs.setConfig({enableTIDs:!0,bidViewabilityIO:{enabled:!0},auctionOptions:{suppressStaleRender:!0},targetingControls:{alwaysIncludeDeals:!0,addTargetingKeys:["ocm_hb_deal","ocm_hb_size","ocm_hb_cpm","ocm_hb_auction","ocm_hb_advertiser","ocm_hb_bidder","ocm_hb_pb","ocm_hb_format","ocm_hb_adid","ocm_hb_source","ocm_hb_sf"]},floors:{enforcement:{floorDeals:!1,bidAdjustment:!0},data:{currency:this.hb_config.adServerCurrency,schema:{fields:["mediaType"]},values:{banner:.05,video:.25,native:.1}}},ortb2:{badv:this.utils.config.badv||[],device:{geo:{},ext:{data:{}}},site:{inventorypartnerdomain:"orangeclickmedia.com",ext:{data:{hostname:this.utils.hostname.replace("www.",""),rmf_approved:this.utils.config.services.header_bidding.rmf_approved||[]}},content:{},cat:[],publisher:{domain:this.utils.hostname.replace("www.","")}},user:{ext:{data:{}},geo:{}}},firstPartyData:{skipEnrichments:!1},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},priceGranularity:{buckets:[{precision:2,min:.01,max:10,increment:.01},{precision:2,max:20,increment:.1},{precision:2,max:50,increment:.5}]},gptPreAuction:{enabled:!0,useDefaultPreAuction:!0},schain:this.config.schain,currency:{adServerCurrency:this.hb_config.adServerCurrency,conversionRateFile:"https://cdn.orangeclickmedia.com/tech/libs/latest_currencies.txt",defaultRates:{EUR:{AED:3.910817,AFN:84.894456,ALL:107.055056,AMD:413.808926,ANG:1.935814,AOA:881.072944,ARS:372.591364,AUD:1.646941,AWG:1.919208,AZN:1.807316,BAM:1.956531,BBD:2.168715,BDT:117.86401,BGN:1.957687,BHD:.401352,BIF:3042.621899,BMD:1.064748,BND:1.461279,BOB:7.421817,BRL:5.184894,BSD:1.074052,BTC:40030548e-12,BTN:89.133502,BWP:14.61379,BYN:2.711069,BYR:20869.052451,BZD:2.164993,CAD:1.437393,CDF:2629.926215,CHF:.953586,CLF:.034314,CLP:946.81573,CNY:7.630087,COP:4173.01193,CRC:572.599852,CUC:1.064748,CUP:28.215811,CVE:110.321736,CZK:24.548287,DJF:191.238349,DKK:7.456109,DOP:60.971929,DZD:146.5753,EGP:32.945315,ERN:15.971214,ETB:59.379353,FJD:2.40899,FKP:.852689,GBP:.857154,GEL:2.798147,GGP:.852689,GHS:12.335344,GIP:.852689,GMD:64.41333,GNF:9220.915298,GTQ:8.453268,GYD:224.715566,HKD:8.333391,HNL:26.464107,HRK:7.468894,HTG:145.53758,HUF:384.59713,IDR:16360.006187,ILS:4.070828,IMP:.852689,INR:88.437826,IQD:1406.610175,IRR:44998.893087,ISK:145.295917,JEP:.852689,JMD:165.94846,JOD:.754055,JPY:157.011405,KES:156.196944,KGS:94.41479,KHR:4405.348314,KMF:493.08561,KPW:958.274829,KRW:1413.276748,KWD:.328964,KYD:.895052,KZT:500.462676,LAK:21368.78876,LBP:16062.338222,LKR:347.46543,LRD:198.504247,LSL:20.283725,LTL:3.143923,LVL:.644056,LYD:5.21068,MAD:10.906609,MDL:19.29074,MGA:4857.543739,MKD:61.531041,MMK:2255.55998,MNT:3702.293959,MOP:8.659572,MRO:380.114701,MUR:47.696163,MVR:16.40762,MWK:1170.613012,MXN:18.202284,MYR:4.98142,MZN:67.34523,NAD:20.283568,NGN:818.460413,NIO:39.301319,NOK:11.416378,NPR:142.618024,NZD:1.796133,OMR:.409911,PAB:1.074042,PEN:3.973384,PGK:3.946066,PHP:60.583601,PKR:319.806569,PLN:4.633989,PYG:7819.021134,QAR:3.876718,RON:4.970454,RSD:117.281535,RUB:101.682601,RWF:1287.786467,SAR:3.993773,SBD:8.94888,SCR:13.727802,SDG:640.004824,SEK:11.892751,SGD:1.450218,SHP:1.295531,SLE:23.682072,SLL:21028.764683,SOS:605.287384,SRD:40.737446,STD:22038.125066,SSP:639.913082,SYP:13843.498701,SZL:20.286433,THB:38.085492,TJS:11.793855,TMT:3.726617,TND:3.359295,TOP:2.546504,TRY:28.694091,TTD:7.290681,TWD:34.020779,TZS:2667.013813,UAH:39.670474,UGX:4001.057648,USD:1.064748,UYU:41.100751,UZS:13054.591054,VEF:3544567605004e-6,VES:35.632779,VND:25825.452408,VUV:129.731959,WST:2.928959,XAF:656.306851,XAG:.04655,XAU:556e-6,XCD:2.877533,XDR:.812826,XOF:656.294516,XPF:119.89017,YER:266.56004,ZAR:20.247877,ZMK:9584.016189,ZMW:22.04513,ZWL:342.848284}}},userSync:{syncsPerBidder:5,auctionDelay:700,filterSettings:{iframe:{bidders:"*",filter:"include"}},userIds:[{name:"lotamePanoramaId",params:{clientId:"17623"}},{name:"identityLink",params:{pid:"1258"},storage:{type:"html5",name:"idl_env",expires:90,refreshInSeconds:8*3600}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=pubmatic&fmt=json",type:"html5",name:"_unifiedid",expires:30}},{name:"criteo"},{name:"id5Id",params:{partner:347},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}},{name:"sharedId",storage:{type:"html5",name:"_pubcid",expires:365}}],aliasSyncEnabled:!0},maxRequestsPerOrigin:4,bidderTimeout:Number(this.hb_config.bidderTimeout),timeoutBuffer:400,useBidCache:!0,suppressEmptyKeys:!0,enableSendAllBids:!1,pageUrl:this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,ix:{timeout:Number(this.hb_config.bidderTimeout)},rubicon:{singleRequest:!0},amazon:{sid:this.hb_config.amazon_sid},outbrain:{bidderUrl:"//b1h-euc1.zemanta.com/api/bidder/prebid/bid",usersyncUrl:"//b1h-euc1.zemanta.com/usersync/prebid"}});let e=[{bidder:"pubmatic",domain:"pubmatic.com",id:"157884"},{bidder:"appnexus",domain:"xandr.com",id:"14808"},{bidder:"teads",domain:"teads.tv",id:"26771"},{bidder:"adyoulike",domain:"adyoulike.com",id:"7ddaba905b34014f9bd3fe2c57d6d46e"},{bidder:"gumgum",domain:"gumgum.com",id:"14064"},{bidder:"medianet",domain:"media.net",id:"8CU32RQ72"},{bidder:"triplelift",domain:"triplelift.com",id:"9262"}];if(window.OCM?.notOwnedBidders){let i=null;try{window.OCM.notOwnedBidders.forEach(n=>{let r=e.findIndex(s=>s.bidder===n.bidder);r&&(delete e[r],e=e.filter(s=>s)),i={bidders:[n.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:`${n.domain}`,sid:`${n.id}`,hp:1}]}}}},this.utils.window.ocmpbjs.setBidderConfig(i)})}catch(n){this.utils.log.error(G,n,"Error while setting custom schain config")}}e.forEach(i=>{let n=i.bidder==="appnexus"?{bidders:[i.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[{asi:"adops.gr",sid:this.config.adops_seller_id,hp:1}]}}}}:{bidders:[i.bidder],config:{schain:{validation:"relaxed",config:{ver:"1.0",complete:1,nodes:[this.config.schain.config.nodes[0],{asi:`${i.domain}`,sid:`${i.id}`,hp:1}]}}}};this.utils.window.ocmpbjs.setBidderConfig(n)}),this.utils.window.ocmpbjs.bidderSettings=this.setupBidderSettings(this.hb_config.custom_granularity),this.analytics_adapters.length&&!this.utils.window.OCM.adBlocked&&this.utils.window.ocmpbjs.enableAnalytics(this.analytics_adapters)}),this.resize1x1Impressions(),this.utils.config.services.reaper.active&&this.utils.window.OCM.s?.is_gordon_with_us&&this.addUserIdsToReaperAndSend(),typeof this.utils.window.ocmpbjs.getUserIdsAsync=="function"&&this.utils.window.ocmpbjs.getUserIdsAsync().then(()=>{this.utils.window.googletag.cmd.push(()=>{let e=this.utils.window.ocmpbjs.getUserIdsAsEids().filter(i=>i.source==="crwdcntrl.net")[0]?.uids[0]?.id;e&&this.utils.window.googletag.pubads().setPublisherProvidedId(e)})}),this.mode.includes("lazyload")&&this.utils.window.OCM.s&&!this.utils.window.OCM.s.ocm_gone_mad_preview&&this.hbOnlyAuction(),this.mode.includes("lazyload")||this.utils.window.ocmpbjs.que.push(()=>{if(this.utils.log.info(G,"Added this.hb_config.adUnits to prebid",this.utils.window.ocmpbjs.adUnits),this.mode==="no_adserver")this.utils.window.ocmpbjs.requestBids({adUnitCodes:this.utils.window.ocmpbjs.adUnits.map(e=>e.code),bidsBackHandler:(e,i,n)=>{this.utils.log.info(G,"no_adserver bidResponses",e),Object.keys(e).forEach(r=>{e[r].bids=e[r].bids.filter(s=>s.statusMessage!=="bidRejected"&&s.status!=="bidRejected")}),Object.keys(e).forEach(r=>{e[r].bids.length||delete e[r]}),Object.keys(e).length>0&&this.directRenderBids(e)}});else{let e=[];this.utils.window.googletag.cmd.push(()=>{e=this.utils.window.googletag.pubads().getSlots().map(n=>n.getAdUnitPath());let i=this.utils.window.ocmpbjs.adUnits.filter(n=>!n.hb_only&&e.includes(n.code));this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(n=>n.code),bidsBackHandler:(n,r,s)=>{this.initAdServer([],!1)}})}),this.utils.window.OCM.s&&!this.utils.window.OCM.s.ocm_gone_mad_preview&&this.hbOnlyAuction()}})}sendViewabilityEvent(){this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidViewable",e=>{if(this.viewedBids.includes(e.adId))return;this.viewedBids.push(e.adId),this.utils.log.info(G,"bidViewable",e);let i={eventName:"bidViewable",adUnit:e.adUnitCode.toLowerCase(),auctionId:e.auctionId};fetch("https://windrunner.orangeclickmedia.com/pba-viewability",{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify(i)}).then(n=>{}).catch(n=>{!["Failed to fetch","NetworkError when attempting to fetch resource","Load failed"].includes(n.message)&&this.utils.shouldLogError&&this.utils.log.error(G,n,"Unable to send HB viewability event to Jaina")})})})}hbOnlyAuction(){let i=[...this.utils.window.ocmpbjs.adUnits].filter(n=>!!n.hb_only);i&&i.length===0||(this.utils.log.info(G,"Running request bids for hb only ad units",i),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.requestBids({adUnitCodes:i.map(n=>n.code),bidsBackHandler:(n,r,s)=>{this.utils.log.info(G,"hb_only bid responses: ",n," timeout: ",r," auctionId: ",s),Object.keys(n).forEach(a=>{n[a].bids=n[a].bids.filter(o=>o.statusMessage!=="bidRejected"&&o.status!=="bidRejected")}),Object.keys(n).forEach(a=>{n[a].bids.length||delete n[a]}),Object.keys(n).length>0&&this.directRenderBids(n)}})}))}injectHbOnlyDivs(){let i=[...this.utils.window.ocmpbjs.adUnits].filter(n=>!!n.hb_only);if(!(i&&i.length===0)){this.utils.log.info(G,"Injecting divs for hb only ad units");for(let n of i){if(n.code==="ocm-sticky-fullscreen")continue;if(!this.utils.window.document.getElementById(n.code)){let s=this.utils.window.document.createElement("div");s.id=n.code,this.utils.doc_body.append(s)}}}}addUserIdsToReaperAndSend(){let e=null;e=this.utils.reaper_data,e&&typeof this.utils.window.ocmpbjs.getUserIdsAsync=="function"&&this.utils.window.ocmpbjs.getUserIdsAsync().then(()=>{e.eids=JSON.stringify(this.utils.window.ocmpbjs.getUserIdsAsEids()),e.eids=e.eids==="null"?"":e.eids,e.ip=this.utils.window.OCM?.geo?.ip||"",this.sendReaperData(e)})}sendReaperData(e){let i=new XMLHttpRequest;i.open("POST",xu),i.setRequestHeader("Content-Type","text/plain"),i.send(JSON.stringify(e)),i.onerror=()=>{}}initAdServer(e,i=!1){if(i){this.utils.log.info(G,"Calling initAdServer with slots:",e.map(r=>r.getAdUnitPath()));let n=[];for(let r of e){let s=this.utils.window.document.querySelector('[id="'+r.getSlotElementId()+'"]');s&&(s.removeAttribute("data-lazyincluded-by-ocm"),s.setAttribute("data-lazyloaded-by-ocm",""),n.push(r.getAdUnitPath()))}typeof e<"u"&&e.length&&this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.setTargetingForGPTAsync(n),this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})}catch(r){this.utils.log.error(G,r,"Error calling initAdServer")}})})}else this.utils.log.info(G,"Calling initAdServer for all slots"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.setTargetingForGPTAsync(),this.utils.window.googletag.pubads().refresh(),this.utils.window.OCM.init_ad_server_set=!0})})}directRenderBids(e){for(let i in e){this.utils.log.info(G,"Found bid for #"+i);let n=this.getDivFromGptSlot(i),r=this.utils.window.document.getElementById(n);if(r){this.utils.log.info(G,"Ad div = ",r);let s=this.utils.window.document.createElement("iframe");s.setAttribute("id",n+"_ocm_hb"),s.setAttribute("style","border:0; overflow:hidden; margin:0px auto;display:block;"),s.width="1",s.height="1",s.setAttribute("frameborder","0"),s.setAttribute("marginheight","0"),s.setAttribute("marginwidth","0"),s.setAttribute("scrolling","no"),s.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation-by-user-activation");let a=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(n);if(Object.keys(a).length||(a=this.utils.window.ocmpbjs.getAdserverTargetingForAdUnitCode(i)),this.utils.log.info(G,"adServerTargeting",a),a&&a.hb_adid){this.utils.log.info(G,"Rendering ad for "+n),r.querySelectorAll("script, div, iframe, ins").forEach(u=>u.remove()),r.append(s);let l=s.contentDocument||s.contentWindow.document;this.utils.window.ocmpbjs.renderAd(l,a.hb_adid),setTimeout(()=>{l.body&&(l.body.insertAdjacentHTML("afterbegin","<style>body {margin:0px !important}</style>"),l.body.style.margin="0px !important")},10),r.setAttribute("style","display:block;overflow:hidden;margin:0 auto;")}}else this.utils.log.info(G,"Ad div #"+n+" not found")}}getDivFromGptSlot(e){try{if(!!this.hb_config.adUnits.filter(n=>n.code===e&&n.hb_only).length){if(this.utils.window.document.querySelectorAll(`div[id=${e}]`))return e}else{let n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);if(n.length)return n[0].getSlotElementId()}}catch(i){this.utils.log.error(G,i,"Error while getting div from GPT slot")}return e}resize1x1Impressions(){this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidWon",e=>{if(e.mediaType==="banner"){let i=this.utils.window.googletag.pubads().getSlots().find(s=>s.getAdUnitPath()===e.adUnitCode&&s.getTargeting("hb_adid")[0]===e.adId);if(!i)return;let n=this.utils.window.document.querySelector(`div[id^="google_ads_iframe_${i.getSlotId().getId().replace(/(\.|\/)/g,"\\$1")}"]`);n&&(n.style.height=`${e.height}px !important`,n.style.width=`${e.width}px !important`);let r=this.utils.window.document.getElementById(i.getSlotElementId());if(r&&r.classList.contains("ocm-sticky")){let a=r.parentNode.parentNode,o=a.parentNode;if(o.classList.contains("left")||o.classList.contains("right")){let l=document.createElement("div");l.classList.add("ocm-close-icon-container");let u=document.createElement("span");u.classList.add("ocm-button-close"),this.utils.is_mobile||(l.addEventListener("mouseenter",()=>{u.classList.add("ocm-button-close-hover")}),l.addEventListener("mouseleave",()=>{u.classList.remove("ocm-button-close-hover")})),o.style.width=`${e.width}px !important`,setTimeout(()=>{a&&a.childNodes&&Array.from(a.childNodes).find(h=>h.className==="ocm-close-icon-container")||(l.append(u),a.append(l))},5e3),a&&a.childNodes&&Array.from(a.childNodes).find(v=>v.className==="ocm-close-icon-container")||(l.append(u),a.append(l)),u.addEventListener("click",v=>{o.classList.contains("left")?o.style.marginLeft="-"+String(e.width)+"px":o.classList.contains("right")&&(o.style.marginRight="-"+String(e.height)+"px"),setTimeout(()=>{o.remove()},500),v.stopPropagation()})}}}})})}setupBidderSettings(e){this.utils.log.info(G,"Setting up adserverTargeting & bidder settings");let i={standard:{suppressEmptyKeys:!0,adserverTargeting:[{key:"adlds",val:a=>this.hb_config.hasOwnProperty("adelaideEnabled")&&this.hb_config.adelaideEnabled?"true":"false"},{key:"hb_auction",val:a=>a.auctionId},{key:"hb_advertiser",val:a=>a.meta.hasOwnProperty("advertiserDomains")&&a.meta.advertiserDomains.length?a.meta.advertiserDomains.map(o=>o.replace("www.","")):""},{key:"infi_article_count",val:a=>this.utils.window.OCM?.infi_article_count.toString()},{key:"hb_bidder",val:a=>a.bidderCode},{key:"hb_adid",val:a=>a.adId},{key:"hb_pb",val:a=>e?a.pbCg:a.pbHg},{key:"hb_size",val:a=>a.getSize()},{key:"hb_format",val:a=>a.mediaType},{key:"hb_cpm",val:a=>a.cpm},{key:"hb_deal",val:a=>a.dealId},{key:"hb_sf",val:a=>"false"},{key:"hb_cache_id",val:a=>a.videoCacheKey},{key:"hb_uuid",val:a=>a.videoCacheKey},{key:"ocm_hb_size",val:a=>a.getSize()},{key:"ocm_hb_cpm",val:a=>a.cpm},{key:"ocm_hb_deal",val:a=>a.dealId},{key:"ocm_hb_auction",val:a=>a.auctionId},{key:"ocm_hb_advertiser",val:a=>a.meta.hasOwnProperty("advertiserDomains")&&a.meta.advertiserDomains.length?a.meta.advertiserDomains.map(o=>o.replace("www.","")):""},{key:"ocm_hb_bidder",val:a=>a.bidderCode},{key:"ocm_hb_adid",val:a=>a.adId},{key:"ocm_hb_pb",val:a=>e?a.pbCg:a.pbHg},{key:"ocm_hb_format",val:a=>a.mediaType},{key:"ocm_hb_source",val:a=>a.source},{key:"ocm_hb_sf",val:a=>"false"},{key:"ocm_hb_cache_id",val:a=>a.videoCacheKey},{key:"ocm_hb_deal",val:a=>a.dealId}]}},n,r=1,s="";if(typeof this.hb_config.bidders<"u")for(n=0;n<this.hb_config.bidders.length;n++)r=parseFloat(this.hb_config.bidders[n].bid_cpm_adjust),s=this.hb_config.bidders[n].name,i[this.hb_config.bidders[n].name]={storageAllowed:!0,bidCpmAdjustment:(a,o)=>{if(Object.keys(o).length===1)return a;let l=a;switch(o.bidderCode){case"smartadserver":o.netRevenue===!1&&o.dealId!==""&&(l=a*.9);break;case"improvedigital":o.isNet===!1&&o.dealId!==""&&(l=a*.9);break;case"adform":o.dealId&&(l=a>3.5&&o.height===1&&o.width===1?3.5:a*.8);break;case"pubmatic":o.dealId&&(l=a*.8);break;default:l=a;break}return l}};return i}handleS2SConfig(){if(this.hb_config.s2sProvider==="assertive-yield"){(function(){window.assertive={entityId:"iA6DnRMwWAYDNvCLK",analytics:{logUnfilled:!0,override:{adid:"hb_adid",pbjs:"ocmpbjs"}},hash:{generator:"list",list:["S2S-OFF","S2S-ON"],key:"S2S-OFF",values:2}};var r=document.createElement("script");r.setAttribute("src","https://ia6dnrmwwaydnvclk.ay.delivery/client-v2.js"),r.setAttribute("async",""),document.head.appendChild(r)})();let i={orgId:"ZuBpLk42aCq7qJPoW",entityId:"iA6DnRMwWAYDNvCLK",bidders:this.hb_config.bidders.filter(r=>!!r.s2s).map(r=>r.name),serverOnlyBidders:[],pbjs:"ocmpbjs",continent:this.utils.window.OCM?.geo?.continent||"EU",analytics:!1,aliasRegistry:this.utils.window.ocmpbjs.aliasRegistry,suffix:"_s2s",abPercentage:95,callback:function(r){window.assertiveQueue=window.assertiveQueue||[],window.assertiveQueue.push(function(){assertive.setConfig("analytics.custom.custom_2",r.enabled?"S2S-ON":"S2S-OFF"),assertive.setConfig("hash.key",r.enabled?"S2S-ON":"S2S-OFF"),assertive.updateHash()})}},n=this.utils.window.document.createElement("script");n.src="https://"+i.entityId+".ay.delivery/s2s-client-v1.js",n.onload=function(){ayS2STag.init(i)},this.utils.window.document.head.appendChild(n);return}this.hb_config.s2sProvider!=="magnite"&&this.hb_config.s2sProvider}setupAnalytics(){this.hb_config.analytics.includes("ocmpba")&&this.analytics_adapters.push({provider:"ocmpba"})}filterAdUnitByPageType(e){return this.utils.allowedPageType(e.page_types)?!0:(this.utils.log.info(G,"Removing "+e.code+" due to page type"),!1)}filterAdUnitByDevice(e){if(this.utils.is_mobile){if(e.visibility.hasOwnProperty("mobile")&&!e.visibility.mobile)return this.utils.log.info(G,"Removing "+e.code+" due to hidden in mobile"),!1}else if(e.visibility.hasOwnProperty("desktop")&&!e.visibility.desktop)return this.utils.log.info(G,"Removing "+e.code+" due to hidden in desktop"),!1;return!0}jsonifyAd(e){typeof e.sizes<"u"&&(typeof e.sizes=="string"&&!e.sizes.ocmStartsWith("[[")&&(e.sizes="["+e.sizes+"]"),this.utils.hasJsonStructure(e.sizes)&&(e.sizes=JSON.parse(e.sizes))),e.hasOwnProperty("size_mapping")&&(e.size_mapping=e.size_mapping.map(a=>(typeof a.ad_sizes=="string"&&!a.ad_sizes.ocmStartsWith("[[")&&(a.ad_sizes="["+a.ad_sizes+"]"),this.utils.hasJsonStructure(a.ad_sizes)&&(a.ad_sizes=JSON.parse(a.ad_sizes)),this.utils.hasJsonStructure(a.window_size)&&(a.window_size=JSON.parse(a.window_size)),a)));let i=!1,n=!1,r,s;return e.bids=e.bids.map(a=>{for(let o=0;o<Object.keys(a.params).length;o++){let l=Object.keys(a.params)[o],u=a.params[l];l==="size"&&u!==null&&u.indexOf("[[")<0&&a.bidder!=="ix"&&(u="["+u+"]"),a.bidder==="criteo"&&(i=!0),a.bidder==="smartadserver"&&(n=!0,r=a.params.siteId,s=a.params.pageId),a.bidder==="rubicon"&&e.media_types.length>1&&(a.params.bidonmultiformat=!0),this.utils.hasJsonStructure(u)&&(a.params[l]=JSON.parse(u))}return a}).filter(a=>a!==void 0),(e.media_types.indexOf("video")>-1||e.media_types.indexOf("videoInArticle")>-1)&&(i&&e.bids.push({bidder:"criteo",params:{zoneId:1697471}}),n&&e.bids.push({bidder:"smartadserver",params:{siteId:r,pageId:s,formatId:67950,domain:"//www14.smartadserver.com",video:{protocol:8}}})),e}removeInactiveBidderBids(e){for(let i=0;i<e.bids.length;i++)this.hb_config.bidders.forEach(n=>{e.bids[i]&&e.bids[i].bidder===n.name&&!n.active&&delete e.bids[i]});return e.bids=e.bids.filter(i=>i!==null&&i!=="undefined"),e.bids.length?e:null}removeNullBidParams(e){for(let i of e.bids)for(let n in i.params)i.params[n]===null&&delete i.params[n];return e}hbSizeMap(e){if(typeof e.size_mapping<"u"&&e.size_mapping.length){let i=e.size_mapping;for(let n=i.length-1;n>=0;n--){if(this.utils.screen_width>=i[n].window_size[0]){e.sizes=i[n].ad_sizes;break}if(n-1>=0){if(this.utils.screen_width<i[n].window_size[0]&&this.utils.screen_width>=i[n-1].window_size[0]){e.sizes=i[n-1].ad_sizes;break}}else if(this.utils.screen_width>=i[n].window_size[0]){e.sizes=i[n].ad_sizes;break}}try{e.sizes=e.sizes.filter(n=>n.length),e.sizes.length||(this.utils.log.info(G,"Removing "+e.code+" due to empty size mapping for this window size"),e=null)}catch(n){console.log("typeof adunit.sizes = "+typeof e.sizes,e.sizes,e),this.utils.log.error(G,n,"Error filtering ad unit sizes by screen width"),e=null}}return e}removeBadBidSizes(e){let i=[];return e.bids=e.bids.filter(n=>{if(i=[],typeof n.params.size<"u"){let r=[1,1];if(n.params.size[0]===r&&n.bidder==="sovrn")return!0;if(!Array.isArray(n.params.size[0])&&e.sizes.ocmContainsArray(n.params.size)?i.push(n.params.size):Array.isArray(n.params.size[0])&&(i=n.params.size.filter(s=>n.params.size[0][0]===1&&n.params.size[0][1]===1&&n.bidder==="sovrn"?!0:e.sizes.ocmContainsArray(s))),i.length)n.bidder==="ix"?n.params.size=JSON.parse(JSON.stringify(i[0])):n.params.size=JSON.parse(JSON.stringify(i));else return this.utils.log.info(G,"Removing ",n," due to ad unit sizes"),!1}return!0}),e}geoFilter(e){if(!this.utils.window.OCM.geo)return e;let i=[];for(let n of this.hb_config.bidders){if(!n.geo.length){i.push(n.name);continue}n.geo.length>0&&n.geo.includes(this.utils.window.OCM.geo.country)&&i.push(n.name)}return i.length&&(this.utils.log.info(G,"Keeping ",i," due to country = "+this.utils.window.OCM.geo.country),e.bids=e.bids.filter(n=>i.includes(n.bidder))),e}buildMediaTypes(e){let i={};return typeof e.media_types<"u"?(e.media_types.includes("banner")&&(i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes},i.banner.pos=1),e.media_types.indexOf("native")>-1&&(i.native=e.native,i.native.pos=1),(e.media_types.indexOf("videoInArticle")>-1||e.media_types.indexOf("video")>-1)&&(i.video={},i.video.pos=1,i.video.context="outstream",i.video.playerSize=this.utils.hasJsonStructure(e.video.playerSize)?JSON.parse(e.video.playerSize):e.video.playerSize,i.video.playerSize=this.utils.is_mobile?[[300,169]]:i.video.playerSize,i.video.w=i.video.playerSize[0][0],i.video.h=i.video.playerSize[0][1],i.video.mimes=["video/webm","video/mp4","application/javascript"],i.video.pos=1,i.video.delivery=[2],i.video.minduration=1,i.video.maxduration=30,i.video.protocols=[2,3,5,6,7,8],i.video.api=[1,2],i.video.skip=0,i.video.startdelay=0,i.video.linearity=1,i.video.placement=2,i.video.playbackmethod=[2],i.video.playbackend=1,i.video.renderer={url:"https://cdn.orangeclickmedia.com/tech/libs/dummy-renderer.js",backupOnly:!1,render:n=>{try{let r=this.utils.getAdDivElement(e.code);if(!r){console.error("Could not find element to render outstream ad",n);return}new Eu(this.utils,r,{width:i.video.playerSize[0][0],height:i.video.playerSize[0][1]},n).run()}catch(r){console.error(r),console.error("Error in ad rendering!")}}})):i.banner={sizes:typeof e.sizes=="string"?JSON.parse(e.sizes):e.sizes},e.mediaTypes=i,e}adjustBidderTimeout(e){this.hb_config.bidderTimeout=Number(this.hb_config.bidderTimeout),this.utils.log.info(G,"bidderTimeout = "+this.hb_config.bidderTimeout),this.utils.is_mobile&&(e?this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout*.5:this.hb_config.bidderTimeout+=this.hb_config.bidderTimeout,this.utils.log.info(G,"Mobile device, so bidderTimeout = ",this.hb_config.bidderTimeout))}ocmpbjsInit(){return new Promise((e,i)=>(this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{},this.utils.window.ocmpbjs.que=this.utils.window.ocmpbjs.que||[],e(!0)))}loadPrebidLibrary(){return new Promise((e,i)=>{this.utils.log.info(G,"Loading OCM HB wrapper...");let n=this.utils.window.document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://cdn.orangeclickmedia.com/tech/libs/ocmpb.js",n.onerror=r=>{i("Failed loading OCM HB wrapper script")},n.onload=()=>{e()},this.utils.window.document.head.append(n)})}loadAdformCookie(){(this.hb_config.adsqRTDModuleEnabled||this.utils.window?.ADSQ?.response)&&Su.includes(this.utils.window.OCM.pageType)&&Math.random()<.1&&(navigator.sendBeacon&&navigator.sendBeacon("https://track.adform.net/Serving/TrackPoint/?pm=2776384")||fetch("https://track.adform.net/Serving/TrackPoint/?pm=2776384",{method:"POST",keepalive:!0}))}gptEventListeners(){this.utils.log.info(G,"Setting up GPT events for HB"),this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",e=>{e.slot.getAdUnitPath().includes("inread_pb")&&e.isEmpty&&typeof this.utils.window.OCM.oopb<"u"&&this.utils.window.OCM.oopb()})})}prebidEventListeners(){this.utils.log.debug(G,"Setting up Prebid events for HB"),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("beforeBidderHttp",e=>{["appnexus","adform","pubmatic","rubicon","ix","outbrain"].includes(e.bidderCode)||e.bids.forEach(n=>{try{delete n.mediaTypes.native}catch{this.utils.log.warn(G,`Could not delete native mediaType from bid of bidder ${n.bidderCode} @ ${n.adUnitCode}`)}})})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidWon",e=>{e.mediaType==="native"&&(this.utils.log.info(G,"native bidWon event",e),this.utils.setMaxWidthForNatives(e.adUnitCode))})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderFailed",e=>{e.bid.vastXml&&delete e.bid.vastXml,this.utils.log.error(G,e,"adRenderFailed")})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("auctionDebug",e=>{try{if(e.type!=="ERROR"&&e.type!=="WARNING")return;try{if(JSON.stringify(e.arguments).includes("readyState"))return}catch{}e?.bid?.vastXml&&delete e.bid.vastXml;let i=null;if(e.arguments.length){for(let n=0;n<e.arguments.length;n++)if(e.arguments[n]&&typeof e.arguments[n]=="string"&&e.arguments[n].indexOf("Invalid bid sent to bidder")>-1){let r=e.arguments[n].split(": ");i={message:"Invalid bid sent to bidder",bid:JSON.parse(r[1])};break}!i&&typeof e.arguments=="object"&&(i=Object.keys(e.arguments).map(n=>`${e.arguments[n]}`).join(" "))}if(!i||i!=="")return;e.type==="ERROR"?this.utils.log.error(G,i,"auctionDebug ERROR"):this.utils.log.warn(G,i,"auctionDebug WARNING")}catch(i){this.utils.log.error(G,i,"Error in auctionDebug listener")}})}),this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("bidResponse",e=>{(e&&e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains||[]).some(r=>{let s=this.utils.config.badv&&(this.utils.config.badv.includes(r)||r.includes(".bond")||r.includes("leon")&&r.includes("casino")||r.includes("leon")&&r.includes("bet")||r.includes("leon")&&/\d/.test(r)||r.includes("malinacasino")||r.includes("malina.com")||r.includes("gransino")||r.includes("legiano")||r.includes("vegasino")),a=!1;return e.bidderCode==="appnexus"&&e.meta?.brandId&&(a=[482109,681947,746605,864403,1093786,1143978,1183257,1204106,1217804,1671003,1803547,2174752,48109].includes(e.meta?.brandId)),a||s})&&(this.utils.log.warn(G,"Blocked advertiser",e.meta.advertiserDomains),e.cpm=0,e.ad="")})})}}});var Oi=V((ap,ja)=>{var Te="iab_compliance";ja.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{if(performance.mark("iab_compliance_start"),!this.config.uses_cmp){this.utils.window.OCM.gdprApplies=!1,this.utils.window.OCM.hasGoogleConsent=!0,this.utils.window.OCM.hasPurposeOneConsent=!0,this.setPrivacySettings(!1,!1);try{this.transmuteScripts()}catch(a){this.utils.log.error(Te,"Error transmuting scripts",a)}return e({name:Te})}let n=50,r=1,s=()=>{if(this.utils.log.info(Te,"Waiting for TCF API to be available..."),typeof window.top.__tcfapi>"u"&&typeof window.top.__cmp>"u")if(r++,r>n){this.utils.log.info(Te,"TCF API is not available. Setting ads to personalized..."),window.top.OCM.gdprApplies=!1,window.top.OCM.hasGoogleConsent=!0,window.top.OCM.hasPurposeOneConsent=!0,this.setPrivacySettings(!1,!1);try{this.transmuteScripts()}catch(a){this.utils.log.error(Te,"Error transmuting scripts",a)}return e({name:Te})}else setTimeout(s,100);else if(typeof window.top.__tcfapi<"u")window.top.__tcfapi("addEventListener",2,(a,o)=>{if(o&&!a.eventStatus&&!a.gdprApplies){this.utils.log.info(Te,"GDPR does not apply, run ads normally"),window.top.OCM.gdprApplies=!1,window.top.OCM.hasGoogleConsent=!0,window.top.OCM.hasPurposeOneConsent=!0,this.setPrivacySettings(!1,!1);try{this.transmuteScripts()}catch(l){this.utils.log.error(Te,"Error transmuting scripts",l)}return e({name:Te})}if(o&&(a.eventStatus==="tcloaded"||a.eventStatus==="useractioncomplete")){if(this.utils.log.info(Te,"TCF API is available"),!a.gdprApplies){this.utils.log.info(Te,"GDPR does not apply, run ads normally"),window.top.OCM.gdprApplies=!1,window.top.OCM.hasGoogleConsent=!0,window.top.OCM.hasPurposeOneConsent=!0,this.setPrivacySettings(!1,!1);try{this.transmuteScripts()}catch(b){this.utils.log.error(Te,"Error transmuting scripts",b)}return e({name:Te})}this.utils.window.OCM.gdprApplies=!0;let l=a.purpose.consents[1]===!0||a.purpose.legitimateInterests[1]===!0,u=a.purpose.consents[2]===!0||a.purpose.legitimateInterests[2]===!0,p=a.purpose.consents[3]===!0||a.purpose.legitimateInterests[3]===!0,v=a.purpose.consents[4]===!0||a.purpose.legitimateInterests[4]===!0,h=a.purpose.consents[7]===!0||a.purpose.legitimateInterests[7]===!0,d=a.purpose.consents[9]===!0||a.purpose.legitimateInterests[9]===!0,g=a.purpose.consents[10]===!0||a.purpose.legitimateInterests[10]===!0,f=a.vendor.consents[755]&&a.vendor.legitimateInterests[755],y=!1,m=!0,w=!1;f&&l&&u&&h&&d&&g&&(y=!0),l&&u&&p&&v&&h&&d&&g&&y?m=!1:l&&u&&!p&&!v&&h&&d&&g&&y&&(m=!0),this.utils.window.OCM.hasPurposeOneConsent=l,this.utils.window.OCM.serveNonPersonalized=m,this.utils.window.OCM.restrictDataProcessing=w,this.utils.window.OCM.hasGoogleConsent=y,this.setPrivacySettings(m,w);try{this.transmuteScripts()}catch(b){this.utils.log.error(Te,"Error transmuting scripts",b)}return e({name:Te})}});else if(typeof window.top.__cmp<"u"){this.utils.log.info(Te,"Old CMP api found, run ads normally"),window.top.OCM.hasGoogleConsent=!0;try{this.transmuteScripts()}catch(a){this.utils.log.error(Te,"Error transmuting scripts",a)}return e({name:Te})}else{this.utils.log.info(Te,"No __tcfapi found, nonPersonalizedAds true"),window.top.OCM.hasPurposeOneConsent=!1,window.top.OCM.serveNonPersonalized=!1,window.top.OCM.restrictDataProcessing=!1,window.top.OCM.hasGoogleConsent=!0,this.setPrivacySettings(!1,!1);try{this.transmuteScripts()}catch(a){this.utils.log.error(Te,"Error transmuting scripts",a)}return e({name:Te})}};s()})}setPrivacySettings(e,i){this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().setPrivacySettings({nonPersonalizedAds:e,restrictDataProcessing:i})})}transmuteScripts(){let e,i,n,r=this.config.use_window_top?window.top:window,s=window.top.document.querySelectorAll("script[data-cmp-src]");if(s.length)for(let o of s){for(e=document.createElement("script"),i=Array.prototype.slice.call(o.attributes);n=i.pop();)n.nodeName==="data-cmp-src"?e.setAttribute("src",n.nodeValue):e.setAttribute(n.nodeName,n.nodeValue);o.parentNode.insertBefore(e,o),o.remove()}let a=window.top.document.querySelectorAll("script[data-cmp-script]");if(a.length)for(let o of a){for(e=document.createElement("script"),i=Array.prototype.slice.call(o.attributes);n=i.pop();)n.nodeName==="data-cmp-script"?e.setAttribute("type","text/javascript"):n.nodeName!=="type"&&e.setAttribute(n.nodeName,n.nodeValue);e.text=o.text,o.parentNode.insertBefore(e,o),o.remove()}}}});var qn=V((lp,La)=>{var ce="in_image";La.exports=class{constructor(e,i){this.utils=e,this.config=i,this.inImageConfig=this.config.services.in_image,this.observers=[]}run(){return new Promise((e,i)=>{performance.mark("in_image_start"),this.utils.log.info(ce,"Running...");let n=this.inImageConfig.fc?Number(this.inImageConfig.fc/100):0,r=Math.random();this.utils.log.info(ce,"Math.random: "+r+" Frequency/100: "+n);let s=[];if(!this.inImageConfig.fc||r<=n){this.utils.log.info(ce,"In at frequency condition and inImageConfig.fc is:",this.inImageConfig.fc),this.utils.log.info(ce,"Is mobile =>",this.utils.is_mobile);for(let a of this.inImageConfig.tags)a.active&&(this.utils.log.info(ce,"Tag =>",a),s.push(this.showAdInImage(a)))}return Promise.all(s).then(()=>e({name:ce})).catch(a=>i({name:ce,message:a}))})}showAdInImage(e){return new Promise((i,n)=>{let r=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).length,s=[];if(!r)return i();r<=5?(s=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((l,u)=>{if(u%2===0)return l}),this.utils.log.info(ce,"This site has ",r," images"," and is <= 5, so ads showing at every second img")):r>5&&(s=Array.from(this.utils.window.document.querySelectorAll(`${e.selector}`)).filter((l,u)=>{if(u%3===0)return l}),this.utils.log.info(ce,"This site has ",r," images"," and is > 5, so ads showing at every third img"));let a=s.length;this.utils.log.info(ce,"This site has total",r," images:",s);let o=(l,u)=>{this.utils.log.info(ce,"Start check images src");let p=s.filter(h=>h.currentSrc.indexOf("lazy_placeholder.gif")===-1||h.getAttribute("height")!==null&&h.getAttribute("width")!==null),v=[];if(this.utils.log.info(ce,"This site has",l+" images - images with filter = "+p.length),l===p.length)this.utils.log.info(ce,"Start - normal image without ll"),this.addInImageAd(p,u);else{this.utils.log.info(ce,"Start - image with ll");let h=setInterval(()=>{if(this.utils.log.info(ce,"Start run Interval"),p=s.filter(d=>d.currentSrc.indexOf("lazy_placeholder.gif")===-1||d.getAttribute("height")!==null&&d.getAttribute("width")!==null),l!==v.length){this.utils.log.info(ce,"Start checking");let d=p,g=0;if(d.length!==0)if(v.length===0)v=d;else for(let f=0;f<d.length;f++)v.find(m=>d[f-g].currentSrc===m.currentSrc)?(this.utils.log.info(ce,"Remove image "+d[f-g].currentSrc),d.splice(f-g,1),g++):(this.utils.log.info(ce,"Done image "+d[f-g].currentSrc),v.push(d[f-g]));d.length>0&&this.addInImageAd(d,u)}else this.utils.log.info(ce,"Stop run Interval"),clearInterval(h)},1e3)}};if(a===0)this.utils.log.info(ce,"Wait Loaded"),this.utils.window.addEventListener("load",function(l){return a=Array.from(l.currentTarget.window.document.querySelectorAll(`${e.selector}`)).length,o(a,e),i()});else return o(a,e),i()})}addInImageAd(e,i){this.utils.log.info(ce,"add InImage Ad, images: "+e," tag:",i);for(let n=0;n<e.length;n++){let r=e[n],s=0,a=0,o=0,l=r.parentElement,u=0;l&&(u=l.getBoundingClientRect().width);let p=r.getBoundingClientRect().height.toString(),v=r.getBoundingClientRect().width.toString();r.hasAttribute("data-lazy-type")&&(this.utils.log.info(ce,"image with attr data-lazy-type ",r),v=r.clientWidth?r.clientWidth.toString():v,u=l.clientWidth?l.clientWidth.toString():u,r.getAttribute("height")&&r.getAttribute("width")&&r.getBoundingClientRect().width===r.getBoundingClientRect().height&&(this.utils.log.info(ce,"this image has height and width"),o=r.getAttribute("height")/r.getAttribute("width"),a=r.clientHeight?r.clientHeight*o:p,p=a.toString())),u>parseInt(v)&&(s=(u-parseInt(v))/2),this.utils.log.info(ce,"imageParent_width = ",u,typeof u),this.utils.log.info(ce,"image_height = ",p,typeof p),this.utils.log.info(ce,"imageParent_width > parseInt(image_width) = ",u>parseInt(v)),this.utils.log.info(ce,"image_width = ",v,typeof v),this.utils.log.info(ce,"new_left = ",s,typeof s),this.utils.log.info(ce,"new_left in css = ",String(s)+"px");let h=this.inImageConfig.available_sizes,d=null,g=!1;h=h.filter(f=>f.isMobile===this.utils.is_mobile).reverse();for(let f of h)if(v>=f.widthImg&&p>=f.heightImg&&f.isActive===!0){this.utils.log.info(ce,`in_image_${n} has the conditions to render ad`,f);try{d=JSON.parse(f.adSizes)[0]}catch{break}g=!0;break}if(g){this.utils.log.info(ce,`For div in_image_${n}, width:`+d[0]+" height:"+d[1]),this.topStyleForButton(d[1],n);let f=d[1]+6,y=document.createElement("div");y.setAttribute("id",`in_image_container_${n}`),y.classList.add("ocm-inImage-container"),y.style=`height:${p}px; width:${v}px; margin: auto;`,r.parentElement.insertBefore(y,r),y.appendChild(r),this.inImageConfig.withoutLeft||(r.style=`position:absolute; left:${String(s)}px; top:0`);let m=`<div id="in_image_${n}" style="height:0;"></div>`,w=document.createElement("div");w.classList.add("ocm-inImage","reveal-top"),y.appendChild(w),w.insertAdjacentHTML("beforeend",m),this.utils.window.googletag=this.utils.window.googletag||{cmd:[]},this.utils.window.googletag.cmd.push(()=>{let b=this.utils.window.googletag.defineSlot(`${i.ad_tag_url}`,[d],`in_image_${n}`).addService(googletag.pubads());this.utils.window.googletag.display(`in_image_${n}`),!this.utils.config.services.lazyload.active&&this.utils.window.OCM.init_ad_server_set&&this.utils.window.googletag.pubads().refresh([b],{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0}),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",async _=>{if(!_.isEmpty&&_.slot.getSlotElementId()===`in_image_${n}`){let D=w.parentElement.getAttribute("id");if(this.utils.browser.isSafari)await this.isInViewportInImage(n,w,s,f);else{let S=document.querySelectorAll(`#in_image_container_${n}`)[0];await this.includeObserverInImage(D,w,s,f),this.observers[D].observe(S)}}})})}}}includeObserverInImage(e,i,n,r){IntersectionObserver.prototype.POLL_INTERVAL=100;let s={root:null,rootMargin:"20px 0px",threshold:.5};this.observers[e]=new IntersectionObserver((a,o)=>{a.forEach(async l=>{e===l.target.id&&(typeof l.isVisible>"u"&&(l.isVisible=!0),l.isIntersecting&&(await this.addEffectAndCloseButton(i,n,r),o.unobserve(l.target)))})},s)}isPhotoInViewport(e){let i,n=!1,r=0,s=document.getElementById(e);if(!s||typeof s>"u")return!1;if(i=s.getBoundingClientRect(),n=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.utils.window.innerHeight||this.utils.window.document.documentElement.clientHeight)&&i.right<=(this.utils.window.innerWidth||this.utils.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(r=(i.height-Math.abs(i.top))/i.height*100,n){if(r>=67)return!0}else if(r>=51)return!0}return!1}isInViewportInImage(e,i,n,r){window.addEventListener("scroll",async()=>{this.isPhotoInViewport(`in_image_container_${e}`)&&await this.addEffectAndCloseButton(i,n,r)})}addEffectAndCloseButton(e,i,n){e.classList.add("menu--animatable"),e.classList.contains("menu--visible")?e.classList.remove("menu--visible"):e.classList.add("menu--visible");let r=this.inImageConfig.bg_color;this.inImageConfig.withoutLeft?e.style=`width:100%;height:${n}px !important;background-color:${r}`:e.style=`left:${String(i)}px; height:${n}px !important;background-color:${r}`;let s=document.createElement("div"),a=document.createElement("button");this.utils.is_mobile?(s.classList.add("close-icon-container-mobile"),a.classList.add("ocm-button-close-mobile")):(s.classList.add("close-icon-container"),a.classList.add("ocm-button-close")),this.utils.is_mobile||(s.addEventListener("mouseenter",()=>{a.classList.add("ocm-button-close-hover")}),s.addEventListener("mouseleave",()=>{a.classList.remove("ocm-button-close-hover")})),s.append(a),e.append(s),a.addEventListener("click",()=>{e.classList.add("ocm-inImage-remove")})}topStyleForButton(e,i){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

          .ocm-button-close-mobile{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 26px !important;
               height: 100% !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

            .ocm-button-close-mobile:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close-mobile:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

          .ocm-inImage-container {
             position:relative; 
             overflow: hidden;
          }

          .ocm-inImage.menu--visible  {
              -webkit-transform: none;
              transform: none;
}

          .ocm-inImage.menu--animatable {
             transition: all 1s ease-out;
}
         .ocm-inImage.menu--animatable > #in_image_`+i+` {
           height: `+e+`px !important; 
           transition: height 1s ease-out;
}
          .ocm-inImage {
             overflow: visible;             position:absolute; 
             padding-top:3px; 
             padding-bottom:3px; 
             bottom:0 !important; 
             height: 0px;
             width:100%; 
             display: flex; 
             align-items: center;
             justify-content: center;
          }

          .ocm-inImage .close-icon-container {
            position: absolute;
            top: -37px;
            height: 20px;
            width: 30px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon-container-mobile {
            position: absolute;
            top: -37px;
            height: 26px;
            width: 26px;
            right: 9px;
            z-index: 10;
          }

          .ocm-inImage .close-icon {
            display: inline-block;
            height: 26px;
            width: 26px;
            cursor: pointer;
            stroke: #fff;
            margin: 3px;
          }

          .ocm-inImage.reveal-top {
            opacity: 1;
          }

          .ocm-inImage.reveal-top.ocm-inImage-remove {
            transition: opacity 0.5s linear;
            opacity: 0;
          }

          .ocm-inImage .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}}});var Un=V((dp,za)=>{var nt="injected_tags";za.exports=class{constructor(e,i,n=null){this.utils=e,this.config=i,this.itConfig=this.config.services.injected_tags,this.parent=n}run(){return new Promise((e,i)=>{performance.mark("injected_tags_start");let n=[];for(let r of this.itConfig.tags){if(!r.active){this.utils.log.info(nt,"Injected tag is not active",r);continue}this.utils.allowedPageType(r.conditions.page_types)?n.push(this.createTag(r)):this.utils.log.warn(nt,"Injected tags blocked by page type ",r)}Promise.all(n).then(()=>e({name:nt})).catch(r=>i({name:nt,message:r}))})}createTag(e){return new Promise((i,n)=>{this.utils.contentLoaded().then(()=>{this.inject(e,i,n)})})}inject(e,i,n){this.utils.log.info(nt,`injecting ${e.path}`);let r=e.div_id+"_"+this.utils.getRandomString(7);if(e&&e.device_category){if(!e.device_category.mobile&&this.utils.is_mobile)return this.utils.log.info(nt,`injected tag: ${e.path} has been disabled on mobile`),i({name:nt});if(!e.device_category.desktop&&!this.utils.is_mobile)return this.utils.log.info(nt,`injected tag: ${e.path} has been disabled on desktop`),i({name:nt})}this.parent&&(e.conditions.selector=this.parent+" "+e.conditions.selector);let s=this.utils.determineInjectionTarget(e.conditions.selector,e.conditions.position,e.conditions.count_gt,e.conditions.word_count,e.conditions.words_gt);if(!s)return this.utils.log.info(nt,"node NOT found, stopping process",s),i({name:nt});this.utils.log.info(nt,"node found: ",s);let a=this.utils.window.document.createElement("div"),o=this.utils.window.document.createElement("div"),l=this.utils.window.document.createElement("script"),u=e.hasOwnProperty("mobile_inread_sticky")&&this.utils.is_mobile?e.mobile_inread_sticky:!1;if(u){a.classList.add("ocm-mis");let p=this.utils.window.document.createElement("div");p.classList.add("ocm-mis-expand");let v=this.utils.window.document.createElement("div");v.classList.add("ocm-mis-wrapper"),o.id=r,o.setAttribute("data-ocm-mis","true"),v.append(o),p.append(v),a.append(p)}else a.id=r;return e.style!==""&&(a.style=e.style),e.classes&&e.classes!==""&&a.setAttribute("class",e.classes),e&&e.size_mapping&&e.size_mapping.code&&e.size_mapping.name?(l.text=`googletag.cmd.push(function() { ${e.size_mapping.code}
                var ${r}_slot = googletag.defineSlot("${e.path}", ${e.sizes}, "${r}").defineSizeMapping(${e.size_mapping.name}).addService(googletag.pubads());
                googletag.display("${r}"); `,!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(l.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${r}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator.toString():"true"} }); }`),l.text+="});"):(l.text=`googletag.cmd.push(() => {
                var ${r}_slot = googletag.defineSlot("${e.path}", ${e.sizes}, "${r}").addService(googletag.pubads());
                googletag.display("${r}"); `,!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(l.text+=`if (window.OCM.init_ad_server_set) { googletag.pubads().refresh([${r}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator.toString():"true"} }); }`),l.text+="});"),e.conditions&&e.conditions.place&&this.utils.injectTag(s,a,e.conditions.place)&&(u?(o.append(l),this.utils.clipHiddenOverflows(a)):a.append(l)),i({name:nt})}}});var Kn=V((hp,Ha)=>{var qe="lazyload",_u=Di();Ha.exports=class{constructor(e,i){this.utils=e,this.config=i,this.ll_config=i.services.lazyload,this.include_offset=this.ll_config.include_offset,this.load_offset=this.ll_config.load_offset,this.offset_custom_observers=this.ll_config.load_offset,this.connection=navigator.connection||navigator.mozConnection||navigator.webkitConnection,this.hb=null,this.config.services.header_bidding.active&&this.utils.allowedPageType(this.config.services.header_bidding.page_types)&&(this.hb=new _u(e,i))}run(){return new Promise(async e=>{performance.mark("lazyload_start"),this.utils.log.info(qe,"Running..."),this.hb&&await this.hb.run(!0).then(async()=>{this.utils.updateState("header_bidding",!0),this.utils.window.ocmpbjs.adUnits.length||this.utils.log.warn(qe,"ocmpbjs.adUnits was not found.")}).catch(n=>{this.utils.log.error(qe,n,"Error running header bidding")});let i=this.calculateDetectionPixels(this.ll_config.include_offset,this.ll_config.load_offset);return this.ll_config.include_offset=i.include_offset,this.ll_config.load_offset=i.load_offset,await this.setupObservers(),await this.utils.gptApiReady(),this.detectAndObserveAdDivs(),e({name:qe})})}detectAndObserveAdDivs(){this.utils.log.info(qe,"Detecting slots");let e=()=>{let i=this.utils.window.googletag.pubads().getSlots().map(n=>{let r=this.utils.window.document.querySelector('[id="'+n.getSlotElementId()+'"]:not([id*="_rw_ad"]):not([data-oau-code]):not([data-lazyloaded-by-ocm]):not([data-lazyincluded-by-ocm])');return r?(r.setAttribute("data-oau-code",n.getAdUnitPath()),r):null}).filter(n=>n!=null);if(i.length)for(let n=0;n<i.length;n++)this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length&&this.ll_config.ad_load_offsets.filter(r=>r.path===i[n].getAttribute("data-oau-code")&&r.offset===-1).length?(this.utils.log.info(qe,"ll excluded element, combust instantly",i[n]),i[n].setAttribute("data-lazyincluded-by-ocm",""),this.combust([i[n]])):i[n].hasAttribute("data-lazyincluded-by-ocm")||this.include_observer.observe(i[n]);setTimeout(e,500)};e()}setupObservers(){return new Promise(e=>{this.custom_observers=[];let i={root:null,rootMargin:this.include_offset&&this.include_offset!==-1?String(this.include_offset)+"px 0px":"0px 0px"},n={root:null,rootMargin:this.load_offset&&this.load_offset!==-1?String(this.load_offset)+"px 0px":"0px 0px"};if(IntersectionObserver.prototype.POLL_INTERVAL=100,this.ll_config.hasOwnProperty("ad_load_offsets")&&this.ll_config.ad_load_offsets.length)for(let r of this.ll_config.ad_load_offsets){let s=this.calculateDetectionPixels(this.ll_config.include_offset,r.offset).load_offset,a=[];if(!r.path||r.path==="")continue;let o={root:null,rootMargin:s&&s!=-1?String(s)+"px 0px":"0px 0px"};this.utils.log.info(qe,"Custom observer config: ",o),this.custom_observers[r.path]=new IntersectionObserver((l,u)=>{let p=!1;l.forEach(v=>{typeof v.isVisible>"u"&&(v.isVisible=!0),v.isIntersecting&&(this.utils.log.info("intersecting",v.target.getAttribute("data-oau-code"),v.target.hasAttribute("data-lazyincluded-by-ocm")),u.unobserve(v.target),a.push(v.target),p=!0)}),p&&this.combust(a)},o)}return this.load_observer=new IntersectionObserver((r,s)=>{let a=!1,o=[];r.forEach(l=>{typeof l.isVisible>"u"&&(l.isVisible=!0),l.isIntersecting&&(s.unobserve(l.target),o.push(l.target),a=!0)}),a&&this.combust(o)},n),this.include_observer=new IntersectionObserver((r,s)=>{r.forEach(a=>{typeof a.isVisible>"u"&&(a.isVisible=!0),a.isIntersecting&&(a.target.hasAttribute("data-lazyincluded-by-ocm")||(a.target.setAttribute("data-lazyincluded-by-ocm",""),this.load_observer.observe(a.target))),a.target.hasAttribute("data-lazyincluded-by-ocm")&&s.unobserve(a.target)})},i),e({name:qe})})}combust(e){e=e.filter(s=>s),this.utils.log.info(qe,"Combusting..",e),e.length&&e.forEach(s=>{s.removeAttribute("data-lazyincluded-by-ocm"),s.setAttribute("data-lazyloaded-by-ocm","")});let i=e.map(s=>s.getAttribute("data-oau-code"));i=i.filter((s,a,o)=>o.indexOf(s)===a);let n=e.map(s=>s.getAttribute("id")),r=this.utils.window.googletag.pubads().getSlots().filter(s=>n.includes(s.getSlotElementId())?!0:null);if(!r.length){this.utils.log.warn(qe,"No lazyincluded-by-com ad units found. Aborting ad calls.");return}if(this.utils.log.info(qe,"includedAdUnits",i),this.hb&&this.config.services.header_bidding.bidderTimeout>1){let s=this.findAdUnitsInHb(i);s.length?(this.utils.log.info(qe,"Found ad unit configuration in HB, running hbRefresh"),this.hbRefresh(s,r)):(this.utils.log.info(qe,"No ad unit configuration found in HB, running gptRefresh"),this.gptRefresh(r))}else this.utils.log.info(qe,"gptRefresh"),this.gptRefresh(r)}findAdUnitsInHb(e){let i=[];return i=this.utils.window.ocmpbjs.adUnits.map(n=>{if(e.indexOf(n.code)>-1)return n}).filter(n=>n!==void 0),i}hbRefresh(e,i){this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{},this.utils.window.ocmpbjs.que=this.utils.window.ocmpbjs.que||[],this.utils.window.ocmpbjs.que.push(()=>{try{this.utils.window.ocmpbjs.requestBids({adUnitCodes:e.map(n=>n.code),bidsBackHandler:(n,r,s)=>{this.hb.initAdServer(i,!0)},timeout:this.hb.bidderTimeout})}catch(n){this.utils.log.error(qe,n,"Error refreshing ad slots")}})}gptRefresh(e){this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().refresh(e,{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})})}calculateDetectionPixels(e,i){if(i===-1)return{include_offset:e,load_offset:i};if(this.utils.is_mobile&&(e=e*1.7,i=i*1.7),typeof this.connection<"u"&&typeof this.connection.effectiveType<"u")switch(this.connection.effectiveType){case"2g":e=Math.round(e*5),i=Math.round(i*5);break;case"3g":e=Math.round(e*1.38),i=Math.round(i*1.38);break;default:break}return this.utils.log.info(qe,`{include_offset: ${e}, load_offset: ${i}`),{include_offset:e,load_offset:i}}}});var Gn=V((pp,Va)=>{var Ue="mobile_inread_sticky";Va.exports=class{constructor(e,i){this.utils=e,this.config=i,this.misConfig=this.config.services.mobile_inread_sticky}run(){return new Promise((e,i)=>{if(performance.mark("mobile_inread_sticky_start"),this.utils.log.info(Ue,"Running..."),!this.utils.is_mobile)return this.utils.log.info(Ue,"Not a mobile device. Aborting..."),e({name:Ue});this.utils.loadStyle(".ocm-mis-adv{font-size:10px; margin:0 auto 5px 0} .ocm-mis{position:relative !important;text-align:center}  .ocm-mis-expand{height:650px; min-width:300px; max-width:336px; background-color:transparent; margin:0 auto;} .ocm-mis-wrapper{position:sticky !important; top:"+this.misConfig.top+"px !important}"),this.listenGPTEvent(),this.utils.contentLoaded().then(()=>(this.init(),e({name:Ue})))})}init(){this.utils.log.info(Ue,"Looking up configured MIS divs...");for(let e of this.misConfig.pairs){if(!this.utils.allowedPageType(e.page_types)){this.utils.log.info(Ue,"##"+e.selector+"## not allowed in page type");continue}let i=this.utils.window.document.querySelector('[id*="'+e.selector+'"]:not([data-ocm-mis="true"])');if(!i)continue;if(this.utils.log.info(Ue,"Div found ("+e.selector+")"),i.querySelector('div[id^="google_ads_iframe_"] > iframe')){this.utils.log.warn(Ue,"Ad already loaded. Don't mess with it. Aborting DOM manipulation.");continue}this.utils.log.info(Ue,"Transforming to mobile inread sticky ("+e.selector+")");let n=document.createElement("div");n.classList.add("ocm-mis");let r=document.createElement("div");r.classList.add("ocm-mis-expand");let s=document.createElement("div");s.classList.add("ocm-mis-wrapper"),i.parentNode.insertBefore(n,i),n.append(r),r.append(s),s.appendChild(i),i.setAttribute("data-ocm-mis","true"),this.utils.clipHiddenOverflows(n),this.utils.log.info(Ue,"Transformation done ("+e.selector+")")}}listenGPTEvent(){this.utils.window.googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotRenderEnded",e=>{if(e.isEmpty||!this.utils.is_mobile)return;this.utils.log.info(Ue,"I am in mobile device, time to check for position + z-index properties");let i=document.getElementById(e.slot.getSlotElementId());if(this.utils.log.info(Ue,"Found non empty mis slot:",i,i.classList.contains("ocm-mis")),i.classList.contains("ocm-mis"))return;let n=20,r=()=>{this.utils.log.info(Ue,"Looking for position style property in #"+i.id),i.style.getPropertyValue("position")&&n>0?(this.utils.log.info(Ue,"Found position style property in #"+i.id),i.style.removeProperty&&(this.utils.log.info(Ue,"Removing position style property in #"+i.id),i.style.removeProperty("position"))):(this.utils.log.info(Ue,"Did not find position style property in #"+i.id+", retrying"),n>0&&(n--,setTimeout(r,100)))};r()})})}}});var $n=V((mp,qa)=>{var Ye="mwi";qa.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{if(performance.mark("mwi_start"),this.utils.log.info(Ye,"Running..."),!this.config.services.mwi.hasOwnProperty("code"))return this.utils.log.error(Ye,"Ad unit code missing from config"),e({name:Ye});if(!this.utils.allowedPageType(this.config.services.mwi.page_types))return this.utils.log.info(Ye,"Terminating due to page type"),e({name:Ye});if(!this.config.services.mwi.mobile&&this.utils.is_mobile)return this.utils.log.info(Ye,"Terminating due to mobile device"),e({name:Ye});if(!this.config.services.mwi.desktop&&!this.utils.is_mobile)return this.utils.log.info(Ye,"Terminating due to desktop device"),e({name:Ye});this.utils.window.googletag.cmd.push(()=>{let n=googletag.defineOutOfPageSlot(this.config.services.mwi.code,googletag.enums.OutOfPageFormat.INTERSTITIAL);return n?(this.utils.log.info(Ye,"Slot created"),this.utils.loadStyle("ins[data-vignette-loaded] { position:fixed !important; z-index: 2147483647 !important }"),n.addService(googletag.pubads()),n.addService(googletag.pubads()).setConfig({interstitial:{triggers:{unhideWindow:this.config.services.mwi&&this.config.services.mwi.unhideWindow||!1}}}),this.utils.config.services.header_bidding.active||this.utils.config.services.lazyload.active?(this.utils.log.info(Ye,"disableInitialLoad is on, refreshing"),this.utils.gptPubAdsReady().then(()=>{googletag.pubads().refresh([n],{changeCorrelator:this.config.change_correlator!==void 0?this.config.change_correlator:!0})}),e({name:Ye})):e({name:Ye})):e({name:Ye})})})}}});var Wn=V((yp,Ka)=>{var Ua="ocm_chrome_ext";Ka.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("ocm_chrome_ext_start"),this.utils.log.info(Ua,"Populating Extension Data");let n={type:"OCM_CONFIG",data:this.config};return this.utils.window.postMessage(n,"*"),e({name:Ua})})}}});var Jn=V((bp,Ga)=>{var Et="outbrain";Ga.exports=class{constructor(e,i){this.utils=e,this.config=i,this.obConfig=this.utils.is_mobile?this.config.services.outbrain.mobile:this.config.services.outbrain.desktop,this.isInjected=!1}run(){return new Promise(async(e,i)=>(performance.mark("outbrain_start"),this.utils.log.info(Et,"Running..."),this.utils.window.document.querySelector(this.obConfig.conditions.selector)?this.obConfig.lazyload&&this.obConfig.lazyload.enable?this.lazyLoadInject(e,i):this.inject(e,i):(this.utils.log.info(Et,"Could not find defined selector: ",this.obConfig.selector),e({name:Et}))))}inject(e,i){let n=this.utils.determineInjectionTarget(this.obConfig.conditions.selector,this.obConfig.conditions.position,this.obConfig.conditions.count_gt,this.obConfig.conditions.word_count,this.obConfig.conditions.words_gt);if(!n)return this.utils.log.info(Et,"Could not find defined selector: ",this.obConfig.selector),e({name:Et});let r=this.utils.window.document.createElement("div");r.classList.add("OUTBRAIN"),(this.obConfig.include_ob_content_url===void 0||this.obConfig.include_ob_content_url)&&r.setAttribute("data-ob-contentUrl",window.location.href),r.setAttribute("data-widget-id",this.obConfig.widgetId),r.setAttribute("data-ob-installation-key",this.obConfig.installationKey);let s=this.obConfig.styles;s&&s!==""&&r.setAttribute("style",s);let a=this.obConfig.classes.split(" ");a.length&&(r.classList.add("OUTBRAIN"),r.classList.add(a));let o=this.utils.window.document.createElement("script");return o.async="async",o.src="https://widgets.outbrain.com/outbrain.js",this.utils.injectTag(n,r,this.obConfig.conditions.place)&&((this.config.debug||this.obConfig.debug)&&this.utils.log.info(Et,"Injected OUTBRAIN div in "+this.obConfig.conditions.place+" of ",n),this.utils.injectTag(n,o,this.obConfig.conditions.place))?((this.config.debug||this.obConfig.debug)&&this.utils.log.info(Et,"Injected OUTBRAIN script in "+this.obConfig.conditions.place+" of ",n),e({name:Et})):e({name:Et})}lazyLoadInject(e,i){let n=this.obConfig.lazyload.offset&&this.obConfig.lazyload.offset!==""?this.obConfig.lazyload.offset:0;this.utils.lazyLoad(this.obConfig.conditions.selector,{rootMargin:`${n}px 0px`},(r,s)=>{this.isInjected||(this.isInjected=!0,this.inject(e,i))})}}});var Qn=V((Xn,Yn)=>{(function(t,e){typeof Xn=="object"&&typeof Yn<"u"?Yn.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,function(){var i=t.Cookies,n=t.Cookies=e();n.noConflict=function(){return t.Cookies=i,n}}())})(Xn,function(){"use strict";function t(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var o in a)r[o]=a[o]}return r}var e={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function i(r,s){function a(l,u,p){if(!(typeof document>"u")){p=t({},s,p),typeof p.expires=="number"&&(p.expires=new Date(Date.now()+p.expires*864e5)),p.expires&&(p.expires=p.expires.toUTCString()),l=encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var v="";for(var h in p)p[h]&&(v+="; "+h,p[h]!==!0&&(v+="="+p[h].split(";")[0]));return document.cookie=l+"="+r.write(u,l)+v}}function o(l){if(!(typeof document>"u"||arguments.length&&!l)){for(var u=document.cookie?document.cookie.split("; "):[],p={},v=0;v<u.length;v++){var h=u[v].split("="),d=h.slice(1).join("=");try{var g=decodeURIComponent(h[0]);if(p[g]=r.read(d,g),l===g)break}catch{}}return l?p[l]:p}}return Object.create({set:a,get:o,remove:function(l,u){a(l,"",t({},u,{expires:-1}))},withAttributes:function(l){return i(this.converter,t({},this.attributes,l))},withConverter:function(l){return i(t({},this.converter,l),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(r)}})}var n=i(e,{path:"/"});return n})});var ki=V((xp,$a)=>{var Wt="user_engagement";$a.exports=class{constructor(e,i,n){this.utils=e,this.config=i,this.ue_config=this.config.services.user_engagement,this.oid=n,this.oeid=this.utils._oeid,this.sent=!1,this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items"))||[],this.engaged=!1,this.engaged_time=this.getCurrentTime(),this.disengaged_time=this.engaged_time+2e3,this.totalCompletion=0,this.totalEngagedTime=0;let r="";if(this.config.build){let s=this.config.build.split(".");s.length>1&&(this.ocm_build_version=s[1])}this.now=this.getCurrentTime()}run(){return new Promise(async(e,i)=>{performance.mark("user_engagement_start"),await this.sendAndEmptyEvents(),await this.createPvcEvent(),this.initEngagementListener(),this.updateEventListener()})}sendAndEmptyEvents(){return new Promise(async(e,i)=>{let n=[...this.ocm_pvc_items];if(this.utils.window.document.visibilityState==="visible")for(let r=0;r<n.length;r++){let s=n[r],a=JSON.parse(this.utils.window.localStorage.getItem(s))||null;if(a){if(a.tet===0){a.tl+18e5<=this.now&&await this.deletePvcEvent(s);continue}await this.deletePvcEvent(s),await this.sendEventToAPI(a).then(o=>{}).catch(o=>{})}else this.utils.log.warn(Wt,`Could not find ${s} in localStorage`)}return e({name:Wt})})}initEngagementListener(){["touchstart","mousemove","mousedown","scroll","keydown","resize","focus"].forEach(i=>{this.utils.window.addEventListener(i,this.utils.throttle(()=>{this.engaged=!0,this.engaged_time=this.getCurrentTime(),this.engagement_timer&&clearTimeout(this.engagement_timer),this.engagement_timer=setTimeout(()=>{this.engaged=!1,this.disengaged_time=this.getCurrentTime(),this.totalEngagedTime+=this.disengaged_time-this.engaged_time},2e3)},1e3))})}updateEventListener(){let e=()=>{if(this.utils.window.document.visibilityState!=="visible"){setTimeout(e,2e3);return}this.ocm_pvc_items.some(i=>i===`ocm_pvc_${this.oeid}`)||(this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(this.updatePvcEvent("updateEventListener"))),setTimeout(e,2e3)};e()}createPvcEvent(){return new Promise((e,i)=>{let n=this.updatePvcEvent("createPvcEvent");try{this.ocm_pvc_items.push(`ocm_pvc_${this.oeid}`),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.setItem(`ocm_pvc_${this.oeid}`,JSON.stringify(n))}catch(r){this.utils.shouldLogError&&this.utils.log.error(Wt,r,"Error creating PVC event",JSON.stringify(n))}return e({name:Wt})})}updatePvcEvent(e){let i=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=this.getCurrentCompletion();return this.totalEngagedTime+=this.engaged&&e==="updateEventListener"?this.getCurrentTime()-this.engaged_time:0,this.totalCompletion=i,{u:this.utils.window.location.href,o:this.oeid,oi:this.oid,d:this.utils.window.location.hostname.replace("www.",""),tet:Math.ceil(parseInt(this.totalEngagedTime)/1e3),s:n,ts:this.totalCompletion,tm:this.now,tl:this.getCurrentTime(),v:this.ocm_build_version}}deletePvcEvent(e){return new Promise((i,n)=>(this.ocm_pvc_items=JSON.parse(this.utils.window.localStorage.getItem("ocm_pvc_items")).filter(r=>r!==e),this.utils.window.localStorage.setItem("ocm_pvc_items",JSON.stringify(this.ocm_pvc_items)),this.utils.window.localStorage.removeItem(e),i({name:Wt})))}sendEventToAPI(e){return new Promise((i,n)=>{if(!e)return n({name:Wt,message:"Failed to send event to API"});let r={u:e.u,t:e.t,oi:e.oi,tet:parseInt(e.tet),s:e.s||0,ts:e.ts||0,o:e.o,h:e.d,tm:e.tm,v:this.ocm_build_version},s=new URLSearchParams(this.utils.window.location.search),a=Object.fromEntries(s.entries());fetch("https://windrunner.orangeclickmedia.com/pvc",{method:"POST",headers:{"Content-Type":"text/plain",Accept:"*/*"},body:JSON.stringify({events:[r]}),keepAlive:!0}).then(l=>{l.ok?i():n(l.json())}).catch(l=>{n(l)})})}getCurrentCompletion(){let e=this.utils.window.document.documentElement.scrollHeight,i=this.utils.window.scrollY+this.utils.window.innerHeight;return i<=0?0:i>=e?1:i/e}getCurrentTime(){let e=new Date;return e.toLocaleString("el-GR",{timeZone:"Europe/Athens"}),e.getTime()}}});var er=V((_p,Xa)=>{var Jt="reaper",Wa="https://windrunner.orangeclickmedia.com/insert",Ja="//windrunner.orangeclickmedia.com/usync",Zn=Qn();Xa.exports=class{constructor(e,i){this.utils=e,this.config=i,this._oid=null,this.cookie_type=null,this._oeid=this.utils._oeid,this._oeid_time=this.utils._oeid_time,this.reaper_config=i.services.reaper,this.data={},this.device_access=!0,this.ip="",this.utils.window.OCM.site_language=this?.reaper_config?.language||null}run(){return new Promise(async(e,i)=>{performance.mark("reaper_start"),this.config.uses_cmp&&!this.utils.window.OCM.hasPurposeOneConsent&&(this.device_access=!1),this.gptSetTargetingOeid(),this.collect().then(()=>(this.runUserEngagement(this._oid,this._oeid),this.utils.config.services.header_bidding.active||this.send(),this.utils.updateState("is_gordon_with_us",!0),e({name:"reaper"}))).catch(n=>i({name:"reaper",message:n}))})}runUserEngagement(e,i){let n=ki();new n(this.utils,this.config,e).run()}gptSetTargetingOeid(){this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().setTargeting("oeid",[this.utils._oeid])})}collect(){return new Promise((e,i)=>{this.reap().then(n=>(this.data={ip:this.utils.window.OCM?.geo?.ip||"",oid:this._oid||"",oeid:this.utils._oeid||"",oeid_time:this.utils._oeid_time,eids:"",consent:this.utils.window.OCM.hasPurposeOneConsent,cookie_type:this.cookie_type,os:`${this.utils.browser.os.name||""}/${this.utils.browser.os.versionName||""}/${this.utils.browser.os.version||""}`,browser:`${this.utils.browser.browser.name}/${this.utils.browser.browser.version}`||"",platform:this.utils.browser.platform.type||"",pageType:this.utils.window.OCM.pageType,url:`${this.utils.window.location.protocol}//${this.utils.window.location.hostname+this.utils.window.location.pathname}`,language:this.utils.window.navigator.language,hostname:this.utils.window.location.hostname.replace("www.",""),searchParams:this.utils.window.location.search,city:this.utils.window?.OCM?.geo?.city||this.utils.window?.xtbClient?.cookies.city||"",pixelRatio:this.utils.window.devicePixelRatio||null,connection:this.getConnectionSpeed(),referrer:document.referrer,viewportSize:`${document.documentElement.clientWidth}x${document.documentElement.clientHeight}`,windowSize:`${this.utils.window.outerWidth}x${this.utils.window.outerHeight}`,site_language:this?.reaper_config?.language||"-"},this.utils.config.services.header_bidding.active&&(this.utils.reaper_data=this.data),e())).catch(n=>i(n))})}reap(){return new Promise(async(e,i)=>{if(!this.device_access)return this._oid="",this.cookie_type="",e();this._oid=Zn.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,this.thirdPartyCall(n=>n?(this.saveOidInStorage(),e(n)):e(null))})}saveOidInStorage(){try{Zn.set("_oid",this._oid,{expires:400,domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1})}catch(e){this.utils.log.error(Jt,e,"Failed to save _oid in a cookie")}if(this.utils.canUseLocalStorage)try{this.utils.window.localStorage.setItem("_oid",this._oid)}catch(e){this.utils.shouldLogError&&this.utils.log.error(Jt,e,"Failed to save _oid in localStorage")}}deleteOidFromStorage(){try{Zn.remove("_oid",{domain:"."+this.utils.window.location.host.replace("www.",""),path:"/",Secure:!0,HttpOnly:!1})}catch(e){this.utils.log.error(Jt,e,"Failed to delete _oid from cookies")}try{this.utils.window.localStorage.removeItem("_oid")}catch(e){this.utils.log.error(Jt,e,"Failed to delete _oid from localStorage")}}thirdPartyCall(e){let i=new XMLHttpRequest;i.open("GET",Ja),i.setRequestHeader("Content-Type","text/plain"),i.withCredentials=!0,i.send(),i.onloadend=()=>{let n=JSON.parse(i.response);if(n.hasOwnProperty("result")&&n.result)this.cookie_type="third",this._oid=n._oid,e(!0);else if(this._oid)this._oid=n._oid,this.cookie_type="first",e(!0);else{let r=new XMLHttpRequest;r.open("GET",Ja),r.setRequestHeader("Content-Type","text/plain"),r.withCredentials=!0,r.send(),r.onloadend=()=>{let s=JSON.parse(r.response);s.hasOwnProperty("result")&&s.result?this.cookie_type="third":this.cookie_type="first",this._oid=s._oid,e(!0)},r.onerror=()=>{this.deleteOidFromStorage(),e(!1)}}},i.onerror=n=>{n.hasOwnProperty("isTrusted")||this.utils.log.error(Jt,n,`Failed to get _oid from sync endpoint. Cookie type set to ${this.cookie_type}.`),this.deleteOidFromStorage(),e(!1)}}getConnectionSpeed(){let e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e||e.saveData)return null;switch(e.effectiveType){case"4g":return 3;case"3g":return 2;case"2g":case"slow-2g":return 1;default:return null}}send(){this.data.ip=this.data.ip===""?this.utils.window.OCM?.geo?.ip:"";let e=new XMLHttpRequest;e.open("POST",Wa),e.setRequestHeader("Content-Type","text/plain"),e.send(JSON.stringify(this.data)),e.onerror=()=>{this.utils.log.error(Jt,`Failed at sending data to ${Wa}`)}}}});var tr=V((Ip,Ya)=>{var Ne="rewarded_ad";Ya.exports=class{constructor(e,i){this.utils=e,this.config=i,this.now=Date.now(),this.rwd_config=this.utils.is_mobile?this.utils.config.services.rewarded_ad.mobile:this.utils.config.services.rewarded_ad.desktop,this.localStorageKey=this.utils.is_mobile?"ocm_rw_fc_m":"ocm_rw_fc_d"}run(){return new Promise((e,i)=>{if(performance.mark("rewarded_ad_start"),this.utils.log.info(Ne,"Running..."),!this.utils.canUseLocalStorage||this.utils.isIOS)return this.utils.log.warn(Ne,"Local storage is not available or iOS detected, terminating"),e({name:Ne});if(!this.config.services.rewarded_ad.hasOwnProperty("code"))return this.utils.log.error(Ne,"Ad unit code missing from config"),e({name:Ne});if(!this.utils.allowedPageType(this.config.services.rewarded_ad.page_types))return this.utils.log.info(Ne,"Terminating due to page type"),e({name:Ne});if(!this.config.services.rewarded_ad.mobile.active&&this.utils.is_mobile)return this.utils.log.info(Ne,"Terminating due to mobile device"),e({name:Ne});if(!this.config.services.rewarded_ad.desktop.active&&!this.utils.is_mobile)return this.utils.log.info(Ne,"Terminating due to desktop device"),e({name:Ne});this.checkFrequencyCap().then(n=>{if(!n)return this.utils.log.info(Ne,"Terminating due to frequency cap"),e({name:Ne});this.utils.window.googletag.cmd.push(()=>{let r=googletag.defineOutOfPageSlot(this.utils.config.services.rewarded_ad.code,googletag.enums.OutOfPageFormat.REWARDED).addService(googletag.pubads());return googletag.pubads().addEventListener("slotRenderEnded",s=>{!s.isEmpty&&s.slot.getAdUnitPath()===this.utils.config.services.rewarded_ad.code&&this.setFrequencyCap()}),googletag.pubads().addEventListener("rewardedSlotReady",s=>{s.makeRewardedVisible()}),this.utils.gptPubAdsReady().then(()=>{googletag.pubads().refresh([r],{changeCorrelator:this.utils.config.change_correlator!==void 0?this.utils.config.change_correlator:!0})}),e({name:Ne})})})})}checkFrequencyCap(){return new Promise((e,i)=>{let n=!1;if(this.rwd_config.fc===0)return this.utils.log.info(Ne,"Frequency cap is set to 0, will run service"),e(!0);let r=this.getFrequencyCap();return r?(this.utils.log.info(Ne,`localStorage key ${this.localStorageKey} found with value ${r}`),this.now>=r&&(this.utils.log.info(Ne,`localStorage key ${this.localStorageKey} expired, will run service`),n=!0)):(this.utils.log.info(Ne,`localStorage key ${this.localStorageKey} not found`),n=!0,this.setFrequencyCap()),e(n)})}setFrequencyCap(){this.utils.window.localStorage.setItem(this.localStorageKey,String(this.now+this.rwd_config.fc*60*60*1e3))}getFrequencyCap(){return parseInt(this.utils.window.localStorage.getItem(this.localStorageKey))}}});var ir=V((Fp,Qa)=>{var _t="sticky";Qa.exports=class{constructor(e,i){this.utils=e,this.config=i,this.sticky_config=i.services.sticky,this.counter=0,this.skin_slot=null,this.skin_empty=null}run(){return new Promise(async(e,i)=>{performance.mark("sticky_start"),this.utils.log.info(_t,"Running..."),await this.utils.gptApiReady();for(let n of this.sticky_config.ads)if(n.active){if(!this.deviceAllowed(n.conditions)&&n.position!=="fullscreen"){this.utils.log.info(_t,"Ad ("+n.code+") not meant to run in current device");continue}if(!this.utils.allowedPageType(n.conditions.page_types)){this.utils.log.info(_t,"Ad ("+n.code+") not meant to run in current page type");continue}if(this.isExcluded(n.conditions.exclude_urls)){this.utils.log.info(_t,"Ad ("+n.code+"). Inside excluded url. Terminating service.");continue}this.structure(n)}return e({name:_t})})}determineSkinExists(){return new Promise((e,i)=>{let n=[];this.utils.log.info(_t,"Checking if skin ad exists"),this.skin_slot&&e(!0),n=this.utils.window.googletag.pubads().getSlots().filter(r=>r.getSlotElementId().toLowerCase().includes("skin")||r.getAdUnitPath().toLowerCase().includes("skin")?(this.skin_slot=r,!0):!1),e(n.length>0)})}structure(e){switch(this.counter++,this.utils.log.info(_t,"Structuring sticky with code: ",e.code),e.bg_color||(e.bg_color="rgba(27,27,27,.75)"),this.utils.config.services.lazyload.ad_load_offsets.push({path:e.code,offset:-1}),e.position){case"left":this.leftStyles(e),this.side(e);break;case"right":this.rightStyles(e),this.side(e);break;case"top":this.topStyles(e),this.topBottom(e);break;case"bottom":this.bottomStyles(e),this.topBottom(e);break;case"fullscreen":this.fullScreenStyles(e),this.fullScreen(e);break;default:break}}side(e){this.utils.log.info(_t,"Trying to render side sticky with code: ",e.code),this.styleForXButton();let i=!0,n,r,s=this.utils.window.document.querySelectorAll("body *")[0],a=document.createElement("div");a.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(a.style=e.style),e.classes&&e.classes!==""&&a.setAttribute("class",e.classes);let o=document.createElement("div");o.classList.add("ocm-sticky-container");let l=document.createElement("div");l.classList.add("ocm-sticky-content");let u=document.createElement("div");u.id="ocm_sticky_"+this.counter;let p=document.createElement("script");p.text=`googletag.cmd.push(() => {
            try {
        `,e.size_mapping&&e.size_mapping.code&&e.size_mapping.name?p.text+=`${e.size_mapping.code.replace(/g\n/,"")}
                var ${u.id}_slot = googletag.defineSlot("${e.code}", ${e.sizes}, "${u.id}").defineSizeMapping(${e.size_mapping.name}).addService(googletag.pubads())
            `:p.text+=`
                var ${u.id}_slot = googletag.defineSlot("${e.code}", ${e.sizes}, "${u.id}").addService(googletag.pubads())
            `,p.text+=`
                if (${u.id}_slot) {
                    ${u.id}_slot.addService(googletag.pubads())
                    googletag.display("${u.id}")
                    `,!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(p.text+=`
                    if (window.OCM.init_ad_server_set) {
                        googletag.pubads().refresh([${u.id}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator:!0} })
                    }
                `),p.text+=`
                }
            } catch(err) {
                console.error('Error in sticky ad: ', err)
            }
        });`;let v=document.createElement("div");v.classList.add("ocm-close-icon-container");let h=document.createElement("button");h.classList.add("ocm-button-close"),this.utils.is_mobile||(v.addEventListener("mouseenter",()=>{h.classList.add("ocm-button-close-hover")}),v.addEventListener("mouseleave",()=>{h.classList.remove("ocm-button-close-hover")})),v.append(h),l.append(u),o.append(l),u.append(p),a.append(o),s.parentNode.append(a),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",d=>{if(!d.isEmpty&&d.slot.getSlotElementId()===u.id){if(n=d.size[0],r=d.size[1],setTimeout(()=>{o&&o.childNodes&&Array.from(o.childNodes).find(f=>f.className==="ocm-close-icon-container")||o.append(v)},5e3),r===1&&n===1)return;a.style.width=String(n)+"px",e.conditions.retract&&(a.addEventListener("mouseenter",g=>{i||(e.position==="left"?a.style.marginLeft="0px":e.position==="right"&&(a.style.marginRight="0px"),i=!0,g.stopPropagation())}),a.addEventListener("mouseleave",g=>{i&&(setTimeout(()=>{e.position==="left"?a.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(a.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3),g.stopPropagation())}))}}),this.utils.window.googletag.pubads().addEventListener("impressionViewable",d=>{d.slot.getSlotElementId()===u.id&&(this.utils.log.info(_t,"Event after impression viewable ",d," event condition ",d.slot.getSlotElementId()===u.id),o&&o.childNodes&&Array.from(o.childNodes).find(f=>f.className==="ocm-close-icon-container")||o.append(v),h.addEventListener("click",f=>{e.position==="left"?a.style.marginLeft="-"+String(n)+"px":e.position==="right"&&(a.style.marginRight="-"+String(n)+"px"),setTimeout(()=>{a.remove()},500),f.stopPropagation()}),e.conditions.hide_if_skin&&this.determineSkinExists().then(f=>{f&&this.skin_slot&&this.skin_slot.getResponseInformation()&&setTimeout(()=>{e.position==="left"?a.style.marginLeft="-400px":e.position==="right"&&(a.style.marginRight="-400px"),setTimeout(()=>{a.remove()},500)},2e3)}),e.conditions.retract&&n!==1&&r!==1&&setTimeout(function(){e.position==="left"?a.style.marginLeft="-"+String(Math.round(n*.33))+"px":e.position==="right"&&(a.style.marginRight="-"+String(Math.round(n*.33))+"px"),i=!1},1e3))})}topBottom(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=document.createElement("div");n.classList.add("ocm-sticky",e.position),e.style&&e.style!==""&&(n.style=e.style),e.classes&&e.classes!==""&&n.setAttribute("class",e.classes);let r=document.createElement("div");r.id="ocm_sticky_"+this.counter;let s=document.createElement("script");s.text=`googletag.cmd.push(() => {
            try {
        `,e.size_mapping&&e.size_mapping.code&&e.size_mapping.name?s.text+=`${e.size_mapping.code.replace(/g\n/,"")}
                var ${r.id}_slot = googletag.defineSlot("${e.code}", ${e.sizes}, "${r.id}").defineSizeMapping(${e.size_mapping.name}).addService(googletag.pubads())
            `:s.text+=`
                var ${r.id}_slot = googletag.defineSlot("${e.code}", ${e.sizes}, "${r.id}").addService(googletag.pubads())
            `,s.text+=`
                if (${r.id}_slot) {
                    ${r.id}_slot.addService(googletag.pubads())
                    googletag.display("${r.id}")
                    `,!this.config.services.lazyload.active&&this.config.services.header_bidding.active&&(s.text+=`
                    if (window.OCM.init_ad_server_set) {
                        googletag.pubads().refresh([${r.id}_slot], { changeCorrelator: ${this.config.change_correlator!==void 0?this.config.change_correlator:!0} })
                    }
                `),s.text+=`
                }
            } catch(err) {
                console.error('Error in sticky ad: ', err)
            }
        });`;let a=document.createElement("div");a.classList.add("close-icon-container");let o=document.createElement("button");o.classList.add("ocm-button-close"),this.utils.is_mobile||(a.addEventListener("mouseenter",()=>{o.classList.add("ocm-button-close-hover")}),a.addEventListener("mouseleave",()=>{o.classList.remove("ocm-button-close-hover")})),a.append(o),n.append(a),r.append(s),n.append(r),i.parentNode.append(n),this.utils.window.googletag.pubads().addEventListener("slotRenderEnded",l=>{if(!l.isEmpty&&l.slot.getSlotElementId()===r.id){n.classList.add("reveal-"+e.position);let u=l.size[0],p=l.size[1];e.conditions.device==="desktop"&&(u+=6,p+=6,["top","bottom"].includes(e.position)||(n.style.width=String(u)+"px")),setTimeout(()=>{a.addEventListener("click",()=>{n.classList.remove("reveal-"+e.position)})},2e3)}})}fullScreen(e){this.styleForXButton();let i=this.utils.window.document.querySelectorAll("body *")[0],n=this.utils.window.document.querySelector("body"),r=this.utils.window.document.createElement("div");r.classList.add("ocm-sticky","ocm-fs"),e.style&&e.style!==""&&(r.style=e.style),e.classes&&e.classes!==""&&r.setAttribute("class",e.classes);let s=document.createElement("div");s.classList.add("ocm-sticky-container");let a=document.createElement("div");a.classList.add("ocm-sticky-content");let o=this.utils.window.document.createElement("div");o.id="ocm-sticky-fullscreen",o.classList.add("ocm-sticky-ad");let l=document.createElement("div");l.classList.add("ocm-close-icon-container");let u=document.createElement("button");u.classList.add("ocm-button-close"),this.utils.is_mobile||(l.addEventListener("mouseenter",()=>{u.classList.add("ocm-button-close-hover")}),l.addEventListener("mouseleave",()=>{u.classList.remove("ocm-button-close-hover")})),l.append(u),u.addEventListener("click",p=>{setTimeout(()=>{r.classList.remove("active"),n.classList.remove("no-scroll")},500),p.stopPropagation()}),a.append(l),a.append(o),s.append(a),r.append(s),i.parentNode.append(r),this.utils.window.ocmpbjs=this.utils.window.ocmpbjs||{},this.utils.window.ocmpbjs.que=this.utils.window.ocmpbjs.que||[],this.utils.window.ocmpbjs.que.push(()=>{this.utils.window.ocmpbjs.onEvent("adRenderSucceeded",p=>{p.bid.adUnitCode===e.code&&(r.classList.add("active"),n.classList.add("no-scroll"))})})}styleForXButton(){this.utils.loadStyle(`          .ocm-button-close{
               padding: 0 !important;
               border-radius: 4px !important;
               display: block !important;
               position: relative !important;
               width: 30px !important;
               height: 30px !important;
               background: #fff !important;
               color: #4a968e !important;
               border: 1px solid #106e89 !important;
               outline: none !important;
               cursor: pointer !important;
           }

           .ocm-button-close-hover:before{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close-hover:after{
                   width: 100% !important;
                   box-sizing: border-box !important;
                   margin:0 !important;
                   padding:0 !important;
            }

            .ocm-button-close:before{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(-45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }

           .ocm-button-close:after{
               box-sizing: border-box !important;
               content: '' !important;
               border-radius: 13px !important;
               position: absolute !important;
               left: 50% !important;
               top: 50% !important;
               width: 0;
               margin:0 !important;
               padding:0 !important;
               height: 1px !important;
               border-left: 8px solid currentColor !important;
               border-right: 8px solid currentColor !important;
               -webkit-transform: translate3d(-50%,-50%,0) rotate(45deg) !important;
               transition: all .2s cubic-bezier(.25,.46,.45,.94) !important;
           }`)}leftStyles(e){this.utils.loadStyle(`            .ocm-sticky.left {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:calc(50% - 300px);
`}                left:0px;
                -webkit-transition: margin-left 0.5s ease-in-out !important;
                transition: margin-left 0.5s ease-in-out !important;
            }
            .ocm-sticky.left .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 31px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.left .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}rightStyles(e){this.utils.loadStyle(`            .ocm-sticky.right {
                z-index: 2147483641;
                display: block;
                position: fixed;
                ${e?.conditions?.bottom&&e?.conditions?.bottom!==""?"bottom:"+e?.conditions?.bottom+`px;
`:`top:calc(50% - 300px);
`}                right:0px;
                -webkit-transition: margin-right 0.5s ease-in-out !important;
                transition: margin-right 0.5s ease-in-out !important;
            }
            .ocm-sticky.right .ocm-sticky-container {
                z-index: 2147483643;
                background-color: #fff;
                border: 0 solid #afaeae;
                box-sizing: content-box;
                color: #000;
                height: 100%;
                overflow: visible;
                position: absolute;
                text-align: left;
                visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content {
              overflow: hidden;
              visibility: visible;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-sticky-content .ocm-sticky-ad {
              border: 0;
              height:100%;
              visibility: visible;
              width:100%;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container {
              z-index: 2147483645;
              cursor: pointer;
              display: block;
              height: 32px;
              ${e.x_position==="left"?"left: 3px;":"right: 3px;"}
              position: absolute;
              top: -35px;
              width: 32px;
            }
            .ocm-sticky.right .ocm-sticky-container .ocm-close-icon-container .ocm-close-icon .progress {
                opacity: 0;
                stroke-dasharray: 0,120;
                transition: 0.5s cubic-bezier(0.165, 0.775, 0.145, 1.020);
            }`)}topStyles(e){this.utils.loadStyle(`          .ocm-sticky.top {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            top: -1000px;
            left: 0;
            right: 0;
            transition: top .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-top {
            top: 0;
          }

          .ocm-sticky.reveal-top div[data-oau-code] {
            margin: 0 auto;
          }

          .ocm-sticky.top .close-icon-container {
            position: absolute;
            bottom: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.top .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.top .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}bottomStyles(e){this.utils.loadStyle(`          .ocm-sticky.bottom {
            position: fixed;
            background-color:`+e.bg_color+`;
            width: 100%;
            padding: 8px 0;
            z-index: 2147483641;
            bottom: -1000px;
            left: 0px;
            right: 0px;
            transition: bottom .5s ease-in-out !important;
            text-align: center;
          }

          .ocm-sticky.reveal-bottom {
            bottom: 0px;
          }
          .ocm-sticky.reveal-bottom div[data-oau-code] {            margin: 0 auto;          }

          .ocm-sticky.bottom .close-icon-container {
            position: absolute;
            top: -35px;
              ${e.x_position==="left"?"left: 4px;":"right: 4px;"}
            z-index: 10;
          }

          .ocm-sticky.bottom .close-icon {
            display: inline-block;
            height: 32px;
            width: 32px;
            cursor: pointer;
            stroke: #fff;
          }

          .ocm-sticky.bottom .progress {
            opacity: 0;
            stroke-dasharray: 0, 120;
          }`)}fullScreenStyles(e){this.utils.loadStyle(`            .ocm-sticky.ocm-fs {
                z-index: 2147483643;
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.7);
            }

            .ocm-sticky.ocm-fs.active {
                display: block !important;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container {
                z-index: 2147483643;
                display: flex;
                flex-direction: column;
                width: 100%;
                height: 100%;
                justify-content: center;
                align-items: center;
            }

            .ocm-sticky.ocm-fs .ocm-sticky-container .ocm-sticky-content {
                z-index: 2147483643;
                display: flex;
                flex-direction: column;
            }

            .ocm-sticky.ocm-fs .ocm-close-icon-container {
                z-index: 2147483644;
                display: flex;
                flex-direction: row;
                justify-content: flex-end;
            }

            body.no-scroll {
                overflow: hidden!important;
            }
`)}deviceAllowed(e){return this.utils.is_mobile&&e.device==="mobile"||!this.utils.is_mobile&&e.device==="desktop"&&this.utils.screen_width>=e.min_width*this.utils.window.devicePixelRatio}isExcluded(e){return!!(typeof e!==void 0&&e.length&&e.find(i=>this.utils.window.location.href.includes(i)))}}});var ar=V((Tp,sr)=>{var Za=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);Za?(nr=new Uint8Array(16),sr.exports=function(){return Za(nr),nr}):(rr=new Array(16),sr.exports=function(){for(var e=0,i;e<16;e++)e&3||(i=Math.random()*4294967296),rr[e]=i>>>((e&3)<<3)&255;return rr});var nr,rr});var or=V((Pp,to)=>{var eo=[];for(oi=0;oi<256;++oi)eo[oi]=(oi+256).toString(16).substr(1);var oi;function Au(t,e){var i=e||0,n=eo;return[n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],"-",n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]],n[t[i++]]].join("")}to.exports=Au});var ro=V((Rp,no)=>{var Iu=ar(),Cu=or(),io,lr,ur=0,dr=0;function Fu(t,e,i){var n=e&&i||0,r=e||[];t=t||{};var s=t.node||io,a=t.clockseq!==void 0?t.clockseq:lr;if(s==null||a==null){var o=Iu();s==null&&(s=io=[o[0]|1,o[1],o[2],o[3],o[4],o[5]]),a==null&&(a=lr=(o[6]<<8|o[7])&16383)}var l=t.msecs!==void 0?t.msecs:new Date().getTime(),u=t.nsecs!==void 0?t.nsecs:dr+1,p=l-ur+(u-dr)/1e4;if(p<0&&t.clockseq===void 0&&(a=a+1&16383),(p<0||l>ur)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ur=l,dr=u,lr=a,l+=122192928e5;var v=((l&268435455)*1e4+u)%4294967296;r[n++]=v>>>24&255,r[n++]=v>>>16&255,r[n++]=v>>>8&255,r[n++]=v&255;var h=l/4294967296*1e4&268435455;r[n++]=h>>>8&255,r[n++]=h&255,r[n++]=h>>>24&15|16,r[n++]=h>>>16&255,r[n++]=a>>>8|128,r[n++]=a&255;for(var d=0;d<6;++d)r[n+d]=s[d];return e||Cu(r)}no.exports=Fu});var ao=V((Dp,so)=>{var Tu=ar(),Pu=or();function Ru(t,e,i){var n=e&&i||0;typeof t=="string"&&(e=t==="binary"?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||Tu)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e)for(var s=0;s<16;++s)e[n+s]=r[s];return e||Pu(r)}so.exports=Ru});var hr=V((Op,lo)=>{var Du=ro(),oo=ao(),cr=oo;cr.v1=Du;cr.v4=oo;lo.exports=cr});var fr=V((Np,co)=>{var Z="story_teller_v2",Ou="//cdn.orangeclickmedia.com/tech/libs/deckard-cain-v2.js",ku=hr(),uo=Qn();co.exports=class{constructor(e,i){this.stVisitedURLs=[],this.utils=e,this.config=i,this.stConfig=this.config.services.story_teller_v2,this.conditions=this.utils.is_mobile?this.stConfig.mobile.conditions:this.stConfig.desktop.conditions,this.stickyConfig=this.utils.is_mobile?this.stConfig.mobile.sticky:this.stConfig.desktop.sticky,this.vchackConfig=e.is_mobile?this.stConfig.mobile.vchack:this.stConfig.desktop.vchack,this.stickyBottomHeight=0,this.isIntersecting=!1,this.isMounted=!1,this.selector=null,this.now=new Date().getTime(),this.expirationTime=this.now+7*24*60*60*1e3,this.eId=ku.v4(),this.isInjected=!1,this.hasAd=!1,this.ANALYTICS_TIMEOUT=15*60*1e3}run(){return new Promise((e,i)=>(performance.mark("story_teller_v2_start"),this.utils.allowedPageType(this.conditions.page_types)?this.stConfig.lazyload&&this.stConfig.lazyload.enable?this.lazyLoadInject(e,i):this.inject(e,i):(this.utils.log.info(Z,"Page type not allowed, terminating process",this.conditions.page_types),e({name:Z}))))}lazyLoadInject(e,i){let n=this.stConfig.lazyload.offset&&this.stConfig.lazyload.offset!==""?+this.stConfig.lazyload.offset:0,r=this.utils.adjustLazyLoadOffset(n);this.utils.lazyLoad(this.conditions.selector,{rootMargin:`${r}px 0px`},(s,a)=>{this.isInjected||(this.isInjected=!0,this.inject(e,i))})}inject(e,i){performance.mark("story_teller_v2_start"),this.utils.log.info(Z,"Running...");let n=this.createWrapper(),r=this.utils.determineInjectionTarget(this.conditions.selector,this.conditions.position,this.conditions.count_gt,this.conditions.words,this.conditions.words_gt);if(!r)return this.utils.log.info(Z,"selector NOT found, stopping process",r),e({name:Z});if(!n)return this.utils.log.info(Z,"wrapper NOT found, stopping process",n),e({name:Z});this.stConfig.enable_analytics&&(this.utils.log.info(Z,"Analytics are enabled"),this.startTrackAnalytics()),this.getVisitedStories(),this.setWindowGlobals(),this.getStories().then(()=>{this.filterStories(),this.utils.injectTag(r,n,this.conditions.place),this.utils.waitFor("ADSQ.response",()=>(this.utils.window?.ADSQ?.response&&this.utils.log.info(Z,"ADSQ.response",this.utils.window?.ADSQ?.response),this.handleBottomSticky(),this.populateWrapper(n),e({name:Z})),50,()=>((this.stConfig.source==="rss"||(this.stConfig.source==="adsquirrel"&&this.utils.window?.ADSQ?.response)(this.stConfig.source==="adsquirrel"&&this.stConfig.rss_url!==""))&&(this.handleBottomSticky(),this.populateWrapper(n)),e({name:Z})))}).catch(s=>(this.utils.window.OCM.ST.stories=[],i({name:Z,message:s})))}initAnalytics(){if(this.utils.window&&this.utils.window.localStorage)try{let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[];e.push({id:this.eId,o:uo.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}),this.utils.log.info(Z,"Initializing track analytics: ",e),this.utils.canUseLocalStorage&&(this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(e)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId))}catch{let i=[{id:this.eId,o:uo.get("_oid")||this.utils.window.localStorage.getItem("_oid")||null,oe:this.utils._oeid,u:this.utils.window.location.href,nc:[],pc:[],vs:[],ls:[],r:[],m:!0,t:this.now}];this.utils.log.info(Z,"Initializing track analytics: ",i),this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i)),this.utils.window.sessionStorage.setItem("ost_aid",this.eId)}}startTrackAnalytics(){if(this.utils.window&&this.utils.window.localStorage){let e=this.utils.window.localStorage.getItem("ost_analytics")?JSON.parse(this.utils.window.localStorage.getItem("ost_analytics")):[],i=[],n=[];for(let r of e)if(r.t+this.ANALYTICS_TIMEOUT<=this.now){let s=r&&r.nc&&r.nc.length>0,a=r&&r.pc&&r.pc.length>0,o=r&&r.vs&&r.vs.length>0,l=r&&r.r&&r.r.length>0,u=r&&r.ls&&r.ls.length>0;(s||a||o||l||u)&&n.push(r)}else i.push(r);n&&n.length>0?fetch("https://storyteller-events-worker.ocm.workers.dev/st-events",{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify({events:n})}).then(r=>{this.utils.canUseLocalStorage&&this.utils.window.localStorage.setItem("ost_analytics",JSON.stringify(i))}).catch(r=>{this.utils.log.error(Z,r,"Failed to store st events")}).finally(()=>{this.initAnalytics()}):this.initAnalytics()}}getVisitedStories(){let e=this.utils.window.location.protocol+"//"+this.utils.window.location.hostname+this.utils.window.location.pathname,i=this.utils.window.localStorage.getItem("osturls");try{i||(this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})),i=this.utils.window.localStorage.getItem("osturls"));let n=JSON.parse(i);n&&this.now>=n.exp&&this.utils.window.localStorage.removeItem("osturls"),this.stVisitedURLs=n?n.urls:[],this.utils.window.location.href.includes("ref=storyteller")&&!this.stVisitedURLs.includes(e)&&(this.stVisitedURLs.push(e),this.utils.window.localStorage.setItem("osturls",JSON.stringify({urls:this.stVisitedURLs,exp:this.expirationTime})))}catch(n){this.utils.shouldLogError&&this.utils.log.error(Z,n,"Failed to manage visited stories")}}filterStories(){if(this.utils.window&&this.utils.window.localStorage.getItem("osturls")){let e=this.utils.window.OCM.ST.stories.filter(i=>!this.stVisitedURLs.includes(i.url));e.length>4&&(this.utils.window.OCM.ST.stories=JSON.parse(JSON.stringify(e)))}}getStories(){return new Promise((e,i)=>{if(this.stConfig.source==="adsquirrel")this.fetchStoriesFromAdsquirrel().then(()=>e()).catch(()=>{this.utils.log.info(Z,"Failed fetchStoriesFromAdsquirrel, falling back to fetchStoriesFromRss"),this.fetchStoriesFromRss().then(()=>e()).catch(n=>(this.utils.log.error(Z,n,"Failed fetchStoriesFromRss, falling back to cloud video"),i(n)))});else if(this.stConfig.source==="rss")this.fetchStoriesFromRss().then(()=>e()).catch(n=>(this.utils.log.error(Z,n,"Failed fetchStoriesFromRss, falling back to cloud video"),i(n)));else return i({name:Z,message:"Failed to get stories"})})}fetchStoriesFromRss(){return new Promise(async(e,i)=>{if(!this.stConfig.rss_url||this.stConfig.rss_url==="")return this.utils.log.error(Z,"Invalid RSS url"),i("Empty RSS URL in config");this.utils.parseRss(this.stConfig.rss_url).then(n=>(this.utils.window.OCM.ST.stories=[],n.forEach(r=>{this.utils.log.info(Z,"Pushing to stories [",r.title,r.link,r.image,"]"),this.utils.window.OCM.ST.stories.push({url:r.link,title:r.title,img:r?.image})}),e())).catch(n=>i(Z,n,"Failed to fetch stories from RSS"))})}fetchStoriesFromAdsquirrel(){return new Promise((e,i)=>{this.utils.waitFor("ADSQ",()=>{if(this.utils.window.ADSQ.response===null||this.utils.window.ADSQ.response.classified_as===null)return this.utils.log.info(Z,"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"),i({name:Z,message:"this.utils.window.ADSQ.response was null, rejecting fetchStoriesFromAdsquirrel"});let n="hostname="+this.utils.window.location.host+"&",r="classification="+encodeURIComponent(this.utils.window.ADSQ.response.classified_as[0].split("/")[0])+"&",s="";s+=n,s+=r,s=s.substring(0,s.length-1),s=btoa(s),fetch("https://api.adsquirrel.ai/stories?q="+s,{headers:{Accept:"application/json","Content-Type":"text/plain"},method:"GET"}).then(a=>a.json()).then(a=>(this.utils.window.OCM.ST.stories=a?.filter(o=>o.url!==this.utils.window.location.protocol+"//"+this.utils.window.location.host+this.utils.window.location.pathname),typeof this.utils.window.OCM.ST.stories>"u"?(this.utils.log.info(Z,"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"),i({name:Z,message:"this.utils.window.OCM.ST.stories was undefined, rejecting fetchStoriesFromAdsquirrel"})):(this.utils.log.info(Z,"this.utils.window.OCM.ST.stories is gg, resolving fetchStoriesFromAdsquirrel"),e()))).catch(()=>(this.utils.log.info(Z,"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"),i({name:Z,message:"Could not fetch stories from api, rejecting fetchStoriesFromAdsquirrel"})))},100,()=>(this.utils.log.info(Z,"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"),i({name:Z,message:"ADSQ response took too long to respond, rejecting fetchStoriesFromAdsquirrel"})))})}setWindowGlobals(){this.utils.log.info(Z,"Setting window globals"),this.utils.window.OCM.ST={sync_with_aniview:this.stConfig.sync_with_aniview||!1,hasAd:this.hasAd||!1,midRollTime:this.stConfig.midRollTime||5,playerTagId:this.stConfig.playerTagId,publisherId:this.stConfig.publisherId,source:this.stConfig.source,rss_url:this.stConfig.rss_url,debug:this.config.debug||this.stConfig.debug,redirect_target:this.stConfig.redirect_target,branding:this.stConfig.branding,sticky:this.stickyConfig,vchack:this.vchackConfig||!1,sound_hack:typeof this.stConfig.sound_hack<"u"?this.stConfig.sound_hack:!0,device:this.utils.is_mobile?"mobile":"desktop",lg:{i:(...e)=>this.utils.log.info(...e),e:(...e)=>this.utils.log.error(...e),w:(...e)=>this.utils.log.warn(...e)},enable_analytics:this.stConfig.enable_analytics||!1}}updateStorytellerStickyState(e){this.utils.window.postMessage({type:"stickies_sync",service:"story_teller_v2",value:e})}createWrapper(){this.utils.log.info(Z,"Creating wrapper");let e=this.utils.window.document.createElement("div");e.setAttribute("data-id","ocm-st"),this.utils.loadStyle('div[data-id="ocm-st"] { max-width:640px; display:block; margin:0 auto 1rem; position: relative; }');let i=this.utils.is_mobile?this.stConfig.mobile.styles:this.stConfig.desktop.styles,n=this.utils.is_mobile?this.stConfig.mobile.classes:this.stConfig.desktop.classes;return i&&i!==""&&(e.style=i),n&&n!==""&&e.setAttribute("class",n),e}handleBottomSticky(){new MutationObserver((i,n)=>{let r=this.utils.window.document.querySelector(".ocm-sticky.bottom");this.stickyBottomHeight=r&&r.clientHeight+40||0}).observe(this.utils.window.document,{childList:!0,subtree:!0})}handleStickiness(e,i,n){let r=this.stickyConfig&&this.stickyConfig.enable,s=this.vchackConfig,a=this.stickyConfig?.full_width;if(this.isMounted&&(r||s))if(n){let o=i.clientWidth,l=Math.ceil(o*9/16)+70;this.utils.log.info(Z,"Width ",o," and height: ",l),i.style.height=l+"px",e.style.position="relative",e.classList.remove("ocm-st-sticky"),e.style.zIndex="0",e.style.width="100%",e.style.height=l+"px",e.style.bottom="",e.style.top="",e.style.left="",e.style.right=""}else if(e.style.position="fixed",e.classList.add("ocm-st-sticky"),e.style.zIndex="2147483646",a&&i.clientWidth<425){e.style.width="100%";let o=this.utils.is_mobile?i.clientWidth*.4>120?i.clientWidth*.4:120:i.clientWidth*.5;e.style.height=o+"px",this.stickyConfig.position==="bottom_right"||this.stickyConfig.position==="bottom_left"?(e.style.bottom=this.stickyConfig.offsets.bottom+"px",e.style.left="0%"):(this.stickyConfig.position==="top_right"||this.stickyConfig.position==="top_left")&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left="0%")}else{let o=this.utils.is_mobile?i.clientWidth*.4>270?i.clientWidth*.4:270:i.clientWidth*.5,l=Math.ceil(o*9/16)+70;e.style.width=o+"px",e.style.height=l+"px",this.stickyConfig.position==="bottom_right"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="bottom_left"?(e.style.bottom=+this.stickyConfig.offsets.bottom+this.stickyBottomHeight+"px",e.style.left=this.stickyConfig.offsets.left+"px"):this.stickyConfig.position==="top_right"?(e.style.top=this.stickyConfig.offsets.top+"px",e.style.right=this.stickyConfig.offsets.right+"px"):this.stickyConfig.position==="top_left"&&(e.style.top=this.stickyConfig.offsets.top+"px",e.style.left=this.stickyConfig.offsets.left+"px")}}appendIframeContent(e){let i=e.contentDocument||e.contentWindow.document,n=i.createElement("div");n.id="ocm-st";let r=i.createElement("script");r.src=Ou,i.body.insertAdjacentElement("afterbegin",n),i.body.insertAdjacentElement("beforeend",r)}populateWrapper(e){this.utils.log.info(Z,"Populating wrapper for the iframe");let i=e.clientWidth,n=Math.floor(i/1.28);this.utils.log.info(Z,"Populating wrapper for the iframe with width: ",i," and height: ",n);let r=this.utils.window.document.createElement("iframe");if(r.setAttribute("id","ocm-st-frame"),r.setAttribute("FRAMEBORDER",0),r.setAttribute("SCROLLING","no"),r.setAttribute("MARGINHEIGHT",0),r.setAttribute("MARGINWIDTH",0),r.setAttribute("TOPMARGIN",0),r.setAttribute("LEFTMARGIN",0),r.setAttribute("ALLOWTRANSPARENCY","true"),e.style.height=n+"px",r.style.height=n+"px",r.style.width="100%",e.appendChild(r),this.stConfig.branding&&this.stConfig.branding.custom_css&&this.stConfig.branding.custom_css!==""){let a=r.contentWindow.document.createElement("style");a.appendChild(document.createTextNode(this.stConfig.branding.custom_css)),r.contentWindow.document.head.appendChild(a)}navigator.userAgent.toLowerCase().includes("firefox")?r.onload=()=>{this.appendIframeContent(r)}:this.appendIframeContent(r),new IntersectionObserver(a=>{this.isIntersecting=a&&a.length>0&&a[0]?.isIntersecting,r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),this.utils.log.info(Z,"Observer was triggered and we inform the iframe with the following event: ",{channel:"storyteller",event:"isIntersecting",value:this.isIntersecting})},{root:null,threshold:0}).observe(e),this.utils.window.addEventListener("message",a=>{let o=a.data;if(o?.channel==="storyteller"&&o?.event==="hasAd"&&(this.hasAd=o?.value,this.utils.log.info(Z,"Parent received sticky event: ",o),this.utils.window.OCM.ST.hasAd=this.hasAd),o?.channel==="storyteller"&&o?.event==="isSticky"){let l=o?.value;this.handleStickiness(r,e,!l),this.updateStorytellerStickyState(l),this.utils.log.info(Z,"Parent received sticky event: ",o)}o?.channel==="storyteller"&&o?.event==="onMounted"&&(r.contentWindow.postMessage({channel:"storyteller",event:"isIntersecting",value:this.isIntersecting}),this.isMounted=!0,this.utils.log.info(Z,"The player inside the iframe was mounted successfully")),o?.channel==="storyteller"&&o?.event==="restart"&&this.restart()})}restart(){let e=document.querySelector('div[data-id="ocm-st"]');e&&(this.utils.log.info(Z,"Removing the wrapper and restarting storyteller."),e.remove(),this.run())}}});var pr=V((Mp,ho)=>{var Ni="teads_analytics";ho.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{performance.mark("teads_analytics_start"),this.utils.window.teads_analytics=this.utils.window.teads_analytics||{},this.utils.window.teads_analytics.analytics_tag_id=`PUB_${this.config.services.teads_analytics.publisher_id}`,this.utils.window.teads_analytics.share=this.utils.window.teads_analytics.share||function(){(this.utils.window.teads_analytics.shared_data=this.utils.window.teads_analytics.shared_data||[]).push(arguments)};let n=this.utils.window.document.createElement("script");return n.src="https://a.teads.tv/analytics/tag.js",this.utils.doc_head.appendChild(n),this.utils.log.info(Ni,"Loaded"),n.onload=()=>e({name:Ni}),n.onerror=r=>i({name:Ni,message:`Failed to load teads analytics library ${n.src}`}),e({name:Ni})})}}});var Bi=V((Lp,fo)=>{var gr="teads_preview";fo.exports=class{constructor(e,i){this.utils=e,this.config=i}run(){return new Promise((e,i)=>{try{this.utils.waitFor("teads.TAG",()=>{let n=this.utils.getParameterByName("vast_url");if(!n||n==="")return e({name:gr});this.utils.loadStyle(".teads-inread {max-width: 650px!important; margin: 10px auto;} ");let r=112951,s=1,a=!1,o=!1,l="no";this.utils.getParameterByName("view_to_start")==="1"&&(s=122779),this.utils.getParameterByName("smart")==="1"&&(s=122781,a=!0,this.utils.window.DO_BYPASS_DO_FORCE_SMART=!0),this.utils.getParameterByName("slider")==="1"&&(s=122782,o=!0,a=!0);let u="inread";this.utils.window._ttp={},this.utils.window._ttp[r]=[{slider:{allow_corner_position:!0,allow_top_position:!0},pid:s,format:u,parentWindow:!1,slot:{selector:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.selector,minimum:this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]][Object.keys(this.utils.window.teads.TAG[Object.keys(this.utils.window.teads.TAG)[0]])[0]][0].rawSettings.slot.minimum,btf:!1,css:"margin: 0px auto 25px; max-width: 650px !important;"}}],this.utils.window._tta={},this.utils.window._tta[r]=[{type:"VastUrl",content:n,portfolio_item_id:1,settings:{values:{pageId:r,placementId:s,placementFormat:u,threshold:50,adType:"video"},components:{credits:{display:!1,text:"",link:"#"},closeButton:{display:!0}},behaviors:{onlyNative:!1,smartPosition:{corner:a,top:a},slider:{enable:o},videoPause:l}}}];let p=document.createElement("script");return p.src="//a.teads.tv/media/format/v3/teads-format.js",document.head.appendChild(p),e({name:gr})},100)}catch(n){return i({name:gr,message:n})}})}}});var go=V((Up,po)=>{po.exports={log:!0,log_sample_percentage:0,debug:!1,use_window_top:!0,uses_cmp:!0,site_categories:["IAB12-1","IAB12-2"],badv:["umangallinone.com","hotcall.gr","atticuscannabis.com","sports3.gr","orientallambda.com","asiert.com","mensecrets.gr","coronaboyfriend.com","factorcast.com","clear-news.com","maximumtab.com","radar.gr","blankpink.com","turbineblog.com","green-andblacktea.com","czaspomagac.pl","natuzzi.ae.org","chocolatecandytools.com","gardeninvite.com","gr-el.stimeo-patches-2.com","top10kaszinoonline.com","betsson.gr","interflag.gr","casinoin.io","casino.io","betmaster.io","sportradar.com","eu.sportradarserving.com","sportradarserving.com","play.bitcasino.io","pulze.com","fonbet.gr","lifestylepop.com","casinoin.global","alternacom.fr","dating.com","dunk.gr","try.pollfish.com","offers.betsson.gr","nuubu.com","nuubuofficial.com","landing.betshop.gr","shaheralnahari.com","wonderose1.weebly.com","tanea.gr","biotecuae.com","ecomedica-senologia-tomosintesi.it","profitstore.gr","wenglerplan.de","sadovyyfontan.com","winlexiv.com","economico.gr","political.gr","leon79.casino","breast-augmentation-intl-2478136.world","leon17.bet","leon78.casino","protagon.gr","malinacasino.com","malinacasino6.com"],nativeAdTemplate:`<style>
  @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,100;0,300;0,400;0,500;0,700;1,400&display=swap');
</style>
<style>
  body {
    position: relative;
    margin: 0;
  }

  .abgb {
    top: 2px !important;
  }

  .cbb {
    right: 3px !important;
    top: 3px !important;
  }

  .ocm-pbn-container {
    position: relative;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    background-color: #fff;
  }

  .ocm-pbn {
    font-family: Roboto, Arial, sans-serif;
    display: flex;
    flex-direction: row;
    padding: 5px;
  }

  .ocm-pbn-content {
    display: flex;
    flex-direction: row;
  }

  .ocm-pbn-info {
    display: flex;
    flex-direction: column;
  }

  .ocm-pbn .brand {
    display: none;
    max-width: fit-content;
    padding: 8px 8px 0px;
  }

  .ocm-pbn .sponsored-by {
    display: flex;
    color: #a8a8a8;
    align-items: center;
    font-size: 0.7rem;
    text-decoration: none;
    padding: 0 8px 8px;
  }

  .ocm-pbn .sponsored-by a {
    font-size: 0.7rem;
    font-weight: 500;
    color: #ababab;
  }

  .ocm-pbn .sponsored-by a:has(span:empty) {
    display: none;
  }
  
  .ocm-pbn a {
    color: #3b3b3b;
    font-weight: 600;
    font-size: 0.85rem;
    text-decoration: none;
  }

  .ocm-pbn .brand a {
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }

  .ocm-pbn .brand a img {
    margin-right: 5px;
    max-width: 20px;
  }

  .ocm-pbn .image {
    color: #666;
    align-items: center;
    justify-content: center;
    font-size: 0.85rem;
    text-decoration: none;
    padding: 8px 8px 4px;
  }

  .ocm-pbn .image img {
    max-width: 100%;
    width: 100%;
  }

  .ocm-pbn .title {
    color: #666;
    align-items: center;
    justify-content: flex-start;
    font-size: 0.85rem;
    font-weight: 650;
    text-decoration: none;
    padding: 0 8px 8px;
  }

  .ocm-pbn .title:has(span:empty) {
    display: none;
  }

  .ocm-pbn .description, .ocm-pbn .description2 {
    color: #a8a8a8;
    align-items: center;
    justify-content: center;
    font-size: 0.82rem;
    text-decoration: none;
    padding: 0 8px 8px;
  }
  
  .ocm-pbn .description:has(span:empty) {
    display: none;
  }
  
  .ocm-pbn .description2 {
    font-size: 0.78rem;
  }

  .ocm-pbn .description2:has(span:empty) {
    display: none;
  }

  .ocm-pbn .link {
    color: #9b9b9b;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    text-decoration: none;
    padding: 0 8px 8px;
  }

  .ocm-pbn .link a {
    font-size: 0.8rem;
    font-weight: 500;
    color: #ababab;
  }

  .ocm-pbn .link:has(span:empty) {
    display: none;
  }
  
  .ocm-pbn .cta {
    border-top: 1px solid #ccc;
    padding: 5px 5px 0px 0px;
    margin-top: 2px;
    text-align: right;
  }

  .ocm-pbn .cta:has(span:empty) {
    display: none;
  }

.ocm-pbn-container .privacy-link a img {
   width:12px;
   height:12px;
}

  @media only screen and (max-width: 600px) {
    .ocm-pbn {
      flex-direction: column;
    }
    .ocm-pbn .brand {
      display: flex;
    }

    .ocm-pbn-info {
      flex-direction: column;
    }

    .ocm-pbn .image {
      display: block;
    }
  }
</style>

<div class="ocm-pbn-container">
<div class="privacy-link">
    <a href="##hb_native_privacy##" target="_blank">
        <img src="//cdn.orangeclickmedia.com/assets/images/adchoices.png">
    </a>
</div>
  <div class="ocm-pbn">
    <div class="brand">
      <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
        <img src="##hb_native_asset_id_1##" hb_native_asset_id="1">
        <span class="name" hb_native_asset_id="4">##hb_native_asset_id_4##</span>
      </a>
    </div>
    <div class="image">
      <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
        <img src="##hb_native_asset_id_2##" hb_native_asset_id="2">
      </a>
    </div>
    <div class="ocm-pbn-info">
      <div class="title">
        <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
          <span hb_native_asset_id="3">##hb_native_asset_id_3##</span>
        </a>
      </div>
      <div class="description">
        <span hb_native_asset_id="5">##hb_native_asset_id_5##</span>
      </div>
      <div class="description2">
        <span hb_native_asset_id="10">##hb_native_asset_id_10##</span>
      </div>
      <div class="link">
        <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
          <span hb_native_asset_id="13">##hb_native_asset_id_13##</span>
        </a>
      </div>
      <div class="sponsored-by">
        <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
          <span hb_native_asset_id="4">Sponsored by ##hb_native_asset_id_4##</span>
        </a>
      </div>
    </div>
    <div class="cta">
      <a href="%%CLICK_URL_UNESC%%##hb_native_linkurl##" target="_blank" pbadid="%%PATTERN:hb_adid%%" class="pb-click">
        <span hb_native_asset_id="15">##hb_native_asset_id_15## ></span>
      </a>
    </div>
  </div>
</div>`,dont_touch_flag:!1,waitForContentfulPaint:!0,change_correlator:!1,services:{fou_analytics:{active:!1,debug:!1},cmp:{active:!1,debug:!1,hostname:null,network_id:null},gpt:{active:!1,debug:!1,collapseEmptyDivs:[!1,!1],enableSingleRequest:!1,setCentering:!1,disableInitialLoad:!1},blockthrough:{active:!0,debug:!1},injected_tags:{active:!1,debug:!1,tags:[]},lazyload:{active:!0,debug:!1,page_types:["ROS"],version:2,include_offset:"1000",load_offset:"800",ad_load_offsets:[{path:"/4834629/news247.gr/ros_inline_a",offset:-1}]},adblock:{active:!1,debug:!1,pairs:[]},outbrain:{active:!1,debug:!1,desktop:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",include_ob_content_url:!0,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},lazyload:{enable:!1,offset:800}},mobile:{enable:!0,widgetId:"GS_1",installationKey:"CYOCM2IDF6569I0FK92EEOL10",styles:"margin: 0px auto 60px;",classes:"OUTBRAIN",include_ob_content_url:!0,conditions:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertAfter"},lazyload:{enable:!1,offset:800}}},fizz:{active:!0,debug:!1,page_types:["ROS"],interval:"40000",advertisers_whitelist:[],ads_whitelist:[{path:"/4834629/news247.gr/ros_970x250a"},{path:"/4834629/news247.gr/ROS_300x250a_Sidebar"},{path:"/4834629/news247.gr/section_inline"},{path:"/4834629/news247.gr/ros_inline_a"},{path:"/4834629/news247.gr/ros_article_end"},{path:"/4834629/news247.gr/ros_970x250b"},{path:"/4834629/news247.gr/hp_300x250a"},{path:"/4834629/news247.gr/hp_970x250a"},{path:"/4834629/news247.gr/hp_970x250b"},{path:"/4834629/news247.gr/SundayEdition_article_billboard"},{path:"/4834629/news247.gr/SundayEdition_sidebar_300x250"},{path:"/4834629/news247.gr/SundayEdition_article_inlineA"},{path:"/4834629/news247.gr/SundayEdition_articleEnd"},{path:"/4834629/news247.gr/SundayEdition_Category_970x250a"},{path:"/4834629/news247.gr/SundayEdition_Category_970x250b"},{path:"/4834629/news247.gr/SundayEdition_Category_inline"},{path:"/75351959,4834629/news247.gr/inread_pb"},{path:"/4834629/news247.gr/hp_320x50stuck"},{path:"/4834629/news247.gr/ros_320x50stuck"},{path:"/4834629/news247.gr/hp_300x250b"},{path:"/4834629/news247.gr/hp_300x250c"},{path:"/4834629/news247.gr/hp_300x250d"},{path:"/4834629/news247.gr/hp_300x250e"},{path:"/4834629/news247.gr/hp_300x250f"},{path:"/4834629/news247.gr/hp_300x250g"},{path:"/4834629/news247.gr/ros_inline_b"},{path:"/4834629/news247.gr/SundayEdition_hp_Billboard"},{path:"/4834629/news247.gr/SundayEdition_article_inlineB"}]},header_bidding:{active:!0,debug:!1,page_types:["Home","Magazines","Magazine","Category","Live Blog","Podcast Category","Search","Article","Video Category","Video Article","Newspapers"],adsqRTDModuleEnabled:!0,adelaideEnabled:!1,adServerCurrency:"EUR",bidderTimeout:"1500",custom_granularity:!0,amazon_sid:"21e3d7ee-4312-4deb-8ada-99c25a814bef",domain:null,adUnits:[{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961315",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992377,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/ros_970x250a",sizes:"[[970,250]]",premium:!1,page_types:["Home","Magazines","Magazine"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[970,250]]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961316",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039369"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039369"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762504,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762505,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/ROS_300x250a_Sidebar",sizes:"[[300,250],[300,600]]",premium:!1,page_types:["Magazines","Magazine","Category"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[1350,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961316",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039369"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039369"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762504,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762505,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/ROS_300x250a_Sidebar",sizes:"[[300,250],[300,600]]",premium:!1,page_types:["Live Blog"],visibility:{mobile:!1,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961319",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039371"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039371"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1039371"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1039371"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762508,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/section_inline",sizes:"[[300,250],[336,280],[468,60],[728,90]]",premium:!1,page_types:["Category","Podcast Category","Search"],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90],[468,60]]",window_size:"[768,0]"},{ad_sizes:"[]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961321",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961342",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039372"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039372"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039372"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762509,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762520,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/4834629/news247.gr/ros_inline_a"}',pubId:"5e5558fade26a9e",video:null}}],code:"/4834629/news247.gr/ros_inline_a",sizes:"[[300,250],[336,280],[300,600]]",premium:!1,page_types:["Article"],visibility:{mobile:!0,desktop:!0},media_types:["banner","video"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[1,1],[300,600],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[1,1],[336,280]]",window_size:"[768,0]"}],video:{context:"outstream",playerSize:"[[300,169]]"}},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773162",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961343",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992389,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762500,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/4834629/news247.gr/ros_article_end"}',pubId:"5e5558fade26a9e",video:null}}],code:"/4834629/news247.gr/ros_article_end",sizes:"[[300,250],[336,280],[300,600],[728,90]]",premium:!1,page_types:["Article"],visibility:{mobile:!0,desktop:!0},media_types:["banner","video"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90]]",window_size:"[768,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[1024,0]"}],video:{context:"outstream",playerSize:"[[300,169]]"}},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773157",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"34198806",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992387,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1996479,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/ros_970x250b",sizes:"[[300,250],[336,280],[300,600],[468,60],[728,90],[970,250]]",premium:!1,page_types:["Article"],visibility:{mobile:!0,desktop:!0},media_types:["banner","video"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[336,280],[300,600]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90],[468,60]]",window_size:"[768,0]"},{ad_sizes:"[[970,250],[300,250],[336,280],[728,90]]",window_size:"[1024,0]"}],video:{context:"outstream",playerSize:"[[300,169]]"}},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773146",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1141557"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1141557"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1141557"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:855039,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/hp_300x250a",sizes:"[[300,250],[336,280],[300,600]]",premium:!1,page_types:["Home"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[320,0]"},{ad_sizes:"[]",window_size:"[768,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[1024,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[1350,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773154",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1141558"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1141558"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1141558"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1141558"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1141558"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1141558"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992388,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/hp_970x250a",sizes:"[[1,1],[300,250],[336,280],[300,600],[728,90],[970,250]]",premium:!1,page_types:["Home"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600]]",window_size:"[320,0]"},{ad_sizes:"[[728,90],[300,250],[336,280]]",window_size:"[768,0]"},{ad_sizes:"[[970,250],[728,90]]",window_size:"[1024,0]"},{ad_sizes:"[[970,250],[1,1]]",window_size:"[1350,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773155",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1141559"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1141559"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992382,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/hp_970x250b",sizes:"[[728,90],[970,250]]",premium:!1,page_types:["Home"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[970,250],[728,90]]",window_size:"[1024,0]"},{ad_sizes:"[[970,250]]",window_size:"[1350,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961323",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039373"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039373"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1039373"'}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1039373"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762485,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_article_billboard",sizes:"[[300,250],[336,280],[728,90],[970,250]]",premium:!1,page_types:["Magazine"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90]]",window_size:"[768,0]"},{ad_sizes:"[[970,250]]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961325",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039374"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039374"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762510,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762502,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_sidebar_300x250",sizes:"[[300,250],[300,600]]",premium:!1,page_types:["Magazine"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961327",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[1,1]",siteId:'"1039375"'}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039375"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039375"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039375"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762496,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762512,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_article_inlineA",sizes:"[[1,1],[300,250],[336,280],[300,600]]",premium:!1,page_types:["Magazine"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[1,1],[300,600],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[1,1],[336,280]]",window_size:"[768,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961328",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039376"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039376"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"1039376"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1039376"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762498,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762506,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_articleEnd",sizes:"[[300,250],[336,280],[300,600],[728,90]]",premium:!1,page_types:["Magazine"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[300,600],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90]]",window_size:"[768,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961330",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1039377"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762499,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_Category_970x250a",sizes:"[[970,250]]",premium:!1,page_types:["Magazines"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[970,250]]",window_size:"[1024,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961332",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[970,250]",siteId:'"1039378"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1039378"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762497,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_Category_970x250b",sizes:"[[970,250],[728,90]]",premium:!1,page_types:["Magazines"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[970,250],[728,90]]",window_size:"[1024,0]"},{ad_sizes:"[[970,250]]",window_size:"[1350,0]"}]},{bids:[{bidder:"criteo",params:{video:null,networkId:7203}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"30961334",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"1039379"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"1039379"'}},{bidder:"ix",params:{size:"[468,60]",siteId:'"1039379"'}},{bidder:"ix",params:{size:"[728,90]",siteId:'"1039379"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1762513,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1762589,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],code:"/4834629/news247.gr/SundayEdition_Category_inline",sizes:"[[300,250],[336,280],[468,60],[728,90]]",premium:!1,page_types:["Magazines"],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{ad_sizes:"[]",window_size:"[0,0]"},{ad_sizes:"[[300,250],[336,280]]",window_size:"[320,0]"},{ad_sizes:"[[300,250],[336,280],[728,90],[468,60]]",window_size:"[768,0]"},{ad_sizes:"[]",window_size:"[1024,0]"}]},{bids:[{bidder:"adform",params:{mid:"1762590",mkv:null,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}},{bidder:"adform",params:{mid:"1762591",mkv:null,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/4834629/news247.gr/ros_prestitial",sizes:"[[1,1]]",premium:!1,page_types:[],visibility:{mobile:!1,desktop:!1},media_types:["banner"],size_mapping:[]},{bids:[{bidder:"adform",params:{mid:"1762591",mkv:null,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}},{bidder:"adform",params:{mid:"1762590",mkv:null,rcur:'"EUR"',adxDomain:'"adx.adform.net"',priceType:'"net"'}}],code:"/4834629/news247.gr/hp_prestitial",sizes:"[[1,1]]",premium:!1,page_types:[],visibility:{mobile:!1,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/75351959,4834629/news247.gr/inread_pb",sizes:"[[300,250],[336,280],[300,600]]",page_types:["Article"],premium:!1,hb_only:!1,bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[300,250]",siteId:'"986110"'}},{bidder:"ix",params:{size:"[336,280]",siteId:'"986110"'}},{bidder:"ix",params:{size:"[300,600]",siteId:'"986110"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1697152,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"adform",params:{mid:1697153,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[336,280]]"}]},{code:"/4834629/news247.gr/hp_320x50stuck",sizes:"[[320,50]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773166",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1141560"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1234575,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/4834629/news247.gr/hp_320x50stuck"}',pubId:"5e5558fade26a9e"}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4834629/news247.gr/ros_320x50stuck",sizes:"[[320,50]]",page_types:["Category","Article","Video Category","Video Article","Newspapers","Magazines","Live Blog","Magazine","Search"],premium:!1,hb_only:!1,bids:[{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"appnexus",params:{video:null,reserve:"0.01",position:"unknown",supplyType:"web",placementId:"29773167",arbitraryKey:null,allowSmallerSizes:"true"}},{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"ix",params:{size:"[320,50]",siteId:'"1141561"'}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1234578,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/4834629/news247.gr/ros_320x50stuck"}',pubId:"5e5558fade26a9e"}}],visibility:{mobile:!0,desktop:!1},media_types:["banner"],size_mapping:[]},{code:"/4834629/news247.gr/hp_300x250b",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:855046,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/hp_300x250c",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992381,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/hp_300x250d",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992383,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/hp_300x250e",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:855057,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/hp_300x250f",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:1234576,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/hp_300x250g",sizes:"[[300,250],[336,280],[300,600],[728,90]]",page_types:["Home"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:992384,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[300,600],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[1350,0]",ad_sizes:"[[300,250],[300,600]]"}]},{code:"/4834629/news247.gr/ros_inline_b",sizes:"[[300,250],[336,280],[300,600]]",page_types:["Article"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:2002110,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}},{bidder:"onetag",params:{ext:'{"placement_name": "/4834629/news247.gr/ros_inline_b"}',pubId:"5e5558fade26a9e"}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280],[1,1]]"}]},{code:"/4834629/news247.gr/SundayEdition_hp_Billboard",sizes:"[[300,250],[336,280],[728,90],[970,250]]",page_types:["Magazines"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:2002112,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[336,280]]"},{window_size:"[768,0]",ad_sizes:"[[300,250],[336,280],[728,90]]"},{window_size:"[1024,0]",ad_sizes:"[[970,250]]"}]},{code:"/4834629/news247.gr/SundayEdition_article_inlineB",sizes:"[[300,250],[336,280],[300,600]]",page_types:["Magazine"],premium:!1,hb_only:!1,bids:[{bidder:"smartadserver",params:{buId:null,networkId:"3172",domain:'"//www14.smartadserver.com"',pageId:1147163,siteId:322507,formatId:71381,appName:null,bidfloor:null,currency:null,target:null}},{bidder:"criteo",params:{networkId:7203,video:null}},{bidder:"rubicon",params:{siteId:269194,zoneId:2115926,accountId:20086}},{bidder:"adform",params:{mid:2002111,adxDomain:'"adx.adform.net"',rcur:'"EUR"',priceType:'"net"'}}],visibility:{mobile:!0,desktop:!0},media_types:["banner"],size_mapping:[{window_size:"[0,0]",ad_sizes:"[]"},{window_size:"[320,0]",ad_sizes:"[[300,250],[300,600],[336,280]]"}]}],analytics:["ocmpba"],bidders:[{geo:[],name:"triplelift",active:!1,bid_cpm_adjust:"1.00"},{geo:[],name:"smartadserver",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"ix",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"criteo",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"rubicon",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"appnexus",active:!0,bid_cpm_adjust:"1.00"},{geo:["AU","BR","CA","FR","DE","MX","IT","ES","US","GB"],name:"sharethrough",active:!1,bid_cpm_adjust:"1.00"},{geo:[],name:"adform",active:!0,bid_cpm_adjust:"1.00"},{geo:[],name:"pubmatic",active:!1,bid_cpm_adjust:"1.00"},{name:"amazon",bid_cpm_adjust:"1.00",active:!1,geo:[]},{name:"teads",bid_cpm_adjust:"1.00",active:!1,geo:[]},{name:"sovrn",bid_cpm_adjust:"1.00",active:!1,geo:[],s2s:!1},{name:"onetag",bid_cpm_adjust:"1.00",active:!0,geo:[],s2s:!1}],functionality:"lazyload",rmf_approved:[],s2sProvider:"assertive-yield",s2sTimeout:"500",video_mediatype_in_300:!1},mwi:{active:!1,debug:!1,page_types:["ROS"],code:null,safari:!1,desktop:!1,mobile:!0,unhideWindow:!1},rewarded_ad:{active:!1,debug:!1,page_types:["ROS"],code:null,desktop:{active:!0,fc:1},mobile:{active:!0,fc:1}},mobile_inread_sticky:{active:!1,debug:!1,show_text:!1,top:0,pairs:[]},sticky:{active:!0,debug:!1,ads:[{code:"/4834629/news247.gr/hp_320x50stuck",sizes:"[[320,50]]",active:!0,bg_color:"rgba(255, 255, 255, 0.95)",position:"bottom",conditions:{device:"mobile",retract:!1,min_width:1440,page_types:["Home"],exclude_urls:[],hide_if_skin:!0},x_position:"right"},{code:"/4834629/news247.gr/ros_320x50stuck",sizes:"[[320,50]]",active:!0,bg_color:"rgba(255, 255, 255, 0.95)",position:"bottom",conditions:{device:"mobile",retract:!1,min_width:1440,page_types:["Category","Article","Video Category","Video Article","Newspapers","Magazines","Live Blog","Magazine","Search"],exclude_urls:[],hide_if_skin:!0},x_position:"right"}]},story_teller_v2:{active:!1,debug:!1,midRollTime:20,playerTagId:null,publisherId:"62ed18128bb9d95dbe10e294",source:null,rss_url:null,redirect_target:"_top",enable_analytics:!1,sync_with_aniview:!1,sound_hack:!0,mobile:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}},lazyload:{enable:!1,offset:800},vchack:!1},desktop:{styles:null,classes:null,conditions:{page_types:["Article"],selector:null,count_gt:0,position:0,word_count:0,words_gt:0,place:"insertBefore"},sticky:{enable:!1,on_ad_demand:!1,start_sticky:!1,full_width:!1,position:null,offsets:{top:0,right:0,left:0,bottom:0}},lazyload:{enable:!1,offset:800},vchack:!1},branding:{logo_url:null,title:null,color:"#f59e0b",textColor:"#fff",custom_css:null},language:"el",color:"#f59e0b",textColor:"#fff",video_url:null,captions_url:null,stories_type:null},reaper:{active:!0,debug:!1,timeout:"1500",language:"el"},in_image:{active:!1,debug:!1,fc:100,withoutLeft:!1,tags:[],bg_color:"#ffffff00",available_sizes:[{adSizes:"[[300,50]]",isActive:!1,isMobile:!1,widthImg:500,heightImg:100},{adSizes:"[[300,100]]",isActive:!1,isMobile:!1,widthImg:500,heightImg:300},{adSizes:"[[320,50]]",isActive:!1,isMobile:!1,widthImg:540,heightImg:100},{adSizes:"[[320,100]]",isActive:!1,isMobile:!1,widthImg:540,heightImg:250},{adSizes:"[[468,60]]",isActive:!1,isMobile:!1,widthImg:838,heightImg:180},{adSizes:"[[728,90]]",isActive:!0,isMobile:!1,widthImg:900,heightImg:180},{adSizes:"[[320,50]]",isActive:!0,isMobile:!0,widthImg:320,heightImg:100},{adSizes:"[[468,60]]",isActive:!0,isMobile:!0,widthImg:468,heightImg:100}]},adlightning:{active:!0,debug:!1,site:"news247gr"},teads_analytics:{active:!0,debug:!1,publisher_id:26798},user_engagement:{active:!1,debug:!1,interval:2e3},aniview:{active:!1,debug:!1,sync_with_storyteller:!1,sound_hack:!0,mobile:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!0,vchack_position:"Top-Right",lazyload:{enable:!1,offset:800}},desktop:{playerTagId:null,publisher:"62ed18128bb9d95dbe10e294",rules:{page_types:["Article"],selector:null,position:0,count_gt:0,word_count:0,words_gt:0,place:"insertBefore"},styles:null,classes:null,sticky:{enable:!1,width:256,height:200,position:"bottom_right",offsets:{top:0,right:0,left:0,bottom:0}},vchack:!0,vchack_position:"Top",lazyload:{enable:!1,offset:800}}},advertorials:{active:!1,debug:!1,mobile:{selectors:{title:null,content:null}},desktop:{selectors:{title:null,content:null}}},vi:{active:!1,debug:!1,iab:"IAB1",style:"margin: 10px auto;",mobile:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter"}},desktop:{conditions:{page_types:["ROS"],selector:".blog-post > p",count_gt:6,position:0,word_count:0,words_gt:0,place:"insertAfter"}}},uam:{debug:!1,pubID:"21e3d7ee-4312-4deb-8ada-99c25a814bef",active:!1,adServer:"googletag",bidTimeout:"1500",page_types:["ROS"]},outstream:{debug:!1,active:!1,page_id:null,exclude_urls:[],article_identifier:null}},env:"prod",domain:"news247.gr",script_tag:"news247.gr-v2",build:"2.20241125112941",seller_id:"148o3rcundx7bt02",adops_seller_id:"bc1e9a2af297063e5b1aa15503e2a787",schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:"orangeclickmedia.com",sid:"148o3rcundx7bt02",hp:1}]}}}});function Mu(){if(li instanceof RegExp)return li;try{li=new RegExp(Nu,"i")}catch{li=Bu}return li}function mo(t){return!!t&&Mu().test(t)}var Nu,Bu,li,vo=Lr(()=>{Nu=" daum[ /]| deusu/| yadirectfetcher|(?:^|[^g])news(?!sapphire)|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bots?(?:\\b|_)|(?<!(?:lib))http|(?<![hg]m)score|@[a-z][\\w-]+\\.|\\(\\)|\\.com\\b|\\btime/|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(?:\\.\\d+)?(?:\\.\\d{1,10})*?)?(?:,|$)|^[^ ]{50,}$|^\\d+\\b|^\\w*search\\b|^\\w+/[\\w\\(\\)]*$|^active|^ad muncher|^amaya|^avsdevicesdk/|^biglotron|^bot|^bw/|^clamav[ /]|^client/|^cobweb/|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^getright/|^gozilla/|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^microsoft bits|^movabletype|^mozilla/5\\.0\\s[a-z\\.-]+$|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^offline|^owler|^php|^postman|^python|^rank|^read|^reed|^rest|^rss|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^track|^valid|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^wordpress|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adscanner/|analyzer|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check\\b|checker|chrome-lighthouse|chromeframe|classifier|cloudflare|convertify|crawl|cypress/|dareboost|datanyze|dejaclick|detect|dmbrowser|download|evc-batch/|exaleadcloudview|feed|firephp|functionize|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|infrawatch|insight|inspect|iplabel|ips-agent|java(?!;)|jsjcw_scanner|library|linkcheck|mail\\.ru/|manager|measure|neustar wpm|node|nutch|offbyone|optimize|pageburst|pagespeed|parser|perl|phantomjs|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reputation|resolver|retriever|rexx;|rigor|rss\\b|scanner\\.|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|supercleaner|synapse|synthetic|tools|torrent|trace|transcoder|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|zgrab",Bu=/bot|crawl|http|lighthouse|scan|search|spider/i});var yo=V((Gp,Mi)=>{"use strict";Mi.exports=mr;Mi.exports.isMobile=mr;Mi.exports.default=mr;var ju=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,Lu=/android|ipad|playbook|silk/i;function mr(t){t||(t={});let e=t.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;let i=ju.test(e)||!!t.tablet&&Lu.test(e);return!i&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(i=!0),i}});var Uo=V(z=>{var ui={};ui.userAgent=!1;var Xt={};var q=q||function(t,e){var i={},n=i.lib={},r=n.Base=function(){function d(){}return{extend:function(g){d.prototype=this;var f=new d;return g&&f.mixIn(g),f.hasOwnProperty("init")||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var g=this.extend();return g.init.apply(g,arguments),g},init:function(){},mixIn:function(g){for(var f in g)g.hasOwnProperty(f)&&(this[f]=g[f]);g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=n.WordArray=r.extend({init:function(d,g){d=this.words=d||[],g!=e?this.sigBytes=g:this.sigBytes=d.length*4},toString:function(d){return(d||o).stringify(this)},concat:function(d){var g=this.words,f=d.words,y=this.sigBytes,m=d.sigBytes;if(this.clamp(),y%4)for(var w=0;w<m;w++){var b=f[w>>>2]>>>24-w%4*8&255;g[y+w>>>2]|=b<<24-(y+w)%4*8}else for(var w=0;w<m;w+=4)g[y+w>>>2]=f[w>>>2];return this.sigBytes+=m,this},clamp:function(){var d=this.words,g=this.sigBytes;d[g>>>2]&=4294967295<<32-g%4*8,d.length=t.ceil(g/4)},clone:function(){var d=r.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var g=[],f=0;f<d;f+=4)g.push(t.random()*4294967296|0);return new s.init(g,d)}}),a=i.enc={},o=a.Hex={stringify:function(d){for(var g=d.words,f=d.sigBytes,y=[],m=0;m<f;m++){var w=g[m>>>2]>>>24-m%4*8&255;y.push((w>>>4).toString(16)),y.push((w&15).toString(16))}return y.join("")},parse:function(d){for(var g=d.length,f=[],y=0;y<g;y+=2)f[y>>>3]|=parseInt(d.substr(y,2),16)<<24-y%8*4;return new s.init(f,g/2)}},l=a.Latin1={stringify:function(d){for(var g=d.words,f=d.sigBytes,y=[],m=0;m<f;m++){var w=g[m>>>2]>>>24-m%4*8&255;y.push(String.fromCharCode(w))}return y.join("")},parse:function(d){for(var g=d.length,f=[],y=0;y<g;y++)f[y>>>2]|=(d.charCodeAt(y)&255)<<24-y%4*8;return new s.init(f,g)}},u=a.Utf8={stringify:function(d){try{return decodeURIComponent(escape(l.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return l.parse(unescape(encodeURIComponent(d)))}},p=n.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=u.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var g=this._data,f=g.words,y=g.sigBytes,m=this.blockSize,w=m*4,b=y/w;d?b=t.ceil(b):b=t.max((b|0)-this._minBufferSize,0);var _=b*m,I=t.min(_*4,y);if(_){for(var D=0;D<_;D+=m)this._doProcessBlock(f,D);var S=f.splice(0,_);g.sigBytes-=I}return new s.init(S,I)},clone:function(){var d=r.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),v=n.Hasher=p.extend({cfg:r.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var g=this._doFinalize();return g},blockSize:512/32,_createHelper:function(d){return function(g,f){return new d.init(f).finalize(g)}},_createHmacHelper:function(d){return function(g,f){return new h.HMAC.init(d,f).finalize(g)}}}),h=i.algo={};return i}(Math);(function(t){var r=q,e=r.lib,i=e.Base,n=e.WordArray,r=r.x64={};r.Word=i.extend({init:function(s,a){this.high=s,this.low=a}}),r.WordArray=i.extend({init:function(s,a){s=this.words=s||[],this.sigBytes=a!=t?a:8*s.length},toX32:function(){for(var s=this.words,a=s.length,o=[],l=0;l<a;l++){var u=s[l];o.push(u.high),o.push(u.low)}return n.create(o,this.sigBytes)},clone:function(){for(var s=i.clone.call(this),a=s.words=this.words.slice(0),o=a.length,l=0;l<o;l++)a[l]=a[l].clone();return s}})})();q.lib.Cipher||function(t){var d=q,e=d.lib,i=e.Base,n=e.WordArray,r=e.BufferedBlockAlgorithm,s=d.enc.Base64,a=d.algo.EvpKDF,o=e.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(f,y){return this.create(this._ENC_XFORM_MODE,f,y)},createDecryptor:function(f,y){return this.create(this._DEC_XFORM_MODE,f,y)},init:function(f,y,m){this.cfg=this.cfg.extend(m),this._xformMode=f,this._key=y,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(f){return this._append(f),this._process()},finalize:function(f){return f&&this._append(f),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(f){return{encrypt:function(y,m,w){return(typeof m=="string"?g:h).encrypt(f,y,m,w)},decrypt:function(y,m,w){return(typeof m=="string"?g:h).decrypt(f,y,m,w)}}}});e.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var v=d.mode={},l=function(f,y,m){var w=this._iv;w?this._iv=t:w=this._prevBlock;for(var b=0;b<m;b++)f[y+b]^=w[b]},u=(e.BlockCipherMode=i.extend({createEncryptor:function(f,y){return this.Encryptor.create(f,y)},createDecryptor:function(f,y){return this.Decryptor.create(f,y)},init:function(f,y){this._cipher=f,this._iv=y}})).extend();u.Encryptor=u.extend({processBlock:function(f,y){var m=this._cipher,w=m.blockSize;l.call(this,f,y,w),m.encryptBlock(f,y),this._prevBlock=f.slice(y,y+w)}}),u.Decryptor=u.extend({processBlock:function(f,y){var m=this._cipher,w=m.blockSize,b=f.slice(y,y+w);m.decryptBlock(f,y),l.call(this,f,y,w),this._prevBlock=b}}),v=v.CBC=u,u=(d.pad={}).Pkcs7={pad:function(f,y){for(var m=4*y,m=m-f.sigBytes%m,w=m<<24|m<<16|m<<8|m,b=[],_=0;_<m;_+=4)b.push(w);m=n.create(b,m),f.concat(m)},unpad:function(f){f.sigBytes-=f.words[f.sigBytes-1>>>2]&255}},e.BlockCipher=o.extend({cfg:o.cfg.extend({mode:v,padding:u}),reset:function(){o.reset.call(this);var y=this.cfg,f=y.iv,y=y.mode;if(this._xformMode==this._ENC_XFORM_MODE)var m=y.createEncryptor;else m=y.createDecryptor,this._minBufferSize=1;this._mode=m.call(y,this,f&&f.words)},_doProcessBlock:function(f,y){this._mode.processBlock(f,y)},_doFinalize:function(){var f=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){f.pad(this._data,this.blockSize);var y=this._process(!0)}else y=this._process(!0),f.unpad(y);return y},blockSize:4});var p=e.CipherParams=i.extend({init:function(f){this.mixIn(f)},toString:function(f){return(f||this.formatter).stringify(this)}}),v=(d.format={}).OpenSSL={stringify:function(f){var y=f.ciphertext;return f=f.salt,(f?n.create([1398893684,1701076831]).concat(f).concat(y):y).toString(s)},parse:function(f){f=s.parse(f);var y=f.words;if(y[0]==1398893684&&y[1]==1701076831){var m=n.create(y.slice(2,4));y.splice(0,4),f.sigBytes-=16}return p.create({ciphertext:f,salt:m})}},h=e.SerializableCipher=i.extend({cfg:i.extend({format:v}),encrypt:function(f,y,m,w){w=this.cfg.extend(w);var b=f.createEncryptor(m,w);return y=b.finalize(y),b=b.cfg,p.create({ciphertext:y,key:m,iv:b.iv,algorithm:f,mode:b.mode,padding:b.padding,blockSize:f.blockSize,formatter:w.format})},decrypt:function(f,y,m,w){return w=this.cfg.extend(w),y=this._parse(y,w.format),f.createDecryptor(m,w).finalize(y.ciphertext)},_parse:function(f,y){return typeof f=="string"?y.parse(f,this):f}}),d=(d.kdf={}).OpenSSL={execute:function(f,y,m,w){return w||(w=n.random(8)),f=a.create({keySize:y+m}).compute(f,w),m=n.create(f.words.slice(y),4*m),f.sigBytes=4*y,p.create({key:f,iv:m,salt:w})}},g=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:d}),encrypt:function(f,y,m,w){return w=this.cfg.extend(w),m=w.kdf.execute(m,f.keySize,f.ivSize),w.iv=m.iv,f=h.encrypt.call(this,f,y,m.key,w),f.mixIn(m),f},decrypt:function(f,y,m,w){return w=this.cfg.extend(w),y=this._parse(y,w.format),m=w.kdf.execute(m,f.keySize,f.ivSize,y.salt),w.iv=m.iv,h.decrypt.call(this,f,y,m.key,w)}})}();(function(){for(var t=q,e=t.lib.BlockCipher,D=t.algo,i=[],n=[],r=[],s=[],a=[],o=[],l=[],u=[],p=[],v=[],h=[],d=0;256>d;d++)h[d]=128>d?d<<1:d<<1^283;for(var g=0,f=0,d=0;256>d;d++){var y=f^f<<1^f<<2^f<<3^f<<4,y=y>>>8^y&255^99;i[g]=y,n[y]=g;var m=h[g],w=h[m],b=h[w],_=257*h[y]^16843008*y;r[g]=_<<24|_>>>8,s[g]=_<<16|_>>>16,a[g]=_<<8|_>>>24,o[g]=_,_=16843009*b^65537*w^257*m^16843008*g,l[y]=_<<24|_>>>8,u[y]=_<<16|_>>>16,p[y]=_<<8|_>>>24,v[y]=_,g?(g=m^h[h[h[b^m]]],f^=h[h[f]]):g=f=1}var I=[0,1,2,4,8,16,32,64,128,27,54],D=D.AES=e.extend({_doReset:function(){for(var E=this._key,S=E.words,x=E.sigBytes/4,E=4*((this._nRounds=x+6)+1),C=this._keySchedule=[],T=0;T<E;T++)if(T<x)C[T]=S[T];else{var R=C[T-1];T%x?6<x&&T%x==4&&(R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255]):(R=R<<8|R>>>24,R=i[R>>>24]<<24|i[R>>>16&255]<<16|i[R>>>8&255]<<8|i[R&255],R^=I[T/x|0]<<24),C[T]=C[T-x]^R}for(S=this._invKeySchedule=[],x=0;x<E;x++)T=E-x,R=x%4?C[T]:C[T-4],S[x]=4>x||4>=T?R:l[i[R>>>24]]^u[i[R>>>16&255]]^p[i[R>>>8&255]]^v[i[R&255]]},encryptBlock:function(S,x){this._doCryptBlock(S,x,this._keySchedule,r,s,a,o,i)},decryptBlock:function(S,x){var E=S[x+1];S[x+1]=S[x+3],S[x+3]=E,this._doCryptBlock(S,x,this._invKeySchedule,l,u,p,v,n),E=S[x+1],S[x+1]=S[x+3],S[x+3]=E},_doCryptBlock:function(S,x,E,C,T,R,M,F){for(var N=this._nRounds,te=S[x]^E[0],_e=S[x+1]^E[1],pe=S[x+2]^E[2],ee=S[x+3]^E[3],O=4,k=1;k<N;k++)var $=C[te>>>24]^T[_e>>>16&255]^R[pe>>>8&255]^M[ee&255]^E[O++],U=C[_e>>>24]^T[pe>>>16&255]^R[ee>>>8&255]^M[te&255]^E[O++],J=C[pe>>>24]^T[ee>>>16&255]^R[te>>>8&255]^M[_e&255]^E[O++],ee=C[ee>>>24]^T[te>>>16&255]^R[_e>>>8&255]^M[pe&255]^E[O++],te=$,_e=U,pe=J;$=(F[te>>>24]<<24|F[_e>>>16&255]<<16|F[pe>>>8&255]<<8|F[ee&255])^E[O++],U=(F[_e>>>24]<<24|F[pe>>>16&255]<<16|F[ee>>>8&255]<<8|F[te&255])^E[O++],J=(F[pe>>>24]<<24|F[ee>>>16&255]<<16|F[te>>>8&255]<<8|F[_e&255])^E[O++],ee=(F[ee>>>24]<<24|F[te>>>16&255]<<16|F[_e>>>8&255]<<8|F[pe&255])^E[O++],S[x]=$,S[x+1]=U,S[x+2]=J,S[x+3]=ee},keySize:8});t.AES=e._createHelper(D)})();(function(){function t(h,d){var g=(this._lBlock>>>h^this._rBlock)&d;this._rBlock^=g,this._lBlock^=g<<h}function e(h,d){var g=(this._rBlock>>>h^this._lBlock)&d;this._lBlock^=g,this._rBlock^=g<<h}var i=q,r=i.lib,n=r.WordArray,r=r.BlockCipher,s=i.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=s.DES=r.extend({_doReset:function(){for(var h=this._key.words,d=[],g=0;56>g;g++){var f=a[g]-1;d[g]=h[f>>>5]>>>31-f%32&1}for(h=this._subKeys=[],f=0;16>f;f++){for(var y=h[f]=[],m=l[f],g=0;24>g;g++)y[g/6|0]|=d[(o[g]-1+m)%28]<<31-g%6,y[4+(g/6|0)]|=d[28+(o[g+24]-1+m)%28]<<31-g%6;for(y[0]=y[0]<<1|y[0]>>>31,g=1;7>g;g++)y[g]>>>=4*(g-1)+3;y[7]=y[7]<<5|y[7]>>>27}for(d=this._invSubKeys=[],g=0;16>g;g++)d[g]=h[15-g]},encryptBlock:function(h,d){this._doCryptBlock(h,d,this._subKeys)},decryptBlock:function(h,d){this._doCryptBlock(h,d,this._invSubKeys)},_doCryptBlock:function(h,d,g){this._lBlock=h[d],this._rBlock=h[d+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var f=0;16>f;f++){for(var y=g[f],m=this._lBlock,w=this._rBlock,b=0,_=0;8>_;_++)b|=u[_][((w^y[_])&p[_])>>>0];this._lBlock=w,this._rBlock=m^b}g=this._lBlock,this._lBlock=this._rBlock,this._rBlock=g,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),h[d]=this._lBlock,h[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=r._createHelper(v),s=s.TripleDES=r.extend({_doReset:function(){var h=this._key.words;this._des1=v.createEncryptor(n.create(h.slice(0,2))),this._des2=v.createEncryptor(n.create(h.slice(2,4))),this._des3=v.createEncryptor(n.create(h.slice(4,6)))},encryptBlock:function(h,d){this._des1.encryptBlock(h,d),this._des2.decryptBlock(h,d),this._des3.encryptBlock(h,d)},decryptBlock:function(h,d){this._des3.decryptBlock(h,d),this._des2.encryptBlock(h,d),this._des1.decryptBlock(h,d)},keySize:6,ivSize:2,blockSize:2}),i.TripleDES=r._createHelper(s)})();(function(){var t=q,e=t.lib.WordArray;t.enc.Base64={stringify:function(i){var n=i.words,r=i.sigBytes,s=this._map;i.clamp(),i=[];for(var a=0;a<r;a+=3)for(var o=(n[a>>>2]>>>24-8*(a%4)&255)<<16|(n[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|n[a+2>>>2]>>>24-8*((a+2)%4)&255,l=0;4>l&&a+.75*l<r;l++)i.push(s.charAt(o>>>6*(3-l)&63));if(n=s.charAt(64))for(;i.length%4;)i.push(n);return i.join("")},parse:function(i){var n=i.length,r=this._map,s=r.charAt(64);s&&(s=i.indexOf(s),s!=-1&&(n=s));for(var s=[],a=0,o=0;o<n;o++)if(o%4){var l=r.indexOf(i.charAt(o-1))<<2*(o%4),u=r.indexOf(i.charAt(o))>>>6-2*(o%4);s[a>>>2]|=(l|u)<<24-8*(a%4),a++}return e.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(t){function e(v,h,d,g,f,y,m){return v=v+(h&d|~h&g)+f+m,(v<<y|v>>>32-y)+h}function i(v,h,d,g,f,y,m){return v=v+(h&g|d&~g)+f+m,(v<<y|v>>>32-y)+h}function n(v,h,d,g,f,y,m){return v=v+(h^d^g)+f+m,(v<<y|v>>>32-y)+h}function r(v,h,d,g,f,y,m){return v=v+(d^(h|~g))+f+m,(v<<y|v>>>32-y)+h}for(var s=q,l=s.lib,a=l.WordArray,o=l.Hasher,l=s.algo,u=[],p=0;64>p;p++)u[p]=4294967296*t.abs(t.sin(p+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,h){for(var d=0;16>d;d++){var g=h+d,f=v[g];v[g]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360}var d=this._hash.words,g=v[h+0],f=v[h+1],y=v[h+2],m=v[h+3],w=v[h+4],b=v[h+5],_=v[h+6],I=v[h+7],D=v[h+8],S=v[h+9],x=v[h+10],E=v[h+11],C=v[h+12],T=v[h+13],R=v[h+14],M=v[h+15],F=d[0],k=d[1],O=d[2],N=d[3],F=e(F,k,O,N,g,7,u[0]),N=e(N,F,k,O,f,12,u[1]),O=e(O,N,F,k,y,17,u[2]),k=e(k,O,N,F,m,22,u[3]),F=e(F,k,O,N,w,7,u[4]),N=e(N,F,k,O,b,12,u[5]),O=e(O,N,F,k,_,17,u[6]),k=e(k,O,N,F,I,22,u[7]),F=e(F,k,O,N,D,7,u[8]),N=e(N,F,k,O,S,12,u[9]),O=e(O,N,F,k,x,17,u[10]),k=e(k,O,N,F,E,22,u[11]),F=e(F,k,O,N,C,7,u[12]),N=e(N,F,k,O,T,12,u[13]),O=e(O,N,F,k,R,17,u[14]),k=e(k,O,N,F,M,22,u[15]),F=i(F,k,O,N,f,5,u[16]),N=i(N,F,k,O,_,9,u[17]),O=i(O,N,F,k,E,14,u[18]),k=i(k,O,N,F,g,20,u[19]),F=i(F,k,O,N,b,5,u[20]),N=i(N,F,k,O,x,9,u[21]),O=i(O,N,F,k,M,14,u[22]),k=i(k,O,N,F,w,20,u[23]),F=i(F,k,O,N,S,5,u[24]),N=i(N,F,k,O,R,9,u[25]),O=i(O,N,F,k,m,14,u[26]),k=i(k,O,N,F,D,20,u[27]),F=i(F,k,O,N,T,5,u[28]),N=i(N,F,k,O,y,9,u[29]),O=i(O,N,F,k,I,14,u[30]),k=i(k,O,N,F,C,20,u[31]),F=n(F,k,O,N,b,4,u[32]),N=n(N,F,k,O,D,11,u[33]),O=n(O,N,F,k,E,16,u[34]),k=n(k,O,N,F,R,23,u[35]),F=n(F,k,O,N,f,4,u[36]),N=n(N,F,k,O,w,11,u[37]),O=n(O,N,F,k,I,16,u[38]),k=n(k,O,N,F,x,23,u[39]),F=n(F,k,O,N,T,4,u[40]),N=n(N,F,k,O,g,11,u[41]),O=n(O,N,F,k,m,16,u[42]),k=n(k,O,N,F,_,23,u[43]),F=n(F,k,O,N,S,4,u[44]),N=n(N,F,k,O,C,11,u[45]),O=n(O,N,F,k,M,16,u[46]),k=n(k,O,N,F,y,23,u[47]),F=r(F,k,O,N,g,6,u[48]),N=r(N,F,k,O,I,10,u[49]),O=r(O,N,F,k,R,15,u[50]),k=r(k,O,N,F,b,21,u[51]),F=r(F,k,O,N,C,6,u[52]),N=r(N,F,k,O,m,10,u[53]),O=r(O,N,F,k,x,15,u[54]),k=r(k,O,N,F,f,21,u[55]),F=r(F,k,O,N,D,6,u[56]),N=r(N,F,k,O,M,10,u[57]),O=r(O,N,F,k,_,15,u[58]),k=r(k,O,N,F,T,21,u[59]),F=r(F,k,O,N,w,6,u[60]),N=r(N,F,k,O,E,10,u[61]),O=r(O,N,F,k,y,15,u[62]),k=r(k,O,N,F,S,21,u[63]);d[0]=d[0]+F|0,d[1]=d[1]+k|0,d[2]=d[2]+O|0,d[3]=d[3]+N|0},_doFinalize:function(){var v=this._data,h=v.words,d=8*this._nDataBytes,g=8*v.sigBytes;h[g>>>5]|=128<<24-g%32;var f=t.floor(d/4294967296);for(h[(g+64>>>9<<4)+15]=(f<<8|f>>>24)&16711935|(f<<24|f>>>8)&4278255360,h[(g+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,v.sigBytes=4*(h.length+1),this._process(),v=this._hash,h=v.words,d=0;4>d;d++)g=h[d],h[d]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360;return v},clone:function(){var v=o.clone.call(this);return v._hash=this._hash.clone(),v}}),s.MD5=o._createHelper(l),s.HmacMD5=o._createHmacHelper(l)})(Math);(function(){var t=q,r=t.lib,e=r.WordArray,i=r.Hasher,n=[],r=t.algo.SHA1=i.extend({_doReset:function(){this._hash=new e.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(s,a){for(var o=this._hash.words,l=o[0],u=o[1],p=o[2],v=o[3],h=o[4],d=0;80>d;d++){if(16>d)n[d]=s[a+d]|0;else{var g=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=g<<1|g>>>31}g=(l<<5|l>>>27)+h+n[d],g=20>d?g+((u&p|~u&v)+1518500249):40>d?g+((u^p^v)+1859775393):60>d?g+((u&p|u&v|p&v)-1894007588):g+((u^p^v)-899497514),h=v,v=p,p=u<<30|u>>>2,u=l,l=g}o[0]=o[0]+l|0,o[1]=o[1]+u|0,o[2]=o[2]+p|0,o[3]=o[3]+v|0,o[4]=o[4]+h|0},_doFinalize:function(){var s=this._data,a=s.words,o=8*this._nDataBytes,l=8*s.sigBytes;return a[l>>>5]|=128<<24-l%32,a[(l+64>>>9<<4)+14]=Math.floor(o/4294967296),a[(l+64>>>9<<4)+15]=o,s.sigBytes=4*a.length,this._process(),this._hash},clone:function(){var s=i.clone.call(this);return s._hash=this._hash.clone(),s}});t.SHA1=i._createHelper(r),t.HmacSHA1=i._createHmacHelper(r)})();(function(t){for(var e=q,d=e.lib,i=d.WordArray,n=d.Hasher,d=e.algo,r=[],s=[],a=function(f){return 4294967296*(f-(f|0))|0},o=2,l=0;64>l;){var u;e:{u=o;for(var p=t.sqrt(u),v=2;v<=p;v++)if(!(u%v)){u=!1;break e}u=!0}u&&(8>l&&(r[l]=a(t.pow(o,.5))),s[l]=a(t.pow(o,1/3)),l++),o++}var h=[],d=d.SHA256=n.extend({_doReset:function(){this._hash=new i.init(r.slice(0))},_doProcessBlock:function(g,f){for(var y=this._hash.words,m=y[0],w=y[1],b=y[2],_=y[3],I=y[4],D=y[5],S=y[6],x=y[7],E=0;64>E;E++){if(16>E)h[E]=g[f+E]|0;else{var C=h[E-15],T=h[E-2];h[E]=((C<<25|C>>>7)^(C<<14|C>>>18)^C>>>3)+h[E-7]+((T<<15|T>>>17)^(T<<13|T>>>19)^T>>>10)+h[E-16]}C=x+((I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25))+(I&D^~I&S)+s[E]+h[E],T=((m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22))+(m&w^m&b^w&b),x=S,S=D,D=I,I=_+C|0,_=b,b=w,w=m,m=C+T|0}y[0]=y[0]+m|0,y[1]=y[1]+w|0,y[2]=y[2]+b|0,y[3]=y[3]+_|0,y[4]=y[4]+I|0,y[5]=y[5]+D|0,y[6]=y[6]+S|0,y[7]=y[7]+x|0},_doFinalize:function(){var g=this._data,f=g.words,y=8*this._nDataBytes,m=8*g.sigBytes;return f[m>>>5]|=128<<24-m%32,f[(m+64>>>9<<4)+14]=t.floor(y/4294967296),f[(m+64>>>9<<4)+15]=y,g.sigBytes=4*f.length,this._process(),this._hash},clone:function(){var g=n.clone.call(this);return g._hash=this._hash.clone(),g}});e.SHA256=n._createHelper(d),e.HmacSHA256=n._createHmacHelper(d)})(Math);(function(){var t=q,e=t.lib.WordArray,n=t.algo,i=n.SHA256,n=n.SHA224=i.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var r=i._doFinalize.call(this);return r.sigBytes-=4,r}});t.SHA224=i._createHelper(n),t.HmacSHA224=i._createHmacHelper(n)})();(function(){function t(){return n.create.apply(n,arguments)}for(var e=q,i=e.lib.Hasher,s=e.x64,n=s.Word,r=s.WordArray,s=e.algo,a=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],o=[],l=0;80>l;l++)o[l]=t();s=s.SHA512=i.extend({_doReset:function(){this._hash=new r.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(u,p){for(var w=this._hash.words,v=w[0],h=w[1],d=w[2],g=w[3],f=w[4],y=w[5],m=w[6],w=w[7],b=v.high,_=v.low,I=h.high,D=h.low,S=d.high,x=d.low,E=g.high,C=g.low,T=f.high,R=f.low,M=y.high,F=y.low,N=m.high,O=m.low,k=w.high,$=w.low,U=b,J=_,ee=I,te=D,_e=S,pe=x,Ce=E,me=C,Ae=T,ve=R,Pe=M,ut=F,kt=N,ii=O,Yi=k,ni=$,dt=0;80>dt;dt++){var Tt=o[dt];if(16>dt)var st=Tt.high=u[p+2*dt]|0,le=Tt.low=u[p+2*dt+1]|0;else{var st=o[dt-15],le=st.high,vt=st.low,st=(le>>>1|vt<<31)^(le>>>8|vt<<24)^le>>>7,vt=(vt>>>1|le<<31)^(vt>>>8|le<<24)^(vt>>>7|le<<25),Nt=o[dt-2],le=Nt.high,ye=Nt.low,Nt=(le>>>19|ye<<13)^(le<<3|ye>>>29)^le>>>6,ye=(ye>>>19|le<<13)^(ye<<3|le>>>29)^(ye>>>6|le<<26),le=o[dt-7],Qi=le.high,Ft=o[dt-16],yt=Ft.high,Ft=Ft.low,le=vt+le.low,st=st+Qi+(le>>>0<vt>>>0?1:0),le=le+ye,st=st+Nt+(le>>>0<ye>>>0?1:0),le=le+Ft,st=st+yt+(le>>>0<Ft>>>0?1:0);Tt.high=st,Tt.low=le}var Qi=Ae&Pe^~Ae&kt,Ft=ve&ut^~ve&ii,Tt=U&ee^U&_e^ee&_e,al=J&te^J&pe^te&pe,vt=(U>>>28|J<<4)^(U<<30|J>>>2)^(U<<25|J>>>7),Nt=(J>>>28|U<<4)^(J<<30|U>>>2)^(J<<25|U>>>7),ye=a[dt],ol=ye.high,jr=ye.low,ye=ni+((ve>>>14|Ae<<18)^(ve>>>18|Ae<<14)^(ve<<23|Ae>>>9)),yt=Yi+((Ae>>>14|ve<<18)^(Ae>>>18|ve<<14)^(Ae<<23|ve>>>9))+(ye>>>0<ni>>>0?1:0),ye=ye+Ft,yt=yt+Qi+(ye>>>0<Ft>>>0?1:0),ye=ye+jr,yt=yt+ol+(ye>>>0<jr>>>0?1:0),ye=ye+le,yt=yt+st+(ye>>>0<le>>>0?1:0),le=Nt+al,Tt=vt+Tt+(le>>>0<Nt>>>0?1:0),Yi=kt,ni=ii,kt=Pe,ii=ut,Pe=Ae,ut=ve,ve=me+ye|0,Ae=Ce+yt+(ve>>>0<me>>>0?1:0)|0,Ce=_e,me=pe,_e=ee,pe=te,ee=U,te=J,J=ye+le|0,U=yt+Tt+(J>>>0<ye>>>0?1:0)|0}_=v.low=_+J,v.high=b+U+(_>>>0<J>>>0?1:0),D=h.low=D+te,h.high=I+ee+(D>>>0<te>>>0?1:0),x=d.low=x+pe,d.high=S+_e+(x>>>0<pe>>>0?1:0),C=g.low=C+me,g.high=E+Ce+(C>>>0<me>>>0?1:0),R=f.low=R+ve,f.high=T+Ae+(R>>>0<ve>>>0?1:0),F=y.low=F+ut,y.high=M+Pe+(F>>>0<ut>>>0?1:0),O=m.low=O+ii,m.high=N+kt+(O>>>0<ii>>>0?1:0),$=w.low=$+ni,w.high=k+Yi+($>>>0<ni>>>0?1:0)},_doFinalize:function(){var u=this._data,p=u.words,v=8*this._nDataBytes,h=8*u.sigBytes;return p[h>>>5]|=128<<24-h%32,p[(h+128>>>10<<5)+30]=Math.floor(v/4294967296),p[(h+128>>>10<<5)+31]=v,u.sigBytes=4*p.length,this._process(),this._hash.toX32()},clone:function(){var u=i.clone.call(this);return u._hash=this._hash.clone(),u},blockSize:32}),e.SHA512=i._createHelper(s),e.HmacSHA512=i._createHmacHelper(s)})();(function(){var t=q,r=t.x64,e=r.Word,i=r.WordArray,r=t.algo,n=r.SHA512,r=r.SHA384=n.extend({_doReset:function(){this._hash=new i.init([new e.init(3418070365,3238371032),new e.init(1654270250,914150663),new e.init(2438529370,812702999),new e.init(355462360,4144912697),new e.init(1731405415,4290775857),new e.init(2394180231,1750603025),new e.init(3675008525,1694076839),new e.init(1203062813,3204075428)])},_doFinalize:function(){var s=n._doFinalize.call(this);return s.sigBytes-=16,s}});t.SHA384=n._createHelper(r),t.HmacSHA384=n._createHmacHelper(r)})();(function(){var t=q,u=t.lib,e=u.WordArray,i=u.Hasher,u=t.algo,n=e.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),r=e.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=e.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=e.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),o=e.create([0,1518500249,1859775393,2400959708,2840853838]),l=e.create([1352829926,1548603684,1836072691,2053994217,0]),u=u.RIPEMD160=i.extend({_doReset:function(){this._hash=e.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(p,v){for(var h=0;16>h;h++){var d=v+h,g=p[d];p[d]=(g<<8|g>>>24)&16711935|(g<<24|g>>>8)&4278255360}var d=this._hash.words,g=o.words,f=l.words,y=n.words,m=r.words,w=s.words,b=a.words,_,I,D,S,x,E,C,T,R,M;E=_=d[0],C=I=d[1],T=D=d[2],R=S=d[3],M=x=d[4];for(var F,h=0;80>h;h+=1)F=_+p[v+y[h]]|0,F=16>h?F+((I^D^S)+g[0]):32>h?F+((I&D|~I&S)+g[1]):48>h?F+(((I|~D)^S)+g[2]):64>h?F+((I&S|D&~S)+g[3]):F+((I^(D|~S))+g[4]),F|=0,F=F<<w[h]|F>>>32-w[h],F=F+x|0,_=x,x=S,S=D<<10|D>>>22,D=I,I=F,F=E+p[v+m[h]]|0,F=16>h?F+((C^(T|~R))+f[0]):32>h?F+((C&R|T&~R)+f[1]):48>h?F+(((C|~T)^R)+f[2]):64>h?F+((C&T|~C&R)+f[3]):F+((C^T^R)+f[4]),F|=0,F=F<<b[h]|F>>>32-b[h],F=F+M|0,E=M,M=R,R=T<<10|T>>>22,T=C,C=F;F=d[1]+D+R|0,d[1]=d[2]+S+M|0,d[2]=d[3]+x+E|0,d[3]=d[4]+_+C|0,d[4]=d[0]+I+T|0,d[0]=F},_doFinalize:function(){var p=this._data,v=p.words,h=8*this._nDataBytes,d=8*p.sigBytes;for(v[d>>>5]|=128<<24-d%32,v[(d+64>>>9<<4)+14]=(h<<8|h>>>24)&16711935|(h<<24|h>>>8)&4278255360,p.sigBytes=4*(v.length+1),this._process(),p=this._hash,v=p.words,h=0;5>h;h++)d=v[h],v[h]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;return p},clone:function(){var p=i.clone.call(this);return p._hash=this._hash.clone(),p}});t.RIPEMD160=i._createHelper(u),t.HmacRIPEMD160=i._createHmacHelper(u)})(Math);(function(){var t=q,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(i,n){i=this._hasher=new i.init,typeof n=="string"&&(n=e.parse(n));var r=i.blockSize,s=4*r;n.sigBytes>s&&(n=i.finalize(n)),n.clamp();for(var a=this._oKey=n.clone(),o=this._iKey=n.clone(),l=a.words,u=o.words,p=0;p<r;p++)l[p]^=1549556828,u[p]^=909522486;a.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var i=this._hasher;i.reset(),i.update(this._iKey)},update:function(i){return this._hasher.update(i),this},finalize:function(i){var n=this._hasher;return i=n.finalize(i),n.reset(),n.finalize(this._oKey.clone().concat(i))}})})();(function(){var t=q,n=t.lib,e=n.Base,i=n.WordArray,n=t.algo,r=n.HMAC,s=n.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,o){for(var g=this.cfg,l=r.create(g.hasher,a),u=i.create(),p=i.create([1]),v=u.words,h=p.words,d=g.keySize,g=g.iterations;v.length<d;){var f=l.update(o).finalize(p);l.reset();for(var y=f.words,m=y.length,w=f,b=1;b<g;b++){w=l.finalize(w),l.reset();for(var _=w.words,I=0;I<m;I++)y[I]^=_[I]}u.concat(f),h[0]++}return u.sigBytes=4*d,u}});t.PBKDF2=function(a,o,l){return s.create(l).compute(a,o)}})();var Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",br="=";function It(t){var e,i,n="";for(e=0;e+3<=t.length;e+=3)i=parseInt(t.substring(e,e+3),16),n+=Yt.charAt(i>>6)+Yt.charAt(i&63);if(e+1==t.length?(i=parseInt(t.substring(e,e+1),16),n+=Yt.charAt(i<<2)):e+2==t.length&&(i=parseInt(t.substring(e,e+2),16),n+=Yt.charAt(i>>2)+Yt.charAt((i&3)<<4)),br)for(;(n.length&3)>0;)n+=br;return n}function Zt(t){var e="",i,n=0,r,s;for(i=0;i<t.length&&t.charAt(i)!=br;++i)s=Yt.indexOf(t.charAt(i)),!(s<0)&&(n==0?(e+=At(s>>2),r=s&3,n=1):n==1?(e+=At(r<<2|s>>4),r=s&15,n=2):n==2?(e+=At(r),e+=At(s>>2),r=s&3,n=3):(e+=At(r<<2|s>>4),e+=At(s&15),n=0));return n==1&&(e+=At(r<<2)),e}function _o(t){var e=Zt(t),i,n=new Array;for(i=0;2*i<e.length;++i)n[i]=parseInt(e.substring(2*i,2*i+2),16);return n}var Rt,zu=0xdeadbeefcafe,wo=(zu&16777215)==15715070;function P(t,e,i){t!=null&&(typeof t=="number"?this.fromNumber(t,e,i):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function ne(){return new P(null)}function Hu(t,e,i,n,r,s){for(;--s>=0;){var a=e*this[t++]+i[n]+r;r=Math.floor(a/67108864),i[n++]=a&67108863}return r}function Vu(t,e,i,n,r,s){for(var a=e&32767,o=e>>15;--s>=0;){var l=this[t]&32767,u=this[t++]>>15,p=o*l+u*a;l=a*l+((p&32767)<<15)+i[n]+(r&1073741823),r=(l>>>30)+(p>>>15)+o*u+(r>>>30),i[n++]=l&1073741823}return r}function qu(t,e,i,n,r,s){for(var a=e&16383,o=e>>14;--s>=0;){var l=this[t]&16383,u=this[t++]>>14,p=o*l+u*a;l=a*l+((p&16383)<<14)+i[n]+r,r=(l>>28)+(p>>14)+o*u,i[n++]=l&268435455}return r}wo&&ui.appName=="Microsoft Internet Explorer"?(P.prototype.am=Vu,Rt=30):wo&&ui.appName!="Netscape"?(P.prototype.am=Hu,Rt=26):(P.prototype.am=qu,Rt=28);P.prototype.DB=Rt;P.prototype.DM=(1<<Rt)-1;P.prototype.DV=1<<Rt;var Ar=52;P.prototype.FV=Math.pow(2,Ar);P.prototype.F1=Ar-Rt;P.prototype.F2=2*Rt-Ar;var Uu="0123456789abcdefghijklmnopqrstuvwxyz",Vi=new Array,ei,ot;ei="0".charCodeAt(0);for(ot=0;ot<=9;++ot)Vi[ei++]=ot;ei="a".charCodeAt(0);for(ot=10;ot<36;++ot)Vi[ei++]=ot;ei="A".charCodeAt(0);for(ot=10;ot<36;++ot)Vi[ei++]=ot;function At(t){return Uu.charAt(t)}function Ao(t,e){var i=Vi[t.charCodeAt(e)];return i??-1}function Ku(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function Gu(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function Pt(t){var e=ne();return e.fromInt(t),e}function $u(t,e){var i;if(e==16)i=4;else if(e==8)i=3;else if(e==256)i=8;else if(e==2)i=1;else if(e==32)i=5;else if(e==4)i=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,r=!1,s=0;--n>=0;){var a=i==8?t[n]&255:Ao(t,n);if(a<0){t.charAt(n)=="-"&&(r=!0);continue}r=!1,s==0?this[this.t++]=a:s+i>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,s+=i,s>=this.DB&&(s-=this.DB)}i==8&&t[0]&128&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),r&&P.ZERO.subTo(this,this)}function Wu(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function Ju(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var i=(1<<e)-1,n,r=!1,s="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(n=this[a]>>o)>0&&(r=!0,s=At(n));a>=0;)o<e?(n=(this[a]&(1<<o)-1)<<e-o,n|=this[--a]>>(o+=this.DB-e)):(n=this[a]>>(o-=e)&i,o<=0&&(o+=this.DB,--a)),n>0&&(r=!0),r&&(s+=At(n));return r?s:"0"}function Xu(){var t=ne();return P.ZERO.subTo(this,t),t}function Yu(){return this.s<0?this.negate():this}function Qu(t){var e=this.s-t.s;if(e!=0)return e;var i=this.t;if(e=i-t.t,e!=0)return this.s<0?-e:e;for(;--i>=0;)if((e=this[i]-t[i])!=0)return e;return 0}function qi(t){var e=1,i;return(i=t>>>16)!=0&&(t=i,e+=16),(i=t>>8)!=0&&(t=i,e+=8),(i=t>>4)!=0&&(t=i,e+=4),(i=t>>2)!=0&&(t=i,e+=2),(i=t>>1)!=0&&(t=i,e+=1),e}function Zu(){return this.t<=0?0:this.DB*(this.t-1)+qi(this[this.t-1]^this.s&this.DM)}function ed(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function td(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function id(t,e){var i=t%this.DB,n=this.DB-i,r=(1<<n)-1,s=Math.floor(t/this.DB),a=this.s<<i&this.DM,o;for(o=this.t-1;o>=0;--o)e[o+s+1]=this[o]>>n|a,a=(this[o]&r)<<i;for(o=s-1;o>=0;--o)e[o]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function nd(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t){e.t=0;return}var n=t%this.DB,r=this.DB-n,s=(1<<n)-1;e[0]=this[i]>>n;for(var a=i+1;a<this.t;++a)e[a-i-1]|=(this[a]&s)<<r,e[a-i]=this[a]>>n;n>0&&(e[this.t-i-1]|=(this.s&s)<<r),e.t=this.t-i,e.clamp()}function rd(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function sd(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&P.ZERO.subTo(e,e)}function ad(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function od(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t){e?.fromInt(0),i!=null&&this.copyTo(i);return}i==null&&(i=ne());var s=ne(),a=this.s,o=t.s,l=this.DB-qi(n[n.t-1]);l>0?(n.lShiftTo(l,s),r.lShiftTo(l,i)):(n.copyTo(s),r.copyTo(i));var u=s.t,p=s[u-1];if(p!=0){var v=p*(1<<this.F1)+(u>1?s[u-2]>>this.F2:0),h=this.FV/v,d=(1<<this.F1)/v,g=1<<this.F2,f=i.t,y=f-u,m=e??ne();for(s.dlShiftTo(y,m),i.compareTo(m)>=0&&(i[i.t++]=1,i.subTo(m,i)),P.ONE.dlShiftTo(u,m),m.subTo(s,s);s.t<u;)s[s.t++]=0;for(;--y>=0;){var w=i[--f]==p?this.DM:Math.floor(i[f]*h+(i[f-1]+g)*d);if((i[f]+=s.am(0,w,i,y,0,u))<w)for(s.dlShiftTo(y,m),i.subTo(m,i);i[f]<--w;)i.subTo(m,i)}e!=null&&(i.drShiftTo(u,e),a!=o&&P.ZERO.subTo(e,e)),i.t=u,i.clamp(),l>0&&i.rShiftTo(l,i),a<0&&P.ZERO.subTo(i,i)}}}function ld(t){var e=ne();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(P.ZERO)>0&&t.subTo(e,e),e}function qt(t){this.m=t}function ud(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function dd(t){return t}function cd(t){t.divRemTo(this.m,null,t)}function hd(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function fd(t,e){t.squareTo(e),this.reduce(e)}qt.prototype.convert=ud;qt.prototype.revert=dd;qt.prototype.reduce=cd;qt.prototype.mulTo=hd;qt.prototype.sqrTo=fd;function pd(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Ut(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function gd(t){var e=ne();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(P.ZERO)>0&&this.m.subTo(e,e),e}function md(t){var e=ne();return t.copyTo(e),this.reduce(e),e}function vd(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=t[e]&32767,n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function yd(t,e){t.squareTo(e),this.reduce(e)}function wd(t,e,i){t.multiplyTo(e,i),this.reduce(i)}Ut.prototype.convert=gd;Ut.prototype.revert=md;Ut.prototype.reduce=vd;Ut.prototype.mulTo=wd;Ut.prototype.sqrTo=yd;function bd(){return(this.t>0?this[0]&1:this.s)==0}function Sd(t,e){if(t>4294967295||t<1)return P.ONE;var i=ne(),n=ne(),r=e.convert(this),s=qi(t)-1;for(r.copyTo(i);--s>=0;)if(e.sqrTo(i,n),(t&1<<s)>0)e.mulTo(n,r,i);else{var a=i;i=n,n=a}return e.revert(i)}function xd(t,e){var i;return t<256||e.isEven()?i=new qt(e):i=new Ut(e),this.exp(t,i)}P.prototype.copyTo=Ku;P.prototype.fromInt=Gu;P.prototype.fromString=$u;P.prototype.clamp=Wu;P.prototype.dlShiftTo=ed;P.prototype.drShiftTo=td;P.prototype.lShiftTo=id;P.prototype.rShiftTo=nd;P.prototype.subTo=rd;P.prototype.multiplyTo=sd;P.prototype.squareTo=ad;P.prototype.divRemTo=od;P.prototype.invDigit=pd;P.prototype.isEven=bd;P.prototype.exp=Sd;P.prototype.toString=Ju;P.prototype.negate=Xu;P.prototype.abs=Yu;P.prototype.compareTo=Qu;P.prototype.bitLength=Zu;P.prototype.mod=ld;P.prototype.modPowInt=xd;P.ZERO=Pt(0);P.ONE=Pt(1);function Ed(){var t=ne();return this.copyTo(t),t}function _d(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Ad(){return this.t==0?this.s:this[0]<<24>>24}function Id(){return this.t==0?this.s:this[0]<<16>>16}function Cd(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Fd(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Td(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=Pt(i),r=ne(),s=ne(),a="";for(this.divRemTo(n,r,s);r.signum()>0;)a=(i+s.intValue()).toString(t).substr(1)+a,r.divRemTo(n,r,s);return s.intValue().toString(t)+a}function Pd(t,e){this.fromInt(0),e==null&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,s=0,a=0,o=0;o<t.length;++o){var l=Ao(t,o);if(l<0){t.charAt(o)=="-"&&this.signum()==0&&(r=!0);continue}a=e*a+l,++s>=i&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0)}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),r&&P.ZERO.subTo(this,this)}function Rd(t,e,i){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(P.ONE.shiftLeft(t-1),Ir,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(P.ONE.shiftLeft(t-1),this);else{var n=new Array,r=t&7;n.length=(t>>3)+1,e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function Dd(){var t=this.t,e=new Array;e[0]=this.s;var i=this.DB-t*this.DB%8,n,r=0;if(t-- >0)for(i<this.DB&&(n=this[t]>>i)!=(this.s&this.DM)>>i&&(e[r++]=n|this.s<<this.DB-i);t>=0;)i<8?(n=(this[t]&(1<<i)-1)<<8-i,n|=this[--t]>>(i+=this.DB-8)):(n=this[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),n&128&&(n|=-256),r==0&&(this.s&128)!=(n&128)&&++r,(r>0||n!=this.s)&&(e[r++]=n);return e}function Od(t){return this.compareTo(t)==0}function kd(t){return this.compareTo(t)<0?this:t}function Nd(t){return this.compareTo(t)>0?this:t}function Bd(t,e,i){var n,r,s=Math.min(t.t,this.t);for(n=0;n<s;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=s;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=s;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function Md(t,e){return t&e}function jd(t){var e=ne();return this.bitwiseTo(t,Md,e),e}function Ir(t,e){return t|e}function Ld(t){var e=ne();return this.bitwiseTo(t,Ir,e),e}function Io(t,e){return t^e}function zd(t){var e=ne();return this.bitwiseTo(t,Io,e),e}function Co(t,e){return t&~e}function Hd(t){var e=ne();return this.bitwiseTo(t,Co,e),e}function Vd(){for(var t=ne(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function qd(t){var e=ne();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Ud(t){var e=ne();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Kd(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function Gd(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Kd(this[t]);return this.s<0?this.t*this.DB:-1}function $d(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function Wd(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=$d(this[i]^e);return t}function Jd(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function Xd(t,e){var i=P.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function Yd(t){return this.changeBit(t,Ir)}function Qd(t){return this.changeBit(t,Co)}function Zd(t){return this.changeBit(t,Io)}function ec(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function tc(t){var e=ne();return this.addTo(t,e),e}function ic(t){var e=ne();return this.subTo(t,e),e}function nc(t){var e=ne();return this.multiplyTo(t,e),e}function rc(){var t=ne();return this.squareTo(t),t}function sc(t){var e=ne();return this.divRemTo(t,e,null),e}function ac(t){var e=ne();return this.divRemTo(t,null,e),e}function oc(t){var e=ne(),i=ne();return this.divRemTo(t,e,i),new Array(e,i)}function lc(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function uc(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function ci(){}function Fo(t){return t}function dc(t,e,i){t.multiplyTo(e,i)}function cc(t,e){t.squareTo(e)}ci.prototype.convert=Fo;ci.prototype.revert=Fo;ci.prototype.mulTo=dc;ci.prototype.sqrTo=cc;function hc(t){return this.exp(t,new ci)}function fc(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var r;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function pc(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function ti(t){this.r2=ne(),this.q3=ne(),P.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function gc(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=ne();return t.copyTo(e),this.reduce(e),e}function mc(t){return t}function vc(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function yc(t,e){t.squareTo(e),this.reduce(e)}function wc(t,e,i){t.multiplyTo(e,i),this.reduce(i)}ti.prototype.convert=gc;ti.prototype.revert=mc;ti.prototype.reduce=vc;ti.prototype.mulTo=wc;ti.prototype.sqrTo=yc;function bc(t,e){var i=t.bitLength(),n,r=Pt(1),s;if(i<=0)return r;i<18?n=1:i<48?n=3:i<144?n=4:i<768?n=5:n=6,i<8?s=new qt(e):e.isEven()?s=new ti(e):s=new Ut(e);var a=new Array,o=3,l=n-1,u=(1<<n)-1;if(a[1]=s.convert(this),n>1){var p=ne();for(s.sqrTo(a[1],p);o<=u;)a[o]=ne(),s.mulTo(p,a[o-2],a[o]),o+=2}var v=t.t-1,h,d=!0,g=ne(),f;for(i=qi(t[v])-1;v>=0;){for(i>=l?h=t[v]>>i-l&u:(h=(t[v]&(1<<i+1)-1)<<l-i,v>0&&(h|=t[v-1]>>this.DB+i-l)),o=n;!(h&1);)h>>=1,--o;if((i-=o)<0&&(i+=this.DB,--v),d)a[h].copyTo(r),d=!1;else{for(;o>1;)s.sqrTo(r,g),s.sqrTo(g,r),o-=2;o>0?s.sqrTo(r,g):(f=r,r=g,g=f),s.mulTo(g,a[h],r)}for(;v>=0&&!(t[v]&1<<i);)s.sqrTo(r,g),f=r,r=g,g=f,--i<0&&(i=this.DB-1,--v)}return s.revert(r)}function Sc(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),s=i.getLowestSetBit();if(s<0)return e;for(r<s&&(s=r),s>0&&(e.rShiftTo(s,e),i.rShiftTo(s,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return s>0&&i.lShiftTo(s,i),i}function xc(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(e==0)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function Ec(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return P.ZERO;for(var i=t.clone(),n=this.clone(),r=Pt(1),s=Pt(0),a=Pt(0),o=Pt(1);i.signum()!=0;){for(;i.isEven();)i.rShiftTo(1,i),e?((!r.isEven()||!s.isEven())&&(r.addTo(this,r),s.subTo(t,s)),r.rShiftTo(1,r)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!o.isEven())&&(a.addTo(this,a),o.subTo(t,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(a,r),s.subTo(o,s)):(n.subTo(i,n),e&&a.subTo(r,a),o.subTo(s,o))}if(n.compareTo(P.ONE)!=0)return P.ZERO;if(o.compareTo(t)>=0)return o.subtract(t);if(o.signum()<0)o.addTo(t,o);else return o;return o.signum()<0?o.add(t):o}var Je=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_c=(1<<26)/Je[Je.length-1];function Ac(t){var e,i=this.abs();if(i.t==1&&i[0]<=Je[Je.length-1]){for(e=0;e<Je.length;++e)if(i[0]==Je[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<Je.length;){for(var n=Je[e],r=e+1;r<Je.length&&n<_c;)n*=Je[r++];for(n=i.modInt(n);e<r;)if(n%Je[e++]==0)return!1}return i.millerRabin(t)}function Ic(t){var e=this.subtract(P.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);t=t+1>>1,t>Je.length&&(t=Je.length);for(var r=ne(),s=0;s<t;++s){r.fromInt(Je[Math.floor(Math.random()*Je.length)]);var a=r.modPow(n,this);if(a.compareTo(P.ONE)!=0&&a.compareTo(e)!=0){for(var o=1;o++<i&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(P.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}P.prototype.chunkSize=Cd;P.prototype.toRadix=Td;P.prototype.fromRadix=Pd;P.prototype.fromNumber=Rd;P.prototype.bitwiseTo=Bd;P.prototype.changeBit=Xd;P.prototype.addTo=ec;P.prototype.dMultiply=lc;P.prototype.dAddOffset=uc;P.prototype.multiplyLowerTo=fc;P.prototype.multiplyUpperTo=pc;P.prototype.modInt=xc;P.prototype.millerRabin=Ic;P.prototype.clone=Ed;P.prototype.intValue=_d;P.prototype.byteValue=Ad;P.prototype.shortValue=Id;P.prototype.signum=Fd;P.prototype.toByteArray=Dd;P.prototype.equals=Od;P.prototype.min=kd;P.prototype.max=Nd;P.prototype.and=jd;P.prototype.or=Ld;P.prototype.xor=zd;P.prototype.andNot=Hd;P.prototype.not=Vd;P.prototype.shiftLeft=qd;P.prototype.shiftRight=Ud;P.prototype.getLowestSetBit=Gd;P.prototype.bitCount=Wd;P.prototype.testBit=Jd;P.prototype.setBit=Yd;P.prototype.clearBit=Qd;P.prototype.flipBit=Zd;P.prototype.add=tc;P.prototype.subtract=ic;P.prototype.multiply=nc;P.prototype.divide=sc;P.prototype.remainder=ac;P.prototype.divideAndRemainder=oc;P.prototype.modPow=bc;P.prototype.modInverse=Ec;P.prototype.pow=hc;P.prototype.gcd=Sc;P.prototype.isProbablePrime=Ac;P.prototype.square=rc;function Cr(){this.i=0,this.j=0,this.S=new Array}function Cc(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0}function Fc(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}Cr.prototype.init=Cc;Cr.prototype.next=Fc;function Tc(){return new Cr}var Sr=256;var ji,rt,Me;function Pc(t){rt[Me++]^=t&255,rt[Me++]^=t>>8&255,rt[Me++]^=t>>16&255,rt[Me++]^=t>>24&255,Me>=Sr&&(Me-=Sr)}function Fr(){Pc(new Date().getTime())}if(rt==null){if(rt=new Array,Me=0,Xt!==void 0&&(Xt.crypto!==void 0||Xt.msCrypto!==void 0)){if(vr=Xt.crypto||Xt.msCrypto,vr.getRandomValues)for(yr=new Uint8Array(32),vr.getRandomValues(yr),at=0;at<32;++at)rt[Me++]=yr[at];else if(ui.appName=="Netscape"&&ui.appVersion<"5")for(wr=Xt.crypto.random(32),at=0;at<wr.length;++at)rt[Me++]=wr.charCodeAt(at)&255}for(;Me<Sr;)at=Math.floor(65536*Math.random()),rt[Me++]=at>>>8,rt[Me++]=at&255;Me=0,Fr()}var at,vr,yr,wr;function Rc(){if(ji==null){for(Fr(),ji=Tc(),ji.init(rt),Me=0;Me<rt.length;++Me)rt[Me]=0;Me=0}return ji.next()}function Dc(t){var e;for(e=0;e<t.length;++e)t[e]=Rc()}function Dt(){}Dt.prototype.nextBytes=Dc;function Ke(t,e){return new P(t,e)}function Oc(t,e){if(e<t.length+11)throw"Message too long for RSA";for(var i=new Array,n=t.length-1;n>=0&&e>0;){var r=t.charCodeAt(n--);r<128?i[--e]=r:r>127&&r<2048?(i[--e]=r&63|128,i[--e]=r>>6|192):(i[--e]=r&63|128,i[--e]=r>>6&63|128,i[--e]=r>>12|224)}i[--e]=0;for(var s=new Dt,a=new Array;e>2;){for(a[0]=0;a[0]==0;)s.nextBytes(a);i[--e]=a[0]}return i[--e]=2,i[--e]=0,new P(i)}function bo(t,e,i){for(var n="",r=0;n.length<e;)n+=i(String.fromCharCode.apply(String,t.concat([(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255]))),r+=1;return n}function kc(t,e,i,n){var r=c.crypto.MessageDigest,s=c.crypto.Util,a=null;if(i||(i="sha1"),typeof i=="string"&&(a=r.getCanonicalAlgName(i),n=r.getHashLength(a),i=function(f){return Ge(s.hashHex(lt(f),a))}),t.length+2*n+2>e)throw"Message too long for RSA";var o="",l;for(l=0;l<e-t.length-2*n-2;l+=1)o+="\0";var u=i("")+o+""+t,p=new Array(n);new Dt().nextBytes(p);var v=bo(p,u.length,i),h=[];for(l=0;l<u.length;l+=1)h[l]=u.charCodeAt(l)^v.charCodeAt(l);var d=bo(h,p.length,i),g=[0];for(l=0;l<p.length;l+=1)g[l+1]=p[l]^d.charCodeAt(l);return new P(g.concat(h))}function K(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Nc(t,e){if(this.isPublic=!0,this.isPrivate=!1,typeof t!="string")this.n=t,this.e=e;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Ke(t,16),this.e=parseInt(e,16);else throw"Invalid RSA public key"}function Bc(t){return t.modPowInt(this.e,this.n)}function Mc(t){var e=Oc(t,this.n.bitLength()+7>>3);if(e==null)return null;var i=this.doPublic(e);if(i==null)return null;var n=i.toString(16);return n.length&1?"0"+n:n}function jc(t,e,i){var n=kc(t,this.n.bitLength()+7>>3,e,i);if(n==null)return null;var r=this.doPublic(n);if(r==null)return null;var s=r.toString(16);return s.length&1?"0"+s:s}K.prototype.doPublic=Bc;K.prototype.setPublic=Nc;K.prototype.encrypt=Mc;K.prototype.encryptOAEP=jc;K.prototype.type="RSA";function Lc(t,e){for(var i=t.toByteArray(),n=0;n<i.length&&i[n]==0;)++n;if(i.length-n!=e-1||i[n]!=2)return null;for(++n;i[n]!=0;)if(++n>=i.length)return null;for(var r="";++n<i.length;){var s=i[n]&255;s<128?r+=String.fromCharCode(s):s>191&&s<224?(r+=String.fromCharCode((s&31)<<6|i[n+1]&63),++n):(r+=String.fromCharCode((s&15)<<12|(i[n+1]&63)<<6|i[n+2]&63),n+=2)}return r}function So(t,e,i){for(var n="",r=0;n.length<e;)n+=i(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])),r+=1;return n}function zc(t,e,i,n){var r=c.crypto.MessageDigest,s=c.crypto.Util,a=null;i||(i="sha1"),typeof i=="string"&&(a=r.getCanonicalAlgName(i),n=r.getHashLength(a),i=function(y){return Ge(s.hashHex(lt(y),a))}),t=t.toByteArray();var v;for(v=0;v<t.length;v+=1)t[v]&=255;for(;t.length<e;)t.unshift(0);if(t=String.fromCharCode.apply(String,t),t.length<2*n+2)throw"Cipher too short";var o=t.substr(1,n),l=t.substr(n+1),u=So(l,n,i),p=[],v;for(v=0;v<o.length;v+=1)p[v]=o.charCodeAt(v)^u.charCodeAt(v);var h=So(String.fromCharCode.apply(String,p),t.length-n,i),d=[];for(v=0;v<l.length;v+=1)d[v]=l.charCodeAt(v)^h.charCodeAt(v);if(d=String.fromCharCode.apply(String,d),d.substr(0,n)!==i(""))throw"Hash mismatch";d=d.substr(n);var g=d.indexOf(""),f=g!=-1?d.substr(0,g).lastIndexOf("\0"):-1;if(f+1!=g)throw"Malformed data";return d.substr(g+1)}function Hc(t,e,i){if(this.isPrivate=!0,typeof t!="string")this.n=t,this.e=e,this.d=i;else if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Ke(t,16),this.e=parseInt(e,16),this.d=Ke(i,16);else throw"Invalid RSA private key"}function Vc(t,e,i,n,r,s,a,o){if(this.isPrivate=!0,this.isPublic=!1,t==null)throw"RSASetPrivateEx N == null";if(e==null)throw"RSASetPrivateEx E == null";if(t.length==0)throw"RSASetPrivateEx N.length == 0";if(e.length==0)throw"RSASetPrivateEx E.length == 0";if(t!=null&&e!=null&&t.length>0&&e.length>0)this.n=Ke(t,16),this.e=parseInt(e,16),this.d=Ke(i,16),this.p=Ke(n,16),this.q=Ke(r,16),this.dmp1=Ke(s,16),this.dmq1=Ke(a,16),this.coeff=Ke(o,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function qc(t,e){var i=new Dt,n=t>>1;this.e=parseInt(e,16);for(var r=new P(e,16),s=t/2-100,a=P.ONE.shiftLeft(s);;){for(;this.p=new P(t-n,1,i),!(this.p.subtract(P.ONE).gcd(r).compareTo(P.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new P(n,1,i),!(this.q.subtract(P.ONE).gcd(r).compareTo(P.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var l=this.q.subtract(this.p).abs();if(!(l.bitLength()<s||l.compareTo(a)<=0)){var u=this.p.subtract(P.ONE),p=this.q.subtract(P.ONE),v=u.multiply(p);if(v.gcd(r).compareTo(P.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==t)){this.d=r.modInverse(v),this.dmp1=this.d.mod(u),this.dmq1=this.d.mod(p),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function Uc(t){if(this.p==null||this.q==null)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),i=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(i)<0;)e=e.add(this.p);return e.subtract(i).multiply(this.coeff).mod(this.p).multiply(this.q).add(i)}function Kc(t){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var e=Ke(t,16),i=this.doPrivate(e);return i==null?null:Lc(i,this.n.bitLength()+7>>3)}function Gc(t,e,i){if(t.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=Ke(t,16),r=this.doPrivate(n);return r==null?null:zc(r,this.n.bitLength()+7>>3,e,i)}K.prototype.doPrivate=Uc;K.prototype.setPrivate=Hc;K.prototype.setPrivateEx=Vc;K.prototype.generate=qc;K.prototype.decrypt=Kc;K.prototype.decryptOAEP=Gc;function ke(t,e){this.x=e,this.q=t}function $c(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function Wc(){return this.x}function Jc(){return new ke(this.q,this.x.negate().mod(this.q))}function Xc(t){return new ke(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function Yc(t){return new ke(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function Qc(t){return new ke(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function Zc(){return new ke(this.q,this.x.square().mod(this.q))}function eh(t){return new ke(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}ke.prototype.equals=$c;ke.prototype.toBigInteger=Wc;ke.prototype.negate=Jc;ke.prototype.add=Xc;ke.prototype.subtract=Yc;ke.prototype.multiply=Qc;ke.prototype.square=Zc;ke.prototype.divide=eh;ke.prototype.sqrt=function(){return new ke(this.q,this.x.sqrt().mod(this.q))};function oe(t,e,i,n){this.curve=t,this.x=e,this.y=i,n==null?this.z=P.ONE:this.z=n,this.zinv=null}function th(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function ih(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function nh(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,i;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e.equals(P.ZERO)?(i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),i.equals(P.ZERO)):!1}function rh(){return this.x==null&&this.y==null?!0:this.z.equals(P.ZERO)&&!this.y.toBigInteger().equals(P.ZERO)}function sh(){return new oe(this.curve,this.x,this.y.negate(),this.z)}function ah(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),i=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(P.ZERO.equals(i))return P.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new P("3"),r=this.x.toBigInteger(),s=this.y.toBigInteger(),a=t.x.toBigInteger(),o=t.y.toBigInteger(),l=i.square(),u=l.multiply(i),p=r.multiply(l),v=e.square().multiply(this.z),h=v.subtract(p.shiftLeft(1)).multiply(t.z).subtract(u).multiply(i).mod(this.curve.q),d=p.multiply(n).multiply(e).subtract(s.multiply(u)).subtract(v.multiply(e)).multiply(t.z).add(e.multiply(u)).mod(this.curve.q),g=u.multiply(this.z).multiply(t.z).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(d),g)}function oh(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=new P("3"),e=this.x.toBigInteger(),i=this.y.toBigInteger(),n=i.multiply(this.z),r=n.multiply(i).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=e.square().multiply(t);P.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s))),a=a.mod(this.curve.q);var o=a.square().subtract(e.shiftLeft(3).multiply(r)).shiftLeft(1).multiply(n).mod(this.curve.q),l=a.multiply(t).multiply(e).subtract(r.shiftLeft(1)).shiftLeft(2).multiply(r).subtract(a.square().multiply(a)).mod(this.curve.q),u=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new oe(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(l),u)}function lh(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new P("3")),n=this.negate(),r=this,s=this.curve.q.subtract(t),a=s.multiply(new P("3")),o=new oe(this.curve,this.x,this.y),l=o.negate(),u;for(u=i.bitLength()-2;u>0;--u){r=r.twice();var p=i.testBit(u),v=e.testBit(u);p!=v&&(r=r.add(p?this:n))}for(u=a.bitLength()-2;u>0;--u){o=o.twice();var h=a.testBit(u),d=s.testBit(u);h!=d&&(o=o.add(h?o:l))}return r}function uh(t,e,i){var n;t.bitLength()>i.bitLength()?n=t.bitLength()-1:n=i.bitLength()-1;for(var r=this.curve.getInfinity(),s=this.add(e);n>=0;)r=r.twice(),t.testBit(n)?i.testBit(n)?r=r.add(s):r=r.add(this):i.testBit(n)&&(r=r.add(e)),--n;return r}oe.prototype.getX=th;oe.prototype.getY=ih;oe.prototype.equals=nh;oe.prototype.isInfinity=rh;oe.prototype.negate=sh;oe.prototype.add=ah;oe.prototype.twice=oh;oe.prototype.multiply=lh;oe.prototype.multiplyTwo=uh;function Ct(t,e,i){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(i),this.infinity=new oe(this,null,null)}function dh(){return this.q}function ch(){return this.a}function hh(){return this.b}function fh(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function ph(){return this.infinity}function gh(t){return new ke(this.q,t)}function mh(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var e=t.substr(0,2),i=t.substr(2),n=this.fromBigInteger(new P(u,16)),r=this.getA(),s=this.getB(),a=n.square().add(r).multiply(n).add(s),o=a.sqrt();return e=="03"&&(o=o.negate()),new oe(this,n,o);case 4:case 6:case 7:var l=(t.length-2)/2,u=t.substr(2,l),p=t.substr(l+2,l);return new oe(this,this.fromBigInteger(new P(u,16)),this.fromBigInteger(new P(p,16)));default:return null}}Ct.prototype.getQ=dh;Ct.prototype.getA=ch;Ct.prototype.getB=hh;Ct.prototype.equals=fh;Ct.prototype.getInfinity=ph;Ct.prototype.fromBigInteger=gh;Ct.prototype.decodePointHex=mh;ke.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};oe.prototype.getEncoded=function(t){var e=function(s,a){var o=s.toByteArrayUnsigned();if(a<o.length)o=o.slice(o.length-a);else for(;a>o.length;)o.unshift(0);return o},i=this.getX().toBigInteger(),n=this.getY().toBigInteger(),r=e(i,32);return t?n.isEven()?r.unshift(2):r.unshift(3):(r.unshift(4),r=r.concat(e(n,32))),r};oe.decodeFrom=function(t,e){var i=e[0],n=e.length-1,r=e.slice(1,1+n/2),s=e.slice(1+n/2,1+n);r.unshift(0),s.unshift(0);var a=new P(r),o=new P(s);return new oe(t,t.fromBigInteger(a),t.fromBigInteger(o))};oe.decodeFromHex=function(t,e){var i=e.substr(0,2),n=e.length-2,r=e.substr(2,n/2),s=e.substr(2+n/2,n/2),a=new P(r,16),o=new P(s,16);return new oe(t,t.fromBigInteger(a),t.fromBigInteger(o))};oe.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),i=t.y.subtract(this.y),n=i.divide(e),r=n.square().subtract(this.x).subtract(t.x),s=n.multiply(this.x.subtract(r)).subtract(this.y);return new oe(this.curve,r,s)};oe.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var t=this.curve.fromBigInteger(P.valueOf(2)),e=this.curve.fromBigInteger(P.valueOf(3)),i=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=i.square().subtract(this.x.multiply(t)),r=i.multiply(this.x.subtract(n)).subtract(this.y);return new oe(this.curve,n,r)};oe.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(t.signum()==0)return this.curve.getInfinity();var e=t,i=e.multiply(new P("3")),n=this.negate(),r=this,s;for(s=i.bitLength()-2;s>0;--s){r=r.twice();var a=i.testBit(s),o=e.testBit(s);a!=o&&(r=r.add2D(a?this:n))}return r};oe.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),i=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),r=this.curve.getQ(),s=e.multiply(e).mod(r),a=t.multiply(t).multiply(t).add(i.multiply(t)).add(n).mod(r);return s.equals(a)};oe.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};oe.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),i=this.getY().toBigInteger();if(e.compareTo(P.ONE)<0||e.compareTo(t.subtract(P.ONE))>0)throw new Error("x coordinate out of bounds");if(i.compareTo(P.ONE)<0||i.compareTo(t.subtract(P.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var To=function(){var t="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",e='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',i='(?:"'+e+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+t+"|"+i+")","g"),r=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function a(v,h,d){return h?s[h]:String.fromCharCode(parseInt(d,16))}var o=new String(""),l="\\",u={"{":Object,"[":Array},p=Object.hasOwnProperty;return function(v,h){var d=v.match(n),g,f=d[0],y=!1;f==="{"?g={}:f==="["?g=[]:(g=[],y=!0);for(var m,w=[g],b=1-y,_=d.length;b<_;++b){f=d[b];var I;switch(f.charCodeAt(0)){default:I=w[0],I[m||I.length]=+f,m=void 0;break;case 34:if(f=f.substring(1,f.length-1),f.indexOf(l)!==-1&&(f=f.replace(r,a)),I=w[0],!m)if(I instanceof Array)m=I.length;else{m=f||o;break}I[m]=f,m=void 0;break;case 91:I=w[0],w.unshift(I[m||I.length]=[]),m=void 0;break;case 93:w.shift();break;case 102:I=w[0],I[m||I.length]=!1,m=void 0;break;case 110:I=w[0],I[m||I.length]=null,m=void 0;break;case 116:I=w[0],I[m||I.length]=!0,m=void 0;break;case 123:I=w[0],w.unshift(I[m||I.length]={}),m=void 0;break;case 125:w.shift();break}}if(y){if(w.length!==1)throw new Error;g=g[0]}else if(w.length)throw new Error;if(h){var D=function(S,x){var E=S[x];if(E&&typeof E=="object"){var C=null;for(var T in E)if(p.call(E,T)&&E!==S){var R=D(E,T);R!==void 0?E[T]=R:(C||(C=[]),C.push(T))}if(C)for(var M=C.length;--M>=0;)delete E[C[M]]}return h.call(S,x,E)};g=D({"":g},"")}return g}}();(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});c.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if(e.substr(0,1)!="-")e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1),n=i.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var r="",s=0;s<n;s++)r+="f";var a=new P(r,16),o=a.xor(t).add(P.ONE);e=o.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){return Be(t,e)},this.newObject=function(t){var e=c,i=e.asn1,n=i.ASN1Object,r=i.DERBoolean,s=i.DERInteger,a=i.DERBitString,o=i.DEROctetString,l=i.DERNull,u=i.DERObjectIdentifier,p=i.DEREnumerated,v=i.DERUTF8String,h=i.DERNumericString,d=i.DERPrintableString,g=i.DERTeletexString,f=i.DERIA5String,y=i.DERUTCTime,m=i.DERGeneralizedTime,w=i.DERVisibleString,b=i.DERBMPString,_=i.DERSequence,I=i.DERSet,D=i.DERTaggedObject,S=i.ASN1Util.newObject;if(t instanceof i.ASN1Object)return t;var x=Object.keys(t);if(x.length!=1)throw new Error("key of param shall be only one.");var E=x[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+E+":")==-1)throw new Error("undefined key: "+E);if(E=="bool")return new r(t[E]);if(E=="int")return new s(t[E]);if(E=="bitstr")return new a(t[E]);if(E=="octstr")return new o(t[E]);if(E=="null")return new l(t[E]);if(E=="oid")return new u(t[E]);if(E=="enum")return new p(t[E]);if(E=="utf8str")return new v(t[E]);if(E=="numstr")return new h(t[E]);if(E=="prnstr")return new d(t[E]);if(E=="telstr")return new g(t[E]);if(E=="ia5str")return new f(t[E]);if(E=="utctime")return new y(t[E]);if(E=="gentime")return new m(t[E]);if(E=="visstr")return new w(t[E]);if(E=="bmpstr")return new b(t[E]);if(E=="asn1")return new n(t[E]);if(E=="seq"){for(var C=t[E],T=[],R=0;R<C.length;R++){var M=S(C[R]);T.push(M)}return new _({array:T})}if(E=="set"){for(var C=t[E],T=[],R=0;R<C.length;R++){var M=S(C[R]);T.push(M)}return new I({array:T})}if(E=="tag"){var F=t[E];if(Object.prototype.toString.call(F)==="[object Array]"&&F.length==3){var N=S(F[2]);return new D({tag:F[0],explicit:F[1],obj:N})}else return new D(F)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.tohex()}};c.asn1.ASN1Util.oidHexToInt=function(t){for(var r="",e=parseInt(t.substr(0,2),16),i=Math.floor(e/40),n=e%40,r=i+"."+n,s="",a=2;a<t.length;a+=2){var o=parseInt(t.substr(a,2),16),l=("00000000"+o.toString(2)).slice(-8);if(s=s+l.substr(1,7),l.substr(0,1)=="0"){var u=new P(s,2);r=r+"."+u.toString(10),s=""}}return r};c.asn1.ASN1Util.oidIntToHex=function(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},i=function(o){var l="",u=new P(o,10),p=u.toString(2),v=7-p.length%7;v==7&&(v=0);for(var h="",d=0;d<v;d++)h+="0";p=h+p;for(var d=0;d<p.length-1;d+=7){var g=p.substr(d,7);d!=p.length-7&&(g="1"+g),l+=e(parseInt(g,2))}return l};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var n="",r=t.split("."),s=parseInt(r[0])*40+parseInt(r[1]);n+=e(s),r.splice(0,2);for(var a=0;a<r.length;a++)n+=i(r[a]);return n};c.asn1.ASN1Object=function(t){var e=!0,i=null,n="00",r="00",s="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+s.length+",v="+this.hV);var a=this.hV.length/2,o=a.toString(16);if(o.length%2==1&&(o="0"+o),a<128)return o;var l=o.length/2;if(l>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+a.toString(16));var u=128+l;return u.toString(16)+o},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(a){this.params=a},t!=null&&t.tlv!=null&&(this.hTLV=t.tlv,this.isModified=!1)};c.asn1.DERAbstractString=function(t){c.asn1.DERAbstractString.superclass.constructor.call(this);var e=null,i=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=Ki(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"?this.setString(t):typeof t.str<"u"?this.setString(t.str):typeof t.hex<"u"&&this.setStringHex(t.hex))};B(c.asn1.DERAbstractString,c.asn1.ASN1Object);c.asn1.DERAbstractTime=function(t){c.asn1.DERAbstractTime.superclass.constructor.call(this);var e=null,i=null;this.localDateToUTC=function(n){var r=n.getTime()+n.getTimezoneOffset()*6e4,s=new Date(r);return s},this.formatDate=function(n,r,s){var a=this.zeroPadding,o=this.localDateToUTC(n),l=String(o.getFullYear());r=="utc"&&(l=l.substr(2,2));var u=a(String(o.getMonth()+1),2),p=a(String(o.getDate()),2),v=a(String(o.getHours()),2),h=a(String(o.getMinutes()),2),d=a(String(o.getSeconds()),2),g=l+u+p+v+h+d;if(s===!0){var f=o.getMilliseconds();if(f!=0){var y=a(String(f),3);y=y.replace(/[0]+$/,""),g=g+"."+y}}return g+"Z"},this.zeroPadding=function(n,r){return n.length>=r?n:new Array(r-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,r,s,a,o,l){var u=new Date(Date.UTC(n,r-1,s,a,o,l,0));this.setByDate(u)},this.getFreshValueHex=function(){return this.hV}};B(c.asn1.DERAbstractTime,c.asn1.ASN1Object);c.asn1.DERAbstractStructured=function(t){c.asn1.DERAbstractString.superclass.constructor.call(this);var e=null;this.setByASN1ObjectArray=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array=i},this.appendASN1Object=function(i){this.hTLV=null,this.isModified=!0,this.asn1Array.push(i)},this.asn1Array=new Array,typeof t<"u"&&typeof t.array<"u"&&(this.asn1Array=t.array)};B(c.asn1.DERAbstractStructured,c.asn1.ASN1Object);c.asn1.DERBoolean=function(t){c.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",t==!1?this.hTLV="010100":this.hTLV="0101ff"};B(c.asn1.DERBoolean,c.asn1.ASN1Object);c.asn1.DERInteger=function(t){c.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=c.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new P(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.bigint<"u"?this.setByBigInteger(t.bigint):typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};B(c.asn1.DERInteger,c.asn1.ASN1Object);c.asn1.DERBitString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=c.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.tohex()}c.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(i){this.hTLV=null,this.isModified=!0,this.hV=i},this.setUnusedBitsAndHexValue=function(i,n){if(i<0||7<i)throw"unused bits shall be from 0 to 7: u = "+i;var r="0"+i;this.hTLV=null,this.isModified=!0,this.hV=r+n},this.setByBinaryString=function(i){i=i.replace(/0+$/,"");var n=8-i.length%8;n==8&&(n=0),i+="0000000".substr(0,n);for(var r="",s=0;s<i.length-1;s+=8){var a=i.substr(s,8),o=parseInt(a,2).toString(16);o.length==1&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+n+r},this.setByBooleanArray=function(i){for(var n="",r=0;r<i.length;r++)i[r]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(i){for(var n=new Array(i),r=0;r<i;r++)n[r]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t=="string"&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):typeof t.hex<"u"?this.setHexValueIncludingUnusedBits(t.hex):typeof t.bin<"u"?this.setByBinaryString(t.bin):typeof t.array<"u"&&this.setByBooleanArray(t.array))};B(c.asn1.DERBitString,c.asn1.ASN1Object);c.asn1.DEROctetString=function(t){if(t!==void 0&&typeof t.obj<"u"){var e=c.asn1.ASN1Util.newObject(t.obj);t.hex=e.tohex()}c.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"};B(c.asn1.DEROctetString,c.asn1.DERAbstractString);c.asn1.DERNull=function(){c.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};B(c.asn1.DERNull,c.asn1.ASN1Object);c.asn1.DERObjectIdentifier=function(t){c.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var i=Mo(e);if(i==null)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=i},this.setValueName=function(e){var i=c.asn1.x509.OID.name2oid(e);if(i!=="")this.setValueOidString(i);else throw new Error("DERObjectIdentifier oidName undefined: "+e)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){typeof e=="string"?this.setValueNameOrOid(e):e.oid!==void 0?this.setValueNameOrOid(e.oid):e.name!==void 0?this.setValueNameOrOid(e.name):e.hex!==void 0&&this.setValueHex(e.hex)},t!==void 0&&this.setByParam(t)};B(c.asn1.DERObjectIdentifier,c.asn1.ASN1Object);c.asn1.DEREnumerated=function(t){c.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=c.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var i=new P(String(e),10);this.setByBigInteger(i)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},typeof t<"u"&&(typeof t.int<"u"?this.setByInteger(t.int):typeof t=="number"?this.setByInteger(t):typeof t.hex<"u"&&this.setValueHex(t.hex))};B(c.asn1.DEREnumerated,c.asn1.ASN1Object);c.asn1.DERUTF8String=function(t){c.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"};B(c.asn1.DERUTF8String,c.asn1.DERAbstractString);c.asn1.DERNumericString=function(t){c.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"};B(c.asn1.DERNumericString,c.asn1.DERAbstractString);c.asn1.DERPrintableString=function(t){c.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"};B(c.asn1.DERPrintableString,c.asn1.DERAbstractString);c.asn1.DERTeletexString=function(t){c.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"};B(c.asn1.DERTeletexString,c.asn1.DERAbstractString);c.asn1.DERIA5String=function(t){c.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"};B(c.asn1.DERIA5String,c.asn1.DERAbstractString);c.asn1.DERVisibleString=function(t){c.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="1a"};B(c.asn1.DERVisibleString,c.asn1.DERAbstractString);c.asn1.DERBMPString=function(t){c.asn1.DERBMPString.superclass.constructor.call(this,t),this.hT="1e"};B(c.asn1.DERBMPString,c.asn1.DERAbstractString);c.asn1.DERUTCTime=function(t){c.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Qe(e);else throw new Error("malformed string for UTCTime: "+e);else if(e.str!=null)this.hV=Qe(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Qe(this.formatDate(i,"utc",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Qe(this.formatDate(e.date,"utc",n))}else e instanceof Date&&(this.hV=Qe(this.formatDate(e,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},t!=null&&this.setByParam(t)};B(c.asn1.DERUTCTime,c.asn1.DERAbstractTime);c.asn1.DERGeneralizedTime=function(t){c.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.params=t,this.getFreshValueHex=function(){var e=this.params;if(this.params==null&&(e={date:new Date}),typeof e=="string")if(e.match(/^[0-9]{14}Z$/)||e.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Qe(e);else throw new Error("malformed string for GeneralizedTime: "+e);else if(e.str!=null)this.hV=Qe(e.str);else if(e.date==null&&e.millis==!0){var i=new Date;this.hV=Qe(this.formatDate(i,"gen",!0))}else if(e.date!=null&&e.date instanceof Date){var n=e.millis===!0;this.hV=Qe(this.formatDate(e.date,"gen",n))}else e instanceof Date&&(this.hV=Qe(this.formatDate(e,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},t!=null&&this.setByParam(t)};B(c.asn1.DERGeneralizedTime,c.asn1.DERAbstractTime);c.asn1.DERSequence=function(t){c.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var e="",i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e+=n.tohex()}return this.hV=e,this.hV}};B(c.asn1.DERSequence,c.asn1.DERAbstractStructured);c.asn1.DERSet=function(t){c.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,i=0;i<this.asn1Array.length;i++){var n=this.asn1Array[i];e.push(n.tohex())}return this.sortFlag==!0&&e.sort(),this.hV=e.join(""),this.hV},typeof t<"u"&&typeof t.sortflag<"u"&&t.sortflag==!1&&(this.sortFlag=!1)};B(c.asn1.DERSet,c.asn1.DERAbstractStructured);c.asn1.DERTaggedObject=function(t){c.asn1.DERTaggedObject.superclass.constructor.call(this);var e=c.asn1,i=j,n=i.getV,r=i.isASN1HEX,s=e.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(a,o,l){this.params={tag:o,explicit:a,obj:l}},this.getFreshValueHex=function(){var a=this.params;if(a.explicit==null&&(a.explicit=!0),a.tage!=null&&(a.tag=a.tage,a.explicit=!0),a.tagi!=null&&(a.tag=a.tagi,a.explicit=!1),a.str!=null)this.hV=Ki(a.str);else if(a.hex!=null)this.hV=a.hex;else if(a.obj!=null){var o;a.obj instanceof e.ASN1Object?o=a.obj.tohex():typeof a.obj=="object"&&(o=s(a.obj).tohex()),a.explicit?this.hV=o:this.hV=n(o,0)}else throw new Error("str, hex nor obj not specified");return a.tag==null&&(a.tag="a0"),this.hT=a.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(a){this.params=a},t!==void 0&&this.setByParam(t)};B(c.asn1.DERTaggedObject,c.asn1.ASN1Object);var j=new function(){};j.getLblen=function(t,e){if(t.substr(e+2,1)!="8")return 1;var i=parseInt(t.substr(e+3,1));return i==0?-1:0<i&&i<10?i+1:-2};j.getL=function(t,e){var i=j.getLblen(t,e);return i<1?"":t.substr(e+2,i*2)};j.getVblen=function(t,e){var i,n;return i=j.getL(t,e),i==""?-1:(i.substr(0,1)==="8"?n=new P(i.substr(2),16):n=new P(i,16),n.intValue())};j.getVidx=function(t,e){var i=j.getLblen(t,e);return i<0?i:e+(i+1)*2};j.getV=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return t.substr(i,n*2)};j.getTLV=function(t,e){return t.substr(e,2)+j.getL(t,e)+j.getV(t,e)};j.getTLVblen=function(t,e){return 2+j.getLblen(t,e)*2+j.getVblen(t,e)*2};j.getNextSiblingIdx=function(t,e){var i=j.getVidx(t,e),n=j.getVblen(t,e);return i+n*2};j.getChildIdx=function(t,e){var i=j,n=[],r,s,a;r=i.getVidx(t,e),s=i.getVblen(t,e)*2,t.substr(e,2)=="03"&&(r+=2,s-=2),a=0;for(var o=r;a<=s;){var l=i.getTLVblen(t,o);if(a+=l,a<=s&&n.push(o),o+=l,a>=s)break}return n};j.getNthChildIdx=function(t,e,i){var n=j.getChildIdx(t,e);return n[i]};j.getIdxbyList=function(t,e,i,n){var r=j,s,a;return i.length==0?n!==void 0&&t.substr(e,2)!==n?-1:e:(s=i.shift(),a=r.getChildIdx(t,e),s>=a.length?-1:r.getIdxbyList(t,a[s],i,n))};j.getIdxbyListEx=function(t,e,i,n){var r=j,s,a;if(i.length==0)return n!==void 0&&t.substr(e,2)!==n?-1:e;s=i.shift(),a=r.getChildIdx(t,e);for(var o=0,l=0;l<a.length;l++){var u=t.substr(a[l],2);if(typeof s=="number"&&!r.isContextTag(u)&&o==s||typeof s=="string"&&r.isContextTag(u,s))return r.getIdxbyListEx(t,a[l],i,n);r.isContextTag(u)||o++}return-1};j.getTLVbyList=function(t,e,i,n){var r=j,s=r.getIdxbyList(t,e,i,n);return s==-1||s>=t.length?null:r.getTLV(t,s)};j.getTLVbyListEx=function(t,e,i,n){var r=j,s=r.getIdxbyListEx(t,e,i,n);return s==-1?null:r.getTLV(t,s)};j.getVbyList=function(t,e,i,n,r){var s=j,a,o;return a=s.getIdxbyList(t,e,i,n),a==-1||a>=t.length?null:(o=s.getV(t,a),r===!0&&(o=o.substr(2)),o)};j.getVbyListEx=function(t,e,i,n,r){var s=j,a,o,l;return a=s.getIdxbyListEx(t,e,i,n),a==-1?null:(l=s.getV(t,a),t.substr(a,2)=="03"&&r!==!1&&(l=l.substr(2)),l)};j.getInt=function(t,e,i){i==null&&(i=-1);try{var n=t.substr(e,2);if(n!="02"&&n!="03")return i;var r=j.getV(t,e);return n=="02"?parseInt(r,16):jo(r)}catch{return i}};j.getOID=function(t,e,i){i==null&&(i=null);try{if(t.substr(e,2)!="06")return i;var n=j.getV(t,e);return Ji(n)}catch{return i}};j.getOIDName=function(t,e,i){i==null&&(i=null);try{var n=j.getOID(t,e,i);if(n==i)return i;var r=c.asn1.x509.OID.oid2name(n);return r==""?n:r}catch{return i}};j.getString=function(t,e,i){i==null&&(i=null);try{var n=j.getV(t,e);return Ge(n)}catch{return i}};j.hextooidstr=function(t){var e=function(v,h){return v.length>=h?v:new Array(h-v.length+1).join("0")+v},i=[],n=t.substr(0,2),r=parseInt(n,16);i[0]=new String(Math.floor(r/40)),i[1]=new String(r%40);for(var s=t.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(o*2,2),16));for(var l=[],u="",o=0;o<a.length;o++)a[o]&128?u=u+e((a[o]&127).toString(2),7):(u=u+e((a[o]&127).toString(2),7),l.push(new String(parseInt(u,2))),u="");var p=i.join(".");return l.length>0&&(p=p+"."+l.join(".")),p};j.dump=function(t,e,i,n){var r=j,s=r.getV,a=r.dump,o=r.getChildIdx,l=t;t instanceof c.asn1.ASN1Object&&(l=t.tohex());var u=function(S,x){if(S.length<=x*2)return S;var E=S.substr(0,x)+"..(total "+S.length/2+"bytes).."+S.substr(S.length-x,x);return E};e===void 0&&(e={ommit_long_octet:32}),i===void 0&&(i=0),n===void 0&&(n="");var p=e.ommit_long_octet,I=l.substr(i,2);if(I=="01"){var v=s(l,i);return v=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(I=="02"){var v=s(l,i);return n+"INTEGER "+u(v,p)+`
`}if(I=="03"){var v=s(l,i);if(r.isASN1HEX(v.substr(2))){var h=n+`BITSTRING, encapsulates
`;return h=h+a(v.substr(2),e,0,n+"  "),h}else return n+"BITSTRING "+u(v,p)+`
`}if(I=="04"){var v=s(l,i);if(r.isASN1HEX(v)){var h=n+`OCTETSTRING, encapsulates
`;return h=h+a(v,e,0,n+"  "),h}else return n+"OCTETSTRING "+u(v,p)+`
`}if(I=="05")return n+`NULL
`;if(I=="06"){var d=s(l,i),g=c.asn1.ASN1Util.oidHexToInt(d),f=c.asn1.x509.OID.oid2name(g),y=g.replace(/\./g," ");return f!=""?n+"ObjectIdentifier "+f+" ("+y+`)
`:n+"ObjectIdentifier ("+y+`)
`}if(I=="0a")return n+"ENUMERATED "+parseInt(s(l,i))+`
`;if(I=="0c")return n+"UTF8String '"+fe(s(l,i))+`'
`;if(I=="13")return n+"PrintableString '"+fe(s(l,i))+`'
`;if(I=="14")return n+"TeletexString '"+fe(s(l,i))+`'
`;if(I=="16")return n+"IA5String '"+fe(s(l,i))+`'
`;if(I=="17")return n+"UTCTime "+fe(s(l,i))+`
`;if(I=="18")return n+"GeneralizedTime "+fe(s(l,i))+`
`;if(I=="1a")return n+"VisualString '"+fe(s(l,i))+`'
`;if(I=="1e")return n+"BMPString '"+Rr(s(l,i))+`'
`;if(I=="30"){if(l.substr(i,4)=="3000")return n+`SEQUENCE {}
`;var h=n+`SEQUENCE
`,m=o(l,i),w=e;if((m.length==2||m.length==3)&&l.substr(m[0],2)=="06"&&l.substr(m[m.length-1],2)=="04"){var f=r.oidname(s(l,m[0])),b=JSON.parse(JSON.stringify(e));b.x509ExtName=f,w=b}for(var _=0;_<m.length;_++)h=h+a(l,w,m[_],n+"  ");return h}if(I=="31"){for(var h=n+`SET
`,m=o(l,i),_=0;_<m.length;_++)h=h+a(l,e,m[_],n+"  ");return h}var I=parseInt(I,16);if(I&128){var D=I&31;if(I&32){for(var h=n+"["+D+`]
`,m=o(l,i),_=0;_<m.length;_++)h=h+a(l,e,m[_],n+"  ");return h}else{var v=s(l,i);if(j.isASN1HEX(v)){var h=n+"["+D+`]
`;return h=h+a(v,e,0,n+"  "),h}else(v.substr(0,8)=="68747470"||e.x509ExtName==="subjectAltName"&&D==2)&&(v=fe(v));var h=n+"["+D+"] "+v+`
`;return h}}return n+"UNKNOWN("+I+") "+s(l,i)+`
`};j.parse=function(t){var e=j,i=e.parse,n=e.isASN1HEX,r=e.getV,s=e.getTLV,a=e.getChildIdx,o=c.asn1,l=o.ASN1Util.oidHexToInt,u=o.x509.OID.oid2name,p=fe,v=Rr,h=xh,d={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},g=function(E){for(var C=[],T=a(E,0),R=0;R<T.length;R++){var M=T[R],F=s(E,M),N=i(F);C.push(N)}return C},f=t.substr(0,2),y={},m=r(t,0);if(f=="01")return t=="0101ff"?{bool:!0}:{bool:!1};if(f=="02")return{int:{hex:m}};if(f=="03")try{if(m.substr(0,2)!="00")throw"not encap";var w=m.substr(2);if(!n(w))throw"not encap";return{bitstr:{obj:i(w)}}}catch{var b=null;return m.length<=10&&(b=zo(m)),b==null?{bitstr:{hex:m}}:{bitstr:{bin:b}}}else if(f=="04")try{if(!n(m))throw"not encap";return{octstr:{obj:i(m)}}}catch{return{octstr:{hex:m}}}else{if(f=="05")return{null:""};if(f=="06"){var _=l(m),I=u(_);return I==""?{oid:_}:{oid:I}}else{if(f=="0a")return m.length>4?{enum:{hex:m}}:{enum:parseInt(m,16)};if(f=="30"||f=="31")return y[d[f]]=g(t),y;if(f=="14"){var D=h(m);return y[d[f]]={str:D},y}else if(f=="1e"){var D=v(m);return y[d[f]]={str:D},y}else if(":0c:12:13:16:17:18:1a:".indexOf(f)!=-1){var D=p(m);return y[d[f]]={str:D},y}else if(f.match(/^8[0-9]$/)){var D=p(m);return D==null|D==""?{tag:{tag:f,explicit:!1,hex:m}}:D.match(/[\x00-\x1F\x7F-\x9F]/)!=null||D.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:f,explicit:!1,hex:m}}:{tag:{tag:f,explicit:!1,str:D}}}else if(f.match(/^a[0-9]$/))try{if(!n(m))throw new Error("not encap");return{tag:{tag:f,explicit:!0,obj:i(m)}}}catch{return{tag:{tag:f,explicit:!0,hex:m}}}else{var S=new c.asn1.ASN1Object;S.hV=m;var x=S.getLengthHexFromValue();return{asn1:{tlv:f+x+m}}}}}};j.isContextTag=function(t,e){t=t.toLowerCase();var i,n;try{i=parseInt(t,16)}catch{return-1}if(e===void 0)return(i&192)==128;try{var r=e.match(/^\[[0-9]+\]$/);return r==null||(n=parseInt(e.substr(1,e.length-1),10),n>31)?!1:(i&192)==128&&(i&31)==n}catch{return!1}};j.isASN1HEX=function(t){var e=j;if(t.length%2==1)return!1;var i=e.getVblen(t,0),n=t.substr(0,2),r=e.getL(t,0),s=t.length-n.length-r.length;return s==i*2};j.checkStrictDER=function(t,e,i,n,r){var s=j;if(i===void 0){if(typeof t!="string")throw new Error("not hex string");if(t=t.toLowerCase(),!c.lang.String.isHex(t))throw new Error("not hex string");i=t.length,n=t.length/2,n<128?r=1:r=Math.ceil(n.toString(16))+1}var a=s.getL(t,e);if(a.length>r*2)throw new Error("L of TLV too long: idx="+e);var o=s.getVblen(t,e);if(o>n)throw new Error("value of L too long than hex: idx="+e);var l=s.getTLV(t,e),u=l.length-2-s.getL(t,e).length;if(u!==o*2)throw new Error("V string length and L's value not the same:"+u+"/"+o*2);if(e===0&&t.length!=l.length)throw new Error("total length and TLV length unmatch:"+t.length+"!="+l.length);var p=t.substr(e,2);if(p==="02"){var v=s.getVidx(t,e);if(t.substr(v,2)=="00"&&t.charCodeAt(v+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(p,16)&32){for(var h=s.getVblen(t,e),d=0,g=s.getChildIdx(t,e),f=0;f<g.length;f++){var y=s.getTLV(t,g[f]);d+=y.length,s.checkStrictDER(t,g[f],i,n,r)}if(h*2!=d)throw new Error("sum of children's TLV length and L unmatch: "+h*2+"!="+d)}};j.oidname=function(t){var e=c.asn1;c.lang.String.isHex(t)&&(t=e.ASN1Util.oidHexToInt(t));var i=e.x509.OID.oid2name(t);return i===""&&(i=t),i};(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});(typeof c.asn1.x509>"u"||!c.asn1.x509)&&(c.asn1.x509={});c.asn1.x509.Certificate=function(t){c.asn1.x509.Certificate.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.x509,a=s.TBSCertificate,o=s.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=this.params,u=l.sigalg;l.sigalg.name!=null&&(u=l.sigalg.name);var p=l.tbsobj.tohex(),v=new c.crypto.Signature({alg:u});v.init(l.cakey),v.updateHex(p),l.sighex=v.sign()},this.getPEM=function(){return Be(this.tohex(),"CERTIFICATE")},this.tohex=function(){var l=this.params;if((l.tbsobj==null||l.tbsobj==null)&&(l.tbsobj=new a(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new o({name:l.sigalg})),u.push(new n({hex:"00"+l.sighex}));var p=new r({array:u});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};B(c.asn1.x509.Certificate,c.asn1.ASN1Object);c.asn1.x509.TBSCertificate=function(t){c.asn1.x509.TBSCertificate.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.x509,r=i.DERTaggedObject,s=i.DERInteger,a=i.DERSequence,o=n.AlgorithmIdentifier,l=n.Time,u=n.X500Name,p=n.Extensions,v=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(h){this.params=h},this.tohex=function(){var h=[],d=this.params;if(d.version!=null||d.version!=1){var g=2;d.version!=null&&(g=d.version-1);var f=new r({obj:new s({int:g})});h.push(f)}h.push(new s(d.serial)),h.push(new o({name:d.sigalg})),h.push(new u(d.issuer)),h.push(new a({array:[new l(d.notbefore),new l(d.notafter)]})),h.push(new u(d.subject)),h.push(new v(ae.getKey(d.sbjpubkey))),d.ext!==void 0&&d.ext.length>0&&h.push(new r({tag:"a3",obj:new p(d.ext)}));var y=new c.asn1.DERSequence({array:h});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.TBSCertificate,c.asn1.ASN1Object);c.asn1.x509.Extensions=function(t){c.asn1.x509.Extensions.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.DERSequence,r=i.x509;this.aParam=[],this.setByParam=function(s){this.aParam=s},this.tohex=function(){for(var s=[],a=0;a<this.aParam.length;a++){var o=this.aParam[a],l=o.extname,u=null;if(o.extn!=null)u=new r.PrivateExtension(o);else if(l=="subjectKeyIdentifier")u=new r.SubjectKeyIdentifier(o);else if(l=="keyUsage")u=new r.KeyUsage(o);else if(l=="subjectAltName")u=new r.SubjectAltName(o);else if(l=="issuerAltName")u=new r.IssuerAltName(o);else if(l=="basicConstraints")u=new r.BasicConstraints(o);else if(l=="nameConstraints")u=new r.NameConstraints(o);else if(l=="cRLDistributionPoints")u=new r.CRLDistributionPoints(o);else if(l=="certificatePolicies")u=new r.CertificatePolicies(o);else if(l=="authorityKeyIdentifier")u=new r.AuthorityKeyIdentifier(o);else if(l=="extKeyUsage")u=new r.ExtKeyUsage(o);else if(l=="authorityInfoAccess")u=new r.AuthorityInfoAccess(o);else if(l=="cRLNumber")u=new r.CRLNumber(o);else if(l=="cRLReason")u=new r.CRLReason(o);else if(l=="ocspNonce")u=new r.OCSPNonce(o);else if(l=="ocspNoCheck")u=new r.OCSPNoCheck(o);else if(l=="adobeTimeStamp")u=new r.AdobeTimeStamp(o);else if(l=="subjectDirectoryAttributes")u=new r.SubjectDirectoryAttributes(o);else throw new Error("extension not supported:"+JSON.stringify(o));u!=null&&s.push(u)}var p=new n({array:s});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.x509.Extensions,c.asn1.ASN1Object);c.asn1.x509.Extension=function(t){c.asn1.x509.Extension.superclass.constructor.call(this);var e=null,i=c,n=i.asn1,r=n.DERObjectIdentifier,s=n.DEROctetString,a=n.DERBitString,o=n.DERBoolean,l=n.DERSequence;this.tohex=function(){var u=new r({oid:this.oid}),p=new s({hex:this.getExtnValueHex()}),v=new Array;v.push(u),this.critical&&v.push(new o),v.push(p);var h=new l({array:v});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,t!==void 0&&t.critical!==void 0&&(this.critical=t.critical)};B(c.asn1.x509.Extension,c.asn1.ASN1Object);c.asn1.x509.KeyUsage=function(t){c.asn1.x509.KeyUsage.superclass.constructor.call(this,t);var e=Error,i={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new c.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new e("parameter not yet set");if(n.names!=null)return Hi(n.names,i);if(n.bin!=null)return n.bin;throw new e("parameter not set properly")},this.oid="2.5.29.15",t!==void 0&&(this.params=t)};B(c.asn1.x509.KeyUsage,c.asn1.x509.Extension);c.asn1.x509.BasicConstraints=function(t){c.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);var e=c.asn1,i=e.DERBoolean,n=e.DERInteger,r=e.DERSequence,s=!1,a=-1;this.getExtnValueHex=function(){var o=new Array;this.cA&&o.push(new i),this.pathLen>-1&&o.push(new n({int:this.pathLen}));var l=new r({array:o});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,t!==void 0&&(t.cA!==void 0&&(this.cA=t.cA),t.pathLen!==void 0&&(this.pathLen=t.pathLen))};B(c.asn1.x509.BasicConstraints,c.asn1.x509.Extension);c.asn1.x509.CRLDistributionPoints=function(t){c.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(r){for(var s=[],a=0;a<r.length;a++)if(r[a]instanceof c.asn1.ASN1Object)s.push(r[a]);else{var o=new n.DistributionPoint(r[a]);s.push(o)}this.asn1ExtnValue=new i.DERSequence({array:s})},this.setByOneURI=function(r){var s=new n.DistributionPoint({fulluri:r});this.setByDPArray([s])},this.oid="2.5.29.31",t!==void 0&&(t.array!==void 0?this.setByDPArray(t.array):t.uri!==void 0&&this.setByOneURI(t.uri))};B(c.asn1.x509.CRLDistributionPoints,c.asn1.x509.Extension);c.asn1.x509.DistributionPoint=function(t){c.asn1.x509.DistributionPoint.superclass.constructor.call(this);var e=null,i=c,n=i.asn1,r=n.x509.DistributionPointName;this.tohex=function(){var s=new n.DERSequence;if(this.asn1DP!=null){var a=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});s.appendASN1Object(a)}return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.dpobj!==void 0?this.asn1DP=t.dpobj:t.dpname!==void 0?this.asn1DP=new r(t.dpname):t.fulluri!==void 0&&(this.asn1DP=new r({full:[{uri:t.fulluri}]})))};B(c.asn1.x509.DistributionPoint,c.asn1.ASN1Object);c.asn1.x509.DistributionPointName=function(t){c.asn1.x509.DistributionPointName.superclass.constructor.call(this);var e=null,i=null,n=null,r=null,s=c,a=s.asn1,o=a.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new o({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0)if(a.x509.GeneralNames.prototype.isPrototypeOf(t))this.type="full",this.tag="a0",this.asn1V=t;else if(t.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new a.x509.GeneralNames(t.full);else throw new Error("This class supports GeneralNames only as argument")};B(c.asn1.x509.DistributionPointName,c.asn1.ASN1Object);c.asn1.x509.CertificatePolicies=function(t){c.asn1.x509.CertificatePolicies.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.x509,r=i.DERSequence,s=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new s(this.params.array[o]));var l=new r({array:a});return this.asn1ExtnValue=l,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",t!==void 0&&(this.params=t)};B(c.asn1.x509.CertificatePolicies,c.asn1.x509.Extension);c.asn1.x509.PolicyInformation=function(t){c.asn1.x509.PolicyInformation.superclass.constructor.call(this,t);var e=c.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var s=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var a=[],o=0;o<this.params.array.length;o++)a.push(new r(this.params.array[o]));a.length>0&&s.push(new i({array:a}))}var l=new i({array:s});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(c.asn1.x509.PolicyInformation,c.asn1.ASN1Object);c.asn1.x509.PolicyQualifierInfo=function(t){c.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,t);var e=c.asn1,i=e.DERSequence,n=e.DERIA5String,r=e.DERObjectIdentifier,s=e.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var a=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return a.tohex()}if(this.params.unotice!=null){var a=new i({array:[new r({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]});return a.tohex()}},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(c.asn1.x509.PolicyQualifierInfo,c.asn1.ASN1Object);c.asn1.x509.UserNotice=function(t){c.asn1.x509.UserNotice.superclass.constructor.call(this,t);var e=c.asn1.DERSequence,i=c.asn1.DERInteger,n=c.asn1.x509.DisplayText,r=c.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var s=[];this.params.noticeref!==void 0&&s.push(new r(this.params.noticeref)),this.params.exptext!==void 0&&s.push(new n(this.params.exptext));var a=new e({array:s});return a.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(c.asn1.x509.UserNotice,c.asn1.ASN1Object);c.asn1.x509.NoticeReference=function(t){c.asn1.x509.NoticeReference.superclass.constructor.call(this,t);var e=c.asn1.DERSequence,i=c.asn1.DERInteger,n=c.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var r=[];if(this.params.org!==void 0&&r.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var s=[],a=this.params.noticenum,o=0;o<a.length;o++)s.push(new i(a[o]));r.push(new e({array:s}))}if(r.length==0)throw new Error("parameter is empty");var l=new e({array:r});return l.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(this.params=t)};B(c.asn1.x509.NoticeReference,c.asn1.ASN1Object);c.asn1.x509.DisplayText=function(t){c.asn1.x509.DisplayText.superclass.constructor.call(this,t),this.hT="0c",t!==void 0&&(t.type==="ia5"?this.hT="16":t.type==="vis"?this.hT="1a":t.type==="bmp"&&(this.hT="1e"))};B(c.asn1.x509.DisplayText,c.asn1.DERAbstractString);c.asn1.x509.NameConstraints=function(t){c.asn1.x509.NameConstraints.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.x509,r=i.ASN1Util.newObject,s=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var a=this.params,o=[];if(a.permit!=null&&a.permit.length!=null){for(var l=[],u=0;u<a.permit.length;u++)l.push(new s(a.permit[u]));o.push({tag:{tagi:"a0",obj:{seq:l}}})}if(a.exclude!=null&&a.exclude.length!=null){for(var p=[],u=0;u<a.exclude.length;u++)p.push(new s(a.exclude[u]));o.push({tag:{tagi:"a1",obj:{seq:p}}})}return this.asn1ExtnValue=r({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",t!==void 0&&(this.params=t)};B(c.asn1.x509.NameConstraints,c.asn1.x509.Extension);c.asn1.x509.GeneralSubtree=function(t){c.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var e=c.asn1,i=e.x509,n=i.GeneralName,r=e.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=[new n(s)];s.min!=null&&a.push({tag:{tagi:"80",obj:{int:s.min}}}),s.max!=null&&a.push({tag:{tagi:"81",obj:{int:s.max}}});var o=r({seq:a});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.GeneralSubtree,c.asn1.ASN1Object);c.asn1.x509.ExtKeyUsage=function(t){c.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t);var e=c,i=e.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new i.DERSequence;for(var r=0;r<n.length;r++){var s=new i.DERObjectIdentifier(n[r]);this.asn1ExtnValue.appendASN1Object(s)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",t!==void 0&&t.array!==void 0&&this.setPurposeArray(t.array)};B(c.asn1.x509.ExtKeyUsage,c.asn1.x509.Extension);c.asn1.x509.AuthorityKeyIdentifier=function(t){c.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.DERTaggedObject,r=i.x509.GeneralNames,s=e.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var a=new Array;this.asn1KID&&a.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&a.push(new n({explicit:!1,tag:"a1",obj:new r([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&a.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var o=new i.DERSequence({array:a});return this.asn1ExtnValue=o,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(a){if(a.str!==void 0||a.hex!==void 0)this.asn1KID=new c.asn1.DEROctetString(a);else if(typeof a=="object"&&c.crypto.Util.isKey(a)||typeof a=="string"&&a.indexOf("BEGIN ")!=-1){var o=a;typeof a=="string"&&(o=ae.getKey(a));var l=ae.getKeyID(o);this.asn1KID=new c.asn1.DEROctetString({hex:l})}},this.setCertIssuerByParam=function(a){a.str!==void 0||a.ldapstr!==void 0||a.hex!==void 0||a.certsubject!==void 0||a.certissuer!==void 0?this.asn1CertIssuer=new c.asn1.x509.X500Name(a):typeof a=="string"&&a.indexOf("BEGIN ")!=-1&&a.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new c.asn1.x509.X500Name({certissuer:a}))},this.setCertSNByParam=function(a){if(a.str!==void 0||a.bigint!==void 0||a.hex!==void 0)this.asn1CertSN=new c.asn1.DERInteger(a);else if(typeof a=="string"&&a.indexOf("BEGIN ")!=-1&&a.indexOf("CERTIFICATE")){var o=new Y;o.readCertPEM(a);var l=o.getSerialNumberHex();this.asn1CertSN=new c.asn1.DERInteger({hex:l})}},this.oid="2.5.29.35",t!==void 0&&(t.kid!==void 0&&this.setKIDByParam(t.kid),t.issuer!==void 0&&this.setCertIssuerByParam(t.issuer),t.sn!==void 0&&this.setCertSNByParam(t.sn),t.issuersn!==void 0&&typeof t.issuersn=="string"&&t.issuersn.indexOf("BEGIN ")!=-1&&t.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(t.issuersn),this.setCertIssuerByParam(t.issuersn)))};B(c.asn1.x509.AuthorityKeyIdentifier,c.asn1.x509.Extension);c.asn1.x509.SubjectKeyIdentifier=function(t){c.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(r){if(r.str!==void 0||r.hex!==void 0)this.asn1KID=new n(r);else if(typeof r=="object"&&c.crypto.Util.isKey(r)||typeof r=="string"&&r.indexOf("BEGIN")!=-1){var s=r;typeof r=="string"&&(s=ae.getKey(r));var a=ae.getKeyID(s);this.asn1KID=new c.asn1.DEROctetString({hex:a})}},this.oid="2.5.29.14",t!==void 0&&t.kid!==void 0&&this.setKIDByParam(t.kid)};B(c.asn1.x509.SubjectKeyIdentifier,c.asn1.x509.Extension);c.asn1.x509.AuthorityInfoAccess=function(t){c.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(e){for(var i=new Array,n=c,r=n.asn1,s=r.DERSequence,a=r.DERObjectIdentifier,o=r.x509.GeneralName,l=0;l<e.length;l++){var u,p=e[l];if(p.ocsp!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.1"}),new o({uri:p.ocsp})]});else if(p.caissuer!==void 0)u=new s({array:[new a({oid:"1.3.6.1.5.5.7.48.2"}),new o({uri:p.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(p));i.push(u)}this.asn1ExtnValue=new s({array:i})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",t!==void 0&&t.array!==void 0&&this.setAccessDescriptionArray(t.array)};B(c.asn1.x509.AuthorityInfoAccess,c.asn1.x509.Extension);c.asn1.x509.SubjectAltName=function(t){c.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new c.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};B(c.asn1.x509.SubjectAltName,c.asn1.x509.Extension);c.asn1.x509.IssuerAltName=function(t){c.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(e){this.asn1ExtnValue=new c.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",t!==void 0&&t.array!==void 0&&this.setNameArray(t.array)};B(c.asn1.x509.IssuerAltName,c.asn1.x509.Extension);c.asn1.x509.SubjectDirectoryAttributes=function(t){c.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,t);var e=c.asn1,i=e.DERSequence,n=e.ASN1Util.newObject,r=e.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var s=[],a=0;a<this.params.array.length;a++){var o=this.params.array[a],l={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(o.attr=="dateOfBirth")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={gentime:o.str};else if(o.attr=="placeOfBirth")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={utf8str:o.str};else if(o.attr=="gender")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfCitizenship")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else if(o.attr=="countryOfResidence")l.seq[0].oid=r(o.attr),l.seq[1].set[0]={prnstr:o.str};else throw new Error("unsupported attribute: "+o.attr);s.push(new n(l))}var u=new i({array:s});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",t!==void 0&&(this.params=t)};B(c.asn1.x509.SubjectDirectoryAttributes,c.asn1.x509.Extension);c.asn1.x509.PrivateExtension=function(t){c.asn1.x509.PrivateExtension.superclass.constructor.call(this,t);var e=c,i=e.lang.String.isHex,n=e.asn1,r=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.oid=r(a.extname),this.params=a},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var a=this.params.extn;if(typeof a=="string"&&i(a))return a;if(typeof a=="object")try{return s(a).tohex()}catch{}throw new Error("unsupported extn value")},t!=null&&this.setByParam(t)};B(c.asn1.x509.PrivateExtension,c.asn1.x509.Extension);c.asn1.x509.CRL=function(t){c.asn1.x509.CRL.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.DERSequence,r=i.DERBitString,s=i.x509,a=s.AlgorithmIdentifier,o=s.TBSCertList;this.params=void 0,this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),u=new c.crypto.Signature({alg:this.params.sigalg});u.init(this.params.cakey),u.updateHex(l);var p=u.sign();this.params.sighex=p},this.getPEM=function(){return Be(this.tohex(),"X509 CRL")},this.tohex=function(){var l=this.params;if(l.tbsobj==null&&(l.tbsobj=new o(l)),l.sighex==null&&l.cakey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or cakey parameter not defined");var u=[];u.push(l.tbsobj),u.push(new a({name:l.sigalg})),u.push(new r({hex:"00"+l.sighex}));var p=new n({array:u});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&(this.params=t)};B(c.asn1.x509.CRL,c.asn1.ASN1Object);c.asn1.x509.TBSCertList=function(t){c.asn1.x509.TBSCertList.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.DERTaggedObject,a=i.DERObjectIdentifier,o=i.x509,l=o.AlgorithmIdentifier,u=o.Time,p=o.Extensions,v=o.X500Name;this.params=null,this.setByParam=function(h){this.params=h},this.getRevCertSequence=function(){for(var h=[],d=this.params.revcert,g=0;g<d.length;g++){var f=[new n(d[g].sn),new u(d[g].date)];d[g].ext!=null&&f.push(new p(d[g].ext)),h.push(new r({array:f}))}return new r({array:h})},this.tohex=function(){var h=[],d=this.params;if(d.version!=null){var g=d.version-1,f=new n({int:g});h.push(f)}if(h.push(new l({name:d.sigalg})),h.push(new v(d.issuer)),h.push(new u(d.thisupdate)),d.nextupdate!=null&&h.push(new u(d.nextupdate)),d.revcert!=null&&h.push(this.getRevCertSequence()),d.ext!=null){var y=new p(d.ext);h.push(new s({tag:"a0",explicit:!0,obj:y}))}var m=new r({array:h});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.TBSCertList,c.asn1.ASN1Object);c.asn1.x509.CRLEntry=function(t){c.asn1.x509.CRLEntry.superclass.constructor.call(this);var e=null,i=null,n=c,r=n.asn1;this.setCertSerial=function(s){this.sn=new r.DERInteger(s)},this.setRevocationDate=function(s){this.time=new r.x509.Time(s)},this.tohex=function(){var s=new r.DERSequence({array:[this.sn,this.time]});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.time!==void 0&&this.setRevocationDate(t.time),t.sn!==void 0&&this.setCertSerial(t.sn))};B(c.asn1.x509.CRLEntry,c.asn1.ASN1Object);c.asn1.x509.CRLNumber=function(t){c.asn1.x509.CRLNumber.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new c.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",t!=null&&(this.params=t)};B(c.asn1.x509.CRLNumber,c.asn1.x509.Extension);c.asn1.x509.CRLReason=function(t){c.asn1.x509.CRLReason.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new c.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",t!=null&&(this.params=t)};B(c.asn1.x509.CRLReason,c.asn1.x509.Extension);c.asn1.x509.OCSPNonce=function(t){c.asn1.x509.OCSPNonce.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new c.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",t!=null&&(this.params=t)};B(c.asn1.x509.OCSPNonce,c.asn1.x509.Extension);c.asn1.x509.OCSPNoCheck=function(t){c.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,t),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new c.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",t!=null&&(this.params=t)};B(c.asn1.x509.OCSPNoCheck,c.asn1.x509.Extension);c.asn1.x509.AdobeTimeStamp=function(t){c.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,t);var e=c,i=e.asn1,n=i.DERInteger,r=i.DERBoolean,s=i.DERSequence,a=i.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var o=this.params,l=[new n(1)];return l.push(new a({uri:o.uri})),o.reqauth!=null&&l.push(new r(o.reqauth)),this.asn1ExtnValue=new s({array:l}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",t!==void 0&&this.setByParam(t)};B(c.asn1.x509.AdobeTimeStamp,c.asn1.x509.Extension);c.asn1.x509.X500Name=function(t){c.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=c,i=e.asn1,n=i.x509,r=n.RDN,s=Fe;this.setByString=function(a,o){o!==void 0&&(this.sRule=o);var l=a.split("/");l.shift();for(var u=[],p=0;p<l.length;p++)if(l[p].match(/^[^=]+=.+$/))u.push(l[p]);else{var v=u.length-1;u[v]=u[v]+"/"+l[p]}for(var p=0;p<u.length;p++)this.asn1Array.push(new r({str:u[p],rule:this.sRule}))},this.setByLdapString=function(a,o){o!==void 0&&(this.sRule=o);var l=n.X500Name.ldapToCompat(a);this.setByString(l,o)},this.setByObject=function(a,o){o!==void 0&&(this.sRule=o);for(var l in a)if(a.hasOwnProperty(l)){var u=new r({str:l+"="+a[l],rule:this.sRule});this.asn1Array?this.asn1Array.push(u):this.asn1Array=[u]}},this.setByParam=function(a){if(a.rule!==void 0&&(this.sRule=a.rule),a.array!==void 0)this.paramArray=a.array;else if(a.str!==void 0)this.setByString(a.str);else if(a.ldapstr!==void 0)this.setByLdapString(a.ldapstr);else if(a.hex!==void 0)this.hTLV=a.hex;else if(a.certissuer!==void 0){var o=new Y;o.readCertPEM(a.certissuer),this.hTLV=o.getIssuerHex()}else if(a.certsubject!==void 0){var o=new Y;o.readCertPEM(a.certsubject),this.hTLV=o.getSubjectHex()}else typeof a=="object"&&a.certsubject===void 0&&a.certissuer===void 0&&this.setByObject(a)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var a=0;a<this.paramArray.length;a++){var o={array:this.paramArray[a]};this.sRule!="utf8"&&(o.rule=this.sRule);var l=new r(o);this.asn1Array.push(l)}var u=new i.DERSequence({array:this.asn1Array});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.X500Name,c.asn1.ASN1Object);c.asn1.x509.X500Name.compatToLDAP=function(t){if(t.substr(0,1)!=="/")throw"malformed input";var e="";t=t.substr(1);var i=t.split("/");return i.reverse(),i=i.map(function(n){return n.replace(/,/,"\\,")}),i.join(",")};c.asn1.x509.X500Name.onelineToLDAP=function(t){return c.asn1.x509.X500Name.compatToLDAP(t)};c.asn1.x509.X500Name.ldapToCompat=function(t){for(var e=t.split(","),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var a=n.pop(),o=(a+","+s).replace(/\\,/g,",");n.push(o),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}return n=n.map(function(l){return l.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};c.asn1.x509.X500Name.ldapToOneline=function(t){return c.asn1.x509.X500Name.ldapToCompat(t)};c.asn1.x509.RDN=function(t){c.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var e=c.asn1.x509.AttributeTypeAndValue;this.setByParam=function(i){i.rule!==void 0&&(this.sRule=i.rule),i.str!==void 0&&this.addByMultiValuedString(i.str),i.array!==void 0&&(this.paramArray=i.array)},this.addByString=function(i){this.asn1Array.push(new c.asn1.x509.AttributeTypeAndValue({str:i,rule:this.sRule}))},this.addByMultiValuedString=function(i){for(var n=c.asn1.x509.RDN.parseString(i),r=0;r<n.length;r++)this.addByString(n[r])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var i=0;i<this.paramArray.length;i++){var n=this.paramArray[i];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var r=new e(n);this.asn1Array.push(r)}var s=new c.asn1.DERSet({array:this.asn1Array});return this.TLV=s.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.RDN,c.asn1.ASN1Object);c.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),i=!1,n=[],r=0;e.length>0;r++){var s=e.shift();if(i===!0){var a=n.pop(),o=(a+"+"+s).replace(/\\\+/g,"+");n.push(o),i=!1}else n.push(s);s.substr(-1,1)==="\\"&&(i=!0)}for(var l=!1,u=[],r=0;n.length>0;r++){var s=n.shift();if(l===!0){var p=u.pop();if(s.match(/"$/)){var o=(p+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(o),l=!1}else u.push(p+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(l=!0)}return u};c.asn1.x509.AttributeTypeAndValue=function(t){c.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var e=c,i=e.asn1,n=i.DERSequence,r=i.DERUTF8String,s=i.DERPrintableString,a=i.DERTeletexString,o=i.DERIA5String,l=i.DERVisibleString,u=i.DERBMPString,p=e.lang.String.isMail,v=e.lang.String.isPrintable;this.setByParam=function(h){if(h.rule!==void 0&&(this.sRule=h.rule),h.ds!==void 0&&(this.dsType=h.ds),h.value===void 0&&h.str!==void 0){var d=h.str,g=d.match(/^([^=]+)=(.+)$/);if(g)this.sType=g[1],this.sValue=g[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=h.type,this.sValue=h.value},this.setByString=function(h,d){d!==void 0&&(this.sRule=d);var g=h.match(/^([^=]+)=(.+)$/);if(g)this.setByAttrTypeAndValueStr(g[1],g[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var h=this.sType,d=this.sValue,g=this.sRule;return g==="prn"?h=="CN"&&p(d)?"ia5":v(d)?"prn":"utf8":g==="utf8"?h=="CN"&&p(d)?"ia5":h=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(h,d,g){g!==void 0&&(this.sRule=g),this.sType=h,this.sValue=d},this.getValueObj=function(h,d){if(h=="utf8")return new r({str:d});if(h=="prn")return new s({str:d});if(h=="tel")return new a({str:d});if(h=="ia5")return new o({str:d});if(h=="vis")return new l({str:d});if(h=="bmp")return new u({str:d});throw new Error("unsupported directory string type: type="+h+" value="+d)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var h=c.asn1.x509.OID.atype2obj(this.sType),d=this.getValueObj(this.dsType,this.sValue),g=new n({array:[h,d]});return this.TLV=g.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.AttributeTypeAndValue,c.asn1.ASN1Object);c.asn1.x509.SubjectPublicKeyInfo=function(t){c.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var e=null,i=null,n=c,r=n.asn1,s=r.DERInteger,a=r.DERBitString,o=r.DERObjectIdentifier,l=r.DERSequence,u=r.ASN1Util.newObject,p=r.x509,v=p.AlgorithmIdentifier,h=n.crypto,d=h.ECDSA,g=h.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var f=new l({array:[this.asn1AlgId,this.asn1SubjPKey]});return f},this.tohex=function(){var f=this.getASN1Object();return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(f){try{if(f instanceof K){var y=u({seq:[{int:{bigint:f.n}},{int:{int:f.e}}]}),m=y.tohex();this.asn1AlgId=new v({name:"rsaEncryption"}),this.asn1SubjPKey=new a({hex:"00"+m})}}catch{}try{if(f instanceof c.crypto.ECDSA){var w=new o({name:f.curveName});this.asn1AlgId=new v({name:"ecPublicKey",asn1params:w}),this.asn1SubjPKey=new a({hex:"00"+f.pubKeyHex})}}catch{}try{if(f instanceof c.crypto.DSA){var w=new u({seq:[{int:{bigint:f.p}},{int:{bigint:f.q}},{int:{bigint:f.g}}]});this.asn1AlgId=new v({name:"dsa",asn1params:w});var b=new s({bigint:f.y});this.asn1SubjPKey=new a({hex:"00"+b.tohex()})}}catch{}},t!==void 0&&this.setPubKey(t)};B(c.asn1.x509.SubjectPublicKeyInfo,c.asn1.ASN1Object);c.asn1.x509.Time=function(t){c.asn1.x509.Time.superclass.constructor.call(this);var e=null,i=null,n=c,r=n.asn1,s=r.DERUTCTime,a=r.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(o){this.timeParams=o},this.setByParam=function(o){this.params=o},this.getType=function(o){return o.match(/^[0-9]{12}Z$/)?"utc":o.match(/^[0-9]{14}Z$/)?"gen":o.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":o.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var o=this.params,l=null;if(typeof o=="string"&&(o={str:o}),o!=null&&o.str&&(o.type==null||o.type==null)&&(o.type=this.getType(o.str)),o!=null&&o.str?(o.type=="utc"&&(l=new s(o.str)),o.type=="gen"&&(l=new a(o.str))):this.type=="gen"?l=new a:l=new s,l==null)throw new Error("wrong setting for Time");return this.TLV=l.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};c.asn1.x509.Time_bak=function(t){c.asn1.x509.Time_bak.superclass.constructor.call(this);var e=null,i=null,n=c,r=n.asn1,s=r.DERUTCTime,a=r.DERGeneralizedTime;this.setTimeParams=function(o){this.timeParams=o},this.tohex=function(){var o=null;return this.timeParams!=null?this.type=="utc"?o=new s(this.timeParams):o=new a(this.timeParams):this.type=="utc"?o=new s:o=new a,this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",t!==void 0&&(t.type!==void 0?this.type=t.type:t.str!==void 0&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)};B(c.asn1.x509.Time,c.asn1.ASN1Object);c.asn1.x509.AlgorithmIdentifier=function(t){c.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var e=c,i=e.asn1,n=i.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var s=null;for(var a in n)a===this.nameAlg&&(s=n[a]);if(s!==null)return this.hTLV=s,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=i.x509.OID.name2obj(this.nameAlg));var o=[this.asn1Alg];this.asn1Params!==null&&o.push(this.asn1Params);var l=new i.DERSequence({array:o});return this.hTLV=l.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&(t.name!==void 0&&(this.nameAlg=t.name),t.asn1params!==void 0&&(this.asn1Params=t.asn1params),t.paramempty!==void 0&&(this.paramEmpty=t.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var r=this.nameAlg.toLowerCase();r.substr(-7,7)!=="withdsa"&&r.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new i.DERNull)}};B(c.asn1.x509.AlgorithmIdentifier,c.asn1.ASN1Object);c.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};c.asn1.x509.GeneralName=function(t){c.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},i=c,n=i.asn1,r=n.x509,s=r.X500Name,a=r.OtherName,o=n.DERIA5String,l=n.DERPrintableString,u=n.DEROctetString,p=n.DERTaggedObject,v=n.ASN1Object,h=Error;this.params=null,this.setByParam=function(d){this.params=d},this.tohex=function(){var d=this.params,g,y,f,y=!1;if(d.other!==void 0)g="a0",f=new a(d.other);else if(d.rfc822!==void 0)g="81",f=new o({str:d.rfc822});else if(d.dns!==void 0)g="82",f=new o({str:d.dns});else if(d.dn!==void 0)g="a4",y=!0,typeof d.dn=="string"?f=new s({str:d.dn}):d.dn instanceof c.asn1.x509.X500Name?f=d.dn:f=new s(d.dn);else if(d.ldapdn!==void 0)g="a4",y=!0,f=new s({ldapstr:d.ldapdn});else if(d.certissuer!==void 0||d.certsubj!==void 0){g="a4",y=!0;var m,w,b=null;if(d.certsubj!==void 0?(m=!1,w=d.certsubj):(m=!0,w=d.certissuer),w.match(/^[0-9A-Fa-f]+$/)&&b==w,w.indexOf("-----BEGIN ")!=-1&&(b=Fe(w)),b==null)throw new Error("certsubj/certissuer not cert");var _=new Y;_.hex=b;var I;m?I=_.getIssuerHex():I=_.getSubjectHex(),f=new v,f.hTLV=I}else if(d.uri!==void 0)g="86",f=new o({str:d.uri});else if(d.ip!==void 0){g="87";var D,S=d.ip;try{if(S.match(/^[0-9a-f]+$/)){var x=S.length;if(x==8||x==16||x==32||x==64)D=S;else throw"err"}else D=Pr(S)}catch(C){throw new h("malformed IP address: "+d.ip+":"+C.message)}f=new u({hex:D})}else throw new h("improper params");var E=new p({tag:g,explicit:y,obj:f});return E.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.GeneralName,c.asn1.ASN1Object);c.asn1.x509.GeneralNames=function(t){c.asn1.x509.GeneralNames.superclass.constructor.call(this);var e=null,i=c,n=i.asn1;this.setByParamArray=function(r){for(var s=0;s<r.length;s++){var a=new n.x509.GeneralName(r[s]);this.asn1Array.push(a)}},this.tohex=function(){var r=new n.DERSequence({array:this.asn1Array});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof t<"u"&&this.setByParamArray(t)};B(c.asn1.x509.GeneralNames,c.asn1.ASN1Object);c.asn1.x509.OtherName=function(t){c.asn1.x509.OtherName.superclass.constructor.call(this);var e=null,i=null,n=c,r=n.asn1,s=r.DERObjectIdentifier,a=r.DERSequence,o=r.ASN1Util.newObject;this.params=null,this.setByParam=function(l){this.params=l},this.tohex=function(){var l=this.params;if(l.oid==null||l.value==null)throw new Error("oid or value not specified");var u=new s({oid:l.oid}),p=o({tag:{tag:"a0",explicit:!0,obj:l.value}}),v=new a({array:[u,p]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.x509.OtherName,c.asn1.ASN1Object);c.asn1.x509.OID=new function(){var t=c.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(e){if(typeof this.objCache[e]<"u")return this.objCache[e];if(typeof this.name2oidList[e]>"u")throw"Name of ObjectIdentifier not defined: "+e;var i=this.name2oidList[e],n=new t({oid:i});return this.objCache[e]=n,n},this.atype2obj=function(e){if(this.objCache[e]!==void 0)return this.objCache[e];var i;if(e.match(/^\d+\.\d+\.[0-9.]+$/))i=e;else if(this.atype2oidList[e]!==void 0)i=this.atype2oidList[e];else if(this.name2oidList[e]!==void 0)i=this.name2oidList[e];else throw new Error("AttributeType name undefined: "+e);var n=new t({oid:i});return this.objCache[e]=n,n},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var i in e)this.name2oidList[i]=e[i]},this.checkOIDs=function(e){try{var i=Object.keys(e);return i.length==0?!1:(i.map(function(n,r,s){var a=this[n];if(!a.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},e),!0)}catch{return!1}}};c.asn1.x509.OID.oid2name=function(t){var e=c.asn1.x509.OID.name2oidList;for(var i in e)if(e[i]==t)return i;return""};c.asn1.x509.OID.oid2atype=function(t){var e=c.asn1.x509.OID.atype2oidList;for(var i in e)if(e[i]==t)return i;return t};c.asn1.x509.OID.name2oid=function(t){if(t.match(/^[0-9.]+$/))return t;var e=c.asn1.x509.OID.name2oidList;return e[t]===void 0?"":e[t]};c.asn1.x509.X509Util={};c.asn1.x509.X509Util.newCertPEM=function(t){var e=c.asn1.x509,i=e.TBSCertificate,n=e.Certificate,r=new n(t);return r.getPEM()};(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});(typeof c.asn1.cms>"u"||!c.asn1.cms)&&(c.asn1.cms={});c.asn1.cms.Attribute=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.DERSet,a=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(o){this.params=o},this.getValueArray=function(){throw new e("not yet implemented abstract")},this.tohex=function(){var o=new a({oid:this.typeOid}),l=new s({array:this.getValueArray()}),u=new r({array:[o,l]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()}};B(c.asn1.cms.Attribute,c.asn1.ASN1Object);c.asn1.cms.ContentType=function(t){var e=c,i=e.asn1;i.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new i.DERObjectIdentifier(this.params.type);return[n]},t!=null&&this.setByParam(t)};B(c.asn1.cms.ContentType,c.asn1.cms.Attribute);c.asn1.cms.MessageDigest=function(t){var e=c,i=e.asn1,n=i.DEROctetString,r=i.cms;r.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var s=new n(this.params);return[s]},t!=null&&this.setByParam(t)};B(c.asn1.cms.MessageDigest,c.asn1.cms.Attribute);c.asn1.cms.SigningTime=function(t){var e=c,i=e.asn1;i.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new i.x509.Time(this.params);return[n]},t!=null&&this.setByParam(t)};B(c.asn1.cms.SigningTime,c.asn1.cms.Attribute);c.asn1.cms.SigningCertificate=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.cms,a=s.ESSCertID,o=i.crypto;s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var l=this.params.array,u=[],p=0;p<l.length;p++){var v=l[p];t.hasis==!1&&typeof v=="string"&&(v.indexOf("-----BEGIN")!=-1||j.isASN1HEX(v))&&(v={cert:v}),v.hasis!=!1&&t.hasis==!1&&(v.hasis=!1),u.push(new a(v))}var h=new r({array:u}),d=new r({array:[h]});return[d]},t!=null&&this.setByParam(t)};B(c.asn1.cms.SigningCertificate,c.asn1.cms.Attribute);c.asn1.cms.ESSCertID=function(t){c.asn1.cms.ESSCertID.superclass.constructor.call(this);var e=Error,i=c,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,a=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(o,l){if(o.hash!=null)return o.hash;if(typeof o=="string"&&o.indexOf("-----BEGIN")==-1&&!j.isASN1HEX(o))return o;var u;if(typeof o=="string")u=o;else if(o.cert!=null)u=o.cert;else throw new e("hash nor cert unspecified");var p;u.indexOf("-----BEGIN")!=-1?p=Fe(u):p=u,typeof o=="string"&&(o.indexOf("-----BEGIN")!=-1?p=Fe(o):j.isASN1HEX(o)&&(p=o));var v;if(o.alg!=null)v=o.alg;else if(l!=null)v=l;else throw new e("hash alg unspecified");return i.crypto.Util.hashHex(p,v)},this.tohex=function(){var o=this.params,l=this.getCertHash(o,"sha1"),u=[];u.push(new r({hex:l})),(typeof o=="string"&&o.indexOf("-----BEGIN")!=-1||o.cert!=null&&o.hasis!=!1||o.issuer!=null&&o.serial!=null)&&u.push(new a(o));var p=new s({array:u});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.ESSCertID,c.asn1.ASN1Object);c.asn1.cms.SigningCertificateV2=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.x509,a=n.cms,o=a.ESSCertIDv2,l=i.crypto;a.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new e("parameter 'array' not specified");for(var u=this.params.array,p=[],v=0;v<u.length;v++){var h=u[v];(t.alg!=null||t.hasis==!1)&&typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1||j.isASN1HEX(h))&&(h={cert:h}),h.alg==null&&t.alg!=null&&(h.alg=t.alg),h.hasis!=!1&&t.hasis==!1&&(h.hasis=!1),p.push(new o(h))}var d=new r({array:p}),g=new r({array:[d]});return[g]},t!=null&&this.setByParam(t)};B(c.asn1.cms.SigningCertificateV2,c.asn1.cms.Attribute);c.asn1.cms.ESSCertIDv2=function(t){c.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var e=Error,i=c,n=i.asn1,r=n.DEROctetString,s=n.DERSequence,a=n.cms.IssuerSerial,o=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var l=this.params,u=this.getCertHash(l,"sha256"),p=[];l.alg!=null&&l.alg!="sha256"&&p.push(new o({name:l.alg})),p.push(new r({hex:u})),(typeof l=="string"&&l.indexOf("-----BEGIN")!=-1||l.cert!=null&&l.hasis!=!1||l.issuer!=null&&l.serial!=null)&&p.push(new a(l));var v=new s({array:p});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.ESSCertIDv2,c.asn1.cms.ESSCertID);c.asn1.cms.IssuerSerial=function(t){var e=Error,i=c,n=i.asn1,r=n.DERInteger,s=n.DERSequence,a=n.cms,o=n.x509,l=o.GeneralNames,u=Y;a.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(p){this.params=p},this.tohex=function(){var p=this.params,v,h;if(typeof p=="string"&&p.indexOf("-----BEGIN")!=-1||p.cert!=null){var d;p.cert!=null?d=p.cert:d=p;var g=new u;g.readCertPEM(d),v=g.getIssuer(),h={hex:g.getSerialNumberHex()}}else if(p.issuer!=null&&p.serial)v=p.issuer,h=p.serial;else throw new e("cert or issuer and serial parameter not specified");var f=new l([{dn:v}]),y=new r(h),m=new s({array:[f,y]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.IssuerSerial,c.asn1.ASN1Object);c.asn1.cms.SignerIdentifier=function(t){var e=c,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,a=s.IssuerAndSerialNumber,o=s.SubjectKeyIdentifier,l=i.x509,u=l.X500Name,p=Y,v=Error;s.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(h.type=="isssn"){var d=new a(h);return d.tohex()}else if(h.type=="skid"){var g=new o(h);return g.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.SignerIdentifier,c.asn1.ASN1Object);c.asn1.cms.IssuerAndSerialNumber=function(t){var e=c,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.cms,a=i.x509,o=a.X500Name,l=Y,u=Error;s.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params,v,h;if(typeof p=="string"&&p.indexOf("-----BEGIN")!=-1||p.cert!=null){var d;p.cert!=null?d=p.cert:d=p;var g=new l;g.readCertPEM(d),v=g.getIssuer(),h={hex:g.getSerialNumberHex()}}else if(p.issuer!=null&&p.serial)v=p.issuer,h=p.serial;else throw new u("cert or issuer and serial parameter not specified");var f=new o(v),y=new n(h),m=new r({array:[f,y]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(p){this.params=p},t!=null&&this.setByParam(t)};B(c.asn1.cms.IssuerAndSerialNumber,c.asn1.ASN1Object);c.asn1.cms.SubjectKeyIdentifier=function(t){var e=c,i=e.asn1,n=i.DERInteger,r=i.DERSequence,s=i.ASN1Util.newObject,a=i.cms,o=a.IssuerAndSerialName,l=a.SubjectKeyIdentifier,u=i.x509,p=u.X500Name,v=Y,h=Error;a.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var d=this.params;if(d.cert==null&&d.skid==null)throw new h("property cert nor skid undefined");var g;if(d.cert!=null){var f=new v(d.cert),y=f.getExtSubjectKeyIdentifier();g=y.kid.hex}else d.skid!=null&&(g=d.skid);var m=s({tag:{tage:"a0",obj:{octstr:{hex:g}}}});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.SubjectKeyIdentifier,c.asn1.ASN1Object);c.asn1.cms.AttributeList=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSet,s=n.cms;s.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(this.hTLV!=null)return this.hTLV;var o=!0;a.sortflag!=null&&(o=a.sortflag);for(var l=a.array,u=[],p=0;p<l.length;p++){var v=l[p],h=v.attr;if(h=="contentType")u.push(new s.ContentType(v));else if(h=="messageDigest")u.push(new s.MessageDigest(v));else if(h=="signingTime")u.push(new s.SigningTime(v));else if(h=="signingCertificate")u.push(new s.SigningCertificate(v));else if(h=="signingCertificateV2")u.push(new s.SigningCertificateV2(v));else if(h=="signaturePolicyIdentifier")u.push(new c.asn1.cades.SignaturePolicyIdentifier(v));else if(h=="signatureTimeStamp"||h=="timeStampToken")u.push(new c.asn1.cades.SignatureTimeStamp(v));else throw new e("unknown attr: "+h)}var d=new r({array:u,sortflag:o});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.AttributeList,c.asn1.ASN1Object);c.asn1.cms.SignerInfo=function(t){var e=Error,i=c,n=i.asn1,r=n.DERInteger,s=n.DEROctetString,a=n.DERSequence,o=n.DERTaggedObject,l=n.cms,u=l.SignerIdentifier,p=l.AttributeList,v=l.ContentType,h=l.EncapsulatedContentInfo,d=l.MessageDigest,g=l.SignedData,f=n.x509,y=f.AlgorithmIdentifier,m=i.crypto,w=ae;l.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var b=this.params,_=b.sigalg,I=new p(b.sattrs).tohex(),D=w.getKey(b.signkey),S=new m.Signature({alg:_});S.init(D),S.updateHex(I);var x=S.sign();b.sighex=x},this.tohex=function(){var b=this.params,_=[];if(_.push(new r({int:b.version})),_.push(new u(b.id)),_.push(new y({name:b.hashalg})),b.sattrs!=null){var I=new p(b.sattrs);try{_.push(new o({tag:"a0",explicit:!1,obj:I}))}catch(S){throw new e("si sattr error: "+S)}}if(b.sigalgfield!=null?_.push(new y({name:b.sigalgfield})):_.push(new y({name:b.sigalg})),b.sighex==null&&b.signkey!=null&&this.sign(),_.push(new s({hex:b.sighex})),b.uattrs!=null){var I=new p(b.uattrs);try{_.push(new o({tag:"a1",explicit:!1,obj:I}))}catch(x){throw new e("si uattr error: "+x)}}var D=new a({array:_});return D.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.SignerInfo,c.asn1.ASN1Object);c.asn1.cms.EncapsulatedContentInfo=function(t){var e=c,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,a=i.DEROctetString,o=i.cms;o.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,u=[];if(u.push(new s(l.type)),l.content!=null&&(l.content.hex!=null||l.content.str!=null)&&l.isDetached!=!0){var p=new a(l.content),v=new n({tag:"a0",explicit:!0,obj:p});u.push(v)}var h=new r({array:u});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!=null&&this.setByParam(t)};B(c.asn1.cms.EncapsulatedContentInfo,c.asn1.ASN1Object);c.asn1.cms.ContentInfo=function(t){var e=c,i=e.asn1,n=i.DERTaggedObject,r=i.DERSequence,s=i.DERObjectIdentifier,a=i.x509,o=a.OID.name2obj;c.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var l=this.params,u=[];u.push(new s(l.type));var p=new n({tag:"a0",explicit:!0,obj:l.obj});u.push(p);var v=new r({array:u});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(l){this.params=l},t!=null&&this.setByParam(t)};B(c.asn1.cms.ContentInfo,c.asn1.ASN1Object);c.asn1.cms.SignedData=function(t){var e=Error,i=c,n=i.asn1,r=n.ASN1Object,s=n.DERInteger,a=n.DERSet,o=n.DERSequence,l=n.DERTaggedObject,u=n.cms,p=u.EncapsulatedContentInfo,v=u.SignerInfo,h=u.ContentInfo,d=u.CertificateSet,g=u.RevocationInfoChoices,f=n.x509,y=f.AlgorithmIdentifier;c.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var m=this.params;this._setDigestAlgs(m),this._setContentTypeByEContent(m),this._setMessageDigestByEContent(m),this._setSignerInfoVersion(m),this._setSignedDataVersion(m)},this._setDigestAlgs=function(m){for(var w={},b=m.sinfos,_=0;_<b.length;_++){var I=b[_];w[I.hashalg]=1}m.hashalgs=Object.keys(w).sort()},this._setContentTypeByEContent=function(m){for(var w=m.econtent.type,b=m.sinfos,_=0;_<b.length;_++){var I=b[_],D=this._getAttrParamByName(I,"contentType");D.type=w}},this._setMessageDigestByEContent=function(m){var w=m.econtent,b=m.econtent.type,_=w.content.hex;_==null&&w.type=="data"&&w.content.str!=null&&(_=lt(w.content.str));for(var I=m.sinfos,D=0;D<I.length;D++){var S=I[D],x=S.hashalg,E=this._getAttrParamByName(S,"messageDigest"),C=c.crypto.Util.hashHex(_,x);E.hex=C}},this._getAttrParamByName=function(m,w){for(var b=m.sattrs.array,_=0;_<b.length;_++)if(b[_].attr==w)return b[_]},this._setSignerInfoVersion=function(m){for(var w=m.sinfos,b=0;b<w.length;b++){var _=w[b],I=1;_.id.type=="skid"&&(I=3),_.version=I}},this._setSignedDataVersion=function(m){var w=this._getSignedDataVersion(m);m.version=w},this._getSignedDataVersion=function(m){if(m.revinfos!=null)for(var w=m.revinfos,b=0;b<w.length;b++){var _=w[b];if(_.ocsp!=null)return 5}for(var I=m.sinfos,b=0;b<I.length;b++){var D=m.sinfos[b];if(D.version==3)return 3}return m.econtent.type!="data"?3:1},this.tohex=function(){var m=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),m.fixed!=!0&&this.checkAndFixParam();var w=[];w.push(new s({int:m.version}));for(var b=[],_=0;_<m.hashalgs.length;_++){var I=m.hashalgs[_];b.push(new y({name:I}))}w.push(new a({array:b})),w.push(new p(m.econtent)),m.certs!=null&&w.push(new d(m.certs)),m.revinfos!=null&&w.push(new g(m.revinfos));for(var D=[],_=0;_<m.sinfos.length;_++){var S=m.sinfos[_];D.push(new v(S))}w.push(new a({array:D}));var x=new o({array:w});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var m=new h({type:"signed-data",obj:this});return m},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.SignedData,c.asn1.ASN1Object);c.asn1.cms.CertificateSet=function(t){c.asn1.cms.CertificateSet.superclass.constructor.call(this);var e=Error,i=c.asn1,n=i.DERTaggedObject,r=i.DERSet,s=i.ASN1Object;this.params=null,this.tohex=function(){var a=this.params,o=[],l;if(a instanceof Array)l=a;else if(a.array!=null)l=a.array;else throw new e("cert array not specified");for(var u=0;u<l.length;u++){var p=l[u],v=Fe(p),h=new s;h.hTLV=v,o.push(h)}var d={array:o};a.sortflag==!1&&(d.sortflag=!1);var g=new r(d),f=new n({tag:"a0",explicit:!1,obj:g});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.CertificateSet,c.asn1.ASN1Object);c.asn1.cms.RevocationInfoChoices=function(t){c.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var i=[],n=0;n<e.length;n++)i.push(new c.asn1.cms.RevocationInfoChoice(e[n]));var r=c.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:i}}});return r.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.RevocationInfoChoices,c.asn1.ASN1Object);c.asn1.cms.RevocationInfoChoice=function(t){c.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.crl!=null&&typeof e.crl=="string"){var i=e.crl;return e.crl.indexOf("-----BEGIN")!=-1&&(i=Fe(e.crl)),i}else if(e.ocsp!=null){var n=c.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new c.asn1.cms.OtherRevocationFormat(e)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.RevocationInfoChoice,c.asn1.ASN1Object);c.asn1.cms.OtherRevocationFormat=function(t){c.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var e=Error,i=c,n=i.asn1,r=n.ASN1Util.newObject,s=i.lang.String.isHex;this.params=null,this.tohex=function(){var a=this.params;if(a.ocsp==null)throw new e("property ocsp not specified");if(!s(a.ocsp)||!j.isASN1HEX(a.ocsp))throw new e("ocsp value not ASN.1 hex string");var o=r({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:a.ocsp}}]});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cms.OtherRevocationFormat,c.asn1.ASN1Object);c.asn1.cms.CMSUtil=new function(){};c.asn1.cms.CMSUtil.newSignedData=function(t){return new c.asn1.cms.SignedData(t)};c.asn1.cms.CMSUtil.verifySignedData=function(t){var e=c,i=e.asn1,n=i.cms,r=n.SignerInfo,s=n.SignedData,a=n.SigningTime,o=n.SigningCertificate,l=n.SigningCertificateV2,u=i.cades,p=u.SignaturePolicyIdentifier,v=e.lang.String.isHex,h=j,d=h.getVbyList,g=h.getTLVbyList,f=h.getIdxbyList,y=h.getChildIdx,m=h.getTLV,w=h.oidname,b=e.crypto.Util.hashHex;t.cms===void 0&&v(t.cms);var _=t.cms,I=function(N,O){for(var k,$=3;$<6;$++)if(k=f(N,0,[1,0,$]),k!==void 0){var U=N.substr(k,2);U==="a0"&&(O.certsIdx=k),U==="a1"&&(O.revinfosIdx=k),U==="31"&&(O.signerinfosIdx=k)}},D=function(N,O){var k=O.signerinfosIdx;if(k!==void 0){var $=y(N,k);O.signerInfoIdxList=$;for(var U=0;U<$.length;U++){var J=$[U],ee={idx:J};S(N,ee),O.signerInfos.push(ee)}}},S=function(N,O){var k=O.idx;O.signerid_issuer1=g(N,k,[1,0],"30"),O.signerid_serial1=d(N,k,[1,1],"02"),O.hashalg=w(d(N,k,[2,0],"06"));var $=f(N,k,[3],"a0");O.idxSignedAttrs=$,x(N,O,$);var U=y(N,k),J=U.length;if(J<6)throw"malformed SignerInfo";O.sigalg=w(d(N,k,[J-2,0],"06")),O.sigval=d(N,k,[J-1],"04")},x=function(N,O,k){var $=y(N,k);O.signedAttrIdxList=$;for(var U=0;U<$.length;U++){var J=$[U],ee=d(N,J,[0],"06"),te;ee==="2a864886f70d010905"?(te=fe(d(N,J,[1,0])),O.saSigningTime=te):ee==="2a864886f70d010904"&&(te=d(N,J,[1,0],"04"),O.saMessageDigest=te)}},E=function(N,O){if(d(N,0,[0],"06")!=="2a864886f70d010702")return O;O.cmsType="signedData",O.econtent=d(N,0,[1,0,2,1,0]),I(N,O),O.signerInfos=[],D(N,O)},C=function(N,O){for(var k=O.parse.signerInfos,$=k.length,U=!0,J=0;J<$;J++){var ee=k[J];R(N,O,ee,J),ee.isValid||(U=!1)}O.isValid=U},T=function(N,O,k,$){var U=O.parse.certsIdx,J;if(O.certs===void 0){J=[],O.certkeys=[];for(var ee=y(N,U),te=0;te<ee.length;te++){var _e=m(N,ee[te]),pe=new Y;pe.readCertHex(_e),J[te]=pe,O.certkeys[te]=pe.getPublicKey()}O.certs=J}else J=O.certs;O.cccc=J.length,O.cccci=ee.length;for(var te=0;te<J.length;te++){var Ce=pe.getIssuerHex(),me=pe.getSerialNumberHex();k.signerid_issuer1===Ce&&k.signerid_serial1===me&&(k.certkey_idx=te)}},R=function(N,O,k,$){k.verifyDetail={};var U=k.verifyDetail,J=O.parse.econtent,ee=k.hashalg,te=k.saMessageDigest;U.validMessageDigest=!1,b(J,ee)===te&&(U.validMessageDigest=!0),T(N,O,k,$),U.validSignatureValue=!1;var _e=k.sigalg,pe="31"+m(N,k.idxSignedAttrs).substr(2);k.signedattrshex=pe;var Ce=O.certs[k.certkey_idx].getPublicKey(),me=new c.crypto.Signature({alg:_e});me.init(Ce),me.updateHex(pe);var Ae=me.verify(k.sigval);U.validSignatureValue_isValid=Ae,Ae===!0&&(U.validSignatureValue=!0),k.isValid=!1,U.validMessageDigest&&U.validSignatureValue&&(k.isValid=!0)},M=function(){},F={isValid:!1,parse:{}};return E(_,F.parse),C(_,F),F};c.asn1.cms.CMSParser=function(){var t=Error,e=Y,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getTLVbyList,l=n.getTLVbyListEx,u=n.getVbyList,p=n.getVbyListEx,v=n.getChildIdx;this.getCMSSignedData=function(h){var d=o(h,0,[1,0]),g=this.getSignedData(d);return g},this.getSignedData=function(h){var d=v(h,0),g={},f=r(h,d[0]),y=parseInt(f,16);g.version=y;var m=s(h,d[1]);g.hashalgs=this.getHashAlgArray(m);var w=s(h,d[2]);g.econtent=this.getEContent(w);var b=l(h,0,["[0]"]);b!=null&&(g.certs=this.getCertificateSet(b));var _=l(h,0,["[1]"]);_!=null;var I=l(h,0,[3]);return g.sinfos=this.getSignerInfos(I),g},this.getHashAlgArray=function(h){for(var d=v(h,0),g=new e,f=[],y=0;y<d.length;y++){var m=s(h,d[y]),w=g.getAlgorithmIdentifierName(m);f.push(w)}return f},this.getEContent=function(h){var d={},g=u(h,0,[0]),f=u(h,0,[1,0]);return d.type=c.asn1.x509.OID.oid2name(j.hextooidstr(g)),d.content={hex:f},d},this.getSignerInfos=function(h){for(var d=[],g=v(h,0),f=0;f<g.length;f++){var y=s(h,g[f]),m=this.getSignerInfo(y);d.push(m)}return d},this.getSignerInfo=function(h){var d={},g=v(h,0),f=n.getInt(h,g[0],-1);f!=-1&&(d.version=f);var y=s(h,g[1]),m=this.getIssuerAndSerialNumber(y);d.id=m;var w=s(h,g[2]),b=i.getAlgorithmIdentifierName(w);d.hashalg=b;var _=l(h,0,["[0]"]);if(_!=null){var I=this.getAttributeList(_);d.sattrs=I}var D=l(h,0,[3]),S=i.getAlgorithmIdentifierName(D);d.sigalg=S;var x=p(h,0,[4]);d.sighex=x;var E=l(h,0,["[1]"]);if(E!=null){var C=this.getAttributeList(E);d.uattrs=C}return d},this.getSignerIdentifier=function(h){if(h.substr(0,2)=="30")return this.getIssuerAndSerialNumber(h);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(h){var d={type:"isssn"},g=v(h,0),f=s(h,g[0]);d.issuer=i.getX500Name(f);var y=r(h,g[1]);return d.serial={hex:y},d},this.getAttributeList=function(h){for(var d=[],g=v(h,0),f=0;f<g.length;f++){var y=s(h,g[f]),m=this.getAttribute(y);d.push(m)}return{array:d}},this.getAttribute=function(h){var d={},g=v(h,0),f=n.getOID(h,g[0]),y=c.asn1.x509.OID.oid2name(f);d.attr=y;var m=s(h,g[1]),w=v(m,0);if(w.length==1)d.valhex=s(m,w[0]);else{for(var b=[],_=0;_<w.length;_++)b.push(s(m,w[_]));d.valhex=b}return y=="contentType"?this.setContentType(d):y=="messageDigest"?this.setMessageDigest(d):y=="signingTime"?this.setSigningTime(d):y=="signingCertificate"?this.setSigningCertificate(d):y=="signingCertificateV2"?this.setSigningCertificateV2(d):y=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(d),d},this.setContentType=function(h){var d=n.getOIDName(h.valhex,0,null);d!=null&&(h.type=d,delete h.valhex)},this.setSigningTime=function(h){var d=r(h.valhex,0),g=fe(d);h.str=g,delete h.valhex},this.setMessageDigest=function(h){var d=r(h.valhex,0);h.hex=d,delete h.valhex},this.setSigningCertificate=function(h){var d=v(h.valhex,0);if(d.length>0){for(var g=s(h.valhex,d[0]),f=v(g,0),y=[],m=0;m<f.length;m++){var w=s(g,f[m]),b=this.getESSCertID(w);y.push(b)}h.array=y}if(d.length>1){var _=s(h.valhex,d[1]);h.polhex=_}delete h.valhex},this.setSignaturePolicyIdentifier=function(h){var d=v(h.valhex,0);if(d.length>0){var g=n.getOID(h.valhex,d[0]);h.oid=g}if(d.length>1){var f=new e,y=v(h.valhex,d[1]),m=s(h.valhex,y[0]),w=f.getAlgorithmIdentifierName(m);h.alg=w;var b=r(h.valhex,y[1]);h.hash=b}delete h.valhex},this.setSigningCertificateV2=function(h){var d=v(h.valhex,0);if(d.length>0){for(var g=s(h.valhex,d[0]),f=v(g,0),y=[],m=0;m<f.length;m++){var w=s(g,f[m]),b=this.getESSCertIDv2(w);y.push(b)}h.array=y}if(d.length>1){var _=s(h.valhex,d[1]);h.polhex=_}delete h.valhex},this.getESSCertID=function(h){var d={},g=v(h,0);if(g.length>0){var f=r(h,g[0]);d.hash=f}if(g.length>1){var y=s(h,g[1]),m=this.getIssuerSerial(y);m.serial!=null&&(d.serial=m.serial),m.issuer!=null&&(d.issuer=m.issuer)}return d},this.getESSCertIDv2=function(h){var d={},g=v(h,0);if(g.length<1||3<g.length)throw new t("wrong number of elements");var f=0;if(h.substr(g[0],2)=="30"){var y=s(h,g[0]);d.alg=i.getAlgorithmIdentifierName(y),f++}else d.alg="sha256";var m=r(h,g[f]);if(d.hash=m,g.length>f+1){var w=s(h,g[f+1]),b=this.getIssuerSerial(w);d.issuer=b.issuer,d.serial=b.serial}return d},this.getIssuerSerial=function(h){var d={},g=v(h,0),f=s(h,g[0]),y=i.getGeneralNames(f),m=y[0].dn;d.issuer=m;var w=r(h,g[1]);return d.serial={hex:w},d},this.getCertificateSet=function(h){for(var d=v(h,0),g=[],f=0;f<d.length;f++){var y=s(h,d[f]);if(y.substr(0,2)=="30"){var m=Be(y,"CERTIFICATE");g.push(m)}}return{array:g,sortflag:!1}}};(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});(typeof c.asn1.tsp>"u"||!c.asn1.tsp)&&(c.asn1.tsp={});c.asn1.tsp.TimeStampToken=function(t){var e=c,i=e.asn1,n=i.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var r=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=r.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.TimeStampToken,c.asn1.cms.SignedData);c.asn1.tsp.TSTInfo=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.DERInteger,a=n.DERBoolean,o=n.DERGeneralizedTime,l=n.DERObjectIdentifier,u=n.DERTaggedObject,p=n.tsp,v=p.MessageImprint,h=p.Accuracy,d=n.x509.X500Name,g=n.x509.GeneralName;if(p.TSTInfo.superclass.constructor.call(this),this.dVersion=new s({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var f=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(f.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(f.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(f.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");f.push(this.dGenTime),this.dAccuracy!=null&&f.push(this.dAccuracy),this.dOrdering!=null&&f.push(this.dOrdering),this.dNonce!=null&&f.push(this.dNonce),this.dTsa!=null&&f.push(this.dTsa);var y=new r({array:f});return this.hTLV=y.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0){if(typeof t.policy=="string"){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new l({oid:t.policy})}t.messageImprint!==void 0&&(this.dMessageImprint=new v(t.messageImprint)),t.serial!==void 0&&(this.dSerial=new s(t.serial)),t.genTime!==void 0&&(this.dGenTime=new o(t.genTime)),t.accuracy!==void 0&&(this.dAccuracy=new h(t.accuracy)),t.ordering!==void 0&&t.ordering==!0&&(this.dOrdering=new a),t.nonce!==void 0&&(this.dNonce=new s(t.nonce)),t.tsa!==void 0&&(this.dTsa=new u({tag:"a0",explicit:!0,obj:new g({dn:t.tsa})}))}};B(c.asn1.tsp.TSTInfo,c.asn1.ASN1Object);c.asn1.tsp.Accuracy=function(t){var e=c,i=e.asn1,n=i.ASN1Util.newObject;i.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var r=this.params,s=[];return r.seconds!=null&&typeof r.seconds=="number"&&s.push({int:r.seconds}),r.millis!=null&&typeof r.millis=="number"&&s.push({tag:{tagi:"80",obj:{int:r.millis}}}),r.micros!=null&&typeof r.micros=="number"&&s.push({tag:{tagi:"81",obj:{int:r.micros}}}),n({seq:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.Accuracy,c.asn1.ASN1Object);c.asn1.tsp.MessageImprint=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.DEROctetString,s=i.x509,a=s.AlgorithmIdentifier;i.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=new a({name:o.alg}),u=new r({hex:o.hash}),p=new n({array:[l,u]});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.tsp.MessageImprint,c.asn1.ASN1Object);c.asn1.tsp.TimeStampReq=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.DERInteger,s=i.DERBoolean,a=i.ASN1Object,o=i.DERObjectIdentifier,l=i.tsp,u=l.MessageImprint;l.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params,v=[];v.push(new r({int:1})),p.messageImprint instanceof c.asn1.ASN1Object?v.push(p.messageImprint):v.push(new u(p.messageImprint)),p.policy!=null&&v.push(new o(p.policy)),p.nonce!=null&&v.push(new r(p.nonce)),p.certreq==!0&&v.push(new s);var h=new n({array:v});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.TimeStampReq,c.asn1.ASN1Object);c.asn1.tsp.TimeStampResp=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.ASN1Object,s=i.tsp,a=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params,l=[];if(o.econtent!=null||o.tst!=null)if(o.statusinfo!=null?l.push(new a(o.statusinfo)):l.push(new a("granted")),o.econtent!=null)l.push(new s.TimeStampToken(o).getContentInfo());else if(o.tst instanceof i.ASN1Object)l.push(o.tst);else throw new Error("improper member tst value");else if(o.statusinfo!=null)l.push(new a(o.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var u=new n({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.TimeStampResp,c.asn1.ASN1Object);c.asn1.tsp.PKIStatusInfo=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.tsp,a=s.PKIStatus,o=s.PKIFreeText,l=s.PKIFailureInfo;s.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,p=[];if(typeof u=="string")p.push(new a(u));else{if(u.status==null)throw new e("property 'status' unspecified");p.push(new a(u.status)),u.statusstr!=null&&p.push(new o(u.statusstr)),u.failinfo!=null&&p.push(new l(u.failinfo))}var v=new r({array:p});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.PKIStatusInfo,c.asn1.ASN1Object);c.asn1.tsp.PKIStatus=function(t){var e=Error,i=c,n=i.asn1,r=n.DERInteger,s=n.tsp;s.PKIStatus.superclass.constructor.call(this);var a={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var o=this.params,l,u;if(typeof o=="string")try{u=a[o]}catch{throw new e("undefined name: "+o)}else if(typeof o=="number")u=o;else throw new e("unsupported params");return new r({int:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.PKIStatus,c.asn1.ASN1Object);c.asn1.tsp.PKIFreeText=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.DERUTF8String,a=n.tsp;a.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var o=this.params;if(!o instanceof Array)throw new e("wrong params: not array");for(var l=[],u=0;u<o.length;u++)l.push(new s({str:o[u]}));var p=new r({array:l});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.PKIFreeText,c.asn1.ASN1Object);c.asn1.tsp.PKIFailureInfo=function(t){var e=Error,i=c,n=i.asn1,r=n.DERBitString,s=n.tsp,a=s.PKIFailureInfo,o={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};a.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var l=this.params,u=0;if(typeof l=="number"&&0<=l&&l<=25){u|=1<<l;for(var p=u.toString(2),v="",h=p.length-1;h>=0;h--)v+=p[h];return v}else{if(typeof l=="string"&&o[l]!=null)return Hi([l],o);if(typeof l=="object"&&l.length!=null)return Hi(l,o);throw new e("wrong params")}},this.tohex=function(){var l=this.params,u=this.getBinValue();return new r({bin:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.tsp.PKIFailureInfo,c.asn1.ASN1Object);c.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(e,i){throw"not implemented yet"}};c.asn1.tsp.SimpleTSAAdapter=function(t){var e=c,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(s,a){var o=r(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o},this.params.econtent.content.serial={int:this.serial++};var l=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:l};var u=new n.TimeStampToken(this.params);return u.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};B(c.asn1.tsp.SimpleTSAAdapter,c.asn1.tsp.AbstractTSAAdapter);c.asn1.tsp.FixedTSAAdapter=function(t){var e=c,i=e.asn1,n=i.tsp,r=e.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(s,a){var o=r(s,a);this.params.econtent.content.messageImprint={alg:a,hash:o};var l=new n.TimeStampToken(this.params);return l.getContentInfoEncodedHex()},t!==void 0&&(this.params=t)};B(c.asn1.tsp.FixedTSAAdapter,c.asn1.tsp.AbstractTSAAdapter);c.asn1.tsp.TSPUtil=new function(){};c.asn1.tsp.TSPUtil.newTimeStampToken=function(t){return new c.asn1.tsp.TimeStampToken(t)};c.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e=new c.asn1.tsp.TSPParser;return e.getTimeStampReq(t)};c.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e=new c.asn1.tsp.TSPParser;return e.getMessageImprint(t)};c.asn1.tsp.TSPParser=function(){var t=Error,e=Y,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getTLVbyListEx,l=n.getChildIdx,u=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],p={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(v){var h=l(v,0);if(h.length==1)return this.getPKIStatusInfo(s(v,h[0]));if(h.length>1){var d=this.getPKIStatusInfo(s(v,h[0])),g=s(v,h[1]),f=this.getToken(g);return f.statusinfo=d,f}},this.getToken=function(v){var h=new c.asn1.cms.CMSParser,d=h.getCMSSignedData(v);return this.setTSTInfo(d),d},this.setTSTInfo=function(v){var h=v.econtent;if(h.type=="tstinfo"){var d=h.content.hex,g=this.getTSTInfo(d);h.content=g}},this.getTSTInfo=function(v){var h={},d=l(v,0),g=r(v,d[1]);h.policy=Ji(g);var f=s(v,d[2]);h.messageImprint=this.getMessageImprint(f);var y=r(v,d[3]);h.serial={hex:y};var m=r(v,d[4]);h.genTime={str:fe(m)};var w=0;if(d.length>5&&v.substr(d[5],2)=="30"){var b=s(v,d[5]);h.accuracy=this.getAccuracy(b),w++}if(d.length>5+w&&v.substr(d[5+w],2)=="01"){var _=r(v,d[5+w]);_=="ff"&&(h.ordering=!0),w++}if(d.length>5+w&&v.substr(d[5+w],2)=="02"){var I=r(v,d[5+w]);h.nonce={hex:I},w++}if(d.length>5+w&&v.substr(d[5+w],2)=="a0"){var D=s(v,d[5+w]);D="30"+D.substr(2),pGeneralNames=i.getGeneralNames(D);var S=pGeneralNames[0].dn;h.tsa=S,w++}if(d.length>5+w&&v.substr(d[5+w],2)=="a1"){var x=s(v,d[5+w]);x="30"+x.substr(2);var E=i.getExtParamArray(x);h.ext=E,w++}return h},this.getAccuracy=function(v){for(var h={},d=l(v,0),g=0;g<d.length;g++){var f=v.substr(d[g],2),y=r(v,d[g]),m=parseInt(y,16);f=="02"?h.seconds=m:f=="80"?h.millis=m:f=="81"&&(h.micros=m)}return h},this.getMessageImprint=function(v){if(v.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var h={},d=l(v,0),g=a(v,0,[0,0]),f=r(v,g),y=n.hextooidstr(f),m=c.asn1.x509.OID.oid2name(y);if(m=="")throw new Error("hashAlg name undefined: "+y);var w=m,b=a(v,0,[1]);return h.alg=w,h.hash=r(v,b),h},this.getPKIStatusInfo=function(v){var h={},d=l(v,0),g=0;try{var f=r(v,d[0]),y=parseInt(f,16);h.status=u[y]}catch{}if(d.length>1&&v.substr(d[1],2)=="30"){var m=s(v,d[1]);h.statusstr=this.getPKIFreeText(m),g++}if(d.length>g&&v.substr(d[1+g],2)=="03"){var w=s(v,d[1+g]);h.failinfo=this.getPKIFailureInfo(w)}return h},this.getPKIFreeText=function(v){for(var h=[],d=l(v,0),g=0;g<d.length;g++)h.push(n.getString(v,d[g]));return h},this.getPKIFailureInfo=function(v){var h=n.getInt(v,0);return p[h]!=null?p[h]:h},this.getTimeStampReq=function(v){var h={};h.certreq=!1;var d=l(v,0);if(d.length<2)throw new Error("TimeStampReq must have at least 2 items");var g=s(v,d[1]);h.messageImprint=c.asn1.tsp.TSPUtil.parseMessageImprint(g);for(var f=2;f<d.length;f++){var y=d[f],m=v.substr(y,2);if(m=="06"){var w=r(v,y);h.policy=n.hextooidstr(w)}m=="02"&&(h.nonce=r(v,y)),m=="01"&&(h.certreq=!0)}return h}};(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});(typeof c.asn1.cades>"u"||!c.asn1.cades)&&(c.asn1.cades={});c.asn1.cades.SignaturePolicyIdentifier=function(t){var e=c,i=e.asn1,n=i.cades,r=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new r(this.params)]},this.setByParam=function(s){this.params=s},t!=null&&this.setByParam(t)};B(c.asn1.cades.SignaturePolicyIdentifier,c.asn1.cms.Attribute);c.asn1.cades.SignaturePolicyId=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.DERObjectIdentifier,s=i.x509,a=s.AlgorithmIdentifier,o=i.cades,l=o.SignaturePolicyId,u=o.OtherHashAlgAndValue;l.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params,v=[];v.push(new r(p.oid)),v.push(new u(p));var h=new n({array:v});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(p){this.params=p},t!=null&&this.setByParam(t)};B(c.asn1.cades.SignaturePolicyId,c.asn1.ASN1Object);c.asn1.cades.OtherHashAlgAndValue=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.DEROctetString,a=n.x509,o=a.AlgorithmIdentifier,l=n.cades,u=l.OtherHashAlgAndValue;u.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params;if(p.alg==null)throw new e("property 'alg' not specified");if(p.hash==null&&p.cert==null)throw new e("property 'hash' nor 'cert' not specified");var v=null;if(p.hash!=null)v=p.hash;else if(p.cert!=null){if(typeof p.cert!="string")throw new e("cert not string");var h=p.cert;p.cert.indexOf("-----BEGIN")!=-1&&(h=Fe(p.cert)),v=c.crypto.Util.hashHex(h,p.alg)}var d=[];d.push(new o({name:p.alg})),d.push(new s({hex:v}));var g=new r({array:d});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cades.OtherHashAlgAndValue,c.asn1.ASN1Object);c.asn1.cades.OtherHashValue=function(t){c.asn1.cades.OtherHashValue.superclass.constructor.call(this);var e=Error,i=c,n=i.lang.String.isHex,r=i.asn1,s=r.DEROctetString,a=i.crypto.Util.hashHex;this.params=null,this.tohex=function(){var o=this.params;if(o.hash==null&&o.cert==null)throw new e("hash or cert not specified");var l=null;if(o.hash!=null)l=o.hash;else if(o.cert!=null){if(typeof o.cert!="string")throw new e("cert not string");var u=o.cert;o.cert.indexOf("-----BEGIN")!=-1&&(u=Fe(o.cert)),l=c.crypto.Util.hashHex(u,"sha1")}return new s({hex:l}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cades.OtherHashValue,c.asn1.ASN1Object);c.asn1.cades.SignatureTimeStamp=function(t){var e=Error,i=c,n=i.lang.String.isHex,r=i.asn1,s=r.ASN1Object,a=r.x509,o=r.cades;o.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var l=this.params;if(l.tst!=null)if(n(l.tst)){var u=new s;return u.hTLV=l.tst,[u]}else{if(l.tst instanceof s)return[l.tst];throw new e("params.tst has wrong value")}else if(l.res!=null){var p=l.res;if(p instanceof s&&(p=p.tohex()),typeof p!="string"||!n(p))throw new e("params.res has wrong value");var v=j.getTLVbyList(p,0,[1]),u=new s;return u.hTLV=l.tst,[u]}},t!=null&&this.setByParam(t)};B(c.asn1.cades.SignatureTimeStamp,c.asn1.cms.Attribute);c.asn1.cades.CompleteCertificateRefs=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.cades,a=s.OtherCertID,o=i.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var l=this.params,u=[],p=0;p<l.array.length;p++){var v=l.array[p];if(typeof v=="string")if(v.indexOf("-----BEGIN")!=-1)v={cert:v};else if(o(v))v={hash:v};else throw new e("unsupported value: "+v);l.alg!=null&&v.alg==null&&(v.alg=l.alg),l.hasis!=null&&v.hasis==null&&(v.hasis=l.hasis);var h=new a(v);u.push(h)}var d=new r({array:u});return[d]},t!=null&&this.setByParam(t)};B(c.asn1.cades.CompleteCertificateRefs,c.asn1.cms.Attribute);c.asn1.cades.OtherCertID=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.cms,s=r.IssuerSerial,a=i.cades,o=a.OtherHashValue,l=a.OtherHashAlgAndValue;a.OtherCertID.superclass.constructor.call(this),this.params=t,this.tohex=function(){var u=this.params;typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1?u={cert:u}:_isHex(u)&&(u={hash:u}));var p=[],v=null;if(u.alg!=null?v=new l(u):v=new o(u),p.push(v),u.cert!=null&&u.hasis==!0||u.issuer!=null&&u.serial!=null){var h=new s(u);p.push(h)}var d=new n({array:p});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cades.OtherCertID,c.asn1.ASN1Object);c.asn1.cades.OtherHash=function(t){var e=Error,i=c,n=i.asn1,r=n.cms,s=n.cades,a=s.OtherHashAlgAndValue,o=s.OtherHashValue,l=i.crypto.Util.hashHex,u=i.lang.String.isHex;s.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params;typeof p=="string"&&(p.indexOf("-----BEGIN")!=-1?p={cert:p}:u(p)&&(p={hash:p}));var v=null;return p.alg!=null?v=new a(p):v=new o(p),v.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.cades.OtherHash,c.asn1.ASN1Object);c.asn1.cades.CAdESUtil=new function(){};c.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=new c.asn1.cms.CMSParser,i=e.getCMSSignedData(t);return i};c.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getTLV,a=n.getV,o=c,l=o.asn1,u=l.ASN1Object,p=l.cms,v=p.AttributeList,h=p.SignerInfo,d={},g=r(t,e);if(g.length!=6)throw"not supported items for SignerInfo (!=6)";var f=g.shift();d.version=s(t,f);var y=g.shift();d.si=s(t,y);var m=g.shift();d.digalg=s(t,m);var w=g.shift();d.sattrs=s(t,w);var b=g.shift();d.sigalg=s(t,b);var _=g.shift();d.sig=s(t,_),d.sigval=a(t,_);var I=null;return d.obj=new h,I=new u,I.hTLV=d.version,d.obj.dCMSVersion=I,I=new u,I.hTLV=d.si,d.obj.dSignerIdentifier=I,I=new u,I.hTLV=d.digalg,d.obj.dDigestAlgorithm=I,I=new u,I.hTLV=d.sattrs,d.obj.dSignedAttrs=I,I=new u,I.hTLV=d.sigalg,d.obj.dSigAlg=I,I=new u,I.hTLV=d.sig,d.obj.dSig=I,d.obj.dUnsignedAttrs=new v,d};(typeof c.asn1.csr>"u"||!c.asn1.csr)&&(c.asn1.csr={});c.asn1.csr.CertificationRequest=function(t){var e=c,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.csr,a=i.x509,o=s.CertificationRequestInfo;s.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(l){this.params=l},this.sign=function(){var l=new o(this.params).tohex(),u=new c.crypto.Signature({alg:this.params.sigalg});u.init(this.params.sbjprvkey),u.updateHex(l);var p=u.sign();this.params.sighex=p},this.getPEM=function(){return Be(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var l=this.params,u=new c.asn1.csr.CertificationRequestInfo(this.params),p=new c.asn1.x509.AlgorithmIdentifier({name:l.sigalg});if(l.sighex==null&&l.sbjprvkey!=null&&this.sign(),l.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var v=new n({hex:"00"+l.sighex}),h=new r({array:[u,p,v]});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.csr.CertificationRequest,c.asn1.ASN1Object);c.asn1.csr.CertificationRequestInfo=function(t){var e=c,i=e.asn1,n=i.DERBitString,r=i.DERSequence,s=i.DERInteger,a=i.DERUTF8String,o=i.DERTaggedObject,l=i.ASN1Util.newObject,u=i.csr,p=i.x509,v=p.X500Name,h=p.Extensions,d=p.SubjectPublicKeyInfo;u.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(g){g!=null&&(this.params=g)},this.tohex=function(){var g=this.params,f=[];if(f.push(new s({int:0})),f.push(new v(g.subject)),f.push(new d(ae.getKey(g.sbjpubkey))),g.extreq!=null){var y=new h(g.extreq),m=l({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[y]}]}}});f.push(m)}else f.push(new o({tag:"a0",explicit:!1,obj:new a({str:""})}));var w=new r({array:f});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},t!=null&&this.setByParam(t)};B(c.asn1.csr.CertificationRequestInfo,c.asn1.ASN1Object);c.asn1.csr.CSRUtil=new function(){};c.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=ae,i=c.asn1.csr,n=new i.CertificationRequest(t),r=n.getPEM();return r};c.asn1.csr.CSRUtil.getParam=function(t){var e=j,i=e.getV,n=e.getIdxbyList,r=e.getTLVbyList,s=e.getTLVbyListEx,a=e.getVbyListEx,o=function(m){var w=n(m,0,[0,3,0,0],"06");return i(m,w)!="2a864886f70d01090e"?null:r(m,0,[0,3,0,1,0],"30")},l={};if(t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var u=Fe(t,"CERTIFICATE REQUEST");try{var p=s(u,0,[0,1]);if(p=="3000")l.subject={};else{var g=new Y;l.subject=g.getX500Name(p)}}catch{}var v=s(u,0,[0,2]),h=ae.getKey(v,null,"pkcs8pub");l.sbjpubkey=ae.getPEM(h,"PKCS8PUB");var d=o(u),g=new Y;d!=null&&(l.extreq=g.getExtParamArray(d));try{var f=s(u,0,[1],"30"),g=new Y;l.sigalg=g.getAlgorithmIdentifierName(f)}catch{}try{var y=a(u,0,[2]);l.sighex=y}catch{}return l};(typeof c>"u"||!c)&&(c={});(typeof c.asn1>"u"||!c.asn1)&&(c.asn1={});(typeof c.asn1.ocsp>"u"||!c.asn1.ocsp)&&(c.asn1.ocsp={});c.asn1.ocsp.DEFAULT_HASH="sha1";c.asn1.ocsp.OCSPResponse=function(t){c.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var e=c.asn1.DEREnumerated,i=c.asn1.ASN1Util.newObject,n=c.asn1.ocsp.ResponseBytes,r=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var s=this.params.resstatus;return typeof s=="number"?s:typeof s!="string"?-1:r.indexOf(s)},this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,a=this._getStatusCode();if(a==-1)throw new Error("responseStatus not supported: "+s.resstatus);if(a!=0)return i({seq:[{enum:{int:a}}]}).tohex();var o=new n(s);return i({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:o}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.OCSPResponse,c.asn1.ASN1Object);c.asn1.ocsp.ResponseBytes=function(t){c.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var e=c.asn1,i=e.DERSequence,n=e.DERObjectIdentifier,r=e.DEROctetString,s=e.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params;if(a.restype!="ocspBasic")throw new Error("not supported responseType: "+a.restype);var o=new s(a),l=[];l.push(new n({name:"ocspBasic"})),l.push(new r({hex:o.tohex()}));var u=new i({array:l});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.ResponseBytes,c.asn1.ASN1Object);c.asn1.ocsp.BasicOCSPResponse=function(t){c.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var e=Error,i=c.asn1,n=i.ASN1Object,r=i.DERSequence,s=i.DERGeneralizedTime,a=i.DERTaggedObject,o=i.DERBitString,l=i.x509.Extensions,u=i.x509.AlgorithmIdentifier,p=i.ocsp,v=p.ResponderID;_SingleResponseList=p.SingleResponseList,_ResponseData=p.ResponseData,this.params=null,this.setByParam=function(h){this.params=h},this.sign=function(){var h=this.params,d=h.tbsresp.tohex(),g=new c.crypto.Signature({alg:h.sigalg});g.init(h.reskey),g.updateHex(d),h.sighex=g.sign()},this.tohex=function(){var h=this.params;h.tbsresp==null&&(h.tbsresp=new _ResponseData(h)),h.sighex==null&&h.reskey!=null&&this.sign();var d=[];if(d.push(h.tbsresp),d.push(new u({name:h.sigalg})),d.push(new o({hex:"00"+h.sighex})),h.certs!=null&&h.certs.length!=null){for(var g=[],f=0;f<h.certs.length;f++){var y=h.certs[f],m=null;if(j.isASN1HEX(y))m=y;else if(y.match(/-----BEGIN/))m=Fe(y);else throw new e("certs["+f+"] not hex or PEM");g.push(new n({tlv:m}))}var w=new r({array:g});d.push(new a({tag:"a0",explicit:!0,obj:w}))}var b=new r({array:d});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.BasicOCSPResponse,c.asn1.ASN1Object);c.asn1.ocsp.ResponseData=function(t){c.asn1.ocsp.ResponseData.superclass.constructor.call(this);var e=Error,i=c.asn1,n=i.DERSequence,r=i.DERGeneralizedTime,s=i.DERTaggedObject,a=i.x509.Extensions,o=i.ocsp,l=o.ResponderID;_SingleResponseList=o.SingleResponseList,this.params=null,this.tohex=function(){var u=this.params;u.respid!=null&&new e("respid not specified"),u.prodat!=null&&new e("prodat not specified"),u.array!=null&&new e("array not specified");var p=[];if(p.push(new l(u.respid)),p.push(new r(u.prodat)),p.push(new _SingleResponseList(u.array)),u.ext!=null){var v=new a(u.ext);p.push(new s({tag:"a1",explicit:!0,obj:v}))}var h=new n({array:p});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.ResponseData,c.asn1.ASN1Object);c.asn1.ocsp.ResponderID=function(t){c.asn1.ocsp.ResponderID.superclass.constructor.call(this);var e=c,i=e.asn1,n=i.ASN1Util.newObject,r=i.x509.X500Name,s=e.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var o=this.params;if(o.key!=null){var l=null;if(typeof o.key=="string"){if(s(o.key)&&(l=o.key),o.key.match(/-----BEGIN CERTIFICATE/)){var u=new Y(o.key),p=u.getExtSubjectKeyIdentifier();p!=null&&(l=p.kid.hex)}}else if(o.key instanceof Y){var p=o.key.getExtSubjectKeyIdentifier();p!=null&&(l=p.kid.hex)}if(l==null)throw new a("wrong key member value");var v=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:l}}}});return v.tohex()}else if(o.name!=null){var h=null;if(typeof o.name=="string"&&o.name.match(/-----BEGIN CERTIFICATE/)){var u=new Y(o.name);h=u.getSubject()}else o.name instanceof Y?h=o.name.getSubject():typeof o.name=="object"&&(o.name.array!=null||o.name.str!=null)&&(h=o.name);if(h==null)throw new a("wrong name member value");var v=n({tag:{tag:"a1",explicit:!0,obj:new r(h)}});return v.tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(o){this.params=o},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.ResponderID,c.asn1.ASN1Object);c.asn1.ocsp.SingleResponseList=function(t){c.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var e=c.asn1,i=e.DERSequence,n=e.ocsp.SingleResponse;this.params=null,this.tohex=function(){var r=this.params;if(typeof r!="object"||r.length==null)throw new Error("params not specified properly");for(var s=[],a=0;a<r.length;a++)s.push(new n(r[a]));var o=new i({array:s});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(r){this.params=r},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.SingleResponseList,c.asn1.ASN1Object);c.asn1.ocsp.SingleResponse=function(t){var e=Error,i=c,n=i.asn1,r=n.DERSequence,s=n.DERGeneralizedTime,a=n.DERTaggedObject,o=n.ocsp,l=o.CertID,u=o.CertStatus,p=n.x509,v=p.Extensions;o.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,d=[];if(h.certid==null)throw new e("certid unspecified");if(h.status==null)throw new e("status unspecified");if(h.thisupdate==null)throw new e("thisupdate unspecified");if(d.push(new l(h.certid)),d.push(new u(h.status)),d.push(new s(h.thisupdate)),h.nextupdate!=null){var g=new s(h.nextupdate);d.push(new a({tag:"a0",explicit:!0,obj:g}))}if(h.ext!=null){var f=new v(h.ext);d.push(new a({tag:"a1",explicit:!0,obj:f}))}var y=new r({array:d});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.SingleResponse,c.asn1.ASN1Object);c.asn1.ocsp.CertID=function(t){var e=c,i=e.asn1,n=i.DEROctetString,r=i.DERInteger,s=i.DERSequence,a=i.x509,o=a.AlgorithmIdentifier,l=i.ocsp,u=l.DEFAULT_HASH,p=e.crypto,v=p.Util.hashHex,h=Y,d=j,g=d.getVbyList;l.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(f,y,m,w){w==null&&(w=this.DEFAULT_HASH),this.params={alg:w,issname:f,isskey:y,sbjsn:m}},this.setByCert=function(f,y,m){m==null&&(m=this.DEFAULT_HASH),this.params={alg:m,issuerCert:f,subjectCert:y}},this.getParamByCerts=function(f,y,m){m==null&&(m=this.DEFAULT_HASH);var w=new h(f),b=new h(y),_=v(w.getSubjectHex(),m),I=w.getPublicKeyHex(),D=v(g(I,0,[1],"03",!0),m),S=b.getSerialNumberHex(),x={alg:m,issname:_,isskey:D,sbjsn:S};return x},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var f=this.params,y,m,w,b;if(f.alg==null?b=this.DEFAULT_HASH:b=f.alg,f.issuerCert!=null&&f.subjectCert!=null){var _=this.getParamByCerts(f.issuerCert,f.subjectCert,b);y=_.issname,m=_.isskey,w=_.sbjsn}else if(f.issname!=null&&f.isskey!=null&&f.sbjsn!=null)y=f.issname,m=f.isskey,w=f.sbjsn;else throw new Error("required param members not defined");var I=new o({name:b}),D=new n({hex:y}),S=new n({hex:m}),x=new r({hex:w}),E=new s({array:[I,D,S,x]});return this.hTLV=E.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.CertID,c.asn1.ASN1Object);c.asn1.ocsp.CertStatus=function(t){c.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(e.status=="good")return"8000";if(e.status=="unknown")return"8200";if(e.status=="revoked"){var i=[{gentime:{str:e.time}}];e.reason!=null&&i.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:i}};return c.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},t!==void 0&&this.setByParam(t)};B(c.asn1.ocsp.CertStatus,c.asn1.ASN1Object);c.asn1.ocsp.Request=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var a=[];if(this.dReqCert===null)throw"reqCert not set";a.push(this.dReqCert);var o=new n({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof t<"u"){var s=new r.CertID(t);this.dReqCert=s}};B(c.asn1.ocsp.Request,c.asn1.ASN1Object);c.asn1.ocsp.TBSRequest=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.ocsp;r.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(s){for(var a=[],o=0;o<s.length;o++){var l=new r.Request(s[0]);a.push(l)}this.dRequestList=a},this.tohex=function(){var s=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var a=new n({array:this.dRequestList});if(s.push(a),this.dRequestExt!==null)throw"requestExtensions not supported";var o=new n({array:s});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0&&this.setRequestListByParam(t.reqList)};B(c.asn1.ocsp.TBSRequest,c.asn1.ASN1Object);c.asn1.ocsp.OCSPRequest=function(t){var e=c,i=e.asn1,n=i.DERSequence,r=i.ocsp;if(r.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var a=[];if(this.dTbsRequest!==null)a.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var o=new n({array:a});return this.hTLV=o.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},t!==void 0&&t.reqList!==void 0){var s=new r.TBSRequest(t);this.dTbsRequest=s}};B(c.asn1.ocsp.OCSPRequest,c.asn1.ASN1Object);c.asn1.ocsp.OCSPUtil={};c.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,i){var n=c,r=n.asn1,s=r.ocsp;i===void 0&&(i=s.DEFAULT_HASH);var a={alg:i,issuerCert:t,subjectCert:e},o=new s.OCSPRequest({reqList:[a]});return o.tohex()};c.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e=j,i=e.getVbyList,n=e.getVbyListEx,r=e.getIdxbyList,s=e.getIdxbyListEx,a=e.getV,o={};try{var l=n(t,0,[0],"0a");o.responseStatus=parseInt(l,16)}catch{}if(o.responseStatus!==0)return o;try{var u=r(t,0,[1,0,1,0,0,2,0,1]);t.substr(u,2)==="80"?o.certStatus="good":t.substr(u,2)==="a1"?(o.certStatus="revoked",o.revocationTime=fe(i(t,u,[0]))):t.substr(u,2)==="82"&&(o.certStatus="unknown")}catch{}try{var p=r(t,0,[1,0,1,0,0,2,0,2]);o.thisUpdate=fe(a(t,p))}catch{}try{var v=r(t,0,[1,0,1,0,0,2,0,3]);t.substr(v,2)==="a0"&&(o.nextUpdate=fe(i(t,v,[0])))}catch{}return o};c.asn1.ocsp.OCSPParser=function(){var t=Error,e=Y,i=new e,n=j,r=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getVbyList,l=n.getTLVbyList,u=n.getVbyListEx,p=n.getTLVbyListEx,v=n.getChildIdx;this.getOCSPRequest=function(h){var d=v(h,0);if(d.length!=1&&d.length!=2)throw new t("wrong number elements: "+d.length);var g=this.getTBSRequest(s(h,d[0]));return g},this.getTBSRequest=function(h){var d={},g=p(h,0,[0],"30");d.array=this.getRequestList(g);var f=p(h,0,["[2]",0],"30");return f!=null&&(d.ext=i.getExtParamArray(f)),d},this.getRequestList=function(h){for(var d=[],g=v(h,0),f=0;f<g.length;f++){var h=s(h,g[f]);d.push(this.getRequest(h))}return d},this.getRequest=function(h){var d=v(h,0);if(d.length!=1&&d.length!=2)throw new t("wrong number elements: "+d.length);var g=this.getCertID(s(h,d[0]));if(d.length==2){var f=a(h,0,[1,0]);g.ext=i.getExtParamArray(s(h,f))}return g},this.getCertID=function(h){var d=v(h,0);if(d.length!=4)throw new t("wrong number elements: "+d.length);var g=new e,f={};return f.alg=g.getAlgorithmIdentifierName(s(h,d[0])),f.issname=r(h,d[1]),f.isskey=r(h,d[2]),f.sbjsn=r(h,d[3]),f},this.getOCSPResponse=function(h){var d=v(h,0),g,f=r(h,d[0]),y=parseInt(f);if(d.length==1)return{resstatus:y};var m=l(h,0,[1,0]);return g=this.getResponseBytes(m),g.resstatus=y,g},this.getResponseBytes=function(h){var d=v(h,0),g,f=l(h,0,[1,0]);g=this.getBasicOCSPResponse(f);var y=r(h,d[0]);return g.restype=c.asn1.x509.OID.oid2name(Ji(y)),g},this.getBasicOCSPResponse=function(h){var d=v(h,0),g;g=this.getResponseData(s(h,d[0]));var f=new Y;g.alg=f.getAlgorithmIdentifierName(s(h,d[1]));var y=r(h,d[2]);g.sighex=y.substr(2);var m=u(h,0,["[0]"]);if(m!=null){for(var w=v(m,0),b=[],_=0;_<w.length;_++){var I=s(m,w[_]);b.push(I)}g.certs=b}return g},this.getResponseData=function(h){var d=v(h,0),g=d.length,f={},y=0;h.substr(d[0],2)=="a0"&&y++,f.respid=this.getResponderID(s(h,d[y++]));var m=r(h,d[y++]);if(f.prodat=fe(m),f.array=this.getSingleResponseList(s(h,d[y++])),h.substr(d[g-1],2)=="a1"){var w=l(h,d[g-1],[0]),b=new Y;f.ext=b.getExtParamArray(w)}return f},this.getResponderID=function(h){var d={};if(h.substr(0,2)=="a2"){var g=o(h,0,[0]);d.key=g}if(h.substr(0,2)=="a1"){var f=l(h,0,[0]),y=new Y;d.name=y.getX500Name(f)}return d},this.getSingleResponseList=function(h){for(var d=v(h,0),g=[],f=0;f<d.length;f++){var y=this.getSingleResponse(s(h,d[f]));g.push(y)}return g},this.getSingleResponse=function(h){var d=v(h,0),g={},f=this.getCertID(s(h,d[0]));g.certid=f;var y=this.getCertStatus(s(h,d[1]));if(g.status=y,h.substr(d[2],2)=="18"){var m=r(h,d[2]);g.thisupdate=fe(m)}for(var w=3;w<d.length;w++){if(h.substr(d[w],2)=="a0"){var b=o(h,d[w],[0],"18");g.nextupdate=fe(b)}if(h.substr(d[w],2)=="a1"){var _=new Y,I=l(h,0,[w,0]);g.ext=_.getExtParamArray(I)}}return g},this.getCertStatus=function(h){var d={};if(h=="8000")return{status:"good"};if(h=="8200")return{status:"unknown"};if(h.substr(0,2)=="a1"){d.status="revoked";var g=o(h,0,[0]),f=fe(g);d.time=f}return d}};var c;(typeof c>"u"||!c)&&(c={});(typeof c.lang>"u"||!c.lang)&&(c.lang={});c.lang.String=function(){};function Po(t){for(var e=new Array,i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}function Ro(t){for(var e="",i=0;i<t.length;i++)e=e+String.fromCharCode(t[i]);return e}function Ui(t){for(var e="",i=0;i<t.length;i++){var n=t[i].toString(16);n.length==1&&(n="0"+n),e=e+n}return e}function Qe(t){return Ui(Po(t))}function vh(t){return It(Qe(t))}function yh(t){return Qt(It(Qe(t)))}function wh(t){return Ro(_o(hi(t)))}function Qt(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_"),t}function hi(t){return t.length%4==2?t=t+"==":t.length%4==3&&(t=t+"="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/"),t}function Oe(t){return t.length%2==1&&(t="0"+t),Qt(It(t))}function xe(t){return Zt(hi(t))}var di,mt;typeof Buffer=="function"?(di=function(t){return Qt(Buffer.from(t,"utf8").toString("base64"))},mt=function(t){return Buffer.from(hi(t),"base64").toString("utf8")}):(di=function(t){return Oe(Gi(Wi(t)))},mt=function(t){return decodeURIComponent($i(xe(t)))});function bh(t){return It(Gi(Wi(t)))}function Sh(t){return decodeURIComponent($i(Zt(t)))}function Ki(t){return Gi(Wi(t)).toLowerCase()}function fe(t){try{return decodeURIComponent($i(t))}catch{return null}}function xh(t){return fe(Eh(t))}function Eh(t){for(var e=t.match(/.{1,2}/g),i=[],n=0;n<e.length;n++){var r=parseInt(e[n],16);161<=r&&r<=191?(i.push("c2"),i.push(e[n])):192<=r&&r<=255?(i.push("c3"),i.push((r-64).toString(16))):i.push(e[n])}return i.join("")}function Ge(t){for(var e="",i=0;i<t.length-1;i+=2)e+=String.fromCharCode(parseInt(t.substr(i,2),16));return e}function lt(t){for(var e="",i=0;i<t.length;i++)e+=("0"+t.charCodeAt(i).toString(16)).slice(-2);return e}function Do(t){return It(t)}function Oo(t){var e=Do(t),i=e.replace(/(.{64})/g,`$1\r
`);return i=i.replace(/\r\n$/,""),i}function ko(t){var e=t.replace(/[^0-9A-Za-z\/+=]*/g,""),i=Zt(e);return i}function Be(t,e){var i=Oo(t);return"-----BEGIN "+e+`-----\r
`+i+`\r
-----END `+e+`-----\r
`}function Fe(t,e){if(t.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+e;return e!==void 0?(t=t.replace(new RegExp("^[^]*-----BEGIN "+e+"-----"),""),t=t.replace(new RegExp("-----END "+e+"-----[^]*$"),"")):(t=t.replace(/^[^]*-----BEGIN [^-]+-----/,""),t=t.replace(/-----END [^-]+-----[^]*$/,"")),ko(t)}function _h(t){if(t.length%2!=0)throw"input is not even length";if(t.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),i=new DataView(e),n=0;n<t.length/2;n++)i.setUint8(n,parseInt(t.substr(n*2,2),16));return e}function Ah(t){for(var e="",i=new DataView(t),n=0;n<t.byteLength;n++)e+=("00"+i.getUint8(n).toString(16)).slice(-2);return e}function Tr(t){var e,i,n,r,s,a,o,l,u,p,v,h;if(h=t.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),h)return u=h[1],e=parseInt(u),u.length===2&&(50<=e&&e<100?e=1900+e:0<=e&&e<50&&(e=2e3+e)),i=parseInt(h[2])-1,n=parseInt(h[3]),r=parseInt(h[4]),s=parseInt(h[5]),a=parseInt(h[6]),o=0,p=h[7],p!==""&&(v=(p.substr(1)+"00").substr(0,3),o=parseInt(v)),Date.UTC(e,i,n,r,s,a,o);throw new Error("unsupported zulu format: "+t)}function No(t){return Math.round(Tr(t)/1e3)}function Ih(t){return new Date(Tr(t))}function Ch(t,e,i){var n,r=t.getUTCFullYear();if(e){if(r<1950||2049<r)throw"not proper year for UTCTime: "+r;n=(""+r).slice(-2)}else n=("000"+r).slice(-4);if(n+=("0"+(t.getUTCMonth()+1)).slice(-2),n+=("0"+t.getUTCDate()).slice(-2),n+=("0"+t.getUTCHours()).slice(-2),n+=("0"+t.getUTCMinutes()).slice(-2),n+=("0"+t.getUTCSeconds()).slice(-2),i){var s=t.getUTCMilliseconds();s!==0&&(s=("00"+s).slice(-3),s=s.replace(/0+$/g,""),n+="."+s)}return n+="Z",n}function Gi(t){return t.replace(/%/g,"")}function $i(t){return t.replace(/(..)/g,"%$1")}function xr(t){var e="malformed IPv6 address";if(!t.match(/^[0-9A-Fa-f:]+$/))throw e;t=t.toLowerCase();var i=t.split(":").length-1;if(i<2)throw e;var n=":".repeat(7-i+2);t=t.replace("::",n);var r=t.split(":");if(r.length!=8)throw e;for(var s=0;s<8;s++)r[s]=("0000"+r[s]).slice(-4);return r.join("")}function Er(t){if(!t.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+t);t=t.toLowerCase();var e=t.match(/.{1,4}/g);e=e.map(function(r){return r.replace(/^0+/,"")}),e=e.map(function(r){return r==""?"0":r}),t=":"+e.join(":")+":";var i=t.match(/:(0:){2,}/g);if(i==null)return t.slice(1,-1);var n=i.sort().slice(-1)[0];return t=t.replace(n.substr(0,n.length-1),":"),t.substr(0,2)!="::"&&(t=t.substr(1)),t.substr(-2,2)!="::"&&(t=t.substr(0,t.length-1)),t}function Li(t){var e=new Error("malformed hex value");if(!t.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw e;if(t.length==8){var i;try{return i=parseInt(t.substr(0,2),16)+"."+parseInt(t.substr(2,2),16)+"."+parseInt(t.substr(4,2),16)+"."+parseInt(t.substr(6,2),16),i}catch{throw e}}else if(t.length==16)try{return Li(t.substr(0,8))+"/"+xo(t.substr(8))}catch{throw e}else{if(t.length==32)return Er(t);if(t.length==64){try{return Er(t.substr(0,32))+"/"+xo(t.substr(32))}catch{throw e}return}else return t}}function xo(t){var e=new Error("malformed mask"),i;try{i=new P(t,16).toString(2)}catch{throw e}if(!i.match(/^1*0*$/))throw e;return i.replace(/0+$/,"").length}function Pr(t){var e=new Error("malformed IP address");if(t=t.toLowerCase(t),!t.match(/^[0-9a-f.:/]+$/))throw e;if(t.match(/^[0-9.]+$/)){var i=t.split(".");if(i.length!==4)throw e;var n="";try{for(var r=0;r<4;r++){var s=parseInt(i[r]);n+=("0"+s.toString(16)).slice(-2)}return n}catch{throw e}}else if(t.match(/^[0-9.]+\/[0-9]+$/)){var a=t.split("/");return Pr(a[0])+Eo(parseInt(a[1]),32)}else{if(t.match(/^[0-9a-f:]+$/)&&t.indexOf(":")!==-1)return xr(t);if(t.match(/^[0-9a-f:]+\/[0-9]+$/)&&t.indexOf(":")!==-1){var a=t.split("/");return xr(a[0])+Eo(parseInt(a[1]),128)}else throw e}}function Eo(t,e){if(e==32&&t==0)return"00000000";if(e==128&&t==0)return"00000000000000000000000000000000";var i=Array(t+1).join("1")+Array(e-t+1).join("0");return new P(i,2).toString(16)}function Rr(t){function e(r){var s=parseInt(r.substr(0,2),16),a=parseInt(r.substr(2),16);if(s==0&a<128)return String.fromCharCode(a);if(s<8){var o=192|(s&7)<<3|(a&192)>>6,l=128|a&63;return fe(o.toString(16)+l.toString(16))}var o=224|(s&240)>>4,l=128|(s&15)<<2|(a&192)>>6,u=128|a&63;return fe(o.toString(16)+l.toString(16)+u.toString(16))}var i=t.match(/.{4}/g),n=i.map(e);return n.join("")}function Wi(t){for(var e=encodeURIComponent(t),i="",n=0;n<e.length;n++)e[n]=="%"?(i=i+e.substr(n,3),n=n+2):i=i+"%"+Qe(e[n]);return i}function Fh(t){return t=t.replace(/\r\n/mg,`
`),t}function Th(t){return t=t.replace(/\r\n/mg,`
`),t=t.replace(/\n/mg,`\r
`),t}c.lang.String.isInteger=function(t){return t.match(/^[0-9]+$/)?!0:!!t.match(/^-[0-9]+$/)};c.lang.String.isHex=function(t){return Bo(t)};function Bo(t){return!!(t.length%2==0&&(t.match(/^[0-9a-f]+$/)||t.match(/^[0-9A-F]+$/)))}c.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!!(t.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&t.length%4==0)};c.lang.String.isBase64URL=function(t){return t.match(/[+/=]/)?!1:(t=hi(t),c.lang.String.isBase64(t))};function Dr(t){return!!t.match(/^[0-9A-Za-z-_.]+$/)}c.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};c.lang.String.isPrintable=function(t){return t.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};c.lang.String.isIA5=function(t){return t.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};c.lang.String.isMail=function(t){return t.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function _r(t){return t.length%2==1?"0"+t:t.substr(0,1)>"7"?"00"+t:t}function Ph(t){t=t.replace(/^\s*\[\s*/,""),t=t.replace(/\s*\]\s*$/,""),t=t.replace(/\s*/g,"");try{var e=t.split(/,/).map(function(i,n,r){var s=parseInt(i);if(s<0||255<s)throw"integer not in range 0-255";var a=("00"+s.toString(16)).slice(-2);return a}).join("");return e}catch(i){throw"malformed integer array string: "+i}}var Rh=function(t,e){var i=t.length;t.length>e.length&&(i=e.length);for(var n=0;n<i;n++)if(t.charCodeAt(n)!=e.charCodeAt(n))return n;return t.length!=e.length?i:-1};function Mo(t){var e=function(o){var l=o.toString(16);return l.length==1&&(l="0"+l),l},i=function(o){var l="",u=parseInt(o,10),p=u.toString(2),v=7-p.length%7;v==7&&(v=0);for(var h="",d=0;d<v;d++)h+="0";p=h+p;for(var d=0;d<p.length-1;d+=7){var g=p.substr(d,7);d!=p.length-7&&(g="1"+g),l+=e(parseInt(g,2))}return l};try{if(!t.match(/^[0-9.]+$/))return null;var n="",r=t.split("."),s=parseInt(r[0],10)*40+parseInt(r[1],10);n+=e(s),r.splice(0,2);for(var a=0;a<r.length;a++)n+=i(r[a]);return n}catch{return null}}function Ji(t){if(!Bo(t))return null;try{var e=[],i=t.substr(0,2),n=parseInt(i,16);e[0]=new String(Math.floor(n/40)),e[1]=new String(n%40);for(var r=t.substr(2),s=[],a=0;a<r.length/2;a++)s.push(parseInt(r.substr(a*2,2),16));for(var o=[],l="",a=0;a<s.length;a++)s[a]&128?l=l+zi((s[a]&127).toString(2),7):(l=l+zi((s[a]&127).toString(2),7),o.push(new String(parseInt(l,2))),l="");var u=e.join(".");return o.length>0&&(u=u+"."+o.join(".")),u}catch{return null}}var zi=function(t,e,i){return i==null&&(i="0"),t.length>=e?t:new Array(e-t.length+1).join(i)+t};function jo(t){if(t.length%2!=0||(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null))return-1;try{var e=t.substr(0,2);if(e=="00")return parseInt(t.substr(2),16);var i=parseInt(e,16);if(i>7)return-1;var n=t.substr(2),r=parseInt(n,16).toString(2);r=="0"&&(r="00000000"),r=r.slice(0,0-i);var s=parseInt(r,2);return s==NaN?-1:s}catch{return-1}}function Lo(t){if(typeof t!="number"||t<0)return null;var e=Number(t).toString(2),i=8-e.length%8;i==8&&(i=0),e=e+zi("",i,"0");var n=parseInt(e,2).toString(16);n.length%2==1&&(n="0"+n);var r="0"+i;return r+n}function zo(t){if(typeof t!="string"||t.length%2!=0||!t.match(/^[0-9a-f]+$/))return null;try{var e=parseInt(t.substr(0,2),16);if(e<0||7<e)return null;for(var i=t.substr(2),n="",r=0;r<i.length;r+=2){var s=i.substr(r,2),a=parseInt(s,16).toString(2);a=("0000000"+a).slice(-8),n+=a}return n.substr(0,n.length-e)}catch{return null}}function Dh(t){if(typeof t!="string"||t.match(/^[01]+$/)==null)return null;try{var e=parseInt(t,2);return Lo(e)}catch{return null}}function Hi(t,e){for(var i=0,n=0;n<t.length;n++)i|=1<<e[t[n]];for(var r=i.toString(2),s="",n=r.length-1;n>=0;n--)s+=r[n];return s}function B(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)}(typeof c>"u"||!c)&&(c={});(typeof c.crypto>"u"||!c.crypto)&&(c.crypto={});c.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:q.algo.MD5,sha1:q.algo.SHA1,sha224:q.algo.SHA224,sha256:q.algo.SHA256,sha384:q.algo.SHA384,sha512:q.algo.SHA512,ripemd160:q.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if(typeof this.DIGESTINFOHEAD[e]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,i){var n=this.getDigestInfoHex(t,e),r=i/4;if(n.length+22>r)throw"key is too short for SigAlg: keylen="+i+","+e;for(var s="0001",a="00"+n,o="",l=r-s.length-a.length,u=0;u<l;u+=2)o+="ff";var p=s+o+a;return p},this.hashString=function(t,e){var i=new c.crypto.MessageDigest({alg:e});return i.digestString(t)},this.hashHex=function(t,e){var i=new c.crypto.MessageDigest({alg:e});return i.digestHex(t)},this.sha1=function(t){return this.hashString(t,"sha1")},this.sha256=function(t){return this.hashString(t,"sha256")},this.sha256Hex=function(t){return this.hashHex(t,"sha256")},this.sha512=function(t){return this.hashString(t,"sha512")},this.sha512Hex=function(t){return this.hashHex(t,"sha512")},this.isKey=function(t){return t instanceof K||t instanceof c.crypto.DSA||t instanceof c.crypto.ECDSA}};c.crypto.Util.md5=function(t){var e=new c.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return e.digestString(t)};c.crypto.Util.ripemd160=function(t){var e=new c.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return e.digestString(t)};c.crypto.Util.SECURERANDOMGEN=new Dt;c.crypto.Util.getRandomHexOfNbytes=function(t){var e=new Array(t);return c.crypto.Util.SECURERANDOMGEN.nextBytes(e),Ui(e)};c.crypto.Util.getRandomBigIntegerOfNbytes=function(t){return new P(c.crypto.Util.getRandomHexOfNbytes(t),16)};c.crypto.Util.getRandomHexOfNbits=function(t){var e=t%8,i=(t-e)/8,n=new Array(i+1);return c.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<e&255^255)&n[0],Ui(n)};c.crypto.Util.getRandomBigIntegerOfNbits=function(t){return new P(c.crypto.Util.getRandomHexOfNbits(t),16)};c.crypto.Util.getRandomBigIntegerZeroToMax=function(t){for(var e=t.bitLength();;){var i=c.crypto.Util.getRandomBigIntegerOfNbits(e);if(t.compareTo(i)!=-1)return i}};c.crypto.Util.getRandomBigIntegerMinToMax=function(t,e){var i=t.compareTo(e);if(i==1)throw"biMin is greater than biMax";if(i==0)return t;var n=e.subtract(t),r=c.crypto.Util.getRandomBigIntegerZeroToMax(n);return r.add(t)};c.crypto.MessageDigest=function(t){var e=null,i=null,n=null;this.setAlgAndProvider=function(r,s){if(r=c.crypto.MessageDigest.getCanonicalAlgName(r),r!==null&&s===void 0&&(s=c.crypto.Util.DEFAULTPROVIDER[r]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)!=-1&&s=="cryptojs"){try{this.md=c.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r].create()}catch(a){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+a}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var o=q.enc.Hex.parse(a);this.md.update(o)},this.digest=function(){var a=this.md.finalize();return a.toString(q.enc.Hex)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}if(":sha256:".indexOf(r)!=-1&&s=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(a){throw"setAlgAndProvider hash alg set fail alg="+r+"/"+a}this.updateString=function(a){this.md.update(a)},this.updateHex=function(a){var o=sjcl.codec.hex.toBits(a);this.md.update(o)},this.digest=function(){var a=this.md.finalize();return sjcl.codec.hex.fromBits(a)},this.digestString=function(a){return this.updateString(a),this.digest()},this.digestHex=function(a){return this.updateHex(a),this.digest()}}},this.updateString=function(r){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(r){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(r){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(r){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},t!==void 0&&t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=c.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};c.crypto.MessageDigest.getCanonicalAlgName=function(t){return typeof t=="string"&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t};c.crypto.MessageDigest.getHashLength=function(t){var e=c.crypto.MessageDigest,i=e.getCanonicalAlgName(t);if(e.HASHLENGTH[i]===void 0)throw"not supported algorithm: "+t;return e.HASHLENGTH[i]};c.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};c.crypto.Mac=function(t){var e=null,i=null,n=null,r=null,s=null;this.setAlgAndProvider=function(a,o){if(a=a.toLowerCase(),a==null&&(a="hmacsha1"),a=a.toLowerCase(),a.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+a;o===void 0&&(o=c.crypto.Util.DEFAULTPROVIDER[a]),this.algProv=a+"/"+o;var l=a.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(l)!=-1&&o=="cryptojs"){try{var u=c.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[l];this.mac=q.algo.HMAC.create(u,this.pass)}catch(p){throw"setAlgAndProvider hash alg set fail hashAlg="+l+"/"+p}this.updateString=function(p){this.mac.update(p)},this.updateHex=function(p){var v=q.enc.Hex.parse(p);this.mac.update(v)},this.doFinal=function(){var p=this.mac.finalize();return p.toString(q.enc.Hex)},this.doFinalString=function(p){return this.updateString(p),this.doFinal()},this.doFinalHex=function(p){return this.updateHex(p),this.doFinal()}}},this.updateString=function(a){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(a){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(a){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(a){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(a){if(typeof a=="string"){var o=a;(a.length%2==1||!a.match(/^[0-9A-Fa-f]+$/))&&(o=lt(a)),this.pass=q.enc.Hex.parse(o);return}if(typeof a!="object")throw"KJUR.crypto.Mac unsupported password type: "+a;var o=null;if(a.hex!==void 0){if(a.hex.length%2!=0||!a.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+a.hex;o=a.hex}if(a.utf8!==void 0&&(o=Ki(a.utf8)),a.rstr!==void 0&&(o=lt(a.rstr)),a.b64!==void 0&&(o=Zt(a.b64)),a.b64u!==void 0&&(o=xe(a.b64u)),o==null)throw"KJUR.crypto.Mac unsupported password type: "+a;this.pass=q.enc.Hex.parse(o)},t!==void 0&&(t.pass!==void 0&&this.setPassword(t.pass),t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0&&(this.provName=c.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};c.crypto.Signature=function(t){var e=null,i=null,n=null,r=null,s=null,a=null,o=null,l=null,u=null,p=null,v=-1,h=null,d=null,g=null,f=null,y=null;if(this._setAlgNames=function(){var m=this.algName.match(/^(.+)with(.+)$/);m&&(this.mdAlgName=m[1].toLowerCase(),this.pubkeyAlgName=m[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(m,w){for(var b="",_=w/4-m.length,I=0;I<_;I++)b=b+"0";return b+m},this.setAlgAndProvider=function(m,w){if(this._setAlgNames(),w!="cryptojs/jsrsa")throw new Error("provider not supported: "+w);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new c.crypto.MessageDigest({alg:this.mdAlgName})}catch(b){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+b)}this.init=function(b,_){var I=null;try{_===void 0?I=ae.getKey(b):I=ae.getKey(b,_)}catch(D){throw"init failed:"+D}if(I.isPrivate===!0)this.prvKey=I,this.state="SIGN";else if(I.isPublic===!0)this.pubKey=I,this.state="VERIFY";else throw"init failed.:"+I},this.updateString=function(b){this.md.updateString(b)},this.updateHex=function(b){this.md.updateHex(b)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&c.crypto.ECDSA!==void 0&&(this.prvKey=new c.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof K&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof K&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof c.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof c.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(b){return this.updateString(b),this.sign()},this.signHex=function(b){return this.updateHex(b),this.sign()},this.verify=function(b){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&c.crypto.ECDSA!==void 0&&(this.pubKey=new c.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof K&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,b,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof K&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,b);if(c.crypto.ECDSA!==void 0&&this.pubKey instanceof c.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,b);if(c.crypto.DSA!==void 0&&this.pubKey instanceof c.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,b);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(m,w){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(m){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(m){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(m){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(m){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,t!==void 0&&(t.alg!==void 0&&(this.algName=t.alg,t.prov===void 0?this.provName=c.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),t.psssaltlen!==void 0&&(this.pssSaltLen=t.psssaltlen),t.prvkeypem!==void 0)){if(t.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=ae.getKey(t.prvkeypem);this.init(e)}catch(m){throw"fatal error to load pem private key: "+m}}};c.crypto.Cipher=function(t){};c.crypto.Cipher.encrypt=function(t,e,i){if(e instanceof K&&e.isPublic){var n=c.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.encrypt(t);if(n==="RSAOAEP")return e.encryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.encryptOAEP(t,"sha"+r[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.encrypt: unsupported key or algorithm"};c.crypto.Cipher.decrypt=function(t,e,i){if(e instanceof K&&e.isPrivate){var n=c.crypto.Cipher.getAlgByKeyAndName(e,i);if(n==="RSA")return e.decrypt(t);if(n==="RSAOAEP")return e.decryptOAEP(t,"sha1");var r=n.match(/^RSAOAEP(\d+)$/);if(r!==null)return e.decryptOAEP(t,"sha"+r[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+i}else throw"Cipher.decrypt: unsupported key or algorithm"};c.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof K){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e)!=-1)return e;if(e==null)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e};c.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof c>"u"||!c)&&(c={});(typeof c.crypto>"u"||!c.crypto)&&(c.crypto={});c.crypto.ECDSA=function(t){var e="secp256r1",i=null,n=null,r=null,s=Error,a=P,o=oe,l=c.crypto.ECDSA,u=c.crypto.ECParameterDB,p=l.getName,v=j,h=v.getVbyListEx,d=v.isASN1HEX,g=new Dt,f=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function y(m,w,b,_){for(var I=Math.max(w.bitLength(),_.bitLength()),D=m.add2D(b),S=m.curve.getInfinity(),x=I-1;x>=0;--x)S=S.twice2D(),S.z=a.ONE,w.testBit(x)?_.testBit(x)?S=S.add2D(D):S=S.add2D(m):_.testBit(x)&&(S=S.add2D(b));return S}this.getBigRandom=function(m){return new a(m.bitLength(),g).mod(m.subtract(a.ONE)).add(a.ONE)},this.setNamedCurve=function(m){this.ecparams=u.getByName(m),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=m},this.setPrivateKeyHex=function(m){this.isPrivate=!0,this.prvKeyHex=m},this.setPublicKeyHex=function(m){this.isPublic=!0,this.pubKeyHex=m},this.getPublicKeyXYHex=function(){var m=this.pubKeyHex;if(m.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var w=this.ecparams.keycharlen;if(m.length!==2+w*2)throw"malformed public key hex length";var b={};return b.x=m.substr(2,w),b.y=m.substr(2+w),b},this.getShortNISTPCurveName=function(){var m=this.curveName;return m==="secp256r1"||m==="NIST P-256"||m==="P-256"||m==="prime256v1"?"P-256":m==="secp384r1"||m==="NIST P-384"||m==="P-384"?"P-384":m==="secp521r1"||m==="NIST P-521"||m==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var m=this.ecparams.n,w=this.getBigRandom(m),b=this.ecparams.keycharlen,_=("0000000000"+w.toString(16)).slice(-b);this.setPrivateKeyHex(_);var I=this.generatePublicKeyHex();return{ecprvhex:_,ecpubhex:I}},this.generatePublicKeyHex=function(){var m=new a(this.prvKeyHex,16),w=this.ecparams.G.multiply(m),b=w.getX().toBigInteger(),_=w.getY().toBigInteger(),I=this.ecparams.keycharlen,D=("0000000000"+b.toString(16)).slice(-I),S=("0000000000"+_.toString(16)).slice(-I),x="04"+D+S;return this.setPublicKeyHex(x),x},this.signWithMessageHash=function(m){return this.signHex(m,this.prvKeyHex)},this.signHex=function(m,w){var b=new a(w,16),_=this.ecparams.n,I=new a(m.substring(0,this.ecparams.keycharlen),16);do var D=this.getBigRandom(_),S=this.ecparams.G,x=S.multiply(D),E=x.getX().toBigInteger().mod(_);while(E.compareTo(a.ZERO)<=0);var C=D.modInverse(_).multiply(I.add(b.multiply(E))).mod(_);return l.biRSSigToASN1Sig(E,C)},this.sign=function(m,w){var b=w,_=this.ecparams.n,I=a.fromByteArrayUnsigned(m);do var D=this.getBigRandom(_),S=this.ecparams.G,x=S.multiply(D),E=x.getX().toBigInteger().mod(_);while(E.compareTo(P.ZERO)<=0);var C=D.modInverse(_).multiply(I.add(b.multiply(E))).mod(_);return this.serializeSig(E,C)},this.verifyWithMessageHash=function(m,w){return this.verifyHex(m,w,this.pubKeyHex)},this.verifyHex=function(m,w,b){try{var _,I,D=l.parseSigHex(w);_=D.r,I=D.s;var S=o.decodeFromHex(this.ecparams.curve,b),x=new a(m.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(x,_,I,S)}catch{return!1}},this.verify=function(m,w,b){var _,I;if(Bitcoin.Util.isArray(w)){var D=this.parseSig(w);_=D.r,I=D.s}else if(typeof w=="object"&&w.r&&w.s)_=w.r,I=w.s;else throw"Invalid value for signature";var S;if(b instanceof oe)S=b;else if(Bitcoin.Util.isArray(b))S=o.decodeFrom(this.ecparams.curve,b);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var x=a.fromByteArrayUnsigned(m);return this.verifyRaw(x,_,I,S)},this.verifyRaw=function(m,w,b,_){var I=this.ecparams.n,D=this.ecparams.G;if(w.compareTo(a.ONE)<0||w.compareTo(I)>=0||b.compareTo(a.ONE)<0||b.compareTo(I)>=0)return!1;var S=b.modInverse(I),x=m.multiply(S).mod(I),E=w.multiply(S).mod(I),C=D.multiply(x).add(_.multiply(E)),T=C.getX().toBigInteger().mod(I);return T.equals(w)},this.serializeSig=function(m,w){var b=m.toByteArraySigned(),_=w.toByteArraySigned(),I=[];return I.push(2),I.push(b.length),I=I.concat(b),I.push(2),I.push(_.length),I=I.concat(_),I.unshift(I.length),I.unshift(48),I},this.parseSig=function(m){var w;if(m[0]!=48)throw new Error("Signature not a valid DERSequence");if(w=2,m[w]!=2)throw new Error("First element in signature must be a DERInteger");var b=m.slice(w+2,w+2+m[w+1]);if(w+=2+m[w+1],m[w]!=2)throw new Error("Second element in signature must be a DERInteger");var _=m.slice(w+2,w+2+m[w+1]);w+=2+m[w+1];var I=a.fromByteArrayUnsigned(b),D=a.fromByteArrayUnsigned(_);return{r:I,s:D}},this.parseSigCompact=function(m){if(m.length!==65)throw"Signature has the wrong length";var w=m[0]-27;if(w<0||w>7)throw"Invalid signature type";var b=this.ecparams.n,_=a.fromByteArrayUnsigned(m.slice(1,33)).mod(b),I=a.fromByteArrayUnsigned(m.slice(33,65)).mod(b);return{r:_,s:I,i:w}},this.readPKCS5PrvKeyHex=function(m){if(d(m)===!1)throw new Error("not ASN.1 hex string");var w,b,_;try{w=h(m,0,["[0]",0],"06"),b=h(m,0,[1],"04");try{_=h(m,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=p(w),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(_),this.setPrivateKeyHex(b),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(m){if(d(m)===!1)throw new s("not ASN.1 hex string");var w,b,_,I;try{w=h(m,0,[1,0],"06"),b=h(m,0,[1,1],"06"),_=h(m,0,[2,0,1],"04");try{I=h(m,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new s("malformed PKCS#8 plain ECC private key")}if(this.curveName=p(b),this.curveName===void 0)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(I),this.setPrivateKeyHex(_),this.isPublic=!1},this.readPKCS8PubKeyHex=function(m){if(d(m)===!1)throw new s("not ASN.1 hex string");var w,b,_;try{w=h(m,0,[0,0],"06"),b=h(m,0,[0,1],"06"),_=h(m,0,[1],"03")}catch{throw new s("malformed PKCS#8 ECC public key")}if(this.curveName=p(b),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(_)},this.readCertPubKeyHex=function(m,w){if(d(m)===!1)throw new s("not ASN.1 hex string");var b,_;try{b=h(m,0,[0,5,0,1],"06"),_=h(m,0,[0,5,1],"03")}catch{throw new s("malformed X.509 certificate ECC public key")}if(this.curveName=p(b),this.curveName===null)throw new s("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(_)},t!==void 0&&t.curve!==void 0&&(this.curveName=t.curve),this.curveName===void 0&&(this.curveName=e),this.setNamedCurve(this.curveName),t!==void 0&&(t.prv!==void 0&&this.setPrivateKeyHex(t.prv),t.pub!==void 0&&this.setPublicKeyHex(t.pub))};c.crypto.ECDSA.parseSigHex=function(t){var e=c.crypto.ECDSA.parseSigHexInHexRS(t),i=new P(e.r,16),n=new P(e.s,16);return{r:i,s:n}};c.crypto.ECDSA.parseSigHexInHexRS=function(t){var e=j,i=e.getChildIdx,n=e.getV;if(e.checkStrictDER(t,0),t.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var r=i(t,0);if(r.length!=2)throw new Error("signature shall have two elements");var s=r[0],a=r[1];if(t.substr(s,2)!="02")throw new Error("1st item not ASN.1 integer");if(t.substr(a,2)!="02")throw new Error("2nd item not ASN.1 integer");var o=n(t,s),l=n(t,a);return{r:o,s:l}};c.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=c.crypto.ECDSA.parseSigHexInHexRS(t),i=e.r,n=e.s;if(i.length>=130&&i.length<=134){if(i.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");i.substr(0,2)=="00"&&(i=i.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var r=Math.max(i.length,n.length);return i=("000000"+i).slice(-r),n=("000000"+n).slice(-r),i+n}if(i.substr(0,2)=="00"&&i.length%32==2&&(i=i.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),i.length%32==30&&(i="00"+i),n.length%32==30&&(n="00"+n),i.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return i+n};c.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var e=t.substr(0,t.length/2),i=t.substr(t.length/2);return c.crypto.ECDSA.hexRSSigToASN1Sig(e,i)};c.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var i=new P(t,16),n=new P(e,16);return c.crypto.ECDSA.biRSSigToASN1Sig(i,n)};c.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var i=c.asn1,n=new i.DERInteger({bigint:t}),r=new i.DERInteger({bigint:e}),s=new i.DERSequence({array:[n,r]});return s.tohex()};c.crypto.ECDSA.getName=function(t){return t==="2b8104001f"?"secp192k1":t==="2a8648ce3d030107"?"secp256r1":t==="2b8104000a"?"secp256k1":t==="2b81040021"?"secp224r1":t==="2b81040022"?"secp384r1":t==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(t)!==-1?"secp256r1":"|secp256k1|".indexOf(t)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(t)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(t)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(t)!==-1?"secp521r1":null};(typeof c>"u"||!c)&&(c={});(typeof c.crypto>"u"||!c.crypto)&&(c.crypto={});c.crypto.ECParameterDB=new function(){var t={},e={};function i(n){return new P(n,16)}this.getByName=function(n){var r=n;if(typeof e[r]<"u"&&(r=e[n]),typeof t[r]<"u")return t[r];throw"unregistered EC curve name: "+r},this.regist=function(n,r,s,a,o,l,u,p,v,h,d,g){t[n]={};var f=i(s),y=i(a),m=i(o),w=i(l),b=i(u),_=new Ct(f,y,m),I=_.decodePointHex("04"+p+v);t[n].name=n,t[n].keylen=r,t[n].keycharlen=Math.ceil(r/8)*2,t[n].curve=_,t[n].G=I,t[n].n=w,t[n].h=b,t[n].oid=d,t[n].info=g;for(var D=0;D<h.length;D++)e[h[D]]=n}};c.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");c.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");c.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");c.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);c.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);c.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);c.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);c.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);c.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);c.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof c>"u"||!c)&&(c={});(typeof c.crypto>"u"||!c.crypto)&&(c.crypto={});c.crypto.DSA=function(){var t=j,e=t.getVbyList,i=t.getVbyListEx,n=t.isASN1HEX,r=P;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(s,a,o,l,u){this.isPrivate=!0,this.p=s,this.q=a,this.g=o,this.y=l,this.x=u},this.setPrivateHex=function(s,a,o,l,u){var p,v,h,d,g;p=new P(s,16),v=new P(a,16),h=new P(o,16),typeof l=="string"&&l.length>1?d=new P(l,16):d=null,g=new P(u,16),this.setPrivate(p,v,h,d,g)},this.setPublic=function(s,a,o,l){this.isPublic=!0,this.p=s,this.q=a,this.g=o,this.y=l,this.x=null},this.setPublicHex=function(s,a,o,l){var u,p,v,h;u=new P(s,16),p=new P(a,16),v=new P(o,16),h=new P(l,16),this.setPublic(u,p,v,h)},this.signWithMessageHash=function(s){var a=this.p,o=this.q,l=this.g,u=this.y,p=this.x,v=c.crypto.Util.getRandomBigIntegerMinToMax(P.ONE.add(P.ONE),o.subtract(P.ONE)),h=s.substr(0,o.bitLength()/4),d=new P(h,16),g=l.modPow(v,a).mod(o),f=v.modInverse(o).multiply(d.add(p.multiply(g))).mod(o),y=c.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:g}},{int:{bigint:f}}]});return y},this.verifyWithMessageHash=function(s,a){var o=this.p,l=this.q,u=this.g,p=this.y,v=this.parseASN1Signature(a),h=v[0],d=v[1],g=s.substr(0,l.bitLength()/4),f=new P(g,16);if(P.ZERO.compareTo(h)>0||h.compareTo(l)>0||P.ZERO.compareTo(d)>=0||d.compareTo(l)>0)throw"invalid DSA signature";var y=d.modInverse(l),m=f.multiply(y).mod(l),w=h.multiply(y).mod(l),b=u.modPow(m,o).multiply(p.modPow(w,o)).mod(o).mod(l);return b.compareTo(h)==0},this.parseASN1Signature=function(s){try{var a=new r(i(s,0,[0],"02"),16),o=new r(i(s,0,[1],"02"),16);return[a,o]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(s){var a,o,l,u,p;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[1],"02"),o=i(s,0,[2],"02"),l=i(s,0,[3],"02"),u=i(s,0,[4],"02"),p=i(s,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(a,o,l,u,p)},this.readPKCS8PrvKeyHex=function(s){var a,o,l,u;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[1,1,0],"02"),o=i(s,0,[1,1,1],"02"),l=i(s,0,[1,1,2],"02"),u=i(s,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(a,o,l,null,u)},this.readPKCS8PubKeyHex=function(s){var a,o,l,u;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{a=i(s,0,[0,1,0],"02"),o=i(s,0,[0,1,1],"02"),l=i(s,0,[0,1,2],"02"),u=i(s,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(a,o,l,u)},this.readCertPubKeyHex=function(s,a){var o,l,u,p;if(n(s)===!1)throw new Error("not ASN.1 hex string");try{o=i(s,0,[0,5,0,1,0],"02"),l=i(s,0,[0,5,0,1,1],"02"),u=i(s,0,[0,5,0,1,2],"02"),p=i(s,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(o,l,u,p)}};var ae=function(){var t=function(f,y,m){return n(q.AES,f,y,m)},e=function(f,y,m){return n(q.TripleDES,f,y,m)},i=function(f,y,m){return n(q.DES,f,y,m)},n=function(f,y,m,w){var b=q.enc.Hex.parse(y),_=q.enc.Hex.parse(m),I=q.enc.Hex.parse(w),D={};D.key=_,D.iv=I,D.ciphertext=b;var S=f.decrypt(D,_,{iv:I});return q.enc.Hex.stringify(S)},r=function(f,y,m){return o(q.AES,f,y,m)},s=function(f,y,m){return o(q.TripleDES,f,y,m)},a=function(f,y,m){return o(q.DES,f,y,m)},o=function(f,y,m,w){var b=q.enc.Hex.parse(y),_=q.enc.Hex.parse(m),I=q.enc.Hex.parse(w),D=f.encrypt(b,_,{iv:I}),S=q.enc.Hex.parse(D.toString()),x=q.enc.Base64.stringify(S);return x},l={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:s,keylen:24,ivlen:8},"DES-CBC":{proc:i,eproc:a,keylen:8,ivlen:8}},u=function(f){return l[f].proc},p=function(f){var y=q.lib.WordArray.random(f),m=q.enc.Hex.stringify(y);return m},v=function(f){var y={},m=f.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));m&&(y.cipher=m[1],y.ivsalt=m[2]);var w=f.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));w&&(y.type=w[1]);var b=-1,_=0;f.indexOf(`\r
\r
`)!=-1&&(b=f.indexOf(`\r
\r
`),_=2),f.indexOf(`

`)!=-1&&(b=f.indexOf(`

`),_=1);var I=f.indexOf("-----END");if(b!=-1&&I!=-1){var D=f.substring(b+_*2,I-_);D=D.replace(/\s+/g,""),y.data=D}return y},h=function(f,y,m){for(var w=m.substring(0,16),b=q.enc.Hex.parse(w),_=q.enc.Utf8.parse(y),I=l[f].keylen+l[f].ivlen,D="",S=null;;){var x=q.algo.MD5.create();if(S!=null&&x.update(S),x.update(_),x.update(b),S=x.finalize(),D=D+q.enc.Hex.stringify(S),D.length>=I*2)break}var E={};return E.keyhex=D.substr(0,l[f].keylen*2),E.ivhex=D.substr(l[f].keylen*2,l[f].ivlen*2),E},d=function(f,y,m,w){var b=q.enc.Base64.parse(f),_=q.enc.Hex.stringify(b),I=l[y].proc,D=I(_,m,w);return D},g=function(f,y,m,w){var b=l[y].eproc,_=b(f,m,w);return _};return{version:"1.0.0",parsePKCS5PEM:function(f){return v(f)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(f,y,m){return h(f,y,m)},decryptKeyB64:function(f,y,m,w){return d(f,y,m,w)},getDecryptedKeyHex:function(f,y){var m=v(f),w=m.type,b=m.cipher,_=m.ivsalt,I=m.data,D=h(b,y,_),S=D.keyhex,x=d(I,b,S,_);return x},getEncryptedPKCS5PEMFromPrvKeyHex:function(f,y,m,w,b){var C="";if((typeof w>"u"||w==null)&&(w="AES-256-CBC"),typeof l[w]>"u")throw new Error("KEYUTIL unsupported algorithm: "+w);if(typeof b>"u"||b==null){var _=l[w].ivlen,I=p(_);b=I.toUpperCase()}var D=h(w,m,b),S=D.keyhex,x=g(y,w,S,b),E=x.replace(/(.{64})/g,`$1\r
`),C="-----BEGIN "+f+` PRIVATE KEY-----\r
`;return C+=`Proc-Type: 4,ENCRYPTED\r
`,C+="DEK-Info: "+w+","+b+`\r
`,C+=`\r
`,C+=E,C+=`\r
-----END `+f+` PRIVATE KEY-----\r
`,C},parseHexOfEncryptedPKCS8:function(f){var y=j,m=y.getChildIdx,w=y.getV,b={},_=m(f,0);if(_.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+_.length);b.ciphertext=w(f,_[1]);var I=m(f,_[0]);if(I.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+I.length);if(w(f,I[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var D=m(f,I[1]);if(I.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+D.length);var S=m(f,D[1]);if(S.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+S.length);if(w(f,S[0])!="2a864886f70d0307")throw"this only supports TripleDES";b.encryptionSchemeAlg="TripleDES",b.encryptionSchemeIV=w(f,S[1]);var x=m(f,D[0]);if(x.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+x.length);if(w(f,x[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var E=m(f,x[1]);if(E.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+E.length);b.pbkdf2Salt=w(f,E[0]);var C=w(f,E[1]);try{b.pbkdf2Iter=parseInt(C,16)}catch{throw new Error("malformed format pbkdf2Iter: "+C)}return b},getPBKDF2KeyHexFromParam:function(f,y){var m=q.enc.Hex.parse(f.pbkdf2Salt),w=f.pbkdf2Iter,b=q.PBKDF2(y,m,{keySize:192/32,iterations:w}),_=q.enc.Hex.stringify(b);return _},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(f,y){var m=Fe(f,"ENCRYPTED PRIVATE KEY"),w=this.parseHexOfEncryptedPKCS8(m),b=ae.getPBKDF2KeyHexFromParam(w,y),_={};_.ciphertext=q.enc.Hex.parse(w.ciphertext);var I=q.enc.Hex.parse(b),D=q.enc.Hex.parse(w.encryptionSchemeIV),S=q.TripleDES.decrypt(_,I,{iv:D}),x=q.enc.Hex.stringify(S);return x},getKeyFromEncryptedPKCS8PEM:function(f,y){var m=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(f,y),w=this.getKeyFromPlainPrivatePKCS8Hex(m);return w},parsePlainPrivatePKCS8Hex:function(f){var y=j,m=y.getChildIdx,w=y.getV,b={};if(b.algparam=null,f.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var _=m(f,0);if(_.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(f.substr(_[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var I=m(f,_[1]);if(I.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(f.substr(I[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(b.algoid=w(f,I[0]),f.substr(I[1],2)=="06"&&(b.algparam=w(f,I[1])),f.substr(_[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return b.keyidx=y.getVidx(f,_[2]),b},getKeyFromPlainPrivatePKCS8PEM:function(f){var y=Fe(f,"PRIVATE KEY"),m=this.getKeyFromPlainPrivatePKCS8Hex(y);return m},getKeyFromPlainPrivatePKCS8Hex:function(f){var y=this.parsePlainPrivatePKCS8Hex(f),m;if(y.algoid=="2a864886f70d010101")m=new K;else if(y.algoid=="2a8648ce380401")m=new c.crypto.DSA;else if(y.algoid=="2a8648ce3d0201")m=new c.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return m.readPKCS8PrvKeyHex(f),m},_getKeyFromPublicPKCS8Hex:function(f){var y,m=j.getVbyList(f,0,[0,0],"06");if(m==="2a864886f70d010101")y=new K;else if(m==="2a8648ce380401")y=new c.crypto.DSA;else if(m==="2a8648ce3d0201")y=new c.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return y.readPKCS8PubKeyHex(f),y},parsePublicRawRSAKeyHex:function(f){var y=j,m=y.getChildIdx,w=y.getV,b={};if(f.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var _=m(f,0);if(_.length!=2)throw new Error("malformed RSA key(code:002)");if(f.substr(_[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(b.n=w(f,_[0]),f.substr(_[1],2)!="02")throw new Error("malformed RSA key(code:004)");return b.e=w(f,_[1]),b},parsePublicPKCS8Hex:function(f){var y=j,m=y.getChildIdx,w=y.getV,b={};b.algparam=null;var _=m(f,0);if(_.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+_.length);var I=_[0];if(f.substr(I,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var D=m(f,I);if(D.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(f.substr(D[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(b.algoid=w(f,D[0]),f.substr(D[1],2)=="06"?b.algparam=w(f,D[1]):f.substr(D[1],2)=="30"&&(b.algparam={},b.algparam.p=y.getVbyList(f,D[1],[0],"02"),b.algparam.q=y.getVbyList(f,D[1],[1],"02"),b.algparam.g=y.getVbyList(f,D[1],[2],"02")),f.substr(_[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return b.key=w(f,_[1]).substr(2),b}}}();ae.getKey=function(t,e,i){var n=j,r=n.getChildIdx,s=n.getV,a=n.getVbyList,o=c.crypto,l=o.ECDSA,u=o.DSA,p=K,v=Fe,h=ae;if(typeof p<"u"&&t instanceof p||typeof l<"u"&&t instanceof l||typeof u<"u"&&t instanceof u)return t;if(t.curve!==void 0&&t.xy!==void 0&&t.d===void 0)return new l({pub:t.xy,curve:t.curve});if(t.curve!==void 0&&t.d!==void 0)return new l({prv:t.d,curve:t.curve});if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var d=new p;return d.setPublic(t.n,t.e),d}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.co!==void 0&&t.qi===void 0){var d=new p;return d.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),d}if(t.kty===void 0&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p===void 0){var d=new p;return d.setPrivate(t.n,t.e,t.d),d}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x===void 0){var d=new u;return d.setPublic(t.p,t.q,t.g,t.y),d}if(t.p!==void 0&&t.q!==void 0&&t.g!==void 0&&t.y!==void 0&&t.x!==void 0){var d=new u;return d.setPrivate(t.p,t.q,t.g,t.y,t.x),d}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d===void 0){var d=new p;return d.setPublic(xe(t.n),xe(t.e)),d}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0&&t.p!==void 0&&t.q!==void 0&&t.dp!==void 0&&t.dq!==void 0&&t.qi!==void 0){var d=new p;return d.setPrivateEx(xe(t.n),xe(t.e),xe(t.d),xe(t.p),xe(t.q),xe(t.dp),xe(t.dq),xe(t.qi)),d}if(t.kty==="RSA"&&t.n!==void 0&&t.e!==void 0&&t.d!==void 0){var d=new p;return d.setPrivate(xe(t.n),xe(t.e),xe(t.d)),d}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d===void 0){var g=new l({curve:t.crv}),f=g.ecparams.keycharlen,y=("0000000000"+xe(t.x)).slice(-f),m=("0000000000"+xe(t.y)).slice(-f),w="04"+y+m;return g.setPublicKeyHex(w),g}if(t.kty==="EC"&&t.crv!==void 0&&t.x!==void 0&&t.y!==void 0&&t.d!==void 0){var g=new l({curve:t.crv}),f=g.ecparams.keycharlen,y=("0000000000"+xe(t.x)).slice(-f),m=("0000000000"+xe(t.y)).slice(-f),w="04"+y+m,b=("0000000000"+xe(t.d)).slice(-f);return g.setPublicKeyHex(w),g.setPrivateKeyHex(b),g}if(i==="pkcs5prv"){var _=t,n=j,I,d;if(I=r(_,0),I.length===9)d=new p,d.readPKCS5PrvKeyHex(_);else if(I.length===6)d=new u,d.readPKCS5PrvKeyHex(_);else if(I.length>2&&_.substr(I[1],2)==="04")d=new l,d.readPKCS5PrvKeyHex(_);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return d}if(i==="pkcs8prv"){var d=h.getKeyFromPlainPrivatePKCS8Hex(t);return d}if(i==="pkcs8pub")return h._getKeyFromPublicPKCS8Hex(t);if(i==="x509pub")return Y.getPublicKeyFromCertHex(t);if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Y.getPublicKeyFromCertPEM(t);if(t.indexOf("-END PUBLIC KEY-")!=-1){var D=Fe(t,"PUBLIC KEY");return h._getKeyFromPublicPKCS8Hex(D)}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var S=v(t,"RSA PRIVATE KEY");return h.getKey(S,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var x=v(t,"DSA PRIVATE KEY"),E=a(x,0,[1],"02"),C=a(x,0,[2],"02"),T=a(x,0,[3],"02"),R=a(x,0,[4],"02"),M=a(x,0,[5],"02"),d=new u;return d.setPrivate(new P(E,16),new P(C,16),new P(T,16),new P(R,16),new P(M,16)),d}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var S=v(t,"EC PRIVATE KEY");return h.getKey(S,null,"pkcs5prv")}if(t.indexOf("-END PRIVATE KEY-")!=-1)return h.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var F=h.getDecryptedKeyHex(t,e),N=new K;return N.readPKCS5PrvKeyHex(F),N}if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var x=h.getDecryptedKeyHex(t,e),d=a(x,0,[1],"04"),O=a(x,0,[2,0],"06"),k=a(x,0,[3,0],"03").substr(2),$="";if(c.crypto.OID.oidhex2name[O]!==void 0)$=c.crypto.OID.oidhex2name[O];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+O);var g=new l({curve:$});return g.setPublicKeyHex(k),g.setPrivateKeyHex(d),g.isPublic=!1,g}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var x=h.getDecryptedKeyHex(t,e),E=a(x,0,[1],"02"),C=a(x,0,[2],"02"),T=a(x,0,[3],"02"),R=a(x,0,[4],"02"),M=a(x,0,[5],"02"),d=new u;return d.setPrivate(new P(E,16),new P(C,16),new P(T,16),new P(R,16),new P(M,16)),d}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return h.getKeyFromEncryptedPKCS8PEM(t,e);throw new Error("not supported argument")};ae.generateKeypair=function(t,e){if(t=="RSA"){var i=e,n=new K;n.generate(i,"10001"),n.isPrivate=!0,n.isPublic=!0;var r=new K,s=n.n.toString(16),a=n.e.toString(16);r.setPublic(s,a),r.isPrivate=!1,r.isPublic=!0;var o={};return o.prvKeyObj=n,o.pubKeyObj=r,o}else if(t=="EC"){var l=e,u=new c.crypto.ECDSA({curve:l}),p=u.generateKeyPairHex(),n=new c.crypto.ECDSA({curve:l});n.setPublicKeyHex(p.ecpubhex),n.setPrivateKeyHex(p.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var r=new c.crypto.ECDSA({curve:l});r.setPublicKeyHex(p.ecpubhex),r.isPrivate=!1,r.isPublic=!0;var o={};return o.prvKeyObj=n,o.pubKeyObj=r,o}else throw new Error("unknown algorithm: "+t)};ae.getPEM=function(t,e,i,n,r,s){var a=c,o=a.asn1,l=o.DERObjectIdentifier,u=o.DERInteger,p=o.ASN1Util.newObject,v=o.x509,h=v.SubjectPublicKeyInfo,d=a.crypto,g=d.DSA,f=d.ECDSA,y=K;function m(O){var k=p({seq:[{int:0},{int:{bigint:O.n}},{int:O.e},{int:{bigint:O.d}},{int:{bigint:O.p}},{int:{bigint:O.q}},{int:{bigint:O.dmp1}},{int:{bigint:O.dmq1}},{int:{bigint:O.coeff}}]});return k}function w(O){var k=p({seq:[{int:1},{octstr:{hex:O.prvKeyHex}},{tag:["a0",!0,{oid:{name:O.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+O.pubKeyHex}}]}]});return k}function b(O){var k=p({seq:[{int:0},{int:{bigint:O.p}},{int:{bigint:O.q}},{int:{bigint:O.g}},{int:{bigint:O.y}},{int:{bigint:O.x}}]});return k}if((y!==void 0&&t instanceof y||g!==void 0&&t instanceof g||f!==void 0&&t instanceof f)&&t.isPublic==!0&&(e===void 0||e=="PKCS8PUB")){var _=new h(t),I=_.tohex();return Be(I,"PUBLIC KEY")}if(e=="PKCS1PRV"&&y!==void 0&&t instanceof y&&(i===void 0||i==null)&&t.isPrivate==!0){var _=m(t),I=_.tohex();return Be(I,"RSA PRIVATE KEY")}if(e=="PKCS1PRV"&&f!==void 0&&t instanceof f&&(i===void 0||i==null)&&t.isPrivate==!0){var D=new l({name:t.curveName}),S=D.tohex(),x=w(t),E=x.tohex(),C="";return C+=Be(S,"EC PARAMETERS"),C+=Be(E,"EC PRIVATE KEY"),C}if(e=="PKCS1PRV"&&g!==void 0&&t instanceof g&&(i===void 0||i==null)&&t.isPrivate==!0){var _=b(t),I=_.tohex();return Be(I,"DSA PRIVATE KEY")}if(e=="PKCS5PRV"&&y!==void 0&&t instanceof y&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=m(t),I=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",I,i,n,s)}if(e=="PKCS5PRV"&&f!==void 0&&t instanceof f&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=w(t),I=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",I,i,n,s)}if(e=="PKCS5PRV"&&g!==void 0&&t instanceof g&&i!==void 0&&i!=null&&t.isPrivate==!0){var _=b(t),I=_.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",I,i,n,s)}var T=function(O,k){var $=R(O,k),U=new p({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:$.pbkdf2Salt}},{int:$.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:$.encryptionSchemeIV}}]}]}]},{octstr:{hex:$.ciphertext}}]});return U.tohex()},R=function(O,k){var $=100,U=q.lib.WordArray.random(8),J="DES-EDE3-CBC",ee=q.lib.WordArray.random(8),te=q.PBKDF2(k,U,{keySize:192/32,iterations:$}),_e=q.enc.Hex.parse(O),pe=q.TripleDES.encrypt(_e,te,{iv:ee})+"",Ce={};return Ce.ciphertext=pe,Ce.pbkdf2Salt=q.enc.Hex.stringify(U),Ce.pbkdf2Iter=$,Ce.encryptionSchemeAlg=J,Ce.encryptionSchemeIV=q.enc.Hex.stringify(ee),Ce};if(e=="PKCS8PRV"&&y!=null&&t instanceof y&&t.isPrivate==!0){var M=m(t),F=M.tohex(),_=p({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:F}}]}),I=_.tohex();if(i===void 0||i==null)return Be(I,"PRIVATE KEY");var E=T(I,i);return Be(E,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&f!==void 0&&t instanceof f&&t.isPrivate==!0){var N={seq:[{int:1},{octstr:{hex:t.prvKeyHex}}]};typeof t.pubKeyHex=="string"&&N.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]});var M=new p(N),F=M.tohex(),_=p({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:F}}]}),I=_.tohex();if(i===void 0||i==null)return Be(I,"PRIVATE KEY");var E=T(I,i);return Be(E,"ENCRYPTED PRIVATE KEY")}if(e=="PKCS8PRV"&&g!==void 0&&t instanceof g&&t.isPrivate==!0){var M=new u({bigint:t.x}),F=M.tohex(),_=p({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:t.p}},{int:{bigint:t.q}},{int:{bigint:t.g}}]}]},{octstr:{hex:F}}]}),I=_.tohex();if(i===void 0||i==null)return Be(I,"PRIVATE KEY");var E=T(I,i);return Be(E,"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")};ae.getKeyFromCSRPEM=function(t){var e=Fe(t,"CERTIFICATE REQUEST"),i=ae.getKeyFromCSRHex(e);return i};ae.getKeyFromCSRHex=function(t){var e=ae.parseCSRHex(t),i=ae.getKey(e.p8pubkeyhex,null,"pkcs8pub");return i};ae.parseCSRHex=function(t){var e=j,i=e.getChildIdx,n=e.getTLV,r={},s=t;if(s.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var a=i(s,0);if(a.length<1)throw new Error("malformed CSR(code:002)");if(s.substr(a[0],2)!="30")throw new Error("malformed CSR(code:003)");var o=i(s,a[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return r.p8pubkeyhex=n(s,o[2]),r};ae.getKeyID=function(t){var e=ae,i=j;typeof t=="string"&&t.indexOf("BEGIN ")!=-1&&(t=e.getKey(t));var n=Fe(e.getPEM(t)),r=i.getIdxbyList(n,0,[1]),s=i.getV(n,r).substring(2);return c.crypto.Util.hashHex(s,"sha1")};ae.getJWK=function(t,e,i,n,r){var s,a={},o,l=c.crypto.Util.hashHex;if(typeof t=="string")s=ae.getKey(t),t.indexOf("CERTIFICATE")!=-1&&(o=Fe(t));else if(typeof t=="object")t instanceof Y?(s=t.getPublicKey(),o=t.hex):s=t;else throw new Error("unsupported keyinfo type");if(s instanceof K&&s.isPrivate)a.kty="RSA",a.n=Oe(s.n.toString(16)),a.e=Oe(s.e.toString(16)),a.d=Oe(s.d.toString(16)),a.p=Oe(s.p.toString(16)),a.q=Oe(s.q.toString(16)),a.dp=Oe(s.dmp1.toString(16)),a.dq=Oe(s.dmq1.toString(16)),a.qi=Oe(s.coeff.toString(16));else if(s instanceof K&&s.isPublic)a.kty="RSA",a.n=Oe(s.n.toString(16)),a.e=Oe(s.e.toString(16));else if(s instanceof c.crypto.ECDSA&&s.isPrivate){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var p=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=Oe(p.x),a.y=Oe(p.y),a.d=Oe(s.prvKeyHex)}else if(s instanceof c.crypto.ECDSA&&s.isPublic){var u=s.getShortNISTPCurveName();if(u!=="P-256"&&u!=="P-384"&&u!=="P-521")throw new Error("unsupported curve name for JWT: "+u);var p=s.getPublicKeyXYHex();a.kty="EC",a.crv=u,a.x=Oe(p.x),a.y=Oe(p.y)}if(a.kty==null)throw new Error("unsupported keyinfo");return!s.isPrivate&&e!=!0&&(a.kid=c.jws.JWS.getJWKthumbprint(a)),o!=null&&i!=!0&&(a.x5c=[It(o)]),o!=null&&n!=!0&&(a.x5t=Qt(It(l(o,"sha1")))),o!=null&&r!=!0&&(a["x5t#S256"]=Qt(It(l(o,"sha256")))),a};ae.getJWKFromKey=function(t){return ae.getJWK(t,!0,!0,!0,!0)};K.getPosArrayOfChildrenFromHex=function(t){return j.getChildIdx(t,0)};K.getHexValueArrayOfChildrenFromHex=function(t){var e=j,i=e.getV,h=K.getPosArrayOfChildrenFromHex(t),n=i(t,h[0]),r=i(t,h[1]),s=i(t,h[2]),a=i(t,h[3]),o=i(t,h[4]),l=i(t,h[5]),u=i(t,h[6]),p=i(t,h[7]),v=i(t,h[8]),h=new Array;return h.push(n,r,s,a,o,l,u,p,v),h};K.prototype.readPrivateKeyFromPEMString=function(t){var e=Fe(t),i=K.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8])};K.prototype.readPKCS5PrvKeyHex=function(t){var e=K.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])};K.prototype.readPKCS8PrvKeyHex=function(t){var e,i,n,r,s,a,o,l,u=j,p=u.getVbyListEx;if(u.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");try{e=p(t,0,[2,0,1],"02"),i=p(t,0,[2,0,2],"02"),n=p(t,0,[2,0,3],"02"),r=p(t,0,[2,0,4],"02"),s=p(t,0,[2,0,5],"02"),a=p(t,0,[2,0,6],"02"),o=p(t,0,[2,0,7],"02"),l=p(t,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(e,i,n,r,s,a,o,l)};K.prototype.readPKCS5PubKeyHex=function(t){var e=j,i=e.getV;if(e.isASN1HEX(t)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=e.getChildIdx(t,0);if(n.length!==2||t.substr(n[0],2)!=="02"||t.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var r=i(t,n[0]),s=i(t,n[1]);this.setPublic(r,s)};K.prototype.readPKCS8PubKeyHex=function(t){var e=j;if(e.isASN1HEX(t)===!1)throw new Error("not ASN.1 hex string");if(e.getTLVbyListEx(t,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var i=e.getTLVbyListEx(t,0,[1,0]);this.readPKCS5PubKeyHex(i)};K.prototype.readCertPubKeyHex=function(t,e){var i,n;i=new Y,i.readCertHex(t),n=i.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var $p=new RegExp("[^0-9a-f]","gi");function Ho(t,e){for(var i="",n=e/4-t.length,r=0;r<n;r++)i=i+"0";return i+t}K.prototype.sign=function(t,e){var i=function(r){return c.crypto.Util.hashString(r,e)},n=i(t);return this.signWithMessageHash(n,e)};K.prototype.signWithMessageHash=function(t,e){var i=c.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),n=Ke(i,16),r=this.doPrivate(n),s=r.toString(16);return Ho(s,this.n.bitLength())};function Vo(t,e,i){for(var n="",r=0;n.length<e;)n+=Ge(i(lt(t+String.fromCharCode.apply(String,[(r&4278190080)>>24,(r&16711680)>>16,(r&65280)>>8,r&255])))),r+=1;return n}K.prototype.signPSS=function(t,e,i){var n=function(s){return c.crypto.Util.hashHex(s,e)},r=n(lt(t));return i===void 0&&(i=-1),this.signWithMessageHashPSS(r,e,i)};K.prototype.signWithMessageHashPSS=function(t,e,i){var n=Ge(t),r=n.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),o,l=function(y){return c.crypto.Util.hashHex(y,e)};if(i===-1||i===void 0)i=r;else if(i===-2)i=a-r-2;else if(i<-2)throw new Error("invalid salt length");if(a<r+i+2)throw new Error("data too long");var u="";i>0&&(u=new Array(i),new Dt().nextBytes(u),u=String.fromCharCode.apply(String,u));var p=Ge(l(lt("\0\0\0\0\0\0\0\0"+n+u))),v=[];for(o=0;o<a-i-r-2;o+=1)v[o]=0;var h=String.fromCharCode.apply(String,v)+""+u,d=Vo(p,h.length,l),g=[];for(o=0;o<h.length;o+=1)g[o]=h.charCodeAt(o)^d.charCodeAt(o);var f=65280>>8*a-s&255;for(g[0]&=~f,o=0;o<r;o++)g.push(p.charCodeAt(o));return g.push(188),Ho(this.doPrivate(new P(g)).toString(16),this.n.bitLength())};function qo(t){for(var e in c.crypto.Util.DIGESTINFOHEAD){var i=c.crypto.Util.DIGESTINFOHEAD[e],n=i.length;if(t.substring(0,n)==i){var r=[e,t.substring(n)];return r}}return[]}K.prototype.verify=function(t,e){if(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null)return!1;var i=Ke(e,16),n=this.n.bitLength();if(i.bitLength()>n)return!1;var r=this.doPublic(i),s=r.toString(16);if(s.length+3!=n/4)return!1;var a=s.replace(/^1f+00/,""),o=qo(a);if(o.length==0)return!1;var l=o[0],u=o[1],p=function(h){return c.crypto.Util.hashString(h,l)},v=p(t);return u==v};K.prototype.verifyWithMessageHash=function(t,e){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=Ke(e,16);if(i.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(i),r=n.toString(16).replace(/^1f+00/,""),s=qo(r);if(s.length==0)return!1;var a=s[0],o=s[1];return o==t};K.prototype.verifyPSS=function(t,e,i,n){var r=function(a){return c.crypto.Util.hashHex(a,i)},s=r(lt(t));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(s,e,i,n)};K.prototype.verifyWithMessageHashPSS=function(t,e,i,n){if(e.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=new P(e,16),s=function(w){return c.crypto.Util.hashHex(w,i)},a=Ge(t),o=a.length,l=this.n.bitLength()-1,u=Math.ceil(l/8),p;if(n===-1||n===void 0)n=o;else if(n===-2)n=u-o-2;else if(n<-2)throw new Error("invalid salt length");if(u<o+n+2)throw new Error("data too long");var v=this.doPublic(r).toByteArray();for(p=0;p<v.length;p+=1)v[p]&=255;for(;v.length<u;)v.unshift(0);if(v[u-1]!==188)throw new Error("encoded message does not end in 0xbc");v=String.fromCharCode.apply(String,v);var h=v.substr(0,u-o-1),d=v.substr(h.length,o),g=65280>>8*u-l&255;if(h.charCodeAt(0)&g)throw new Error("bits beyond keysize not zero");var f=Vo(d,h.length,s),y=[];for(p=0;p<h.length;p+=1)y[p]=h.charCodeAt(p)^f.charCodeAt(p);y[0]&=~g;var m=u-o-n-2;for(p=0;p<m;p+=1)if(y[p]!==0)throw new Error("leftmost octets not zero");if(y[m]!==1)throw new Error("0x01 marker not found");return d===Ge(s(lt("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,y.slice(-n)))))};K.SALT_LEN_HLEN=-1;K.SALT_LEN_MAX=-2;K.SALT_LEN_RECOVER=-2;function Y(t){var e=j,i=e.getChildIdx,n=e.getV,r=e.dump,s=e.parse,a=e.getTLV,o=e.getVbyList,l=e.getVbyListEx,u=e.getTLVbyList,p=e.getTLVbyListEx,v=e.getIdxbyList,h=e.getIdxbyListEx,d=e.getVidx,g=e.getInt,f=e.oidname,y=e.hextooidstr,m=Y,w=Fe,b;try{b=c.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var S=u(this.hex,0,[0,0]);if(S.substr(0,2)=="a0"){var x=u(S,0,[0]),E=g(x,0);if(E<0||2<E)throw new Error("malformed version field");return this.version=E+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return l(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var S=p(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(S)},this.getAlgorithmIdentifierName=function(S){for(var x in b)if(S===b[x])return x;return f(l(S,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var S=this.getIssuer();return S.str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return u(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var S=this.getSubject();return S.str},this.getNotBefore=function(){var S=o(this.hex,0,[0,4+this.foffset,0]);return S=S.replace(/(..)/g,"%$1"),S=decodeURIComponent(S),S},this.getNotAfter=function(){var S=o(this.hex,0,[0,4+this.foffset,1]);return S=S.replace(/(..)/g,"%$1"),S=decodeURIComponent(S),S},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return u(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var S=this.getSPKI();return S==null?null:o(S,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return v(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var S=this.getPublicKeyIdx();return v(this.hex,S,[1,0],"30")},this.getPublicKey=function(){return ae.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var S=u(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(S)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(S){var x=this.getSignatureAlgorithmField(),E=this.getSignatureValueHex(),C=u(this.hex,0,[0],"30"),T=new c.crypto.Signature({alg:x});return T.init(S),T.updateHex(C),T.verify(E)},this.parseExt=function(S){var x,E,C;if(S===void 0){if(C=this.hex,this.version!==3)return-1;x=v(C,0,[0,7,0],"30"),E=i(C,x)}else{C=Fe(S);var T=v(C,0,[0,3,0,0],"06");if(n(C,T)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}x=v(C,0,[0,3,0,1,0],"30"),E=i(C,x),this.hex=C}this.aExtInfo=new Array;for(var R=0;R<E.length;R++){var M={};M.critical=!1;var F=i(C,E[R]),N=0;F.length===3&&(M.critical=!0,N=1),M.oid=e.hextooidstr(o(C,E[R],[0],"06"));var O=v(C,E[R],[1+N]);M.vidx=d(C,O),this.aExtInfo.push(M)}},this.getExtInfo=function(S){var x=this.aExtInfo,E=S;if(S.match(/^[0-9.]+$/)||(E=c.asn1.x509.OID.name2oid(S)),E!==""){for(var C=0;C<x.length;C++)if(x[C].oid===E)return x[C]}},this.getExtBasicConstraints=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("basicConstraints");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"basicConstraints"};if(x&&(C.critical=!0),S==="3000")return C;if(S==="30030101ff")return C.cA=!0,C;if(S.substr(0,12)==="30060101ff02"){var T=n(S,10),R=parseInt(T,16);return C.cA=!0,C.pathLen=R,C}throw new Error("hExtV parse error: "+S)},this.getExtNameConstraints=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("nameConstraints");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"nameConstraints"};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++){for(var M=[],F=i(S,T[R]),N=0;N<F.length;N++){var O=a(S,F[N]),k=this.getGeneralSubtree(O);M.push(k)}var $=S.substr(T[R],2);$=="a0"?C.permit=M:$=="a1"&&(C.exclude=M)}return C},this.getGeneralSubtree=function(S){var x=i(S,0),E=x.length;if(E<1||2<E)throw new Error("wrong num elements");for(var C=this.getGeneralName(a(S,x[0])),T=1;T<E;T++){var R=S.substr(x[T],2),M=n(S,x[T]),F=parseInt(M,16);R=="80"&&(C.min=F),R=="81"&&(C.max=F)}return C},this.getExtKeyUsage=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("keyUsage");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"keyUsage"};return x&&(C.critical=!0),C.names=this.getExtKeyUsageString(S).split(","),C},this.getExtKeyUsageBin=function(S){if(S===void 0){var x=this.getExtInfo("keyUsage");if(x===void 0)return"";S=a(this.hex,x.vidx)}if(S.length!=8&&S.length!=10)throw new Error("malformed key usage value: "+S);var E="000000000000000"+parseInt(S.substr(6),16).toString(2);return S.length==8&&(E=E.slice(-8)),S.length==10&&(E=E.slice(-16)),E=E.replace(/0+$/,""),E==""&&(E="0"),E},this.getExtKeyUsageString=function(S){for(var x=this.getExtKeyUsageBin(S),E=new Array,C=0;C<x.length;C++)x.substr(C,1)=="1"&&E.push(Y.KEYUSAGE_NAME[C]);return E.join(",")},this.getExtSubjectKeyIdentifier=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("subjectKeyIdentifier");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"subjectKeyIdentifier"};x&&(C.critical=!0);var T=n(S,0);return C.kid={hex:T},C},this.getExtAuthorityKeyIdentifier=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("authorityKeyIdentifier");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"authorityKeyIdentifier"};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++){var M=S.substr(T[R],2);if(M==="80"&&(C.kid={hex:n(S,T[R])}),M==="a1"){var F=a(S,T[R]),N=this.getGeneralNames(F);C.issuer=N[0].dn}M==="82"&&(C.sn={hex:n(S,T[R])})}return C},this.getExtExtKeyUsage=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("extKeyUsage");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"extKeyUsage",array:[]};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++)C.array.push(f(n(S,T[R])));return C},this.getExtExtKeyUsageName=function(){var S=this.getExtInfo("extKeyUsage");if(S===void 0)return S;var x=new Array,E=a(this.hex,S.vidx);if(E==="")return x;for(var C=i(E,0),T=0;T<C.length;T++)x.push(f(n(E,C[T])));return x},this.getExtSubjectAltName=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("subjectAltName");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"subjectAltName",array:[]};return x&&(C.critical=!0),C.array=this.getGeneralNames(S),C},this.getExtIssuerAltName=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("issuerAltName");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"issuerAltName",array:[]};return x&&(C.critical=!0),C.array=this.getGeneralNames(S),C},this.getGeneralNames=function(S){for(var x=i(S,0),E=[],C=0;C<x.length;C++){var T=this.getGeneralName(a(S,x[C]));T!==void 0&&E.push(T)}return E},this.getGeneralName=function(S){var x=S.substr(0,2),E=n(S,0),C=Ge(E);if(x=="81")return{rfc822:C};if(x=="82")return{dns:C};if(x=="86")return{uri:C};if(x=="87")return{ip:Li(E)};if(x=="a4")return{dn:this.getX500Name(E)};if(x=="a0")return{other:this.getOtherName(S)}},this.getExtSubjectAltName2=function(){var S,x,E,C=this.getExtInfo("subjectAltName");if(C===void 0)return C;for(var T=new Array,R=a(this.hex,C.vidx),M=i(R,0),F=0;F<M.length;F++)E=R.substr(M[F],2),S=n(R,M[F]),E==="81"&&(x=fe(S),T.push(["MAIL",x])),E==="82"&&(x=fe(S),T.push(["DNS",x])),E==="84"&&(x=Y.hex2dn(S,0),T.push(["DN",x])),E==="86"&&(x=fe(S),T.push(["URI",x])),E==="87"&&(x=Li(S),T.push(["IP",x]));return T},this.getExtCRLDistributionPoints=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("cRLDistributionPoints");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"cRLDistributionPoints",array:[]};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++){var M=a(S,T[R]);C.array.push(this.getDistributionPoint(M))}return C},this.getDistributionPoint=function(S){for(var x={},E=i(S,0),C=0;C<E.length;C++){var T=S.substr(E[C],2),R=a(S,E[C]);T=="a0"&&(x.dpname=this.getDistributionPointName(R))}return x},this.getDistributionPointName=function(S){for(var x={},E=i(S,0),C=0;C<E.length;C++){var T=S.substr(E[C],2),R=a(S,E[C]);T=="a0"&&(x.full=this.getGeneralNames(R))}return x},this.getExtCRLDistributionPointsURI=function(){var S=this.getExtCRLDistributionPoints();if(S==null)return S;for(var x=S.array,E=[],C=0;C<x.length;C++)try{x[C].dpname.full[0].uri!=null&&E.push(x[C].dpname.full[0].uri)}catch{}return E},this.getExtAIAInfo=function(){var S=this.getExtInfo("authorityInfoAccess");if(S===void 0)return S;for(var x={ocsp:[],caissuer:[]},E=i(this.hex,S.vidx),C=0;C<E.length;C++){var T=o(this.hex,E[C],[0],"06"),R=o(this.hex,E[C],[1],"86");T==="2b06010505073001"&&x.ocsp.push(fe(R)),T==="2b06010505073002"&&x.caissuer.push(fe(R))}return x},this.getExtAuthorityInfoAccess=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("authorityInfoAccess");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"authorityInfoAccess",array:[]};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++){var M=l(S,T[R],[0],"06"),F=o(S,T[R],[1],"86"),N=fe(F);if(M=="2b06010505073001")C.array.push({ocsp:N});else if(M=="2b06010505073002")C.array.push({caissuer:N});else throw new Error("unknown method: "+M)}return C},this.getExtCertificatePolicies=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("certificatePolicies");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"certificatePolicies",array:[]};x&&(C.critical=!0);for(var T=i(S,0),R=0;R<T.length;R++){var M=a(S,T[R]),F=this.getPolicyInformation(M);C.array.push(F)}return C},this.getPolicyInformation=function(S){var x={},E=o(S,0,[0],"06");x.policyoid=f(E);var C=h(S,0,[1],"30");if(C!=-1){x.array=[];for(var T=i(S,C),R=0;R<T.length;R++){var M=a(S,T[R]),F=this.getPolicyQualifierInfo(M);x.array.push(F)}}return x},this.getOtherName=function(S){var x={},E=i(S,0),C=o(S,E[0],[],"06"),T=o(S,E[1],[]);return x.oid=c.asn1.ASN1Util.oidHexToInt(C),x.obj=s(T),x},this.getPolicyQualifierInfo=function(S){var x={},E=o(S,0,[0],"06");if(E==="2b06010505070201"){var C=l(S,0,[1],"16");x.cps=Ge(C)}else if(E==="2b06010505070202"){var T=u(S,0,[1],"30");x.unotice=this.getUserNotice(T)}return x},this.getUserNotice=function(S){for(var x={},E=i(S,0),C=0;C<E.length;C++){var T=a(S,E[C]);T.substr(0,2)!="30"&&(x.exptext=this.getDisplayText(T))}return x},this.getDisplayText=function(S){var x={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},E={};return E.type=x[S.substr(0,2)],E.str=Ge(n(S,0)),E},this.getExtCRLNumber=function(S,x){var E={extname:"cRLNumber"};if(x&&(E.critical=!0),S.substr(0,2)=="02")return E.num={hex:n(S,0)},E;throw new Error("hExtV parse error: "+S)},this.getExtCRLReason=function(S,x){var E={extname:"cRLReason"};if(x&&(E.critical=!0),S.substr(0,2)=="0a")return E.code=parseInt(n(S,0),16),E;throw new Error("hExtV parse error: "+S)},this.getExtOcspNonce=function(S,x){var E={extname:"ocspNonce"};x&&(E.critical=!0);var C=n(S,0);return E.hex=C,E},this.getExtOcspNoCheck=function(S,x){var E={extname:"ocspNoCheck"};return x&&(E.critical=!0),E},this.getExtAdobeTimeStamp=function(S,x){if(S===void 0&&x===void 0){var E=this.getExtInfo("adobeTimeStamp");if(E===void 0)return;S=a(this.hex,E.vidx),x=E.critical}var C={extname:"adobeTimeStamp"};x&&(C.critical=!0);var T=i(S,0);if(T.length>1){var R=a(S,T[1]),M=this.getGeneralName(R);M.uri!=null&&(C.uri=M.uri)}if(T.length>2){var F=a(S,T[2]);F=="0101ff"&&(C.reqauth=!0),F=="010100"&&(C.reqauth=!1)}return C};var _=function(S){var x={};try{var E=S.seq[0].oid,C=c.asn1.x509.OID.name2oid(E);x.type=c.asn1.x509.OID.oid2atype(C);var T=S.seq[1];if(T.utf8str!=null)x.ds="utf8",x.value=T.utf8str.str;else if(T.numstr!=null)x.ds="num",x.value=T.numstr.str;else if(T.telstr!=null)x.ds="tel",x.value=T.telstr.str;else if(T.prnstr!=null)x.ds="prn",x.value=T.prnstr.str;else if(T.ia5str!=null)x.ds="ia5",x.value=T.ia5str.str;else if(T.visstr!=null)x.ds="vis",x.value=T.visstr.str;else if(T.bmpstr!=null)x.ds="bmp",x.value=T.bmpstr.str;else throw"error";return x}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},I=function(S){try{return S.set.map(function(x){return _(x)})}catch(x){throw new Error("improper ASN.1 parsed RDN: "+x)}},D=function(S){try{return S.seq.map(function(x){return I(x)})}catch(x){throw new Error("improper ASN.1 parsed X500Name: "+x)}};this.getX500NameRule=function(S){for(var x=!0,E=!0,C=!1,T="",R="",M=null,F=[],N=0;N<S.length;N++)for(var O=S[N],k=0;k<O.length;k++)F.push(O[k]);for(var N=0;N<F.length;N++){var $=F[N],U=$.ds,J=$.value,ee=$.type;if(T+=":"+U,U!="prn"&&U!="utf8"&&U!="ia5")return"mixed";if(U=="ia5"){if(ee!="CN")return"mixed";if(c.lang.String.isMail(J))continue;return"mixed"}if(ee=="C"){if(U=="prn")continue;return"mixed"}if(R+=":"+U,M==null)M=U;else if(M!==U)return"mixed"}return M??"prn"},this.getAttrTypeAndValue=function(S){var x=s(S);return _(x)},this.getRDN=function(S){var x=s(S);return I(x)},this.getX500NameArray=function(S){var x=s(S);return D(x)},this.getX500Name=function(S){var x=this.getX500NameArray(S),E=this.dnarraytostr(x);return{array:x,str:E}},this.readCertPEM=function(S){this.readCertHex(w(S))},this.readCertHex=function(S){this.hex=S,this.getVersion();try{v(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(S){var x={};return x.version=this.getVersion(),x.serial={hex:this.getSerialNumberHex()},x.sigalg=this.getSignatureAlgorithmField(),x.issuer=this.getIssuer(),x.notbefore=this.getNotBefore(),x.notafter=this.getNotAfter(),x.subject=this.getSubject(),x.sbjpubkey=Be(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(x.ext=this.getExtParamArray()),x.sighex=this.getSignatureValueHex(),typeof S=="object"&&(S.tbshex==!0&&(x.tbshex=u(this.hex,0,[0])),S.nodnarray==!0&&(delete x.issuer.array,delete x.subject.array)),x},this.getExtParamArray=function(S){if(S==null){var x=h(this.hex,0,[0,"[3]"]);x!=-1&&(S=p(this.hex,0,[0,"[3]",0],"30"))}for(var E=[],C=i(S,0),T=0;T<C.length;T++){var R=a(S,C[T]),M=this.getExtParam(R);M!=null&&E.push(M)}return E},this.getExtParam=function(S){var x={},E=i(S,0),C=E.length;if(C!=2&&C!=3)throw new Error("wrong number elements in Extension: "+C+" "+S);var T=y(o(S,0,[0],"06")),R=!1;C==3&&u(S,0,[1])=="0101ff"&&(R=!0);var M=u(S,0,[C-1,0]),F=void 0;if(T=="2.5.29.14"?F=this.getExtSubjectKeyIdentifier(M,R):T=="2.5.29.15"?F=this.getExtKeyUsage(M,R):T=="2.5.29.17"?F=this.getExtSubjectAltName(M,R):T=="2.5.29.18"?F=this.getExtIssuerAltName(M,R):T=="2.5.29.19"?F=this.getExtBasicConstraints(M,R):T=="2.5.29.30"?F=this.getExtNameConstraints(M,R):T=="2.5.29.31"?F=this.getExtCRLDistributionPoints(M,R):T=="2.5.29.32"?F=this.getExtCertificatePolicies(M,R):T=="2.5.29.35"?F=this.getExtAuthorityKeyIdentifier(M,R):T=="2.5.29.37"?F=this.getExtExtKeyUsage(M,R):T=="1.3.6.1.5.5.7.1.1"?F=this.getExtAuthorityInfoAccess(M,R):T=="2.5.29.20"?F=this.getExtCRLNumber(M,R):T=="2.5.29.21"?F=this.getExtCRLReason(M,R):T=="1.3.6.1.5.5.7.48.1.2"?F=this.getExtOcspNonce(M,R):T=="1.3.6.1.5.5.7.48.1.5"?F=this.getExtOcspNoCheck(M,R):T=="1.2.840.113583.1.1.9.1"&&(F=this.getExtAdobeTimeStamp(M,R)),F!=null)return F;var N={extname:T,extn:M};return R&&(N.critical=!0),N},this.findExt=function(S,x){for(var E=0;E<S.length;E++)if(S[E].extname==x)return S[E];return null},this.updateExtCDPFullURI=function(S,x){var E=this.findExt(S,"cRLDistributionPoints");if(E!=null&&E.array!=null){for(var C=E.array,T=0;T<C.length;T++)if(C[T].dpname!=null&&C[T].dpname.full!=null)for(var R=C[T].dpname.full,M=0;M<R.length;M++){var F=R[T];F.uri!=null&&(F.uri=x)}}},this.updateExtAIAOCSP=function(S,x){var E=this.findExt(S,"authorityInfoAccess");if(E!=null&&E.array!=null)for(var C=E.array,T=0;T<C.length;T++)C[T].ocsp!=null&&(C[T].ocsp=x)},this.updateExtAIACAIssuer=function(S,x){var E=this.findExt(S,"authorityInfoAccess");if(E!=null&&E.array!=null)for(var C=E.array,T=0;T<C.length;T++)C[T].caissuer!=null&&(C[T].caissuer=x)},this.dnarraytostr=function(S){function x(C){return C.map(function(T){return E(T).replace(/\+/,"\\+")}).join("+")}function E(C){return C.type+"="+C.value}return"/"+S.map(function(C){return x(C).replace(/\//,"\\/")}).join("/")},this.getInfo=function(){var S=function(Ce){var me=JSON.stringify(Ce.array).replace(/[\[\]\{\}\"]/g,"");return me},x=function(Ce){for(var me="",Ae=Ce.array,ve=0;ve<Ae.length;ve++){var Pe=Ae[ve];if(me+="    policy oid: "+Pe.policyoid+`
`,Pe.array!==void 0)for(var ut=0;ut<Pe.array.length;ut++){var kt=Pe.array[ut];kt.cps!==void 0&&(me+="    cps: "+kt.cps+`
`)}}return me},E=function(Ce){for(var me="",Ae=Ce.array,ve=0;ve<Ae.length;ve++){var Pe=Ae[ve];try{Pe.dpname.full[0].uri!==void 0&&(me+="    "+Pe.dpname.full[0].uri+`
`)}catch{}try{Pe.dname.full[0].dn.hex!==void 0&&(me+="    "+Y.hex2dn(Pe.dpname.full[0].dn.hex)+`
`)}catch{}}return me},C=function(Ce){for(var me="",Ae=Ce.array,ve=0;ve<Ae.length;ve++){var Pe=Ae[ve];Pe.caissuer!==void 0&&(me+="    caissuer: "+Pe.caissuer+`
`),Pe.ocsp!==void 0&&(me+="    ocsp: "+Pe.ocsp+`
`)}return me},T=Y,R,M,F;if(R=`Basic Fields
`,R+="  serial number: "+this.getSerialNumberHex()+`
`,R+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,R+="  issuer: "+this.getIssuerString()+`
`,R+="  notBefore: "+this.getNotBefore()+`
`,R+="  notAfter: "+this.getNotAfter()+`
`,R+="  subject: "+this.getSubjectString()+`
`,R+=`  subject public key info: 
`,M=this.getPublicKey(),R+="    key algorithm: "+M.type+`
`,M.type==="RSA"&&(R+="    n="+_r(M.n.toString(16)).substr(0,16)+`...
`,R+="    e="+_r(M.e.toString(16))+`
`),F=this.aExtInfo,F!=null){R+=`X509v3 Extensions:
`;for(var N=0;N<F.length;N++){var O=F[N],k=c.asn1.x509.OID.oid2name(O.oid);k===""&&(k=O.oid);var $="";if(O.critical===!0&&($="CRITICAL"),R+="  "+k+" "+$+`:
`,k==="basicConstraints"){var U=this.getExtBasicConstraints();U.cA===void 0?R+=`    {}
`:(R+="    cA=true",U.pathLen!==void 0&&(R+=", pathLen="+U.pathLen),R+=`
`)}else if(k==="keyUsage")R+="    "+this.getExtKeyUsageString()+`
`;else if(k==="subjectKeyIdentifier")R+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(k==="authorityKeyIdentifier"){var J=this.getExtAuthorityKeyIdentifier();J.kid!==void 0&&(R+="    kid="+J.kid.hex+`
`)}else if(k==="extKeyUsage"){var ee=this.getExtExtKeyUsage().array;R+="    "+ee.join(", ")+`
`}else if(k==="subjectAltName"){var te=S(this.getExtSubjectAltName());R+="    "+te+`
`}else if(k==="cRLDistributionPoints"){var _e=this.getExtCRLDistributionPoints();R+=E(_e)}else if(k==="authorityInfoAccess"){var pe=this.getExtAuthorityInfoAccess();R+=C(pe)}else k==="certificatePolicies"&&(R+=x(this.getExtCertificatePolicies()))}}return R+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,R+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,R},typeof t=="string"&&(t.indexOf("-----BEGIN")!=-1?this.readCertPEM(t):c.lang.String.isHex(t)&&this.readCertHex(t))}Y.hex2dn=function(t,e){e===void 0&&(e=0);var i=new Y,n=j.getTLV(t,e),r=i.getX500Name(t);return r.str};Y.hex2rdn=function(t,e){if(e===void 0&&(e=0),t.substr(e,2)!=="31")throw new Error("malformed RDN");for(var i=new Array,n=j.getChildIdx(t,e),r=0;r<n.length;r++)i.push(Y.hex2attrTypeValue(t,n[r]));return i=i.map(function(s){return s.replace("+","\\+")}),i.join("+")};Y.hex2attrTypeValue=function(t,e){var i=j,n=i.getV;if(e===void 0&&(e=0),t.substr(e,2)!=="30")throw new Error("malformed attribute type and value");var r=i.getChildIdx(t,e);r.length!==2||t.substr(r[0],2);var s=n(t,r[0]),a=c.asn1.ASN1Util.oidHexToInt(s),o=c.asn1.x509.OID.oid2atype(a),l=n(t,r[1]),u=Ge(l);return o+"="+u};Y.getPublicKeyFromCertHex=function(t){var e=new Y;return e.readCertHex(t),e.getPublicKey()};Y.getPublicKeyFromCertPEM=function(t){var e=new Y;return e.readCertPEM(t),e.getPublicKey()};Y.getPublicKeyInfoPropOfCertPEM=function(t){var e=j,i=e.getVbyList,n={},r,s,a;return n.algparam=null,r=new Y,r.readCertPEM(t),s=r.getPublicKeyHex(),n.keyhex=i(s,0,[1],"03").substr(2),n.algoid=i(s,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=i(s,0,[0,1],"06")),n};Y.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Oh=function(t){var e=c,i=e.lang.String.isHex,n=j,r=n.getV,s=n.getTLV,a=n.getVbyList,o=n.getTLVbyList,l=n.getTLVbyListEx,u=n.getIdxbyList,p=n.getIdxbyListEx,v=n.getChildIdx,h=new Y;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var d=u(this.hex,0,[0,0]),g=this.hex.substr(d,2);if(g=="02")this.posSigAlg=1;else if(g=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+g);var f=u(this.hex,0,[0,this.posSigAlg+3]),y=this.hex.substr(f,2);if(y=="17"||y=="18"){var m,w;m=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,m!=-1&&(w=this.hex.substr(m,2),w=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(y=="30")this.posRevCert=this.posSigAlg+3;else if(y=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+y)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(a(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var d=o(this.hex,0,[0,this.posSigAlg],"30");return h.getAlgorithmIdentifierName(d)},this.getIssuer=function(){return h.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return o(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var d=a(this.hex,0,[0,this.posSigAlg+2]);return result=Ge(d)},this.getNextUpdate=function(){var d=u(this.hex,0,[0,this.posSigAlg+3]),g=this.hex.substr(d,2);return g!="17"&&g!="18"?null:Ge(r(this.hex,d))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var d=[],g=u(this.hex,0,[0,this.posRevCert]),f=v(this.hex,g),y=0;y<f.length;y++){var m=s(this.hex,f[y]);d.push(this.getRevCert(m))}return d},this.getRevCert=function(d){var g={},f=v(d,0);return g.sn={hex:a(d,0,[0],"02")},g.date=Ge(a(d,0,[1])),f.length==3&&(g.ext=h.getExtParamArray(o(d,0,[2]))),g},this.findRevCert=function(d){var g=new Y(d),f=g.getSerialNumberHex();return this.findRevCertBySN(f)},this.findRevCertBySN=function(d){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var g=this.parsed.revcert,f=0;f<g.length;f++)if(d==g[f].sn.hex)return g[f];return null},this.getSignatureValueHex=function(){return a(this.hex,0,[2],"03",!0)},this.verifySignature=function(d){var g=this.getSignatureAlgorithmField(),f=this.getSignatureValueHex(),y=o(this.hex,0,[0],"30"),m=new c.crypto.Signature({alg:g});return m.init(d),m.updateHex(y),m.verify(f)},this.getParam=function(d){var g={},f=this.getVersion();f!=null&&(g.version=f),g.sigalg=this.getSignatureAlgorithmField(),g.issuer=this.getIssuer(),g.thisupdate=this.getThisUpdate();var y=this.getNextUpdate();y!=null&&(g.nextupdate=y);var m=this.getRevCertArray();m!=null&&(g.revcert=m);var w=p(this.hex,0,[0,"[0]"]);if(w!=-1){var b=l(this.hex,0,[0,"[0]",0]);g.ext=h.getExtParamArray(b)}return g.sighex=this.getSignatureValueHex(),this.parsed=g,typeof d=="object"&&(d.tbshex==!0&&(g.tbshex=o(this.hex,0,[0])),d.nodnarray==!0&&delete g.issuer.array),g},typeof t=="string"&&(i(t)?this.hex=t:t.match(/-----BEGIN X509 CRL/)&&(this.hex=Fe(t)),this._setPos())};(typeof c>"u"||!c)&&(c={});(typeof c.jws>"u"||!c.jws)&&(c.jws={});c.jws.JWS=function(){var t=c,e=t.jws.JWS,i=e.isSafeJSONString;this.parseJWS=function(n,r){if(!(this.parsedJWS!==void 0&&(r||this.parsedJWS.sigvalH!==void 0))){var s=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(s==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var a=s[1],o=s[2],l=s[3],u=a+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=a,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=l,this.parsedJWS.si=u,!r){var p=xe(l),v=Ke(p,16);this.parsedJWS.sigvalH=p,this.parsedJWS.sigvalBI=v}var h=mt(a),d=mt(o);if(this.parsedJWS.headS=h,this.parsedJWS.payloadS=d,!i(h,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+h}}};c.jws.JWS.sign=function(t,e,i,n,r){var s=c,a=s.jws,o=a.JWS,l=o.readSafeJSONString,u=o.isSafeJSONString,p=s.crypto,v=p.ECDSA,h=p.Mac,d=p.Signature,g=JSON,f,y,m;if(typeof e!="string"&&typeof e!="object")throw"spHeader must be JSON string or object: "+e;if(typeof e=="object"&&(y=e,f=g.stringify(y)),typeof e=="string"){if(f=e,!u(f))throw"JWS Head is not safe JSON string: "+f;y=l(f)}if(m=i,typeof i=="object"&&(m=g.stringify(i)),(t==""||t==null)&&y.alg!==void 0&&(t=y.alg),t!=""&&t!=null&&y.alg===void 0&&(y.alg=t,f=g.stringify(y)),t!==y.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+y.alg;var w=null;if(o.jwsalg2sigalg[t]===void 0)throw"unsupported alg name: "+t;w=o.jwsalg2sigalg[t];var b=di(f),_=di(m),I=b+"."+_,D="";if(w.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var S=new h({alg:w,prov:"cryptojs",pass:n});S.updateString(I),D=S.doFinal()}else if(w.indexOf("withECDSA")!=-1){var x=new d({alg:w});x.init(n,r),x.updateString(I);var E=x.sign();D=c.crypto.ECDSA.asn1SigToConcatSig(E)}else if(w!="none"){var x=new d({alg:w});x.init(n,r),x.updateString(I),D=x.sign()}var C=Oe(D);return I+"."+C};c.jws.JWS.verify=function(t,e,i){var n=c,r=n.jws,s=r.JWS,a=s.readSafeJSONString,o=n.crypto,l=o.ECDSA,u=o.Mac,p=o.Signature,v;if(typeof K!==void 0&&(v=K),!Dr(t))return!1;var h=t.split(".");if(h.length!==3)return!1;var d=h[0],g=h[1],f=d+"."+g,y=xe(h[2]),m=a(mt(h[0])),w=null,b=null;if(m.alg===void 0)throw"algorithm not specified in header";if(w=m.alg,b=w.substr(0,2),i!=null&&Object.prototype.toString.call(i)==="[object Array]"&&i.length>0){var _=":"+i.join(":")+":";if(_.indexOf(":"+w+":")==-1)throw"algorithm '"+w+"' not accepted in the list"}if(w!="none"&&e===null)throw"key shall be specified to verify.";if(typeof e=="string"&&e.indexOf("-----BEGIN ")!=-1&&(e=ae.getKey(e)),(b=="RS"||b=="PS")&&!(e instanceof v))throw"key shall be a RSAKey obj for RS* and PS* algs";if(b=="ES"&&!(e instanceof l))throw"key shall be a ECDSA obj for ES* algs";w=="none";var I=null;if(s.jwsalg2sigalg[m.alg]===void 0)throw"unsupported alg name: "+w;if(I=s.jwsalg2sigalg[w],I=="none")throw"not supported";if(I.substr(0,4)=="Hmac"){var D=null;if(e===void 0)throw"hexadecimal key shall be specified for HMAC";var S=new u({alg:I,pass:e});return S.updateString(f),D=S.doFinal(),y==D}else if(I.indexOf("withECDSA")!=-1){var x=null;try{x=l.concatSigToASN1Sig(y)}catch{return!1}var E=new p({alg:I});return E.init(e),E.updateString(f),E.verify(x)}else{var E=new p({alg:I});return E.init(e),E.updateString(f),E.verify(y)}};c.jws.JWS.parse=function(t){var e=t.split("."),i={},n,r,s;if(e.length!=2&&e.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=e[0],r=e[1],e.length==3&&(s=e[2]),i.headerObj=c.jws.JWS.readSafeJSONString(mt(n)),i.payloadObj=c.jws.JWS.readSafeJSONString(mt(r)),i.headerPP=JSON.stringify(i.headerObj,null,"  "),i.payloadObj==null?i.payloadPP=mt(r):i.payloadPP=JSON.stringify(i.payloadObj,null,"  "),s!==void 0&&(i.sigHex=xe(s)),i};c.jws.JWS.verifyJWT=function(t,e,i){var n=c,r=n.jws,s=r.JWS,a=s.readSafeJSONString,o=s.inArray,l=s.includedArray;if(!Dr(t))return!1;var u=t.split(".");if(u.length!=3)return!1;var p=u[0],v=u[1],h=p+"."+v,d=xe(u[2]),g=a(mt(p)),f=a(mt(v));if(g.alg===void 0)return!1;if(i.alg===void 0)throw"acceptField.alg shall be specified";if(!o(g.alg,i.alg)||f.iss!==void 0&&typeof i.iss=="object"&&!o(f.iss,i.iss)||f.sub!==void 0&&typeof i.sub=="object"&&!o(f.sub,i.sub))return!1;if(f.aud!==void 0&&typeof i.aud=="object"){if(typeof f.aud=="string"){if(!o(f.aud,i.aud))return!1}else if(typeof f.aud=="object"&&!l(f.aud,i.aud))return!1}var y=r.IntDate.getNow();return i.verifyAt!==void 0&&typeof i.verifyAt=="number"&&(y=i.verifyAt),(i.gracePeriod===void 0||typeof i.gracePeriod!="number")&&(i.gracePeriod=0),!(f.exp!==void 0&&typeof f.exp=="number"&&f.exp+i.gracePeriod<y||f.nbf!==void 0&&typeof f.nbf=="number"&&y<f.nbf-i.gracePeriod||f.iat!==void 0&&typeof f.iat=="number"&&y<f.iat-i.gracePeriod||f.jti!==void 0&&i.jti!==void 0&&f.jti!==i.jti||!s.verify(t,e,i.alg))};c.jws.JWS.includedArray=function(t,e){var i=c.jws.JWS.inArray;if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var n=0;n<t.length;n++)if(!i(t[n],e))return!1;return!0};c.jws.JWS.inArray=function(t,e){if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1};c.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};c.jws.JWS.isSafeJSONString=function(t,e,i){var n=null;try{return n=To(t),typeof n!="object"||n.constructor===Array?0:(e&&(e[i]=n),1)}catch{return 0}};c.jws.JWS.readSafeJSONString=function(t){var e=null;try{return e=To(t),typeof e!="object"||e.constructor===Array?null:e}catch{return null}};c.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(e==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]};c.jws.JWS.getJWKthumbprint=function(t){if(t.kty!=="RSA"&&t.kty!=="EC"&&t.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var e="{";if(t.kty==="RSA"){if(typeof t.n!="string"||typeof t.e!="string")throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if(t.kty==="EC"){if(typeof t.crv!="string"||typeof t.x!="string"||typeof t.y!="string")throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if(t.kty==="oct"){if(typeof t.k!="string")throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var i=lt(e),n=c.crypto.Util.hashHex(i,"sha256"),r=Oe(n);return r};c.jws.IntDate={};c.jws.IntDate.get=function(t){var e=c.jws.IntDate,i=e.getNow,n=e.getZulu;if(t=="now")return i();if(t=="now + 1hour")return i()+60*60;if(t=="now + 1day")return i()+60*60*24;if(t=="now + 1month")return i()+60*60*24*30;if(t=="now + 1year")return i()+60*60*24*365;if(t.match(/Z$/))return n(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t};c.jws.IntDate.getZulu=function(t){return No(t)};c.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t};c.jws.IntDate.intDate2UTCString=function(t){var e=new Date(t*1e3);return e.toUTCString()};c.jws.IntDate.intDate2Zulu=function(t){var e=new Date(t*1e3),i=("0000"+e.getUTCFullYear()).slice(-4),n=("00"+(e.getUTCMonth()+1)).slice(-2),r=("00"+e.getUTCDate()).slice(-2),s=("00"+e.getUTCHours()).slice(-2),a=("00"+e.getUTCMinutes()).slice(-2),o=("00"+e.getUTCSeconds()).slice(-2);return i+n+r+s+a+o+"Z"};(typeof c>"u"||!c)&&(c={});(typeof c.jws>"u"||!c.jws)&&(c.jws={});c.jws.JWSJS=function(){var t=c,e=t.jws,i=e.JWS,n=i.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(r){this.init();var s=r.split(".");if(s.length!=3)throw"malformed input JWS";this.aHeader.push(s[0]),this.sPayload=s[1],this.aSignature.push(s[2])},this.addSignature=function(r,s,a,o){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var l=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var u=c.jws.JWS.sign(r,s,this.sPayload,a,o),p=u.split("."),v=p[0],h=p[2];this.aHeader.push(p[0]),this.aSignature.push(p[2])}catch(d){throw this.aHeader.length>l&&this.aHeader.pop(),this.aSignature.length>l&&this.aSignature.pop(),"addSignature failed: "+d}},this.verifyAll=function(r){if(this.aHeader.length!==r.length||this.aSignature.length!==r.length)return!1;for(var s=0;s<r.length;s++){var a=r[s];if(a.length!==2)return!1;var o=this.verifyNth(s,a[0],a[1]);if(o===!1)return!1}return!0},this.verifyNth=function(r,s,a){if(this.aHeader.length<=r||this.aSignature.length<=r)return!1;var o=this.aHeader[r],l=this.aSignature[r],u=o+"."+this.sPayload+"."+l,p=!1;try{p=i.verify(u,s,a)}catch{return!1}return p},this.readJWSJS=function(r){if(typeof r=="string"){var s=n(r);if(s==null)throw"argument is not safe JSON object string";this.aHeader=s.headers,this.sPayload=s.payload,this.aSignature=s.signatures}else try{if(r.headers.length>0)this.aHeader=r.headers;else throw"malformed header";if(typeof r.payload=="string")this.sPayload=r.payload;else throw"malformed signatures";if(r.signatures.length>0)this.aSignature=r.signatures;else throw"malformed signatures"}catch(a){throw"malformed JWS-JS JSON object: "+a}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};z.SecureRandom=Dt;z.rng_seed_time=Fr;z.BigInteger=P;z.RSAKey=K;z.ECDSA=c.crypto.ECDSA;z.DSA=c.crypto.DSA;z.Signature=c.crypto.Signature;z.MessageDigest=c.crypto.MessageDigest;z.Mac=c.crypto.Mac;z.Cipher=c.crypto.Cipher;z.KEYUTIL=ae;z.ASN1HEX=j;z.X509=Y;z.X509CRL=Oh;z.CryptoJS=q;z.b64tohex=Zt;z.b64toBA=_o;z.ECFieldElementFp=ke;z.ECPointFp=oe;z.ECCurveFp=Ct;z.stoBA=Po;z.BAtos=Ro;z.BAtohex=Ui;z.stohex=Qe;z.stob64=vh;z.stob64u=yh;z.b64utos=wh;z.b64tob64u=Qt;z.b64utob64=hi;z.hex2b64=It;z.hextob64u=Oe;z.b64utohex=xe;z.utf8tob64u=di;z.b64utoutf8=mt;z.utf8tob64=bh;z.b64toutf8=Sh;z.utf8tohex=Ki;z.hextoutf8=fe;z.hextorstr=Ge;z.rstrtohex=lt;z.hextob64=Do;z.hextob64nl=Oo;z.b64nltohex=ko;z.hextopem=Be;z.pemtohex=Fe;z.hextoArrayBuffer=_h;z.ArrayBuffertohex=Ah;z.zulutomsec=Tr;z.zulutosec=No;z.zulutodate=Ih;z.datetozulu=Ch;z.uricmptohex=Gi;z.hextouricmp=$i;z.ipv6tohex=xr;z.hextoipv6=Er;z.hextoip=Li;z.iptohex=Pr;z.ucs2hextoutf8=Rr;z.encodeURIComponentAll=Wi;z.newline_toUnix=Fh;z.newline_toDos=Th;z.hextoposhex=_r;z.intarystrtohex=Ph;z.strdiffidx=Rh;z.oidtohex=Mo;z.hextooid=Ji;z.strpad=zi;z.bitstrtoint=jo;z.inttobitstr=Lo;z.bitstrtobinstr=zo;z.binstrtobitstr=Dh;z.isBase64URLDot=Dr;z.namearraytobinstr=Hi;z.extendClass=B;z.KJUR=c;z.crypto=c.crypto;z.asn1=c.asn1;z.jws=c.jws;z.lang=c.lang});var Go=V((Xp,Ko)=>{var kh=Uo(),Nh=kh.jws.JWS;Ko.exports=class{constructor(){this.accessToken=null,this.serviceAccountKey={private_key:`-----BEGIN PRIVATE KEY-----
MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQCziXpsfM5psnbj
Iwe7VwKixx9wRGPPl6FfGQyP+Oa45XCu/iPsMHNxGn0zAlhZAViguAkM6SxTdYyx
NHsltAZPtug4A7qE3ZBZew+ZbMYZZjQ/koU6tSX+YRmTpqr+bFWc+nX90/9XezfR
t1XX7DPpN8almWQOXnHB0ZeiDJ1kWbD3ZfAamAnE6Ry9ESPo/Pe5FnjMs2LYHSy/
f75VmIuCuxjz/WVmeBTNbgmetugvymdvavLrxSZ6hdB6Ewd0dMW0Zh3qjLArb/XR
DAICntfO33+/r/q751jtiBzh04o2zQQmGDJh7DbFKUDvnevkkI+/6zkSc+ff/QR7
uXcVjJaLAgMBAAECggEAAL50Ydgh+2gk6bBTVE4etj9lRc/3Tw8NptkWcGG4Fncy
pQ3ZZtRwkXPX7vibX6+d4ot3irSVON4rsF1wBcWLobilT7KuiwoeSXCi9qA46DZS
oxqEL6yFWaQSyzOyCEVLgqsovbk9mOsP8AJkVaxLCjQ4iTkiyJPjU1wjsgCjqlN/
CWNyZ+2f5fgrlAh7a5Bg/LtHzWnp/wjQ2U1Kp1mUgLZ7EfV2JG22kE3zQggKynIW
ohKOckJpMINbObp4idD8Op0/gbIobreoSimAKWxto/AHOykqiyhsUsx81S7I8mXq
EXn5a+MLfEh8o9hAr5UY/4mm7AH1LgX45Oaz9jkkyQKBgQDqnQVFFaT50KJZxCkO
iUlwBqbvA5FSuT8n12/5drYZ7zFpa+EglZ4GzfU5aGCp67bXoKbpjR05tTAYAL6p
E1PFlqnfLXtv/KQlZ5uPY+Oanahg+TMHX1b1gHwi2uTFj6yD3hYl5nlTOd12t6N1
+aTO1K1KAg/wRhuqg8ipHfQJFQKBgQDD5y+1cGJTRBGXSJJpoZuUHeqGCLF/8R+T
rRSGL1Q9lqaS+N0D4DSOuNOWMENsRA48TDr/ChXthAvEHChZzKMuAsGnBdV4/qK7
+mceqPLLulkqlRhdTrmL4snMjSaqwlNehAdloJS+M6eR4pEOPuMgVjoiSd8lAFo5
f6jjLebJHwKBgDTiok55W4/ohMBBZJPfRIuZJEYagsan9WGQwa/1H4VnErdV1xCW
SWH1SULgkXGcLcIbd6SL57ubaTTv7gqEzcxrcu1Y/ks3IvU/jqRa+vJeeZcqdWND
DYIXrWPZ/dm+0j+Db3CprE2jbJWXPaSZWpo4/LsDDf62fwQH4tKkat8lAoGActL1
3sYxi5aRLPgHgUyNESL7zHYZ++DL3lYLep8RJExB9FFT0iq/A4yH0DcXvcSiB2uz
BLvXoHDOKLNMX14XoydQdGJx/kpZ/g5GFO136jueedwL/Nzg2oIiP/fX2yytiu+e
Gk4mANnr9RE0boIjxFdmGaTs2xY6zArsZcQIyocCgYAM055vrwU40SCvIFgemstr
9ilUiNSrKW+Y/vujGRtQp9/D1QwU2n6iNsLo/gs85GzH1STsagRbsLny504oTpfs
Ovc4lNek5JiL9/JFR07pH7/F9+STOgJgcn7oUnlfd/t86Th59Gx7H0v+RkhIXbtH
FMMKkjRL/CjPolat6n41rw==
-----END PRIVATE KEY-----
`,client_email:"ocm-logger@ocm-logs.iam.gserviceaccount.com"},this.jwt="",this.googleAuthURL="https://oauth2.googleapis.com/token",this.SCOPES=["https://www.googleapis.com/auth/logging.write"],this.EXPIRES_MARGIN=1800}run(){return new Promise((e,i)=>{let n=Math.floor(Date.now()/1e3);this.getJwt(this.serviceAccountKey,n);let r={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:this.jwt})};fetch(this.googleAuthURL,r).then(s=>s.json()).then(s=>{this.accessToken=s.access_token,e(this.accessToken)}).catch(s=>{i(s)})})}getJwt({client_email:e,private_key:i},n){let r={typ:"JWT",alg:"RS256"},s=n+3600,a={aud:this.googleAuthURL,iss:e,scope:this.SCOPES.join(" "),iat:n,exp:s};this.jwt=Nh.sign(r.alg,r,a,i)}}});var kr=V((fi,Or)=>{(function(t,e){typeof fi=="object"&&typeof Or=="object"?Or.exports=e():typeof define=="function"&&define.amd?define([],e):typeof fi=="object"?fi.bowser=e():t.bowser=e()})(fi,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(n,r,s){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:s})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var a in n)i.d(s,a,function(o){return n[o]}.bind(null,a));return s},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=i(18),r=function(){function s(){}return s.getFirstMatch=function(a,o){var l=o.match(a);return l&&l.length>0&&l[1]||""},s.getSecondMatch=function(a,o){var l=o.match(a);return l&&l.length>1&&l[2]||""},s.matchAndReturnConst=function(a,o,l){if(a.test(o))return l},s.getWindowsVersionName=function(a){switch(a){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},s.getMacOSVersionName=function(a){var o=a.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(o.push(0),o[0]===10)switch(o[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},s.getAndroidVersionName=function(a){var o=a.split(".").splice(0,2).map(function(l){return parseInt(l,10)||0});if(o.push(0),!(o[0]===1&&o[1]<5))return o[0]===1&&o[1]<6?"Cupcake":o[0]===1&&o[1]>=6?"Donut":o[0]===2&&o[1]<2?"Eclair":o[0]===2&&o[1]===2?"Froyo":o[0]===2&&o[1]>2?"Gingerbread":o[0]===3?"Honeycomb":o[0]===4&&o[1]<1?"Ice Cream Sandwich":o[0]===4&&o[1]<4?"Jelly Bean":o[0]===4&&o[1]>=4?"KitKat":o[0]===5?"Lollipop":o[0]===6?"Marshmallow":o[0]===7?"Nougat":o[0]===8?"Oreo":o[0]===9?"Pie":void 0},s.getVersionPrecision=function(a){return a.split(".").length},s.compareVersions=function(a,o,l){l===void 0&&(l=!1);var u=s.getVersionPrecision(a),p=s.getVersionPrecision(o),v=Math.max(u,p),h=0,d=s.map([a,o],function(g){var f=v-s.getVersionPrecision(g),y=g+new Array(f+1).join(".0");return s.map(y.split("."),function(m){return new Array(20-m.length).join("0")+m}).reverse()});for(l&&(h=v-Math.min(u,p)),v-=1;v>=h;){if(d[0][v]>d[1][v])return 1;if(d[0][v]===d[1][v]){if(v===h)return 0;v-=1}else if(d[0][v]<d[1][v])return-1}},s.map=function(a,o){var l,u=[];if(Array.prototype.map)return Array.prototype.map.call(a,o);for(l=0;l<a.length;l+=1)u.push(o(a[l]));return u},s.find=function(a,o){var l,u;if(Array.prototype.find)return Array.prototype.find.call(a,o);for(l=0,u=a.length;l<u;l+=1){var p=a[l];if(o(p,l))return p}},s.assign=function(a){for(var o,l,u=a,p=arguments.length,v=new Array(p>1?p-1:0),h=1;h<p;h++)v[h-1]=arguments[h];if(Object.assign)return Object.assign.apply(Object,[a].concat(v));var d=function(){var g=v[o];typeof g=="object"&&g!==null&&Object.keys(g).forEach(function(f){u[f]=g[f]})};for(o=0,l=v.length;o<l;o+=1)d();return a},s.getBrowserAlias=function(a){return n.BROWSER_ALIASES_MAP[a]},s.getBrowserTypeByAlias=function(a){return n.BROWSER_MAP[a]||""},s}();e.default=r,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(91))&&n.__esModule?n:{default:n},s=i(18);function a(l,u){for(var p=0;p<u.length;p++){var v=u[p];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(l,v.key,v)}}var o=function(){function l(){}var u,p,v;return l.getParser=function(h,d){if(d===void 0&&(d=!1),typeof h!="string")throw new Error("UserAgent should be a string");return new r.default(h,d)},l.parse=function(h){return new r.default(h).getResult()},u=l,v=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],(p=null)&&a(u.prototype,p),v&&a(u,v),l}();e.default=o,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n=l(i(92)),r=l(i(93)),s=l(i(94)),a=l(i(95)),o=l(i(17));function l(p){return p&&p.__esModule?p:{default:p}}var u=function(){function p(h,d){if(d===void 0&&(d=!1),h==null||h==="")throw new Error("UserAgent parameter can't be empty");this._ua=h,this.parsedResult={},d!==!0&&this.parse()}var v=p.prototype;return v.getUA=function(){return this._ua},v.test=function(h){return h.test(this._ua)},v.parseBrowser=function(){var h=this;this.parsedResult.browser={};var d=o.default.find(n.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(f){return h.test(f)});throw new Error("Browser's test function is not valid")});return d&&(this.parsedResult.browser=d.describe(this.getUA())),this.parsedResult.browser},v.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},v.getBrowserName=function(h){return h?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},v.getBrowserVersion=function(){return this.getBrowser().version},v.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},v.parseOS=function(){var h=this;this.parsedResult.os={};var d=o.default.find(r.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(f){return h.test(f)});throw new Error("Browser's test function is not valid")});return d&&(this.parsedResult.os=d.describe(this.getUA())),this.parsedResult.os},v.getOSName=function(h){var d=this.getOS().name;return h?String(d).toLowerCase()||"":d||""},v.getOSVersion=function(){return this.getOS().version},v.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},v.getPlatformType=function(h){h===void 0&&(h=!1);var d=this.getPlatform().type;return h?String(d).toLowerCase()||"":d||""},v.parsePlatform=function(){var h=this;this.parsedResult.platform={};var d=o.default.find(s.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(f){return h.test(f)});throw new Error("Browser's test function is not valid")});return d&&(this.parsedResult.platform=d.describe(this.getUA())),this.parsedResult.platform},v.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},v.getEngineName=function(h){return h?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},v.parseEngine=function(){var h=this;this.parsedResult.engine={};var d=o.default.find(a.default,function(g){if(typeof g.test=="function")return g.test(h);if(g.test instanceof Array)return g.test.some(function(f){return h.test(f)});throw new Error("Browser's test function is not valid")});return d&&(this.parsedResult.engine=d.describe(this.getUA())),this.parsedResult.engine},v.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},v.getResult=function(){return o.default.assign({},this.parsedResult)},v.satisfies=function(h){var d=this,g={},f=0,y={},m=0;if(Object.keys(h).forEach(function(E){var C=h[E];typeof C=="string"?(y[E]=C,m+=1):typeof C=="object"&&(g[E]=C,f+=1)}),f>0){var w=Object.keys(g),b=o.default.find(w,function(E){return d.isOS(E)});if(b){var _=this.satisfies(g[b]);if(_!==void 0)return _}var I=o.default.find(w,function(E){return d.isPlatform(E)});if(I){var D=this.satisfies(g[I]);if(D!==void 0)return D}}if(m>0){var S=Object.keys(y),x=o.default.find(S,function(E){return d.isBrowser(E,!0)});if(x!==void 0)return this.compareVersion(y[x])}},v.isBrowser=function(h,d){d===void 0&&(d=!1);var g=this.getBrowserName().toLowerCase(),f=h.toLowerCase(),y=o.default.getBrowserTypeByAlias(f);return d&&y&&(f=y.toLowerCase()),f===g},v.compareVersion=function(h){var d=[0],g=h,f=!1,y=this.getBrowserVersion();if(typeof y=="string")return h[0]===">"||h[0]==="<"?(g=h.substr(1),h[1]==="="?(f=!0,g=h.substr(2)):d=[],h[0]===">"?d.push(1):d.push(-1)):h[0]==="="?g=h.substr(1):h[0]==="~"&&(f=!0,g=h.substr(1)),d.indexOf(o.default.compareVersions(y,g,f))>-1},v.isOS=function(h){return this.getOSName(!0)===String(h).toLowerCase()},v.isPlatform=function(h){return this.getPlatformType(!0)===String(h).toLowerCase()},v.isEngine=function(h){return this.getEngineName(!0)===String(h).toLowerCase()},v.is=function(h,d){return d===void 0&&(d=!1),this.isBrowser(h,d)||this.isOS(h)||this.isPlatform(h)},v.some=function(h){var d=this;return h===void 0&&(h=[]),h.some(function(g){return d.is(g)})},p}();e.default=u,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(o){var l={name:"Googlebot"},u=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/opera/i],describe:function(o){var l={name:"Opera"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/opr\/|opios/i],describe:function(o){var l={name:"Opera"},u=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/SamsungBrowser/i],describe:function(o){var l={name:"Samsung Internet for Android"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/Whale/i],describe:function(o){var l={name:"NAVER Whale Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/MZBrowser/i],describe:function(o){var l={name:"MZ Browser"},u=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/focus/i],describe:function(o){var l={name:"Focus"},u=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/swing/i],describe:function(o){var l={name:"Swing"},u=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/coast/i],describe:function(o){var l={name:"Opera Coast"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(o){var l={name:"Opera Touch"},u=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/yabrowser/i],describe:function(o){var l={name:"Yandex Browser"},u=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/ucbrowser/i],describe:function(o){var l={name:"UC Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/Maxthon|mxios/i],describe:function(o){var l={name:"Maxthon"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/epiphany/i],describe:function(o){var l={name:"Epiphany"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/puffin/i],describe:function(o){var l={name:"Puffin"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/sleipnir/i],describe:function(o){var l={name:"Sleipnir"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/k-meleon/i],describe:function(o){var l={name:"K-Meleon"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/micromessenger/i],describe:function(o){var l={name:"WeChat"},u=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/qqbrowser/i],describe:function(o){var l={name:/qqbrowserlite/i.test(o)?"QQ Browser Lite":"QQ Browser"},u=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/msie|trident/i],describe:function(o){var l={name:"Internet Explorer"},u=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/\sedg\//i],describe:function(o){var l={name:"Microsoft Edge"},u=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/edg([ea]|ios)/i],describe:function(o){var l={name:"Microsoft Edge"},u=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/vivaldi/i],describe:function(o){var l={name:"Vivaldi"},u=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/seamonkey/i],describe:function(o){var l={name:"SeaMonkey"},u=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/sailfish/i],describe:function(o){var l={name:"Sailfish"},u=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,o);return u&&(l.version=u),l}},{test:[/silk/i],describe:function(o){var l={name:"Amazon Silk"},u=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/phantom/i],describe:function(o){var l={name:"PhantomJS"},u=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/slimerjs/i],describe:function(o){var l={name:"SlimerJS"},u=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var l={name:"BlackBerry"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var l={name:"WebOS Browser"},u=r.default.getFirstMatch(s,o)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/bada/i],describe:function(o){var l={name:"Bada"},u=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/tizen/i],describe:function(o){var l={name:"Tizen"},u=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/qupzilla/i],describe:function(o){var l={name:"QupZilla"},u=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/firefox|iceweasel|fxios/i],describe:function(o){var l={name:"Firefox"},u=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/electron/i],describe:function(o){var l={name:"Electron"},u=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/MiuiBrowser/i],describe:function(o){var l={name:"Miui"},u=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/chromium/i],describe:function(o){var l={name:"Chromium"},u=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,o)||r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/chrome|crios|crmo/i],describe:function(o){var l={name:"Chrome"},u=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/GSA/i],describe:function(o){var l={name:"Google Search"},u=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){var l=!o.test(/like android/i),u=o.test(/android/i);return l&&u},describe:function(o){var l={name:"Android Browser"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/playstation 4/i],describe:function(o){var l={name:"PlayStation 4"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/safari|applewebkit/i],describe:function(o){var l={name:"Safari"},u=r.default.getFirstMatch(s,o);return u&&(l.version=u),l}},{test:[/.*/i],describe:function(o){var l=o.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(l,o),version:r.default.getSecondMatch(l,o)}}}];e.default=a,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:[/Roku\/DVP/],describe:function(o){var l=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,o);return{name:s.OS_MAP.Roku,version:l}}},{test:[/windows phone/i],describe:function(o){var l=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.WindowsPhone,version:l}}},{test:[/windows /i],describe:function(o){var l=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,o),u=r.default.getWindowsVersionName(l);return{name:s.OS_MAP.Windows,version:l,versionName:u}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(o){var l={name:s.OS_MAP.iOS},u=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,o);return u&&(l.version=u),l}},{test:[/macintosh/i],describe:function(o){var l=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,o).replace(/[_\s]/g,"."),u=r.default.getMacOSVersionName(l),p={name:s.OS_MAP.MacOS,version:l};return u&&(p.versionName=u),p}},{test:[/(ipod|iphone|ipad)/i],describe:function(o){var l=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,o).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:l}}},{test:function(o){var l=!o.test(/like android/i),u=o.test(/android/i);return l&&u},describe:function(o){var l=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,o),u=r.default.getAndroidVersionName(l),p={name:s.OS_MAP.Android,version:l};return u&&(p.versionName=u),p}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var l=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,o),u={name:s.OS_MAP.WebOS};return l&&l.length&&(u.version=l),u}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var l=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,o)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,o)||r.default.getFirstMatch(/\bbb(\d+)/i,o);return{name:s.OS_MAP.BlackBerry,version:l}}},{test:[/bada/i],describe:function(o){var l=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.Bada,version:l}}},{test:[/tizen/i],describe:function(o){var l=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.Tizen,version:l}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(o){var l=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,o);return{name:s.OS_MAP.PlayStation4,version:l}}}];e.default=a,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(o){var l=r.default.getFirstMatch(/(can-l01)/i,o)&&"Nova",u={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return l&&(u.model=l),u}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(o){var l=o.test(/ipod|iphone/i),u=o.test(/like (ipod|iphone)/i);return l&&!u},describe:function(o){var l=r.default.getFirstMatch(/(ipod|iphone)/i,o);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:l}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName(!0)==="blackberry"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(o){return o.getBrowserName(!0)==="bada"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName()==="windows phone"},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(o){var l=Number(String(o.getOSVersion()).split(".")[0]);return o.getOSName(!0)==="android"&&l>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(o){return o.getOSName(!0)==="android"},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getOSName(!0)==="macos"},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(o){return o.getOSName(!0)==="windows"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="linux"},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="playstation 4"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(o){return o.getOSName(!0)==="roku"},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),a=[{test:function(o){return o.getBrowserName(!0)==="microsoft edge"},describe:function(o){if(/\sedg\//i.test(o))return{name:s.ENGINE_MAP.Blink};var l=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,o);return{name:s.ENGINE_MAP.EdgeHTML,version:l}}},{test:[/trident/i],describe:function(o){var l={name:s.ENGINE_MAP.Trident},u=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){return o.test(/presto/i)},describe:function(o){var l={name:s.ENGINE_MAP.Presto},u=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:function(o){var l=o.test(/gecko/i),u=o.test(/like gecko/i);return l&&!u},describe:function(o){var l={name:s.ENGINE_MAP.Gecko},u=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(o){var l={name:s.ENGINE_MAP.WebKit},u=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,o);return u&&(l.version=u),l}}];e.default=a,t.exports=e.default}})})});var Wo=V((Zp,$o)=>{var Bh=Go(),Mh=new Bh,Yp=kr();$o.exports=class{constructor(e,i,n,r,s,a,o){this.config=e,this.build=this.config.build,this.hostname=i,this.url=n,this.oeid=r,this.is_mobile=s,this.browser=a,this.script_tag=o,this.samplePercentage=Math.random()*100,this.willSample=this.config.hasOwnProperty("log_sample_percentage")&&this.samplePercentage<=this.config.log_sample_percentage,this.logBlacklist=['{"bidder":"ix","code":8}',"in response for appnexus","[AdSquirrel Submodule] - Unable to get AdSquirrel response","OFAC sanctioned country","Continuing without bids","consentManagement.gpp config not defined, exiting consent manager module","Activity control","is being overwritten","Request timeout after","consentManagement.gpp config not defined","FPD request size has exceeded maximum request size","missing parameters for real time module","module criteo is loading external JavaScript","Rubicon: Filtered FPD key:","User sync not allowed","Continuing without bids","No valid bid requests returned for auction","fetch encountered an error","xhr timeout after","TCF2 denied device access for","has been rendered before","criteoIdSystem: unable to sync user id","xhr error","Number of user syncs exceeded for","Bid does not meet price floor","Brightcom server returned empty/non-json response"],this.sentLogs=[]}debug(){let[e,...i]=arguments;(this.config.debug||this.config.services[e]?.debug)&&console.debug.apply(console,this.decorate(e,i))}error(){let[e,i,...n]=arguments;console.error.apply(console,this.decorate(e,i,n)),this.config?.log&&this.send("ERROR",{service:e,msg:n,error:i})}info(){let[e,...i]=arguments;(this.config.debug||this.config.services[e]?.debug)&&console.log.apply(console,this.decorate(e,i))}warn(){let[e,...i]=arguments;(this.config.debug||this.config.services[e]?.debug)&&console.warn.apply(console,this.decorate(e,i))}decorate(){let[e,...i]=arguments,n=Array.from(i).flat();return e?(n.unshift(`margin-left: 5px; display: inline-block; color: #FFF; background: ${e==="Utils"?"#006d6f":"#6B232E"}; padding: 1px 4px; border-radius: 3px;text-align:center;`),n.unshift("display: inline-block; color: #FFF; background: #D66B18; padding: 1px 4px; border-radius: 3px;text-align:center;"),n.unshift("%cOCM%c"+e)):(n.unshift("display: inline-block; color: #FFF; background: #D66B18; padding: 1px 4px; border-radius: 3px; text-align:center;"),n.unshift("%cOCM")),n}async send(e,i){if(e!=="ERROR"&&!this.willSample)return;let n=this.serializeError(i.error);if(this.checkIsSent(n))return;for(let o in this.logBlacklist)if(n.hasOwnProperty("stack")||n.hasOwnProperty("message")){if(n?.stack?.includes(this.logBlacklist[o])||n?.message?.includes(this.logBlacklist[o]))return}else if(JSON.stringify(n).includes(this.logBlacklist[o]))return;this.jwt||(this.jwt=await Mh.run()),n.hasOwnProperty("stack")&&(n.stack=n.stack.split("at XMLHttpRequest.nrWrapper")[0]);let r=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s=null;if(typeof r<"u"&&typeof r.effectiveType<"u")switch(r.effectiveType){case"4g":s="4g";break;case"3g":s="3g";break;case"2g":s="2g";break;case"slow-2g":s="slow-2g";break;default:s=null}let a={method:"POST",headers:{Authorization:`Bearer ${this.jwt}`,Accept:"application/json; charset=UTF-8","Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({logName:"projects/ocm-logs/logs/ocm-js",resource:{type:"global",labels:{project_id:"ocm-logs",product:"ocm.js"}},entries:[{jsonPayload:{script_tag:this.script_tag,hostname:this.hostname,url:this.url,oeid:this.oeid,build:this.build.split(".")[1],connection:s,os:`${this.browser.os.name||""}/${this.browser.os.versionName||""}/${this.browser.os.version||""}`,browser:`${this.browser.browser.name}/${this.browser.browser.version}`||"",platform:this.browser.platform.type||"",service:i.service,browserWidth:window.innerWidth,browserHeight:window.innerHeight,msg:i.msg.join(" %% "),states:window?.OCM?.s||window.top?.OCM?.s||null,error:n,device:this.is_mobile?"mobile":"desktop",consent:window?.OCM?.hasPurposeOneConsent||window.top?.OCM?.hasPurposeOneConsent,adBlocked:window?.OCM?.adBlocked||window?.OCM?.adBlocked},severity:e}]})};return fetch("https://logging.googleapis.com/v2/entries:write",a).then(()=>{this.sentLogs.push(this.MD5(JSON.stringify(n)))})}checkIsSent(e){let i=this.MD5(JSON.stringify(e));return this.sentLogs.includes(i)}serializeError(e){try{if(e instanceof Error){let i=Object.getOwnPropertyNames(e).sort();return JSON.parse(JSON.stringify(e,i))}return e}catch{return typeof e=="string"?e:{}}}MD5(e){function i(d){for(var g,f="0123456789ABCDEF",y="",m=0;m<d.length;m++)g=d.charCodeAt(m),y+=f.charAt(g>>>4&15)+f.charAt(15&g);return y}function n(d){for(var g=Array(d.length>>2),f=0;f<g.length;f++)g[f]=0;for(f=0;f<8*d.length;f+=8)g[f>>5]|=(255&d.charCodeAt(f/8))<<f%32;return g}function r(d){for(var g="",f=0;f<32*d.length;f+=8)g+=String.fromCharCode(d[f>>5]>>>f%32&255);return g}function s(d,g){d[g>>5]|=128<<g%32,d[14+(g+64>>>9<<4)]=g;for(var f=1732584193,y=-271733879,m=-1732584194,w=271733878,b=0;b<d.length;b+=16){var _=f,I=y,D=m,S=w;y=p(y=p(y=p(y=p(y=u(y=u(y=u(y=u(y=l(y=l(y=l(y=l(y=o(y=o(y=o(y=o(y,m=o(m,w=o(w,f=o(f,y,m,w,d[b+0],7,-680876936),y,m,d[b+1],12,-389564586),f,y,d[b+2],17,606105819),w,f,d[b+3],22,-1044525330),m=o(m,w=o(w,f=o(f,y,m,w,d[b+4],7,-176418897),y,m,d[b+5],12,1200080426),f,y,d[b+6],17,-1473231341),w,f,d[b+7],22,-45705983),m=o(m,w=o(w,f=o(f,y,m,w,d[b+8],7,1770035416),y,m,d[b+9],12,-1958414417),f,y,d[b+10],17,-42063),w,f,d[b+11],22,-1990404162),m=o(m,w=o(w,f=o(f,y,m,w,d[b+12],7,1804603682),y,m,d[b+13],12,-40341101),f,y,d[b+14],17,-1502002290),w,f,d[b+15],22,1236535329),m=l(m,w=l(w,f=l(f,y,m,w,d[b+1],5,-165796510),y,m,d[b+6],9,-1069501632),f,y,d[b+11],14,643717713),w,f,d[b+0],20,-373897302),m=l(m,w=l(w,f=l(f,y,m,w,d[b+5],5,-701558691),y,m,d[b+10],9,38016083),f,y,d[b+15],14,-660478335),w,f,d[b+4],20,-405537848),m=l(m,w=l(w,f=l(f,y,m,w,d[b+9],5,568446438),y,m,d[b+14],9,-1019803690),f,y,d[b+3],14,-187363961),w,f,d[b+8],20,1163531501),m=l(m,w=l(w,f=l(f,y,m,w,d[b+13],5,-1444681467),y,m,d[b+2],9,-51403784),f,y,d[b+7],14,1735328473),w,f,d[b+12],20,-1926607734),m=u(m,w=u(w,f=u(f,y,m,w,d[b+5],4,-378558),y,m,d[b+8],11,-2022574463),f,y,d[b+11],16,1839030562),w,f,d[b+14],23,-35309556),m=u(m,w=u(w,f=u(f,y,m,w,d[b+1],4,-1530992060),y,m,d[b+4],11,1272893353),f,y,d[b+7],16,-155497632),w,f,d[b+10],23,-1094730640),m=u(m,w=u(w,f=u(f,y,m,w,d[b+13],4,681279174),y,m,d[b+0],11,-358537222),f,y,d[b+3],16,-722521979),w,f,d[b+6],23,76029189),m=u(m,w=u(w,f=u(f,y,m,w,d[b+9],4,-640364487),y,m,d[b+12],11,-421815835),f,y,d[b+15],16,530742520),w,f,d[b+2],23,-995338651),m=p(m,w=p(w,f=p(f,y,m,w,d[b+0],6,-198630844),y,m,d[b+7],10,1126891415),f,y,d[b+14],15,-1416354905),w,f,d[b+5],21,-57434055),m=p(m,w=p(w,f=p(f,y,m,w,d[b+12],6,1700485571),y,m,d[b+3],10,-1894986606),f,y,d[b+10],15,-1051523),w,f,d[b+1],21,-2054922799),m=p(m,w=p(w,f=p(f,y,m,w,d[b+8],6,1873313359),y,m,d[b+15],10,-30611744),f,y,d[b+6],15,-1560198380),w,f,d[b+13],21,1309151649),m=p(m,w=p(w,f=p(f,y,m,w,d[b+4],6,-145523070),y,m,d[b+11],10,-1120210379),f,y,d[b+2],15,718787259),w,f,d[b+9],21,-343485551),f=v(f,_),y=v(y,I),m=v(m,D),w=v(w,S)}return[f,y,m,w]}function a(d,g,f,y,m,w){return v(h(v(v(g,d),v(y,w)),m),f)}function o(d,g,f,y,m,w,b){return a(g&f|~g&y,d,g,m,w,b)}function l(d,g,f,y,m,w,b){return a(g&y|f&~y,d,g,m,w,b)}function u(d,g,f,y,m,w,b){return a(g^f^y,d,g,m,w,b)}function p(d,g,f,y,m,w,b){return a(f^(g|~y),d,g,m,w,b)}function v(d,g){var f=(65535&d)+(65535&g);return(d>>16)+(g>>16)+(f>>16)<<16|65535&f}function h(d,g){return d<<g|d>>>32-g}return i(r(s(n(e),8*e.length)))}}});var Yo=V((tg,Xo)=>{var Jo="stickies_manager";Xo.exports=class{constructor(e,i){this.utils=e,this.config=i,this.services_with_stickies={...this.utils.window?.OCM?.sws}}run(){this.utils.log.info(Jo,"Running..."),this.setup()}setup(){this.services_with_stickies={aniview:!1,story_teller_v2:!1},this.updateGlobalState(this.services_with_stickies),this.listen()}listen(){this.utils.window.addEventListener("message",e=>{let{data:i}=e;i.type==="stickies_sync"&&(this.utils.log.info(Jo,"A new stickies_sync event has received: ",i),this.set(i.service,i.value))})}updateGlobalState(e){this.utils.window.OCM=this.utils.window.OCM||{},this.utils.window.OCM.sws={...e}}set(e,i){this.services_with_stickies[e]=i,this.updateGlobalState(this.services_with_stickies)}}});var Zo=V((rg,Qo)=>{vo();var jh=yo(),Ee="Utils",Lh="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",zh=Wo(),Hh=hr(),Vh=kr(),qh=Yo();Qo.exports=class{constructor(e){this.config=e,this.start=new Date,this.script_tag=e.script_tag,this.window=this.config.hasOwnProperty("use_window_top")?this.config.use_window_top?window.top:window:window.top,this.doc_head=this.window.document.head||this.window.document.getElementsByTagName("head")[0],this.doc_body=this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.hostname=this.window.location.hostname.replace("www.",""),this.url=this.window.location.href,this._oeid=Hh.v4(),this._oeid_time=Date.now(),this.is_mobile=jh({tablet:!0}),this.browser=Vh.parse(this.window.navigator.userAgent),this.is_bot=mo(this.window.navigator.userAgent),this.log=new zh(this.config,this.hostname,this.url,this._oeid,this.is_mobile,this.browser,this.script_tag),this.screen_width=this.is_mobile?this.mobileScreenWidth():this.desktopScreenWidth(),this.screen_height=this.is_mobile?this.mobileScreenHeight():this.desktopScreenHeight(),this.reaper_data=null,this.shouldLogError=Math.random()<.01,this.canUseLocalStorage=this.isLocalStorageAvailable(),this.isIOS=this.detectIOS(),this.calculateLoggingSamples(),this.ocmGoneMadPreview(),new qh(this,e).run()}isMobile(){return this.is_mobile}isLocalStorageAvailable(){let e="can-i-squeeze-in";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}hasJsonStructure(e){try{JSON.parse(e)}catch{return!1}return!0}isAdBlocked(){return new Promise(e=>{this.log.info(Ee,"Checking for Adblock..."),fetch(Lh,{method:"HEAD",mode:"no-cors"}).then(r=>{(r.status===0||r.status===200)&&e(!1),r.redirected&&e(!0)}).catch(r=>{e(!0)})})}contentLoaded(){return this.log.info(Ee,"Checking for DOMContentLoaded..."),new Promise(e=>{let i=()=>{/^(?:loaded|interactive|complete)$/.test(document.readyState)&&(this.doc_body=this.doc_body||this.window.document.body||this.window.document.getElementsByTagName("body")[0],this.doc_body&&document.removeEventListener("readystatechange",i),e())};document.addEventListener("readystatechange",i),i()})}isSlotInViewport(e){let i,n=this.window.document.getElementById(e),r=!1,s=0;if(!n||typeof n>"u")return!1;if(n.style.display==="none"?(n.style.display="block",i=n.getBoundingClientRect(),n.style.display="none"):i=n.getBoundingClientRect(),r=i.height>=600,i.top>=0&&i.left>=0&&i.bottom<=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.right<=(this.window.innerWidth||this.window.document.documentElement.clientWidth))return!0;if(i.top<0&&i.left>=0){if(s=(i.height-Math.abs(i.top))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}if(i.bottom>=(this.window.innerHeight||this.window.document.documentElement.clientHeight)&&i.left>=0){if(s=(i.height-(i.bottom-(this.window.innerHeight||this.window.documentElement.clientHeight)))/i.height*100,r){if(s>=67)return!0}else if(s>=51)return!0}return!1}isSlotVisible(e){let i=this.window.document.getElementById(e);return i?!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length):!1}gptApiReady(){return this.log.info(Ee,"Checking for googletag.apiReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&this.window.googletag.apiReady)e();else{if(!r)return i("OCM gptApiReady: Max tries reached");setTimeout(n.bind(null,r-1),50)}};n(40)})}gptPubAdsReady(){return this.log.info(Ee,"Checking for googletag.pubadsReady..."),new Promise((e,i)=>{let n=r=>{if(this.window.googletag&&this.window.googletag.pubadsReady)e();else{if(!r)return i("OCM gptPubAdsReady: Max tries reached");setTimeout(n.bind(null,r-1),200)}};n(50)})}throttle(e,i){let n=Date.now();return function(){n+i-Date.now()<0&&(e(),n=Date.now())}}allowedPageType(e){return this.log.info(Ee,"checking for page type validity",e,this.window.OCM.pageType),this.window.OCM.pageType==="Block"?!1:e.includes("ROS")?!0:e.includes(this.window.OCM.pageType)}mobileScreenWidth(){return this.log.info(Ee,"Resolving screen width..."),this.window.innerWidth||this.window.document.documentElement.clientWidth||this.window.document.body.clientWidth}desktopScreenWidth(){return this.log.info(Ee,"Resolving screen width..."),this.isRetina()?window.top.devicePixelRatio/2*(this.window.innerWidth||this.window.document.documentElement.clientWidth||this.window.document.body.clientWidth):window.top.devicePixelRatio*(this.window.innerWidth||this.window.document.documentElement.clientWidth||this.window.document.body.clientWidth)}mobileScreenHeight(){return this.log.info(Ee,"Resolving screen height..."),this.window.innerHeight||this.window.document.documentElement.clientHeight||this.window.document.body.clientHeight}desktopScreenHeight(){return this.log.info(Ee,"Resolving screen height..."),this.isRetina()?window.top.devicePixelRatio/2*(this.window.innerHeight||this.window.document.documentElement.clientHeight||this.window.document.body.clientHeight):window.top.devicePixelRatio*(this.window.innerHeight||this.window.document.documentElement.clientHeight||this.window.document.body.clientHeight)}isRetina(){return(window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx), only screen and (min-resolution: 75.6dpcm)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min--moz-device-pixel-ratio: 2), only screen and (min-device-pixel-ratio: 2)").matches)||window.devicePixelRatio&&window.devicePixelRatio>=2)&&/(iPad|iPhone|iPod)/g.test(navigator.userAgent)}loadStyle(e){this.log.info(Ee,"Loading style...",e.substring(0,100));let i=document.createElement("style");i.appendChild(document.createTextNode(e)),this.doc_head.appendChild(i)}loadImage(e,i){this.log.info(Ee,"Loading image...",e);let n=document.createElement("img");n.src=e,i==="body"?this.doc_body.insertBefore(n,this.doc_body.firstChild):this.doc_head.appendChild(n)}loadScript(e,i,n,r,s){this.log.info(Ee,"Loading script...",e);let a=document.createElement("script");a.type=i,a.src=e,n===1&&(a.async="true"),r!==""&&(a.class=r),s==="body"?this.doc_body.insertBefore(a,this.doc_body.firstChild):this.doc_head.appendChild(a)}determineInjectionTarget(e,i=0,n=0,r=0,s=0){this.log.info(Ee,"determineInjectionTarget",e,i,n,r,s);let a=null;if(e===""||!e)return a;let o;return typeof e=="string"?o=this.window.document.querySelectorAll(e):typeof e=="object"&&(o=e.length===void 0?[e]:e),r===0?o.length&&o.length>=n&&(i?i===-1?a=o[o.length-1]:a=o[i]:a=o[0]):a=this.getParagraphAt(r,s,o),a}injectTag(e,i,n){this.log.info(Ee,"Injecting tag",e,i,n);let r=null;switch(n){case"insertInsideStart":r=e.insertAdjacentElement("afterbegin",i);break;case"insertInside":r=e.appendChild(i);break;case"insertAfter":r=e.parentNode.insertBefore(i,e.nextElementSibling);break;case"insertBefore":r=e.parentNode.insertBefore(i,e);break;default:break}return r}calculateBidderTimeout(){let e=this.config.services.header_bidding.timeout;return this.log.info("Header Bidding","bidderTimeout = "+this.config.services.header_bidding.timeout),this.isMobile()&&(e*=2,this.log.info("Header Bidding","Mobile device, so bidderTimeout = ",e)),e}getParagraphAt(e,i,n){let r=0,s=0;for(let a of n)r=r+a.innerHTML.split(/\s+/).length;if(r>=i){for(let a of n)if(s=s+a.innerHTML.split(/\s+/).length,s>=e)return a}return null}getParameterByName(e){let i=this.window.location.href;e=e.replace(/[\[\]]/g,"\\$&");let r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(i);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}waitFor(e,i,n=50,r){let s=e.split(".");if(!s.length){typeof r=="function"&&r();return}let a=o=>{if(o===0){typeof r=="function"&&r();return}let l=null;s.forEach(u=>{l?l=l[u]:l=this?.window[u]}),l?typeof i=="function"&&i():setTimeout(()=>a(o-1),100)};a(n)}getUniqueListBy(e,i){return[...new Map(e.map(n=>[n[i],n])).values()]}getUnique(e,i){return e.map(n=>n[i]).map((n,r,s)=>s.indexOf(n)===r&&r).filter(n=>e[n]).map(n=>e[n])}async parseRss(e){return new Promise(async(i,n)=>{await fetch(e).then(r=>r.text()).then(r=>new this.window.DOMParser().parseFromString(r,"text/xml")).then(r=>{try{let s=[],a=r.querySelectorAll("item, entry"),o=!1;return r.querySelector("feed")?.getAttribute("xmlns")?.indexOf("Atom")>-1&&(o=!0),Array.from(a).forEach(l=>{this.log.info(Ee,"Fetched RSS item",l);let u=l.querySelector("title"),p=l.querySelector("link"),v=l.querySelector("image"),h=l.querySelector("[url][width][height]"),d=l.querySelector("enclosure"),g=l.querySelector("description"),f=l.getElementsByTagName("media:content").length>0?l.getElementsByTagName("media:content").item(0):null,y=l.getElementsByTagName("media:thumbnail").length>0?l.getElementsByTagName("media:thumbnail").item(0):null;if(o){u=l.querySelector("title"),v=l.querySelector('link[type="image/jpeg"], link[type="image/png"], link[type="image/jpg"]')?.getAttribute("href"),p=l.querySelector('link[rel="alternate"]')?.getAttribute("href"),s.push({title:u?u.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p||"",image:v});return}if(!u||!p)return this.log.warn(Ee,"Failed to get title or url element",l),n("Failed to get title or url element");let m="";v?(m=v.innerHTML,v.querySelector("url")&&(m=v.querySelector("url").innerHTML),m.indexOf("<url>")>-1&&(m=m.replace("<url>","").replace("</url>",""))):h&&h.getAttribute("url").length?m=h.getAttribute("url"):d&&d.getAttribute("url").length?m=d.getAttribute("url"):f?m=f.getAttribute("url"):y?m=y.getAttribute("url"):g&&(m=this.extractImageFromDescription(l.innerHTML)),m.length&&s.push({title:u?u.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",link:p?p.innerHTML.replace("//<![CDATA[","").replace("//]]>","").replace("<![CDATA[","").replace("]]>",""):"",image:m})}),s=this.getUnique(s,"link"),s=s.filter(l=>l&&l.link&&l.link!==this.window.location.href),s=s.sort(()=>.5-Math.random()).slice(0,10),this.log.info(Ee,"RSS items: ",s),s.length?i(s):n("No RSS items fetched")}catch(s){return n(s)}})})}extractImageFromDescription(e){let i=/img[^>]+src=['"]([^">]+)['"]/gm,n=e.matchAll(i);for(let r of n)if(typeof r[1]<"u")return r[1];return""}clipHiddenOverflows(e,i){let n=a=>this.window.getComputedStyle(a).overflow==="hidden",r=e;i||this.log.info(Ee,"** Overflow check commence!",r);let s=i||r;if(n(r)&&r.tagName!=="BODY"){this.log.warn(Ee,"Overflow found on:",r.tagName,{issue:"OVERFLOW IS HIDDEN",tagName:r.tagName,id:r.id,class:r.className,element:r});let a=r.getAttribute("style");r.setAttribute("style",a+"; overflow:clip !important")}if(r.parentElement)return this.clipHiddenOverflows(r.parentElement,s);this.log.info(Ee,"Overflow check complete! original element:",s)}calculateLoggingSamples(){let e=Math.floor(Math.random()*100);this.willSampleWarnings=e<2,this.willSampleErrors=e<10}getRandomString(e=7){return(Math.random()+1).toString(36).substring(e)}ocmGoneMadPreview(){let e=this.getParameterByName("campaign_id"),i=this.getParameterByName("adformat");e&&e!==""&&i&&i!==""&&this.contentLoaded().then(()=>{let n=document.createElement("script");n.id="ocm-gone-mad-sdk",n.src=`https://ads.orangeclickmedia.com/ogm/ocm-gone-mad.min.js?campaign_id=${e}&adformat=${i}&cb=${new Date().getTime()}`,this.doc_body.append(n),this.updateState("ocm_gone_mad_preview",!0),this.log.info(Ee,"Loading ocm gone mad preview...")})}lazyLoad(e,i,n){let r=new IntersectionObserver((a,o)=>{a.forEach(l=>{l.isIntersecting&&l.intersectionRatio>=0&&n&&typeof n=="function"&&(n(l),o.unobserve(l.target))})},i),s=this.window.document.querySelector(e);s?r.observe(s):this.log.info(Ee+"Could not find defined selector: "+e)}adjustLazyLoadOffset(e,i=!1){let n=navigator.connection||navigator.mozConnection||navigator.webkitConnection,r=e,s=this.window.navigator.userAgent.indexOf("Safari")!==-1||this.window.navigator.userAgent.indexOf("Firefox")!==-1||this.window.navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode;if(this.log.info(Ee,"isSafariOrFirefoxOrIE: ",s),!s&&(!n||n&&!n.effectiveType))return r;if(!i&&this.is_mobile&&(r=r*2),!s||n&&n.effectiveType)switch(n.effectiveType){case"2g":r=Math.round(r*5);break;case"3g":r=Math.round(r*1.38);break;default:break}return this.log.info(Ee,"Adjusted offset: ",r),r}measurePerformance(){let e=(n,r)=>{n.getEntries().forEach(s=>{s.entryType==="measure"&&s.name.includes("ocm_")&&this.log.info("Performance",`${s.name.replace("ocm_","")}'s duration: ${s.duration.toFixed(2)} ms`)})};new PerformanceObserver(e).observe({entryTypes:["measure","mark"]})}updateState(e,i){this.window.OCM=this.window.OCM||{},this.window.OCM.s=this.window.OCM.s||{},this.window.OCM.s[e]=i}isGoogle(){return navigator.userAgent.includes("Lighthouse")||navigator.userAgent.includes("Chrome-Lighthouse")||navigator.userAgent.includes("Googlebot")}isBot(){return this.browser.browser.name.includes("bot")||this.browser.browser.name.includes("spider")}detectIOS(){let e=window.top?.navigator;if(!e)return!1;let i=e.userAgent||e.vendor||window.top?.opera;return i&&(/iPad|iPhone|iPod/.test(i)&&!window.top?.MSStream||/Macintosh|Mac OS X/.test(i))}clone(e){let i=Array.isArray(e)?[]:{};for(let n in e){let r=e[n];r&&typeof r=="object"?i[n]=this.clone(r):i[n]=r}return i}getAdDivElement(e){let i=this.window.document.getElementById(e)||this.window.document.querySelector('[data-oau-code="'+e+'"]')||null;if(!i)try{let n=this.window.googletag.pubads().getSlots().filter(r=>r.getAdUnitPath()===e);n.length&&typeof n[0]=="object"&&(i=this.window.document.getElementById(n[0].getSlotElementId()))}catch{}return i}setMaxWidthForNatives(e){let i=this.window.ocmpbjs.adUnits.filter(n=>n.code===e)[0];if(i&&i.media_types.includes("native")){let n=i.sizes.sort((s,a)=>a[0]-s[0])[0][0],r=this.getAdDivElement(i.code);r&&(r.style.width=`${n}px`,r.style.maxWidth=`${n}px`,r.style.margin="0 auto")}}}});var tl=V((sg,el)=>{var Ot={gpt:{depends_on:[],blocks:[],misc:{priority:0}},page_sense:{depends_on:[],blocks:[],misc:{priority:0}},reaper:{depends_on:["page_sense"],blocks:[],misc:{priority:1}},lazyload:{depends_on:[],blocks:["header_bidding"],misc:{priority:2}},header_bidding:{depends_on:["page_sense"],blocks:[],misc:{priority:3}},fizz:{depends_on:[],blocks:[],misc:{priority:4}},mwi:{depends_on:["gptInit"],blocks:[],misc:{priority:4}},rewarded_ad:{depends_on:["gptInit"],blocks:[],misc:{priority:4}},injected_tags:{depends_on:[],blocks:[],misc:{priority:4}},sticky:{depends_on:[],blocks:[],misc:{priority:4}},mobile_inread_sticky:{depends_on:[],blocks:[],misc:{priority:4}},in_image:{depends_on:[],blocks:[],misc:{priority:4}},outbrain:{depends_on:[],blocks:[],misc:{priority:4}},story_teller_v2:{depends_on:[],blocks:[],misc:{priority:4}},aniview:{depends_on:[],blocks:[],misc:{priority:4}},advertorials:{depends_on:[],blocks:[],misc:{priority:4}},custom_code:{depends_on:[],blocks:[],misc:{priority:5}},blockthrough:{depends_on:["is_ad_blocked"],blocks:[],misc:{priority:6}},fou_analytics:{depends_on:[],blocks:[],misc:{priority:6}},adlightning:{depends_on:[],blocks:[],misc:{priority:6}},teads_analytics:{depends_on:[],blocks:[],misc:{priority:6}},ocm_chrome_ext:{depends_on:[],blocks:[],misc:{priority:7}}};el.exports=()=>{let t=[];for(let i in Ot)t.includes(Ot[i].misc.priority)||t.push(Ot[i].misc.priority);t.sort();let e=[];for(let i of t){e[i]=[];for(let n in Ot)Ot[n].misc.priority===t[i]&&(e[i].push({name:n,depends_on:Ot[n].depends_on,blocks:Ot[n].blocks,misc:Ot[n].misc}),e[i].sort((r,s)=>r.depends_on.length>0))}return e}});var nl=V((ag,il)=>{var Uh=async t=>new Promise((e,i)=>{try{let n=window.pageType||"ROS";switch(n){case"home":n="Home";break;case"single_post":n="Article";break;case"archive":n="Category";break;case"search":n="Search";break;case"videos":n="Video Category";break;case"single_video":n="Video Article";break;case"podcasts":n="Podcast Category";break;case"podcast_subcategory":n="Podcast";break;case"protoselida":n="Newspapers";break;case"magazine_category":n="Magazines";break;case"magazine_subcategory":n="Magazines";break;case"single_magazine":n="Magazine";break;case"live_blog":n="Live Blog";break;default:n="ROS";break}let r=new Date().getTime();return r>=17203968e5&&r<=1723852799e3&&window.location.href.includes("/magazine/")&&(t.config.services.sticky.active=!1),e(n)}catch(n){return i(n)}});il.exports=Uh});var sl=V((og,rl)=>{var Kh=t=>new Promise((e,i)=>{try{return t.contentLoaded().then(()=>{t.getParameterByName("ocm_inread_demo")==1&&Gh()}),e(!0)}catch(n){return i(n)}}),Gh=t=>{t.loadStyle(".teads-inread {max-width: 650px!important; margin: 10px auto;} ");var e=t.getParameterByName("vastUrl")||"",i=112951,n=1,r=!1,s=!1,a="no";t.getParameterByName("view_to_start")==1&&(n=122779),t.getParameterByName("smart")==1&&(n=122781,r=!0,window.DO_BYPASS_DO_FORCE_SMART=!0),t.getParameterByName("slider")==1&&(n=122782,s=!0,r=!0);var o=".article-body__body p",l=3,u="inread";window._ttp={},window._ttp[i]=[{slider:{allow_corner_position:!0,allow_top_position:!0},pid:n,format:u,parentWindow:!1,slot:{selector:o,minimum:l,btf:!1,css:"margin: 0px auto 25px; max-width: 650px !important;"}}],window._tta={},window._tta[i]=[{type:"VastUrl",content:e,portfolio_item_id:1,settings:{values:{pageId:i,placementId:n,placementFormat:u,threshold:50,adType:"video"},components:{credits:{display:!1,text:"",link:"#"},closeButton:{display:!0}},behaviors:{onlyNative:!1,smartPosition:{corner:r,top:r},slider:{enable:s},videoPause:a}}}];var p=document.createElement("script");p.src="//a.teads.tv/media/format/v3/teads-format.js",document.head.appendChild(p)};rl.exports=Kh});var Ur=-1,en=function(t){addEventListener("pageshow",function(e){e.persisted&&(Ur=e.timeStamp,t(e))},!0)},Kr=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},tn=function(){var t=Kr();return t&&t.activationStart||0},gi=function(t,e){var i=Kr(),n="navigate";return Ur>=0?n="back-forward-cache":i&&(document.prerendering||tn()>0?n="prerender":document.wasDiscarded?n="restore":i.type&&(n=i.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Gr=function(t,e,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver(function(r){Promise.resolve().then(function(){e(r.getEntries())})});return n.observe(Object.assign({type:t,buffered:!0},i||{})),n}}catch{}},mi=function(t,e,i,n){var r,s;return function(a){e.value>=0&&(a||n)&&((s=e.value-(r||0))||r===void 0)&&(r=e.value,e.delta=s,e.rating=function(o,l){return o>l[1]?"poor":o>l[0]?"needs-improvement":"good"}(e.value,i),t(e))}},$r=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},Wr=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},Jr=function(t){var e=!1;return function(){e||(t(),e=!0)}},Kt=-1,zr=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},vi=function(t){document.visibilityState==="hidden"&&Kt>-1&&(Kt=t.type==="visibilitychange"?t.timeStamp:0,ll())},Hr=function(){addEventListener("visibilitychange",vi,!0),addEventListener("prerenderingchange",vi,!0)},ll=function(){removeEventListener("visibilitychange",vi,!0),removeEventListener("prerenderingchange",vi,!0)},Xr=function(){return Kt<0&&(Kt=zr(),Hr(),en(function(){setTimeout(function(){Kt=zr(),Hr()},0)})),{get firstHiddenTime(){return Kt}}},Yr=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},Vr=[1800,3e3],Qr=function(t,e){e=e||{},Yr(function(){var i,n=Xr(),r=gi("FCP"),s=Gr("paint",function(a){a.forEach(function(o){o.name==="first-contentful-paint"&&(s.disconnect(),o.startTime<n.firstHiddenTime&&(r.value=Math.max(o.startTime-tn(),0),r.entries.push(o),i(!0)))})});s&&(i=mi(t,r,Vr,e.reportAllChanges),en(function(a){r=gi("FCP"),i=mi(t,r,Vr,e.reportAllChanges),$r(function(){r.value=performance.now()-a.timeStamp,i(!0)})}))})};var tf=1/0;var ul=function(t){var e=self.requestIdleCallback||self.setTimeout,i=-1;return t=Jr(t),document.visibilityState==="hidden"?t():(i=e(t),Wr(t)),i};var qr=[2500,4e3],Zi={},Zr=function(t,e){e=e||{},Yr(function(){var i,n=Xr(),r=gi("LCP"),s=function(l){e.reportAllChanges||(l=l.slice(-1)),l.forEach(function(u){u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-tn(),0),r.entries=[u],i())})},a=Gr("largest-contentful-paint",s);if(a){i=mi(t,r,qr,e.reportAllChanges);var o=Jr(function(){Zi[r.id]||(s(a.takeRecords()),a.disconnect(),Zi[r.id]=!0,i(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return ul(o)},!0)}),Wr(o),en(function(l){r=gi("LCP"),i=mi(t,r,qr,e.reportAllChanges),$r(function(){r.value=performance.now()-l.timeStamp,Zi[r.id]=!0,i(!0)})})}})};var lg=pi({"../../services/adlightning.js":()=>nn(),"../../services/advertorials.js":()=>_n(),"../../services/aniview.js":()=>An(),"../../services/blockthrough.js":()=>In(),"../../services/cmp.js":()=>Ci(),"../../services/fizz.js":()=>Fn(),"../../services/fou_analytics.js":()=>Tn(),"../../services/geolocation.js":()=>Pi(),"../../services/gpt.js":()=>Nn(),"../../services/header_bidding.js":()=>Di(),"../../services/iab_compliance.js":()=>Oi(),"../../services/in_image.js":()=>qn(),"../../services/injected_tags.js":()=>Un(),"../../services/lazyload.js":()=>Kn(),"../../services/mobile_inread_sticky.js":()=>Gn(),"../../services/mwi.js":()=>$n(),"../../services/ocm_chrome_ext.js":()=>Wn(),"../../services/outbrain.js":()=>Jn(),"../../services/reaper.js":()=>er(),"../../services/rewarded_ad.js":()=>tr(),"../../services/sticky.js":()=>ir(),"../../services/story_teller_v2.js":()=>fr(),"../../services/teads_analytics.js":()=>pr(),"../../services/teads_preview.js":()=>Bi(),"../../services/user_engagement.js":()=>ki()});var ug=pi({"../../services/adlightning.js":()=>nn(),"../../services/advertorials.js":()=>_n(),"../../services/aniview.js":()=>An(),"../../services/blockthrough.js":()=>In(),"../../services/cmp.js":()=>Ci(),"../../services/fizz.js":()=>Fn(),"../../services/fou_analytics.js":()=>Tn(),"../../services/geolocation.js":()=>Pi(),"../../services/gpt.js":()=>Nn(),"../../services/header_bidding.js":()=>Di(),"../../services/iab_compliance.js":()=>Oi(),"../../services/in_image.js":()=>qn(),"../../services/injected_tags.js":()=>Un(),"../../services/lazyload.js":()=>Kn(),"../../services/mobile_inread_sticky.js":()=>Gn(),"../../services/mwi.js":()=>$n(),"../../services/ocm_chrome_ext.js":()=>Wn(),"../../services/outbrain.js":()=>Jn(),"../../services/reaper.js":()=>er(),"../../services/rewarded_ad.js":()=>tr(),"../../services/sticky.js":()=>ir(),"../../services/story_teller_v2.js":()=>fr(),"../../services/teads_analytics.js":()=>pr(),"../../services/teads_preview.js":()=>Bi(),"../../services/user_engagement.js":()=>ki()});var Nr="";String.prototype.ocmStartsWith||Object.defineProperty(String.prototype,"ocmStartsWith",{value:function(t,e){let i=e>0?e|0:0;return this.substring(i,i+t.length)===t}});Array.prototype.ocmContainsArray||Object.defineProperty(Array.prototype,"ocmContainsArray",{enumerable:!1,value:function(t){let e={};for(let i=0;i<this.length;i++)e[this[i]]=i;return e.hasOwnProperty(t)}});(!Promise.allSettled||typeof Promise.allSettled!="function")&&(Promise.allSettled=function(t){let e=t.map(i=>i.then(n=>({status:"fulfilled",value:n})).catch(n=>({status:"rejected",reason:n})));return Promise.all(e)});var Mr=go(),$h=Zo(),Wh=tl(),Jh=Ci(),Xh=Oi(),Yh=Pi(),Qh=Bi(),Br=class{constructor(e){if(this.utils=e,this.blockThese=[],this.contentfulPaintEnded=!1,this.isDevModeOn=!1,this.isDevModeOn=this.shouldLoadDevScript(),this.isDevModeOn)return;this.utils.getParameterByName("gordon")==="freeman"&&(this.utils.config.debug=!0),this.priorityGroups=Wh()}shouldLoadDevScript(){if(this.utils.getParameterByName("ocm_dev")==="1"&&this.utils.config.env==="prod"){let e=document.createElement("script");return e.src=`//cdn.orangeclickmedia.com/tech/dev/${this.utils.config.script_tag}/ocm.js?rand=${Math.round(Math.random()*1e9)}`,e.crossOrigin="anonymous",this.utils.doc_head.append(e),this.utils.log.info(Nr,"Running script in dev mode..."),!0}return!1}setupOutbrainExternalId(){this.utils.window.OB_extId=this.utils.hostname||""}async run(){performance.mark("ocm_start"),this.setupOutbrainExternalId(),await this.gptInit(),await this.isAdBlocked(),this.utils.config.services.cmp.active&&(await new Jh(this.utils,this.utils.config).run(),performance.mark("cmp_end"),performance.measure("ocm_cmp","cmp_start","cmp_end")),await new Xh(this.utils,this.utils.config).run(),performance.mark("iab_compliance_end"),performance.measure("ocm_iab_compliance","iab_compliance_start","iab_compliance_end"),new Yh(this.utils,this.utils.config).run().catch(s=>{this.utils.log.error(s.name,s.message,"Error running service")}),performance.mark("geolocation_end"),performance.measure("ocm_geolocation","geolocation_start","geolocation_end");let n=Object.keys(this.utils.config.services||{}),r=0;try{for(let s of this.priorityGroups){let a=[],o=[];for(let l of s)if(n.includes(l.name)&&this.utils.config.services[l.name].active||["page_sense","custom_code"].includes(l.name)){let u=!0;if(l.depends_on.length&&l.depends_on.forEach(p=>{u&&!this.utils.window.OCM.s.hasOwnProperty(p)&&(u=!1)}),["mobile_inread_sticky","page_sense","custom_code"].includes(l.name)||(this.utils.config.services[`${l.name}`].hasOwnProperty("page_types")&&!this.utils.allowedPageType(this.utils.config.services[`${l.name}`].page_types)?(u=!1,this.utils.config.services[l.name].active=!1):l.name==="aniview"?this.utils.is_mobile&&this.utils.config.services?.aniview?.mobile?.rules&&!this.utils.allowedPageType(this.utils.config.services?.aniview?.mobile?.rules?.page_types||[])?(u=!1,this.utils.config.services.aniview.active=!1):this.utils.config.services?.aniview?.desktop&&this.utils.config.services?.aniview?.desktop?.rules?.page_types&&!this.utils.allowedPageType(this.utils.config.services?.aniview?.desktop?.rules?.page_types||[])&&(u=!1,this.utils.config.services.aniview.active=!1):this.utils.is_mobile&&this.utils.config.services[`${l.name}`]?.mobile?.conditions?.page_types&&!this.utils.allowedPageType(this.utils.config.services[`${l.name}`]?.mobile?.conditions?.page_types||[])?(u=!1,this.utils.config.services[`${l.name}`].active=!1):this.utils.config.services[`${l.name}`]?.desktop?.conditions?.page_types&&!this.utils.allowedPageType(this.utils.config.services[`${l.name}`]?.desktop?.conditions?.page_types||[])&&(u=!1,this.utils.config.services[`${l.name}`].active=!1)),u)if(l.blocks.length&&this.blockThese.concat(l.blocks),["page_sense","custom_code"].includes(l.name)){let p=l.name==="page_sense"?nl():sl();l.name==="page_sense"?(performance.mark("page_sense_start"),this.pageSensePromiseIndex=a.length):l.name==="custom_code"&&(performance.mark("custom_code_start"),this.customCodePromiseIndex=a.length),a.push(()=>p(this.utils))}else{let p=lg(`../../services/${l.name}.js`),v=new p(this.utils,this.utils.config);a.push(()=>v.run())}}a.length&&await Promise.allSettled(a.map((l,u)=>l().then(p=>{u===this.pageSensePromiseIndex?(this.utils.window.OCM.pageType=p,this.pageSensePromiseIndex=-1,this.utils.updateState("page_sense",!0),performance.mark("page_sense_end"),performance.measure("ocm_page_sense","page_sense_start","page_sense_end")):u===this.customCodePromiseIndex?(this.customCodePromiseIndex=-1,this.utils.updateState("custom_code",!0),performance.mark("custom_code_end"),performance.measure("ocm_custom_code","custom_code_start","custom_code_end")):(this.utils.updateState(p.name,!0),this.utils.log.info(p.name,"Service ran successfully with result",p),performance.mark(`${p.name}_end`),performance.measure(`ocm_${p.name}`,`${p.name}_start`,`${p.name}_end`))}).catch(p=>{this.utils.log.error(p.name,p.message,"Error running service")}))).then(()=>{this.utils.log.info("index",`Completed all services in group ${r++}`)}).catch(l=>{this.utils.log.error("index",l,"Error running services in group")})}this.discoverAllOutbrainWidgets()}catch(s){this.utils.log.error("index",s,"Could not loop through priority groups")}this.runTeadsDemo()}heyYou(e,i){this.utils.config.services[e].active=!0,this.utils.config.services[e]=Object.assign(this.utils.config.services[e],i);let n=ug(`../../services/${e}`);new n().run()}gptInit(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.top.googletag=window.top.googletag||{},window.top.googletag.cmd=window.top.googletag.cmd||[],this.utils.window.googletag.cmd.push(()=>{this.utils.window.googletag.pubads().setTargeting("ocm_domain",[this.utils.hostname])}),this.utils.updateState("gptInit",!0)}isAdBlocked(){return new Promise(async(e,i)=>{this.utils.isAdBlocked().then(n=>(this.utils.window.OCM.adBlocked=n,this.utils.updateState("is_ad_blocked",!0),e()))})}discoverAllOutbrainWidgets(){"OBR"in this.utils.window&&this.utils.window.OBR.extern.researchWidget()}runTeadsDemo(){if(!this.utils.config.services.teads_analytics.active||!this.utils.getParameterByName("vast_url")&&this.utils.getParameterByName("vast_url")==="")return;let e=new Qh(this.utils,this.utils.config);setTimeout(()=>{e.run().catch(i=>{this.utils.log.error(i.name,i.message,"Error running service")})},1e3)}},je=new $h(Mr);je.measurePerformance();je.window.OCM=je.window.OCM||{};je.window.OCM.s=je.window.OCM.s||{};je.window.OCM.infi_article_count=1;je.window.OCM._oeid=je._oeid;je.window.OCM.site_categories=Mr?.site_categories||[];je.window.OCM.applyOBRStyles=()=>{je.loadStyle(".ob-grid-layout.ob-read-next-layout .ob-dynamic-rec-container, .ob-grid-layout.ob-read-next-layout .ob-widget-items-container{height:90px !important;}.READNXTM_1.ob-widget .ob_what{height:20px !important;.READNXTM_1.ob-read-next-layout .ob-sub-units{margin-top:10px}}")};var Xi=!1,Zh=()=>new Promise((t,e)=>{if(performance.mark("wait_for_contentful_paint_start"),!je.is_mobile||window.self!==window.top||Mr?.waitForContentfulPaint===!1&&!je.isGoogle())return t(!0);Qr(i=>(Xi||(je.log.info(Nr,"FCP detected",i),Xi=!0),t(!0))),Zr(i=>(Xi||(je.log.info(Nr,"LCP detected",i),Xi=!0),t(!0)))});Zh().then(()=>{performance.mark("wait_for_contentful_paint_end"),performance.measure("ocm_wait_for_contentful_paint","wait_for_contentful_paint_start","wait_for_contentful_paint_end");let t=new Br(je);t.isDevModeOn||!je.is_bot&&!je.url.startsWith("file:///")&&t.run()});})();

</script>

</body>
</html>
