<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmwusa-globalnav-primary-zip.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{C as p}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js";import{V as l}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/validator.js";import{c as e}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import{q as h}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/queryparams.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js";new p({el:".globalnav-primary-zip",name:"Globalnav Primary ZIP Component",subscriptions:{"window.resizeEnd":"resizeEvt",dealerUpdate:"prepopulate"},zipCodeCookieName:"user_zipcode",currentBreakpoint:window.innerWidth>1240?"desktop":"tablet",init(){this.form=this.element,this.zipHolder=this.element.querySelector(`${this.el}__form-holder`),this.zipBtn=this.element.querySelector(`${this.el}__primary-btn`),this.secondaryZipBtn=this.element.querySelector(`${this.el}__secondary-btn`),this.input=this.element.querySelector(`${this.el}__input`),this.showInput=this.showInput.bind(this),this.inputBlur=this.inputBlur.bind(this),this.formCheck=this.formCheck.bind(this),this.validateNumber=this.validateNumber.bind(this),this.prepopulate=this.prepopulate.bind(this),this.zipBtn.addEventListener("click",this.formCheck),this.secondaryZipBtn.addEventListener("click",this.formCheck),this.input.addEventListener("focus",this.showInput),this.input.addEventListener("keyup",this.validateNumber),this.currentBreakpoint!=="tablet"&&this.input.value!==""&&this.showInput(),this.zipHolder.addEventListener("click",this.showInput),this.input.addEventListener("blur",this.inputBlur),this.prepopulate()},updateUrl(i){new URL},prepopulate(){const i=h.get("zip")||e.get("ExploreZip")||e.get("user_zipcode");i&&(this.input.value=i,this.showInput(!0))},formCheck(i){var o,s,a;if(i.preventDefault(),!l.validateZipCode(this.input.value)){this.form.classList.add("globalnav-primary-zip--error-active"),window._satellite.track("AA_DC_NavLocalInventoryZipError");return}const t=this.input.value;e.has("OfferZip")||(window._satellite.track("AA_DC_NavInventoryZipSubmission"),e.smartSet("OfferZip",t)||(this.raiseEvent("gn-offers-finance","cannot set OfferZip","error",new Error(`searchTerm: ${t}`)),(o=window==null?void 0:window._satellite)==null||o.track("AA_DC_NavLocalInventoryZipError")),window._satellite.track("AA_DC_NavCPOZipSubmission"),e.smartSet("Pre-Owned",t)||(this.raiseEvent("gn-offers-finance","cannot set Pre-Owned","error",new Error(`searchTerm: ${t}`)),(s=window==null?void 0:window._satellite)==null||s.track("AA_DC_NavLocalInventoryZipError"))),(a=window==null?void 0:window._satellite)!=null&&a.track&&window._satellite.track(i.currentTarget.getAttribute("analytics-track"));const r=i.currentTarget.getAttribute("formaction");let n=window.location.href;r.startsWith("http")?n=`${r}?zipCode=${t}`:r.startsWith("/")&&(n=`${window.location.origin}${r}?zipCode=${t}`),window.location.href=n},showInput(i){this.zipHolder.classList.add("globalnav-primary-zip__form-holder--active"),i&&setTimeout(()=>{this.input.focus()},300)},inputBlur(i){i.currentTarget.value===""&&this.zipHolder.classList.remove("globalnav-primary-zip__form-holder--active")},resizeEvt(i,t){this.currentBreakpoint==="desktop"&&(t==null?void 0:t.width)<768?this.currentBreakpoint="tablet":this.currentBreakpoint==="tablet"&&(t==null?void 0:t.width)>=768&&(this.currentBreakpoint="desktop")},validateNumber(){setTimeout(()=>{this.input.value=this.input.value.replace(/\D/g,"")})}});

</script>

</body>
</html>
