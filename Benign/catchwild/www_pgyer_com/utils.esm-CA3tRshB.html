<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>utils.esm-CA3tRshB.html</title>
</head>
<body>

<script>
var k=function(r,t,a){var e;return function(){var i=null,o=arguments,u=function(){e=null,a||r.apply(i,o)},s=a&&!e;clearTimeout(e),e=window.setTimeout(u,t),s&&r.apply(i,o)}},B=function(r){var t=r.replace("#",""),a=parseInt(t.slice(0,2),16),e=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return a*.299+e*.587+i*.114>186?"#000000":"#FFFFFF"},E=function(r){var t="";if(r>=60&&r<3600){var a=Math.floor(r/60);t=a+" Min";var e=a===60?0:Math.floor(r%60);return t+(e>0?" "+e+" Sec":"")}if(r>=3600&&r<86400){var i=Math.floor(r/3600);t=i+" Hr";var o=r%3600<60||i===24?0:Math.floor(r%3600/60);return t+(o>0?" "+o+" Min":"")}if(r>=86400){var u=Math.floor(r/86400);t=u+" Day";var s=r%86400<3600||u>=364?0:Math.floor(r%86400/3600);return t+(s>0?" "+s+" Hr":"")}return Math.floor(r)+" Sec"},x=function(r,t,a){r===void 0&&(r=""),t===void 0&&(t=1024),a===void 0&&(a=!1);var e=r;return r.length>t&&(e=r.substring(0,t)),a&&(e=e+"..."),e},$=function(r,t){return r===null||r===0?{time:"",unit:""}:r<3600?{time:Number((r/60).toFixed(1)),unit:t.minute}:r<86400?{time:Number((r/3600).toFixed(1)),unit:t.hour}:{time:Number((r/86400).toFixed(1)),unit:t.day}};function z(n){try{var r=String(n).toLowerCase();return!!JSON.parse(r)}catch{return!1}}function L(n){return n.slice().sort(function(r,t){return r-t})}function N(n,r,t){return t<n?n:t>r?r:t}function w(n,r){var t=N(0,1,r),a=(n.length-1)*t,e=Math.floor(a),i=a-e;return n[e+1]!==void 0?n[e]+i*(n[e+1]-n[e]):n[e]}var D=function(r,t){var a=L(r);return t.map(function(e){return w(a,e)})};function m(){return m=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},m.apply(this,arguments)}var A=/{{(.*?)}}/g,O=function(r){return r.replace(/```(?:.|\n)+?```/g,"")},d=function(r){return(r||"").replace(/\b(\w)/g,function(t){return t.toUpperCase()})},M=function(r){var t=r.user,a=t!=null&&t.name?t.name.split(" ").shift():"";return d(a)},_=function(r){var t=r.user;if(t&&t.name){var a=t.name.split(" ").length>1?t.name.split(" ").pop():"";return d(a)}return""},G=function(r){var t,a=r.conversation,e=r.contact,i=a.meta,o=i.assignee,u=i.sender,s=a.id,l=a.custom_attributes,h=l===void 0?{}:l,p=e||{},c=p.custom_attributes,C={"contact.name":d((u==null?void 0:u.name)||""),"contact.first_name":M({user:u}),"contact.last_name":_({user:u}),"contact.email":u==null?void 0:u.email,"contact.phone":u==null?void 0:u.phone_number,"contact.id":u==null?void 0:u.id,"conversation.id":s,"agent.name":d((o==null?void 0:o.name)||""),"agent.first_name":M({user:o}),"agent.last_name":_({user:o}),"agent.email":(t=o==null?void 0:o.email)!=null?t:""},y=Object.entries(h??{}).reduce(function(v,f){var g=f[0],b=f[1];return v["conversation.custom_attribute."+g]=b,v},{}),F=Object.entries(c??{}).reduce(function(v,f){var g=f[0],b=f[1];return v["contact.custom_attribute."+g]=b,v},{}),S=m({},C,y,F);return S},H=function(r){var t=r.message,a=r.variables;return t==null?void 0:t.replace(A,function(e,i){return a[i.trim()]?a[i.trim().toLowerCase()]:""})},Q=function(r){var t=r.message,a=r.variables,e=O(t),i=e.match(A);return i?i.map(function(o){return o.replace("{{","").replace("}}","").trim()}).filter(function(o){return a[o]===void 0}):[]},q=function(r,t,a){var e=null,i=function(){e||r(),u()},o=function(){e&&(clearTimeout(e),e=null,t())},u=function(){e&&clearTimeout(e),e=setTimeout(function(){o()},a)};return{start:i,stop:o}},T=function(r,t){if(t===null)return null;var a=Math.floor(Date.now()/1e3);return r+t-a},V=function(r){return r.sort(function(t,a){return Math.abs(t.threshold)-Math.abs(a.threshold)}),r[0]},R=function(r){var t={y:31536e3,mo:2592e3,d:86400,h:3600,m:60};if(r<60)return"1m";var a=[];return Object.keys(t).forEach(function(e){var i=Math.floor(r/t[e]);r<60&&a.length>0||a.length!==2&&i>0&&(a.push(i+e),r-=i*t[e])}),a.join(" ")},j=function(r,t,a){var e=t.sla_first_response_time_threshold,i=t.sla_next_response_time_threshold,o=t.sla_resolution_time_threshold,u=t.created_at,s=a.first_reply_created_at,l=a.waiting_since,h=a.status,p={FRT:{threshold:T(u,e),condition:e!==null&&(!s||s===0)},NRT:{threshold:T(l,i),condition:i!==null&&!!s&&!!l},RT:{threshold:T(u,o),condition:h==="open"&&o!==null}},c=p[r];return c?m({},c,{type:r}):null},U=function(r,t){var a=["FRT","NRT","RT"];return a.map(function(e){return j(e,r,t)}).filter(function(e){return!!e&&e.condition}).map(function(e){return m({},e,{icon:e.threshold<=0?"flame":"alarm",isSlaMissed:e.threshold<=0})})},J=function(r){var t=r.appliedSla,a=r.chat;if(!t||!a)return{type:"",threshold:"",icon:"",isSlaMissed:!1};var e=U(t,a),i=V(e);return i?{type:i==null?void 0:i.type,threshold:R(i.threshold<=0?-i.threshold:i.threshold),icon:i.icon,isSlaMissed:i.isSlaMissed}:{type:"",threshold:"",icon:"",isSlaMissed:!1}};export{G as a,Q as b,q as c,k as d,J as e,E as f,B as g,D as h,$ as i,z as p,H as r,x as t};
//# sourceMappingURL=utils.esm-CA3tRshB.js.map

</script>

</body>
</html>
