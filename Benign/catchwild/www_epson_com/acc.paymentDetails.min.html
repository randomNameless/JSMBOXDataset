<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>acc.paymentDetails.min.html</title>
</head>
<body>

<script>
ACC.paymentDetails={_autoload:["showRemovePaymentDetailsConfirmation","bindPaymentCreditCardAddressForm","displayPaymentCreditCardAddressForm","loadPreFilledPaymetricValues","bindPaymetricFunctionality","bindCouponForm","updateCouponApplyButton"],bindCouponForm:function(){$("#epsonCouponForm").on("submit",function(){console.log($("#couponCode-error").val());if($("#couponCode")==undefined||$("#couponCode").val()==""||$("#couponCode").val()=="undefined"){$("#couponApply").prop("disabled",false)}else{$("#couponApply").attr("disabled","disabled")}})},updateCouponApplyButton:function(){$("#couponApply").prop("disabled",false)},showRemovePaymentDetailsConfirmation:function(){$(document).on("click",".removePaymentDetailsButton",function(){var a=$(this).data("paymentId");var b=$(this).data("popupTitle");ACC.colorbox.open(b,{inline:true,transition:"elastic",href:"#popup_confirm_payment_removal_"+a,onComplete:function(){$(this).colorbox.resize()}})})},bindPaymentCreditCardAddressForm:function(){if($("#displayPaymentCountry").val()==""){var c=$('#address\\.country option[value!=""]');var d=c.val();var a=c.text().trim();$("#displayPaymentCountry").val(a);console.log("selected country value"+a+d);$("#address\\.country").val(d);var b={addressCode:"",countryIsoCode:d};if(b.countryIsoCode){ACC.paymentDetails.displayPaymentCreditCardAddressForm(b,ACC.paymentDetails.showAddressFormButtonPanel)}}},displayPaymentCreditCardAddressForm:function(a,b){form_ctl.funcs.doValidate_paymentDetailsForm();if(a!=undefined){$.ajax({url:ACC.config.encodedContextPath+"/my-account/paymentaddressform",async:true,data:a,dataType:"html",beforeSend:function(){console.log("options being sent"+a)}}).done(function(c){$("#paymentAddressForm").html($(c).html());if(typeof b=="function"){b.call()}form_ctl.funcs.doValidate_paymentDetailsForm()})}},submit_addNewPaymentDetailsButton:function(){var a=$("#pm_RequestForm").valid();var b=$("#paymentDetailsForm").valid();if(!a||!b){return false}console.log("Adding new credit card form submit");if(document.getElementById("DIeCommFrame")!=null&&document.getElementById("DIeCommFrame").contentWindow.document.getElementById("PayNowButton")!=null){document.getElementById("DIeCommFrame").contentWindow.document.getElementById("PayNowButton").click()}if(document.getElementById("PayNowButton")!=null){document.getElementById("PayNowButton").click();return false}else{ACC.common.blockFormAndShowProcessingMessage($(this));$(".paymentAddressForm").filter(":hidden").remove();ACC.paymentDetails.enableAddressForm();console.log("submitting the billing address form");$("#silentOrderPostForm").submit()}},shouldHideErrorBox:function(b){var a=true;b.siblings().each(function(){if(!$(this).hasClass("hidden")){a=false}});return a},bindPaymetricFunctionality:function(){function a(b){return document.getElementById("DIeCommFrame").contentWindow.document.getElementById(b)}$("#Paymetric_ErrorLogging").on("DOMSubtreeModified",function(){if($("#Paymetric_ErrorLogging")!=null&$("#Paymetric_ErrorLogging").children().length>0){$("#paymetricError").html($("#Paymetric_ErrorLogging").html());var c=$("#paymetricCreditCardErrorMsg").val().trim();var d=$("#paymetricError");var b=d.text().replace(/<br\s*\/?>/g,"").trim();d.text(b);if(b.includes("Credit Card Number!")||b.includes("CVV!")||b.includes("Exp Date!")){d.text(c)}d.show();$(".first-view").addClass("show-view");$(".second-view").removeClass("show-view");$(".second-view").css("display","none")}else{$("#paymetricError").hide()}});$("#pm_cc_number").on("keyup",function(){ACC.paymentDetails.fillPaymetricField("Paymetric_CreditCardNumber",$(this).val(),"#card_accountNumber");$("#pm_RequestForm").toggleClass("prefilled",false);var b=form_ctl.funcs.check_cc_type($(this).val());$("#Paymetric_CreditCardType option").each(function(){if($(this).val()==b){$("#Paymetric_CreditCardType").val(b)}})});$("#pm_ccv").on("keyup",function(){ACC.paymentDetails.fillPaymetricField("Paymetric_CVV",$(this).val(),"#card_cvNumber")});$("#pm_start_month").on("change",function(){ACC.paymentDetails.fillPaymetricField("Paymetric_Exp_Month",$(this).val(),"#card_expirationMonth")});$("#pm_exp_year").on("change",function(){ACC.paymentDetails.fillPaymetricField("Paymetric_Exp_Year",$(this).val(),"#card_expirationYear")})},fillPaymetricField:function(b,c,d){var a="#"+b;if(($el=$(a)).length){$el.val(c)}else{getDIeCommFrameElement(b).value=c}$(d).val(c)},loadPreFilledPaymetricValues:function(){$("#pm_start_month").val($("#Paymetric_Exp_Month").val());if(helpers.rm_if_blank($("#Paymetric_Exp_Year").val()).length==4){$("#pm_exp_year").val($("#Paymetric_Exp_Year").val().substring(2,4))}else{$("#pm_exp_year").val($("#Paymetric_Exp_Year").val())}var a=$("#Paymetric_CreditCardNumber").val();$("#pm_cc_number").val(a);if(!(a==undefined||a=="")&&(a.startsWith("************"))){$("#pm_RequestForm").toggleClass("prefilled",true)}}};
</script>

</body>
</html>
