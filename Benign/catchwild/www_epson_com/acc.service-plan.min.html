<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>acc.service-plan.min.html</title>
</head>
<body>

<script>
ACC.servicePlan={_autoload:["bindInitProductActivationPage","bindEditActions","bindDrawerPage","bindIntlTelInput","bindProductInformation","bindFileStackPicker","bindDisconnectAssociation","bindValidation"],bindDisconnectAssociation:function(){$("#disconnectEntriesModal").on("hidden.bs.modal",function(){$("input[type=checkbox][name=protection]").prop("checked",true)})},bindInitProductActivationPage:function(){$("#resellerCustomerSelection").on("change",function(){$(".resellerCustomerSelection").hide();if($(this).val()=="business-user-cust"){$("#resellerCustomerType").val("BU")}else{$("#resellerCustomerType").val("HU")}ACC.servicePlan.bindIntlTelInput(document.querySelector("#"+$(this).val()+" .telephone"));$("#"+$(this).val()).slideDown();validateCustomerInfoForm()});if($("#customerType").val()!="reseller"&&document.querySelector(".telephone")!=null){ACC.servicePlan.bindIntlTelInput(document.querySelector(".telephone"))}$(".customer-info form input, .customer-info form select").on("keyup change",function(){validateCustomerInfoForm()});$(".reseller-info form input").on("keyup change",function(){validateResellerInfoForm()})},bindEditActions:function(){$(".resellerInformation .edit .glyphicon-pencil").on("click",function(a){a.preventDefault();$(".loader").show();setTimeout(function(){$.ajax({url:ACC.config.encodedContextPath+"/product-activation/reseller-information/get-reseller-form",type:"GET",data:{orderFormCode:$("#orderFormCode").val(),activeStep:$("#activeStep").val()},success:function(b){$("#productActCustomerInfoModal").empty();$("#productActCustomerInfoModal").html(b);$("#productActCustomerInfoModal").modal();$(".reseller-info form input").on("keyup change",function(){validateResellerInfoForm()})},complete:function(){form_ctl.funcs.setCustomValidator("#epResellerInfoForm",{rules:{companyName:{required:true},firstName:{required:true},lastName:{required:true},email:{required:true,customemail:true}}});validateResellerInfoForm();$(".loader").hide()}})},500)});$(".customerInformation .edit .glyphicon-pencil").on("click",function(b){b.preventDefault();$(".loader").show();var a=$(this).closest("a.js-activation-step").data("action");setTimeout(function(){$.ajax({url:ACC.config.encodedContextPath+a+"/get-customer-form",type:"GET",data:{orderFormCode:$("#orderFormCode").val(),activeStep:$("#activeStep").val()},success:function(c){$("#productActCustomerInfoModal").empty();$("#productActCustomerInfoModal").html(c);$("#productActCustomerInfoModal").modal();if($("#customerType").val()=="reseller"){ACC.servicePlan.bindIntlTelInput(document.querySelector("#"+$(c).find("#resellerCustomerSelection").val()+" .telephone"))}ACC.servicePlan.bindInitProductActivationPage()},complete:function(){form_ctl.funcs.setCustomValidator("#epCustomerInfoForm_home",{rules:{firstName:{required:true},lastName:{required:true},email:{required:true,customemail:true},phone:{required:false,telephone:true}}});form_ctl.funcs.setCustomValidator("#epCustomerInfoForm_business",{rules:{firstName:{required:true},lastName:{required:true},email:{required:true,customemail:true},phone:{required:true,telephone:true},companyName:{required:true},industry:{required:true}}});validateCustomerInfoForm();$(".loader").hide()}})},500)});$(".activationMethod .edit .glyphicon-pencil").on("click",function(c){c.preventDefault();$(".loader").show();var a=$(this).closest("a.js-activation-step").data("action");var b=$(this).closest("a.js-activation-step").data("activationmethod");setTimeout(function(){$.ajax({url:ACC.config.encodedContextPath+a.replace("/choose","/edit-activation-methods"),type:"GET",data:{activeStep:$("#activeStep").val(),activationMethod:b},success:function(d){$("#productActCustomerInfoModal").empty();$("#productActCustomerInfoModal").html(d);$("#productActCustomerInfoModal").modal();$(".fixed-manual-activation-popup").find(".productRegistration__body__section").removeClass("col-sm-12 col-md-3")},complete:function(){$(".loader").hide()}})},500)});$(document).on("click",".edit-customer-info .epCustomerInfoBtn",function(b){b.preventDefault();var a=$(this).closest("form");if($(a).valid()){$(".loader").show();setTimeout(function(){var c=$("#showEmailValidationPopup").is(":checked");var d=$(a).find("#alter-email").is(":checked");var e=false;if(c&&!d){e=true}else{e=bindEmailValidation(a)}if(e){$(".loader").show();setTimeout(function(){var f=$(".edit-customer-info form:visible").serialize()+"&customerDetailCode="+$("#customerDetailCode").val()+"&servicePlanActivation="+$("#servicePlanActivation").val();$.ajax({url:ACC.config.encodedContextPath+"/product-activation/customer-information/update-customer-info",type:"POST",data:f,success:function(k){var j=new Object();var i=$("#customerType").val();var l=$("#resellerCustomerType").val();if(i=="reseller"){j.event_name="service_plan_activation_finished_customer_information";if(l=="BU"){j.customer_company_name=$(".edit-customer-info form:visible [name=companyName]").val();j.customer_company_industry=$(".edit-customer-info form:visible [name=industry]").val()}}else{j.event_name="service_plan_activation_finished_your_information";var h=$(".edit-customer-info form:visible [name=emailOptIn]").is(":checked")==true?"yes":"";j.email_consent=h}j.customer_email=$(".edit-customer-info form:visible [name=email]").val();if(i=="business"){j.customer_company_name=$(".edit-customer-info form:visible [name=companyName]").val();j.customer_company_industry=$(".edit-customer-info form:visible [name=industry]").val();var g=$(".edit-customer-info form:visible [name=purchasedProduct]").val()=="true"?"authorized":"unauthorized";j.customer_authorized_purchase=g}ACC.analytics.fireProductActivationEvent("edit-customer-info",j)},complete:function(){$(".modal-dialog .close").trigger("click");$(".loader").hide()}})},500)}},500)}});$(document).on("click",".edit-reseller-info .epResellerInfoBtn",function(b){b.preventDefault();var a=$(this).closest("form");if($(a).valid()){$(".loader").show();setTimeout(function(){var c=$("#showEmailValidationPopup").is(":checked");var d=$(a).find("#alter-email").is(":checked");var e=false;if(c&&!d){e=true}else{e=bindEmailValidation(a)}if(e){$(".loader").show();setTimeout(function(){var f=$(".edit-reseller-info form:visible").serialize()+"&resellerDetailCode="+$("#resellerDetailCode").val()+"&servicePlanActivation="+$("#servicePlanActivation").val();$.ajax({url:ACC.config.encodedContextPath+"/product-activation/reseller-information/update-reseller-info",type:"POST",data:f,success:function(i){var h=new Object();var g=$("#customerType").val();h.event_name="service_plan_activation_finished_reseller_information";h.customer_email=$(".edit-reseller-info form:visible [name=email]").val();h.customer_company_name=$(".edit-reseller-info form:visible [name=companyName]").val();ACC.analytics.fireProductActivationEvent("edit-reseller-info",h)},complete:function(){$(".modal-dialog .close").trigger("click");$(".loader").hide()}})},500)}},500)}})},bindDrawerPage:function(){$(document).on("click",".drawerReviewSkip",function(){var b="drawer-review-skip-"+$("#customerType").val();var a=getCookie(b);if(a==null){setFleetCookie(b,true,3);console.log("ismanual click:"+$(this).data("ismanualclick"));if($(this).data("ismanualclick")=="true"){window.location.href=ACC.config.contextPath+"/product-activation/choose-activation?activationMode=MANUAL"}else{window.location.href=ACC.config.contextPath+"/product-activation/choose-activation?activationMode=UPLOAD"}$("#activateModal").modal("hide")}});$(document).on("click",".activation-method .prodreg-landing-button",function(b){b.preventDefault();$(".loader").show();var c="drawer-review-skip-"+$("#customerType").val();var a=$(this);setTimeout(function(){var d=getCookie(c);if(d=="true"){if($(a).closest(".productRegistration__body__section--inner").hasClass("manual-activation-method")){window.location.href=ACC.config.contextPath+"/product-activation/choose-activation?activationMode=MANUAL"}else{window.location.href=ACC.config.contextPath+"/product-activation/choose-activation?activationMode=UPLOAD"}}else{$.ajax({url:ACC.config.encodedContextPath+"/product-activation/activation-method/drawer-review",type:"GET",success:function(e){$("#activateModal").empty();$("#activateModal").html(e);$("#activateModal").modal();$("#activateModal .productRegistration__body__section").each(function(f){if($(this).text().trim()==""){$(this).remove()}});if($(a).hasClass("i-icon")){$("#activateModal .drawerReviewSkip").hide()}if($(a).closest(".productRegistration__body__section--inner").hasClass("manual-activation-method")){$("#activateModal .drawerReviewSkip").data("ismanualclick","true")}else{$("#activateModal .drawerReviewSkip").data("ismanualclick","false")}},complete:function(){$(".loader").hide()}})}},100)});$(document).on("click",".vspForm .drawer-review-info:visible",function(c){$(".vsp-service-plan-tool-tip .close-toool-tip").trigger("click");var b=$(this).data("event");var a=$(this).closest(".form-group").find(".vsp-service-plan-tool-tip .tooltip-inner").empty();$(a).empty();$(a).html($("."+b).html());$(this).closest(".form-group").find(".vsp-service-plan-tool-tip").show();$(this).closest(".form-group").find(".vsp-service-plan-tool-tip").tooltip()})},bindIntlTelInput:function(b){var a=window.intlTelInput(b,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:currentCountry});$(b).on("keyup blur change",function(){var c=a.getSelectedCountryData();$("#mobileCountryIsoCode").val(c.dialCode)})},bindProductInformation:function(){prodActInfoDateRangePicker();removeProductInfoRows();$(".add-productInfo-field").on("click",function(){var g=$(".prodAct-prod-info-section .prodInfoRow").length;var k=$(this).data("max-rows")?$(this).data("max-rows"):10;if(g<parseInt(k)){var i=$(".prodInfoNextRow").find(".line-num");$(i).text(g+1);var h=$(".prodInfoNextRow").find(".serial-number-input input");$(h).attr("id","serial_number_"+g);$(h).attr("name","serial_number_"+g);var f=$(".prodInfoNextRow").find(".serial-number-input label");$(f).attr("id","error_serial_number_"+g);var c=$(".prodInfoNextRow").find(".postcode-input input");$(c).attr("id","postCode_"+g);$(c).attr("name","postCode_"+g);var d=$(".prodInfoNextRow").find(".postcode-input label");$(d).attr("id","error_postcode_"+g);var l=$(".prodInfoNextRow").find(".placeofpurchase-input input");$(l).attr("id","placeOfPurchase_"+g);$(l).attr("name","placeOfPurchase_"+g);var b=$(".prodInfoNextRow").find(".placeofpurchase-input label");$(b).attr("id","error_placeofpurchase_"+g);var a=$(".prodInfoNextRow").find(".activation-code-input input");$(a).attr("id","activation_"+g);$(a).attr("name","activation_"+g);var m=$(".prodInfoNextRow").find(".activation-code-input label");$(m).attr("id","error_activation_"+g);$(".prodInfoNextRow").find(".calenderProductInfo").attr("id","calenderProductInfo_"+g);$(".prodInfoNextRow").find(".calenderProductInfo span").attr("id","productPurchaseDate_"+g);$(".prodInfoNextRow").find(".calenderProductInfo input").attr("id","purchaseDate_"+g);var e=$(".prodInfoNextRow").find(".calenderProductInfo label");$(e).attr("id","error_"+g);var j=$(".prodInfoNextRow").html();$(".prodAct-prod-info-section").append(j);prodActInfoDateRangePicker();removeProductInfoRows()}if(g==(parseInt(k)-1)){$(this).hide()}else{$(this).show()}validateFleetActSubmitBtn()});$(document).on("click","#prodActProductInfo_submit",function(a){a.preventDefault();$(".prodAct-prod-info-section .prodInfoRow label.error").hide();if(validateProdInfoForm()){$(".loader").show();ACC.servicePlan.addProductInfo(true)}});$(document).on("keyup",'.prodAct-prod-info-section [id^="serial_number_"]',function(a){$(this).closest(".serial-number-input").find(".error").hide()});$(document).on("keyup",'.prodAct-prod-info-section [id^="activation_"]',function(a){$(this).closest(".activation-code-input").find(".error").hide()});$(document).on("keyup",'.prodAct-prod-info-section [id^="placeOfPurchase_"]',function(a){$(this).closest(".placeofpurchase-input").find(".error").hide()});$(document).on("keyup",'.prodAct-prod-info-section [id^="postCode_"]',function(a){$(this).closest(".postcode-input").find(".error").hide()})},addProductInfo:function(a){$.ajax({url:$("#productSaveInfoForm").data("validateurl"),type:"POST",data:{registerProducts:ACC.servicePlan.getJSONDataForProductInfo()},success:function(b){var c=ACC.servicePlan.getValue(b,"#dataResponse");if(c==="error"){ACC.servicePlan.checkErrorObjectsInResponce(JSON.parse(ACC.servicePlan.getValue(b,"#invalidSerialNumber")),$("#invalidSerialNumber").data("invalidmessage"));ACC.servicePlan.checkErrorObjectsInResponceForPostalCode(JSON.parse(ACC.servicePlan.getValue(b,"#invalidPostalCode")),$("#invalidPostalCode").data("invalidmessage"));ACC.servicePlan.checkErrorObjectsInResponce(JSON.parse(ACC.servicePlan.getValue(b,"#notAllowedToRegister")),$("#notAllowedToRegister").data("invalidmessage"));ACC.servicePlan.checkErrorObjectsInResponce(JSON.parse(ACC.servicePlan.getValue(b,"#alreadyRegisteredSerialNumber")),$("#alreadyRegisteredSerialNumber").data("invalidmessage"));ACC.servicePlan.checkErrorObjectsInResponceForActivationCode(JSON.parse(ACC.servicePlan.getValue(b,"#invalidActivationCode")));$(".loader").hide()}else{if(c==="errorMessage"){$("#errorMessage").text(ACC.servicePlan.getValue(b,"#errorMessage"));$("#errorMessage").addClass("error");$("#errorMessage").show();$(".loader").hide()}else{if(c==="serviceError"){$("#errorMessage").text(ACC.servicePlan.getValue(b,"#serviceError"));$("#errorMessage").addClass("error");$("#errorMessage").show();$(".loader").hide()}else{if(a){$.ajax({url:$("#productSaveInfoForm").attr("action"),type:"POST",data:{registerProducts:ACC.servicePlan.getJSONDataForProductInfo()},success:function(d){if(d=="failed"){cosole.log("error while savong product info on order form :"+d)}else{window.location.href=ACC.config.encodedContextPath+d}},error:function(e,d,f){console.log("The following error occurred during save: "+d,f)}})}else{$(".loader").hide()}}}}},error:function(b,d,c){console.log("The following error occurred: "+d,c)}})},getJSONDataForProductInfo:function(){var a=[];$(".prodAct-prod-info-section .prodInfoRow").each(function(c){var b=$(this).find("#activation_"+c).val();if(b!=null){b=$.trim(b)}var e=$(this).find("#serial_number_"+c).val();if(e!=null){e=e.replaceAll("*","");e=$.trim(e);e=e.toUpperCase()}var g=$(this).find("#purchaseDate_"+c).attr("selectedDate");var d=$(this).find("#placeOfPurchase_"+c).val();var f=$(this).find("#postCode_"+c).val();if(ACC.productregistration.checkValidObject(e)){a.push({index:c,activationId:b,serialNumber:e,purchaseDate:g,placeOfPurchase:d,postalCode:f})}});return JSON.stringify({productInformationEntries:a})},getValue:function(a,b){return $(a).find(b).val()},checkErrorObjectsInResponce:function(a,b){if(ACC.productregistration.checkValidObject(a)){$.each(a,function(d,f){var e=f.charAt(f.length-1);$("#"+f).addClass("error");var c="#error_serial_number_"+parseInt(e);$(".prodAct-prod-info-section .prodInfoRow").find(c).text(b);$(".prodAct-prod-info-section .prodInfoRow").find(c).show();$(".prodAct-prod-info-section .prodInfoRow").find(c).prev().addClass("form-error error")})}},checkErrorObjectsInResponceForPostalCode:function(a,b){if(ACC.productregistration.checkValidObject(a)){$.each(a,function(d,f){var e=f.charAt(f.length-1);$("#"+f).addClass("error");var c="#error_postcode_"+parseInt(e);$(".prodAct-prod-info-section .prodInfoRow").find(c).text(b);$(".prodAct-prod-info-section .prodInfoRow").find(c).show()})}},checkErrorObjectsInResponceForActivationCode:function(a){if(ACC.productregistration.checkValidObject(a)){$.each(a,function(e,g){var c=g.split("|");var f=c[0].charAt(c[0].length-1);$("#"+c[0]).addClass("error");var b=e.split("/");if(b.length==2&&b[1]==="SPR2"){var d="#error_serial_number_"+parseInt(f)}else{var d="#error_activation_"+parseInt(f)}$(d).html(ACC.productregistration.htmlDecode(c[1]));$(d).show();$(d).prev().addClass("form-error error")})}},bindFileStackPicker:function(){$(".upload-cta .file-upload-choose-btn").on("click",function(f){var c={maxFiles:parseInt(maxFileUploads),uploadInBackground:false,accept:allowFileTypes,fromSources:["local_file_system"],onFileSelected:function d(g){var e=g.filename;if(g.size>(parseInt(allowFileSizeMB)*1000*1000)){var h=ACC.fleetRegSerialNumFileSizeError+" "+allowFileSizeMB+"MB";ACC.analytics.fireErrorEvent1("file_upload_error","serverside",h);throw new Error(h)}return{name:e,file:e}},acceptFn:function b(g,e){const i=e.mimeFromExtension(g.originalFile.name);selectedFileExtn=g.originalFile.name.split(".").pop();if(e.acceptMime.length&&!e.acceptMime.includes(i)){var h=ACC.fileUplaodAcceptError.replace("{0}",selectedFileExtn);ACC.analytics.fireErrorEvent1("file_upload_error","serverside","Imported file must be an Excel file (.xlsx)");return Promise.reject(h)}return Promise.resolve()},storeTo:{workflows:[workflowId]},onUploadDone:function(e){e.filesUploaded.forEach(function(g){$(".js-input-file").val(g.filename);$(".file-upload-choose-btn").hide();$(".file-upload-next-btn").show();$(".vsp-loader").modal("show");setTimeout(function(){$.ajax({url:workflowUrl.replace("<FILE_HANDLE>",g.handle),type:"GET",success:function(i){var h=workflowPollUrl.replace("<JOB_ID>",i.jobid);setTimeout(function(){ACC.servicePlan.pollWorkflow(h)},1000)},error:function(h){console.log("Error encountered.");console.log(h)}})},500)})}};client.picker(c).open()});$(".upload-cta .clear").on("click",function(b){$(".js-input-file").val("");$(".file-upload-choose-btn").show();$(".file-upload-next-btn").hide()});$(".upload-cta .file-upload-next-btn").on("click",function(b){if($("#fleetActivationCaptchaForm").valid()){$("#epsonFleetActivationForm").submit();$(".loader").show()}else{return false}});var a=$(".fleet-activation-save-captcha .js-recaptcha-captchaaddon");if(a.length){ACC.captcha.bindWidget(a)}$("#fleetActivationCaptchaForm").validate({ignore:".ignore",rules:{hiddenRecaptcha:{required:function(){if(typeof grecaptcha!="undefined"){return(grecaptcha.getResponse(localStorage.getItem("#fleetActivationCaptchaForm_captchaId"))=="")}else{return $("#fleetActivationCaptchaForm #g-recaptcha_widget iframe").length>0}}}},messages:{hiddenRecaptcha:{required:function(){return $(".g-recaptcha_error").first().text()}}},errorPlacement:function(b,c){if(c.attr("name")=="recaptchaChallangeAnswered"){b.insertAfter("#g-recaptcha_widget")}else{b.insertAfter(c)}$(".js-recaptcha-captchaaddon").addClass("captcha-error")}});$("#prodActUploadCorrect").on("click",function(){location.reload()});if($(".service-plan-table.upload #servicePlanTable").length&&$(".service-plan-table.upload #servicePlanTable tbody tr").length>10){ACC.global.bindDataTablePagination($(".service-plan-table.upload #servicePlanTable"),false,10)}$("#prodActReviewSubmit").on("click",function(b){$(".loader").show()})},pollWorkflow:function(a){var b=Date.now();pollUrlTs=a+"?t="+b;$.ajax({url:pollUrlTs,type:"GET",success:function(f){if(f.status==="Finished"){if(f.results[storeTaskName]!==undefined){const c=f.results[storeTaskName].data;const e=c.handle;console.log("Workflow Finished - file stored!");const d=cdnUrl+"/"+e+"?policy="+options.security.policy+"&signature="+options.security.signature;$("#fileStackCallBackFileUrl").val(d);$("#filename").val(c.filename);$("#fileStackKey").val(c.key)}else{console.log("Workflow finished - file not stored! [Virus]")}$(".vsp-loader").modal("hide");if($("#counterfeitForm").length){$("#ctfUploadLoader .loader").hide()}}else{console.debug(f);console.debug("Workflow still in process. Continuing polling for component "+componentId);setTimeout(function(){ACC.servicePlan.pollWorkflow(a)},1000)}},error:function(c){console.log("Error encountered.");console.log(c);$(".vsp-loader").modal("hide");if($("#counterfeitForm").length){$("#ctfUploadLoader .loader").hide()}}})},bindValidation:function(){if($(".customer-info form:visible").length){validateCustomerInfoForm()}if($(".reseller-info form:visible").length){validateResellerInfoForm()}if($("#productSaveInfoForm").length){validateFleetActSubmitBtn()}}};function setFleetCookie(b,f,c){var e=new Date();e.setTime(e.getTime()+(c*24*60*60*1000));var a="expires="+e.toUTCString();return document.cookie=b+"="+f+";"+a+";path=/"}function getFleetCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function prodActInfoDateRangePicker(){var a=$(".add-productInfo-field").data("date-locale");var d=$(".add-productInfo-field").data("month-names")?$(".add-productInfo-field").data("month-names").split(","):["January","February","March","April","May","June","July","August","September","October","November","December"];moment.updateLocale(a,{months:d});var e=moment().locale(a);var b=moment().locale(a);var c=(new Date().getFullYear())-7;$('div[id^="calenderProductInfo_"]').daterangepicker({singleDatePicker:true,autoUpdateInput:false,showDropdowns:true,startDate:e,minDate:new Date(c,0),maxDate:new Date(),endDate:b,locale:{monthNames:d}});$('div[id^="calenderProductInfo_"]').on("apply.daterangepicker",function(h,g){var f=$(this).parents(".prodInfoRow:visible");f.find(".calenderProductInfo input").val(g.startDate.format("MM/DD/YYYY"));f.find(".calenderProductInfo input").attr("selectedDate",g.startDate.format("YYYYMMDD"));f.find(".calenderProductInfo label").hide();validateFleetActSubmitBtn();$(".prodAct-prod-info-section .prodInfoRow input").trigger("change")});$('div[id^="calenderProductInfo_"]').on("cancel.daterangepicker",function(h,g){var f=$(this).parents(".prodInfoRow:visible");f.find(".calenderProductInfo input").val("");f.find(".calenderProductInfo label").hide()})}function removeProductInfoRows(){$(".del-prod-info-row").on("click",function(){$(this).closest(".prodInfoRow").remove();var c=$(".prodAct-prod-info-section .prodInfoRow").length;var a=$(this).data("max-rows")?$(this).data("max-rows"):10;if(c==parseInt(a)){$(".add-productInfo-field").hide()}else{$(".add-productInfo-field").show()}$(".prodAct-prod-info-section .prodInfoRow").each(function(k){var l=$(this).find(".line-num");$(l).text(k+1);var j=$(this).find(".serial-number-input input");$(j).attr("id","serial_number_"+k);$(j).attr("name","serial_number_"+k);var i=$(this).find(".serial-number-input label");$(i).attr("id","error_serial_number_"+k);var f=$(this).find(".postcode-input input");$(f).attr("id","postCode_"+k);$(f).attr("name","postCode_"+k);var g=$(this).find(".postcode-input label");$(g).attr("id","error_postcode_"+k);var m=$(this).find(".placeofpurchase-input input");$(m).attr("id","placeOfPurchase_"+k);$(m).attr("name","placeOfPurchase_"+k);var e=$(this).find(".placeofpurchase-input label");$(e).attr("id","error_placeofpurchase_"+k);var d=$(this).find(".activation-code-input input");$(d).attr("id","activation_"+k);$(d).attr("name","activation_"+k);var n=$(this).find(".activation-code-input label");$(n).attr("id","error_activation_"+k);$(this).find(".calenderProductInfo").attr("id","calenderProductInfo_"+k);$(this).find(".calenderProductInfo span").attr("id","productPurchaseDate_"+k);$(this).find(".calenderProductInfo input").attr("id","purchaseDate_"+k);var h=$(this).find(".calenderProductInfo label");$(h).attr("id","error_"+k)});var b=$(".prodAct-prod-info-section .prodInfoRow").length;if(b==0){$("#prodActProductInfo_submit").attr("disabled","disabled")}else{validateFleetActSubmitBtn()}})}function validateProdInfoForm(){var d=true;var e=$(".prodAct-prod-info-section .prodInfoRow").length;if(e>0){var f=$("#invalidActivationCodeFormat").data("invalidmessage");var i=$("#invalidSerialNumberFormat").data("invalidmessage");var j=$("#duplicateSerialNumber").data("invalidmessage");var m=$("#duplicateActivationCode").data("invalidmessage");var a=$("#invalidPurchaseDate").data("invalidmessage");var k=$("#invalidPostalCode").data("invalidmessage");var h=$("#invalidPurchasePlace").data("invalidmessage");var g=$("#invalidPurchasePlaceLength").data("invalidmessage");var o=$("#stackablePurchaseDateError").val();var c=$("#stackablePlaceofPurchaseError").val();var l=$("#stackablePostalError").val();var n=[];var b=[];$(".prodAct-prod-info-section .prodInfoRow").each(function(A){var s=$(this).find(".activation-code-input input").val();if(s!=null&&s!=""){var z=$.trim(s);if(z.match(/(^[a-zA-Z0-9]{10}$)/)){if(n.includes(z.toUpperCase())){$(this).find(".activation-code-input label").text(m);$(this).find(".activation-code-input label").show();d=false}else{n.push(z.toUpperCase())}}else{$(this).find(".activation-code-input label").text(f);$(this).find(".activation-code-input label").show();d=false}}var y=$(this).find(".serial-number-input input").val();if(y!=null&&y!=""){var p=$.trim(y);var w=p.replaceAll("*","");if(w.match(/(^[a-zA-Z0-9]{10,18}$)/)){if(A==0){b.push(w.toUpperCase())}else{var C=$(this);var q=$(C).find(".calenderProductInfo input").attr("selectedDate");var B=$(this).find(".placeofpurchase-input input").val();var E=$(C).find(".postcode-input input").val();$(C).parent().find(".row").each(function(F){if(y==$("#serial_number_"+F).val()){if(A>=F){var G=true;if(q!=$("#purchaseDate_"+F).attr("selectedDate")){G=false;$("#purchaseDate_"+A).closest(".calenderProductInfo").find("label").text(o);$("#purchaseDate_"+A).closest(".calenderProductInfo").find("label").show();$("#purchaseDate_"+F).closest(".calenderProductInfo").find("label").text(o);$("#purchaseDate_"+F).closest(".calenderProductInfo").find("label").show()}if(B!=$("#placeOfPurchase_"+F).val()){G=false;$("#placeOfPurchase_"+A).closest(".placeofpurchase-input").find("label").text(c);$("#placeOfPurchase_"+A).closest(".placeofpurchase-input").find("label").show();$("#placeOfPurchase_"+F).closest(".placeofpurchase-input").find("label").text(c);$("#placeOfPurchase_"+F).closest(".placeofpurchase-input").find("label").show()}if(E!=$("#postCode_"+F).val()){G=false;$("#postCode_"+A).closest(".postcode-input").find("label").text(l);$("#postCode_"+A).closest(".postcode-input").find("label").show();$("#postCode_"+F).closest(".postcode-input").find("label").text(l);$("#postCode_"+F).closest(".postcode-input").find("label").show()}if(!G){d=false}}}})}}else{$(this).find(".serial-number-input label").text(i);$(this).find(".serial-number-input label").show();d=false}}var x=$(this).find(".calenderProductInfo input").val();if(x!=null&&x!=""){var r=new Date();var v=new Date(x);const D=Math.abs(r-v);const u=Math.ceil(D/(1000*60*60*24*365.25));if(u>7){$(this).find(".calenderProductInfo label").text(a);$(this).find(".calenderProductInfo label").show();d=false}else{if(d){$(this).find(".calenderProductInfo label").hide()}}}else{$(this).find(".calenderProductInfo label").text(a);$(this).find(".calenderProductInfo label").show();d=false}if($(".postcode-input").is(":visible")){var E=$(this).find(".postcode-input input").val();if(E!=null&&E!=""){var t=$("#invalidPostalCode").data("currentcountry");if(t=="US"&&!E.match(/(^\d{5}(-\d{4})?$)/)){$(this).find(".postcode-input label").text(k);$(this).find(".postcode-input label").show();d=false}if(t=="CA"&&!E.match(/(^[ABCEGHJKLMNPRSTVXY]{1}\d{1}[A-Z]{1} *\d{1}[A-Z]{1}\d{1}$)/i)){$(this).find(".postcode-input label").text(k);$(this).find(".postcode-input label").show();d=false}}}if($(".placeofpurchase-input").is(":visible")){var B=$(this).find(".placeofpurchase-input input").val();if(B==null||B==""){$(this).find(".placeofpurchase-input label").text(h);$(this).find(".placeofpurchase-input label").show();d=false}else{if(B.length>30){$(this).find(".placeofpurchase-input label").text(g);$(this).find(".placeofpurchase-input label").show();d=false}else{if(d){$(this).find(".placeofpurchase-input label").hide()}}}}})}return d}function validateFleetActSubmitBtn(){var a=false;$("#errorMessage").hide();$(".prodAct-prod-info-section .prodInfoRow input").each(function(){if($(this).val()==""){a=true}});if(a){$("#prodActProductInfo_submit").attr("disabled","disabled")}else{$("#prodActProductInfo_submit").removeAttr("disabled")}}function validateCustomerInfoForm(){var a=false;$(".customer-info form input:visible, .customer-info form select:visible").each(function(){if($(this).val()==""){a=true}});if(a){$(".epCustomerInfoBtn").attr("disabled","disabled")}else{$(".epCustomerInfoBtn").removeAttr("disabled")}}function validateResellerInfoForm(){var a=false;$(".reseller-info form input:visible").each(function(){if($(this).val()==""){a=true}});if(a){$(".epResellerInfoBtn").attr("disabled","disabled")}else{$(".epResellerInfoBtn").removeAttr("disabled")}}function validateAddSerialNumLink(){var b=$(".prodAct-prod-info-section .prodInfoRow").length;var a=$(".add-productInfo-field").data("max-rows")?$(".add-productInfo-field").data("max-rows"):10;if(b==parseInt(a)){$(".add-productInfo-field").hide()}else{$(".add-productInfo-field").show()}}$(document).ready(function(){$(document).on("change",".prodAct-prod-info-section .prodInfoRow input",function(n){var p=$(this).closest("div").attr("id");var d=$("#invalidPurchaseDate").data("invalidmessage");if(p!==undefined){var j=p.slice(-1);var o=$(".add-productInfo-field").data("date-locale");var k=$(".add-productInfo-field").data("month-names")?$(".add-productInfo-field").data("month-names").split(","):["January","February","March","April","May","June","July","August","September","October","November","December"];moment.updateLocale(o,{months:k});var l=$("#calenderProductInfo_"+j).parents(".prodInfoRow:visible");var b=moment().locale(o);var i=moment().locale(o);var m=(new Date().getFullYear())-7;function f(s,e){l.find(".calenderProductInfo input").val(s.format("MM/DD/YYYY"));l.find(".calenderProductInfo input").attr("selectedDate",s.format("YYYYMMDD"))}if($("#purchaseDate_"+j).val().trim()!==""){var c=$("#purchaseDate_"+j).val();var q="";if(/^((0?[1-9]|1[012])[- /.](0?[1-9]|[12][0-9]|3[01])[- /.](19|20)?[0-9]{2})*$/.test(c)){q=moment(c,"MM/DD/YYYY")}var a=new Date();var h=new Date(c);const r=Math.abs(a-h);const g=Math.ceil(r/(1000*60*60*24*365.25));if(q==""||isNaN(q)||q>b||g>7){q="";l.find(".calenderProductInfo label").text(d);l.find(".calenderProductInfo label").show()}else{l.find(".calenderProductInfo label").hide()}if(q!==""){$("#calenderProductInfo_"+j).daterangepicker({singleDatePicker:true,autoUpdateInput:true,showDropdowns:true,startDate:q,minDate:new Date(m,0),maxDate:new Date(),endDate:i,locale:{monthNames:k}},f);f(q,i)}else{l.find(".calenderProductInfo input").val("")}}}validateFleetActSubmitBtn()});$(document).on("click",".prodAct-upload-template",function(a){a.preventDefault();window.location.href=ACC.config.encodedContextPath+$(this).data("action")+$("#customerType").val()})});$(document).ready(function(){if($("#plan-actiation-table").length){ACC.global.bindDataTablePagination($("#plan-actiation-table"),true,10)}$(document).on("click",".close-toool-tip",function(a){$(".vsp-service-plan-tool-tip").hide()});$(window).on("load",function(){if($("#validateEntriesOnLoad").val()){validateAddSerialNumLink();if(validateProdInfoForm()){$(".loader").show();ACC.servicePlan.addProductInfo(false)}}if($(".customer-info form:visible").length&&$("#customerType").val()=="reseller"){ACC.servicePlan.bindIntlTelInput(document.querySelector("#"+$(".customer-info #resellerCustomerSelection").val()+" .telephone"))}});$(document).on("blur",".epCustomerInfoFormEmail, .epResellerInfoFormEmail",function(b){var c=$("#emailValidationRequired").is(":checked");var a=$("#showEmailValidationPopup").is(":checked");if(c&&a){$(this).closest("form").find("#alter-email").attr("checked",true)}});if($(".customer-info .epCustomerInfoBtn").is(":visible")||$(".reseller-info .epResellerInfoBtn").is(":visible")){$(".customer-info .epCustomerInfoBtn, .reseller-info .epResellerInfoBtn").on("click",function(b){b.preventDefault();var a=$(this).closest("form");if($(a).valid()){$(".loader").show();setTimeout(function(){var c=$("#showEmailValidationPopup").is(":checked");var d=$(a).find("#alter-email").is(":checked");var e=false;if(c&&!d){e=true}else{e=bindEmailValidation(a)}if(e){$(a).submit()}},500)}})}$(".quantity-for-protection-plan").find(".update-entry-quantity-input").prop("readonly",true);$(".quantityFor-Fries").find(".update-entry-quantity-input").prop("readonly",true);$(".vspForm .glyphicon-pencil").keydown(function(a){if(a.keyCode==13){$(this).trigger("click")}})});function bindEmailValidation(a){var b=true;$.ajax({url:ACC.config.encodedContextPath+"/product-activation/emailValidation",type:"Post",data:$(a).serialize(),async:false,success:function(d){if(d=="success"){b=true}else{$("#showEmailValidationPopup").attr("checked",true);$(a).find("#alter-email").attr("checked",false);var e=$("#emailValidationRequired").is(":checked");var c=$("#showEmailValidationPopup").is(":checked");if(e&&c){$("#model-button").click();ACC.analytics.fireErrorEvent1("validity_email_validation_error","[serverside]","[Validity:double check your email]")}$(".loader").hide();b=false}}});return b};
</script>

</body>
</html>
