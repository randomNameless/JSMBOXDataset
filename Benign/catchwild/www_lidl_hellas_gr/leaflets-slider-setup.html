<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>leaflets-slider-setup.html</title>
</head>
<body>

<script>
(function() {
    var cssTag = document.getElementById('leaflet-slider-css');
    var jsTag = document.getElementById('leaflet-slider-js');
    var containers = document.getElementsByClassName('AFlyerSlider_wrapper');
    var apps = document.getElementsByClassName('leaflet-slider-app');
    var storeFinderContainer;

    if (!apps.length) {
        for (var container of containers) {
            container.querySelector('[data-leaflets-slider-widget-id]').setAttribute('class', 'leaflet-slider-app');
            storeFinderContainer = document.createElement('div');
            storeFinderContainer.setAttribute('class', 'leaflet-slider-store-finder-wrapper');
            storeFinderContainer.dataset.leafletsSliderWidgetId = container.querySelector('[data-leaflets-slider-widget-id]').dataset.leafletsSliderWidgetId;
            container.before(storeFinderContainer);
        }
    }

    if (!cssTag) {
        cssTag = document.createElement('link');
        cssTag.setAttribute( 'rel', 'stylesheet' );
        cssTag.setAttribute( 'id', 'leaflet-slider-css' );
        cssTag.setAttribute( 'href', '/w/leaflets-slider.css' );
        document.body.appendChild( cssTag );
    }

    if (!jsTag) {
        jsTag = document.createElement('script');
        jsTag.setAttribute( 'type', 'module' );
        jsTag.setAttribute( 'id', 'leaflet-slider-js' );
        jsTag.setAttribute( 'src', '/w/leaflets-slider.js' );
        document.body.appendChild( jsTag );
    }
})();
</script>

</body>
</html>
