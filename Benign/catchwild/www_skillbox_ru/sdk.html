<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sdk.html</title>
</head>
<body>

<script>
!function(i,o){function n(e){return"[object Array]"===Object.prototype.toString.call(e)}var a={},c={isInitialized:!1,apiUrl:null},r=function(e){for(var t=e+"=",r=o.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},s=["msk.ru","com.br"],d=function(e,t){var r=new Date;r.setTime(r.getTime()+31536e7);var r="expires="+r.toUTCString();o.cookie=e+"="+t+";"+r+";domain="+(r=location.hostname,2<location.hostname.split(".").length&&(r=location.hostname.split(".").reverse().slice(0,2).reverse().join("."),~s.indexOf(r)&&(r=location.hostname.split(".").reverse().slice(0,3).reverse().join("."))),r)+";path=/"},p=function(){return(""+1e7+-1e3+-4e3+-8e3+-1e11).replace(/1|0/g,function(){return(0|16*Math.random()).toString(16)}).replace(/-/g,"")};function u(){if(c.customUserId)return e=function(e,t){for(var r=e;r.length<t;)r+="0";return r}(c.customUserId.replace(/\D/g,""),32);var e,t="iap.uid";return(e=r(t))&&32===e.length||(e=p(),d(t,e)),e}function l(e,t,r){t.push("uid="+u());var n,t=[c.apiUrl,e,"?",t.join("&")].join("");i.navigator.sendBeacon?(n=new Blob([JSON.stringify(r||{})],{type:"text/plain"}),i.navigator.sendBeacon(t,n)):((n=new XMLHttpRequest).open("POST",t,!0),n.setRequestHeader("Content-Type","application/json"),n.withCredentials=!0,r=JSON.stringify(r),n.send(r))}if(a.push=function(e){try{if(!n(e))throw new TypeError("iapSDK: Push item is not array");var t=e[0],r=e[1];if("function"!=typeof a[t]||"push"===t)throw new ReferenceError("iapSDK: Not found method "+t);a[t](r)}catch(e){console.error(e.message)}},a.init=function(e){if(!(e=e||{}).apiUrl)throw new TypeError("iapSDK: Init must set api url");if(c.isInitialized)throw new Error("iapSDK: SDK already init");c.isInitialized=!0,c.apiUrl=e.apiUrl,c.customUserId=e.customUserId,e.disableAutoHit||a.hit()},a.hit=function(){var e=encodeURIComponent(o.URL),t=encodeURIComponent(o.referrer);l("/tracker/hit",["url="+e,"ref="+t,"sw="+i.screen.width,"sh="+i.screen.height,"rnd="+Math.random()])},a.event=function(e){!function(){if(!c.isInitialized)throw new ReferenceError("iapSDK: SDK not initialized")}();var t={ADD_TO_CART:1,CONFIRM_ATTRIBUTION:2};if(!t[e.event])throw new TypeError("iapSDK: Unknown event type "+e.event);e.data||(e.data={}),e.event=t[e.event],l("/tracker/event",[],{event:e.event,data:e.data})},a.order=function(e){if(!e)throw new ReferenceError("iapSDK: order object undefined");l("/tracker/order",[],e)},a.conversion=function(e){if(!e)throw new ReferenceError("iapSDK: conversion object undefined");var t;"lead"===e.type&&(t={},e.category&&(t.category=e.category),e.brand&&(t.brand=e.brand),e.clickId&&(t.clickId=e.clickId),e={id:e.id+"",type:e.type,offerAlias:e.offerAlias,coupon:e.coupon,isNewCustomer:e.isNewCustomer,items:[t],comment:e.comment,productUserId:e.productUserId,goal:e.goal,data1:e.data1,data2:e.data2,data3:e.data3,data4:e.data4,data5:e.data5}),e.productUserId||delete e.productUserId,l("/tracker/conversion",[],e)},i.iapSDK&&n(i.iapSDK))for(var e=0;e<i.iapSDK.length;e++)a.push(i.iapSDK[e]);i.iapSDK=a}(window,document);
</script>

</body>
</html>
