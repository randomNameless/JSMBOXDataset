<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bay-components.min.html</title>
</head>
<body>

<script>
var bayComponents=function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(2);Object.defineProperty(e,"initAudios",{enumerable:!0,get:function(){return i(a).default}});var o=n(11);Object.defineProperty(e,"initVideos",{enumerable:!0,get:function(){return i(o).default}});var r=n(4);Object.defineProperty(e,"initCollapse",{enumerable:!0,get:function(){return i(r).default}});var s=n(3);Object.defineProperty(e,"initCalendar",{enumerable:!0,get:function(){return i(s).default}});var u=n(1);Object.defineProperty(e,"PullToLoadList",{enumerable:!0,get:function(){return u.PullToLoadList}});var l=n(6);Object.defineProperty(e,"comments",{enumerable:!0,get:function(){return i(l).default}});var c=n(10);Object.defineProperty(e,"tabs",{enumerable:!0,get:function(){return i(c).default}});var d=n(9);Object.defineProperty(e,"renderEditor",{enumerable:!0,get:function(){return i(d).default}});var h=n(7);Object.defineProperty(e,"initFlipper",{enumerable:!0,get:function(){return i(h).default}}),n(12)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=bayUtils,o=a.ajax;e.PullToLoadList=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var i={container:window,ipp:10,pageNum:0,total:0,apiUrl:"",threshold:10,renderItem:function(){},onLoadedFirstPage:function(){},onLoadedError:function(){},parseData:function(t){return{items:t.objects,total:t.total}}};this.options=$.extend({},i,e),this.apiUrl=this.options.apiUrl,this.ipp=this.options.ipp,this.pageNum=this.options.pageNum,this.total=this.options.total,this.renderItem=this.options.renderItem,this.parseData=this.options.parseData,this.onLoadedFirstPage=this.options.onLoadedFirstPage,this.onLoadedError=this.options.onLoadedError,this.threshold=this.options.threshold,this.container=this.options.container,this.items=[],this.isLoading=!1,this.$loadHint=$("#load-hint"),this.$loadMoreHint=$("#load-more-hint"),this.init()}return i(t,[{key:"init",value:function(){this.pageNum>0?this.onLoadedFirstPage({}):(this.pageNum+=1,this.loadItems(this.onLoadedFirstPage,this.onLoadedError)),this.bindEvents()}},{key:"bindEvents",value:function(){var t=this,e=$(window),n=$(this.container)[0],i=$("body");e.on("touchmove mousewheel",function(){if(!t.isLoading)if(n===window){var e=document.documentElement;e.scrollHeight-Math.ceil(window.scrollY||window.pageYOffset)-t.threshold<=e.clientHeight&&t.loadMoreData()}else n.scrollHeight-Math.ceil(n.scrollTop)-t.threshold<=n.clientHeight&&t.loadMoreData()}),i.on("click","#load-more-hint",function(){t.loadMoreData()})}},{key:"loadMoreData",value:function(){this.checkIsLastPage()||(this.pageNum+=1,this.renderLoading(),this.loadItems())}},{key:"checkIsLastPage",value:function(){return this.pageNum*this.ipp>=this.total}},{key:"renderMoreHint",value:function(){this.checkIsLastPage()?this.$loadMoreHint.hide():this.$loadMoreHint.show()}},{key:"renderLoading",value:function(){this.$loadMoreHint.hide(),this.$loadHint.show()}},{key:"renderItems",value:function(){var t=this;this.items.forEach(function(e){return t.renderItem(e)}),this.renderMoreHint()}},{key:"loadItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.isLoading=!0;var i=void 0;i=this.apiUrl.split("?").length>1?this.apiUrl+"&page="+this.pageNum+"&ipp="+this.ipp:this.apiUrl+"?page="+this.pageNum+"&ipp="+this.ipp,o({url:i,type:"GET",success:function(n){var i=t.parseData(n);t.$loadHint.hide(),t.items=i.items,t.total=i.total,t.isLoading=!1,t.renderItems(),e(n)},error:function(e,i){t.$loadHint.hide(),n(e,i)}})}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){var e=Math.floor(t);return e<10?"0"+e:e},i=function(t){var e=n(t/60),i=n(t%60);return e+":"+i},a=function(t){t.find(".current-point").css("left","0%"),t.find(".current-bar").css("width","0%"),t.find(".audio-controls-time").html("00:00")},o=function(t,e){return function(){e.each(function(t,e){return e.pause()}),t.play()}},r=function(t){return function(){t.pause()}},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"play";"play"===e?(t.find(".play-btn").hide(),t.find(".pause-btn").show()):(t.find(".pause-btn").hide(),t.find(".play-btn").show())},u=function(t){return function(){s(t,"play")}},l=function(t){return function(){s(t,"pause")}},c=function(t){return function(){a(t)}},d=function(t){return function(e){var n=e.target,a=n.currentTime,o=n.duration,r=n.currentTime/o*100;t.find(".current-point").css("left",r+"%"),t.find(".current-bar").css("width",r+"%"),t.find(".audio-controls-time").html(i(a))}},h=function(){var t=['<div class="audio-controls">','   <div class="audio-controls-content">','      <div class="audio-controls-btn">','          <i class="ib ib-play-circle-o play-btn"></i>','          <i class="ib ib-pause-circle pause-btn" style="display: none;"></i>',"      </div>",'      <div class="audio-controls-bar">','          <div class="current-point"></div>','          <div class="current-bar"></div>',"      </div>",'      <div class="audio-controls-time">00:00</div>',"   </div>","</div>"].join("");return $($.parseHTML(t))},p=function(t,e,n){e.on("click",".play-btn",o(t[0],n)).on("click",".pause-btn",r(t[0])),t.on("timeupdate",d(e)).on("play",u(e,n)).on("pause",l(e)).on("ended",c(e))},f=function(t,e,n){var i=h();p(t,i,n),t.after(i)},v=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(t).each(function(n,i){f($(i),e,$(t))})};e.default=v},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=bayUtils,o=a.merge,r=a.formatDate,s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"<"+t+" "+Object.keys(n).map(function(t){return t+'="'+n[t]+'"'}).join(" ")+">\n        "+e+"\n    </"+t+">"},l=function(t){for(var e=[],n=t.min;n<=t.max;n+=1)e.push(u(t.node,t.item(n)));return e.join("")},c=function(t,e){for(var n=[],i=new Date(t);i<=e;){var a=r(i,"YYYY-MM-D").split("-");n.push({year:a[0],month:a[1],day:a[2]}),i.setDate(i.getDate()+1)}return n},d=function(t){var e=new Date(t.replace(".","-")),n=e.getDay();e.setDate(e.getDate()-n);var i=new Date(e);return i.setDate(e.getDate()+41),c(e,i)},h=function(){function t(e){var i=this;n(this,t),this.options=o(e,{$el:$("#calendar"),activeDate:new Date,min:new Date,max:new Date,dates:{primary:[],secondary:[]},onClickDate:function(){}}),Object.keys(this.options).forEach(function(t){i[t]=i.options[t]}),this.handleClickDate=this.handleClickDate.bind(this),this.tableHead=this.tableHead.bind(this),this.tableRow=this.tableRow.bind(this),this.tableBody=this.tableBody.bind(this),this.table=this.table.bind(this),this.init()}return i(t,[{key:"init",value:function(){this.$el.addClass("bay-calendar"),this.activeDate=r(this.activeDate,"YYYY.MM"),this.min=r(this.min,"YYYY.MM"),this.max=r(this.max,"YYYY.MM"),this.dates.primary=this.dates.primary?this.dates.primary.map(function(t){return r(t,"YYYY-MM-D")}):[],this.dates.secondary=this.dates.secondary?this.dates.secondary.map(function(t){return r(t,"YYYY-MM-D")}):[],this.render(),this.bindEvents()}},{key:"render",value:function(){this.$el.html(""),this.$el.html(this.monthNav()+this.table())}},{key:"bindEvents",value:function(){var t=this;this.$el.on("click",".prev-month-btn",function(e){$(e.currentTarget).hasClass("disabled")||t.updateMonth(-1)}),this.$el.on("click",".next-month-btn",function(e){$(e.currentTarget).hasClass("disabled")||t.updateMonth(1)}),this.$el.on("click",".date-btn",this.handleClickDate)}},{key:"updateMonth",value:function(t){this.activeDate=new Date(this.activeDate.replace(".","-")),this.activeDate.setMonth(this.activeDate.getMonth()+t),this.activeDate=r(this.activeDate,"YYYY.MM"),this.render()}},{key:"handleClickDate",value:function(t){var e=$(t.currentTarget),n=e.data("date");this.onClickDate(n)}},{key:"monthNav",value:function(){if(this.activeDate<this.min||this.activeDate>this.max)throw Error("请检查一下参数，activeDate 不在范围内");return u("div",u("i","",{class:"\n                    ib ib-chevron-left prev-month-btn\n                    "+(this.activeDate===this.min?"disabled":"")+"\n                "})+u("span",this.activeDate)+u("i","",{class:"\n                    ib ib-chevron-right next-month-btn\n                    "+(this.activeDate===this.max?"disabled":"")+"\n                "}),{class:"header-nav"})}},{key:"tableHead",value:function(){return u("thead",u("tr",l({node:"th",min:0,max:6,item:function(t){return s[t]}})))}},{key:"tableRow",value:function(t){var e=this,n=d(this.activeDate),i=this.activeDate.split(".")[1];return l({node:"td",min:0,max:6,item:function(a){var o=7*t+a,r=n[o],s=r.year+"-"+r.month+"-"+r.day;return u("div",r.day,{class:"\n                            "+(i!==r.month?"disabled":"")+"\n                            "+(e.dates.primary.indexOf(s)!==-1?"primary":"")+"\n                            "+(e.dates.secondary.indexOf(s)!==-1?"secondary":"")+"\n                            date-btn\n                        ","data-date":s})}})}},{key:"tableBody",value:function(){return u("tbody",l({node:"tr",min:0,max:5,item:this.tableRow}))}},{key:"table",value:function(){return u("table",this.tableHead()+this.tableBody())}}]),t}(),p=function(t){return new h(t)};e.default=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){for(var n=/\s(\S+)$/,i=new RegExp("[\\u4E00-\\u9FFF]+"),a=t.html();t.height()>e;){var o=n.exec(a),r=2;if(o){var s=i.test(o[0]);s||(r=o[0].length)}a=t.html().slice(0,-r)+"&hellip;",t.html(a)}return t.html()},i=function(){var t=$("[bay-length-limited]");t.each(function(){var t=$(this),e=t.html(),i=t.attr("max-line"),a=$('<div class="wrapper bay-collapse"><p>'+e+"</p></div>"),o=a.find("p"),r=$('<a class="toggle-fold-btn">展开</a>'),s=!0;if($(this).html(a),i){var u=o.css("lineHeight"),l=parseInt(u,10)*i;if(!(o.height()<=l)){a.append(r);var c=n(o,l),d=function(){r.on("click",function(){s=!s,s?(o.html(c),r.html("展开")):(o.html(e),r.html("收起"))})};d()}}})};e.default=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=bayUtils,o=a.merge,r=a.ajax,s=a.formatDate,u=function(){function t(e){n(this,t),this.options=e,this.render=this.render.bind(this),this.toggleLike=this.toggleLike.bind(this),this.toggleDislike=this.toggleDislike.bind(this),this.showOperations=this.showOperations.bind(this),this.hideOperations=this.hideOperations.bind(this),this.toReportPage=this.toReportPage.bind(this),this.render(),this.bindEvents()}return i(t,[{key:"bindEvents",value:function(){this.options.isInteractiveDisabled||(this.$toggleLikeBtn=this.$comment.find(".toggle-like-btn"),this.$toggleDislikeBtn=this.$comment.find(".toggle-dislike-btn"),this.$operationList=this.$comment.find(".operation-list .list"),this.$toggleLikeBtn.on("touchstart",this.toggleLike),this.$toggleDislikeBtn.on("touchstart",this.toggleDislike),this.$comment.on("touchstart",".show-operations-btn",this.showOperations),this.$comment.on("touchstart",".report-btn",this.toReportPage),$("body").on("touchstart",this.hideOperations))}},{key:"toReportPage",value:function(t){var e=$(t.currentTarget);return window.location.href=e.attr("href"),!1}},{key:"showOperations",value:function(){return this.options.$el.find(".operation-list .list").hide(),this.$operationList.css({display:"block"}),!1}},{key:"hideOperations",value:function(){this.$operationList.hide()}},{key:"updateLikeStatus",value:function(t){var e=this,n=this.options,i=n.comment,a=n.buildLikeApiData;r(o(a({vote:t,commentId:i.id}),{type:"PUT",data:{vote:t},success:function(){e.changeLikeStatus(t)}}))}},{key:"changeLikeStatus",value:function(t){var e=this.$comment.find(".vote-num"),n=this.$toggleLikeBtn.hasClass("active"),i=+e.html()||0;"up"===t&&(this.$toggleLikeBtn.addClass("active"),this.$toggleDislikeBtn.removeClass("disable"),this.$toggleDislikeBtn.html("不喜欢"),status!==t&&e.html(i+1)),"down"===t&&(this.$toggleLikeBtn.removeClass("active"),this.$toggleDislikeBtn.addClass("disable"),this.$toggleDislikeBtn.html("已不喜欢"),n&&e.html(i-1||"")),"delete"===t&&(this.$toggleLikeBtn.removeClass("active"),this.$toggleDislikeBtn.removeClass("disable"),this.$toggleDislikeBtn.html("不喜欢"),n&&e.html(i-1||""))}},{key:"toggleLike",value:function(t){var e=$(t.currentTarget),n=e.hasClass("active"),i=n?"delete":"up";this.updateLikeStatus(i)}},{key:"toggleDislike",value:function(t){var e=$(t.currentTarget),n=e.hasClass("disable"),i=n?"delete":"down";return this.updateLikeStatus(i),!1}},{key:"render",value:function(){var t=this.options,e=t.$el,n=t.comment,i=t.currentUser,a=t.isInteractiveDisabled,o=t.hasLikeBtn,r=t.hasDislikeBtn,u=t.hasNestReplyBtn,l=t.hasReportBtn,c=n,d=c.user||{};this.$comment=$('\n            <div class="comment">\n                <div class="info">\n                    <div class="user-partial">\n                        <img class="avatar" src='+d.avatar+" />\n                        <div>\n                            <p>"+d.nickname+'</p>\n                            <p class="date">'+s(c.created_at)+'</p>\n                        </div>\n                    </div>\n                    <div class="operation-partial">\n                        '+(i.user_id_str!==d.id||a?"":'<i\n                                class="ib ib-pencil operation-item show-input-btn"\n                                data-comment=\''+JSON.stringify(c)+"'\n                            />")+"\n                        "+(o?'<div class="toggle-like-btn operation-item '+(c.is_voted_up?"active":"")+'">\n                                <i class="ib ib-thumbs-up-o" />\n                                <span class="vote-num">'+(c.vote_score||"")+"</span>\n                            </div> ":"")+"\n                        "+((r||u||l)&&!a?'<div class="operation-list">\n                                <div class="dots show-operations-btn">…</div>\n                                <div class="list">\n                                    '+(r?'<span class="toggle-dislike-btn '+(c.is_voted_down?"disable":"")+'">\n                                            '+(c.is_voted_down?"已不喜欢":"不喜欢")+"\n                                        </span> ":"")+"\n                                    "+(u?'<span\n                                            class="show-input-btn"\n                                            data-to-user-id='+d.id+"\n                                        >回复</span>":"")+"\n                                    "+(l?'<a\n                                            class="report-btn"\n                                            href="/web/report?report_url='+encodeURIComponent(c.report_url)+"&next="+encodeURIComponent(window.location.href)+'"\n                                        > 举报 </a>':"")+"\n                                </div>\n                            </div>":"")+'\n                    </div>\n                </div>\n                <div class="content">'+c.content+"</div>\n            </div>\n        "),e.append(this.$comment)}}]),t}(),l=function(t){return new u(t)};e.default=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=n(5),s=i(r),u=bayUtils,l=u.merge,c=u.ajax,d=function(){function t(e){a(this,t),this.options=l(e,{$el:$(".comments"),apiUrl:"",ipp:10,pageNum:0,total:0,threshold:10,currentUser:{},isInteractiveDisabled:!1,hasLikeBtn:!1,hasDislikeBtn:!1,hasReportBtn:!0,hasNestReplyBtn:!1,parseData:function(t){return{items:t.objects,total:t.total}},parseItemData:function(t){return t},buildCommentApiData:function(t){return{data:t}},buildLikeApiData:function(t){return{data:t}}}),this.render=this.render.bind(this),this.renderComment=this.renderComment.bind(this),this.renderEmptyBlock=this.renderEmptyBlock.bind(this),this.showCommentInputBox=this.showCommentInputBox.bind(this),this.hideCommentInputBox=this.hideCommentInputBox.bind(this),this.updateCommentBtnStatus=this.updateCommentBtnStatus.bind(this),this.submit=this.submit.bind(this),this.render(),this.bindEvents()}return o(t,[{key:"bindEvents",value:function(){var t=this.options.$el;t.on("touchstart",".show-input-btn",this.showCommentInputBox),t.on("touchstart",".submit-btn",this.submit),t.on("input",".comment-input",this.updateCommentBtnStatus),t.on("touchstart",".comment-bar",function(t){return t.stopPropagation()}),$("body").on("touchstart",this.hideCommentInputBox)}},{key:"updateCommentBtnStatus",value:function(t){var e=$(t.currentTarget).val(),n=this.options.$el.find(".submit-btn");e?n.addClass("active"):n.removeClass("active")}},{key:"submit",value:function(t){var e=this.options,n=e.$el,i=e.buildCommentApiData,a=e.apiUrl,o=n.find(".comment-input").val(),r=$(t.currentTarget);if(r.hasClass("active"))return this.editingComment.id?void c(l(i({commentId:this.editingComment.id,content:o}),{type:"PUT",success:this.render})):this.toUserId?void c(l(i({to_user_id:this.toUserId,content:o}),{url:a,type:"POST",success:this.render})):void c(l(i({content:o}),{url:a,type:"POST",success:this.render}))}},{key:"showCommentInputBox",value:function(t){if(this.editingComment={},t){var e=$(t.currentTarget),n=e.data("comment");this.editingComment=n||{},this.toUserId=e.data("to-user-id")}return this.$commentInputBox.show(),this.$commentInputBox.find("input").val(this.editingComment.content||"").focus(),!1}},{key:"hideCommentInputBox",value:function(){this.isCreating||(this.$commentInputBox.hide(),this.$commentInputBox.find("input").trigger("blur"))}},{key:"renderComment",value:function(t){(0,s.default)(l({comment:this.options.parseItemData(t)},this.options))}},{key:"renderEmptyBlock",value:function(){var t=this.options.$el,e='\n            <div class="empty-block">\n                <img src="https://static.baydn.com/baydn/public/images/object-sofa.png" />\n                <p>快来抢沙发吧～</p>\n            </div>\n        ';t.append(e)}},{key:"renderCommentInputBox",value:function(){var t=$('<div class="add-comment-bar-box"></div>');this.$commentInputBox=$('<div class="comment-bar bottom-bar">\n                <input class="comment-input" type= "text" placeholder= "添加评论..." />\n                <i class="ib ib-send submit-btn clickable" />\n            </div>'),this.options.$el.append(t),t.append(this.$commentInputBox),this.$commentInputBox.hide()}},{key:"render",value:function(){var t=this,e=this.options,n=e.$el,i=e.currentUser,a=e.parseData,o=e.parseItemData;n.addClass("bay-comments"),n.html(""),this.isCreating=!1,new bayComponents.PullToLoadList({ipp:this.options.ipp,pageNum:this.options.pageNum,total:this.options.total,apiUrl:this.options.apiUrl,threshold:this.options.threshold,renderItem:this.renderComment,parseData:this.options.parseData,onLoadedFirstPage:function(e){var n=a(e),r={user:{}};n.items[0]&&(r=o(n.items[0])),$(".comments-num").html(n.total),0!==n.total&&r.user.id===i.user_id_str||t.options.isInteractiveDisabled||(t.isCreating=!0,t.showCommentInputBox()),0===n.total&&t.renderEmptyBlock()}}),this.renderCommentInputBox()}}]),t}(),h=function(t){return new d(t)};e.default=h},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=$(window),i=n.height(),a=0,o=600,r=1,s=function(t,e,n,s){var u=void 0,l=!1,c=!1,d=(new Date).getTime(),h=(new Date).getTime(),p=e.length,f=function(e){var a=parseInt(t.css("transform").split(",")[5],10),o=e<0?a+i:a-i,u=p*i;Math.abs(o)<u-i?n.show():n.hide(),t.css("transform","translate3d(0, "+o+"px, 0)"),document.body.scrollTop=0,s(r)},v=function(){r+=1,f(1)},m=function(){r-=1,f(-1)};$("body").on("touchmove",function(t){t.preventDefault()}),e.on("touchstart",function(t){u=t.originalEvent.touches[0].clientY}),e.on("touchmove",function(t){var e=$(t.currentTarget),n=t.originalEvent.touches[0].clientY;l=e.scrollTop()===a,c=e.scrollTop()+e.outerHeight()+1>=e[0].scrollHeight,n>=u?(c=!1,l&&t.preventDefault()):(l=!1,c&&t.preventDefault()),t.stopPropagation()}),e.on("touchend",function(t){var e=$(t.currentTarget),n=t.originalEvent.changedTouches[0].clientY,i=(new Date).getTime(),a=i-d;a<o||(n>u&&l&&e.index()>0?(d=i,l=!1,m()):n<u&&c&&e.index()+1<p&&(d=i,c=!1,v()))}),n.on("click",function(){var t=(new Date).getTime(),e=t-h;h=t,e<o||v()})},u=function(t){var e=t.$container,n=t.$nextBtn,i=t.onChangePage,a=void 0===i?function(){}:i,o=e.children();e.addClass("flipper-pages"),o.addClass("flipper-page"),n.addClass("flipper-next-btn"),$("html").css("height","100%"),$("body").css("height","100%"),s(e,o,n,a)};e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.enableInlineVideo=function(){/*! npm.im/intervalometer */
function t(t,e,n,i){function a(n){o=e(a,i),t(n-(r||n)),r=n}var o=void 0,r=void 0;return{start:function(){o||a(0)},stop:function(){n(o),o=null,r=0}}}function e(e){return t(e,requestAnimationFrame,cancelAnimationFrame)}function i(t,e,n){function i(i){n&&!n(t,e)||i.stopImmediatePropagation()}return t.addEventListener(e,i),i}function a(t,e,n,i){function a(){return n[e]}function o(t){n[e]=t}i&&o(t[e]),Object.defineProperty(t,e,{get:a,set:o})}function o(t,e,n){n.addEventListener(e,function(){return t.dispatchEvent(new Event(e))})}function r(t,e){Promise.resolve().then(function(){t.dispatchEvent(new Event(e))})}function s(t){var e=new Audio;return o(t,"play",e),o(t,"playing",e),o(t,"pause",e),e.crossOrigin=t.crossOrigin,e.src=t.src||t.currentSrc||"data:",e}function u(t,e,n){(C||0)+200<Date.now()&&(t[y]=!0,C=Date.now()),n||(t.currentTime=e),$[++D%3]=100*e|0}function l(t){return t.driver.currentTime>=t.video.duration}function c(t){var e=this;e.video.readyState>=e.video.HAVE_FUTURE_DATA?(e.hasAudio||(e.driver.currentTime=e.video.currentTime+t*e.video.playbackRate/1e3,e.video.loop&&l(e)&&(e.driver.currentTime=0)),u(e.video,e.driver.currentTime)):e.video.networkState===e.video.NETWORK_IDLE&&0===e.video.buffered.length&&e.video.load(),e.video.ended&&(delete e.video[y],e.video.pause(!0))}function d(){var t=this,e=t[g];return t.webkitDisplayingFullscreen?void t[k]():("data:"!==e.driver.src&&e.driver.src!==t.src&&(u(t,0,!0),e.driver.src=t.src),void(t.paused&&(e.paused=!1,0===t.buffered.length&&t.load(),e.driver.play(),e.updater.start(),e.hasAudio||(r(t,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&r(t,"playing")))))}function h(t){var e=this,n=e[g];n.driver.pause(),n.updater.stop(),e.webkitDisplayingFullscreen&&e[w](),n.paused&&!t||(n.paused=!0,n.hasAudio||r(e,"pause"),e.ended&&!e.webkitDisplayingFullscreen&&(e[y]=!0,r(e,"ended")))}function p(t,n){var i={};t[g]=i,i.paused=!0,i.hasAudio=n,i.video=t,i.updater=e(c.bind(i)),n?i.driver=s(t):(t.addEventListener("canplay",function(){t.paused||r(t,"playing")}),i.driver={src:t.src||t.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,l(i)&&u(t,0)},get ended(){return l(i)}}),t.addEventListener("emptied",function(){var e=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==t.src&&(u(t,0,!0),i.driver.src=t.src,e||!n&&t.autoplay?i.driver.play():i.updater.stop())},!1),t.addEventListener("webkitbeginfullscreen",function(){t.paused?n&&0===i.driver.buffered.length&&i.driver.load():(t.pause(),t[k]())}),n&&(t.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=t.currentTime}),t.addEventListener("seeking",function(){$.indexOf(100*t.currentTime|0)<0&&(i.driver.currentTime=t.currentTime)}))}function f(t){var e=t[y];return delete t[y],!t.webkitDisplayingFullscreen&&!e}function v(t){var e=t[g];t[k]=t.play,t[w]=t.pause,t.play=d,t.pause=h,a(t,"paused",e.driver),a(t,"muted",e.driver,!0),a(t,"playbackRate",e.driver,!0),a(t,"ended",e.driver),a(t,"loop",e.driver,!0),i(t,"seeking",function(t){return!t.webkitDisplayingFullscreen}),i(t,"seeked",function(t){return!t.webkitDisplayingFullscreen}),i(t,"timeupdate",f),i(t,"ended",f)}function m(t,e){if(void 0===e&&(e={}),!t[g]){if(!e.everywhere){if(!b)return;if(!(e.iPad||e.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}t.pause();var n=t.autoplay;t.autoplay=!1,p(t,!t.muted),v(t),t.classList.add("IIV"),t.muted&&n&&(t.play(),t.addEventListener("playing",function e(){t.autoplay=!0,t.removeEventListener("playing",e)})),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}var b="object"===("undefined"==typeof document?"undefined":n(document))&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,g="bfred-it:iphone-inline-video",y="bfred-it:iphone-inline-video:event",k="bfred-it:iphone-inline-video:nativeplay",w="bfred-it:iphone-inline-video:nativepause",$=[],D=0,C=void 0;return m}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){return n(this,t),this.$el=null,this.config=$.extend({},t.defaultOptions,e),this.value=this.config.defaultValue,this.$el||this.render(),this.$textarea=this.$el.find("textarea"),this.$options=this.$el.find(".option-check"),this.bindEvents(),this}return i(t,[{key:"bindEvents",value:function(){var t=this;this.$el.on("click","[data-action=send]",function(e){e.stopPropagation(),t.submitHandler()}).on("change","textarea",function(e){e.stopPropagation(),$.proxy(t.config.change,t,e.currentTarget.value)}).on("click","[data-action=close]",function(e){e.stopPropagation(),t.closeHandler()})}},{key:"show",value:function(){this.$el.animate({bottom:0},300,"linear")}},{key:"close",value:function(){var t=this;this.$el.animate({bottom:"-100%"},300,"linear",function(){t.destory()})}},{key:"destory",value:function(){this.$el.remove()}},{key:"closeHandler",value:function(){var t=this.config.onClose,e=this.getValue(),n=e.txt,i=e.checkedVals,a=$.proxy(t,this)(n,{checkedVals:i});a&&this.close()}},{key:"getValue",value:function(){var t=this.$textarea.val(),e=[];return this.$options.filter(":checked").each(function(t,n){return e.push(n.value)}),{txt:t,checkedVals:e}}},{key:"submitHandler",value:function(){var t=this.config.onSubmit,e=this.getValue(),n=e.txt,i=e.checkedVals;$.proxy(t,this)(n,{checkedVals:i})}},{key:"render",value:function(){var t=this.config,e='\n            <div class="bay-render-editor">\n                <header>\n                    <a class="close-btn" data-action="close">\n                        <i class="ib ib-times"></i>\n                    </a>\n                    <a class="send-btn" data-action="send">发送</a>\n                </header>\n                <textarea placeholder="'+t.placeholder+'">'+this.value+'</textarea>\n                <div class="select-options">\n                    '+t.checkboxData.items.map(function(t){return'<div class="option">\n                                <label><input class="option-check" type="checkbox" '+(t.checked?"checked":"")+' value="'+t.value+'"/>'+t.title+"</label>\n                            </div>"}).join("")+"\n                </div>\n            </div>";$(e).appendTo("body"),this.$el=$(".bay-render-editor")}}]),t}();a.defaultOptions={defaultValue:"",placeholder:"写点什么....",onClose:function(){return!0},onSubmit:$.noop,onChange:$.noop,checkboxData:{items:[]},submitText:"发送"};var o=void 0,r=function(t){return o&&o.destory(),o=new a(t),o.show(),o};e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=bayUtils,o=a.merge,r=function(){function t(e){n(this,t),this.options=o(e,{$el:$(".tabs"),defaultIndex:0,onChangeTab:function(){}}),this.render=this.render.bind(this),this.bindEvents=this.bindEvents.bind(this),this.changeTab=this.changeTab.bind(this),this.showTab=this.showTab.bind(this),this.render(),this.bindEvents()}return i(t,[{key:"bindEvents",value:function(){var t=this.options.$el,e=t.find(".tab-title");e.on("touchstart",this.changeTab)}},{key:"changeTab",value:function(t){var e=this.options.$el,n=$(t.currentTarget),i=e.find(".tab-title").index(n);this.showTab(i)}},{key:"showTab",value:function(t){var e=this.options,n=e.$el,i=e.onChangeTab;n.find(".tab-panel").hide(),n.find(".tab-title").removeClass("active"),n.find(".tab-title:nth-child("+(t+1)+")").addClass("active"),n.find(".tab-panel:nth-child("+(t+1)+")").show(),i(t)}},{key:"render",value:function(){this.options.$el.addClass("bay-tabs"),this.showTab(this.options.defaultIndex)}}]),t}(),s=function(t){return new r(t)};e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toggleNativeFullscreen=e.toggleCustomFullscreen=e.checkFullScreen=void 0;var i=n(8),a=function(t){var e=Math.floor(t);return e<10?"0"+e:e},o=function(t){var e=a(t/60),n=a(t%60);return e+":"+n},r=e.checkFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.fullscreenElement)},s=function(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},u=function(t){t.find(".current-point").css("left","0%"),t.find(".current-bar").css("width","0%"),t.find(".video-controls-remaintime").html("00:00")},l=function(t,e,n,i){return function(){e.hide(),n.onerror=function(t){alert(JSON.stringify(t))},n.play(),i.onStartBtnClick()}},c=function(t){return function(){t.play()}},d=function(t){return function(){t.pause()}},h=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"play";"play"===e?(t.hide(),t.find(".play-btn").hide(),t.find(".pause-btn").show()):(t.show(),t.find(".pause-btn").hide(),t.find(".play-btn").show())},p=function(t){h(t,"play")},f=function(t){h(t,"pause")},v=function(t){u(t)},m=function(t,e,n){var i=e/n*100;t.find(".current-point").css("left",i+"%"),t.find(".current-bar").css("width",i+"%"),t.find(".current-time").html(o(e)),t.find(".fulltime").html(o(n))},b=function(t){var e=t.captions,n=void 0===e?[]:e,i=n.length,a=['<div class="caption-btn"><i class="ib ib-eye-o"/></div>'].join(""),o=['<div class="video-controls '+(i?"has-captions":"")+'" style="display: none;">','   <div class="player-btn">','       <i class="ib ib-play play-btn"></i>','       <i class="ib ib-pause pause-btn" style="display: none;"></i>',"   </div>",'   <div class="current-time">00:00</div>','   <div class="bar">','       <div class="current-point"></div>','       <div class="current-bar"></div>',"   </div>",'   <div class="fulltime">00:00</div>',i?a:"",'   <div class="fullscreen-btn"><i class="ib ib-expand"/></div>',"</div>"].join("");return $($.parseHTML(o))},g=function(){var t=['<div class="caption">',"</div>"].join("");return $(t)},y=function(t,e,n){var i=n.find(function(t){return e>=t.startTime&&e<=t.endTime});t.html(i?"<p>"+i.text+"</p><p>"+i.transText+"</p>":"")},k=function(t){var e=['<div class="video-cover" style="background-image: url('+t+')">','   <div class="start-btn"><i class="ib ib-play-circle-o"></i></div>',"</div>"].join("");return $(e)},w=e.toggleCustomFullscreen=function(t,e){var n="bay-video-fullscreen-wrap",i=t.find("video")[0],a=i.paused||i.ended;t.parent().hasClass(n)?t.unwrap(""):t.wrap('<div class="'+n+'"></div>'),a||i.play()},D=e.toggleNativeFullscreen=function(t){return r()?void(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()):void(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.webkitEnterFullscreen&&t.webkitEnterFullscreen())},C=function(t,e,n,i,a,o){var u=t[0],h=!1,b=u.clientHeight,g=function(){var t=window.outerHeight,e=(t-b)/2;r()?(i.addClass("fullscreen"),i.css("transform","translate(0, -"+e+"px)"),s(i[0])):(i.css("transform","translate(0, 0)"),i.removeClass("fullscreen"))};n&&n.on("click",l(e,n,u,o)),e.on("click",".play-btn",c(u)).on("click",".pause-btn",d(u)).on("click",".caption-btn",function(){e.hide(),i.toggle()}).on("click",".fullscreen-btn",function(){o.isFullscreenCustomed?w(a,o):D(u)}),t.on("timeupdate",function(t){var n=t.target,a=n.currentTime,r=n.duration;m(e,a,r),y(i,a,o.captions),o.onTimeUpdate(a,r,n)}).on("play",function(){h||(b=u.clientHeight,i.show(),h=!0),p(e),o.onPlay()}).on("pause",function(){f(e),o.onPause()}).on("ended",function(){v(e),o.onEnd()}).on("click",function(){return e.toggle()}).on("x5videoenterfullscreen",function(){o.onFullscreennChange("enter","native")}).on("x5videoexitfullscreen",function(){o.onFullscreennChange("exit","native")}).on("webkitfullscreenchange",function(){o.onFullscreennChange(r()?"enter":"exit","native"),g()}).on("mozfullscreenchange",function(){o.onFullscreennChange(r()?"enter":"exit","native"),g()}).on("MSFullscreenChange",function(){o.onFullscreennChange(r()?"enter":"exit","native"),g()}).on("fullscreenchange",function(){o.onFullscreennChange(r()?"enter":"exit","native"),g()})},x=function(t,e){(0,i.enableInlineVideo)(t[0]),t.wrap("<div class='bay-video-box'></div>");var n=t.parent(),a=b(e);n.append(a);var o=g();o.hide(),n.append(o);var r=t.data("poster"),s=k(r);n.append(s),C(t,a,s,o,n,e)},T=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={isFullscreenCustomed:!1,onFullscreennChange:function(){},onTimeUpdate:function(){},onStartBtnClick:function(){},onPlay:function(){},onPause:function(){},onEnd:function(){},captions:[]};$(t).addClass("bay-video").attr("webkit-playsinline",!0).attr("playsinline",!0).attr("x5-video-orientation","portrait").attr("x5-video-player-type","h5"),$(t).each(function(t,i){x($(i),$.extend(n,e))})};e.default=T},function(t,e){}]);
</script>

</body>
</html>
