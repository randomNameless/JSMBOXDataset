<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p-ebd2bd05.html</title>
</head>
<body>

<script>
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var e=Object.create;var t=Object.defineProperty;var r=Object.getOwnPropertyDescriptor;var n=Object.getOwnPropertyNames;var i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty;var u=(e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;var o=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e)((function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}));var s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=(e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})},l=(e,i,u,o)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of n(i))!a.call(e,s)&&s!==u&&t(e,s,{get:()=>i[s],enumerable:!(o=r(i,s))||o.enumerable});return e};var d=(r,n,a)=>(a=r!=null?e(i(r)):{},l(n||!r||!r.__esModule?t(a,"default",{value:r,enumerable:!0}):a,r));var f=(e,t,r)=>u(e,typeof t!="symbol"?t+"":t,r);var h=s(((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=n;function n(e,t,n){var i=n&&n.stringify||r,a=1;if(typeof e=="object"&&e!==null){var u=t.length+a;if(u===1)return e;var o=new Array(u);o[0]=i(e);for(var s=1;s<u;s++)o[s]=i(t[s]);return o.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var l="",d=1-a,f=-1,h=e&&e.length||0,p=0;p<h;){if(e.charCodeAt(p)===37&&p+1<h){switch(f=f>-1?f:0,e.charCodeAt(p+1)){case 100:case 102:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Number(t[d]),f=p+2,p++;break;case 105:if(d>=c||t[d]==null)break;f<p&&(l+=e.slice(f,p)),l+=Math.floor(Number(t[d])),f=p+2,p++;break;case 79:case 111:case 106:if(d>=c||t[d]===void 0)break;f<p&&(l+=e.slice(f,p));var g=typeof t[d];if(g==="string"){l+="'"+t[d]+"'",f=p+2,p++;break}if(g==="function"){l+=t[d].name||"<anonymous>",f=p+2,p++;break}l+=i(t[d]),f=p+2,p++;break;case 115:if(d>=c)break;f<p&&(l+=e.slice(f,p)),l+=String(t[d]),f=p+2,p++;break;case 37:f<p&&(l+=e.slice(f,p)),l+="%",f=p+2,p++,d--;break}++d}++p}return f===-1?e:(f<h&&(l+=e.slice(f)),l)}}));var p=s(((e,t)=>{var r=h();t.exports=f;var n=M().console||{},i={mapHttpRequest:x,mapHttpResponse:x,wrapRequestSerializer:k,wrapResponseSerializer:k,wrapErrorSerializer:k,req:x,res:x,err:O,errWithCause:O};function a(e,t){return e==="silent"?1/0:t.levels.values[e]}var u=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function c(e,t){let r={logger:t,parent:e[o]};t[o]=r}function l(e,t,r){let i={};t.forEach((e=>{i[e]=r[e]?r[e]:n[e]||n[s[e]||"log"]||C})),e[u]=i}function d(e,t){return Array.isArray(e)?e.filter((function(e){return e!=="!stdSerializers.err"})):e===!0?Object.keys(t):!1}function f(e){e=e||{},e.browser=e.browser||{};let t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");let r=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let i=e.serializers||{},u=d(e.browser.serialize,i),o=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(o=!1);let s=Object.keys(e.customLevels||{}),f=["error","fatal","warn","info","debug","trace"].concat(s);typeof r=="function"&&f.forEach((function(e){r[e]=r})),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");let h=e.level||"info",g=Object.create(r);g.log||(g.log=C),l(g,f,r),c({},g),Object.defineProperty(g,"levelVal",{get:m}),Object.defineProperty(g,"level",{get:w,set:b});let y={transmit:t,serialize:u,asObject:e.browser.asObject,formatters:e.browser.formatters,levels:f,timestamp:A(e)};g.levels=p(e),g.level=h,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=C,g.serializers=i,g._serialize=u,g._stdErrSerialize=o,g.child=I,t&&(g._logEvent=q());function m(){return a(this.level,this)}function w(){return this._level}function b(e){if(e!=="silent"&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,v(this,y,g,"error"),v(this,y,g,"fatal"),v(this,y,g,"warn"),v(this,y,g,"info"),v(this,y,g,"debug"),v(this,y,g,"trace"),s.forEach((e=>{v(this,y,g,e)}))}function I(r,n){if(!r)throw new Error("missing bindings for child Pino");n=n||{},u&&r.serializers&&(n.serializers=r.serializers);let a=n.serializers;if(u&&a){var o=Object.assign({},i,a),s=e.browser.serialize===!0?Object.keys(o):u;delete r.serializers,S([r],s,o,this._stdErrSerialize)}function l(e){this._childLevel=(e._childLevel|0)+1,this.bindings=r,o&&(this.serializers=o,this._serialize=s),t&&(this._logEvent=q([].concat(e._logEvent.bindings,r)))}l.prototype=this;let d=new l(this);return c(this,d),d.level=this.level,d}return g}function p(e){let t=e.customLevels||{},r=Object.assign({},f.levels.values,t),n=Object.assign({},f.levels.labels,g(t));return{values:r,labels:n}}function g(e){let t={};return Object.keys(e).forEach((function(r){t[e[r]]=r})),t}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};f.stdSerializers=i;f.stdTimeFunctions=Object.assign({},{nullTime:R,epochTime:T,unixTime:F,isoTime:j});function y(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[o];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}function v(e,t,r,n){if(Object.defineProperty(e,n,{value:a(e.level,r)>a(n,r)?C:r[u][n],writable:!0,enumerable:!0,configurable:!0}),!t.transmit&&e[n]===C)return;e[n]=w(e,t,r,n);let i=y(e);i.length!==0&&(e[n]=m(i,e[n]))}function m(e,t){return function(){return t.apply(this,[...e,...arguments])}}function w(e,t,r,i){return function(u){return function(){let o=t.timestamp(),s=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var l=0;l<s.length;l++)s[l]=arguments[l];if(t.serialize&&!t.asObject&&S(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject||t.formatters?u.call(c,b(this,i,s,o,t.formatters)):u.apply(c,s),t.transmit){let n=t.transmit.level||e._level,u=r.levels.values[n],c=r.levels.values[i];if(c<u)return;I(this,{ts:o,methodLevel:i,methodValue:c,transmitLevel:n,transmitValue:r.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,r)},s)}}}(e[u][i])}function b(e,t,n,i,a={}){let{level:u=(()=>e.levels.values[t]),log:o=(e=>e)}=a;e._serialize&&S(n,e._serialize,e.serializers,e._stdErrSerialize);let s=n.slice(),c=s[0],l={};i&&(l.time=i),l.level=u(t,e.levels.values[t]);let d=(e._childLevel|0)+1;if(d<1&&(d=1),c!==null&&typeof c=="object"){for(;d--&&typeof s[0]=="object";)Object.assign(l,s.shift());c=s.length?r(s.shift(),s):void 0}else typeof c=="string"&&(c=r(s.shift(),s));return c!==void 0&&(l.msg=c),o(l)}function S(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=f.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function I(e,t,r){let n=t.send,i=t.ts,a=t.methodLevel,u=t.methodValue,o=t.val,s=e._logEvent.bindings;S(r,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return s.indexOf(e)===-1})),e._logEvent.level.label=a,e._logEvent.level.value=u,n(a,e._logEvent,o),e._logEvent=q(s)}function q(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function O(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)t[r]===void 0&&(t[r]=e[r]);return t}function A(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?R:T}function x(){return{}}function k(e){return e}function C(){}function R(){return!1}function T(){return Date.now()}function F(){return Math.round(Date.now()/1e3)}function j(){return new Date(Date.now()).toISOString()}function M(){function e(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}t.exports.default=f;t.exports.pino=f}));var g=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=n()})(e,(function(){var e=1e3,t=6e4,r=36e5,n="millisecond",i="second",a="minute",u="hour",o="day",s="week",c="month",l="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},m={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+v(n,2,"0")+":"+v(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),a=r-i<0,u=t.clone().add(n+(a?-1:1),c);return+(-(n+(r-i)/(a?i-u:u-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:d,w:s,d:o,D:f,h:u,m:a,s:i,ms:n,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},w="en",b={};b[w]=y;var S="$isDayjsObject",I=function(e){return e instanceof x||!(!e||!e[S])},q=function e(t,r,n){var i;if(!t)return w;if(typeof t=="string"){var a=t.toLowerCase();b[a]&&(i=a),r&&(b[a]=r,i=a);var u=t.split("-");if(!i&&u.length>1)return e(u[0])}else{var o=t.name;b[o]=t,i=o}return!n&&i&&(w=i),i||!n&&w},O=function(e,t){if(I(e))return e.clone();var r=typeof t=="object"?t:{};return r.date=e,r.args=arguments,new x(r)},A=m;A.l=q,A.i=I,A.w=function(e,t){return O(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var x=function(){function y(e){this.$L=q(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var v=y.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(t===null)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return A},v.isValid=function(){return this.$d.toString()!==h},v.isSame=function(e,t){var r=O(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return O(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<O(e)},v.$g=function(e,t,r){return A.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,n=!!A.u(t)||t,l=A.p(e),h=function(e,t){var i=A.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return n?i:i.endOf(o)},p=function(e,t){return A.w(r.toDate()[e].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,y=this.$M,v=this.$D,m="set"+(this.$u?"UTC":"");switch(l){case d:return n?h(1,0):h(31,11);case c:return n?h(1,y):h(0,y+1);case s:var w=this.$locale().weekStart||0,b=(g<w?g+7:g)-w;return h(n?v-b:v+(6-b),y);case o:case f:return p(m+"Hours",0);case u:return p(m+"Minutes",1);case a:return p(m+"Seconds",2);case i:return p(m+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,s=A.p(e),l="set"+(this.$u?"UTC":""),h=(r={},r[o]=l+"Date",r[f]=l+"Date",r[c]=l+"Month",r[d]=l+"FullYear",r[u]=l+"Hours",r[a]=l+"Minutes",r[i]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],p=s===o?this.$D+(t-this.$W):t;if(s===c||s===d){var g=this.clone().set(f,1);g.$d[h](p),g.init(),this.$d=g.set(f,Math.min(this.$D,g.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[A.p(e)]()},v.add=function(n,l){var f,h=this;n=Number(n);var p=A.p(l),g=function(e){var t=O(h);return A.w(t.date(t.date()+Math.round(e*n)),h)};if(p===c)return this.set(c,this.$M+n);if(p===d)return this.set(d,this.$y+n);if(p===o)return g(1);if(p===s)return g(7);var y=(f={},f[a]=t,f[u]=r,f[i]=e,f)[p]||1,v=this.$d.getTime()+n*y;return A.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=A.z(this),a=this.$H,u=this.$m,o=this.$M,s=r.weekdays,c=r.months,l=r.meridiem,d=function(e,r,i,a){return e&&(e[r]||e(t,n))||i[r].slice(0,a)},f=function(e){return A.s(a%12||12,e,"0")},p=l||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(g,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return o+1;case"MM":return A.s(o+1,2,"0");case"MMM":return d(r.monthsShort,o,c,3);case"MMMM":return d(c,o);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,s,2);case"ddd":return d(r.weekdaysShort,t.$W,s,3);case"dddd":return s[t.$W];case"H":return String(a);case"HH":return A.s(a,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(a,u,!0);case"A":return p(a,u,!1);case"m":return String(u);case"mm":return A.s(u,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,f,h){var p,g=this,y=A.p(f),v=O(n),m=(v.utcOffset()-this.utcOffset())*t,w=this-v,b=function(){return A.m(g,v)};switch(y){case d:p=b()/12;break;case c:p=b();break;case l:p=b()/3;break;case s:p=(w-m)/6048e5;break;case o:p=(w-m)/864e5;break;case u:p=w/r;break;case a:p=w/t;break;case i:p=w/e;break;default:p=w}return h?p:A.a(p)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return b[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=q(e,t,!0);return n&&(r.$L=n),r},v.clone=function(){return A.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},y}(),k=x.prototype;return O.prototype=k,[["$ms",n],["$s",i],["$m",a],["$H",u],["$W",o],["$M",c],["$y",d],["$D",f]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),O.extend=function(e,t){return e.$i||(e(t,x,O),e.$i=!0),O},O.locale=q,O.isDayjs=I,O.unix=function(e){return O(1e3*e)},O.en=b[w],O.Ls=b,O.p={},O}))}));var y=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_timezone=n()})(e,(function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,i){var a,u=function(e,r,n){n===void 0&&(n={});var i=new Date(e),a=function(e,r){r===void 0&&(r={});var n=r.timeZoneName||"short",i=e+"|"+n,a=t[i];return a||(a=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:n}),t[i]=a),a}(r,n);return a.formatToParts(i)},o=function(t,r){for(var n=u(t,r),a=[],o=0;o<n.length;o+=1){var s=n[o],c=s.type,l=s.value,d=e[c];d>=0&&(a[d]=parseInt(l,10))}var f=a[3],h=f===24?0:f,p=a[0]+"-"+a[1]+"-"+a[2]+" "+h+":"+a[4]+":"+a[5]+":000",g=+t;return(i.utc(p).valueOf()-(g-=g%1e3))/6e4},s=n.prototype;s.tz=function(e,t){e===void 0&&(e=a);var r,n=this.utcOffset(),u=this.toDate(),o=u.toLocaleString("en-US",{timeZone:e}),s=Math.round((u-new Date(o))/1e3/60),c=15*-Math.round(u.getTimezoneOffset()/15)-s;if(!Number(c))r=this.utcOffset(0,t);else if(r=i(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(c,!0),t){var l=r.utcOffset();r=r.add(n-l,"minute")}return r.$x.$timezone=e,r},s.offsetName=function(e){var t=this.$x.$timezone||i.tz.guess(),r=u(this.valueOf(),t,{timeZoneName:e}).find((function(e){return e.type.toLowerCase()==="timezonename"}));return r&&r.value};var c=s.startOf;s.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return c.call(this,e,t);var r=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return c.call(r,e,t).tz(this.$x.$timezone,!0)},i.tz=function(e,t,r){var n=r&&t,u=r||t||a,s=o(+i(),u);if(typeof e!="string")return i(e).tz(u);var c=function(e,t,r){var n=e-60*t*1e3,i=o(n,r);if(t===i)return[n,t];var a=o(n-=60*(i-t)*1e3,r);return i===a?[n,i]:[e-60*Math.min(i,a)*1e3,Math.max(i,a)]}(i.utc(e,n).valueOf(),s,u),l=c[0],d=c[1],f=i(l).utcOffset(d);return f.$x.$timezone=u,f},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(e){a=e}}}))}));var v=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_utc=n()})(e,(function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,i,a){var u=i.prototype;a.utc=function(e){var t={date:e,utc:!0,args:arguments};return new i(t)},u.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var o=u.parse;u.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),o.call(this,e)};var s=u.init;u.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else s.call(this)};var c=u.utcOffset;u.utcOffset=function(n,i){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if(typeof n=="string"&&(n=function(e){e===void 0&&(e="");var n=e.match(t);if(!n)return null;var i=(""+n[0]).match(r)||["-",0,0],a=i[0],u=60*+i[1]+ +i[2];return u===0?0:a==="+"?u:-u}(n),n===null))return this;var u=Math.abs(n)<=16?60*n:n,o=this;if(i)return o.$offset=u,o.$u=n===0,o;if(n!==0){var s=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(u+s,e)).$offset=u,o.$x.$localOffset=s}else o=this.utc();return o};var l=u.format;u.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,t)},u.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var d=u.toDate;u.toDate=function(e){return e==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=u.diff;u.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),i=a(e).local();return f.call(n,i,t,r)}}}))}));var m=s(((e,t)=>{t.exports=fetch}));var w=s((e=>{var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function n(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}e.getSanitizedOptions=n}));var b=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){var t=Math.random()*e;return Math.round(t)}e.fullJitter=t}));var S=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});function t(e){return e}e.noJitter=t}));var I=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=b(),r=S();function n(e){switch(e.jitter){case"full":return t.fullJitter;case"none":default:return r.noJitter}}e.JitterFactory=n}));var q=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=I(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise((function(t){return setTimeout(t,e.jitteredDelay)}))},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var e=t.JitterFactory(this.options);return e(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var e=this.options.startingDelay,t=this.options.timeMultiple,r=this.numOfDelayedAttempts,n=e*Math.pow(t,r);return Math.min(n,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}));var O=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function u(e){try{s(n.next(e))}catch(e){a(e)}}function o(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(u,o)}s((n=n.apply(e,t||[])).next())}))},n=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(e){return function(t){return s([e,t])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(e){u=[6,e],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var i=q(),a=function(e){t(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return i.prototype.apply=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]}))}))},Object.defineProperty(i.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),i}(i.Delay);e.SkipFirstDelay=a}));var A=s((e=>{var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=q(),n=function(e){t(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r}(r.Delay);e.AlwaysDelay=n}));var x=s((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=O(),r=A();function n(e,t){var r=i(e);return r.setAttemptNumber(t),r}e.DelayFactory=n;function i(e){return e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e)}}));var k=s((e=>{var t=e&&e.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function u(e){try{s(n.next(e))}catch(e){a(e)}}function o(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(u,o)}s((n=n.apply(e,t||[])).next())}))},r=e&&e.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(e){return function(t){return s([e,t])}}function s(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(e){u=[6,e],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0});var n=w(),i=x();function a(e,i){return i===void 0&&(i={}),t(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(i),a=new u(e,t),[4,a.execute()];case 1:return[2,r.sent()]}}))}))}e.backOff=a;var u=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,(function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return e=r.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(t=r.sent(),!t||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}}))}))},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return e=i.DelayFactory(this.options,this.attemptNumber),[4,e.apply()];case 1:return t.sent(),[2]}}))}))},e}()}));var C=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");if(e=`${e}`,e=e.replace(/[ \t\n\f\r]/g,""),e.length%4===0&&(e=e.replace(/==?$/,"")),e.length%4===1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=i(e[a]),n+=6,n===24&&(t+=String.fromCharCode((r&16711680)>>16),t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255),r=n=0);return n===12?(r>>=4,t+=String.fromCharCode(r)):n===18&&(r>>=2,t+=String.fromCharCode((r&65280)>>8),t+=String.fromCharCode(r&255)),t}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){let t=n.indexOf(e);return t<0?void 0:t}t.exports=r}));var R=s(((e,t)=>{function r(e){if(arguments.length===0)throw new TypeError("1 argument required, but only 0 present.");let t;for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(e.charCodeAt(t)&3)<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(e.charCodeAt(t+1)&15)<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=e.charCodeAt(t+2)&63);for(let e=0;e<n.length;e++)typeof n[e]>"u"?r+="=":r+=i(n[e])}return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function i(e){if(e>=0&&e<64)return n[e]}t.exports=r}));var T=s(((e,t)=>{var r=C(),n=R();t.exports={atob:r,btoa:n}}));var F=s(((e,t)=>{var r=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!r)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}));var j=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=n()})(e,(function(){var e="month",t="quarter";return function(r,n){var i=n.prototype;i.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=i.add;i.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):a.bind(this)(r,n)};var u=i.startOf;i.startOf=function(r,n){var i=this.$utils(),a=!!i.u(n)||n;if(i.p(r)===t){var o=this.quarter()-1;return a?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return u.bind(this)(r,n)}}}))}));var M=s(((e,t)=>{(function(r,n){typeof e=="object"&&typeof t<"u"?t.exports=n():typeof define=="function"&&define.amd?define(n):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=n()})(e,(function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,a={},u=function(e){return(e=+e)+(e>68?1900:2e3)},o=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||e==="Z")return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return r===0?0:t[0]==="+"?-r:r}(e)}],c=function(e){var t=a[e];return t&&(t.indexOf?t:t.s.concat(t.f))},l=function(e,t){var r,n=a.meridiem;if(n){for(var i=1;i<=24;i+=1)if(e.indexOf(n(i,0,t))>-1){r=i>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[i,function(e){this.afternoon=l(e,!1)}],a:[i,function(e){this.afternoon=l(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,o("seconds")],ss:[n,o("seconds")],m:[n,o("minutes")],mm:[n,o("minutes")],H:[n,o("hours")],h:[n,o("hours")],HH:[n,o("hours")],hh:[n,o("hours")],D:[n,o("day")],DD:[r,o("day")],Do:[i,function(e){var t=a.ordinal,r=e.match(/\d+/);if(this.day=r[0],t)for(var n=1;n<=31;n+=1)t(n).replace(/\[|\]/g,"")===e&&(this.day=n)}],M:[n,o("month")],MM:[r,o("month")],MMM:[i,function(e){var t=c("months"),r=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[i,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,o("year")],YY:[r,function(e){this.year=u(e)}],YYYY:[/\d{4}/,o("year")],Z:s,ZZ:s};function f(r){var n,i;n=r,i=a&&a.formats;for(var u=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,r,n){var a=n&&n.toUpperCase();return r||i[n]||e[n]||i[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,r){return t||r.slice(1)}))}))).match(t),o=u.length,s=0;s<o;s+=1){var c=u[s],l=d[c],f=l&&l[0],h=l&&l[1];u[s]=h?{regex:f,parser:h}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<o;r+=1){var i=u[r];if(typeof i=="string")n+=i.length;else{var a=i.regex,s=i.parser,c=e.slice(n),l=a.exec(c)[0];s.call(t,l),e=e.replace(l,"")}}return function(e){var t=e.afternoon;if(t!==void 0){var r=e.hours;t?r<12&&(e.hours+=12):r===12&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,r){r.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(u=e.parseTwoDigitYear);var n=t.prototype,i=n.parse;n.parse=function(e){var t=e.date,n=e.utc,u=e.args;this.$u=n;var o=u[1];if(typeof o=="string"){var s=u[2]===!0,c=u[3]===!0,l=s||c,d=u[2];c&&(d=u[2]),a=this.$locale(),!s&&d&&(a=r.Ls[d]),this.$d=function(e,t,r){try{if(["x","X"].indexOf(t)>-1)return new Date((t==="X"?1e3:1)*e);var n=f(t)(e),i=n.year,a=n.month,u=n.day,o=n.hours,s=n.minutes,c=n.seconds,l=n.milliseconds,d=n.zone,h=new Date,p=u||(i||a?1:h.getDate()),g=i||h.getFullYear(),y=0;i&&!a||(y=a>0?a-1:h.getMonth());var v=o||0,m=s||0,w=c||0,b=l||0;return d?new Date(Date.UTC(g,y,p,v,m,w,b+60*d.offset*1e3)):r?new Date(Date.UTC(g,y,p,v,m,w,b)):new Date(g,y,p,v,m,w,b)}catch{return new Date("")}}(t,o,n),this.init(),d&&d!==!0&&(this.$L=this.locale(d).$L),l&&t!=this.format(o)&&(this.$d=new Date("")),a={}}else if(o instanceof Array)for(var h=o.length,p=1;p<=h;p+=1){u[1]=o[p-1];var g=r.apply(this,u);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}p===h&&(this.$d=new Date(""))}else i.call(this,e)}}}))}));var P=s(((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}));var D=()=>global.crypto,E=()=>{typeof window<"u"||(D()||(global.crypto=o("crypto")),!D().getRandomValues&&D().webcrypto&&(global.crypto.getRandomValues=D().webcrypto.getRandomValues.bind(D().webcrypto)))};d(p());var _=e=>({referrer:document.referrer,userAgent:navigator.userAgent,location:window.location.href,clientId:e}),$=()=>({referrer:null,userAgent:null,location:null,clientId:""});var V="coveo-headless-internal-state",U=Symbol.for(V);var Q=10,N=e=>({past:[],present:e,future:[]}),L=e=>{let{past:t,present:r,future:n}=e;if(!r||t.length===0)return e;let i=t[t.length-1];return{past:t.slice(0,t.length-1),present:i,future:[r,...n]}},B=e=>{let{past:t,present:r,future:n}=e;if(!r||n.length===0)return e;let i=n[0],a=n.slice(1);return{past:[...t,r],present:i,future:a}},z=e=>{let{action:t,state:r,reducer:n}=e,{past:i,present:a}=r,u=n(a,t);return a?a===u?r:{past:[...i,a].slice(-Q),present:u,future:[]}:N(u)},H=e=>{let{actionTypes:t,reducer:r}=e,n=N();return(e=n,i)=>{switch(i.type){case t.undo:return L(e);case t.redo:return B(e);case t.snapshot:return z({state:e,reducer:r,action:i});default:return e}}};var Y=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}});var J=d(g()),W=d(y()),G=d(v());var K=d(m()),Z=d(k());var X=class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}};var ee=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=t??0}};var te=d(T()),re=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function ne(e){return Array.isArray(e)}function ie(e){return e.trim()===""}function ae(e,t){return[...e.reduce(((e,r)=>{let n=t(r);return e.has(n)||e.set(n,r),e}),new Map).values()]}function ue(e){return(typeof btoa<"u"?btoa:te.btoa)(encodeURI(e))}function oe(e,t){let{[e]:r,...n}=t;return n}function se(e){return ue(JSON.stringify(e))}var ce=new Set(["1",1,"yes",!0]);function le(){if(typeof navigator>"u"||typeof window>"u")return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some((e=>ce.has(e)))}function de(e){let t={};for(let[r,n]of e)t[r]=n;return t}function fe(e,t,r){return clearTimeout(t),setTimeout(e,r)}function he(e){if(typeof e!="object"||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch{return e}}function pe(e){let t=[];for(let r in e){let n=encodeURIComponent(r),i=encodeURIComponent(e[r]);t.push(`${n}=${i}`)}return t.join("&")}function ge(e){return typeof e!="object"||!e?!1:Object.values(e).every(ye)}function ye(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function ve(e){return e===429}var me=class e{static async call(t){let r=qe(t),{logger:n}=t,i=await e.preprocessRequest(r,t);n.info(i,"Platform request");let{url:a,...u}=i,o=async()=>{let e=await(0,K.default)(a,u);if(ve(e.status))throw e;return e};try{let e=await(0,Z.backOff)(o,{retry:e=>{let t=e&&ve(e.status);return t&&n.info("Platform retrying request"),t}});switch(e.status){case 419:case 401:throw n.info("Platform renewing token"),new X;case 404:throw new ee(a,e.status);default:return n.info({response:e,requestInfo:i},"Platform response"),e}}catch(e){return e.message==="Failed to fetch"?new ee(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:i,requestMetadata:a}=t,{signal:u,...o}=e,s=he(o);try{let t=await n(e,r,a);return{...e,...t}}catch(e){i.error(e,"Platform request preprocessing failed. Returning default request options.")}return s}};function we(e,t){let r=!t||!t.environment||t.environment==="prod"?"":t.environment,n=!t||!t.region||t.region==="us"?"":`-${t.region}`;return`https://${e}${r}${n}.cloud.coveo.com`}function be(e,t="prod"){let r=t==="prod"?"":t,n=`https://${e}.org${r}.coveo.com`,i=`https://${e}.analytics.org${r}.coveo.com`,a=`${n}/rest/search/v2`,u=`https://${e}.admin.org${r}.coveo.com`;return{platform:n,analytics:i,search:a,admin:u}}function Se(e){return e?.multiRegionSubDomain?`https://${e.multiRegionSubDomain}.org.coveo.com`:we("platform",e)}function Ie(e){return we("analytics",e)}function qe(e){let{url:t,method:r,requestParams:n,contentType:i,accessToken:a,signal:u}=e,o=e.method==="POST"||e.method==="PUT",s=Oe(n,i);return{url:t,method:r,headers:{"Content-Type":i,Authorization:`Bearer ${a}`,...e.headers},...o&&{body:s},signal:u}}function Oe(e,t){return t==="application/x-www-form-urlencoded"?ge(e)?pe(e):"":JSON.stringify(e)}J.default.extend(G.default);J.default.extend(W.default);var Ae="/rest/search/v2",xe="/rest/ua",ke=()=>({organizationId:"",accessToken:"",platformUrl:Se(),search:{apiBaseUrl:`${Se()}${Ae}`,locale:"en-US",timezone:J.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${Ie()}${xe}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy",source:{}},knowledge:{answerConfigurationId:""}});function Ce(){return{contextValues:{}}}var Re=()=>!1;function Te(){return{contextValues:{}}}var Fe=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),je=()=>({correctedQuery:"",corrections:[],originalQuery:""});function Me(){return{enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:Fe(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"}}function Pe(){return{length:void 0}}function De(){return{enabled:!0}}function Ee(){return{freezeFacetOrder:!1,facets:{}}}function _e(){return{desiredCount:5,numberOfValues:8,set:{}}}function $e(){return{}}function Ve(){return[]}function Ue(){return{}}function Qe(){return{}}function Ne(e){return{request:e,hasBreadcrumbs:!0}}function Le(){return{}}function Be(e){return{request:e}}function ze(){return{}}function He(e){return{request:e}}function Ye(){return{}}var Je=["author","language","urihash","objecttype","collection","source","permanentid"],We=[...Je,"date","filetype","parents"],Ge=[...We,"ec_price","ec_name","ec_description","ec_brand","ec_category","ec_item_group_id","ec_shortdesc","ec_thumbnails","ec_images","ec_promo_price","ec_in_stock","ec_rating"],Ke=()=>({fieldsToInclude:Je,fetchAllFields:!1,fieldsDescription:[]});var Ze=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function Xe(){return{id:"",isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default",contentFormat:["text/plain"]},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[],isAnswerGenerated:!1,expanded:!1}}function et(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var tt=()=>"";function rt(){return{}}var nt=()=>({q:"",enableQuerySyntax:!1});var it=()=>"default";function at(e,t){let r=`\n  The following properties are invalid:\n\n    ${e.join(`\n\t`)}\n  \n  ${t}\n  `;return new ut(r)}var ut=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},ot=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length)throw at(n,t);return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;r!==void 0&&(e[t]=r)}return e}},st=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&dt(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return this.baseConfig.required===!0}};function ct(e){return e===void 0}function lt(e){return e===null}function dt(e){return ct(e)||lt(e)}var ft=class{constructor(e={}){this.config=e,this.value=new st(e)}validate(e){let t=this.value.validate(e);return t||(ht(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function ht(e){return ct(e)||pt(e)}function pt(e){return typeof e=="number"&&!isNaN(e)}var gt=class{constructor(e={}){this.value=new st(e)}validate(e){let t=this.value.validate(e);return t||(yt(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function yt(e){return ct(e)||vt(e)}function vt(e){return typeof e=="boolean"}var mt=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,wt=/^\d{4}(-\d\d(-\d\d(T\d\d:\d\d(:\d\d)?(\.\d+)?(([+-]\d\d:\d\d)|Z)?)?)?)?$/i,bt=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new st(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:i,ISODate:a}=this.config,u=this.value.validate(e);return u||(ct(e)?null:St(e)?!t&&!e.length?"value is an empty string.":r&&!mt.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:i&&!i.includes(e)?`value should be one of: ${i.join(", ")}.`:a&&!(wt.test(e)&&new Date(e).toString()!=="Invalid Date")?"value is not a valid ISO8601 date string":null:"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function St(e){return Object.prototype.toString.call(e)==="[object String]"}var It=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(ct(e))return this.config.options.required?"value is required and is currently undefined":null;if(!qt(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&dt(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let i=e[r],a=n.validate(i);a!==null&&(t+=" "+a)}return t===""?null:t}get default(){}get required(){return!!this.config.options.required}};function qt(e){return e!==void 0&&typeof e=="object"}var Ot=class{constructor(e={}){this.config=e,this.value=new st(this.config)}validate(e){if(!dt(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(t!==null)return t;if(dt(e))return null;if(this.config.max!==void 0&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(this.config.min!==void 0&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(this.config.each!==void 0){let t="";return e.forEach((r=>{this.config.each.required&&dt(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);n!==null&&(t+=" "+n)})),t===""?null:t}return null}validatePrimitiveValue(e,t){return vt(e)||St(e)||pt(e)||qt(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function At(e){return Array.isArray(e)}var xt=class{constructor(e){this.config=e,this.value=new st(e)}validate(e){let t=this.value.validate(e);return t!==null?t:ct(e)||Object.values(this.config.enum).find((t=>t===e))?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}};var kt=(e=>(e.Ascending="ascending",e.Descending="descending",e))(kt||{}),Ct=(e=>(e.Relevancy="relevancy",e.QRE="qre",e.Date="date",e.Field="field",e.NoSort="nosort",e))(Ct||{}),Rt=e=>{if(At(e))return e.map((e=>Rt(e))).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},Tt=()=>({by:"relevancy"}),Ft=e=>({by:"date",order:e}),jt=(e,t)=>({by:"field",order:t,field:e}),Mt=()=>({by:"qre"}),Pt=()=>({by:"nosort"}),Dt=new It({values:{by:new xt({enum:Ct,required:!0}),order:new xt({enum:kt}),field:new bt}});function Et(){return Rt(Tt())}function _t(){return{}}function $t(){return{}}function Vt(){return Ut({})}function Ut(e){return{context:e.context||Ce(),dictionaryFieldContext:e.dictionaryFieldContext||Te(),facetSet:e.facetSet||Le(),numericFacetSet:e.numericFacetSet||Ye(),dateFacetSet:e.dateFacetSet||ze(),categoryFacetSet:e.categoryFacetSet||$e(),automaticFacetSet:e.automaticFacetSet??_e(),pagination:e.pagination||et(),query:e.query||nt(),tabSet:e.tabSet||$t(),advancedSearchQueries:e.advancedSearchQueries||Y(),staticFilterSet:e.staticFilterSet||_t(),querySet:e.querySet||rt(),sortCriteria:e.sortCriteria||Et(),pipeline:e.pipeline||tt(),searchHub:e.searchHub||it(),facetOptions:e.facetOptions||Ee(),facetOrder:e.facetOrder??Ve(),debug:e.debug??Re()}}function Qt(){return{}}var Nt=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]});function Lt(){return{queries:[],maxLength:10}}function Bt(){return{results:[],maxLength:10}}function zt(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}function Ht(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function Yt(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:Ht(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:Ht(),extendedResults:{}}}function Jt(){return{}}var Wt=()=>({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}});var Gt={};c(Gt,{escape:()=>er,getHighlightedSuggestion:()=>Zt,highlightString:()=>Kt});function Kt(e){if(ie(e.openingDelimiter)||ie(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(dt(e.content)||ie(e.content))return e.content;if(e.highlights.length===0)return er(e.content);let t=e.content.length,r="",n=0;for(let i=0;i<e.highlights.length;i++){let a=e.highlights[i],u=a.offset,o=u+a.length;if(o>t)break;r+=er(e.content.slice(n,u)),r+=e.openingDelimiter,r+=er(e.content.slice(u,o)),r+=e.closingDelimiter,n=o}return n!==t&&(r+=er(e.content.slice(n))),r}function Zt(e,t){return e=er(e),e.replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,((e,r,n,i)=>r?Xt(r,t.notMatchDelimiters):n?Xt(n,t.exactMatchDelimiters):i?Xt(i,t.correctionDelimiters):e))}function Xt(e,t){return t?t.open+e+t.close:e}function er(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return n.test(e)?e.replace(i,(e=>t[e])):e}function tr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rr=typeof Symbol=="function"&&Symbol.observable||"@@observable",nr=rr,ir=()=>Math.random().toString(36).substring(7).split("").join("."),ar={INIT:`@@redux/INIT${ir()}`,REPLACE:`@@redux/REPLACE${ir()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ir()}`},ur=ar;function or(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function sr(e,t,r){if(typeof e!="function")throw new Error(tr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(tr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(tr(1));return r(sr)(e,t)}let n=e,i=t,a=new Map,u=a,o=0,s=!1;function c(){u===a&&(u=new Map,a.forEach(((e,t)=>{u.set(t,e)})))}function l(){if(s)throw new Error(tr(3));return i}function d(e){if(typeof e!="function")throw new Error(tr(4));if(s)throw new Error(tr(5));let t=!0;c();let r=o++;return u.set(r,e),function(){if(t){if(s)throw new Error(tr(6));t=!1,c(),u.delete(r),a=null}}}function f(e){if(!or(e))throw new Error(tr(7));if(typeof e.type>"u")throw new Error(tr(8));if(typeof e.type!="string")throw new Error(tr(17));if(s)throw new Error(tr(9));try{s=!0,i=n(i,e)}finally{s=!1}return(a=u).forEach((e=>{e()})),e}function h(e){if(typeof e!="function")throw new Error(tr(10));n=e,f({type:ur.REPLACE})}function p(){let e=d;return{subscribe(t){if(typeof t!="object"||t===null)throw new Error(tr(11));function r(){let e=t;e.next&&e.next(l())}return r(),{unsubscribe:e(r)}},[nr](){return this}}}return f({type:ur.INIT}),{dispatch:f,subscribe:d,getState:l,replaceReducer:h,[nr]:p}}function cr(e){Object.keys(e).forEach((t=>{let r=e[t];if(typeof r(void 0,{type:ur.INIT})>"u")throw new Error(tr(12));if(typeof r(void 0,{type:ur.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(tr(13))}))}function lr(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let i=t[n];typeof e[i]=="function"&&(r[i]=e[i])}let n=Object.keys(r),i;try{cr(r)}catch(e){i=e}return function(e={},t){if(i)throw i;let a=!1,u={};for(let i=0;i<n.length;i++){let o=n[i],s=r[o],c=e[o],l=s(c,t);if(typeof l>"u"){throw new Error(tr(14))}u[o]=l,a=a||l!==c}return a=a||n.length!==Object.keys(e).length,a?u:e}}function dr(...e){return e.length===0?e=>e:e.length===1?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}function fr(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw new Error(tr(15))},u={getState:i.getState,dispatch:(e,...t)=>a(e,...t)},o=e.map((e=>e(u)));return a=dr(...o)(i.dispatch),{...i,dispatch:a}}}function hr(e){return or(e)&&"type"in e&&typeof e.type=="string"}var pr=Symbol.for("immer-nothing"),gr=Symbol.for("immer-draftable"),yr=Symbol.for("immer-state");function vr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var mr=Object.getPrototypeOf;function wr(e){return!!e&&!!e[yr]}function br(e){return e?Ir(e)||Array.isArray(e)||!!e[gr]||!!e.constructor?.[gr]||Tr(e)||Fr(e):!1}var Sr=Object.prototype.constructor.toString();function Ir(e){if(!e||typeof e!="object")return!1;let t=mr(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Sr}function qr(e){return wr(e)||vr(15,e),e[yr].base_}function Or(e,t){Ar(e)===0?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function Ar(e){let t=e[yr];return t?t.type_:Array.isArray(e)?1:Tr(e)?2:Fr(e)?3:0}function xr(e,t){return Ar(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function kr(e,t){return Ar(e)===2?e.get(t):e[t]}function Cr(e,t,r){let n=Ar(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Rr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Tr(e){return e instanceof Map}function Fr(e){return e instanceof Set}function jr(e){return e.copy_||e.base_}function Mr(e,t){if(Tr(e))return new Map(e);if(Fr(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Ir(e))return mr(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[yr];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){let i=n[t],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(mr(e),r)}function Pr(e,t=!1){return Er(e)||wr(e)||!br(e)||(Ar(e)>1&&(e.set=e.add=e.clear=e.delete=Dr),Object.freeze(e),t&&Or(e,((e,t)=>Pr(t,!0)))),e}function Dr(){vr(2)}function Er(e){return Object.isFrozen(e)}var _r={};function $r(e){let t=_r[e];return t||vr(0,e),t}function Vr(e,t){_r[e]||(_r[e]=t)}var Ur;function Qr(){return Ur}function Nr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Lr(e,t){t&&($r("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Br(e){zr(e),e.drafts_.forEach(Yr),e.drafts_=null}function zr(e){e===Ur&&(Ur=e.parent_)}function Hr(e){return Ur=Nr(Ur,e)}function Yr(e){let t=e[yr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jr(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[yr].modified_&&(Br(t),vr(4)),br(e)&&(e=Wr(t,e),t.parent_||Kr(t,e)),t.patches_&&$r("Patches").generateReplacementPatches_(r[yr].base_,e,t.patches_,t.inversePatches_)):e=Wr(t,r,[]),Br(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pr?e:void 0}function Wr(e,t,r){if(Er(t))return t;let n=t[yr];if(!n)return Or(t,((i,a)=>Gr(e,n,t,i,a,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return Kr(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let t=n.copy_,i=t,a=!1;n.type_===3&&(i=new Set(t),t.clear(),a=!0),Or(i,((i,u)=>Gr(e,n,t,i,u,r,a))),Kr(e,t,!1),r&&e.patches_&&$r("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Gr(e,t,r,n,i,a,u){if(wr(i)){let u=a&&t&&t.type_!==3&&!xr(t.assigned_,n)?a.concat(n):void 0,o=Wr(e,i,u);if(Cr(r,n,o),wr(o))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(br(i)&&!Er(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Wr(e,i),(!t||!t.scope_.parent_)&&Kr(e,i)}}function Kr(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pr(t,r)}function Zr(e,t){let r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Qr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=Xr;r&&(i=[n],a=en);let{revoke:u,proxy:o}=Proxy.revocable(i,a);return n.draft_=o,n.revoke_=u,o}var Xr={get(e,t){if(t===yr)return e;let r=jr(e);if(!xr(r,t))return rn(e,r,t);let n=r[t];return e.finalized_||!br(n)?n:n===tn(e.base_,t)?(un(e),e.copy_[t]=sn(n,e)):n},has(e,t){return t in jr(e)},ownKeys(e){return Reflect.ownKeys(jr(e))},set(e,t,r){let n=nn(jr(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=tn(jr(e),t),i=n?.[yr];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Rr(r,n)&&(r!==void 0||xr(e.base_,t)))return!0;un(e),an(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,un(e),an(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=jr(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){vr(11)},getPrototypeOf(e){return mr(e.base_)},setPrototypeOf(){vr(12)}},en={};Or(Xr,((e,t)=>{en[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}));en.deleteProperty=function(e,t){return en.set.call(this,e,t,void 0)};en.set=function(e,t,r){return Xr.set.call(this,e[0],t,r,e[0])};function tn(e,t){let r=e[yr];return(r?jr(r):e)[t]}function rn(e,t,r){let n=nn(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function nn(e,t){if(!(t in e))return;let r=mr(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=mr(r)}}function an(e){e.modified_||(e.modified_=!0,e.parent_&&an(e.parent_))}function un(e){e.copy_||(e.copy_=Mr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var on=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if(typeof e=="function"&&typeof t!="function"){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,(e=>t.call(this,e,...i)))}}typeof t!="function"&&vr(6),r!==void 0&&typeof r!="function"&&vr(7);let n;if(br(e)){let i=Hr(this),a=sn(e,void 0),u=!0;try{n=t(a),u=!1}finally{u?Br(i):zr(i)}return Lr(i,r),Jr(n,i)}else if(!e||typeof e!="object"){if(n=t(e),n===void 0&&(n=e),n===pr&&(n=void 0),this.autoFreeze_&&Pr(n,!0),r){let t=[],i=[];$r("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}else vr(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){br(e)||vr(8),wr(e)&&(e=cn(e));let t=Hr(this),r=sn(e,void 0);return r[yr].isManual_=!0,zr(t),r}finishDraft(e,t){let r=e&&e[yr];(!r||!r.isManual_)&&vr(9);let{scope_:n}=r;return Lr(n,t),Jr(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=$r("Patches").applyPatches_;return wr(e)?n(e,t):this.produce(e,(e=>n(e,t)))}};function sn(e,t){let r=Tr(e)?$r("MapSet").proxyMap_(e,t):Fr(e)?$r("MapSet").proxySet_(e,t):Zr(e,t);return(t?t.scope_:Qr()).drafts_.push(r),r}function cn(e){return wr(e)||vr(10,e),ln(e)}function ln(e){if(!br(e)||Er(e))return e;let t=e[yr],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Mr(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Mr(e,!0);return Or(r,((e,t)=>{Cr(r,e,ln(t))})),t&&(t.finalized_=!1),r}function dn(){let e="replace",t="add",r="remove";function n(e,t,r,n){switch(e.type_){case 0:case 2:return a(e,t,r,n);case 1:return i(e,t,r,n);case 3:return u(e,t,r,n)}}function i(n,i,a,u){let{base_:o,assigned_:s}=n,c=n.copy_;c.length<o.length&&([o,c]=[c,o],[a,u]=[u,a]);for(let t=0;t<o.length;t++)if(s[t]&&c[t]!==o[t]){let r=i.concat([t]);a.push({op:e,path:r,value:l(c[t])}),u.push({op:e,path:r,value:l(o[t])})}for(let e=o.length;e<c.length;e++){let r=i.concat([e]);a.push({op:t,path:r,value:l(c[e])})}for(let e=c.length-1;o.length<=e;--e){let t=i.concat([e]);u.push({op:r,path:t})}}function a(n,i,a,u){let{base_:o,copy_:s}=n;Or(n.assigned_,((n,c)=>{let d=kr(o,n),f=kr(s,n),h=c?xr(o,n)?e:t:r;if(d===f&&h===e)return;let p=i.concat(n);a.push(h===r?{op:h,path:p}:{op:h,path:p,value:f}),u.push(h===t?{op:r,path:p}:h===r?{op:t,path:p,value:l(d)}:{op:e,path:p,value:l(d)})}))}function u(e,n,i,a){let{base_:u,copy_:o}=e,s=0;u.forEach((e=>{if(!o.has(e)){let u=n.concat([s]);i.push({op:r,path:u,value:e}),a.unshift({op:t,path:u,value:e})}s++})),s=0,o.forEach((e=>{if(!u.has(e)){let u=n.concat([s]);i.push({op:t,path:u,value:e}),a.unshift({op:r,path:u,value:e})}s++}))}function o(t,r,n,i){n.push({op:e,path:[],value:r===pr?void 0:r}),i.push({op:e,path:[],value:t})}function s(n,i){return i.forEach((i=>{let{path:a,op:u}=i,o=n;for(let e=0;e<a.length-1;e++){let t=Ar(o),r=a[e];typeof r!="string"&&typeof r!="number"&&(r=""+r),(t===0||t===1)&&(r==="__proto__"||r==="constructor")&&vr(19),typeof o=="function"&&r==="prototype"&&vr(19),o=kr(o,r),typeof o!="object"&&vr(18,a.join("/"))}let s=Ar(o),l=c(i.value),d=a[a.length-1];switch(u){case e:switch(s){case 2:return o.set(d,l);case 3:vr(16);default:return o[d]=l}case t:switch(s){case 1:return d==="-"?o.push(l):o.splice(d,0,l);case 2:return o.set(d,l);case 3:return o.add(l);default:return o[d]=l}case r:switch(s){case 1:return o.splice(d,1);case 2:return o.delete(d);case 3:return o.delete(i.value);default:return delete o[d]}default:vr(17,u)}})),n}function c(e){if(!br(e))return e;if(Array.isArray(e))return e.map(c);if(Tr(e))return new Map(Array.from(e.entries()).map((([e,t])=>[e,c(t)])));if(Fr(e))return new Set(Array.from(e).map(c));let t=Object.create(mr(e));for(let r in e)t[r]=c(e[r]);return xr(e,gr)&&(t[gr]=e[gr]),t}function l(e){return wr(e)?c(e):e}Vr("Patches",{applyPatches_:s,generatePatches_:n,generateReplacementPatches_:o})}var fn=new on,hn=fn.produce,pn=fn.produceWithPatches.bind(fn);fn.setAutoFreeze.bind(fn);fn.setUseStrictShallowCopy.bind(fn);var gn=fn.applyPatches.bind(fn);fn.createDraft.bind(fn);fn.finishDraft.bind(fn);function yn(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vn(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function mn(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>typeof e=="function"))){let r=e.map((e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}var wn=e=>Array.isArray(e)?e:[e];function bn(e){let t=Array.isArray(e[0])?e[0]:e;return mn(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Sn(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var In=class{constructor(e){this.value=e}deref(){return this.value}},qn=typeof WeakRef<"u"?WeakRef:In,On=0,An=1;function xn(){return{s:On,v:void 0,o:null,p:null}}function kn(e,t={}){let r=xn(),{resultEqualityCheck:n}=t,i,a=0;function u(){let t=r,{length:u}=arguments;for(let e=0,r=u;e<r;e++){let r=arguments[e];if(typeof r=="function"||typeof r=="object"&&r!==null){let e=t.o;e===null&&(t.o=e=new WeakMap);let n=e.get(r);n===void 0?(t=xn(),e.set(r,t)):t=n}else{let e=t.p;e===null&&(t.p=e=new Map);let n=e.get(r);n===void 0?(t=xn(),e.set(r,t)):t=n}}let o=t,s;if(t.s===An?s=t.v:(s=e.apply(null,arguments),a++),o.s=An,n){let e=i?.deref?.()??i;e!=null&&n(e,s)&&(s=e,a!==0&&a--),i=typeof s=="object"&&s!==null||typeof s=="function"?new qn(s):s}return o.v=s,s}return u.clearCache=()=>{r=xn(),u.resetResultsCount()},u.resultsCount=()=>a,u.resetResultsCount=()=>{a=0},u}function Cn(e,...t){let r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t=0,n=0,i,a={},u=e.pop();typeof u=="object"&&(a=u,u=e.pop()),yn(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);let o={...r,...a},{memoize:s,memoizeOptions:c=[],argsMemoize:l=kn,argsMemoizeOptions:d=[],devModeChecks:f={}}=o,h=wn(c),p=wn(d),g=bn(e),y=s((function(){return t++,u.apply(null,arguments)}),...h),v=l((function(){n++;let e=Sn(g,arguments);return i=y.apply(null,e),i}),...p);return Object.assign(v,{resultFunc:u,memoizedResultFunc:y,dependencies:g,dependencyRecomputations:()=>n,resetDependencyRecomputations:()=>{n=0},lastResult:()=>i,recomputations:()=>t,resetRecomputations:()=>{t=0},memoize:s,argsMemoize:l})};return Object.assign(n,{withTypes:()=>n}),n}var Rn=Cn(kn),Tn=Object.assign(((e,t=Rn)=>{vn(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e),n=r.map((t=>e[t]));return t(n,((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>Tn});function Fn(e){return({dispatch:t,getState:r})=>n=>i=>typeof i=="function"?i(t,r,e):n(i)}var jn=Fn(),Mn=Fn;var Pn=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dr:dr.apply(null,arguments)},Dn=e=>e&&typeof e.match=="function";function En(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(ji(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>hr(t)&&t.type===e,r}var _n=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function $n(e){return br(e)?hn(e,(()=>{})):e}function Vn(e,t,r){if(e.has(t)){let n=e.get(t);return r.update&&(n=r.update(n,t,e),e.set(t,n)),n}if(!r.insert)throw new Error(ji(10));let n=r.insert(t,e);return e.set(t,n),n}function Un(e){return typeof e=="boolean"}var Qn=()=>function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new _n;return t&&(Un(t)?a.push(jn):a.push(Mn(t.extraArgument))),a},Nn="RTK_autoBatch",Ln=()=>e=>({payload:e,meta:{[Nn]:!0}}),Bn=e=>t=>{setTimeout(t,e)},zn=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Bn(10),Hn=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,u=!1,o=new Set,s=e.type==="tick"?queueMicrotask:e.type==="raf"?zn:e.type==="callback"?e.queueNotification:Bn(e.timeout),c=()=>{u=!1,a&&(a=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){let t=()=>i&&e(),r=n.subscribe(t);return o.add(e),()=>{r(),o.delete(e)}},dispatch(e){try{return i=!e?.meta?.[Nn],a=!i,a&&(u||(u=!0,s(c))),n.dispatch(e)}finally{i=!0}}})},Yn=e=>function(t){let{autoBatch:r=!0}=t??{},n=new _n(e);return r&&n.push(Hn(typeof r=="object"?r:void 0)),n};function Jn(e){let t=Qn(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:u=void 0}=e||{},o;if(typeof r=="function")o=r;else if(or(r))o=lr(r);else throw new Error(ji(1));let s;typeof n=="function"?s=n(t):s=t();let c=dr;i&&(c=Pn({trace:!1,...typeof i=="object"&&i}));let l=fr(...s),d=Yn(l),f=typeof u=="function"?u(d):d(),h=c(...f);return sr(o,a,h)}function Wn(e){let t={},r=[],n,i={addCase(e,r){let n=typeof e=="string"?e:e.type;if(!n)throw new Error(ji(28));if(n in t)throw new Error(ji(29));return t[n]=r,i},addMatcher(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase(e){return n=e,i}};return e(i),[t,r,n]}function Gn(e){return typeof e=="function"}function Kn(e,t){let[r,n,i]=Wn(t),a;if(Gn(e))a=()=>$n(e());else{let t=$n(e);a=()=>t}function u(e=a(),t){let u=[r[t.type],...n.filter((({matcher:e})=>e(t))).map((({reducer:e})=>e))];return u.filter((e=>!!e)).length===0&&(u=[i]),u.reduce(((e,r)=>{if(r)if(wr(e)){let n=r(e,t);return n===void 0?e:n}else{if(br(e))return hn(e,(e=>r(e,t)));{let n=r(e,t);if(n===void 0){if(e===null)return e;throw new Error(ji(9))}return n}}return e}),e)}return u.getInitialState=a,u}var Zn=(e,t)=>Dn(e)?e.match(t):e(t);function Xn(...e){return t=>e.some((e=>Zn(e,t)))}function ei(...e){return t=>e.every((e=>Zn(e,t)))}function ti(e,t){if(!e||!e.meta)return!1;let r=typeof e.meta.requestId=="string",n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function ri(e){return typeof e[0]=="function"&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function ni(...e){return e.length===0?e=>ti(e,["pending"]):ri(e)?Xn(...e.map((e=>e.pending))):ni()(e[0])}function ii(...e){return e.length===0?e=>ti(e,["rejected"]):ri(e)?Xn(...e.map((e=>e.rejected))):ii()(e[0])}function ai(...e){let t=e=>e&&e.meta&&e.meta.rejectedWithValue;return e.length===0?ei(ii(...e),t):ri(e)?ei(ii(...e),t):ai()(e[0])}function ui(...e){return e.length===0?e=>ti(e,["fulfilled"]):ri(e)?Xn(...e.map((e=>e.fulfilled))):ui()(e[0])}function oi(...e){return e.length===0?e=>ti(e,["pending","fulfilled","rejected"]):ri(e)?Xn(...e.flatMap((e=>[e.pending,e.rejected,e.fulfilled]))):oi()(e[0])}var si="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ci=(e=21)=>{let t="",r=e;for(;r--;)t+=si[Math.random()*64|0];return t},li=["name","message","stack","code"],di=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},fi=class{constructor(e,t){f(this,"_type");this.payload=e,this.meta=t}},hi=e=>{if(typeof e=="object"&&e!==null){let t={};for(let r of li)typeof e[r]=="string"&&(t[r]=e[r]);return t}return{message:String(e)}},pi=(()=>{function e(e,t,r){let n=En(e+"/fulfilled",((e,t,r,n)=>({payload:e,meta:{...n||{},arg:r,requestId:t,requestStatus:"fulfilled"}}))),i=En(e+"/pending",((e,t,r)=>({payload:void 0,meta:{...r||{},arg:t,requestId:e,requestStatus:"pending"}}))),a=En(e+"/rejected",((e,t,n,i,a)=>({payload:i,error:(r&&r.serializeError||hi)(e||"Rejected"),meta:{...a||{},arg:n,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:e?.name==="AbortError",condition:e?.name==="ConditionError"}})));function u(e){return(u,o,s)=>{let c=r?.idGenerator?r.idGenerator(e):ci(),l=new AbortController,d,f;function h(e){f=e,l.abort()}let p=async function(){let p;try{let a=r?.condition?.(e,{getState:o,extra:s});if(yi(a)&&(a=await a),a===!1||l.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};let g=new Promise(((e,t)=>{d=()=>{t({name:"AbortError",message:f||"Aborted"})},l.signal.addEventListener("abort",d)}));u(i(c,e,r?.getPendingMeta?.({requestId:c,arg:e},{getState:o,extra:s}))),p=await Promise.race([g,Promise.resolve(t(e,{dispatch:u,getState:o,extra:s,requestId:c,signal:l.signal,abort:h,rejectWithValue:(e,t)=>new di(e,t),fulfillWithValue:(e,t)=>new fi(e,t)})).then((t=>{if(t instanceof di)throw t;return t instanceof fi?n(t.payload,c,e,t.meta):n(t,c,e)}))])}catch(t){p=t instanceof di?a(null,c,e,t.payload,t.meta):a(t,c,e)}finally{d&&l.signal.removeEventListener("abort",d)}return r&&!r.dispatchConditionRejection&&a.match(p)&&p.meta.condition||u(p),p}();return Object.assign(p,{abort:h,requestId:c,arg:e,unwrap(){return p.then(gi)}})}}return Object.assign(u,{pending:i,rejected:a,fulfilled:n,settled:Xn(a,n),typePrefix:e})}return e.withTypes=()=>e,e})();function gi(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function yi(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var vi=Symbol.for("rtk-slice-createasyncthunk");function mi(e,t){return`${e}/${t}`}function wi({creators:e}={}){let t=e?.asyncThunk?.[vi];return function(e){let{name:r,reducerPath:n=r}=e;if(!r)throw new Error(ji(11));let i=(typeof e.reducers=="function"?e.reducers(Ii()):e.reducers)||{},a=Object.keys(i),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){let r=typeof e=="string"?e:e.type;if(!r)throw new Error(ji(12));if(r in u.sliceCaseReducersByType)throw new Error(ji(13));return u.sliceCaseReducersByType[r]=t,o},addMatcher(e,t){return u.sliceMatchers.push({matcher:e,reducer:t}),o},exposeAction(e,t){return u.actionCreators[e]=t,o},exposeCaseReducer(e,t){return u.sliceCaseReducersByName[e]=t,o}};a.forEach((n=>{let a=i[n],u={reducerName:n,type:mi(r,n),createNotation:typeof e.reducers=="function"};Oi(a)?xi(u,a,o,t):qi(u,a,o)}));function s(){let[t={},r=[],n=void 0]=typeof e.extraReducers=="function"?Wn(e.extraReducers):[e.extraReducers],i={...t,...u.sliceCaseReducersByType};return Kn(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of u.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)}))}let c=e=>e,l=new Map,d;function f(e,t){return d||(d=s()),d(e,t)}function h(){return d||(d=s()),d.getInitialState()}function p(t,r=!1){function n(e){let n=e[t];return typeof n>"u"&&r&&(n=h()),n}function i(t=c){let n=Vn(l,r,{insert:()=>new WeakMap});return Vn(n,t,{insert:()=>{let n={};for(let[i,a]of Object.entries(e.selectors??{}))n[i]=bi(a,t,h,r);return n}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}let g={name:r,reducer:f,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:h,...p(n),injectInto(e,{reducerPath:t,...r}={}){let i=t??n;return e.inject({reducerPath:i,reducer:f},r),{...g,...p(i,!0)}}};return g}}function bi(e,t,r,n){function i(i,...a){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...a)}return i.unwrapped=e,i}var Si=wi();function Ii(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:e}}function qi({type:e,reducerName:t,createNotation:r},n,i){let a,u;if("reducer"in n){if(r&&!Ai(n))throw new Error(ji(17));a=n.reducer,u=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,u?En(e,u):En(e))}function Oi(e){return e._reducerDefinitionType==="asyncThunk"}function Ai(e){return e._reducerDefinitionType==="reducerWithPrepare"}function xi({type:e,reducerName:t},r,n,i){if(!i)throw new Error(ji(18));let{payloadCreator:a,fulfilled:u,pending:o,rejected:s,settled:c,options:l}=r,d=i(e,a,l);n.exposeAction(t,d),u&&n.addCase(d.fulfilled,u),o&&n.addCase(d.pending,o),s&&n.addCase(d.rejected,s),c&&n.addMatcher(d.settled,c),n.exposeCaseReducer(t,{fulfilled:u||ki,pending:o||ki,rejected:s||ki,settled:c||ki})}function ki(){}var{assign:Ci}=Object;var Ri="listenerMiddleware";var Ti=Ci(En(`${Ri}/add`),{withTypes:()=>Ti});En(`${Ri}/removeAll`);var Fi=Ci(En(`${Ri}/remove`),{withTypes:()=>Fi});function ji(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}async function Mi(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function Pi(e){let t,r,n,i=!1;return function(a){t===void 0?(t=a,r=0,n=-1):t=Ei(t,a);let u=t.length,o=0;for(;r<u;){i&&(t[r]===10&&(o=++r),i=!1);let a=-1;for(;r<u&&a===-1;++r)switch(t[r]){case 58:n===-1&&(n=r-o);break;case 13:i=!0;case 10:a=r;break}if(a===-1)break;e(t.subarray(o,a),n),o=r,n=-1}o===u?t=void 0:o!==0&&(t=t.subarray(o),r-=o)}}function Di(e,t,r){let n=_i(),i=new TextDecoder;return function(a,u){if(a.length===0)r?.(n),n=_i();else if(u>0){let r=i.decode(a.subarray(0,u)),o=u+(a[u+1]===32?2:1),s=i.decode(a.subarray(o));switch(r){case"data":n.data=n.data?n.data+`\n`+s:s;break;case"event":n.event=s;break;case"id":e(n.id=s);break;case"retry":let r=parseInt(s,10);isNaN(r)||t(n.retry=r);break}}}}function Ei(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function _i(){return{data:"",event:"",id:"",retry:void 0}}var $i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r},Vi="text/event-stream",Ui=1e3,Qi="last-event-id";function Ni(){}function Li(e,t){var{signal:r,headers:n,onopen:i,onmessage:a,onclose:u,onerror:o,openWhenHidden:s,fetch:c}=t,l=$i(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,d)=>{let f=Object.assign({},n);f.accept||(f.accept=Vi);let h;function p(){h?.abort(),document.hidden||b()}!s&&Ni()&&document.addEventListener("visibilitychange",p);let g=Ui,y=0;function v(){Ni()&&document.removeEventListener("visibilitychange",p),clearTimeout(y),h?.abort()}r?.addEventListener("abort",(()=>{v(),t()}));let m=c??m,w=i??Bi;async function b(){var r;h=typeof AbortController>"u"?null:new AbortController;try{let r=await m(e,Object.assign(Object.assign({},l),{headers:f,signal:h?.signal}));await w(r),await Mi(r.body,Pi(Di((e=>{e?f[Qi]=e:delete f[Qi]}),(e=>{g=e}),a))),u?.(),v(),t()}catch(e){if(!h?.signal.aborted)try{let t=(r=o?.(e))!==null&&r!==void 0?r:g;clearTimeout(y),y=setTimeout(b,t)}catch(e){v(),d(e)}}}b()}))}function Bi(e){let t=e.headers.get("content-type");if(!t?.startsWith(Vi))throw new Error(`Expected content-type to be ${Vi}, Actual: ${t}`)}function zi(){if(typeof window>"u"){let{AbortController:e}=F();return new e}return typeof AbortController>"u"?null:new AbortController}var Hi=class{constructor(e){this._params={};this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&")}`:this.basePath}},Yi=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),Ji=(e,t)=>{let r=Wi(e);return r&&r.organizationId===t?r:null},Wi=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return t?.groups?t.groups:null};var Gi=(e,t,r)=>new Hi(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,Ki=3,Zi=5e3,Xi="text/event-stream",ea=1,ta=class extends Error{},ra=class extends Error{constructor(e){super(e.message);this.payload=e}},na=class{constructor(){this.timeouts=new Set}add(e){this.timeouts.add(e)}remove(e){clearTimeout(e),this.timeouts.delete(e)}isActive(e){return this.timeouts.has(e)}},ia=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:i,accessToken:a}=e,{write:u,abort:o,close:s,resetAnswer:c}=t,l=new na;if(!i){this.logger.error("No stream ID found");return}let d=0,f,h=()=>{f&&!l.isActive(f)&&(g?.abort(),c(),y())},p=()=>{l.remove(f),f=fe(h,f,Zi),l.add(f)},g=zi(),y=()=>Li(Gi(r,n,i),{method:"GET",fetch,headers:{Authorization:`Bearer ${a}`,accept:"*/*"},openWhenHidden:!0,signal:g?.signal,async onopen(e){if(e.ok&&e.headers.get("content-type")===Xi)return;throw e.status>=400&&e.status<500&&e.status!==429?new ra({message:"Error opening stream",code:e.status}):new ta},onmessage:e=>{if(g?.signal.aborted)return;let t=JSON.parse(e.data);if(t.finishReason==="ERROR"){l.remove(f),g?.abort(),o({message:t.errorMessage,code:t.statusCode});return}u(t),d=0,t.finishReason==="COMPLETED"?(l.remove(f),s()):p()},onerror:e=>{if(!g?.signal.aborted){if(l.remove(f),e instanceof ra)throw g?.abort(),o(e),e;if(++d>Ki){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:ea};throw g?.abort(),o(e),new ra(e)}this.logger.info(`Retrying...(${d}/${Ki})`),c()}}});return y(),g}};var aa=e=>e;function ua(e){let{url:t,accessToken:r,organizationId:n,authentication:i,...a}=e;return a}var oa=e=>{let{response:t}=e;return t.body?sa(e):ca(t)},sa=e=>da(e)?fa(e):la(e)?e.body:{message:"unknown",statusCode:0,type:"unknown"},ca=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}};function la(e){return e.body.statusCode!==void 0}function da(e){return e.body.exception!==void 0}var fa=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});var ha=class{constructor(){this.currentAbortController=null}async enqueue(e,t){let r=this.currentAbortController,n=this.currentAbortController=zi();r&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),r.abort());try{return await e(n?.signal??null)}finally{this.currentAbortController===n&&(this.currentAbortController=null)}}};function pa(e){return((e.headers.get("content-type")||"").split(";").find((e=>e.indexOf("charset=")!==-1))||"").split("=")[1]||"UTF-8"}var ga=(e,t,r,n)=>{let i=new Hi(`${e.url}${n}`);return i.addParam("organizationId",e.organizationId),e.authentication&&i.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:i.href,origin:"searchApiFetch"}};var ya=(e,t)=>{let r=new Hi(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),e.q!==void 0&&r.addParam("q",e.q),e.enableNavigation!==void 0&&r.addParam("enableNavigation",`${e.enableNavigation}`),e.requestedOutputSize!==void 0&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),e.visitorId!==void 0&&r.addParam("visitorId",`${e.visitorId}`),r.href},va=async(e,t)=>{let r=await me.call({...ga(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:ua(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=pa(r),i=await r.arrayBuffer(),a=new TextDecoder(n).decode(i);return ma(a)?{success:a}:{error:oa({response:r,body:a})}};function ma(e){return typeof e=="string"}function wa(e){return{statusCode:e.statusCode,type:e.name,message:e.message}}function ba(e){return{statusCode:e.code,type:e.name,message:e.message,ignored:!0}}function Sa(e,t){if(t&&e.name==="AbortError")return{error:ba(e)};if(e instanceof ee)return{error:wa(e)};throw e}var Ia=class{constructor(e){this.options=e;this.apiCallsQueues={unknown:new ha,mainSearch:new ha,facetValues:new ha,foldingCollection:new ha,instantResults:new ha}}async plan(e){let t=await me.call({...ga(e,"POST","application/json","/plan"),requestParams:ua(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return Sa(t);let r=await t.json();return Ca(r)?{success:r}:{error:oa({response:t,body:r})}}async querySuggest(e){let t=await me.call({...ga(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:ua(e),...this.options});if(t instanceof Error)return Sa(t);let r=await t.json(),n={response:t,body:r};return ka(r)?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:oa(n)}}async search(e,t){let r=t?.origin??"unknown",n=await this.apiCallsQueues[r].enqueue((r=>me.call({...ga(e,"POST","application/json",""),requestParams:ua(e),requestMetadata:{method:"search",origin:t?.origin},...this.options,signal:r??void 0})),{logger:this.options.logger,warnOnAbort:!t?.disableAbortWarning});if(n instanceof Error)return Sa(n,t?.disableAbortWarning);let i=await n.json(),a={response:n,body:i};return Aa(i)?(a.body=xa(i),{success:(await this.options.postprocessSearchResponseMiddleware(a)).body}):{error:oa(a)}}async facetSearch(e){let t=await me.call({...ga(e,"POST","application/json","/facet"),requestParams:ua(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json(),n={response:t,body:r};return(await this.options.postprocessFacetSearchResponseMiddleware(n)).body}async recommendations(e){let t=await me.call({...ga(e,"POST","application/json",""),requestParams:ua(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();if(Aa(r)){let e={response:t,body:r};return e.body=xa(r),{success:(await this.options.postprocessSearchResponseMiddleware(e)).body}}return{error:oa({response:t,body:r})}}async html(e){return va(e,{...this.options})}async productRecommendations(e){let t=await me.call({...ga(e,"POST","application/json",""),requestParams:ua(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Aa(r)?{success:r}:{error:oa({response:t,body:r})}}async fieldDescriptions(e){let t=await me.call({...ga(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return Ra(r)?{success:r}:{error:oa({response:t,body:r})}}},qa=e=>e.success!==void 0,Oa=e=>e.error!==void 0;function Aa(e){return e.results!==void 0}function xa(e){let t=Ht();return dt(e.questionAnswer)?(e.questionAnswer=t,e):(e.questionAnswer={...t,...e.questionAnswer},e)}function ka(e){return e.completions!==void 0}function Ca(e){return e.preprocessingOutput!==void 0}function Ra(e){return e.fields!==void 0}var Ta=e=>e,Fa=e=>e,ja=e=>e;var Ma=new bt({required:!0,emptyAllowed:!1}),Pa=new bt({required:!1,emptyAllowed:!1}),Da=new bt({required:!0,emptyAllowed:!0}),Ea=new bt({required:!1,emptyAllowed:!0}),_a=new Ot({each:Ma,required:!0}),$a=new bt({required:!1,emptyAllowed:!1,regex:/^\d+\.\d+\.\d+$/}),Va=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),Ua=(e,t)=>{if("required"in t)return{payload:new ot({value:t}).validate({value:e}).value};let r=new It({options:{required:!0},values:t}).validate(e);if(r)throw new ut(r);return{payload:e}},Qa=(e,t)=>{try{return Ua(e,t)}catch(t){return{payload:e,error:Va(t)}}},Na=(e,t,r,n)=>{let i=`Check the initialState of ${n}`;return Ba(e,t,r,i,"Controller initialization error")},La=(e,t,r,n)=>{let i=`Check the options of ${n}`;return Ba(e,t,r,i,"Controller initialization error")},Ba=(e,t,r,n,i)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,i),t}};function za({config:e,environment:t,event:r,listenerManager:n}){let{url:i,token:a,mode:u}=e;u!=="disabled"&&(n.call(r),t.send(i,a,r))}var Ha=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ya(e){return typeof e=="string"&&Ha.test(e)}function Ja(e){return{getClientId:()=>{let t="visitorId",r=e.get(),n=r.storage,i=n.getItem(t),a=i&&Ya(i)?i:r.generateUUID();return n.setItem(t,a),a}}}var Wa="0.7.10";function Ga(e){let{trackingId:t}=e;return{trackingId:t}}function Ka(e){return(e.source||[]).concat([`relay@${Wa}`])}function Za(e,t,r,n){let{getReferrer:i,getLocation:a,getUserAgent:u}=r,o=Ga(t),s=n.getClientId();return Object.freeze({type:e,config:o,ts:Date.now(),source:Ka(t),clientId:s,userAgent:u(),referrer:i(),location:a()})}function Xa(e,t,r,n,i){return{...t,meta:Za(e,r,n,i)}}var eu="*";function tu(){let e=[];function t({type:t,callback:r}){return e.findIndex((e=>e.type===t&&e.callback===r))}function r(e,t){return e.type==="*"||t===e.type}function n(r){return t(r)<0&&e.push(r),()=>o(r.type,r.callback)}function i(t){e.forEach((e=>{if(r(e,t.meta.type))try{e.callback(t)}catch(e){console.error(e)}}))}function a(t){if(t===eu)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}function u(r){let n=t(r);n>=0&&e.splice(n,1)}function o(e,t){t?u({type:e,callback:t}):a(e)}return{add:n,call:i,remove:o}}function ru({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}function nu(e){let t=ru(e);return{get:()=>t,update:e=>{t=ru({...t,...e})}}}function iu(){let e=typeof window<"u";return{sendMessage(t){e&&window.postMessage(t,"*")}}}var au=uu();function uu(){let e="coveo_",t=e=>{let t=e.split(".").slice(-2);return t.length==2?t.join("."):""};return{getItem(t){let r=`${e}${t}=`,n=document.cookie.split(";");for(let e of n){let t=e.replace(/^\s+/,"");if(t.lastIndexOf(r,0)===0)return t.substring(r.length,t.length)}return null},setItem(r,n,i){let a=t(window.location.hostname),u=`;expires=${new Date((new Date).getTime()+i).toUTCString()}`,o=a?`;domain=${a}`:"";document.cookie=`${e}${r}=${n}${u}${o};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}}}function ou(){return{getItem(e){return au.getItem(e)||localStorage.getItem(e)},removeItem(e){au.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),au.setItem(e,t,31556952e3)}}}function su(){let e=document.referrer;return e===""?null:e}function cu(){return{runtime:"browser",send:(e,t,r)=>{let n=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if(iu().sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!n)throw new Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>su(),getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:ou()}}function lu(){try{let e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return e instanceof DOMException&&e.name==="QuotaExceededError"&&localStorage&&localStorage.length!==0}}function du(){return{getItem(){return null},removeItem(){},setItem(){}}}function fu(){return{runtime:"null",send:()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:du()}}function hu(e){return e.get().mode!=="disabled"&&pu()&&lu()?cu():fu()}function pu(){try{return typeof window=="object"}catch{return!1}}function gu(e){return{get:()=>Object.freeze(hu(e))}}function yu(e){let t=nu(e),r=tu(),n=gu(t),i=Ja(n);return{emit:(e,a)=>{let u=t.get(),o=n.get(),s=Xa(e,a,u,o,i);return za({config:u,environment:o,event:s,listenerManager:r})},getMeta:e=>Za(e,t.get(),n.get(),i),on:(e,t)=>r.add({type:e,callback:t}),off:(e,t)=>r.remove(e,t),updateConfig:e=>t.update(e),version:Wa}}var vu="2.80.5",mu=["@coveo/atomic","@coveo/quantic"];var wu=Rn((e=>e.source),(e=>Object.entries(e).map((([e,t])=>`${e}@${t}`)).concat(`@coveo/headless@${vu}`)));var bu=Rn((e=>e.configuration.accessToken),(e=>e.configuration.analytics),(e=>wu(e.configuration.analytics)),((e,{trackingId:t,nextApiBaseUrl:r,enabled:n},i)=>yu({mode:n?"emit":"disabled",url:r,token:e,trackingId:t,source:i})));function Su(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Iu(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,a){function u(e){try{s(n.next(e))}catch(e){a(e)}}function o(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):i(e.value).then(u,o)}s((n=n.apply(e,t||[])).next())}))}var qu;(function(e){e.search="search",e.click="click",e.custom="custom",e.view="view",e.collect="collect"})(qu||(qu={}));function Ou(){return typeof window<"u"}function Au(){return typeof navigator<"u"}function xu(){return typeof document<"u"}function ku(){try{return typeof localStorage<"u"}catch{return!1}}function Cu(){try{return typeof sessionStorage<"u"}catch{return!1}}function Ru(){return Au()&&navigator.cookieEnabled}var Tu=[qu.click,qu.custom,qu.search,qu.view],Fu=(e,t)=>Tu.indexOf(e)!==-1?Object.assign({language:xu()?document.documentElement.lang:"unknown",userAgent:Au()?navigator.userAgent:"unknown"},t):t,ju=class e{static set(e,t,r){var n,i,a,u;r&&(i=new Date,i.setTime(i.getTime()+r)),u=window.location.hostname,u.indexOf(".")===-1?Mu(e,t,i):(a=u.split("."),n=a[a.length-2]+"."+a[a.length-1],Mu(e,t,i,n))}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var i=r[n];if(i=i.replace(/^\s+/,""),i.lastIndexOf(t,0)===0)return i.substring(t.length,i.length)}return null}static erase(t){e.set(t,"",-1)}};function Mu(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}function Pu(){return ku()?localStorage:Ru()?new Du:Cu()?sessionStorage:new _u}var Du=class e{getItem(t){return ju.get(`${e.prefix}${t}`)}removeItem(t){ju.erase(`${e.prefix}${t}`)}setItem(t,r,n){ju.set(`${e.prefix}${t}`,r,n)}};Du.prefix="coveo_";var Eu=class{constructor(){this.cookieStorage=new Du}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},_u=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},$u="__coveo.analytics.history",Vu=20,Uu=1e3*60,Qu=75,Nu=class{constructor(e){this.store=e||Pu()}addElement(e){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return Iu(this,void 0,void 0,(function*(){e.internalTime=(new Date).getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();t!=null?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}))}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return Iu(this,void 0,void 0,(function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))}))}getHistoryWithInternalTime(){try{let e=this.store.getItem($u);return e&&typeof e=="string"?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return Iu(this,void 0,void 0,(function*(){try{let e=yield this.store.getItem($u);return e?JSON.parse(e):[]}catch{return[]}}))}setHistory(e){try{this.store.setItem($u,JSON.stringify(e.slice(0,Vu)))}catch{}}clear(){try{this.store.removeItem($u)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort(((e,t)=>(t.internalTime||0)-(e.internalTime||0)))[0]:null}cropQueryElement(e){return e.name&&e.value&&e.name.toLowerCase()==="query"&&(e.value=e.value.slice(0,Qu)),e}isValidEntry(e){let t=this.getMostRecentElement();return t&&t.value==e.value?(e.internalTime||0)-(t.internalTime||0)>Uu:!0}stripInternalTime(e){return Array.isArray(e)?e.map((e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}})):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&typeof n=="string"&&t.toLowerCase()==="query"&&n.trim()===""?{name:t,time:r}:e}stripEmptyQueries(e){return e.map((e=>this.stripEmptyQuery(e)))}},Lu=Object.freeze({__proto__:null,HistoryStore:Nu,MAX_NUMBER_OF_HISTORY_ELEMENTS:Vu,MAX_VALUE_SIZE:Qu,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:Uu,STORE_KEY:$u,default:Nu}),Bu=(e,t)=>Iu(void 0,void 0,void 0,(function*(){return e===qu.view?(yield zu(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t})),zu=e=>Iu(void 0,void 0,void 0,(function*(){let t=new Nu,r={name:"PageView",value:e,time:(new Date).toISOString()};yield t.addElementAsync(r)})),Hu,Yu=new Uint8Array(16);function Ju(){if(!Hu&&(Hu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hu(Yu)}var Wu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gu(e){return typeof e=="string"&&Wu.test(e)}var Ku=[];for(let e=0;e<256;++e)Ku.push((e+256).toString(16).slice(1));function Zu(e,t=0){return(Ku[e[t+0]]+Ku[e[t+1]]+Ku[e[t+2]]+Ku[e[t+3]]+"-"+Ku[e[t+4]]+Ku[e[t+5]]+"-"+Ku[e[t+6]]+Ku[e[t+7]]+"-"+Ku[e[t+8]]+Ku[e[t+9]]+"-"+Ku[e[t+10]]+Ku[e[t+11]]+Ku[e[t+12]]+Ku[e[t+13]]+Ku[e[t+14]]+Ku[e[t+15]]).toLowerCase()}function Xu(e){if(!Gu(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}function eo(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var to="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ro="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function no(e,t,r){function n(e,n,i,a){var u;if(typeof e=="string"&&(e=eo(e)),typeof n=="string"&&(n=Xu(n)),((u=n)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),o=r(o),o[6]=o[6]&15|t,o[8]=o[8]&63|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=o[e];return i}return Zu(o)}try{n.name=e}catch{}return n.DNS=to,n.URL=ro,n}var io=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ao={randomUUID:io};function uo(e,t,r){if(ao.randomUUID&&!t&&!e)return ao.randomUUID();e=e||{};let n=e.random||(e.rng||Ju)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return Zu(n)}function oo(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function so(e,t){return e<<t|e>>>32-t}function co(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=e.length/4+2,i=Math.ceil(n/16),a=new Array(i);for(let t=0;t<i;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[t*64+n*4]<<24|e[t*64+n*4+1]<<16|e[t*64+n*4+2]<<8|e[t*64+n*4+3];a[t]=r}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<i;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=so(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],u=r[1],o=r[2],s=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=so(i,5)+oo(r,u,o,s)+c+t[r]+n[e]>>>0;c=s,s=o,o=so(u,30)>>>0,u=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+o>>>0,r[3]=r[3]+s>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var lo=no("v5",80,co),fo=lo,ho="2.30.38",po={pageview:"pageview",event:"event"},go=class e{constructor(e,t){if(!Gu(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let t=Math.floor(Date.now()/1e3)-this.creationDate;return t<0||t>e.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some((e=>new RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host)))}catch{return!1}}static fromString(t){let r=t.split(".");if(r.length!==2)return null;let[n,i]=r;if(n.length!==32||isNaN(parseInt(i)))return null;let a=n.substring(0,8)+"-"+n.substring(8,12)+"-"+n.substring(12,16)+"-"+n.substring(16,20)+"-"+n.substring(20,32);return Gu(a)?new e(a,Number.parseInt(i)*1e3):null}};go.cvo_cid="cvo_cid";go.expirationTime=120;var yo=Object.keys;function vo(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}var mo=128,wo=192,bo=224,So=240;function Io(e){return(e&248)===So?4:(e&So)===bo?3:(e&bo)===wo?2:1}function qo(e,t){if(t<0||e.length<=t)return e;let r=e.indexOf("%",t-2);for(r<0||r>t?r=t:t=r;r>2&&e.charAt(r-3)=="%";){let n=Number.parseInt(e.substring(r-2,r),16);if((n&mo)!=mo)break;if(r-=3,(n&wo)!=mo){t-r>=Io(n)*3&&(r=t);break}}return e.substring(0,r)}var Oo={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},Ao=yo(Oo).map((e=>Oo[e])),xo=[...Ao].join("|"),ko=new RegExp(`^(${xo}$)`),Co={svcAction:"svc_action",svcActionData:"svc_action_data"},Ro=e=>ko.test(e),To=[Ro],Fo={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},jo={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},Mo={action:"pa",list:"pal",listSource:"pls"},Po={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},Do=["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit"],Eo={id:"quoteId",affiliation:"quoteAffiliation"},_o={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},$o={add:Mo,bookmark_add:Mo,bookmark_remove:Mo,click:Mo,checkout:Mo,checkout_option:Mo,detail:Mo,impression:Mo,remove:Mo,refund:Object.assign(Object.assign({},Mo),Po),purchase:Object.assign(Object.assign({},Mo),Po),quickview:Mo,quote:Object.assign(Object.assign({},Mo),Eo),review:Object.assign(Object.assign({},Mo),_o)},Vo=yo(Fo).map((e=>Fo[e])),Uo=yo(jo).map((e=>jo[e])),Qo=yo(Mo).map((e=>Mo[e])),No=yo(Po).map((e=>Po[e])),Lo=yo(_o).map((e=>_o[e])),Bo=yo(Eo).map((e=>Eo[e])),zo=[...Vo,"custom"].join("|"),Ho=[...Uo,"custom"].join("|"),Yo="(pr[0-9]+)",Jo="(il[0-9]+pi[0-9]+)",Wo=new RegExp(`^${Yo}(${zo})$`),Go=new RegExp(`^(${Jo}(${Ho}))|(il[0-9]+nm)$`),Ko=new RegExp(`^(${Qo.join("|")})$`),Zo=new RegExp(`^(${No.join("|")})$`),Xo=new RegExp(`^${Yo}custom$`),es=new RegExp(`^${Jo}custom$`),ts=new RegExp(`^(${[...Do,...Lo,...Bo].join("|")})$`),rs=e=>Wo.test(e),ns=e=>Go.test(e),is=e=>Ko.test(e),as=e=>Zo.test(e),us=e=>ts.test(e),os=[ns,rs,is,as,us],ss=[Xo,es],cs={anonymizeIp:"aip"},ls={eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"},ds={hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"},fs=["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"],hs=Object.assign(Object.assign(Object.assign(Object.assign({},cs),ls),ds),fs.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:t})),{})),ps=Object.assign(Object.assign({},hs),Co),gs=e=>{let t=!!e.action&&$o[e.action]||{};return yo(e).reduce(((r,n)=>{let i=t[n]||ps[n]||n;return Object.assign(Object.assign({},r),{[i]:e[n]})}),{})},ys=yo(ps).map((e=>ps[e])),vs=e=>ys.indexOf(e)!==-1,ms=e=>e==="custom",ws=e=>[...os,...To,vs,ms].some((t=>t(e))),bs=e=>yo(e).reduce(((t,r)=>{let n=Ss(r);return n?Object.assign(Object.assign({},t),Is(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})}),{}),Ss=e=>{let t;return[...ss].every((r=>{var n;return t=(n=r.exec(e))===null||n===void 0?void 0:n[1],!t})),t},Is=(e,t)=>yo(t).reduce(((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]})),{}),qs=class{constructor(e){this.opts=e}sendEvent(e,t){return Iu(this,void 0,void 0,(function*(){if(!this.isAvailable())throw new Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,i=yield this.getQueryParamsForEventType(e),{url:a,payload:u}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${i}`,t,n),o=this.encodeForEventType(e,u),s=new Blob([o],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(a,s)}))}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return Iu(this,void 0,void 0,(function*(){let n=e,i=t;if(r){let a=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon"),{url:u,body:o}=a;n=u||e;try{i=JSON.parse(o)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:i,url:n}}))}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeEventToJson(e,t):this.encodeEventToJson(e,t,this.opts.token)}getQueryParamsForEventType(e){return Iu(this,void 0,void 0,(function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter((e=>!!e)).join("&")}))}isEventTypeLegacy(e){return[qu.click,qu.custom,qu.search,qu.view].indexOf(e)!==-1}encodeEventToJson(e,t,r){let n=`${e}Event=${encodeURIComponent(JSON.stringify(t))}`;return r&&(n=`access_token=${encodeURIComponent(r)}&${n}`),n}},Os=class{sendEvent(e,t){return Iu(this,void 0,void 0,(function*(){return Promise.resolve()}))}deleteHttpCookieVisitorId(){return Iu(this,void 0,void 0,(function*(){return Promise.resolve()}))}},As=class{constructor(e){this.opts=e}sendEvent(e,t){return Iu(this,void 0,void 0,(function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:i}=this.opts,a=this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():"",u={url:`${r}/analytics/${e}${a}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},o=Object.assign(Object.assign({},u),i?yield i(u,"analyticsFetch"):{}),{url:s}=o,c=Su(o,["url"]),l;try{l=yield fetch(s,c)}catch(e){console.error("An error has occured when sending the event.",e);return}if(l.ok){let e=yield l.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}else{try{l.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,l,t),new Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)}}))}deleteHttpCookieVisitorId(){return Iu(this,void 0,void 0,(function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield fetch(t,{headers:this.getHeaders(),method:"DELETE"})}))}shouldAppendVisitorId(e){return[qu.click,qu.custom,qu.search,qu.view].indexOf(e)!==-1}getVisitorIdParam(){return Iu(this,void 0,void 0,(function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""}))}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},xs=class{constructor(e,t){ku()&&Ru()?this.storage=new Eu:ku()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new _u),this.client=new As(e),this.beaconClient=new qs(e),window.addEventListener("beforeunload",(()=>{let e=t();for(let{eventType:t,payload:r}of e)this.beaconClient.sendEvent(t,r)}))}getClientDependingOnEventType(e){return e==="click"&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},ks=class{constructor(e,t){this.storage=t||new _u,this.client=new As(e)}getClientDependingOnEventType(e){return this.client}},Cs=class{constructor(){this.storage=new _u,this.client=new Os}getClientDependingOnEventType(e){return this.client}},Rs="xx",Ts=e=>e?.startsWith(Rs)||!1,Fs=`\n        We've detected you're using React Native but have not provided the corresponding runtime, \n        for an optimal experience please use the "coveo.analytics/react-native" subpackage.\n        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native\n    `;function js(){return typeof navigator<"u"&&navigator.product=="ReactNative"}var Ms=["1",1,"yes",!0];function Ps(){return Au()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some((e=>Ms.indexOf(e)!==-1))}var Ds="v15",Es={default:"https://analytics.cloud.coveo.com/rest/ua",production:"https://analytics.cloud.coveo.com/rest/ua",hipaa:"https://analyticshipaa.cloud.coveo.com/rest/ua"};function _s(e=Es.default,t=Ds,r=!1){if(e=e.replace(/\/$/,""),r)return`${e}/${t}`;let n=e.endsWith("/rest")||e.endsWith("/rest/ua");return`${e}${n?"":"/rest"}/${t}`}var $s="38824e1f-37f5-42d3-8372-a4b8fa9df946",Vs=class{get defaultOptions(){return{endpoint:Es.default,isCustomEndpoint:!1,token:"",version:Ds,beforeSendHooks:[],afterSendHooks:[]}}get version(){return ho}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw new Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[Bu,Fu].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};Ps()?this.runtime=new Cs:this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),this.addEventTypeMapping(qu.view,{newEventType:qu.view,addClientIdParameter:!0}),this.addEventTypeMapping(qu.click,{newEventType:qu.click,addClientIdParameter:!0}),this.addEventTypeMapping(qu.custom,{newEventType:qu.custom,addClientIdParameter:!0}),this.addEventTypeMapping(qu.search,{newEventType:qu.search,addClientIdParameter:!0})}initRuntime(e){return Ou()&&xu()?new xs(e,(()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e})):(js()&&console.warn(Fs),new ks(e))}get storage(){return this.runtime.storage}determineVisitorId(){return Iu(this,void 0,void 0,(function*(){try{return Ou()&&this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||uo()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),uo()}}))}getCurrentVisitorId(){return Iu(this,void 0,void 0,(function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId}))}setCurrentVisitorId(e){return Iu(this,void 0,void 0,(function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)}))}setClientId(e,t){return Iu(this,void 0,void 0,(function*(){if(Gu(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(fo(e,fo(t,$s)))}}))}getParameters(e,...t){return Iu(this,void 0,void 0,(function*(){return yield this.resolveParameters(e,...t)}))}getPayload(e,...t){return Iu(this,void 0,void 0,(function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)}))}get currentVisitorId(){return typeof(this.visitorId||this.storage.getItem("visitorId"))!="string"&&this.setCurrentVisitorId(uo()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(Ps())return null;try{let t=new URL(e).searchParams.get(go.cvo_cid);if(t==null)return null;let r=go.fromString(t);return!r||!xu()||!r.validate(document.referrer,this.acceptedLinkReferrers)?null:r.clientId}catch{}return null}resolveParameters(e,...t){return Iu(this,void 0,void 0,(function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:i=!1,addClientIdParameter:a=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>Iu(this,void 0,void 0,(function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})})),e=>Iu(this,void 0,void 0,(function*(){return a?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e})),e=>i?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce(((t,r)=>Iu(this,void 0,void 0,(function*(){let n=yield t;return yield r(e,n)}))),t)].reduce(((e,t)=>Iu(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}resolvePayloadForParameters(e,t){return Iu(this,void 0,void 0,(function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?gs(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce(((e,t)=>Iu(this,void 0,void 0,(function*(){let r=yield e;return yield t(r)}))),Promise.resolve(t))}))}makeEvent(e,...t){return Iu(this,void 0,void 0,(function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),i=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:i,log:t=>Iu(this,void 0,void 0,(function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},i),t)}),yield Promise.all(this.afterSendHooks.map((r=>r(e,Object.assign(Object.assign({},n),t))))),yield this.deferExecution(),yield this.sendFromBuffer()}))}}))}sendEvent(e,...t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeEvent(e,...t)).log({})}))}deferExecution(){return new Promise((e=>setTimeout(e,0)))}sendFromBuffer(){return Iu(this,void 0,void 0,(function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}}))}clear(){this.storage.removeItem("visitorId"),(new Nu).clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return Iu(this,void 0,void 0,(function*(){return this.makeEvent(qu.search,e)}))}sendSearchEvent(e){var{searchQueryUid:t}=e,r=Su(e,["searchQueryUid"]);return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})}))}makeClickEvent(e){return Iu(this,void 0,void 0,(function*(){return this.makeEvent(qu.click,e)}))}sendClickEvent(e){var{searchQueryUid:t}=e,r=Su(e,["searchQueryUid"]);return Iu(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})}))}makeCustomEvent(e){return Iu(this,void 0,void 0,(function*(){return this.makeEvent(qu.custom,e)}))}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=Su(e,["lastSearchQueryUid"]);return Iu(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})}))}makeViewEvent(e){return Iu(this,void 0,void 0,(function*(){return this.makeEvent(qu.view,e)}))}sendViewEvent(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeViewEvent(e)).log({})}))}getVisit(){return Iu(this,void 0,void 0,(function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e}))}getHealth(){return Iu(this,void 0,void 0,(function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()}))}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every((e=>typeof e=="string")))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,i=t.length;n<i;n++){let i=t[n];if(typeof i=="string")r[e[n]]=i;else if(typeof i=="object")return Object.assign(Object.assign({},r),i)}return r}isKeyAllowedEmpty(e,t){return({[qu.search]:["queryText"]}[e]||[]).indexOf(t)!==-1}removeEmptyPayloadValues(e,t){let r=e=>typeof e<"u"&&e!==null&&e!=="";return Object.keys(e).filter((n=>this.isKeyAllowedEmpty(t,n)||r(e[n]))).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}removeUnknownParameters(e){return Object.keys(e).filter((e=>{if(ws(e))return!0;console.log(e,"is not processed by coveoua")})).reduce(((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]})),{})}processCustomParameters(e){let{custom:t}=e,r=Su(e,["custom"]),n={};t&&vo(t)&&(n=this.lowercaseKeys(t));let i=bs(r);return Object.assign(Object.assign({},n),i)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=Su(e,["custom"]);if(t&&vo(t)){let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}else return e}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach((t=>{r[t.toLowerCase()]=e[t]})),r}validateParams(e,t){let{anonymizeIp:r}=e,n=Su(e,["anonymizeIp"]);return r!==void 0&&["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())==-1&&(n.anonymizeIp=1),(t==qu.view||t==qu.click||t==qu.search||t==qu.custom)&&(n.originLevel3=this.limit(n.originLevel3,1024)),t==qu.view&&(n.location=this.limit(n.location,1024)),(t=="pageview"||t=="event")&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=Su(e,["userId"]);return Ts(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=Su(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&vo(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&vo(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return typeof e=="string"?qo(e,t):e}get baseUrl(){return _s(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}},Us;(function(e){e.contextChanged="contextChanged",e.expandToFullUI="expandToFullUI",e.openUserActions="openUserActions",e.showPrecedingSessions="showPrecedingSessions",e.showFollowingSessions="showFollowingSessions",e.clickViewedDocument="clickViewedDocument",e.clickPageView="clickPageView",e.createArticle="createArticle"})(Us||(Us={}));var Qs;(function(e){e.interfaceLoad="interfaceLoad",e.interfaceChange="interfaceChange",e.didyoumeanAutomatic="didyoumeanAutomatic",e.didyoumeanClick="didyoumeanClick",e.resultsSort="resultsSort",e.searchboxSubmit="searchboxSubmit",e.searchboxClear="searchboxClear",e.searchboxAsYouType="searchboxAsYouType",e.breadcrumbFacet="breadcrumbFacet",e.breadcrumbResetAll="breadcrumbResetAll",e.documentQuickview="documentQuickview",e.documentOpen="documentOpen",e.omniboxAnalytics="omniboxAnalytics",e.omniboxFromLink="omniboxFromLink",e.searchFromLink="searchFromLink",e.triggerNotify="notify",e.triggerExecute="execute",e.triggerQuery="query",e.undoTriggerQuery="undoQuery",e.triggerRedirect="redirect",e.pagerResize="pagerResize",e.pagerNumber="pagerNumber",e.pagerNext="pagerNext",e.pagerPrevious="pagerPrevious",e.pagerScrolling="pagerScrolling",e.staticFilterClearAll="staticFilterClearAll",e.staticFilterSelect="staticFilterSelect",e.staticFilterDeselect="staticFilterDeselect",e.facetClearAll="facetClearAll",e.facetSearch="facetSearch",e.facetSelect="facetSelect",e.facetSelectAll="facetSelectAll",e.facetDeselect="facetDeselect",e.facetExclude="facetExclude",e.facetUnexclude="facetUnexclude",e.facetUpdateSort="facetUpdateSort",e.facetShowMore="showMoreFacetResults",e.facetShowLess="showLessFacetResults",e.queryError="query",e.queryErrorBack="errorBack",e.queryErrorClear="errorClearQuery",e.queryErrorRetry="errorRetry",e.recommendation="recommendation",e.recommendationInterfaceLoad="recommendationInterfaceLoad",e.recommendationOpen="recommendationOpen",e.likeSmartSnippet="likeSmartSnippet",e.dislikeSmartSnippet="dislikeSmartSnippet",e.expandSmartSnippet="expandSmartSnippet",e.collapseSmartSnippet="collapseSmartSnippet",e.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",e.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",e.sendSmartSnippetReason="sendSmartSnippetReason",e.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",e.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",e.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",e.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",e.openSmartSnippetSource="openSmartSnippetSource",e.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",e.openSmartSnippetInlineLink="openSmartSnippetInlineLink",e.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",e.recentQueryClick="recentQueriesClick",e.clearRecentQueries="clearRecentQueries",e.recentResultClick="recentResultClick",e.clearRecentResults="clearRecentResults",e.noResultsBack="noResultsBack",e.showMoreFoldedResults="showMoreFoldedResults",e.showLessFoldedResults="showLessFoldedResults",e.copyToClipboard="copyToClipboard",e.caseSendEmail="Case.SendEmail",e.feedItemTextPost="FeedItem.TextPost",e.caseAttach="caseAttach",e.caseDetach="caseDetach",e.retryGeneratedAnswer="retryGeneratedAnswer",e.likeGeneratedAnswer="likeGeneratedAnswer",e.dislikeGeneratedAnswer="dislikeGeneratedAnswer",e.openGeneratedAnswerSource="openGeneratedAnswerSource",e.generatedAnswerStreamEnd="generatedAnswerStreamEnd",e.generatedAnswerSourceHover="generatedAnswerSourceHover",e.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",e.generatedAnswerHideAnswers="generatedAnswerHideAnswers",e.generatedAnswerShowAnswers="generatedAnswerShowAnswers",e.generatedAnswerExpand="generatedAnswerExpand",e.generatedAnswerCollapse="generatedAnswerCollapse",e.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",e.rephraseGeneratedAnswer="rephraseGeneratedAnswer",e.generatedAnswerFeedbackSubmitV2="generatedAnswerFeedbackSubmitV2"})(Qs||(Qs={}));var Ns={[Qs.triggerNotify]:"queryPipelineTriggers",[Qs.triggerExecute]:"queryPipelineTriggers",[Qs.triggerQuery]:"queryPipelineTriggers",[Qs.triggerRedirect]:"queryPipelineTriggers",[Qs.queryError]:"errors",[Qs.queryErrorBack]:"errors",[Qs.queryErrorClear]:"errors",[Qs.queryErrorRetry]:"errors",[Qs.pagerNext]:"getMoreResults",[Qs.pagerPrevious]:"getMoreResults",[Qs.pagerNumber]:"getMoreResults",[Qs.pagerResize]:"getMoreResults",[Qs.pagerScrolling]:"getMoreResults",[Qs.facetSearch]:"facet",[Qs.facetShowLess]:"facet",[Qs.facetShowMore]:"facet",[Qs.recommendation]:"recommendation",[Qs.likeSmartSnippet]:"smartSnippet",[Qs.dislikeSmartSnippet]:"smartSnippet",[Qs.expandSmartSnippet]:"smartSnippet",[Qs.collapseSmartSnippet]:"smartSnippet",[Qs.openSmartSnippetFeedbackModal]:"smartSnippet",[Qs.closeSmartSnippetFeedbackModal]:"smartSnippet",[Qs.sendSmartSnippetReason]:"smartSnippet",[Qs.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qs.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qs.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qs.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[Qs.clearRecentQueries]:"recentQueries",[Qs.recentResultClick]:"recentlyClickedDocuments",[Qs.clearRecentResults]:"recentlyClickedDocuments",[Qs.showLessFoldedResults]:"folding",[Qs.caseDetach]:"case",[Qs.likeGeneratedAnswer]:"generatedAnswer",[Qs.dislikeGeneratedAnswer]:"generatedAnswer",[Qs.openGeneratedAnswerSource]:"generatedAnswer",[Qs.generatedAnswerStreamEnd]:"generatedAnswer",[Qs.generatedAnswerSourceHover]:"generatedAnswer",[Qs.generatedAnswerCopyToClipboard]:"generatedAnswer",[Qs.generatedAnswerHideAnswers]:"generatedAnswer",[Qs.generatedAnswerShowAnswers]:"generatedAnswer",[Qs.generatedAnswerExpand]:"generatedAnswer",[Qs.generatedAnswerCollapse]:"generatedAnswer",[Qs.generatedAnswerFeedbackSubmit]:"generatedAnswer",[Qs.generatedAnswerFeedbackSubmitV2]:"generatedAnswer",[Us.expandToFullUI]:"interface",[Us.openUserActions]:"User Actions",[Us.showPrecedingSessions]:"User Actions",[Us.showFollowingSessions]:"User Actions",[Us.clickViewedDocument]:"User Actions",[Us.clickPageView]:"User Actions",[Us.createArticle]:"createArticle"},Ls=class{constructor(){this.runtime=new Cs,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(qu.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(qu.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(qu.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(qu.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return ho}};function Bs(e){let t="";return e.filter((e=>{let r=e!==t;return t=e,r}))}function zs(e){return e.map((e=>e.replace(/;/g,"")))}function Hs(e){let t=e.join(";");return t.length<=256?t:Hs(e.slice(1))}var Ys=e=>{let t=zs(e),r=Bs(t);return Hs(r)};function Js(e){let t=typeof e.partialQueries=="string"?e.partialQueries:Ys(e.partialQueries),r=typeof e.suggestions=="string"?e.suggestions:Ys(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var Ws=class{constructor(e,t){this.opts=e,this.provider=t;let r=e.enableAnalytics===!1||Ps();this.coveoAnalyticsClient=r?new Ls:new Vs(e)}disable(){this.coveoAnalyticsClient=new Ls}enable(){this.coveoAnalyticsClient=new Vs(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(Qs.interfaceLoad)}logInterfaceLoad(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(Qs.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendation(){return this.makeCustomEvent(Qs.recommendation)}logRecommendation(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})}))}makeRecommendationOpen(e,t){return this.makeClickEvent(Qs.recommendationOpen,e,t)}logRecommendationOpen(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterClearAll(e){return this.makeSearchEvent(Qs.staticFilterClearAll,e)}logStaticFilterClearAll(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterSelect(e){return this.makeSearchEvent(Qs.staticFilterSelect,e)}logStaticFilterSelect(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeStaticFilterDeselect(e){return this.makeSearchEvent(Qs.staticFilterDeselect,e)}logStaticFilterDeselect(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFetchMoreResults(){return this.makeCustomEvent(Qs.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})}))}makeInterfaceChange(e){return this.makeSearchEvent(Qs.interfaceChange,e)}logInterfaceChange(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanAutomatic(){return this.makeSearchEvent(Qs.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})}))}makeDidYouMeanClick(){return this.makeSearchEvent(Qs.didyoumeanClick)}logDidYouMeanClick(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})}))}makeResultsSort(e){return this.makeSearchEvent(Qs.resultsSort,e)}logResultsSort(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxSubmit(){return this.makeSearchEvent(Qs.searchboxSubmit)}logSearchboxSubmit(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxClear(){return this.makeSearchEvent(Qs.searchboxClear)}logSearchboxClear(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})}))}makeSearchboxAsYouType(){return this.makeSearchEvent(Qs.searchboxAsYouType)}logSearchboxAsYouType(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbFacet(e){return this.makeSearchEvent(Qs.breadcrumbFacet,e)}logBreadcrumbFacet(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})}))}makeBreadcrumbResetAll(){return this.makeSearchEvent(Qs.breadcrumbResetAll)}logBreadcrumbResetAll(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentQuickview(e,t){return this.makeClickEvent(Qs.documentQuickview,e,t)}logDocumentQuickview(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeDocumentOpen(e,t){return this.makeClickEvent(Qs.documentOpen,e,t)}logDocumentOpen(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxAnalytics(e){return this.makeSearchEvent(Qs.omniboxAnalytics,Js(e))}logOmniboxAnalytics(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOmniboxFromLink(e){return this.makeSearchEvent(Qs.omniboxFromLink,Js(e))}logOmniboxFromLink(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchFromLink(){return this.makeSearchEvent(Qs.searchFromLink)}logSearchFromLink(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerNotify(e){return this.makeCustomEvent(Qs.triggerNotify,e)}logTriggerNotify(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerExecute(e){return this.makeCustomEvent(Qs.triggerExecute,e)}logTriggerExecute(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerQuery(){return this.makeCustomEvent(Qs.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})}))}makeUndoTriggerQuery(e){return this.makeSearchEvent(Qs.undoTriggerQuery,e)}logUndoTriggerQuery(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})}))}makeTriggerRedirect(e){return this.makeCustomEvent(Qs.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerResize(e){return this.makeCustomEvent(Qs.pagerResize,e)}logPagerResize(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNumber(e){return this.makeCustomEvent(Qs.pagerNumber,e)}logPagerNumber(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerNext(e){return this.makeCustomEvent(Qs.pagerNext,e)}logPagerNext(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerPrevious(e){return this.makeCustomEvent(Qs.pagerPrevious,e)}logPagerPrevious(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})}))}makePagerScrolling(){return this.makeCustomEvent(Qs.pagerScrolling)}logPagerScrolling(){return Iu(this,void 0,void 0,(function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})}))}makeFacetClearAll(e){return this.makeSearchEvent(Qs.facetClearAll,e)}logFacetClearAll(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSearch(e){return this.makeSearchEvent(Qs.facetSearch,e)}logFacetSearch(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelect(e){return this.makeSearchEvent(Qs.facetSelect,e)}logFacetSelect(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetDeselect(e){return this.makeSearchEvent(Qs.facetDeselect,e)}logFacetDeselect(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetExclude(e){return this.makeSearchEvent(Qs.facetExclude,e)}logFacetExclude(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUnexclude(e){return this.makeSearchEvent(Qs.facetUnexclude,e)}logFacetUnexclude(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetSelectAll(e){return this.makeSearchEvent(Qs.facetSelectAll,e)}logFacetSelectAll(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetUpdateSort(e){return this.makeSearchEvent(Qs.facetUpdateSort,e)}logFacetUpdateSort(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowMore(e){return this.makeCustomEvent(Qs.facetShowMore,e)}logFacetShowMore(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})}))}makeFacetShowLess(e){return this.makeCustomEvent(Qs.facetShowLess,e)}logFacetShowLess(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryError(e){return this.makeCustomEvent(Qs.queryError,e)}logQueryError(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorBack(){return Iu(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qs.queryErrorBack);return{description:e.description,log:()=>Iu(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qs.queryErrorBack)}))}}))}logQueryErrorBack(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorRetry(){return Iu(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qs.queryErrorRetry);return{description:e.description,log:()=>Iu(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qs.queryErrorRetry)}))}}))}logQueryErrorRetry(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})}))}makeQueryErrorClear(){return Iu(this,void 0,void 0,(function*(){let e=yield this.makeCustomEvent(Qs.queryErrorClear);return{description:e.description,log:()=>Iu(this,void 0,void 0,(function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(Qs.queryErrorClear)}))}}))}logQueryErrorClear(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})}))}makeLikeSmartSnippet(){return this.makeCustomEvent(Qs.likeSmartSnippet)}logLikeSmartSnippet(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeSmartSnippet(){return this.makeCustomEvent(Qs.dislikeSmartSnippet)}logDislikeSmartSnippet(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippet(){return this.makeCustomEvent(Qs.expandSmartSnippet)}logExpandSmartSnippet(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippet(){return this.makeCustomEvent(Qs.collapseSmartSnippet)}logCollapseSmartSnippet(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(Qs.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(Qs.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})}))}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(Qs.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(Qs.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(Qs.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(Qs.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(Qs.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(Qs.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(Qs.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(Qs.copyToClipboard,e,t)}logCopyToClipboard(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})}))}logOpenSmartSnippetSuggestionSource(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(Qs.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(Qs.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeRecentQueryClick(){return this.makeSearchEvent(Qs.recentQueryClick)}logRecentQueryClick(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentQueries(){return this.makeCustomEvent(Qs.clearRecentQueries)}logClearRecentQueries(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})}))}makeRecentResultClick(e,t){return this.makeCustomEvent(Qs.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeClearRecentResults(){return this.makeCustomEvent(Qs.clearRecentResults)}logClearRecentResults(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})}))}makeNoResultsBack(){return this.makeSearchEvent(Qs.noResultsBack)}logNoResultsBack(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})}))}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(Qs.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeShowLessFoldedResults(){return this.makeCustomEvent(Qs.showLessFoldedResults)}logShowLessFoldedResults(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})}))}makeEventDescription(e,t){var r;return{actionCause:t,customData:(r=e.payload)===null||r===void 0?void 0:r.customData}}makeCustomEvent(e,t,r=Ns[e]){return Iu(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:r,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEvent(e,t,r=Ns[e]){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}makeCustomEventWithType(e,t,r){return Iu(this,void 0,void 0,(function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),i=Object.assign(Object.assign({},yield this.getBaseEventRequest(n)),{eventType:t,eventValue:e}),a=yield this.coveoAnalyticsClient.makeCustomEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({lastSearchQueryUid:e})}}))}logCustomEventWithType(e,t,r){return Iu(this,void 0,void 0,(function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})}))}logSearchEvent(e,t){return Iu(this,void 0,void 0,(function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})}))}makeSearchEvent(e,t){return Iu(this,void 0,void 0,(function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}}))}makeClickEvent(e,t,r,n){return Iu(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign(Object.assign({},t),yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),a=yield this.coveoAnalyticsClient.makeClickEvent(i);return{description:this.makeEventDescription(a,e),log:({searchUID:e})=>a.log({searchQueryUid:e})}}))}logClickEvent(e,t,r,n){return Iu(this,void 0,void 0,(function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})}))}getBaseSearchEventRequest(e,t){var r,n;return Iu(this,void 0,void 0,(function*(){return Object.assign(Object.assign(Object.assign({},yield this.getBaseEventRequest(Object.assign(Object.assign({},t),(n=(r=this.provider).getGeneratedAnswerMetadata)===null||n===void 0?void 0:n.call(r)))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})}))}getBaseEventRequest(e){return Iu(this,void 0,void 0,(function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})}))}getOrigins(){var e,t;return{originContext:(t=(e=this.provider).getOriginContext)===null||t===void 0?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof Vs?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(Qs.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(Qs.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(Qs.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(Qs.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(Qs.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(Qs.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(Qs.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerExpand(e){return this.makeCustomEvent(Qs.generatedAnswerExpand,e)}logGeneratedAnswerExpand(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerExpand(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerCollapse(e){return this.makeCustomEvent(Qs.generatedAnswerCollapse,e)}logGeneratedAnswerCollapse(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerCollapse(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(Qs.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerFeedbackSubmitV2(e){return this.makeCustomEvent(Qs.generatedAnswerFeedbackSubmitV2,e)}logGeneratedAnswerFeedbackSubmitV2(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerFeedbackSubmitV2(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(Qs.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})}))}makeRetryGeneratedAnswer(){return this.makeSearchEvent(Qs.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return Iu(this,void 0,void 0,(function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})}))}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(Qs.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return Iu(this,void 0,void 0,(function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})}))}},Gs=Object.assign({},po);Object.keys(Gs).map((e=>Gs[e]));var Ks;(function(e){e.click="click",e.flowStart="flowStart"})(Ks||(Ks={}));var Zs;(function(e){e.enterInterface="ticket_create_start",e.fieldUpdate="ticket_field_update",e.fieldSuggestionClick="ticket_classification_click",e.suggestionClick="suggestion_click",e.suggestionRate="suggestion_rate",e.nextCaseStep="ticket_next_stage",e.caseCancelled="ticket_cancel",e.caseSolved="ticket_cancel",e.caseCreated="ticket_create"})(Zs||(Zs={}));var Xs;(function(e){e.quit="Quit",e.solved="Solved"})(Xs||(Xs={}));var ec=e=>new Vs(e).getCurrentVisitorId(),tc=new Lu.HistoryStore,rc=(e,t)=>typeof t=="function"?(...r)=>{let n=he(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,nc=(e,t)=>(...r)=>{let n=he(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}};var ic=(e,t)=>{let r=e=>e.facetId===t;if("productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets)return e.productListing.facets.results.find(r);if("search"in e&&e.search)return e.search.response.facets.find(r)},ac=(e,t)=>e.facetSet[t]?.request;function uc(e,t){return!!t&&t.facetId in e.facetSet}var oc=(e,t)=>{let r=ic(e,t);if(uc(e,r))return r},sc=(e,t)=>{let r=oc(e,t);return r?r.values.filter((e=>e.state!=="idle")):[]},cc=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function lc(e){if(!e)return{parents:[],values:[]};let t=[],r=e;for(;r.length&&r[0].children.length;)t=[...t,...r],r=r[0].children;let n=r.find((e=>e.state==="selected"));return n&&(t=[...t,n],r=[]),{parents:t,values:r}}function dc(e){let{activeValue:t,ancestryMap:r}=fc(e);return t?hc(t,r):[]}function fc(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if(e.state==="selected")return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}function hc(e,t){let r=[];if(!e)return[];let n=e;do{r.unshift(n),n=t.get(n)}while(n);return r}function pc(e,t){return!!t&&t.facetId in e.categoryFacetSet}var gc=(e,t)=>{let r=ic(e,t);if(pc(e,r))return r},yc=(e,t)=>e.categoryFacetSet[t]?.request,vc=(e,t)=>{let r=gc(e,t);return dc(r?.values??[])},mc=(e,t)=>{let r=yc(e,t);return dc(r?.currentValues??[])};var wc=(e,t)=>{let r=Dc(t,e),n=r?r.field:"",i=Pc(n,e);return{facetId:e,facetField:n,facetTitle:i}};function bc(e,t){let{facetId:r,facetValue:n}=e,i=wc(r,t),a=Ec(t,r);return{...i,facetValue:a==="hierarchical"?Tc(t,r):n}}function Sc(e){return{facetSet:e.facetSet??Le(),categoryFacetSet:e.categoryFacetSet??$e(),dateFacetSet:e.dateFacetSet??ze(),numericFacetSet:e.numericFacetSet??Ye(),automaticFacetSet:e.automaticFacetSet??_e()}}var Ic=e=>{let t=[];return Ac(e).forEach(((r,n)=>{let i=Ec(e,r.facetId),a=Mc(r,n+1);if(Oc(r)){if(!!!mc(e,r.facetId).length)return;t.push({...a,...Fc(e,r.facetId),facetType:i,state:"selected"});return}r.currentValues.forEach(((e,n)=>{if(e.state==="idle")return;let u=kc(e,n+1,i),o=qc(r)?Rc(e):Cc(e);t.push({...a,...u,...o})}))})),xc(e).forEach(((e,r)=>{let n=jc(e,r+1);e.values.forEach(((e,r)=>{if(e.state==="idle")return;let i=kc(e,r+1,"specific"),a=Rc(e);t.push({...n,...i,...a})}))})),t},qc=e=>e.type==="specific",Oc=e=>e.type==="hierarchical",Ac=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map((e=>e.request)),xc=e=>[...Object.values(e.automaticFacetSet.set)].map((e=>e.response)),kc=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),Cc=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),Rc=e=>({displayValue:e.value,value:e.value}),Tc=(e,t)=>mc(e,t).map((e=>e.value)).join(";"),Fc=(e,t)=>{let r=Tc(e,t);return{value:r,valuePosition:1,displayValue:r}},jc=(e,t)=>({title:Pc(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),Mc=(e,t)=>({title:Pc(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),Pc=(e,t)=>`${e}_${t}`,Dc=(e,t)=>e.facetSet[t]?.request||e.categoryFacetSet[t]?.request||e.dateFacetSet[t]?.request||e.numericFacetSet[t]?.request||e.automaticFacetSet.set[t]?.response,Ec=(e,t)=>{let r=Dc(e,t);return r?r.type:"specific"};var _c=e=>{let t=e.configuration.search.locale.split("-")[0];return!t||t.length!==2?"en":t},$c=class{constructor(e){this.getState=e;this.state=e()}getLanguage(){return _c(this.state)}getBaseMetadata(){let{context:e,configuration:t}=this.state,r=e?.contextValues||{},n={};for(let[e,t]of Object.entries(r)){let r=`context_${e}`;n[r]=t}return t.analytics.analyticsMode==="legacy"&&(n.coveoHeadlessVersion=vu),n}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||it()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}};var Vc=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});var Uc=class extends $c{constructor(){super(...arguments);this.initialState=Vc()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){return this.getState().productListing?.responseId||this.initialState.responseId}mapResultsToAnalyticsDocument(){return this.state.productListing?.products.map((e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid})))}get numberOfResults(){return this.state.productListing.products.length}},Qc=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Uc(t)})=>{let a=t(),u=a.configuration.accessToken,o=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Ws({token:u,endpoint:o,runtimeEnvironment:s,preprocessRequest:rc(e,n),beforeSendHooks:[nc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:u},"Analytics request"),r)]},i);return c||l.disable(),l};var Nc=class e extends $c{constructor(){super(...arguments);this.getFacetRequest=e=>this.state.facetSet?.[e]?.request||this.state.categoryFacetSet?.[e]?.request||this.state.dateFacetSet?.[e]?.request||this.state.numericFacetSet?.[e]?.request||this.state.automaticFacetSet?.set[e]?.response}getFacetState(){return Ic(Sc(this.getState()))}getPipeline(){return this.state.pipeline||this.state.search?.response.pipeline||e.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){let e=this.getState();return e.search?.searchResponseId||e.search?.response.searchUid||Yt().response.searchUid}getSplitTestRunName(){return this.state.search?.response.splitTestRun}getSplitTestRunVersion(){let t=!!this.getSplitTestRunName(),r=this.state.search?.response.pipeline||this.state.pipeline||e.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){let e=this.getState(),t=super.getBaseMetadata(),r=e.search?.response?.extendedResults?.generativeQuestionAnsweringId;return r&&(t.generativeQuestionAnsweringId=r),t}getFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetValue:t,facetTitle:`${r}_${e}`}}getFacetClearAllMetadata(e){let t=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:t,facetTitle:`${t}_${e}`}}getFacetUpdateSortMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,criteria:t,facetTitle:`${r}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),facetId:e,facetField:r,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${r}_${e}`}}getResultSortMetadata(){return{...this.getBaseMetadata(),resultsSortBy:this.state.sortCriteria??Et()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){let r=this.getFacetRequest(e)?.field??"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:r,categoryFacetPath:t,categoryFacetTitle:`${r}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map((e=>e.expression)),i=r.partialQueries.length-1,a=r.partialQueries[i]||"",u=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:a,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:u}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){let e=this.getState(),t={};return e.generatedAnswer?.isVisible!==void 0&&(t.showGeneratedAnswer=e.generatedAnswer.isVisible),t}get resultURIs(){return this.results?.map((e=>({documentUri:e.uri,documentUriHash:e.raw.urihash})))}get results(){return this.state.search?.response.results}get queryText(){return this.state.query?.q||nt().q}get responseTime(){return this.state.search?.duration||Yt().duration}get numberOfResults(){return this.state.search?.response.totalCountFiltered||Yt().response.totalCountFiltered}};Nc.fallbackPipelineName="default";var Lc=Nc,Bc=({logger:e,getState:t,analyticsClientMiddleware:r=((e,t)=>t),preprocessRequest:n,provider:i=new Lc(t)})=>{let a=t(),u=a.configuration.accessToken,o=a.configuration.analytics.apiBaseUrl,s=a.configuration.analytics.runtimeEnvironment,c=a.configuration.analytics.enabled,l=new Ws({token:u,endpoint:o,runtimeEnvironment:s,preprocessRequest:rc(e,n),beforeSendHooks:[nc(e,r),(t,r)=>(e.info({...r,type:t,endpoint:o,token:u},"Analytics request"),r)]},i);return c||l.disable(),l},zc=()=>{let e=tc.getHistory().reverse().find((e=>e.name==="PageView"&&e.value));return e?e.value:""};function Hc(e){let t=Yc(e),r=[e,...t].filter((e=>e.parentResult)).map((e=>e.parentResult));return ae([e,...t,...r],(e=>e.uniqueId))}function Yc(e){return e.childResults?e.childResults.flatMap((e=>[e,...Yc(e)])):[]}function Jc(e,t){return{...new Lc(t).getBaseMetadata(),actionCause:e,type:e}}function Wc(e){return Object.assign(e,{instantlyCallable:!0})}function Gc(e,t){let r=t=>Wc(pi(e,t)),n=r((async(e,{getState:r,extra:n})=>{let{analyticsClientMiddleware:i,preprocessRequest:a,logger:u}=n;return await(await t({getState:r,analyticsClientMiddleware:i,preprocessRequest:a,logger:u})).log({state:r(),extra:n})}));return Object.assign(n,{prepare:async({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a})=>{let{description:u,log:o}=await t({getState:e,analyticsClientMiddleware:n,preprocessRequest:i,logger:a});return{description:u,action:r((async(e,{getState:t,extra:r})=>await o({state:t(),extra:r})))}}}),n}var Kc=(e,t,r)=>{function n(...n){let i=n.length===1?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r};return el(i)}return n},Zc=e=>e.configuration.analytics.analyticsMode==="legacy",Xc=e=>e.configuration.analytics.analyticsMode==="next",el=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:i,analyticsConfigurator:a,providerClass:u})=>(r??(r=e=>new u(e)),Gc(e,(async({getState:e,analyticsClientMiddleware:u,preprocessRequest:o,logger:s})=>{let c=[],l={log:async({state:e})=>{for(let t of c)await t(e)}},d=e(),f=a({getState:e,logger:s,analyticsClientMiddleware:u,preprocessRequest:o,provider:r(e)}),h=await t(f,e());l.description=h?.description,c.push((async e=>{Zc(e)&&await tl(h,r,e,s,f.coveoAnalyticsClient)}));let{emit:p}=bu(d);return c.push((async e=>{if(Xc(e)&&i&&n){let t=n(e);await yl(p,i,t)}})),l})));async function tl(e,t,r,n,i){t((()=>r));let a=await(e?.log({searchUID:t((()=>r)).getSearchUID()}));n.info({client:i,response:a},"Analytics response")}var rl=Kc(Bc,(e=>e),Lc);var nl=Kc(Qc,(e=>e),Uc);var il=(e,t)=>{let r=e=>e+(t.pagination?.firstResult??0),n=-1,i=t.search?.results;return n=gl(e,i),n<0&&(n=pl(e,i)),n<0&&(n=0),al(e,r(n),t)};function al(e,t,r){let n=e.raw.collection;return{collectionName:typeof n=="string"?n:"default",documentAuthor:dl(e),documentPosition:t+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:fl(e),queryPipeline:r.pipeline||tt()}}var ul=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),ol={urihash:new bt,sourcetype:new bt,permanentid:new bt},sl={uniqueId:Ma,raw:new It({values:ol}),title:Ma,uri:Ma,clickUri:Ma,rankingModifier:new bt({required:!1,emptyAllowed:!0})};function cl(e){return Object.assign({},...Object.keys(ol).map((t=>({[t]:e[t]}))))}function ll(e){return Object.assign({},...Object.keys(sl).map((t=>({[t]:e[t]}))),{raw:cl(e.raw)})}function dl(e){let t=e.raw.author;return dt(t)?"unknown":Array.isArray(t)?t.join(";"):`${t}`}function fl(e){let t=e.raw.source;return dt(t)?"unknown":t}var hl=e=>new ot(sl).validate(ll(e));function pl(e,t){for(let[r,n]of t.entries()){let t=Hc(n);if(gl(e,t)!==-1)return r}return-1}function gl(e,t=[]){return t.findIndex((({uniqueId:t})=>t===e.uniqueId))}async function yl(e,t,r){await e(t,r)}var vl=()=>rl("analytics/interface/load",(e=>e.makeInterfaceLoad())),ml=()=>rl("analytics/interface/change",((e,t)=>e.makeInterfaceChange({interfaceChangeTo:t.configuration.analytics.originLevel2}))),wl=()=>rl("analytics/interface/searchFromLink",(e=>e.makeSearchFromLink())),bl=e=>rl("analytics/interface/omniboxFromLink",(t=>t.makeOmniboxFromLink(e))),Sl=()=>({actionCause:"interfaceLoad"}),Il=()=>({actionCause:"interfaceChange"}),ql=()=>({actionCause:"searchFromLink"}),Ol=()=>({actionCause:"omniboxFromLink"});var Al=()=>Pa,xl=()=>Ma,kl=En("configuration/updateBasicConfiguration",(e=>Qa(e,{accessToken:Pa,organizationId:Pa,platformUrl:Pa}))),Cl=En("configuration/updateSearchConfiguration",(e=>Qa(e,{apiBaseUrl:Pa,pipeline:new bt({required:!1,emptyAllowed:!0}),searchHub:Pa,timezone:Pa,locale:Pa,authenticationProviders:new Ot({required:!1,each:Ma})}))),Rl={enabled:new gt({default:!0}),originContext:Al(),originLevel2:Al(),originLevel3:Al(),apiBaseUrl:Pa,nextApiBaseUrl:Pa,runtimeEnvironment:new st,anonymous:new gt({default:!1}),deviceId:Pa,userDisplayName:Pa,documentLocation:Pa,trackingId:Pa,analyticsMode:new bt({constrainTo:["legacy","next"],required:!1,default:"legacy"}),source:new It({options:{required:!1},values:mu.reduce(((e,t)=>(e[t]=$a,e)),{})})},Tl=En("configuration/updateAnalyticsConfiguration",(e=>Qa(e,Rl))),Fl=En("configuration/analytics/disable"),jl=En("configuration/analytics/enable"),Ml=En("configuration/analytics/originlevel2",(e=>Qa(e,{originLevel2:xl()}))),Pl=En("configuration/analytics/originlevel3",(e=>Qa(e,{originLevel3:xl()})));var Dl={q:new bt,enableQuerySyntax:new gt,aq:new bt,cq:new bt,firstResult:new ft({min:0}),numberOfResults:new ft({min:0}),sortCriteria:new bt,f:new It,fExcluded:new It,cf:new It,nf:new It,mnf:new It,df:new It,debug:new gt,sf:new It,tab:new bt,af:new It};var El=En("searchParameters/restore",(e=>Qa(e,Dl)));var _l=En("debug/enable"),$l=En("debug/disable");var Vl=Kn(Re(),(e=>{e.addCase(_l,(()=>!0)).addCase($l,(()=>!1)).addCase(El,((e,t)=>t.payload.debug??e))}));var Ul=En("history/undo"),Ql=En("history/redo"),Nl=En("history/snapshot"),Ll=pi("history/back",(async(e,{dispatch:t})=>{t(Ul()),await t(zl())})),Bl=pi("history/forward",(async(e,{dispatch:t})=>{t(Ql()),await t(zl())})),zl=pi("history/change",(async(e,{getState:t})=>t().history.present));var Hl=En("pipeline/set",(e=>Qa(e,new bt({required:!0,emptyAllowed:!0}))));var Yl=Kn(tt(),(e=>{e.addCase(Hl,((e,t)=>t.payload)).addCase(zl.fulfilled,((e,t)=>t.payload?.pipeline??e)).addCase(Cl,((e,t)=>t.payload.pipeline||e))}));var Jl=En("searchHub/set",(e=>Qa(e,new bt({required:!0,emptyAllowed:!0}))));var Wl=Kn(it(),(e=>{e.addCase(Jl,((e,t)=>t.payload)).addCase(zl.fulfilled,((e,t)=>t.payload?.searchHub??e)).addCase(Cl,((e,t)=>t.payload.searchHub||e))}));var Gl=En("breadcrumb/deselectAll"),Kl=En("breadcrumb/deselectAllNonBreadcrumbs");var Zl=En("facet/updateFacetAutoSelection",(e=>Qa(e,{allow:new gt({required:!0})})));var Xl=class extends Lc{constructor(e){super(e);this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){return this.activeInstantResultCache?.results}get queryText(){return this.activeInstantResultQuery??nt().q}get responseTime(){return this.activeInstantResultCache?.duration??Yt().duration}get numberOfResults(){return this.activeInstantResultCache?.totalCountFiltered??Yt().response.totalCountFiltered}getSearchUID(){return this.activeInstantResultCache?.searchUid||super.getSearchUID()}};var ed=e=>rl({prefix:"analytics/instantResult/open",__legacy__getBuilder:(t,r)=>(hl(e),t.makeDocumentOpen(il(e,r),ul(e))),__legacy__provider:e=>new Xl(e),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=il(e,t),n=ul(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,actionCause:"open",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}}),td=()=>rl("analytics/instantResult/searchboxAsYouType",(e=>e.makeSearchboxAsYouType()),(e=>new Xl(e))),rd=()=>({actionCause:"searchboxAsYouType"});var nd={id:Ma},id={...nd,q:Da},ad=En("instantResults/register",(e=>Qa(e,nd))),ud=En("instantResults/updateQuery",(e=>Qa(e,id))),od=En("instantResults/clearExpired",(e=>Qa(e,nd)));var sd=new ft({required:!0,min:0}),cd=En("pagination/registerNumberOfResults",(e=>Qa(e,sd))),ld=En("pagination/updateNumberOfResults",(e=>Qa(e,sd))),dd=En("pagination/registerPage",(e=>Qa(e,sd))),fd=En("pagination/updatePage",(e=>Qa(e,sd))),hd=En("pagination/nextPage"),pd=En("pagination/previousPage");var gd=En("query/updateQuery",(e=>Qa(e,{q:new bt,enableQuerySyntax:new gt})));var yd=(e,t,r)=>({analytics:{clientId:t.clientId,clientTimestamp:(new Date).toISOString(),documentReferrer:t.referrer,documentLocation:t.location,originContext:e.originContext,...r&&{actionCause:r.actionCause},...r&&{customData:r.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.deviceId&&{deviceId:e.deviceId},...e.trackingId&&{trackingId:e.trackingId},capture:!0,source:wu(e)}});var vd=(e,t,r)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:t.referrer,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:t.clientId},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&yd(e.configuration.analytics,t,r),...e.excerptLength&&!dt(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var md=async(e,t)=>{let r=e.analyticsMode==="next";return{analytics:{clientId:await ec(e),clientTimestamp:(new Date).toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...t&&!r&&{customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...zc()&&{pageId:zc()},...r&&e.trackingId&&{trackingId:e.trackingId},capture:r,...r&&{source:wu(e)}}}};var wd=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await ec(e.configuration.analytics),actionsHistory:tc.getHistory()},...e.advancedSearchQueries?.aq&&{aq:e.advancedSearchQueries.aq},...e.advancedSearchQueries?.cq&&{cq:e.advancedSearchQueries.cq},...e.advancedSearchQueries?.lq&&{lq:e.advancedSearchQueries.lq},...e.advancedSearchQueries?.dq&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await md(e.configuration.analytics,t),...e.excerptLength&&!dt(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var bd=()=>rl("search/logFetchMoreResults",(e=>e.makeFetchMoreResults())),Sd=e=>rl("search/queryError",((t,r)=>t.makeQueryError({query:r.query?.q||nt().q,aq:r.advancedSearchQueries?.aq||Y().aq,cq:r.advancedSearchQueries?.cq||Y().cq,dq:r.advancedSearchQueries?.dq||Y().dq,errorType:e.type,errorMessage:e.message})));var Id=d(g()),qd=d(j());var Od=d(g()),Ad=d(M());Od.default.extend(Ad.default);var xd="YYYY/MM/DD@HH:mm:ss",kd="1401-01-01";function Cd(e,t){let r=(0,Od.default)(e,t);return!r.isValid()&&!t?(0,Od.default)(e,xd):r}function Rd(e){return e.format(xd)}function Td(e){return Rd(Cd(e))===e}function Fd(e,t){let r=Cd(e,t);if(!r.isValid()){let r=". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information.",n=` with the format "${t}"`;throw new Error(`Could not parse the provided date "${e}"${t?n:r}`)}jd(r)}function jd(e){if(e.isBefore(kd))throw new Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}Id.default.extend(qd.default);var Md=["past","now","next"],Pd=["minute","hour","day","week","month","quarter","year"],Dd=e=>{let t=e==="now";return{amount:new ft({required:!t,min:1}),unit:new bt({required:!t,constrainTo:Pd}),period:new bt({required:!0,constrainTo:Md})}};function Ed(e){if(typeof e=="string"&&!Qd(e))throw new Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t=typeof e=="string"?Ld(e):e;new ot(Dd(t.period)).validate(t);let r=$d(t),n=JSON.stringify(t);if(!r.isValid())throw new Error(`Date is invalid: ${n}`);jd(r)}function _d(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}function $d(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,Id.default)().subtract(r,n);case"next":return(0,Id.default)().add(r,n);case"now":return(0,Id.default)()}}function Vd(e){return Rd($d(Ld(e)))}function Ud(e){return e.toLocaleLowerCase().split("-")}function Qd(e){let[t,r,n]=Ud(e);if(t==="now")return!0;if(!Md.includes(t)||!Pd.includes(n))return!1;let i=parseInt(r);return!(isNaN(i)||i<=0)}function Nd(e){return!!e&&typeof e=="object"&&"period"in e}function Ld(e){let[t,r,n]=Ud(e);return t==="now"?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}function Bd(e){return Ed(e),Ld(e)}function zd(e){return e.type==="dateRange"}function Hd(e){return`start${e}`}function Yd(e){return`end${e}`}var Jd=()=>({dateFacetValueMap:{}});function Wd(e,t,r){let n=e.start,i=e.end;return Qd(n)&&(n=Vd(n),r.dateFacetValueMap[t][Hd(n)]=e.start),Qd(i)&&(i=Vd(i),r.dateFacetValueMap[t][Yd(i)]=e.end),{...e,start:n,end:i}}function Gd(e,t){if(zd(e)){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map((e=>Wd(e,r,t)))}}return e}function Kd(e){let t=Jd();return{request:{...e,facets:e.facets?.map((e=>Gd(e,t)))},mappings:t}}function Zd(e,t,r){return{...e,start:r.dateFacetValueMap[t][Hd(e.start)]||e.start,end:r.dateFacetValueMap[t][Yd(e.end)]||e.end}}function Xd(e,t){return e.facetId in t.dateFacetValueMap}function ef(e,t){return Xd(e,t)?{...e,values:e.values.map((r=>Zd(r,e.facetId,t)))}:e}function tf(e,t){return"success"in e?{success:{...e.success,facets:e.success.facets?.map((e=>ef(e,t)))}}:e}var rf=En("didYouMean/enable"),nf=En("didYouMean/disable"),af=En("didYouMean/automaticCorrections/disable"),uf=En("didYouMean/automaticCorrections/enable"),of=En("didYouMean/correction",(e=>Qa(e,Ma))),sf=En("didYouMean/automaticCorrections/mode",(e=>Qa(e,new bt({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))));var cf=()=>rl("analytics/didyoumean/click",(e=>e.makeDidYouMeanClick())),lf=()=>rl("analytics/didyoumean/automatic",(e=>e.makeDidYouMeanAutomatic())),df=()=>({actionCause:"didYouMeanClick"}),ff=()=>({actionCause:"didYouMeanAutomatic"});var hf=new It({values:{undoneQuery:Da},options:{required:!0}}),pf=()=>rl("analytics/trigger/query",((e,t)=>t.triggers?.queryModification.newQuery?e.makeTriggerQuery():null)),gf=e=>rl("analytics/trigger/query/undo",(t=>(Qa(e,hf),t.makeUndoTriggerQuery(e)))),yf=()=>rl("analytics/trigger/notify",((e,t)=>t.triggers?.notifications.length?e.makeTriggerNotify({notifications:t.triggers.notifications}):null)),vf=()=>({actionCause:"undoQuery"});var mf=En("trigger/query/ignore",(e=>Qa(e,new bt({emptyAllowed:!0,required:!0})))),wf=En("trigger/query/modification",(e=>Qa(e,new It({values:{originalQuery:Pa,modification:Pa}}))));function bf(e){return Object.values(e).map((e=>e.request))}function Sf(e,t){let r={};e.forEach((e=>r[e.facetId]=e));let n=[];t.forEach((e=>{e in r&&(n.push(r[e]),delete r[e])}));let i=Object.values(r);return[...n,...i]}function If(e){return bf(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function qf(e){return bf(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Of(e){return[...qf(e.facetSet??{}),...If(e.numericFacetSet??{}),...If(e.dateFacetSet??{}),...bf(e.categoryFacetSet??{})]}function Af(e){return Of(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function xf(e){return Sf(Af(e),e.facetOrder??[])}var kf=async(e,t)=>{let r=Tf(e),n=xf(e),i=Cf(e),a=await wd(e,t),u=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Kd({...a,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...r&&{cq:r},...n.length&&{facets:n},...e.pagination&&{numberOfResults:u(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:i}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Cf(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(Rf).filter((e=>e.currentValues.length>0)):void 0}function Rf(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function Tf(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=Ff(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function Ff(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var jf=class{constructor(e,t=(e=>{this.dispatch(gd({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=tf(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,u=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:u,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Oa(e.response)?(this.dispatch(Sd(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:u,queryCorrection:o}=r;if(!n||!i)return null;let s=a.length===0&&u&&u.length!==0,c=!dt(o)&&!dt(o.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Nl(Ut(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return Oa(i.response)?(this.dispatch(Sd(i.response.error)),this.rejectWithValue(i.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(Nl(Ut(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:lf()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:lf()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,(()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r)),this.extra)}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(mf("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return Oa(i.response)?(this.dispatch(Sd(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Nl(Ut(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n,analyticsAction:pf()})}getStateAfterResponse(e,t,r,n){return{...r,query:{q:e,enableQuerySyntax:r.query?.enableQuerySyntax??nt().enableQuerySyntax},search:{...Yt(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(Nl(Ut(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return qa(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await kf(this.getState()),{origin:"mainSearch"});return this.dispatch(of(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(wf({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await kf(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};pi("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Qa(e,{q:new bt,enableQuerySyntax:new gt,clearFilters:new gt}),e.clearFilters&&(r(Gl()),r(Kl())),r(Zl({allow:!0})),r(gd({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(fd(1))}));var Mf=pi("search/executeSearch",(async(e,t)=>{let r=t.getState();return await zf(r,t,e)})),Pf=pi("search/fetchPage",(async(e,t)=>{let r=t.getState();return await Nf(r,t,e)})),Df=pi("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();return await Lf(t,r)})),Ef=pi("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();return await Bf(t,e,r)}));pi("search/fetchInstantResults",(async(e,t)=>Qf(e,t)));var _f=async(e,t)=>{let r=await kf(e,t);return r.request={...r.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},r},$f=async(e,t,r)=>{let n=await wd(e);return Kd({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},Vf=async(e,t)=>{let r=await kf(e,t);return r.request.numberOfResults=0,r},Uf=e=>{e.configuration.analytics.enabled&&tc.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})};async function Qf(e,t){Qa(e,{id:Ma,q:Ma,maxResultsPerQuery:new ft({required:!0,min:1}),cacheTimeout:new ft});let{q:r,maxResultsPerQuery:n}=e,i=t.getState(),a=new jf({...t,analyticsAction:td()},(r=>{t.dispatch(ud({q:r,id:e.id}))})),u=await $f(i,r,n),o=await a.fetchFromAPI(u,{origin:"instantResults",disableAbortWarning:!0}),s=await a.process(o);return"response"in s?{results:s.response.results,searchUid:s.response.searchUid,analyticsAction:s.analyticsAction,totalCountFiltered:s.response.totalCountFiltered,duration:s.duration}:s}async function Nf(e,t,r){Uf(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:u}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=new jf({...t,analyticsAction:r}),s=await kf(e,u),c=await o.fetchFromAPI(s,{origin:"mainSearch"});return await o.process(c)}async function Lf(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:i}=e.extra,{description:a}=await bd().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:i}),u=new jf({...e,analyticsAction:bd()}),o=await _f(t,a),s=await u.fetchFromAPI(o,{origin:"mainSearch"});return await u.process(s)}async function Bf(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=e.extra,{description:u}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=new jf({...e,analyticsAction:t}),s=await Vf(r,u),c=await o.fetchFromAPI(s,{origin:"facetValues"});return await o.process(c)}async function zf(e,t,r){Uf(e);let{analyticsClientMiddleware:n,preprocessRequest:i,logger:a}=t.extra,{description:u}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:i,logger:a}),o=await kf(e,u),s=new jf({...t,analyticsAction:r}),c=await s.fetchFromAPI(o,{origin:"mainSearch"});return await s.process(c)}var Hf=async(e,t,r)=>{let n=eh(e),i=Yf(e),a=Jf(e),u=e.configuration.analytics.analyticsMode==="legacy"?await wd(e,r):vd(e,t,r),o=()=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0;return Kd({...u,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...n&&{cq:n},...i.length&&{facets:i},...e.pagination&&{numberOfResults:o(),firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...e.folding?.enabled&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:a}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function Yf(e){return Sf(Gf(e),e.facetOrder??[])}function Jf(e){let t=e.automaticFacetSet?.set;return t?Object.values(t).map((e=>e.response)).map(Wf).filter((e=>e.currentValues.length>0)):void 0}function Wf(e){let{field:t,label:r,values:n}=e,i=n.filter((e=>e.state==="selected"));return{field:t,label:r,currentValues:i}}function Gf(e){return Kf(e).filter((({facetId:t})=>e.facetOptions?.facets[t]?.enabled??!0))}function Kf(e){return[...Zf(e.facetSet??{}),...Xf(e.numericFacetSet??{}),...Xf(e.dateFacetSet??{}),...bf(e.categoryFacetSet??{})]}function Zf(e){return bf(e).map((e=>e.sortCriteria==="alphanumericDescending"?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e))}function Xf(e){return bf(e).map((e=>{let t=e.currentValues.some((({state:e})=>e!=="idle"));return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e}))}function eh(e){let t=e.advancedSearchQueries?.cq.trim()||"",r=Object.values(e.tabSet||{}).find((e=>e.isActive))?.expression.trim()||"",n=th(e);return[t,r,...n].filter((e=>!!e)).join(" AND ")}function th(e){return Object.values(e.staticFilterSet||{}).map((e=>{let t=e.values.filter((e=>e.state==="selected"&&!!e.expression.trim())),r=t.map((e=>e.expression)).join(" OR ");return t.length>1?`(${r})`:r}))}var rh=class{constructor(e,t=(e=>{this.dispatch(gd({q:e}))})){this.config=e;this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){let n=(new Date).getTime(),i=tf(await this.extra.apiClient.search(t,r),e),a=(new Date).getTime()-n,u=this.getState().query?.q||"";return{response:i,duration:a,queryExecuted:u,requestExecuted:t}}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return Oa(e.response)?(this.dispatch(Sd(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:i}=t.didYouMean,{results:a,queryCorrections:u,queryCorrection:o}=r;if(!n||!i)return null;let s=a.length===0&&u&&u.length!==0,c=!dt(o)&&!dt(o.correctedQuery);if(!s&&!c)return null;let l=s?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(Nl(Ut(this.getState()))),l}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],i=await this.automaticallyRetryQueryWithCorrection(n);return Oa(i.response)?(this.dispatch(Sd(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Nl(Ut(this.getState()))),{...i,response:{...i.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(mf("")),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return Oa(i.response)?(this.dispatch(Sd(i.response.error)),this.rejectWithValue(i.response.error)):(this.dispatch(Nl(Ut(this.getState()))),{...i,response:{...i.response.success},automaticallyCorrected:!1,originalQuery:n})}processSuccessResponse(e){return this.dispatch(Nl(Ut(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return qa(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r}=ff(),n=await this.fetchFromAPI(await Hf(t,this.extra.navigatorContext,{actionCause:r}),{origin:"mainSearch"});return this.dispatch(of(e)),n}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(wf({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await Hf(this.getState(),this.extra.navigatorContext),{origin:"mainSearch"})}getCurrentQuery(){let e=this.getState();return e.query?.q!==void 0?e.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}};var nh=pi("search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Qa(e,{q:new bt,enableQuerySyntax:new gt,clearFilters:new gt}),e.clearFilters&&(r(Gl()),r(Kl())),r(Zl({allow:!0})),r(gd({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(fd(1))})),ih=pi("search/executeSearch",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return zf(r,t,e.legacy);fh(r);let n=e.next?hh(e.next):void 0,i=await Hf(r,t.extra.navigatorContext,n),a=new rh({...t,analyticsAction:n??{}}),u=await a.fetchFromAPI(i,{origin:"mainSearch"});return await a.process(u)})),ah=pi("search/fetchPage",(async(e,t)=>{let r=t.getState();if(fh(r),r.configuration.analytics.analyticsMode==="legacy"||!e.next)return Nf(r,t,e.legacy);let n=new rh({...t,analyticsAction:e.next}),i=await Hf(r,t.extra.navigatorContext,e.next),a=await n.fetchFromAPI(i,{origin:"mainSearch"});return await n.process(a)})),uh=pi("search/fetchMoreResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Lf(t,r);let n=Jc("browseResults",t.getState),i=new rh({...t,analyticsAction:n}),a=await ch(r,t.extra.navigatorContext,n),u=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(u)})),oh=pi("search/fetchFacetValues",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return zf(r,t,e.legacy);let n=new rh({...t,analyticsAction:{}}),i=await dh(r,t.extra.navigatorContext),a=await n.fetchFromAPI(i,{origin:"facetValues"});return await n.process(a)})),sh=pi("search/fetchInstantResults",(async(e,t)=>{let r=t.getState();if(r.configuration.analytics.analyticsMode==="legacy")return Qf(e,t);Qa(e,{id:Ma,q:Ma,maxResultsPerQuery:new ft({required:!0,min:1}),cacheTimeout:new ft});let{q:n,maxResultsPerQuery:i}=e,a=hh(rd()),u=await lh(r,t.extra.navigatorContext,n,i,a),o=new rh({...t,analyticsAction:a},(r=>{t.dispatch(ud({q:r,id:e.id}))})),s=await o.fetchFromAPI(u,{origin:"instantResults",disableAbortWarning:!0}),c=await o.process(s);return"response"in c?{results:c.response.results,searchUid:c.response.searchUid,totalCountFiltered:c.response.totalCountFiltered,duration:c.duration}:c})),ch=async(e,t,r)=>{let n=await Hf(e,t,r);return n.request={...n.request,firstResult:(e.pagination?.firstResult??0)+(e.search?.results.length??0)},n},lh=async(e,t,r,n,i)=>{let a=vd(e,t,i);return Kd({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:n,q:r})},dh=async(e,t,r)=>{let n=await Hf(e,t,r);return n.request.numberOfResults=0,n},fh=e=>{e.configuration.analytics.enabled&&tc.addElement({name:"Query",...e.query?.q&&{value:e.query.q},time:JSON.stringify(new Date)})},hh=e=>({actionCause:e.actionCause,type:e.actionCause});var ph=(e,t)=>{let r=e;return dt(r[t])?dt(e.raw[t])?null:e.raw[t]:r[t]},gh=e=>t=>e.every((e=>!dt(ph(t,e)))),yh=e=>t=>e.every((e=>dt(ph(t,e)))),vh=(e,t)=>r=>{let n=wh(e,r);return t.some((e=>n.some((t=>`${t}`.toLowerCase()===e.toLowerCase()))))},mh=(e,t)=>r=>{let n=wh(e,r);return t.every((e=>n.every((t=>`${t}`.toLowerCase()!==e.toLowerCase()))))},wh=(e,t)=>{let r=ph(t,e);return ne(r)?r:[r]},bh={getResultProperty:ph,fieldsMustBeDefined:gh,fieldsMustNotBeDefined:yh,fieldMustMatch:vh,fieldMustNotMatch:mh};function Sh(e){return e.search.response.searchUid!==""}function Ih(e,t,r){return e.search.results.find((e=>ph(e,t)===r))}function qh(e,t){let r=t.payload??null;r&&(e.response=Yt().response,e.results=[],e.questionAnswer=Ht()),e.error=r,e.isLoading=!1}function Oh(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function Ah(e,t){Oh(e,t),e.results=t.payload.response.results.map((e=>({...e,searchUid:t.payload.response.searchUid}))),e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}function xh(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var kh=Kn(Yt(),(e=>{e.addCase(Mf.rejected,((e,t)=>qh(e,t))),e.addCase(Df.rejected,((e,t)=>qh(e,t))),e.addCase(Pf.rejected,((e,t)=>qh(e,t))),e.addCase(Mf.fulfilled,((e,t)=>{Ah(e,t)})),e.addCase(Df.fulfilled,((e,t)=>{Oh(e,t),e.results=[...e.results,...t.payload.response.results.map((e=>({...e,searchUid:t.payload.response.searchUid})))]})),e.addCase(Pf.fulfilled,((e,t)=>{Oh(e,t),e.results=[...t.payload.response.results.map((e=>({...e,searchUid:t.payload.response.searchUid})))]})),e.addCase(Ef.fulfilled,((e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid})),e.addCase(Mf.pending,xh),e.addCase(Df.pending,xh),e.addCase(Pf.pending,xh)}));var Ch=Rn((e=>e.query),(e=>e));var Rh=e=>Fh(e)?{answerAPIEnabled:!0,id:dg(e).data?.answerId}:Th(e)?{answerAPIEnabled:!1,id:e.search.response.extendedResults.generativeQuestionAnsweringId}:{answerAPIEnabled:!1,id:void 0},Th=e=>"search"in e,Fh=e=>"answer"in e&&"generatedAnswer"in e&&!dt(e.generatedAnswer?.answerConfigurationId),jh=e=>e.generatedAnswer?.fieldsToIncludeInCitations,Mh=Rn((e=>e.generatedAnswer?.citations),((e,t)=>t),((e,t)=>e?.find((e=>e.id===t))));Rn((e=>Ch(e)?.q),(e=>e.search.requestId),((e,t)=>({q:e,requestId:t})));var Ph=Rn((e=>e.pipeline),(e=>e));var Dh=Rn((e=>e.searchHub),(e=>e));function Eh(e){return{status:e,isUninitialized:e==="uninitialized",isLoading:e==="pending",isSuccess:e==="fulfilled",isError:e==="rejected"}}var _h=or;function $h(e,t){if(e===t||!(_h(e)&&_h(t)||Array.isArray(e)&&Array.isArray(t)))return t;let r=Object.keys(t),n=Object.keys(e),i=r.length===n.length,a=Array.isArray(t)?[]:{};for(let n of r)a[n]=$h(e[n],t[n]),i&&(i=e[n]===a[n]);return i?e:a}function Vh(e){let t=0;for(let r in e)t++;return t}var Uh=e=>[].concat(...e);function Qh(e){return new RegExp("(^|:)//").test(e)}function Nh(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}function Lh(e){return e!=null}function Bh(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}var zh=e=>e.replace(/\/$/,""),Hh=e=>e.replace(/^\//,"");function Yh(e,t){if(!e)return t;if(!t)return e;if(Qh(t))return t;let r=e.endsWith("/")||!t.startsWith("?")?"/":"";return e=zh(e),t=Hh(t),`${e}${r}${t}`}var Jh=(...e)=>fetch(...e),Wh=e=>e.status>=200&&e.status<=299,Gh=e=>/ion\/(vnd\.api\+)?json/.test(e.get("content-type")||"");function Kh(e){if(!or(e))return e;let t={...e};for(let[e,r]of Object.entries(t))r===void 0&&delete t[e];return t}function Zh({baseUrl:e,prepareHeaders:t=(e=>e),fetchFn:r=Jh,paramsSerializer:n,isJsonContentType:i=Gh,jsonContentType:a="application/json",jsonReplacer:u,timeout:o,responseHandler:s,validateStatus:c,...l}={}){return typeof fetch>"u"&&r===Jh&&console.warn("Warning: `fetch` is not available. Please supply a custom `fetchFn` property to use `fetchBaseQuery` on SSR environments."),async(f,h)=>{let{signal:p,getState:g,extra:y,endpoint:v,forced:m,type:w}=h,b,{url:S,headers:I=new Headers(l.headers),params:q=void 0,responseHandler:O=s??"json",validateStatus:A=c??Wh,timeout:x=o,...k}=typeof f=="string"?{url:f}:f,C={...l,signal:p,...k};I=new Headers(Kh(I)),C.headers=await t(I,{getState:g,extra:y,endpoint:v,forced:m,type:w})||I;let R=e=>typeof e=="object"&&(or(e)||Array.isArray(e)||typeof e.toJSON=="function");if(!C.headers.has("content-type")&&R(C.body)&&C.headers.set("content-type",a),R(C.body)&&i(C.headers)&&(C.body=JSON.stringify(C.body,u)),q){let e=~S.indexOf("?")?"&":"?",t=n?n(q):new URLSearchParams(Kh(q));S+=e+t}S=Yh(e,S);let T=new Request(S,C);b={request:new Request(S,C)};let F,j=!1,M=x&&setTimeout((()=>{j=!0,h.abort()}),x);try{F=await r(T)}catch(e){return{error:{status:j?"TIMEOUT_ERROR":"FETCH_ERROR",error:String(e)},meta:b}}finally{M&&clearTimeout(M)}let P=F.clone();b.response=P;let D,E="";try{let e;if(await Promise.all([d(F,O).then((e=>D=e),(t=>e=t)),P.text().then((e=>E=e),(()=>{}))]),e)throw e}catch(e){return{error:{status:"PARSING_ERROR",originalStatus:F.status,data:E,error:String(e)},meta:b}}return A(F,D)?{data:D,meta:b}:{error:{status:F.status,data:D},meta:b}};async function d(e,t){if(typeof t=="function")return t(e);if(t==="content-type"&&(t=i(e.headers)?"json":"text"),t==="json"){let t=await e.text();return t.length?JSON.parse(t):null}return e.text()}}var Xh=class{constructor(e,t=void 0){this.value=e,this.meta=t}};async function ep(e=0,t=5){let r=Math.min(e,t),n=~~((Math.random()+.4)*(300<<r));await new Promise((e=>setTimeout((t=>e(t)),n)))}function tp(e){throw Object.assign(new Xh({error:e}),{throwImmediately:!0})}var rp={},np=(e,t)=>async(r,n,i)=>{let a=[5,(t||rp).maxRetries,(i||rp).maxRetries].filter((e=>e!==void 0)),[u]=a.slice(-1),o={maxRetries:u,backoff:ep,retryCondition:(e,t,{attempt:r})=>r<=u,...t,...i},s=0;for(;;)try{let t=await e(r,n,i);if(t.error)throw new Xh(t);return t}catch(e){if(s++,e.throwImmediately){if(e instanceof Xh)return e.value;throw e}if(e instanceof Xh&&!o.retryCondition(e.value.error,r,{attempt:s,baseQueryApi:n,extraOptions:i}))return e.value;await o.backoff(s,o.maxRetries)}},ip=Object.assign(np,{fail:tp}),ap=En("__rtkq/focused"),up=En("__rtkq/unfocused"),op=En("__rtkq/online"),sp=En("__rtkq/offline");function cp(e){return e.type==="query"}function lp(e){return e.type==="mutation"}function dp(e,t,r,n,i,a){return fp(e)?e(t,r,n,i).map(hp).map(a):Array.isArray(e)?e.map(hp).map(a):[]}function fp(e){return typeof e=="function"}function hp(e){return typeof e=="string"?{type:e}:e}function pp(e,t){return e.catch(t)}var gp=Symbol("forceQueryFn"),yp=e=>typeof e[gp]=="function";function vp({serializeQueryArgs:e,queryThunk:t,mutationThunk:r,api:n,context:i}){let a=new Map,u=new Map,{unsubscribeQueryResult:o,removeMutationResult:s,updateSubscriptionOptions:c}=n.internalActions;return{buildInitiateQuery:p,buildInitiateMutation:g,getRunningQueryThunk:l,getRunningMutationThunk:d,getRunningQueriesThunk:f,getRunningMutationsThunk:h};function l(t,r){return n=>{let u=i.endpointDefinitions[t],o=e({queryArgs:r,endpointDefinition:u,endpointName:t});return a.get(n)?.[o]}}function d(e,t){return e=>u.get(e)?.[t]}function f(){return e=>Object.values(a.get(e)||{}).filter(Lh)}function h(){return e=>Object.values(u.get(e)||{}).filter(Lh)}function p(r,i){let u=(s,{subscribe:l=!0,forceRefetch:d,subscriptionOptions:f,[gp]:h,...p}={})=>(g,y)=>{let v=e({queryArgs:s,endpointDefinition:i,endpointName:r}),m=t({...p,type:"query",subscribe:l,forceRefetch:d,subscriptionOptions:f,endpointName:r,originalArgs:s,queryCacheKey:v,[gp]:h}),w=n.endpoints[r].select(s),b=g(m),S=w(y());let{requestId:I,abort:q}=b,O=S.requestId!==I,A=a.get(g)?.[v],x=()=>w(y()),k=Object.assign(h?b.then(x):O&&!A?Promise.resolve(S):Promise.all([A,b]).then(x),{arg:s,requestId:I,subscriptionOptions:f,queryCacheKey:v,abort:q,async unwrap(){let e=await k;if(e.isError)throw e.error;return e.data},refetch:()=>g(u(s,{subscribe:!1,forceRefetch:!0})),unsubscribe(){l&&g(o({queryCacheKey:v,requestId:I}))},updateSubscriptionOptions(e){k.subscriptionOptions=e,g(c({endpointName:r,requestId:I,queryCacheKey:v,options:e}))}});if(!A&&!O&&!h){let e=a.get(g)||{};e[v]=k,a.set(g,e),k.then((()=>{delete e[v],Vh(e)||a.delete(g)}))}return k};return u}function g(e){return(t,{track:n=!0,fixedCacheKey:i}={})=>(a,o)=>{let c=r({type:"mutation",endpointName:e,originalArgs:t,track:n,fixedCacheKey:i}),l=a(c);let{requestId:d,abort:f,unwrap:h}=l,p=pp(l.unwrap().then((e=>({data:e}))),(e=>({error:e}))),g=()=>{a(s({requestId:d,fixedCacheKey:i}))},y=Object.assign(p,{arg:l.arg,requestId:d,abort:f,unwrap:h,reset:g}),v=u.get(a)||{};return u.set(a,v),v[d]=y,y.then((()=>{delete v[d],Vh(v)||u.delete(a)})),i&&(v[i]=y,y.then((()=>{v[i]===y&&(delete v[i],Vh(v)||u.delete(a))}))),y}}}function mp(e){return e}function wp({reducerPath:e,baseQuery:t,context:{endpointDefinitions:r},serializeQueryArgs:n,api:i,assertTagType:a}){let u=(e,t,u,o)=>(s,c)=>{let l=r[e],d=n({queryArgs:t,endpointDefinition:l,endpointName:e});if(s(i.internalActions.queryResultPatched({queryCacheKey:d,patches:u})),!o)return;let f=i.endpoints[e].select(t)(c()),h=dp(l.providesTags,f.data,void 0,t,{},a);s(i.internalActions.updateProvidedBy({queryCacheKey:d,providedTags:h}))},o=(e,t,r,n=!0)=>(a,u)=>{let o=i.endpoints[e].select(t)(u()),s={patches:[],inversePatches:[],undo:()=>a(i.util.patchQueryData(e,t,s.inversePatches,n))};if(o.status==="uninitialized")return s;let c;if("data"in o)if(br(o.data)){let[e,t,n]=pn(o.data,r);s.patches.push(...t),s.inversePatches.push(...n),c=e}else c=r(o.data),s.patches.push({op:"replace",path:[],value:c}),s.inversePatches.push({op:"replace",path:[],value:o.data});return s.patches.length===0||a(i.util.patchQueryData(e,t,s.patches,n)),s},s=(e,t,r)=>n=>n(i.endpoints[e].initiate(t,{subscribe:!1,forceRefetch:!0,[gp]:()=>({data:r})})),c=async(e,{signal:n,abort:i,rejectWithValue:a,fulfillWithValue:u,dispatch:o,getState:s,extra:c})=>{let d=r[e.endpointName];try{let r=mp,a,f={signal:n,abort:i,dispatch:o,getState:s,extra:c,endpoint:e.endpointName,type:e.type,forced:e.type==="query"?l(e,s()):void 0},h=e.type==="query"?e[gp]:void 0;if(h?a=h():d.query?(a=await t(d.query(e.originalArgs),f,d.extraOptions),d.transformResponse&&(r=d.transformResponse)):a=await d.queryFn(e.originalArgs,f,d.extraOptions,(e=>t(e,f,d.extraOptions))),a.error)throw new Xh(a.error,a.meta);return u(await r(a.data,a.meta,e.originalArgs),{fulfilledTimeStamp:Date.now(),baseQueryMeta:a.meta,[Nn]:!0})}catch(t){let r=t;if(r instanceof Xh){let t=mp;d.query&&d.transformErrorResponse&&(t=d.transformErrorResponse);try{return a(await t(r.value,r.meta,e.originalArgs),{baseQueryMeta:r.meta,[Nn]:!0})}catch(e){r=e}}throw console.error(r),r}};function l(t,r){let n=r[e]?.queries?.[t.queryCacheKey],i=r[e]?.config.refetchOnMountOrArgChange,a=n?.fulfilledTimeStamp,u=t.forceRefetch??(t.subscribe&&i);return u?u===!0||(Number(new Date)-Number(a))/1e3>=u:!1}let d=pi(`${e}/executeQuery`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Nn]:!0}},condition(t,{getState:n}){let i=n(),a=i[e]?.queries?.[t.queryCacheKey],u=a?.fulfilledTimeStamp,o=t.originalArgs,s=a?.originalArgs,c=r[t.endpointName];return yp(t)?!0:a?.status==="pending"?!1:l(t,i)||cp(c)&&c?.forceRefetch?.({currentArg:o,previousArg:s,endpointState:a,state:i})?!0:!u},dispatchConditionRejection:!0}),f=pi(`${e}/executeMutation`,c,{getPendingMeta(){return{startedTimeStamp:Date.now(),[Nn]:!0}}}),h=e=>"force"in e,p=e=>"ifOlderThan"in e,g=(e,t,r)=>(n,a)=>{let u=h(r)&&r.force,o=p(r)&&r.ifOlderThan,s=(r=!0)=>{let n={forceRefetch:r,isPrefetch:!0};return i.endpoints[e].initiate(t,n)},c=i.endpoints[e].select(t)(a());if(u)n(s());else if(o){let e=c?.fulfilledTimeStamp;if(!e){n(s());return}(Number(new Date)-Number(new Date(e)))/1e3>=o&&n(s())}else n(s(!1))};function y(e){return t=>t?.meta?.arg?.endpointName===e}function v(e,t){return{matchPending:ei(ni(e),y(t)),matchFulfilled:ei(ui(e),y(t)),matchRejected:ei(ii(e),y(t))}}return{queryThunk:d,mutationThunk:f,prefetch:g,updateQueryData:o,upsertQueryData:s,patchQueryData:u,buildMatchThunkActions:v}}function bp(e,t,r,n){return dp(r[e.meta.arg.endpointName][t],ui(e)?e.payload:void 0,ai(e)?e.payload:void 0,e.meta.arg.originalArgs,"baseQueryMeta"in e.meta?e.meta.baseQueryMeta:void 0,n)}function Sp(e,t,r){let n=e[t];n&&r(n)}function Ip(e){return("arg"in e?e.arg.fixedCacheKey:e.fixedCacheKey)??e.requestId}function qp(e,t,r){let n=e[Ip(t)];n&&r(n)}var Op={};function Ap({reducerPath:e,queryThunk:t,mutationThunk:r,context:{endpointDefinitions:n,apiUid:i,extractRehydrationInfo:a,hasRehydrationInfo:u},assertTagType:o,config:s}){let c=En(`${e}/resetApiState`),l=Si({name:`${e}/queries`,initialState:Op,reducers:{removeQueryResult:{reducer(e,{payload:{queryCacheKey:t}}){delete e[t]},prepare:Ln()},queryResultPatched:{reducer(e,{payload:{queryCacheKey:t,patches:r}}){Sp(e,t,(e=>{e.data=gn(e.data,r.concat())}))},prepare:Ln()}},extraReducers(e){e.addCase(t.pending,((e,{meta:t,meta:{arg:r}})=>{var n;let i=yp(r);e[n=r.queryCacheKey]??(e[n]={status:"uninitialized",endpointName:r.endpointName}),Sp(e,r.queryCacheKey,(e=>{e.status="pending",e.requestId=i&&e.requestId?e.requestId:t.requestId,r.originalArgs!==void 0&&(e.originalArgs=r.originalArgs),e.startedTimeStamp=t.startedTimeStamp}))})).addCase(t.fulfilled,((e,{meta:t,payload:r})=>{Sp(e,t.arg.queryCacheKey,(e=>{if(e.requestId!==t.requestId&&!yp(t.arg))return;let{merge:i}=n[t.arg.endpointName];if(e.status="fulfilled",i)if(e.data!==void 0){let{fulfilledTimeStamp:n,arg:a,baseQueryMeta:u,requestId:o}=t,s=hn(e.data,(e=>i(e,r,{arg:a.originalArgs,baseQueryMeta:u,fulfilledTimeStamp:n,requestId:o})));e.data=s}else e.data=r;else e.data=n[t.arg.endpointName].structuralSharing??!0?$h(wr(e.data)?qr(e.data):e.data,r):r;delete e.error,e.fulfilledTimeStamp=t.fulfilledTimeStamp}))})).addCase(t.rejected,((e,{meta:{condition:t,arg:r,requestId:n},error:i,payload:a})=>{Sp(e,r.queryCacheKey,(e=>{if(!t){if(e.requestId!==n)return;e.status="rejected",e.error=a??i}}))})).addMatcher(u,((e,t)=>{let{queries:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&(e[t]=n)}))}}),d=Si({name:`${e}/mutations`,initialState:Op,reducers:{removeMutationResult:{reducer(e,{payload:t}){let r=Ip(t);r in e&&delete e[r]},prepare:Ln()}},extraReducers(e){e.addCase(r.pending,((e,{meta:t,meta:{requestId:r,arg:n,startedTimeStamp:i}})=>{n.track&&(e[Ip(t)]={requestId:r,status:"pending",endpointName:n.endpointName,startedTimeStamp:i})})).addCase(r.fulfilled,((e,{payload:t,meta:r})=>{r.arg.track&&qp(e,r,(e=>{e.requestId===r.requestId&&(e.status="fulfilled",e.data=t,e.fulfilledTimeStamp=r.fulfilledTimeStamp)}))})).addCase(r.rejected,((e,{payload:t,error:r,meta:n})=>{n.arg.track&&qp(e,n,(e=>{e.requestId===n.requestId&&(e.status="rejected",e.error=t??r)}))})).addMatcher(u,((e,t)=>{let{mutations:r}=a(t);for(let[t,n]of Object.entries(r))(n?.status==="fulfilled"||n?.status==="rejected")&&t!==n?.requestId&&(e[t]=n)}))}}),f=Si({name:`${e}/invalidation`,initialState:Op,reducers:{updateProvidedBy:{reducer(e,t){var r,n;let{queryCacheKey:i,providedTags:a}=t.payload;for(let t of Object.values(e))for(let e of Object.values(t)){let t=e.indexOf(i);t!==-1&&e.splice(t,1)}for(let{type:t,id:u}of a){let a=(r=e[t]??(e[t]={}))[n=u||"__internal_without_id"]??(r[n]=[]);a.includes(i)||a.push(i)}},prepare:Ln()}},extraReducers(e){e.addCase(l.actions.removeQueryResult,((e,{payload:{queryCacheKey:t}})=>{for(let r of Object.values(e))for(let e of Object.values(r)){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}})).addMatcher(u,((e,t)=>{var r,n;let{provided:i}=a(t);for(let[t,a]of Object.entries(i))for(let[i,u]of Object.entries(a)){let a=(r=e[t]??(e[t]={}))[n=i||"__internal_without_id"]??(r[n]=[]);for(let e of u)a.includes(e)||a.push(e)}})).addMatcher(Xn(ui(t),ai(t)),((e,t)=>{let r=bp(t,"providesTags",n,o),{queryCacheKey:i}=t.meta.arg;f.caseReducers.updateProvidedBy(e,f.actions.updateProvidedBy({queryCacheKey:i,providedTags:r}))}))}}),h=Si({name:`${e}/subscriptions`,initialState:Op,reducers:{updateSubscriptionOptions(e,t){},unsubscribeQueryResult(e,t){},internal_getRTKQSubscriptions(){}}}),p=Si({name:`${e}/internalSubscriptions`,initialState:Op,reducers:{subscriptionsUpdated:{reducer(e,t){return gn(e,t.payload)},prepare:Ln()}}}),g=Si({name:`${e}/config`,initialState:{online:Bh(),focused:Nh(),middlewareRegistered:!1,...s},reducers:{middlewareRegistered(e,{payload:t}){e.middlewareRegistered=e.middlewareRegistered==="conflict"||i!==t?"conflict":!0}},extraReducers:e=>{e.addCase(op,(e=>{e.online=!0})).addCase(sp,(e=>{e.online=!1})).addCase(ap,(e=>{e.focused=!0})).addCase(up,(e=>{e.focused=!1})).addMatcher(u,(e=>({...e})))}}),y=lr({queries:l.reducer,mutations:d.reducer,provided:f.reducer,subscriptions:p.reducer,config:g.reducer}),v=(e,t)=>y(c.match(t)?void 0:e,t),m={...g.actions,...l.actions,...h.actions,...p.actions,...d.actions,...f.actions,resetApiState:c};return{reducer:v,actions:m}}var xp=Symbol.for("RTKQ/skipToken"),kp={status:"uninitialized"},Cp=hn(kp,(()=>{})),Rp=hn(kp,(()=>{}));function Tp({serializeQueryArgs:e,reducerPath:t,createSelector:r}){let n=e=>Cp,i=e=>Rp;return{buildQuerySelector:o,buildMutationSelector:s,selectInvalidatedBy:c,selectCachedArgsForQuery:l};function a(e){return{...e,...Eh(e.status)}}function u(e){return e[t]}function o(t,i){return o=>{let s=e({queryArgs:o,endpointDefinition:i,endpointName:t});return r(o===xp?n:e=>u(e)?.queries?.[s]??Cp,a)}}function s(){return e=>{let t;return typeof e=="object"?t=Ip(e)??xp:t=e,r(t===xp?i:e=>u(e)?.mutations?.[t]??Rp,a)}}function c(e,r){let n=e[t],i=new Set;for(let e of r.map(hp)){let t=n.provided[e.type];if(!t)continue;let r=(e.id!==void 0?t[e.id]:Uh(Object.values(t)))??[];for(let e of r)i.add(e)}return Uh(Array.from(i.values()).map((e=>{let t=n.queries[e];return t?[{queryCacheKey:e,endpointName:t.endpointName,originalArgs:t.originalArgs}]:[]})))}function l(e,r){return Object.values(e[t].queries).filter((e=>e?.endpointName===r&&e.status!=="uninitialized")).map((e=>e.originalArgs))}}var Fp=WeakMap?new WeakMap:void 0,jp=({endpointName:e,queryArgs:t})=>{let r="",n=Fp?.get(t);if(typeof n=="string")r=n;else{let e=JSON.stringify(t,((e,t)=>(t=typeof t=="bigint"?{$bigint:t.toString()}:t,t=or(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t,t)));or(t)&&Fp?.set(t,e),r=e}return`${e}(${r})`};function Mp(...e){return function(t){let r=kn((e=>t.extractRehydrationInfo?.(e,{reducerPath:t.reducerPath??"api"}))),n={reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1,invalidationBehavior:"delayed",...t,extractRehydrationInfo:r,serializeQueryArgs(e){let r=jp;if("serializeQueryArgs"in e.endpointDefinition){let t=e.endpointDefinition.serializeQueryArgs;r=e=>{let r=t(e);return typeof r=="string"?r:jp({...e,queryArgs:r})}}else t.serializeQueryArgs&&(r=t.serializeQueryArgs);return r(e)},tagTypes:[...t.tagTypes||[]]},i={endpointDefinitions:{},batch(e){e()},apiUid:ci(),extractRehydrationInfo:r,hasRehydrationInfo:kn((e=>r(e)!=null))},a={injectEndpoints:o,enhanceEndpoints({addTagTypes:e,endpoints:t}){if(e)for(let t of e)n.tagTypes.includes(t)||n.tagTypes.push(t);if(t)for(let[e,r]of Object.entries(t))typeof r=="function"?r(i.endpointDefinitions[e]):Object.assign(i.endpointDefinitions[e]||{},r);return a}},u=e.map((e=>e.init(a,n,i)));function o(e){let t=e.endpoints({query:e=>({...e,type:"query"}),mutation:e=>({...e,type:"mutation"})});for(let[r,n]of Object.entries(t)){if(e.overrideExisting!==!0&&r in i.endpointDefinitions){if(e.overrideExisting==="throw")throw new Error(ji(39));continue}i.endpointDefinitions[r]=n;for(let e of u)e.injectEndpoint(r,n)}return a}return a.injectEndpoints({endpoints:t.endpoints})}}function Pp(e,...t){return Object.assign(e,...t)}var Dp=({api:e,queryThunk:t,internalState:r})=>{let n=`${e.reducerPath}/subscriptions`,i=null,a=null,{updateSubscriptionOptions:u,unsubscribeQueryResult:o}=e.internalActions,s=(r,n)=>{var i,a;if(u.match(n)){let{queryCacheKey:e,requestId:t,options:i}=n.payload;return r?.[e]?.[t]&&(r[e][t]=i),!0}if(o.match(n)){let{queryCacheKey:e,requestId:t}=n.payload;return r[e]&&delete r[e][t],!0}if(e.internalActions.removeQueryResult.match(n))return delete r[n.payload.queryCacheKey],!0;if(t.pending.match(n)){let{meta:{arg:e,requestId:t}}=n,a=r[i=e.queryCacheKey]??(r[i]={});return a[`${t}_running`]={},e.subscribe&&(a[t]=e.subscriptionOptions??a[t]??{}),!0}let s=!1;if(t.fulfilled.match(n)||t.rejected.match(n)){let e=r[n.meta.arg.queryCacheKey]||{},t=`${n.meta.requestId}_running`;s||(s=!!e[t]),delete e[t]}if(t.rejected.match(n)){let{meta:{condition:e,arg:t,requestId:i}}=n;if(e&&t.subscribe){let e=r[a=t.queryCacheKey]??(r[a]={});e[i]=t.subscriptionOptions??e[i]??{},s=!0}}return s},c=()=>r.currentSubscriptions,l={getSubscriptions:c,getSubscriptionCount:e=>{let t=c()[e]??{};return Vh(t)},isRequestSubscribed:(e,t)=>!!c()?.[e]?.[t]};return(u,o)=>{if(i||(i=JSON.parse(JSON.stringify(r.currentSubscriptions))),e.util.resetApiState.match(u))return i=r.currentSubscriptions={},a=null,[!0,!1];if(e.internalActions.internal_getRTKQSubscriptions.match(u))return[!1,l];let c=s(r.currentSubscriptions,u),d=!0;if(c){a||(a=setTimeout((()=>{let t=JSON.parse(JSON.stringify(r.currentSubscriptions)),[,n]=pn(i,(()=>t));o.next(e.internalActions.subscriptionsUpdated(n)),i=t,a=null}),500));let s=typeof u.type=="string"&&!!u.type.startsWith(n),c=t.rejected.match(u)&&u.meta.condition&&!!u.meta.arg.subscribe;d=!s&&!c}return[d,!1]}};function Ep(e){for(let t in e)return!1;return!0}var _p=2147483647/1e3-1,$p=({reducerPath:e,api:t,queryThunk:r,context:n,internalState:i})=>{let{removeQueryResult:a,unsubscribeQueryResult:u}=t.internalActions,o=Xn(u.match,r.fulfilled,r.rejected);function s(e){let t=i.currentSubscriptions[e];return!!t&&!Ep(t)}let c={},l=(r,i,a)=>{if(o(r)){let t=i.getState()[e],{queryCacheKey:n}=u.match(r)?r.payload:r.meta.arg;d(n,t.queries[n]?.endpointName,i,t.config)}if(t.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))t&&clearTimeout(t),delete c[e];if(n.hasRehydrationInfo(r)){let t=i.getState()[e],{queries:a}=n.extractRehydrationInfo(r);for(let[e,r]of Object.entries(a))d(e,r?.endpointName,i,t.config)}};function d(e,t,r,i){let u=n.endpointDefinitions[t]?.keepUnusedDataFor??i.keepUnusedDataFor;if(u===1/0)return;let o=Math.max(0,Math.min(u,_p));if(!s(e)){let t=c[e];t&&clearTimeout(t),c[e]=setTimeout((()=>{s(e)||r.dispatch(a({queryCacheKey:e})),delete c[e]}),o*1e3)}}return l},Vp=new Error("Promise never resolved before cacheEntryRemoved."),Up=({api:e,reducerPath:t,context:r,queryThunk:n,mutationThunk:i,internalState:a})=>{let u=oi(n),o=oi(i),s=ui(n,i),c={},l=(r,a,u)=>{let o=d(r);if(n.pending.match(r)){let e=u[t].queries[o],n=a.getState()[t].queries[o];!e&&n&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,o,a,r.meta.requestId)}else if(i.pending.match(r))a.getState()[t].mutations[o]&&f(r.meta.arg.endpointName,r.meta.arg.originalArgs,o,a,r.meta.requestId);else if(s(r)){let e=c[o];e?.valueResolved&&(e.valueResolved({data:r.payload,meta:r.meta.baseQueryMeta}),delete e.valueResolved)}else if(e.internalActions.removeQueryResult.match(r)||e.internalActions.removeMutationResult.match(r)){let e=c[o];e&&(delete c[o],e.cacheEntryRemoved())}else if(e.util.resetApiState.match(r))for(let[e,t]of Object.entries(c))delete c[e],t.cacheEntryRemoved()};function d(t){return u(t)?t.meta.arg.queryCacheKey:o(t)?t.meta.arg.fixedCacheKey??t.meta.requestId:e.internalActions.removeQueryResult.match(t)?t.payload.queryCacheKey:e.internalActions.removeMutationResult.match(t)?Ip(t.payload):""}function f(t,n,i,a,u){let o=r.endpointDefinitions[t],s=o?.onCacheEntryAdded;if(!s)return;let l={},d=new Promise((e=>{l.cacheEntryRemoved=e})),f=Promise.race([new Promise((e=>{l.valueResolved=e})),d.then((()=>{throw Vp}))]);f.catch((()=>{})),c[i]=l;let h=e.endpoints[t].select(o.type==="query"?n:i),p=a.dispatch(((e,t,r)=>r)),g={...a,getCacheEntry:()=>h(a.getState()),requestId:u,extra:p,updateCachedData:o.type==="query"?r=>a.dispatch(e.util.updateQueryData(t,n,r)):void 0,cacheDataLoaded:f,cacheEntryRemoved:d},y=s(n,g);Promise.resolve(y).catch((e=>{if(e!==Vp)throw e}))}return l},Qp=({api:e,context:{apiUid:t},reducerPath:r})=>(r,n)=>{e.util.resetApiState.match(r)&&n.dispatch(e.internalActions.middlewareRegistered(t))},Np=({reducerPath:e,context:t,context:{endpointDefinitions:r},mutationThunk:n,queryThunk:i,api:a,assertTagType:u,refetchQuery:o,internalState:s})=>{let{removeQueryResult:c}=a.internalActions,l=Xn(ui(n),ai(n)),d=Xn(ui(n,i),ii(n,i)),f=[],h=(e,t)=>{l(e)?g(bp(e,"invalidatesTags",r,u),t):d(e)?g([],t):a.util.invalidateTags.match(e)&&g(dp(e.payload,void 0,void 0,void 0,void 0,u),t)};function p(e){for(let t in e.queries)if(e.queries[t]?.status==="pending")return!0;for(let t in e.mutations)if(e.mutations[t]?.status==="pending")return!0;return!1}function g(r,n){let i=n.getState(),u=i[e];if(f.push(...r),u.config.invalidationBehavior==="delayed"&&p(u))return;let l=f;if(f=[],l.length===0)return;let d=a.util.selectInvalidatedBy(i,l);t.batch((()=>{let e=Array.from(d.values());for(let{queryCacheKey:t}of e){let e=u.queries[t],r=s.currentSubscriptions[t]??{};e&&(Vh(r)===0?n.dispatch(c({queryCacheKey:t})):e.status!=="uninitialized"&&n.dispatch(o(e,t)))}}))}return h},Lp=({reducerPath:e,queryThunk:t,api:r,refetchQuery:n,internalState:i})=>{let a={},u=(e,n)=>{(r.internalActions.updateSubscriptionOptions.match(e)||r.internalActions.unsubscribeQueryResult.match(e))&&s(e.payload,n),(t.pending.match(e)||t.rejected.match(e)&&e.meta.condition)&&s(e.meta.arg,n),(t.fulfilled.match(e)||t.rejected.match(e)&&!e.meta.condition)&&o(e.meta.arg,n),r.util.resetApiState.match(e)&&l()};function o({queryCacheKey:t},r){let u=r.getState()[e],s=u.queries[t],c=i.currentSubscriptions[t];if(!s||s.status==="uninitialized")return;let{lowestPollingInterval:l,skipPollingIfUnfocused:f}=d(c);if(!Number.isFinite(l))return;let h=a[t];h?.timeout&&(clearTimeout(h.timeout),h.timeout=void 0);let p=Date.now()+l;a[t]={nextPollTimestamp:p,pollingInterval:l,timeout:setTimeout((()=>{(u.config.focused||!f)&&r.dispatch(n(s,t)),o({queryCacheKey:t},r)}),l)}}function s({queryCacheKey:t},r){let n=r.getState()[e].queries[t],u=i.currentSubscriptions[t];if(!n||n.status==="uninitialized")return;let{lowestPollingInterval:s}=d(u);if(!Number.isFinite(s)){c(t);return}let l=a[t],f=Date.now()+s;(!l||f<l.nextPollTimestamp)&&o({queryCacheKey:t},r)}function c(e){let t=a[e];t?.timeout&&clearTimeout(t.timeout),delete a[e]}function l(){for(let e of Object.keys(a))c(e)}function d(e={}){let t=!1,r=Number.POSITIVE_INFINITY;for(let n in e)e[n].pollingInterval&&(r=Math.min(e[n].pollingInterval,r),t=e[n].skipPollingIfUnfocused||t);return{lowestPollingInterval:r,skipPollingIfUnfocused:t}}return u},Bp=({api:e,context:t,queryThunk:r,mutationThunk:n})=>{let i=ni(r,n),a=ii(r,n),u=ui(r,n),o={};return(r,n)=>{if(i(r)){let{requestId:i,arg:{endpointName:a,originalArgs:u}}=r.meta,s=t.endpointDefinitions[a],c=s?.onQueryStarted;if(c){let t={},r=new Promise(((e,r)=>{t.resolve=e,t.reject=r}));r.catch((()=>{})),o[i]=t;let l=e.endpoints[a].select(s.type==="query"?u:i),d=n.dispatch(((e,t,r)=>r)),f={...n,getCacheEntry:()=>l(n.getState()),requestId:i,extra:d,updateCachedData:s.type==="query"?t=>n.dispatch(e.util.updateQueryData(a,u,t)):void 0,queryFulfilled:r};c(u,f)}}else if(u(r)){let{requestId:e,baseQueryMeta:t}=r.meta;o[e]?.resolve({data:r.payload,meta:t}),delete o[e]}else if(a(r)){let{requestId:e,rejectedWithValue:t,baseQueryMeta:n}=r.meta;o[e]?.reject({error:r.payload??r.error,isUnhandledError:!t,meta:n}),delete o[e]}}},zp=({reducerPath:e,context:t,api:r,refetchQuery:n,internalState:i})=>{let{removeQueryResult:a}=r.internalActions,u=(e,t)=>{ap.match(e)&&o(t,"refetchOnFocus"),op.match(e)&&o(t,"refetchOnReconnect")};function o(r,u){let o=r.getState()[e],s=o.queries,c=i.currentSubscriptions;t.batch((()=>{for(let e of Object.keys(c)){let t=s[e],i=c[e];if(!i||!t)continue;(Object.values(i).some((e=>e[u]===!0))||Object.values(i).every((e=>e[u]===void 0))&&o.config[u])&&(Vh(i)===0?r.dispatch(a({queryCacheKey:e})):t.status!=="uninitialized"&&r.dispatch(n(t,e)))}}))}return u};function Hp(e){let{reducerPath:t,queryThunk:r,api:n,context:i}=e,{apiUid:a}=i,u={invalidateTags:En(`${t}/invalidateTags`)},o=e=>e.type.startsWith(`${t}/`),s=[Qp,$p,Np,Lp,Up,Bp];return{middleware:r=>{let u=!1,l={...e,internalState:{currentSubscriptions:{}},refetchQuery:c,isThisApiSliceAction:o},d=s.map((e=>e(l))),f=Dp(l),h=zp(l);return e=>s=>{if(!hr(s))return e(s);u||(u=!0,r.dispatch(n.internalActions.middlewareRegistered(a)));let c={...r,next:e},l=r.getState(),[p,g]=f(s,c,l),y;if(p?y=e(s):y=g,r.getState()[t]&&(h(s,c,l),o(s)||i.hasRehydrationInfo(s)))for(let e of d)e(s,c,l);return y}},actions:u};function c(e,t,n={}){return r({type:"query",endpointName:e.endpointName,originalArgs:e.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:t,...n})}}var Yp=Symbol(),Jp=({createSelector:e=Rn}={})=>({name:Yp,init(t,{baseQuery:r,tagTypes:n,reducerPath:i,serializeQueryArgs:a,keepUnusedDataFor:u,refetchOnMountOrArgChange:o,refetchOnFocus:s,refetchOnReconnect:c,invalidationBehavior:l},d){dn();let f=e=>e;Object.assign(t,{reducerPath:i,endpoints:{},internalActions:{onOnline:op,onOffline:sp,onFocus:ap,onFocusLost:up},util:{}});let{queryThunk:h,mutationThunk:p,patchQueryData:g,updateQueryData:y,upsertQueryData:v,prefetch:m,buildMatchThunkActions:w}=wp({baseQuery:r,reducerPath:i,context:d,api:t,serializeQueryArgs:a,assertTagType:f}),{reducer:b,actions:S}=Ap({context:d,queryThunk:h,mutationThunk:p,reducerPath:i,assertTagType:f,config:{refetchOnFocus:s,refetchOnReconnect:c,refetchOnMountOrArgChange:o,keepUnusedDataFor:u,reducerPath:i,invalidationBehavior:l}});Pp(t.util,{patchQueryData:g,updateQueryData:y,upsertQueryData:v,prefetch:m,resetApiState:S.resetApiState}),Pp(t.internalActions,S);let{middleware:I,actions:q}=Hp({reducerPath:i,context:d,queryThunk:h,mutationThunk:p,api:t,assertTagType:f});Pp(t.util,q),Pp(t,{reducer:b,middleware:I});let{buildQuerySelector:O,buildMutationSelector:A,selectInvalidatedBy:x,selectCachedArgsForQuery:k}=Tp({serializeQueryArgs:a,reducerPath:i,createSelector:e});Pp(t.util,{selectInvalidatedBy:x,selectCachedArgsForQuery:k});let{buildInitiateQuery:C,buildInitiateMutation:R,getRunningMutationThunk:T,getRunningMutationsThunk:F,getRunningQueriesThunk:j,getRunningQueryThunk:M}=vp({queryThunk:h,mutationThunk:p,api:t,serializeQueryArgs:a,context:d});return Pp(t.util,{getRunningMutationThunk:T,getRunningMutationsThunk:F,getRunningQueryThunk:M,getRunningQueriesThunk:j}),{name:Yp,injectEndpoint(e,r){var n;let i=t;(n=i.endpoints)[e]??(n[e]={}),cp(r)?Pp(i.endpoints[e],{name:e,select:O(e,r),initiate:C(e,r)},w(h,e)):lp(r)&&Pp(i.endpoints[e],{name:e,select:A(),initiate:R(e)},w(p,e))}}}}),Wp=Mp(Jp());var Gp=async(e,t,r)=>{let n=t.getState(),{accessToken:i,organizationId:a,platformUrl:u}=n.configuration,o=n.generatedAnswer.answerConfigurationId,s={...e,headers:{...e?.headers||{},Authorization:`Bearer ${i}`}};try{return{data:Zh({baseUrl:`${u}/rest/organizations/${a}/answer/v1/configs/${o}`})(s,t,r)}}catch(e){return{error:e}}},Kp=Wp({reducerPath:"answer",baseQuery:ip(Gp,{maxRetries:3}),endpoints:()=>({})});var Zp=(e,t)=>{let{answerStyle:r,contentFormat:n}=t;e.answerStyle=r,e.contentFormat=n,e.isStreaming=!0,e.isLoading=!1},Xp=(e,t)=>{e.answer===void 0?e.answer=t.textDelta:typeof t.textDelta=="string"&&(e.answer=e.answer.concat(t.textDelta))},eg=(e,t)=>{e.citations=t.citations},tg=(e,t)=>{e.generated=t.answerGenerated,e.isStreaming=!1},rg=(e,t)=>{e.error={message:t.errorMessage,code:t.code},e.isStreaming=!1,e.isLoading=!1,console.error(`${t.errorMessage} - code ${t.code}`)},ng=(e,t)=>{let r=JSON.parse(e.data);r.finishReason==="ERROR"&&r.errorMessage&&rg(t,r);let n=r.payload.length?JSON.parse(r.payload):{};switch(r.payloadType){case"genqa.headerMessageType":n.answerStyle&&n.contentFormat&&Zp(t,n);break;case"genqa.messageType":n.textDelta&&Xp(t,n);break;case"genqa.citationsType":n.citations&&eg(t,n);break;case"genqa.endOfStreamType":(t.answer?.length||n.answerGenerated)&&tg(t,n);break}},ig=Kp.injectEndpoints({overrideExisting:!0,endpoints:e=>({getAnswer:e.query({queryFn:()=>({data:{answerStyle:void 0,contentFormat:void 0,answer:void 0,citations:void 0,error:void 0,generated:!1,isStreaming:!0,isLoading:!0}}),async onCacheEntryAdded(e,{getState:t,cacheDataLoaded:r,updateCachedData:n}){await r;let{configuration:i,generatedAnswer:a}=t(),{platformUrl:u,organizationId:o,accessToken:s}=i;await Li(`${u}/rest/organizations/${o}/answer/v1/configs/${a.answerConfigurationId}/generate`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json","Accept-Encoding":"*"},fetch,onopen:async e=>{let t=e.headers.get("x-answer-id");t&&n((e=>{e.answerId=t}))},onmessage:e=>{n((t=>{ng(e,t)}))},onerror:e=>{throw e}})}})})}),ag=Rn((e=>Ch(e)?.q),(e=>e.search.requestId),((e,t)=>({q:e,requestId:t}))),ug={},og=(e,t)=>({...ug,[e]:xf(t)?.map((e=>Gd(e,Jd()))).sort(((e,t)=>e.facetId>t.facetId?1:t.facetId>e.facetId?-1:0))}),sg=e=>e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,cg=(e,t)=>{let r=Ch(e)?.q,n=Dh(e),i=Ph(e),a=jh(e)??[];return r&&t==="fetch"&&(ug=og(r,e)),{q:r,pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:a}},...n?.length&&{searchHub:n},...i?.length&&{pipeline:i},...ug[r]?.length&&{facets:ug[r]},...e.fields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="next",options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&e.didYouMean.queryCorrectionMode==="legacy"},...e.pagination&&{numberOfResults:sg(e),firstResult:e.pagination.firstResult},tab:e.configuration.analytics.originLevel2}},lg=e=>ig.endpoints.getAnswer.initiate(cg(e,"fetch")),dg=e=>ig.endpoints.getAnswer.select(cg(e,"select"))(e);var fg=Kn(vu,(e=>e));function hg(){return typeof window<"u"&&typeof document<"u"}function pg(e){let t=e.payload?.analyticsAction;return gg(e)&&!dt(t)}function gg(e){return"type"in e}var yg=e=>t=>r=>{let n;pg(r)&&(n=r.payload.analyticsAction,delete r.payload.analyticsAction);let i=t(r);return gg(r)&&(r.type==="search/executeSearch/fullfilled"&&n===void 0&&console.error("No analytics action associated with search:",r),r.type==="recommendation/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with recommendation:",r),r.type==="productRecommendations/get/fullfilled"&&n===void 0&&console.error("No analytics action associated with product recommendation:",r)),n!==void 0&&e.dispatch(n),i};var vg=d(P());var mg=En("commerce/configuration/updateBasicConfiguration",(e=>Qa(e,{accessToken:Pa,organizationId:Pa,platformUrl:Pa}))),wg=En("commerce/configuration/updateAnalyticsConfiguration",(e=>Qa(e,{enabled:Rl.enabled,source:Rl.source,trackingId:Rl.trackingId}))),bg=En("commerce/configuration/analytics/disable"),Sg=En("commerce/configuration/analytics/enable");var Ig=En("tab/register",(e=>{let t=new It({values:{id:Ma,expression:Da}});return Qa(e,t)})),qg=En("tab/updateActiveTab",(e=>Qa(e,Ma)));function Og(e,t){if(Yi(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+xe;let r=Ji(e,t);return r?be(t,r.environment).analytics:e}var Ag=Kn(ke(),(e=>e.addCase(kl,((e,t)=>{xg(e,t.payload)})).addCase(mg,((e,t)=>{xg(e,t.payload)})).addCase(Cl,((e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)})).addCase(Tl,((e,t)=>{dt(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),dt(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),dt(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),dt(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),dt(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),dt(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),dt(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),dt(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode),dt(t.payload.source)||(e.analytics.source=t.payload.source);let r=(0,vg.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),dt(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),dt(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),dt(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),dt(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),dt(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)})).addCase(wg,((e,t)=>{dt(t.payload.enabled)||(e.analytics.enabled=t.payload.enabled),dt(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),dt(t.payload.source)||(e.analytics.source=t.payload.source)})).addCase(Fl,(e=>{e.analytics.enabled=!1})).addCase(bg,(e=>{e.analytics.enabled=!1})).addCase(jl,(e=>{e.analytics.enabled=!0})).addCase(Sg,(e=>{e.analytics.enabled=!0})).addCase(Ml,((e,t)=>{e.analytics.originLevel2=t.payload.originLevel2})).addCase(Pl,((e,t)=>{e.analytics.originLevel3=t.payload.originLevel3})).addCase(qg,((e,t)=>{e.analytics.originLevel2=t.payload})).addCase(El,((e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}))));function xg(e,t){t.accessToken&&(e.accessToken=t.accessToken),t.organizationId&&(e.organizationId=t.organizationId),t.platformUrl&&(e.platformUrl=t.platformUrl,e.search.apiBaseUrl=`${t.platformUrl}${Ae}`,e.analytics.apiBaseUrl=Og(t.platformUrl,e.organizationId))}var kg=Ag;function Cg(e){return e.instantlyCallable}var Rg=()=>e=>t=>e(Cg(t)?t():t);var Tg=e=>()=>t=>r=>{let n=r;if(!n.error)return t(r);let i=n.error;if(n.payload?.ignored||e.error(i.stack||i.message||i.name||"Error",`Action dispatch error ${n.type}`,r),n.error.name!=="SchemaValidationError")return t(r)},Fg=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n));function jg(e,t){let r={...e},n,i=e=>(t,r)=>{let i=e(t,r);return n?n(i,r):i};return{get combinedReducer(){let e=de(Object.entries(t).filter((([e])=>!(e in r))).map((([e,t])=>[e,()=>t])));return i(lr({...e,...r}))},containsAll(e){return Object.keys(e).every((e=>e in r))},add(e){Object.keys(e).filter((e=>!(e in r))).forEach((t=>r[t]=e[t]))},addCrossReducer(e){n=e}}}function Mg(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var u=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,s=r.maxWait,c=Date.now(),l=[];function d(){if(s!==void 0){var e=Date.now()-c;if(e+t>=s)return s-e}return t}var f=function(){var t=[].slice.call(arguments),r=this;return new Promise((function(n,i){var s=u&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout((function(){if(a=void 0,c=Date.now(),!u){var n=e.apply(r,t);o&&o(n),l.forEach((function(e){return(0,e.resolve)(n)})),l=[]}}),d()),s){var f=e.apply(r,t);return o&&o(f),n(f)}l.push({resolve:n,reject:i})}))};return f.cancel=function(e){a!==void 0&&clearTimeout(a),l.forEach((function(t){return(0,t.reject)(e)})),l=[]},f}function Pg(e,t){let r=0,n=Mg((()=>r=0),500);return i=>a=>async u=>{if(!(typeof u=="function"))return a(u);let o=await a(u);if(!Dg(o))return o;if(typeof t!="function")return e.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),o;if(r>=5)return e.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),o;r++,n();let s=await Eg(t);i.dispatch(kl({accessToken:s})),i.dispatch(u)}}function Dg(e){return e?.error?.name===(new X).name}async function Eg(e){try{return await e()}catch{return""}}function _g({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:i}){return Jn({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:i,shouldHotReload:!1},middleware:e=>e({thunk:{extraArgument:n}}).prepend(...r).concat(Fg(n.logger))})}var $g={configuration:kg,version:fg};function Vg(e,t){let r=e.organizationEndpoints?.analytics||void 0,{analyticsClientMiddleware:n,...i}=e.analytics??{},a={...i,nextApiBaseUrl:`${r}/rest/organizations/${e.organizationId}/events/v1`,apiBaseUrl:r};if(a.analyticsMode!=="next"&&le())return t.info("Analytics disabled since doNotTrack is active."),{...a,enabled:!1};if(a.analyticsMode==="next"&&!i.trackingId)throw new Yg('analytics.trackingId is required when analytics.analyticsMode="next"');return a}function Ug(e,t){let r=Qg(e,t),{accessToken:n,organizationId:i}=e.configuration,{organizationEndpoints:a}=e.configuration,u=a?.platform||e.configuration.platformUrl;zg(e.configuration)&&r.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),Bg(e.configuration)?r.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):Hg(e.configuration)&&r.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${e.configuration.organizationEndpoints?.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),r.dispatch(kl({accessToken:n,organizationId:i,platformUrl:u}));let o=Vg(e.configuration,r.logger);return o&&r.dispatch(Tl(o)),r}function Qg(e,t){let{reducers:r}=e,n=jg({...$g,...r},e.preloadedState??{});e.crossReducer&&n.addCrossReducer(e.crossReducer);let i=t.logger,a=()=>{let e="";try{e=bu(s.state).getMeta("").clientId}catch(e){i.warn("Error while obtaining clientID from relay",e)}return e},u={...t,get relay(){return bu(s.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():hg()?_(a()):$()}},o=Ng(e,u,n),s={addReducers(e){n.containsAll(e)||(n.add(e),o.replaceReducer(n.combinedReducer))},dispatch:o.dispatch,subscribe:o.subscribe,enableAnalytics(){o.dispatch(jl())},disableAnalytics(){o.dispatch(Fl())},get state(){return o.getState()},get relay(){return bu(this.state)},get navigatorContext(){return e.navigatorContextProvider?e.navigatorContextProvider():hg()?_(a()):$()},logger:i,store:o};return s}function Ng(e,t,r){let{preloadedState:n,configuration:i}=e,a=i.name||"coveo-headless",u=Lg(e,t.logger);return _g({preloadedState:n,reducer:r.combinedReducer,middlewares:u,thunkExtraArguments:t,name:a})}function Lg(e,t){let{renewAccessToken:r}=e.configuration,n=Pg(t,r);return[Rg,n,Tg(t),yg].concat(ig.middleware,e.middlewares||[])}function Bg(e){return ct(e.organizationEndpoints)}function zg(e){return!dt(e.platformUrl)||dt(e.organizationEndpoints?.platform)}function Hg(e){let{platform:t}=e.organizationEndpoints;if(ct(t))return!1;let r=Wi(t);return r&&r.organizationId!==e.organizationId}var Yg=class extends Error{constructor(e){super(e),this.name="InvalidEngineConfiguration"}};var Jg=d(p());function Wg(e){return(0,Jg.default)({name:"@coveo/headless",level:e?.level||"warn",formatters:{log:e?.logFormatter}})}function Gg(e,t){let r=Kg(e),n=Ua,i=Zg(e);return{analyticsClientMiddleware:r,validatePayload:n,preprocessRequest:i,logger:t}}function Kg(e){let{analytics:t}=e,r=(e,t)=>t;return t?.analyticsClientMiddleware||r}function Zg(e){return e.preprocessRequest||aa}var Xg=d(T());var ey=(e,t,r,n,i,a)=>{let u=e[t];dt(u)||dt(i)||i!==u&&i!==n&&(a.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),a.warn(`To remove this warning, make sure that access token value [${u}] matches engine configuration value [${r}]`))},ty=(e,t)=>!(dt(e)||t===e),ry=e=>{try{let t=typeof atob<"u"?atob:Xg.atob,r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(r);if(!n)return!1;let i=decodeURIComponent(n.split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join(""));return JSON.parse(i)}catch{return!1}},ny=(e,t)=>(ty(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),iy=(e,t,r,n)=>(ey(e,"searchHub",t.searchHub,it(),r,n),ny(e,t)),ay=(e,t)=>(ty(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),uy=(e,t,r,n)=>(ey(e,"pipeline",t.pipeline,tt(),r,n),ay(e,t)),oy=(e,t)=>(ty(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),sy=(e,t,r,n)=>(ey(e,"userDisplayName",t.configuration.analytics.userDisplayName,ke().analytics.userDisplayName,r,n),oy(e,t)),cy=e=>Kn({},(t=>{t.addCase(Jl,((t,r)=>{let n=ry(t.configuration.accessToken);return n?iy(n,t,r.payload,e):t})).addCase(Hl,((t,r)=>{let n=ry(t.configuration.accessToken);return n?uy(n,t,r.payload,e):t})).addCase(kl,((e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=ry(r);return n?[ay,ny,oy].reduce(((e,t)=>t(n,e)),e):e})).addCase(Cl,((t,r)=>{let n=ry(t.configuration.accessToken);if(!n)return t;let i=iy(n,t,r.payload.searchHub,e);return uy(n,i,r.payload?.pipeline,e)})).addCase(Tl,((t,r)=>{let n=ry(t.configuration.accessToken);return n?sy(n,t,r.payload.userDisplayName,e):t}))}));var ly={organizationId:Ma,accessToken:Ma,platformUrl:new bt({required:!1,emptyAllowed:!1}),name:new bt({required:!1,emptyAllowed:!1}),analytics:new It({options:{required:!1},values:{enabled:new gt({required:!1}),originContext:new bt({required:!1}),originLevel2:new bt({required:!1}),originLevel3:new bt({required:!1}),analyticsMode:new bt({constrainTo:["legacy","next"],required:!1})}})};var dy=new ot({...ly,search:new It({options:{required:!1},values:{pipeline:new bt({required:!1,emptyAllowed:!0}),searchHub:Pa,locale:Pa,timezone:Pa,authenticationProviders:new Ot({required:!1,each:Ma})}})});var fy={debug:Vl,pipeline:Yl,searchHub:Wl,search:kh};function hy(e){let t=e.configuration.search,r=e.configuration.organizationEndpoints?.search||void 0;return{...t,apiBaseUrl:r}}function py(e){let t=Wg(e.loggerOptions);gy(e.configuration,t);let r=yy(e.configuration,t),n=vy(t),i={...Gg(e.configuration,t),apiClient:r,streamingClient:n},a={...e,reducers:fy,crossReducer:cy(t)},u=Ug(a,i),o=hy(e);return o&&u.dispatch(Cl(o)),{...u,get state(){return u.state},executeFirstSearch(e=vl()){if(Sh(u.state))return;let t=ih({legacy:e,next:Sl()});u.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e;if(Sh(u.state))return;let n=r&&t==="omniboxFromLink",i=ih({legacy:n?bl(r):wl(),next:n?Ol():ql()});u.dispatch(i)}}}function gy(e,t){try{dy.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}function yy(e,t){let{search:r}=e;return new Ia({logger:t,preprocessRequest:e.preprocessRequest||aa,postprocessSearchResponseMiddleware:r?.preprocessSearchResponseMiddleware||Ta,postprocessFacetSearchResponseMiddleware:r?.preprocessFacetSearchResponseMiddleware||Fa,postprocessQuerySuggestResponseMiddleware:r?.preprocessQuerySuggestResponseMiddleware||ja})}function vy(e){return new ia({logger:e})}function my(e){let t,r=new Map,n=()=>r.size===0,i=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(a){a();let u=Symbol(),o;return n()&&(t=JSON.stringify(this.state),o=e.subscribe((()=>{i(this.state)&&r.forEach((e=>e()))}))),r.set(u,a),()=>{r.delete(u),n()&&o&&o()}},get state(){return{}}}}var wy=En("fields/registerFieldsToInclude",(e=>Qa(e,_a))),by=En("fields/fetchall/enable"),Sy=En("fields/fetchall/disable"),Iy=pi("fields/fetchDescription",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),{accessToken:a,organizationId:u}=i.configuration,{apiBaseUrl:o}=i.configuration.search,s=await t.apiClient.fieldDescriptions({accessToken:a,organizationId:u,url:o});return Oa(s)?n(s.error):s.success.fields}));var qy={collectionField:new bt({emptyAllowed:!1,required:!1}),parentField:new bt({emptyAllowed:!1,required:!1}),childField:new bt({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new ft({min:0,required:!1})},Oy=En("folding/register",(e=>Qa(e,qy))),Ay=pi("folding/loadCollection",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t(),u=a.configuration.analytics.analyticsMode==="legacy"?await wd(a):vd(a,i),o=await n.search({...u,q:xy(a),enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return Oa(o)?r(o.error):{collectionId:e,results:o.success.results,searchUid:o.success.searchUid,rootResult:a.folding.collections[e].result}}));function xy(e){return e.query.q===""?"":e.query.enableQuerySyntax?`${e.query.q} OR @uri`:`( <@- ${e.query.q} -@> ) OR @uri`}var ky=Kn(Ke(),(e=>e.addCase(wy,((e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]})).addCase(by,(e=>{e.fetchAllFields=!0})).addCase(Sy,(e=>{e.fetchAllFields=!1})).addCase(Iy.fulfilled,((e,{payload:t})=>{e.fieldsDescription=t})).addCase(Oy,((e,{payload:t})=>{let r=Ze().fields;e.fieldsToInclude.push(t.collectionField??r.collection,t.parentField??r.parent,t.childField??r.child)}))));new ot({enabled:new gt({default:!1})});var Cy=new Ot({each:Ma,required:!0}),Ry=(e,t)=>(Qa(e,Ma),St(t)?Qa(t,Ma):Qa(t,Cy),{payload:{contextKey:e,contextValue:t}}),Ty=En("context/set",(e=>{for(let[t,r]of Object.entries(e))Ry(t,r);return{payload:e}})),Fy=En("context/add",(e=>Ry(e.contextKey,e.contextValue))),jy=En("context/remove",(e=>Qa(e,Ma)));Kn(Ce(),(e=>{e.addCase(Ty,((e,t)=>{e.contextValues=t.payload})).addCase(Fy,((e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue})).addCase(jy,((e,t)=>{delete e.contextValues[t.payload]})).addCase(zl.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)}))}));new ot({values:new It({options:{required:!1}})});var My=En("dictionaryFieldContext/set",(e=>{let t=new It({options:{required:!0}}),r=Qa(e,t).error;if(r)return{payload:e,error:r};let n=Object.values(e),i=new Ot({each:Da}),a=Qa(n,i).error;return a?{payload:e,error:a}:{payload:e}})),Py=En("dictionaryFieldContext/add",(e=>{let t=new It({options:{required:!0},values:{field:Da,key:Da}});return Qa(e,t)})),Dy=En("dictionaryFieldContext/remove",(e=>Qa(e,Da)));Kn(Te(),(e=>{e.addCase(My,((e,t)=>{e.contextValues=t.payload})).addCase(Py,((e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n})).addCase(Dy,((e,t)=>{delete e.contextValues[t.payload]})).addCase(zl.fulfilled,((e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)}))}));var Ey=Rn((e=>e.queryCorrection.correctedQuery!==""||e.wasCorrectedTo!==""),(e=>e));var _y=(e,t)=>{let r={...je(),...t,correctedQuery:t?.correctedQuery||t?.corrections[0]?.correctedQuery||""};e.queryCorrection=r,e.wasCorrectedTo=r.correctedQuery};var $y=Kn(Me(),(e=>{e.addCase(rf,(e=>{e.enableDidYouMean=!0})).addCase(nf,(e=>{e.enableDidYouMean=!1})).addCase(uf,(e=>{e.automaticallyCorrectQuery=!0})).addCase(af,(e=>{e.automaticallyCorrectQuery=!1})).addCase(ih.pending,(e=>{e.queryCorrection=Fe(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""})).addCase(ih.fulfilled,((e,t)=>{let{queryCorrection:r,queryCorrections:n}=t.payload.response;if(e.queryCorrectionMode==="legacy"){let t=n&&n[0]?n[0]:Fe();e.queryCorrection=t}e.queryCorrectionMode==="next"&&_y(e,r),e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected,e.originalQuery=t.payload.originalQuery})).addCase(of,((e,t)=>{e.wasCorrectedTo=t.payload})).addCase(sf,((e,t)=>{e.queryCorrectionMode=t.payload}))}));function Vy(e,t={}){if(!Uy(e));let r=my(e),{dispatch:n}=e;n(rf()),t.options?.automaticallyCorrectQuery===!1&&n(af()),n(sf(t.options?.queryCorrectionMode||"legacy"));let i=()=>e.state,a=()=>Ey(i().didYouMean);return{...r,get state(){let e=i();return{originalQuery:e.didYouMean.originalQuery,wasCorrectedTo:e.didYouMean.wasCorrectedTo,wasAutomaticallyCorrected:e.didYouMean.wasAutomaticallyCorrected,queryCorrection:e.didYouMean.queryCorrection,hasQueryCorrection:a()}},applyCorrection(){n(of(this.state.queryCorrection.correctedQuery))}}}function Uy(e){return e.addReducers({configuration:kg,didYouMean:$y}),!0}function Qy(e,t={}){let r=Vy(e,t),{dispatch:n}=e;return{...r,get state(){return r.state},applyCorrection(){r.applyCorrection(),n(ih({legacy:cf(),next:df()}))}}}var Ny=Ma;var Ly=En("facetOptions/update",((e={freezeFacetOrder:!0})=>Qa(e,{freezeFacetOrder:new gt({required:!1})}))),By=En("facetOptions/facet/enable",(e=>Qa(e,Ny))),zy=En("facetOptions/facet/disable",(e=>Qa(e,Ny)));var Hy={facetId:Ny,captions:new It({options:{required:!1}}),numberOfValues:new ft({required:!1,min:1}),query:new bt({required:!1,emptyAllowed:!0})};var Yy={path:new Ot({required:!0,each:Ma}),displayValue:Da,rawValue:Da,count:new ft({required:!0,min:0})},Jy=En("categoryFacet/selectSearchResult",(e=>Qa(e,{facetId:Ny,value:new It({values:Yy})}))),Wy=En("categoryFacetSearch/register",(e=>Qa(e,Hy)));function Gy(e,t){let{facetId:r,criterion:n}=t,i=e[r]?.request;i&&(i.sortCriteria=n)}function Ky(e){e&&(e.currentValues=e.currentValues.map((e=>({...e,state:"idle"}))),e.preventAutoSelect=!0)}function Zy(e,t){e&&(e.numberOfValues=t)}function Xy(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function ev(e,t,r){e.currentValues=tv(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function tv(e,t){if(!e.length)return[];let r=rv(e[0],t),n=r;for(let r of e.splice(1)){let e=rv(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}function rv(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var nv={state:new st({required:!0}),numberOfResults:new ft({required:!0,min:0}),value:new bt({required:!0,emptyAllowed:!0}),path:new Ot({required:!0,each:Ma}),moreValuesAvailable:new gt({required:!1})};function iv(e){e.children.forEach((e=>{iv(e)})),Ua({state:e.state,numberOfResults:e.numberOfResults,value:e.value,path:e.path,moreValuesAvailable:e.moreValuesAvailable},nv)}var av={facetId:Ny,field:Ma,delimitingCharacter:new bt({required:!1,emptyAllowed:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new ft({required:!1,min:0}),numberOfValues:new ft({required:!1,min:1}),sortCriteria:new st({required:!1}),basePath:new Ot({required:!1,each:Ma}),filterByBasePath:new gt({required:!1})};var uv=En("categoryFacet/register",(e=>Qa(e,av))),ov=En("categoryFacet/toggleSelectValue",(e=>{try{return Ua(e.facetId,Ma),iv(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:Va(t)}}})),sv=En("categoryFacet/deselectAll",(e=>Qa(e,av.facetId))),cv=En("categoryFacet/updateNumberOfValues",(e=>Qa(e,{facetId:av.facetId,numberOfValues:av.numberOfValues}))),lv=En("categoryFacet/updateSortCriterion",(e=>Qa(e,{facetId:av.facetId,criterion:new st}))),dv=En("categoryFacet/updateBasePath",(e=>Qa(e,{facetId:av.facetId,basePath:new Ot({each:Ma})})));var fv=Kn($e(),(e=>{e.addCase(uv,((e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let i=gv(r),a=i.numberOfValues;e[n]={request:i,initialNumberOfValues:a}})).addCase(zl.fulfilled,((e,t)=>t.payload?.categoryFacetSet??e)).addCase(El,((e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach((t=>{let n=e[t].request,i=r[t]||[];(i.length||n.currentValues.length)&&ev(n,i,e[t].initialNumberOfValues)}))})).addCase(lv,((e,t)=>{let{facetId:r,criterion:n}=t.payload,i=e[r]?.request;i&&(i.sortCriteria=n)})).addCase(dv,((e,t)=>{let{facetId:r,basePath:n}=t.payload,i=e[r]?.request;i&&(i.basePath=[...n])})).addCase(ov,((e,t)=>{let{facetId:r,selection:n,retrieveCount:i}=t.payload,a=e[r]?.request;if(!a)return;let{path:u}=n,o=u.slice(0,u.length-1),s=pv(a,o,i);if(s.length){let e=s[0];e.retrieveChildren=!0,e.state="selected",e.children=[];return}let c=yv(n.value,i);c.state="selected",s.push(c),a.numberOfValues=1})).addCase(sv,((e,t)=>{let r=t.payload;Xy(e,r)})).addCase(Gl,(e=>{Object.keys(e).forEach((t=>Xy(e,t)))})).addCase(Zl,((e,t)=>Object.keys(e).forEach((r=>{e[r].request.preventAutoSelect=!t.payload.allow})))).addCase(cv,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload,i=e[r]?.request;if(i){if(!i.currentValues.length)return Zy(i,n);mv(e,t.payload)}})).addCase(Jy,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r];if(!i)return;let a=[...n.path,n.rawValue];ev(i.request,a,i.initialNumberOfValues)})).addCase(oh.fulfilled,((e,t)=>{vv(e,t.payload.response.facets)})).addCase(ih.fulfilled,((e,t)=>{vv(e,t.payload.response.facets)})).addCase(zy,((e,t)=>{Xy(e,t.payload)}))})),hv={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function pv(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];(!t||e!==t.value)&&(t=yv(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}function gv(e){return{...hv,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...e}}function yv(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function vv(e,t){t.forEach((t=>{if(!wv(e,t))return;let r=t.facetId,n=e[r]?.request;if(!n)return;let i=bv(n,t);n.currentValues=i?[]:n.currentValues,n.preventAutoSelect=!1}))}function mv(e,t){let{facetId:r,numberOfValues:n}=t,i=e[r]?.request.currentValues[0];if(i){for(;i.children.length&&i?.state!=="selected";)i=i.children[0];i.retrieveCount=n}}function wv(e,t){return t.facetId in e}function bv(e,t){let r=dc(e.currentValues),n=dc(t.values);return r.length!==n.length}var Sv=e=>Iv(e.cartItems,e.cart);function Iv(e,t){let r=e.reduce(((e,r)=>{let{productId:n,quantity:i}=t[r];return n in e||(e[n]={productId:n,quantity:0}),e[n].quantity+=i,e}),{});return[...Object.values(r)]}var qv=(e=>(e.Relevance="relevance",e.Fields="fields",e))(qv||{}),Ov=(e=>(e.Ascending="asc",e.Descending="desc",e))(Ov||{});new It({options:{required:!1},values:{by:new xt({enum:qv,required:!0}),fields:new Ot({each:new It({values:{name:new bt,direction:new xt({enum:Ov})}})})}});new It({options:{required:!1},values:{by:new xt({enum:qv,required:!0}),fields:new Ot({each:new It({values:{field:new bt({required:!0}),direction:new xt({enum:Ov}),displayName:new bt}})})}});var Av=(e,t)=>({...xv(e,t),facets:[...Cv(e),...Rv(e)],...e.commerceSort&&{sort:Tv(e.commerceSort.appliedSort)}}),xv=(e,t,r)=>{let{view:n,...i}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,trackingId:e.configuration.analytics.trackingId,...i,...e.configuration.analytics.enabled?{clientId:t.clientId}:{},context:{...t.userAgent?{user:{userAgent:t.userAgent}}:{},view:{...n,...t.referrer?{referrer:t.referrer}:{}},capture:e.configuration.analytics.enabled,cart:Sv(e.cart),source:wu(e.configuration.analytics)},...kv(e,r)}},kv=(e,t)=>{let r=t?e.commercePagination?.recommendations[t]:e.commercePagination?.principal;return r&&{page:r.page,...r.perPage&&{perPage:r.perPage}}};function Cv(e){return!e.facetOrder||!e.commerceFacetSet?[]:e.facetOrder.filter((t=>e.commerceFacetSet?.[t])).map((t=>e.commerceFacetSet[t].request)).filter((e=>e&&e.values.length>0))}function Rv(e){return e.manualNumericFacetSet?Object.entries(e.manualNumericFacetSet).filter((([e,t])=>t.manualRange!==void 0)).map((([e,t])=>({facetId:e,field:e,numberOfValues:1,isFieldExpanded:!1,preventAutoSelect:!0,type:"numericalRange",values:[t.manualRange],initialNumberOfValues:1}))):[]}function Tv(e){return e.by==="relevance"?{sortCriteria:"relevance"}:{sortCriteria:"fields",fields:e.fields.map((({name:e,direction:t})=>({field:e,direction:t})))}}var Fv=(e,t,r,n)=>{let i=`*${t.categoryFacetSearchSet[e].options.query}*`,a=t.commerceFacetSet[Qv(e)]?.request,u=a&&jv(a)?a&&Mv(a):[],o=u.length?[u]:[],s=t.commerceQuery?.query,{url:c,accessToken:l,organizationId:d,trackingId:f,language:h,country:p,currency:g,clientId:y,context:v,...m}=Av(t,n);return{url:c,accessToken:l,organizationId:d,facetId:Qv(e),facetQuery:i,ignorePaths:o,trackingId:f,language:h,country:p,currency:g,clientId:y,context:v,query:s,...!r&&{...m,query:""}}};function jv(e){return e.type==="hierarchical"}var Mv=e=>{let t=[],r=e.values[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Pv=(e,t,r,n)=>{let i=`*${t.facetSearchSet[e].options.query}*`,a=t.commerceQuery?.query,{url:u,accessToken:o,organizationId:s,trackingId:c,language:l,country:d,currency:f,clientId:h,context:p,...g}=Av(t,n);return{url:u,accessToken:o,organizationId:s,facetId:Qv(e),facetQuery:i,trackingId:c,language:l,country:d,currency:f,clientId:h,context:p,query:a,...!r&&{...g,query:""}}};var Dv=e=>async({facetId:t,facetSearchType:r},{getState:n,extra:{validatePayload:i,navigatorContext:a,apiClient:u}})=>{let o=n();i(t,Ma);let s=$v(o,t)||Vv(o,t)?Pv(t,o,e,a):Fv(t,o,e,a),c=await u.facetSearch(s,r);return{facetId:t,response:c}},Ev=pi("commerce/facetSearch/executeSearch",Dv(!1)),_v=pi("commerce/facetSearch/facetFieldSuggest",Dv(!0)),$v=(e,t)=>"facetSearchSet"in e&&e.facetSearchSet[t]!==void 0&&e.commerceFacetSet[t]!==void 0,Vv=(e,t)=>"fieldSuggestionsOrder"in e?e.fieldSuggestionsOrder.some((e=>e.facetId===t&&e.type==="regular")):!1,Uv="field_suggestion:";function Qv(e){return e.startsWith(Uv)?e.slice(Uv.length):e}function Nv(e){return e.startsWith(Uv)?e:`${Uv}${e}`}var Lv=e=>e.error!==void 0;var Bv=Rn((e=>e.commercePagination?.principal.perPage||0),(e=>e));Rn(((e,t)=>e.commercePagination?.recommendations[t]?.perPage||0),(e=>e));var zv=Rn((e=>e.commercePagination?.principal.totalEntries||0),(e=>e));Rn(((e,t)=>e.commercePagination?.recommendations[t]?.totalEntries||0),(e=>e));Rn((e=>e.commercePagination?.principal.page||0),(e=>e));Rn(((e,t)=>e.commercePagination?.recommendations[t]?.page||0),(e=>e));Rn((e=>e[U].productListing.responseId),(e=>e));Rn((e=>e.productListing.responseId),(e=>e));Rn((e=>e.productListing.requestId),(e=>e));var Hv=Rn((e=>e.productListing?.products.length||0),(e=>e)),Yv=Rn((e=>({total:zv(e),current:Hv(e)})),(({current:e,total:t})=>e<t));Rn((e=>e.productListing?.isLoading),(e=>dt(e)?!1:e));Rn((e=>e.productListing?.error),(e=>e??null));var Jv=pi("commerce/productListing/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t(),u=await n.getProductListing(Av(a,i));return Lv(u)?r(u.error):{response:u.success}}));pi("commerce/productListing/fetchMoreProducts",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,navigatorContext:i}})=>{let a=t();if(!Yv(a))return null;let u=Bv(a),o=Hv(a)/u,s=await n.getProductListing({...Av(a,i),page:o});return Lv(s)?r(s.error):{response:s.success}}));var Wv={child:new It({options:{required:!0},values:{permanentid:new bt({required:!0})}})};En("commerce/productListing/promoteChildToParent",(e=>Qa(e,Wv)));var Gv=En("commerce/querySuggest/clear",(e=>Qa(e,{id:Ma}))),Kv=pi("commerce/querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{i(e,{id:Ma});let u=t(),o=em(e.id,u,a),s=await n.querySuggest(o);return Lv(s)?r(s.error):{id:e.id,query:o.query,...s.success}})),Zv=En("commerce/querySuggest/register",(e=>Qa(e,{id:Ma,count:new ft({min:0})}))),Xv=En("commerce/querySuggest/selectSuggestion",(e=>Qa(e,{id:Ma,expression:Da}))),em=(e,t,r)=>{let{view:n,...i}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,trackingId:t.configuration.analytics.trackingId,query:t.querySet[e],...i,...t.configuration.analytics.enabled?{clientId:r.clientId}:{},context:{...r.userAgent?{user:{userAgent:r.userAgent}}:{},view:{...n,...r.referrer?{referrer:r.referrer}:{}},capture:t.configuration.analytics.enabled,cart:Sv(t.cart),source:wu(t.configuration.analytics)}}};En("commerce/facets/core/updateNumberOfValues",(e=>Qa(e,{facetId:Ma,numberOfValues:new ft({required:!0,min:1})})));En("commerce/facets/core/updateIsFieldExpanded",(e=>Qa(e,{facetId:Ma,isFieldExpanded:new gt({required:!0})})));var tm=En("commerce/facets/core/clearAll");En("commerce/facets/core/deselectAllValues",(e=>Qa(e,{facetId:Ma})));En("commerce/facets/core/updateFreezeCurrentValues",(e=>Qa(e,{facetId:Ma,freezeCurrentValues:new gt({required:!0})})));var rm=En("commerce/facets/core/updateAutoSelectionForAll",(e=>Qa(e,{allow:new gt({required:!0})})));var nm={slotId:Ea},im={...nm,pageSize:new ft({required:!0,min:0})};En("commerce/pagination/setPageSize",(e=>Qa(e,im)));var am={...nm,page:new ft({required:!0,min:0})},um=En("commerce/pagination/selectPage",(e=>Qa(e,am)));En("commerce/pagination/nextPage",(e=>Qa(e,nm)));En("commerce/pagination/previousPage",(e=>Qa(e,nm)));En("commerce/pagination/registerRecommendationsSlot",(e=>Qa(e,{slotId:Ma})));var om=En("commerce/query/update",(e=>Qa(e,{query:new bt})));var sm=En("commerce/triggers/query/updateIgnore",(e=>Qa(e,{q:new bt({emptyAllowed:!0,required:!0})}))),cm=En("commerce/triggers/query/applyModification",(e=>Qa(e,new It({values:{originalQuery:Pa,modification:Pa}}))));function lm(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{q:n}:{}}function dm(e,t,r){if(e===void 0)return{};let n=t(e);return n!==r?{sortCriteria:n}:{}}function fm(e,t,r,n){if(e===void 0)return{};let i=Object.entries(e).filter((([e])=>t(e))).map((([e,{request:t}])=>{let n=r(t);return n.length?{[e]:n}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(i).length?{[n]:i}:{}}Rn((e=>e[U].commerceSearch.responseId),(e=>e));Rn((e=>e.commerceSearch.responseId),(e=>e));Rn((e=>e.commerceSearch.requestId),(e=>e));var hm=Rn((e=>e.commerceSearch?.products.length||0),(e=>e)),pm=Rn((e=>({total:zv(e),current:hm(e)})),(({current:e,total:t})=>e<t));Rn((e=>e.commerceSearch?.isLoading),(e=>dt(e)?!1:e));Rn((e=>e.commerceSearch?.error),(e=>e??null));var gm=Rn((e=>e.commerceQuery?.query),(e=>e??""));Rn((e=>e.commerceSearch?.queryExecuted),(e=>e));var ym=(e,t)=>dt(t.queryCorrection?.correctedQuery)?gm(e):t.queryCorrection.correctedQuery;var vm=class{constructor(e){this.config=e}async process(e){return this.processQueryErrorOrContinue(e)??await this.processQueryCorrectionsOrContinue(e)??await this.processQueryTriggersOrContinue(e)??this.processSuccessResponse(e)}async fetchFromAPI(e){let t=(new Date).getTime(),r=await this.extra.apiClient.search(e),n=(new Date).getTime()-t,i=this.getState().commerceQuery.query||"";return{response:r,duration:n,queryExecuted:i,requestExecuted:e}}processSuccessResponse(e){return{...e,response:this.getSuccessResponse(e),originalQuery:this.getCurrentQuery()}}processQueryErrorOrContinue(e){return Lv(e.response)?this.rejectWithValue(e.response.error):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{queryCorrection:n}=r;if(!(!dt(n)&&!dt(n.correctedQuery)))return null;let{correctedQuery:i,originalQuery:a}=r.queryCorrection;return this.onUpdateQueryForCorrection(i),{...e,response:{...r},queryExecuted:ym(t,r),originalQuery:a}}async processQueryTriggersOrContinue(e){let t=this.getSuccessResponse(e);if(!t)return null;let r=t.triggers.find((e=>e.type==="query"))?.content||"";if(!r)return null;if(this.getState().triggers?.queryModification.queryToIgnore===r)return this.dispatch(sm({q:""})),null;let n=this.getCurrentQuery(),i=await this.automaticallyRetryQueryWithTriggerModification(r);return Lv(i.response)?this.rejectWithValue(i.response.error):{...i,response:{...i.response.success},originalQuery:n}}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(cm({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI({...Av(this.getState(),this.navigatorContext),query:e})}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}getState(){return this.config.getState()}get navigatorContext(){return this.config.extra.navigatorContext}getCurrentQuery(){let e=this.getState();return e.commerceQuery.query!==void 0?e.commerceQuery.query:""}getSuccessResponse(e){return Lv(e.response)?null:e.response.success}get extra(){return this.config.extra}onUpdateQueryForCorrection(e){this.dispatch(om({query:e}))}};var mm=pi("commerce/search/executeSearch",(async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:i}=t.extra,a=Av(n,i),u=gm(n),o=new vm(t),s=await o.fetchFromAPI({...a,query:u});return o.process(s)}));pi("commerce/search/fetchMoreProducts",(async(e,t)=>{let{getState:r}=t,n=r(),{navigatorContext:i}=t.extra;if(!pm(n))return null;let a=Bv(n),u=hm(n)/a,o=gm(n),s=Av(n,i),c=new vm(t),l=await c.fetchFromAPI({...s,query:o,page:u});return c.process(l)}));pi("commerce/search/prepareForSearchWithQuery",((e,t)=>{let{dispatch:r}=t;Qa(e,{query:new bt,clearFilters:new gt}),e.clearFilters&&(r(tm()),r(Kl())),r(rm({allow:!0})),r(om({query:e.query})),r(um({page:0}))}));pi("commerce/search/fetchInstantProducts",(async(e,{getState:t,rejectWithValue:r,extra:n})=>{let i=t(),{apiClient:a,navigatorContext:u}=n,{q:o}=e,s=await a.productSuggestions({...Av(i,u),query:o});if(Lv(s))return r(s.error);let c=s.success.products.slice(0,5);return{response:{...s.success,products:c}}}));var wm={child:new It({options:{required:!0},values:{permanentid:new bt({required:!0})}})};En("commerce/search/promoteChildToParent",(e=>Qa(e,wm)));function bm(e,t,r){let{facetId:n}=t;if(e[n])return;let i=!1,a={...Fm,...t},u=r();e[n]={options:a,isLoading:i,response:u,initialNumberOfValues:a.numberOfValues,requestId:""}}function Sm(e,t){let{facetId:r,...n}=t,i=e[r];i&&(i.options={...i.options,...n})}function Im(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function qm(e,t){let r=e[t];r&&(r.isLoading=!1)}function Om(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,a.response=i)}function Am(e,t,r){let{facetId:n,response:i}=t,a=e[n];a&&a.requestId===r&&(a.isLoading=!1,"success"in i&&(a.response=i.success))}function xm(e,t,r,n){let{facetId:i,response:a}=t,u=Nv(i),o=e[u];if(!o)bm(e,{facetId:u},n),o=e[u];else if(o.requestId!==r)return;o.isLoading=!1,"success"in a&&(o.response=a.success)}function km(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets)i.facetId in e||i.type!=="regular"||(e[i.facetId]={options:{...Fm,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Fm.numberOfValues,requestId:r})}function Cm(e,t,r,n){if(t.fieldSuggestionsFacets)for(let i of t.fieldSuggestionsFacets){let a=Nv(i.facetId);a in e||i.type!=="hierarchical"||(e[a]={options:{...Fm,query:t.query??""},isLoading:!1,response:n(),initialNumberOfValues:Fm.numberOfValues,requestId:r})}}function Rm(e,t,r){let{facetId:n}=t,i=e[n];i&&(i.requestId="",i.isLoading=!1,i.response=r(),i.options.numberOfValues=i.initialNumberOfValues,i.options.query=Fm.query)}function Tm(e,t){Object.keys(e).forEach((r=>Rm(e,{facetId:r},t)))}var Fm={captions:{},numberOfValues:10,query:""};var jm=async(e,t,r,n)=>{let i=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:u,query:o,numberOfValues:s}=i,{field:c,delimitingCharacter:l,basePath:d,filterFacetCount:f}=a,h=Mm(a),p=h.length?[h]:[],g=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:d,captions:u,numberOfValues:s,query:g,field:c,delimitingCharacter:l,ignorePaths:p,filterFacetCount:f,type:"hierarchical",...n?{}:{searchContext:(await Hf(t,r)).request}}},Mm=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t};var Pm=async(e,t,r,n)=>{let{captions:i,query:a,numberOfValues:u}=t.facetSearchSet[e].options,{field:o,currentValues:s,filterFacetCount:c}=t.facetSet[e].request,l=s.filter((e=>e.state!=="idle")).map((e=>e.value)),d=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:i,numberOfValues:u,query:d,field:o,ignoreValues:l,filterFacetCount:c,type:"specific",...n?{}:{searchContext:(await Hf(t,r)).request}}};var Dm=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{let u=r(),o;i(t,Ma),Vm(u,t)?o=await Pm(t,u,a,e):o=await jm(t,u,a,e);let s=await n.facetSearch(o);return{facetId:t,response:s}},Em=pi("facetSearch/executeSearch",Dm(!1)),_m=pi("facetSearch/executeSearch",Dm(!0)),$m=En("facetSearch/clearResults",(e=>Qa(e,{facetId:Ny}))),Vm=(e,t)=>e.facetSearchSet!==void 0&&e.facetSet!==void 0&&e.facetSet[t]!==void 0;var Um={facetId:Ny,value:new It({values:{displayValue:Da,rawValue:Da,count:new ft({required:!0,min:0})}})},Qm=En("facetSearch/register",(e=>Qa(e,Hy))),Nm=En("facetSearch/update",(e=>Qa(e,Hy))),Lm=En("facetSearch/toggleSelectValue",(e=>Qa(e,Um))),Bm=En("facetSearch/toggleExcludeValue",(e=>Qa(e,Um)));var zm=Kn(Ue(),(e=>{e.addCase(Wy,((e,t)=>{let r=t.payload;bm(e,r,Hm)})).addCase(Nm,((e,t)=>{Sm(e,t.payload)})).addCase(Ev.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Im(e,r,t.meta.requestId)})).addCase(_v.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Im(e,r,t.meta.requestId)})).addCase(Em.pending,((e,t)=>{let r=t.meta.arg;Im(e,r,t.meta.requestId)})).addCase(Ev.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qm(e,r)})).addCase(_v.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qm(e,Nv(r))})).addCase(Em.rejected,((e,t)=>{let r=t.meta.arg;qm(e,r)})).addCase(Ev.fulfilled,((e,t)=>{Am(e,t.payload,t.meta.requestId)})).addCase(_v.fulfilled,((e,t)=>{xm(e,t.payload,t.meta.requestId,Hm)})).addCase(Kv.fulfilled,((e,t)=>{Cm(e,t.payload,t.meta.requestId,Hm)})).addCase(Em.fulfilled,((e,t)=>{Om(e,t.payload,t.meta.requestId)})).addCase($m,((e,{payload:{facetId:t}})=>{Rm(e,{facetId:t},Hm)})).addCase(Jv.fulfilled,(e=>Tm(e,Hm))).addCase(mm.fulfilled,(e=>Tm(e,Hm))).addCase(ih.fulfilled,(e=>{Tm(e,Hm)}))}));function Hm(){return{moreValuesAvailable:!1,values:[]}}var Ym=e=>rl("analytics/facet/showMore",((t,r)=>{Qa(e,Ny);let n=wc(e,Sc(r));return t.makeFacetShowMore(n)})),Jm=e=>rl("analytics/facet/showLess",((t,r)=>{Qa(e,Ny);let n=wc(e,Sc(r));return t.makeFacetShowLess(n)})),Wm=e=>rl("analytics/facet/sortChange",((t,r)=>{Qa(e,{facetId:Ny,criterion:new st({required:!0})});let{facetId:n,criterion:i}=e,a=Sc(r),u={...wc(n,a),criteria:i};return t.makeFacetUpdateSort(u)})),Gm=e=>rl("analytics/facet/reset",((t,r)=>{Qa(e,Ny);let n=Sc(r),i=wc(e,n);return t.makeFacetClearAll(i)})),Km=e=>rl("analytics/facet/select",((t,r)=>{Qa(e,{facetId:Ny,facetValue:Ma});let n=Sc(r),i=bc(e,n);return t.makeFacetSelect(i)})),Zm=e=>rl("analytics/facet/exclude",((t,r)=>{Qa(e,{facetId:Ny,facetValue:Ma});let n=Sc(r),i=bc(e,n);return t.makeFacetExclude(i)})),Xm=e=>rl("analytics/facet/deselect",((t,r)=>{Qa(e,{facetId:Ny,facetValue:Ma});let n=Sc(r),i=bc(e,n);return t.makeFacetDeselect(i)})),ew=e=>rl("analytics/facet/unexclude",((t,r)=>{Qa(e,{facetId:Ny,facetValue:Ma});let n=Sc(r),i=bc(e,n);return t.makeFacetUnexclude(i)})),tw=e=>rl("analytics/facet/breadcrumb",((t,r)=>{Qa(e,{facetId:Ny,facetValue:Ma});let n=bc(e,Sc(r));return t.makeBreadcrumbFacet(n)})),rw=()=>({actionCause:"facetUpdateSort"}),nw=()=>({actionCause:"facetClearAll"}),iw=()=>({actionCause:"facetSelect"}),aw=()=>({actionCause:"facetExclude"}),uw=()=>({actionCause:"facetDeselect"}),ow=()=>({actionCause:"facetUnexclude"}),sw=()=>({actionCause:"breadcrumbFacet"});var cw=(e,t)=>e.facetOptions.facets[t]?.enabled??!0;var lw=new bt({regex:/^[a-zA-Z0-9-_]+$/}),dw=new bt({required:!0}),fw=new Ot({each:new bt}),hw=new bt,pw=new gt,gw=new gt,yw=new ft({min:0}),vw=new ft({min:1}),mw=new gt({required:!0}),ww=new It,bw=new bt,Sw={captions:ww,numberOfValues:vw,query:bw},Iw=new It({values:Sw}),qw=new It({options:{required:!1},values:{type:new bt({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new Ot({required:!0,max:25,each:new bt({emptyAllowed:!1,required:!0})})}}),Ow=new gt,Aw=new Ot({min:1,max:25,required:!1,each:new bt({emptyAllowed:!1,required:!0})});var xw={value:Ma,numberOfResults:new ft({min:0}),state:Ma};var kw={facetId:Ny,field:new bt({required:!0,emptyAllowed:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new ft({required:!1,min:0}),numberOfValues:new ft({required:!1,min:1}),sortCriteria:new st({required:!1}),resultsMustMatch:new st({required:!1}),allowedValues:qw,customSort:Aw},Cw=En("facet/register",(e=>Qa(e,kw))),Rw=En("facet/toggleSelectValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:xw})}))),Tw=En("facet/toggleExcludeValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:xw})}))),Fw=En("facet/deselectAll",(e=>Qa(e,Ny))),jw=En("facet/updateSortCriterion",(e=>Qa(e,{facetId:Ny,criterion:new st({required:!0})}))),Mw=En("facet/updateNumberOfValues",(e=>Qa(e,{facetId:Ny,numberOfValues:new ft({required:!0,min:1})}))),Pw=En("facet/updateIsFieldExpanded",(e=>Qa(e,{facetId:Ny,isFieldExpanded:new gt({required:!0})}))),Dw=En("facet/updateFreezeCurrentValues",(e=>Qa(e,{facetId:Ny,freezeCurrentValues:new gt({required:!0})})));function Ew(e){let t=_w(e.start,e),r=_w(e.end,e),n=e.endInclusive??!1,i=e.state??"idle";return{start:t,end:r,endInclusive:n,state:i}}function _w(e,t){let{dateFormat:r}=t;return Nd(e)?(Ed(e),_d(e)):typeof e=="string"&&Qd(e)?(Ed(e),e):(Fd(e,r),Rd(Cd(e,r)))}var $w=En("rangeFacet/updateSortCriterion",(e=>Qa(e,{facetId:Ny,criterion:new st({required:!0})})));var Vw={state:Ma,start:new ft({required:!0}),end:new ft({required:!0}),endInclusive:new gt({required:!0}),numberOfResults:new ft({required:!0,min:0})},Uw={start:Ma,end:Ma,endInclusive:new gt({required:!0}),state:Ma,numberOfResults:new ft({required:!0,min:0})},Qw=e=>({facetId:Ny,selection:typeof e.start=="string"?new It({values:Uw}):new It({values:Vw})});var Nw={start:Ma,end:Ma,endInclusive:new gt({required:!0}),state:Ma},Lw={facetId:Ny,field:Ma,currentValues:new Ot({required:!1,each:new It({values:Nw})}),generateAutomaticRanges:new gt({required:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new ft({required:!1,min:0}),numberOfValues:new ft({required:!1,min:1}),sortCriteria:new st({required:!1}),rangeAlgorithm:new st({required:!1})};function Bw(e){return Qd(e)?Vd(e):e}function zw(e){e.currentValues&&e.currentValues.forEach((e=>{let{start:t,end:r}=Ew(e);if(Cd(Bw(t)).isAfter(Cd(Bw(r))))throw new Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)}))}var Hw=En("dateFacet/register",(e=>{try{return Ua(e,Lw),zw(e),{payload:e,error:null}}catch(t){return{payload:e,error:Va(t)}}})),Yw=En("dateFacet/toggleSelectValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:Uw})}))),Jw=En("dateFacet/toggleExcludeValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:Uw})}))),Ww=En("dateFacet/updateFacetValues",(e=>{try{return Ua(e,{facetId:Ny,values:new Ot({each:new It({values:Uw})})}),zw({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Va(t)}}})),Gw=$w,Kw=Fw;var Zw={state:Ma,start:new ft({required:!0}),end:new ft({required:!0}),endInclusive:new gt({required:!0})},Xw={facetId:Ny,field:Ma,currentValues:new Ot({required:!1,each:new It({values:Zw})}),generateAutomaticRanges:new gt({required:!0}),filterFacetCount:new gt({required:!1}),injectionDepth:new ft({required:!1,min:0}),numberOfValues:new ft({required:!1,min:1}),sortCriteria:new st({required:!1}),rangeAlgorithm:new st({required:!1})};function eb(e){e.currentValues&&e.currentValues.forEach((({start:e,end:t})=>{if(e>t)throw new Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)}))}var tb=En("numericFacet/register",(e=>{try{return Qa(e,Xw),eb(e),{payload:e,error:null}}catch(t){return{payload:e,error:Va(t)}}})),rb=En("numericFacet/toggleSelectValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:Vw})}))),nb=En("numericFacet/toggleExcludeValue",(e=>Qa(e,{facetId:Ny,selection:new It({values:Vw})}))),ib=En("numericFacet/updateFacetValues",(e=>{try{return Ua(e,{facetId:Ny,values:new Ot({each:new It({values:Vw})})}),eb({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:Va(t)}}})),ab=$w,ub=Fw;var ob=Kn(Ee(),(e=>{e.addCase(Ly,((e,t)=>({...e,...t.payload}))).addCase(ih.fulfilled,(e=>{e.freezeFacetOrder=!1})).addCase(ih.rejected,(e=>{e.freezeFacetOrder=!1})).addCase(zl.fulfilled,((e,t)=>t.payload?.facetOptions??e)).addCase(uv,((e,t)=>{e.facets[t.payload.facetId]=De()})).addCase(Cw,((e,t)=>{e.facets[t.payload.facetId]=De()})).addCase(Hw,((e,t)=>{e.facets[t.payload.facetId]=De()})).addCase(tb,((e,t)=>{e.facets[t.payload.facetId]=De()})).addCase(By,((e,t)=>{e.facets[t.payload].enabled=!0})).addCase(zy,((e,t)=>{e.facets[t.payload].enabled=!1})).addCase(El,((e,t)=>{[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.fExcluded??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{})].forEach((t=>{t in e||(e.facets[t]=De()),e.facets[t].enabled=!0}))}))}));function sb(e,t){let{field:r,state:n}=e;if(!cb(e))return r;let i=`${r}_`,a=lb(i,n);return hb(r,t),`${i}${a}`}function cb(e){let{field:t,state:r}=e;return db(r).some((e=>e&&t in e))}function lb(e,t){let r=db(t).map((e=>Object.keys(e||{}))).reduce(((e,t)=>e.concat(t)),[]);return fb(r,e)+1}function db(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:i}=e;return[t,r,n,i]}function fb(e,t){return e.map((e=>{let r=e.split(t)[1],n=parseInt(r,10);return Number.isNaN(n)?0:n})).sort().pop()??0}function hb(e,t){let r=`A facet with field "${e}" already exists.\n  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}function pb(e,t){let{state:r,logger:n}=e,{field:i,facetId:a}=t;return a||sb({field:i,state:r},n)}var gb=["alphanumeric","occurrences"];var yb=new ot({field:dw,basePath:fw,delimitingCharacter:hw,facetId:lw,facetSearch:Iw,filterByBasePath:pw,filterFacetCount:gw,injectionDepth:yw,numberOfValues:vw,sortCriteria:new bt({constrainTo:gb})});function vb(e,t){if(!mb(e));let r=my(e),{dispatch:n}=e,i=pb(e,t.options),a={...hv,...oe("facetSearch",t.options),field:t.options.field,facetId:i},u={facetSearch:{...Fm,...t.options.facetSearch},...a};La(e,yb,u,"buildCategoryFacet");let o=()=>yc(e.state,i),s=()=>gc(e.state,i),c=()=>cc(e.state),l=()=>cw(e.state,i);return n(uv(a)),{...r,toggleSelect(e){let t=u.numberOfValues;n(ov({facetId:i,selection:e,retrieveCount:t})),n(Ly())},deselectAll(){n(sv(i)),n(Ly())},sortBy(e){n(lv({facetId:i,criterion:e})),n(Ly())},isSortedBy(e){return o().sortCriteria===e},showMoreValues(){let{numberOfValues:e}=u,{activeValue:t,valuesAsTrees:r}=this.state,a=(t?.children.length??r.length)+e;n(cv({facetId:i,numberOfValues:a})),n(Ly())},showLessValues(){let{numberOfValues:e}=u;n(cv({facetId:i,numberOfValues:e})),n(Ly())},enable(){n(By(i))},disable(){n(zy(i))},get state(){let e=o(),t=s(),r=c(),n=l(),a=t?.values??[],d=a.some((e=>e.children.length>0))??!1,{parents:f,values:h}=lc(t?.values),p=dc(a),g=p.length?p[p.length-1]:void 0,y=!!g,v=g?.moreValuesAvailable??t?.moreValuesAvailable??!1,m=g?g.children.length>u.numberOfValues:a.length>u.numberOfValues;return{facetId:i,parents:f,selectedValueAncestry:p,values:h,isHierarchical:d,valuesAsTrees:a,activeValue:g,isLoading:r,hasActiveValues:y,canShowMoreValues:v,canShowLessValues:m,sortCriteria:e.sortCriteria,enabled:n}}}}function mb(e){return e.addReducers({categoryFacetSet:fv,categoryFacetSearchSet:zm,facetOptions:ob,configuration:kg,search:kh}),!0}function wb(e,t){let r=e.dispatch,{options:n,getFacetSearch:i,executeFacetSearchActionCreator:a,executeFieldSuggestActionCreator:u}=t,{facetId:o}=n;return{updateText(e){r(Nm({facetId:o,query:e,numberOfValues:i().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=i();r(Nm({facetId:o,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?u(o):a(o))},search(){r(t.isForFieldSuggestions?u(o):a(o))},clear(){r($m({facetId:o}))},updateCaptions(e){r(Nm({facetId:o,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=i(),{query:n}=r,a=e.values;return{...e,values:a,isLoading:t,query:n}}}}function bb(e,t){let{dispatch:r}=e,n={...Fm,...t.options},{facetId:i}=n,a=()=>"state"in e?e.state.categoryFacetSearchSet[i]:e[U].categoryFacetSearchSet[i];r(Wy(n));let u=wb(e,{options:n,getFacetSearch:a,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:t.executeFacetSearchActionCreator,executeFieldSuggestActionCreator:t.executeFieldSuggestActionCreator});return{...u,select(e){r(Jy({facetId:i,value:e})),t.select(e)},get state(){return u.state}}}function Sb(e,t){let{executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:i,isForFieldSuggestions:a}=t,{dispatch:u}=e,o={...Fm,...t.options},{facetId:s}=o,c=()=>e.state.categoryFacetSearchSet[s],l=bb(e,{options:{...o},executeFacetSearchActionCreator:r,executeFieldSuggestActionCreator:n,select:i,isForFieldSuggestions:a});u(Wy(o));let d=wb(e,{options:o,getFacetSearch:c,isForFieldSuggestions:t.isForFieldSuggestions,executeFacetSearchActionCreator:Em,executeFieldSuggestActionCreator:_m});return{...d,...l,get state(){return{...d.state,...l.state}}}}function Ib(e,t){if(!qb(e));let r=vb(e,t),{dispatch:n}=e,i=()=>r.state.facetId,a=Sb(e,{options:{facetId:i(),...t.options.facetSearch},executeFacetSearchActionCreator:Em,executeFieldSuggestActionCreator:_m,select:e=>{n(Ly()),n(ih({legacy:Km({facetId:i(),facetValue:e.rawValue}),next:iw()}))},isForFieldSuggestions:!1}),{state:u,...o}=a;return{...r,facetSearch:o,toggleSelect(e){r.toggleSelect(e),n(ih({legacy:Ob(i(),e),next:Ab(e)}))},deselectAll(){r.deselectAll(),n(ih({legacy:Gm(i()),next:nw()}))},sortBy(e){r.sortBy(e),n(ih({legacy:Wm({facetId:i(),criterion:e}),next:rw()}))},showMoreValues(){r.showMoreValues(),n(oh({legacy:Ym(i())}))},showLessValues(){r.showLessValues(),n(oh({legacy:Jm(i())}))},get state(){return{...r.state,facetSearch:a.state}}}}function qb(e){return e.addReducers({categoryFacetSet:fv,categoryFacetSearchSet:zm,configuration:kg,search:kh}),!0}function Ob(e,t){let r={facetId:e,facetValue:t.value};return t.state==="selected"?Xm(r):Km(r)}function Ab(e){return e.state==="selected"?uw():iw()}var xb=Intl.supportedValuesOf("currency"),kb=new bt({required:!0,emptyAllowed:!1,constrainTo:xb}),Cb={url:Ma},Rb={language:Ma,country:Ma,currency:kb,view:new It({options:{required:!0},values:Cb})};new ot(Rb);En("commerce/context/set",(e=>Qa(e,Rb)));var Tb=En("commerce/context/setView",(e=>Qa(e,Cb)));var Fb=Kn(Qe(),(e=>{e.addCase(Qm,((e,t)=>{let r=t.payload;bm(e,r,jb)})).addCase(Nm,((e,t)=>{Sm(e,t.payload)})).addCase(Ev.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Im(e,r,t.meta.requestId)})).addCase(_v.pending,((e,t)=>{let{facetId:r}=t.meta.arg;Im(e,Nv(r),t.meta.requestId)})).addCase(Em.pending,((e,t)=>{let r=t.meta.arg;Im(e,r,t.meta.requestId)})).addCase(Ev.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qm(e,r)})).addCase(_v.rejected,((e,t)=>{let{facetId:r}=t.meta.arg;qm(e,Nv(r))})).addCase(Em.rejected,((e,t)=>{let r=t.meta.arg;qm(e,r)})).addCase(Ev.fulfilled,((e,t)=>{Am(e,t.payload,t.meta.requestId)})).addCase(_v.fulfilled,((e,t)=>{xm(e,t.payload,t.meta.requestId,jb)})).addCase(Kv.fulfilled,((e,t)=>{km(e,t.payload,t.meta.requestId,jb)})).addCase(Em.fulfilled,((e,t)=>{Om(e,t.payload,t.meta.requestId)})).addCase($m,((e,{payload:t})=>{Rm(e,t,jb)})).addCase(ih.fulfilled,(e=>{Tm(e,jb)})).addCase(Jv.fulfilled,(e=>Tm(e,jb))).addCase(mm.fulfilled,(e=>Tm(e,jb))).addCase(Tb,(e=>Tm(e,jb)))}));function jb(){return{moreValuesAvailable:!1,values:[]}}var Mb=()=>nl("analytics/productListing/load",(e=>e.makeInterfaceLoad()),(e=>new Uc(e)));En("productlisting/setUrl",(e=>Qa(e,{url:new bt({required:!0,url:!0})})));En("productlisting/setAdditionalFields",(e=>Qa(e,{additionalFields:new Ot({required:!0,each:new bt({required:!0,emptyAllowed:!1})})})));var Pb=pi("productlisting/fetch",(async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:i})=>{let a=t(),{apiClient:u}=i,o=await u.getProducts(await Db(a));return Lv(o)?(r(Sd(o.error)),n(o.error)):{response:o.success,analyticsAction:Mb()}})),Db=async e=>{let t=_b(e),r=await ec(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:e.productListing?.url,...e.configuration.analytics.enabled&&r?{clientId:r}:{},...e.productListing.additionalFields?.length?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&Eb(e.productListing.advancedParameters)?{advancedParameters:e.productListing.advancedParameters||{}}:{},...t.length&&{facets:{requests:t}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...(e.sort?.by||"relevance")!=="relevance"&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}};function Eb(e){return e.debug}function _b(e){return Sf($b(e),e.facetOrder??[])}function $b(e){return[...bf(e.facetSet??{}),...bf(e.numericFacetSet??{}),...bf(e.dateFacetSet??{}),...bf(e.categoryFacetSet??{})]}var Vb=Kn(Le(),(e=>{e.addCase(Cw,((e,t)=>{let{facetId:r}=t.payload;r in e||(e[r]=Ne(Lb(t.payload)))})).addCase(zl.fulfilled,((e,t)=>{if(t.payload&&Object.keys(t.payload.facetSet).length!==0)return t.payload.facetSet})).addCase(El,((e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach((t=>{let{request:i}=e[t],a=r[t]||[],u=n[t]||[],o=a.length+u.length,s=i.currentValues.filter((e=>!a.includes(e.value)&&!u.includes(e.value)));i.currentValues=[...a.map(zb),...u.map(Hb),...s.map(Yb)],i.preventAutoSelect=o>0,i.numberOfValues=Math.max(o,i.numberOfValues)}))})).addCase(Rw,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){Ub(i,n);return}let u=a.state==="selected";a.state=u?"idle":"selected",i.freezeCurrentValues=!0})).addCase(Tw,((e,t)=>{let{facetId:r,selection:n}=t.payload,i=e[r]?.request;if(!i)return;i.preventAutoSelect=!0;let a=i.currentValues.find((e=>e.value===n.value));if(!a){Ub(i,n);return}let u=a.state==="excluded";a.state=u?"idle":"excluded",i.freezeCurrentValues=!0})).addCase(Dw,((e,t)=>{let{facetId:r,freezeCurrentValues:n}=t.payload,i=e[r]?.request;i&&(i.freezeCurrentValues=n)})).addCase(Fw,((e,t)=>{Ky(e[t.payload]?.request)})).addCase(Gl,(e=>{Object.values(e).filter((e=>e.hasBreadcrumbs)).forEach((({request:e})=>Ky(e)))})).addCase(Kl,(e=>{Object.values(e).filter((e=>!e.hasBreadcrumbs)).forEach((({request:e})=>Ky(e)))})).addCase(Zl,((e,t)=>Object.values(e).forEach((e=>{e.request.preventAutoSelect=!t.payload.allow})))).addCase(jw,((e,t)=>{Gy(e,t.payload)})).addCase(Mw,((e,t)=>{let{facetId:r,numberOfValues:n}=t.payload;Zy(e[r]?.request,n)})).addCase(Pw,((e,t)=>{let{facetId:r,isFieldExpanded:n}=t.payload,i=e[r]?.request;i&&(i.isFieldExpanded=n)})).addCase(ih.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>Qb(e[t.facetId]?.request,t)))})).addCase(Pb.fulfilled,((e,t)=>{(t.payload.response?.facets?.results||[]).forEach((t=>Qb(e[t.facetId]?.request,t)))})).addCase(oh.fulfilled,((e,t)=>{t.payload.response.facets.forEach((t=>Qb(e[t.facetId]?.request,t)))})).addCase(Lm,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:u}=i,o=u.find((e=>e.value===a));if(o){o.state="selected";return}let s=zb(a);Ub(i,s),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(Bm,((e,t)=>{let{facetId:r,value:n}=t.payload,i=e[r]?.request;if(!i)return;let{rawValue:a}=n,{currentValues:u}=i,o=u.find((e=>e.value===a));if(o){o.state="excluded";return}let s=Hb(a);Ub(i,s),i.freezeCurrentValues=!0,i.preventAutoSelect=!0})).addCase(zy,((e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];Ky(r)}))}));function Ub(e,t){let{currentValues:r}=e,n=r.findIndex((e=>e.state==="idle")),i=n===-1?r.length:n,a=r.slice(0,i),u=r.slice(i+1);e.currentValues=[...a,t,...u],e.numberOfValues=e.currentValues.length}function Qb(e,t){e&&(e.currentValues=t.values.map(Bb),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var Nb={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function Lb(e){return{...Nb,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...e}}function Bb(e){let{value:t,state:r}=e;return{value:t,state:r}}function zb(e){return{value:e,state:"selected"}}function Hb(e){return{value:e,state:"excluded"}}function Yb(e){return{...e,state:"idle"}}var Jb=e=>e.state==="selected",Wb=e=>e.state==="excluded",Gb=(e,t)=>{let r={facetId:e,facetValue:t.value};return Jb(t)?Xm(r):Km(r)},Kb=e=>Jb(e)?uw():iw(),Zb=(e,t)=>{let r={facetId:e,facetValue:t.value};return Wb(t)?ew(r):Zm(r)},Xb=e=>Wb(e)?ow():aw();function eS(e,t){let{dispatch:r}=e,{options:n,select:i,exclude:a,isForFieldSuggestions:u,executeFacetSearchActionCreator:o,executeFieldSuggestActionCreator:s}=t,{facetId:c}=n,l=()=>"state"in e?e.state.facetSearchSet[c]:e[U].facetSearchSet[c];r(Qm(n));let d=wb(e,{options:n,getFacetSearch:l,isForFieldSuggestions:u,executeFacetSearchActionCreator:o,executeFieldSuggestActionCreator:s});return{...d,select(e){r(Lm({facetId:c,value:e})),i(e)},exclude(e){r(Bm({facetId:c,value:e})),a(e)},singleSelect(e){r(Fw(c)),r(Lm({facetId:c,value:e})),i(e)},singleExclude(e){r(Fw(c)),r(Bm({facetId:c,value:e})),a(e)},get state(){let{values:e}=d.state;return{...d.state,values:e.map((({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r})))}}}}var tS={facetId:Ny,selection:new It({values:xw})},rS=pi("facet/executeToggleSelect",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:i}}=r;i({facetId:e,selection:t},tS),n(Rw({facetId:e,selection:t})),n(Ly())})),nS=pi("facet/executeToggleExclude",(({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:i}}=r;i({facetId:e,selection:t},tS),n(Tw({facetId:e,selection:t})),n(Ly())}));var iS=["allValues","atLeastOneValue"];var aS=["score","alphanumeric","alphanumericDescending","occurrences","automatic"];var uS=new ot({facetId:lw,field:dw,filterFacetCount:gw,injectionDepth:yw,numberOfValues:vw,sortCriteria:new bt({constrainTo:aS}),resultsMustMatch:new bt({constrainTo:iS}),facetSearch:Iw});function oS(e,t,r=uS){if(!sS(e));let{dispatch:n}=e,i=my(e),a=pb(e,t.options),u={...Nb,...oe("facetSearch",t.options),field:t.options.field,facetId:a},o={facetSearch:{...Fm,...t.options.facetSearch},...u};La(e,r,o,"buildFacet");let s=()=>ac(e.state,a),c=()=>oc(e.state,a),l=()=>cc(e.state),d=()=>cw(e.state,a),f=()=>{let{currentValues:e}=s();return e.filter((e=>e.state!=="idle")).length},h=()=>{let{currentValues:e}=s(),t=o.numberOfValues,r=!!e.find((e=>e.state==="idle"));return t<e.length&&r};return n(Cw(u)),{...i,toggleSelect:e=>n(rS({facetId:o.facetId,selection:e})),toggleExclude:e=>n(nS({facetId:o.facetId,selection:e})),toggleSingleSelect:function(e){e.state==="idle"&&n(Fw(a)),this.toggleSelect(e)},toggleSingleExclude:function(e){e.state==="idle"&&n(Fw(a)),this.toggleExclude(e)},isValueSelected:Jb,isValueExcluded:Wb,deselectAll(){n(Fw(a)),n(Ly())},sortBy(e){n(jw({facetId:a,criterion:e})),n(Ly())},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=s().numberOfValues,t=o.numberOfValues,r=t-e%t,i=e+r;n(Mw({facetId:a,numberOfValues:i})),n(Pw({facetId:a,isFieldExpanded:!0})),n(Ly())},showLessValues(){let e=o.numberOfValues,t=Math.max(e,f());n(Mw({facetId:a,numberOfValues:t})),n(Pw({facetId:a,isFieldExpanded:!1})),n(Ly())},enable(){n(By(a))},disable(){n(zy(a))},get state(){let e=s(),t=c(),r=l(),n=d(),i;typeof e.sortCriteria=="object"?i=e.sortCriteria.order==="descending"?"alphanumericDescending":"alphanumeric":i=e.sortCriteria;let u=t?t.values:[],o=u.some((e=>e.state!=="idle")),f=t?t.moreValuesAvailable:!1,p=e.resultsMustMatch;return{label:t?.label,facetId:a,values:u,sortCriterion:i,resultsMustMatch:p,isLoading:r,hasActiveValues:o,canShowMoreValues:f,canShowLessValues:h(),enabled:n}}}}function sS(e){return e.addReducers({facetSet:Vb,facetOptions:ob,configuration:kg,facetSearchSet:Fb}),!0}var cS=new ot({facetId:lw,field:dw,filterFacetCount:gw,injectionDepth:yw,numberOfValues:vw,sortCriteria:new bt({constrainTo:aS}),resultsMustMatch:new bt({constrainTo:iS}),facetSearch:Iw,allowedValues:qw,hasBreadcrumbs:Ow,customSort:Aw});function lS(e,t){if(!dS(e));let{dispatch:r}=e,n=oS(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},cS),i=()=>n.state.facetId,a=(()=>{let{facetSearch:n}=t.options;return eS(e,{options:{facetId:i(),...n},select:e=>{r(Ly()),r(ih({legacy:Km({facetId:i(),facetValue:e.rawValue}),next:iw()}))},exclude:e=>{r(Ly()),r(ih({legacy:Zm({facetId:i(),facetValue:e.rawValue}),next:aw()}))},isForFieldSuggestions:!1,executeFacetSearchActionCreator:Em,executeFieldSuggestActionCreator:_m})})(),{state:u,...o}=a;return{...n,facetSearch:o,toggleSelect(e){n.toggleSelect(e),r(ih({legacy:Gb(i(),e),next:Kb(e)}))},toggleExclude(e){n.toggleExclude(e),r(ih({legacy:Zb(i(),e),next:Xb(e)}))},deselectAll(){n.deselectAll(),r(ih({legacy:Gm(i()),next:nw()}))},sortBy(e){n.sortBy(e),r(ih({legacy:Wm({facetId:i(),criterion:e}),next:rw()}))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(oh({legacy:Ym(i())}))},showLessValues(){n.showLessValues(),r(oh({legacy:Jm(i())}))},get state(){return{...n.state,facetSearch:a.state}}}}function dS(e){return e.addReducers({facetSet:Vb,configuration:kg,facetSearchSet:Fb,search:kh}),!0}var fS=e=>e.state==="selected",hS=e=>e.state==="excluded",pS=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return fS(t)?Xm(n):Km(n)},gS=e=>fS(e)?uw():iw(),yS=(e,t)=>{let r=`${t.start}..${t.end}`,n={facetId:e,facetValue:r};return hS(t)?ew(n):Zm(n)};var vS=En("rangeFacet/executeToggleSelect",(e=>Qa(e,Qw(e.selection)))),mS=En("rangeFacet/executeToggleExclude",(e=>Qa(e,Qw(e.selection))));var wS={facetId:Ny,selection:new It({values:Uw})},bS=pi("dateFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,wS),t(Yw(e)),t(vS(e)),t(Ly())})),SS=pi("dateFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,wS),t(Jw(e)),t(mS(e)),t(Ly())}));var IS={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function qS(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let i=FS(r);r.numberOfValues=i,e[n]=t}function OS(e,t,r){let n=e[t]?.request;n&&(n.currentValues=r,n.numberOfValues=FS(n))}function AS(e,t,r){let n=e[t]?.request;if(!n)return;let i=TS(n.currentValues,r);if(!i)return;let a=i.state==="selected";i.state=a?"idle":"selected",n.preventAutoSelect=!0}function xS(e,t,r){let n=e[t]?.request;if(!n)return;let i=TS(n.currentValues,r);if(!i)return;let a=i.state==="excluded";i.state=a?"idle":"excluded",n.preventAutoSelect=!0}function kS(e,t){let r=e[t]?.request;r&&r.currentValues.forEach((e=>e.state="idle"))}function CS(e,t){Object.entries(e).forEach((([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach((e=>{let t=!!TS(n,e);return e.state=t?"selected":"idle",e}));let i=n.filter((e=>!TS(r.currentValues,e))),a=r.currentValues;a.push(...i),r.numberOfValues=Math.max(r.numberOfValues,a.length)}))}function RS(e,t,r){t.forEach((t=>{let n=t.facetId,i=e[n]?.request;if(!i)return;let a=r(t.values);i.currentValues=a,i.preventAutoSelect=!1}))}function TS(e,t){let{start:r,end:n}=t;return e.find((e=>e.start===r&&e.end===n))}function FS(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}var jS=Kn(ze(),(e=>{e.addCase(Hw,((e,t)=>{let{payload:r}=t,n=MS(r);qS(e,Be(n))})).addCase(zl.fulfilled,((e,t)=>t.payload?.dateFacetSet??e)).addCase(El,((e,t)=>{let r=t.payload.df||{};CS(e,r)})).addCase(Yw,((e,t)=>{let{facetId:r,selection:n}=t.payload;AS(e,r,n)})).addCase(Jw,((e,t)=>{let{facetId:r,selection:n}=t.payload;xS(e,r,n)})).addCase(Ww,((e,t)=>{let{facetId:r,values:n}=t.payload;OS(e,r,n)})).addCase(Kw,((e,t)=>{kS(e,t.payload)})).addCase(Gl,(e=>{Object.keys(e).forEach((t=>{kS(e,t)}))})).addCase(Gw,((e,t)=>{Gy(e,t.payload)})).addCase(ih.fulfilled,((e,t)=>{let r=t.payload.response.facets;RS(e,r,PS)})).addCase(Pb.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];RS(e,r,PS)})).addCase(zy,((e,t)=>{kS(e,t.payload)}))}));function MS(e){return{...IS,currentValues:[],preventAutoSelect:!1,type:"dateRange",...e}}function PS(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}function DS(e,t){let{facetId:r,getRequest:n}=t,i=my(e),a=e.dispatch,u=()=>cw(e.state,r);return{...i,isValueSelected:fS,isValueExcluded:hS,deselectAll(){a(Fw(r)),a(Ly())},sortBy(e){a($w({facetId:r,criterion:e})),a(Ly())},isSortedBy(e){return this.state.sortCriterion===e},enable(){a(By(r))},disable(){a(zy(r))},get state(){let t=n(),i=ic(e.state,r),a=t.sortCriteria,o=t.resultsMustMatch,s=i?i.values:[],c=cc(e.state),l=u(),d=s.some((e=>e.state!=="idle"));return{facetId:r,values:s,sortCriterion:a,resultsMustMatch:o,hasActiveValues:d,isLoading:c,enabled:l}}}}function ES(e,t){if(!e.generateAutomaticRanges&&e.currentValues===void 0){let e=`currentValues should be specified for ${t} when generateAutomaticRanges is false.`;throw new Error(e)}}var _S=["idle","selected","excluded"];var $S=["ascending","descending"],VS=["even","equiprobable"];var US={start:new bt,end:new bt,endInclusive:new gt,state:new bt({constrainTo:_S})},QS=new ot({facetId:lw,field:dw,generateAutomaticRanges:mw,filterFacetCount:gw,injectionDepth:yw,numberOfValues:vw,currentValues:new Ot({each:new It({values:US})}),sortCriteria:new bt({constrainTo:$S}),rangeAlgorithm:new bt({constrainTo:VS})});function NS(e,t){La(e,QS,t,"buildDateFacet"),zw(t)}function LS(e,t){if(!BS(e));ES(t.options,"buildDateFacet");let r=e.dispatch,n=pb(e,t.options),i={currentValues:[],...t.options,facetId:n};NS(e,i),r(Hw(i));let a=DS(e,{facetId:n,getRequest:()=>e.state.dateFacetSet[n].request});return{...a,toggleSelect:e=>r(bS({facetId:n,selection:e})),toggleSingleSelect:function(e){e.state==="idle"&&r(Fw(n)),this.toggleSelect(e)},toggleExclude:e=>r(SS({facetId:n,selection:e})),toggleSingleExclude:function(e){e.state==="idle"&&r(Fw(n)),this.toggleExclude(e)},get state(){return a.state}}}function BS(e){return e.addReducers({configuration:kg,search:kh,dateFacetSet:jS,facetOptions:ob}),!0}function zS(e,t){let r=LS(e,t),n=e.dispatch,i=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(ih({legacy:Gm(i()),next:nw()}))},sortBy(e){r.sortBy(e),n(ih({legacy:Wm({facetId:i(),criterion:e}),next:rw()}))},toggleSelect:e=>{r.toggleSelect(e),n(ih({legacy:pS(i(),e),next:gS(e)}))},toggleExclude:e=>{r.toggleExclude(e),n(ih({legacy:yS(i(),e)}))},get state(){return r.state}}}var HS=Kn(Ye(),(e=>{e.addCase(tb,((e,t)=>{let{payload:r}=t,n=YS(r);qS(e,He(n))})).addCase(zl.fulfilled,((e,t)=>t.payload?.numericFacetSet??e)).addCase(El,((e,t)=>{let r=t.payload.nf||{};CS(e,r)})).addCase(rb,((e,t)=>{let{facetId:r,selection:n}=t.payload;AS(e,r,n)})).addCase(nb,((e,t)=>{let{facetId:r,selection:n}=t.payload;xS(e,r,n)})).addCase(ib,((e,t)=>{let{facetId:r,values:n}=t.payload;OS(e,r,n)})).addCase(ub,((e,t)=>{kS(e,t.payload)})).addCase(Gl,(e=>{Object.keys(e).forEach((t=>{kS(e,t)}))})).addCase(ab,((e,t)=>{Gy(e,t.payload)})).addCase(ih.fulfilled,((e,t)=>{let r=t.payload.response.facets;RS(e,r,JS)})).addCase(Pb.fulfilled,((e,t)=>{let r=t.payload.response?.facets?.results||[];RS(e,r,JS)})).addCase(zy,((e,t)=>{kS(e,t.payload)}))}));function YS(e){return{...IS,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...e}}function JS(e){return e.map((e=>{let{numberOfResults:t,...r}=e;return r}))}var WS={facetId:Ny,selection:new It({values:Vw})},GS=pi("numericFacet/executeToggleSelect",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,WS),t(rb(e)),t(vS(e)),t(Ly())}));pi("numericFacet/executeToggleExclude",((e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,WS),t(nb(e)),t(mS(e)),t(Ly())}));var KS={start:new ft,end:new ft,endInclusive:new gt,state:new bt({constrainTo:_S})},ZS=new ot({facetId:lw,field:dw,generateAutomaticRanges:mw,filterFacetCount:gw,injectionDepth:yw,numberOfValues:vw,currentValues:new Ot({each:new It({values:KS})}),sortCriteria:new bt({constrainTo:$S}),resultsMustMatch:new bt({constrainTo:iS}),rangeAlgorithm:new bt({constrainTo:VS})});function XS(e,t){La(e,ZS,t,"buildNumericFacet"),eb(t)}function eI(e){return{endInclusive:!1,state:"idle",...e}}function tI(e,t){if(!rI(e));ES(t.options,"buildNumericFacet");let r=e.dispatch,n=pb(e,t.options),i={currentValues:[],...t.options,facetId:n};XS(e,i),r(tb(i));let a=DS(e,{facetId:n,getRequest:()=>e.state.numericFacetSet[n].request});return{...a,toggleSelect:e=>r(GS({facetId:n,selection:e})),toggleSingleSelect(e){e.state==="idle"&&r(Fw(n)),this.toggleSelect(e)},get state(){return a.state}}}function rI(e){return e.addReducers({numericFacetSet:HS,facetOptions:ob,configuration:kg,search:kh}),!0}function nI(e,t){if(!iI(e));let r=tI(e,t),n=e.dispatch,i=()=>r.state.facetId;return{...r,deselectAll(){r.deselectAll(),n(ih({legacy:Gm(i()),next:nw()}))},sortBy(e){r.sortBy(e),n(ih({legacy:Wm({facetId:i(),criterion:e}),next:rw()}))},toggleSelect:e=>{r.toggleSelect(e),n(ih({legacy:pS(i(),e),next:gS(e)}))},get state(){return{...r.state}}}}function iI(e){return e.addReducers({numericFacetSet:HS,configuration:kg,search:kh}),!0}function aI(e,t){return!!t&&t.facetId in e.numericFacetSet}var uI=(e,t)=>{let r=ic(e,t);if(aI(e,r))return r},oI=(e,t)=>(uI(e,t)||{values:[]}).values.filter((e=>e.state!=="idle")),sI=(e,t)=>(uI(e,t)||{values:[]}).values.filter((e=>e.state==="selected"));function cI(e,t){if(!lI(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a=pb(e,t.options),u={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};XS(e,u),n(tb(u));let o=()=>cw(e.state,a);return{...r,clear:()=>{n(ib({facetId:a,values:[]})),n(Ly())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=ib({facetId:a,values:[t]});return r.error?!1:(n(r),n(Ly()),!0)},enable(){n(By(a))},disable(){n(zy(a))},get state(){let e=cc(i()),t=o(),r=sI(i(),a),n=r.length?r[0]:void 0;return{facetId:a,isLoading:e,range:n,enabled:t}}}}function lI(e){return e.addReducers({numericFacetSet:HS,facetOptions:ob,configuration:kg,search:kh}),!0}function dI(e,t){if(!fI(e));let r=cI(e,t),{dispatch:n}=e,i=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(ih({legacy:Gm(i()),next:nw()}))},setRange:e=>{let t=r.setRange(e);return t&&n(ih({legacy:Km({facetId:i(),facetValue:`${e.start}..${e.end}`}),next:iw()})),t},get state(){return{...r.state}}}}function fI(e){return e.addReducers({numericFacetSet:HS,configuration:kg,search:kh}),!0}function hI(e,t){return!!t&&t.facetId in e.dateFacetSet}var pI=(e,t)=>{let r=ic(e,t);if(hI(e,r))return r},gI=(e,t)=>(pI(e,t)||{values:[]}).values.filter((e=>e.state==="selected")),yI=(e,t)=>(pI(e,t)||{values:[]}).values.filter((e=>e.state!=="idle"));function vI(e,t){if(!mI(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a=pb(e,t.options),u={...t.options,currentValues:t.initialState?.range?[{...t.initialState.range,endInclusive:!0,state:"selected"}]:[],generateAutomaticRanges:!1,facetId:a};NS(e,u),n(Hw(u));let o=()=>cw(e.state,a);return{...r,clear:()=>{n(Ww({facetId:a,values:[]})),n(Ly())},setRange:e=>{let t={...e,state:"selected",numberOfResults:0,endInclusive:!0},r=Ww({facetId:a,values:[t]});return r.error?!1:(n(r),n(Ly()),!0)},enable(){n(By(a))},disable(){n(zy(a))},get state(){let e=cc(i()),t=o(),r=gI(i(),a),n=r.length?r[0]:void 0;return{facetId:a,isLoading:e,range:n,enabled:t}}}}function mI(e){return e.addReducers({dateFacetSet:jS,facetOptions:ob,configuration:kg,search:kh}),!0}function wI(e,t){if(!bI(e));let r=vI(e,t),{dispatch:n}=e,i=()=>r.state.facetId;return{...r,clear:()=>{r.clear(),n(ih({legacy:Gm(i()),next:nw()}))},setRange:e=>{let t=r.setRange(e);return t&&n(ih({legacy:Km({facetId:i(),facetValue:`${e.start}..${e.end}`}),next:iw()})),t},get state(){return{...r.state}}}}function bI(e){return e.addReducers({dateFacetSet:jS,configuration:kg,search:kh}),!0}var SI={f:new It,cf:new It,nf:new It,mnf:new It,df:new It,sortCriteria:new It,page:new ft({min:0}),perPage:new ft({min:1})};var II=En("commerce/productListingParameters/restore",(e=>Qa(e,SI)));var qI={q:new bt,...SI};var OI=En("commerce/searchParameters/restore",(e=>Qa(e,qI)));var AI=Kn(Ve(),(e=>{e.addCase(ih.fulfilled,xI).addCase(Jv.fulfilled,xI).addCase(mm.fulfilled,xI).addCase(OI,kI).addCase(II,kI).addCase(zl.fulfilled,((e,t)=>t.payload?.facetOrder??e))}));function xI(e,t){return t.payload.response.facets.map((e=>e.facetId))}function kI(e,t){return[...Object.keys(t.payload.f??{}),...Object.keys(t.payload.nf??{}),...Object.keys(t.payload.df??{}),...Object.keys(t.payload.cf??{}),...Object.keys(t.payload.mnf??{})]}var CI=()=>rl("history/analytics/forward",(e=>e.makeSearchEvent("historyForward"))),RI=()=>rl("history/analytics/backward",(e=>e.makeSearchEvent("historyBackward"))),TI=()=>rl("history/analytics/noresultsback",(e=>e.makeNoResultsBack())),FI=()=>({actionCause:"historyForward"}),jI=()=>({actionCause:"historyBackward"}),MI=()=>({actionCause:"noResultsBack"});var PI=Object.getOwnPropertyNames,DI=Object.getOwnPropertySymbols,EI=Object.prototype.hasOwnProperty;function _I(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function $I(e){return function(t,r,n){if(!t||!r||typeof t!="object"||typeof r!="object")return e(t,r,n);var i=n.cache,a=i.get(t),u=i.get(r);if(a&&u)return a===r&&u===t;i.set(t,r),i.set(r,t);var o=e(t,r,n);return i.delete(t),i.delete(r),o}}function VI(e){return PI(e).concat(DI(e))}var UI=Object.hasOwn||function(e,t){return EI.call(e,t)};function QI(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var NI="_owner",LI=Object.getOwnPropertyDescriptor,BI=Object.keys;function zI(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function HI(e,t){return QI(e.getTime(),t.getTime())}function YI(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.entries(),a=0,u,o;(u=i.next())&&!u.done;){for(var s=t.entries(),c=!1,l=0;(o=s.next())&&!o.done;){var d=u.value,f=d[0],h=d[1],p=o.value,g=p[0],y=p[1];!c&&!n[l]&&(c=r.equals(f,g,a,l,e,t,r)&&r.equals(h,y,f,g,e,t,r))&&(n[l]=!0),l++}if(!c)return!1;a++}return!0}function JI(e,t,r){var n=BI(e),i=n.length;if(BI(t).length!==i)return!1;for(var a;i-- >0;)if(a=n[i],a===NI&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!UI(t,a)||!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function WI(e,t,r){var n=VI(e),i=n.length;if(VI(t).length!==i)return!1;for(var a,u,o;i-- >0;)if(a=n[i],a===NI&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!UI(t,a)||!r.equals(e[a],t[a],a,a,e,t,r)||(u=LI(e,a),o=LI(t,a),(u||o)&&(!u||!o||u.configurable!==o.configurable||u.enumerable!==o.enumerable||u.writable!==o.writable)))return!1;return!0}function GI(e,t){return QI(e.valueOf(),t.valueOf())}function KI(e,t){return e.source===t.source&&e.flags===t.flags}function ZI(e,t,r){if(e.size!==t.size)return!1;for(var n={},i=e.values(),a,u;(a=i.next())&&!a.done;){for(var o=t.values(),s=!1,c=0;(u=o.next())&&!u.done;)!s&&!n[c]&&(s=r.equals(a.value,u.value,a.value,u.value,e,t,r))&&(n[c]=!0),c++;if(!s)return!1}return!0}function XI(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var eq="[object Arguments]",tq="[object Boolean]",rq="[object Date]",nq="[object Map]",iq="[object Number]",aq="[object Object]",uq="[object RegExp]",oq="[object Set]",sq="[object String]",cq=Array.isArray,lq=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,dq=Object.assign,fq=Object.prototype.toString.call.bind(Object.prototype.toString);function hq(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areMapsEqual,i=e.areObjectsEqual,a=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,o=e.areSetsEqual,s=e.areTypedArraysEqual;return function(e,c,l){if(e===c)return!0;if(e==null||c==null||typeof e!="object"||typeof c!="object")return e!==e&&c!==c;var d=e.constructor;if(d!==c.constructor)return!1;if(d===Object)return i(e,c,l);if(cq(e))return t(e,c,l);if(lq!=null&&lq(e))return s(e,c,l);if(d===Date)return r(e,c,l);if(d===RegExp)return u(e,c,l);if(d===Map)return n(e,c,l);if(d===Set)return o(e,c,l);var f=fq(e);return f===rq?r(e,c,l):f===uq?u(e,c,l):f===nq?n(e,c,l):f===oq?o(e,c,l):f===aq?typeof e.then!="function"&&typeof c.then!="function"&&i(e,c,l):f===eq?i(e,c,l):f===tq||f===iq||f===sq?a(e,c,l):!1}}function pq(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?WI:zI,areDatesEqual:HI,areMapsEqual:n?_I(YI,WI):YI,areObjectsEqual:n?WI:JI,arePrimitiveWrappersEqual:GI,areRegExpsEqual:KI,areSetsEqual:n?_I(ZI,WI):ZI,areTypedArraysEqual:n?WI:XI};if(r&&(i=dq({},i,r(i))),t){var a=$I(i.areArraysEqual),u=$I(i.areMapsEqual),o=$I(i.areObjectsEqual),s=$I(i.areSetsEqual);i=dq({},i,{areArraysEqual:a,areMapsEqual:u,areObjectsEqual:o,areSetsEqual:s})}return i}function gq(e){return function(t,r,n,i,a,u,o){return e(t,r,o)}}function yq(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(e,u){var o=n(),s=o.cache,c=s===void 0?t?new WeakMap:void 0:s,l=o.meta;return r(e,u,{cache:c,equals:i,meta:l,strict:a})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var u={cache:void 0,equals:i,meta:void 0,strict:a};return function(e,t){return r(e,t,u)}}vq();vq({strict:!0});vq({circular:!0});vq({circular:!0,strict:!0});vq({createInternalComparator:function(){return QI}});vq({strict:!0,createInternalComparator:function(){return QI}});vq({circular:!0,createInternalComparator:function(){return QI}});vq({circular:!0,createInternalComparator:function(){return QI},strict:!0});function vq(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,u=a===void 0?!1:a,o=pq(e),s=hq(o),c=n?n(s):gq(s);return yq({circular:r,comparator:s,createState:i,equals:c,strict:u})}function mq(e,t,r=((e,t)=>e===t)){return e.length===t.length&&e.findIndex(((e,n)=>!r(t[n],e)))===-1}function wq(e,t){return e.length!==t.length?!1:e.every((e=>t.findIndex((t=>bq(e,t)))!==-1))}var bq=vq({createCustomConfig:e=>({...e,areArraysEqual:wq})});var Sq=Kn(Vt(),(e=>{e.addCase(Nl,((e,t)=>Iq(e,t.payload)?void 0:t.payload))})),Iq=(e,t)=>qq(e.context,t.context)&&Oq(e.dictionaryFieldContext,t.dictionaryFieldContext)&&Pq(e.advancedSearchQueries,t.advancedSearchQueries)&&Aq(e.tabSet,t.tabSet)&&kq(e.staticFilterSet,t.staticFilterSet)&&Rq(e.facetSet,t.facetSet)&&Rq(e.dateFacetSet,t.dateFacetSet)&&Rq(e.numericFacetSet,t.numericFacetSet)&&Fq(e.automaticFacetSet,t.automaticFacetSet)&&Tq(e.categoryFacetSet,t.categoryFacetSet)&&jq(e.pagination,t.pagination)&&Mq(e.query,t.query)&&Dq(e,t)&&Eq(e.pipeline,t.pipeline)&&_q(e.searchHub,t.searchHub)&&$q(e.facetOrder,t.facetOrder)&&Vq(e.debug,t.debug),qq=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Oq=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),Aq=(e,t)=>{let r=xq(e),n=xq(t);return r?.id===n?.id},xq=e=>Object.values(e).find((e=>e.isActive)),kq=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=Cq(e[r]),i=Cq(n);if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Cq=e=>e.values.filter((e=>e.state!=="idle")),Rq=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter((e=>e.state!=="idle")),i=n.request.currentValues.filter((e=>e.state!=="idle"));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Tq=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=dc(e[r]?.request.currentValues).map((({value:e})=>e)),i=dc(n?.request.currentValues).map((({value:e})=>e));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},Fq=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter((e=>e.state!=="idle")),i=n.response.values.filter((e=>e.state!=="idle"));if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},jq=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,Mq=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Pq=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Dq=(e,t)=>e.sortCriteria===t.sortCriteria,Eq=(e,t)=>e===t,_q=(e,t)=>e===t,$q=(e,t)=>mq(e,t),Vq=(e,t)=>e===t,Uq=H({actionTypes:{redo:Ql.type,undo:Ul.type,snapshot:Nl.type},reducer:Sq});function Qq(e){if(!Nq(e));let t=my(e),{dispatch:r}=e,n=()=>e.state,i=e=>e.past.length>0&&!dt(e.present);return{...t,subscribe(t){t();let r=JSON.stringify(n().history.present),i=()=>{let e=JSON.stringify(n().history.present);r!==e&&(r=e,t())};return e.subscribe((()=>i()))},get state(){return n().history},async back(){i(this.state)&&(await r(Ll()),r(ih({legacy:RI(),next:jI()})))},async forward(){!this.state.future.length||!this.state.present||(await r(Bl()),r(ih({legacy:CI(),next:FI()})))},async backOnNoResults(){i(this.state)&&(await r(Ll()),r(ih({legacy:TI(),next:MI()})))}}}function Nq(e){return e.addReducers({history:Uq,configuration:kg,facetOrder:AI}),!0}var Lq=new ft({min:1,default:8,required:!1}),Bq=new ft({min:1,max:20,default:5,required:!1}),zq={desiredCount:Bq,numberOfValues:Lq},Hq=En("automaticFacet/setOptions",(e=>Qa(e,zq))),Yq=En("automaticFacet/deselectAll",(e=>Qa(e,Ny))),Jq=Ma,Wq=En("automaticFacet/toggleSelectValue",(e=>Qa(e,{field:Jq,selection:new It({values:xw})})));var Gq=Kn(et(),(e=>{e.addCase(cd,((e,t)=>{let r=Zq(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=eO(r,n)})).addCase(ld,((e,t)=>{e.numberOfResults=t.payload,e.firstResult=0})).addCase(qg,(e=>{e.firstResult=0})).addCase(dd,((e,t)=>{let r=t.payload;e.firstResult=eO(r,e.numberOfResults)})).addCase(fd,((e,t)=>{let r=t.payload;e.firstResult=eO(r,e.numberOfResults)})).addCase(pd,(e=>{let t=Zq(e),r=Math.max(t-1,1);e.firstResult=eO(r,e.numberOfResults)})).addCase(hd,(e=>{let t=Zq(e),r=Xq(e),n=Math.min(t+1,r);e.firstResult=eO(n,e.numberOfResults)})).addCase(zl.fulfilled,((e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)})).addCase(El,((e,t)=>{e.firstResult=t.payload.firstResult??e.firstResult,e.numberOfResults=t.payload.numberOfResults??e.defaultNumberOfResults})).addCase(ih.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered})).addCase(Pb.fulfilled,((e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount})).addCase(Fw,(e=>{Kq(e)})).addCase(Jw,(e=>{Kq(e)})).addCase(Tw,(e=>{Kq(e)})).addCase(nb,(e=>{Kq(e)})).addCase(Bm,(e=>{Kq(e)})).addCase(Rw,(e=>{Kq(e)})).addCase(sv,(e=>{Kq(e)})).addCase(ov,(e=>{Kq(e)})).addCase(Jy,(e=>{Kq(e)})).addCase(Yw,(e=>{Kq(e)})).addCase(rb,(e=>{Kq(e)})).addCase(Gl,(e=>{Kq(e)})).addCase(Ww,(e=>{Kq(e)})).addCase(ib,(e=>{Kq(e)})).addCase(Lm,(e=>{Kq(e)})).addCase(Wq,(e=>{Kq(e)}))}));function Kq(e){e.firstResult=et().firstResult}function Zq(e){let{firstResult:t,numberOfResults:r}=e;return tO(t,r)}function Xq(e){let{totalCountFiltered:t,numberOfResults:r}=e;return rO(t,r)}function eO(e,t){return(e-1)*t}function tO(e,t){return Math.round(e/t)+1}function rO(e,t){let r=Math.min(e,5e3);return Math.ceil(r/t)}function nO(e){return e.pagination.firstResult}function iO(e){return e.pagination.numberOfResults}function aO(e){return e.pagination.totalCountFiltered}var uO=e=>{let t=nO(e),r=iO(e);return tO(t,r)},oO=e=>{let t=aO(e),r=iO(e);return rO(t,r)},sO=(e,t)=>{let r=uO(e),n=oO(e),i=cO(r,t);return i=lO(i),i=dO(i,n),fO(i)};function cO(e,t){let r=t%2===0,n=Math.floor(t/2),i=r?n-1:n,a=e-n,u=e+i;return{start:a,end:u}}function lO(e){let t=Math.max(1-e.start,0),r=e.start+t,n=e.end+t;return{start:r,end:n}}function dO(e,t){let r=Math.max(e.end-t,0),n=Math.max(e.start-r,1),i=e.end-r;return{start:n,end:i}}function fO(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}var hO=()=>rl("analytics/pager/resize",((e,t)=>e.makePagerResize({currentResultsPerPage:t.pagination?.numberOfResults||et().numberOfResults}))),pO=()=>rl("analytics/pager/number",((e,t)=>e.makePagerNumber({pagerNumber:uO(t)}))),gO=()=>rl("analytics/pager/next",((e,t)=>e.makePagerNext({pagerNumber:uO(t)}))),yO=()=>rl("analytics/pager/previous",((e,t)=>e.makePagerPrevious({pagerNumber:uO(t)}))),vO=()=>({actionCause:"browseResults"});var mO=new ot({numberOfPages:new ft({default:5,min:0})}),wO=new ot({page:new ft({min:1})});function bO(e,t={}){if(!SO(e));let r=my(e),{dispatch:n}=e,i=La(e,mO,t.options,"buildPager"),a=Na(e,wO,t.initialState,"buildPager").page;a&&n(dd(a));let u=()=>uO(e.state),o=()=>{let{numberOfPages:t}=i;return sO(e.state,t)},s=()=>oO(e.state);return{...r,get state(){let e=u(),t=s(),r=e>1&&t>0,n=e<t;return{currentPage:e,currentPages:o(),maxPage:t,hasPreviousPage:r,hasNextPage:n}},selectPage(e){n(fd(e))},nextPage(){n(hd())},previousPage(){n(pd())},isCurrentPage(e){return e===this.state.currentPage}}}function SO(e){return e.addReducers({configuration:kg,pagination:Gq}),!0}function IO(e,t={}){let{dispatch:r}=e,n=bO(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(ah({legacy:pO(),next:vO()}))},nextPage(){n.nextPage(),r(ah({legacy:gO(),next:vO()}))},previousPage(){n.previousPage(),r(ah({legacy:yO(),next:vO()}))}}}function qO(e){if(!OO(e));let t=my(e),r=()=>e.state;return{...t,get state(){return{hasError:r().search.error!==null,error:r().search.error}}}}function OO(e){return e.addReducers({search:kh}),!0}function AO(e){return qO(e)}function xO(e){if(!kO(e));let t=my(e),r=()=>e.state;return{...t,get state(){let e=r();return{hasError:e.search.error!==null,isLoading:e.search.isLoading,hasResults:!!e.search.results.length,firstSearchExecuted:Sh(e)}}}}function kO(e){return e.addReducers({search:kh}),!0}function CO(e){if(!RO(e));let t=my(e),r=xO(e),n=()=>e.state,i=()=>{let e=n().search.duration/1e3;return Math.round((e+Number.EPSILON)*100)/100};return{...t,get state(){return{...r.state,durationInMilliseconds:n().search.duration,durationInSeconds:i(),firstResult:n().pagination.firstResult+1,hasDuration:n().search.duration!==0,hasQuery:n().search.queryExecuted!=="",lastResult:n().pagination.firstResult+n().search.results.length,query:n().search.queryExecuted,total:n().pagination.totalCountFiltered}}}}function RO(e){return e.addReducers({search:kh,pagination:Gq}),!0}function TO(e){return CO(e)}var FO=new ot({fieldsToInclude:new Ot({required:!1,each:new bt({required:!0,emptyAllowed:!1})})});function jO(e,t){if(!MO(e));let r=my(e),n=xO(e),{dispatch:i}=e,a=()=>e.state,u=La(e,FO,t?.options,"buildCoreResultList");u.fieldsToInclude&&i(wy(u.fieldsToInclude));let o=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,s=0,c=0,l=5,d=200,f=!1;return{...r,get state(){let e=a();return{...n.state,results:e.search.results,moreResultsAvailable:o(),searchResponseId:e.search.searchResponseId}},fetchMoreResults:async()=>{if(e.state.search.isLoading)return;if(!o()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-s<d){if(c++,c>=l){s=Date.now(),!f&&e.logger.error(`The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively ${l} times, with little delay. Please verify the conditions under which the function is called.`),f=!0;return}}else c=0;f=!1,t?.fetchMoreResultsActionCreator&&(await i(t?.fetchMoreResultsActionCreator()),s=Date.now())}}}function MO(e){return e.addReducers({search:kh,configuration:kg,fields:ky}),!0}function PO(e,t){return jO(e,{...t,fetchMoreResultsActionCreator:uh})}var DO={results:new Ot({required:!0,each:new It({values:sl})}),maxLength:new ft({required:!0,min:1,default:10})},EO=En("recentResults/registerRecentResults",(e=>Qa(e,DO))),_O=En("recentResults/pushRecentResult",(e=>(hl(e),{payload:e}))),$O=En("recentResults/clearRecentResults");var VO=e=>rl({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(hl(e),t.makeDocumentOpen(il(e,r),ul(e))),__legacy__provider:t=>{let r=new Lc(t);return r.getSearchUID=()=>e.searchUid??"",r},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=il(e,t),n=ul(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});function UO(e,t,r){if(!QO(e));let n=1e3,i={selectionDelay:n,debounceWait:n,...t.options},a;return{select:Mg(r,i.debounceWait,{isImmediate:!0}),beginDelayedSelect(){a=setTimeout(r,i.selectionDelay)},cancelPendingSelect(){a&&clearTimeout(a)}}}function QO(e){return e.addReducers({configuration:kg}),!0}function NO(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(VO(t.options.result)))};return UO(e,t,(()=>{n(),e.dispatch(_O(t.options.result))}))}function LO(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(ed(t.options.result)))};return UO(e,t,(()=>{n(),e.dispatch(_O(t.options.result))}))}var BO=new ot({numberOfResults:new ft({min:0})});function zO(e,t={}){if(!HO(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a=Na(e,BO,t.initialState,"buildResultsPerPage").numberOfResults;return a!==void 0&&n(cd(a)),{...r,get state(){return{numberOfResults:i().pagination.numberOfResults}},set(e){n(ld(e))},isSetTo(e){return e===this.state.numberOfResults}}}function HO(e){return e.addReducers({pagination:Gq,configuration:kg}),!0}function YO(e,t={}){if(!JO(e));let r=zO(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(ah({legacy:hO(),next:vO()}))}}}function JO(e){return e.addReducers({pagination:Gq,configuration:kg}),!0}var WO={id:Ma},GO=En("querySuggest/register",(e=>Qa(e,{...WO,count:new ft({min:0})}))),KO=En("querySuggest/unregister",(e=>Qa(e,WO))),ZO=En("querySuggest/selectSuggestion",(e=>Qa(e,{...WO,expression:Da}))),XO=En("querySuggest/clear",(e=>Qa(e,WO))),eA=pi("querySuggest/fetch",(async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:i,navigatorContext:a}})=>{i(e,WO);let u=e.id,o=await tA(u,t(),a),s=await n.querySuggest(o);return Oa(s)?r(s.error):{id:u,q:o.q,...s.success}})),tA=async(e,t,r)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?tc.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},tab:t.configuration.analytics.originLevel2,...t.configuration.analytics.enabled&&{visitorId:await ec(t.configuration.analytics),...t.configuration.analytics.enabled&&t.configuration.analytics.analyticsMode==="legacy"?await md(t.configuration.analytics):yd(t.configuration.analytics,r)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}});var rA=()=>rl("analytics/searchbox/submit",(e=>e.makeSearchboxSubmit())),nA=()=>({actionCause:"searchboxSubmit"});var iA={id:Ma,query:Da},aA=En("querySet/register",(e=>Qa(e,iA))),uA=En("querySet/update",(e=>Qa(e,iA)));var oA=En("commerce/querySet/register",(e=>Qa(e,iA))),sA=En("commerce/querySet/update",(e=>Qa(e,iA)));var cA=Kn(rt(),(e=>{e.addCase(aA,((e,t)=>hA(e,t.payload))).addCase(oA,((e,t)=>hA(e,t.payload))).addCase(uA,((e,t)=>{let{id:r,query:n}=t.payload;fA(e,r,n)})).addCase(sA,((e,t)=>{let{id:r,query:n}=t.payload;fA(e,r,n)})).addCase(ZO,((e,t)=>{let{id:r,expression:n}=t.payload;fA(e,r,n)})).addCase(Xv,((e,t)=>{let{id:r,expression:n}=t.payload;fA(e,r,n)})).addCase(mm.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;dA(e,r)})).addCase(ih.fulfilled,((e,t)=>{let{queryExecuted:r}=t.payload;dA(e,r)})).addCase(El,lA).addCase(OI,lA).addCase(zl.fulfilled,((e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))fA(e,r,n)}))}));function lA(e,t){dt(t.payload.q)||dA(e,t.payload.q)}function dA(e,t){Object.keys(e).forEach((r=>e[r]=t))}var fA=(e,t,r)=>{t in e&&(e[t]=r)},hA=(e,t)=>{let{id:r,query:n}=t;r in e||(e[r]=n)};var pA=e=>rl("analytics/querySuggest",((t,r)=>{let n=yA(r,e);return t.makeOmniboxAnalytics(n)})),gA=()=>({actionCause:"omniboxAnalytics"});function yA(e,t){let{id:r,suggestion:n}=t,i=e.querySuggest&&e.querySuggest[r];if(!i)throw new Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let a=i.completions.map((e=>e.expression)),u=i.partialQueries.length-1,o=i.partialQueries[u]||"",s=i.responseId;return{suggestionRanking:a.indexOf(n),partialQuery:o,partialQueries:i.partialQueries,suggestions:a,querySuggestResponseId:s}}var vA=()=>({});var mA=Kn(vA(),(e=>e.addCase(GO,((e,t)=>{wA(e,t.payload)})).addCase(Zv,((e,t)=>{wA(e,t.payload)})).addCase(KO,((e,t)=>{delete e[t.payload.id]})).addCase(eA.pending,SA).addCase(eA.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null})).addCase(eA.rejected,IA).addCase(Kv.pending,SA).addCase(Kv.fulfilled,((e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{query:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions.map((e=>({expression:e.expression,highlighted:e.highlighted,score:0,executableConfidence:0}))),r.isLoading=!1,r.error=null})).addCase(Kv.rejected,IA).addCase(XO,((e,t)=>{qA(e,t.payload)})).addCase(Gv,((e,t)=>{qA(e,t.payload)}))));function wA(e,t){let r=t.id;r in e||(e[r]=bA(t))}function bA(e){return{id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...e}}function SA(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function IA(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}function qA(e,t){let r=e[t.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}var OA=Kn(nt(),(e=>e.addCase(gd,((e,t)=>({...e,...t.payload}))).addCase(of,((e,t)=>{e.q=t.payload})).addCase(ZO,((e,t)=>{e.q=t.payload.expression})).addCase(zl.fulfilled,((e,t)=>t.payload?.query??e)).addCase(El,((e,t)=>{e.q=t.payload.q??e.q,e.enableQuerySyntax=t.payload.enableQuerySyntax??e.enableQuerySyntax}))));var AA={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},xA={open:new bt,close:new bt},kA={id:Ma,numberOfSuggestions:new ft({min:0}),enableQuerySyntax:new gt,highlightOptions:new It({values:{notMatchDelimiters:new It({values:xA}),exactMatchDelimiters:new It({values:xA}),correctionDelimiters:new It({values:xA})}}),clearFilters:new gt},CA=new ot(kA);function RA(e,t){if(!FA(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a=t.options?.id||re("search_box"),u={id:a,highlightOptions:{...t.options?.highlightOptions},...AA,...t.options};La(e,CA,u,"buildSearchBox"),n(aA({id:a,query:e.state.query.q})),u.numberOfSuggestions&&n(GO({id:a,count:u.numberOfSuggestions}));let o=()=>e.state.querySet[u.id],s=async e=>{let{enableQuerySyntax:r,clearFilters:i}=u;n(nh({q:o(),enableQuerySyntax:r,clearFilters:i})),t.isNextAnalyticsReady?n(t.executeSearchActionCreator(e)):n(t.executeSearchActionCreator(e.legacy))};return{...r,updateText(e){n(uA({id:a,query:e})),this.showSuggestions()},clear(){n(uA({id:a,query:""})),n(XO({id:a}))},showSuggestions(){u.numberOfSuggestions&&n(t.fetchQuerySuggestionsActionCreator({id:a}))},selectSuggestion(e){n(ZO({id:a,expression:e})),s({legacy:pA({id:a,suggestion:e}),next:gA()}).then((()=>{n(XO({id:a}))}))},submit(e=rA(),t){s({legacy:e,next:t}),n(XO({id:a}))},get state(){let e=i(),t=e.querySuggest[u.id],r=TA(t,u.highlightOptions),n=t?t.isLoading:!1;return{value:o(),suggestions:r,isLoading:e.search.isLoading,isLoadingSuggestions:n}}}}function TA(e,t){return e?e.completions.map((e=>({highlightedValue:Zt(e.highlighted,t),rawValue:e.expression}))):[]}function FA(e){return e.addReducers({query:OA,querySuggest:mA,configuration:kg,querySet:cA,search:kh}),!0}function jA(e,t={}){let r=RA(e,{...t,executeSearchActionCreator:ih,fetchQuerySuggestionsActionCreator:eA,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(rA(),nA())},get state(){return r.state}}}function MA(e){return e?e.expiresAt&&Date.now()>=e.expiresAt:!1}var PA=(e,t)=>{let{id:r}=e;if(!t[r])return t[r]={q:"",cache:{}},t},DA=(e,t)=>{let{q:r,id:n}=e;r&&(t[n].q=r)},EA=(e,t)=>{let{id:r}=e;Object.entries(t[r].cache).forEach((([e,n])=>{MA(n)&&delete t[r].cache[e]}))},_A=(e,t,r)=>{for(let e in t)for(let r in t[e].cache)t[e].cache[r].isActive=!1;if(!UA(e,t)){QA(e,t,r);return}let n=UA(e,t);n.isLoading=!0,n.isActive=!0,n.error=null},$A=(e,t,r)=>{let{id:n,q:i,searchUid:a,cacheTimeout:u,totalCountFiltered:o,duration:s}=e;t[n].cache[i]={...UA(e,t),...r,isActive:!0,searchUid:a,isLoading:!1,error:null,expiresAt:u?u+Date.now():0,totalCountFiltered:o,duration:s}},VA=(e,t)=>{let{id:r,q:n,error:i}=e;t[r].cache[n].error=i||null,t[r].cache[n].isLoading=!1,t[r].cache[n].isActive=!1},UA=(e,t)=>{let{q:r,id:n}=e;return t[n].cache[r]||null},QA=(e,t,r)=>{let{q:n,id:i}=e;t[i].cache[n]={isLoading:!0,error:null,expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0,...r}};var NA=Kn(Qt(),(e=>{e.addCase(ad,((e,t)=>{PA(t.payload,e)})),e.addCase(ud,((e,t)=>{DA(t.payload,e)})),e.addCase(od,((e,t)=>{EA(t.payload,e)})),e.addCase(sh.pending,((e,t)=>{_A(t.meta.arg,e,{results:[]})})),e.addCase(sh.fulfilled,((e,t)=>{let{results:r}=t.payload;$A({...t.payload,...t.meta.arg},e,{results:r})})),e.addCase(sh.rejected,((e,t)=>{VA(t.meta.arg,e)}))}));var LA={searchBoxId:Pa,maxResultsPerQuery:new ft({required:!0,min:1}),cacheTimeout:new ft},BA=new ot(LA);function zA(e,t){if(!HA(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a={searchBoxId:t.options.searchBoxId||re("instant-results-"),cacheTimeout:t.options.cacheTimeout||6e4,maxResultsPerQuery:t.options.maxResultsPerQuery};La(e,BA,a,"buildInstantResults");let u=a.searchBoxId;n(ad({id:u}));let o=()=>i().instantResults[u],s=e=>o().cache[e],c=()=>o().q,l=()=>{let e=s(c());return e?e.isLoading?[]:e.results:[]};return{...r,updateQuery(e){if(!e)return;let t=s(e);(!t||!t.isLoading&&(t.error||MA(t)))&&n(sh({id:u,q:e,maxResultsPerQuery:a.maxResultsPerQuery,cacheTimeout:a.cacheTimeout})),n(ud({id:u,q:e}))},clearExpired(){n(od({id:u}))},get state(){let e=c(),t=s(e);return{q:e,isLoading:t?.isLoading||!1,error:t?.error||null,results:l()}}}}function HA(e){return e.addReducers({instantResults:NA}),!0}var YA=()=>rl("analytics/sort/results",((e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||Et()}))),JA=()=>({actionCause:"resultsSort"});var WA={by:new xt({enum:Ct,required:!0})},GA=En("sortCriteria/register",(e=>ZA(e))),KA=En("sortCriteria/update",(e=>ZA(e))),ZA=e=>At(e)?(e.forEach((e=>Qa(e,WA))),{payload:e}):Qa(e,WA);var XA=Kn(Et(),(e=>{e.addCase(GA,((e,t)=>Rt(t.payload))).addCase(KA,((e,t)=>Rt(t.payload))).addCase(zl.fulfilled,((e,t)=>t.payload?.sortCriteria??e)).addCase(El,((e,t)=>t.payload.sortCriteria??e))}));function ex(e,t){if(!t)return;let r=new ot({criterion:new Ot({each:Dt})}),n=tx(t),i={...t,criterion:n};Na(e,r,i,"buildSort")}function tx(e){return e.criterion?At(e.criterion)?e.criterion:[e.criterion]:[]}function rx(e,t){if(!nx(e));let r=my(e),{dispatch:n}=e,i=()=>e.state;ex(e,t.initialState);let a=t.initialState?.criterion;return a&&n(GA(a)),{...r,sortBy(e){n(KA(e)),n(fd(1))},isSortedBy(e){return this.state.sortCriteria===Rt(e)},get state(){return{sortCriteria:i().sortCriteria}}}}function nx(e){return e.addReducers({configuration:kg,sortCriteria:XA}),!0}function ix(e,t={}){let{dispatch:r}=e,n=rx(e,t),i=()=>r(ih({legacy:YA(),next:JA()}));return{...n,get state(){return n.state},sortBy(e){n.sortBy(e),i()}}}var ax=Ma,ux=new It({options:{required:!0},values:{caption:Da,expression:Da,state:new bt({constrainTo:["idle","selected","excluded"]})}}),ox=new Ot({required:!0,each:ux});var sx=En("staticFilter/register",(e=>Qa(e,{id:ax,values:ox}))),cx=En("staticFilter/toggleSelect",(e=>Qa(e,{id:ax,value:ux}))),lx=En("staticFilter/toggleExclude",(e=>Qa(e,{id:ax,value:ux}))),dx=En("staticFilter/deselectAllFilterValues",(e=>Qa(e,ax))),fx=e=>rl("analytics/staticFilter/deselect",(t=>t.makeStaticFilterDeselect(e))),hx=()=>({actionCause:"staticFilterDeselect"});Kn(_t(),(e=>e.addCase(sx,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)})).addCase(cx,((e,t)=>{let{id:r,value:n}=t.payload,i=e[r];if(!i)return;let a=i.values.find((e=>e.caption===n.caption));if(!a)return;let u=a.state==="selected";a.state=u?"idle":"selected"})).addCase(lx,((e,t)=>{let{id:r,value:n}=t.payload,i=e[r];if(!i)return;let a=i.values.find((e=>e.caption===n.caption));if(!a)return;let u=a.state==="excluded";a.state=u?"idle":"excluded"})).addCase(dx,((e,t)=>{let r=t.payload,n=e[r];n&&n.values.forEach((e=>e.state="idle"))})).addCase(Gl,(e=>{Object.values(e).forEach((e=>{e.values.forEach((e=>e.state="idle"))}))})).addCase(El,((e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach((([e,t])=>{let n=r[e]||[];t.values.forEach((e=>{e.state=n.includes(e.caption)?"selected":"idle"}))}))}))));new ot({id:ax,values:ox});var px=Kn($t(),(e=>{e.addCase(Ig,((e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})})).addCase(qg,((e,t)=>{let r=t.payload;gx(e,r)})).addCase(El,((e,t)=>{let r=t.payload.tab||"";gx(e,r)})).addCase(zl.fulfilled,((e,t)=>t.payload?.tabSet??e))}));function gx(e,t){t in e&&Object.keys(e).forEach((r=>{e[r].isActive=r===t}))}var yx=new ot({expression:Da,id:Ma,clearFiltersOnTabChange:new gt}),vx=new ot({isActive:new gt});function mx(e,t){if(bx(t.options.id),!wx(e));let r=my(e),{dispatch:n}=e;La(e,yx,t.options,"buildTab");let i=Na(e,vx,t.initialState,"buildTab"),{id:a,expression:u}=t.options;return n(Ig({id:a,expression:u})),i.isActive&&n(qg(a)),{...r,select(){t.options.clearFiltersOnTabChange&&n(nh({q:"",clearFilters:!0})),n(qg(a))},get state(){return{isActive:e.state.tabSet[a]?.isActive}}}}function wx(e){return e.addReducers({configuration:kg,tabSet:px}),!0}function bx(e){let t=ke().analytics.originLevel2;if(e===t)throw new Error(`The #id option on the Tab controller cannot use the reserved value "${t}". Please specify a different value.`)}function Sx(e,t){let{dispatch:r}=e,n=mx(e,t),i=()=>r(ih({legacy:ml(),next:Il()}));return{...n,get state(){return n.state},select(){n.select(),i()}}}function Ix(e){if(!qx(e));let t=my(e),r=Rn((e=>e.tabSet),(e=>Object.values(e).find((e=>e.isActive))?.id??""));return{...t,get state(){return{activeTab:r(e.state)}}}}function qx(e){return e.addReducers({tabSet:px}),!0}function Ox(e){let t=Ix(e);return{...t,get state(){return t.state}}}function Ax(e){if(!xx(e));let t=my(e),r=()=>e.state;return{...t,sort(e){return Sf(e,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map((e=>e.facetId))}}}}function xx(e){return e.addReducers({search:kh,facetOptions:ob}),!0}function kx(e){return Ax(e)}var Cx={categoryFacetId:Ny,categoryFacetPath:new Ot({required:!0,each:Ma})},Rx=(e,{categoryFacetId:t,categoryFacetPath:r})=>{let n=e.categoryFacetSet[t]?.request.field,i=`${n}_${t}`;return{categoryFacetId:t,categoryFacetPath:r,categoryFacetField:n,categoryFacetTitle:i}},Tx=e=>rl("analytics/categoryFacet/breadcrumb",((t,r)=>(Qa(e,Cx),t.makeBreadcrumbFacet(Rx(r,e))))),Fx=()=>({actionCause:"breadcrumbFacet"});var jx=()=>rl("analytics/facet/deselectAllBreadcrumbs",(e=>e.makeBreadcrumbResetAll()));var Mx=(e,{facetId:t,selection:r})=>{let n=(e.dateFacetSet[t]||e.numericFacetSet[t]).request.field,i=`${n}_${t}`;return{facetId:t,facetField:n,facetTitle:i,facetRangeEndInclusive:r.endInclusive,facetRangeEnd:`${r.end}`,facetRangeStart:`${r.start}`}},Px=()=>({actionCause:"breadcrumbFacet"});var Dx=e=>rl("analytics/dateFacet/breadcrumb",((t,r)=>{Qa(e,Qw(e.selection));let n=Mx(r,e);return t.makeBreadcrumbFacet(n)})),Ex=Px;var _x=e=>rl("analytics/numericFacet/breadcrumb",((t,r)=>{Qa(e,Qw(e.selection));let n=Mx(r,e);return t.makeBreadcrumbFacet(n)})),$x=Px;var Vx=e=>Object.keys(e.facetSet).map((t=>{let r=e.facetValuesSelector(e.engine.state,t).map((r=>({value:r,deselect:()=>{r.state==="selected"?e.executeToggleSelect({facetId:t,selection:r}):r.state==="excluded"&&e.executeToggleExclude({facetId:t,selection:r})}})));return{facetId:t,field:e.facetSet[t].request.field,values:r}})).filter((e=>e.values.length));function Ux(e){let t=my(e),{dispatch:r}=e;return{...t,get state(){return{facetBreadcrumbs:[],categoryFacetBreadcrumbs:[],numericFacetBreadcrumbs:[],dateFacetBreadcrumbs:[],staticFilterBreadcrumbs:[],hasBreadcrumbs:!1}},deselectAll:()=>{r(Gl())},deselectBreadcrumb(e){e.deselect()}}}function Qx(e){if(!Nx(e));let t=Ux(e),{dispatch:r}=e,n=()=>e.state,i=()=>{let t={engine:e,facetSet:n().facetSet,executeToggleSelect:({facetId:e,selection:t})=>{r(Rw({facetId:e,selection:t})),r(Dw({facetId:e,freezeCurrentValues:!1})),r(ih({legacy:tw({facetId:e,facetValue:t.value}),next:sw()}))},executeToggleExclude:({facetId:e,selection:t})=>{r(Tw({facetId:e,selection:t})),r(Dw({facetId:e,freezeCurrentValues:!1})),r(ih({legacy:tw({facetId:e,facetValue:t.value}),next:sw()}))},facetValuesSelector:sc};return Vx(t)},a=()=>{let t={engine:e,facetSet:n().numericFacetSet,executeToggleSelect:e=>{r(rb(e)),r(ih({legacy:_x(e),next:$x()}))},executeToggleExclude:e=>{r(nb(e)),r(ih({legacy:_x(e),next:$x()}))},facetValuesSelector:oI};return Vx(t)},u=()=>{let t={engine:e,facetSet:n().dateFacetSet,executeToggleSelect:e=>{r(Yw(e)),r(ih({legacy:Dx(e),next:Ex()}))},executeToggleExclude:e=>{r(Jw(e)),r(ih({legacy:Dx(e),next:Ex()}))},facetValuesSelector:yI};return Vx(t)},o=()=>Object.keys(n().categoryFacetSet).map(s).filter((e=>e.path.length)),s=e=>{let t=vc(n(),e);return{facetId:e,field:n().categoryFacetSet[e].request.field,path:t,deselect:()=>{r(sv(e)),r(ih({legacy:Tx({categoryFacetPath:t.map((e=>e.value)),categoryFacetId:e}),next:Fx()}))}}},c=()=>{let e=n().staticFilterSet??{};return Object.values(e).map(l)},l=e=>{let{id:t,values:r}=e,n=r.filter((e=>e.state!=="idle")).map((e=>d(t,e)));return{id:t,values:n}},d=(e,t)=>({value:t,deselect:()=>{let{caption:n,expression:i}=t;t.state==="selected"?r(cx({id:e,value:t})):t.state==="excluded"&&r(lx({id:e,value:t})),r(ih({legacy:fx({staticFilterId:e,staticFilterValue:{caption:n,expression:i}}),next:hx()}))}}),f=()=>{let e=n().automaticFacetSet?.set??{};return Object.values(e).map((e=>h(e.response))).filter((e=>e.values.length>0))},h=e=>{let{field:t,label:r}=e,n=e.values.filter((e=>e.state!=="idle")).map((e=>p(t,e)));return{facetId:t,field:t,label:r,values:n}},p=(e,t)=>({value:t,deselect:()=>{r(Wq({field:e,selection:t})),r(ih({legacy:tw({facetId:e,facetValue:t.value}),next:sw()}))}});function g(){return!![...i(),...a(),...u(),...o(),...c(),...f()].length}return{...t,get state(){return{facetBreadcrumbs:i(),categoryFacetBreadcrumbs:o(),numericFacetBreadcrumbs:a(),dateFacetBreadcrumbs:u(),staticFilterBreadcrumbs:c(),automaticFacetBreadcrumbs:f(),hasBreadcrumbs:g()}},deselectAll:()=>{t.deselectAll(),r(ih({legacy:jx()}))}}}function Nx(e){return e.addReducers({configuration:kg,search:kh,facetSet:Vb,numericFacetSet:HS,dateFacetSet:jS,categoryFacetSet:fv}),!0}function Lx(e){return e.type==="redirect"}var Bx=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(Lx);return e.length?e[0].content:null}};var zx=En("standaloneSearchBox/register",(e=>Qa(e,{id:Ma,redirectionUrl:Ma,overwrite:new gt({required:!1})}))),Hx=En("standaloneSearchBox/updateRedirectionUrl",(e=>Qa(e,{id:Ma,redirectionUrl:Ma}))),Yx=En("standaloneSearchBox/reset",(e=>Qa(e,{id:Ma}))),Jx=En("standaloneSearchBox/updateAnalyticsToSearchFromLink",(e=>Qa(e,{id:Ma}))),Wx=En("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),Gx=pi("standaloneSearchBox/fetchRedirect",(async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:i,validatePayload:a,navigatorContext:u}})=>{a(e,{id:new bt({emptyAllowed:!1})});let o=await Zx(r(),u),s=await i.plan(o);if(Oa(s))return n(s.error);let{redirectionUrl:c}=new Bx(s.success);return c&&t(Kx(c)),c||""})),Kx=e=>rl("analytics/standaloneSearchBox/redirect",(t=>t.makeTriggerRedirect({redirectedTo:e}))),Zx=async(e,t)=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await ec(e.configuration.analytics)},...e.configuration.analytics.enabled&&e.configuration.analytics.analyticsMode==="legacy"?await md(e.configuration.analytics):yd(e.configuration.analytics,t),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});var Xx=Kn(Jt(),(e=>e.addCase(zx,((e,t)=>{let{id:r,redirectionUrl:n,overwrite:i}=t.payload;!i&&r in e||(e[r]=ek(n))})).addCase(Yx,((e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=ek(n.defaultRedirectionUrl);return}})).addCase(Hx,((e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e&&(e[r]=ek(n))})).addCase(Gx.pending,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)})).addCase(Gx.fulfilled,((e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)})).addCase(Gx.rejected,((e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)})).addCase(Jx,((e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="searchFromLink")})).addCase(Wx,((e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)}))));function ek(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}var tk=new ot({...kA,redirectionUrl:new bt({required:!0,emptyAllowed:!1}),overwrite:new gt({required:!1})});function rk(e,t){if(!nk(e));let{dispatch:r}=e,n=()=>e.state,i=t.options.id||re("standalone_search_box"),a={id:i,highlightOptions:{...t.options.highlightOptions},...AA,overwrite:!1,...t.options};La(e,tk,a,"buildStandaloneSearchBox");let u=jA(e,{options:a});return r(zx({id:i,redirectionUrl:a.redirectionUrl,overwrite:a.overwrite})),{...u,updateText(e){u.updateText(e),r(Jx({id:i}))},selectSuggestion(e){let t=yA(n(),{id:i,suggestion:e});r(ZO({id:i,expression:e})),r(Wx({id:i,metadata:t})),this.submit()},afterRedirection(){r(Yx({id:i}))},updateRedirectUrl(e){r(Hx({id:i,redirectionUrl:e}))},submit(){r(gd({q:this.state.value,enableQuerySyntax:a.enableQuerySyntax})),r(Gx({id:i}))},get state(){let e=n().standaloneSearchBoxSet[i];return{...u.state,isLoading:e.isLoading,redirectTo:e.redirectTo,analytics:e.analytics}}}}function nk(e){return e.addReducers({standaloneSearchBoxSet:Xx,configuration:kg,query:OA,querySuggest:mA}),!0}function ik(e,t){return e.q!==t.q?rA():e.sortCriteria!==t.sortCriteria?YA():e.firstResult!==t.firstResult?pO():e.numberOfResults!==t.numberOfResults?hO():sk(e.f,t.f)?ak(e.f,t.f):sk(e.fExcluded,t.fExcluded)?ak(e.fExcluded,t.fExcluded,!0):sk(e.cf,t.cf)?ak(e.cf,t.cf):sk(e.af,t.af)?ak(e.af,t.af):sk(e.nf,t.nf)?uk(e.nf,t.nf):sk(e.df,t.df)?uk(e.df,t.df):ml()}function ak(e={},t={},r=!1){let n=Object.keys(e),i=Object.keys(t),a=n.filter((e=>!i.includes(e)));if(a.length){let t=a[0];switch(!0){case e[t].length>1:return Gm(t);case r:return ew({facetId:t,facetValue:e[t][0]});default:return Xm({facetId:t,facetValue:e[t][0]})}}let u=i.filter((e=>!n.includes(e)));if(u.length){let e=u[0];return r?Zm({facetId:e,facetValue:t[e][0]}):Km({facetId:e,facetValue:t[e][0]})}let o=i.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!o)return ml();let s=e[o],c=t[o],l=c.filter((e=>!s.includes(e)));if(l.length)return r?Zm({facetId:o,facetValue:l[0]}):Km({facetId:o,facetValue:l[0]});let d=s.filter((e=>!c.includes(e)));return d.length?r?ew({facetId:o,facetValue:d[0]}):Xm({facetId:o,facetValue:d[0]}):ml()}function uk(e={},t={}){return ak(lk(e),lk(t))}function ok(e,t){return e.q!==t.q?nA():e.sortCriteria!==t.sortCriteria?JA():sk(e.f,t.f)?ck(e.f,t.f):sk(e.fExcluded,t.fExcluded)?ck(e.fExcluded,t.fExcluded,!0):sk(e.cf,t.cf)?ck(e.cf,t.cf):sk(e.af,t.af)?ck(e.af,t.af):sk(e.nf,t.nf)?ck(lk(e.nf),lk(t.nf)):sk(e.df,t.df)?ck(lk(e.df),lk(t.df)):Il()}function sk(e={},t={}){return JSON.stringify(e)!==JSON.stringify(t)}function ck(e={},t={},r=!1){let n=Object.keys(e),i=Object.keys(t),a=n.filter((e=>!i.includes(e)));if(a.length){let t=a[0];return e[t].length>1?nw():uw()}if(i.filter((e=>!n.includes(e))).length)return r?aw():iw();let u=i.find((r=>t[r].filter((t=>e[r].includes(t)))));if(!u)return Il();let o=e[u],s=t[u];return s.filter((e=>!o.includes(e))).length?r?aw():iw():o.filter((e=>!s.includes(e))).length?uw():Il()}function lk(e={}){let t={};return Object.keys(e).forEach((r=>t[r]=e[r].map((e=>`${e.start}..${e.end}`)))),t}function dk(e){return{q:nt().q,enableQuerySyntax:nt().enableQuerySyntax,aq:e.advancedSearchQueries?.defaultFilters.aq??Y().defaultFilters.aq,cq:e.advancedSearchQueries?.defaultFilters.cq??Y().defaultFilters.cq,firstResult:et().firstResult,numberOfResults:e.pagination?.defaultNumberOfResults??et().defaultNumberOfResults,sortCriteria:Et(),f:{},fExcluded:{},cf:{},nf:{},df:{},debug:Re(),sf:{},tab:"",af:{},mnf:{}}}var fk=new ot({parameters:new It({options:{required:!0},values:Dl})});function hk(e,t){let{dispatch:r}=e,n=my(e);return Na(e,fk,t.initialState,"buildSearchParameterManager"),r(El(t.initialState.parameters)),{...n,synchronize(t){let n=pk(e,t);r(El(n))},get state(){return{parameters:yk(e)}}}}function pk(e,t){return{...dk(e.state),...t}}function gk(e,t){return wk(e,t)}function yk(e){let t=e.state;return{...lm(t.query,(e=>e.q),nt().q),...mk(t),...dm(t.sortCriteria,(e=>e),Et()),...fm(t.facetSet,vk(t),bk,"f"),...fm(t.facetSet,vk(t),Ik,"fExcluded"),...qk(t),...Ok(t),...Ak(t),...xk(t)}}function vk(e){return t=>e.facetOptions?.facets[t]?.enabled??!0}function mk(e){let t=Object.values(e.tabSet??{}).find((e=>e.isActive));return t?{tab:t.id}:{}}function wk(e,t){let r=e.state.tabSet,n=t.tab;if(!r||!Object.entries(r).length||!n)return!0;let i=n in r;return i||e.logger.warn(`The tab search parameter "${n}" is invalid. Ignoring change.`),i}function bk(e){return e.currentValues.filter((e=>e.state==="selected")).map((e=>e.value))}function Sk(e){return e.currentValues.filter((e=>e.state==="selected"))}function Ik(e){return e.currentValues.filter((e=>e.state==="excluded")).map((e=>e.value))}function qk(e){return fm(e.categoryFacetSet,vk(e),(e=>dc(e.currentValues).map((e=>e.value))),"cf")}function Ok(e){return fm(e.numericFacetSet,vk(e),Sk,"nf")}function Ak(e){return fm(e.dateFacetSet,vk(e),Sk,"df")}function xk(e){let t=e.automaticFacetSet?.set;if(t===void 0)return{};let r=Object.entries(t).map((([e,{response:t}])=>{let r=kk(t);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(r).length?{af:r}:{}}function kk(e){return e.values.filter((e=>e.state==="selected")).map((e=>e.value))}function Ck(e,t){let{dispatch:r}=e,n=hk(e,t);return{...n,synchronize(t){let i=Rk(e),a=pk(e,i),u=pk(e,t);bq(a,u)||gk(e,u)&&(n.synchronize(t),r(ih({legacy:ik(a,u),next:ok(a,u)})))},get state(){return{parameters:Rk(e)}}}}function Rk(e){let t=e.state;return{...yk(e),...Tk(t),...Fk(t),...jk(t),...Mk(t),...Pk(t),..._k(t),...Dk(t)}}function Tk(e){if(e.query===void 0)return{};let t=e.query.enableQuerySyntax;return t!==void 0&&t!==nt().enableQuerySyntax?{enableQuerySyntax:t}:{}}function Fk(e){if(e.advancedSearchQueries===void 0)return{};let{aq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.aq?{aq:t}:{}}function jk(e){if(e.advancedSearchQueries===void 0)return{};let{cq:t,defaultFilters:r}=e.advancedSearchQueries;return t!==r.cq?{cq:t}:{}}function Mk(e){if(e.pagination===void 0)return{};let t=e.pagination.firstResult;return t!==et().firstResult?{firstResult:t}:{}}function Pk(e){if(e.pagination===void 0)return{};let{numberOfResults:t,defaultNumberOfResults:r}=e.pagination;return t!==r?{numberOfResults:t}:{}}function Dk(e){if(e.staticFilterSet===void 0)return{};let t=Object.entries(e.staticFilterSet).map((([e,t])=>{let r=Ek(t.values);return r.length?{[e]:r}:{}})).reduce(((e,t)=>({...e,...t})),{});return Object.keys(t).length?{sf:t}:{}}function Ek(e){return e.filter((e=>e.state==="selected")).map((e=>e.caption))}function _k(e){if(e.debug===void 0)return{};let t=e.debug;return t!==Re()?{debug:t}:{}}var $k="..",Vk="...",Uk=/^(f|fExcluded|cf|nf|df|sf|af|mnf)-(.+)$/,Qk={f:!0,fExcluded:!0,cf:!0,sf:!0,af:!0,nf:!0,df:!0,mnf:!0},Nk="&",Lk="=";function Bk(){return{serialize:Wk(Gk),deserialize:iC}}function zk(e){return e in Qk}function Hk(e){return e in{q:!0,aq:!0,cq:!0,enableQuerySyntax:!0,firstResult:!0,numberOfResults:!0,sortCriteria:!0,debug:!0,tab:!0}}function Yk(e){let t=e in{nf:!0,df:!0,mnf:!0};return zk(e)&&t}function Jk(e){return Hk(e)||zk(e)}var Wk=e=>t=>Object.entries(t).map(e).filter((e=>e)).join(Nk);function Gk(e){let[t,r]=e;return Jk(t)?zk(t)&&!Yk(t)?Zk(r)?rC(t,r):"":t==="nf"||t==="df"?Xk(r)?nC(t,r):"":Kk(t,r):""}function Kk(e,t){return`${e}${Lk}${encodeURIComponent(t)}`}function Zk(e){return eC(e)?tC(e,(e=>typeof e=="string")):!1}function Xk(e){return eC(e)?tC(e,(e=>eC(e)&&"start"in e&&"end"in e)):!1}function eC(e){return!!(e&&typeof e=="object")}function tC(e,t){return Object.entries(e).filter((e=>{let r=e[1];return!Array.isArray(r)||!r.every(t)})).length===0}function rC(e,t){return Object.entries(t).map((([t,r])=>`${e}-${t}${Lk}${r.map((e=>encodeURIComponent(e))).join(",")}`)).join(Nk)}function nC(e,t){return Object.entries(t).map((([t,r])=>{let n=r.map((({start:e,end:t,endInclusive:r})=>`${e}${r?Vk:$k}${t}`)).join(",");return`${e}-${t}${Lk}${n}`})).join(Nk)}function iC(e){return e.split(Nk).map((e=>aC(e))).map(uC).filter(dC).map((e=>fC(e))).reduce(((e,t)=>{let[r,n]=t;if(zk(r)){let t={...e[r],...n};return{...e,[r]:t}}return{...e,[r]:n}}),{})}function aC(e){let[t,...r]=e.split(Lk),n=r.join(Lk);return[t,n]}function uC(e){let[t,r]=e,n=Uk.exec(t);if(!n)return e;let i=n[1],a=n[2],u=r.split(","),o=oC(i,u),s={[a]:o};return[i,JSON.stringify(s)]}function oC(e,t){return e==="nf"||e==="mnf"?sC(t):e==="df"?lC(t):t}function sC(e){return e.map((e=>{let{startAsString:t,endAsString:r,isEndInclusive:n}=pC(e);return{start:parseFloat(t),end:parseFloat(r),endInclusive:n}})).filter((({start:e,end:t})=>Number.isFinite(e)&&Number.isFinite(t))).map((({start:e,end:t,endInclusive:r})=>eI({start:e,end:t,state:"selected",endInclusive:r})))}function cC(e){try{return Td(e)?(Fd(e,xd),!0):Qd(e)?(Ed(e),!0):!1}catch{return!1}}function lC(e){return e.map((e=>{let{isEndInclusive:t,startAsString:r,endAsString:n}=pC(e);return{start:r,end:n,endInclusive:t}})).filter((({start:e,end:t})=>cC(e)&&cC(t))).map((({start:e,end:t,endInclusive:r})=>Ew({start:e,end:t,state:"selected",endInclusive:r})))}function dC(e){let t=Jk(e[0]),r=e.length===2;return t&&r}function fC(e,t=!0){let[r,n]=e;return r==="enableQuerySyntax"?[r,n==="true"]:r==="debug"?[r,n==="true"]:r==="firstResult"?[r,parseInt(n)]:r==="numberOfResults"?[r,parseInt(n)]:zk(r)?[r,hC(n)]:[r,t?decodeURIComponent(n):n]}function hC(e){let t=JSON.parse(e),r={};return Object.entries(t).forEach((e=>{let[t,n]=e;r[t]=n.map((e=>St(e)?decodeURIComponent(e):e))})),r}function pC(e){let t=e.indexOf(Vk)!==-1,[r,n]=e.split(t?Vk:$k);return{isEndInclusive:t,startAsString:r,endAsString:n}}var gC=new ot({fragment:new bt});function yC(e,t){let r;function n(){r=e.state.search.requestId}function i(){return r!==e.state.search.requestId}if(!wC(e));Na(e,gC,t.initialState,"buildUrlManager");let a=my(e),u=t.initialState.fragment;n();let o=Ck(e,{initialState:{parameters:mC(u)}});return{...a,subscribe(t){let r=()=>{let e=this.state.fragment;!vC(u,e)&&i()&&(u=e,t()),n()};return r(),e.subscribe(r)},get state(){return{fragment:Bk().serialize(o.state.parameters)}},synchronize(e){u=e;let t=mC(e);o.synchronize(t)}}}function vC(e,t){if(e===t)return!0;let r=mC(e),n=mC(t);return bq(r,n)}function mC(e){return Bk().deserialize(e)}function wC(e){return e.addReducers({configuration:kg}),!0}function bC(e){return xO(e)}async function SC(e,t){let{search:r,accessToken:n,organizationId:i,analytics:a}=e.configuration,u=e.query?.q||"";return{url:r.apiBaseUrl,accessToken:n,organizationId:i,enableNavigation:!1,...a.enabled&&{visitorId:await ec(e.configuration.analytics)},q:u,...t,requestedOutputSize:t.requestedOutputSize||0,...r.authenticationProviders.length&&{authentication:r.authenticationProviders.join(",")}}}var IC=pi("resultPreview/fetchResultContent",(async(e,{extra:t,getState:r,rejectWithValue:n})=>{let i=r(),a=await SC(i,e),u=await t.apiClient.html(a);return Oa(u)?n(u.error):{content:u.success,uniqueId:e.uniqueId}})),qC=En("resultPreview/next"),OC=En("resultPreview/previous"),AC=En("resultPreview/prepare",(e=>Qa(e,{results:new Ot({required:!0})}))),xC=2048,kC=pi("resultPreview/updateContentURL",(async(e,{getState:t,extra:r})=>{let n=t(),i=ya(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return i?.length>xC&&r.logger.error(`The content URL was truncated as it exceeds the maximum allowed length of ${xC} characters.`),{contentURL:i}}));var CC=e=>rl({prefix:"analytics/resultPreview/open",__legacy__getBuilder:(t,r)=>{hl(e);let n=il(e,r),i=ul(e);return t.makeDocumentQuickview(n,i)},__legacy__provider:t=>{let r=new Lc(t);return r.getSearchUID=()=>e.searchUid??"",r},analyticsType:"itemClick",analyticsPayloadBuilder:t=>{let r=il(e,t),n=ul(e);return{searchUid:t.search?.response.searchUid??"",position:r.documentPosition,actionCause:"preview",itemMetadata:{uniqueFieldName:n.contentIDKey,uniqueFieldValue:n.contentIDValue,title:r.documentTitle,author:r.documentAuthor,url:r.documentUrl}}}});var RC=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:i}=zt();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=i},TC=e=>e.filter((e=>e.hasHtmlVersion)).map((e=>e.uniqueId)),FC=Kn(zt(),(e=>{e.addCase(IC.pending,(e=>{e.isLoading=!0})).addCase(IC.fulfilled,((e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1})).addCase(ih.fulfilled,((e,t)=>{RC(e),e.resultsWithPreview=TC(t.payload.response.results)})).addCase(uh.fulfilled,((e,t)=>{RC(e),e.resultsWithPreview=e.resultsWithPreview.concat(TC(t.payload.response.results))})).addCase(ah.fulfilled,RC).addCase(AC,((e,t)=>{e.resultsWithPreview=TC(t.payload.results)})).addCase(qC,(e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t})).addCase(OC,(e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t})).addCase(kC.fulfilled,((e,t)=>{e.contentURL=t.payload.contentURL}))}));function jC(e,t,r,n,i){if(!MC(e));let{dispatch:a}=e,u=()=>e.state,o=my(e),{result:s,maximumPreviewSize:c}=t.options,l=()=>{let{resultsWithPreview:e,position:t}=u().resultPreview;return e[t]},d=e=>{a(kC({uniqueId:e,requestedOutputSize:c,buildResultPreviewRequest:r,path:n})),t.options.onlyContentURL||a(IC({uniqueId:e,requestedOutputSize:c})),i&&i()};return{...o,fetchResultContent(){d(s.uniqueId)},next(){a(qC()),d(l())},previous(){a(OC()),d(l())},get state(){let e=u(),t=s.hasHtmlVersion,r=e.resultPreview,n=s.uniqueId===r.uniqueId?r.content:"",i=r.isLoading,a=r.contentURL,o=l();return{content:n,resultHasPreview:t,isLoading:i,contentURL:a,currentResultUniqueId:o}}}}function MC(e){return e.addReducers({configuration:kg,resultPreview:FC}),!0}function PC(e,t){if(!DC(e));let{dispatch:r}=e,n=()=>e.state,i=()=>n().search.results,a=jC(e,t,SC,"/html",(()=>{e.dispatch(CC(t.options.result))}));return r(AC({results:i()})),{...a,get state(){return{...a.state,currentResult:i().findIndex((e=>e.uniqueId===a.state.currentResultUniqueId))+1,totalResults:i().length}}}}function DC(e){return e.addReducers({search:kh}),!0}var EC=e=>rl("analytics/folding/showMore",((t,r)=>(hl(e),t.makeShowMoreFoldedResults(il(e,r),ul(e))))),_C=()=>rl("analytics/folding/showLess",(e=>e.makeShowLessFoldedResults())),$C={logShowMoreFoldedResults:EC,logShowLessFoldedResults:_C};function VC(e,t){return e.raw[t.collection]}function UC(e,t){return e.raw[t.parent]}function QC(e,t){let r=e.raw[t.child];return ne(r)?r[0]:r}function NC(e,t){return(e||t)!==void 0&&e===t}function LC(e,t,r,n=[]){let i=QC(e,r);return i?n.indexOf(i)!==-1?[]:t.filter((t=>{let n=QC(t,r)===QC(e,r);return UC(t,r)===i&&!n})).map((a=>{let u={...a,searchUid:e.searchUid};return{result:u,children:LC(u,t,r,[...n,i])}})):[]}function BC(e,t){return e.find((e=>{let r=UC(e,t)===void 0,n=NC(UC(e,t),QC(e,t));return r||n}))}function zC(e){return e.parentResult?zC(e.parentResult):e}function HC(e,t,r,n){let i=Hc(e),a={...n??BC(i,t)??zC(e),searchUid:r};return{result:a,children:LC(a,i,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}}function YC(e,t,r,n){let i={};return e.forEach((e=>{let a=VC(e,t);a&&(!QC(e,t)&&!e.parentResult||(i[a]=HC(e,t,r,n)))})),i}function JC(e,t){if(!e.collections[t])throw new Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}var WC=Kn(Ze(),(e=>e.addCase(ih.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?YC(t.response.results,e.fields,t.response.searchUid):{}})).addCase(ah.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?YC(t.response.results,e.fields,t.response.searchUid):{}})).addCase(uh.fulfilled,((e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...YC(t.response.results,e.fields,t.response.searchUid)}:{}})).addCase(Oy,((e,{payload:t})=>e.enabled?e:{enabled:!0,collections:{},fields:{collection:t.collectionField??e.fields.collection,parent:t.parentField??e.fields.parent,child:t.childField??e.fields.child},filterFieldRange:t.numberOfFoldedResults??e.filterFieldRange})).addCase(Ay.pending,((e,{meta:t})=>{let r=t.arg;JC(e,r).isLoadingMoreResults=!0})).addCase(Ay.rejected,((e,{meta:t})=>{let r=t.arg;JC(e,r).isLoadingMoreResults=!1})).addCase(Ay.fulfilled,((e,{payload:{collectionId:t,results:r,rootResult:n,searchUid:i}})=>{let a=YC(r,e.fields,i,n);if(!a||!a[t])throw new Error(`Unable to create collection ${t} from received results: ${JSON.stringify(r)}. Folding most probably in an invalid state... `);e.collections[t]=a[t],e.collections[t].moreResultsAvailable=!1}))));var GC=new ot(qy);function KC(e,t,r){if(!ZC(e));let n=jO(e,t),{dispatch:i}=e,a=()=>e.state,u=t.options?.folding?La(e,GC,t.options.folding,"buildFoldedResultList"):{};return i(Oy({...u})),{...n,loadCollection:n=>{i(t.loadCollectionActionCreator(n.result.raw[e.state.folding.fields.collection])),i(r.logShowMoreFoldedResults(n.result))},logShowMoreFoldedResults:e=>{i(r.logShowMoreFoldedResults(e))},logShowLessFoldedResults:()=>{i(r.logShowLessFoldedResults())},findResultById(e){return XC(this.state.results,(t=>t.result.uniqueId===e.result.uniqueId))},findResultByCollection(e){return XC(this.state.results,(t=>t.result.raw.foldingcollection===e.result.raw.foldingcollection))},get state(){let e=a();return{...n.state,results:n.state.results.map((t=>{let r=t.raw[e.folding.fields.collection];return!r||!e.folding.collections[r]?{result:t,moreResultsAvailable:!1,isLoadingMoreResults:!1,children:[]}:e.folding.collections[r]}))}}}}function ZC(e){return e.addReducers({search:kh,configuration:Ag,folding:WC,query:OA}),!0}function XC(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(t(n))return n;if(n.children.length){let e=XC(n.children,t);if(e)return e}}return null}function eR(e,t={}){let r=KC(e,{...t,loadCollectionActionCreator:Ay,fetchMoreResultsActionCreator:uh},$C);return{...r,get state(){return r.state}}}function tR(e){return e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore},e}function rR(e,t){let r=[],n=[],i=[],a=[];return t.forEach((e=>{switch(e.type){case"redirect":r.push(e.content);break;case"query":n.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":a.push(e.content);break}})),e.redirectTo=r[0]??"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=a,e}function nR(e,t){return e.queryModification={...t,queryToIgnore:""},e}function iR(e,t){return e.queryModification.queryToIgnore=t,e}var aR=Kn(Wt(),(e=>e.addCase(ih.pending,tR).addCase(ih.fulfilled,((e,t)=>rR(e,t.payload.response.triggers))).addCase(wf,((e,t)=>nR(e,t.payload))).addCase(mf,((e,t)=>iR(e,t.payload)))));function uR(e){if(!oR(e));let t=my(e),{dispatch:r}=e,n=()=>e.state,i=()=>n().triggers.queryModification.newQuery,a=()=>n().triggers.queryModification.originalQuery;return{...t,get state(){return{newQuery:i(),originalQuery:a(),wasQueryModified:i()!==""}},undo(){r(mf(i())),r(gd({q:a()})),r(ih({legacy:gf({undoneQuery:i()}),next:vf()}))}}}function oR(e){return e.addReducers({triggers:aR,query:OA}),!0}function sR(e){if(!cR(e));let t=my(e),{dispatch:r}=e,n=()=>e.state,i=n().triggers.notifications;return{...t,subscribe(t){let n=()=>{let e=!mq(i,this.state.notifications);i=this.state.notifications,e&&(t(),r(yf()))};return n(),e.subscribe(n)},get state(){return{notifications:n().triggers.notifications}}}}function cR(e){return e.addReducers({triggers:aR}),!0}var lR=()=>new It({values:{questionAnswerId:Ma},options:{required:!0}}),dR=()=>new It({values:{linkText:Da,linkURL:Da},options:{required:!0}});function fR(e){return Qa(e,lR())}function hR(e,t){let r=t??e.search?.questionAnswer?.documentId;return r&&e.search&&Ih(e,r.contentIdKey,r.contentIdValue)}function pR(e,t){let r=e.questionAnswering?.relatedQuestions.findIndex((e=>e.questionAnswerId===t))??-1;return r===-1?null:e.search?.questionAnswer?.relatedQuestions?.[r]??null}var gR=()=>rl({prefix:"analytics/smartSnippet/expand",__legacy__getBuilder:e=>e.makeExpandSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),yR=()=>rl({prefix:"analytics/smartSnippet/collapse",__legacy__getBuilder:e=>e.makeCollapseSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),vR=()=>rl({prefix:"analytics/smartSnippet/like",__legacy__getBuilder:e=>e.makeLikeSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"like",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),mR=()=>rl({prefix:"analytics/smartSnippet/dislike",__legacy__getBuilder:e=>e.makeDislikeSmartSnippet(),analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"dislike",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"}})}),wR=()=>rl({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(e,t)=>{let r=hR(t);return e.makeOpenSmartSnippetSource(il(r,t),ul(r))},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:e=>{let t=hR(e),r=ul(t);return{answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:r.contentIDValue,type:"Source"}}}}),bR=e=>rl({prefix:"analytics/smartSnippet/source/open",__legacy__getBuilder:(t,r)=>{Qa(e,dR());let n=hR(r);return n?t.makeOpenSmartSnippetInlineLink(il(n,r),{...ul(n),...e}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:e=>{let t=hR(e),r=ul(t);return{answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippet"},citation:{id:r.contentIDValue,type:"InlineLink"}}}}),SR=()=>rl("analytics/smartSnippet/feedbackModal/open",(e=>e.makeOpenSmartSnippetFeedbackModal())),IR=()=>rl("analytics/smartSnippet/feedbackModal/close",(e=>e.makeCloseSmartSnippetFeedbackModal())),qR=e=>rl({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason(e),analyticsType:"Qna.SubmitSmartSnippetFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||""},feedback:{reason:e}})}),OR=e=>rl({prefix:"analytics/smartSnippet/sendFeedback",__legacy__getBuilder:t=>t.makeSmartSnippetFeedbackReason("other",e),analyticsType:"Qna.SubmitSmartSnippetFeedback",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||""},feedback:{reason:"other",details:e}})}),AR=e=>rl({prefix:"analytics/smartSnippetSuggestion/expand",__legacy__getBuilder:(t,r)=>{fR(e);let n=pR(r,e.questionAnswerId);return n?t.makeExpandSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),xR=e=>rl({prefix:"analytics/smartSnippetSuggestion/collapse",__legacy__getBuilder:(t,r)=>{fR(e);let n=pR(r,e.questionAnswerId);return n?t.makeCollapseSmartSnippetSuggestion({question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:"SmartSnippetSuggestion"}})}),kR=e=>rl({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(t,r)=>{Qa(e,lR());let n=pR(r,e.questionAnswerId);if(!n)return null;let i=hR(r,n.documentId);return i?t.makeOpenSmartSnippetSuggestionSource(il(i,r),{question:n.question,answerSnippet:n.answerSnippet,documentId:n.documentId}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=pR(t,e.questionAnswerId);return{answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:r?.documentId.contentIdValue||"",type:"Source"}}}}),CR=(e,t)=>rl({prefix:"analytics/smartSnippetSuggestion/source/open",__legacy__getBuilder:(r,n)=>{Qa(e,lR()),Qa(t,dR());let i=pR(n,e.questionAnswerId);if(!i)return null;let a=hR(n,i.documentId);return a?r.makeOpenSmartSnippetSuggestionInlineLink(il(a,n),{question:i.question,answerSnippet:i.answerSnippet,documentId:i.documentId,linkText:t.linkText,linkURL:t.linkURL}):null},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>{let r=pR(t,e.questionAnswerId);return{answer:{responseId:t.search?.response.searchUid||"",type:"SmartSnippetSuggestion"},citation:{id:r?.documentId.contentIdValue||"",type:"InlineLink"}}}}),RR={logExpandSmartSnippet:gR,logCollapseSmartSnippet:yR,logLikeSmartSnippet:vR,logDislikeSmartSnippet:mR,logOpenSmartSnippetSource:wR,logOpenSmartSnippetInlineLink:bR,logOpenSmartSnippetFeedbackModal:SR,logCloseSmartSnippetFeedbackModal:IR,logSmartSnippetFeedback:qR,logSmartSnippetDetailedFeedback:OR,logExpandSmartSnippetSuggestion:AR,logCollapseSmartSnippetSuggestion:xR,logOpenSmartSnippetSuggestionSource:kR};var TR=En("smartSnippet/expand"),FR=En("smartSnippet/collapse"),jR=En("smartSnippet/like"),MR=En("smartSnippet/dislike"),PR=En("smartSnippet/feedbackModal/open"),DR=En("smartSnippet/feedbackModal/close"),ER=En("smartSnippet/related/expand",(e=>fR(e))),_R=En("smartSnippet/related/collapse",(e=>fR(e)));var $R=(e,t)=>e.findIndex((e=>e.questionAnswerId===t.questionAnswerId));function VR({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){return se({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n})}function UR(e,t){let r=VR(e);return t&&r===t.questionAnswerId?t:{contentIdKey:e.documentId.contentIdKey,contentIdValue:e.documentId.contentIdValue,expanded:!1,questionAnswerId:r}}var QR=Kn(Nt(),(e=>e.addCase(TR,(e=>{e.expanded=!0})).addCase(FR,(e=>{e.expanded=!1})).addCase(jR,(e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1})).addCase(MR,(e=>{e.liked=!1,e.disliked=!0})).addCase(PR,(e=>{e.feedbackModalOpen=!0})).addCase(DR,(e=>{e.feedbackModalOpen=!1})).addCase(ih.fulfilled,((e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map(((t,r)=>UR(t,e.relatedQuestions[r]))),n=VR(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{...Nt(),relatedQuestions:r,questionAnswerId:n}})).addCase(ER,((e,t)=>{let r=$R(e.relatedQuestions,t.payload);r!==-1&&(e.relatedQuestions[r].expanded=!0)})).addCase(_R,((e,t)=>{let r=$R(e.relatedQuestions,t.payload);r!==-1&&(e.relatedQuestions[r].expanded=!1)}))));function NR(e,t,r){if(!LR(e));let n=my(e),i=()=>e.state,a=()=>hR(i()),u=null,o=UO(e,{options:{selectionDelay:r?.options?.selectionDelay}},(()=>{let r=a();if(!r){u=null;return}let{searchResponseId:n}=i().search;u!==n&&(u=n,e.dispatch(t.logOpenSmartSnippetSource()),e.dispatch(_O(r)))}));return{...n,get state(){let e=i();return{question:e.search.questionAnswer.question,answer:e.search.questionAnswer.answerSnippet,documentId:e.search.questionAnswer.documentId,expanded:e.questionAnswering.expanded,answerFound:e.search.questionAnswer.answerSnippet!=="",liked:e.questionAnswering.liked,disliked:e.questionAnswering.disliked,feedbackModalOpen:e.questionAnswering.feedbackModalOpen,source:a()}},expand(){e.dispatch(t.logExpandSmartSnippet()),e.dispatch(TR())},collapse(){e.dispatch(t.logCollapseSmartSnippet()),e.dispatch(FR())},like(){e.dispatch(t.logLikeSmartSnippet()),e.dispatch(jR())},dislike(){e.dispatch(t.logDislikeSmartSnippet()),e.dispatch(MR())},openFeedbackModal(){e.dispatch(t.logOpenSmartSnippetFeedbackModal()),e.dispatch(PR())},closeFeedbackModal(){e.dispatch(t.logCloseSmartSnippetFeedbackModal()),e.dispatch(DR())},sendFeedback(r){e.dispatch(t.logSmartSnippetFeedback(r)),e.dispatch(DR())},sendDetailedFeedback(r){e.dispatch(t.logSmartSnippetDetailedFeedback(r)),e.dispatch(DR())},selectSource(){o.select()},beginDelayedSelectSource(){o.beginDelayedSelect()},cancelPendingSelectSource(){o.cancelPendingSelect()}}}function LR(e){return e.addReducers({search:kh,questionAnswering:QR}),!0}function BR(e,t){if(!zR(e));let r=()=>e.state,n=new Set,i=e=>n.has(e)?!0:(n.add(e),!1),a=null,u=e=>{a!==e&&(a=e,s={},n.clear())},o=(r,n,a)=>UO(e,{options:{selectionDelay:t?.options?.selectionDelay}},(()=>{i(n)||e.dispatch(a?CR({questionAnswerId:a},r):bR(r))})),s={},c=(e,t)=>{let{searchResponseId:n}=r().search;u(n);let i=se({...e,questionAnswerId:t});return i in s||(s[i]=o(e,i,t)),s[i]};return{selectInlineLink(e,t){c(e,t)?.select()},beginDelayedSelectInlineLink(e,t){c(e,t)?.beginDelayedSelect()},cancelPendingSelectInlineLink(e,t){c(e,t)?.cancelPendingSelect()}}}function zR(e){return e.addReducers({search:kh,questionAnswering:QR}),!0}function HR(e,t){let r=NR(e,RR,t),n=BR(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectInlineLink(e){n.selectInlineLink(e)},beginDelayedSelectInlineLink(e){n.beginDelayedSelectInlineLink(e)},cancelPendingSelectInlineLink(e){n.cancelPendingSelectInlineLink(e)}}}function YR(e,t){if(!JR(e));let r=my(e),n=()=>e.state,i=t=>{let{contentIdKey:r,contentIdValue:n}=t;return e.state.search.results.find((e=>ph(e,r)===n))};return{...r,get state(){let e=n();return{questions:e.search.questionAnswer.relatedQuestions.map(((t,r)=>({question:t.question,answer:t.answerSnippet,documentId:t.documentId,questionAnswerId:e.questionAnswering.relatedQuestions[r].questionAnswerId,expanded:e.questionAnswering.relatedQuestions[r].expanded,source:i(t.documentId)})))}},expand(r){let n={questionAnswerId:r};e.dispatch(t.logExpandSmartSnippetSuggestion(n)),e.dispatch(ER(n))},collapse(r){let n={questionAnswerId:r};e.dispatch(t.logCollapseSmartSnippetSuggestion(n)),e.dispatch(_R(n))}}}function JR(e){return e.addReducers({search:kh,questionAnswering:QR}),!0}function WR(e,t){if(!GR(e));let r=()=>e.state,n=e=>{let t=r(),n=pR(t,e);return n?hR(t,n.documentId):null},i=new Set,a=e=>i.has(e)?!0:(i.add(e),!1),u=null,o=e=>{u!==e&&(u=e,c={},i.clear())},s=(r,n)=>UO(e,{options:{selectionDelay:t?.options?.selectionDelay}},(()=>{a(n)||(e.dispatch(kR({questionAnswerId:n})),e.dispatch(_O(r)))})),c={},l=e=>{let{searchResponseId:t}=r().search;o(t);let i=n(e);return i?(e in c||(c[e]=s(i,e)),c[e]):null};return{selectSource(e){l(e)?.select()},beginDelayedSelectSource(e){l(e)?.beginDelayedSelect()},cancelPendingSelectSource(e){l(e)?.cancelPendingSelect()}}}function GR(e){return e.addReducers({search:kh,questionAnswering:QR}),!0}function KR(e,t){let r=YR(e,RR),n=BR(e,{options:{selectionDelay:t?.options?.selectionDelay}}),i=WR(e,{options:{selectionDelay:t?.options?.selectionDelay}});return{...r,get state(){return r.state},selectSource(e){i.selectSource(e)},beginDelayedSelectSource(e){i.beginDelayedSelectSource(e)},cancelPendingSelectSource(e){i.cancelPendingSelectSource(e)},selectInlineLink(e,t){n.selectInlineLink(t,e)},beginDelayedSelectInlineLink(e,t){n.beginDelayedSelectInlineLink(t,e)},cancelPendingSelectInlineLink(e,t){n.cancelPendingSelectInlineLink(t,e)}}}var ZR={queries:new Ot({required:!0,each:new bt({emptyAllowed:!1})}),maxLength:new ft({required:!0,min:1,default:10})},XR=En("recentQueries/registerRecentQueries",(e=>Qa(e,ZR))),eT=En("recentQueries/clearRecentQueries");var tT=()=>rl("analytics/recentQueries/clear",(e=>e.makeClearRecentQueries())),rT=()=>rl("analytics/recentQueries/click",(e=>e.makeRecentQueryClick()));var nT=Kn(Lt(),(e=>{e.addCase(XR,iT).addCase(eT,aT).addCase(ih.fulfilled,((e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;!r.length||!n.length||uT(r,e)}))}));function iT(e,t){e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}function aT(e){e.queries=[]}function uT(e,t){t.queries=t.queries.filter((t=>t!==e));let r=t.queries.slice(0,t.maxLength-1);t.queries=[e,...r]}var oT={queries:[]},sT={maxLength:10,clearFilters:!0},cT=new ot({queries:new Ot({required:!0})}),lT=new ot({maxLength:new ft({required:!0,min:1}),clearFilters:new gt});function dT(e,t){La(e,lT,t?.options,"buildRecentQueriesList"),Na(e,cT,t?.initialState,"buildRecentQueriesList")}function fT(e,t){if(!hT(e));let r=my(e),{dispatch:n}=e,i=()=>e.state,a={...sT,...t?.options},u={...oT,...t?.initialState};dT(e,{options:a,initialState:u});let o={queries:u.queries,maxLength:a.maxLength};return n(XR(o)),{...r,get state(){let e=i();return{...e.recentQueries,analyticsEnabled:e.configuration.analytics.enabled}},clear(){n(tT()),n(eT())},executeRecentQuery(t){let r=new ft({required:!0,min:0,max:this.state.queries.length}).validate(t);if(r)throw new Error(r);let i={q:this.state.queries[t],clearFilters:a.clearFilters};vt(e.state.query?.enableQuerySyntax)&&(i.enableQuerySyntax=e.state.query.enableQuerySyntax),n(nh(i)),n(ih({legacy:rT()}))}}}function hT(e){return e.addReducers({search:kh,recentQueries:nT}),!0}Kn(Bt(),(e=>{e.addCase(EO,((e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength})).addCase($O,(e=>{e.results=[]})).addCase(_O,((e,t)=>{let r=t.payload;e.results=e.results.filter((e=>e.uniqueId!==r.uniqueId));let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]}))}));new ot({results:new Ot({required:!0})});new ot({maxLength:new ft({required:!0,min:1})});function pT(e,t){if(!gT(e));let r=t=>e.state.facetOptions.facets[t]?.enabled??!1,n=t=>e.state.facetSet?.[t]?.request?.currentValues??e.state.categoryFacetSet?.[t]?.request?.currentValues??e.state.numericFacetSet?.[t]?.request?.currentValues??e.state.dateFacetSet?.[t]?.request?.currentValues??null,i=t=>t in e.state.facetOptions.facets,a=()=>se({isFacetRegistered:i(t.facetId),parentFacets:t.conditions.map((({parentFacetId:e})=>i(e)?{enabled:r(e),values:n(e)}:null))}),u=()=>{let e=a();return e===l?!1:(l=e,!0)},o=()=>t.conditions.some((e=>{if(!r(e.parentFacetId))return!1;let t=n(e.parentFacetId);return t===null?!1:e.condition(t)})),s=()=>{e.state.facetSet&&Object.entries(e.state.facetSet).forEach((([t,r])=>r.request.freezeCurrentValues&&e.dispatch(Dw({facetId:t,freezeCurrentValues:!1}))))},c=()=>{if(!i(t.facetId))return;let n=r(t.facetId),a=o();n!==a&&(e.dispatch(a?By(t.facetId):zy(t.facetId)),s())};if(!t.conditions.length)return{stopWatching(){}};let l=a(),d=e.subscribe((()=>{u()&&c()}));return c(),{stopWatching(){d()}}}function gT(e){return e.addReducers({facetOptions:ob}),!0}var yT=Kn(_e(),(e=>{e.addCase(ih.fulfilled,((e,t)=>{e.set={},t.payload.response.generateAutomaticFacets?.facets?.forEach((t=>{e.set[t.field]={response:t}}))})).addCase(Hq,((e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)})).addCase(Wq,((e,t)=>{let{field:r,selection:n}=t.payload,i=e.set[r]?.response;if(!i)return;let a=i.values.find((e=>e.value===n.value));if(!a)return;let u=a.state==="selected";a.state=u?"idle":"selected"})).addCase(Yq,((e,t)=>{let r=t.payload,n=e.set[r]?.response;if(n)for(let e of n.values)e.state="idle"})).addCase(El,((e,t)=>{let r=t.payload.af??{},n=Object.keys(e.set);for(let t in r)if(!e.set[t]){let n=vT(t),i=r[t].map((e=>mT(e)));n.values.push(...i),e.set[t]={response:n}}for(let t of n)if(!(t in r)){let r=e.set[t]?.response;for(let e of r.values)e.state="idle"}for(let t in r){let n=e.set[t]?.response;if(n){let e=n.values,i=new Set(r[t]);for(let t of e)i.has(t.value)?(t.state="selected",i.delete(t.value)):t.state="idle";for(let e of i)n.values.push(mT(e))}}})).addCase(zl.fulfilled,((e,t)=>{if(t.payload&&Object.keys(t.payload.automaticFacetSet.set).length!==0)return t.payload.automaticFacetSet})).addCase(Gl,(e=>{Object.values(e.set).forEach((({response:e})=>{e.values.forEach((e=>e.state="idle"))}))}))}));function vT(e){return{field:e,values:[],moreValuesAvailable:!1,label:"",indexScore:0}}function mT(e){return{value:e,state:"selected",numberOfResults:0}}function wT(e,t){let{dispatch:r}=e,n=my(e),{field:i}=t;return{...n,toggleSelect(e){r(Wq({field:i,selection:e})),r(ih({legacy:Gb(i,e),next:Kb(e)}))},deselectAll(){r(Yq(i)),r(ih({legacy:Gm(i),next:nw()}))},get state(){let t=e.state.automaticFacetSet?.set[i]?.response;return t?{field:t.field,label:t.label,values:t.values}:{field:"",values:[],label:""}}}}function bT(e){return{desiredCount:e.desiredCount,numberOfValues:e.numberOfValues}}function ST(e,t){if(!IT(e));let{dispatch:r}=e,n=bT(t.options);return r(Hq(n)),{...my(e),get state(){return{automaticFacets:e.state.search.response.generateAutomaticFacets?.facets.map((t=>wT(e,{field:t.field})))??[]}}}}function IT(e){return e.addReducers({automaticFacetSet:yT,configuration:kg,search:kh}),!0}var qT="RGA";function OT(e){return typeof e=="object"}var AT=()=>rl("analytics/generatedAnswer/retry",(e=>e.makeRetryGeneratedAnswer())),xT=e=>rl("analytics/generatedAnswer/rephrase",((t,r)=>{let{id:n,answerAPIEnabled:i}=Rh(r);return n?t.makeRephraseGeneratedAnswer({...i?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},rephraseFormat:e.answerStyle}):null})),kT=e=>rl({prefix:"analytics/generatedAnswer/openAnswerSource",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:i}=Rh(r),a=Mh(r,e);return!n||!a?null:t.makeOpenGeneratedAnswerSource({...i?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},permanentId:a.permanentid,citationId:a.id})},analyticsType:"Qna.CitationClick",analyticsPayloadBuilder:t=>({answer:{responseId:t.search?.response.searchUid||"",type:qT},citation:{id:e,type:"Source"}})}),CT=(e,t)=>rl({prefix:"analytics/generatedAnswer/hoverCitation",__legacy__getBuilder:(r,n)=>{let{id:i,answerAPIEnabled:a}=Rh(n),u=Mh(n,e);return!i||!u?null:r.makeGeneratedAnswerSourceHover({...a?{answerAPIStreamId:i}:{generativeQuestionAnsweringId:i},permanentId:u.permanentid,citationId:u.id,citationHoverTimeMs:t})},analyticsType:"Qna.CitationHover",analyticsPayloadBuilder:r=>({answer:{responseId:r.search?.response.searchUid||"",type:qT},citation:{id:e,type:"Source"},citationHoverTimeInMs:t})}),RT=()=>rl({prefix:"analytics/generatedAnswer/like",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeLikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"like",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),TT=()=>rl({prefix:"analytics/generatedAnswer/dislike",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeDislikeGeneratedAnswer({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"dislike",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),FT=e=>rl({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:i}=Rh(r);if(!n)return null;let a=i?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n};return OT(e)?t.makeGeneratedAnswerFeedbackSubmitV2({...a,...e}):t.makeGeneratedAnswerFeedbackSubmit({...a,reason:e})},analyticsType:OT(e)?"Qna.SubmitRgaFeedback":void 0,analyticsPayloadBuilder:OT(e)?t=>{let{search:r}=t,{response:n}=r||{},i=n?.searchUid||"",{helpful:a,readable:u,documented:o,details:s,hallucinationFree:c,correctTopic:l,documentUrl:d}=e;return{answer:{responseId:i},feedback:{helpful:a,readable:u,documented:o,details:s,hallucination_free:c,correct_topic:l,document_url:d}}}:void 0}),jT=e=>rl({prefix:"analytics/generatedAnswer/sendFeedback",__legacy__getBuilder:(t,r)=>{let{id:n,answerAPIEnabled:i}=Rh(r);return n?t.makeGeneratedAnswerFeedbackSubmit({...i?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},reason:"other",details:e}):null}}),MT=e=>rl("analytics/generatedAnswer/streamEnd",((t,r)=>{let{id:n,answerAPIEnabled:i}=Rh(r),a=e?!r.generatedAnswer?.answer||!r.generatedAnswer?.answer.length:void 0;return n?t.makeGeneratedAnswerStreamEnd({...i?{answerAPIStreamId:n}:{generativeQuestionAnsweringId:n},answerGenerated:e,answerTextIsEmpty:a}):null})),PT=()=>rl({prefix:"analytics/generatedAnswer/show",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeGeneratedAnswerShowAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"show",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),DT=()=>rl({prefix:"analytics/generatedAnswer/hide",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeGeneratedAnswerHideAnswers({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"hide",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),ET=()=>rl({prefix:"analytics/generatedAnswer/expand",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeGeneratedAnswerExpand({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"expand",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),_T=()=>rl({prefix:"analytics/generatedAnswer/collapse",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeGeneratedAnswerCollapse({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"collapse",answer:{responseId:e.search?.response.searchUid||"",type:qT}})}),$T=()=>rl({prefix:"analytics/generatedAnswer/copy",__legacy__getBuilder:(e,t)=>{let{id:r,answerAPIEnabled:n}=Rh(t);return r?e.makeGeneratedAnswerCopyToClipboard({...n?{answerAPIStreamId:r}:{generativeQuestionAnsweringId:r}}):null},analyticsType:"Qna.AnswerAction",analyticsPayloadBuilder:e=>({action:"copyToClipboard",answer:{responseId:e.search?.response.searchUid||"",type:qT}})});var VT=()=>({actionCause:"rephraseGeneratedAnswer"}),UT={logCopyGeneratedAnswer:$T,logGeneratedAnswerHideAnswers:DT,logGeneratedAnswerShowAnswers:PT,logGeneratedAnswerStreamEnd:MT,logGeneratedAnswerDetailedFeedback:jT,logGeneratedAnswerFeedback:FT,logDislikeGeneratedAnswer:TT,logLikeGeneratedAnswer:RT,logHoverCitation:CT,logOpenGeneratedAnswerSource:kT,logRetryGeneratedAnswer:AT,logRephraseGeneratedAnswer:xT,logGeneratedAnswerExpand:ET,logGeneratedAnswerCollapse:_T};var QT=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:e.search.extendedResults?.generativeQuestionAnsweringId});var NT=["default","bullet","step","concise"],LT=["text/plain","text/markdown"];var BT=new bt({required:!0}),zT=new bt,HT=new gt({required:!0}),YT={id:BT,title:BT,uri:BT,permanentid:BT,clickUri:zT},JT=new bt({required:!0,constrainTo:LT}),WT=En("generatedAnswer/setIsVisible",(e=>Qa(e,HT))),GT=En("generatedAnswer/updateMessage",(e=>Qa(e,{textDelta:BT}))),KT=En("generatedAnswer/updateCitations",(e=>Qa(e,{citations:new Ot({required:!0,each:new It({values:YT})})}))),ZT=En("generatedAnswer/updateError",(e=>Qa(e,{message:zT,code:new ft({min:0})}))),XT=En("generatedAnswer/resetAnswer"),eF=En("generatedAnswer/like"),tF=En("generatedAnswer/dislike"),rF=En("generatedAnswer/feedbackModal/open"),nF=En("generatedAnswer/expand"),iF=En("generatedAnswer/collapse"),aF=En("generatedAnswer/setId",(e=>Qa(e,{id:new bt({required:!0})}))),uF=En("generatedAnswer/feedbackModal/close"),oF=En("generatedAnswer/sendFeedback"),sF=En("generatedAnswer/setIsLoading",(e=>Qa(e,HT))),cF=En("generatedAnswer/setIsStreaming",(e=>Qa(e,HT))),lF=En("generatedAnswer/setAnswerContentFormat",(e=>Qa(e,JT))),dF=En("generatedAnswer/updateResponseFormat",(e=>Qa(e,{answerStyle:new bt({required:!0,constrainTo:NT}),contentFormat:new Ot({each:JT,default:["text/plain"]})}))),fF=En("knowledge/updateAnswerConfigurationId",(e=>Qa(e,BT))),hF=En("generatedAnswer/registerFieldsToIncludeInCitations",(e=>Qa(e,_a))),pF=En("generatedAnswer/setIsAnswerGenerated",(e=>Qa(e,HT))),gF=pi("generatedAnswer/streamAnswer",(async(e,t)=>{let r=t.getState(),{dispatch:n,extra:i}=t,{setAbortControllerRef:a}=e,u=await QT(r),o=(e,t)=>{switch(e){case"genqa.headerMessageType":{let e=JSON.parse(t);n(lF(e.contentFormat));break}case"genqa.messageType":n(GT(JSON.parse(t)));break;case"genqa.citationsType":n(KT(JSON.parse(t)));break;case"genqa.endOfStreamType":{let e=JSON.parse(t).answerGenerated;n(cF(!1)),n(pF(e)),n(MT(e));break}default:r.debug&&i.logger.warn(`Unknown payloadType: "${e}"`)}};n(sF(!0));let s=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=i.streamingClient?.streamGeneratedAnswer(u,{write:e=>{s(u)&&(n(sF(!1)),e.payload&&e.payloadType&&o(e.payloadType,e.payload))},abort:e=>{s(u)&&n(ZT(e))},close:()=>{s(u)&&n(cF(!1))},resetAnswer:()=>{s(u)&&n(XT())}});c?a(c):n(sF(!1))}));var yF=Kn(Xe(),(e=>e.addCase(WT,((e,{payload:t})=>{e.isVisible=t})).addCase(aF,((e,{payload:t})=>{e.id=t.id})).addCase(GT,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=t.textDelta,delete e.error})).addCase(KT,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0;let r=new Map;for(let n of[e.citations,t.citations])for(let e of n)r.set(e.uri,e);e.citations=Array.from(r.values()),delete e.error})).addCase(ZT,((e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...t,isRetryable:t.code===ea},e.citations=[],delete e.answer})).addCase(eF,(e=>{e.liked=!0,e.disliked=!1})).addCase(tF,(e=>{e.liked=!1,e.disliked=!0})).addCase(rF,(e=>{e.feedbackModalOpen=!0})).addCase(uF,(e=>{e.feedbackModalOpen=!1})).addCase(oF,(e=>{e.feedbackSubmitted=!0})).addCase(XT,(e=>({...Xe(),...e.answerConfigurationId?{answerConfigurationId:e.answerConfigurationId}:{},responseFormat:e.responseFormat,fieldsToIncludeInCitations:e.fieldsToIncludeInCitations,isVisible:e.isVisible,id:e.id}))).addCase(sF,((e,{payload:t})=>{e.isLoading=t})).addCase(cF,((e,{payload:t})=>{e.isStreaming=t})).addCase(lF,((e,{payload:t})=>{e.answerContentFormat=t})).addCase(dF,((e,{payload:t})=>{e.responseFormat=t})).addCase(hF,((e,t)=>{e.fieldsToIncludeInCitations=[...new Set(e.fieldsToIncludeInCitations.concat(t.payload))]})).addCase(pF,((e,{payload:t})=>{e.isAnswerGenerated=t})).addCase(nF,(e=>{e.expanded=!0})).addCase(iF,(e=>{e.expanded=!1})).addCase(fF,((e,{payload:t})=>{e.answerConfigurationId=t}))));function vF(e,t,r={}){if(!mF(e));let{dispatch:n}=e,i=my(e),a=()=>e.state,u=r.initialState?.isVisible;u!==void 0&&n(WT(u));let o=r.initialState?.responseFormat;o&&n(dF(o));let s=r.fieldsToIncludeInCitations;return s&&n(hF(s)),r.initialState?.expanded&&n(nF()),{...i,get state(){return a().generatedAnswer},like(){this.state.liked||(n(eF()),n(t.logLikeGeneratedAnswer()))},dislike(){this.state.disliked||(n(tF()),n(t.logDislikeGeneratedAnswer()))},openFeedbackModal(){n(rF())},closeFeedbackModal(){n(uF())},sendFeedback(e){n(t.logGeneratedAnswerFeedback(e)),n(oF())},sendDetailedFeedback(e){n(t.logGeneratedAnswerDetailedFeedback(e)),n(oF())},logCitationClick(e){n(t.logOpenGeneratedAnswerSource(e))},logCitationHover(e,r){n(t.logHoverCitation(e,r))},rephrase(e){n(dF(e))},show(){this.state.isVisible||(n(WT(!0)),n(t.logGeneratedAnswerShowAnswers()))},hide(){this.state.isVisible&&(n(WT(!1)),n(t.logGeneratedAnswerHideAnswers()))},expand(){this.state.expanded||(n(nF()),n(t.logGeneratedAnswerExpand()))},collapse(){this.state.expanded&&(n(iF()),n(t.logGeneratedAnswerCollapse()))},logCopyToClipboard(){n(t.logCopyGeneratedAnswer())},retry(){}}}function mF(e){return e.addReducers({generatedAnswer:yF}),!0}var wF={engines:{},setAbortControllerRef:(e,t)=>{wF.engines[t].abortController=e},getIsStreamInProgress:e=>!wF.engines[e].abortController||wF.engines[e].abortController?.signal.aborted?(wF.engines[e].abortController=void 0,!1):!0,subscribeToSearchRequests:e=>{let t=()=>{let t=e.state,r=t.search.requestId,n=t.search.extendedResults.generativeQuestionAnsweringId,i=t.generatedAnswer.id;wF.engines[i].lastRequestId!==r&&(wF.engines[i].lastRequestId=r,wF.engines[i].abortController?.abort(),e.dispatch(XT())),!wF.getIsStreamInProgress(i)&&n&&n!==wF.engines[i].lastStreamId&&(wF.engines[i].lastStreamId=n,e.dispatch(gF({setAbortControllerRef:e=>wF.setAbortControllerRef(e,i)})))};return e.subscribe(t)}};function bF(e,t,r={}){if(!SF(e));let n=vF(e,t,r),i=()=>e.state;if(e.state.generatedAnswer.id&&!wF.engines[e.state.generatedAnswer.id]&&(wF.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:e.state.search.requestId,lastStreamId:e.state.search.extendedResults.generativeQuestionAnsweringId??""}),!e.state.generatedAnswer.id){let t=re("genQA-",12);e.dispatch(aF({id:t}))}wF.engines[e.state.generatedAnswer.id]||(wF.engines[e.state.generatedAnswer.id]={abortController:void 0,lastRequestId:"",lastStreamId:""}),wF.subscribeToSearchRequests(e);let a=e=>"executeFirstSearchAfterStandaloneSearchBoxRedirect"in e;return{...n,get state(){return i().generatedAnswer},retry(){a(e)&&e.dispatch(ih({legacy:t.logRetryGeneratedAnswer()}))},rephrase(r){n.rephrase(r),a(e)&&e.dispatch(ih({legacy:t.logRephraseGeneratedAnswer(r),next:VT()}))}}}function SF(e){return e.addReducers({generatedAnswer:yF}),!0}var IF=Kp.injectEndpoints({endpoints:e=>({post:e.mutation({query:e=>({url:"/evaluations",method:"POST",body:e})})})});var qF=e=>e==="yes"?!0:e==="no"?!1:null,OF=({answerApiState:e,feedback:t,query:r})=>({additionalNotes:t.details??null,answer:{text:e.answer,responseId:e.answerId,format:e.contentFormat??"text/plain"},correctAnswerUrl:t.documentUrl??null,details:{correctTopic:qF(t.correctTopic),documented:qF(t.documented),hallucinationFree:qF(t.hallucinationFree),readable:qF(t.readable)},helpful:t.helpful,question:r}),AF=e=>{let t,r=()=>{let r=e.state,n=ag(r);n.q.length===0||n.requestId.length===0||n?.requestId!==t?.requestId&&(t=n,e.dispatch(XT()),e.dispatch(lg(r)))};e.subscribe(r)};function xF(e,t,r={}){if(!kF(e));let{rephrase:n,...i}=vF(e,t,r),a=()=>e.state;return e.dispatch(fF(r.answerConfigurationId)),AF(e),{...i,get state(){let t=dg(e.state).data;return{...a().generatedAnswer,answer:t?.answer,citations:t?.citations??[],error:{message:t?.error?.message,statusCode:t?.error?.code},isLoading:t?.isLoading??!1,isStreaming:t?.isStreaming??!1,answerContentFormat:t?.contentFormat??"text/plain",isAnswerGenerated:t?.generated??!1}},rephrase(t){n(t),e.dispatch(lg(a()))},retry(){e.dispatch(lg(a()))},reset(){e.dispatch(XT())},async sendFeedback(t){let r=OF({query:a().query.q,feedback:t,answerApiState:dg(e.state).data});e.dispatch(IF.endpoints.post.initiate(r)),e.dispatch(oF())}}}function kF(e){return e.addReducers({[ig.reducerPath]:ig.reducer,query:OA}),!0}function CF(e,t={}){let r=t.answerConfigurationId?xF(e,UT,t):bF(e,UT,t);return{...r,get state(){return r.state}}}function RF(e,t,r){let n=!1,i=()=>{n||(n=!0,e.dispatch(t.logOpenGeneratedAnswerSource(r.options.citation.id)))};return UO(e,r,(()=>{i()}))}function TF(e,t){return RF(e,UT,t)}var FF=()=>new bt({required:!1,emptyAllowed:!0}),jF=En("advancedSearchQueries/update",(e=>Qa(e,{aq:FF(),cq:FF(),lq:FF(),dq:FF()}))),MF=En("advancedSearchQueries/register",(e=>Qa(e,{aq:FF(),cq:FF(),lq:FF(),dq:FF()})));Kn(Y(),(e=>{e.addCase(jF,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;ct(r)||(e.aq=r,e.aqWasSet=!0),ct(n)||(e.cq=n,e.cqWasSet=!0),ct(i)||(e.lq=i,e.lqWasSet=!0),ct(a)||(e.dq=a,e.dqWasSet=!0)})).addCase(MF,((e,t)=>{let{aq:r,cq:n,lq:i,dq:a}=t.payload;ct(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),ct(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),ct(i)||(e.defaultFilters.lq=i,e.lqWasSet||(e.lq=i)),ct(a)||(e.defaultFilters.dq=a,e.dqWasSet||(e.dq=a))})).addCase(zl.fulfilled,((e,t)=>t.payload?.advancedSearchQueries??e)).addCase(El,((e,t)=>{let{aq:r,cq:n}=t.payload;ct(r)||(e.aq=r,e.aqWasSet=!0),ct(n)||(e.cq=n,e.cqWasSet=!0)}))}));function PF(e){return e.addReducers({configuration:kg,pipeline:Yl,searchHub:Wl}),{updateSearchConfiguration:Cl}}function DF(e){return e.addReducers({dateFacetSet:jS}),{deselectAllDateFacetValues:Kw,registerDateFacet:Hw,toggleSelectDateFacetValue:Yw,toggleExcludeDateFacetValue:Jw,updateDateFacetSortCriterion:Gw,updateDateFacetValues:Ww}}function EF(e){return e.addReducers({fields:ky}),{registerFieldsToInclude:wy,enableFetchAllFields:by,disableFetchAllFields:Sy,fetchFieldsDescription:Iy}}function _F(e){return e.addReducers({numericFacetSet:HS}),{deselectAllNumericFacetValues:ub,registerNumericFacet:tb,toggleSelectNumericFacetValue:rb,toggleExcludeNumericFacetValue:nb,updateNumericFacetSortCriterion:ab,updateNumericFacetValues:ib}}function $F(e){return e.addReducers({query:OA}),{updateQuery:gd}}function VF(e){return e.addReducers({querySuggest:mA,querySet:cA}),{clearQuerySuggest:XO,fetchQuerySuggestions:eA,registerQuerySuggest:GO,selectQuerySuggestion:ZO}}function UF(e){return e.addReducers({sortCriteria:XA}),{registerSortCriterion:GA,updateSortCriterion:KA}}var QF=En("excerptLength/set",(e=>Qa(e,new ft({min:0,required:!0}))));Kn(Pe(),(e=>{e.addCase(QF,((e,t)=>{e.length=t.payload}))}));var NF=new ot({content:new st({required:!0}),conditions:new st({required:!0}),priority:new ft({required:!1,default:0,min:0}),fields:new Ot({required:!1,each:Ma})});function LF(){let e=[],t=e=>{let t=NF.validate(e);if(!e.conditions.every((e=>e instanceof Function)))throw new ut("Each template condition should be a function that takes a Result or Product as an argument and returns a boolean");return t};return{registerTemplates(...r){r.forEach((r=>{let n={...t(r),fields:r.fields||[]};e.push(n)})),e.sort(((e,t)=>t.priority-e.priority))},selectTemplate(t){let r=e.find((e=>e.conditions.every((e=>e(t)))));return r?r.content:null},selectLinkTemplate(t){let r=e.find((e=>e.conditions.every((e=>e(t)))));return r?r.linkContent:null}}}function BF(e){if(!zF(e));let{registerTemplates:t,selectTemplate:r,selectLinkTemplate:n}=LF();return{registerTemplates:(...r)=>{t(...r);let n=[];r.forEach((e=>{e.fields&&n.push(...e.fields)})),e.dispatch(wy(n))},selectTemplate:r,selectLinkTemplate:n}}function zF(e){return e.addReducers({fields:ky}),!0}var HF=pi("analytics/addPageViewEntry",(async(e,{getState:t})=>{t().configuration.analytics.enabled&&tc.addElement({name:"PageView",value:e,time:JSON.stringify(new Date)})}));function YF(e){return e.addReducers({}),{addPageViewEntryInActionsHistory:HF}}function JF(e){let{by:t,order:r}=e;switch(t){case"relevancy":return Tt();case"qre":return Mt();case"nosort":return Pt();case"date":if(!r)throw new Error('An order (i.e., ascending or descending) should be specified for a sort criterion sorted by "date"');return Ft(r);default:if(!r)throw new Error(`An order (i.e., ascending or descending) should be specified for a sort criterion sorted by a field, such as "${t}"`);return jt(t,r)}}function WF(e){return e===void 0||e==="ascending"||e==="descending"}function GF(e){let t=e.split(","),r=new Error(`Wrong criterion expression format for "${e}"`);if(!t.length)throw r;return t.map((t=>{let n=t.trim().split(" "),i=n[0].toLowerCase(),a=n[1]&&n[1].toLowerCase();if(n.length>2||i==="")throw r;if(!WF(a))throw new Error(`Wrong criterion sort order "${a}" in expression "${e}". Order should either be "ascending" or "descending"`);return JF({by:i,order:a})}))}E();
/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */export{zA as $,IO as A,xd as B,uR as C,Ib as D,Ge as E,HR as F,KR as G,Qy as H,PO as I,jA as J,pT as K,GF as L,UF as M,YO as N,NO as O,YF as P,Ew as Q,sR as R,bh as S,Bd as T,zS as U,wI as V,lS as W,DF as X,ix as Y,Gt as Z,VF as _,Ox as a,fT as a0,ST as a1,vu as b,eR as c,CF as d,TO as e,nI as f,_F as g,AO as h,eI as i,PC as j,rk as k,Qx as l,PF as m,Sx as n,bC as o,$F as p,LO as q,Qq as r,kx as s,be as t,dI as u,TF as v,BF as w,EF as x,py as y,yC as z};
//# sourceMappingURL=p-ebd2bd05.js.map
</script>

</body>
</html>
