<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>site.lc-d46b1ae1c800c88589049a38c2b218a9-lc.min.html</title>
</head>
<body>

<script>
(function () {
    function onDocumentReady() {

        if(!document.getElementById("result-container")) return;

        let mainInput;
        let searchBtn= document.getElementById("search-btn");
        searchBtn.addEventListener("click", handleClick);
        document.getElementById("search-hamburger").addEventListener("click", handleClick);
        const helpCenterSearch = document.getElementById("help-center-banner-search");
        if(helpCenterSearch){
            document.getElementById("help-center-banner-search").addEventListener("click", handleClick);
        }
        if (window.location.href.indexOf("/fr/centre-daide") > -1) {
            document.getElementById("help-center-banner-search").textContent='Recherche';
          } else if (window.location.href.indexOf("/en/help-centre") > -1) {
            document.getElementById("help-center-banner-search").textContent='Search';
          }
        function handleClose(event) {
            document.getElementById("result-container").classList.remove('slide-in');
            setTimeout(() => {
                document.getElementById('search-overlay-container').classList.remove('show');
                document.body.classList.remove('noscroll');
                document.querySelector('html').classList.remove("noscroll");
            }, 350)
        }

         //  press ESC to close overlay
         document.getElementById('result-container').addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                handleClose();
                setTimeout(function () {
                 searchBtn.focus();
            }, 1);
            }
        });

        function handleClick(event) {
            const targetId = event.target.id;
            setTimeout(function () {
                const genSearchWidget = document.querySelector('gen-search-widget[triggerid="' + targetId + '"]');
                if(!genSearchWidget) return;
                const contentEle = genSearchWidget.shadowRoot.querySelector(".content");
                if(!contentEle) return;
                const ucsResults = contentEle.querySelector("ucs-results");
                if(!ucsResults) return;
                const ucsSearchBar = ucsResults.querySelector("ucs-search-bar");
                if(!ucsSearchBar) return;
                const mainContent = ucsSearchBar.shadowRoot.querySelector(".main");
                if(!mainContent) return;
                const mainLabel = mainContent.querySelector('form').querySelector('.main-label');
                if(!mainLabel) return;
                mainInput = mainContent.querySelector('form').querySelector('label').querySelector('input');
                mainInput.addEventListener('input',function(){
                    const autocmpDropdown = genSearchWidget.shadowRoot.querySelector("div").querySelector(".content").querySelector("ucs-results").querySelector("ucs-search-bar").shadowRoot.querySelector(".main").querySelector("form").querySelector("ucs-autocomplete-dropdown").shadowRoot.querySelector('ul');
                   if(autocmpDropdown){
                    autocmpDropdown.setAttribute("style","border-bottom-left-radius:5px;border-bottom-right-radius:5px;");
                   }
                });
                if(!mainInput) return;
                const mdIconButton = genSearchWidget.shadowRoot.querySelector('.backdrop').querySelector('md-icon-button');
                if(!mdIconButton) return;
                const mdIcon = mdIconButton.querySelector('md-icon');
                if(!mdIcon) return;
                const mdCloseButton = mdIconButton.shadowRoot.querySelector('button');
                if(!mdCloseButton) return;
                const searchDiv = genSearchWidget.shadowRoot.querySelector('div');
                if(!searchDiv) return;
                const prefixIcon = mainLabel.querySelector('.prefix-icon');
                if(!prefixIcon) return;
        

                const targetNode = ucsResults.shadowRoot.querySelector('.scroller');
                const config = {attributes:true,attributesOldValue:true};
                const callback= function(mutationList,observer){
                    for(const mutation of mutationList){
                        if(mutation.type === 'attributes' && mutation.attributeName === 'class' && !targetNode.classList.contains('zero-state') && !targetNode.classList.contains('special-message')){
                            const searchResultList = ucsResults.shadowRoot.querySelector('.scroller').querySelector('ol').querySelectorAll('li');
                            Removeresultslink(searchResultList);
                            function Removeresultslink(searchResultList){
                                searchResultList.forEach(list => {
                                    list.querySelector('.rows').querySelector('.link-and-badge').setAttribute("style", "display:none;");
                                    const title =list.querySelector('.rows').querySelector('.header').querySelector('a');
                                    title.addEventListener('mouseenter',function(){
                                        title.setAttribute('style','text-decoration:underline;');
                                    });
                                    title.addEventListener('mouseleave',function(){
                                        title.removeAttribute('style');
                                    });
                                    const header=list.querySelector('.rows').querySelector('.header').querySelector('a').textContent;
                                    const newHeader =header.replace('| Tangerine','')
                                    list.querySelector('.rows').querySelector('.header').querySelector('a').textContent=newHeader;
                                });
                            };
                           
                            const listMediaCSS = new CSSStyleSheet();
                            listMediaCSS.replaceSync('@media screen and (min-width: 30.063rem) and (max-width: 64rem) {.results-list{padding:30px !important;}');            
                            const node = document.createElement('div');
                            const shadow = node.attachShadow({mode: 'open'});
                            ucsResults.shadowRoot.adoptedStyleSheets.push(listMediaCSS);
                           
                          
                            const listObserver = new MutationObserver(function(mutations){
                                mutations.forEach(function(mutation){
                                    const searchResultList = ucsResults.shadowRoot.querySelector('.scroller').querySelector('ol').querySelectorAll('li');
                                    Removeresultslink(searchResultList);
                                });
                            });
                            const listNode=ucsResults.shadowRoot.querySelector('.scroller').querySelector('ol');
                            const config ={childList:true};
                            listObserver.observe(listNode,config);
                        }
                        if(mutation.type === 'attributes' && mutation.attributeName === 'class' && targetNode.classList.contains('special-message')){
                            const searchError = ucsResults.shadowRoot.querySelector('.scroller').querySelector('ol').querySelector('.empty');
                            searchError.textContent="Hmmm... We didn’t catch that. Try searching again";
                            if(document.documentElement.lang == 'fr' || document.documentElement.lang == 'fr-CA') {
                                searchError.textContent="Hmmm... Nous n'avons pas compris ça. Essayez à nouveau de chercher";
                            }
                           
                           searchError.setAttribute("style","color:#333;font-size:2rem;font-weight:700;line-height: 2.5rem;");
                        }
                    }
                };

                
                const observer =new MutationObserver(callback);
                observer.observe(targetNode,config);

                contentEle.setAttribute("style", "right: 0px; top: -5rem;border-radius:inherit;background:#fff;font-family:TangerineCircular,Arial,Helvetica,sans-serif;font-size:1.125rem;");
                mainContent.setAttribute("style", "border-radius: 0.25rem;");
                mainLabel.setAttribute("style", "border-radius:inherit;background:inherit;display: flex;flex-direction: row-reverse;");
                mdIcon.setAttribute("style", "z-index:100;color:#333;");
                mdCloseButton.setAttribute("style", "z-index:100;color:#333;margin-top:0.625rem;height:2.5rem;");
                mdCloseButton.addEventListener('click', handleClose);
                ucsSearchBar.setAttribute("style", "border-radius:inherit;box-shadow: 0 0.125rem 0.25rem 0 rgba(0,25,40,0.12);");
                searchDiv.setAttribute("style", "background: rgba(0, 0, 0, 0.40);height: 120%;backdrop-filter: none;");
                prefixIcon.setAttribute("style", "color:#616161;padding-left:0.75rem;border-left:0.063rem solid #E0E0E0;");
                mainInput.setAttribute("style", "color:#333;font-size:1.125rem;font-weight:400;line-height: 1.5rem;margin-left: 1rem;");


                // Create our stylesheet for media queries
                const genSearchWidgetSheet = new CSSStyleSheet();
                genSearchWidgetSheet.replaceSync('@media screen and (max-width: 47.938rem) {.content {width:100% !important;left:inherit !important;border: 0.063rem solid rgb(244, 246, 251);} .backdrop button{display:none !important;} .backdrop md-icon-button {display: block;}} @media screen and (min-width: 79.938rem) {.content{width:100% !important;}} @media screen and (min-width: 48rem) and (max-width: 63.938rem) {.content{width:30rem !important;left:calc(100% - 30rem)}} @media screen and (min-width: 64rem) and (max-width: 79.938rem) {.content{width:37.5rem !important;left:calc(100% - 37.5rem)}}');
                const ucsSearchBarSheet = new CSSStyleSheet();
                ucsSearchBarSheet.replaceSync('@media screen and (max-width: 30rem) {.main{max-width:15.625rem !important;margin-top:0.625rem}} @media screen and (min-width: 30.063rem) and (max-width: 64rem) {.main{max-width:21.875rem !important;margin-right:3.75rem;margin-left:-3.75rem;}');

                // Apply the stylesheet to a Shadow Root:
                const node = document.createElement('div');
                const shadow = node.attachShadow({mode: 'open'});

                genSearchWidget.shadowRoot.adoptedStyleSheets.push(genSearchWidgetSheet);
                ucsSearchBar.shadowRoot.adoptedStyleSheets.push(ucsSearchBarSheet);

                
                document.getElementById('search-overlay-container').classList.add('show');
                document.body.classList.add('noscroll');
                document.querySelector('html').classList.add("noscroll");
                document.getElementById("result-container").classList.add('slide-in');
            }, 1);

            setTimeout(function (){
                mainInput.focus();
             }, 100);   
        }
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    } 
})();

</script>

</body>
</html>
