<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7720.b1ea4de9b7a3871148fa.html</title>
</head>
<body>

<script>
(self.webpackChunk_cleverpush_cleverpush_js_sdk=self.webpackChunk_cleverpush_cleverpush_js_sdk||[]).push([[7720,2508],{7720:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Confirm}});var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7757),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(484),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(2137),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6610),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5991),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6156),ua_parser_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2238),ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_2__),_utils_debug__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1078),_utils_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5895),_utils_translate__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3114),_utils_topics__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2508),_utils_detect__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6716),_utils_strings__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8200),_const_event__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2034),_confirm_scss__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8296),_utils_env__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7159);function ownKeys(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach((function(e){(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var CONFIRM_SELECTOR=".cleverpush-confirm",BACKDROP_SELECTOR=".cleverpush-backdrop",CHECKED_TOPICS_AMOUNT_NEEDED=0,REGEX_NEW_LINES=/\r?\n|\r/g,REGEX_SPACE=/\s/g,CONFIRM_CLASS_PREFIX="cleverpush-confirm",EMPTY_STRING="",NEW_OPT_IN_THEMES=["cascade-alert","clever-opt-in","midnight-harmony","nova-black","pulse-notify","swift-alert","vortex-notification","zenith-opt-in"],CLEVER_OPT_IN="cleverpush-confirm-clever-opt-in",Confirm=function(){function Confirm(t,e){var o=this;(0,_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_12__.Z)(this,Confirm),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__.Z)(this,"isNewOptIn",(function(t){return NEW_OPT_IN_THEMES.some((function(e){return t.includes(e)}))})),this.autoHideBackdrop=!0,this.cleverpush=t,this.config=t.config,this.subscriptionManager=e,this.id=document.querySelectorAll(CONFIRM_SELECTOR).length+1,this.visible=!1,this.channelTopics=(this.config.channelTopics||[]).filter((function(t){var e=!0;return e&&t.matchPath&&t.matchPath.length&&(e=new RegExp(t.matchPath).test(window.parent.location.pathname)),e&&t.notMatchPath&&t.notMatchPath.length&&(e=!new RegExp(t.notMatchPath).test(window.parent.location.pathname)),e})),this.facebookEnabled=!1,this.config.facebookPageId&&this.config.facebookPageId.length&&this.config.facebookCheckboxEnabled&&(this.facebookEnabled=!0,this.facebookUserRef=this.subscriptionManager.storageManager.getFacebookUserRef(),this.facebookUserRef||(this.facebookUserRef="".concat(this.config.channelId,"-"),this.facebookUserRef+=Math.random().toString(36).slice(2))),window.addEventListener("pagehide",(function(){o.autoHideBackdrop=!0,o.hide()})),this.onTopicsAllowClick=this.onTopicsAllowClick.bind(this)}return(0,_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_13__.Z)(Confirm,[{key:"resetBell",value:function(t){"function"==typeof t&&(this.bellResetCallback=t)}},{key:"getArrowNode",value:function(t,e){var o="own"===t?e:_objectSpread(_objectSpread({},function(){if(t===_utils_env__WEBPACK_IMPORTED_MODULE_11__.T5.GRANT){if((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.bX)())return{x:347,y:92,padding:20};if((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.vU)())return{x:311,y:148,padding:20}}if(t===_utils_env__WEBPACK_IMPORTED_MODULE_11__.T5.DENIED){if((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.bX)())return{x:131,y:0,padding:0};if((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.vU)())return{x:60,y:0,padding:0}}else if(t===_utils_env__WEBPACK_IMPORTED_MODULE_11__.T5.SILENT&&((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.bX)()||(0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.un)()))return{x:window.innerWidth-250,y:0,padding:0,class:"reverse-arrow"};return null}()),e||{});if(!o)return null;var i=o.textNode||document.querySelector(".cleverpush-backdrop-text h2");if(i&&i.getBoundingClientRect){var n=i.getBoundingClientRect(),c=o.position||{x:window.innerWidth/2,y:(window.innerHeight-n.height)/2},r=Math.sqrt(Math.pow(o.x-c.x,2)+Math.pow(o.y-c.y,2)),_=Math.max(.1*r,15),s=o.x,a=o.y+_+o.padding,l=c.x-15,h=Math.max(c.y+20+n.height,a+40),u=l-s,f=h-a,p="M ".concat(l," ").concat(h," q ").concat(-1*u," ").concat(f,", ").concat(-1*u," ").concat(-1*f),d="M ".concat(s-_," ").concat(a+_," q ").concat(_," ").concat(-3*_,", ").concat(2*_," 0"),m=!!o.class&&o.class||"cp-arrow";_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.info("getArrowNode",{type:t,i:o,o:c,r:r,S:_,s:s,C:a,posX:l,posY:h,l:u,h:f,_:p,c:d});var E='\n      <div class="cleverpush-backdrop-arrow">\n        <svg \n          width="'.concat(window.innerWidth,'px"\n          height="').concat(window.innerHeight,'px"\n          class=').concat(m,'\n          viewBox="0 0 ').concat(window.innerWidth," ").concat(window.innerHeight,'"\n          version="1.1" xmlns="http://www.w3.org/2000/svg"\n        >\n            <g stroke-width="5" stroke-linecap="round" fill="none" fill-rule="evenodd">\n              <path d="').concat(p,'" id="tail" stroke="#FFFFFF"></path><path d="').concat(d,'" id="head" stroke="#FFFFFF"></path>\n            </g>\n         </svg>\n        </div>\n       </div>');return(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.dS)(E)}}},{key:"removeConfirmBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("removeConfirmBox"),this.visible=!1;var e=document.getElementsByClassName(CONFIRM_CLASS_PREFIX);if(e.length){var o=e[e.length-1];(t||(!this.withTopics||o.className.indexOf("cleverpush-topic-box")<0)&&o.className.indexOf("cleverpush-attributes-box")<0)&&o.parentNode.removeChild(o)}this.confirmBox=null}},{key:"removeBrandingBox",value:function(){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("removeBrandingBox"),this.visible=!1;var t=document.getElementsByClassName("cleverpush-branding-box");if(t.length){var e=t[t.length-1];e.parentNode.removeChild(e)}}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("hide"),this.autoHideBackdrop&&this.hideBackdrop(),this.removeConfirmBox(t),this.removeBrandingBox()}},{key:"onCloseClick",value:function(t){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("closeConfirmBox"),t.preventDefault();var e=this.getSelectedTopics(),o=this.hasTopicCheckboxes(!0);if(this.config.confirmAlertRequireChannelTopics&&!e.length&&o&&this.withTopics&&this.config.confirmAlertSelectTopicsLater)alert(this.config.confirmAlertRequireChannelTopicsTitle||"Bitte wähle mindestens eine Kategorie aus.");else{this.hide(!0),this.hideBackdrop();try{this.subscriptionManager.storageManager.setClosed(),this.subscriptionManager.iframeMessenger&&this.subscriptionManager.iframeMessenger.setClosed&&this.subscriptionManager.iframeMessenger.setClosed()}catch(t){_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.error(t)}this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.OPTIN_CLOSED)}}},{key:"onAllowClick",value:function(t){var e=this;(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("onAllowClick"),t.preventDefault();var o=this.getSelectedTopics(),i=this.hasTopicCheckboxes(!0);if((0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.ct)()&&this.hideBackdrop(),!this.config.confirmAlertRequireChannelTopics||o.length||!i||!this.withTopics&&this.config.confirmAlertSelectTopicsLater)if("function"!=typeof this.allowCallback||(this.allowCallback(!0,o),this.allowCallback=void 0,this.withTopics)){if(!this.withTopics&&this.config.showConfirmAlert&&this.config.confirmAlertDouble){if("Android"===_utils_env__WEBPACK_IMPORTED_MODULE_11__.os.name||"mobile"===_utils_env__WEBPACK_IMPORTED_MODULE_11__.Uh.type||"PREVIEW"===this.config.env&&this.config.mobilePreview)return this.hide(),this.hideBackdrop(),this.appendDoubleBox(),void this.subscriptionManager.api.confirmAlertShown(this.subscriptionManager.existingPermission,"confirm");var n=document.querySelector(BACKDROP_SELECTOR);if(n){var c=this.getArrowNode("grant",{textNode:{},position:{x:window.innerWidth/2,y:window.innerHeight/2}});c&&n.appendChild(c)}}if(this.confirmBox||(this.confirmBox=document.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-").concat(this.id))),this.confirmBox)for(var r=this.confirmBox.querySelectorAll('input[name="topics[]"]'),_=0;_<r.length;_+=1)if(r[_].checked&&r[_].dataset&&"true"===r[_].dataset.childTopicsRequired){var s=this.confirmBox.querySelectorAll('.topic-child[data-parent-topic="'.concat(r[_].value,'"] input'));if(s.length){for(var a=0,l=0;l<s.length;l+=1)s[l].checked&&(a+=1);if(a===CHECKED_TOPICS_AMOUNT_NEEDED)return void alert("Bitte wähle mindestens eine Kategorie in ".concat((r[_].parentNode.innerText||EMPTY_STRING).trim()," aus."))}}if(this.subscriptionManager.setTopics(o),this.withTopics&&this.config.confirmAlertSelectTopicsLater&&i)return this.subscriptionManager.sync(),this.withTopics=!1,this.hide(),this.subscribeCallback&&this.subscribeCallback(!1),this.subscriptionManager.registerForPushLater&&this.subscriptionManager.registerForPush(),void this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.TOPICS_MANUALLY_SAVED);if(this.config.showUnblockTutorial){this.hide(),this.showBackdrop(void 0,"denied",(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("popup.info").formatCleverPush("<strong>".concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allowBrowser")||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allow"),"</strong>")));try{sessionStorage.setItem("cleverpush-subscription-status","denied")}catch(t){}}else{this.config.showSilentPromptTutorial&&(this.hide(),this.config.confirmAlertHideArrow=!1,this.showBackdrop(void 0,"silentPrompt",(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.silentPromptInfo")));var h=!1;if(this.config.ownDomain&&("https:"===window.parent.location.protocol||"localhost"===window.parent.location.hostname)&&this.config.showConfirmAlert?(this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme&&"cleverpush-confirm-backdrop-text"!==this.config.confirmAlertNativeTheme?(this.removeConfirmBox(),h=!0):this.hide(),this.subscriptionManager.api.confirmAlertShown(this.subscriptionManager.existingPermission,"confirm")):this.hide(),localStorage.setItem("cleverpush-subscription-status","allowed"),"PREVIEW"===this.config.env){var u=document.getElementById("cleverpush-preview-native");if(u)return u.style.display="block",void(h&&this.appendConfirmBox("".concat(this.config.confirmAlertNativeTheme," ").concat(this.config.confirmAlertNativeTheme,"-native")))}var f=!1;(0,_utils_detect__WEBPACK_IMPORTED_MODULE_7__.F)({subscriptionManager:this.subscriptionManager,config:this.config,subscribe:function(){e.subscriptionManager.subscribeForce(!1).then((function(t){f=!0,e.hideBackdrop(),e.subscribeCallback&&e.subscribeCallback(!1,t)})).catch((function(t){f=!0,e.hideBackdrop(),e.subscribeCallback&&e.subscribeCallback(t)}))},showBackdrop:function(){h&&e.appendConfirmBox("".concat(e.config.confirmAlertNativeTheme," ").concat(e.config.confirmAlertNativeTheme,"-native"))},setShowBackdrop:function(t){return t},showSilentAlert:function(){f||e.config.silentPromptTutorialDisabled||(e.hide(),e.config.confirmAlertHideArrow=!1,e.showBackdrop(void 0,"silentPrompt",(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.silentPromptInfo")))}}),this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.OPTIN_ALLOWED)}}else this.hide();else alert(this.config.confirmAlertRequireChannelTopicsTitle||"Bitte wähle mindestens eine Kategorie aus.")}},{key:"appendDoubleBox",value:function(){var t=(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.dS)('\n      <div class="'.concat(CONFIRM_CLASS_PREFIX,"-double ").concat(CONFIRM_CLASS_PREFIX,"-double-").concat(this.id,'">\n        <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-above">\n          ').concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.doubleText").formatCleverPush("<strong>".concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allowBrowser")||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allow"),"</strong>")),'\n        </div>\n        <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-content">\n          <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-text">\n            <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-bell">\n              <svg height="512pt" viewBox="-21 0 512 512" width="512pt" xmlns="http://www.w3.org/2000/svg">\n              <path d="m434.753906 360.8125c-32.257812-27.265625-50.753906-67.117188-50.753906-109.335938v-59.476562c0-75.070312-55.765625-137.214844-128-147.625v-23.042969c0-11.796875-9.558594-21.332031-21.332031-21.332031-11.777344 0-21.335938 9.535156-21.335938 21.332031v23.042969c-72.253906 10.410156-128 72.554688-128 147.625v59.476562c0 42.21875-18.496093 82.070313-50.941406 109.503907-8.300781 7.105469-13.058594 17.429687-13.058594 28.351562 0 20.589844 16.746094 37.335938 37.335938 37.335938h352c20.585937 0 37.332031-16.746094 37.332031-37.335938 0-10.921875-4.757812-21.246093-13.246094-28.519531zm0 0"/><path d="m234.667969 512c38.632812 0 70.953125-27.542969 78.378906-64h-156.757813c7.421876 36.457031 39.742188 64 78.378907 64zm0 0"/></svg>\n            </div>\n            <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-title">').concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.nativeTitle").formatCleverPush(location.hostname||this.config.domain),'</div>\n          </div>\n          <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-buttons">\n            <button type="button" class="').concat(CONFIRM_CLASS_PREFIX,'-double-btn">').concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allowBrowser")||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allow"),'</button>\n          </div>\n        </div>\n        <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-below">\n          <div class="').concat(CONFIRM_CLASS_PREFIX,'-double-arrow"></div>\n        </div>\n      </div>\n      ')),e=t.querySelector(".cleverpush-confirm-double-content").getBoundingClientRect(),o=t.querySelector(".cleverpush-confirm-double-arrow");if(o){var i=this.getArrowNode("own",{x:window.innerWidth-55,y:window.innerHeight/2+e.height/2+65,padding:0,textNode:t.querySelector(".cleverpush-confirm-double-below")});i&&o.appendChild(i)}var n=t.querySelector(".cleverpush-confirm-double-btn");n&&n.addEventListener("click",this.onDoubleAllowClick.bind(this)),document.body.appendChild(t),this.doubleBox=document.body.querySelector(".cleverpush-confirm-double")}},{key:"onDoubleAllowClick",value:function(t){var e=this;t.preventDefault(),(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("onDoubleAllowClick"),this.doubleBox&&this.doubleBox.parentNode.removeChild(this.doubleBox),this.subscriptionManager.subscribeForce(!1).then((function(t){e.hideBackdrop(),e.subscribeCallback&&e.subscribeCallback(!1,t)})).catch((function(t){e.hideBackdrop(),e.subscribeCallback&&e.subscribeCallback(t)}))}},{key:"onDenyClick",value:function(t){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("denyPush"),t.preventDefault();try{"PREVIEW"!==this.config.env&&(this.subscriptionManager.storageManager.setDenied(),this.subscriptionManager.iframeMessenger&&this.subscriptionManager.iframeMessenger.setDenied&&this.subscriptionManager.iframeMessenger.setDenied())}catch(t){_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.error(t)}this.autoHideBackdrop=!0,this.hide(),!this.config.ownDomain||"https:"!==window.parent.location.protocol&&"localhost"!==window.parent.location.hostname||this.showDenyAlert(),"function"==typeof this.allowCallback&&(this.allowCallback(!1,[]),this.allowCallback=void 0),this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.OPTIN_DENIED)}},{key:"onTopicsDenyClick",value:function(t,e){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("denyPush"),t.preventDefault(),this.autoHideBackdrop=!0,this.hide(),"function"==typeof this.allowCallback&&(this.allowCallback(!1,[]),this.allowCallback=void 0),this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.TOPICS_LAYER_DENIED,e)}},{key:"onTopicsAllowClick",value:function(t,e){this.onAllowClick(t),this.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_9__.Z.TOPICS_LAYER_ALLOWED,e)}},{key:"hasTopicCheckboxes",value:function(t){if((0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("hasTopicCheckboxes"),this.config.confirmAlertSelectTopicsLater&&!this.withTopics&&void 0===t)return!0;var e=document.querySelector(CONFIRM_SELECTOR);return!!e&&e.querySelectorAll('input[name="topics[]"]').length>0}},{key:"getSelectedTopics",value:function(){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("getSelectedTopics");var t=(this.channelTopics||[]).filter(_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked).map((function(t){return t._id})),e=document.querySelector(CONFIRM_SELECTOR);if(e){var o=e.querySelectorAll('input[name="topics[]"]');if(o&&o.length){t=[];for(var i=0;i<o.length;i+=1)"checkbox"!==o[i].type&&"radio"!==o[i].type||!o[i].checked||t.push(o[i].value)}}return t}},{key:"showDenyAlert",value:function(){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("showDenyAlert")}},{key:"onClickToCloseDenyAlert",value:function(t){this.denyAlert&&t.target!==this.denyAlert&&t.target.parentNode!==this.denyAlert&&(document.removeEventListener("click",this.onClickToCloseDenyAlertListener),this.onDenyAlertClick())}},{key:"onDenyAlertClick",value:function(t){void 0!==t&&t.preventDefault(),(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("onDenyAlertClick");var e=document.getElementsByClassName("cleverpush-deny-alert")[0];e.parentNode.removeChild(e),this.denyAlert=null}},{key:"showBrandingBox",value:function(){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("showBrandingBox"),document.body.appendChild((0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.dS)('<div class="cleverpush-branding-box cleverpush-branding-box-'.concat(this.id,'"><div class="cleverpush-branding-box-text">').concat(this.getBrandingLinks(),'</div><button class="cleverpush-branding-box-close">&times;</button></div>'))),this.brandingBox=document.querySelector(".cleverpush-branding-box-".concat(this.id)),this.brandingBoxCloseButton=this.brandingBox.querySelector(".cleverpush-branding-box-close"),this.brandingBoxCloseButton&&this.brandingBoxCloseButton.addEventListener("click",this.removeBrandingBox.bind(this))}},{key:"getBrandingLinks",value:function(){var t=[],e=this.config.confirmAlertThemeLinkColor;this.config.confirmAlertLinkStyle&&this.config.confirmAlertLinkStyle.color&&(e=this.config.confirmAlertLinkStyle.color);var o=e?"color: ".concat(e," !important"):EMPTY_STRING;if(!this.config.hideBranding){var i=this.config.cleverpushDomain||"cleverpush.com";"mycleverpush.com"===i&&(i="cleverpush.com");var n="CleverPush";"convertpush.io"===i&&(n="ConvertPush"),t.push('<a href="https://'.concat(i,'/" target="_blank" style="').concat(o,'">Powered by ').concat(this.isNewOptIn(this.config.confirmAlertTheme)?"<strong>".concat(n,"</strong>"):n,"</a>"))}return this.config.privacyPolicyUrl&&t.push('<a href="'.concat(this.config.privacyPolicyUrl,'" target="_blank" style="').concat(o,'">').concat(this.config.privacyPolicyText||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("privacy"),"</a>")),this.config.faqText&&this.config.faqUrl&&t.push('<a href="'.concat(this.config.faqUrl,'" target="_blank" style="').concat(o,'">').concat(this.config.faqText||"FAQ","</a>")),t.join(" &nbsp;/&nbsp; ")}},{key:"showBackdrop",value:function(t,e,o){var i=this;(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("showBackdrop");var n="grant";if(void 0!==e&&("denied"!==e&&"silentPrompt"!==e||(n=e)),"denied"===n||"silentPrompt"===n||this.config.hideNativeConfirmAlert||this.config.showConfirmAlert||!this.config.confirmAlertNativeTheme||"cleverpush-confirm-default"===this.config.confirmAlertNativeTheme||"cleverpush-confirm-backdrop-text"===this.config.confirmAlertNativeTheme||!this.config.ownDomain||"https:"!==window.parent.location.protocol&&"localhost"!==window.parent.location.hostname||(_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.debug("appending native backdrop",this.config.showConfirmAlert),this.appendConfirmBox("".concat(this.config.confirmAlertNativeTheme," ").concat(this.config.confirmAlertNativeTheme,"-native"))),this.config.confirmAlertBackdrop||this.config.showConfirmAlert||this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme||this.config.hideBranding||this.showBrandingBox(),"denied"===n||"silentPrompt"===n||void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop){var c=this.config.alertLocalization||{},r=(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.ej)(this.config||{});this.config.alertLocalizationTranslations&&r&&this.config.alertLocalizationTranslations[r]&&(c=_objectSpread(_objectSpread({},c),this.config.alertLocalizationTranslations[r]));var _=EMPTY_STRING;if(this.config.ownDomain&&("https:"===window.parent.location.protocol||"localhost"===window.parent.location.hostname)&&("denied"===n||"silentPrompt"===n||"cleverpush-confirm-backdrop-text"===this.config.confirmAlertNativeTheme))if("grant"===n)_+='<div class="cleverpush-backdrop-text" style="'.concat(this.config.confirmAlertThemeTextColor?"color: ".concat(this.config.confirmAlertThemeTextColor):EMPTY_STRING,'">\n').concat(this.config.channelIcon&&!this.config.confirmAlertHideChannelIcon?'<p class="cleverpush-backdrop-icon"><img src="'.concat(this.config.channelIcon,'" alt="').concat(this.config.channelName,'"></p>'):EMPTY_STRING,"\n<h2>").concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(c.title)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("popup.info").formatCleverPush("<strong>".concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allowBrowser")||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allow"),"</strong>")),"</h2>\n<p>").concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(c.info)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("popup.text").formatCleverPush("<strong>".concat(this.config.channelName,"</strong>")),"</p>\n</div>");else if("silentPrompt"===n)_+='<div class="cleverpush-backdrop-text"><h2>'.concat(c.silentPromptOptInInputText||o,"</h2></div>");else{var s=new(ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default()),a=s.getBrowser().name,l=s.getOS().name;a=a.toLowerCase().replace(/\s/g,EMPTY_STRING).replace("chromium","chrome").replace("edge","chrome"),l=l.toLowerCase().replace(/\s/g,EMPTY_STRING).replace("macos","mac");var h=EMPTY_STRING;"chrome"!==a&&"firefox"!==a&&"safari"!==a||"android"!==l&&"windows"!==l&&"mac"!==l||(h="chrome"===a&&"android"===l?'<div><video src="https://static.cleverpush.com/app/images/unblock-tutorial/'.concat(a,"-").concat(l,'.mp4" width="100%" autoplay loop muted playsinline /></div>'):'<div><img src="https://static.cleverpush.com/app/images/unblock-tutorial/'.concat(a,"-").concat(l,'.gif" /></div>')),_+='<div class="cleverpush-backdrop-text"><h2>'.concat(h?(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("unblock.title"):o,"</h2>").concat(h,"</div>")}var u=document.getElementsByClassName("cleverpush-backdrop");if(u&&u.length)for(var f=0;f<u.length;f+=1){var p=u[f];p&&p.parentNode&&p.parentNode.removeChild(p)}var d=document.createElement("div");if(d.className="cleverpush-backdrop cleverpush-backdrop-".concat(n),d.style.display="none",d.innerHTML=_,this.config.confirmAlertBackdropOpacity&&"denied"!==n&&"silentPrompt"!==n&&(d.style.backgroundColor="rgba(0, 0, 0, ".concat(this.config.confirmAlertBackdropOpacity,")")),this.config.confirmAlertBackdropBlur&&(d.className+=" cleverpush-backdrop-blur"),this.config.confirmAlertHideOnBackgroundClick||d.addEventListener("click",(function(t){t.preventDefault(),i.hideBackdrop(n)})),document.body&&(document.body.appendChild(d),document.body.classList?(document.body.classList.add("has-cleverpush-backdrop"),this.config.confirmAlertBackdropBlur&&document.body.classList.add("has-cleverpush-backdrop-blur")):(document.body.className+=" has-cleverpush-backdrop",this.config.confirmAlertBackdropBlur&&(document.body.className+=" has-cleverpush-backdrop-blur"))),"function"==typeof window.renderCustomToolTip&&_)return window.renderCustomToolTip(d),void(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.Ji)(d,200,void 0!==t?t:function(){});if(_&&_.length&&!this.config.confirmAlertHideArrow){var m=this.getArrowNode(n);m&&d.appendChild(m)}(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.Ji)(d,200,void 0!==t?t:function(){})}else"function"==typeof t&&t()}},{key:"hideBackdrop",value:function(t){if((0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("hideBackdrop"),this.removeBrandingBox(),document.body&&(document.body.classList?(this.config.confirmAlertBackdropBlur&&document.body.classList.remove("has-cleverpush-backdrop-blur"),document.body.classList.remove("has-cleverpush-backdrop")):(this.config.confirmAlertBackdropBlur&&(document.body.className=document.body.className.replace("has-cleverpush-backdrop-blur",EMPTY_STRING)),document.body.className=document.body.className.replace("has-cleverpush-backdrop",EMPTY_STRING))),!this.config.hideNativeConfirmAlert&&this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme&&"cleverpush-backdrop-text"!==this.config.confirmAlertNativeTheme&&this.confirmBox&&this.confirmBox.className.includes("".concat(this.config.confirmAlertNativeTheme,"-native"))&&this.removeConfirmBox(),void 0!==t&&"denied"===t||void 0===this.config.confirmAlertBackdrop||this.config.confirmAlertBackdrop||this.config.showSilentPromptTutorial){"function"!=typeof this.bellResetCallback||void 0!==t&&"grant"!==t||(this.bellResetCallback(!1),this.bellResetCallback=void 0);for(var e=document.getElementsByClassName("cleverpush-backdrop"),o=0;o<e.length;o+=1){!function(t){(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.U6)(t,200,(function(){t&&t.parentNode&&t.parentNode.removeChild(t)}))}(e[o])}}}},{key:"getLocalization",value:function(t){var e=this.config.alertLocalization||{},o=(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.ej)(this.config||{});return this.config.alertLocalizationTranslations&&o&&this.config.alertLocalizationTranslations[o]&&(e=_objectSpread(_objectSpread({},e),this.config.alertLocalizationTranslations[o])),e=_objectSpread(_objectSpread({},e),t.customLocalization),t.topicsRequired&&(this.config.confirmAlertRequireChannelTopics=!0),{title:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.title)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.title").formatCleverPush(this.config.channelName),info:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.info)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.info"),deny:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.deny)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.deny"),allow:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.allow)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allow"),confirmInfo:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.confirmInfo)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("popup.info").formatCleverPush((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.allowBrowser")),nativeTitle:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.nativeTitle),nativeText:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.nativeText),moreInfo:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.moreInfo),moreButton:(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.moreButton)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.more")}}},{key:"appendConfirmBox",value:function(){var _appendConfirmBox=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_14__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function _callee(confirmAlertThemeParam,withTopicsParam,configParam,allowCallback){var _this5=this,confirmConfig,localization,confirmClass,confirmStyle,confirmAlertTheme,isNewOptInAvailable,parser,topicSelection,_topics,parentContainer,showLinks,isNativeBox,canHideTopics,infoStyle,brandingLinks,topbarArrow,closeButton,iconClass,textStyle,titleStyle,allowButtonStyleInline,moreInfo,linkColor,confirmAlertHeroImage,confirm,property,_property,buttonStyle,allowButtonStyle,icon,style,text,margin,_property2,_property3,_property4,moreDiv,topics,topicIndex,topicsDiv,templateFunc;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if((0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("appendConfirmBox",confirmAlertThemeParam,withTopicsParam,configParam),!this.confirmBox){_context.next=3;break}return _context.abrupt("return");case 3:if(this.withTopics="boolean"==typeof withTopicsParam&&withTopicsParam,!this.withTopics||!document.querySelector(".cleverpush-topic-box")){_context.next=6;break}return _context.abrupt("return");case 6:if("function"==typeof allowCallback&&(this.allowCallback=allowCallback),confirmConfig="object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(configParam)?configParam:{},localization=this.getLocalization(confirmConfig),confirmClass="".concat(CONFIRM_CLASS_PREFIX,"-default"),confirmStyle=EMPTY_STRING,confirmAlertTheme=void 0!==confirmAlertThemeParam?confirmAlertThemeParam:this.config.confirmAlertTheme,!confirmAlertTheme){_context.next=18;break}if(isNewOptInAvailable=this.isNewOptIn(confirmAlertTheme),!isNewOptInAvailable){_context.next=17;break}return _context.next=17,__webpack_require__(7233)("./".concat(confirmAlertTheme,".scss"));case 17:confirmClass=confirmAlertTheme;case 18:if(parser=new(ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default()),this.config.confirmAlertThemeVariant&&"cleverpush-confirm-auto"!==this.config.confirmAlertThemeVariant?confirmClass+=" ".concat(this.config.confirmAlertThemeVariant):"Mac OS"===parser.getOS().name?confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-mac"):"Windows"===parser.getOS().name&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-windows ").concat(CONFIRM_CLASS_PREFIX,"-chrome")),"Firefox"===parser.getBrowser().name&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-firefox")),"Opera"===parser.getBrowser().name&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-opera")),"Safari"===parser.getBrowser().name&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-safari")),"Chrome"===parser.getBrowser().name||"Edge"===parser.getBrowser().name&&(0,_utils_env__WEBPACK_IMPORTED_MODULE_11__.ct)()?confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-chrome"):"Edge"===parser.getBrowser().name&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-edge")),this.config.confirmAlertStyle&&this.config.confirmAlertStyle.color&&(this.config.confirmAlertThemeTextColor=this.config.confirmAlertStyle.color),this.config.confirmAlertThemeBackgroundColor?(confirmStyle+="background-color: ".concat(this.config.confirmAlertThemeBackgroundColor,";"),this.config.confirmAlertThemeTextColor&&(confirmStyle+="color: ".concat(this.config.confirmAlertThemeTextColor,";"))):this.config.confirmAlertThemeBackground&&(confirmClass+=" ".concat(this.config.confirmAlertThemeBackground)),this.config.confirmAlertHideChannelIcon&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-hide-channel-icon")),this.config.confirmAlertHideArrow&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-hide-arrow")),"PREVIEW"===this.config.env&&(confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-preview")),this.config.confirmAlertCloseButton&&(confirmClass+=" cleverpush-confirm-with-close"),this.config.confirmAlertPlacement&&(confirmClass+=" ".concat(this.config.confirmAlertPlacement)),confirmClass+=" ".concat(CONFIRM_CLASS_PREFIX,"-").concat(this.id),topicSelection=EMPTY_STRING,confirmConfig.topicsLayer&&!this.withTopics||(this.config.topicsTemplateFunction?topicSelection='<div class="cleverpush-topics '.concat(CONFIRM_CLASS_PREFIX,'-topics"></div>'):this.channelTopics&&this.channelTopics.length&&!this.config.confirmAlertHideChannelTopics&&(_topics=this.channelTopics.filter((function(t){return!t.parentTopic})),confirmConfig&&confirmConfig.parentTopic&&(_topics=this.channelTopics.filter((function(t){return t.parentTopic===confirmConfig.parentTopic}))),topicSelection+='<div class="cleverpush-topics '.concat(CONFIRM_CLASS_PREFIX,'-topics">'),_topics.sort((function(t,e){return t.sort-e.sort})).forEach((function(t){var e=(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(t.name),o=t.description?'<div class="cleverpush-topic-description">'.concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(t.description),"</div>"):EMPTY_STRING,i=_this5.channelTopics.filter((function(e){return e.parentTopic===t._id}));topicSelection+='<div><div class="'.concat(i.length?"topic-has-children":EMPTY_STRING,'"><label style="').concat(_this5.config.confirmAlertThemeTextColor?"color: ".concat(_this5.config.confirmAlertThemeTextColor,";"):EMPTY_STRING,'"><input type="').concat(_this5.config.confirmAlertRadioButtonTopics||confirmConfig.topicsRadioButtons?"radio":"checkbox",'" name="topics[]" value="').concat(t._id,'" ').concat((0,_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked)(t,_this5.subscribedTopics)?"checked":EMPTY_STRING," ").concat(t.childTopicsRequired?' data-child-topics-required="true"':EMPTY_STRING,"><div>").concat(e).concat(o,"</div></label></div></div>"),i.length&&i.forEach((function(e){var o=(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(e.name),i=_this5.config.confirmAlertRadioButtonTopics||t.childTopicsRadioButtons?"radio":"checkbox";topicSelection+='<div class="topic-child" data-parent-topic="'.concat(t._id,'" style="margin-left: 20px; font-size: 90%; ').concat((0,_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked)(t,_this5.subscribedTopics)?EMPTY_STRING:"display: none;",'"><label><input type="').concat(i,'" name="topics[]" value="').concat(e._id,'" ').concat((0,_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked)(t,_this5.subscribedTopics)&&(0,_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked)(e,_this5.subscribedTopics)?"checked":EMPTY_STRING,"> ").concat(o,"</label></div>")}))})),topicSelection+="</div>")),this.config.appendConfirmBoxTo&&(parentContainer=document.querySelector(this.config.appendConfirmBoxTo)),parentContainer?confirmClass+="cleverpush-confirm-static":(this.config.appendConfirmBoxTo&&_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.error("appendConfirmBoxTo: container not found. Falling back to default."),parentContainer=document.body),showLinks=!0,this.withTopics||"https:"!==window.parent.location.protocol&&"localhost"!==window.parent.location.hostname||(isNativeBox=confirmAlertThemeParam&&confirmAlertThemeParam!=="".concat(CONFIRM_CLASS_PREFIX,"-default ").concat(CONFIRM_CLASS_PREFIX,"-default-native")&&confirmAlertThemeParam!=="".concat(CONFIRM_CLASS_PREFIX,"-backdrop-text ").concat(CONFIRM_CLASS_PREFIX,"-backdrop-text-native"),isNativeBox||void 0===window.Notification||"granted"!==window.Notification.permission||(isNativeBox=!0),_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.debug("isNativeBox",isNativeBox),this.config.confirmAlertSelectTopicsLater?topicSelection=EMPTY_STRING:this.config.showConfirmAlert&&this.config.isSafari_12_1?isNativeBox&&(topicSelection=EMPTY_STRING):this.config.showConfirmAlert?(canHideTopics=this.config.confirmAlertNativeTheme&&"cleverpush-confirm-default"!==this.config.confirmAlertNativeTheme,isNativeBox?canHideTopics&&(this.config.showConfirmAlertMobile||this.config.confirmAlertSelectTopicsLaterDisabled)&&(topicSelection=EMPTY_STRING):!canHideTopics||this.config.showConfirmAlertMobile||this.config.confirmAlertSelectTopicsLaterDisabled||(topicSelection=EMPTY_STRING)):isNativeBox&&this.config.confirmAlertSelectTopicsLater&&this.config.ownDomain&&(topicSelection=EMPTY_STRING),isNativeBox&&(localization.title=localization.nativeTitle||localization.title||EMPTY_STRING,localization.info=localization.nativeText||localization.info||EMPTY_STRING,localization.moreInfo=localization.moreInfo||EMPTY_STRING)),this.facebookEnabled&&!this.config.facebookButtonOptIn&&(this.config.facebookDoubleOptIn&&!this.facebookDoubleOptInConfirmed&&(topicSelection+='\n        <div style="margin-top: 15px; margin-bottom: 0; font-weight: bold;" class="'.concat(CONFIRM_CLASS_PREFIX,"-messenger-title cleverpush-topics ").concat(CONFIRM_CLASS_PREFIX,'-topics">Facebook Messenger</div>\n        <div class="cleverpush-topics ').concat(CONFIRM_CLASS_PREFIX,'-topics"><div style="margin-top: 5px;"><label style="line-height: 1.5;"><input type="checkbox" id="cleverpush-facebook-checkbox"> Ich möchte den Facebook-Newsletter und akzeptiere die <a href="').concat(this.config.privacyPolicyUrl,'" target="_blank">Datenschutzerklärung</a></label></div></div>')),topicSelection+='<div class="fb-messenger-checkbox-wrap"><div class="fb-messenger-checkbox" origin="'.concat(location.origin,'" page_id="').concat(this.config.facebookPageId,'" messenger_app_id="').concat(this.config.facebookAppId,'" user_ref="').concat(this.facebookUserRef,'" prechecked="true" allow_login="true" size="large" style="margin-top: 10px; margin-left: -14px;"></div></div>')),this.withTopics&&!confirmConfig.customLocalization&&(confirmClass+=" cleverpush-topic-box",localization.title=(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.RG)(this.config.confirmAlertSelectTopicsLaterTitle)||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.selectTopics")||localization.title,localization.info=EMPTY_STRING,localization.allow=this.config.confirmAlertSelectTopicsSaveText||(0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("panel.save")),infoStyle="".concat(this.config.confirmAlertThemeTextColor?"color: ".concat(this.config.confirmAlertThemeTextColor,";"):EMPTY_STRING," ").concat(this.config.confirmAlertStyle&&this.config.confirmAlertStyle.fontSize?"font-size: ".concat(this.config.confirmAlertStyle.fontSize,"px !important;"):EMPTY_STRING),brandingLinks=showLinks?'<div class="cleverpush-confirm-branding"><span>'.concat(this.getBrandingLinks(),"</span></div>"):EMPTY_STRING,topbarArrow="cleverpush-confirm-topbar cleverpush-confirm-topbar-native"===confirmAlertThemeParam?'<div class="cleverpush-confirm-topbar-arrow"></div>':EMPTY_STRING,closeButton=this.config.confirmAlertCloseButton?'<button type="button" class="cleverpush-confirm-hide">\n    <svg class="svg-cross-style" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n      <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6l12 12m0-12L6 18"/>\n     </svg>\n  </button>':EMPTY_STRING,iconClass="cleverpush-confirm-icon".concat(this.config.confirmAlertRoundChannelIcon?" cleverpush-confirm-icon-round":EMPTY_STRING),textStyle=this.config.confirmAlertThemeTextColor?"color: ".concat(this.config.confirmAlertThemeTextColor,";"):EMPTY_STRING,titleStyle=this.config.confirmAlertThemeTitleColor?"color: ".concat(this.config.confirmAlertThemeTitleColor,";"):EMPTY_STRING,allowButtonStyleInline="".concat(this.config.confirmAlertThemeButtonTextColor?"color: ".concat(this.config.confirmAlertThemeButtonTextColor,";"):EMPTY_STRING," ").concat(this.config.confirmAlertThemeButtonBackgroundColor?"border-color: transparent !important; background: none; background-color: ".concat(this.config.confirmAlertThemeButtonBackgroundColor,";"):EMPTY_STRING),moreInfo=EMPTY_STRING,this.config.alertMoreInformationEnabled&&localization.moreInfo&&localization.moreButton&&(linkColor=this.config.confirmAlertThemeLinkColor,this.config.confirmAlertLinkStyle&&this.config.confirmAlertLinkStyle.color&&(linkColor=this.config.confirmAlertLinkStyle.color),moreInfo='\n      <div style="display: none" class="cleverpush-confirm-more-text cleverpush-confirm-info">\n        '.concat(localization.moreInfo,'\n      </div>\n      <div class="cleverpush-confirm-branding">\n        <a href="#" style="').concat(linkColor?"color: ".concat(linkColor," !important"):EMPTY_STRING,'" class="cleverpush-confirm-more-btn">').concat(localization.moreButton,"</a>\n      </div>\n      ")),confirmAlertHeroImage=this.config.confirmAlertHeroImage&&confirmAlertTheme===CLEVER_OPT_IN?'<div class="hero-image" style="background-image:url('.concat(this.config.confirmAlertHeroImage,')"></div>'):EMPTY_STRING,confirm=(0,_utils_dom__WEBPACK_IMPORTED_MODULE_4__.dS)('\n      <div class="'.concat(CONFIRM_CLASS_PREFIX," ").concat(confirmClass,'" style="').concat(confirmStyle,'">\n        <div class="').concat(CONFIRM_CLASS_PREFIX,"-caret ").concat(CONFIRM_CLASS_PREFIX,'-caret-top" style="display: none; border-bottom-color: ').concat(this.config.confirmAlertThemeBackgroundColor,'"></div>\n\n        <div class="').concat(CONFIRM_CLASS_PREFIX,"-caret ").concat(CONFIRM_CLASS_PREFIX,'-caret-bottom" style="display: none; border-top-color: ').concat(this.config.confirmAlertThemeBackgroundColor,"; ").concat(confirmAlertTheme==="".concat(CONFIRM_CLASS_PREFIX,"-vortex-notification")&&this.config.confirmAlertAllowButtonStyle.backgroundColor?"background-color: ".concat(this.config.confirmAlertAllowButtonStyle.backgroundColor):"",'"></div>\n\n        ').concat(closeButton,'\n\n        <div class="').concat(CONFIRM_CLASS_PREFIX,'-wrap">\n          ').concat(topbarArrow,'\n\n          <div class="').concat(iconClass,'"><img src="').concat(this.config.channelIcon,'"></div>\n          ').concat(confirmAlertHeroImage,'\n          <div class="').concat(CONFIRM_CLASS_PREFIX,'-text" style="').concat(textStyle,'"> ').concat(this.isNewOptIn(confirmAlertTheme)?"<hr/>":EMPTY_STRING,"\n            ").concat(confirmAlertTheme==="".concat(CONFIRM_CLASS_PREFIX,"-swift-alert")?'<p class="'.concat(CONFIRM_CLASS_PREFIX,'-swift-alert-main-title">').concat((0,_utils_translate__WEBPACK_IMPORTED_MODULE_5__.Iu)("confirm.swiftAlertTitle"),"</p>"):"",'\n            <span class="').concat(CONFIRM_CLASS_PREFIX,'-title" style="').concat(titleStyle,'">').concat(localization.title,'</span>\n            <p class="').concat(CONFIRM_CLASS_PREFIX,'-info" style="').concat(infoStyle,'">').concat(localization.info,"</p>\n            ").concat(moreInfo,"\n            ").concat(brandingLinks,"\n            ").concat(topicSelection,'\n          </div>\n\n          <div class="cleverpush-clearfix cleverpush-clearfix-bottom">\n            <div class="').concat(CONFIRM_CLASS_PREFIX,"-buttons ").concat(!this.config.hideBranding||this.config.privacyPolicyUrl||this.config.faqText&&this.config.faqUrl?"".concat(CONFIRM_CLASS_PREFIX,"-padding-bottom"):"",'">\n              <button class="').concat(CONFIRM_CLASS_PREFIX,"-btn ").concat(CONFIRM_CLASS_PREFIX,'-btn-deny">').concat(localization.deny,'</button>\n              <button class="').concat(CONFIRM_CLASS_PREFIX,"-btn ").concat(CONFIRM_CLASS_PREFIX,'-btn-allow" style="').concat(allowButtonStyleInline,'">').concat(localization.allow,'</button>\n            </div>\n            <div class="cleverpush-clearfix"></div>\n          </div>\n\n          ').concat(localization.confirmInfo?'\n            <div class="'.concat(CONFIRM_CLASS_PREFIX,'-bottom-info" style="display: none;">\n              <div class="').concat(iconClass,'"><img src="').concat(this.config.channelIcon,'"></div>\n              <div class="').concat(CONFIRM_CLASS_PREFIX,'-bottom-info-text">').concat(localization.confirmInfo,'</div>\n              <div class="cleverpush-clearfix"></div>\n            </div>\n          '):EMPTY_STRING,"\n        </div>\n        ").concat(this.isNewOptIn(this.config.confirmAlertTheme)?'<div class="cleverpush-fix" style="display: none"></div>':EMPTY_STRING,"\n      </div>\n    ")),parentContainer.appendChild(confirm),this.confirmBox=document.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-").concat(this.id)),this.confirmBox&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertStyle))for(property in this.config.confirmAlertStyle)this.config.confirmAlertStyle.hasOwnProperty(property)&&(this.confirmBox.style[property]=this.config.confirmAlertStyle[property]+(isNaN(this.config.confirmAlertStyle[property])?EMPTY_STRING:"px"));if(this.confirmBoxTitle=document.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-").concat(this.id," .").concat(CONFIRM_CLASS_PREFIX,"-title")),this.confirmBoxTitle&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertTitleStyle))for(_property in this.config.confirmAlertTitleStyle)this.config.confirmAlertTitleStyle.hasOwnProperty(_property)&&(this.confirmBoxTitle.style[_property]=this.config.confirmAlertTitleStyle[_property]+(isNaN(this.config.confirmAlertTitleStyle[_property])?EMPTY_STRING:"px"));try{buttonStyle=this.config.confirmAlertButtonStyle||{},allowButtonStyle=this.config.confirmAlertAllowButtonStyle||{},!buttonStyle.backgroundColor||allowButtonStyle.backgroundColor&&(this.config.confirmAlertAllowButtonStyle||{}).backgroundColor!==buttonStyle.backgroundColor||((this.config.confirmAlertAllowButtonStyle||{}).backgroundColor=buttonStyle.backgroundColor,delete buttonStyle.backgroundColor),!buttonStyle.color||allowButtonStyle.color&&(this.config.confirmAlertAllowButtonStyle||{}).color!==buttonStyle.color||((this.config.confirmAlertAllowButtonStyle||{}).color=buttonStyle.color,delete(this.config.confirmAlertButtonStyle||{}).color)}catch(t){}if((this.cleverpush.config.customCss||EMPTY_STRING).replace(REGEX_NEW_LINES,EMPTY_STRING).replace(REGEX_SPACE,EMPTY_STRING).includes(".".concat(CONFIRM_CLASS_PREFIX,"-btn { width: 100% !important; }").replace(REGEX_NEW_LINES,EMPTY_STRING).replace(REGEX_SPACE,EMPTY_STRING))&&(this.config.confirmAlertAllowButtonStyle||(this.config.confirmAlertAllowButtonStyle={}),this.config.confirmAlertAllowButtonStyle.marginLeft="0px"),Object.keys(this.config.confirmAlertIconStyle||{}).length&&(icon=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-icon img")),style=this.config.confirmAlertIconStyle,icon&&(style.width&&(icon.style.width="".concat(style.width,"px"),window.innerWidth>=768&&(text=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-text")),text&&(margin=15,text.style.setProperty("width","calc(100% - ".concat(style.width+margin,"px)"),"important")))),style.height&&(icon.style.height="".concat(style.height,"px")))),this.allowButton=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-btn-allow")),this.allowButton){if(confirmConfig.topicsLayer?this.allowButton.addEventListener("click",(function(t){return _this5.onTopicsAllowClick(t,confirmConfig.parentTopic)}),!0):this.allowButton.addEventListener("click",this.onAllowClick.bind(this),!0),"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertButtonStyle))for(_property2 in this.config.confirmAlertButtonStyle.backgroundColor&&!this.config.confirmAlertButtonStyle.borderColor&&(this.config.confirmAlertButtonStyle.borderColor="transparent"),this.config.confirmAlertButtonStyle)this.config.confirmAlertButtonStyle.hasOwnProperty(_property2)&&this.allowButton.style.setProperty((0,_utils_strings__WEBPACK_IMPORTED_MODULE_8__.g)(_property2),this.config.confirmAlertButtonStyle[_property2],"important");if("object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertAllowButtonStyle))for(_property3 in this.config.confirmAlertAllowButtonStyle)this.config.confirmAlertAllowButtonStyle.backgroundColor&&!this.config.confirmAlertAllowButtonStyle.borderColor&&(this.config.confirmAlertAllowButtonStyle.borderColor="transparent"),this.config.confirmAlertAllowButtonStyle.hasOwnProperty(_property3)&&this.allowButton.style.setProperty((0,_utils_strings__WEBPACK_IMPORTED_MODULE_8__.g)(_property3),this.config.confirmAlertAllowButtonStyle[_property3],"important")}if(this.denyButton=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-btn-deny")),this.denyButton&&(confirmConfig.topicsLayer?this.denyButton.addEventListener("click",(function(t){return _this5.onTopicsDenyClick(t,confirmConfig.parentTopic)})):this.denyButton.addEventListener("click",this.onDenyClick.bind(this)),"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertButtonStyle)))for(_property4 in this.config.confirmAlertButtonStyle)this.config.confirmAlertButtonStyle.hasOwnProperty(_property4)&&this.denyButton.style.setProperty((0,_utils_strings__WEBPACK_IMPORTED_MODULE_8__.g)(_property4),this.config.confirmAlertButtonStyle[_property4],"important");for(this.closeButton=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-hide")),this.closeButton&&(this.closeButton.addEventListener("click",this.onCloseClick.bind(this)),this.confirmBox&&"object"===(0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(this.config.confirmAlertStyle)&&this.config.confirmAlertStyle.color&&(this.closeButton.style.color=this.config.confirmAlertStyle.color)),this.moreButton=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-more-btn")),this.moreButton&&(moreDiv=this.confirmBox.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-more-text")),moreDiv&&this.moreButton.addEventListener("click",(function(t){t.preventDefault(),moreDiv.style.display="block"===moreDiv.style.display?"none":"block"}))),topics=this.confirmBox.querySelectorAll('input[name="topics[]"]'),topicIndex=0;topicIndex<topics.length;topicIndex+=1)topics[topicIndex].addEventListener("change",(function(t){_this5.confirmBox||(_this5.confirmBox=document.querySelector(".".concat(CONFIRM_CLASS_PREFIX,"-").concat(_this5.id)));for(var e=_this5.confirmBox.querySelectorAll('.topic-child[data-parent-topic="'.concat(t.target.value,'"]')),o=function(o){e[o].style.display=t.target.checked?"block":"none";var i=e[o].querySelector('input[type="checkbox"], input[type="radio"]'),n=(_this5.config.channelTopics||[]).find((function(t){return t._id===i.value}));t.target.checked?n&&(i.checked=(0,_utils_topics__WEBPACK_IMPORTED_MODULE_6__.topicChecked)(n,_this5.subscribedTopics)):i.checked=!1},i=0;i<e.length;i+=1)o(i)}));if(this.config.topicsTemplateFunction&&topicSelection)if(topicsDiv=parentContainer.querySelector(".".concat(CONFIRM_CLASS_PREFIX," .").concat(CONFIRM_CLASS_PREFIX,"-topics")),topicsDiv)try{templateFunc=eval("(".concat(this.config.topicsTemplateFunction,")")),"function"==typeof templateFunc?(_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.debug("calling templateFunc"),this.subscriptionManager.getTopics().then((function(t){templateFunc(topicsDiv,_this5.config,t,"confirm")}))):_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.warn("typeof templateFunc is not function")}catch(t){_utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.warn(t)}else _utils_debug__WEBPACK_IMPORTED_MODULE_3__.cM.warn(".cleverpush-topics div not found");case 71:case"end":return _context.stop()}}),_callee,this)})));function appendConfirmBox(t,e,o,i){return _appendConfirmBox.apply(this,arguments)}return appendConfirmBox}()},{key:"show",value:function(t){(0,_utils_debug__WEBPACK_IMPORTED_MODULE_3__.tI)("showConfirmBox"),"function"==typeof t&&(this.subscribeCallback=t),this.visible||(this.visible=!0,this.appendConfirmBox(),this.showBackdrop())}},{key:"setAutoHideBackdrop",value:function(t){this.autoHideBackdrop=t}}]),Confirm}()},2508:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{topicChecked:function(){return topicChecked},setTopics:function(){return setTopics},getTopics:function(){return getTopics},showTopicLayer:function(){return showTopicLayer},initTopics:function(){return initTopics}});var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8927),_debug__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1078),_const_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(155),_env__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7159),_const_event__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2034);function topicChecked(t,e){return!!(void 0!==e&&e&&e.length&&(e||[]).indexOf(t._id)>-1)||(!t.defaultUnchecked||t.matchPathChecked&&t.matchPathChecked&&location.pathname&&new RegExp(t.matchPathChecked).test(location.pathname))}function setTopics(t,e,o){return(0,_debug__WEBPACK_IMPORTED_MODULE_0__.tI)("setTopics",e),t.waitForInit().then((function(){return t.subscriptionManager?(t.subscriptionManager.setTopics(e),t.subscriptionManager.sync().then((function(){"function"==typeof o&&o()}))):Promise.reject()}))}function getTopics(t,e){return(0,_debug__WEBPACK_IMPORTED_MODULE_0__.tI)("getTopics"),"function"!=typeof e?(_debug__WEBPACK_IMPORTED_MODULE_0__.cM.error("Please provide a callback function (err, topics) => {} to getTopics"),Promise.reject()):t.waitForInit().then((function(){t.subscriptionManager&&t.subscriptionManager.getTopics().then((function(t){e(null,t)}))}))}function showTopicLayer(t,e,o){o.waitForSubscription().then((function(){o.subscriptionManager.storageManager.getTopics().then((function(i){var n=o.config.channelTopics||[],c="string"==typeof t?n.find((function(e){return e._id===t})):t;if(c&&!i.includes(c._id)){var r,_="cleverpush-topic-layerShown-".concat(c._id),s="cleverpush-topic-layer-visits-".concat(c._id);if(void 0!==e&&e.frequencyCappingVisits)if(r=e.frequencyCappingVisits,!!localStorage.getItem(_)){var a=parseInt(localStorage.getItem(s),_const_common__WEBPACK_IMPORTED_MODULE_1__.ZJ)||_const_common__WEBPACK_IMPORTED_MODULE_1__.xl;if(localStorage.setItem(s,"".concat(a+1)),a<r)return;localStorage.removeItem(s)}(0,_debug__WEBPACK_IMPORTED_MODULE_0__.tI)("showTopicLayer",t);var l={title:c.layerTitle||"Möchtest du Neuigkeiten zu ".concat(c.name," erhalten?"),deny:c.layerDenyText||"Nein",allow:c.layerAllowText||"Ja",info:c.layerInfo||" "};Object.keys(l).forEach((function(t){void 0===l[t]&&delete l[t]}));var h=n.filter((function(t){return t.parentTopic===c._id})).length>0,u=c.layerTheme||o.config.layerTheme||o.config.confirmAlertSelectTopicsLaterTheme||"cleverpush-confirm-default";o.waitForConfirmAvailable().then((function(){o.subscriptionManager.confirm.appendConfirmBox(u,h,{topicsLayer:!0,customLocalization:l,parentTopic:c._id,topicsRadioButtons:c.childTopicsRadioButtons,topicsRequired:c.childTopicsRequired},(function(t,e){t&&e?(o.setTopics((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.Z)(new Set([].concat((0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.Z)(i),(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_4__.Z)(e),[c._id])))),localStorage.setItem(_,"".concat(Date.now()))):r?localStorage.setItem(_,"".concat(Date.now())):sessionStorage.setItem(_,"".concat(Date.now()))}))}))}}))}))}function initTopics(context){context.waitForSubscription().then((function(){context.subscriptionManager.storageManager.getTopics().then((function(storedTopics){var topics=context.config.channelTopics;if(null!=topics&&topics.length&&"undefined"!=typeof localStorage){var topicFound=!1;topics.forEach((function(topic){var topicLayerShownKey="cleverpush-topic-layerShown-".concat(topic._id),visitsStorageKey="cleverpush-topic-layer-visits-".concat(topic._id),topicMatches=topic.layerMatchPath&&new RegExp(topic.layerMatchPath).test(location.pathname);if(topic.layerFunction&&topicMatches)try{topicMatches=!!eval(topic.layerFunction)}catch(t){_debug__WEBPACK_IMPORTED_MODULE_0__.cM.debug(t)}if(topic.layerEnabled&&!localStorage.getItem(topicLayerShownKey)&&!sessionStorage.getItem(topicLayerShownKey)&&!storedTopics.includes(topic._id)&&topicMatches){if(topicFound)return;context.subscriptionManager.triggerEvent(_const_event__WEBPACK_IMPORTED_MODULE_3__.Z.TOPICS_LAYER_SHOWN,topic._id);var finalizeShow=function(){showTopicLayer(topic,void 0,context)},show=function(){if(topicFound=!0,!isNaN(topic.layerScrollPercentage)&&topic.layerScrollPercentage>0){var t=function t(){(0,_env__WEBPACK_IMPORTED_MODULE_2__.r0)()>=topic.layerScrollPercentage&&(window.removeEventListener("scroll",t),finalizeShow())};window.addEventListener("scroll",t),t()}else finalizeShow()},visitsNeeded=isNaN(topic.layerMinimumVisits)?0:topic.layerMinimumVisits,visitsStorage=localStorage,visitsStr=visitsStorage.getItem(visitsStorageKey),visits=0;"string"!=typeof visitsStr||isNaN(visitsStr)||(visits=parseInt(visitsStr,_const_common__WEBPACK_IMPORTED_MODULE_1__.ZJ)),visits>=visitsNeeded?!isNaN(topic.layerTimeout)&&topic.layerTimeout?setTimeout((function(){show()}),1e3*topic.layerTimeout):show():(visits+=1,visitsStorage.setItem(visitsStorageKey,visits.toString()))}}))}}))}))}},7233:function(t,e,o){var i={"./cleverpush-confirm-cascade-alert.scss":[6501,6501],"./cleverpush-confirm-clever-opt-in.scss":[4203,4203],"./cleverpush-confirm-midnight-harmony.scss":[2458,2458],"./cleverpush-confirm-nova-black.scss":[6644,6644],"./cleverpush-confirm-pulse-notify.scss":[5191,5191],"./cleverpush-confirm-swift-alert.scss":[8835,8835],"./cleverpush-confirm-vortex-notification.scss":[1332,1332],"./cleverpush-confirm-zenith-opt-in.scss":[1949,1949]};function n(t){if(!o.o(i,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=i[t],n=e[0];return o.e(e[1]).then((function(){return o(n)}))}n.keys=function(){return Object.keys(i)},n.id=7233,t.exports=n}}]);
//# sourceMappingURL=7720.b1ea4de9b7a3871148fa.js.map
</script>

</body>
</html>
