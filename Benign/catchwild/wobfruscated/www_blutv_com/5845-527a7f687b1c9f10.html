<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>5845-527a7f687b1c9f10.html</title>
</head>
<body>
<script>"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5845],{25845:function(t,e,n){n.r(e),n.d(e,{actionAllRecomendations:function(){return T},actionDeleteLikeInteraction:function(){return p},actionEPGList:function(){return w},actionFetchAllFavorites:function(){return I},actionFetchAllKYB:function(){return g},actionFetchAllLive:function(){return v},actionFetchFavoriteIds:function(){return m},actionLiveChannel:function(){return d},actionQueryLikeInteraction:function(){return f},actionRemoveFromKYB:function(){return y},actionUpdateFavorites:function(){return S},actionWidgetSendLikeInteraction:function(){return h}});var i=n(53531);let a=()=>({type:"CONTENTS_OPERATION_START"}),r=t=>{let{error:e}=t;return{type:"API_ERROR",error:e}},o=t=>{let{error:e,exceptionMsg:n}=t;return{type:"API_SERVER_ERROR",serverMessage:`Actions Contents OperationFail ${n} Catch`,error:e}},c=(t,e)=>({type:t,...e}),l=t=>({type:"LIKE_INTERACTION_SUCCESS",likeDislike:t||null}),s=t=>({type:"QUERY_LIKE_INTERACTION_SUCCESS",query:t||null}),u=t=>{let{id:e}=t;return{type:"DELETE_LIKE_INTERACTION_SUCCESS",id:e}},h=t=>async(e,n)=>{e(a());let{auth:{user:r}}=await n();return r?await fetch("https://www.blutv.com/api/like-interaction",await e((0,i.Z)({body:JSON.stringify({...t,profileId:r.profile?.profileId})}))).then(async t=>t?.ok?await t.json():e(o({error:t,exceptionMsg:"actionWidgetSendLikeInteraction JSON"}))).then(n=>e(l({...n,id:t.content_id,value:t.value}))).catch(t=>e(o({error:t,exceptionMsg:"actionWidgetSendLikeInteraction"}))):e(l())},p=(t,e)=>async(n,r)=>{n(a());let{auth:{user:c=null}}=await r();return c?await fetch(`https://www.blutv.com/api/like-delete?interactionId=${t}&profileId=${c.profile.profileId}`,await n((0,i.Z)({method:"GET"}))).then(async t=>t?.ok?await t.json():n(o({error:t,exceptionMsg:"actionDeleteLikeInteraction JSON"}))).then(()=>n(u({id:e}))).catch(t=>n(o({error:t,exceptionMsg:"actionDeleteLikeInteraction"}))):n(u({}))},f=t=>async(e,n)=>{e(a());let{auth:{user:r=null},contents:{likes:c}}=await n();if(r){let n=c?.[t];return n?s(n):await fetch("https://www.blutv.com/api/like-query",await e((0,i.Z)({body:JSON.stringify({profileId:r.profile.profileId,content_id:t})}))).then(async t=>t?.ok?await t.json():e(o({error:t,exceptionMsg:"actionQueryLikeInteraction JSON"}))).then(n=>e(s({...n,id:t}))).catch(t=>e(o({error:t,exceptionMsg:"actionQueryLikeInteraction"})))}return e(s())},w=function(){let{channelList:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(e,i)=>{let{i18n:{platform:a}}=await i(),{dateUtcFormatter:r}=n(51466),o=new Date(new Date().getTime()- -48e4*new Date().getTimezoneOffset()).toISOString(),c=new Date(new Date().getTime()-48e4*new Date().getTimezoneOffset()).toISOString(),{timeZone:l}=Intl.DateTimeFormat().resolvedOptions(),s=r(new Date);return await Promise.all(t.map(t=>t.channelId?fetch("https://www.blutv.com/api/epg-list",{method:"POST",headers:{AppPlatform:a},body:JSON.stringify({startDate:o.slice(0,10),endDate:c.slice(0,10),timeZone:l,timeUTC:s.slice(0,-5),channel:t})}):{channelWithEpg:t,epgList:[]})).then(t=>Promise.all(t.filter(t=>t).map(t=>t.status?t.json():t))).then(t=>{let e=[],n=[];return t.forEach(t=>{e.push(t.channelWithEpg),n.push(...t.epgList)}),{channelListWithEpg:e,epgList:n}}).catch(t=>({error:t}))}},d=function(){let{req:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async e=>await fetch("https://www.blutv.com/api/channel-list",await e((0,i.Z)({req:t,method:"GET"}))).then(t=>t.json()).then(t=>t.status>=200&&t.status<=300?Object.keys(t).map(e=>t[e]).slice(0,-1):e(r({error:t}))).catch(t=>e(o({error:t,exceptionMsg:"actionLiveChannel"})))},g=function(){let{req:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(e,n)=>{let{i18n:{platform:a},auth:{user:r}}=await n();return r?await fetch("https://www.blutv.com/api/kyb-widget",await e((0,i.Z)({req:t,body:JSON.stringify({skip:0,limit:12,platform:a,select:{ImageLandscape:1}})}))).then(t=>t.json()).then(async t=>{let n=t.History.map(t=>({title:t.Title||null,id:t.ParentId||null,contentType:t.ContentType||null,imageLandscape:t.ImageLandscape||null,contentUrl:t.Url||null,url:t.Url?.split("/").splice(0,4).join("/"),duration:t.Duration||null,percentage:t.Percentage||null,seasonNumber:t.SeasonNumber||null,episodeNumber:t.EpisodeNumber||null,contentId:t.Id||null,currentTime:t.CurrentTime||null}));return await e(c("WIDGET_KYB",{kyb:n}))}).catch(t=>e(o({error:t,exceptionMsg:"actionFetchAllKYB"}))):null}},y=t=>async(e,n)=>{let{auth:{user:a}}=await n();return a?await fetch("https://www.blutv.com/api/kyb-remove",await e((0,i.Z)({body:JSON.stringify({UserId:a.no.toString(),ContainerId:t,ProfileId:a.profile?.profileId,Visibility:!1})}))).then(t=>t.json()).then(async()=>await e(c("WIDGET_KYB_REMOVE",{containerId:t}))).catch(t=>e(o({error:t,exceptionMsg:"actionRemoveFromKYB"}))):null},I=function(){let{req:t,page:e=1,limit:n=20}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(a,r)=>{let{auth:{user:l},contents:{favoriteIds:s}}=await r();return l?await fetch("https://www.blutv.com/api/get-favorites",await a((0,i.Z)({req:t,body:JSON.stringify({profileId:l.profile.profileId,page:e,limit:n})}))).then(async t=>{let e=await t.json();return t.ok?e:a(o({error:e,exceptionMsg:"actionFetchAllFavorites JSON"}))}).then(async t=>{let e=t?.items,n=s?[...s]:[];return e?.forEach(t=>{n.includes(t.id)||n.push(t.id)}),await a(c("QUERY_FAVORITE_IDS",{favoriteIds:n})),await a(c("WIDGET_FAVORITES",{favorites:e})),t}).catch(t=>a(o({error:t,exceptionMsg:"actionFetchAllFavorites"}))):null}},m=t=>async(e,n)=>{let{auth:{user:a},contents:{favoriteIds:r}}=await n();if(a){let n=t.filter(t=>!r?.includes(t));return n.length<1?r:await fetch("https://www.blutv.com/api/get-favorites",await e((0,i.Z)({body:JSON.stringify({profileId:a.profile.profileId,contents:n})}))).then(async t=>{let n=await t.json();return t.ok?n:e(o({error:n,exceptionMsg:"actionFetchFavoriteIds JSON"}))}).then(async t=>{let n=Object.keys(t).map(e=>t[e]);n.pop();let i=r?[...r,...n]:n;return await e(c("QUERY_FAVORITE_IDS",{favoriteIds:i})),i}).catch(t=>e(o({error:t,exceptionMsg:"actionFetchFavoriteIds"})))}return null},S=(t,e,n)=>async(a,r)=>{let{auth:{user:l}}=await r();return l?await fetch(`https://www.blutv.com/api/update-favorite?id=${t}&profileId=${l.profile?.profileId}&contentType=${n}`,await a((0,i.Z)({method:"add"===e?"POST":"DELETE"}))).then(async t=>{let e=await t.json();return t.ok?e:a(o({error:e,exceptionMsg:"actionUpdateFavorites JSON"}))}).then(async()=>{if("add"===e)await a(I());else{let{contents:{favorites:e,favoriteIds:n}}=await r();await a(c("WIDGET_FAVORITES",{favorites:e.filter(e=>e.id!==t)})),await a(c("QUERY_FAVORITE_IDS",{favoriteIds:n.filter(e=>e!==t)}))}return{type:"Success"}}).catch(t=>a(o({error:t,exceptionMsg:"actionUpdateFavorites"}))):null},T=function(){let{req:t,skip:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(n,a)=>{let{auth:{user:r}}=await a();return r?await fetch(`https://www.blutv.com/api/recomendation?no=${r.no}&skip=${e||0}`,await n((0,i.Z)({req:t,method:"GET"}))).then(t=>t.json()).then(t=>{let e=Object.keys(t).map(e=>t[e]).slice(0,-1);return e.length>=1?e:null}).catch(t=>n(o({error:t,exceptionMsg:"actionAllRecomendations"}))):null}},v=function(){let{req:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async(e,n)=>{let{i18n:{platform:a}}=await n();return await fetch("https://www.blutv.com/api/supercontents-active",await e((0,i.Z)({req:t,body:JSON.stringify({q:"",filter:`Permissions/any(a:a/Name eq 'Application:${a}')and Ancestors/any(a:a/SelfPath eq '/canli-yayin/')`,orderby:"Order asc"})}))).then(t=>t.json()).then(t=>{let e=Object.keys(t).map(e=>t[e]).slice(0,-1);return e.length>=1?e.map(t=>({url:t?.url,id:t?.id,image:t?.files[0]?.id,title:t?.title})):null}).catch(t=>e(o({error:t,exceptionMsg:"actionFetchAllLive"})))}}},51466:function(t,e,n){function i(t){let e=new Date(t);return`${e.getUTCDate()}.${(e.getUTCMonth()+1).toString().padStart(2,"0")}.${e.getUTCFullYear()}`}function a(t){return Math.abs(Math.round((new Date(o(new Date(t))).getTime()-new Date(o(new Date)).getTime())/1e3))}function r(t,e){let n=new Date(t);return n.setSeconds(n.getSeconds()+e)}function o(t){return new Date(t.getTime()-t.getTimezoneOffset()).toISOString()}function c(t,e){return new Date(`${t.slice(0,19)}.000Z`).toLocaleString("af-ZA",{hour12:!1,timeZone:e}).replace(".","-").replace(" ","T")}n.r(e),n.d(e,{UtcTimeToLocalTimeConverter:function(){return c},dateAdder:function(){return r},dateUtcFormatter:function(){return o},dayFormat:function(){return i},findDateDiffUtc:function(){return a}})}}]);</script>
</body>
</html>
