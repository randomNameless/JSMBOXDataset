<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hideAboveContentBannersOnReferrers.setup-B4r07k2g.html</title>
</head>
<body>

<script>
import{l as I,J as _,h as w,q as F,s as m}from"./vendor-BroXzQGG.js";import{$ as s,X as h,Z as L,ab as k}from"./index-DJp284ij.js";import{l as x,r as B,k as d,w as g,a1 as P,C as H,B as $,S as p,u as R,T as K,q as V}from"./vue-BTg2e_qy.js";const C=(e,n)=>{window.hsmCreativeManagerReady.then(t=>{t.beforeSlotCreate(e,n)})},ee="web_app_public_polls_data_v2",ne="web_app_public_reactions_data",G="ump_online_debug",re="ump_sticky_adv_closed",y=()=>I(localStorage).get(G)===1;function J(){try{const e=new Uint16Array(1);return window.crypto.getRandomValues(e),e[0]/65536}catch{return Math.random()}}const N="jtnews_fullscreen_disabled",U="jtnews_fullscreen_counter",D="is_fullscreen_adunit_rotated",W=3*60*60*1e3,T=2;function O(){return new Date(Date.now()+W).toUTCString()}const Y=()=>{const e=_(N);if(!w(e))try{const n=_(U),t=parseInt(n||"")||0;t<T&&F(U,String(t+1),{expires:O()}),t+1>=T&&F(N,"true",{expires:O()})}catch{y()&&console.warn("[FullscreenBanner] не удалось сохранить данные в cookie")}},j=()=>{const e=_(N);return!w(e)},q=()=>{try{const e=_(D);if(w(e)){const n=JSON.parse(e);if(typeof n=="boolean")return n}}catch{y()&&console.warn("[FullscreenBanner] ошибка считывания cookie")}return J()<.5},v=e=>{F(D,JSON.stringify(e))},X=(e,n)=>new Promise(t=>{window.scroogeLogger.info(`Слот ${e} отложен на ${n}ms`),setTimeout(()=>{window.scroogeLogger.info(`Слот ${e} прождал положенные ${n}ms`),t(!0)},n)}),se=x({__name:"FullscreenBanner",props:{adunit:{default:s.FULLSCREEN},referrersToExclude:{default:()=>[]},isCounterSkipped:{type:Boolean},isHbTopDisplayedSkiped:{type:Boolean},isMobileBranding:{type:Boolean},isFullscreenWithRotation:{type:Boolean}},setup(e){const n=e,{isHbTopDisplayed:t}=m(h()),a=B(void 0),E=()=>{const r=new URLSearchParams(window.location.search),o=r.get("utm_source")==="push",b=r.get("utm_medium")==="push";return o||b},S=d(()=>n.referrersToExclude.some(r=>document==null?void 0:document.referrer.includes(r))),l=d(()=>n.adunit===s.FULLSCREEN),c=d(()=>n.isMobileBranding),u=(r,o)=>!S.value&&!E()&&j()?!r&&o===s.FULLSCREEN_MAIN?!0:o===s.FULLSCREEN?a.value===!1:o===s.FULLSCREEN_2?a.value===!0:!1:!1,i=async r=>{if(!u(l.value,r))return!1;if(r!==s.FULLSCREEN_MAIN){const o=h().fullscreenHoldoutTimeMs;o>0&&await X(r,o)}return!0};C(s.FULLSCREEN_MAIN,()=>i(s.FULLSCREEN_MAIN)),C(s.FULLSCREEN,()=>i(s.FULLSCREEN)),C(s.FULLSCREEN_2,()=>i(s.FULLSCREEN_2));const f=()=>{if(t.value||n.isHbTopDisplayedSkiped){A();return}const r=g(t,o=>{o&&A(),r()})},A=()=>{n.isCounterSkipped||Y()},M=g(c,r=>{r&&(a.value=!1,v(!1)),M()});return P(()=>{if(n.isFullscreenWithRotation){const r=q(),o=n.isMobileBranding?!1:r;a.value=o,v(!o)}}),(r,o)=>(H(),$(K,null,[p(L,{adunit:R(s).FULLSCREEN,"has-before-create":"",onDisplay:f},null,8,["adunit"]),p(L,{adunit:R(s).FULLSCREEN_2,"has-before-create":"",onDisplay:f},null,8,["adunit"]),p(L,{adunit:R(s).FULLSCREEN_MAIN,"has-before-create":"",onDisplay:f},null,8,["adunit"])],64))}});function te(){const e=B(!1),{stickyData:n,fullscreenData:t}=m(k()),{referrersToHideAboveContentBanners:a}=m(h()),E=()=>{V(()=>{var c,u,i;const l=a.value.some(f=>document==null?void 0:document.referrer.includes(f));(i=(u=(c=n==null?void 0:n.value)==null?void 0:c.params)==null?void 0:u.customConfig)!=null&&i.excludeOnRefferers&&(e.value=l)})},S=d(()=>{var l,c,u;return(u=(c=(l=t==null?void 0:t.value)==null?void 0:l.params)==null?void 0:c.customConfig)!=null&&u.excludeOnRefferers?a.value:[]});return{hideStickyOnReferrer:e,checkStickyReferrer:E,fullscreenReferrersToExclude:S}}export{ne as L,re as S,se as _,ee as a,y as i,te as u};

</script>

</body>
</html>
