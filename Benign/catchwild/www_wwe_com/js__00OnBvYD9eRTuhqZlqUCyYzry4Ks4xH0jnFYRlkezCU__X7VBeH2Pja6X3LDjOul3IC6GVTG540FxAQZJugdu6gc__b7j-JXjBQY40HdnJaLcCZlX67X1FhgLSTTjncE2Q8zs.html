<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js__00OnBvYD9eRTuhqZlqUCyYzry4Ks4xH0jnFYRlkezCU__X7VBeH2Pja6X3LDjOul3IC6GVTG540FxAQZJugdu6gc__b7j-JXjBQY40HdnJaLcCZlX67X1FhgLSTTjncE2Q8zs.html</title>
</head>
<body>

<script>
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_survey/js/wwe_survey.js. */
!(function($){'use strict';Drupal.behaviors.wweSurvey={container:'.wwe-survey--wrapper',attach:function(context,settings){var base_url=settings.wwe_surveyjs.base_url||'',language=settings.wwe_surveyjs.language||'en',extra=this.getExtra();$(this.container).not(".survey-processed").each(function(index){$(this).wwesurvey({uuid:$(this).data("uuid"),service:{base_url:base_url},language:language,extra:extra})});if($('#wwelftpn1').find('.pane-wwe-survey-header').length==1){$('#wwelftpn2').removeClass("l-hybrid-col-frame_left");$('#wwelftpn2').removeClass("hybrid-col-frame_left")}},getExtra:function(){return{ipid:this.getCookie('ipid',''),sailthru_visitor:this.getCookie('sailthru_visitor',''),guid:this.getCookie('guid',''),geo:this.getCookie('geo[0]','US')}},getCookie:function(cookieName,defaultValue){var name=cookieName+"=",decodedCookie=decodeURIComponent(document.cookie),ca=decodedCookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===' ')c=c.substring(1);if(c.indexOf(name)===0)return c.substring(name.length,c.length)};return defaultValue}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_survey/js/wwe_survey.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/ct_breaking_news/js/breaking_news.js. */
!(function($){'use strict';Drupal.behaviors.ctBreakingNews={attach:function(context,settings){$('#breaking_news',context).once('ctBreakingNews',function(){var $breakingNews=$(this),nid='';if(typeof Drupal.settings.page.nid!=='undefined'&&typeof Drupal.settings.admin_menu!=='undefined')nid='/'+Drupal.settings.page.nid;$.ajax({url:'/api/breaking_news'+nid,success:function(data){var contentList=[];if(data&&data.length===0)return;$.each(data,function(index,value){var cookieName='breakingNews'+value.nid,nid=$.cookie(cookieName),$content;if(nid===null||nid===undefined){$content=$(value.content);$content.data('nid',value.nid);contentList.push($content)}});$breakingNews.on('click','.close',function(e){var $content=$(e.target).parents('.wwe-breaking-news_content'),nid=$content.data('nid'),cookieName='breakingNews'+nid;$.cookie(cookieName,nid,{expires:7,path:'/'});$content.remove()});$breakingNews.prepend(contentList).removeClass('jh-hide');Drupal.behaviors.wweAnalytics.bindTrackingEvents()},dataType:'json'})})}}}(jQuery));;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/ct_breaking_news/js/breaking_news.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/ct_video/assets/js/wwe-video-highlights.js. */
!(function($){'use strict';Drupal.behaviors.WWEVideoHighlights={$window:false,$highlights:null,$highlightsTitle:null,isScrolling:false,direction:'',scrolledUp:'',previousScrollTop:null,$highlightsCarousel:null,isDragging:false,dragTimer:null,UP:'UP',DOWN:'DOWN',disabled:false,geo:'',copy:Drupal.t('Copy Link'),facebook:Drupal.t('Share this on Facebook'),twitter:Drupal.t('Share this on Twitter'),email:Drupal.t('Share this by Email'),attach:function(context,settings){if(context===document){var self=this;this.$window=$(window);this.$highlights=$('.wwe-highlights-videos--wrapper');this.$highlightsCarousel=this.$highlights.find('.wwe-hightlight-videos--carousel');this.$highlightsTitle=this.$highlights.find('.wwe-hightlight-videos--title');this.geo=this.getNetworkCookie();Drupal.settings.page=Drupal.settings.page||{};var nid=Drupal.settings.page.nid||0,vid=this.$highlights.data('context')||0,url='/api/highlight-videos/'+nid+'/'+vid;$.ajax({dataType:'JSON',url:url}).done(function(data){self.renderVideoCarousel(data,settings.ct_video.disable_network_logo);self.init(context,settings)})}},init:function(context,settings){var self=this;this.$highlights.removeClass('js-hide');this.$window.on('scroll',function(){self.isScrolling=true});self.scrollInterval=self.triggerInterval(self.handlePageScroll);Drupal.behaviors.WWEVideoDuration.checkForDurations();this.isDragging=false;this.$highlightsCarousel.mousedown(function(){self.isDragging=false;self.dragTimer=setTimeout(function(){self.isDragging=false},200)}).mouseup(function(){clearTimeout(self.dragTimer)});this.$highlights.find('a.js-track').click(function(e){if(typeof wwe_ga_dataLayer!=='undefined'){e.preventDefault();var page=$("meta[property='og:title']").length?$("meta[property='og:title']").attr('content'):document.title,slot=$(e.currentTarget).data('slot'),title=$(e.currentTarget).attr('title'),vms_id=$(e.currentTarget).data('vmsid'),label='Page='+page+'|Title='+title+'|Pos='+slot+'|VMS_id='+vms_id;wwe_ga_dataLayer.push({event:'analyticsEvent',eventCategory:'Video Player',eventAction:'Click',eventLabel:label});var opt_label=$(e.currentTarget).data('tracking-label')||'',href=$(e.currentTarget).attr('href');wwe_ga_dataLayer.push({event:'analyticsEvent',eventCategory:'Video Top Strip',eventAction:'Click',eventLabel:opt_label,eventCallback:function(){document.location=href}})}});var videobox=jQuery('#wwe-videobox--videoarea');videobox.contents().find("button.copy-link").attr({"aria-label":this.copy,alt:this.copy,role:"button",title:this.copy});videobox.contents().find("button.facebook").attr({"aria-label":this.facebook,alt:Drupal.t("Share on Facebook"),role:"button",title:this.facebook});videobox.contents().find("button.twitter").attr({"aria-label":this.twitter,alt:Drupal.t("Share on Twitter"),role:"button",title:this.twitter});videobox.contents().find("button.email").attr({"aria-label":this.email,alt:Drupal.t("Share by Email"),role:"button",title:this.email})},triggerInterval:function(scrollHandler){var self=this;return window.setInterval(function(){if(self.isScrolling){self.isScrolling=false;scrollHandler(self)}},10)},handlePageScroll:function(context){var self=context,scrollTop=self.$window.scrollTop();self.direction=(scrollTop>self.previousScrollTop)?self.DOWN:self.UP;self.previousScrollTop=scrollTop;if(scrollTop<=60){self.$highlights.isAnimating=false;self.showHighlights(true)}else if(self.direction===self.UP){if(self.scrolledUp===0)self.scrolledUp=scrollTop;var tolerance=100;if(typeof Drupal.settings.ct_video.tolerance!=='undefined')tolerance=Drupal.settings.ct_video.tolerance;if((self.scrolledUp-scrollTop)>=tolerance)self.showHighlights()}else if(self.direction===self.DOWN){self.hideHighlights();self.scrolledUp=0};Drupal.behaviors.inlineVideos.checkInView()},showHighlights:function(force){if(!this.disabled||force)this.$highlights.removeClass('js-hide')},hideHighlights:function(){this.$highlights.addClass('js-hide')},disableHighlights:function(){this.disabled=true;this.hideHighlights()},enableHighlights:function(){this.disabled=false},getNetworkCookie:function(){if(this.geo!=='')return this.geo;var geo=null,cookies=document.cookie.split('; ');for(var i=cookies.length-1;i>=0;i--){var row=cookies[i].split('=');if(row[0]==='geo[0]'||row[0]==='geo'){geo=row[1];break}};if(geo===null)geo="US";return geo},geoTarget:function(element,geo){if(element.hasOwnProperty('country_logic')&&element.hasOwnProperty('countries'))if(element.country_logic==='include'){return(element.countries.indexOf(geo)!==-1)?true:false}else if(element.country_logic==='exclude')return(element.countries.indexOf(geo)!==-1)?false:true;return true},renderVideoCarousel:function(data,disable_network_logo){var self=this;if(data.hasOwnProperty('title'))this.$highlightsTitle.html(data.title);if(data.hasOwnProperty('videos')&&$.isArray(data.videos)){var videos=data.videos.filter(function(video){return self.geoTarget(video,self.geo)});$.each(videos,function(index,video){var $video=$("<div>");$video.addClass("wwe-highlight-videos--video"+video.network_video_class);$video.attr("data-vr-contentbox","");$video.attr("itemscope","");$video.attr("itemtype","https://schema.org/VideoObject");$video.attr("thumbnailUrl",video.thumbnail_url);$video.attr("description",video.description);$video.attr("name",video.title);$video.attr("uploadDate",video.upload_date);if(video.image){var $anchor=$("<a>");$anchor.attr("href",video.link);$anchor.addClass("wwe-video-explorer-event js-video--btn js-track wwe-display-duration");$anchor.attr("data-duration",video.duration);$anchor.attr("itemprop","duration");$anchor.attr("content",video.duration_iso);$anchor.attr("data-nid",video.nid);$anchor.attr("data-playlist-id",video.playslist_id);$anchor.attr("data-tracking-label","title="+video.title+"|content_type=video|lt=image|slot="+(index+1)+"|cid="+video.nid);$anchor.attr("title",video.title);$anchor.attr("data-vmsid",video.vms_id);$anchor.attr("data-slot",(index+1));$anchor.attr("data-vr-excerpttitle","");$anchor.html(video.image);$anchor.appendTo($video);var $span=$("<span>");$("<span>").attr("itemprop","name").html(video.title).appendTo($span);$("<meta>").attr("itemprop","contentUrl").attr("content",video.video_url).appendTo($span);$("<meta>").attr("itemprop","thumbnailUrl").attr("content",video.thumbnail_url).appendTo($span);$("<span>").attr("itemprop","description").html(video.description).appendTo($span);$("<span>").attr("itemprop","uploaddate").html(video.upload_date).appendTo($span);$span.hide().appendTo($video)};if(video.is_network_video&&!disable_network_logo){var $logo=$("<div>");$("<hr>").addClass("promo-separator").appendTo($logo);$("<img>").attr("src","/a/i/wwe_network_logo.jpg").attr("alt","WWE Network Logo").appendTo($logo);$logo.addClass("wwe-highlight-videos--video--network-logo").appendTo($video)};$video.appendTo(self.$highlightsCarousel)});if(typeof(Drupal.behaviors.wweThemeCarousels)!=='undefined'){self.$highlightsCarousel.addClass("js-carousel js-carousel--highlights");Drupal.behaviors.wweThemeCarousels.attach(self.$highlights)}};if(data.hasOwnProperty('source_log'))this.$highlights.after(data.source_log)}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/ct_video/assets/js/wwe-video-highlights.js. */;/*})'"*/
/**
 * @file
 * Behavior for header menu.
 */

!(function ($) {
  'use strict';

  Drupal.behaviors.wweGlobalPanesHeaderMenu = {
    attach: function (context, settings) {
      const hamburgerEl = document.querySelector('.hamburger img');
      const menuEl = document.querySelector('.desktop-menu');
      const subMenuEl = document.querySelector('.desktop-sub-menu');
      const activeEl = document.querySelector('li.nav.active.sub');
      const mobileMenuEl = document.querySelector('.mobile-menu');
      const mobileMenuUnderlayEl = document.querySelector('.mobile-menu-underlay');
      if (menuEl == null) {
        return;
      }

      hamburgerEl.addEventListener('click', this.toggleDrawer);

      mobileMenuUnderlayEl.addEventListener('click', function (e) {

        mobileMenuEl.classList.remove('open');
        mobileMenuUnderlayEl.style.display = 'none';
      });

      // touch device feature detection
      if (window.navigator.maxTouchPoints || 'ontouchstart' in document) {
        document.querySelector('.wwe-header-navigation').classList.add('mobile');
      }

      // check for active URL (only pages on wwe.com)
      // find me the element with the href of the current page
      if (window.location.pathname === '/shows') {
        document.querySelector('a[href*="shows"]').classList.add('active');
      }
      if (window.location.pathname === '/events') {
        document.querySelector('a[href*="events"]').classList.add('active');
      }

      // if active
      if (activeEl) {
        subMenuEl.style.display = 'flex';
      }

      $('.wwe-header-navigation', context).show();
      // WEB-6277 : It is recommended that style attribute specify CSS styles or that it be removed.
      if (!$('.wwe-header-navigation').attr("style")) {
        $('.wwe-header-navigation').removeAttr("style");
      }

      let countryCode = this.getCookie("geo[0]");
      if (!countryCode) {
        // Set default country code.
        countryCode = "US";
      }

      // Hide/Show WWE Network submenu.
      const wweNetworkSubmenuDesktop = $(".wwe-header-navigation ul.wwe-network-header-submenu");
      const wweNetworkSubmenuMobile = $(".wwe-header-navigation li.wwe-network-item ul.mobile-sub-menu");
      const wweNetworkCountries = settings.wwe_global_panes.wwe_network_countries;
      let wweNetworkHide = settings.wwe_global_panes.wwe_network_hide;
      // This is for the case when wweNetworkCountries is empty.
      wweNetworkHide = wweNetworkCountries.length ? wweNetworkHide : !wweNetworkHide;
      if ((wweNetworkHide && wweNetworkCountries.indexOf(countryCode) !== -1) || 
      (!wweNetworkHide && wweNetworkCountries.indexOf(countryCode) == -1)) {
        wweNetworkSubmenuDesktop.remove();
        wweNetworkSubmenuMobile.remove();
      }

      menuEl.addEventListener('mouseover', function (e) {
        if (e.target && e.target.matches('a')) {
          const selector = '.' + $(e.target).data('sub-menu-class');
          const selectedEl = document.querySelector(selector);
          // remove previous chevron
          const chevron = document.querySelector('.hover');
          if (chevron) chevron.classList.remove('hover');

          // if target has sub menu
          if ($(selector).length > 0) {

            // hide all the sub navs
            const navs = document.querySelectorAll('.sub-menu__items');
            navs.forEach(function (i) {
              i.style.display = 'none';
            });

            // reveal submenu panel & show the sub menu that cooresponds to target
            subMenuEl.style.display = 'flex';
            selectedEl.parentElement.style.display = 'flex';

            // show chevron
            e.target.parentElement.classList.add('hover');
          } else {
            if (!activeEl) {
              subMenuEl.style.display = 'none';
            }
          }
        }
      });

      // hover out of navigation
      subMenuEl.addEventListener('mouseleave', function (e) {
        if (e.toElement !== menuEl) {
          subMenuEl.style.display = 'none';
          const chevron = document.querySelector('.hover');
          if (chevron) chevron.classList.remove('hover');
        }
      });

      // The header login icon will appear only when the hide wwe login input checkbox is unchecked
      // and the current country code is within the list of allowed countries.
      const wweLoginHide = settings.wwe_global_panes.wwe_login_hide;
      const wweLoginCountriesList = settings.wwe_global_panes.wwe_login_countries_list;
      const countryCheck = wweLoginCountriesList.indexOf(countryCode) == -1;
      if (!wweLoginHide) {
        if (countryCheck) {
          const WweLoginOptions = {
            folder: '/sites/all/libraries/loginlib',
            service: {
              base_url: settings.wwe_global_panes.wwe_endeavor_api,
              api_key: settings.wwe_global_panes.wwe_endeavor_api_key, //CP-1807
            }
          };
          $('.wwe-header-navigation .desktop-menu .pull-right.wwe-geo-group .account-button').WWEAccountButton(WweLoginOptions);
          $('.wwe-header-navigation .desktop-menu .pull-right.wwe-geo-group .account-button #navigation-user-menu').appendTo('.wwe-header-navigation .desktop-menu');
          $('.wwe-header-navigation .desktop-menu .pull-right.wwe-geo-group .account-button #modal-underlay').appendTo('.wwe-header-navigation .desktop-menu');
        }
      }

      // Set network CTA button color.
      $('.network-promo-component').each(function() {
        if ($(this).data('color').length) {
          $(this).find('.wwe-button.button-default').css('background', $(this).data('color'));
        }
      });

    },
    toggleDrawer: function () {
      const mobileMenuEl = document.querySelector('.mobile-menu');
      const mobileMenuUnderlayEl = document.querySelector('.mobile-menu-underlay');
      if (mobileMenuEl.classList.contains('open')) {
        mobileMenuEl.classList.remove('open');
        mobileMenuUnderlayEl.style.display = 'none';
      } else {
        mobileMenuEl.classList.add('open');
        mobileMenuUnderlayEl.style.display = 'flex';
      }
    },
    getCookie: function (cName) {
      cName = cName + "=";
      var allCookies = document.cookie;
      var cPos = allCookies.indexOf(cName);
      if(cPos == -1) { return ""; }
      var cStart = cPos + cName.length;
      var cEnd = allCookies.indexOf(";", cStart);
      if(cEnd == -1) { cEnd = allCookies.length; }
      var cValue = unescape(allCookies.substring(cStart,cEnd));
      return cValue;
    }
  };
})(jQuery);
;/*})'"*/;/*})'"*/
(function ( $ ) {
  $.fn.login = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var login = {

      login: function(data) {
          return $.ajax({
              url: settings.service.base_url + settings.service.login,
              type: 'POST',
              dataType: 'json',
              contentType: "application/json; charset=utf-8",
              "data": JSON.stringify({
                "id": data.id,
                "secret": data.secret
              }),
              // beforeSend: settings.header //CP-1807- override hardcoded default values.
              beforeSend: function(xhr){
                xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
                xhr.setRequestHeader('realm', 'dce.wwe');
                xhr.setRequestHeader('app', 'dice');
                xhr.setRequestHeader('Content-Type', 'application/json');
                xhr.setRequestHeader('Accept', '*/*');
              }
          });
      }
    }
    return login.login(options);
  }

  $.fn.refreshToken = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var refreshToken = {

      refreshToken: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.refresh,
          type: 'POST',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
            "refreshToken": data.refreshToken
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return refreshToken.refreshToken(options);
  }

  $.fn.getProfile = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var getProfile = {

      getProfile: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.profile,
          type: 'GET',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          beforeSend: function(xhr){
              xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
              xhr.setRequestHeader('realm', 'dce.wwe');
              xhr.setRequestHeader('app', 'dice');
              xhr.setRequestHeader('Content-Type', 'application/json');
              xhr.setRequestHeader('Accept', '*/*');
              xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return getProfile.getProfile(options);
  }

  $.fn.updateprofile = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var updateprofile = {

      updateprofile: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.profile,
          type: 'PUT',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data":  JSON.parse(JSON.stringify(data.data)),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return updateprofile.updateprofile(options);
  }

  $.fn.getPreferences = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var getPreferences = {

      getPreferences: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.preferences,
          type: 'GET',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return getPreferences.getPreferences(options);
  }

  $.fn.logout = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var logout = {

      logout: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.logout,
          type: 'POST',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
            "token": data.refreshToken
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          },
        });
      }
    }
    return logout.logout(options);
  }

  $.fn.resetpassword = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var resetpassword = {

      resetpassword: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.resetpassword,
          type: 'POST',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
            "id": data.email
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return resetpassword.resetpassword(options);
  }

  $.fn.changepasswordreset = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var changepasswordreset = {

      changepasswordreset: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.changepasswordreset,
          type: 'PUT',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
            "secret": data.secret,
            "token": data.token
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');

          }
        });
      }
    }
    return changepasswordreset.changepasswordreset(options);
  }

  $.fn.createuser = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var createuser = {

      createuser: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.createuser,
          type: 'POST',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
              "email": data.email,
              "secret": data.secret,
              "consentAnswers" : [
                {
                  "answer" : data.accept,
                  "promptField" : "receiveMarketingEmail"
                },
                {
                  "answer" : data.accept_terms,
                  "promptField" : "terms_and_conditions_cb" //CP-1806
                }
              ],
            "meta_fields" : {
              "firstName":data.firstname,
              "lastName":data.lastname
            }
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');

          }
        });
      }
    }
    return createuser.createuser(options);
  }

  $.fn.changepassword = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);

    var changepassword = {

      changepassword: function(data) {
        return $.ajax({
          url: settings.service.base_url + settings.service.changepassword,
          type: 'PUT',
          dataType: 'json',
          contentType: "application/json; charset=utf-8",
          "data": JSON.stringify({
            "secret": data.secret
          }),
          beforeSend: function(xhr){
            xhr.setRequestHeader('x-api-key', settings.service.api_key); //CP-1807
            xhr.setRequestHeader('realm', 'dce.wwe');
            xhr.setRequestHeader('app', 'dice');
            xhr.setRequestHeader('Content-Type', 'application/json');
            xhr.setRequestHeader('Accept', '*/*');
            xhr.setRequestHeader('Authorization', 'Bearer ' + data.authorisationToken);
          }
        });
      }
    }
    return changepassword.changepassword(options);
  }

  $.fn.WWEAccountButton = function( options ) {
    var settings = $.extend(true, {}, $.fn.login.defaults, options);
    $(this).login.defaults = settings;

    var self = this;

    self.base_url = settings.base_url;

    var loginWidget = {
      // TEMPLATES
      accountButtonTemplate: `
        <div id="account" class="account">
          <img src="${settings.folder}/assets/images/account.svg" alt="${settings.loginWidget.texts.accountTitle}}" title="${settings.loginWidget.texts.accountTitle}">
        </div>
      `,
      userMenuTemplate: `
        <div id="navigation-user-menu" class="navigation-user-menu">
          <div class="logo">
            <img src="${settings.folder}/assets/images/wwe_logo.svg" alt="WWE" width="37">
          </div>
          <div class="actions">
            <div id="user-menu_signedin" class="user-menu_signedin">
              <div id="signin-button" class="signin-button">
                <div class="logo">
                  <img src="${settings.folder}/assets/images/signin.svg" width="24">
                </div>
                <div class="text">
                  ${settings.loginWidget.texts.signinWWE}
                </div>
              </div>
              <div class="horizontal-divider"></div>
              <div class="no-account">${settings.loginWidget.texts.noAccount}</div>
              <div id="signup-button" class="anchor">${settings.loginWidget.texts.signup}</div>
            </div>

            <div id="user-menu_signedout" class="user-menu_signedout">
              <div class="user-email">nathan@wwe.com</div>
              <div id="signout-button" class="anchor user-signout">Sign Out</div>
            </div>
          </div>
        </div>
      `,
      signinFormTemplate: `
        <form id="signin-form" class="auth-modal_content">
          <div class="wwe-input-group">
              <div id="msg-error-login" class="msg-error">
                <span class="msg-title">Error !</span>
                <span class="msg-text">message</span>
              </div>
          </div>
          <div class="wwe-input-group">
            <input type="email" id="signin-email" class="wwe-input" placeholder="Email Address" autocomplete="email" required>
            <div class="errors">
              <div id="signin-email-required" class="wwe-input_error signin-input-error">
                This field is required.
              </div>
              <div id="signin-email-format" class="wwe-input_error signin-input-error">
                The email you've entered is invalid. Please try again.
              </div>
            </div>
          </div>

          <div class="wwe-input-group">
            <input type="password" id="signin-password" class="wwe-input password" placeholder="Password" autocomplete="current-password" minlength="6" required>
            <img src="${settings.folder}/assets/images/hide.svg" id="signin-password-vision" class="wwe-input_vision" height="16" width="22">
            <div class="errors">
              <div id="signin-password-required" class="wwe-input_error signin-input-error">
                This field is required.
              </div>
              <div id="signin-password-tooshort" class="wwe-input_error signin-input-error">
                Password must be 6 characters in length or longer.
              </div>
            </div>
          </div>

          <div id="go-to-forgot-password" class="forgot-password-button" tabindex="0">${settings.loginWidget.texts.forgotPass}</div>
          <button type="submit" class="wwe-button button-primary" id="submit-signin" disabled>${settings.loginWidget.texts.signin}</button>

          <div class="signup-label">${settings.loginWidget.texts.noAccount}</div>
          <div id="go-to-signup" class="anchor bold" tabindex="0">${settings.loginWidget.texts.signup}</div>
        </form>
      `,
      forgotPasswordFormTemplate: `
        <form id="forgot-password-form" class="auth-modal_content">
          <div class="wwe-input-group">
            <div id="msg-error-forgotpwd" class="msg-error">
              <span class="msg-title">Error !</span>
              <span class="msg-text">message</span>
            </div>
          </div>
          <h3 class="modal-form_title">${settings.loginWidget.texts.forgotPassTitle}</h3>
          <p class="modal-form_subtitle">${settings.loginWidget.texts.forgotPassDescription}</p>
            <div class="wwe-input-group">
            <input type="email" id="forgot-password-email" class="wwe-input" pattern="^\\S+@\\S+\\.\\S+$" placeholder="Email Address" autocomplete="email" required>
            <div class="errors">
              <div id="forgot-email-required" class="wwe-input_error forgot-password-input-error">
                This field is required.
              </div>
              <div id="forgot-email-format" class="wwe-input_error forgot-password-input-error">
                The email you've entered is invalid. Please try again.
              </div>
            </div>
          </div>
          <button type="submit" class="wwe-button button-primary" id="submit-forgot-password" disabled>Continue</button>
          <div id="go-to-signin" class="back-to-signin" tabindex="0">${settings.loginWidget.texts.backSignin}</div>
        </form>

        <div class="forgot-password-confirmation">
          <h3>Email sent</h3>
          <p id="confirm-message"></p>
          <div id="confirm-go-to-signin" class="wwe-button button-primary">${settings.loginWidget.texts.backSignin}</div>
        </div>
      `,
      signupFormTemplate: `
        <form id="signup-form" class="auth-modal_content">
          <div class="wwe-input-group">
            <div id="msg-error-signup" class="msg-error">
              <span class="msg-title">Error !</span>
              <span class="msg-text">message</span>
            </div>
          </div>
          <div class="wwe-input-group">
            <input type="text" id="signup-firstname" class="wwe-input" placeholder="First Name" autocomplete="given-name" required>
            <div class="errors">
              <div id="signup-first-name-required" class="wwe-input_error signup-input-error">
                This field is required.
              </div>
            </div>
          </div>

          <div class="wwe-input-group">
            <input type="text" id="signup-lastname" class="wwe-input" placeholder="Last Name" autocomplete="family-name" required>
            <div class="errors">
              <div id="signup-last-name-required" class="wwe-input_error signup-input-error">
                This field is required.
              </div>
            </div>
          </div>

          <div class="wwe-input-group">
            <input type="email" id="signup-email" class="wwe-input" pattern="^\\S+@\\S+\\.\\S+$" placeholder="Email Address" autocomplete="email" required>
            <div class="errors">
              <div id="signup-email-required" class="wwe-input_error signup-input-error">
                This field is required.
              </div>
              <div id="signup-email-format" class="wwe-input_error signup-input-error">
                The email you've entered is invalid. Please try again.
              </div>
            </div>
          </div>

          <div class="wwe-input-group">
            <input type="password" id="signup-password" class="wwe-input password" placeholder="Password" autocomplete="new-password" minlength="8" required>
            <img src="${settings.folder}/assets/images/hide.svg" id="signup-password-vision" class="wwe-input_vision" height="16" width="22">
            <div class="errors">
              <div id="signup-password-required" class="wwe-input_error signup-input-error">
                This field is required.
              </div>
              <div id="signup-password-tooshort" class="wwe-input_error signup-input-error">
                Password must be 8 characters in length or longer.
              </div>
            </div>
          </div>

          <div class="checkbox">
            <input type="checkbox" id="signup-consent" class="signup-consent" required>
            <label id="signup-consent-label" for="signup-consent">${settings.loginWidget.texts.signinAgreement}</label>
          </div>

          <div class="checkbox">
            <input type="checkbox" id="marketing-consent" class="signup-consent">
            <label id="marketing-consent-label" for="marketing-consent">${settings.loginWidget.texts.marketingAgreement}</label>
          </div>

          <button type="submit" class="wwe-button button-primary" id="submit-signup" disabled>${settings.loginWidget.texts.createAccount}</button>

          <div class="signin-label">${settings.loginWidget.texts.haveAccount}
            <div id="signup-go-to-signin" class="anchor ml bold" tabindex="0">${settings.loginWidget.texts.signin}</div>
          </div>
        </form>

        <div id="signup-confirmation" class="signup-confirmation">
          <h3>You're all set!</h3>
          <p>Your WWE account using {nathan@wwe.com} has been successfully created. Use this email address to sign back in at any time.</p>
          <div id="signup-close" class="wwe-button button-primary">${settings.loginWidget.texts.close}</div>
        </div>
      `,
      resetFormTemplate: `
        <form id="reset-form" class="auth-modal_content">
          <div class="wwe-input-group">
            <div id="msg-error-resetpwd" class="msg-error">
              <span class="msg-title">Error !</span>
              <span class="msg-text">message</span>
            </div>
          </div>
          <h3 class="modal-form_title">${settings.loginWidget.texts.resetPassTitle}</h3>
          <p class="modal-form_subtitle">${settings.loginWidget.texts.resetPassDescription}</p>
          <div class="wwe-input-group">
            <input type="password" id="reset-new-password" class="wwe-input-reset-password password" placeholder="New Password" autocomplete="current-password" minlength="8" required>
            <img src="${settings.folder}/assets/images/hide.svg" id="reset-new-password-vision" class="wwe-input_vision" height="16" width="22">
            <div class="errors">
              <div id="reset-new-password-required" class="wwe-input_error reset-input-error">
                This field is required.
              </div>
              <div id="reset-password-tooshort" class="wwe-input_error reset-input-error">
                Password must be 8 characters in length or longer.
              </div>
              <div id="reset-new-password-mismatch" class="wwe-input_error reset-input-error">
                Passwords do not match.
              </div>
            </div>
          </div>

          <div class="wwe-input-group">
            <input type="password" id="reset-confirm-new-password" class="wwe-input-reset-password password" placeholder="Re-enter Password" autocomplete="current-password" minlength="8" required>
            <img src="${settings.folder}/assets/images/hide.svg" id="reset-confirm-password-vision" class="wwe-input_vision" height="16" width="22">
            <div class="errors">
              <div id="reset-confirm-password-required" class="wwe-input_error reset-input-error">
                This field is required.
              </div>
              <div id="reset-confirm-password-tooshort" class="wwe-input_error reset-input-error">
                Password must be 8 characters in length or longer.
              </div>
              <div id="reset-confirm-password-mismatch" class="wwe-input_error reset-input-error">
                Passwords do not match.
              </div>
            </div>
          </div>

          <button type="submit" class="wwe-button button-primary" id="submit-reset" disabled>Continue</button>
          <div id="reset-go-to-signin" class="back-to-signin">${settings.loginWidget.texts.backSignin}</div>
        </form>

        <div class="reset-password-confirmation" id="reset-password-confirmation">
          <h3>Success</h3>
          <p id="confirm-message">Your password has been reset.</p>
          <div id="reset-pass-confirm-button" class="wwe-button button-primary">${settings.loginWidget.texts.backSignin}</div>
        </div>
      `,
      modalTemplate: ({ signinForm, forgotPasswordForm, signupForm, resetForm }) => `
        <div id="modal-underlay" class="auth-modal_underlay">
          <dialog id="modal" class="auth-modal_overlay" aria-modal="true">
            <header>
              <img src="${settings.folder}/assets/images/wwe_logo.svg" width="48">
              <div id="close-modal" class="auth-modal_close">
                <img src="${settings.folder}/assets/images/cross.svg" width="16">
              </div>
            </header>
            ${signinForm}
            ${forgotPasswordForm}
            ${signupForm}
            ${resetForm}
          </dialog>
        </div>
      `,
      openModal: function (form) {
        loginWidget.modalUnderlay.style.display = 'flex';
        document.querySelector('body').classList.add('unscrollable');
        document.querySelector('html').classList.add('unscrollable');
        loginWidget.hideAllForms();
        loginWidget.hideErrorMsgs();

        switch (form) {
          case 'signin':
            loginWidget.signInForm.style.display = 'flex';
            loginWidget.setFocusTrap('#signin-form');
            break;
          case 'forgot':
            loginWidget.forgotPasswordForm.style.display = 'flex';
            loginWidget.setFocusTrap('#forgot-password-form');
            break;
          case 'signup':
            loginWidget.signUpForm.style.display = 'flex';
            loginWidget.setFocusTrap('#signup-form');
            break;
          case 'reset':
            loginWidget.resetForm.style.display = 'flex';
            loginWidget.setFocusTrap('#reset-form');
            break;
          default:
            break;
        }
      },
      sendGTM: function(jsonTag) {
        if (typeof(wwe_ga_dataLayer) != 'undefined') {
          wwe_ga_dataLayer.push(jsonTag);
        }
      },
      setFocusTrap: function(formSelector) {
        const focusableElements = 'button, [href], input, [tabindex]:not([tabindex="-1"])';
        const form = document.querySelector(`${formSelector}`);
        const firstFocusableElement = form.querySelectorAll(focusableElements)[0];
        const focusableContent = form.querySelectorAll(focusableElements);
        const lastFocusableElement = focusableContent[focusableContent.length - 1];

        form.addEventListener('keydown', function(e) {
          let isTabPressed = e.key === 'Tab';

          if (!isTabPressed) {
            return;
          }
        
          if (e.shiftKey) {
            if (document.activeElement === firstFocusableElement) {
              lastFocusableElement.focus();
              e.preventDefault();
            }
          } else {
            if (document.activeElement === lastFocusableElement) {
              firstFocusableElement.focus();
              e.preventDefault();
            }
          }
        })
      },
      closeModal: function() {
        loginWidget.modal.classList.add('closing');
        loginWidget.modalUnderlay.classList.add('closing');
        document.querySelector('body').classList.remove('unscrollable');
        document.querySelector('html').classList.remove('unscrollable');

        window.setTimeout(function() {
          loginWidget.modalUnderlay.style.display = 'none';
          loginWidget.modal.classList.remove('closing');
          loginWidget.modalUnderlay.classList.remove('closing');

          loginWidget.clearForms();
        }, 1500);
      },
      showErrorMsg: function(elementModal,elementText,text) {
        elementModal.style.display = 'flex';
        elementText.innerHTML = text;
      },
      getMesageFromCode: function(code) {
        var msg = settings.messages.filter(obj=>obj.code===code)[0];
        if( msg == undefined){
          return  settings.messages.filter(obj=>obj.code==="internalError")[0];
        }
          return msg;
      },
      getMesageFromError: function(error) {
        try {
          var code = JSON.parse(JSON.stringify(error)).responseJSON.messages[0]
          return loginWidget.getMesageFromCode(code);
        }catch(e){
          return loginWidget.getMesageFromCode("internalError")
        }
      },
      hideErrorMsgs: function() {
        loginWidget.msgerrorlogin.style.display = 'none';
        loginWidget.msgerrorsignup.style.display = 'none';
        loginWidget.msgerrorforgotpwd.style.display = 'none';
        loginWidget.msgerrorrstpwd.style.display = 'none';
      },
      showSignin: function() {
        loginWidget.menusignout.style.display = 'none';
        loginWidget.menusigin.style.display = 'block';
      },
      showSignout: function() {
        loginWidget.menusignout.style.display = 'flex';
        loginWidget.menusigin.style.display = 'none';
      },
      showSignUpSuccessMessage: function() {
        loginWidget.signUpForm.style.display = 'none';
        loginWidget.signUpConfirmation.style.display = 'flex';
        loginWidget.signUpConfirmationtext.innerHTML = loginWidget.signUpConfirmationtext.innerHTML.replace('{nathan@wwe.com}',$('#signup-email').val());
      },
      clearForms: function() {
        // reset forms
        loginWidget.signInForm.reset();
        loginWidget.forgotPasswordForm.reset();
        loginWidget.signUpForm.reset();
        loginWidget.resetForm.reset();
        loginWidget.hideErrorMsgs();
        

        // hide error messages
        document.querySelectorAll('.wwe-input_error').forEach((error) => {
          error.style.display = 'none';
        });

        document.querySelectorAll('.wwe-input-group').forEach((group) => {
          group.classList.remove('error');
        });

        loginWidget.resetPasswordField.classList.remove('valid');
        loginWidget.resetPasswordField.classList.remove('invalid');
        loginWidget.resetConfirmPasswordField.classList.remove('valid');
        loginWidget.resetConfirmPasswordField.classList.remove('invalid');

        // reset password vision
        loginWidget.signUpPasswordField.type = 'password';
        loginWidget.signInPasswordField.type = 'password';
        loginWidget.resetPasswordField.type = 'password';
        loginWidget.resetConfirmPasswordField.type = 'password';
        loginWidget.signInPasswordVision.src = settings.folder +'/assets/images/hide.svg';
        loginWidget.signUpPasswordVision.src = settings.folder +'/assets/images/hide.svg';
        loginWidget.resetPasswordVision.src = settings.folder +'/assets/images/hide.svg';
        loginWidget.resetConfirmPasswordVision.src = settings.folder +'/assets/images/hide.svg';

        loginWidget.forgotPasswordConfirmation.style.display = 'none';
        loginWidget.resetPasswordConfirmation.style.display = 'none';
        loginWidget.signUpConfirmation.style.display = 'none';

        loginWidget.submitSignUp.disabled = true;
        loginWidget.submitForgotPassword.disabled = true;
        loginWidget.submitSignIn.disabled = true;
        loginWidget.submitReset.disabled = true;
        loginWidget.isConsented = false;
      },
      hideAllForms: function() {
        loginWidget.signInForm.style.display = 'none';
        loginWidget.forgotPasswordForm.style.display = 'none';
        loginWidget.signUpForm.style.display = 'none';
        loginWidget.resetForm.style.display = 'none';

        loginWidget.clearForms();
      },
      checkSignupConsent: function() {
        if (loginWidget.isConsented
          && loginWidget.signUpFirstNameField.value.length > 0
          && loginWidget.signUpLastNameField.value.length > 0
          && loginWidget.signUpEmailField.value.length > 0
          && !loginWidget.signUpEmailField.validity.patternMismatch
          && loginWidget.signUpPasswordField.value.length >= 8) {
            loginWidget.submitSignUp.disabled = false;
        } else {
          loginWidget.submitSignUp.disabled = true;
        }
      },
      checkResetConsent: function() {
        if (loginWidget.resetPasswordField.value.length >= 8
          && loginWidget.resetConfirmPasswordField.value.length >= 8) {
            loginWidget.submitReset.disabled = false;
        } else {
          loginWidget.submitReset.disabled = true;
        }
      },
      checkMatch: function() {
        // if (loginWidget.resetPasswordField.value.length > 0 && loginWidget.resetConfirmPasswordField.value.length > 0) {
        //   if (loginWidget.resetPasswordField.value.length >= 6 && loginWidget.resetConfirmPasswordField.value.length >= 6) {
        //     if (loginWidget.resetPasswordField.value === loginWidget.resetConfirmPasswordField.value) {
        //       loginWidget.resetPasswordField.classList.add('valid');
        //       loginWidget.resetConfirmPasswordField.classList.add('valid');
        //       loginWidget.resetPasswordField.classList.remove('invalid');
        //       loginWidget.resetConfirmPasswordField.classList.remove('invalid');
        //     } else {
        //       loginWidget.resetPasswordField.classList.remove('valid');
        //       loginWidget.resetConfirmPasswordField.classList.remove('valid');
        //       loginWidget.resetPasswordField.classList.add('invalid');
        //       loginWidget.resetConfirmPasswordField.classList.add('invalid');
        //     }
        //   } else {
        //     loginWidget.resetPasswordField.classList.remove('valid');
        //     loginWidget.resetConfirmPasswordField.classList.remove('valid');
        //     loginWidget.resetPasswordField.classList.add('invalid');
        //     loginWidget.resetConfirmPasswordField.classList.add('invalid');
        //   }
        // } else {
        //   loginWidget.resetPasswordField.classList.remove('valid');
        //   loginWidget.resetPasswordField.classList.remove('invalid');
        //   loginWidget.resetConfirmPasswordField.classList.remove('valid');
        //   loginWidget.resetConfirmPasswordField.classList.remove('invalid');
        // }
      },
      init: function() {
        if (!self.hasClass('wwe-login-processed')) {
          self.append(loginWidget.accountButtonTemplate);
          self.append(loginWidget.userMenuTemplate);
          self.append([
            { signinForm: loginWidget.signinFormTemplate, forgotPasswordForm: loginWidget.forgotPasswordFormTemplate, signupForm: loginWidget.signupFormTemplate, resetForm: loginWidget.resetFormTemplate }
          ].map(loginWidget.modalTemplate).join(''));

          loginWidget.initVars();
          loginWidget.initListeners();
          loginWidget.hideErrorMsgs();
          loginWidget.session('init');

          self.addClass('wwe-login-processed');

          loginWidget.resetPasswordScreen();
        }
      },
      resetPasswordScreen: function() {
        var tokenparam = window.location.search.substring(1);
        if(tokenparam) {
          var isTokenString = tokenparam.split("=");
          if(isTokenString[0] != undefined && isTokenString[0] == "reset-password"){
            loginWidget.openModal('reset');
          }
        }
      },
      initListeners: function() {
        loginWidget.signInButton.addEventListener('click', () => {
          loginWidget.openModal('signin');
          loginWidget.userMenuOpen = false;
          loginWidget.navigationUserMenu.style.display = 'none';
        });

        loginWidget.signUpButton.addEventListener('click', () => {
          loginWidget.openModal('signup');
          loginWidget.userMenuOpen = false;
          loginWidget.navigationUserMenu.style.display = 'none';
        });

        loginWidget.signoutButton.addEventListener('click', () => {
          tokens = loginWidget.getToken();
          if(tokens.authorisationToken) {
            $(this).logout( {
              "authorisationToken": tokens.authorisationToken,
              "refreshToken": tokens.refreshToken
            }).done(function(data) {
              loginWidget.sendGTM({
                'event': 'User_Signed_Out',
                'GUID' : 'Logged-Out'
              });  
               console.log('Logout successfully')
              }).fail(function(error) {
               console.log('Not able to logout user')
            });
          }
          loginWidget.invalidateToken();
          loginWidget.showSignin();
        });

        loginWidget.accountButton.addEventListener('click', function(e) {
          e.stopPropagation();

          if (loginWidget.userMenuOpen) {
            loginWidget.userMenuOpen = false;
            loginWidget.navigationUserMenu.style.display = 'none';
          }
          else {
            loginWidget.userMenuOpen = true;
            loginWidget.navigationUserMenu.style.display = 'flex';
          }
        });

        // MODAL EVENTS
        loginWidget.closeBtn.addEventListener('click', loginWidget.closeModal);

        // FORM EVENTS
        loginWidget.goToSignInBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signInForm.style.display = 'flex';
          loginWidget.setFocusTrap('#signin-form');
        });

        loginWidget.goToForgotPassBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.forgotPasswordForm.style.display = 'flex';
          loginWidget.setFocusTrap('#forgot-password-form');
        });

        loginWidget.goToSignUpBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signUpForm.style.display = 'flex';
          loginWidget.setFocusTrap('#signup-form');
        });

        loginWidget.confirmGoToSignInBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signInForm.style.display = 'flex';
          loginWidget.forgotPasswordConfirmation.style.display = 'none';
          loginWidget.setFocusTrap('#signin-form');
        });

        loginWidget.resetPassConfirmBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signInForm.style.display = 'flex';
          loginWidget.resetPasswordConfirmation.style.display = 'none';
          loginWidget.setFocusTrap('#signin-form');
        });

        loginWidget.signUpGoToSignInBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signInForm.style.display = 'flex';
          loginWidget.setFocusTrap('#signin-form');
        });

        loginWidget.resetUpGoToSignInBtn.addEventListener('click', (e) => {
          loginWidget.hideAllForms();
          loginWidget.signInForm.style.display = 'flex';
          loginWidget.setFocusTrap('#signin-form');
        });

        // SIGNIN FORM
        loginWidget.signInFormListeners();
        // FORGOT PASSWORD FORM
        loginWidget.forgotPasswordFormListeners();
        // SIGNUP FORM
        loginWidget.signUpFormListeners();
        // RESET FORM
        loginWidget.resetFormListeners();
      },
      validateAccessToken: function (token) {
        if(token){
          if(token.split('.').length == 3){
            //MCS-295 - convert base64url encoded token to base64 encoding, using replace, before passing it to atob().
            var tokenparse = JSON.parse(atob(token.split('.')[1].replace(/-/g, '+').replace(/_/g, '/')));
            if(tokenparse.iss  == 'dce-id') {
              return true;
            }
          }
        }
        return false;
      },
      saveToken: function (token) {
        document.cookie = "at = " + token.authorisationToken + "; " + "expires=" + new Date(2147483647 * 1000).toUTCString() + " path=/; secure";
        document.cookie = "rt = " + token.refreshToken + "; " + "expires=" + new Date(2147483647 * 1000).toUTCString() + " path=/; secure";
        document.cookie = "guid = Logged-In; " + "expires=" + new Date(2147483647 * 1000).toUTCString() + " path=/; secure";
        loginWidget.modifyCurrentGUIDStatus('IN');
      },
      getToken: function () {
        return {
          authorisationToken : $.cookie('at'),
          refreshToken: $.cookie('rt')
        }
      },
      invalidateToken: function () {
        $.cookie('at', null);
        $.cookie('rt', null);
        loginWidget.invalidateGTMSignIn();
      },
      invalidateGTMSignIn: function () {
        $.cookie('guid', null);
        loginWidget.modifyCurrentGUIDStatus('OUT');
      },
      modifyCurrentGUIDStatus: function (status){
        if(status == 'IN') {
          wwe_ga_dataLayer[wwe_ga_dataLayer.findIndex(function(item) {  return item.GUID == "Logged-Out"})] = {GUID: 'Logged-In'}
        } else {
          wwe_ga_dataLayer[wwe_ga_dataLayer.findIndex(function(item) {  return item.GUID == "Logged-In"})] = {GUID: 'Logged-Out'}
        }
      },
      session: function (state) {
        var tokens = loginWidget.getToken();
        if (tokens.authorisationToken) {
          $(this).getProfile({
            "authorisationToken": tokens.authorisationToken
          }).done(function(data) {
              loginWidget.showSignout();
              loginWidget.menusignoutemail.innerHTML = data.contactEmail;
          }).fail(function(error) {
            var jsonError = JSON.parse(JSON.stringify(error)).responseJSON;
            if(jsonError.status == 401){
              loginWidget.invalidateGTMSignIn();
              if(state == 'init') {
                loginWidget.refreshToken('refresh',tokens);
              }
            }
          });
        } else {
          loginWidget.invalidateGTMSignIn();
        }
      },
      refreshToken: function (state,tokens) {
        $(this).refreshToken({
          "authorisationToken": tokens.authorisationToken,
          "refreshToken": tokens.refreshToken
        }).done(function(data) {
          loginWidget.saveToken(data);
          loginWidget.session(state);
        }).fail(function(error) {
          console.log('Refresh token is not valid',JSON.parse(JSON.stringify(error)).responseJSON);
        });
      },
      signInFormListeners: function() {
        loginWidget.signInPasswordVision.addEventListener('click', function(e) {
          e.stopPropagation();
          loginWidget.signInPasswordField.type === 'password' ? loginWidget.signInPasswordField.type = 'text' : loginWidget.signInPasswordField.type = 'password';
          loginWidget.signInPasswordField.type === 'password' ? loginWidget.signInPasswordVision.src = settings.folder + '/assets/images/hide.svg' : loginWidget.signInPasswordVision.src = settings.folder +'/assets/images/show.svg';
        });

        loginWidget.signInEmailField.addEventListener('keyup', function(e) {
          if (!loginWidget.signInEmailField.validity.typeMismatch && !loginWidget.signInEmailField.validity.valueMissing && !loginWidget.signInPasswordField.validity.valueMissing && !loginWidget.signInPasswordField.validity.tooShort) {
            loginWidget.submitSignIn.disabled = false;
          } else {
            loginWidget.submitSignIn.disabled = true;
          }
        });

        loginWidget.signInEmailField.addEventListener('blur', function(e) {
          if (loginWidget.signInEmailField.validity.valueMissing) {
            loginWidget.signInEmailField.parentNode.classList.add('error');
            document.querySelector('#signin-email-required').style.display = 'flex';
          } else {
            loginWidget.signInEmailField.parentNode.classList.remove('error');
            document.querySelector('#signin-email-required').style.display = 'none';
          }

          if (loginWidget.signInEmailField.validity.typeMismatch) {
            loginWidget.signInEmailField.parentNode.classList.add('error');
            document.querySelector('#signin-email-format').style.display = 'flex';
          } else {
            loginWidget.signInEmailField.parentNode.classList.remove('error');
            document.querySelector('#signin-email-format').style.display = 'none';
          }
        });

        loginWidget.signInPasswordField.addEventListener('keyup', function(e) {
          if (!loginWidget.signInEmailField.validity.typeMismatch && !loginWidget.signInEmailField.validity.valueMissing && !loginWidget.signInPasswordField.validity.valueMissing && !loginWidget.signInPasswordField.validity.tooShort) {
            loginWidget.submitSignIn.disabled = false;
          } else {
            loginWidget.submitSignIn.disabled = true;
          }
        });

        loginWidget.signInPasswordField.addEventListener('blur', function(e) {
          if (loginWidget.signInPasswordField.validity.valueMissing) {
            loginWidget.signInPasswordField.parentNode.classList.add('error');
            document.querySelector('#signin-password-required').style.display = 'flex';
          } else {
            loginWidget.signInPasswordField.parentNode.classList.remove('error');
            document.querySelector('#signin-password-required').style.display = 'none';
          }

          if (loginWidget.signInPasswordField.validity.tooShort) {
            loginWidget.signInPasswordField.parentNode.classList.add('error');
            document.querySelector('#signin-password-tooshort').style.display = 'flex';
          } else {
            loginWidget.signInPasswordField.parentNode.classList.remove('error');
            document.querySelector('#signin-password-tooshort').style.display = 'none';
          }
        });

        loginWidget.submitSignIn.addEventListener('click', function(e) {
          e.preventDefault();

          // remove old error states
          loginWidget.signInEmailField.parentNode.classList.remove('error');
          loginWidget.signInPasswordField.parentNode.classList.remove('error');
          loginWidget.signInErrors.forEach(function(err) {
            err.style.display = 'none';
          });

          if (loginWidget.signInForm.checkValidity()) {
            $(this).login( {
              "id": $('#signin-email').val(),
              "secret": $('#signin-password').val()
            }).done(function(data) {
                if(loginWidget.validateAccessToken(data.authorisationToken)){
                  loginWidget.saveToken(data);
                  loginWidget.closeModal();
                  loginWidget.hideErrorMsgs();
                  loginWidget.showSignout();
                  loginWidget.menusignoutemail.innerHTML = $('#signin-email').val();
                  loginWidget.sendGTM({
                    'em': $('#signin-email').val(), 'GUID': 'Logged-In', 'event': 'User_Signed_In'
                  });
                }                
              }).fail(function(error) {
                var msg = loginWidget.getMesageFromError(error);
                loginWidget.showErrorMsg(loginWidget.msgerrorlogin,loginWidget.msgerrorlogintext,msg.value);
                console.log('Login service error:', JSON.parse(JSON.stringify(error)).responseJSON);
              });
          } else {
            if (loginWidget.signInEmailField.validity.valueMissing) {
              loginWidget.signInEmailField.parentNode.classList.add('error');
              document.querySelector('#signin-email-required').style.display = 'flex';
            }

            if (loginWidget.signInEmailField.validity.typeMismatch) {
              loginWidget.signInEmailField.parentNode.classList.add('error');
              document.querySelector('#signin-email-format').style.display = 'flex';
            }

            if (loginWidget.signInPasswordField.validity.valueMissing) {
              loginWidget.signInPasswordField.parentNode.classList.add('error');
              document.querySelector('#signin-password-required').style.display = 'flex';
            }

            if (loginWidget.signInPasswordField.validity.tooShort) {
              loginWidget.signInPasswordField.parentNode.classList.add('error');
              document.querySelector('#signin-password-tooshort').style.display = 'flex';
            }
          }
        });
      },
      forgotPasswordFormListeners: function() {
        loginWidget.forgotPasswordEmailField.addEventListener('blur', function(e) {
          if (loginWidget.forgotPasswordEmailField.validity.valueMissing) {
            loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
            document.querySelector('#forgot-email-required').style.display = 'flex';
          } else {
            loginWidget.forgotPasswordEmailField.parentNode.classList.remove('error');
            document.querySelector('#forgot-email-required').style.display = 'none';
          }

          if (loginWidget.forgotPasswordEmailField.validity.patternMismatch) {
            loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
            document.querySelector('#forgot-email-format').style.display = 'flex';
          } else {
            loginWidget.forgotPasswordEmailField.parentNode.classList.remove('error');
            document.querySelector('#forgot-email-format').style.display = 'none';
          }

          if (loginWidget.forgotPasswordEmailField.validity.typeMismatch) {
            loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
            document.querySelector('#forgot-email-format').style.display = 'flex';
          } else {
            loginWidget.forgotPasswordEmailField.parentNode.classList.remove('error');
            document.querySelector('#forgot-email-format').style.display = 'none';
          }
        });

        loginWidget.forgotPasswordEmailField.addEventListener('keyup', function(e) {
          if (!loginWidget.forgotPasswordEmailField.validity.typeMismatch && !loginWidget.forgotPasswordEmailField.validity.patternMismatch && !loginWidget.forgotPasswordEmailField.validity.valueMissing) {
            loginWidget.submitForgotPassword.disabled = false;
          } else {
            loginWidget.submitForgotPassword.disabled = true;
          }
        });

        loginWidget.submitForgotPassword.addEventListener('click', function(e) {
          e.preventDefault();

          // remove old error states
          loginWidget.forgotPasswordEmailField.parentNode.classList.remove('error');
          loginWidget.forgotPasswordErrors.forEach(function(err) {
            err.style.display = 'none';
          });

          if (loginWidget.forgotPasswordForm.checkValidity()) {
            let emailAddress = loginWidget.forgotPasswordEmailField.value;

            if (loginWidget.forgotPasswordEmailField.value.length > 40) {
              emailAddress = 'the email address you provided';
            }

            $(this).resetpassword( {
              "email": $('#forgot-password-email').val()
            }).done(function(data) {
              loginWidget.hideErrorMsgs();
              loginWidget.forgotPasswordConfirmation.style.display = 'flex';
              loginWidget.forgotPasswordForm.style.display = 'none';
              loginWidget.confirmMessage.innerHTML = `Your password reset email is on its way to <b>${emailAddress}</b>. If you do not see it in the next 5 minutes, please verify that the email address you provided is correct or check your spam/trash folder.`;
              loginWidget.sendGTM({
                'event': 'User_Requested_Password_Reset_Success'
              });
            }).fail(function(error) {
              var msg = loginWidget.getMesageFromError(error);
              loginWidget.showErrorMsg(loginWidget.msgerrorforgotpwd,loginWidget.msgerrorforgotpwdtext,msg.value);
              console.log('Forgot error:', JSON.parse(JSON.stringify(error)).responseJSON);
            });
          } else {
            if (loginWidget.forgotPasswordEmailField.validity.valueMissing) {
              loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
              document.querySelector('#forgot-email-required').style.display = 'flex';
            }

            if (loginWidget.forgotPasswordEmailField.validity.patternMismatch) {
              loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
              document.querySelector('#forgot-email-format').style.display = 'flex';
            }

            if (loginWidget.forgotPasswordEmailField.validity.typeMismatch) {
              loginWidget.forgotPasswordEmailField.parentNode.classList.add('error');
              document.querySelector('#forgot-email-format').style.display = 'flex';
            }
          }
        });
      },
      signUpFormListeners: function() {
        loginWidget.signUpPasswordVision.addEventListener('click', function(e) {
          e.stopPropagation();
          loginWidget.signUpPasswordField.type === 'password' ? loginWidget.signUpPasswordField.type = 'text' : loginWidget.signUpPasswordField.type = 'password';
          loginWidget.signUpPasswordField.type === 'password' ? loginWidget.signUpPasswordVision.src = settings.folder + '/assets/images/hide.svg' : loginWidget.signUpPasswordVision.src = settings.folder + '/assets/images/show.svg';
        });

        loginWidget.signUpFirstNameField.addEventListener('blur', function(e) {
          if (loginWidget.signUpFirstNameField.validity.valueMissing) {
            loginWidget.signUpFirstNameField.parentNode.classList.add('error');
            document.querySelector('#signup-first-name-required').style.display = 'flex';
          } else {
            loginWidget.signUpFirstNameField.parentNode.classList.remove('error');
            document.querySelector('#signup-first-name-required').style.display = 'none';
          }

          loginWidget.checkSignupConsent();
        });

        loginWidget.signUpLastNameField.addEventListener('blur', function(e) {
          if (loginWidget.signUpLastNameField.validity.valueMissing) {
            loginWidget.signUpLastNameField.parentNode.classList.add('error');
            document.querySelector('#signup-last-name-required').style.display = 'flex';
          } else {
            loginWidget.signUpLastNameField.parentNode.classList.remove('error');
            document.querySelector('#signup-last-name-required').style.display = 'none';
          }

          loginWidget.checkSignupConsent();
        });

        loginWidget.signUpEmailField.addEventListener('blur', function(e) {
          if (loginWidget.signUpEmailField.validity.valueMissing) {
            loginWidget.signUpEmailField.parentNode.classList.add('error');
            document.querySelector('#signup-email-required').style.display = 'flex';
          } else {
            loginWidget.signUpEmailField.parentNode.classList.remove('error');
            document.querySelector('#signup-email-required').style.display = 'none';
          }

          if (loginWidget.signUpEmailField.validity.patternMismatch) {
            loginWidget.signUpEmailField.parentNode.classList.add('error');
            document.querySelector('#signup-email-format').style.display = 'flex';
          } else {
            loginWidget.signUpEmailField.parentNode.classList.remove('error');
            document.querySelector('#signup-email-format').style.display = 'none';
          }

          loginWidget.checkSignupConsent();
        });

        loginWidget.signUpPasswordField.addEventListener('blur', function(e) {
          if (loginWidget.signUpPasswordField.validity.valueMissing) {
            loginWidget.signUpPasswordField.parentNode.classList.add('error');
            document.querySelector('#signup-password-required').style.display = 'flex';
          } else {
            loginWidget.signUpPasswordField.parentNode.classList.remove('error');
            document.querySelector('#signup-password-required').style.display = 'none';
          }

          if (loginWidget.signUpPasswordField.validity.tooShort) {
            loginWidget.signUpPasswordField.parentNode.classList.add('error');
            document.querySelector('#signup-password-tooshort').style.display = 'flex';
          } else {
            loginWidget.signUpPasswordField.parentNode.classList.remove('error');
            document.querySelector('#signup-password-tooshort').style.display = 'none';
          }

          loginWidget.checkSignupConsent();
        });

        loginWidget.signUpConsent.addEventListener('click', function(e) {
          if (loginWidget.isConsented) {
            loginWidget.isConsented = false;
            loginWidget.submitSignUp.disabled = true;
          } else {
            loginWidget.isConsented = true;
            loginWidget.checkSignupConsent();
          }
        });

        loginWidget.submitSignUp.addEventListener('click', function(e) {
          e.preventDefault();

          // remove old error states
          loginWidget.signUpFirstNameField.parentNode.classList.remove('error');
          loginWidget.signUpLastNameField.parentNode.classList.remove('error');
          loginWidget.signUpEmailField.parentNode.classList.remove('error');
          loginWidget.signUpPasswordField.parentNode.classList.remove('error');
          loginWidget.signUpErrors.forEach(function(err) {
            err.style.display = 'none';
          });

          if (loginWidget.signUpForm.checkValidity()) {
            $(this).createuser( {
              "email": $('#signup-email').val(),
              "secret": $('#signup-password').val(),
              "firstname": $('#signup-firstname').val(),
              "lastname": $('#signup-lastname').val(),
              "accept": $('#marketing-consent').is(":checked"),
              "accept_terms": $('#signup-consent').is(":checked") //CP-1806
            }).done(function(data) {
                if(loginWidget.validateAccessToken(data.authorisationToken)){
                  loginWidget.saveToken(data);
                  loginWidget.showSignUpSuccessMessage();
                  loginWidget.hideErrorMsgs();
                  loginWidget.showSignout();
                  loginWidget.menusignoutemail.innerHTML = $('#signup-email').val();
                  loginWidget.sendGTM({
                    'em': $('#signup-email').val(), 'fn': $('#signup-firstname').val(), 'ln': $('#signup-lastname').val(), 'event': 'User_Registered_Success', 'receiveMarketingEmail':  $('#marketing-consent').is(":checked"),
                    'terms_and_conditions_cb':  $('#signup-consent').is(":checked"), //CP-1806
                  });
                  loginWidget.sendGTM({
                    'em': $('#signup-email').val(), 'GUID': 'Logged-In', 'event': 'User_Signed_In'
                  });
                }                
              }).fail(function(error) {
                var msg = loginWidget.getMesageFromError(error);
                loginWidget.showErrorMsg(loginWidget.msgerrorsignup,loginWidget.msgerrorsignuptext,msg.value);
                console.log('Create user error:', JSON.parse(JSON.stringify(error)).responseJSON);
              });
          } else {
            if (loginWidget.signUpFirstNameField.validity.valueMissing) {
              loginWidget.signUpFirstNameField.parentNode.classList.add('error');
              document.querySelector('#signup-first-name-required').style.display = 'flex';
            }

            if (loginWidget.signUpLastNameField.validity.valueMissing) {
              loginWidget.signUpLastNameField.parentNode.classList.add('error');
              document.querySelector('#signup-last-name-required').style.display = 'flex';
            }

            if (loginWidget.signUpEmailField.validity.valueMissing) {
              loginWidget.signUpEmailField.parentNode.classList.add('error');
              document.querySelector('#signup-email-required').style.display = 'flex';
            }

            if (loginWidget.signUpEmailField.validity.patternMismatch) {
              loginWidget.signUpEmailField.parentNode.classList.add('error');
              document.querySelector('#signup-email-format').style.display = 'flex';
            }

            if(loginWidget.signUpEmailField.validity.typeMismatch) {
              loginWidget.signUpEmailField.parentNode.classList.add('error');
              document.querySelector('#signup-email-format').style.display = 'flex';
            }

            if (loginWidget.signUpPasswordField.validity.valueMissing) {
              loginWidget.signUpPasswordField.parentNode.classList.add('error');
              document.querySelector('#signup-password-required').style.display = 'flex';
            }

            if (loginWidget.signUpPasswordField.validity.tooShort) {
              loginWidget.signUpPasswordField.parentNode.classList.add('error');
              document.querySelector('#signup-password-tooshort').style.display = 'flex';
            }
          }
        });

        loginWidget.signUpClose.addEventListener('click', function(e) {
          loginWidget.closeModal();
        });
      },
      resetFormListeners: function() {
        loginWidget.resetPasswordVision.addEventListener('click', function(e) {
          e.stopPropagation();
          loginWidget.resetPasswordField.type === 'password' ? loginWidget.resetPasswordField.type = 'text' : loginWidget.resetPasswordField.type = 'password';
          loginWidget.resetPasswordField.type === 'password' ? loginWidget.resetPasswordVision.src = settings.folder + '/assets/images/hide.svg' : loginWidget.resetPasswordVision.src = settings.folder + '/assets/images/show.svg';
        });

        // loginWidget.resetPasswordField.addEventListener('keyup', () => {
        //   loginWidget.checkMatch();
        // });

        // loginWidget.resetConfirmPasswordField.addEventListener('keyup', () => {
        //   loginWidget.checkMatch();
        // });

        loginWidget.resetPasswordField.addEventListener('blur', function(e) {
          if (loginWidget.resetPasswordField.validity.valueMissing) {
            loginWidget.resetPasswordField.parentNode.classList.add('error');
            document.querySelector('#reset-new-password-required').style.display = 'flex';
          } else {
            loginWidget.resetPasswordField.parentNode.classList.remove('error');
            document.querySelector('#reset-new-password-required').style.display = 'none';
          }

          if (loginWidget.resetPasswordField.validity.tooShort) {
            loginWidget.resetPasswordField.parentNode.classList.add('error');
            document.querySelector('#reset-password-tooshort').style.display = 'flex';
          } else {
            loginWidget.resetPasswordField.parentNode.classList.remove('error');
            document.querySelector('#reset-password-tooshort').style.display = 'none';
          }

          loginWidget.checkResetConsent();
        });

        loginWidget.resetConfirmPasswordField.addEventListener('blur', function(e) {
          if (loginWidget.resetConfirmPasswordField.validity.valueMissing) {
            loginWidget.resetConfirmPasswordField.parentNode.classList.add('error');
            document.querySelector('#reset-confirm-password-required').style.display = 'flex';
          } else {
            loginWidget.resetConfirmPasswordField.parentNode.classList.remove('error');
            document.querySelector('#reset-confirm-password-required').style.display = 'none';
          }

          if (loginWidget.resetConfirmPasswordField.validity.tooShort) {
            loginWidget.resetConfirmPasswordField.parentNode.classList.add('error');
            document.querySelector('#reset-confirm-password-tooshort').style.display = 'flex';
          } else {
            loginWidget.resetConfirmPasswordField.parentNode.classList.remove('error');
            document.querySelector('#reset-confirm-password-tooshort').style.display = 'none';
          }

          loginWidget.checkResetConsent();
        });

        loginWidget.resetConfirmPasswordVision.addEventListener('click', function(e) {
          e.stopPropagation();
          loginWidget.resetConfirmPasswordField.type === 'password' ? loginWidget.resetConfirmPasswordField.type = 'text' : loginWidget.resetConfirmPasswordField.type = 'password';
          loginWidget.resetConfirmPasswordField.type === 'password' ? loginWidget.resetConfirmPasswordVision.src = settings.folder + '/assets/images/hide.svg' : loginWidget.resetConfirmPasswordVision.src = settings.folder + '/assets/images/show.svg';
        });

        loginWidget.submitReset.addEventListener('click', function(e) {
          e.preventDefault();

          // remove old error states
          loginWidget.resetPasswordField.parentNode.classList.remove('error');
          loginWidget.resetConfirmPasswordField.parentNode.classList.remove('error');
          loginWidget.resetErrors.forEach(function(err) {
            err.style.display = 'none';
          });

          if (loginWidget.resetForm.checkValidity()) {
            if (loginWidget.resetPasswordField.value !== loginWidget.resetConfirmPasswordField.value) {
              loginWidget.resetPasswordField.parentNode.classList.add('error');
              document.querySelector('#reset-new-password-mismatch').style.display = 'flex';
              document.querySelector('#reset-confirm-password-mismatch').style.display = 'flex';
            } else {
              var tokenparam = window.location.search.substring(1);
              if(tokenparam) {
                var tokenString = tokenparam.split("=");
                if(tokenString[0] != undefined && tokenString[0] == "reset-password"){
                  $(this).changepasswordreset( {
                    "secret": $('#reset-confirm-new-password').val(),
                    "token": tokenString[1]
                  }).done(function(data) {
                    loginWidget.hideErrorMsgs();
                    window.history.pushState({}, document.title, "/");
                    loginWidget.resetPasswordConfirmation.style.display = 'flex';
                    loginWidget.resetForm.style.display = 'none';
                    loginWidget.sendGTM({
                      'event': 'User_Password_Reset_Success'
                    });
                  }).fail(function(error) {
                    var msg = loginWidget.getMesageFromError(error);
                    loginWidget.showErrorMsg(loginWidget.msgerrorrstpwd,loginWidget.msgerrorrstpwdtext,msg.value);
                    console.log('Reset error:', JSON.parse(JSON.stringify(error)).responseJSON);
                  });
                }
              }
            }
          } else {
            if (loginWidget.resetPasswordField.validity.valueMissing) {
              loginWidget.resetPasswordField.parentNode.classList.add('error');
              document.querySelector('#reset-new-password-required').style.display = 'flex';
            }

            if (loginWidget.resetConfirmPasswordField.validity.valueMissing) {
              loginWidget.resetConfirmPasswordField.parentNode.classList.add('error');
              document.querySelector('#reset-confirm-password-required').style.display = 'flex';
            }

            if (loginWidget.resetPasswordField.validity.tooShort) {
              loginWidget.resetPasswordField.parentNode.classList.add('error');
              document.querySelector('#reset-password-tooshort').style.display = 'flex';
            }

            if (loginWidget.resetConfirmPasswordField.validity.tooShort) {
              loginWidget.resetConfirmPasswordField.parentNode.classList.add('error');
              document.querySelector('#reset-confirm-password-tooshort').style.display = 'flex';
            }
          }
        });
      },
      initVars: function() {
        loginWidget.accountButton = document.querySelector('#account');
        loginWidget.navigationUserMenu = document.querySelector('#navigation-user-menu');
        loginWidget.signInButton = document.querySelector('#signin-button');
        loginWidget.signUpButton = document.querySelector('#signup-button');
        loginWidget.signoutButton = document.querySelector('#signout-button');
        loginWidget.userMenuOpen = false;
        loginWidget.isConsented = false;

        // MODAL
        loginWidget.modal = document.querySelector('#modal');
        loginWidget.modalUnderlay = document.querySelector('#modal-underlay');
        loginWidget.closeBtn = document.querySelector('#close-modal');

        // MENU
        loginWidget.menusignout = document.querySelector('#user-menu_signedout');
        loginWidget.menusigin = document.querySelector('#user-menu_signedin');
        loginWidget.menusignoutemail = document.querySelector('#user-menu_signedout > .user-email');
        

        // FORM ELEMENTS
        loginWidget.signInForm = document.querySelector('#signin-form');
        loginWidget.forgotPasswordForm = document.querySelector('#forgot-password-form');
        loginWidget.signUpForm = document.querySelector('#signup-form');
        loginWidget.resetForm = document.querySelector('#reset-form');

        // MSG ERROR
        loginWidget.msgerrorlogin = document.querySelector('#msg-error-login');
        loginWidget.msgerrorlogintext = document.querySelector('#msg-error-login > .msg-text');
        loginWidget.msgerrorsignup = document.querySelector('#msg-error-signup');
        loginWidget.msgerrorsignuptext = document.querySelector('#msg-error-signup > .msg-text');
        loginWidget.msgerrorforgotpwd = document.querySelector('#msg-error-forgotpwd');
        loginWidget.msgerrorforgotpwdtext = document.querySelector('#msg-error-forgotpwd > .msg-text');
        loginWidget.msgerrorrstpwd = document.querySelector('#msg-error-resetpwd');
        loginWidget.msgerrorrstpwdtext = document.querySelector('#msg-error-resetpwd > .msg-text');        
        
        // GOTO FORM BUTTONS
        loginWidget.goToSignInBtn = document.querySelector('#go-to-signin');
        loginWidget.goToForgotPassBtn = document.querySelector('#go-to-forgot-password');
        loginWidget.goToSignUpBtn = document.querySelector('#go-to-signup');
        loginWidget.confirmGoToSignInBtn = document.querySelector('#confirm-go-to-signin');
        loginWidget.resetPassConfirmBtn = document.querySelector('#reset-pass-confirm-button');
        loginWidget.signUpGoToSignInBtn = document.querySelector('#signup-go-to-signin');
        loginWidget.resetUpGoToSignInBtn = document.querySelector('#reset-go-to-signin');

        // FORM SUBMISSION BUTTONS
        loginWidget.submitSignIn = document.querySelector('#submit-signin');
        loginWidget.submitForgotPassword = document.querySelector('#submit-forgot-password');
        loginWidget.submitSignUp = document.querySelector('#submit-signup');
        loginWidget.submitReset = document.querySelector('#submit-reset');

        // SIGNIN FORM
        loginWidget.signInEmailField = document.querySelector('#signin-email');
        loginWidget.signInPasswordField = document.querySelector('#signin-password');
        loginWidget.signInPasswordVision = document.querySelector('#signin-password-vision');
        loginWidget.signInErrors = document.querySelectorAll('.signin-input-error');

        // FORGOT PASSWORD FORM
        loginWidget.forgotPasswordEmailField = document.querySelector('#forgot-password-email');
        loginWidget.forgotPasswordErrors = document.querySelectorAll('.forgot-password-input-error');
        loginWidget.forgotPasswordConfirmation = document.querySelector('.forgot-password-confirmation');
        loginWidget.confirmMessage = document.querySelector('#confirm-message');

        // SIGNUP FORM
        loginWidget.signUpFirstNameField = document.querySelector('#signup-firstname');
        loginWidget.signUpLastNameField = document.querySelector('#signup-lastname');
        loginWidget.signUpEmailField = document.querySelector('#signup-email');
        loginWidget.signUpPasswordField = document.querySelector('#signup-password');
        loginWidget.signUpPasswordVision = document.querySelector('#signup-password-vision');
        loginWidget.signUpConsent = document.querySelector('#signup-consent-label');
        loginWidget.signUpErrors = document.querySelectorAll('.signup-input-error');
        loginWidget.signUpConfirmation = document.querySelector('#signup-confirmation');
        loginWidget.signUpConfirmationtext = document.querySelector('#signup-confirmation > p');     
        loginWidget.signUpClose = document.querySelector('#signup-close');

        // RESET FORM
        loginWidget.resetPasswordField = document.querySelector('#reset-new-password');
        loginWidget.resetConfirmPasswordField = document.querySelector('#reset-confirm-new-password');
        loginWidget.resetPasswordVision = document.querySelector('#reset-new-password-vision');
        loginWidget.resetConfirmPasswordVision = document.querySelector('#reset-confirm-password-vision');
        loginWidget.resetErrors = document.querySelectorAll('.reset-input-error');
        loginWidget.resetPasswordConfirmation = document.querySelector('#reset-password-confirmation');
      },
      /*
      * Destroy the loginWidget instance.
      */
      destroy: function() {
        self.empty();
      }
    };

    loginWidget.init();

    return {
      destroy: loginWidget.destroy
    };
  };

  $.fn.login.defaults = { 
      service: {
          base_url: 'https://dce-frontoffice.imggaming.com',
          login: '/api/v2/login',
          refresh: '/api/v2/token/refresh',
          logout: '/api/v2/user/token/delete',
          resetpassword: '/api/v2/reset-password/create',
          createuser: '/api/v2/user',
          changepassword: '/api/v2/user/update-password',
          profile: '/api/v2/user/profile',
          preferences: '/api/v2/user/preferences',
          changepasswordreset: '/api/v2/reset-password'
      },
      header: function(xhr){
        xhr.setRequestHeader('x-api-key', '857a1e5d-e35e-4fdf-805b-a87b6f8364bf');
        xhr.setRequestHeader('realm', 'dce.wwe');
        xhr.setRequestHeader('app', 'dice');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.setRequestHeader('Accept', '*/*');
      },
      folder: '.',
      loginWidget: {
        texts: {
          promoDescription: '<p>Watch WWE Hell in a Cell on Peacock, the exclusive streaming partner of WWE in the U.S.</p><a class="wwe-button button-peacock" href="https://www.peacocktv.com/sports/wwe" target="_blank">Go to Peacock</a>',
          accountTitle: 'Account',
          signinWWE: 'Sign in to WWE',
          signin: 'Sign In',
          signup: 'Sign Up',
          signout: 'Sign out',
          noAccount: 'Don\'t have a WWE account?',
          forgotPass: 'Forgot my password',
          forgotPassTitle: 'Forgot your Password',
          forgotPassDescription: 'Enter your email address and we will send you instructions to reset your password.',
          backSignin: 'Back to Sign In',
          signinAgreement: 'I am 18 years of age or older and agree with the <a href="https://www.wwe.com/page/privacy-policy" target="_blank">Privacy Policy</a> and <a href="https://www.wwe.com/page/terms-and-conditions" target="_blank">Terms of Use</a>.',
          marketingAgreement: 'I consent to receiving marketing communications from WWE, and its affiliates, about special offers and other products.',
          haveAccount: 'Already have an account?',
          createAccount: 'Create Account',
          resetPassTitle: 'Reset Password',
          resetPassDescription: 'Enter a new password below to reset <br/> your forgotten password.',
          close: 'Close'
        },
      },
      messages : [
        // Login
        { code: "failedAuthentication", value: "Sorry, we can't find an account with this email address/password. Please try again or create a new account." },
        // Create user
        { code: "confirmedUserAlreadyExists", value: "It looks like an account already exists with this email address. Please  Sign In using the link below or choose a different email address to continue." },
        { code: "passwordIsTooCommon", value: "The password you provided is too common. Please choose another password."},
        { code: "emailIsInvalid", value: "Please provide a valid email address."},
        // General error
        { code: "internalError", value: "There was an error in your request. Please try again later or contact us for assistance."},
        // Reset Password
        { code: "Bearer token is not valid", value: "There was an error processing your request. Your link may have been expired, used or replaced with a new request. Please check your email or try again Forgot Password."},
        { code: "invalidResetPasswordToken", value: "There was an error processing your request. Your link may have been expired, used or replaced with a new request. Please check your email or try again Forgot Password."},
        { code: "Not Found", value: "There was an error processing your request. Your link may have been expired, used or replaced with a new request. Please check your email or try again Forgot Password."}
      ],
  };

}( jQuery ));
;/*})'"*/;/*})'"*/
/**
 * @file
 * Handles JS events in Episode Header.
 */

!(function($) {
  'use strict';

Drupal.behaviors.episodeHeader = {
  attach: function(context, settings) {
    if (context === document) {
      let country_code = this.getCookie('geo[0]');
      if (country_code) {
        country_code = country_code.toLowerCase();
      }
      $('.wwe-geo-group').each(function() {
        let tv_network_found = false;
        // First look for a country specific logo.
        $(this).find('.wwe-geo-element').each(function() {
            if ($(this).data('countries') !== '' &&
              $(this).data('countries').indexOf(country_code) !== -1 &&
              $(this).data('include') == 'in') {
              $(this).removeClass('element-invisible');
              tv_network_found = true;
              return false;
            }
        });
        if (tv_network_found) {
          return;
        }
        // Second look for a non-excluded-from-this-country logo.
        $(this).find('.wwe-geo-element').each(function() {
            if ($(this).data('countries') !== '' &&
              $(this).data('countries').indexOf(country_code) === -1 &&
              $(this).data('include') == 'ex') {
              $(this).removeClass('element-invisible');
              tv_network_found = true;
              return false;
            }
        });
        // Third check for a general one (one with no country restrictions).
        if (!tv_network_found &&
          $(this).find(".wwe-geo-element[data-countries='']").length) {
          $(this).find(".wwe-geo-element[data-countries='']").first().removeClass('element-invisible');
          tv_network_found = true;
        }
        // Finally search for the default one if nothing found yet.
        if (!tv_network_found &&
          $(this).find(".wwe-geo-element[data-countries='default']").length) {
          $(this).find(".wwe-geo-element[data-countries='default']").removeClass('element-invisible');
        }
      });
    }
  },
  getCookie: function (cName) {
    cName = cName + '=';
    var allCookies = document.cookie;
    var cPos = allCookies.indexOf(cName);
    if (cPos === -1) {
        return '';
    }
    var cStart = cPos + cName.length;
    var cEnd = allCookies.indexOf(';', cStart);
    if (cEnd === -1) {
        cEnd = allCookies.length;
    }
    return decodeURI(allCookies.substring(cStart, cEnd));
  }
};

})(jQuery);
;/*})'"*/;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_social_media/assets/js/wwe-social-defer.js. */
!(function($){'use strict';Drupal.behaviors.socialMediaDefer={attach:function(context,settings){var element=document.createElement("script");element.src="//platform.twitter.com/widgets.js";document.body.appendChild(element)}}}(jQuery));;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_social_media/assets/js/wwe-social-defer.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/ct_talent/js/superstars-belts.js. */
!(function($){'use strict';Drupal.behaviors.superstarsBelts={$carousels:undefined,attach:function(context,settings){var self=this;if($('.superstars-belts--items',context).length)self.init(context)},init:function(context){var self=this,$carousels=$('.superstars-belts--items:not(.slick-initialized)',context);$carousels.on('breakpoint',function(){self.setupNavigation()});if(this.$carousels===undefined){this.$carousels=$carousels}else $.extend(this.$carousels,$carousels);self.setupCarousels();$(window).resize(function(){self.setupPositions()})},setupCarousels:function(){var self=this;this.$carousels.slick({infinite:true,cssEase:'linear',dots:true,arrows:true,speed:300,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:760,settings:{slidesToShow:1,slidesToScroll:1,dots:false}}]});self.setupNavigation()},setupNavigation:function(){this.$carousels.find('.slick-prev').addClass('wwe-carousel--btn wwe-carousel--btn-prev');this.$carousels.find('.slick-next').addClass('wwe-carousel--btn wwe-carousel--btn-next');this.$carousels.find('.slick-dots').addClass('wwe-carousel--nav');this.setupPositions()},setupPositions:function(){var prev=this.$carousels.find('.slick-prev'),next=this.$carousels.find('.slick-next'),dots=this.$carousels.find('.slick-dots');if(Drupal.behaviors.wweThemeBreakpoints.breakpoint.value=='desktop'||Drupal.behaviors.wweThemeBreakpoints.breakpoint.value=='tablet'){var widthCarousels=this.$carousels.outerWidth(true),widthDots=dots.outerWidth(true),x=(widthCarousels-widthDots)/2;prev.css("left",x);next.css("right",x)}else{prev.attr("style","");next.attr("style","")}}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/ct_talent/js/superstars-belts.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/ct_talent/js/superstars-card.js. */
!(function($){'use strict';Drupal.behaviors.wweSuperStarCard={attach:function(context,settings){this.currentBreakpoint=Drupal.behaviors.wweThemeBreakpoints.breakpoint.value;this.$bodyTruncate=$('.wwe-superstar__card-highlights--body');if(this.$bodyTruncate.length===0)return false;this.$bodyTruncated=this.$bodyTruncate.attr('data-truncate');this.$bodyFull=this.$bodyTruncate.attr('data-full');this.checkStarWindowSize();$(window).resize(function(){var td=Drupal.behaviors.wweSuperStarCard;if(td.currentBreakpoint!==Drupal.behaviors.wweThemeBreakpoints.breakpoint.value){td.currentBreakpoint=Drupal.behaviors.wweThemeBreakpoints.breakpoint.value;td.checkStarWindowSize()}})},checkStarWindowSize:function(){if(typeof(this.$bodyTruncated)!==undefined||typeof(this.$bodyFull)!==undefined)if(this.currentBreakpoint==='tablet'){if(this.$bodyTruncated.length>0)this.$bodyTruncate.html(this.$bodyTruncated)}else if(this.$bodyFull.length>0)this.$bodyTruncate.html(this.$bodyFull)}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/ct_talent/js/superstars-card.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_global_panes/assets/js/footer-menu.js. */
!(function($){'use strict';Drupal.behaviors.wweGlobalPanesFooterMenu={attach:function(context,settings){$('.wwe-footer-navigation').once('addFooterCookiePreferencesEvent',function(index,elem){$("a:contains('"+Drupal.settings.wwe_global_panes_wwe_footer_cookie_preferences_label+"')",this).on('click',function(e){e.preventDefault();if(typeof truste!=='undefined'&&truste.hasOwnProperty('eu'))if(typeof(truste.eu.clickListener)!=='undefined')truste.eu&&truste.eu.clickListener()})})}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_global_panes/assets/js/footer-menu.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/contrib/extlink/js/extlink.js. */
(function($){'use strict';Drupal.extlink=Drupal.extlink||{};Drupal.extlink.attach=function(context,settings){if(!settings.hasOwnProperty('extlink'))return;var pattern=/^(([^\/:]+?\.)*)([^\.:]{1,})((\.[a-z0-9]{1,253})*)(:[0-9]{1,5})?$/,host=window.location.host.replace(pattern,'$2$3$6'),subdomain=window.location.host.replace(host,''),subdomains;if(settings.extlink.extSubdomains){subdomains='([^/]*\\.)?'}else if(subdomain==='www.'||subdomain===''){subdomains='(www\\.)?'}else subdomains=subdomain.replace('.','\\.');var internal_link=new RegExp('^https?://([^@]*@)?'+subdomains+host,'i'),extInclude=false;if(settings.extlink.extInclude)extInclude=new RegExp(settings.extlink.extInclude.replace(/\\/,'\\'),'i');var extExclude=false;if(settings.extlink.extExclude)extExclude=new RegExp(settings.extlink.extExclude.replace(/\\/,'\\'),'i');var extCssExclude=false;if(settings.extlink.extCssExclude)extCssExclude=settings.extlink.extCssExclude;var extCssExplicit=false;if(settings.extlink.extCssExplicit)extCssExplicit=settings.extlink.extCssExplicit;var extIconPlacement=settings.extlink.extIconPlacement||'append',external_links=[],mailto_links=[];$('a:not([data-extlink]), area:not([data-extlink])',context).each(function(el){try{var url='';if(typeof this.href=='string'){url=this.href.toLowerCase()}else if(typeof this.href=='object')url=this.href.baseVal;if(url.indexOf('http')===0&&((!url.match(internal_link)&&!(extExclude&&url.match(extExclude)))||(extInclude&&url.match(extInclude)))&&!(extCssExclude&&$(this).is(extCssExclude))&&!(extCssExclude&&$(this).parents(extCssExclude).length>0)&&!(extCssExplicit&&$(this).parents(extCssExplicit).length<1)){external_links.push(this)}else if(this.tagName!=='AREA'&&url.indexOf('mailto:')===0&&!(extCssExclude&&$(this).parents(extCssExclude).length>0)&&!(extCssExplicit&&$(this).parents(extCssExplicit).length<1))mailto_links.push(this)}catch(error){return false}});if(settings.extlink.extClass)Drupal.extlink.applyClassAndSpan(external_links,settings.extlink.extClass,extIconPlacement);if(settings.extlink.mailtoClass)Drupal.extlink.applyClassAndSpan(mailto_links,settings.extlink.mailtoClass,extIconPlacement);if(settings.extlink.extTarget){$(external_links).attr('target',settings.extlink.extTarget);$(external_links).attr('rel',function(i,val){if(val==null)return'noopener noreferrer';if(val.indexOf('noopener')>-1||val.indexOf('noreferrer')>-1){if(val.indexOf('noopener')===-1)return val+' noopener';if(val.indexOf('noreferrer')===-1){return val+' noreferrer'}else return val}else return val+' noopener noreferrer'})};Drupal.extlink=Drupal.extlink||{};Drupal.extlink.popupClickHandler=Drupal.extlink.popupClickHandler||function(){if(settings.extlink.extAlert)return confirm(settings.extlink.extAlertText)};$(external_links).click(function(e){return Drupal.extlink.popupClickHandler(e,this)})};Drupal.extlink.applyClassAndSpan=function(links,class_name,icon_placement){var $links_to_process;if(Drupal.settings.extlink.extImgClass){$links_to_process=$(links)}else{var links_with_images=$(links).find('img').parents('a');$links_to_process=$(links).not(links_with_images)};$links_to_process.attr('data-extlink','');var i,length=$links_to_process.length;for(i=0;i<length;i++){var $link=$($links_to_process[i]);if($link.css('display')==='inline'||$link.css('display')==='inline-block')if(Drupal.settings.extlink.extUseFontAwesome){if(class_name===Drupal.settings.extlink.mailtoClass){$link[icon_placement]('<span class="fa-'+class_name+' extlink"><span class="fa fa-envelope-o" title="'+Drupal.settings.extlink.mailtoLabel+'"></span><span class="element-invisible">'+Drupal.settings.extlink.mailtoLabel+'</span></span>')}else $link[icon_placement]('<span class="fa-'+class_name+' extlink"><span class="fa fa-external-link" title="'+Drupal.settings.extlink.extLabel+'"></span><span class="element-invisible">'+Drupal.settings.extlink.extLabel+'</span></span>')}else if(class_name===Drupal.settings.extlink.mailtoClass){$link[icon_placement]('<span class="'+class_name+'"><span class="element-invisible">'+Drupal.settings.extlink.mailtoLabel+'</span></span>')}else $link[icon_placement]('<span class="'+class_name+'"><span class="element-invisible">'+Drupal.settings.extlink.extLabel+'</span></span>')}};Drupal.behaviors.extlink=Drupal.behaviors.extlink||{};Drupal.behaviors.extlink.attach=function(context,settings){if(typeof extlinkAttach==='function'){extlinkAttach(context)}else Drupal.extlink.attach(context,settings)}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/contrib/extlink/js/extlink.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_master/js/wwe_master.js. */
!(function($){'use strict';Drupal.behaviors.WWEMaster={site:'internal',setSite:function(site){Drupal.behaviors.WWEMaster.site=site},removeSpecialchar:function(temp){if(temp!==undefined&&temp!=''){return temp.replace(/[^a-zA-Z 0-9]+/g,'')}else return''},getStringWithinLimit:function(text,limit){if(text!=="undefined"&&text.length>limit){return text.substring(0,limit-1)}else return text},getUrlVars:function(){var vars=[],hash,url=window.location.href,hashes=url.slice(url.indexOf('?')+1).split('&');for(var i=0;i<hashes.length;i++){hash=hashes[i].split('=');vars.push(hash[0]);vars[hash[0]]=hash[1]};return vars},getUrlVar:function(parametername){return Drupal.behaviors.WWEMaster.getUrlVars()[parametername]},wwe_translate:function(str,args,options){return Drupal.t(str,args,options)},decodeEntities:function(str){var element=document.createElement('div');if(str&&typeof str==='string'){str=str.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,'');str=str.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,'');element.innerHTML=str;str=element.textContent;element.textContent=''};return str},attach:function(context,settings){$('.wwe_debug li pre').hide();$('.wwe_debug li').on('click',function(){$(this).find('pre').slideToggle()});$('a[href*="quick-drag-drop-mode"]').each(function(){var $btn=$(this);$btn.attr('href','/#');$btn.on('click',function(e){e.preventDefault();$btn.parents('li').addClass('active');$('#admin-menu').remove();$('body.admin-menu').removeClass('admin-menu');$('#edit-redirect, #edit-path, #edit-translation, #edit-revision-information, #edit-metatags, #edit-scheduler-settings, #edit-author').remove();var tabs=['URL redirects','URL path settings','Translation','Revision information','Meta tags','Scheduling options','Authoring information'];$.each(tabs,function(index,value){$('strong:contains('+value+')').parents('li.vertical-tab-button').remove()});$('table[id*="wwe-browse-field"]').find('tbody tr td').css({"padding-top":"0","padding-bottom":"0"});$('table[id*="wwe-browse-field"]').find('tbody tr td img').css({width:"50%"});$('div#page').css({background:"#ffe777"})})})}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_master/js/wwe_master.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_analytics/wwe_analytics.js. */
!(function($){'use strict';Drupal.behaviors.wweAnalytics={wweGAid:'GTM-KMHBSF',contentType:'',titleContentType:['gallery','article','match','power_25','top_25'],$footerWrapper:'',comScore:null,comScoreId:'6036372',pageViewResults:1,pluid:null,vms_id:null,attach:function(context){this.$footerWrapper=$('.wwe-distributed-footer--wrapper');if(context===document||context==='.transporter--content')Drupal.behaviors.wweAnalytics.bindTrackingEvents();this.attachBreakerScroll(context);this.attachContentAdded(context)},cv_charLimit:128,bindTrackingEvents:function(){var $trackingElems=$('.js-track:not(.wwe-feed-cards--card__network-feed-card)');if($trackingElems)$trackingElems.off('click.track').on('click.track',Drupal.behaviors.wweAnalytics.handleTrackingEvent);if(this.$footerWrapper.length>0)this.$footerWrapper.find('a').off('click.footerTrack').on('click.footerTrack',Drupal.behaviors.wweAnalytics.handleFooterClick)},initializeComscore:function(){this.comScore=new ns_.StreamingTag({customerC2:this.comScoreId})},handleTrackingEvent:function(evt){var $target=evt.currentTarget?$(evt.currentTarget):$('#'+evt.attr('id')),$pane=$target.closest('.panel-pane'),label=$target.data('tracking-label'),tagName=$target[0].tagName.toLowerCase(),isVideoBtn=$target.is('.js-video--btn, .js-video_playlist--btn'),gaProps=Drupal.behaviors.wweAnalytics.prepareWidgetEvent($pane),$contextualWrapper=$target.closest('.wwe-contextual-module'),$feedCardWrapper=$target.closest('.wwe-feed-cards--card'),$breakerWrapper=$target.closest('.wwe-breaker--wrapper');if($contextualWrapper.length>0&&$contextualWrapper.attr('data-wname')){gaProps.WN=$contextualWrapper.attr('data-wname')}else if($feedCardWrapper.length>0&&$feedCardWrapper.attr('data-wname')){gaProps.WN=$feedCardWrapper.attr('data-wname')}else if($breakerWrapper.length>0&&$breakerWrapper.attr('data-wname'))gaProps.WN=$breakerWrapper.attr('data-wname');gaProps.L=label||"label not configured";gaProps.EA=evt.type?evt.type:evt[0].type;gaProps.E='TrackWidget';gaProps.OL='';gaProps.OV=0;if(tagName=='input'||tagName=='select'){var formId=$target.parents('form').attr('id'),$formElems;if(formId){$formElems=$('form#'+formId+' input, form#'+formId+' select')}else $formElems=$target;gaProps.L='';if($formElems.length>1){var l=$formElems.length,i=0;for(i;i<=l;i++){var $input=$($formElems[i]);if($input.attr('type')==='hidden'||$input.attr('type')==='submit')break;var elemVal=$input.val()==''?'value empty':$input.val(),elemVal=i==0?elemVal:'|'+elemVal;gaProps.L+=elemVal}}else{gaProps.L=$formElems.attr('id')+'|'+$formElems.val();if($formElems.attr('id')==='superstar-search-select')gaProps.L=$formElems.attr('id')+'|'+Drupal.behaviors.superstarsSearch.currentSelectionLabel}};if(gaProps.WN.indexOf('episode_standard')>-1)gaProps.WP=1;if(gaProps.WN=='wwe_highlights_videos'){wwe_ga_dataLayer.push({contentType:'video'})}else if(gaProps.WN=='feed_cards_pane'){wwe_ga_dataLayer.push({contentType:'video'})}else if(gaProps.WN=='featured_playlist'){wwe_ga_dataLayer.push({contentType:'video'})}else if(gaProps.WN=='video_explorer')if(gaProps.L=='now playing'){gaProps.EA='click_link'}else if(gaProps.L=='all playlists')gaProps.EA='click_link';if(isVideoBtn)gaProps.EA='click_play';if(!isNaN(gaProps.WP))gaProps.L=gaProps.L;if(gaProps.WN=='episodes_header_pane'){gaProps.WN='WWE Network Click';gaProps.L='Link';gaProps.EA='PPV Show';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser()}else if(gaProps.WN=='network_ppv_promo'){gaProps.WN='WWE Network Click';gaProps.EA='Network Promo Breaker';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser();var label_values=gaProps.L,label=label_values.split('|');if(label[1]=='linkType=text'){gaProps.L='Image'}else if(label[1]=='contentType=event'){gaProps.L='Button'}else if(label[1]=='contentType=eventdetail')gaProps.L='Link'}else if(gaProps.WN=='block'){gaProps.WN='WWE Network Click';gaProps.EA='Menu';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser();var label_values=gaProps.L,label=label_values.split('|');if(label[1]=='linkType=text')gaProps.L='Link'}else if(gaProps.WN=='wwe_network_schedule'){gaProps.EA='click';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser()}else if(gaProps.WN=='related_news_breaker'){gaProps.EA='click';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser()}else if(gaProps.WN=='feed_cards_pane_network-feed-card'){gaProps.WN='network_breaker_pane';gaProps.EA='click';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser()}else if(gaProps.WN=='match_header_pane'){gaProps.WN='WWE Network Click';gaProps.EA='Match';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser();var label_values=gaProps.L,label=label_values.split('|');if(label[1]=='linkType=text')gaProps.L='Link'}else if(gaProps.WN=='show_promo_pane'){gaProps.WN='WWE Network Click';gaProps.EA='Match';gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser();var label_values=gaProps.L,label=label_values.split('|');if(label[1]=='linkType=text')gaProps.L='Button'}else if(gaProps.WN=='wwe_network_offer_pane'){gaProps.WN='Widget link Clicks';gaProps.EA=$(this).attr('href');gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser()}else if(gaProps.WN=='superstar_network_breaker')gaProps.OV=Drupal.behaviors.wweAnalytics.getEntitlementsUser();if(gaProps.EA!='click_play')Drupal.behaviors.wweAnalytics.trackWidgetEvent(gaProps)},handleFooterClick:function(evt){var $target=$(evt.target),props={};props.WN='footer';props.WP=0;props.ID=0;props.SRC=location.pathname;props.EA='click';props.E='TrackWidget';props.OL='';props.OV=0;props.L=$target.attr('title')?$target.attr('title'):$target.text();Drupal.behaviors.wweAnalytics.trackWidgetEvent(props)},handleCustomTrackingEvent:function(props,pane,target){var gaProps,$target=target?target:null;if(target){var label=$target.data('tracking-label'),tagName=$target[0].tagName.toLowerCase()};if(pane){gaProps=Drupal.behaviors.wweAnalytics.prepareWidgetEvent(pane);gaProps.L=label||"label not configured";gaProps.EA='click';gaProps.E='TrackWidget';gaProps.OL='';gaProps.OV=0}else gaProps=props;Drupal.behaviors.wweAnalytics.trackWidgetEvent(gaProps)},setupCarouselTracking:function($carousel,type){var btns=$carousel.children('.slick-arrow').addClass('js-track');btns.each(function(){var $elem=$(this),$wrapper=$elem.parents('.wwe-related-media'),title=$wrapper.children('.wwe-related-media--title').text();if($elem.hasClass('slick-next')){$elem.data('tracking-label','next|galleryType='+type)}else if($elem.hasClass('slick-prev'))$elem.data('tracking-label','previous|galleryType='+type);if(title.length>1)$elem.data('tracking-label',$elem.data('tracking-label')+'|title='+title)});Drupal.behaviors.wweAnalytics.bindTrackingEvents()},truncateCustomVariableValue:function(cv_name,cv_value){if(typeof cv_name!==undefined)return'';if(typeof cv_value!==undefined)return'';var maxLength=Drupal.behaviors.wweAnalytics.cv_charLimit-cv_name.length;if(cv_value.length>maxLength)cv_value=cv_value.substring(0,maxLength);return cv_value},setBaseData:function(dataLayer){if(typeof Drupal.settings.WWEAds!=='undefined'&&typeof(Drupal.settings.WWEAds.dtemplate)!='undefined'){Drupal.behaviors.wweAnalytics.contentType=Drupal.settings.WWEAds.dtemplate;dataLayer.push({contentType:Drupal.behaviors.wweAnalytics.contentType});if($.inArray(Drupal.behaviors.wweAnalytics.contentType,Drupal.behaviors.wweAnalytics.titleContentType)>-1)switch(Drupal.behaviors.wweAnalytics.contentType){case'gallery':dataLayer.push({galleryTitle:Drupal.behaviors.wweAnalytics.truncateCustomVariableValue('galleryTitle',Drupal.settings.page.title)});break;case'article':case'match':case'power_25':case'top_25':dataLayer.push({virtualArticleTitle:Drupal.behaviors.wweAnalytics.truncateCustomVariableValue('virtualArticleTitle',Drupal.settings.page.title)});break}};if(typeof Drupal.settings.page!=='undefined')dataLayer.push({pageNodeID:Drupal.settings.page.nid});if(typeof Drupal.settings.videos!=='undefined')dataLayer.push({VMSID:Drupal.settings.videos.vms_id});if(typeof(Drupal.settings.wweSearchAnalyticsCloude)!='undefined')dataLayer.push(Drupal.settings.wweSearchAnalyticsCloude);var ipid=jQuery.cookie('ipid');if(ipid&&typeof ipid!=='undefined')dataLayer.push({IPID:ipid});var sailthru_hid=jQuery.cookie('sailthru_hid');if(sailthru_hid&&typeof sailthru_hid!=='undefined'){var sailthruhid_len=sailthru_hid.length;if(sailthruhid_len>0){var sailthruhid_id=sailthru_hid.substr(32,24);dataLayer.push({SailthruID:sailthruhid_id})}};var guid=jQuery.cookie('guid');if(guid&&typeof guid!=='undefined'){dataLayer.push({GUID:'Logged-In'})}else dataLayer.push({GUID:'Logged-Out'});var gaCookie=jQuery.cookie('_ga');if(gaCookie&&typeof gaCookie!=='undefined'){var cookieCreateDate=jQuery.cookie('_ga').split(".")[3],myDate=new Date(cookieCreateDate*1e3),gaCookieCreateDate=myDate.toLocaleString('en-US'),gaClientID=jQuery.cookie('_ga').split(".")[2];dataLayer.push({CookieCreateDate:gaCookieCreateDate,ClientID:gaClientID,GACookie:gaCookie})};dataLayer.push({PageViewScroll:$.trim(this.pageViewResults)});dataLayer.push({Breaker_Page_Load_Impression:this.getBottomBreakerName()});this.pluid=this.getPluid();dataLayer.push({PLUID:this.pluid});if(document.location.pathname=="/wwenetwork")dataLayer.push({PageViewScroll:'1',contentType:'section',Breaker_Page_Load_Impression:'no-breaker',pageNodeID:'40032423'});return dataLayer},getGAid:function(){try{Drupal.behaviors.wweAnalytics.wweGAid=Drupal.settings.analytics.ga_liveid;var referrer=document.referrer,isDev=false,acctlist=Drupal.settings.analytics.ga_dev_acctlist;if(acctlist){var data=acctlist.split(','),i=0,l=data.length;for(;i<l;i++)if(location.hostname.indexOf(data[i])>-1){isDev=true;break}};if(isDev){Drupal.behaviors.wweAnalytics.wweGAid=Drupal.settings.analytics.ga_devid}else Drupal.behaviors.wweAnalytics.wweGAid=Drupal.settings.analytics.ga_liveid}catch(e){if(typeof console!=='undefined')console.log(e)};return Drupal.behaviors.wweAnalytics.wweGAid},getWidgetInfo:function(obj){try{var pane=$(obj).closest('div.pane');if(typeof pane=='undefined'||pane==null||pane=='')return'NotAWidget';var props={};props.WN='widgetname';props.WP=parseInt($(pane).attr('data-position'));var id=$(pane).attr('id');if(id!==undefined)props.WN=id.substring(0,id.lastIndexOf('_'));props.LR=$(obj).attr('href');props.LT=$(obj).text();return'WN='+props.name+'; WP='+props.position+'; LT='+props.linktext}catch(e){if(typeof console!=='undefined')console.log(e)};return'NotaWidget'},getBottomBreakerName:function(){var $breaker=$('.wwe-breaker--wrapper:not(.analytics-breaker-view-processed)',document).last();return($breaker.length?$breaker.attr('data-wname'):'no breaker')},getBreakerEventLabel:function(element){var type=$(element).attr('data-wname')||'',info=$(element).attr('data-winfo')||'',items=info.length>0?info.split(","):[];switch(type){case'distributed_footer':return'LT=text';break;case'appearances_breaker':case'featured_playlist':case'gallery_breaker':case'network_ppv_promo':case'related_news_breaker':case'past_results_breaker':case'vip_ringside_experience':case'wwe_network_schedule':break;case'feed_cards_pane_network-feed-card':$('a.wwe-feed-card--thumb.js-track',element).filter(function(index){return(typeof $(this).attr("data-nid")!=='undefined')}).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'championship_belts':var limit=$(element).data('limit');$('.superstars-belts--item.js-track',element).filter(function(index){return($(this).attr("data-slick-index")>=0&&$(this).attr("data-slick-index")<limit)}).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'events_news_feed_pane':$('.js-track.wwe-feed-cards--title',element).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'package_base_pane':$('a.js-track',element).filter(function(index){return(typeof $(this).attr("data-nid")!=='undefined'&&!$(this).hasClass("icon-"+$(this).attr("data-ct")))}).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'shop_breaker':var limit=$(element).children().data('limit');$('.wwe-breaker--item-title.js-track',element).filter(function(index){return($(this).parent().parent().attr("data-slick-index")>=0&&$(this).parent().parent().attr("data-slick-index")<limit)}).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'travel_breaker':var limit=$(element).data('limit');$('.travel-package--item.js-track',element).filter(function(index){return($(this).parent().attr("data-slick-index")>=0&&$(this).parent().attr("data-slick-index")<limit)}).each(function(slot,value){items.push($(value).attr('data-nid'))});break;case'superstar_network_breaker':if(typeof $('.js-track.wwe-feed-cards--title',element).attr('data-tracking-impression')!=='undefined')return $('.js-track.wwe-feed-cards--title',element).attr('data-tracking-impression');break;default:$('.wwe-breaker--item.js-track, .events-breaker--item.js-track, .wwe-related-media--item.js-track',element).each(function(slot,value){items.push($(value).attr('data-nid'))});break};return $.map(items,function(n,i){return("slot="+(i+1)+"|cid="+n)}).join('||')},analyticsEvent:function(event,category,action,opt_value,opt_label){wwe_ga_dataLayer.push({event:'analyticsEvent',eventCategory:category,eventAction:action,eventLabel:opt_label,eventValue:opt_value})},breakerEvent:function(category,action,opt_label,interaction){if(category=="superstar_network_breaker"){var user_entitled=Drupal.behaviors.wweAnalytics.getEntitlementsUser();wwe_ga_dataLayer.push({event:'analyticsEvent',eventCategory:category,eventAction:action,eventLabel:opt_label,eventNonInt:interaction,eventValue:user_entitled})}else wwe_ga_dataLayer.push({event:'analyticsEvent',eventCategory:category,eventAction:action,eventLabel:opt_label,eventNonInt:interaction})},trackVirtualPageView:function(opt_value,opt_label){var page=opt_value?opt_value:location.pathname,matches=page.match(/^((https?:)?\/\/[a-zA-Z0-9][a-zA-Z0-9\.-]*)(\/.*$)/);this.pageViewResults++;wwe_ga_dataLayer.push({VMSID:this.vms_id});wwe_ga_dataLayer.push({event:'virtualPageview',virtualPageURL:matches==null?page:matches[3],virtualPageTitle:opt_label?opt_label:'not configured',PageViewScroll:$.trim(this.pageViewResults),Breaker_Page_Load_Impression:this.getBottomBreakerName()});wwe_ga_dataLayer.push({VMSID:''})},getEntitlements:function(cookie){var ent=null,cook=null;if(cookie){cookie=cookie.split(',');for(cook in cookie)if(cookie[cook].indexOf('sub_level')!=-1)ent=cookie[cook].split(':')[1].replace(/"/g,"")};return ent},getEntitlementsCookie:function(cName){cName=cName+"=";var allCookies=document.cookie,cPos=allCookies.indexOf(cName);if(cPos==-1)return"";var cStart=cPos+cName.length,cEnd=allCookies.indexOf(";",cStart);if(cEnd==-1)cEnd=allCookies.length;var cValue=unescape(allCookies.substring(cStart,cEnd));return cValue},getEntitlementsUser:function(){var sub_level=Drupal.behaviors.wweAnalytics.getEntitlementsCookie('sub_level');if(sub_level=='3'){sub_level=sub_level}else if(sub_level=='2'){sub_level=sub_level}else sub_level=1;return sub_level},trackCustomDimension:function(optData){wwe_ga_dataLayer.push(optData)},trackWidgetEvent:function(props){var eventValue=Drupal.behaviors.wweAnalytics.cleanEventValue(props.OV),eventWidget='analyticsEvent';props.WN=props.WN||'UND';if(typeof(props.EA)!="string"||typeof(props.L)!="string")return;wwe_ga_dataLayer.push({event:eventWidget,eventCategory:props.WN,eventAction:props.EA,eventLabel:props.L,eventValue:eventValue})},cleanEventValue:function(eventValue){var isInteger=(eventValue===parseInt(eventValue,10));if(isInteger)return eventValue;if(!isInteger||props.L.indexOf('contentType=video')>-1){eventValue=0}else if(props.WN=='video_explorer')eventValue=0;return eventValue},prepareWidgetEvent:function($pane){var props={};props.WN=$pane.attr('data-wname');props.WP=parseInt($pane.attr('data-pos'));props.ID=parseInt($pane.attr('data-id'));if(!props.WN)props.WN='UND';var id=$pane.attr('id');if(id!==undefined)props.WN=Drupal.behaviors.WWEMaster.removeSpecialchar(id.substring(0,id.lastIndexOf('_')));props.SRC=location.pathname;return props},attachBreakerScroll:function(context){var self=this,$window=$(window),height=$window.height();$('.wwe-breaker--wrapper, .wwe-breaker--container, .wwe-feed-package-base-pane, .wwe-feed-cards--card__network-feed-card','.pane-navigation-drawer').addClass('analytics-breaker-view-processed');var $breakers=$('.wwe-breaker--wrapper:not(.analytics-breaker-view-processed), .wwe-feed-package-base-pane:not(.analytics-breaker-view-processed), .wwe-feed-cards--card__network-feed-card:not(.analytics-breaker-view-processed), .wwe-promo-unit:not(.analytics-breaker-view-processed)',context);$window.on('scroll',function(evt){if(typeof Drupal.behaviors.superstarsSearch!=='undefined'&&location.pathname.match('^/superstars')!==null){var pageViewResults=Drupal.behaviors.superstarsSearch.range.loaded/Drupal.behaviors.superstarsSearch.limit}else{Drupal.settings.wweCloudsearch=Drupal.settings.wweCloudsearch||{};var interval=parseInt(Drupal.settings.wweCloudsearch.interval)||10,searchResults=$('body.page-search li.search-result').length,pageViewResults=searchResults?self.roundNumber(searchResults/interval):0};if(pageViewResults>self.pageViewResults)self.trackVirtualPageView(location.pathname,document.title);$breakers.each(function(i,element){var $elem=$(this);if($elem.parent().hasClass('analytics-breaker-view-processed'))return true;var docViewTop=$window.scrollTop(),docViewBottom=docViewTop+height,elemTop=$elem.offset().top;if(elemTop<=docViewBottom)$elem.once('analytics-breaker-view',function(index,element){if(pageViewResults===0&&(location.pathname.match('^/search')===null&&location.pathname.match('^/wwenetwork')===null))self.trackVirtualPageView(location.href,document.title);self.breakerEvent(self.mapBreakerName($(element).attr('data-wname')),'Breaker Impression',self.getBreakerEventLabel(element),true)})})})},mapBreakerName:function(breaker){var breakers={'feed_cards_pane_network-feed-card':'network_breaker_pane'};return(breakers[breaker]||breaker)},attachContentAdded:function(context){var self=this;$('.pane-events-news-feed-pane','.pane-navigation-drawer').addClass('analytics-breaker-view-processed');var $feedcards=$('.pane-events-news-feed-pane:not(.analytics-breaker-view-processed)',context);$(document).on('wwe-content-added',function(evt){$feedcards.each(function(i,element){$(element).once('analytics-breaker-view',function(index,element){self.breakerEvent(self.mapBreakerName($(element).attr('data-wname')),'Breaker Impression',self.getBreakerEventLabel(element),true)})})})},getPluid:function(a){return a?(a^Math.random()*16>>a/4).toString(16):([1e7]+ -1e3+ -4e3+ -8e3+ -1e11).replace(/[018]/g,Drupal.behaviors.wweAnalytics.getPluid)},roundNumber:function(number){return(Math.floor(number)===Number(number))?Number(number):Math.floor(number)+1}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_analytics/wwe_analytics.js. */;/*})'"*/
/* Source and licensing information for the line(s) below can be found at /sites/all/modules/custom/wwe_analytics/assets/js/wwe-analytics-defer.js. */
!(function($){'use strict';Drupal.behaviors.analyticsDefer={}}(jQuery));;
/* Source and licensing information for the above line(s) can be found at /sites/all/modules/custom/wwe_analytics/assets/js/wwe-analytics-defer.js. */;/*})'"*/

</script>

</body>
</html>
