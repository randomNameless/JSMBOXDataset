<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>low-carbon-mode.html</title>
</head>
<body>

<script>
var elementInfoArray = [{
        "selector": ".l-main",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-1"
    },
    {
        "selector": ".swiper-slide",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-1"
    },
    {
        "selector": ".form__label",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".divider:not(.noDark)",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "divider--black",
        "newParameter": "divider--white"
    },
    {
        "selector": ".headline-4",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".content__small-text",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".swiper-pagination-bullet span",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": "#id",
        "action": "changeId",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "template-3",
        "newParameter": "template-3-dark-mode"
    },
    {
        "selector": "#id",
        "action": "",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "template-2",
        "newParameter": "template-2-dark-mode"
    },
    {
        "selector": ".section:not(.noDark)",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-1"
    },
    {
        "selector": ".headline-2",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".pre-headline-1",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "color-blue",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".section_republic_item",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-2"
    },
    {
        "selector": ".section_republic_item_content--name",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".section_republic_item_content--position",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".wide-link__title",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-2 dark-mode-color-secondary"
    },
    {
        "selector": ".wide-link__icon",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3"
    },
    {
        "selector": ".stats__value",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "color-blue",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".stats__title",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".stats__underline ",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "bg-blue",
        "newParameter": "dark-mode-bg-4"
    },
    {
        "selector": ".headline-inner",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".divider:not(.noDark)",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "divider--red",
        "newParameter": "divider--white"
    },
    {
        "selector": ".breadcrumbs",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "breadcrumbs--dark",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".content",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".normalModeIcon",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "d-block",
        "newParameter": "d-none"
    },
    {
        "selector": ".darkModeIcon",
        "action": "replace",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "d-none",
        "newParameter": "d-block"
    },
    {
        "selector": "table",
        "action": "add",
        "css": {
            "new": {},
            "old": {}
        },
        "oldParameter": "",
        "newParameter": "table-dark-mode"
    },
    {
        "selector": ".paginate_button:not(.current)",
        "action": "changeCss",
        "css": {
            "new": "color: #c9c9c9 !important",
            "old": "color: #333 !important"
        },
        "oldParameter": "",
        "newParameter": ""
    },
    {
        "selector": "input,select,textarea",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3 dark-mode-color-secondary"
    },
    {
        "selector": ".accordion",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-2"
    },
    {
        "selector": ".accordion-title",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3 dark-mode-color-primary"
    },
    {
        "selector": ".submenu-dark, .submenu-dark-disable",
        "action": "replace",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "submenu-dark",
        "newParameter": "submenu-dark-disable"
    },
    {
        "selector": "submenu a",
        "action": "replace",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "btn--white",
        "newParameter": "btn--blue"
    },
    {
        "selector": ".headline-3",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".card__headline",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".form__radio-label",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".candidate-rules",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".form__checkbox-label",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-primary"
    },
    {
        "selector": ".bg-media:not(.safeOpacity)",
        "action": "replace",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "fadeIn",
        "newParameter": "low-opacity"
    },
    {
        "selector": ".timeline-item__face",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3 dark-mode-color-secondary"
    },
    {
        "selector": ".timeline-item__headline",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".modal-content",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3 dark-mode-color-secondary"
    },
    {
        "selector": ".modal-header",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-bg-3 dark-mode-color-secondary"
    },
    {
        "selector": ".fs-title",
        "action": "add",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".rc-anchor",
        "action": "replace",
        "css": {
            "new": "",
            "old": ""
        },
        "oldParameter": "rc-anchor-light",
        "newParameter": "rc-anchor-dark"
    },
    {
        "selector": ".btn--black",
        "action": "changeCss",
        "css": {
            "new": "color: #c9c9c9 !important;border: 1px solid #c9c9c9; ",
            "old": "color: #333;border: 1px solid #000;"
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
    {
        "selector": ".div-carbonized",
        "action": "changeCss",
        "css": {
            "new": "visibility:hidden",
            "old": "visibility:unset"
        },
        "oldParameter": "",
        "newParameter": "dark-mode-color-secondary"
    },
];




function isClassName(selector) {
    return selector.startsWith('.');
}

function isIdName(selector) {
    return selector.startsWith('#');
}

function setDarkMode(selectorDatas, checkboxSelector) {

    selectorDatas.forEach(function (selectorData) {
        var selector = selectorData.selector;
        var action = selectorData.action;
        var oldParameter = selectorData.oldParameter;
        var newParameter = selectorData.newParameter;
        var css = selectorData.css;
        var isChecked = $(checkboxSelector).prop('checked');

        if (isClassName(selector)) {
            $(selector).each(function () {
                if (isChecked) {

                    switch (action) {
                        case 'add':
                            $(this).addClass(newParameter);
                            break;
                        case 'replace':
                            $(this).removeClass(oldParameter).addClass(newParameter);
                            break;
                        case 'changeCss':
                            $(this).attr('style', css.new);
                            break;
                        default:
                            // code to be executed if n is different from case 1 and 2
                    }
                } else {
                    switch (action) {
                        case 'add':
                            $(this).removeClass(newParameter);
                            break;
                        case 'replace':
                            $(this).removeClass(newParameter).addClass(oldParameter);
                            break;
                        case 'changeCss':
                            $(this).attr('style', css.old);

                        default:
                            // code to be executed if n is different from case 1 and 2
                    }
                }

            });

        } else if (isIdName(selector)) {


            if (isChecked) {
                $('#' + oldParameter).attr("id", newParameter);
            } else {
                $('#' + newParameter).attr("id", oldParameter);
            }

        } else {
            if (isChecked) {

                switch (action) {
                    case 'add':
                        $(selector).addClass(newParameter);
                        break;
                    case 'replace':
                        $(selector).removeClass(oldParameter).addClass(newParameter);
                        break;
                    case 'changeCss':
                        $(selector).attr('style', css.new);
                        break;
                    default:
                        // code to be executed if n is different from case 1 and 2
                }
            } else {
                switch (action) {
                    case 'add':
                        $(selector).removeClass(newParameter);
                        break;
                    case 'replace':
                        $(selector).removeClass(newParameter).addClass(oldParameter);
                        break;
                    case 'changeCss':
                        $(selector).attr('style', css.old);
                    default:
                        // code to be executed if n is different from case 1 and 2
                }
            }

        }

    });

}


function setBgImage(selectors, checkboxSelector) {
    var isChecked;

    selectors.forEach(function (selector) {
        isChecked = $(checkboxSelector).prop('checked');

        if (isClassName(selector)) {
            $(selector).each(function () {
                var originalSrc = $(this).attr('original-src');
                var carbonSrc = $(this).attr('carbon-src');

                if (isChecked) {
                    if ($(this).is('video')) {
                        $(this).attr("src", '');
                    }

                    if ($(this).is('img:visible') || $(this).is('iframe:visible')) {
                        $(this).attr("src", carbonSrc);
                    } else {
                        $(this).css('background-image', carbonSrc);
                    }

                } else {
                    if ($(this).is('img:visible') || $(this).is('video') || $(this).is('iframe:visible')) {
                        $(this).attr("src", originalSrc);
                    } else {
                        $(this).css('background-image', originalSrc);
                    }
                }
            });

        } else {

            var originalSrc2 = $(selector).attr('original-src');
            var carbonSrc2 = $(selector).attr('carbon-src');

            if (isChecked) {
                if ($(selector).is('img:visible') || $(selector).is('iframe:visible')) {
                    $(selector).attr("src", carbonSrc2);
                } else {
                    $(selector).css('background-image', carbonSrc2);
                }
            } else {
                if ($(selector).is('img:visible') || $(selector).is('video') || $(selector).is('iframe:visible')) {
                    $(selector).attr("src", originalSrc2);
                } else {
                    $(selector).css('background-image', originalSrc2);
                }
            }
        }

        localStorage.setItem('backgroundToggleChecked', isChecked);

        var lowCarbonText = $(checkboxSelector).attr('low-cabon-text');
        var fullExperienceText = $(checkboxSelector).attr('full-experience-text');
        var spanText = isChecked ? fullExperienceText : lowCarbonText;
        $('.toggle-span').text(spanText);
    });
}

var storedCheckedState = localStorage.getItem('backgroundToggleChecked');
if (storedCheckedState === 'true') {
    $('.toggleCheckbox').prop('checked', true);
}


$('.toggleCheckbox').change(function () {
    $('.toggleCheckbox').prop('checked', $(this).prop('checked'));
    setBgImage(['#rightImg', '#leftImg', '.box-link__figure', '.card__bg', '.image-wrapper', '.carbonized', '.bg-media', '#fields-map-img'], '.toggleCheckbox');
    setDarkMode(elementInfoArray, '.toggleCheckbox');
});

// Trigger the change event on page load
$('.toggleCheckbox').trigger('change');
</script>

</body>
</html>
