<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>trackerv28.html</title>
</head>
<body>

<script>
;(() => {
  const Tracker = {
    init: (config) => {
      Tracker.config = config
      Tracker.log(`Initialised`, 'log')
      Tracker.nonce = crypto.randomUUID()

      window.onload = () => Tracker.setup()
    },
    refresh: () => {
      Tracker.setup()
    },
    setup: () => {
      Tracker.assignTracker()
      Tracker.eventBind()
    },
    assignTracker: () => {
      window.Tracker = Object.assign(Tracker, window.Tracker)
    },
    handlerCaller: (el) => {},
    urlEvent: () => {
      if (!Tracker.config.watchers) {
        return
      }
      const keys = Object?.keys(Tracker.config.watchers.params)
      const searchParams = new URLSearchParams(window.location.search)
      keys.map((key) => {
        if (
          searchParams.get(Tracker?.config?.watchers?.params[key].paramName)
        ) {
          Tracker.handlers[Tracker?.config?.watchers?.params[key].eventName]()
          let url = new URL(window?.location?.href)
          url.searchParams.delete(
            Tracker?.config?.watchers?.params[key]?.paramName
          )
          history.replaceState(history.state, '', url.href)
        }
      })
    },
    eventBind: (el) => {
      Tracker.urlEvent()
      let nodes = []

      if (el) {
        nodes = [el]
      } else {
        nodes = [
          ...document.querySelectorAll(`[${Tracker.config.selectors.track}]`)
        ]
      }
      nodes.map((node) => {
        let el = node,
          handler = el.getAttribute(Tracker.config.selectors.track),
          eventType = el.getAttribute(Tracker.config.selectors.type)
            ? el.getAttribute(Tracker.config.selectors.type).split('|')
            : ['click']
        if (typeof Tracker.handlers[handler] !== 'undefined') {
          if (eventType[0] === 'impression') {
            const observer = new IntersectionObserver((entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  Tracker.handlers[handler](el)
                }
              })
            })
            observer.observe(el)
          } else if (eventType[0] === 'onload') {
            Tracker.handlers[handler](el)
          } else {
            el.addEventListener(eventType, Tracker.handlers[handler])
          }
        } else {
          Tracker.log(`Hanlder ${handler} not found on element: %o`, node)
        }
      })
    },
    translateSku: (sku) => {
      if (sku?.toString().includes('~')) {
        return sku.split('~')?.[1]
      } else if (sku == null) {
        return ''
      }
      return sku
    },
    getAttributes: (el) => {
      const target = el.currentTarget
      const store = target?.getAttribute(Tracker.config.selectors.store)
      const type = target?.getAttribute(Tracker.config.selectors.type)
      const track = target?.getAttribute(Tracker.config.selectors.track)
      return { store, type, track }
    },
    push: (obj, config) => {
      Tracker.log(`Pushed event: ${JSON.stringify(obj)}`, 'log')
      if (config?.commerce) {
        window.dataLayer.push({ commerce: true })
      }
      if (window.dataLayer) {
        window.dataLayer.push(obj)
      }
    },
    marshalPubSub: (
      operationName,
      url,
      eventData,
      legacyRayId,
      experiments
    ) => {
      const rayId =
        legacyRayId ||
        window.__xAltitudeHorizonRay__ ||
        Tracker.store.get('rayId')?.value ||
        'unknown'
      const legacyData = {
        ...eventData,
        ray_ids: [rayId],
        nonce: Tracker.nonce,
        server: {
          elysium_version: Tracker.trackApiConfig.elysium_config.version
        },
        request: {
          start_timestamp: Date.now(),
          url: url
        },
        origin: {
          referrer: document.referrer
        },
        property: {
          site_id: Tracker.trackApiConfig.elysium_config.site_id,
          channel: Tracker.trackApiConfig.elysium_config.channel,
          subsite: Tracker.trackApiConfig.elysium_config.subsite,
          locale: Tracker.store.get('locale')?.value
        },
        experiments
      }
      const basket = Tracker.store.get('basket')
      const cart = {
        items: basket?.items?.map((item) => {
          return {
            product_group: {
              id: parseInt(Tracker.translateSku(item?.product?.product?.sku)),
              selected_variant: {
                price: {
                  currency: Tracker.store.get('currency'),
                  value: parseFloat(item?.totalChargePrice?.amount)
                },
                sku: parseInt(Tracker.translateSku(item?.id))
              },
              total_variants: item.product.product?.variants?.length || null
            },
            quantity: item?.quantity
          }
        }),
        total_size: basket?.totalQuantity || 0,
        total_price: {
          currency: Tracker.store.get('currency'),
          value: parseFloat(basket?.chargePrice?.amount)
        }
      }

      if (cart.items?.length) {
        legacyData.cart = cart
      }

      const payload = {
        operationName: operationName,
        metadata: {},
        path: url,
        version: 'altitude',
        rayId: rayId,
        currency:
          Tracker.store.get('currency') || Tracker.store.get('curr')?.value,
        shippingDestination: Tracker.store.get('ship')?.value,
        locale: Tracker.store.get('locale')?.value
      }

      if (Object?.keys(legacyData).length) payload.legacy = legacyData
      return payload
    },
    pushToTrackAPI: async (payload) => {
      const trackUrl = Tracker.trackApiConfig.trackAPIUrl
      if (!trackUrl || Tracker.config.dev) return
      const dataBlob = new Blob([JSON.stringify(payload)], {
        type: 'application/json'
      })
      navigator.sendBeacon(trackUrl, dataBlob)
    },
    sendPubSubEvent: async (operationName, eventData, legacyRayId = null) => {
      const experiments = []
      if (
        window.__EXPERIMENTS__ &&
        typeof window.__EXPERIMENTS__ === 'string'
      ) {
        const chunks = window.__EXPERIMENTS__?.split(',')
        chunks?.forEach((pair) => {
          const [name, value] = pair?.split(':')
          if (name && value) {
            experiments.push({ name, value })
          }
        })
      }
      const payload = Tracker.marshalPubSub(
        operationName,
        window.location.pathname + window.location.search,
        eventData,
        legacyRayId,
        experiments
      )
      return Tracker.pushToTrackAPI(payload)
    },
    log: (message, type = 'warn') => {
      if (Tracker?.config?.debug) {
        type === 'warn' && console.warn('[Tracker]: %s', message)
        type === 'log' && console.log('[Tracker]: %s', message)
      }
    },
    translateTarget: (e) => {
      if (e instanceof Event) {
        return e.currentTarget.getAttribute(Tracker.config.selectors?.store)
      } else if (e instanceof HTMLElement) {
        return e.getAttribute(Tracker.config.selectors?.store)
      } else if (e?.store) {
        return e?.store
      } else {
        return e
      }
    },
    handlers: {
      performanceData: (CWVObject, perfDataObject) => {
        const experiments = []
        if (window.__EXPERIMENTS__) {
          const chunks = window.__EXPERIMENTS__?.split(',')
          chunks?.forEach((pair) => {
            const [name, value] = pair?.split(':')
            if (name && value) {
              experiments.push({ name, value })
            }
          })
        }
        const perfData = {
          request: {
            server_timestamp: null,
            client_timestamp: new Date(Date.now()).toISOString(),
            url: window.location.href
          },
          experiments: experiments,
          errors: [
            {
              type: null,
              label: null
            }
          ],
          timing: {
            backend_load_time:
              perfDataObject?.navigationTiming?.backendLoadTime,
            cache_time: perfDataObject?.navigationTiming?.cacheTime,
            connection_time: perfDataObject?.navigationTiming?.connectionTime,
            dns_time: perfDataObject?.navigationTiming?.dnsTime,
            dom_interactive_time:
              perfDataObject?.navigationTiming?.domInteractiveTime,
            dom_parsing_time: perfDataObject?.navigationTiming?.domParsingTime,
            dom_ready_time: perfDataObject?.navigationTiming?.domReadyTime,
            first_paint_time: perfDataObject?.navigationTiming?.firstPaintTime,
            frontend_load_time:
              perfDataObject?.navigationTiming?.frontendLoadTime,
            load_event_time: perfDataObject?.navigationTiming?.loadEventTime,
            navigation_time: perfDataObject?.navigationTiming?.navigationTime,
            redirect_time: perfDataObject?.navigationTiming?.redirectTime,
            first_contentful_paint_time: CWVObject?.fcp || null,
            first_input_delay: CWVObject?.fid || null,
            largest_contentful_paint_time: CWVObject?.lcp || null,
            first_byte_time: CWVObject?.ttfb || null
          },
          score: {
            cumulative_layout_shift: CWVObject?.cls || null
          },
          nonce: Tracker.nonce,
          device: perfDataObject?.device,
          page: perfDataObject?.page,
          network: perfDataObject?.network,
          abtasty: [
            {
              name: null,
              time_to_first_byte: null,
              transfer: null,
              total: null,
              encoded_file_size: null
            }
          ]
        }
        Tracker.pushToTrackAPI({
          operationName: 'perfData',
          metaData: { destination: 'performanceData' },
          eventData: perfData
        })
      },
      // Page Load
      pageLoad: (e) => {
        Tracker.push(window?.Tracker?.store?.pageInfo)
      },

      // ReEngagement Modal
      reEngOpen: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'newsletter_signup_shown',
          eventData: {
            eventCategory: 'reEngagement Tooltip Modal',
            eventAction: 'Shown',
            eventLabel: 'reEngagement Modal Message',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reEngClicked: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'newsletter_signup_clicked',
          eventData: {
            eventCategory: 'reEngagement Tooltip Modal',
            eventAction: 'Clicked',
            eventLabel: 'Continue Modal Button',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reEngComplete: (el) => {
        const elyEvent = {
          event: 'customEvent',
          event_name: 'newsletter_signup_complete',
          eventData: {
            eventCategory: 'newsletter',
            eventAction: 'successful sign-up',
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },

      // Widget Track
      widgetTrack: (e) => {
        const widgetKey = e.parentElement.dataset.component

        const ecommerceEvent = {
          event: 'ecom_event',
          event_name: 'view_promotion',
          ecommerce: {
            items: [
              {
                promotion_name: widgetKey,
                promotion_id: Tracker.store.get('widgets')[widgetKey] ?? ''
              }
            ]
          }
        }
        Tracker.push(ecommerceEvent, { commerce: true })
      },

      // Navigation
      navigationHeader: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'navigation_header',
          action: `Clicked ${window.tenantConfig?.application?.siteName}`,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${window.tenantConfig?.application?.siteName}`,
            eventLabel: window.tenantConfig?.application?.livedomain,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      navigationMenu: (el) => {
        const mainCategory = el.target.innerText

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'navigation_main_category',
          action: `Clicked ${mainCategory}`,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${mainCategory}`
          }
        }
        Tracker.push(elyEvent)
      },

      navigationSubnav: (el) => {
        const subCategory = el.target.innerText

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'navigation_sub_category',
          action: `Clicked ${subCategory}`,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${subCategory}`
          }
        }
        Tracker.push(elyEvent)
      },

      navigationButton: (el) => {
        const button =
          el.target.innerText ||
          el.target.getAttribute('data-title') ||
          el.target.getAttribute('alt')
        const hrefItems = el.target
          ?.getAttribute('href')
          ?.split('/')
          .filter((item) => item?.length > 1)
        const menuDivision = hrefItems?.[0] || button
        const menuSubDivision = hrefItems?.[1]
        const menuDepartment = hrefItems?.[2]

        const ga4Event =
          menuSubDivision && menuDepartment
            ? {
                event: 'navigation',
                navigation_element: 'main menu',
                navigation_type: 'main menu click',
                menu_division: `${menuDivision}`,
                menu_sub_division: `${menuSubDivision}`,
                menu_department: `${menuDepartment}`
              }
            : menuSubDivision
              ? {
                  event: 'navigation',
                  navigation_element: 'main menu',
                  navigation_type: 'main menu click',
                  menu_division: `${menuDivision}`,
                  menu_sub_division: `${menuSubDivision}`
                }
              : {
                  event: 'navigation',
                  navigation_element: 'main menu',
                  navigation_type: 'main menu click',
                  menu_division: `${menuDivision}`
                }
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'navigation_header',
          action: `Clicked ${button}`,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${button}`
          }
        }

        menuDivision && Tracker.push(ga4Event)
        button && Tracker.push(elyEvent)
      },

      clickUSP: (el) => {
        let usp = Tracker.translateTarget(el)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'responsive_usp_bar',
          action: `click ${usp}`,
          click_url: '',
          component: 'Responsive USP bar',
          eventData: {
            eventCategory: 'Widget Track',
            eventAction: usp,
            eventLabel: 'Responsive USP bar',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      // Search
      search: (e) => {
        const searchInfo = window.Tracker.store.get('searchInfo')

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'search',
          search_term: searchInfo?.input,
          search_results: searchInfo?.resultsNumber,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${searchInfo?.input ?? ''}`,
            eventLabel: window?.location?.pathname + window?.location?.search,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
        const store = Tracker.translateTarget(e)
        const pageData = Tracker.store.get(store)
        Tracker.sendPubSubEvent(
          'Search',
          {
            event: {
              type: 'search'
            },
            page: {
              search: {
                query: pageData.query || '',
                total_results: pageData.total
              },
              items: pageData.products?.map((product) => {
                return {
                  product_group: {
                    selected_variant: {
                      price: {
                        currency:
                          product?.defaultVariant?.price?.price?.currency ||
                          product?.cheapestVariant?.price?.price?.currency,
                        value: parseFloat(
                          product?.defaultVariant?.price?.price?.amount ||
                            product?.cheapestVariant?.price?.price?.amount
                        )
                      },
                      sku: parseInt(product?.sku)
                    },
                    total_variants: product?.variants?.length
                  }
                }
              })
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },
      suggestedSearchQueries: (el) => {
        let query = Tracker.translateTarget(el)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'search',
          actions: 'search suggestions',
          search_term: query,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${query}`,
            eventLabel: `/search/?q=${query}`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      suggestedSearchProduct: (el) => {
        const sku = Tracker.translateTarget(el)
        const product = Tracker.store.get('suggestedProducts')[sku]

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'search',
          actions: 'product details',
          input: product,
          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: `Clicked ${product?.product_id}:${product?.product_name}`,
            eventLabel: product?.url,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      // Basket
      goToBasket: (el) => {
        const key = Tracker.translateTarget(el)

        const quantity = Tracker.store.get(key)

        const elyEvent = {
          event: 'Link',

          eventData: {
            eventCategory: 'Link',
            eventAction: 'Go To Basket',
            eventLabel: quantity,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      viewBasket: () => {
        const basketInfo = Tracker.store.get('pageInfo')

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'view_cart',
          action: 'view basket page',
          ecommerce: {
            value: parseInt(basketInfo?.basketTotal),
            items: [basketInfo?.basketProducts]
          }
        }
        Tracker.push(elyEvent)
      },

      clickViewBasket: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'click_view_cart',

          eventData: {
            eventCategory: 'Navigation Header',
            eventAction: 'Clicked View Basket',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      updateCart: (e) => {
        const item = Tracker.store.get(e)
        Tracker.sendPubSubEvent('UpdateCart', {
          event: {
            type: 'cart_interaction_event',
            subtype: 'quantity_change',
            items: [
              {
                product_group: {
                  selected_variant: {
                    price: {
                      currency: Tracker.store.get('currency'),
                      value: parseFloat(item?.price) * parseInt(item?.quantity)
                    },
                    sku: parseInt(Tracker.translateSku(item?.item_id))
                  }
                },
                quantity: parseInt(item?.quantity)
              }
            ]
          }
        })
      },
      supersize: (e) => {
        let item = Tracker.store.get('basket')[Tracker.translateSku(e)]
        Tracker.sendPubSubEvent('Supersize', {
          event: {
            type: 'cart_supersize_event',
            subtype: '',
            items: [
              {
                product_group: {
                  selected_variant: {
                    price: {
                      currency: Tracker.store.get('currency'),
                      value: parseFloat(item?.value) * parseInt(item?.quantity)
                    },
                    sku: parseInt(Tracker.translateSku(e))
                  }
                },
                quantity: parseInt(item?.quantity)
              }
            ]
          }
        })
      },
      addToCart: (e) => {
        let data =
          Tracker.store.get('products')?.[Tracker.translateSku(e)] ||
          Tracker.store.get('basket')?.[Tracker.translateSku(e)]
        const item = Tracker.store.get(e)

        const elyEvent = {
          event: 'elysiumEvent',
          eventData: {
            eventCategory: 'Product | AddToBasket',
            eventAction: 'success',
            eventLabel: data?.item_id,
            eventLabelValue: data?.item_name
          },
          eventPage: window?.location?.pathname
        }
        const ecommerceEvent = {
          event: 'ecom_event',
          event_name: 'add_to_cart',
          ecommerce: {
            currencyCode: Tracker.store.get('currency'),
            value: data?.value,
            items: [
              {
                item_id: data?.item_id ?? '',
                item_name: data?.item_name ?? '',
                item_brand: data?.item_brand ?? '',
                price: data?.price ?? 'unknown',
                index: data?.index,
                discount: data?.discount ?? '',
                affiliation: data?.affiliation,
                coupon: data?.coupon,
                item_category: data?.item_category,
                item_list_name: data?.item_list_name,
                item_variant: data?.variant,
                quantity: data?.quantity ?? 0
              }
            ]
          }
        }
        Tracker.push(elyEvent)
        Tracker.push(ecommerceEvent)
        const basketItems = [item]

        Tracker.sendPubSubEvent('AddToCart', {
          event: {
            type: 'cart_interaction_event',
            subtype: 'initial_add',
            items: basketItems?.map((item) => ({
              product_group: {
                selected_variant: {
                  price: {
                    currency: Tracker.store.get('currency'),
                    value: parseFloat(item?.price) * parseInt(item?.quantity)
                  },
                  sku: parseInt(Tracker.translateSku(item?.item_id))
                }
              },
              quantity: parseInt(item?.quantity)
            }))
          }
        })
      },

      removeFromCart: (e) => {
        // Clone of the product from basket store before the basket item was removed
        let data =
          Tracker.store.get('product')?.[Tracker.translateSku(e)] ||
          Tracker.store.get('basket')?.[Tracker.translateSku(e)]
        // individual product
        const item = Tracker.store.get(e)
        const elyEvent = {
          event: 'elysiumEvent',
          eventData: {
            eventCategory: 'Product | Remove From Basket',
            eventAction: 'success',
            eventLabel: data?.item_id,
            eventLabelValue: data?.item_name
          },
          eventPage: window?.location?.pathname
        }
        const ecommerceEvent = {
          event: 'ecom_event',
          event_name: 'remove_from_cart',
          ecommerce: {
            currencyCode: Tracker.store.get('currency') ?? '',
            value: data?.value,
            items: [
              {
                item_id: data?.item_id ?? '',
                item_name: data?.item_name ?? '',
                item_brand: data?.item_brand ?? '',
                price: data?.price ?? 'unknown',
                index: data?.index,
                discount: data?.discount,
                affiliation: data?.affiliation,
                coupon: data?.coupon,
                item_category: data?.item_category,
                item_list_name: data?.item_list_name,
                item_variant: data?.variant,
                quantity: data?.quantity ?? 0
              }
            ]
          }
        }
        Tracker.push(ecommerceEvent)
        Tracker.push(elyEvent)
        const items = [item]
        Tracker.sendPubSubEvent('RemoveFromCart', {
          event: {
            type: 'cart_interaction_event',
            subtype: 'trash',
            items: items?.map((item) => ({
              product_group: {
                selected_variant: {
                  price: {
                    currency: Tracker.store.get('currency'),
                    value:
                      parseFloat(Math.abs(item.price)) *
                      parseInt(Math.abs(item.quantity))
                  },
                  sku: parseInt(Tracker.translateSku(item?.item_id))
                }
              },
              quantity: parseInt(Math.abs(item.quantity))
            }))
          }
        })
      },
      goToCheckout: () => {
        const event = {
          event: 'elysiumEvent',
          event_name: 'go_to_checkout',
          eventData: {
            eventAction: 'Go To Checkout'
          }
        }

        Tracker.push(event)
      },
      goToBasket: () => {
        const event = {
          event: 'elysiumEvent',
          event_name: 'go_to_basket',
          quantity: Tracker.store.get('basketQuantity'),
          eventData: {
            eventAction: 'Go To Basket'
          }
        }
        Tracker.push(event)
      },

      basketProductClick: (e) => {
        let clickedItem = Tracker.translateTarget(e)
        const item = Tracker.store.get('basket')[clickedItem]

        const elyEvent = {
          event: 'elysiumEvent',
          eventData: {
            eventCategory: 'Product | AddToBasket',
            eventAction: 'success',
            eventLabel: clickedItem,
            eventLabelValue: item?.item_name
          },
          eventPage: window?.location?.pathname
        }

        Tracker.push(elyEvent)
      },

      viewFreeGift: (e) => {
        const id = Tracker.translateTarget(e)
        const elyEvent = {
          event: 'elysiumEvent',
          eventData: {
            eventCategory: 'freeProductSelection',
            eventAction: 'ViewedFreeGift',
            eventLabel: id
          },
          eventPage: window?.location?.pathname
        }

        Tracker.push(elyEvent)
      },

      selectFreeGift: (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'add_to_cart',
          currencyCode: window.siteObj.currency ?? '',
          ecommerce: {
            product_name: e
          },
          eventData: {
            eventCategory: 'freeProductSelection',
            eventAction: 'Add Item',
            eventLabel: e
          },
          eventPage: window?.location?.pathname
        }

        Tracker.push(elyEvent)
      },

      removeFreeGift: (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'remove_from_cart',
          currencyCode: window.siteObj.currency ?? '',
          ecommerce: {
            product_name: e
          },
          eventData: {
            eventCategory: 'freeProductSelection',
            eventAction: 'Removing Item',
            eventLabel: e
          },
          eventPage: window?.location?.pathname
        }
        Tracker.push(elyEvent)
      },

      applyCouponSuccess: (e) => {
        let coupon = Tracker.translateTarget(e)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'apply_coupon_success',
          coupon_code: coupon,
          eventData: {
            eventCategory: 'Discount codes',
            eventAction: 'Valid',
            eventLabel: coupon,
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
        Tracker.handlers.applyDiscountCode({ message: e.message })
      },

      applyCouponFailure: (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'apply_coupon_fail',
          coupon_code: e.promoCode,
          validation_errors: e.errorMessage,
          eventData: {
            eventCategory: 'Discount codes',
            eventAction: 'Inactive',
            eventLabel: e.promoCode,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
        Tracker.handlers.applyDiscountCode({ message: e.errorMessage })
      },
      applyDiscountCode: (e) => {

        Tracker.sendPubSubEvent('ApplyDiscountCodeToBasket', {
          event: {
            type: 'discount_code_event'
          }
        })
      },
      // Wish list
      wishlistLoggedout: (el) => {
        let item
        if (Tracker.store.get('productList')) {
          item = Tracker.store.productList.items[el]
        } else if (Tracker.store.get('products')) {
          item = Tracker.store.products[el]
        }

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'wishlist_logged_out',
          product_id: el,
          product_name: item.item_name,
          eventData: {
            eventCategory: 'Wishlist Engagement',
            eventAction: 'Clicked add to wishlist | Logged out',
            eventLabel: el,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      wishlistLogin: (el) => {
        const sku = el?.target.dataset.trackPush
        let item
        if (Tracker.store.get('productList')) {
          item = Tracker.store.productList.items[sku]
        } else if (Tracker.store.get('products')) {
          item = Tracker.store.products[sku]
        }
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'wishlist_login',
          product_id: sku,
          product_name: item.item_name,
          eventData: {
            eventCategory: 'Wishlist Engagement',
            eventAction: 'clicked login link',
            eventLabel: sku,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      wishlistRegister: (el) => {
        let item
        if (Tracker.store.get('productList')) {
          item = Tracker.store.productList.items[el]
        } else if (Tracker.store.get('products')) {
          item = Tracker.store.products[el]
        }

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'wishlist_login',
          product_id: id,
          product_name: item.item_name,
          eventData: {
            eventCategory: 'Wishlist Engagement',
            eventAction: 'clicked register link',
            eventLabel: id,
            eventLabeValue: item?.item_name,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      wishlistAdded: (el) => {
        let item
        if (Tracker.store.get('productList')) {
          item = Tracker.store.productList.items[el]
        } else if (Tracker.store.get('products')) {
          item = Tracker.store.products[el]
        }

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'add_to_wishlist',
          product_id: item?.item_id,
          product_name: item?.item_name,
          // not clear we need ecommerce object
          ecommerce: {
            currency: window?.siteObj?.currency,
            page_type: window?.location?.pathname,
            item_list_name: item?.item_list_name,
            items: [
              {
                item_id: item?.item_id,
                item_name: item?.item_name,
                item_brand: item?.brand,
                price: item?.price,
                index: item?.index,
                discount: item?.discount,
                affiliation: item?.affiliation,
                coupon: item?.coupon,
                item_category: item?.item_category,
                item_list_name: item?.item_list_name,
                item_variant: item?.variant,
                quantity: 1
              }
            ]
          },

          eventData: {
            eventCategory: 'Wishlist Engagement',
            eventAction: 'added to wishlist',
            eventLabel: item?.item_id,
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },

      wishlistRemove: (el) => {
        let item
        if (Tracker.store.get('productList')) {
          item = Tracker.store.productList.items[el]
        } else if (Tracker.store.get('products')) {
          item = Tracker.store.products[el]
        }

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'wishlist_removed',
          product_id: item?.item_id,
          product_name: item?.item_name,
          eventData: {
            eventCategory: 'Wishlist Engagement',
            eventAction: 'removed from wishlist',
            eventLabel: item?.item_id,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
        Tracker.sendPubSubEvent('RemoveFromWishlist', {
          event: {
            type: 'wishlist_interaction_event',
            subtype: 'trash',
            items: [
              {
                product_group: {
                  id: parseInt(el)
                },
                quantity: 1
              }
            ]
          }
        })
      },

      // PLP
      plp: (e) => {
        const store = Tracker.translateTarget(e)
        const pageData = Tracker.store.get(store)
        Tracker.sendPubSubEvent(
          'ProductList',
          {
            event: {
              type: 'product_list_visit'
            },
            page: {
              items: pageData.products?.map((product) => {
                return {
                  product_group: {
                    selected_variant: {
                      price: {
                        currency: window.siteObj.currency,
                        value: parseFloat(product?.price?.value)
                      },
                      sku: parseInt(product?.sku)
                    },
                    total_variants: product?.totalVariant
                      ? parseInt(product?.totalVariants)
                      : null
                  }
                }
              })
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },

      home: (e) => {
        const store = Tracker.translateTarget(e)
        const pageData = Tracker.store.get(store)
        Tracker.sendPubSubEvent(
          'Homepage',
          {
            event: {
              type: 'homepage'
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },

      viewItemList: () => {
        const list = window.Tracker.store.get('productList')

        const gaEvent = {
          event: 'view_item_list',
          currencyCode: list?.currency,
          ecommerce: {
            item_list_id: list?.id ?? '',
            item_list_name: list?.title ?? '',
            items: list?.items && Object.values(list?.items)
          },
          platformType: 'Altitude'
        }
        Tracker.push(gaEvent)
      },

      ReadMoreClicked: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'read_more_click',
          eventData: {
            eventCategory: 'Read More Button',
            eventAction: `Clicked`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      selectItem: (el) => {
        const item = Tracker.translateTarget(el)
        const product = Tracker.store.get('productList').items
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'select_item',
          action: 'Click product image',
          product_id: product[item]?.item_id,
          product_name: product[item]?.item_name,
          ecommerce: {
            item_list_id: product[item].item_list ?? '',
            item_list_name: product[item].title ?? '',
            items: [
              {
                item_id: product[item].item_id,
                item_list: product[item].item_list,
                item_brand: product[item].brand,
                price: product[item].price,
                value: product[item].value,
                discount: product[item].discount,
                coupon: product[item].coupon,
                affiliation: product[item].affiliation,
                index: product[item].index,
                item_list_id: product[item].item_id,
                item_list_name: product[item].item_list,
                item_variant: product[item].variant,
                quantity: 1
              }
            ]
          },

          eventData: {
            eventCategory: 'List Page Navigation',
            eventAction: ` ${product[item]?.url}| Click product image`,
            eventLabel: product[item]?.item_id,
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },

      showFilter: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'filter',
          category: 'product category',
          action: 'opens',
          type: 'amino acids',
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'Opens',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      closeFilter: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'filter',
          category: 'product category',
          action: 'closes',
          type: 'amino acids',
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'Closes',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      filterOpen: () => {
        const event = {
          event: 'elysiumEvent',
          event_name: 'filter_open',
          category: '',
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'Opens',
            type: 'amino acids',
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(event)
      },

      filter: (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'filter_applied',
          filter: e,
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'add',
            eventLabel: e,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      addFilter: (facetName, facetValue) => {
        const ga4Event = {
          event: 'filter_added',
          filter_category: facetName,
          filter_selection: facetValue
        }

        Tracker.push(ga4Event)
      },

      filterRemoved: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'filter_removed',
          category: el.eventCategory,
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'Removes',
            eventLabel: el.eventCategory,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      filterClear: (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'filter_cleared',
          eventData: {
            eventCategory: 'responsiveFacets',
            eventAction: 'remove',
            eventLabel: 'all facets',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sortByOpen: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'sort_by_open',
          eventData: {
            eventCategory: 'Facet Engagement',
            eventAction: 'Opens Sort By',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sortByClose: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'sort_by_closed',
          eventData: {
            eventCategory: 'Facet Engagement',
            eventAction: 'Closes Sort By',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sortByClick: (el) => {
        const sortType = Tracker.translateTarget(el)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'sort_by_clicked',
          sort_method: sortType,
          type: sortType,
          eventData: {
            eventCategory: 'Facet Engagement',
            eventAction: 'Selects Sort By',
            eventLabel: sortType,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      viewPromotion: (e) => {
        let promo = Tracker.translateTarget(e)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'pap_banner_viewed',
          component: 'promo',
          ecommerce: {
            items: [
              {
                promotion_id: '',
                promotion_name: promo,
                creative_name: '',
                creative_slot: '',
                location_id: ''
              }
            ]
          },
          eventData: {
            eventCategory: 'Pap | papBanner',
            eventAction: 'Viewed',
            eventLabel: 'papBanner component',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      promoClick: (el) => {
        const promo = Tracker.translateTarget(el)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'pap_banner_description_clicked',
          component: 'promo',
          promotion_id: '',
          promotion_name: promo,
          creative_name: '',
          creative_slot: '',
          location_id: '',
          eventData: {
            eventCategory: 'Pap | papBanner',
            eventAction: 'Clicked',
            eventLabel: 'papBanner component',
            eventPage: window?.location?.pathname
          }
        }
        const ga4Event = {
          event: 'ecom_event',
          event_name: 'select_promotion',
          promotion_name: promo
        }

        Tracker.push(ga4Event)
        Tracker.push(elyEvent)
      },

      colorSwatchClicked: (el) => {
        let item
        let clickedSwatch = Tracker.translateTarget(el)

        item = Tracker.store.products[clickedSwatch]
        const itemColor = el.target.dataset.colour

        const event = {
          event: 'elysiumEvent',
          event_name: 'colour_select',
          action: `clicked color: ${itemColor} swatch`,
          sku: item?.item_id,
          colour: itemColor,
          title: item?.item_name
        }
        Tracker.push(event)
      },

      promoButtonClick: (e) => {
        const promo = Tracker.translateTarget(e)

        const elyEvent = {
          event: 'elysiumEvent',
          eventData: {
            eventCategory: 'Pap | papDescriptionCTA',
            eventAction: 'Clicked',
            eventLabel: 'papDescription component',
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },

      // PDP
      viewItem: (e) => {
        let itemSku = Tracker.translateTarget(e)
        let data = Tracker.store.get('products')[itemSku]

        const elyEvent = {
          event: 'ecom_event',
          event_name: 'view_item',
          ecommerce: {
            sku: data?.item_id || '',
            name: data?.item_name || '',
            external_sku: data?.item_list_name || '',
            price: data?.value ?? 'unknown',
            item_brand: data?.item_brand ?? '',
            item_category: data?.item_category,
            rrp: data?.price,
            currencyCode: Tracker.store.get('currency') ?? '',
            value: data?.value,
            items: [
              {
                item_id: data?.item_id ?? '',
                item_name: data?.item_name ?? '',
                item_brand: data?.item_brand ?? '',
                price: data?.price ?? 'unknown',
                index: data?.index,
                discount: data?.discount,
                affiliation: data?.affiliation,
                coupon: data?.coupon,
                item_category: data?.item_category,
                item_list_name: data?.item_list_name,
                item_variant: data?.variant,
                quantity: data?.quantity ?? 0
              }
            ]
          },
          eventData: {
            eventCategory: 'Product | Viewed',
            eventAction: 'Viewed',
            eventLabel: itemSku,
            eventLabelValue: [Tracker.store.get(itemSku)],
            eventPage: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },

      productDesView: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_description_viewed',
          component: 'productDescriptionComponent',
          eventData: {
            eventCategory: 'Product | Description',
            eventAction: 'Viewed',
            eventLabel: 'productDescription component',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      productImageScrolled: (el) => {
        const imgInx = Tracker.translateTarget(el)
        const indexInfo = window.Tracker.store.get('imageIndex')

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_image_scroll',
          index: indexInfo?.index,
          eventData: {
            eventCategory: 'ProductImageCarousel',
            eventAction: 'scroll',
            eventLabel: `Scrolled to image ${indexInfo?.index} `,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      productThumbnailClicked: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_image_click',
          carousel_nav: 'thumbnail',
          product_id: el?.id,
          product_name: el?.title,
          image_number: el?.index,
          eventData: {
            eventCategory: 'athenaProductImageCarousel',
            eventAction: 'click',
            eventLabel: `thumbnail`,
            eventLabelValue: el?.index,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      productDesClick: (el) => {
        const eventCategory = el.target.dataset.trackingPush

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_desciption_clicked',
          component: 'productDescriptionComponent',
          type: eventCategory,
          eventData: {
            eventCategory: 'Product | Description',
            eventAction: 'Clicked',
            eventLabel: `productDescription component clicked tab ${eventCategory}`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reviewViewed: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'review_viewed',
          component: 'ProductReviews component',
          eventData: {
            eventCategory: 'Product | Review',
            eventAction: 'Viewed',
            eventLabel: 'athenaProductReviews component',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reviewVoted: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'review_voted',
          component: 'ProductReviews component',
          voted: el.voted,
          id: el.id,
          eventData: {
            eventCategory: 'Product | Voted',
            eventAction: 'Voted',
            eventLabel: `athenaProductReviews component voted ${el.voted} ${el.id}`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reviewReported: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_reported',
          eventData: {
            eventCategory: 'Product | Reported',
            eventAction: 'Reported',
            eventLabel: `athenaProductReviews component reported ${el.id}`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reviewCreated: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'review_create',
          product_id: el.product_id,
          product_name: el.product_name,
          rating: el?.rating,
          eventData: {
            eventCategory: 'Product | Reported',
            eventAction: 'Reported',
            eventLabel: `athenaProductReviews component reported ${el?.product_id}`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      reviewPage: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'review_pagination',
          eventData: {
            eventCategory: 'Product | Review',
            eventAction:
              el === 'next' ? 'Next Review Page' : 'Previous Review Page',
            eventLabel: `athenaProductReviews component go ${el} page`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      // PDP
      productImageNav: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_image_nav',
          action: `${el?.eventAction} image`,
          producnt_id: el?.id,
          product_name: el?.title,
          eventData: {
            eventCategory: 'ProductImageCarousel',
            eventAction: 'click',
            eventLabel: `${el?.eventAction} image`,
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sizeGuideClick: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_size_guide',
          action: 'Clicked',
          component: 'productSizeGuide component clicked button',
          eventData: {
            eventCategory: 'Product | Size Guide',
            eventAction: 'Clicked',
            eventLabel: 'productSizeGuide',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sizeGuideModalOpen: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_size_guide',
          action: 'Clicked',
          component: 'productSizeGuide component clicked button',
          path: window?.location?.pathname,
          eventData: {
            eventCategory: 'Product | Size Guide modal',
            eventAction: 'Shown',
            eventLabel: 'productSizeGuide',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },

      sizeGuideModalClose: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'product_size_guide_closed',
          component: 'product size guide modal',
          path: window?.location?.pathname,
          eventData: {
            eventCategory: 'Product | Size Guide modal',
            eventAction: 'Closed',
            eventLabel: 'product Size Guide',
            eventPage: window?.location?.pathname
          }
        }
        Tracker.push(elyEvent)
      },
      updateMarketingPreferences: () => {
        Tracker.sendPubSubEvent('MarketingPreferenceUpdated', {
          event: {
            type: 'account_update',
            subtype: 'communication_preferences'
          }
        })
      },
      pageVisit: () => {
        Tracker.sendPubSubEvent(
          'PageVisit',
          {
            event: {
              type: 'page_visit'
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },
      productVisit: (e) => {
        const store = Tracker.translateTarget(e)
        const pageData = Tracker.store.get(store)
        const productData = Tracker.store.get('products')[pageData?.sku]
        const searchParams = new URLSearchParams(window.location.search)
        const selectedVariant = searchParams.get('variation')

        Tracker.sendPubSubEvent(
          'ProductVisit',
          {
            event: {
              type: 'product_visit'
            },
            page: {
              items: [
                {
                  product_group: {
                    id: parseInt(productData?.item_id),
                    selected_variant: {
                      price: {
                        currency: Tracker.store.get('currency'),
                        value: selectedVariant
                          ? parseFloat(
                              Tracker.store.get('products')?.[selectedVariant]
                                ?.price
                            )
                          : parseFloat(productData?.price)
                      },
                      sku: selectedVariant
                        ? parseInt(selectedVariant)
                        : parseInt(productData?.item_id)
                    }
                  }
                }
              ]
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },
      // ---> MTA handlers <---
      loginSuccess: () => {
        const elyEvent = {
          event: 'CustomEvent Account Creation',
          eventData: {
            eventCategory: 'login',
            eventAction: 'login success',
            eventLabel: 'Form'
          }
        }

        Tracker.push(elyEvent)
      },

      loginFailed: () => {
        const elyEvent = {
          event: 'custom_event',
          event_name: 'login_failed',
          method: Tracker.store.get('login_method')?.value,
          error_value: Tracker.store.get('login_error_value')?.value
        }
        Tracker.push(elyEvent)
      },

      logout: () => {
        const elyEvent = {
          event: 'custom_event',
          event_name: 'logout'
        }
        Tracker.push(elyEvent)
      },

      accountRegistrationSuccess: () => {
        const elyEvent = {
          event: 'custom_event',
          event_name: 'sign_up',
          method: Tracker.store.get('account_registration_method')?.value,
          user_id: Tracker.store.get('user_id')?.value
        }
        Tracker.push(elyEvent)
        Tracker.sendPubSubEvent('Login', {
          event: {
            type: 'login',
            subtype: 'account_creation'
          }
        })
      },

      accountRegistrationFail: () => {
        const elyEvent = {
          event: 'CustomEvent Account Creation',
          eventData: {
            eventCategory: 'login',
            eventAction: 'account created Failed',
            eventLabel: 'Form'
          }
        }

        Tracker.push(elyEvent)
      },
      checkoutStart: async (e) => {
        const items = Tracker.store.get('basket') || []
        const currency = Tracker.store.get('currency')

        const gaEvent = {
          event_name: 'begin_checkout',
          currencyCode: currency,
          Items: Object.values(items)
        }

        Tracker.push(gaEvent)
        const store = Tracker.translateTarget(e)
        const data = Tracker.store.get(store)
        return Tracker.sendPubSubEvent(
          'StartCheckout',
          {
            event: {
              type: 'checkout_start',
              subtype: 'standard_checkout'
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },
      guestCheckoutStart: async (e) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'continue_as_guest',
          category: 'Continue as guest',
          action: 'Clicked'
        }
        Tracker.push(elyEvent)

        const store = Tracker.translateTarget(e)
        const data = Tracker.store.get(store)
        return Tracker.sendPubSubEvent(
          'StartGuestCheckout',
          {
            event: {
              type: 'checkout_start',
              subtype: 'guest_checkout'
            }
          },
          window.__xAltitudeHorizonRay__
        )
      },
      // ---> MTA handlers <---
      pageNotFound: () => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'page_not_found',
          eventData: {
            eventCategory: 'Errors',
            eventAction: 'Page Not Found',
            path: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },
      emptyList: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'empty_page',
          eventData: {
            eventLabel: 'Empty List',
            eventLabelValue: el,
            path: window?.location?.pathname
          }
        }

        Tracker.push(elyEvent)
      },
      noSearchResult: (el) => {
        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'no_search_results',
          eventData: {
            eventLabel: 'No Search Results',
            eventLabelValue: el,
            path: window?.location?.pathname + window?.location?.search
          }
        }

        Tracker.push(elyEvent)
      },
      startPageSize: (el) => {
        const key = Tracker.translateTarget(el)
        const size = Tracker.store.get(key)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'start_page_size',
          height: size.height,
          width: size.width,
          eventData: {
            eventLabel: 'Start Page Size',
            eventLabelValue: { height: size.height, width: size.width },
            path: window?.location?.pathname + window?.location?.search
          }
        }

        Tracker.push(elyEvent)
      },
      outOfStock: (el) => {
        const item = window.Tracker.store.get(el)

        const elyEvent = {
          event: 'elysiumEvent',
          event_name: 'sold_out_product',
          eventData: {
            eventLabel: 'Sold Out Product',
            eventLabelValue: item,
            path: window?.location?.pathname + window?.location?.search
          }
        }
        Tracker.push(elyEvent)
      }
    },
    trackApiConfig: null,
    config: null,
    store: {
      get(k) {
        return Tracker.store[k]
      },
      set(k, v) {
        return (Tracker.store[k] = Tracker.store[k]
          ? Object.assign(Tracker.store[k], v)
          : v)
      }
    }
  }
  Tracker.assignTracker()
  if (typeof window.Tracker.load !== 'function') {
    Tracker.init({
      debug: true,
      selectors: {
        track: 'data-track',
        type: 'data-track-type',
        store: 'data-track-push'
      }
    })
  } else {
    window.Tracker.load()
  }
})()

</script>

</body>
</html>
