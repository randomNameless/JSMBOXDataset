<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>legacy-libs.min.html</title>
</head>
<body>

<script>
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).Sling=a()})(function(){return{SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",
REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"}});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).Util=a()})(function(){return{patchText:function(a,c){if(c)if("[object Array]"!==Object.prototype.toString.call(c))a=a.replace("{0}",c);else for(var b=0;b<c.length;b++)a=a.replace("{"+b+"}",c[b]);return a},getTopWindow:function(){var a=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;a.parent&&a!==a.parent&&a.parent.location.href;)a=a.parent}catch(c){}return a},setIFrameMode:function(a){this.iFrameTopWindow=
a||window},applyDefaults:function(){for(var a,c=arguments[0]||{},b=1;b<arguments.length;b++){a=arguments[b];for(var d in a){var e=a[d];a.hasOwnProperty(d)&&void 0!==e&&(c[d]=null===e||"object"!==typeof e||e instanceof Array?e instanceof Array?e.slice(0):e:this.applyDefaults(c[d],e))}}return c},getKeyCode:function(a){return a.keyCode?a.keyCode:a.which}}});
(function(a){"object"===typeof module&&module.exports?module.exports=a(require("@granite/util"),require("jquery")):window.Granite.HTTP=a(Granite.Util,jQuery)})(function(a,c){return function(){var b=null,d=/^(?:http|https):\/\/[^/]+(\/.*)\/(?:etc\.clientlibs|etc(\/.*)*\/clientlibs|libs(\/.*)*\/clientlibs|apps(\/.*)*\/clientlibs|etc\/designs).*\.js(\?.*)?$/,e=/[^\w-.~%:/?[\]@!$&'()*+,;=]/,f=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=!1,k={getSchemeAndAuthority:function(g){if(!g)return"";
g=f.exec(g);return null===g?"":[g[1],g[3]].join("")},getContextPath:function(){null===b&&(b=k.detectContextPath());return b},detectContextPath:function(){try{if(window.CQURLInfo)b=CQURLInfo.contextPath||"";else{for(var g=document.getElementsByTagName("script"),l=0;l<g.length;l++){var m=d.exec(g[l].src);if(m)return b=m[1]}b=""}}catch(n){}return b},externalize:function(g){try{0===g.indexOf("/")&&k.getContextPath()&&0!==g.indexOf(k.getContextPath()+"/")&&(g=k.getContextPath()+g)}catch(l){}return g},
internalize:function(g,l){if("/"===g.charAt(0))return b===g?"":b&&0===g.indexOf(b+"/")?g.substring(b.length):g;l||(l=document);l=k.getSchemeAndAuthority(l.location.href);var m=k.getSchemeAndAuthority(g);return l===m?g.substring(m.length+(b?b.length:0)):g},getPath:function(g){if(g)g=k.removeParameters(g),g=k.removeAnchor(g);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;g=window.location.pathname}g=k.internalize(g);var l=g.indexOf(".",g.lastIndexOf("/"));-1!==l&&(g=g.substring(0,
l));return g},removeAnchor:function(g){var l=g.indexOf("#");return 0<=l?g.substring(0,l):g},removeParameters:function(g){var l=g.indexOf("?");return 0<=l?g.substring(0,l):g},encodePathOfURI:function(g){for(var l=["?","#"],m=[g],n,p=0,q=l.length;p<q;p++)if(n=l[p],0<=g.indexOf(n)){m=g.split(n);break}e.test(m[0])&&(m[0]=k.encodePath(m[0]));return m.join(n)},encodePath:function(g){g=encodeURI(g);g=g.replace(/%5B/g,"[").replace(/%5D/g,"]");g=g.replace(/\?/g,"%3F");return g=g.replace(/#/g,"%23")},handleLoginRedirect:function(){if(!h){h=
!0;alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));var g=a.getTopWindow().document.location;g.href=k.externalize("/")+"?resource\x3d"+encodeURIComponent(g.pathname+g.search+g.hash)}},getXhrHook:function(g,l,m){return window.G_XHR_HOOK&&"function"===typeof G_XHR_HOOK?(g={url:g,method:l||"GET"},m&&(g.params=m),G_XHR_HOOK(g)):null},eval:function(g){"object"!==typeof g&&(g=c.ajax({url:g,type:"get",async:!1}));try{return JSON.parse(g.body?g.body:g.responseText)}catch(l){}return null}};
return k}()});
(function(a){"object"===typeof module&&module.exports?module.exports=a(require("@granite/http")):window.Granite.I18n=a(window.Granite.HTTP)})(function(a){return function(){var c={},b="/libs/cq/i18n/dict.",d=".json",e=void 0,f=!1,h=null,k={},g=!1;k.LOCALE_DEFAULT="en";k.PSEUDO_LANGUAGE="zz";k.PSEUDO_PATTERN_KEY="_pseudoPattern_";k.init=function(l){l=l||{};this.setLocale(l.locale);this.setUrlPrefix(l.urlPrefix);this.setUrlSuffix(l.urlSuffix)};k.setLocale=function(l){l&&(e=l)};k.getLocale=function(){"function"===
typeof e&&(e=e());return e||document.documentElement.lang||k.LOCALE_DEFAULT};k.setUrlPrefix=function(l){l&&(b=l,g=!0)};k.setUrlSuffix=function(l){l&&(d=l,g=!0)};k.getDictionary=function(l){l=l||k.getLocale();if(!c[l]){f=0===l.indexOf(k.PSEUDO_LANGUAGE);try{var m=new XMLHttpRequest,n=m.open,p=a.externalize;var q=l;if(g)var t=b+q+d;else{var u,r=document.querySelector("html");r&&(u=r.getAttribute("data-i18n-dictionary-src"));t=u?u.replace("{locale}",encodeURIComponent(q)).replace("{+locale}",q):b+q+
d}n.call(m,"GET",p.call(a,t),!1);m.send();c[l]=JSON.parse(m.responseText)}catch(v){}c[l]||(c[l]={})}return c[l]};k.get=function(l,m,n){var p;var q=k.getDictionary();var t=f?k.PSEUDO_PATTERN_KEY:n?l+" (("+n+"))":l;q&&(p=q[t]);p||(p=l);f&&(p=p.replace("{string}",l).replace("{comment}",n?n:""));l=p;if(m)if(Array.isArray(m))for(n=0;n<m.length;n++)l=l.replace("{"+n+"}",m[n]);else l=l.replace("{0}",m);return l};k.getVar=function(l,m){return l?k.get(l,null,m):null};k.getLanguages=function(){if(!h)try{var l=
a.externalize("/libs/wcm/core/resources/languages.overlay.infinity.json"),m=new XMLHttpRequest;m.open("GET",l,!1);m.send();var n=JSON.parse(m.responseText);Object.keys(n).forEach(function(p){p=n[p];p.language&&(p.title=k.getVar(p.language));p.title&&p.country&&"*"!==p.country&&(p.title+=" ("+k.getVar(p.country)+")")});h=n}catch(p){h={}}return h};k.parseLocale=function(l){if(!l)return null;var m=l.indexOf("_");0>m&&(m=l.indexOf("-"));if(0>m){var n=l;m=null}else n=l.substring(0,m),m=l.substring(m+1);
return{code:l,language:n,country:m}};return k}()});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).TouchIndicator=a()})(function(){var a={},c=[];return{debugWithMouse:!1,init:function(){var b=this,d=function(e){b.update(e.touches);return!0};document.addEventListener("touchstart",d);document.addEventListener("touchmove",d);document.addEventListener("touchend",d);this.debugWithMouse&&document.addEventListener("mousemove",function(e){e.identifer="fake";b.update([e]);return!0})},update:function(b){for(var d=
{},e=0;e<b.length;e++){var f=b[e],h=f.identifier,k=a[h];k||(k=c.pop(),k||(k=document.createElement("div"),k.style.visibility="hidden",k.style.position="absolute",k.style.width="30px",k.style.height="30px",k.style.borderRadius="20px",k.style.border="5px solid orange",k.style.userSelect="none",k.style.opacity="0.5",k.style.zIndex="2000",k.style.pointerEvents="none",document.body.appendChild(k)));d[h]=k;k.style.left=f.pageX-20+"px";k.style.top=f.pageY-20+"px";k.style.visibility="visible"}for(h in a)a.hasOwnProperty(h)&&
!d[h]&&(k=a[h],k.style.visibility="hidden",c.push(k));a=d}}});
(function(a){"object"===typeof module&&module.exports?module.exports=a():(window.Granite=window.Granite||{}).OptOutUtil=a()})(function(a){return function(){var c={},b=[],d=[];c.init=function(e){e?(b=e.cookieNames||[],d=e.whitelistCookieNames||[]):(b=[],d=[])};c.getCookieNames=function(){return b};c.getWhitelistCookieNames=function(){return d};c.isOptedOut=function(){for(var e=document.cookie.split(";"),f=0;f<e.length;f++){var h=e[f].split("\x3d")[0];h=String.prototype.trim?h.trim():h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
"");if(0<=c.getCookieNames().indexOf(h))return!0}return!1};c.maySetCookie=function(e){return!(c.isOptedOut()&&-1===c.getWhitelistCookieNames().indexOf(e))};return c}()});Granite.OptOutUtil.init(window.GraniteOptOutConfig);Granite.HTTP.detectContextPath();
(function(a,c){c.Granite=c.Granite||{};c.Granite.$=c.Granite.$||a;c._g=c._g||{};c._g.$=c._g.$||a;var b=Granite.HTTP;a.ajaxSetup({externalize:!0,encodePath:!0,hook:!0,beforeSend:function(d,e){"undefined"!==typeof G_IS_HOOKED&&G_IS_HOOKED(e.url)||(e.externalize&&(e.url=b.externalize(e.url)),e.encodePath&&(e.url=b.encodePathOfURI(e.url)));e.hook&&(d=b.getXhrHook(e.url,e.type,e.data))&&(e.url=d.url,d.params&&("GET"===e.type.toUpperCase()?e.url+="?"+a.param(d.params):e.data=a.param(d.params)))},statusCode:{403:function(d){"Authentication Failed"===
d.getResponseHeader("X-Reason")&&b.handleLoginRedirect()}}});a.ajaxSettings.traditional=!0})(jQuery,this);window._g=window._g||{};_g.shared={};void 0===window.console&&(window.console={log:function(a){}});
_g.shared.HTTP=new function(){var a=function(){return{headers:{},body:{}}},c=function(b){if(!b)return null;var d=a();d.body=b.responseText;d.headers[_g.HTTP.HEADER_STATUS]=b.status;d.responseText=b.responseText;d.status=b.status;return d};return{EXTENSION_HTML:".html",EXTENSION_JSON:".json",EXTENSION_RES:".res",HEADER_STATUS:"Status",HEADER_MESSAGE:"Message",HEADER_LOCATION:"Location",HEADER_PATH:"Path",PARAM_NO_CACHE:"cq_ck",get:function(b,d,e,f){b=_g.HTTP.getXhrHookedURL(_g.HTTP.externalize(b,!0));
if(void 0!=d)return _g.$.ajax({type:"GET",url:b,externalize:!1,encodePath:!1,hook:!1,complete:function(g,l){g=c(g);f||_g.HTTP.handleForbidden(g);d.call(e||this,this,"success"==l,g)}});try{var h=_g.$.ajax({type:"GET",url:b,async:!1,externalize:!1,encodePath:!1,hook:!1}),k=c(h);f||_g.HTTP.handleForbidden(k);return k}catch(g){return null}},post:function(b,d,e,f,h,k){b=_g.HTTP.externalize(b,!0);if(h=_g.HTTP.getXhrHook(b,"POST",e))b=h.url,e=h.params;if(void 0!=d)return _g.$.ajax({type:"POST",url:b,data:e,
externalize:!1,encodePath:!1,hook:!1,complete:function(m,n){var p=_g.HTTP.buildPostResponseFromHTML(m.responseText);k||_g.HTTP.handleForbidden(m);d.call(f||this,this,"success"==n,p)}});try{var g=_g.$.ajax({type:"POST",url:b,data:e,async:!1,externalize:!1,encodePath:!1,hook:!1}),l=_g.HTTP.buildPostResponseFromHTML(g.responseText);k||_g.HTTP.handleForbidden(g);return l}catch(m){return null}},getParameter:function(b,d){b=_g.HTTP.getParameters(b,d);return null!=b?b[0]:null},getParameters:function(b,d){var e=
[];if(!d)return null;d=encodeURIComponent(d);if(-1==b.indexOf("?"))return null;-1!=b.indexOf("#")&&(b=b.substring(0,b.indexOf("#")));b=b.substring(b.indexOf("?")+1);if(-1==b.indexOf(d))return null;b=b.split("\x26");for(var f=0;f<b.length;f++){var h=b[f].split("\x3d");h[0]==d&&e.push(1<h.length?decodeURIComponent(h[1]):"")}return 0<e.length?e:null},addParameter:function(b,d,e){if(e&&e instanceof Array){for(var f=0;f<e.length;f++)b=_g.HTTP.addParameter(b,d,e[f]);return b}f=-1==b.indexOf("?")?"?":"\x26";
var h=b.indexOf("#");if(0>h)return b+f+encodeURIComponent(d)+"\x3d"+encodeURIComponent(e);var k=b.substring(h);b=b.substring(0,h);return b+f+encodeURIComponent(d)+"\x3d"+encodeURIComponent(e)+k},setParameter:function(b,d,e){b=_g.HTTP.removeParameter(b,d);return _g.HTTP.addParameter(b,d,e)},removeParameter:function(b,d){var e="?"+encodeURIComponent(d)+"\x3d";d="\x26"+encodeURIComponent(d)+"\x3d";if(-1==b.indexOf(e))if(-1!=b.indexOf(d))e=d;else return b;d=b.indexOf(e);e=b.substring(0,d);d=b.indexOf("\x26",
d+1);var f="";-1!=d&&(f=b.substring(d),0==f.indexOf("\x26")&&(f=f.replace("\x26","?")));return e+f},removeParameters:Granite.HTTP.removeParameters,addSelector:function(b,d,e){e||(e=0);var f="",h=b.indexOf("?");-1==h&&(h=b.indexOf("#"));-1!=h&&(f=b.substring(h),b=b.substring(0,h));var k=b.lastIndexOf("/");h=b.substring(k);if(-1==h.indexOf("."+d+".")){b=b.substring(0,k);h=h.split(".");var g=k="";if(e>h.length-2||-1==e)e=h.length-2;for(var l=0;l<h.length;l++)k+=g+h[l],g=".",e==l&&(k+=g+d);return b+k+
f}return b},setSelector:function(b,d,e){var f="",h=b.indexOf("?");-1==h&&(h=b.indexOf("#"));-1!=h&&(f=b.substring(h),b=b.substring(0,h));h=_g.HTTP.getSelectors(b);var k=b.substring(b.lastIndexOf("."));b=b.substring(0,b.lastIndexOf("."));b=0<h.length?b.replace("."+h.join("."),""):b;if(0<h.length)for(var g=0;g<h.length;g++)b=e==g?b+("."+d):b+("."+h[g]);else b+="."+d;return b+k+f},addSelectors:function(b,d){var e=b;if(b&&d&&d.length)for(b=0;b<d.length;b++)e=_g.HTTP.addSelector(e,d[b],b);return e},getAnchor:function(b){return-1!=
b.indexOf("#")?b.substring(b.indexOf("#")+1):""},setAnchor:function(b,d){return _g.HTTP.removeAnchor(b)+"#"+d},removeAnchor:Granite.HTTP.removeAnchor,noCaching:function(b){return _g.HTTP.setParameter(b,_g.HTTP.PARAM_NO_CACHE,(new Date).valueOf())},buildPostResponseFromNode:function(b,d){if(!b)return null;void 0==d&&(d=a());for(var e=0;e<b.childNodes.length;e++){var f=b.childNodes[e];f.tagName&&(f.id&&(d.headers[f.id]=f.href?f.href:f.innerHTML),d=_g.HTTP.buildPostResponseFromNode(f,d))}return d},buildPostResponseFromHTML:function(b){var d=
a();try{void 0!=b.responseText?b=b.responseText:"string"!=typeof b&&(b=b.toString());var e=document.createElement("div");e.innerHTML=b;d=_g.HTTP.buildPostResponseFromNode(e,d)}catch(f){}return d},getCookie:function(b){var d=encodeURIComponent(b)+"\x3d";b=document.cookie;if(0<b.length){var e=b.indexOf(d);if(-1!=e)return e+=d.length,d=b.indexOf(";",e),-1==d&&(d=b.length),decodeURIComponent(b.substring(e,d))}return null},setCookie:function(b,d,e,f,h,k){"number"!=typeof f&&(f=7);if(0<f){var g=new Date;
g.setTime(g.getTime()+864E5*f)}else g=new Date(0);document.cookie=encodeURIComponent(b)+"\x3d"+encodeURIComponent(d)+"; "+(0!=f?"expires\x3d"+g.toGMTString()+"; ":"")+(h?"domain\x3d"+h+"; ":"")+(e?"path\x3d"+e:"")+(k?"; secure":"");return d},clearCookie:function(b,d,e,f){_g.HTTP.setCookie(b,"null",d||"",-1,e||"",f||"")},getSchemeAndAuthority:Granite.HTTP.getSchemeAndAuthority,getContextPath:Granite.HTTP.getContextPath,externalize:function(b,d){if("undefined"!=typeof G_IS_HOOKED&&G_IS_HOOKED(b))return b;
d&&(b=_g.HTTP.encodePathOfURI(b));return b=Granite.HTTP.externalize(b)},internalize:Granite.HTTP.internalize,getPath:Granite.HTTP.getPath,getSuffix:function(){return window.CQURLInfo&&CQURLInfo.suffix?CQURLInfo.suffix:null},getSelectors:function(b){if(!b&&window.CQURLInfo&&CQURLInfo.selectors)return CQURLInfo.selectors;var d=[];b=b||window.location.href;b=_g.HTTP.removeParameters(b);b=_g.HTTP.removeAnchor(b);if(b=b.substring(b.lastIndexOf("/")))if(b=b.split("."),2<b.length)for(var e=0;e<b.length;e++)0<
e&&e<b.length-1&&d.push(b[e]);return d},getExtension:function(b){if(!b&&window.CQURLInfo&&CQURLInfo.extension)return CQURLInfo.extension;b=b||window.location.href;b=_g.HTTP.removeParameters(b);b=_g.HTTP.removeAnchor(b);var d=b.lastIndexOf(".");if(0>d)return"";b=b.substring(d+1);d=b.indexOf("/");return 0>d?b:b.substring(0,d)},encodePathOfURI:Granite.HTTP.encodePathOfURI,encodePath:Granite.HTTP.encodePath,eval:Granite.HTTP.eval,isOkStatus:function(b){try{return 0==(new String(b)).indexOf("2")}catch(d){return!1}},
isOk:function(b){try{return _g.HTTP.isOkStatus(b.headers[_g.HTTP.HEADER_STATUS])}catch(d){return!1}},handleForbidden:function(b,d){try{return 403==b[_g.HTTP.HEADER_STATUS.toLowerCase()]?(Granite.HTTP.handleLoginRedirect(),!0):!1}catch(e){return!1}},getXhrHook:Granite.HTTP.getXhrHook,getXhrHookedURL:function(b,d,e){return(d=_g.HTTP.getXhrHook(b,d,e))?d.url:b},reloadHook:function(b){"undefined"!=typeof G_RELOAD_HOOK&&_g.$.isFunction(G_RELOAD_HOOK)&&(""!=CQURLInfo.selectorString&&(b=_g.HTTP.addSelector(b,
CQURLInfo.selectorString)),b=G_RELOAD_HOOK(b)||b);return b}}};_g.HTTP=_g.shared.HTTP;
_g.shared.Util=new function(){return{reload:function(a,c,b){a||(a=window);c||(c=_g.HTTP.noCaching(a.location.href));c=_g.HTTP.reloadHook(c);b?a.location.replace(c):a.location.href=c},load:function(a,c){_g.Util.reload(window,a,c)},open:function(a,c,b,d){c||(c=window);if(a)return a=_g.HTTP.reloadHook(a),b||(b=""),d||(d=""),c.open(a,b,d)},htmlEncode:function(a){return a?String(a).replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):a},htmlDecode:function(a){return a?
String(a).replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"').replace(/&amp;/g,"\x26"):a},ellipsis:function(a,c,b){if(a&&a.length>c){if(b){b=a.substr(0,c-2);var d=Math.max(b.lastIndexOf(" "),b.lastIndexOf("."),b.lastIndexOf("!"),b.lastIndexOf("?"),b.lastIndexOf(";"));return-1==d||d<c-15?a.substr(0,c-3)+"...":b.substr(0,d)+"..."}return a.substr(0,c-3)+"..."}return a},patchText:Granite.Util.patchText,eval:function(a){return _g.HTTP.eval(a)},getTopWindow:Granite.Util.getTopWindow,
setIFrameMode:Granite.Util.setIFrameMode}};_g.Util=_g.shared.Util;
_g.shared.Sling=function(){return{SELECTOR_INFINITY:Granite.Sling.SELECTOR_INFINITY,CHARSET:Granite.Sling.CHARSET,STATUS:Granite.Sling.STATUS,STATUS_BROWSER:Granite.Sling.STATUS_BROWSER,OPERATION:Granite.Sling.OPERATION,OPERATION_DELETE:Granite.Sling.OPERATION_DELETE,OPERATION_MOVE:Granite.Sling.OPERATION_MOVE,DELETE_SUFFIX:Granite.Sling.DELETE_SUFFIX,TYPEHINT_SUFFIX:Granite.Sling.TYPEHINT_SUFFIX,COPY_SUFFIX:Granite.Sling.COPY_SUFFIX,MOVE_SUFFIX:Granite.Sling.MOVE_SUFFIX,ORDER:Granite.Sling.ORDER,
REPLACE:Granite.Sling.REPLACE,DESTINATION:Granite.Sling.DESTINATION,SAVE_PARAM_PREFIX:Granite.Sling.SAVE_PARAM_PREFIX,IGNORE_PARAM:Granite.Sling.IGNORE_PARAM,REQUEST_LOGIN_PARAM:Granite.Sling.REQUEST_LOGIN_PARAM,LOGIN_URL:Granite.Sling.LOGIN_URL,LOGOUT_URL:Granite.Sling.LOGOUT_URL,processBinaryData:function(a){if(a&&void 0!=a[":jcr:data"]){var c={};c.size=a[":jcr:data"];c.type=a["jcr:mimeType"];c.date=a["jcr:lastModified"];a=c}return a},getContentPath:function(a,c,b){c.lastIndexOf(".")>c.lastIndexOf("/")&&
(c=c.substr(0,c.indexOf(".",c.lastIndexOf("/"))));if(a)if(0==a.indexOf("/"))c=a;else{if(b)for(;0==a.indexOf("../");)a=a.substring(3),c=c.substring(0,c.lastIndexOf("/"));a=a.replace("./","");c=c+"/"+a}return c}}}();_g.Sling=_g.shared.Sling;
_g.shared.XSS=new function(){return{getXSSPropertyName:function(a){return a?_g.XSS.KEY_REGEXP.test(a)?a:a+_g.XSS.KEY_SUFFIX:""},getXSSRecordPropertyValue:function(a,c,b){var d="";a&&c&&(d=(d=a.get(this.getXSSPropertyName(c)))?d:this.getXSSValue(a.get(c)),b&&!isNaN(b)&&(d=_g.Util.ellipsis(d,b,!0)));return d},getXSSTablePropertyValue:function(a,c,b){var d="";a&&c&&(d=(d=a[this.getXSSPropertyName(c)])?d:this.getXSSValue(a[c]),b&&!isNaN(b)&&(d=_g.Util.ellipsis(d,b,!0)));return d},getXSSValue:function(a){return a?
_g.Util.htmlEncode(a):""},updatePropertyName:function(a,c){a&&c&&a[c]&&a.xssProtect&&!a.xssKeepPropName&&(a[c]=this.getXSSPropertyName(a[c]))},xssPropertyRenderer:function(a,c,b,d){return d&&d.dataIndex&&b&&b.data&&b.data[this.getXSSPropertyName(d.dataIndex)]?(a=b.data[this.getXSSPropertyName(d.dataIndex)],d.ellipsisLimit&&!isNaN(d.ellipsisLimit)&&(a=_g.Util.ellipsis(a,d.ellipsisLimit,!0)),a):a?a:""}}};_g.XSS=_g.shared.XSS;_g.XSS.KEY_SUFFIX="_xss";_g.XSS.KEY_REGEXP=new RegExp(_g.XSS.KEY_SUFFIX+"$");
_g.shared.I18n=Granite.I18n;_g.I18n=_g.shared.I18n;_g.shared.I18n.getMessage=Granite.I18n.get;_g.shared.I18n.getVarMessage=Granite.I18n.getVar;
_g.shared.String=new function(){return{startsWith:function(a,c){return null==a||null==c?null==a&&null==c:c.length>a.length?!1:0==a.toString().indexOf(c.toString())},endsWith:function(a,c){if(null==a||null==c)return null==a&&null==c;if(c.length>a.length)return!1;a=a.toString();c=c.toString();return a.lastIndexOf(c)==a.length-c.length},contains:function(a,c){if(null==a||null==c)return!1;a=a.toString();c=c.toString();return 0<=a.indexOf(c)}}};_g.String=_g.shared.String;
_g.shared.ClientSidePersistence=function(a){var c={PERSISTENCE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("ClientSidePersistence"),config:{},cache:null,getMode:function(){return this.config.mode},getWindow:function(){return this.config.window||_g.shared.Util.getTopWindow()},debug:function(){if(console){for(var d=this.getMap(),e="[ClientSidePersistence -\x3e mode\x3d"+this.getMode().name+", container\x3d"+(this.config.container||"")+"]\n",f=0,h=new RegExp("^"+this.config.container+
"/"),k=0,g=Object.keys(d).sort();k<g.length;k++){var l=g[k];if(!this.config.container||"string"!=typeof l||l.match(h)){var m=d[l];e+="-["+ ++f+"]-\x3e '"+l.replace(h,"")+"' \x3d '"+decodeURIComponent(m)+"'\n"}}f||(e+="(container is empty)");console.log(e)}},keyName:function(d){return(this.config.container?this.config.container+"/":"")+d},getKeys:function(){var d=this.getMap(),e=[];if(d)for(var f in d)this.config.container?0==f.indexOf(this.config.container+"/")&&(d=f.substring(this.config.container.length+
1),e.push(d)):e.push(f);return e},get:function(d){return(d=this.getMap()[this.keyName(d)])?decodeURIComponent(d):d},set:function(d,e){d="string"===typeof d?d.replace(/:=/g,""):"";var f={key:d};d=this.keyName(d);if(d.length){var h=[],k=this.getMap();f.action=k[d]?"update":"set";e?k[d]=encodeURIComponent(e):(f.action="remove",delete k[d]);for(var g in k)h.push(g+":\x3d"+k[g]);this.cache=k;this.write(h.join("|"));_g.$.extend(f,{value:e,mode:this.getMode().name,container:this.config.container});_g.$(_g.shared.ClientSidePersistence).trigger(_g.shared.ClientSidePersistence.EVENT_NAME,
f)}},getMap:function(){if(!this.cache||!this.config.useCache){for(var d=this.read().split("|"),e={},f=0;f<d.length;f++){var h=d[f].split(":\x3d"),k=h[0];k&&k.length&&(e[k]=h[1]||"")}this.cache=e}return this.cache},remove:function(d){this.set(d)},clearMap:function(){this.write()},read:function(){return this.config.mode.read(this)||""},write:function(d){this.config.mode.write(this,d||"")}};_g.$.extend(c.config,_g.shared.ClientSidePersistence.getDefaultConfig(),a);!1===c.config.useContainer&&(c.config.container=
null);var b="test-"+Math.random();if(c.config.mode===_g.shared.ClientSidePersistence.MODE_SESSION){a=!1;try{window.sessionStorage.setItem(b,b),window.sessionStorage.removeItem(b)}catch(d){a=!0}a&&(c.config.mode=_g.shared.ClientSidePersistence.MODE_LOCAL)}if(c.config.mode===_g.shared.ClientSidePersistence.MODE_LOCAL){a=!1;try{window.localStorage.setItem(b,b),window.localStorage.removeItem(b)}catch(d){a=!0}a&&(c.config.mode=_g.shared.ClientSidePersistence.MODE_WINDOW)}return c};
_g.shared.ClientSidePersistence.EVENT_NAME="ClientSidePersistence";_g.shared.ClientSidePersistence.MODE_SESSION={name:"session",read:function(a){return a.getWindow().sessionStorage.getItem(a.PERSISTENCE_NAME)},write:function(a,c){if(!Granite.OptOutUtil.isOptedOut())try{a.getWindow().sessionStorage.setItem(a.PERSISTENCE_NAME,c)}catch(b){}}};
_g.shared.ClientSidePersistence.MODE_LOCAL={name:"local",read:function(a){return a.getWindow().localStorage.getItem(a.PERSISTENCE_NAME)},write:function(a,c){if(!Granite.OptOutUtil.isOptedOut())try{a.getWindow().localStorage.setItem(a.PERSISTENCE_NAME,c)}catch(b){}}};_g.shared.ClientSidePersistence.decoratePersistenceName=function(a){return a};
_g.shared.ClientSidePersistence.MODE_WINDOW={name:"window",read:function(a){return a.getWindow().name},write:function(a,c){Granite.OptOutUtil.isOptedOut()||(a.getWindow().name=c)}};
_g.shared.ClientSidePersistence.MODE_COOKIE={COOKIE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("SessionPersistence"),name:"cookie",read:function(a){return _g.shared.ClientSidePersistence.CookieHelper.read(this.COOKIE_NAME)},write:function(a,c){if(!Granite.OptOutUtil.isOptedOut()||Granite.OptOutUtil.maySetCookie(this.COOKIE_NAME))c?_g.shared.ClientSidePersistence.CookieHelper.set(this.COOKIE_NAME,c,365):_g.shared.ClientSidePersistence.CookieHelper.erase(this.COOKIE_NAME)}};
_g.shared.ClientSidePersistence.getDefaultConfig=function(){return{window:_g.shared.Util.getTopWindow(),useCache:!1,container:null,mode:_g.shared.ClientSidePersistence.MODE_LOCAL}};
_g.shared.ClientSidePersistence.CookieHelper={set:function(a,c,b){var d="";b&&(d=new Date,d.setTime(d.getTime()+864E5*b),d="; expires\x3d"+d.toGMTString());c&&(c=encodeURIComponent(c));document.cookie=a+"\x3d"+c+d+"; path\x3d/"},read:function(a){a+="\x3d";for(var c=document.cookie.split(";"),b=0;b<c.length;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return(a=d.substring(a.length,d.length))?decodeURIComponent(a):null}return null},erase:function(a){_g.shared.ClientSidePersistence.CookieHelper.set(a,
"",-1)}};_g.shared.ClientSidePersistence.clearAllMaps=function(){_g.$.each([_g.shared.ClientSidePersistence.MODE_COOKIE,_g.shared.ClientSidePersistence.MODE_LOCAL,_g.shared.ClientSidePersistence.MODE_SESSION,_g.shared.ClientSidePersistence.MODE_WINDOW],function(a,c){(new _g.shared.ClientSidePersistence({mode:c})).clearMap()})};_g.I18n.init();window.CQ=window.CQ||{};CQ.shared=_g.shared;CQ.Sling=CQ.shared.Sling;CQ.I18n=CQ.shared.I18n;G_XHR_HOOK="undefined"!=typeof CQ_XHR_HOOK?CQ_XHR_HOOK:void 0;
G_RELOAD_HOOK="undefined"!=typeof CQ_RELOAD_HOOK?CQ_RELOAD_HOOK:void 0;G_IS_HOOKED="undefined"!=typeof CQ_IS_HOOKED?CQ_IS_HOOKED:void 0;G_CONTENT_PATH="undefined"!=typeof CQ_CONTENT_PATH?CQ_CONTENT_PATH:void 0;
CQ.shared.Form=function(){var a=function(){var e=parent.frames.ContentFrame,f={};e=(void 0!==e?e.contentDocument:document).getElementsByTagName("label");for(var h=0;h<e.length;h++){var k=e[h].htmlFor;k&&(f[k]=e[h])}return f},c=function(e){var f="",h=function(k){3==k.nodeType&&(f+=k.nodeValue);if("select"!=k.nodeName.toLowerCase()&&"input"!=k.nodeName.toLowerCase()&&"textarea"!=k.nodeName.toLowerCase()&&"button"!=k.nodeName.toLowerCase())for(var g=0;k.childNodes&&g<k.childNodes.length;g++)h(k.childNodes[g])};
h(e);return f},b=function(e){var f,h=e.nodeName.toLowerCase(),k=d(e,"type")?e.getAttribute("type"):void 0;"input"==h?"radio"==k||"checkbox"==k?d(e,"checked")&&(f=e.getAttribute("value")):f="text"==e.type?e.defaultValue:e.value:"textarea"==h?f=e.value:"option"==h&&d(e,"selected")&&(f=e.getAttribute("value"));return f},d=function(e,f){return null==e?!1:void 0!=$CQ(e).attr(f)};return{searchArray:function(e,f,h){for(var k=0;k<e.length;k++)if(e[k][f]&&e[k][f]==h)return e[k];return null},getLabelForField:function(e,
f){f||(f=a());var h=e.getAttribute("id");if(h&&f[h])return c(f[h]);for(f=e.parentNode;f;){if("label"==f.nodeName.toLowerCase())return c(f);f=f.parentNode}return e.getAttribute("name")},getFields:function(){var e=parent.frames.ContentFrame;e=void 0!==e?e.contentDocument:document;var f=a(),h=[],k=function(g,l,m){"div"==g.nodeName.toLowerCase()&&0<$CQ(g).children(".form_row").length&&(l=!0,m=$CQ(g).attr("class").replace(/\s/g,"."));if(g.getAttribute&&g.getAttribute("name")){var n=l,p=m,q=g.getAttribute("name"),
t=g.nodeName.toLowerCase();if("input"==t||"textarea"==t){var u=d(g,"type")?g.getAttribute("type").toLowerCase():"text";if("button"!=u&&"submit"!=u&&"reset"!=u){var r=CQ.shared.Form.searchArray(h,"value",q);r||(h.push({text:CQ.shared.Form.getLabelForField(g,f),value:q,name:q,enumeration:void 0,local:n,selector:p,type:t,defaultValue:b(g),node:g}),r=h[h.length-1]);if("radio"==u||r.local&&"checkbox"==u)r.enumeration||((n=g.getAttribute("id"))?(n=n.replace(/-\d+$/,""),(p=f)||(p=a()),n=p[n]?c(p[n]):null,
r.text=n?n:q):r.text=q,r.enumeration=[]),r.enumeration.push({text:CQ.shared.Form.getLabelForField(g,f),value:g.getAttribute("value"),defaultValue:b(g),node:g})}}else if("select"==t)for(h.push({text:CQ.shared.Form.getLabelForField(g,f),value:q,name:q,enumeration:[],local:n,type:t,selector:p,defaultValue:void 0,node:g}),r=h[h.length-1],q=g.getElementsByTagName("option"),n=0;n<q.length;n++)r.enumeration.push({text:q[n].innerHTML,value:q[n].getAttribute("value"),defaultValue:b(q[n]),node:q[n]})}for(r=
0;g.childNodes&&r<g.childNodes.length;r++)q=g.childNodes[r],1==q.nodeType&&k(q,l,m)};k(e,!1,void 0);return h}}}();
CQ.shared.User=function(a){return{data:null,language:null,userPropsPath:null,getUserPropsUrl:function(){this.userPropsPath||(this.userPropsPath=CQ.shared.User.PROXY_URI);return this.userPropsPath},load:function(){var c=this.getUserPropsUrl();c=CQ.shared.HTTP.noCaching(c);c=CQ.shared.HTTP.get(c);CQ.shared.HTTP.isOk(c)&&(this.data=CQ.shared.Util.eval(c))},init:function(c,b){if(!this.initialized||b)c?this.data=c:this.load(),this.initialized=!0;return this.data},lazyInit:function(){this.lazyLoad=function(){this.load();
this.initialized=!0}},isInitialized:function(){return this.initialized},getLanguage:function(){!this.isInitialized()&&this.lazyLoad&&this.lazyLoad.call(this);return this.language=this.data&&this.data.preferences&&this.data.preferences.language?this.data.preferences.language:"en"}}}();CQ.shared.User.PROXY_URI=CQ.shared.HTTP.externalize("/libs/cq/security/userinfo"+CQ.shared.HTTP.EXTENSION_JSON);CQ.shared.User.lazyInit();
CQ.shared.I18n.init({locale:function(){return document.documentElement.lang||CQ.shared.User.getLanguage()},urlPrefix:"/libs/cq/i18n/dict."});window.$CQ=_g.$;window.CQ_Analytics||(window.CQ_Analytics={});
CQ_Analytics.Utils=new function(){return{registerDocumentEventHandler:function(a,c){var b=window.document[a];window.document[a]="function"!=typeof window.document[a]?c:function(d){b&&b(d);c(d)}},eventWrapper:function(a){return function(c){if(document.all){var b=window.event.keyCode;c=window.event}else b="undefined"!=typeof c.which?c.which:0;c&&a(c,b)}},loadElement:function(a,c){$CQ("#"+c).load(a)},loadTeaserElement:function(a,c){var b=$CQ("#"+c).css("height"),d=$CQ("#"+c).height();0<d&&$CQ("#"+c).css("height",
d);var e=function(m){if(m&&""!=m){m=$CQ(m).css("display","none");var n=$CQ("#"+c)[0];$CQ("#"+c).empty().append(m);n&&n.parentElement&&$CQ(n.parentElement).trigger("target-dom-loaded");m.fadeIn(function(){b&&"0px"!=b&&$CQ("#"+c).css("height",b)})}else b&&"0px"!=b&&$CQ("#"+c).css("height",b)},f=function(m,n){CQ_Analytics.Utils.teasersCache||(CQ_Analytics.Utils.teasersCache={});CQ_Analytics.Utils.teasersCache[m]=n},h=function(){CQ_Analytics.Utils.teasersCache&&CQ_Analytics.Utils.teasersCache[a]?e(CQ_Analytics.Utils.teasersCache[a]):
(CQ_Analytics.Utils.teasersLoading=CQ_Analytics.Utils.teasersLoading||{},CQ_Analytics.Utils.teasersLoading[a]?window.setTimeout(function(){CQ_Analytics.Utils.loadTeaserElement(a,c)},100):(CQ_Analytics.Utils.teasersLoading[a]=!0,k()))},k=function(){var m=a,n=location.href;"undefined"!=typeof CQ_CONTENT_PATH&&(n=CQ_CONTENT_PATH);(n=CQ.shared.HTTP.getParameter(n,"wcmmode"))&&(m+=(0<m.indexOf("?")?"\x26":"?")+"wcmmode\x3d"+n);CQ.shared.HTTP.get(m,function(p,q,t){if(q){if(p=t.body)p=p.replace(/\n/ig,""),
p=p.replace(/\r/ig,""),f(a,p),delete CQ_Analytics.Utils.teasersLoading[a],h()}else f(a,"")})},g=$CQ("#"+c).children().length;if(0<g){var l=0;$CQ("#"+c).children().fadeOut(function(){var m=$CQ(this);window.setTimeout(function(){m.remove();l++;l>=g&&h()},50)})}else h()},clearElement:function(a){a&&$CQ("#"+a).html("")},indexOf:function(a,c){for(var b=0,d=a.length;b<d;b++)if(a[b]==c)return b;return-1},load:function(a,c,b){return CQ.shared.HTTP.get(a,c,b)},post:function(a,c,b,d){return CQ.shared.HTTP.post(a,
c,b,d)},getPagePath:function(){return CQ.shared.HTTP.getPath()},getPath:function(a){return CQ.shared.HTTP.getPath(a)},addParameter:function(a,c,b){return CQ.shared.HTTP.addParameter(a,c,b)},removeParameters:function(a){return CQ.shared.HTTP.removeParameters(a)},removeAnchor:function(a){return CQ.shared.HTTP.removeAnchor(a)},getSchemeAndAuthority:function(a){return CQ.shared.HTTP.getSchemeAndAuthority(a)},internalize:function(a,c){return CQ.shared.HTTP.internalize(c)},externalize:function(a,c){return CQ.shared.HTTP.externalize(a,
c)},encodePathOfURI:function(a){return CQ.shared.HTTP.encodePathOfURI(a)},encodePath:function(a){return CQ.shared.HTTP.encodePath(a)},getContextPath:function(){return CQ.shared.HTTP.getContextPath()},detectContextPath:function(){return CQ.shared.HTTP.detectContextPath()},urlEncode:function(a){if(!a)return"";if("string"==typeof a)return a;var c=[],b;for(b in a){var d=a[b],e=encodeURIComponent(b),f=typeof d;if("undefined"==f)c.push(e,"\x3d\x26");else if("function"!=f&&"object"!=f)c.push(e,"\x3d",encodeURIComponent(d),
"\x26");else if("array"==typeof d)if(d.length){f=0;for(var h=d.length;f<h;f++)c.push(e,"\x3d",encodeURIComponent(void 0===d[f]?"":d[f]),"\x26")}else c.push(e,"\x3d\x26")}c.pop();return c.join("")},getUID:function(){var a=Math.floor(Math.random()*(Math.pow(2,42)-1));return this.getTimestamp().toString(16)+a.toString(16)},getTimestamp:function(){return(new Date).getTime()},insert:function(a,c,b){if(!a||isNaN(c)||!b)return a;for(var d="",e=0,f=c;f<a.length;)d+=a.substring(e,f)+b,e+=c,f+=c;e<a.length&&
(d+=a.substring(e));return d},addListener:function(){return window.addEventListener?function(a,c,b,d){a.addEventListener(c,b,d)}:window.attachEvent?function(a,c,b,d){a.attachEvent("on"+c,b)}:function(){}},removeListener:function(){return window.removeEventListener?function(a,c,b,d){a.removeEventListener(c,b,d)}:window.detachEvent?function(a,c,b){a.detachEvent("on"+c,b)}:function(){}}}};
CQ_Analytics.ClickstreamcloudRenderingUtils=new function(){return{createLink:function(a,c,b,d){var e=document.createElement("a");e.href=d;e.onclick=c;e.innerHTML=a;if(b)for(var f in b)b.hasOwnProperty(f)&&(e[f]=b[f]);return e},createStaticLink:function(a,c,b){var d=document.createElement("a");d.href=c;d.innerHTML=a;d.title=b;d.alt=b;return d},createNameValue:function(a,c,b,d){var e=document.createElement("span");e.className=b||"ccl-data";e.innerHTML=a+" \x3d "+c;e.title=d;e.alt=d;return e},createText:function(a,
c,b){var d=document.createElement("span");d.className=c||"ccl-data";a&&a.indexOf&&(-1!=a.indexOf("/home")&&-1!=a.indexOf("/image")||-1!=a.indexOf("/")&&-1!=a.indexOf(".png"))?d.innerHTML='\x3cimg src\x3d"'+a+'.prof.thumbnail.png" border\x3d"0"\x3e':a&&a.indexOf&&-1!=a.indexOf("www.gravatar.com")?d.innerHTML='\x3cimg src\x3d"'+a+'"\x3e':d.innerHTML=a;d.title=b;d.alt=b;return d},createEditablePropertySpan:function(a,c){var b="var editSpan \x3d this.parentNode; var readSpan \x3d this.parentNode.previousSibling;var newValue \x3d this.value;editSpan.style.display \x3d 'none'; readSpan.innerHTML \x3d '"+
a+" \x3d '+value; readSpan.style.display \x3d 'block';",d=document.createElement("span");d.innerHTML="\x3cspan class\x3d\"ccl-data\" onclick\x3d\"var editSpan \x3d this.nextSibling; this.style.display \x3d 'none'; editSpan.style.display \x3d 'block';\"\x3e"+a+" \x3d "+c+"\x3c/span\x3e";d.innerHTML+='\x3cspan class\x3d"ccl-data" style\x3d"display: none;"\x3e'+a+' \x3d \x3cinput class\x3d"ccl-input" type\x3d"text" value\x3d"'+c+'" onblur\x3d"'+b+'"\x3e\x3c/span\x3e';d.className="ccl-data";return d}}};
var generateURLSignature=function(a,c,b){if(a&&a.match(/^https?:\/\/maps\.googleapis\.com\//)){var d=a.replace(/^https?:\/\/[^/]*/,"").replace(/&amp;/g,"\x26");$CQ.ajax({url:CQ.shared.HTTP.externalize("/etc/cloudsettings/default/contexthub/geolocation.signature.json"),method:"get",dataType:"json",cache:!1,data:{url:d}}).done(function(e,f,h){h&&h.responseJSON?(e=this.baseURL.replace(/&amp;/g,"\x26"),e+="\x26client\x3d"+h.responseJSON.client,e+="\x26channel\x3d"+h.responseJSON.channel,e+="\x26signature\x3d"+
h.responseJSON.signature,c(e)):"function"===typeof b&&b()}.bind({baseURL:a})).fail(b)}else c(a)};
CQ_Analytics.ClientContextUtils=new function(){return{renderStoreProperty:function(a,c,b,d,e,f){if(CQ_Analytics&&CQ_Analytics.CCM)CQ_Analytics.CCM.onReady(function(){CQ_Analytics.ClientContextUtils.onStoreRegistered(c,function(){var h=CQ_Analytics.StoreRegistry.getStore(c);if(h){var k=function(){var g=h.getProperty(b)||f,l=$CQ("#"+a);if(!l.attr("contenteditable")||"inherit"==l.attr("contenteditable"))if("string"!=typeof g||(0!=g.indexOf("/")||-1==g.toLowerCase().indexOf(".png")&&-1==g.toLowerCase().indexOf(".jpg")&&
-1==g.toLowerCase().indexOf(".gif"))&&0!=g.toLowerCase().indexOf("http"))g=CQ_Analytics.Variables.replaceVariables(g),g=CQ_Analytics.isUIAvailable?g&&""!=g?g=d+g+e:CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+b:g&&""!=g?g=d+g+e:"No "+b,l.html()!=g&&!1!==h.fireEvent("beforepropertyrender",h,a)&&(l.html(g),h.fireEvent("propertyrender",h,a));else if(g&&""!=g){var m="";m=0==l.parents(".cq-cc-thumbnail").length||0==g.toLowerCase().indexOf("http")||0==g.indexOf("/libs/wcm/mobile")?g.replace(/&amp;/g,
"\x26"):CQ.shared.HTTP.addParameter("/etc/clientcontext/shared/thumbnail/content.png","path",CQ_Analytics.Variables.replaceVariables(g));m=CQ_Analytics.Variables.replaceVariables(m);-1===(l.find("div").css("background-image")||"").indexOf(m+")")&&!1!==h.fireEvent("beforepropertyrender",h,a)&&generateURLSignature(CQ.shared.HTTP.externalize(m),function(n){l.html("");l.children().remove();$CQ("\x3cdiv\x3e").addClass("cq-cc-thumbnail-img").css("background-image","url("+n+")").appendTo(l);h.fireEvent("propertyrender",
h,a)})}else l.children().remove(),CQ_Analytics.isUIAvailable?l.html(CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+b):l.html("No "+b)};!1!==h.fireEvent("beforeinitialpropertyrender",h,a)&&(k(),h.addListener&&h.addListener("update",function(){k()}),h.fireEvent("initialpropertyrender",h,a))}})})},renderStore:function(a,c){if(CQ_Analytics&&CQ_Analytics.CCM&&a&&c)CQ_Analytics.CCM.onReady(function(){CQ_Analytics.ClientContextUtils.onStoreRegistered(c,function(){var b=CQ_Analytics.StoreRegistry.getStore(c);
if(b){b.divId=a;var d=function(){!1!==b.fireEvent("beforerender",b,b.divId)&&(b.renderer(b,b.divId),b.fireEvent("render",b,b.divId))};!1!==b.fireEvent("beforeinitialrender",b,a)&&(d(),b.addListener&&b.addListener("update",function(){d()}),b.fireEvent("initialrender",b,a))}})})},storesOptionsProvider:function(){var a=[],c=CQ_Analytics.StoreRegistry.getStores(),b;for(b in c)a.push({value:b});return a},storePropertiesOptionsProvider:function(a,c){var b=[];if(a=CQ_Analytics.StoreRegistry.getStore(a))for(var d=
a.getPropertyNames(),e=0;e<d.length;e++){var f=d[e];if(!CQ.shared.XSS.KEY_REGEXP.test(f)){var h={value:f};c&&(h.text=f+" - "+a.getProperty(f));b.push(h)}}return b},onStoreRegistered:function(a,c){if(c){var b=CQ_Analytics.StoreRegistry.getStore(a);b?c.call(b,b):CQ_Analytics.CCM.addListener("storeregister",function(d,e){e.getName()==a&&c.call(e,e)})}},onStoreInitialized:function(a,c,b){!0===b&&(b=CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY);var d=function(){var f=CQ_Analytics.StoreRegistry.getStore(a);
f.DELAYED_INIT_TIMEOUT&&(window.clearTimeout(f.DELAYED_INIT_TIMEOUT),f.DELAYED_INIT_TIMEOUT=null);0<b?f.DELAYED_INIT_TIMEOUT=window.setTimeout(function(){f.DELAYED_INIT_TIMEOUT=null;c.call(f,"initialize",f)},b):c.call(f,"initialize",f)},e=CQ_Analytics.StoreRegistry.getStore(a);e?e.isInitialized()?(d.call(e),e.addListener("initialize",function(f,h){d.call(h)})):e.addListener("initialize",function(f,h){d.call(h)}):CQ_Analytics.CCM.addListener("storeregister",function(f,h){if(h.getName()==a)CQ_Analytics.ClientContextUtils.onStoreInitialized(a,
c,b)})},init:function(a,c,b){CQ_Analytics.ClientContextMgr.PATH=a;CQ_Analytics.ClientContextMgr.loadConfig(b,!0);$CQ.ajax({url:CQ.shared.HTTP.externalize(a+"/content/jcr:content/stores.init.js"),cache:!1,async:!0,dataType:"script",data:{path:c}})},initUI:function(a,c,b){CQ_Analytics.ClientContextUI.create(a,c,b)}}};CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY=200;
CQ_Analytics.Variables=new function(){return{containsVariable:function(a){return 0<CQ_Analytics.Variables.getVariables(a).length},getVariables:function(a){return a&&"string"==typeof a?(a=a.match(/\$\{([\w/]*)\}/ig))?a:[]:[]},replaceVariables:function(a){if(!a)return a;var c="",b=a;for(a=CQ_Analytics.Variables.getVariables(a);0<a.length&&-1==c.indexOf(a.join());){for(var d=0;d<a.length;d++){var e=CQ_Analytics.Variables.getPropertyPath(a[d]),f=CQ_Analytics.ClientContext.get(e)||"";b=CQ_Analytics.Variables.replace(b,
e,f)}c+=a.join();a=CQ_Analytics.Variables.getVariables(b)}return b},getPropertyPath:function(a){return!a||2>a.length?null:a.substring(2,a.length-1)},getPropertyName:function(a){if(a=CQ_Analytics.Variables.getPropertyPath(a))if(a=a.split("/"),3==a.length)return a[2];return null},getStoreName:function(a){if(a=CQ_Analytics.Variables.getPropertyPath(a))if(a=a.split("/"),1<a.length)return a[1];return null},replace:function(a,c,b){return a.replace(new RegExp("\\$\\{"+c+"\\}","ig"),b)}}};
CQ_Analytics.SessionPersistence=CQ.shared.ClientSidePersistence;CQ_Analytics.Cookie=CQ.shared.ClientSidePersistence.CookieHelper;CQ_Analytics.Observable=function(){this.fireEvent=function(a){if(a&&this.listeners&&!this.suppressEvents){a=a.toLowerCase();for(var c=Array.prototype.slice.call(arguments,0),b=this.listeners.slice(0),d=0;d<b.length;d++){var e=b[d];if(a==e.event&&!1===e.fireFn.apply(e.scope||this||window,c))return!1}}return!0}};
CQ_Analytics.Observable.prototype.addListener=function(a,c,b){this.listeners=this.listeners||[];a&&c&&this.listeners.push({event:a.toLowerCase(),fireFn:c,scope:b})};CQ_Analytics.Observable.prototype.removeListener=function(a,c){this.listeners=this.listeners||[];if(a&&c)for(var b=0;b<this.listeners.length;b++)this.listeners[b].event==a&&this.listeners[b].fireFn==c&&this.listeners.splice(b,1)};CQ_Analytics.Observable.prototype.setSuppressEvents=function(a){this.suppressEvents=a};
CQ_Analytics.Observable.prototype.listeners=null;CQ_Analytics.Observable.prototype.suppressEvents=!1;CQ_Analytics.StoreRegistry||(CQ_Analytics.StoreRegistry=new function(){var a={};return{register:function(c){c.STORENAME&&(a[c.STORENAME]=c)},getStores:function(){return a},getStore:function(c){return a[c]}}});CQ_Analytics.SessionStore=function(){};CQ_Analytics.SessionStore.prototype=new CQ_Analytics.Observable;
CQ_Analytics.SessionStore.prototype.setProperty=function(a,c){null==this.data&&this.init();this.data[a]=c;this.fireEvent("update",a)};CQ_Analytics.SessionStore.prototype.setProperties=function(a){null==this.data&&this.init();var c=[],b;for(b in a)a.hasOwnProperty(b)&&(c.push(b),this.data[b]=a[b]);0<c.length&&this.fireEvent("update",c)};CQ_Analytics.SessionStore.prototype.initialized=!1;CQ_Analytics.SessionStore.prototype.init=function(){this.initialized=!0;this.fireEvent("initialize",this)};
CQ_Analytics.SessionStore.prototype.getLabel=function(a){return a};CQ_Analytics.SessionStore.prototype.getLink=function(a){return a};CQ_Analytics.SessionStore.prototype.removeProperty=function(a){null==this.data&&this.init();this.data[a]&&delete this.data[a];this.fireEvent("update",a)};CQ_Analytics.SessionStore.prototype.getPropertyNames=function(a){null==this.data&&this.init();a=a?a:[];var c=[],b;for(b in this.data)-1==CQ_Analytics.Utils.indexOf(a,b)&&c.push(b);return c};
CQ_Analytics.SessionStore.prototype.getSessionStore=function(){return this};CQ_Analytics.SessionStore.prototype.clear=function(){this.data=null};CQ_Analytics.SessionStore.prototype.getData=function(a){null==this.data&&this.init();if(a){var c={},b;for(b in this.data)-1==CQ_Analytics.Utils.indexOf(a,b)&&(c[b]=this.data[b]);return c}return this.data};CQ_Analytics.SessionStore.prototype.reset=function(){null!=this.data&&(this.data=null,this.fireEvent("update"))};
CQ_Analytics.SessionStore.prototype.getProperty=function(a,c){null==this.data&&this.init();a=this.data[a];return c?a:CQ.shared.XSS.getXSSValue(a)};CQ_Analytics.SessionStore.prototype.getName=function(){return this.STORENAME};CQ_Analytics.SessionStore.prototype.addInitProperty=function(a,c){this.initProperty||(this.initProperty={});this.initProperty[a]=c};CQ_Analytics.SessionStore.prototype.getInitProperty=function(a){return this.initProperty?this.initProperty[a]:null};
CQ_Analytics.SessionStore.prototype.loadInitProperties=function(a,c){if(a)for(var b in a)this.addInitProperty(b,a[b]),c&&this.data&&void 0===this.data[b]&&this.setProperty(b,a[b])};CQ_Analytics.SessionStore.prototype.isInitialized=function(){return this.initialized};CQ_Analytics.PersistedSessionStore=function(){};CQ_Analytics.PersistedSessionStore.prototype=new CQ_Analytics.SessionStore;CQ_Analytics.PersistedSessionStore.prototype.STOREKEY="key";
CQ_Analytics.PersistedSessionStore.prototype.setNonPersisted=function(a){this.nonPersisted||(this.nonPersisted={});this.nonPersisted[a]=!0};CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX="^generated*";CQ_Analytics.PersistedSessionStore.prototype.isPersisted=function(a){this.nonPersisted||(this.nonPersisted={});return!0!==this.nonPersisted[a]&&!(new RegExp(CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX,"ig")).test(a)&&!$CQ.isFunction(this.data[a])&&"object"!=typeof this.data[a]};
CQ_Analytics.PersistedSessionStore.prototype.getStoreKey=function(){return this.STOREKEY};CQ_Analytics.PersistedSessionStore.prototype.persist=function(){!1!==this.fireEvent("beforepersist")&&((new CQ_Analytics.SessionPersistence({container:"ClientContext"})).set(this.getStoreKey(),this.toString()),this.fireEvent("persist"))};
CQ_Analytics.PersistedSessionStore.prototype.setProperty=function(a,c){null==this.data&&this.init();this.data[a]=c;this.isPersisted(a)&&this.persist();this.fireEvent("update",a)};CQ_Analytics.PersistedSessionStore.prototype.setProperties=function(a){null==this.data&&this.init();var c=[],b=!1,d;for(d in a)a.hasOwnProperty(d)&&(c.push(d),this.data[d]=a[d],this.isPersisted(d)&&(b=!0));b&&this.persist();0<c.length&&this.fireEvent("update",c)};
CQ_Analytics.PersistedSessionStore.prototype.toString=function(){var a=null;if(this.data)for(var c in this.data)if(this.isPersisted(c)&&this.data.hasOwnProperty(c)){a=null===a?"":a+",";var b=c+"\x3d",d;(d=this.data[c])&&"string"==typeof d&&(d=d.replace(/,/g,"\x26#44;"),d=d.replace(/=/g,"\x26#61;"),d=d.replace(/\|/g,"\x26#124;"));a+=b+d}return a};
CQ_Analytics.PersistedSessionStore.prototype.parse=function(a){var c={};a=a.split(",");for(var b in a)if(a.hasOwnProperty(b)){var d=a[b].split("\x3d");if(2==d.length){var e=d[0];(d=d[1])&&"string"==typeof d&&(d=d.replace(/&#44;/g,","),d=d.replace(/&#61;/g,"\x3d"),d=d.replace(/&#124;/g,"|"));c[e]=d}}return c};CQ_Analytics.PersistedSessionStore.prototype.reset=function(a){null!=this.data&&(this.data={},this.persist(),this.data=null,a||this.fireEvent("update"))};
CQ_Analytics.PersistedSessionStore.prototype.removeProperty=function(a){null==this.data&&this.init();this.data[a]&&(delete this.data[a],this.isPersisted(a)&&this.persist());this.fireEvent("update",a)};CQ_Analytics.PersistedSessionStore.prototype.clear=function(){(new CQ_Analytics.SessionPersistence({container:"ClientContext"})).remove(this.getStoreKey());this.data=null};
CQ_Analytics.ClientContextMgr||(CQ_Analytics.ClientContextMgr=function(){this.clientcontextToServer=this.clientcontext=null;this.stores={};this.config=this.data=null;this.areStoresLoaded=this.isConfigLoaded=!1},CQ_Analytics.ClientContextMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ClientContextMgr.prototype.STOREKEY="CLIENTCONTEXT",CQ_Analytics.ClientContextMgr.prototype.STORENAME="clientcontext",CQ_Analytics.ClientContextMgr.prototype.INITIALIZATION_EVENT_TIMER=1E3,CQ_Analytics.ClientContextMgr.prototype.CONFIG_PATH=
CQ_Analytics.Utils.externalize("/etc/clientcontext/legacy/config.json",!0),CQ_Analytics.ClientContextMgr.prototype.init=function(){this.initialized||(this.clientcontext={},this.clientcontextToServer={});var a=(new CQ_Analytics.SessionPersistence({container:"ClientContext"})).get(this.getStoreKey());this.data=a?this.parse(a):{};this.initialized=!0;this.fireEvent("initialize",this)},CQ_Analytics.ClientContextMgr.prototype.getSessionId=function(){this.data.sessionId||this.setSessionId(CQ_Analytics.Utils.getUID());
return this.data.sessionId},CQ_Analytics.ClientContextMgr.prototype.setSessionId=function(a){a&&this.setProperty("sessionId",a)},CQ_Analytics.ClientContextMgr.prototype.getVisitorId=function(){return this.data.visitorId},CQ_Analytics.ClientContextMgr.prototype.setVisitorId=function(a){this.setProperty("visitorId",a)},CQ_Analytics.ClientContextMgr.prototype.getId=function(){var a=this.getVisitorId();return a?a:this.getSessionId()},CQ_Analytics.ClientContextMgr.prototype.isAnonymous=function(){return!this.getVisitorId()},
CQ_Analytics.ClientContextMgr.prototype.isMode=function(a){return CQ_Analytics.ClientContextMgr.ServerStorage.isMode(a)},CQ_Analytics.ClientContextMgr.prototype.get=function(a){null==this.clientcontext&&this.init();return a?this.clientcontextToServer:this.clientcontext},CQ_Analytics.ClientContextMgr.prototype.register=function(a){null==this.clientcontext&&this.init();var c=this;this.clientcontext[a.getName()]=a.getData();this.stores[a.getName()]=a;CQ_Analytics.StoreRegistry.register(a);var b=this.getStoreConfig(a.getName());
!1!==b.stats&&"false"!=b.stats&&(this.clientcontextToServer[a.getName()]=a.getData(b.excludedFromStats));this.initTimer&&(window.clearTimeout(this.initTimer),this.initTimer=null);this.initTimer=window.setTimeout(function(){c.fireEvent("storesinitialize");c.areStoresInitialized=!0},this.isConfigLoaded&&"undefined"!==typeof this.config.initializationEventTimer?this.config.initializationEventTimer:this.INITIALIZATION_EVENT_TIMER);a.addListener("update",function(){c.update(a)});CQ_Analytics.ClientContextMgr.ServerStorage.handleStoreRegistration(a);
this.addListener("clear",function(){a.clear()});this.fireEvent("storeregister",a);this.fireEvent("storeupdate",a)},CQ_Analytics.ClientContextMgr.prototype.update=function(a){null==this.clientcontext&&this.init();this.clientcontext[a.getName()]=a.getData();var c=this.getStoreConfig(a.getName());!1!==c.stats&&"false"!=c.stats&&(this.clientcontextToServer[a.getName()]=a.getData(c.excludedFromStats));this.fireEvent("storeupdate",a)},CQ_Analytics.ClientContextMgr.prototype.startPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.startPosting()},
CQ_Analytics.ClientContextMgr.prototype.stopPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.stopPosting()},CQ_Analytics.ClientContextMgr.prototype.post=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.post()},CQ_Analytics.ClientContextMgr.prototype.getCCMToJCR=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.getCCMToJCR()},CQ_Analytics.ClientContextMgr.prototype.getName=function(){return this.STORENAME},CQ_Analytics.ClientContextMgr.prototype.clear=
function(){this.clientcontextToServer=this.clientcontext=null;this.fireEvent("clear")},CQ_Analytics.ClientContextMgr.prototype.getRegisteredStore=function(a){return this.stores&&this.stores[a]?this.stores[a]:null},CQ_Analytics.ClientContextMgr.prototype.loadConfig=function(a,c){var b=function(d,e){"undefined"===typeof e&&(e={});d.config=e;d.isConfigLoaded=!0;d.fireEvent("configloaded");d.fireEvent("storesloaded");d.areStoresLoaded=!0};a?b(this,a):c?b(this,{}):(a={},a.path=CQ_Analytics.Utils.getPagePath(),
a.cq_ck=(new Date).valueOf(),c=this.CONFIG_PATH,c+="?"+CQ_Analytics.Utils.urlEncode(a),CQ_Analytics.Utils.load(c,function(d,e,f){d={};try{d=eval("config \x3d "+f.responseText)}catch(h){}b(this,d)},this))},CQ_Analytics.ClientContextMgr.prototype.getConfig=function(){return this.config},CQ_Analytics.ClientContextMgr.prototype.getStoreConfig=function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].store?this.config.configs[a].store:{}},CQ_Analytics.ClientContextMgr.prototype.getEditConfig=
function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].edit?this.config.configs[a].edit:{}},CQ_Analytics.ClientContextMgr.prototype.getUIConfig=function(a){return this.config&&this.config.configs&&this.config.configs[a]&&this.config.configs[a].ui?this.config.configs[a].ui:{}},CQ_Analytics.ClientContextMgr.prototype.getInitialData=function(a){return this.config&&this.config.data&&this.config.data[a]?this.config.data[a]:{}},CQ_Analytics.ClientContextMgr.prototype.getStores=
function(){return this.stores},CQ_Analytics.ClientContextMgr.prototype.onReady=function(a,c){a&&(this.areStoresLoaded?a.call(c):this.addListener("storesloaded",a,c))},CQ_Analytics.ClientContextMgr=new CQ_Analytics.ClientContextMgr,CQ_Analytics.CCM=CQ_Analytics.ClientContextMgr,CQ_Analytics.ClickstreamcloudMgr=CQ_Analytics.CCM,CQ_Analytics.ContextCloudMgr=CQ_Analytics.CCM,CQ_Analytics.ClientContextMgr.PATH=null,CQ_Analytics.ClientContextMgr.getClientContextURL=function(a){return CQ_Analytics.ClientContextMgr.PATH+
a},window.setTimeout(function(){CQ_Analytics.CCM.init()},1),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var a in CQ_Analytics.ClientContextMgr)delete CQ_Analytics.ClientContextMgr[a];CQ_Analytics.ClientContextMgr=null}catch(c){}CQ_Analytics.CCM=null}));
window.CQ_Analytics&&window.CQ_Analytics.ClientContextMgr&&!window.CQ_Analytics.ClientContextMgr.ServerStorage&&(CQ_Analytics.ClientContextMgr.ServerStorage=function(){this.initialized=this.posting=!1},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_PAGELOAD=1,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_TIMER=2,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_DATAUPDATE=4,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_TIMER=600,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PROCESS_TIMER=
60,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE=6,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PATH="/var/statistics/",CQ_Analytics.ClientContextMgr.ServerStorage.prototype.init=function(){if(this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER)){var a=this;(function(){a.timer=window.setInterval(function(){try{var c=parseInt(a.data.lastPost),b=!1;isNaN(c)?b=!0:(new Date).getTime()>c+1E3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_TIMER&&(b=
!0)}catch(d){}b&&a.post()},1E3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER)}).call(this)}this.initialized=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.isMode=function(a){return 0<(CQ_Analytics.CCM.POST_MODE&a)},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.handleStoreRegistration=function(a){this.initialized||this.init();this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE)&&a.addListener("persist",function(){CQ_Analytics.ClientContextMgr.ServerStorage.post(a)})},
CQ_Analytics.ClientContextMgr.ServerStorage.prototype.startPosting=function(){this.posting=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.stopPosting=function(){this.posting=!1},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.post=function(a,c){if(this.posting||c)try{var b=this.getCCMToJCR(a),d=CQ_Analytics.Utils.getTimestamp();b["./jcr:primaryType"]="nt:unstructured";b["./sessionId"]=CQ_Analytics.CCM.getSessionId();var e=this.POST_PATH+"clientcontext/";if(CQ_Analytics.CCM.isAnonymous()){var f=
CQ_Analytics.Utils.insert(CQ_Analytics.CCM.getId(),2,"/");e+="anonymous/"+f+"/"+d}else e+="users/"+CQ_Analytics.CCM.getId()+"/"+d;CQ_Analytics.Utils.post(e,null,b);this.lastPost=d}catch(h){}},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.getCCMToJCR=function(a){var c=CQ_Analytics.CCM.get(!0),b={},d;for(d in c)if(!a||d==a){var e=c[d];encodeURIComponent(d);if("object"==typeof e)for(var f in e){var h=e[f];f=f.replace(":","/");b["./"+d+"/./"+f]=h}else b["./"+d]=e}return b},CQ_Analytics.ClientContextMgr.ServerStorage=
new CQ_Analytics.ClientContextMgr.ServerStorage,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_PAGELOAD=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_PAGELOAD,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_DATAUPDATE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE,CQ_Analytics.ClickstreamcloudMgr.POST_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_PROCESS_TIMER=
CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE,CQ_Analytics.ClickstreamcloudMgr.POST_PATH=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PATH);
CQ_Analytics.SegmentMgr||(CQ_Analytics.SegmentMgr=function(){this.SEGMENTATION_ROOT="/etc/segmentation";this.SEGMENT_SELECTOR=".segment.js";this.SEGMENTATION_SCRIPT_LOADER="cq-segmentation-loader";this.segments={};this.boosts={};var a=this;this.fireUpdate=function(){a.fireEvent("update")};this.init()},CQ_Analytics.SegmentMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SegmentMgr.prototype.STORENAME="segments",CQ_Analytics.SegmentMgr.prototype.register=function(a,c,b){this.segments[a]=c;this.rulesCache&&
this.rulesCache[a]&&(this.rulesCache[a]=!1);this.boosts[a]=isNaN(b)?0:parseInt(b);this.fireUpdate()},CQ_Analytics.SegmentMgr.prototype.resolveArray=function(a,c,b){c=c||CQ_Analytics.ClientContextMgr.get();if(!(a instanceof Array))return this.resolve(a,c);b="AND"==b?"AND":"OR";for(var d="AND"==b,e=0;e<a.length;e++){var f=this.resolve(a[e],c);if("AND"==b){if(!0!==f)return f}else if(!0===f)return!0}return d},CQ_Analytics.SegmentMgr.prototype.resolve=function(a,c){c=c||CQ_Analytics.ClientContextMgr.get();
if(!a)return!1;if(a instanceof Array)return this.resolveArray(a,c);if(0!=a.indexOf(this.SEGMENTATION_ROOT))return!1;if(a==this.SEGMENTATION_ROOT||!this.segments[a])return!0;var b=a.substring(0,a.lastIndexOf("/"));if(0==b.indexOf(this.SEGMENTATION_ROOT)&&(b=this.resolve(b,c),!0!==b))return b;b="function(clientcontext, contextcloud, clickstreamcloud) { return true  \x26\x26 ( "+(this.segments[a]+" ) ");b+=";}";try{var d=null;this.rulesCache=this.rulesCache||{};this.rulesCache[a]?d=this.rulesCache[a]:
(eval("f \x3d "+b),this.rulesCache[a]=d);var e=null==d||d(c,c,c)}catch(f){return"Unresolved - Error while evaluating segment "+a+" : "+f.message}return!0===e},CQ_Analytics.SegmentMgr.prototype.getResolved=function(a){a=a||CQ_Analytics.ClientContextMgr.get();var c=[],b;for(b in this.segments)!0===this.resolve(b,a)&&c.push(b);return c},CQ_Analytics.SegmentMgr.prototype.getMaxBoost=function(a,c){if(!(a instanceof Array))return this.getBoost(a);for(var b=0,d=0;d<a.length;d++){var e=a[d];!0===this.resolve(e,
c)&&(e=this.boosts[e]||0,e>b&&(b=e))}return b},CQ_Analytics.SegmentMgr.prototype.getBoost=function(a){a instanceof Array||(a=[a]);return this.boosts[a]||0},CQ_Analytics.SegmentMgr.prototype.reload=function(a){a||(a=this.SEGMENTATION_ROOT);if(a){-1==a.indexOf(this.SEGMENT_SELECTOR)&&(a+=this.SEGMENT_SELECTOR);try{a+=(-1===a.indexOf("?")?"?":"\x26")+"_\x3d"+(new Date).getTime(),CQ_Analytics.Utils.load(a,function(c,b,d){d&&d.responseText&&eval(d.responseText)},this),CQ.HTTP.get(scripts[i].src)}catch(c){}}},
CQ_Analytics.SegmentMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.SegmentMgr.prototype.getProperty=function(a){return a},CQ_Analytics.SegmentMgr.prototype.getLink=function(a){return a+".html"},CQ_Analytics.SegmentMgr.prototype.getLabel=function(a){if(a){var c=a,b=c.lastIndexOf("/");-1!=b&&(c=c.substring(b+1,c.length));b=this.resolve(a);if(!0===b)return c;if(!0!==b)return'\x3cspan class\x3d"invalid" title\x3d"'+b+'" alt\x3d"'+b+'"\x3e'+c+"\x3c/span\x3e"}return a},CQ_Analytics.SegmentMgr.prototype.getPropertyNames=
function(){return this.getResolved()},CQ_Analytics.SegmentMgr=new CQ_Analytics.SegmentMgr,CQ_Analytics.SegmentMgr.loadSegments=function(a){CQ_Analytics.SegmentMgr.areSegmentsLoaded=!1;a&&0!==a.length?$CQ.ajax({url:CQ.shared.HTTP.externalize(a+this.SEGMENT_SELECTOR),dataType:"script",async:!0,cache:!0}).complete(function(){CQ_Analytics.SegmentMgr.areSegmentsLoaded=!0;CQ_Analytics.SegmentMgr.fireEvent("segmentsload")}):(CQ_Analytics.SegmentMgr.areSegmentsLoaded=!0,CQ_Analytics.SegmentMgr.fireEvent("segmentsload"))},
CQ_Analytics.SegmentMgr.renderer=function(a,c){if(a&&a.STORENAME==CQ_Analytics.SegmentMgr.STORENAME){var b=a.getPropertyNames(),d=[];d.push("\x3cdiv\x3e");for(var e=0;e<b.length;e++){var f=b[e];d.push('\x3cspan title\x3d"'+a.getProperty(f)+'" \x3e\x3ca href\x3d"'+CQ.shared.HTTP.externalize(a.getLink(f))+'"  title\x3d"'+a.getProperty(f)+'" \x3e'+a.getLabel(f)+"\x3c/a\x3e\x3c/span\x3e")}d.push("\x3c/div\x3e");$CQ("#"+c).children().remove();$CQ("#"+c).append(d.join(""))}},CQ_Analytics.ClientContextMgr.addListener("storeupdate",
CQ_Analytics.SegmentMgr.fireUpdate),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var a in CQ_Analytics.SegmentMgr)delete CQ_Analytics.SegmentMgr[a]}catch(c){}CQ_Analytics.SegmentMgr=null}));
CQ_Analytics.PageDataMgr||(CQ_Analytics.PageDataMgr=function(){},CQ_Analytics.PageDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.PageDataMgr.prototype.STORENAME="pagedata",CQ_Analytics.PageDataMgr.prototype.FORCE_EXPERIENCE_COOKIE="cq-forceexperience",CQ_Analytics.PageDataMgr.prototype.init=function(){this.data={};for(var a in this.initProperty)this.data[a]=this.initProperty[a];this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},CQ_Analytics.PageDataMgr.prototype.getLabel=
function(a){return a},CQ_Analytics.PageDataMgr.prototype.getLink=function(a){return""},CQ_Analytics.PageDataMgr.prototype.setExperience=function(a){CQ.shared.HTTP.setCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,a,"/")},CQ_Analytics.PageDataMgr.prototype.getExperience=function(){return CQ.shared.HTTP.getCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,"/")},CQ_Analytics.PageDataMgr.prototype.clearExperience=function(){CQ.shared.HTTP.clearCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,
"/")},CQ_Analytics.PageDataMgr=new CQ_Analytics.PageDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.loadInitProperties(CQ_Analytics.CCM.getInitialData(this.getName()));this.init();CQ_Analytics.CCM.register(this)},CQ_Analytics.PageDataMgr));
CQ_Analytics.BrowserInfo=function(){var a=navigator.userAgent.toLowerCase(),c=function(d){return d.test(a)},b=function(){if(c(/opera/))return{browserFamily:"Opera",browserVersion:""};if(c(/trident/)){var d={"7.0":"11","6.0":"10","5.0":"9","4.0":"8"},e=a.match(/trident\/([0-9\.]*)/),f="";e&&1<e.length&&(f=d[e[1]]);return{browserFamily:"IE",browserVersion:f}}return c(/edge/)?(e=a.match(/edge\/([0-9]*)/),f="",e&&1<e.length&&(f=e[1]),{browserFamily:"Edge",browserVersion:f}):c(/chrome/)?{browserFamily:"Chrome",
browserVersion:""}:c(/safari/)?c(/applewebkit\/4/)?{browserFamily:"Safari",browserVersion:"2"}:c(/version\/3/)?{browserFamily:"Safari",browserVersion:"3"}:c(/version\/4/)?{browserFamily:"Safari",browserVersion:"4"}:c(/version\/5/)?{browserFamily:"Safari",browserVersion:"5"}:c(/version\/6/)?{browserFamily:"Safari",browserVersion:"6"}:{browserFamily:"Safari",browserVersion:"7 or higher"}:c(/webkit/)?{browserFamily:"WebKit",browserVersion:""}:c(/msie/)?c(/msie 6/)?{browserFamily:"IE",browserVersion:"6"}:
c(/msie 7/)?{browserFamily:"IE",browserVersion:"7"}:c(/msie 8/)?{browserFamily:"IE",browserVersion:"8"}:c(/msie 9/)?{browserFamily:"IE",browserVersion:"9"}:c(/msie 10/)?{browserFamily:"IE",browserVersion:"10"}:{browserFamily:"IE",browserVersion:"11 or higher"}:c(/gecko/)?c(/rv:1\.8/)?{browserFamily:"Firefox",browserVersion:"2"}:c(/rv:1\.9/)?{browserFamily:"Firefox",browserVersion:"3"}:c(/rv:2.0/)?{browserFamily:"Firefox",browserVersion:"4"}:c(/rv:5./)?{browserFamily:"Firefox",browserVersion:"5"}:
c(/rv:6./)?{browserFamily:"Firefox",browserVersion:"6"}:c(/rv:7./)?{browserFamily:"Firefox",browserVersion:"7"}:c(/rv:8./)?{browserFamily:"Firefox",browserVersion:"8"}:c(/rv:9./)?{browserFamily:"Firefox",browserVersion:"9"}:{browserFamily:"Firefox",browserVersion:"10 or higher"}:c(/adobeair/)?{browserFamily:"Adobe AIR",browserVersion:""}:{browserFamily:"Unresolved",browserVersion:"Unresolved"}}.call();this.browserFamily=b.browserFamily;this.browserVersion=b.browserVersion;this.OSName=c(/windows 98|win98/)?
"Windows 98":c(/windows nt 5.0|windows 2000/)?"Windows 2000":c(/windows nt 5.1|windows xp/)?"Windows XP":c(/windows nt 5.2/)?"Windows Server 2003":c(/windows nt 6.0/)?"Windows Vista":c(/windows nt 6.1/)?"Windows 7":c(/windows nt 6.2/)?"Windows 8":c(/windows nt 6.3/)?"Windows 8.1":c(/windows nt 10.0/)?"Windows 10":c(/windows nt 4.0|winnt4.0|winnt/)?"Windows NT 4.0":c(/windows me/)?"Windows ME":c(/mac os x/)?c(/ipad/)||c(/iphone/)?"iOS":"Mac OS X":c(/macintosh|mac os/)?"Mac OS":c(/android/)?"Android":
c(/linux/)?"Linux":"Unresolved";this.deviceType=c(/ipad/)?"iPad":c(/iphone/)?"iPhone":c(/mobi/)?"Mobile":"Desktop";this.ua=a;/^https/i.test(window.location.protocol);this.screenResolution=screen.width+"x"+screen.height};
CQ_Analytics.BrowserInfo.prototype={getBrowserName:function(){return this.browserFamily+" "+this.browserVersion},getBrowserFamily:function(){return this.browserFamily},getBrowserVersion:function(){return this.browserVersion},getOSName:function(){return this.OSName},getScreenResolution:function(){return this.screenResolution},getDeviceType:function(){return this.deviceType},getUserAgent:function(){return this.ua},isMobile:function(a){a||(a=this.getDeviceType());a=a?a.toLowerCase():"desktop";return"desktop"!=
a},isIE:function(a){return"IE"==this.getBrowserFamily()&&(a?this.getBrowserVersion()==a:!0)},isIE6:function(){return this.isIE("6")},isIE7:function(){return this.isIE("7")},isIE8:function(){return this.isIE("8")},isIE9:function(){return this.isIE("9")}};CQ_Analytics.BrowserInfoInstance=new CQ_Analytics.BrowserInfo;
CQ_Analytics.MousePositionMgr||(CQ_Analytics.MousePositionMgr=function(){this.position={x:0,y:0};this.getPageX=function(c){var b=c.pageX;b||0===b||(b=c.clientX||0);return b};this.getPageY=function(c){var b=c.pageY;b||0===b||(b=c.clientY||0);return b};var a=this;this.timer=null;$CQ(document).bind("mousemove",function(c,b,d,e){if((c=c||window.event)&&!a.timer){var f=a.getPageX(c),h=a.getPageY(c);a.timer=setTimeout(function(){a.setPosition(f,h);a.timer=null},500)}});this.init()},CQ_Analytics.MousePositionMgr.prototype=
new CQ_Analytics.SessionStore,CQ_Analytics.MousePositionMgr.prototype.STORENAME="mouseposition",CQ_Analytics.MousePositionMgr.prototype.setPosition=function(a,c){this.position.x=a;this.position.y=c;this.fireEvent("update")},CQ_Analytics.MousePositionMgr.prototype.getProperty=function(a){return this.position[a]},CQ_Analytics.MousePositionMgr.prototype.getLabel=function(a){return a},CQ_Analytics.MousePositionMgr.prototype.getLink=function(a){return""},CQ_Analytics.MousePositionMgr.prototype.getPropertyNames=
function(){var a=[],c;for(c in this.position)a.push(c);return a},CQ_Analytics.MousePositionMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.MousePositionMgr.prototype.getData=function(a){return this.position},CQ_Analytics.MousePositionMgr.prototype.clear=function(){this.position={}},CQ_Analytics.MousePositionMgr=new CQ_Analytics.MousePositionMgr,CQ_Analytics.CCM.register(CQ_Analytics.MousePositionMgr));
CQ_Analytics.ClientContext||(CQ_Analytics.ClientContext=new function(){return{get:function(a,c){if(a){0!=a.indexOf("/")&&(a="/"+a);var b=a.split("/")[1];a=a.substring(a.indexOf("/"+b)+b.length+2,a.length);if(b=CQ_Analytics.CCM.getRegisteredStore(b))return a?((b=b.getProperty(a))&&c&&(b=CQ_Analytics.Variables.replaceVariables(b)),b):b}return null},set:function(a,c){if(a){0!=a.indexOf("/")&&(a="/"+a);var b=a.split("/")[1];a=a.substring(a.indexOf("/"+b)+b.length+2,a.length);(b=CQ_Analytics.CCM.getRegisteredStore(b))&&
a&&b.setProperty(a,c)}},clear:function(){var a=CQ_Analytics.CCM.getStores();if(a)for(var c in a)a[c].clear&&a[c].clear()},reset:function(){var a=CQ_Analytics.CCM.getStores();if(a)for(var c in a)a[c].reset&&a[c].reset()},persist:function(a){CQ_Analytics.ClientContextMgr.ServerStorage.post(a,!0)}}},window.ClientContext=CQ_Analytics.ClientContext,window.ContextCloud=CQ_Analytics.ClientContext);
CQ_Analytics.SurferInfoMgr||(CQ_Analytics.SurferInfoMgr=function(){},CQ_Analytics.SurferInfoMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SurferInfoMgr.prototype.STOREKEY="SURFERINFO",CQ_Analytics.SurferInfoMgr.prototype.STORENAME="surferinfo",CQ_Analytics.SurferInfoMgr.prototype.init=function(){this.data={};for(var a in this.initProperty)this.data[a]=this.initProperty[a];this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},CQ_Analytics.SurferInfoMgr.prototype.clear=
function(){this.data=null;this.initProperty={}},CQ_Analytics.SurferInfoMgr.prototype.getLabel=function(a){return a},CQ_Analytics.SurferInfoMgr.prototype.getLink=function(a){return""},CQ_Analytics.SurferInfoMgr=new CQ_Analytics.SurferInfoMgr,CQ_Analytics.CCM.addListener("configloaded",function(){var a=CQ_Analytics.BrowserInfoInstance;this.addInitProperty("browserFamily",a.getBrowserFamily());this.addInitProperty("browserVersion",a.getBrowserVersion());this.addInitProperty("browser","${/surferinfo/browserFamily} ${/surferinfo/browserVersion}");
this.addInitProperty("OS",a.getOSName());this.addInitProperty("resolution",a.getScreenResolution());this.addInitProperty("device",a.getDeviceType());this.addInitProperty("isMobile",a.isMobile());this.addInitProperty("userAgent",a.getUserAgent());var c=new Date;this.addInitProperty("day",c.getDate());this.addInitProperty("month",c.getMonth()+1);this.addInitProperty("year",c.getFullYear());this.addInitProperty("hours",c.getHours());this.addInitProperty("minutes",c.getMinutes());c="${/surferinfo/browserFamily}";
a.isMobile()&&(c="${/surferinfo/device}");this.addInitProperty("image",c);c=CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/surferinfo/resources/${/surferinfo/image}.png");this.addInitProperty("thumbnail",c);window.CQ_Analytics&&window.CQ_Analytics.MousePositionMgr&&CQ_Analytics.MousePositionMgr.addListener("update",function(){this.setProperty("mouse X",CQ_Analytics.MousePositionMgr.getProperty("x"));this.setProperty("mouse Y",CQ_Analytics.MousePositionMgr.getProperty("y"))},this);
this.addListener("update",function(){var b=this.getProperty("device"),d="${/surferinfo/browserFamily}";a.isMobile(b)&&(d="${/surferinfo/device}");this.getProperty("image")!=d&&this.setProperty("image",d)},this);this.init();CQ_Analytics.CCM.register(this)},CQ_Analytics.SurferInfoMgr));
CQ_Analytics.ProfileDataMgr||(CQ_Analytics.ProfileDataMgr=function(){this.addListener("beforepersist",function(){this.checkAuthorizableId()},this)},CQ_Analytics.ProfileDataMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ProfileDataMgr.prototype.STOREKEY="PROFILEDATA",CQ_Analytics.ProfileDataMgr.prototype.STORENAME="profile",CQ_Analytics.ProfileDataMgr.prototype.LOADER_PATH=CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.js",!0),CQ_Analytics.ProfileDataMgr.prototype.PROFILE_LOADER=
CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.json",!0),CQ_Analytics.ProfileDataMgr.prototype.init=function(){this.persistence=new CQ_Analytics.SessionPersistence({container:"ClientContext"});var a=this.persistence.get(this.getStoreKey());if(a&&""!=a)this.data=this.parse(a);else{this.data={};for(var c in this.initProperty)this.data[c]=this.initProperty[c]}this.persist();this.initialized=!0;this.fireEvent("initialize",this);this.fireEvent("update")},
CQ_Analytics.ProfileDataMgr.prototype.checkAuthorizableId=function(){this.data||this.init();this.data.authorizableId?CQ_Analytics.CCM.setVisitorId(this.data.authorizableId):CQ_Analytics.CCM.setVisitorId("")},CQ_Analytics.ProfileDataMgr.prototype.getLabel=function(a){return a},CQ_Analytics.ProfileDataMgr.prototype.getLink=function(a){return""},CQ_Analytics.ProfileDataMgr.prototype.clear=function(){this.persistence&&this.persistence.remove(this.getStoreKey());this.data=null;this.initProperty={}},CQ_Analytics.ProfileDataMgr.prototype.getLoaderURL=
function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/loader.json")},CQ_Analytics.ProfileDataMgr.prototype.loadProfile=function(a){var c=this.getLoaderURL();c=CQ_Analytics.Utils.addParameter(c,"authorizableId",a);try{var b=CQ.shared.HTTP.eval(c);if(b){this.data={};for(var d in b)this.data[d]=b[d];this.persist();this.fireEvent("initialize",this);this.fireEvent("update");CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload();return!0}}catch(e){console&&
console.log&&console.log("Error during profile loading",e)}return!1},CQ_Analytics.ProfileDataMgr=new CQ_Analytics.ProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.checkAuthorizableId();this.addListener("update",function(a,c){if("birthday"==c||!c){a=this.getProperty("birthday");c=this.getProperty("age");var b="";if(a)try{var d=function(k){var g=new Date(k.getFullYear(),0,0);g=new Date(g.getTime());g.setUTCHours(k.getUTCHours(),k.getUTCMinutes(),k.getUTCSeconds(),k.getUTCMilliseconds());
return(g.getTime()-k.getTime())/864E5*-1},e=new Date(Date.parse(a));if(isNaN(e.getTime()))b="";else{var f=new Date;if(d(e)==d(f)&&e.getMonth()==f.getMonth())b=CQ.shared.HTTP.externalize(CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/resources/birthday_cake.png"));else{var h=f.getFullYear()-e.getFullYear();b=d(e)>d(f)?h:Math.max(0,h-1)}}}catch(k){b=""}c!=b&&this.setProperty("age",b)}});CQ_Analytics.CCM.register(this)},CQ_Analytics.ProfileDataMgr));
</script>

</body>
</html>
