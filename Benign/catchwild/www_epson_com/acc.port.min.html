<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>acc.port.min.html</title>
</head>
<body>

<script>
ACC.port={_autoload:["bindPortMarketingPage","bindAddOrgPage","bindFilterOrganization","bindPortHomePage","bindPortContent"],bindPortMarketingPage:function(){$(".port-login input").on("blur keyup change",function(){if($("#loginForm").validate().checkForm()){$("#submit").prop("disabled",false)}else{$("#submit").prop("disabled","disabled")}if($("#j_password").hasClass("error")){$(this).removeClass("error")}});if($("#loginFormModal").length){$(".mobile-port-login-prompt a").off("click");$(".mobile-port-login-prompt a").on("click",function(){ACC.globalid.bindLoginModalForm();$("#loginFormModal input").on("blur keyup change",function(){if($("#loginFormModal").validate().checkForm()){$("#loginFormModal button[type=submit]").prop("disabled",false)}else{if(!$("#loginFormModal").hasClass("checkout-login-form")){$("#loginFormModal button[type=submit]").prop("disabled","disabled")}}if($("#j_password_modal").hasClass("error")){$(this).removeClass("error")}})})}$("#loginForm").validate({onkeyup:function(a,b){if(b.which===9&&this.elementValue(a)===""){return}else{this.element(a)}if($("#j_username").hasClass("valid")){$(".bi-check").show()}else{$(".bi-check").hide()}},rules:{j_password:{required:true},j_username:{required:true,email:true}},messages:{email:"Invalid email format"}})},bindAddOrgPage:function(){var a=$("#addNewOrgForm").length;if(a>0){var b=document.querySelector("#telephone");var d=$("#addNewOrgForm\\.country option:selected").val();if(!d){d="us"}var c=window.intlTelInput(b,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:d});$("#addNewOrgForm\\.country").on("keyup change",function(){var f=$("#addNewOrgForm\\.country  :selected").val();c.setCountry(f)})}$("#add-new-org-from form input, #add-new-org-from form select").on("keyup",function(){var g=false;$("#add-new-org-from form input, #add-new-org-from form select").each(function(){if($(this).val()==""&&!$(this).hasClass("address2-optional")&&!$(this).hasClass("region-input-multi")){g=true}});var f=true;$(".region-input-multi").each(function(){if($(this).val()!==""){f=false}});if(g||f){$("#submitAddOrg").attr("disabled","disabled")}else{$("#submitAddOrg").removeAttr("disabled")}});var e=$("#addNewOrgForm\\.country option:selected");if($(e).length&&$(e).val().length){ACC.port.loadRegionsFromCountry($(e).val(),"addNewOrgForm-select-region","isocode")}else{$("#addNewOrgForm-select-region").hide();$("input.addNewOrgForm-select-region").show()}$("#addNewOrgForm\\.country").on("keyup change",function(){var f=$("#addNewOrgForm\\.country  :selected").val();ACC.port.loadRegionsFromCountry(f,"addNewOrgForm-select-region","isocode")});$(document).on("click",".domain-orgs, .org-port-consent-check",function(f){if($(".domain-orgs").is(":checked")&&$(".org-port-consent-check").is(":checked")){$(".js-submitAddExisting").removeAttr("disabled")}else{$(".js-submitAddExisting").attr("disabled","disabled")}});$(document).on("keyup","#addNewOrgForm\\.zipcode",function(h){var g=$("#addNewOrgForm\\.country option:selected").val();var f=$(this).val();if(f.length>=5){$.ajax({url:"/util/get-address?postalCode="+f+"&countryIso="+g,type:"GET",success:function(k,j,l){if(k.city){$("#addNewOrgForm\\.city").val(k.city)}if(k.state){$("#addNewOrgForm-select-region").val(k.state);ACC.myaccount.processSelect($("#address\\.region"))}},error:function(k,j,l){console.log("error occurred while fetching address from zipcode")}})}});$("#addNewOrgForm").validate({onfocusout:function(f){$(f).valid()},focusInvalid:false,rules:{orgName:{required:true},industry:{required:true},countryIso:{required:true},line1:{required:true},zipCode:{required:true,checkZipcode:true},townCity:{required:true},regionIso:{required:true},regionText:{required:true},phoneNumber:{required:true}},submitHandler:function(){$("#submitAddOrg").attr("disabled","disabled");$("#addNewOrgForm").submit()}})},bindFilterOrganization:function(){$(".search-wrapper").on("mouseover",function(){$(this).find(".close-icon-for-name").removeClass("hidden")});$(".search-wrapper").on("mouseout",function(){$(this).find(".close-icon-for-name").addClass("hidden")});$(document).on("keydown",".js-filter-org-name",function(){$(".js-filter-zip-code").val("");$(".filter-orgs-zip").attr("disabled","disabled")});$(document).on("keydown",".js-filter-zip-code",function(){$(".js-filter-org-name").val("");$(".filter-orgs-name").attr("disabled","disabled")});$(document).on("click",".add-selected-org",function(b){b.preventDefault();var a=$("input:radio[name=organization]:checked").val();oFormObject=document.forms.organizationForm;oFormObject.elements.selectedOrgCode.value=a;$("#organizationForm").submit()});$(".js-filter-org-name").keyup(function(){if($(this).val().length>2){$(".filter-orgs-name").removeAttr("disabled")}else{$(".filter-orgs-name").attr("disabled","disabled")}});$(".js-filter-zip-code").keyup(function(){if($(this).val().length>4){$(".filter-orgs-zip").removeAttr("disabled")}else{$(".filter-orgs-zip").attr("disabled","disabled")}})},bindPortHomePage:function(){if($("body").hasClass("page-portCmsPage")){var a=window.location.hash;if(a&&a.length>1){ACC.port.loadPortPage(a.substring(1))}window.onhashchange=function(){var b=window.location.hash;if(b&&b.length>1){ACC.port.loadPortPage(b.substring(1))}}}},loadPortPage:function(a){$("body").addClass("show-opacity");$.ajax({url:"/my-account/port/load/"+a,type:"GET",success:function(c,b,d){$("#port-content").html("");if(c.includes("page-epsonGlobalIDLoginPage ")){window.location.href=$("#port-content").data("mktg-url")}else{if($(c).find("header").length){$("#port-content").append("<h4>"+$("#port-content").data("error")+"</h4>")}else{$("#port-content").append(c)}}ACC.port.loadData(a);ACC.port.bindPortContent();$("body").removeClass("show-opacity")}});$(".port-menu-link").removeClass("active-class");$('a[href="#'+a+'"]').parents(".port-menu-link").addClass("active-class");ACC.analytics.firePortMenuLink(a)},bindPortContent:function(){if($("body").hasClass("page-portCmsPage")){$(".c-hamburger").click(function(){$("body").addClass("show-opacity")});$(".table-filter").click(function(){$(".close-icon-for-name").css("display","block")});$(".close-icon-for-name").on("click",function(){$('input[type="text"]').val("");$(".close-icon-for-name").css("display","none");if(!$(".table-filter-btn").hasClass("disabled")){$(".table-filter-btn").addClass("disabled")}var d=$(".order-history-table table").DataTable();d.search("").draw()});$(".change-view").on("click",function(){$(".second-view").addClass("show-view");$(".first-view").css("display","none")});$(".edit-btn").click(function(){var e=$(this).data("toggle");$(".default-hide."+e).slideToggle();var d=$(this).data("text-edit");if($(this).text().trim()==d){$(this).text($(this).data("text-cancel"))}else{$(this).text(d)}});$("#resend-request-btn").click(function(d){d.preventDefault();$(this).prop("disabled",true);var e=$(this).html();$.ajax({url:"/my-account/port/request-access-reminder",type:"GET",success:function(g,f,h){if(g==="success"){ACC.analytics.firePortEvent("port_user_access_reminder_sent","account","/my-account/port/request-access-reminder","resend-request-btn","txt",e);window.location.href="/my-account/port"}else{alert(g)}}})});$("#accept-invite-btn").click(function(d){d.preventDefault();$(this).prop("disabled",true);$.ajax({url:"/my-account/port/accept-invite",type:"GET",success:function(f,e,g){if(f==="success"){window.location.href="/my-account/port"}else{alert(f)}}})});$(".bi-clipboard").click(function(d){d.preventDefault();var e=$("#agent-key-field").val();if(!navigator.clipboard){$(".clipboard-error").css("display","block");$(".clipboard-error").fadeOut(3000);$(".bi-clipboard").blur();return}navigator.clipboard.writeText(e).then(function(){$(".clipboard-conf").css("display","block");$(".clipboard-conf").fadeOut(3000);$(".bi-clipboard").blur()},function(f){$(".clipboard-error").css("display","block");$(".clipboard-error").fadeOut(3000);$(".bi-clipboard").blur()})});$(".detail-organization .epsonPortForm").on("submit",function(e){e.preventDefault();var d=$(this).find("button");$(d).click()});$(".detail-organization .epsonPortForm input, .detail-organization .epsonPortForm select").on("change",function(){$(this).closest(".epsonPortForm").find("button.change-view").prop("disabled",false)});var b=$("#org-phone-input").length;if(b>0){var a=$("#select-org-country option:selected").val();if(!a){a="us"}window.intlTelInput(document.querySelector("#org-phone-input"),{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:a})}$("#org-phone-input").on("blur keyup change focusout",function(){if($("#epsonPortPhoneForm").validate().checkForm()){$("#epsonPortPhoneForm").find("button[type=button]").prop("disabled",false)}else{$("#epsonPortPhoneForm").find("button[type=button]").prop("disabled","disabled")}});$("#epsonPortForm-orgAddress").validate({onfocusout:function(d){$(d).valid()},focusInvalid:false,rules:{countryIso:{required:true},line1:{required:true},townCity:{required:true},postcode:{required:true,checkZipcode:true}},submitHandler:function(){var g=$("#edit-org-form").serialize()+"&edit=address&"+$("#epsonPortForm-orgAddress").serialize();var d=$("#epsonPortForm-orgAddress").find('select[name="regionIso"]');var f=$(d).find("option:selected");if($("#regionTextInput:visible").length<1){$("#epsonPortForm-orgAddress").find('input[name="regionText"]').val("");$("#regionTextInput-error").hide()}else{$(d).val("")}var e=false;if(d&&$(d).find("option").length>1&&$("#regionTextInput:visible").length<1){if(!f||!$(f).val()||$(f).attr("id")==="region-prompt"){$(d).css("border","solid 2px red");e=true}}else{if(!$("#epsonPortForm-orgAddress").find('input[name="regionText"]').val()){$("#epsonPortForm-orgAddress").find('input[name="regionText"]').css("border","solid 2px red");e=true;$("#regionTextInput-error").show()}}var h=$("#select-org-country option:selected");if(!h||!$(h).val()||$(h).attr("id")==="country-prompt"){$("#select-org-country").css("border","solid 2px red");e=true}if(!e){$.ajax({url:"/my-account/port/org-details",type:"POST",data:g,success:function(k,j,l){$("#port-content").html("");if($(k).find("header").length){$("#port-content").append("<h4>"+$("#port-content").data("error")+"</h4>")}else{$("#port-content").append(k)}ACC.port.loadData("org-admins");ACC.port.bindPortContent();ACC.analytics.firePortEvent("organizational_details_updated","admin","/my-account/port/org-details","submit-address","btn",$("#submit-address").html())}})}}});$(".detail-organization .epsonPortForm button").click(function(){var k=$("#edit-org-form").serialize();var j=$(this).attr("id");var f=null;var h=$(this).html();var e=$(this).attr("id");if(j==="submit-name"){var d=$("#org-name-input").val();if(!d){$("#org-name-input").css("border","solid 2px red");return}k+="&edit=name&firstName="+d}else{if(j==="submit-industry"){var g=$("#select-industry option:selected");if(!g||!$(g).val()||$(g).attr("id")==="industry-prompt"){$("#select-industry").css("border","solid 2px red");return}k+="&edit=industry&industry="+$(g).val()}else{if(j==="submit-phone"){var l=$("#org-phone-input").val();if(!l){$("#org-phone-input").css("border","solid 2px red");return}k+="&edit=phone&phone="+l}else{if(j==="submit-address"){var m=false;var n=$("#epsonPortForm-orgAddress");return}}}}$.ajax({url:"/my-account/port/org-details",type:"POST",data:k,success:function(p,o,q){$("#port-content").html("");if($(p).find("header").length){$("#port-content").append("<h4>"+$("#port-content").data("error")+"</h4>")}else{$("#port-content").append(p)}ACC.port.loadData("org-admins");ACC.port.bindPortContent();if(f){$(".add-printercontainer").attr("data-country",f)}ACC.analytics.firePortEvent("organizational_details_updated","admin","/my-account/port/org-details",e,"btn",h)}})});var c=$("#select-org-country option:selected");if($(c).length&&$(c).attr("id")!=="country-prompt"){ACC.port.loadRegionsFromCountryForOrgEdit($(c).val(),"orgdetails-region",$("#select-org-country").data("existingregion"))}$("#select-org-country").on("keyup change",function(){var d=$("#select-org-country  :selected").val();ACC.port.loadRegionsFromCountry(d,"orgdetails-region","isocode")});$(".parts-order-form input, .parts-order-form select").on("keyup change",function(){if(!$("#infoCheck").is(":checked")||!$(".parts-order-form").validate().checkForm()||($('input[name="printheadQty"]').val()==0&&$('input[name="capQty"]').val()==0)){$("#submit-order-request").prop("disabled",true)}else{$("#submit-order-request").prop("disabled",false)}});$(".parts-order-form").validate({onfocusout:function(d){$(d).valid()},focusInvalid:false,rules:{firstName:{required:true},email:{required:true,email:true},organizationName:{required:true},countryIso:{required:true},line1:{required:true},townCity:{required:true},regionIso:{required:true},postcode:{required:true,checkZipcodeForPartsOrder:true},phone:{required:true},purchaserPhone:{required:true},infoCheck:{required:true}},submitHandler:function(){var d=0;$("input.parts-quantity").each(function(){d+=$(this).val()});if(d>0){$.ajax({url:"/my-account/port/order-parts",type:"POST",data:$(".parts-order-form").serialize(),success:function(g,f,h){$(".second-view").addClass("show-view");$(".first-view").css("display","none");ACC.analytics.firePortEvent("port_parts_order_request","checkout","/my-account/port/order-parts","submit-order-request","btn",$("#submit-order-request").html())}})}else{var e=$(".quantity-inputs").data("error");alert(e)}}});$(document).on("keyup","#partreq-select-postcode",function(g){var f=$("#partreq-select-country option:selected").val();var d=$(this).val();if(d.length>=5){$.ajax({url:"/util/get-address?postalCode="+d+"&countryIso="+f,type:"GET",success:function(h,e,j){if(h.city){$("#partreq-select-town").val(h.city)}if(h.state){$("#partreq-select-region").val(h.state)}},error:function(h,e,j){console.log("error occurred while fetching address from zipcode")}})}});$("#submit-order-request").click(function(d){d.preventDefault();var e=$(this).closest("form");$(e).submit()});$(".modal-content .request-done").click(function(){$(".second-view").removeClass("show-view");$(".first-view").css("display","table");ACC.port.loadPortPage("order-parts");$(".modal-backdrop").hide();window.location.reload()});var c=$("#partreq-select-country option:selected");if($(c).length&&$(c).attr("id")!=="country-prompt"){ACC.port.loadRegionsFromCountry($(c).val(),"partreq-select-region","isocode")}else{$("#partreq-select-country").addClass("not_chosen")}$(document).on("click","#partreq-select-country",function(d){$("#partreq-select-country").removeClass("not_chosen")});$(document).on("change","#partreq-select-country",function(d){doSelectCountry($("#partreq-select-country"))});$(".order-history-table tbody input[type=radio]").change(function(){if($(".order-history-table tbody input[type=radio]").attr("checked",true)){$(this).closest(".order-history-table tbody tr").toggleClass("tr-selected")}});$(".add-member").on("click",function(){ACC.port.bindModalButtons();$(".edit-user-modal-title").html($(".edit-user-modal-title").data("invite"));$("#close-modal-btn-invite-user").focus();$('input[name="portRole"]').on("click",function(){if($(this).val()==="admin"){$(".port-permission-row").hide()}else{$(".port-permission-row").show()}});$("#inviteForm input.name,#inviteForm input.email").val("");$("#inviteForm .role-radio input").prop("checked",false);$("#inviteForm .role-checkbox input").prop("checked",false);$("#inviteForm .role-radio #userRole").prop("checked",true);$("#inviteForm .edit-user-name .error,#inviteForm .edit-user-email .error").hide();$("#inviteForm").validate({rules:{name:{required:true},email:{required:true},"portRole[]":{required:true}},success:function(){$(".submit-invite").prop("disabled",false)},submitHandler:function(){$.ajax({url:"/my-account/port/invite-user",type:"POST",data:$("#edit-user-form").serialize()+"&"+$("#inviteForm").serialize(),success:function(e,d,f){if(e!=="success"){$("#portUserEmailInput-error").html(e);ACC.analytics.fireErrorEvent1("form_error","[serverside]","[Validity:Invite cannot be completed, the user is already a member of an organization]")}else{$(".second-view").addClass("show-view");$(".first-view").css("display","none");$("div[id=user-invited-conf]").css("display","block");ACC.port.loadData("org-members");ACC.analytics.firePortEvent("port_user_added","admin","/my-account/port/invite-user","invite-cta","btn",$(".invite-cta button").html())}},error:function(e,d,f){alert($(".submit-invite").data("error"))}})}})})}},bindModalButtons:function(){$(".close-modal-reset").click(function(){$(".second-view").removeClass("show-view");$(".first-view").css("display","block")})},loadRegionsFromCountry:function(b,a,c){$.ajax({url:"/util/get-regions?countryIso="+b,type:"GET",success:function(f,e,l){var j=f.label;var k=$("#region-prompt").html();if(f.regions!=null&&f.regions.length>0){$("#"+a).show();$("input."+a).hide();$("#regionTextInput-error").hide();$("#"+a).html('<option id="region-prompt" disabled="disabled" selected="selected">'+k+"</option>");for(var g=0;g<f.regions.length;g++){var h=f.regions[g];if(typeof c!=="undefined"&&c==="name"){$("#"+a).append('<option value="'+h.name+'">'+h.name+"</option>")}else{$("#"+a).append('<option value="'+h.isocode+'">'+h.name+"</option>")}}if(a=="productRegForm-subregion"){$("label.productRegForm-subregion").show()}}else{if(a=="productRegForm-subregion"){$("#"+a).html('<option id="region-prompt" disabled="disabled" selected="selected">'+k+"</option>");$("#"+a).append('<option value="N/A">N/A</option>');$("input."+a).val("N/A");$("input."+a).show()}else{$("#"+a).hide();$("#"+a+"-error").hide();$("input."+a).val("");$("input."+a).show()}}if(a=="partreq-select-region"){j+='<font class="req-label">*</font>';$("#partreq-select-region").addClass("not_chosen");$("#partreq-select-region").on("click",function(m){$("#partreq-select-region").removeClass("not_chosen")});$("#partreq-select-region").on("change",function(m){if($(this).val()===k||$(this).val()===""||$(this).val()===null){$("#partreq-select-region").addClass("not_chosen")}})}else{if(a=="productRegForm-subregion"){j+='<span class="required" aria-required="true">*</span>'}else{j+="*"}}$("label."+a).html(j);var d=$("#"+a).data("selected");if(typeof d!=="undefined"&&d!==null&&d!==""){$("#"+a).val(d)}}})},loadRegionsFromCountryForOrgEdit:function(b,a,c){$.ajax({url:"/util/get-regions?countryIso="+b,type:"GET",success:function(e,d,j){var h=e.label;if(e.regions.length>0){$("#"+a).show();$("input."+a).hide();$("#"+a).html('<option id="region-prompt" disabled="disabled" selected="selected">'+$("#region-prompt").html()+"</option>");for(var f=0;f<e.regions.length;f++){var g=e.regions[f];if(g.isocode==c){$("#"+a).append('<option value="'+g.isocode+'" selected="selected">'+g.name+"</option>")}else{$("#"+a).append('<option value="'+g.isocode+'">'+g.name+"</option>")}}}else{$("#"+a).hide();$("input."+a).val(c);$("input."+a).show()}h+="*";$("label."+a).html(h)}})},loadData:function(a){if(a==="order-parts"){$("#printer-list").addClass("loading");$.ajax({url:"/my-account/port/get-printers",type:"GET",success:function(d,b,j){if(d.length>0){$("#printer-list").html("");for(var e=0;e<d.length;e++){var f=d[e];var h="<tr>";h+='<td><input type="radio" id="css" class="form-check-input select-printer-radio" name="fav_language" value="css" data-serial="'+f.serialNumber+'" data-maxprintheadqty="'+f.maxPrintheadQty+'" data-maxcapqty="'+f.maxCapQty+'"/></td>';h+="<td>"+f.serialNumber+"</td>";h+="<td>"+f.name+"</td>";h+="<td>"+f.deviceId+"</td>";h+="<td>"+f.location+"</td>";h+="</tr>";$("#printer-list").append(h)}$("#printer-list").removeClass("loading");var g=$(".order-history-table table").DataTable({destroy:true,order:[[1,"asc"]],ordering:true,searching:true,lengthChange:false,pagingType:"simple",pageLength:5,infoCallback:function(o,r,l,k,p,q){var n=this.api();var m=n.page.info();ACC.port.updatePagination(m,r,l,10,p)}});$("#pgn-next-link").on("click",function(k){k.preventDefault();g.page("next").draw("page")});$("#pgn-prev-link").on("click",function(k){k.preventDefault();g.page("previous").draw("page")});$(".table-filter").on("keyup",function(k){if(k.keyCode===13){k.preventDefault()}if($(".table-filter").val().length>2||$(".table-filter").val().length===0){var l=g.search(this.value).draw()}if($(".table-filter").val().length>2){$(".table-filter-btn").removeClass("disabled")}else{if(!$(".table-filter-btn").hasClass("disabled")){$(".table-filter-btn").addClass("disabled")}}});$(".table-filter").on("focusout",function(){if(this.value!==""){ACC.analytics.fireSearchEventFilter("port_parts_order",this.value,g.page.info().recordsDisplay,"true")}})}else{$("#printer-list").removeClass("loading");$("#pgn-container").addClass("emptypagination")}$(document).on("click",".select-printer-radio",function(){$("#open-order-parts-form").removeAttr("disabled");$("#open-order-parts-form").off("click");$("#open-order-parts-form").on("click",function(){ACC.analytics.firePortEvent("port_parts_order_printer_selected","checkout","","open-order-parts-form","btn",$("#open-order-parts-form").html())});$("#order-parts-device").val($(this).data("serial"));$(".parts-order-form input").each(function(){if($(this).attr("type")!=="hidden"){$(this).removeClass("error");var k=$(this).data("initial");$(this).val(k?k:$(this).attr("type")==="number"?0:"");$(this).siblings("label.error").hide()}});$("#region-prompt").prop("selected",true);if($(this).data("maxprintheadqty")>0){$(".number-container-outer-printhead").show();$("#device-max-printhead-qty").attr("max",$(this).data("maxprintheadqty"))}else{$(".number-container-outer-printhead").hide()}if($(this).data("maxcapqty")>0){$(".number-container-outer-capqty").show();$("#device-max-cap-qty").attr("max",$(this).data("maxcapqty"))}else{$(".number-container-outer-capqty").hide()}if($(this).data("maxprintheadqty")<1&&$(this).data("maxcapqty")<1){$(".no-parts-order").show()}else{$(".no-parts-order").hide()}$(".qty-increase,.qty-decrease").off("click");$(".qty-increase,.qty-decrease").on("click",function(k){k.preventDefault();var m=$($(this).data("target"));var l=Number.parseInt($(m).val());if(Number.isNaN(l)){l=0}var n=l;if($(this).hasClass("qty-increase")){if(l<$(m).attr("max")){n+=1}else{}}else{if(l>0){n-=1}}$(m).val(n)})});var c=$(".add-printercontainer").data("country");if(!c){c="us"}window.intlTelInput(document.querySelector("#shippingPhone"),{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:c,autoPlaceholder:"off"});window.intlTelInput(document.querySelector("#purchaserPhone"),{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:c,autoPlaceholder:"off"})}})}else{if(a==="order-history"){$("#parts-request-list").addClass("loading");$.ajax({url:"/my-account/port/get-order-requests",type:"GET",success:function(d,b,h){if(d.length>0){$("#parts-request-list").html("");for(var e=0;e<d.length;e++){var f=d[e];var g="<tr>";g+="<td>"+f.device.serialNumber+"</td>";g+="<td>"+f.device.name+"</td>";g+="<td>"+f.printheadQty+"</td>";g+="<td>"+f.capQty+"</td>";g+='<td><span class="sort-date-hid">'+f.dateSubmitted+"</span>"+f.fmtDateSubmitted+"</td>";g+="<td>"+f.requestedBy.name+"</td>";g+="</tr>";$("#parts-request-list").append(g)}$("#parts-request-list").removeClass("loading");var c=$(".order-history-table table").DataTable({destroy:true,order:[[4,"desc"]],ordering:true,searching:true,lengthChange:false,pagingType:"simple",pageLength:10,infoCallback:function(n,q,k,j,o,p){var m=this.api();var l=m.page.info();ACC.port.updatePagination(l,q,k,5,o)}});$("#pgn-next-link").on("click",function(j){j.preventDefault();c.page("next").draw("page")});$("#pgn-prev-link").on("click",function(j){j.preventDefault();c.page("previous").draw("page")});$(".table-filter").on("keyup",function(j){if(j.keyCode===13){j.preventDefault()}if($(".table-filter").val().length>2||$(".table-filter").val().length===0){var k=c.search(this.value).draw()}if($(".table-filter").val().length>2){$(".table-filter-btn").removeClass("disabled")}else{if(!$(".table-filter-btn").hasClass("disabled")){$(".table-filter-btn").addClass("disabled")}}});$(".table-filter").on("focusout",function(){if(this.value!==""){ACC.analytics.fireSearchEventFilter("port_order_history",this.value,c.page.info().recordsDisplay,"true")}})}else{$("#parts-request-list").removeClass("loading")}$(".download-link a").attr("href",$(".download-link a").data("url"));$(".download-link a").on("click",function(j){ACC.analytics.fireTealiumEvent_5("port_download","content","purchasing","csv",$(".download-link a").data("url"),"port-order-request-download","txt",$("#port-order-request-download").html())})}})}else{if(a==="org-details"||a==="org-admins"){$(".admin-organization tbody").addClass("loading");$.ajax({url:"/my-account/port/get-org-admins",type:"GET",success:function(c,b,f){if(c.length>0){$(".admin-organization tbody").html("");for(var d=0;d<c.length;d++){var e=c[d];$(".admin-organization tbody").append("<tr><td>"+e.name+"</td><td>"+e.uid+"</td></tr>")}}$(".admin-organization tbody").removeClass("loading");$(".admin-organization table").DataTable({destroy:true,order:[[0,"asc"]],ordering:true,lengthChange:false,paging:false,info:false})}})}else{if(a==="manage-users"){ACC.port.loadData("org-members");ACC.port.loadData("join-requests")}else{if(a==="join-requests"){$("#join-requests").addClass("loading");$.ajax({url:"/my-account/port/get-join-requests",type:"GET",success:function(e,f,n){if(e.length>0){var c=$(".admin-organization").data("accept-text");var d=$(".admin-organization").data("deny-text");var h=$(".admin-organization").data("member-text");var k=$(".admin-organization").data("email-text");var j=$(".admin-organization").data("date-text");if($.fn.dataTable.isDataTable(".admin-organization table")){var m=$(".admin-organization table").DataTable();m.destroy(false)}$("#join-requests").empty();for(var g=0;g<e.length;g++){var l=e[g];var o="<tr data-email="+l.email+">";o+='<td class="member-name">'+l.name+"</td>";o+='<td class="member-email">'+l.email+"</td>";o+='<td><span class="sort-date-hid">'+l.dateRequested+"</span>"+l.fmtDateRequested+"</td>";if(l.decision){o+="<td></td><td></td>"}else{o+='<td><b id="accept-'+l.email+'" tabindex="0" data-label_text_1="'+c+'" data-element_type="txt" data-element_id="accept-'+l.email+'" class="accept-member mg-user-btn" data-toggle="modal" data-target="#myModal">'+c+" </b></td>";o+='<td><b id="deny-'+l.email+'" tabindex="0" data-label_text_1="'+d+'" data-element_type="txt" data-element_id="deny-'+l.email+'" class="deny-member mg-user-btn" data-toggle="modal" data-target="#denyModal">'+d+" </b></td>"}o+="</tr>";$("#join-requests").append(o)}$(".join-requests-mobile").empty();for(var g=0;g<e.length;g++){var l=e[g];var o='<div class="card">';o+='<div class="card-header" role="tab" id="heading'+g+'" data-member-name="'+l.name+'" data-member-email="'+l.email+'">';o+='<h5 class="mb-0">';o+='<a data-toggle="collapse" data-parent="#accordionEx" href="#collapse'+g+'" aria-expanded="true" aria-controls="collapse'+g+'">';o+=h;o+='<i class="bi-chevron-compact-up rotate-icon"></i> </a>';o+='<span><a href="#" class="accept-member accept-member-mobile mg-user-btn" data-toggle="modal" data-target="#myModal">'+c+' </a> <a href="#" class="deny-member deny-member-mobile mg-user-btn" data-toggle="modal" data-target="#denyModal">'+d+" </a></span> </h5> </div> ";o+='<div id="collapse'+g+'" class="collapse in" role="tabpanel" aria-labelledby="heading'+g+'" data-parent="#accordionEx" style="display:block;">';o+='<div class="card-body">';o+="<p>"+l.name+" </p>";o+='<b class="uppercase">'+k+"</b>";o+="<p>"+l.email+" </p>";o+="<b> "+j+"</b>";o+="<p>"+l.fmtDateRequested+" </p> </div></div></div>";$(".join-requests-mobile").append(o)}$("#join-requests").removeClass("loading");$(".admin-organization table").DataTable({order:[[0,"asc"]],ordering:true,lengthChange:false,paging:false,info:false});$(".accept-member").click(function(){$("#port-status-row").css("display","none");$(".request-submit").css("display","none");$(".remove-user-btn").css("display","none");$("#user-added-conf").css("display","block");$(".edit-user-modal-title").html($(".edit-user-modal-title").data("accept"));$(".edit-user-submit").html($(".edit-user-submit").data("acceptcta"));if($(this).hasClass("accept-member-mobile")){var r=$(this).closest("div");var q=$(r).data("member-name");var p=$(r).data("member-email")}else{var r=$(this).closest("tr");var q=$(r).find("td.member-name").html();var p=$(r).find("td.member-email").html()}$("#close-modal-btn-edit-user").focus();$("#edit-user-name").html(q);$("#edit-user-email").html(p);$("#portUserNameInput").val(q);$("#portUserEmailInput").val(p);$("#editUserForm input[type=radio],#editUserForm input[type=checkbox]").prop("checked",false);$('input[name="portRole"]').on("click",function(){if($(this).val()==="admin"){$("#port-permission-row").hide()}else{$("#port-permission-row").show()}});$("#editUserForm").validate({rules:{"portRole[]":{required:true}},success:function(){$(".edit-user-submit").prop("disabled",false)},submitHandler:function(){$.ajax({url:"/my-account/port/edit-user",type:"POST",data:$("#edit-user-form").serialize()+"&mode=accept&"+$("#editUserForm").serialize(),success:function(t,s,u){$(".second-view").addClass("show-view");$(".first-view").css("display","none");ACC.analytics.firePortEvent("port_user_modified","admin","/my-account/port/edit-user","edit-user-submit-btn","btn",$("#edit-user-submit-btn").html());ACC.port.loadData("manage-users")},error:function(t,s,u){alert($(".edit-user-submit").data("error"))}})}});ACC.port.bindModalButtons()});$(".deny-member").click(function(){$(".remove-user-submit").css("display","none");$(".deny-user-submit").css("display","block");if($(this).hasClass("deny-member-mobile")){var r=$(this).closest("div");var q=$(r).data("member-name");var p=$(r).data("member-email")}else{var r=$(this).closest("tr");var q=$(r).find("td.member-name").html();var p=$(r).find("td.member-email").html()}$("#prompt-user-name span").html(q);$("#prompt-user-email span").html(p);$(".remove-user-modal-text").css("display","none");$(".cancel-user-modal-text").css("display","none");$(".deny-user-modal-text").css("display","block");$("#close-modal-edit-prompt").focus()});$(".deny-user-submit").click(function(){var p=$("#prompt-user-email span").html();$.ajax({url:"/my-account/port/cancel-user",type:"POST",data:$("#edit-user-form").serialize()+"&mode=deny&email="+p,success:function(r,q,u){$("#denyModal").hide();$(".modal-backdrop").fadeOut(1000);$('.join-requests tr[data-email="'+p+'"]').addClass("hidden");var s=$(".admin-organization").data("noresults-text");if($("#join-requests tr:visible").length<1){$(".join-requests").addClass("hide-sort-empty");var t='<tr><td colspan="5" class="data-empty">';t+=s;t+="</td></tr>";$("#join-requests").append(t)}$('.join-requests-mobile div[data-member-email="'+p+'"]').addClass("hidden");if($(".join-requests-mobile .card-header:visible").length<1){$(".join-requests-mobile").append(s)}ACC.analytics.firePortEvent("port_user_denied","admin","/my-account/port/cancel-user","deny-user-submit-btn","btn",$("#deny-user-submit-btn").html())},error:function(r,q,s){alert($(".edit-user-submit").data("error"))}})})}else{$("#join-requests").removeClass("loading");$("#join-requests").empty();var b=$(".admin-organization").data("noresults-text");if($("#join-requests tr:visible").length<1){$(".join-requests").addClass("hide-sort-empty");var o='<tr><td colspan="5" class="data-empty">';o+=b;o+="</td></tr>";$("#join-requests").append(o)}}}})}else{if(a==="org-members"){$("#org-members").addClass("loading");$.ajax({url:"/my-account/port/get-org-members",type:"GET",success:function(b,c,h){if(b.length>0){var e=$(".order-history-table").data("edit-text");if($.fn.dataTable.isDataTable(".order-history-table table")){var j=$(".order-history-table table").DataTable();j.destroy(false)}$("#org-members").empty();for(var f=0;f<b.length;f++){var d=b[f];var k="<tr>";k+='<td class="member-name">'+d.name+"</td>";k+='<td class="member-role" data-role="'+d.portRole+'">'+d.portRoleLoc+"</td>";k+='<td class="member-permission" data-printer="'+d.permissionAddPrinter+'" data-order="'+d.permissionOrderParts+'">'+(d.permissionAddPrinter||d.permissionOrderParts?'<img src="/_ui/responsive/theme-blue/images/check.png" alt="">':"")+"</td>";k+='<td class="member-email">'+d.uid+"</td>";k+='<td class="member-status" data-status="'+d.status+'">'+d.statusLoc+"</td>";k+='<td><b id="edit-member-'+d.uid+'" tabindex="0" data-element_id="edit-member-'+d.uid+'" data-label_text_1="'+e+'" data-element_type="txt" class="edit-member mg-user-btn" data-toggle="modal" data-target="#myModal">'+e+"</b></td>";k+="</tr>";$("#org-members").append(k)}$("#org-members").removeClass("loading");let isOrdering=$(window).width()>767?true:false;var g=$(".order-history-table table").DataTable({order:[[0,"asc"]],ordering:isOrdering,searching:true,lengthChange:false,pagingType:"simple",infoCallback:function(p,s,m,l,q,r){var o=this.api();var n=o.page.info();ACC.port.updatePagination(n,s,m,10,q)}});$("#pgn-next-link").on("click",function(l){l.preventDefault();g.page("next").draw("page")});$("#pgn-prev-link").on("click",function(l){l.preventDefault();g.page("previous").draw("page")});$(".table-filter").on("keyup",function(l){if(l.keyCode===13){l.preventDefault()}if($(".table-filter").val().length>2||$(".table-filter").val().length===0){var m=g.search(this.value).draw()}if($(".table-filter").val().length>2){$(".table-filter-btn").removeClass("disabled")}else{if(!$(".table-filter-btn").hasClass("disabled")){$(".table-filter-btn").addClass("disabled")}}});$(".table-filter").on("focusout",function(){if(this.value!==""){ACC.analytics.fireSearchEventFilter("port_user",this.value,g.page.info().recordsDisplay,"true")}});$(document).on("keydown",".mg-user-btn",function(l){if(l.keyCode==13){$(this).click()}});$(document).on("click",".edit-member",function(){var q=$(this).closest("tr");$(".request-submit").css("display","none");$(".remove-user-btn").css("display","block");var p="remove";var m=$(q).find("td.member-status").data("status");$("#port-status-row").css("display","block");if(m==="pending"){p="cancel";$(".port-status-pending").show();$("#port-status-active").hide();$('#port-status-active select option[value="pending"]').prop("selected",true);$("#invite-resend-row").show()}else{$(".port-status-pending").hide();$("#port-status-active").show();$('#port-status-active select option[value="'+m+'"]').prop("selected",true);$("#invite-resend-row").hide()}$(".remove-user-btn").data("mode",p);$(".remove-user-btn").html($(".edit-user-modal-title").data(p));$("#user-updated-conf").css("display","block");$(".edit-user-modal-title").html($(".edit-user-modal-title").data("edit"));$("#close-modal-btn-edit-user").focus();$(".edit-user-submit").html($(".edit-user-submit").data("editcta"));var o=$(q).find("td.member-name").html();var n=$(q).find("td.member-email").html();$("#edit-user-name").html(o);$("#edit-user-email").html(n);$("#portUserNameInput").val(o);$("#portUserEmailInput").val(n);$('input[name="portRole"]').on("click",function(){if($(this).val()==="admin"){$("#port-permission-row").hide()}else{$("#port-permission-row").show()}});if($(q).find("td.member-role").data("role")==="admin"){$('input[name="portRole"][value="admin"]').prop("checked",true);$("#port-permission-row").hide()}else{$('input[name="portRole"][value="user"]').prop("checked",true);$("#port-permission-row").show();var l=$(q).find("td.member-permission");if($(l).data("printer")){$("#addPrinterPermission").prop("checked",true)}else{$("#addPrinterPermission").prop("checked",false)}if($(l).data("order")){$("#orderPartsPermission").prop("checked",true)}else{$("#orderPartsPermission").prop("checked",false)}}$("#editUserForm").validate({rules:{"portRole[]":{required:true}},success:function(){$(".edit-user-submit").prop("disabled",false)},submitHandler:function(){$.ajax({url:"/my-account/port/edit-user",type:"POST",data:$("#edit-user-form").serialize()+"&mode=edit&"+$("#editUserForm").serialize(),success:function(s,r,t){$(".second-view").addClass("show-view");$(".first-view").css("display","none");$("#close-modal-btn2-edit-user").focus();ACC.analytics.firePortEvent("port_user_modified","admin","/my-account/port/edit-user","edit-user-submit-btn","btn",$("#edit-user-submit-btn").html());ACC.port.loadData("manage-users")},error:function(s,r,t){alert($(".edit-user-submit").data("error"))}})}});ACC.port.bindModalButtons()});$(".remove-user-btn").click(function(){var l=$(this).data("mode");$(".remove-user-submit").data("mode",l);$("#prompt-user-name span").html($("#edit-user-name").html());$("#prompt-user-email span").html($("#edit-user-email").html());if(l==="cancel"){$(".cancel-user-modal-text").css("display","block");$(".remove-user-modal-text").css("display","none");$(".deny-user-modal-text").css("display","none")}else{$(".remove-user-modal-text").css("display","block");$(".deny-user-modal-text").css("display","none");$(".cancel-user-modal-text").css("display","none")}$("#close-modal-edit-prompt").focus()});$(".remove-user-submit").click(function(){var m=$(this).data("mode");var n=$(this).attr("id");var l=$(this).html();$.ajax({url:"/my-account/port/cancel-user",type:"POST",data:$("#edit-user-form").serialize()+"&mode="+m+"&email="+$("#prompt-user-email span").html(),success:function(p,o,q){$("#myModal").hide();$("#denyModal").hide();$(".modal-backdrop").fadeOut(1000);ACC.port.loadData("org-members");ACC.analytics.firePortEvent("port_user_removed","admin","/my-account/port/cancel-user",n,"btn",l)},error:function(p,o,q){alert($(".edit-user-submit").data("error"))}})})}else{window.location.href="/my-account/port"}}})}}}}}}},updatePagination:function(d,f,b,a,e){if(e>0){$("#pgn-container li").css("display","inline-block");var c=d.page+1;$("#pgn-container").data("page",c);$("#pgn-results-ind").html($("#pgn-results-ind").data("showing")+f+" - "+b+$("#pgn-results-ind").data("of")+e);$("#pgn-pages-ind").html($("#pgn-pages-ind").data("page")+(c)+$("#pgn-pages-ind").data("of")+d.pages);if(c>1){$("#pgn-prev-link").removeClass("disabled")}else{$("#pgn-prev-link").addClass("disabled")}if(c<d.pages){$("#pgn-next-link").removeClass("disabled")}else{$("#pgn-next-link").addClass("disabled")}}else{$("#pgn-container li").css("display","none");$("#pgn-container").addClass("emptypagination")}},handleErrors:function(a,c,b){}};var toggles=document.querySelectorAll(".c-hamburger");for(var i=toggles.length-1;i>=0;i--){var toggle=toggles[i];toggleHandler(toggle)}function toggleHandler(a){a.addEventListener("click",function(b){b.preventDefault();if(this.classList.contains("is-active")===true){this.classList.remove("is-active");$(".open").removeClass("oppenned")}else{this.classList.add("is-active");$(".open").addClass("oppenned");$("body").addClass("show-opacity")}})}function doSelectCountry(a){ACC.port.loadRegionsFromCountry($("#partreq-select-country option:selected").val(),"partreq-select-region","isocode");let countryIso=$(a).val();if(countryIso===$("#country-prompt").val()){$("#partreq-select-country").addClass("not_chosen")}document.querySelectorAll(".telephone").forEach(function(b){window.intlTelInput(b,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.3/build/js/utils.js",initialCountry:countryIso,autoPlaceholder:"off"})})}$(".sub-menu li a, .close-slide-menu").click(function(a){$(".open").removeClass("oppenned");$(".c-hamburger").removeClass("is-active");$("body").removeClass("show-opacity")});$(window).on("load",function(){if($(".js-org-found").length||$(".js-zip-found").length){$(".organization-filter-for-mobile .panel-title").trigger("click");if($(".js-zip-found").length){$(".nav-tabs li:first-child").removeClass("active");$(".tab-content div:first-child").removeClass("active");$(".nav-tabs li:last-child").addClass("active");$(".tab-content div:last-child").addClass("active")}}});$(document).ready(function(){$(".organization-filter-for-mobile .panel-title").click(function(){$(".panel").toggleClass("add-background")});$(window).on("orientationchange",function(a){$(".c-hamburger").removeClass("is-active");$("nav").removeClass("oppenned");$("body").removeClass("show-opacity")});if(typeof $(window).orientationchange!=="undefined"){$(window).orientationchange()}});
</script>

</body>
</html>
