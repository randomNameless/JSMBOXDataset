<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p-c258ee3b.html</title>
</head>
<body>

<script>
import{h as t,f as i,F as e}from"./p-5925f187.js";import{B as s}from"./p-d83eaf95.js";import{a as n}from"./p-f085f17a.js";import{D as o}from"./p-4fb8ce4b.js";import{d as r}from"./p-e48090a7.js";import{e as u,a as l}from"./p-2002205f.js";import{i as a}from"./p-c86021c8.js";const h=(i,e)=>{const s=()=>{const t="flex bg-background w-full border border-neutral rounded-md focus-within:ring";const e=i.disabled?"focus-within:border-disabled focus-within:ring-neutral":"focus-within:border-primary focus-within:ring-ring-primary";const s=i.textArea?"absolute top-0 left-0":"relative h-full";return[t,e,s].join(" ")};return t("div",{part:"wrapper",class:s(),onFocusout:i.onFocusout},e)};const d=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M15 1.00012L1.00012 14.9999" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n<path d="M0.999878 1L14.9999 15" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n`;const c=({inputRef:i,bindings:e,onClick:n,...o})=>t("div",{part:"clear-button-wrapper",class:"ml-2 flex items-start items-center justify-center py-2"},t(s,{style:"text-transparent",part:"clear-button",class:"text-neutral-dark flex h-8 w-8 shrink-0 items-center justify-center",onClick:()=>{n===null||n===void 0?void 0:n();i===null||i===void 0?void 0:i.focus()},ariaLabel:e.i18n.t("clear"),...o},t("atomic-icon",{part:"clear-icon",icon:d,class:"h-4 w-4"})));function g(t){return{role:"combobox",autocomplete:"off",autocapitalize:"off",autocorrect:"off",...t.activeDescendant&&{"aria-activedescendant":t.activeDescendant},"aria-expanded":`${t.hasSuggestions&&t.expanded}`,"aria-autocomplete":"both","aria-haspopup":"true","aria-controls":t.id}}function f(t,i){const e=t===null||t===void 0?void 0:t.parentNode;if(!e){return}if(t.value==="\n"){return}e.dataset.replicatedValue=i!==null&&i!==void 0?i:t.value}function v(t){const i=t===null||t===void 0?void 0:t.parentNode;if(i){delete i.dataset.replicatedValue}}function p(t){const i=t===null||t===void 0?void 0:t.parentNode;if(i){i.classList.remove("expanded")}}function m(t){const i=t===null||t===void 0?void 0:t.parentNode;if(i){i.classList.add("expanded")}}const b=({textAreaRef:i,loading:e,bindings:s,onInput:n,onFocus:o,onBlur:r,onChange:u,onKeyDown:l,onKeyUp:a,value:h,ariaLabel:d,onClear:b,popup:w,...x})=>t("div",{class:"flex grow overflow-hidden"},t("div",{part:"textarea-expander",class:"grid grow overflow-hidden"},t("textarea",{part:"textarea","aria-label":d,placeholder:s.i18n.t("search"),class:"placeholder-neutral-dark",rows:1,onInput:t=>{n===null||n===void 0?void 0:n(t);f(i)},onKeyDown:t=>{f(i);if(t.key==="Enter"){if(t.shiftKey){return}t.preventDefault()}l===null||l===void 0?void 0:l(t)},onKeyUp:t=>{a===null||a===void 0?void 0:a(t);if(t.key==="Enter"){t.preventDefault();return}f(i)},onBlur:t=>{r===null||r===void 0?void 0:r(t);p(i);f(i)},onChange:t=>{u===null||u===void 0?void 0:u(t);f(i)},onFocus:t=>{o===null||o===void 0?void 0:o(t);const e=t.target;f(i!==null&&i!==void 0?i:e);m(i!==null&&i!==void 0?i:e)},autocomplete:"off",...w&&g(w),...x,value:h})),e&&t("div",{class:"searchbox-button-wrapper ml-2 flex items-center justify-center"},t("span",{part:"loading",class:"loading mr-2 grid h-5 w-5 animate-spin place-items-center rounded-full bg-gradient-to-r"})),!e&&h&&t(c,{inputRef:i,bindings:s,onClick:()=>{b();v(i)}}));const w=`<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">\n<circle cx="7" cy="7" r="6.5" stroke="currentColor"/>\n<path d="M16 16L12 12" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n`;function x(t,i){let e;const s=new Promise(((t,s)=>{e=setTimeout((()=>{s(new Error("Promise timed out."))}),i)}));return Promise.race([t,s]).then((()=>{clearTimeout(e)}))}class S{constructor(t){this.ownerSearchBoxProps=t;this.suggestions=[];this.leftSuggestionElements=[];this.rightSuggestionElements=[];this.leftPanel=undefined;this.rightPanel=undefined;this.activeDescendant="";this.suggestedQuery="";this.queryDataAttribute="data-query";this.suggestionEvents=[];this.previousActiveDescendantElement=null;this.leftSuggestions=[];this.rightSuggestions=[];this.triggerSuggestions=r((()=>this.executeQuerySuggestion()),this.ownerSearchBoxProps.getSuggestionDelay())}get partialSuggestionBindings(){return{suggestedQuery:()=>this.suggestedQuery,clearSuggestions:()=>this.clearSuggestions(),triggerSuggestions:()=>this.triggerSuggestions(),getSuggestions:()=>this.suggestions,getSuggestionElements:()=>this.allSuggestionElements}}get activeDescendantElement(){var t,i;if(!this.hasActiveDescendant){return null}return((t=this.leftPanel)===null||t===void 0?void 0:t.querySelector(`#${this.activeDescendant}`))||((i=this.rightPanel)===null||i===void 0?void 0:i.querySelector(`#${this.activeDescendant}`))||null}onSubmit(){this.clickOnActiveElement();this.clearSuggestions()}updateActiveDescendant(t=""){this.activeDescendant=t;i(this.ownerSearchBoxProps.getHost())}clickOnActiveElement(){var t;(t=this.activeDescendantElement)===null||t===void 0?void 0:t.click();this.updateActiveDescendant()}isRightPanelInFocus(){if(n(this.panelInFocus)||n(this.rightPanel)){return false}return this.panelInFocus===this.rightPanel}initializeSuggestions(t){this.suggestions=this.suggestionEvents.map((i=>i(t)))}registerSuggestionsFromEvent(t,i){t.preventDefault();t.stopPropagation();this.suggestionEvents.push(t.detail);this.suggestions.push(t.detail(i))}registerSuggestions(t){this.suggestions.push(t)}get isDoubleList(){return Boolean(this.leftSuggestionElements.length&&this.rightSuggestionElements.length)}focusPanel(t){const i=t==="left"?this.leftPanel:this.rightPanel;if(this.panelInFocus===i){return}if(i&&i.firstElementChild){const t=this.previousActiveDescendantElement&&i.contains(this.previousActiveDescendantElement);const e=t?this.previousActiveDescendantElement:i.firstElementChild;this.updateDescendants(e.id)}}clearSuggestions(){this.clearSuggestionElements();this.updateActiveDescendant()}focusNextValue(){if(!this.hasSuggestions||!this.nextOrFirstValue){return}this.focusValue(this.nextOrFirstValue)}focusValue(t){this.updateActiveDescendant(t.id);this.scrollActiveDescendantIntoView();this.updateQueryFromSuggestion()}onSuggestionMouseOver(t,i,e){const s=i==="left"?this.leftPanel:this.rightPanel;if(this.panelInFocus===s){this.updateActiveDescendant(e)}else{this.updateDescendants(e)}if(t.query){this.updateSuggestedQuery(t.query)}}onSuggestionClick(t,i){if(t.query){this.clearSuggestions();this.updateOwnerSearchboxQuery(t.query)}t.onSelect&&t.onSelect(i)}get hasSuggestions(){return!!this.allSuggestionElements.length}get allSuggestionElements(){return[...this.leftSuggestionElements,...this.rightSuggestionElements]}focusPreviousValue(){if(this.firstValue===this.activeDescendantElement){this.updateActiveDescendant();return}if(!this.hasSuggestions||!this.previousOrLastValue){return}this.focusValue(this.previousOrLastValue)}get hasActiveDescendant(){return this.activeDescendant!==""}async executeQuerySuggestion(){var t;this.updateActiveDescendant();const i=await Promise.allSettled(this.suggestions.map((t=>x(t.onInput?t.onInput():Promise.resolve(),this.ownerSearchBoxProps.getSuggestionTimeout()))));const e=[];i.forEach(((t,i)=>{if(t.status==="fulfilled"){e.push(this.suggestions[i])}else{this.ownerSearchBoxProps.getLogger().warn("Some query suggestions are not being shown because the promise timed out.")}}));const s=(t,i=false)=>e.filter((e=>e.panel===t||!e.panel&&i)).sort(this.sortSuggestions);this.leftSuggestions=s("left",true);this.leftSuggestionElements=this.getAndFilterLeftSuggestionElements();this.rightSuggestions=s("right");this.rightSuggestionElements=this.getSuggestionElements(this.rightSuggestions);const n=((t=this.allSuggestionElements.find(u))===null||t===void 0?void 0:t.query)||"";this.updateSuggestedQuery(n)}get lastValue(){var t;return(t=this.panelInFocus)===null||t===void 0?void 0:t.lastElementChild}get previousOrLastValue(){var t;if(!this.hasActiveDescendant){return this.lastValue}return((t=this.activeDescendantElement)===null||t===void 0?void 0:t.previousElementSibling)||this.lastValue}sortSuggestions(t,i){return t.position-i.position}get nextOrFirstValue(){var t;if(!this.hasActiveDescendant){return this.firstValue}return((t=this.activeDescendantElement)===null||t===void 0?void 0:t.nextElementSibling)||this.firstValue}get firstValue(){var t;return(t=this.panelInFocus)===null||t===void 0?void 0:t.firstElementChild}get panelInFocus(){var t,i;if((t=this.leftPanel)===null||t===void 0?void 0:t.contains(this.activeDescendantElement)){return this.leftPanel}if((i=this.rightPanel)===null||i===void 0?void 0:i.contains(this.activeDescendantElement)){return this.rightPanel}return this.leftPanel||this.rightPanel}scrollActiveDescendantIntoView(){var t;(t=this.activeDescendantElement)===null||t===void 0?void 0:t.scrollIntoView({block:"nearest"})}updateQueryFromSuggestion(){var t;const i=(t=this.activeDescendantElement)===null||t===void 0?void 0:t.getAttribute(this.queryDataAttribute);this.updateOwnerSearchboxQuery(i||"")}updateOwnerSearchboxQuery(t){if(t&&this.ownerSearchBoxProps.getSearchBoxValue()!==t){this.ownerSearchBoxProps.updateQuery(t);this.updateSuggestedQuery(t)}}async updateSuggestedQuery(t){await Promise.allSettled(this.suggestions.map((i=>x(i.onSuggestedQueryChange?i.onSuggestedQueryChange(t):Promise.resolve(),this.ownerSearchBoxProps.getSuggestionTimeout()))));this.suggestedQuery=t;this.updateSuggestionElements(t);i(this.ownerSearchBoxProps.getHost())}updateSuggestionElements(t){if(!this.isPanelInFocus(this.leftPanel,t)){this.leftSuggestionElements=this.getAndFilterLeftSuggestionElements()}if(!this.isPanelInFocus(this.rightPanel,t)){this.rightSuggestionElements=this.getSuggestionElements(this.rightSuggestions)}}forceUpdate(){this.updateSuggestionElements(this.suggestedQuery);i(this.ownerSearchBoxProps.getHost())}isPanelInFocus(t,i){var e;if(!this.activeDescendantElement){return false}if(i){const e=o.sanitize(i);return!!(t===null||t===void 0?void 0:t.querySelector(`[${this.queryDataAttribute}="${e}"]`))}return((e=this.activeDescendantElement)===null||e===void 0?void 0:e.closest("ul"))===t}getAndFilterLeftSuggestionElements(){const t=this.getSuggestionElements(this.leftSuggestions);const i=new Set;const e=t.filter((t=>{if(n(t.query)){return true}if(i.has(t.query)){return false}else{i.add(t.query);return true}}));return e}getSuggestionElements(t){const i=t.map((t=>t.renderItems())).flat();const e=this.ownerSearchBoxProps.getNumberOfSuggestionsToDisplay()+i.filter(l).length;return i.slice(0,e)}updateDescendants(t=""){const i=this.activeDescendantElement;this.previousActiveDescendantElement=i;this.updateActiveDescendant(t)}clearSuggestionElements(){this.leftSuggestionElements=[];this.rightSuggestionElements=[]}}const y="data-query";function k(t,i){let e="suggestion";if(i){e+=" active-suggestion"}if(t.query){e+=" suggestion-with-query"}if(t.part){e+=` ${t.part}`}return e}function j(t){return`flex px-4 min-h-[40px] items-center text-left text-neutral-dark cursor-pointer ${t?"bg-neutral-light":""}`}function D(t){return t instanceof HTMLElement}function E({renderedSuggestion:t,suggestion:i}){if(D(i.content)){t.replaceChildren(i.content)}}function C({bindings:t,renderedSuggestion:i,suggestion:e,side:s,index:n,lastIndex:o,isDoubleList:r,isButton:u}){var l,h,d;const c=(d=(h=(l=e.ariaLabel)!==null&&l!==void 0?l:e.query)!==null&&h!==void 0?h:i.innerText)!==null&&d!==void 0?d:t.i18n.t("no-title");const g=a()&&u?t.i18n.t("search-suggestion-button",{label:c,interpolation:{escapeValue:false}}):c;const f=n+1;const v=o+1;if(!r){return t.i18n.t("search-suggestion-single-list",{label:g,position:f,count:v,interpolation:{escapeValue:false}})}return t.i18n.t("search-suggestion-double-list",{label:g,position:f,count:v,side:t.i18n.t(s==="left"?"left":"right"),interpolation:{escapeValue:false}})}function L(i){return!D(i.content)?i.content:t(e,null)}function F({bindings:t,id:i,suggestion:e,isSelected:s,side:n,index:o,lastIndex:r,isDoubleList:u},l){return{id:i,key:e.key,part:k(e,s),class:j(s),ref:i=>{if(!i){return}E({renderedSuggestion:i,suggestion:e});i.setAttribute("aria-label",C({bindings:t,renderedSuggestion:i,suggestion:e,side:n,index:o,lastIndex:r,isDoubleList:u,isButton:l}))}}}const P=i=>t("span",{...F(i,false)},L(i.suggestion));const V=i=>t("button",{...F(i,true),onMouseDown:t=>t.preventDefault(),onClick:t=>{var e;return(e=i.onClick)===null||e===void 0?void 0:e.call(i,t)},onMouseOver:t=>{var e;return(e=i.onMouseOver)===null||e===void 0?void 0:e.call(i,t)},[y]:i.suggestion.query},L(i.suggestion));export{V as B,b as S,S as a,P as b,h as c,w as d};
//# sourceMappingURL=p-c258ee3b.js.map
</script>

</body>
</html>
