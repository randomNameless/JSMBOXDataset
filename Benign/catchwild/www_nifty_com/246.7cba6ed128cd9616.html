<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>246.7cba6ed128cd9616.html</title>
</head>
<body>

<script>
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[246],{2064:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var a=n(5893),r=n(3985),l=n.n(r);let i=e=>{let{onClick:t}=e;return(0,a.jsx)("div",{role:"presentation",className:l().close,onClick:t})}},5246:function(e,t,n){"use strict";n.r(t),n.d(t,{WeatherModal:function(){return R}});var a=n(5893),r=n(3253),l=n.n(r),i=n(2064),s=n(7294);let o=()=>{let[e,t]=(0,s.useState)("weather"),[n,a]=(0,s.useState)(null);return{modalView:e,selectedPrefecture:n,navigateToCurrentWeather:()=>{t("weather")},navigateToPrefectureList:()=>{t("prefectures")},navigateToMunicipalityList:e=>{a(e),t("municipalities")},resetModal:()=>{t("weather"),a(null)}}};var c=n(9755),d=n.n(c),h=n(8767),p=n(2937),m=n(5485);let u=m.z.object({id:m.z.string(),name:m.z.string(),todayPollenText:m.z.string(),todayPollenLevel:m.z.string(),todayPollenIcon:m.z.string(),tomorrowPollenText:m.z.string(),tomorrowPollenLevel:m.z.string(),tomorrowPollenIcon:m.z.string()});var x=n(2778),g=n(1958);let j=async(e,t)=>{let n;let a="/api/pollen?prefectureId=".concat(e),r=await p.ZP.get(a,(0,g.SH)()).catch(e=>{throw x.b$.error({msg:{id:"POLLEN-PUBLIC-001",body:"データ取得先が不正です。",detail:e.message,path:a}}),e});if(!r.ok)throw x.b$.error({msg:{id:"POLLEN-PUBLIC-002",body:"APIからのステータス: ".concat(r.status,"レスポンスエラーが返ってきました。"),detail:r.statusText,path:a}}),Error(r.statusText);try{let e=await r.text();n=e;let a=u.array().parse(JSON.parse(e)).find(e=>e.id===t);if(void 0===a)throw Error("指定した市区町村IDに関する花粉情報が見つかりませんでした。");return a}catch(e){throw x.b$.error({msg:{id:"POLLEN-PUBLIC-003",body:"不正なデータ形式です。取得データ: ".concat(n),detail:e.message,path:a}}),e}},v=e=>{let{location:t,isPollenShow:n}=e,a=t&&t.prefecture?t.prefecture.id:void 0,r=t?t.municipality?t.municipality.id:t.prefecture?null==t?void 0:t.prefecture.mainMunicipalityCode:void 0:void 0,{data:l,error:i,isLoading:s,isSuccess:o,isError:c,refetch:d}=(0,h.useQuery)(["pollen",a,r],()=>j(a,r),{retry:!1,enabled:n&&!!a&&!!r});return{pollen:l,error:i,isLoading:s,isSuccess:o,isError:c,refetch:d}};var y=n(3750);let f=e=>{let{isPollenShow:t}=e,{location:n}=(0,y.N5)(),{pollen:a}=v({location:n,isPollenShow:t});return{pollen:a}},b=()=>{let{location:e}=(0,y.N5)(),{weather:t}=(0,y.GE)(e);return{location:e,weather:t}},N=e=>{switch(e){case 0:return"ほとんど停滞";case 1:return"北北東";case 2:return"北東";case 3:return"東北東";case 4:return"東";case 5:return"東南東";case 6:return"南東";case 7:return"南南東";case 8:return"南";case 9:return"南南西";case 10:return"南西";case 11:return"西南西";case 12:return"西";case 13:return"西北西";case 14:return"北西";case 15:return"北北西";case 16:return"北";default:return"-"}},w=e=>{let t=e.getMonth()+1,n=e.getDate(),a=e.getHours();return"".concat(t,"月").concat(n,"日").concat(a,"時")},k=e=>{let{typhoonInfo:t,typhoonDisp:n}=e;if(!t||0===t.length||!n||0===n.length)return(0,a.jsx)(a.Fragment,{});let r=t&&t.length>0?t.reduce((e,t)=>e.updatedAt>t.updatedAt?e:t):void 0,l=n&&n.length>0?n.reduce((e,t)=>e.updatedAt>t.updatedAt?e:t):void 0,i=N(r?r.direction:-1);return(0,a.jsxs)("div",{className:"wInfosec",style:{textAlign:"left"},"data-testid":"typhoon-item",children:[(0,a.jsx)("div",{className:"cttl pkg",children:(0,a.jsx)("div",{className:"ttl fontW",children:"台風情報"})}),(0,a.jsx)("div",{className:"prvCnInr",children:(0,a.jsxs)("div",{className:"pkg",children:[(0,a.jsx)("div",{className:"floatL photo",children:(0,a.jsx)("a",{"data-testid":"typhoon-item-link1",href:"http://weather.nifty.com/typhoon.htm",children:(0,a.jsx)("img",{src:"https://www.nifty.com/misc_top/weather/kakudai00_s.jpg",width:"140",height:"105",alt:null==l?void 0:l.typhoonTitle})})}),(0,a.jsx)("div",{className:"menu",children:(0,a.jsxs)("div",{className:"text",children:[(0,a.jsxs)("p",{className:"sttl alert",style:{backgroundPosition:"-751px -429px",backgroundImage:"url(/images/common/icon_160815.png)"},children:[(0,a.jsxs)("a",{"data-testid":"typhoon-item-link2",href:"http://weather.nifty.com/typhoon.htm",children:["台風",null==l?void 0:l.typhoonTitle,"号の概況"]}),r?w(new Date(r.typhoonDataUpdatedAt)):void 0,"発表"]}),(0,a.jsxs)("dl",{className:"pkg",children:[(0,a.jsx)("dt",{children:"進行方向"}),(0,a.jsx)("dd",{children:i})]}),(0,a.jsxs)("dl",{className:"pkg",children:[(0,a.jsx)("dt",{children:"進行速度"}),(0,a.jsxs)("dd",{children:[null==r?void 0:r.speed," km/h"]})]}),(0,a.jsxs)("dl",{className:"pkg",children:[(0,a.jsx)("dt",{children:"中心気圧"}),(0,a.jsxs)("dd",{children:[null==r?void 0:r.hpa," hPa"]})]}),(0,a.jsxs)("dl",{className:"pkg",children:[(0,a.jsx)("dt",{children:"最大風速"}),(0,a.jsxs)("dd",{children:[null==r?void 0:r.windSpeed," m/s"]})]})]})})]})})]})};var T=n(5536),P=n.n(T);let D=e=>{let{icon:t,text:n,level:r}=e;return""!==t&&""!==n&&""!==r?(0,a.jsxs)("div",{className:P().container,children:[(0,a.jsx)("p",{className:P().title,children:"花粉"}),(0,a.jsx)("img",{src:"/images/molecules/dock/pollen/".concat(t),alt:"花粉レベル ".concat(r),width:65,height:30,decoding:"async"}),(0,a.jsx)("p",{children:n})]}):(0,a.jsx)(a.Fragment,{})};var C=n(8511);let _=e=>{let{weather:t}=e,n=["暴風雪","大雨","洪水","暴風","大雪","波浪","高潮","暴風雪特別","大雨特別","暴風特別","大雪特別","波浪特別","高潮特別"];if((null==t?void 0:t.alert)&&-1!==t.alert.indexOf("1")){let e=t.alert.split("").map((e,t)=>"1"===e&&(0,a.jsx)("dd",{className:"fontS",children:n[t]},n[t]));return(0,a.jsxs)("dl",{className:"alert pddB10",children:[(0,a.jsx)("dt",{className:"fontW",children:"警報"}),e]})}return(0,a.jsx)(a.Fragment,{})},I={border:"none",backgroundColor:"inherit",padding:0,fontSize:"100%",cursor:"pointer",display:"inline-block",color:"black"},L=e=>{var t;let{navigateToPrefectureList:n,typhoonDisp:r,typhoonInfo:l,isPollenShow:i}=e,s=new Date(Date.now()),o=["日","月","火","水","木","金","土"],{location:c,weather:h}=b(),{pollen:p}=f({isPollenShow:i}),m=new Date(null!==(t=null==h?void 0:h.pinpoint_base_date)&&void 0!==t?t:""),u=(s.getTime()-m.getTime())/36e5+6;u-=s.getHours()%6,u-=6;let x=[6,12,18,24,30,36,42,48],g=new Date(s);g.setDate(g.getDate()+1);let j=[s,g],v=j.map((e,t)=>{var n,r,l,m,g,v;return(0,a.jsxs)("div",{className:"today mrgB5 pkg ".concat(j.length===t+1?"brdt":""),children:[(0,a.jsxs)("div",{className:"day floatL",children:[(0,a.jsx)("div",{className:"floatL date fontW",children:(0,a.jsx)("div",{className:"rbb",children:(0,a.jsxs)("div",{className:"rbbinr",children:[e.getDate(),"（",o[e.getDay()],"）"]})})}),(0,a.jsxs)("div",{className:"info",children:[(0,a.jsx)("div",{className:"floatL pddT5",children:(0,a.jsx)("a",{href:c?c.municipality?"https://weather.nifty.com/cs/catalog/weather_pinpoint/catalog_".concat(c.municipality.id,"_1.htm"):"https://weather.nifty.com/cs/master-tdfk/pref/".concat(c.prefecture.id,"/1.htm"):void 0,children:(0,a.jsx)(d(),{unoptimized:!0,src:"/images/molecules/dock/weather/".concat(s.getDay()+t===s.getDay()?null==h?void 0:h.todayWeatherIcon:null==h?void 0:h.tomorrowWeatherIcon,".gif"),alt:s.getDay()+t===s.getDay()?null==h?void 0:h.todayWeather:null==h?void 0:h.tomorrowWeather,width:"54",height:"30",layout:"fixed"})})}),(0,a.jsxs)("div",{className:"text",children:[(0,a.jsxs)("p",{children:[(0,a.jsxs)("span",{className:"red",title:"最高気温","data-testid":"modal-max-temp-".concat(t),children:[s.getDay()+t===s.getDay()?(null==h?void 0:h.todayMaxTemp)&&"-"!==h.todayMaxTemp?h.todayMaxTemp:null!==(n=null==h?void 0:h.keepTemp.max)&&void 0!==n?n:"-":(null==h?void 0:h.tomorrowMaxTemp)&&"-"!==h.tomorrowMaxTemp?h.tomorrowMaxTemp:null!==(r=null==h?void 0:h.keepTemp.max)&&void 0!==r?r:"-","℃"]}),"/",(0,a.jsxs)("span",{className:"blue",title:"最低気温","data-testid":"modal-min-temp-".concat(t),children:[s.getDay()+t===s.getDay()?(null==h?void 0:h.todayMinTemp)&&"-"!==h.todayMinTemp?h.todayMinTemp:null!==(l=null==h?void 0:h.keepTemp.min)&&void 0!==l?l:"-":(null==h?void 0:h.tomorrowMinTemp)&&"-"!==h.tomorrowMinTemp?h.tomorrowMinTemp:null!==(m=null==h?void 0:h.keepTemp.min)&&void 0!==m?m:"-","℃"]})]}),(0,a.jsxs)("p",{title:"降水確率",children:[s.getDay()+t===s.getDay()?null!==(g=null==h?void 0:h.todayRainRate)&&void 0!==g?g:"":null!==(v=null==h?void 0:h.tomorrowRainRate)&&void 0!==v?v:"","％"]})]})]})]}),(0,a.jsx)("div",{className:"week floatR pkg",children:(0,a.jsx)("ul",{className:"pkg",children:x.filter(e=>e>24*t&&e<=24*(t+1)).map(e=>(s.getHours()<e&&(u+=6),(0,a.jsx)("li",{className:e===24*(t+1)?"noBrd":void 0,children:(0,a.jsxs)("dl",{children:[(0,a.jsxs)("dt",{children:[e-24*t,"時"]}),(0,a.jsx)("dd",{children:s.getHours()>=e?"-":h&&h["basePlus".concat(Math.floor(u),"WeatherIcon")]?(0,a.jsx)(d(),{unoptimized:!0,src:"/images/molecules/dock/weather/week/".concat(h["basePlus".concat(Math.floor(u),"WeatherIcon")],".gif"),alt:h["basePlus".concat(Math.floor(u),"WeatherIcon")],width:"36",height:"20",layout:"fixed"}):"-"}),(0,a.jsx)("dd",{children:s.getHours()>=e?"-":h&&h["basePlus".concat(Math.floor(u),"Temp")]?"".concat(h["basePlus".concat(Math.floor(u),"Temp")],"℃"):"-"})]})},e)))})}),i&&p?(0,a.jsx)(D,{icon:s.getDay()+t===s.getDay()?p.todayPollenIcon:p.tomorrowPollenIcon,text:s.getDay()+t===s.getDay()?p.todayPollenText:p.tomorrowPollenText,level:s.getDay()+t===s.getDay()?p.todayPollenLevel:p.tomorrowPollenLevel}):(0,a.jsx)(a.Fragment,{})]},e.toString())});return(0,a.jsxs)("div",{children:[(0,a.jsx)(k,{typhoonInfo:l,typhoonDisp:r}),(0,a.jsx)("div",{id:"wPrv2",className:"cttl pkg",children:(0,a.jsxs)("div",{className:"ttl",children:[(0,a.jsx)("a",{className:"fontW",href:c?c.municipality?"https://weather.nifty.com/cs/catalog/weather_pinpoint/catalog_".concat(c.municipality.id,"_1.htm"):"https://weather.nifty.com/cs/master-tdfk/pref/".concat(c.prefecture.id,"/1.htm"):void 0,children:c?c.municipality?c.municipality.name:c.prefecture.name:void 0}),"\xa0",(0,a.jsx)("span",{className:"mrgL10",children:(0,a.jsx)("button",{type:"button",style:I,onClick:()=>n(),children:"変更"})})]})}),(0,a.jsxs)("div",{className:"prvCnInr",style:{textAlign:"left"},children:[(0,a.jsx)(_,{weather:h}),v,(0,a.jsx)("p",{className:"arrR",style:{float:"right",margin:5},children:(0,a.jsx)("a",{href:c?c.municipality?"https://weather.nifty.com/cs/catalog/weather_pinpoint/catalog_".concat(c.municipality.id,"_1.htm#weeklyWeather"):"https://weather.nifty.com/cs/master-area/area/".concat((0,C.VU)(c.prefecture.id),"/1.htm#mainWeekly"):void 0,children:"週間天気を見る"})})]})]})},M=e=>{let{selectedPrefecture:t,navigateToCurrentWeather:n,navigateToPrefectureList:r}=e,{prefecture:l}=(0,y.t1)(t.id),{setLocation:i}=(0,y.N5)(),s=l&&l.municipalityAreas.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:e.name}),(0,a.jsx)("td",{children:(0,a.jsx)("ul",{children:e.municipalities.map((r,l)=>(0,a.jsx)("li",{"key-":"".concat(e.name,"-").concat(r.name),children:(0,a.jsx)("button",{type:"button",style:{fontSize:"100%",cursor:"pointer",border:"none",borderRight:e.municipalities.length===l+1?"none":" inset 1px gray",paddingRight:"7px",margin:"3px",backgroundColor:"inherit",background:"none",color:"#002080"},onClick:()=>{i({prefecture:t,municipality:r}),n()},children:r.name})}))})})]},e.name));return(0,a.jsxs)("div",{id:"wDcInfo",className:"prvsec",style:{display:"block",minHeight:"480px"},children:[(0,a.jsx)("div",{className:"cttl pkg",children:(0,a.jsx)("div",{className:"ttl",children:(0,a.jsx)("span",{className:"fontW",children:"表示したい地域を設定してください。"})})}),(0,a.jsxs)("div",{className:"prvCnInr",children:[(0,a.jsxs)("div",{className:"prvCnTop pddB5 pkg",children:[(0,a.jsx)("p",{className:"floatL",children:"詳細地域\xa0選択"}),(0,a.jsxs)("p",{className:"floatR",children:[(0,a.jsx)("span",{children:(0,a.jsx)("button",{type:"button",style:{fontSize:"100%",cursor:"pointer",border:"none",borderRight:" inset 1px gray",paddingRight:"7px",margin:"3px",backgroundColor:"inherit",background:"none",color:"#002080"},onClick:()=>r(),children:"都道府県\xa0選択に戻る"})}),(0,a.jsxs)("button",{type:"button",style:{fontSize:"100%",cursor:"pointer",border:"none",paddingRight:"7px",margin:"3px",backgroundColor:"inherit",background:"none",color:"#002080"},onClick:()=>{i({prefecture:t,municipality:null}),n()},children:["[".concat(t.name,"]"),"で設定する"]})]})]}),(0,a.jsx)("table",{border:"0",children:(0,a.jsx)("tbody",{children:s})})]})]})},W=e=>{let{navigateToCurrentWeather:t,navigateToMunicipalityList:n}=e,[r,l]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{let e=await (0,C.al)();l((0,C.oI)(e))})()},[l]);let i=r.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:e.name}),(0,a.jsx)("td",{children:(0,a.jsx)("ul",{children:e.prefectures.map((t,r)=>(0,a.jsx)("li",{className:"noBrd",children:(0,a.jsx)("button",{type:"button",style:{fontSize:"100%",cursor:"pointer",border:"none",borderRight:e.prefectures.length===r+1?"none":"inset 1px gray",paddingRight:"7px",margin:"3px",backgroundColor:"inherit",background:"none",color:"#002080"},onClick:()=>{n(t)},children:t.name})},t.id))})})]},e.id));return(0,a.jsxs)("div",{id:"wDcInfo",className:"prvsec",children:[(0,a.jsx)("div",{className:"cttl pkg",children:(0,a.jsx)("div",{className:"ttl",children:(0,a.jsx)("span",{className:"fontW",children:"表示したい地域を設定してください。"})})}),(0,a.jsxs)("div",{className:"prvCnInr",children:[(0,a.jsxs)("div",{className:"pddB5 pkg",children:[(0,a.jsx)("p",{className:"floatL",children:"都道府県\xa0選択"}),(0,a.jsx)("p",{className:"floatR",children:(0,a.jsx)("button",{type:"button",style:{fontSize:"100%",cursor:"pointer",border:"none",backgroundColor:"inherit",background:"none",color:"#002080"},onClick:()=>t(),children:"キャンセル"})})]}),(0,a.jsx)("table",{border:"0",children:(0,a.jsx)("tbody",{children:i})})]})]})};l().setAppElement("#__next");let z={content:{top:"50%",left:"50%",height:"auto",right:"auto",bottom:"auto",marginRight:"-50%",boxShadow:"0 0 20px #333",padding:0,transform:"translate(-50%, -50%)"},overlay:{zIndex:110100,background:"rgba(0,0,0,0.5)"}},R=e=>{let{isModalOpen:t,closeModal:n,typhoonDisp:r,typhoonInfo:s}=e,{modalView:c,selectedPrefecture:d,navigateToCurrentWeather:h,navigateToPrefectureList:p,navigateToMunicipalityList:m,resetModal:u}=o(),x=()=>{n(),u()};return(0,a.jsx)(l(),{isOpen:t,onRequestClose:()=>x(),style:z,children:(0,a.jsx)("div",{className:"scsz1",style:{borderWidth:"0px",width:"488px",height:"auto",display:"block"},children:(0,a.jsx)("div",{className:"rbb boxShw",id:"prvWeather",children:(0,a.jsxs)("div",{className:"rbbinr prvM",children:[(0,a.jsx)("div",{className:"prvHd pkg",children:(0,a.jsx)("div",{className:"ttl fontW floatL",children:(0,a.jsx)("a",{href:"http://weather.nifty.com/",children:"天気予報"})})}),(0,a.jsx)("div",{className:"prvCn",children:(0,a.jsx)("div",{id:"wDcInfo",className:"prvsec",children:"prefectures"===c?(0,a.jsx)(W,{navigateToCurrentWeather:h,navigateToMunicipalityList:m}):"municipalities"===c&&null!==d?(0,a.jsx)(M,{selectedPrefecture:d,navigateToCurrentWeather:h,navigateToPrefectureList:p}):(0,a.jsx)(L,{navigateToPrefectureList:p,typhoonDisp:r,typhoonInfo:s,isPollenShow:!1})})}),(0,a.jsx)(i.P,{onClick:n})]})})})})}},3985:function(e){e.exports={close:"CloseButton_close__k46G5"}},5536:function(e){e.exports={container:"Pollen_container__sOcx6",title:"Pollen_title__w5EWx"}}}]);
</script>

</body>
</html>
