<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>yads-async.html</title>
</head>
<body>
<script>(()=>{var t={5119:(t,e,i)=>{"use strict";i.d(e,{y:()=>l});i(271),i(5404);function n(t){if("http:"===window.location.protocol)return t;const e=/^http:\/\/(i|ai|ah)\.yimg\.jp\//;return e.test(t)?t.replace(e,"https://s.yimg.jp/"):t.replace(/^http:\/\//,"https://")}function s(t){var e;if(!r(t))return{};const i=null===(e=null==t?void 0:t.creative_options)||void 0===e?void 0:e.script;return void 0===i||void 0===(null==i?void 0:i.js_file)||void 0===(null==i?void 0:i.callback)?t.script:i}function r(t){return"object"==typeof t&&null!==t}function o(t,e){window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.ydn=window.YAHOO.JP.anemos.yads.ydn||{},window.YAHOO.JP.anemos.yads.ydn[t]=window.YAHOO.JP.anemos.yads.ydn[t]||{},window.YAHOO.JP.anemos.yads.ydn[t][e]=window.YAHOO.JP.anemos.yads.ydn[t][e]||{}}function a(t,e,i,s){var r;const o=n(t.image_url),a=t.ClickUrl,d=t.target||(null===(r=t.style)||void 0===r?void 0:r.target)||"_top",l=t.media_w,c=t.media_h;return'<a href="'.concat(a,'" target="').concat(d,'"><img src="').concat(o,'" width="').concat(l,'" height="').concat(c,'" border="0" /></a>')}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=(new Date).getTime(),n={first:"yads-sqb-1st-".concat(i),second:"yads-sqb-2nd-".concat(i)},s=function(t,e){var i;if(!r(t))return{};let n;return r(e)&&(n=null==e?void 0:e.sqb_wrapper,r(n)&&Object.keys(n).length>0)?n:(n=null===(i=null==t?void 0:t.creative_options)||void 0===i?void 0:i.sqb_wrapper,void 0===n||"object"!=typeof n?t.sqb_wrapper||{}:0===Object.keys(n).length?t.sqb_wrapper:n)}(t[0],e),o=s.direction||"horizontal",a=parseInt(s.ad_w,10)||300,d=parseInt(s.ad_h,10)||250,l=parseInt(s.ad_space_size,10)||15;const{totalW:c,totalH:u}="vertical"===o?{totalW:a,totalH:2*d+l}:{totalW:2*a+l,totalH:d};return{direction:o,id_1st:n.first,id_2nd:n.second,ad_w:"".concat(a,"px"),ad_h:"".concat(d,"px"),ad_space_size:"".concat(l,"px"),total_w:"".concat(c,"px"),total_h:"".concat(u,"px"),use_background:s.use_background||!1,bg_color:s.bg_color||"#fff",bg_w:s.bg_w||"".concat(c,"px"),bg_pd:s.bg_pd||"0px"}}function l(t,e,i,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const c=document.getElementById(o);if(!t||0===t.length||!c)return;if(1===t.length){const e=function(t,e){var i;let n;return n=null==e?void 0:e.filler_options,r(n)&&Object.keys(n).length>0?n:(n=null===(i=null==t?void 0:t.creative_options)||void 0===i?void 0:i.filler_options,r(n)&&Object.keys(n).length>0?n:{})}(t[0],l);if(0===Object.keys(e).length)return;const i=Object.assign({ad_main_type:"filler"},e);t.push(i)}const u=d(t,l),h=function(t){const e=(()=>{const e="horizontal"===t.direction?"margin-right:".concat(t.ad_space_size):"margin-bottom:".concat(t.ad_space_size);return'<div id="'.concat(t.id_1st,'" style="float:left; clear:none; width:').concat(t.ad_w,"; height:").concat(t.ad_h,"; ").concat(e,';"></div>')})(),i='<div id="'.concat(t.id_2nd,'" style="float:right; clear:none; width:').concat(t.ad_w,"; height:").concat(t.ad_h,'; text-align:center;"></div>'),n='<div style="margin:0 auto; width:'.concat(t.total_w,"; height:").concat(t.total_h,'; clear:both; overflow:hidden; text-align:center;">').concat(e).concat(i,"</div>");return t.use_background?'<div style="width:'.concat(t.bg_w,"; background:").concat(t.bg_color,"; padding:").concat(t.bg_pd,'">').concat(n,"</div>"):n}(u);function f(t,n){var r;const o=function(t){if(!t||"string"!=typeof t)return null;const e=t.split(".");let i=window;for(const t of e)if(!(i=i[t]))return null;return"function"==typeof i?i:null}(s(t).callback);return!!o&&(null===(r=window.YJ_YADS.innerFuncs)||void 0===r||r.callUITemplate(o,[t],e,i,n),!0)}function p(t,e){if("filler"!==t.ad_main_type){if(!f(t,e)){!function(t,e){var i;if("string"!=typeof t||"function"!=typeof e)return;const s=document.createElement("SCRIPT");s.src=n(t),s.type="text/javascript",s.onload=function(){e()},null===(i=document.getElementsByTagName("script")[0].parentNode)||void 0===i||i.appendChild(s)}("https://s.yimg.jp/images/listing/tool/yads/"+s(t).js_file,(function(){f(t,e)}))}}else!function(t,e,i,n){const s=document.getElementById(n),r=a(t);s&&(s.innerHTML=r)}(t,0,0,e)}c.innerHTML=h,["id_1st","id_2nd"].forEach(((e,i)=>{p(t[i],u[e])}))}o("creative","filler"),YAHOO.JP.anemos.yads.ydn.creative.filler.createAdHtml=a,o("position","SQB"),window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd||(window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd=l)},9403:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var t=function(){for(var t=window.document,e=s(t);e;)e=s(t=e.ownerDocument);return t}(),e=[],i=null,n=null;o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return i||(i=function(t,i){n=t&&i?u(t,i):{top:0,bottom:0,left:0,right:0,width:0,height:0},e.forEach((function(t){t._checkForIntersections()}))}),i},o._resetCrossOriginUpdater=function(){i=null,n=null},o.prototype.observe=function(t){if(!this._observationTargets.some((function(e){return e.element==t}))){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(t.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter((function(e){return e.element!=t})),this._unmonitorIntersections(t.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var t=this._queuedEntries.slice();return this._queuedEntries=[],t},o.prototype._initThresholds=function(t){var e=t||[0];return Array.isArray(e)||(e=[e]),e.sort().filter((function(t,e,i){if("number"!=typeof t||isNaN(t)||t<0||t>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return t!==i[e-1]}))},o.prototype._parseRootMargin=function(t){var e=(t||"0px").split(/\s+/).map((function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}}));return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e},o.prototype._monitorIntersections=function(e){var i=e.defaultView;if(i&&-1==this._monitoringDocuments.indexOf(e)){var n=this._checkForIntersections,r=null,o=null;this.POLL_INTERVAL?r=i.setInterval(n,this.POLL_INTERVAL):(a(i,"resize",n,!0),a(e,"scroll",n,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in i&&(o=new i.MutationObserver(n)).observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(e),this._monitoringUnsubscribes.push((function(){var t=e.defaultView;t&&(r&&t.clearInterval(r),d(t,"resize",n,!0)),d(e,"scroll",n,!0),o&&o.disconnect()}));var l=this.root&&(this.root.ownerDocument||this.root)||t;if(e!=l){var c=s(e);c&&this._monitorIntersections(c.ownerDocument)}}},o.prototype._unmonitorIntersections=function(e){var i=this._monitoringDocuments.indexOf(e);if(-1!=i){var n=this.root&&(this.root.ownerDocument||this.root)||t,r=this._observationTargets.some((function(t){var i=t.element.ownerDocument;if(i==e)return!0;for(;i&&i!=n;){var r=s(i);if((i=r&&r.ownerDocument)==e)return!0}return!1}));if(!r){var o=this._monitoringUnsubscribes[i];if(this._monitoringDocuments.splice(i,1),this._monitoringUnsubscribes.splice(i,1),o(),e!=n){var a=s(e);a&&this._unmonitorIntersections(a.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var t=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var e=0;e<t.length;e++)t[e]()},o.prototype._checkForIntersections=function(){if(this.root||!i||n){var t=this._rootIsInDom(),e=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(n){var s=n.element,o=l(s),a=this._rootContainsTarget(s),d=n.entry,c=t&&a&&this._computeTargetAndRootIntersection(s,o,e),u=null;this._rootContainsTarget(s)?i&&!this.root||(u=e):u={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=n.entry=new r({time:window.performance&&performance.now&&performance.now(),target:s,boundingClientRect:o,rootBounds:u,intersectionRect:c});d?t&&a?this._hasCrossedThreshold(d,h)&&this._queuedEntries.push(h):d&&d.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(e,s,r){if("none"!=window.getComputedStyle(e).display){for(var o,a,d,c,h,p,m,v,g=s,w=f(e),y=!1;!y&&w;){var b=null,_=1==w.nodeType?window.getComputedStyle(w):{};if("none"==_.display)return null;if(w==this.root||9==w.nodeType)if(y=!0,w==this.root||w==t)i&&!this.root?!n||0==n.width&&0==n.height?(w=null,b=null,g=null):b=n:b=r;else{var I=f(w),S=I&&l(I),A=I&&this._computeTargetAndRootIntersection(I,S,r);S&&A?(w=I,b=u(S,A)):(w=null,g=null)}else{var O=w.ownerDocument;w!=O.body&&w!=O.documentElement&&"visible"!=_.overflow&&(b=l(w))}if(b&&(o=b,a=g,d=void 0,c=void 0,h=void 0,p=void 0,m=void 0,v=void 0,d=Math.max(o.top,a.top),c=Math.min(o.bottom,a.bottom),h=Math.max(o.left,a.left),p=Math.min(o.right,a.right),v=c-d,g=(m=p-h)>=0&&v>=0&&{top:d,bottom:c,left:h,right:p,width:m,height:v}||null),!g)break;w=w&&f(w)}return g}},o.prototype._getRootRect=function(){var e;if(this.root&&!p(this.root))e=l(this.root);else{var i=p(this.root)?this.root:t,n=i.documentElement,s=i.body;e={top:0,left:0,right:n.clientWidth||s.clientWidth,width:n.clientWidth||s.clientWidth,bottom:n.clientHeight||s.clientHeight,height:n.clientHeight||s.clientHeight}}return this._expandRectByRootMargin(e)},o.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map((function(e,i){return"px"==e.unit?e.value:e.value*(i%2?t.width:t.height)/100})),i={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},o.prototype._hasCrossedThreshold=function(t,e){var i=t&&t.isIntersecting?t.intersectionRatio||0:-1,n=e.isIntersecting?e.intersectionRatio||0:-1;if(i!==n)for(var s=0;s<this.thresholds.length;s++){var r=this.thresholds[s];if(r==i||r==n||r<i!=r<n)return!0}},o.prototype._rootIsInDom=function(){return!this.root||h(t,this.root)},o.prototype._rootContainsTarget=function(e){var i=this.root&&(this.root.ownerDocument||this.root)||t;return h(i,e)&&(!this.root||i==e.ownerDocument)},o.prototype._registerInstance=function(){e.indexOf(this)<0&&e.push(this)},o.prototype._unregisterInstance=function(){var t=e.indexOf(this);-1!=t&&e.splice(t,1)},window.IntersectionObserver=o,window.IntersectionObserverEntry=r}function s(t){try{return t.defaultView&&t.defaultView.frameElement||null}catch(t){return null}}function r(t){this.time=t.time,this.target=t.target,this.rootBounds=c(t.rootBounds),this.boundingClientRect=c(t.boundingClientRect),this.intersectionRect=c(t.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!t.intersectionRect;var e=this.boundingClientRect,i=e.width*e.height,n=this.intersectionRect,s=n.width*n.height;this.intersectionRatio=i?Number((s/i).toFixed(4)):this.isIntersecting?1:0}function o(t,e){var i,n,s,r=e||{};if("function"!=typeof t)throw new Error("callback must be a function");if(r.root&&1!=r.root.nodeType&&9!=r.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),n=this.THROTTLE_TIMEOUT,s=null,function(){s||(s=setTimeout((function(){i(),s=null}),n))}),this._callback=t,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(r.rootMargin),this.thresholds=this._initThresholds(r.threshold),this.root=r.root||null,this.rootMargin=this._rootMarginValues.map((function(t){return t.value+t.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(t,e,i,n){"function"==typeof t.addEventListener?t.addEventListener(e,i,n||!1):"function"==typeof t.attachEvent&&t.attachEvent("on"+e,i)}function d(t,e,i,n){"function"==typeof t.removeEventListener?t.removeEventListener(e,i,n||!1):"function"==typeof t.detachEvent&&t.detachEvent("on"+e,i)}function l(t){var e;try{e=t.getBoundingClientRect()}catch(t){}return e?(e.width&&e.height||(e={top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.right-e.left,height:e.bottom-e.top}),e):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(t){return!t||"x"in t?t:{top:t.top,y:t.top,bottom:t.bottom,left:t.left,x:t.left,right:t.right,width:t.width,height:t.height}}function u(t,e){var i=e.top-t.top,n=e.left-t.left;return{top:i,left:n,height:e.height,width:e.width,bottom:i+e.height,right:n+e.width}}function h(t,e){for(var i=e;i;){if(i==t)return!0;i=f(i)}return!1}function f(e){var i=e.parentNode;return 9==e.nodeType&&e!=t?s(e):(i&&i.assignedSlot&&(i=i.assignedSlot.parentNode),i&&11==i.nodeType&&i.host?i.host:i)}function p(t){return t&&9===t.nodeType}}()},1379:(t,e,i)=>{"use strict";var n=i(4838),s=i(8516),r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not a function")}},807:(t,e,i)=>{"use strict";var n=i(4790),s=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r("Can't set "+s(t)+" as a prototype")}},4816:(t,e,i)=>{"use strict";var n=i(8020),s=i(6551),r=i(4544).f,o=n("unscopables"),a=Array.prototype;void 0===a[o]&&r(a,o,{configurable:!0,value:s(null)}),t.exports=function(t){a[o][t]=!0}},1092:(t,e,i)=>{"use strict";var n=i(2106).charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},8784:(t,e,i)=>{"use strict";var n=i(6012),s=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new s("Incorrect invocation")}},6556:(t,e,i)=>{"use strict";var n=i(2177),s=String,r=TypeError;t.exports=function(t){if(n(t))return t;throw new r(s(t)+" is not an object")}},2553:(t,e,i)=>{"use strict";var n=i(7443),s=i(230),r=i(502),o=i(7446),a=i(336),d=i(4016),l=i(8283),c=i(9971),u=i(6216),h=i(8764),f=Array;t.exports=function(t){var e=r(t),i=d(this),p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m;v&&(m=n(m,p>2?arguments[2]:void 0));var g,w,y,b,_,I,S=h(e),A=0;if(!S||this===f&&a(S))for(g=l(e),w=i?new this(g):f(g);g>A;A++)I=v?m(e[A],A):e[A],c(w,A,I);else for(w=i?new this:[],_=(b=u(e,S)).next;!(y=s(_,b)).done;A++)I=v?o(b,m,[y.value,A],!0):y.value,c(w,A,I);return w.length=A,w}},6096:(t,e,i)=>{"use strict";var n=i(4770),s=i(4597),r=i(8283),o=function(t){return function(e,i,o){var a=n(e),d=r(a);if(0===d)return!t&&-1;var l,c=s(o,d);if(t&&i!=i){for(;d>c;)if((l=a[c++])!=l)return!0}else for(;d>c;c++)if((t||c in a)&&a[c]===i)return t||c||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},8399:(t,e,i)=>{"use strict";var n=i(8583);t.exports=n([].slice)},1141:(t,e,i)=>{"use strict";var n=i(8399),s=Math.floor,r=function(t,e){var i=t.length;if(i<8)for(var o,a,d=1;d<i;){for(a=d,o=t[d];a&&e(t[a-1],o)>0;)t[a]=t[--a];a!==d++&&(t[a]=o)}else for(var l=s(i/2),c=r(n(t,0,l),e),u=r(n(t,l),e),h=c.length,f=u.length,p=0,m=0;p<h||m<f;)t[p+m]=p<h&&m<f?e(c[p],u[m])<=0?c[p++]:u[m++]:p<h?c[p++]:u[m++];return t};t.exports=r},7446:(t,e,i)=>{"use strict";var n=i(6556),s=i(358);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){s(t,"throw",e)}}},1467:(t,e,i)=>{"use strict";var n=i(8583),s=n({}.toString),r=n("".slice);t.exports=function(t){return r(s(t),8,-1)}},2664:(t,e,i)=>{"use strict";var n=i(2763),s=i(4838),r=i(1467),o=i(8020)("toStringTag"),a=Object,d="Arguments"===r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=a(t),o))?i:d?r(e):"Object"===(n=r(e))&&s(e.callee)?"Arguments":n}},2775:(t,e,i)=>{"use strict";var n=i(9400),s=i(2966),r=i(1282),o=i(4544);t.exports=function(t,e,i){for(var a=s(e),d=o.f,l=r.f,c=0;c<a.length;c++){var u=a[c];n(t,u)||i&&n(i,u)||d(t,u,l(e,u))}}},7450:(t,e,i)=>{"use strict";var n=i(5008);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6602:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},126:(t,e,i)=>{"use strict";var n=i(9691),s=i(4544),r=i(5973);t.exports=n?function(t,e,i){return s.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},5973:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},9971:(t,e,i)=>{"use strict";var n=i(9691),s=i(4544),r=i(5973);t.exports=function(t,e,i){n?s.f(t,e,r(0,i)):t[e]=i}},2815:(t,e,i)=>{"use strict";var n=i(6188),s=i(4544);t.exports=function(t,e,i){return i.get&&n(i.get,e,{getter:!0}),i.set&&n(i.set,e,{setter:!0}),s.f(t,e,i)}},8051:(t,e,i)=>{"use strict";var n=i(4838),s=i(4544),r=i(6188),o=i(0);t.exports=function(t,e,i,a){a||(a={});var d=a.enumerable,l=void 0!==a.name?a.name:e;if(n(i)&&r(i,l,a),a.global)d?t[e]=i:o(e,i);else{try{a.unsafe?t[e]&&(d=!0):delete t[e]}catch(t){}d?t[e]=i:s.f(t,e,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9110:(t,e,i)=>{"use strict";var n=i(8051);t.exports=function(t,e,i){for(var s in e)n(t,s,e[s],i);return t}},0:(t,e,i)=>{"use strict";var n=i(3795),s=Object.defineProperty;t.exports=function(t,e){try{s(n,t,{value:e,configurable:!0,writable:!0})}catch(i){n[t]=e}return e}},9691:(t,e,i)=>{"use strict";var n=i(5008);t.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8076:(t,e,i)=>{"use strict";var n=i(3795),s=i(2177),r=n.document,o=s(r)&&s(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},1307:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},3569:(t,e,i)=>{"use strict";var n=i(8076)("span").classList,s=n&&n.constructor&&n.constructor.prototype;t.exports=s===Object.prototype?void 0:s},9572:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},4142:(t,e,i)=>{"use strict";var n=i(3795).navigator,s=n&&n.userAgent;t.exports=s?String(s):""},8746:(t,e,i)=>{"use strict";var n,s,r=i(3795),o=i(4142),a=r.process,d=r.Deno,l=a&&a.versions||d&&d.version,c=l&&l.v8;c&&(s=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&o&&(!(n=o.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=o.match(/Chrome\/(\d+)/))&&(s=+n[1]),t.exports=s},6887:(t,e,i)=>{"use strict";var n=i(3795),s=i(1282).f,r=i(126),o=i(8051),a=i(0),d=i(2775),l=i(1875);t.exports=function(t,e){var i,c,u,h,f,p=t.target,m=t.global,v=t.stat;if(i=m?n:v?n[p]||a(p,{}):n[p]&&n[p].prototype)for(c in e){if(h=e[c],u=t.dontCallGetSet?(f=s(i,c))&&f.value:i[c],!l(m?c:p+(v?".":"#")+c,t.forced)&&void 0!==u){if(typeof h==typeof u)continue;d(h,u)}(t.sham||u&&u.sham)&&r(h,"sham",!0),o(i,c,h,t)}}},5008:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},4673:(t,e,i)=>{"use strict";i(5418);var n=i(230),s=i(8051),r=i(1880),o=i(5008),a=i(8020),d=i(126),l=a("species"),c=RegExp.prototype;t.exports=function(t,e,i,u){var h=a(t),f=!o((function(){var e={};return e[h]=function(){return 7},7!==""[t](e)})),p=f&&!o((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[h]=/./[h]),i.exec=function(){return e=!0,null},i[h](""),!e}));if(!f||!p||i){var m=/./[h],v=e(h,""[t],(function(t,e,i,s,o){var a=e.exec;return a===r||a===c.exec?f&&!o?{done:!0,value:n(m,e,i,s)}:{done:!0,value:n(t,i,e,s)}:{done:!1}}));s(String.prototype,t,v[0]),s(c,h,v[1])}u&&d(c[h],"sham",!0)}},3060:(t,e,i)=>{"use strict";var n=i(5309),s=Function.prototype,r=s.apply,o=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?o.bind(r):function(){return o.apply(r,arguments)})},7443:(t,e,i)=>{"use strict";var n=i(8005),s=i(1379),r=i(5309),o=n(n.bind);t.exports=function(t,e){return s(t),void 0===e?t:r?o(t,e):function(){return t.apply(e,arguments)}}},5309:(t,e,i)=>{"use strict";var n=i(5008);t.exports=!n((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},230:(t,e,i)=>{"use strict";var n=i(5309),s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},3957:(t,e,i)=>{"use strict";var n=i(9691),s=i(9400),r=Function.prototype,o=n&&Object.getOwnPropertyDescriptor,a=s(r,"name"),d=a&&"something"===function(){}.name,l=a&&(!n||n&&o(r,"name").configurable);t.exports={EXISTS:a,PROPER:d,CONFIGURABLE:l}},5859:(t,e,i)=>{"use strict";var n=i(8583),s=i(1379);t.exports=function(t,e,i){try{return n(s(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}},8005:(t,e,i)=>{"use strict";var n=i(1467),s=i(8583);t.exports=function(t){if("Function"===n(t))return s(t)}},8583:(t,e,i)=>{"use strict";var n=i(5309),s=Function.prototype,r=s.call,o=n&&s.bind.bind(r,r);t.exports=n?o:function(t){return function(){return r.apply(t,arguments)}}},4050:(t,e,i)=>{"use strict";var n=i(3795),s=i(4838);t.exports=function(t,e){return arguments.length<2?(i=n[t],s(i)?i:void 0):n[t]&&n[t][e];var i}},8764:(t,e,i)=>{"use strict";var n=i(2664),s=i(6859),r=i(8364),o=i(82),a=i(8020)("iterator");t.exports=function(t){if(!r(t))return s(t,a)||s(t,"@@iterator")||o[n(t)]}},6216:(t,e,i)=>{"use strict";var n=i(230),s=i(1379),r=i(6556),o=i(8516),a=i(8764),d=TypeError;t.exports=function(t,e){var i=arguments.length<2?a(t):e;if(s(i))return r(n(i,t));throw new d(o(t)+" is not iterable")}},6859:(t,e,i)=>{"use strict";var n=i(1379),s=i(8364);t.exports=function(t,e){var i=t[e];return s(i)?void 0:n(i)}},9755:(t,e,i)=>{"use strict";var n=i(8583),s=i(502),r=Math.floor,o=n("".charAt),a=n("".replace),d=n("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,n,u,h){var f=i+t.length,p=n.length,m=c;return void 0!==u&&(u=s(u),m=l),a(h,m,(function(s,a){var l;switch(o(a,0)){case"$":return"$";case"&":return t;case"`":return d(e,0,i);case"'":return d(e,f);case"<":l=u[d(a,1,-1)];break;default:var c=+a;if(0===c)return s;if(c>p){var h=r(c/10);return 0===h?s:h<=p?void 0===n[h-1]?o(a,1):n[h-1]+o(a,1):s}l=n[c-1]}return void 0===l?"":l}))}},3795:function(t,e,i){"use strict";var n=function(t){return t&&t.Math===Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9400:(t,e,i)=>{"use strict";var n=i(8583),s=i(502),r=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return r(s(t),e)}},5894:t=>{"use strict";t.exports={}},7956:(t,e,i)=>{"use strict";var n=i(4050);t.exports=n("document","documentElement")},1908:(t,e,i)=>{"use strict";var n=i(9691),s=i(5008),r=i(8076);t.exports=!n&&!s((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},8422:(t,e,i)=>{"use strict";var n=i(8583),s=i(5008),r=i(1467),o=Object,a=n("".split);t.exports=s((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===r(t)?a(t,""):o(t)}:o},6299:(t,e,i)=>{"use strict";var n=i(8583),s=i(4838),r=i(4716),o=n(Function.toString);s(r.inspectSource)||(r.inspectSource=function(t){return o(t)}),t.exports=r.inspectSource},7768:(t,e,i)=>{"use strict";var n,s,r,o=i(539),a=i(3795),d=i(2177),l=i(126),c=i(9400),u=i(4716),h=i(9030),f=i(5894),p="Object already initialized",m=a.TypeError,v=a.WeakMap;if(o||u.state){var g=u.state||(u.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,n=function(t,e){if(g.has(t))throw new m(p);return e.facade=t,g.set(t,e),e},s=function(t){return g.get(t)||{}},r=function(t){return g.has(t)}}else{var w=h("state");f[w]=!0,n=function(t,e){if(c(t,w))throw new m(p);return e.facade=t,l(t,w,e),e},s=function(t){return c(t,w)?t[w]:{}},r=function(t){return c(t,w)}}t.exports={set:n,get:s,has:r,enforce:function(t){return r(t)?s(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!d(e)||(i=s(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return i}}}},336:(t,e,i)=>{"use strict";var n=i(8020),s=i(82),r=n("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||o[r]===t)}},4838:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},4016:(t,e,i)=>{"use strict";var n=i(8583),s=i(5008),r=i(4838),o=i(2664),a=i(4050),d=i(6299),l=function(){},c=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,h=n(u.exec),f=!u.test(l),p=function(t){if(!r(t))return!1;try{return c(l,[],t),!0}catch(t){return!1}},m=function(t){if(!r(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(u,d(t))}catch(t){return!0}};m.sham=!0,t.exports=!c||s((function(){var t;return p(p.call)||!p(Object)||!p((function(){t=!0}))||t}))?m:p},1875:(t,e,i)=>{"use strict";var n=i(5008),s=i(4838),r=/#|\.prototype\./,o=function(t,e){var i=d[a(t)];return i===c||i!==l&&(s(e)?n(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},d=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},8364:t=>{"use strict";t.exports=function(t){return null==t}},2177:(t,e,i)=>{"use strict";var n=i(4838);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},4790:(t,e,i)=>{"use strict";var n=i(2177);t.exports=function(t){return n(t)||null===t}},2060:t=>{"use strict";t.exports=!1},622:(t,e,i)=>{"use strict";var n=i(4050),s=i(4838),r=i(6012),o=i(6635),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return s(e)&&r(e.prototype,a(t))}},358:(t,e,i)=>{"use strict";var n=i(230),s=i(6556),r=i(6859);t.exports=function(t,e,i){var o,a;s(t);try{if(!(o=r(t,"return"))){if("throw"===e)throw i;return i}o=n(o,t)}catch(t){a=!0,o=t}if("throw"===e)throw i;if(a)throw o;return s(o),i}},1721:(t,e,i)=>{"use strict";var n=i(5120).IteratorPrototype,s=i(6551),r=i(5973),o=i(2140),a=i(82),d=function(){return this};t.exports=function(t,e,i,l){var c=e+" Iterator";return t.prototype=s(n,{next:r(+!l,i)}),o(t,c,!1,!0),a[c]=d,t}},7691:(t,e,i)=>{"use strict";var n=i(6887),s=i(230),r=i(2060),o=i(3957),a=i(4838),d=i(1721),l=i(5304),c=i(8452),u=i(2140),h=i(126),f=i(8051),p=i(8020),m=i(82),v=i(5120),g=o.PROPER,w=o.CONFIGURABLE,y=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,_=p("iterator"),I="keys",S="values",A="entries",O=function(){return this};t.exports=function(t,e,i,o,p,v,E){d(i,e,o);var k,M,T,R=function(t){if(t===p&&L)return L;if(!b&&t&&t in D)return D[t];switch(t){case I:case S:case A:return function(){return new i(this,t)}}return function(){return new i(this)}},P=e+" Iterator",C=!1,D=t.prototype,x=D[_]||D["@@iterator"]||p&&D[p],L=!b&&x||R(p),Y="Array"===e&&D.entries||x;if(Y&&(k=l(Y.call(new t)))!==Object.prototype&&k.next&&(r||l(k)===y||(c?c(k,y):a(k[_])||f(k,_,O)),u(k,P,!0,!0),r&&(m[P]=O)),g&&p===S&&x&&x.name!==S&&(!r&&w?h(D,"name",S):(C=!0,L=function(){return s(x,this)})),p)if(M={values:R(S),keys:v?L:R(I),entries:R(A)},E)for(T in M)(b||C||!(T in D))&&f(D,T,M[T]);else n({target:e,proto:!0,forced:b||C},M);return r&&!E||D[_]===L||f(D,_,L,{name:p}),m[e]=L,M}},5120:(t,e,i)=>{"use strict";var n,s,r,o=i(5008),a=i(4838),d=i(2177),l=i(6551),c=i(5304),u=i(8051),h=i(8020),f=i(2060),p=h("iterator"),m=!1;[].keys&&("next"in(r=[].keys())?(s=c(c(r)))!==Object.prototype&&(n=s):m=!0),!d(n)||o((function(){var t={};return n[p].call(t)!==t}))?n={}:f&&(n=l(n)),a(n[p])||u(n,p,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},82:t=>{"use strict";t.exports={}},8283:(t,e,i)=>{"use strict";var n=i(7605);t.exports=function(t){return n(t.length)}},6188:(t,e,i)=>{"use strict";var n=i(8583),s=i(5008),r=i(4838),o=i(9400),a=i(9691),d=i(3957).CONFIGURABLE,l=i(6299),c=i(7768),u=c.enforce,h=c.get,f=String,p=Object.defineProperty,m=n("".slice),v=n("".replace),g=n([].join),w=a&&!s((function(){return 8!==p((function(){}),"length",{value:8}).length})),y=String(String).split("String"),b=t.exports=function(t,e,i){"Symbol("===m(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||d&&t.name!==e)&&(a?p(t,"name",{value:e,configurable:!0}):t.name=e),w&&i&&o(i,"arity")&&t.length!==i.arity&&p(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?a&&p(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=u(t);return o(n,"source")||(n.source=g(y,"string"==typeof e?e:"")),t};Function.prototype.toString=b((function(){return r(this)&&h(this).source||l(this)}),"toString")},3700:t=>{"use strict";var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?i:e)(n)}},1606:(t,e,i)=>{"use strict";var n=i(9691),s=i(8583),r=i(230),o=i(5008),a=i(5479),d=i(302),l=i(7954),c=i(502),u=i(8422),h=Object.assign,f=Object.defineProperty,p=s([].concat);t.exports=!h||o((function(){if(n&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol("assign detection"),s="abcdefghijklmnopqrst";return t[i]=7,s.split("").forEach((function(t){e[t]=t})),7!==h({},t)[i]||a(h({},e)).join("")!==s}))?function(t,e){for(var i=c(t),s=arguments.length,o=1,h=d.f,f=l.f;s>o;)for(var m,v=u(arguments[o++]),g=h?p(a(v),h(v)):a(v),w=g.length,y=0;w>y;)m=g[y++],n&&!r(f,v,m)||(i[m]=v[m]);return i}:h},6551:(t,e,i)=>{"use strict";var n,s=i(6556),r=i(4216),o=i(9572),a=i(5894),d=i(7956),l=i(8076),c=i(9030),u="prototype",h="script",f=c("IE_PROTO"),p=function(){},m=function(t){return"<"+h+">"+t+"</"+h+">"},v=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},g=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;g="undefined"!=typeof document?document.domain&&n?v(n):(e=l("iframe"),i="java"+h+":",e.style.display="none",d.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F):v(n);for(var s=o.length;s--;)delete g[u][o[s]];return g()};a[f]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(p[u]=s(t),i=new p,p[u]=null,i[f]=t):i=g(),void 0===e?i:r.f(i,e)}},4216:(t,e,i)=>{"use strict";var n=i(9691),s=i(2329),r=i(4544),o=i(6556),a=i(4770),d=i(5479);e.f=n&&!s?Object.defineProperties:function(t,e){o(t);for(var i,n=a(e),s=d(e),l=s.length,c=0;l>c;)r.f(t,i=s[c++],n[i]);return t}},4544:(t,e,i)=>{"use strict";var n=i(9691),s=i(1908),r=i(2329),o=i(6556),a=i(2874),d=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",f="writable";e.f=n?r?function(t,e,i){if(o(t),e=a(e),o(i),"function"==typeof t&&"prototype"===e&&"value"in i&&f in i&&!i[f]){var n=c(t,e);n&&n[f]&&(t[e]=i.value,i={configurable:h in i?i[h]:n[h],enumerable:u in i?i[u]:n[u],writable:!1})}return l(t,e,i)}:l:function(t,e,i){if(o(t),e=a(e),o(i),s)try{return l(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new d("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},1282:(t,e,i)=>{"use strict";var n=i(9691),s=i(230),r=i(7954),o=i(5973),a=i(4770),d=i(2874),l=i(9400),c=i(1908),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=a(t),e=d(e),c)try{return u(t,e)}catch(t){}if(l(t,e))return o(!s(r.f,t,e),t[e])}},1991:(t,e,i)=>{"use strict";var n=i(3593),s=i(9572).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},302:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},5304:(t,e,i)=>{"use strict";var n=i(9400),s=i(4838),r=i(502),o=i(9030),a=i(7450),d=o("IE_PROTO"),l=Object,c=l.prototype;t.exports=a?l.getPrototypeOf:function(t){var e=r(t);if(n(e,d))return e[d];var i=e.constructor;return s(i)&&e instanceof i?i.prototype:e instanceof l?c:null}},6012:(t,e,i)=>{"use strict";var n=i(8583);t.exports=n({}.isPrototypeOf)},3593:(t,e,i)=>{"use strict";var n=i(8583),s=i(9400),r=i(4770),o=i(6096).indexOf,a=i(5894),d=n([].push);t.exports=function(t,e){var i,n=r(t),l=0,c=[];for(i in n)!s(a,i)&&s(n,i)&&d(c,i);for(;e.length>l;)s(n,i=e[l++])&&(~o(c,i)||d(c,i));return c}},5479:(t,e,i)=>{"use strict";var n=i(3593),s=i(9572);t.exports=Object.keys||function(t){return n(t,s)}},7954:(t,e)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!i.call({1:2},1);e.f=s?function(t){var e=n(this,t);return!!e&&e.enumerable}:i},8452:(t,e,i)=>{"use strict";var n=i(5859),s=i(2177),r=i(6187),o=i(807);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=n(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,n){return r(i),o(n),s(i)?(e?t(i,n):i.__proto__=n,i):i}}():void 0)},5857:(t,e,i)=>{"use strict";var n=i(230),s=i(4838),r=i(2177),o=TypeError;t.exports=function(t,e){var i,a;if("string"===e&&s(i=t.toString)&&!r(a=n(i,t)))return a;if(s(i=t.valueOf)&&!r(a=n(i,t)))return a;if("string"!==e&&s(i=t.toString)&&!r(a=n(i,t)))return a;throw new o("Can't convert object to primitive value")}},2966:(t,e,i)=>{"use strict";var n=i(4050),s=i(8583),r=i(1991),o=i(302),a=i(6556),d=s([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(a(t)),i=o.f;return i?d(e,i(t)):e}},735:(t,e,i)=>{"use strict";var n=i(230),s=i(6556),r=i(4838),o=i(1467),a=i(1880),d=TypeError;t.exports=function(t,e){var i=t.exec;if(r(i)){var l=n(i,t,e);return null!==l&&s(l),l}if("RegExp"===o(t))return n(a,t,e);throw new d("RegExp#exec called on incompatible receiver")}},1880:(t,e,i)=>{"use strict";var n,s,r=i(230),o=i(8583),a=i(8756),d=i(7626),l=i(3234),c=i(7620),u=i(6551),h=i(7768).get,f=i(1474),p=i(9839),m=c("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,w=o("".charAt),y=o("".indexOf),b=o("".replace),_=o("".slice),I=(s=/b*/g,r(v,n=/a/,"a"),r(v,s,"a"),0!==n.lastIndex||0!==s.lastIndex),S=l.BROKEN_CARET,A=void 0!==/()??/.exec("")[1];(I||A||S||f||p)&&(g=function(t){var e,i,n,s,o,l,c,f=this,p=h(f),O=a(t),E=p.raw;if(E)return E.lastIndex=f.lastIndex,e=r(g,E,O),f.lastIndex=E.lastIndex,e;var k=p.groups,M=S&&f.sticky,T=r(d,f),R=f.source,P=0,C=O;if(M&&(T=b(T,"y",""),-1===y(T,"g")&&(T+="g"),C=_(O,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==w(O,f.lastIndex-1))&&(R="(?: "+R+")",C=" "+C,P++),i=new RegExp("^(?:"+R+")",T)),A&&(i=new RegExp("^"+R+"$(?!\\s)",T)),I&&(n=f.lastIndex),s=r(v,M?i:f,C),M?s?(s.input=_(s.input,P),s[0]=_(s[0],P),s.index=f.lastIndex,f.lastIndex+=s[0].length):f.lastIndex=0:I&&s&&(f.lastIndex=f.global?s.index+s[0].length:n),A&&s&&s.length>1&&r(m,s[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(s[o]=void 0)})),s&&k)for(s.groups=l=u(null),o=0;o<k.length;o++)l[(c=k[o])[0]]=s[c[1]];return s}),t.exports=g},7626:(t,e,i)=>{"use strict";var n=i(6556);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},3234:(t,e,i)=>{"use strict";var n=i(5008),s=i(3795).RegExp,r=n((function(){var t=s("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),o=r||n((function(){return!s("a","y").sticky})),a=r||n((function(){var t=s("^r","gy");return t.lastIndex=2,null!==t.exec("str")}));t.exports={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:r}},1474:(t,e,i)=>{"use strict";var n=i(5008),s=i(3795).RegExp;t.exports=n((function(){var t=s(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)}))},9839:(t,e,i)=>{"use strict";var n=i(5008),s=i(3795).RegExp;t.exports=n((function(){var t=s("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")}))},6187:(t,e,i)=>{"use strict";var n=i(8364),s=TypeError;t.exports=function(t){if(n(t))throw new s("Can't call method on "+t);return t}},9350:(t,e,i)=>{"use strict";var n=i(3795),s=i(9691),r=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!s)return n[t];var e=r(n,t);return e&&e.value}},2140:(t,e,i)=>{"use strict";var n=i(4544).f,s=i(9400),r=i(8020)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!s(t,r)&&n(t,r,{configurable:!0,value:e})}},9030:(t,e,i)=>{"use strict";var n=i(7620),s=i(2215),r=n("keys");t.exports=function(t){return r[t]||(r[t]=s(t))}},4716:(t,e,i)=>{"use strict";var n=i(2060),s=i(3795),r=i(0),o="__core-js_shared__",a=t.exports=s[o]||r(o,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:n?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7620:(t,e,i)=>{"use strict";var n=i(4716);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},2106:(t,e,i)=>{"use strict";var n=i(8583),s=i(8286),r=i(8756),o=i(6187),a=n("".charAt),d=n("".charCodeAt),l=n("".slice),c=function(t){return function(e,i){var n,c,u=r(o(e)),h=s(i),f=u.length;return h<0||h>=f?t?"":void 0:(n=d(u,h))<55296||n>56319||h+1===f||(c=d(u,h+1))<56320||c>57343?t?a(u,h):n:t?l(u,h,h+2):c-56320+(n-55296<<10)+65536}};t.exports={codeAt:c(!1),charAt:c(!0)}},6232:(t,e,i)=>{"use strict";var n=i(8583),s=2147483647,r=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",d=RangeError,l=n(o.exec),c=Math.floor,u=String.fromCharCode,h=n("".charCodeAt),f=n([].join),p=n([].push),m=n("".replace),v=n("".split),g=n("".toLowerCase),w=function(t){return t+22+75*(t<26)},y=function(t,e,i){var n=0;for(t=i?c(t/700):t>>1,t+=c(t/e);t>455;)t=c(t/35),n+=36;return c(n+36*t/(t+38))},b=function(t){var e=[];t=function(t){for(var e=[],i=0,n=t.length;i<n;){var s=h(t,i++);if(s>=55296&&s<=56319&&i<n){var r=h(t,i++);56320==(64512&r)?p(e,((1023&s)<<10)+(1023&r)+65536):(p(e,s),i--)}else p(e,s)}return e}(t);var i,n,r=t.length,o=128,l=0,m=72;for(i=0;i<t.length;i++)(n=t[i])<128&&p(e,u(n));var v=e.length,g=v;for(v&&p(e,"-");g<r;){var b=s;for(i=0;i<t.length;i++)(n=t[i])>=o&&n<b&&(b=n);var _=g+1;if(b-o>c((s-l)/_))throw new d(a);for(l+=(b-o)*_,o=b,i=0;i<t.length;i++){if((n=t[i])<o&&++l>s)throw new d(a);if(n===o){for(var I=l,S=36;;){var A=S<=m?1:S>=m+26?26:S-m;if(I<A)break;var O=I-A,E=36-A;p(e,u(w(A+O%E))),I=c(O/E),S+=36}p(e,u(w(I))),m=y(l,_,g===v),l=0,g++}}l++,o++}return f(e,"")};t.exports=function(t){var e,i,n=[],s=v(m(g(t),o,"."),".");for(e=0;e<s.length;e++)i=s[e],p(n,l(r,i)?"xn--"+b(i):i);return f(n,".")}},5999:(t,e,i)=>{"use strict";var n=i(3957).PROPER,s=i(5008),r=i(9967);t.exports=function(t){return s((function(){return!!r[t]()||"​᠎"!=="​᠎"[t]()||n&&r[t].name!==t}))}},3757:(t,e,i)=>{"use strict";var n=i(8583),s=i(6187),r=i(8756),o=i(9967),a=n("".replace),d=RegExp("^["+o+"]+"),l=RegExp("(^|[^"+o+"])["+o+"]+$"),c=function(t){return function(e){var i=r(s(e));return 1&t&&(i=a(i,d,"")),2&t&&(i=a(i,l,"$1")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},4306:(t,e,i)=>{"use strict";var n=i(8746),s=i(5008),r=i(3795).String;t.exports=!!Object.getOwnPropertySymbols&&!s((function(){var t=Symbol("symbol detection");return!r(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},4597:(t,e,i)=>{"use strict";var n=i(8286),s=Math.max,r=Math.min;t.exports=function(t,e){var i=n(t);return i<0?s(i+e,0):r(i,e)}},4770:(t,e,i)=>{"use strict";var n=i(8422),s=i(6187);t.exports=function(t){return n(s(t))}},8286:(t,e,i)=>{"use strict";var n=i(3700);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},7605:(t,e,i)=>{"use strict";var n=i(8286),s=Math.min;t.exports=function(t){var e=n(t);return e>0?s(e,9007199254740991):0}},502:(t,e,i)=>{"use strict";var n=i(6187),s=Object;t.exports=function(t){return s(n(t))}},9968:(t,e,i)=>{"use strict";var n=i(230),s=i(2177),r=i(622),o=i(6859),a=i(5857),d=i(8020),l=TypeError,c=d("toPrimitive");t.exports=function(t,e){if(!s(t)||r(t))return t;var i,d=o(t,c);if(d){if(void 0===e&&(e="default"),i=n(d,t,e),!s(i)||r(i))return i;throw new l("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},2874:(t,e,i)=>{"use strict";var n=i(9968),s=i(622);t.exports=function(t){var e=n(t,"string");return s(e)?e:e+""}},2763:(t,e,i)=>{"use strict";var n={};n[i(8020)("toStringTag")]="z",t.exports="[object z]"===String(n)},8756:(t,e,i)=>{"use strict";var n=i(2664),s=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},8516:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},2215:(t,e,i)=>{"use strict";var n=i(8583),s=0,r=Math.random(),o=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++s+r,36)}},7363:(t,e,i)=>{"use strict";var n=i(5008),s=i(8020),r=i(9691),o=i(2060),a=s("iterator");t.exports=!n((function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,i=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),i.delete("a",2),i.delete("b",void 0),o&&(!t.toJSON||!i.has("a",1)||i.has("a",2)||!i.has("a",void 0)||i.has("b"))||!e.size&&(o||!r)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host}))},6635:(t,e,i)=>{"use strict";var n=i(4306);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2329:(t,e,i)=>{"use strict";var n=i(9691),s=i(5008);t.exports=n&&s((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},6343:t=>{"use strict";var e=TypeError;t.exports=function(t,i){if(t<i)throw new e("Not enough arguments");return t}},539:(t,e,i)=>{"use strict";var n=i(3795),s=i(4838),r=n.WeakMap;t.exports=s(r)&&/native code/.test(String(r))},8020:(t,e,i)=>{"use strict";var n=i(3795),s=i(7620),r=i(9400),o=i(2215),a=i(4306),d=i(6635),l=n.Symbol,c=s("wks"),u=d?l.for||l:l&&l.withoutSetter||o;t.exports=function(t){return r(c,t)||(c[t]=a&&r(l,t)?l[t]:u("Symbol."+t)),c[t]}},9967:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},4311:(t,e,i)=>{"use strict";var n=i(4770),s=i(4816),r=i(82),o=i(7768),a=i(4544).f,d=i(7691),l=i(6602),c=i(2060),u=i(9691),h="Array Iterator",f=o.set,p=o.getterFor(h);t.exports=d(Array,"Array",(function(t,e){f(this,{type:h,target:n(t),index:0,kind:e})}),(function(){var t=p(this),e=t.target,i=t.index++;if(!e||i>=e.length)return t.target=null,l(void 0,!0);switch(t.kind){case"keys":return l(i,!1);case"values":return l(e[i],!1)}return l([i,e[i]],!1)}),"values");var m=r.Arguments=r.Array;if(s("keys"),s("values"),s("entries"),!c&&u&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(t){}},7322:(t,e,i)=>{"use strict";i(4816)("flatMap")},9853:(t,e,i)=>{"use strict";i(4816)("flat")},5418:(t,e,i)=>{"use strict";var n=i(6887),s=i(1880);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},8598:(t,e,i)=>{"use strict";var n=i(6887),s=i(8583),r=i(4597),o=RangeError,a=String.fromCharCode,d=String.fromCodePoint,l=s([].join);n({target:"String",stat:!0,arity:1,forced:!!d&&1!==d.length},{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw new o(e+" is not a valid code point");i[s]=e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320)}return l(i,"")}})},8693:(t,e,i)=>{"use strict";var n=i(2106).charAt,s=i(8756),r=i(7768),o=i(7691),a=i(6602),d="String Iterator",l=r.set,c=r.getterFor(d);o(String,"String",(function(t){l(this,{type:d,string:s(t),index:0})}),(function(){var t,e=c(this),i=e.string,s=e.index;return s>=i.length?a(void 0,!0):(t=n(i,s),e.index+=t.length,a(t,!1))}))},271:(t,e,i)=>{"use strict";var n=i(3060),s=i(230),r=i(8583),o=i(4673),a=i(5008),d=i(6556),l=i(4838),c=i(8364),u=i(8286),h=i(7605),f=i(8756),p=i(6187),m=i(1092),v=i(6859),g=i(9755),w=i(735),y=i(8020)("replace"),b=Math.max,_=Math.min,I=r([].concat),S=r([].push),A=r("".indexOf),O=r("".slice),E="$0"==="a".replace(/./,"$0"),k=!!/./[y]&&""===/./[y]("a","$0");o("replace",(function(t,e,i){var r=k?"$":"$0";return[function(t,i){var n=p(this),r=c(t)?void 0:v(t,y);return r?s(r,t,n,i):s(e,f(n),t,i)},function(t,s){var o=d(this),a=f(t);if("string"==typeof s&&-1===A(s,r)&&-1===A(s,"$<")){var c=i(e,o,a,s);if(c.done)return c.value}var p=l(s);p||(s=f(s));var v,y=o.global;y&&(v=o.unicode,o.lastIndex=0);for(var E,k=[];null!==(E=w(o,a))&&(S(k,E),y);){""===f(E[0])&&(o.lastIndex=m(a,h(o.lastIndex),v))}for(var M,T="",R=0,P=0;P<k.length;P++){for(var C,D=f((E=k[P])[0]),x=b(_(u(E.index),a.length),0),L=[],Y=1;Y<E.length;Y++)S(L,void 0===(M=E[Y])?M:String(M));var V=E.groups;if(p){var U=I([D],L,x,a);void 0!==V&&S(U,V),C=f(n(s,void 0,U))}else C=g(D,a,x,L,V,s);x>=R&&(T+=O(a,R,x)+C,R=x+D.length)}return T+O(a,R)}]}),!!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!E||k)},5035:(t,e,i)=>{"use strict";var n=i(6887),s=i(3757).trim;n({target:"String",proto:!0,forced:i(5999)("trim")},{trim:function(){return s(this)}})},5404:(t,e,i)=>{"use strict";var n=i(3795),s=i(1307),r=i(3569),o=i(4311),a=i(126),d=i(2140),l=i(8020)("iterator"),c=o.values,u=function(t,e){if(t){if(t[l]!==c)try{a(t,l,c)}catch(e){t[l]=c}if(d(t,e,!0),s[e])for(var i in o)if(t[i]!==o[i])try{a(t,i,o[i])}catch(e){t[i]=o[i]}}};for(var h in s)u(n[h]&&n[h].prototype,h);u(r,"DOMTokenList")},621:(t,e,i)=>{"use strict";i(4311),i(8598);var n=i(6887),s=i(3795),r=i(9350),o=i(4050),a=i(230),d=i(8583),l=i(9691),c=i(7363),u=i(8051),h=i(2815),f=i(9110),p=i(2140),m=i(1721),v=i(7768),g=i(8784),w=i(4838),y=i(9400),b=i(7443),_=i(2664),I=i(6556),S=i(2177),A=i(8756),O=i(6551),E=i(5973),k=i(6216),M=i(8764),T=i(6602),R=i(6343),P=i(8020),C=i(1141),D=P("iterator"),x="URLSearchParams",L=x+"Iterator",Y=v.set,V=v.getterFor(x),U=v.getterFor(L),j=r("fetch"),F=r("Request"),N=r("Headers"),H=F&&F.prototype,B=N&&N.prototype,q=s.TypeError,J=s.encodeURIComponent,W=String.fromCharCode,z=o("String","fromCodePoint"),K=parseInt,$=d("".charAt),G=d([].join),Q=d([].push),X=d("".replace),Z=d([].shift),tt=d([].splice),et=d("".split),it=d("".slice),nt=d(/./.exec),st=/\+/g,rt=/^[0-9a-f]+$/i,ot=function(t,e){var i=it(t,e,e+2);return nt(rt,i)?K(i,16):NaN},at=function(t){for(var e=0,i=128;i>0&&t&i;i>>=1)e++;return e},dt=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},lt=function(t){for(var e=(t=X(t,st," ")).length,i="",n=0;n<e;){var s=$(t,n);if("%"===s){if("%"===$(t,n+1)||n+3>e){i+="%",n++;continue}var r=ot(t,n+1);if(r!=r){i+=s,n++;continue}n+=2;var o=at(r);if(0===o)s=W(r);else{if(1===o||o>4){i+="�",n++;continue}for(var a=[r],d=1;d<o&&!(++n+3>e||"%"!==$(t,n));){var l=ot(t,n+1);if(l!=l){n+=3;break}if(l>191||l<128)break;Q(a,l),n+=2,d++}if(a.length!==o){i+="�";continue}var c=dt(a);null===c?i+="�":s=z(c)}}i+=s,n++}return i},ct=/[!'()~]|%20/g,ut={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ht=function(t){return ut[t]},ft=function(t){return X(J(t),ct,ht)},pt=m((function(t,e){Y(this,{type:L,target:V(t).entries,index:0,kind:e})}),x,(function(){var t=U(this),e=t.target,i=t.index++;if(!e||i>=e.length)return t.target=null,T(void 0,!0);var n=e[i];switch(t.kind){case"keys":return T(n.key,!1);case"values":return T(n.value,!1)}return T([n.key,n.value],!1)}),!0),mt=function(t){this.entries=[],this.url=null,void 0!==t&&(S(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===$(t,0)?it(t,1):t:A(t)))};mt.prototype={type:x,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,i,n,s,r,o,d,l=this.entries,c=M(t);if(c)for(i=(e=k(t,c)).next;!(n=a(i,e)).done;){if(r=(s=k(I(n.value))).next,(o=a(r,s)).done||(d=a(r,s)).done||!a(r,s).done)throw new q("Expected sequence with length 2");Q(l,{key:A(o.value),value:A(d.value)})}else for(var u in t)y(t,u)&&Q(l,{key:u,value:A(t[u])})},parseQuery:function(t){if(t)for(var e,i,n=this.entries,s=et(t,"&"),r=0;r<s.length;)(e=s[r++]).length&&(i=et(e,"="),Q(n,{key:lt(Z(i)),value:lt(G(i,"="))}))},serialize:function(){for(var t,e=this.entries,i=[],n=0;n<e.length;)t=e[n++],Q(i,ft(t.key)+"="+ft(t.value));return G(i,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vt=function(){g(this,gt);var t=Y(this,new mt(arguments.length>0?arguments[0]:void 0));l||(this.size=t.entries.length)},gt=vt.prototype;if(f(gt,{append:function(t,e){var i=V(this);R(arguments.length,2),Q(i.entries,{key:A(t),value:A(e)}),l||this.length++,i.updateURL()},delete:function(t){for(var e=V(this),i=R(arguments.length,1),n=e.entries,s=A(t),r=i<2?void 0:arguments[1],o=void 0===r?r:A(r),a=0;a<n.length;){var d=n[a];if(d.key!==s||void 0!==o&&d.value!==o)a++;else if(tt(n,a,1),void 0!==o)break}l||(this.size=n.length),e.updateURL()},get:function(t){var e=V(this).entries;R(arguments.length,1);for(var i=A(t),n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){var e=V(this).entries;R(arguments.length,1);for(var i=A(t),n=[],s=0;s<e.length;s++)e[s].key===i&&Q(n,e[s].value);return n},has:function(t){for(var e=V(this).entries,i=R(arguments.length,1),n=A(t),s=i<2?void 0:arguments[1],r=void 0===s?s:A(s),o=0;o<e.length;){var a=e[o++];if(a.key===n&&(void 0===r||a.value===r))return!0}return!1},set:function(t,e){var i=V(this);R(arguments.length,1);for(var n,s=i.entries,r=!1,o=A(t),a=A(e),d=0;d<s.length;d++)(n=s[d]).key===o&&(r?tt(s,d--,1):(r=!0,n.value=a));r||Q(s,{key:o,value:a}),l||(this.size=s.length),i.updateURL()},sort:function(){var t=V(this);C(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,i=V(this).entries,n=b(t,arguments.length>1?arguments[1]:void 0),s=0;s<i.length;)n((e=i[s++]).value,e.key,this)},keys:function(){return new pt(this,"keys")},values:function(){return new pt(this,"values")},entries:function(){return new pt(this,"entries")}},{enumerable:!0}),u(gt,D,gt.entries,{name:"entries"}),u(gt,"toString",(function(){return V(this).serialize()}),{enumerable:!0}),l&&h(gt,"size",{get:function(){return V(this).entries.length},configurable:!0,enumerable:!0}),p(vt,x),n({global:!0,constructor:!0,forced:!c},{URLSearchParams:vt}),!c&&w(N)){var wt=d(B.has),yt=d(B.set),bt=function(t){if(S(t)){var e,i=t.body;if(_(i)===x)return e=t.headers?new N(t.headers):new N,wt(e,"content-type")||yt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),O(t,{body:E(0,A(i)),headers:E(0,e)})}return t};if(w(j)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return j(t,arguments.length>1?bt(arguments[1]):{})}}),w(F)){var _t=function(t){return g(this,H),new F(t,arguments.length>1?bt(arguments[1]):{})};H.constructor=_t,_t.prototype=H,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:_t})}}t.exports={URLSearchParams:vt,getState:V}},1263:(t,e,i)=>{"use strict";i(621)},1689:(t,e,i)=>{"use strict";i(8693);var n,s=i(6887),r=i(9691),o=i(7363),a=i(3795),d=i(7443),l=i(8583),c=i(8051),u=i(2815),h=i(8784),f=i(9400),p=i(1606),m=i(2553),v=i(8399),g=i(2106).codeAt,w=i(6232),y=i(8756),b=i(2140),_=i(6343),I=i(621),S=i(7768),A=S.set,O=S.getterFor("URL"),E=I.URLSearchParams,k=I.getState,M=a.URL,T=a.TypeError,R=a.parseInt,P=Math.floor,C=Math.pow,D=l("".charAt),x=l(/./.exec),L=l([].join),Y=l(1..toString),V=l([].pop),U=l([].push),j=l("".replace),F=l([].shift),N=l("".split),H=l("".slice),B=l("".toLowerCase),q=l([].unshift),J="Invalid scheme",W="Invalid host",z="Invalid port",K=/[a-z]/i,$=/[\d+-.a-z]/i,G=/\d/,Q=/^0x/i,X=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,it=/[\0\t\n\r #/:<>?@[\\\]^|]/,nt=/^[\u0000-\u0020]+/,st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,rt=/[\t\n\r]/g,ot=function(t){var e,i,n,s;if("number"==typeof t){for(e=[],i=0;i<4;i++)q(e,t%256),t=P(t/256);return L(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,i=1,n=null,s=0,r=0;r<8;r++)0!==t[r]?(s>i&&(e=n,i=s),n=null,s=0):(null===n&&(n=r),++s);return s>i?n:e}(t),i=0;i<8;i++)s&&0===t[i]||(s&&(s=!1),n===i?(e+=i?":":"::",s=!0):(e+=Y(t[i],16),i<7&&(e+=":")));return"["+e+"]"}return t},at={},dt=p({},at,{" ":1,'"':1,"<":1,">":1,"`":1}),lt=p({},dt,{"#":1,"?":1,"{":1,"}":1}),ct=p({},lt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ut=function(t,e){var i=g(t,0);return i>32&&i<127&&!f(e,t)?t:encodeURIComponent(t)},ht={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ft=function(t,e){var i;return 2===t.length&&x(K,D(t,0))&&(":"===(i=D(t,1))||!e&&"|"===i)},pt=function(t){var e;return t.length>1&&ft(H(t,0,2))&&(2===t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},mt=function(t){return"."===t||"%2e"===B(t)},vt={},gt={},wt={},yt={},bt={},_t={},It={},St={},At={},Ot={},Et={},kt={},Mt={},Tt={},Rt={},Pt={},Ct={},Dt={},xt={},Lt={},Yt={},Vt=function(t,e,i){var n,s,r,o=y(t);if(e){if(s=this.parse(o))throw new T(s);this.searchParams=null}else{if(void 0!==i&&(n=new Vt(i,!0)),s=this.parse(o,null,n))throw new T(s);(r=k(new E)).bindURL(this),this.searchParams=r}};Vt.prototype={type:"URL",parse:function(t,e,i){var s,r,o,a,d,l=this,c=e||vt,u=0,h="",p=!1,g=!1,w=!1;for(t=y(t),e||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,t=j(t,nt,""),t=j(t,st,"$1")),t=j(t,rt,""),s=m(t);u<=s.length;){switch(r=s[u],c){case vt:if(!r||!x(K,r)){if(e)return J;c=wt;continue}h+=B(r),c=gt;break;case gt:if(r&&(x($,r)||"+"===r||"-"===r||"."===r))h+=B(r);else{if(":"!==r){if(e)return J;h="",c=wt,u=0;continue}if(e&&(l.isSpecial()!==f(ht,h)||"file"===h&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=h,e)return void(l.isSpecial()&&ht[l.scheme]===l.port&&(l.port=null));h="","file"===l.scheme?c=Tt:l.isSpecial()&&i&&i.scheme===l.scheme?c=yt:l.isSpecial()?c=St:"/"===s[u+1]?(c=bt,u++):(l.cannotBeABaseURL=!0,U(l.path,""),c=xt)}break;case wt:if(!i||i.cannotBeABaseURL&&"#"!==r)return J;if(i.cannotBeABaseURL&&"#"===r){l.scheme=i.scheme,l.path=v(i.path),l.query=i.query,l.fragment="",l.cannotBeABaseURL=!0,c=Yt;break}c="file"===i.scheme?Tt:_t;continue;case yt:if("/"!==r||"/"!==s[u+1]){c=_t;continue}c=At,u++;break;case bt:if("/"===r){c=Ot;break}c=Dt;continue;case _t:if(l.scheme=i.scheme,r===n)l.username=i.username,l.password=i.password,l.host=i.host,l.port=i.port,l.path=v(i.path),l.query=i.query;else if("/"===r||"\\"===r&&l.isSpecial())c=It;else if("?"===r)l.username=i.username,l.password=i.password,l.host=i.host,l.port=i.port,l.path=v(i.path),l.query="",c=Lt;else{if("#"!==r){l.username=i.username,l.password=i.password,l.host=i.host,l.port=i.port,l.path=v(i.path),l.path.length--,c=Dt;continue}l.username=i.username,l.password=i.password,l.host=i.host,l.port=i.port,l.path=v(i.path),l.query=i.query,l.fragment="",c=Yt}break;case It:if(!l.isSpecial()||"/"!==r&&"\\"!==r){if("/"!==r){l.username=i.username,l.password=i.password,l.host=i.host,l.port=i.port,c=Dt;continue}c=Ot}else c=At;break;case St:if(c=At,"/"!==r||"/"!==D(h,u+1))continue;u++;break;case At:if("/"!==r&&"\\"!==r){c=Ot;continue}break;case Ot:if("@"===r){p&&(h="%40"+h),p=!0,o=m(h);for(var b=0;b<o.length;b++){var _=o[b];if(":"!==_||w){var I=ut(_,ct);w?l.password+=I:l.username+=I}else w=!0}h=""}else if(r===n||"/"===r||"?"===r||"#"===r||"\\"===r&&l.isSpecial()){if(p&&""===h)return"Invalid authority";u-=m(h).length+1,h="",c=Et}else h+=r;break;case Et:case kt:if(e&&"file"===l.scheme){c=Pt;continue}if(":"!==r||g){if(r===n||"/"===r||"?"===r||"#"===r||"\\"===r&&l.isSpecial()){if(l.isSpecial()&&""===h)return W;if(e&&""===h&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(h))return a;if(h="",c=Ct,e)return;continue}"["===r?g=!0:"]"===r&&(g=!1),h+=r}else{if(""===h)return W;if(a=l.parseHost(h))return a;if(h="",c=Mt,e===kt)return}break;case Mt:if(!x(G,r)){if(r===n||"/"===r||"?"===r||"#"===r||"\\"===r&&l.isSpecial()||e){if(""!==h){var S=R(h,10);if(S>65535)return z;l.port=l.isSpecial()&&S===ht[l.scheme]?null:S,h=""}if(e)return;c=Ct;continue}return z}h+=r;break;case Tt:if(l.scheme="file","/"===r||"\\"===r)c=Rt;else{if(!i||"file"!==i.scheme){c=Dt;continue}switch(r){case n:l.host=i.host,l.path=v(i.path),l.query=i.query;break;case"?":l.host=i.host,l.path=v(i.path),l.query="",c=Lt;break;case"#":l.host=i.host,l.path=v(i.path),l.query=i.query,l.fragment="",c=Yt;break;default:pt(L(v(s,u),""))||(l.host=i.host,l.path=v(i.path),l.shortenPath()),c=Dt;continue}}break;case Rt:if("/"===r||"\\"===r){c=Pt;break}i&&"file"===i.scheme&&!pt(L(v(s,u),""))&&(ft(i.path[0],!0)?U(l.path,i.path[0]):l.host=i.host),c=Dt;continue;case Pt:if(r===n||"/"===r||"\\"===r||"?"===r||"#"===r){if(!e&&ft(h))c=Dt;else if(""===h){if(l.host="",e)return;c=Ct}else{if(a=l.parseHost(h))return a;if("localhost"===l.host&&(l.host=""),e)return;h="",c=Ct}continue}h+=r;break;case Ct:if(l.isSpecial()){if(c=Dt,"/"!==r&&"\\"!==r)continue}else if(e||"?"!==r)if(e||"#"!==r){if(r!==n&&(c=Dt,"/"!==r))continue}else l.fragment="",c=Yt;else l.query="",c=Lt;break;case Dt:if(r===n||"/"===r||"\\"===r&&l.isSpecial()||!e&&("?"===r||"#"===r)){if(".."===(d=B(d=h))||"%2e."===d||".%2e"===d||"%2e%2e"===d?(l.shortenPath(),"/"===r||"\\"===r&&l.isSpecial()||U(l.path,"")):mt(h)?"/"===r||"\\"===r&&l.isSpecial()||U(l.path,""):("file"===l.scheme&&!l.path.length&&ft(h)&&(l.host&&(l.host=""),h=D(h,0)+":"),U(l.path,h)),h="","file"===l.scheme&&(r===n||"?"===r||"#"===r))for(;l.path.length>1&&""===l.path[0];)F(l.path);"?"===r?(l.query="",c=Lt):"#"===r&&(l.fragment="",c=Yt)}else h+=ut(r,lt);break;case xt:"?"===r?(l.query="",c=Lt):"#"===r?(l.fragment="",c=Yt):r!==n&&(l.path[0]+=ut(r,at));break;case Lt:e||"#"!==r?r!==n&&("'"===r&&l.isSpecial()?l.query+="%27":l.query+="#"===r?"%23":ut(r,at)):(l.fragment="",c=Yt);break;case Yt:r!==n&&(l.fragment+=ut(r,dt))}u++}},parseHost:function(t){var e,i,n;if("["===D(t,0)){if("]"!==D(t,t.length-1))return W;if(e=function(t){var e,i,n,s,r,o,a,d=[0,0,0,0,0,0,0,0],l=0,c=null,u=0,h=function(){return D(t,u)};if(":"===h()){if(":"!==D(t,1))return;u+=2,c=++l}for(;h();){if(8===l)return;if(":"!==h()){for(e=i=0;i<4&&x(tt,h());)e=16*e+R(h(),16),u++,i++;if("."===h()){if(0===i)return;if(u-=i,l>6)return;for(n=0;h();){if(s=null,n>0){if(!("."===h()&&n<4))return;u++}if(!x(G,h()))return;for(;x(G,h());){if(r=R(h(),10),null===s)s=r;else{if(0===s)return;s=10*s+r}if(s>255)return;u++}d[l]=256*d[l]+s,2!=++n&&4!==n||l++}if(4!==n)return;break}if(":"===h()){if(u++,!h())return}else if(h())return;d[l++]=e}else{if(null!==c)return;u++,c=++l}}if(null!==c)for(o=l-c,l=7;0!==l&&o>0;)a=d[l],d[l--]=d[c+o-1],d[c+--o]=a;else if(8!==l)return;return d}(H(t,1,-1)),!e)return W;this.host=e}else if(this.isSpecial()){if(t=w(t),x(et,t))return W;if(e=function(t){var e,i,n,s,r,o,a,d=N(t,".");if(d.length&&""===d[d.length-1]&&d.length--,(e=d.length)>4)return t;for(i=[],n=0;n<e;n++){if(""===(s=d[n]))return t;if(r=10,s.length>1&&"0"===D(s,0)&&(r=x(Q,s)?16:8,s=H(s,8===r?1:2)),""===s)o=0;else{if(!x(10===r?Z:8===r?X:tt,s))return t;o=R(s,r)}U(i,o)}for(n=0;n<e;n++)if(o=i[n],n===e-1){if(o>=C(256,5-e))return null}else if(o>255)return null;for(a=V(i),n=0;n<i.length;n++)a+=i[n]*C(256,3-n);return a}(t),null===e)return W;this.host=e}else{if(x(it,t))return W;for(e="",i=m(t),n=0;n<i.length;n++)e+=ut(i[n],at);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return f(ht,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&ft(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,i=t.username,n=t.password,s=t.host,r=t.port,o=t.path,a=t.query,d=t.fragment,l=e+":";return null!==s?(l+="//",t.includesCredentials()&&(l+=i+(n?":"+n:"")+"@"),l+=ot(s),null!==r&&(l+=":"+r)):"file"===e&&(l+="//"),l+=t.cannotBeABaseURL?o[0]:o.length?"/"+L(o,"/"):"",null!==a&&(l+="?"+a),null!==d&&(l+="#"+d),l},setHref:function(t){var e=this.parse(t);if(e)throw new T(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Ut(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+ot(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(y(t)+":",vt)},getUsername:function(){return this.username},setUsername:function(t){var e=m(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var i=0;i<e.length;i++)this.username+=ut(e[i],ct)}},getPassword:function(){return this.password},setPassword:function(t){var e=m(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var i=0;i<e.length;i++)this.password+=ut(e[i],ct)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?ot(t):ot(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Et)},getHostname:function(){var t=this.host;return null===t?"":ot(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,kt)},getPort:function(){var t=this.port;return null===t?"":y(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=y(t))?this.port=null:this.parse(t,Mt))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+L(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Ct))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=y(t))?this.query=null:("?"===D(t,0)&&(t=H(t,1)),this.query="",this.parse(t,Lt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=y(t))?("#"===D(t,0)&&(t=H(t,1)),this.fragment="",this.parse(t,Yt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ut=function(t){var e=h(this,jt),i=_(arguments.length,1)>1?arguments[1]:void 0,n=A(e,new Vt(t,!1,i));r||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},jt=Ut.prototype,Ft=function(t,e){return{get:function(){return O(this)[t]()},set:e&&function(t){return O(this)[e](t)},configurable:!0,enumerable:!0}};if(r&&(u(jt,"href",Ft("serialize","setHref")),u(jt,"origin",Ft("getOrigin")),u(jt,"protocol",Ft("getProtocol","setProtocol")),u(jt,"username",Ft("getUsername","setUsername")),u(jt,"password",Ft("getPassword","setPassword")),u(jt,"host",Ft("getHost","setHost")),u(jt,"hostname",Ft("getHostname","setHostname")),u(jt,"port",Ft("getPort","setPort")),u(jt,"pathname",Ft("getPathname","setPathname")),u(jt,"search",Ft("getSearch","setSearch")),u(jt,"searchParams",Ft("getSearchParams")),u(jt,"hash",Ft("getHash","setHash"))),c(jt,"toJSON",(function(){return O(this).serialize()}),{enumerable:!0}),c(jt,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),M){var Nt=M.createObjectURL,Ht=M.revokeObjectURL;Nt&&c(Ut,"createObjectURL",d(Nt,M)),Ht&&c(Ut,"revokeObjectURL",d(Ht,M))}b(Ut,"URL"),s({global:!0,constructor:!0,forced:!o,sham:!r},{URL:Ut})},8179:(t,e,i)=>{"use strict";i(1689)},9555:(t,e,i)=>{"use strict";var n=i(6887),s=i(230);n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return s(URL.prototype.toString,this)}})}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t={};i.r(t),i.d(t,{handle:()=>dt,listen:()=>ut});i(5404);const e=function(t){const e=document.createElement(t.nodeName);for(let i=0;i<t.attributes.length;i++){const n=t.attributes.item(i);n&&e.setAttribute(n.name,n.value)}return e};var n;!function(t){t.getBoundingClientRect="getBoundingClientRect",t.IntersectionObserver="IntersectionObserver",t.NOTAVAILABLE="NOTAVAILABLE"}(n||(n={}));const s={ViewableMethod:n,getFunctionObject(t){if(!t)return null;const e=t.split("."),i=e.length;let n=window;for(let t=0;t<i;t++)if(!(n=n[e[t]]))return null;return"function"==typeof n?n:null},executeCallback(t,e){const i=this.getFunctionObject(t);i&&i.apply(this,e)},loadScript(t,e,i){function n(t){e&&(t.onload=function(){e()})}if(i){const e=document.createElement("SCRIPT");e.src=t,e.type="text/javascript",n(e);const i=document.getElementsByTagName("head");if(i.length>0)i[0].appendChild(e);else{const t=document.getElementsByTagName("script")[0];if(!t||!t.parentNode)return;t.parentNode.appendChild(e)}}else{const e="yads_preloaded_js_".concat(Math.floor(999999999*Math.random()));document.write('<script id="'.concat(e,'" type="text/javascript" src="').concat(t,'"><\/script>'));n(document.getElementById(e))}},insertTag(t,e){const i=e&&document.getElementById(e);i?i.insertAdjacentHTML("beforeend",t):document.write(t)},insertScriptTag(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!t)return;const i=e&&document.getElementById(e);if(i){const e=document.createElement("script");e.type="text/javascript",e.src=t,i.appendChild(e)}else document.write('<script type="text/javascript" src="'.concat(t,"\"></scr' + 'ipt>"))},findViewableTargetElements(t){let e=function(t){const e="data-ydntxt-item";let i=[];if(t.querySelectorAll){const n=t.querySelectorAll("["+e+"]");i=Array.from(n)}else{const n=t.getElementsByTagName("*");for(const t of n)t.hasAttribute(e)&&i.push(t)}let n=[];if(i.length>0){for(const t of i){const i=t.getAttribute(e)||"",s=parseInt(i,10);!isNaN(s)&&s>0&&(n[s-1]=t)}n.length!==i.length&&(n=i)}return n}(t);return e.length>0?e:(e=function(t){function e(t){return/^https?:\/\/im\.c\.yimg\.jp/.test(t)}const i=[],n=t.getElementsByTagName("a");for(const t of n){if(s=t.href,!/^https?:\/\/rd\.ane\.yahoo\.co\.jp\/rd\?/.test(s))continue;const n=t.getElementsByTagName("img")[0];if(n&&e(n.src)){const e=function(t){const e=t.getBoundingClientRect();return(e.right-e.left)*(e.bottom-e.top)};e(t)>e(n)?i.push(t):i.push(n)}else i.push(t)}var s;return i}(t),e.length>0?e:function(t){const e=t.getElementsByTagName("iframe");return Array.from(e).filter((t=>{return e=t.src,/^https?:\/\/(yads\.yahoo\.co\.jp|yads\.c\.yimg\.jp)\//.test(e);var e}))}(t))},isInnerYadsIframe(){const t=document.createElement("a");return t.href=window.location.href,window.parent!=window&&("s.yimg.jp"===t.hostname||"i.yimg.jp"===t.hostname)&&/yads-iframe\.html$/.test(t.pathname)},isSameOrigin(){let t=window;for(;window.top!==t;){t=t.parent;try{t.document.URL}catch(t){return!1}}return!0},parseQuery(t){const e={},i=t.split("?");if(2!=i.length)return e;const n=i[1].split("&");for(const t of n){const i=t.split("=");1==i.length?e[i[0]]="":e[i[0]]=window.decodeURIComponent(i[1])}return e},appendHtml:function t(i,n){if(!i)return;const s="<html><head></head><body>".concat(n,"</body></html>");let r=null;try{r=(new DOMParser).parseFromString(s,"text/html")}catch(t){return}!function i(n,s,r){if(!s||s.length<=r||!n)return;const o=s.item(r).cloneNode(!0);if("script"===o.nodeName.toLowerCase()){const t=e(o);if(o.src&&!o.onload)return t.onload=function(){i(n,s,r+1)},void n.appendChild(t);t.text=o.text,n.appendChild(t)}else if("noscript"==o.nodeName.toLowerCase());else if(1==o.nodeType){const i=e(o);n.appendChild(i),t(i,o.innerHTML)}else n.appendChild(o);i(n,s,r+1)}(i,r.body.childNodes,0)},removeAllChildNodes(t){const e=document.getElementById(t);if(e)for(;e.firstChild;)e.removeChild(e.firstChild)},removePCBPElement(){var t,e,i,n,s,r,o,a;const d=document.querySelectorAll('[data-rma-tbp="1"]');for(const t of d)t.remove();(null===(n=null===(i=null===(e=null===(t=window.YAHOO)||void 0===t?void 0:t.JP)||void 0===e?void 0:e.rma)||void 0===i?void 0:i.smartplayer)||void 0===n?void 0:n.render)&&delete window.YAHOO.JP.rma.smartplayer.render,(null===(a=null===(o=null===(r=null===(s=window.YAHOO)||void 0===s?void 0:s.JP)||void 0===r?void 0:r.rma)||void 0===o?void 0:o.bannerad)||void 0===a?void 0:a.render)&&delete window.YAHOO.JP.rma.bannerad.render,this.removeAllChildNodes("ssp_ydn_82399_269466")},addPCBPMinHeight(){const t=document.getElementById("ssp_ydn_82399_269466");t&&(t.style.minHeight="240px",t.setAttribute("data-yadsjs-min-height","1"))},removeDataYADSJSMinHeightAttribute(t){const e=document.getElementById(t);(null==e?void 0:e.getAttribute("data-yadsjs-min-height"))&&(e.style.minHeight="",e.removeAttribute("data-yadsjs-min-height"))},callUITemplate(t,e,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!t.callbackVersion)return void(null===r?t(e,i,n,s):t(e,i,n,s,r));((e,i)=>{var n;if(!i)return;const s=document.getElementById(i);if(!s)return;this.removeAllChildNodes(i);const r=t(e,i);s.insertAdjacentHTML("beforeend",r.html),null===(n=r.callbacks)||void 0===n||n.forEach((t=>t(e,i)))})(e,s)}};i(8179),i(9555),i(1263);const r=t=>{const e=e=>{t.cookie=(t=>t.domain?`${t.key}=${t.value}; path=${t.path}; expires=${t.expires.toUTCString()}; domain=${t.domain}`:`${t.key}=${t.value}; path=${t.path}; expires=${t.expires.toUTCString()};`)(e)},i=e=>{const i=t.cookie.split(/;\s*/).find((t=>{const[i,n]=t.split("=");return i===e}));if(!i)return"";const[,n]=i.split("=");return decodeURIComponent(n)};return{set:e,getValue:i,setEtLDPlusOne:n=>{const s=t.location.hostname;if(!a(s))return{type:"invalid-hostname"};const r=o(s).some((s=>{const r=t.cookie,o=((t,e)=>({key:t.key,value:t.value,path:t.path,expires:t.expires,domain:e}))(n,s);e(o);return r!==t.cookie||o.value===i(o.key)}));return r?{type:"success"}:{type:"fail"}}}},o=t=>{const e=t.split(".");if(4===e.length&&e[3].match(/^[0-9]*$/))return[];const i=[];for(let t=e.length-2;t>=0;t--)i.push(e.slice(t).join("."));return i},a=t=>{const e=t.split(".");return 4!==e.length||!e[3].match(/^[0-9]*$/)},d="_yjsu_yjad",l=t=>{return`${e=t.timestamp,Math.floor(e.getTime()/1e3)}.${t.uuid}`;var e},c=t=>{const[e,i]=t.split(".");return{key:d,timestamp:new Date(1e3*parseInt(e)),uuid:i}},u=()=>{const t=new Uint8Array(16);window.crypto.getRandomValues(t),t[6]=15&t[6]|64,t[8]=63&t[8]|128;const e=[...t].map((t=>`0${t.toString(16)}`.slice(-2))).join("");return[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)].join("-")},h=()=>({key:d,timestamp:new Date,uuid:u()}),f=(t,e)=>({key:d,path:"/",domain:e,expires:(t=>{const e=new Date(t.getTime());return e.setFullYear(e.getFullYear()+1),e})(t.timestamp),value:l(t)}),p=t=>({key:d,value:l(t)}),m=({cookieSuid:t,localStorageSuid:e})=>{if(v(t))return{type:"valid",siteUserId:c(t)};if(v(e)){const t=c(e);return g(t.timestamp)?{type:"invalid"}:{type:"valid",siteUserId:t}}return{type:"invalid"}},v=t=>(t=>{if(!t)return!1;const e=t.split(".");if(2!==e.length)return!1;return/^\d{10,}$/.test(e[0])&&(i=e[1],/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(i));var i})(t),g=t=>{const e=Date.now(),i=new Date(t.getTime());return i.setDate(i.getDate()+90),i.getTime()<=e};function w(){const t=function(){var t,e;const i=r(document).getValue(d);let n;try{n=null!==(e=null===(t=null===localStorage||void 0===localStorage?void 0:localStorage.getItem)||void 0===t?void 0:t.call(localStorage,d))&&void 0!==e?e:""}catch(t){n=""}const s=m({cookieSuid:i,localStorageSuid:n});return"valid"===s.type?s.siteUserId.uuid:null}();return t||function(){var t;const e=h(),i=f(e);r(document).setEtLDPlusOne(i);const n=p(e);try{null===(t=null===localStorage||void 0===localStorage?void 0:localStorage.setItem)||void 0===t||t.call(localStorage,n.key,n.value)}catch(t){}return e.uuid}()}class y{constructor(){var t;this.userInput={},this.PARAMETER_LIST=[{name:"s",tagName:"yads_ad_ds",init:""},{name:"fr_id",init:this.getFrId()},{name:"p_elem",tagName:"yads_parent_element",init:""},{name:"noad_cb",tagName:"yads_noad_callback",init:""},{name:"bucket_id",tagName:"yads_bucket_id",init:""},{name:"type",tagName:"yads_type_tag",init:"",max:256},{name:"u",init:this.getLocation()},{name:"debug",tagName:"yads_ad_debug",init:""},{name:"autoplay_set",tagName:"yads_video_autoplay_set",init:""},{name:"pv_ts",init:null!==(t=window.YJ_YADS.pvTs)&&void 0!==t?t:""},{name:"pcat_id",tagName:"yads_placement_category_id",init:""},{name:"shannon_id",tagName:"yads_shannon_id",init:""},{name:"search_keyword",init:"",tagName:"yads_search_word_kw"},{name:"seq",tagName:"yads_request_seq",init:""},{name:"cu",init:this.getCanonicalURL()},{name:"suid",tagName:"yads_is_issue_suid",init:""}],this.initialized=!1,this.PARAMETER_NUM=this.PARAMETER_LIST.length,this.params=[],this.initialized=!1,this.userInput={}}getVal(t,e){const i=t.init;if(void 0===t.tagName)return i;const n=e[t.tagName];if(null==n)return i;if("string"==typeof n){const e=void 0!==t.max?t.max:n.length;return n.substring(0,e)}return n}init(t){if(!this.initialized&&void 0!==t){this.userInput=t;for(let e=0;e<this.PARAMETER_NUM;e++){const i=this.PARAMETER_LIST[e],n=this.getVal(i,t);this.params.push({name:i.name,val:n})}this.initialized=!0,this.setParam("suid",!1===t.yads_is_issue_suid?"":w())}}setParam(t,e){if(this.initialized)for(let i=0;i<this.PARAMETER_NUM;i++)this.params[i].name===t&&(this.params[i].val=e)}getParamByName(t){if(!this.initialized)return null;for(let e=0;e<this.PARAMETER_NUM;e++)if(this.params[e].name===t)return this.params[e];return null}getAllParams(){return this.initialized?this.params:null}getQueryString(){if(!this.initialized)return"";const t=[];for(let e=0;e<this.PARAMETER_NUM;e++){const i=this.params[e];""!==i.val&&t.push(i.name+"="+window.encodeURIComponent(i.val))}return t.join("&")}clearUserInput(){if(void 0!==this.userInput)for(let t=0;t<this.PARAMETER_NUM;t++){const e=this.PARAMETER_LIST[t];void 0!==e.tagName&&(this.userInput[e.tagName]=void 0)}}encodeURL(t){return new URL(t).href}getLocation(){let t=window.location.href;if(window.parent!=window){const e=document.referrer;e&&(t=e)}return this.encodeURL(t)}getCanonicalURL(){const t=function(){const t=document.getElementsByTagName("link");for(const e of t)if("string"==typeof e.rel&&"canonical"===e.rel.toLowerCase()&&e.href)return e.href;return""}();return t?this.encodeURL(t):""}getFrId(){const t=Math.floor(1e7*Math.random());return void 0!==window.YJ_YADS.yads_sequence_num?"yads_".concat(t,"-").concat(window.YJ_YADS.yads_sequence_num):"yads_".concat(t,"-0")}}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;1<e||e<=Math.random()||function(t){if(!window.URL||!window.URLSearchParams)return;const e=new URL("https://yads.yjtag.yahoo.co.jp/b"),i=new URLSearchParams({autodark:t?"1":"0"});e.search=i.toString(),document.createElement("img").src=e.toString()}(function(t){var e;const i="".concat(t,"-auto-dark"),n='<div id="'.concat(i,'" style="display: none; background-color: canvas; color-scheme: light"></div>');null===(e=document.querySelector("#".concat(t)))||void 0===e||e.insertAdjacentHTML("beforeend",n);const s=document.querySelector("#".concat(i));if(s)return"rgb(255, 255, 255)"!==window.getComputedStyle(s).backgroundColor;return!1}(t))}class _{constructor(t){this.config=Object.assign({entryPoint:"https://dsb.yahoo.co.jp/api/v1/stream",clientID:"a72060e2-2747-4fff-a64b-84850dcd9e77",samplingRate:1},t)}send(t){if(1<this.config.samplingRate||this.config.samplingRate<=Math.random())return;const e={tk:this.config.clientID,r:[{data:t,p:this.config.project,d:this.config.dataset}]};window.navigator.sendBeacon&&window.navigator.sendBeacon(this.config.entryPoint,JSON.stringify(e))}}function I(){const t=function(){var t,e;const i=null===(t=null===window||void 0===window?void 0:window.screen)||void 0===t?void 0:t.height,n=null===(e=null===window||void 0===window?void 0:window.screen)||void 0===e?void 0:e.width,s=null===window||void 0===window?void 0:window.devicePixelRatio;if(i&&n&&s)return{h:i,w:n,r:s}}();var e;t&&(e=t,new _({project:"ms_sp_client",dataset:"yads_info",samplingRate:1e-5}).send(e))}class S extends Error{constructor(t){super(t.message),this.toJSON=()=>{var t;return{name:this.name,message:this.message,level:this.level,stack:null!==(t=this.stack)&&void 0!==t?t:"",location:location.href,version:"1.47.0"}},this.name=this.constructor.name,this.level=t.level,t.stack&&(this.stack=t.stack)}}class A extends S{constructor(t){super({message:t,level:"Error"})}}class O extends S{constructor(t){super({message:t.message,level:"Error",stack:t.stack})}}class E{constructor(t){this.beaconSenders=Object.assign({error:new _({project:"ms_sp_client",dataset:"yads_client_error"}),debug:new _({project:"ms_sp_client",dataset:"yads_sampling",samplingRate:1e-4}),referrer:new _({project:"ms_sp_client",dataset:"yads_referer",samplingRate:.01}),viewablediff:new _({project:"ms_sp_client",dataset:"yads_client",samplingRate:.01})},t)}error(t){this.includesLocalFile(t.stack)||this.beaconSenders.error.send(t.toJSON())}debug(t){this.beaconSenders.debug.send(t)}referrer(t){this.beaconSenders.referrer.send(t)}viewablediff(t){this.beaconSenders.viewablediff.send(t)}includesLocalFile(){return/file:\/\//.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}}const k=async function(t,e){const i=new E,n="https://yads.yjtag.yahoo.co.jp/v2/tag?".concat(e.getQueryString());let r;try{const t={method:"GET",credentials:"include",mode:"cors",referrerPolicy:"origin"};window.isSecureContext&&(t.browsingTopics=!0);const e=await fetch(n,t);r=await e.json()}catch(e){r={responseType:"noad",data:{noAdCallback:t.yads_noad_callback||"",reason:2}}}try{!function(t){if(!(null==t?void 0:t.data)||!["dispatch","error","noad"].includes(null==t?void 0:t.responseType))throw Error("type of value isn't JsonTagResponseType ")}(r)}catch(t){i.error(t)}switch(r.responseType){case"noad":s.executeCallback(r.data.noAdCallback,[{reason:r.data.reason}]);break;case"dispatch":window.yadsDispatchDeliverProduct(r.data)}};function M(t){const e=new E;try{if("number"!=typeof window.YJ_YADS.yads_sequence_num?window.YJ_YADS.yads_sequence_num=0:window.YJ_YADS.yads_sequence_num++,!t.yads_ad_ds||!t.yads_parent_element)return;const e=new y;if(e.init(t),i=t.yads_parent_element,window.YJ_YADS||(window.YJ_YADS={}),(null===(n=window.YJ_YADS)||void 0===n?void 0:n.asyncFlags)||(window.YJ_YADS.asyncFlags={}),window.YJ_YADS.asyncFlags[i]=!0,s.removeAllChildNodes(t.yads_parent_element),"82399_269466"===t.yads_ad_ds&&(s.addPCBPMinHeight(),s.removePCBPElement()),b(t.yads_parent_element),I(),void 0!==t.yads_parent_element){document.getElementById(t.yads_parent_element)&&k(t,e)}}catch(t){e.error(new O(t))}var i,n}!function(t,e,i){var n;if(null===(n=window.YJ_YADS)||void 0===n?void 0:n.loadedStreamConf)return;window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.loadedStreamConf=!0,i.conf=[{params:{yads_ad_ds:"60766_11161"},group:[{name:"st_all"}]},{params:{yads_ad_ds:"84112_185264"},group:[{name:"st_geinou"}]},{params:{yads_ad_ds:"98330_185265"},group:[{name:"st_sports"}]},{params:{yads_ad_ds:"84112_212809"},group:[{name:"st_sklt"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt1"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt2"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt3"}]},{params:{yads_ad_ds:"98330_258967"},group:[{name:"st_follow"}]},{params:{yads_ad_ds:""},group:[{name:"st_buzz"}]},{params:{yads_ad_ds:""},group:[{name:"st_topics"}]},{params:{yads_ad_ds:""},group:[{name:"st_extra"}]},{params:{yads_ad_ds:""},group:[{name:"st_fashion"}]},{params:{yads_ad_ds:""},group:[{name:"st_animal"}]},{params:{yads_ad_ds:""},group:[{name:"st_biz"}]},{params:{yads_ad_ds:""},group:[{name:"st_gourmet"}]},{params:{yads_ad_ds:""},group:[{name:"st_it"}]},{params:{yads_ad_ds:""},group:[{name:"st_beauty"}]},{params:{yads_ad_ds:""},group:[{name:"st_trip"}]},{params:{yads_ad_ds:""},group:[{name:"st_cinema"}]},{params:{yads_ad_ds:""},group:[{name:"st_comics"}]},{params:{yads_ad_ds:""},group:[{name:"st_love"}]},{params:{yads_ad_ds:""},group:[{name:"st_music"}]},{params:{yads_ad_ds:""},group:[{name:"st_car"}]},{params:{yads_ad_ds:""},group:[{name:"st_recipe"}]},{params:{yads_ad_ds:""},group:[{name:"st_game"}]},{params:{yads_ad_ds:""},group:[{name:"st_baseball"}]},{params:{yads_ad_ds:""},group:[{name:"st_soccer"}]},{params:{yads_ad_ds:""},group:[{name:"st_healthcare"}]},{params:{yads_ad_ds:""},group:[{name:"st_anime"}]},{params:{yads_ad_ds:""},group:[{name:"st_local"}]},{params:{yads_ad_ds:""},group:[{name:"st_life"}]},{params:{yads_ad_ds:""},group:[{name:"st_money"}]},{params:{yads_ad_ds:""},group:[{name:"st_drama"}]},{params:{yads_ad_ds:""},group:[{name:"st_childcare"}]},{params:{yads_ad_ds:""},group:[{name:"st_golf"}]},{params:{yads_ad_ds:""},group:[{name:"st_outdoor"}]}],i.conf=i.conf.map((t=>(t.params.yads_request_seq=1,t))),i.dsMap={ios:{st_geinou:"84112_235161",st_sports:"98330_235274",st_sklt:"84112_235275",st_sklt1:"84112_291992",st_sklt2:"84112_291994",st_sklt3:"84112_291995",st_follow:"98330_258749",st_buzz:"104421_270659",st_topics:"86057_271834",st_extra:"67042_276973",st_fashion:"67042_284833",st_animal:"67042_284835",st_biz:"67042_284836",st_gourmet:"67042_284837",st_it:"67042_284838",st_beauty:"67042_284839",st_trip:"67042_284840",st_cinema:"67042_284841",st_comics:"67042_284842",st_love:"67042_284843",st_music:"67042_284844",st_car:"67042_284845",st_recipe:"67042_284846",st_game:"67042_284847",st_baseball:"67042_284848",st_soccer:"67042_284849",st_healthcare:"67042_284850",st_anime:"67042_284851",st_local:"22033_314472",st_life:"67042_557911",st_money:"67042_557925",st_drama:"67042_557926",st_childcare:"67042_585165",st_golf:"67042_677063",st_outdoor:"67042_677065"},android:{st_geinou:"84112_235273",st_sports:"98330_235285",st_sklt:"84112_235283",st_sklt1:"84112_291996",st_sklt2:"84112_291997",st_sklt3:"84112_291998",st_follow:"98330_258750",st_buzz:"38353_270660",st_topics:"16429_271842",st_extra:"67043_276976",st_fashion:"67042_284853",st_animal:"67042_284855",st_biz:"67042_284857",st_gourmet:"67042_284858",st_it:"67042_284859",st_beauty:"67042_284861",st_trip:"67042_284863",st_cinema:"67042_284864",st_comics:"67042_284865",st_love:"67042_284866",st_music:"67042_284867",st_car:"67042_284868",st_recipe:"67042_284869",st_game:"67042_284870",st_baseball:"67042_284872",st_soccer:"67042_284873",st_healthcare:"67042_284875",st_anime:"67042_284876",st_local:"22033_314480",st_life:"67042_557912",st_money:"67042_557928",st_drama:"67042_557930",st_childcare:"67042_585167",st_golf:"67042_677064",st_outdoor:"67042_677066"}},i.multiReqDsMap={ios:{st_all:["60766_543045","60766_543046"]},android:{st_all:["60766_543052","60766_543053"]}};const s="yads-async-target-ad";i.makeAdUniqueId=function(t,e){let i="";window.yads_pv_timestamp&&(i=window.yads_pv_timestamp);return[s,i,t,String(e+1)].join("-")};const r=0,o=1,a=2;i.renderStaticPositionAd=function(t,e,n,s){i.makeAdHtml(t,"st_stb1",(t=>{const e=document.getElementById(s);if(!t||0===t.length||!e)return;const i=t[0];e.innerHTML=i.htmls;for(const t of i.callbacks)t()}))},i.makeAdHtml=function(t,e,n){let s="";window.yads_pv_timestamp&&(s=window.yads_pv_timestamp),i.makeUltraVariableAdHtml(t,s,e,n)};i.makeUltraVariableAdHtml=function(t,e,n,s){const d=[];let l=-1;const c=function(s,r,o){var a;const c=null===(a=window.YJ_YADS.innerFuncs)||void 0===a?void 0:a.getFunctionObject(t[s].script.callback);if(!c)return!1;t[s].ytop_data_ylk=function(t,i,s){const r={pvts:e,rsec:"ydn-ad",slk:n,pos:t+1,streamid:n,reqid:i,tabName:n,mpos:0};return s?r.mpos=l:delete r.mpos,r}(s,r,o);const u=i.makeAdUniqueId(n,s);let h={};if(c.callbackVersion){const e=c([t[s]],u);(function(t){var e;return null!=t&&(null===(e=null==t?void 0:t.callbacks)||void 0===e?void 0:e.map((t=>"function"==typeof t)))})(e)&&(h={htmls:[e.html],callbacks:e.callbacks.map((e=>()=>{e([t[s]],u)}))})}else h=c([t[s]],null,null,u,{returnHtml:!0});return d.push(h),!0},u=function(e){var i;if(e>=t.length)return void s(d);const n=function(t){switch(t.ad_main_type){case"responsive":return o;case"video":return a;default:return r}}(t[e]),h=String(t[0].yadsAdRequestId);t[e].script=function(t){var e;if("object"!=typeof t||null===t)return{};const i=null===(e=null==t?void 0:t.creative_options)||void 0===e?void 0:e.script;return void 0===i||void 0===(null==i?void 0:i.js_file)||void 0===(null==i?void 0:i.callback)?t.script:i}(t[e]);const f=n===a;if(f&&l++,c(e,h,f))u(e+1);else{const n="https://s.yimg.jp/images/listing/tool/yads/"+t[e].script.js_file;null===(i=window.YJ_YADS.innerFuncs)||void 0===i||i.loadScript(n,(()=>{c(e,h,f),u(e+1)}),!0)}};u(0)}}(window,document,(window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.stream=window.YAHOO.JP.anemos.yads.stream||{},window.YAHOO.JP.anemos.yads.stream));i(271);function T(t,e){if(t)if(e){const i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}else document.write('<script type="text/javascript" src="'+t+'"><\/script>')}!function(t,e,i){var n;if(null===(n=window.YJ_YADS)||void 0===n?void 0:n.loadedStreamLib)return;window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.loadedStreamLib=!0;const s="yads-async-target-",r="yads_stream",o=function(t){for(let e=0,n=i.conf.length;e<n;e++){const n=i.conf[e];if(n.group)for(let e=0,i=n.group.length;e<i;e++)if(n.group[e].name===t)return n}return i.conf[0]},a=function(t){return o(t).requested},d=function(t){const e=o(t);if(!e.group||!e.group.length)return null;for(let i=0,n=e.group.length;i<n;i++)if(e.group[i].name===t)return e.group[i];return null},l=function(t){return"st_all"===t},c=function(t,e,n){var s;if("ios"!==n&&"android"!==n)return null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.yads_ad_ds;if(!l(e))return i.dsMap[n][e];return i.multiReqDsMap[n][e][a(e)?1:0]},u=function(t){const e=s+t.params.yads_ad_ds;if(document.getElementById(e))return;const i=document.createElement("ins");i.id=e,i.className="yads-async-target";const n=document.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.appendChild(i),t.params.yads_parent_element=e},h=function(t,e){for(const e of t.group)if(!l(e.name))return!0;for(const t in i.multiReqDsMap)for(const n in i.multiReqDsMap[t])if(i.multiReqDsMap[t][n][0]===e)return!0;return!1};i.getAdsData=function(t,e,n,s,h,f,p){var m,v;if(!i.conf)return;const g=null!==(m=null!=f?f:window.miffy_yads_bucket_id)&&void 0!==m?m:"",w=null!==(v=null!=p?p:window.miffy_yads_type_tag)&&void 0!==v?v:"",y=d(t);null===y?function(t,e,i){const n=o(t);n.group||(n.group=[]),n.group.push({startPosition:e,interval:i,name:t})}(t,e,n):(y.startPosition=e,y.interval=n);const b=o(t);if(b.isRequestBlocked)window.setTimeout(i.getAdsData,200,t,e,n,s,h);else{if(a(t)){if(i.attachAds(t,b.params.yads_ad_ds,e,n),!l(t)||!function(t){var e,i,n;const s=null===(e=document.getElementsByClassName(r))||void 0===e?void 0:e.length,a=null===(n=null===(i=o(t))||void 0===i?void 0:i.ads)||void 0===n?void 0:n.length;return s&&a&&s>a}(t))return;if(window.yadsRequestAsync)return b.params.yads_ad_ds=c(b,t,h),u(b),b.isRequestBlocked=!0,window.yadsRequestAsync(b.params),void b.params.yads_request_seq++}b.params.yads_ad_ds=c(b,t,h),b.requested=!0,b.params.yads_ad_ds&&(b.params.yads_bucket_id=g,b.params.yads_type_tag=w,b.params.yads_video_autoplay_set=String(s),0!==s&&1!==s||(b.params.yads_video_autoplay_set=String(s)),window.yadsRequestAsync&&(u(b),window.yadsRequestAsync(b.params),b.isRequestBlocked=!0))}},i.poolAds=function(t,e,n,r,o,a,d){let l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;var c,u;if(!t[0])return;t[0].yadsAdRequestId=o;const f=r.replace(s,"");if(!f)return;const p=function(t){for(let e=0,n=i.conf.length;e<n;e++)if(i.conf[e].params&&i.conf[e].params.yads_ad_ds===t)return i.conf[e];return null}(f);if(!p)return;h(p,f)&&(p.firstAdsLength=t.length);const m=function(t,e){if(null===t||"object"!=typeof t)return{};if(null!==e&&"object"==typeof e)return{start_position:e.start_position,interval:e.interval,insert_criteo_rank:e.insert_criteo_rank};if(void 0===(null==t?void 0:t.creative_options))return{start_position:t.start_position,interval:t.interval,insert_criteo_rank:t.insert_criteo_rank};const i=null==t?void 0:t.creative_options;return void 0===(null==i?void 0:i.start_position)||void 0===(null==i?void 0:i.interval)?{start_position:t.start_position,interval:t.interval,insert_criteo_rank:t.insert_criteo_rank}:{start_position:i.start_position,interval:i.interval,insert_criteo_rank:i.insert_criteo_rank}}(t[0],l);p.ads=null!==(c=p.ads)&&void 0!==c?c:[],p.ads=p.ads.concat(t),p.defaultStartIndex=m.start_position,p.defaultInterval=m.interval,p.scriptUrls=null!=a?a:[],p.ydnIndex=null!==(u=p.ydnIndex)&&void 0!==u?u:0;for(let t=0,e=p.group.length;t<e;t++)i.attachAds(p.group[t].name,f);p.isRequestBlocked=!1},i.attachAds=function(t,e,n,s){var a;const l=o(t),c=d(t);c&&0!==(null===(a=l.ads)||void 0===a?void 0:a.length)&&i.makeAdHtml&&i.makeAdHtml(l.ads,t,(i=>{var a,d;const u=null!==(a=null!=n?n:c.startPosition)&&void 0!==a?a:l.defaultStartIndex,f=null!==(d=null!=s?s:c.interval)&&void 0!==d?d:l.defaultInterval;if(0===i.length||!u||!f||!document.getElementById(t))return;const p=document.getElementById(t);!function(t,e,i,n,s){const r=o(s);let a,d=0;for(let s=0,o=t.length;s<o;s++){if(d=parseInt(e,10)-1+parseInt(i,10)*s,a=n[d],!a)continue;if(a.firstElementChild)continue;if(!t[s])continue;const o=t[s];a.innerHTML=o.htmls;for(const t of o.callbacks)t();T(r.scriptUrls[r.ydnIndex],a),r.ydnIndex<r.scriptUrls.length-1?r.ydnIndex++:r.ydnIndex=0}}(i,u,f,p&&p.getElementsByClassName(r),t);try{const i=h(l,e)?0:l.firstAdsLength;window.YJ_UADF.YADSViewable.notifyStreamAttached(e,t,i)}catch(t){return}}))}}(window,document,(window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.stream=window.YAHOO.JP.anemos.yads.stream||{},window.YAHOO.JP.anemos.yads.stream));class R{constructor(t){var e,i,n;this.params=t||{},this.isAdFetched=!1,this.insertReservationIds=[],this.adHtmls=[],this.usedAdNum=0,this.scriptUrls=[],this.ads=[],this.init(),(null===(e=window.YJ_YADS)||void 0===e?void 0:e.timelineChecker)||(window.YJ_YADS.timelineChecker=new Set),null===(n=null===(i=window.YJ_YADS)||void 0===i?void 0:i.timelineChecker)||void 0===n||n.add(t.yads_ad_ds)}init(){if(!this.params.yads_ad_ds)return;window.yadsTimelineManagerList||(window.yadsTimelineManagerList={});const t="yads-timeline-"+this.params.yads_ad_ds+"-"+Math.floor(1e7*Math.random());this.uniqueId=t,window.yadsTimelineManagerList[t]=this,this.fetch()}fetch(){if(!window.yadsRequestAsync)return;const t=document.createElement("ins");t.id=this.uniqueId,(document.head||document.body).appendChild(t),this.params.yads_parent_element=this.uniqueId;const e=String(this.params.yads_video_autoplay_set);window.yadsRequestAsync(Object.assign(Object.assign({},this.params),{yads_video_autoplay_set:e}))}hasMoreAds(){return this.adHtmls.length>0}insertAd(t){if(t){if(!document.getElementById(t))return-1;this.insertReservationIds.push(t)}if(!this.isAdFetched)return 0;if(0===this.adHtmls.length)return 0;for(;this.adHtmls.length>0&&this.insertReservationIds.length>0;){const t=this.insertReservationIds.shift()||"",e=document.getElementById(t);if(!e)continue;const i=this.adHtmls.shift(),n=this.ads.shift();if(i){e.innerHTML=i.htmls;for(const e of i.callbacks)e([n],t);this.usedAdNum+=1,this.notifyForVImps(e,this.usedAdNum)}const s=this.scriptUrls.shift();this.insertScriptTag(s,e)}return 1}insertScriptTag(t,e){if(t)if(e){const i=document.createElement("script");i.type="text/javascript",i.src=t,e.appendChild(i)}else document.write('<script type="text/javascript" src="'+t+'"><\/script>')}notifyForVImps(t,e){var i;const n=null===(i=window.YJ_YADS.innerFuncs)||void 0===i?void 0:i.findViewableTargetElements(t);if(!n||1!==n.length)return;const s=n[0],r=this.uniqueId,o=this.params.yads_ad_ds;window.YJ_UADF.YADSViewable.notifyTimelineAttached(r,o,1,e,s)}}window.YadsTimelineManager=R;const P=t=>{var e;if("object"!=typeof t||null===t)return{};const i=null===(e=null==t?void 0:t.creative_options)||void 0===e?void 0:e.script;return void 0===i||void 0===(null==i?void 0:i.js_file)||void 0===(null==i?void 0:i.callback)?t.script:i},C=(t,e,i,n,s,r)=>{var o;const a=null===(o=window.YJ_YADS.innerFuncs)||void 0===o?void 0:o.getFunctionObject(P(e[i]).callback);if(!a)return!1;const d=s+"-"+i;if(void 0!==t.params.yads_cl_name){const s=[{rank:i+1,requestId:r,yads_cl_name:t.params.yads_cl_name}];n.isVideo&&(s[0].mRank=n.mAdRank),e[i].ytop_data_ylk=L(...s)}let l={};if(a.callbackVersion){const t=a([e[i]],d);(function(t){var e;return null!=t&&(null===(e=null==t?void 0:t.callbacks)||void 0===e?void 0:e.map((t=>"function"==typeof t)))})(t)&&(l={htmls:[t.html],callbacks:t.callbacks.map((t=>(e,i)=>{t(e,i)}))})}else l=a([e[i]],null,null,d,{returnHtml:!0});return t.adHtmls.push(l),t.ads.push(e[i]),!0},D=function(t,e){return"video"===(null==t?void 0:t.ad_main_type)?{isVideo:!0,mAdRank:e+1}:{isVideo:!1,mAdRank:e}},x=(t,e,i,n,s,r,o)=>{var a;if(i>=s)return t.isAdFetched=!0,void t.insertAd.call(t);const d=D(e[i],n.mAdRank);if(C(t,e,i,d,r,o))x(t,e,i+1,d,s,r,o);else{const n="https://s.yimg.jp/images/listing/tool/yads/"+P(e[i]).js_file;null===(a=window.YJ_YADS.innerFuncs)||void 0===a||a.loadScript(n,(()=>{C(t,e,i,d,r,o),x(t,e,i+1,d,s,r,o)}),!0)}};window.yadsTimelinePoolAds=function(t,e,i,n,s,r){if(!window.yadsTimelineManagerList||!window.yadsTimelineManagerList[n])return void console.warn("cannot find yadsTimelineManagerList, check Adframe settings, uniqueId: ".concat(n));const o=window.yadsTimelineManagerList[n];if(o.scriptUrls=r||[],!Array.isArray(t))return;const a=t.length;x(o,t,0,D(void 0,0),a,n,s)};const L=function(t){var e;const{rank:i,requestId:n,yads_cl_name:s,mRank:r}=t,o={pvts:null!==(e=window.yads_pv_timestamp)&&void 0!==e?e:"",rsec:"ydn-ad",slk:s,pos:i,streamid:s,reqid:n,tabName:s};return void 0!==r&&(o.mpos=r),o};class Y{constructor(){this.managers={}}dispatch(t){if(!t.yads_ad_ds)return void console.error("[YJ_YADS] TypeError: yads_ad_ds are required");const e=this.fetchManager(t);t.yads_insert_target&&e.insertAd(t.yads_insert_target)}fetchManager(t){const e=this.managers[t.yads_ad_ds];if(e)return e;const i=new R({yads_ad_ds:t.yads_ad_ds,yads_type_tag:t.yads_type_tag,yads_video_autoplay_set:t.yads_video_autoplay_set,yads_shannon_id:t.yads_shannon_id,yads_cl_name:t.yads_cl_name,yads_bucket_id:t.yads_bucket_id});return this.managers[t.yads_ad_ds]=i,i}}class V{constructor(t){if(this.validateParameter(t),this.managerId="yads-timeline-"+t.yads_ad_ds_list.map((t=>t.ds)).join("-"),this.dsManagers=t.yads_ad_ds_list.map((t=>({ds:t.ds,reqTimes:t.reqTimes,curReq:0}))),this.currentDsIndex=0,this.isFetching=!1,this.registeredInsertIds=[],this.adObjs=[],this.thirdPartyScriptUrls=[],this.usedAdNum=0,!document.getElementById(this.managerId)){const t=document.createElement("ins");t.id=this.managerId,(document.head||document.body).appendChild(t)}const e={yads_ad_ds:"",yads_parent_element:this.managerId,yads_request_seq:1},i=Object.assign({},t);delete i.yads_ad_ds_list,delete i.yads_insert_target,delete i.yads_dispatch_style,this.reqParam=Object.assign(Object.assign({},e),i)}registerInsertId(t){this.registeredInsertIds.push(t)}getManagerId(){return this.managerId}insert(){if(!this.isFetching)for(;this.registeredInsertIds.length>0;){if(0===this.adObjs.length)return this.fetch(),void(this.isFetching=!0);const t=this.registeredInsertIds.shift()||"",e=document.getElementById(t);if(!e)continue;const i=this.adObjs.shift();i&&(e.insertAdjacentHTML("afterbegin",i.adHtml),i.callbacks.forEach((e=>e([i.originalAd],t))),this.usedAdNum++,this.notifyForVimps(e,this.usedAdNum));const n=this.thirdPartyScriptUrls.shift()||"";s.insertScriptTag(n,t)}}fetch(){const t=this.dsManagers[this.currentDsIndex];t&&(this.reqParam.yads_ad_ds=t.ds,t.curReq++,this.reqParam.yads_request_seq=t.curReq,window.YJ_YADS.tasks.push(this.reqParam),t.curReq>=t.reqTimes&&this.currentDsIndex++)}poolAds(t,e){this.thirdPartyScriptUrls=this.thirdPartyScriptUrls.concat(e),this.setAdObjToManagerSync(t,0)}notifyForVimps(t,e){const i=s.findViewableTargetElements(t);1===(null==i?void 0:i.length)&&window.YJ_UADF.YADSViewable.notifyTimelineAttached(this.managerId,this.reqParam.yads_ad_ds||"",1,e,i[0])}getScriptProperty(t){var e;const i=null===(e=null==t?void 0:t.creative_options)||void 0===e?void 0:e.script;return null!=(null==i?void 0:i.js_file)||null!=(null==i?void 0:i.callback)?i:null==t?void 0:t.script}setAdObjToManagerSync(t,e){var i;if(e===t.length)return this.isFetching=!1,void this.insert();if(this.trySetAdObj(t[e],e))this.setAdObjToManagerSync(t,e+1);else{const n=null===(i=this.getScriptProperty(t[e]))||void 0===i?void 0:i.js_file,r="https://s.yimg.jp/images/listing/tool/yads/".concat(n);s.loadScript(r,(()=>{this.trySetAdObj(t[e],e),this.setAdObjToManagerSync(t,e+1)}),!0)}}trySetAdObj(t,e){var i,n;const r=s.getFunctionObject(null===(i=this.getScriptProperty(t))||void 0===i?void 0:i.callback);if(!r)return!1;const o="".concat(this.getManagerId(),"-").concat(this.usedAdNum+e);let a;if(r.callbackVersion){const e=r([t],o);a={adHtml:e.html,originalAd:t,callbacks:null===(n=e.callbacks)||void 0===n?void 0:n.map((t=>(e,i)=>{t(e,i)}))}}else{const e=r([t],null,null,o,{returnHtml:!0});a={adHtml:e.htmls[0],originalAd:t,callbacks:e.callbacks}}return this.adObjs.push(a),!0}validateParameter(t){t.yads_ad_ds_list&&Array.isArray(t.yads_ad_ds_list)||console.error("[YJ_YADS] TypeError: yads_ad_ds_list is required"),t.yads_ad_ds_list.forEach((t=>{t.ds&&"string"==typeof t.ds||console.error("[YJ_YADS] TypeError: yads_ad_ds_list.ds is required"),t.reqTimes&&"number"==typeof t.reqTimes||console.error("[YJ_YADS] TypeError: yads_ad_ds_list.reqTimes is required")})),t.yads_insert_target||console.error("[YJ_YADS] TypeError: yads_insert_target is required")}}class U{constructor(){window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.tasks=window.YJ_YADS.tasks||[],U.yadsTimeline=new Y}static get getInstance(){return this.instance||(this.instance=new U),this.instance}observe(){var t=this;if(!Array.isArray(window.YJ_YADS.tasks))return void console.error("[YJ_YADS] TypeError: Cannot handle this data type: ".concat(window.YJ_YADS.tasks));const e="push";if(Object.getOwnPropertyDescriptor(window.YJ_YADS.tasks,e))return;let i;for(Object.defineProperty(window.YJ_YADS.tasks,e,{value:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach((e=>{t.dispatch(e)})),0}});void 0!==(i=window.YJ_YADS.tasks.shift());)this.dispatch(i)}dispatch(t){var e,i,n;"timeline"===(null==(n=t)?void 0:n.yads_dispatch_style)&&void 0!==(null==n?void 0:n.yads_ad_ds)?U.yadsTimeline.dispatch(t):(t=>"timelineMulti"===(null==t?void 0:t.yads_dispatch_style)&&void 0!==(null==t?void 0:t.yads_ad_ds_list)&&void 0!==(null==t?void 0:t.yads_insert_target))(t)?null===(e=window.YJ_YADS.yadsTimelineMulti)||void 0===e||e.dispatch(new V(t),t.yads_insert_target):(t=>"stream"===(null==t?void 0:t.yads_dispatch_style)&&void 0!==(null==t?void 0:t.yads_group_name)&&void 0!==(null==t?void 0:t.yads_os_name))(t)?(i=t,YAHOO.JP.anemos.yads.stream.getAdsData(i.yads_group_name,1,1,i.yads_video_autoplay_set,i.yads_os_name,i.yads_bucket_id,i.yads_type_tag)):"s2s"===t.yads_dispatch_style?t.renderer():(t=>void 0!==(null==t?void 0:t.yads_ad_ds)&&void 0!==(null==t?void 0:t.yads_parent_element))(t)&&M(t)}}class j{constructor(){this.viewableCallbacks={"view-in":null,"view-out":null},this.isViewedIn=!1,j.isSupported("viewable-callback")&&window.addEventListener("message",this.handleViewableCallbacks.bind(this),!1)}static isSupported(t){if("viewable-callback"===t){let t=!1;try{t=window!==window.top}catch(e){t=!0}return t}return!1}setViewInCallback(t){this.viewableCallbacks["view-in"]=t,this.isViewedIn&&t()}setViewOutCallback(t){this.viewableCallbacks["view-out"]=t,this.isViewedIn||t()}static setViewCallbackElement(t){const e=t.getBoundingClientRect();window.parent.postMessage({cmd:"frameUpdateCallbackElement",top:Math.round(e.top),right:Math.round(e.right),bottom:Math.round(e.bottom),left:Math.round(e.left)},"*")}handleViewableCallbacks(t){let e,i;if(null!==t.data&&"object"==typeof t.data)e=t.data.cmd,i=t.data.eventType;else{if("string"!=typeof t.data)return;{const n=t.data.split(",");e=n[0],i=n[1]}}if("vimpsMessage"!==e&&"viewStateChanged"!==e)return;["view-in","view-out"].includes(i)&&("view-in"===i?(this.isViewedIn=!0,this.viewableCallbacks["view-in"]&&this.viewableCallbacks["view-in"]()):"view-out"===i&&(this.isViewedIn=!1,this.viewableCallbacks["view-out"]&&this.viewableCallbacks["view-out"]()))}}class F{constructor(t){this.hint=t}notifyRendered(){var t,e;const i={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,type:"frame",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit,sspKPIInfo:this.hint.sspKPIInfo};window.yads_vimps_hint=i}static notifyLoaded(){if(this.isTopWindow())return;const t=window.yads_vimps_hint;let e;if(!t)return e=F.extractAdProdSetCodeForNonYDA(),void window.parent.postMessage({cmd:"frameLoaded",vimpsMode:-1,adprodsetCode:e,requestId:"non_ydn"},"*");e=t.adProdSetCode;let i=0;const n=function(){var s;const r=F.buildFrameLoadMessage("frameLoaded",t,null,!0);if(!r)return void(i<10?(i++,window.setTimeout(n,100)):window.parent.postMessage({cmd:"frameLoaded",vimpsMode:-1,adprodsetCode:e,requestId:"non_ydn"},"*"));null===(s=window.parent)||void 0===s||s.postMessage(r,"*"),F.createFirstAdAreaChecker(t);const o=F.createOnScroll(t);window.addEventListener("touchmove",o,!1),window.addEventListener("scroll",o,!1)};n()}static isTopWindow(){return window===window.top}static extractAdProdSetCodeForNonYDA(){const t=window.location.search.match(/[?&]s=([^&]+)/);return t&&2===t.length?t[1]:""}static buildFrameLoadMessage(t,e,i,n){const r=i||s.findViewableTargetElements(document);if(0!==r.length)return{cmd:t,vimpsMode:e.vimpsMode,adprodsetCode:e.adProdSetCode,requestId:e.requestId,adInfoList:r.map(((t,i)=>{var s,r;const o=t.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,viewableInfo:(null===(s=e.viewableInfo)||void 0===s?void 0:s[i])||"",viewableTrackingUrlList:n&&(null===(r=e.viewableTrackingUrlList)||void 0===r?void 0:r[i])||[]}})),measurableUrl:e.measurableUrl,viewableUrl:e.viewableUrl,sspKPIInfo:null==e?void 0:e.sspKPIInfo,isAudit:e.isAudit}}static checkPositionChange(t,e){let i=!1;const n=t.length;for(let s=0;s<n;s++){const n=t[s],r=n.getBoundingClientRect(),o=e[n];o&&o.top==r.top&&o.right==r.right&&o.left==r.left&&o.bottom==r.bottom||(i=!0,e[n]=r)}return i}static createFirstAdAreaChecker(t){const e=s.findViewableTargetElements(document);if("ResizeObserver"in window){const i=new ResizeObserver((()=>{const i=F.buildFrameLoadMessage("frameScrolled",t,e,!1);i&&window.parent.postMessage(i,"*")}));for(const t of e)i.observe(t);i.observe(document.body)}else{const e=100;let i=0;const n=t=>{for(const e of t){const t=e.getBoundingClientRect();if(t.top!==e.dataset.top||t.left!==e.dataset.left||t.width!==e.dataset.width||t.height!==e.dataset.height)return e.dataset.top=t.top,e.dataset.left=t.left,e.dataset.width=t.width,e.dataset.height=t.height,!0}return!1},r=()=>{if(i>=5e3)return;const o=s.findViewableTargetElements(document);if(n(o)){const e=F.buildFrameLoadMessage("frameScrolled",t,o,!1);if(!e)return;window.parent.postMessage(e,"*")}i+=e,setTimeout(r,e)};r()}}static createOnScroll(t){const e={};let i=0;let n;return function r(){n||(n=setInterval(r,500));const o=(new Date).getTime();if(o-i<=100)return;i=o;const a=s.findViewableTargetElements(document),d=F.buildFrameLoadMessage("frameScrolled",t,a,!1);d&&F.checkPositionChange(a,e)&&window.parent.postMessage(d,"*")}}}class N{static dispatch(t){const e=t.replace("rla=SSP_FP_CODE_RLA","rla=").replace("rlb=SSP_FP_CODE_RLB","rlb=");document.write(e)}}class H{constructor(t,e,i){this.config=t,this.currentProductIndex=e,this.firstInside=i,this.product=this.config.products[e]}dispatch(){var t;s.isInnerYadsIframe()?(this.firstInside&&window.parent.postMessage({cmd:"frameStarted",vimpsMode:this.config.measurable,patternCode:this.config.patternCode},"*"),this.sendBounceTrackingProtectionBeacon(),window.addEventListener("load",H.adDone,!1),void 0!==this.product.width&&void 0!==this.product.height&&(null===(t=window.parent)||void 0===t||t.postMessage({cmd:"resizeFrame",width:this.product.width,height:this.product.height},"*")),12!==this.product.adprodType?document.write(this.product.adTag):N.dispatch(this.product.adTag)):this.openYADSIframe()}openYADSIframe(){var t,e;let i=H.appendStartProdNum(this.config.frameTag,this.currentProductIndex);if(null===(e=null===(t=document.featurePolicy)||void 0===t?void 0:t.features)||void 0===e?void 0:e.call(t).includes("conversion-measurement")){const t=(new DOMParser).parseFromString(i,"text/html");t.getElementsByTagName("iframe")[0].allow+=";conversion-measurement",i=t.getElementsByTagName("div")[0].outerHTML}s.insertTag(i,this.config.targetID)}sendBounceTrackingProtectionBeacon(){if(1e-6<=Math.random())return;const t=s.parseQuery(window.location.href).fr_id;document.createElement("img").src="https://yads.yjtag.yahoo.co.jp/b?fr_id=".concat(t)}static replaceDspAdLinkTarget(){const t=document.getElementById("dsp-link-target");if(!t)return;const e=document.getElementsByTagName("a");let i=null;for(let t=0,n=e.length;t<n;t++)if(e[t].href.startsWith("http://ads.yahoo.com/clk?")){i=e[t];break}i&&(i.target=t.getAttribute("data-link-target")||"")}static adDone(){H.replaceDspAdLinkTarget(),F.notifyLoaded()}static appendStartProdNum(t,e){return t.replace("yads-iframe.html?","yads-iframe.html?start_prod_num=".concat(e,"&"))}}class B{constructor(t,e){var i,n;this.config=t,this.targetID=e,null!==(i=(n=this.config).adTag)&&void 0!==i||(n.adTag="")}dispatch(){s.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class q{static dispatch(t){t&&s.executeCallback(t,[{reason:2}])}}class J{constructor(t,e){var i,n;this.config=t,this.targetID=e,null!==(i=(n=this.config).adTag)&&void 0!==i||(n.adTag="")}dispatch(){s.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class W{constructor(t,e){var i,n;this.config=t,this.targetID=e,null!==(i=(n=this.config).adTag)&&void 0!==i||(n.adTag="")}dispatch(){s.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class z{constructor(t,e){this.config=t,this.currentProductIndex=e,this.product=this.config.products[e]||{}}dispatch(t){if(s.isInnerYadsIframe())this.closeYADSIframe();else switch(3===this.product.adprodType&&this.reShowYADSIframe(null==t?void 0:t.displayNoneYadsIFrame),this.product.adprodType){case 3:new J(this.product,this.config.targetID).dispatch();break;case 15:new B(this.product,this.config.targetID).dispatch();break;case 16:new W(this.product,this.config.targetID).dispatch();break;default:q.dispatch(this.config.noAdCallback)}}closeYADSIframe(){var t;null===(t=window.parent)||void 0===t||t.postMessage("passbackFromIframe,".concat(this.config.dsCode,",").concat(this.currentProductIndex),"*")}reShowYADSIframe(t){if(!t)return;const e=document.getElementById(this.config.targetID);if(!e)return;const i=e;i.renderAdHooks||(i.renderAdHooks=[]),t.style.display="";const n=()=>{t.style.display="none"};i.renderAdHooks.push(n),setTimeout(n,3e3)}}class K{constructor(t){var e,i,n,s,r,o,a,d,l,c,u,h,f;this.deliverConfig=t,this.currentProductIndex=0,this.alreadyPassbackFromGAM=!1,null!==(e=(a=this.deliverConfig).dsCode)&&void 0!==e||(a.dsCode=""),null!==(i=(d=this.deliverConfig).patternCode)&&void 0!==i||(d.patternCode=""),(l=this.deliverConfig).targetID||(l.targetID="yads_dummy_parent_"+Math.floor(999999999*Math.random())),null!==(n=(c=this.deliverConfig).noAdCallback)&&void 0!==n||(c.noAdCallback=""),null!==(s=(u=this.deliverConfig).measurable)&&void 0!==s||(u.measurable=0),"string"==typeof this.deliverConfig.measurable&&(this.deliverConfig.measurable=parseInt(this.deliverConfig.measurable,10)),null!==(r=(h=this.deliverConfig).frameTag)&&void 0!==r||(h.frameTag=""),null!==(o=(f=this.deliverConfig).products)&&void 0!==o||(f.products=[]),this.deliverConfig.products=this.deliverConfig.products.map((t=>{var e,i;return Object.assign(Object.assign({},t),{adprodsetCode:null!==(e=t.adprodsetCode)&&void 0!==e?e:"",adTag:null!==(i=t.adTag)&&void 0!==i?i:""})})),this.nonIframeYDA=[],this.deliverConfig.products.forEach((t=>{this.isRichAd(t)&&this.nonIframeYDA.push(t.adprodsetCode)})),this.friendlyIframeYDA={},this.deliverConfig.products.forEach((t=>{this.isRichAd(t)&&(this.friendlyIframeYDA[t.adprodsetCode]={width:t.width,height:t.height})}))}dispatch(t){var e,i,n;this.currentProductIndex=this.decideCurrentProductIndex(null==t?void 0:t.startProductIndex);const r=null===(e=this.deliverConfig.products)||void 0===e?void 0:e[this.currentProductIndex];this.removeAllChildNodesExceptIframe(this.deliverConfig.targetID);const o=document.getElementById(this.deliverConfig.targetID);if(this.deliverConfig.targetID&&!o){if((null===(n=null===(i=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===i?void 0:i.asyncFlags)||void 0===n?void 0:n[this.deliverConfig.targetID])&&!s.isInnerYadsIframe())return;document.write('<div id="'.concat(this.deliverConfig.targetID,'"></div>'))}if(this.isInsideProduct(r)){const e=void 0!==(null==t?void 0:t.startProductIndex);new H(this.deliverConfig,this.currentProductIndex,e).dispatch()}else new z(this.deliverConfig,this.currentProductIndex).dispatch(t)}decideCurrentProductIndex(t){let e=t||this.currentProductIndex;return s.isInnerYadsIframe()||t!==this.currentProductIndex||e++,e}removeAllChildNodesExceptIframe(t){const e=document.getElementById(t);if(!e)return;const i=Array.prototype.slice.call(e.children);for(const t of i){const i=Array.prototype.slice.call(t.children).map((function(t){return t.nodeName}));"IFRAME"===t.nodeName||i.includes("IFRAME")||"1"===t.getAttribute("data-ydnnoad-container")||e.removeChild(t)}}isRichAd(t){return 3===t.adprodType&&0===t.iframeFlag}isInsideProduct(t){if(!t)return!1;return[3,4,5,6,12].includes(t.adprodType)&&!this.isRichAd(t)}passback(t){if("gam"===(null==t?void 0:t.from)){if(this.alreadyPassbackFromGAM)return;this.alreadyPassbackFromGAM=!0}this.currentProductIndex++,this.dispatch()}getCurrentProduct(){var t,e;return{adprodsetCode:null===(t=this.deliverConfig.products[this.currentProductIndex])||void 0===t?void 0:t.adprodsetCode,adprodType:null===(e=this.deliverConfig.products[this.currentProductIndex])||void 0===e?void 0:e.adprodType}}getNonIframeYDA(){return this.nonIframeYDA}getFriendlyIframeYDA(){return this.friendlyIframeYDA}}i(5035);class ${constructor(t,e,i){var n,s,r,o;this.config=t,this.targetID=e,this.passback=i,null!==(n=(r=this.config).adURL)&&void 0!==n||(r.adURL=""),null!==(s=(o=this.config).position)&&void 0!==s||(o.position="")}dispatch(){var t;const e=document.getElementById(this.targetID),i=null===(t=this.config.position)||void 0===t?void 0:t.split(",").map((t=>t.trim()));for(const t of i){const i=document.createElement("div");i.id=t,null==e||e.appendChild(i)}s.loadScript(this.config.adURL,(()=>{var t,e,n,s;let r;function o(){var t;for(const e of i){const i=document.getElementById(e);null===(t=null==i?void 0:i.parentNode)||void 0===t||t.removeChild(i)}}if(/\/mempf\/sync\//.test(this.config.adURL)?r=null===(e=null===(t=null===YAHOO||void 0===YAHOO?void 0:YAHOO.JP)||void 0===t?void 0:t.mempf)||void 0===e?void 0:e.sync:/\/mempf\/sync2\//.test(this.config.adURL)&&(r=null===(s=null===(n=null===YAHOO||void 0===YAHOO?void 0:YAHOO.JP)||void 0===n?void 0:n.mempf)||void 0===s?void 0:s.sync2),void 0===r)return o(),void this.passback();r.setPassbackFunction((()=>{o(),this.passback()})),r.init(i.join(","))}),!0)}}class G{constructor(t){var e,i;this.config=t,null!==(e=(i=this.config).adURL)&&void 0!==e||(i.adURL="")}dispatch(){s.loadScript(this.config.adURL,null,!0)}}class Q{constructor(t){var e,i,n,s,r,o;this.deliverConfig=t,this.currentProductIndex=0,null!==(e=(s=this.deliverConfig).products)&&void 0!==e||(s.products=[]),null!==(i=(r=this.deliverConfig).targetID)&&void 0!==i||(r.targetID=""),null!==(n=(o=this.deliverConfig).noAdCallback)&&void 0!==n||(o.noAdCallback="")}dispatch(){var t;const e=null===(t=this.deliverConfig.products)||void 0===t?void 0:t[this.currentProductIndex],i=null==e?void 0:e.adprodType;if(3===(null==(n=e)?void 0:n.adprodType)&&void 0!==(null==n?void 0:n.adURL))new G(e).dispatch();else{if(!(t=>16===(null==t?void 0:t.adprodType)&&void 0!==(null==t?void 0:t.adURL)&&void 0!==(null==t?void 0:t.position))(e))throw new A("".concat(i));new $(e,this.deliverConfig.targetID,(()=>this.passback())).dispatch()}var n}passback(){this.currentProductIndex++,this.currentProductIndex>=this.deliverConfig.products.length?this.deliverConfig.noAdCallback&&s.executeCallback(this.deliverConfig.noAdCallback,[{reason:2}]):this.dispatch()}}class X{static dispatch(t,e){var i,n;const r=!!(null===(n=null===(i=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===i?void 0:i.asyncFlags)||void 0===n?void 0:n[e]),o=!!document.getElementById(e)||r&&!s.isInnerYadsIframe();s.loadScript(t,null,o)}}class Z{constructor(t){this.deliverConfig=t}dispatch(){var t;const e=(null===(t=this.deliverConfig.products)||void 0===t?void 0:t[0].adURL)||"",i=this.deliverConfig.targetID||"";X.dispatch(e,i)}}class tt{constructor(t){var e;"js_single"===(null==(e=t)?void 0:e.outputType)&&void 0!==(null==e?void 0:e.products)?this.deliverProduct=new Z(t):(t=>"js_responsive"===(null==t?void 0:t.outputType)&&void 0!==(null==t?void 0:t.products))(t)?this.deliverProduct=new Q(t):(t=>"js_frame"===(null==t?void 0:t.outputType)&&["string","number","undefined"].some((e=>typeof(null==t?void 0:t.measurable)===e))&&void 0!==(null==t?void 0:t.frameTag)&&void 0!==(null==t?void 0:t.products))(t)&&(this.deliverProduct=new K(t),s.isInnerYadsIframe()&&(window.gCRITEO={passback:()=>this.passback()}))}dispatch(t){this.deliverProduct.dispatch(t)}passback(t){var e,i;null===(i=(e=this.deliverProduct).passback)||void 0===i||i.call(e,t)}getNonIframeYDA(){var t,e;return null===(e=(t=this.deliverProduct).getNonIframeYDA)||void 0===e?void 0:e.call(t)}getFriendlyIframeYDA(){var t,e;return null===(e=(t=this.deliverProduct).getFriendlyIframeYDA)||void 0===e?void 0:e.call(t)}}class et{constructor(t,e){this.window=t,this.scope=e,e in t||(t[this.scope]={})}store(t,e){this.window[this.scope][t]=e}fetch(t){return this.window[this.scope][t]}fetchOnIframe(){if(!s.isInnerYadsIframe())return;const t=[];for(const e in this.window[this.scope])if(Object.prototype.hasOwnProperty.call(this.window[this.scope],e)){const i=this.window[this.scope][e];t.push(i)}return t[0]}}var it=i(5119);function nt(){function t(t){if(!t)return;const e=function(t){var e,i;let n=-1,r="";if(s.isInnerYadsIframe()){const t=new et(window.YJ_YADS,"deliverProduct").fetchOnIframe(),s=null==t?void 0:t.deliverProduct;if(s instanceof K){const t=s.getCurrentProduct();n=null!==(e=null==t?void 0:t.adprodType)&&void 0!==e?e:-1,r=null!==(i=null==t?void 0:t.adprodsetCode)&&void 0!==i?i:""}}const o={tk:"a72060e2-2747-4fff-a64b-84850dcd9e77",r:[]};for(const e of t)"HeavyAdIntervention"==e.body.id&&o.r.push({p:"intervention",d:"heavy_ad",data:{adprodtype:n,adprodsetcode:r,type:e.type,url:e.url,id:e.body.id,message:e.body.message,ext:(()=>{const t=document.querySelectorAll("video"),e=Array.from(t,(t=>t.src));return JSON.stringify(e)})()}});return 0===o.r.length?null:JSON.stringify(o)}(t);e&&navigator.sendBeacon("https://dsb.yahoo.co.jp/api/v1/stream",e)}if(!("ReportingObserver"in window))return;const e=new window.ReportingObserver((e=>{t(e)}),{types:["intervention"],buffered:!0});e.observe(),window.addEventListener("pagehide",(()=>{t(e.takeRecords())}))}function st(t){if(s.isSameOrigin())return!0;let e="";try{e=new URL(t).hostname}catch(t){return(new E).error(t),!1}const i="yahoo.co.jp";return!("i.yimg.jp"!==e&&"s.yimg.jp"!==e&&!e.endsWith(".".concat(i))&&e!==i)}class rt{constructor(t,e){this.timeoutId=0,this.loadedFrame=t,this.origin=e.origin,this.win=e.source,this.listener=()=>{this.throttlingPostMessage()},this.forceStop=!1}postMessageOfPos(){const t=this.loadedFrame.getBoundingClientRect(),e={cmd:"notifyFramePos",vw:window.innerWidth,vh:window.innerHeight,cx:t.left,cy:t.top};this.forceStop||this.win.postMessage(e,this.origin)}throttlingPostMessage(){const t=this.loadedFrame.getBoundingClientRect();if(t.top>window.innerHeight||t.left>window.innerWidth||t.bottom<=0||t.right<=0)return;if(this.timeoutId)return;this.timeoutId=window.setTimeout((()=>{this.timeoutId=0,this.postMessageOfPos()}),62),this.postMessageOfPos()}listen(){this.forceStop=!1,window.addEventListener("scroll",this.listener)}detach(){this.forceStop=!0,window.removeEventListener("scroll",this.listener)}}function ot(t){return null!==t&&"object"==typeof t&&"string"==typeof(null==t?void 0:t.parentId)&&"single_with_parent"===(null==t?void 0:t.type)&&function(t){return null!==t&&"object"==typeof t&&"string"==typeof(null==t?void 0:t.adProdSetCode)&&"string"==typeof(null==t?void 0:t.measurableUrl)&&"string"==typeof(null==t?void 0:t.requestId)&&"string"==typeof(null==t?void 0:t.viewableUrl)&&"number"==typeof(null==t?void 0:t.vimpsMode)&&(void 0===(null==t?void 0:t.viewableInfo)||Array.isArray(null==t?void 0:t.viewableInfo))&&(void 0===(null==t?void 0:t.viewableTrackingUrlList)||Array.isArray(null==t?void 0:t.viewableTrackingUrlList))&&"string"==typeof(null==t?void 0:t.isAudit)&&(void 0===(null==t?void 0:t.sspKPIInfo)||function(t){return null!==t&&"object"==typeof t&&"string"==typeof(null==t?void 0:t.url)&&"string"==typeof(null==t?void 0:t.tk)&&"string"==typeof(null==t?void 0:t.p)&&"string"==typeof(null==t?void 0:t.d)&&"string"==typeof(null==t?void 0:t.ds_code)&&"string"==typeof(null==t?void 0:t.request_id)&&"string"==typeof(null==t?void 0:t.bid_request_id)&&"string"==typeof(null==t?void 0:t.bid_response_id)}(null==t?void 0:t.sspKPIInfo))}(t)}const at=new Map;function dt(t){const e=t.source;if(!st(t.origin))return;let i;const n=document.getElementsByTagName("iframe");for(const t of n)t.contentWindow===e&&(i=t);var s;i&&("string"==typeof t.data?"observeFrame"===t.data?lt(i,t):"stopObserveFrame"===t.data&&ct(i):"object"==typeof t.data&&(null!==(s=t.data)&&"object"==typeof s&&"observeFrame"===(null==s?void 0:s.cmd)?lt(i,t):function(t){return null!==t&&"object"==typeof t&&"stopObserveFrame"===(null==t?void 0:t.cmd)}(t.data)&&ct(i)))}function lt(t,e){const i=new rt(t,e);at.set(t,i),i.postMessageOfPos(),i.listen()}function ct(t){const e=at.get(t);e&&e.detach()}function ut(){window.addEventListener&&window.addEventListener("message",dt)}class ht{constructor(t){var e;this.uadfHint={adProdSetCode:t.adProdSetCode,measurableUrl:t.measurableUrl,parentId:t.parentId||"",requestId:t.requestId,sspKPIInfo:t.sspKPIInfo,type:"single_with_parent",viewableInfo:null===(e=t.viewableInfoList)||void 0===e?void 0:e[0],viewableUrl:t.viewableUrl,vimpsMode:t.vimpsMode,isAudit:t.isAudit}}notifyRendered(){s.isInnerYadsIframe()?window.parent.postMessage("notifyNoADViewable,"+JSON.stringify(this.uadfHint),"*"):ht.notify(this.uadfHint)}static notifyLoaded(t){ht.notify(t.hint)}static notify(t){const e=t.parentId&&document.getElementById(t.parentId);if(!e)return;const i=ht.generateNoAdViewableElem();e.insertAdjacentElement("afterbegin",i),window.YJ_UADF.YADSViewable.notifyRendered(t)}static generateNoAdViewableElem(){const t=document.createElement("div");t.setAttribute("data-ydnnoad-container","1"),t.style.width="100%",t.style.height="0",t.style.position="relative",t.style.zIndex="-9999";const e=document.createElement("div");return e.style.width="100%",e.style.paddingTop="56.25%",e.style.opacity="0",e.setAttribute("data-ydntxt-item","1"),e.setAttribute("data-ydnnoad","1"),t.appendChild(e),t}}class ft{listen(){s.isInnerYadsIframe()||(window.addEventListener("message",(t=>this.handlePassbackFromIframe(t)),!1),window.addEventListener("message",(t=>this.handlePassbackFromGAM(t)),!1)),window.addEventListener("message",(t=>this.onMessageCallback(t)),!1)}handlePassbackFromIframe(t){var e;if(!t.origin)return;let i,n,s;if("string"==typeof t.data){const e=t.data.split(",");if(!e||3!==e.length)return;i=e[0],n=e[1],s=parseInt(e[2],10)}else{if(null===t.data||"object"!=typeof t.data)return;{const e=t.data;i=e.cmd,n=e.dsCode,s=e.currentProd}}if("passbackFromIframe"!==i)return;const r=this.findFrame(t.source);r&&(r.style.display="none");const o=new et(window.YJ_YADS,"deliverProduct").fetch(n);null===(e=null==o?void 0:o.dispatch)||void 0===e||e.call(o,{startProductIndex:s,displayNoneYadsIFrame:r})}handlePassbackFromGAM(t){var e;if(!t.origin)return;if(null==t.data||"object"!=typeof t.data)return;const i=t.data;if("passbackGAM"!==i.cmd)return;const n=new et(window.YJ_YADS,"deliverProduct").fetch(i.dsCode);null===(e=null==n?void 0:n.passback)||void 0===e||e.call(n,{from:"gam"})}onMessageCallback(t){if(!st(t.origin))return;let e;if("string"==typeof t.data)e=this.parseMessage(t.data);else{if(null===t.data||"object"!=typeof t.data)return;e=t.data}var i;null!==(i=e)&&"object"==typeof i&&"resizeFrame"===(null==i?void 0:i.cmd)&&void 0!==(null==i?void 0:i.width)&&void 0!==(null==i?void 0:i.height)?this.resizeFrame(e,t.source):!function(t){return null!==t&&"object"==typeof t&&"notifyNoADViewable"===(null==t?void 0:t.cmd)&&ot(null==t?void 0:t.hint)}(e)?function(t){return null!==t&&"object"==typeof t&&"logReferrer"===(null==t?void 0:t.cmd)&&void 0!==(null==t?void 0:t.requestID)}(e)&&ft.logReferrer(e):ht.notifyLoaded(e)}resizeFrame(t,e){const i=this.findFrame(e);i&&(this.isValidFrameValue(t.width)&&(i.width=t.width),this.isValidFrameValue(t.height)&&(i.height=t.height))}parseMessage(t){const e=t.split(",");switch(e[0]){case"resizeFrame":return{cmd:"resizeFrame",width:e[1],height:e[2]};case"notifyNoADViewable":return{cmd:"notifyNoADViewable",hint:JSON.parse(e.slice(1).join())};default:return{cmd:""}}}findFrame(t){const e=document.getElementsByTagName("IFRAME");for(let i=0,n=e.length;i<n;i++)if(t==e[i].contentWindow)return e[i]}isValidFrameValue(t){return!!t&&("string"==typeof t&&!!t.trim())}static logReferrer(t){if(/^https?:\/\/(.*\.)?yahoo\.co\.jp(:\d+)?.*/.test(window.location.href))return;const e=document.referrer;if(!e)return;const i=new E,n={request_id:t.requestID,referrer:e};i.referrer(n)}}const pt="yads-visibilitychange",mt="in",vt="out",gt="visibilitychange",wt="https://s.yimg.jp",yt={};function bt(t){It(mt,t)}function _t(t){It(vt,t)}function It(t,e){yt[t]&&e&&"function"==typeof e&&yt[t].push(e)}function St(t){if(t.type!==gt)return;const e=document.hidden?vt:mt,i="".concat(pt,",").concat(e),n=document.getElementsByTagName("iframe");for(const t of n)t.contentWindow&&(t.src.startsWith(wt)&&t.name.startsWith("yads")?t.contentWindow.postMessage(i,wt):window===window.top&&""===t.src&&t.contentWindow.postMessage(i,window.location.origin))}function At(t){if("message"!==t.type||!t.data)return;let e,i;if(null!==(n=t.data)&&"object"==typeof n){const n=t.data;e=n.cmd,i=n.visibilityState}else{if("string"!=typeof t.data)return;{const n=t.data.split(",");e=n[0],i=n[1]}}var n;if(e!==pt)return;const s=yt[i];for(const t of s)try{t()}catch(t){}}function Ot(){window!==window.top&&window.addEventListener("message",At,!1)}function Et(t){if(Array.isArray(t)&&0!==t.length)for(const e of t){if(!e)continue;if(!/^https:\/\//.test(e))continue;const t=document.createElement("img");try{t.src=e}catch(t){}}}function kt(t){t&&document.body.insertAdjacentHTML("beforeend",t)}function Mt(t){const e=function(t){if(!t)return"";const e=t.split("-");return 3===e.length?e[0]:""}(t);return new et(window.YJ_YADS,"deliverProduct").fetch(e)}function Tt(t,e){if(!e)return;const i="string"==typeof t?document.getElementById(t):t,n=e.length;for(let t=0;t<n;t++)Rt(i,e[t])}function Rt(t,e){if(!e)return;const i=document.createElement("script");i.type="text/javascript",i.src=e,t?t.appendChild(i):document.body.appendChild(i)}function Pt(){return window===window.top}function Ct(t,e,i,n){s.getFunctionObject(t)?n():e&&s.loadScript("https://s.yimg.jp/images/listing/tool/yads/".concat(e),n,!0)}yt[mt]=[],yt[vt]=[];class Dt{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){return this.renderFIF()}renderFIF(){var t,e,i,n;const s=this.ydaMetaInfo.targetID,r=this.ydaMetaInfo.adprodset_code,o=this.adprodsetCodeToPatternCode(r),a=Mt(r),d={width:(null===(e=null===(t=null==a?void 0:a.getFriendlyIframeYDA)||void 0===t?void 0:t.call(a))||void 0===e?void 0:e[r].width)||"100%",height:(null===(n=null===(i=null==a?void 0:a.getFriendlyIframeYDA)||void 0===i?void 0:i.call(a))||void 0===n?void 0:n[r].height)||"100%"},l='<div style="text-align: center;"><iframe id="'.concat(s,'_ad_frame" name style="border:none;clear:both;margin:auto;overflow:hidden;display:block;" width="').concat(d.width,'" height="').concat(d.height,'" scrolling="no" title="Ad Content" allowtransparency="true" allow="fullscreen; attribution-reporting" allowfullscreen="true" frameborder="0"></iframe></div>'),c=document.createElement("script"),u='<style>body{background-color: transparent; padding: 0px; margin: 0px; text-align: center;}</style><body><script src="https://yads.c.yimg.jp/js/yads-async.js"><\/script><script>yadsRenderAd_v2('.concat(JSON.stringify(this.ydaAds),", ").concat(JSON.stringify(this.ydaMetaInfo),")<\/script><script>window.parent.postMessage({cmd: 'frameStarted', vimpsMode: 1, patternCode: '").concat(o,"'}, '*');window.addEventListener('load',function(){window.gAdController.adDone.apply(window.gAdController);});<\/script></body>").replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\//g,"\\/");c.insertAdjacentHTML("beforeend","!function(){const iframe=document.querySelector('#".concat(s,"_ad_frame');iframe.setAttribute('srcdoc','").concat(u,"')}();"));const h=document.getElementById(s);null==h||h.insertAdjacentHTML("beforeend",l),null==h||h.appendChild(c)}adprodsetCodeToPatternCode(t){if(!t)return"";const e=t.split("-");return 3===e.length?e[0]+"-"+e[1]:""}isHandle(){var t;const e=this.ydaMetaInfo.adprodset_code,i=Mt(e);return!!((null===(t=null==i?void 0:i.getNonIframeYDA)||void 0===t?void 0:t.call(i))||[]).includes(e)&&!this.ydaMetaInfo.richad}}class xt{constructor(t,e){this.hint=t,this.uadfNotifyRendered=e}notifyRendered(){var t,e;const i={adProdSetCode:this.hint.adProdSetCode,docWriteCaller:this.getDocWriteCaller(),measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"doc_write",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(i)}getDocWriteCaller(){const t=document.getElementsByTagName("script");let e=t.length-1;for(;e>=0;){const i=t[e];if(/\/\/yads\.(yjtag\.)?yahoo\.co\.jp\/tag\?/.test(i.src))return i;e--}return null}}class Lt{constructor(t,e){this.hint=t,this.uadfNotifyRendered=e}notifyRendered(){var t,e;const i=["rma-pdv","".concat(this.hint.parentId,"-rma"),"".concat(this.hint.parentId)],n={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,parentIdList:i,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"richad",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(n)}}class Yt{constructor(t,e){this.hint=t,this.uadfNotifyRendered=e}notifyRendered(){var t,e;const i={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,parentId:this.hint.parentId||"",requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"single_with_parent",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(i)}}class Vt{constructor(t,e){this.hint=t,this.uadfNotifyRendered=e}notifyRendered(){var t,e;const i={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"stream",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(i)}}class Ut{constructor(t,e){this.hint=t,this.uadfNotifyRendered=e}notifyRendered(){var t,e;const i={adNum:this.hint.adNum||0,adProdSetCode:this.hint.adProdSetCode,fetchNum:1,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"timeline",uniqueId:this.hint.parentId||"",viewableInfo:null===(t=this.hint.viewableInfoList)||void 0===t?void 0:t[0],viewableTrackingUrlList:null===(e=this.hint.viewableTrackingUrlList)||void 0===e?void 0:e[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(i)}}class jt{constructor(t){var e,i,n,s;switch(this.viewableHint=t,null!==(e=(n=this.viewableHint).viewableUrl)&&void 0!==e||(n.viewableUrl=""),null!==(i=(s=this.viewableHint).measurableUrl)&&void 0!==i||(s.measurableUrl=""),this.uadfNotifyRendered=window.YJ_UADF.YADSViewable.notifyRendered,this.viewableHint.viewableType){case"noAd":this.viewableNotifier=new ht(this.viewableHint);break;case"stream":this.viewableNotifier=new Vt(this.viewableHint,this.uadfNotifyRendered);break;case"timeline":this.viewableNotifier=new Ut(this.viewableHint,this.uadfNotifyRendered);break;case"richAd":this.viewableNotifier=new Lt(this.viewableHint,this.uadfNotifyRendered);break;case"frame":this.viewableNotifier=new F(this.viewableHint);break;default:this.viewableNotifier=this.getViewableNotifier()}}getViewableNotifier(){if("js_single"===this.viewableHint.outputType||"js_responsive"===this.viewableHint.outputType)return this.viewableHint.parentId?new Yt(this.viewableHint,this.uadfNotifyRendered):new xt(this.viewableHint,this.uadfNotifyRendered)}notifyRendered(){var t;null===(t=this.viewableNotifier)||void 0===t||t.notifyRendered()}}class Ft{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){const t=this.insertProvisionalTarget();Ct(this.ydaMetaInfo.callback,this.ydaMetaInfo.js_file_name,this.ydaMetaInfo.output_type,(()=>this.renderAfterLoaded(t)))}renderAfterLoaded(t){"82399_269466"===this.ydaMetaInfo.adprodset_code.split("-")[0]&&s.removeDataYADSJSMinHeightAttribute("ssp_ydn_82399_269466");const e=s.getFunctionObject(this.ydaMetaInfo.callback);s.callUITemplate(e,this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,t||this.ydaMetaInfo.targetID,this.ydaMetaInfo.mixed_params),this.insert3rdScripts(t),Et(this.ydaMetaInfo.imps_url),Et(this.ydaMetaInfo.tracking_url),Et(this.ydaMetaInfo.cookiesync_url),kt(this.ydaMetaInfo.traffic_verify_tag),this.notifyRendered(t)}insertProvisionalTarget(){var t,e;const i=this.ydaMetaInfo.targetID,n=i&&document.getElementById(i),r=!!(null===(e=null===(t=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===t?void 0:t.asyncFlags)||void 0===e?void 0:e[i]);if(n||r&&!s.isInnerYadsIframe())return"";const o=Math.floor(999999999*Math.random()),a="yads_dummy_parent_".concat(o);return"js_single"===this.ydaMetaInfo.output_type?(document.write('<div id="'.concat(a,'"></div>')),a):(document.body.insertAdjacentHTML("beforeend",'<div id="'.concat(a,'"></div>')),a)}insert3rdScripts(t){if(t){let e=document.getElementById(t);return"js_frame"===this.ydaMetaInfo.output_type&&(e=(null==e?void 0:e.parentElement)||null),void Tt(e,this.ydaMetaInfo.thirdPartyScriptUrlList)}if(1===this.ydaMetaInfo.pos_info.length){Tt(this.ydaMetaInfo.pos_info[0].p_elem,this.ydaMetaInfo.pos_info[0].third_party_script_tag_url||[])}}notifyRendered(t){if("js_frame"===this.ydaMetaInfo.output_type){return void new jt({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"frame",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}new jt({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,parentId:this.ydaMetaInfo.targetID||t,positions:this.ydaMetaInfo.positions,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"other",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}isHandle(){return!0}}class Nt{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){var t,e;if(this.ydaMetaInfo.noad_viewable){const e=null===(t=this.ydaMetaInfo.pos_info[0])||void 0===t?void 0:t.p_elem;new jt({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,parentId:e,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"noAd",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}if(this.canPassback()){const t=Mt(this.ydaMetaInfo.adprodset_code);return void(null===(e=null==t?void 0:t.passback)||void 0===e||e.call(t))}const i=this.ydaMetaInfo.noad_callback;"string"==typeof i&&s.executeCallback(i,[{reason:2}])}canPassback(){return"js_frame"===this.ydaMetaInfo.output_type||"js_responsive"===this.ydaMetaInfo.output_type}isHandle(){return this.ydaAds.every((t=>""==t))}}class Ht{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){if(!Pt())throw new Error("RichAdRenderer has been invoked on a iframe");Ct(this.ydaMetaInfo.callback,this.ydaMetaInfo.js_file_name,this.ydaMetaInfo.output_type,(()=>this.renderAfterLoaded()))}renderAfterLoaded(){"82399_269466"===this.ydaMetaInfo.adprodset_code.split("-")[0]&&s.removeDataYADSJSMinHeightAttribute("ssp_ydn_82399_269466");const t=s.getFunctionObject(this.ydaMetaInfo.callback);s.callUITemplate(t,this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.mixed_params),this.insert3rdScripts(this.ydaMetaInfo.targetID,this.ydaMetaInfo.thirdPartyScriptUrlList),Et(this.ydaMetaInfo.imps_url),Et(this.ydaMetaInfo.tracking_url),Et(this.ydaMetaInfo.cookiesync_url),kt(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForRichAd(this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}insert3rdScripts(t,e){let i=0;const n=()=>{var s,r;const o=(null===(s=document.getElementById("rma-pdv"))||void 0===s?void 0:s.querySelector("*[data-rma-imps]"))||(null===(r=document.getElementById(t))||void 0===r?void 0:r.querySelector("*[data-rma-imps]"));if(o||i>=5e3){Tt((null==o?void 0:o.parentElement)||t,e)}else i+=100,setTimeout(n,100)};n()}notifyRenderedForRichAd(t,e,i,n,s,r,o,a,d,l,c){new jt({adProdSetCode:t,measurableUrl:e,outputType:i,parentId:n,requestId:s,sspKPIInfo:r,viewableInfoList:o,viewableTrackingUrlList:a,viewableType:"richAd",viewableUrl:d,vimpsMode:l,isAudit:c}).notifyRendered()}isHandle(){const t="string"==typeof this.ydaMetaInfo.js_file_name&&/^richad\//.test(this.ydaMetaInfo.js_file_name);return!this.ydaMetaInfo.s2s&&(this.ydaMetaInfo.richad||t)||this.ydaMetaInfo.s2s&&Pt()}}class Bt{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){s.getFunctionObject(this.ydaMetaInfo.callback)(this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.thirdPartyScriptUrlList,this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.mixed_params),Et(this.ydaMetaInfo.imps_url),Et(this.ydaMetaInfo.tracking_url),Et(this.ydaMetaInfo.cookiesync_url),kt(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForStream(this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}notifyRenderedForStream(t,e,i,n,s,r,o,a,d,l){new jt({adProdSetCode:t,measurableUrl:e,outputType:i,requestId:n,sspKPIInfo:s,viewableInfoList:r,viewableTrackingUrlList:o,viewableType:"stream",viewableUrl:a,vimpsMode:d,isAudit:l}).notifyRendered()}isHandle(){return"YAHOO.JP.anemos.yads.stream.poolAds"===this.ydaMetaInfo.callback}}class qt{constructor(t,e){this.ydaAds=t,this.ydaMetaInfo=e}render(){s.getFunctionObject(this.ydaMetaInfo.callback)(this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.thirdPartyScriptUrlList,this.ydaMetaInfo.adprodset_code),Et(this.ydaMetaInfo.imps_url),Et(this.ydaMetaInfo.tracking_url),Et(this.ydaMetaInfo.cookiesync_url),kt(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForTimeline(this.ydaAds.length,this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}notifyRenderedForTimeline(t,e,i,n,s,r,o,a,d,l,c,u){new jt({adNum:t,adProdSetCode:e,measurableUrl:i,outputType:n,parentId:s,requestId:r,sspKPIInfo:o,viewableInfoList:a,viewableTrackingUrlList:d,viewableType:"timeline",viewableUrl:l,vimpsMode:c,isAudit:u}).notifyRendered()}isHandle(){return"yadsTimelinePoolAds"===this.ydaMetaInfo.callback||"window.YJ_YADS.yadsTimelineMulti.poolAds"===this.ydaMetaInfo.callback}}class Jt{constructor(t,e){if(!Array.isArray(t)||!e)return;const i=this.initYDAMetaInfo(e);this.callHooks(i.targetID);const n=new Nt(t,i);if(n.isHandle())return void(this.renderer=n);if(!this.validParentElementState(i))return;if(!i.callback||"string"!=typeof i.callback)return;const s=[qt,Bt,Ht,Dt];for(const e of s){const n=new e(t,i);if(n.isHandle())return void(this.renderer=n)}const r=new Ft(t,i);this.renderer=r}initYDAMetaInfo(t){var e,i,n,s,r;"js_pframe"===t.output_type&&(t.output_type="js_frame"),1==(null===(e=t.pos_info)||void 0===e?void 0:e.length)&&(t.pos_info[0].third_party_script_tag_url=this.removeMoatVideoTag(t.pos_info[0].third_party_script_tag_url)),t.imps_url||(t.imps_url=[]),t.cookiesync_url||(t.cookiesync_url=[]),t.viewable_url||(t.viewable_url=""),t.measurable_url||(t.measurable_url=""),t.noad_viewable=!0===t.noad_viewable,t.traffic_verify_tag||(t.traffic_verify_tag=""),t.mixed_params||(t.mixed_params=null),t.is_audit="1"===t.is_audit?"1":"0",t.thirdPartyScriptUrlList=(null===(n=null===(i=t.pos_info)||void 0===i?void 0:i[0])||void 0===n?void 0:n.third_party_script_tag_url)||[],t.positions=[],t.viewableInfoList=[],t.viewableTrackingUrlList=[],Array.isArray(t.pos_info)&&1==t.pos_info.length&&(t.positions.push(t.pos_info[0].p_elem),t.pos_info[0].viewable_info&&(t.viewableInfoList.push(t.pos_info[0].viewable_info),t.viewableTrackingUrlList.push(t.pos_info[0].viewable_tracking_url),t.pos_info[0].ssp_kpi_info&&(t.sspKPIInfo=t.pos_info[0].ssp_kpi_info))),t.positions[0]&&""!=t.positions[0]?t.targetID=t.positions[0]:t.positions=null;const o=t.adprodset_code.split("-")[0];if(null===(r=null===(s=window.YJ_YADS)||void 0===s?void 0:s.timelineChecker)||void 0===r?void 0:r.has(o)){["98330_185265","84112_235161","98330_235274","84112_235275","84112_291992","84112_291994","84112_291995","98330_258749","104421_270659","86057_271834","67042_276973","67042_284833","67042_284835","67042_284836","67042_284837","67042_284838","67042_284839","67042_284840","67042_284841","67042_284842","67042_284843","67042_284844","67042_284845","67042_284846","67042_284847","67042_284848","67042_284849","67042_284850","67042_284851","22033_314472","67042_557911","67042_557925","67042_557926","67042_585165","67042_677063","67042_677065","84112_235273","98330_235285","84112_235283","84112_291996","84112_291997","84112_291998","98330_258750","38353_270660","16429_271842","67043_276976","67042_284853","67042_284855","67042_284857","67042_284858","67042_284859","67042_284861","67042_284863","67042_284864","67042_284865","67042_284866","67042_284867","67042_284868","67042_284869","67042_284870","67042_284872","67042_284873","67042_284875","67042_284876","22033_314480","67042_557912","67042_557928","67042_557930","67042_585167","67042_677064","67042_677066","60766_543045","60766_543046","60766_543052","60766_543053"].includes(o)&&(t.callback="yadsTimelinePoolAds",t.js_file_name="")}return t}removeMoatVideoTag(t){return null==t?void 0:t.filter((t=>!/^https:\/\/z\.moatads\.com\/yahoojapancustomvideo454271145840\/moatvideo\.js/.test(t)))}validParentElementState(t){return"js_single"!==t.output_type&&"js_responsive"!==t.output_type||(!t.targetID||!!document.getElementById(t.targetID))}render(){var t;null===(t=this.renderer)||void 0===t||t.render()}callHooks(t){if(!t)return;const e=document.getElementById(t);if(!e)return;const i=e;if(i.renderAdHooks)for(;i.renderAdHooks.length>0;){const t=i.renderAdHooks.shift();try{t()}catch(t){}}}}class Wt{constructor(){this.managers={},this.poolAds=this.poolAds.bind(this)}dispatch(t,e){var i,n;this.setManager(t);const s=t.getManagerId();null===(i=this.managers[s])||void 0===i||i.registerInsertId(e),null===(n=this.managers[s])||void 0===n||n.insert()}setManager(t){const e=t.getManagerId();this.managers[e]||(this.managers[e]=t)}fetchManager(t){for(const e in this.managers)if(e.includes(t))return this.managers[e]}adprodsetCodeToDsName(t){if(!t)return"";const e=t.split("-");return 3===e.length?e[0]:""}poolAds(t,e,i,n,s,r,o){const a=this.adprodsetCodeToDsName(o),d=this.fetchManager(a);null==d||d.poolAds(t,r)}}class zt{static stringifyMessage(t){return"resizeFrame"===t.cmd?t.cmd+","+t.width+","+t.height:""}static passback(){var t;if(!s.isInnerYadsIframe())return;const e=new et(window.YJ_YADS,"deliverProduct").fetchOnIframe();null===(t=null==e?void 0:e.passback)||void 0===t||t.call(e)}static adDone(){H.adDone()}}function Kt(t,e,i,n,s){var r,o,a=document.createElement("script"),d=[];e={adData:{ids:e,duration:i,url:s},dispatchEvent:function(t){this.sendEvent?(d&&(d.push(t),t=d,d=!1),this.sendEvent(t)):d.push(t)}},i="_moatApi"+Math.floor(1e8*Math.random());try{o=(r=t.ownerDocument).defaultView||r.parentWindow}catch(t){r=document,o=window}return o[i]=e,a.type="text/javascript",t&&t.insertBefore(a,t.childNodes[0]||null),a.src="https://z.moatads.com/"+n+"/moatvideo.js#"+i,e}class $t{bind(){var e;!function(){void 0===window.YJ_YADS&&(window.YJ_YADS={});window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YJ_YADS.XUSE=window.YJ_YADS.XUSE||{},window.YAHOO.JP.anemos.yads.ydn=window.YAHOO.JP.anemos.yads.ydn||{},window.YAHOO.JP.anemos.yads.ydn.position=window.YAHOO.JP.anemos.yads.ydn.position||{},window.YAHOO.JP.anemos.yads.ydn.position.SQB=window.YAHOO.JP.anemos.yads.ydn.position.SQB||{}}(),this.deliverProductRepository=new et(window.YJ_YADS,"deliverProduct"),this.runOnlyOneTimeOnSameContext(),window.gAdController=zt,window.yadsDispatchDeliverProduct=this.yadsDispatchDeliverProduct(),window.yadsRenderAd_v2=this.renderYDAHelper,window.YJ_YADS.XUSE&&(window.YJ_YADS.XUSE.passback=this.passbackFromXUSE),window.YJ_YADS.passback=zt.passback,window.YJ_YADS.adDone=zt.adDone,window.YJ_YADS.addDocumentViewInListener=bt,window.YJ_YADS.addDocumentViewOutListener=_t,Ot(),window.YJ_YADS.visibilitychangeListenFlag||(document.addEventListener(gt,St,!1),window.YJ_YADS.visibilitychangeListenFlag=!0),window.YJ_YADS.innerFuncs=s,window.yadsInnerFuncs=s,window.YJ_YADS.pvTs=window.YJ_YADS.pvTs||Date.now(),window.YJ_YADS.observeFrame||(window.YJ_YADS.observeFrame=t,null===(e=window.YJ_YADS.observeFrame)||void 0===e||e.listen()),window.YJ_YADS.initMoatTracking=window.YJ_YADS.initMoatTracking||Kt,window.YJ_YADS.setViewableOffset=this.setViewableOffset,nt(),window.YJ_YADS.tasks=window.YJ_YADS.tasks||[],window.YJ_YADS.yadsTimelineMulti=window.YJ_YADS.yadsTimelineMulti||new Wt,window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd||(window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd=it.y)}yadsDispatchDeliverProduct(){return t=>{const e=new E;try{const e=new tt(t);this.deliverProductRepository.store(t.dsCode,e),e.dispatch({startProductIndex:window.YJ_YADS.start_prod_num})}catch(t){e.error(new O(t))}}}renderYDAHelper(t,e){const i=new E;try{new Jt(t,e).render(),s.isInnerYadsIframe()?window.parent.postMessage({cmd:"logReferrer",requestID:e.request_id},"*"):ft.logReferrer({cmd:"logReferrer",requestID:e.request_id})}catch(t){i.error(new O(t))}}runOnlyOneTimeOnSameContext(){window.YJ_YADS.onetime||(window.YJ_YADS.onetime=!0,(new ft).listen())}passbackFromXUSE(t){var e;const i=new et(window.YJ_YADS,"deliverProduct").fetch(t);null===(e=null==i?void 0:i.passback)||void 0===e||e.call(i)}setViewableOffset(t){var e;if("object"==typeof t&&null!==t&&(null===(e=window.YJ_UADF)||void 0===e?void 0:e.YADSViewable)){const e=(new Date).getTime();window.YJ_UADF.YADSViewable.notifyViewableOffsetEvent(t,e)}}}class Gt{constructor(t){this.finder=t}find(t,e){const i=e.getElementById(t);return i?this.finder.find(i):[]}}class Qt{find(t){const e=[];return t.querySelectorAll("*[data-rma-viewable]").forEach((t=>e.push(t))),e}}class Xt{find(t){const e=t.querySelectorAll("*[data-ydntxt-item]");return Array.from(e)}}class Zt{find(t){const e=[];return t.querySelectorAll(".yads_stream [data-ydntxt-item]").forEach((t=>e.push(t))),e}}var te,ee;!function(t){t[t.DONE=0]="DONE",t[t.AGAIN=1]="AGAIN",t[t.FAIL=2]="FAIL"}(te||(te={}));class ie{constructor(){this.intervalMillisec=100,this.defaultMaxExecutions=1800,this.commandQueue=[]}push(t,e){if(t.execute()===te.AGAIN){const i=(null==e?void 0:e.maxExecutions)||this.defaultMaxExecutions;this.commandQueue.push({command:t,maxExecutions:i,executionCount:1}),this.timerId||(this.timerId=setInterval((()=>{this.onInterval()}),this.intervalMillisec))}}onInterval(){this.commandQueue=this.commandQueue.filter((t=>{if(t.executionCount==t.maxExecutions)return!1;return(()=>{try{return t.command.execute()}catch(t){return te.FAIL}})()===te.AGAIN&&(t.executionCount++,!0)})),0===this.commandQueue.length&&this.timerId&&(clearInterval(this.timerId),this.timerId=void 0)}}function ne(t,e){const i=[],n=Math.min(t.length,e.length);return t.forEach(((t,s)=>{s<n&&i.push([t,e[s]])})),i}class se{constructor(t,e,i,n){this.commandQueue=t,this.adElementFinder=e,this.targetFactory=i,this.monitor=n}notifyRendered(t){this.commandQueue.push(new re(this.adElementFinder,this.targetFactory,this.monitor,t))}}class re{constructor(t,e,i,n){this.adElementFinder=t,this.targetFactory=e,this.monitor=i,this.hint=n}execute(){var t;const e=null===(t=this.hint.docWriteCaller)||void 0===t?void 0:t.parentElement;if(!e)return te.FAIL;if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return te.FAIL;const i=this.adElementFinder.find(e);if(0===i.length)return te.AGAIN;const n=ne(i,this.hint.viewableInfo);n.forEach(((t,e)=>{let[i,n]=t;const s=(()=>{var t;return this.hint.viewableTrackingUrlList&&null!==(t=this.hint.viewableTrackingUrlList[e])&&void 0!==t?t:[]})(),r=this.targetFactory.createVimpsTarget(i,n,this.hint.viewableUrl,this.hint.isAudit,this.hint.adProdSetCode,{viewableTrackingUrlList:s,sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:e+1});this.monitor.register(i,[r])}));return n.length===this.hint.viewableInfo.length?te.DONE:te.AGAIN}}function oe(t,e){if(!t||!e)return null;const i=t.document.querySelectorAll("iframe");for(const t of i)try{if(t.contentWindow===e)return t;const i=oe(t.contentWindow,e);if(i)return i}catch(t){}return null}function ae(t){return 0!==t}!function(t){t[t.NonMeasurable=0]="NonMeasurable",t[t.Measurable=1]="Measurable"}(ee||(ee={}));class de{constructor(t,e,i,n,s,r){this.mimpsBeaconSender=t,this.singleWithParent=e,this.docWrite=i,this.stream=n,this.timeline=s,this.richad=r}notifyRendered(t){var e,i;if(ae(t.vimpsMode))switch(this.mimpsBeaconSender.sendMeasurableBeacon(t.measurableUrl,null!==(i=t.viewableInfo)&&void 0!==i?i:[],ee.Measurable,t.adProdSetCode),t.type){case"single_with_parent":this.singleWithParent.notifyRendered(t);break;case"doc_write":this.docWrite.notifyRendered(t);break;case"stream":this.stream.notifyRendered(t);break;case"timeline":this.timeline.notifyRendered(t);break;case"richad":this.richad.notifyRendered(t)}else this.mimpsBeaconSender.sendMeasurableBeacon(t.measurableUrl,null!==(e=t.viewableInfo)&&void 0!==e?e:[],ee.NonMeasurable,t.adProdSetCode)}}const le=20,ce=["timer","intersection","setViewableOffset","updateRect","viewin","viewout","viewcontinue","viewable","viewablediff"],ue=["outline","centerpoint","id","timer","target"];class he{constructor(t){this.wrapped=t,this.limit=le,this.events=[]}notifyRendered(t){this.events.push(Object.assign({time:(new Date).getTime()},t)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyRendered(t)}getHistory(){return this.events}}class fe{constructor(t){this.limit=le,this.wrapped=t,this.events=[]}notifyStreamAttached(t,e,i){const n={dsCode:t,parentId:e,startIndex:i,done:!1};this.events.push(Object.assign({time:(new Date).getTime()},n)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyStreamAttached(t,e,i)}getHistory(){return this.events}}class pe{constructor(t){this.limit=le,this.wrapped=t,this.events=[]}notifyTimelineAttached(t,e,i,n,s){const r={uniqId:t,rank:n,adElem:s,done:!1};this.events.push(Object.assign({time:(new Date).getTime()},r)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyTimelineAttached(t,e,i,n,s)}getHistory(){return this.events}}class me{constructor(t){this.reforObject=void 0,"undefined"!=typeof WeakRef?this.reforObject=new WeakRef(t):this.reforObject=t}deref(){return"undefined"!=typeof WeakRef&&this.reforObject instanceof WeakRef?this.reforObject.deref():this.reforObject}}class ve{constructor(t,e,i,n){this.commandQueue=t,this.adElementFinderById=e,this.targetFactory=i,this.monitor=n}notifyRendered(t){t.parentIdList.forEach((e=>{this.commandQueue.push(new ge(this.adElementFinderById,this.targetFactory,this.monitor,e,t))}))}}class ge{constructor(t,e,i,n,s){this.adElementFinderById=t,this.targetFactory=e,this.monitor=i,this.parentId=n,this.hint=s}execute(){if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return te.FAIL;const t=this.adElementFinderById.find(this.parentId,document);if(0===t.length)return te.AGAIN;const e=ne(t,this.hint.viewableInfo);e.forEach(((t,e)=>{let[i,n]=t;const s=this.hint.adProdSetCode,r=(()=>{var t;return this.hint.viewableTrackingUrlList&&null!==(t=this.hint.viewableTrackingUrlList[e])&&void 0!==t?t:[]})(),o=new me(i),a=this.targetFactory.createVimpsTarget(i,n,this.hint.viewableUrl,this.hint.isAudit,s,{viewableTrackingUrlList:r,makeVimpsAdditionalParams:()=>{const t=new URLSearchParams,e=o.deref();if(!e)return t;const i=e.getAttribute("data-rma-mainshrink");i&&t.append("mainshrink",i);const n=e.getAttribute("data-rma-sidehide");return n&&t.append("sidehide",n),t},sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:e+1});this.monitor.register(i,[a])}));return e.length===this.hint.viewableInfo.length?te.DONE:te.AGAIN}}class we{constructor(t,e,i,n){this.commandQueue=t,this.adElementFinderById=e,this.targetFactory=i,this.monitor=n}notifyRendered(t){this.commandQueue.push(new ye(this.adElementFinderById,this.targetFactory,this.monitor,t))}}class ye{constructor(t,e,i,n){this.adElementFinderById=t,this.targetFactory=e,this.monitor=i,this.hint=n}execute(){if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return te.FAIL;const t=this.findAds();if(0===t.length)return te.AGAIN;const e=ne(t,this.hint.viewableInfo);e.forEach(((t,e)=>{let[i,n]=t;const s=(()=>{var t;return this.hint.viewableTrackingUrlList&&null!==(t=this.hint.viewableTrackingUrlList[e])&&void 0!==t?t:[]})(),r=this.targetFactory.createVimpsTarget(i,n,this.hint.viewableUrl,this.hint.isAudit,this.hint.adProdSetCode,{viewableTrackingUrlList:s,sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:e+1});this.monitor.register(i,[r])}));return e.length===this.hint.viewableInfo.length?te.DONE:te.AGAIN}findAds(){return this.adElementFinderById.find(this.hint.parentId,document)}}function be(t){return t.split("-")[0]}class _e{constructor(t,e,i,n){this.document=t,this.adElementFinder=e,this.targetFactory=i,this.monitor=n,this.streamViewableInfoStore=new Map,this.streamAttachedStore=new Map}notifyRendered(t){var e;const i=be(t.adProdSetCode),n=[];t.viewableInfo&&(t.viewableInfo.forEach(((e,i)=>{n.push({adprodsetCode:t.adProdSetCode,requestId:t.requestId,viewableInfo:e,viewableUrl:t.viewableUrl,viewableTrackingUrlList:(()=>{var e;return t.viewableTrackingUrlList&&null!==(e=t.viewableTrackingUrlList[i])&&void 0!==e?e:[]})(),isAudit:t.isAudit,sspKPIInfo:t.sspKPIInfo})})),this.streamViewableInfoStore.has(i)?null===(e=this.streamViewableInfoStore.get(i))||void 0===e||e.push(...n):this.streamViewableInfoStore.set(i,n),this.integrate(i))}notifyStreamAttached(t,e){var i;const n={dsCode:t,parentId:e,startIndex:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,done:!1};this.streamAttachedStore.has(t)?null===(i=this.streamAttachedStore.get(t))||void 0===i||i.push(n):this.streamAttachedStore.set(t,[n]),this.integrate(t)}integrate(t){const e=this.streamAttachedStore.get(t);if(!e)return;const i=this.streamViewableInfoStore.get(t);if(!i)return;e.forEach((t=>{const e=this.document.getElementById(t.parentId);if(!e)return;const n=this.adElementFinder.find(e).slice(t.startIndex);if(0===n.length)return;const s=ne(n,i);this.register(s);const r=s.length;t.done=r===n.length}));const n=e.filter((t=>!t.done));this.streamAttachedStore.set(t,n)}register(t){t.forEach(((t,e)=>{let[i,n]=t;const s=this.targetFactory.createVimpsTarget(i,n.viewableInfo,n.viewableUrl,n.isAudit,n.adprodsetCode,{viewableTrackingUrlList:n.viewableTrackingUrlList,sspKPIInfo:n.sspKPIInfo,rankFrom1:e+1});this.monitor.register(i,[s])}))}}class Ie{constructor(t,e){this.targetFactory=t,this.monitor=e,this.timelineViewableInfoStore=new Map,this.timelineAttachedStore=new Map}notifyRendered(t){var e;const i=t.uniqueId,n=[];Array.from({length:t.adNum}).forEach(((e,i)=>{const s=(()=>{var e;return t.viewableInfo&&null!==(e=t.viewableInfo[i])&&void 0!==e?e:""})(),r=(()=>{var e;return t.viewableTrackingUrlList&&null!==(e=t.viewableTrackingUrlList[i])&&void 0!==e?e:[]})();n.push({adprodsetCode:t.adProdSetCode,requestId:t.requestId,viewableInfo:s,viewableUrl:t.viewableUrl,viewableTrackingUrlList:r,isAudit:t.isAudit,sspKPIInfo:t.sspKPIInfo})})),this.timelineViewableInfoStore.has(i)?null===(e=this.timelineViewableInfoStore.get(i))||void 0===e||e.push(...n):this.timelineViewableInfoStore.set(i,n),this.integrate(i)}notifyTimelineAttached(t,e,i,n,s){var r;const o={uniqId:t,rank:n,adElem:s,done:!1};this.timelineAttachedStore.has(t)?null===(r=this.timelineAttachedStore.get(t))||void 0===r||r.push(o):this.timelineAttachedStore.set(t,[o]),this.integrate(t)}integrate(t){const e=this.timelineAttachedStore.get(t);if(!e)return;const i=this.timelineViewableInfoStore.get(t);if(!i)return;e.forEach((t=>{const e=i[t.rank-1];e&&(this.register(t,e),t.done=!0)}));const n=e.filter((t=>!t.done));this.timelineAttachedStore.set(t,n)}register(t,e){const i=t.adElem,n=this.targetFactory.createVimpsTarget(i,e.viewableInfo,e.viewableUrl,e.isAudit,e.adprodsetCode,{viewableTrackingUrlList:e.viewableTrackingUrlList,sspKPIInfo:e.sspKPIInfo,rankFrom1:t.rank});this.monitor.register(i,[n])}}class Se{constructor(t){this.base=t,this.commandQueue=new ie,this.streamHandler=this.buildStreamHandler(t),this.timelineHandler=this.buildTimelineHandler(t)}buildStreamAttachedHandler(){return new fe(this.streamHandler)}buildTimelineAttachedHandler(){return new pe(this.timelineHandler)}buildRenderedEventHandler(){const t=new Xt;return new he(new de(this.base.mimpsSender,new we(this.commandQueue,new Gt(t),this.base.vimpsTargetFactory,this.base.monitor),new se(this.commandQueue,t,this.base.vimpsTargetFactory,this.base.monitor),this.streamHandler,this.timelineHandler,new ve(this.commandQueue,new Gt(new Qt),this.base.vimpsTargetFactory,this.base.monitor)))}buildStreamHandler(t){return new _e(document,new Zt,t.vimpsTargetFactory,t.monitor)}buildTimelineHandler(t){return new Ie(t.vimpsTargetFactory,t.monitor)}}class Ae{constructor(t){this.monitor=t}notifyViewableOffsetEvent(t,e){this.monitor.setViewableOffset(t,e)}}class Oe{constructor(t){this.wrapped=t,this.limit=le,this.events=[]}notifyViewableOffsetEvent(t,e){this.events.push(Object.assign({time:e},t)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyViewableOffsetEvent(t,e)}getHistory(){return this.events}}class Ee{constructor(t){this.base=t,this.viewableOffsetEventHandler=new Ae(this.base.monitor)}buildViewableOffsetEventHandler(){return new Oe(this.viewableOffsetEventHandler)}}class ke{constructor(t){this.requestInit=t}async sendBeacon(t){try{await fetch(t,this.requestInit)}catch(e){document.createElement("img").src=t}}}class Me{constructor(){}async sendBeacon(t){fetch(t,{mode:"no-cors",priority:"low"}).catch((e=>{document.createElement("img").src=t;(new E).error(new O(e))}))}}class Te{constructor(){const t={priority:"low"};window.isSecureContext&&(t.browsingTopics=!0),this.sender=new ke(t)}async sendBeacon(t){await this.sender.sendBeacon(t)}}class Re{constructor(){const t={priority:"low"};window.isSecureContext&&(t.credentials="include",t.browsingTopics=!0,t.attributionReporting={eventSourceEligible:!0,triggerEligible:!1}),this.sender=new ke(t)}async sendBeacon(t){await this.sender.sendBeacon(t)}}class Pe{constructor(){this.sender=new ke({priority:"low"})}async sendBeacon(t){await this.sender.sendBeacon(t)}}function Ce(){return Math.floor(1e9*Math.random()).toString(32)}class De{constructor(t,e,i){this.beaconNum=0,this.sender=t,this.pvId=e,this.timeSrc=i,this.startTime=i.getTime()}sendMeasurableBeacon(t,e,i,n){if(!t||0===e.length)return;const s=[e[0]];e.slice(1).forEach((t=>{const e=s[s.length-1];(null==e?void 0:e.length)+t.length>8e3?s.push(t):s[s.length-1]+="&"+t})),s.forEach((e=>{e.length>0&&this.send(t,e,i)}))}send(t,e,i){const n=new URLSearchParams;n.append("rs","yads_vb"),n.append("bt","5"),n.append("pv",this.pvId),n.append("rand",Ce()),n.append("seq",(++this.beaconNum).toString()),n.append("et",(this.timeSrc.getTime()-this.startTime).toString()),n.append("vi",e),n.append("measurable",i===ee.Measurable?"1":"0");const s=new URL(t);s.search=n.toString()+"&EOQ",this.sender.sendBeacon(s.toString())}}class xe{constructor(t,e){this.sender=t,this.resendProtector=e}sendMeasurableBeacon(t,e,i,n){const s=e.filter((t=>!this.resendProtector.isSentViewableInfo(t,"measurable")));0!==s.length&&(this.resendProtector.clear(n),this.sender.sendMeasurableBeacon(t,s,i,n),s.forEach((t=>this.resendProtector.recordSending(n,t,"measurable"))))}}const Le="yads_vimps";var Ye;!function(t){t[t.NONE=0]="NONE",t[t.MEASURABLE_SENT_BIT=1]="MEASURABLE_SENT_BIT",t[t.VIEWABLE_SENT_BIT=2]="VIEWABLE_SENT_BIT",t[t.VIEWINTIME_SENT_BIT=4]="VIEWINTIME_SENT_BIT",t[t.VIEWABLEDIFF_SENT_BIT=8]="VIEWABLEDIFF_SENT_BIT"}(Ye||(Ye={}));class Ve{constructor(t){this.store=JSON.parse(t)}static loadFromStorage(t){try{const e=t.getItem(Le)||"{}";return new Ve(e)}catch(t){return new Ve("{}")}}flush(t){try{t.setItem(Le,JSON.stringify(this.store))}catch(t){return}}isSentViewableInfo(t,e){const i=this.shorten(t);for(const t of Object.values(this.store))if(Object.prototype.hasOwnProperty.call(t,i))switch(e){case"measurable":return!!(t[i]&Ye.MEASURABLE_SENT_BIT);case"viewable":return!!(t[i]&Ye.VIEWABLE_SENT_BIT);case"viewintime":return!!(t[i]&Ye.VIEWINTIME_SENT_BIT);case"viewablediff":return!!(t[i]&Ye.VIEWABLEDIFF_SENT_BIT)}return!1}recordSending(t,e,i){this.store[t]||(this.store[t]={});const n=this.shorten(e);switch(i){case"measurable":this.store[t][n]|=Ye.MEASURABLE_SENT_BIT;break;case"viewable":this.store[t][n]|=Ye.VIEWABLE_SENT_BIT;break;case"viewintime":this.store[t][n]|=Ye.VIEWINTIME_SENT_BIT;break;case"viewablediff":this.store[t][n]|=Ye.VIEWABLEDIFF_SENT_BIT}}clear(t){this.store[t]={}}shorten(t){return t.slice(0,64)}}class Ue{getItem(t){return"{}"}setItem(t,e){}}class je{constructor(t){this.storage=t}recordSending(t,e,i){const n=Ve.loadFromStorage(this.storage);n.recordSending(t,e,i),n.flush(this.storage)}isSentViewableInfo(t,e){return Ve.loadFromStorage(this.storage).isSentViewableInfo(t,e)}clear(t){const e=Ve.loadFromStorage(this.storage);e.clear(t),e.flush(this.storage)}}class Fe{constructor(t,e,i){this.beaconNum=0,this.sender=t,this.pvId=e,this.timeSrc=i,this.startTime=i.getTime()}sendViewableBeacon(t,e,i,n,s){if(!t)return;const r=new URLSearchParams;r.append("rs","yads_vb"),r.append("bt","2"),r.append("pv",this.pvId),r.append("rand",Ce()),r.append("seq",(++this.beaconNum).toString()),r.append("et",(this.timeSrc.getTime()-this.startTime).toString()),null==s||s.forEach(((t,e)=>{r.append(e,t)})),r.append("audit",i.toString()),r.append("vi",e);const o=new URL(t);o.search=r.toString(),o.search+="&EOQ",this.sender.sendBeacon(o.toString())}}class Ne{sendViewableDiffBeacon(t,e,i){const n=new E,s=[];for(const t of i.obstructionElems)s.push({tagName:t.tagName,className:t.className,id:t.id});const r={ds_name:i.dsCode,adprodset_code:e,occluded_check_points:i.occludedCheckPoints.join(","),location:location.href,obstruction_elems:JSON.stringify(s)};n.viewablediff(r)}}class He{constructor(t,e){this.sender=t,this.resendProtector=e}sendViewableBeacon(t,e,i,n,s){this.resendProtector.isSentViewableInfo(e,"viewable")||(this.sender.sendViewableBeacon(t,e,i,n,s),this.resendProtector.recordSending(n,e,"viewable"))}}class Be{constructor(t,e){this.sender=t,this.resendProtector=e}sendViewableDiffBeacon(t,e,i){this.resendProtector.isSentViewableInfo(t,"viewablediff")||(this.sender.sendViewableDiffBeacon(t,e,i),this.resendProtector.recordSending(e,t,"viewablediff"))}}class qe{constructor(t){this.sender=t}sendViewInTimeBeacon(t,e,i){if(!i.url)return;const n=new URLSearchParams;n.append("tk",i.tk),n.append("p",i.p),n.append("d",i.d),n.append("ds_code",i.ds_code),n.append("request_id",i.request_id),n.append("bid_request_id",i.bid_request_id),n.append("bid_response_id",i.bid_response_id),n.append("rank",i.rankFrom1.toString()),n.append("viewinms",Math.floor(i.viewInTimeMS).toFixed(0));const s=new URL(i.url);s.search=n.toString(),this.sender.sendBeacon(s.toString())}}class Je{constructor(t,e){this.sender=t,this.resendProtector=e}sendViewInTimeBeacon(t,e,i){this.resendProtector.isSentViewableInfo(t,"viewintime")||(this.sender.sendViewInTimeBeacon(t,e,i),this.resendProtector.recordSending(e,t,"viewintime"))}}i(9853),i(7322);class We{constructor(t){this.registry=void 0,"undefined"!=typeof FinalizationRegistry&&(this.registry=new FinalizationRegistry(t))}register(){var t;return null===(t=this.registry)||void 0===t?void 0:t.register(...arguments)}unregister(){var t;return null===(t=this.registry)||void 0===t?void 0:t.unregister(...arguments)}}class ze{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const e=Array.from(t).map((t=>{let[e,i]=t;return{key:e,value:i,weakRef:new me(e)}}));this.refToWeakObjectMap=new Map(e.map((t=>[t.weakRef,t.value]))),this.weakKeyToRefMap=new WeakMap(e.map((t=>[t.key,t.weakRef]))),this.finalizer=new We((t=>{this.refToWeakObjectMap.has(t)&&this.refToWeakObjectMap.delete(t)}));for(const t of e.values())this.finalizer.register(t.key,t.weakRef)}get(t){const e=this.weakKeyToRefMap.get(t);if(void 0!==e)return this.refToWeakObjectMap.get(e)}has(t){return this.weakKeyToRefMap.has(t)}set(t,e){this.delete(t);const i=new me(t);this.refToWeakObjectMap.set(i,e),this.weakKeyToRefMap.set(t,i),this.finalizer.register(t,i)}delete(t){const e=this.weakKeyToRefMap.get(t);e&&(this.refToWeakObjectMap.delete(e),this.weakKeyToRefMap.delete(t),this.finalizer.unregister(t))}keys(){return Array.from(this.refToWeakObjectMap.keys()).filter((t=>void 0!==t.deref()))}values(){return Array.from(this.refToWeakObjectMap.entries()).filter((t=>{let[e,i]=t;return void 0!==e.deref()})).map((t=>{let[,e]=t;return e}))}entries(){return Array.from(this.refToWeakObjectMap.entries()).filter((t=>{let[e]=t;return void 0!==e.deref()}))}}class Ke{constructor(t,e){this.lowResIntersectionObserver=t,this.highResIntersectionObserver=e,t.addCallback(((t,e)=>this.onInterSectionEvents(t,e))),e.addCallback(((t,e)=>this.onInterSectionEvents(t,e))),this.targets=new ze,this.viewableOffset={top:0,right:0,bottom:0,left:0}}register(t,e){if(0===e.length)return;const i=this.mergeWithCurrentTargets(t,e);this.targets.set(t,i),this.observeByIntersectionObserver(t)}mergeWithCurrentTargets(t,e){const i=this.targets.get(t)||[],n=e.filter((t=>!(null==i?void 0:i.some((e=>t.equals(e))))));return[...i,...n]}observeByIntersectionObserver(t){this.lowResIntersectionObserver.unobserve(t),this.highResIntersectionObserver.unobserve(t);const e=this.targets.get(t);if(!e)return;e.some((t=>t.hasSubRect()))?this.highResIntersectionObserver.observe(t):this.lowResIntersectionObserver.observe(t)}setViewableOffset(t,e){if(!t)return;this.assignViewableOffset(this.viewableOffset,t);const i=this.targets.values();i&&(null==i||i.forEach((t=>{null==t||t.forEach((t=>t.setViewableOffset(this.viewableOffset,e)))})))}updateRect(t,e,i,n){var s;if(0===i.length)return;const r=null===(s=this.targets.get(t))||void 0===s?void 0:s.filter((t=>e(t)));(null==r?void 0:r.length)===i.length&&(null==r||r.forEach(((t,e)=>t.updateRect(i[e],n))),this.observeByIntersectionObserver(t))}onInterSectionEvents(t,e){t.forEach((t=>{const i=this.targets.get(t.target);null==i||i.forEach((i=>i.onInterSectionEvent(t,e)))}))}onResize(t){t.forEach((t=>{const e=t.target;this.observeByIntersectionObserver(e)}))}onTimer(t){for(const e of this.targets.values())for(const i of e)i.onTimer(t)}changeDebugMode(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(const e of this.targets.values())for(const n of i.values())for(const i of e)i.changeDebugMode(t,n)}assignViewableOffset(t,e){return Object.keys(e).forEach((i=>{["top","right","bottom","left"].includes(i)&&(t[i]=e[i])})),t}getViewableOffset(){return this.viewableOffset}dump(t){return Array.from(this.targets.entries()).flatMap((t=>{let[e,i]=t;return i.map((t=>[e,t]))})).filter((e=>{let[,i]=e;return!t||i.getId()===t})).map((t=>{let[e,i]=t;const n=ce.map((t=>i.getHistory(t))).flat().sort(((t,e)=>t.time-e.time));return{elementRef:e,target:i,history:n}})).reduce(((t,e)=>{const i=e.target.getId();return t[i]||(t[i]=[]),t[i].push(e),t}),{})}}class $e{isOccluded(t,e){if(!!t.getAttribute("data-ydnnoad"))return{hitElem:null,isOccluded:!1,reason:["skipped"],occludedCheckPoints:[],obstructionElems:[]};const i=[];for(const n of Ge(t,e)){const e=this.isOccludedAt(t,n.x,n.y);if(!e.isOccluded)return e;i.push(e)}return{isOccluded:!0,reason:i[0].reason,hitElem:i[0].hitElem,occludedCheckPoints:[],obstructionElems:[]}}isOccludedMultipleCheckPoints(t,e){if(!!t.getAttribute("data-ydnnoad"))return{hitElem:null,isOccluded:!1,reason:["skipped"],occludedCheckPoints:[],obstructionElems:[]};const i=[],n=[],s=[];let r=!0;for(const n of Ge(t,e)){const e=this.isOccludedAt(t,n.x,n.y);r=r&&e.isOccluded,e.isOccluded&&i.push(e)}if(!r){let r=0;for(const[o,a]of function(t,e){const i=Qe(t,e),n=i.left+i.width/2,s=i.top+i.height/2,r=new DOMPointReadOnly(Math.floor((i.x+n)/2),Math.floor((i.y+s)/2)),o=new DOMPointReadOnly(Math.floor((i.x+n)/2),Math.floor((i.y+i.height+s)/2)),a=new DOMPointReadOnly(Math.floor((i.x+i.width+n)/2),Math.floor((i.y+s)/2)),d=new DOMPointReadOnly(Math.floor((i.x+i.width+n)/2),Math.floor((i.y+i.height+s)/2));return new Map([["upperLeftPoint",r],["lowerLeftPoint",o],["upperRightPoint",a],["lowerRightPoint",d]])}(t,e)){const e=this.isOccludedAt(t,a.x,a.y);if(e.isOccluded?(n.push(o),null!==e.hitElem&&s.push(e.hitElem),i.push(e)):r++,r>=2)return e}}return{isOccluded:!0,reason:i[0].reason,hitElem:i[0].hitElem,occludedCheckPoints:n,obstructionElems:s}}isOccludedAt(t,e,i){const n=t.ownerDocument.defaultView,s=this.isOccludedAtLocalViewport(n,t,e,i);if(s.isOccluded)return s;const r=this.isOccludedAtAncestorViewports(n,e,i);return r.isOccluded?r:{hitElem:null,isOccluded:!1,reason:[...s.reason,...r.reason],occludedCheckPoints:[],obstructionElems:[]}}isOccludedAtLocalViewport(t,e,i,n){const s=this.getElementFromPointThroughShadowDOM(t.document,i,n);return s?s===e?{isOccluded:!1,reason:["HitAd"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}:this.isDescendantOf(s,e)?{isOccluded:!1,reason:["HitAdComponent"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}:"inline"===t.getComputedStyle(e).getPropertyValue("display")&&this.isDescendantOf(e,s,3)?{isOccluded:!1,reason:["HitAdContainer"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}:{isOccluded:!0,reason:["HitOccluderAtLocalViewport"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}:{hitElem:null,isOccluded:!1,reason:["unknown"],occludedCheckPoints:[],obstructionElems:[]}}isDescendantOf(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t.parentNode;return null!==s&&(s===e||!(0<=i&&n>=i)&&this.isDescendantOf(s,e,i,n+1))}isOccludedAtAncestorViewports(t,e,i){if(t===t.parent)return{hitElem:null,isOccluded:!1,reason:[],occludedCheckPoints:[],obstructionElems:[]};for(;t!==t.parent;){const n=t.frameElement;if(!n)return{hitElem:null,isOccluded:!1,reason:["UnknownByCrossOrigin"],occludedCheckPoints:[],obstructionElems:[]};const s=this.isOccludedAtParentViewport(t.parent,n,e,i);if(s.isOccluded)return s;t=t.parent}return{hitElem:null,isOccluded:!1,reason:["NoOccluder"],occludedCheckPoints:[],obstructionElems:[]}}getElementFromPointThroughShadowDOM(t,e,i){let n=0,s=t.elementFromPoint(e,i);for(;null!==s&&null!==s.shadowRoot&&n<5;)s=s.shadowRoot.elementFromPoint(e,i),n++;return s}isOccludedAtParentViewport(t,e,i,n){const s=e.getBoundingClientRect(),r=this.getElementFromPointThroughShadowDOM(t.document,s.x+i,s.y+n);return e!==r?{isOccluded:!0,reason:["HitOccluderAtParentViewport"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}:{isOccluded:!1,reason:["HitFrameElement"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}}}function Ge(t,e){const i=Qe(t,e);return i.height%2==0?i.width%2==0?[new DOMPointReadOnly(i.left+i.width/2-1,i.top+i.height/2-1),new DOMPointReadOnly(i.left+i.width/2,i.top+i.height/2)]:[new DOMPointReadOnly(i.left+Math.floor(i.width/2),i.top+i.height/2-1),new DOMPointReadOnly(i.left+Math.floor(i.width/2),i.top+i.height/2)]:i.width%2==0?[new DOMPointReadOnly(i.left+i.width/2-1,i.top+Math.floor(i.height/2)),new DOMPointReadOnly(i.left+i.width/2,i.top+Math.floor(i.height/2))]:[new DOMPointReadOnly(i.left+Math.floor(i.width/2),i.top+Math.floor(i.height/2))]}function Qe(t,e){const i=t.getBoundingClientRect();if(!e)return i;const n=(()=>{if(e.x+e.width<=i.width)return e.width;{const t=i.width-e.x;return t>0?t:0}})(),s=(()=>{if(e.y+e.height<=i.height)return e.height;{const t=i.height-e.y;return t>0?t:0}})();return new DOMRectReadOnly(i.x+e.x,i.y+e.y,n,s)}class Xe{constructor(t,e,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.viewableInfo=t,this.adprodsetCode=e,this.sspKPIInfo=i,this.rankFrom1=n,this.viewInTimeBeaconSender=s,this.timeSrc=r,this.debug=o,this.totalViewInTimeMS=0,this.lastViewInTimeMS=-1}initEventListener(t){t.addEventListener("viewin",this),t.addEventListener("viewout",this),document.addEventListener("visibilitychange",(t=>{this.handleVisibilityChange(t)}))}handleEvent(t){"viewin"==t.type?this.handleViewIn():"viewout"==t.type&&this.handleViewOut()}handleViewIn(){this.updateStateOnViewIn()}handleViewOut(){this.updateStateOnViewOut()}handleVisibilityChange(t){this.writeDebug("document.visibilityState=".concat(document.visibilityState)),"visible"!==document.visibilityState&&(this.updateStateOnViewOut(),this.totalViewInTimeMS<=0||this.viewInTimeBeaconSender.sendViewInTimeBeacon(this.viewableInfo,this.adprodsetCode,Object.assign(Object.assign({},this.sspKPIInfo),{rankFrom1:this.rankFrom1,viewInTimeMS:this.totalViewInTimeMS})))}updateStateOnViewIn(){const t=this.timeSrc.getTime();this.writeDebug("updateStateOnViewIn: nowMS=".concat(t)),this.lastViewInTimeMS=t,this.writeDebug("after")}updateStateOnViewOut(){const t=this.timeSrc.getTime();if(this.writeDebug("updateStateOnViewOut: now=".concat(t)),this.lastViewInTimeMS>=0){const e=t-this.lastViewInTimeMS;e>0&&(this.totalViewInTimeMS+=e),this.lastViewInTimeMS=-1,this.writeDebug("deltaMS=".concat(e))}else this.writeDebug("after")}writeDebug(t){if(!this.debug)return;console.debug(t+": "+this.getDebugString())}getDebugString(){return"lastViewInTimeMS=".concat(this.lastViewInTimeMS,", totalViewInTimeMS=").concat(this.totalViewInTimeMS)}}class Ze{constructor(t,e){this.viewInTimeBeaconSender=t,this.timeSrc=e}setupViewInTimeHandler(t,e,i,n){var s;if(!(null==n?void 0:n.sspKPIInfo))return;new Xe(e,i,null==n?void 0:n.sspKPIInfo,null!==(s=null==n?void 0:n.rankFrom1)&&void 0!==s?s:1,this.viewInTimeBeaconSender,this.timeSrc).initEventListener(t)}}class ti{constructor(t,e,i,n,s){this.elementRef=e,this.settings=n,this.subRect=s,this.debugOutlineElements=function(t,e){const i=ai(t);i.dataset.uadf="outline",i.style.position="fixed",i.style.zIndex=oi.toString(),i.style.outlineWidth=e/2+"px";const n=i.cloneNode(),s=i.cloneNode(),r=i.cloneNode();return[i,n,s,r]}(i,n.thickness),t.addEventListener("viewable",(()=>this.viewableFired=!0)),t.addEventListener("viewin",(()=>this.viewIn=!0)),t.addEventListener("viewout",(()=>this.viewIn=!1)),this.enabled=this.viewableFired=this.viewIn=!1}enable(){if(this.enabled)return;this.enabled=!0,this.debugOutlineElements.forEach((t=>{document.body.contains(t)||document.body.appendChild(t)}));const t=()=>{const e=this.elementRef.deref();if(!this.enabled||!e)return;const i=void 0===this.subRect,n=this.settings.forMovie&&i,s=Qe(e,this.subRect);if(0===s.width||0===s.height||n)return[0,1,2,3].forEach((t=>{this.debugOutlineElements[t].style.display="none"})),void(this.enabled=!1);const r=this.settings.offset||0;Object.values({debug_outline_top:{top:s.top-r,left:s.left,width:s.width,height:0},debug_outline_right:{top:s.top,left:s.right+r,width:0,height:s.height},debug_outline_bottom:{top:s.bottom+r,left:s.left,width:s.width,height:0},debug_outline_left:{top:s.top,left:s.left-r,width:0,height:s.height}}).forEach(((t,e)=>{let{top:n,left:s,width:r,height:o}=t;const a=this.debugOutlineElements[e];a.style.top=n+"px",a.style.left=s+"px",a.style.width=r+"px",a.style.height=o+"px",a.style.display="block";const d=ei(this.viewableFired,this.viewIn,this.settings);this.settings.forMovie?i||(a.style.outlineStyle="dotted",a.style.outlineColor=d):(a.style.outlineStyle="solid",a.style.outlineColor=d)})),window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}disable(){this.debugOutlineElements.forEach((t=>t.remove())),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(t){this.subRect=t}}function ei(t,e,i){const n=i.viewableColor;if(n&&t)return n;const s=i.viewinColor,r=i.viewoutColor;if(e){if(s)return s}else if(r)return r;return i.defaultColor}class ii{constructor(t,e,i,n,s){this.elementRef=e,this.settings=n,this.subRect=s,this.debugCenterElement=function(t){const e=ai(t);return e.dataset.uadf="center",e.style.width="5px",e.style.height="5px",e.style.zIndex=oi.toString(),e.style.position="fixed",e}(i),t.addEventListener("viewable",(()=>this.viewableFired=!0)),t.addEventListener("viewin",(()=>this.viewIn=!0)),t.addEventListener("viewout",(()=>this.viewIn=!1)),this.enabled=this.viewableFired=this.viewIn=!1}enable(){if(this.enabled)return;this.enabled=!0,document.body.contains(this.debugCenterElement)||document.body.appendChild(this.debugCenterElement);const t=()=>{const e=this.elementRef.deref();if(!this.enabled||!e)return;const i=void 0===this.subRect,n=this.settings.forMovie&&i,s=Qe(e,this.subRect);if(0===s.width||0===s.height||n)return void(this.debugCenterElement.style.display="none");this.debugCenterElement.style.display="block";const r=Ge(e,this.subRect);this.debugCenterElement.style.backgroundColor=ei(this.viewableFired,this.viewIn,this.settings),this.debugCenterElement.style.top=r[0].y+2+"px",this.debugCenterElement.style.left=r[0].x+2+"px",window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}disable(){this.debugCenterElement.remove(),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(t){this.subRect=t}}class ni{constructor(t,e,i){this.elementRef=t,this.subRect=i,this.debugDSElement=function(t){const e=ai(t);return e.textContent=t,e.dataset.uadfDsLabel=t,e.style.padding="3px",e.style.color="#ffffff",e.style.fontSize="12px",e.style.lineHeight="12px",e.style.backgroundColor="#696969",e.style.position="fixed",e.style.zIndex=oi.toString(),e}(e),this.enabled=!1}enable(){if(this.enabled)return;this.enabled=!0,document.body.contains(this.debugDSElement)||window.document.body.appendChild(this.debugDSElement);const t=()=>{const e=this.elementRef.deref();if(!this.enabled||!e)return;const i=Qe(e,this.subRect);if(0===i.width||0===i.height)return void(this.debugDSElement.style.display="none");const n=this.debugDSElement.getBoundingClientRect();this.debugDSElement.style.display="block",this.debugDSElement.style.top=i.top+"px",this.debugDSElement.style.left=i.left+i.width/2-n.width/2+"px",window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}disable(){this.debugDSElement.remove(),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(t){this.subRect=t}}class si{constructor(t){this.eventTarget=t,this.debugEvents=ce.filter((t=>"timer"!==t&&"viewcontinue"!==t)),this.enabled=!1}enable(){this.enabled||(this.enabled=!0,this.debugEvents.forEach((t=>{this.eventTarget.addEventListener(t,ci)})))}disable(){this.enabled=!1,this.debugEvents.forEach((t=>{this.eventTarget.removeEventListener(t,ci)}))}toggle(){this.enabled?this.disable():this.enable()}updateRect(t){}}class ri{constructor(t){this.eventTarget=t,this.enabled=!1}enable(){this.enabled||(this.enabled=!0,this.eventTarget.addEventListener("timer",ci))}disable(){this.enabled=!1,this.eventTarget.removeEventListener("timer",ci)}toggle(){this.enabled?this.disable():this.enable()}updateRect(t){}}const oi=2147483647;function ai(t){const e=document.createElement("div");return e.dataset.targetId=t,e.style.margin="0px",e.style.padding="0px",e.style.border="0px",e}class di{constructor(t,e,i,n,s){this.eventTarget=t,this.elementRef=e,this.settings=n,this.subRect=s,this.tools={outline:new ti(t,e,i,n,s),centerpoint:new ii(t,e,i,n,s),id:new ni(e,i,s),timer:new ri(t),target:new si(t)},this.historyEventListeners={timer:new li,intersection:new li,setViewableOffset:new li,updateRect:new li,viewin:new li,viewout:new li,viewcontinue:new li,viewable:new li,viewablediff:new li},Object.entries(this.historyEventListeners).forEach((e=>{let[i,n]=e;return t.addEventListener(i,n)}))}getHistory(t){return this.historyEventListeners[t].getHistory()}updateRect(t){this.subRect=t,Object.entries(this.tools).forEach((e=>{let[i,n]=e;n.updateRect(t)}))}changeDebugMode(t,e){var i;if(!(null===(i=this.settings.dropFeatures)||void 0===i?void 0:i.includes(e)))switch(t){case"enable":this.tools[e].enable();break;case"disable":this.tools[e].disable();break;case"toggle":this.tools[e].toggle()}}}class li{get limit(){return this._limit}constructor(){this._limit=le,this.events=[]}handleEvent(t){const e=t.target;this.events.push(Object.assign({type:t.type,time:(new Date).getTime()},e.getDebugInfo())),this.events.length>this.limit&&this.events.shift()}getHistory(){return this.events}}function ci(t){console.info(t)}class ui{constructor(){this.eventListeners={viewin:[],viewout:[],viewcontinue:[],viewable:[],timer:[],intersection:[],setViewableOffset:[],updateRect:[],viewablediff:[]}}dispatchEvent(t){this.eventListeners[t.type].forEach((e=>{"handleEvent"in e?e.handleEvent(t):e(t)}))}addEventListener(t,e){this.eventListeners[t].push(e)}removeEventListener(t,e){this.eventListeners[t]=this.eventListeners[t].filter((t=>t!==e))}}var hi=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(i[n[s]]=t[n[s]])}return i};class fi extends ui{constructor(t,e,i,n,s,r,o){super(),this.elementRef=t,this.id=e,this.viewInDetector=i,this.viewInDetectorMultipleCheckPoints=n,this.viewStateMachine=s,this.ViewStateMachinForCheckViewableDiff=r,this.clonedIntersectionObserverEntryOmitTarget=null,this.subRect=o.subRect,this.userData=o.userData,this.viewStateMachine.setCallback((t=>{"viewable"===t?(this.viewableFired||this.dispatchEvent({type:"viewable",target:this}),this.viewableFired=!0):this.dispatchEvent({type:t,target:this})})),this.viewableFired=!1,this.ViewStateMachinForCheckViewableDiff.setCallback((t=>{this.dispatchEvent({type:t,target:this})})),this.debugHelper=new di(this,t,e,o.debugSettings,o.subRect)}onInterSectionEvent(t,e){const i=function(t){return{time:t.time,rootBounds:t.rootBounds,boundingClientRect:t.boundingClientRect,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,intersectionRatio:t.intersectionRatio,target:t.target}}(t),{target:n}=i,s=hi(i,["target"]);this.clonedIntersectionObserverEntryOmitTarget=s,this.onPolling(e),this.dispatchEvent({type:"intersection",target:this})}updateRect(t,e){this.subRect=t,this.debugHelper.updateRect(t),this.onPolling(e),this.dispatchEvent({type:"updateRect",target:this})}setViewableOffset(t,e){this.viewableOffset=t,this.onPolling(e),this.dispatchEvent({type:"setViewableOffset",target:this})}hasSubRect(){return!!this.subRect}onTimer(t){this.onPolling(t),this.dispatchEvent({type:"timer",target:this})}equals(t){if(!(t instanceof fi))return!1;const e=t;return this.elementRef.deref()===e.elementRef.deref()&&this.id===e.id&&this.subRect===e.subRect}onPolling(t){if(!this.clonedIntersectionObserverEntryOmitTarget)return;const e=this.elementRef.deref(),i=void 0!==e&&this.viewInDetector.isViewIn(e,this.clonedIntersectionObserverEntryOmitTarget,this.viewableOffset,this.subRect),n=void 0!==e&&this.viewInDetectorMultipleCheckPoints.isViewInMultipleCheckPoints(e,this.clonedIntersectionObserverEntryOmitTarget,this.viewableOffset,this.subRect);this.viewStateMachine.advanceState(i,t),this.ViewStateMachinForCheckViewableDiff.advanceState(i,n,t)}getId(){return this.id}changeDebugMode(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];i.forEach((e=>this.debugHelper.changeDebugMode(t,e)))}getHistory(t){return this.debugHelper.getHistory(t)}getDebugInfo(){return{elementRef:this.elementRef,id:this.id,viewInDetector:this.viewInDetector.getDebugInfo(),intersectionObserverEntryOmitTarget:this.clonedIntersectionObserverEntryOmitTarget,subRect:this.subRect,viewableFired:this.viewableFired,userData:this.userData}}}class pi{constructor(){this.VIEWED_TIME_CONDITION=1e3,this.lastViewedStart=-1,this.currentViewedTime=0,this.callback=t=>{},this.state="viewout"}advanceState(t,e){switch(this.state){case"viewin":t?this.handleViewContinue(e):(this.handleViewOut(e),this.state="viewout");break;case"viewout":t&&(this.handleViewIn(e),this.state="viewin")}}setCallback(t){this.callback=t}handleViewIn(t){this.lastViewedStart=t,this.currentViewedTime=0,this.callback("viewin")}handleViewContinue(t){this.callback("viewcontinue"),this.currentViewedTime=t-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewable")}handleViewOut(t){this.currentViewedTime=t-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewable"),this.lastViewedStart=-1,this.currentViewedTime=0,this.callback("viewout")}}class mi{constructor(){this.VIEWED_TIME_CONDITION=1e3,this.lastViewedStart=-1,this.lastViewedStartMultipleCheckPoints=-1,this.currentViewedTime=0,this.currentViewedTimeMultipleCheckPoints=0,this.callback=t=>{},this.state="viewout",this.stateMultipleCheckPoints="viewout",this.diffCheked=!1}advanceState(t,e,i){switch(this.stateMultipleCheckPoints){case"viewin":e?this.handleViewContinueMultipleCheckPoints(i):this.handleViewOutMultipleCheckPoints(i);break;case"viewout":e&&(this.handleViewInMultipleCheckPoints(i),this.stateMultipleCheckPoints="viewin")}switch(this.state){case"viewin":t?this.handleViewContinue(i):(this.handleViewOut(i),this.state="viewout");break;case"viewout":t&&(this.handleViewIn(i),this.state="viewin")}"viewin"!==this.stateMultipleCheckPoints||e||(this.handleAfterViewOutMultipleCheckPoints(),this.stateMultipleCheckPoints="viewout")}setCallback(t){this.callback=t}handleViewIn(t){this.lastViewedStart=t,this.currentViewedTime=0}handleViewInMultipleCheckPoints(t){this.lastViewedStartMultipleCheckPoints=t,this.currentViewedTimeMultipleCheckPoints=0}handleViewContinue(t){this.currentViewedTime=t-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(!this.diffCheked&&this.currentViewedTimeMultipleCheckPoints<this.VIEWED_TIME_CONDITION&&this.callback("viewablediff"),this.diffCheked=!0)}handleViewContinueMultipleCheckPoints(t){this.currentViewedTimeMultipleCheckPoints=t-this.lastViewedStartMultipleCheckPoints}handleViewOut(t){this.currentViewedTime=t-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&(!this.diffCheked&&this.currentViewedTimeMultipleCheckPoints<this.VIEWED_TIME_CONDITION&&this.callback("viewablediff"),this.diffCheked=!0),this.lastViewedStart=-1,this.currentViewedTime=0}handleViewOutMultipleCheckPoints(t){this.currentViewedTimeMultipleCheckPoints=t-this.lastViewedStartMultipleCheckPoints}handleAfterViewOutMultipleCheckPoints(){this.lastViewedStartMultipleCheckPoints=-1,this.currentViewedTimeMultipleCheckPoints=0}}class vi{getDebugInfo(){var t;const e=null===(t=this.lastOcclusionResult)||void 0===t?void 0:t.hitElem;return this.lastOcclusionResult&&(this.lastOcclusionResult.hitElem=null),{lastIsHidden:this.lastIsHidden,lastOcclusionResult:Object.assign(Object.assign({},this.lastOcclusionResult),{hitElem:e})}}constructor(t){this.occlusionChecker=t,this.VIEWED_AREA_CONDITION=.5,this.lastIsHidden=null,this.lastOcclusionResult=null}isViewIn(t,e,i,n){if(!e.intersectionRatio)return!1;if(n){const t=new DOMRectReadOnly(n.x+e.boundingClientRect.x,n.y+e.boundingClientRect.y,n.width,n.height),i=this.calcIntersection(t,e.intersectionRect);if(i.width*i.height/(t.width*t.height)<this.VIEWED_AREA_CONDITION)return!1}else if(this.isInitialViewableOffset(i)){if(e.intersectionRatio<this.VIEWED_AREA_CONDITION)return!1}else{const n=t.getBoundingClientRect(),s=this.calcIntersectionWithViewableOffset(n,e.rootBounds,i);if(s.width*s.height/(n.width*n.height)<this.VIEWED_AREA_CONDITION)return!1}return this.lastIsHidden=this.isHidden(t),!this.lastIsHidden&&(this.lastOcclusionResult=this.occlusionChecker.isOccluded(t,n),!this.lastOcclusionResult.isOccluded)}isHidden(t){return"hidden"===window.getComputedStyle(t).visibility||document.hidden}calcIntersection(t,e){const i=Math.max(t.left,e.left),n=Math.max(t.top,e.top),s=Math.min(t.right,e.right),r=Math.min(t.bottom,e.bottom);return i>=s||n>=r?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(i,n,s-i,r-n)}calcIntersectionWithViewableOffset(t,e,i){var n,s,r,o,a,d;const l=null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0,c=null!==(s=null==e?void 0:e.height)&&void 0!==s?s:0,u=null!==(r=null==i?void 0:i.top)&&void 0!==r?r:0,h=null!==(o=null==i?void 0:i.right)&&void 0!==o?o:0,f=null!==(a=null==i?void 0:i.bottom)&&void 0!==a?a:0,p=null!==(d=null==i?void 0:i.left)&&void 0!==d?d:0,m=Math.max(t.left,p),v=Math.max(t.top,u),g=Math.min(t.right,l-h),w=Math.min(t.bottom,c-f);return m>=g||v>=w?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(m,v,g-m,w-v)}isInitialViewableOffset(t){var e,i,n,s;const r=null!==(e=null==t?void 0:t.top)&&void 0!==e?e:0,o=null!==(i=null==t?void 0:t.right)&&void 0!==i?i:0,a=null!==(n=null==t?void 0:t.bottom)&&void 0!==n?n:0,d=null!==(s=null==t?void 0:t.left)&&void 0!==s?s:0;return 0===r&&0===o&&0===a&&0===d}}class gi{getDebugInfo(){var t;const e=null===(t=this.lastOcclusionResult)||void 0===t?void 0:t.hitElem;return this.lastOcclusionResult&&(this.lastOcclusionResult.hitElem=null),{lastIsHidden:this.lastIsHidden,lastOcclusionResult:Object.assign(Object.assign({},this.lastOcclusionResult),{hitElem:e})}}getLastOccludedCheckPoints(){let t=[];return this.lastOcclusionResult&&(t=this.lastOcclusionResult.occludedCheckPoints),t}getLastObstructionElems(){let t=[];return this.lastOcclusionResult&&(t=this.lastOcclusionResult.obstructionElems),t}constructor(t){this.occlusionChecker=t,this.VIEWED_AREA_CONDITION=.5,this.lastIsHidden=null,this.lastOcclusionResult=null}isViewInMultipleCheckPoints(t,e,i,n){if(!e.intersectionRatio)return!1;if(n){const t=new DOMRectReadOnly(n.x+e.boundingClientRect.x,n.y+e.boundingClientRect.y,n.width,n.height),i=this.calcIntersection(t,e.intersectionRect);if(i.width*i.height/(t.width*t.height)<this.VIEWED_AREA_CONDITION)return!1}else if(this.isInitialViewableOffset(i)){if(e.intersectionRatio<this.VIEWED_AREA_CONDITION)return!1}else{const n=t.getBoundingClientRect(),s=this.calcIntersectionWithViewableOffset(n,e.rootBounds,i);if(s.width*s.height/(n.width*n.height)<this.VIEWED_AREA_CONDITION)return!1}return this.lastIsHidden=this.isHidden(t),!this.lastIsHidden&&(this.lastOcclusionResult=this.occlusionChecker.isOccludedMultipleCheckPoints(t,n),!this.lastOcclusionResult.isOccluded)}isHidden(t){return"hidden"===window.getComputedStyle(t).visibility||document.hidden}calcIntersection(t,e){const i=Math.max(t.left,e.left),n=Math.max(t.top,e.top),s=Math.min(t.right,e.right),r=Math.min(t.bottom,e.bottom);return i>=s||n>=r?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(i,n,s-i,r-n)}calcIntersectionWithViewableOffset(t,e,i){var n,s,r,o,a,d;const l=null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0,c=null!==(s=null==e?void 0:e.height)&&void 0!==s?s:0,u=null!==(r=null==i?void 0:i.top)&&void 0!==r?r:0,h=null!==(o=null==i?void 0:i.right)&&void 0!==o?o:0,f=null!==(a=null==i?void 0:i.bottom)&&void 0!==a?a:0,p=null!==(d=null==i?void 0:i.left)&&void 0!==d?d:0,m=Math.max(t.left,p),v=Math.max(t.top,u),g=Math.min(t.right,l-h),w=Math.min(t.bottom,c-f);return m>=g||v>=w?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(m,v,g-m,w-v)}isInitialViewableOffset(t){var e,i,n,s;const r=null!==(e=null==t?void 0:t.top)&&void 0!==e?e:0,o=null!==(i=null==t?void 0:t.right)&&void 0!==i?i:0,a=null!==(n=null==t?void 0:t.bottom)&&void 0!==n?n:0,d=null!==(s=null==t?void 0:t.left)&&void 0!==s?s:0;return 0===r&&0===o&&0===a&&0===d}}class wi{constructor(t){this.occlusionChecker=t}createViewMessagePushTarget(t,e){const i=new me(t),n=new yi(i,be(e)+"(ViewPushTarget)",new vi(this.occlusionChecker),new gi(this.occlusionChecker),new pi,new mi,{userData:{patternCode:e},debugSettings:{dropFeatures:["id"],thickness:4,offset:3,forMovie:!0,viewinColor:"blue",viewoutColor:"red",defaultColor:"red"}});return n.initViewableViewInViewOutEventListener(),n.changeDebugMode("disable","id"),n}}class yi extends fi{constructor(t,e,i,n,s,r,o){super(t,e,i,n,s,r,o),this.loadedFrameRef=t}initViewableViewInViewOutEventListener(){this.addEventListener("viewin",(()=>this.sendNotification("view-in",this.loadedFrameRef.deref()))),this.addEventListener("viewout",(()=>this.sendNotification("view-out",this.loadedFrameRef.deref()))),this.addEventListener("viewable",(()=>this.sendNotification("viewable",this.loadedFrameRef.deref())))}sendNotification(t,e){const i=null==e?void 0:e.contentWindow;if(!i||!i.postMessage)return;const n={cmd:"viewStateChanged",eventType:t};i.postMessage(n,"*")}equals(t){return!!super.equals(t)&&t instanceof yi}}class bi{constructor(t,e,i,n,s){this.vimpsBeaconSender=t,this.viewableDiffBeaconSender=e,this.viewThroughBeaconSender=i,this.occlusionChecker=n,this.viewInTimeHandlerFactory=s}createVimpsTarget(t,e,i,n,s,r){const o=new me(t),a=new gi(this.occlusionChecker),d=new _i(o,be(s),new vi(this.occlusionChecker),a,new pi,new mi,{subRect:null==r?void 0:r.subRect,userData:{viewableInfo:e,adprodsetCode:s},debugSettings:{thickness:6,viewableColor:"green",defaultColor:"red"}},e,n,s,this.vimpsBeaconSender,this.viewableDiffBeaconSender,this.viewThroughBeaconSender);return d.initViewableEventListener(e,i,a,r),this.viewInTimeHandlerFactory&&this.viewInTimeHandlerFactory.setupViewInTimeHandler(d,e,s,r),d}}class _i extends fi{constructor(t,e,i,n,s,r,o,a,d,l,c,u,h){super(t,e,i,n,s,r,o),this.viewableInfo=a,this.audit=d,this.adprodsetCode=l,this.vimpsBeaconSender=c,this.viewableDiffBeaconSender=u,this.viewThroughBeaconSender=h}initViewableEventListener(t,e,i,n){this.addEventListener("viewable",(()=>{const i=(null==n?void 0:n.makeVimpsAdditionalParams)?n.makeVimpsAdditionalParams():new URLSearchParams;this.vimpsBeaconSender.sendViewableBeacon(e,t,this.audit,this.adprodsetCode,i),this.sendViewThroughConversionBeacon(null==n?void 0:n.viewableTrackingUrlList)})),this.addEventListener("viewablediff",(()=>{this.viewableDiffBeaconSender.sendViewableDiffBeacon(t,this.adprodsetCode,{dsCode:be(this.adprodsetCode),occludedCheckPoints:i.getLastOccludedCheckPoints(),obstructionElems:i.getLastObstructionElems()})}))}sendViewThroughConversionBeacon(t){null==t||t.forEach((t=>{this.viewThroughBeaconSender.sendBeacon(t)}))}equals(t){if(!super.equals(t))return!1;if(!(t instanceof _i))return!1;const e=t;return this.viewableInfo===e.viewableInfo&&this.adprodsetCode===e.adprodsetCode}}i(9403);class Ii{constructor(t){this.callbacks=[],this.observer=new IntersectionObserver((t=>{this.callbacks.forEach((e=>e(t,(new Date).getTime())))}),t)}observe(t){this.observer.observe(t)}unobserve(t){this.observer.unobserve(t)}addCallback(t){this.callbacks.push(t)}}class Si{constructor(){const t=Ce();this.timeSrc={getTime:()=>(new Date).getTime()},this.monitor=this.buildMonitor();const e=this.buildResendProtector();this.mimpsSender=this.buildMimpsSender(t,this.timeSrc,e),this.vimpsSender=this.buildVimpsSender(t,this.timeSrc,e);const i=new Ne;this.viewableDiffSender=new Be(i,e);const n=this.buildViewInTimeSender(e),s=new Ze(n,this.timeSrc);[this.vimpsTargetFactory,this.viewMessagePushTargetFactory]=this.buildFactory(this.vimpsSender,this.viewableDiffSender,s)}buildMonitor(){const t=[...new Array(101)].map(((t,e)=>e/100)),e=new Ii({threshold:[.5]}),i=new Ii({threshold:t});return new Ke(e,i)}buildResendProtector(){const t=function(){try{return!!(window.sessionStorage&&window.sessionStorage.getItem&&window.sessionStorage.setItem)}catch(t){return!1}}()?window.sessionStorage:new Ue;return new je(t)}buildMimpsSender(t,e,i){return new xe(new De(new Te,t,e),i)}buildVimpsSender(t,e,i){const n=new Fe(new Re,t,e);return new He(n,i)}buildViewInTimeSender(t){const e=new qe(new Pe);return new Je(e,t)}buildFactory(t,e,i){const n=new Me,s=new $e;return[new bi(t,e,n,s,i),new wi(s)]}}function Ai(t){return t.split("|").map((t=>function(t){const e=t.split("/");if(e.length<4||e.length>6)return null;const i=Ei(t);if(!i)return null;const n=e[4]&&0!==e[4].length?e[4]:null;if(!n)return null;const s=e[5]?function(t){try{return JSON.parse(decodeURIComponent(t))}catch(t){return[]}}(e[5]):[];return{top:i.top,right:i.right,bottom:i.bottom,left:i.left,viewableInfo:n,viewableTrackingUrlList:s}}(t))).filter((t=>!!t))}function Oi(t){if("string"==typeof t)try{const e=JSON.parse(decodeURIComponent(t));return function(t){if("object"==typeof t&&null!==t){const e=t;return"string"==typeof e.url&&"string"==typeof e.tk&&"string"==typeof e.p&&"string"==typeof e.d&&"string"==typeof e.ds_code&&"string"==typeof e.request_id&&"string"==typeof e.bid_request_id&&"string"==typeof e.bid_response_id}return!1}(e)?e:void 0}catch(t){return}}function Ei(t){const e=t.split("/");if(e.length<4)return null;const i=parseInt(e[0],10),n=parseInt(e[1],10),s=parseInt(e[2],10),r=parseInt(e[3],10);return isNaN(i)||isNaN(n)||isNaN(s)||isNaN(r)?null:{top:i,right:n,bottom:s,left:r}}class ki{constructor(t,e){this.eventHandlers=t,this.timeSrc=e}handleEvent(t){const e="string"==typeof t.data?function(t){const e=t.split(",");if(e.length<1)return null;switch(e[0]){case"frameStarted":return e.length<3?null:{cmd:"frameStarted",vimpsMode:parseInt(e[1],10),patternCode:e[2]};case"frameLoaded":case"frameScrolled":{if(e.length<5)return null;const t=Ai(e[4]);if(!t)return null;return{cmd:e[0],vimpsMode:parseInt(e[1],10),adprodsetCode:e[2],requestId:e[3],adInfoList:t,measurableUrl:e[5],viewableUrl:e[6],sspKPIInfo:Oi(e[7]),isAudit:e[8]}}case"frameUpdateCallbackElement":{if(e.length<2)return null;const t=Ei(e[1]);return t?{cmd:"frameUpdateCallbackElement",top:t.top,right:t.right,bottom:t.bottom,left:t.left}:null}default:return null}}(t.data):null!==t.data&&"object"==typeof t.data?t.data:null;if(!e)return;const i=this.eventHandlers[e.cmd];i&&i.handle(e,t,this.timeSrc.getTime())}}function Mi(t,e,i){0===e.length&&(e=ue.flat());const n=e.filter((t=>!ue.includes(t)));if(n.length>0)throw new Error("invalid feature: ".concat(n," is not in [").concat(ue,"]"));i.changeDebugMode(t,...e)}function Ti(t,e,i,n,s,r,o){const a={markAdsForDebug:t=>{Mi("enable",["outline","centerpoint"],e),t&&Mi("enable",["id"],e)},toggleDsDisplayForDebug:()=>{Mi("toggle",["id"],e)},enableDebug(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];Mi("enable",i,e)},disableDebug(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];Mi("disable",i,e)},toggleDebug(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];Mi("toggle",i,e)},dump:t=>({target:e.dump(t),messageEvent:{frameStarted:i.frameStarted.getHistory(),frameLoaded:i.frameLoaded.getHistory(),frameScrolled:i.frameScrolled.getHistory(),frameUpdateCallbackElement:i.frameUpdateCallbackElement.getHistory()},renderedEvent:{notifyRendered:n.getHistory(),notifyStreamAttached:s.getHistory(),notifyTimelineAttached:r.getHistory()},viewableOffsetEvent:{notifyViewableOffsetEvent:o.getHistory()},currentViewableOffset:e.getViewableOffset()})};return Object.assign(Object.assign({},t),a)}class Ri{constructor(t,e,i){this.factory=t,this.monitor=e,this.mimpsBeaconSender=i}handle(t,e,i){if("number"!=typeof t.vimpsMode)return;if(void 0===(n=t).adInfoList||void 0===n.measurableUrl||void 0===n.viewableUrl||void 0===n.isAudit)return;var n;if(!ae(t.vimpsMode)){const e=t.adInfoList.map((t=>t.viewableInfo));return void this.mimpsBeaconSender.sendMeasurableBeacon(t.measurableUrl,e,ee.NonMeasurable,t.adprodsetCode)}if(!e.source)return;const s=oe(window,e.source);if(!s)return;if("non_ydn"===t.requestId)return;const r=t.adInfoList.map(((e,i)=>{const n=e.viewableInfo;if(!n)return null;return this.factory.createVimpsTarget(s,n,t.viewableUrl,t.isAudit,t.adprodsetCode,{subRect:new DOMRectReadOnly(e.left,e.top,e.right-e.left,e.bottom-e.top),viewableTrackingUrlList:e.viewableTrackingUrlList,sspKPIInfo:t.sspKPIInfo,rankFrom1:i+1})}));this.monitor.register(s,r.filter((t=>null!=t)));const o=t.adInfoList.map((t=>t.viewableInfo));this.mimpsBeaconSender.sendMeasurableBeacon(t.measurableUrl,o,ee.Measurable,t.adprodsetCode)}}class Pi{constructor(t){this.monitor=t}handle(t,e,i){if(!e.source)return;if(void 0===t.adInfoList)return;const n=oe(window,e.source);if(!n)return;const s=t.adInfoList.map((t=>new DOMRectReadOnly(t.left,t.top,t.right-t.left,t.bottom-t.top)));this.monitor.updateRect(n,(t=>t instanceof _i),s,i)}}class Ci{constructor(t,e){this.factory=t,this.monitor=e}handle(t,e,i){if("number"!=typeof t.vimpsMode)return;if(!ae(t.vimpsMode))return;const n=oe(window,e.source);if(!n)return;const s=this.factory.createViewMessagePushTarget(n,t.patternCode);this.monitor.register(n,[s])}}class Di{constructor(t){this.monitor=t}handle(t,e,i){if(!e.source)return;const n=oe(window,e.source);if(!n)return;const s=new DOMRectReadOnly(t.left,t.top,t.right-t.left,t.bottom-t.top);this.monitor.updateRect(n,(t=>t instanceof yi),[s],i)}}class xi{constructor(t){this.wrapped=t,this.limit=le,this.events=[]}handle(t,e,i){this.events.push(Object.assign({time:(new Date).getTime()},t)),this.events.length>this.limit&&this.events.shift(),this.wrapped.handle(t,e,i)}getHistory(){return this.events}}!function(){const t=window.YJ_UADF;if(t&&t.YADSViewable&&t.YADSViewable.initialized)return;const e=new Si,i={frameStarted:new xi(new Ci((n=e).viewMessagePushTargetFactory,n.monitor)),frameLoaded:new xi(new Ri(n.vimpsTargetFactory,n.monitor,n.mimpsSender)),frameScrolled:new xi(new Pi(n.monitor)),frameUpdateCallbackElement:new xi(new Di(n.monitor))};var n;window.addEventListener("message",new ki(i,e.timeSrc),!1);const s=new Se(e),r=s.buildStreamAttachedHandler(),o=s.buildTimelineAttachedHandler(),a=s.buildRenderedEventHandler(),d=new Ee(e).buildViewableOffsetEventHandler();setInterval((()=>{const t=new Date;e.monitor.onTimer(t.getTime())}),100);const l={initialized:!0,notifyRendered:a.notifyRendered.bind(a),notifyStreamAttached:r.notifyStreamAttached.bind(r),notifyTimelineAttached:o.notifyTimelineAttached.bind(o),notifyViewableOffsetEvent:d.notifyViewableOffsetEvent.bind(d)};window.YJ_UADF={YADSViewable:Ti(l,e.monitor,i,a,r,o,d)}}(),(new E).debug({fn:"async",version:"1.47.0"}),(new $t).bind(),function(){const t=new j;window.YJ_YADS.isSupported=j.isSupported,window.YJ_YADS.setViewInCallback=t.setViewInCallback.bind(t),window.YJ_YADS.setViewOutCallback=t.setViewOutCallback.bind(t),window.YJ_YADS.setViewCallbackElement=j.setViewCallbackElement}(),window.yadsRequestAsync=M,U.getInstance.observe()})()})();
//# sourceMappingURL=yads-async.js.map</script>
</body>
</html>
