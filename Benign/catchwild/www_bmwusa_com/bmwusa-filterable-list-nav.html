<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmwusa-filterable-list-nav.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{C as l}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js";import{s as a}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js";new l({el:".filterable-list-nav",name:"filterable-list-nav Component",events:{},subscriptions:{"ddealermap.search-view":"clearFilter","dealermap.search-results":"updateList","filterlist.clear-filter":"clearFilter","filter.toggleDisplay":"toggleFilter"},baseStr:"filterable-list-nav",currentFilter:0,beforeInit(){this.isEmbedded=this.element.parentNode.parentNode.parentNode.classList.contains("standalone-dealer-map"),this.dropDownList=this.element.querySelector(`${this.el}__dropdown`),this.updateList=this.updateList.bind(this),this.clearFilter=this.clearFilter.bind(this),this.changeFilter=this.changeFilter.bind(this)},init(){this.dropDownList.addEventListener("click",this.changeFilter)},toggleFilter(i,s=!1){const e=`${this.baseStr}--open`;s?this.element.classList.add(e):this.element.classList.remove(e)},clearFilter(i,s){const e=this.element.querySelector(".active"),t=this.dropDownList.children;t.length>0&&(e.classList.remove("active"),t[0].classList.add("active")),this.currentFilter=0,this.toggleFilter()},updateList(i,s){s.Results;let e=this.generateOption({key:0,val:"All Dealers"});a.map(t=>{e+=this.generateOption({key:t[0],val:t[1]})}),this.dropDownList.innerHTML=e,this.currentFilter<1&&this.dropDownList.children[0].classList.add("active")},changeFilter(i){const s=i.target,e="active";if(s.matches(`button${this.el}__filter-item`)){const t=i.target,r=t.parentNode.querySelector(`.${e}`);t.textContent,r&&r.classList.remove(e),t.classList.add(e),this.currentFilter=t.dataset.key,this.toggleFilter(null,!1),PubSub.publish("filterview.filter",{filterId:t.dataset.key,open:!1})}},generateOption(i){const s=this.currentFilter==i.key?"active":"";return`
        <button
          class="${this.baseStr}__filter-item ${s}"
          data-key="${i.key}">
            <svg>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-active-filter"></use>
            </svg>
            ${i.val}</button>`}});

</script>

</body>
</html>
