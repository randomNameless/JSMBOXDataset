<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReaderReacts.ceba1758.html</title>
</head>
<body>

<script>
import{c as v}from"./index.6a5a335b.js";import{R as r}from"./index.8365acb2.js";import{u as M}from"./useReavar.8d1e1e12.js";import{c as U,o as Le,q as qe,d as re,p as S,r as K,v as X,b as J,t as ee,u as ie,w as se,x as te,y as de,z as ae,A as ne,f as me}from"./reavars.660bacce.js";import{f as D}from"./func_toggle_body_modal_mode.eb14cd83.js";import{S as Fe}from"./SignInForm.3e4cef00.js";import{S as Te}from"./SignUpForm.3b0b0ba0.js";import{F as V}from"./FontIcon_FontAwesome5.0e0cb40f.js";import{j as e}from"./jsx-runtime.7d759e48.js";import{F as C}from"./FontIcon_FontAwesome.5dcf1038.js";import{g as $e}from"./get_marking_folderNodes.2f8fc5d1.js";import{g as B}from"./index.f5993dad.js";import{c as R}from"./client.56225896.js";import{m as fe,v as Ve}from"./store.e7c0cc53.js";import{_ as Be}from"./lodash.e84e4d54.js";import{u as W,R as ye,a as ve}from"./ReactProviders.242c2151.js";import{u as pe}from"./useQuery.a4ed7007.js";import{u as T}from"./useMutation.bcca56b6.js";import{g as oe}from"./global_site_metas.638da88e.js";import{c as ke}from"./content_comic_genres.23019868.js";import{g as Y,L as Z}from"./LangFlag.dc463e30.js";import{G as we}from"./GenreItemText.268a3cfa.js";import{f as Se,a as Re}from"./func_theme_updateDOM.b14f919f.js";import{g as Ae}from"./get_content_comicNode.a975c076.js";import He from"./Display_Text_Summary.075a9d7c.js";import Oe from"./Display_Text_ExtInfo.a43e9636.js";import We from"./Display_Text_ResInfo.69ddb87f.js";import{e as ze,b as ue,c as Ue}from"./marking_system.41c8f6bb.js";import{S as Ge}from"./ScoreStars.e56e12c1.js";import Qe from"./Display_EmotionChart.228fa0ff.js";import{f as G}from"./func_readable_number.28566f22.js";import{F as ge}from"./FontIcon_MaterialIcons.959bf5eb.js";import{C as Ke}from"./ComicCard_Image.5663b9d7.js";import{c as E}from"./content_comic_release_statuss.baeb95ea.js";import{F as Je}from"./FontIcon_Entypo.d5a1bd20.js";import{m as Me}from"./marking_statuss.9d622f52.js";import Ye from"./LimitHeight.62cc5c6f.js";import{T as Xe}from"./TimeFormat.314dacbc.js";import Ze from"./Marking_Buttons.bd6fb6fd.js";import{m as es}from"./marking_emotions.f1bb90d8.js";import{g as ss}from"./get_marking_mylistList.4445fa1d.js";import{R as Ce}from"./RichEditor.5300c3c3.js";import{M as ts}from"./MarkdownPreview.06f9cb4b.js";import{m as as}from"./marking_scores.895d79c6.js";import{U as ns}from"./UserAvatar.6eccc366.js";import{g as je}from"./global_report_reasons.43eeddd7.js";import{m as os}from"./mut_report_submit.76b1a1fd.js";import{A as ls}from"./ActionModal_FriendRequest.2918f64f.js";import{l as rs,b as cs}from"./LocalStorage.f84880a8.js";import"./global_theme.97ef2353.js";import"./Field_TPWD.1c1b3f95.js";import"./account_system.78c736b4.js";import"./CreateIcon.643c07e4.js";import"./FontIcon_AntDesign.4fef2788.js";import"./Field_Addr.d2272776.js";import"./func_is_bad_account_username.d9223e73.js";import"./fgm_marking_folderData_base.307e1cc1.js";import"./system_QueryClient_DefaultOptions.2a38a32d.js";import"./useBaseQuery.5308c781.js";import"./utils.8269c30c.js";import"./axios.4a70c6fc.js";import"./func_theme_is_dark.88e71ca0.js";import"./funcs.089bb421.js";import"./fgm_content_chapterNode_list.23e776e7.js";import"./fgm_account_userNode_list.1c58f603.js";import"./fgm_account_userData_list.d42d333e.js";import"./fgm_content_comicData_base.4f80dd8b.js";import"./fgm_content_comicData_list.733373f3.js";import"./fgm_content_comic_stat.9db93b58.js";import"./fgm_content_comic_sser.740c0541.js";import"./fgm_marking_mylistData_lite.3dc79773.js";import"./MarkdownDisplay.25bf213f.js";import"./func_attachment_name_to_http.94bdbc5a.js";import"./func_base_domain.794ffdc8.js";import"./index.c4d45b2c.js";import"./index.6616ef63.js";import"./get_content_comic_SserMarking.2ef3038d.js";import"./MarkingButton_Follow.899435d0.js";import"./index.4cf809ff.js";import"./FontIcon_MaterialCommOldIcons.ec865c5e.js";import"./WarnedMask.7e403412.js";import"./fgm_base_paging.5df5003c.js";import"./fgm_marking_mylistData_page.bbcd5a65.js";import"./infin.84621312.js";import"./func_nodeapi.80362569.js";import"./ActionButton_FriendAccept.0bd84c51.js";import"./ActionButton_FriendIgnore.7a433bd0.js";function is({children:n}){const[t,s]=r.useState(!1);return r.useEffect(()=>s(!0),[]),t?e.jsx(e.Fragment,{children:n}):null}function ds(n){return e.jsx(is,{children:e.jsx(ms,{...n})})}function ms(n){const t=M(U),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>U(!1),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-sm",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h5",{className:"text-lg font-bold font-variant-small-caps",children:[!0,"in","signin"].includes(t)?"Sign In":"Sign Up"}),e.jsx("a",{href:[!0,"in","signin"].includes(t)?"/signin":"/signup",className:"text-info cursor-pointer",target:"signin",children:e.jsx(V,{name:"external-link-alt"})})]}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>U(!1),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(us,{})]})})})}function us(n){const t=M(U),[s,a]=r.useState("loading");r.useEffect(()=>{if(s==="success"){const c=setTimeout(()=>{U(!1)},3e3);return()=>{clearTimeout(c)}}},[s]);function o(c){a(c)}return e.jsxs("div",{className:"relative modal-body select-none",children:[[!0,"in","signin"].includes(t)?e.jsx(Fe,{onBack_status:o}):e.jsx(Te,{onBack_status:o}),[!0,"in","signin"].includes(t)?e.jsx("div",{className:"my-3",children:e.jsx("a",{className:"link link-hover link-primary text-lg",onClick:()=>U("up"),children:"Need an account?"})}):e.jsx("div",{className:"my-3",children:e.jsx("a",{className:"link link-hover link-primary text-lg",onClick:()=>U("in"),children:"Have an account?"})}),e.jsxs("div",{className:v("justify-center items-center absolute top-0 right-0 bottom-0 left-0 bg-base-300/80",{hidden:["loading","success"].includes(s)===!1,flex:["loading","success"].includes(s)===!0}),children:[s==="loading"&&e.jsx("button",{className:"btn btn-ghost btn-square ",children:e.jsx("span",{className:"loading loading-spinner loading-xs"})}),s==="success"&&e.jsx("span",{className:"text-success font-bold",children:"successfully logged in"})]})]})}function xs(){function n(){window.scrollTo({left:0,top:0,behavior:"smooth"})}function t(){window.scrollTo({left:0,top:document.body.scrollHeight||document.documentElement.scrollHeight,behavior:"smooth"})}return e.jsxs("div",{className:v("fixed z-30","flex flex-col","ease-in-out duration-300","opacity-30 hover:opacity-90","right-4 bottom-4"),children:[e.jsx("div",{className:"inline-block",onClick:n,children:e.jsx("button",{className:"btn btn-sm btn-circle",children:e.jsx(V,{name:"arrow-up"})})}),e.jsx("div",{className:"inline-block",onClick:t,children:e.jsx("button",{className:"btn btn-sm btn-circle",children:e.jsx(V,{name:"arrow-down"})})})]})}function hs(n){return e.jsxs(e.Fragment,{children:[e.jsx(ps,{}),e.jsx(fs,{})]})}function ps(n){const t=M(Le);return t.length?e.jsx("div",{className:"fixed z-[1101] top-0 right-0 left-0 flex flex-col",children:t.map((s,a)=>e.jsx(Pe,{idx:a,item:s,pos:"top"},s._key))}):null}function fs(n){const t=M(qe);return t.length?e.jsx("div",{className:"fixed z-[1102] bottom-0 right-0 left-0 flex flex-col",children:t.map((s,a)=>e.jsx(Pe,{idx:a,item:s,pos:"bottom"},s._key))}):null}function Pe(n){const{idx:t,pos:s,item:a}=n,[o,c]=r.useState(!1),[l,i]=r.useState(()=>a.dismiss),[d,u]=r.useState(!1);r.useEffect(()=>{if(a.dismiss>0&&l>=0){const g=setTimeout(()=>{const b=new Date().getTime()-a._time,x=a.dismiss-b;i(x)},10);return()=>{clearTimeout(g)}}}),r.useEffect(()=>{l<0&&c(!0)},[l]),r.useEffect(()=>{if(o){const g=setTimeout(()=>{u(!0)},1e3);return()=>{clearTimeout(g)}}},[o]);function m(){c(!0)}return d?null:e.jsxs("div",{className:v("relative flex p-3 transition duration-1000 ease-in-out",{"bg-base-200/95 text-base-content":a.style==="base"||!a.style,"bg-info/95 text-info-content":a.style==="info","bg-success/95 text-success-content":a.style==="success","bg-warning/95 text-warning-content":a.style==="warning","bg-error/95 text-error-content":a.style==="error"},s==="top"?"mb-px":"",s==="bottom"?"mt-px pt-4":"",{"translate-x-0 opacity-100":!o,"opacity-0":o,"-translate-x-full":o&&s==="top","translate-y-full":o&&s==="bottom"}),children:[a.content,s==="bottom"&&e.jsx("div",{className:"absolute top-0 right-0 left-0 w-full h-1",children:e.jsx("div",{className:"bg-black/80 h-1",style:{width:`${l/a.dismiss*100}%`}})}),e.jsx("button",{className:"btn btn-xs btn-ghost btn-circle absolute top-2 right-1 opacity-90",onClick:m,children:e.jsx(C,{name:"close",size:18})})]})}async function gs(n={},t=null){const s=B`
  mutation mut_marking_upsert_follow($comicId: ID!, $folder: String, $create: String) {
    mut_marking_upsert_follow(comicId: $comicId, folder: $folder, create: $create) {
      err tof str
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_follow}function js(n){return e.jsx(_s,{...n})}function _s(n){const t=M(re),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>re(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-md",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("h5",{className:"text-lg font-bold",children:["Follow Comic #",t?.comicId]})}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>re(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(bs,{val_data:t})]})})})}function bs(n){const{val_data:t}=n,{rqKeys:s,comicId:a,comicName:o,value:c}=t,l="new",[i,d]=r.useState(c||""),[u,m]=r.useState(()=>i),[g,_]=r.useState(()=>""),[b,x]=r.useState(!1);r.useEffect(()=>{m(i)},[t]);const j=Be.debounce(function(){u!==l&&u!==i&&N()},300);r.useEffect(()=>(j(),()=>{j.cancel()}),[u]);const y=["get_marking_folderNodes"],h=W(),{data:k,isLoading:P,isFetching:q,isRefetching:A,isSuccess:H,isError:z}=pe(y,()=>$e()),Q=P||q||A,I=k?.length?k:[];function F(f){fe.setKey(a,Object.assign({},fe.get()[a]||{},f))}const O=T(gs,{onSuccess:f=>{if(s?.length)for(const Ee of s)h.invalidateQueries(Ee);u===l&&h.invalidateQueries(y);const{err:$,tof:De,str:le}=f;if($){F({loading:!1}),S({style:"error",content:"System error, try again later please."}),x(!1),m(i);return}F({loading:!1,changed:!0,current:le}),S({style:"success",content:"Done!"}),m(le||""),d(le||""),x(!1)},onError:f=>{F({loading:!1}),x(!1),m(i)}});function w(f){_(f.target.value)}function p(f){const $=f.target.value;f.target.checked&&m($||"")}function N(){F({loading:!0}),x(!0),O.mutate({comicId:a,folder:u,create:g})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-body",children:[e.jsx("h6",{className:"font-bold text-lg",children:o}),Q?e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx("button",{className:"btn btn-ghost btn-square",disabled:!0,children:e.jsx("span",{className:"loading loading-spinner loading-xs"})})}):e.jsxs("form",{onSubmit:f=>(f.preventDefault(),!1),children:[I.map(f=>f.data).map(f=>e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:v("cursor-pointer label justify-start",{}),children:[e.jsx("input",{type:"radio",name:"mylists",className:"radio checked:bg-primary",value:f.id,checked:u===f.id,onChange:p}),e.jsxs("span",{className:"ml-3 label-text",children:[f.name," ",e.jsxs("span",{className:"text-xs opacity-60",children:["(",f.count_comicIds,")"]})]})]})},f.id)),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start",children:[e.jsx("input",{type:"radio",name:"mylists",className:"radio checked:bg-red-500",value:"",checked:!u,onChange:p}),e.jsx("span",{className:"ml-3 label-text",children:"[N/A] - do not follow"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start",children:[e.jsx("input",{type:"radio",name:"mylists",className:"radio checked:bg-green-500",value:l,checked:u===l,onChange:p}),e.jsx("div",{className:"ml-3 w-full text-green-500",children:e.jsx("input",{type:"text",placeholder:"Create New Folder",className:"input input-sm input-bordered w-full",value:g,onChange:w,onFocus:()=>m(l)})}),e.jsxs("button",{className:"ml-3 btn btn-sm btn-primary",disabled:u!==l,onClick:N,children:[b&&u===l&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})]})})]})]}),e.jsxs("div",{className:"modal-footer space-x-3",children:[e.jsx("button",{className:"btn btn-sm btn-square btn-ghost",children:!!b&&e.jsx("span",{className:"loading loading-spinner loading-xs"})}),e.jsxs("a",{className:"btn btn-sm btn-ghost space-x-1",href:"/my/folders",children:[e.jsx(C,{name:"wrench"}),e.jsx("span",{children:"My Folders"})]})]})]})}function Ns(n){return e.jsx(ys,{...n})}function ys(n){const t=M(K),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>K(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-md",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h5",{className:"text-lg font-bold text-warning font-variant-small-caps",children:"HANG ON"})}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>K(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(vs,{eurl:t})]})})})}function vs(n){const{eurl:t}=n;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"font-bold text-warning",children:"Are you sure you wanna go to:"}),e.jsx("div",{children:t})]}),e.jsxs("div",{className:"modal-footer space-x-3",children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>K(null),children:"Cancel"}),e.jsx("a",{className:"btn btn-sm btn-primary",href:t,target:"_blank",onClick:()=>K(null),rel:"external nofollow noreferrer noopener",children:"Yes, I trust this link!"})]})]})}async function ks(n={},t=null){const s=B`
  mutation mut_account_settingsSave($json: String) {
    mut_account_settingsSave(json: $json) {
      err tof str
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_account_settingsSave}function ws(n){const{sess:t}=n,{_sser:s}=t;return s.uid?null:e.jsx("div",{className:"alert alert-sm alert-warning",children:e.jsxs("div",{className:"block",children:[e.jsxs("p",{children:["Your site settings data will depend on your ",e.jsx("a",{className:"link",href:"https://en.wikipedia.org/wiki/HTTP_cookie",target:"_blank",rel:"noreferrer noopener",children:"browser's cookies"})," function, and Cookies are data that can be easily lost."]}),e.jsxs("p",{children:["We recommend that you ",e.jsx("a",{className:"link",href:"/signin",children:"log in"})," to your ",oe," account, to persist your settings."]})]})})}function Ss(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o,_wint:c}=t,[l,i]=r.useState(()=>(o.general_prefLangs||[]).filter(p=>!!Y[p])),[d,u]=r.useState(o.general_excGenres||[]),[m,g]=r.useState(o.general_chaHisNoDser||!1),[_,b]=r.useState(o.general_chaHisNoSser||!1),[x,j]=r.useState(c.ComPic||!1),[y,h]=r.useState(c.ComTit||!1),[k,P]=r.useState(c.ChaDef||!1),[q,A]=r.useState(c.ChaNav||!1),[H,z]=r.useState(c.Common||!1),Q=r.useMemo(()=>{const p=Object.values(ke),N=[];return N.push(p.filter(f=>f.sort===1)),N.push(p.filter(f=>f.sort===2)),N.push(p.filter(f=>f.sort===3)),N.push(p.filter(f=>!f.sort)),N},[]);r.useEffect(()=>{s({prefix:"general_",items:{prefLangs:l,excGenres:d,chaHisNoDser:m,chaHisNoSser:_,newWinComPic:x,newWinComTit:y,newWinChaDef:k,newWinChaNav:q,newWinCommon:H}})},[l,d,m,_,H,q,x,y,k]);function I(p){const N=p.target;switch(N.name){case"chaHisNoDser":g(N.checked);break;case"chaHisNoSser":b(N.checked);break;case"newWinComPic":j(N.checked);break;case"newWinComTit":h(N.checked);break;case"newWinChaDef":P(N.checked);break;case"newWinChaNav":A(N.checked);break;case"newWinCommon":z(N.checked);break}}function F(p){const N=p.target.value,f=p.target.checked;f&&l.includes(N)===!1?i([...l,N]):!f&&l.includes(N)&&i(l.filter($=>$!==N))}function O(p){const N=p.target.value,f=p.target.checked;f&&d.includes(N)===!1?u([...d,N]):!f&&d.includes(N)&&u(d.filter($=>$!==N))}const w=Y.en;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"font-bold text-lg",children:"Browsing history function"}),e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"chaHisNoDser",className:"checkbox checkbox-primary",onChange:I,checked:m}),e.jsxs("span",{className:"label-text space-x-1 text",children:[e.jsx(V,{name:"mobile-alt",className:"text-violet-500"}),e.jsx("span",{children:"Disable chapter history"}),e.jsx("span",{className:"text-violet-500",children:"by Device"})]})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"chaHisNoSser",className:"checkbox checkbox-primary",onChange:I,checked:_,disabled:!a.uid}),e.jsxs("span",{className:"label-text space-x-1",children:[e.jsx(V,{name:"user",className:"text-sky-500"}),e.jsx("span",{children:"Disable chapter history"}),e.jsx("span",{className:"text-sky-500",children:"by Profile"})]})]})})]}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"font-bold text-lg",children:"Open links in new tab/window"}),e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"newWinComPic",className:"checkbox checkbox-primary",onChange:I,checked:x}),e.jsx("span",{className:"label-text",children:"Comic cover"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"newWinComTit",className:"checkbox checkbox-primary",onChange:I,checked:y}),e.jsx("span",{className:"label-text",children:"Comic title"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"newWinChaDef",className:"checkbox checkbox-primary",onChange:I,checked:k}),e.jsx("span",{className:"label-text",children:"Chapter links"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"newWinChaNav",className:"checkbox checkbox-primary",onChange:I,checked:q}),e.jsx("span",{className:"label-text",children:"Chapter prev/next nav"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"newWinCommon",className:"checkbox checkbox-primary",onChange:I,checked:H}),e.jsx("span",{className:"label-text",children:"Most other links"})]})})]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"font-bold text-lg",children:["Select your ",e.jsx("span",{className:"text-green-500",children:"preferred"})," languages ",e.jsx("span",{className:"text-green-500",children:"in order"}),l.length>0&&e.jsxs("span",{className:"pl-2 text-green-500 cursor-pointer",onClick:()=>i([]),children:["(",l.length,")"]})]}),e.jsx("div",{className:"text-xs opacity-60",children:"Check only [English] for English only mode."}),e.jsxs("form",{className:"pl-2 grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 text-xs md:text-sm",children:[e.jsxs("label",{className:"flex items-center cursor-pointer space-x-1 col-span-2 md:col-span-3 lg:col-span-4 xl:col-span-6",children:[e.jsx("input",{type:"checkbox",className:v("checkbox checkbox-primary checkbox-sm",{"checkbox-secondary":l.includes(w.file)}),value:w.file,checked:!!l.includes(w.file),onChange:F}),e.jsx(Z,{lang:w.file}),e.jsx("span",{className:v({"text-xs":String(w.text).length>=10,"text-accent font-bold":w.file==="en"}),children:w.text}),l.includes(w.file)&&e.jsx("span",{className:"badge badge-xs badge-accent",children:l.indexOf(w.file)+1})]}),Object.values(Y).map(p=>e.jsxs("label",{className:"flex items-center cursor-pointer space-x-1",children:[e.jsx("input",{type:"checkbox",className:v("checkbox checkbox-primary checkbox-sm",{"checkbox-secondary":l.includes(p.file)}),value:p.file,checked:!!l.includes(p.file),onChange:F}),e.jsx(Z,{lang:p}),e.jsx("span",{className:v({"text-xs":String(p.text).length>=10,"text-accent font-bold":p.file==="en"}),children:p.text}),l.includes(p.file)&&e.jsx("span",{className:"badge badge-xs badge-accent",children:l.indexOf(p.file)+1})]},p.file))]}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"font-bold text-lg",children:["Select any genres you wanna ",e.jsx("span",{className:"text-red-500",children:"block"}),d.length>0&&e.jsxs("span",{className:"pl-2 text-red-500 cursor-pointer",onClick:()=>u([]),children:["(",d.length,")"]})]}),e.jsx("form",{className:"pl-2 text-xs md:text-sm space-y-3",children:Q.map((p,N)=>e.jsx("div",{className:"grid gap-2 grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6",children:p.map(f=>e.jsxs("label",{className:"flex items-center cursor-pointer space-x-1 whitespace-nowrap overflow-hidden",children:[e.jsx("input",{type:"checkbox",className:v("checkbox checkbox-primary checkbox-sm",{"checkbox-secondary":d.includes(f.file)}),value:f.file,checked:!!d.includes(f.file),onChange:O}),e.jsx("span",{className:v({"text-xs":String(f.text).length>=10}),children:e.jsx(we,{item:f})})]},f.file))},N))})]})}function L(n){const{sess:t,title:s="Section loading mode",setsPath:a="",initMode:o="auto",haveHide:c=!0,onBackData:l=()=>{},userOnly:i=!1}=n,d={defa:1,auto:1,manu:2,hide:3},u={0:"defa",1:"auto",2:"manu",3:"hide"},m={defa:"default",auto:"automatic",manu:"manually",hide:"hide"},{_sser:g,_sets:_}=t,b="defa",x=_[a]||0,j=u[x]||b,[y,h]=r.useState(j);r.useEffect(()=>{const P=y===b?0:d[y];l(P)});function k(P){h(P.target.value)}return a?e.jsxs(e.Fragment,{children:[e.jsx("h6",{className:"font-bold text-lg",children:s}),e.jsx("form",{children:e.jsx("fieldset",{disabled:!!(i&&!g),children:e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"radio",name:"loadMode",className:"radio radio-primary checked:bg-primary",value:"defa",onChange:k,checked:y==="defa"}),e.jsxs("span",{className:"label-text",children:["Bato default (",e.jsx("span",{className:v({"text-green-500":o==="auto","text-blue-500":o==="manu","text-red-500":o==="hide"}),children:m[o]}),")"]})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"radio",name:"loadMode",className:"radio radio-primary checked:bg-green-500",value:"auto",onChange:k,checked:y==="auto"}),e.jsx("span",{className:"label-text",children:"Automatic load"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"radio",name:"loadMode",className:"radio radio-primary checked:bg-blue-500",value:"manu",onChange:k,checked:y==="manu"}),e.jsx("span",{className:"label-text",children:"Manually load"})]})}),c&&e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"radio",name:"loadMode",className:"radio radio-primary checked:bg-red-500",value:"hide",onChange:k,checked:y==="hide"}),e.jsx("span",{className:"label-text",children:"Hide this section"})]})})]})})})]}):null}function Ms(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o}=t,[c,l]=r.useState(o.homePage_myUpdates_loadMode||0),[i,d]=r.useState(o.homePage_myHisSser_loadMode||0),[u,m]=r.useState(o.homePage_myHisDser_loadMode||0),[g,_]=r.useState(o.homePage_popular_loadMode||0),[b,x]=r.useState(o.homePage_release_loadMode||0),[j,y]=r.useState(o.homePage_qgenres_loadMode||0),[h,k]=r.useState(o.homePage_reviews_loadMode||0),[P,q]=r.useState(o.homePage_mylists_loadMode||0),[A,H]=r.useState(o.homePage_uploader_loadMode||0),[z,Q]=r.useState(o.homePage_group_loadMode||0),[I,F]=r.useState(o.homePage_comment_loadMode||0),[O,w]=r.useState(o.homePage_disqus_loadMode||0);return r.useEffect(()=>{s({prefix:"homePage_",items:{myUpdates_loadMode:c,myHisSser_loadMode:i,myHisDser_loadMode:u,popular_loadMode:g,release_loadMode:b,qgenres_loadMode:j,reviews_loadMode:h,mylists_loadMode:P,uploader_loadMode:A,group_loadMode:z,comment_loadMode:I,disqus_loadMode:O}})},[c,i,u,g,b,j,h,P,A,z,I,O]),e.jsxs("div",{className:"space-y-3",children:[e.jsx(L,{sess:t,title:"<My Updates> loading mode",setsPath:"homePage_myUpdates_loadMode",initMode:"manu",onBackData:l,userOnly:!0}),e.jsx(L,{sess:t,title:"<My History (Profile)> loading mode",setsPath:"homePage_myHisSser_loadMode",initMode:"manu",onBackData:d,userOnly:!0}),e.jsx(L,{sess:t,title:"<My History (Device)> loading mode",setsPath:"homePage_myHisDser_loadMode",initMode:"manu",onBackData:m}),e.jsx(L,{sess:t,title:"<Popular Updates> loading mode",setsPath:"homePage_popular_loadMode",initMode:"auto",onBackData:_}),e.jsx(L,{sess:t,title:"<Latest Releases> loading mode",setsPath:"homePage_release_loadMode",initMode:"auto",onBackData:x}),e.jsx(L,{sess:t,title:"<Quick Genres> loading mode",setsPath:"homePage_qgenres_loadMode",initMode:"auto",onBackData:y}),e.jsx(L,{sess:t,title:"<Latest Reviews> loading mode",setsPath:"homePage_reviews_loadMode",initMode:"auto",onBackData:k}),e.jsx(L,{sess:t,title:"<Disqus: Home> loading mode",setsPath:"homePage_disqus_loadMode",initMode:"auto",onBackData:w})]})}function Cs(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o}=t;a.uid;const[c,l]=r.useState(o.comicPage_reviews_loadMode||0),[i,d]=r.useState(o.comicPage_comment_loadMode||0),[u,m]=r.useState(o.comicPage_mylists_loadMode||0),[g,_]=r.useState(o.comicPage_disqus_loadMode||0);return r.useEffect(()=>{s({prefix:"comicPage_",items:{reviews_loadMode:c,comment_loadMode:i,mylists_loadMode:u,disqus_loadMode:g}})},[c,i,u,g]),e.jsxs("div",{className:"space-y-3",children:[e.jsx(L,{sess:t,title:"<Reviews> loading mode",setsPath:"comicPage_reviews_loadMode",initMode:"auto",onBackData:l}),e.jsx(L,{sess:t,title:"<Comments> loading mode",setsPath:"comicPage_comment_loadMode",initMode:"auto",onBackData:d}),e.jsx(L,{sess:t,title:"<Batolists> loading mode",setsPath:"comicPage_mylists_loadMode",initMode:"auto",onBackData:m})]})}function Ps(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o}=t,[c,l]=r.useState(o.chapterPage_comment_loadMode||0);return r.useEffect(()=>{s({prefix:"chapterPage_",items:{comment_loadMode:c}})},[c]),e.jsx("div",{className:"space-y-3",children:e.jsx(L,{sess:t,title:"<Comments> loading mode",setsPath:"chapterPage_comment_loadMode",initMode:"auto",onBackData:l})})}function Is(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o}=t,[c,l]=r.useState(o.myNotif_upvoteComment||0),[i,d]=r.useState(o.myNotif_dnvoteComment||0),[u,m]=r.useState(o.myNotif_upvoteReview||0),[g,_]=r.useState(o.myNotif_dnvoteReview||0);r.useEffect(()=>{s({prefix:"myNotif_",items:{upvoteComment:c,dnvoteComment:i,upvoteReview:u,dnvoteReview:g}})},[c,i,u,g]);function b(x){const j=x.target;switch(j.name){case"upvoteComment":l(j.checked);break;case"dnvoteComment":d(j.checked);break;case"upvoteReview":m(j.checked);break;case"dnvoteReview":_(j.checked);break}}return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"font-bold text-lg",children:"Receive voting notifications when:"}),e.jsx("div",{className:"pl-2 text-info text-xs",children:"Notification options for downvote removed due to abusive"}),e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"upvoteComment",className:"checkbox checkbox-primary",onChange:b,checked:c}),e.jsx("span",{className:"label-text",children:"My comment was upvoted"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"upvoteReview",className:"checkbox checkbox-primary",onChange:b,checked:u}),e.jsx("span",{className:"label-text",children:"My review was upvoted"})]})})]})]})}function Ds(n){const{sess:t,onBack_data:s=()=>{}}=n,{_sser:a,_sets:o}=t,[c,l]=r.useState(o.myProfile_canViewLib_follow_i||0),[i,d]=r.useState(o.myProfile_canViewLib_i_follow||0),[u,m]=r.useState(o.myProfile_canViewLib_i_friend||0),[g,_]=r.useState(o.myProfile_canViewLib_loggedIn||0),[b,x]=r.useState(o.myProfile_canViewLib_everyone||0);r.useEffect(()=>{s({prefix:"myProfile_",items:{canViewLib_follow_i:c,canViewLib_i_follow:i,canViewLib_i_friend:u,canViewLib_loggedIn:g,canViewLib_everyone:b}})},[c,i,u,g,b]);function j(y){const h=y.target;switch(h.name){case"canViewLib_follow_i":l(h.checked);break;case"canViewLib_i_follow":d(h.checked);break;case"canViewLib_i_friend":m(h.checked);break;case"canViewLib_loggedIn":_(h.checked);break;case"canViewLib_everyone":x(h.checked);break}}return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"font-bold text-lg",children:"Who can view [My Library]:"}),e.jsxs("div",{className:"pl-2 space-y-2",children:[e.jsx("div",{className:"text-xs opacity-60",children:"If none is selected, it means that only you can view."}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"canViewLib_follow_i",className:"checkbox checkbox-primary",onChange:j,checked:c}),e.jsx("span",{className:"label-text",children:"Users following me"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"canViewLib_i_follow",className:"checkbox checkbox-primary",onChange:j,checked:i}),e.jsx("span",{className:"label-text",children:"Users in my follow list"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"canViewLib_i_friend",className:"checkbox checkbox-primary",onChange:j,checked:u}),e.jsx("span",{className:"label-text",children:"Users in my friend list"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"canViewLib_loggedIn",className:"checkbox checkbox-primary",onChange:j,checked:g}),e.jsx("span",{className:"label-text",children:"Logged-in users"})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer justify-start space-x-2",children:[e.jsx("input",{type:"checkbox",name:"canViewLib_everyone",className:"checkbox checkbox-primary",onChange:j,checked:b}),e.jsx("span",{className:"label-text",children:"Everyone"})]})})]})]})}function Es(n){const{sess:t}=n,s=M(X),[a,o]=r.useState(!1),[c,l]=r.useState({}),i=T(ks,{onSuccess:m=>{if(m.err){S({style:"error",content:"System error, please try again"}),o(!1);return}S({style:"success",content:"Settings saved!"}),m.str&&Se("bset",m.str),o(!1)},onError:m=>{S({style:"error",content:"System error, please try again"}),o(!1)}});function d(m){const g=m.prefix,_={};for(const[b,x]of Object.entries(m.items))_[`${g}${b}`]=x;l(()=>_)}function u(){const m=JSON.stringify(Object.assign({_settings:1},c));o(!0),i.mutate({json:m})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body select-none",children:e.jsxs("div",{className:"space-y-5",children:[e.jsx(_e,{sess:t}),e.jsx(ws,{sess:t,pos:"top"}),s==="general"&&e.jsx(Ss,{sess:t,onBack_data:d}),s==="homePage"&&e.jsx(Ms,{sess:t,onBack_data:d}),s==="comicPage"&&e.jsx(Cs,{sess:t,onBack_data:d}),s==="chapterPage"&&e.jsx(Ps,{sess:t,onBack_data:d}),s==="myProfile"&&e.jsx(Ds,{sess:t,onBack_data:d}),s==="myNotif"&&e.jsx(Is,{sess:t,onBack_data:d}),e.jsx(_e,{sess:t,pos:"bot"})]})}),e.jsx("div",{className:"modal-footer space-x-3",children:e.jsxs("button",{className:"btn btn-sm btn-primary",onClick:u,children:[!!a&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Save"]})})]})}function _e(n){const{sess:t,pos:s="top"}=n,{_sser:a}=t,o=M(X),[c,l]=r.useState(9);r.useEffect(()=>{if(c>0){const d=setTimeout(()=>{l(c-1)},1e3);return()=>{clearTimeout(d)}}},[c]);function i(d){X(d.target.value)}return e.jsxs("div",{children:[s==="bot"&&e.jsxs("div",{className:v("flex items-baseline text-info text-lg font-bold",{"animate-pulse":c>0}),children:[e.jsx("span",{className:"",children:"More Options Here"}),e.jsx("span",{className:"inline-block mx-4",children:e.jsx(C,{name:"level-down"})})]}),e.jsxs("select",{className:"select select-info select-bordered py-0 w-full",value:o,onChange:i,children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"homePage",children:"Page: Home"}),e.jsx("option",{value:"comicPage",children:"Page: Manga"}),e.jsx("option",{value:"chapterPage",children:"Page: Chapter"}),e.jsx("option",{value:"myProfile",disabled:!a.uid,children:"Page: My Profile"}),e.jsx("option",{value:"myNotif",disabled:!a.uid,children:"Page: My Notifications"})]}),s==="top"&&e.jsxs("div",{className:v("flex items-baseline text-info text-lg font-bold",{"animate-pulse":c>0}),children:[e.jsx("span",{className:"inline-block mx-4 rotate-180",children:e.jsx(C,{name:"level-down"})}),e.jsx("span",{className:"",children:"More Options Here"})]})]})}function Ls(n){return e.jsx(ye,{...n,children:e.jsx(qs,{...n})})}function qs(n){const s=!!M(X);return r.useEffect(()=>{D(s?1:0)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-2xl",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header select-none",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h5",{className:"text-lg font-bold font-variant-small-caps",children:"Site Settings"})}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>X(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(Es,{...n})]})})})}function Fs({data:n}){const{stat_score_val:t,stat_score_bay:s,stat_count_vote:a,stat_count_scores:o}=n,c=[5,4,3,2,1];let l=0;const i={};for(const u of c)i[u]=0;if(o?.length)for(const u of o){const m=Math.ceil(u.field/2);i[m]+=u.count,l+=u.count}const d={};for(const u of c)d[u]=i[u]&&l?i[u]/l*100:0;return e.jsxs("div",{className:"flex space-x-3 select-none",children:[e.jsxs("div",{className:"flex flex-col justify-start items-center",children:[e.jsx("div",{className:"leading-[2.0rem] md:leading-[2.5rem] border-b border-base-200/60 mb-1",children:t>0?e.jsx("span",{className:"font-black text-[2.0rem] md:text-[2.5rem] text-yellow-500",children:Number(t).toFixed(1)}):e.jsxs("span",{className:"font-bold opacity-80 whitespace-nowrap",children:["< ",ze.m," votes"]})}),e.jsx(Ge,{score:s||0,textSize:"text-xs md:text-sm",textFace:"text-yellow-500",textBase:"text-base-content"}),e.jsxs("div",{className:"text-sm opacity-80 whitespace-nowrap",children:[l||0," votes"]})]}),e.jsx("div",{className:"space-y-0 artboard",children:c.map(u=>e.jsxs("div",{className:"flex items-center text-xs md:text-sm space-x-2",children:[e.jsxs("div",{className:"flex items-center font-mono font-bold opacity-80",children:[e.jsx("span",{children:u}),e.jsx(V,{name:"star",s:"1",className:"text-xs"})]}),e.jsx("progress",{className:"progress progress-primary",value:d[u],max:"100"}),e.jsxs("span",{className:"font-mono opacity-80",children:[String(Number(d[u]).toFixed(1)).padStart(4,0),"%"]})]},u))})]})}function Ts(n){const{sess:t,node:s}=n;if(!s)return null;const{data:a}=s,o="d030";let c=0;if(Array.isArray(a.stat_count_views)){for(const d of a.stat_count_views)if(d.field===o){c=d.count||0;break}}let l=0;if(Array.isArray(a.stat_count_emotions))for(const d of a.stat_count_emotions)d.count>l&&(d.field,l=d.count);const i=s.sser_follow;return e.jsxs("div",{className:"flex flex-nowrap items-center space-x-2 text-sm",children:[!!a.stat_count_follows&&e.jsxs("span",{className:v("flex flex-nowrap items-center opacity-80",{"text-green-500":i}),children:[i?e.jsx(C,{name:"check-circle",size:16}):e.jsx(ge,{name:"add-task",size:16}),a.stat_count_follows!==null&&e.jsx("span",{className:"ml-1",children:G(a.stat_count_follows)})]}),!!a.stat_count_reviews&&e.jsxs("span",{className:"flex flex-nowrap items-center opacity-80",children:[e.jsx(ge,{name:"rate-review",size:16}),e.jsx("span",{className:"ml-1",children:G(a.stat_count_reviews)})]}),!!a.stat_count_post_child&&e.jsxs("span",{className:"flex flex-nowrap items-center opacity-80",children:[e.jsx(V,{name:"comments",size:16}),e.jsx("span",{className:"ml-1",children:G(a.stat_count_post_reply)})]}),c>0&&e.jsxs("span",{className:"flex flex-nowrap items-center opacity-80",children:[e.jsx(V,{name:"eye",size:16}),e.jsx("span",{className:"ml-1",children:G(c)})]})]})}function be(n){const{sess:t,node:s}=n,{data:a}=s,o=Array.from(new Set([...a.authors||[],...a.artists||[]])),c={};return o.forEach(l=>{const i=a.authors?.includes(l),d=a.artists?.includes(l);i&&d?c[l]="(Story&Art)":i?c[l]="":d?c[l]="(Art)":c[l]=""}),e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-lg md:text-2xl font-bold",children:[!!(a.tranLang&&a.tranLang!=="en")&&e.jsx(Z,{className:"s150 mr-2",lang:a.tranLang}),e.jsx("a",{href:a.urlPath,className:"link link-hover",children:a.name})]}),a.altNames?.length>0&&e.jsx("div",{className:"mt-1 text-xs md:text-base opacity-80",children:a.altNames.map((l,i)=>e.jsxs(r.Fragment,{children:[i>0&&e.jsx("span",{className:"text-sm opacity-30",children:" / "}),e.jsx("span",{children:l})]},i))}),o.length>0&&e.jsx("div",{className:"mt-2 text-sm md:text-base opacity-80",children:o.map((l,i)=>e.jsxs(r.Fragment,{children:[i>0&&e.jsx("span",{className:"text-sm opacity-30",children:" / "}),e.jsxs("a",{href:`/v3x-search?word=${encodeURIComponent(l)}`,className:"link link-hover link-primary",target:"_blank",children:[l,c[l]]})]},i))}),e.jsx(Ts,{sess:t,node:s})]})}function $s(n){const{sess:t,node:s}=n;return e.jsx("div",{className:"w-24 md:w-52 flex-none justify-start items-start",children:e.jsx(Ke,{className:"w-full not-prose shadow-md shadow-black/50",node:s})})}const ce={ltr:{file:"ltr",text:"Left to Right",icon:"arrow-right"},rtl:{file:"rtl",text:"Right to Left",icon:"arrow-left"},ttb:{file:"ttb",text:"Top to Bottom",icon:"arrow-down"}};function Vs(n){const{data:t}=n,s=r.useMemo(()=>t.genres?.length?Array.from(new Set(t.genres)).map(a=>ke[a]).filter(a=>a?.file).sort((a,o)=>{const c=a.sort||999999,l=o.sort||999999;return c-l}):[],[t.genres]);return s.length?e.jsxs("div",{className:"flex items-center flex-wrap",children:[e.jsx("b",{className:"hidden md:inline-block mr-2 text-base-content/50",children:"Genres:"}),s.map((a,o)=>e.jsxs("span",{children:[e.jsx(we,{item:a}),o<s.length-1&&e.jsx("span",{className:"text-base-content/80 px-1",children:","})]},a.file))]}):null}function Bs(n){const{sess:t,data:s}=n;return e.jsxs(e.Fragment,{children:[e.jsx(Vs,{data:s}),e.jsxs("div",{className:"whitespace-nowrap overflow-hidden",children:[!!s.tranLang&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1",children:e.jsx(Z,{lang:s.tranLang})}),e.jsx("span",{className:"mr-1",children:Y[s.tranLang]?.text})]}),!!s.origLang&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mr-1 text-base-content/50",children:"Tr From"}),e.jsx("span",{className:"mr-1",children:e.jsx(Z,{lang:s.origLang})}),e.jsx("span",{className:"mr-1",children:Y[s.origLang]?.text})]})]}),(s.originalStatus||s.originalPubFrom||s.originalPubTill)&&e.jsxs("div",{children:[e.jsx("span",{className:"md:hidden mr-2 text-base-content/50",children:"Publication:"}),e.jsx("span",{className:"hidden md:inline-block mr-2 text-base-content/50",children:"Original Publication:"}),!!s.originalStatus&&e.jsx("span",{className:v({"font-bold uppercase opacity-70":s.originalStatus===E.pending.file,"font-bold uppercase text-success":s.originalStatus===E.ongoing.file,"font-bold uppercase text-error":s.originalStatus===E.hiatus.file,"font-bold uppercase text-warning":s.originalStatus===E.completed.file,"font-bold uppercase opacity-60":s.originalStatus===E.cancelled.file}),children:E[s.originalStatus].text}),(s.originalPubFrom||s.originalPubTill)&&e.jsxs(e.Fragment,{children:[!!s.originalStatus&&e.jsx("span",{className:"text-xs text-base-content/30 px-1",children:"/"}),e.jsxs("span",{children:[s.originalPubFrom||"?","-",s.originalPubTill||"?"]})]})]}),!!s.uploadStatus&&e.jsxs("div",{children:[e.jsxs("span",{className:"md:hidden mr-2 text-base-content/50",children:[oe," Status:"]}),e.jsxs("span",{className:"hidden md:inline-block mr-2 text-base-content/50",children:[oe," Upload Status:"]}),e.jsx("span",{className:v({"font-bold uppercase opacity-70":s.uploadStatus===E.pending.file,"font-bold uppercase text-success":s.uploadStatus===E.ongoing.file,"font-bold uppercase text-error":s.uploadStatus===E.hiatus.file,"font-bold uppercase text-warning":s.uploadStatus===E.completed.file,"font-bold uppercase opacity-60":s.uploadStatus===E.cancelled.file}),children:E[s.uploadStatus].text})]}),!!(s.readDirection&&ce[s.readDirection])&&e.jsxs("div",{children:[e.jsx("span",{className:"mr-2 text-base-content/50",children:"Read Direction:"}),e.jsxs("span",{children:[e.jsx(Je,{name:ce[s.readDirection].icon}),ce[s.readDirection].text]})]})]})}function Rs(n){const{data:t}=n,s={};t.stat_count_views?.forEach(c=>{s[c.field]=c.count});const a={d000:"Total",d360:"360 days",d180:"180 days",d090:"90 days",d030:"30 days",d007:"7 days",h024:"24 hours",h012:"12 hours",h006:"6 hours",h001:"60 minutes"},o=[];for(const[c,l]of Object.entries(a)){const i=s[c]||0;o.push(e.jsxs("span",{className:"whitespace-nowrap",children:[l,": ",G(i)]}))}return o.length?e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsx("div",{className:"flex justify-between items-center select-none",children:e.jsx("b",{className:"text-lg font-bold",children:"Views"})}),e.jsx("div",{className:"flex flex-wrap",children:o.map((c,l)=>e.jsxs(r.Fragment,{children:[c,l<o.length-1&&e.jsx("span",{className:"text-base-content/30 px-1",children:"/"})]},l))})]}):null}function As(n){const{data:t}=n,s=[];return t.stat_count_follows>0&&s.push(e.jsxs("span",{className:"whitespace-nowrap",children:[G(t.stat_count_follows)," follows"]})),t.stat_count_statuss?.length>0&&t.stat_count_statuss.forEach(a=>{a.count>0&&s.push(e.jsxs("span",{className:"whitespace-nowrap",children:[G(a.count)," ",Me[a.field].text]}))}),s.length?e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsx("div",{className:"flex justify-between items-center select-none",children:e.jsx("b",{className:"text-lg font-bold",children:"Readers"})}),e.jsx("div",{className:"flex flex-wrap",children:s.map((a,o)=>e.jsxs(r.Fragment,{children:[a,o<s.length-1&&e.jsx("span",{className:"text-base-content/30 px-1",children:"/"})]},o))})]}):null}function Hs(n){const{sess:t,data:s}=n;return e.jsxs("div",{className:"mt-5 space-y-3",children:[e.jsx("div",{className:"flex justify-between items-center select-none",children:e.jsxs("b",{className:"text-lg font-bold",children:[oe," Page Creation"]})}),e.jsxs("div",{className:"whitespace-pre-wrap",children:[s.userNode?e.jsx("a",{className:"link link-hover link-primary",href:s.userNode.data.urlPath,children:s.userNode.data.name}):e.jsx(V,{name:"robot"}),e.jsx("em",{children:" at "}),e.jsx(Xe,{time:s.dateCreate}),e.jsx("em",{children:" GMT"})]})]})}function Os(n){const{sess:t,comicNode:s}=n,a=s,o=a.data;return e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex",children:[e.jsx($s,{sess:t,node:a}),e.jsx("div",{className:"grow pl-3 space-y-2 md:hidden",children:e.jsx(be,{sess:t,node:a})})]}),e.jsxs("div",{className:"mt-3 md:mt-0 md:pl-3 grow grid gap-3 grid-cols-1 lg:grid-cols-3",children:[e.jsx("div",{className:"space-y-2 hidden md:block",children:e.jsx(be,{sess:t,node:a})}),e.jsx("div",{className:"space-y-2",children:e.jsx(Bs,{sess:t,data:o})}),e.jsxs("div",{className:"md:max-lg:grid md:max-lg:grid-cols-2 md:max-lg:gap-3",children:[e.jsx("div",{children:e.jsx(Fs,{data:o})}),e.jsx("div",{children:e.jsx(Qe,{data:o,height:50})})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsx(Ye,{children:e.jsxs("div",{children:[e.jsx(He,{code:o.summary?.code}),e.jsx(Oe,{code:o.extInfo?.code}),e.jsx(We,{code:o.resInfo?.code}),e.jsx(Rs,{sess:t,data:o}),e.jsx(As,{sess:t,data:o}),e.jsx(Hs,{sess:t,data:o}),e.jsx("div",{className:"h-5"})]})})})]})]})}function Ws(n){const{sess:t}=n,s=M(J),{id:a}=s,o=["get_content_comicNode",a],{data:c,isLoading:l,isFetching:i,isRefetching:d,isSuccess:u,isError:m,refetch:g}=pe(o,()=>Ae({id:a},{with_data_page:!0,with_comicStats:!0,with_sser_follow:!0,with_sser_markerStats:!0}));return i||!c?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{className:"btn btn-sm",disabled:!0,children:e.jsx("span",{className:"loading loading-spinner loading-xs"})})}):m?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{className:"btn btn-sm btn-error",onClick:g,children:"Error... Click here to Try Again!"})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(Os,{sess:t,comicNode:c}),e.jsx(Ze,{sess:t,comicNode:c})]})}function zs(n){const{sess:t}=n,s=M(J);return e.jsx("div",{className:"modal-body",children:s.type==="comic"&&e.jsx(Ws,{sess:t})})}function Us(n){const{sess:t}=n,s=M(J),a=!!s;return r.useEffect(()=>{D(a)},[a]),e.jsx("div",{className:v("modal",{"modal-open":a}),onClick:()=>J(null),children:a&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-2xl",children:e.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("h5",{className:"text-lg font-bold capitalize",children:[s?.type," info"]})}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>J(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(zs,{sess:t})]})})})}function Gs(n){return e.jsx(Us,{...n})}async function Qs(n={},t=null){const s=B`
  mutation mut_marking_upsert_block($comicId: ID!, $block: Boolean) {
    mut_marking_upsert_block(comicId: $comicId, block: $block) {
      err tof
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_block}function Ks(n){return e.jsx(Js,{...n})}function Js(n){const t=M(ee),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>ee(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"Manga Blocking"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>ee(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(Ys,{val_data:t})]})})})}function Ys(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,l=a||!1,[i,d]=r.useState(!1),u=W(),m=T(Qs,{onSuccess:_=>{if(o?.length)for(const j of o)u.invalidateQueries(j);const{err:b,tof:x}=_;if(b){S({style:"error",content:"System error, try again later please."}),d(!1);return}S({style:"success",content:"Done!"}),d(!1),ee(null)},onError:_=>{d(!1)}});function g(){d(!0),m.mutate({comicId:s,block:!l})}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:"Please confirm your action."}),e.jsx("div",{children:e.jsxs("button",{className:v("btn btn-sm",{"btn-success":l,"btn-error":!l}),onClick:g,children:[!!i&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),l?"Unblock":"Add to block list"]})})]})})})}async function Xs(n={},t=null){const s=B`
  mutation mut_marking_upsert_ctags($comicId: ID!, $ctags: [String]) {
    mut_marking_upsert_ctags(comicId: $comicId, ctags: $ctags) {
      err 
      ast
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_ctags}const Ie=10,xe=2,he=38;function Zs(n){return e.jsx(et,{...n})}function et(n){const t=M(ie),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"My Tags"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>ie(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(st,{val_data:t})]})})})}function st(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,l=a||[],[i,d]=r.useState(()=>l),[u,m]=r.useState(()=>Ne(l)),[g,_]=r.useState(!1);r.useEffect(()=>{m(Ne(l)),d(l||[])},[t]);const b=W(),x=T(Xs,{onSuccess:h=>{if(o?.length)for(const q of o)b.invalidateQueries(q);const{err:k,str:P}=h;if(k){S({style:"error",content:"System error, try again later please."}),_(!1);return}S({style:"success",content:"Done!"}),_(!1),ie(null)},onError:h=>{_(!1)}});function j(h){const k=h.target.value;m(k),d(tt(k))}function y(){_(!0),x.mutate({comicId:s,ctags:i})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body",children:e.jsx("form",{children:e.jsxs("div",{className:"form-control",children:[e.jsx("textarea",{className:"textarea h-48 textarea-bordered",value:u,onChange:j}),i.length>0&&e.jsx("div",{className:"mt-3",children:i.map(h=>e.jsx("span",{className:"mr-2 badge badge-primary badge-outline",children:h},h))}),e.jsx("div",{className:"mt-3 prose prose-sm",children:e.jsxs("ul",{className:"list-disc",children:[e.jsx("li",{children:"one tag per line."}),e.jsxs("li",{children:["up to ",Ie," tags per user per comic."]}),e.jsxs("li",{children:[xe,"-",he," characters in length."]}),e.jsxs("li",{children:["all tags will be converted to lowercase by default. for proper nouns, like",e.jsx("span",{className:"badge badge-secondary ml-0.5 mt-0",children:"USA"}),e.jsx("span",{className:"badge badge-secondary ml-0.5 mt-0",children:"China"}),e.jsx("span",{className:"badge badge-secondary ml-0.5 mt-0",children:"Google"}),", add ",e.jsx("span",{className:"badge badge-secondary ml-0.5 mt-0",children:"\\"})," at the beginning of the line to keep case. e.g. ",e.jsx("span",{className:"badge badge-secondary ml-0.5 mt-0",children:"\\The Moon"})]})]})})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:JSON.stringify(l)===JSON.stringify(i),onClick:y,children:[!!g&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})})]})}function Ne(n){let t="";return n?.length&&(t=n.map(s=>String(s).toLowerCase().trim()!==String(s).trim()?"\\"+s:s).join(`
`)),t}function tt(n){let t=String(n).split(`
`).map(s=>{if(!s)return null;if(s=String(s).trim(),s.startsWith("\\")){if(s.length<xe+1)return null;s=s.substring(1,he+1)}else{if(s.length<xe)return null;s=s.substring(0,he).toLowerCase()}return s=s.trim(),s}).filter(s=>s);return t=Array.from(new Set(t)).slice(0,Ie),t}async function at(n={},t=null){const s=B`
  mutation mut_marking_upsert_emotion($comicId: ID!, $emotion: String) {
    mut_marking_upsert_emotion(comicId: $comicId, emotion: $emotion) {
      err str
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_emotion}function nt(n){return e.jsx(ot,{...n})}function ot(n){const t=M(se),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>se(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"My Emotion"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>se(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(lt,{val_data:t})]})})})}function lt(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,c="",l=a||c,[i,d]=r.useState(()=>l),[u,m]=r.useState(!1);r.useEffect(()=>{d(l)},[t]);const g=W(),_=T(at,{onSuccess:x=>{if(o?.length)for(const h of o)g.invalidateQueries(h);const{err:j,str:y}=x;if(j){S({style:"error",content:"System error, try again later please."}),m(!1);return}S({style:"success",content:"Done!"}),d(y||c),m(!1),se(null)},onError:x=>{m(!1)}});function b(){m(!0),_.mutate({comicId:s,emotion:i})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body",children:e.jsx("form",{children:Object.values(es).map(x=>e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start",children:[e.jsx("input",{type:"radio",name:"status",className:"radio radio-primary",value:x.file,checked:i===x.file,onChange:()=>d(x.file)}),e.jsx("span",{className:"ml-3 label-text",children:x.text})]})},x.file))})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:i===l,onClick:b,children:[!!u&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})})]})}async function rt(n={},t=null){const s=B`
  mutation mut_marking_upsert_mylists($comicId: ID!, $listIds: [ID]) {
    mut_marking_upsert_mylists(comicId: $comicId, listIds: $listIds) {
      err str ast
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_mylists}function ct(n){return e.jsx(it,{...n})}function it(n){const t=M(te),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>te(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-md",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("h5",{className:"text-lg font-bold",children:["My ",ue]})}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>te(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(dt,{val_data:t})]})})})}function dt(n){const{val_data:t}=n,{rqKeys:s,comicId:a,value:o}=t,c=[],l=Array.isArray(o)?o:c,[i,d]=r.useState(()=>l),[u,m]=r.useState(!1);r.useEffect(()=>{d(l)},[t]);const g="sser",_=["get_marking_mylistList",g],b=W(),{data:x,isLoading:j,isFetching:y,isRefetching:h,isSuccess:k,isError:P,refetch:q}=pe(_,()=>ss({where:g},{with_data_lite:!0})),A=j||y||h,H=x?.items?.length?x.items:[],z=T(rt,{onSuccess:w=>{if(s?.length)for(const $ of s)b.invalidateQueries($);b.invalidateQueries(_);const{err:p,tof:N,ast:f}=w;if(p){S({style:"error",content:"System error, try again later please."}),m(!1);return}S({style:"success",content:"Done!"}),d(f||c),m(!1),te(null)},onError:w=>{m(!1)}});function Q(w){const p=w.target.value;w.target.checked;let N=Array.from(i);i.includes(p)?N=N.filter(f=>f!==p):N.push(p),d(N)}function I(){m(!0),z.mutate({comicId:a,listIds:i})}function F(w,p){let N=Array.from(w).sort(),f=Array.from(p).sort();return JSON.stringify(N)===JSON.stringify(f)}function O(w){return A?e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx("button",{className:"btn btn-ghost btn-square loading"})}):P?e.jsx("div",{className:"flex justify-center items-center w-full h-full",children:e.jsx("button",{className:"btn btn-xs btn-error",onClick:q,children:"Try again"})}):H.length?e.jsx("form",{className:"block space-y-1",onSubmit:p=>(p.preventDefault(),!1),children:H.map(p=>p.data).map(p=>e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:v("cursor-pointer label justify-start",{"bg-red-500/10":!p.isPublic,"bg-green-500/10":p.isPublic===1,"bg-yellow-500/10":p.isPublic===2}),children:[e.jsx("input",{type:"checkbox",name:"mylists",className:"checkbox checkbox-primary",value:p.id,checked:i.includes(p.id),onChange:Q}),e.jsxs("span",{className:"ml-3 label-text",children:[p.name," ",e.jsxs("span",{className:"text-xs opacity-60",children:["(",p.count_comicIds,")"]})]})]})},p.id))}):e.jsxs("div",{className:"w-full h-full",children:[e.jsxs("div",{children:["You dont have ",Ue," yet."]}),e.jsxs("a",{className:"link link-primary",href:"/my/batolists",target:"_blank",children:["Manage my ",ue," here"]})]})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body",children:e.jsx(O,{})}),e.jsxs("div",{className:"modal-footer space-x-3",children:[e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:F(l,i),onClick:I,children:[!!u&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Save"]}),e.jsxs("a",{className:"btn btn-sm btn-ghost space-x-1",href:"/my/batolists",children:[e.jsx(C,{name:"wrench"}),e.jsxs("span",{children:["My ",ue]})]})]})]})}async function mt(n={},t=null){const s=B`
  mutation mut_marking_upsert_note($comicId: ID!, $note: String) {
    mut_marking_upsert_note(comicId: $comicId, note: $note) {
      err str
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_note}function ut(n){return e.jsx(xt,{...n})}function xt(n){const t=M(de),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-2xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"My Private Note"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>de(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(ht,{val_data:t})]})})})}function ht(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,c="",l=a||c,[i,d]=r.useState(()=>l),[u,m]=r.useState(!1);r.useEffect(()=>{d(l)},[t]);const g=W(),_=T(mt,{onSuccess:j=>{if(o?.length)for(const k of o)g.invalidateQueries(k);const{err:y,str:h}=j;if(y){S({style:"error",content:"System error, try again later please."}),m(!1);return}S({style:"success",content:"Done!"}),d(h||c),m(!1),de(null)},onError:j=>{m(!1)}});function b(j){d(j||c)}function x(){m(!0),_.mutate({comicId:s,note:i})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-body",children:[e.jsx(Ce,{editorId:"note",innerText:l,onChange:b,submitTitle:null,enableImgBtn:!0}),!!i&&e.jsx("div",{className:"mt-3",children:e.jsx(ts,{code:i})})]}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:i===l,onClick:x,children:[!!u&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})})]})}async function pt(n={},t=null){for(const o of Object.keys(n))switch(o){case"score":n[o]=Number.parseInt(n[o],10)||0;break}const s=B`
  mutation mut_marking_upsert_score($comicId: ID!, $score: Int) {
    mut_marking_upsert_score(comicId: $comicId, score: $score) {
      err int
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_score}function ft(n){return e.jsx(gt,{...n})}function gt(n){const t=M(ae),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>ae(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"My Score"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>ae(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(jt,{val_data:t})]})})})}function jt(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,c=0,l=a||c,[i,d]=r.useState(()=>l),[u,m]=r.useState(!1);r.useEffect(()=>{d(l)},[t]);const g=W(),_=T(pt,{onSuccess:x=>{if(o?.length)for(const h of o)g.invalidateQueries(h);const{err:j,int:y}=x;if(j){S({style:"error",content:"System error, try again later please."}),m(!1);return}S({style:"success",content:"Done!"}),d(y||c),m(!1),ae(null)},onError:x=>{m(!1)}});function b(){m(!0),_.mutate({comicId:s,score:i})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body",children:e.jsx("form",{children:Object.values(as).sort((x,j)=>j.file-x.file).map(x=>e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start",children:[e.jsx("input",{type:"radio",name:"score",className:"radio radio-primary",value:x.file,checked:i===x.file,onChange:()=>d(x.file)}),e.jsxs("span",{className:"ml-3 label-text",children:["(",x.file,") ",x.text]})]})},x.file))})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:i===l,onClick:b,children:[!!u&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})})]})}async function _t(n={},t=null){const s=B`
  mutation mut_marking_upsert_status($comicId: ID!, $status: String) {
    mut_marking_upsert_status(comicId: $comicId, status: $status) {
      err str
    }
  }
  `;return(await R().rawRequest(s,n)).data.mut_marking_upsert_status}function bt(n){return e.jsx(Nt,{...n})}function Nt(n){const t=M(ne),s=!!t;return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),onClick:()=>ne(null),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"My Reading Status"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>ne(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(yt,{val_data:t})]})})})}function yt(n){const{val_data:t}=n,{comicId:s,value:a,rqKeys:o}=t,c="",l=a||c,[i,d]=r.useState(()=>l),[u,m]=r.useState(!1);r.useEffect(()=>{d(l)},[t]);const g=W(),_=T(_t,{onSuccess:x=>{if(o?.length)for(const h of o)g.invalidateQueries(h);const{err:j,str:y}=x;if(j){S({style:"error",content:"System error, try again later please."}),m(!1);return}S({style:"success",content:"Done!"}),d(y||c),m(!1),ne(null)},onError:x=>{m(!1)}});function b(){m(!0),_.mutate({comicId:s,status:i})}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body",children:e.jsx("form",{children:Object.values(Me).map(x=>e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label justify-start",children:[e.jsx("input",{type:"radio",name:"status",className:"radio radio-primary",value:x.file,checked:i===x.file,onChange:()=>d(x.file)}),e.jsx("span",{className:"ml-3 label-text",children:x.text})]})},x.file))})}),e.jsx("div",{className:"modal-footer",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:i===l,onClick:b,children:[!!u&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Submit"]})})]})}function vt(n){const{userNode:t,comicNode:s,chapterNode:a,reviewNode:o,commentPost:c}=n||{};return t?.data?{type:"user",node:t,data:t.data}:s?.data?{type:"comic",node:s,data:s.data}:a?.data?{type:"chapter",node:a,data:a.data}:o?.data?{type:"review",node:o,data:o.data}:c?.data?{type:"comment",node:c,data:c.data}:{}}function kt(n){return e.jsxs("div",{className:"collapse collapse-arrow border border-info bg-info text-info-content rounded-box",children:[e.jsx("input",{type:"checkbox",className:"peer"}),e.jsx("div",{className:"collapse-title text-xl font-medium",children:"Instructions"}),e.jsx("div",{className:"collapse-content",children:e.jsxs("ul",{className:"p-3 list-disc list-inside bg-info text-info-content",children:[e.jsx("li",{className:"list-item",children:"For problems with wrong content, such as Wrong manga information, Wrong chapter numbers, Wrong images order, Chapter missing pages, Spoiler in reviews/comments without spoiler tags, etc., please use the [Send Message] button on the users profile page to info the user."}),e.jsx("li",{className:"list-item",children:"Usually, only submit a report if the issue requires moderator intervention."})]})})]})}function wt(n){const t=M(me),{type:s,data:a,node:o}=vt(t);return s?e.jsx(St,{type:s,data:a,node:o}):null}function St(n){const t=ve(),{_sser:s}=t,{type:a,data:o,node:c}=n,[l,i]=r.useState(0),[d,u]=r.useState(()=>Object.values(je[a])[0].file),[m,g]=r.useState(""),_=T(os,{onSuccess:h=>{const{err:k,str:P}=h;if(k){switch(k){case"hit_report_flood":{S({style:"error",content:"There are already 3 unsolved reports for this target. The system will stop accepting new reports for this target until the moderator has solved these existing reports."});break}default:{S({style:"error",content:"System error, try again later please."});break}}i(0);return}S({style:"success",content:"Done!"}),i(2)},onError:h=>{i(0)}});function b(h){u(h.target.value)}function x(h){g(h)}function j(){if(d==="other"&&!m?.length)return;i(1);const h={type:a,reason:d,explanation:m};switch(a){case"user":h.userId=o.id;break;case"chapter":h.chapterId=o.id;break;case"comic":h.comicId=o.id;break;case"review":h.reviewId=o.id;break;case"comment":h.commentId=o.id;break}_.mutate(h)}const y=d==="other"&&!m?.length||l;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal-body select-nonex",children:e.jsxs("div",{className:"space-y-5",children:[e.jsx(kt,{}),e.jsx(Mt,{...n}),e.jsx("div",{children:e.jsx("a",{className:"link link-primary",href:`/reports?where=by_me&queryId=${s.uid}`,target:"_blank",children:"View reports I submited"})}),e.jsxs("div",{className:"form-control w-full",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Reason"})}),e.jsx("select",{className:"select select-bordered",value:d,onChange:b,children:Object.values(je[a]||{}).map(h=>e.jsx("option",{value:h.file,children:h.text},h.file))})]}),e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label",children:[e.jsxs("span",{className:"label-text space-x-1",children:[e.jsx("span",{children:"Explanation"}),d==="other"?e.jsx("span",{className:"text-red-500",children:"(Required)"}):e.jsx("span",{className:"opacity-50",children:"(Optional)"})]}),e.jsx("span",{className:"label-text-alt",children:m?.length||0})]}),e.jsx(Ce,{onChange:x,enableImgBtn:!0,submitTitle:null})]})]})}),e.jsx("div",{className:"modal-footer space-x-3",children:e.jsxs("button",{className:"btn btn-sm btn-primary",disabled:y,onClick:j,children:[l===1&&e.jsx("span",{className:"loading loading-spinner loading-xs"}),l===2?"Report submited":"Submit Report"]})})]})}function Mt(n){const{type:t,data:s,node:a}=n,o=ve();if(t==="user")return e.jsxs("div",{className:" space-y-3",children:[e.jsx("div",{className:"font-bold",children:"Reporting user:"}),e.jsx(ns,{sess:o,userData:s,className:"w-28 h-28"}),e.jsx("div",{children:e.jsx("a",{className:"link link-primary",href:s.urlPath,target:"_blank",children:s.name})})]});if(t==="comic")return e.jsxs("div",{className:" space-y-3",children:[e.jsx("div",{className:"font-bold",children:"Reporting comic:"}),e.jsx("div",{children:e.jsx("a",{className:"link link-primary",href:s.urlPath,target:"_blank",children:s.name})})]});if(t==="chapter"){const c=s.comicNode?.data;return e.jsxs("div",{className:" space-y-3",children:[e.jsx("div",{className:"font-bold",children:"Reporting chapter:"}),e.jsxs("div",{children:[!!c&&e.jsx("a",{className:"link link-pri mr-1",href:c.urlPath,target:"_blank",children:c.name}),e.jsx("a",{className:"link link-primary font-bold",href:s.urlPath,target:"_blank",children:s.dname})]})]})}}function Ct(n){const s=!!M(me);return r.useEffect(()=>{D(s)},[s]),e.jsx("div",{className:v("modal",{"modal-open":s}),children:s&&e.jsx("div",{className:"modal-dialog modal-dialog-scrollable max-w-screen-2xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"text-lg font-bold",children:"Report To Moderators"}),e.jsx("button",{className:"btn btn-xs btn-square btn-error",onClick:()=>me(null),children:e.jsx(C,{name:"close",size:20})})]}),e.jsx(wt,{})]})})})}function Pt(n){return e.jsx(Ct,{})}function It(n){return r.useEffect(()=>{const{sess:t}=n,{_coks:s}=t;if(!s.theme){const a="(prefers-color-scheme: dark)";if(window.matchMedia(a).matches){const l="dark";Ve.set(l),Se("theme",l),Re(l)}}},[]),null}function Dt(n){const[t,s]=r.useState(!1);return r.useEffect(()=>{const a=setTimeout(function(){const o="cronjobs",c=Number(rs(o)||0)||0,l=Date.now();l-c>36e5&&(cs(o,l),s(!0))},1e4);return()=>clearTimeout(a)},[]),r.useEffect(()=>{if(t){const a=document.createElement("script");a.src="/aro/cronjobs.js",a.async=!0,document.body.appendChild(a)}},[t]),null}function un(n){const{sess:t,embed:s}=n,{_sser:a}=t;return e.jsxs(ye,{sess:t,children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx(xs,{sess:t}),e.jsx(Gs,{sess:t})]}),a.uid?e.jsxs(e.Fragment,{children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx(js,{sess:t}),e.jsx(Ks,{sess:t}),e.jsx(Zs,{sess:t}),e.jsx(nt,{sess:t}),e.jsx(ct,{sess:t}),e.jsx(ut,{sess:t}),e.jsx(ft,{sess:t}),e.jsx(bt,{sess:t})]}),e.jsx(Pt,{sess:t}),e.jsx(ls,{sess:t})]}):e.jsx(ds,{sess:t}),!s&&e.jsxs(e.Fragment,{children:[e.jsx(Ls,{sess:t}),e.jsx(It,{sess:t})]}),e.jsx(Ns,{sess:t}),e.jsx(hs,{sess:t}),e.jsx(Dt,{sess:t})]})}export{un as default};

</script>

</body>
</html>
