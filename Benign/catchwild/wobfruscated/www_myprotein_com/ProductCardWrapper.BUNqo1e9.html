<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ProductCardWrapper.BUNqo1e9.html</title>
</head>
<body>
<script>import{f as L,t as u,u as S,i as A}from"./index.CT4hP_Fn.js";import{b as y,c as q,d as b,e as T}from"./GlobalDispatchAndDateCountdownWidget.astro_astro_type_script_index_0_lang.DJu3yDdL.js";import{V as F}from"./Variation.s44fb9oC.js";function f(){class h extends HTMLElement{maxInputValue;currentCounterValue;stickyATB;constructor(){super(),this.decrementButton=this.querySelector("#decrease-quantity"),this.incrementButton=this.querySelector("#increase-quantity"),this.quantityInputElement=this.querySelector("#quantity"),this.maxPerOrderInfo=this.querySelector("#max-per-order-info"),this.isQuickBuy=this.dataset.isquickbuy==="true",this.stickyATB=this.isQuickBuy?this.closest("#quickbuy-modal-content")?.querySelector("#sticky-atb-btn"):document.getElementById("sticky-atb-btn"),this.addToBasketButton=this.closest("[data-main-container-id]")?.querySelector("#add-to-basket"),this.currentCounterValue=parseInt(this.quantityInputElement.value),this.maxInputValue=parseInt(this.quantityInputElement.getAttribute("max")),this.updateButtonState=this.updateButtonState.bind(this),this.updateCount=this.updateCount.bind(this),this.decrementButton?.addEventListener("click",()=>this.updateCount(-1)),this.incrementButton?.addEventListener("click",()=>this.updateCount(1)),this.quantityInputElement.addEventListener("change",this.updateButtonState),this.updateButtonState()}updateCount(t){this.currentCounterValue+=t,this.currentCounterValue<1&&(this.currentCounterValue=1),this.quantityInputElement.value=this.currentCounterValue,this.stickyATB&&(this.stickyATB.dataset.quantity=this.currentCounterValue),this.updateButtonState()}updateButtonState(){this.currentCounterValue=parseInt(this.quantityInputElement.value),this.quantityInputElement.value<1&&(this.currentCounterValue=1,this.quantityInputElement.value=1);const t=this.maxInputValue&&this.currentCounterValue>=this.maxInputValue;this.decrementButton.disabled=this.currentCounterValue<=1,this.incrementButton.disabled=t,t?this.maxPerOrderInfo?.classList.remove("hidden"):this.maxPerOrderInfo?.classList.add("hidden"),this.addToBasketButton&&window.Tracker.store.products[this.addToBasketButton.dataset.sku]&&(window.Tracker.store.products[this.addToBasketButton.dataset.sku].quantity=this.currentCounterValue),this.incrementButton.setAttribute("aria-disabled",t.toString()),this.decrementButton.setAttribute("aria-disabled",(this.currentCounterValue<=1).toString()),this.quantityInputElement.setAttribute("value",this.currentCounterValue.toString())}}customElements.get("counter-wrapper")||customElements.define("counter-wrapper",h)}function W(){class h extends HTMLElement{originalPictures;originalImages;colorSwatches;colorSwatchContainer;wishlistBtn;originalImage;currentSku;papBanner;constructor(){super(),this.originalImages=this.querySelectorAll(".first-image"),this.originalPictures=this.querySelectorAll("picture source"),this.colorSwatches=this.querySelectorAll(".color-swatch"),this.colorSwatchContainer=this.querySelector(".color-swatch-list"),this.wishlistBtn=this.querySelector(".plp-wishlist-btn"),this.originalImage=this.querySelector(".first-image"),this.currentSku=this.wishlistBtn?.dataset?.currentsku;const t=this.querySelector(".plp-size-options-btn"),e=this.querySelector(".plp-size-options-overlay"),i=this.querySelector(".close-size-options-btn"),a=e?.querySelectorAll(".plp-size-option"),s=this.querySelector(".hover-card-wrapper");s&&(s.addEventListener("mouseenter",n),s.addEventListener("mouseleave",r),s.addEventListener("focusin",l));let c,d=!1;window.sharedFunctions||(window.sharedFunctions={}),window.sharedFunctions?.addToBasket||(window.sharedFunctions.addToBasket=y),window.sharedFunctions.initQuantitySelector||(window.sharedFunctions.initQuantitySelector=f),window.sharedFunctions.addToBasketBtn||(window.sharedFunctions.addToBasketBtn=q),window.sharedFunctions.subscriptionATB||(window.sharedFunctions.subscriptionATB=b),window.sharedFunctions.fetchFragment||(window.sharedFunctions.fetchFragment=L),window.sharedFunctions.Variation||(window.sharedFunctions.Variation=F);async function n(){await p()}function r(){m()}async function l(){await p()}const p=async()=>{if(s.classList.add("hover-loading-card"),s.setAttribute("data-active","true"),!d){const w=this.querySelector(".dynamic-content-wrapper");await window.sharedFunctions.fetchFragment("/fragments/hoverProductCardFragment",w,{sku:E}),d=!0}s.classList.remove("hover-loading-card")};function m(){clearTimeout(c),s.classList.remove("hover-loading-card"),s&&s.removeAttribute("data-active")}if(t&&e){i.addEventListener("click",o=>{e.classList.add("hidden")}),a&&a.forEach(o=>{o.addEventListener("click",()=>{const k=o.getAttribute("data-currentsku");w(k)})});async function w(o){try{await window.sharedFunctions.addToBasket({sku:o,quantity:1}).then(()=>{window.Tracker.handlers.addToCart(o)})}catch(k){console.error(k.message)}}t.addEventListener("click",o=>{o.stopPropagation(),document.querySelectorAll(".plp-size-options-overlay:not(.hidden)").forEach(v=>{v.classList.add("hidden")}),e.classList.remove("hidden");const C=v=>{e.contains(v.target)||(e.classList.add("hidden"),document.removeEventListener("click",C))};document.addEventListener("click",C)})}document.addEventListener("keydown",({key:w})=>{w==="Escape"&&e.classList.add("hidden")}),this.papBanner=this.querySelector(".pap-banner"),this.papBanner?.addEventListener("click",async()=>{window.Tracker.handlers.promoClick({promotion:this.papBanner.innerText}),u("/fragments/papModalContentFragment",{title:this.papBanner?.innerHTML,description:this.papBanner?.dataset?.description,link:this.papBanner?.dataset?.link,buttonText:this.papBanner?.dataset?.text})});const g=this.querySelector(".quick-buy"),E=g?.dataset?.sku||this.dataset.quicklook;window?.tenantConfig?.features?.hasQuickBuy&&(window.sharedFunctions.initQuantitySelector=f,g?.addEventListener("click",()=>{u("/fragments/quickBuyModalContentFragment",{sku:E})}))}connectedCallback(){this.wishlistBtn?.addEventListener("click",this.handlePlpWishlistBtnClick)}disconnectedCallback(){this.wishlistBtn?.removeEventListener("click",this.handlePlpWishlistBtnClick)}handlePlpWishlistBtnClick=async()=>{T.get()?this.wishlistBtn?.firstElementChild?.classList.value.includes("inWishlist")?(await S({operation:"RemoveProductFromWishlist",variables:{sku:this.currentSku}})).data.removeProductFromWishlist&&(window.Tracker.handlers.wishlistRemove(this.currentSku),this.wishlistBtn?.firstElementChild?.classList?.remove("inWishlist")):(await S({operation:"AddProductToWishlist",variables:{sku:this.currentSku}}))?.data?.addProductToWishlist&&(window.Tracker.handlers.wishlistAdded(this.currentSku),this.wishlistBtn?.firstElementChild?.classList?.add("inWishlist")):u("/fragments/wishlistModalContentFragment",{sku:this.currentSku,url:this.wishlistBtn.dataset.url,title:this.wishlistBtn.dataset.title,image:this.wishlistBtn.dataset.image})}}!customElements.get("hover-product-card-wrapper")&&customElements.define("hover-product-card-wrapper",h)}function P(){class h extends HTMLElement{originalPictures;originalImages;colorSwatches;colorSwatchContainer;wishlistBtn;originalImage;currentSku;papBanner;variantContainer;constructor(){super(),this.variantContainer=this.querySelector("variation-container"),this.originalImages=this.querySelectorAll(".first-image"),this.originalPictures=this.querySelectorAll("picture source"),this.colorSwatches=this.querySelectorAll(".color-swatch"),this.colorSwatchContainer=this.querySelector(".color-swatch-list"),this.imageAnchor=this.querySelector('[data-name="image-anchor"]'),this.wishlistBtn=this.querySelector(".plp-wishlist-btn"),this.originalImage=this.querySelector(".first-image"),this.currentSku=this.wishlistBtn?.dataset?.currentsku;const t=this.querySelector(".plp-size-options-btn"),e=this.querySelector(".plp-size-options-overlay"),i=this.querySelector(".close-size-options-btn"),a=e?.querySelectorAll(".plp-size-option");if(t&&e){i.addEventListener("click",r=>{e?.classList.add("hidden")}),a&&a.forEach(r=>{r.addEventListener("click",()=>{const l=r.getAttribute("data-currentsku");n(l)})});async function n(r){try{await y([{sku:r,quantity:1}])}catch(l){console.error(l.message)}}t.addEventListener("click",r=>{r.stopPropagation(),document.querySelectorAll(".plp-size-options-overlay:not(.hidden)").forEach(m=>{m.classList.add("hidden")}),e.classList.remove("hidden");const p=m=>{e.contains(m.target)||(e?.classList.add("hidden"),document.removeEventListener("click",p))};document.addEventListener("click",p)})}document.addEventListener("keydown",({key:n})=>{n==="Escape"&&e?.classList?.add("hidden")}),this.originalImage&&("ontouchstart"in window?(this.originalImage.addEventListener("touchstart",n=>{this.handleImageSwitchMouseenter()}),this.originalImage.addEventListener("touchend",n=>{this.handleImageSwitchMouseleave()})):(this.originalImage.addEventListener("mouseenter",n=>{this.handleImageSwitchMouseenter()}),this.originalImage.addEventListener("mouseleave",n=>{this.handleImageSwitchMouseleave()})));const s=this.querySelector(".show-more-colors"),c=this.querySelector(".color-swatch-list");s&&s.addEventListener("click",()=>{c.classList.remove("[&>*:nth-child(1n+5):not(.show-more-color-swatches-btn)]:hidden"),s.classList.add("hidden")}),this.papBanner=this.querySelector(".pap-banner"),this.papBanner?.addEventListener("click",async()=>{window.Tracker.handlers.promoClick({promotion:this.papBanner.innerText}),u("/fragments/papModalContentFragment",{title:this.papBanner?.innerHTML,description:this.papBanner?.dataset?.description,link:this.papBanner?.dataset?.link,buttonText:this.papBanner?.dataset?.text})});const d=this.querySelector(".quick-buy");if(window?.tenantConfig?.features?.hasQuickBuy&&d){const n=d.dataset.sku;window.sharedFunctions||(window.sharedFunctions={}),window.sharedFunctions.isInViewport=A,window.sharedFunctions.addToBasket=y,window.sharedFunctions.initQuantitySelector=f,window.sharedFunctions.addToBasketBtn=q,window.sharedFunctions.subscriptionATB=b,window.sharedFunctions.fetchFragment=L,window.sharedFunctions.Variation=F,d?.addEventListener("click",()=>{u("/fragments/quickBuyModalContentFragment",{sku:n})})}}connectedCallback(){this.wishlistBtn?.addEventListener("click",this.handlePlpWishlistBtnClick),this.colorSwatches.forEach(t=>{t.addEventListener("mouseenter",()=>{this.handleColourSwatchMouseenter(t)}),t.addEventListener("mouseleave",e=>{this.handleColourSwatchMouseLeave(e)})})}disconnectedCallback(){this.wishlistBtn?.removeEventListener("click",this.handlePlpWishlistBtnClick),this.colorSwatches.forEach(t=>{t.removeEventListener("mouseenter",()=>{this.handleColourSwatchMouseenter(t)}),t.removeEventListener("mouseleave",e=>{this.handleColourSwatchMouseLeave(e)})})}handlePlpWishlistBtnClick=async()=>{T.get()?this.wishlistBtn?.firstElementChild?.classList.value.includes("inWishlist")?(await S({operation:"RemoveProductFromWishlist",variables:{sku:this.currentSku}})).data.removeProductFromWishlist&&(window.Tracker.handlers.wishlistRemove(this.currentSku),this.wishlistBtn?.firstElementChild?.classList?.remove("inWishlist")):(await S({operation:"AddProductToWishlist",variables:{sku:this.currentSku}}))?.data?.addProductToWishlist&&(window.Tracker.handlers.wishlistAdded(this.currentSku),this.wishlistBtn?.firstElementChild?.classList?.add("inWishlist")):u("/fragments/wishlistModalContentFragment",{sku:this.currentSku,url:this.wishlistBtn.dataset.url,title:this.wishlistBtn.dataset.title,image:this.wishlistBtn.dataset.image})};handleImageSwitchMouseenter=()=>{if(!this.imageAnchor.dataset.secondarySrc)return;const t=this.imageAnchor.dataset.secondarySrc;this.switchImage(t)};handleImageSwitchMouseleave=()=>{this.imageAnchor.dataset.secondarySrc&&this.resetImage()};handleColourSwatchMouseenter=t=>{const e=t.dataset?.src;e&&(this.originalPictures.forEach(i=>{i.dataset?.originalSrcset||(i.dataset.originalSrcset=i.srcset),i.setAttribute("srcset",e)}),this.originalImages.forEach(i=>{i.dataset?.originalSrc||(i.dataset.originalSrc=i.src),i.setAttribute("src",e)}))};handleColourSwatchMouseLeave=t=>{this.colorSwatchContainer.contains(t.relatedTarget)||this.resetImage()};switchImage=t=>{t&&(this.originalPictures.forEach(e=>{const i=e.srcset.split("&").slice(1),a=e.srcset.split("?")[0],s=i.join("&"),c=a+"?url="+t+"&"+s;e.dataset?.originalSrcset||(e.dataset.originalSrcset=e.srcset),e.setAttribute("srcset",c)}),this.originalImages.forEach(e=>{const i=e.src.split("&").slice(1),a=e.src.split("?")[0],s=i.join("&"),c=a+"?url="+t+"&"+s;e.dataset?.originalSrc||(e.dataset.originalSrc=e.src),e.setAttribute("src",c)}))};resetImage=()=>{this.originalPictures.forEach(t=>{t.originalSrcset!==t.dataset.originalSrcset&&t.setAttribute("srcset",t.dataset.originalSrcset)}),this.originalImages.forEach(t=>{t.originalSrcset!==t.dataset.originalSrc&&t.setAttribute("src",t.dataset.originalSrc)})}}!customElements.get("product-card-wrapper")&&customElements.define("product-card-wrapper",h)}export{W as h,f as i,P as p};</script>
</body>
</html>
