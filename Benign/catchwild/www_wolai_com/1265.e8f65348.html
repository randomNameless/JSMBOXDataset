<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1265.e8f65348.html</title>
</head>
<body>

<script>
'use strict';(self['webpackChunk_wolai_web']=self['webpackChunk_wolai_web']||[])['push']([[0x4f1],{'FGQ2':(a,b,c)=>{c['d'](b,{'Z':()=>h});var d,f,g=Object['getOwnPropertyNames'];const h=(d={'client.js'(j,k){!function(l,m,p,q){m[l]=p['call'](m);for(var u=0x0;u<q['length'];u++)q[u](m[l]);void 0x0!==k&&k['exports']?k['exports']=m[l]:'function'==typeof define&&c['amdO']&&define(function(){return m[l];});}('Primus',j||{},function(){var l=function(){return function m(p,q,u){function v(y,z){if(!q[y]){if(!p[y]){if(w)return w(y,!0x0);var A=new Error('Cannot\x20find\x20module\x20\x27'+y+'\x27');throw A['code']='MODULE_NOT_FOUND',A;}var B=q[y]={'exports':{}};p[y][0x0]['call'](B['exports'],function(C){return v(p[y][0x1][C]||C);},B,B['exports'],m,p,q,u);}return q[y]['exports'];}for(var w=void 0x0,x=0x0;x<u['length'];x++)v(u[x]);return v;};}()({0x1:[function(m,p,q){p['exports']=function(u,v){var w=/[, ]+/;function x(y,z){if(v[y]){if('string'==typeof v[y]&&(v[y]=v[y]['split'](w)),'function'==typeof v[y])return v[y]['call'](z);for(var A,B,C=0x0;C<v[y]['length'];C++)'function'==(A=typeof(B=v[y][C]))?B['call'](z):'string'===A&&'function'==typeof z[B]&&z[B]();}}return v=v||{},'string'==typeof(u=u||[])&&(u=u['split'](w)),function(){var y,z=this,A=0x0;if(null===z[u[0x0]])return!0x1;for(x('before',z);A<u['length'];A++)z[y=u[A]]&&('function'==typeof z[y]['destroy']&&z[y]['destroy'](),z[y]=null);return z['emit']&&z['emit']('destroy'),x('after',z),!0x0;};};},{}],0x2:[function(m,p,q){p['exports']=function(){for(var u,v=this,w=0x0,x=arguments['length'],y=new Array(x);w<x;w++)y[w]=arguments[w];return'function'!=typeof y[y['length']-0x1]?function(){for(var z=0x0,A=arguments['length'],B=new Array(A);z<A;z++)B[z]=arguments[z];return v['emit']['apply'](v,y['concat'](B));}:(u=y['pop'](),function(){for(var z=0x0,A=arguments['length'],B=new Array(A+0x1);z<A;z++)B[z+0x1]=arguments[z];return B[0x0]=function(C,D){if(C)return v['emit']('error',C);B=void 0x0===D?B['slice'](0x1):null===D?[]:D,v['emit']['apply'](v,y['concat'](B));},u['apply'](v,B),!0x0;});};},{}],0x3:[function(m,p,q){var v=Object['prototype']['hasOwnProperty'],w='~';function x(){}function y(C,D,E){this['fn']=C,this['context']=D,this['once']=E||!0x1;}function z(C,D,E,F,G){if('function'!=typeof E)throw new TypeError('The\x20listener\x20must\x20be\x20a\x20function');var H=new y(E,F||C,G),I=w?w+D:D;return C['_events'][I]?C['_events'][I]['fn']?C['_events'][I]=[C['_events'][I],H]:C['_events'][I]['push'](H):(C['_events'][I]=H,C['_eventsCount']++),C;}function A(C,D){0x0==--C['_eventsCount']?C['_events']=new x():delete C['_events'][D];}function B(){this['_events']=new x(),this['_eventsCount']=0x0;}Object['create']&&(x['prototype']=Object['create'](null),new x()['__proto__']||(w=!0x1)),B['prototype']['eventNames']=function(){var C,D,E=[];if(0x0===this['_eventsCount'])return E;for(D in C=this['_events'])v['call'](C,D)&&E['push'](w?D['slice'](0x1):D);return Object['getOwnPropertySymbols']?E['concat'](Object['getOwnPropertySymbols'](C)):E;},B['prototype']['listeners']=function(C){var D=w?w+C:C,E=this['_events'][D];if(!E)return[];if(E['fn'])return[E['fn']];for(var F=0x0,G=E['length'],H=new Array(G);F<G;F++)H[F]=E[F]['fn'];return H;},B['prototype']['listenerCount']=function(C){var D=w?w+C:C,E=this['_events'][D];return E?E['fn']?0x1:E['length']:0x0;},B['prototype']['emit']=function(C,D,E,F,G,H){var I=w?w+C:C;if(!this['_events'][I])return!0x1;var J,K,L=this['_events'][I],M=arguments['length'];if(L['fn']){switch(L['once']&&this['removeListener'](C,L['fn'],void 0x0,!0x0),M){case 0x1:return L['fn']['call'](L['context']),!0x0;case 0x2:return L['fn']['call'](L['context'],D),!0x0;case 0x3:return L['fn']['call'](L['context'],D,E),!0x0;case 0x4:return L['fn']['call'](L['context'],D,E,F),!0x0;case 0x5:return L['fn']['call'](L['context'],D,E,F,G),!0x0;case 0x6:return L['fn']['call'](L['context'],D,E,F,G,H),!0x0;}for(K=0x1,J=new Array(M-0x1);K<M;K++)J[K-0x1]=arguments[K];L['fn']['apply'](L['context'],J);}else{var N,O=L['length'];for(K=0x0;K<O;K++)switch(L[K]['once']&&this['removeListener'](C,L[K]['fn'],void 0x0,!0x0),M){case 0x1:L[K]['fn']['call'](L[K]['context']);break;case 0x2:L[K]['fn']['call'](L[K]['context'],D);break;case 0x3:L[K]['fn']['call'](L[K]['context'],D,E);break;case 0x4:L[K]['fn']['call'](L[K]['context'],D,E,F);break;default:if(!J){for(N=0x1,J=new Array(M-0x1);N<M;N++)J[N-0x1]=arguments[N];}L[K]['fn']['apply'](L[K]['context'],J);}}return!0x0;},B['prototype']['on']=function(C,D,E){return z(this,C,D,E,!0x1);},B['prototype']['once']=function(C,D,E){return z(this,C,D,E,!0x0);},B['prototype']['removeListener']=function(C,D,E,F){var G=w?w+C:C;if(!this['_events'][G])return this;if(!D)return A(this,G),this;var H=this['_events'][G];if(H['fn'])H['fn']!==D||F&&!H['once']||E&&H['context']!==E||A(this,G);else{for(var I=0x0,J=[],K=H['length'];I<K;I++)(H[I]['fn']!==D||F&&!H[I]['once']||E&&H[I]['context']!==E)&&J['push'](H[I]);J['length']?this['_events'][G]=0x1===J['length']?J[0x0]:J:A(this,G);}return this;},B['prototype']['removeAllListeners']=function(C){var D;return C?(D=w?w+C:C,this['_events'][D]&&A(this,D)):(this['_events']=new x(),this['_eventsCount']=0x0),this;},B['prototype']['off']=B['prototype']['removeListener'],B['prototype']['addListener']=B['prototype']['on'],B['prefixed']=w,B['EventEmitter']=B,void 0x0!==p&&(p['exports']=B);},{}],0x4:[function(m,p,q){'function'==typeof Object['create']?p['exports']=function(u,v){v&&(u['super_']=v,u['prototype']=Object['create'](v['prototype'],{'constructor':{'value':u,'enumerable':!0x1,'writable':!0x0,'configurable':!0x0}}));}:p['exports']=function(u,v){if(v){u['super_']=v;var w=function(){};w['prototype']=v['prototype'],u['prototype']=new w(),u['prototype']['constructor']=u;}};},{}],0x5:[function(m,p,q){var u=new RegExp('^((?:\x5cd+)?\x5c.?\x5cd+)\x20*('+['milliseconds?','msecs?','ms','seconds?','secs?','s','minutes?','mins?','m','hours?','hrs?','h','days?','d','weeks?','wks?','w','years?','yrs?','y']['join']('|')+')?$','i'),v=0x36ee80,w=0x18*v;p['exports']=function(x){var y,z,A=typeof x;if('number'===A)return x;if('string'!==A||'0'===x||!x)return 0x0;if(+x)return+x;if(x['length']>0x2710||!(z=u['exec'](x)))return 0x0;switch(y=parseFloat(z[0x1]),z[0x2]['toLowerCase']()){case'years':case'year':case'yrs':case'yr':case'y':return 0x757b12c00*y;case'weeks':case'week':case'wks':case'wk':case'w':return 0x240c8400*y;case'days':case'day':case'd':return y*w;case'hours':case'hour':case'hrs':case'hr':case'h':return y*v;case'minutes':case'minute':case'mins':case'min':case'm':return 0xea60*y;case'seconds':case'second':case'secs':case'sec':case's':return 0x3e8*y;default:return y;}};},{}],0x6:[function(m,p,q){p['exports']=function(u){var v,w=0x0;function x(){return w||(w=0x1,v=u['apply'](this,arguments),u=null),v;}return x['displayName']=u['displayName']||u['name']||x['displayName']||x['name'],x;};},{}],0x7:[function(q,v,w){var x,z,A=v['exports']={};function B(){throw new Error('setTimeout\x20has\x20not\x20been\x20defined');}function C(){throw new Error('clearTimeout\x20has\x20not\x20been\x20defined');}function D(M){if(x===setTimeout)return setTimeout(M,0x0);if((x===B||!x)&&setTimeout)return x=setTimeout,setTimeout(M,0x0);try{return x(M,0x0);}catch(N){try{return x['call'](null,M,0x0);}catch(O){return x['call'](this,M,0x0);}}}!(function(){try{x='function'==typeof setTimeout?setTimeout:B;}catch(M){x=B;}try{z='function'==typeof clearTimeout?clearTimeout:C;}catch(N){z=C;}}());var E,F=[],G=!0x1,H=-0x1;function I(){G&&E&&(G=!0x1,E['length']?F=E['concat'](F):H=-0x1,F['length']&&J());}function J(){if(!G){var M=D(I);G=!0x0;for(var N=F['length'];N;){for(E=F,F=[];++H<N;)E&&E[H]['run']();H=-0x1,N=F['length'];}E=null,G=!0x1,function(O){if(z===clearTimeout)return clearTimeout(O);if((z===C||!z)&&clearTimeout)return z=clearTimeout,clearTimeout(O);try{return z(O);}catch(P){try{return z['call'](null,O);}catch(Q){return z['call'](this,O);}}}(M);}}function K(M,N){this['fun']=M,this['array']=N;}function L(){}A['nextTick']=function(M){var N=new Array(arguments['length']-0x1);if(arguments['length']>0x1){for(var O=0x1;O<arguments['length'];O++)N[O-0x1]=arguments[O];}F['push'](new K(M,N)),0x1!==F['length']||G||D(J);},K['prototype']['run']=function(){this['fun']['apply'](null,this['array']);},A['title']='browser',A['browser']=!0x0,A['env']={},A['argv']=[],A['version']='',A['versions']={},A['on']=L,A['addListener']=L,A['once']=L,A['off']=L,A['removeListener']=L,A['removeAllListeners']=L,A['emit']=L,A['prependListener']=L,A['prependOnceListener']=L,A['listeners']=function(M){return[];},A['binding']=function(M){throw new Error('process.binding\x20is\x20not\x20supported');},A['cwd']=function(){return'/';},A['chdir']=function(M){throw new Error('process.chdir\x20is\x20not\x20supported');},A['umask']=function(){return 0x0;};},{}],0x8:[function(m,p,q){var u=Object['prototype']['hasOwnProperty'];function v(x){try{return decodeURIComponent(x['replace'](/\+/g,'\x20'));}catch(y){return null;}}function w(x){try{return encodeURIComponent(x);}catch(y){return null;}}q['stringify']=function(x,y){y=y||'';var z,A,B=[];for(A in('string'!=typeof y&&(y='?'),x))if(u['call'](x,A)){if((z=x[A])||null!=z&&!isNaN(z)||(z=''),A=w(A),z=w(z),null===A||null===z)continue;B['push'](A+'='+z);}return B['length']?y+B['join']('&'):'';},q['parse']=function(x){for(var y,z=/([^=?#&]+)=?([^&]*)/g,A={};y=z['exec'](x);){var B=v(y[0x1]),C=v(y[0x2]);null===B||null===C||B in A||(A[B]=C);}return A;};},{}],0x9:[function(m,p,q){var v=m('eventemitter3'),w=m('millisecond'),x=m('demolish'),y=m('tick-tock'),z=m('one-time');function A(C,D,E){return w(C in E?E[C]:C in D?D[C]:B[C]);}function B(C){var D=this;if(!(D instanceof B))return new B(C);C=C||{},D['attempt']=null,D['_fn']=null,D['reconnect\x20timeout']=A('reconnect\x20timeout',D,C),D['retries']=A('retries',D,C),D['factor']=A('factor',D,C),D['max']=A('max',D,C),D['min']=A('min',D,C),D['timers']=new y(D);}B['prototype']=new v(),B['prototype']['constructor']=B,B['reconnect\x20timeout']='30\x20seconds',B['max']=0x1/0x0,B['min']='500\x20ms',B['retries']=0xa,B['factor']=0x2,B['prototype']['reconnect']=function(){var C=this;return C['backoff'](function(D,E){if(E['duration']=+new Date()-E['start'],D)return C['emit']('reconnect\x20failed',D,E);C['emit']('reconnected',E);},C['attempt']);},B['prototype']['backoff']=function(C,D){var E=this;return(D=D||E['attempt']||{})['backoff']?E:(D['reconnect\x20timeout']=A('reconnect\x20timeout',E,D),D['retries']=A('retries',E,D),D['factor']=A('factor',E,D),D['max']=A('max',E,D),D['min']=A('min',E,D),D['start']=+D['start']||+new Date(),D['duration']=+D['duration']||0x0,D['attempt']=+D['attempt']||0x0,D['attempt']===D['retries']?(C['call'](E,new Error('Unable\x20to\x20recover'),D),E):(D['backoff']=!0x0,D['attempt']++,E['attempt']=D,D['scheduled']=0x1!==D['attempt']?Math['min'](Math['round']((Math['random']()+0x1)*D['min']*Math['pow'](D['factor'],D['attempt']-0x1)),D['max']):D['min'],E['timers']['setTimeout']('reconnect',function(){D['duration']=+new Date()-D['start'],D['backoff']=!0x1,E['timers']['clear']('reconnect,\x20timeout');var F=E['_fn']=z(function(G){if(E['reset'](),G)return E['backoff'](C,D);C['call'](E,void 0x0,D);});E['emit']('reconnect',D,F),E['timers']['setTimeout']('timeout',function(){var G=new Error('Failed\x20to\x20reconnect\x20in\x20a\x20timely\x20manner');D['duration']=+new Date()-D['start'],E['emit']('reconnect\x20timeout',G,D),F(G);},D['reconnect\x20timeout']);},D['scheduled']),E['emit']('reconnect\x20scheduled',D),E));},B['prototype']['reconnecting']=function(){return!!this['attempt'];},B['prototype']['reconnected']=function(C){return this['_fn']&&this['_fn'](C),this;},B['prototype']['reset']=function(){return this['_fn']=this['attempt']=null,this['timers']['clear']('reconnect,\x20timeout'),this;},B['prototype']['destroy']=x('timers\x20attempt\x20_fn'),p['exports']=B;},{'demolish':0x1,'eventemitter3':0xa,'millisecond':0x5,'one-time':0x6,'tick-tock':0xc}],0xa:[function(m,p,q){var u='function'!=typeof Object['create']&&'~';function v(x,y,z){this['fn']=x,this['context']=y,this['once']=z||!0x1;}function w(){}w['prototype']['_events']=void 0x0,w['prototype']['listeners']=function(x,y){var z=u?u+x:x,A=this['_events']&&this['_events'][z];if(y)return!!A;if(!A)return[];if(A['fn'])return[A['fn']];for(var B=0x0,C=A['length'],D=new Array(C);B<C;B++)D[B]=A[B]['fn'];return D;},w['prototype']['emit']=function(x,y,z,A,B,C){var D=u?u+x:x;if(!this['_events']||!this['_events'][D])return!0x1;var E,F,G=this['_events'][D],H=arguments['length'];if('function'==typeof G['fn']){switch(G['once']&&this['removeListener'](x,G['fn'],void 0x0,!0x0),H){case 0x1:return G['fn']['call'](G['context']),!0x0;case 0x2:return G['fn']['call'](G['context'],y),!0x0;case 0x3:return G['fn']['call'](G['context'],y,z),!0x0;case 0x4:return G['fn']['call'](G['context'],y,z,A),!0x0;case 0x5:return G['fn']['call'](G['context'],y,z,A,B),!0x0;case 0x6:return G['fn']['call'](G['context'],y,z,A,B,C),!0x0;}for(F=0x1,E=new Array(H-0x1);F<H;F++)E[F-0x1]=arguments[F];G['fn']['apply'](G['context'],E);}else{var I,J=G['length'];for(F=0x0;F<J;F++)switch(G[F]['once']&&this['removeListener'](x,G[F]['fn'],void 0x0,!0x0),H){case 0x1:G[F]['fn']['call'](G[F]['context']);break;case 0x2:G[F]['fn']['call'](G[F]['context'],y);break;case 0x3:G[F]['fn']['call'](G[F]['context'],y,z);break;default:if(!E){for(I=0x1,E=new Array(H-0x1);I<H;I++)E[I-0x1]=arguments[I];}G[F]['fn']['apply'](G[F]['context'],E);}}return!0x0;},w['prototype']['on']=function(x,y,z){var A=new v(y,z||this),B=u?u+x:x;return this['_events']||(this['_events']=u?{}:Object['create'](null)),this['_events'][B]?this['_events'][B]['fn']?this['_events'][B]=[this['_events'][B],A]:this['_events'][B]['push'](A):this['_events'][B]=A,this;},w['prototype']['once']=function(x,y,z){var A=new v(y,z||this,!0x0),B=u?u+x:x;return this['_events']||(this['_events']=u?{}:Object['create'](null)),this['_events'][B]?this['_events'][B]['fn']?this['_events'][B]=[this['_events'][B],A]:this['_events'][B]['push'](A):this['_events'][B]=A,this;},w['prototype']['removeListener']=function(x,y,z,A){var B=u?u+x:x;if(!this['_events']||!this['_events'][B])return this;var C=this['_events'][B],D=[];if(y){if(C['fn'])(C['fn']!==y||A&&!C['once']||z&&C['context']!==z)&&D['push'](C);else{for(var E=0x0,F=C['length'];E<F;E++)(C[E]['fn']!==y||A&&!C[E]['once']||z&&C[E]['context']!==z)&&D['push'](C[E]);}}return D['length']?this['_events'][B]=0x1===D['length']?D[0x0]:D:delete this['_events'][B],this;},w['prototype']['removeAllListeners']=function(x){return this['_events']?(x?delete this['_events'][u?u+x:x]:this['_events']=u?{}:Object['create'](null),this):this;},w['prototype']['off']=w['prototype']['removeListener'],w['prototype']['addListener']=w['prototype']['on'],w['prototype']['setMaxListeners']=function(){return this;},w['prefixed']=u,void 0x0!==p&&(p['exports']=w);},{}],0xb:[function(m,p,q){p['exports']=function(u,v){if(v=v['split'](':')[0x0],!(u=+u))return!0x1;switch(v){case'http':case'ws':return 0x50!==u;case'https':case'wss':return 0x1bb!==u;case'ftp':return 0x15!==u;case'gopher':return 0x46!==u;case'file':return!0x1;}return 0x0!==u;};},{}],0xc:[function(m,p,q){(function(u,v){(function(){var w=Object['prototype']['hasOwnProperty'],x=m('millisecond');function y(D,E,F,G){this['start']=+new Date(),this['duration']=F,this['clear']=E,this['timer']=D,this['fns']=[G];}function z(D){clearTimeout(D);}function A(D){clearInterval(D);}function B(D){v(D);}function C(D){if(!(this instanceof C))return new C(D);this['timers']={},this['context']=D||this;}y['prototype']['remaining']=function(){return this['duration']-this['taken']();},y['prototype']['taken']=function(){return+new Date()-this['start'];},C['prototype']['tock']=function(D,E){var F=this;return function(){if(D in F['timers']){var G=F['timers'][D]['fns']['slice'](),H=G['length'],I=0x0;for(E?F['clear'](D):F['start']=+new Date();I<H;I++)G[I]['call'](F['context']);}};},C['prototype']['setTimeout']=function(D,E,F){var G,H=this;return H['timers'][D]?(H['timers'][D]['fns']['push'](E),H):(G=x(F),H['timers'][D]=new y(setTimeout(H['tock'](D,!0x0),x(F)),z,G,E),H);},C['prototype']['setInterval']=function(D,E,F){var G,H=this;return H['timers'][D]?(H['timers'][D]['fns']['push'](E),H):(G=x(F),H['timers'][D]=new y(setInterval(H['tock'](D),x(F)),A,G,E),H);},C['prototype']['setImmediate']=function(D,E){var F=this;return'function'!=typeof u?F['setTimeout'](D,E,0x0):F['timers'][D]?(F['timers'][D]['fns']['push'](E),F):(F['timers'][D]=new y(u(F['tock'](D,!0x0)),B,0x0,E),F);},C['prototype']['active']=function(D){return D in this['timers'];},C['prototype']['clear']=function(){var D,E,F,G=arguments['length']?arguments:[],H=this;if(0x1===G['length']&&'string'==typeof G[0x0]&&(G=G[0x0]['split'](/[, ]+/)),!G['length']){for(D in H['timers'])w['call'](H['timers'],D)&&G['push'](D);}for(E=0x0,F=G['length'];E<F;E++)(D=H['timers'][G[E]])&&(D['clear'](D['timer']),D['fns']=D['timer']=D['clear']=null,delete H['timers'][G[E]]);return H;},C['prototype']['adjust']=function(D,E){var F,G=this,H=x(E),I=G['timers'][D];return I?(F=I['clear']===A,I['clear'](I['timer']),I['start']=+new Date(),I['duration']=H,I['timer']=(F?setInterval:setTimeout)(G['tock'](D,!F),H),G):G;},C['prototype']['end']=C['prototype']['destroy']=function(){return!!this['context']&&(this['clear'](),this['context']=this['timers']=null,!0x0);},C['Timer']=y,p['exports']=C;}['call'](this));}['call'](this,m('timers')['setImmediate'],m('timers')['clearImmediate']));},{'millisecond':0x5,'timers':0xd}],0xd:[function(m,p,q){(function(u,v){(function(){var w=m('process/browser.js')['nextTick'],x=Function['prototype']['apply'],y=Array['prototype']['slice'],z={},A=0x0;function B(C,D){this['_id']=C,this['_clearFn']=D;}q['setTimeout']=function(){return new B(x['call'](setTimeout,window,arguments),clearTimeout);},q['setInterval']=function(){return new B(x['call'](setInterval,window,arguments),clearInterval);},q['clearTimeout']=q['clearInterval']=function(C){C['close']();},B['prototype']['unref']=B['prototype']['ref']=function(){},B['prototype']['close']=function(){this['_clearFn']['call'](window,this['_id']);},q['enroll']=function(C,D){clearTimeout(C['_idleTimeoutId']),C['_idleTimeout']=D;},q['unenroll']=function(C){clearTimeout(C['_idleTimeoutId']),C['_idleTimeout']=-0x1;},q['_unrefActive']=q['active']=function(C){clearTimeout(C['_idleTimeoutId']);var D=C['_idleTimeout'];D>=0x0&&(C['_idleTimeoutId']=setTimeout(function(){C['_onTimeout']&&C['_onTimeout']();},D));},q['setImmediate']='function'==typeof u?u:function(C){var D=A++,E=!(arguments['length']<0x2)&&y['call'](arguments,0x1);return z[D]=!0x0,w(function(){z[D]&&(E?C['apply'](null,E):C['call'](null),q['clearImmediate'](D));}),D;},q['clearImmediate']='function'==typeof v?v:function(C){delete z[C];};}['call'](this));}['call'](this,m('timers')['setImmediate'],m('timers')['clearImmediate']));},{'process/browser.js':0x7,'timers':0xd}],0xe:[function(m,p,q){(function(u){(function(){var v=m('requires-port'),w=m('querystringify'),x=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,y=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,z=new RegExp('^[\x5cx09\x5cx0A\x5cx0B\x5cx0C\x5cx0D\x5cx20\x5cxA0\x5cu1680\x5cu180E\x5cu2000\x5cu2001\x5cu2002\x5cu2003\x5cu2004\x5cu2005\x5cu2006\x5cu2007\x5cu2008\x5cu2009\x5cu200A\x5cu202F\x5cu205F\x5cu3000\x5cu2028\x5cu2029\x5cuFEFF]+');function A(G){return(G||'')['toString']()['replace'](z,'');}var B=[['#','hash'],['?','query'],function(G){return G['replace']('\x5c','/');},['/','pathname'],['@','auth',0x1],[NaN,'host',void 0x0,0x1,0x1],[/:(\d+)$/,'port',void 0x0,0x1],[NaN,'hostname',void 0x0,0x1,0x1]],C={'hash':0x1,'query':0x1};function D(G){var H,I=('undefined'!=typeof window?window:void 0x0!==u?u:'undefined'!=typeof self?self:{})['location']||{},J={},K=typeof(G=G||I);if('blob:'===G['protocol'])J=new F(unescape(G['pathname']),{});else{if('string'===K){for(H in(J=new F(G,{}),C))delete J[H];}else{if('object'===K){for(H in G)H in C||(J[H]=G[H]);void 0x0===J['slashes']&&(J['slashes']=x['test'](G['href']));}}}return J;}function E(G){G=A(G);var H=y['exec'](G);return{'protocol':H[0x1]?H[0x1]['toLowerCase']():'','slashes':!!H[0x2],'rest':H[0x3]};}function F(G,H,I){if(G=A(G),!(this instanceof F))return new F(G,H,I);var J,K,L,M,N,O,P=B['slice'](),Q=typeof H,R=this,S=0x0;for('object'!==Q&&'string'!==Q&&(I=H,H=null),I&&'function'!=typeof I&&(I=w['parse']),H=D(H),J=!(K=E(G||''))['protocol']&&!K['slashes'],R['slashes']=K['slashes']||J&&H['slashes'],R['protocol']=K['protocol']||H['protocol']||'',G=K['rest'],K['slashes']||(P[0x3]=[/(.*)/,'pathname']);S<P['length'];S++)'function'!=typeof(M=P[S])?(L=M[0x0],O=M[0x1],L!=L?R[O]=G:'string'==typeof L?~(N=G['indexOf'](L))&&('number'==typeof M[0x2]?(R[O]=G['slice'](0x0,N),G=G['slice'](N+M[0x2])):(R[O]=G['slice'](N),G=G['slice'](0x0,N))):(N=L['exec'](G))&&(R[O]=N[0x1],G=G['slice'](0x0,N['index'])),R[O]=R[O]||J&&M[0x3]&&H[O]||'',M[0x4]&&(R[O]=R[O]['toLowerCase']())):G=M(G);I&&(R['query']=I(R['query'])),J&&H['slashes']&&'/'!==R['pathname']['charAt'](0x0)&&(''!==R['pathname']||''!==H['pathname'])&&(R['pathname']=function(T,U){if(''===T)return U;for(var V=(U||'/')['split']('/')['slice'](0x0,-0x1)['concat'](T['split']('/')),W=V['length'],X=V[W-0x1],Y=!0x1,Z=0x0;W--;)'.'===V[W]?V['splice'](W,0x1):'..'===V[W]?(V['splice'](W,0x1),Z++):Z&&(0x0===W&&(Y=!0x0),V['splice'](W,0x1),Z--);return Y&&V['unshift'](''),'.'!==X&&'..'!==X||V['push'](''),V['join']('/');}(R['pathname'],H['pathname'])),v(R['port'],R['protocol'])||(R['host']=R['hostname'],R['port']=''),R['username']=R['password']='',R['auth']&&(M=R['auth']['split'](':'),R['username']=M[0x0]||'',R['password']=M[0x1]||''),R['origin']=R['protocol']&&R['host']&&'file:'!==R['protocol']?R['protocol']+'//'+R['host']:'null',R['href']=R['toString']();}F['prototype']={'set':function(G,H,I){var J=this;switch(G){case'query':'string'==typeof H&&H['length']&&(H=(I||w['parse'])(H)),J[G]=H;break;case'port':J[G]=H,v(H,J['protocol'])?H&&(J['host']=J['hostname']+':'+H):(J['host']=J['hostname'],J[G]='');break;case'hostname':J[G]=H,J['port']&&(H+=':'+J['port']),J['host']=H;break;case'host':J[G]=H,/:\d+$/['test'](H)?(H=H['split'](':'),J['port']=H['pop'](),J['hostname']=H['join'](':')):(J['hostname']=H,J['port']='');break;case'protocol':J['protocol']=H['toLowerCase'](),J['slashes']=!I;break;case'pathname':case'hash':if(H){var K='pathname'===G?'/':'#';J[G]=H['charAt'](0x0)!==K?K+H:H;}else J[G]=H;break;default:J[G]=H;}for(var L=0x0;L<B['length'];L++){var M=B[L];M[0x4]&&(J[M[0x1]]=J[M[0x1]]['toLowerCase']());}return J['origin']=J['protocol']&&J['host']&&'file:'!==J['protocol']?J['protocol']+'//'+J['host']:'null',J['href']=J['toString'](),J;},'toString':function(G){G&&'function'==typeof G||(G=w['stringify']);var H,I=this,J=I['protocol'];J&&':'!==J['charAt'](J['length']-0x1)&&(J+=':');var K=J+(I['slashes']?'//':'');return I['username']&&(K+=I['username'],I['password']&&(K+=':'+I['password']),K+='@'),K+=I['host']+I['pathname'],(H='object'==typeof I['query']?G(I['query']):I['query'])&&(K+='?'!==H['charAt'](0x0)?'?'+H:H),I['hash']&&(K+=I['hash']),K;}},F['extractProtocol']=E,F['location']=D,F['trimLeft']=A,F['qs']=w,p['exports']=F;}['call'](this));}['call'](this,void 0x0!==c['g']?c['g']:'undefined'!=typeof self?self:'undefined'!=typeof window?window:{}));},{'querystringify':0x8,'requires-port':0xb}],0xf:[function(m,p,q){var v,w='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'['split'](''),x=0x40,y={},z=0x0,A=0x0;function B(D){var E='';do{E=w[D%x]+E,D=Math['floor'](D/x);}while(D>0x0);return E;}function C(){var D=B(+new Date());return D!==v?(z=0x0,v=D):D+'.'+B(z++);}for(;A<x;A++)y[w[A]]=A;C['encode']=B,C['decode']=function(D){var E=0x0;for(A=0x0;A<D['length'];A++)E=E*x+y[D['charAt'](A)];return E;},p['exports']=C;},{}],0x10:[function(q,w,x){var z,A=q('eventemitter3'),B=q('tick-tock'),C=q('recovery'),D=q('querystringify'),E=q('inherits'),F=q('demolish'),G=q('yeast'),H=/\u2028/g,I=/\u2029/g;function J(O,P){if(!(O instanceof K)){var Q=new Error('Primus#'+P+'\x27s\x20context\x20should\x20called\x20with\x20a\x20Primus\x20instance');if('function'!=typeof O['listeners']||!O['listeners']('error')['length'])throw Q;O['emit']('error',Q);}}try{z=location['origin']?location['origin']:location['protocol']+'//'+location['host'];}catch(O){z='http://127.0.0.1';}function K(P,Q){if(!(this instanceof K))return new K(P,Q);if(K['Stream']['call'](this),'function'!=typeof this['client'])return this['critical'](new Error('The\x20client\x20library\x20has\x20not\x20been\x20compiled\x20correctly,\x20see\x20https://github.com/primus/primus#client-library\x20for\x20more\x20details'));if('object'==typeof P?P=(Q=P)['url']||Q['uri']||z:Q=Q||{},'ping'in Q||'pong'in Q)return this['critical'](new Error('The\x20`ping`\x20and\x20`pong`\x20options\x20have\x20been\x20removed'));var R=this;'pathname'in Q&&(R['pathname']=Q['pathname']),Q['queueSize']='queueSize'in Q?Q['queueSize']:0x1/0x0,Q['timeout']='timeout'in Q?Q['timeout']:0x2710,Q['reconnect']='reconnect'in Q?Q['reconnect']:{},Q['pingTimeout']='pingTimeout'in Q?Q['pingTimeout']:0xafc8,Q['strategy']='strategy'in Q?Q['strategy']:[],Q['transport']='transport'in Q?Q['transport']:{},R['buffer']=[],R['writable']=!0x0,R['readable']=!0x0,R['url']=R['parse'](P||z),R['readyState']=K['CLOSED'],R['options']=Q,R['timers']=new B(this),R['socket']=null,R['disconnect']=!0x1,R['transport']=Q['transport'],R['transformers']={'outgoing':[],'incoming':[]},R['recovery']=new C(Q['reconnect']),'string'==typeof Q['strategy']&&(Q['strategy']=Q['strategy']['split'](/\s?,\s?/g)),!0x1===Q['strategy']?Q['strategy']=[]:Q['strategy']['length']||(Q['strategy']['push']('disconnect','online'),this['authorization']||Q['strategy']['push']('timeout')),Q['strategy']=Q['strategy']['join'](',')['toLowerCase'](),'websockets'in Q&&(R['AVOID_WEBSOCKETS']=!Q['websockets']),'network'in Q&&(R['NETWORK_EVENTS']=Q['network']),Q['manual']||R['timers']['setTimeout']('open',function(){R['timers']['clear']('open'),R['open']();},0x0),R['initialise'](Q);}K['requires']=K['require']=function(P){if('function'==typeof q)return q(P);};try{K['Stream']=K['requires']('stream');}catch(P){}K['Stream']||(K['Stream']=A),E(K,K['Stream']),K['OPENING']=0x1,K['CLOSED']=0x2,K['OPEN']=0x3,K['prototype']['AVOID_WEBSOCKETS']=!0x1,K['prototype']['NETWORK_EVENTS']=!0x1,K['prototype']['online']=!0x0;try{(K['prototype']['NETWORK_EVENTS']='onLine'in navigator&&(window['addEventListener']||document['body']['attachEvent']))&&(navigator['onLine']||(K['prototype']['online']=!0x1));}catch(Q){}if(K['prototype']['ark']={},K['prototype']['emits']=q('emits'),K['prototype']['plugin']=function(R){if(J(this,'plugin'),R)return this['ark'][R];var S={};for(R in this['ark'])S[R]=this['ark'][R];return S;},K['prototype']['reserved']=function(R){return/^(incoming|outgoing)::/['test'](R)||R in this['reserved']['events'];},K['prototype']['reserved']['events']={'reconnect\x20scheduled':0x1,'reconnect\x20timeout':0x1,'readyStateChange':0x1,'reconnect\x20failed':0x1,'reconnected':0x1,'reconnect':0x1,'offline':0x1,'timeout':0x1,'destroy':0x1,'online':0x1,'error':0x1,'close':0x1,'open':0x1,'data':0x1,'end':0x1},K['prototype']['initialise']=function(R){var S=this;for(var T in(S['recovery']['on']('reconnected',S['emits']('reconnected'))['on']('reconnect\x20failed',S['emits']('reconnect\x20failed',function(U){S['emit']('end'),U();}))['on']('reconnect\x20timeout',S['emits']('reconnect\x20timeout'))['on']('reconnect\x20scheduled',S['emits']('reconnect\x20scheduled'))['on']('reconnect',S['emits']('reconnect',function(U){S['emit']('outgoing::reconnect'),U();})),S['on']('outgoing::open',function(){var U=S['readyState'];S['readyState']=K['OPENING'],U!==S['readyState']&&S['emit']('readyStateChange','opening');}),S['on']('incoming::open',function(){var U=S['readyState'];if(S['recovery']['reconnecting']()&&S['recovery']['reconnected'](),S['writable']=!0x0,S['readable']=!0x0,S['online']||(S['online']=!0x0,S['emit']('online')),S['readyState']=K['OPEN'],U!==S['readyState']&&S['emit']('readyStateChange','open'),S['heartbeat'](),S['buffer']['length']){var V=S['buffer']['slice'](),W=V['length'],X=0x0;for(S['buffer']['length']=0x0;X<W;X++)S['_write'](V[X]);}S['emit']('open');}),S['on']('incoming::ping',function(U){S['online']=!0x0,S['heartbeat'](),S['emit']('outgoing::pong',U),S['_write']('primus::pong::'+U);}),S['on']('incoming::error',function(U){var V=S['timers']['active']('connect'),W=U;if('string'==typeof U)W=new Error(U);else{if(!(U instanceof Error)&&'object'==typeof U){for(var X in(W=new Error(U['message']||U['reason']),U))Object['prototype']['hasOwnProperty']['call'](U,X)&&(W[X]=U[X]);}}if(S['recovery']['reconnecting']())return S['recovery']['reconnected'](W);S['listeners']('error')['length']&&S['emit']('error',W),V&&(~S['options']['strategy']['indexOf']('timeout')?S['recovery']['reconnect']():S['end']());}),S['on']('incoming::data',function(U){S['decoder'](U,function(V,W){if(V)return S['listeners']('error')['length']&&S['emit']('error',V);S['protocol'](W)||S['transforms'](S,S,'incoming',W,U);});}),S['on']('incoming::end',function(){var U=S['readyState'];return S['disconnect']?(S['disconnect']=!0x1,S['end']()):(S['readyState']=K['CLOSED'],U!==S['readyState']&&S['emit']('readyStateChange','end'),S['timers']['active']('connect')&&S['end'](),U!==K['OPEN']?!!S['recovery']['reconnecting']()&&S['recovery']['reconnect']():(this['writable']=!0x1,this['readable']=!0x1,this['timers']['clear'](),S['emit']('close'),~S['options']['strategy']['indexOf']('disconnect')?S['recovery']['reconnect']():(S['emit']('outgoing::end'),void S['emit']('end'))));}),S['client'](),S['ark']))S['ark'][T]['call'](S,S,R);return S['NETWORK_EVENTS']?(S['offlineHandler']=function(){S['online']&&(S['online']=!0x1,S['emit']('offline'),S['end'](),S['recovery']['reset']());},S['onlineHandler']=function(){S['online']||(S['online']=!0x0,S['emit']('online'),~S['options']['strategy']['indexOf']('online')&&S['recovery']['reconnect']());},window['addEventListener']?(window['addEventListener']('offline',S['offlineHandler'],!0x1),window['addEventListener']('online',S['onlineHandler'],!0x1)):document['body']['attachEvent']&&(document['body']['attachEvent']('onoffline',S['offlineHandler']),document['body']['attachEvent']('ononline',S['onlineHandler'])),S):S;},K['prototype']['protocol']=function(R){if('string'!=typeof R||0x0!==R['indexOf']('primus::'))return!0x1;var S=R['indexOf'](':',0x8),T=R['slice'](S+0x2);switch(R['slice'](0x8,S)){case'ping':this['emit']('incoming::ping',+T);break;case'server':'close'===T&&(this['disconnect']=!0x0);break;case'id':this['emit']('incoming::id',T);break;default:return!0x1;}return!0x0;},K['prototype']['transforms']=function(R,S,T,U,V){var W={'data':U},X=R['transformers'][T];return function Y(Z,a0){var a1=X[Z++];if(!a1)return a0();if(0x1===a1['length']){if(!0x1===a1['call'](S,W))return;return Y(Z,a0);}a1['call'](S,W,function(a2,a3){if(a2)return S['emit']('error',a2);!0x1!==a3&&Y(Z,a0);});}(0x0,function(){if('incoming'===T)return S['emit']('data',W['data'],V);S['_write'](W['data']);}),this;},K['prototype']['id']=function(R){return this['socket']&&this['socket']['id']?R(this['socket']['id']):(this['_write']('primus::id::'),this['once']('incoming::id',R));},K['prototype']['open']=function(){return J(this,'open'),!this['recovery']['reconnecting']()&&this['options']['timeout']&&this['timeout'](),this['emit']('outgoing::open'),this;},K['prototype']['write']=function(R){return J(this,'write'),this['transforms'](this,this,'outgoing',R),!0x0;},K['prototype']['_write']=function(R){var S=this;return K['OPEN']!==S['readyState']?(this['buffer']['length']===this['options']['queueSize']&&this['buffer']['splice'](0x0,0x1),this['buffer']['push'](R),!0x1):(S['encoder'](R,function(T,U){if(T)return S['listeners']('error')['length']&&S['emit']('error',T);'string'==typeof U&&(~U['indexOf']('\u2028')&&(U=U['replace'](H,'\u2028')),~U['indexOf']('\u2029')&&(U=U['replace'](I,'\u2029'))),S['emit']('outgoing::data',U);}),!0x0);},K['prototype']['heartbeat']=function(){return this['options']['pingTimeout']?(this['timers']['clear']('heartbeat'),this['timers']['setTimeout']('heartbeat',function(){this['online']&&(this['online']=!0x1,this['emit']('offline'),this['emit']('incoming::end'));},this['options']['pingTimeout']),this):this;},K['prototype']['timeout']=function(){var R=this;function S(){R['removeListener']('error',S)['removeListener']('open',S)['removeListener']('end',S)['timers']['clear']('connect');}return R['timers']['setTimeout']('connect',function(){S(),R['readyState']===K['OPEN']||R['recovery']['reconnecting']()||(R['emit']('timeout'),~R['options']['strategy']['indexOf']('timeout')?R['recovery']['reconnect']():R['end']());},R['options']['timeout']),R['on']('error',S)['on']('open',S)['on']('end',S);},K['prototype']['end']=function(R){if(J(this,'end'),this['readyState']===K['CLOSED']&&!this['timers']['active']('connect')&&!this['timers']['active']('open'))return this['recovery']['reconnecting']()&&(this['recovery']['reset'](),this['emit']('end')),this;void 0x0!==R&&this['write'](R),this['writable']=!0x1,this['readable']=!0x1;var S=this['readyState'];return this['readyState']=K['CLOSED'],S!==this['readyState']&&this['emit']('readyStateChange','end'),this['timers']['clear'](),this['emit']('outgoing::end'),this['emit']('close'),this['emit']('end'),this;},K['prototype']['destroy']=F('url\x20timers\x20options\x20recovery\x20socket\x20transport\x20transformers',{'before':'end','after':['removeAllListeners',function(){this['NETWORK_EVENTS']&&(window['addEventListener']?(window['removeEventListener']('offline',this['offlineHandler']),window['removeEventListener']('online',this['onlineHandler'])):document['body']['attachEvent']&&(document['body']['detachEvent']('onoffline',this['offlineHandler']),document['body']['detachEvent']('ononline',this['onlineHandler'])));}]}),K['prototype']['clone']=function(R){return this['merge']({},R);},K['prototype']['merge']=function(R){for(var S,T,U=0x1;U<arguments['length'];U++)for(S in T=arguments[U])Object['prototype']['hasOwnProperty']['call'](T,S)&&(R[S]=T[S]);return R;},K['prototype']['parse']=q('url-parse'),K['prototype']['querystring']=D['parse'],K['prototype']['querystringify']=D['stringify'],K['prototype']['uri']=function(R){var S=this['url'],T=[],U=!0x1;R['query']&&(U=!0x0),(R=R||{})['protocol']='protocol'in R?R['protocol']:'http:',R['query']=!(!S['query']||!U)&&S['query']['slice'](0x1),R['secure']='secure'in R?R['secure']:'https:'===S['protocol']||'wss:'===S['protocol'],R['auth']='auth'in R?R['auth']:S['auth'],R['pathname']='pathname'in R?R['pathname']:this['pathname'],R['port']='port'in R?+R['port']:+S['port']||(R['secure']?0x1bb:0x50);var V=this['querystring'](R['query']||'');return V['_primuscb']=G(),R['query']=this['querystringify'](V),this['emit']('outgoing::url',R),T['push'](R['secure']?R['protocol']['replace'](':','s:'):R['protocol'],''),T['push'](R['auth']?R['auth']+'@'+S['host']:S['host']),R['pathname']&&T['push'](R['pathname']['slice'](0x1)),U?T[T['length']-0x1]+='?'+R['query']:delete R['query'],R['object']?R:T['join']('/');},K['prototype']['transform']=function(R,S){return J(this,'transform'),R in this['transformers']?(this['transformers'][R]['push'](S),this):this['critical'](new Error('Invalid\x20transformer\x20type'));},K['prototype']['critical']=function(R){if(this['emit']('error',R))return this;throw R;},K['connect']=function(R,S){return new K(R,S);},K['EventEmitter']=A,K['prototype']['client']=function(){var R,S=this,T=(function(){if('undefined'!=typeof WebSocket)return WebSocket;if('undefined'!=typeof MozWebSocket)return MozWebSocket;try{return K['requires']('ws');}catch(U){}}());if(!T)return S['critical'](new Error('Missing\x20required\x20`ws`\x20module.\x20Please\x20run\x20`npm\x20install\x20--save\x20ws`'));S['on']('outgoing::open',function(){S['emit']('outgoing::end');try{var U={'protocol':'ws+unix:'===S['url']['protocol']?'ws+unix:':'ws:','query':!0x0};0x3===T['length']?('ws+unix:'===U['protocol']&&(U['pathname']=S['url']['pathname']+':'+S['pathname']),S['socket']=R=new T(S['uri'](U),[],S['transport'])):(S['socket']=R=new T(S['uri'](U)),R['binaryType']='arraybuffer');}catch(V){return S['emit']('error',V);}R['onopen']=S['emits']('incoming::open'),R['onerror']=S['emits']('incoming::error'),R['onclose']=S['emits']('incoming::end'),R['onmessage']=S['emits']('incoming::data',function(W,X){W(void 0x0,X['data']);});}),S['on']('outgoing::data',function(U){if(R&&R['readyState']===T['OPEN'])try{R['send'](U);}catch(V){S['emit']('incoming::error',V);}}),S['on']('outgoing::reconnect',function(){S['emit']('outgoing::open');}),S['on']('outgoing::end',function(){R&&(R['onerror']=R['onopen']=R['onclose']=R['onmessage']=function(){},R['close'](),R=null);});},K['prototype']['authorization']=!0x1,K['prototype']['pathname']='/gateway',K['prototype']['encoder']=function(R,S){var T;if(!(R instanceof Blob))try{R=JSON['stringify'](R);}catch(U){T=U;}S(T,R);},K['prototype']['decoder']=function(R,S){var T;if('string'!=typeof R)return S(T,R);try{R=JSON['parse'](R);}catch(U){T=U;}S(T,R);},K['prototype']['version']='8.0.1','undefined'!=typeof document&&'undefined'!=typeof navigator){document['addEventListener']&&document['addEventListener']('keydown',function(R){0x1b===R['keyCode']&&R['preventDefault']&&R['preventDefault']();},!0x1);var L=(navigator['userAgent']||'')['toLowerCase'](),M=L['match'](/.+(?:rv|it|ra|ie)[/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[],N=+[M[0x1],M[0x2]]['join']('.');!~L['indexOf']('chrome')&&~L['indexOf']('safari')&&N<534.54&&(K['prototype']['AVOID_WEBSOCKETS']=!0x0);}w['exports']=K;},{'demolish':0x1,'emits':0x2,'eventemitter3':0x3,'inherits':0x4,'querystringify':0x8,'recovery':0x9,'tick-tock':0xc,'url-parse':0xe,'yeast':0xf}]},{},[0x10])(0x10);return l;},[]);}},function(){return f||(0x0,d[g(d)[0x0]])((f={'exports':{}})['exports'],f),f['exports'];})();},'UkDf':(a,b,c)=>{c['d'](b,{'rw':()=>g}),(c('q2OO'),localStorage['getItem']('debug'));var d=!0x1,f,g=('['['concat']('WOLAI_DEBUG')['concat'](f?'\x20'['concat'](f):'',']:'),{'log':function(){for(var h=arguments['length'],j=new Array(h),k=0x0;k<h;k++)j[k]=arguments[k];return d;},'info':function(){for(var h=arguments['length'],j=new Array(h),k=0x0;k<h;k++)j[k]=arguments[k];return d;},'warn':function(){for(var h=arguments['length'],j=new Array(h),k=0x0;k<h;k++)j[k]=arguments[k];return d;},'error':function(){for(var h=arguments['length'],j=new Array(h),k=0x0;k<h;k++)j[k]=arguments[k];return d;},'debug':function(){for(var h=arguments['length'],j=new Array(h),k=0x0;k<h;k++)j[k]=arguments[k];return d;}});},'i8Ym':(j,k,q)=>{q['d'](k,{'Z':()=>N});var w=q('aRGA'),x=q('WbC6'),z=q('yxfb'),A=q('Twb9'),B=q('P3sh'),C=q('T3FR');function D(O,P){for(var Q=0x0;Q<P['length'];Q++){var R=P[Q];R['enumerable']=R['enumerable']||!0x1,R['configurable']=!0x0,'value'in R&&(R['writable']=!0x0),Object['defineProperty'](O,E(R['key']),R);}}function E(O){var P=function(Q,R){if('object'!=typeof Q||!Q)return Q;var S=Q[Symbol['toPrimitive']];if(void 0x0!==S){var T=S['call'](Q,R||'default');if('object'!=typeof T)return T;throw new TypeError('@@toPrimitive\x20must\x20return\x20a\x20primitive\x20value.');}return('string'===R?String:Number)(Q);}(O,'string');return'symbol'==typeof P?P:P+'';}function F(O){return function(P){if(Array['isArray'](P))return G(P);}(O)||function(P){if('undefined'!=typeof Symbol&&null!=P[Symbol['iterator']]||null!=P['@@iterator'])return Array['from'](P);}(O)||function(P,Q){if(!P)return;if('string'==typeof P)return G(P,Q);var R=Object['prototype']['toString']['call'](P)['slice'](0x8,-0x1);'Object'===R&&P['constructor']&&(R=P['constructor']['name']);if('Map'===R||'Set'===R)return Array['from'](P);if('Arguments'===R||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](R))return G(P,Q);}(O)||(function(){throw new TypeError('Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.');}());}function G(O,P){(null==P||P>O['length'])&&(P=O['length']);for(var Q=0x0,R=new Array(P);Q<P;Q++)R[Q]=O[Q];return R;}var H=Object['defineProperty'],I=Object['getOwnPropertyDescriptor'],J=(O,P,Q,R)=>{for(var S,T=R>0x1?void 0x0:R?I(P,Q):P,U=O['length']-0x1;U>=0x0;U--)(S=O[U])&&(T=(R?S(P,Q,T):S(T))||T);return R&&T&&H(P,Q,T),T;},K=(O,P,Q)=>new Promise((R,S)=>{var T=W=>{try{V(Q['next'](W));}catch(X){S(X);}},U=W=>{try{V(Q['throw'](W));}catch(X){S(X);}},V=W=>W['done']?R(W['value']):Promise['resolve'](W['value'])['then'](T,U);V((Q=Q['apply'](O,P))['next']());}),L=O=>{var P=O['split'](/([\u4e00-\u9fa5]{1})/gi);P=P['filter'](R=>Boolean(R));var Q=[];return P['forEach'](R=>{if(R['match'](/[\u4e00-\u9fa5]/))Q['push'](R);else{var S=R['split'](/\W/);Q['push']['apply'](Q,F(S));}}),Q['filter'](R=>Boolean(R))['map'](R=>R['toLowerCase']());},M=(function(){return O=function R(){!function(S,T){if(!(S instanceof T))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}(this,R),this['indexes']={};},(P=[{'key':'initIndex','value':function(S){return K(this,null,function*(){if(S!==this['spaceId']){if(this['spaceId']=S,this['indexes'][this['spaceId']])this['index']=this['indexes'][this['spaceId']];else{this['index']=new w['Index']({'encode':L,'tokenize':'forward','optimize':!0x0}),this['indexes'][this['spaceId']]=this['index'];var T=A['Z']['getInstance'](),U=yield T['blockDB']['where']({'workspace_id':S})['toArray'](),V=yield T['dirtyBlockDB']['where']({'workspace_id':S})['toArray'](),W=yield z['Z']['getLatestBlocks'](U,V,{'noParse':!0x0}),X=[],Y=new C['Z']();X['push'](new Promise(a2=>{Y['onmessage']=a3=>{a2(a3['data']);},Y['postMessage'](W);})),this['spaceStore']['setOfflineIndexing'](!0x0);for(var Z=(yield Promise['all'](X))[0x0],a0=Z['length'],a1=0x0;a1<=a0;)yield this['addIndex'](Z['slice'](a1,a1+0x2710)),a1+=0x2710;this['spaceStore']['setOfflineIndexing'](!0x1);}}});}},{'key':'addIndex','value':function(S){return new Promise(T=>{setTimeout(()=>{S['forEach'](U=>{if(U){if(U['type']===B['BLOCK_TYPE']['IMAGE'])this['index']['add'](U['id'],U['text_content']);else{var V=this['blockAPI']['getTitlePlainTextByTitle'](U['attributes']['title']);this['index']['add'](U['id'],V['substr'](0x0,0x2710));}}}),T();},0xa);});}},{'key':'search','value':function(S,T){return new Promise(U=>{this['index']['searchAsync'](S,{'limit':0x3e8},V=>K(this,null,function*(){var W=yield z['Z']['getData'](V),X=W=W['filter'](a1=>T?a1['type']===B['BLOCK_TYPE']['PAGE']:Boolean(a1))['slice'](0x0,0x64),Y=Array['from'](new Set(X['map'](a1=>a1['page_id'])['filter'](a1=>Boolean(a1)))),Z=yield z['Z']['getData'](Y);X=X['concat'](Z);var a0=L(S);U({'error':[],'status':'OK','result':{'items':W['map'](a1=>{var a2,a3,a4,a5=X['find'](ab=>ab['id']===a1['id']),a6=X['find'](ab=>ab['id']===a5['page_id']),a7=a5['type']===B['BLOCK_TYPE']['IMAGE']?a5['text_content']:this['blockAPI']['getTitlePlainTextByTitle'](null==(a2=null==a5?void 0x0:a5['attributes'])?void 0x0:a2['title']);a0['forEach'](ab=>{a7=a7['replace'](new RegExp(ab,'ig'),'<em>'['concat'](ab,'</em>'));});var a8='',a9=0x14,aa=a7['split'](/<em>|<\/em>/);return aa['forEach']((ab,ac)=>{0x0===ac?a8+=ab['length']>a9?'...'['concat'](ab['substr'](-0x14,a9)):ab:ac===aa['length']-0x1?a8+=ab['length']>a9?''['concat'](ab['substr'](0x0,a9),'...'):ab:a8+=ac%0x2==0x0?ab['length']>0x28?''['concat'](ab['substr'](0x0,a9),'...')['concat'](ab['substr'](-0x14,a9)):ab:'<em>'['concat'](ab,'</em>');}),{'active':a5['active'],'created_time':a5['created_time'],'edited_time':a5['edited_time'],'icon':'','id':a5['id'],'page_id':a5['type']===B['BLOCK_TYPE']['PAGE']?a5['id']:a5['page_id'],'search_type':a5['type']===B['BLOCK_TYPE']['PAGE']?'page':'block','status':a5['status'],'text_content':a8,'title':a5['type']===B['BLOCK_TYPE']['PAGE']?this['blockAPI']['getTitlePlainTextByTitle'](null==(a3=null==a5?void 0x0:a5['attributes'])?void 0x0:a3['title']):this['blockAPI']['getTitlePlainTextByTitle'](null==(a4=null==a6?void 0x0:a6['attributes'])?void 0x0:a4['title']),'type':a5['type']};})}});}));});}}])&&D(O['prototype'],P),Q&&D(O,Q),Object['defineProperty'](O,'prototype',{'writable':!0x1}),O;var O,P,Q;}());J([x['f3']],M['prototype'],'userStore',0x2),J([x['f3']],M['prototype'],'spaceStore',0x2),J([x['f3']],M['prototype'],'blockAPI',0x2);const N=new M();},'yxfb':(z,F,H)=>{H['d'](F,{'Z':()=>aA});var J=H('I4rI'),Q=H['n'](J),U=H('zHyC'),V=H['n'](U),X=H('EDHq'),a0=H('QNHS'),a1=H['n'](a0),a2=H('qQFs'),a3=H('/kC5'),a4=H('/Z6e'),a5=H('WzFv'),a6=H('lpAo'),a7=H('okq7'),a8=H('mQmq'),a9=H('WbC6'),aa=H('pvLi'),ab=H('Twb9'),ac=H('5Cuo'),ad=H('P3sh'),ae=H('Bxfn'),af=H('i8Ym'),ag=H('nw6Y');function ah(aB){return function(aC){if(Array['isArray'](aC))return ai(aC);}(aB)||function(aC){if('undefined'!=typeof Symbol&&null!=aC[Symbol['iterator']]||null!=aC['@@iterator'])return Array['from'](aC);}(aB)||function(aC,aD){if(!aC)return;if('string'==typeof aC)return ai(aC,aD);var aE=Object['prototype']['toString']['call'](aC)['slice'](0x8,-0x1);'Object'===aE&&aC['constructor']&&(aE=aC['constructor']['name']);if('Map'===aE||'Set'===aE)return Array['from'](aC);if('Arguments'===aE||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](aE))return ai(aC,aD);}(aB)||(function(){throw new TypeError('Invalid\x20attempt\x20to\x20spread\x20non-iterable\x20instance.\x0aIn\x20order\x20to\x20be\x20iterable,\x20non-array\x20objects\x20must\x20have\x20a\x20[Symbol.iterator]()\x20method.');}());}function ai(aB,aC){(null==aC||aC>aB['length'])&&(aC=aB['length']);for(var aD=0x0,aE=new Array(aC);aD<aC;aD++)aE[aD]=aB[aD];return aE;}function aj(aB,aC){for(var aD=0x0;aD<aC['length'];aD++){var aE=aC[aD];aE['enumerable']=aE['enumerable']||!0x1,aE['configurable']=!0x0,'value'in aE&&(aE['writable']=!0x0),Object['defineProperty'](aB,ak(aE['key']),aE);}}function ak(aB){var aC=function(aD,aE){if('object'!=typeof aD||!aD)return aD;var aF=aD[Symbol['toPrimitive']];if(void 0x0!==aF){var aG=aF['call'](aD,aE||'default');if('object'!=typeof aG)return aG;throw new TypeError('@@toPrimitive\x20must\x20return\x20a\x20primitive\x20value.');}return('string'===aE?String:Number)(aD);}(aB,'string');return'symbol'==typeof aC?aC:aC+'';}var al=Object['defineProperty'],am=Object['defineProperties'],an=Object['getOwnPropertyDescriptor'],ao=Object['getOwnPropertyDescriptors'],ap=Object['getOwnPropertySymbols'],aq=Object['prototype']['hasOwnProperty'],ar=Object['prototype']['propertyIsEnumerable'],as=(aB,aC,aD)=>aC in aB?al(aB,aC,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':aD}):aB[aC]=aD,at=(aB,aC)=>{for(var aD in aC||(aC={}))aq['call'](aC,aD)&&as(aB,aD,aC[aD]);if(ap){for(var aD of ap(aC))ar['call'](aC,aD)&&as(aB,aD,aC[aD]);}return aB;},au=(aB,aC)=>{var aD={};for(var aE in aB)aq['call'](aB,aE)&&aC['indexOf'](aE)<0x0&&(aD[aE]=aB[aE]);if(null!=aB&&ap){for(var aE of ap(aB))aC['indexOf'](aE)<0x0&&ar['call'](aB,aE)&&(aD[aE]=aB[aE]);}return aD;},av=(aB,aC,aD,aE)=>{for(var aF,aG=aE>0x1?void 0x0:aE?an(aC,aD):aC,aH=aB['length']-0x1;aH>=0x0;aH--)(aF=aB[aH])&&(aG=(aE?aF(aC,aD,aG):aF(aG))||aG);return aE&&aG&&al(aC,aD,aG),aG;},aw=(aB,aC,aD)=>new Promise((aE,aF)=>{var aG=aJ=>{try{aI(aD['next'](aJ));}catch(aK){aF(aK);}},aH=aJ=>{try{aI(aD['throw'](aJ));}catch(aK){aF(aK);}},aI=aJ=>aJ['done']?aE(aJ['value']):Promise['resolve'](aJ['value'])['then'](aG,aH);aI((aD=aD['apply'](aB,aC))['next']());}),ax=aa['Z']['getInstance'](),ay=ab['Z']['getInstance'](),az=(function(){return aB=function aE(){!function(aF,aG){if(!(aF instanceof aG))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}(this,aE),this['pingTime']=0x1388,this['pinging']=!0x1,this['syncSeq']='',this['syncProgress']={},this['localChangeBlocks']=[],this['localChangeWorkspaces']=[],this['cloudChangeBlocks']=[],this['cloudChangeWorkspaces']=[],this['conflictIds']=[];},aC=[{'key':'startPing','value':function(){this['editorUI']['setOffline'](!0x0);var aF=()=>{setTimeout(()=>aw(this,null,function*(){try{yield this['ping'](),this['editorUI']['pageDisconnect']&&this['pageStore']['setPageId'](this['pageStore']['pageId']);}catch(aG){throw aF(),aG;}}),this['pingTime']);};this['pinging']||(this['pinging']=!0x0,aF());}},{'key':'isPinging','value':function(){return this['pinging'];}},{'key':'ping','value':function(){return aw(this,null,function*(){yield(0x0,a7['qE'])();for(var aF=0x0;aF<0x2;aF++)yield(0x0,a5['_'])(0x7d0),yield(0x0,a7['qE'])();this['pinging']=!0x1;try{yield this['submitIndexedDB'](this['userStore']['sessionId']),this['editorUI']['setOffline'](!0x1);}catch(aG){this['startPing']();}});}},{'key':'allSubmitIndexedDB','value':function(){return aw(this,null,function*(){yield this['submitIndexedDB']();});}},{'key':'submitIndexedDB','value':function(aF){return aw(this,null,function*(){if(this['userStore']['userId']&&!this['pinging']){var aG=yield ax['db']['where']({'userId':this['userStore']['userId']})['toArray']();if(aF&&(aG=aG['filter'](aO=>aO['groupId']===aF)),null==aG?void 0x0:aG['length']){aG=aG['sort']((aO,aP)=>aO['createTime']-aP['createTime'])['map'](aO=>{var aP={'id':aO['id'],'operations':aO['operations']};return aO['undo']&&(aP['undo']=!0x0),aO['redo']&&(aP['redo']=!0x0),aP;});var aH=0x0,aI=!0x1;aG['forEach'](aO=>aH+=aO['operations']['length']),aH>0xc8&&(aI=!0x0,this['pageStore']['setConfirmOpen']({'title':'','loading':!0x0,'contents':X['Z']['t'](ad['KxY']['PROCESSING_WAIT'],'正在处理，请稍候...',{'ns':'editor'}),'alignContentsCenter':!0x0,'hideButton':!0x0}));for(var aJ=JSON['stringify'](aG)['length'],aK=Math['ceil'](aJ/0x7a120),aL=0x0;aL<aK;aL++){var aM=Math['ceil'](aG['length']/aK),aN=aG['slice'](aL*aM,(aL+0x1)*aM);try{ac['B']['updateVersForTrans'](aN),yield(0x0,a7['YL'])(aN);}catch(aO){if(!(aO['code']&&!Number['isNaN'](aO['code'])||aO['response']))throw aO;try{yield ax['errorDb']['bulkAdd'](aG['map'](aP=>({'id':aP['id'],'operations':aP['operations'],'userId':this['userStore']['userId'],'createTime':new Date()['getTime'](),'groupId':aF})));}catch(aP){}}}return yield ax['db']['where']({'userId':this['userStore']['userId']})['and'](aQ=>aG['find'](aR=>aR['id']===aQ['id']))['delete'](),aI&&this['pageStore']['closeConfirm'](),aG;}}});}},{'key':'syncSpaceData','value':function(aF,aG,aH){return aw(this,null,function*(){var aI=this,aJ=new Date()['getTime'](),aK=0x9a7ec800,aL=Math['ceil']((aJ-aH)/aK),{taskId:aM}=yield(0x0,a7['Tg'])(aF);if(!aM)throw new Error('sync\x20prepare\x20data\x20failed');for(var aN=function*(){var aP=aH+aK,aQ=yield(0x0,a7['RS'])(aM,aF,aH,aP)['then'](aW=>aI['checkStatus'](aW,aG));aH=aP;var aR,{syncId:aS,syncCount:aT}=aQ;if(!aT)return 0x1;var aU=0x1388,aV=function*(){var aW=yield(0x0,a7['BD'])({'syncId':aS,'workspaceId':aF,'startId':aR,'limit':aU})['then'](b6=>aI['checkStatus'](b6,aG));if(aR=aW['nextId'],aW['blocks']['length']){for(var aX=aW['blocks']['filter'](b6=>b6['type']===ad['BLOCK_TYPE']['IMAGE']&&!(0x0,a6['get'])(b6['attributes'],'source[0]')),aY=aW['blocks']['filter'](b6=>b6['type']===ad['BLOCK_TYPE']['PAGE']),aZ=[],b0=function*(b6){var b7=(0x0,a6['get'])(aX[b6]['attributes'],'img[0][0]'),b8=(0x0,a6['get'])(aX[b6]['attributes'],'bucket[0][0]');b7&&b8&&aZ['push'](new Promise(b9=>aw(aI,null,function*(){try{var ba=yield(0x0,ae['LJ'])(b7,b8,(0x0,ae['yR'])(b7)?Math['min']((0x0,a6['get'])(aX[b6]['attributes'],'dimensions[0].width'),0x7d0):null,(0x0,a6['get'])(aX[b6]['attributes'],'original[0][0].width'),aX[b6]['id'])['then'](bc=>this['checkStatus'](bc,aG)),bb=yield Q()['get'](''['concat'](ba),{'responseType':'blob'})['then'](bc=>this['checkStatus'](bc,aG));this['syncProgress'][aF]+=Math['round'](0x1/b4()*Math['min'](aU/aT,0x1)*0x2710/aL),b9({'id':aX[b6]['id'],'image':bb['data']});}catch(bc){b9({});}})));},b1=0x0;b1<aX['length'];b1++)yield*b0(b1);for(var b2=function*(){var b6=aY[b3],b7=(0x0,a6['get'])(b6,'setting.page_cover'),b8=(0x0,a6['get'])(b6,'setting.page_icon');if(b7&&!b7['startsWith']('http')){var b9=b7['split']('://');aZ['push'](new Promise(bb=>aw(aI,null,function*(){try{var bc=yield this['blockStore']['getImageUrl'](b9[0x1],b9[0x0],0x1e0,b6['id'])['then'](be=>this['checkStatus'](be,aG)),bd=yield Q()['get'](''['concat'](bc),{'responseType':'blob'})['then'](be=>this['checkStatus'](be,aG));this['syncProgress'][aF]+=Math['round'](0x1/b4()*Math['min'](aU/aT,0x1)*0x2710/aL),bb({'id':''['concat'](b6['id'],'-cover'),'image':bd['data']});}catch(be){bb({});}})));}if(b8&&'upload'===b8[0x0]&&b8[0x1]){var ba=b8[0x1];aZ['push'](new Promise(bb=>aw(aI,null,function*(){try{var bc=yield this['blockStore']['getImageUrl'](ba[0x0],ba[0x1],0x48,b6['id'])['then'](be=>this['checkStatus'](be,aG)),bd=yield Q()['get'](''['concat'](bc),{'responseType':'blob'})['then'](be=>this['checkStatus'](be,aG));this['syncProgress'][aF]+=Math['round'](0x1/b4()*Math['min'](aU/aT,0x1)*0x2710/aL),bb({'id':''['concat'](b6['id'],'-icon'),'image':bd['data']});}catch(be){bb({});}})));}},b3=0x0;b3<aY['length'];b3++)yield*b2();var b4=()=>aW['blocks']['length']+aZ['length'];yield ay['blockDB']['bulkPut'](aW['blocks']['map'](b6=>({'id':b6['id'],'page_id':b6['page_id'],'workspace_id':b6['workspace_id'],'data':V()['encrypt'](JSON['stringify'](b6),b6['id']['substr'](0x0,0xa))['toString']()})))['then'](b6=>aI['checkStatus'](b6,aG)),aI['syncProgress'][aF]+=Math['round'](aW['blocks']['length']/b4()*Math['min'](aU/aT,0x1)*0x2710/aL);var b5=yield Promise['all'](aZ);yield ay['imageDB']['bulkPut'](b5['filter'](b6=>b6['id']))['then'](b6=>aI['checkStatus'](b6,aG));}};do{yield*aV();}while(aR);},aO=0x1;aO<=aL;aO++)yield*aN();});}},{'key':'checkStatus','value':function(aF,aG){if(this['syncSeq']===aG&&this['syncSeq'])return aF;throw new Error('sync\x20cancelled');}},{'key':'cancelSyncData','value':function(){this['syncSeq']='';}},{'key':'resetSyncProgress','value':function(){this['syncProgress']={};}},{'key':'syncData','value':function(aF,aG){return aw(this,null,function*(){var aH=this;for(var aI of(this['syncSeq']=aF,this['syncProgress']=this['syncProgress']||{},yield this['workspaceStore']['getWorkspaceData'](),aG))yield this['workspaceStore']['initWorkspacePages'](aI);for(var aJ=this['spaceStore']['workspaces'],aK=aG['map'](aN=>aJ['find'](aO=>aO['id']===aN)),aL=function*(){var aN=aK[aM]['id'],aO=new Date()['getTime']();aH['syncProgress'][aN]=0x0;try{var aP=yield ay['recordsDB']['get'](aN),aQ=aP?aP['last_sync_time']:aK[aM]['created_time'];yield aH['syncSpaceData'](aN,aF,aQ),yield ay['recordsDB']['put']({'workspace_id':aN,'index':aJ['findIndex'](aR=>aR['id']===aN),'last_sync_time':aO,'data':JSON['stringify'](aK[aM]),'viewData':JSON['stringify'](aH['spaceStore']['spaceViews'][aN])}),aH['syncProgress'][aN]=0x2710,(0x0,a2['d'])()&&window['interop']&&window['interop']['setAirplaneModeAvailability']&&window['interop']['setAirplaneModeAvailability'](!0x0);}catch(aR){aH['syncProgress'][aN]=-0x1;}},aM=0x0;aM<aK['length'];aM++)yield*aL();this['syncSeq']='';});}},{'key':'duplicateBlock','value':function(aF){return aw(this,null,function*(){var aG=this,aH={},aI=function*(aK){var aL=yield aG['getData'](aK),aM=aF['findIndex'](aS=>aS['id']===aK),aN=(0x0,a6['cloneDeep'])(aL);if(aN['id']=(0x0,a3['Vj'])(),aN['init']=!0x0,aL['type']===ad['BLOCK_TYPE']['PAGE']&&(aN['sub_nodes']=[]),aH[aK]=aN,aF[aM]['parent_id']){var aO=yield aG['getData'](aK,!0x0);if('workspace'!==aO['parent_type']){var aP=aF['find'](aS=>aS['id']===aO['parent_id']);aP['sub_nodes']&&!aP['sub_nodes']['includes'](aK)&&aP['sub_nodes']['push'](aK);}else{var aQ=aG['localChangeWorkspaces']['find'](aS=>aS['id']===aO['parent_id']);if(aQ&&aQ['pages']){var aR=JSON['parse'](aQ['pages']);aR['includes'](aK)||(aR['push'](aK),aQ['pages']=JSON['stringify'](aR));}}}aF[aM]={'id':aK,'sub_nodes':aL['type']===ad['BLOCK_TYPE']['PAGE']?aL['sub_nodes']:[]},aF['push'](aN);};for(var aJ of this['conflictIds'])yield*aI(aJ);this['conflictIds']['forEach'](aK=>{var aL=aH[aK];this['conflictIds']['includes'](aL['parent_id'])&&(aL['parent_id']=aH[aL['parent_id']]['id']),aL['sub_nodes']=aL['sub_nodes']['map'](aN=>{if(this['conflictIds']['includes'](aN))return aH[aN]['id'];var aO=aF['find'](aP=>aP['id']===aN);return aO?aO['parent_id']=aL['id']:aF['push']({'id':aN,'parent_id':aL['id']}),aN;});var aM=aF['find'](aN=>aN['id']===aL['parent_id']);aM['sub_nodes']=aM['sub_nodes']['map'](aN=>this['conflictIds']['includes'](aN)?aH[aN]['id']:aN);});});}},{'key':'computeLocalChangeData','value':function(){return aw(this,null,function*(){this['conflictIds']=[];var aF=yield ay['dirtyBlockDB']['toArray'](),aG=(aF=aF['map'](aN=>this['parseData'](aN))['filter'](aN=>aN['id']&&!aN['id']['startsWith']('ref-')&&aN['type']!==ad['BLOCK_TYPE']['DATABASE']))['map'](aN=>aN['id']),aH=yield ay['blockDB']['bulkGet'](aG);aH=aH['map'](aN=>this['parseData'](aN));for(var aI=[],aJ=[],aK=['active','attributes','page_id','parent_id','parent_type','permissions','setting','status','sub_nodes','type','source_id'],aL=function*(aN){var aO={'id':aF[aN]['id']};aH[aN]?aK['forEach'](aP=>{'object'==typeof aF[aN][aP]?(0x0,a6['isEqual'])(aF[aN][aP],aH[aN][aP])||(aO[aP]=aF[aN][aP]):aF[aN][aP]!==aH[aN][aP]&&(aO[aP]=aF[aN][aP]);}):aO=aF[aN],Object['keys'](aO)['length']>0x1?aI['push'](aO):aJ['push'](aF[aN]['id']);},aM=0x0;aM<aF['length'];aM++)yield*aL(aM);return aJ['length']&&(yield ay['dirtyBlockDB']['bulkDelete'](aJ)),yield Promise['all'](aI['filter'](aN=>!aN['init']&&aN['parent_id'])['map'](aN=>aw(this,null,function*(){var aO=yield this['getParentIds'](aN['id']),{conflict:aP}=yield(0x0,a7['AI'])({'blockIds':aO,'checkId':aN['id']});aP&&this['conflictIds']['push'](aN['id']);}))),yield this['duplicateBlock'](aI),aI;});}},{'key':'syncChangeData','value':function(){return aw(this,null,function*(){yield this['syncBlockChangeData'](),yield this['syncReferenceChangeData']();});}},{'key':'getCloudChangeData','value':function(){return aw(this,null,function*(){for(var aF=this['spaceStore']['workspaces'],aG=[],aH=[],aI=0x0;aI<aF['length'];aI++)try{var aJ=yield ay['recordsDB']['get'](aF[aI]['id']),aK=aJ?aJ['last_sync_time']:0x0;if(aK){var aL=yield ay['dirtyBlockDB']['where']({'workspace_id':aF[aI]['id']})['toArray'](),{blocks:aM,workspace:aN}=yield(0x0,a7['ug'])({'workspaceId':aF[aI]['id'],'blockIds':aL['map'](aO=>aO['id']),'startTime':aK});aM&&(aG=aG['concat'](aM)),aN&&aN['pages']&&aH['push'](aN);}}catch(aO){}this['cloudChangeBlocks']=aG,this['cloudChangeWorkspaces']=aH;});}},{'key':'computePageIdChangeData','value':function(){return aw(this,null,function*(){for(var aF=this,aG=new ag['Z'](),aH=function*(){var aJ=aF['localChangeBlocks'][aI],aK=aF['cloudChangeBlocks']['find'](aN=>aN['id']===aJ['id']),aL=yield aF['getData'](aJ['id'],!0x0),aM=yield aF['getData'](aJ['id']);if(!aK||!aL)return 0x1;aL['page_id']!==aK['page_id']&&aK['page_id']&&!aJ['hasOwnProperty']('page_id')&&aM['type']!==ad['BLOCK_TYPE']['PAGE']?(aJ['sub_nodes']||aM['sub_nodes'])['forEach'](aN=>{aG['block']['update'](aN,ad['CtT'],[],{'page_id':aK['type']===ad['BLOCK_TYPE']['PAGE']?aK['id']:aK['page_id']});}):aK['type']!==ad['BLOCK_TYPE']['PAGE']||aM['type']===ad['BLOCK_TYPE']['PAGE']||aJ['hasOwnProperty']('type')?aK['type']&&aK['type']!==ad['BLOCK_TYPE']['PAGE']&&aM['type']===ad['BLOCK_TYPE']['PAGE']&&!aJ['hasOwnProperty']('type')&&(aJ['sub_nodes']||aM['sub_nodes'])['forEach'](aN=>{aG['block']['update'](aN,ad['CtT'],[],{'page_id':aJ['page_id']||aK['page_id']});}):(aJ['sub_nodes']||aM['sub_nodes'])['forEach'](aN=>{aG['block']['update'](aN,ad['CtT'],[],{'page_id':aJ['id']});});},aI=0x0;aI<this['localChangeBlocks']['length'];aI++)yield*aH();return aG;});}},{'key':'submitChangeData','value':function(aF,aG){return aG['forEach'](aH=>{var aI,aJ=aH,{id:aK}=aJ,aL=au(aJ,['id']);aL['init']?(delete aL['init'],aL['active']&&aF['block']['set'](aK,ad['CtT'],[],(aI=at({'id':aK},(0x0,a4['Pz'])(aL)),am(aI,ao({'version':0x1}))))):aF['block']['update'](aK,ad['CtT'],[],at({},(0x0,a4['Pz'])(aL)));}),this['localChangeWorkspaces']['forEach'](aH=>{aF['workspace']['updateWorkspace'](aH['id'],{'pages':aH['pages']});}),aF;}},{'key':'syncBlockChangeData','value':function(){return aw(this,null,function*(){var aF=this;this['localChangeWorkspaces']=yield ay['dirtyWorkspaceDB']['toArray'](),this['localChangeBlocks']=yield this['computeLocalChangeData']();var aG=this['localChangeBlocks']['map'](aU=>aU['id']);if(aG['length']){yield this['getCloudChangeData']();for(var aH=new ag['Z'](),aI=new ag['Z'](),aJ=[],aK=function*(){var aU=aF['localChangeBlocks'][aL],aV=aF['cloudChangeBlocks']['find'](bd=>bd['id']===aU['id']);if(!aV)return aJ['push']((0x0,a6['cloneDeep'])(aU)),0x1;var aW=yield aF['getData'](aU['id']);if((0x0,a6['get'])(aU,'attributes.title')&&(0x0,a6['get'])(aV,'attributes.title')){var aX=(0x0,a6['get'])(aV,'attributes.title',[]),aY=(0x0,a6['get'])(aU,'attributes.title',[]);yield aF['checkReference'](aX,aY,aW['workspace_id']);}if('workspace'===aU['parent_type']&&aV['type']&&aV['type']!==ad['BLOCK_TYPE']['PAGE']&&(aU['type']=ad['BLOCK_TYPE']['PAGE']),'workspace'===aV['parent_type']&&!aU['parent_id']&&aU['type']&&aU['type']!==ad['BLOCK_TYPE']['PAGE']&&(aU['type']=ad['BLOCK_TYPE']['PAGE']),aU['page_id']&&aV['page_id']!==aU['page_id']&&aV['parent_id']&&!aU['parent_id']&&(aU['page_id']=aV['page_id']),aV['parent_id']&&aW['parent_id']!==aV['parent_id']){if(aV['workspace_id']&&aV['workspace_id']!==aW['workspace_id']){if(aW['page_id']){var aZ=aF['localChangeBlocks']['find'](bd=>bd['id']===aU['parent_id']);if(aZ){var b0=aZ['sub_nodes']&&aZ['sub_nodes']['indexOf'](aU['id']);b0>=0x0&&aZ['sub_nodes']['splice'](b0,0x1);}}else{var b1=aF['localChangeWorkspaces']['find'](bd=>bd['id']===aW['workspace_id']);if(b1){var b2=b1['pages']['indexOf'](aU['id']);b2>=0x0&&b1['pages']['splice'](b2,0x1);}}delete aU['parent_id'],delete aU['page_id'];}else{if(aU['parent_id']||!0x1===aU['active']){if(aV['page_id']){var b3=aF['cloudChangeBlocks']['find'](bd=>bd['id']===aV['parent_id']);if(b3){var b4=b3['sub_nodes']&&b3['sub_nodes']['indexOf'](aU['id']);b4>=0x0&&b3['sub_nodes']['splice'](b4,0x1);}aH['block']['listRemove'](aV['parent_id'],ad['CtT'],['sub_nodes'],{'id':aU['id']});}else{var b5=aV['workspace_id']||aW['workspace_id'],b6=aF['cloudChangeWorkspaces']['find'](bd=>bd['id']===b5);if(b6){var b7=JSON['parse'](b6['pages']),b8=b7['indexOf'](aU['id']);b8>=0x0&&(b7['splice'](b8,0x1),b6['pages']=JSON['stringify'](b7));}aH['block']['listRemove'](b5,ad['ZhN'],['pages'],aU['id']);}}}}if(aU['parent_id']&&aV['page_id']!==aW['page_id']&&(aU['page_id']=aW['page_id']),aU['sub_nodes']&&aV['sub_nodes']&&!(0x0,a6['isEqual'])(aU['sub_nodes'],aV['sub_nodes'])){var b9=(0x0,a6['difference'])(aU['sub_nodes'],aV['sub_nodes']),ba=(0x0,a6['difference'])(aV['sub_nodes'],aU['sub_nodes']);ba=ba['filter'](bd=>{var be=aF['localChangeBlocks']['find'](bf=>bf['id']===bd);return!be||!(!0x1===be['active']||be['parent_id']&&be['parent_id']!==aU['id']);});var bb=b9['filter'](bd=>{var be=aF['localChangeBlocks']['find'](bf=>bf['id']===bd);return!be||!be['parent_id'];});aU['sub_nodes']=aU['sub_nodes']['filter'](bd=>!bb['includes'](bd)),ba['forEach'](bd=>{var be=aV['sub_nodes']['indexOf'](bd);aU['sub_nodes']['splice'](be,0x0,bd);});}if(aV['workspace_id']&&aV['workspace_id']!==aW['workspace_id']){for(var bc of aF['localChangeBlocks'])(yield aF['isParentId'](aW['id'],bc['id']))&&(bc['workspace_id']=aV['workspace_id']);}aW['active']&&!0x1===aV['active']&&aU['parent_id']&&(aU['active']=!0x0),aJ['push'](aU),aU['type']&&!aU['init']&&aU['type']!==aV['type']&&aI['block']['update'](aU['id'],ad['CtT'],[],{'type':aU['type']});},aL=0x0;aL<this['localChangeBlocks']['length'];aL++)yield*aK();for(var aM=function*(){var aU=aF['localChangeWorkspaces'][aN],aV=aF['cloudChangeWorkspaces']['find'](aX=>aX['id']===aU['id']);if(aV){var aW=JSON['parse'](aV['pages']);(0x0,a6['difference'])(aW,aU['pages'])['forEach'](aX=>{var aY=aW['indexOf'](aX);aU['pages']['splice'](aY,0x0,aX);});}},aN=0x0;aN<this['localChangeWorkspaces']['length'];aN++)yield*aM();var aO=[];for(var aP of aJ){var aQ=yield this['getData'](aP['id']);aQ&&(aQ['page_id']&&!aO['includes'](aQ['page_id'])?(yield this['getData'](aQ['page_id'],!0x0))&&aO['push'](aQ['page_id']):aQ['page_id']||aO['includes'](aQ['id'])||(yield this['getData'](aQ['id'],!0x0))&&aO['push'](aQ['id']));}var aR=[yield this['submitChangeData'](aH,aJ),yield this['computePageIdChangeData'](),aI];for(var aS of(aO['length']&&(yield(0x0,a8['Rm'])({'pageIds':aO,'isFlight':!0x0})),aR))aS['operations']['length']&&(yield(0x0,a7['YL'])([aS]['map'](aU=>({'id':aU['id'],'operations':aU['operations']})),{'ignoreFlyMode':!0x0}));try{var aT=yield ay['dirtyBlockDB']['toArray']();window['interop']&&window['interop']['saveSnapshot']&&window['interop']['saveSnapshot'](aT);}catch(aU){}yield ay['dirtyBlockDB']['bulkDelete'](aJ['map'](aV=>aV['id'])),this['conflictIds']['length']&&(yield ay['dirtyBlockDB']['bulkDelete'](this['conflictIds'])),yield ay['dirtyWorkspaceDB']['bulkDelete'](this['localChangeWorkspaces']['map'](aV=>aV['id']));}});}},{'key':'checkReference','value':function(aF,aG,aH){return aw(this,null,function*(){var aI=this,aJ=[];aF['forEach'](aN=>{var aO=aN[0x1]&&aN[0x1]['find'](aP=>'BiLink'===aP[0x0]);aO&&aJ['push'](aO);});var aK=function*(){var aN=aL[0x1]&&aL[0x1]['find'](aP=>'BiLink'===aP[0x0]);if(aN){var aO=aJ['findIndex'](aP=>aP[0x1]===aN[0x1]);aO>=0x0?aJ['splice'](aO,0x1):yield aI['updateReference'](aN[0x1],{'workspace_id':aH,'active':!0x0});}};for(var aL of aG)yield*aK();for(var aM of aJ)yield this['updateReference'](aM[0x1],{'workspace_id':aH,'active':!0x1});});}},{'key':'syncReferenceChangeData','value':function(){return aw(this,null,function*(){for(var aF=this['spaceStore']['workspaces'],aG=[],aH=0x0;aH<aF['length'];aH++){var aI=yield ay['referenceDB']['where']({'workspace_id':aF[aH]['id']})['toArray']();aG['push']['apply'](aG,ah(aI));}if(aG['length']){var aJ=new ag['Z']();aG['forEach'](aK=>{if(aK['init'])aK['active']&&(delete aK['init'],aJ['reference']['createReference'](aK['id'],aK));else{var aL=aK,{id:aM}=aL,aN=au(aL,['id']);aJ['reference']['updateReference'](aK['id'],aN);}}),yield(0x0,a7['YL'])([aJ]['map'](aK=>({'id':aK['id'],'operations':aK['operations']})),{'ignoreFlyMode':!0x0}),yield ay['referenceDB']['bulkDelete'](aG['map'](aK=>aK['id']));}});}},{'key':'syncToBlockDB','value':function(aF){return aw(this,null,function*(){if(ad['mO6']){var aG=Array['isArray'](aF)?aF:[aF];aG=aG['map'](aH=>{var aI=(0x0,a6['cloneDeep'])(aH);return delete aI['version'],delete aI['isLoading'],aI['source_id']&&(aI['attributes']={},aI['setting']={},aI['sub_nodes']=[],aI['type']=ad['BLOCK_TYPE']['TEXT']),aI;})['filter'](aH=>aH['id']&&!aH['id']['startsWith']('ref-'));try{aG['forEach'](aH=>{aH['source_id']||(af['Z']['index']['contain'](aH['id'])?af['Z']['index']['update'](aH['id'],this['blockAPI']['getTitlePlainTextByTitle'](aH['attributes']['title'])):af['Z']['index']['add'](aH['id'],this['blockAPI']['getTitlePlainTextByTitle'](aH['attributes']['title'])));}),yield ay['dirtyBlockDB']['bulkPut'](aG['map'](aH=>({'id':aH['id'],'page_id':aH['page_id'],'workspace_id':aH['workspace_id'],'data':V()['encrypt'](JSON['stringify'](aH),aH['id']['substr'](0x0,0xa))['toString']()})));}catch(aH){}}});}},{'key':'createReference','value':function(aF){return aw(this,null,function*(){var {blockId:aG,pageId:aH,referencedBlockId:aI,workspaceId:aJ}=aF,aK=yield this['getData'](aI),aL={'id':(0x0,a3['Vj'])(),'workspace_id':aJ,'page_id':aH,'block_id':aG,'referenced_workspace_id':aK['workspace_id'],'referenced_page_id':aK['type']===ad['BLOCK_TYPE']['PAGE']?aK['id']:aK['page_id'],'referenced_block_id':aI,'created_by':this['userStore']['userId'],'created_time':new Date()['getTime'](),'edited_by':this['userStore']['userId'],'edited_time':new Date()['getTime'](),'active':!0x0,'init':!0x0};return yield ay['referenceDB']['put'](aL),aL['id'];});}},{'key':'updateReference','value':function(aF,aG){return aw(this,null,function*(){0x0===(yield ay['referenceDB']['update'](aF,aG))&&(yield ay['referenceDB']['put'](at({'id':aF},aG)));});}},{'key':'getData','value':function(aF,aG){return aw(this,null,function*(){var aH;aH='string'==typeof aF?[aF]:aF;var aI=yield ay['blockDB']['bulkGet'](aH),aJ=[];aG||(aJ=yield ay['dirtyBlockDB']['bulkGet'](aH));var aK=this['getLatestBlocks'](aI,aJ);return'string'==typeof aF?aK[0x0]:aK;});}},{'key':'isParentId','value':function(aF,aG){return aw(this,null,function*(){var aH=yield this['getData'](aG);if(!aH)return!0x1;for(var aI=[];aH['parent_type']!==ad['BLOCK_TYPE']['PAGE']&&'workspace'!==aH['parent_type']&&aH['parent_id']!==aF&&!aI['includes'](aH['parent_id']);)aI['push'](aH['parent_id']),aH=yield this['getData'](aH['parent_id']);return aH['parent_id']===aF;});}},{'key':'getParentIds','value':function(aF){return aw(this,null,function*(){for(var aG=yield this['getData'](aF),aH=[];'workspace'!==aG['parent_type']&&!aH['includes'](aG['parent_id']);)aH['push'](aG['parent_id']),aG=yield this['getData'](aG['parent_id']);return aH;});}},{'key':'getLatestBlocks','value':function(){var aF=arguments['length']>0x1&&void 0x0!==arguments[0x1]?arguments[0x1]:[],aG=arguments['length']>0x2&&void 0x0!==arguments[0x2]?arguments[0x2]:{},aH=[]['concat'](ah(arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:[]),ah(aF)),aI={};return aH['forEach'](aJ=>{aJ&&aJ['id']&&(aI[aJ['id']]=aJ);}),aH=Object['values'](aI),aG['noParse']?aH:aH=aH['map'](aJ=>aJ['id']?this['parseData'](aJ):null);}},{'key':'parseData','value':function(aF){if(aF&&aF['data']){var aG=V()['decrypt'](aF['data'],aF['id']['substr'](0x0,0xa));return JSON['parse'](aG['toString'](a1()));}return aF;}}],aC&&aj(aB['prototype'],aC),aD&&aj(aB,aD),Object['defineProperty'](aB,'prototype',{'writable':!0x1}),aB;var aB,aC,aD;}());av([a9['f3']],az['prototype'],'editorUI',0x2),av([a9['f3']],az['prototype'],'blockAPI',0x2),av([a9['f3']],az['prototype'],'userStore',0x2),av([a9['f3']],az['prototype'],'pageStore',0x2),av([a9['f3']],az['prototype'],'spaceStore',0x2),av([a9['f3']],az['prototype'],'blockStore',0x2),av([a9['f3']],az['prototype'],'workspaceStore',0x2);const aA=new az();},'s4ZO':(b,d,f)=>{f['d'](d,{'e':()=>x});var g=f('FGQ2'),h=f('yTMO'),j=f('ASbq'),k=f('k8fO'),m=f('/kC5'),q=f('P3sh');function v(y,z){for(var A=0x0;A<z['length'];A++){var B=z[A];B['enumerable']=B['enumerable']||!0x1,B['configurable']=!0x0,'value'in B&&(B['writable']=!0x0),Object['defineProperty'](y,w(B['key']),B);}}function w(y){var z=function(A,B){if('object'!=typeof A||!A)return A;var C=A[Symbol['toPrimitive']];if(void 0x0!==C){var D=C['call'](A,B||'default');if('object'!=typeof D)return D;throw new TypeError('@@toPrimitive\x20must\x20return\x20a\x20primitive\x20value.');}return('string'===B?String:Number)(A);}(y,'string');return'symbol'==typeof z?z:z+'';}var x=(function(){function y(){!function(C,D){if(!(C instanceof D))throw new TypeError('Cannot\x20call\x20a\x20class\x20as\x20a\x20function');}(this,y),this['connected']=!0x1,this['callbacks']=new j['m'](this),this['channels']=new Map(),y['realtimeSessionId']=(0x0,m['Vj'])();}return z=y,(A=[{'key':'start','value':function(){var C=''['concat'](h['wC'],'?ver=')['concat'](k['i8'],'&realtimeSessionId=')['concat'](y['realtimeSessionId']);this['primus']=(0x0,g['Z'])(C,{'manual':!0x0,'reconnect':{'min':0x1f4,'max':0x7d0,'retries':0x1/0x0}}),this['primus']['on']('open',()=>{this['connected']=!0x0,this['callbacks']['consumeOnConnected']();}),this['primus']['on']('data',D=>{this['onMessage'](D);}),this['primus']['on']('reconnect',()=>{this['resubscribePrevChannels']();}),this['primus']['open']();}},{'key':'dispose','value':function(){this['connected']=!0x1,this['callbacks']['clear'](),this['primus']&&this['primus']['destroy'](),this['primus']=null;}},{'key':'send','value':function(C){this['primus']&&this['primus']['write'](C);}},{'key':'onMessage','value':function(C){var D,E,F;switch(C['type']){case'confirm_subscription':var G=C['payload']['channel'];return void(null==(D=this['channels']['get'](G))||D['emitSubscribed']());case'reject_subscription':var H=C['payload']['channel'];return void(null==(E=this['channels']['get'](H))||E['emitRejected']());case'broadcast':var I=C['payload']['channel'];return void(null==(F=this['channels']['get'](I))||F['emitData'](C['payload']['data']));default:console['warn']('REALTIME:\x20unrecognized\x20msg:\x20',C);}}},{'key':'waitTillConnected','value':function(C){if(!q['mO6'])return C?this['callbacks']['registerOnConnected'](C):new Promise(D=>{this['callbacks']['registerOnConnected'](D);});}},{'key':'unsubscribeChannels','value':function(C){this['channels']['forEach']((D,E,F)=>{D instanceof C&&(D['unsubscribe'](),F['delete'](E));});}},{'key':'resubscribePrevChannels','value':function(){this['channels']['forEach'](C=>{C['subscribe']();});}}])&&v(z['prototype'],A),B&&v(z,B),Object['defineProperty'](z,'prototype',{'writable':!0x1}),z;var z,A,B;}());}}]);
</script>

</body>
</html>
