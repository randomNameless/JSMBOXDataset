<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>offers.min.html</title>
</head>
<body>

<script>
function registerMerchandisingData(e){try{if(!!e.detail.analyticsVisitorID){Offers.sessionData.sessionId=e.detail.analyticsVisitorID;Offers.postEventsForFirstVisit()}}catch(e){console.log(e)}}if(document.addEventListener){document.addEventListener("registerMerchandisingData",registerMerchandisingData)}else if(document.attachEvent){document.attachEvent("registerMerchandisingData",registerMerchandisingData)}function OffersInit(){return{version:"release/2024.5.0",sessionData:{sessionId:null,ips:[],referrerDomain:"",searchTerm:"NULL",isNewVisitor:false,cid:"NULL",iCount:0,marketingPageId:"",marketingRegion:"",pagePath:"",userType:"",channel:""},debugOffers:false,FIRSTVISIT:"firstVisit",postEventsCallback:[],setAudienceDone:false,firstVisit:false,ipsAll:{},ipsPreloaded:[],ipsDefaultOffers:[],ipsPostloaded:[],ipsIncluded:[],ipsExcluded:[],loadFinished:false,payload:false,waitForPayload:false,executed:false,channel:"",searchTerm:"NULL",scode:null,loadOfferURL:"/event/offer/load",postEventURL:"/event/offer/postevent",aemOfferUiURL:"/event/offer/ui",startSessionURL:"/event/offer/startsession",setAudienceURL:"/event/offer/setaudience",loadRecommendationsURL:"/api/store/recommendations/load",initComplete:false,initStart:(new Date).getTime(),initEnd:0,initDuration:0,request:{},response:{},interactReportParams:{},postEvents:[],ipsPayloadNotRequired:["tf-headerfooter-hb","tf-scms-digitalMerch","tf-headerfooter-lb","tf-account-container-1"],promotionsDiv:"tf-cq-pc",newProductsDiv:"tf-cq-np",recommendationsRequest:{},recommendationsResponse:{},getCookie:function(e){var t=e+"=",r=document.cookie,n=r.indexOf(t),o=null,s;if(n!==-1){s=r.indexOf("; ",n);if(s===-1){s=r.length}o=r.slice(n+t.length,s);o=unescape(o)}return o},getUrlParameter:function(e){var t=decodeURIComponent(Offers.location.search().substring(1)),r=t.split("&"),n,o,s=false;for(o=0;o<r.length;o++){n=r[o].split("=");if(n[0]===e){s=n[1]===undefined?true:n[1];break}}return s},prepareInteractOfferRequest:function(e,t){var r,n=this.getQueryParam("CID"),o=this.getQueryParam("ICID"),s=[],a,i=0;r=$.extend({},this.sessionData);r.sessionId=this.sessionData.sessionId;r.isNewVisitor=this.getIsNewVisitor("s_days_since");if(n.length!==0){r.cid=n}if(o.length!==0){r.icid=o}r.channel=this.channel||(this.channel=this.getChannel());r.userType=this.getUserType();r.marketingRegion=this.getMarketingRegion();r.marketingPageId=this.getMarketingPageId();for(i=0;i<t.length;i++){s.push(t[i])}if(!s.length){a=this.getIps();for(i=0;i<a.length;i++){s.push(i)}}r.ips=s;r.pagePath=this.processPagePath(Offers.location.pathname(),Offers.location.search());if(e){if(e.hasOwnProperty("skus")){e.pdpSkus=e.skus;delete e.skus}if(e.hasOwnProperty("cartTotal")){if(e.cartTotal==="undefined"||e.cartTotal===undefined||e.cartTotal===null){e.cartTotal=""}else{e.cartTotal=e.cartTotal.replace(/[$,]+/g,"");e.cartTotal=e.cartTotal.replace("***","-1")}}if(e.hasOwnProperty("cartSkus")){e.cartSkus=this.createCartSkusObj(e.cartSkus)}if(e.hasOwnProperty("searchTerm")){this.searchTerm=e.searchTerm}$.extend(r,e)}console.log("offers.js - Offers Request Payload: "+JSON.stringify(r));return r},getIps:function(e){var t=".dynamic-offer[id] , .dynamic-offer:not([id])",r="",n={},o="",s="",a,i=0;if(!!e&&!!e.include){for(;i<e.include.length;i++){o+="#"+e.include[i]+", ";s+="."+e.include[i]+", ";this.ipsIncluded.push(e.include[i])}r=o+s.substring(0,s.length-2)}t=!!r?r:t;$(t).each((function(){var e=$(this).attr("class"),t=$(this).attr("id");if(!!t){n[t]="id"}else if(!!e){e=e.split(" ");if(e.indexOf("hide")==-1){for(i=0;i<e.length;i++){a=e[i];if(a.indexOf("tf-")>-1){n[a]="class"}}}}}));if(!!e&&!!e.exclude){i=0;for(;i<e.exclude.length;i++){if(!Offers.includes(this.ipsExcluded,e.exclude[i])){this.ipsExcluded.push(e.exclude[i])}delete n[e.exclude[i]]}}this.ipsAll=n;return n},includes:function(e,t){var r=e.length;for(var n=0;n<r;n++){if(e[n]===t){return true}}return false},checkIfExists:function(e,t,r){for(var n in e){if(e[n][t]===r){return true}}return false},requestPostloadedOffers:function(e,t){console.log("requestPostloadedOffers()",e,t);this.request=this.prepareInteractOfferRequest(e,t);if(this.getCookie("cq-authoring-mode")!=null){Offers.showDefaultContent()}else{this.invokeOfferSnippetAjax(this.request)}return true},loadOffers:function(e,t){console.log("loadOffers() called. ",e);if(Offers.loadFinished){return}Offers.channel=this.getChannel();Offers.ipsAll=this.getIps(t);var r=this.payloadRequired();if(!r&&e){console.log("does not need payload.");return"does not need payload"}if(r&&!e){console.log("need payload.");return"need payload"}this.validatePreloadOffers();this.setPostEventsForPreload();this.response.sessionId=this.cleanSessionId(this.request.sessionId);if(!!this.ipsPostloaded&&this.ipsPostloaded.length>0){console.log("Preload incomplete :: start postload or ips:",this.ipsPostloaded);this.requestPostloadedOffers(e,this.ipsPostloaded)}Offers.loadFinished=true;if(Offers.setAudienceDone){Offers.executePostEventCallbacksForFirstVisit()}},executePostEventCallbacksForFirstVisit:function(){var e=0,t;for(;e<Offers.postEventsCallback.length;e++){t=Offers.postEventsCallback[e];Offers.postPageViewEvent(t[0],t[1],t[2])}Offers.postEventsCallback=[]},validatePreloadOffers:function(){Offers.ipsPreloaded=this.getPreloadedIpsWithInteractOffers();Offers.ipsDefaultOffers=this.getPreloadedIpsWithDefaultOffers();Offers.ipsPostloaded=this.getPostloadedIps()},setPostEventsForPreload:function(){var e,t,r,n,o,s,a;if(!this.isPreloadOffersAvailable()){console.log("No offer placement map available from preload. No postevents sent for preload.");return false}s=window.preloadOffers.response.offerPlacementMap;e=this.ipsPreloaded;console.log("Sent post events for the preloaded offers:",e);for(t=0;t<e.length;t++){r=e[t];console.log("post ip",r);n=s[r];if(!!n&&!!n.offerHTML){o=this.getOfferTypeFromDivId(r);a=document.querySelector("."+r+" , #"+r);if(a.getAttribute("preloaded")&&!a.getAttribute("isConfigured")){a.setAttribute("isConfigured","true");this.sendContactEvent(n,o);this.addClickEvent(n,o,r,t)}else{this.offerInjectedEvent(n,o,r,t)}}else{console.log("Offer Html invalid. Contact event is not triggered for divId: "+r)}}return true},offerInjectedEvent:function(e,t,r,n){if(document.addEventListener){document.addEventListener(r,(function(o){console.log("addEvent for : "+r);Offers.sendContactEvent(e,t);Offers.addClickEvent(e,t,r,n)}))}else if(document.attachEvent){document.documentElement.attachEvent("onpropertychange",(function(o){if(o.propertyName==r){console.log("attachEvent for :"+r);Offers.sendContactEvent(e,t);Offers.addClickEvent(e,t,r,n);document.documentElement.detachEvent("onpropertychange",arguments.callee)}}))}},getPreloadedInteractionPoints:function(){var e=[],t;for(t=0;t<Offers.ipsPreloaded.length;t++){try{e.push(window.preloadOffers.response.offerPlacementMap[Offers.ipsPreloaded[t]].interactPoint)}catch(e){console.error("Exception in getting Interaction Point for div id:",Offers.ipsPreloaded[t])}}return e},sendContactEvent:function(e,t){interactReportParams=this.prepareInteractReportParams(t,e);if(Offers.isCookieConsentInProgress()||Offers.isFirstVisit&&!Offers.setAudienceDone&&Offers.areCookiesAccepted()){Offers.postEventsCallback.push([e,"contact",this.interactReportParams])}else{this.postPageViewEvent(e,"contact",interactReportParams)}},addClickEvent:function(e,t,r,n){divType=this.ipsAll[r];divToLoadOfferObj=$((divType==="id"?"#":".")+r);this.ctaAction(t,e,divToLoadOfferObj,n)},addToCartEvent:function(e){var t=t||{};var r=e?e:{};var n=r.ctaObj;var o=r.interactObject;var s=r.offerObj;var a=o.dpoSku;var i="SOM";var f=Offers.getPageType();var c={add:"Add to cart",adding:"Adding...",added:"Added to cart"};if(o&&o.dpoSku){if(o.dpoSku.includes(",")){o.partNumber=s.find(".offer-dpo-sku-custom-class").attr("data-dpo-sku")}else{o.partNumber=o.dpoSku}}var a=o.partNumber||"";var i=o.dpoSkuModel||"SOM";var d={event:"event25",data:{eVar66:i+"|AddToCart|"+"0"+"|"+a+f+"|"+r.sku,eVar67:i+"|AddToCart|"+"0"+"|"+a+f+"|"+r.sku,prop62:t.pageType,eVar62:t.pageType}};console.log("Offer Js - Add to cart Product: ",a);Offers.recordDigitalDataMetrics({placement:f,recommendationType:i});Offers.addToCartAnalytics(i,f,a);if(typeof miniCart!=="undefined"&&miniCart.addProductsToCart){$(n[1]).length>0?$(n[1]).text(c.adding):$(n[1]);n.attr("style","color:gray !important; cursor: default;").addClass("disabled");if(!s.find(".offer-cta").hasClass("dm-btn-text")){s.find(".offer-cta").css("background-color","gray")}miniCart.addProductsToCart([{sku:a,qty:1}],d);$(n[1]).length>0?$(n[1]).text(c.added):$(n[1]);console.log("Offer Js - Added to cart - Product: ",a)}else{console.log("minicart object not found on the page.")}},getPageType:function(){if(window.location.href.indexOf("/search/results")>-1){return"searchpage"}return"searchpage"},checkForAddToCart:function(e,t){var r=e.text()?e.text().toLowerCase().trim():"";if(r.includes("add to cart")){e.attr("addToCart","true");if(e&&e.length>1){$(e[0]).parent().removeClass("entireClickable")}}},checkAndInvokeAddToCart:function(e,t,r){if(e[0]&&e[0].getAttribute("addToCart")=="true"){if(!e.hasClass("disabled")){Offers.addToCartEvent({ctaObj:e,interactObject:t,offerObj:r})}return true}return false},addToCartAnalytics:function(e,t,r){console.log("Offer Js - Add To Cart Analytics Product: ",r);var n="addToCart",o=e=="BIAM"?"Buy it again":"Search optimization";var s="1",a="1",i="1";var f={addMethod:o,catalogNumber:r,quantity:i,title:"",uom:"",price:"",designId:r,recommendationLocation:t,recommendationPosition:s,recommendationType:o,recommendationNewFormat:e+"|"+t+"|"+n+"|"+s+"|"+a+"|"+r};console.log("Offer JS - Sending Add To Cart Analytics for Product: ",r);try{document.dispatchEvent(new CustomEvent("cartAdd",{detail:{products:[f]}}))}catch(e){console.log("Error while sending Analytics for Add To Cart Product Recommendation New Format");console.error(e)}},recordDigitalDataMetrics:function(e){if(typeof window.digitalData=="undefined"&&typeof window.digitalData.page=="undefined"){console.log("SPB Offer - digitalData.page.recommendationsModel information couldn't be set as digitalData/digitalData.page JS object doesn't exist.");return}var t=e.placement.toUpperCase().replace("-","");var r=e.recommendationType.toUpperCase();if(!Offers.recommendationsMetricsAvailable(window.digitalData.page.recommendationModels)){window.digitalData.page.recommendationModels=[t+":"+r]}else{var n=false;window.digitalData.page.recommendationModels.forEach((function(e,o){if(e.indexOf(t)===0){window.digitalData.page.recommendationModels[o]=e+"|"+r;n=true}}));if(!n){window.digitalData.page.recommendationModels.push(t+":"+r)}}},recommendationsMetricsAvailable:function(e){return typeof e!=="undefined"&&e.length>0},isPreloadOffersAvailable:function(){return!!window.preloadOffers&&!!window.preloadOffers.response&&!!window.preloadOffers.response.offerPlacementMap},getPreloadedIpsWithInteractOffers:function(){var e=[],t=this.getIps(),r,n,o;if(this.isPreloadOffersAvailable()){o=window.preloadOffers.response.offerPlacementMap;for(r in t){n=document.querySelector("#"+r+" , ."+r);if(Offers.isValidPreloadedOffer(o,r,n)){e.push(r);if(Offers.isPreloadedOfferReadyToBeRendered(o,r,n)){Offers.renderPreloadedOffer(o,r,n)}}}}console.log("getPreloadedIpsWithInteractOffers():",e);return e},renderPreloadedOffer:function(e,t,r){r.innerHTML=e[t].offerHTML;const n=r.querySelectorAll("script");for(var o=0;o<n.length;o++){window.preloadOffers.scriptNode.push(n[o])}r.setAttribute("preloaded","true");r.setAttribute("offerUrl",e[t].offerUrl)},isValidPreloadedOffer:function(e,t,r){return Offers.offerMapHasOffer(e,t)&&(Offers.offerElementHasPreloadedAttribute(r)||Offers.isValidOfferHtml(e,t))},isPreloadedOfferReadyToBeRendered:function(e,t,r){return Offers.isValidOfferHtml(e,t)&&!Offers.offerElementHasPreloadedAttribute(r)&&r.innerHTML.length===0},offerElementHasPreloadedAttribute:function(e){return!!e&&!!e.getAttribute("preloaded")&&e.getAttribute("preloaded")==="true"},isValidOfferHtml:function(e,t){return Offers.offerMapHasOffer(e,t)&&e[t].hasOwnProperty("offerHTML")&&!!e[t].offerHTML},offerMapHasOffer:function(e,t){return!!e&&e.hasOwnProperty(t)&&!!e[t]},getPreloadedIpsWithDefaultOffers:function(){var e=[],t=this.getIps(),r,n;if(this.isPreloadOffersAvailable()){for(r in t){n=t[r]=="id"?"#":".";if(!!$(n+r)&&$(n+r).attr("preloaded")=="false"){e.push(r)}}}return e},getPostloadedIps:function(){var e=this.ipsDefaultOffers,t=this.ipsPreloaded,r=[],n;for(n in Offers.ipsAll){if(!Offers.includes(e,n)&&!Offers.includes(t,n)&&!Offers.includes(Offers.ipsExcluded,n)){r.push(n)}}console.log("Postloaded ips: "+r);return r},validatePayload:function(e,t){var r=false,n;if(t==="search"){n=e;if(n===null||typeof n==="undefined"){console.log("Empty payload to request dynamic offer for search result page.")}else if(!n.hasOwnProperty("searchTerm")){console.log("Missing parameter searchTerm in the payload.")}else if(!n.hasOwnProperty("focusArea")){console.log("Missing parameter focusArea in the payload.")}else{r=true;if(typeof n["searchTerm"]==="undefined"||n["searchTerm"]===null||n["searchTerm"].trim().length===0){console.warn("WARN: empty search term.");r=true}if(typeof n["focusArea"]==="undefined"||n["focusArea"]===null||n["focusArea"].trim().length===0){console.warn("WARN: Empty focus area.");r=true}}}return r},loadSearchOffers:function(e){this.validatePayload(e,"search");if(this.debugOffers){console.log("Loading search offer with payload: "+JSON.stringify(e))}this.start(e)},loadPdpOffers:function(e){this.start(e,{exclude:["tf-cart-overlay-1"]})},loadCartOffers:function(e){this.start(e)},loadCartOverlay:function(e){console.log("loadCartOverlay()",e);this.requestPostloadedOffers(e,["tf-cart-overlay-1"])},setSessionId:function(){var e=this.getCookie("s_vi")||this.FIRSTVISIT,t=window.preloadOffers;if(!navigator.cookieEnabled){e="cookies-disabled"}if(!!t&&!!t.succeed&&!!t.response&&!!t.response.sessionId){Offers.sessionData.sessionId=t.response.sessionId}else{Offers.sessionData.sessionId=e}if(e!=this.FIRSTVISIT&&e!="cookies-disabled"&&!Offers.setAudienceDone){Offers.postEventsForFirstVisit()}},start:function(e,t){var r=this.payloadRequired();if(r&&!e){return}if(!window.preloadOffers){window.preloadOffers={}}try{if(this.meetMinimalJQueryVersion()){$((function(){try{if(Offers.isPreloadInProgress()){Offers.createPreloadEventListener(e,t)}else{if(Offers.isCookieConsentInProgress()){Offers.createCookieConsentListener(e,t)}else{Offers.preloadResponseValidation(e,t)}Offers.executePreloadScripts()}}catch(e){console.log("offers.js unexpected error: "+e)}}))}else{console.log("JQuery version not met. Load default offers.");Offers.showDefaultContent();return false}}catch(e){console.log("Cannot load offers. Load default offers. Error:",e);Offers.showDefaultContent();return false}return true},executePreloadScripts:function(){var e=window.preloadOffers,t,r,n,o;if(!e||!e.scriptNode||e.scriptNode.length<=0){return}for(n=0;n<e.scriptNode.length;n++){try{r=e.scriptNode[n];o=r.parentElement;t=document.createElement("script");t.type="text/javascript";t.text=r.text;o.insertBefore(t,r);o.removeChild(r)}catch(e){console.log("offers.js - node script could not execute")}}},handlerEvent:function(){var e=Offers.payloadTemp,t=Offers.excludedOrIncludedIpsTemp;if(document.removeEventListener){document.removeEventListener("preloadOffers",Offers.handlerEvent)}else if(document.detachEvent){document.detachEvent("preloadOffers",Offers.handlerEvent)}Offers.preloadResponseValidation(e,t)},createPreloadEventListener:function(e,t){Offers.payloadTemp=e;Offers.excludedOrIncludedIpsTemp=t;var r=window.addEventListener||document.attachEvent;try{r("preloadOffers",(function(r){if(Offers.isCookieConsentInProgress()){Offers.createCookieConsentListener(e,t)}else{Offers.preloadResponseValidation(e,t)}Offers.executePreloadScripts()}))}catch(e){console.error("Cannot create event listener. Error:",e)}},preloadResponseValidation:function(e,t){Offers.setSessionId();if(!Offers.isPreloadDefined()){console.log("Preload incomplete :: start postload or ips:",Offers.ipsPostloaded);Offers.ipsAll=this.getIps(t);Offers.validatePreloadOffers();Offers.requestPostloadedOffers(e,Offers.ipsPostloaded);return}if(!Offers.isPreloadInProgress()){if(Offers.isPreloadOffersAvailable()){Offers.firstVisit=window.preloadOffers.response.firstVisit;Offers.createRequestPostEventsListener();Offers.loadOffers(e,t)}else{Offers.ipsAll=this.getIps(t);Offers.validatePreloadOffers();console.log("Preload incomplete :: start postload or ips:",Offers.ipsPostloaded);Offers.requestPostloadedOffers(e,Offers.ipsPostloaded)}}},postEventsForFirstVisit:function(){try{if(!window.preloadOffers.response){console.log("postEventsForFirstVisit() - preloadOffers.response is not available.");return false}}catch(e){console.log("preloadOffers object not initalized");return false}if(!window.preloadOffers.response.firstVisit||Offers.setAudienceDone){console.log("postEventsForFirstVisit() - not the first visit anymore.");return false}Offers.validatePreloadOffers();var e={uuid:window.preloadOffers.response.sessionId,svi:Offers.getCookie("s_vi"),channel:Offers.channel,preloadedInteractionPoints:Offers.getPreloadedInteractionPoints()};if(e.preloadedInteractionPoints.length>0){Offers.setAudienceDone=true;$.ajax({url:Offers.setAudienceURL,type:"POST",data:JSON.stringify(e),contentType:"application/json",success:function(e,t,r){try{var n=JSON.parse(r.responseText);if(n.statusCode==1||n.statusCode==0){Offers.executePostEventCallbacksForFirstVisit();return true}else{console.error("postEventsForFirstVisit() - set audience status code error:",n.statusCode);return false}}catch(e){console.error("postEventsForFirstVisit() - error in sending page view event:",e);return false}},error:function(e,t,r){console.error("postEventsForFirstVisit() - error in set audience ajax call to back end service.",r)}})}},createCartSkusObj:function(e){var t={},r,n,o,s;if(e){for(r=0;r<e.length;r++){n=e[r].sku;o=e[r].quantity;if(t.hasOwnProperty(n)){s=t[n];t[n]=s+o}else{t[n]=o}}}return t},showDefaultContentEnabled:function(){return this.getCookie("cq-authoring-mode")!=null},invokeOfferSnippetAjax:function(e){window.performance&&window.performance.mark&&window.performance.mark("offers.js:loadBegin");$.ajax({url:this.loadOfferURL,type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",timeout:5e3,success:function(e,t,r){if(r&&r.hasOwnProperty("responseText")){var n=JSON.parse(r.responseText);Offers.response=$.extend(Offers.response,n);Offers.setInteractValues(n);if(Offers.debugOffers){console.log("offers.js - Starting loading offers for session:::: "+n.hasOwnProperty("statusCode")?"status code : "+n.statusCode:"no status code")}if(n.hasOwnProperty("statusCode")&&n.statusCode==200){Offers.loadOfferSnippetHTML(n.offerPlacementMap)}else{if(Offers.debugOffers){console.log("offers.js - Status Code: Not defined or not 200. Showing default contents.")}Offers.showDefaultContent()}}else{if(Offers.debugOffers){console.log("offers.js - No jqXHR.hasOwnProperty - responseText")}Offers.showDefaultContent()}window.performance&&window.performance.mark&&window.performance.mark("offers.js:loadEnd");Offers.executePreloadScripts()},error:function(e,t){if(Offers.debugOffers){console.log("offers.js - Load call did not complete correctly")}Offers.showDefaultContent();window.performance&&window.performance.mark&&window.performance.mark("offers.js:loadEnd")}})},performanceUserTimingMark:function(e){window.performance&&window.performance.mark&&window.performance.mark(e)},promisedOfferSnippet:function(e){return new Promise(function(t,r){$.ajax({url:this.loadOfferURL,type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",timeout:5e3,success:function(e,n,o){if(o&&o.hasOwnProperty("responseText")){t({data:e,textStatus:n,jqXHR:o})}else{var s="Showing Digital Marketing Offers default content.";if(Offers.debugOffersModeEnabled(s)){s+=" offers.js - No jqXHR.hasOwnProperty - responseText"}r(s)}},error:function(e,t){var n="Showing Digital Marketing Offers default content.";if(Offers.debugOffersModeEnabled(n)){n+=" offers.js - Load call did not complete correctly"}r(n)}})}.bind(this))},debugOffersModeEnabled:function(){return Offers.debugOffers},parseInteractResponseObject:function(e){const t=JSON.parse(e.jqXHR.responseText);Offers.response=$.extend(Offers.response,t);Offers.setInteractValues(t);return t},isValidDynamicOffersResponse:function(e){return e.hasOwnProperty("statusCode")&&e.statusCode===200},isValidOfferPlacementMap:function(e){return e.hasOwnProperty("offerPlacementMap")},setInteractValues:function(e){var t=e.hasOwnProperty("sessionId")?e.sessionId:"",r=e.hasOwnProperty("s_vi_low")?e.s_vi_low:"",n=e.hasOwnProperty("s_vi_high")?e.s_vi_high:"",o=e.hasOwnProperty("timeStamp")?e.timeStamp:new Date;if(typeof Interact!=="undefined"){Interact.sessionId=t;Interact.s_vi_low=r;Interact.s_vi_high=n;Interact.timeStamp=o;Interact.localTimeStamp=new Date;this.cid=this.getCookie("s_cmp_tc");if(!!Interact.startSessionComplete&&typeof Interact.startSessionComplete.resolve==="function"){Interact.startSessionComplete.resolve()}if(this.debugOffers){console.log("offers.js - Interact sessionId = "+Interact.sessionId);console.log("offers.js - Interact s_vi_low = "+Interact.s_vi_low);console.log("offers.js - Interact s_vi_high = "+Interact.s_vi_high);console.log("offers.js - Interact timeStamp = "+Interact.timeStamp);console.log("offers.js - Interact startSessionComplete  as resolved")}}else if(this.debugOffers){console.log("offers.js - Interact object not defined!!!")}if(!!digitalData&&!!digitalData.addChildObjectAttribute){digitalData.addChildObjectAttribute("merchandising","sessionId",t);digitalData.addChildObjectAttribute("merchandising","s_vi_high",n);digitalData.addChildObjectAttribute("merchandising","s_vi_low",r)}},showDefaultContent:function(e){var t,r,n,o;if(e){r=$("#"+e).length>0?"#":".";t=$(r+e).children(".loading-wheel-block");o=t.children(".loading-wheel");if(this.debugOffers){console.log("offers.js - Showing default content for: "+r+e)}}else{if(this.debugOffers){console.log("offers.js - Showing default content")}t=$(".loading-wheel-block");o=$(".loading-wheel")}n=t.children(".defaultOffer");t.css("padding-top","0px");n.css("visibility","visible");o.remove();if(this.channel==="fs"){n.find(".parsys.content-par-main").removeAttr("style")}},loadOfferSnippetHTML:function(e){var t=this.ipsAll,r=0,n,o,s,a=0,i;if(!t){return}if(!e){for(i in this.ipsPostloaded){this.showDefaultContent(this.ipsPostloaded[i])}return}for(n in t){o=t[n];s=e[n];if(n===this.promotionsDiv||n===this.newProductsDiv){this.loadMultipleOffers(n,s,r,o);a++}else if(s&&s.snippetPath){this.loadIndividualOffer(n,s,r,o);a++}else{this.showDefaultContent(n)}r+=1}if(this.debugOffers){console.log("offers.js - loadOfferSnippetHTML: Total Offer to execute = "+a)}},jcrContentFormat:function(e){if(this.channel==="fs"&&!!e){var t="/jcr:content/content-par-main.html";e=e.split(".html")[0]+t}return e},getOfferTypeFromDivId:function(e){var t={};t.isOverlayOffer=e.indexOf("-overlay-")>-1;t.isCartOffer=e.indexOf("-cart-")>-1;t.isCQOffer=e.indexOf("-cq-")>-1;t.isPdpOffer=e.indexOf("-pdp-")>-1;t.isSearchOffer=e.indexOf("-search-")>-1;t.isHeaderOffer=e.indexOf("-hb")>-1;t.isFooterOffer=e.indexOf("-lb")>-1;t.isScmsOffer=e.indexOf("-scms")>-1;t.isAccountOffer=e.indexOf("-account")>-1;return t},loadIndividualOffer:function(e,t,r,n){var o=t,s=o.hasOwnProperty("snippetPath")?o.snippetPath:"",a=e,i=$((n==="id"?"#":".")+a),f=false,c=this.getOfferTypeFromDivId(e),d=o.hasOwnProperty("offerHTML")?o.offerHTML:"";if(s.indexOf(this.aemOfferUiURL)>-1){f=true}else{s=this.jcrContentFormat(s)}if(this.debugOffers){console.log("offers.js - snippetPath for divId : "+a+"= "+s)}if(!!d&&this.setOfferHTML(o,i,d,c,r)){if(this.debugOffers){console.log("offers.js - currentOfferHTML set on divId : "+a+", Ajax call skipped for currentSnippetPath : "+s)}return}$.ajax({url:s,success:function(t){var n=false,s=Offers.prepareInteractReportParams(c,o);if(f&&!!t||Offers.isValidHtmlOfferStructure(t)){i.html(t);Offers.checkForCartoverlayOffer(t,i);i.removeClass("hide");try{n=window.preloadOffers.response.firstVisit}catch(e){console.error("preload was not successful")}if(n&&!Offers.setAudienceDone){Offers.postEventsCallback.push([o,"contact",s])}else{Offers.postPageViewEvent(o,"contact",s)}Offers.ctaAction(c,o,i,r)}else{Offers.showDefaultContent(e)}},error:function(){Offers.showDefaultContent(e)}})},setOfferHTML:function(e,t,r,n,o){if(!Offers.isValidHtmlOfferStructure(r)){Offers.showDefaultContent(t);return false}r=Offers.updatePDPOfferHTML(r,t);t.html(r);Offers.checkForCartoverlayOffer(r,t);t.removeClass("hide");var s=false;interactReportParams=Offers.prepareInteractReportParams(n,e);try{s=window.preloadOffers.response.firstVisit}catch(e){console.error("preload was not successful")}if(s&&!Offers.setAudienceDone){Offers.postEventsCallback.push([e,"contact",interactReportParams])}else{Offers.postPageViewEvent(e,"contact",interactReportParams)}Offers.ctaAction(n,e,t,o);return true},prepareIndividualOfferHtml:function(e,t){const r=0;const n=e.ips.at(0);const o=t[n];const s=this.ipsAll;const a=e.hasOwnProperty("divSelectorType")?e.divSelectorType:"";const i=a.length>0?a:s[n];if(!o||!o.hasOwnProperty("snippetPath")){return Promise.reject("Invalid Offer Object")}const f=$((i==="id"?"#":".")+n);const c=this.getOfferTypeFromDivId(n);const d=o.snippetPath.indexOf(this.aemOfferUiURL)>-1;const l=o.snippetPath;const u=d?l:this.jcrContentFormat(l);var p=o.hasOwnProperty("offerHTML")?o.offerHTML:"";var m={offerType:c,offerObj:o,isProductOffer:d,divToLoadOfferObj:f,offerHtml:p,key:r};if(!!p){return Promise.resolve(m)}return new Promise(function(e,t){$.ajax({url:u,success:function(t){m.offerHtml=t;e(m)},error:function(){t("Showing default content")}})}.bind(this))},renderIndividualOffer:function(e){const t=e.offerHtml;const r=e.offerObj;const n=e.offerType;const o=e.divToLoadOfferObj;var s=false;const a=Offers.prepareInteractReportParams(n,r);if(e.isProductOffer&&!!t||Offers.isValidHtmlOfferStructure(t)){Offers.renderCartOverlayOffer(t,o,r);try{s=window.preloadOffers.response.firstVisit}catch(e){console.error("preload was not successful")}if(s&&!Offers.setAudienceDone){Offers.postEventsCallback.push([r,"contact",a])}else{Offers.postPageViewEvent(r,"contact",a)}}},loadMultipleOffers:function(e,t,r,n){var o=[],s=e,a=3,f=$((n==="id"?"#":".")+s),c=this.getOfferTypeFromDivId(e);if(s==this.newProductsDiv){a=4}var d=this.filterValidOffersAndOfferTypes(t,s);var o=d[0];var l=d[1];if(o.length===0){console.log("offers.js - No Valid promotional Offers");return}$("<link/>",{rel:"stylesheet",type:"text/css",href:"/dm-offers/promotions.css"}).appendTo("head");var u="";var p=this.createFilterElement(l);u+=p;var m=this.createPodsElement(o,a);u+=m;$(f).html(u);this.initPromotionFilterActions();for(i=0;i<o.length;i++){var h=o[i];var O=$("#"+this.replaceAllDotsWithArg(h.treatmentCode,""));this.initPromotionPostEvents(c,h,O)}},filterValidOffersAndOfferTypes:function(e,t){var r=[];var n=[];for(i=0;i<e.length;i++){var o=e[i];if(!!o.offerAvailable&&!!o.offerHTML&&o.offerHTML.length>0){r.push(o);if(!this.checkIfExists(n,"promoCode",o.promoCode)){var s=o.promoCode.replace(/\s/g,"").toLowerCase();var a={promoCode:o.promoCode,promoValue:s};n.push(a)}}else if(this.debugOffers){console.log("offers.js - Invalid Offer : "+t+"= "+o)}}return[r,n]},createFilterElement:function(e){var t='<div class="promo-filter"><span class="h3 mr-l1">Filter By:</span><button class="c-chip mr-l1 promo-filter-btn c-chip--choice c-chip--active" data-promoCode="all">All</button>$$OFFERS_FILTERS$$</div>';var r="";for(i=0;i<e.length;i++){var n=e[i];if(n.promoCode){r+='<button class="c-chip mr-l1 promo-filter-btn" data-promoCode="'+n.promoValue+'" >'+n.promoCode+"</button>"}}t=t.replace("$$OFFERS_FILTERS$$",r);return t},createPodsElement:function(e,t){var r="";var n='<div class="cmp-p-container m--match-height aem-GridColumn aem-GridColumn--default--12"> <div class="aem-Grid aem-Grid--12 aem-Grid--default--12 ">';var o='<div class="span3 cmp-p-container p-l1 aem-GridColumn--default--none aem-GridColumn--phone--none aem-GridColumn--phone--12 aem-GridColumn aem-GridColumn--offset--phone--0 aem-GridColumn--default--'+t+' aem-GridColumn--offset--default--0 $$OFFERTYPE$$ "> ';var s="</div></div>";var a="";r+=n;for(i=0;i<e.length;i++){var f=e[i];var c=f.promoCode.replace(/\s/g,"").toLowerCase();var d=this.replaceAllDotsWithArg(f.treatmentCode,"");r+=o.replace("$$OFFERTYPE$$","filterDiv "+c+"\" id='"+d+"'");var l=f.offerHTML.replace('<div class="aem-offer-container"> \n ','<div class="aem-offer-container"> \n <div class="cmp-p-textimage"> \n ');l=l.replace('<div class="offer-body"> \n ','<div class="offer-body cmp-textimagexx cta-container"> \n ');r+=l;r+=s}r+=a;return r},initPromotionFilterActions:function(){$(document).on("click",".promo-filter-btn",(function(){$(".promo-filter-btn").removeClass("c-chip--choice c-chip--active");$(this).addClass("c-chip--choice c-chip--active");var e=$(this).attr("data-promocode");var t=".filterDiv.".concat(e);var r=".filterDiv";if(e==="all"){$(r).show();$(t).hide()}else{$(r).hide();$(t).show()}}))},initPromotionPostEvents:function(e,t,r){var n=Offers.prepareInteractReportParams(e,t);Offers.postPageViewEvent(t,"contact",n);Offers.ctaAction(e,t,r)},prepareInteractReportParams:function(e,t){var r={},n;r.userType=Offers.getUserType();if(t.hasOwnProperty("interactPoint")){interactPointArray=t.interactPoint.split("|");r.placementCode=interactPointArray[interactPointArray.length-1]}if(e.isHeaderOffer){r.pagePath=Offers.location.pathname();n=t;r.offerUrl=n.offerUrl}else if(e.isFooterOffer||e.isCQOffer||e.isScmsOffer||e.isAccountOffer){r.pagePath=Offers.location.pathname()}else if(e.isSearchOffer){if(!!Offers.request&&!!Offers.request.searchTerm){r.searchTerm=Offers.request.searchTerm}else{try{r.searchTerm=$("#autoCorrectedKeyword").length>0?common.param.autoCorrectedKeyword:common.param.keyword}catch(e){console.log("common parameters not defined")}}}else if(e.isPdpOffer){r.pagePath=Offers.location.pathname();if(!!Offers.request&&!!Offers.request.pdpSkus){r.productSku=Offers.request.pdpSkus}else if(!!window.pdpSettings&&!!window.pdpSettings.sku){r.productSku=[window.pdpSettings.sku]}}if(e.isCartOffer){r.cartSkus=Offers.request.cartSkus;r.cartTotal=Offers.request.cartTotal;r.totalCartQty=Offers.request.totalQty}Offers.interactReportParams=r;return r},ctaAction:function(e,t,r,n){if(e.isOverlayOffer){this.initCartOverlayCtaActions(t)}else if(e.isCartOffer){this.initCartCtaActions(t,r,n)}else if(e.isPdpOffer){this.initPdpCtaActions(t,r)}else if(e.isCQOffer||e.isScmsOffer){this.initCqCtaActions(t,r)}else if(e.isSearchOffer){this.initSearchCtaActions(t,r)}else{try{this.HeaderFooterCtaAction[this.channel](t,r)}catch(e){console.log("no function for this channel: "+this.channel)}}},isValidHtmlOfferStructure:function(e){var t=false,r,n,o;if(typeof e!=="undefined"&&e.length>0){if(e.indexOf("aem-offer-container")!==-1||e.indexOf("<head")===-1){t=true}else{r=(new DOMParser).parseFromString(e,"text/html");n=$(r).find("head");if(typeof n!=="undefined"&&n.length>0){o=n.html();if(typeof o!=="undefined"&&o.trim().length===0){t=true}}}}return t},sendAnalytics:function(e,t,r,n){if("tf"===this.channel){this.tfAnalytics(e,t,r,n)}},tfAnalytics:function(e,t,r,n){if(typeof s!=="undefined"){var o="",a,i,f="";s.linkTrackVars="prop66,eVar66,prop67,eVar67";switch(e){case"pdp":a=location.pathname.replace(/^(\/[a-z]+)(\/[a-z]+)(\/[a-z]+)(\/)/g,"");i=s.pageURL;f="PDP Offers";o="View PDP ("+a+"): UpSell Promotion- 0";this.pdpAnalytics(r.offerIcid);break;case"search":f="Search Offers";o="View Search Page: Promotion- 0";this.searchAnalytics(r.offerIcid);break;case"cart":o="View Cart: UpSell Promotion- "+n;f="Cart Offers";break;case"overlay":o="View cart overlay: UpSell Promotion - 0";f="Cart Offers";this.pdpAnalytics(r.offerIcid);break}s.prop66=o;s.eVar66=o;s.prop67=o;s.eVar67=o;s.tl(t,"o",f,null,null);if(e==="pdp"){s.pageURL=i}}},pdpAnalytics:function(e){if(typeof e!=="undefined"&&e.length>0){s.linkTrackVars+=",eVar21";s.eVar21=e;s.pageURL=this.addParameter(s.pageURL,"icid",e);var t=new Date;t.setTime(t.getTime());var r=Offers.getCookie("notice_gdpr_prefs");if(!r||!r.includes("1")){return}this.setCookie("s_ev21_tc","",t)}},searchAnalytics:function(e){var t="AEM|Search Results",r,n,o="";if(typeof search!=="undefined"&&search.main&&search.main.params&&this.isValidValue(search.main.params.autoCorrectedKeyword)){o=search.main.params.autoCorrectedKeyword}else{o=this.searchTerm.toLowerCase()}s.linkTrackVars+=",prop14,eVar14";s.prop14=t;s.eVar14=t;if(this.isValidValue(o)){s.linkTrackVars+=",prop44,eVar44";r="AEM|"+o;s.prop44=r;s.eVar44=r;if(this.isValidValue(e)){s.linkTrackVars+=",prop34,eVar34";n="AEM|PROMO-CODE|"+e+"|"+o;s.prop34=n;s.eVar34=n}}},initPdpCtaActions:function(e,t){var r=t.find("a").first(),n=r.data("target")?r.data("target"):"",o=n.substring(1),s=o.replace(/[^A-Za-z0-9\-\_]+/g,""),a,i,f=this.validInteractOfferUrl(e);if(document.getElementById(o)){document.getElementById(o).id=s}n="#"+s;r.attr("data-target",n);r.attr("data-url",f);r.unbind("click");r.attr("data-toggle","hide");r.click((function(t){t.preventDefault();a=Offers.prepareInteractReportParams({isPdpOffer:true},e);Offers.postPageViewEvent(e,"accept",a);i=$(n).find("div.modal-body");i.load(f+" .MainParsys",(function(e,t,o){if(t==="success"){r.attr("data-toggle","modal");$(n).modal("show");if(this.debugOffers){console.log("Load offer url success: "+f)}}if(t==="error"){if(this.debugOffers){console.log("Error "+o.status+": "+o.statusText)}}}));Offers.sendAnalytics("pdp",this,e)}))},initCqCtaActions:function(e,t){var r=t.find("a"),n,o;if(r.length===0){console.log("CQ offer contains no <a> tag. Find <img> to add <a>.");t.find("img").each((function(){var e=$(this);if(!e.parent().is("a")){e.wrap("<a></a>")}}));r=t.find("a")}n="";o=this.getUrlParameter("emid");r.each((function(){n=Offers.validInteractOfferUrl(e,$(this).attr("href"));if(!!o){n=this.addParameter(n,"emid",o)}$(this).attr("href",n)}));r.on("click contextmenu",(function(){var t=Offers.prepareInteractReportParams({isCQOffer:true},e);Offers.postPageViewEvent(e,"accept",t)}))},initSearchCtaActions:function(e,t){var r=t.find("a"),n=r.attr("href"),o,s=this.validInteractOfferUrl(e,n);this.checkForAddToCart(r,e);r.attr("href",s);r.on("click contextmenu",(function(){o=Offers.prepareInteractReportParams({isSearchOffer:true},e);Offers.postPageViewEvent(e,"accept",o);try{Offers.sendAnalytics("search",this,e)}catch(e){console.error(e)}if(Offers.checkAndInvokeAddToCart(r,e,t)){return false}}))},HeaderFooterCtaAction:{tf:function(e,t){var r=t.attr("id"),n=".promo-bar-snippet",o,s,a,i,f={isHeaderOffer:true};if(r.indexOf("hb")===-1){n=".landscape-banner-snippet";f.isHeaderOffer=false;f.isFooterOffer=true}o=t.find(n);if(o&&o.length<1){o=t.find(".entireClickable > a")}s=o.attr("href");a=Offers.validInteractOfferUrl(e,s);o.attr("href",a);o.on("click contextmenu",(function(){var t=Offers.prepareInteractReportParams(f,e);Offers.postPageViewEvent(e,"accept",t)}));if(n===".landscape-banner-snippet"){t.find("button.landscape-banner-button").each((function(){$(this).click((function(){var t=Offers.prepareInteractReportParams(f,e);Offers.postPageViewEvent(e,"reject",t)}))}))}},fs:function(e,t){var r=t.find("a"),n=r.attr("href"),o=Offers.validInteractOfferUrl(e,n);r.attr("href",o);r.on("click contextmenu",(function(){Offers.postPageViewEvent(e,"accept",{})}))}},initCartOverlayCtaActions:function(e){var t=$(".overlay-modal-body"),r=$(".chevroncont"),n=$(".chevroncont").find("button"),o=this.validInteractOfferUrl(e);t.load(o+" .MainParsys");r.click((function(){var r=Offers.prepareInteractReportParams({isCartOffer:true},e);$(".chevronoverlay").toggleClass("down");if(n.text()==="Learn more"){n.text("Show less");t.show();Offers.sendAnalytics("overlay",this,e);Offers.postPageViewEvent(e,"accept",r)}else{n.text("Learn more");t.hide();Offers.postPageViewEvent(e,"ignore",r)}}))},setCartOverlayCtaActions:function(e){const t=$("#tf-cart-overlay-1 .entireClickable");if(t.length>0){t.eq(0).remove()}const r=$("#tf-cart-overlay-1 .offer-cta a");if(r.length<=0){console.error("renderCartOverlayOffer() - In Cart Offer CTA button not found.");return}e.aemOfferUrl=r.attr("href");this.addRemoteRequestAttributesToInCartOfferCta(e);const n=Offers.prepareInteractReportParams({isCartOffer:true},e);r.click((function(){Offers.sendAnalytics("overlay",this,e);Offers.postPageViewEvent(e,"accept",n)}));const o=$("#recommendation-overlay .back");o.click((function(){Offers.postPageViewEvent(e,"ignore",n)}))},addRemoteRequestAttributesToInCartOfferCta:function(e){const t=$("#tf-cart-overlay-1 .offer-cta a");if(t.length<=0){console.error("addRemoteRequestAttributesToInCartOfferCta() - In Cart Offer CTA button not found.");return}const r=this.buildMainParsysMarkupOfferUrl(e);t.addClass("pragma-remote-request");t.attr("href","javascript:void(0)");t.attr("data-remote-url",r);t.attr("data-remote-container","#recommendation-overlay-content");const n=$("#tf-cart-overlay-1 .offer-cta a p");if(n.length<=0){console.error("addRemoteRequestAttributesToInCartOfferCta() - In Cart Offer CTA button not found.");return}n.addClass("pragma-toggle");n.attr("data-toggle","#recommendation-overlay");n.attr("data-toggle-classes","open")},buildMainParsysMarkupOfferUrl:function(e){const t=Offers.validInteractOfferUrl(e);var r="";try{const e=t.split(".html");r=e[0]+"/jcr:content/MainParsys.html"+e[1]}catch(e){console.log("could not extract from url");r=t}return r},initCartCtaActionsForCq5Offer:function(e,t,r){var n=t.find("button").attr("class"),o=t.find("button"+"."+n),s,a=this.validInteractOfferUrl(e);o.attr("data-url",a);o.unbind("click");o.attr("data-toggle","hide");s=o.data("target");o.click((function(){var t=$(s).find("div.modal-body"),n;t.load(a+" .MainParsys",(function(){o.attr("data-toggle","modal");$(s).modal("show")}));n=Offers.prepareInteractReportParams({isCartOffer:true},e);Offers.postPageViewEvent(e,"accept",n);Offers.sendAnalytics("cart",this,e,r)}))},oldInitCartCtaActions:function(e,t,r){const n=t.find(".btn-link");const o=t.find("button[data-toggle='modal'].btn");if(n.length>0||o.length>0){Offers.initCartCtaActionsForCq5Offer(e,t,r);return}const s=t.find(".entireClickable");if(s.length>0){s.eq(0).remove()}var a=t.find("#offerContent"),i=a.find("a"),f,c,d=this.buildMainParsysMarkupOfferUrl(e);i.attr("data-remote-url",d);i.unbind("click");i.attr("data-toggle","hide");f=i.data("target");c=a.find(f);i.click((function(){var t=c.find("div.modal-body"),n;t.load(d,(function(){c.modal("show")}));n=Offers.prepareInteractReportParams({isCartOffer:true},e);Offers.postPageViewEvent(e,"accept",n);Offers.sendAnalytics("cart",this,e,r)}))},initCartCtaActions:function(e,t,r){try{const n=t.get(0);const o=n.querySelector(".btn-link");const s=n.querySelector("button[data-toggle='modal'].btn");if(o!==null||s!==null){Offers.initCartCtaActionsForCq5Offer(e,n,r);return}const a=n.querySelector("#offerContent");const i=a.querySelector(".offer-cta a");const f=a.querySelector(i.dataset.targetModalId);const c=f.querySelector(".dm-modal-body");const d=f.querySelectorAll(".dm-close-modal");const l=this.buildMainParsysMarkupOfferUrl(e);const u=l?l:i.href;i.href="javascript:void(0)";const p=function(){f.classList.add("visible")};const m=function(){f.classList.remove("visible")};const h=function(e,t,r){const n=Offers.prepareInteractReportParams({isCartOffer:true},e);Offers.postPageViewEvent(e,"accept",n);Offers.sendAnalytics("cart",this,e,r)};const O=function(){if(c.innerHTML){p();h(e,n,r);return}fetch(u).then((function(e){return e.text()})).then((function(t){c.innerHTML=t;p();h(e,n,r)}),(function(e){console.warn("loadModalContent() - Error message: ",e)}))};i.addEventListener("click",O);d.forEach((function(e){e.addEventListener("click",m)}))}catch(e){console.log("DM - initCartCtaActions() - Error message: "+e.message)}},validInteractOfferUrl:function(e,t){var r=e.offerUrl,n=e.offerIcid;r=!!r&&r!=="."&&r!=="_"?r:t;if(!r){return""}if(!!n&&n!=="."&&n!=="_"){n=n.replace(/\s+/g,"");r=this.addParameter(r,"icid",n)}return r},isValidValue:function(e){return typeof e!=="undefined"&&e.length>0},buildDebugDetails:function(e,t,r,n,o,s,a){var i="";i="<div id='offerSnippetDebug'><div class='alert text-left' style='font-size: 10px; overflow-wrap: break-word;'>";i+="SessionId: "+e+"<br>";i+="Interaction Point: "+t+"<br>";i+="OfferUrl: "+r+"<br>";i+="TreatmentCode: "+n+"<br>";i+="Landing Url: "+o+"<br>";i+="ICID: "+s+"<br>";i+="Snippet Path: "+a+"<br>";i+="</div></div>";console.log("debug="+i);return i},postPageViewEvent:function(e,t,r){var n,o,s,a=e.treatmentCode;if(!a){console.log("Offer treatment code is undefined.");return false}n={};if(!!window.preloadOffers.response){n.businessSegment=window.preloadOffers.response.businessSegment||""}else{n.businessSegment=Offers.response.businessSegment}if(Offers.firstVisit&&!!window.preloadOffers.response){n.sessionId=window.preloadOffers.response.sessionId}else{n.sessionId=Offers.sessionData.sessionId}n.treatmentCode=a;n.eventType=t;n.channel=this.channel;n.action="pageview";n.isFirstVisit=!!window.preloadOffers&&!!window.preloadOffers.response&&window.preloadOffers.response.firstVisit;n.offerCode=e.offerCode||[];n.interactPoint=e.interactPoint||"";if(this.internal){n.internal=true}try{$.extend(n,r)}catch(e){console.error(e);for(o in r){s=r[o];n[o]=s}}console.log("interactReportParams:",JSON.stringify(r));console.log("posteventRequest:",JSON.stringify(n));Offers.sendPostEvent(n);return true},sendPostEvent:function(e){var t={};t.request=e;$.ajax({url:this.postEventURL,type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",error:function(){console.error("Post event failed - param:",JSON.stringify(e))}}).done((function(e){t.response=e})).always((function(){Offers.postEvents.push(t)}))},postCartEventToInteractServlet:function(e,t){this.sendPostEvent(this.getPostEventPayload(e,"postcart",t))},postPurchaseEventToInteractServlet:function(e,t){this.sendPostEvent(this.getPostEventPayload(e,"postpurchase",undefined,t))},postFormSubmitEventToInteractServlet:function(e,t){this.sendPostEvent(this.getPostEventPayload(e,"formsubmit",t))},postDownloadEventToInteractServlet:function(e,t){this.sendPostEvent(this.getPostEventPayload(e,"postdownload",t))},getPostEventPayload:function(e,t,r,n){return{sessionId:e,channel:Offers.channel,internal:Offers.internal,pagePath:r,action:t,eventType:n}},getIsNewVisitor:function(e){var t=Offers.getDaysSinceLastVisit(e+"_new");return t==="First Visit"||t==="Less than 1 day"},getDaysSinceLastVisit:function(e){var t=e+"_s",r=new Date,n=new Date,o,s=r.getTime(),a=24*60*60*1e3,i=30*60*1e3,f=3*365*a,c="Cookies Not Supported",d="First Visit",l="More than 30 days",u="More than 7 days",p="Less than 7 days",m="Less than 1 day",h,O,g=Offers.getCookie("notice_gdpr_prefs"),v;if(!g||!g.includes("1")){return d}r.setTime(s+f);n.setTime(s+i);o=Offers.getCookie(e);if(o===null||o.length===0){Offers.setCookie(e,s,r);Offers.setCookie(t,d,n)}else{O=s-o;if(O>i){if(O>30*a){Offers.setCookie(e,s,r);Offers.setCookie(t,l,n)}else if(O<=30*a&&O>7*a){Offers.setCookie(e,s,r);Offers.setCookie(t,u,n)}else if(O<=7*a&&O>a){Offers.setCookie(e,s,r);Offers.setCookie(t,p,n)}else if(O<=a){Offers.setCookie(e,s,r);Offers.setCookie(t,m,n)}}else{Offers.setCookie(e,s,r);h=Offers.getCookie(t);Offers.setCookie(t,h,n)}}v=Offers.getCookie(t);if(v===null){return""}else if(!v||v.length===0){return c}else{return v}},setCookie:function(e,t,r){document.cookie=e+"="+t+";path=/;expires="+r.toGMTString()+"; domain="+location.hostname.substring(location.hostname.lastIndexOf(".",location.hostname.lastIndexOf(".")-1))},getMarketingRegion:function(){var e="NA",t;if(!!window.ltCountryInfo){t=this.getCookie("CK_ISO_CODE");t=!!t?t:"us";if(window.ltCountryInfo[t]&&window.ltCountryInfo[t].regionMapping){e=window.ltCountryInfo[t].regionMapping}}else if(!!window.interactClientContext){e=interactClientContext.marketingRegion}return e},getMarketingPageId:function(){var e="HP";if(typeof interactClientContext!=="undefined"&&typeof interactClientContext.marketingPageId!=="undefined"&&interactClientContext.marketingPageId!==""){e=interactClientContext.marketingPageId}return e},getUserType:function(){var e="anonymous",t,r;if(this.channel==="fs"){t=this.getCookie("estore");r=this.getCookie("punchout");if(r&&t){t=t+"|"+r}e=t}else if(this.channel==="tf"){e=this.getCookie("CK_DISPLAY_TYPE")}if(!e){e="anonymous"}return e},getQueryParam:function(e){var t,r,n,o,s=Offers.location.href().slice(Offers.location.href().indexOf("?")+1).split("&");for(t=0;t<s.length;t++){o=s[t].split("=");r=o[0];n=o[1];if(r.toUpperCase()===e.toUpperCase())return n}return""},addParameter:function(e,t,r){e=this.removeParameter(e,t);if(!!e){if(e.indexOf("?")===-1){e=e+"?"}if(e.indexOf("?")!==e.length-1){e=e+"&"}e=e+t+"="+r}return e},removeParameter:function(e,t){var r=!!e?e.split("?"):"",n,o,s,a,i;if(r.length>=2){n=r.shift();o=r.join("?");s=encodeURIComponent(t)+"=";a=o.split(/[&;]/g);for(i=a.length;i-- >0;)if(a[i].lastIndexOf(s,0)!==-1)a.splice(i,1);e=n+"?"+a.join("&")}return e},payloadRequired:function(){const e=/.*store\/.*cart.*/;if(!!window.location&&window.location.pathname.match(e)!=null){return true}const t=/.*catalog\/product.*/;if(!!window.location&&window.location.pathname.match(t)!=null){return true}var r=[],n=false,o;const s=!this.ipsAll||Object.keys(this.ipsAll).length===0?this.getIps():this.ipsAll;for(key in s){r.push(key)}for(o=0;o<r.length;o++){if(r[o].indexOf(this.channel+"-cq")>-1){break}if(!Offers.includes(Offers.ipsPayloadNotRequired,r[o])){n=true;break}}return n},checkForCartoverlayOffer:function(e,t){if(typeof t.selector!=="undefined"&&t.selector.indexOf("tf-cart-overlay")!==-1){var r=$(e),n=r.text().split("\n"),o=Offers.getCartoverlayOfferText(n),s='<div class="overlay-modal-wrapper"><div class="overlay-modal-body" style="display: none;"></div></div>',a='<div class="dynamic-offer promotion promo-module" id="tf-cart-overlay-1"> <p id="cart-text"> '+o+'</p> <span class="chevroncont"> <div class="overlayicon chevronoverlay"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 5" id="chevron-up" class="overlay-cta"> <path fill="#1e8ae7" fill-rule="evenodd" d="M7.879 10.778L.1 3 2.22.879 10 8.657 17.778.879 19.9 3 10 12.9l-2.121-2.122z" /></svg> </div> <button id="overlaybutton" type="button" data-toggle="hide" data-target="#Test-Title-for-Modal-Modal" class="btn-link" id="overlay-button">Learn more</button></span></div>';$("#tf-cart-overlay-1").replaceWith(a);if($(".overlay-modal-wrapper").length>0){$(".overlay-modal-wrapper").replaceWith(s)}else{$("#tf-cart-overlay-1").after(s)}}},renderCartOverlayOffer:function(e,t,r){if(typeof t.selector!=="undefined"&&t.selector.indexOf("tf-cart-overlay")!==-1){const n=$(t.selector);n.empty().html('<div class="offer mt-l2">'+e+"</div>");const o=$("#tf-cart-overlay-1 #dynamicOffer");const s=o.find("#modalTitle_ic");const a=s[0]&&s[0].value||"";$(this.inCartOfferCtaSidecartMarkup(a)).insertAfter(o);Offers.setCartOverlayCtaActions(r);n.css("display","")}},inCartOfferCtaSidecartMarkup:function(e){return'<div id="recommendation-overlay">'+'<span class="back pragma-toggle" data-toggle="#recommendation-overlay" data-toggle-classes="open">'+'<span class="arrow"></span>'+"Back"+"</span>"+'<div id="recommendation-overlay-content" class="pragma-toggle-component"></div>'+"</div>"},getCartoverlayOfferText:function(e){var t="",r;for(r=0;r<e.length;r++){if(!!e[r]&&e[r].trim().length>3){t=e[r];break}}return t},updatePDPOfferHTML:function(e,t){try{if(typeof t.selector!=="undefined"&&t.selector.indexOf("tf-pdp-1")!==-1){var r=(new DOMParser).parseFromString(e,"text/html");anchor=r.querySelector("#pdp-image");if(this.validateOldPDPHTML(anchor)){wrapper=document.createElement("div");wrapper.appendChild(anchor.nextElementSibling);wrapper.appendChild(anchor.nextElementSibling);wrapper.appendChild(anchor.nextElementSibling);anchor.parentElement.appendChild(document.createElement("div"));anchor.parentElement.appendChild(wrapper);return anchor.parentElement.parentElement.outerHTML}}}catch(e){console.log(e)}return e},validateOldPDPHTML:function(e){return e.nodeName==="DIV"&&e.nextElementSibling.nodeName==="P"&&e.nextElementSibling.nextElementSibling.nodeName==="DIV"&&e.nextElementSibling.nextElementSibling.nextElementSibling.nodeName==="P"},meetMinimalJQueryVersion:function(){if(!$||!$.fn||!$.fn.jquery){return false}var e=1,t=5,r=$.fn.jquery.split("."),n=parseInt(r[0]),o=parseInt(r[1]);return n>=e&&o>=t},getChannel:function(){var e="thermofisher.",t="fishersci.",r="tf",n="fs",o=Offers.location.hostname();if(o.indexOf(e)>0){return r}else if(o.indexOf(t)>0){return n}return""},processPagePath:function(e,t){t=t.replace(/&?debug_offers=true&?/g,"");t=t.replace(/\?$/g,"");return e+t},cleanSessionId:function(e){if(!e){return e}return e.replace("[CS]v1|","").replace("[CE]","")},location:{href:function(){return window.location.href},hostname:function(){return window.location.hostname},search:function(){return window.location.search},pathname:function(){return window.location.pathname},host:function(){return window.location.host},origin:function(){return window.location.origin}},replaceAllDotsWithArg:function(e,t){return e.replace(/\./g,t)},addIcidtoPromotionPage:function(){var e=this.getUrlParameter("icid");var t=this.location.pathname();var r="/promotions/";if(e&&t.indexOf(r)>-1){var n="icid";var o=document.querySelectorAll("a");var s=this;o.forEach((function(t){if(t.href.indexOf("/order/catalog/product/")>=0){t.href=s.addParameter(t.href,n,e)}}))}},isCookieConsentInProgress:function(){return!Offers.getCookie("notice_gdpr_prefs")},areCookiesAccepted:function(){return Offers.getCookie("notice_gdpr_prefs").includes("1")},createCookieConsentListener:function(e,t){Offers.payloadEventHandler=e;Offers.ipsEventHandler=t;document.body.addEventListener("truste-consent",Offers.onCookieConsent)},onCookieConsent:function(){var e=Offers.payloadEventHandler,t=Offers.ipsEventHandler;Offers.preloadResponseValidation(e,t);document.body.removeEventListener("truste-consent",Offers.onCookieConsent)},isPreloadInProgress:function(){return Offers.isPreloadDefined()&&!window.preloadOffers.hasOwnProperty("succeed")},isPreloadDefined:function(){return!!window.preloadOffers&&!!window.preloadOffers.version},createRequestPostEventsListener:function(){var e=window.addEventListener||document.attachEvent;try{e("requestPostEvents",(function(e){Offers.validatePreloadOffers();Offers.setPostEventsForPreload()}))}catch(e){console.error("Cannot create event listener. for requestPostEvents Error:",e)}},dmRecommendations:function(e){const t=Offers.findRecommendationDivs();if(t.length>0){Offers.recommendationsProcess(e,t)}else{Offers.requestRecommendationsOnLoadEvent(e)}},requestRecommendationsOnLoadEvent:function(e){window.addEventListener("dmRecContainerLoad",(t=>{const r=Offers.findRecommendationDivs();if(r.length>0){Offers.recommendationsProcess(e,r)}}))},recommendationsProcess:function(e,t){console.log("dmRecommendations() - DM Recommendations load process ...");const r=this.buildPayload(t,e);this.callRecommendationsService(r)},findRecommendationDivs:function(){const e=document.querySelectorAll("div.dm-recommendations");const t=Array.from(e).filter((e=>!e.hasAttribute("data-recommendations")));return Array.from(t)},buildPayload:function(e,t){const r=[];const n=e.map((e=>{r.push({divId:e.id,skuSet:t});return e.id}));return{divIdList:n,modelRequestList:r}},callRecommendationsService:function(e){const t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",userId:this.getLtUserId(),userName:this.getLtUserName(),userType:this.getLtUserType()}};Offers.recommendationsRequest=e;fetch(this.loadRecommendationsURL,t).then((e=>{if(!e.ok){throw new Error("callRecommendationsService() - Recommendation service call was not successful: "+e.statusText)}return e.json()})).then((t=>{Offers.recommendationsResponse=t;this.displayRecommendations(t,e.divIdList)})).catch((e=>{console.error("callRecommendationsService() ",e)}))},displayRecommendations:function(e,t){if(!e.hasOwnProperty("recommendationByModelMap")){console.log("displayRecommendations() - recommendationByModelMap not available in response");return}const r=e.recommendationByModelMap;t.forEach((e=>{if(r.hasOwnProperty(e)){const t=r[e];if(t.recommendationsAvailable){const r=document.getElementById(e);if(r){r.innerHTML=t.recommendationsHtml;if(Offers.loadRecommendationsScript(r)){r.dataset.recommendations="loaded"}}}}}))},loadRecommendationsScript:function(e){try{const t=e.lastElementChild;const r=document.createElement("script");r.type="text/javascript";r.text=t.text;e.appendChild(r);e.removeChild(t)}catch(e){console.log("Offers.js - Node script could not execute for Recommendations Carousel");return false}return true},getLtUserType:function(){try{const e=window._lt.user.info.userType;return!!e?e:""}catch(e){return""}},getLtUserName:function(){try{const e=window._lt.user.info.userName;return!!e?e:""}catch(e){return""}},getLtUserId:function(){try{const e=window._lt.user.info.userId;return!!e?e:""}catch(e){return""}},startDmRecommendations:function(){if(window.location.href.indexOf("/store/v2/quick-order")>-1||window.location.href.indexOf("/store/orders/history")>-1){Offers.dmRecommendations([])}}}}var Offers=OffersInit();Offers.addIcidtoPromotionPage();Offers.start();Offers.startDmRecommendations();function DigitalMarketingPrototype(){return{recommendationsGetHtmlUrl:"/api/store/recommendations/products",requiredRecsPayload:["catalogNumber","countryCode","languageCode","app"],requiredOffersPayload:{catalogNumber:"cartSkus",cartTotal:"cartTotal",totalQty:"totalQty"},recsPayload:{},recsResponse:{},cartId:"cart-link",cartRemoteRequestSuccessfulEvent:"successful.pragma.remoteRequest",cartRemoteRequestFailedEvent:"failed.pragma.remoteRequest",startCartOverlayContent:function(e){this.triggerRecommendations(e);this.triggerCartOverlayOffer(e)},setClickEventListenerToElement:function(e,t){document.getElementById(this.cartId).addEventListener("click",t,{once:true})},promisedCartRemoteRequest:function(){return new Promise(function(e,t){document.getElementById(this.cartId).addEventListener(this.cartRemoteRequestSuccessfulEvent,(function(){e("successful.pragma.remoteRequest event received for DM Recommendations")}),{once:true});document.getElementById(this.cartId).addEventListener(this.cartRemoteRequestFailedEvent,(function(){t("failed.pragma.remoteRequest event received for DM Recommendations")}),{once:true})}.bind(this))},triggerRecommendations:function(e){console.log("Starting DM Recommendations Workflow");const t=this.promisedCartRemoteRequest();const r=this.promisedRecommendedProducts(e);Promise.all([t,r]).then((function(e){const t=$("#dm-recommendations-container");t.css("display","");t.empty().html(e[1]);console.log("DM Recommendations rendered correctly")}),(function(e){$("#dm-recommendations-container").empty().html("");console.log("DM Recommendations not available: "+e)}))},promisedRecommendedProducts:function(e){return new Promise(function(t,r){const n=this.parseRequestData(e,this.requiredRecsPayload);n.catalogNumber=this.listifyCatalogNumberObject(n);$.ajax({type:"POST",url:this.recommendationsGetHtmlUrl,data:JSON.stringify(n),dataType:"json",contentType:"application/json",success:function(n){try{this.checkForValidRecommendedProductsInResponse(n,e);this.validateHtmlResponse(n);const r=this.recommendationsHtml(n);console.log("Success retrieving DM Recommendations.");t(r)}catch(e){r(e.message)}}.bind(this),error:function(e){r(JSON.stringify(JSON.parse(e.responseText)))}})}.bind(this))},parseRequestData:function(e,t){var r={};for(var n=0;n<t.length;n++){const o=t[n];r[o]=e.hasOwnProperty(o)?e[o]:""}this.recsPayload=r;return r},listifyCatalogNumberObject:function(e){return e.catalogNumber.map((function(e){return e.sku}))},recommendationsHtml:function(e){try{var t=JSON.parse(JSON.stringify(e.uiServiceResponse.rawHtmlResponse));this.setRecommendationsResponse(e);this.recordDigitalDataMetrics(this.recsResponse);const r=this.cutTitleToValidLength(t);if(r.length>0){t=r}return t}catch(e){throw e}},validateHtmlResponse:function(e){if(!(!!e&&Object.keys(e).length>0&&e.hasOwnProperty("uiServiceResponse")&&e.uiServiceResponse.hasOwnProperty("status")&&e.uiServiceResponse.status==="OK"&&e.uiServiceResponse.hasOwnProperty("rawHtmlResponse")&&!!e.uiServiceResponse.rawHtmlResponse)){throw new Error("Recommendation template not available")}},checkForValidRecommendedProductsInResponse:function(e,t){if(!(!!e&&Object.keys(e).length>0&&e.hasOwnProperty("recommendations")&&e.recommendations.hasOwnProperty("recommendedProducts")&&e.recommendations.recommendedProducts.length>0)){const e=JSON.stringify(t);throw new Error("No recommendations for Request: "+e)}},setRecommendationsResponse:function(e){const t=JSON.parse(JSON.stringify(e));this.recsResponse=t.recommendations;const r=this.validateStringProperty(t.recommendations,"app");this.recsResponse.analyticsLocation=r.length>0?r.replace("-","").toLowerCase():r;const n=function(e){const t=e.split("-");var r="";for(var n=0;t.length>1&&n<t.length;++n){r+=t[n].charAt(0).toUpperCase()+t[n].slice(1)}return r};this.recsResponse.analyticsApp=r.length>0?n(r):r;this.recsResponse.analyticsSku=this.getSkuForAnalytics()},validateStringProperty:function(e,t){return!!e&&e.hasOwnProperty(t)&&e[t].length>0?e[t].toString():""},cutTitleToValidLength:function(e){try{const n=48;var t=$(e);for(var r=0;r<this.recsResponse.recommendedProducts.length;++r){const e=t.find("#DMProductRecsTitle"+r.toString()).html().slice(0,n);t.find("#DMProductRecsTitle"+r.toString()).html(e)}return $("<div>").append(t.eq(0).clone()).html()}catch(e){e.message+=" - trimTitleToValidLength()";throw e}},recordDigitalDataMetrics:function(e){if(!o(e)||!s(window.digitalData)){console.log("digitalData.page.recommendationsModel information couldn't be set as there are no "+"recommendations available, missing recommendations App/DataScience Model "+"or the digitalData/digitalData.page JS object doesn't exist.");return}var t=e.analyticsLocation;var r=e.recommendationType.toUpperCase();if(!a(window.digitalData.page.recommendationModels)){window.digitalData.page.recommendationModels=[t+":"+r]}else{var n=false;window.digitalData.page.recommendationModels.forEach((function(e,o){if(e.indexOf(t)===0){window.digitalData.page.recommendationModels[o]=e+"|"+r;n=true}}));if(!n){window.digitalData.page.recommendationModels.push(t+":"+r)}}function o(e){return typeof e!=="undefined"&&typeof e.recommendedProducts!=="undefined"&&typeof e.app!=="undefined"&&e.app!==""&&typeof e.recommendationType!=="undefined"&&e.recommendationType!==""&&e.recommendedProducts.length>0}function s(e){return typeof e!=="undefined"&&typeof e.page!=="undefined"}function a(e){return typeof e!=="undefined"&&e.length>0}},getSkuForAnalytics:function(){if(!!this.recsPayload&&this.recsPayload.hasOwnProperty("catalogNumber")&&!!this.recsPayload.catalogNumber&&this.recsPayload.catalogNumber.length>0){const e=this.recsPayload.catalogNumber.length-1;return this.recsPayload.catalogNumber[e]}console.log("DM - setSkuForAnalytics() - Invalid recommendations payload");return""},sendRecsAnalytics:function(e,t){try{document.dispatchEvent(new CustomEvent(e,{detail:{products:[t]}}))}catch(e){console.log("Error while sending Analytics for Product Recommendations New Format");console.error(e)}},triggerRecsOnAddToCart:function(e,t,r,n){miniCart.addProductsToCart([{sku:e,qty:t,price:r}],n)},getRecAddToCartQuantity:function(e){const t="DMProductRecsQty"+e.toString();const r=document.getElementById(t);if(!!r){return isNaN(r.valueAsNumber)?1:r.valueAsNumber}console.log("DM - getAddToCartQuantity() - Invalid product quantity for Add To Cart functionality.");return 0},recAddToCartAnalytics:function(e){const t=this.getRecAddToCartQuantity(e);if(!!this.recsResponse&&e>=0&&e<this.recsResponse.recommendedProducts.length&&t>0){const n=this.recsResponse;const o=n.recommendedProducts[e];const s=e+1;const a=t;const i="addToCart";const f=this.validateStringProperty(o,"catalogNumber");const c=this.validateStringProperty(n,"headerText");const d=this.validateStringProperty(n,"recommendationType");const l={addMethod:c,catalogNumber:f,price:this.validateStringProperty(o,"listPrice"),quantity:a,title:this.validateStringProperty(o,"productTitle"),uom:this.validateStringProperty(o,"uom"),designId:f,recommendationLocation:this.validateStringProperty(n,"app"),recommendationPosition:s.toString(),recommendationType:c,recommendationNewFormat:this.getRecAnalyticsEventString(s,i,d,n.recommendedProducts,n.analyticsLocation)};this.sendRecsAnalytics("cartAdd",l);var r=r||{};const u={event:"event25",data:{eVar66:d+"|AddToCart|"+e.toString()+"|"+f+"|"+this.recsResponse.analyticsApp+"|"+this.recsResponse.analyticsSku,eVar67:d+"|AddToCart|"+e.toString()+"|"+f+"|"+this.recsResponse.analyticsApp+"|"+this.recsResponse.analyticsSku,prop62:r.pageType,eVar62:r.pageType}};const p=this.validateStringProperty(o,"listPrice");this.triggerRecsOnAddToCart(f,a,p,u);return}console.log("DM - addToCartAnalytics() - Add to Cart functionality failed.")},recUrlClickAnalytics:function(e){if(!!this.recsResponse&&e>=0&&e<this.recsResponse.recommendedProducts.length){const t=this.recsResponse;const r=t.recommendedProducts[e];const n=e+1;const o="Click";const s={id:this.validateStringProperty(r,"catalogNumber"),recommendationLocation:this.validateStringProperty(t,"app"),recommendationPosition:n.toString(),recommendationType:this.validateStringProperty(t,"headerText"),recommendationNewFormat:this.getRecAnalyticsEventString(n,o,this.validateStringProperty(t,"recommendationType"),t.recommendedProducts,t.analyticsLocation)};this.sendRecsAnalytics("recommendationClick",s)}},getRecAnalyticsEventString:function(e,t,r,n,o){var s=r.toUpperCase();if(s==="CPM"||s==="CVM"||s==="PMM"){return s+"|"+o+"|"+t+"|"+e+"|"+n.length+"|"+n[e-1].catalogNumber}return""},triggerCartOverlayOffer:function(e){console.log("Starting DM Cart Overlay Offer Workflow");const t=this.parseContentRequestData(e,this.requiredOffersPayload);const r=Offers.prepareInteractOfferRequest(t,["tf-cart-overlay-1"]);r.divSelectorType="id";const n=this.promisedCartRemoteRequest();const o=this.promisedCartOverlayOffer(r);Promise.all([n,o]).then((function(e){Offers.renderIndividualOffer(e[1]);Offers.performanceUserTimingMark("offers.js:loadEnd");console.log("DM Cart Overlay Offer rendered correctly")}),(function(e){Offers.showDefaultContent("tf-cart-overlay-1");Offers.performanceUserTimingMark("offers.js:loadEnd");console.log("DM Cart Overlay Offer Error - "+e)}))},parseContentRequestData:function(e,t){var r={};for(var n in t){const o=t[n];r[o]=e.hasOwnProperty(n)?e[n]:""}return r},promisedCartOverlayOffer:function(e){Offers.performanceUserTimingMark("offers.js:loadBegin");if(Offers.showDefaultContentEnabled()){return Promise.reject()}return Offers.promisedOfferSnippet(e).then(function(t){return this.successfulOfferHtml(t,e)}.bind(this))},successfulOfferHtml:function(e,t){const r=Offers.parseInteractResponseObject(e);if(Offers.isValidDynamicOffersResponse(r)&&Offers.isValidOfferPlacementMap(r)){if(Offers.debugOffersModeEnabled()){console.log("offers.js - Starting loading offers for session:::: status code: "+r.statusCode)}return Offers.prepareIndividualOfferHtml(t,r.offerPlacementMap)}return Promise.reject()}}}const DigitalMarketing=DigitalMarketingPrototype();
</script>

</body>
</html>
