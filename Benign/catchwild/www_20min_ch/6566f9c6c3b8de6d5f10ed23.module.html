<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>6566f9c6c3b8de6d5f10ed23.module.html</title>
</head>
<body>

<script>
/** 20min.ch - 6566f9c6c3b8de6d5f10ed23_generation4_20241119T1320 - Kilkaya AS - Copyright 2024 - Config:20minch */
(()=>{"use strict";function e(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var t=0;function i(e){return"__private_"+t+++"_"+e}var s=i("k5a"),a=i("hookAbleEvents"),r=i("delayEventCnt"),n=i("currHref"),o=i("prevHref"),l=i("hookMap"),h=i("callBacks"),u=i("lastClickTime"),c=i("clickTTL"),d=i("exitType"),p=i("forceDOMContentLoaded"),f=i("initUrls"),g=i("getLocationHref"),b=i("isNewUrl"),y=i("addSPASupport"),m=i("handleSPATransition"),k=i("calcExitType"),w=i("handleEvent"),O=i("execDelayHook"),P=i("execHook"),D=i("execute"),j=i("runDebug"),S=i("eventDebug");class _{constructor(t){Object.defineProperty(this,S,{value:H}),Object.defineProperty(this,j,{value:V}),Object.defineProperty(this,D,{value:R}),Object.defineProperty(this,P,{value:U}),Object.defineProperty(this,O,{value:F}),Object.defineProperty(this,w,{value:N}),Object.defineProperty(this,k,{value:I}),Object.defineProperty(this,m,{value:L}),Object.defineProperty(this,y,{value:M}),Object.defineProperty(this,b,{value:C}),Object.defineProperty(this,g,{value:E}),Object.defineProperty(this,f,{value:A}),Object.defineProperty(this,p,{value:T}),Object.defineProperty(this,s,{writable:!0,value:null}),Object.defineProperty(this,a,{writable:!0,value:{ready:[],active:[],hidden:[],pageView:[],click:[],exit:[],scroll:[],activity:[],spa:[]}}),Object.defineProperty(this,r,{writable:!0,value:0}),Object.defineProperty(this,n,{writable:!0,value:location.href}),Object.defineProperty(this,o,{writable:!0,value:null}),Object.defineProperty(this,l,{writable:!0,value:{blur:{hooks:["hidden"]},hidden:{hooks:["hidden"]},active:{hooks:["active"]},focus:{hooks:["active"]},loading:{hooks:["pageView"]},interactive:{hooks:["pageView","ready"]},complete:{hooks:["pageView","ready"]},DOMContentLoaded:{hooks:["pageView","ready"]},pageshow:{hooks:["pageView","ready"]},click:{hooks:["click"]},pagehide:{hooks:["exit"]},scroll:{hooks:["scroll","activity"],delay:!0},mousemove:{hooks:["activity"],delay:!0},mousedown:{hooks:["click"],delay:!1},mouseup:{hooks:["activity"],delay:!0},touchstart:{hooks:["activity"],delay:!0},touchend:{hooks:["activity"],delay:!0},keyup:{hooks:["activity"],delay:!0},keydown:{hooks:["activity"],delay:!0},spa:{hooks:["spa"]},prerenderingchange:{hooks:["pageView","ready"]}}}),Object.defineProperty(this,h,{writable:!0,value:{interactive:[],load:[],loaded:[],click:[]}}),Object.defineProperty(this,u,{writable:!0,value:0}),Object.defineProperty(this,c,{writable:!0,value:301}),Object.defineProperty(this,d,{writable:!0,value:"exit"}),e(this,s)[s]=t,e(this,f)[f](),t.cfg&&t.cfg.clickTTL&&t.cfg.clickTTL>e(this,c)[c]&&(e(this,c)[c]=t.cfg.clickTTL,e(this,s)[s].speaker.say("Click TTL: "+e(this,c)[c],"listener")),e(this,s)[s].element.addEventListener("DOMContentLoaded",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("prerenderingchange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("readystatechange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("visibilitychange",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("click",e(this,w)[w].bind(this),!1),e(this,s)[s].element.addEventListener("scroll",e(this,w)[w].bind(this),!1),e(this,s)[s].element.addEventListener("mousemove",e(this,w)[w].bind(this),!0),e(this,s)[s].element.addEventListener("mousedown",e(this,w)[w].bind(this),!0),window.addEventListener("pageshow",e(this,w)[w].bind(this),!0),window.addEventListener("pagehide",e(this,w)[w].bind(this),{capture:!0}),window.addEventListener("blur",e(this,w)[w].bind(this),!0),window.addEventListener("focus",e(this,w)[w].bind(this),!0),e(this,y)[y]()}postInitialize(){if(!document.readyState||"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState)setTimeout(function(){e(this,p)[p]()}.bind(this),500);else{e(this,s)[s].speaker.say("postInitialize firing DOMContentLoaded:"+document.readyState+" "+document.prerendering);try{e(this,p)[p]()}catch(t){console.log("Error creating event[1]: "+t.toString()),setTimeout(function(){e(this,p)[p]()}.bind(this),500)}}}getCurrentUrl(){return e(this,n)[n]}getPrevUrl(){return e(this,o)[o]}fireHook(t){if(e(this,l)[l][t])try{var i=document.createEvent("Event");i.initEvent(t,!0,!0),e(this,P)[P](t,i)}catch(e){console.log("Could not run fireHook on '"+t+"': "+e.toString())}}addHook(t,i,s=!1){"activity"!=t&&"spa"!=t||(s=!0),e(this,a)[a][t].push({callBack:i,done:!1,reuse:s})}getExitType(){return e(this,d)[d]}}function T(){if(!document.prerendering)try{var t=document.createEvent("Event");t.initEvent("DOMContentLoaded",!0,!0),e(this,P)[P]("DOMContentLoaded",t)}catch(e){console.log("Could not run forced event: "+e.toString())}}function A(){e(this,n)[n]=e(this,g)[g](),e(this,o)[o]=null}function E(){let t=location.href.replace(/\/$/,"");return e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreAnchor&&(t=t.replace(/\#[^&]+/,"")),e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&!0===e(this,s)[s].cfg.pageData.SPA.ignoreQSP&&(t=t.replace(/[\#\?\&].+/,""))),t}function C(){var t=e(this,g)[g]();return e(this,n)[n]!==t&&(e(this,o)[o]=e(this,n)[n],e(this,n)[n]=t,!0)}function M(){e(this,s)[s].cfg.pageData&&e(this,s)[s].cfg.pageData.SPA&&(e(this,s)[s].cfg.pageData.SPA.customEvent&&""!==e(this,s)[s].cfg.pageData.SPA.customEvent?(e(this,s)[s].speaker.say("Setting up SPA with customEvent: "+e(this,s)[s].cfg.pageData.SPA.customEvent,"listener"),e(this,s)[s].element.addEventListener(e(this,s)[s].cfg.pageData.SPA.customEvent,(t=>{e(this,s)[s].speaker.say("GOT SPA Event: "+e(this,n)[n]+" vs "+location.href+" "+e(this,u)[u]+" "+t.timeStamp),(e(this,b)[b]()||e(this,s)[s].cfg.pageData.SPA.forcedSPA)&&(e(this,k)[k](t.timeStamp),e(this,m)[m](!0))}),!0)):"MutationObserver"in window?new MutationObserver(function(t){if(e(this,s)[s].cfg.pageData.SPA.triggers&&""!=e(this,s)[s].cfg.pageData.SPA.triggers){for(var i=0;i<t.length;i++)if(t[i].target&&t[i].target.tagName){let r=[];if("head"==t[i].target.tagName.toLowerCase()&&t[i].addedNodes.length>0)for(let e=0;e<t[i].addedNodes.length;e++)"meta"==t[i].addedNodes[e].tagName.toLowerCase()&&r.push(t[i].addedNodes[e]);else"meta"==t[i].target.tagName.toLowerCase()&&r.push(t[i].target);for(let t=0;t<r.length;t++){var a=r[t].getAttribute("property");null==a&&(a=r[t].getAttribute("name")),a&&""!=a&&null!==a.match(new RegExp(e(this,s)[s].cfg.pageData.SPA.triggers))&&(e(this,s)[s].speaker.say('SPA mutation: got a match: "'+a+'" matched with: "'+e(this,s)[s].cfg.pageData.SPA.triggers+'"'),e(this,m)[m]())}}}else e(this,m)[m]()}.bind(this)).observe(document.documentElement||document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0}):this.addHook("activity",function(t){window.requestIdleCallback((()=>{e(this,m)[m]()}))}.bind(this),!0))}function L(t=!1){(e(this,b)[b]()||t)&&setTimeout(function(){e(this,s)[s].cfg.pageData.SPA&&!1!==e(this,s)[s].cfg.pageData.SPA.metaData?e(this,s)[s].pageData.reRead():e(this,s)[s].pageData.setField("url",e(this,n)[n]),e(this,s)[s].resetRequestId(),e(this,P)[P]("spa",new CustomEvent("spa",{detail:{sourceUrl:e(this,o)[o],targetUrl:e(this,n)[n]}}),!0)}.bind(this),e(this,s)[s].cfg.pageData.SPA&&e(this,s)[s].cfg.pageData.SPA.delayEvent&&e(this,s)[s].cfg.pageData.SPA.delayEvent>0?1e3*e(this,s)[s].cfg.pageData.SPA.delayEvent:1)}function I(t){e(this,u)[u]>0&&t>0&&t>=e(this,u)[u]&&t-e(this,u)[u]<=e(this,c)[c]?e(this,d)[d]="click":e(this,d)[d]="exit"}function N(t){if(!document.prerendering)switch(t.type){case"pagehide":e(this,k)[k](t.timeStamp),e(this,P)[P](t.type,t);break;case"readystatechange":let i=t.target.readyState;void 0!==e(this,l)[l][i]&&e(this,P)[P](i,t),"complete"==t.target.readyState&&(e(this,D)[D]("interactive",t),e(this,D)[D]("loaded",t));break;case"pageshow":e(this,P)[P](t.type,t,t.persisted);break;case"visibilitychange":e(this,P)[P]("visible"===document.visibilityState?"active":"hidden",t,!0);break;case"click":case"mousedown":if("click"==t.type&&e(this,u)[u]>0&&e(this,u)[u]>=t.timeStamp-e(this,c)[c])return void e(this,s)[s].speaker.say("event is click and we just did a mousedown event on this click","listener");e(this,u)[u]=t.timeStamp,e(this,k)[k](t.timeStamp),e(this,P)[P](t.type,t);break;case"DOMContentLoaded":case"mousemove":case"mouseup":case"scroll":case"beforeunload":case"blur":case"focus":case"prerenderingchange":e(this,l)[l][t.type].delay?(e(this,r)[r]++,setTimeout(e(this,O)[O].bind(this,t.type,t,e(this,r)[r]),100)):e(this,P)[P](t.type,t);break;default:e(this,s)[s].speaker.say("Don't know how to handle this event: "+t.type)}}function F(t,i,s){s===e(this,r)[r]&&e(this,P)[P](i.type,i)}function U(t,i,r=!1){if(e(this,s)[s].speaker.say("Got hook: "+t,"listener"),void 0!==e(this,l)[l][t]){"pageView"!==e(this,l)[l][t]&&"spa"!==e(this,l)[l][t]||this.k5a.resetRequestId();for(var n=0;n<e(this,l)[l][t].hooks.length;n++){let h=e(this,l)[l][t].hooks[n];for(var o=0;o<e(this,a)[a][h].length;o++)if(0==e(this,a)[a][h][o].done||1==r)try{e(this,a)[a][h][o].callBack(i),e(this,a)[a][h][o].reuse||(e(this,a)[a][h][o].done=!0)}catch(t){e(this,s)[s].speaker.say("Could not execute callback....."+t.toString(),"listener")}else e(this,s)[s].speaker.say("["+i.type+"]Hook already done: "+h,"listener");e(this,s)[s].logger.fire(h,i.source||"js",i.type)}}else e(this,s)[s].speaker.say("undefined hook: "+t,"listener")}function R(t,i){for(var s=0;s<e(this,h)[h][t].length;s++)0==e(this,h)[h][t][s].done&&(e(this,h)[h][t][s].callback(i),e(this,h)[h][t][s].done=!0)}function V(e){var t=document.getElementById("evtDebug");null===t&&((t=document.createElement("DIV")).id="evtDebug",t.style="background:grey;color:white;padding:5px;position:fixed;bottom:10px;right:10px;width:250px;min-height:30px;font-size:12px;opacity:0.85;",document.body.appendChild(t)),t.innerHTML+="<li>"+e.type+" "+document.visibilityState}function H(e){}function q(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var B=0;function K(e){return"__private_"+B+++"_"+e}var $=K("k5a"),z=K("prefix"),Y=K("scopes"),J=K("scopeFilter"),W=K("scopeFilterDev"),G=K("globalDebugMode"),Q=K("globalDevMode"),Z=K("initModes"),X=K("getCaller");class ee{constructor(e="",t=null){return Object.defineProperty(this,X,{value:ie}),Object.defineProperty(this,Z,{value:te}),Object.defineProperty(this,$,{writable:!0,value:null}),Object.defineProperty(this,z,{writable:!0,value:"K5A"}),Object.defineProperty(this,Y,{writable:!0,value:{}}),Object.defineProperty(this,J,{writable:!0,value:null}),Object.defineProperty(this,W,{writable:!0,value:null}),Object.defineProperty(this,G,{writable:!0,value:!1}),Object.defineProperty(this,Q,{writable:!0,value:!1}),q(this,$)[$]=t,q(this,z)[z]=e||q(this,z)[z],q(this,Z)[Z](),this.newScope(q(this,z)[z].toLowerCase())}newScope(e,t=!1,i=!1){var s;return void 0===(null==(s=q(this,Y)[Y])?void 0:s[e])&&(q(this,Y)[Y][e]=new oe(this,e),q(this,Y)[Y][e].debugMode=t,q(this,Y)[Y][e].devMode=i,null!=q(this,J)[J]&&e.match(q(this,J)[J])&&(q(this,Y)[Y][e].debugMode=!0),null!=q(this,W)[W]&&e.match(q(this,W)[W])&&(q(this,Y)[Y][e].devMode=!0)),q(this,Y)[Y][e]}set debugMode(e=!0){this.globalDebugMode=e}get debugMode(){return q(this,G)[G]}set globalDebugMode(e=!0){q(this,G)[G]=e}get globalDebugMode(){return q(this,G)[G]}setPersistentDebugMode(e=!1,t=!1){if(q(this,$)[$])if(e){var i=t?2:1;q(this,$)[$].storage.setKey("dbg",i,3600),this.debugMode=!0,this.say("Persistent debug mode initialized","k5a")}else q(this,$)[$].storage.delKey("dbg")}checkPersistentDebugMode(){if(q(this,$)[$]&&q(this,$)[$].storage&&q(this,$)[$].storage.canStore()){var e=q(this,$)[$].storage.getKey("dbg");e&&(e>1?(this.globalDebugMode=!0,this.globalDevMode=!0):1===e&&(this.globalDebugMode=!0,this.globalDevMode=!1))}}_log(e,t="info",i=null,s=!1){var a,r,n;if(0==q(this,G)[G]&&null!=i&&(null==(null==(a=q(this,Y)[Y])?void 0:a[i])||0==q(this,Y)[Y][i].debugMode))return;let o="";if("object"==typeof e&&(void 0!==e.prefix&&(o=e.prefix),t=e.type,i=e.scope,e=e.message),"error"==t||q(this,G)[G]||null!=(r=q(this,Y)[Y])&&r[i]&&null!=(n=q(this,Y)[Y])&&n[i].debugMode){let s="font-weight:bold;color:#284352;",a={info:"blue",error:"red",warn:"orange"},r=q(this,z)[z]+(null!==i?"["+i+"]":"")+o;if("error"===t?console.error("%c"+r+": %c"+e,s,"color:"+a[t]):console.log("%c"+r+": %c"+e,s,"color:"+a[t]),q(this,Q)[Q]||null!=i&&q(this,Y)[Y][i].devMode){let e=q(this,X)[X]();console.log("%c"+r+": %c \\-> "+e,s,"color:"+a[t])}}}table(e,t=null){this._canLog(t)&&(console.table?console.table(e):console.debug(JSON.stringify(e)))}dump(e,t=null){this._canLog(t)&&(q(this,Q)[Q]||null!=t&&q(this,Y)[Y][t].devMode?console.trace(e):console.debug(e))}_canLog(e=null){var t;return(null!=e||0!=q(this,G)[G])&&(null==e||null!=(null==(t=q(this,Y)[Y])?void 0:t[e])&&0!=q(this,Y)[Y][e].debugMode||0!=q(this,G)[G])}}function te(){if(location.href.indexOf("k5aDebug")>-1){let e=new URL(location.href),t=e.searchParams.get("k5aDebug");t&&(t.indexOf("|")>-1||t.length>=3)?q(this,J)[J]=new RegExp("^"+t.replace("*",".*")+"$","i"):"1"!==t&&"true"!==t||(q(this,G)[G]=!0,this._log("global debug mode ON","info"));let i=e.searchParams.get("k5aDebugDev");i&&(i.indexOf("|")>-1||i.length>=3)?q(this,W)[W]=new RegExp("^"+i.replace("*",".*")+"$","i"):"1"!==i&&"true"!==i||(q(this,Q)[Q]=!0,this._log("global debug devmode ON","info"))}}function ie(){let e=((new Error).stack||"").split("\n");for(var t=1;t<e.length;t++)if(-1===e[t].indexOf("speaker")||t+1==e.length)return e[t].trim();return""}var se=K("scope"),ae=K("speaker"),re=K("devMode"),ne=K("debugMode");class oe{constructor(e,t,i=!1){Object.defineProperty(this,se,{writable:!0,value:""}),Object.defineProperty(this,ae,{writable:!0,value:null}),Object.defineProperty(this,re,{writable:!0,value:!1}),Object.defineProperty(this,ne,{writable:!0,value:!1}),q(this,ae)[ae]=e,q(this,se)[se]=t,q(this,re)[re]=i}set globalDebugMode(e=!0){q(this,ae)[ae].globalDebugMode=e}get globalDebugMode(){return q(this,ae)[ae].globalDebugMode}set debugMode(e=!0){q(this,ne)[ne]=e}get debugMode(){return q(this,ne)[ne]}get speaker(){return q(this,ae)[ae]}set devMode(e=!0){q(this,re)[re]=e,e&&this.info("Dev mode: ON")}get devMode(){return q(this,re)[re]}canLog(){return q(this,ae)[ae]._canLog(q(this,se)[se])}log(e){this.say(e)}say(e){q(this,ae)[ae]._log(e,"info",q(this,se)[se])}info(e){this.say(e)}error(e){q(this,ae)[ae]._log(e,"error",q(this,se)[se])}warn(e){q(this,ae)[ae]._log(e,"warn",q(this,se)[se])}table(e){this.say("Table dump"),q(this,ae)[ae].table(e,q(this,se)[se])}dump(e){this.say("Dump"),q(this,ae)[ae].dump(e,q(this,se)[se])}newScope(e,t=!1,i=!1){return q(this,ae)[ae].newScope(e,t,i)}extendScope(e){return q(this,ae)[ae].newScope(q(this,se)[se]+":"+e)}setPersistentDebugMode(e=!1,t=!1){return q(this,ae)[ae].setPersistentDebugMode(e,t)}checkPersistentDebugMode(){return q(this,ae)[ae].checkPersistentDebugMode()}}function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},le.apply(null,arguments)}function he(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ue=0;function ce(e){return"__private_"+ue+++"_"+e}var de=ce("k5a"),pe=ce("data"),fe=ce("hookMap"),ge=ce("loggerEnabled"),ve=ce("useRateLimiter"),be=ce("reqCnt"),ye=ce("reqLastCheckTime"),me=ce("reqFastReqCnt"),ke=ce("totalMaxRequest"),we=ce("timeMaxRequest"),Oe=ce("timeRequestsCnt"),Pe=ce("compileLogdata"),De=ce("checkRateLimits");class je{constructor(e){Object.defineProperty(this,De,{value:_e}),Object.defineProperty(this,Pe,{value:Se}),Object.defineProperty(this,de,{writable:!0,value:null}),Object.defineProperty(this,pe,{writable:!0,value:{}}),Object.defineProperty(this,fe,{writable:!0,value:{pageView:"p",click:"c",exit:"e",activity:"a",video:"v",nisa:"n"}}),Object.defineProperty(this,ge,{writable:!0,value:!0}),Object.defineProperty(this,ve,{writable:!0,value:!1}),Object.defineProperty(this,be,{writable:!0,value:0}),Object.defineProperty(this,ye,{writable:!0,value:null}),Object.defineProperty(this,me,{writable:!0,value:0}),Object.defineProperty(this,ke,{writable:!0,value:1e3}),Object.defineProperty(this,we,{writable:!0,value:10}),Object.defineProperty(this,Oe,{writable:!0,value:10}),he(this,de)[de]=e,void 0!==he(this,de)[de].cfg.rateLimiter&&(he(this,ve)[ve]=!!he(this,de)[de].cfg.rateLimiter.enabled,he(this,ve)[ve]&&he(this,de)[de].speaker.say("Using ratelimiter with these settings: "+JSON.stringify(he(this,de)[de].cfg.rateLimiter),"logger"),void 0!==he(this,de)[de].cfg.rateLimiter.maxRequests&&(he(this,ke)[ke]=he(this,de)[de].cfg.rateLimiter.maxRequests),void 0!==he(this,de)[de].cfg.rateLimiter.throttlingTime&&(he(this,we)[we]=he(this,de)[de].cfg.rateLimiter.throttlingTime),void 0!==he(this,de)[de].cfg.rateLimiter.throttlingCount&&(he(this,Oe)[Oe]=he(this,de)[de].cfg.rateLimiter.throttlingCount))}getLogCount(){return he(this,be)[be]}disable(){he(this,ge)[ge]=!1}enable(){he(this,ge)[ge]=!0}fireNow(e,t,i="js",s="c"){this.addData(e,t),this.fire(e,i,s)}addData(e,t){he(this,de)[de].speaker.say("adding data for: "+e,"logger"),he(this,de)[de].speaker.table(t,"logger"),void 0===he(this,pe)[pe][e]?he(this,pe)[pe][e]=t:he(this,pe)[pe][e]=le({},he(this,pe)[pe][e],t)}fire(e,t="",i=""){if(void 0!==he(this,pe)[pe][e]){var s=he(this,pe)[pe][e];delete he(this,pe)[pe][e],void 0!==he(this,fe)[fe][e]&&(s.l=he(this,fe)[fe][e]),void 0!==s._h&&""!==s._h||(s._h=e),void 0!==s._s&&""!==s._s||(s._s=t),void 0!==s._l&&""!==s._l||(s._l=i),he(this,be)[be]++,s._c=he(this,be)[be],he(this,De)[De](),this.doLog(s)}}doLog(e){if(0==he(this,ge)[ge])return;let t=he(this,Pe)[Pe](e);he(this,de)[de].speaker.say("full send: "+t);try{if(navigator&&navigator.sendBeacon)return navigator.sendBeacon(t+"&_m=b",{});var i=(new Date).getTime();return(new Image).src=t+"&_m=i&_r="+i,!0}catch(e){console.error(e.toString())}}doPostLog(e){if(he(this,De)[De](),0!=he(this,ge)[ge])try{if(navigator&&navigator.sendBeacon){he(this,be)[be]++;var t=[];if(void 0===e.l)return console.error("Missing logType!"),!1;t.push("l="+e.l),["_h","_s","_l"].forEach((function(i,s){void 0===e[i]&&(e[i]=""),t.push(i+"="+e[i])})),t.push("_m=b"),t.push("_c="+he(this,be)[be]),e.i=he(this,de)[de].cfg.installationId,navigator.sendBeacon(he(this,de)[de].k5aServer+"p?i="+he(this,de)[de].cfg.installationId+"&"+t.join("&"),JSON.stringify(e))}}catch(e){console.error(e.toString())}}}function Se(e){for(var t in e)e[t]instanceof Array&&(e[t]=e[t].join("|"));var i="";void 0!==e.l&&(i="&l="+e.l,delete e.l);var s=Object.keys(e).map((t=>t+"="+encodeURIComponent(e[t]))).join("&");return he(this,de)[de].k5aServer+"?i="+he(this,de)[de].cfg.installationId+i+"&"+s}function _e(){if(he(this,ve)[ve]){if(null===he(this,ye)[ye])return void(he(this,ye)[ye]=parseInt((new Date).getTime()/1e3));let e=parseInt((new Date).getTime()/1e3);e-he(this,ye)[ye]<=he(this,we)[we]?(he(this,me)[me]++,he(this,me)[me]>=he(this,Oe)[Oe]&&(he(this,ge)[ge]?(he(this,de)[de].speaker.say("Throttling log requests, execeed limits with "+he(this,me)[me]+" of "+he(this,Oe)[Oe]+" the last "+he(this,we)[we]+" seconds","logger"),this.disable()):he(this,de)[de].speaker.say("Log requests is throttled, execeed limits with "+he(this,me)[me]+" of "+he(this,Oe)[Oe]+" the last "+he(this,we)[we]+" seconds","logger"))):(he(this,me)[me]=0,!1===he(this,ge)[ge]&&he(this,be)[be]<he(this,ke)[ke]&&(he(this,de)[de].speaker.say("Reenabling logging again","logger"),this.enable())),he(this,ye)[ye]=e,he(this,be)[be]>he(this,ke)[ke]&&he(this,de)[de].speaker.warn("This client execeded max total log requests - "+he(this,be)[be]+" of max "+he(this,ke)[ke],"logger")}}function Te(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ae=0;function Ee(e){return"__private_"+Ae+++"_"+e}var Ce=Ee("url"),Me=Ee("k5a");class xe{constructor(e=null,t=null){Object.defineProperty(this,Ce,{writable:!0,value:""}),Object.defineProperty(this,Me,{writable:!0,value:null}),null!==e&&(null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/+/i)&&(e="https://"+e));try{var i;Te(this,Ce)[Ce]=new URL(null!=(i=e)?i:location.href)}catch(t){var s;console.error("Invalid url given '"+(null!=(s=e)?s:location.href)+"' "+t.toString())}}get isLink(){return 0==Te(this,Ce)[Ce].href.toLowerCase().indexOf("http",0)}get domain(){return Te(this,Ce)[Ce].hostname.split(".").slice(-2).join(".")}get hash(){return Te(this,Ce)[Ce].hash}get host(){return Te(this,Ce)[Ce].host}get hostname(){return Te(this,Ce)[Ce].hostname}get href(){return Te(this,Ce)[Ce].href}get origin(){return Te(this,Ce)[Ce].origin}get password(){return Te(this,Ce)[Ce].password}get pathname(){return Te(this,Ce)[Ce].pathname}get port(){return Te(this,Ce)[Ce].port}get protocol(){return Te(this,Ce)[Ce].port}get search(){return Te(this,Ce)[Ce].search}get searchParams(){return Te(this,Ce)[Ce].searchParams}get clean(){return Te(this,Ce)[Ce].href.split(/[?#]/)[0]}get k5a(){var e;let t=Te(this,Ce)[Ce],i=null;try{var s,a;if(null==Te(this,Me)[Me]&&"undefined"!=typeof kilkaya&&null!=(s=kilkaya)&&null!=(s=s.cfg)&&null!=(s=s.url)&&s.rules&&(Te(this,Me)[Me]=kilkaya,i=Te(this,Me)[Me].speaker.newScope("k5aUrl"),i.say("k5a parsing url: "+t)),null!==Te(this,Me)[Me]&&null!=(a=Te(this,Me)[Me])&&null!=(a=a.cfg)&&null!=(a=a.url)&&a.rules){const e=Te(this,Me)[Me].cfg.url.rules,i=t.toString();for(let s=0;s<e.length;s++){let a=e[s].rule.replaceAll("/(?i)","");a=a.replace(/\/$/,"").replace(/^\//,"");let r=new RegExp(a,"i"),n=i.replace(r,e[s].replace);if(n!=i){t=new URL(n);break}}}}catch(e){console.error("Could not url parse url : |"+t+"| reason: "+e.toString())}return null==(e=i)||e.say("k5a url result: "+(t.hostname+t.pathname).replace(/\/+$/,"").replace(/\/+/,"/")),(t.hostname+t.pathname).replace(/\/+$/,"").replace(/\/+/,"/")}}function Le(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ie=0;function Ne(e){return"__private_"+Ie+++"_"+e}var Fe=Ne("f"),Ue=Ne("keyStrBase64"),Re=Ne("keyStrUriSafe"),Ve=Ne("baseReverseDic");class He{constructor(){Object.defineProperty(this,Fe,{writable:!0,value:String.fromCharCode}),Object.defineProperty(this,Ue,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}),Object.defineProperty(this,Re,{writable:!0,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$"}),Object.defineProperty(this,Ve,{writable:!0,value:{}})}getBaseValue(e,t){if(!Le(this,Ve)[Ve][e]){Le(this,Ve)[Ve][e]={};for(var i=0;i<e.length;i++)Le(this,Ve)[Ve][e][e.charAt(i)]=i}return Le(this,Ve)[Ve][e][t]}compressToBase64(e){if(null==e)return"";var t=this._compress(e,6,function(e){return Le(this,Ue)[Ue].charAt(e)}.bind(this));switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}}decompressFromBase64(e){return null==e?"":""==e?null:this._decompress(e.length,32,function(t){return getBaseValue(Le(this,Ue)[Ue],e.charAt(t))}.bind(this))}compressToUTF16(e){return null==e?"":this._compress(e,15,function(e){return Le(this,Fe)[Fe](e+32)}.bind(this))+" "}decompressFromUTF16(e){return null==e?"":""==e?null:this._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32}.bind(e))}compressToUint8Array(e){for(var t=this.compress(e),i=new Uint8Array(2*t.length),s=0,a=t.length;s<a;s++){var r=t.charCodeAt(s);i[2*s]=r>>>8,i[2*s+1]=r%256}return i}decompressFromUint8Array(e){if(null==e)return this.decompress(e);for(var t=new Array(e.length/2),i=0,s=t.length;i<s;i++)t[i]=256*e[2*i]+e[2*i+1];var a=[];return t.forEach(function(e){a.push(Le(this,Fe)[Fe](e))}.bind(this)),this.decompress(a.join(""))}compressToEncodedURIComponent(e){return null==e?"":this._compress(e,6,function(e){return Le(this,Re)[Re].charAt(e)}.bind(this))}decompressFromEncodedURIComponent(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),this._decompress(e.length,32,function(t){return getBaseValue(Le(this,Re)[Re],e.charAt(t))}.bind(this)))}compress(e){return this._compress(e,16,function(e){return Le(this,Fe)[Fe](e)}.bind(this))}_compress(e,t,i){if(null==e)return"";var s,a,r,n={},o={},l="",h="",u="",c=2,d=3,p=2,f=[],g=0,v=0;for(r=0;r<e.length;r+=1)if(l=e.charAt(r),Object.prototype.hasOwnProperty.call(n,l)||(n[l]=d++,o[l]=!0),h=u+l,Object.prototype.hasOwnProperty.call(n,h))u=h;else{if(Object.prototype.hasOwnProperty.call(o,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)g<<=1,v==t-1?(v=0,f.push(i(g)),g=0):v++;for(a=u.charCodeAt(0),s=0;s<8;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}else{for(a=1,s=0;s<p;s++)g=g<<1|a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a=0;for(a=u.charCodeAt(0),s=0;s<16;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}0==--c&&(c=Math.pow(2,p),p++),delete o[u]}else for(a=n[u],s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;0==--c&&(c=Math.pow(2,p),p++),n[h]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(o,u)){if(u.charCodeAt(0)<256){for(s=0;s<p;s++)g<<=1,v==t-1?(v=0,f.push(i(g)),g=0):v++;for(a=u.charCodeAt(0),s=0;s<8;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}else{for(a=1,s=0;s<p;s++)g=g<<1|a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a=0;for(a=u.charCodeAt(0),s=0;s<16;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1}0==--c&&(c=Math.pow(2,p),p++),delete o[u]}else for(a=n[u],s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;0==--c&&(c=Math.pow(2,p),p++)}for(a=2,s=0;s<p;s++)g=g<<1|1&a,v==t-1?(v=0,f.push(i(g)),g=0):v++,a>>=1;for(;;){if(g<<=1,v==t-1){f.push(i(g));break}v++}return f.join("")}decompress(e){return null==e?"":""==e?null:this._decompress(e.length,32768,function(t){return e.charCodeAt(t)}.bind(e))}_decompress(e,t,i){var s,a,r,n,o,l,h,u=[],c=4,d=4,p=3,f="",g=[],v={val:i(0),position:t,index:1};for(s=0;s<3;s+=1)u[s]=s;for(r=0,o=Math.pow(2,2),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;switch(r){case 0:for(r=0,o=Math.pow(2,8),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;h=Le(this,Fe)[Fe](r);break;case 1:for(r=0,o=Math.pow(2,16),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;h=Le(this,Fe)[Fe](r);break;case 2:return""}for(u[3]=h,a=h,g.push(h);;){if(v.index>e)return"";for(r=0,o=Math.pow(2,p),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;switch(h=r){case 0:for(r=0,o=Math.pow(2,8),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;u[d++]=Le(this,Fe)[Fe](r),h=d-1,c--;break;case 1:for(r=0,o=Math.pow(2,16),l=1;l!=o;)n=v.val&v.position,v.position>>=1,0==v.position&&(v.position=t,v.val=i(v.index++)),r|=(n>0?1:0)*l,l<<=1;u[d++]=Le(this,Fe)[Fe](r),h=d-1,c--;break;case 2:return g.join("")}if(0==c&&(c=Math.pow(2,p),p++),u[h])f=u[h];else{if(h!==d)return null;f=a+a.charAt(0)}g.push(f),u[d++]=a+f.charAt(0),a=f,0==--c&&(c=Math.pow(2,p),p++)}}}function qe(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Be=0;function Ke(e){return"__private_"+Be+++"_"+e}var $e=Ke("storageName"),ze=Ke("storageMode"),Ye=Ke("sameSite"),Je=Ke("domain"),We=Ke("canStore"),Ge=Ke("useBinary"),Qe=Ke("useBase64"),Ze=Ke("buckSize"),Xe=Ke("buckCnt"),et=Ke("dataSet"),tt=Ke("k5a"),it=Ke("checkStorage"),st=Ke("getData"),at=Ke("saveData"),rt=Ke("getCookie"),nt=Ke("saveToCookie"),ot=Ke("resetCookie"),lt=Ke("setCookie");class ht{constructor(e,t="_k5a",i="cookie"){Object.defineProperty(this,lt,{value:vt}),Object.defineProperty(this,ot,{value:gt}),Object.defineProperty(this,nt,{value:ft}),Object.defineProperty(this,rt,{value:pt}),Object.defineProperty(this,at,{value:dt}),Object.defineProperty(this,st,{value:ct}),Object.defineProperty(this,it,{value:ut}),Object.defineProperty(this,$e,{writable:!0,value:"_k5a"}),Object.defineProperty(this,ze,{writable:!0,value:"cookie"}),Object.defineProperty(this,Ye,{writable:!0,value:"Strict"}),Object.defineProperty(this,Je,{writable:!0,value:""}),Object.defineProperty(this,We,{writable:!0,value:!1}),Object.defineProperty(this,Ge,{writable:!0,value:!1}),Object.defineProperty(this,Qe,{writable:!0,value:!1}),Object.defineProperty(this,Ze,{writable:!0,value:950}),Object.defineProperty(this,Xe,{writable:!0,value:4}),Object.defineProperty(this,et,{writable:!0,value:null}),Object.defineProperty(this,tt,{writable:!0,value:null}),t!==qe(this,$e)[$e]&&""!==t?qe(this,$e)[$e]=t:void 0!==e&&void 0!==e.cfg.storage&&(void 0!==e.cfg.storage.name&&(qe(this,$e)[$e]=e.cfg.storage.name),void 0!==e.cfg.storage.type&&"localstorage"==e.cfg.storage.type&&(i="localstorage"),void 0!==e.cfg.storage.b64&&e.cfg.storage.b64&&(qe(this,Qe)[Qe]=!0,e.speaker.say("storage: b64 on")),void 0!==e.cfg.storage.compress&&e.cfg.storage.compress&&(qe(this,Ge)[Ge]=!0,e.speaker.say("storage: compress on"))),i!=qe(this,ze)[ze]&&(qe(this,ze)[ze]=i),qe(this,tt)[tt]=e;let s=new xe(location.href);qe(this,Je)[Je]=s.domain,qe(this,We)[We]=qe(this,it)[it](),e.speaker.say("Can store : "+(qe(this,We)[We]?"yes":"no")+" storageMode:"+qe(this,ze)[ze]),qe(this,We)[We]&&(qe(this,et)[et]=qe(this,st)[st]())}canStore(){return qe(this,We)[We]}get(){return qe(this,et)[et]}set(e){qe(this,et)[et]=e,qe(this,at)[at]()}getKey(e){return null==qe(this,et)[et]&&(qe(this,et)[et]=qe(this,st)[st]()),null!==qe(this,et)[et]&&void 0!==qe(this,et)[et][e]?qe(this,et)[et][e][1]>0&&parseInt((new Date).getTime()/1e3)>qe(this,et)[et][e][1]?(delete qe(this,et)[et][e],qe(this,at)[at](),null):qe(this,et)[et][e][0]:null}setKey(e,t,i=0){null==qe(this,et)[et]&&(qe(this,et)[et]=qe(this,st)[st]()),qe(this,et)[et][e]=[t,i>0?parseInt((new Date).getTime()/1e3)+i:0],qe(this,at)[at]()}delKey(e){null==qe(this,et)[et]&&(qe(this,et)[et]=qe(this,st)[st]());try{delete qe(this,et)[et][e]}catch(t){console.log("could not delete key: "+e)}qe(this,at)[at]()}delete(){try{"localstorage"==qe(this,ze)[ze]?localStorage.removeItem(qe(this,$e)[$e]):qe(this,ot)[ot]()}catch(e){return console.error("Could not delete "+qe(this,ze)[ze]+", reason: "+e.toString()),!1}return!0}}function ut(){var e=!1;if("cookie"===qe(this,ze)[ze]){if(navigator&&navigator.cookieEnabled&&(e=!0),!e){var t="__t"+(new Date).getTime();document.cookie=t+"=1",e=-1!==document.cookie.indexOf(t+"="),document.cookie=t+"=1; expires=Thu, 01-Jan-1970 00:00:01 GMT"}}else if("localstorage"===qe(this,ze)[ze]){e=!1;try{if("object"==(typeof window.localStorage).toLowerCase())try{const t="_k5a_storage_check_"+qe(this,tt)[tt].requestId;window.localStorage.setItem(t,null),window.localStorage.removeItem(t),e=!0}catch(t){e=!1}}catch(t){e=!1}}return e}function ct(){let e;if("localstorage"==qe(this,ze)[ze]){if(e=localStorage.getItem(qe(this,$e)[$e]),qe(this,Ge)[Ge]){let t=(new He).decompress(e);null!==t&&(e=t)}}else if(e=qe(this,rt)[rt](qe(this,$e)[$e]),qe(this,Qe)[Qe]&&null!==e)try{e=decodeURIComponent(atob(e))}catch(e){console.error(e.toString())}if(null==e)return{};try{return JSON.parse(e)}catch(e){console.log("error in data: "+e.toString()),"localstorage"!==qe(this,ze)[ze]&&qe(this,ot)[ot]()}return{}}function dt(){let e=JSON.stringify(qe(this,et)[et]);"localstorage"==qe(this,ze)[ze]?(qe(this,Ge)[Ge]&&(e=(new He).compress(e)),localStorage.setItem(qe(this,$e)[$e],e)):(qe(this,Qe)[Qe]&&(e=btoa(encodeURIComponent(e))),qe(this,nt)[nt](e))}function pt(e){let t="",i=0,s=!1,a=0;for(;(0===i||s)&&i<qe(this,Xe)[Xe];){let r=e+(i>0?i:"")+"=";if(document.cookie.length>0){let e=document.cookie.indexOf(r);if(-1!=e){e+=r.length;let n=document.cookie.indexOf(";",e);-1==n&&(n=document.cookie.length);let o=document.cookie.substring(e,n);if(o.length>0){if(0==i){let e=o.indexOf("@",0);a=o.substring(0,e),o=o.substr(e+1)}t+=o,s=!0}else s=!1}}i++}return t.length!=a?(console.error("Data is corrupt! - "+t.length+"vs"+a),qe(this,ot)[ot](),null):t.length>0?t:null}function ft(e){let t=new Date;t.setFullYear(t.getFullYear()+1),qe(this,ot)[ot]();let i=0,s=e.length+"@"+e.substr(i,qe(this,Ze)[Ze]);for(;s.length>0&&i<qe(this,Xe)[Xe];)try{qe(this,lt)[lt](i>0?qe(this,$e)[$e]+i:qe(this,$e)[$e],s,new Date(t),"/",qe(this,Je)[Je],qe(this,Ye)[Ye]),i++,s=e.substr(qe(this,Ze)[Ze]*i,qe(this,Ze)[Ze])}catch(e){console.debug(e.toString()),i=1e3}}function gt(){let e=new Date;e.setFullYear(e.getFullYear()-1);for(let t=0;t<4;t++)qe(this,lt)[lt](qe(this,$e)[$e]+(t>0?t:""),"",new Date(e),"/",qe(this,Je)[Je],qe(this,Ye)[Ye])}function vt(e,t,i,s,a,r,n){void 0===r&&(r="Lax"),"None"===r&&(n=!0);var o=e+"="+t+(i?"; Expires="+i.toGMTString():"")+(s?"; Path="+s:"")+(a?"; Domain="+a:"")+(r?"; SameSite="+r:"")+(n?"; Secure":"");document.cookie=o}function bt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var yt=0;function mt(e){return"__private_"+yt+++"_"+e}var kt=mt("channel");class wt{constructor(e=!1,t="domDetection2"){if(Object.defineProperty(this,kt,{writable:!0,value:""}),"domDetection"==t){var i=document.createElement("div");i.style.cssText="position: fixed;top: 0;left: 0;bottom: 0;right: 0;",document.documentElement.insertBefore(i,document.documentElement.firstChild);var s={width:i.offsetWidth,height:i.offsetHeight};console.debug(s);var a=s.width;bt(this,kt)[kt]=a<600?"mobile":"desktop",e&&a>=600&&(/ipad|android|tablet|kindle|silk|nook\s+browser|msie.+touch|xoom\s+build/i.test(navigator.userAgent)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone)&&(bt(this,kt)[kt]="tablet"),document.documentElement.removeChild(i)}else{var r=navigator.userAgent.toLowerCase();-1===r.indexOf("mobile")&&r.indexOf("android")>-1||/(tablet|ipad|playbook|silk|kindle|nook\s+browser|msie.+touch|xoom\s+build)/i.test(r)||"macintel"===navigator.platform.toLowerCase()&&void 0!==navigator.standalone?bt(this,kt)[kt]=e?"tablet":"desktop":/Mobile|iP(hone|od)|Android.*Mobile|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/i.test(r)?bt(this,kt)[kt]="mobile":bt(this,kt)[kt]="desktop"}}getChannel(){return bt(this,kt)[kt]}}function Ot(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Pt=0;function Dt(e){return"__private_"+Pt+++"_"+e}var jt=Dt("wordcount");class St{constructor(e,t){if(Object.defineProperty(this,jt,{writable:!0,value:0}),void 0!==t.wordCount)for(var i of Object.keys(t.wordCount.article))if("cl"==i)for(var s of Object.keys(t.wordCount.article[i]))for(var a=e.getElementsByClassName(s),r=0;r<a.length;r++)o=(o=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.cl[s]?Ot(this,jt)[jt]+=o.split(" ").length-1:Ot(this,jt)[jt]-=o.split(" ").length-1;else if("el"==i)for(var n of Object.keys(t.wordCount.article[i]))for(a=e.getElementsByTagName(n),r=0;r<a.length;r++){var o;o=(o=a[r].textContent).replace(/\s+/g," "),1==t.wordCount.article.el[n]?Ot(this,jt)[jt]+=o.split(" ").length-1:Ot(this,jt)[jt]-=o.split(" ").length-1}}getWordcount(){return Ot(this,jt)[jt]}}function _t(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Tt=0;function At(e){return"__private_"+Tt+++"_"+e}var Et=At("paywallDetected");class Ct{constructor(e,t){if(Object.defineProperty(this,Et,{writable:!0,value:""}),null!=e&&void 0!==t.paywall&&void 0!==t.paywall.auto&&t.paywall.auto){if(void 0===t.paywall.element)return console.error("Paywall: missing element configuration"),!1;e.querySelectorAll(t.paywall.element).length>0&&(_t(this,Et)[Et]="hard")}}getPaywall(){return _t(this,Et)[Et]}}function Mt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var xt=0;function Lt(e){return"__private_"+xt+++"_"+e}var It=Lt("referer"),Nt=Lt("qsps"),Ft=Lt("special"),Ut=Lt("getQSP");class Rt{constructor(e,t){Object.defineProperty(this,Ut,{value:Vt}),Object.defineProperty(this,It,{writable:!0,value:""}),Object.defineProperty(this,Nt,{writable:!0,value:["utm_source"]}),Object.defineProperty(this,Ft,{writable:!0,value:{"facebook.com":["fbclid"]}}),void 0!==t.referer&&(Mt(this,Nt)[Nt]=t.referer);for(var i=0;i<Mt(this,Nt)[Nt].length;i++)if(void 0!==Mt(this,Nt)[Nt][i]&&""!=Mt(this,Nt)[Nt][i]&&!1!==(a=Mt(this,Ut)[Ut](Mt(this,Nt)[Nt][i]))&&""!==a){Mt(this,It)[It]=a;break}if(""===Mt(this,It)[It])for(var s of Object.keys(Mt(this,Ft)[Ft])){for(i=0;i<Mt(this,Ft)[Ft][s].length;i++){var a;if(!1!==(a=Mt(this,Ut)[Ut](Mt(this,Ft)[Ft][s][i]))){Mt(this,It)[It]=s;break}}if(""!==Mt(this,It)[It])break}""===Mt(this,It)[It]&&document.referrer&&""!==document.referrer&&(Mt(this,It)[It]=document.referrer),""===Mt(this,It)[It]&&(Mt(this,It)[It]="_")}getReferer(){return Mt(this,It)[It]}}function Vt(e){var t=e+"=",i=location.href.indexOf(t),s=-1;return i>-1&&(i+=t.length,-1==(s=location.href.indexOf("&",i))&&(s=location.href.indexOf("#",i)),s>-1?decodeURIComponent(location.href.substring(i,s)):decodeURIComponent(location.href.substr(i)))}function Ht(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var qt=0;function Bt(e){return"__private_"+qt+++"_"+e}var Kt=Bt("autoSection");class $t{constructor(e,t){if(Object.defineProperty(this,Kt,{writable:!0,value:""}),void 0!==t.autoSection&&t.autoSection&&""!==e){var i=new URL(e).pathname.split("/");i.length>2&&""!==i[1]&&(Ht(this,Kt)[Kt]=i[1].toLowerCase())}}getSection(){return Ht(this,Kt)[Kt]}}class zt{getMostVisibleElement(e){var t=window.innerHeight,i=0,s=null;for(var a of Array.from(e)){var r=a.getBoundingClientRect(),n=r.bottom-r.top,o={top:r.top>=0&&r.top<t,bottom:r.bottom>0&&r.bottom<t},l=0;if(o.top&&o.bottom)l=n;else if(o.top)l=t-r.top;else if(o.bottom)l=r.bottom;else if(n>t&&r.top<0){var h=Math.abs(r.top);h<n&&(l=n-h)}l>i&&(i=l,s=a)}return s}}function Yt(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Jt=0;function Wt(e){return"__private_"+Jt+++"_"+e}var Gt=Wt("readK5AMeta"),Qt=Wt("readLPMeta"),Zt=Wt("readLDJson");class Xt{constructor(e,t){switch(Object.defineProperty(this,Zt,{value:ii}),Object.defineProperty(this,Qt,{value:ti}),Object.defineProperty(this,Gt,{value:ei}),t){case"auto":!0!==Yt(this,Gt)[Gt](e)&&Yt(this,Qt)[Qt](e);break;case"LPMeta":Yt(this,Qt)[Qt](e);break;case"ld+json":Yt(this,Zt)[Zt](e,t);break;default:Yt(this,Gt)[Gt](e,t)}}}function ei(e,t="k5aMeta"){if(void 0!==window[t]){for(var i=e.getFields(),s=Object.keys(window[t]),a=0;a<i.length;a++)if(void 0!==window[t][i[a]]&&null!==window[t][i[a]])e.setField(i[a],window[t][i[a]]);else{for(var r=!1,n=0;n<s.length;n++)if((s[n].toLowerCase()==i[a].toLowerCase()||"referrer"==s[n].toLowerCase()&&"referer"==i[a].toLowerCase())&&void 0!==window[t][s[n]]&&""!==window[t][s[n]]&&null!==window[t][s[n]]){e.setField(i[a],window[t][s[n]]),r=!0;break}r||e.delField(i[a])}return!0}return!1}function ti(e){if("undefined"!=typeof LPMeta){var t={url:"url",channel:"channel",image:"image",title:"title",section:"section",type:"type",tag:"tag",cTag:"cntTag",published_time:"publishtime",modified_time:"modifiedtime",paywalluser:"subscriber",paywall:"paid",wordcount:"wordcount",author:"author",conversion:"conversion",converted_user:"conversion",converteduser:"conversion"};for(var i in t)if(void 0!==LPMeta[i]&&""!==LPMeta[i])if("object"==typeof LPMeta[i])for(var s in LPMeta[i])e.setField(t[i],LPMeta[i][s].toLowerCase().trim());else e.setField(t[i],LPMeta[i]);return!0}return!1}function ii(e){var t=document.querySelector('script[type="application/ld+json"]');if(null!=t)var i=JSON.parse(t.innerText),s={mainEntityOfPage:{key:"@id",to:"url"},articleSection:"section",author:{key:"name",to:"author"},datePublished:"publishtime",dateModified:"modifiedtime",headline:"title",image:{key:"0",to:"image"},isAccessibleForFree:{to:"paid",auto:e=>"true"===e||!0===e||1===e?0:1},keywords:{to:"tag",auto:e=>{let t=e.split(/[\s\,\|]+/);return null!=t&&t.length&&t.length>0?t:[]}}};const a=function(e,t){return null!=t&&t.auto&&(t.auto,1)?t.auto(e):e};for(var r in s){var n,o;if(null!=i&&i[r])if(null!=(n=s[r])&&n.key&&null!=(o=i[r])&&o[s[r].key]&&""!==i[r][s[r].key])e.setField(s[r].to,a(i[r][s[r].key],s[r]));else if(""!==i[r]){var l;e.setField((null==(l=s[r])?void 0:l.to)||s[r],a(i[r],s[r]))}}}function si(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ai=0;function ri(e){return"__private_"+ai+++"_"+e}var ni=ri("domElement");class oi{constructor(e=null){Object.defineProperty(this,ni,{writable:!0,value:null}),si(this,ni)[ni]=e}isTranslated(){return!!si(this,ni)[ni].querySelector("html.translated-ltr, html.translated-rtl, ya-tr-span, *[_msttexthash]")}}class li{static getCountable(e){const t=new xe(location.href);let i=t.searchParams;if(t.hash&&t.hash.length>1){const e=t.hash.replace("#","").split("&");for(let t=0;t<e.length;t++){const s=e[t].split("=");i.append(s[0],s[1]||"")}}let s={};return Object.keys(e).forEach((t=>{if(i.has(t))if(1===e[t]||!0===e[t])s[t]=1;else{var a,r;const n=(null==(a=e[t])?void 0:a.delim)||"|",o=i.get(t).split(n);if(null!=(r=e[t])&&r.rules)for(let i=0;i<o.length;i++)for(let a=0;a<e[t].rules.length;a++)if(null!==o[i].match(e[t].rules[a])){s[o[i]]=1;break}}})),Object.keys(s)}}function hi(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ui=0;function ci(e){return"__private_"+ui+++"_"+e}var di=ci("k5a"),pi=ci("pageElm"),fi=ci("artElm"),gi=ci("cfg"),vi=ci("prefixes"),bi=ci("pData"),yi=ci("result"),mi=ci("initFBIAData"),ki=ci("runQSPTrackerData"),wi=ci("initArticleElement"),Oi=ci("autoMeta"),Pi=ci("convertField");class Di{constructor(e,t=document,i=null){var s;if(Object.defineProperty(this,Pi,{value:Ai}),Object.defineProperty(this,Oi,{value:Ti}),Object.defineProperty(this,wi,{value:_i}),Object.defineProperty(this,ki,{value:Si}),Object.defineProperty(this,mi,{value:ji}),Object.defineProperty(this,di,{writable:!0,value:null}),Object.defineProperty(this,pi,{writable:!0,value:null}),Object.defineProperty(this,fi,{writable:!0,value:null}),Object.defineProperty(this,gi,{writable:!0,value:{}}),Object.defineProperty(this,vi,{writable:!0,value:["k5a","kilkaya","og","lp"]}),Object.defineProperty(this,bi,{writable:!0,value:{url:{type:"url",auto:function(){return location.href},fields:["url"],param:"u",spaSafe:!1,isDefault:!0},referer:{type:"string",auto:function(){return new Rt(hi(this,pi)[pi],hi(this,gi)[gi]).getReferer()}.bind(this),forceAutoOnEmpty:!0,fields:["referer","referrer"],param:"r",spaSafe:!0,isDefault:!0},title:{type:"string",fields:["title"],param:"ptl",spaSafe:!1,isDefault:!0},section:{type:"string",fields:["section","article:section"],auto:function(){return new $t(this.getField("url"),hi(this,gi)[gi]).getSection()}.bind(this),param:"psn",spaSafe:!1,lc:!0,isDefault:!0},subsection:{type:"array",fields:["subsection","article:subsection"],param:"pssn",spaSafe:!1,lc:!0,isDefault:!0},type:{type:"string",fields:["type"],param:"ptp",spaSafe:!1,lc:!0,isDefault:!0},image:{type:"url",fields:["image","og:image:url"],param:"pig",spaSafe:!1,isDefault:!0},author:{type:"array",fields:["author","article:author"],param:"par",spaSafe:!1,lc:!0,isDefault:!0},tag:{type:"array",fields:["tag","article:tag"],param:"ptg",spaSafe:!1,lc:!0,isDefault:!0},cnttag:{type:"array",valueRule:/^[a-z0-9\_\-\:]+$/i,fields:["cntTag","article:cntTag"],param:"pctg",spaSafe:!1,lc:!0,isDefault:!0},contenttag:{type:"array",valueRule:/^[a-z0-9\_\-\:]+$/i,fields:["contentTag"],param:"pstg",spaSafe:!1,lc:!0,isDefault:!0},channel:{type:"string",fields:["channel"],auto:function(){return new wt(hi(this,gi)[gi].cntTablet||!1).getChannel()}.bind(this),param:"c",spaSafe:!0,undeleteAble:!0,isDefault:!0},wordcount:{type:"int",fields:["wordcount"],auto:function(){return new St(hi(this,pi)[pi],hi(this,gi)[gi]).getWordcount()}.bind(this),param:"pwct",spaSafe:!1,isDefault:!0},publishtime:{type:"datetime",fields:["published_time","article:published_time"],param:"ppt",spaSafe:!1,isDefault:!0},modifiedtime:{type:"datetime",fields:["modified_time","article:modified_time"],param:"pmt",spaSafe:!1,isDefault:!0},paywall:{type:"string",fields:["paywall"],auto:function(){return new Ct(hi(this,fi)[fi],hi(this,gi)[gi]).getPaywall()}.bind(this),param:"pw",spaSafe:!1,isDefault:!0},paid:{type:"boolean",fields:["paid"],auto:function(){if(hi(this,gi)[gi].paywall&&hi(this,gi)[gi].paywall.autoPaid&&("hard"==hi(this,yi)[yi].paywall||"h"==hi(this,yi)[yi].paywall))return!0}.bind(this),param:"pd",spaSafe:!1,isDefault:!0},login:{type:"boolean",fields:["login"],param:"ul",spaSafe:!0,isDefault:!0},subscriber:{type:"boolean",fields:["subscriber"],param:"sbs",spaSafe:!0,isDefault:!0},conversion:{type:"boolean",fields:["conversion"],param:"cs",spaSafe:!1,isDefault:!0},userid:{type:"string",fields:["userid","userId"],param:"",spaSafe:!0},subscriberid:{type:"string",fields:["subscriberid"],param:"sbid",spaSafe:!0},consent:{type:"boolean",fields:["consent"],param:"cst",auto:function(){return!0},spaSafe:!0},nopageview:{type:"boolean",fields:["nopageview","nopv"],param:"nopv",spaSafe:!1},locale:{type:"string",fields:["locale"],param:"lo",auto:function(){const e=hi(this,pi)[pi].querySelector("html");if(void 0!==e&&e.hasAttribute("lang")){const t=e.getAttribute("lang");return""!=t&&t.length>1?t:""}}.bind(this),spaSafe:!1,lc:!0,isDefault:!0},userneed:{type:"string",fields:["userneed","article:userneed"],param:"un",spaSafe:!1,isDefault:!0},newsvalue:{type:"int",fields:["newsvalue"],param:"nw",spaSafe:!1,isDefault:!0},outdated:{type:"boolean",fields:["outdated"],param:"od",spaSafe:!1,isDefault:!0},freshness:{type:"int",fields:["freshness"],param:"fh",spaSafe:!1,isDefault:!0}}}),Object.defineProperty(this,yi,{writable:!0,value:{}}),hi(this,di)[di]=e,hi(this,pi)[pi]=t,hi(this,gi)[gi]=i,void 0!==hi(this,gi)[gi].customFields)for(var a in hi(this,gi)[gi].customFields)void 0!==hi(this,bi)[bi][a]?hi(this,di)[di].speaker.error("Could not setup customField '"+a+"' - reason: field already exists"):(hi(this,di)[di].speaker.say("Defining "+a+" as part of pageData"),hi(this,bi)[bi][a.toLowerCase()]=hi(this,gi)[gi].customFields[a]);for(var r in void 0!==hi(this,gi)[gi].prefixes&&(hi(this,vi)[vi]=hi(this,gi)[gi].prefixes),hi(this,fi)[fi]=hi(this,wi)[wi](),hi(this,bi)[bi])hi(this,Oi)[Oi](r);void 0!==hi(this,gi)[gi].skipFBIA&&1===hi(this,gi)[gi].skipFBIA||"undefined"==typeof ia_document||hi(this,mi)[mi](),void 0!==hi(this,gi)[gi].qspTracker&&hi(this,ki)[ki](),hi(this,di)[di].speaker.say("Init pagedata read (before jsonMetaData)","pagedata"),hi(this,di)[di].speaker.table(hi(this,yi)[yi],"pagedata"),new Xt(this,null!=(s=hi(this,gi)[gi].jsonMetaData)?s:"auto"),hi(this,di)[di].speaker.say("Init pagedata read:","pagedata"),hi(this,di)[di].speaker.table(hi(this,yi)[yi],"pagedata")}getArticleElement(){return hi(this,fi)[fi]===document||null==(null==this?void 0:hi(this,fi)[fi])?document.body:hi(this,fi)[fi]}reRead(){var e;hi(this,di)[di].speaker.say("ReRead called","pagedata");var t,i=!(!hi(this,gi)[gi].SPA||!hi(this,gi)[gi].SPA.metaData);if(i&&hi(this,gi)[gi].SPA&&"k5aMeta"==hi(this,gi)[gi].SPA.metaData&&"undefined"!=typeof k5aMeta)return this.resetAll(),new Xt(this,null!=(t=hi(this,gi)[gi].jsonMetaData)?t:"auto"),hi(this,yi)[yi].url&&""!==hi(this,yi)[yi].url||this.setField("url",hi(this,bi)[bi].url.auto()),hi(this,di)[di].speaker.say("Pagedata update - SPA (k5aMeta): "+location.href,"pagedata"),void hi(this,di)[di].speaker.table(hi(this,yi)[yi],"pagedata");let s=hi(this,yi)[yi].url;var a=(new zt).getMostVisibleElement(document.querySelectorAll(hi(this,gi)[gi].article));for(var r in hi(this,fi)[fi]=a,hi(this,bi)[bi])i||!i&&hi(this,bi)[bi][r].spaSafe?hi(this,Oi)[Oi](r):"url"==r?this.setField("url",location.href):hi(this,yi)[yi][r]="";new Xt(this,null!=(e=hi(this,gi)[gi].jsonMetaData)?e:"auto"),hi(this,gi)[gi].SPA&&hi(this,gi)[gi].SPA.skipConversion&&1==hi(this,gi)[gi].SPA.skipConversion&&this.resetField("conversion"),this.setField("paywall",hi(this,bi)[bi].paywall.auto()),this.setField("paid",hi(this,bi)[bi].paid.auto()),""==this.getField("referer")&&this.setField("referer",s),hi(this,di)[di].speaker.say("Pagedata update - SPA: "+location.href,"pagedata"),hi(this,di)[di].speaker.table(hi(this,yi)[yi],"pagedata")}setData(e){for(var t in e)this.setField(t,e[t])}setField(e,t){var i;if(null!=t){if("referrer"==(e=e.toLowerCase())&&(e="referer"),void 0!==hi(this,gi)[gi].customParseMetaField&&"function"==typeof hi(this,gi)[gi].customParseMetaField[e])try{t=hi(this,gi)[gi].customParseMetaField[e](t)}catch(t){hi(this,di)[di].speaker.error("Could not execute custom parse filed method for: "+e+" [field value: |"+v+"|]"),hi(this,di)[di].speaker.error("Reason: "+t.toString())}if(void 0!==hi(this,bi)[bi][e]&&""!==t)switch(hi(this,bi)[bi][e].type){case"url":if(!hi(this,gi)[gi].forceRealUrl&&""!=t&&"/"!=t||"url"!=e){var s=this.isUrl(t);if(!1===s)throw new Error("given url is not valid: "+t);hi(this,yi)[yi][e]=s.trim()}else hi(this,yi)[yi][e]=hi(this,bi)[bi].url.auto();break;case"string":let i=(""+t).trim();void 0!==hi(this,bi)[bi][e].lc&&hi(this,bi)[bi][e].lc&&(i=i.toLowerCase()),hi(this,yi)[yi][e]=i;break;case"array":if("object"==typeof t){for(var a in t)if(t.hasOwnProperty(a)&&void 0!==t[a]&&"undefined"!==t[a]&&null!==t[a]){let i=t[a].toString().trim();if(void 0!==hi(this,bi)[bi][e].lc&&hi(this,bi)[bi][e].lc&&(i=i.toLowerCase()),void 0!==hi(this,bi)[bi][e].valueRule&&hi(this,bi)[bi][e].valueRule&&i.match&&null==i.match(hi(this,bi)[bi][e].valueRule))return void hi(this,di)[di].speaker.error("Invalid value for "+e+" value: |"+i+"|");void 0===hi(this,yi)[yi][e]||""===hi(this,yi)[yi][e]?hi(this,yi)[yi][e]=[i]:hi(this,yi)[yi][e].includes(i)||hi(this,yi)[yi][e].push(i)}}else if(void 0!==t&&"undefined"!==t&&null!==t){if(t=t.toString().trim(),void 0!==hi(this,bi)[bi][e].lc&&hi(this,bi)[bi][e].lc&&(t=t.toLowerCase()),void 0!==hi(this,bi)[bi][e].valueRule&&hi(this,bi)[bi][e].valueRule&&null==t.match(hi(this,bi)[bi][e].valueRule))return void hi(this,di)[di].speaker.error("Invalid value for "+e+" value: |"+t+"|");void 0===hi(this,yi)[yi][e]||""===hi(this,yi)[yi][e]?hi(this,yi)[yi][e]=[t]:hi(this,yi)[yi][e].includes(t)||hi(this,yi)[yi][e].push(t)}break;case"boolean":hi(this,yi)[yi][e]="true"==t||1==t||"yes"==t||"1"==t?1:0;break;case"int":var r=parseInt(t);isNaN(r)||(hi(this,yi)[yi][e]=r);break;case"datetime":r=Date.parse(t),isNaN(r)||(hi(this,yi)[yi][e]=t)}if(null!=(i=hi(this,gi)[gi])&&i.postParseField)try{let t=hi(this,gi)[gi].postParseField(e,hi(this,yi)[yi][e]);null!==t&&(hi(this,yi)[yi][e]=t)}catch(e){hi(this,di)[di].speaker.error("Could not call postParseField: "+e.toString())}}}getField(e){return"domain"==e?new xe(this.getField("url")).domain:(e=e.toLowerCase(),void 0!==hi(this,bi)[bi][e]&&void 0!==hi(this,yi)[yi][e]?hi(this,yi)[yi][e]:void 0!==hi(this,yi)[yi][e]&&""!=hi(this,yi)[yi][e]||void 0===hi(this,bi)[bi][e].auto?null:hi(this,bi)[bi][e].auto()||null)}delField(e){return void 0!==hi(this,bi)[bi][e]&&(void 0!==hi(this,bi)[bi][e].forceAutoOnEmpty&&hi(this,bi)[bi][e].forceAutoOnEmpty?hi(this,yi)[yi][e]=hi(this,bi)[bi][e].auto():void 0===hi(this,yi)[yi][e]||void 0===hi(this,bi)[bi][e].undeleteAble||hi(this,bi)[bi][e].undeleteAble||delete hi(this,yi)[yi][e],!0)}resetField(e){return!(void 0!==hi(this,bi)[bi][e].undeleteAble&&hi(this,bi)[bi][e].undeleteAble||void 0===hi(this,bi)[bi][e]||void 0===hi(this,yi)[yi][e]||(hi(this,yi)[yi][e]="",0))}resetAll(){var e=hi(this,yi)[yi].channel;hi(this,yi)[yi]=[],hi(this,yi)[yi].channel=e}getFields(){return Object.keys(hi(this,bi)[bi])}getData(e=null){if(null!==e){let s={};for(let a=0;a<e.length;a++){var t,i;null!=(t=hi(this,yi)[yi])&&t[e[a]]&&(s[e[a]]=null==(i=hi(this,yi)[yi])?void 0:i[e[a]])}return s}return structuredClone(hi(this,yi)[yi])}getFieldShortName(e){return void 0!==hi(this,bi)[bi][e]&&void 0!==hi(this,bi)[bi][e].param&&hi(this,bi)[bi][e].param}getLogData(e=null){var t={};null===e&&(e=Object.keys(hi(this,yi)[yi]));for(var i=0;i<e.length;i++)t[hi(this,bi)[bi][e[i]].param]=hi(this,yi)[yi][e[i]]?hi(this,yi)[yi][e[i]]:"";return t}getDefaultFields(){let e=[];for(let t in hi(this,bi)[bi])void 0!==hi(this,bi)[bi][t].isDefault&&hi(this,bi)[bi][t].isDefault&&e.push(t);return e}getDefaultData(){return this.getLogData(this.getDefaultFields())}isUrl(e){null!==e.match(/^\/\//i)?e=location.protocol+"//"+e:null===e.match(/^https?\:\/\//i)&&(e=location.protocol+"//"+location.hostname+e);try{var t=new URL(e,document.baseURI).href;t!==e&&(e=t)}catch(e){console.log(e.toString())}return(-1!==e.toLowerCase().indexOf("http://")||-1!==e.toLowerCase().indexOf("https://"))&&e}getMetaField(e,t=null){var i=hi(this,pi)[pi].querySelectorAll('meta[property="'+e+'"],meta[name="'+e+'"]');if(i&&i.length>0){for(var s=[],a=0;a<i.length;a++)if(i[a].hasAttribute("content")){var r=i[a].getAttribute("content");if("boolean"===t)return"1"==r||1==r||"yes"==r;null!==r&&""!=r&&s.push(r)}if(s.length>0)return s}return null}isTranslated(){return new oi(hi(this,pi)[pi]).isTranslated()}}function ji(){if("undefined"!=typeof ia_document){this.setField("url",ia_document.shareURL),this.setField("title",ia_document.title);var e=ia_document.referrer||"https://ia.facebook.com/";-1==e.indexOf("http")&&(e="https://"+e),this.setField("referer",e),this.setField("channel",this.getField("channel")+"_fbia")}}function Si(){const e=li.getCountable(hi(this,gi)[gi].qspTracker);if(e&&e.length>0)for(let t=0;t<e.length;t++)this.setField("cntTag",e[t])}function _i(){if(hi(this,gi)[gi].article){var e=hi(this,pi)[pi].querySelector(hi(this,gi)[gi].article);if(null!==e)return e}return hi(this,pi)[pi]}function Ti(e){this.resetField(e),hi(this,bi)[bi][e];for(var t=0;t<hi(this,bi)[bi][e].fields.length;t++)for(var i=0;i<hi(this,vi)[vi].length;i++){let n=-1==hi(this,bi)[bi][e].fields[t].indexOf(":")?hi(this,vi)[vi][i]+":"+hi(this,bi)[bi][e].fields[t]:hi(this,bi)[bi][e].fields[t];var s=hi(this,pi)[pi].querySelectorAll('meta[property="'+n+'"i],meta[name="'+n+'"i]');if(s&&s.length>0)for(var a=0;a<s.length;a++){var r=s[a].getAttribute("content");if(null!==r&&""!=r&&("lp"==hi(this,vi)[vi][i]&&(r=hi(this,Pi)[Pi](hi(this,vi)[vi][i],e,r)),""!==r&&(this.setField(e,r),void 0!==hi(this,yi)[yi][e]&&"array"!=hi(this,bi)[bi][e].type)))return}}void 0!==hi(this,yi)[yi][e]&&""!=hi(this,yi)[yi][e]||void 0===hi(this,bi)[bi][e].auto||this.setField(e,hi(this,bi)[bi][e].auto())}function Ai(e,t,i){if("lp"==e&&"paywall"==t){if("1"===i||"h"===i||"hard"===i)return this.setField("paid",!0),""}else{var s={lp:{paywall:{1:"hard",0:""}}};if(s[e]&&s[e][t]&&s[e][t][i])return s[e][t][i]}return i}class Ei{static isBot(e=null,t=[]){let i=e||window,s=["headless","bot","spider","scraper","bing","crawler","cxense","search","yandex","cookiebot","slurp","sogou","exabot","facebookexternalhit","facebookcatalog",...t],a=!1;var r;return null!=i&&i.navigator&&(null!=(r=i.navigator)&&r.userAgent&&null!==i.navigator.userAgent.match(new RegExp(s.join("|"),"i"))&&(a=!0),(i.navigator.webdriver||""===navigator.languages)&&(a=!0)),a}}function Ci(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Mi=0;function xi(e){return"__private_"+Mi+++"_"+e}var Li=xi("pingData"),Ii=xi("asyncTTL"),Ni=xi("reqIdHistory");class Fi{constructor(e){this.k5a=null,Object.defineProperty(this,Li,{writable:!0,value:{userActive:0,pings:[]}}),this.supportAsync=!1,Object.defineProperty(this,Ii,{writable:!0,value:1e4}),Object.defineProperty(this,Ni,{writable:!0,value:[]}),this.k5a=e}addHook(e,t,i=!1){this.k5a.listener.addHook(e,t,i)}addUserActiveHook(e,t,i){this.k5a.listener.addUserActiveHook(e,t,i)}isAutoEnabled(e){return void 0===this.k5a.cfg.moduleCfg[e]||void 0===this.k5a.cfg.moduleCfg[e].autoDisabled||!0!==this.k5a.cfg.moduleCfg[e].autoDisabled}addAsyncData(e,t,i){var s=this.k5a.storage.getKey("as");null===s&&(s={}),void 0===s[e]&&(s[e]={}),void 0===s[e][t]&&(s[e][t]=[]),i._reqId=this.k5a.requestId,s[e][t].push(i),this.k5a.storage.setKey("as",s,Ci(this,Ii)[Ii])}getAsyncData(e){var t=this.k5a.storage.getKey("as");return null!==t&&void 0!==t[e]&&t[e]}runAsyncData(e,t,i=!1,s=!1){let a=this.k5a.requestId+"_"+e+"_"+t;if(Ci(this,Ni)[Ni].indexOf(a)>-1)return void this.k5a.speaker.say("as sync with id '"+a+"' already done!");Ci(this,Ni)[Ni].push(a);let r=this.k5a.storage.getKey("as"),n={};null!==r&&void 0!==r[e]&&(Object.keys(r).forEach((a=>{a===e?Object.keys(r[a]).forEach((o=>{if("*"===t||o===t)for(var l=0;l<r[e][o].length;l++)if(s||r[e][o][l]._reqId!==this.k5a.requestId)if(delete r[e][o][l]._reqId,i)try{var h=i(r[e][o][l]);!1!==h&&this.k5a.logger.fireNow(o,h,"storage")}catch(e){console.error(e.toString())}else this.k5a.logger.fireNow(o,r[e][o][l],"storage");else void 0===n[a]&&(n[a]={}),void 0===n[a][o]&&(n[a][o]=[]),n[a][o].push(r[e][o][l]),console.log("k5a: not running this AS data as we are on same requestId - "+r[e][o][l]._reqId+" vs k5a:"+this.k5a.requestId)})):Object.keys(r[a]).length>0&&(n[a]=r[a])})),Object.keys(n).length>0?this.k5a.storage.setKey("as",n,Ci(this,Ii)[Ii]):this.k5a.storage.delKey("as"))}say(e){this.k5a.speaker.say(e,this.constructor.name)}warn(e){this.k5a.speaker.warn(e,this.constructor.name)}error(e){this.k5a.speaker.error(e,this.constructor.name)}clearAsyncData(e){}keysToLowerCase(e){var t={};return Object.keys(e).forEach((i=>{t[i.toLowerCase()]=e[i]})),t}}function Ui(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Fi.moduleName="logmodule";var Ri=0;function Vi(e){return"__private_"+Ri+++"_"+e}var Hi=Vi("pingInterval"),qi=Vi("userTTL"),Bi=Vi("lastActive"),Ki=Vi("lastPing"),$i=Vi("logData"),zi=Vi("intId"),Yi=Vi("activities"),Ji=Vi("stop"),Wi=Vi("getTime");class Gi extends Fi{constructor(e){super(e),Object.defineProperty(this,Wi,{value:Zi}),Object.defineProperty(this,Ji,{value:Qi}),Object.defineProperty(this,Hi,{writable:!0,value:30}),Object.defineProperty(this,qi,{writable:!0,value:60}),Object.defineProperty(this,Bi,{writable:!0,value:0}),Object.defineProperty(this,Ki,{writable:!0,value:0}),Object.defineProperty(this,$i,{writable:!0,value:{}}),Object.defineProperty(this,zi,{writable:!0,value:!1}),Object.defineProperty(this,Yi,{writable:!0,value:[]}),Ui(this,$i)[$i]=this.k5a.pageData.getDefaultData(),Ui(this,$i)[$i].uid=this.k5a.user.getId(),Ui(this,Bi)[Bi]=Ui(this,Wi)[Wi](),this.addHook("activity",function(e){Ui(this,Bi)[Bi]=Ui(this,Wi)[Wi](),this.start()}.bind(this)),this.addHook("hidden",function(e){Ui(this,Ji)[Ji]()}.bind(this),!0),this.addHook("active",function(e){Ui(this,Bi)[Bi]=Ui(this,Wi)[Wi](),this.checkActivity()}.bind(this),!0)}start(){!1===Ui(this,zi)[zi]&&(Ui(this,zi)[zi]=setInterval(function(){this.checkActivity()}.bind(this),1e3*Ui(this,Hi)[Hi]))}checkActivity(){var e=Ui(this,Wi)[Wi]();if(!(0!==Ui(this,Ki)[Ki]&&e-Ui(this,Ki)[Ki]<Ui(this,Hi)[Hi])){for(var t=!1,i=[],s=0;s<Ui(this,Yi)[Yi].length;s++)try{var a=Ui(this,Yi)[Yi][s]();if(!1!==a&&(t=!0,Ui(this,Bi)[Bi]=Ui(this,Wi)[Wi](),"object"==typeof a&&a.length>0))for(s=0;s<a.length;s++){var r=Ui(this,$i)[$i];Object.keys(a[s]).forEach((e=>{r[e]=a[s][e]})),i.push(r)}}catch(e){console.error("Could not call callback: "+e.toString())}if(!t&&e-Ui(this,Bi)[Bi]<=Ui(this,qi)[qi]&&!1!==Ui(this,zi)[zi]&&(t=!0),t){for(void 0!==this.k5a.cfg.activeUsers&&1==this.k5a.cfg.activeUsers&&i.push(Ui(this,$i)[$i]),s=0;s<i.length;s++)this.k5a.logger.fireNow("activity",i[s],"js");Ui(this,Ki)[Ki]=e}else this.k5a.listener.fireHook("hidden"),Ui(this,Ji)[Ji]()}}addActivity(e){Ui(this,Yi)[Yi].push(e)}}function Qi(){clearInterval(Ui(this,zi)[zi]),Ui(this,zi)[zi]=!1}function Zi(){return parseInt((new Date).getTime()/1e3)}function Xi(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var es=0;function ts(e){return"__private_"+es+++"_"+e}var is=ts("length"),ss=ts("data"),as=ts("ttl"),rs=ts("defaultSessionTTL"),ns=ts("wasNewSession"),os=ts("name"),ls=ts("store"),hs=ts("cannotStore"),us=ts("UUID");class cs{constructor(e,t="u",i=16){Object.defineProperty(this,us,{value:ps}),Object.defineProperty(this,hs,{value:ds}),Object.defineProperty(this,is,{writable:!0,value:16}),Object.defineProperty(this,ss,{writable:!0,value:{}}),Object.defineProperty(this,as,{writable:!0,value:9e4}),Object.defineProperty(this,rs,{writable:!0,value:1800}),Object.defineProperty(this,ns,{writable:!0,value:!1}),this.k5a=null,Object.defineProperty(this,os,{writable:!0,value:"u"}),Object.defineProperty(this,ls,{writable:!0,value:null}),this.k5a=e,Xi(this,is)[is]=i,Xi(this,os)[os]=t,e.consent&&this.k5a.storage.canStore()?(Xi(this,ss)[ss]=this.k5a.storage.getKey(t),null!==Xi(this,ss)[ss]?(Xi(this,ns)[ns]=Xi(this,ss)[ss].ts+Xi(this,rs)[rs]<parseInt((new Date).getTime()/1e3),Xi(this,ss)[ss].ts=parseInt((new Date).getTime()/1e3)):(Xi(this,ns)[ns]=!0,Xi(this,ss)[ss]={uid:Xi(this,us)[us](),ts:parseInt((new Date).getTime()/1e3)}),this.k5a.storage.setKey(Xi(this,os)[os],Xi(this,ss)[ss],Xi(this,as)[as])):Xi(this,hs)[hs]()}setId(e=""){return!(!this.k5a.consent||null===e.match(/^[a-zA-Z0-9\-\_\.]{4,128}$/)||(Xi(this,ss)[ss].uid=e,Xi(this,ss)[ss].ts=parseInt((new Date).getTime()/1e3),this.k5a.storage.setKey(Xi(this,os)[os],Xi(this,ss)[ss],Xi(this,as)[as]),0))}getId(){return Xi(this,ss)[ss].uid}getLastSeen(){return Xi(this,ss)[ss].ts}isNewSession(){return Xi(this,ns)[ns]}}function ds(){this.k5a.storage.delete(),Xi(this,ss)[ss].uid="_",Xi(this,ns)[ns]=!1}function ps(){for(var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=e.length,i=[],s=0;s<Xi(this,is)[is];s++)i[s]=e[0|Math.random()*t];return i.join("")}function fs(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var gs=0;function vs(e){return"__private_"+gs+++"_"+e}var bs=vs("evtTypeMap"),ys=vs("storage"),ms=vs("ttlLimit"),ks=vs("storageFormatVersion"),ws=vs("cfg"),Os=vs("cleanUp"),Ps=vs("getStorageData"),Ds=vs("getTSFromRelative"),js=vs("tsIsExpired"),Ss=vs("getBaseTimeStamp"),_s=vs("doUrl"),Ts=vs("setupConfig"),As=vs("hashIt");class Es{constructor(e,t,i={}){Object.defineProperty(this,As,{value:Us}),Object.defineProperty(this,Ts,{value:Fs}),Object.defineProperty(this,_s,{value:Ns}),Object.defineProperty(this,Ss,{value:Is}),Object.defineProperty(this,js,{value:Ls}),Object.defineProperty(this,Ds,{value:xs}),Object.defineProperty(this,Ps,{value:Ms}),Object.defineProperty(this,Os,{value:Cs}),Object.defineProperty(this,bs,{writable:!0,value:{visit:"v",seen:"s",when:"_"}}),Object.defineProperty(this,ys,{writable:!0,value:null}),this.profiler=null,Object.defineProperty(this,ms,{writable:!0,value:void 0}),Object.defineProperty(this,ks,{writable:!0,value:1}),Object.defineProperty(this,ws,{writable:!0,value:{track:{visit:["url"],seen:["url"]}}}),this.profiler=e,this._speaker=this.profiler._speaker.extendScope("vokaya"),fs(this,Ts)[Ts](i),fs(this,ys)[ys]=t,this._speaker.say(" - "+Es.moduleName+" init - Current id: "+this.profiler.k5a.requestId+" "+location.href),fs(this,ys)[ys].canStore()&&(fs(this,ms)[ms]=parseInt((new Date).getTime()/1e3-fs(this,ws)[ws].ttl),fs(this,Os)[Os](),this.init())}init(){this._speaker.say("Vokaya is ready!"),this._speaker.say("Vokaya age is "+this.getAge()+" hour(s)")}deleteAll(){return fs(this,ys)[ys].delete()}_runTrackOn(e,t){var i,s;if(this._speaker.say("_runTrackOn: "+e+" "+(null==(i=fs(this,ws)[ws])?void 0:i.track[e])),null!=(s=fs(this,ws)[ws])&&s.track[e]){Array.isArray(t)||(t=[t]);const i=fs(this,bs)[bs][e];let s=fs(this,Ps)[Ps]();for(let h=0;h<t.length;h++)for(const u of null==(a=fs(this,ws)[ws])?void 0:a.track[e]){var a,r;if(void 0!==(null==(r=t[h])?void 0:r[u])&&""!==t[h][u]){const e=Array.isArray(t[h][u])?t[h][u]:[t[h][u]];let a=this.profiler.k5a.pageData.getFieldShortName(u);a||(a=u);for(let t=0;t<e.length;t++){var n,o,l;const r=fs(this,As)[As]("url"===u?fs(this,_s)[_s](e[t]):e[t]);void 0===(null==s?void 0:s[a])&&(s[a]={}),void 0===(null==(n=s[a])?void 0:n[r])&&(s[a][r]={[i]:0}),void 0===(null==(o=s[a][r])?void 0:o[i])&&(s[a][r][i]=0),s[a][r][i]++,null!=(l=s[a][r])&&l._&&s[a][r]._.length>0?(s[a][r]._.push(this.getTS()),s[a][r]._.length>2&&s[a][r]._.shift()):s[a][r]._=[this.getTS()]}}}fs(this,ys)[ys].set(s)}}get(e,t,i){var s;if("*"==e||null!=(s=fs(this,ws)[ws])&&s.track[e]){let s=fs(this,ys)[ys].get(),o=this.profiler.k5a.pageData.getFieldShortName(t);o||(o=t);const l=fs(this,As)[As]("url"===t?fs(this,_s)[_s](i):i);var a;if(void 0!==(null==s?void 0:s[o])&&void 0!==(null==(a=s[o])?void 0:a[l])){if("*"===e){let e={};for(const[t,i]of Object.entries(fs(this,bs)[bs])){var r;void 0!==(null==(r=s[o][l])?void 0:r[i])?e[t]="_"==i?s[o][l][i][0]:s[o][l][i]:e[t]=null}return e}{var n;const t=fs(this,bs)[bs][e];if(void 0!==(null==(n=s[o][l])?void 0:n[t]))return"_"==t?{[e]:s[o][l][t][0]}:{[e]:s[o][l][t]}}}return null}return this.profiler.warn("Unknown eventType: "+e),null}getAll(e,t){var i;if("*"==e||null!=(i=fs(this,ws)[ws])&&i.track[e]){let i=fs(this,Ps)[Ps](),s={};for(let a=0;a<t.length;a++){let r=this.profiler.k5a.pageData.getFieldShortName(t[a]);if(r||(r=t[a]),void 0!==(null==i?void 0:i[r]))if("*"===e)s[t[a]]=i[r];else{const n=fs(this,bs)[bs][e];s[t[a]]={};for(const[e,o]of Object.entries(i[r]))null!=o&&o[n]&&(s[t[a]][e]={[n]:o[n]})}}return s}return null}add(e,t){return this._runTrackOn(e,t)}getTrackFieldForEventType(e){var t;if(null!=(t=fs(this,ws)[ws])&&t.track[e])return fs(this,ws)[ws].track[e]}addKey(e,t){if("_t"==e)throw new Exception('key "_t" is reserved');let i=fs(this,Ps)[Ps]();i["#"+e]=[t,this.getTS()],fs(this,ys)[ys].set(i)}getKey(e){let t=fs(this,Ps)[Ps]();if(null!=t&&t["#"+e])return null==t?void 0:t["#"+e][0]}getFieldCount(e){let t=this.profiler.k5a.pageData.getFieldShortName(e);t||(t=e);let i=fs(this,Ps)[Ps]();return null!=i&&i[t]?(console.log("Has data!"),Object.keys(i[t]).length):null}getTS(e=null){return null==e&&(e=new Date),parseInt(e.getTime()/1e3)-fs(this,Ss)[Ss]()}isExpired(e,t){const i=fs(this,Ds)[Ds](e);return(new Date).getTime()/1e3-i>=t}seenBeforeToday(e){const t=fs(this,Ds)[Ds](e),i=e=>{const t=e.getMonth()+1,i=e.getDate();return parseInt(e.getFullYear()+""+(t<10?"0"+t:t)+(i<10?"0"+i:i))};let s=new Date;return s.setTime(1e3*t),!(i(s)<i(new Date))}getDateFromTS(e){const t=fs(this,Ds)[Ds](e),i=new Date;return i.setTime(1e3*t),i}getAge(){let e=fs(this,Ss)[Ss]();return parseInt((parseInt((new Date).getTime()/1e3)-e)/3600)}}function Cs(){this._speaker.say("Cleaning up storage");let e=fs(this,Ps)[Ps]();var t;if(this._speaker.canLog()&&this._speaker.say(JSON.stringify(e)),e)if(void 0===(null==(t=e)?void 0:t["#"])||e["#"]!==fs(this,ks)[ks])e={"#":fs(this,ks)[ks]};else for(const[t,i]of Object.entries(e))if("#"==t[0]&&null!=i&&i[1])fs(this,js)[js](i[1])&&(this._speaker.say("Deleting custom key: "+t),delete e[t]);else for(const[e,s]of Object.entries(i))if(null!=s&&s._){const a=s._.length>1?s._[1]:s._[0];fs(this,js)[js](a)&&(this._speaker.say("Deleting key: "+t+"."+e),delete i[e])}fs(this,ys)[ys].set(e),this._speaker.say("Cleaning up storage - done")}function Ms(){let e=fs(this,ys)[ys].get();return fs(this,Ss)[Ss](),e}function xs(e){return fs(this,Ss)[Ss]()+e}function Ls(e){return e+fs(this,Ss)[Ss]()<=fs(this,ms)[ms]}function Is(){let e=fs(this,ys)[ys].get();return null==(null==e?void 0:e._)&&(e._=parseInt((new Date).getTime()/1e3),fs(this,ys)[ys].set(e)),e._}function Ns(e){return new xe(e,this.profiler.k5a).k5a}function Fs(e){for(const t of Object.keys(fs(this,ws)[ws]))void 0!==e[t]&&(fs(this,ws)[ws][t]=e[t])}function Us(e){if(!fs(this,ws)[ws].useHash)return e;let t=0,i=0,s=e.length;for(;i<s;)t=(t<<5)-t+e.charCodeAt(i++)|0;return t+2147483647+1}function Rs(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Es.moduleName="vokaya";var Vs=0;function Hs(e){return"__private_"+Vs+++"_"+e}var qs=Hs("ektins"),Bs=Hs("autoTrackVisitDone"),Ks=Hs("hasConsent"),$s=Hs("cfg"),zs=Hs("setupConfig"),Ys=Hs("setupEktins"),Js=Hs("runEktinEvent");class Ws{constructor(e,t={}){Object.defineProperty(this,Js,{value:Zs}),Object.defineProperty(this,Ys,{value:Qs}),Object.defineProperty(this,zs,{value:Gs}),this.k5a=null,this._speaker=null,Object.defineProperty(this,qs,{writable:!0,value:[]}),this.vokaya=null,Object.defineProperty(this,Bs,{writable:!0,value:!1}),Object.defineProperty(this,Ks,{writable:!0,value:!0}),Object.defineProperty(this,$s,{writable:!0,value:{storageName:"_k5a_v",storageType:"localstorage",useHash:!1,ttl:604800}}),this.e=void 0,this.k5a=e,this._speaker=this.k5a.speaker.newScope("profiler"),this._speaker.say("I'm loading, with this config:"),Rs(this,zs)[zs](t),this._speaker.dump(Rs(this,$s)[$s]);let i=new ht(this.k5a,Rs(this,$s)[$s].storageName,Rs(this,$s)[$s].storageType);Rs(this,Ks)[Ks]=i.canStore(),this.k5a.consent&&Rs(this,Ks)[Ks]?(this.vokaya=new Es(this,i,Rs(this,$s)[$s]),t.ektins&&Rs(this,Ys)[Ys](t.ektins),null!=t&&t.autoTrackVisit&&this.k5a.listener.addHook("pageView",(e=>{if(!Rs(this,Bs)[Bs]){Rs(this,Bs)[Bs]=!0;let e=this.k5a.pageData.getData(this.vokaya.getTrackFieldForEventType("visit"));this.addVisit(e)}}))):(i.canStore()&&new Es(this,i,t).deleteAll(),Rs(this,Ks)[Ks]=!1,this._speaker.say("No consent is given, so will not profile."))}init(){if(Rs(this,Ks)[Ks]){null!==this.vokaya&&this.vokaya.init();for(const e of Object.keys(Rs(this,qs)[qs]))Rs(this,qs)[qs][e].init&&Rs(this,qs)[qs][e].init()}}addVisit(e){return!!Rs(this,Ks)[Ks]&&(Rs(this,Js)[Js]("visit",e),this.vokaya.add("visit",e))}getStats(e,t){return Rs(this,Ks)[Ks]?this.vokaya.get("*",e,t):null}getAllStats(e){return Rs(this,Ks)[Ks]?this.vokaya.getAll("*",e):null}getVisits(e,t){return Rs(this,Ks)[Ks]?this.vokaya.get("visit",e,t):null}getSeens(e,t){return Rs(this,Ks)[Ks]?this.vokaya.get("seen",e,t):null}onSeen(e){if(!Rs(this,Ks)[Ks])return null;Rs(this,Js)[Js]("seen",e),this.vokaya.add("seen",e)}canProfile(){return Rs(this,Ks)[Ks]}getData(e){return!!Rs(this,Ks)[Ks]&&this.vokaya.getData(e)}getEktin(e){var t;return null==(t=Rs(this,qs)[qs])?void 0:t[e]}}function Gs(e){for(const t of Object.keys(Rs(this,$s)[$s]))void 0!==e[t]&&(Rs(this,$s)[$s][t]=e[t])}function Qs(e){for(let t=0;t<e.length;t++)try{this._speaker.say("Setting up ektin: "+e[t].ektin.moduleName),Rs(this,qs)[qs][e[t].ektin.moduleName]=new e[t].ektin(this,e[t].ektin.moduleName,e[t].cfg||{})}catch(i){console.error("Could not setup ektin: "+e[t].ektin+" "+i.toString())}}function Zs(e,t){for(const i of Object.keys(Rs(this,qs)[qs]))try{Rs(this,qs)[qs][i].on(e,t)}catch(t){console.error("Could not run event: "+e+" on ektin: "+i),console.error(t.toString())}}class Xs{constructor(e,t,i={}){this._profiler=null,this._cfg={},this.pageDataMap={url:"u",section:"s",tag:"t"},this._profiler=e,this._cfg=i,this._speaker=this._profiler._speaker.extendScope("ektin:"+t),this._speaker.say(" - construct - Current id: "+this._profiler.k5a.requestId+" "+location.href)}init(){}on(e,t){switch(e.toLowerCase()){case"visit":return this.onVisit(t);case"click":return this.onClick(t);case"seen":return this.onSeen(t);case"exit":return this.onExit(t)}throw new Error("Unknown on Event given: "+e)}onVisit(e){return!0}onSeen(e){return!0}onClick(e){return!0}onExit(e){return!0}getStats(){return!1}}function ea(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Xs.moduleName="ektin";var ta=0;function ia(e){return"__private_"+ta+++"_"+e}var sa=ia("sessionTTL"),aa=ia("stats"),ra=ia("initSession"),na=ia("updateSession");class oa extends Xs{constructor(...e){super(...e),Object.defineProperty(this,na,{value:ha}),Object.defineProperty(this,ra,{value:la}),Object.defineProperty(this,sa,{writable:!0,value:1800}),Object.defineProperty(this,aa,{writable:!0,value:{newToday:!1,newSession:!1,sessionCount:0,evtCount:0}})}onVisit(e){this._speaker.say(oa.moduleName+": I got onSeen event for url:"+e.url);let t=this._profiler.vokaya.getKey("sd");void 0===t?(t=ea(this,ra)[ra](),this._profiler.vokaya.addKey("sd",t)):this._profiler.vokaya.addKey("sd",ea(this,na)[na](t))}getStats(){return ea(this,aa)[aa]}}function la(){let e={i:this._profiler.vokaya.getTS(),l:this._profiler.vokaya.getTS(),c:1,e:1};return ea(this,aa)[aa].newToday=!0,ea(this,aa)[aa].newSession=!0,ea(this,aa)[aa].sessionCount=e.c,ea(this,aa)[aa].evtCount=e.e,e}function ha(e){if(this._speaker.canLog()){const t=this._profiler.vokaya.getDateFromTS(e.i),i=this._profiler.vokaya.getDateFromTS(e.l),s=parseInt(((new Date).getTime()-i.getTime())/1e3),a=parseInt((i.getTime()-t.getTime())/1e3);this._speaker.log("Session start: "+t.toString()),this._speaker.log("Session last activity: "+s+"s, length: "+a+"s - date: "+i.toString())}return!1===this._profiler.vokaya.seenBeforeToday(e.l)?(this._speaker.log("New session initied for today"),e=ea(this,ra)[ra](),ea(this,aa)[aa].newToday=!0,ea(this,aa)[aa].newSession=!0):(this._profiler.vokaya.isExpired(e.l,ea(this,sa)[sa])&&(ea(this,aa)[aa].newSession=!0,e.c++,e.e=0,this._speaker.log("New session initied, session count: "+e.sc)),e.l=this._profiler.vokaya.getTS(),e.e++),ea(this,aa)[aa].sessionCount=e.c,ea(this,aa)[aa].evtCount=e.e,e}function ua(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}oa.moduleName="session";var ca=0;function da(e){return"__private_"+ca+++"_"+e}var pa=da("modules"),fa=da("insId"),ga=da("initializeModules"),va=da("setupApiMethods"),ba=da("setupCustomCfg");function ya(){for(var e=0;e<this.cfg.modules.length;e++){var t=this.cfg.modules[e].moduleName;this.speaker.say('Loading module "'+t+'"');try{var i;ua(this,pa)[pa][t]=new this.cfg.modules[e](this,null!=(i=this.cfg.moduleCfg[t])?i:{}),"function"==typeof ua(this,pa)[pa][t].apiMethods&&ua(this,va)[va](ua(this,pa)[pa][t].apiMethods())}catch(t){this.speaker.say('Could not load log module: "'+this.cfg.modules[e]+'", reason: '+t.toString())}}}function ma(e){Object.keys(e).forEach((t=>{this[t]=e[t]}))}function ka(){let e=["pageview","click","engagement","video"],t=this.pageData.getField("domain");if(void 0!==this.cfg){var i;let t=!1;if(void 0===this.cfg.disableRefresh&&(this.cfg.disableRefresh=!0),0!==this.cfg.disableRefresh&&!1!==this.cfg.disableRefresh){let e=["refresh","autoRefresh","noLog"];"object"==typeof this.cfg.disableRefresh&&this.cfg.disableRefresh.length>0&&(e=this.cfg.disableRefresh);for(const i of e)if(this.pageData.getMetaField("k5a:"+i,"boolean")){t=!0;break}t||null===location.href.match(new RegExp("[#?&](?:"+e.join("|")+")","i"))||(this.speaker.say("Disabled via url parameter"),t=!0)}null!=(i=this.cfg)&&i.disableBots&&!t&&Ei.isBot(window,this.cfg.disableBots.length>0?this.cfg.disableBots:void 0)&&(t=!0,this.speaker.say("Disabled via isBot check")),t&&e.forEach((e=>{void 0===this.cfg.moduleCfg[e]&&(this.cfg.moduleCfg[e]={}),this.cfg.moduleCfg[e].autoDisabled=!0,this.speaker.say("Module disabled via option: "+e)}))}"undefined"!=typeof k5aMeta&&Object.keys(k5aMeta).forEach((t=>{if(!0===k5aMeta[t]||1===k5aMeta[t]||"1"===k5aMeta[t]||"yes"===k5aMeta[t]){var i=t.substr(7).toLowerCase();e.includes(i)&&(this.speaker.say("Disabling "+i+" auto logging"),void 0===this.cfg.moduleCfg[i]?this.cfg.moduleCfg[i]={autoDisabled:!0}:this.cfg.moduleCfg[i].autoDisabled=!0)}})),e.forEach((e=>{void 0!==this.cfg.moduleCfg[e]&&void 0!==this.cfg.moduleCfg[e].disableFor&&this.cfg.moduleCfg[e].disableFor.includes(t)&&(this.speaker.say("Disabling "+e+' auto logging, "'+t+'" is banned in disableFor'),this.cfg.moduleCfg[e].autoDisabled=!0)}))}var wa=0;function Oa(e){return"__private_"+wa+++"_"+e}var Pa=Oa("getNavigationObj");class Da{constructor(){throw new Error("This class is static class!")}static get responseCode(){let e=function(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}(Da,Pa)[Pa]();if(0!=e)return parseInt(e.responseStatus)}}function ja(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(Da,Pa,{value:function(){var e;return!(null==(e=window)||!e.performance)&&window.performance.getEntries()[0]}});var Sa=0;function _a(e){return"__private_"+Sa+++"_"+e}var Ta=_a("logData"),Aa=_a("spaHistory"),Ea=_a("setupData"),Ca=_a("apiPageview");class Ma extends Fi{constructor(e){super(e),Object.defineProperty(this,Ca,{value:La}),Object.defineProperty(this,Ea,{value:xa}),Object.defineProperty(this,Ta,{writable:!0,value:{}}),Object.defineProperty(this,Aa,{writable:!0,value:{}}),this.isAutoEnabled("pageview")&&this.addHook("pageView",function(e){var t,i;setTimeout(function(){ja(this,Ea)[Ea](),e.persisted&&(ja(this,Ta)[Ta].ns=0),this.k5a.logger.fireNow("pageView",ja(this,Ta)[Ta])}.bind(this),null!=(t=this.k5a)&&null!=(t=t.cfg)&&null!=(t=t.moduleCfg)&&null!=(t=t.pageview)&&t.delayTime&&(null==(i=this.k5a)||null==(i=i.cfg)||null==(i=i.moduleCfg)||null==(i=i.pageview)?void 0:i.delayTime)>0?1e3*this.k5a.cfg.moduleCfg.pageview.delayTime:1)}.bind(this)),(this.isAutoEnabled("pageview")||this.k5a.cfg.pageData.SPA.forcedSPA)&&this.k5a.cfg.pageData.SPA&&this.addHook("spa",function(e){setTimeout(function(){this.k5a.speaker.say("I got a SPA pageview","pageview"),ja(this,Ea)[Ea](),ja(this,Ta)[Ta].ns=0,this.k5a.cfg.pageData.SPA.onlyOnce&&void 0!==ja(this,Aa)[Aa][ja(this,Ta)[Ta].u]?this.k5a.speaker.say("URL has already been recorded with pageview","pageview"):(this.k5a.logger.fireNow("pageView",ja(this,Ta)[Ta],"spa"),this.k5a.cfg.pageData.SPA.onlyOnce&&(ja(this,Aa)[Aa][ja(this,Ta)[Ta].u]=1))}.bind(this),this.k5a.cfg.pageData.SPA.viewTime&&this.k5a.cfg.pageData.SPA.viewTime>0?1e3*this.k5a.cfg.pageData.SPA.viewTime:1)}.bind(this),!0)}apiMethods(){return{pageview:function(e,t=!0){return ja(this,Ca)[Ca](e,t)}.bind(this)}}}function xa(){var e;if(null!=(e=this.k5a.cfg)&&e.track404)try{404==Da.responseCode&&(this.k5a.pageData.setField("type","404"),this.k5a.speaker.say("Detected 404 reponse, changing pagetype","pageview"))}catch(e){}ja(this,Ta)[Ta]=this.k5a.pageData.getDefaultData(),ja(this,Ta)[Ta].uid=this.k5a.user.getId(),ja(this,Ta)[Ta].ns=this.k5a.user.isNewSession()?1:0;let t=this.k5a.pageData.getField("nopageview");t&&"1"==t&&(ja(this,Ta)[Ta].nopv=1)}function La(e={},t=!0){var i={};if(e=this.keysToLowerCase(e),t){var s=this.k5a.pageData.getDefaultFields();if(void 0!==e.url&&!1===this.k5a.pageData.isUrl(e.url))throw new Error('Url is not valid: "'+e.url+'"');Object.values(s).forEach((t=>{void 0!==e[t]&&""!==e[t]&&this.k5a.pageData.setField(t,e[t])})),(i=this.k5a.pageData.getDefaultData()).uid=this.k5a.user.getId(),i.ns=this.k5a.user.isNewSession()?1:0,i.nopv=void 0!==e.nopv&&1==e.nopv?1:0}else{this.k5a.pageData.reRead();var a=this.k5a.pageData.getDefaultFields(),r=this.k5a.pageData.getField("channel");i={},Object.values(a).forEach((t=>{void 0!==e[t]&&""!==e[t]?this.k5a.pageData.setField(t,e[t]):this.k5a.pageData.delField(t)})),i=this.k5a.pageData.getDefaultData();var n={uid:"uid",newSession:"ns"};Object.keys(n).forEach((t=>{void 0!==e[t]&&""!==e[t]?i[n[t]]=e[t]:i[n[t]]="ns"==t?0:""})),""===i.c&&(i.c=r),i.nopv=void 0!==e.nopv&&1==e.nopv?1:0}return this.k5a.pageData.reRead(),this.k5a.logger.fireNow("pageView",i,"jsapi"),!0}function Ia(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Ma.moduleName="pageview";var Na=0;function Fa(e){return"__private_"+Na+++"_"+e}var Ua=Fa("slotCfg"),Ra=Fa("getSlot"),Va=Fa("get"),Ha=Fa("getData"),qa=Fa("getSize"),Ba=Fa("getUrl"),Ka=Fa("autoSize"),$a=Fa("getSlotMains"),za=Fa("autoPos"),Ya=Fa("getElementPosition"),Ja=Fa("searchDataAtrs"),Wa=Fa("getPos");class Ga{constructor(e,t=null){Object.defineProperty(this,Wa,{value:or}),Object.defineProperty(this,Ja,{value:nr}),Object.defineProperty(this,Ya,{value:rr}),Object.defineProperty(this,za,{value:ar}),Object.defineProperty(this,$a,{value:sr}),Object.defineProperty(this,Ka,{value:ir}),Object.defineProperty(this,Ba,{value:tr}),Object.defineProperty(this,qa,{value:er}),Object.defineProperty(this,Ha,{value:Xa}),Object.defineProperty(this,Va,{value:Za}),Object.defineProperty(this,Ra,{value:Qa}),Object.defineProperty(this,Ua,{writable:!0,value:{}}),this._k5a=null,this._k5a=e,Ia(this,Ua)[Ua]=t,null==Ia(this,Ua)[Ua]&&(Ia(this,Ua)[Ua]={}),void 0===Ia(this,Ua)[Ua].slotUrl&&(Ia(this,Ua)[Ua].slotUrl={el:["a"]}),void 0===Ia(this,Ua)[Ua].dataUrlAttributes&&(Ia(this,Ua)[Ua].dataUrlAttributes=[]),-1==Ia(this,Ua)[Ua].dataUrlAttributes.indexOf("data-k5a-url")&&(Ia(this,Ua)[Ua].dataUrlAttributes=["data-k5a-url",...Ia(this,Ua)[Ua].dataUrlAttributes])}analyze(e){var t,i=Ia(this,Ra)[Ra](e);let s=!1;s=!1!==i&&i.querySelectorAll("[data-k5a-pos]").length<1?Ia(this,za)[za](i):{position:Ia(this,Wa)[Wa](e),row:0,pos:0};try{var a=Ia(this,Ja)[Ja](!1!==i?i:e)}catch(e){console.debug(e.toString())}var r={url:Ia(this,Ba)[Ba](e),size:0!=i?Ia(this,qa)[qa](i):"",image:void 0!==a.image&&""!==a.image?a.image:0!=i?Ia(this,Va)[Va](i,"image"):"",title:void 0!==a.title&&""!==a.title?a.title:0!=i?Ia(this,Va)[Va](i,"title"):"",row:s?s.row:0,pos:s?s.pos:0,position:s?s.position:Ia(this,Wa)[Wa](e),section:void 0!==a.section&&""!==a.section?a.section:"",type:void 0!==a.type&&""!==a.type?a.type:"",paid:void 0!==a.paid&&""!==a.paid?a.paid:""};if(!1!==i&&null!=(t=this._k5a.cfg)&&null!=(t=t.slotData)&&t.enc&&"function"==typeof this._k5a.cfg.slotData.enc)try{let e=this._k5a.cfg.slotData.enc(i);null!=e&&0!=e&&(r.data=e)}catch(e){console.error("could not run slotData logic: "+e.toString())}return""!==r.url&&r}}function Qa(e){if(e.tagName&&"HTML"==e.tagName)return!1;if(!Ia(this,Ua)[Ua].slot)return!1;for(var t=0;e&&t++<50;){if(Ia(this,Ua)[Ua].slot.cl)for(var i=0;i<Ia(this,Ua)[Ua].slot.cl.length;i++)if(e.classList.contains(Ia(this,Ua)[Ua].slot.cl[i]))return e.setAttribute("data-k5a-isSlot",!0),e;if(Ia(this,Ua)[Ua].slot.el)for(i=0;i<Ia(this,Ua)[Ua].slot.el.length;i++)if(e.tagName.toLowerCase()==Ia(this,Ua)[Ua].slot.el[i].toLowerCase())return e.setAttribute("data-k5a-isSlot",!0),e;if(!e.parentNode||!e.parentNode.hasAttribute)return!1;e=e.parentNode}return!1}function Za(e,t){if(void 0===Ia(this,Ua)[Ua][t])return"";if(Ia(this,Ua)[Ua][t].custom&&"function"==typeof Ia(this,Ua)[Ua][t].custom)try{return Ia(this,Ua)[Ua][t].custom(e,t)}catch(e){console.debug(e)}if(Ia(this,Ua)[Ua][t].cl)for(var i=0;i<Ia(this,Ua)[Ua][t].cl.length;i++)if((s=e.getElementsByClassName(Ia(this,Ua)[Ua][t].cl[i]))&&s.length>0)return Ia(this,Ha)[Ha](t,s[0]);if(Ia(this,Ua)[Ua][t].el)for(i=0;i<Ia(this,Ua)[Ua][t].el.length;i++)if((s=e.getElementsByTagName(Ia(this,Ua)[Ua][t].el[i]))&&s.length>0)return Ia(this,Ha)[Ha](t,s[0]);if(Ia(this,Ua)[Ua][t].qs)for(i=0;i<Ia(this,Ua)[Ua][t].qs.length;i++){var s;if((s=e.querySelectorAll(Ia(this,Ua)[Ua][t].qs[i]))&&s.length>0)return Ia(this,Ha)[Ha](t,s[0])}return""}function Xa(e,t){let i=!1;switch(e){case"title":i=t.textContent;break;case"image":i=t.src}return void 0!==i&&!1!==i&&""!==i?i.trim():""}function er(e){if(void 0!==Ia(this,Ua)[Ua].slot.ss&&"auto"==Ia(this,Ua)[Ua].slot.ss)return Ia(this,Ka)[Ka](e)}function tr(e){let t=0;for(;e.tagName&&"A"!=e.tagName&&t++<50;){for(let t=0;t<Ia(this,Ua)[Ua].dataUrlAttributes.length;t++)if(e.hasAttribute&&e.hasAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t])&&""!=e.getAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t]))return e.getAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t]);e=e.parentNode}if(e&&e.tagName&&"A"==e.tagName){for(let t=0;t<Ia(this,Ua)[Ua].dataUrlAttributes.length;t++)if(e.hasAttribute&&e.hasAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t])&&""!=e.getAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t]))return e.getAttribute(Ia(this,Ua)[Ua].dataUrlAttributes[t]);return e.href}return""}function ir(e){let t=e.clientWidth,i=e.parentNode.clientWidth;if(t>0&&i>0){let e=t/i;return e<=.33?"small":e<=.5?"medium":e<=.75?"large":"big"}}function sr(e){var t=!1,i=[];if(void 0!==Ia(this,Ua)[Ua].mains){for(var s=0;"BODY"!==e.tagName&&s++<50;){if(e.hasAttribute&&e.hasAttribute("data-k5a-topname")&&""!=e.getAttribute("data-k5a-topname"))return t=e.getAttribute("data-k5a-topname"),i.push(e),{topName:t,containers:i};for(var a of Object.keys(Ia(this,Ua)[Ua].mains)){if(e.tagName&&Ia(this,Ua)[Ua].mains[a].includes(e.tagName.toLowerCase())){t=a,i.push(e);break}if(e.hasAttribute&&e.hasAttribute("id")&&Ia(this,Ua)[Ua].mains[a].includes("#"+e.id)){t=a;break}if(e.hasAttribute&&e.hasAttribute("class")){var r=e.className.split(" ");for(var n of r)if(Ia(this,Ua)[Ua].mains[a].includes("."+n)){t=a,i.push(e);break}}}e&&e.parentNode&&(e=e.parentNode)}if(!1!==t)for(var o of Ia(this,Ua)[Ua].mains[t])if(o.indexOf("#")>-1){var l=document.getElementById(o.substr(1));null!=l&&i.push(l)}else{var h=document.getElementsByClassName(o);i.push(...h)}}return!1===t&&(t="",i.push(document.body)),{topName:t,containers:i}}function ar(e){let{topName:t,containers:i}=Ia(this,$a)[$a](e),s=[];for(var a=0;a<i.length;a++)if(void 0!==Ia(this,Ua)[Ua].slot){let e=[];void 0!==Ia(this,Ua)[Ua].slot.cl&&e.push(...Ia(this,Ua)[Ua].slot.cl.map((function(e){return"."+e}))),void 0!==Ia(this,Ua)[Ua].slot.el&&e.push(...Ia(this,Ua)[Ua].slot.el.map((function(e){return e})));var r=i[a].querySelectorAll(e.join(","));s.push(...r)}var n=0,o=0,l=0,h=0,u=0;for(a=0;a<s.length;a++){var c=Ia(this,Ya)[Ya](s[a]);if((0==l||l+h<c.top)&&(l=parseInt(c.top),h=s[a].offsetHeight,n++,o=u=0),l==c.top&&s[a].offsetHeight>h&&(h=s[a].offsetHeight),(0==u||u<c.left)&&(u=c.left,o++),s[a]==e)return{row:n,pos:o,position:(""!=t?t+"_":"")+Ia(this,Ua)[Ua].positionTemplate.replace("${row}",n).replace("${pos}",o)}}return!1}function rr(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}function nr(e){var t={};if(e&&!1===e.hasAttribute("data-k5a-isSlot")&&"A"!==e.tagName){let t=0;for(;++t<30&&null!==e&&"A"!==e.tagName;)e=e.parentNode}if(null===e)return t;var i={title:["data-k5a-title"],section:["data-k5a-section"],type:["data-k5a-type"],image:["data-k5a-image"],subsection:["data-k5a-subsection"],paid:["data-k5a-paid"]};if(Ia(this,Ua)[Ua]&&Ia(this,Ua)[Ua].metaDataAttributes)for(let e of Object.keys(i))void 0!==Ia(this,Ua)[Ua].metaDataAttributes[e]&&Ia(this,Ua)[Ua].metaDataAttributes[e].length>0&&(i[e]=Ia(this,Ua)[Ua].metaDataAttributes[e]);for(let a of Object.keys(i)){t[a]="";for(let r=0;r<i[a].length;r++){let n=e.querySelectorAll("["+i[a][r]+"]"),o=Array.from(n);if(o.push(e),o&&o.length>0)for(let e=0;e<o.length;e++)if(o[e].hasAttribute&&o[e].hasAttribute(i[a][r])){var s=o[e].getAttribute(i[a][r]);if(""!==s){t[a]=s.trim(),r=i[a].length+1;break}}}}return t}function or(e){var t=[],i=["data-k5a-pos"];Ia(this,Ua)[Ua].dataAtrs&&Ia(this,Ua)[Ua].dataAtrs.length>0&&i.push(...Ia(this,Ua)[Ua].dataAtrs);let{topName:s,containers:a}=Ia(this,$a)[$a](e);for(;e&&"BODY"!=e.tagName;){for(var r=!1,n=0;n<i.length&&!r;n++)e.hasAttribute&&e.hasAttribute(i[n])&&(t.push(e.getAttribute(i[n])),r=!0);if(!r&&Ia(this,Ua)[Ua].position){let i={id:"id",tagName:"el",class:"cl",atrMatch:"atrMatch"};for(var o of Object.keys(Ia(this,Ua)[Ua].position))for(var l of Object.keys(i))if(void 0!==Ia(this,Ua)[Ua].position[o][i[l]])if("atrMatch"==l)for(let s=0;s<e.attributes.length;s++)null!==(e.attributes[s].nodeName+'="'+e.attributes[s].nodeValue+'"').match("s*"+Ia(this,Ua)[Ua].position[o][i[l]].join("|")+"s*")&&(t.push(o),r=!0);else{var h="tagName"==l?e.tagName&&e.tagName.toLowerCase():e.getAttribute(l);"string"==typeof h&&""!==h&&null!==h.match("s*"+Ia(this,Ua)[Ua].position[o][i[l]].join("|")+"s*")&&(t.push(o),r=!0)}}if(!r&&Ia(this,Ua)[Ua].magicPositions)try{let i=new RegExp(Ia(this,Ua)[Ua].magicPositions).exec(e.className);i&&i.length>1&&""!==i[1]&&t.push(i[1])}catch(e){console.log(e.toString())}e=e.parentNode}return s&&t.push(s),t.reverse().join("_")}function lr(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var hr=0;function ur(e){return"__private_"+hr+++"_"+e}var cr=ur("initTime"),dr=ur("apiClick");class pr extends Fi{constructor(e,t={}){super(e),Object.defineProperty(this,dr,{value:fr}),Object.defineProperty(this,cr,{writable:!0,value:0}),this.supportAsync=!0,lr(this,cr)[cr]=(new Date).getTime(),this.isAutoEnabled("click")&&this.addHook("click",function(e){e&&e.button;try{var i=new Ga(this.k5a,t.slotInspector).analyze(e.srcElement)}catch(e){return void this.k5a.speaker.say(e.toString())}if(!1!==i&&new xe(i.url).isLink){try{var s=this.k5a.pageData.getDefaultData()}catch(e){console.log(e.toString())}new xe(s.url);let e=this.k5a.pageData.isTranslated();this.k5a.speaker.say("Page is translated: "+e),s.tu=i.url,s.cr=i.row,s.cp=i.pos,s.po=i.position,s.ps=i.size,s.tptl=e?"":i.title,s.tpsn=i.section,s.tptp=i.type,s.tpig=i.image,s.tpd=i.paid,null!=i&&i.data&&(s.sd=i.data),s.tun=(null==i?void 0:i.un)||"",s.tnw=(null==i?void 0:i.nw)||"",s.tod=(null==i?void 0:i.od)||"",s.ct=(((new Date).getTime()-lr(this,cr)[cr])/1e3).toFixed(1),this.k5a.logger.fireNow("click",s,"click","js"),lr(this,cr)[cr]=(new Date).getTime()}}.bind(this),!0)}apiMethods(){return{click:function(e,t=!0){return lr(this,dr)[dr](e,t)}.bind(this)}}}function fr(e,t=!0){var i=["url","channel","type","section","title","author","tag","cnttag","paid"],s={tourl:"tu",row:"cr",pos:"ps",position:"po",totitle:"tptl",tosection:"tpsn",totype:"tptp",totag:"tpct",tocnttag:"tpctg",toauthor:"tpar",topaid:"tpd"},a={};if(e=this.keysToLowerCase(e),t){if(this.k5a.pageData.reRead(),void 0!==e.url&&!1===this.k5a.pageData.isUrl(e.url))throw new Error('Url is not valid: "'+e.url+'"');Object.values(i).forEach((t=>{void 0!==e[t]&&""!==e[t]&&this.k5a.pageData.setField(t,e[t])})),a=this.k5a.pageData.getLogData(i),Object.keys(s).forEach((t=>{void 0!==e[t]&&""!==e[t]?a[s[t]]=e[t]:a[s[t]]=""}))}else a={},Object.values(i).forEach((t=>{void 0!==e[t]&&""!==e[t]?(this.k5a.pageData.setField(t,e[t]),a[t]=this.k5a.pageData.getField(t)):this.k5a.pageData.delField(t)})),Object.keys(s).forEach((t=>{void 0!==e[t]&&""!==e[t]?a[s[t]]=e[t]:a[s[t]]=""})),void 0!==a.c&&""!==a.c||(a.c=this.k5a.pageData.getField("channel"));return this.k5a.logger.fireNow("click",a,"jsapi"),!0}function gr(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}pr.moduleName="click";var vr=0;function br(e){return"__private_"+vr+++"_"+e}var yr=br("logModule"),mr=br("trackElements"),kr=br("iObserver"),wr=br("calc"),Or=br("calcVisibilty"),Pr=br("calcTimeDifference");class Dr{constructor(e){Object.defineProperty(this,Pr,{value:_r}),Object.defineProperty(this,Or,{value:Sr}),Object.defineProperty(this,wr,{value:jr}),Object.defineProperty(this,yr,{writable:!0,value:null}),Object.defineProperty(this,mr,{writable:!0,value:{}}),Object.defineProperty(this,kr,{writable:!0,value:null}),gr(this,yr)[yr]=e,gr(this,kr)[kr]=new IntersectionObserver(gr(this,wr)[wr].bind(this),{root:null,rootMargin:"0px",threshold:0}),gr(this,yr)[yr].addHook("scroll",function(e){gr(this,Or)[Or]()}.bind(this),!0)}stopAll(){for(var e of Object.keys(gr(this,mr)[mr]))for(var t=0;t<gr(this,mr)[mr][e].length;t++)gr(this,mr)[mr][e][t].initTime>0&&(gr(this,mr)[mr][e][t].visibleTime+=gr(this,Pr)[Pr](gr(this,mr)[mr][e][t].initTime),gr(this,mr)[mr][e][t].initTime=0,gr(this,mr)[mr][e][t].deadTime=(new Date).getTime())}startAll(){for(var e of Object.keys(gr(this,mr)[mr]))for(var t=0;t<gr(this,mr)[mr][e].length;t++)0==gr(this,mr)[mr][e][t].initTime&&(gr(this,mr)[mr][e][t].initTime=(new Date).getTime(),gr(this,mr)[mr][e][t].totalDeadTime+=gr(this,Pr)[Pr](gr(this,mr)[mr][e][t].deadTime),gr(this,mr)[mr][e][t].deadTime=0)}addTracker(e,t,i){void 0===gr(this,mr)[mr][e]&&(gr(this,mr)[mr][e]=[]);var s={trkId:e+"-"+gr(this,mr)[mr][e].length,elm:t,trkScroll:!(!i||!i.scroll)&&i.scroll,isVisible:!1,visbililty:0,maxVisibility:0,scroll:0,maxScroll:0,initTime:(new Date).getTime(),visibleTime:0,deadTime:0,totalDeadTime:0};gr(this,mr)[mr][e].push(s),t.setAttribute("data-k5a-trackerId",s.trkId),gr(this,kr)[kr].observe(t)}resetTracker(e,t,i){if(null!==t){if(void 0!==gr(this,mr)[mr][e]){for(var s=0;s<gr(this,mr)[mr][e].length;s++)null!==gr(this,mr)[mr][e][s].elm&&(gr(this,mr)[mr][e][s].elm.removeAttribute("data-k5a-trackerId"),gr(this,kr)[kr].unobserve(gr(this,mr)[mr][e][s].elm));gr(this,mr)[mr][e]=[]}this.addTracker(e,t,i)}}getData(e){for(var t=[],i=0;i<gr(this,mr)[mr][e].length;i++)(gr(this,mr)[mr][e][i].visibleTime>0||gr(this,mr)[mr][e][i].initTime)&&t.push({trackId:gr(this,mr)[mr][e][i].trkId,visible:gr(this,mr)[mr][e][i].visibleTime+gr(this,Pr)[Pr](gr(this,mr)[mr][e][i].initTime),maxScroll:gr(this,mr)[mr][e][i].maxScroll,scroll:gr(this,mr)[mr][e][i].scroll,elm:gr(this,mr)[mr][e][i].elm});return t}getAllData(){var e={};for(var t of Object.keys(gr(this,mr)[mr]))for(var i=0;i<gr(this,mr)[mr][t].length;i++)e[t]=this.getData(t);return e}debug(){for(var e of Object.keys(gr(this,mr)[mr]))for(var t=0;t<gr(this,mr)[mr][e].length;t++){var i=gr(this,mr)[mr][e][t];console.log(i.trkId+" "+i.isVisible+" "+i.maxScroll)}}}function jr(e){e.forEach((e=>{if(e.target.hasAttribute("data-k5a-trackerId")){var[t,i]=e.target.getAttribute("data-k5a-trackerId").split("-");e.isIntersecting?gr(this,mr)[mr][t][i].isVisible||(gr(this,mr)[mr][t][i].isVisible=!0,gr(this,mr)[mr][t][i].initTime=(new Date).getTime()):gr(this,mr)[mr][t][i].isVisible&&(gr(this,mr)[mr][t][i].isVisible=!1,gr(this,mr)[mr][t][i].visibleTime+=gr(this,Pr)[Pr](gr(this,mr)[mr][t][i].initTime))}}))}function Sr(){var e=window.pageYOffset+window.innerHeight;for(var t of Object.keys(gr(this,mr)[mr]))for(var i=0;i<gr(this,mr)[mr][t].length;i++)if(gr(this,mr)[mr][t][i].trkScroll){var s=0;if("BODY"==gr(this,mr)[mr][t][i].elm.tagName){var a=document.documentElement.scrollTop,r=window.innerHeight,n=document.documentElement.scrollHeight;s=parseInt((a+r)/n*100)}else{var o=e-gr(this,mr)[mr][t][i].elm.offsetTop;s=parseInt(o/gr(this,mr)[mr][t][i].elm.offsetHeight*100)}s<0&&(s=0),s>100&&(s=100),s>gr(this,mr)[mr][t][i].maxScroll&&(gr(this,mr)[mr][t][i].maxScroll=s),gr(this,mr)[mr][t][i].scroll=s}}function _r(e){if(void 0===e||isNaN(e))return 0;var t=(new Date).getTime();return t>e&&t>0&&e>0?parseInt((t-e)/1e3):0}function Tr(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ar=0;function Er(e){return"__private_"+Ar+++"_"+e}var Cr=Er("logData"),Mr=Er("state"),xr=Er("elmTracker"),Lr=Er("cfg"),Ir=Er("scrollMultiple"),Nr=Er("setupTrackElements"),Fr=Er("getExitType"),Ur=Er("finalizeExitData"),Rr=Er("setupLogData"),Vr=Er("runDebug"),Hr=Er("addTracker");class qr extends Fi{constructor(e,t={}){super(e),Object.defineProperty(this,Hr,{value:Jr}),Object.defineProperty(this,Vr,{value:Yr}),Object.defineProperty(this,Rr,{value:zr}),Object.defineProperty(this,Ur,{value:$r}),Object.defineProperty(this,Fr,{value:Kr}),Object.defineProperty(this,Nr,{value:Br}),Object.defineProperty(this,Cr,{writable:!0,value:null}),Object.defineProperty(this,Mr,{writable:!0,value:"active"}),Object.defineProperty(this,xr,{writable:!0,value:null}),Object.defineProperty(this,Lr,{writable:!0,value:{}}),Object.defineProperty(this,Ir,{writable:!0,value:5}),!0===this.isAutoEnabled("engagement")&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype&&(void 0!==this.k5a.cfg.pageData.article&&"article"==this.k5a.pageData.getField("type")&&(t.elements.page=this.k5a.cfg.pageData.article),Tr(this,Lr)[Lr]=t,void 0===Tr(this,Lr)[Lr].maxTime&&(Tr(this,Lr)[Lr].maxTime=86400),Tr(this,Rr)[Rr](),"object"==typeof t.elements&&this.addHook("ready",function(e){Tr(this,Nr)[Nr](t.elements),Tr(this,Mr)[Mr]="active",Tr(this,xr)[xr].startAll()}.bind(this)),this.addHook("activity",function(e){Tr(this,Mr)[Mr]="active",Tr(this,xr)[xr].startAll()}.bind(this),!0),this.addHook("hidden",function(e){Tr(this,xr)[xr].stopAll(),Tr(this,Mr)[Mr]="hidden"}.bind(this),!0),this.k5a.cfg.pageData.SPA&&this.addHook("spa",function(e){try{if(e&&e.detail&&null==e.detail.sourceUrl)return;Tr(this,Ur)[Ur]()&&(Tr(this,Cr)[Cr].evt>0&&Tr(this,Cr)[Cr].evt<Tr(this,Lr)[Lr].maxTime&&(this.k5a.logger.fireNow("exit",Tr(this,Cr)[Cr],"spa",Tr(this,Fr)[Fr](e)),this.say("exit log request sent, type 'spa' ")),Tr(this,xr)[xr].resetTracker("page",this.k5a.pageData.getArticleElement(),{scroll:!0}),Tr(this,xr)[xr].resetTracker("toolbar",document.body,{scroll:!0}),Tr(this,Rr)[Rr]())}catch(e){console.error("Engagement spa error:"),console.debug(e)}}.bind(this),!0),this.addHook("exit",function(e){Tr(this,Ur)[Ur]()&&(this.k5a.speaker.dump(Tr(this,Cr)[Cr]),Tr(this,Cr)[Cr].evt>0&&Tr(this,Cr)[Cr].evt<=Tr(this,Lr)[Lr].maxTime&&(this.k5a.logger.fireNow("exit",Tr(this,Cr)[Cr],"js",Tr(this,Fr)[Fr](e)),this.say("exit log request sent, type 'js' ")))}.bind(this),!0),this.addHook("pageView",function(e){this.say("Engagemanet pageview recieved"),Tr(this,Rr)[Rr]()}.bind(this),!0))}apiMethods(){return{addTracker:function(e,t,i=!1){return Tr(this,Hr)[Hr](e,t,i)}.bind(this)}}}function Br(e){for(var t of(Tr(this,xr)[xr]=new Dr(this),Object.keys(e)))switch(t){case"slots":document.querySelectorAll(e[t]).forEach((e=>{Tr(this,xr)[xr].addTracker(t,e,{scroll:!1})}));break;case"page":var i=this.k5a.pageData.getArticleElement();Tr(this,xr)[xr].addTracker(t,i,{scroll:!0});break;case"toolbar":Tr(this,xr)[xr].addTracker(t,document.body,{scroll:!0})}}function Kr(e){return("click"===this.k5a.listener.getExitType()?"c":"")+"exit"}function $r(){var e=Tr(this,xr)[xr].getAllData();for(var t of(Tr(this,Cr)[Cr].tids=[],Object.keys(e)))if(e[t].length>0)try{for(var i of["visible","scroll","maxScroll"])if(isNaN(e[t][0][i])||void 0===e[t][0][i])return console.error("Attribute for key: "+t+" atr: "+i+" is empty/NaN"),!1;"page"==t?(Tr(this,Cr)[Cr].evt=parseInt(e[t][0].visible),Tr(this,Cr)[Cr].eeh=parseInt(e[t][0].scroll),Tr(this,Cr)[Cr].ems=parseInt(e[t][0].maxScroll),Tr(this,Cr)[Cr].tids=[]):Tr(this,Cr)[Cr].tids.push(t+"|"+e[t][0].visible+"|"+e[t][0].maxScroll+"|"+e[t][0].scroll)}catch(e){return console.error("Error in exit data: "+e.toString()),!1}return!0}function zr(){this.say("setupLogData called: "),Tr(this,Cr)[Cr]=this.k5a.pageData.getDefaultData(),this.say("logData now:"+JSON.stringify(Tr(this,Cr)[Cr]))}function Yr(){if(!0===this.k5a.speaker.debugMode){var e=document.getElementById("engangementDebug");null===e&&((e=document.createElement("DIV")).id="engangementDebug",e.style="background:grey;color:white;padding:5px;position:fixed;top:10px;right:10px;min-width:300px;min-height:20px;font-size:12px;opacity:0.90;",document.body.appendChild(e))}}function Jr(e,t,i=!1){null===Tr(this,xr)[xr]&&(Tr(this,xr)[xr]=new Dr(this)),Tr(this,xr)[xr].addTracker(e,t,{scroll:i})}function Wr(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}qr.moduleName="engagement";var Gr=0;function Qr(e){return"__private_"+Gr+++"_"+e}var Zr=Qr("video"),Xr=Qr("vData"),en=Qr("startTime"),tn=Qr("viewTime"),sn=Qr("autoLoadSent"),an=Qr("debugMode"),rn=Qr("startSent"),nn=Qr("stopSent"),on=Qr("reviseMetaData"),ln=Qr("sendVideoLoad"),hn=Qr("sendVideoStart"),un=Qr("sendVideoStop"),cn=Qr("testField"),dn=Qr("log"),pn=Qr("debug"),fn=Qr("error");class gn{constructor(e,t,i=!0,s=null){Object.defineProperty(this,fn,{value:Pn}),Object.defineProperty(this,pn,{value:On}),Object.defineProperty(this,dn,{value:wn}),Object.defineProperty(this,cn,{value:kn}),Object.defineProperty(this,un,{value:mn}),Object.defineProperty(this,hn,{value:yn}),Object.defineProperty(this,ln,{value:bn}),Object.defineProperty(this,on,{value:vn}),Object.defineProperty(this,Zr,{writable:!0,value:void 0}),Object.defineProperty(this,Xr,{writable:!0,value:{vid:{type:"string",rule:"^[0-9A-Za-z:/x",param:"vid",value:""},duration:{type:"integer",param:"drn",rule:"^\\d+$",value:0},roll:{type:"array",param:"rls",rule:"^\\w{3,32}$",value:[],persistent:!1},tag:{type:"array",param:"vtg",rule:"^\\w{2,32}$",value:[]},countabletag:{type:"array",param:"vctg",rule:"^\\w{2,32}$",value:[],persistent:!1},contenttag:{type:"array",param:"vcstg",rule:"^\\w{2,32}$",value:[]},viewTime:{type:"integer",rule:"^\\d+$",param:"vvt",value:0},start:{type:"string",param:"vst",rule:"^(?:auto|manual|nextauto|nextmanual|restart)$",value:"auto"},title:{type:"string",param:"vtl",rule:"^.{1,256}$",value:""},image:{type:"string",param:"vig",rule:"^[^\\s]{5,256}$",value:""},published:{type:"string",param:"vpt",rule:"^[0-9-T:.Z]+$",value:""},modified:{type:"string",param:"vmt",rule:"^[0-9-T:.Z]+$",value:""},section:{type:"string",param:"vpsn",rule:"^.{2,256}$",value:""},subsection:{type:"array",param:"vpssn",rule:"^.{2,256}$",value:[]},paid:{type:"boolean",param:"vpd",rule:"",value:""},paywall:{type:"string",param:"vpw",rule:"^(?:hard|metered|open)$",value:"open",persistent:!1},login:{type:"boolean",param:"vul",rule:"",value:"",persistent:!1},subscriber:{type:"boolean",param:"vsbs",rule:"",value:"",persistent:!1}}}),Object.defineProperty(this,en,{writable:!0,value:-1}),Object.defineProperty(this,tn,{writable:!0,value:0}),Object.defineProperty(this,sn,{writable:!0,value:!1}),Object.defineProperty(this,an,{writable:!0,value:!1}),Object.defineProperty(this,rn,{writable:!0,value:!1}),Object.defineProperty(this,nn,{writable:!0,value:!1}),Wr(this,Zr)[Zr]=e,Wr(this,Xr)[Xr].vid.value=t,null!=s&&Object.keys(s).forEach((e=>{this.setField(e,s[e])})),i&&this.load()}setDebugMode(e=!0){Wr(this,an)[an]!==e&&(Wr(this,an)[an]&&!1===e&&Wr(this,dn)[dn]("Setting debug mode off","info"),Wr(this,an)[an]=!!e,Wr(this,an)[an]&&!0===e&&(Wr(this,Zr)[Zr].k5a.speaker.setDebugModeModule("video"),Wr(this,dn)[dn]("Setting debug mode on","info")))}getDebugMode(){return Wr(this,an)[an]}setLive(){Wr(this,dn)[dn]("set to live video","info"),Wr(this,Xr)[Xr].duration.value=0}setField(e,t){if(e=e.toLowerCase().trim(),Wr(this,cn)[cn](e,t))switch(Wr(this,dn)[dn]('setField: "'+e+'" -> "'+t+'"',"info"),Wr(this,Xr)[Xr][e].type){case"string":case"integer":Wr(this,Xr)[Xr][e].value=t;break;case"boolean":Wr(this,Xr)[Xr][e].value="true"===t||!0===t||1===t||"1"===t?1:0;break;case"array":Wr(this,Xr)[Xr][e].value.includes(t)||Wr(this,Xr)[Xr][e].value.push(t)}else Wr(this,dn)[dn]('setField - could not set "'+e+'" to "'+t+'"',"error");return!1}getField(e){return void 0!==Wr(this,Xr)[Xr][e]?Wr(this,Xr)[Xr][e].value:null}load(){!1===Wr(this,sn)[sn]?(Wr(this,sn)[sn]=!0,Wr(this,ln)[ln]()):Wr(this,dn)[dn]("Load already sent","warn")}start(e="auto"){return-1!==Wr(this,en)[en]||Wr(this,rn)[rn]?(Wr(this,dn)[dn]("Start already sent","error"),!1):Wr(this,cn)[cn]("start",e)?(Wr(this,dn)[dn]("start - startType: "+e,"info"),Wr(this,Xr)[Xr].start.value=e,Wr(this,en)[en]=(new Date).getTime(),void Wr(this,hn)[hn]()):(Wr(this,dn)[dn]('invalid start type given: "'+e+'"',"error"),!1)}isPlaying(){return Wr(this,en)[en]>0}pause(){return Wr(this,en)[en]<1?(Wr(this,dn)[dn]("- pause: video is not playing","error"),!1):(Wr(this,dn)[dn]("set to pause","info"),Wr(this,tn)[tn]+=(new Date).getTime()-Wr(this,en)[en],Wr(this,en)[en]=0,!0)}resume(){return 0===Wr(this,en)[en]&&Wr(this,rn)[rn]?(Wr(this,dn)[dn]("resuming video","info"),Wr(this,en)[en]=(new Date).getTime(),!0):(Wr(this,dn)[dn]("video is not paused or started","error"),!1)}stop(){if(Wr(this,nn)[nn])return Wr(this,dn)[dn]("stop - video stop already sent","info"),!1;if(this.isPlaying()){let e=Wr(this,an)[an];Wr(this,an)[an]=!1,this.pause(),Wr(this,an)[an]=e}if(!Wr(this,rn)[rn])return Wr(this,dn)[dn]("stop - video was never started","info"),!1;if(Wr(this,tn)[tn]<1)return!1;Wr(this,Xr)[Xr].viewTime.value=parseInt(Wr(this,tn)[tn]/1e3);let e=Wr(this,un)[un]();return Wr(this,en)[en]=-1,Wr(this,Xr)[Xr].viewTime.value=0,e?Wr(this,dn)[dn]("stop - video stopped","info"):Wr(this,dn)[dn]("stop - video stop already sent","info"),e}restart(e="restart"){this.stop(),Wr(this,rn)[rn]=!1,Wr(this,nn)[nn]=!1,Wr(this,en)[en]=-1,Wr(this,tn)[tn]=0,this.start(e)}dump(){console.debug(Wr(this,Xr)[Xr]),this.getLogData()}getLogData(){var e=Wr(this,Zr)[Zr].k5a.pageData.getDefaultData();return Object.keys(Wr(this,Xr)[Xr]).forEach((t=>{e[Wr(this,Xr)[Xr][t].param]=Wr(this,Xr)[Xr][t].value})),e.uid=Wr(this,Zr)[Zr].k5a.user.getId(),e}}function vn(){Object.keys(Wr(this,Xr)[Xr]).forEach((e=>{void 0!==Wr(this,Xr)[Xr][e].persistent&&!1===Wr(this,Xr)[Xr][e].persistent&&("array"===Wr(this,Xr)[Xr][e].type?Wr(this,Xr)[Xr][e].value=[]:Wr(this,Xr)[Xr][e].value="")}))}function bn(){var e=this.getLogData();e.vst="load",Wr(this,Zr)[Zr].k5a.logger.fireNow("video",e,"js"),Wr(this,on)[on]()}function yn(){Wr(this,rn)[rn]||(Wr(this,rn)[rn]=!0,Wr(this,Zr)[Zr].k5a.logger.fireNow("video",this.getLogData(),"js"),Wr(this,on)[on]())}function mn(){if(!Wr(this,nn)[nn]&&Wr(this,rn)[rn]){Wr(this,nn)[nn]=!0;var e=this.getLogData();return e.vst="stop",Wr(this,Zr)[Zr].k5a.logger.fireNow("video",e,"js"),Wr(this,on)[on](),!0}return!1}function kn(e,t){if(void 0===Wr(this,Xr)[Xr][e])return!1;if("boolean"===Wr(this,Xr)[Xr][e].type)return"true"===t||!0===t||1===t||"1"===t||"false"===t||!1===t||0===t||"0"===t;var i=void 0!==Wr(this,Xr)[Xr][e].rule&&""!=Wr(this,Xr)[Xr][e].rule&&new RegExp(Wr(this,Xr)[Xr][e].rule);return!1===i||!1!==i.test(t)}function wn(e,t="info"){Wr(this,an)[an]&&Wr(this,Zr)[Zr].say({prefix:"["+Wr(this,Xr)[Xr].vid.value+"]",message:e,type:t,module:"video"})}function On(e){if(Wr(this,an)[an]){let t="font-weight:bold;color:#284352;";console.log("%cK5A Video2["+Wr(this,Xr)[Xr].vid.value+"]:%c"+e+" startTime: "+Wr(this,en)[en]+" viewTime: "+Wr(this,tn)[tn],t,"")}}function Pn(e,t){}function Dn(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var jn=0;function Sn(e){return"__private_"+jn+++"_"+e}var _n=Sn("activeVideos"),Tn=Sn("debugMode");class An extends Fi{constructor(e){super(e),Object.defineProperty(this,_n,{writable:!0,value:{}}),Object.defineProperty(this,Tn,{writable:!0,value:!1}),this._speaker=this.k5a.speaker.extendScope(this.constructor.name),this.addHook("exit",function(e){this._speaker.say("I got exit...."),Object.keys(Dn(this,_n)[_n]).forEach((e=>{null!==Dn(this,_n)[_n][e]&&(x,this.finishVideo(Dn(this,_n)[_n][e]))}))}.bind(this)),this.k5a.active.addActivity(function(){var e=[];return Object.keys(Dn(this,_n)[_n]).forEach((t=>{null!==Dn(this,_n)[_n][t]&&Dn(this,_n)[_n][t].isPlaying()&&e.push(Dn(this,_n)[_n][t].getLogData())})),e.length>0&&e}.bind(this))}setDebugMode(e=!0){Dn(this,Tn)[Tn]=!!e}finishVideo(e){try{var t=e.getField("vid")}catch(e){return!1}return void 0!==Dn(this,_n)[_n][t]?!1!==e.stop()||(this.warn("Could not stop video with id: "+t),!1):(this.error("Unknown video instance"),!1)}apiMethods(){return{getVideo:function(e,t=!0,i=null){if(void 0!==Dn(this,_n)[_n][e])return this._speaker.say("Video object already initialized - reusing object","video"),Dn(this,_n)[_n][e];{this._speaker.say("Initializing Video object with id: '"+e+"'");let s=new gn(this,e,t,i);return s.setDebugMode(Dn(this,Tn)[Tn]),Dn(this,_n)[_n][e]=s,s}}.bind(this),finishVideo:function(e){this.finishVideo(e)}.bind(this),setVideoDebug:function(e=!0){this.setDebugMode(e)}.bind(this)}}}function En(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}An.moduleName="video";var Cn=0;function Mn(e){return"__private_"+Cn+++"_"+e}var xn=Mn("ttl"),Ln=Mn("storage"),In=Mn("storageKey");class Nn{constructor(e,t,i=30){Object.defineProperty(this,xn,{writable:!0,value:30}),Object.defineProperty(this,Ln,{writable:!0,value:null}),Object.defineProperty(this,In,{writable:!0,value:"_k5aNisa"}),i>0&&(En(this,xn)[xn]=i,En(this,Ln)[Ln]=new ht(e,En(this,In)[In],"localstorage"))}load(e,t){var i=En(this,Ln)[Ln].get();null===i||i.url!==e||i.ttl+1e3*En(this,xn)[xn]<(new Date).getTime()?window.fetch?fetch(e+"?_cb="+(()=>{let e=new Date,t=[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes()];for(let e=0;e<t.length;e++)t[e]<10&&(t[e]="0"+t[e]);return t.join("")})()+(new Date).getTime()).then((e=>e.json())).then((i=>{En(this,Ln)[Ln].canStore()&&(En(this,Ln)[Ln].set({url:e,ttl:(new Date).getTime(),data:i}),t(i))})):console.log("implement no fetch method"):t(i.data)}}function Fn(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Un=0;function Rn(e){return"__private_"+Un+++"_"+e}var Vn=Rn("storageKey"),Hn=Rn("k5a"),qn=Rn("data"),Bn=Rn("cfg"),Kn=Rn("history"),$n=Rn("concluded"),zn=Rn("dLoader"),Yn=Rn("setupTracker"),Jn=Rn("testUrlMatch"),Wn=Rn("cleanHistory"),Gn=Rn("decideVariant");class Qn{constructor(e,t=null){if(Object.defineProperty(this,Gn,{value:to}),Object.defineProperty(this,Wn,{value:eo}),Object.defineProperty(this,Jn,{value:Xn}),Object.defineProperty(this,Yn,{value:Zn}),Object.defineProperty(this,Vn,{writable:!0,value:"_k5aNisaH"}),Object.defineProperty(this,Hn,{writable:!0,value:null}),Object.defineProperty(this,qn,{writable:!0,value:null}),Object.defineProperty(this,Bn,{writable:!0,value:null}),Object.defineProperty(this,Kn,{writable:!0,value:null}),Object.defineProperty(this,$n,{writable:!0,value:{}}),Object.defineProperty(this,zn,{writable:!0,value:null}),Fn(this,Hn)[Hn]=e,null===t)return Fn(this,Hn)[Hn].speaker.error("Missing Nisa config"),!1;Fn(this,Bn)[Bn]=t,Fn(this,Hn)[Hn].speaker.say("Nisa loading"),Fn(this,Hn)[Hn].speaker.table(Fn(this,Bn)[Bn]);try{Fn(this,Kn)[Kn]=new ht(e,Fn(this,Vn)[Vn],"localstorage"),Fn(this,zn)[zn]=new Nn(e,"nisa",Fn(this,Bn)[Bn].jsonTTL||30),Fn(this,Bn)[Bn].jsonUrl&&""!==Fn(this,Bn)[Bn].jsonUrl&&(Fn(this,Hn)[Hn].speaker.say("Loading data from: "+Fn(this,Bn)[Bn].jsonUrl),Fn(this,zn)[zn].load(Fn(this,Bn)[Bn].jsonUrl,this.setLoadedData.bind(this)))}catch(e){console.error("K5A error: "+e.toString())}}reloadData(){return new Promise(((e,t)=>{Fn(this,Bn)[Bn].jsonUrl&&""!==Fn(this,Bn)[Bn].jsonUrl?(Fn(this,Hn)[Hn].speaker.say("Loading data from: "+Fn(this,Bn)[Bn].jsonUrl),Fn(this,zn)[zn].load(Fn(this,Bn)[Bn].jsonUrl,(t=>{Fn(this,qn)[qn]=t,e()}))):t(new Error("Reload nisa error: missing jsonUrl"))}))}setLoadedData(e){Fn(this,qn)[qn]=e,Fn(this,Bn)[Bn].readyEvent&&""!==Fn(this,Bn)[Bn].readyEvent&&(Fn(this,Hn)[Hn].speaker.say("Firing readyEvent: "+Fn(this,Bn)[Bn].readyEvent),document.dispatchEvent(new CustomEvent(Fn(this,Bn)[Bn].readyEvent,{detail:{nisa:this}}))),Fn(this,Hn)[Hn].listener.addHook("click",function(e){if(e.target&&e.target.tagName&&"HTML"!==e.target.tagName){for(var t=e.target,i=null,s=0;null===i&&++s<30&&t&&"HTML"!==t.tagName;)t.hasAttribute("data-k5a-nisa")?i=t.getAttribute("data-k5a-nisa").indexOf(":")>-1&&t.getAttribute("data-k5a-nisa"):t=t.parentNode;null!==i&&!1!==i&&(this.isClicked(i),Fn(this,Kn)[Kn].setKey("eid",i,30))}}.bind(this),!0),Fn(this,Hn)[Hn].listener.addHook("spa",function(e){Fn(this,Yn)[Yn]()}.bind(this),!0),Fn(this,Yn)[Yn](),Fn(this,Wn)[Wn](),Fn(this,Bn)[Bn].renderEvent&&""!==Fn(this,Bn)[Bn].renderEvent&&(this.getTests().forEach(((e,t)=>{document.dispatchEvent(new CustomEvent(Fn(this,Bn)[Bn].renderEvent,{detail:{nisa:this,test:e}}))})),this.renderDone())}getTests(e=""){""==e&&(e=new xe(Fn(this,Hn)[Hn].pageData.getField("url")).clean);for(var t=[],i=0;i<Fn(this,qn)[qn].tests.length;i++)if(Fn(this,Jn)[Jn](e,Fn(this,qn)[qn].tests[i].url)){var s=Fn(this,Gn)[Gn](Fn(this,qn)[qn].tests[i].id,Fn(this,qn)[qn].tests[i].lock,Fn(this,qn)[qn].tests[i].variants,"*",Fn(this,qn)[qn].tests[i].viewThreshold);""!==Fn(this,qn)[qn].tests[i].lock&&(Fn(this,$n)[$n][Fn(this,qn)[qn].tests[i].id+":"+Fn(this,qn)[qn].tests[i].lock]=!0);for(var a=0;a<Fn(this,qn)[qn].tests[i].variants.length;a++)if(""+Fn(this,qn)[qn].tests[i].variants[a].vid==""+s){var r={testId:Fn(this,qn)[qn].tests[i].id+":"+s,placementId:Fn(this,qn)[qn].tests[i].placeId,data:Fn(this,qn)[qn].tests[i].variants[a].data};void 0!==Fn(this,qn)[qn].tests[i].name&&(r.name=Fn(this,qn)[qn].tests[i].name),t.push(r);break}}return t}isClicked(e){var t=e.split(":"),i="*:"+t[0],s=Fn(this,Kn)[Kn].getKey(i);if(null!==s&&!1!==s){void 0===s.s[t[1]]?s.s[t[1]]={v:1,c:1}:s.s[t[1]].c++,Fn(this,Kn)[Kn].setKey(i,s,7200);var a=Fn(this,Hn)[Hn].pageData.getLogData(["url","channel","referer"]);console.debug(a),a.tid=t[0],a.vid=t[1],a.vw=0,a.cl=1,Fn(this,Hn)[Hn].logger.fireNow("nisa",a,"js")}}isViewed(e){var t=e.split(":"),i="*:"+t[0],s=Fn(this,Kn)[Kn].getKey(i);if(null!==s&&!1!==s){void 0===s.s[t[1]]?s.s[t[1]]={v:1,c:0}:s.s[t[1]].v++,Fn(this,Kn)[Kn].setKey(i,s,7200);var a=Fn(this,Hn)[Hn].pageData.getLogData(["url","channel","referer"]);a.tid=t[0],a.vid=t[1],a.vw=1,a.cl=0,Fn(this,Hn)[Hn].logger.fireNow("nisa",a,"js")}}renderDone(){let e=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(e.target.hasAttribute("data-k5a-nisa-view")&&"0"!=e.target.hasAttribute("data-k5a-nisa-view")||(this.isViewed(e.target.getAttribute("data-k5a-nisa")),e.target.setAttribute("data-k5a-nisa-view",1)))}))}),{rootMargin:"0px",threshold:.5});document.querySelectorAll("[data-k5a-nisa]").forEach((t=>{void 0!==Fn(this,$n)[$n][t.getAttribute("data-k5a-nisa")]&&Fn(this,$n)[$n][t.getAttribute("data-k5a-nisa")]?t.setAttribute("data-k5a-nisa-concluded",1):t.setAttribute("data-k5a-nisa-concluded",0),e.observe(t)}))}}function Zn(){var e=Fn(this,Kn)[Kn].getKey("eid");null!==e&&!1!==e&&""!==e&&(Fn(this,Kn)[Kn].delKey("eid"),Fn(this,Hn)[Hn].addTracker&&Fn(this,Hn)[Hn].addTracker("nisa:"+e,document.body,!0))}function Xn(e,t){return"*"==e||"*"==t||(e=(e=e.replace(/\#.+$/,"")).replace(/\/+$/,""))==(t=t.replace(/\#.+$/,"")).replace(/\/+$/,"")}function eo(){var e=Fn(this,Kn)[Kn].get();Object.keys(e).forEach(function(e){for(var t=e.split(":"),i=!0,s=0;s<Fn(this,qn)[qn].tests.length;s++)if(Fn(this,qn)[qn].tests[s].id===t[1]){i=!1;break}i&&Fn(this,Kn)[Kn].delKey(e)}.bind(this))}function to(e,t,i,s="*",a=-1){var r=s+":"+e,n=Fn(this,Kn)[Kn].getKey(r);if(null!==n&&n){var o=n.a;if(0===n.s[n.a].c){if(""!==t)return t;if(n.s[n.a].v>=n.t){for(var l=0;l<i.length;l++)void 0===n.s[i[l].vid]&&(n.a=i[l].vid,n.s[i[l].vid]={v:0,c:0});if(o===n.a){var h=-1;Object.keys(n.s).forEach((e=>{(n.s[e].v<h||-1===h)&&(n.a=e,h=n.s[e].v)})),console.log("new threshold: "+n.s[n.a].v+" "+(Math.floor(n.s[n.a].v/a)+1)),n.t=a*(Math.floor(n.s[n.a].v/a)+1),console.log("min view: "+n.a+" new th: "+n.t)}}}Fn(this,Kn)[Kn].setKey(r,n,7200)}else{if(""!==t)return t;console.log(i.length);var u=Math.floor(Math.random()*i.length);console.log("vid: "+i[u].vid+" idx: "+u),(n={a:i[u].vid,s:{},t:a}).s[i[u].vid]={v:0,c:0},Fn(this,Kn)[Kn].setKey(r,n,7200)}return n.a}var io=new class{constructor(e,t=!1){var i;Object.defineProperty(this,ba,{value:ka}),Object.defineProperty(this,va,{value:ma}),Object.defineProperty(this,ga,{value:ya}),this.cfg={},Object.defineProperty(this,pa,{writable:!0,value:{}}),this.speaker=null,this.logger=null,this.storage=null,this.k5aServer="//l.kilkaya.com/",Object.defineProperty(this,fa,{writable:!0,value:""}),this.element=document,this.pageData=null,this.user=null,this.consent=!0,this.requestId=(new Date).getTime(),this.cfg=e,["installationId","logServer","modules"].forEach((e=>{void 0===this.cfg[e]&&console.error("K5A: missing config option: '"+e+"'")})),void 0===this.cfg.moduleCfg&&(this.cfg.moduleCfg={}),void 0!==this.cfg.logServer&&(this.k5aServer=this.cfg.logServer),this.speaker=new ee("k5a",this),this.speaker.globalDevMode=t,this.storage=new ht(this),this.speaker.checkPersistentDebugMode(),this.logger=new je(this),this.pageData=new Di(this,this.element,this.cfg.pageData||{}),this.listener=new _(this),this.consent=this.pageData.getField("consent"),!1===this.cfg.hasConsent&&(this.consent=!1),this.user=new cs(this),this.user.setId(this.pageData.getField("userId")||""),this.active=new Gi(this),null!=(i=this.cfg)&&i.profiler&&(this.profiler=new Ws(this,this.cfg.profiler)),ua(this,ba)[ba](),ua(this,ga)[ga](),this.listener.postInitialize()}debugModeOn(){this.speaker.setPersistentDebugMode(!0)}debugModeOff(){this.speaker.setPersistentDebugMode(!1)}devModeOn(){this.speaker.setPersistentDebugMode(!0,!0)}devModeOff(){this.speaker.setPersistentDebugMode(!1)}set debugMode(e=!1){this.speaker.debugMode(e)}set debugUrl(e=!1){this.speaker.debugUrl(e)}disableLog(){this.logger.disable()}enableLog(){this.logger.enable()}resetRequestId(){this.requestId=(new Date).getTime()}}({installationId:"6566f9c6c3b8de6d5f10ed23",logServer:"https://cl-eu4.k5a.io/",domains:["20min.ch","tio.ch"],modules:[Ma,pr,qr,An],storage:{b64:!1},pageData:{article:[".Article_body__raxcd"],wordCount:{article:{cl:{Article_body__raxcd:1}}},SPA:{customEvent:"K5A:SpaReady",metaData:!0,viewTime:0,onlyOnce:!1,ignoreAnchor:!0},customParseMetaField:{locale:e=>""!=e&&e.length>2?e.substr(0,2):e},customFields:{comments:{type:"int",fields:["comments"],param:"c_c",spaSafe:!1,lc:!0,isDefault:!0},hasPollEmbed:{type:"int",fields:["hasPollEmbed"],param:"c_hpe",spaSafe:!1,isDefault:!0},hasSlideShowEmbed:{type:"int",fields:["hasSlideShowEmbed"],param:"c_hsse",spaSafe:!1,isDefault:!0},hasSocialEmbed:{type:"int",fields:["hasSocialEmbed"],param:"c_hse",spaSafe:!1,isDefault:!0},hasVideoEmbed:{type:"int",fields:["hasVideoEmbed"],param:"c_hve",spaSafe:!1,isDefault:!0},likes:{type:"int",fields:["likes"],param:"c_l",spaSafe:!1,lc:!0,isDefault:!0},shares:{type:"int",fields:["shares"],param:"c_s",spaSafe:!1,lc:!0,isDefault:!0},age:{type:"int",fields:["age"],param:"c_a",spaSafe:!0,lc:!0,isDefault:!0},gender:{type:"string",fields:["gender"],param:"c_g",spaSafe:!0,lc:!0,isDefault:!0},pollVotes:{type:"int",fields:["pollVotes"],param:"c_v",spaSafe:!1,lc:!0,isDefault:!0},totalRatings:{type:"int",fields:["totalRatings"],param:"c_r",spaSafe:!1,lc:!0,isDefault:!0},importantPercent:{type:"int",fields:["importantPercent"],param:"c_ip",spaSafe:!1,lc:!0,isDefault:!0},informativePercent:{type:"int",fields:["informativePercent"],param:"c_ifp",spaSafe:!1,lc:!0,isDefault:!0},balancedPercent:{type:"int",fields:["balancedPercent"],param:"c_bp",spaSafe:!1,lc:!0,isDefault:!0}}},moduleCfg:{pageview:{ping:!0},engagement:{elements:{page:"document",toolbar:"auto"}},click:{slotInspector:{position:{header:{el:["header"]},footer:{el:["footer"]}},mains:{main:["main"]},slot:{el:["article"],ss:"auto"},title:{cl:["kilkaya-teaser-title"]},image:{el:["img"]},positionTemplate:"row${row}_pos${pos}"}}}},-1!==location.href.indexOf("k5aDebug"));window.kilkaya=io;try{window.kilkaya.nisa=new Qn(io,{userHistory:!0,jsonUrl:io.cfg.logServer+"/"+io.cfg.installationId+".nisa_data.json",jsonTTL:30,readyEvent:"K5A:NisaReady"})}catch(e){console.error("Could not setup Kilkaya Nisa: "+e.toString())}})();
</script>

</body>
</html>
