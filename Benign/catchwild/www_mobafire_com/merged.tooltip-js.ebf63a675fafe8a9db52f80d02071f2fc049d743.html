<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>merged.tooltip-js.ebf63a675fafe8a9db52f80d02071f2fc049d743.html</title>
</head>
<body>

<script>
(function($){var helper={},current,title,tID,IE=$.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),track=!1;$.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip",dynamicTarget:"",dynamicSource:""},block:function(){$.tooltip.blocked=!$.tooltip.blocked}};$.fn.extend({tooltip:function(settings){settings=$.extend({},$.tooltip.defaults,settings);createHelper(settings);return this.each(function(){$.data(this,"tooltip",settings);this.tOpacity=helper.parent.css("opacity");this.tooltipText=this.title;$(this).removeAttr("title");this.alt=""}).mouseover(save).mouseout(hide).click(hide).contextmenu(hide)},fixPNG:IE?function(){return this.each(function(){var image=$(this).css('backgroundImage');if(image.match(/^url\(["']?(.*\.png)["']?\)$/i)){image=RegExp.$1;$(this).css({'backgroundImage':'none','filter':"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+image+"')"}).each(function(){var position=$(this).css('position');if(position!='absolute'&&position!='relative')
$(this).css('position','relative')})}})}:function(){return this},unfixPNG:IE?function(){return this.each(function(){$(this).css({'filter':'',backgroundImage:''})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){$(this)[$(this).html()?"show":"hide"]()})},url:function(){return this.attr('href')||this.attr('src')}});function createHelper(settings){if(helper.parent)return;helper.parent=$('<div id="'+settings.id+'"></div>').appendTo(document.body).hide();if($.fn.bgiframe)helper.parent.bgiframe()}
function settings(element){return $.data(element,"tooltip")}
function handle(event){if(settings(this).delay)tID=setTimeout(show,settings(this).delay);else show();track=!!settings(this).track;$(document.body).bind('mousemove',update);update(event)}
function save(){if($.tooltip.blocked||this==current||(!this.tooltipText&&!settings(this).bodyHandler))return;current=this;handle.apply(current,arguments)}
function show(){var tcurrent=current;title=tcurrent.tooltipText;if(settings(tcurrent).bodyHandler){var bodyContent=settings(tcurrent).bodyHandler.call(tcurrent);if(bodyContent.nodeType||bodyContent.jquery)helper.parent.empty().append(bodyContent)
else helper.parent.html(bodyContent);helper.parent.show()}else if(settings(tcurrent).showBody){helper.parent.empty().html(title);if(settings(tcurrent).dynamicTarget)helper.parent.html(helper.parent.html().replace(settings(tcurrent).dynamicTarget,$(tcurrent).parent().find(settings(tcurrent).dynamicSource).text()));helper.parent.hideWhenEmpty()}else helper.parent.hide();helper.parent.addClass(settings(tcurrent).extraClass);if(settings(tcurrent).fixPNG)helper.parent.fixPNG();tID=null;if((!IE||!$.fn.bgiframe)&&settings(tcurrent).fade){if(helper.parent.is(":animated"))helper.parent.stop().show().fadeTo(settings(tcurrent).fade,tcurrent.tOpacity);else helper.parent.is(':visible')?helper.parent.fadeTo(settings(tcurrent).fade,tcurrent.tOpacity):helper.parent.fadeIn(settings(tcurrent).fade)}else helper.parent.show();update()}
function update(event){if($.tooltip.blocked)return;if(event&&event.target.tagName=="OPTION")return;if(!track&&helper.parent.is(":visible"))$(document.body).unbind('mousemove',update)
if(current==null){$(document.body).unbind('mousemove',update);if(tID)clearTimeout(tID);helper.parent.hide().css("opacity","");return}
helper.parent.removeClass("viewport-right").removeClass("viewport-bottom");var left=helper.parent[0].offsetLeft;var top=helper.parent[0].offsetTop;if(event){left=event.pageX+settings(current).left;top=event.pageY+settings(current).top;var right='auto';if(settings(current).positionLeft){right=$(window).width()-left;left='auto'}
helper.parent.css({left:left,right:right,top:top})}
var v=viewport(),h=helper.parent[0];if(v.x+v.cx<h.offsetLeft+h.offsetWidth){left-=h.offsetWidth+20+settings(current).left;helper.parent.css({left:left+'px'}).addClass("viewport-right")}
if(v.y+v.cy<h.offsetTop+h.offsetHeight){top-=h.offsetHeight+20+settings(current).top;helper.parent.css({top:top+'px'}).addClass("viewport-bottom")}}
function viewport(){return{x:$(window).scrollLeft(),y:$(window).scrollTop(),cx:$(window).width(),cy:$(window).height()}}
function hide(event){if($.tooltip.blocked)return;if(tID)clearTimeout(tID);current=null;var tsettings=settings(this);function complete(){helper.parent.removeClass(tsettings.extraClass).hide().css("opacity","")}
if((!IE||!$.fn.bgiframe)&&tsettings.fade){if(helper.parent.is(':animated'))helper.parent.stop().fadeTo(tsettings.fade,0,complete);else helper.parent.stop().fadeOut(tsettings.fade,complete)}else complete();if(settings(this).fixPNG)helper.parent.unfixPNG()}})(jQuery);const debugTips=!1;var ajaxTooltipCache=new Object();var lastAjaxTooltipUrl='';$(document).on('mouseenter','.tooltip-ajax, .ajax-tooltip',function(event){if(window.matchMedia("(pointer: coarse)").matches){return}
if(debugTips)console.log('ajax tooltip Desktop triggered...','tooltip attached: ',$(this).data('tooltipAttached'));if(!$(this).data('tooltipAttached')){if(debugTips)console.log('attaching tooltip!');$(this).data('tooltipAttached',!0);$(this).tooltip({track:!0,delay:300,showURL:!1,extraClass:"pretty",opacity:0.95,bodyHandler:function(){if(!$(this).metadata().i)return null;var thisAjaxTooltipUrl=String('/ajax/tooltip?relation_type='+$(this).metadata().t+'&relation_id='+$(this).metadata().i);lastAjaxTooltipUrl=thisAjaxTooltipUrl;if(ajaxTooltipCache[thisAjaxTooltipUrl])return ajaxTooltipCache[thisAjaxTooltipUrl];if(debugTips)console.log('getting tooltip ajax info...');$.get(thisAjaxTooltipUrl,function(data){if(debugTips)console.log('tooltip ajax info loaded!');ajaxTooltipCache[thisAjaxTooltipUrl]=String(data);if(lastAjaxTooltipUrl==thisAjaxTooltipUrl){if(debugTips)console.log('populating tooltip text...');$('#tooltip').html(String(data));$('#tooltip').css('z-index',9999)}});return'<img src="/images/loading.gif" />'}});$(this).trigger('mouseenter')}});let tooltipDragStarted=!1;let tooltipDrag=!1;$(document).on('touchstart','.tooltip-ajax:not(.noTouchTip), .ajax-tooltip:not(.noTouchTip)',function(e){if(debugTips)console.log('tooltip touch started...');tooltipDragStarted=!0});$(document).on('touchmove',function(e){if(tooltipDragStarted){if(debugTips)console.log('dragging on tooltip is occuring...');tooltipDrag=!0}});$(document).on('touchend',function(e){if(debugTips)console.log('ending tooltip drag');tooltipDrag=!1;tooltipDragStarted=!1});$(document).on('touchend','.tooltip-ajax:not(.noTouchTip), .ajax-tooltip:not(.noTouchTip)',function(e){if(debugTips)console.log('touchend mobile tooltip check...');if(!tooltipDrag){if(debugTips)console.log('mobile tooltip!');renderModal($(this))}else{if(debugTips)console.log('there was a drag, no tooltip!')}});$('.ajax-tooltip:not(.noTouchTip) a, .tooltip-ajax:not(.noTouchTip) a').on('click',function(e){var touchDevice=window.matchMedia("(pointer: coarse)").matches;if(touchDevice){e.preventDefault()}})
function renderModal(target,ajax=!0){if(debugTips)console.log('rendering modal...',target.metadata());if(ajax&&!target.metadata().i)return null;$('body').append('<div class="mf-modalHolder">'+'<div class="mf-modal" style="display:block;">'+'<button class="mf-modal__close" aria-label="Close Modal"><i class="icon-times"></i></button>'+'<div class="mf-modal__content fresh-tooltip__inner"></div>'+'<button class="mf-modal__close mf-modal__close--full" aria-label="Close Modal">Close</button>'+'</div>'+'</div>');var elementTooltip=$('.mf-modalHolder');var elementTooltipBody=elementTooltip.find('.mf-modal__content');if(debugTips)console.log('instances of modal: '+elementTooltip.length);elementTooltip.fadeIn(400,function(){if(debugTips)console.log('adding modal holder close hook');$('.mf-modalHolder').on('click',function(e){if($(e.target).hasClass('mf-modalHolder')){if(debugTips)console.log('closing modal on off click','target class:',e.target);closeModal()}})});if(ajax){var thisAjaxTooltipUrl=String('/ajax/tooltip?relation_type='+target.metadata().t+'&relation_id='+target.metadata().i);if(ajaxTooltipCache[thisAjaxTooltipUrl]){elementTooltipBody.html(ajaxTooltipCache[thisAjaxTooltipUrl]);if(debugTips)console.log('adding content to tooltip body via cache...');moveItemBuild(elementTooltipBody)}else{elementTooltipBody.html('<img src="/images/loading.gif" />');$.get(thisAjaxTooltipUrl,function(data){elementTooltipBody.html(String(data));ajaxTooltipCache[thisAjaxTooltipUrl]=String(data);if(debugTips)console.log('adding content to tooltip body via ajax...');moveItemBuild(elementTooltipBody)})}}else{elementTooltipBody.html(target.attr('title'))}}
$(document).on('click','.mf-modal__close',function(){if(debugTips)console.log('closing modal on close click');closeModal()});function moveItemBuild(elementTooltipBody){if(debugTips)console.log('determining if item and should move build list...');if(elementTooltipBody.find('.mobile-tip__build').length){const statList=elementTooltipBody.find('.mobile-tip__content > ul:first-child');const isCorruptingPotion=elementTooltipBody.find('[data-title]').data('title')=='Corrupting Potion';if(debugTips)console.log('its an item modal, lets move the build...');if(statList.length){statList.detach();elementTooltipBody.find('.mobile-tip__build').prepend('<div class="mobile-tip__build__stats"></div>');elementTooltipBody.find('.mobile-tip__build__stats').append(statList);if(debugTips)console.log('moving item build to top!')}else{if(debugTips)console.log('cant find stat list to move in item!')}
if(isCorruptingPotion){if(debugTips)console.log('special case for Corrupting Potion');elementTooltipBody.find('.mobile-tip__build').prepend('<div class="mobile-tip__build__stats"></div>');$('.mobile-tip__content').contents().appendTo('.mobile-tip__build__stats')}}else{if(debugTips)console.log('not an item modal!')}}
function closeModal(){if(debugTips)console.log('close modal running...');$('.mf-modalHolder').fadeOut(function(){$(this).remove()})}
$('.tooltip:not(.noTouchTip)').live('mouseover',function(event){var touchDevice=window.matchMedia("(pointer: coarse)").matches;if(debugTips)console.log('tooltip touch debug ',touchDevice,$(this).data('tooltipAttached'),this.tooltipText);if(!touchDevice){if(debugTips)console.log('simple tooltip triggered DESKTOP...');if(!$(this).data('tooltipAttached')){$(this).data('tooltipAttached',!0);$(this).tooltip({track:!0,delay:300,showURL:!1,extraClass:"pretty",opacity:0.95,bodyHandler:function(){return'<div class="ttip-general">'+$('<div>').text(this.tooltipText).html()+'</div>'}});$(this).trigger('mouseover')}}});$('.tooltip:not(.noTouchTip)').live('click',function(){var touchDevice=window.matchMedia("(pointer: coarse)").matches;if(touchDevice){if(debugTips)console.log('simple tooltip triggered MOBILE...');renderModal($(this),!1)}})
</script>

</body>
</html>
