<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pulse-20240917.min.html</title>
</head>
<body>

<script>
!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function t(e){if(Array.isArray(e))return e}function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,n){return t(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(e,n)||s(e,n)||r()}function i(t){return function(t){if(Array.isArray(t))return e(t)}(t)||n(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,n){if(t){if("string"==typeof t)return e(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function a(e,...t){for(const r of t)n(e,r);return e;function n(e,t){if(Array.isArray(t)){if(Array.isArray(e)){for(let r=0,o=t.length;r<o;r++)e[r]=n(e[r],t[r]);return e}return[...t]}return e instanceof Promise||t instanceof Promise?Promise.all([e,t]).then((([e,t])=>a({},e,t))):"object"==typeof t?e&&"object"==typeof e?(function(e,t){for(const[r,o]of Object.entries(t))e[r]=n(e[r],o)}(e,t),e):t?{...t}:t:t??e??void 0}}function c(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}function u(e){return"function"==typeof e}function l(e){return"[object String]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Promise}function p(e,t,n){if(!t||!l(t))return n;const r=t.split(".");for(const t of r){if(!e)return n;e=e[t]}return e??n}function f(e,t=0){let n,r=0;const o=function(...o){const i=Date.now(),s=t-(i-r);s<=0||s>t?(n&&(clearTimeout(n),n=null),r=i,e.apply(this,o)):n||(n=setTimeout((()=>{r=Date.now(),n=null,e.apply(this,o)}),s))};return o.cancel=()=>{n&&clearTimeout(n)},o}async function g(e){if(d(e))return e.then((e=>g(e)));if(Array.isArray(e))return Promise.all(e.map(g));if(u(e))return g(Promise.resolve(e()));if(c(e)){const t=Object.getOwnPropertyNames(e),n=t.reduce(((t,n)=>{const r=e[n];return c(r)||u(r)||d(r)?t.concat(g(r)):t.concat([r])}),[]);return Promise.all(n).then((e=>e.reduce(((e,n,r)=>a(e,{[t[r]]:n})),{})))}return Promise.resolve(e)}function v(e){return Array.isArray(e)?Promise.all(e.map((e=>g(e)))).then((e=>a({},...e.filter(c)))):g(e)}function h(e){const t=[/iPad/,/Android/];function n(t){for(let n=0;n<t.length;n+=1)if(t[n].test(e))return!0;return!1}if(e){if(n([/iPhone;/,/iPod;/,/iPod touch;/,/^HTC/,/Fennec/,/IEMobile/,/BB10;/,/BlackBerry/,/SymbianOS.*AppleWebKit/,/^Mozilla.*Mobile.*Firefox/,/^Mozilla.*Chrome.*Mobile/,/Opera Mobi/,/Android.*Mobile/,/Android.*Mini/,/Symbian/,/^SonyEricsson/,/^Nokia/,/^SAMSUNG/,/^LG/]))return"mobile";if(n(t))return"tablet";if(-1!==e.search(/Hermes.*_app_/))return"tablet"}return"desktop"}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function w(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var b,I,E,S={},P={exports:{}};I=m,E=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(){for(var n=this.getLevel(),o=0;o<r.length;o++){var i=r[o];this[i]=o<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function l(r,o,i){return function(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?s(console,r):void 0!==console.log?s(console,"log"):e)}(r)||u.apply(this,arguments)}function d(e,n){var s,a,u,d=this,p="loglevel";function f(){var e;if(typeof window!==t&&p){try{e=window.localStorage[p]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(p),o=n.indexOf(r+"=");-1!==o&&(e=/^([^;]+)/.exec(n.slice(o+r.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function g(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?p+=":"+e:"symbol"==typeof e&&(p=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||l,d.getLevel=function(){return null!=u?u:null!=a?a:s},d.setLevel=function(e,n){return u=g(e),!1!==n&&function(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&p){try{return void(window.localStorage[p]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+n+";"}catch(e){}}}(u),c.call(d)},d.setDefaultLevel=function(e){a=g(e),f()||d.setLevel(e,!1)},d.resetLevel=function(){u=null,function(){if(typeof window!==t&&p){try{window.localStorage.removeItem(p)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(s=g(i.getLevel())),c.call(d),i===d)for(var e in o)o[e].rebuild()},s=g(i?i.getLevel():"WARN");var v=f();null!=v&&(u=g(v)),c.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new d(e,i.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=p),i},i.getLoggers=function(){return o},i.default=i,i},(b=P).exports?b.exports=E():I.log=E();for(var C,O=P.exports,A=y(O),_=[],T=0;T<256;++T)_.push((T+256).toString(16).slice(1));var j=new Uint8Array(16);function k(){if(!C&&!(C="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return C(j)}var N={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function L(e,t,n){if(N.randomUUID&&!t&&!e)return N.randomUUID();var r=(e=e||{}).random||(e.rng||k)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,function(e,t=0){return(_[e[t+0]]+_[e[t+1]]+_[e[t+2]]+_[e[t+3]]+"-"+_[e[t+4]]+_[e[t+5]]+"-"+_[e[t+6]]+_[e[t+7]]+"-"+_[e[t+8]]+_[e[t+9]]+"-"+_[e[t+10]]+_[e[t+11]]+_[e[t+12]]+_[e[t+13]]+_[e[t+14]]+_[e[t+15]]).toLowerCase()}(r)}function D(e,t="__REALM_NOT_SET__"){return`sdrn:${t}:user:${e||"__USER_ID_NOT_SET__"}`}function R(e){return Object.prototype.hasOwnProperty.call(e,"actor")}function U(e){const{actor:t}=e||{};if(!t)return;const{id:n,realm:r,...o}=function(e){if(l(e))return{id:e};const{id:t,realm:n,...r}=e||{};return{id:t,realm:n,...r}}(t);if(!n)return;const i=D(n,r),s={"@id":i,"spt:userId":i};return Object.assign(s,o)}const V=()=>{};var x=Object.freeze({__proto__:null,default:U,defaultValue:V,generateActorSDRN:D,isActorInput:R});const B={},M=(e,...t)=>{B[e]||(B[e]=!0,console.warn(...t))},W=async e=>await $(e),$=async(e={},t={})=>R(e)||R(t)?await v(e.actor||t.actor||{}):(M("no-actor-builder-and-no-event-present","Cis sync initiated with no actor builder and no event available. If you do not use a login system, please indicate this using tracker.update({ actor: undefined }), otherwise do tracker.update({ actor: somePromise }) with a promise that resolves to the login state."),{}),K={PULSE_COOKIE_KEY:"_pulse2data",TEST_COOKIE_KEY:"_pulse2test",ENV_COOKIE_KEY:"_pulse2env",USE_SECURE_COOKIES:!0,USE_LOCALSTORAGE:!1},H="undefined"!=typeof window&&void 0!==window.document,F=e=>{if(H)return window[e]},G={crypto:H?crypto:globalThis.crypto,localStorage:F("localStorage"),sessionStorage:F("sessionStorage")},{USE_SECURE_COOKIES:J,USE_LOCALSTORAGE:q}=K;function z(e,t=q){if(!H)return"";if(t){const t=localStorage.getItem(e)||"";if(t)return t}return decodeURIComponent(document.cookie.replace(new RegExp(`(?:(?:^|.*;)\\s*${encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1"))}function Y(e,t,n,r=1,o=q,i=J){if(H){const s=function(e=1){const t=Date.now()+1e3*e*60*60*24;return new Date(t)}(r).toUTCString();let a;a=`${e}=${encodeURIComponent(t)}`,a+=";path=/",n&&(a+=`;domain=${n}`),r&&(a+=`;expires=${s}`),i&&"https:"===window.location.protocol&&void 0===window.safari&&(a+=";SameSite=None;Secure"),document.cookie=a,o&&(""===t?localStorage.removeItem(e):localStorage.setItem(e,t))}}function Q(e,t){Y(e,"",t,-1)}const{TEST_COOKIE_KEY:X}=K;let Z=function(){let e;return()=>{if(!H)return"";if(e)return e;const t=`${window.location.hostname}`.split("."),n=function(e=16){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length;let r="";if(e<0)return r;const o=new Uint32Array(e);return G.crypto?.getRandomValues(o),o.forEach((e=>{r+=t.charAt(e%n)})),r}();let r=window.location.hostname,o="";for(let e=0;e<t.length;e+=1)try{if(r=t.slice(-(e+1)).join("."),Y(X,n,r,1),o=z(X),Q(X,r),o===n)break}catch(e){}return e=r,r}}();const ee=(e="localStorage")=>{const t=G[e];return{getItem:e=>H&&t?t.getItem(e):void 0,setItem:(e,n)=>{H&&t&&t.setItem(e,n)}}},te="_pulse.internal.identity.ppid",ne="_pulse.internal.identity.cis";var re={getCisCacheFromStorage:()=>{try{const e=ee();return JSON.parse(e.getItem(ne)??"")}catch(e){return{}}},setCisCacheToStorage:e=>{try{return ee().setItem(ne,JSON.stringify(e)),!0}catch(e){return!1}},getPPIDsFromStorage:()=>{try{const e=ee();return JSON.parse(e.getItem(te)??"")}catch(e){return{}}},setPPIDsToStorage:e=>{try{return ee().setItem(te,JSON.stringify(e)),!0}catch(e){return!1}}};const{PULSE_COOKIE_KEY:oe,ENV_COOKIE_KEY:ie}=K,se=9e5,ae=144e5,ce=new class{constructor(){this.events={}}on(e,t){"object"!=typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t)}off(e,t){this.removeListener(e,t)}removeListener(e,t){if("object"==typeof this.events[e]){const n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)}}removeAllListeners(){this.events={}}emit(e,t){"object"==typeof this.events[e]&&this.events[e].filter((e=>null!=e)).forEach((e=>e(t)))}};function ue(e=z(oe)){let t=decodeURIComponent(e).split(",");10!==t.length&&(t=[]),z(ie);const n=re.getPPIDsFromStorage(),r=re.getCisCacheFromStorage();return{environmentId:t[0],prevUserId:t[2]?t[2]:void 0,refreshAfterTimestamp:t[3]?parseInt(t[3],10):void 0,jwe:t[4],anId:t[5],syncWithAppNexus:t[6]?parseInt(t[6],10):void 0,doTracking:t[7]?"true"===t[7]:void 0,pixelInjected:t[8]?"true"===t[8]:void 0,adId:t[9],altEnvIds:undefined,visitorIdPlaceholder:t[1],ppId:n,includeAdvertising:r?.includeAdvertising}}function le(e){const{environmentId:t="",prevUserId:n="",jwe:r="",anId:o="",doTracking:i="",pixelInjected:s="",adId:a="",visitorIdPlaceholder:c="v",ppId:u={},refreshAfterTimestamp:l,includeAdvertising:d}=e||{},p=Date.now(),f=[t,c,n,l||new Date(p+se).getTime(),r,o,o?(new Date).setTime(p+ae):0,i,s,a].join(",");re.setPPIDsToStorage(u),re.setCisCacheToStorage({includeAdvertising:d}),Y(oe,f,Z(),730),ce.emit("environmentIdSet",t),ce.emit("jweSet",r)}var de;function pe(){const e={...ue(),adId:"",anId:"",includeAdvertising:!1,jwe:"",syncWithAppNexus:0};return le(e),e}function fe(e,t=Date.now()){return e.syncWithAppNexus&&t>e.syncWithAppNexus||!e.anId}!function(e){e.Initialise="initialise",e.Login="login",e.Logout="logout",e.Refresh="refresh",e.NewAnid="new-anid",e.includeAdvertisingChange="includeAdvertisingChange"}(de||(de={}));const ge=(e,t)=>!t||t.includes(e),ve=(e,t)=>Boolean(e)&&String(e)!==String(t),he=(e,t)=>!e&&String(e)!==String(t),me=(e,t)=>t&&e>t,ye=(e,t)=>e!==t,we=(e,t,n=!1,r=[])=>!e||-1!==e.indexOf("undefined")||!t.environmentId||!t.jwe||n&&r.length>0&&0===Object.keys(t.ppId).length;function be(e,t={}){const{investigateSyncOn:n,cookie:r=z(oe),includeAdvertising:o,vendors:i}=t,s=ue(r),a=Date.now(),c=fe(s,a);return ve(e,s.prevUserId)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:c,syncWithCisReason:de.Login}:he(e,s.prevUserId)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:c,syncWithCisReason:de.Logout}:me(a,s.refreshAfterTimestamp)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:c,syncWithCisReason:de.Refresh}:we(r,s,o,i)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:c,syncWithCisReason:de.Initialise}:t?.xandrEnabled&&ge(de.NewAnid,n)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:!1,syncWithCisReason:de.NewAnid}:ye(s.includeAdvertising,o)?{syncWithCis:!0,waitForCis:!0,syncWithAppNexus:c,syncWithCisReason:de.includeAdvertisingChange}:{syncWithCis:!1,syncWithAppNexus:c}}const Ie="https://secure.adnxs.com/getuidj",Ee="pulse2an_36jayge7acx2ge456aau2ls4tpa0z";function Se(e){if(!H)return!1;if(!document.getElementById(Ee)){const t=document.createElement("img");t.src=`https://secure.adnxs.com/getuid?${new URL("/api/v1/sync?ANID=$UID",e).toString()}`,t.id=Ee,t.style.display="none";return document.getElementsByTagName("body").item(0).appendChild(t),!0}return!1}let Pe=Promise.resolve(!1);async function Ce(e="https://cis.schibsted.com"){if(fe(ue())){return!!Se(e)&&(await new Promise((e=>{setTimeout((()=>e(!0)),2e3)})),Pe=Pe.then((()=>fetch(Ie,{method:"GET",credentials:"include"}).then((e=>e.json())).then((({uid:e}={})=>{if(e){const t=ue();if(e!==t.anId)return le({...t,anId:e}),!0}return!1})))),Pe)}return!1}const{PULSE_COOKIE_KEY:Oe}=K;let Ae="cis.schibsted.com";const _e="user",Te="guest",je=e=>{let t=Te;return e&&(t=_e),`/api/v2/identify/${t}`},ke=new Headers({"Content-Type":"application/json"}),Ne=2,Le=new Map;async function De({anId:e,cisLocation:t,clientId:n,includeAdvertising:r,resolvedJwe:o,trackerType:i,trackerVersion:s,userId:a,vendors:c},u=0){if(u>Ne)throw new Error("Too many CIS redirects");const l=await async function({anId:e,cisLocation:t,clientId:n,includeAdvertising:r,resolvedJwe:o,trackerType:i,trackerVersion:s,userId:a,vendors:c}={}){const u=`${"/"===t?.at(-1)?t.slice(0,-1):t}${je(a)}`;if(document.requestStorageAccessFor&&t){const{state:e}=await navigator.permissions.query({name:"top-level-storage-access",requestedOrigin:t});if("granted"===e||navigator.userActivation.isActive)try{await document.requestStorageAccessFor(t)}catch(e){O.warn(`requestStorageAccessFor for origin ${t} failed, cis cookie will not be available`),O.warn(e)}else O.warn("requestStorageAccessFor not called since permissions were not granted. initiating pulse as a result of a user action will resolve this. 3rd party cookies will not work."),O.warn("See https://developers.google.com/privacy-sandbox/3pcd/related-website-sets-integration#user_prompt_and_user_gesture for details")}return fetch(new URL(u).toString(),{method:"POST",credentials:"include",headers:ke,body:JSON.stringify({anId:e,clientId:n,includeAdvertising:r,jwe:o,trackerType:i,trackerVersion:s,userId:a,vendors:c})})}({anId:e,cisLocation:t,clientId:n,includeAdvertising:r,resolvedJwe:o,trackerType:i,trackerVersion:s,userId:a,vendors:c}),{data:d}=await l.json();return d.redirectToHost?(Ae=d.redirectToHost,De({anId:e,resolvedJwe:o,userId:a,cisLocation:`https://${Ae}`,clientId:n,trackerType:i,trackerVersion:s,includeAdvertising:r,vendors:c},u+1)):d}let Re=Promise.resolve(ue()),Ue=Promise.resolve(ue());async function Ve(e,t=!1,n,r,o,i,s,a,c,u){const l=z(Oe),{syncWithCis:d,syncWithCisReason:p}=be(e,{cookie:l,investigateSyncOn:[i],...u}),{anId:f,jwe:g,prevUserId:v}=ue(l),h=async()=>{const i=r||g;let l=e;p!==de.Login&&p!==de.Logout&&(l=v);const h=l&&`sdrn:${o}:user:${l}`;if(d||t)try{const t=await De({anId:f,resolvedJwe:i,userId:h,cisLocation:n,clientId:s,trackerType:a,trackerVersion:c,includeAdvertising:u?.includeAdvertising,vendors:u?.vendors}),r=t.refreshAfter?new Date(t.refreshAfter).getTime():0,o={ppId:{},...t,prevUserId:e,refreshAfterTimestamp:r,includeAdvertising:u?.includeAdvertising};return le(o),o}catch(e){}finally{u?.trackerId&&Le.delete(u.trackerId)}return ue()};if(u?.trackerId){const{request:e,requestReason:n}=Le.get(u.trackerId)||{};let r=e;return r&&n===p&&!t||(r=h(),Le.set(u.trackerId,{request:r,requestReason:p})),r}return Re=Re.then(h),Re}var xe={SDK_VERSION:"6.0.3",GIT_COMMIT:"44d99729"};const Be=()=>{!function(e){const t={...ue(),refreshAfterTimestamp:e?e.getTime():(new Date).getTime()};le(t)}(new Date)},Me=async(e,t,n)=>{const r=await $(e,t),{id:o,realm:i}=r,{cisBaseUrl:s,cisEnabled:a,includeAdvertising:c,isHybrid:u,nativeJwe:l,providerId:d,trackerId:p,vendors:f,xandrEnabled:g}=n;return a?async function(e,t,n,r="schibsted.com",o,i=!0,s,a,c,u){const{syncWithAppNexus:l,syncWithCis:d,waitForCis:p,syncWithCisReason:f}=be(e,{investigateSyncOn:o,xandrEnabled:i,...u}),g=ue(),v=n||"https://cis.schibsted.com";let h=Promise.resolve(g);(d||u?.forceSync)&&(h=Ve(e,Boolean(u?.forceSync),v,t,r,f,s||"",a||"",c,u));let m=Promise.resolve(g);return(p||u?.forceSync)&&(m=h),i&&l&&u?.includeAdvertising&&(Ue=Ue.then((()=>m)).then((()=>Ce(v))).then((n=>n?Ve(e,!0,v,t,r,de.NewAnid,s||"",a||"",c,u):ue()))),m}(o,l,s,i,void 0,g,d,u?"Hybrid":"Web",xe.SDK_VERSION,{includeAdvertising:c,vendors:f,trackerId:p}):{doTracking:!0}};var We;!function(e){e.Xandr="xandr",e.Delta="delta",e.Adform="adform"}(We||(We={}));const $e=async(e,t,n)=>{let r=[];const o=new Set(Object.values(We));n&&0!==n.length||(n=[We.Xandr]),r=n.filter((e=>o.has(e)));const{adId:i,ppId:s={}}=await Me({actor:W(e)},e,t),a={};return r.forEach((e=>{s[e]&&(a[e]={...s[e]},e===We.Xandr&&(a[e].adId=i))})),a};var Ke,He,Fe;function Ge(e){return Boolean(e&&"object"==typeof e&&"string"==typeof e.status&&Object.values(Fe).includes(e.status))}!function(e){e.CMP_ANALYTICS="CMP_ANALYTICS",e.CMP_MARKETING="CMP_MARKETING",e.CMP_ADVERTISING="CMP_ADVERTISING",e.CMP_PERSONALIZATION="CMP_PERSONALIZATION"}(Ke||(Ke={})),function(e){e.DEFAULT="default",e.CMP="cmp",e.CACHE="cache"}(He||(He={})),function(e){e.ACCEPTED="accepted",e.REJECTED="rejected",e.UNKNOWN="unknown"}(Fe||(Fe={}));const Je=e=>!(!e?.purposes||!Object.values(e.purposes).every((e=>{return t=e,!t?.status;var t})));function qe(e,t){e||void 0===t||void 0===t||M("NO_CONSENT_IN_CONFIG",'Invalid consents passed to the Pulse SDK. "requireAdvertisingOptIn" and no "consents" config param present.');const n=ze(e,t);return n||pe(),n}function ze(e,t){return!t||(Je(e)?Boolean(e?.purposes?.[Ke.CMP_ADVERTISING]?.optIn):e?.purposes?.[Ke.CMP_ADVERTISING]?.status===Fe.ACCEPTED)}function Ye(e){const{consents:t}=e||{};if(!t)return;return{purposes:Xe(t?.purposes??{}),source:t?.source}}const Qe={[Ke.CMP_ADVERTISING]:{optIn:!1,status:Fe.UNKNOWN},[Ke.CMP_ANALYTICS]:{optIn:!1,status:Fe.UNKNOWN},[Ke.CMP_MARKETING]:{optIn:!1,status:Fe.UNKNOWN},[Ke.CMP_PERSONALIZATION]:{optIn:!1,status:Fe.UNKNOWN}};function Xe(e){const t={...Qe};for(const r in e){const o=r;if(Boolean(Qe[o])){const r=e[o];l(r)&&((n=r)&&""!==n)?t[o]=Ze(e[o]):c(r)&&(r.status&&void 0===r.optIn&&(r.optIn=r.status===Fe.ACCEPTED),t[o]=r)}}var n;return t}function Ze(e){return{"@id":e,optIn:!0}}var et=Object.freeze({__proto__:null,get ConsentsCategory(){return Ke},get ConsentsPurposeCategoryStatus(){return Fe},get ConsentsSource(){return He},applyAdvertisingConsent:qe,default:Ye,defaultPurposes:Qe,isConsentsPurposeCategory:Ge,isConsentsPurposes:function(e){if(!e||"object"!=typeof e||!e.purposes||"object"!=typeof e.purposes)return!1;for(const t in e.purposes){if(!Object.values(Ke).includes(t))return!1;if(!Ge(e.purposes[t]))return!1}return!0},resolveIncludeAdvertising:ze});function tt(e){return`sdrn:schibsted:environment:${e}`}const nt=e=>t=>{const{device:n}=t||{};if(!n)return;const r=a({},e(),function(e){if(l(e))return{id:e};const{id:t,...n}=e||{};return{id:t,...n}}(n)),{id:o,additionalIds:i,...s}=r;if(!o)return;const c={"@type":"Device",environmentId:tt(o)};return i&&(c.additionalEnvironmentIds=i.map(tt)),Object.assign(c,s)},rt="undefined"!=typeof window&&void 0!==window.document,ot=e=>{if(rt)return window[e]},it={crypto:rt?crypto:globalThis.crypto,localStorage:ot("localStorage"),sessionStorage:ot("sessionStorage")};function st(){try{const{localStorage:e}=window;return e.setItem("pulse4test","check"),e.removeItem("pulse4test"),!0}catch(e){return!1}}function at(){if(!rt)return"";let e,t;const{document:n}=window;return void 0!==window.innerWidth?(e=window.innerWidth,t=window.innerHeight):void 0!==n.documentElement.clientWidth&&0!==n.documentElement.clientWidth?(e=n.documentElement.clientWidth,t=n.documentElement.clientHeight):(e=n.getElementsByTagName("body")[0].clientWidth,t=n.getElementsByTagName("body")[0].clientHeight),`${e}x${t}`}const ct=()=>{if(!rt)return{};const{navigator:e,screen:t}=window;return{acceptLanguage:e.userLanguage||e.language,screenSize:`${t.width}x${t.height}`,userAgent:e.userAgent,deviceType:h(window.navigator.userAgent),viewportSize:at(),localStorageEnabled:st()}};function ut(e){const{device:t}=e||{},{environmentId:n,jwe:r}=ue(),o={id:n,jweIds:r,...l(t)?{id:t}:t};return nt(ct)({device:o})}var lt=Object.freeze({__proto__:null,default:ut,defaultValue:ct,device:nt,generateEnvironmentSDRN:tt});function dt(e){const{errors:t,assignmentId:n,requestTimestamp:r}=(e||{}).experimentMetadata||{},o={};return t&&t.length&&(o.errors=t),n&&(o.assignmentId=n),r&&(o.requestTimestamp=r),function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(o)?void 0:o}function pt(){}var ft=Object.freeze({__proto__:null,default:dt,defaultValue:pt});function gt(e,t){return`sdrn:${t}:experiment:${e}`}function vt(e){const{id:t,platform:n,...r}=e||{};return{"@id":gt(t,n),...n&&{platform:n},...r}}function ht(e){const t=(e||{}).experiments||[];if(t.length>0)return t.map(vt)}const mt=()=>{};var yt=Object.freeze({__proto__:null,default:ht,defaultValue:mt});const wt="GeoCoordinates";function bt(e){if(null!=e&&""!==e&&!Number.isNaN(e))return(Math.round(1e3*Number(e))/1e3).toFixed(3)}function It(e){const{location:t}=e||{},{latitude:n,longitude:r,altitude:o,...i}=t||{},s=bt(n),a=bt(r);if(s||a)return{"@type":wt,...i,latitude:s,longitude:a}}function Et(){}var St=Object.freeze({__proto__:null,default:It,defaultValue:Et});const Pt={classifiedad:"classified",notificationcontent:"notification",businesstransaction:"transaction",uielement:"element"},Ct=(e="")=>Pt[e.toLowerCase()]??e.toLowerCase();function Ot(e,t,n){if(function(e){return l(e)&&e?.startsWith("sdrn:")}(e))return e;if((l(e)||Number.isFinite(e))&&l(t)&&l(n)){return`sdrn:${t}:${Ct(n)}:${e}`}}function At({object:e,provider:t}){const{id:n,type:r="Content",custom:o,...i}=e||{},{id:s}=t||{},c=Ot(n,s,r);let u={};return c&&(u={"@id":c,"@type":r}),o&&(u["spt:custom"]=o),a({},u,i)}const _t={UIElement:function({object:e,provider:t,page:n,target:r}){const{id:o,type:i,custom:s,...c}=e||{},{id:u,type:l}=n||{},{id:d,type:p}=r||{},{id:f}=t||{},g={"@id":l||p?`${Ot(u||d,f,l||p)||""}:element:${o}`:Ot(o,f,i),"@type":i};return s&&(g["spt:custom"]=s),a({},g,c)},Account:function({object:e}){const{id:t,realm:n="schibsted.com",type:r,custom:o,...i}=e||{};if(!t)return;const s={"@id":`sdrn:${n}:user:${t}`,"@type":"Account",accountId:t};return o&&(s["spt:custom"]=o),a({},s,i)}};const Tt=(e,t)=>{const{object:n={}}=e||{},{page:r}=n,o=t||r,i=Object.keys(n).reduce(((t,r)=>{const i=n[r];return Array.isArray(i)?{...t,[r]:i.map((t=>{return c(n=t)&&!Array.isArray(n)?Tt(Object.assign({},e,{object:t}),o):t;var n}))}:c(i)?{...t,[r]:Tt(Object.assign({},e,{object:i}),o)}:{...t,[r]:i}}),{}),s=Object.assign({},e,{page:o,object:i});return(a=n.type,_t[a]||At)(s);var a},jt=()=>{if(!rt)return{};const{location:e={href:void 0}}=window;return{name:document.title,url:e.href,id:e.href}};var kt=Object.freeze({__proto__:null,default:Tt,defaultValue:jt,formatObject:Tt,generateObjectSDRN:Ot});const Nt=new RegExp("^unknown$|^sdrn:(.*)$");function Lt(e){const{origin:t,provider:n}=e||{},{id:r,type:o,...i}=t||{},{id:s}=n||{},a=l(c=r)&&Nt.test(c)?r:Ot(r,s,o);var c;const u={...a&&{"@id":a},...o&&{"@type":o}};return Object.assign({},u,i)}const Dt=()=>({url:rt?document.referrer:""});var Rt=Object.freeze({__proto__:null,default:Lt,defaultValue:Dt});const Ut="--PROVIDER-ID-NOT-DEFINED--",Vt="Organization";function xt(e){return e?`sdrn:schibsted:client:${e}`:Ut}function Bt(e){const{provider:t}=e||{},{id:n,type:r=Vt,...o}=t||{},i={"@type":r,"@id":xt(n)};return Object.assign({},i,o)}const Mt=()=>{};var Wt=Object.freeze({__proto__:null,default:Bt,defaultValue:Mt,generateProviderSDRN:xt});function $t(e){const{tracker:t}=e||{},n={name:"Pulse Node.js SDK",type:"JS",version:xe.SDK_VERSION};return Object.assign({},n,t)}const Kt=()=>{};var Ht=Object.freeze({__proto__:null,default:$t,defaultValue:Kt});const Ft="schema.schibsted.com";function Gt({eventInput:e,sdkConfig:t}={}){return Object.assign({},e,{schema:(e||{}).schema||`http://${t?.schemaLocation||Ft}/events/base-routable-event.json/238.json#`,provider:Bt(e),actor:U(e)})}function Jt(e){return a({actor:V(),experiments:mt(),experimentMetadata:void 0,device:ct(),location:void 0,object:jt(),origin:Dt(),provider:Mt(),tracker:Kt()},e)}function qt({eventInput:e,sdkConfig:t}={}){const n=Jt(e),r=e?.pageViewId,o=t?.pageViewId;return Object.assign({},(s=["type"],(i=e)?Object.fromEntries(Object.entries(i).filter((([e])=>!s.includes(e)))):{}),{"@type":e?.type||"View",pageViewId:r||o,schema:e?.schema||`http://${t?.schemaLocation||Ft}/events/tracker-event.json/351.json`,actor:U(n),consents:Ye(n),experiments:ht(n),experimentMetadata:dt(n),device:ut(n),location:It(n),object:Tt(n),origin:Lt(n),provider:Bt(n),target:n.target&&Tt(Object.assign({},n,{object:n.target})),tracker:$t(n)});var i,s}function zt({eventInput:e,sdkConfig:t}={}){return Object.assign(qt({eventInput:e,sdkConfig:t}),{schema:e?.schema||`http://${t?.schemaLocation||Ft}/events/engagement-event.json/378.json`,"@type":"Engagement"})}function Yt({eventInput:e}={}){return e}Gt.defaults=function(e){return a({actor:V(),provider:Mt()},e)},qt.defaults=Jt,zt.defaults=Jt,Yt.defaults=()=>({});var Qt=Object.freeze({__proto__:null,engagementEvent:zt,identityEvent:Yt,routableEvent:Gt,trackerEvent:qt});const{USE_LOCALSTORAGE:Xt}=K,Zt="_pulsesession",en=()=>{const e=(e=>{try{const t=z(e);if(t)return JSON.parse(t)}catch(e){return}})(Zt);if(e){const[t,n,r]=e,o=new Date(n),i=new Date(r);if(t&&o&&i&&!isNaN(o.getTime())&&!isNaN(i.getTime()))return{id:t,startTime:o,lastEventTime:i}}},tn=(e,t)=>{const n=t??new Date;return!e||e.lastEventTime.getTime()<n.getTime()-18e5?(e=>{const t=e??new Date;return{id:(n=L(),`sdrn:schibsted:session:${n}`),startTime:t,lastEventTime:t};var n})(n):{...e,lastEventTime:n}};function nn(e,t){const n=en(),r=tn(n,t);(e=>{const{id:t,startTime:n,lastEventTime:r}=e;try{const e=[t,n.getTime(),r.getTime()],o=1/48;Y(Zt,JSON.stringify(e),Z(),o),!Xt&&rt&&window.localStorage&&window.localStorage.removeItem(Zt)}catch(e){}})(r);const{id:o,startTime:i}=r;return{"@id":o,startTime:i.toISOString()}}var rn=Object.freeze({__proto__:null,actor:x,consents:et,device:lt,events:Qt,experimentMetadata:ft,experiments:yt,location:St,objects:kt,origin:Rt,provider:Wt,session:nn,tracker:Ht});const on={cisEnabled:!0,eventDebounce:200,environment:"browser",collectorPath:"/api/v1/track",useBeaconWhenAvailable:!0},sn=()=>{};const an=()=>()=>({});var cn;!function(e){e.BEFORE_UNLOAD="beforeunload",e.PAGE_HIDE="pagehide",e.POP_STATE="popstate",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.RESIZE="resize",e.MOUSEDOWN="mousedown",e.MOUSEMOVE="mousemove",e.KEYDOWN="keydown",e.TOUCHSTART="touchstart"}(cn||(cn={}));let un,ln,dn=[],pn=[],fn=[],gn=null,vn=f((()=>{}),0),hn=0,mn={value:0,interval:void 0,timeSinceLastActivity:0},yn={type:"Leave",engagement:{objectViewPercentage:0,maxObjectViewPercentage:0,pageViewPercentage:0,maxPageViewPercentage:0,pageScrollPosition:0,maxPageScrollPosition:0}},wn=an();function bn(e,t,n,r,o={}){ln=o.additionalHeightBuilder,In()?O.warn("addPageLeaveTracking was called while leave-tracking was already active. Consider using updatePageLeaveTracking with resetProperties=false if you want to update the page/object element!"):(un=e.state.useBeacon,e.state.useBeacon=!0,wn=r||an(),function(e){const t=Dn([cn.BEFORE_UNLOAD],(()=>jn(e,wn(),cn.BEFORE_UNLOAD)),{capture:!0}),n=Dn([cn.PAGE_HIDE],(()=>jn(e,wn(),cn.PAGE_HIDE)),{capture:!0}),r=Dn([cn.POP_STATE],(()=>jn(e,wn(),cn.POP_STATE)),{capture:!0}),o=Dn([cn.VISIBILITY_CHANGE],(()=>{"hidden"===document.visibilityState&&jn(e,wn(),cn.VISIBILITY_CHANGE)}),{capture:!0});dn.push(...t),dn.push(...n),dn.push(...r),dn.push(...o)}(e),Sn(t,n,o.objectResizable),hn=_n(),O.debug("addPageLeaveTracking:after:state",yn))}function In(){return!(0===dn.length&&0===pn.length&&0===fn.length)}function En(e){e.state.useBeacon=un,dn=Rn(dn,{capture:!0}),Pn(),Cn(),wn=an(),O.debug("removePageLeaveTracking:after:state",wn())}function Sn(e,t,n=!1){!function(e,t,n){kn(e,t),vn=f((()=>kn(e,t)),500),pn=Dn([cn.SCROLL,cn.RESIZE],vn),n&&(gn||(gn=new ResizeObserver((()=>{An(),vn()}))),gn.observe(e))}(e,t,n),function(){const e=1e3,t=3e4;mn.interval=window.setInterval((()=>{mn.timeSinceLastActivity+=e,mn.timeSinceLastActivity<t&&(mn.value+=e)}),e);const n=[cn.SCROLL,cn.MOUSEDOWN,cn.MOUSEMOVE,cn.KEYDOWN,cn.TOUCHSTART],r=Vn();fn=Dn(n,(()=>{mn=function(e){return{...e,timeSinceLastActivity:0}}(mn)}),!!r&&{passive:!0})}()}function Pn(){pn=Rn(pn),fn=Rn(fn),gn&&(gn.disconnect(),gn=null)}const Cn=()=>{yn={type:"Leave",engagement:{objectViewPercentage:0,maxObjectViewPercentage:0,pageViewPercentage:0,maxPageViewPercentage:0,pageScrollPosition:0,maxPageScrollPosition:0}},hn=_n(),mn=On()},On=()=>(clearInterval(mn.interval),{value:0,interval:void 0,timeSinceLastActivity:0}),An=()=>{yn.engagement=Object.assign({},yn.engagement,{objectViewPercentage:0,maxObjectViewPercentage:0,pageViewPercentage:0,maxPageViewPercentage:0,pageScrollPosition:0,maxPageScrollPosition:0})},_n=()=>(new Date).getTime();function Tn(e){a(yn,e)}async function jn(e,t,n){const r=(new Date).getTime()-hn,o=t||wn(),i=a({...yn,engagement:{duration:r,activityDuration:mn.value,...yn.engagement},object:{...n&&{"spt:custom":{"spt:eventName":n}}}},o);O.debug("trackPageLeave: event",i),e.track("trackerEvent",i,{applyBookmarkKey:Qn.PAGE_VIEW}),En(e)}function kn(e,t){const{totalHeight:n,viewedHeight:r}=u(ln)?ln():{totalHeight:0,viewedHeight:0},o=Nn(e)+r,i=Nn(t)+r,s=Ln(t)+r,c=Math.max(s,Number(yn.engagement.maxPageScrollPosition)),l=Un(o,e.scrollHeight+n),d=Math.max(l,Number(yn.engagement.maxObjectViewPercentage)),p=Un(i,t.scrollHeight+n),f=Math.max(p,Number(yn.engagement.maxPageViewPercentage));O.debug("updateViewedContent:before:engagement",{...yn.engagement}),a(yn.engagement,{pageScrollPosition:s,maxPageScrollPosition:c,objectViewPercentage:l,maxObjectViewPercentage:d,pageViewPercentage:p,maxPageViewPercentage:f}),O.debug("updateViewedContent:after:engagement",{...yn.engagement})}const Nn=e=>{const t=e.getBoundingClientRect(),n=rt?e.scrollHeight-t.bottom+window.innerHeight:0;return n<=0?0:Math.min(n,e.scrollHeight)},Ln=e=>Math.abs(Math.min(e.getBoundingClientRect().top,0));function Dn(e,t,n){return e.map((e=>(rt&&window.addEventListener(e,t,n),[e,t])))}function Rn(e,t={}){return e.forEach((([e,n])=>{rt&&window.removeEventListener(e,n,t)})),vn.cancel(),[]}const Un=(e,t)=>Math.round(100*e/t),Vn=()=>{let e;if(void 0!==e)return e;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(t){e=!1}return e},xn=rt&&Boolean(window.navigator.sendBeacon);const Bn="_pulse.internal.remote.config";let Mn=null;async function Wn(e,t=3){try{return await async function(e){return(await fetch(e,{method:"GET"})).json()}(e)}catch(n){if(t>1)return Wn(e,t-1);throw n}}function $n(e,t,n){return!function(e){const t=!!e;return A.debug(`RemoteConfig: isConfigValid: ${t}`),t}(t)||function(e,t){const n=!e||!t||new Date(e).getTime()+6e4*Math.min(t,10080)<=(new Date).getTime();return A.debug(`RemoteConfig: isConfigExpired: ${n}`),n}(n?.updatedAt,t?.["ttl-minutes"])||e!==n?.remoteConfigUrl}let Kn=null;async function Hn(e="default",t){try{if(Mn||(Mn=function(){try{return JSON.parse(it.localStorage?.getItem(Bn)??"")}catch(e){return null}}()),!Mn||$n(t,Mn.config,Mn.metadata)){let e;Kn?e=await Kn:(Kn=Wn(t),e=await Kn,Kn=null),Mn=function(e,t){try{const n={config:e,metadata:{remoteConfigUrl:t,updatedAt:(new Date).toISOString()}};return it.localStorage?.setItem(Bn,JSON.stringify(n)),n}catch(e){return null}}(e,t)}return function(e,t){if(l(e)&&t){let n=t.scopes&&t.scopes[e]?.services||null;return n||"default"===e||(n=t.scopes.default.services),n}return null}(e,Mn?.config)}catch(e){return A.debug(e),Kn=null,null}}const{generateProviderSDRN:Fn}=Wt,Gn={identity:Yt,trackerEvent:qt,engagementEvent:zt,routableEvent:Gt};function Jn(e){return e in Gn?Gn[e]:Gn.trackerEvent}const qn=e=>Boolean(e?.isHybrid)||Boolean(e?.nativeJwe);let zn=!1,Yn=!1;const Qn={PAGE_VIEW:"page-view"};let Xn=class e{constructor(e,t,n){if(A.setLevel(t?.logLevel??A.levels.ERROR),!e||"string"!=typeof e)throw new Error("Required parameter `providerId` missing");const r=qe(t?.consents,t?.requireAdvertisingOptIn);if(Yn=Boolean(t?.cisBaseUrl),zn=Boolean(t?.collectorBaseUrl),function(e=""){const{jwe:t}=ue();e&&t!==e&&pe()}(t?.nativeJwe),this.state=a({},on,{includeAdvertising:r,isHybrid:qn(t),pageViewId:L(),providerId:e,trackerId:L(),deployStage:"pro",vendors:["xandr"],collectorBaseUrl:t?.fallbackCollectorBaseUrl,cisBaseUrl:t?.fallbackCisBaseUrl},t),this.builders=a({},n,{provider:{id:e},tracker:{version:xe.SDK_VERSION}}),this.bookmark=new Map,this.eventQueue=[],this.retryEventQueue=[],"browser"===this.state.environment&&rt&&window.navigator?.sendBeacon){const e=this.state.useBeacon;window.addEventListener("pagehide",(()=>{this.state.useBeacon=!0,this._sendImmediately().then((()=>{}))}),{capture:!0}),window.addEventListener("pageshow",(()=>{this.state.useBeacon=e}))}}track(e,t,n){const r={...this.builders},o=async o=>{const i=this.createEvent(t);return this.evaluateEvent(e,i,r,n).then((async e=>{if(n?.bookmarkKey&&this.bookmark.set(n.bookmarkKey,e),this.state.altEventHandler){return(0,this.state.altEventHandler)(JSON.stringify(e)),Promise.resolve(o)}const t=this._push(e,n).then((()=>{}));return await this.send(),t.then((e=>e))}))};return this.syncRemoteResources(t,r).then(o,o)}createEvent(e){const t=new Date;return a({},e,{"@id":L(),creationDate:t.toISOString(),session:nn(0,t)})}async evaluateEvent(e,t,n=this.builders,r){const o=Jn(e);return this.evaluateEventInputs(e,t,n,r).then((e=>v(o({eventInput:e,sdkConfig:this.state}))))}async evaluateEventInputs(e,t,n=this.builders,r){return Promise.all([v(n),v(t)]).then((t=>{let n=t.reduce(((e,t)=>a(e,t)),{});return n=this.applyEventTypeDefaults(n,e),n=this.applyBookmarkedEvent(n,r?.applyBookmarkKey),n=this.applyConsents(n),n}))}applyEventTypeDefaults(e,t){return a({},(0,Jn(t).defaults)(),e)}applyBookmarkedEvent(e,t){const n=Object.assign({},e);if(t){const e=this.bookmark.get(t)??{},{"@id":r,"@type":o,creationDate:i,...s}=e;return a({},n,s)}return e}applyConsents(e){return a({},e,this.evaluateConsents())}evaluateConsents(){const e=this.state.consents;return{...e&&{consents:e}}}addConsentPurposes(e){M("addConsentPurposes","Deprecated method: addConsentPurposes");for(const t in e){const n=t;this.addSingleConsentPurpose(n,e[n])}}addSingleConsentPurpose(e,t){M("addSingleConsentPurpose","Deprecated method: addSingleConsentPurpose"),this.state.consents?.purposes?this.state.consents.purposes[e]=t:this.state.consents={purposes:{[e]:t}}}removeConsentPurposes(e){M("removeConsentPurposes","Deprecated method: removeConsentPurposes");for(const t of e)this.removeSingleConsentPurpose(t)}removeSingleConsentPurpose(e){M("removeSingleConsentPurpose","Deprecated method: removeSingleConsentPurpose"),delete this.state.consents?.purposes[e]}clearConsentPurposes(){M("clearConsentPurposes","Deprecated method: clearConsentPurposes"),this.replaceConsentPurposes({})}replaceConsentPurposes(e){M("replaceConsentPurposes","Deprecated method: replaceConsentPurposes"),this.state.consents={purposes:e}}getConsents(){return this.evaluateConsents().consents}setConsents(e){const t=this.state.includeAdvertising,n=qe(e,this.state.requireAdvertisingOptIn);return this.state.includeAdvertising=n,this.state.consents=e,t!==n&&Be(),{...this.state.consents}}clone({trackerId:t}={}){return new e(this.state.providerId,{...this.state,trackerId:t||L()},{...this.builders})}update(e,t=!1){this.builders=t?a({},this.builders,e):Object.assign({},this.builders,e)}async getUserId(){return(async e=>{const{id:t}=await W(e);return t})(this.builders)}getIncludeAdvertising(){return this.state.includeAdvertising}async getAdId(){return(async(e,t)=>{const{adId:n}=await Me({actor:W(e)},e,t);return n})(this.builders,this.state)}async getActor(){return W(this.builders)}async getEnvironmentId(){return(async(e,t)=>{const n=await W(e),{environmentId:r}=await Me({actor:n},e,t);return r})(this.builders,this.state)}async getXandrPPID1(){M("getXandrPPID1","Deprecated method: getXandrPPID1");const{xandr:e}=await $e(this.builders,{...this.state},[We.Xandr]);return e?.ppId1}async getXandrPPID2(){M("getXandrPPID2","Deprecated method: getXandrPPID2");const{xandr:e}=await $e(this.builders,{...this.state},[We.Xandr]);return e?.ppId2}async getAdvertisingIdentifiers(e){return $e(this.builders,{...this.state},e)}getPageViewId(){return this.state.pageViewId}newPageView(){this.state.pageViewId=L()}async _applyRemoteConfigEndpoints(){const{fallbackCisBaseUrl:e,fallbackCollectorBaseUrl:t,environment:n,configurationTag:r,remoteConfigurationUrl:o}=this.state;if("browser"===n){const n=await Hn(r,o);zn||(this.state.collectorBaseUrl=n?.collector||t),Yn||(this.state.cisBaseUrl=n?.cis||e)}}async syncRemoteResources(e,t){return await this._applyRemoteConfigEndpoints(),Me(e,t,{...this.state})}_getCollectorPath(e){const{environment:t}=this.state;let{collectorPath:n,collectorBaseUrl:r}=this.state;if("/"===n.at(0)&&(n=n.slice(1)),"/"!==r?.at(-1)&&(r=`${r}/`),"node"===t)return new URL(n,r).toString();const o=e||this.state.providerId;return"string"==typeof o&&0===o.indexOf("sdrn")?new URL(`${n}/${o}`,r).toString():new URL(`${n}/${Fn(o)}`,r).toString()}async _sendImmediately(){if(this.eventQueue.length+this.retryEventQueue.length>0){const e=this.eventQueue.splice(0),t=e.map((e=>e.inputValue)),n=this.retryEventQueue;this.eventQueue=[],this.retryEventQueue=[];const{doTracking:r}=await Me({},this.builders,this.state);if(!r)return Promise.resolve([]);const o=await Promise.all(t),i=this._getCollectorPath(this.state.providerId);return await function(e,t,n){const r=Array.isArray(t)?t.reduce(((e,t)=>(e[0].length>=10?e=[[t]].concat(e):e[0].push(t),e)),[[]]):[[t]];if(rt&&xn&&(n.useBeaconWhenAvailable||n.useBeacon))return r.reduce(((t,n)=>t&&window.navigator.sendBeacon(e,JSON.stringify(n))),!0)?Promise.resolve(!0):Promise.reject(!1);const o=r.map((t=>fetch(e,{headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),method:"POST",body:JSON.stringify(t)})));return Promise.all(o)}(i,[...o,...n],this.state).then((t=>t.status>=400?(this.retryEventQueue=this.retryEventQueue.concat(o),e.map((e=>e.reject(t))),Promise.reject(o)):(e.map((e=>e.resolve(t))),Promise.resolve(o))),(t=>(this.retryEventQueue=this.retryEventQueue.concat(o),e.map((e=>e.reject(t))),Promise.reject(o))))}return Promise.resolve([])}_push(e,t={}){const n=function(e){let t=sn,n=sn;return{promise:new Promise(((e,r)=>{t=e,n=r})),resolve:t,reject:n,inputValue:e}}(e);return this.eventQueue.push(n),t.resolveOnQueued&&n.resolve(e),n.promise}getBookmarkedEvent(e){return this.bookmark.get(e)}async send(){if(this.state.useBeacon)try{return await this._sendImmediately()}catch(e){return e}return this.debouncedSend||(this.debouncedSend=f((()=>this._sendImmediately().catch((e=>e))),this.state.eventDebounce)),this.debouncedSend()}trackPageView(e={},t={}){return this.newPageView(),this.track("trackerEvent",{type:"View",...e},{...t,bookmarkKey:Qn.PAGE_VIEW})}addPageLeaveTracking(e,t,n,r={}){return bn(this,e,t,n,r),Tn}removePageLeaveTracking(){En(this)}updatePageLeaveTracking(e,t,n=!1){!function(e,t,n){pn.length>0&&(Pn(),n&&Cn(),Sn(e,t))}(e,t,n)}resetPageLeaveViewedContent(e,t){An(),kn(e,t)}updatePageLeaveViewedContent(e,t){kn(e,t)}async trackPageLeave(e,t){await jn(this,e,t)}trackActivePageLeave(e,t){!function(e,t,n){In()&&jn(e,t,n)}(this,e,t)}};var Zn=w(Object.freeze({__proto__:null,BookmarkKeys:Qn,EventBuilders:rn,Tracker:Xn,default:Xn}));!function(e){var t=m&&m.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=m&&m.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},r=m&&m.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tracker=void 0,n(Zn,e);const o=r(Zn),i={dev:"https://collector.pulse-internal-dev.schibsted.io",pre:"https://collector.pulse-internal-pre.schibsted.io",pro:"https://dc.schibsted.io"},s={dev:"https://cis.pulse-internal-dev.schibsted.io",pre:"https://cis.pulse-internal-pre.schibsted.io",pro:"https://ncis.schibsted.com"},a={dev:"https://sdkconfig.pulse-internal-dev.schibsted.io/js/config.json",pre:"https://sdkconfig.pulse-internal-pre.schibsted.io/js/config.json",pro:"https://sdkconfig.pulse.schibsted.io/js/config.json"};class c extends o.default{constructor(e,t,n){const r=(null==t?void 0:t.deployStage)||"pro";super(e,Object.assign({remoteConfigurationUrl:a[r],fallbackCisBaseUrl:s[r],fallbackCollectorBaseUrl:i[r],schemaLocation:"schema.schibsted.com"},t),n)}}e.Tracker=c,e.default=c}(S);var er=y(S);function tr(e){var t;(t="_pulse2debug",decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*".concat(encodeURIComponent(t).replace(/[-.+*]/g,"\\$&"),"\\s*\\=\\s*([^;]*).*$)|^.*$")),"$1"))||!1)&&console.log("pulse4",e)}function nr(e){var t,n,r=new Promise((function(e,r){t=e,n=r}));return r.resolve=t,r.reject=n,r.inputValue=e,r}function rr(e,t){var n=e instanceof Promise?e.inputValue[0]:e[0],r=t instanceof Promise?t.inputValue[0]:t[0];return"provide"===n&&"provide"===r?0:"provide"===n?-1:"provide"===r?1:0}var or="3.1.3",ir="defaultTracker",sr={},ar={};function cr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.trackerName,n=void 0===t?ir:t,r=e.providerId,o=e.config,i=e.builders,s=window.__nativeJwe__||window.hermesJwe?{nativeJwe:window.__nativeJwe__||window.hermesJwe}:{},c=window.pulseEventHandler?{altEventHandler:window.pulseEventHandler}:{};return sr[n]=new er(r,a({tracker:{autoTrackerVersion:or}},s,c,o),i),sr[n]}var ur=!1;function lr(){try{window.pulse.q.sort(rr);var e=window.pulse.q;ur&&e.find((function(e){return"provide"===(e instanceof Promise?e.inputValue[0]:e[0])}))&&(ur=!1);for(var a,c=!ur&&e.shift();!ur&&c;){try{c instanceof Promise&&c.inputValue?c=(a=c).inputValue:a=nr(c);var d=t(x=c)||n(x)||s(x)||r(),f=d[0],g=void 0===f?"":f,v=d.slice(1),h=l(g)&&-1===g.indexOf(".");if(u(g))g(sr[ir]),a.resolve(sr[ir]);else if("init"===g){var m=o(v,4),y=m[0],w=m[1],b=m[2],I=m[3];a.resolve(cr({providerId:y,config:w,builders:b,trackerName:I}))}else if("provide"===g){var E=o(v,2),S=E[0],P=E[1];ar[S]=P,a.resolve(),ur=!1}else if(l(g)&&-1!==g.indexOf("require")){var C=h?ir:g.split(".")[0],O=o(v,2),A=O[0],_=O[1],T=void 0===_?{}:_;if(!ar[A])return ur=!0,void window.pulse.q.push(a);var j=ar[A];sr[C][A]=new j(sr[C],T)}else{var k=o(h?[ir,g]:[g.split(".")[0],g.split(".").splice(1).join(".")],2),N=k[0],L=k[1];if(""===L)u(v[0])&&v[0](sr[N]),a.resolve(sr[N]);else if(sr[L])u(v[0])&&v[0](sr[L]),a.resolve(sr[L]);else{var D=L.split("."),R=-1===L.indexOf(".")?N:"".concat(N,".").concat(D.slice(0,-1).join(".")),U=p(sr,R),V=U[D[D.length-1]].apply(U,i(v));u(v[0])&&v[0](V),a.resolve(V)}}}catch(e){tr(e),a.reject(e)}c=e.shift()}}catch(e){tr(e)}var x}window.pulse=window.pulse||function(){var e=nr.apply(void 0,arguments);return(window.pulse.q=window.pulse.q||[]).push(e),e},window.pulse.q=window.pulse.q||[],window.pulse.q.push=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.push.apply(this,t),setTimeout(lr,1),this.length},setTimeout(lr,1)}();
//# sourceMappingURL=pulse-20240917.min.js.map

</script>

</body>
</html>
