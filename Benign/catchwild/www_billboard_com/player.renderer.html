<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>player.renderer.html</title>
</head>
<body>

<script>
"use strict";(self.cnx_webpack_global_elements_545253=self.cnx_webpack_global_elements_545253||[]).push([["renderer"],{3741:(t,i,s)=>{s.d(i,{x:()=>o});var e=s(278),h=s(6798),n=s(2566);function o(t,i){return void 0===i&&(i=e.y),t=null!=t?t:r,(0,h.e)((function(s,e){var h,o=!0;s.subscribe((0,n.x)(e,(function(s){var n=i(s);!o&&t(h,n)||(o=!1,h=n,e.next(s))})))}))}function r(t,i){return t===i}},2457:(t,i,s)=>{s.d(i,{dA:()=>a,jO:()=>o,yG:()=>r});var e=s(8474),h=s(4865);function n(t){return t[t.length-1]}function o(t){return(0,e.m)(n(t))?t.pop():void 0}function r(t){return(0,h.K)(n(t))?t.pop():void 0}function a(t,i){return"number"==typeof n(t)?t.pop():i}},7845:(t,i,s)=>{function e(t,i,s,e,h){void 0===e&&(e=0),void 0===h&&(h=!1);var n=i.schedule((function(){s(),h?t.add(this.schedule(null,e)):this.unsubscribe()}),e);if(t.add(n),!h)return n}s.d(i,{f:()=>e})},6879:(t,i,s)=>{s.r(i),s.d(i,{ElementsRenderer:()=>le});var e=s(7582),h=s(6716),n=s(8671),o=s(6623),r=s(3584),a=s(1847),l=s(1061),d=s(5965),c=s(4632),u=s(6882),v=s(8473),p=s(447),g=s(8866),y=s(1527),m=s(9017),b=s(1573),_=s(466),x=s(7930),f=s(534),C=s(8243),S=s(6637),w=s(5394),k=s(3997),A=s(4463),P=s(2206),I=s(822),T=s(7738),E=s(8341),M=s(7018);function B(){try{return(0,b.AU)(M.H).liveIntentGroup}catch(t){const{message:i}=(0,S.W$)(t);(0,k.FH)({level:"Warn",message:"getLiveIntentGroup_resolve_error",exception:i},{pacing:1,throttle:1,shouldSendMaxLog:!1})}}var V=s(3677);class L extends g._{constructor(t,i,s,e,n,r,a,l,d,c,u){super(),this.mediator=t,this.gA=i,this.mp=s,this._appSettings=e,this.Oa=n,this.cs=r,this.Ta=a,this.ls=l,this.pP=d,this.rI=c,this.RI=u,this.zI={player:[]},this.QI=!1,this.vE={description:"{{description}}",title:"{{title}}",player:"{{player}}"},this.VE=null,this.DE=500,this.Li=[],this.jE=new h.x,this._V(i,e),this.SV(i.sessionId),this.AV=new y.N(i.global,o.l.GLOBAL,this.cs,this.ls),this.PV=new y.N(window,o.l.SCRIPT,this.cs,this.ls),this.bn=(0,b.TF)(l.sessionId,"MonetizationService")}get playerContainer(){return this.TV}init(t){this.QN(),this.gA.isRenderedInSsrContainers?this.TV=(0,p.sb)("mainContainer"):this.EV();const i=this.mp.config.device;return this.BV(i)?(this.Gc(),this.VV.renderExperience(this.gA,this.mp,this.TV,(()=>{t()})),this.VE=setInterval((()=>{if(this.QI)return void this.DV();const{detached:t}=this.mp.services.GlobalDomUtilsService.checkElementDomTreeStatus(this.TV);t&&(this.jE.next(!0),(0,k.nF)({message:"player_removed_from_DOM",level:"Info",sessionId:this.gA.sessionId}))}),this.DE),!0):(this.destroy("breakp"),!1)}getApiMethods(){return this.FV.getApiMethods()}onReady(){return this.VV.onReady()}onDestroy(){return this.jE.asObservable()}destroy(t){var i,s,e;const h=(0,b.AU)(f.w);try{u.S.playerDestroyed=!0,this.QI=!0,this.DV(),null===(i=this.rI)||void 0===i||i.destroy(),null===(s=this.RI)||void 0===s||s.destroy(),null===(e=h.userManagerService)||void 0===e||e.destroy();const{services:{ResizeObserver:t,ViewabilityService:n,InteractionService:o}}=this.mp;t.destroy(),n.destroy(),o.destroy(),(0,A.i)(this.Li),this.Li=[],this.FV.setDestroyed(),this.WT(this.VV),this.VV&&(this.VV.destroy(),this.VV=null),this.TV.parentNode&&this.TV.parentNode.removeChild(this.TV),this.AV.destroy(this.gA.sessionId),this.PV.destroy(this.gA.sessionId)}catch(i){const{message:s,stack:e}=(0,S.W$)(i);(0,k.nF)({callStack:e,level:"Warn",message:`Renderer_destroy_${t}`,exception:s,sessionId:this.gA.sessionId})}}Gc(){if(this.U("destroy",this.VV,(()=>{this.destroy("event")})),this.U("canStart",this.VV,(()=>{this.VV.start()})),this.U("rendered",this.VV,(()=>{this.RV().then(),this.mediator.publish(this,"rendered")})),this.U("enter_view",this.VV,(()=>{var t;!this.ls.isSessionViewTracked&&this.ls.isPlayerStartTracked&&(this.ls.isSessionViewTracked=!0,this.Oa.sessionView.next(new a.n({initialGdprConsentMode:this.ls.cachedGdprConsentMode||n.mI.CONSENT_MODE_UNSPECIFIED,metadata:this.ls.contentTrackingRequestMeta,pageInsightIndexList:null===(t=x.k.pageInsights)||void 0===t?void 0:t.insights,dynamicElkFieldsMap:{9:v.f.getCidForElkTracking()}})),this.FV.trigger(l.Km.SessionInView),this.mediator.publish(this,"enter_view"))})),!this.gA.isServerlessMode){const t=(0,b.TF)(this.ls.sessionId,m.G);this.Li.push(t.omidAdSessionStart.subscribe((()=>{this.FV.trigger(l.jJ.OmidAdSessionStart)})),t.omidAdSessionFinish.subscribe((()=>{this.FV.trigger(l.jJ.OmidAdSessionFinish)})))}this.Li.push(this.cs.imaEvents.adsManager.subscribe((t=>{this.FV.trigger(l.UM.ImaAdsManager,t)}))),Object.values(this.VV.events).forEach((t=>{this.U(t,this.VV,(i=>{this.FV.trigger(t,i.payload)}))}))}UV(t,i){t&&t.forEach((t=>{t.textContent=i}))}SV(t){const i=(0,b.TF)(t,_.P);this.FV.addService("externalAdService",i)}QN(){this.gA.css&&this.mp.services.GlobalDomUtilsService.addCssString(this.gA.css,`cnx-custom-css-${this.mp.config.appId}`)}RV(){var t;return(0,e.mG)(this,void 0,void 0,(function*(){if(this.ls.isSessionRenderTracked)return;const{playerDimensions:i,bundleLoadTimestamp:s,integrationType:e,contentTrackingRequestMeta:h,isExplorationMode:n}=this.ls,{floorPricesStrategyType:o,isAyControlGroup:a}=this.bn;this.ls.isSessionRenderTracked=!0;const l=yield(0,b.AU)(E.c).getLoadedCookieDeprecationLabel(),{width:d,height:u}=i,p=this.HV(),g={7:v.f.getCidForElkTracking(),9:`${(0,P.qd)(s)}`,11:`${p.priceMatchingDemandPartner}`,12:`${p.userVisitCount}`},y=this._appSettings.sdkVersion;(0,I.QM)(y)&&(g[3]=`${y}`),this.Oa.sessionRendered.next(new r.a({playerWidth:d,playerHeight:u,dynamicElkFieldsMap:g,pageInsightIndexList:null===(t=x.k.pageInsights)||void 0===t?void 0:t.insights,hasAdBlocker:c._.isBannerBlocked,integrationType:e,metadata:h,bundleName:T.d5||void 0,googleDeprecationLabel:l,liveIntentAb:B(),isInExplorationMode:n,floorPricesStrategyType:o,isAyControlGroup:a}))}))}HV(){const t=(0,b.AU)(V.n);return{priceMatchingDemandPartner:t.getLocalStorageType(),userVisitCount:t.getUserVisitCount()}}NV(t){return`<cnx>${t}</cnx>`.replace(/{\{([^}]+)}}/g,"<cnx-span>$&</cnx-span>")}EV(){if(this.TV=this.zV(),this.gA.html){const t=this.mp.services.GlobalDomUtilsService.createElementByString(this.NV(this.gA.html));this.QV(t);const i=this.zI.player[0];if(!i)throw Error("player macro was not found");i.innerHTML="",i.parentNode.insertBefore(this.TV,i),i.parentNode.removeChild(i);(0,C.Sz)(t.children).forEach((t=>{this.gA.targetContainer.parentNode.insertBefore(t,this.gA.targetContainer)}))}else this.gA.targetContainer.parentNode.insertBefore(this.TV,this.gA.targetContainer);this.gA.targetContainer.parentElement.removeChild(this.gA.targetContainer);const t=(0,w.Ph)("cnxDebugStats",this.mp.config.pageUrl),i={sid:this.mp.config.sessionId};if(t)switch(t){case"overlay":case"both":this.qV(i)}}zV(){const t=this.mp.config.isMobile?"cnx-in-mobile":"cnx-in-desktop";return this.mp.services.GlobalDomUtilsService.createElementByString(`<cnx class="${d.sN.MainContainer} ${t} ${this.WV}" id="${this.mp.config.appId}"></cnx>`)}QV(t){(0,C.Sz)(t.children).forEach((t=>{t.children.length>0&&this.QV(t),Object.keys(this.vE).forEach((i=>{const s=this.vE[i];t.textContent.includes(s)&&this.GV(i,t)}))}))}GV(t,i){this.zI[t]||(this.zI[t]=[]),this.zI[t].push(i),i.textContent=""}DV(){null!==this.VE&&(clearInterval(this.VE),this.VE=null)}qV(t){const i=this.mp.services.GlobalDomUtilsService.createElementByString('<cnx class="cnx-stats-overlay"></cnx>',this.mp.config.topWindow);Object.keys(t).forEach((s=>{const e=this.mp.services.GlobalDomUtilsService.createElement("cnx-span");e.innerHTML=`${s}: ${t[s]}`,i.appendChild(e)})),this.TV.appendChild(i)}}var D=s(626),O=s(2855),F=s(6515),R=s(4975),U=s(4727),H=s(9374),N=s(1027),$=s(5695),j=s(484),z=s(6468),Q=s(6990);class q{constructor(t,i,s,e,h,n=1200){this.JV=t,this.KV=i,this.br=s,this.Ir=e,this.no=h,this.YV=n,this.XV=null,this.ZV=!1,this.Li=[],this.uD=t=>{switch(t){case 0:if(this.Mk(),!this.ZV&&this.KV&&this.KV.linearAdInWin)return this.ZV=!0,void this.MD(this.YV,2);break;case 1:if(this.KV&&this.KV.linearAdInWin)return void this.Li.push(this.KV.onVpaidEvent.subscribe((t=>{t.type===Q.f.AdError&&(this.Mk(),this.JV.startContent()),(0,A.i)(this.Li)})));break;default:this.Mk()}this.JV.startContent()}}destroy(){this.Mk(),(0,A.i)(this.Li)}changeState(t){switch(t){case 2:this.ZV=!1,"7b321eba-cae3-41f4-8f8c-5f8a316fa963"===this.no?this.MD(this.br,1):this.MD(this.br,0);break;case 3:this.ZV=!1,this.MD(this.Ir,0);break;default:this.XV&&(this.Mk(),(0,A.i)(this.Li))}}setPreRollBreak(t){this.br=t}setPostRollBreak(t){this.Ir=t}setAdHandler(t){this.KV=t}Mk(){clearTimeout(this.XV),this.XV=null}MD(t,i){this.Mk(),this.XV=setTimeout(this.uD.bind(this,i),t)}}const W="cxsqueezeid",G="052e945c-28af-4ba6-8172-98234c18cf84";var J=s(2282),K=s(6213);const Y=(0,K.A)({Play:0,Pause:1});class X{constructor(t,i){switch(this.mediator=t,this.inView=!1,this.DD=!1,this.HD=!1,this.GD=!1,this.tF=()=>{},i){case n.Fx.AUTOPLAY:this.iF(this.sF);break;case n.Fx.CLICK_TO_PLAY:this.iF(this.eF);break;case n.Fx.SCROLL_TO_PLAY:this.iF(this.hF)}}setViewability(t){this.inView=t,this.tF()}setUserPlayback(t){!this.HD&&t&&(this.HD=t),this.DD=!t}setCanPlay(t){this.GD=t,this.DD||!this.inView&&!this.HD||this.tF()}setIsFullscreen(t){this.oF=t}iF(t){this.tF=()=>{this.DD||t.call(this)}}sF(){this.GD&&!this.HD&&this.inView&&(this.HD=!0,this.mediator.publish(this,Y[Y.Play]))}hF(){this.GD&&(this.inView||this.oF&&!this.inView?this.mediator.publish(this,Y[Y.Play]):this.mediator.publish(this,Y[Y.Pause]))}eF(){}}var Z=s(2191);const tt={PreRoll:"pre-roll",MidRoll:"mid-roll",PostRoll:"post-roll"};var it=s(6288),st=s(1174),et=s(250),ht=s(5048);const nt="midRollCapped",ot="totalAdBreakDurationExpired",rt="enableLinearAds",at="disableLinearAds",lt="ForceStopAdSlot",dt="ForceStopAdPod",ct="linearAdOpportunity",ut="AdPodRemainingTime",vt="disableNonLinearAds",pt="enableNonLinearAds",gt="disableAdvertising",yt="enableAdvertising",mt="enterCuePoint",bt="exitCuePoint",_t="canPrefetchAds",xt="startPrefetchAds";var ft=s(6982),Ct=s(9493),St=s(9395);class wt{constructor(t,i){this.rF=t,this.aF=i,this.lF=null,this.dF=null,this.cF=0,this.uF=0,this.vF=!1,this.pF=!1,this.gF=!1,this.Sy=new Map,this.yF=new h.x,this.mF=new h.x,this.bF=new h.x,this._F=new h.x,this.xF=new h.x,this.fF=new h.x,this.CF=new h.x,this.wF=new h.x,this.kF=new h.x,this.AF=new h.x,this.Li=[],this.PF={inImpression:!1};const{adBreaks:s}=this.rF.linearAdsControllerData;this.IF=s.some((t=>t.typeList.includes(n.cr.POST_ROLL)))}get currentPlayerAdSlot(){return this.lF}get onExperienceControllerStateChange(){return this.AF.asObservable()}get onCanPrefetchAds(){return this.kF.asObservable()}get onAdSlotDurationElapsed(){return this.yF.asObservable()}get onAdPodDurationElapsed(){return this.bF.asObservable()}get onAdPodTimeUpdate(){return this._F.asObservable()}get onAdOpportunity(){return this.xF.asObservable()}get onAdsDisabled(){return this.fF.asObservable()}get onAdsEnabled(){return this.CF.asObservable()}get onTotalAdBreakDurationExpired(){return this.mF.asObservable()}get onMidRollCapped(){return this.wF.asObservable()}start(){this.EF();const{totalAdBreakLength:t}=this.rF.linearAdsControllerData;if(t){const i=(0,b.AU)(ft.f);this.MF=new Ct.B(i,t),this.Sy.set(this.MF,[this.MF.onTimeElapsed.subscribe((()=>{this.mF.next()}))])}}contentPlaybackStateChanged(t){var i,s;null===(s=(i=this.aF).contentPlaybackStateChanged)||void 0===s||s.call(i,t)}contentTimeUpdate(t){var i,s;null===(s=(i=this.aF).contentTimeUpdate)||void 0===s||s.call(i,t)}slideChanged(t){var i,s;null===(s=(i=this.aF).slideChanged)||void 0===s||s.call(i,t)}updateStoryTimeline(t){var i,s;null===(s=(i=this.aF).updateStoryTimeline)||void 0===s||s.call(i,t)}onAdImpression(t,i){this.aF.onAdImpression(this.lF,i),this.lF===N.It.MID_ROLL_SLOT&&(this.gF=!0),this.PF.inImpression=!0,this.BF(),this.VF()}onContentAdDurationElapsed(){this.aF.onContentAdDurationElapsed()}onStayNextButtonsDisplayed(){this.aF.onStayNextButtonsDisplayed()}onContentAdDurationReset(){this.aF.onContentAdDurationReset()}onStayButtonPress(){this.aF.onStayButtonPress()}contentChanged(t){this.aF.contentChanged(this.lF,t),this.uF=0}onAdFinished(t,i,s){this.aF.onAdFinished(this.lF,i,s),this.LF=this.DF(this.LF),this.gF=!1,i||(this.OF=this.DF(this.OF),this.lF===N.It.MID_ROLL_SLOT?this.vF||this.uF++:this.cF++),this.FF()&&!i&&this.wF.next(),t&&(this.pF=!0),this.PF.inImpression=!1}viewabilityStateChanged(t,i){var s,e;null===(e=(s=this.aF).viewabilityStateChanged)||void 0===e||e.call(s,this.lF,t,i)}onStop(){this.lF=null}onAdStateChange(t,i,s,e){this.aF.onAdStateChange(t,s,e),this.rF.linearAdsControllerData.maxAdSlotDuration=i.maxAdSlotDuration,this.rF.linearAdsControllerData.maxAdPodDuration=i.maxAdPodDuration,e||(t!==N.It.MID_ROLL_SLOT&&(this.cF=0),null===t&&this.dF===N.It.MID_ROLL_SLOT||(this.pF=!0),this.dF=t,this.lF=t)}canEnableAds(t){const i=this.aF.canEnableAds(this.lF,t);return i.enableAds?this.PF.inImpression?{enableAds:!1,disableReason:2}:this.lF===N.It.MID_ROLL_SLOT&&this.FF()||null===this.lF||this.lF!==N.It.MID_ROLL_SLOT&&this.cF>0?{enableAds:!1,disableReason:0}:{enableAds:!0,disableReason:0}:i}enableAds(){this.CF.next(),this.MF&&this.MF.start()}disableAds(t,i){const s={disableReason:t,adBreakLength:this.RF(i)};this.fF.next({payload:s}),this.MF&&!this.PF.inImpression&&this.MF.stop()}getTheoreticalDurationUntilNextOpportuinity(t){return this.lF===N.It.MID_ROLL_SLOT&&this.FF()?-1:this.aF.getDurationUntilNextOpportunity(t)}onAdPlay(){this.OF&&this.OF.start(),this.LF&&this.LF.start(),this.MF&&this.MF.start()}onAdPause(){this.OF&&this.OF.stop(),this.LF&&this.LF.stop(),this.MF&&this.MF.stop()}triggerAdOpportunity(){this.pF&&(this.pF=!1,this.xF.next({payload:{adBreakType:St.H[this.lF]}}))}startAds(t){var i,s;null===(s=(i=this.aF).startAds)||void 0===s||s.call(i,this.lF,t)}onNewMediaVideo(t){var i,s;const{cuePoints:e,dynamicCuePoints:h,videoDuration:n}=t;this.vF=(0,C.BZ)(e)||Array.isArray(h),this.lF=null,null===(s=(i=this.aF).onNewMediaVideo)||void 0===s||s.call(i,n,e)}setAdHandler(t){this.aF&&this.aF.setAdHandler&&this.aF.setAdHandler(t)}destroy(){(0,A.i)(this.Li),this.MF&&this.MF.disable(),this.LF=this.DF(this.LF),this.OF=this.DF(this.OF),this.aF.destroy()}EF(){var t;this.Li.push(this.aF.onExperienceControllerStateChange.subscribe((t=>{this.AF.next(t)})),null===(t=this.aF.onCanPrefetchAds)||void 0===t?void 0:t.subscribe((()=>{this.kF.next()}))),this.aF.start()}UF(){const t=this.gF?1:0,{numberOfMidRolls:i}=this.rF.linearAdsControllerData;return this.uF===i-t}RF(t){return this.UF()&&!this.IF?Number.POSITIVE_INFINITY:this.aF.getAdBreakDuration(t)}FF(){if(this.vF)return!1;const{numberOfMidRolls:t}=this.rF.linearAdsControllerData;return this.uF>=t&&-1!==t}DF(t){if(t)return t.stop(),(0,A.i)(this.Sy.get(t)),this.Sy.delete(t),null}BF(){const{maxAdSlotDuration:t}=this.rF.linearAdsControllerData;if(!t||this.LF)return;const i=(0,b.AU)(ft.f);this.LF=new Ct.B(i,t),this.LF.start(),this.Sy.set(this.LF,[this.LF.onTimeElapsed.subscribe((()=>{this.yF.next()}))])}VF(){const{maxAdPodDuration:t}=this.rF.linearAdsControllerData;if(!t||this.OF)return;const i=(0,b.AU)(ft.f);this.OF=new Ct.B(i,t),this.OF.start(),this.Sy.set(this.OF,[this.OF.onTimeElapsed.subscribe((()=>{this.bF.next()})),this.OF.onTimeUpdate.subscribe((()=>{const t=this.OF.timeRemaining;this._F.next(t)}))])}}class kt{constructor(){this.XC=new h.x,this.HF=!1,this.nS={disableAdsReason:0,adBreakLengthInMs:Number.POSITIVE_INFINITY,disableAdsInBackground:!1,isInView:!0}}get onPrefetchStart(){return this.XC.asObservable()}updateState(t){this.nS=Object.assign(Object.assign({},this.nS),t)}onNewLinearAdOpportunity(){this.HF=!1}onPrefetchStarted(){this.HF=!0}onDisableAds(){const{disableAdsReason:t,adBreakLengthInMs:i,disableAdsInBackground:s,isInView:e}=this.nS,h=1===t,n=i===Number.POSITIVE_INFINITY;h&&!n&&(!s||e)&&!this.HF&&this.NF(2)}onOutstreamExperienceAdHandlerInit(){this.HF||this.NF(1)}onMediaRestrictionsUpdated(){this.HF||this.NF(1)}NF(t){this.XC.next({prefetchType:t,linearity:O.k.LINEAR})}}class At{constructor(t,i){this.rF=t,this.$F=i,this.fF=new h.x,this.CF=new h.x,this.jF=0,this.AF=new h.x,this.Sy=new Map,this.Li=[],this.PF={inImpression:!1,linearInImpression:!1,inPrePostRoll:!1,contentPaused:!0,linearInOpportunity:!1},this.zF=!1,this.QF=!0}get onExperienceControllerStateChange(){return this.AF.asObservable()}get onAdsDisabled(){return this.fF.asObservable()}get onAdsEnabled(){return this.CF.asObservable()}start(){this.EF(),this.Py()}onLinearImpressionStateChange(t){this.PF.linearInImpression=t,t?(this.qF.stop(),this.jF=0):(this.qF.reset(),this.qF.start(),this.$F.onLinearAdFinished())}onLinearOpportunityChange(t){this.PF.linearInOpportunity=t}onAdStateChange(t){this.PF.inPrePostRoll=t!==N.It.MID_ROLL_SLOT}onAdFinished(){this.$F.onAdFinished(),this.PF.inImpression=!1,this.jF++}onAdImpression(){this.PF.inImpression=!0,0===this.jF&&(this.qF.reset(),this.qF.start())}canEnableAds(){return!!this.$F.canEnableAds()&&(!(this.PF.inImpression||this.PF.inPrePostRoll||this.PF.linearInImpression||this.PF.linearInOpportunity&&this.QF||this.PF.contentPaused&&this.zF)&&!(this.jF>=this.rF.numberOfNonlinearAds&&this.rF.numberOfNonlinearAds>0))}viewabilityStateChanged(t){this.zF=t}onLinearNoDemand(){this.QF=!1}enableAds(){this.CF.next()}disableAds(){this.fF.next()}contentPlaybackStateChanged(t){this.PF.contentPaused=!t,this.AF.next()}destroy(){var t;(0,A.i)(this.Li),null===(t=this.$F)||void 0===t||t.destroy()}Py(){const t=(0,b.AU)(ft.f);this.qF=new Ct.B(t,this.rF.resetNumberOfNonLinearAdsAfter),this.Sy.set(this.qF,[this.qF.onTimeElapsed.subscribe((()=>{this.jF=0,this.AF.next()}))])}EF(){this.Li.push(this.$F.onExperienceControllerStateChange.subscribe((()=>{this.AF.next()}))),this.$F.start()}}class Pt{constructor(t,i,s,e,h,n){var o;this.mediator=t,this.rF=i,this.aF=s,this.Li=[],this.PF={stopped:!1,viewability:!1,forceDisable:!1,zeroDimension:!1,isAppBackgrounded:!1,restrictedOnCurrentMedia:!1,adBlockerActive:!0},this.WF=new wt(i,s),this.GF=new kt,this.Li.push(this.GF.onPrefetchStart.subscribe((t=>{this.mediator.publish(this,xt,{payload:t})}))),this.JF(s),this.viewabilityStateChanged(e),this.onResize(this.rF.playerDimensions.width,this.rF.playerDimensions.height),this.WF.start(),(0,I.hj)(null===(o=i.nonLinearAdsControllerData)||void 0===o?void 0:o.numberOfNonlinearAds)&&n&&this.KF(i.nonLinearAdsControllerData,n),h&&this.disableAdvertising(),this.onContentStop()}get isAdvertisingDisabled(){return this.PF.forceDisable}get isAdvertisingDisabledForCurrentVideo(){return this.aF.isAdvertisingDisabledForCurrentVideo}get inView(){return this.YF}slideChanged(t){this.WF.slideChanged(t)}updateStoryTimeline(t){this.WF.updateStoryTimeline(t)}contentPlaybackStateChanged(t){var i;this.WF.contentPlaybackStateChanged(t),null===(i=this.XF)||void 0===i||i.contentPlaybackStateChanged(t)}contentTimeUpdate(t){this.WF.contentTimeUpdate(t)}forceRecheck(){this.ZF()}onAdImpression(t,i){var s;switch(i){case O.k.LINEAR:{this.WF.onAdImpression(t,this.YF);const i=!0;null===(s=this.XF)||void 0===s||s.onLinearImpressionStateChange(i);break}case O.k.NONLINEAR:this.XF.onAdImpression()}this.ZF()}getTheoreticalDurationUntilNextOpportuinity(){return this.WF.canEnableAds(this.YF).enableAds?0:this.WF.getTheoreticalDurationUntilNextOpportuinity(this.YF)}onAdFinished(t,i,s=!1){var e,h;switch(i){case O.k.LINEAR:if(this.WF.onAdFinished(t,s,this.YF),s)this.tR();else{const t=!1;null===(e=this.XF)||void 0===e||e.onLinearImpressionStateChange(t)}break;case O.k.NONLINEAR:null===(h=this.XF)||void 0===h||h.onAdFinished()}s||this.ZF()}onLinearAdPause(){this.WF.onAdPause()}onLinearAdPlay(){this.WF.onAdPlay()}onContentStop(){this.WF.onStop(),this.PF.stopped=!0,this.ZF()}onAdStateChange(t,i,s){var e;null===(e=this.XF)||void 0===e||e.onAdStateChange(t);const h=t===this.WF.currentPlayerAdSlot&&t===N.It.MID_ROLL_SLOT;h?this.WF.onAdStateChange(t,i,s,h):(this.WF.onAdStateChange(t,i,s,h),this.sR())}onContentDurationChange(t,i){this.aF.onContentDurationChanged(t,i)}adBlockerStatusChange(t){this.PF.adBlockerActive=t,this.ZF()}contentChanged(){this.WF.contentChanged(this.YF),this.ZF()}viewabilityStateChanged(t,i=!1,s=!1){var e;this.GF.updateState({isInView:t}),this.WF.viewabilityStateChanged(t,i),null===(e=this.XF)||void 0===e||e.viewabilityStateChanged(t),this.YF=t,this.rF.viewabilityPolicy===n.j0.STRICT&&(this.PF.viewability=!t),s||this.ZF()}setToggleAdsReason({isAppBackgrounded:t}){this.PF.isAppBackgrounded=t,this.ZF()}onLinearNoFill(){var t;null===(t=this.XF)||void 0===t||t.onLinearOpportunityChange(!1),this.hR()}onLinearNoDemand(){var t;null===(t=this.XF)||void 0===t||t.onLinearNoDemand(),this.hR()}disableAdvertising(){this.mediator.publish(this,gt),this.PF.forceDisable=!0,this.ZF()}enableAdvertising(){this.mediator.publish(this,yt),this.PF.forceDisable=!1,this.ZF()}updateDynamicCuePoints(t){this.aF.updateDynamicCuePoints(t)}disableAdsInBackground(){this.GF.updateState({disableAdsInBackground:!0}),this.aF.disableAdsInBackground()}enableAdsInBackground(){this.GF.updateState({disableAdsInBackground:!1}),this.aF.enableAdsInBackground()}onResize(t,i){this.PF.zeroDimension=0===t||0===i,this.ZF()}onNewMediaVideo(t,i=!1){this.nR(),this.WF.onNewMediaVideo(t),this.PF.restrictedOnCurrentMedia=i,this.ZF()}onContentAdDurationElapsed(){this.WF.onContentAdDurationElapsed(),this.ZF()}onStayNextButtonsDisplayed(){this.WF.onStayNextButtonsDisplayed(),this.ZF()}onStayButtonPress(){this.WF.onStayButtonPress(),this.ZF()}onOutstreamExperienceAdHandlerInit(){this.GF.onOutstreamExperienceAdHandlerInit()}onMediaRestrictionsUpdated(){this.GF.onMediaRestrictionsUpdated()}onPrefetchStarted(){this.GF.onPrefetchStarted()}destroy(){(0,A.i)(this.Li),this.WF.destroy()}setAdHandler(t){this.WF.setAdHandler(t)}JF(t){this.Li.push(this.WF.onAdSlotDurationElapsed.subscribe((()=>{this.mediator.publish(this,lt)})),this.WF.onAdPodDurationElapsed.subscribe((()=>{this.mediator.publish(this,dt)})),this.WF.onAdPodTimeUpdate.subscribe((t=>{this.mediator.publish(this,ut,{payload:{remainingTime:t}})})),this.WF.onAdOpportunity.subscribe((t=>{var i;null===(i=this.XF)||void 0===i||i.onLinearOpportunityChange(!0),this.GF.onNewLinearAdOpportunity(),this.mediator.publish(this,ct,t)})),this.WF.onAdsDisabled.subscribe((t=>{const{disableReason:i,adBreakLength:s}=t.payload;this.GF.updateState({adBreakLengthInMs:s,disableAdsReason:i}),this.GF.onDisableAds(),this.mediator.publish(this,at,t)})),this.WF.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,rt)})),this.WF.onTotalAdBreakDurationExpired.subscribe((()=>{this.mediator.publish(this,ot)})),this.WF.onMidRollCapped.subscribe((()=>{this.mediator.publish(this,nt)})),this.WF.onExperienceControllerStateChange.subscribe((t=>{(0,I.$K)(t)&&(t.inCuePoint?this.mediator.publish(this,mt):(t.cuePointTimedOut&&this.mediator.publish(this,lt),this.mediator.publish(this,bt))),this.ZF()})),this.WF.onCanPrefetchAds.subscribe((()=>{this.mediator.publish(this,_t,{payload:{linearity:O.k.LINEAR}})})))}KF(t,i){this.XF=new At(t,i),this.Li.push(this.XF.onAdsDisabled.subscribe((()=>{this.mediator.publish(this,vt)})),this.XF.onAdsEnabled.subscribe((()=>{this.mediator.publish(this,pt)})),this.XF.onExperienceControllerStateChange.subscribe((()=>{this.ZF()}))),this.XF.start()}sR(){this.WF.startAds(this.YF),this.PF.stopped=!1,this.ZF()}nR(){this.WF.onContentAdDurationReset()}ZF(){const t=this.CR();t.enableAds?(this.rU(),this.hR()):(this.lU(t.disableReason),this.dU())}rU(){const t=this.WF.canEnableAds(this.YF);t.enableAds?this.tR():this.lU(t.disableReason)}hR(){var t;(null===(t=this.XF)||void 0===t?void 0:t.canEnableAds())?this.mU():this.dU()}dU(){var t;null===(t=this.XF)||void 0===t||t.disableAds()}mU(){var t;null===(t=this.XF)||void 0===t||t.enableAds()}lU(t){this.WF.disableAds(t,this.YF)}CR(){return this.PF.forceDisable?{enableAds:!1,disableReason:4}:Object.keys(this.PF).some((t=>this.PF[t]))?{enableAds:!1,disableReason:0}:{enableAds:!0,disableReason:0}}tR(){this.WF.triggerAdOpportunity(),this.WF.enableAds()}}var It=s(3),Tt=s(8474),Et=s(6798),Mt=s(2566),Bt=s(278);function Vt(t,i,s){var e=(0,Tt.m)(t)||i||s?{next:t,error:i,complete:s}:t;return e?(0,Et.e)((function(t,i){var s;null===(s=e.subscribe)||void 0===s||s.call(e);var h=!0;t.subscribe((0,Mt.x)(i,(function(t){var s;null===(s=e.next)||void 0===s||s.call(e,t),i.next(t)}),(function(){var t;h=!1,null===(t=e.complete)||void 0===t||t.call(e),i.complete()}),(function(t){var s;h=!1,null===(s=e.error)||void 0===s||s.call(e,t),i.error(t)}),(function(){var t,i;h&&(null===(t=e.unsubscribe)||void 0===t||t.call(e)),null===(i=e.finalize)||void 0===i||i.call(e)})))})):Bt.y}var Lt=s(4978),Dt=s(1082),Ot=s(7272),Ft=s(8003),Rt=s(946),Ut=s(3339),Ht=s(6197),Nt=s(3203);const $t=Object.assign({},l.Km);var jt=s(1816);class zt{constructor(t,i,s,e){this.gr=t,this.yr=i,this.br=s,this.Ir=e,this.Er=null,this.wr=!1,this.Sr=null,this.Ar=new h.x,this.Pr=new h.x,this.Or(n.cr.PRE_ROLL)?this.setNewBreak(N.It.PRE_ROLL_SLOT):this.setNewBreak(N.It.MID_ROLL_SLOT)}get onAdBreakRemainingTimeUpdate(){return this.Ar}get onCurrentPodChange(){return this.Pr}setNewBreak(t,i=null){const s=(0,St.g)(t);this.Rr=this.Or(s)||this.Cr(s),this.Sr=i,this.wr=!(this.Rr.totalNumberOfAdSlots<=1)}adStarted(){this.Nr(),0===this.Rr.currentPodNumber&&(this.Rr.currentPodNumber=this.Rr.totalNumberOfAdSlots),this.Pr.next(),this.Rr.currentPodNumber--,this.Rr.currentPodNumber<=0&&(this.wr=!1)}endPod(){this.Nr(),this.Rr.currentPodNumber=0,this.wr=!1}enterPodTimeout(t){this.Nr(),this.Er=setTimeout((()=>{this.Nr(),t()}),D.Qg)}isInAdPod(){return this.wr}isCurrentBreakInPod(){return this.Rr.totalNumberOfAdSlots>1}getMaxAdSlotDuration(){return this.Rr.maxAdSlotDuration}getMaxAdPodDuration(){return this.Rr.maxAdPodDuration}getMaxAdSlotPossibleDuration(){let t=0;for(let i=0;i<this.gr.length;i++){if(0===this.gr[i].maxAdSlotDurationSeconds)return 0;t=Math.max(t,this.gr[i].maxAdSlotDurationSeconds)}return t||jt.$k*z.s_}getCurrentSlotIndex(){return this.Rr.totalNumberOfAdSlots-this.Rr.currentPodNumber}getNextSlotIndex(){const t=this.getCurrentSlotIndex();return this.Rr.totalNumberOfAdSlots>t?t+1:1}getTotalNumberOfSlots(){return this.Rr.totalNumberOfAdSlots}isInPodTimeout(){return!!this.Er}updatePodRemainingTime(t){this.Rr.remainingAdPodDuration=t,this.Ar.next()}setPreRollBreak(t){this.br=t}setPostRollBreak(t){this.Ir=t}getAdBreakState(){const t=this.Lr(),i=this.Dr();return{isAdPodBreak:this.isCurrentBreakInPod(),adPodSlotIndex:this.isCurrentBreakInPod()?this.getNextSlotIndex():0,maxAdDuration:t,remainingAdDuration:i,sessionMaxAdDuration:Math.round(this.getMaxAdSlotPossibleDuration()/z.s_),adBreakType:this.Rr.breakType,adBreakTimeoutDuration:this.getAdBreakTimeoutDuration()}}getAdBreakTimeoutDuration(){return(0,I.Ft)(this.Sr)?this.Rr.breakType===n.cr.POST_ROLL?this.Ir:this.Rr.breakType===n.cr.PRE_ROLL?this.br:void 0:this.Sr}Nr(){clearTimeout(this.Er),this.Er=null}Cr(t){return{breakType:t,currentPodNumber:0,maxAdSlotDuration:jt.$k*z.s_,maxAdPodDuration:0,totalNumberOfAdSlots:0,remainingAdPodDuration:0}}Or(t){for(const i of this.gr)if(i.typeList.includes(t))return{currentPodNumber:i.numberOfAdSlots,maxAdSlotDuration:i.maxAdSlotDurationSeconds,maxAdPodDuration:i.maxAdPodDurationSeconds,totalNumberOfAdSlots:i.numberOfAdSlots,breakType:t,remainingAdPodDuration:i.maxAdPodDurationSeconds};return null}Lr(){return Math.round(this.getMaxAdSlotDuration()/z.s_||jt.$k)}Dr(){const t=this.isCurrentBreakInPod()?this.Rr.remainingAdPodDuration/z.s_:this.Lr(),i=this.yr.getRemainingAdsDurationInMs();return null===i?t:Math.round(Math.min(t,i/z.s_))}}var Qt=s(2411);class qt{constructor(t,i,s,e){this.xU=t,this.MU=s,this.BU=this.VU(i,e)}updateWidth(t){const i=this.LU(t);i!==this.currentBreakpointClass&&((0,it.IV)(this.xU,this.currentBreakpointClass),(0,it.cn)(this.xU,i),this.currentBreakpointClass=i)}VU(t,i){return(0,I.$K)(i)?Object.assign({},t[i]||t[Qt.Y.SMARTPHONE]):t}LU(t){switch(!0){case t>=this.BU.xxl:return this.MU.Xxl;case t>=this.BU.xl:return this.MU.Xl;case t>=this.BU.lg:return this.MU.Lg;case t>=this.BU.md:return this.MU.Md;case t>=this.BU.sm:return this.MU.Sm;case t>=this.BU.xs:return this.MU.Xs;default:return this.MU.Xxs}}}class Wt{constructor(t){this.Lg=t,this.DU={},this.FU=[]}getImage(t,i,s,e,h="",n=!1){return this.UU=t,this.JT=(0,I.QM)(i)?i:"",this.Uf=s,this.Wf=e,this.HU=h,this.$U=n,this.jU()}jU(){const t=this.zU();if(t)return t;const i=this.UU+this.HU,s=new Image;return s.src=this.Lg.appendParamsToUrl(i),s.alt=this.JT,this.DU[this.UU]=this.DU[this.UU]||{},this.DU[this.UU][this.Uf]=this.DU[this.UU][this.Uf]||{},this.DU[this.UU][this.Uf][this.Wf]=this.DU[this.UU][this.Uf][this.Wf]||{},this.DU[this.UU][this.Uf][this.Wf][this.HU]=s,s}zU(){const t=this.QU();if(t)return t;if(!this.$U)return;this.qU();const i=this.WU();if(i)return i;const s=this.GU();return s||void 0}qU(){const t=[];if(!this.DU[this.UU])return void(this.FU=[]);const i=this.DU[this.UU],s=this.Uf>this.Wf?1:0;Object.keys(i).forEach((e=>{const h=parseInt(e,10);Object.keys(i[e]).filter((t=>!!i[e][t])).forEach((i=>{const e=parseInt(i,10);if((h>e?1:0)!==s)return;const n={area:h*e,img:this.JU(this.UU,h,e)};t.push(n)}))})),this.FU=[...t]}JU(t,i,s){if(this.DU[t]&&this.DU[t][i]&&this.DU[t][i][s])return this.DU[t][i][s][Object.keys(this.DU[t][i][s])[0]]}QU(){return this.DU[this.UU]&&this.DU[this.UU][this.Uf]&&this.DU[this.UU][this.Uf][this.Wf]&&this.DU[this.UU][this.Uf][this.Wf][this.HU]}WU(){if(0===this.FU.length)return;const t=this.Uf*this.Wf,i=this.FU.filter((({area:i})=>i>t)).sort(((t,i)=>t.area-i.area));return 0!==i.length?i[0].img:void 0}GU(){if(0===this.FU.length)return;const t=this.Uf*this.Wf,i=this.FU.filter((({area:i})=>i<t&&t/i<=1.3)).sort(((t,i)=>i.area-t.area));return 0!==i.length?i[0].img:void 0}}const Gt={[N.It.PRE_ROLL_SLOT]:0,[N.It.MID_ROLL_SLOT]:1,[N.It.POST_ROLL_SLOT]:2};var Jt=s(7068),Kt=s(1749),Yt=s(976),Xt=s(6240),Zt=s(2134);let ti=class{constructor(){this.fH=0,this.KU=new h.x}get onToggleMute(){return this.KU.asObservable()}mute(t){t&&0===this.fH&&(this.fH=t,this.KU.next(0))}unmute(){if(0===this.fH)return;const t=this.fH;this.fH=0,this.KU.next(t)}};ti=(0,e.gn)([(0,Zt.b2)(),(0,Zt.Yn)(Zt.Fw.ContainerScoped)],ti);let ii=class{constructor(){this.YU=0,this.XU=0,this.ZU=!1,this.tN=!1,this.VN=!1,this.WN=new h.x}get onTogglePlay(){return this.WN.asObservable()}cacheContentIntention(t){this.YU=t}onAdEvent(t){switch(t){case Q.f.AdImpression:case Q.f.AdPlaying:this.XU=0;break;case Q.f.AdStopped:case Q.f.AdError:case Q.f.AdSkipped:this.tN=!1;break;case Q.f.AdPaused:if(this.ZU){this.ZU=!1;break}this.XU=1,this.YU=1}}pause(t,i){if(this.tN=i,i)this.ZU=!0;else{if(this.VN)return;this.YU=t}this.VN=!0,this.WN.next(1)}resume(){this.VN&&(this.VN=!1,this.tN?this.WN.next(this.XU):this.WN.next(this.YU))}};ii=(0,e.gn)([(0,Zt.b2)(),(0,Zt.Yn)(Zt.Fw.ContainerScoped)],ii);var si=s(3662);const ei=["com.accuweather.android"],hi=.05*z.s_;class ni extends g._{constructor(t,i,s,e,h,n,o,r){super(),this.mediator=t,this._appSettings=i,this.Lg=s,this.Oa=e,this.cs=h,this.Ta=n,this.ls=o,this.pP=r,this.tz=.01,this.iz=.5,this.sz=.5,this.ez=!1,this.hz=!1,this.nz=!1,this.oz=!1,this.rz=N.It.PRE_ROLL_SLOT,this.az=[],this.lz=[],this.dz=[],this.cz=new F.X(!1),this.uz=new It.t,this.vz=0,this.pz=!1,this.gz=2e3,this.yz=0,this.mz=!1,this.bz=!1,this.YF=!1,this.oF=!1,this._z=!1,this.wB=!1,this.xz=!1,this.fz=!0,this.Cz=!1,this.wz=!0,this.kz=[],this.Az=[],this.Pz=[],this.Iz=[],this.Tz={0:()=>{var t;return null===(t=this.KV)||void 0===t?void 0:t.togglePlay(this.wz)},1:()=>{var t;return null===(t=this.KV)||void 0===t?void 0:t.toggleMute(this.wz)},4:()=>{var t;return null===(t=this.KV)||void 0===t?void 0:t.increaseVolume(.1,this.wz)},5:()=>{var t;return null===(t=this.KV)||void 0===t?void 0:t.decreaseVolume(.1,this.wz)}},this.Ez=t=>{var i;const{playback:s,isFullscreenClose:e}=t;if(this.Mz&&(0,I.$K)(s)&&!e){const t=!s;null===(i=this.Mz)||void 0===i||i.setPlaybackPausedByUserInteraction(t)}},this.Bz=t=>{const{playback:i}=t;if(!(0,I.$K)(i))return;this.Ez(t);const{services:{EventsStorageService:s}}=this.mp;i?(s.emitAdPlay(),this.Cz=!1):(s.emitAdPause(),this.Cz=!0)},this.Vz=t=>{this._z=t,t&&(this.Lz(),this.Dz())},this.Oz=t=>{t&&this.KV&&!this.Cz&&setTimeout((()=>{this.KV.resumeWithoutUserInteraction(this.rz)}),hi)},this.Fz=()=>{this.Rz(this.Uz.clientWidth)?(0,it.cn)(this.Uz,"cnx-mod-no-height"):(0,it.IV)(this.Uz,"cnx-mod-no-height"),!this.bz&&this.Nz()&&(this.mediator.publish(this,"canStart"),this.mp.services.ResizeObserver.off(this.Uz,this.Fz))},this.$z=()=>{this.jz(1)},this.zz=()=>{this.jz(0)},this.Qz=new Wt(s),this.qz=(0,b.TF)(this.ls.sessionId,ti),this.Wz=(0,b.TF)(this.ls.sessionId,ii);const a=(0,b.AU)(f.w);this._i=a.userManagerService,this.bn=(0,b.TF)(this.ls.sessionId,"MonetizationService")}renderExperience(t,i,s,e){this.gA=t,this.mp=i,this.Uz=s,e&&e(),this.Gz(),this.mp.services.ViewabilityService.setViewableThreshold(this.yz),this.Jz(),this.mp.config.pageUrl.includes("blackenterprise.com")&&this.Kz(),this.Yz(),this.mp.services.ResizeObserver.on(this.Uz,this.Fz),this.Nz()?this.mediator.publish(this,"canStart"):this.KS()}start(){return(0,e.mG)(this,void 0,void 0,(function*(){this.bz=!0,yield this.Xz(),this.ls.playerDimensions={height:this.Zz.clientHeight,width:this.Zz.clientWidth},(0,it.cn)(this.Uz,d.sN.MainContainerFlex),this.tQ(),(0,it.Tp)(this.Zz),this.gA.disableAdsInBackground&&this.disableAdsInBackground(),this.iQ(),this.mp.config.isMobile||this.gA.soundMode!==n.zj.HOVER||this.sQ(),this.gA.isCloseButton&&this.eQ(),this.gA.displayAdCountdown&&(0,it.cn)(this.Zz,"cnx-ad-show-countdown"),this.gA.playbackMode===n.Fx.CLICK_TO_PLAY&&this.hQ(),this.mp.config.isMobile||this.kz.push(this.onReady().pipe((0,R.h)((t=>!!t)),Vt((()=>{this.nQ()})),(0,Lt.w)((()=>{var t;return null===(t=this.pP)||void 0===t?void 0:t.getShortcutsObservable()}))).subscribe((t=>this.oQ(t)))),this.Iz.push(this.qz.onToggleMute.subscribe((t=>{this.jz(t)})),this.Wz.onTogglePlay.subscribe((t=>{0===t?this.play(false):this.pause(false)})))}))}play(t){var i;null===(i=this.KV)||void 0===i||i.play()}pause(t){var i;null===(i=this.KV)||void 0===i||i.pause()}setVolume(t){this.rQ(t),this.aQ()}getSize(){return{width:this.Uz.clientWidth,height:this.Uz.clientHeight}}setSize(t,i){(0,Kt.ON)({width:t,height:i})||(0,it.T7)(this.Uz,{width:`${t}px`,height:`${i}px`})}updateDynamicCuePoints(t){this.lQ.updateDynamicCuePoints(t)}setCustomMacros(t){var i;this.mp.services.MacrosService.addExtraMacros(t),null===(i=this.KV)||void 0===i||i.setCustomMacros(t)}getMacroValue(t){return this.mp.services.MacrosService.getMacroValue(t)}isViewable(){return this.mp.services.ViewabilityService.check({element:this.Zz,threshold:this.tz})}setViewableThreshold(t){(0,k.nF)({message:"setViewableThreshold_usage",level:"Info",exception:this.mp.config.sdkVersion,sessionId:this.gA.sessionId},{throttle:1,shouldSendMaxLog:!1}),this.mp?this.mp.services.ViewabilityService.setViewableThreshold(t):this.yz=t}setAmpUserConsent(t){var i;null===(i=this._i)||void 0===i||i.setAmpUserConsent(t)}triggerDestroy(){this.mp.services.EventsStorageService.destroy(),this.mediator.publish(this,"destroy")}updateJsQueryTargeting(t){let i;t&&(i=(0,S.rM)(t)),(0,I.$K)(this.KV)?this.KV.updateJsQueryTargeting(i):this.gA.queryJsTargeting=(0,Yt.S1)(this.gA.queryJsTargeting,i)}removeJsQueryTargeting(t){(0,I.$K)(this.KV)?this.KV.removeJsQueryTargeting(t):this.gA.queryJsTargeting=(0,Yt.G_)(this.gA.queryJsTargeting,t)}disableAdvertising(){this.lQ.disableAdvertising()}enableAdvertising(){this.lQ.enableAdvertising()}disableAdsInBackground(){this.lQ.disableAdsInBackground()}enableAdsInBackground(){this.lQ.enableAdsInBackground()}enableFloatingMode(){this.Mz?this.Mz.enableFloatingMode():this.cQ().then((()=>{this.Mz.enableFloatingMode()})).catch((t=>{const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}))}disableFloatingMode(){var t;this.Mz&&(null===(t=this.Mz)||void 0===t||t.disableFloatingMode())}isFloatingModeEnabled(){var t,i;return null!==(i=null===(t=this.Mz)||void 0===t?void 0:t.isFloatingModeEnabled())&&void 0!==i&&i}setFloatingSettings(t){this.Mz?this.Mz.setFloatingSettings(t):this.cQ().then((()=>{this.Mz.setFloatingSettings(t)})).catch((t=>{const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"BaseExperience__floating_js_api_chunk_request",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}))}getFloatingSettings(){var t;return null===(t=this.Mz)||void 0===t?void 0:t.getFloatingSettings()}setLineItemMetadata(t,i){(0,I.$K)(this.KV)?this.KV.setLineItemMetadata(t,i):i({success:!1,errorReason:"Ad manager not initialized"})}startConnatixAuction(t){(0,I.$K)(this.KV)?this.KV.startConnatixAuction(t):t({success:!1})}onReady(){return this.cz.asObservable()}getApiConfig(){const t=structuredClone(this.gA.apiConfig);return delete t.settings._connatixInternals,t}getSessionDataConfig(){return{playerInstanceID:this.mp.config.appId}}destroy(){var t,i;(0,A.i)(this.kz),(0,A.i)(this.lz),(0,A.i)(this.Az),(0,A.i)(this.az),this.KV&&((0,A.i)(this.dz),this.uQ.unsubscribe(),this.KV.destroy()),this.lQ&&this.lQ.destroy(),this.Mz&&(this.Mz.destroy(!0),this.Mz=null,(0,A.i)(this.Pz)),(0,A.i)(this.Iz),null===(t=this.pP)||void 0===t||t.destroy(),null===(i=this.vQ)||void 0===i||i.disconnect()}Gz(){}pQ(t,i,s){this.mp.services.EventsStorageService.emitAdImpression(t,i,s)}yQ(t){this.mp.services.EventsStorageService.emitAdComplete(t)}mQ(){}bQ(){}_Q(){}xQ(){}fQ(){}CQ(){}SQ(){}wQ(t){const i={state:t};this.mp.services.EventsStorageService.emitAdStateChange(i)}kQ(){const{clientWidth:t,clientHeight:i}=this.Zz,s={width:t,height:i};this.mp.services.EventsStorageService.emitPlayerResized(s)}AQ(){this.mp.services.EventsStorageService.emitOnEnterFullscreen()}PQ(){this.mp.services.EventsStorageService.emitOnExitFullscreen()}IQ(){this.mp.services.EventsStorageService.emitOnPlayerCollapsed()}TQ(t){this.mp.services.EventsStorageService.emitOnPlayerExpanded(t)}EQ(t,i){this.MQ(t),this.BQ(t),this.VQ(t,i),this.rz=t,this.LQ(t)}BQ(t){this.KV&&this.KV.adStateChange(t,this.rz)}VQ(t,i){this.lQ.onAdStateChange(t,{maxAdPodDuration:this.DQ.getMaxAdPodDuration(),maxAdSlotDuration:this.DQ.getMaxAdSlotDuration()})}MQ(t){this.DQ.setNewBreak(t)}LQ(t){this.wQ(Gt[t])}OQ(){var t;null===(t=this.KV)||void 0===t||t.contentChanged(),this.lQ.contentChanged()}FQ(){var t;null===(t=this.KV)||void 0===t||t.contentEnded()}ru(t){this.mediator.publish(this,l.Km.AdImpression,t.payload);const{adSourceData:i,customAdData:s,adType:e}=t.payload.payload;this.pQ(i,s,e)}RQ(){this.dz.push(this.KV.onVpaidEvent.subscribe((t=>{this.Wz.onAdEvent(t.type);const{services:{EventsStorageService:i}}=this.mp;switch(t.type){case Q.f.AdStarted:this.mediator.publish(this,l.Km.AdStarted,t.payload);break;case Q.f.AdImpression:this.ru(t);break;case Q.f.AdStopped:{if(this.mediator.publish(this,l.Km.AdStopped,t.payload),this.YF&&this.bQ(),!t.payload)return;const{adType:s}=t.payload.payload;this.yQ(s),i.emitAdStopped(s);break}case Q.f.AdError:{const{adType:s}=t.payload;this.mediator.publish(this,l.Km.AdError,t),i.emitAdError(s);break}case Q.f.AdSkipped:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdSkipped,t.payload),i.emitAdSkipped(s),this.yQ(s),this.YF&&this.bQ();break}case Q.f.AdPaused:{const{adType:s}=t.payload.payload;this.Oa.sessionPlaybackChanged.next({isPlaying:!1}),i.emitAdPaused(s),this.mediator.publish(this,l.Km.AdPause,t.payload);break}case Q.f.AdPlaying:{const{adType:s}=t.payload.payload;this.Oa.sessionPlaybackChanged.next({isPlaying:!0}),i.emitAdPlaying(s),this.mediator.publish(this,l.Km.AdPlay,t.payload);break}case Q.f.AdVideoFirstQuartile:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdCompleted25,t.payload),i.emitAdVideoFirstQuartile(s);break}case Q.f.AdVideoMidpoint:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdCompleted50,t.payload),i.emitAdVideoMidpoint(s);break}case Q.f.AdVideoThirdQuartile:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdCompleted75,t.payload),i.emitAdVideoThirdQuartile(s);break}case Q.f.AdVideoComplete:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdCompleted100,t.payload),i.emitAdVideoComplete(s);break}case Q.f.AdClickThru:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdClick,t.payload),i.emitAdClickThru(s);break}case Q.f.AdInteraction:case Q.f.AdUserAcceptInvitation:case Q.f.AdUserClose:case Q.f.AdUserMinimize:{const{adType:s}=t.payload.payload;i.emitAdInteraction(s);break}case Q.f.AdExpandedChange:{const{adType:s}=t.payload.payload;i.emitAdExpandedChange(s);break}case Q.f.AdVideoStart:{const{adSourceData:s,adType:e}=t.payload,{clientWidth:h,clientHeight:n}=this.Zz,o={duration:s&&s.length,mediaPlayerVolume:this.getVolume(),mediaPlayerDimensions:{width:h,height:n}};i.emitAdVideoStart(o,e);break}case Q.f.AdLoaded:{const{payload:s}=t.payload,{adType:e,adLoadedData:h}=s;this.mediator.publish(this,l.Km.AdLoaded,t.payload),(null==h?void 0:h.skipOffset)<0&&(h.skipOffset=void 0);const n=this.UQ(h);i.emitAdLoaded(n,e);break}case Q.f.AdVolumeChange:{const{adType:s}=t.payload.payload;this.mediator.publish(this,l.Km.AdVolumeChange,t.payload),i.emitAdVolumeChange(s);break}case Q.f.AdLog:}})),this.KV.onPrefetchStart.subscribe((()=>{this.lQ.onPrefetchStarted(),this.mediator.publish(this,l.Km.PrefetchStart)})),this.KV.onLinearUiComponentEvent.subscribe((t=>{t.type===Z.C.Close&&(this.mediator.publish(this,$t.CloseButtonClicked),this.HQ())})))}NQ(){this.dz.push(this.KV.onLinearEvent.subscribe((t=>{switch(t.type){case"showLinearEvent":this.lQ.onAdImpression(t.payload,O.k.LINEAR),this.$Q();break;case"hideLinearEvent":this.jQ(t.forced);break;case"pauseLinearEvent":this.lQ.onLinearAdPause();break;case"resumeLinearEvent":this.lQ.onLinearAdPlay();break;case"skipLinearEvent":{const t=!0;this.jQ(t);break}}})))}zQ(){this.dz.push(this.KV.onNonLinearEvent.subscribe((t=>{switch(t.type){case"showNonLinearEvent":this.lQ.onAdImpression(t.payload,O.k.NONLINEAR);break;case"hideNonLinearEvent":{const t=!1;this.lQ.onAdFinished(this.KV.nonLinearInImpression,O.k.NONLINEAR,t);break}}})))}$Q(){this.DQ.adStarted(),this.KV.showLinear(),(0,it.cn)(this.QQ,"cnx-hide-pinned-title-in-ad")}qQ(){this.KV.hideLinear(),(0,it.IV)(this.QQ,"cnx-hide-pinned-title-in-ad")}jQ(t=!1,i=this.Zz){var s,e,h,o;this.pP.processAdUserInteraction(t);let r=this.DQ.isInAdPod();t&&(r=!1,this.DQ.endPod()),this.lQ.onAdFinished(this.KV.linearInImpression,O.k.LINEAR,r),this.qQ(),this.gA.isCloseButton&&this.KV&&this.KV.firstLinearAdShown&&(this.gA.closeButtonMode!==n.vP.ON_HOVER_AFTER_FIRST_AD||(0,it.pv)(i,"cnx-close-hover")||((0,it.cn)(i,"cnx-close-hover"),null===(e=null===(s=this.JV)||void 0===s?void 0:s.updateCloseButtonMode)||void 0===e||e.call(s,!1,n.vP.ON_HOVER)),this.gA.floatingSettings.floatingCloseButtonMode!==n.vP.ON_HOVER_AFTER_FIRST_AD||(0,it.pv)(i,"cnx-close-float-hover")||((0,it.cn)(i,"cnx-close-float-hover"),null===(o=null===(h=this.JV)||void 0===h?void 0:h.updateCloseButtonMode)||void 0===o||o.call(h,!0,n.vP.ON_HOVER)))}WQ(t){this.KV.enterAdPodLoadingState(),this.DQ.enterPodTimeout((()=>{this.DQ.endPod(),t()}))}GQ(t){const i=(0,b.TF)(this.ls.sessionId,"MonetizationService");this.az.push(i.onLineItemsReceived.subscribe((t=>{const i=t.get(this.gA.playerId);(0,C.BZ)((0,Jt.mn)(i,O.k.LINEAR))||this.lQ.onLinearNoDemand()}))),this.U(pt,this.lQ,(()=>{var t;null===(t=this.KV)||void 0===t||t.enableAds(O.k.NONLINEAR)})),this.U(vt,this.lQ,(t=>{var i;const s=t.payload;null===(i=this.KV)||void 0===i||i.disableAds(O.k.NONLINEAR,s)})),this.U(rt,this.lQ,(()=>{var t;null===(t=this.KV)||void 0===t||t.enableAds(O.k.LINEAR)})),this.U(at,this.lQ,(t=>{var i;const s=t.payload;null===(i=this.KV)||void 0===i||i.disableAds(O.k.LINEAR,s)})),this.U(lt,this.lQ,(()=>{var t;null===(t=this.KV)||void 0===t||t.stopAd("forceStopAdSlot")})),this.U(dt,this.lQ,(()=>{if(this.KV)if(this.KV.linearInImpression)this.DQ.endPod(),this.KV.stopAd("forceStopAdPod");else{const t=!0;this.jQ(t)}})),this.U(gt,this.lQ,(()=>{var t;null===(t=this.KV)||void 0===t||t.disableAdvertising()})),this.U(yt,this.lQ,(()=>{var t;null===(t=this.KV)||void 0===t||t.enableAdvertising()})),this.U(ut,this.lQ,(t=>{this.DQ.updatePodRemainingTime(t.payload.remainingTime)})),this.U(_t,this.lQ,(t=>{var i;const s=t.payload.linearity;null===(i=this.KV)||void 0===i||i.canPrefetchAds(s)})),this.U(ct,this.lQ,(i=>{var s,e,h,n;this.mediator.publish(this,l.Km.AdOpportunity,i);const o=i.payload.adBreakType,r=null===(s=this.KV)||void 0===s?void 0:s.getLinearAdContainerWidth(),a=this.JQ(),d=(0,I.$K)(r)?r:this.Zz.clientWidth,{adTrackingRequestMeta:c,isFirstAdOpportunityElapsedTimeTracked:u,isFirstOpportunityTracked:p,bundleLoadTimestamp:g,prefetchDistance:y,sessionId:m}=this.ls,b=null===(e=x.k.pageInsights)||void 0===e?void 0:e.insights;y&&((0,k.FH)({message:`Prefetch_success_distance_${y}`,level:"Info",sessionId:m},{pacing:5,throttle:1}),this.ls.prefetchDistance=null);const _={1:`${a.id}`,2:v.f.getCidForElkTracking()};u||(_[3]=`${(0,P.qd)(g)}`,this.ls.isFirstAdOpportunityElapsedTimeTracked=!0),p||(_[4]=`${t}`,_[5]=`${null===(h=this._i)||void 0===h?void 0:h.isIvt}`,this.ls.isFirstOpportunityTracked=!0),this.Oa.adOpportunity.next(new Ot.x({adRollType:o,playerWidth:d,dynamicElkFieldsMap:_,metadata:c,pageInsightIndexList:b,liveIntentAb:B()})),null===(n=this.KV)||void 0===n||n.newLinearAdOpportunity(a)}))}KQ(){const{services:{ViewabilityService:t,PageFocusService:i},config:{os:{os:s}}}=this.mp;t.on(this.Zz,this.Vz,{threshold:this.iz,callbackDelay:this.gz}),t.on(this.Zz,(t=>{var i;t&&(null===(i=this.Mz)||void 0===i||i.setSessionInView()),this.Ta.mediaViewabilityChanged.next({isInView:t})}),{threshold:this.sz}),t.on(this.Zz,((t,i)=>this.YQ(t,i)),{threshold:this.tz,fireOnInAppBackgroundChange:!0}),t.subscribe(l.jJ.OmidViewabilityThreshold,(t=>{this.mediator.publish(this,l.jJ.OmidViewabilityThreshold,{payload:{threshold:t}})})),s===Ht.M.Ios&&i.on(this.Oz)}YQ(t,i=!1){var s;this.lQ.setToggleAdsReason({isAppBackgrounded:i}),this.mp.config.isInApp&&(this.ls.isPageInFocus=!i,i?(this.Wz.pause(null===(s=this.JV)||void 0===s?void 0:s.getPlaybackIntention(),this.KV.linearInImpression),this.qz.mute(this.getVolume())):(this.qz.unmute(),this.Wz.resume())),this.YF=t,this.mp.config.isInApp&&this.oF&&!t&&(this.YF=!0),this.mediator.publish(this,l.Km.IsViewable,{payload:this.YF}),this.lQ.viewabilityStateChanged(this.Mz?this.Mz.checkFloatingViewability(this.YF):this.YF,this.DQ.isInAdPod(),this.DQ.isInPodTimeout()),this.Oa.sessionViewabilityChanged.next({isInView:this.YF})}Au(){var t,i,s;const e=this.Zz.clientWidth,h=this.Zz.clientHeight;this.ls.playerDimensions={height:h,width:e};const n=this.oF?"fullscreen":"normal";null===(t=this.KV)||void 0===t||t.resizeAd(e,h,n,this.rz);try{null===(i=this.lQ)||void 0===i||i.onResize(e,h)}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"BaseExperience_onResize_player",callStack:s,exception:i,level:"Warn",sessionId:this.gA.sessionId})}null===(s=this.KV)||void 0===s||s.setPlayerOrientation(this.ZQ(e,h)),this.tq(),setTimeout((()=>{this.mediator.publish(this,l.Km.SizeChanged,{payload:{width:e,height:h}}),this.iq()}))}Rz(t){return t<this.vz}ZQ(t,i){return t<i?1:t>i?2:0}iq(){this.oF||this.kQ()}sq(){var t;this.oF=!0,this.mp.services.InteractionService.disableScrollEvent(),this.AQ(),null===(t=this.KV)||void 0===t||t.setVastViewMode("fullscreen")}eq(){var t;this.oF=!1,this.mp.services.InteractionService.enableScrollEvent(),this.PQ(),null===(t=this.KV)||void 0===t||t.setVastViewMode("normal")}hq(){const t=`<cnx class='${d.oV}'></cnx>`,i=this.mp.services.GlobalDomUtilsService.createElementByString(t);return this.nq(i),i}nq(t){(0,it.T7)(t,{"padding-bottom":`${this.oq()}%`})}oq(){return this.gA.playerSize.ratioHeight/this.gA.playerSize.ratioWidth*100}rq(t){}aq(t){const i=this.Tz[t];i&&i()}lq(){this.Pz.push(this.Mz.onFloatingEnterStart.subscribe((()=>{var t,i,s;this.mediator.publish(this,l.Zr.PlayerFloatChanged,{payload:"float"}),this.mediator.publish(this,l.Zr.FloatingEnterStart,{payload:!0}),null===(t=this.KV)||void 0===t||t.inFloatingChanged(!0),null===(s=null===(i=this.JV)||void 0===i?void 0:i.updateFloatingState)||void 0===s||s.call(i,!0)})),this.Mz.onFloatingExitStart.subscribe((()=>{var t,i;this.mediator.publish(this,l.Zr.FloatingExitStart,{payload:!0}),null===(i=null===(t=this.JV)||void 0===t?void 0:t.updateFloatingState)||void 0===i||i.call(t,!1)})),this.Mz.onFloatingExitStop.subscribe((()=>{var t,i,s;this.mediator.publish(this,l.Zr.PlayerFloatChanged,{payload:"embed"}),this.mediator.publish(this,l.Zr.FloatingExitStop,{payload:!0}),null===(t=this.KV)||void 0===t||t.inFloatingChanged(!1),null===(s=null===(i=this.JV)||void 0===i?void 0:i.updateFloatingState)||void 0===s||s.call(i,!1)})),this.Mz.onFloatingEnterStop.subscribe((()=>{this.mediator.publish(this,l.Zr.FloatingEnterStop,{payload:!0}),this.YQ(!0)})))}rQ(t){var i;null===(i=this.KV)||void 0===i||i.setLinearVolume(t)}sQ(){var t;this.dq(),null===(t=this.KV)||void 0===t||t.onLinearExperienceEvent.subscribe((t=>{var i;"userInteraction"===t.type&&(null===(i=t.payload)||void 0===i?void 0:i.volume)&&this.aQ()}))}cq(t){this.U("userInteraction",t,(({payload:{volume:t}})=>{t&&this.aQ()}))}cu(t){this.mediator.publish(this,l.Km.VolumeChanged,{payload:t}),this.mp.services.EventsStorageService.emitVolumeChange(t)}eQ(t=this.Zz){if(this.gA.isCloseButton){switch(this.gA.closeButtonMode){case n.vP.ALWAYS_ON:(0,it.cn)(t,"cnx-close-on");break;case n.vP.PLAYER_CLOSE_BUTTON_MODE_OFF:(0,it.cn)(t,"cnx-close-off");break;case n.vP.ON_HOVER:(0,it.cn)(t,"cnx-close-hover")}switch(this.gA.floatingSettings.floatingCloseButtonMode){case n.vP.ALWAYS_ON:(0,it.cn)(t,"cnx-close-float-on");break;case n.vP.PLAYER_CLOSE_BUTTON_MODE_OFF:(0,it.cn)(t,"cnx-close-float-off");break;case n.vP.ON_HOVER:(0,it.cn)(t,"cnx-close-float-hover")}}}UQ(t){const{skipOffset:i}=t;return{isAutoPlay:this.gA.playbackMode===n.Fx.AUTOPLAY,skipOffset:i,isSkippable:(0,I.hj)(i)}}uq(){this.xz=!0,this.wB=!0,this.vq(),this.Lz(),this.pq()}tq(){this.gq.updateWidth(this.Zz.clientWidth)}hQ(){(0,it.cn)(this.Uz,"cnx-click-to-play-thumbnail")}nQ(){}yq(){this.mediator.publish(this,"rendered"),this.cz.next(!0)}mq(){return this.gA.floatingSettings.floatingMode===n.v3.ALWAYS?this.Uz:this.Zz}cQ(){return(0,e.mG)(this,void 0,void 0,(function*(){if(this.Mz)return;const{FloatingModule:t}=yield(0,si.m)(),{services:{GlobalDomUtilsService:i,ResizeObserver:s,ViewabilityService:e},config:{device:h}}=this.mp;this.Mz=new t(this.gA.floatingSettings,i,s,e,this.mq(),h,this.ls,this.bq),this.gA.floatingSettings.floatingMode===n.v3.ALWAYS?this._q():(this.kQ(),this.lq()),this.Mz.start()}))}xq(){return(0,e.mG)(this,void 0,void 0,(function*(){if(this.gA.floatingSettings.hasFloatingCapability||this.gA.preloadFloating)try{yield this.cQ()}catch(t){const i=this.gA.floatingSettings.floatingMode===n.v3.ALWAYS,{message:s,stack:e}=(0,S.W$)(t);if((0,k.nF)({message:"BaseExperience__floating_chunk_request",exception:s,callStack:e,level:i?"Critical":"Info",sessionId:this.gA.sessionId}),i)throw t}}))}Xz(){return(0,e.mG)(this,void 0,void 0,(function*(){this.fq(),this.lQ=this.Cq(),this.U(xt,this.lQ,(t=>{var i;const{linearity:s,prefetchType:e}=t.payload;null===(i=this.KV)||void 0===i||i.startPrefetchForLinearity(s,e)})),yield this.xq()}))}Sq(){var t,i,s,h,n,o;return(0,e.mG)(this,void 0,void 0,(function*(){this.KV=yield this.wq(),this.kq(),null===(t=this.KV)||void 0===t||t.onLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,l.Km.ImpressionPrice,{payload:t})})),null===(i=this.KV)||void 0===i||i.onNonLinearImpressionPrice.subscribe((t=>{this.mediator.publish(this,l.Km.ImpressionPrice,{payload:t})})),null===(s=this.KV)||void 0===s||s.onLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,l.Km.ImpressionRevenue,{payload:t})})),null===(h=this.KV)||void 0===h||h.onNonLinearImpressionRevenue.subscribe((t=>{this.mediator.publish(this,l.Km.ImpressionRevenue,{payload:t})})),null===(n=this.KV)||void 0===n||n.onLinearExperienceEvent.subscribe((t=>{"userInteraction"===t.type&&this.Bz(t.payload)}));const e=()=>{this.Aq(),this.wB=!0,this.Cz=!1,this.Lz(),this.uQ.unsubscribe()};this.uQ=null===(o=this.KV)||void 0===o?void 0:o.onAdsEnable.subscribe((()=>{e()})),this.lQ.setAdHandler(this.KV),this.zk()}))}Aq(){var t,i,s,e;if(this.ls.isPlayerStartTracked)return;this.ls.isPlayerStartTracked=!0,(0,I.$K)(this.ls.cachedGdprConsentMode)||(this.ls.cachedGdprConsentMode=null===(t=this._i)||void 0===t?void 0:t.gdprConsentMode);const{cachedGdprConsentMode:h,contentTrackingRequestMeta:n,bundleLoadTimestamp:o}=this.ls;this.Oa.adsEnabled.next(new Rt.b({metadata:n,pageInsightIndexList:null===(i=x.k.pageInsights)||void 0===i?void 0:i.insights,customClientEncryptedPrice:null===(e=null===(s=this.mp.services.StandaloneService.bestAd)||void 0===s?void 0:s.bid)||void 0===e?void 0:e.customClientEncryptedPrice,initialGdprConsentMode:h,dynamicElkFieldsMap:{1:v.f.getCidForElkTracking(),2:`${(0,P.qd)(o)}`},liveIntentAb:B()}))}zk(){this.Az.push(this.cs.adBid.subscribe((t=>{const{bidTracking:i,impressionTrackerList:s}=t,{publisherLineItemId:e,advertiserLineItemId:h}=i;setTimeout((()=>{this.mediator.publish(this,l.Km.Bid,{payload:{publisherLineItemId:e,advertiserLineItemId:h,impressionTrackers:s}})}),0)})))}kq(){this.RQ(),this.NQ(),this.zQ()}JQ(){return(0,I.$K)(this.KV)?this.KV.getNewLinearAdOpportunity():new Nt.q}Lz(){this._z&&this.wB&&this.mediator.publish(this,"enter_view")}pq(){this.fz?(this.Dz(),this.fz=!1):(0,S.ld)((()=>this.Dz()),this.gz)}Dz(){if(this.pz&&this._z&&this.xz){const{mediaId:t,insights:i}=this.ls.currentMediaMetadata,s=this.ls.contentTrackingRequestMeta;this.Ta.mediaView.next(new Ft.N({metadata:s,mediaId:t,insightIndexList:i})),this.pz=!1}}tQ(){this.mp.services.ResizeObserver.on(this.Zz,(()=>{this.Au()}))}oQ(t){var i;(null===(i=this.KV)||void 0===i?void 0:i.linearInImpression)?this.aq(t.action):this.rq(t.action)}_q(){this.Pz.push(this.Mz.onFloatingEnterStop.subscribe((()=>{var t;null===(t=this.KV)||void 0===t||t.inFloatingChanged(!0),this.mp.services.ViewabilityService.triggerRecheck(this.Zz)})))}jz(t){this.getVolume()!==t&&this.rQ(t)}dq(){this.mz=!0,this.Zz.addEventListener("mouseover",this.$z),this.Zz.addEventListener("mouseout",this.zz)}aQ(){this.mz&&(this.mz=!1,this.Zz.removeEventListener("mouseover",this.$z),this.Zz.removeEventListener("mouseout",this.zz))}fq(){this.gq=new qt(this.Zz,this.Pq,this.Iq,this.mp.config.device),this.tq()}Nz(){const{clientWidth:t,clientHeight:i}=this.Uz;return!(0,Kt.ON)({width:t,height:i})&&!this.Rz(t)||((0,it.cn)(this.Uz,"cnx-mod-no-height"),this.Tq())}vq(){var t,i,s,e;if(this.ls.isPlayerStartTracked)return;this.ls.isPlayerStartTracked=!0,(0,I.$K)(this.ls.cachedGdprConsentMode)||(this.ls.cachedGdprConsentMode=null===(t=this._i)||void 0===t?void 0:t.gdprConsentMode);const{cachedGdprConsentMode:h,contentTrackingRequestMeta:n,bundleLoadTimestamp:o}=this.ls,{floorPricesStrategyType:r,isAyControlGroup:a}=this.bn;this.Oa.contentStart.next(new Rt.b({metadata:n,pageInsightIndexList:null===(i=x.k.pageInsights)||void 0===i?void 0:i.insights,customClientEncryptedPrice:null===(e=null===(s=this.mp.services.StandaloneService.bestAd)||void 0===s?void 0:s.bid)||void 0===e?void 0:e.customClientEncryptedPrice,initialGdprConsentMode:h,dynamicElkFieldsMap:{1:v.f.getCidForElkTracking(),2:`${(0,P.qd)(o)}`},liveIntentAb:B(),floorPricesStrategyType:r,isAyControlGroup:a}))}Tq(){return ei.includes(this.mp.config.bundleID)}Eq(t){try{const{display:i,width:s,height:e,flex:h,maxWidth:n,minWidth:o}=this.mp.services.GlobalDomUtilsService.getComputedStyle(t),{width:r,height:a}=t.getBoundingClientRect(),l={display:i,compWidth:s,boundWidth:r,compHeight:e,boundHeight:a,flex:h,maxWidth:n,minWidth:o};return{type:t.nodeName,styles:JSON.stringify(l)}}catch(t){return{err:"BaseExperience_getElementInfo_error"}}}KS(){if(!(0,S.Vm)([95,5]))return;const t={parent:this.Eq(this.Uz.parentElement),main:this.Eq(this.Uz)};(0,k.nF)({message:"BaseExperience_invalid_dimensions",level:"Info",exception:JSON.stringify(t),sessionId:this.gA.sessionId})}Yz(){const t=(0,b.TF)(this.mp.config.sessionId,Xt.U);this.DQ=new zt(this.gA.adBreaks,t,this.gA.preRollBreak,this.gA.postRollBreak)}Kz(){this.vQ=new MutationObserver((t=>{var i,s;try{for(const e of t)if("attributes"===e.type&&e.attributeName===W){const{width:t,height:e}=this.ls.playerDimensions,{currentMediaMetadata:{mediaId:h,sentimentAnalysis:n},lineItemAbTest:o,videoPlacement:r,adTrackingRequestMeta:a,cachedGdprConsentMode:l,iasSegmentCodes:d}=this.ls;this.cs.adImpression.next(new Dt.Q({publisherLineItemId:G,advertiserLineItemId:G,requestNumber:1,isUserSynced:!1,timeSpentMilliseconds:0,isInExplorationMode:!1,adMediaFileWidth:0,adMediaFileHeight:0,adSourceType:0,vastMediaType:"video/mp4",initAdToAdLoadedTimeMilliseconds:0,startAdToAdImpressionTimeMilliseconds:0,declaredDurationSeconds:0,detectedDurationSeconds:0,bidElapsedTimeSeconds:0,hasAdSkip:!1,adRollType:2,metadata:a,initialGdprConsentMode:l,insightIndexList:null===(i=x.k.pageInsights)||void 0===i?void 0:i.insights,playerWidth:t,playerHeight:e,mediaId:h,pageInsightIndexList:null===(s=x.k.pageInsights)||void 0===s?void 0:s.insights,sentimentAnalysis:n,lineItemAbTest:o,videoPlacement:r,iasSegmentCodeList:d}))}}catch(t){this.vQ.disconnect();const{message:i,stack:s}=(0,S.W$)(t);(0,k.FH)({message:"Nonlinear_Intrusion_Measurement_Fail",callStack:s,exception:i,level:"Info"})}})),this.vQ.observe(this.Zz,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[W]})}iQ(){return(0,e.mG)(this,void 0,void 0,(function*(){this.az.push(this.bn.onLineItemsReceived.subscribe((t=>(0,e.mG)(this,void 0,void 0,(function*(){if((0,I.$K)(this.KV))return;const i=t.get(this.gA.playerId);if((0,C.BZ)(i))try{yield this.Sq(),this.uz.next()}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.FH)({message:"BaseExperience__initAdHandler",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}this.gA.disableAdvertising||c._.isBannerBlocked?this.lQ.adBlockerStatusChange(c._.isBannerBlocked):this.mp.config.isOVPDomain?this.lz.push(c._.onAdBlockerDetected().subscribe((t=>{this.lQ.adBlockerStatusChange(t)}))):this.lQ.adBlockerStatusChange(c._.isBannerBlocked);try{this.GQ(i.length)}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.FH)({message:"BaseExperience_initAdsControllerNew",exception:i,callStack:s,level:"Info",sessionId:this.gA.sessionId})}c._.isBannerBlocked||this.gA.isServerlessMode||c._.detectUsingScript().then((t=>{t&&(this.Oa.sessionAdBlocked.next(new Ut.C({detectionType:Ut.j.NETWORK,metadata:this.ls.adTrackingRequestMeta,dynamicElkFieldsMap:{1:v.f.getCidForElkTracking()}})),this.lQ.disableAdvertising())}))})))))}))}}class oi{constructor(t,i,s=10,e=2,n=[]){this.Mq=t,this.Bq=i,this.Vq=s,this.Lq=e,this.Dq=n,this.eO=[],this.Oq=[],this.Fq=!1,this.Uq=0,this.Hq=null,this.$q=new h.x,this.kF=new h.x,this.Sy=new Map,this.Vq<1&&(this.Vq=1),this.Lq<1&&(this.Lq=1);const o=(0,b.AU)(ft.f);this.jq=new Ct.B(o,e*z.s_),this.Sy.set(this.jq,[this.jq.onTimeElapsed.subscribe((()=>{this.zq()}))])}get onExperienceCuePointsControllerStateChange(){return this.$q.asObservable()}get onCanPrefetchAds(){return this.kF.asObservable()}canEnableAds(t){return this.Fq||t!==N.It.MID_ROLL_SLOT?{enableAds:!0,disableReason:0}:{enableAds:!1,disableReason:0}}getDurationUntilNextOpportunity(){let t;return this.Oq.some((i=>{if(this.Uq<=i)return t=i,!0})),t?t-this.Uq:0}updateDynamicCuePoints(t){this.Dq=t,this.qq()}contentTimeUpdate(t){t&&(this.Uq=t,this.Wq(),this.Gq())}onAdImpression(){this.Fq=!1,this.Jq()}onAdFinished(t,i){i||(this.Kq=void 0,this.$q.next({inCuePoint:!1}))}onNewMediaVideo(t,i){this.Hq=t,this.Kq=void 0,this.Yq=void 0,this.Fq=!1,((0,C.BZ)(i)||this.Mq)&&(this.eO=null==i?void 0:i.map((t=>t.timeStamp)).sort(((t,i)=>t-i)),this.qq())}setAdHandler(t){this.KV=t}Gq(){this.Bq||this.Oq.forEach(((t,i)=>{let s=t-this.Vq;i-1>=0&&this.Oq[i]-this.Oq[i-1]<=this.Vq&&(s=this.Oq[i-1]),(0,Kt.mg)(this.Uq,s,t)&&this.Kq!==i&&(this.Kq=i,this.kF.next())}))}zq(){this.Kq=void 0,this.Fq=!1,this.$q.next({inCuePoint:!1,cuePointTimedOut:!0}),this.Jq()}Jq(){this.jq.reset(),this.jq.stop()}Wq(){var t,i;let s,e=!1;if(!(this.Oq.length<=0)&&(this.Oq.forEach(((t,i)=>{if((0,Kt.mg)(this.Uq,t,t+this.Lq))return e=!0,void(s=i)})),e&&void 0!==s&&this.Yq!==s)){if(this.Yq=s,!(null===(t=this.KV)||void 0===t?void 0:t.hasAdsEligibleForFill())&&!this.Bq)return void(0,k.nF)({message:"ElementsCuePointsController_cuepoint_not_filled",level:"Info",sessionId:null===(i=this.KV)||void 0===i?void 0:i.sessionId},{pacing:100});this.Fq=!0,this.$q.next({inCuePoint:!0}),this.jq.start()}}Xq(t){return null==t?void 0:t.filter((t=>t>=0&&t<=100)).sort(((t,i)=>t-i)).map((t=>this.Hq*t/100))}qq(){this.Oq=(0,C.BZ)(this.Dq)?this.Xq(this.Dq):this.eO,this.Yq=void 0}}class ri{constructor(t,i){this.Zq=t,this.tW=i,this.iW=!1,this.PF={inTimeout:!1},this.sW=!1,this.eW=new h.x,this.Li=[],this.hW=!1}get onExperienceTimeoutControllerStateChange(){return this.eW.asObservable()}disableAdsInBackground(){this.hW=!0}enableAdsInBackground(){this.hW=!1}init(){const t=(0,b.AU)(ft.f);this.nW=new Ct.B(t,this.Zq),this.Li.push(this.nW.onTimeElapsed.subscribe((()=>{this.iW||(this.iW=!0),this.PF.inTimeout=!1,this.sW=!0,this.eW.next()})))}canEnableAds(t,i){const s=t===N.It.MID_ROLL_SLOT,e=this.PF.inTimeout;return s&&e&&i||s&&!i&&this.hW?{enableAds:!1,disableReason:1}:{enableAds:!0,disableReason:0}}startAds(t,i){this.oW(t,i)}getAdBreakDuration(t){const i=this.rW(t);return 1===i?this.Zq:2===i?this.tW:0}getDurationUntilNextOpportunity(){return this.nW.timeRemaining/z.s_}onAdImpression(t,i){t!==N.It.MID_ROLL_SLOT||this.iW||(this.iW=!0),this.aW=!i}onAdFinished(t,i,s){this.sW=!1,this.iW&&!this.aW&&s&&!i&&this.oW(t,s)}viewabilityStateChanged(t,i,s){s||this.oW(t,i)}onAdStateChange(t){t!==N.It.MID_ROLL_SLOT&&(this.iW=!1),this.sW=!1}contentPlaybackStateChanged(t){t?this.nW.start():this.nW.stop()}contentChanged(t,i){this.PF.inTimeout=!1,this.nW.stop(),this.iW=!1,this.sW=!1,this.oW(t,i)}disable(){this.nW.reset(),this.nW.disable()}destroy(){(0,A.i)(this.Li),this.nW.disable()}oW(t,i){if(t===N.It.MID_ROLL_SLOT&&!this.PF.inTimeout&&!this.sW){const t=this.rW(i);1===t?this.lW():2===t&&this.dW(),this.eW.next()}}dW(){this.PF.inTimeout=!0,this.nW.reset(this.tW)}lW(){this.PF.inTimeout=!0,this.nW.reset(this.Zq)}rW(t){return!this.iW&&this.Zq?1:this.iW&&this.tW&&t?2:0}}class ai{constructor(t){this.rF=t,this.PF={limitAdsOnMidRoll:!1,adContentDurationRatioElapsed:!1,stayNextButtonsDisplayed:!1},this.AF=new h.x,this.kF=new h.x,this.Li=[],this.cW(),this.uW(),this.vW=this.pW}get onExperienceControllerStateChange(){return this.AF.asObservable()}get onCanPrefetchAds(){return this.kF.asObservable()}get isAdvertisingDisabledForCurrentVideo(){return this.PF.adContentDurationRatioElapsed||this.PF.stayNextButtonsDisplayed}start(){this.PF.limitAdsOnMidRoll=!0,this.pW.init()}canEnableAds(t,i){if(this.PF.adContentDurationRatioElapsed)return{enableAds:!1,disableReason:5};if(this.PF.stayNextButtonsDisplayed)return{enableAds:!1,disableReason:6};const s=this.vW.canEnableAds(t,i);return s.enableAds?t===N.It.MID_ROLL_SLOT&&this.PF.limitAdsOnMidRoll?{enableAds:!1,disableReason:0}:{enableAds:!0,disableReason:0}:s}onContentAdDurationElapsed(){this.PF.adContentDurationRatioElapsed=!0}onStayNextButtonsDisplayed(){this.PF.stayNextButtonsDisplayed=!0}onContentAdDurationReset(){this.PF.adContentDurationRatioElapsed=!1,this.PF.stayNextButtonsDisplayed=!1}onStayButtonPress(){this.PF.stayNextButtonsDisplayed=!1}startAds(t,i){var s,e;null===(e=(s=this.vW).startAds)||void 0===e||e.call(s,t,i)}getAdBreakDuration(t){var i,s;return null===(s=(i=this.vW).getAdBreakDuration)||void 0===s?void 0:s.call(i,t)}getDurationUntilNextOpportunity(){return this.vW.getDurationUntilNextOpportunity()}updateDynamicCuePoints(t){var i,s;Array.isArray(this.rF.cuePointsSettings.dynamicCuePoints)&&(null===(s=(i=this.vW).updateDynamicCuePoints)||void 0===s||s.call(i,t))}onAdImpression(t,i){this.vW.onAdImpression(t,i)}onAdFinished(t,i,s){var e,h;null===(h=(e=this.vW).onAdFinished)||void 0===h||h.call(e,t,i,s)}viewabilityStateChanged(t,i,s){var e,h;null===(h=(e=this.vW).viewabilityStateChanged)||void 0===h||h.call(e,t,i,s)}onAdStateChange(t,i,s){var e,h;this.gW(t,i),s||null===(h=(e=this.vW).onAdStateChange)||void 0===h||h.call(e,t)}onContentDurationChanged(t,i){this.gW(t,i)}contentPlaybackStateChanged(t){var i,s;null===(s=(i=this.vW).contentPlaybackStateChanged)||void 0===s||s.call(i,t)}contentChanged(t,i){var s,e;this.PF.limitAdsOnMidRoll=!0,null===(e=(s=this.vW).contentChanged)||void 0===e||e.call(s,t,i)}onNewMediaVideo(t,i){var s,e;const h=Array.isArray(this.rF.cuePointsSettings.dynamicCuePoints);(0,C.BZ)(i)||h?(this.vW=this.yW,null===(e=(s=this.vW).onNewMediaVideo)||void 0===e||e.call(s,t,i),this.pW.disable()):this.vW=this.pW}contentTimeUpdate(t){var i,s;null===(s=(i=this.vW).contentTimeUpdate)||void 0===s||s.call(i,t)}destroy(){var t,i;(0,A.i)(this.Li),null===(i=(t=this.vW).destroy)||void 0===i||i.call(t)}setAdHandler(t){this.yW.setAdHandler(t)}disableAdsInBackground(){this.pW.disableAdsInBackground()}enableAdsInBackground(){this.pW.enableAdsInBackground()}cW(){this.pW=new ri(this.rF.minTimeBeforeAdBreak,this.rF.timeBetweenAds),this.Li.push(this.pW.onExperienceTimeoutControllerStateChange.subscribe((()=>{this.AF.next()})))}gW(t,i){const s=this.PF.limitAdsOnMidRoll;this.bW(t,i),s!==this.PF.limitAdsOnMidRoll&&this.AF.next()}uW(){const{cuePointsPrefetchTime:t,cuePointsTimeout:i,disablePrefetch:s,dynamicCuePoints:e}=this.rF.cuePointsSettings,h=Array.isArray(e);this.yW=new oi(h,!!s,t,i,e),this.Li.push(this.yW.onExperienceCuePointsControllerStateChange.subscribe((t=>{this.AF.next(t)})),this.yW.onCanPrefetchAds.subscribe((()=>{this.kF.next()})))}bW(t,i){this.PF.limitAdsOnMidRoll=this.rF.midRollOnlyOnLongContent&&t===N.It.MID_ROLL_SLOT&&(!i||i<480)}}class li{constructor(t){this._W=t,this.PF={inTimeoutBetweenNonLinears:!1,inTimeoutBetweenLinearAndNonLinear:!1},this.AF=new h.x,this.Li=[]}get onExperienceControllerStateChange(){return this.AF.asObservable()}start(){const t=(0,b.AU)(ft.f);this.xW=new Ct.B(t,this._W.timeSecondsBetweenNonlinear*z.s_),this.fW=new Ct.B(t,this._W.timeSecondsBetweenLinearAndNonlinear*z.s_),this.Li.push(this.xW.onTimeElapsed.subscribe((()=>{this.PF.inTimeoutBetweenNonLinears=!1,this.AF.next()})),this.fW.onTimeElapsed.subscribe((()=>{this.PF.inTimeoutBetweenLinearAndNonLinear=!1,this.AF.next()})))}canEnableAds(){return!Object.keys(this.PF).some((t=>this.PF[t]))}onAdFinished(){this._W.timeSecondsBetweenNonlinear&&(this.PF.inTimeoutBetweenNonLinears=!0,this.xW.reset(),this.xW.start())}onLinearAdFinished(){this._W.timeSecondsBetweenLinearAndNonlinear&&(this.PF.inTimeoutBetweenLinearAndNonLinear=!0,this.fW.reset(),this.fW.start())}destroy(){var t,i;(0,A.i)(this.Li),null===(t=this.xW)||void 0===t||t.disable(),null===(i=this.fW)||void 0===i||i.disable()}}const di={xl:720,lg:320,md:204,sm:142,xs:0},ci={[Qt.Y.DESKTOP]:{xl:468,lg:388,md:248,sm:142,xs:0},[Qt.Y.TABLET]:Object.assign({},di),[Qt.Y.SMARTPHONE]:Object.assign({},di)},ui={xl:500,lg:288,md:212,sm:143,xs:80},vi={xl:720,lg:320,md:204,sm:142,xs:0},pi={[Qt.Y.DESKTOP]:{xl:468,lg:388,md:248,sm:142,xs:0},[Qt.Y.TABLET]:Object.assign({},vi),[Qt.Y.SMARTPHONE]:Object.assign({},vi)},gi=176,yi=160,mi=144,bi=112,_i={xl:vi.xl+gi,lg:vi.lg+yi,md:vi.md+mi,sm:vi.sm+bi},xi={[Qt.Y.DESKTOP]:{xl:468+gi,lg:388+yi,md:248+mi,sm:142+bi,xs:0},[Qt.Y.TABLET]:Object.assign({},_i),[Qt.Y.SMARTPHONE]:Object.assign({},_i)},fi={lg:320,md:204,sm:0},Ci={[Qt.Y.DESKTOP]:{xl:468,lg:388,md:248,sm:0},[Qt.Y.TABLET]:Object.assign({},fi),[Qt.Y.SMARTPHONE]:Object.assign({},fi)},Si={xxl:1080,xl:0},wi={[Qt.Y.DESKTOP]:{xxl:720,xl:0},[Qt.Y.TABLET]:Object.assign({},Si),[Qt.Y.SMARTPHONE]:Object.assign({},Si)},ki={[H.jJ.LANDSCAPE]:{[H.OX.DETAILED]:wi,[H.OX.VISUAL]:xi},[H.jJ.PORTRAIT]:{[H.OX.DETAILED]:Ci,[H.OX.VISUAL]:pi}};class Ai extends ni{constructor(){super(...arguments),this.Pq=ci,this.Iq=d.Rq,this.bq=0,this.SW=9e4}get type(){return this.gA.playerType}setFloatingSettings(t){super.setFloatingSettings(t),this.gA.floatingSettings.isPinnedPlayerFloating?((0,it.IV)(this.wW,"cnx-content-wrapper"),(0,it.cn)(this.wW,"cnx-pinned-wrapper")):((0,it.IV)(this.wW,"cnx-pinned-wrapper"),(0,it.cn)(this.wW,"cnx-content-wrapper")),this.JV.floatingChanged(this.gA.floatingSettings.isPinnedPlayerFloating)}mq(){return this.gA.floatingSettings.floatingMode===n.v3.ALWAYS?this.Uz:this.Zz.parentElement}eQ(){super.eQ(this.Zz.parentElement)}jQ(t=!1){super.jQ(t,this.Zz.parentElement)}wq(){var t;return(0,e.mG)(this,void 0,void 0,(function*(){const i=!!(null===(t=this.Mz)||void 0===t?void 0:t.isInFloating),{ElementsAdHandler:s}=yield(0,ht.r)();return new s(i,this.lQ.isAdvertisingDisabled,this.gA,this.ls,this.Zz,this.Mz?this.Mz.checkFloatingViewability(this.isViewable()):this.isViewable(),this.DQ,this.mp,this._appSettings,this.Lg,this.ZQ(this.Zz.clientWidth,this.Zz.clientHeight))}))}Jz(){if(this.gA.isRenderedInSsrContainers)this.QQ=(0,p.sb)("playerWrapper"),this.Zz=(0,p.sb)("videoContainer"),this.wW=(0,p.sb)("contentWrapper"),this.kW();else{const t=this.gA.floatingSettings.floatingMode!==n.v3.ALWAYS,{services:{GlobalDomUtilsService:i},config:{isOVPDomain:s}}=this.mp,e=s?d.sN.PlayerWrapperPremium:d.sN.PlayerWrapper;this.QQ=i.createElementByString(`<cnx class="${e}"></cnx>`),this.Zz=i.createElementByString("<cnx class='cnx-video-container'></cnx>"),t&&(this.wW=i.createElementByString(`<cnx class="${this.gA.floatingSettings.isPinnedPlayerFloating?"cnx-pinned-wrapper":"cnx-content-wrapper"}"></cnx>`)),this.kW(),t?(this.wW.appendChild(this.Zz),this.QQ.appendChild(this.wW)):this.QQ.appendChild(this.Zz),this.Uz.appendChild(this.QQ)}}kW(){this.gA.playerSize.responsive?(this.QQ.appendChild(this.hq()),(0,it.cn)(this.QQ,"cnx-size-responsive")):(this.AW(this.Uz),(0,it.cn)(this.QQ,"cnx-size-fixed"))}AW(t){(0,it.T7)(t,{width:`${this.gA.playerSize.fixedWidth}px`,height:`${this.gA.playerSize.fixedHeight}px`})}Cq(){let t;const{nonlinearPlayerSettings:i,midRollOnlyOnLongContent:s,minTimeBeforeFirstAd:e,timeBetweenAds:h,apiConfig:{settings:{advertising:{cuePoints:n,disablePrefetch:o}}},midRollNumber:r,adBreaks:a,outstreamSettings:l,adViewabilityPolicy:d,disableAdvertising:c}=this.gA;if(i){const{timeSecondsBetweenNonlinear:s,timeSecondsBetweenLinearAndNonlinear:e}=i;t=new li({timeSecondsBetweenLinearAndNonlinear:e,timeSecondsBetweenNonlinear:s})}const u=new ai({midRollOnlyOnLongContent:s,minTimeBeforeAdBreak:e,timeBetweenAds:h,cuePointsSettings:{dynamicCuePoints:null==n?void 0:n.dynamicCuePoints,cuePointsPrefetchTime:null==n?void 0:n.cuePointsPrefetchTime,cuePointsTimeout:null==n?void 0:n.cuePointsTimeout,disablePrefetch:o}});return new Pt(this,{linearAdsControllerData:{numberOfMidRolls:r,adBreaks:a,maxAdSlotDuration:this.DQ.getMaxAdSlotDuration(),maxAdPodDuration:this.DQ.getMaxAdPodDuration(),totalAdBreakLength:l?l.totalAdBreakLength:void 0},nonLinearAdsControllerData:{resetNumberOfNonLinearAdsAfter:0!==r?h:this.SW,numberOfNonlinearAds:null==i?void 0:i.numberOfNonlinearAds},viewabilityPolicy:d,playerDimensions:{width:this.Zz.offsetWidth,height:this.Zz.offsetHeight}},u,this.isViewable(),c,t)}nQ(){var t;null===(t=this.pP)||void 0===t||t.start(this.Zz,!0)}}var Pi=s(1982),Ii=s(3520),Ti=s(6678);const Ei=t=>t.clientHeight||t.getBoundingClientRect().height||0,Mi=t=>t.clientWidth||t.getBoundingClientRect().width||0,Bi=(t,i,s=!1)=>{const e=t.offsetTop,h=((t,i)=>(parseInt(i.getMarginTopPropertyValue(t),10)||0)+(parseInt(i.getMarginBottomPropertyValue(t),10)||0))(t,i),n=Ei(t),o=Ei(t.parentElement);let r=e;if(s){const t=Math.floor(o/(n+h)),i=Math.floor(t/2);r=Math.max(e-i*(n+h),0)}t.parentElement.scrollTop=r},Vi=(t,i,s=!1)=>{const e=t.offsetLeft,h=((t,i)=>(parseInt(i.getMarginLeftPropertyValue(t),10)||0)+(parseInt(i.getMarginRightPropertyValue(t),10)||0))(t,i),n=Mi(t),o=Mi(t.parentElement);let r=e;if(s){const t=Math.floor(o/(n+h)),i=Math.floor(t/2);r=Math.max(e-i*(n+h),0)}t.parentElement.scrollLeft=r},Li=(0,K.A)({CardClicked:0}),Di={width:160,height:90},Oi={width:80,height:80};var Fi=s(1353),Ri=s(5046);const Ui=Ri.h`<cnx class="cnx-g-card"><cnx class="cnx-g-card-image-container"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon">${Fi}</cnx></cnx></cnx></cnx></cnx></cnx></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"><cnx-span></cnx-span></cnx></cnx></cnx>`;class Hi{constructor(t,i,s={}){this.PW=t,this.nt=i,this.IW=1.2,this.TW=16,this.EW="normal",this.YT={lines:0,useNativeClamping:!0},this.MW=!1,this.YT=Object.assign(Object.assign({},this.YT),s),this.MW=this.BW()}setLines(t){this.YT.lines=t}getClampedText(t){this.VW=t.trim(),this.LW=this.nt.createElementByString(`<cnx-span style="display:inline-block;width:100%;line-height:inherit;font-family:inherit;font-size:inherit;">${this.VW}</cnx-span>`),this.PW.appendChild(this.LW);let i=0;try{i=this.DW()}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"LineClamp_getMaxLines",exception:i,callStack:s,level:"Critical"})}const s=this.OW(this.YT.lines,i),e=this.FW(s);return Math.ceil(this.LW.getBoundingClientRect().height)-1<=e?(this.RW(),this.VW):this.MW?void(0,it.T7)(this.PW,{overflow:"hidden",textOverflow:"ellipsis",webkitBoxOrient:"vertical",display:"-webkit-box",webkitLineClamp:s}):this.UW(this.LW.firstChild,e)}BW(){return!!this.YT.useNativeClamping&&void 0!==this.PW.style.webkitLineClamp}FW(t){return this.HW(this.PW)*t+(this.NW(this.LW)+this.NW(this.PW))+(this.$W(this.LW)+this.$W(this.PW))}jW(t){if(t.getBoundingClientRect){const{height:i}=t.getBoundingClientRect();if(i>0)return Math.ceil(i)}const i=t.clientHeight;return i&&i>0?Math.ceil(i):t.parentNode?this.jW(t.parentNode):0}DW(){const t=this.jW(this.PW),i=this.HW(this.PW),s=this.NW(this.LW)+this.NW(this.PW),e=this.$W(this.LW)+this.$W(this.PW),h=Math.floor((t-s-e)/i+.05);return Math.max(h,0)}zW(t){const i=this.nt.getFontSizePropertyValue(t);return i?parseInt(i,10):this.TW}HW(t){let i=this.nt.getLineHeightPropertyValue(t);return i&&i!==this.EW||(i=""+this.IW*this.zW(t)),parseInt(i,10)}NW(t){if(!t)return 0;const i=this.nt.getPaddingTopPropertyValue(t);return parseInt(i,10)||0}$W(t){if(!t)return 0;const i=this.nt.getPaddingBottomPropertyValue(t);return parseInt(i,10)||0}OW(t,i){return t>0?0===i?t:Math.min(this.YT.lines,i):i}UW(t,i,s){if(!i)return;void 0===s&&(s=t.nodeValue.split(" "));const e=[...s];if(e.length>1){e.pop(),this.QW(t,`${e.join(" ")}...`);return t.parentNode.offsetHeight>i?this.UW(t,i,e):(this.RW(),`${e.join(" ")}...`)}}QW(t,i){t.nodeValue=i}RW(){this.PW.innerHTML="",this.LW=null}}const Ni=Ri.h`<cnx class="cnx-g-card"><cnx class="cnx-g-triangle"></cnx><cnx class="cnx-g-card-image"></cnx><cnx class="cnx-g-card-text-container"><cnx class="cnx-g-card-text"></cnx></cnx><cnx class="cnx-g-card-icon"><cnx class="cnx-ui-btn"><cnx class="cnx-icon-button cnx-ui-btn-hoverable cnx-mod-hover"><cnx class="cnx-btn-container"><cnx class="cnx-play-icon">${Fi}</cnx></cnx></cnx></cnx></cnx></cnx>`;class $i extends g._{constructor(t,i,s,e,h){super(),this.mediator=t,this.co=i,this.vt=s,this.qW=e,this.mi=h,this.ro=()=>{this.mi.metadata.title&&this.WW()},this.GW=()=>{this.mediator.publish(this,Li[Li.CardClicked],{payload:this.$element.parentElement})},this.JW=this.vt.createElementByString(this.kV()),this.JW.setAttribute("role","button"),this.JW.setAttribute("aria-label",`Video - ${this.mi.metadata.title}`),this.KW=this.JW.getElementsByClassName("cnx-g-card-image")[0],this.YW=this.JW.getElementsByClassName("cnx-g-card-text")[0],this.XW=this.JW.getElementsByClassName("cnx-g-card-text-container")[0],this.mi.titleFont&&(0,it.T7)(this.XW,{"font-family":this.mi.titleFont});const n=this.vt.createElement("img");n.onload=()=>{this.KW.appendChild(n)};const o=this.mi.metadata.getThumbnailUrl(this.ZW().width,this.ZW().height);if((0,I.QM)(o)&&(n.src=o),n.alt=(0,I.$K)(this.mi.metadata.altText)?this.mi.metadata.altText:"",this.mi.style===H.OX.DETAILED&&this.mi.metadata.duration){const t=this.vt.createElementByString(`<cnx class="cnx-g-card-text-info">${(0,P.to)(this.mi.metadata.duration)}</cnx>`);this.mi.bodyFont&&(0,it.T7)(t,{"font-family":this.mi.bodyFont}),this.XW.appendChild(t)}this.qW.register(this.JW,this,this.qW),this.U(Ti.y[Ti.y.Click],this.qW,(()=>{this.GW()})),this.relay(Ti.y[Ti.y.Scroll],this.qW,this,this.mediator),this.tG=new Hi(this.YW,this.vt,{lines:3,useNativeClamping:!1}),this.co.on(this.JW,this.ro)}get $element(){return this.JW}setActiveState(t){t?(this.JW.setAttribute("aria-current","true"),(0,it.cn)(this.JW,"cnx-mod-active")):(this.JW.removeAttribute("aria-current"),(0,it.IV)(this.JW,"cnx-mod-active"))}destroy(){this.JW.removeEventListener("click",this.GW),this.co.off(this.JW,this.ro)}clampLines(){this.WW()}kV(){return this.mi.style===H.OX.VISUAL?Ni:Ui}ZW(){return this.mi.style===H.OX.VISUAL?Di:Oi}WW(){const t=this.tG.getClampedText(this.mi.metadata.title),i=this.vt.createElementByString(`<cnx-span>${t}</cnx-span>`);(0,it.jG)(i,this.YW)}}class ji extends g._{constructor(t,i,s,e,h){if(super(),this.mediator=t,this.co=i,this.vt=s,this.qW=e,this.mi=h,this.iG=!1,this.mi.$slot.innerHTML='<cnx class="cnx-g-card-placeholder"></cnx>',this.mi.style===H.OX.DETAILED){const t=s.createElementByString(this.sG(Ui));this.mi.$slot.firstChild.appendChild(t)}this.qW.register(this.mi.$slot,this.mediator,this),this.relay(Ti.y[Ti.y.Scroll],this.qW,this,this.mediator)}setCardData(t){const{id:i,style:s,titleFont:e,bodyFont:h,$slot:n}=this.mi;this.eG=new $i(this,this.co,this.vt,this.qW,{id:i,style:s,metadata:t,titleFont:e,bodyFont:h}),this.relay(Li[Li.CardClicked],this.eG,this,this.mediator),this.WT(this.qW),this.relay(Ti.y[Ti.y.Scroll],this.eG,this,this.mediator),this.eG.setActiveState(this.iG),n.innerHTML="",n.appendChild(this.eG.$element)}setActiveState(t){this.iG=t,this.eG&&this.eG.setActiveState(this.iG)}getContainer(){return this.mi.$slot}clampLines(){this.eG.clampLines()}sG(t){const i=[...Array(12)].map((()=>`<cnx-span style='width: ${10+Math.floor(40*Math.random())}%'></cnx-span> `)).reduce(((t,i)=>t+i),"");return t.replace("<cnx-span></cnx-span>",i)}}const zi=Object.assign(Object.assign({},{StateChanged:"stateChanged"}),{FirstFramePlayed:"firstFramePlayed",ContentQuartiles:"contentQuartiles",MediaMetaUpdate:"mediaMetaUpdate",ChangeVideo:"changeVideo",VideoQueued:"videoQueued"});class Qi extends g._{constructor(t,i,s,e,h,n,o,r,a){super(),this.mediator=t,this.co=i,this.vt=s,this.qW=e,this.Ny=h,this.tU=n,this.hG=o,this.nG=r,this.oG=[],this.rG=[],this.aG=null,this.lG=0,this.dG=(0,it.nw)(this.Ny),this.cG=(0,it.fj)(this.Ny);const l=this.hG===H.OX.DETAILED?"cnx-g-style-detailed":"cnx-g-style-visual";if((0,it.cn)(this.Ny,l),this.hG===H.OX.DETAILED&&(this.Ny.innerHTML='<cnx class="cnx-g-explore-more">EXPLORE MORE</cnx>'),this.uG=s.createElementByString('<cnx class="cnx-g-rail"></cnx>'),this.Ny.appendChild(this.uG),this.hG===H.OX.DETAILED){const t=s.createElementByString('<cnx class="cnx-g-fade-out"></cnx>');this.Ny.appendChild(t)}this.vG(a)}start(){this.pG(),this.gG()}onResize(t){this.gq&&(this.gq.updateWidth(t),this.bG(),this._G())}setCurrentIndex(t){this.lG=t,this.oG.forEach(((i,s)=>i.card.setActiveState(t===s))),this._G()}insertGalleryCardDynamically(t){this.xG(t,this.lG+1),this.bG(),this._G()}replaceGalleryCards(t){this.oG.forEach((t=>{const i=t.card.getContainer();i.parentElement.removeChild(i)})),this.oG=[],this.fG(),this.CG(),t.forEach(((t,i)=>{this.xG(t,i,!1),this.uG.appendChild(this.oG[i].card.getContainer())})),this.bG(),this._G()}vG(t){t.forEach(((t,i)=>{const s=this.SG(i);this.uG.appendChild(s.getContainer()),this.oG.push({card:s,videoSource:t}),this.U(Li[Li.CardClicked],s,(({payload:t})=>this.wG(this.kG(t)))),this.relay(Ti.y[Ti.y.Scroll],s,this,this.mediator)}))}kG(t){return this.oG.findIndex((i=>i.card.getContainer()===t))}_G(){if((0,C.BZ)(this.rG))return;const t=this.oG[this.lG].card.getContainer();this.nG===H.jJ.LANDSCAPE?Bi(t,this.vt,true):Vi(t,this.vt,true)}SG(t){const i=this.vt.createElementByString('<cnx class="cnx-g-card-slot"></cnx>');return new ji(this,this.co,this.vt,this.qW,{id:t,style:this.hG,$slot:i,titleFont:this.dG,bodyFont:this.cG})}wG(t){this.mediator.publish(this,zi.ChangeVideo,{payload:{videoIndex:t}})}pG(){this.oG.forEach((t=>{t.videoSource.getMetadata((i=>{t.card.setCardData(i),t.card.clampLines()}))}))}fG(){this.rG.forEach((t=>{this.WT(t),this.uG.removeChild(t.getContainer())})),this.rG=[]}AG(){const t=this.nG===H.jJ.PORTRAIT?this.uG.clientWidth:this.uG.clientHeight,i=this.oG[0].card.getContainer(),s=this.nG===H.jJ.PORTRAIT?i.clientWidth:i.clientHeight,e=Math.ceil(t/s)+1-(this.oG.length-1);if(e>this.rG.length-1)for(let t=0;t<=e;t++){const i=this.SG(t);this.rG.push(i),this.relay(Ti.y[Ti.y.Scroll],i,this,this.mediator),this.uG.appendChild(i.getContainer())}}bG(){this.PG()?(this.fG(),this.IG()):(this.CG(),this.AG())}IG(){null===this.aG&&(this.aG=new Ii.$(this.uG,{horizontal:this.nG===H.jJ.PORTRAIT}),(0,it.cn)(this.uG,"cnx-mod-scrollbar"))}CG(){null!==this.aG&&(this.aG.destroy(),this.aG=null,(0,it.IV)(this.uG,"cnx-mod-scrollbar"))}PG(){const t=this.oG[this.oG.length-1].card.getContainer();return this.nG===H.jJ.LANDSCAPE?t.offsetTop+t.clientHeight>this.uG.clientHeight:t.offsetLeft+t.clientWidth>this.uG.clientWidth}gG(){const t=this.TG();this.gq=new qt(this.Ny,t,d.Rq,this.tU)}TG(){return ki[this.nG][this.hG]}xG(t,i,s=!0){const e=this.SG(i);if(t.getMetadata((t=>{e.setCardData(t),e.clampLines()})),this.oG.splice(i,0,{card:e,videoSource:t}),s){const t=this.oG[i-1],s=null==t?void 0:t.card.getContainer().nextElementSibling;s?s.parentElement.insertBefore(e.getContainer(),s):null==t||t.card.getContainer().parentElement.appendChild(e.getContainer())}this.U(Li[Li.CardClicked],e,(({payload:t})=>this.wG(this.kG(t)))),this.relay(Ti.y[Ti.y.Scroll],e,this,this.mediator)}}const qi={imageMaxHeight:160,ratioWidth:16,ratioHeight:9};class Wi extends Ai{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},l.Km),Pi.r),this.EG=new F.X(!1),this.MG=new h.x,this.BG=!0,this.VG=[],this.LG=!1,this.DG=!0,this.OG=new F.X(!1),this.FG={0:()=>{var t;this.EQ(N.It.MID_ROLL_SLOT);null===(t=this.KV)||void 0===t||t.contentPlaybackStateChanged(true),this.lQ.contentPlaybackStateChanged(true)},2:()=>{this.EQ(N.It.PRE_ROLL_SLOT)},3:()=>{this.EQ(N.It.POST_ROLL_SLOT)},1:()=>{this.rz===N.It.PRE_ROLL_SLOT&&this.EQ(N.It.MID_ROLL_SLOT)},4:()=>{this.rz===N.It.POST_ROLL_SLOT&&this.gA.upNextMode!==H.XZ.STOP?(this.EQ(N.It.MID_ROLL_SLOT),this.CQ()):(this.FQ(),this.lQ.onContentStop(),this.CQ())}},this.eq=()=>{var t;this.EG.next(!1),this.JV.exitFullscreen(),null===(t=this.Mz)||void 0===t||t.fullscreenStateChange(!1),this.mp.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.mp.config.os.os)&&(this.LG=this.JV.isIosFullscreen=!1,this.EQ(this.rz)),this.mediator.publish(this,et.S.FullscreenChanged,{payload:!1}),super.eq()},this.sq=()=>{this.mp.services.GlobalDomUtilsService.hasIosFullscreenBehaviour(this.mp.config.os.os)&&(this.LG=this.JV.isIosFullscreen=!0,this.lQ.onContentStop()),this.mediator.publish(this,et.S.FullscreenChanged,{payload:!0}),super.sq()},this.UG=({payload:t})=>{0===t&&(this.XT(zi.StateChanged,this.JV,this.UG),this.mediator.publish(this,Pi.r.VideoStarted,{payload:this.getVideoDetails()}))},this.HG=t=>{const i=this.FG[t];return()=>{var s;if(0!==t){const t=!1;null===(s=this.KV)||void 0===s||s.contentPlaybackStateChanged(t),this.lQ.contentPlaybackStateChanged(t)}i&&i()}},this.NG=()=>{this.EG.next(!0),this.$G.enterFullScreen().then((()=>{var t;this.JV.enterFullscreen(),null===(t=this.Mz)||void 0===t||t.fullscreenStateChange(!0)})).catch((t=>{(0,k.nF)({level:"Warn",message:"BaseVideoExperience_enterFullscreen",sessionId:this.gA.sessionId})}))}}get currentTime(){return this.JV.currentTime}get duration(){return this.JV.duration}set currentTime(t){this.JV.currentTime=t}start(){const t=Object.create(null,{start:{get:()=>super.start}});var i,s,h;return(0,e.mG)(this,void 0,void 0,(function*(){try{yield t.start.call(this);const{services:{GlobalDomUtilsService:e,ResizeObserver:n,InteractionService:o},config:{device:r,isOVPDomain:a}}=this.mp;if(this.gA.gallery){const{gallery:{style:t,orientation:i},playlist:s}=this.gA;this.zG=new Qi(this,n,e,o,this.QG,r,t,i,s)}this.qG(),null===(i=this.yr)||void 0===i||i.newAdsLimitReached.subscribe((()=>{this.WG()})),this.U("newVideo",this.JV,(({payload:{videoIndex:t,videoMetadata:i}})=>{var s;this.MG.next({type:"newVideo",durationInS:null==i?void 0:i.duration}),null===(s=this.zG)||void 0===s||s.setCurrentIndex(t)})),this.U(zi.VideoQueued,this.JV,(({payload:{videoIndex:t}})=>{var i;null===(i=this.zG)||void 0===i||i.setCurrentIndex(t)})),this.zG&&(this.U(zi.ChangeVideo,this.zG,(({payload:{videoIndex:t}})=>{this.BG=!this.JV.isHidden,this.DQ.endPod(),this.changeVideo(t,!0),this.JV.getVideoData(t,(t=>{this.mediator.publish(this,Pi.r.GalleryCardClicked,{payload:this.GG(t)}),this.Ta.mediaClick.next({type:j.f.GALLERY_CLICK})})),this.CQ()})),this.zG.start(),this.zG.onResize(this.Uz.clientWidth)),this.OG.next(!0),a?this.lz.push(c._.onAdBlockerDetected().subscribe((t=>{t||this.JG(),this.lQ.adBlockerStatusChange(t)}))):this.JG(),this.KG(this.JV,this.KV),this.yq(),this.YG(),this.Oc();const l=null!==(h=null===(s=this.Mz)||void 0===s?void 0:s.isInFloating)&&void 0!==h&&h;yield this.JV.start(l),this.setPreRollBreak(this.gA.preRollBreak),this.KQ(),this.cq(this.JV),this.XG(),this.ZG()}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"BaseVideoExperience_Start",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}}))}changeVideo(t,i=!1,s=!1,e=!1){if(this.KV){if(this.KV.linearInImpression)this.KV.stopAd("changeVideo");else{const t=!0;this.jQ(t)}this.KV.userInteraction()}this.JV.setVideo(t),s&&this.tJ(e?j.f.NEXT_CLICK:j.f.PREVIOUS_CLICK)}trackCustomClick(t){Object.values(j.f).includes(t)&&this.tJ(t)}play(t=!0,i=!1){this.KV&&this.KV.linearInImpression?this.KV.play():this.JV.play(t),i&&this.tJ(j.f.PLAY_CLICK)}pause(t=!0,i=!1){var s,e;null===(s=this.KV)||void 0===s||s.pause(),(null===(e=this.KV)||void 0===e?void 0:e.linearInImpression)||this.JV.pause(t),i&&this.tJ(j.f.PAUSE_CLICK)}getVolume(){return this.JV.volume}setVolume(t,i=!1){super.setVolume(t),i&&this.tJ(j.f.VOLUME_CLICK)}getVideoDetails(){let t;return this.JV.getCurrentVideoData((i=>{t=this.GG(i)})),t}getUpNextVideoDetails(){let t;return this.JV.getUpNextVideoData((i=>{t=this.GG(i)})),t}toggleFullscreen(t=!this.$G.isFullscreen,i=!1){return this.$G.isFullscreen===t||(t?this.NG():this.$G.exitFullScreen(),i&&this.tJ(t?j.f.FULL_SCREEN_CLICK:j.f.EXIT_FULL_SCREEN_CLICK)),t}toggleCaptions(t=!this.JV.areCaptionsEnabled,i=!1){t?this.showCaptions():this.hideCaptions(),i&&this.tJ(j.f.SUBTITLE_CLICK)}togglePlay(){return this.JV.togglePlay()}toggleMute(){this.JV.toggleMute()}increaseVolume(t){this.JV.increaseVolume(t)}decreaseVolume(t){this.JV.decreaseVolume(t)}showCaptions(t,i=!1){this.JV.showCaptions(t);const s=this.JV.getSelectedCaption();this.JV.updateCaptionsMenuUI(null==s?void 0:s.file),i&&this.tJ(j.f.SUBTITLE_CLICK)}getSubtitles(){return this.JV.getSubtitles()}hideCaptions(t=!1){this.JV.hideCaptions(),this.JV.updateCaptionsMenuUI(),t&&this.tJ(j.f.SUBTITLE_CLICK)}toggleExpandButton(t){this.JV.toggleExpandButton(t)}toggleExpandButtonState(t){this.JV.toggleExpandButtonState(t)}getPlaylistId(){return this.gA.playlistId}getPlaylistDetails(){return Object.assign(Object.assign({},this.gA.getPlaylistDetails()),this.iJ)}getAllMetadata(){const t=this.gA.playlist.length;return Promise.all([...Array(t)].map(((t,i)=>this.sJ(i))))}setPlaylistDetails(t){(0,I.$K)(t)&&((0,I.QM)(t.name)||(0,I.QM)(t.description))&&(this.iJ=Object.assign(Object.assign({},this.iJ),t))}getQuality(){return this.JV.getQuality()}setQuality(t){this.JV.setQuality(t)}setAutoQuality(){this.JV.setAutoQuality()}getAvailableQualities(){return this.JV.getAvailableQualities()}destroy(){var t;super.destroy(),null===(t=this.yr)||void 0===t||t.destroy(),this.eJ.destroy(),this.JV&&(this.JV.destroy(),this.WT(this.JV)),(0,A.i)(this.VG),(0,A.i)(this.dz)}setPreRollBreak(t){var i,s;t=(0,P.qe)(t,z.uo),this.gA.setPreRollBreak(t),this.JV&&(null===(i=this.eJ)||void 0===i||i.setPreRollBreak(this.gA.preRollBreak),null===(s=this.DQ)||void 0===s||s.setPreRollBreak(this.gA.preRollBreak),this.JV.hasPreroll=(0,I.r)(this.gA.preRollBreak))}setPostRollBreak(t){var i,s;this.gA.setPostRollBreak(t),null===(i=this.eJ)||void 0===i||i.setPostRollBreak(this.gA.postRollBreak),null===(s=this.DQ)||void 0===s||s.setPostRollBreak(this.gA.postRollBreak),this.JV.hasPostroll=(0,I.r)(this.gA.postRollBreak)}disableAdvertising(){super.disableAdvertising(),this.gA.allowAdBreaksIfAdvertisingDisabled||this.hJ()}enableAdvertising(){super.enableAdvertising(),this.nJ()}getChapterCurrentPosition(){return this.JV.getChapterCurrentPosition()}setVideoChapterPosition(t){this.JV.setVideoChapterPosition(t)}rQ(t){super.rQ(t),this.JV.volume=t}GG(t){const{imageMaxHeight:i,ratioHeight:s,ratioWidth:e}=qi,h=i/s*e,{id:n,title:o,description:r,duration:a,keywords:l,clickUrl:d,customFields:c,publishDate:u,sourceItemId:v,languageId:p,altText:g,disableAdvertising:y,cuePoints:m,subtitles:b,endDate:_,contentStudio:x,chapters:f,ctaButton:C,altTitle:S}=t;return{id:n,title:o,description:r,duration:(0,I.hj)(a)?a:this.JV.duration,keywords:l,url:d?this.mp.services.MacrosService.setupMacros(d):"",customFields:c,thumbnail:t.getThumbnailUrl(h,i),publishDate:u,sourceItemId:v,languageId:p,altText:g,disableAdvertising:y,cuePoints:m,subtitles:b,endDate:_,contentStudio:x,chapters:f,ctaButton:C,altTitle:S}}mQ(){if(this.ez)return;this.nz||this._Q();const t=tt[N.It[this.rz]];this.ez=!0,this.hz=!1;const i={adBreakPosition:t};this.rz===N.It.POST_ROLL_SLOT&&(this.oz=!0),this.mp.services.EventsStorageService.emitAdBreakStart(i)}oJ(){this.Oa.sessionPlaybackChanged.next({isPlaying:!0}),this.Ta.mediaPlaybackChanged.next({isPlaying:!1}),this.mQ()}bQ(){this.ez&&(this.ez=!1,this.mp.services.EventsStorageService.emitAdBreakComplete(),this.oz&&(this.oz=!1,this.CQ()))}xQ(){this.hz||(this.ez&&this.bQ(),this.nz||this._Q(),this.hz=!0,this.mp.services.EventsStorageService.emitPlay())}fQ(){this.hz&&(this.hz=!1,this.mp.services.EventsStorageService.emitPause())}_Q(){this.nz||(this.nz=!0,this.JV.getCurrentVideoData((({title:t,id:i,sourceItemId:s,keywords:e,duration:h,customFields:n})=>{const o=this.JV.streamFormat,r=s||i;this.mp.services.EventsStorageService.emitSessionStart({name:t,keywords:e,mediaId:r,length:h,streamFormat:o,customFieldList:n,feed:"Video"})})))}CQ(){this.rJ(),this.nz&&(this.nz=!1,this.hz=!1,this.ez&&this.bQ(),this.mp.services.EventsStorageService.emitSessionEnd())}SQ(){this.nz&&(this.mp.services.EventsStorageService.emitContentComplete(),this.gA.postRollBreak||this.CQ())}$Q(){const t=this.rz===N.It.POST_ROLL_SLOT?this.getUpNextVideoDetails():this.getVideoDetails();t?(this.KV.setContinueReadingCard({imageSrc:t.thumbnail,title:this.aJ()}),this.KV.setAdMarkerTitle(t.title)):(this.KV.hideContinueReadingCard(),this.KV.hideAdMarkerTitle()),super.$Q(),this.JV.blurVideoTag(),this.JV.hide()}YQ(t,i=!1){super.YQ(t,i),this.lJ&&this.lJ.setViewability(t)}Au(){super.Au(),this.JV&&this.JV.resize(this.gq.currentBreakpointClass)}HQ(){var t;(null===(t=this.Mz)||void 0===t?void 0:t.isInFloating)&&this.gA.floatingSettings.floatingMode!==n.v3.ALWAYS?(this.Mz.destroy(!0),0!==this.JV.volume&&this.setVolume(0)):this.$G.isFullscreen?this.$G.exitFullScreen():this.triggerDestroy()}Jz(){super.Jz(),this.dJ()}WG(t=!1){var i,s;this.hJ(),t?null===(i=this.lQ)||void 0===i||i.onStayNextButtonsDisplayed():null===(s=this.lQ)||void 0===s||s.onContentAdDurationElapsed()}ru(t){super.ru(t),this.JV.getCurrentVideoData((t=>{var i,s;t.disableAdvertising&&((null===(i=this.KV)||void 0===i?void 0:i.linearInImpression)||(null===(s=this.KV)||void 0===s?void 0:s.nonLinearInImpression))&&(0,k.nF)({level:"Warn",message:"BaseVideoExperience_adImpression_onDisableAdvertising",sessionId:this.gA.sessionId})}))}Oc(){this.Ta.newChapter.subscribe((t=>{this.JV.updateChapter(t),this.mediator.publish(this,Pi.r.VideoChapterChanged,{payload:t})}))}YG(){this.U(Z.C[Z.C.Volume],this.JV,(({payload:{volume:t}})=>{this.KV?this.KV.setLinearVolume(t):this.cu(t)})),this.U(D.wB.Timeupdate,this.JV,(({payload:{currentTime:t}})=>{this.lQ.contentTimeUpdate(t),this.Ta.mediaTimeUpdate.next(t)})),this.U(D.wB.Durationchange,this.JV,(({payload:{duration:t}})=>{this.lQ.onContentDurationChange(this.rz,t),this.MG.next({type:"DurationUpdate",durationInS:t})})),this.U("newVideo",this.JV,(()=>{this.U(zi.StateChanged,this.JV,this.UG),this.JV.getCurrentVideoData((t=>{const{id:i,title:s,description:e,clickUrl:h,insights:n,sentimentAnalysis:o,contentVersionId:r,revisionNumber:a,isExternalSource:l,videoContextualInsights:d,disableAdvertising:c,keywords:u,languageId:v,mediaSourceUrl:p}=t;this.ls.currentMediaMetadata={mediaId:i,clickUrl:h,insights:(null==n?void 0:n.insights)||[],sentimentAnalysis:o,contentRevisionId:r,mediaRevision:a,isExternalMedia:l,videoInsightsCategories:null==d?void 0:d.videoCategoryList},this.lQ.onNewMediaVideo(this.cJ(t),c),c&&!this.gA.allowAdBreaksIfAdvertisingDisabled&&this.hJ();const g={mediaId:i,mediaKeywords:u,mediaLanguage:v,mediaInsights:n,mediaSourceUrl:p};let y;this.uJ(g),this.ls.trackedPlaylistId=this.vJ(),y=(0,I.QM)(this.gA.playlistThumbnail)?this.gA.playlistThumbnail:t.getThumbnailUrl(this.Zz.clientWidth,this.Zz.clientHeight),this.az.push(this.uz.subscribe((()=>{this.KV&&this.KV.setAdLoadingBackgroundUrl(y)}))),this.Ta.newMedia.next(t),this.mediator.publish(this,zi.MediaMetaUpdate,{payload:{title:s,description:e}}),this.mediator.publish(this,Pi.r.NewVideo),this.pz=!0}))})),this.U(zi.FirstFramePlayed,this.JV,(()=>{this.Ta.mediaQuartile.next({quartile:$.NR.START}),this.uq(),this._Q()})),this.U(zi.StateChanged,this.JV,(({payload:t})=>{var i,s;switch(this.ls.playerState=t,this.eJ.changeState(t),this.pJ(t),t){case 0:this.mediator.publish(this,l.q0.Play,{payload:this.getVideoDetails()}),this.xQ(),(0,it.pv)(this.Uz,"cnx-click-to-play-thumbnail")&&((0,it.IV)(this.Uz,"cnx-click-to-play-thumbnail"),null===(s=null===(i=this.gJ)||void 0===i?void 0:i.parentElement)||void 0===s||s.removeChild(this.gJ)),this.Oa.sessionPlaybackChanged.next({isPlaying:!0}),this.Ta.mediaPlaybackChanged.next({isPlaying:!0});break;case 1:this.mediator.publish(this,l.q0.Pause,{payload:this.getVideoDetails()}),this.Oa.sessionPlaybackChanged.next({isPlaying:!1}),this.Ta.mediaPlaybackChanged.next({isPlaying:!1}),this.fQ();break;case 7:this.mediator.publish(this,et.S.Buffering);break;case 4:this.mediator.publish(this,l.QD.Stopped),this.Oa.sessionPlaybackChanged.next({isPlaying:!1}),this.Ta.mediaPlaybackChanged.next({isPlaying:!1});break;case 2:this.mediator.publish(this,l.QD.Preroll),this.oJ();break;case 3:this.mediator.publish(this,l.QD.Postroll),this.oJ();break;case 6:this.mediator.publish(this,l.QD.Hidden),this.Oa.sessionPlaybackChanged.next({isPlaying:!0}),this.Ta.mediaPlaybackChanged.next({isPlaying:!1}),this.fQ(),this.mQ();break;default:this.Oa.sessionPlaybackChanged.next({isPlaying:!0})}})),this.Mz&&this.U("userInteraction",this.JV,(({payload:t})=>this.Ez(t))),this.az.push(this.uz.subscribe((()=>{this.KV&&this.U("userInteraction",this.JV,(({payload:{playback:t,isFloatingModeClose:i}})=>{!1!==t||i||(this.KV.pause(),this.lQ.onContentStop()),this.KV.userInteraction()}))}))),this.U("userInteraction",this.JV,(({payload:{clickedNext:t,clickedPrev:i,clickedStay:s}})=>{(t||i)&&this.CQ(),s&&this.lQ.onStayButtonPress()})),this.U(zi.ContentQuartiles,this.JV,(({payload:t})=>{let i;switch(this.Ta.mediaQuartile.next({quartile:t}),t){case $.NR.FIRST:i=Pi.r.VideoCompleted25;break;case $.NR.SECOND:i=Pi.r.VideoCompleted50;break;case $.NR.THIRD:i=Pi.r.VideoCompleted75;break;case $.NR.FOURTH:i=Pi.r.VideoCompleted100;break;case $.NR.ONE_PERCENT:i=Pi.r.VideoCompleted1}i&&this.mediator.publish(this,i,{payload:this.getVideoDetails()})})),this.U(zi.ContentQuartiles,this.JV,(({payload:t})=>{t===$.NR.FOURTH&&this.SQ()})),this.U(Z.C[Z.C.OverlayClick],this.JV,(({payload:{clickUrl:t,isPlaying:i}})=>{const s=Object.assign(Object.assign({},this.getVideoDetails()),{url:t});this.mediator.publish(this,Pi.r.PlayerClicked,{payload:s});const e=i?j.f.PAUSE_CLICK:j.f.PLAY_CLICK;this.Ta.mediaClick.next({type:e})})),this.U(Z.C[Z.C.CtaClick],this.JV,(({payload:{clickUrl:t}})=>{this.mediator.publish(this,Pi.r.CtaButtonClicked,{payload:t})})),this.U(D.XQ.Change,this.JV,(t=>this.mediator.publish(this,l.q0.QualityChanged,t))),this.U("playError",this.JV,(t=>{this.mediator.publish(this,l.q0.PlayError,t),this.mp.services.EventsStorageService.emitPlayError()})),this.U(Z.C[Z.C.CaptionOn],this.JV,(()=>{this.mediator.publish(this,Pi.r.SubtitlesVisibilityChanged,{payload:!0})})),this.U(Z.C[Z.C.CaptionOff],this.JV,(()=>{this.mediator.publish(this,Pi.r.SubtitlesVisibilityChanged,{payload:!1})})),this.az.push(this.uz.subscribe((()=>{this.KV&&this.VG.push(this.KV.onLinearUiComponentEvent.subscribe((t=>{if(t.type===Z.C.Volume){const{volume:i}=t.payload;this.cu(i),this.JV.volume=i}})),this.KV.onLinearNoFill.subscribe((()=>{var t;null===(t=this.lQ)||void 0===t||t.onLinearNoFill()})))}))),this.U("newVideo",this.JV,(t=>{var i;this.yJ(),this.DG?(this.DG=!1,this.gA.adPlaybackMode===n.ZA.AUTOPLAY&&this.gA.playbackMode!==n.Fx.CLICK_TO_PLAY&&0===this.gA.preRollBreak&&this.EQ(N.It.MID_ROLL_SLOT,null===(i=t.payload.videoMetadata)||void 0===i?void 0:i.duration)):this.OQ()})),this.gA.isCloseButton&&this.U(Z.C[Z.C.Close],this.JV,(()=>{var t;const i=(null===(t=this.Mz)||void 0===t?void 0:t.isInFloating)?1:0;this.mediator.publish(this,et.S.CloseButtonClicked,{payload:i}),this.HQ()})),this.U("generalUserInteraction",this.JV,(({payload:{type:t,clickUrl:i}})=>{this.Ta.mediaClick.next({type:t,clickUrl:i})})),this.U(Z.C[Z.C.ApiButton],this.JV,(({payload:{id:t}})=>{this.mediator.publish(this,Pi.r.ApiButtonClicked,{payload:t})}))}BQ(t){!this.LG&&this.KV&&this.KV.adStateChange(t,this.rz)}VQ(t,i){const{duration:s}=this.JV;this.lQ.onAdStateChange(t,{maxAdPodDuration:this.DQ.getMaxAdPodDuration(),maxAdSlotDuration:this.DQ.getMaxAdSlotDuration()},s||i)}yq(){this.JV.onReady().pipe((0,R.h)((t=>!!t)),(0,U.q)(1)).subscribe((()=>{super.yq()}))}Xz(){const t=Object.create(null,{Xz:{get:()=>super.Xz}});return(0,e.mG)(this,void 0,void 0,(function*(){yield t.Xz.call(this),this.mJ(),yield this.JV.preloadDependencies()}))}bJ(){const t=this.$G.onFullScreenEnter.subscribe((()=>this.sq())),i=this.$G.onFullScreenExit.subscribe((()=>this.eq()));this.VG.push(i,t)}vJ(){const{mediaId:t,isExternalMedia:i}=this.ls.currentMediaMetadata,{playlistId:s,apiConfig:e}=this.gA,{mediaIdList:h}=e,n=(0,C.BZ)(h)&&h.find((i=>i===t));if(t&&!i&&"f2590cdd-0bb5-401c-a109-f286e7a52d32"!==t&&!n)return s}sJ(t){return new Promise(((i,s)=>{const e=()=>this.JV.getVideoData(t,(t=>i(this.GG(t))),(t=>s(t)));this.OG.value?e():this.OG.pipe((0,R.h)((t=>!!t)),(0,U.q)(1)).subscribe((t=>t&&e()))}))}aJ(){const t=this.getVideoDetails();if(0===t.chapters.length){return(this.rz===N.It.POST_ROLL_SLOT?this.getUpNextVideoDetails():t).title}const i=this.getChapterCurrentPosition();return t.chapters[i].title}dJ(){this.vz=this.gA.enableNewUI?80:142}hJ(){this.setPreRollBreak(0),this.setPostRollBreak(0)}nJ(){var t;(null===(t=this.lQ)||void 0===t?void 0:t.isAdvertisingDisabledForCurrentVideo)||(this.rJ(),this.yJ())}rJ(){var t;(null===(t=this.lQ)||void 0===t?void 0:t.isAdvertisingDisabled)||this.setPreRollBreak(null)}yJ(){var t;(null===(t=this.lQ)||void 0===t?void 0:t.isAdvertisingDisabled)||this.setPostRollBreak(null)}uJ(t){this.KV&&(this.KV.setMediaRestrictions(t),this.lQ.onMediaRestrictionsUpdated())}JG(){this.az.push(this.uz.subscribe((()=>{if(this.KV){const{closeButtonLocation:t,floatingCloseButtonTooltipPosition:i,soundMode:s}=this.gA,e={shouldShowExpandButton:!1,closeButtonLocation:st.GL.get(t),floatingCloseButtonTooltipPosition:i};this.KV.start(this.JV.width,this.JV.height,s===n.zj.ON?1:0,e,!0),this.lQ.forceRecheck()}})))}pJ(t){this.HG(t)()}XG(){const{services:{GlobalDomUtilsService:t},config:{os:{os:i},sessionId:s}}=this.mp;this.$G=new J.I(t,this.Zz,i,s),this._J()}_J(){this.bJ(),this.U(Z.C[Z.C.Expand],this.JV,(()=>{this.mediator.publish(this,l.Zr.FullscreenButtonClicked),this.gA.hasExternalFullscreenFunctionality||this.NG()})),this.U(Z.C[Z.C.Collapse],this.JV,(()=>{this.mediator.publish(this,l.Zr.FullscreenButtonClicked),this.gA.hasExternalFullscreenFunctionality||this.$G.exitFullScreen()}))}KG(t,i){const{preRollBreak:s,postRollBreak:e,playerId:h}=this.gA;this.eJ=new q(t,i,s,e,h),this.az.push(this.uz.subscribe((()=>{this.eJ.setAdHandler(this.KV)})))}ZG(){this.lJ=new X(this,this.gA.playbackMode),this.U(Y[Y.Play],this.lJ,(()=>{var t,i;this.qz.unmute(),this.JV.play(),(null===(t=this.KV)||void 0===t?void 0:t.nonLinearInImpression)&&(null===(i=this.KV)||void 0===i||i.play())})),this.U(Y[Y.Pause],this.lJ,(()=>{var t,i;this.JV.pause(),this.qz.mute(this.getVolume()),(null===(t=this.KV)||void 0===t?void 0:t.nonLinearInImpression)&&(null===(i=this.KV)||void 0===i||i.pause())})),this.U("userInteraction",this.JV,(({payload:{playback:t}})=>{(0,I.$K)(t)&&this.lJ.setUserPlayback(t)}));const t=this.JV.canPlay().subscribe((t=>{this.lJ.setCanPlay(t)})),i=this.EG.subscribe((t=>{this.lJ.setIsFullscreen(t)}));this.VG.push(t,i)}cJ(t){var i;const{duration:s,cuePoints:e}=t,{apiConfig:{settings:{advertising:h}}}=this.gA;return{videoDuration:s,cuePoints:e,dynamicCuePoints:null===(i=h.cuePoints)||void 0===i?void 0:i.dynamicCuePoints}}tJ(t){this.Ta.mediaClick.next({type:t})}}function Gi(){return(0,S.Up)((()=>s.e("ui").then(s.bind(s,4763))))}class Ji extends g._{constructor(t,i,s,e,n){super(),this.vt=t,this.qW=i,this.co=s,this.fV=e,this.xJ=n,this.fJ=new h.x}get onUIEvent(){return this.fJ.asObservable()}destroy(){this.WT(this.CJ),this.CJ.destroy()}onResize(t){var i;null===(i=this.CJ)||void 0===i||i.onResize(t)}enterFullscreen(){this.CJ.expand()}exitFullscreen(){this.CJ.collapse()}updateFloatingState(t){this.CJ.updateFloatingState(t)}toggleCaptionButton(t){this.CJ.toggleCaptionState(t)}togglePlaylistControls(t){this.CJ.togglePlaylistControls(t)}toggleExpandButton(t){this.CJ.toggleExpandButtonDisplay(t)}updateExpandButtonState(t){this.CJ.updateExpandButtonState(t)}changeState(t){this.CJ.changeState(t)}updateUpNextBox(t,i){this.CJ.updateUpNextBox(t,i)}updateActiveCue(t){this.CJ.updateCaptions(t)}updateDefaultCaption(t){this.CJ.updateDefaultCaptions(t)}updateCurrentVideo(t){this.CJ.updateCurrentVideo(t)}updateCurrentTime(t,i){this.CJ.updateDuration(t,i)}updateBufferedState(){}updateVolume(t){this.CJ.updateVolume(t)}updateQuality(t,i){this.CJ.updateQuality(t,i)}start(t,i,s,h){return(0,e.mG)(this,void 0,void 0,(function*(){const e=yield Gi(),{LiveUiContent:n,VideoUiContent:o,VideoTemplate:r}=e,a=i?n:o,{template:l}=new r(t,i);this.CJ=new a(this,this.vt,this.qW,this.co,this.fV,l,t,this.xJ,s,h),this.SJ(),this.CJ.start()}))}loadPinnedUi(){this.CJ.loadPinnedUi()}destroyPinnedUi(){this.CJ.destroyPinnedUi()}toggleProgressButtons(t){this.CJ.toggleProgressButtons(t)}isUpNextBoxInView(){return!!this.CJ.isUpNextBoxInView()}SJ(){st.YC.forEach(((t,i)=>{this.U(i,this.CJ,(i=>{const s={type:t,payload:i.payload};this.fJ.next(s)}))}))}}var Ki=s(4361),Yi=s(2047),Xi=s(5727);const Zi={height:0,quality:D.ZH.Auto};var ts=s(5720),is=s(3699),ss=s(8843),es=s(2457),hs=s(7845);var ns=s(4218),os=s(3551);class rs{constructor(t,i){this.vt=t,this.Hf=i,this.wJ=new h.x,this.kJ=new h.x,this.AJ=new h.x,this.onTrackLoaded=this.AJ.asObservable(),this.onQualityChange=this.wJ.asObservable(),this.onCurrentQuality=this.kJ.asObservable(),this.PJ=()=>{this.AJ.next()}}IJ(t){this.TJ=t}EJ(t){this.Hf.innerHTML="",t.forEach((t=>{this.Hf.appendChild(t)}))}MJ(){return this.BJ}VJ(t){var i;null===(i=this.BJ)||void 0===i||i.remove(),this.BJ=null,this.LJ=t,this.TJ&&this.TJ.subtitles&&t&&(this.Hf.childNodes.forEach((t=>{"track"===t.nodeName.toLowerCase()&&t.remove()})),t.isHLSTrack?this.DJ(t.file).then((i=>{this.OJ(t,i)})):this.OJ(t))}OJ(t,i){const s=this.vt.createElement("track");s.src=(0,I.QM)(i)?i:t.file,s.srclang=t.code,s.label=t.title,s.kind="subtitle",s.default=!0,s.addEventListener("load",this.PJ,!1),s.addEventListener("loaded",this.PJ,!1),this.Hf.appendChild(s),this.BJ=s}DJ(t){return(0,e.mG)(this,void 0,void 0,(function*(){try{const i=yield(0,ns.Z)({requestUrl:t,requestType:"GET"});if(!(0,I.QM)(i))return;const s=(0,os.n)(i);if(!(0,C.BZ)(s.segments)||!(0,w.jv)(s.segments[0].uri))return;return s.segments[0].uri}catch(t){return}}))}}var as=s(5269);class ls extends rs{constructor(t,i,s,e,n,o,r,a,l){super(t,i),this.qf=s,this.FJ=e,this.RJ=n,this.Nu=o,this.Lg=r,this.ks=a,this.UJ=l,this.handlerType=1,this.isNativeVideoSrcImplementation=!1,this.HJ=new h.x,this.onHlsEvent=this.HJ.asObservable(),this.Jf=[],this.NJ=D.ZH.Auto,this.$J=320,this.zJ=!1,this.QJ=!1,this.qJ=!1,this.WJ=new F.X(0),this.GJ=!1,this.JJ=!1,this.KJ=!1,this.YJ=5,this.XJ=!1,this.Zf=()=>{this.Qf.off(this.qf.Events.MEDIA_ATTACHED,this.Zf);const t=this.ZJ(this.tK);this.Qf.loadSource(t),this.Qf.once(this.qf.Events.MANIFEST_PARSED,this.tI)},this.tI=()=>{this.Qf.off(this.qf.Events.MANIFEST_PARSED,this.tI),this.Qf.on(this.qf.Events.LEVEL_SWITCHING,this.iK),this.Qf.on(this.qf.Events.LEVEL_SWITCHED,this.sK),this.Qf.on(this.qf.Events.FRAG_BUFFERED,this.eK),this.Qf.on(this.qf.Events.FRAG_LOADING,this.hK),this.Qf.on(this.qf.Events.FRAG_LOADED,this.nK),this.Qf.on(this.qf.Events.BUFFER_APPENDING,this.oK),this.Qf.on(this.qf.Events.BUFFER_APPENDED,this.rK),this.Qf.on(this.qf.Events.BUFFER_EOS,this.aK),this.tK=null,this.eI(),this.lK(),this.dK(),this.cK.resolve()},this.uK=()=>{this.tK=null,this.Hf.removeEventListener(D.wB.LoadedMetadata,this.uK),this.vK.resolve()},this.lK=()=>{const t=(0,as.T_)(this.Jf).map((t=>({videoHeight:t.height,isHD:t.height>=D.gQ,label:t.level.toString()})));this.HJ.next({type:"manifestLoaded",payload:{qualityList:t}})},this.eK=()=>{this.HJ.next({type:"fragBuffered"})},this.hK=()=>{this.zJ=!0},this.nK=()=>{this.zJ=!1},this.oK=()=>{this.QJ=!0},this.rK=()=>{this.QJ=!1},this.aK=()=>{this.HJ.next({type:"streamEnded"})},this.Yf=(t,i)=>{if(i.details===this.qf.ErrorDetails.BUFFER_STALLED_ERROR&&(this.zJ||this.QJ?this.HJ.next({type:"bufferingError"}):(!this.qJ&&i.fatal&&(this.pK()&&this.Qf.recoverMediaError(),this.Hf.play().then((()=>{this.qJ=!1})).catch((()=>{this.qJ=!1}))),this.qJ=!0)),i.fatal)switch(i.type){case this.qf.ErrorTypes.NETWORK_ERROR:if(i.details===this.qf.ErrorDetails.MANIFEST_PARSING_ERROR)return void this.gK("hls_network_error_manifest_parsing_error_FATAL");if(410===i.response.code)return void this.HJ.next({type:"clientError"});if(i.details===this.qf.ErrorDetails.MANIFEST_LOAD_ERROR)return void this.HJ.next({type:"unexpectedError"});if(i.details===this.qf.ErrorDetails.LEVEL_LOAD_ERROR&&this.WJ.next(this.WJ.value+1),this.GJ)return this.aK(),void(this.GJ=!1);this.Qf.startLoad();break;case this.qf.ErrorTypes.MEDIA_ERROR:this.Qf.recoverMediaError();break;default:this.gK("hls_unexpected_error_FATAL",`type_${i.type}_details_${i.details}`)}else i.type===this.qf.ErrorTypes.MEDIA_ERROR&&i.details===this.qf.ErrorDetails.BUFFER_APPENDING_ERROR&&this.gK("hls_media_error_buffer_appending_error"),i.type===this.qf.ErrorTypes.NETWORK_ERROR&&i.details===this.qf.ErrorDetails.MANIFEST_PARSING_ERROR&&this.gK("hls_network_error_manifest_parsing_error")},this.yK=()=>{this.gK("hls_video_tag_error",`code_${this.Hf.error.code}_message_${this.Hf.error.message}`)},this.sK=(t,i)=>{this.$J=this.Jf.find((t=>t.level===i.level)).height,this.wJ.next(this.currentQualitySettings.height),this.kJ.next(this.currentQualitySettings),this.XJ&&(this.HJ.next({type:"levelSwitching"}),this.XJ=!1),this.HJ.next({type:"levelSwitched"})},this.iK=(t,i)=>{this.Qf.autoLevelEnabled||i.level===this.Qf.currentLevel||this.XJ||this.HJ.next({type:"levelSwitching"})},(0,as.fh)()?(this.Qf=this.mK(),this.isNativeVideoSrcImplementation=!1):(this.isNativeVideoSrcImplementation=!0,this.RJ={quality:D.ZH.Strict,height:360}),this.$J=this.RJ.height,this.NJ=this.RJ.quality}get liveSyncPosition(){if(this.Qf)return this.Qf.liveSyncPosition}get currentQualitySettings(){return{quality:this.NJ,height:this.$J}}start(){}setSource(t,i=!1){this.YJ=5,this.JJ=this.Nu&&!t.isExternalSource,this.Qf&&this.JJ&&!this.KJ&&(this.KJ=!0,this.Qf.autoLevelCapping=1),this.Sa=t.id,this.IJ(t),this.tK=t,this.bK=t,i&&this.attachMedia()}attachMedia(){return this.cK?this.cK.promise:this.vK?this.vK.promise:(!this.Qf&&(0,as.fh)()&&(this.Qf=this.mK()),new Promise((t=>{if(this.Qf?this.Qf.on(this.qf.Events.ERROR,this.Yf):this.Hf.addEventListener(D.wB.Error,this.yK),this._K(),this.tK){const i=this.MJ()?[this.MJ()]:[];this.EJ(i),this.Qf?this.xK().then((()=>{t()})):this.fK().then((()=>{t()}))}else t()})))}detachMedia(){this.Jf=[],this.cK=void 0,this.vK=void 0,this.Qf?(this.Qf.detachMedia(),this.destroy()):(this.Hf.removeAttribute("src"),this.Hf.removeEventListener(D.wB.LoadedMetadata,this.uK),this.Hf.removeEventListener(D.wB.Error,this.yK))}setQuality(t,i){this.NJ=t.quality,this.$J=t.height,this.Qf?this.dK(i):this.CK(),this.wJ.next(this.currentQualitySettings.height),this.kJ.next(this.currentQualitySettings)}onQualityChanged(){return this.isNativeVideoSrcImplementation?this.attachMedia():new Promise((()=>{}))}recoverMedia(){return 0!==this.YJ&&(this.YJ--,this.Qf.recoverMediaError(),!0)}destroy(){this.Qf?(this.SK(),this.Qf.destroy(),this.Qf=null):(this.Hf.removeEventListener(D.wB.LoadedMetadata,this.uK),this.Hf.removeEventListener(D.wB.Error,this.yK))}updateSubtitleTrackSource(t){this.VJ(t)}getSelectedCaptionTrack(){return this.LJ}pK(){return!this.UJ}xK(){return this.cK=new Yi.C,this.Qf.attachMedia(this.Hf),this.Qf.once(this.qf.Events.MEDIA_ATTACHED,this.Zf),this.cK.promise}fK(){return this.vK=new Yi.C,this.wK(this.bK.getHlsSource()),this.Hf.addEventListener(D.wB.LoadedMetadata,this.uK),this.vK.promise}SK(){this.Qf.off(this.qf.Events.MEDIA_ATTACHED,this.Zf),this.Qf.off(this.qf.Events.MANIFEST_PARSED,this.tI),this.Qf.off(this.qf.Events.ERROR,this.Yf),this.Qf.off(this.qf.Events.LEVEL_SWITCHING,this.iK),this.Qf.off(this.qf.Events.LEVEL_SWITCHED,this.sK),this.Qf.off(this.qf.Events.FRAG_BUFFERED,this.eK),this.Qf.off(this.qf.Events.FRAG_LOADING,this.hK),this.Qf.off(this.qf.Events.FRAG_LOADED,this.nK),this.Qf.off(this.qf.Events.BUFFER_APPENDING,this.oK),this.Qf.off(this.qf.Events.BUFFER_APPENDED,this.rK),this.Qf.off(this.qf.Events.BUFFER_EOS,this.aK)}eI(){this.Qf.levels.forEach(((t,i)=>{this.JJ&&i>1||this.Jf.push({level:i,height:t.height})}))}gK(t,i){(0,k.nF)({message:t,exception:this.Sa,level:"Warn",callStack:i,sessionId:this.ks},{extraLogsPercentage:5}),this.HJ.next({type:"unexpectedError"})}dK(t=!1){if(this.NJ===D.ZH.Auto)t?(this.XJ=!0,this.Qf.loadLevel=-1):-1!==this.Qf.currentLevel&&(this.Qf.currentLevel=-1);else try{const i=(0,as.VK)(this.Jf,this.$J);t?(this.XJ=!0,this.Qf.loadLevel=i.level):i.level!==this.Qf.currentLevel&&(this.Qf.currentLevel=i.level)}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"HlsSourceHandler_set_quality",exception:i,callStack:s,level:"Critical",sessionId:this.ks},{extraLogsPercentage:5})}}CK(){const t=this.kK.playlists.filter((t=>void 0!==t.attributes.RESOLUTION)).findIndex((t=>{var i;return this.$J===(null===(i=t.attributes.RESOLUTION)||void 0===i?void 0:i.height)}));if(-1!==t){const i=this.kK.playlists[t];this.Hf.src=this.AK(this.ZJ(this.bK),i.uri)}else this.Hf.src=this.ZJ(this.bK)}ZJ(t){try{const i=t.getHlsSource(),s=(0,S.bx)(i);return s&&s.protocol?this.Lg.appendParamsToUrl(i):this.Lg.appendParamsToUrl(`${this.FJ}:${i}`)}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({exception:i,message:"HlsSourceHandler_undefined_sourceMeta",level:"Critical",callStack:s,sessionId:this.ks},{throttle:5,shouldSendMaxLog:!1,extraLogsPercentage:5})}}AK(t,i){return/^https?:\/\//i.test(i)?i:t.replace(/[^/]+\.m3u8/,i)}wK(t){try{(0,ns.Z)({requestUrl:t,requestType:"GET"}).then((t=>{this.kK=(0,os.n)(t),this.CK()}))}catch(t){}}mK(){return new this.qf(Object.assign({},as.yt))}_K(){var t;null===(t=this.PK)||void 0===t||t.unsubscribe(),this.PK=this.WJ.pipe(function(t){for(var i,s,h=[],n=1;n<arguments.length;n++)h[n-1]=arguments[n];var o=null!==(i=(0,es.yG)(h))&&void 0!==i?i:ss.z,r=null!==(s=h[0])&&void 0!==s?s:null,a=h[1]||1/0;return(0,Et.e)((function(i,s){var h=[],n=!1,l=function(t){var i=t.buffer;t.subs.unsubscribe(),(0,is.P)(h,t),s.next(i),n&&d()},d=function(){if(h){var i=new ts.w0;s.add(i);var e={buffer:[],subs:i};h.push(e),(0,hs.f)(i,o,(function(){return l(e)}),t)}};null!==r&&r>=0?(0,hs.f)(s,o,d,r,!0):n=!0,d();var c=(0,Mt.x)(s,(function(t){var i,s,n=h.slice();try{for(var o=(0,e.XA)(n),r=o.next();!r.done;r=o.next()){var d=r.value,c=d.buffer;c.push(t),a<=c.length&&l(d)}}catch(t){i={error:t}}finally{try{r&&!r.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}),(function(){for(;null==h?void 0:h.length;)s.next(h.shift().buffer);null==c||c.unsubscribe(),s.complete(),s.unsubscribe()}),void 0,(function(){return h=null}));i.subscribe(c)}))}(5e3),(0,R.h)((t=>t.length<3))).subscribe((()=>{this.GJ=!0,this.WJ.next(0)}))}}var ds=s(4546);class cs{constructor(t,i){this.IK=t,this.TK=i,this.EK={quality:D.ZH.Auto,height:360},this.MK=!1,this.wJ=new h.x,this.kJ=new F.X(this.EK),this.BK=30,this.LK=()=>{const t=this.TK.clientHeight;if(this.DK(t)&&this.currentQualitySettings.quality===D.ZH.Auto){const i={height:t,quality:D.ZH.Auto};this.setCurrentQualitySettings(i),this.kJ.next(i)}}}get currentQualitySettings(){return this.EK}get onQualityChange(){return this.wJ.asObservable()}get onCurrentQuality(){return this.kJ.asObservable()}setCurrentQualitySettings(t){this.EK.quality=t.quality,this.EK.height!==t.height&&(this.EK.height=t.height,this.wJ.next())}setQuality(t){if(t.quality===D.ZH.Auto){if(!this.MK){const{height:i,quality:s}=t;this.setCurrentQualitySettings({height:i,quality:s}),this.tQ(),this.LK()}}else this.MK&&this.FK(),this.setCurrentQualitySettings(t);this.kJ.next(this.EK)}destroy(){this.FK()}DK(t){return!this.EK.height||t/this.EK.height*100-100>this.BK}tQ(){this.MK=!0,this.IK.on(this.TK,this.LK)}FK(){this.MK=!1,this.IK.off(this.TK,this.LK)}}class us extends rs{constructor(t,i,s,e,h={},n,o){super(t,e),this.IK=i,this.aT=s,this.RJ=n,this.ks=o,this.handlerType=0,this.isNativeVideoSrcImplementation=!0,this.VG=[],this.OE=null,this.RK=10.13,this.UK=this.HK(h)}get currentQualitySettings(){return this.NK.currentQualitySettings}start(){try{this.NK=new cs(this.IK,this.aT),this.jK(),this.setQuality(this.RJ)}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"Mp4SourceHandler_start",exception:i,callStack:s,level:"Critical",sessionId:this.ks},{extraLogsPercentage:5})}}onQualityChanged(){return this.attachMedia()}setSource(t,i=!1){this.IJ(t),this.zK(this.QK(),i)}canUseSource(t){return(0,C.BZ)(t.getSources(this.RJ.quality,this.UK))}setQuality(t){this.NK.setQuality(t)}attachMedia(){return new Promise((t=>{this.qK(),t()}))}detachMedia(){this.Hf.removeAttribute("src"),this.zK(null)}destroy(){this.NK.destroy(),(0,A.i)(this.VG)}updateSubtitleTrackSource(t){this.VJ(t)}getSelectedCaptionTrack(){return this.LJ}recoverMedia(){return!1}jK(){const t=this.NK.onCurrentQuality.subscribe((t=>this.kJ.next(t))),i=this.NK.onQualityChange.subscribe((()=>this.WK(this.NK.currentQualitySettings.height)));this.VG.push(t,i)}WK(t){this.zK(this.QK()),this.wJ.next(t)}GK(t){this.EJ(t),this.Hf.load()}QK(){return[...this.JK(),...this.MJ()?[this.MJ()]:[]]}JK(){if(!this.Hf||!this.TJ)return[];const t=[];return this.TJ.getSources(this.NK.currentQualitySettings.height,this.UK).forEach((i=>{if(i.src){const s=this.vt.createElement("source");s.src=i.src,s.type=i.type,t.push(s)}})),t}qK(){this.OE&&(this.GK(this.OE),this.OE=null)}zK(t,i=!1){this.OE=t,i&&this.qK()}HK(t){let i;switch(t.os){case Ht.M.Ios:i=["hevc","h264"];break;case Ht.M.Mac:i=t.osVersion>this.RK&&t.browser===Ki.l.Safari?["hevc","h264"]:["h264"];break;default:i=["h264"]}return i.map((t=>new ds.o(t)))}}var vs=s(574),ps=s(2293);const gs=[2,3,4];class ys{constructor(t,i,s,e){this.PW=t,this.Vc=s,this.KK=e,this.va=!1,this.YK=!1,this.XK="hidden",this.ZK=!1,this.tY=new h.x,this.sY=!1,this.eY=new Map([[D.wB.Play,()=>this.hY()],[D.wB.Playing,()=>this.nY()],[D.wB.Timeupdate,t=>this.oY(t)],[D.wB.Ended,t=>this.rY(t)],[D.wB.Seeked,t=>this.aY(t)],[D.wB.Error,()=>this.lY()],[D.wB.LoadedMetadata,()=>this.dY()],[D.wB.Pause,()=>this.cY()],[D.wB.Volumechange,()=>this.uY()],[D.wB.BufferProgress,()=>this.pY()]]),this.gY=t=>{let i=!1;(t.type===D.wB.Timeupdate&&this.yY()||t.type===D.wB.Seeked)&&(i=this.mY(D.wB.Timeupdate));const s=this.eY.get(t.type);(0,I.$K)(s)?s(i):this.tY.next({type:t.type})},this.fI=Object.values(D.wB),this.volume=i,this.jK()}get currentTime(){return this.PW.currentTime}get duration(){return this.PW.duration}get isPlaying(){return this.va}get videoEvents(){return this.tY.asObservable()}get volume(){return this.fH}set currentTime(t){this.YK?this.PW.currentTime=t:this.bY=t}set volume(t){const i=t?t<=1?t:t/100:t;i!==this.fH&&(this.fH=i,void 0!==this.fH&&(this.PW.volume=this.fH,(0,it.Q1)(this.PW,this.fH)))}setUnfreeze(){this.sY=!0}play(){return(0,e.mG)(this,void 0,void 0,(function*(){this.ZK=!0,this._Y&&clearTimeout(this._Y),this._Y=setTimeout((()=>{this.tY.next({type:D.wB.Error,payload:{errorMessage:"play_timeout"}})}),25e3);const t=this.PW.play();return(0,I.$K)(t)?t.catch((t=>{const{message:i}=(0,S.W$)(t);return(0,k.nF)({message:"ContentPlayer_play_promise_catch",exception:i,level:"Info",sessionId:this.Vc.sessionId},{shouldSendMaxLog:!1,pacing:1}),Promise.reject(t)})):Promise.resolve()}))}pause(){this._Y&&clearTimeout(this._Y),this.PW.pause(),this.va=!1,this.ZK=!1}destroy(){this.fI.forEach((t=>{this.PW.removeEventListener(t,this.gY)}))}setTrackModes(t){this.XK=t,this.xY()}setMetaLoaded(t){this.YK=t}setCrossOriginAttribute(){this.PW.getAttribute("crossorigin")||this.PW.setAttribute("crossorigin","anonymous")}setPoster(t){if("VIDEO"!==this.PW.nodeName)return;const i=this.KK||t.getThumbnailUrl(this.PW.clientWidth,this.PW.clientHeight);(0,I.QM)(i)&&(this.PW.poster=i)}getCurrentTrack(){return this.PW.textTracks&&0!==this.PW.textTracks.length?this.PW.textTracks[0]:null}jK(){this.fI.forEach((t=>{this.PW.addEventListener(t,this.gY)}))}hY(){this.ZK||!this.Vc.isInApp||this.Vc.os!==Ht.M.Android?this.va=!0:this.pause()}nY(){this._Y&&clearTimeout(this._Y),this.Vc.os===Ht.M.Ios&&this.sY&&((0,it.UR)(this.PW),this.sY=!1),this.xY(),this.tY.next({type:D.wB.Playing})}uY(){this.tY.next({type:D.wB.Volumechange,payload:{isMuted:this.PW.muted}})}oY(t){this.tY.next({type:D.wB.Timeupdate,payload:{isPlaying:this.va,isCorruptedCurrentTime:t}})}pY(){this.tY.next({type:D.wB.BufferProgress,payload:{bufferRanges:this.PW.buffered}})}cY(){this._Y&&clearTimeout(this._Y),this.tY.next({type:D.wB.Pause})}lY(){this._Y&&clearTimeout(this._Y);const t=this.PW.error?this.PW.error.message:"";t&&this.tY.next({type:D.wB.Error,payload:{errorMessage:t,errorCode:this.fY()}})}dY(){this.YK=!0,(0,I.hj)(this.bY)&&(this.currentTime=this.bY,this.bY=null),this.tY.next({type:D.wB.LoadedMetadata})}aY(t){this.tY.next({type:D.wB.Seeked,payload:{isCorruptedCurrentTime:t}})}rY(t){this.tY.next({type:D.wB.Ended,payload:{isCorruptedCurrentTime:t}})}mY(t){return this.Vc.os===Ht.M.Ios&&this.PW.currentTime>this.PW.duration&&((0,it.UR)(this.PW),(0,k.nF)({message:"ContentPlayer__CorruptedCurrentTime",callStack:`Event type: ${t}`,level:"Warn",sessionId:this.Vc.sessionId},{throttle:10}),!0)}yY(){return this.PW.currentTime-this.PW.duration>.1}xY(){this.PW.textTracks&&0!==this.PW.textTracks.length&&Object.keys(this.PW.textTracks).forEach((t=>{this.XK===this.PW.textTracks[t].mode&&(this.PW.textTracks[t].mode="hidden"===this.XK?"disabled":"hidden"),this.PW.textTracks[t].mode=this.XK}))}fY(){var t,i,s;if((null===(t=this.PW.error)||void 0===t?void 0:t.message.includes("MEDIA_ELEMENT_ERROR"))&&gs.includes(null===(i=this.PW.error)||void 0===i?void 0:i.code))return null===(s=this.PW.error)||void 0===s?void 0:s.code}}class ms{constructor(t,i,s,e){this.Vc=t,this.fV=i,this.CY=s,this.vt=e,this.SY=!1,this.wY=!1,this.kY()}get volume(){var t,i;return null!==(i=null===(t=this.AY)||void 0===t?void 0:t.volume)&&void 0!==i?i:0}set volume(t){this.AY&&(this.AY.volume=t,t>0&&this.SY&&this.play())}start(t){if(!(0,I.QM)(t))throw new Error("AudioHandle no audio url");this.AY=new ys(this.PY,this.CY,this.Vc),this.IY=t}play(){if(!this.AY||!(0,I.QM)(this.IY))throw new Error("AudioHandle error");this.wY||(0!==this.AY.volume?(0,I.QM)(this.PY.src)?(this.AY.play().catch((()=>{})),this.SY=!1):(this.wY=!0,this.PY.oncanplay=()=>{var t;this.PY.oncanplay=null,null===(t=this.AY)||void 0===t||t.play().catch((()=>{})),this.SY=!1,this.wY=!1},this.PY.src=this.IY):this.SY=!0)}pause(){this.wY&&(this.PY.oncanplay=null,this.wY=!1),this.AY&&(this.SY=!1,this.AY.pause())}destroy(){var t;this.PY.oncanplay=null,null===(t=this.AY)||void 0===t||t.destroy()}kY(){this.vt?this.PY=this.vt.createElement("audio"):this.PY=document.createElement("audio"),this.fV.appendChild(this.PY)}}class bs extends ms{constructor(t,i,s,e){super(t,i,s,e),this.bY=null,this.kY()}get currentTime(){var t,i;return null!==(i=null===(t=this.AY)||void 0===t?void 0:t.currentTime)&&void 0!==i?i:0}get audioFile(){var t;return null!==(t=this.IY)&&void 0!==t?t:""}set currentTime(t){if(this.AY)if(isNaN(this.AY.duration))this.bY=t;else{const i=2;this.AY.currentTime=parseFloat((t%this.AY.duration).toFixed(i)),this.bY=null}}set audioFile(t){this.IY=t}play(){if(!this.AY||!(0,I.QM)(this.IY))throw new Error("AudioHandle error");return this.wY?Promise.resolve():0===this.AY.volume?(this.SY=!0,Promise.resolve()):(0,I.QM)(this.PY.src)?(this.SY=!1,this.AY.play()):new Promise((t=>{if(this.wY=!0,this.PY.oncanplay=()=>{var i;this.PY.oncanplay=null,null===(i=this.AY)||void 0===i||i.play().then((()=>{(0,I.Ft)(this.bY)||(this.currentTime=this.bY,this.bY=null),t()})).catch((()=>{})),this.SY=!1,this.wY=!1},this.PY.src=this.IY||"",!(0,I.QM)(this.IY))throw new Error("AudioHandle error");this.PY.src=this.IY||""}))}kY(){super.kY(),this.PY.loop=!0}}class _s extends g._{constructor(t,i,s,e,n,o,r={},a,l,d,c,u=!1,v=!1,p){super(),this.mediator=t,this.mp=i,this.vt=s,this.aT=e,this.IK=n,this.CY=o,this.YT=r,this.TY=a,this.EY=l,this.RJ=d,this.MY=c,this.BY=u,this.VY=v,this.KK=p,this.LY=!0,this.LG=!1,this.DY=!1,this.OY=!1,this.FY=!0,this.wI=new h.x,this.tz=.01,this.VG=[],this.RY=t=>{var i;const s={levelSwitching:"levelSwitching",levelSwitched:"levelSwitched",streamEnded:"endOfStream",fragBuffered:"buffered",bufferingError:"buffering",clientError:"clientError"}[t.type];if((0,I.QM)(s))this.mediator.publish(this,s);else{if("unexpectedError"===t.type)return this.DY=!0,void this.UY();if("manifestLoaded"===t.type){const s=null===(i=t.payload)||void 0===i?void 0:i.qualityList;if(this.mediator.publish(this,D.XQ.Loaded,{payload:{qualityList:s,videoMeta:this.HY}}),this.AY.setMetaLoaded(!0),this.MY&&this.FY){const t=this.mp.services.ViewabilityService.check({threshold:this.tz,element:this.Hf});t||this.NY(t),this.FY=!1}}}},this.$Y=()=>{let t;this.jY.activeCues&&this.jY.activeCues.length>0&&(t=this.jY.activeCues[0]),this.playing&&this.mediator.publish(this,Z.C[Z.C.CaptionUpdate],{payload:t})},this.PJ=()=>{this.jY&&(this.jY.mode=this.zY?"hidden":"disabled",this.jY.oncuechange=this.$Y)},this.QY(),this.VY||(this.qY.appendChild(this.Hf),this.aT.appendChild(this.qY)),this.RJ=this.RJ||Zi,this.WY=this.RJ;const{services:{ViewabilityService:g},config:{sessionId:y,os:{os:m}}}=this.mp;this.GY=new us(s,this.IK,this.aT,this.Hf,this.YT,this.RJ,y),m===Ht.M.Ios&&g.on(this.Hf,((t,i)=>{!i&&t||this.AY.setUnfreeze()}),{threshold:this.tz}),this.MY&&g.on(this.Hf,(t=>{this.NY(t)}),{threshold:this.tz})}get onVideoEvents(){return this.wI.asObservable()}get width(){return this.qY.getBoundingClientRect().width}get height(){return this.qY.getBoundingClientRect().height}get currentTime(){return this.AY.currentTime}get duration(){return this.AY.duration}get volume(){return this.OY?this.JY.volume:this.AY.volume}get playing(){return this.AY.isPlaying}get isIosFullscreen(){return this.LG}get currentQualitySettings(){var t;return null===(t=this.KY)||void 0===t?void 0:t.currentQualitySettings}get areCaptionsEnabled(){return this.zY}get jY(){return this.AY.getCurrentTrack()}set currentTime(t){this.AY.currentTime=t,this.OY&&(this.JY.currentTime=t)}set volume(t){this.OY?(0===this.JY.volume&&0!==t&&(this.JY.currentTime=this.AY.currentTime),this.JY.volume=t):(0,I.$K)(this.AY)&&(this.AY.volume=t)}set isIosFullscreen(t){this.LG=t,this.LG&&this.zY?this.YY():this.XY()}blurVideoTag(){this.Hf.blur()}start(){const{config:{isInApp:t,os:{os:i},sessionId:s}}=this.mp;try{this.AY=new ys(this.Hf,this.CY,{isInApp:t,os:i,sessionId:s},this.KK),this.fH=this.volume,this.ZY(),this.tX(),this.iX()}catch(t){const{message:i,stack:e}=(0,S.W$)(t);(0,k.nF)({message:"VideoHandler_start",exception:i,callStack:e,level:"Critical",sessionId:s},{extraLogsPercentage:5})}}forceCurrentTime(t){this.AY.currentTime=t,this.OY&&(this.JY.currentTime=t),this.EY=t}toggleMute(){if(0===this.volume)return this.fH=this.fH>0?this.fH:.2,void(this.volume=this.fH);this.fH=this.volume,this.volume=0}increaseVolume(t){this.volume+t>1?this.volume=1:this.volume+=t}decreaseVolume(t){this.volume-t<0?this.volume=0:this.volume-=t}hide(){(0,it.cn)(this.qY,d.pT)}show(){(0,it.IV)(this.qY,d.pT)}setSource(t,i=!1,s=!1){return(0,e.mG)(this,void 0,void 0,(function*(){try{this.HY=t,this.KY&&this.KY.detachMedia();const e=(0,I.QM)(t.hlsFilePath);if(s&&!this.GY.canUseSource(t))return(0,k.nF)({message:"VideoHandler_no_mp4_fallback_source",exception:`mediaId: ${this.HY.id} , mediaContentVersionId: ${this.HY.contentVersionId}`,level:"Warn",sessionId:this.mp.config.sessionId}),void this.wI.next(D.wB.Error);if(yield this.sX(e,s),t.hasSeparateAudioStream){this.OY=!0;const i=this.AY.volume;this.AY.volume=0,this.JY?(this.JY.volume=i,t.separateAudioStreamPath!==this.JY.audioFile&&(this.JY.audioFile=t.separateAudioStreamPath)):this.eX(t,i)}else this.OY&&(this.OY=!1,this.AY.volume=this.JY.volume,this.JY.volume=0);t&&t.subtitles&&this.AY.setCrossOriginAttribute(),this.Hf.setAttribute("title",t.altText),this.BY||this.AY.setPoster(t),this.AY.setTrackModes(this.zY?"hidden":"disabled"),i&&this.AY.setMetaLoaded(!1),this.KY.setSource(t,!0),this.mediator.publish(this,"newVideo",{payload:{videoMetadata:t}})}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"VideoHandler_set_video_source",exception:i,callStack:s,level:"Critical",sessionId:this.mp.config.sessionId},{extraLogsPercentage:5})}}))}setQuality(t){this.KY.setQuality(t)}pauseAudio(){var t;this.OY&&(null===(t=this.JY)||void 0===t||t.pause())}pause(){this.AY.pause(),this.OY&&this.JY.pause(),this.wI.next(D.wB.Pause)}play(){var t;return this.hX=new Yi.C,null===(t=this.KY)||void 0===t||t.attachMedia().then((()=>{this.nX()})).catch((t=>{this.wI.next(D.wB.Error);const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"VideoHandler_public_play_attach_media_error",exception:i,callStack:s,level:"Critical",sessionId:this.mp.config.sessionId},{extraLogsPercentage:5})})),this.hX.promise}hasSubtitles(){return(0,C.BZ)(this.HY.subtitles)}getSubtitles(){return this.HY.subtitles}toggleCaptions(){this.KY.updateSubtitleTrackSource(this.HY.getDefaultSubtitle()),this.zY=!0,this.AY.setTrackModes("hidden")}togglePlay(){return this.playing?(this.pause(),!1):(this.play(),!0)}showCaptions(t){var i;void 0===t&&(t=null===(i=this.HY.getDefaultSubtitle())||void 0===i?void 0:i.file);const s=this.HY.subtitles.find((i=>i.file===t));this.KY.updateSubtitleTrackSource(s),this.zY=!0,this.AY.setTrackModes("hidden")}hideCaptions(){this.KY.updateSubtitleTrackSource(),this.zY=!1,this.AY.setTrackModes("disabled"),this.mediator.publish(this,Z.C[Z.C.CaptionUpdate])}getSelectedCaption(){return this.KY.getSelectedCaptionTrack()}destroy(){var t;this.KY.destroy(),this.qY.parentNode.removeChild(this.qY),null===(t=this.JY)||void 0===t||t.destroy(),this.AY.destroy(),this.IK.off(this.qY,this.oX)}rX(t){const i=this.vt.isHttpsProtocolUsed()?"https":"http",{config:{bundleID:s,sessionId:e,browser:{browserType:h}},services:{UrlSuffixerService:n}}=this.mp,o=(0,I.QM)(s);this.FI=new ls(this.vt,this.Hf,t,i,this.RJ,o,n,e,h===Ki.l.Safari)}UY(){if(this.aX=this.currentTime,!this.GY.canUseSource(this.HY))return(0,k.nF)({message:"VideoHandler_no_mp4_fallback_source",exception:`mediaId: ${this.HY.id} , mediaContentVersionId: ${this.HY.contentVersionId}`,level:"Warn",sessionId:this.mp.config.sessionId}),void this.wI.next(D.wB.Error);this.setSource(this.HY,!0,!0),this.KY.attachMedia().then((()=>{this.nX()})).catch((t=>{this.DY=!1,this.wI.next(D.wB.Error);const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"VideoHandler_hls_error_attach_media",exception:i,callStack:s,level:"Critical",sessionId:this.mp.config.sessionId},{extraLogsPercentage:5})}))}lX(){return(0,e.mG)(this,void 0,void 0,(function*(){if(this.FI)return!0;const t=yield(0,ps.p)(this.vt.global,this.mp.config.sessionId);return!!t&&((0,as.fh)()||(0,as.vY)(this.Hf)?(this.rX(t.default),this.tX(),this.dX(),!0):(this.LY=!1,(0,k.nF)({message:"Hls_not_supported",level:"Info",sessionId:this.mp.config.sessionId},{extraLogsPercentage:5}),!1))}))}dX(){this.VG.push(this.FI.onHlsEvent.subscribe((t=>this.RY(t))))}ZY(){this.cX(this.GY)}tX(){this.FI&&this.cX(this.FI)}cX(t){t.start(),this.uX(t)}iX(){const{os:{os:t},isInApp:i,bundleID:s,sessionId:e}=this.mp.config,h=t===Ht.M.Android&&i&&"579581125"===s;this.AY.videoEvents.subscribe((t=>{var i,s,n,o,r,a,l;h&&t.type!==D.wB.Timeupdate&&t.type!==D.wB.BufferProgress&&(0,k.nF)({message:"SN_Vh_p_e_event",exception:`Video Event: ${t.type} 'Payload: ${JSON.stringify(t.payload)}`,level:"Warn",sessionId:e},{extraLogsPercentage:100});const d=1===(null===(i=this.KY)||void 0===i?void 0:i.handlerType);if(t.payload&&t.payload.isCorruptedCurrentTime)d&&this.UY();else{if(t.type===D.wB.Timeupdate&&(this.bY=this.currentTime),t.type===D.wB.Canplay&&this.EY&&(this.currentTime=this.EY,this.EY=null),this.DY&&(this.DY=!1,t.type===D.wB.Playing&&(this.AY.currentTime=this.aX)),t.type===D.wB.Error){if(h||d&&(0,I.$K)(null===(s=t.payload)||void 0===s?void 0:s.errorCode)){return this.KY.recoverMedia()?void(this.playing&&this.play()):((0,k.nF)({message:"VideoHandler_unrecoverable_media",exception:null===(n=t.payload)||void 0===n?void 0:n.errorMessage,level:"Warn",sessionId:e},{extraLogsPercentage:100}),void this.mediator.publish(this,"playError",{payload:null===(o=t.payload)||void 0===o?void 0:o.errorMessage}))}return h?(0,k.nF)({message:"SN_Vh_p_e_event",exception:null===(r=t.payload)||void 0===r?void 0:r.errorMessage,level:"Warn",sessionId:e},{extraLogsPercentage:100}):(0,k.nF)({message:"VideoHandler_play_error_event",exception:null===(a=t.payload)||void 0===a?void 0:a.errorMessage,level:"Warn",sessionId:e},{extraLogsPercentage:5}),this.wI.next(t.type),void this.mediator.publish(this,"playError",{payload:null===(l=t.payload)||void 0===l?void 0:l.errorMessage})}this.wI.next(t.type),this.mediator.publish(this,t.type,{payload:t.payload})}}))}uX(t){this.VG.push(t.onTrackLoaded.subscribe((()=>this.PJ())),t.onQualityChange.subscribe((t=>this.WK(t))),t.onCurrentQuality.subscribe((t=>{this.mediator.publish(this,D.XQ.CurrentQuality,{payload:t})})))}eX(t,i){const{config:{isInApp:s,os:{os:e},sessionId:h}}=this.mp;this.JY=new bs({isInApp:s,os:e,sessionId:h},this.qY,i,this.vt),this.JY.start(t.separateAudioStreamPath)}sX(t,i=!1){return(0,e.mG)(this,void 0,void 0,(function*(){if(i)this.vX();else{if(t){if(yield this.lX())return void(this.KY=this.FI)}this.vX()}}))}QY(){if(this.VY?(this.qY=(0,p.sb)("videoWrapper"),this.Hf=(0,p.sb)("videoTag")):(this.qY=this.vt.createElementByString('<cnx class="cnx-video-wrapper"></cnx>'),this.Hf=this.vt.createElementByString('<video class="cnx-video-tag"></video>')),this.IK.on(this.qY,this.oX.bind(this)),this.YT.os!==Ht.M.Ios&&this.YT.os!==Ht.M.Mac||(this.Hf.setAttribute("playsinline",""),this.Hf.setAttribute("webkit-playsinline","")),this.mp.config.isMobile)this.BY||(vs.n.defaultVideoPosterURL=Xi.Q.getDefaultPoster(this.mp.services.UrlSuffixerService),this.Hf.poster=vs.n.defaultVideoPosterURL);else{this.TY&&(this.Hf.tabIndex=0,this.Hf.setAttribute("aria-label","Connatix video player"),this.Hf.setAttribute("role","application"));const t=this.mp.services.GlobalDomUtilsService.createElementByString("<cnx class='cnx-border'></cnx>");this.qY.appendChild(t)}if(this.YT.os===Ht.M.Android&&((0,I.QM)(this.mp.config.bundleID)||(0,S.Qq)())){const t=this.vt.createElementByString('<cnx class="cnx_gpu_fix"></cnx>');this.qY.appendChild(t)}}oX(){const{height:t}=this.qY.getBoundingClientRect();this.Hf.style.height=`${t}px`}vX(){this.KY=this.GY,this.KY.setQuality({quality:D.ZH.Auto,height:0})}WK(t){const i=this.AY.isPlaying;this.KY&&this.KY.isNativeVideoSrcImplementation&&(this.EY=this.bY),i&&this.KY.onQualityChanged&&this.KY.onQualityChanged().then((()=>{this.AY.setMetaLoaded(!1),this.nX()})),this.mediator.publish(this,D.XQ.Change,{payload:t})}YY(){this.jY&&(this.jY.oncuechange=null,this.mediator.publish(this,Z.C[Z.C.CaptionUpdate]),this.jY.mode="showing")}XY(){if(this.jY){switch(this.jY.mode){case"showing":case"hidden":this.zY=!0;break;case"disabled":this.zY=!1}this.mediator.publish(this,this.zY?Z.C[Z.C.CaptionOn]:Z.C[Z.C.CaptionOff])}this.PJ()}nX(){this.AY.play().then((()=>{if(this.OY)return this.JY.play().then((()=>{this.JY.currentTime=this.AY.currentTime}))})).catch((()=>{}))}NY(t){t?this.KY.setQuality(this.WY,!0):(this.WY=this.currentQualitySettings,this.KY.setQuality({height:0,quality:D.ZH.Strict},!0))}}class xs extends _s{get hlsSupported(){return this.LY}play(){const t=this.KY.liveSyncPosition;return t&&(this.AY.currentTime=t),super.play()}endOfStream(){this.KY.detachMedia()}UY(){this.hX&&this.hX.isPending&&this.hX.reject(),this.KY.detachMedia(),this.mediator.publish(this,"liveNotPlayable")}rX(t){super.rX(t)}}const fs=(0,K.A)({StateChanged:0,ContentEnd:1,VideoQueued:2});class Cs{constructor(t,i,s,e,n,o=!1,r){this.mediator=t,this.pX=i,this.gX=s,this.yX=e,this.mX=n,this._X=o,this.EY=r,this.xX=!1,this.fX=!1,this.CX=!1,this.SX=!1,this.wX=500,this.kX=new h.x,this.AX=0,this.PX(),this.IX()}get playbackIntention(){return this.TX}set hasPreroll(t){this.yX=t}set hasPostroll(t){this.mX=t}resume(){this.EX&&this.MX(this.EX)}play(){this.TX=0,this.BX(0)||this.BX(2)||this.BX(3)||this.BX(6)||this.BX(12)||(!this.yX||this.xX||this.fX?this.BX(4)&&this.CX?this.VX():this.LX():this.DX())}isInPlayingState(){return this.BX(0)}isInHiddenState(){return this.BX(6)}resetPreRoll(){this.xX=!1}setVideoQueue(t,i){this.kX.observed||this.IX(),i?this.AX--:this.AX++;const s=this.pX.getAdjustedVideoIndex(t,this.AX);this.kX.next(s),this.mediator.publish(this,fs[fs.VideoQueued],{payload:s})}onEnterCuePoint(){this.gX.pause(),this.MX(12)}onExitCuePoint(){this.BX(6)||(0===this.TX?this.LX():this.FX())}pause(t=!1){this.TX=1,this.BX(2)||this.BX(3)||this.BX(6)||this.BX(12)||this.FX()}pauseToggle(){if(this.BX(1)||this.BX(0))return this.BX(1)&&this.SX?(this.SX=!1,void this.play()):this.BX(0)?(this.SX=!0,void this.pause()):void 0}stop(){this.gX.pause(),this.MX(4)}hide(){this.gX.hide(),this.gX.pause(),this.MX(6)}show(t=!0){this.BX(6)&&(this.gX.show(),3!==this.EX?t&&(0===this.TX?this.LX():this.FX()):this.VX())}handleVideoEnd(){this.mX&&!this.fX?this.RX():this.VX()}onEnterBuffering(){this.BX(0)&&this.MX(7)}onExitBuffering(){this.BX(7)&&(0===this.TX?this.LX():this.FX())}transitionToPlayingOnTimeUpdate(){this.UX()}getCurrentState(){return this.HX}replay(){this.gX.currentTime=0,!this.yX||this.fX?this.LX():this.DX()}exitRollBreak(){3!==this.HX?this.NX():this.VX()}onFullScreenChange(t){this._X&&(this.fX=t,t||setTimeout((()=>{0===this.TX?(this.pause(),this.play()):this.pause()}),this.wX))}destroy(){this.$X.unsubscribe()}PX(){this.HX=4,this.EX=4,this.EY&&(this.xX=!0)}MX(t){this.HX===t||6===this.HX&&0===t||(this.EX=this.HX,this.HX=t,this.mediator.publish(this,fs[fs.StateChanged],{payload:this.HX}))}BX(t){return this.HX===t}DX(){this.MX(2),this.xX=!0}NX(){0===this.TX?this.LX():this.FX()}RX(){this.MX(3)}VX(){1===this.TX?(this.CX=!0,this.stop()):(this.CX=!1,this.mediator.publish(this,fs[fs.ContentEnd]))}FX(){this.gX.pause(),this.MX(1)}jX(){this.$X=this.gX.onVideoEvents.subscribe((t=>{switch(t){case D.wB.Playing:this.zX();break;case D.wB.Error:this.QX();break;case D.wB.Pause:this.qX()}}))}UX(){this.$X.add(this.gX.onVideoEvents.pipe((0,R.h)((t=>t===D.wB.Timeupdate)),(0,U.q)(1)).subscribe((()=>{this.MX(0)})))}zX(){switch(this.HX){case 0:return;case 1:case 4:case 7:this.MX(0);break;case 6:case 2:case 3:this.gX.pause()}}QX(){switch(this.HX){case 7:case 0:this.MX(1)}}qX(){switch(this.HX){case 7:case 0:this.MX(1)}}IX(){var t,i;this.kX.pipe((t=400,void 0===i&&(i=ss.z),(0,Et.e)((function(s,e){var h=null,n=null,o=null,r=function(){if(h){h.unsubscribe(),h=null;var t=n;n=null,e.next(t)}};function a(){var s=o+t,n=i.now();if(n<s)return h=this.schedule(void 0,s-n),void e.add(h);r()}s.subscribe((0,Mt.x)(e,(function(s){n=s,o=i.now(),h||(h=i.schedule(a,t),e.add(h))}),(function(){r(),e.complete()}),void 0,(function(){n=h=null})))}))),(0,U.q)(1)).subscribe((t=>{this.WX(t),this.AX=0})),this.jX()}LX(){this.MX(7),this.pX.getCurrentVideoData((()=>{this.BX(6)||1===this.TX||this.gX.play()}))}GX(){3!==this.HX&&(this.xX=!1)}WX(t){if(this.gX.pause(),this.GX(),this.MX(7),this.JX&&this.JX.isPending)try{this.JX.reject(),this.JX=null}catch(t){this.JX=null}const i=this.pX.setVideo(t);this.JX=new Yi.C,this.JX.resolve(i),this.JX.promise.then((t=>{this.JX=null,this.gX.setSource(t).then((()=>this.play()))})).catch((()=>{this.WX(this.pX.nextVideoIndex)}))}}class Ss extends Cs{play(){if(this.KX)return this.TX=0,this.KX=!1,void this.DX();super.play()}pause(t=!1){this.BX(9)||this.BX(8)||this.BX(10)||(t&&(this.KX=!0),super.pause())}endOfStream(){this.pause(),this.handleVideoEnd()}enterLiveNotSupported(){this.MX(11)}enterLiveStreamStopped(){this.MX(10)}PX(){this.HX=8,this.EX=8}VX(){this.MX(9)}FX(){this.gX.pause(),this.MX(10)}}var ws=s(2283);const ks=ws.w.makeMessageType("contracts.core.pl.v1.PlaylistRequest",(()=>[{no:1,name:"playlist_id",kind:"scalar",T:9},{no:2,name:"event_timestamp",kind:"scalar",T:3},{no:3,name:"page_url",kind:"scalar",T:9},{no:4,name:"bundle_id",kind:"scalar",T:9}]));var As=s(2731);const Ps=ws.w.makeMessageType("contracts.core.pl.v1.PlaylistResponse",(()=>[{no:1,name:"playlist_item_list",kind:"message",T:As.t,repeated:!0}]));var Is=s(7715),Ts=s(8597);class Es{constructor(t,i,s,e,h){this.YX=t,this.Lg=i,this.Dn=s,this.XX=e,this.Rl=h}get playlist(){return this.dE}getPlaylistResponse(){return(0,e.mG)(this,void 0,void 0,(function*(){try{const t=this.ZX(this.YX),i=yield this.tZ(t);return this.dE=this.iZ(i.playlistItemList),Promise.resolve(this.playlist)}catch(t){const{message:i}=(0,S.W$)(t);return(0,k.nF)({message:"ForceMediaPlaylistAggregator_playlistResponse",exception:`Error: ${i}, Playlist: ${this.dE.toString()}`,level:"Warn"},{shouldSendMaxLog:!1,pacing:1}),Promise.reject(t)}}))}ZX(t){return new ks({playlistId:t,eventTimestamp:BigInt((0,P.x8)()),bundleId:this.XX,pageUrl:this.Rl})}tZ(t){return(0,Is.Ou)({endpoint:vs.n.endPoints.content.api.playlist,protoResponse:Ps,protoRequest:ks,shouldLogErrors:!0,requestData:t})}iZ(t){return new Ts.b(this.Lg,t,{playerType:this.Dn}).playlist}}var Ms=s(2453),Bs=s(1765);class Vs{constructor(t,i){this.sZ=t,this.Lg=i,this.TE=[],this.kE=[],this.yE=!1,this.eZ=null}getMetadata(t,i){this.eZ?this.eZ.getMetadata(t,i):this.IE(t,i)}setAvailableQualities(t){var i;null===(i=this.eZ)||void 0===i||i.setAvailableQualities(t)}IE(t,i){return(0,e.mG)(this,void 0,void 0,(function*(){if(t&&this.TE.push(t),i&&this.kE.push(i),this.yE)return;this.yE=!0;const s=yield this.hZ(this.sZ);s&&s.MetadataRevisionNumber?(this.eZ=this.nZ(s.Id,s.MetadataRevisionNumber),this.eZ.getMetadata(t,i)):(0,k.nF)({message:"ForceVideoSourceWrapper_media_info",exception:this.sZ,level:"Warn"},{shouldSendMaxLog:!1,throttle:10})}))}hZ(t){return(0,e.mG)(this,void 0,void 0,(function*(){const i=`${vs.n.endPoints.content.base.mediaInfo}${t}/info`;try{const t=yield(0,ns.Z)({requestUrl:i,requestType:"GET"});return JSON.parse(t)}catch(t){return}}))}nZ(t,i){return new Bs.C(t,i,this.Lg)}}class Ls{constructor(t,i){this.Lg=i,this.oZ=[],this.oZ=t,this.setCurrentVideo(0)}get nextVideoIndex(){return this.rZ===this.oZ.length-1?0:this.rZ+1}get prevVideoIndex(){return 0===this.rZ?this.oZ.length-1:this.rZ-1}get currentVideoIndex(){return this.rZ}get length(){return this.oZ.length}get items(){return this.oZ}set items(t){this.oZ=t}setAvailableQualitiesForSourceMeta(t,i){t.setAvailableQualities(i)}getCurrentVideoData(t,i){this.aZ(this.rZ).getMetadata(t,i)}getVideoData(t,i,s){this.aZ(t).getMetadata(i,s)}getAdjustedVideoIndex(t,i){return 1===i||-1===i?t:i>0?t+i<this.length?t+i:this.length-1:t+i<0?0:t+i}setVideo(t){return new Promise((i=>{this.aZ(t).getMetadata((s=>{this.setCurrentVideo(t),i(s)}))}))}isNextVideoCurrentVideo(){return this.currentVideoIndex===this.nextVideoIndex}addExternalMedia(t){const i=new Ms.G(t);return this.lZ(i),i}addInternalMedia(t){const i=new Vs(t,this.Lg);return this.lZ(i),i}setCurrentVideo(t){this.rZ=t,this.dZ()}destroy(){this.oZ=[]}dZ(){this.aZ(this.rZ).getMetadata()}aZ(t){return this.oZ[t]}lZ(t){0===this.nextVideoIndex?this.oZ.push(t):this.oZ.splice(this.nextVideoIndex,0,t)}}class Ds{constructor(t){this.streamFormat="autoplay",this.isMuted=!0,t===n.Fx.CLICK_TO_PLAY&&(this.streamFormat="user initiated")}get streamFormatValue(){return`${this.streamFormat}${this.isMuted?" muted":""}`}}const Os={[n.SF.HIGH_1080_P]:{quality:D.ZH.Strict,height:1080},[n.SF.HIGH_720_P]:{quality:D.ZH.Strict,height:720},[n.SF.MEDIUM_360_P]:{quality:D.ZH.Strict,height:360}};class Fs extends g._{constructor(t,i,s,e,h,n){super(),this.mediator=t,this.gA=i,this.mp=s,this.aT=e,this.cZ=h,this.uZ=n,this.subscriptions=[],this.vZ=!1,this.pZ=new F.X(!1),this.cz=new F.X(!1),this.gZ=!0,this.yZ=!1,this.mZ(),this.bZ(),this._Z=new Ds(this.gA.playbackMode)}get streamFormat(){return this._Z.streamFormatValue}get isHidden(){return 6===this.xZ.getCurrentState()}get width(){return this.gX.width}get height(){return this.gX.height}get volume(){return this.gX.volume}get isIosFullscreen(){return this.gX.isIosFullscreen}get currentTime(){return this.gX.currentTime}get duration(){return this.gX.duration}get areCaptionsEnabled(){return this.gX.areCaptionsEnabled}set hasPostroll(t){this.xZ.hasPostroll=t}set hasPreroll(t){this.xZ.hasPreroll=t}set volume(t){var i;this.yZ=!0,this.gX.volume=t,null===(i=this.CJ)||void 0===i||i.updateVolume(t),this._Z.isMuted=t<=0}set isIosFullscreen(t){this.gX.isIosFullscreen=t}set currentTime(t){this.xZ.pauseToggle(),this.gX.currentTime=t,setTimeout((()=>this.xZ.pauseToggle()),0)}start(t){return(0,e.mG)(this,void 0,void 0,(function*(){this.updateFloatingState(!!t),this.Gc()}))}play(t=!1){t&&(this.mediator.publish(this,"userInteraction",{payload:{playback:!0}}),this._Z.streamFormat="user initiated");const i=this.gA.playbackMode===n.Fx.CLICK_TO_PLAY,s=this.gA.soundMode===n.zj.ON;this.gZ&&s&&i&&(this.volume=this.yZ?this.volume:(0,S.we)()?1:0,this.gZ=!1),this.xZ.play()}pause(t=!1){t&&this.mediator.publish(this,"userInteraction",{payload:{playback:!1}}),this.xZ.pause(t)}setVideo(t,i=!1){this.xZ.setVideoQueue(t,i)}show(t=!0){this.xZ.show(t)}hide(){this.xZ.hide()}blurVideoTag(){this.gX.blurVideoTag()}enterFullscreen(){this.oF=!0,(0,as.fh)()||(this.WY=this.gX.currentQualitySettings.height,this.setAutoQuality()),this.CJ.enterFullscreen(),this.xZ.onFullScreenChange(!0)}exitFullscreen(){this.oF=!1,(0,as.fh)()||this.setQuality(this.WY),this.CJ.exitFullscreen(),this.xZ.onFullScreenChange(!1)}resize(t){var i,s;null===(s=(i=this.CJ).onResize)||void 0===s||s.call(i,t)}getCurrentVideoData(t){return this.pX.getCurrentVideoData(t)}getVideoData(t,i,s){return this.pX.getVideoData(t,i,s)}getUpNextVideoData(t){return this.pX.getVideoData(this.pX.nextVideoIndex,t)}toggleCaptions(){this.gX.hasSubtitles()&&(this.gX.toggleCaptions(),this.CJ.toggleCaptionButton(!0),this.mediator.publish(this,Z.C[Z.C.CaptionOn]))}togglePlay(){return this.gX.togglePlay()}toggleMute(){this.gX.toggleMute(),this.CJ.updateVolume(this.gX.volume)}increaseVolume(t){this.gX.increaseVolume(t),this.CJ.updateVolume(this.gX.volume)}decreaseVolume(t){this.gX.decreaseVolume(t),this.CJ.updateVolume(this.gX.volume)}showCaptions(t){this.gX.hasSubtitles()&&(this.gX.showCaptions(t),this.CJ.toggleCaptionButton(!0),this.mediator.publish(this,Z.C[Z.C.CaptionOn]))}getSelectedCaption(){return this.gX.getSelectedCaption()}updateCaptionsMenuUI(t){this.CJ.updateDefaultCaption(t)}getSubtitles(){return this.gX.getSubtitles()}hideCaptions(){this.gX.hideCaptions(),this.CJ.toggleCaptionButton(!1),this.mediator.publish(this,Z.C[Z.C.CaptionOff])}toggleExpandButton(t){var i,s;null===(s=(i=this.CJ).toggleExpandButton)||void 0===s||s.call(i,t)}toggleExpandButtonState(t){this.CJ.updateExpandButtonState(t)}getQuality(){let t;return this.pX.getCurrentVideoData((i=>{t=i.getClosestSourceQuality(this.gX.currentQualitySettings.height).videoHeight})),t}setQuality(t){this.pX.getCurrentVideoData((i=>{if((0,C.BZ)(i.getAvailableQualities())){const s=i.getClosestSourceQuality(t);this.gX.setQuality({height:s.videoHeight,quality:D.ZH.Strict})}else this.gX.setQuality({height:t,quality:D.ZH.Strict})}))}setAutoQuality(){this.gX.setQuality({height:this.gX.height,quality:D.ZH.Auto})}getAvailableQualities(){let t=[];return this.pX.getCurrentVideoData((i=>{t=i.getAvailableQualities().map((t=>t.videoHeight))})),t}stop(){this.xZ&&this.xZ.stop()}resume(){this.xZ&&this.xZ.resume()}startContent(){this.xZ.exitRollBreak()}destroy(){var t,i;null===(t=this.CJ)||void 0===t||t.destroy(),this.pX.destroy(),this.gX.destroy(),this.xZ.destroy(),null===(i=this.uZ)||void 0===i||i.destroy(),(0,A.i)(this.subscriptions),this.WT(this)}canPlay(){return this.pZ.asObservable()}onReady(){return this.cz.asObservable()}updateFloatingState(t){var i,s;this.CJ&&(null===(s=(i=this.CJ).updateFloatingState)||void 0===s||s.call(i,t)),this.fZ=t}updateChapter(t){this.pX.getCurrentVideoData((i=>{var s;i.clickUrl=t.clickUrl,null===(s=this.CJ)||void 0===s||s.updateCurrentVideo(i)}))}getChapterCurrentPosition(){return this.uZ.getCurrentChapterPosition()}setVideoChapterPosition(t){const i=this.uZ.getChapterStartTime(t);this.currentTime=i}preloadDependencies(){return(0,e.mG)(this,void 0,void 0,(function*(){yield this.CZ()}))}navigateToClickUrl(t,i=!0){this.pX.getCurrentVideoData((s=>{var e;const h=this.xZ.isInPlayingState(),n=(null===(e=this.uZ)||void 0===e?void 0:e.getCurrentClickUrl())||s.clickUrl;if((0,I.QM)(n)){const s=this.mp.services.MacrosService.setupMacros(n);t&&null!==this.uZ.getCurrentChapter()?this.SZ(h,t):this.wZ(s,i);const e=t?Z.C.OverlayClick:Z.C.CtaClick;this.mediator.publish(this,Z.C[e],{payload:{isPlaying:h,clickUrl:s}})}else this.SZ(h,t)}))}loadInternalPlaylist(t){return(0,e.mG)(this,void 0,void 0,(function*(){if(!(0,S.er)(t))throw new Error(`Invalid GUID: ${t}`);this.xZ.isInHiddenState()||this.xZ.pause();const i=new Es(t,this.gA.urlSuffixerService,this.gA.playerType,this.mp.config.bundleID,this.mp.config.pageUrl),s=yield i.getPlaylistResponse();return this.gA.playlistId=t,this.gA.playlist=s,this.kZ(s),this.AZ(),this.xZ.resetPreRoll(),this.xZ.isInHiddenState()||this.xZ.play(),this.gA.playlist}))}getPlaybackIntention(){return this.xZ.playbackIntention}AZ(){return new Promise(((t,i)=>{try{this.pX.getCurrentVideoData((i=>(0,e.mG)(this,void 0,void 0,(function*(){yield this.gX.setSource(i),this.CJ.updateCurrentVideo(i),this.PZ(i),this.IZ(i,this.gX.currentQualitySettings),t()}))),(()=>i(new Error("getCurrentVideoData fail callback"))))}catch(t){i(t)}}))}TZ(){this.U(fs[fs.StateChanged],this.xZ,(({payload:t})=>{this.CJ.changeState(t);[7,3].includes(t)&&this.gX.pauseAudio(),this.mediator.publish(this,zi.StateChanged,{payload:t})})),this.U(fs[fs.ContentEnd],this.xZ,(()=>{this.EZ()})),this.U(fs[fs.VideoQueued],this.xZ,(({payload:t})=>{this.mediator.publish(this,zi.VideoQueued,{payload:{videoIndex:t}})}))}SJ(){this.subscriptions.push(this.CJ.onUIEvent.subscribe((t=>{switch(t.type){case"play":if(this.gZ&&this.gA.playbackMode===n.Fx.CLICK_TO_PLAY){const t=this.yZ?this.volume:this.gA.soundMode===n.zj.ON?1:0;this.volume=t,this.mediator.publish(this,Z.C[Z.C.Volume],{payload:{volume:t}})}this.gZ=!1,this.mediator.publish(this,"userInteraction",{payload:{playback:!0}}),this.play();break;case"volume":{const{volume:i}=t.payload;this.gX.volume=i,this._Z.isMuted=i<=0,this.mediator.publish(this,"userInteraction",{payload:{volume:!0}}),this.mediator.publish(this,Z.C[Z.C.Volume],{payload:{volume:i}});break}case"pause":{this.mediator.publish(this,"userInteraction",{payload:{playback:!1}});const t=!0;this.pause(t);break}case"seek":{const{seekedTime:i}=t.payload;this.MZ=i;break}case"seekstart":this.xZ.pauseToggle();break;case"seekstop":this.gX.forceCurrentTime(this.MZ),this.xZ.pauseToggle();break;case"ctaclick":this.navigateToClickUrl(!1,!1);break;case"overlayclick":this.navigateToClickUrl(!0);break;case"expand":this.mediator.publish(this,Z.C[Z.C.Expand]);break;case"collapse":this.mediator.publish(this,Z.C[Z.C.Collapse]);break;case"quality":{const{quality:i}=t.payload;this.gX.setQuality(i);break}case"close":this.LZ();break;case"captionon":{const{captionUrl:i}=t.payload;this.showCaptions(i);break}case"captionoff":this.hideCaptions();break;case"generaluserinteraction":this.mediator.publish(this,"generalUserInteraction",{payload:t.payload});break;case"apiButton":this.mediator.publish(this,Z.C[Z.C.ApiButton],{payload:t.payload})}}))),this.U(Z.C[Z.C.CaptionOn],this.gX,(()=>{this.CJ.toggleCaptionButton(!0)})),this.U(Z.C[Z.C.CaptionOff],this.gX,(()=>{this.CJ.toggleCaptionButton(!1)})),this.U(Z.C[Z.C.CaptionUpdate],this.gX,(({payload:t})=>{this.CJ.updateActiveCue(t)}))}GX(t){var i;if(t){if(this.DZ(t),this.CJ.updateCurrentVideo(t),this.PZ(t),this.IZ(t,this.gX.currentQualitySettings),this.gA.closedCaptionDefault&&t.subtitles){const s=null===(i=t.getDefaultSubtitle())||void 0===i?void 0:i.file;setTimeout((()=>{this.showCaptions(s),this.CJ.updateDefaultCaption(s)}),0)}else this.hideCaptions(),this.CJ.updateDefaultCaption();this.CJ.updateActiveCue()}this.mediator.publish(this,"newVideo",{payload:{videoIndex:this.pX.currentVideoIndex,videoMetadata:t}}),this.vZ=!1,this.OZ()}Gc(){this.FZ(),this.RZ(),this.UZ()}HZ(){const{logoPosition:t,logoUrl:i,upNextMode:s,accentColor:e,iconsColor:h,tooltipBackgroundColor:n,tooltipTextColor:o,closeButtonMode:r,isCloseButton:a,uiComponentsVisibility:l,sharingDestinations:d,closedCaptionDefault:c,alwaysDisplayControls:u,preloadFloating:v,enableNewUI:p,progressButtonsTimeDuration:g,disableClickUrl:y,floatingSettings:{floatingCloseButtonMode:m,isPinnedPlayerFloating:b}}=this.gA,{config:{isMobile:_,bundleID:x,sdkVersion:f,os:{os:C}}}=this.mp;return{logoPosition:t,logoUrl:i,isMobile:_,hasUpNext:s===H.XZ.NEXT,accentColor:e||"#0099FF",iconsColor:h||"#FFFFFF",tooltipBackgroundColor:n||"#000000",tooltipTextColor:o||"#FFFFFF",closeButtonMode:r,floatingCloseButtonMode:m,isCloseButton:a,uiComponentsVisibility:l,sharingDestinations:d,closedCaptionDefault:c,alwaysDisplayControls:u,os:C,sdkVersion:f,isPinned:b,preloadFloating:v,enableNewUI:p,progressButtonsTimeDuration:g,isInApp:(0,I.QM)(x),disableClickUrl:y}}bZ(){const{config:{os:{os:t,osVersion:i},browser:{browserType:s}}}=this.mp,e={browser:s,os:t,osVersion:i},h=this.gA.soundMode===n.zj.ON&&this.gA.playbackMode!==n.Fx.CLICK_TO_PLAY?1:0;this.RJ=Os[this.gA.videoQuality],this.NZ(e,h),this.U(D.XQ.Loaded,this.gX,(({payload:{qualityList:t,videoMeta:i}})=>{this.pX.setAvailableQualitiesForSourceMeta(i,t),this.CJ&&this.CJ.updateCurrentVideo(i)})),this.U("buffering",this.gX,(()=>{this.xZ.onEnterBuffering()})),this.U("buffered",this.gX,(()=>{this.xZ.onExitBuffering()}))}kZ(t){this.pX.items=t,this.pX.setCurrentVideo(0),this.CJ.togglePlaylistControls(this.pX.length>1)}SZ(t,i){i&&(t?this.pause(!0):this.play(!0))}$Z(t,i){i&&this.mediator.publish(this,"generalUserInteraction",{payload:{type:j.f.URL_CLICK,clickUrl:t}})}IZ(t,i){const s=t.getAvailableQualities();if((0,C.BZ)(s)){const s=t.getClosestSourceQuality(i.height).isHD;this.CJ.updateQuality(i,s)}}DZ(t){const{duration:i,title:s,description:e,clickUrl:h,id:n}=t,{services:{MacrosService:o}}=this.mp;o.setVideoDuration(i),o.setVideoTitle(s),o.setVideoDescription(e),o.setVideoUrl(h),o.setVideoId(n)}mZ(){this.pX=new Ls(this.gA.playlist,this.mp.services.UrlSuffixerService)}CZ(){return(0,e.mG)(this,void 0,void 0,(function*(){const t=this.HZ();yield this.jZ(t),1===this.pX.length&&this.CJ.togglePlaylistControls(!1),this.CJ.updateVolume(this.gA.soundMode===n.zj.ON?1:0)}))}FZ(){this.relay("playError",this.gX,this,this.mediator),this.U("newVideo",this.gX,(({payload:t})=>{const i=null==t?void 0:t.videoMetadata;this.GX(i)}))}RZ(){this.U(D.wB.LoadedMetadata,this.gX,(t=>{this.CJ.updateCurrentTime(this.gX.currentTime,this.gX.duration)})),this.U(D.wB.Durationchange,this.gX,(t=>{this.mediator.publish(this,D.wB.Durationchange,{payload:{duration:this.gX.duration}})})),this.U(D.wB.Timeupdate,this.gX,(({payload:{isPlaying:t}})=>{this.CJ.updateCurrentTime(this.gX.currentTime,this.gX.duration),this.mp.services.MacrosService.setVideoTime(this.gX.currentTime),!this.vZ&&t&&(this.vZ=!0,this.mediator.publish(this,zi.FirstFramePlayed)),this.gX.currentTime!==this.zZ&&this.QZ(t),this.zZ=this.gX.currentTime,this.mediator.publish(this,D.wB.Timeupdate,{payload:{currentTime:this.gX.currentTime}})})),this.U(D.wB.Volumechange,this.gX,(({payload:{isMuted:t}})=>{this.isIosFullscreen&&(this.volume=t?0:1)})),this.U(D.wB.Ended,this.gX,(()=>{this.xZ.handleVideoEnd()})),this.U(D.wB.BufferProgress,this.gX,(({payload:{bufferRanges:t}})=>{const i=t||null;this.CJ.updateBufferedState(i)}))}UZ(){this.U(D.XQ.CurrentQuality,this.gX,(({payload:t})=>{this.pX.getCurrentVideoData((i=>{this.IZ(i,t)}))})),this.U(D.XQ.Change,this.gX,(({payload:t})=>{this.pX.getCurrentVideoData((i=>{const s=i.getAvailableQualities();if((0,C.BZ)(s)){const s=i.getClosestSourceQuality(t);this.RJ={quality:D.ZH.Strict,height:s.videoHeight},this.mediator.publish(this,D.XQ.Change,{payload:s.videoHeight})}}))}))}PZ(t){const i=t.getThumbnailUrl(this.aT.clientWidth,this.aT.clientHeight);this.mediator.publish(this,D.d0.NewThumbnail,{payload:{thumbnailUrl:i}})}LZ(){this.mediator.publish(this,"userInteraction",{payload:{isFullscreenClose:this.oF,isFloatingModeClose:this.fZ}}),this.mediator.publish(this,Z.C[Z.C.Close])}wZ(t,i=!0){this.gA.disableClickUrl||(this.mp.services.MacrosService.setVideoTime(this.gX.currentTime),this.mp.services.GlobalDomUtilsService.open(t,"_blank")),this.$Z(t,i)}}class Rs extends Fs{constructor(){super(...arguments),this.qZ=!1,this.WZ=()=>{this.pX.getCurrentVideoData((()=>{this.gX.onVideoEvents.pipe((0,R.h)((t=>t===D.wB.Playing&&!this.qZ)),(0,U.q)(1),Vt((()=>this.qZ=!0))).subscribe((()=>{this.xZ.enterLiveStreamStopped(),this.gX.pause(),this.pZ.next(!0)})),this.gX.play().catch((()=>{}))})),this.gX.play()},this.GZ=()=>{this.xZ.endOfStream(),this.gX.endOfStream()}}start(){const t=Object.create(null,{start:{get:()=>super.start}});return(0,e.mG)(this,void 0,void 0,(function*(){yield t.start.call(this),this.JZ(),this.TZ(),this.gX.hlsSupported?(this.gX.start(),this.AZ().then((()=>{this.WZ(),this.cz.next(!0)}))):this.xZ.enterLiveNotSupported()}))}destroy(){this.KZ(),this.YZ(),super.destroy()}jZ(t){return(0,e.mG)(this,void 0,void 0,(function*(){const{services:{GlobalDomUtilsService:i,InteractionService:s,ResizeObserver:e},config:{appId:h}}=this.mp;this.CJ=new Ji(i,s,e,this.aT,h),this.SJ(),yield this.CJ.start(t,!0,this.cZ)}))}QZ(t){this.ZZ(t)}OZ(){}EZ(){}TZ(){const{preRollBreak:t,postRollBreak:i,videoPosition:s}=this.gA,e=(0,I.r)(t),h=(0,I.r)(i);this.xZ=new Ss(this,this.pX,this.gX,e,h,this.mp.config.os.os===Ht.M.Ios,s),super.TZ()}bZ(){super.bZ(),this.U("liveNotPlayable",this.gX,(()=>{clearTimeout(this.t0),this.t0=setTimeout(this.WZ,10*z.s_)}))}NZ(t,i){const{services:{GlobalDomUtilsService:s,ResizeObserver:e}}=this.mp;this.gX=new xs(this,this.mp,s,this.aT,e,i,t,!0,this.gA.videoPosition)}JZ(){this.U("endOfStream",this.gX,this.GZ),this.U("levelSwitching",this.gX,(()=>{this.xZ.onEnterBuffering()}))}ZZ(t){this.KZ(),t&&(this.i0=setInterval((()=>{this.xZ.isInPlayingState()&&(this.GZ(),this.KZ())}),10*z.s_))}KZ(){this.i0&&(clearInterval(this.i0),this.i0=null)}YZ(){this.t0&&(clearInterval(this.t0),this.t0=null)}}class Us extends Wi{start(){const t=Object.create(null,{start:{get:()=>super.start}});return(0,e.mG)(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.yq()}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"LiveExperience_start",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}}))}mJ(){this.JV=new Rs(this,this.gA,this.mp,this.Zz,this.gq.currentBreakpointClass)}qG(){}qQ(){this.DQ.isInAdPod()?this.WQ((()=>{super.qQ(),this.lQ.onAdFinished(this.KV.linearInImpression,O.k.LINEAR,this.DQ.isInAdPod()),this.JV.show(true)})):(super.qQ(),this.JV.show(true))}YG(){super.YG(),this.U(D.d0.NewThumbnail,this.JV,(({payload:{thumbnailUrl:t}})=>{this.KV&&this.KV.setAdLoadingBackgroundUrl(t)}))}}var Hs=s(6374),Ns=s(8165);class $s{constructor(t){this.VV=t,this.BP={},this.s0=(t,i)=>this.ps.on(t,i),this.e0=(t,i)=>{this.ps.remove(t,i)},this.h0=()=>{this.ps.removeAll()},this.n0=(t,i)=>{this.ps.once(t,i)},this.o0=()=>this.VV.isViewable(),this.r0=t=>{this.VV.setViewableThreshold(t)},this.a0=()=>{this.VV.play()},this.l0=()=>{this.VV.pause()},this.c0=()=>this.VV.getVolume(),this.v0=t=>{this.VV.setVolume(t)},this.Og=()=>{this.VV.triggerDestroy()},this.LE=()=>{this.VV.disableAdvertising()},this.p0=()=>{this.VV.disableAdsInBackground()},this.g0=()=>{this.VV.enableAdvertising()},this.y0=()=>{this.VV.enableAdsInBackground()},this.m0=()=>{this.VV.enableFloatingMode()},this.b0=()=>{this.VV.disableFloatingMode()},this._0=()=>this.VV.isFloatingModeEnabled(),this.x0=t=>{this.VV.setFloatingSettings(t)},this.f0=(t,i)=>this.VV.setLineItemMetadata(t,i),this.C0=t=>this.VV.startConnatixAuction(t),this.S0=()=>this.VV.getFloatingSettings(),this.k0=t=>{this.VV.setCustomMacros(t)},this.A0=t=>this.VV.getMacroValue(t),this.P0=t=>{this.VV.setAmpUserConsent(t)},this.I0=t=>{Ns.n.CONNECTION_TYPE=t},this.T0=t=>{this.VV.updateJsQueryTargeting(t)},this.E0=t=>{this.VV.removeJsQueryTargeting(t)},this.M0=()=>Ns.n.CONNECTION_TYPE,this.B0=()=>this.VV.getApiConfig(),this.V0=()=>this.VV.getSessionDataConfig(),this.ps=new Hs.Q}trigger(t,i){this.ps.trigger(t,i)}setDestroyed(){this.trigger(l.Km.Removed)}getApiMethods(){return{_internals:this.BP,on:this.s0,remove:this.e0,removeAll:this.h0,once:this.n0,isViewable:this.o0,setViewableThreshold:this.r0,play:this.a0,pause:this.l0,getVolume:this.c0,setVolume:this.v0,disableAdvertising:this.LE,disableAdsInBackground:this.p0,enableAdvertising:this.g0,enableAdsInBackground:this.y0,enableFloatingMode:this.m0,disableFloatingMode:this.b0,isFloatingModeEnabled:this._0,setFloatingSettings:this.x0,getFloatingSettings:this.S0,setMacros:this.k0,getMacroValue:this.A0,setAmpUserConsent:this.P0,destroy:this.Og,updateConnectionType:this.I0,getConnectionType:this.M0,updateJsQueryTargeting:this.T0,removeJsQueryTargeting:this.E0,setLineItemMetadata:this.f0,startConnatixAuction:this.C0,getApiConfig:this.B0,getSessionDataConfig:this.V0}}addService(t,i){this.BP[t]=i}}class js extends $s{constructor(){super(...arguments),this.L0=()=>this.VV.type,this.gb=()=>this.VV.getSize(),this.D0=(t,i)=>{this.VV.setSize(t,i)},this.O0=t=>{this.VV.updateDynamicCuePoints(t)}}getApiMethods(){return Object.assign(Object.assign({},super.getApiMethods()),{getPlayerType:this.L0,getSize:this.gb,setSize:this.D0,updateDynamicCuePoints:this.O0})}}class zs extends js{}var Qs=s(6916);class qs extends Ai{constructor(){super(...arguments),this.events=Object.assign(Object.assign({},l.Km),Pi.X),this.F0=!1,this.R0=!1,this.U0=!1,this.H0=t=>{"max-height"===t.propertyName&&(this.Uz.removeEventListener("transitionend",this.H0),this.HQ())}}get currentTime(){return 0}get duration(){return 0}start(){const t=Object.create(null,{start:{get:()=>super.start}});return(0,e.mG)(this,void 0,void 0,(function*(){try{yield t.start.call(this),this.KQ(),this.az.push(this.uz.subscribe((()=>{var t,i;if(this.KV){const s=this.gA.uiComponentsVisibility.expandButton&&this.mp.config.os.os!==Ht.M.Ios;this.KV.start(this.Zz.clientWidth,this.Zz.clientHeight,this.gA.soundMode===n.zj.ON?1:0,{shouldShowExpandButton:s,closeButtonLocation:0},!1),this.lQ.onOutstreamExperienceAdHandlerInit(),s&&this.KV.initFullScreen(),this.lQ.forceRecheck(),null===(t=this.KV)||void 0===t||t.onVpaidEvent.subscribe((t=>{if(t.type===Q.f.AdImpression){const{clientWidth:i,clientHeight:s}=t.payload.payload.selectedAdSlot;this.N0({width:i,height:s})}})),null===(i=this.KV)||void 0===i||i.onLinearUiComponentEvent.subscribe((t=>{switch(t.type){case Z.C.Volume:{const{volume:i}=t.payload;this.cu(i);break}case Z.C.Expand:this.expand();break;case Z.C.Collapse:this.collapse()}}))}else this.$0();this.z0()}))),this.U(nt,this.lQ,(()=>{this.Q0()})),this.U(ot,this.lQ,(()=>{this.Q0()})),this.gA.outstreamSettings.initialRendering===H.Wr.EXPAND_WITH_AD&&(this.$0(),(0,it.Tp)(this.Zz)),(0,it.cn)(this.Uz,"cnx-mod-collapsable"),this.W0(),this.gA.outstreamAdAsContent||(yield this.G0()),this.yq()}catch(t){const{message:i,stack:s}=(0,S.W$)(t);(0,k.nF)({message:"Outstream_start",exception:i,callStack:s,level:"Critical",sessionId:this.gA.sessionId})}}))}getVolume(){if(this.KV)return this.KV.getLinearVolume()}destroy(){super.destroy(),this.J0&&this.J0.destroy()}expand(){var t;null===(t=this.J0)||void 0===t||t.getComponent(Qs.r.ExpandButton).setState(1)}collapse(){var t;null===(t=this.J0)||void 0===t||t.getComponent(Qs.r.ExpandButton).setState(0)}wq(){var t;return(0,e.mG)(this,void 0,void 0,(function*(){const i=!!(null===(t=this.Mz)||void 0===t?void 0:t.isInFloating),{OutstreamAdHandler:s}=yield(0,ht.r)();return new s(i,this.lQ.isAdvertisingDisabled,this.gA,this.ls,this.Zz,this.Mz?this.Mz.checkFloatingViewability(this.isViewable()):this.isViewable(),this.DQ,this.mp,this._appSettings,this.Lg,0)}))}HQ(){this.triggerDestroy()}Au(){super.Au(),this.W0()}jQ(t=!1){super.jQ(t),this.F0&&this.K0()}YQ(t,i=!1){super.YQ(t,i),!this.R0&&t&&(this.R0=!0,this.z0())}qQ(){this.DQ.isInAdPod()?this.WQ((()=>{this.lQ.onAdFinished(this.KV.linearInImpression,O.k.LINEAR,this.DQ.isInAdPod()),super.qQ(),this.Y0(),this.DQ.setNewBreak(N.It.MID_ROLL_SLOT)})):(super.qQ(),this.DQ.setNewBreak(N.It.MID_ROLL_SLOT),this.Y0())}$Q(){super.$Q(),this.X0()}kW(){super.kW(),this.gA.playerSize.responsive?this.QQ.appendChild(this.hq()):this.AW(this.QQ)}iq(){super.iq()}LQ(){this.wQ(3)}Z0(){}Q0(){this.KV&&this.KV.linearInImpression?this.F0=!0:this.K0()}K0(){this.lQ.onContentStop(),this.gA.outstreamSettings.endAdBreakPolicy===H.wH.HIDE&&this.$0(!0),this.mediator.publish(this,Pi.X.AdCycleComplete)}t1(){const{logoPosition:t,logoUrl:i,isCloseButton:s,closeButtonMode:e,uiComponentsVisibility:{expandButton:h},outstreamSettings:{houseScreenBackgroundColor:n}}=this.gA;return{logoPosition:t,logoUrl:i,isCloseButton:s,closeButtonMode:e,backgroundColor:n,uiComponentsVisibility:{expandButton:h&&this.mp.config.os.os!==Ht.M.Ios}}}G0(){return(0,e.mG)(this,void 0,void 0,(function*(){let t;try{t=yield Gi()}catch(t){throw t}const{UiOutstream:i,OutstreamTemplate:s}=t,e=this.t1(),h=new s(e).template,{services:{GlobalDomUtilsService:n,InteractionService:o}}=this.mp;this.J0=new i(this,this.Zz,n,o,e,h),this.U(Z.C[Z.C.Close],this.J0,(()=>{this.mediator.publish(this,et.S.CloseButtonClicked),this.HQ()})),this.U(Z.C[Z.C.Expand],this.J0,(()=>{this.KV.enterFullScreen()})),this.U(Z.C[Z.C.Collapse],this.J0,(()=>{this.KV.exitFullscreen()}))}))}N0(t){this.U0&&((0,it.IV)(this.Uz,"cnx-in-collapse"),this.mediator.publish(this,Pi.X.Collapsed,{payload:!1}),this.U0=!1,this.TQ(t))}$0(t=!1){if(!this.U0){if(t){const t=setTimeout((()=>{this.Uz.removeEventListener("transitionend",this.H0),this.HQ()}),1e3);this.Uz.addEventListener("transitionend",(i=>{clearTimeout(t),this.H0(i)}))}(0,it.cn)(this.Uz,"cnx-in-collapse"),this.mediator.publish(this,Pi.X.Collapsed,{payload:!0}),this.U0=!0,this.IQ()}}W0(){this.Uz.style.maxHeight=`${this.Zz.clientHeight}px`}X0(){this.J0&&this.J0.hide()}Y0(){this.J0&&this.J0.show()}z0(){var t;if(this.gA.adPlaybackMode===n.ZA.SCROLL_TO_PLAY&&!this.R0)return;this.EQ(N.It.MID_ROLL_SLOT);null===(t=this.KV)||void 0===t||t.contentPlaybackStateChanged(true),this.lQ.contentPlaybackStateChanged(true)}}function Ws(t){(0,k.nF)({level:"Info",message:"JS_API_METHODS",exception:`${t} Playspace method not supported on Elements`},{pacing:1}),console.warn("Playspace JS API method not supported on Elements")}const Gs={getStoryPosition:()=>(Ws("getStoryPosition"),0),setStoryPosition(t){Ws("setStoryPosition")},getStoryId:()=>(Ws("getStoryId"),""),getStoryName:()=>(Ws("getStoryName"),""),getStoryTimeline:()=>(Ws("getStoryTimeline"),[]),setCtaLabel(t,i){Ws("setCtaLabel")},getStoryMetadata:()=>(Ws("getStoryMetadata"),[]),getLayout:()=>(Ws("getLayout"),0),setLayout(t){Ws("setLayout")},getPlayerSize:()=>(Ws("getPlayerSize"),{width:0,height:0})};class Js extends js{constructor(t){super(t),this.VV=t,this.i1=()=>this.VV.getVideoDetails(),this.$D=()=>this.VV.getPlaylistId(),this.s1=()=>this.VV.getPlaylistDetails(),this.e1=()=>this.VV.getAllMetadata(),this.h1=t=>this.VV.setPlaylistDetails(t),this.n1=()=>this.VV.currentTime,this.o1=t=>this.VV.trackCustomClick(t),this.a1=t=>{this.VV.setVideoPosition(t)},this.l1=()=>this.VV.duration,this.d1=(t,i)=>{this.VV.toggleFullscreen(t,i)},this.c1=(t,i)=>{this.VV.toggleCaptions(t,i)},this.u1=()=>this.VV.getSubtitles(),this.v1=(t,i)=>{t&&t.file?this.VV.showCaptions(t.file,i):this.VV.hideCaptions(i)},this.g1=t=>{this.VV.toggleExpandButton(t)},this.m1=t=>{this.VV.toggleExpandButtonState(t)},this.b1=()=>this.VV.getQuality(),this._1=t=>{this.VV.setQuality(t)},this.f1=()=>{this.VV.setAutoQuality()},this.C1=()=>this.VV.getAvailableQualities(),this.w1=t=>{this.VV.nextVideo(t)},this.A1=t=>{this.VV.prevVideo(t)},this.P1=t=>{this.VV.setPreRollBreak(t)},this.I1=t=>{this.VV.setPostRollBreak(t)},this.T1=()=>this.VV.getVideoIndex(),this.E1=t=>{this.VV.setVideoIndex(t)},this.M1=()=>this.VV.getChapterCurrentPosition(),this.B1=t=>{this.VV.setVideoChapterPosition(t)},this.V1=t=>{this.VV.play(!0,t)},this.L1=t=>{this.VV.pause(!0,t)},this.D1=(t,i)=>{this.VV.setVolume(t,i)},this.O1=t=>{this.VV.loadExternalMedia(t)},this.F1=t=>{this.VV.loadInternalMedia(t)},this.R1=t=>{this.VV.loadInternalPlaylist(t)}}getApiMethods(){return Object.assign(Object.assign(Object.assign({},super.getApiMethods()),Gs),{getVideoDetails:this.i1,getVideoCurrentPosition:this.n1,setVideoPosition:this.a1,getVideoDuration:this.l1,toggleFullscreen:this.d1,toggleSubtitles:this.c1,getSubtitles:this.u1,setSubtitle:this.v1,toggleFullscreenButton:this.g1,toggleFullscreenButtonState:this.m1,getPlaylistId:this.$D,getPlaylistDetails:this.s1,getAllMetadata:this.e1,setPlaylistDetails:this.h1,getQuality:this.b1,setQuality:this._1,setAutoQuality:this.f1,getAvailableQualities:this.C1,nextVideo:this.w1,prevVideo:this.A1,setPreRollBreak:this.P1,setPostRollBreak:this.I1,getVideoIndex:this.T1,setVideoIndex:this.E1,getChapterCurrentPosition:this.M1,setVideoChapterPosition:this.B1,play:this.V1,pause:this.L1,setVolume:this.D1,trackCustomClick:this.o1,loadExternalMedia:this.O1,loadInternalMedia:this.F1,loadInternalPlaylist:this.R1})}}var Ks=s(3741),Ys=s(9);let Xs=class{constructor(t){this.Ta=t,this.wE=[],this.U1=null,this.Li=[],this.Li.push(t.newMedia.subscribe((t=>{this.wE=t.chapters,this.wE.length?this.H1(this.wE[0]):this.U1=null})),t.mediaTimeUpdate.subscribe((t=>{if(this.wE.length&&(0,I.hj)(t)){const i=function(t,i){if(!(0,I.hj)(i))return null;let s=0,e=null;for(const h of t)if(e=h,s+=e.duration,s>i)break;return e}(this.wE,t);this.H1(i)}})))}getCurrentChapter(){return this.U1}destroy(){(0,A.i)(this.Li)}getCurrentClickUrl(){return this.U1?this.U1.clickUrl:""}getCurrentChapterPosition(){return this.U1?this.U1.index:0}getChapterStartTime(t){return function(t,i){if(i>t.length)return 0;let s=0,e=0;for(;s<i;)e+=t[s].duration,s++;return e}(this.wE,t)}H1(t){t!==this.U1&&null!==t&&(this.U1=t,this.Ta.newChapter.next(this.U1))}};Xs=(0,e.gn)([(0,Zt.b2)(),(0,Zt.Yn)(Zt.Fw.ContainerScoped),(0,e.fM)(0,(0,Zt.f3)(Ys.z)),(0,e.w6)("design:paramtypes",[Object])],Xs);var Zs=s(7030);class te{constructor(t,i){this.Xt=t,this.N1=i,this.$f=null}startTimer(){this.Mk(),this.$f=this.Xt.setTimeout((()=>{this.N1()}),5e3)}stopTimer(){this.Mk()}Mk(){this.$f&&(this.Xt.clearTimeout(this.$f),this.$f=null)}}function ie(t){try{return"customElements"in t?t.CustomElementRegistry.toString().includes("[native code]")?"native_method":"polyfill":"not_supported"}catch(t){return"error"}}function se(t){try{return t.document.head.attachShadow?t.document.head.attachShadow.toString().includes("[native code]")?"native_method":"polyfill":t.document.head.createShadowRoot?"deprecated_method":"not_supported"}catch(t){return"error"}}var ee=s(8689);class he{constructor(t,i,s,e,n){this.fV=t,this.W=i,this.Vc=s,this.co=e,this.iw=n,this.VG=[],this.fJ=new h.x,this.j1=!1,this.ro=()=>{var t;this.z1.updateWidth(this.fV.clientWidth),null===(t=this.q1)||void 0===t||t.onResize(this.z1.currentBreakpointClass)},this.wa=t=>{var i;null===(i=this.q1)||void 0===i||i.onViewabilityCallback(t)},this.z1=new qt(this.fV,ui,d.Nq)}get onUIEvent(){return this.fJ.asObservable()}destroy(){(0,A.i)(this.VG),this.W1()}enterFullscreen(){var t;null===(t=this.q1)||void 0===t||t.expand()}exitFullscreen(){var t;null===(t=this.q1)||void 0===t||t.collapse()}toggleCaptionButton(t){var i;null===(i=this.q1)||void 0===i||i.toggleCaptionButton(t)}togglePlaylistControls(t){var i;null===(i=this.q1)||void 0===i||i.togglePlaylistControls(t)}updateExpandButtonState(t){var i;null===(i=this.q1)||void 0===i||i.updateExpandButtonState(t)}changeState(t){var i;const s={0:0,1:1,4:2,7:3,2:4,3:5,6:6}[t];(0,I.$K)(s)&&(null===(i=this.q1)||void 0===i||i.changeState(s))}updateUpNextBox(t,i){var s;null===(s=this.q1)||void 0===s||s.updateUpNextBox(t,i)}updateActiveCue(t){var i;null===(i=this.q1)||void 0===i||i.updateActiveCaptions(t)}updateDefaultCaption(t){var i;null===(i=this.q1)||void 0===i||i.updateDefaultCaption(t)}updateCurrentVideo(t){var i;null===(i=this.q1)||void 0===i||i.updateCurrentVideoMetadata(t)}updateCurrentTime(t,i){var s;null===(s=this.q1)||void 0===s||s.updateDuration(t,i)}updateBufferedState(t){var i;null===(i=this.q1)||void 0===i||i.updateBufferedState(t)}updateVolume(t){var i;null===(i=this.q1)||void 0===i||i.changeVolume(100*t)}updateQuality(t,i){var s;null===(s=this.q1)||void 0===s||s.setCurrentQuality(t,i)}updateFloatingState(t){var i;this.j1=t,null===(i=this.q1)||void 0===i||i.updateFloatingState(t)}updateCloseButtonMode(t,i){var s;null===(s=this.q1)||void 0===s||s.updateCloseButtonMode(t,i)}toggleProgressButtons(t){var i;null===(i=this.q1)||void 0===i||i.toggleProgressButtons(t)}loadPinnedUi(){var t;null===(t=this.q1)||void 0===t||t.loadPinnedUi()}destroyPinnedUi(){var t;null===(t=this.q1)||void 0===t||t.destroyPinnedUi()}onShowLinearAd(){var t;null===(t=this.q1)||void 0===t||t.onShowLinearAd()}onHideLinearAd(){var t;null===(t=this.q1)||void 0===t||t.onHideLinearAd()}start(){return(0,e.mG)(this,void 0,void 0,(function*(){try{const t=yield this.G1();this.q1=new t(this.fV,this.Vc,this.co),this.q1.render()}catch(i){let s="";if((0,I.VZ)(i)){const{message:t,stack:e}=i;s=JSON.stringify({message:t,stack:e})}const e=JSON.stringify(Object.assign(Object.assign({},{canUseCustomElements:ie(t=this.W),canUseShadowDOM:se(t)}),{error:s}));throw new Error("LIT_UI_ERROR:"+e)}var t;this.J1(),this.z1.updateWidth(this.fV.clientWidth),this.q1.onResize(this.z1.currentBreakpointClass),this.K1()}))}isUpNextBoxInView(){return!!this.q1&&this.q1.isUpNextBoxInView()}J1(){this.q1&&(this.VG.push(this.q1.onPause().subscribe((()=>this.Vr({type:"pause"}))),this.q1.onPlay().subscribe((()=>this.Vr({type:"play"}))),this.q1.onNext().subscribe((()=>this.Vr({type:"next"}))),this.q1.onPrev().subscribe((()=>this.Vr({type:"prev"}))),this.q1.onOverlayClick().subscribe((()=>this.Vr({type:"overlayclick"}))),this.q1.onCtaClick().subscribe((()=>this.Vr({type:"ctaclick"}))),this.q1.onVolumeChange().subscribe((t=>{(0,I.$K)(t.isUiTriggered)&&!t.isUiTriggered||this.Vr({type:"volume",payload:{volume:t.payload/100,isFinal:t.isFinal}})})),this.q1.onFullScreenToggle().subscribe((t=>t.isUiTriggered&&this.Vr({type:t.payload?"expand":"collapse"}))),this.q1.onSeek().subscribe((t=>{this.Vr({type:"seek",payload:{seekedTime:t}})})),this.q1.onSeekingStart().subscribe((()=>{this.Vr({type:"seekstart"})})),this.q1.onSeekingEnd().subscribe((()=>{this.Vr({type:"seekstop"})})),this.q1.onCaptionUpdate().subscribe((t=>{if(!(0,I.$K)(t.isUiTriggered)||t.isUiTriggered){if(t.payload)return void this.Vr({type:"captionon",payload:{captionUrl:t.payload}});this.Vr({type:"captionoff"})}})),this.q1.onCloseClick().subscribe((()=>{this.Vr({type:"close"})})),this.q1.onQualityChange().subscribe((t=>{this.Vr({type:"quality",payload:{quality:t}})})),this.q1.onNextButtonClick().subscribe((()=>{this.Vr({type:"nextButton"})})),this.q1.onStayButtonClick().subscribe((()=>{this.Vr({type:"stayButton"})})),this.q1.onApiButtonClick().subscribe((t=>{this.Vr({type:"apiButton",payload:t})}))),this.z1.updateWidth(this.fV.clientWidth),this.q1.onResize(this.z1.currentBreakpointClass),this.K1())}Y1(t){if("close"===t.type)return void this.X1({type:"generaluserinteraction",payload:{type:this.j1?j.f.FLOATING_CLOSE_CLICK:j.f.EMBED_CLOSE_CLICK}});const i=st.u0.get(t.type);(0,I.$K)(i)&&("apiButton"!==t.type||t.payload.shouldTrackClick)&&("volume"!==t.type||t.payload.isFinal)&&this.X1({type:"generaluserinteraction",payload:{type:i}})}G1(){return(0,e.mG)(this,void 0,void 0,(function*(){return(yield(0,ee.g)(this.W)).litConnectorClass}))}K1(){this.co.on(this.fV,this.ro),this.iw.on(this.fV,this.wa,{threshold:.01})}W1(){var t;null===(t=this.co)||void 0===t||t.off(this.fV,this.ro),this.iw.off(this.fV,this.wa)}Vr(t){this.Y1(t),this.fJ.next(t)}X1(t){this.fJ.next(t)}}const ne=168,oe=91;class re extends Fs{constructor(t,i,s,e,h,n,o,r){super(t,i,s,e,o,r),this.Z1=h,this.wW=n,this.t2=new Map,this.i2=!1,this.Vs=$.NR.START,this.s2=()=>{this.e2()},this.h2=new te((0,b.AU)(ft.f),this.s2)}start(t){const i=Object.create(null,{start:{get:()=>super.start}});return(0,e.mG)(this,void 0,void 0,(function*(){yield i.start.call(this,t),this.pZ.next(!0),this.gX.start(),this.TZ(),this.cz.next(!0);try{yield this.AZ()}catch(t){}}))}getCurrentVideoIndex(){return this.pX.currentVideoIndex}getPlaylistLength(){return this.pX.length}toggleProgressButtons(t){this.CJ.isUpNextBoxInView()||(this.CJ.toggleProgressButtons(t),t?this.h2.startTimer():this.h2.stopTimer())}floatingChanged(t){t?this.CJ.loadPinnedUi():this.CJ.destroyPinnedUi()}updateCloseButtonMode(t,i){var s,e;null===(e=null===(s=this.CJ)||void 0===s?void 0:s.updateCloseButtonMode)||void 0===e||e.call(s,t,st.cM.get(i))}onEnterCuePoint(){this.xZ.onEnterCuePoint()}onExitCuePoint(){this.xZ.onExitCuePoint()}onShowLinearAd(){this.CJ.onShowLinearAd&&this.CJ.onShowLinearAd()}onHideLinearAd(){this.CJ.onHideLinearAd&&this.CJ.onHideLinearAd()}addExternalMedia(t){return this.pX.addExternalMedia(t)}addInternalMedia(t){return this.pX.addInternalMedia(t)}jZ(t){return(0,e.mG)(this,void 0,void 0,(function*(){const{config:{isMobile:i,bundleID:s,appId:e,os:{os:h},sdkVersion:o},services:{ResizeObserver:r,ViewabilityService:a,GlobalDomUtilsService:l,InteractionService:d}}=this.mp;t=Object.assign(Object.assign({},t),{isInApp:(0,I.QM)(s)});const c=`template_${e}`,{global:u,sessionId:v,alwaysDisplayControls:p,closeButtonLocation:g,floatingCloseButtonTooltipPosition:y,iconsColor:m,tooltipTextColor:b,tooltipBackgroundColor:_,accentColor:x,logoUrl:f,symbolUrl:C,logoPosition:S,playbackMode:w,closedCaptionDefault:k,showVideoTitle:A,uiComponentsVisibility:{muteWatermark:P,expandButton:T},progressButtonsTimeDuration:E,customUITemplate:M,disableClickUrl:B}=this.gA,V=(0,Zs.b5)(T,(0,I.QM)(s),h===Ht.M.Android,o),{enableNewUI:L,isPinned:D,hasUpNext:O,closeButtonMode:F,floatingCloseButtonMode:R}=t;if(L){const t={isMobile:i,isAlwaysDisplayControls:p,templateUniqueID:c,isFullScreenButtonEnabled:V,isPinned:D,closeButtonMode:st.cM.get(F),floatingCloseButtonMode:st.cM.get(R),closeButtonLocation:st.GL.get(g),floatingCloseButtonTooltipPosition:y,iconsColor:m,tooltipTextColor:b,tooltipBackgroundColor:_,accentColor:x,hasUpNext:O,logoUrl:f,symbolUrl:C,logoPosition:st.iY[S],isAutoplay:w===n.Fx.AUTOPLAY,isScrollToPlay:w===n.Fx.SCROLL_TO_PLAY,isClickToPlay:w===n.Fx.CLICK_TO_PLAY,playlistLength:this.pX.length,shouldShowCaptions:k,shouldShowVideoTitle:A,shouldShowMuteWatermark:P,progressButtonsTimeDuration:E,customUITemplate:M,pageFont:this.n2().bodyFontFamily,isClickUrlDisabled:B,outsideCloseParentElement:this.o2(),sessionId:v};this.CJ=new he(this.aT,u,t,r,a)}else this.CJ=new Ji(l,d,r,this.aT,c);this.SJ(),this.JZ(),yield this.CJ.start(t,!1,this.cZ,v)}))}QZ(t){this.gA.upNextMode===H.XZ.NEXT&&this.gX.duration-this.gX.currentTime<=6&&!this.i2&&(this.i2=!0,this.pX.getVideoData(this.pX.nextVideoIndex,(t=>{const i=t.getThumbnailUrl(ne,oe);this.CJ.updateUpNextBox(i,t.title)}))),this.a2(this.gX.currentTime,this.gX.duration)}OZ(){this.i2=!1,this.Vs=$.NR.START}EZ(){switch(this.gA.upNextMode){case H.XZ.PLAYER_UP_NEXT_MODE_LOOP:this.l2();break;case H.XZ.NEXT:this.pX.isNextVideoCurrentVideo()?this.l2():(this._Z.streamFormat="autochain",this.d2());break;case H.XZ.STOP:this.xZ.stop(),this.CJ.changeState(5)}}TZ(){const{preRollBreak:t,postRollBreak:i,videoPosition:s}=this.gA,e=(0,I.r)(t),h=(0,I.r)(i);this.xZ=new Cs(this,this.pX,this.gX,e,h,this.mp.config.os.os===Ht.M.Ios,s),super.TZ()}SJ(){super.SJ(),this.subscriptions.push(this.CJ.onUIEvent.subscribe((t=>{switch(t.type){case"nextButton":this.mediator.publish(this,"userInteraction",{payload:{playback:!0,clickedNext:!0}}),this.e2();break;case"next":this.mediator.publish(this,"userInteraction",{payload:{playback:!0,clickedNext:!0}}),this.d2(),this._Z.streamFormat="user initiated";break;case"replay":this.mediator.publish(this,"userInteraction",{payload:{playback:!0}}),this.l2();break;case"prev":this.mediator.publish(this,"userInteraction",{payload:{playback:!0,clickedPrev:!0}}),this.c2();break;case"stayButton":this.mediator.publish(this,"userInteraction",{payload:{clickedStay:!0}}),this.toggleProgressButtons(!1)}})))}NZ(t,i){const{services:{GlobalDomUtilsService:s,ResizeObserver:e}}=this.mp,{videoPosition:h,useLowestQualityOutOfView:n,removeVideoPosterAttribute:o,isRenderedInSsrContainers:r,playlistThumbnail:a}=this.gA;this.gX=new _s(this,this.mp,s,this.aT,e,i,t,!0,h,this.RJ,n,o,r,a)}GX(t){var i;super.GX(t),t&&(null===(i=this.CJ)||void 0===i||i.updateBufferedState(null)),this.t2.clear(),this.h2.stopTimer()}e2(){this._Z.streamFormat="user initiated",this.gA.upNextMode===H.XZ.PLAYER_UP_NEXT_MODE_LOOP||this.pX.isNextVideoCurrentVideo()?this.l2():this.d2()}JZ(){this.U("levelSwitching",this.gX,(()=>{this.xZ.onEnterBuffering()})),this.U("levelSwitched",this.gX,(()=>{this.xZ.transitionToPlayingOnTimeUpdate()})),this.U("clientError",this.gX,(()=>{this.d2()}))}u2(t,i){return i&&t?this.gA.measureOnePercentQuartile&&!this.t2.get($.NR.ONE_PERCENT)&&this.v2(i,t)?$.NR.ONE_PERCENT:Math.floor((0,Kt.dQ)(0,i,0,4,t)):$.NR.START}v2(t,i){return i/t*100>=1}a2(t,i){const s=this.u2(t,i);s>$.NR.START&&s!==this.Vs&&(this.t2.get(s)||(this.mediator.publish(this,zi.ContentQuartiles,{payload:s}),this.t2.set(s,!0)),this.Vs=s)}c2(){this.setVideo(this.pX.prevVideoIndex,!0),this._Z.streamFormat="user initiated",this.gX.forceCurrentTime(0)}d2(){this.setVideo(this.pX.nextVideoIndex),this.gX.forceCurrentTime(0)}l2(){this.xZ.replay(),this.GX()}n2(){var t,i,s,e,h,n,o,r;return{titleFontFamily:null!==(e=null===(s=null===(i=null===(t=this.gA.apiConfig.settings)||void 0===t?void 0:t.customization)||void 0===i?void 0:i.fontFamilySettings)||void 0===s?void 0:s.titleFontFamily)&&void 0!==e?e:(0,it.nw)(this.aT),bodyFontFamily:null!==(r=null===(o=null===(n=null===(h=this.gA.apiConfig.settings)||void 0===h?void 0:h.customization)||void 0===n?void 0:n.fontFamilySettings)||void 0===o?void 0:o.bodyFontFamily)&&void 0!==r?r:(0,it.fj)(this.aT)}}o2(){const t=this.gA.closeButtonLocation===H.UE.INSIDE_THE_PLAYER,i=this.gA.floatingSettings.floatingMode===n.v3.PLAYER_FLOATING_MODE_OFF;if(t||i)return null;return this.gA.floatingSettings.floatingMode===n.v3.ALWAYS?this.Z1:this.wW}}class ae extends Wi{constructor(){super(...arguments),this.g2={18:()=>{this.Ta.mediaClick.next({type:j.f.NEXT_CLICK}),this.nextVideo()},19:()=>{this.Ta.mediaClick.next({type:j.f.PREVIOUS_CLICK}),this.prevVideo()},2:()=>{this.toggleFullscreen()?this.Ta.mediaClick.next({type:j.f.FULL_SCREEN_CLICK}):this.Ta.mediaClick.next({type:j.f.EXIT_FULL_SCREEN_CLICK})},3:()=>{this.Ta.mediaClick.next({type:j.f.SUBTITLE_CLICK}),this.toggleCaptions()},0:()=>{this.togglePlay()?this.Ta.mediaClick.next({type:j.f.PLAY_CLICK}):this.Ta.mediaClick.next({type:j.f.PAUSE_CLICK})},1:()=>{0===this.JV.volume?this.Ta.mediaClick.next({type:j.f.UNMUTE_CLICK}):this.Ta.mediaClick.next({type:j.f.MUTE_CLICK}),this.toggleMute()},4:()=>{this.Ta.mediaClick.next({type:j.f.VOLUME_CLICK}),this.increaseVolume(.1)},5:()=>{this.Ta.mediaClick.next({type:j.f.VOLUME_CLICK}),this.decreaseVolume(.1)},6:()=>this.seekForward(5),7:()=>this.seekBackward(5),8:()=>this.seekPercentage(0),9:()=>this.seekPercentage(10),10:()=>this.seekPercentage(20),11:()=>this.seekPercentage(30),12:()=>this.seekPercentage(40),13:()=>this.seekPercentage(50),14:()=>this.seekPercentage(60),15:()=>this.seekPercentage(70),16:()=>this.seekPercentage(80),17:()=>this.seekPercentage(90),20:()=>{this.JV.navigateToClickUrl(!1)}}}nextVideo(t=!1){this.CQ();let i=this.JV.getCurrentVideoIndex();i+1>=this.JV.getPlaylistLength()?this.changeVideo(0,!1,t,true):this.changeVideo(++i,!1,t,true)}prevVideo(t=!1){this.CQ();let i=this.JV.getCurrentVideoIndex();0!==i?this.changeVideo(--i,!1,t,false):this.changeVideo(this.JV.getPlaylistLength()-1,!1,t,false)}getVideoIndex(){return this.JV.getCurrentVideoIndex()}setVideoIndex(t){const i=this.JV.getPlaylistLength();if(t>=i||!(0,I.r)(t+1))throw new Error(`ELEMENTS JS API: Index [${t}] is out of bounds! Please provide a valid video index [0 - ${i}]!`);this.changeVideo(t)}destroy(){this.WT(this.zG),super.destroy()}setVideoPosition(t){if(t>this.duration||!(0,I.r)(t)&&0!==t)throw new Error(`ELEMENTS JS API: The timestamp provided [${t}] is out of bounds! Please provide a valid timestamp [0 - ${this.duration}]!`);this.currentTime=t}seekForward(t){this.currentTime+t>this.duration?this.currentTime=this.duration:this.currentTime+=t}seekBackward(t){this.currentTime-t<0?this.currentTime=0:this.currentTime-=t}loadExternalMedia(t){var i;const s=this.JV.addExternalMedia(t);null===(i=this.zG)||void 0===i||i.insertGalleryCardDynamically(s)}loadInternalMedia(t){var i;const s=this.JV.addInternalMedia(t);null===(i=this.zG)||void 0===i||i.insertGalleryCardDynamically(s)}loadInternalPlaylist(t){var i;return(0,e.mG)(this,void 0,void 0,(function*(){const s=yield this.JV.loadInternalPlaylist(t);null===(i=this.zG)||void 0===i||i.replaceGalleryCards(s)}))}seekPercentage(t){this.currentTime=this.duration/100*t}qG(){var t;this.yr=(0,b.TF)(this.mp.config.sessionId,Xt.U),null===(t=this.yr)||void 0===t||t.startListeningToContentEvents(this.MG)}rq(t){const i=this.g2[t];i&&i()}$Q(){super.$Q(),this.JV.onShowLinearAd()}qQ(){this.JV.onHideLinearAd(),this.DQ.isInAdPod()?this.WQ((()=>{super.qQ(),this.lQ.onAdFinished(this.KV.linearInImpression,O.k.LINEAR,this.DQ.isInAdPod());this.JV.show(!0)})):(super.qQ(),this.JV.show(this.BG),this.BG=!0)}Au(){super.Au(),this.QG&&this.m2(),this.zG&&this.zG.onResize(this.Uz.clientWidth)}Jz(){super.Jz(),this.gA.gallery&&this._2()}cQ(){const t=Object.create(null,{cQ:{get:()=>super.cQ}});return(0,e.mG)(this,void 0,void 0,(function*(){return this.gA.closeButtonLocation===H.UE.OUTSIDE_THE_PLAYER&&(0,it.cn)(this.Uz,"cnx-outside-close-button"),t.cQ.call(this)}))}mJ(){const t=(0,b.TF)(this.mp.config.sessionId,Xs);this.JV=new re(this,this.gA,this.mp,this.Zz,this.Uz,this.wW,this.gq.currentBreakpointClass,t)}GQ(t){super.GQ(t),this.U(mt,this.lQ,(()=>{this.JV.onEnterCuePoint()})),this.U(bt,this.lQ,(()=>{this.JV.onExitCuePoint()}))}yq(){super.yq(),this.VG.push(this.yr.canSkipVideo.pipe((0,Ks.x)()).subscribe((t=>{t&&(this.Oa.stayNextButtonsAppeared.next(),this.mediator.publish(this,Pi.r.StayNextButtonsTriggered),this.WG(!0)),this.JV.toggleProgressButtons(t)})))}m2(){this.gA.gallery.orientation===H.jJ.LANDSCAPE&&(0,it.T7)(this.QG,{height:`${this.QQ.clientHeight}px`})}_2(){this.QG=this.mp.services.GlobalDomUtilsService.createElementByString('<cnx class="cnx-g-container" role="group" aria-label="Video playlist"></cnx>'),this.Uz.appendChild(this.QG);const t=this.gA.gallery.orientation===H.jJ.LANDSCAPE?"cnx-in-g-landscape":"cnx-in-g-portrait";(0,it.cn)(this.Uz,t)}}class le extends L{constructor(){super(...arguments),this.WV="cnx-el"}getApiMethods(){return this.FV.getApiMethods()}_V(t,i){const{services:{UrlSuffixerService:s}}=this.mp;t.isInStreamType()?(this.VV=new ae(this,i,s,this.Oa,this.cs,this.Ta,this.ls,this.pP),this.FV=new Js(this.VV),this.ls.playerType=1):t.isLiveType()?(this.VV=new Us(this,i,s,this.Oa,this.cs,this.Ta,this.ls,this.pP),this.FV=new Js(this.VV),this.ls.playerType=3):(this.VV=new qs(this,i,s,this.Oa,this.cs,this.Ta,this.ls,this.pP),this.FV=new zs(this.VV),this.ls.playerType=2)}BV(t){return!0}Gc(){super.Gc(),this.gA.html&&this.U(zi.MediaMetaUpdate,this.VV,(({payload:{title:t,description:i}})=>{this.UV(this.zI.title,t),this.UV(this.zI.description,i)}))}}},6240:(t,i,s)=>{s.d(i,{U:()=>m});var e=s(7582),h=s(6716),n=s(2134),o=s(1816),r=s(6468),a=s(6990),l=s(6982),d=s(9493),c=s(1573),u=s(3997),v=s(4463),p=s(822);const g=o.mW,y=o.lw;let m=class{constructor(t,i,s){this.Ff=t,this.kn=i,this.fL=s,this.IL=!1,this.Wk=g*r.s_,this.AL=[],this.yL=new h.x,this._L=new h.x,this.bL=new h.x,this.SL=!1,this.wL=!1}get remainingAdsDuration(){var t;return null===(t=this.PL)||void 0===t?void 0:t.timeRemaining}get maxAdDurationConsumed(){return this.yL}get canSkipVideo(){return this.bL}get newAdsLimitReached(){return this._L}startListeningToAdEvents(t){this.kL=t,this.zk(),this.Jk()}startListeningToContentEvents(t){this.xL=t,this.LL()}destroy(){var t;(0,v.i)(this.AL),null===(t=this.PL)||void 0===t||t.stop()}getRemainingAdsDurationInMs(){return this.CL()?this.PL?Math.round(this.PL.timeRemaining):g*r.s_:null}Yk(t){var i;(0,p.r)(t)&&(this.Wk=t*r.s_,null===(i=this.PL)||void 0===i||i.setTimerDuration(this.Wk))}zk(){var t;const i=null===(t=this.kL)||void 0===t?void 0:t.subscribe((t=>{var i,s;switch(t.type){case a.f.AdImpression:this.wL&&this.TL(),this.BL();break;case a.f.AdPlaying:case"AdPlayingInView":this.BL();break;case"AdPlayerOutOfView":this.EL(!1);break;case"AdPlayerInView":this.EL(!0);break;case a.f.AdStopped:case a.f.AdSkipped:case a.f.AdError:this.bL.next(this.SL),null===(i=this.PL)||void 0===i||i.stop();break;case a.f.AdVideoComplete:case a.f.AdClickThru:case a.f.AdPaused:case a.f.AdUserClose:null===(s=this.PL)||void 0===s||s.stop()}}));i&&this.AL.push(i)}EL(t){var i;this.IL=t,t||null===(i=this.PL)||void 0===i||i.stop()}BL(){var t;this.IL&&(null===(t=this.PL)||void 0===t||t.start())}LL(){var t;const i=null===(t=this.xL)||void 0===t?void 0:t.subscribe((t=>{var i;switch(t.type){case"newVideo":this.DL(),null===(i=this.PL)||void 0===i||i.reset(),this.bL.next(!1),this.SL=!1,this.RL(),this.Yk(t.durationInS),this.wL=!1;break;case"DurationUpdate":this.Yk(t.durationInS)}}));i&&this.AL.push(i)}RL(){var t,i;null===(t=this.PL)||void 0===t||t.reset(),null===(i=this.PL)||void 0===i||i.setTreshold(y*r.s_)}Jk(){const t=(0,c.AU)(l.f);this.PL=new d.B(t,this.Wk,500),this.PL.setTreshold(y*r.s_);const i=this.PL.onTimeElapsed.subscribe((()=>{this.CL()&&this.yL.next(!0)}));if((0,p.r)(this.fL.skipToNextVideoAfter)){const t=this.PL.onTimeUpdate.subscribe((()=>{var t;if(this.CL()){const i=null===(t=this.PL)||void 0===t?void 0:t.timeRemaining;i&&i<=this.fL.skipToNextVideoAfter*r.s_&&(this.SL=!0)}}));this.AL.push(t)}const s=this.PL.onTresholdReached.subscribe((()=>{this.CL()&&(this._L.next(!0),this.wL=!0)}));this.AL.push(i,s)}CL(){const t=this.Ff.enableAdContentRatioMechanism||this.Ff.enableAdContentRatioGuardsMechanism;return this.fL.isMechanismEnabled||t}DL(){if(!this.OL()&&this.Wk&&this.PL&&(0,p.$K)(this.PL.timeRemaining)){const t={contentDuration:Math.round(this.Wk/r.s_),remainingAdsDuration:Math.round(this.PL.timeRemaining/r.s_)};(0,u.FH)({level:"Info",message:"VideoAdsDurationService_Durations",exception:"",adsContentRatio:t,callStack:""},{pacing:5})}}TL(){var t;(0,u.FH)({level:"Warn",message:"VideoAdsDurationService_ImpressionAfterTimeConsumed",exception:"yielded impression after duration was consumed",sessionId:null===(t=this.kn)||void 0===t?void 0:t.sessionId},{extraLogsPercentage:100})}OL(){var t,i,s;return(null===(t=this.PL)||void 0===t?void 0:t.timeRemaining)===(null===(i=this.PL)||void 0===i?void 0:i.timerDuration)&&(null===(s=this.PL)||void 0===s?void 0:s.timerDuration)===g*r.s_}};m=(0,e.gn)([(0,n.b2)(),(0,n.Yn)(n.Fw.ContainerScoped),(0,e.fM)(0,(0,n.f3)("FeatureFlags")),(0,e.fM)(1,(0,n.f3)("GeneralMetadata")),(0,e.fM)(2,(0,n.f3)("VideoAdsDurationServiceSettings")),(0,e.w6)("design:paramtypes",[Object,Object,Object])],m)},3203:(t,i,s)=>{s.d(i,{q:()=>h});var e=s(6637);class h{constructor(){this.Wb=(0,e.qs)()}get id(){return this.Wb}get timestamp(){return this.sT}set timestamp(t){this.sT=t}}},3520:(t,i,s)=>{s.d(i,{$:()=>h});var e=s(6288);class h{constructor(t,i={}){if(this.Oj=t,this.mi=i,this.pj=0,this.vj=t=>{t.preventDefault(),this.uj=t.pageY,this.xj=t.pageX,(0,e.cn)(this.gj,"cnx-scrollbar-prevent-select"),(0,e.cn)(this.W.document.body,"cnx-scrollbar-prevent-select"),this.W.document.addEventListener("mousemove",this.mj),this.W.document.addEventListener("mouseup",this.fj)},this.mj=t=>{const i=this.mi.horizontal?t.pageX-this.xj:t.pageY-this.uj;this.uj=t.pageY,this.xj=t.pageX,(0,e.PM)(this.W,(()=>{this.mi.horizontal?this.wj.scrollLeft+=i/this.bj:this.wj.scrollTop+=i/this.bj}))},this.fj=t=>{(0,e.IV)(this.gj,"cnx-scrollbar-prevent-select"),(0,e.IV)(this.W.document.body,"cnx-scrollbar-prevent-select"),this.W.document.removeEventListener("mousemove",this.mj),this.W.document.removeEventListener("mouseup",this.fj)},this.yj=t=>{if(!this.mi.horizontal)return;const i=t.deltaMode?100*(t.deltaY<0?-1:1):t.deltaY,s=Math.floor(i)/33*20,h=this.pj+s;h>=-1*this.gj.clientWidth&&h<=this.wj.scrollWidth-this.gj.clientWidth&&(this.pj=h),(0,e.PM)(this.W,(()=>this.wj.scrollLeft=this.pj))},this.$j=()=>{clearTimeout(this.Cj),this.Cj=setTimeout((()=>{this.kj()}),50)},this.kj=()=>{const t=this.mi.horizontal?this.wj.scrollWidth:this.wj.scrollHeight,i=this.mi.horizontal?this.Oj.clientWidth:this.Oj.clientHeight;this.bj=i/t;const s=-1*(this.Oj.clientWidth-(this.gj.clientWidth||4)-4),h=this.Oj.clientHeight-this.gj.clientHeight-4;(0,e.PM)(this.W,(()=>{if(this.bj>=1)(0,e.MV)(this.gj);else{if((0,e.Ho)(this.gj),this.mi.horizontal)return void(0,e.T7)(this.gj,{width:`${Math.max(100*this.bj,10)}%`,height:"",top:`${h}px`,right:"",left:this.wj.scrollLeft/t*100+"%"});(0,e.T7)(this.gj,{width:"",height:`${Math.max(100*this.bj,10)}%`,top:this.wj.scrollTop/t*100+"%",right:`${s}px`,left:""}),this.Lj()}}))},this.W=(0,e.LT)(t),!this.W)throw new Error("window was not found");this.f2(),this.gj.addEventListener("mousedown",this.vj),this.mi.overrideNativeHorizontalScroll&&this.wj.addEventListener("wheel",this.yj,{passive:!0}),this.W.addEventListener("resize",this.$j),this.wj.addEventListener("scroll",this.kj),this.wj.addEventListener("mouseenter",this.kj),(0,e.cn)(this.Oj,"cnx-scrollbar",this.mi.horizontal?"cnx-scrollbar-horizontal":void 0,this.mi.showOnHover?"cnx-scrollbar-show-on-hover":void 0),this.kj();const s=(0,e.Dx)(this.Oj,this.W);"0px"===s.height&&"0px"!==s.maxHeight&&(0,e.T7)(this.Oj,{height:s.maxHeight})}destroy(){for(this.removeListeners(),(0,e.bX)(this.gj);this.wj.firstChild;)this.Oj.appendChild(this.wj.firstChild);(0,e.bX)(this.Sj),(0,e.IV)(this.Oj,"cnx-scrollbar","cnx-scrollbar-horizontal","cnx-scrollbar-show-on-hover")}removeListeners(){this.W.document.removeEventListener("mousemove",this.mj),this.W.document.removeEventListener("mouseup",this.fj),this.gj.removeEventListener("mousedown",this.vj),this.wj.removeEventListener("wheel",this.yj),this.W.removeEventListener("resize",this.$j),this.wj.removeEventListener("scroll",this.kj),this.wj.removeEventListener("mouseenter",this.kj)}f2(){for(this.gj=(0,e.G$)('<cnx class="cnx-scrollbar-handle">',this.W),this.Sj=(0,e.G$)('<cnx class="cnx-scrollbar-wrapper">',this.W),this.wj=(0,e.G$)('<cnx class="cnx-scrollbar-content">',this.W),this.Sj.appendChild(this.wj);this.Oj.firstChild;)this.wj.appendChild(this.Oj.firstChild);this.Oj.appendChild(this.Sj),this.Oj.insertAdjacentElement("beforeend",this.gj)}Lj(){const t=new Event("cnx-mod-scrollbar");this.Oj.dispatchEvent(t)}}},2047:(t,i,s)=>{s.d(i,{C:()=>e});class e{constructor(){this.i=!1,this.promise=new Promise(((t,i)=>{this.o=t,this.L=i}))}get isPending(){return!this.i}resolve(t){this.V(),this.o(t)}reject(t){this.V(),this.L(t)}V(){this.i||(this.i=!0)}}},2282:(t,i,s)=>{s.d(i,{I:()=>a});var e=s(6716),h=s(6197),n=s(2047),o=s(6637),r=s(3997);class a{constructor(t,i,s,h){if(this.vt=t,this._r=s,this.ks=h,this.C2=!1,this.S2=1e3,this.w2=!0,this.A2=new e.x,this.P2=new e.x,this.oF=!1,this.I2=()=>{this.C2&&this.T2()},this.E2=t=>{this.C2?null!==this.M2?this.T2():this.B2():this.A2.next("exitFullscreen")},this.B2=()=>{this.oF=!1,this.V2.reject(),this.C2=!1,clearTimeout(this.L2)},this.TK=this.vt.hasIosFullscreenBehaviour(s)?i.getElementsByTagName("video")[0]:i,!this.TK)throw new Error("FullScreen element is missing");try{const t=this.D2();if(null==t)return void(this.w2=!1);this.O2=t.keys,this.F2=t.name,this.jK()}catch(t){this.w2=!1;const{message:i,stack:s}=(0,o.W$)(t);(0,r.nF)({message:"Fullscreen init failed",exception:i,callStack:s,level:"Critical",sessionId:this.ks})}}get fullscreenEnabled(){return this.vt.getDocumentProperty(this.O2.fullscreenEnabled)}get isFullscreen(){return this.oF}get onFullScreenExit(){return this.A2.asObservable()}get onFullScreenEnter(){return this.P2.asObservable()}get M2(){return this.vt.getDocumentProperty(this.O2.fullscreenElement)}enterFullScreen(){if(this.w2){this.V2=new n.C,this.C2=!0,clearTimeout(this.L2),this.L2=setTimeout(this.B2,this.S2);try{this.TK[this.O2.requestFullscreen]()}catch(t){this.B2()}return this.V2.promise}}exitFullScreen(){try{this.vt.exitFullscreen(this.O2.exitFullscreen,this._r===h.M.Ios?this.TK:void 0)}catch(t){const{message:i,stack:s}=(0,o.W$)(t);(0,r.nF)({message:"fullscreen_exit",exception:i,callStack:s,level:"Warn",sessionId:this.ks})}this.oF=!1}destroy(){this.isFullscreen&&this.exitFullScreen(),this.R2(),this.V2&&this.V2.isPending&&this.V2.reject()}D2(){let t;return t=this.vt.hasIosFullscreenBehaviour(this._r)?this.vt.getFullscreenKeys(this.TK):this.vt.getFullscreenKeys(),t}jK(){"moz"===this.F2||"ms"===this.F2?(this.vt.addEventListenerOnGlobal(this.O2.fullscreenchange,this.E2),this.vt.addEventListenerOnGlobal(this.O2.fullscreenerror,this.B2)):(this.TK.addEventListener(this.O2.fullscreenchange,this.E2),this.TK.addEventListener(this.O2.fullscreenerror,this.B2)),this.vt.hasIosFullscreenBehaviour(this._r)&&(this.TK.addEventListener("webkitbeginfullscreen",this.I2),this.TK.addEventListener("webkitendfullscreen",this.E2))}R2(){"moz"===this.F2||"ms"===this.F2?(this.vt.removeEventListenerOnGlobal(this.O2.fullscreenchange,this.E2),this.vt.removeEventListenerOnGlobal(this.O2.fullscreenerror,this.B2)):(this.TK.removeEventListener(this.O2.fullscreenchange,this.E2),this.TK.removeEventListener(this.O2.fullscreenerror,this.B2)),this._r===h.M.Ios&&(this.TK.removeEventListener("webkitbeginfullscreen",this.I2),this.TK.removeEventListener("webkitendfullscreen",this.E2))}T2(){this.oF=!0,this.P2.next("enterFullscreen"),this.V2.resolve(),this.C2=!1,clearTimeout(this.L2)}}},6916:(t,i,s)=>{s.d(i,{r:()=>e});const e=(0,s(6213).A)({PlayButton:0,BigPlayButton:1,VolumeButton:2,VolumeProgress:3,VolumeControls:4,ExpandButton:5,SettingsButton:6,CaptionButton:7,CaptionComponent:8,UpNextButton:9,UpNextBox:10,PreviousButton:11,LogoComponent:12,LogoOutstream:13,MoreButton:14,ElapsedTimeLabel:15,TotalDurationLabel:16,RemainingDurationLabel:17,ProgressBar:18,QualityMenu:19,QueStateOverlay:20,Loader:21,ContextMenu:22,ElementsSettingsMenu:23,CloseButton:24,PinnedCloseButton:25,SkipAdButton:26,AdLoadingScreen:27,NextProgressButton:28,StayProgressButton:29,CtaButton:30,PlayspaceProgressBar:31,PlayspaceSettingsMenu:32,ClickToPlayButton:33,OverlayComponent:34,SlideTitle:35,TopTitle:36,TopLogo:37,TopSlideTitle:38,TopStoryTitle:39,TextLabel:40,LivePoster:41,LiveIcon:42,ElementsCaptionMenu:43,PinnedTitle:44,FloatingCloseButton:45})},2191:(t,i,s)=>{s.d(i,{C:()=>e});const e=(0,s(6213).A)({Play:0,Pause:1,Replay:2,Volume:3,Mute:4,Unmute:5,DraggingStart:6,DraggingStopped:7,Seek:8,SeekingStart:9,SeekingStopped:10,Expand:11,Collapse:12,Quality:13,Close:14,Next:15,Prev:16,Settings:17,SettingsMenu:18,CaptionOn:19,CaptionOff:20,CaptionUpdate:21,CaptionMenu:22,VolumeHoverStart:23,VolumeHoverStopped:24,UIHideStart:25,UIShowStart:26,UIEndShowHide:27,ContextMenuOpen:28,ContextMenuClose:29,ContextClick:30,AboutClick:31,OverlayClick:32,LogoClicked:33,HoverStart:34,HoverEnd:35,StateChanged:36,RebindComponent:37,SkipAd:38,FocusStart:39,StayButton:40,NextButton:41,CtaClick:42,ApiButton:43})},5269:(t,i,s)=>{s.d(i,{T_:()=>l,VK:()=>d,fh:()=>r,vY:()=>a,yt:()=>o});var e=s(6637),h=s(5394),n=s(822);const o={enableWorker:!0,startFragPrefetch:!0,capLevelToPlayerSize:!0,maxBufferSize:5e6,maxBufferLength:5,maxMaxBufferLength:10,liveBackBufferLength:90,backBufferLength:1/0,lowLatencyMode:!0,ignoreDevicePixelRatio:!0,debug:"true"===(0,h.Ph)("cnxHlsDebug",(0,e.pE)(window).topFrame.location.href)};function r(){const t=self.MediaSource||self.WebKitMediaSource;if(!t)return!1;const i=self.SourceBuffer||self.WebKitSourceBuffer,s="function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!i||i.prototype&&"function"==typeof i.prototype.appendBuffer&&"function"==typeof i.prototype.remove;return!!s&&!!e}const a=t=>(0,n.QM)(t.canPlayType("application/vnd.apple.mpegurl"));function l(t){const i=[];return t.forEach((t=>{i.some((i=>i.height===t.height))||i.push(t)})),i}function d(t,i){return t.reduce(((t,s)=>{if(!t)return s;const e=Math.abs(t.height-i);return Math.abs(s.height-i)<e?s:t}),void 0)}},466:(t,i,s)=>{s.d(i,{P:()=>o});var e=s(7582),h=s(2134),n=s(6374);let o=class{constructor(){this.jb=!1,this.qb=[],this.ps=new n.Q}on(t,i){if(!this.jb&&"requestAd"===t){this.jb=!0;const t=1e3;this.qb.forEach((i=>{setTimeout((()=>{i()}),t)})),this.qb.length=0}this.ps.on(t,i)}publish(t,i){this.jb?this.ps.trigger(t,i):this.qb.push((()=>{this.publish(t,i)}))}remove(t,i){this.ps.remove(t,i)}removeAll(){this.ps.removeAll(),this.qb.length=0}};o=(0,e.gn)([(0,h.b2)(),(0,h.Yn)(h.Fw.ContainerScoped),(0,e.w6)("design:paramtypes",[])],o)},9395:(t,i,s)=>{s.d(i,{H:()=>n,g:()=>o});var e=s(8671),h=s(1027);const n={[h.It.PRE_ROLL_SLOT]:e.cr.PRE_ROLL,[h.It.MID_ROLL_SLOT]:e.cr.MID_ROLL,[h.It.POST_ROLL_SLOT]:e.cr.POST_ROLL};function o(t){return n[t]||e.cr.AD_BREAK_TYPE_UNSPECIFIED}},1174:(t,i,s)=>{s.d(i,{GL:()=>c,YC:()=>r,cM:()=>l,iY:()=>d,u0:()=>a});var e=s(9374),h=s(8671),n=s(484),o=s(2191);const r=new Map([[o.C[o.C.Replay],"replay"],[o.C[o.C.Next],"next"],[o.C[o.C.Prev],"prev"],[o.C[o.C.Play],"play"],[o.C[o.C.Volume],"volume"],[o.C[o.C.Pause],"pause"],[o.C[o.C.Seek],"seek"],[o.C[o.C.SeekingStart],"seekstart"],[o.C[o.C.SeekingStopped],"seekstop"],[o.C[o.C.Quality],"quality"],[o.C[o.C.CaptionOn],"captionon"],[o.C[o.C.CaptionOff],"captionoff"],[o.C[o.C.Expand],"expand"],[o.C[o.C.Collapse],"collapse"],[o.C[o.C.Close],"close"],[o.C[o.C.OverlayClick],"overlayclick"],[o.C[o.C.NextButton],"nextButton"],[o.C[o.C.StayButton],"stayButton"],["generaluserinteraction","generaluserinteraction"],[o.C[o.C.ApiButton],"apiButton"]]),a=new Map([["play",n.f.PLAY_CLICK],["pause",n.f.PAUSE_CLICK],["next",n.f.NEXT_CLICK],["prev",n.f.PREVIOUS_CLICK],["volume",n.f.VOLUME_CLICK],["expand",n.f.FULL_SCREEN_CLICK],["collapse",n.f.EXIT_FULL_SCREEN_CLICK],["captionon",n.f.SUBTITLE_CLICK],["captionoff",n.f.SUBTITLE_CLICK],["nextButton",n.f.NEXT_BUTTON_CLICK],["stayButton",n.f.STAY_BUTTON_CLICK],["apiButton",n.f.CLICK],["ctaclick",n.f.CTA_BUTTON_CLICK]]),l=new Map([[h.vP.PLAYER_CLOSE_BUTTON_MODE_OFF,0],[h.vP.ON_HOVER,1],[h.vP.ON_HOVER_AFTER_FIRST_AD,0],[h.vP.ALWAYS_ON,2]]),d={[e.PP.BOTTOM_RIGHT]:0,[e.PP.TOP_LEFT]:1},c=new Map([[e.UE.INSIDE_THE_PLAYER,0],[e.UE.OUTSIDE_THE_PLAYER,1]])},1353:t=>{t.exports='<svg class="cnx-color-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 4v16l16-8z" fill-rule="evenodd"/></svg>\n'}}]);
</script>

</body>
</html>
