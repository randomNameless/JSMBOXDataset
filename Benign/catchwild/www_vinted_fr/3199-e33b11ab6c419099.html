<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3199-e33b11ab6c419099.html</title>
</head>
<body>

<script>
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3199],{25826:function(e,t,o){o.d(t,{Z:function(){return B}});var i=o(35250),r=o(70079),n=o(21963),s=o(49836),l=o(60356),a=o(60048),c=o(98423),d=o(13941),u=o(94841),m=o(57217),h=o(8096),p=o(60221),f=o(34265),x=o(87949),g=o(16419),Z=o(73628),_=o(37094),y=o(32523),j=o(52301),k=o(24270),v=o(55673),b=o(84607),C=o(68191),P=o(60867),w=o(86504),I=o(90658),S=o(9436),N=o(15476),R=o(80178),T=o(72680),E=o(2686),U=o(75403),F=o(83819),M=o(51187),z=o(398),D=o(5149),L=e=>{let{pricing:t,isPricingLoading:o,isOrderLoading:s,show:l,onNextAction:a,onPreview:c,onBack:u,onDynamicPricingInfo:m}=e,h=(0,U.Z)("closet_promotion.pre_checkout_modal"),p=(0,U.Z)("closet_promotion.a11y.actions"),{locale:f}=(0,j.Z)(),x=(0,F.Z)({abTestName:"vas_banner_lock"}),{screen:Z}=(0,M.Z)(),y=(0,E.Z)("/assets/closet-promotion");return(0,r.useEffect)(()=>{(null==x?void 0:x.variant)&&t&&Z===d.l.UserProfile&&(0,g.Q6R)()},[x,t,Z]),(0,i.jsx)(n.Z,{show:l,hasScrollableContent:!0,testId:"closet-promotion-pre-checkout-modal",children:(0,i.jsxs)("div",{className:"u-fill-width",children:[(0,i.jsx)(k.Z,{right:(0,i.jsx)(v.IM,{iconName:R.Z,theme:"amplified",styling:v.IM.Styling.Flat,testId:"closet-promotion-pre-checkout-back-button",onClick:u,aria:{"aria-label":p("close")}}),body:(0,i.jsx)(b.Z,{as:"h2",type:b.Z.Type.Title,width:b.Z.Width.Parent,alignment:b.Z.Alignment.Center,text:h("title")})}),(0,i.jsx)(z.Z,{children:o||!t?(0,i.jsx)(_.Z,{testId:"pre-checkout-loader",styling:_.Z.Styling.Wide}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.U,{src:y("closet-promotion-onboarding.png",{theme:{dark:"dark/closet-promotion-onboarding.png"}}),alt:""}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.Z,{children:(0,i.jsx)(b.Z,{as:"h1",text:h("intro.title"),type:b.Z.Type.Heading})}),(0,i.jsx)(C.Z,{title:h("intro.visibility.title"),body:h("intro.visibility.body"),prefix:(0,i.jsx)(P.U,{src:y("avatars-group.svg",{theme:{dark:"dark/avatars-group.svg"}}),size:P.U.Size.Large,alt:""})}),(0,i.jsx)(C.Z,{title:h("intro.relevancy.title"),body:h("intro.relevancy.body",{"learn-more":e=>(0,i.jsx)("button",{onClick:c,type:"button",children:(0,i.jsx)(b.Z,{as:"span",theme:"primary",text:e,underline:!0})})}),prefix:(0,i.jsx)(P.U,{src:y("hand-ok.svg",{theme:{dark:"dark/hand-ok.svg"}}),size:P.U.Size.Large,alt:""})}),(0,i.jsx)(C.Z,{title:h("intro.insights.title"),body:h("intro.insights.body"),prefix:(0,i.jsx)(P.U,{src:y("chart.svg",{theme:{dark:"dark/chart.svg"}}),size:P.U.Size.Large,alt:""})})]})]})}),(0,i.jsx)(N.Z,{}),function(){if(!t)return null;let{pricePerDay:e,effectiveDays:o}=t,r=(0,D.ZO)(e,f);return(0,i.jsx)(C.Z,{title:h("duration_day_count",{count:o},{count:o}),body:h("price_per_day",{price:r}),suffix:function(){if(!t)return null;let{totalPrice:e,discountedPrice:o,isSalesTaxApplicable:r}=t,n=(0,D.ZO)(e,f),s=(0,D.ZO)(o,f),l=o.amount<e.amount,a=(0,i.jsx)("div",{className:"u-flexbox",children:(0,i.jsx)(w.Z,{name:T.Z,color:w.Z.Color.GreyscaleLevel4})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(C.Z,{styling:C.Z.Styling.Tight,suffix:a,onClick:m,clickable:!0,testId:"closet-promotion-dynamic-pricing-info",children:[l&&(0,i.jsx)(b.Z,{as:"span",text:n,strikethrough:!0}),(0,i.jsx)(I.Z,{size:I.Z.Size.Small,orientation:I.Z.Orientation.Vertical}),(0,i.jsx)(b.Z,{as:"h2",text:s,type:b.Z.Type.Title})]}),r&&(0,i.jsx)("div",{children:(0,i.jsx)(b.Z,{as:"span",theme:"muted",text:h("sales_tax_note"),testId:"closet-promotion-pre-checkout-modal--sales-tax-note"})})]})}()})}(),(null==t?void 0:t.locked)&&(0,i.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,i.jsx)(S.Z,{body:null==t?void 0:t.lockedNote,styling:S.Z.Styling.Tight,testId:"locked-banner"})}),!(null==t?void 0:t.locked)&&(t?(0,i.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,i.jsx)(v.IM,{text:h("actions.proceed"),styling:v.IM.Styling.Filled,onClick:e=>{if(s){e.preventDefault();return}a()},isLoading:s,testId:"closet-promotion-pre-checkout--proceed-button"})}):null)]})})},O=o(21104),V=o(80951),H=o(78009),G=o(9038),$=e=>{let{show:t,onBack:o}=e,r=(0,U.Z)("closet_promotion.pre_checkout_help_modal"),s=(0,U.Z)("closet_promotion.a11y.actions");function l(e){return(0,i.jsx)(C.Z,{title:(0,i.jsx)(b.Z,{as:"h2",text:r(`${e}.title`),type:b.Z.Type.Title}),body:(0,i.jsx)(b.Z,{as:"span",text:r(`${e}.body`),html:!0})})}return(0,i.jsx)(n.Z,{show:t,hasScrollableContent:!0,children:(0,i.jsx)("div",{className:"u-fill-width",children:(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(k.Z,{left:(0,i.jsx)(v.IM,{theme:"amplified",iconName:O.Z,styling:v.IM.Styling.Flat,testId:"closet-promotion-pre-checkout-help-back-button",onClick:o,aria:{"aria-label":s("back")}}),body:(0,i.jsx)(b.Z,{as:"h2",text:r("title"),type:b.Z.Type.Title})}),l("item_selection"),l("featured"),(0,i.jsx)(C.Z,{children:(0,i.jsx)(b.Z,{as:"h3",html:!0,text:r("read_more",{"help-center":e=>(0,i.jsx)(V.Z,{type:G.Z.ClosetPromotion,accessChannel:H.Si.ProductLink,render:t=>(0,i.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e})})}),type:b.Z.Type.Subtitle})})]})})})},A=e=>{let{show:t,onBack:o}=e,r=(0,U.Z)("closet_promotion.dynamic_pricing_info_modal"),s=(0,U.Z)("closet_promotion.a11y.actions");function l(e){return(0,i.jsx)(C.Z,{title:(0,i.jsx)(b.Z,{as:"h2",text:r(`${e}.title`),type:b.Z.Type.Title}),body:(0,i.jsx)(b.Z,{as:"span",text:r(`${e}.body`),html:!0})})}return(0,i.jsx)(n.Z,{show:t,hasScrollableContent:!0,children:(0,i.jsx)("div",{className:"u-fill-width",children:(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(k.Z,{left:(0,i.jsx)(v.IM,{theme:"amplified",iconName:O.Z,styling:v.IM.Styling.Flat,testId:"closet-promotion-dynamic-pricing-info-back-button",onClick:o,aria:{"aria-label":s("back")}}),body:(0,i.jsx)(b.Z,{as:"h2",text:r("title"),type:b.Z.Type.Title})}),l("what"),l("how")]})})})},B=e=>{let{isOpen:t,handlePrecheckoutClose:o}=e,{track:j}=(0,l.Z)(),{cp_precheckout:k}=(0,a.Z)().searchParams,{replaceHistoryState:v,relativeUrl:b,urlQuery:C}=(0,a.Z)(),[P,w]=(0,r.useState)(m.C.Idle),[I,S]=(0,r.useState)(h._R.None),{fetch:N,transformedData:R,isLoading:T,error:E}=(0,s.Z)(g.mEg,Z.kU),{fetch:U,transformedData:F,isLoading:M,error:z}=(0,s.Z)(g.dM4,Z.Aq);function D(){S(h._R.PreCheckout)}function O(){"true"===k&&v((0,x.Sd)(b,C,["cp_precheckout"])),S(h._R.None),o()}return(0,r.useEffect)(()=>{I!==h._R.PreCheckout||R||N()},[N,I,R]),(0,r.useEffect)(function(){"true"===k&&S(h._R.PreCheckout)},[k]),(0,r.useEffect)(function(){t&&S(h._R.PreCheckout)},[t]),(0,r.useEffect)(function(){(z||E)&&S(h._R.GenericErrorModal)},[z,E]),(0,r.useEffect)(function(){if(!F)return;j((0,f.Q52)({screen:d.l.ClosetPromotionOrderReview,target:u.U.ReviewClosetPromotionOrder,targetDetails:F.id.toString()}));let e=null==F?void 0:F.id,t=c.bt[c.EN.ClosetPromotion];j((0,f.nuO)({checkoutId:null,orderType:t,orderId:e.toString()})),w(m.C.Pending),(async()=>{var o;let i=await (0,g.aze)({id:e.toString(),type:t});if("errors"in i){w(m.C.Failure),S(h._R.GenericErrorModal);return}(0,p.r6)(null==i?void 0:null===(o=i.checkout)||void 0===o?void 0:o.id,e,t)})()},[F,j]),P===m.C.Pending?(0,i.jsx)(n.Z,{show:!0,children:(0,i.jsx)(_.Z,{testId:"closet-promotion-checkout-loader"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L,{pricing:R,isPricingLoading:T,isOrderLoading:M,show:I===h._R.PreCheckout,onNextAction:function(){U()},onPreview:function(){j((0,f.Q52)({screen:d.l.ClosetPromotionOrderReview,target:u.U.ClosetPromotionPreCheckoutHelp})),S(h._R.PreCheckoutHelp)},onDynamicPricingInfo:function(){S(h._R.DynamicPricingInfo),j((0,f.Q52)({screen:d.l.ClosetPromotionOrderReview,target:u.U.ClosetPromotionDynamicPricingInfo}))},onBack:O}),(0,i.jsx)($,{show:I===h._R.PreCheckoutHelp,onBack:D}),(0,i.jsx)(A,{show:I===h._R.DynamicPricingInfo,onBack:D}),(0,i.jsx)(y.Z,{isShown:I===h._R.GenericErrorModal,onClose:O})]})}},74815:function(e,t,o){var i=o(35250),r=o(3997),n=o.n(r),s=o(79356);t.Z=e=>{let{children:t,item:o,width:r,onVisible:l}=e,a=n()("feed-grid__item",{[`feed-grid__item--${String(r)}`]:r}),{ref:c}=(0,s.YD)({onChange:e=>{e&&l()}});return(0,i.jsx)("div",{"data-testid":"grid-item",className:a,ref:c,children:(0,i.jsx)("div",{className:"feed-grid__item-content",children:(0,i.jsx)("div",{className:"u-flex-grow u-fill-width",children:o||t})})})}},8096:function(e,t,o){var i,r,n,s,l,a;o.d(t,{_R:function(){return n},bw:function(){return i},oY:function(){return r}}),(s=i||(i={})).Impressions="impressions",s.ProfileVisits="profile_visits",s.ItemVisits="item_visits",(l=r||(r={})).AllItems="all_items",l.UserProfile="user_profile",l.UserFollow="user_follow",l.ItemFavourite="item_favourite",l.Item="item",l.ViewProfile="view_wardrobe",(a=n||(n={})).PreCheckout="preCheckout",a.PreCheckoutHelp="preCheckoutHelp",a.DynamicPricingInfo="dynamicPricingInfo",a.GenericErrorModal="genericErrorModal",a.None="none"},6337:function(e,t,o){var i,r,n,s;o.d(t,{F:function(){return r},g:function(){return i}}),(n=i||(i={})).PromoteListings="promote_listings",n.PromotedClosets="promoted_closets",n.ProfilePromotedClosets="profile_promoted_closets",n.PromotedClosetsStats="promoted_closets_stats",n.Collections="collections",n.PushUps="push_ups",(s=r||(r={})).VasBump="vas-bump",s.VasClosetPromo="vas-closet-promo",s.VasClosetPromoStats="vas-closet-promo-stats",s.VasFeaturedCollection="vas-featured-collection"},92234:function(e,t,o){var i=o(70079),r=o(16419),n=o(73628),s=o(6337),l=o(61543),a=o(462),c=o(49836),d=o(83819);t.Z=(e,t)=>{var o;let{fetch:u,transformedData:m,isLoading:h,error:p}=(0,c.Z)(r.oqF,n.pu),f=(null===(o=(0,d.Z)({abTestName:"vas_harm_v2"}))||void 0===o?void 0:o.variant)===l.C.On,x=(0,a.Z)("killswitch_closet_promotion_web"),g=(0,i.useRef)(f||x?e.filter(e=>e!==s.g.PromotedClosets):e);return(0,i.useEffect)(()=>{g.current.length&&(t||u({bannerNames:g.current}))},[u,t,g]),{data:m,isLoading:h,error:p}}}}]);
//# sourceMappingURL=3199-e33b11ab6c419099.js.map
</script>

</body>
</html>
