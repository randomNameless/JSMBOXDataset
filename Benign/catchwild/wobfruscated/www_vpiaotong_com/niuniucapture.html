<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>niuniucapture.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['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AEHQCQsBAABB0gkLMWNhcHR1cmVPYmpTZWxmLkluaXRXZWJTb2NrZXRBbmRCaW5kQ2FsbGJhY2soKSUzQgAAQYQKCwQlMkMAAEGKCgs3JUU2JTlDJThEJUU1JThBJUExJUU3JUFCJUFGJUU1JThGJUEzJUU0JUI4JUJBJUU3JUE5JUJBAABBwgoLOmNvbm5lY3RIb3N0JTIwTml1bml1U29ja2V0JTIwaXMlMjBub3QlMjBudWxsJTJDJTIwcmV0dXJuLgAAQf4KCwoxMjcuMC4wLjEAAEGKCwsKbG9jYWxob3N0AABBlgsLGHdzJTNBJTJGJTJGMTI3LjAuMC4xJTNBAABBsAsLBCUyRgAAQbYLCwIwAABBugsLFU5pdW5pdVNvY2tldC5vbm9wZW4uAABB0AsLAQAAQdILCwIwAABB1gsLJmNhcHR1cmVPYmpTZWxmLlNlbmRSZWFkeVJlY3ZEYXRhKCklM0IAAEH+CwsSY29ubmVjdCUyMHN1Y2Vzcy4AAEGSDAshY2FwdHVyZU9ialNlbGYuTG9vcEVjaG9NZXNzYWdlKCkAAEG0DAsCMQAAQbgMCwIoAABBvAwLAikAAEHADAsFZWNobwAAQcYMCxByZWNlaXZlZCUyMGVjaG8AAEHYDAsYcmVjZWl2ZWQlMjBjYXB0dXJlZGF0YS4AAEHyDAsIdmVyc2lvbgAAQfwMCxtzZWxmLk5pdW5pdVNvY2tldC5vbmNsb3NlLgAAQZgNCxVjb25uZWN0JTIwZXhjZXB0aW9uLgAAQa4NCyBjYXB0dXJlT2JqU2VsZi5jb25uZWN0SG9zdCgpJTNCAABB0A0LMXRoaXMuTG9vcEVjaG9NZXNzYWdlJTJDJTIwIXNlbGYuUmVjZWl2ZWRFY2hvQmFjawAAQYIOCyFjYXB0dXJlT2JqU2VsZi5Mb29wRWNob01lc3NhZ2UoKQAAQaQOCwVlY2hvAABBqg4LAjEAAEGuDgsTU2VuZFJlYWR5UmVjdkRhdGEuAABBwg4LAQAAQcQOCwIxAABByA4LAjEAAEHMDgsBAABBzg4LCiUzQSUyRiUyRgAAQdoOCw4lM0ElMkYlMkZ4eHh4AABB6g4LFSUyM3N0YXJ0Q2FwdHVyZUZyYW1lAABBgA8LBHNyYwAAQYYPCwtjb21wYXRpYmxlAABBkg8LBW1zaWUAAEGYDwsIdHJpZGVudAAAQaIPCwpydiUzQTExLjAAAEGuDwsKcXFicm93c2VyAABBug8LCXVicm93c2VyAABBxA8LCGZpcmVmb3gAAEHODwsFZWRnZQAAQdQPCwdjaHJvbWUAAEHcDwsrSXNOZWVkQ3VzdG9taXplZFByb3RvY29sJTIwZXhjZXB0aW9uJTNBJTIwAABBiBALCHZlcnNpb24AAEGSEAsCMQAAQZYQCwVldmFsAA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
var emPensize = 1;
var emDrawType = 2;
var emTrackColor = 3;
var emEditBorderColor = 4;
var emTransparent = 5;
var emWindowAware = 6;
var emSetSaveName = 8;
var emSetMagnifierBkColor = 9;
var emSetMagnifierLogoText = 10;
var emSetWatermarkPictureType = 20;
var emSetWatermarkPicturePath = 21;
var emSetWatermarkTextType = 22;
var emSetWatermarkTextValue = 23;
var emSetMosaicType = 24;
var emSetTooltipText = 25;
var emSetMoreInfo = 26;
var emClosed = 1;
var emConnected = 2;
var emConnecting = 3;
var emCaptureSuccess = 0;
var emCaptureFailed = 1;
var emCaptureUnknown = 2;
var emCmdReady = -1;
var emCmdCapture = 0;
var emCmdSaveFile = 1;
function isMacintosh() {
    return navigator.platform.indexOf(lS(0, 0)) > -1;
}
function isLinux() {
    return navigator.platform.indexOf(lS(0, 1)) > -1;
}
function isMips() {
    return navigator.platform.indexOf(lS(0, 2)) > -1;
}
function isaarch() {
    return navigator.platform.indexOf(lS(0, 3)) > -1;
}
function isloongarch() {
    return navigator.platform.indexOf(lS(0, 4)) > -1;
}
function rgb2value(r, g, b) {
    return r | g << 8 | b << 16;
}
var captureObjSelf = null;
function onpluginLoaded() {
    (() => {
        const __callInstance77 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    captureObjSelf.pluginLoaded(false);
                }
            }
        });
        const __exports = __callInstance77.exports;
        return __exports.data();
    })();
}
function NiuniuCaptureObject() {
    var self = this;
    captureObjSelf = this;
    this.PenSize = 2;
    this.DrawType = 0;
    this.TrackColor = rgb2value(255, 0, 0);
    this.EditBorderColor = rgb2value(255, 0, 0);
    this.Transparent = 255;
    this.WindowAware = 1;
    this.MosaicType = 1;
    this.SaveName = lS(0, 5);
    this.MagnifierLogoText = lS(0, 6);
    this.WatermarkPictureType = lS(0, 7);
    this.WatermarkPicturePath = lS(0, 8);
    this.WatermarkTextType = lS(0, 9);
    this.WatermarkTextValue = lS(0, 10);
    this.NiuniuAuthKey = lS(0, 11);
    this.ToolTipText = lS(0, 12);
    this.MoreInfo = lS(0, 13);
    this.More_Ext_Params = new Array();
    this.useCustomizedProtoco = true;
    this.IsWaitCustomizedCallBack = false;
    this.autoConnectAfterPageLoad = true;
    this.IsFirstConnect = true;
    this.IsEverConnected = false;
    this.reconnectTryTime = 0;
    this.TimeIntervalID = -1;
    this.ReceivedEchoBack = false;
    this.Version = lS(0, 14);
    this.hostPort = lS(0, 15);
    this.hostPortIndex = 0;
    this.CaptureName = lS(0, 16);
    this.NiuniuSocket = null;
    this.connectState = emClosed;
    this.SocketTimeStamp = new Date().getTime();
    this.TimeOutID = -1;
    this.FinishedCallback = null;
    this.PluginLoadedCallback = null;
    this.VersionCallback = null;
    this.OnConnectFailed = function (isReconnect) {
        (() => {
            const __callInstance76 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.WriteLog(isReconnect ? lS(0, 17) : lS(0, 18));
                    }
                }
            });
            const __exports = __callInstance76.exports;
            return __exports.data();
        })();
    };
    this.LoadPlugin = function () {
        var obj = $(lS(0, 19));
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance75 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 20)).append(lS(0, 21));
                                        }
                                    }
                                });
                                const __exports = __callInstance75.exports;
                                return __exports.data();
                            })();
                            obj = $(lS(0, 22));
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(obj.length < 1 ? 1 : 0);
        })();
        (() => {
            const __callInstance74 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        obj.html(lS(0, 23));
                    }
                }
            });
            const __exports = __callInstance74.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance73 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        obj.html(lS(0, 24));
                    }
                }
            });
            const __exports = __callInstance73.exports;
            return __exports.data();
        })();
        var iframeObj = $(lS(0, 25));
        (() => {
            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance72 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 26)).append(lS(0, 27));
                                        }
                                    }
                                });
                                const __exports = __callInstance72.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance1.exports;
            return __exports.data(iframeObj.length < 1 ? 1 : 0);
        })();
    };
    this.niuniuCapture = function () {
        return document.getElementById(lS(0, 28));
    };
    this.addEvent = function (obj, name, func) {
        (() => {
            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance71 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            obj.attachEvent(lS(0, 29) + name, func);
                                        }
                                    }
                                });
                                const __exports = __callInstance71.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            (() => {
                                const __callInstance70 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            obj.addEventListener(name, func, false);
                                        }
                                    }
                                });
                                const __exports = __callInstance70.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance2.exports;
            return __exports.data(obj.attachEvent ? 1 : 0);
        })();
    };
    this.pluginValid = function () {
        try {
            if (self.niuniuCapture().valid) {
                return true;
            }
        } catch (e) {
        }
        return false;
    };
    this.OnCaptureFinished = function (x, y, width, height, content, localpath) {
        (() => {
            const __callInstance69 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.OnCaptureFinishedEx(1, x, y, width, height, lS(0, 30), content, localpath);
                    }
                }
            });
            const __exports = __callInstance69.exports;
            return __exports.data();
        })();
    };
    this.OnCaptureFinishedEx = function (type, x, y, width, height, info, content, localpath) {
        (() => {
            const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance68 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            self.FinishedCallback(type, x, y, width, height, info, content, localpath);
                                        }
                                    }
                                });
                                const __exports = __callInstance68.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            (() => {
                                const __callInstance67 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            alert(lS(0, 31));
                                        }
                                    }
                                });
                                const __exports = __callInstance67.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance3.exports;
            return __exports.data(self.FinishedCallback != null ? 1 : 0);
        })();
    };
    this.pluginLoaded = function (fromWebsocket) {
        if (!fromWebsocket && !self.pluginValid()) {
            (() => {
                const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance66 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                self.PluginLoadedCallback(false);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance66.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance4.exports;
                return __exports.data(self.PluginLoadedCallback != null ? 1 : 0);
            })();
            return false;
        }
        (() => {
            const __callInstance65 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.GetVersion();
                    }
                }
            });
            const __exports = __callInstance65.exports;
            return __exports.data();
        })();
        (() => {
            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance64 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            self.PluginLoadedCallback(true);
                                        }
                                    }
                                });
                                const __exports = __callInstance64.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance5.exports;
            return __exports.data(self.PluginLoadedCallback != null ? 1 : 0);
        })();
        if (!self.pluginValid()) {
            return false;
        }
        (() => {
            const __callInstance63 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitCapture(self.NiuniuAuthKey);
                    }
                }
            });
            const __exports = __callInstance63.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance62 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emPensize, self.PenSize);
                    }
                }
            });
            const __exports = __callInstance62.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance61 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emDrawType, self.DrawType);
                    }
                }
            });
            const __exports = __callInstance61.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance60 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emTrackColor, self.TrackColor);
                    }
                }
            });
            const __exports = __callInstance60.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance59 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emEditBorderColor, self.EditBorderColor);
                    }
                }
            });
            const __exports = __callInstance59.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance58 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emTransparent, self.Transparent);
                    }
                }
            });
            const __exports = __callInstance58.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance57 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetSaveName, self.SaveName);
                    }
                }
            });
            const __exports = __callInstance57.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance56 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetMagnifierLogoText, self.MagnifierLogoText);
                    }
                }
            });
            const __exports = __callInstance56.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance55 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetMosaicType, self.MosaicType);
                    }
                }
            });
            const __exports = __callInstance55.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance54 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetTooltipText, self.ToolTipText);
                    }
                }
            });
            const __exports = __callInstance54.exports;
            return __exports.data();
        })();
        (() => {
            i = 0;
            const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < self.More_Ext_Params.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance53 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            self.niuniuCapture().InitParam(emSetMoreInfo, self.More_Ext_Params[i]);
                                        }
                                    }
                                });
                                const __exports = __callInstance53.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance0.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance52 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.addEvent(self.niuniuCapture(), lS(0, 32), self.OnCaptureFinishedEx);
                    }
                }
            });
            const __exports = __callInstance52.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance51 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.addEvent(self.niuniuCapture(), lS(0, 33), self.OnCaptureFinished);
                    }
                }
            });
            const __exports = __callInstance51.exports;
            return __exports.data();
        })();
    };
    this.SetWatermarkPicture = function (watermarPicData) {
        self.WatermarkPicturePath = watermarPicData;
        if (!self.pluginValid())
            return;
        (() => {
            const __callInstance50 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetWatermarkPicturePath, self.WatermarkPicturePath);
                    }
                }
            });
            const __exports = __callInstance50.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance49 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetWatermarkPictureType, self.WatermarkPictureType);
                    }
                }
            });
            const __exports = __callInstance49.exports;
            return __exports.data();
        })();
    };
    this.SetWatermarkText = function (watermarkText) {
        self.WatermarkTextValue = watermarkText;
        if (!self.pluginValid())
            return;
        (() => {
            const __callInstance48 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetWatermarkTextValue, self.WatermarkTextValue);
                    }
                }
            });
            const __exports = __callInstance48.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance47 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().InitParam(emSetWatermarkTextType, self.WatermarkTextType);
                    }
                }
            });
            const __exports = __callInstance47.exports;
            return __exports.data();
        })();
    };
    this.SavePicture = function (savename) {
        (() => {
            const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance46 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            self.niuniuCapture().SavePicture(savename);
                                        }
                                    }
                                });
                                const __exports = __callInstance46.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance6.exports;
            return __exports.data(self.pluginValid() ? 1 : 0);
        })();
    };
    this.GetCursorPosition = function () {
        if (self.pluginValid()) {
            var val = self.niuniuCapture().GetCursorPosition();
            return val;
        }
        return lS(0, 34);
    };
    this.NewCaptureParamObject = function (defaultpath, hideCurrWindow, autoCaptureFlag, x, y, width, height) {
        var obj = new Object();
        obj.CmdType = 1;
        obj.IsGBK = 0;
        obj.AuthKey = self.NiuniuAuthKey;
        obj.Pensize = self.PenSize;
        obj.DrawType = self.DrawType;
        obj.TrackColor = self.TrackColor;
        obj.EditBorderColor = self.EditBorderColor;
        obj.Transparent = self.Transparent;
        obj.SetSaveName = self.SaveName;
        obj.SetMagnifierLogoText = self.MagnifierLogoText;
        obj.SetWatermarkPictureTypeEx = self.WatermarkPictureType;
        obj.SetWatermarkPicturePath = self.WatermarkPicturePath;
        obj.SetWatermarkTextTypeEx = self.WatermarkTextType;
        obj.SetWatermarkTextValue = self.WatermarkTextValue;
        obj.MosaicType = self.MosaicType;
        obj.SetToolbarText = self.ToolTipText;
        obj.MoreInfo = this.MoreInfo;
        if (self.More_Ext_Params.length > 0) {
            obj.more_ext_count = self.More_Ext_Params.length;
            for (i = 0; i < self.More_Ext_Params.length; i++) {
                switch (i) {
                case 0:
                    obj.more_ext0 = self.More_Ext_Params[i];
                    break;
                case 1:
                    obj.more_ext1 = self.More_Ext_Params[i];
                    break;
                case 2:
                    obj.more_ext2 = self.More_Ext_Params[i];
                    break;
                case 3:
                    obj.more_ext3 = self.More_Ext_Params[i];
                    break;
                case 4:
                    obj.more_ext4 = self.More_Ext_Params[i];
                    break;
                case 5:
                    obj.more_ext5 = self.More_Ext_Params[i];
                    break;
                case 6:
                    obj.more_ext6 = self.More_Ext_Params[i];
                    break;
                case 7:
                    obj.more_ext7 = self.More_Ext_Params[i];
                    break;
                case 8:
                    obj.more_ext8 = self.More_Ext_Params[i];
                    break;
                case 9:
                    obj.more_ext9 = self.More_Ext_Params[i];
                    break;
                }
            }
        }
        obj.DefaultPath = defaultpath;
        obj.HideCurrentWindow = hideCurrWindow;
        obj.AutoCaptureFlag = autoCaptureFlag;
        obj.x = x;
        obj.y = y;
        obj.Width = width;
        obj.Height = height;
        return obj;
    };
    this.DoCapture = function (name, hide, AutoCapture, x, y, width, height) {
        if (self.IsNeedCustomizedProtocol()) {
            return self.DoCaptureForCustomize(name, hide, AutoCapture, parseInt(x), parseInt(y), parseInt(width), parseInt(height));
        }
        if (!self.pluginValid()) {
            return emCaptureFailed;
        }
        (() => {
            const __callInstance45 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.niuniuCapture().Capture(name, hide, AutoCapture, x, y, width, height);
                    }
                }
            });
            const __exports = __callInstance45.exports;
            return __exports.data();
        })();
        return emCaptureSuccess;
    };
    this.InitNiuniuCapture = function () {
        (() => {
            const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.LoadPlugin();
                    }
                }
            });
            const __exports = __callInstance44.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        setTimeout(lS(0, 35), 200);
                    }
                }
            });
            const __exports = __callInstance43.exports;
            return __exports.data();
        })();
    };
    this.InitWebSocketAndBindCallback = function () {
        if (!self.autoConnectAfterPageLoad || !self.IsNeedCustomizedProtocol()) {
            return;
        }
        (() => {
            const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.connectHost();
                    }
                }
            });
            const __exports = __callInstance42.exports;
            return __exports.data();
        })();
    };
    this.getNextPort = function () {
        var portArray = self.hostPort.split(lS(0, 36));
        if (portArray.length < 1) {
            (() => {
                const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            alert(lS(0, 37));
                        }
                    }
                });
                const __exports = __callInstance41.exports;
                return __exports.data();
            })();
            return 30101;
        }
        (() => {
            const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            self.hostPortIndex = 0;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance7.exports;
            return __exports.data(self.hostPortIndex < 0 ? 1 : 0);
        })();
        (() => {
            const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            self.hostPortIndex = portArray.length - 1;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance8.exports;
            return __exports.data(self.hostPortIndex > portArray.length - 1 ? 1 : 0);
        })();
        var nPort = parseInt(portArray[self.hostPortIndex]);
        self.hostPortIndex++;
        (() => {
            const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            self.hostPortIndex = 0;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance9.exports;
            return __exports.data(self.hostPortIndex > portArray.length - 1 ? 1 : 0);
        })();
        return nPort;
    };
    this.connectHost = function () {
        if (self.NiuniuSocket != null) {
            (() => {
                const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            self.WriteLog(lS(0, 38));
                        }
                    }
                });
                const __exports = __callInstance40.exports;
                return __exports.data();
            })();
            return;
        }
        (() => {
            const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        clearTimeout(self.TimeOutID);
                    }
                }
            });
            const __exports = __callInstance39.exports;
            return __exports.data();
        })();
        self.connectState = emConnecting;
        try {
            var wshosts = [
                lS(0, 39),
                lS(0, 40)
            ];
            for (var i in wshosts) {
                try {
                    var host = lS(0, 41) + self.getNextPort() + lS(0, 42) + self.CaptureName;
                    self.NiuniuSocket = new WebSocket(host);
                    break;
                } catch (ee) {
                    var ggg = 0;
                }
            }
            self.NiuniuSocket.onopen = function (evt) {
                (() => {
                    const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.NiuniuSocket.send(lS(0, 43) + self.SocketTimeStamp);
                            }
                        }
                    });
                    const __exports = __callInstance38.exports;
                    return __exports.data();
                })();
                (() => {
                    const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.WriteLog(lS(0, 44));
                            }
                        }
                    });
                    const __exports = __callInstance37.exports;
                    return __exports.data();
                })();
                (() => {
                    const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                clearTimeout(self.TimeOutID);
                            }
                        }
                    });
                    const __exports = __callInstance36.exports;
                    return __exports.data();
                })();
            };
            self.NiuniuSocket.onmessage = function (msg) {
                var str = lS(0, 45);
                str = msg.data;
                var id = str.substr(0, 1);
                var arg1 = str.substr(1);
                (() => {
                    const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                clearTimeout(self.TimeOutID);
                            }
                        }
                    });
                    const __exports = __callInstance35.exports;
                    return __exports.data();
                })();
                (() => {
                    const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    self.hostPortIndex--;
                                    self.connectState = emConnected;
                                    (() => {
                                        const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    self.pluginLoaded(true);
                                                }
                                            }
                                        });
                                        const __exports = __callInstance34.exports;
                                        return __exports.data();
                                    })();
                                    self.IsEverConnected = true;
                                    self.IsFirstConnect = false;
                                    (() => {
                                        const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                            env: {
                                                impFunc1: () => {
                                                    {
                                                        (() => {
                                                            const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                                                                env: {
                                                                    impFunc: () => {
                                                                        setTimeout(lS(0, 47), 3);
                                                                    }
                                                                }
                                                            });
                                                            const __exports = __callInstance33.exports;
                                                            return __exports.data();
                                                        })();
                                                    }
                                                },
                                                impFunc2: () => {
                                                }
                                            }
                                        });
                                        const __exports = __ifInstance11.exports;
                                        return __exports.data(self.IsWaitCustomizedCallBack ? 1 : 0);
                                    })();
                                    (() => {
                                        const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    self.WriteLog(lS(0, 48));
                                                }
                                            }
                                        });
                                        const __exports = __callInstance32.exports;
                                        return __exports.data();
                                    })();
                                    self.ReceivedEchoBack = true;
                                    (() => {
                                        const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    clearInterval(self.TimeIntervalID);
                                                }
                                            }
                                        });
                                        const __exports = __callInstance31.exports;
                                        return __exports.data();
                                    })();
                                    self.TimeIntervalID = setInterval(lS(0, 49), 3000);
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance10.exports;
                    return __exports.data(id == lS(0, 46) ? 1 : 0);
                })();
                if (id == lS(0, 50)) {
                    var _aoResult = window[lS(0, 85, true)](lS(0, 51) + arg1 + lS(0, 52));
                    self.ReceivedEchoBack = true;
                    if (_aoResult.command == lS(0, 53)) {
                        (() => {
                            const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        self.WriteLog(lS(0, 54));
                                    }
                                }
                            });
                            const __exports = __callInstance30.exports;
                            return __exports.data();
                        })();
                        return;
                    }
                    (() => {
                        const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    self.WriteLog(lS(0, 55));
                                }
                            }
                        });
                        const __exports = __callInstance29.exports;
                        return __exports.data();
                    })();
                    (() => {
                        const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        (() => {
                                            const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        self.WriteLog(_aoResult.Ver);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance28.exports;
                                            return __exports.data();
                                        })();
                                        (() => {
                                            const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        self.VersionCallback(_aoResult.Ver);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance27.exports;
                                            return __exports.data();
                                        })();
                                    }
                                },
                                impFunc2: () => {
                                    {
                                        (() => {
                                            const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        self.OnCaptureFinishedEx(_aoResult.Type, _aoResult.x, _aoResult.y, _aoResult.Width, _aoResult.Height, _aoResult.Info, _aoResult.Content, _aoResult.LocalPath);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance26.exports;
                                            return __exports.data();
                                        })();
                                    }
                                }
                            }
                        });
                        const __exports = __ifInstance12.exports;
                        return __exports.data(_aoResult.command == lS(0, 56) ? 1 : 0);
                    })();
                }
            };
            self.NiuniuSocket.onclose = function (evt) {
                (() => {
                    const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.OnWebSocketError(lS(0, 57) + evt.data);
                            }
                        }
                    });
                    const __exports = __callInstance25.exports;
                    return __exports.data();
                })();
            };
            self.NiuniuSocket.onerror = function (evt) {
            };
        } catch (e) {
            (() => {
                const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            self.OnWebSocketError(lS(0, 58) + e.message);
                        }
                    }
                });
                const __exports = __callInstance24.exports;
                return __exports.data();
            })();
        }
    };
    this.WriteLog = function (txt) {
        try {
            (() => {
                const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            console.log(txt);
                        }
                    }
                });
                const __exports = __callInstance23.exports;
                return __exports.data();
            })();
        } catch (e) {
        }
    };
    this.OnWebSocketError = function (type) {
        var isConnectedFailed = false;
        (() => {
            const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            isConnectedFailed = true;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance13.exports;
            return __exports.data(self.connectState != emConnected ? 1 : 0);
        })();
        (() => {
            const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.WriteLog(type);
                    }
                }
            });
            const __exports = __callInstance22.exports;
            return __exports.data();
        })();
        self.ReceivedEchoBack = false;
        self.connectState = emClosed;
        (() => {
            const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            self.NiuniuSocket.close();
                                        }
                                    }
                                });
                                const __exports = __callInstance21.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance14.exports;
            return __exports.data(self.NiuniuSocket != null ? 1 : 0);
        })();
        self.NiuniuSocket = null;
        (() => {
            const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        clearTimeout(self.TimeOutID);
                    }
                }
            });
            const __exports = __callInstance20.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        clearInterval(self.TimeIntervalID);
                    }
                }
            });
            const __exports = __callInstance19.exports;
            return __exports.data();
        })();
        if (isConnectedFailed) {
            if (self.IsFirstConnect) {
                self.IsFirstConnect = false;
                (() => {
                    const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    (() => {
                                        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                            env: {
                                                impFunc: () => {
                                                    self.OnConnectFailed(false);
                                                }
                                            }
                                        });
                                        const __exports = __callInstance18.exports;
                                        return __exports.data();
                                    })();
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance15.exports;
                    return __exports.data(self.OnConnectFailed != null ? 1 : 0);
                })();
                return;
            }
            if (self.IsEverConnected) {
                self.reconnectTryTime++;
                if (self.reconnectTryTime > 3) {
                    self.IsEverConnected = false;
                    self.reconnectTryTime = 0;
                    (() => {
                        const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        (() => {
                                            const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        self.OnConnectFailed(true);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance17.exports;
                                            return __exports.data();
                                        })();
                                    }
                                },
                                impFunc2: () => {
                                }
                            }
                        });
                        const __exports = __ifInstance16.exports;
                        return __exports.data(self.OnConnectFailed != null ? 1 : 0);
                    })();
                    return;
                }
            }
        }
        self.TimeOutID = setTimeout(lS(0, 59), 800);
    };
    this.LoopEchoMessage = function () {
        if (!self.ReceivedEchoBack) {
            (() => {
                const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            self.OnWebSocketError(lS(0, 60));
                        }
                    }
                });
                const __exports = __callInstance16.exports;
                return __exports.data();
            })();
            self.ReceivedEchoBack = false;
            (() => {
                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            clearInterval(self.TimeIntervalID);
                        }
                    }
                });
                const __exports = __callInstance15.exports;
                return __exports.data();
            })();
            self.TimeIntervalID = setInterval(lS(0, 61), 3000);
            return;
        }
        self.ReceivedEchoBack = false;
        (() => {
            const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        clearTimeout(self.TimeOutID);
                    }
                }
            });
            const __exports = __callInstance14.exports;
            return __exports.data();
        })();
        if (self.connectState != emConnected) {
            (() => {
                const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            clearInterval(self.TimeIntervalID);
                        }
                    }
                });
                const __exports = __callInstance13.exports;
                return __exports.data();
            })();
            return;
        }
        var obj = new Object();
        obj.command = lS(0, 62);
        (() => {
            const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.NiuniuSocket.send(lS(0, 63) + encodeURIComponent(JSON.stringify(obj)));
                    }
                }
            });
            const __exports = __callInstance12.exports;
            return __exports.data();
        })();
    };
    this.SendReadyRecvData = function () {
        (() => {
            const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.WriteLog(lS(0, 64));
                    }
                }
            });
            const __exports = __callInstance11.exports;
            return __exports.data();
        })();
        var obj = self.NewCaptureParamObject(lS(0, 65), 0, 0, 0, 0, 0, 0);
        obj.CmdType = -1;
        (() => {
            const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.NiuniuSocket.send(lS(0, 66) + encodeURIComponent(JSON.stringify(obj)));
                    }
                }
            });
            const __exports = __callInstance10.exports;
            return __exports.data();
        })();
    };
    this.DoCaptureForCustomize = function (name, hide, AutoCapture, x, y, width, height) {
        var obj = self.NewCaptureParamObject(name, hide, AutoCapture, x, y, width, height);
        try {
            if (self.connectState == emConnected) {
                var json = JSON.stringify(obj);
                (() => {
                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.NiuniuSocket.send(lS(0, 67) + encodeURIComponent(json));
                            }
                        }
                    });
                    const __exports = __callInstance9.exports;
                    return __exports.data();
                })();
            } else {
                obj.SetWatermarkPicturePath = lS(0, 68);
                var json = JSON.stringify(obj);
                (() => {
                    const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.WriteLog(json.length);
                            }
                        }
                    });
                    const __exports = __callInstance8.exports;
                    return __exports.data();
                })();
                var newUrl = self.CaptureName + lS(0, 69) + encodeURIComponent(json);
                (() => {
                    const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    newUrl = self.CaptureName + lS(0, 70);
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance17.exports;
                    return __exports.data(isLinux() ? 1 : 0);
                })();
                (() => {
                    const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.WriteLog(newUrl.length);
                            }
                        }
                    });
                    const __exports = __callInstance7.exports;
                    return __exports.data();
                })();
                (() => {
                    const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                $(lS(0, 71)).attr(lS(0, 72), newUrl);
                            }
                        }
                    });
                    const __exports = __callInstance6.exports;
                    return __exports.data();
                })();
                self.IsWaitCustomizedCallBack = true;
                (() => {
                    const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                self.connectHost();
                            }
                        }
                    });
                    const __exports = __callInstance5.exports;
                    return __exports.data();
                })();
                return emCaptureUnknown;
            }
            return emCaptureSuccess;
        } catch (e) {
            (() => {
                const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            alert(e.message);
                        }
                    }
                });
                const __exports = __callInstance4.exports;
                return __exports.data();
            })();
        }
        return emCaptureUnknown;
    };
    this.IsNeedCustomizedProtocol = function () {
        if (isMacintosh()) {
            return true;
        }
        if (!self.useCustomizedProtoco) {
            return false;
        }
        if (self.pluginValid()) {
            return false;
        }
        try {
            var agent = window.navigator.userAgent.toLowerCase();
            var isIE = agent.indexOf(lS(0, 73)) > -1 && agent.indexOf(lS(0, 74)) > -1;
            if (isIE) {
                return false;
            }
            var isIE11 = agent.indexOf(lS(0, 75)) > -1 && agent.indexOf(lS(0, 76)) > -1;
            if (isIE11) {
                return false;
            }
            var isQQBrowser = agent.indexOf(lS(0, 77)) != -1;
            var isUBrowser = agent.indexOf(lS(0, 78)) != -1;
            if (isUBrowser) {
                return false;
            }
            var isFirefox = agent.indexOf(lS(0, 79)) != -1;
            if (isFirefox) {
                return true;
            }
            var isEdge = agent.indexOf(lS(0, 80)) != -1;
            if (isEdge) {
                return true;
            }
            var isChrome = agent.indexOf(lS(0, 81)) != -1;
            if (isChrome) {
                return true;
            }
            return false;
        } catch (e) {
            (() => {
                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            self.WriteLog(lS(0, 82) + e.message);
                        }
                    }
                });
                const __exports = __callInstance3.exports;
                return __exports.data();
            })();
        }
        return true;
    };
    this.GetVersion = function () {
        if (self.IsNeedCustomizedProtocol()) {
            if (self.connectState != emConnected) {
                return;
            }
            var obj = new Object();
            obj.command = lS(0, 83);
            (() => {
                const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            self.NiuniuSocket.send(lS(0, 84) + encodeURIComponent(JSON.stringify(obj)));
                        }
                    }
                });
                const __exports = __callInstance2.exports;
                return __exports.data();
            })();
            return;
        }
        if (!self.pluginValid()) {
            return;
        }
        var verSion = self.niuniuCapture().GetVersion();
        (() => {
            const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.VersionCallback(verSion);
                    }
                }
            });
            const __exports = __callInstance1.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        self.WriteLog(verSion);
                    }
                }
            });
            const __exports = __callInstance0.exports;
            return __exports.data();
        })();
    };
}</script>
</body>
</html>
