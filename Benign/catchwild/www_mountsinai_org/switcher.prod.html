<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>switcher.prod.html</title>
</head>
<body>

<script>
(()=>{"use strict";var e={2778:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StorageNames=t.StorageService=void 0;var s,o="User1st.";!function(e){e.Settings="u1stSettings",e.IsActive="u1stIsActive",e.LoaderMode="loaderMode",e.Product="product",e.Address="address",e.IsAuthenticated="isAuthenticated",e.MagnifyScale="MagnifyScale",e.EnabledDevices="enabledDevices",e.FileMode="fileMode",e.StaticAddress="staticAddress",e.UiAddress="uiAddress",e.EngineAddress="engineAddress"}(s||(s={})),t.StorageNames=s;var i=function(){function e(){}return e.prototype.clearAll=function(e){var t=this;e.forEach((function(e){t.remove("".concat(o).concat(e))}))},e.prototype.remove=function(e){window.localStorage.removeItem("".concat(o).concat(e))},e.prototype.get=function(e){var t=window.localStorage.getItem("".concat(o).concat(e));return"string"==typeof t&&""!==t&&(t=JSON.parse(t)),t},e.prototype.set=function(e,t){window.localStorage.setItem("".concat(o).concat(e),JSON.stringify(t))},e}();t.StorageService=i},3393:function(e,t,s){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++)for(var i in t=arguments[s])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitcherhMessenger=void 0;var i=s(58),r=function(){function e(e){this.switcherStorage=e}return e.prototype.init=function(){window.addEventListener("message",this.recieveMessage.bind(this),!1)},e.prototype.recieveMessage=function(e){e.data&&(e.data.type===i.Messages.Product?this.switcherStorage.set(i.StorageNames.Product,e.data.data):e.data.type===i.Messages.Address?this.switcherStorage.set(i.StorageNames.Address,e.data.data):e.data.action===i.Messages.Loader&&(this.switcherStorage.set(i.StorageNames.Address,e.data.loader.address),this.switcherStorage.set(i.StorageNames.Product,e.data.loader.product),this.switcherStorage.set(i.StorageNames.IsAuthenticated,e.data.loader.isAuthenticated)))},e.prototype.sendMessage=function(e){window.parent.postMessage(o({switcher:!0},e),"*")},e}();t.SwitcherhMessenger=r},921:function(e,t,s){var o=this&&this.__awaiter||function(e,t,s,o){return new(s||(s=Promise))((function(i,r){function n(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,a)}c((o=o.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var s,o,i,r,n={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,o=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if(!((i=(i=n.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){n=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){n.label=r[1];break}if(6===r[0]&&n.label<i[1]){n.label=i[1],i=r;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(r);break}i[2]&&n.ops.pop(),n.trys.pop();continue}r=t.call(e,n)}catch(e){r=[6,e],o=0}finally{s=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitcherStartup=void 0;var r=s(2778),n=s(58),a=s(6563),c=s(3393),d=s(7086),u=s(7160),l=function(){function e(e,t,s){this.switcherStorage=e,this.switcherSessionStorage=t,this.routes=s;this.isOnPremise="onpremise"=="production".trim()}return e.prototype.updateRoutes=function(e){if(e.isStaticAddress){var t=e.isStaticAddress?"/static":"",s=e.address+t;this.routes.setStaticAddress(s)}e.fileMode&&this.routes.setFileMode(e.fileMode)},e.prototype.init=function(){var e,t=new c.SwitcherhMessenger(this.switcherStorage);t.init();var s=this.switcherStorage.get(r.StorageNames.LoaderMode),d={action:n.Messages.Activation,isEnabled:(e={},e[a.Devices.Desktop]=!0,e[a.Devices.Mobile]=!0,e),loader:{address:this.switcherStorage.get(r.StorageNames.Address),product:this.switcherStorage.get(r.StorageNames.Product),isAuthenticated:this.switcherStorage.get(r.StorageNames.IsAuthenticated),fileMode:this.switcherStorage.get(r.StorageNames.FileMode),isStaticAddress:this.switcherStorage.get(r.StorageNames.StaticAddress),uiAddress:this.switcherStorage.get(r.StorageNames.UiAddress),engineAddress:this.switcherStorage.get(r.StorageNames.EngineAddress)}};this.updateRoutes(d.loader),d.loader.isAuthenticated&&s?t.sendMessage(d):o(this,void 0,void 0,(function(){var e,s,o;return i(this,(function(i){switch(i.label){case 0:return e=new URLSearchParams(window.location.search).get("url"),this.isOnPremise?(o=this.getOnPremiseDevices(),[3,3]):[3,1];case 1:return[4,this.getDomainEnabled(e)];case 2:o=i.sent(),i.label=3;case 3:return s=o,d.isEnabled[a.Devices.Desktop]=!!(null==s?void 0:s.desktop_enabled),d.isEnabled[a.Devices.Mobile]=!!(null==s?void 0:s.mobile_enabled),!this.isOnPremise&&this.updateSessionStorage(s,e),t.sendMessage(d),[2]}}))}))},e.prototype.getOnPremiseDevices=function(){return{desktop_enabled:!0,mobile_enabled:!0}},e.prototype.getDomainEnabled=function(e){return o(this,void 0,void 0,(function(){var t,s,o;return i(this,(function(i){switch(i.label){case 0:t=u.Routes.getInstance(),i.label=1;case 1:return i.trys.push([1,3,,4]),(s=this.switcherSessionStorage.get(r.StorageNames.EnabledDevices))&&s.domain==e?(s.fromStorage=!0,[2,s]):[4,fetch("".concat(t.apiAddress,"/device-enabled?url=").concat(e))];case 2:return 200!=(o=i.sent()).status?[2]:[2,o.json()];case 3:return i.sent(),[2];case 4:return[2]}}))}))},e.prototype.updateSessionStorage=function(e,t){(null==e?void 0:e.fromStorage)||this.switcherSessionStorage.set(r.StorageNames.EnabledDevices,{desktop_enabled:!!(null==e?void 0:e.desktop_enabled),mobile_enabled:!!(null==e?void 0:e.mobile_enabled),domain:t})},e}();t.SwitcherStartup=l,new l(new d.SwitcherStorage,new d.SwitcherSessionStorage,u.Routes.getInstance()).init()},7086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwitcherSessionStorage=t.SwitcherStorage=void 0;var s="User1st.",o=function(){function e(){}return e.prototype.clearAll=function(e){var t=this;e.forEach((function(e){t.remove("".concat(s).concat(e))}))},e.prototype.remove=function(e){window.localStorage.removeItem("".concat(s).concat(e))},e.prototype.get=function(e){var t=window.localStorage.getItem("".concat(s).concat(e));return t?JSON.parse(t):null},e.prototype.set=function(e,t){window.localStorage.setItem("".concat(s).concat(e),JSON.stringify(t))},e}();t.SwitcherStorage=o;var i=function(){function e(){}return e.prototype.clearAll=function(e){var t=this;e.forEach((function(e){t.remove("".concat(s).concat(e))}))},e.prototype.remove=function(e){window.sessionStorage.removeItem("".concat(s).concat(e))},e.prototype.get=function(e){var t=window.sessionStorage.getItem("".concat(s).concat(e));return t?JSON.parse(t):null},e.prototype.set=function(e,t){window.sessionStorage.setItem("".concat(s).concat(e),JSON.stringify(t))},e}();t.SwitcherSessionStorage=i},58:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=t.loaderMode=t.ADDRESS_TYPE=t.PRODUCTS=t.StorageNames=t.Messages=t.SWITCHER_ID=void 0,t.SWITCHER_ID="u1st_switcher",t.Messages={Activation:"activation",Loader:"loader",Product:"product",Address:"address"},t.StorageNames={LoaderMode:"loaderMode",Product:"product",Address:"address",IsAuthenticated:"isAuthenticated",FileMode:"fileMode",StaticAddress:"staticAddress",UiAddress:"uiAddress",EngineAddress:"engineAddress"},t.PRODUCTS={FRONTEND:"frontend",TOOLBAR:"toolbar",IDE:"ide",MENU:"menu",STUDIO:"studio"},t.ADDRESS_TYPE={LOCALHOST:"localhost",PRODUCTION:"production"},t.loaderMode={ADDRESS:"address",PRODUCT:"product",IS_AUTHENTICATED:"isAuthenticated"},t.ENV={PROD:"prod",DEBUG:"debug",ON_PREM:"package"}},6563:(e,t)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),t.Devices=void 0,(s=t.Devices||(t.Devices={})).Mobile="mobile",s.Desktop="desktop"},7160:(e,t)=>{var s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=t.ADDRESS=t.RouteType=t.ENV=void 0,function(e){e.DEV="development",e.PROD="production",e.ON_PREM="onpremise",e.K8S="k8s"}(s=t.ENV||(t.ENV={})),(o=t.RouteType||(t.RouteType={})).Fixers="Fixers",o.FixersCss="FixersCss",o.GlobalFixers="GlobalFixers",o.GlobalCss="GlobalCss",o.Menu="Menu",o.Switcher="Switcher",o.ValidatorFixers="ValidatorFixers",o.Studio="Studio",o.UFEInit="UFEInit",t.ADDRESS={MAIN_URL:null==="https://ide.user1st.info"?void 0:"https://ide.user1st.info".trim(),STUDIO_URL:null==="https://ide.user1st.info"?void 0:"https://ide.user1st.info".trim(),STATIC_URL:null==="https://ide.user1st.info"?void 0:"https://ide.user1st.info".trim()};var i=function(){function e(){switch(this.isOnPremise=!1,this.apiAddress="".concat(t.ADDRESS.MAIN_URL,"/api/frontend"),this.staticAddress="".concat(t.ADDRESS.STATIC_URL),this.env=String("production").trim(),this.env){case s.DEV:case s.K8S:this.fileMode="debug";break;case s.ON_PREM:this.fileMode="package",this.isOnPremise=!0;break;default:this.fileMode="prod"}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.getRoute=function(e){return{Fixers:"".concat(this.staticAddress,"/content/accessibilityFixer.").concat(this.fileMode,".js"),FixersCss:"".concat(this.staticAddress,"/content/accessibilityFixer.css"),GlobalFixers:"".concat(this.staticAddress,"/content/globalFixer.").concat(this.fileMode,".js"),GlobalCss:"".concat(this.staticAddress,"/content/globalFixer.css"),ValidatorFixers:"".concat(this.staticAddress,"/content/validatorFixers.").concat(this.fileMode,".js"),Menu:"".concat(this.staticAddress,"/menu/index.html"),Switcher:"".concat(this.staticAddress,"/content/index.html"),UFEInit:"".concat(this.staticAddress,"/content/ufeInit.").concat(this.fileMode,".js"),Studio:"".concat(t.ADDRESS.STUDIO_URL,"/studio.js")}[e]},e.prototype.getStaticFilesPath=function(){var e=this.env==s.DEV;return"".concat(e?"static/":"","content")},e.prototype.setApiAddress=function(e){this.apiAddress=e},e.prototype.getApiAddress=function(){return this.apiAddress},e.prototype.getStaticAddress=function(){return this.staticAddress},e.prototype.setStaticAddress=function(e){this.staticAddress=e},e.prototype.getFileMode=function(){return this.fileMode},e.prototype.setFileMode=function(e){this.fileMode=e},e.prototype.setStudioUrl=function(e){t.ADDRESS.STUDIO_URL=e},e}();t.Routes=i}},t={};!function s(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}(921)})();
</script>

</body>
</html>
