<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>functions.html</title>
</head>
<body>

<script>
function resettoggle() {
	var e = document.getElementById('foo');
	e.style.display = 'none';
}

function toggle_visibility(id) {
	var e = document.getElementById(id);

	if(e.style.display == 'none'){
		e.style.display = 'block';
	}

	else {
		e.style.display = 'none';
	}
}

$(function() {
	$('#login-li').click(function(){
		$('.login-ul').slideToggle();
	});
});

$(function() {
	$('#personal-banking-li').click(function(){
		$('.personal-banking-ul').slideToggle();
	});
});

$(function() {
	$('#business-banking-li').click(function(){
		$('.business-banking-ul').slideToggle();
	});
});

$(function() {
	$('#quick-links-li').click(function(){
		$('.quick-links-ul').slideToggle();
	});
});

$(function() {
	$('#aboutus-li').click(function(){
		$('.aboutus-ul').slideToggle();
	});
});

function submit_form_a(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-city-msg').hide();
	$('#contact-form-branch-msg').hide();
	$('#contact-form-time-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();
	
	var city = document.getElementById('contact-form-city').value;
	$('#city_'+city).attr('id', 'contact-form-branch');

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-city').removeClass('form-validation-error');
	$('#contact-form-branch').removeClass('form-validation-error');
	$('#contact-form-time').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_city = document.getElementById('contact-form-city').value;
	var contact_form_branch = document.getElementById('contact-form-branch').value;
	var contact_form_time = document.getElementById('contact-form-time').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_city == ''){
		$('#contact-form-city').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_branch == ''){
		$('#contact-form-branch').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-a.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_city' : contact_form_city,
				'lead_nearest_branch' : contact_form_branch,
				'lead_time_to_call' : contact_form_time,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-city').val('');
					$('#contact-form-branch').val('');
					$('#contact-form-time').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-city').removeClass('form-validation-error');
					$('#contact-form-branch').removeClass('form-validation-error');
					$('#contact-form-time').removeClass('form-validation-error');

					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_city){
						$('#contact-form-city').addClass('form-validation-error');
						$('#contact-form-city-msg').html(result.lead_city);
						$('#contact-form-city-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);

	}

	return false;
}

function submit_form_b(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-city-msg').hide();
	$('#contact-form-branch-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-city').removeClass('form-validation-error');
	$('#contact-form-branch').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_city = document.getElementById('contact-form-city').value;
	var contact_form_branch = document.getElementById('contact-form-branch').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-b.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_city' : contact_form_city,
				'lead_nearest_branch' : contact_form_branch,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-city').val('');
					$('#contact-form-branch').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-city').removeClass('form-validation-error');
					$('#contact-form-branch').removeClass('form-validation-error');

					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_city){
						$('#contact-form-city').addClass('form-validation-error');
						$('#contact-form-city-msg').html(result.lead_city);
						$('#contact-form-city-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);

	}

	return false;
}

function submit_form_c(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-c.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
			
					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);

	}

	return false;
}

function submit_form_d(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-city-msg').hide();
	$('#contact-form-time-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-city').removeClass('form-validation-error');
	$('#contact-form-time').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_city = document.getElementById('contact-form-city').value;
	var contact_form_time = document.getElementById('contact-form-time').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-d.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_city' : contact_form_city,
				'lead_time_to_call' : contact_form_time,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-city').val('');
					$('#contact-form-time').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-city').removeClass('form-validation-error');
					$('#contact-form-time').removeClass('form-validation-error');

					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_city){
						$('#contact-form-city').addClass('form-validation-error');
						$('#contact-form-city-msg').html(result.lead_city);
						$('#contact-form-city-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);

	}

	return false;
}

function submit_form_e(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-representative').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_representative = document.getElementById('contact-form-representative').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_representative == ''){
		$('#contact-form-representative').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-e.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_representative' : contact_form_representative,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-representative').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
			
					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);

	}

	return false;
}

function submit_form_f(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-city-msg').hide();
	$('#contact-form-time-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-city').removeClass('form-validation-error');
	$('#contact-form-time').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_email = document.getElementById('contact-form-email').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_city = document.getElementById('contact-form-city').value;
	var contact_form_time = document.getElementById('contact-form-time').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var product_name = document.getElementById('product-name').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-f.php',

			{
				'lead_name' : contact_form_name,
				'lead_email' : contact_form_email,
				'lead_number' : contact_form_number,
				'lead_city' : contact_form_city,
				'lead_time_to_call' : contact_form_time,
				'lead_query' : contact_form_query,
				'lead_product' : product_name,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-email').val('');
					$('#contact-form-number').val('');
					$('#contact-form-city').val('');
					$('#contact-form-time').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-city').removeClass('form-validation-error');
					$('#contact-form-time').removeClass('form-validation-error');

					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.lead_email);
						$('#contact-form-email-msg').show();
					}

					if(result.lead_city){
						$('#contact-form-city').addClass('form-validation-error');
						$('#contact-form-city-msg').html(result.lead_city);
						$('#contact-form-city-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);
	}

	return false;
}

function submit_form_g(){

	$('#contact-form-name-msg').hide();
	$('#contact-form-cnic-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-folio-name-msg').hide();
	$('#contact-form-query-msg').hide();
	$('#contact-form-captcha').hide();

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-cnic').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-folio-name').removeClass('form-validation-error');
	$('#contact-form-query').removeClass('form-validation-error');

	var contact_form_name = document.getElementById('contact-form-name').value;
	var contact_form_cnic = document.getElementById('contact-form-cnic').value;
	var contact_form_number = document.getElementById('contact-form-number').value;
	var contact_form_folio_name = document.getElementById('contact-form-folio-name').value;
	var contact_form_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var contact_department = document.getElementById('contact-department').value;
	var contact_email = document.getElementById('contact-email').value;

	var errors = 0;

	if(contact_form_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_cnic == ''){
		$('#contact-form-cnic').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_folio_name == ''){
		$('#contact-form-folio-name').addClass('form-validation-error');
		errors++;
	}

	if(contact_form_query == ''){
		$('#contact-form-query').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-g.php',

			{
				'lead_name' : contact_form_name,
				'lead_cnic' : contact_form_cnic,
				'lead_number' : contact_form_number,
				'lead_folio_number' : contact_form_folio_name,
				'lead_query' : contact_form_query,
				'contact_department' : contact_department,
				'contact_email' : contact_email,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-cnic').val('');
					$('#contact-form-number').val('');
					$('#contact-form-folio-name').val('');
					$('#contact-form-query').val('');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-cnic').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-folio-name').removeClass('form-validation-error');
					$('#contact-form-query').removeClass('form-validation-error');

					if(result.lead_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.lead_name);
						$('#contact-form-name-msg').show();
					}

					if(result.lead_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.lead_number);
						$('#contact-form-number-msg').show();
					}

					if(result.lead_cnic){
						$('#contact-form-cnic').addClass('form-validation-error');
						$('#contact-form-cnic-msg').html(result.lead_cnic);
						$('#contact-form-cnic-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}
				}
			}
		);
	}

	return false;
}

function update_branches_forms(){

	var city = document.getElementById('contact-form-city').value;

	$('.iban-branch').hide();
	$('.iban-branch').prop('selectedIndex');

	$('#city_'+city).show();
	
}

function update_branches(){

	var city = document.getElementById('city').value;

	$('.iban-branch').hide();
	$('.iban-branch').prop('selectedIndex',0);

	$('#city_'+city).show();
	$('#account_number').val('');
	$('#branch_code').val('');
}

function update_iban_field(temp){

	$('#account_number').val('');

	var branch_code = document.getElementById(temp).value;

	$('#branch_code').val(branch_code);
}

function generate_iban(){

	var errors = 0;

	var combined_input = document.getElementById('combined_input').value;

	var branch_code = combined_input.substr(0, 4);
	var account_number = combined_input.substr(4, 10);

	
	$('#branch_code').removeClass('form-validation-error');
	$('#account_number').removeClass('form-validation-error');
	$('#generate-disclaimer-holder').removeClass('form-validation-error');

	if(combined_input == ''){
		$('#account_number').addClass('form-validation-error');
		errors++;
	}

	else if(combined_input.length != 14){
		$('#account_number').addClass('form-validation-error');
		errors++;
	}

	if(document.getElementById('generate-disclaimer').checked == false){
		$('#generate-disclaimer-holder').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		// Country Code = 'PK'
		// Swift Code = 'MEZN00'
		// Check digits = ?
		// Append '00'
		// Append branch code
		// Append account number0

		var iban_number = '';
		var check_digit = '';
		
		var hex_a = '10'; var hex_b = '11'; var hex_c = '12'; var hex_d = '13';
		var hex_e = '14'; var hex_f = '15'; var hex_g = '16'; var hex_h = '17';
		var hex_i = '18'; var hex_j = '19'; var hex_k = '20'; var hex_l = '21';
		var hex_m = '22'; var hex_n = '23'; var hex_o = '24'; var hex_p = '25';
		var hex_q = '26'; var hex_r = '27'; var hex_s = '28'; var hex_t = '29';
		var hex_u = '30'; var hex_v = '31'; var hex_w = '32'; var hex_x = '33';
		var hex_y = '34'; var hex_z = '35';

		iban_number = hex_m + hex_e + hex_z + hex_n + '00' + branch_code + account_number + hex_p + hex_k + '00';

		var iban_number_array = iban_number.match(new RegExp('.{1,'+9+'}', 'g'));

		check_digit = (parseInt(iban_number_array[0]) % 97) + iban_number_array[1];
		check_digit = (parseInt(check_digit) % 97) + iban_number_array[2];
		check_digit = (parseInt(check_digit) % 97) + iban_number_array[3];
		check_digit = 98 - (parseInt(check_digit) % 97);

		if(check_digit.toString().length == 1){
			check_digit = '0' + check_digit;
		}

		iban_number = 'PK' + check_digit + 'MEZN00' + branch_code + account_number;

		$('#iban-generated-number').html(iban_number);
		$('#iban-generated-branch-code').html(branch_code);

		$('#generate-form').hide();
		$('#generate-form-response').show();

		$('#city').prop('selectedIndex',0);
		$('.iban-branch').prop('selectedIndex',0);
		$('#generate-disclaimer').removeAttr('checked');

		$('#account_number').val('');
		$('#branch_code').val('');
	}
}

function validate_iban(){

	var errors = 0;

	var iban_number = document.getElementById('iban_number').value;

	$('#iban_number').removeClass('form-validation-error');
	$('#validate-disclaimer-holder').removeClass('form-validation-error');

	if(iban_number == ''){
		$('#iban_number').addClass('form-validation-error');
		errors++;
	}

	if(iban_number.length != 24){
		$('#iban_number').addClass('form-validation-error');
		errors++;
	}

	if(document.getElementById('validate-disclaimer').checked == false){
		$('#validate-disclaimer-holder').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		var temp = '';
		var numeric_version = '';

		for(var k = 4; k < 24; k++){

			if(isNaN(iban_number[k]) == true){

				temp = iban_number[k];
				temp = get_equivalent_integer(temp);

				numeric_version = numeric_version + temp;
			}
			else {
				numeric_version = numeric_version + iban_number[k];
			}
		}

		for(var k = 0; k <= 3; k++){

			if(isNaN(iban_number[k]) == true){

				temp = iban_number[k];
				temp = get_equivalent_integer(temp);

				numeric_version = numeric_version + temp;
			}
			else {
				numeric_version = numeric_version + iban_number[k];
			}
		}

		var numeric_version_array = numeric_version.match(new RegExp('.{1,'+9+'}', 'g'));

		remainder = (parseInt(numeric_version_array[0]) % 97) + numeric_version_array[1];
		remainder = (parseInt(remainder) % 97) + numeric_version_array[2];
		remainder = (parseInt(remainder) % 97) + numeric_version_array[3];
		remainder = parseInt(remainder) % 97;

		if(remainder == 1){
			$('#iban-validated-number').html(iban_number + " is <span class='valid font-bold'>valid</span>.");
		}

		else {
			$('#iban-validated-number').html(iban_number + " is <span class='invalid font-bold'>invalid</span>.");
		}

		$('#validate-form').hide();
		$('#validate-form-response').show();

		$('#validate-disclaimer').removeAttr('checked');

		$('#iban_number').val('');
	}
}

function get_equivalent_integer(temp){

	if(temp == 'a' || temp == 'A'){ return 10; }
	else if(temp == 'b' || temp == 'B'){ return 11; }
	else if(temp == 'c' || temp == 'C'){ return 12; }
	else if(temp == 'd' || temp == 'D'){ return 13; }
	else if(temp == 'e' || temp == 'E'){ return 14; }
	else if(temp == 'f' || temp == 'F'){ return 15; }
	else if(temp == 'g' || temp == 'G'){ return 16; }
	else if(temp == 'h' || temp == 'H'){ return 17; }
	else if(temp == 'i' || temp == 'I'){ return 18; }
	else if(temp == 'j' || temp == 'J'){ return 19; }
	else if(temp == 'k' || temp == 'K'){ return 20; }
	else if(temp == 'l' || temp == 'L'){ return 21; }
	else if(temp == 'm' || temp == 'M'){ return 22; }
	else if(temp == 'n' || temp == 'N'){ return 23; }
	else if(temp == 'o' || temp == 'O'){ return 24; }
	else if(temp == 'p' || temp == 'P'){ return 25; }
	else if(temp == 'q' || temp == 'Q'){ return 26; }
	else if(temp == 'r' || temp == 'R'){ return 27; }
	else if(temp == 's' || temp == 'S'){ return 28; }
	else if(temp == 't' || temp == 'T'){ return 29; }
	else if(temp == 'u' || temp == 'U'){ return 30; }
	else if(temp == 'v' || temp == 'V'){ return 31; }
	else if(temp == 'w' || temp == 'W'){ return 32; }
	else if(temp == 'x' || temp == 'X'){ return 33; }
	else if(temp == 'y' || temp == 'Y'){ return 34; }
	else if(temp == 'z' || temp == 'Z'){ return 35; }
	else { return 0; }
}

function update_complaint_fields(){

	var complaint_type = document.getElementById('contact-complaint-type').value;

	if(complaint_type == 'ATM cash retraction issue'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Amount *</div>\
				<input type='text' id='contact-form-amount' class='form-field' name='contact-form-amount' value='' placeholder='Enter amount here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Transaction date *</div>\
				<input type='text' id='contact-form-transaction-date' class='form-field' name='contact-form-transaction-date' value='' placeholder='Enter date here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Bank name *</div>\
				<input type='text' id='contact-form-bank-name' class='form-field' name='contact-form-bank-name' value='' placeholder='Enter bank name here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'ATM link down'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>ATM name/Location *</div>\
				<input type='text' id='contact-form-atm-name' class='form-field' name='contact-form-atm-name' value='' placeholder='Enter ATM info here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'Online branch banking unavailable'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Branch name/Location *</div>\
				<input type='text' id='contact-form-branch-name' class='form-field' name='contact-form-branch-name' value='' placeholder='Enter branch info here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'Utility bill payment dispute' || complaint_type == 'Mobile bill payment dispute'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Mobile/Consumer No. *</div>\
				<input type='text' id='contact-form-consumer-number' class='form-field' name='contact-form-consumer-number' value='' placeholder='Enter number here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Amount *</div>\
				<input type='text' id='contact-form-amount' class='form-field' name='contact-form-amount' value='' placeholder='Enter amount here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Transaction date *</div>\
				<input type='text' id='contact-form-transaction-date' class='form-field' name='contact-form-transaction-date' value='' placeholder='Enter date here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'SMS issues' || complaint_type == 'Charges deduction issues'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Amount *</div>\
				<input type='text' id='contact-form-amount' class='form-field' name='contact-form-amount' value='' placeholder='Enter amount here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Transaction date *</div>\
				<input type='text' id='contact-form-transaction-date' class='form-field' name='contact-form-transaction-date' value='' placeholder='Enter date here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'Durable goods complaints'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Branch name/Location *</div>\
				<input type='text' id='contact-form-branch-name' class='form-field' name='contact-form-branch-name' value='' placeholder='Enter branch info here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Date of application *</div>\
				<input type='text' id='contact-form-application-date' class='form-field' name='contact-form-application-date' value='' placeholder='Enter application date here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Product name *</div>\
				<input type='text' id='contact-form-product-name' class='form-field' name='contact-form-product-name' value='' placeholder='Enter product info here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'Car Ijarah issues'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Branch name/Location *</div>\
				<input type='text' id='contact-form-branch-name' class='form-field' name='contact-form-branch-name' value='' placeholder='Enter branch info here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Date of application *</div>\
				<input type='text' id='contact-form-application-date' class='form-field' name='contact-form-application-date' value='' placeholder='Enter application date here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Vehicle make *</div>\
				<input type='text' id='contact-form-vehicle-make' class='form-field' name='contact-form-vehicle-make' value='' placeholder='Enter vehicle make here'>\
			</div>\
		");	
	}

	else if(complaint_type == 'Commercial Vehicles Issues'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Branch name/Location *</div>\
				<input type='text' id='contact-form-branch-name' class='form-field' name='contact-form-branch-name' value='' placeholder='Enter branch info here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Date of application *</div>\
				<input type='text' id='contact-form-application-date' class='form-field' name='contact-form-application-date' value='' placeholder='Enter application date here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Vehicle make *</div>\
				<input type='text' id='contact-form-vehicle-make' class='form-field' name='contact-form-vehicle-make' value='' placeholder='Enter vehicle make here'>\
			</div>\
		");	
	}
	
	else if(complaint_type == 'Easy home complaint'){

		$('#complaint-fields').html("\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Branch name/Location *</div>\
				<input type='text' id='contact-form-branch-name' class='form-field' name='contact-form-branch-name' value='' placeholder='Enter branch info here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Date of application *</div>\
				<input type='text' id='contact-form-application-date' class='form-field' name='contact-form-application-date' value='' placeholder='Enter application date here'>\
			</div>\
			<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 form-entry'>\
				<div class='form-field-text font-bold'>Amount of financing *</div>\
				<input type='text' id='contact-form-financing-amount' class='form-field' name='contact-form-financing-amount' value='' placeholder='Enter financing amount here'>\
			</div>\
		");	
	}

	else {

		$('#complaint-fields').html('');
	}
}

function submit_complaint_form(){

	$('#contact-form-name').removeClass('form-validation-error');
	$('#contact-form-number').removeClass('form-validation-error');
	$('#contact-form-email').removeClass('form-validation-error');
	$('#contact-form-cnic').removeClass('form-validation-error');
	$('#contact-complaint-type').removeClass('form-validation-error');
	$('#contact-form-captcha').hide();

	$('#contact-form-name-msg').hide();
	$('#contact-form-number-msg').hide();
	$('#contact-form-cnic-msg').hide();
	$('#contact-form-email-msg').hide();
	$('#contact-complaint-type-msg').hide();

	var errors = 0;

	var user_name = document.getElementById('contact-form-name').value;
	var user_number = document.getElementById('contact-form-number').value;
	var user_email = document.getElementById('contact-form-email').value;
	var user_cnic = document.getElementById('contact-form-cnic').value;
	var user_complaint_type = document.getElementById('contact-complaint-type').value;
	var user_query = document.getElementById('contact-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	var user_complaint_info_1 = '';
	var user_complaint_info_2 = '';
	var user_complaint_info_3 = '';

	if(user_name == ''){
		$('#contact-form-name').addClass('form-validation-error');
		errors++;
	}

	if(user_number == ''){
		$('#contact-form-number').addClass('form-validation-error');
		errors++;
	}

	if(user_email == ''){
		$('#contact-form-email').addClass('form-validation-error');
		errors++;
	}

	if(user_cnic == ''){
		$('#contact-form-cnic').addClass('form-validation-error');
		errors++;
	}

	if(user_complaint_type == ''){
		$('#contact-complaint-type').addClass('form-validation-error');
		errors++;
	}

	else if(user_complaint_type == 'ATM cash retraction issue'){

		$('#contact-form-amount').removeClass('form-validation-error');
		$('#contact-form-transaction-date').removeClass('form-validation-error');
		$('#contact-form-bank-name').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-amount').value;
		user_complaint_info_2 = document.getElementById('contact-form-transaction-date').value;
		user_complaint_info_3 = document.getElementById('contact-form-bank-name').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-amount').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-transaction-date').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-bank-name').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'ATM link down'){

		$('#contact-form-atm-name').removeClass('form-validation-error');
		
		user_complaint_info_1 = document.getElementById('contact-form-atm-name').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-atm-name').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'Online branch banking unavailable'){

		$('#contact-form-branch-name').removeClass('form-validation-error');
	
		user_complaint_info_1 = document.getElementById('contact-form-branch-name').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-branch-name').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'Utility bill payment dispute' || user_complaint_type == 'Mobile bill payment dispute'){

		$('#contact-form-consumer-number').removeClass('form-validation-error');
		$('#contact-form-amount').removeClass('form-validation-error');
		$('#contact-form-transaction-date').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-consumer-number').value;
		user_complaint_info_2 = document.getElementById('contact-form-amount').value;
		user_complaint_info_3 = document.getElementById('contact-form-transaction-date').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-consumer-number').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-amount').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-transaction-date').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'SMS issues' || user_complaint_type == 'Charges deduction issues'){

		$('#contact-form-amount').removeClass('form-validation-error');
		$('#contact-form-transaction-date').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-amount').value;
		user_complaint_info_2 = document.getElementById('contact-form-transaction-date').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-amount').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-transaction-date').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'Durable goods complaints'){

		$('#contact-form-branch-name').removeClass('form-validation-error');
		$('#contact-form-application-date').removeClass('form-validation-error');
		$('#contact-form-product-name').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-branch-name').value;
		user_complaint_info_2 = document.getElementById('contact-form-application-date').value;
		user_complaint_info_3 = document.getElementById('contact-form-product-name').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-branch-name').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-application-date').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-product-name').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'Car Ijarah issues'){

		$('#contact-form-branch-name').removeClass('form-validation-error');
		$('#contact-form-application-date').removeClass('form-validation-error');
		$('#contact-form-vehicle-make').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-branch-name').value;
		user_complaint_info_2 = document.getElementById('contact-form-application-date').value;
		user_complaint_info_3 = document.getElementById('contact-form-vehicle-make').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-branch-name').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-application-date').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-vehicle-make').addClass('form-validation-error');
			errors++;
		}
	}


	else if(user_complaint_type == 'Commercial Vehicles Issues'){

		$('#contact-form-branch-name').removeClass('form-validation-error');
		$('#contact-form-application-date').removeClass('form-validation-error');
		$('#contact-form-vehicle-make').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-branch-name').value;
		user_complaint_info_2 = document.getElementById('contact-form-application-date').value;
		user_complaint_info_3 = document.getElementById('contact-form-vehicle-make').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-branch-name').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-application-date').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-vehicle-make').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type == 'Easy home complaint'){

		$('#contact-form-branch-name').removeClass('form-validation-error');
		$('#contact-form-application-date').removeClass('form-validation-error');
		$('#contact-form-financing-amount').removeClass('form-validation-error');

		user_complaint_info_1 = document.getElementById('contact-form-branch-name').value;
		user_complaint_info_2 = document.getElementById('contact-form-application-date').value;
		user_complaint_info_3 = document.getElementById('contact-form-financing-amount').value;

		if(user_complaint_info_1 == ''){
			$('#contact-form-branch-name').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_2 == ''){
			$('#contact-form-application-date').addClass('form-validation-error');
			errors++;
		}

		if(user_complaint_info_3 == ''){
			$('#contact-form-financing-amount').addClass('form-validation-error');
			errors++;
		}
	}

	else if(user_complaint_type != 'Incomplete information updated in system'
		&& user_complaint_type != 'Visa/Master debit card issues'
		&& user_complaint_type != 'Branch banking issues'
		&& user_complaint_type != 'Internet banking issue'
		&& user_complaint_type != 'Meezan investment fund issue'){

		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-complaint.php',

			{
				'user_name' : user_name,
				'user_number' : user_number,
				'user_email' : user_email,
				'user_cnic' : user_cnic,
				'user_complaint_type' : user_complaint_type,
				'user_complaint_info_1' : user_complaint_info_1,
				'user_complaint_info_2' : user_complaint_info_2,
				'user_complaint_info_3' : user_complaint_info_3,
				'user_query' : user_query,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#form').hide();
					$('#form-response').show();

					$('#contact-form-name').val('');
					$('#contact-form-number').val('');
					$('#contact-form-email').val('');
					$('#contact-form-cnic').val('');
					$('#contact-form-query').val('');
					$('.form-field').val('');

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-email').removeClass('form-validation-error');
					$('#contact-form-cnic').removeClass('form-validation-error');
					$('#contact-form-query').removeClass('form-validation-error');
					$('.form-field').removeClass('form-validation-error');
				}

				if(result.success == false){

					$('#contact-form-name').removeClass('form-validation-error');
					$('#contact-form-number').removeClass('form-validation-error');
					$('#contact-form-email').removeClass('form-validation-error');
					$('#contact-form-cnic').removeClass('form-validation-error');
					$('#contact-form-query').removeClass('form-validation-error');
					$('.form-field').removeClass('form-validation-error');

					if(result.user_name){
						$('#contact-form-name').addClass('form-validation-error');
						$('#contact-form-name-msg').html(result.user_name);
						$('#contact-form-name-msg').show();
					}

					if(result.user_number){
						$('#contact-form-number').addClass('form-validation-error');
						$('#contact-form-number-msg').html(result.user_number);
						$('#contact-form-number-msg').show();
					}

					if(result.user_email){
						$('#contact-form-email').addClass('form-validation-error');
						$('#contact-form-email-msg').html(result.user_email);
						$('#contact-form-email-msg').show();
					}

					if(result.user_cnic){
						$('#contact-form-cnic').addClass('form-validation-error');
						$('#contact-form-cnic-msg').html(result.user_cnic);
						$('#contact-form-cnic-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}

					console.log(result.main_message);
				}
			}
		);

	}

	return false;
}

function submit_feedback_form(){

	$('#feedback-form-name').removeClass('form-validation-error');
	$('#feedback-form-number').removeClass('form-validation-error');
	$('#feedback-form-email').removeClass('form-validation-error');
	$('#feedback-form-cnic').removeClass('form-validation-error');
	$('#feedback-form-feedback').removeClass('form-validation-error');
	$('#contact-form-captcha').hide();

	var errors = 0;

	var user_name = document.getElementById('feedback-form-name').value;
	var user_number = document.getElementById('feedback-form-number').value;
	var user_email = document.getElementById('feedback-form-email').value;
	var user_cnic = document.getElementById('feedback-form-cnic').value;
	var user_feedback = document.getElementById('feedback-form-feedback').value;
	var user_query = document.getElementById('feedback-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	if(user_name == ''){
		$('#feedback-form-name').addClass('form-validation-error');
		errors++;
	}

	if(user_number == ''){
		$('#feedback-form-number').addClass('form-validation-error');
		errors++;
	}

	if(user_email == ''){
		$('#feedback-form-email').addClass('form-validation-error');
		errors++;
	}

	if(user_cnic == ''){
		$('#feedback-form-cnic').addClass('form-validation-error');
		errors++;
	}

	if(user_feedback == ''){
		$('#feedback-form-feedback').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-feedback.php',

			{
				'user_name' : user_name,
				'user_number' : user_number,
				'user_email' : user_email,
				'user_cnic' : user_cnic,
				'user_feedback' : user_feedback,
				'user_query' : user_query,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#feedback-form').hide();
					$('#feedback-form-response').show();

					$('#feedback-form-name').val('');
					$('#feedback-form-number').val('');
					$('#feedback-form-email').val('');
					$('#feedback-form-cnic').val('');
					$('#feedback-form-query').val('');
					$('.form-field').val('');
				}

				if(result.success == false){

					$('#feedback-form-name').removeClass('form-validation-error');
					$('#feedback-form-number').removeClass('form-validation-error');
					$('#feedback-form-email').removeClass('form-validation-error');
					$('#feedback-form-cnic').removeClass('form-validation-error');
					$('#feedback-form-query').removeClass('form-validation-error');
					$('.form-field').removeClass('form-validation-error');

					if(result.user_name){
						$('#feedback-form-name').addClass('form-validation-error');
						$('#feedback-form-name-msg').html(result.user_name);
						$('#feedback-form-name-msg').show();
					}

					if(result.user_number){
						$('#feedback-form-number').addClass('form-validation-error');
						$('#feedback-form-number-msg').html(result.user_number);
						$('#feedback-form-number-msg').show();
					}

					if(result.user_email){
						$('#feedback-form-email').addClass('form-validation-error');
						$('#feedback-form-email-msg').html(result.user_email);
						$('#feedback-form-email-msg').show();
					}

					if(result.user_cnic){
						$('#feedback-form-cnic').addClass('form-validation-error');
						$('#feedback-form-cnic-msg').html(result.user_cnic);
						$('#feedback-form-cnic-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}

					console.log(result.main_message);
				}
			}
		);

	}

	return false;
}

function submit_whistle_form(){

	$('#whistle-form-name').removeClass('form-validation-error');
	$('#whistle-form-number').removeClass('form-validation-error');
	$('#whistle-form-frequency').removeClass('form-validation-error');
	$('#whistle-form-report-type').removeClass('form-validation-error');
	$('#contact-form-captcha').hide();

	var errors = 0;
	var checked = false;

	var user_type = document.getElementById('whistle-form-user-type').value;
	var user_name = document.getElementById('whistle-form-name').value;
	var user_number = document.getElementById('whistle-form-number').value;
	var user_email = document.getElementById('whistle-form-email').value;
	var user_reporting_frequency = document.getElementById('whistle-form-frequency').value;
	var user_reporting_history = document.getElementById('whistle-form-history').value;
	var report_type = '';
	var user_query = document.getElementById('whistle-form-query').value;
	var captcha = document.getElementsByName('g-recaptcha-response')[0].value;

	for(i = 0; i < document.whistle_form.elements['report_type[]'].length; i++){
        if(document.whistle_form.elements['report_type[]'][i].checked){
        	report_type = report_type + ' ' + document.whistle_form.elements['report_type[]'][i].value;
        	checked = true;
        }
    }

	if(user_name == ''){
		$('#whistle-form-name').addClass('form-validation-error');
		errors++;
	}

	if(user_number == ''){
		$('#whistle-form-number').addClass('form-validation-error');
		errors++;
	}

	if(user_reporting_frequency == ''){
		$('#whistle-form-frequency').addClass('form-validation-error');
		errors++;
	}

	if(checked == false){
		$('#whistle-form-report-type').addClass('form-validation-error');
		errors++;
	}

	if(errors == 0){

		$('#form-submit-btn').prop('disabled',true);

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-form-whistle.php',

			{
				'user_type' : user_type,
				'user_name' : user_name,
				'user_number' : user_number,
				'user_email' : user_email,
				'user_reporting_frequency' : user_reporting_frequency,
				'user_reporting_history' : user_reporting_history,
				'user_report_type' : report_type,
				'user_query' : user_query,
				'g-recaptcha-response' : captcha
			},

			function (data){

				var result = JSON.parse(data);

				$('#form-submit-btn').prop('disabled',false);

				if(result.success == true){

					$('#whistle-form').hide();
					$('#whistle-form-response').show();

					$('#whistle-form-name').val('');
					$('#whistle-form-number').val('');
					$('#whistle-form-query').val('');
					$('.form-field').val('');

					for(i = 0; i < document.whistle_form.elements['report_type[]'].length; i++){
				        document.whistle_form.elements['report_type[]'][i].checked = false;
				    }
				}

				if(result.success == false){

					$('#whistle-form-name').removeClass('form-validation-error');
					$('#whistle-form-number').removeClass('form-validation-error');
					$('#whistle-form-email').removeClass('form-validation-error');
					$('#whistle-form-query').removeClass('form-validation-error');
					$('.form-field').removeClass('form-validation-error');

					if(result.user_name){
						$('#whistle-form-name').addClass('form-validation-error');
						$('#whistle-form-name-msg').html(result.user_name);
						$('#whistle-form-name-msg').show();
					}

					if(result.user_number){
						$('#whistle-form-number').addClass('form-validation-error');
						$('#whistle-form-number-msg').html(result.user_number);
						$('#whistle-form-number-msg').show();
					}

					if(result.user_email){
						$('#whistle-form-email').addClass('form-validation-error');
						$('#whistle-form-email-msg').html(result.user_email);
						$('#whistle-form-email-msg').show();
					}

					if(result.lead_captcha){
						$('#contact-form-captcha').html(result.lead_captcha);
						$('#contact-form-captcha').show();
					}

					console.log(result.main_message);
				}
			}
		);
	}

	return false;
}

function toggle_ijarah_calc(k){

	if(document.getElementById('calculator_type-'+k).value == 'new_calc'){
		$('#old_calc_div-'+k).hide();
		$('#new_calc_div-'+k).show();
	}

	else if(document.getElementById('calculator_type-'+k).value == 'old_calc'){
		$('#new_calc_div-'+k).hide();
		$('#old_calc_div-'+k).show();
	}
}

function toggle_delivery_calc(k){

	var temp = document.getElementById('car_delivery-'+k).value;

	if(temp == 'booking'){
		$('#booking_delivery_holder-'+k).show();
	}

	else {
		$('#booking_delivery_holder-'+k).hide();
	}
}

function update_cars_dropdown(k){

	var car_vendor_id = document.getElementById('car_vendor-'+k).value;

	$('.car-select-'+k).hide();
	$('.car-select-'+k).prop('selectedIndex',0);

	$('#vendor_'+car_vendor_id+'-'+k).show();

	$('#security_deposit-'+k).html("<option value=''>Deposit</option>");
	$('#residual_value_holder-'+k).hide();
	$('#residual_value-'+k).prop('disabled',true);

	$('#car_id-'+k).val('');
}

function update_car_data(vendor_id,a){

	var car_id = document.getElementById(vendor_id).value;

	var car_min_deposit = parseInt(cars[car_id].car_min_deposit);
	var car_max_deposit = parseInt(cars[car_id].car_max_deposit);
	var car_residual_value = cars[car_id].car_residual_value;

	if(car_residual_value == 1){
		$('#residual_value_holder-'+a).show();
		$('#residual_value-'+a).prop('disabled',false);
	}

	for(var k = car_min_deposit; k <= car_max_deposit; k += 5){

		$('#security_deposit-'+a).append("\
			<option value='" + k + "'>" + k + "%</option>\
		");
	}

	$('#car_id-'+a).val(car_id);
}

function new_car_calculation(k){

	$('#car-response-'+k).hide();
	$('#car-form-'+k).show();
}

function car_monthly_payment(k){

	success = false;

	$('#car_vendor-'+k).removeClass('form-validation-error');
	$('.car-select-'+k).removeClass('form-validation-error');
	$('#tenure-'+k).removeClass('form-validation-error');
	$('#security_deposit-'+k).removeClass('form-validation-error');
	$('#car_delivery-'+k).removeClass('form-validation-error');
	$('#car_vendor_old-'+k).removeClass('form-validation-error');
	$('#car_model_old-'+k).removeClass('form-validation-error');
	$('#car_price_old-'+k).removeClass('form-validation-error');
	$('#security_deposit_old-'+k).removeClass('form-validation-error');
	$('#tenure_old-'+k).removeClass('form-validation-error');
	$('#residual_value-'+k).removeClass('form-validation-error');

	var mode = document.getElementById('mode').value;
	var calculator_type = document.getElementById('calculator_type-'+k).value;

	if(calculator_type == 'new_calc'){

		var errors = 0;

		var car_id = document.getElementById('car_id-'+k).value;
		var car_vendor_check = document.getElementById('car_vendor-'+k).value;
		var car_tenure_check = document.getElementById('tenure-'+k).value;
		var car_deposit_check = document.getElementById('security_deposit-'+k).value;
		var car_booking_check = document.getElementById('car_delivery-'+k).value;

		var residual_value = document.getElementById('residual_value-'+k).value; var residual_value_per;

		if(car_vendor_check == ''){
			$('#car_vendor-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_id == ''){
			$('.car-select-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_tenure_check == ''){
			$('#tenure-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_deposit_check == ''){
			$('#security_deposit-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_booking_check == ''){
			$('#car_delivery-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_deposit_check != '' && residual_value != ''){

			var temp = parseInt(car_deposit_check) + parseInt(residual_value);

			if(temp >= 100){

				alert('Sum of security deposit and residual value cannot exceed 100%.');
				errors++;
			}
		}

		if(errors == 0){

			var car_name = cars[car_id].car_name;
			var car_description = cars[car_id].car_description;

			var car_insurance = parseFloat(cars[car_id].car_insurance);
			var car_dep_factor = parseFloat(cars[car_id].car_dep_factor);
			var car_irr_year_1 = parseFloat(cars[car_id].car_irr_year_1);
			var car_irr_year_2 = parseFloat(cars[car_id].car_irr_year_2);
			var car_irr_year_3 = parseFloat(cars[car_id].car_irr_year_3);
			var car_irr_year_4 = parseFloat(cars[car_id].car_irr_year_4);
			var car_irr_year_5 = parseFloat(cars[car_id].car_irr_year_5);
			var car_irr_year_6 = parseFloat(cars[car_id].car_irr_year_6);
			var car_irr_year_7 = parseFloat(cars[car_id].car_irr_year_7);

			if(car_insurance == 0){ car_insurance = parseFloat(car_default_insurance); }
			if(car_dep_factor == 0){ car_dep_factor = parseFloat(car_default_dep_factor); }
			if(car_irr_year_1 == 0){ car_irr_year_1 = parseFloat(car_default_irr_year_1); }
			if(car_irr_year_2 == 0){ car_irr_year_2 = parseFloat(car_default_irr_year_2); }
			if(car_irr_year_3 == 0){ car_irr_year_3 = parseFloat(car_default_irr_year_3); }
			if(car_irr_year_4 == 0){ car_irr_year_4 = parseFloat(car_default_irr_year_4); }
			if(car_irr_year_5 == 0){ car_irr_year_5 = parseFloat(car_default_irr_year_5); }
			if(car_irr_year_6 == 0){ car_irr_year_6 = parseFloat(car_default_irr_year_6); }
			if(car_irr_year_7 == 0){ car_irr_year_7 = parseFloat(car_default_irr_year_7); }

			var processing_fee = parseInt(cars[car_id].car_processing_fee);
			var vehicle_cost = parseFloat(cars[car_id].car_cost_price);
			var security_deposit = parseFloat(document.getElementById('security_deposit-'+k).value) / 100;
			var lease_period = parseInt(document.getElementById('tenure-'+k).value);
			var booking_period = parseFloat(document.getElementById('booking_period-'+k).value);
			var tenure = document.getElementById('tenure-'+k).value;
		
			if(residual_value == ''){ residual_value = 0; residual_value_per = '0%'; }
			else { residual_value_per = residual_value + '%'; residual_value = parseFloat(residual_value) / 100; }

			var nominal_rate = 0;

			if(tenure == 1){ var nominal_rate_1 = car_irr_year_1 / 100; nominal_rate = nominal_rate_1; }
			else if(tenure == 2){ var nominal_rate_2 = (car_irr_year_2 / 100); nominal_rate = nominal_rate_2; }
			else if(tenure == 3){ var nominal_rate_3 = (car_irr_year_3 / 100); nominal_rate = nominal_rate_3; }
			else if(tenure == 4){ var nominal_rate_4 = (car_irr_year_4 / 100); nominal_rate = nominal_rate_4; }
			else if(tenure == 5){ var nominal_rate_5 = (car_irr_year_5 / 100); nominal_rate = nominal_rate_5; }
			else if(tenure == 6){ var nominal_rate_6 = (car_irr_year_6 / 100); nominal_rate = nominal_rate_6; }
			else if(tenure == 7){ var nominal_rate_7 = (car_irr_year_7 / 100); nominal_rate = nominal_rate_7; }

			var insurance_premium = car_insurance / 100;
			var depreciation = car_dep_factor / 100;

			var insurance_premium_1 = vehicle_cost * insurance_premium;
			var insurance_pv_1 = insurance_premium_1 / Math.pow((1 + (nominal_rate / 12)),0);
			var insurance_cumulative_1 = insurance_pv_1; 

			var insurance_premium_2 = insurance_premium_1 * (1 - depreciation);
			var insurance_pv_2 = insurance_premium_2 / Math.pow((1 + (nominal_rate / 12)),12);
			var insurance_cumulative_2 = insurance_cumulative_1 + insurance_pv_2; 

			var insurance_premium_3 = insurance_premium_2 * (1 - depreciation);
			var insurance_pv_3 = insurance_premium_3 / Math.pow((1 + (nominal_rate / 12)),24);
			var insurance_cumulative_3 = insurance_cumulative_2 + insurance_pv_3; 

			var insurance_premium_4 = insurance_premium_3 * (1 - depreciation);
			var insurance_pv_4 = insurance_premium_4 / Math.pow((1 + (nominal_rate / 12)),36);
			var insurance_cumulative_4 = insurance_cumulative_3 + insurance_pv_4; 

			var insurance_premium_5 = insurance_premium_4 * (1 - depreciation);
			var insurance_pv_5 = insurance_premium_5 / Math.pow((1 + (nominal_rate / 12)),48);
			var insurance_cumulative_5 = insurance_cumulative_4 + insurance_pv_5; 

			var insurance_premium_6 = insurance_premium_5 * (1 - depreciation);
			var insurance_pv_6 = insurance_premium_6 / Math.pow((1 + (nominal_rate / 12)),60);
			var insurance_cumulative_6 = insurance_cumulative_5 + insurance_pv_6; 

			var insurance_premium_7 = insurance_premium_6 * (1 - depreciation);
			var insurance_pv_7 = insurance_premium_7 / Math.pow((1 + (nominal_rate / 12)),72);
			var insurance_cumulative_7 = insurance_cumulative_6 + insurance_pv_7; 

			var insurance_cumulative = 0;

			if(tenure == 1){ insurance_cumulative = insurance_cumulative_1; }
			else if(tenure == 2){ insurance_cumulative = insurance_cumulative_2; }
			else if(tenure == 3){ insurance_cumulative = insurance_cumulative_3; }
			else if(tenure == 4){ insurance_cumulative = insurance_cumulative_4; }
			else if(tenure == 5){ insurance_cumulative = insurance_cumulative_5; }
			else if(tenure == 6){ insurance_cumulative = insurance_cumulative_6; }
			else if(tenure == 7){ insurance_cumulative = insurance_cumulative_7; }

			if(vehicle_cost <= 4000000 && vehicle_cost > 1800000 ) { var tracker_fee = 3300;}
			else if (vehicle_cost > 4000000) {var tracker_fee = 5800;}
			else { var tracker_fee = 2100; }

			var financing_amount = (vehicle_cost * (1 - security_deposit)) * Math.pow((1 + (nominal_rate / 12)),booking_period);
			var monthly_payment1 = ((vehicle_cost*(1-security_deposit))*Math.pow((1+nominal_rate/12),booking_period)-(vehicle_cost*residual_value)/Math.pow((1+nominal_rate/12),(lease_period*12)))/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))))+insurance_cumulative/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))));

			var monthly_payment = monthly_payment1 + tracker_fee;

			security_deposit_to_show = vehicle_cost * security_deposit;
			security_deposit_to_show = parseFloat(security_deposit_to_show);

			var total_upfront = security_deposit_to_show + processing_fee;
			total_upfront = Math.round(total_upfront);
			security_deposit_to_show = Math.round(security_deposit_to_show);

			var number_of_months = tenure * 12;

			financing_amount = Math.round(financing_amount);
			monthly_payment = Math.round(monthly_payment);

			security_deposit_per = security_deposit * 100;
			security_deposit_per = Math.round(security_deposit_per);

			processing_fee = Number(processing_fee).toLocaleString('en');

			success = true;
		}
	}

	if(calculator_type == 'old_calc'){

		var errors = 0;

		var car_vendor_check = document.getElementById('car_vendor_old-'+k).value;
		var car_model_old = document.getElementById('car_model_old-'+k).value;
		var car_price_old = document.getElementById('car_price_old-'+k).value;
		var car_deposit_check = document.getElementById('security_deposit_old-'+k).value;
		var car_tenure_check = document.getElementById('tenure_old-'+k).value;

		if(car_vendor_check == ''){
			$('#car_vendor_old-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_model_old == ''){
			$('#car_model_old-'+k).addClass('form-validation-error');
			errors++;
		}	

		if(car_price_old == ''){
			$('#car_price_old-'+k).addClass('form-validation-error');
			errors++;
		}	

		if(car_deposit_check == ''){
			$('#security_deposit_old-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_tenure_check == ''){
			$('#tenure_old-'+k).addClass('form-validation-error');
			errors++;
		}

		if(errors == 0){

			var car_insurance = parseFloat(car_default_insurance);
			var car_dep_factor = parseFloat(car_default_dep_factor);
			var car_irr_year_1 = parseFloat(car_default_irr_year_1);
			var car_irr_year_2 = parseFloat(car_default_irr_year_2);
			var car_irr_year_3 = parseFloat(car_default_irr_year_3);
			var car_irr_year_4 = parseFloat(car_default_irr_year_4);
			var car_irr_year_5 = parseFloat(car_default_irr_year_5);
			var car_irr_year_6 = parseFloat(car_default_irr_year_6);
			var car_irr_year_7 = parseFloat(car_default_irr_year_7);

			var vehicle_cost = parseFloat(car_price_old);
			var security_deposit = parseFloat(car_deposit_check) / 100;
			var lease_period = parseFloat(car_tenure_check);
			var booking_period = parseFloat(0);
			var tenure = parseFloat(car_tenure_check);

			var residual_value = parseFloat(0);
		
			var nominal_rate = 0;

			if(tenure == 1){ var nominal_rate_1 = car_irr_year_1 / 100; nominal_rate = nominal_rate_1; }
			else if(tenure == 2){ var nominal_rate_2 = (car_irr_year_2 / 100); nominal_rate = nominal_rate_2; }
			else if(tenure == 3){ var nominal_rate_3 = (car_irr_year_3 / 100); nominal_rate = nominal_rate_3; }
			else if(tenure == 4){ var nominal_rate_4 = (car_irr_year_4 / 100); nominal_rate = nominal_rate_4; }
			else if(tenure == 5){ var nominal_rate_5 = (car_irr_year_5 / 100); nominal_rate = nominal_rate_5; }
			else if(tenure == 6){ var nominal_rate_6 = (car_irr_year_6 / 100); nominal_rate = nominal_rate_6; }
			else if(tenure == 7){ var nominal_rate_7 = (car_irr_year_7 / 100); nominal_rate = nominal_rate_7; }

			var insurance_premium = car_insurance / 100;
			var depreciation = car_dep_factor / 100;

			var insurance_premium_1 = vehicle_cost * insurance_premium;
			var insurance_pv_1 = insurance_premium_1 / Math.pow((1 + (nominal_rate / 12)),0);
			var insurance_cumulative_1 = insurance_pv_1; 

			var insurance_premium_2 = insurance_premium_1 * (1 - depreciation);
			var insurance_pv_2 = insurance_premium_2 / Math.pow((1 + (nominal_rate / 12)),12);
			var insurance_cumulative_2 = insurance_cumulative_1 + insurance_pv_2; 

			var insurance_premium_3 = insurance_premium_2 * (1 - depreciation);
			var insurance_pv_3 = insurance_premium_3 / Math.pow((1 + (nominal_rate / 12)),24);
			var insurance_cumulative_3 = insurance_cumulative_2 + insurance_pv_3; 

			var insurance_premium_4 = insurance_premium_3 * (1 - depreciation);
			var insurance_pv_4 = insurance_premium_4 / Math.pow((1 + (nominal_rate / 12)),36);
			var insurance_cumulative_4 = insurance_cumulative_3 + insurance_pv_4; 

			var insurance_premium_5 = insurance_premium_4 * (1 - depreciation);
			var insurance_pv_5 = insurance_premium_5 / Math.pow((1 + (nominal_rate / 12)),48);
			var insurance_cumulative_5 = insurance_cumulative_4 + insurance_pv_5; 

			var insurance_premium_6 = insurance_premium_5 * (1 - depreciation);
			var insurance_pv_6 = insurance_premium_6 / Math.pow((1 + (nominal_rate / 12)),60);
			var insurance_cumulative_6 = insurance_cumulative_5 + insurance_pv_6; 

			var insurance_premium_7 = insurance_premium_6 * (1 - depreciation);
			var insurance_pv_7 = insurance_premium_7 / Math.pow((1 + (nominal_rate / 12)),72);
			var insurance_cumulative_7 = insurance_cumulative_6 + insurance_pv_7; 

			var insurance_cumulative = 0;

			if(tenure == 1){ insurance_cumulative = insurance_cumulative_1; }
			else if(tenure == 2){ insurance_cumulative = insurance_cumulative_2; }
			else if(tenure == 3){ insurance_cumulative = insurance_cumulative_3; }
			else if(tenure == 4){ insurance_cumulative = insurance_cumulative_4; }
			else if(tenure == 5){ insurance_cumulative = insurance_cumulative_5; }
			else if(tenure == 6){ insurance_cumulative = insurance_cumulative_6; }
			else if(tenure == 7){ insurance_cumulative = insurance_cumulative_7; }

			if(vehicle_cost <= 4000000 && vehicle_cost > 1800000 ) { var tracker_fee = 3300;}
			else if (vehicle_cost > 4000000) {var tracker_fee = 5800;}
			else { var tracker_fee = 2100; }

			var financing_amount = (vehicle_cost * (1 - security_deposit)) * Math.pow((1 + (nominal_rate / 12)),booking_period);
			var monthly_payment1 = ((vehicle_cost*(1-security_deposit))*Math.pow((1+nominal_rate/12),booking_period)-(vehicle_cost*residual_value)/Math.pow((1+nominal_rate/12),(lease_period*12)))/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))))+insurance_cumulative/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))));
			
			var monthly_payment = monthly_payment1 + tracker_fee;
			
			if(vehicle_cost > 1500000){ var processing_fee = 2500; }
			else { var processing_fee = 2500; }
			var valuation_fee = 2000;

			security_deposit_to_show = vehicle_cost * security_deposit;
			security_deposit_to_show = parseFloat(security_deposit_to_show);

			var total_upfront = security_deposit_to_show + processing_fee + valuation_fee;
			total_upfront = Math.round(total_upfront);
			security_deposit_to_show = Math.round(security_deposit_to_show);

			var number_of_months = tenure * 12;

			financing_amount = Math.round(financing_amount);
			monthly_payment = Math.round(monthly_payment);

			security_deposit_per = security_deposit * 100;
			security_deposit_per = Math.round(security_deposit_per);

			valuation_fee = Number(valuation_fee).toLocaleString('en');
			processing_fee = Number(processing_fee).toLocaleString('en');

			success = true;
		}

	}

	if(success == true){

		vehicle_cost = Number(vehicle_cost).toLocaleString('en');
		financing_amount = Number(financing_amount).toLocaleString('en');
		monthly_payment = Number(monthly_payment).toLocaleString('en');
		security_deposit_to_show = Number(security_deposit_to_show).toLocaleString('en');
		total_upfront = Number(total_upfront).toLocaleString('en');

		$('#car-form-'+k).hide();

		if(calculator_type == 'new_calc'){

			$('#car-response-'+k).html("\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>VEHICLE DETAILS</span></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'>"+car_name+" ("+car_description+")</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>PRICE OF VEHICLE</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+vehicle_cost+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>UPFRONT PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Residual Value</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>"+residual_value_per+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Security Deposit</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+security_deposit_to_show+" ("+security_deposit_per+"%)</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Processing Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+processing_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Total Upfront</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+total_upfront+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>MONTHLY PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Number of months</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>"+number_of_months+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Rent per month</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+monthly_payment+"</div>\
				<div class='clearfix'></div>\
				<p class='calculator-note'>Calculation includes rental and takaful</p>\
				<p class='calculator-note'>Processing Charges plus FED</p>\
				<button type='button' class='calcalute-button' onclick='new_car_calculation("+k+")'>Redo</button>\
			");
		}

		if(calculator_type == 'old_calc'){

			$('#car-response-'+k).html("\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>PRICE OF VEHICLE</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+vehicle_cost+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>UPFRONT PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Security Deposit</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+security_deposit_to_show+" ("+security_deposit_per+"%)</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Evaluation Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+valuation_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Processing Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+processing_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Total Upfront</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+total_upfront+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>MONTHLY PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Number of months</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>"+number_of_months+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Rent per month</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+monthly_payment+"</div>\
				<div class='clearfix'></div>\
				<p class='calculator-note'>Calculation includes rental and takaful</p>\
				<p class='calculator-note'>Processing Charges plus FED</p>\
				<button type='button' class='calcalute-button' onclick='new_car_calculation("+k+")'>Redo</button>\
			");
		}

		$('#car-response-'+k).show();
	}
}

function bike_monthly_payment(k){

	success = false;

	$('#car_vendor-'+k).removeClass('form-validation-error');
	$('.car-select-'+k).removeClass('form-validation-error');
	$('#tenure-'+k).removeClass('form-validation-error');
	$('#security_deposit-'+k).removeClass('form-validation-error');
	$('#car_delivery-'+k).removeClass('form-validation-error');
	$('#car_vendor_old-'+k).removeClass('form-validation-error');
	$('#car_model_old-'+k).removeClass('form-validation-error');
	$('#car_price_old-'+k).removeClass('form-validation-error');
	$('#security_deposit_old-'+k).removeClass('form-validation-error');
	$('#tenure_old-'+k).removeClass('form-validation-error');
	$('#residual_value-'+k).removeClass('form-validation-error');

	var mode = document.getElementById('mode').value;
	var calculator_type = document.getElementById('calculator_type-'+k).value;

	if(calculator_type == 'new_calc'){

		var errors = 0;

		var car_id = document.getElementById('car_id-'+k).value;
		var car_vendor_check = document.getElementById('car_vendor-'+k).value;
		var car_tenure_check = document.getElementById('tenure-'+k).value;
		var car_deposit_check = document.getElementById('security_deposit-'+k).value;
		var car_booking_check = document.getElementById('car_delivery-'+k).value;

		var residual_value = document.getElementById('residual_value-'+k).value; var residual_value_per;

		if(car_vendor_check == ''){
			$('#car_vendor-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_id == ''){
			$('.car-select-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_tenure_check == ''){
			$('#tenure-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_deposit_check == ''){
			$('#security_deposit-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_booking_check == ''){
			$('#car_delivery-'+k).addClass('form-validation-error');
			errors++;
		}

		if(car_deposit_check != '' && residual_value != ''){

			var temp = parseInt(car_deposit_check) + parseInt(residual_value);

			if(temp >= 100){

				alert('Sum of security deposit and residual value cannot exceed 100%.');
				errors++;
			}
		}

		if(errors == 0){

			var car_name = cars[car_id].car_name;
			var car_description = cars[car_id].car_description;

			var car_insurance = parseFloat(cars[car_id].car_insurance);
			var car_dep_factor = parseFloat(cars[car_id].car_dep_factor);
			var car_irr_year_1 = parseFloat(cars[car_id].car_irr_year_1);
			var car_irr_year_2 = parseFloat(cars[car_id].car_irr_year_2);
			var car_irr_year_3 = parseFloat(cars[car_id].car_irr_year_3);
			var car_irr_year_4 = parseFloat(cars[car_id].car_irr_year_4);
			var car_irr_year_5 = parseFloat(cars[car_id].car_irr_year_5);
			var car_irr_year_6 = parseFloat(cars[car_id].car_irr_year_6);
			var car_irr_year_7 = parseFloat(cars[car_id].car_irr_year_7);

			if(car_insurance == 0){ car_insurance = parseFloat(car_default_insurance); }
			if(car_dep_factor == 0){ car_dep_factor = parseFloat(car_default_dep_factor); }
			if(car_irr_year_1 == 0){ car_irr_year_1 = parseFloat(car_default_irr_year_1); }
			if(car_irr_year_2 == 0){ car_irr_year_2 = parseFloat(car_default_irr_year_2); }
			if(car_irr_year_3 == 0){ car_irr_year_3 = parseFloat(car_default_irr_year_3); }
			if(car_irr_year_4 == 0){ car_irr_year_4 = parseFloat(car_default_irr_year_4); }
			if(car_irr_year_5 == 0){ car_irr_year_5 = parseFloat(car_default_irr_year_5); }
			if(car_irr_year_6 == 0){ car_irr_year_6 = parseFloat(car_default_irr_year_6); }
			if(car_irr_year_7 == 0){ car_irr_year_7 = parseFloat(car_default_irr_year_7); }

			var processing_fee = parseInt(cars[car_id].car_processing_fee);
			var vehicle_cost = parseFloat(cars[car_id].car_cost_price);
			var security_deposit = parseFloat(document.getElementById('security_deposit-'+k).value) / 100;
			var lease_period = parseInt(document.getElementById('tenure-'+k).value);
			var booking_period = parseFloat(document.getElementById('booking_period-'+k).value);
			var tenure = document.getElementById('tenure-'+k).value;
		
			if(residual_value == ''){ residual_value = 0; residual_value_per = '0%'; }
			else { residual_value_per = residual_value + '%'; residual_value = parseFloat(residual_value) / 100; }

			var nominal_rate = 0;

			if(tenure == 1){ var nominal_rate_1 = car_irr_year_1 / 100; nominal_rate = nominal_rate_1; }
			else if(tenure == 2){ var nominal_rate_2 = (car_irr_year_2 / 100); nominal_rate = nominal_rate_2; }
			else if(tenure == 3){ var nominal_rate_3 = (car_irr_year_3 / 100); nominal_rate = nominal_rate_3; }
			else if(tenure == 4){ var nominal_rate_4 = (car_irr_year_4 / 100); nominal_rate = nominal_rate_4; }
			else if(tenure == 5){ var nominal_rate_5 = (car_irr_year_5 / 100); nominal_rate = nominal_rate_5; }
			else if(tenure == 6){ var nominal_rate_6 = (car_irr_year_6 / 100); nominal_rate = nominal_rate_6; }
			else if(tenure == 7){ var nominal_rate_7 = (car_irr_year_7 / 100); nominal_rate = nominal_rate_7; }

			var insurance_premium = car_insurance / 100;
			var depreciation = car_dep_factor / 100;

			var insurance_premium_1 = vehicle_cost * insurance_premium;
			var insurance_pv_1 = insurance_premium_1 / Math.pow((1 + (nominal_rate / 12)),0);
			var insurance_cumulative_1 = insurance_pv_1; 

			var insurance_premium_2 = insurance_premium_1 * (1 - depreciation);
			var insurance_pv_2 = insurance_premium_2 / Math.pow((1 + (nominal_rate / 12)),12);
			var insurance_cumulative_2 = insurance_cumulative_1 + insurance_pv_2; 

			var insurance_premium_3 = insurance_premium_2 * (1 - depreciation);
			var insurance_pv_3 = insurance_premium_3 / Math.pow((1 + (nominal_rate / 12)),24);
			var insurance_cumulative_3 = insurance_cumulative_2 + insurance_pv_3; 

			var insurance_premium_4 = insurance_premium_3 * (1 - depreciation);
			var insurance_pv_4 = insurance_premium_4 / Math.pow((1 + (nominal_rate / 12)),36);
			var insurance_cumulative_4 = insurance_cumulative_3 + insurance_pv_4; 

			var insurance_premium_5 = insurance_premium_4 * (1 - depreciation);
			var insurance_pv_5 = insurance_premium_5 / Math.pow((1 + (nominal_rate / 12)),48);
			var insurance_cumulative_5 = insurance_cumulative_4 + insurance_pv_5; 

			var insurance_premium_6 = insurance_premium_5 * (1 - depreciation);
			var insurance_pv_6 = insurance_premium_6 / Math.pow((1 + (nominal_rate / 12)),60);
			var insurance_cumulative_6 = insurance_cumulative_5 + insurance_pv_6; 

			var insurance_premium_7 = insurance_premium_6 * (1 - depreciation);
			var insurance_pv_7 = insurance_premium_7 / Math.pow((1 + (nominal_rate / 12)),72);
			var insurance_cumulative_7 = insurance_cumulative_6 + insurance_pv_7; 

			var insurance_cumulative = 0;

			if(tenure == 1){ insurance_cumulative = insurance_cumulative_1; }
			else if(tenure == 2){ insurance_cumulative = insurance_cumulative_2; }
			else if(tenure == 3){ insurance_cumulative = insurance_cumulative_3; }
			else if(tenure == 4){ insurance_cumulative = insurance_cumulative_4; }
			else if(tenure == 5){ insurance_cumulative = insurance_cumulative_5; }
			else if(tenure == 6){ insurance_cumulative = insurance_cumulative_6; }
			else if(tenure == 7){ insurance_cumulative = insurance_cumulative_7; }

			

			var financing_amount = (vehicle_cost * (1 - security_deposit)) * Math.pow((1 + (nominal_rate / 12)),booking_period);
			var monthly_payment = ((vehicle_cost*(1-security_deposit))*Math.pow((1+nominal_rate/12),booking_period)-(vehicle_cost*residual_value)/Math.pow((1+nominal_rate/12),(lease_period*12)))/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))))+insurance_cumulative/((Math.pow((1+nominal_rate/12),(lease_period*12))-1)/((nominal_rate/12*Math.pow((1+nominal_rate/12),(lease_period*12)))));

			security_deposit_to_show = vehicle_cost * security_deposit;
			security_deposit_to_show = parseFloat(security_deposit_to_show);

			var total_upfront = security_deposit_to_show + processing_fee;
			total_upfront = Math.round(total_upfront);
			security_deposit_to_show = Math.round(security_deposit_to_show);

			var number_of_months = tenure * 12;

			financing_amount = Math.round(financing_amount);
			monthly_payment = Math.round(monthly_payment);

			security_deposit_per = security_deposit * 100;
			security_deposit_per = Math.round(security_deposit_per);

			processing_fee = Number(processing_fee).toLocaleString('en');

			success = true;
		}
	}

	if(success == true){

		vehicle_cost = Number(vehicle_cost).toLocaleString('en');
		financing_amount = Number(financing_amount).toLocaleString('en');
		monthly_payment = Number(monthly_payment).toLocaleString('en');
		security_deposit_to_show = Number(security_deposit_to_show).toLocaleString('en');
		total_upfront = Number(total_upfront).toLocaleString('en');

		$('#car-form-'+k).hide();

		if(calculator_type == 'new_calc'){

			$('#car-response-'+k).html("\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>VEHICLE DETAILS</span></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'>"+car_name+" ("+car_description+")</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>UPFRONT PAYMENT</span></div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Down Payment</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+security_deposit_to_show+" ("+security_deposit_per+"%)</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Processing Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+processing_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Total Upfront</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+total_upfront+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>MONTHLY PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Number of Months</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>"+number_of_months+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Monthly Installment</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+monthly_payment+"</div>\
				<div class='clearfix'></div>\
				<p class='calculator-note'>Processing Charges plus FED</p>\
				<button type='button' class='calcalute-button' onclick='new_car_calculation("+k+")'>Redo</button>\
			");
		}

		if(calculator_type == 'old_calc'){

			$('#car-response-'+k).html("\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>PRICE OF VEHICLE</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+vehicle_cost+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>UPFRONT PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Security Deposit</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+security_deposit_to_show+" ("+security_deposit_per+"%)</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Evaluation Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+valuation_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Processing Fee</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+processing_fee+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Total Upfront</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+total_upfront+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-12 col-md-12 col-sm-12 col-xs-12 price-table'><span class='font-bold'>MONTHLY PAYMENT</span></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Number of months</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>"+number_of_months+"</div>\
				<div class='clearfix'></div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-bottom price-table'>Rent per month</div>\
				<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-bottom price-table'>Rs. "+monthly_payment+"</div>\
				<div class='clearfix'></div>\
				<p class='calculator-note'>Calculation includes rental and takaful</p>\
				<p class='calculator-note'>Processing Charges plus FED</p>\
				<button type='button' class='calcalute-button' onclick='new_car_calculation("+k+")'>Redo</button>\
			");
		}

		$('#car-response-'+k).show();
	}
}


function adjust_home_form(temp){

	if(temp == 'segment'){

		var home_segment = document.getElementById('home_segment').value;

		if(home_segment == ''){
			$('#home_tenure').html("<option value=''>Tenure</option>");
			$('#home_payment_plan').html("<option value=''>Payment Plan</option>");
			$('#home_category').html("<option value=''>Easy home category</option>");
		}

		else {
			$('#home_category').html("\
				<option value=''>Easy home category</option>\
				<option value='Buyer'>Buyer</option>\
				<option value='Builder (Construction)'>Builder (Construction)</option>\
				<option value='Builder (Land Purchase and Construction)'>Builder (Land Purchase and Construction)</option>\
				<option value='Renovation'>Renovation</option>\
				<option value='Replacement'>Replacement</option>\
			");
		}
	}

	else if(temp == 'category'){

		var home_category = document.getElementById('home_category').value;
		var home_segment = document.getElementById('home_segment').value;

		if(home_category == ''){
			$('#home_tenure').html("<option value=''>Tenure</option>");
			$('#home_payment_plan').html("<option value=''>Payment Plan</option>");
			$('#home_tranches').html("<option value=''>No. of Tranches</option>");
		}

		if((home_segment == 'Salaried' || home_segment == 'SEP') && home_category != 'Renovation'){
			$('#home_tenure').html("<option value=''>Tenure</option>");

			for(var k = 3; k <= 25; k++){
				$('#home_tenure').append("<option value='"+k+"'>"+k+" years</option>");
			}
		}

		if((home_segment == 'Businessman' || home_segment == 'NRP') && home_category != 'Renovation'){
			$('#home_tenure').html("<option value=''>Tenure</option>");

			for(var k = 3; k <= 20; k++){
				$('#home_tenure').append("<option value='"+k+"'>"+k+" years</option>");
			}
		}

		if(home_segment != '' && home_category == 'Renovation'){
			$('#home_tenure').html("<option value=''>Tenure</option>");

			for(var k = 3; k <= 15; k++){
				$('#home_tenure').append("<option value='"+k+"'>"+k+" years</option>");
			}
		}

		if(home_category == 'Buyer' || home_category == 'Replacement'){
			$('#home_payment_plan').html("\
				<option value=''>Payment Plan</option>\
				<option value='UMI'>UMI</option>\
				<option value='SMI'>SMI</option>\
			");
		}

		if(home_category != 'Buyer' && home_category != 'Replacement'){
			$('#home_payment_plan').html("\
				<option value=''>Payment Plan</option>\
				<option value='UMI'>UMI</option>\
			");
		}

		if(home_category == 'Buyer' || home_category == 'Replacement'){
			$('#home_tranches').html("\
				<option value=''>No. of Tranches</option>\
				<option value='1'>1</option>\
			");
		}

		if(home_category == 'Builder (Construction)'){
			$('#home_tranches').html("\
				<option value=''>No. of Tranches</option>\
				<option value='1'>1</option>\
				<option value='2'>2</option>\
				<option value='3'>3</option>\
				<option value='4'>4</option>\
			");
		}

		if(home_category == 'Builder (Land Purchase and Construction)'){
			$('#home_tranches').html("\
				<option value=''>No. of Tranches</option>\
				<option value='2'>2</option>\
				<option value='3'>3</option>\
				<option value='4'>4</option>\
			");
		}

		if(home_category == 'Renovation'){
			$('#home_tranches').html("\
				<option value=''>No. of Tranches</option>\
				<option value='1'>1</option>\
				<option value='2'>2</option>\
			");
		}
	}
}

function calc_easy_home(){

	$('#home_segment').removeClass('form-validation-error');
	$('#home_category').removeClass('form-validation-error');
	$('#home_tenure').removeClass('form-validation-error');
	$('#home_payment_plan').removeClass('form-validation-error');
	$('#home_property_price').removeClass('form-validation-error');
	$('#home_financing_requested').removeClass('form-validation-error');
	$('#home_financing_requested_msg').hide();
	$('#home_tranches').removeClass('form-validation-error');

	var home_segment = document.getElementById('home_segment').value;
	var home_category = document.getElementById('home_category').value;
	var home_tenure = document.getElementById('home_tenure').value;
	var home_payment_plan = document.getElementById('home_payment_plan').value;
	var home_property_price = document.getElementById('home_property_price').value;
	var home_financing_requested = document.getElementById('home_financing_requested').value;
	var home_tranches = document.getElementById('home_tranches').value;

	var errors = 0;
	var success = false;

	if(home_segment == 'Salaried' || home_segment == 'SEP' || home_segment == 'NRP'){

		if(home_category == 'Buyer' || home_category == 'Replacement'){

			if(home_property_price == ''){
			$('#home_property_price').addClass('form-validation-error');
			errors++;
			}

			if(home_financing_requested == ''){
			$('#home_financing_requested').addClass('form-validation-error');
			errors++;
			}

			if(home_property_price != '' && home_financing_requested != ''){

				if(parseFloat(home_financing_requested) >= parseFloat(home_property_price)){

					$('#home_financing_requested').addClass('form-validation-error');
					$('#home_financing_requested_msg').html('Financing amount can not be more than property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}

				if(parseFloat(home_financing_requested) > parseFloat(home_property_price) * 0.75){
			
					$('#home_financing_requested_msg').html('Financing amount can not be more than 75% of property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}
			}
		}
		else if(home_category == 'Renovation'){

			if(home_property_price == ''){
			$('#home_property_price').addClass('form-validation-error');
			errors++;
			}

			if(home_financing_requested == ''){
			$('#home_financing_requested').addClass('form-validation-error');
			errors++;
			}

			if(home_property_price != '' && home_financing_requested != ''){

				if(parseFloat(home_financing_requested) >= parseFloat(home_property_price)){

					$('#home_financing_requested').addClass('form-validation-error');
					$('#home_financing_requested_msg').html('Financing amount can not be more than property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}

				if(parseFloat(home_financing_requested) > parseFloat(home_property_price) * 0.30){
			
					$('#home_financing_requested_msg').html('Financing amount can not be more than 30% of property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}
			}
		}
	}
		
	if(home_segment == 'Businessman'){

		if(home_category == 'Buyer' || home_category == 'Replacement'){

			if(home_property_price == ''){
			$('#home_property_price').addClass('form-validation-error');
			errors++;
			}

			if(home_financing_requested == ''){
			$('#home_financing_requested').addClass('form-validation-error');
			errors++;
			}

			if(home_property_price != '' && home_financing_requested != ''){

				if(parseFloat(home_financing_requested) >= parseFloat(home_property_price)){

					$('#home_financing_requested').addClass('form-validation-error');
					$('#home_financing_requested_msg').html('Financing amount can not be more than property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}

				if(parseFloat(home_financing_requested) > parseFloat(home_property_price) * 0.65){
			
					$('#home_financing_requested_msg').html('Financing amount can not be more than 65% of property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}
			}
		}
		else if(home_category == 'Renovation'){

			if(home_property_price == ''){
			$('#home_property_price').addClass('form-validation-error');
			errors++;
			}

			if(home_financing_requested == ''){
			$('#home_financing_requested').addClass('form-validation-error');
			errors++;
			}

			if(home_property_price != '' && home_financing_requested != ''){

				if(parseFloat(home_financing_requested) >= parseFloat(home_property_price)){

					$('#home_financing_requested').addClass('form-validation-error');
					$('#home_financing_requested_msg').html('Financing amount can not be more than property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}

				if(parseFloat(home_financing_requested) > parseFloat(home_property_price) * 0.30){
			
					$('#home_financing_requested_msg').html('Financing amount can not be more than 30% of property price.');
					$('#home_financing_requested_msg').show();
					errors++;
				}
			}
		}
	}
			
	if(errors == 0){

		var tenure = parseInt(home_tenure);
		var cost_price = parseFloat(home_property_price);
		var bank_share = parseFloat(home_financing_requested);
		var tranches = parseInt(home_tranches);

		var profit_rate = eh_rates[home_segment].kibor;
		profit_rate = parseFloat(profit_rate) / 100;

		if(home_payment_plan == 'UMI'){

			if(home_category == 'Buyer'){

				var total_units = tenure * 12;
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = monthly_rent_per_unit * total_units;
				var starting_month_payment = unit_sale_price + total_starting_rent;
				var buyer_category = 'buyer';
			}

			else if(home_category == 'Builder (Construction)'){

				var total_units = (tenure * 12) - 12 - ((tranches - 1) * 3);
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = (bank_share * profit_rate) / (tranches * 12);
				var starting_month_payment = total_starting_rent;
				var buyer_category = 'builder1';
			}

			else if(home_category == 'Builder (Land Purchase and Construction)'){

				var total_units = (tenure * 12) - 12 - ((tranches - 1) * 3);
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = ((0.5 * bank_share) * profit_rate) / 12;
				var starting_month_payment = total_starting_rent;
				var buyer_category = 'builder2';
			}

			else if(home_category == 'Renovation'){

				var total_units = (tenure * 12) - 12 - ((tranches - 1) * 3);
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = (bank_share * profit_rate) / (tranches * 12);
				var starting_month_payment = total_starting_rent;
				var buyer_category = 'renovation';
			}

			else if(home_category == 'Replacement'){

				var total_units = (tenure * 12) - 12;
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = monthly_rent_per_unit * total_units;
				var starting_month_payment = unit_sale_price + total_starting_rent;
				var buyer_category = 'replacement';
			}
		}

		if(home_payment_plan == 'SMI'){

			if(home_category == 'Buyer'){

				var total_units = tenure * 12 * 1.5;
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = monthly_rent_per_unit * total_units;
				var starting_month_payment = unit_sale_price + total_starting_rent;
				var buyer_category = 'buyer';
			}

			if(home_category == 'Replacement'){

				var total_units = ((tenure * 12) - 12) * 1.5;
				var unit_sale_price = bank_share / total_units;
				var monthly_rent_per_unit = (unit_sale_price * profit_rate) / 12;
				var total_starting_rent = monthly_rent_per_unit * total_units;
				var starting_month_payment = unit_sale_price + total_starting_rent;
				var buyer_category = 'replacement';
			}
		}

		unit_sale_price = Math.round(unit_sale_price,2);
		monthly_rent_per_unit = Math.round(monthly_rent_per_unit,2);
		total_starting_rent = Math.round(total_starting_rent,2);
		starting_month_payment = Math.round(starting_month_payment,2);

		unit_sale_price = Number(unit_sale_price).toLocaleString('en');
		monthly_rent_per_unit = Number(monthly_rent_per_unit).toLocaleString('en');
		total_starting_rent = Number(total_starting_rent).toLocaleString('en');
		starting_month_payment = Number(starting_month_payment).toLocaleString('en');

		success = true;
	}

	if(success == true){

		var detail_url = "easy-home-detail/?cost_price="+cost_price+"&bank_share="+bank_share+"&tenure="+tenure+"&tranches="+tranches+"&type="+home_payment_plan+"&segment="+home_segment+"&buyer_category="+buyer_category;

		$('#home_form_response').html("\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>NO. OF UNITS</span></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>"+total_units+"</div>\
			<div class='clearfix'></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>UNIT SALE PRICE</span></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+unit_sale_price+"</div>\
			<div class='clearfix'></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>MONTHLY RENT PER UNIT</span></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+monthly_rent_per_unit+"</div>\
			<div class='clearfix'></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>TOTAL STARTING RENT</span></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+total_starting_rent+"</div>\
			<div class='clearfix'></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-left border-top-bottom price-table'><span class='font-bold'>STARTING MONTH PAYMENT</span></div>\
			<div class='col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right border-top-bottom price-table'>Rs. "+starting_month_payment+"</div>\
			<div class='clearfix'></div>\
			<div class='col-lg-12 text-center border-top-bottom price-table'><input type='submit' name='calc' style='background: none; border: none; color: #71277a; font-weight: bold; outline: none;' value='Click here for detailed payment schedule'></div>\
			<div class='clearfix'></div>\
			<button type='button' class='calcalute-button' onclick='new_home_calculation()'>Redo</button>\
		");

		$('#home_form').hide();
		$('#home_form_response').show();
	}
}

function new_home_calculation(){

	$('#home_form_response').hide();
	$('#home_form').show();
}

function search(){

	$('#s').removeClass('form-validation-error');

	var search_value = document.getElementById('s').value;

	if(search_value == ''){
		$('#s').addClass('form-validation-error');
		return false;
	}
}

function search_mobile(){

	$('#s_mobile').removeClass('form-validation-error');

	var search_value = document.getElementById('s_mobile').value;

	if(search_value == ''){
		$('#s_mobile').addClass('form-validation-error');
		return false;
	}
}

function get_branch_suggestions(){

	var branch_address = document.getElementById('google-address').value;
	var select_atm = 0;
	var select_premium_banking = 0;
	var select_saturday_open = 0;
	var select_offsite_atm = 0;
	var select_fx_branches = 0;
	var select_cash_deposit = 0;

	if($('#optbl-atms').is(':checked')){
		select_atm = 1;
	}

	if($('#optbl-premium-banking').is(':checked')){
		select_premium_banking = 1;
	}

	if($('#optbl-saturday-open').is(':checked')){
		select_saturday_open = 1;
	}

	if($('#optbl-offsite-atm').is(':checked')){
		select_offsite_atm = 1;
	}
	
	if($('#optbl-fx-branches').is(':checked')){
		select_fx_branches = 1;
	}
	
	if($('#optbl-cash-deposit').is(':checked')){
		select_cash_deposit = 1;
	}

	if(branch_address == '' || branch_address == ' '){

		$('#google-text-search-results').hide();
		$('#google-text-search-results').html('');
	}

	else if(branch_address != ''){

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-branch-locator.php',

			{
				'branch_address' : branch_address,
				'select_atm' : select_atm,
				'select_premium_banking' : select_premium_banking,
				'select_saturday_open' : select_saturday_open,
				'select_offsite_atm' : select_offsite_atm,
				'select_fx_branches' : select_fx_branches,
				'select_cash_deposit' : select_cash_deposit
			},

			function (data){

				var result = JSON.parse(data);

				if(result.success == true){

					$('#google-text-search-results').html('');
						
					for(k = 0; k < result.branches.length; k++){

						if(k == 0){
							$('#google-text-search-results').append("\
								<span onclick='affect_map_single("+result.branches[k].branch_id+")'>"+result.branches[k].branch_name+" ("+result.branches[k].city_name+")</span>\
							");
						}

						else {
							$('#google-text-search-results').append("\
								<span onclick='affect_map_single("+result.branches[k].branch_id+")'>"+result.branches[k].branch_name+" ("+result.branches[k].city_name+")</span>\
							");
						}
					}

					$('#google-text-search-results').show();
				}

				if(result.success == false){

					$('#google-text-search-results').hide();
					$('#google-text-search-results').html('');
				}
			}
		);
	}	
}

function affect_map_single(branch_id){

	if(branch_id != ''){

		bounds = [];
		var latlng = new google.maps.LatLng(branches[branch_id].branch_latitude,branches[branch_id].branch_longitude);
		bounds.push(latlng);

		map.fitLatLngBounds(bounds);

		for(k = 0; k < map.markers.length; k++){

			map.markers[k].setVisible(true);

			if(map.markers[k].branch_id == branch_id){

				google.maps.event.trigger(map.markers[k], 'click');
			}
		}

		// $("#optbl-atms").prop("checked", false);
		// $("#optbl-premium-banking").prop("checked", false);
		// $("#optbl-saturday-open").prop("checked", false);

		$('#google-text-search-results').hide();
		$('#google-text-search-results').html('');

		$('#google-address').val(branches[branch_id]['branch_name']);

		map.setZoom(15);
	}
}

function affect_map_country_dropdown(){

	var original_city_id = document.getElementById('google-city').value;

	$('#google-city').html("<option value=''>Select city</option>");

	var select_atm = 0;
	var select_premium_banking = 0;
	var select_saturday_open = 0;
	var select_offsite_atm = 0;
	var select_fx_branches = 0;
	var select_cash_deposit = 0;

	if($('#optbl-atms').is(':checked')){
		select_atm = 1;
	}

	if($('#optbl-premium-banking').is(':checked')){
		select_premium_banking = 1;
	}

	if($('#optbl-saturday-open').is(':checked')){
		select_saturday_open = 1;
	}

	if($('#optbl-offsite-atm').is(':checked')){
		select_offsite_atm = 1;
	}
	
	if($('#optbl-fx-branches').is(':checked')){
		select_fx_branches = 1;
	}
	
	if($('#optbl-cash-deposit').is(':checked')){
		select_cash_deposit = 1;
	}

	for(var k in cities){

		var total_branches = 0;
		var city_id = k;

		for(var x in branches){

			if(branches[x].city_id == city_id){

				var match = true;

				if(select_atm == 1 && branches[x].onsite_atm != 'Yes'){
					match = false;
				}

				if(select_premium_banking == 1 && branches[x].premium_banking_center != 'Yes'){
					match = false;
				}

				if(select_saturday_open == 1 && branches[x].saturday_on != 'Yes'){
					match = false;
				}

				if(select_offsite_atm == 1 && branches[x].offsite_atm != 'Yes'){
					match = false;
				}
				
				if(select_fx_branches == 1 && branches[x].fx_branches != 'Yes'){
					match = false;
				}
				
				if(select_cash_deposit == 1 && branches[x].cash_deposit != 'Yes'){
					match = false;
				}

				if(match == true){

					total_branches++;
				}
			}
		}

		if(original_city_id == city_id && total_branches > 0){

			$('#google-city').append("<option value='"+k+"' selected>"+cities[k]+"</option>");
		}

		else if(original_city_id != city_id && total_branches > 0){

			$('#google-city').append("<option value='"+k+"'>"+cities[k]+"</option>");
		}
	}

	affect_map_city_dropdown();
}

function affect_map_city(){

	var city_id = document.getElementById('google-city').value;
	var lat; var lng; var total = 0;

	if(city_id != ''){

		var temp = document.getElementById('google-city');
		temp = temp.options[temp.selectedIndex].text;

		$('#google-address').val(temp);
		$('#google-search-btn').click();

		affect_map_city_dropdown();
	}
}

function affect_map_city_dropdown(){

	var city_id = document.getElementById('google-city').value;

	var select_atm = 0;
	var select_premium_banking = 0;
	var select_saturday_open = 0;
	var select_offsite_atm = 0;
	var select_fx_branches = 0;
	var select_cash_deposit = 0;

	if($('#optbl-atms').is(':checked')){
		select_atm = 1;
	}

	if($('#optbl-premium-banking').is(':checked')){
		select_premium_banking = 1;
	}

	if($('#optbl-saturday-open').is(':checked')){
		select_saturday_open = 1;
	}

	if($('#optbl-offsite-atm').is(':checked')){
		select_offsite_atm = 1;
	}
	
	if($('#optbl-fx-branches').is(':checked')){
		select_fx_branches = 1;
	}
	
	if($('#optbl-cash-deposit').is(':checked')){
		select_cash_deposit = 1;
	}

	if(city_id != ''){

		$('#google-branch').html("<option value=''>Select branch or ATM</option>");

		for(var k in branches){

			var display_branch = true;

			if(select_atm == 1 && branches[k].onsite_atm != 'Yes'){
				display_branch = false;
			}

			if(select_premium_banking == 1 && branches[k].premium_banking_center != 'Yes'){
				display_branch = false;
			}

			if(select_saturday_open == 1 && branches[k].saturday_on != 'Yes'){
				display_branch = false;
			}

			if(select_offsite_atm == 1 && branches[k].offsite_atm != 'Yes'){
				display_branch = false;
			}
			
			if(select_fx_branches == 1 && branches[k].fx_branches != 'Yes'){
				display_branch = false;
			}
			
			if(select_cash_deposit == 1 && branches[k].cash_deposit != 'Yes'){
				display_branch = false;
			}

			if(branches[k].city_id == city_id && display_branch == true){
				$('#google-branch').append("<option value='"+branches[k].branch_id+"'>"+branches[k].branch_name+"</option>");
			}
		}
	}
}

function affect_map_global(){

	var global_value = document.getElementById('google-address').value;
	var lat; var lng; var total = 0; bounds = [];

	var select_atm = 0;
	var select_premium_banking = 0;
	var select_saturday_open = 0;
	var select_offsite_atm = 0;
	var select_fx_branches = 0;
	var select_cash_deposit = 0;

	if($('#optbl-atms').is(':checked')){
		select_atm = 1;
	}

	if($('#optbl-premium-banking').is(':checked')){
		select_premium_banking = 1;
	}

	if($('#optbl-saturday-open').is(':checked')){
		select_saturday_open = 1;
	}

	if($('#optbl-offsite-atm').is(':checked')){
		select_offsite_atm = 1;
	}
	
	if($('#optbl-fx-branches').is(':checked')){
		select_fx_branches = 1;
	}
	
	if($('#optbl-cash-deposit').is(':checked')){
		select_cash_deposit = 1;
	}

	if(global_value == ''){

		for(k = 0; k < map.markers.length; k++){

			map.markers[k].infoWindow.close();
			map.markers[k].setVisible(true);

			if(select_atm == 1 && map.markers[k].onsite_atm != 'Yes'){
				map.markers[k].setVisible(false);
			}

			if(select_premium_banking == 1 && map.markers[k].premium_banking_center != 'Yes'){
				map.markers[k].setVisible(false);
			}

			if(select_saturday_open == 1 && map.markers[k].saturday_on != 'Yes'){
				map.markers[k].setVisible(false);
			}

			if(select_offsite_atm == 1 && map.markers[k].offsite_atm != 'Yes'){
				map.markers[k].setVisible(false);
			}
			
			if(select_fx_branches == 1 && map.markers[k].fx_branches != 'Yes'){
				map.markers[k].setVisible(false);
			}
			
			if(select_cash_deposit == 1 && map.markers[k].cash_deposit != 'Yes'){
				map.markers[k].setVisible(false);
			}
		}
	}

	if(global_value != ''){

		$('#google-text-search-results').hide();
		$('#google-text-search-results').html('');

		for(k = 0; k < map.markers.length; k++){

			map.markers[k].infoWindow.close();
			map.markers[k].setVisible(false);
		}

		$.post(

			'/wp-content/themes/mbl/templates/ajax-forms/ajax-branch-locator.php',

			{
				'branch_address' : global_value,
				'select_atm' : select_atm,
				'select_premium_banking' : select_premium_banking,
				'select_saturday_open' : select_saturday_open,
				'select_offsite_atm' : select_offsite_atm,
				'select_fx_branches' : select_fx_branches,
				'select_cash_deposit' : select_cash_deposit
			},

			function (data){

				var result = JSON.parse(data);

				if(result.success == true){

					for(k = 0; k < map.markers.length; k++){

						var br_id = map.markers[k].branch_id;

						for(x = 0; x < result.branches.length; x++){

							if(result.branches[x].branch_id == br_id){

								map.markers[k].setVisible(true);

								lat = map.markers[k].position.lat();
								lng = map.markers[k].position.lng();

								var latlng = new google.maps.LatLng(lat,lng);
								bounds.push(latlng);

								total++;
							}
						}
					}

					if(total > 0){

						map.fitLatLngBounds(bounds);

						if(total == 1){

							map.setZoom(15);
						}
					}
				}
			}
		);		
	}

	affect_map_country_dropdown();
}
</script>

</body>
</html>
