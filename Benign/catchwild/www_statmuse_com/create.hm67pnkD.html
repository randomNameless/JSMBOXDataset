<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>create.hm67pnkD.html</title>
</head>
<body>

<script>
import{a as y,g as Re,f as X,h as Pe,m as h,j as I,w as G,b as x,o as J,k as T,t as U,l as Fe,n as He,p as Le,q as Be,r as w,u as _e,v as De,x as j,y as R,z as r,A as z,B as H,F as Ne,C as Y,D as We,E as Me,G as Ve,H as qe,I as Q,J as P,K as Ke,L as Ge,M as Je,N as Ue,O as je,i as $,P as ze,Q as Ye,R as Qe,S as $e}from"./create.4ruYB1qZ.js";import{c as Xe,a as Ze,r as et}from"./typeahead.Dvfb_-NS.js";import{a6 as L,a5 as tt}from"./index.OpPK6Lp4.js";function B(b){return Array.from(b.querySelectorAll('[role="option"]:not([data-disabled])')).filter(a=>y(a))}function rt(b){return a=>{const c=a.target,s=Re(b);if(!s||!X(c))return!1;const E=s.id;return!!(Pe(c)&&E===c.htmlFor||c.closest(`label[for="${E}"]`))}}function nt(){return{elements:{root:h("label",{action:a=>({destroy:I(a,"mousedown",s=>{!s.defaultPrevented&&s.detail>1&&s.preventDefault()})})})}}}const st=[r.ARROW_LEFT,r.ESCAPE,r.ARROW_RIGHT,r.SHIFT,r.CAPS_LOCK,r.CONTROL,r.ALT,r.META,r.ENTER,r.F1,r.F2,r.F3,r.F4,r.F5,r.F6,r.F7,r.F8,r.F9,r.F10,r.F11,r.F12],at={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0},lt=["trigger","menu","label"];function ot(b){const a={...at,...b},c=G(x(null)),s=G(x(null)),E=a.selected??x(a.defaultSelected),S=J(E,a?.onSelectedChange),_=T(s,e=>e?N(e):void 0),Z=a.open??x(a.defaultOpen),d=J(Z,a?.onOpenChange),D=U({...Fe(a,"open","defaultOpen","builder","ids"),multiple:a.multiple??!1}),{scrollAlignment:C,loop:ee,closeOnOutsideClick:te,escapeBehavior:re,preventScroll:ne,portal:se,forceVisible:ae,positioning:le,multiple:F,arrowSize:oe,disabled:ie,required:ue,typeahead:ce,name:de,highlightOnHover:fe,onOutsideClick:be,preventTextSelectionOverflow:me}=D,{name:v,selector:ge}=He(a.builder),u=U({...Le(lt),...a.ids}),{handleTypeaheadSearch:pe}=Xe({onMatch:e=>{s.set(e),e.scrollIntoView({block:C.get()})},getCurrentItem(){return s.get()}});function N(e){const t=e.getAttribute("data-value"),l=e.getAttribute("data-label"),n=e.hasAttribute("data-disabled");return{value:t&&JSON.parse(t),label:l??e.textContent??void 0,disabled:!!n}}const ye=e=>{S.update(t=>{if(F.get()){const n=Array.isArray(t)?[...t]:[];return $e(e,n,(O,i)=>w(O.value,i.value))}return e})};function W(e){const t=N(e);ye(t)}async function M(){d.set(!0),await L();const e=document.getElementById(u.menu.get());if(!y(e))return;const t=e.querySelector("[aria-selected=true]");y(t)&&s.set(t)}function m(){d.set(!1),s.set(null)}const V=Be({open:d,forceVisible:ae,activeTrigger:c}),q=T([S],([e])=>t=>Array.isArray(e)?e.some(l=>w(l.value,t)):_e(t)?w(e?.value,De(t,void 0)):w(e?.value,t)),he=T([_],([e])=>t=>w(e?.value,t)),ve=h(v("trigger"),{stores:[d,s,ie,u.menu,u.trigger,u.label],returned:([e,t,l,n,O,i])=>({"aria-activedescendant":t?.id,"aria-autocomplete":"list","aria-controls":n,"aria-expanded":e,"aria-labelledby":i,"data-state":e?"open":"closed",id:O,role:"combobox",disabled:j(l),type:a.builder==="select"?"button":void 0}),action:e=>{c.set(e);const t=Ye(e),l=R(I(e,"click",()=>{e.focus(),d.get()?m():M()}),I(e,"keydown",n=>{if(!d.get()){if(st.includes(n.key)||n.key===r.TAB||n.key===r.BACKSPACE&&t&&e.value===""||n.key===r.SPACE&&z(e))return;M(),L().then(()=>{if(S.get())return;const A=document.getElementById(u.menu.get());if(!y(A))return;const o=Array.from(A.querySelectorAll(`${ge("item")}:not([data-disabled]):not([data-hidden])`)).filter(k=>y(k));o.length&&(n.key===r.ARROW_DOWN?(s.set(o[0]),o[0].scrollIntoView({block:C.get()})):n.key===r.ARROW_UP&&(s.set(H(o)),H(o).scrollIntoView({block:C.get()})))})}if(n.key===r.TAB){m();return}if(n.key===r.ENTER&&!n.isComposing||n.key===r.SPACE&&z(e)){n.preventDefault();const i=s.get();i&&W(i),F.get()||m()}if(n.key===r.ARROW_UP&&n.altKey&&m(),Ne.includes(n.key)){n.preventDefault();const i=document.getElementById(u.menu.get());if(!y(i))return;const A=B(i);if(!A.length)return;const o=A.filter(K=>!Y(K)&&K.dataset.hidden===void 0),k=s.get(),f=k?o.indexOf(k):-1,g=ee.get(),xe=C.get();let p;switch(n.key){case r.ARROW_DOWN:p=qe(o,f,g);break;case r.ARROW_UP:p=Ve(o,f,g);break;case r.PAGE_DOWN:p=Me(o,f,10,g);break;case r.PAGE_UP:p=We(o,f,10,g);break;case r.HOME:p=o[0];break;case r.END:p=H(o);break;default:return}s.set(p),p?.scrollIntoView({block:xe})}else if(ce.get()){const i=document.getElementById(u.menu.get());if(!y(i))return;pe(n.key,B(i))}}));return{destroy(){c.set(null),l()}}}}),Ae=h(v("menu"),{stores:[V,u.menu],returned:([e,t])=>({hidden:e?void 0:!0,id:t,role:"listbox",style:e?void 0:Q({display:"none"})}),action:e=>{let t=Qe;const l=R(P([V,se,te,le,c],([n,O,i,A,o])=>{t(),!(!n||!o)&&L().then(()=>{t();const k=rt(u.trigger.get());t=Ke(e,{anchorElement:o,open:d,options:{floating:A,focusTrap:null,modal:{closeOnInteractOutside:i,onClose:m,shouldCloseOnInteractOutside:f=>{if(be.get()?.(f),f.defaultPrevented)return!1;const g=f.target;return!(!X(g)||g===o||o.contains(g)||k(f))}},escapeKeydown:{handler:m,behaviorType:re},portal:Ge(e,O),preventTextSelectionOverflow:{enabled:me}}}).destroy})}));return{destroy:()=>{l(),t()}}}}),{elements:{root:Ee}}=nt(),{action:Oe}=tt(Ee),ke=h(v("label"),{stores:[u.label,u.trigger],returned:([e,t])=>({id:e,for:t}),action:Oe}),Ie=h(v("option"),{stores:[q],returned:([e])=>t=>{const l=e(t.value);return{"data-value":JSON.stringify(t.value),"data-label":t.label,"data-disabled":j(t.disabled),"aria-disabled":t.disabled?!0:void 0,"aria-selected":l,"data-selected":l?"":void 0,id:Je(),role:"option"}},action:e=>({destroy:R(I(e,"click",l=>{if(Y(e)){l.preventDefault();return}W(e),F.get()||m()}),P(fe,l=>l?R(I(e,"mouseover",()=>{s.set(e)}),I(e,"mouseleave",()=>{s.set(null)})):void 0))})}),Se=h(v("group"),{returned:()=>e=>({role:"group","aria-labelledby":e})}),we=h(v("group-label"),{returned:()=>e=>({id:e})}),Te=Ue({value:T([S],([e])=>{const t=Array.isArray(e)?e.map(l=>l.value):e?.value;return typeof t=="string"?t:JSON.stringify(t)}),name:je(de),required:ue,prefix:a.builder}),Ce=h(v("arrow"),{stores:oe,returned:e=>({"data-arrow":!0,style:Q({position:"absolute",width:`var(--arrow-size, ${e}px)`,height:`var(--arrow-size, ${e}px)`})})});return P([s],([e])=>{if(!$)return;const t=document.getElementById(u.menu.get());y(t)&&B(t).forEach(l=>{l===e?Ze(l):et(l)})}),P([d,ne],([e,t])=>{if(!(!$||!e||!t))return ze()}),{ids:u,elements:{trigger:ve,group:Se,option:Ie,menu:Ae,groupLabel:we,label:ke,hiddenInput:Te,arrow:Ce},states:{open:d,selected:S,highlighted:_,highlightedItem:s},helpers:{isSelected:q,isHighlighted:he,closeMenu:m},options:D}}function dt(b){const a=ot({...b,builder:"select"}),c=T(a.states.selected,s=>Array.isArray(s)?s.map(E=>E.label).join(", "):s?.label??"");return{...a,elements:{...a.elements},states:{...a.states,selectedLabel:c}}}export{dt as c};
//# sourceMappingURL=create.hm67pnkD.js.map

</script>

</body>
</html>
