<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmwusa-filterable-list-view.html</title>
</head>
<body>

<script>
/*! BMWUSA Vite Build 1731603678170 */
import{C as L}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/component.js";import{u}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.js";import{G as S}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-tooltips.js";import{s as $,p as P,h as c}from"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-measurement-data.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index.esm.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/is-author.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/baseDomain.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/getbyourl.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/scroll-to.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/uid.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/zipcode.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/index2.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/tippy.standalone.js";import"/etc.clientlibs/bmwusa/clientlibs/clientlib-site/bmwusa-clientlibs/bmwusa-chunks/resources/config.js";const f={servicesMap:new Map($),getListItem(t,e,i){const{Distance:l,IsPrimary:s,City:r,Address:o,Name:n,State:a,ZipCode:h,Id:d,Filters:p}=t,m="Save as primary dealer",g="Remove primary dealer",_=s?"primary":"",b=s?g:m,y=l?l+" mi  &#8226;":"",w=p.indexOf("5")>0?`<br><span class="${e}__m-center"><img alt="M Performance Logo" src="/content/dam/bmw/common/globalnav/BMW-logo-M_Performance_2.png"> Certified Center</span>`:"";return`<li class="${e}__dealer">
        <div class="${e}__item" data-id="${d}" title="${d} - ${n}. ${o}, ${r}." role="button" tabindex="0">
          <div class="${e}__number">${d}</div>
          <div>
            <div class="${e}__dealer-name">${n}</div>
            <div class="${e}__dealer-location">
              ${y} ${o}<br>
              ${r}, ${a} ${u.CleanZip(h)}
              ${w}
            </div>
          </div>
        </div>
        <button class="${e}__primary-dealership ${_} bmw-tooltip" data-interactive="false" data-id="${d}" data-theme="bmw-light-minimal" data-icon="icon-map-star" data-animateFill="false" data-arrow="true" aria-label="${b}" data-titleadd="${m}" data-titleremove="${g}" data-position="bottom" data-tippy-offset="0,10" data-tippy-placement="bottom" data-size="small" data-dynamicTitle="true">
          <span class="${e}__icon">
            <svg aria-label="hidden">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-map-star">
            </use></svg>
          </span>
        </button>
      </li>`},getVisitorURL(t){return window.BMWVisitor?BMWVisitor.getVisitorURL(t):t},filter(t,e,i=!1){const{filterId:l}=t;if(l!==0){const s=i?"li":"div",r=document.createElement(s),n=`Showing: "${this.servicesMap.get(l)}" <button class="${e}__clear-filter">Clear</button>`;return r.classList.add(`${e}__filter-info`),r.innerHTML=n,r}else return""},formatHours(t,e){const i=t.split(":")[0].replace(/^0+/,""),l=t.split(":")[1].replace(/\D/g,""),s=t.split(" ")[1].toLowerCase(),r=e.split(":")[0].replace(/^0+/,""),o=e.split(":")[1].replace(/\D/g,""),n=e.split(" ")[1].toLowerCase();return`${i}:${l} ${s} - ${r}:${o} ${n}`},getHours(t,e){const{Hours:i}=t;let l="",s="";return i.mon_close_ind==="N"&&(s+=`<dd>
        <span class="${e}__days">Mon-Thu</span>
        <span class="${e}__time-frame">${this.formatHours(i.mon_start_time,i.mon_end_time)}</span>
      </dd>`),i.fri_close_ind==="N"&&(s+=`<dd>
        <span class="${e}__days">Fri</span>
        <span class="${e}__time-frame">${this.formatHours(i.fri_start_time,i.fri_end_time)}</span>
      </dd>`),i.sat_close_ind==="N"&&(s+=`<dd>
        <span class="${e}__days">Sat</span>
        <span class="${e}__time-frame">${this.formatHours(i.sat_start_time,i.sat_end_time)}</span>
      </dd>`),i.sun_close_ind==="N"&&(s+=`<dd>
        <span class="${e}__days">Sun</span>
        <span class="${e}__time-frame">${this.formatHours(i.sun_start_time,i.sun_end_time)}</span>
      </dd>`),l+=`
      <div class="${e}__dealer-info ${e}__hours">
        <dl>
          <dt>
            <svg>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-t1-dealer-locator-details-clock">
            </svg> Hours of operation
          </dt>
          ${s}
        </dl>
      </div>`,l},getHeader(t,e,i){const{IsPrimary:l,Id:s,Name:r}=t,{Url:o,Display:n}=e,a=this.getVisitorURL(o);let h,d="",p;const m=JSON.stringify(e);return l?(h=`<span>Primary BMW Center</span> ${r}`,d="primary_dealership",p="My Primary Dealer"):(h=r,p="Save as Primary Dealer"),`<header class="${i}__detail-header">
        <div class="${i}__detail-header--content">
          ${h}
        </div>
        <div class="${i}__detail-header--link">
          <span class="icon">
            <svg aria-label="hidden">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-bold-arrow">
            </svg>
          </span>
          <a data-analytics-on-tier-exit="" data-analytics-tier-2='${m}' href="${a}">${n}</a>
        </div>
        <button
          data-id="${s}"
          class="${i}__save-dealer ${d}">
          <span class="icon">
            <svg aria-label="hidden">
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-map-star">
            </svg>
          </span>
          <span class="dealerCopy">${p}</span>
        </button>
      </header>`},getPhone(t,e){const{FormattedPhone:i}=t;let l="";return i.length>0&&(l+=`<div class="${e}__phone-number ${e}__dealer-info">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-phone"></use>
          </svg>
          <a href="tel:${i}">${i}</a>
        </div>`),l},getUrl(t,e){const{Url:i,Name:l}=t;let s="";const r=o=>{const n=o.split(".");return n.length===3?n.slice(1,3).join("."):o.substr(o.indexOf("://")+3)};if(t.Url.length>0){const o=JSON.stringify(t).replace(/'/g,"&apos;"),n=this.getVisitorURL(i);s+=`<div class="${e}__website ${e}__dealer-info">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-website"></use>
          </svg>
          <a data-analytics-on-tier-exit="" data-analytics-tier-3='${o}' href="${n}" target="_blank" title="${l}">
            ${r(i)}
          </a>
        </div>`}return s},getAddress(t,e){const{Address:i,City:l,State:s,ZipCode:r}=t,o=`${i}, ${l}, ${s} ${u.CleanZip(r)}`;let n="",a="";return t.Distance&&(a=`<span class="${e}__distance">
          ${t.Distance} mi
        </span>`),n+=`<div class="${e}__location ${e}__dealer-info">
        <div class="${e}__address">
          <svg>
            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-nav-marker-header"></use>
          </svg>
          <span>
            ${o}
          </span>
        </div>
        ${a}
      </div>`,n},getServices(t,e){const{Services:i}=t;let l="";if(i.length>0){const s=i.map(r=>`<dd>${r}</dd>`);return l+=`
          <div class="${e}__services ${e}__dealer-info">
            <dl>
              <dt>Services Offered</dt>
              ${s.join("")}
            </dl>
          </div>`,l}},getDetailItem(t,e,i){const l=this.getHeader(t,e,i),s=this.getHours(t,i),r=this.getPhone(t,i),o=this.getUrl(t,i),n=this.getAddress(t,i),a=this.getServices(t,i);return`${l}
            <div class="${i}__dealer-business-info">
              ${s}
              ${r}
              ${o}
              ${n}
              ${a}
            </div>`}};var v;new L({el:".filterable-list-view",name:"filterable-list-view Component",events:{},subscriptions:{"window.resizeEnd":"resizeEvt","dealermap.search-results":"initList","dealermap.list-update":"mapMarkerSelectedHandler","dealermap.dealer-view":"dealerViewSetup","dealer.search-results-list":"restartListView","dealer.search-results-pagination":"paginationEvt","filterview.filter":"applyFilter","dealer.dealer-list-clear-toogle":"clearResultsToggleState","dealer.list-reset":"resetPagination","filter.reset-list-view":"resetFilterView",dealerUpdate:"toggleDealershipState"},baseStr:"filterable-list-view",maxSize:u.Breakpoints.getValue("sm","max"),isPhone:((v=u.Breakpoints.current())==null?void 0:v.breakpoint)==="sm",payload:{},pageSize:20,baseFilter:["1","2","6","7"],currentFilter:null,currentPage:0,currentItem:{},currentView:"list",totalPages:0,collection:[],fullCollection:[],allResults:[],showingResults:!0,filteredStatus:{hasFilter:!1,isFiltered:!1,filterId:0},mouseTimeout:null,mapContainer:document.querySelector(".dealer-map__outter-shell"),beforeInit(){this.initList=this.initList.bind(this),this.clearFilterClickEvt=this.clearFilterClickEvt.bind(this),this.listItemClickEvt=this.listItemClickEvt.bind(this),this.primaryDealerHandler=this.primaryDealerHandler.bind(this),this.listItemPrimaryClick=this.listItemPrimaryClick.bind(this),this.listItemMouseover=this.listItemMouseover.bind(this),this.listItemMouseout=this.listItemMouseout.bind(this),this.setPrimaryDealership=this.setPrimaryDealership.bind(this),this.toggleResultsList=this.toggleResultsList.bind(this),this.applyFilter=this.applyFilter.bind(this),this.detailViewClickEvt=this.detailViewClickEvt.bind(this),this.itemList=this.element.querySelector(`${this.el}__list`),this.itemListElement=this.element.querySelector(`${this.el}__dealer-list`),this.detailView=this.element.querySelector(`${this.el}__dealer-details`),this.noResults=this.element.querySelector(`${this.el}__no-results`),this.noResults&&(this.noResultsTitle=this.noResults.querySelector(".filterable-list-view__no-results--content"),this.noResultsMessage=this.noResults.querySelector("p")),this.mapToggle=this.element.querySelector(`${this.el}__map-toggle`),this.content=P(this.element,".dealer-map__outter-shell"),this.pagination=document.querySelector(".dealer-map-pagination"),this.mapViewButton=this.element.querySelector(".filterable-list-view__map-hide"),this.resultViewButton=this.element.querySelector(".filterable-list-view__map-show"),this.mapToggle.addEventListener("click",this.toggleResultsList),this.mapToggle.addEventListener("keyup",t=>{t.key=="Enter"&&this.toggleResultsList}),this.itemListElement.addEventListener("click",this.listItemClickEvt),this.itemListElement.addEventListener("keyup",t=>{t.key=="Enter"&&this.listItemClickEvt(t)}),this.detailView.addEventListener("click",this.detailViewClickEvt)},init(){},updateCollection(t,e=!1){var l;c.setDealerList(t),c.setMaco(t.Maco),this.collection=c.getDealerList();const i=(l=this.collection)==null?void 0:l.length;if(e||(this.currentPage=0),i>this.pageSize){const s=i%this.pageSize,r=Math.floor(i/this.pageSize);this.totalPages=s===0?r-1:r}else this.totalPages=0},initList(t,e){var r,o,n;const{Results:i,Maco:l}=e;let s=!1;if(this.payload=e,this.fullCollection=i,this.allResults=i,this.collectionMaco=l,(e==null?void 0:e.currentSearch)=="singleDealer")this.collection=this.fullCollection,this.fullCollection.length>0&&c.getMacoDataApi(u.CleanZip(this.fullCollection[0].ZipCode)).then(a=>{this.collectionMaco=a,this.showDetail(null,this.fullCollection[0].Id,!1)}).catch(a=>{console.error("Error: Error showing detail",a)});else if(this.fullCollection.length>0&&c.getMacoDataApi(u.CleanZip(this.fullCollection[0].ZipCode)).then(a=>{this.collectionMaco=a}).catch(a=>{console.error("Error: Error showing initlist",a)}),((r=this.fullCollection)==null?void 0:r.length)>0&&(i==null?void 0:i.length)>0){if(((o=this.fullCollection)==null?void 0:o.length)==1){const a=this.fullCollection[0];a.Id||(a.Id="1",this.fullCollection[0]=a)}if(s=this.fullCollection[0]?this.fullCollection[0].Distance>100:!1,this.currentItem=c.getDealer(),s){let a=this.allResults,h=0;a=this.allResults.filter(d=>{if(d.Filters.indexOf(this.filteredStatus.filterId)!=-1)return d.Id=h,h++,d}),(a==null?void 0:a.length)>0?a=a.slice(0,1):a=this.allResults.slice(0,1),this.fullCollection=a}this.updateCollection(this.fullCollection),this.setupList(s)}else((n=this.fullCollection)==null?void 0:n.length)>0?s=this.fullCollection[0]?this.fullCollection[0].Distance>100:!1:(s=this.collection[0]?this.collection[0].Distance>100:!1,PubSub.publish("dealermap.map-reset",!0)),this.setupList(s)},applyFilter(t,e){var l;const{filterId:i}=e;if(((l=this.fullCollection)==null?void 0:l.length)>0){let s=this.fullCollection,r=this.allResults,o=1;parseInt(i)>=1?(this.filteredStatus.hasFilter=!0,this.filteredStatus.isFiltered=!0,this.filteredStatus.filterId=i,s=s.filter(n=>{if(n.Filters.indexOf(i)!=-1&&n.Distance<=100)return n.Id=o,o++,n})):(this.resetFilterView(),s=s.filter(n=>{if(n.Distance<=100)return n.Id=o,o++,n})),s.length<=0?(o=0,r=this.allResults.filter(n=>{if(n.Filters.indexOf(i)!=-1)return n.Id=o,o++,n}),r.length>0?r=r.slice(0,1):r=this.allResults.slice(0,1),this.updateCollection(r),this.noResultsDisplay=!0,this.setupList(!0)):(this.updateCollection(s),this.setupList())}},resetFilterView(){this.filteredStatus.isFiltered&&(this.removeFilterItem(),this.filteredStatus.hasFilter=!1,this.filteredStatus.isFiltered=!1,this.filteredStatus.filterId=0)},showFilterItem(){const t=this.isPhone?this.itemListElement:this.itemList,e=t.children[0],i=f.filter(this.filteredStatus,this.baseStr,this.isPhone);i.querySelector("button").addEventListener("click",this.clearFilterClickEvt),e&&e.classList.contains(`${this.baseStr}__filter-info`)&&this.removeFilterItem(),t.insertBefore(i,t.firstChild)},removeFilterItem(){const t=this.isPhone?this.itemListElement:this.itemList,e=t.children[0];e.removeEventListener("click",this.clearFilterClickEvt),t.removeChild(e)},restartListView(){this.resetFilterView(),this.setupList(),this.collection[0].Distance>100&&(this.noResultsDisplay=!0),this.showList()},addListListeners(){document.querySelectorAll(".filterable-list-view__dealer").forEach(t=>{t.addEventListener("mouseover",this.listItemMouseover),t.addEventListener("mouseout",this.listItemMouseout)})},removeListListeners(){document.querySelectorAll(".filterable-list-view__dealer").forEach(t=>{t.removeEventListener("mouseover",this.listItemMouseover),t.removeEventListener("mouseout",this.listItemMouseout)})},addListPrimaryListeners(){document.querySelectorAll(".filterable-list-view__primary-dealership").forEach(t=>t.addEventListener("click",this.primaryDealerHandler))},setupList(t=!1,e=!1){let i={center:this.payload.Center,currentSearch:this.payload.currentSearch,points:[]};i.center&&i.currentSearch?localStorage.setItem("centralPoint",JSON.stringify(i)):i=this.getCenterDataFromStorage(i);const l=this.currentPage*this.pageSize;let s=(this.currentPage+1)*this.pageSize-1,r=1;if(this.removeListListeners(),this.filteredStatus.isFiltered==!1&&this.filteredStatus.hasFilter==!1){let a=this.collection.map(h=>{let d=!1;if(h.Filters.forEach((p,m)=>{this.baseFilter.includes(p)&&(d=!0)}),d&&h.Distance<=100)return h.Id=r,r++,h});a=a.filter(h=>h!=null),a.length>0&&this.updateCollection(a,e)}else if(this.filteredStatus.hasFilter){const a=this.collection.map(h=>{if(h.Filters.includes(this.filteredStatus.filterId))return h.Id=r,r++,h});this.updateCollection(a.filter(h=>h!=null),e)}s>this.collection.length&&(s=this.collection.length-1);const n=this.collection.slice(l,s+1).map((a,h)=>{if(a)return i.points.push(this.generateMapCoordinate(a,h+l)),f.getListItem(a,this.baseStr)}).join("");if(PubSub.publish("dealermap.map-update",i),this.itemListElement.innerHTML=n,S.buildTooltips(),this.currentPage*this.pageSize,t||i.points==0)this.showPagination=!1,this.noResultsDisplay=!0,this.showList(),this.itemListElement.parentNode.classList.add(`${this.baseStr}__list-holder--bottom-align`);else{this.showPagination=!0,this.noResultsDisplay=!1,this.itemListElement.parentNode.classList.remove(`${this.baseStr}__list-holder--bottom-align`),PubSub.publish("dealer.pagination-num",{min:l+1,max:s+1,total:this.totalPages,results:this.collection.length});const a=this.element.querySelector(`${this.el}__noresut`);a&&a.parentNode.removeChild(a),this.showList()}},getCenterDataFromStorage(t){let e=null;return!t.center&&!t.currentSearch&&(e=JSON.parse(localStorage.getItem("centralPoint")),e&&(t.center=e.center,t.currentSearch=e.currentSearch)),t},detailViewClickEvt(t){const e=t.target,i="primary_dealership";e.matches(`${this.el}__save-dealer`)&&(e.classList.contains(i)?c.removePrimaryDealer(c.getDealer().UniqueID):(this.setPrimaryDealership(e.dataset.id,e),u.cookies.set("user_zipcode",this.currentItem.ZipCode,null,"/")))},getDealerById(t){const e=parseInt(t);return this.collection&&this.collection.length===0&&c.getDealerList().forEach(i=>this.collection.push(i)),this.collection.find(i=>i.Id===e)},setLocalDealership(t){this.currentItem=this.getDealerById(t),c.setDealerList(this.collection),c.setLocalDealer(this.currentItem.UniqueID,this.collectionMaco)},setPrimaryDealership(t,e){this.currentItem=this.getDealerById(t),c.setDealerList(this.collection),c.setPrimaryDealer(this.currentItem.UniqueID,this.collectionMaco),PubSub.publish("nav.dealerSet",this.currentItem),PubSub.publish("dealermap.primarydealership-selected"),PubSub.publish("dtmPrimaryDealershipSelected",{dealer:this.currentItem,maco:this.collectionMaco}),PubSub.publish("dealermap.dealer-primary-toggle",{primary:!0,dealer:this.currentItem,maco:this.collectionMaco,payload:this.collection})},toggleDealershipState(t,e){this.currentView==="list"?this.togglePrimaryDealershipListView(e):this.currentView==="detail"&&this.togglePrimaryDealershipDetailView(e)},togglePrimaryDealershipListView(t){const e="primary",i=this.itemListElement.querySelector(`.${e}`),l=this.itemListElement.querySelector(`${this.el}__primary-dealership[data-id='${t.dealer.Id}']`);let s;i!=null&&(i.classList.remove(e),s=i.querySelector("span"),s&&s.setAttribute("title",s.dataset.titleadd)),i!=l&&(l.classList.add(e),s=l.querySelector("span"),s&&s.setAttribute("title",s.dataset.titleremove),PubSub.publish("dealermap.primarydealership-selected"))},togglePrimaryDealershipDetailView(t){const e="primary_dealership",i=document.querySelector(`${this.el}__save-dealer`),l=i.querySelector("span.dealerCopy");t.dealer.IsPrimary?(i.classList.add(e),l.innerHTML="My Primary Dealer",PubSub.publish("dealermap.primarydealership-selected")):i.classList.contains(e)&&(i.classList.remove(e),l.innerHTML="Save as Primary Dealer")},populateDetailView(){if(this.collectionMaco.Code==="")c.getMacoDataApi(u.CleanZip(this.currentItem.ZipCode)).then(t=>{this.collectionMaco=t;const e=f.getDetailItem(this.currentItem,this.collectionMaco,this.baseStr);this.detailView.innerHTML=e}).catch(t=>{console.error("Error: Error getting populated detail view",t)});else{const t=f.getDetailItem(this.currentItem,this.collectionMaco,this.baseStr);this.detailView.innerHTML=t}},generateMapCoordinate(t,e){return{lat:t.LonLat.Lat,lng:t.LonLat.Lon,type:t.IsPrimary==!0?"primary":"default",img:t.GoogleMapsUrl,id:t.Id,index:e,distance:t.Distance}},mapMarkerSelectedHandler(t,e){this.setLocalDealership(e),this.showDetail(t,e)},dealerViewSetup(t,e){const{Maco:i,payload:l,dealer:s}=e;this.fullCollection=l,this.collectionMaco=i,this.showDetail(null,s[0].Id,!0)},showDetail(t,e,i=!1){this.currentView="detail",this.currentItem=this.getDealerById(e);const l=this.generateMapCoordinate(this.currentItem),s={center:this.payload.Center,points:[l]};PubSub.publishSync("mapcomponent.map-update-detail",s),this.populateDetailView(),this.itemList.classList.remove(`${this.baseStr}__dealers--active`),this.detailView.classList.add(`${this.baseStr}__dealer-details--active`),this.noResults.classList.remove(`${this.baseStr}__no-results--active`),this.isPhone&&(this.toggleDisplayMapIcon(),this.toggleDisplayMapTabIndex(!0),PubSub.publish("dealer.detail-veiw-mobile",!0)),i?PubSub.publish("dealer.detail-new-search"):PubSub.publish("dealer.detail-veiw"),PubSub.publish("dealer.pagination-hide"),PubSub.publish("map.set-trap-focus","detail")},showList(){var e;this.currentView="list",this.itemListElement.classList.remove(`${this.baseStr}-list-items--hide`),this.itemList.classList.add(`${this.baseStr}__dealers--active`),this.detailView.classList.remove(`${this.baseStr}__dealer-details--active`),this.isPhone?(this.toggleDisplayMapIcon(!0),this.toggleDisplayMapTabIndex(!1),PubSub.publish("dealer.detail-veiw-mobile",!1)):this.addListListeners(),this.addListPrimaryListeners(),this.filteredStatus.isFiltered;const t={center:this.payload.Center,currentSearch:this.payload.currentSearch,points:[]};((e=this.collection)==null?void 0:e.length)>0&&this.collection.forEach((i,l)=>{i&&t.points.push(this.generateMapCoordinate(i,l))}),this.noResultsDisplay?(this.noResultsTitle.classList.add(`${this.baseStr}__title--active`),this.noResults.classList.add(`${this.baseStr}__no-results--active`),PubSub.publish("dealermap.no-results",t),PubSub.publish("dealer.pagination-hide")):(this.noResultsTitle.classList.remove(`${this.baseStr}__title--active`),this.noResults.classList.remove(`${this.baseStr}__no-results--active`),PubSub.publish("dealermap.no-results",!1)),this.filteredStatus.isFiltered&&this.filteredStatus.filterId!=0&&this.showFilterItem(),this.showPagination&&PubSub.publish("dealer.pagination-display"),PubSub.publish("map.set-trap-focus","result")},showNoResults(){this.showingResults=!1,this.itemListElement.classList.add(`${this.baseStr}-list-items--hide`),this.noResultsTitle.classList.remove(`${this.baseStr}__title--active`),this.detailView.classList.remove(`${this.baseStr}__dealer-details--active`),this.noResults.classList.add(`${this.baseStr}__no-results--active`)},resetPagination(t){this.currentPage=0,PubSub.publish("dealer.pagination-disabled","prev"),this.totalPages>0&&PubSub.publish("dealer.pagination-enable","next")},paginationEvt(t,e){e==="prev"&&this.currentPage>0?(this.currentPage--,this.element.querySelector(".filterable-list-view__dealer > div").focus(),PubSub.publish("dealer.pagination-clear-disabled"),this.setupList(!1,!0),this.currentPage===0&&PubSub.publish("dealer.pagination-disabled","prev")):e==="prev"&&this.currentPage<=0&&PubSub.publish("dealer.pagination-disabled","prev"),e==="next"&&this.currentPage<this.totalPages?(this.currentPage++,this.element.querySelector(".filterable-list-view__dealer > div").focus(),PubSub.publish("dealer.pagination-clear-disabled"),this.setupList(!1,!0),this.currentPage===this.totalPages&&PubSub.publish("dealer.pagination-disabled","next")):e==="next"&&this.currentPage>=this.totalPages&&PubSub.publish("dealer.pagination-disabled","next "),PubSub.publish("map.set-trap-focus")},listItemClickEvt(t){const e=t.target.matches(`${this.el}__icon`)?t.target.parentNode:t.target;let i;e.matches(`${this.el}__dealer`)&&(i=e.children[0].dataset.id,this.setLocalDealership(i),this.showDetail(null,i),document.querySelector(".filterable-list-view__detail-header a").focus()),t.target.matches(`${this.el}__item`)&&(i=t.target.dataset.id,this.setLocalDealership(i),this.showDetail(null,i),document.querySelector(".filterable-list-view__detail-header a").focus())},primaryDealerHandler(t){const e=t.target.classList.contains("primary")?null:t.target.dataset.id;t.target.classList.contains("primary")?c.removePrimaryDealer(this.getDealerById(t.target.dataset.id).UniqueID):this.listItemPrimaryClick(e,t.target.dataset.id)},clearFilterClickEvt(t){this.filteredStatus.hasFilter=!1,this.filteredStatus.isFiltered=!1,this.filteredStatus.filterId=0,this.applyFilter(null,{filterId:0}),this.removeFilterItem(),PubSub.publish("filterlist.clear-filter")},listItemPrimaryClick(t,e){this.setPrimaryDealership(t)},listItemMouseover(t){clearTimeout(this.mouseTimeout),this.mouseTimeout=setTimeout(()=>{const e=t.target.querySelector(".filterable-list-view__item");if(e){const i=e.dataset.id;PubSub.publish("mapcomponent.marker-hover",i)}},100)},listItemMouseout(t){clearTimeout(this.mouseTimeout),this.mouseTimeout=setTimeout(()=>{t.target.querySelector(".filterable-list-view__item")&&PubSub.publish("mapcomponent.marker-hover",-1)},100)},toggleDisplayMapIcon(t=!1){const e=`${this.baseStr}__map-toggle--active-display`;t&&this.mapToggle?this.mapToggle.classList.add(e):(this.clearResultsToggleState(null),PubSub.publish("dealer.toggleListView",{top:"",overflow:""}),this.mapToggle&&this.mapToggle.classList.remove(e))},toggleDisplayMapTabIndex(t){t?(this.mapViewButton.tabIndex=-1,this.resultViewButton.tabIndex=-1,this.mapViewButton.removeAttribute("tab-index"),this.resultViewButton.removeAttribute("tab-index")):this.showingResults?(this.mapViewButton.tabIndex=0,this.resultViewButton.tabIndex=-1,this.resultViewButton.removeAttribute("tab-index")):(this.mapViewButton.tabIndex=-1,this.resultViewButton.tabIndex=0,this.mapViewButton.removeAttribute("tab-index"))},toggleResultsList(t){const e=t.currentTarget,i=e.offsetHeight,l=this.showPagination?this.pagination.offsetHeight:0,s=getComputedStyle(document.documentElement).getPropertyValue("--viewportHeight")||"100vh";PubSub.publish("dealer.toggleListView",{top:this.showingResults?`calc(${s} - ${i+l}px)`:"",overflow:this.showingResults?"hidden":"",paginationH:i+l}),e.classList.toggle(`${this.baseStr}__map-toggle--active`),this.showingResults=!this.showingResults,this.toggleDisplayMapTabIndex(!1),PubSub.publish("map.set-trap-focus","result")},clearResultsToggleState(t){this.mapToggle&&this.mapToggle.classList.remove(`${this.baseStr}__map-toggle--active`),this.showingResults=!0},resizeEvt(t,e){this.isPhone&&(e==null?void 0:e.width)>this.maxSize?(this.isPhone=!1,this.toggleDisplayMapIcon()):!this.isPhone&&(e==null?void 0:e.width)<=this.maxSize&&(this.isPhone=!0,this.currentView!=="detail"?this.toggleDisplayMapIcon(!0):this.addListListeners())}});

</script>

</body>
</html>
