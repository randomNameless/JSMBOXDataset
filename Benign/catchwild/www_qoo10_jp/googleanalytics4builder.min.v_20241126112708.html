<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>googleanalytics4builder.min.v_20241126112708.html</title>
</head>
<body>

<script>
// (c)2021 eBay Japan

let ga4Load={GTM:true,GA:true,isAPP:DeviceUtil.isApp(),isAndroidApp:DeviceUtil.isAndroidApp(),isIOSApp:DeviceUtil.isIOSApp()};let commonData={};let virCommonData={};window.dataLayer=window.dataLayer||[];GA4EcommerceStepKey=new Object();GA4EcommerceStepKey.AddToWishlist='add_to_wishlist';GA4EcommerceStepKey.Expose='expose';GA4EcommerceStepKey.ViewItem='view_item';GA4EcommerceStepKey.SelectItem='select_item';GA4EcommerceStepKey.AddToCart='add_to_cart';GA4EcommerceStepKey.Remove='remove';GA4EcommerceStepKey.RemoveFromCart='remove_from_cart';GA4EcommerceStepKey.BeginCheckout='begin_checkout';GA4EcommerceStepKey.AddPaymentInfo='add_payment_info';GA4EcommerceStepKey.Purchase='purchase';GA4EcommerceStepKey.Refund='refund';function removeEmptyElement(removeValue){let returnValue={};for(key in removeValue){if(removeValue[key]===''||removeValue[key]===null||removeValue[key]===undefined){delete removeValue[key];}}
returnValue=removeValue;return returnValue;}
function resetDataLayer(targetObject){let setGTM={};for(var key in targetObject){setGTM[key]=undefined;}
return dataLayer.push(setGTM);}
function GA4_Init(GAInfo){try{if(!ga4Load.APP){if(browserVersionCheck==='MSIE 5'||browserVersionCheck==='MSIE 6'||browserVersionCheck==='MSIE 7'||browserVersionCheck==='MSIE 8'){ga4Load.GTM=false;}
if(ga4Load.GTM){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer',GTMcode);}
if(ga4Load.GA){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');}}}catch(e){console.log('function GA_Init - '+e);}}
function hybrid(object,isVirtual){try{let pageData=isVirtual?virCommonData:commonData;let GAData=Object.assign({},pageData,object);ga4Load.isAndroidApp?window.ebaygascriptAndroid.GA4_DATA(JSON.stringify(GAData)):webkit.messageHandlers.ebaygascriptCallbackHandler.postMessage(JSON.stringify(GAData));}catch(e){console.log('hybrid 함수 ERROR');console.log(e.message);}}
function sendGAPage(object){try{GA4_Init();if(typeof(object)=='undefined'||object==null)
object=getGA4CommonData();object=removeEmptyElement(object);commonData=Object.assign({},object);if(ga4Load.isAPP){return;}else{object.event='ga_page';dataLayer.push(object);}}catch(e){console.log('sendGAPage 함수 ERROR');console.log(e.message);}}
function sendGAVirPage(virObject){try{if(typeof(commonData)=='undefined'||commonData==null||Object.keys(commonData).length==0)
commonData=removeEmptyElement(getGA4CommonData());for(key in commonData){if(typeof virObject[key]=='undefined')
virObject[key]=commonData[key];}
virObject=removeEmptyElement(virObject);virCommonData=Object.assign({},virObject);if(ga4Load.isAPP){virObject.type='P';hybrid(virObject,true);}else{virObject.event='ga_virtual';dataLayer.push(virObject);resetDataLayer(virObject);}}catch(e){console.log('sendVirPage 함수 ERROR');console.log(e.message);}}
function sendGAEvent(object,isVirtual){try{if(typeof(isVirtual)=='undefined'||isVirtual==null)isVirtual=false;let GAData=removeEmptyElement(object);if(ga4Load.isAPP){GAData.type='E';hybrid(GAData,isVirtual);}else{GAData.event='ga_event';if(isVirtual)GAData=Object.assign({},virCommonData,GAData);dataLayer.push(GAData);resetDataLayer(GAData);}}catch(e){console.log('sendGAEvent 함수 ERROR');console.log(e.message);}}
function sendGAAttrEvent(event,isVirtual){try{if(typeof(isVirtual)=='undefined'||isVirtual==null)isVirtual=false;const ELE=event.currentTarget;const ATTR=ELE.getAttributeNames();let GAData={};for(var i=0;i<ATTR.length;i++){if(ATTR[i].includes('ep_')){GAData[ATTR[i]]=ELE.getAttribute(ATTR[i]);}}
GAData['event_name']=ELE.getAttribute('event_name');if(ga4Load.isAPP){GAData.type='E';hybrid(GAData,isVirtual);}else{GAData.event='ga_event';if(isVirtual)GAData=Object.assign({},virCommonData,GAData);dataLayer.push(GAData);resetDataLayer(GAData);}}catch(e){console.log('sendGAAttrEvent 함수 ERROR');console.log(e.message);}}
function sendGAEcommerce(eventData,transaction,items,isVirtual){try{let GAData;eventData=removeEmptyElement(eventData);if(eventData.ep_event_area!=eventData.event_name)eventData.ep_event_area=eventData.event_name;transaction=removeEmptyElement(transaction);if(typeof(commonData)=='undefined'||commonData==null||Object.keys(commonData).length==0)
commonData=removeEmptyElement(getGA4CommonData());for(var i=0;i<items.length;i++){items[i]=removeEmptyElement(items[i]);var temp_item_list_name=setExternalUrl(items[i].ip_product_pagescreenviews);if(temp_item_list_name!='')
items[i].item_list_name=temp_item_list_name;if(typeof(items[i].ip_product_pagescreenviews)!='undefined'&&typeof(items[i].item_list_name)!='undefined')
items[i].ip_screen_productlist=items[i].ip_product_pagescreenviews+'&'+items[i].item_list_name;if(typeof(items[i].ip_slot_id)=='undefined'||!Number.isInteger(Number(items[i].ip_slot_id)))
items[i].ip_slot_id=-1;if(items[i].ip_product_pagescreenviews=='directurl'&&items[i].item_list_name!='external_directurl')
Public.WriteScriptError("not matched pagescreenviews, item_list_name",window.location.href,"sendGAEcommerce","223","Info","items[i].item_list_name : "+items[i].item_list_name+", items[i].ip_product_pagescreenviews:"+items[i].ip_product_pagescreenviews);}
if(eventData.event_name==GA4EcommerceStepKey.Purchase){var ga_contrno_list=Util.getCookie("GA_CONTRNO_LIST");if(ga_contrno_list.length>0){var temp_contr_list=[];var temp_dup_list=[];for(var i=0;i<items.length;i++){var temp_ga_contr_no=items[i].item_category5;if(ga_contrno_list.indexOf(temp_ga_contr_no)>-1)
temp_dup_list.push(temp_ga_contr_no);else
temp_contr_list.push(temp_ga_contr_no);}
if(temp_contr_list.length>0){var temp_str=temp_contr_list.join(',')+','+ga_contrno_list;temp_str=temp_str.split(',').slice(0,30).join(',');Util.setCookie("GA_CONTRNO_LIST",temp_str,Public.getCookieDomain(),3);}
if(temp_dup_list.length>0){Public.WriteScriptError("GA4 Purchase Event Duplicate",window.location.href,"sendGAEcommerce","264","Info","ga_contrno_list(cookie) : "+ga_contrno_list+", event_contrno:"+temp_dup_list.join(',')+", mobile_os:"+(DeviceUtil.isMobile()?(DeviceUtil.isIOS()?'IOS':'Android'):'')+", channel:"+(DeviceUtil.isMobile()?(DeviceUtil.isApp()?'APP':'MOWEB'):'PCWEB'));return;}}
else{var event_contrno=items.map(u=>u.item_category5).join(',');Util.setCookie("GA_CONTRNO_LIST",event_contrno,Public.getCookieDomain(),3);}}
if(ga4Load.isAPP){GAData=Object.assign({},eventData,{transaction,items,type:'E'});if(!((DeviceUtil.isAndroidApp()&&DeviceUtil.getWebAppVersion()>'5.2.2')||(DeviceUtil.isAndroidMoveApp()&&DeviceUtil.getWebAppVersion()>'1.1.5')||(DeviceUtil.isIOSApp()&&DeviceUtil.getWebAppVersion()>'4.9.4')||(DeviceUtil.isIPhoneMoveApp()&&DeviceUtil.getWebAppVersion()>'1.1.1'))){if(GAData.event_name==GA4EcommerceStepKey.Expose)return;}
hybrid(GAData,isVirtual);}else{GAData=Object.assign({},{event:'ga_ecommerce'},eventData,{ecommerce:Object.assign({},transaction,{items})});GAData=(isVirtual)?Object.assign({},virCommonData,GAData):Object.assign({},commonData,GAData);sendDataLake(GAData);if(GAData.event_name==GA4EcommerceStepKey.Expose)return;dataLayer.push(GAData);resetDataLayer(GAData);}}catch(e){Public.WriteScriptError("GA Event sendGAEcommerce 함수 ERROR",window.location.href,"sendGAEcommerce","242","Error","exception : "+e.message+", eventData:"+JSON.stringify(eventData)+", items : "+JSON.stringify(items));console.log(e.message);}}
function sendDataLake(data){var DataLakeObj=Object.assign({},data);try{DataLakeObj.channel=(DeviceUtil.isMobile()?(DeviceUtil.isApp()?'APP':'MOWEB'):'PCWEB');DataLakeObj.mobile_os=(DeviceUtil.isMobile()?(DeviceUtil.isIOS()?'IOS':'Android'):'');DataLakeObj.useragent=window.navigator.userAgent;DataLakeObj.timestamp=getTimeStamp();DataLakeObj.url=window.location.href;DataLakeObj.up_cid=getCid();var str_json=JSON.stringify(DataLakeObj);var param=new RMSParam();param.add("queueName","GADATA_WEB");param.add("jsonData",str_json);RMSHelper.asyncCallWebMethod(Public.getServiceUrl("swe_AjaxLoggingService.asmx"),"SendToDatalake",param.toJson(true),function(result,svc,methodName,xmlHttpasync){},true);}catch(ex){console.log('sendDataLake 함수 ERROR');console.log(e.message);}}
function getGA4CommonData(){try{let ga4_CommonData={};let temp_user_data=Util.getCookie("GA_COMMON_DATA");let temp_user_id,temp_user_gender,temp_user_age,temp_user_grade,temp_user_login,temp_user_signup_date;if(temp_user_data!=''&&Public.isLogin()){var arr=temp_user_data.split("||");temp_user_id=arr[0];temp_user_gender=arr[2];temp_user_age=arr[3];temp_user_grade=arr[4];temp_user_signup_date=arr[5];}
let temp_search_keyword=(window.ga_search_keyword&&ga_search_keyword!='')?ga_search_keyword:'';if(temp_search_keyword.endsWith(" "))temp_search_keyword=temp_search_keyword.substring(0,temp_search_keyword.length-1);if(temp_search_keyword.endsWith("%20"))temp_search_keyword=temp_search_keyword.substring(0,temp_search_keyword.length-3);let temp_catalog_no=((_page_screen_name=='catalog_goods_goods'&&typeof(qs["catalogno"])!='undefined')?qs["catalogno"]:'');let temp_page_moveyn=(window.location.href.toLowerCase().indexOf('/move/')>-1?"Y":"N");let temp_page_site_type=(DeviceUtil.isMoveApp()?"MOVE":"Qoo10");let temp_page_slot=UriUtil.parseQueryString("slot_id","",location.href)
ga4_CommonData={title:_page_screen_name,page_url:window.location.href,ep_page_url:(window.location.href.toLowerCase().indexOf("mobile/my/appviewtoday.aspx")>-1?"":window.location.href),up_uid:temp_user_id,up_gender:temp_user_gender,up_age:temp_user_age,up_grade:temp_user_grade,up_signupdate:temp_user_signup_date,up_searchin_flowcheck:Util.getCookie("searchinflowcheck"),up_affiliate_jaehuid:Util.getCookie("jaehu_id"),up_affiliate_groupid:Util.getCookie("affiliate_group_id"),up_affiliate_companycd:Util.getCookie("affiliate_co_code"),ep_page_loginyn:(Public.isLogin()?'Y':'N'),ep_etc_lastviewgoods:(Util.getCookie("lastViewGoods").split(":").length>1?Util.getCookie("lastViewGoods").split(":")[0]:""),ep_channel_type:(DeviceUtil.isApp()?'APP':(DeviceUtil.isMobile()?"MOWEB":"PCWEB")),ep_channel_language:GMKT.ServiceInfo.ClientLang,ep_search_keyword:temp_search_keyword,ep_search_type:((window.ga_search_type)?ga_search_type:''),ep_search_result:((window.ga_search_result)?ga_search_result:''),ep_etc_catalog_no:temp_catalog_no,ep_page_sid:UriUtil.parseQueryString("sid","",location.href),ep_page_moveyn:temp_page_moveyn,ep_page_site_type:temp_page_site_type,ep_page_slot:temp_page_slot};return ga4_CommonData;}catch(e){console.log('function getGA4CommonData - '+e);}}
function getGA4CommonDataForApp(){let ga4_CommonData=new Object();try{ga4_CommonData=getGA4CommonData();if(ga4_CommonData.hasOwnProperty('ep_etc_lastviewgoods'))delete ga4_CommonData["ep_etc_lastviewgoods"];if(ga4_CommonData.hasOwnProperty('ep_search_keyword'))delete ga4_CommonData["ep_search_keyword"];if(ga4_CommonData.hasOwnProperty('ep_search_type'))delete ga4_CommonData["ep_search_type"];if(ga4_CommonData.hasOwnProperty('ep_search_result'))delete ga4_CommonData["ep_search_result"];if(ga4_CommonData.hasOwnProperty('page_url'))delete ga4_CommonData["page_url"];if(ga4_CommonData.hasOwnProperty('ep_etc_catalog_no'))delete ga4_CommonData["ep_etc_catalog_no"];if(ga4_CommonData.hasOwnProperty('ep_page_sid'))delete ga4_CommonData["ep_page_sid"];if(ga4_CommonData.hasOwnProperty('ep_page_slot'))delete ga4_CommonData["ep_page_slot"];}catch(e){console.log('function GetGA4CommonDataForApp - '+e);}
return ga4_CommonData;}
function setExternalUrl(temp_page_screen_name){if(typeof(temp_page_screen_name)!='undefined'&&temp_page_screen_name!=null&&temp_page_screen_name.length>0){if(temp_page_screen_name=='external_url'||temp_page_screen_name.startsWith('external_url')){if(temp_page_screen_name.indexOf('qsm')>-1)
return'external_qsm';else if(temp_page_screen_name.indexOf('admin')>-1)
return'external_admin';else
return'external_othersite';}
else if(temp_page_screen_name=='push')
return'external_push';else if(temp_page_screen_name=='directurl')
return'external_directurl';else if(temp_page_screen_name.indexOf('valuecommerce(')>-1)
return'external_othersite';}
return'';}
function GA_Event(_category,_action,_label,isVirtual){try{if(typeof(isVirtual)=='undefined'||isVirtual==null)isVirtual=false;let eventObj={event_name:'click_event',ep_event_page:_category,ep_event_area:_action,ep_event_label:_label};sendGAEvent(eventObj,isVirtual)}catch(e){console.log('function GA_Event - '+e);}}
function GA_Event_Call(_category,_action,_label){GA_Event(_category,_action,_label);}
function GetGAPageScreenName(){if(typeof(_page_screen_name)!="undefined"&&_page_screen_name!=null&&_page_screen_name.length>0)
return _page_screen_name;else
return"";}
function IsPossibleSendGA(){var ret=false;try{if(typeof ga!=='undefined'&&ga.hasOwnProperty('loaded')&&ga.loaded===true){ret=true;}}catch(e){console.log('function IsPossibleSendGA - '+e);}
return ret;}
function getTimeStamp(){var curr_time=new Date();var utc_time=curr_time.getTime()+(curr_time.getTimezoneOffset()*60*1000);var jp_time_diff=9*60*60*1000;var jp_curr=new Date(utc_time+jp_time_diff);var s=leadingZeros(jp_curr.getFullYear(),4)+'-'+
leadingZeros(jp_curr.getMonth()+1,2)+'-'+
leadingZeros(jp_curr.getDate(),2)+' '+
leadingZeros(jp_curr.getHours(),2)+':'+
leadingZeros(jp_curr.getMinutes(),2)+':'+
leadingZeros(jp_curr.getSeconds(),2);return s;}
function leadingZeros(n,digits){var zero='';n=n.toString();if(n.length<digits){for(i=0;i<digits-n.length;i++)
zero+='0';}
return zero+n;}
if(!String.prototype.endsWith){String.prototype.endsWith=function(searchString,position){var subjectString=this.toString();if(typeof position!=='number'||!isFinite(position)||Math.floor(position)!==position||position>subjectString.length){position=subjectString.length;}
position-=searchString.length;var lastIndex=subjectString.indexOf(searchString,position);return lastIndex!==-1&&lastIndex===position;};}
</script>

</body>
</html>
