<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ngBraze.242dbbcff34702800647.html</title>
</head>
<body>

<script>
var nuglif;!function(){"use strict";var t={804:function(t,e,i){i.d(e,{j:function(){return s},w:function(){return n}});const n={CustomEvent:"ce",Pr:"p",xu:"pc",vc:"ca",Ua:"i",Ms:"ie",M:"cci",R:"ccic",I:"ccc",F:"ccd",kl:"ss",xl:"se",Xe:"si",Ve:"sc",We:"sbc",Cc:"sfe",po:"iec",Pu:"lr",Mu:"uae",O:"ci",$:"cc",Ou:"lcaa",Nu:"lcar",On:"inc",Ln:"add",Rn:"rem",$n:"set",Bn:"ncam",Uu:"sgu",Fr:"ffi"},s={Br:"feed_displayed",Ec:"content_cards_displayed"}},5675:function(t,e){const i={W:function(){const t=(t=!1)=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}};e.A=i},858:function(t,e,i){i.d(e,{A:function(){return n}});class n{constructor(t,e){this.database=t,this.dd=e,this.parent="undefined"==typeof window?self:window,this.database=t,this.dd=e}ud(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var t;try{if(null==this.ud())return!1;{const e=null===(t=this.ud())||void 0===t?void 0:t.open("Braze IndexedDB Support Test");if(e&&(e.onupgradeneeded=()=>e.result.close(),e.onsuccess=()=>e.result.close()),"undefined"!=typeof window){const t=window,e=t.chrome||t.browser||t.fd;if(e&&e.runtime&&e.runtime.id)return this.dd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(t){return this.dd.info("Not using IndexedDB for storage due to following error: "+t),!1}}ad(t,e){var i;const n=null===(i=this.ud())||void 0===i?void 0:i.open(this.database.vd,this.database.VERSION);if(null==n)return"function"==typeof e&&e(),!1;const s=this;return n.onupgradeneeded=t=>{var e;s.dd.info("Upgrading indexedDB "+s.database.vd+" to v"+s.database.VERSION+"...");const i=null===(e=t.target)||void 0===e?void 0:e.result;for(const t in s.database.ss){const e=t;s.database.ss.hasOwnProperty(t)&&!i.objectStoreNames.contains(s.database.ss[e])&&i.createObjectStore(s.database.ss[e])}},n.onsuccess=i=>{var n;const r=null===(n=i.target)||void 0===n?void 0:n.result;r.onversionchange=()=>{r.close(),"function"==typeof e&&e(),s.dd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(r)},n.onerror=t=>{var i;const n=t;return s.dd.info("Could not open indexedDB "+s.database.vd+" v"+s.database.VERSION+": "+(null===(i=n.target)||void 0===i?void 0:i.errorCode)),"function"==typeof e&&e(),!0},!0}setItem(t,e,i,n,s){if(!this.isSupported())return"function"==typeof s&&s(),!1;const r=this;return this.ad((o=>{if(!o.objectStoreNames.contains(t))return r.dd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.vd+" - "+t+" is not a valid objectStore"),"function"==typeof s&&s(),void o.close();const a=o.transaction([t],"readwrite");a.oncomplete=()=>o.close();const l=a.objectStore(t).put(i,e);l.onerror=()=>{r.dd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.vd),"function"==typeof s&&s()},l.onsuccess=()=>{"function"==typeof n&&n()}}),s)}getItem(t,e,i){if(!this.isSupported())return!1;const n=this;return this.ad((s=>{if(!s.objectStoreNames.contains(t))return n.dd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+n.database.vd+" - "+t+" is not a valid objectStore"),void s.close();const r=s.transaction([t],"readonly");r.oncomplete=()=>s.close();const o=r.objectStore(t).get(e);o.onerror=()=>{n.dd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+n.database.vd)},o.onsuccess=t=>{var e;const n=null===(e=t.target)||void 0===e?void 0:e.result;null!=n&&i(n)}}))}jr(t,e,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;const n=this;return this.ad((s=>{if(!s.objectStoreNames.contains(t))return n.dd.error("Could not retrieve last record from "+t+" on indexedDB "+n.database.vd+" - "+t+" is not a valid objectStore"),"function"==typeof i&&i(),void s.close();const r=s.transaction([t],"readonly");r.oncomplete=()=>s.close();const o=r.objectStore(t).openCursor(null,"prev");o.onerror=()=>{n.dd.error("Could not open cursor for "+t+" on indexedDB "+n.database.vd),"function"==typeof i&&i()},o.onsuccess=t=>{var n;const s=null===(n=t.target)||void 0===n?void 0:n.result;null!=s&&null!=s.value&&null!=s.key?e(s.key,s.value):"function"==typeof i&&i()}}),i)}re(t,e){if(!this.isSupported())return!1;const i=this;return this.ad((n=>{if(!n.objectStoreNames.contains(t))return i.dd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.vd+" - "+t+" is not a valid objectStore"),void n.close();const s=n.transaction([t],"readwrite");s.oncomplete=()=>n.close(),s.objectStore(t).delete(e).onerror=()=>{i.dd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.vd)}}))}Zt(t,e){if(!this.isSupported())return!1;const i=this;return this.ad((n=>{if(!n.objectStoreNames.contains(t))return i.dd.error("Could not retrieve objects from "+t+" on indexedDB "+i.database.vd+" - "+t+" is not a valid objectStore"),void n.close();const s=n.transaction([t],"readwrite");s.oncomplete=()=>n.close();const r=s.objectStore(t),o=r.openCursor(),a=[];o.onerror=()=>{a.length>0?(i.dd.info("Cursor closed midway through for "+t+" on indexedDB "+i.database.vd),e(a)):i.dd.error("Could not open cursor for "+t+" on indexedDB "+i.database.vd)},o.onsuccess=t=>{var i;const n=null===(i=t.target)||void 0===i?void 0:i.result;null!=n?(null!=n.value&&null!=n.key&&(r.delete(n.key).onsuccess=()=>{a.push(n.value)}),"function"==typeof n.continue&&n.continue()):a.length>0&&e(a)}}))}clearData(){if(!this.isSupported())return!1;const t=[];for(const e in this.database.ss){const i=e;this.database.ss.hasOwnProperty(e)&&this.database.ss[i]!==this.database.ss.ae&&t.push(this.database.ss[i])}const e=this;return this.ad((function(i){const n=i.transaction(t,"readwrite");n.oncomplete=()=>i.close();for(let i=0;i<t.length;i++){const s=t[i];n.objectStore(s).clear().onerror=function(){e.dd.error("Could not clear "+this.source.name+" on indexedDB "+e.database.vd)}}n.onerror=function(){e.dd.error("Could not clear object stores on indexedDB "+e.database.vd)}}))}}n.Yt={Qt:{vd:"AppboyServiceWorkerAsyncStorage",VERSION:6,ss:{La:"data",hr:"pushClicks",cu:"pushSubscribed",Dd:"fallbackDevice",ts:"cardUpdates",ae:"optOut",wr:"pendingData",jh:"sdkAuthenticationSignature"},ie:1}}},6238:function(t,e){const i={init:function(t){void 0===t&&void 0!==i.zg||(i.zg=!!t),i.t||(i.t=!0)},destroy:function(){i.t=!1,i.zg=void 0,i.dd=void 0},setLogger:function(t){"function"==typeof t?(i.init(),i.dd=t):i.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){i.init(),i.zg?(console.log("Disabling Braze logging"),i.zg=!1):(console.log("Enabled Braze logging"),i.zg=!0)},info:function(t){if(i.zg){const e="Braze: "+t;null!=i.dd?i.dd(e):console.log(e)}},warn:function(t){if(i.zg){const e="Braze SDK Warning: "+t+" (v5.2.0)";null!=i.dd?i.dd(e):console.warn(e)}},error:function(t){if(i.zg){const e="Braze SDK Error: "+t+" (v5.2.0)";null!=i.dd?i.dd(e):console.error(e)}}};e.A=i},9736:function(t,e,i){i.d(e,{A:function(){return d}});var n=i(3543),s=i(4334),r=i(6685),o=i(6238),a=i(804),l=i(663);class u{constructor(t){this.u=t,this.u=t}h(t,e){const i=new r.A;if(t.p(),null==t.url||""===t.url)return o.A.info(`Card ${t.id} has no url. Not logging click to Braze servers.`),i;if(e&&t.id&&this.u){const e=this.u.j(l.d.C.v)||{};e[t.id]=!0,this.u.k(l.d.C.v,e)}const n=this.D([t]);if(null==n)return i;const u=e?a.w.I:a.w.$;return s.A.q(u,n)}B(t){const e=new r.A;if(!t.N())return o.A.info(`Card ${t.id} refused this dismissal. Ignoring analytics event.`),e;if(t.id&&this.u){const e=this.u.j(l.d.C.A)||{};e[t.id]=!0,this.u.k(l.d.C.A,e)}const i=this.D([t]);return null==i?e:s.A.q(a.w.F,i)}G(t,e){const i=new r.A(!0),o=[],u=[];let c={};this.u&&(c=e?this.u.j(l.d.C.H)||{}:this.u.j(l.d.C.J)||{});for(const e of t)e.K(),e instanceof n.A?u.push(e):o.push(e),e.id&&(c[e.id]=!0);const h=this.D(o),d=this.D(u);if(null==h&&null==d)return i.L=!1,i;if(this.u&&(e?this.u.k(l.d.C.H,c):this.u.k(l.d.C.J,c)),null!=h){const t=e?a.w.M:a.w.O,n=s.A.q(t,h);i.P(n)}if(null!=d&&e){const t=s.A.q(a.w.R,d);i.P(t)}return i}D(t){let e,i=null;for(let n=0;n<t.length;n++)e=t[n].id,null!=e&&""!==e&&(i=i||{},i.ids=i.ids||[],i.ids.push(e));return i}}var c=i(2063);const h={t:!1,i:null,m:()=>(h.o(),h.i||(h.i=new u(c.Ay.l())),h.i),o:()=>{h.t||(c.Ay.g(h),h.t=!0)},destroy:()=>{h.i=null,h.t=!1}};var d=h},8458:function(t,e,i){i.d(e,{GH:function(){return d},M4:function(){return u},MX:function(){return h},M_:function(){return c},O_:function(){return p},ZZ:function(){return b},cM:function(){return f},sf:function(){return l}});var n=i(735),s=i(8412),r=i(2645),o=i(7987),a=i(5675);function l(t){return null!=t&&!!t.getAttribute("data-ab-had-top-impression")}function u(t){null!=t&&t.setAttribute("data-ab-had-top-impression","true")}function c(t){return null!=t&&!!t.getAttribute("data-ab-had-bottom-impression")}function h(t){null!=t&&t.setAttribute("data-ab-had-bottom-impression","true")}function d(t){if(null!=t){const e=t.querySelectorAll(".ab-unread-indicator")[0];null!=e&&(e.className+=" read")}}function p(t){return t.getAttribute("data-ab-card-id")}function f(t,e){const i=e.querySelectorAll(".ab-image-area");let n,s=0;i.length>0&&(s=i[0].offsetWidth);for(const e of t)if(n=e.T,n&&e.imageUrl&&"number"==typeof e.aspectRatio){const t=s/e.aspectRatio;t&&(n.style.height=`${t}px`)}}function b(t,e,i){const l=document.createElement("div");l.className="ab-card ab-effect-card "+t._,t.id&&(l.setAttribute("data-ab-card-id",t.id),l.setAttribute("id",t.id)),l.setAttribute("role","article"),l.setAttribute("tabindex","0");let u="",c=!1;t.url&&""!==t.url&&(u=t.url,c=!0);const h=n=>(d(l),c&&(e(t),(0,r.U)(u,i,n)),!1);if(t.pinned){const t=document.createElement("div");t.className="ab-pinned-indicator";const e=document.createElement("i");e.className="fa fa-star",t.appendChild(e),l.appendChild(t)}if(t.imageUrl&&""!==t.imageUrl){const e=document.createElement("div");e.className="ab-image-area";const i=document.createElement("img");if(i.setAttribute("src",t.imageUrl),i.onload=()=>{l.style.height="auto"},function(t,e){let i="";t.title||t.description||(i="Feed Image"),e.setAttribute("alt",i)}(t,i),e.appendChild(i),l.className+=" with-image",c&&!t.S){const t=document.createElement("a");t.setAttribute("href",u),t.onclick=h,t.appendChild(e),l.appendChild(t)}else l.appendChild(e)}const p=document.createElement("div");if(p.className="ab-card-body",t.dismissible){t.logCardDismissal=()=>(0,o.a)(t);const e=(0,n.p)("Dismiss Card",void 0,t.dismissCard.bind(t));l.appendChild(e),(0,s.sr)(p,s.X.U,(t=>{l.className+=" ab-swiped-left",e.onclick(t)})),(0,s.sr)(p,s.X.V,(t=>{l.className+=" ab-swiped-right",e.onclick(t)}))}let f="",b=!1;if(t.title&&""!==t.title&&(f=t.title,b=!0),b){const t=document.createElement("h1");if(t.className="ab-title",t.id=a.A.W(),l.setAttribute("aria-labelledby",t.id),c){const e=document.createElement("a");e.setAttribute("href",u),e.onclick=h,e.appendChild(document.createTextNode(f)),t.appendChild(e)}else t.appendChild(document.createTextNode(f));p.appendChild(t)}const g=document.createElement("div");if(g.className=b?"ab-description":"ab-description ab-no-title",g.id=a.A.W(),l.setAttribute("aria-describedby",g.id),t.description&&g.appendChild(document.createTextNode(t.description)),c){const e=document.createElement("div");e.className="ab-url-area";const i=document.createElement("a");i.setAttribute("href",u),t.linkText&&i.appendChild(document.createTextNode(t.linkText)),i.onclick=h,e.appendChild(i),g.appendChild(e)}p.appendChild(g),l.appendChild(p);const m=document.createElement("div");return m.className="ab-unread-indicator",t.viewed&&(m.className+=" read"),l.appendChild(m),t.T=l,l}},1926:function(t,e,i){i.d(e,{x:function(){return l}});var n=i(5563),s=i(9736),r=i(7276),o=i(2063),a=i(6238);function l(t,e){return!!o.Ay.X()&&(t instanceof n.A?s.A.m().h(t,e).L:(a.A.error("card "+r.s1),!1))}},7987:function(t,e,i){i.d(e,{a:function(){return l}});var n=i(5563),s=i(9736),r=i(7276),o=i(2063),a=i(6238);function l(t){return!!o.Ay.X()&&(t instanceof n.A?s.A.m().B(t).L:(a.A.error("card "+r.s1),!1))}},3628:function(t,e,i){i.d(e,{j:function(){return u}});var n=i(5563),s=i(9736),r=i(2063),o=i(6499),a=i(7276),l=i(6238);function u(t,e){if(!r.Ay.X())return!1;if(!(0,o.cy)(t))return l.A.error("cards must be an array"),!1;for(const e of t)if(!(e instanceof n.A))return l.A.error(`Each card in cards ${a.s1}`),!1;return s.A.m().G(t,e).L}},6178:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5563);class s extends n.A{constructor(t,e,i,n,s,r,o,a,l,u,c,h,d,p,f,b){super(t,e,i,n,s,r,o,a,l,u,c,h,d,p,f,b),this._="ab-captioned-image",this.S=!0,this.test=!1}Y(){const t={};return t[n.A.tt.Z]=n.A.it.st,t[n.A.tt.ht]=this.id,t[n.A.tt.et]=this.viewed,t[n.A.tt.rt]=this.title,t[n.A.tt.ot]=this.imageUrl,t[n.A.tt.ct]=this.description,t[n.A.tt.nt]=this.updated,t[n.A.tt.dt]=this.created,t[n.A.tt.ut]=this.categories,t[n.A.tt.lt]=this.expiresAt,t[n.A.tt.URL]=this.url,t[n.A.tt.ft]=this.linkText,t[n.A.tt.xt]=this.aspectRatio,t[n.A.tt.bt]=this.extras,t[n.A.tt.gt]=this.pinned,t[n.A.tt.jt]=this.dismissible,t[n.A.tt.zt]=this.clicked,t[n.A.tt.kt]=this.test,t}}},5563:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(5098),s=i(7276),r=i(2861),o=i(6238);class a{constructor(t,e,i,n,s,r,o,a,l,u,c,h,d,p,f,b){this.id=t,this.viewed=e,this.title=i,this.imageUrl=n,this.description=s,this.created=r,this.updated=o,this.categories=a,this.expiresAt=l,this.url=u,this.linkText=c,this.aspectRatio=h,this.extras=d,this.pinned=p,this.dismissible=f,this.clicked=b,this.id=t,this.viewed=e||!1,this.title=i||"",this.imageUrl=n,this.description=s||"",this.created=r||null,this.updated=o||null,this.categories=a||[],this.expiresAt=l||null,this.url=u,this.linkText=c,null==h?this.aspectRatio=null:(h=parseFloat(h.toString()),this.aspectRatio=isNaN(h)?null:h),this.extras=d||{},this.pinned=p||!1,this.dismissible=f||!1,this.dismissed=!1,this.clicked=b||!1,this.isControl=!1,this.test=!1,this.Et=null,this.Tt=null}subscribeToClickedEvent(t){return this.Nt().It(t)}subscribeToDismissedEvent(t){return this.St().It(t)}removeSubscription(t){this.Nt().removeSubscription(t),this.St().removeSubscription(t)}removeAllSubscriptions(){this.Nt().removeAllSubscriptions(),this.St().removeAllSubscriptions()}dismissCard(){if(!this.dismissible||this.dismissed)return;"function"==typeof this.logCardDismissal&&this.logCardDismissal();let t=this.T;!t&&this.id&&(t=document.getElementById(this.id)),t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout((function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),a.At))}),s.RW))}Nt(){return null==this.Et&&(this.Et=new r.A),this.Et}St(){return null==this.Tt&&(this.Tt=new r.A),this.Tt}K(){this.viewed=!0}p(){this.viewed=!0,this.clicked=!0,this.Nt().Dt()}N(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.St().Dt(),0))}Ct(t){if(null==t||t[a.Rt.ht]!==this.id)return!0;if(t[a.Rt.Lt])return!1;if(null!=t[a.Rt.nt]&&null!=this.updated&&parseInt(t[a.Rt.nt])<(0,n.UK)(this.updated.valueOf()))return!0;if(t[a.Rt.et]&&!this.viewed&&(this.viewed=!0),t[a.Rt.zt]&&!this.clicked&&(this.clicked=t[a.Rt.zt]),null!=t[a.Rt.rt]&&(this.title=t[a.Rt.rt]),null!=t[a.Rt.ot]&&(this.imageUrl=t[a.Rt.ot]),null!=t[a.Rt.ct]&&(this.description=t[a.Rt.ct]),null!=t[a.Rt.nt]){const e=(0,n.Zo)(t[a.Rt.nt]);null!=e&&(this.updated=e)}if(null!=t[a.Rt.lt]){let e;e=t[a.Rt.lt]===a._t?null:(0,n.Zo)(t[a.Rt.lt]),this.expiresAt=e}if(null!=t[a.Rt.URL]&&(this.url=t[a.Rt.URL]),null!=t[a.Rt.ft]&&(this.linkText=t[a.Rt.ft]),null!=t[a.Rt.xt]){const e=parseFloat(t[a.Rt.xt].toString());this.aspectRatio=isNaN(e)?null:e}return null!=t[a.Rt.bt]&&(this.extras=t[a.Rt.bt]),null!=t[a.Rt.gt]&&(this.pinned=t[a.Rt.gt]),null!=t[a.Rt.jt]&&(this.dismissible=t[a.Rt.jt]),null!=t[a.Rt.kt]&&(this.test=t[a.Rt.kt]),!0}Y(){o.A.error("Must be implemented in a subclass")}}a._t=-1,a.Rt={ht:"id",et:"v",jt:"db",Lt:"r",nt:"ca",gt:"p",lt:"ea",bt:"e",Z:"tp",ot:"i",rt:"tt",ct:"ds",URL:"u",ft:"dm",xt:"ar",zt:"cl",kt:"t"},a.it={st:"captioned_image",Ot:"text_announcement",Mt:"short_news",Pt:"banner_image",Ut:"control"},a.tt={ht:"id",et:"v",jt:"db",dt:"cr",nt:"ca",gt:"p",ut:"t",lt:"ea",bt:"e",Z:"tp",ot:"i",rt:"tt",ct:"ds",URL:"u",ft:"dm",xt:"ar",zt:"cl",kt:"s"},a.Gt={Xt:"ADVERTISING",vt:"ANNOUNCEMENTS",Vt:"NEWS",Wt:"SOCIAL"},a.At=400},60:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5563);class s extends n.A{constructor(t,e,i,n,s,r,o,a,l,u,c,h,d,p,f,b){super(t,e,i,n,s,r,o,a,l,u,c,h,d,p,f,b),this._="ab-classic-card",this.S=!0}Y(){const t={};return t[n.A.tt.Z]=n.A.it.Mt,t[n.A.tt.ht]=this.id,t[n.A.tt.et]=this.viewed,t[n.A.tt.rt]=this.title,t[n.A.tt.ot]=this.imageUrl,t[n.A.tt.ct]=this.description,t[n.A.tt.nt]=this.updated,t[n.A.tt.dt]=this.created,t[n.A.tt.ut]=this.categories,t[n.A.tt.lt]=this.expiresAt,t[n.A.tt.URL]=this.url,t[n.A.tt.ft]=this.linkText,t[n.A.tt.xt]=this.aspectRatio,t[n.A.tt.bt]=this.extras,t[n.A.tt.gt]=this.pinned,t[n.A.tt.jt]=this.dismissible,t[n.A.tt.zt]=this.clicked,t[n.A.tt.kt]=this.test,t}}},3543:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5563);class s extends n.A{constructor(t,e,i,n,s,r){super(t,e,null,null,null,null,i,null,n,null,null,null,s,r),this.isControl=!0,this._="ab-control-card",this.S=!1}Y(){const t={};return t[n.A.tt.Z]=n.A.it.Ut,t[n.A.tt.ht]=this.id,t[n.A.tt.et]=this.viewed,t[n.A.tt.nt]=this.updated,t[n.A.tt.lt]=this.expiresAt,t[n.A.tt.bt]=this.extras,t[n.A.tt.gt]=this.pinned,t[n.A.tt.kt]=this.test,t}}},699:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5563);class s extends n.A{constructor(t,e,i,n,s,r,o,a,l,u,c,h,d,p){super(t,e,null,i,null,n,s,r,o,a,l,u,c,h,d,p),this._="ab-image-only",this.S=!1,this.test=!1}Y(){const t={};return t[n.A.tt.Z]=n.A.it.Pt,t[n.A.tt.ht]=this.id,t[n.A.tt.et]=this.viewed,t[n.A.tt.ot]=this.imageUrl,t[n.A.tt.nt]=this.updated,t[n.A.tt.dt]=this.created,t[n.A.tt.ut]=this.categories,t[n.A.tt.lt]=this.expiresAt,t[n.A.tt.URL]=this.url,t[n.A.tt.ft]=this.linkText,t[n.A.tt.xt]=this.aspectRatio,t[n.A.tt.bt]=this.extras,t[n.A.tt.gt]=this.pinned,t[n.A.tt.jt]=this.dismissible,t[n.A.tt.zt]=this.clicked,t[n.A.tt.kt]=this.test,t}}},3862:function(t,e,i){i.d(e,{Fu:function(){return h},R:function(){return d},_l:function(){return p}});var n=i(5563),s=i(60),r=i(6178),o=i(699),a=i(3543),l=i(5098),u=i(6238);function c(t,e,i,l,c,h,d,p,f,b,g,m,A,v,w,y,x,E){let C;if(e===n.A.it.Ot||e===n.A.it.Mt)C=new s.A(t,i,l,c,h,d,p,f,b,g,m,A,v,w,y,x);else if(e===n.A.it.st)C=new r.A(t,i,l,c,h,d,p,f,b,g,m,A,v,w,y,x);else if(e===n.A.it.Pt)C=new o.A(t,i,c,d,p,f,b,g,m,A,v,w,y,x);else{if(e!==n.A.it.Ut)return u.A.error("Ignoring card with unknown type "+e),null;C=new a.A(t,i,p,b,v,w)}return E&&(C.test=E),C}function h(t){if(t[n.A.Rt.Lt])return null;const e=t[n.A.Rt.ht],i=t[n.A.Rt.Z],s=t[n.A.Rt.et],r=t[n.A.Rt.rt],o=t[n.A.Rt.ot],a=t[n.A.Rt.ct],u=(0,l.Zo)(t[n.A.Rt.nt]),h=u;let d;return d=t[n.A.Rt.lt]===n.A._t?null:(0,l.Zo)(t[n.A.Rt.lt]),c(e,i,s,r,o,a,h,u,null,d,t[n.A.Rt.URL],t[n.A.Rt.ft],t[n.A.Rt.xt],t[n.A.Rt.bt],t[n.A.Rt.gt],t[n.A.Rt.jt],t[n.A.Rt.zt],t[n.A.Rt.kt]||!1)}function d(t){return c(t.id,t.type,t.viewed,t.title,t.image,t.description,(0,l.Zo)(t.created),(0,l.Zo)(t.updated),t.categories,(0,l.Zo)(t.expires_at),t.url,t.domain,t.aspect_ratio,t.extras,!1,!1)}function p(t){return c(t[n.A.tt.ht],t[n.A.tt.Z],t[n.A.tt.et],t[n.A.tt.rt],t[n.A.tt.ot],t[n.A.tt.ct],(0,l.jU)(t[n.A.tt.dt]),(0,l.jU)(t[n.A.tt.nt]),t[n.A.tt.ut],(0,l.jU)(t[n.A.tt.lt]),t[n.A.tt.URL],t[n.A.tt.ft],t[n.A.tt.xt],t[n.A.tt.bt],t[n.A.tt.gt],t[n.A.tt.jt],t[n.A.tt.zt],t[n.A.tt.kt]||!1)||void 0}},9911:function(t,e,i){i.r(e),i.d(e,{changeUser:function(){return l}});var n=i(2063),s=i(8623),r=i(6238),o=i(312),a=i(8457);function l(t,e){if(!n.Ay.X())return;if(null==t||0===t.length||t!=t)return void r.A.error("changeUser requires a non-empty userId.");if((0,s.N)(t)>o.A.lr)return void r.A.error(`Rejected user id "${t}" because it is longer than ${o.A.lr} bytes.`);if(null!=e&&!(0,a.rK)(e,"set signature for new user","signature"))return;const i=n.Ay.cr();i&&i.changeUser(t.toString(),n.Ay.gr(),e)}},5767:function(t,e){e.A={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},5459:function(t,e,i){i.d(e,{w:function(){return s}});var n=i(2063);function s(){if(n.Ay.X())return n.Ay.pr()}},2645:function(t,e,i){i.d(e,{U:function(){return d},V:function(){return p}});var n=i(6238),s=i(7276),r=i(2063),o=i(8664),a=i(8026),l=i(3072),u=i(8457),c=i(5734),h=i(5459);function d(t,e,d){if(r.Ay.X())if(u.nx.test(t)){const e=(0,o.jj)(t);if(!e)return;const d=t=>{if(!(0,u.xs)(t))return void n.A.error(`Decoded Braze Action json is invalid: ${JSON.stringify(t,null,2)}`);const e=o.V.properties.type,p=o.V.properties.oo,f=o.V.properties.eo,b=t[e];if(b===o.V.types.ro){const e=t[p];for(const t of e)d(t)}else{const e=t[f];let u,d;switch(b){case o.V.types.logCustomEvent:Promise.resolve().then(i.bind(i,9620)).then((({logCustomEvent:t})=>{r.Ay.so()?(d=Array.prototype.slice.call(e),t(...d)):n.A.error(s.xE)}));break;case o.V.types.requestPushPermission:Promise.resolve().then(i.bind(i,1380)).then((({requestPushPermission:t})=>{r.Ay.so()?"Safari"===a.A.browser&&a.A.OS===l.u.io?window.navigator.standalone&&t():t():n.A.error(s.xE)}));break;case o.V.types.setEmailNotificationSubscriptionType:case o.V.types.setPushNotificationSubscriptionType:case o.V.types.setCustomUserAttribute:case o.V.types.addToSubscriptionGroup:case o.V.types.removeFromSubscriptionGroup:case o.V.types.addToCustomAttributeArray:case o.V.types.removeFromCustomAttributeArray:u=(0,h.w)(),u&&u[b](...Array.prototype.slice.call(e));break;case o.V.types.no:case o.V.types.ao:d=Array.prototype.slice.call(e),c.uD.openUri(...d);break;default:n.A.info(`Ignoring unknown Braze Action: ${b}`)}}};d(e)}else c.uD.openUri(t,e,d)}function p(t,e){d(t,e)}},9620:function(t,e,i){i.r(e),i.d(e,{logCustomEvent:function(){return h}});var n=i(2063),s=i(4334),r=i(6238),o=i(804),a=i(3368),l=i(6148),u=i(8457),c=i(7276);function h(t,e){if(!n.Ay.X())return!1;if(null==t||t.length<=0)return r.A.error(`logCustomEvent requires a non-empty eventName, got "${t}". Ignoring event.`),!1;if(!(0,u.Dz)(t,"log custom event","the event name"))return!1;const[i,h]=(0,u.fB)(e,c.aV,"eventProperties",`log custom event "${t}"`,"event");if(!i)return!1;const d=n.Ay.ir();if(d&&d.me(t))return r.A.info(`Custom Event "${t}" is blocklisted, ignoring.`),!1;const p=s.A.q(o.w.CustomEvent,{n:t,p:h});if(p.L){r.A.info(`Logged custom event "${t}".`);for(const i of p.ge)l.B.rr().fe(a.A.ue,[t,e],i)}return p.L}},1329:function(t,e,i){i.r(e),i.d(e,{logPurchase:function(){return h}});var n=i(2063),s=i(7276),r=i(6238),o=i(804),a=i(3368),l=i(6148),u=i(8457),c=i(4334);function h(t,e,i,h,d){if(!n.Ay.X())return!1;if(null==i&&(i="USD"),null==h&&(h=1),null==t||t.length<=0)return r.A.error(`logPurchase requires a non-empty productId, got "${t}", ignoring.`),!1;if(!(0,u.Dz)(t,"log purchase","the purchase name"))return!1;if(null==e||isNaN(parseFloat(e.toString())))return r.A.error(`logPurchase requires a numeric price, got ${e}, ignoring.`),!1;const p=parseFloat(e.toString()).toFixed(2);if(null==h||isNaN(parseInt(h.toString())))return r.A.error(`logPurchase requires an integer quantity, got ${h}, ignoring.`),!1;const f=parseInt(h.toString());if(f<1||f>s.$k)return r.A.error(`logPurchase requires a quantity >1 and <${s.$k}, got ${f}, ignoring.`),!1;if(i=null!=i?i.toUpperCase():i,-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(i))return r.A.error(`logPurchase requires a valid currencyCode, got ${i}, ignoring.`),!1;const[b,g]=(0,u.fB)(d,"logPurchase","purchaseProperties",`log purchase "${t}"`,"purchase");if(!b)return!1;const m=n.Ay.ir();if(m&&m.Dr(t))return r.A.info(`Purchase "${t}" is blocklisted, ignoring.`),!1;const A=c.A.q(o.w.Pr,{pid:t,c:i,p:p,q:f,pr:g});if(A.L){r.A.info(`Logged ${f} purchase${f>1?"s":""} of "${t}" for ${i} ${p}.`);for(const e of A.ge)l.B.rr().fe(a.A.Rr,[t,d],e)}return A.L}},4825:function(t,e,i){i.d(e,{a:function(){return s}});var n=i(2063);function s(t){n.Ay.X()&&n.Ay.removeSubscription(t)}},3240:function(t,e,i){i.r(e),i.d(e,{requestImmediateDataFlush:function(){return s}});var n=i(2063);function s(t){if(!n.Ay.X())return;const e=n.Ay.cr();e&&e.requestImmediateDataFlush(t)}},8826:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(6238);class s{constructor(t,e=!1,i={},n){this.id=t,this.enabled=e,this.properties=i,this.trackingString=n,this.id=t,this.enabled=e,this.properties=i,this.trackingString=n}getStringProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Ir(e)?e.value:(this.Nr("string"),null)}getNumberProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Tr(e)?e.value:(this.Nr("number"),null)}getBooleanProperty(t){const e=this.properties[t];return null==e?(this.Er(t),null):this.Ar(e)?e.value:(this.Nr("boolean"),null)}Y(){const t={};return t[s.tt.ht]=this.id,t[s.tt.le]=this.enabled,t[s.tt.pe]=this.properties,t[s.tt.Fe]=this.trackingString,t}Nr(t){n.A.info(`Property is not of type ${t}.`)}Er(t){n.A.info(`${t} not found in feature flag properties.`)}Ir(t){return"string"===t.type&&"string"==typeof t.value}Tr(t){return"number"===t.type&&"number"==typeof t.value}Ar(t){return"boolean"===t.type&&"boolean"==typeof t.value}}s.tt={ht:"id",le:"e",pe:"pr",Fe:"fts"},s.Rt={ht:"id",le:"enabled",pe:"properties",Fe:"fts"}},457:function(t,e,i){i.d(e,{A:function(){return g}});var n=i(2063),s=i(6238),r=i(4188),o=i(663),a=i(2861),l=i(4956),u=i(9303),c=i(8826);function h(t){if(t[c.A.Rt.ht]&&"boolean"==typeof t[c.A.Rt.le])return new c.A(t[c.A.Rt.ht],t[c.A.Rt.le],t[c.A.Rt.pe],t[c.A.Rt.Fe]);s.A.info(`Unable to create feature flag from ${JSON.stringify(t,null,2)}`)}function d(t){if(t[c.A.tt.ht]&&"boolean"==typeof t[c.A.tt.le])return new c.A(t[c.A.tt.ht],t[c.A.tt.le],t[c.A.tt.pe],t[c.A.tt.Fe]);s.A.info(`Unable to deserialize feature flag from ${JSON.stringify(t,null,2)}`)}var p=i(7927);class f extends r.A{constructor(t,e,i,s){super(),this.yt=t,this.qt=e,this.u=i,this.di=s,this.mi=[],this.gi=0,this.yt=t,this.qt=e,this.u=i,this.di=s,this.Fi=null,this.vi=new a.A,this.pi=10,this.wi=null,this.ji=null,n.Ay.$t(this.vi)}Rs(t){var e;if((null===(e=this.yt)||void 0===e?void 0:e.yi())&&null!=t&&t.feature_flags){this.mi=[];for(const e of t.feature_flags){const t=h(e);t&&this.mi.push(t)}this.gi=(new Date).getTime(),this.bi(),this.vi.Dt(this.mi)}}Ci(){let t={};this.u&&(t=this.u.j(o.d.C.Ti));const e={};for(const i in t){const n=d(t[i]);n&&(e[n.id]=n)}return e}Di(){var t;return(null===(t=this.u)||void 0===t?void 0:t.j(o.d.C.Ii))||{}}Ri(t){this.u&&this.u.k(o.d.C.Ii,t)}ei(t){return this.vi.It(t)}refreshFeatureFlags(t,e,i=!1,n=!0){const s=()=>{"function"==typeof e&&e(),this.vi.Dt(this.mi)};if(!this.Si(i))return!this.Fi&&this.yt&&(this.Fi=this.yt.xi((()=>{this.refreshFeatureFlags(t,e)}))),void s();if(n&&this.Ni(),!this.qt)return void s();const r=this.qt.Ps({},!0),o=this.qt._s(r,p.A.Gs.qi);let a=!1;this.qt.Hs(r,(()=>{this.qt?(p.A.Os(this.u,p.A.Gs.qi,(new Date).valueOf()),u.A.Qs({url:`${this.qt.Vs()}/feature_flags/sync`,headers:o,data:r,L:e=>{if(!this.qt.Ws(r,e,o))return a=!0,void s();this.qt.Xs(),this.Rs(e),a=!1,p.A.Ys(this.u,p.A.Gs.qi,1),"function"==typeof t&&t()},error:t=>{this.qt.Zs(t,"retrieving feature flags"),a=!0,s()},ti:()=>{if(n&&a&&!this.ji){p.A.si(this.u,p.A.Gs.qi);let n=this.wi;(null==n||n<1e3*this.pi)&&(n=1e3*this.pi),this.$i(Math.min(3e5,(0,l.C)(1e3*this.pi,3*n)),t,e,i)}}})):s()}),p.A.ii.qi)}Ni(){null!=this.ji&&(clearTimeout(this.ji),this.ji=null)}$i(t=1e3*this.pi,e,i,n=!1){this.Ni(),this.ji=window.setTimeout((()=>{this.refreshFeatureFlags(e,i,n)}),t),this.wi=t}Si(t){if(!this.yt)return!1;if(!t){const t=this.yt.zi();if(null==t)return!1;let e=!1;if(!isNaN(t)){if(-1===t)return s.A.info("Feature flag refreshes not allowed"),!1;e=(new Date).getTime()>=(this.gi||0)+1e3*t}if(!e)return s.A.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.yt.yi()}Mi(){var t;return(null===(t=this.u)||void 0===t?void 0:t.j(o.d.C.Ui))||null}_i(){var t,e;null===(t=this.u)||void 0===t||t.k(o.d.C.Ui,null===(e=this.di)||void 0===e?void 0:e.ki())}Ai(){var t;const e=null===(t=this.di)||void 0===t?void 0:t.ki(),i=this.Mi();return null==i||e===i}bi(){if(!this.u)return;const t={};for(const e of this.mi){const i=e.Y();t[e.id]=i}this.u.k(o.d.C.Ti,t),this.u.k(o.d.C.Bi,this.gi),this._i()}}const b={t:!1,provider:null,rr:()=>(b.o(),b.provider||(b.provider=new f(n.Ay.ir(),n.Ay.nr(),n.Ay.l(),n.Ay.zr()),n.Ay.ar(b.provider)),b.provider),o:()=>{b.t||(n.Ay.g(b),b.t=!0)},destroy:()=>{b.provider=null,b.t=!1}};var g=b},3799:function(t,e,i){i.r(e),i.d(e,{refreshFeatureFlags:function(){return o}});var n=i(2063),s=i(457);function r(t,e,i=!1){if(n.Ay.X())return s.A.rr().refreshFeatureFlags(t,e,i)}function o(t,e){r(t,e)}e.default=r},8072:function(t,e,i){i.d(e,{A:function(){return d}});var n=i(2063),s=i(4188),r=i(2982),o=i(3862),a=i(5098),l=i(663),u=i(2861);class c extends s.A{constructor(t,e){super(),this.u=t,this.Ei=e,this.cards=[],this.Gi=null,this.u=t,this.Ei=e,this.Jt=new u.A,n.Ay.$t(this.Jt),this.Kt()}Kt(){let t=[];this.u&&(t=this.u.j(l.d.C.Hi)||[]);const e=[];for(let i=0;i<t.length;i++){const n=(0,o._l)(t[i]);null!=n&&e.push(n)}this.cards=e,this.u&&(this.Gi=(0,a.jU)(this.u.j(l.d.C.Ji)))}Ki(t){const e=[];let i=null,n={};this.u&&(n=this.u.j(l.d.C.J)||{});const s={};for(let r=0;r<t.length;r++){i=t[r];const a=(0,o.R)(i);if(null!=a){const t=a.id;t&&n[t]&&(a.viewed=!0,s[t]=!0),e.push(a)}}this.cards=e,this.js(),this.Gi=new Date,this.u&&(this.u.k(l.d.C.J,s),this.u.k(l.d.C.Ji,this.Gi))}js(){var t;const e=[];for(let t=0;t<this.cards.length;t++)e.push(this.cards[t].Y());null===(t=this.u)||void 0===t||t.k(l.d.C.Hi,e)}Rs(t){null!=t&&t.feed&&(this.Kt(),this.Ki(t.feed),this.Jt.Dt(new r.A(this.cards.slice(),this.Gi)))}Li(){this.Kt();const t=[],e=new Date;for(let i=0;i<this.cards.length;i++){const n=this.cards[i].expiresAt;let s=!0;null!=n&&(s=n>=e),s&&t.push(this.cards[i])}return new r.A(t,this.Gi)}Fs(){this.Ei&&this.Ei.requestFeedRefresh()}ei(t){return this.Jt.It(t)}clearData(t){null==t&&(t=!1),this.cards=[],this.Gi=null,t&&this.u&&(this.u.hi(l.d.C.Hi),this.u.hi(l.d.C.Ji)),this.Jt.Dt(new r.A(this.cards.slice(),this.Gi))}}const h={t:!1,provider:null,rr:()=>(h.o(),h.provider||(h.provider=new c(n.Ay.l(),n.Ay.cr()),n.Ay.ar(h.provider)),h.provider),o:()=>{h.t||(n.Ay.g(h),h.t=!0)},destroy:()=>{h.provider=null,h.t=!1}};var d=h},2982:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(3981),s=i(3628),r=i(1926),o=i(7112);class a extends n.A{constructor(t,e){super(t,e)}logCardImpressions(t){(0,s.j)(t,!1)}logCardClick(t){return(0,r.x)(t,!1)}sr(){(0,o.R)()}dr(){return!1}}},9201:function(t,e,i){i.d(e,{o:function(){return r}});var n=i(2063),s=i(804);function r(){var t;if(n.Ay.X())return null===(t=n.Ay.nr())||void 0===t?void 0:t.qr(s.j.Br).L}},7112:function(t,e,i){i.d(e,{R:function(){return r}});var n=i(2063),s=i(8072);function r(){if(n.Ay.X())return s.A.rr().Fs()}},6346:function(t,e,i){i.d(e,{k:function(){return r}});var n=i(2063),s=i(8072);function r(t){if(n.Ay.X())return s.A.rr().ei(t)}},4643:function(t,e,i){i.r(e),i.d(e,{showFeed:function(){return p}});var n=i(2063),s=i(5297),r=i(2982),o=i(6346),a=i(9201),l=i(8072),u=i(6499),c=i(8458),h=i(2292),d=i(6238);function p(t,e,i){if(!n.Ay.X())return;(0,h.s)();const p=(t,e)=>{if(null==e)return t;const i=[];for(let t=0;t<e.length;t++)i.push(e[t].toLowerCase());const n=[];for(let e=0;e<t.length;e++){const s=[],r=t[e].categories||[];for(let t=0;t<r.length;t++)s.push(r[t].toLowerCase());(0,u.E$)(s,i).length>0&&n.push(t[e])}return n},f=n.Ay.nn(n.lw.tn)||n.Ay.nn(n.lw.en)||!1;let b=!1;null==t&&(t=document.body,b=!0);let g,m=!1;null==e?(g=l.A.rr().Li(),(0,s.Z7)(g,p(g.cards,i),g.lastUpdated,null,f),m=!0):g=new r.A(p(e,i),new Date);const A=(0,s.Nc)(g,f,b);if(m){(null==g.lastUpdated||(new Date).valueOf()-g.lastUpdated.valueOf()>r.A.ur)&&(d.A.info(`Cached feed was older than max TTL of ${r.A.ur} ms, requesting an update from the server.`),(0,s.Y9)(g,A));const t=(new Date).valueOf(),e=(0,o.k)((function(e){const n=A.querySelectorAll(".ab-refresh-button")[0];if(null!=n){let e=500;e-=(new Date).valueOf()-t;const i=A.getAttribute(s.Ql);if(i){const t=parseInt(i);isNaN(t)||(e-=(new Date).valueOf()-t)}setTimeout((function(){n.className=n.className.replace(/fa-spin/g,"")}),Math.max(e,0))}(0,s.Z7)(g,p(e.cards,i),e.lastUpdated,A,f)}));(0,s.kz)(e,A)}const v=t=>{const e=t.querySelectorAll(".ab-feed");let i=null;for(let n=0;n<e.length;n++)e[n].parentNode===t&&(i=e[n]);null!=i?((0,s.ID)(i),i.parentNode&&i.parentNode.replaceChild(A,i)):t.appendChild(A),setTimeout((function(){A.className=A.className.replace("ab-hide","ab-show")}),0),b&&A.focus(),(0,a.o)(),(0,s.UH)(g,A),g&&(0,c.cM)(g.cards,t)};var w;null!=t?v(t):window.onload=(w=window.onload,function(){"function"==typeof w&&w(new Event("oldLoad")),v(document.body)})}},5001:function(t,e,i){i.d(e,{g:function(){return h},x:function(){return d}});var n=i(1201),s=i(2631),r=i(5862),o=i(9617),a=i(9086),l=i(4095),u=i(917),c=i(6238);function h(t){if(!t)return null;if(t.is_control)return s.A.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const i=t.message,h=t.text_align_message,d=t.slide_from,p=t.extras,f=t.trigger_id,b=t.click_action,g=t.uri,m=t.open_target,A=t.message_close,v=t.duration,w=t.icon,y=t.image_url,x=t.image_style,E=t.icon_color,C=t.icon_bg_color,S=t.bg_color,k=t.text_color,_=t.close_btn_color,T=t.header,N=t.text_align_header,I=t.header_text_color,D=t.frame_color,O=[];let P=t.btns;null==P&&(P=[]);for(let t=0;t<P.length;t++)O.push(a.A.fromJson(P[t]));const R=t.crop_type,M=t.orientation,L=t.animate_in,z=t.animate_out;let U=t.html_id,B=t.css;null!=U&&""!==U&&null!=B&&""!==B||(U=void 0,B=void 0);const F=t.message_extras;let G;if(e===l.A.it||e===n.A.Ce.Je)G=new l.A(i,h,p,f,b,g,m,A,v,w,y,x,E,C,S,k,_,L,z,T,N,I,D,O,R,U,B,F);else if(e===r.A.it)G=new r.A(i,h,p,f,b,g,m,A,v,w,y,x,E,C,S,k,_,L,z,T,N,I,D,O,R,M,U,B,F);else if(e===u.A.it)G=new u.A(i,h,d,p,f,b,g,m,A,v,w,y,E,C,S,k,_,L,z,U,B,F);else{if(e!==o.A.it&&e!==n.A.Ce.je&&e!==n.A.Ce.Se)return void c.A.error("Ignoring message with unknown type "+e);{const e=t.message_fields;G=new o.A(i,p,f,A,v,L,z,D,U,B,e,F),G.trusted=t.trusted||!1}}return G.Ae=e,G}function d(t){const e=[];for(const i of t)e.push(new a.A(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return e}},8193:function(t,e,i){i.d(e,{A:function(){return _}});var n=i(9303),s=i(2063),r=i(2631),o=i(9617),a=i(1201),l=i(9086),u=i(4334),c=i(5001),h=i(4956),d=i(6685),p=i(804),f=i(6238),b=i(2861),g=i(3414),m=i(8457),A=i(8664),v=i(691),w=i(7927),y=i(663),x=i(5862),E=i(4095),C=i(917);class S{constructor(t,e,i,n){this.qt=t,this.di=e,this.u=i,this.wt=n,this.qt=t,this.di=e,this.u=i,this.wt=n,this._e=new b.A,s.Ay.$t(this._e),this.Ne=1e3,this.Oe=6e4,this.Re=null}He(){return this._e}Ke(t){return this._e.It(t)}Qe(){return this.Re}Ue(t){this.Re=t}q(t,e,i,n){const s=new d.A;let a;if(t instanceof r.A)a={trigger_ids:[t.triggerId]};else{if(e===p.w.Ve||t instanceof o.A&&e===p.w.We){if(!t.p(n))return f.A.info("This in-app message has already received a click. Ignoring analytics event."),s}else if(e===p.w.Xe&&!t.K())return f.A.info("This in-app message has already received an impression. Ignoring analytics event."),s;a=this.Ye(t)}return null==a?s:(t.messageExtras&&(a.message_extras=t.messageExtras),null!=i&&(a.bid=i),u.A.q(e,a))}Ze(t,e){const i=new d.A;if(!t.p())return f.A.info("This in-app message button has already received a click. Ignoring analytics event."),i;const n=this.Ye(e);return null==n?i:t.id===l.A.Pi?(f.A.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=t.id&&(n.bid=t.id),u.A.q(p.w.We,n))}Oi(t){const e=t.messageFields;return null!=e&&e.is_push_primer||!1}Qi(t){if(!(t instanceof a.A))return;const e=t=>{if(!t)return;const e=(0,A.jj)(t);return(0,A.qj)(e)?(0,A.$6)(A.mY.Vi,"In-App Message"):(0,A.dy)(e)&&!v.A.Wi()?(0,A.$6)(A.mY.Xi,"In-App Message"):void 0};if(this.Oi(t)&&!v.A.Wi())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";const i=t.buttons||[];let n;for(const t of i)if(t.clickAction===a.A.ClickAction.URI&&t.uri&&m.nx.test(t.uri)&&(n=e(t.uri),n))return n;return t.clickAction===a.A.ClickAction.URI&&t.uri&&m.nx.test(t.uri)?e(t.uri):void 0}Yi(t,e,i,s){if(!this.qt)return;const r=this.qt.Zi(!1,!1),o=this.qt.Ps(r);o.template={trigger_id:t.triggerId,trigger_event_type:e},null!=i&&(o.template.data=i.Mr());const a=this.qt._s(o,w.A.Gs._r);this.qt.Hs(o,(()=>{this.qt&&(w.A.Os(this.u,w.A.Gs._r,(new Date).valueOf()),n.A.Qs({url:`${this.qt.Vs()}/template/`,data:o,headers:a,L:e=>{if(w.A.Ys(this.u,w.A.Gs._r,1),!this.qt.Ws(o,e,a))return void("function"==typeof t.Gr&&t.Gr());if(this.qt.Xs(),null==e||null==e.templated_message)return;const i=e.templated_message;if(i.type!==g.A.Or.Cr)return;const n=(0,c.g)(i.data);if(null==n)return;const s=this.Qi(n);if(s)return f.A.error(s),void("function"==typeof t.Gr&&t.Gr());"function"==typeof t.Hr&&t.Hr(n)},error:n=>{let r=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.Jr<t.Kr){w.A.si(this.u,w.A.Gs._r);const n=Math.min(t.Kr,this.Oe),o=this.Ne;null==s&&(s=o);const a=Math.min(n,(0,h.C)(o,3*s));r+=`. Retrying in ${a} ms`,setTimeout((()=>{this.Yi(t,e,i,a)}),a)}this.qt.Zs(n,r)}}))}),w.A.ii._r)}Ye(t){if(null==t.triggerId)return f.A.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}de(t){return!!this.u&&!(!(t&&t instanceof a.A&&t.constructor!==a.A)||t instanceof r.A)&&this.u.k(y.d.C.Lr,t.Y())}Ge(){if(!this.u)return null;const t=this.u.j(y.d.C.Lr);if(!t)return null;let e;switch(t.type){case a.A.Ce.Qr:e=x.A.Ur(t);break;case a.A.Ce.Vr:case a.A.Ce.je:case a.A.Ce.Se:e=o.A.Ur(t);break;case a.A.Ce.Wr:case a.A.Ce.Je:e=E.A.Ur(t);break;case a.A.Ce.Xr:e=C.A.Ur(t)}return e&&this.Yr(),e}Yr(){this.u&&this.u.hi(y.d.C.Lr)}}const k={i:null,t:!1,m:()=>(k.o(),k.i||(k.i=new S(s.Ay.nr(),s.Ay.zr(),s.Ay.l(),s.Ay.er())),k.i),o:()=>{k.t||(s.Ay.g(k),k.t=!0)},destroy:()=>{k.i=null,k.t=!1}};var _=k},2631:function(t,e,i){i.d(e,{A:function(){return n}});class n{constructor(t,e){this.triggerId=t,this.messageExtras=e,this.triggerId=t,this.messageExtras=e,this.extras={},this.isControl=!0}static fromJson(t){return new n(t.trigger_id,t.message_extras)}}},5862:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(5001),s=i(1201);class r extends s.A{constructor(t,e,i,n,r,o,a,l,u,c,h,d,p,f,b,g,m,A,v,w,y,x,E,C,S,k,_,T,N){l=l||s.A.DismissType.MANUAL,k=k||s.A.Orientation.PORTRAIT,super(t,e,void 0,i,n,r,o,a,l,u,c,h,d,p,f,b,g,m,A,v,w,y,x,E,C,S=S||s.A.CropType.CENTER_CROP,k,_,T,N),this.$e=s.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Ur(t){return new r(t[s.A.tt.ea],t[s.A.tt.ra],t[s.A.tt.bt],t[s.A.tt.sa],t[s.A.tt.ta],t[s.A.tt.URI],t[s.A.tt.ia],t[s.A.tt.aa],t[s.A.tt.oa],t[s.A.tt.pa],t[s.A.tt.ot],t[s.A.tt.ma],t[s.A.tt.na],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.fa],t[s.A.tt.da],t[s.A.tt.la],t[s.A.tt.ga],t[s.A.tt.ja],t[s.A.tt.xa],t[s.A.tt.za],t[s.A.tt.ha],(0,n.x)(t[s.A.tt.va]),t[s.A.tt.wa],t[s.A.tt.ya],t[s.A.tt.Sa],t[s.A.tt.CSS],t[s.A.tt.ba])}}r.it=s.A.Ce.Qr},9617:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(1201);class s extends n.A{constructor(t,e,i,s,r,o,a,l,u,c,h,d){super(t,void 0,void 0,e,i,void 0,void 0,void 0,s=s||n.A.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,o,a,void 0,void 0,void 0,l,void 0,void 0,void 0,u,c,d),this.messageFields=h,this.messageFields=h}do(){return!1}p(t){if(this.Ae===n.A.Ce.Vr){if(this.vo)return!1;this.vo=!0}return this.Et.Dt(t),!0}Y(){const t=super.Y(s.it);return t[n.A.tt.uo]=this.messageFields,t}static Ur(t){return new s(t[n.A.tt.ea],t[n.A.tt.bt],t[n.A.tt.sa],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.la],t[n.A.tt.ga],t[n.A.tt.ha],t[n.A.tt.Sa],t[n.A.tt.CSS],t[n.A.tt.uo],t[n.A.tt.ba])}}s.it=n.A.Ce.Vr},9086:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(1201),s=i(2861);class r{constructor(t,e,i,o,a,l,u){this.text=t,this.backgroundColor=e,this.textColor=i,this.borderColor=o,this.clickAction=a,this.uri=l,this.id=u,this.text=t||"",this.backgroundColor=e||n.A.th.sh,this.textColor=i||n.A.th.ih,this.borderColor=o||this.backgroundColor,this.clickAction=a||n.A.ClickAction.NONE,this.uri=l,null==u&&(u=r.Pi),this.id=u,this.vo=!1,this.Et=new s.A}subscribeToClickedEvent(t){return this.Et.It(t)}removeSubscription(t){this.Et.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions()}p(){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}static fromJson(t){return new r(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}r.Pi=-1},1201:function(t,e,i){i.d(e,{A:function(){return u}});var n=i(2063),s=i(8026),r=i(8412),o=i(2704),a=i(2861),l=i(5084);class u{constructor(t,e,i,n,s,r,o,l,c,h,d,p,f,b,g,m,A,v,w,y,x,E,C,S,k,_,T,N,I,D){this.message=t,this.messageAlignment=e,this.slideFrom=i,this.extras=n,this.triggerId=s,this.clickAction=r,this.uri=o,this.openTarget=l,this.dismissType=c,this.duration=h,this.icon=d,this.imageUrl=p,this.imageStyle=f,this.iconColor=b,this.iconBackgroundColor=g,this.backgroundColor=m,this.textColor=A,this.closeButtonColor=v,this.animateIn=w,this.animateOut=y,this.header=x,this.headerAlignment=E,this.headerTextColor=C,this.frameColor=S,this.buttons=k,this.cropType=_,this.orientation=T,this.htmlId=N,this.css=I,this.messageExtras=D,this.message=t,this.messageAlignment=e||u.TextAlignment.CENTER,this.duration=h||5e3,this.slideFrom=i||u.SlideFrom.BOTTOM,this.extras=n||{},this.triggerId=s,this.clickAction=r||u.ClickAction.NONE,this.uri=o,this.openTarget=l||u.OpenTarget.NONE,this.dismissType=c||u.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=p,this.imageStyle=f||u.ImageStyle.TOP,this.iconColor=b||u.th.ih,this.iconBackgroundColor=g||u.th.sh,this.backgroundColor=m||u.th.ih,this.textColor=A||u.th.hh,this.closeButtonColor=v||u.th.eh,this.animateIn=w,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=x,this.headerAlignment=E||u.TextAlignment.CENTER,this.headerTextColor=C||u.th.hh,this.frameColor=S||u.th.Eh,this.buttons=k||[],this.cropType=_||u.CropType.FIT_CENTER,this.orientation=T,this.htmlId=N,this.css=I,this.isControl=!1,this.messageExtras=D,this.nh=!1,this.Th=!1,this.vo=!1,this.oh=!1,this.Pe=null,this.we=null,this.Et=new a.A,this.rh=new a.A,this.$e=u.TextAlignment.CENTER}subscribeToClickedEvent(t){return this.Et.It(t)}subscribeToDismissedEvent(t){return this.rh.It(t)}removeSubscription(t){this.Et.removeSubscription(t),this.rh.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions(),this.rh.removeAllSubscriptions()}closeMessage(){this.he(this.Pe)}xe(){return!0}do(){return this.xe()}ve(){return null!=this.htmlId&&this.htmlId.length>4}be(){return this.ve()&&null!=this.css&&this.css.length>0}ye(){if(this.ve()&&this.be())return this.htmlId+"-css"}K(){return!this.Th&&(this.Th=!0,!0)}mo(){return this.Th}p(t){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}N(){return!this.oh&&(this.oh=!0,this.rh.Dt(),!0)}hide(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.xe()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(u.lh)&&t.remove(u.lh),document.body.removeEventListener("touchmove",u.uh)}e.className=e.className.replace(u.ah,u.Ih)}return this.animateOut||!1}he(t,e){if(null==t)return;let i;this.Pe=null,i=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let n=!1;i&&(n=this.hide(i));const r=document.body;let o;null!=r&&(o=r.scrollTop);const a=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}const i=this.ye();if(null!=i){const t=document.getElementById(i);t&&t.parentNode&&t.parentNode.removeChild(t)}null!=r&&"Safari"===s.A.browser&&(r.scrollTop=o),e?e():this.N()};n?setTimeout(a,u.Ah):a(),this.we&&this.we.focus()}Ie(){return document.createTextNode(this.message||"")}ze(t){let e="";this.message||this.header||!this.xe()||(e="Modal Image"),t.setAttribute("alt",e)}static uh(t){if(t.targetTouches&&t.targetTouches.length>1)return;const e=t.target;e&&e.classList&&e.classList.contains("ab-message-text")&&e.scrollHeight>e.clientHeight||document.querySelector(`.${u.lh}`)&&t.preventDefault()}Oh(t){const e=t.parentNode;this.xe()&&null!=e&&this.orientation!==u.Orientation.LANDSCAPE&&(null!=e.classList&&e.classList.add(u.lh),document.body.addEventListener("touchmove",u.uh,!!(0,r.CF)()&&{passive:!1})),t.className+=" "+u.ah}static _h(t){if(t.keyCode===o.c.mh&&!n.Ay.nn(n.lw.Lh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(const i of t){let t=null;(0,l.B)(i)&&i.contentWindow&&(t=i.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=t&&((0,r.jp)(t),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&(0,r.jp)(t)}}}Nh(){this.nh||n.Ay.nn(n.lw.Lh)||(document.addEventListener("keydown",u._h,!1),n.Ay.Sh((()=>{document.removeEventListener("keydown",u._h)})),this.nh=!0)}Y(t){const e={};return t?(e[u.tt.ea]=this.message,e[u.tt.ra]=this.messageAlignment,e[u.tt.Rh]=this.slideFrom,e[u.tt.bt]=this.extras,e[u.tt.sa]=this.triggerId,e[u.tt.ta]=this.clickAction,e[u.tt.URI]=this.uri,e[u.tt.ia]=this.openTarget,e[u.tt.aa]=this.dismissType,e[u.tt.oa]=this.duration,e[u.tt.pa]=this.icon,e[u.tt.ot]=this.imageUrl,e[u.tt.ma]=this.imageStyle,e[u.tt.na]=this.iconColor,e[u.tt.ua]=this.iconBackgroundColor,e[u.tt.ca]=this.backgroundColor,e[u.tt.fa]=this.textColor,e[u.tt.da]=this.closeButtonColor,e[u.tt.la]=this.animateIn,e[u.tt.ga]=this.animateOut,e[u.tt.ja]=this.header,e[u.tt.xa]=this.headerAlignment,e[u.tt.za]=this.headerTextColor,e[u.tt.ha]=this.frameColor,e[u.tt.va]=this.buttons,e[u.tt.wa]=this.cropType,e[u.tt.ya]=this.orientation,e[u.tt.Sa]=this.htmlId,e[u.tt.CSS]=this.css,e[u.tt.Z]=t,e[u.tt.ba]=this.messageExtras,e):e}}u.th={hh:4281545523,ih:4294967295,sh:4278219733,Mh:4293914607,Dh:4283782485,Eh:3224580915,eh:4288387995},u.Me={Ch:"hd",ke:"ias",dh:"of",Uh:"do",bh:"umt",Ph:"tf",ph:"te"},u.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},u.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},u.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},u.OpenTarget={NONE:"NONE",BLANK:"BLANK"},u.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},u.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},u.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},u.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},u.Ce={Xr:"SLIDEUP",Wr:"MODAL",Je:"MODAL_STYLED",Qr:"FULL",Vr:"WEB_HTML",je:"HTML",Se:"HTML_FULL"},u.Ah=500,u.fh=200,u.ah="ab-show",u.Ih="ab-hide",u.lh="ab-pause-scrolling",u.tt={ea:"m",ra:"ma",Rh:"sf",bt:"e",sa:"ti",ta:"ca",URI:"u",ia:"oa",aa:"dt",oa:"d",pa:"i",ot:"iu",ma:"is",na:"ic",ua:"ibc",ca:"bc",fa:"tc",da:"cbc",la:"ai",ga:"ao",ja:"h",xa:"ha",za:"htc",ha:"fc",va:"b",wa:"ct",ya:"o",Sa:"hi",CSS:"css",Z:"type",uo:"messageFields",ba:"me"}},4095:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(5001),s=i(1201);class r extends s.A{constructor(t,e,i,n,r,o,a,l,u,c,h,d,p,f,b,g,m,A,v,w,y,x,E,C,S,k,_,T){super(t,e,void 0,i,n,r,o,a,l=l||s.A.DismissType.MANUAL,u,c,h,d,p,f,b,g,m,A,v,w,y,x,E,C,S=S||s.A.CropType.FIT_CENTER,void 0,k,_,T),this.$e=s.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Ur(t){return new r(t[s.A.tt.ea],t[s.A.tt.ra],t[s.A.tt.bt],t[s.A.tt.sa],t[s.A.tt.ta],t[s.A.tt.URI],t[s.A.tt.ia],t[s.A.tt.aa],t[s.A.tt.oa],t[s.A.tt.pa],t[s.A.tt.ot],t[s.A.tt.ma],t[s.A.tt.na],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.fa],t[s.A.tt.da],t[s.A.tt.la],t[s.A.tt.ga],t[s.A.tt.ja],t[s.A.tt.xa],t[s.A.tt.za],t[s.A.tt.ha],(0,n.x)(t[s.A.tt.va]),t[s.A.tt.wa],t[s.A.tt.Sa],t[s.A.tt.CSS],t[s.A.tt.ba])}}r.it=s.A.Ce.Wr},917:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(1201),s=i(8412);class r extends n.A{constructor(t,e,i,s,r,o,a,l,u,c,h,d,p,f,b,g,m,A,v,w,y,x){g=g||n.A.th.Dh,b=b||n.A.th.Mh,super(t,e=e||n.A.TextAlignment.START,i,s,r,o,a,l,u,c,h,d,void 0,p,f,b,g,m,A,v,void 0,void 0,void 0,void 0,void 0,void 0,void 0,w,y,x),this.$e=n.A.TextAlignment.START}xe(){return!1}Ie(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message||"")),t}Oh(t){const e=t.getElementsByClassName("ab-in-app-message")[0];s.e0.co(e,!0,!0)||(this.slideFrom===n.A.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.Oh(t)}Y(){return super.Y(r.it)}static Ur(t){return new r(t[n.A.tt.ea],t[n.A.tt.ra],t[n.A.tt.Rh],t[n.A.tt.bt],t[n.A.tt.sa],t[n.A.tt.ta],t[n.A.tt.URI],t[n.A.tt.ia],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.pa],t[n.A.tt.ot],t[n.A.tt.na],t[n.A.tt.ua],t[n.A.tt.ca],t[n.A.tt.fa],t[n.A.tt.da],t[n.A.tt.la],t[n.A.tt.ga],t[n.A.tt.Sa],t[n.A.tt.CSS],t[n.A.tt.ba])}}r.it=n.A.Ce.Xr},5084:function(t,e,i){i.d(e,{B:function(){return n},U:function(){return s}});const n=t=>null!==t&&"IFRAME"===t.tagName;function s(t){var e;if("SCRIPT"===t.tagName)null===(e=t.parentNode)||void 0===e||e.replaceChild(function(t){const e=document.createElement("script");e.text=t.innerHTML;for(const i of t.attributes)e.setAttribute(i.name,i.value);return e}(t),t);else for(const e of t.childNodes)s(e);return t}},558:function(t,e,i){i.r(e),i.d(e,{default:function(){return b}});var n=i(2063),s=i(6499),r=i(9880),o=i(6238),a=function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(e),n=new Uint8Array(i.length);for(let t=0;t<i.length;++t)n[t]=i.charCodeAt(t);return n},l=i(663),u=i(312),c=i(5734),h=i(691),d=i(7442);class p{constructor(t,e,i,n,s,r,o,a,l,u){this.sn=t,this.rn=e,this.on=i,this.un=s,this.an=r,this.yt=o,this.cn=a,this.hn=l,this.u=u,this.sn=t,this.rn=e,this.on=i,this.fn=n+"/safari/"+e,this.un=s||"/service-worker.js",this.an=r,this.yt=o,this.cn=a||!1,this.hn=l||!1,this.u=u,this.ln=h.A.dn(),this.pn=h.A.bn()}mn(){return this.hn}yn(t,e,i,n,s){t.unsubscribe().then((t=>{t?this.vn(e,i,n,s):(o.A.error("Failed to unsubscribe device from push."),"function"==typeof s&&s(!1))})).catch((t=>{o.A.error("Push unsubscription error: "+t),"function"==typeof s&&s(!1)}))}gn(t,e,i){var n;const s=(t=>{if("string"==typeof t)return t;if(0!==t.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return t.endpoint;let e=t.endpoint;const i=t;return i.wn&&-1===t.endpoint.indexOf(i.wn)&&(e=t.endpoint+"/"+i.wn),e})(t);let r=null,a=null;const l=t;if(null!=l.getKey)try{const t=Array.from(new Uint8Array(l.getKey("p256dh"))),e=Array.from(new Uint8Array(l.getKey("auth")));r=btoa(String.fromCharCode.apply(null,t)),a=btoa(String.fromCharCode.apply(null,e))}catch(t){o.A.error((0,d.u)(t))}const u=(t=>{let e;return t.options&&(e=t.options.applicationServerKey)&&e.byteLength&&e.byteLength>0?btoa(String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))).replace(/\+/g,"-").replace(/\//g,"_"):null})(l);null===(n=this.sn)||void 0===n||n.kn(s,e,r,a,u),s&&"function"==typeof i&&i(s,r,a)}Pn(){var t;null===(t=this.sn)||void 0===t||t.Dn(!0)}Sn(t,e){var i;null===(i=this.sn)||void 0===i||i.Dn(!1),o.A.info(t),"function"==typeof e&&e(!1)}An(t,e,i,n){var s;if("default"===e.permission)try{window.safari.pushNotification.requestPermission(this.fn,t,{api_key:this.rn,device_id:(null===(s=this.on)||void 0===s?void 0:s.ce().id)||""},(e=>{"granted"===e.permission&&this.sn&&this.sn.setPushNotificationSubscriptionType(u.A.NotificationSubscriptionTypes.OPTED_IN),this.An(t,e,i,n)}))}catch(t){this.Sn("Could not request permission for push: "+t,n)}else"denied"===e.permission?this.Sn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",n):"granted"===e.permission&&(o.A.info("Device successfully subscribed to push."),this.gn(e.deviceToken,new Date,i))}requestPermission(t,e,i){const n=n=>{switch(n){case"granted":return void("function"==typeof t&&t());case"default":return void("function"==typeof e&&e());case"denied":return void("function"==typeof i&&i());default:o.A.error("Received unexpected permission result "+n)}};let s=!1;if("default"!==window.Notification.permission)n(Notification.permission);else{const t=window.Notification.requestPermission((t=>{s&&n(t)}));t?t.then((t=>{n(t)})):s=!0}}vn(t,e,i,n){const s={userVisibleOnly:!0};null!=e&&(s.applicationServerKey=e),t.pushManager.subscribe(s).then((t=>{o.A.info("Device successfully subscribed to push."),this.gn(t,new Date,i)})).catch((t=>{h.A.isPushBlocked()?(o.A.info("Permission for push notifications was denied."),"function"==typeof n&&n(!1)):(o.A.error("Push subscription failed: "+t),"function"==typeof n&&n(!0))}))}jn(){return this.cn?navigator.serviceWorker.getRegistration(this.un):navigator.serviceWorker.register(this.un).then((()=>navigator.serviceWorker.ready.then((t=>(t&&"function"==typeof t.update&&t.update().catch((t=>{o.A.info("ServiceWorker update failed: "+t)})),t)))))}xn(t){this.cn||(t.unregister(),o.A.info("Service worker successfully unregistered."))}subscribe(t,e){if(!h.A.isPushSupported())return o.A.info(p.Nn),void("function"==typeof e&&e(!1));if(this.ln){if(!this.cn&&null!=window.location){let t=this.un;-1===t.indexOf(window.location.host)&&(t=window.location.host+t),-1===t.indexOf(window.location.protocol)&&(t=window.location.protocol+"//"+t);const i=t.substr(0,t.lastIndexOf("/")+1);if(0!==c.uD.Un().indexOf(i))return o.A.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+t+")"),void("function"==typeof e&&e(!0))}if(h.A.isPushBlocked())return void this.Sn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",e);if(this.yt&&!this.yt.Wn()&&0===this.yt.ni())return o.A.info("Waiting for VAPID key from server config before subscribing to push."),void this.yt._n((()=>{this.subscribe(t,e)}));const i=()=>{o.A.info("Permission for push notifications was denied."),"function"==typeof e&&e(!1)},n=()=>{let t="Permission for push notifications was ignored.";h.A.isPushBlocked()&&(t+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),o.A.info(t),"function"==typeof e&&e(!0)},d=h.A.isPushPermissionGranted(),p=()=>{!d&&this.sn&&this.sn.setPushNotificationSubscriptionType(u.A.NotificationSubscriptionTypes.OPTED_IN),this.jn().then((i=>{if(null==i)return o.A.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof e&&e(!0));i.pushManager.getSubscription().then((n=>{var u;let c=null;if(null!=(null===(u=this.yt)||void 0===u?void 0:u.Wn())&&(c=a(this.yt.Wn())),n){let a,u=null,h=null;if(this.u&&(a=this.u.j(l.d.C.In)),a&&!(0,s.cy)(a)){let t;try{t=r.A.qn(a).Vn}catch(e){t=null}null==t||isNaN(t.getTime())||0===t.getTime()||(u=t,h=new Date(u),h.setMonth(u.getMonth()+6))}null!=c&&n.options&&n.options.applicationServerKey&&n.options.applicationServerKey.byteLength&&n.options.applicationServerKey.byteLength>0&&!(0,s.n4)(c,new Uint8Array(n.options.applicationServerKey))?(n.options.applicationServerKey.byteLength>12?o.A.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):o.A.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.yn(n,i,c,t,e)):n.expirationTime&&new Date(n.expirationTime).valueOf()<=(new Date).valueOf()?(o.A.info("Push subscription is expired, creating new subscription."),this.yn(n,i,c,t,e)):a&&(0,s.cy)(a)?this.yn(n,i,c,t,e):null==h?(o.A.info("No push subscription creation date found, creating new subscription."),this.yn(n,i,c,t,e)):h.valueOf()<=(new Date).valueOf()?(o.A.info("Push subscription older than 6 months, creating new subscription."),this.yn(n,i,c,t,e)):(o.A.info("Device already subscribed to push, sending existing subscription to backend."),this.gn(n,u,t))}else this.vn(i,c,t,e)})).catch((t=>{o.A.error("Error checking current push subscriptions: "+t)}))})).catch((t=>{o.A.error("ServiceWorker registration failed: "+t)}))};this.requestPermission(p,n,i)}else if(this.pn){if(null==this.an||""===this.an)return o.A.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari"),void("function"==typeof e&&e(!0));const i=window.safari.pushNotification.permission(this.an);this.An(this.an,i,t,e)}}unsubscribe(t,e){if(!h.A.isPushSupported())return o.A.info(p.Nn),void("function"==typeof e&&e());this.ln?navigator.serviceWorker.getRegistration().then((i=>{i?i.pushManager.getSubscription().then((n=>{n?(this.Pn(),n.unsubscribe().then((n=>{n?(o.A.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(o.A.error("Failed to unsubscribe device from push."),"function"==typeof e&&e()),this.xn(i)})).catch((t=>{o.A.error("Push unsubscription error: "+t),"function"==typeof e&&e()}))):(o.A.info("Device already unsubscribed from push."),"function"==typeof t&&t())})).catch((t=>{o.A.error("Error unsubscribing from push: "+t),"function"==typeof e&&e()})):(o.A.info("Device already unsubscribed from push."),"function"==typeof t&&t())})):this.pn&&(this.Pn(),o.A.info("Device unsubscribed from push."),"function"==typeof t&&t())}}p.Nn="Push notifications are not supported in this browser.";const f={t:!1,i:null,m:()=>(f.o(),f.i||(f.i=new p(n.Ay.pr(),n.Ay.Ma(),n.Ay.te(),n.Ay.Vs(),n.Ay.nn(n.lw._a),n.Ay.nn(n.lw.ka),n.Ay.ir(),n.Ay.nn(n.lw.qa),n.Ay.nn(n.lw.Aa),n.Ay.l())),f.i),o:()=>{f.t||(n.Ay.g(f),f.t=!0)},destroy:()=>{f.i=null,f.t=!1}};var b=f},1380:function(t,e,i){i.r(e),i.d(e,{requestPushPermission:function(){return r}});var n=i(2063),s=i(558);function r(t,e){if(n.Ay.X())return s.default.m().subscribe(((e,i,s)=>{const r=n.Ay.cr();r&&r.requestImmediateDataFlush(),"function"==typeof t&&t(e,i,s)}),e)}},2045:function(t,e,i){i.r(e),i.d(e,{unregisterPush:function(){return r}});var n=i(2063),s=i(558);function r(t,e){if(n.Ay.X())return s.default.m().unsubscribe(t,e)}},691:function(t,e){const i={dn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,bn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>i.dn()||i.bn(),isPushBlocked:()=>{const t=i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=i.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>i.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Wi:()=>!i.isPushBlocked()&&i.isPushSupported()&&!i.isPushPermissionGranted()};e.A=i},312:function(t,e,i){i.d(e,{A:function(){return u}});var n=i(6499),s=i(6238),r=i(804),o=i(8457),a=i(7276),l=i(5098);class u{constructor(t,e){this.wt=t,this.Ei=e,this.wt=t,this.Ei=e}getUserId(t){const e=this.wt.getUserId();if("function"!=typeof t)return e;s.A.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),t(e)}addAlias(t,e){return!(0,o.rK)(t,"add alias","the alias",!1)||t.length<=0?(s.A.error("addAlias requires a non-empty alias"),!1):!(0,o.rK)(e,"add alias","the label",!1)||e.length<=0?(s.A.error("addAlias requires a non-empty label"),!1):this.Ei.Cn(t,e).L}setFirstName(t){return!!(0,o.rK)(t,"set first name","the firstName",!0)&&this.wt.nu("first_name",t)}setLastName(t){return!!(0,o.rK)(t,"set last name","the lastName",!0)&&this.wt.nu("last_name",t)}setEmail(t){return null===t||(0,o.B9)(t)?this.wt.nu("email",t):(s.A.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!(0,n.BY)(u.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.wt.nu("gender",t)}setDateOfBirth(t,e,i){return null===t&&null===e&&null===i?this.wt.nu("dob",null):(t=null!=t?parseInt(t.toString()):null,e=null!=e?parseInt(e.toString()):null,i=null!=i?parseInt(i.toString()):null,null==t||null==e||null==i||isNaN(t)||isNaN(e)||isNaN(i)||e>12||e<1||i>31||i<1?(s.A.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.wt.nu("dob",`${t}-${e}-${i}`))}setCountry(t){return!!(0,o.rK)(t,"set country","the country",!0)&&this.wt.nu("country",t)}setHomeCity(t){return!!(0,o.rK)(t,"set home city","the homeCity",!0)&&this.wt.nu("home_city",t)}setLanguage(t){return!!(0,o.rK)(t,"set language","the language",!0)&&this.wt.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!(0,n.BY)(u.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!(0,n.BY)(u.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("push_subscribe",t)}setPhoneNumber(t){return!!(0,o.rK)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(u.En)?this.wt.nu("phone",t):(s.A.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,i,n,r){return null==t||null==e?(s.A.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t.toString()),e=parseFloat(e.toString()),null!=i&&(i=parseFloat(i.toString())),null!=n&&(n=parseFloat(n.toString())),null!=r&&(r=parseFloat(r.toString())),isNaN(t)||isNaN(e)||null!=i&&isNaN(i)||null!=n&&isNaN(n)||null!=r&&isNaN(r)?(s.A.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(s.A.error("Cannot set last-known location - latitude and longitude are bounded by 90 and 180 respectively."),!1):null!=i&&i<0||null!=r&&r<0?(s.A.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.Ei.setLastKnownLocation(this.wt.getUserId(),t,e,n,i,r).L)}setCustomUserAttribute(t,e,i){if(!(0,o.ZJ)(t))return!1;const s=e=>{const[i]=(0,o.fB)(e,a.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute");return i};if((0,n.cy)(e)){const[i,n]=(0,o.Z2)(t,e);if(!i&&!n&&0!==e.length)return!1;if(i||0===e.length)return this.Ei.Fn(r.w.$n,t,e).L;for(const t of e)if(!s(t))return!1}else if((0,n.Gv)(e)){if(!s(e))return!1;if(i)return this.Ei.Fn(r.w.Bn,t,e).L}else{if(void 0===e||!(0,o.uZ)(e))return!1;if((0,n.$P)(e)&&(e=(0,l.EQ)(e)),"string"==typeof e&&!(0,o.Dz)(e,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.wt.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!(0,o.Dz)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!(0,o.Dz)(e,"add to custom user attribute array","the given value"))&&this.Ei.Fn(r.w.Ln,t,e).L}removeFromCustomAttributeArray(t,e){return!!(0,o.Dz)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!(0,o.Dz)(e,"remove from custom user attribute array","the given value"))&&this.Ei.Fn(r.w.Rn,t,e).L}incrementCustomUserAttribute(t,e){if(!(0,o.Dz)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const i=parseInt(e.toString());return isNaN(i)||i!==parseFloat(e.toString())?(s.A.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.Ei.Fn(r.w.On,t,i).L}setCustomLocationAttribute(t,e,i){return!!(0,o.Dz)(t,"set custom location attribute","the given key")&&((null!==e||null!==i)&&(e=null!=e?parseFloat(e.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==e&&null!=i||null!=e&&null==i||null!=e&&(isNaN(e)||e>90||e<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(s.A.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by 90 and 180 respectively, or must both be null for removal."),!1):this.Ei.Gn(t,e,i).L)}addToSubscriptionGroup(t){return!(0,o.rK)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(s.A.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ei.Hn(t,u.Kn.SUBSCRIBED).L}removeFromSubscriptionGroup(t){return!(0,o.rK)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(s.A.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.Ei.Hn(t,u.Kn.UNSUBSCRIBED).L}kn(t,e,i,n,s){this.wt.kn(t,e,i,n,s),this.Ei.Mn()}Dn(t){this.wt.Dn(t)}}u.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},u.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.En=/^[0-9 .\\(\\)\\+\\-]+$/,u.Kn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.Yn="user_id",u.lu="custom",u.lr=997},3981:function(t,e,i){i.d(e,{A:function(){return r}});var n=i(6238),s=i(3543);class r{constructor(t,e){this.cards=t,this.lastUpdated=e,this.cards=t,this.lastUpdated=e}getUnreadCardCount(){let t=0;for(const e of this.cards)e.viewed||e instanceof s.A||t++;return t}dr(){n.A.error("Must be implemented in a subclass")}logCardImpressions(t){n.A.error("Must be implemented in a subclass")}logCardClick(t){n.A.error("Must be implemented in a subclass")}sr(){n.A.error("Must be implemented in a subclass")}}r.ur=6e4,r.Ah=500,r.Co=1e4},4188:function(t,e,i){i.d(e,{A:function(){return n}});class n{constructor(){}Rs(t){}changeUser(t=!1){}clearData(t=!1){}}},7276:function(t,e,i){i.d(e,{$k:function(){return n},Fn:function(){return p},KG:function(){return l},Og:function(){return c},PC:function(){return b},RW:function(){return o},Zt:function(){return h},aV:function(){return a},et:function(){return g},fX:function(){return s},mO:function(){return f},s1:function(){return r},uy:function(){return d},xE:function(){return u}});const n=100,s="inAppMessage must be an InAppMessage object",r="must be a Card object",o=500,a="logCustomEvent",l="setCustomUserAttribute",u="Braze must be initialized before calling methods.",c=5,h=90,d=30,p=30,f=72e5,b=3,g=1},4334:function(t,e,i){var n=i(6238),s=i(2063),r=i(7689),o=i(6685);const a={q:(t,e,i)=>{var a,l;const u=new o.A,c=s.Ay.zr();if(!c)return n.A.info(`Not logging event with type "${t}" because the current session ID could not be found.`),u;const h=c.xo();return u.ge.push(new r.A(i||(null===(a=s.Ay.er())||void 0===a?void 0:a.getUserId()),t,(new Date).valueOf(),h,e)),u.L=(null===(l=s.Ay.l())||void 0===l?void 0:l.zo(u.ge))||!1,u}};e.A=a},5297:function(t,e,i){i.d(e,{Ql:function(){return y},ID:function(){return E},UH:function(){return S},Nc:function(){return _},Y9:function(){return k},kz:function(){return N},Z7:function(){return T}});var n=i(3981),s=i(8458),r=i(8412),o=i(3543),a=i(5563),l=i(6499),u=i(2704),c=i(2063),h=i(8026),d=i(6238),p={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"   .     ",FEED_TIMEOUT_MESSAGE:"   "},cs:{NO_CARDS_MESSAGE:"V tuto chvli pro vs nemme dn aktualizace.<br/>Zkontrolujte prosm znovu pozdji.",FEED_TIMEOUT_MESSAGE:"Prosm zkuste to znovu pozdji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>Prv venligst senere.",FEED_TIMEOUT_MESSAGE:"Prv venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfgbar.<br/>Bitte spter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte spter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor comprubelo ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor intntelo ms tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizacin.<br/>Vuelva a verificar ms tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo ms tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"Pivityksi ei ole saatavilla.<br/>Tarkista myhemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"Yrit myhemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise  jour disponible.<br/>Veuillez vrifier ultrieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez ressayer ultrieurement."},he:{NO_CARDS_MESSAGE:".  .    ",FEED_TIMEOUT_MESSAGE:".   "},hi:{NO_CARDS_MESSAGE:"            .",FEED_TIMEOUT_MESSAGE:"     ."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare pi tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare pi tardi."},ja:{NO_CARDS_MESSAGE:"<br/>",FEED_TIMEOUT_MESSAGE:""},ko:{NO_CARDS_MESSAGE:" .    .",FEED_TIMEOUT_MESSAGE:"   ."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prv igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>Prosz sprawdzi ponownie pniej.",FEED_TIMEOUT_MESSAGE:"Prosz sprbowa ponownie pniej."},pt:{NO_CARDS_MESSAGE:"No temos atualizaes.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"No temos nenhuma atualizao.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:",   ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>Frsk igen senare.",FEED_TIMEOUT_MESSAGE:"Frsk igen senare."},th:{NO_CARDS_MESSAGE:" .",FEED_TIMEOUT_MESSAGE:"."},uk:{NO_CARDS_MESSAGE:" .<br/>,   .",FEED_TIMEOUT_MESSAGE:" ,    ."},vi:{NO_CARDS_MESSAGE:"Chng ti khng c cp nht no.<br/>Vui lng kim tra li sau.",FEED_TIMEOUT_MESSAGE:"Vui lng th li sau."},"zh-hk":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hans":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-hant":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},"zh-tw":{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."},zh:{NO_CARDS_MESSAGE:".<br/>.",FEED_TIMEOUT_MESSAGE:"."}};class f{constructor(t,e=!1){if(this.language=t,null!=t&&(t=t.toLowerCase()),null!=t&&null==p[t]){const e=t.indexOf("-");e>0&&(t=t.substring(0,e))}if(null==p[t]){const i="Braze does not yet have a localization for language "+t+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";e?d.A.error(i):d.A.info(i),t="en"}this.language=t}get(t){return p[this.language][t]}}const b={t:!1,i:null,m:()=>{if(b.o(),!b.i){let t=h.A.language,e=!1;c.Ay.nn(c.lw.zn)&&(t=c.Ay.nn(c.lw.zn),e=!0),b.i=new f(t,e)}return b.i},o:()=>{b.t||(c.Ay.g(b),b.t=!0)},destroy:()=>{b.i=null,b.t=!1}};var g=b,m=i(4825),A=i(5675),v=i(8457),w=i(8664);const y="data-last-requested-refresh",x={};function E(t){t&&(t.className=t.className.replace("ab-show","ab-hide"),setTimeout((()=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),n.A.Ah));const e=t.getAttribute("data-update-subscription-id");null!=e&&(0,m.a)(e);const i=t.getAttribute("data-listener-id");null!=i&&(window.removeEventListener("scroll",x[i]),delete x[i])}function C(t,e){const i=document.createElement("div");if(i.className="ab-feed-body",i.setAttribute("aria-label","Feed"),i.setAttribute("role","feed"),null==t.lastUpdated){const t=document.createElement("div");t.className="ab-no-cards-message";const e=document.createElement("i");e.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",t.appendChild(e),i.appendChild(t)}else{let n=!1;const r=e=>t.logCardClick(e);for(const a of t.cards){const l=a instanceof o.A;!l||t.dr()?(i.appendChild((0,s.ZZ)(a,r,e)),n=n||!l):d.A.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!n){const t=document.createElement("div");t.className="ab-no-cards-message",t.innerHTML=g.m().get("NO_CARDS_MESSAGE")||"",t.setAttribute("role","article"),i.appendChild(t)}}return i}function S(t,e){if(null!=t&&null!=e){const i=[],n=e.querySelectorAll(".ab-card");t.yo||(t.yo={});for(let e=0;e<n.length;e++){const o=(0,s.O_)(n[e]),a=(0,r.Kz)(n[e]),l=(0,r.K)(n[e]);if(t.yo[o]){a||l||(0,s.GH)(n[e]);continue}let u=(0,s.sf)(n[e]),c=(0,s.M_)(n[e]);const h=u,d=c;if(!u&&a&&(u=!0,(0,s.M4)(n[e])),!c&&l&&(c=!0,(0,s.MX)(n[e])),u&&c){if(h&&d)continue;for(const e of t.cards)if(e.id===o){t.yo[e.id]=!0,i.push(e);break}}}i.length>0&&t.logCardImpressions(i)}}function k(t,e){if(null==t||null==e)return;e.setAttribute("aria-busy","true");const i=e.querySelectorAll(".ab-refresh-button")[0];null!=i&&(i.className+=" fa-spin");const s=(new Date).valueOf().toString();e.setAttribute("data-last-requested-refresh",s),setTimeout((()=>{if(e.getAttribute("data-last-requested-refresh")===s){const t=e.querySelectorAll(".fa-spin");for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/fa-spin/g,"");const i=e.querySelectorAll(".ab-initial-spinner")[0];if(null!=i){const t=document.createElement("span");t.innerHTML=g.m().get("FEED_TIMEOUT_MESSAGE")||"",null!=i.parentNode&&(i.parentNode.appendChild(t),i.parentNode.removeChild(i))}"true"===e.getAttribute("aria-busy")&&e.setAttribute("aria-busy","false")}}),n.A.Co),t.sr()}function _(t,e,i){const n=document.createElement("div");n.className="ab-feed ab-hide ab-effect-slide",n.setAttribute("role","dialog"),n.setAttribute("aria-label","Feed"),n.setAttribute("tabindex","-1");const s=document.createElement("div");s.className="ab-feed-buttons-wrapper",s.setAttribute("role","group"),n.appendChild(s);const r=document.createElement("i");r.className="fa fa-times ab-close-button",r.setAttribute("aria-label","Close Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");const o=t=>{E(n),t.stopPropagation()};r.addEventListener("keydown",(t=>{t.keyCode!==u.c.Fo&&t.keyCode!==u.c.To||o(t)})),r.onclick=o;const a=document.createElement("i");a.className="fa fa-refresh ab-refresh-button",t&&null==t.lastUpdated&&(a.className+=" fa-spin"),a.setAttribute("aria-label","Refresh Feed"),a.setAttribute("tabindex","0"),a.setAttribute("role","button");const l=e=>{k(t,n),e.stopPropagation()};a.addEventListener("keydown",(t=>{t.keyCode!==u.c.Fo&&t.keyCode!==u.c.To||l(t)})),a.onclick=l,s.appendChild(a),s.appendChild(r),n.appendChild(C(t,e));const c=()=>S(t,n);if(n.addEventListener("scroll",c),!i){window.addEventListener("scroll",c);const t=A.A.W();x[t]=c,n.setAttribute("data-listener-id",t)}return n}function T(t,e,i,n,s){if(!(0,l.cy)(e))return;const r=[];for(const t of e)if(t instanceof a.A){if(t.url&&v.nx.test(t.url)){const e=(0,w.jj)(t.url);if((0,w.qj)(e)){d.A.error((0,w.$6)(w.mY.Vi,"Content Card"));continue}}r.push(t)}if(t.cards=r,t.lastUpdated=i,null!=n)if(n.setAttribute("aria-busy","false"),null==t.lastUpdated)E(n);else{const e=n.querySelectorAll(".ab-feed-body")[0];if(null!=e){const i=C(t,s);e.parentNode&&e.parentNode.replaceChild(i,e),S(t,i.parentNode)}}}function N(t,e){t&&e.setAttribute("data-update-subscription-id",t)}},2063:function(t,e,i){i.d(e,{lw:function(){return $},Ay:function(){return H}});var n=i(663),s=i(2861),r=i(858),o=i(6238);class a{constructor(t,e,i){this.u=t,this.Jn=e,this.Qn=i,this.u=t,this.Jn=e||!1,this.Qn=i,this.Xn=new s.A,this.Zn=0,this.gh=1}Fh(){return this.Jn}kh(){return this.u.j(n.d.C.wh)}setSdkAuthenticationSignature(t){const e=this.kh();this.u.k(n.d.C.wh,t);const i=r.A.Yt.Qt;new r.A(i,o.A).setItem(i.ss.jh,this.gh,t),e!==t&&this.Xs()}xh(){this.u.hi(n.d.C.wh);const t=r.A.Yt.Qt;new r.A(t,o.A).re(t.ss.jh,this.gh)}subscribeToSdkAuthenticationFailures(t){return this.Qn.It(t)}qh(t){this.Qn.Dt(t)}yh(){this.Xn.removeAllSubscriptions()}Bh(){this.Zn+=1}Gh(){return this.Zn}Xs(){this.Zn=0}}var l=i(4188),u=i(8026);class c{constructor(t){this.id=t,this.id=t}Mr(){const t={};return null!=this.browser&&(t.browser=this.browser),null!=this.Ta&&(t.browser_version=this.Ta),null!=this.os&&(t.os_version=this.os),null!=this.resolution&&(t.resolution=this.resolution),null!=this.language&&(t.locale=this.language),null!=this.timeZone&&(t.time_zone=this.timeZone),null!=this.userAgent&&(t.user_agent=this.userAgent),t}}var h=i(5767),d=i(1999),p=i(5675),f=i(6499),b=i(7442);class g{constructor(t,e){this.u=t,this.Ia=e,this.u=t,null==e&&(e=(0,f.zu)(h.A)),this.Ia=e}ce(t=!0){let e=this.u.tu(n.d.iu.Uo);null==e&&(e=new d.A(p.A.W()),t&&this.u.uu(n.d.iu.Uo,e));const i=new c(e.eu);for(let t=0;t<this.Ia.length;t++)switch(this.Ia[t]){case h.A.BROWSER:i.browser=u.A.browser;break;case h.A.BROWSER_VERSION:i.Ta=u.A.version;break;case h.A.OS:i.os=this.Da();break;case h.A.RESOLUTION:i.Oa=screen.width+"x"+screen.height;break;case h.A.LANGUAGE:i.language=u.A.language;break;case h.A.TIME_ZONE:i.timeZone=this.Ca(new Date);break;case h.A.USER_AGENT:i.userAgent=u.A.userAgent}return i}Da(){if(u.A.Fa())return u.A.Fa();const t=this.u.j(n.d.C.Ga);return t&&t.os_version?t.os_version:u.A.Da()}Ca(t){let e=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=t&&""!==t)return t}}catch(t){o.A.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+(0,b.u)(t)),e=!0}if(e)return"";const i=t.getTimezoneOffset();return this.Ja(i)}Ja(t){const e=Math.trunc(t/60),i=Math.trunc(t%60);let n="GMT";return 0!==t&&(n+=t<0?"+":"-",n+=("00"+Math.abs(e)).slice(-2)+":"+("00"+Math.abs(i)).slice(-2)),n}}var m=i(4400),A=i(7689),v=i(5098),w=i(4334),y=i(804),x=i(7927),E=i(7276),C=i(2081);class S{constructor(t,e,i,n,s,r,o,a,l,u,c,h){this.on=t,this.u=e,this.Go=i,this.wt=n,this.di=s,this.yt=r,this.rn=o,this.Ko=a,this.Wo=l,this.Vo=u,this.appVersion=c,this.Xh=h,this.Hh=t=>null==t?"":`${t} `,this.on=t,this.u=e,this.Go=i,this.wt=n,this.di=s,this.yt=r,this.rn=o,this.Ko=a,this.Wo=l,this.Vo=u,this.appVersion=c,this.Xh=h,this.Yh=["npm"]}Ps(t,e=!1,i=!1){const s=this.on.ce(!i),r=s.Mr(),o=this.u.j(n.d.C.Ga);(0,f.n4)(o,r)||(t.device=r),t.api_key=this.rn,t.time=(0,v.UK)((new Date).valueOf(),!0);const a=this.u.j(n.d.C.Jh)||[],l=this.u.j(n.d.C.Qh)||"";if(this.Yh.length>0&&(!(0,f.n4)(a,this.Yh)||l!==this.di.ki())&&(t.sdk_metadata=this.Yh),t.sdk_version=this.Wo,this.Vo&&(t.sdk_flavor=this.Vo),t.app_version=this.appVersion,t.app_version_code=this.Xh,t.device_id=s.id,e){const e=this.wt.getUserId();null!=e&&(t.user_id=e)}if(!t.user_id&&!this.Go.Fh()){const e=(0,C.b)(this.u);e&&(t.alias=e)}return t}Ws(t,e,i){const n=e.auth_error,s=e.error;if(!n&&!s)return!0;if(n){let e;this.Go.Bh();const s={errorCode:n.error_code};for(const t of i)(0,f.cy)(t)&&"X-Braze-Auth-Signature"===t[0]&&(s.signature=t[1]);t.respond_with&&t.respond_with.user_id?s.userId=t.respond_with.user_id:t.user_id&&(s.userId=t.user_id);const r=n.reason;return r?(s.reason=r,e=`due to ${r}`):e=`with error code ${n.error_code}.`,this.Go.Fh()||(e+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),o.A.error(`SDK Authentication failed ${e}`),this.Zh(t.events||[],t.attributes||[]),this.Go.qh(s),!1}if(s){let i,n=s;switch(n){case m.A.Ra:return i="Received successful response with empty body.",w.A.q(y.w.Ms,{e:i}),o.A.info(i),!1;case m.A.Ba:return i="Received successful response with invalid JSON",w.A.q(y.w.Ms,{e:i+": "+e.response}),o.A.info(i),!1;case m.A.Xa:n=`The API key "${t.api_key}" is invalid for the baseUrl ${this.Ko}`;break;case m.A.Na:n="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case m.A.$a:n="No device identifier. Please contact support@braze.com"}o.A.error("Backend error: "+n)}return!1}Ea(t,e,i,n){return!!(t&&0!==t.length||e&&0!==e.length||i||n)}Ka(t,e,i,n,s=!1){const r=[],o=t=>t||"",a=o(this.wt.getUserId());let l=this.Zi(t,e);const u=[],c=[];let h,d=null;if(i.length>0){const t=[];for(const e of i){if(h=e.Mr(),this.Go.Fh()){if(a&&!h.user_id){d||(d={}),d.events||(d.events=[]),d.events.push(h);continue}if(o(h.user_id)!==a){c.push(h);continue}}t.push(h)}t.length>0&&(l.events=t)}if(n.length>0){const t=[];for(const e of n)e&&(this.Go.Fh()&&o(e.user_id)!==a?u.push(e):t.push(e));t.length>0&&(l.attributes=t)}if(this.Zh(c,u),l=this.Ps(l,!0,s),d){d=this.Ps(d,!1,s);const t={requestData:d,headers:this._s(d,x.A.Gs.La)};r.push(t)}if(l&&!this.Ea(l.events,l.attributes,t,e))return d?r:null;const p={requestData:l,headers:this._s(l,x.A.Gs.La)};return r.push(p),r}Zh(t,e){if(t){const e=[];for(const i of t){const t=A.A.fromJson(i);t.time=(0,v.YX)(t.time),e.push(t)}this.u.zo(e)}if(e)for(const t of e)this.u.Pa(t)}Zs(t,e){let i="HTTP error ";null!=t&&(i+=t+" "),i+=e,o.A.error(i)}qr(t){return w.A.q(y.w.Ua,{n:t})}Zi(t,e,i){const n={};t&&(n.feed=!0),e&&(n.triggers=!0);const s=null!=i?i:this.wt.getUserId();if(s&&(n.user_id=s),!n.user_id&&!this.Go.Fh()){const t=(0,C.b)(this.u);t&&(n.alias=t)}return n.config={config_time:this.yt.ni()},{respond_with:n}}Ha(t){const e=(new Date).valueOf();let i=E.mO.toString();const n=x.A.Wa(this.u,t);return-1!==n&&(i=(e-n).toString()),i}_s(t,e,i=!1){const s=[["X-Braze-Api-Key",this.rn]],r=this.Ha(e);s.push(["X-Braze-Last-Req-Ms-Ago",r]);const o=x.A.Ya(this.u,e).toString();s.push(["X-Braze-Req-Attempt",o]);let a=!1;if(null!=t.respond_with&&t.respond_with.triggers&&(s.push(["X-Braze-TriggersRequest","true"]),a=!0),null!=t.respond_with&&t.respond_with.feed&&(s.push(["X-Braze-FeedRequest","true"]),a=!0),e===x.A.Gs.Bs){s.push(["X-Braze-ContentCardsRequest","true"]);let t=this.u.j(n.d.C.As);t&&i||(t=0,this.u.k(n.d.C.As,t)),s.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),a=!0}if(e===x.A.Gs.qi&&(s.push(["X-Braze-FeatureFlagsRequest","true"]),a=!0),a&&s.push(["X-Braze-DataRequest","true"]),this.Go.Fh()){const t=this.Go.kh();null!=t&&s.push(["X-Braze-Auth-Signature",t])}return s}Qa(t,e,i,n){window.setTimeout((()=>{o.A.info(`Retrying rate limited ${this.Hh(n)}SDK request.`),this.Hs(e,i,n)}),t)}Hs(t,e,i){const s=this.Va();if(!s.Za)return o.A.info(`${this.Hh(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(s.au/1e3)} seconds.`),void this.Qa(s.au,t,e,i);this.u.k(n.d.C.du,(new Date).valueOf());const r=t.device;r&&r.os_version instanceof Promise?r.os_version.then((i=>{t.device.os_version=i,e()})):e()}li(t){var e;null===(e=this.u)||void 0===e||e.k(n.d.C.fu,t)}ui(){var t;return null===(t=this.u)||void 0===t?void 0:t.j(n.d.C.fu)}Ru(t,e,i,n){let s=this.ui();(null==s||isNaN(s))&&(s=e);const r=(t-n)/1e3;return s=Math.min(s+r/i,e),s}vu(t,e){return Math.max(0,(1-t)*e*1e3)}Va(){var t,e,i;const s={Za:!0,au:0},r=null===(t=this.u)||void 0===t?void 0:t.j(n.d.C.du);if(null==r||isNaN(r))return s;const o=(null===(e=this.yt)||void 0===e?void 0:e.pu())||-1,a=(null===(i=this.yt)||void 0===i?void 0:i.gu())||-1;if(-1===o||-1===a)return s;const l=(new Date).valueOf();let u=this.Ru(l,o,a,r);return u<1?(s.Za=!1,s.au=this.vu(u,a),s):(u=Math.trunc(u)-1,this.li(u),s)}Xs(){this.Go.Xs()}Vs(){return this.Ko}addSdkMetadata(t){for(const e of t)-1===this.Yh.indexOf(e)&&this.Yh.push(e)}}var k=i(9303),_=i(4956),T=i(6685),N=i(691);class I{constructor(t,e,i,n,r,o,a,l,u,c){this.rn=t,this.baseUrl=e,this.di=i,this.on=n,this.wt=r,this.yt=o,this.u=a,this.bu=l,this.Go=u,this.qt=c,this.rn=t,this.baseUrl=e,this.wu=0,this.fE=a.OE()||0,this.ku=null,this.di=i,this.on=n,this.wt=r,this.yt=o,this.u=a,this.Go=u,this.qt=c,this.bu=l,this.yu=new s.A,this.ju=null,this.Su=50,this.Au=!1}$u(t,e){return!t&&!e&&this.Go.Gh()>=this.Su}qu(t){let e=this.di.El();if(t.length>0){const i=this.wt.getUserId();for(const n of t){const t=!n.userId&&!i||n.userId===i;n.type===y.w.kl&&t&&(e=!0)}}return e}Cu(t=!1,e=!1,i=!0,s,r,a,l=!1,u=!1){i&&this.Du();const c=this.u.hE(),h=this.u.gE();let d=!1;const p=(t,e)=>{let o=!1;x.A.Os(this.u,x.A.Gs.La,(new Date).valueOf()),k.A.Qs({url:this.baseUrl+"/data/",data:t,headers:e,L:i=>{null!=t.respond_with&&t.respond_with.triggers&&(this.wu=Math.max(this.wu-1,0)),this.qt.Ws(t,i,e)?(this.Go.Xs(),this.yt.ul(i),null!=t.respond_with&&t.respond_with.user_id!=this.wt.getUserId()||(null!=t.device&&this.u.k(n.d.C.Ga,t.device),null!=t.sdk_metadata&&(this.u.k(n.d.C.Jh,t.sdk_metadata),this.u.k(n.d.C.Qh,this.di.ki())),this.bu(i),x.A.Ys(this.u,x.A.Gs.La,1),"function"==typeof s&&s())):i.auth_error&&(o=!0)},error:()=>{null!=t.respond_with&&t.respond_with.triggers&&(this.wu=Math.max(this.wu-1,0)),this.qt.Zh(t.events,t.attributes),"function"==typeof r&&r()},ti:t=>{if("function"==typeof a&&a(t),i&&!d){if(t&&!o)this.Fu();else{x.A.si(this.u,x.A.Gs.La);let t=this.ku;(null==t||t<1e3*this.fE)&&(t=1e3*this.fE),this.Fu(Math.min(3e5,(0,_.C)(1e3*this.fE,3*t)))}d=!0}}})},f=this.qu(c),b=e||f;if(this.$u(l,f))return void o.A.info("Declining to flush data due to 50 consecutive authentication failures");if(i&&!this.qt.Ea(c,h,t,b))return this.Fu(),void("function"==typeof a&&a(!0));const g=this.qt.Ka(t,b,c,h,u);b&&this.wu++;let m=!1;if(g)for(const t of g)this.qt.Hs(t.requestData,(()=>p(t.requestData,t.headers)),x.A.ii.La),m=!0;this.Go.Fh()&&i&&!m?this.Fu():f&&(o.A.info("Invoking new session subscriptions"),this.yu.Dt())}Tu(){return this.wu>0}Fu(t=1e3*this.fE){this.Au||(this.Du(),this.ju=window.setTimeout((()=>{if(document.hidden){const t="visibilitychange",e=()=>{document.hidden||(document.removeEventListener(t,e,!1),this.Cu())};document.addEventListener(t,e,!1)}else this.Cu()}),t),this.ku=t)}Du(){null!=this.ju&&(clearTimeout(this.ju),this.ju=null)}initialize(){this.Au=!1,this.Fu()}destroy(){this.yu.removeAllSubscriptions(),this.Go.yh(),this.Du(),this.Au=!0,this.Cu(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this.ju=null}mr(t){return this.yu.It(t)}openSession(){const t=this.di.ki()!==this.di.xo();t&&(this.u.cE(n.d.iu.Uo),this.u.cE(n.d.iu.su)),this.Cu(void 0,!1,void 0,(()=>{this.u.hi(n.d.C.Ii)})),this.Mn(),t&&Promise.resolve().then(i.bind(i,558)).then((t=>{if(this.Au)return;const e=t.default.m();if(null!=e&&(N.A.isPushPermissionGranted()||N.A.isPushBlocked())){const t=()=>{e.mn()?o.A.info("Push token maintenance is disabled, not refreshing token for backend."):e.subscribe()},i=(e,i)=>{i&&t()},s=()=>{const e=this.u.j(n.d.C.In);(null==e||e)&&t()},a=r.A.Yt.Qt;new r.A(a,o.A).jr(a.ss.cu,i,s)}}))}Lu(){this.u.hi(n.d.C.Ti),this.u.hi(n.d.C.Cs),this.u.hi(n.d.C.Lr)}changeUser(t,e,i){const s=this.wt.getUserId();if(s!==t){this.di.ql(),this.Lu(),null!=s&&this.Cu(void 0,!1,void 0,void 0,void 0),this.wt.ou(t),i?this.Go.setSdkAuthenticationSignature(i):this.Go.xh();for(let t=0;t<e.length;t++)e[t].changeUser(null==s);null!=s&&this.u.hi(n.d.C.J),this.u.hi(n.d.C.Ga),this.u.hi(n.d.C.ai),this.u.hi(n.d.C.SE),this.openSession(),o.A.info('Changed user to "'+t+'".')}else{let e="Doing nothing.";i&&this.Go.kh()!==i&&(this.Go.setSdkAuthenticationSignature(i),e="Updated SDK authentication signature"),o.A.info(`Current user is already ${t}. ${e}`)}}requestImmediateDataFlush(t){this.Du(),this.di.xo(),this.Cu(void 0,void 0,void 0,void 0,(()=>{o.A.error("Failed to flush data, request will be retried automatically.")}),t,!0)}requestFeedRefresh(){this.di.xo(),this.Cu(!0)}$r(t,e){this.di.xo(),o.A.info("Requesting explicit trigger refresh."),this.Cu(void 0,!0,void 0,t,e)}Cn(t,e){const i=y.w.Mu,s={a:t,l:e},r=w.A.q(i,s);return r&&(o.A.info(`Logged alias ${t} with label ${e}`),this.u.k(n.d.C.SE,s)),r}Fn(t,e,i){if(this.yt.hu(e))return o.A.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new T.A;const n={key:e,value:i},s=w.A.q(t,n);if(s){const t="object"==typeof i?JSON.stringify(i,null,2):i;o.A.info(`Logged custom attribute: ${e} with value: ${t}`)}return s}setLastKnownLocation(t,e,i,n,s,r){const a={latitude:e,longitude:i};null!=n&&(a.altitude=n),null!=s&&(a.ll_accuracy=s),null!=r&&(a.alt_accuracy=r);const l=w.A.q(y.w.Pu,a,t||void 0);return l&&o.A.info(`Set user last known location as ${JSON.stringify(a,null,2)}`),l}kr(t,e){const i=this.di.xo();return new A.A(this.wt.getUserId(),y.w.xu,t,i,{cid:e})}Iu(t,e){return new r.A(t,e)}Mn(){const t=r.A.Yt.Qt;this.Iu(t,o.A).setItem(t.ss.La,1,{baseUrl:this.baseUrl,data:{api_key:this.rn,device_id:this.on.ce().id},userId:this.wt.getUserId(),sdkAuthEnabled:this.Go.Fh()})}yr(t){for(const e of t)if(e.api_key===this.rn)this.qt.Zh(e.events,e.attributes);else{const t=r.A.Yt.Qt;new r.A(t,o.A).setItem(t.ss.wr,p.A.W(),e)}}Gn(t,e,i){if(this.yt.hu(t))return o.A.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new T.A;let n,s;return null===e&&null===i?(n=y.w.Nu,s={key:t}):(n=y.w.Ou,s={key:t,latitude:e,longitude:i}),w.A.q(n,s)}Hn(t,e){const i={group_id:t,status:e};return w.A.q(y.w.Uu,i)}}class D{constructor(t=0,e=[],i=[],n=[],s=null,r=null,o={enabled:!1},a={enabled:!1,refresh_rate_limit:void 0},l={enabled:!0,capacity:E.uy,refill_rate:E.Fn}){this.ol=t,this.gl=e,this.fl=i,this.bl=n,this.Cl=s,this.cl=r,this.ml=o,this.mi=a,this.al=l,this.ol=t,this.gl=e,this.fl=i,this.bl=n,this.Cl=s,this.cl=r,this.ml=o,this.mi=a,this.al=l}Y(){return{s:"5.2.0",l:this.ol,e:this.gl,a:this.fl,p:this.bl,m:this.Cl,v:this.cl,c:this.ml,f:this.mi,grl:this.al}}static qn(t){let e=t.l;return"5.2.0"!==t.s&&(e=0),new D(e,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl)}}class O{constructor(t){this.u=t,this.u=t,this.tl=new s.A,this.el=new s.A,this.il=new s.A,this.sl=null,this.rl=null}ll(){if(null==this.rl){const t=this.u.j(n.d.C.hl);this.rl=null!=t?D.qn(t):new D}return this.rl}ni(){return this.ll().ol}ul(t){if(null!=t&&null!=t.config){const e=t.config;if(e.time>this.ll().ol){const t=t=>null==t?this.ll().al:t,i=new D(e.time,e.events_blacklist,e.attributes_blacklist,e.purchases_blacklist,e.messaging_session_timeout,e.vapid_public_key,e.content_cards,e.feature_flags,t(e.global_request_rate_limit));let s=!1;null!=i.cl&&this.Wn()!==i.cl&&(s=!0);let r=!1;null!=i.ml.enabled&&this.ri()!==i.ml.enabled&&(r=!0);let o=!1;null!=i.mi.enabled&&this.yi()!==i.mi.enabled&&(o=!0),this.rl=i,this.u.k(n.d.C.hl,i.Y()),s&&this.tl.Dt(),r&&this.el.Dt(),o&&this.il.Dt()}}}_n(t){const e=this.tl.It(t);return this.sl&&this.tl.removeSubscription(this.sl),this.sl=e,e}qs(t){return this.el.It(t)}xi(t){return this.il.It(t)}me(t){return-1!==this.ll().gl.indexOf(t)}hu(t){return-1!==this.ll().fl.indexOf(t)}Dr(t){return-1!==this.ll().bl.indexOf(t)}dl(){return this.ll().Cl}Wn(){return this.ll().cl}ri(){return this.ll().ml.enabled||!1}Is(){const t=this.ll().ml.rate_limit;return!(!t||null==t.enabled)&&t.enabled}ci(){if(!this.Is())return-1;const t=this.ll().ml.rate_limit;return null==t.capacity?E.Og:t.capacity<=0?-1:t.capacity}fi(){if(!this.Is())return-1;const t=this.ll().ml.rate_limit;return null==t.refill_rate?E.Zt:t.refill_rate<=0?-1:t.refill_rate}Rl(){const t=this.ll().al;return!(!t||null==t.enabled)&&t.enabled}pu(){if(!this.Rl())return-1;const t=this.ll().al;return null==t.capacity||t.capacity<10?-1:t.capacity}gu(){if(!this.Rl())return-1;const t=this.ll().al;return null==t.refill_rate||t.refill_rate<=0?-1:t.refill_rate}yi(){return this.ll().mi.enabled&&null==this.zi()?(w.A.q(y.w.Ms,{e:"Missing feature flag refresh_rate_limit."}),!1):this.ll().mi.enabled||!1}zi(){return this.ll().mi.refresh_rate_limit}}class P{constructor(t,e,i,n){this.u=t,this.wt=e,this.yt=i,this.wl=n,this.u=t,this.wt=e,this.yt=i,this.Sl=1e3,(null==n||isNaN(n))&&(n=1800),n<this.Sl/1e3&&(o.A.info("Specified session timeout of "+n+"s is too small, using the minimum session timeout of "+this.Sl/1e3+"s instead."),n=this.Sl/1e3),this.wl=n}jl(t,e){return new A.A(this.wt.getUserId(),y.w.xl,t,e.eu,{d:(0,v.UK)(t-e.vl)})}ki(){const t=this.u.tu(n.d.iu.Dl);return null==t?null:t.eu}El(){const t=(new Date).valueOf(),e=this.yt.dl(),i=this.u.j(n.d.C.Gl);if(null!=i&&null==e)return!1;let s=!1;return null==i?s=!0:null!=e&&(s=t-i>1e3*e),s&&this.u.k(n.d.C.Gl,t),s}Nl(t,e){return null==e||null==e.zl||!(t-e.vl<this.Sl)&&e.zl<t}xo(){const t=(new Date).valueOf(),e=t+1e3*this.wl,i=this.u.tu(n.d.iu.Dl);if(this.Nl(t,i)){let s="Generating session start event with time "+t;if(null!=i){let t=i.Hl;t-i.vl<this.Sl&&(t=i.vl+this.Sl),this.u.Wl(this.jl(t,i)),s+=" (old session ended "+t+")"}s+=". Will expire "+e.valueOf(),o.A.info(s);const r=new d.A(p.A.W(),e);return this.u.Wl(new A.A(this.wt.getUserId(),y.w.kl,t,r.eu)),this.u.uu(n.d.iu.Dl,r),null==this.u.j(n.d.C.Gl)&&this.u.k(n.d.C.Gl,t),r.eu}if(null!=i)return i.Hl=t,i.zl=e,this.u.uu(n.d.iu.Dl,i),i.eu}ql(){const t=this.u.tu(n.d.iu.Dl);null!=t&&(this.u.yl(n.d.iu.Dl),this.u.Wl(this.jl((new Date).valueOf(),t)))}}const R={Wh:function(t,e=!1){let i=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(n.d.C.ec,"true"),localStorage.getItem(n.d.C.ec)&&(localStorage.removeItem(n.d.C.ec),i=!0)}catch(t){if(!(t instanceof Error&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&localStorage.length>0))throw t;i=!0}}catch(t){o.A.info("Local Storage not supported!")}const s=R.oc(),r=new n.A.tc(t,s&&!e,i);let a;return a=i?new n.A.rc(t):new n.A.ac,new n.A(r,a)},oc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}};var M=R,L=i(6148),z=i(8623),U=i(9880),B=i(312);class F{constructor(t,e){this.yt=t,this.u=e,this.yt=t,this.u=e}getUserId(){const t=this.u.tu(n.d.iu.su);if(null==t)return null;let e=t.eu,i=(0,z.N)(e);if(i>B.A.lr){for(;i>B.A.lr;)e=e.slice(0,e.length-1),i=(0,z.N)(e);t.eu=e,this.u.uu(n.d.iu.su,t)}return e}ou(t){const e=null==this.getUserId();this.u.uu(n.d.iu.su,new d.A(t)),e&&this.u.ru(t)}setCustomUserAttribute(t,e){if(this.yt.hu(t))return o.A.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const i={};return i[t]=e,this.nu(B.A.lu,i,!0)}nu(t,e,i=!1,n=!1){const s=this.u.mu(this.getUserId(),t,e);let r="",a=t,l=e;return i&&(r=" custom","object"==typeof e&&(a=Object.keys(e)[0],l=e[a],"object"==typeof l&&(l=JSON.stringify(l,null,2)))),!n&&s&&o.A.info(`Logged${r} attribute ${a} with value ${l}`),s}kn(t,e,i,s,a){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",i,!1,!0),this.nu("custom_push_user_auth",s,!1,!0),this.nu("custom_push_vapid_public_key",a,!1,!0);const l=r.A.Yt.Qt,u=new r.A(l,o.A),c=new U.A(t,e,i,s,a);this.u.k(n.d.C.In,c.Y()),u.setItem(l.ss.cu,l.ie,!0)}Dn(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=r.A.Yt.Qt,e=new r.A(t,o.A);this.u.k(n.d.C.In,!1),e.setItem(t.ss.cu,t.ie,!1)}}}var G=i(4285),j=i(5734),q={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",Ao:"devicePropertyAllowlist",Aa:"disablePushTokenMaintenance",So:"enableLogging",No:"enableSdkAuthentication",qa:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Po:"sessionTimeoutInSeconds",Ro:"appVersion",Lo:"appVersionNumber",_a:"serviceWorkerLocation",ka:"safariWebsitePushId",zn:"localization",ho:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",bo:"inAppMessageZIndex",wo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",Bo:"sdkFlavor",tn:"openCardsInNewTab"};const $={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",Ao:"devicePropertyAllowlist",Aa:"disablePushTokenMaintenance",So:"enableLogging",No:"enableSdkAuthentication",qa:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Po:"sessionTimeoutInSeconds",Ro:"appVersion",Lo:"appVersionNumber",_a:"serviceWorkerLocation",ka:"safariWebsitePushId",zn:"localization",ho:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",bo:"inAppMessageZIndex",wo:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",Bo:"sdkFlavor"},H=new class{constructor(){this.rn="",this.Wo="",this.Vo=void 0,this.Go=null,this.on=null,this.qt=null,this.Ei=null,this.yt=null,this.di=null,this.u=null,this.wt=null,this.Ko="",this.$o=!1,this.qo=!1,this.Jo=new s.A,this.Yo=new s.A,this.options={},this.Ho=[],this.Xo=[],this._e=[],this.Wo="5.2.0"}Zo(t){this.Jo.It(t)}Sh(t){this.Yo.It(t)}initialize(t,e){if(this.so())return o.A.info("Braze has already been initialized with an API key."),!0;this.options=e||{};let r=this.nn($.So);const l=(0,G.y)(j.uD.Un());if(l&&"true"===l.brazeLogging&&(r=!0),o.A.init(r),o.A.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==t||""===t||"string"!=typeof t)return o.A.error("Braze requires a valid API key to be initialized."),!1;this.rn=t;let c=this.nn($._o);if(null==c||""===c||"string"!=typeof c)return o.A.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(c)&&(c=`https://${c}`);const p=c;if(c=document.createElement("a"),c.href=p,"/"===c.pathname&&(c=`${c}api/v3`),this.Ko=c.toString(),u.A.Qo&&!this.nn($.Eo))return o.A.info("Ignoring activity from crawler bot "+navigator.userAgent),this.qo=!0,!1;const b=this.nn($.Io)||!1;if(this.u=M.Wh(t,b),b&&this.u.Vh(t),new n.A.ee(null,!0).br(n.d.se))return o.A.info("Ignoring all activity due to previous opt out"),this.qo=!0,!1;for(const t of(0,f.HP)(this.options))-1===(0,f.zu)(q).indexOf(t)&&o.A.warn(`Ignoring unknown initialization option '${t}'.`);const m=["mparticle","wordpress","tealium"];if(null!=this.nn($.Bo)){const t=this.nn($.Bo);-1!==m.indexOf(t)?this.Vo=t:o.A.error("Invalid sdk flavor passed: "+t)}let A=this.nn(q.Ao);if(null!=A)if((0,f.cy)(A)){const t=[];for(let e=0;e<A.length;e++)(0,f.BY)(h.A,A[e],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&t.push(A[e]);A=t}else o.A.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),A=null;const v=this.nn($.Uo);if(v){const t=new d.A(v);this.u.uu(n.d.iu.Uo,t)}this.on=new g(this.u,A),this.yt=new O(this.u),this.wt=new F(this.yt,this.u),this.di=new P(this.u,this.wt,this.yt,this.nn($.Po));const w=new s.A;return this.Go=new a(this.u,this.nn($.No),w),this.$t(w),this.qt=new S(this.on,this.u,this.Go,this.wt,this.di,this.yt,this.rn,this.Ko,this.Wo,this.Vo||"",this.nn($.Ro),this.nn($.Lo)),this.Ei=new I(this.rn,this.Ko,this.di,this.on,this.wt,this.yt,this.u,(t=>{if(this.so())for(const e of this.gr())e.Rs(t)}),this.Go,this.qt),this.Ei.initialize(),b||this.u.Kh(),o.A.info(`Initialized for the Braze backend at "${this.nn($._o)}" with API key "${this.rn}".`),L.B.o(),this.yt.xi((()=>{var t;this.$o&&(null===(t=this.yt)||void 0===t?void 0:t.yi())&&Promise.resolve().then(i.bind(i,3799)).then((t=>{this.$o&&(0,t.default)()}))})),this.Ei.mr((()=>{var t;this.$o&&(null===(t=this.yt)||void 0===t?void 0:t.yi())&&Promise.resolve().then(i.bind(i,3799)).then((t=>{this.$o&&(0,t.default)(void 0,void 0,!0)}))})),this.Jo.Dt(this.options),this.$o=!0,!0}destroy(t){if(o.A.destroy(),this.so()){this.Yo.Dt(),this.Yo.removeAllSubscriptions();for(const t of this.Ho)t.destroy();this.Ho=[];for(const t of this.Xo)t.clearData(!1);this.Xo=[],this.removeAllSubscriptions(),this._e=[],null!=this.Ei&&this.Ei.destroy(),this.Ei=null,this.Go=null,this.on=null,this.qt=null,this.yt=null,this.di=null,this.wt=null,this.options={},this.Vo=void 0,this.$o=!1,this.qo=!1,t&&(this.u=null)}}X(){return!(this.$h()||!this.so()&&(console.warn(E.xE),1))}Ma(){return this.rn}Sr(){return this.Go}Vs(){return this.Ko}te(){return this.on}nr(){return this.qt}nn(t){return this.options[t]}gr(){return this.Xo}cr(){return this.Ei}ir(){return this.yt}zr(){return this.di}l(){return this.u}pr(){if(this.wt&&this.Ei)return new B.A(this.wt,this.Ei)}er(){return this.wt}tr(){return!0===this.nn($.Do)}g(t){let e=!1;for(const i of this.Ho)i===t&&(e=!0);e||this.Ho.push(t)}ar(t){let e=!1;for(const i of this.Xo)i.constructor===t.constructor&&(e=!0);t instanceof l.A&&!e&&this.Xo.push(t)}$t(t){t instanceof s.A&&this._e.push(t)}removeAllSubscriptions(){if(this.X())for(const t of this._e)t.removeAllSubscriptions()}removeSubscription(t){if(this.X())for(const e of this._e)e.removeSubscription(t)}oe(t){this.qo=t}so(){return this.$o}$h(){return this.qo}Ss(){return this.Wo}}},663:function(t,e,i){i.d(e,{A:function(){return d},d:function(){return h}});var n=i(7689),s=i(1999),r=i(6499),o=i(804),a=i(6238),l=i(312),u=i(8026),c=i(7442);const h={iu:{su:"ab.storage.userId",Uo:"ab.storage.deviceId",Dl:"ab.storage.sessionId"},C:{ec:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",Ga:"ab.storage.device",Jh:"ab.storage.sdk_metadata",Qh:"ab.storage.session_id_for_cached_metadata",In:"ab.storage.pushToken",Hi:"ab.storage.newsFeed",Ji:"ab.storage.lastNewsFeedRefresh",J:"ab.storage.cardImpressions",hl:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Gl:"ab.storage.messagingSessionStart",Cs:"ab.storage.cc",gs:"ab.storage.ccLastFullSync",ys:"ab.storage.ccLastCardUpdated",Ks:"ab.storage.ccLastClientRequest",ai:"ab.storage.ccRateLimitCurrentTokenCount",fu:"ab.storage.globalRateLimitCurrentTokenCount",v:"ab.storage.ccClicks",H:"ab.storage.ccImpressions",A:"ab.storage.ccDismissals",nE:"ab.storage.lastDisplayedTriggerTimesById",aE:"ab.storage.lastDisplayedTriggerTime",iE:"ab.storage.triggerFireInstancesById",wh:"ab.storage.signature",As:"ab.storage.brazeSyncRetryCount",Ds:"ab.storage.sdkVersion",Ti:"ab.storage.ff",Ii:"ab.storage.ffImpressions",Bi:"ab.storage.ffLastRefreshAt",Ui:"ab.storage.ff.sessionId",EE:"ab.storage.lastReqToEndpoint",lE:"ab.storage.requestAttempts",Lr:"ab.storage.deferredIam",du:"ab.storage.lastSdkReq",SE:"ab.storage.alias"},se:"ab.optOut"};class d{constructor(t,e){this._E=t,this.uE=e,this._E=t,this.uE=e}Vh(t){const e=(0,r.HP)(h.iu),i=new d.ee(t);for(const t of e)i.remove(h.iu[t])}uu(t,e){let i=null;null!=e&&e instanceof s.A&&(i=e.Y()),this._E.store(t,i)}cE(t){const e=this.tu(t);null!=e&&(e.Hl=(new Date).valueOf(),this.uu(t,e))}tu(t){const e=this._E.br(t),i=(t=>{let e;try{e=JSON.parse(t)}catch(t){e=null}return e})(e);let n;if(i)n=s.A.qn(i)||null,n&&this.uu(t,n);else{const i=s.A.TE(e);n=s.A.qn(i)||null,i!==e&&n&&this.uu(t,n)}return n}yl(t){this._E.remove(t)}Kh(){const t=(0,r.HP)(h.iu);let e;for(const i of t)e=this.tu(h.iu[i]),null!=e&&this.uu(h.iu[i],e)}zo(t){let e;if(null==t||0===t.length)return!1;e=(0,r.cy)(t)?t:[t];let i=this.uE.br(h.C.tE);null!=i&&(0,r.cy)(i)||(i=[]);for(let t=0;t<e.length;t++)i.push(e[t].Y());return this.uE.store(h.C.tE,i)}Wl(t){return null!=t&&this.zo([t])}hE(){let t=this.uE.br(h.C.tE);this.uE.remove(h.C.tE),null==t&&(t=[]);const e=[];let i=!1,s=null;if((0,r.cy)(t))for(let i=0;i<t.length;i++)n.A.AE(t[i])?e.push(n.A.qn(t[i])):s=i;else i=!0;if(i||null!=s){let r="Stored events could not be deserialized as Events";i&&(r+=", was "+Object.prototype.toString.call(t)+" not an array"),null!=s&&(r+=", value at index "+s+" does not look like an event"),r+=", serialized values were of type "+typeof t+": "+JSON.stringify(t),e.push(new n.A(null,o.w.Ms,(new Date).valueOf(),null,{e:r}))}return e}k(t,e){return!!(0,r.BY)(h.C,t,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.uE.store(t,e)}j(t){return!!(0,r.BY)(h.C,t,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.uE.br(t)}hi(t){return!!(0,r.BY)(h.C,t,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.uE.remove(t),!0)}clearData(){const t=(0,r.HP)(h.iu),e=(0,r.HP)(h.C);for(let e=0;e<t.length;e++){const i=t[e];this._E.remove(h.iu[i])}for(let t=0;t<e.length;t++){const i=e[t];this.uE.remove(h.C[i])}}RE(t){return t||h.C.sE}Pa(t){let e=this.uE.br(h.C.eE);null==e&&(e={});const i=this.RE(t[l.A.Yn]),n=e[i];for(const s in t)s!==l.A.Yn&&(null==e[i]||n&&null==n[s])&&this.mu(t[l.A.Yn],s,t[s])}mu(t,e,i){let n=this.uE.br(h.C.eE);null==n&&(n={});const s=this.RE(t);let r=n[s];if(null==r&&(r={},null!=t&&(r[l.A.Yn]=t)),e===l.A.lu){null==r[e]&&(r[e]={});for(const t in i)r[e][t]=i[t]}else r[e]=i;return n[s]=r,this.uE.store(h.C.eE,n)}gE(){const t=this.uE.br(h.C.eE);this.uE.remove(h.C.eE);const e=[];for(const i in t)null!=t[i]&&e.push(t[i]);return e}ru(t){const e=this.uE.br(h.C.eE);if(null!=e){const i=this.RE(null),n=e[i];null!=n&&(e[i]=void 0,this.uE.store(h.C.eE,e),n[l.A.Yn]=t,this.Pa(n))}const i=this.tu(h.iu.Dl);let n=null;null!=i&&(n=i.eu);const s=this.hE();if(null!=s)for(let e=0;e<s.length;e++){const i=s[e];null==i.userId&&i.sessionId==n&&(i.userId=t),this.Wl(i)}}OE(){return this.uE.fE}}d.rc=class{constructor(t){this.rn=t,this.rn=t,this.fE=u.A.dE()?3:10}IE(t){return t+"."+this.rn}store(t,e){const i={v:e};try{return localStorage.setItem(this.IE(t),JSON.stringify(i)),!0}catch(t){return a.A.info("Storage failure: "+(0,c.u)(t)),!1}}br(t){try{let e=null;const i=localStorage.getItem(this.IE(t));return null!=i&&(e=JSON.parse(i)),null==e?null:e.v}catch(t){return a.A.info("Storage retrieval failure: "+(0,c.u)(t)),null}}remove(t){try{localStorage.removeItem(this.IE(t))}catch(t){return a.A.info("Storage removal failure: "+(0,c.u)(t)),!1}}},d.ac=class{constructor(){this.bE={},this.KE=5242880,this.fE=3}store(t,e){const i={value:e},n=this.mE(e);return n>this.KE?(a.A.info("Storage failure: object is "+n+" bytes which is greater than the max of "+this.KE),!1):(this.bE[t]=i,!0)}mE(t){const e=[],i=[t];let n=0;for(;i.length;){const t=i.pop();if("boolean"==typeof t)n+=4;else if("string"==typeof t)n+=2*t.length;else if("number"==typeof t)n+=8;else if("object"==typeof t&&-1===e.indexOf(t)){let n,s;e.push(t);for(const e in t)s=t,n=e,i.push(s[n])}}return n}br(t){const e=this.bE[t];return null==e?null:e.value}remove(t){this.bE[t]=null}},d.ee=class{constructor(t,e){this.rn=t,this.YE=e,this.rn=t,this.NE=this.CE(),this.GE=576e3,this.YE=!!e}IE(t){return null!=this.rn?t+"."+this.rn:t}CE(){let t=0,e=document.location.hostname;const i=e.split("."),n="ab._gd";for(;t<i.length-1&&-1===document.cookie.indexOf(n+"="+n);)t++,e="."+i.slice(-1-t).join("."),document.cookie=n+"="+n+";domain="+e+";";return document.cookie=n+"=;expires="+new Date(0).toUTCString()+";domain="+e+";",e}ne(){const t=new Date;return t.setTime(t.getTime()+60*this.GE*1e3),t.getFullYear()}DE(){const t=(0,r.zu)(h.iu),e=document.cookie.split(";");for(let i=0;i<e.length;i++){let n=e[i];for(;" "===n.charAt(0);)n=n.substring(1);let s=!1;for(let e=0;e<t.length;e++)if(0===n.indexOf(t[e])){s=!0;break}if(s){const t=n.split("=")[0];-1===t.indexOf("."+this.rn)&&this.ME(t)}}}store(t,e){this.DE();const i=new Date;i.setTime(i.getTime()+60*this.GE*1e3);const n="expires="+i.toUTCString(),s="domain="+this.NE;let r;r=this.YE?e:encodeURIComponent(e);const o=this.IE(t)+"="+r+";"+n+";"+s+";path=/";return o.length>=4093?(a.A.info("Storage failure: string is "+o.length+" chars which is too large to store as a cookie."),!1):(document.cookie=o,!0)}br(t){const e=[],i=this.IE(t)+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let r=n[s];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))try{let t;t=this.YE?r.substring(i.length,r.length):decodeURIComponent(r.substring(i.length,r.length)),e.push(t)}catch(e){return a.A.info("Storage retrieval failure: "+(0,c.u)(e)),this.remove(t),null}}return e.length>0?e[e.length-1]:null}remove(t){this.ME(this.IE(t))}ME(t){const e=t+"=;expires="+new Date(0).toUTCString();document.cookie=e,document.cookie=e+";path=/";const i=e+";domain="+this.NE;document.cookie=i,document.cookie=i+";path=/"}},d.tc=class{constructor(t,e,i){this.rn=t,this.pE=[],e&&this.pE.push(new d.ee(t)),i&&this.pE.push(new d.rc(t)),this.pE.push(new d.ac)}store(t,e){let i=!0;for(let n=0;n<this.pE.length;n++)i=this.pE[n].store(t,e)&&i;return i}br(t){for(let e=0;e<this.pE.length;e++){const i=this.pE[e].br(t);if(null!=i)return i}return null}remove(t){new d.ee(this.rn).remove(t);for(let e=0;e<this.pE.length;e++)this.pE[e].remove(t)}}},2861:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5675);class s{constructor(){this._e={}}It(t){if("function"!=typeof t)return null;const e=n.A.W();return this._e[e]=t,e}removeSubscription(t){delete this._e[t]}removeAllSubscriptions(){this._e={}}ic(){return Object.keys(this._e).length}Dt(t){const e=[];for(const i in this._e){const n=this._e[i];e.push(n(t))}return e}}},2081:function(t,e,i){i.d(e,{b:function(){return s}});var n=i(663);function s(t){const e=null==t?void 0:t.j(n.d.C.SE);let i;return e&&(i={label:e.l,name:e.a}),i}},4400:function(t,e){e.A={Xa:"invalid_api_key",Na:"blacklisted",$a:"no_device_identifier",Ba:"invalid_json_response",Ra:"empty_response",__:"sdk_auth_error"}},7689:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(2063),s=i(2081),r=i(6499),o=i(5098);class a{constructor(t,e,i,n,s){this.userId=t,this.type=e,this.time=i,this.sessionId=n,this.data=s,this.userId=t,this.type=e,this.time=(0,o.S3)(i),this.sessionId=n,this.data=s}Mr(){var t;const e={name:this.type,time:(0,o.UK)(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(e.user_id=this.userId);const i=(null===(t=n.Ay.Sr())||void 0===t?void 0:t.Fh())||!1;if(!e.user_id&&!i){const t=(0,s.b)(n.Ay.l());t&&(e.alias=t)}return e}Y(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new a(t.user_id,t.name,t.time,t.session_id,t.data)}static AE(t){return null!=t&&(0,r.Gv)(t)&&null!=t.t&&""!==t.t}static qn(t){return new a(t.u,t.t,t.ts,t.s,t.d)}}},1999:function(t,e,i){i.d(e,{A:function(){return a}});var n=i(5675),s=i(6238),r=i(6499),o=i(7442);class a{constructor(t,e,i){this.eu=t,null==t&&(t=n.A.W()),!i||isNaN(i)?this.vl=(new Date).valueOf():this.vl=i,this.eu=t,this.Hl=(new Date).valueOf(),this.zl=e}Y(){return`g:${encodeURIComponent(this.eu)}|e:${this.zl}|c:${this.vl}|l:${this.Hl}`}static TE(t){if("string"!=typeof t)return null;const e=t.lastIndexOf("|e:"),i=t.substring(0,e),n=i.split("g:")[1];let s;return s=/[|:]/.test(n)?encodeURIComponent(n):n,t.replace(i,`g:${s}`)}static qn(t){let e;if("string"==typeof t)try{const i=t.split("|");if(!(0,r.cy)(i)||4!==i.length)return null;const n=t=>t.split(":")[1],s=t=>{const e=parseInt(n(t));if(!isNaN(e))return e};e=new a(decodeURIComponent(n(i[0])),s(i[1]),s(i[2])),e.Hl=s(i[3])}catch(e){s.A.info(`Unable to parse cookie string ${t}, failed with error: ${(0,o.u)(e)}`)}else{if(null==t||null==t.g)return null;e=new a(t.g,t.e,t.c),e.Hl=t.l}return e}}},9880:function(t,e,i){i.d(e,{A:function(){return s}});var n=i(5098);class s{constructor(t,e,i,n,s){this.endpoint=t,this.Vn=e,this.publicKey=i,this.Vl=n,this.cl=s,this.endpoint=t||null,this.Vn=e||null,this.publicKey=i||null,this.Vl=n||null,this.cl=s||null}Y(){return{e:this.endpoint,c:this.Vn,p:this.publicKey,u:this.Vl,v:this.cl}}static qn(t){return new s(t.e,(0,n.jU)(t.c),t.p,t.u,t.v)}}},6685:function(t,e,i){i.d(e,{A:function(){return n}});class n{constructor(t=!1,e=[]){this.L=t,this.ge=e,this.L=t,this.ge=e}P(t){this.L=this.L&&t.L,this.ge.push(...t.ge)}}},3368:function(t,e){e.A={OPEN:"open",Rr:"purchase",vr:"push_click",ue:"custom_event",Zr:"iam_click",kt:"test"}},3414:function(t,e,i){i.d(e,{A:function(){return m}});var n=i(5098),s=i(6238);class r{constructor(t){this.Bl=t,this.Bl=t}Jl(t){return null==this.Bl||this.Bl===t[0]}static fromJson(t){return new r(t?t.event_name:null)}Y(){return this.Bl}}var o=i(6499);class a{constructor(t,e,i,s){this.Tl=t,this.Al=e,this.comparator=i,this._l=s,this.Tl=t,this.Al=e,this.comparator=i,this._l=s,this.Al===a.Il.Ll&&this.comparator!==a.Ul.Ol&&this.comparator!==a.Ul.Ql&&this.comparator!==a.Ul.Xl&&this.comparator!==a.Ul.Fl&&(this._l=(0,n.Zo)(this._l))}Jl(t){let e=null;switch(null!=t&&(e=t[this.Tl]),this.comparator){case a.Ul.Kl:return null!=e&&e.valueOf()===this._l.valueOf();case a.Ul.Pl:return null==e||e.valueOf()!==this._l.valueOf();case a.Ul.Yl:return null!=e&&typeof e==typeof this._l&&e>this._l;case a.Ul.Ol:return this.Al===a.Il.Ll?null!=e&&(0,o.$P)(e)&&(0,n.Jd)(e)<=this._l.valueOf():null!=e&&typeof e==typeof this._l&&e>=this._l;case a.Ul.Zl:return null!=e&&typeof e==typeof this._l&&e<this._l;case a.Ul.Ql:return this.Al===a.Il.Ll?null!=e&&(0,o.$P)(e)&&(0,n.Jd)(e)>=this._l.valueOf():null!=e&&typeof e==typeof this._l&&e<=this._l;case a.Ul.$l:return null!=e&&"string"==typeof e&&typeof e==typeof this._l&&null!=e.match(this._l);case a.Ul.Eu:return null!=e;case a.Ul._u:return null==e;case a.Ul.Xl:return null!=e&&(0,o.$P)(e)&&(0,n.DA)(e)<this._l;case a.Ul.Fl:return null!=e&&(0,o.$P)(e)&&(0,n.DA)(e)>this._l;case a.Ul.Hu:return null==e||typeof e!=typeof this._l||"string"!=typeof e||null==e.match(this._l)}return!1}static fromJson(t){return new a(t.property_key,t.property_type,t.comparator,t.property_value)}Y(){let t=this._l;return(0,o.$P)(this._l)&&(t=(0,n.UK)(t.valueOf())),{k:this.Tl,t:this.Al,c:this.comparator,v:t}}static qn(t){return new a(t.k,t.t,t.c,t.v)}}a.Il={Qu:"boolean",Xu:"number",Bu:"string",Ll:"date"},a.Ul={Kl:1,Pl:2,Yl:3,Ol:4,Zl:5,Ql:6,$l:10,Eu:11,_u:12,Xl:15,Fl:16,Hu:17};class l{constructor(t){this.filters=t,this.filters=t}Jl(t){let e=!0;for(let i=0;i<this.filters.length;i++){const n=this.filters[i];let s=!1;for(let e=0;e<n.length;e++)if(n[e].Jl(t)){s=!0;break}if(!s){e=!1;break}}return e}static fromJson(t){if(null==t||!(0,o.cy)(t))return null;const e=[];for(let i=0;i<t.length;i++){const n=[],s=t[i];for(let t=0;t<s.length;t++)n.push(a.fromJson(s[t]));e.push(n)}return new l(e)}Y(){const t=[];for(let e=0;e<this.filters.length;e++){const i=this.filters[e],n=[];for(let t=0;t<i.length;t++)n.push(i[t].Y());t.push(n)}return t}static qn(t){const e=[];for(let i=0;i<t.length;i++){const n=[],s=t[i];for(let t=0;t<s.length;t++)n.push(a.qn(s[t]));e.push(n)}return new l(e)}}class u{constructor(t,e){this.Bl=t,this.Ml=e,this.Bl=t,this.Ml=e}Jl(t){if(null==this.Bl||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.Bl&&this.Ml.Jl(i)}static fromJson(t){return new u(t?t.event_name:null,t?l.fromJson(t.property_filters):null)}Y(){return{e:this.Bl,pf:this.Ml?this.Ml.Y():null}}}class c{constructor(t,e){this.zu=t,this.Ju=e,this.zu=t,this.Ju=e}Jl(t){if(null==this.zu)return!1;const e=g.Gu(t[0],this.zu);if(!e)return!1;let i=null==this.Ju||0===this.Ju.length;if(null!=this.Ju)for(let e=0;e<this.Ju.length;e++)if(this.Ju[e]===t[1]){i=!0;break}return e&&i}static fromJson(t){return new c(t?t.id:null,t?t.buttons:null)}Y(){return this.zu}}class h{constructor(t){this.productId=t,this.productId=t}Jl(t){return null==this.productId||t[0]===this.productId}static fromJson(t){return new h(t?t.product_id:null)}Y(){return this.productId}}class d{constructor(t,e){this.productId=t,this.Ml=e,this.productId=t,this.Ml=e}Jl(t){if(null==this.productId||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.productId&&this.Ml.Jl(i)}static fromJson(t){return new d(t?t.product_id:null,t?l.fromJson(t.property_filters):null)}Y(){return{id:this.productId,pf:this.Ml?this.Ml.Y():null}}}class p{constructor(t){this.zu=t,this.zu=t}Jl(t){return null==this.zu||g.Gu(t[0],this.zu)}static fromJson(t){return new p(t?t.campaign_id:null)}Y(){return this.zu}}var f=i(3368),b=i(7442);class g{constructor(t,e){this.type=t,this.data=e,this.type=t,this.data=e}sc(t,e){return g.cc[this.type]===t&&(null==this.data||this.data.Jl(e))}static Gu(t,e){let i=null;try{i=window.atob(t)}catch(e){return s.A.info("Failed to unencode analytics id "+t+": "+(0,b.u)(e)),!1}return e===i.split("_")[0]}static fromJson(t){const e=t.type;let i=null;switch(e){case g.Or.OPEN:case g.Or.kt:break;case g.Or.Rr:i=h.fromJson(t.data);break;case g.Or.nc:i=d.fromJson(t.data);break;case g.Or.vr:i=p.fromJson(t.data);break;case g.Or.ue:i=r.fromJson(t.data);break;case g.Or.lc:i=u.fromJson(t.data);break;case g.Or.Zr:i=c.fromJson(t.data)}return new g(e,i)}Y(){return{t:this.type,d:this.data?this.data.Y():null}}static qn(t){let e,i=null;switch(t.t){case g.Or.OPEN:case g.Or.kt:break;case g.Or.Rr:i=new h(t.d);break;case g.Or.nc:e=t.d||{},i=new d(e.id,l.qn(e.pf||[]));break;case g.Or.vr:i=new p(t.d);break;case g.Or.ue:i=new r(t.d);break;case g.Or.lc:e=t.d||{},i=new u(e.e,l.qn(e.pf||[]));break;case g.Or.Zr:i=new c(t.d)}return new g(t.t,i)}}g.Or={OPEN:"open",Rr:"purchase",nc:"purchase_property",vr:"push_click",ue:"custom_event",lc:"custom_event_property",Zr:"iam_click",kt:"test"},g.cc={},g.cc[g.Or.OPEN]=f.A.OPEN,g.cc[g.Or.Rr]=f.A.Rr,g.cc[g.Or.nc]=f.A.Rr,g.cc[g.Or.vr]=f.A.vr,g.cc[g.Or.ue]=f.A.ue,g.cc[g.Or.lc]=f.A.ue,g.cc[g.Or.Zr]=f.A.Zr,g.cc[g.Or.kt]=f.A.kt;class m{constructor(t,e=[],i,n,s=0,r,o,a=0,l=m.Vu,u,c,h){this.id=t,this.Ku=e,this.startTime=i,this.endTime=n,this.priority=s,this.type=r,this.data=o,this.Wu=a,this.Yu=l,this.Kr=u,this.Zu=c,this.td=h,this.id=t,this.Ku=e||[],void 0===i&&(i=null),this.startTime=i,void 0===n&&(n=null),this.endTime=n,this.priority=s||0,this.type=r,this.Wu=a||0,null==u&&(u=1e3*(this.Wu+30)),this.Kr=u,this.data=o,null!=l&&(this.Yu=l),this.Zu=c,this.td=h||null}sd(t){return null==this.td||this.Yu!==m.Vu&&t-this.td>=1e3*this.Yu}ed(t){this.td=t}rd(t){const e=t+1e3*this.Wu;return Math.max(e-(new Date).valueOf(),0)}hd(t){const e=(new Date).valueOf()-t,i=null==t||isNaN(e)||null==this.Kr||e<this.Kr;return i||s.A.info(`Trigger action ${this.type} is no longer eligible for display - fired ${e}ms ago and has a timeout of ${this.Kr}ms.`),!i}static fromJson(t){const e=t.id,i=[];for(let e=0;e<t.trigger_condition.length;e++)i.push(g.fromJson(t.trigger_condition[e]));const s=(0,n.Zo)(t.start_time),r=(0,n.Zo)(t.end_time),a=t.priority,l=t.type,u=t.delay,c=t.re_eligibility,h=t.timeout,d=t.data,p=t.min_seconds_since_last_trigger;return(0,o.BY)(m.Or,l,"Could not construct Trigger from server data","Trigger.Types")?new m(e,i,s,r,a,l,d,u,c,h,p):null}Y(){const t=[];for(let e=0;e<this.Ku.length;e++)t.push(this.Ku[e].Y());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.Wu,r:this.Yu,tm:this.Kr,ss:this.Zu,ld:this.td}}static qn(t){const e=[],i=t.c||[];for(let t=0;t<i.length;t++)e.push(g.qn(i[t]));return new m(t.i,e,(0,n.jU)(t.s),(0,n.jU)(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}m.Or={Cr:"inapp",od:"templated_iam"},m.Vu=-1},6148:function(t,e,i){i.d(e,{B:function(){return b}});var n=i(8193),s=i(2063),r=i(4188),o=i(5001),a=i(7689),l=i(6499),u=i(663);class c{constructor(t,e,i,n,s){this.triggerId=t,this.Hr=e,this.Gr=i,this.Jr=n,this.Kr=s,this.triggerId=t,this.Hr=e,this.Gr=i,this.Jr=n,this.Kr=s}static fromJson(t,e,i,n,s){return null==t||null==t.trigger_id?null:new c(t.trigger_id,e,i,n,s)}}var h=i(3414),d=i(3368),p=i(6238);class f extends r.A{constructor(t,e,i,n,s){super(),this.tg=t,this.Jt=e,this.u=i,this.Ei=n,this.ig=s,this.tg=t,this.Jt=e,this.u=i,this.Ei=n,this.ig=s,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.u){this.hg=this.u.j(u.d.C.aE)||this.hg,this.ng=this.u.j(u.d.C.iE)||this.ng,this.og=this.u.j(u.d.C.nE)||this.og;for(let t=0;t<this.triggers.length;t++){const e=this.triggers[t];e.id&&null!=this.og[e.id]&&e.ed(this.og[e.id])}}}ag(){if(!this.u)return;this.lg=this.u.j(u.d.C.oE)||0;const t=this.u.j(u.d.C.rE)||[],e=[];for(let i=0;i<t.length;i++)e.push(h.A.qn(t[i]));this.triggers=e,this.fg()}gg(){const t=this,e=function(e,i,n,s,r){return function(){t.cg(e,i,n,s,r)}},i={};for(const t of this.triggers)t.id&&(i[t.id]=t);let n=!1;for(let t=0;t<this.triggers.length;t++){const s=this.triggers[t];if(s.id&&null!=this.ng[s.id]){const t=this.ng[s.id],r=[];for(let n=0;n<t.length;n++){const o=t[n],u=s.rd(o.Jr||0);if(u>0){let t,n;r.push(o),null!=o.ug&&(t=o.ug),null!=o.dg&&a.A.AE(o.dg)&&(n=a.A.qn(o.dg));const c=[];if(o.pg&&(0,l.cy)(o.pg))for(let t=0;t<o.pg.length;t++){const e=i[o.pg[t]];null!=e&&c.push(e)}this.eg.push(window.setTimeout(e(s,o.Jr||0,t,n,c),u))}}this.ng[s.id].length>r.length&&(this.ng[s.id]=r,n=!0,0===this.ng[s.id].length&&delete this.ng[s.id])}}n&&this.u&&this.u.k(u.d.C.iE,this.ng)}mg(){if(!this.u)return;const t=[];for(let e=0;e<this.triggers.length;e++)t.push(this.triggers[e].Y());this.lg=(new Date).valueOf(),this.u.k(u.d.C.rE,t),this.u.k(u.d.C.oE,this.lg)}bg(){this.u&&((this.u.j(u.d.C.oE)||0)>this.lg?this.ag():this.fg())}Rs(t){let e=!1;if(null!=t&&t.triggers){this.ig.Yr(),this.fg();const i={},n={};this.triggers=[];for(let s=0;s<t.triggers.length;s++){const r=h.A.fromJson(t.triggers[s]);if(r){r.id&&null!=this.og[r.id]&&(r.ed(this.og[r.id]),i[r.id]=this.og[r.id]),r.id&&null!=this.ng[r.id]&&(n[r.id]=this.ng[r.id]);for(let t=0;t<r.Ku.length;t++)if(r.Ku[t].sc(d.A.kt,null)){e=!0;break}this.triggers.push(r)}}(0,l.n4)(this.og,i)||(this.og=i,this.u&&this.u.k(u.d.C.nE,this.og)),(0,l.n4)(this.ng,n)||(this.ng=n,this.u&&this.u.k(u.d.C.iE,this.ng)),this.mg(),e&&(p.A.info("Trigger with test condition found, firing test."),this.fe(d.A.kt)),this.fe(d.A.OPEN);const s=this.sg;let r;this.sg=[];for(let t=0;t<s.length;t++)r=Array.prototype.slice.call(s[t]),this.fe(...r)}}cg(t,e,i,n,s){const r=n=>{this.fg();const s=(new Date).valueOf();t.hd(e)||(!1===navigator.onLine&&t.type===h.A.Or.Cr&&n.imageUrl?p.A.info(`Not showing ${t.type} trigger action ${t.id} due to offline state.`):t.sd(s)&&this.wg(t,s,i)?0===this.Jt.ic()?p.A.info(`Not displaying trigger ${t.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Jt.Dt([n]),this.yg(t,s)):p.A.info(`Not displaying trigger ${t.id} because display time fell outside of the acceptable time window.`))},a=()=>{this.fg();const r=s.pop();if(null!=r)if(this.Tg(r,e,i,n,s),r.hd(e)){let t=`Server aborted in-app message display, but the timeout on fallback trigger ${r.id} has already elapsed.`;s.length>0&&(t+=" Continuing to fall back."),p.A.info(t),a()}else{p.A.info(`Server aborted in-app message display. Falling back to lower priority ${r.type} trigger action ${t.id}.`);const o=1e3*r.Wu-((new Date).valueOf()-e);o>0?this.eg.push(window.setTimeout((()=>{this.cg(r,e,i,n,s)}),o)):this.cg(r,e,i,n,s)}};let l,u,d;switch(t.type){case h.A.Or.Cr:if(l=(0,o.g)(t.data),null==l){p.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}if(u=this.ig.Qi(l),u){p.A.error(u),a();break}r(l);break;case h.A.Or.od:if(d=c.fromJson(t.data,r,a,e,t.Kr||0),null==d){p.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}this.ig.Yi(d,i,n);break;default:p.A.error(`Trigger ${t.id} was of unexpected type ${t.type}, ignoring.`)}}fe(t,e=null,i){if(!(0,l.BY)(d.A,t,"Cannot fire trigger action.","TriggerEvents"))return;if(this.Ei&&this.Ei.Tu())return p.A.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();const n=(new Date).valueOf(),s=n-(this.hg||0);let r=!0,o=!0;const a=[];for(let i=0;i<this.triggers.length;i++){const s=this.triggers[i],l=n+1e3*s.Wu;if(s.sd(l)&&(null==s.startTime||s.startTime.valueOf()<=n)&&(null==s.endTime||s.endTime.valueOf()>=n)){let i=!1;for(let n=0;n<s.Ku.length;n++)if(s.Ku[n].sc(t,e)){i=!0;break}i&&(r=!1,this.wg(s,l,t)&&(o=!1,a.push(s)))}}if(r)return void p.A.info(`Trigger event ${t} did not match any trigger conditions.`);if(o)return void p.A.info(`Ignoring ${t} trigger event because a trigger was displayed ${s/1e3}s ago.`);a.sort(((t,e)=>t.priority-e.priority));const u=a.pop();null!=u&&(p.A.info(`Firing ${u.type} trigger action ${u.id} from trigger event ${t}.`),this.Tg(u,n,t,i,a),0===u.Wu?this.cg(u,n,t,i,a):this.eg.push(window.setTimeout((()=>{this.cg(u,n,t,i,a)}),1e3*u.Wu)))}changeUser(t=!1){if(this.triggers=[],this.u&&this.u.hi(u.d.C.rE),!t){this.sg=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.u&&(this.u.hi(u.d.C.aE),this.u.hi(u.d.C.nE),this.u.hi(u.d.C.iE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[]}wg(t,e,i){if(null==this.hg)return!0;if(i===d.A.kt)return p.A.info("Ignoring minimum interval between trigger because it is a test type."),!0;let n=t.Zu;return null==n&&(n=this.tg),e-this.hg>=1e3*n}Tg(t,e,i,n,s){this.fg(),t.id&&(this.ng[t.id]=this.ng[t.id]||[]);const r={};let o;r.Jr=e,r.ug=i,null!=n&&(o=n.Y()),r.dg=o;const a=[];for(const t of s)t.id&&a.push(t.id);r.pg=a,t.id&&this.ng[t.id].push(r),this.u&&this.u.k(u.d.C.iE,this.ng)}yg(t,e){this.fg(),t.ed(e),this.hg=e,t.id&&(this.og[t.id]=e),this.u&&(this.u.k(u.d.C.aE,e),this.u.k(u.d.C.nE,this.og))}}const b={t:!1,provider:null,rr:()=>(b.o(),b.provider||b.rg(),b.provider),rg:()=>{if(!b.provider){const t=s.Ay.nn(s.lw.Oo);b.provider=new f(null!=t?t:30,n.A.m().He(),s.Ay.l(),s.Ay.cr(),n.A.m()),s.Ay.ar(b.provider)}},o:()=>{b.t||(b.rg(),s.Ay.g(b),b.t=!0)},destroy:()=>{b.provider=null,b.t=!1}}},1545:function(t,e,i){i.d(e,{n:function(){return s}});var n=i(2063);function s(t,e,i){const s=t||document.querySelector("head"),r=`ab-${e}-css-definitions-${"5.2.0".replace(/\./g,"-")}`;if(!s)return;const o=s.ownerDocument||document;if(null==o.getElementById(r)){const t=o.createElement("style");t.innerHTML=i||"",t.id=r;const e=n.Ay.nn(n.lw.ho);null!=e&&t.setAttribute("nonce",e),s.appendChild(t)}}},2292:function(t,e,i){i.d(e,{s:function(){return r}});var n=i(1545),s=i(4784);function r(){(0,n.n)(undefined,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-image-only .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px;padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),(0,s.N)()}},4784:function(t,e,i){i.d(e,{N:function(){return s}});var n=i(2063);function s(){if(n.Ay.nn(n.lw.Mo))return;const t="https://use.fontawesome.com/7f85a56ba4.css";if(null===document.querySelector('link[rel=stylesheet][href="'+t+'"]')){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}}},8664:function(t,e,i){i.d(e,{$6:function(){return u},V:function(){return a},dy:function(){return p},jj:function(){return c},mY:function(){return l},qj:function(){return d}});var n=i(6238),s=i(7442),r=i(8623),o=i(8457);const a={types:{ro:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",no:"openLink",ao:"openLinkInWebView"},properties:{type:"type",oo:"steps",eo:"args"}},l={Vi:"unknownBrazeAction",Xi:"noPushPrompt"},u=(t,e)=>{switch(t){case l.Vi:return`${e} contains an unknown braze action type and will not be displayed.`;case l.Xi:return`${e} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function c(t){try{const e=t.match(o.nx),i=e?e[0].length:null,s=i?t.substring(i):null;if(null==i||i>t.length-1||!s)return void n.A.error(`Did not find base64 encoded brazeAction in url to process : ${t}`);const a=(0,r.u)(s);return a?JSON.parse(a):void n.A.error(`Failed to decode base64 encoded brazeAction: ${s}`)}catch(e){return void n.A.error(`Failed to process brazeAction URL ${t} : ${(0,s.u)(e)}`)}}function h(t,e){let i=!1;if(e)for(const n of e)if(i=i||t(n),i)return!0;return!1}function d(t){const e=a.properties.type,i=a.properties.oo;try{if(null==t)return!0;const n=t[e];return n===a.types.ro?h(d,t[i]):!(0,o.To)(n)}catch(t){return!0}}function p(t){if(!t||!(0,o.xs)(t))return!1;const e=a.properties.type,i=a.properties.oo,n=t[e];return n===a.types.ro?h(p,t[i]):n===a.types.requestPushPermission}},8026:function(t,e,i){i.d(e,{A:function(){return u}});var n=i(6499);class s{constructor(){}tf(){}ef(){}Da(t){}static rf(t,e){if(t&&e)if(t=t.toLowerCase(),(0,n.cy)(e.if)){for(let i=0;i<e.if.length;i++)if(-1!==t.indexOf(e.if[i].toLowerCase()))return e.identity}else if(-1!==t.indexOf(e.if.toLowerCase()))return e.identity}}var r=i(3072);class o extends s{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){const t=this.hc();this.browser=t.browser||"Unknown Browser",this.version=t.version||"Unknown Version"}this.OS=null}tf(){return this.browser}ef(){return this.version}Da(t){if(this.OS)return Promise.resolve(this.OS);const e=e=>{for(let i=0;i<t.length;i++){const n=o.rf(e,t[i]);if(n)return this.OS=n,this.OS}return e};return this.userAgentData.platform?Promise.resolve(e(this.userAgentData.platform)):this.getHighEntropyValues().then((t=>t.platform?e(t.platform):navigator.platform)).catch((()=>navigator.platform))}hc(){const t={},e=this.userAgentData.brands;if(e&&e.length)for(const i of e){const e=this.uc(r.c),n=i.brand.match(e);if(n&&n.length>0){t.browser=n[0],t.version=i.version;break}}return t}uc(t){const e=[];for(const i in t){const n=i;e.push(t[n])}return new RegExp("("+e.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class a extends s{constructor(){super(),this.nd=a.hc(navigator.userAgent||"")}tf(){return this.nd[0]||"Unknown Browser"}ef(){return this.nd[1]||"Unknown Version"}Da(t){for(let e=0;e<t.length;e++){const i=t[e].string;let n=a.rf(i,t[e]);if(n)return n===r.u.Pg&&navigator.maxTouchPoints>1&&(n=r.u.io),Promise.resolve(n)}return Promise.resolve(navigator.platform)}static hc(t){let e,i=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==t.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==t.indexOf("CrKey"))return["Chromecast",null];if(-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==t.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(t.match(/\b(Roku)\b/))return["Roku",null];if(t.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===r.c.rO&&(e=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("OPR",r.c.oO),e[0]=e[0].replace("EdgA",r.c.eO),"Edg"===e[0]&&(e[0]=r.c.eO),[e[0],e[1]];if(i[1]===r.c.Bg&&(e=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("EdgiOS",r.c.eO),[e[0],e[1]];if(i=i[2]?[i[1],i[2]]:[null,null],i[0]===r.c.Bg&&null!=(e=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,e[1]),null!=(e=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,e[2]),i[0]===r.c.oO&&null!=(e=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",e[1]||""];if(i[0]){const t=i[0].toLowerCase();"crios"===t&&(i[0]=r.c.rO),"tizen"===t&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===t&&(i[0]="Samsung Browser")}return i}}class l{constructor(){const t=navigator.userAgentData?o:a;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.tf(),this.version=this.Sg.ef(),this.OS=null,this.Da().then((t=>this.OS=t));const e=navigator;this.language=(e.userLanguage||e.language||e.browserLanguage||e.systemLanguage||"").toLowerCase(),this.Qo=l.vg(this.userAgent)}dE(){return this.browser===r.c.Bg}Fa(){return this.OS||null}Da(){return this.OS?Promise.resolve(this.OS):this.Sg.Da(l.kg).then((t=>(this.OS=t,t)))}static vg(t){t=t.toLowerCase();const e=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"];for(let i=0;i<e.length;i++)if(-1!==t.indexOf(e[i]))return!0;return!1}}l.kg=[{string:navigator.platform,if:"Win",identity:r.u.Og},{string:navigator.platform,if:"Mac",identity:r.u.Pg},{string:navigator.platform,if:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,if:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,if:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,if:"Nintendo",identity:"Nintendo"},{string:navigator.platform,if:"SunOS",identity:"SunOS"},{string:navigator.platform,if:"PlayStation",identity:"PlayStation"},{string:navigator.platform,if:"X11",identity:"X11"},{string:navigator.userAgent,if:["iPhone","iPad","iPod"],identity:r.u.io},{string:navigator.platform,if:"Pike v",identity:r.u.io},{string:navigator.userAgent,if:["Web0S"],identity:"WebOS"},{string:navigator.platform,if:["Linux armv7l","Android"],identity:r.u.xg},{string:navigator.userAgent,if:["Android"],identity:r.u.xg},{string:navigator.platform,if:"Linux",identity:"Linux"}];const u=new l},6499:function(t,e,i){i.d(e,{$P:function(){return a},BY:function(){return r},E$:function(){return u},Gv:function(){return l},HP:function(){return c},cy:function(){return o},n4:function(){return h},zu:function(){return s}});var n=i(6238);function s(t){const e=[];let i;for(const n in t)i=n,Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&e.push(t[i]);return e}function r(t,e,i,r){const o=s(t);return-1!==o.indexOf(e)||(n.A.error(`${i} Valid values from ${r} are "${o.join('"/"')}".`),!1)}function o(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"[object Date]"===Object.prototype.toString.call(t)}function l(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(t,...e){null==t&&(t=[]);const i=[],n=arguments.length;for(let e=0,s=t.length;e<s;e++){const s=t[e];if(-1!==i.indexOf(s))continue;let r=1;for(r=1;r<n&&-1!==arguments[r].indexOf(s);r++);r===n&&i.push(s)}return i}function c(t){const e=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}function h(t,e){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;const i=t.toString();if(i!==e.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}const n="[object Array]"===i;if(!n){if("object"!=typeof t||"object"!=typeof e)return!1;const i=t.constructor,n=e.constructor;if(i!==n&&!("function"==typeof i&&i instanceof i&&"function"==typeof n&&n instanceof n)&&"constructor"in t&&"constructor"in e)return!1}const s=[],r=[];let o=s.length;for(;o--;)if(s[o]===t)return r[o]===e;if(s.push(t),r.push(e),n){if(o=t.length,o!==e.length)return!1;for(;o--;)if(!h(t[o],e[o]))return!1}else{const i=c(t);let n;if(o=i.length,c(e).length!==o)return!1;for(;o--;)if(n=i[o],!Object.prototype.hasOwnProperty.call(e,n)||!h(t[n],e[n]))return!1}return s.pop(),r.pop(),!0}},735:function(t,e,i){i.d(e,{p:function(){return r}});var n=i(8412),s=i(2704);function r(t,e,i){const r=document.createElement("button");r.setAttribute("aria-label",t),r.setAttribute("tabindex","0"),r.setAttribute("role","button"),(0,n.P4)(r,"touchstart"),r.className="ab-close-button";const o=(0,n.RJ)("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",e);return r.appendChild(o),r.addEventListener("keydown",(t=>{t.keyCode!==s.c.Fo&&t.keyCode!==s.c.To||(i(),t.stopPropagation())})),r.onclick=t=>{i(),t.stopPropagation()},r}},5098:function(t,e,i){i.d(e,{DA:function(){return h},EQ:function(){return a},Jd:function(){return c},S3:function(){return u},UK:function(){return s},YX:function(){return r},Zo:function(){return o},jU:function(){return l}});var n=i(6499);function s(t,e=!1){let i=t/1e3;return e&&(i=Math.floor(i)),i}function r(t){return 1e3*t}function o(t){if(null==t)return null;const e=parseInt(t.toString());return isNaN(e)?null:new Date(1e3*e)}function a(t){return null!=t&&(0,n.$P)(t)?t.toISOString().replace(/\.[0-9]{3}Z$/,""):t}function l(t){return null==t||""===t?null:new Date(t)}function u(t){return null==t||""===t?(new Date).valueOf():t}function c(t){return((new Date).valueOf()-t.valueOf())/1e3}function h(t){return(t.valueOf()-(new Date).valueOf())/1e3}},3072:function(t,e,i){i.d(e,{c:function(){return n},u:function(){return s}});const n={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},s={xg:"Android",io:"iOS",Pg:"Mac",Og:"Windows"}},8412:function(t,e,i){i.d(e,{CF:function(){return a},K:function(){return c},Kz:function(){return u},P4:function(){return l},RJ:function(){return p},X:function(){return o},e0:function(){return r},jp:function(){return h},sr:function(){return d}});var n=i(6238),s=i(7442);const r={dc:null,co:function(t,e=!1,i=!1,n=!1){if(null==t)return!1;e=e||!1,i=i||!1;const s=t.getBoundingClientRect();return null!=s&&(s.top>=0&&s.top<=(window.innerHeight||document.documentElement.clientHeight)||!e)&&(s.left>=0||!n)&&(s.bottom>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(s.right<=(window.innerWidth||document.documentElement.clientWidth)||!n)}},o={De:"up",Ee:"down",U:"left",V:"right"};function a(){if(null==r.dc){r.dc=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{r.dc=!0}});window.addEventListener("testPassive",(()=>{}),t),window.removeEventListener("testPassive",(()=>{}),t)}catch(t){n.A.error((0,s.u)(t))}}return r.dc}function l(t,e,i=(()=>{})){t.addEventListener(e,i,!!a()&&{passive:!0})}function u(t){return r.co(t,!0,!1,!1)}function c(t){return r.co(t,!1,!0,!1)}function h(t){if(t.onclick){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.onclick.apply(t,[e])}}function d(t,e,i){let n=null,s=null;l(t,"touchstart",(t=>{n=t.touches[0].clientX,s=t.touches[0].clientY})),l(t,"touchmove",(r=>{if(null==n||null==s)return;const a=n-r.touches[0].clientX,l=s-r.touches[0].clientY;Math.abs(a)>Math.abs(l)&&Math.abs(a)>=25?((a>0&&e===o.U||a<0&&e===o.V)&&i(r),n=null,s=null):Math.abs(l)>=25&&((l>0&&e===o.De&&t.scrollTop===t.scrollHeight-t.offsetHeight||l<0&&e===o.Ee&&0===t.scrollTop)&&i(r),n=null,s=null)}))}function p(t,e,i){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg");s.setAttribute("viewBox",t),s.setAttribute("xmlns",n);const r=document.createElementNS(n,"path");return r.setAttribute("d",e),null!=i&&r.setAttribute("fill",i),s.appendChild(r),s}},7442:function(t,e,i){i.d(e,{u:function(){return n}});const n=t=>t instanceof Error?t.message:String(t)},2704:function(t,e,i){i.d(e,{c:function(){return n}});const n={Fo:32,lo:9,To:13,mh:27}},4956:function(t,e,i){i.d(e,{C:function(){return n}});const n=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)},9303:function(t,e,i){i.d(e,{s:function(){return a}});var n=i(6238),s=i(4400),r=i(7442);const o={Qs:t=>{let e,i;try{const r=()=>{n.A.error("This browser does not have any supported ajax options!")};let o=!1;if(window.XMLHttpRequest&&(o=!0),!o)return void r();e=new XMLHttpRequest;const a=()=>{"function"==typeof t.error&&t.error(e.status),"function"==typeof t.ti&&t.ti(!1)};e.onload=()=>{let i=!1;if(4===e.readyState)if(i=e.status>=200&&e.status<300||304===e.status,i){if("function"==typeof t.L){let n,r;try{n=JSON.parse(e.responseText),r=e.getAllResponseHeaders()}catch(i){const n={error:""===e.responseText?s.A.Ra:s.A.Ba,response:e.responseText};(0,t.L)(n,r)}n&&t.L(n,r)}"function"==typeof t.ti&&t.ti(!0)}else a()},e.onerror=()=>{a()},e.ontimeout=()=>{a()},i=JSON.stringify(t.data),e.open("POST",t.url,!0),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest");const l=t.headers||[];for(const t of l)e.setRequestHeader(t[0],t[1]);e.send(i)}catch(t){n.A.error(`Network request error: ${(0,r.u)(t)}`)}}},a=t=>{const e={},i=t.toString().split("\r\n");if(!i)return e;let n,s;for(const t of i)t&&(n=t.slice(0,t.indexOf(":")).toLowerCase().trim(),s=t.slice(t.indexOf(":")+1).trim(),e[n]=s);return e};e.A=o},7927:function(t,e,i){var n=i(7276),s=i(663);const r={Gs:{La:"d",Bs:"cc",qi:"ff",_r:"t"},ii:{La:"/data",Bs:"/content_cards/sync",qi:"/feature_flags/sync",_r:"/template"},mc:t=>null==t?void 0:t.j(s.d.C.EE),Ac:t=>null==t?void 0:t.j(s.d.C.lE),Tc:(t,e)=>{null==t||t.k(s.d.C.EE,e)},Rc:(t,e)=>{null==t||t.k(s.d.C.lE,e)},Wa:(t,e)=>{if(!t||!e)return-1;const i=r.mc(t);if(null==i)return-1;const n=i[e];return null==n||isNaN(n)?-1:n},Ya:(t,e)=>{let i=n.et;if(!t||!e)return i;const s=r.Ac(t);return null==s?i:(i=s[e],null==i||isNaN(i)?n.et:i)},Os:(t,e,i)=>{if(!t||!e)return;let n=r.mc(t);null==n&&(n={}),n[e]=i,r.Tc(t,n)},Ys:(t,e,i)=>{if(!t||!e)return;let n=r.Ac(t);null==n&&(n={}),n[e]=i,r.Rc(t,n)},si:(t,e)=>{if(!t||!e)return;const i=r.Ya(t,e);r.Ys(t,e,i+1)}};e.A=r},8623:function(t,e,i){i.d(e,{N:function(){return s},u:function(){return r}});var n=i(6238);function s(t){let e=t.length;for(let i=t.length-1;i>=0;i--){const n=t.charCodeAt(i);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&i--}return e}function r(t){try{t=t.replace(/-/g,"+").replace(/_/g,"/");const e=window.atob(t),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);const n=new Uint16Array(i.buffer);return String.fromCharCode(...n)}catch(t){return n.A.error("Unable to decode Base64: "+t),null}}},4285:function(t,e,i){function n(t){null==t&&(t="");const e=t.split("?").slice(1).join("?"),i={};if(null!=e){const t=e.split("&");for(let e=0;e<t.length;e++){const n=t[e].split("=");""!==n[0]&&(i[n[0]]=n[1])}}return i}function s(t){return!(!t||0!==(t=t.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==t.lastIndexOf("data:",0))}i.d(e,{P:function(){return s},y:function(){return n}})},8457:function(t,e,i){i.d(e,{B9:function(){return x},Dz:function(){return f},To:function(){return C},Z2:function(){return y},ZJ:function(){return b},fB:function(){return w},nx:function(){return p},rK:function(){return v},uZ:function(){return g},xs:function(){return E}});var n=i(6499),s=i(8623),r=i(6238),o=i(5098),a=i(8664),l=i(7276);const u=/^[^\x00-\x1F\x22]+$/,c=/[$.]/,h=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],d=new RegExp(/^.+@.+\..+$/),p=/^brazeActions:\/\/v\d+\//;function f(t,e,i){const n=null!=t&&"string"==typeof t&&(""===t||null!=t.match(u));return n||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),n}function b(t){return null!=t&&t.match(c)&&-1===h.indexOf(t)&&r.A.warn("Custom attribute keys cannot contain '$' or '.'"),f(t,"set custom user attribute","the given key")}function g(t){const e=typeof t;return null==t||"number"===e||"boolean"===e||(0,n.$P)(t)||"string"===e}function m(t,e,i){const s=-1!==i;if(s&&i>50)return r.A.error("Nested attributes cannot be more than 50 levels deep."),!1;const a=s?i+1:-1;if((0,n.cy)(t)&&(0,n.cy)(e)){for(let i=0;i<t.length&&i<e.length;i++)if((0,n.$P)(t[i])&&(e[i]=(0,o.EQ)(t[i])),!m(t[i],e[i],a))return!1}else{if(!(0,n.Gv)(t))return g(t);for(const i of(0,n.HP)(t)){const r=t[i];if(s&&!b(i))return!1;if((0,n.$P)(r)&&(e[i]=(0,o.EQ)(r)),!m(r,e[i],a))return!1}}return!0}function A(t,e,i,s,o){let a;return a=(0,n.Gv)(t)||(0,n.cy)(t)?m(t,e,o?1:-1):g(t),a||r.A.error(`Cannot ${i} because ${s} "${t}" is invalid.`),a}function v(t,e,i,n=!1){const s="string"==typeof t||null===t&&n;return s||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),s}function w(t,e,i,a,u){if(null==t&&(t={}),"object"!=typeof t||(0,n.cy)(t))return r.A.error(`${e} requires that ${i} be an object. Ignoring ${u}.`),[!1,null];let c,h;e===l.KG?(c=76800,h="75KB"):(c=51200,h="50KB");const d=JSON.stringify(t);if((0,s.N)(d)>c)return r.A.error(`Could not ${a} because ${i} was greater than the max size of ${h}.`),[!1,null];let p;try{p=JSON.parse(d)}catch(t){return r.A.error(`Could not ${a} because ${i} did not contain valid JSON.`),[!1,null]}for(const i in t){if(e===l.KG&&!b(i))return[!1,null];if(!f(i,a,`the ${u} property name`))return[!1,null];const s=t[i];if(e===l.KG||null!=s){if((0,n.$P)(s)&&(p[i]=(0,o.EQ)(s)),!A(s,p[i],a,`the ${u} property "${i}"`,e===l.KG))return[!1,null]}else delete t[i],delete p[i]}return[!0,p]}function y(t,e){let i=!1,s=!1;const o=()=>{r.A.error("Custom attribute arrays must be either string arrays or object arrays.")};for(const r of e)if("string"==typeof r){if(s)return o(),[!1,!1];if(!f(r,`set custom user attribute "${t}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!(0,n.Gv)(r))return o(),[!1,!1];if(i)return o(),[!1,!1];if(!w(r,l.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute"))return[!1,!1];s=!0}return[i,s]}function x(t){return"string"==typeof t&&null!=t.toLowerCase().match(d)}function E(t){if(!(a.V.properties.type in t))return!1;switch(t[a.V.properties.type]){case a.V.types.ro:if(a.V.properties.oo in t)return!0;break;case a.V.types.logCustomEvent:case a.V.types.setEmailNotificationSubscriptionType:case a.V.types.setPushNotificationSubscriptionType:case a.V.types.setCustomUserAttribute:case a.V.types.addToSubscriptionGroup:case a.V.types.removeFromSubscriptionGroup:case a.V.types.addToCustomAttributeArray:case a.V.types.removeFromCustomAttributeArray:case a.V.types.no:case a.V.types.ao:if(a.V.properties.eo in t)return!0;break;case a.V.types.requestPushPermission:return!0;default:return!1}return!1}function C(t){let e=!1;return Object.keys(a.V.types).forEach((i=>{a.V.types[i]!==t.toString()||(e=!0)})),e}},5734:function(t,e,i){i.d(e,{j3:function(){return n},uD:function(){return s}});const n={PORTRAIT:0,LANDSCAPE:1},s={openUri:function(t,e,i){t&&(e||null!=i&&i.metaKey?window.open(t):window.location=t)},fo:function(){return screen.width<=600},jo:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?n.LANDSCAPE:n.PORTRAIT;const t=window;if("screen"in t){let e=t.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=e&&"object"==typeof e&&(e=e.type),"landscape-primary"===e||"landscape-secondary"===e?n.LANDSCAPE:n.PORTRAIT}return n.PORTRAIT},Un:function(){return window.location.href}}}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},void 0!==i&&Object.defineProperty(i,"p",{get:function(){try{if("string"!=typeof __nuglif__webpack_public_path__)throw new Error("WebpackRequireFrom: '__nuglif__webpack_public_path__' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return __nuglif__webpack_public_path__}catch(t){return console.error(t),""}},set:function(t){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+t+".")}});var n={};!function(){i.r(n),i.d(n,{NGBraze:function(){return Li}});var t={};i.r(t),i.d(t,{BrazeSdkMetadata:function(){return $},CaptionedImage:function(){return l.A},Card:function(){return o.A},ClassicCard:function(){return u.A},ContentCards:function(){return M},ControlCard:function(){return c.A},ControlMessage:function(){return Tt.A},DeviceProperties:function(){return K.A},FeatureFlag:function(){return ae.A},Feed:function(){return mt.A},FullScreenMessage:function(){return Nt.A},HtmlMessage:function(){return It.A},ImageOnly:function(){return a.A},InAppMessage:function(){return kt.A},InAppMessageButton:function(){return _t.A},ModalMessage:function(){return Dt.A},SlideUpMessage:function(){return Ot.A},User:function(){return oe.A},WindowUtils:function(){return $t.uD},addSdkMetadata:function(){return W},automaticallyShowInAppMessages:function(){return Jt},changeUser:function(){return Y.changeUser},deferInAppMessage:function(){return Zt},destroy:function(){return X},destroyFeed:function(){return wt},disableSDK:function(){return V},enableSDK:function(){return J},getAllFeatureFlags:function(){return he},getCachedContentCards:function(){return L},getCachedFeed:function(){return vt},getDeferredInAppMessage:function(){return Qt},getDeviceId:function(){return Z},getFeatureFlag:function(){return ce},getUser:function(){return Q.w},handleBrazeAction:function(){return gt.V},hideContentCards:function(){return U},initialize:function(){return tt},isDisabled:function(){return et},isPushBlocked:function(){return ee},isPushPermissionGranted:function(){return ie},isPushSupported:function(){return ne},logCardClick:function(){return h.x},logCardDismissal:function(){return d.a},logCardImpressions:function(){return p.j},logContentCardClick:function(){return b},logContentCardImpressions:function(){return f},logCustomEvent:function(){return it.logCustomEvent},logFeatureFlagImpression:function(){return pe},logFeedDisplayed:function(){return yt.o},logInAppMessageButtonClick:function(){return Wt},logInAppMessageClick:function(){return Ft},logInAppMessageHtmlClick:function(){return jt},logInAppMessageImpression:function(){return Bt},logPurchase:function(){return nt.logPurchase},openSession:function(){return ot},refreshFeatureFlags:function(){return le.refreshFeatureFlags},removeAllSubscriptions:function(){return at},removeSubscription:function(){return lt.a},requestContentCardsRefresh:function(){return R},requestFeedRefresh:function(){return xt.R},requestImmediateDataFlush:function(){return ut.requestImmediateDataFlush},requestPushPermission:function(){return se.requestPushPermission},setLogger:function(){return ct},setSdkAuthenticationSignature:function(){return dt},showContentCards:function(){return j},showFeed:function(){return Et.showFeed},showInAppMessage:function(){return Vt},subscribeToContentCardsUpdates:function(){return B},subscribeToFeatureFlagsUpdates:function(){return de},subscribeToFeedUpdates:function(){return Ct.k},subscribeToInAppMessage:function(){return r},subscribeToSdkAuthenticationFailures:function(){return pt},toggleContentCards:function(){return q},toggleFeed:function(){return St},toggleLogging:function(){return ft},unregisterPush:function(){return re.unregisterPush},wipeData:function(){return bt}});var e=i(2063),s=i(8193);function r(t){if(e.Ay.X())return"function"!=typeof t?null:s.A.m().Ke((function(e){return t(e[0]),e.slice(1)}))}var o=i(5563),a=i(699),l=i(6178),u=i(60),c=i(3543),h=i(1926),d=i(7987),p=i(3628);function f(t){return(0,p.j)(t,!0)}function b(t){return(0,h.x)(t,!0)}var g=i(3981),m=i(9303),A=i(4188),v=i(5098),w=i(4285),y=i(3862),x=i(663),E=i(2861),C=i(4334),S=i(7927),k=i(4956),_=i(7276),T=i(858),N=i(6238),I=i(804);class D extends A.A{constructor(t,i,n,s,r){super(),this.wt=t,this.u=i,this.yt=n,this.Ft=s,this.qt=r,this.wt=t,this.u=i,this.yt=n,this.Ft=s,this.qt=r,this.Jt=new E.A,e.Ay.$t(this.Jt),this.Bt=0,this.Ht=0,this.cards=[],this.Kt();const o=T.A.Yt.Qt;new T.A(o,N.A).Zt(o.ss.ts,(t=>{this.es(t)})),this.hs=null,this.rs=null,this.ns=null,this.os=null,this.ls=null,this.us=10,this.cs=0}fs(){return this.hs}ds(t){this.hs=t}ps(){return this.rs}vs(t){this.rs=t}Kt(){if(!this.u)return;const t=this.u.j(x.d.C.Cs)||[],e=[];for(let i=0;i<t.length;i++){const n=(0,y._l)(t[i]);null!=n&&e.push(n)}this.cards=this.ws(this.bs(e,!1)),this.Bt=this.u.j(x.d.C.gs)||this.Bt,this.Ht=this.u.j(x.d.C.ys)||this.Ht}Ns(t,e=!1,i=0,n=0){let s;if(e){s=[];for(const t of this.cards)t.test&&s.push(t)}else s=this.cards.slice();for(let i=0;i<t.length;i++){const n=t[i];let r=null;for(let t=0;t<this.cards.length;t++)if(n.id===this.cards[t].id){r=this.cards[t];break}if(e){const t=(0,y.Fu)(n);null!=r&&r.viewed&&t&&(t.viewed=!0),null!=t&&s.push(t)}else if(null==r){const t=(0,y.Fu)(n);null!=t&&s.push(t)}else if(!r.Ct(n))for(let t=0;t<s.length;t++)if(n.id===s[t].id){s.splice(t,1);break}}this.cards=this.ws(this.bs(s,e)),this.js(),this.Bt=i,this.Ht=n,this.u&&(this.u.k(x.d.C.gs,this.Bt),this.u.k(x.d.C.ys,this.Ht))}Rs(t){if(this.Ts()&&null!=t&&t.cards){this.u&&this.u.k(x.d.C.Ds,e.Ay.Ss());const i=t.full_sync;i||this.Kt(),this.Ns(t.cards,i,t.last_full_sync_at,t.last_card_updated_at),this.Jt.Dt(this.ks(!0))}}Us(t){this.u&&this.u.k(x.d.C.As,t)}Ls(t,e,i){const n=()=>{this.Fs(e,i,!0)},s=t?(0,m.s)(t):null;let r;if(this.xs(),!s||!s["retry-after"])return void this.Us(0);const o=s["retry-after"];if(isNaN(o)&&!isNaN(Date.parse(o)))r=Date.parse(o)-(new Date).getTime(),r<0&&n();else{if(isNaN(parseFloat(o.toString()))){const t="Received unexpected value for retry-after header in /sync response";return C.A.q(I.w.Ms,{e:t+": "+o}),void this.Us(0)}r=1e3*parseFloat(o.toString())}this.ns=window.setTimeout((()=>{n()}),r);let a=0;this.u&&(a=this.u.j(x.d.C.As)),(null==a||isNaN(parseInt(a.toString())))&&(a=0),this.Us(parseInt(a.toString())+1)}es(t){var e;if(!this.Ts())return;this.Kt();const i=this.cards.slice();let n=null;n=null===(e=this.wt)||void 0===e?void 0:e.getUserId();for(let e=0;e<t.length;e++)if(n===t[e].userId||null==n&&null==t[e].userId){const n=t[e].card;let s=null;for(let t=0;t<this.cards.length;t++)if(n.id===this.cards[t].id){s=this.cards[t];break}if(null==s){const t=(0,y.Fu)(n);null!=t&&i.push(t)}else if(!s.Ct(n))for(let t=0;t<i.length;t++)if(n.id===i[t].id){i.splice(t,1);break}}this.cards=this.ws(this.bs(i,!1)),this.js(),this.Jt.Dt(this.ks(!0))}bs(t,e){let i={},n={},s={};this.u&&(i=this.u.j(x.d.C.v)||{},n=this.u.j(x.d.C.H)||{},s=this.u.j(x.d.C.A)||{});const r={},o={},a={};for(let e=0;e<t.length;e++){const l=t[e].id;l&&(i[l]&&(t[e].clicked=!0,r[l]=!0),n[l]&&(t[e].viewed=!0,o[l]=!0),s[l]&&(t[e].dismissed=!0,a[l]=!0))}return e&&this.u&&(this.u.k(x.d.C.v,r),this.u.k(x.d.C.H,o),this.u.k(x.d.C.A,a)),t}ws(t){const e=[],i=new Date;let n={};this.u&&(n=this.u.j(x.d.C.A)||{});let s=!1;for(let r=0;r<t.length;r++){const o=t[r].url;if(!this.Ft&&o&&(0,w.P)(o)){N.A.error(`Card with url ${o} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`);continue}const a=t[r].expiresAt;let l=!0;if(null!=a&&(l=a>=i),l=l&&!t[r].dismissed,l)e.push(t[r]);else{const e=t[r].id;e&&(n[e]=!0),s=!0}}return s&&this.u&&this.u.k(x.d.C.A,n),e}js(){var t;const e=[];for(let t=0;t<this.cards.length;t++)e.push(this.cards[t].Y());null===(t=this.u)||void 0===t||t.k(x.d.C.Cs,e)}xs(){this.ns&&(clearTimeout(this.ns),this.ns=null)}zs(){null!=this.os&&(clearTimeout(this.os),this.os=null)}Es(t=1e3*this.us,e,i){this.zs(),this.os=window.setTimeout((()=>{this.Fs(e,i,!0)}),t),this.ls=t}Fs(t,i,n=!1,s=!0){var r,o;const a=this.qt,l=this.u;if(!a||!l)return void("function"==typeof i&&i());const u=!n;if(u&&(this.xs(),this.Us(0)),!this.Ts())return void(null===(r=this.yt)||void 0===r||r.qs((()=>{this.Fs(t,i)})));let c=!0;if(u&&(null===(o=this.yt)||void 0===o?void 0:o.Is())&&(c=this.Js()),!c)return void N.A.info("Content card sync being throttled.");s&&this.zs();const h=a.Ps({},!0);l.j(x.d.C.Ds)!==e.Ay.Ss()&&this.$s(),h.last_full_sync_at=this.Bt,h.last_card_updated_at=this.Ht;const d=a._s(h,S.A.Gs.Bs,n);let p=!1;a.Hs(h,(()=>{if(this.u){const t=(new Date).valueOf();u&&this.u.k(x.d.C.Ks,t),S.A.Os(this.u,S.A.Gs.Bs,t)}m.A.Qs({url:a.Vs()+"/content_cards/sync",data:h,headers:d,L:(e,n)=>{if(!a.Ws(h,e,d))return p=!0,void("function"==typeof i&&i());a.Xs(),this.Ls(n,t,i),this.Rs(e),p=!1,S.A.Ys(this.u,S.A.Gs.Bs,1),"function"==typeof t&&t()},error:t=>{a.Zs(t,"retrieving content cards"),p=!0,"function"==typeof i&&i()},ti:()=>{if(p&&s&&!this.os&&this.cs+1<_.PC){S.A.si(this.u,S.A.Gs.Bs);let e=this.ls;(null==e||e<1e3*this.us)&&(e=1e3*this.us),this.Es(Math.min(3e5,(0,k.C)(1e3*this.us,3*e)),t,i),this.cs=this.cs+1}}})}),S.A.ii.Bs)}ks(t){t||this.Kt();const e=this.ws(this.cards);e.sort(((t,e)=>t.pinned&&!e.pinned?-1:e.pinned&&!t.pinned?1:t.updated&&e.updated&&t.updated>e.updated?-1:t.updated&&e.updated&&e.updated>t.updated?1:0));let i=Math.max(this.Ht||0,this.Bt||0);return 0===i&&(i=void 0),this.u&&this.u.j(x.d.C.ys)===this.Ht&&void 0===i&&(i=this.Ht),new M(e,(0,v.Zo)(i))}ei(t){return this.Jt.It(t)}$s(){this.Bt=0,this.Ht=0,this.u&&(this.u.hi(x.d.C.gs),this.u.hi(x.d.C.ys))}changeUser(t){t||(this.cards=[],this.Jt.Dt(new M(this.cards.slice(),null)),this.u&&(this.u.hi(x.d.C.Cs),this.u.hi(x.d.C.v),this.u.hi(x.d.C.H),this.u.hi(x.d.C.A))),this.$s()}clearData(t){this.Bt=0,this.Ht=0,this.cards=[],this.Jt.Dt(new M(this.cards.slice(),null)),t&&this.u&&(this.u.hi(x.d.C.Cs),this.u.hi(x.d.C.v),this.u.hi(x.d.C.H),this.u.hi(x.d.C.A),this.u.hi(x.d.C.gs),this.u.hi(x.d.C.ys))}Ts(){return!(!this.yt||!this.yt.ri()&&(0!==this.yt.ni()&&this.oi(),1))}li(t){this.u&&this.u.k(x.d.C.ai,t)}ui(){return this.u?this.u.j(x.d.C.ai):null}Js(){var t,e,i;const n=null===(t=this.u)||void 0===t?void 0:t.j(x.d.C.Ks);if(null==n||isNaN(n))return!0;const s=(null===(e=this.yt)||void 0===e?void 0:e.ci())||-1,r=(null===(i=this.yt)||void 0===i?void 0:i.fi())||-1;if(-1===s||-1===r)return!0;let o=this.ui();(null==o||isNaN(o))&&(o=s);const a=((new Date).valueOf()-n)/1e3;return o=Math.min(o+a/r,s),!(o<1||(o=Math.trunc(o)-1,this.li(o),0))}oi(){this.Jt.Dt(new M([],new Date)),this.u&&this.u.hi(x.d.C.Cs)}}const O={t:!1,provider:null,rr:()=>(O.o(),O.provider||(O.provider=new D(e.Ay.er(),e.Ay.l(),e.Ay.ir(),e.Ay.tr(),e.Ay.nr()),e.Ay.ar(O.provider)),O.provider),o:()=>{O.t||(e.Ay.g(O),O.t=!0)},destroy:()=>{O.provider=null,O.t=!1}};var P=O;function R(t,i){if(e.Ay.X())return P.rr().Fs(t,i)}class M extends g.A{constructor(t,e){super(t,e)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(t){(0,p.j)(t,!0)}logCardClick(t){return(0,h.x)(t,!0)}sr(){R()}dr(){return!0}}function L(){if(e.Ay.X())return P.rr().ks(!1)}M.ur=6e4;var z=i(5297);function U(t){if(!e.Ay.X())return;const i=document.querySelectorAll(".ab-feed");for(let e=0;e<i.length;e++)(null==t||null!=t&&i[e].parentNode===t)&&(0,z.ID)(i[e])}function B(t){if(!e.Ay.X())return;const i=P.rr(),n=i.ei(t);if(!i.ps()){const t=e.Ay.cr();if(t){const e=t.mr((()=>{i.Fs()}));e&&i.vs(e)}}return n}var F=i(8458),G=i(2292);function j(t,i){if(!e.Ay.X())return;(0,G.s)();let n=!1;null==t&&(t=document.body,n=!0);const s=e.Ay.nn(e.lw.tn)||e.Ay.nn(e.lw.en)||!1,r=P.rr().ks(!1);"function"==typeof i&&(0,z.Z7)(r,i(r.cards.slice()),r.lastUpdated,null,s);const o=(0,z.Nc)(r,s,n),a=P.rr(),l=a.fs();(null==r.lastUpdated||(new Date).valueOf()-r.lastUpdated.valueOf()>M.ur)&&(null==l||(new Date).valueOf()-l>M.ur)&&(N.A.info(`Cached content cards were older than max TTL of ${M.ur} ms, requesting an update from the server.`),(0,z.Y9)(r,o),a.ds((new Date).valueOf()));const u=(new Date).valueOf(),c=B((function(t){const e=o.querySelectorAll(".ab-refresh-button")[0];if(null!=e){let t=500,i=t-=(new Date).valueOf()-u;const n=o.getAttribute(z.Ql);n&&(i=parseInt(n),isNaN(i)||(t-=(new Date).valueOf()-i)),setTimeout((function(){e.className=e.className.replace(/fa-spin/g,"")}),Math.max(t,0))}let n=t.cards;"function"==typeof i&&(n=i(n.slice())),(0,z.Z7)(r,n,t.lastUpdated,o,s)}));(0,z.kz)(c,o);const h=function(t){const e=t.querySelectorAll(".ab-feed");let i=null;for(let n=0;n<e.length;n++)e[n].parentNode===t&&(i=e[n]);null!=i?((0,z.ID)(i),null!=i.parentNode&&i.parentNode.replaceChild(o,i)):t.appendChild(o),setTimeout((function(){o.className=o.className.replace("ab-hide","ab-show")}),0),n&&o.focus(),(0,z.UH)(r,o),(0,F.cM)(r.cards,t)};var d;null!=t?h(t):window.onload=(d=window.onload,function(){"function"==typeof d&&d(new Event("oldLoad")),h(document.body)})}function q(t,i){e.Ay.X()&&(document.querySelectorAll(".ab-feed").length>0?U():j(t,i))}var $={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"},H=i(6499);function W(t){if(!e.Ay.X())return;const i=e.Ay.nr();if(i){if(!(0,H.cy)(t))return N.A.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const e of t)if(!(0,H.BY)($,e,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return i.addSdkMetadata(t),!0}}var Y=i(9911);function X(){N.A.info("Destroying Braze instance"),e.Ay.destroy(!0)}var K=i(5767);function V(){const t=e.Ay.cr();t&&t.requestImmediateDataFlush();const i=new x.A.ee(null,!0),n="This-cookie-will-expire-in-"+i.ne();i.store(x.d.se,n);const s=T.A.Yt.Qt;new T.A(s,N.A).setItem(s.ss.ae,s.ie,!0),N.A.info("disableSDK was called"),e.Ay.destroy(!1),e.Ay.oe(!0)}function J(){new x.A.ee(null,!0).remove(x.d.se);const t=T.A.Yt.Qt;new T.A(t,N.A).re(t.ss.ae,t.ie),N.A.info("enableSDK was called"),e.Ay.destroy(!1),e.Ay.oe(!1)}function Z(t){if(!e.Ay.X())return;const i=e.Ay.te();if(!i)return;const n=i.ce().id;if("function"!=typeof t)return n;N.A.warn("The callback for getDeviceId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getDeviceId()`)"),t(n)}var Q=i(5459);function tt(t,i){return e.Ay.initialize(t,i)}function et(){return!!new x.A.ee(null,!0).br(x.d.se)}var it=i(9620),nt=i(1329),st=i(3368),rt=i(6148);function ot(){if(!e.Ay.X())return;const t=e.Ay.cr();if(!t)return;t.openSession();const i=T.A.Yt.Qt,n=new T.A(i,N.A);n.jr(i.ss.hr,((e,s)=>{const r=s.lastClick,o=s.trackingString;N.A.info(`Firing push click trigger from ${o} push click at ${r}`);const a=t.kr(r,o),l=function(){rt.B.rr().fe(st.A.vr,[o],a)};t.$r(l,l),n.re(i.ss.hr,e)})),n.Zt(i.ss.wr,(function(e){t.yr(e)}))}function at(){e.Ay.X()&&e.Ay.removeAllSubscriptions()}var lt=i(4825),ut=i(3240);function ct(t){N.A.setLogger(t)}var ht=i(8457);function dt(t){if(!e.Ay.X())return!1;if(""===t||!(0,ht.rK)(t,"set signature","signature",!1))return!1;const i=e.Ay.Sr();return!!i&&(i.setSdkAuthenticationSignature(t),!0)}function pt(t){var i;if(e.Ay.X())return null===(i=e.Ay.Sr())||void 0===i?void 0:i.subscribeToSdkAuthenticationFailures(t)}function ft(){N.A.toggleLogging()}function bt(){const t=e.Ay.l();if(null==t)return void N.A.warn(_.xE);t.clearData();const i=(0,H.HP)(T.A.Yt);for(let t=0;t<i.length;t++){const e=i[t],n=T.A.Yt[e];new T.A(n,N.A).clearData()}if(e.Ay.X())for(const t of e.Ay.gr())t.clearData(!0)}var gt=i(2645),mt=i(2982),At=i(8072);function vt(){if(e.Ay.X())return At.A.rr().Li()}function wt(){if(!e.Ay.X())return;const t=document.querySelectorAll(".ab-feed");for(let e=0;e<t.length;e++)(0,z.ID)(t[e])}var yt=i(9201),xt=i(7112),Et=i(4643),Ct=i(6346);function St(t,i,n){e.Ay.X()&&(document.querySelectorAll(".ab-feed").length>0?wt():(0,Et.showFeed)(t,i,n))}var kt=i(1201),_t=i(9086),Tt=i(2631),Nt=i(5862),It=i(9617),Dt=i(4095),Ot=i(917),Pt=i(1545),Rt=i(4784);function Mt(){(0,Pt.n)(undefined,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333;color-scheme:normal}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}"),(0,Rt.N)()}var Lt=i(8412),zt=i(735);function Ut(t,e){return null==t?"":(t=parseInt(t.toString()),isNaN(t)?"":(e&&!isNaN(parseFloat(e.toString()))||(e=1),"rgba("+[(16711680&(t>>>=0))>>>16,(65280&t)>>>8,255&t,((4278190080&t)>>>24)/255*e].join(",")+")"))}function Bt(t){if(!e.Ay.X())return!1;if(!(t instanceof kt.A||t instanceof Tt.A))return N.A.error(_.fX),!1;const i=t instanceof Tt.A?I.w.po:I.w.Xe;return s.A.m().q(t,i).L}function Ft(t){if(!e.Ay.X())return!1;if(!(t instanceof kt.A))return N.A.error(_.fX),!1;const i=s.A.m().q(t,I.w.Ve);if(i){t.mo()||Bt(t);for(let e=0;e<i.ge.length;e++)rt.B.rr().fe(st.A.Zr,[t.triggerId],i.ge[e])}return i.L}var Gt=i(8026);function jt(t,i,n){if(!e.Ay.X())return!1;if(!(t instanceof It.A))return N.A.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let r=I.w.Ve;null!=i&&(r=I.w.We);const o=s.A.m().q(t,r,i,n);if(o.L)for(let e=0;e<o.ge.length;e++)rt.B.rr().fe(st.A.Zr,[t.triggerId,i],o.ge[e]);return o.L}var qt=i(3072),$t=i(5734),Ht=i(5084);function Wt(t,i){var n;if(!e.Ay.X())return!1;if(!(t instanceof _t.A))return N.A.error("button must be an InAppMessageButton object"),!1;if(!(i instanceof kt.A))return N.A.error(_.fX),!1;const r=s.A.m().Ze(t,i);if(r.L)for(let e=0;e<r.ge.length;e++)rt.B.rr().fe(st.A.Zr,[i.triggerId,null===(n=t.id)||void 0===n?void 0:n.toString()],r.ge[e]);return r.L}var Yt=i(2704),Xt={qe:t=>{const e=t.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");let i;for(let t=0;t<e.length;t++)i=e[t],i.tabIndex=0;if(e.length>0){const i=e[0],n=e[e.length-1];t.addEventListener("keydown",(e=>{const s=document.activeElement;e.keyCode===Yt.c.lo&&(e.shiftKey||s!==n&&s!==t?!e.shiftKey||s!==i&&s!==t||(e.preventDefault(),n.focus()):(e.preventDefault(),i.focus()))}))}},Be:(t,e)=>{e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Modal Message"),t&&e.setAttribute("aria-labelledby",t)},Te:(t,e,i,n)=>{if(t.buttons&&t.buttons.length>0){const s=document.createElement("div");s.className="ab-message-buttons",i.appendChild(s);const r=i.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");const o=s=>r=>(t.he(i,(()=>{Wt(s,t),s.clickAction===kt.A.ClickAction.URI?(0,gt.U)(s.uri||"",n||t.openTarget===kt.A.OpenTarget.BLANK,r):s.clickAction===kt.A.ClickAction.NEWS_FEED&&e()})),r.stopPropagation(),!1);for(let e=0;e<t.buttons.length;e++){const i=t.buttons[e],n=document.createElement("button");n.className="ab-message-button",n.setAttribute("type","button"),(0,Lt.P4)(n,"touchstart");let r=i.text;""===i.text&&(r=""),n.appendChild(document.createTextNode(r)),t.be()||(n.style.backgroundColor=Ut(i.backgroundColor),n.style.color=Ut(i.textColor),n.style.borderColor=Ut(i.borderColor)),n.onclick=o(i),s.appendChild(n)}}}},Kt=i(5675);function Vt(t,n,s){if(!e.Ay.X())return;if(Mt(),null==t)return!1;if(t instanceof Tt.A)return N.A.info("User received control for a multivariate test, logging to Braze servers."),Bt(t),!0;if(!(t instanceof kt.A))return!1;if(t.constructor===kt.A)return!1;t.Nh();const r=t instanceof It.A;if(r&&!t.trusted&&!e.Ay.tr())return N.A.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),!1;if(null==n&&(n=document.body),t.xe()&&n.querySelectorAll(".ab-modal-interactions").length>0)return N.A.info(`Cannot show in-app message ${t.message} because another message is being shown.`),!1;if($t.uD.fo()){const e=$t.uD.jo();if(e===$t.j3.PORTRAIT&&t.orientation===kt.A.Orientation.LANDSCAPE||e===$t.j3.LANDSCAPE&&t.orientation===kt.A.Orientation.PORTRAIT){const i=e===$t.j3.PORTRAIT?"portrait":"landscape",n=t.orientation===kt.A.Orientation.PORTRAIT?"portrait":"landscape";return N.A.info(`Not showing ${n} in-app message ${t.message} because the screen is currently ${i}`),!1}}if(!e.Ay.tr()){let e=!1;if(t.buttons&&t.buttons.length>0){const i=t.buttons;for(let t=0;t<i.length;t++)if(i[t].clickAction===kt.A.ClickAction.URI){const n=i[t].uri;e=(0,w.P)(n)}}else t.clickAction===kt.A.ClickAction.URI&&(e=(0,w.P)(t.uri));if(e)return N.A.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),!1}const o=document.createElement("div");if(o.className="ab-iam-root v3",o.className+=function(t){let e="";return t.animateIn&&(e+=" ab-animate-in"),t.animateOut&&(e+=" ab-animate-out"),t instanceof Nt.A?e+=" ab-effect-fullscreen":t instanceof It.A?e+=" ab-effect-html":t instanceof Dt.A?e+=" ab-effect-modal":t instanceof Ot.A&&(e+=" ab-effect-slide"),e}(t),o.setAttribute("role","complementary"),t.ve()&&(o.id=t.htmlId),e.Ay.nn(e.lw.bo)&&(o.style.zIndex=(e.Ay.nn(e.lw.bo)+1).toString()),n.appendChild(o),t.be()){const i=document.createElement("style");i.innerHTML=t.css,i.id=t.ye(),null!=e.Ay.nn(e.lw.ho)&&i.setAttribute("nonce",e.Ay.nn(e.lw.ho)),document.getElementsByTagName("head")[0].appendChild(i)}const a=t instanceof Ot.A,l=function(t,n,s,r,o,a,l,u=document.body){if(t.we=document.activeElement,t instanceof It.A)return function(t,n,s,r,o,a){const l=document.createElement("iframe");l.setAttribute("title","Modal Message"),o&&(l.style.zIndex=(o+1).toString());const u=e=>{const i=e.getAttribute("href"),n=e.onclick;return s=>{if(null!=n&&"function"==typeof n&&!1===n.bind(e)(s))return;let o=(0,w.y)(i).abButtonId;if(null!=o&&""!==o||(o=e.getAttribute("id")||void 0),null!=i&&""!==i&&0!==i.indexOf("#")){const n="blank"===(e.getAttribute("target")||"").toLowerCase().replace("_",""),a=r||t.openTarget===kt.A.OpenTarget.BLANK||n,u=()=>{jt(t,o,i),$t.uD.openUri(i,a,s)};a?u():t.he(l,u)}else jt(t,o,i||void 0);return s.stopPropagation(),!1}},c=(t,e,i)=>{const n=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${i}['"]\\)`,s=t.match(new RegExp(n));if(s){const i=`${s[1]}.setAttribute("nonce", "${e}")`;return`${t.slice(0,s.index+s[0].length)};${i};${t.slice(s.index+s[0].length)}`}return null};if(l.onload=()=>{let r=null;if(null!=a){r=document.createElement("html"),r.innerHTML=t.message||"";const e=r.getElementsByTagName("style");for(let t=0;t<e.length;t++)e[t].setAttribute("nonce",a);const i=r.getElementsByTagName("script");for(let t=0;t<i.length;t++){i[t].setAttribute("nonce",a),i[t].innerHTML=i[t].innerHTML.replace(/<style>/g,`<style nonce='${a}'>`);const e=c(i[t].innerHTML,a,"script");e&&(i[t].innerHTML=e);const n=c(i[t].innerHTML,a,"style");n&&(i[t].innerHTML=n)}}const o=l.contentWindow;o.focus();const h=o.document.querySelector("html");h&&(h.innerHTML=r?r.innerHTML:t.message||"",(0,Ht.U)(h));const d=o.document.getElementsByTagName("head")[0];if(null!=d){if(t.be()){const e=document.createElement("style");e.innerHTML=t.css||"",e.id=t.ye()||"",null!=a&&e.setAttribute("nonce",a),d.appendChild(e)}const e=o.document.createElement("base");null!=e&&(e.setAttribute("target","_parent"),d.appendChild(e))}const p=o.document.getElementsByTagName("title");p&&p.length>0&&l.setAttribute("title",p[0].textContent||"");const f={closeMessage:function(){t.he(l)},logClick:function(){jt(t,...arguments)},display:{},web:{}},b=function(){return function(){const t=arguments;Promise.resolve().then(i.bind(i,1380)).then((i=>{e.Ay.so()?i.requestPushPermission(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))}},g={requestImmediateDataFlush:function(){const t=arguments;Promise.resolve().then(i.bind(i,3240)).then((({requestImmediateDataFlush:i})=>{e.Ay.so()?i(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))},logCustomEvent:function(){const t=arguments;Promise.resolve().then(i.bind(i,9620)).then((({logCustomEvent:i})=>{e.Ay.so()?i(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))},logPurchase:function(){const t=arguments;Promise.resolve().then(i.bind(i,1329)).then((({logPurchase:i})=>{e.Ay.so()?i(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))},unregisterPush:function(){const t=arguments;Promise.resolve().then(i.bind(i,2045)).then((({unregisterPush:i})=>{e.Ay.so()?i(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))},requestPushPermission:b(),changeUser:function(){const t=arguments;Promise.resolve().then(i.bind(i,9911)).then((({changeUser:i})=>{e.Ay.so()?i(...Array.prototype.slice.call(t)):N.A.error(_.xE)}))}},m=function(t){return function(){g[t](...Array.prototype.slice.call(arguments))}};for(const t of(0,H.HP)(g))f[t]=m(t);const A=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],v=function(t){return function(){const e=(0,Q.w)();e&&e[t](...Array.prototype.slice.call(arguments))}},w={};for(let t=0;t<A.length;t++)w[A[t]]=v(A[t]);f.getUser=function(){return w};const y={showFeed:n},x=function(e){return function(){const i=arguments;t.he(l,(function(){y[e](...Array.prototype.slice.call(i))}))}},E=f.display;for(const t of(0,H.HP)(y))E[t]=x(t);const C={registerAppboyPushMessages:b()},S=function(t){return function(){C[t](...Array.prototype.slice.call(arguments))}},k=f.web;for(const t of(0,H.HP)(C))k[t]=S(t);if(o.appboyBridge=f,o.brazeBridge=f,t.Ae!==kt.A.Ce.je){const t=o.document.getElementsByTagName("a");for(let e=0;e<t.length;e++)t[e].onclick=u(t[e]);const e=o.document.getElementsByTagName("button");for(let t=0;t<e.length;t++)e[t].onclick=u(e[t])}const T=o.document.body;if(null!=T){t.ve()&&(T.id=t.htmlId||"");const e=document.createElement("hidden");e.onclick=f.closeMessage,e.className="ab-programmatic-close-button",T.appendChild(e)}o.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==l.className.indexOf("ab-start-hidden")&&(l.className=l.className.replace("ab-start-hidden",""),s(l)),document.activeElement!==l&&l.focus()},l.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",Gt.A.OS===qt.u.io){const e=document.createElement("div");return e.className="ab-ios-scroll-wrapper",e.appendChild(l),t.Pe=e,e}return t.Pe=l,l}(t,n,s,o,a,l);const c=function(t,e,i,n,s,r,o=document.body){let a=null;const l=document.createElement("div");var u;l.className="ab-in-app-message ab-start-hidden ab-background",r&&(l.style.zIndex=(r+1).toString()),t.xe()&&(l.className+=" ab-modal-interactions",l.setAttribute("tabindex","-1")),t.be()||(l.style.color=Ut(t.textColor),l.style.backgroundColor=Ut(t.backgroundColor),null!=(u=t.backgroundColor)&&(u=parseInt(u.toString()),!isNaN(u)&&(4278190080&u)>>>24==0)&&(l.className+=" ab-no-shadow"));const c=()=>{-1!==l.className.indexOf("ab-start-hidden")&&(l.className=l.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?n(`Cannot show in-app message ${t.message} because another message is being shown.`,kt.A.Me.ke):i(l))},h=(e=!0)=>{let i=document.querySelectorAll(".ab-iam-root");i&&0!==i.length||(i=o.querySelectorAll(".ab-iam-root")),i&&i.length>0&&(i[0].classList.remove("ab-iam-img-loading"),a&&(clearTimeout(a),a=null),e?c():N.A.error(`Cannot show in-app message ${t.message} because the image failed to load.`))};t.imageStyle===kt.A.ImageStyle.GRAPHIC&&(l.className+=" graphic"),t.orientation===kt.A.Orientation.LANDSCAPE&&(l.className+=" landscape"),null!=t.buttons&&0===t.buttons.length&&(t.clickAction!==kt.A.ClickAction.NONE&&(l.className+=" ab-clickable"),l.onclick=i=>(t.he(l,(()=>{Ft(t),t.clickAction===kt.A.ClickAction.URI?(0,gt.U)(t.uri||"",s||t.openTarget===kt.A.OpenTarget.BLANK,i):t.clickAction===kt.A.ClickAction.NEWS_FEED&&e()})),i.stopPropagation(),!1));const d=(0,zt.p)("Close Message",t.be()?void 0:Ut(t.closeButtonColor),(()=>{t.he(l)}));l.appendChild(d),r&&(d.style.zIndex=(r+2).toString());const p=document.createElement("div");p.className="ab-message-text";const f=(t.messageAlignment||t.$e).toLowerCase();p.className+=" "+f+"-aligned";let b=!1;const g=document.createElement("div");if(g.className="ab-image-area",t.imageUrl){if(t.cropType===kt.A.CropType.CENTER_CROP){const e=document.createElement("span");e.className="ab-center-cropped-img",e.style.backgroundImage="url("+t.imageUrl+")",e.setAttribute("role","img"),e.setAttribute("aria-label","Modal Image"),t.ze(e),g.appendChild(e)}else{const e=document.createElement("img");if(e.setAttribute("src",t.imageUrl),t.ze(e),0===document.querySelectorAll(".ab-iam-img-loading").length){b=!0;const t=document.querySelectorAll(".ab-iam-root");t&&t.length>0&&t[0].classList.add("ab-iam-img-loading"),a=window.setTimeout((()=>{h(!1)}),6e4),e.onload=()=>{h()},e.onerror=()=>{h(!1)}}g.appendChild(e)}l.appendChild(g),p.className+=" ab-with-image"}else if(t.icon){g.className+=" ab-icon-area";const e=document.createElement("span");e.className="ab-icon",t.be()||(e.style.backgroundColor=Ut(t.iconBackgroundColor),e.style.color=Ut(t.iconColor));const i=document.createElement("i");i.className="fa",i.appendChild(document.createTextNode(t.icon)),i.setAttribute("aria-hidden","true"),e.appendChild(i),g.appendChild(e),l.appendChild(g),p.className+=" ab-with-icon"}if((0,Lt.P4)(p,"touchstart"),t.header&&t.header.length>0){const e=document.createElement("h1");e.className="ab-message-header",t.Le=Kt.A.W(),e.id=t.Le;const i=(t.headerAlignment||kt.A.TextAlignment.CENTER).toLowerCase();e.className+=" "+i+"-aligned",t.be()||(e.style.color=Ut(t.headerTextColor)),e.appendChild(document.createTextNode(t.header)),p.appendChild(e)}return p.appendChild(t.Ie()),l.appendChild(p),b||c(),t.Pe=l,l}(t,n,s,r,o,a,u);if(t instanceof Nt.A||t instanceof Dt.A){const e=t instanceof Nt.A?"ab-fullscreen":"ab-modal";c.className+=` ${e} ab-centered`,Xt.Te(t,n,c,o),Xt.qe(c),Xt.Be(t.Le,c)}else if(t instanceof Ot.A){c.className+=" ab-slideup";const e=c.getElementsByClassName("ab-close-button")[0];if(null!=e){const i=(0,Lt.RJ)("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",t.be()?void 0:Ut(t.closeButtonColor));i.setAttribute("class","ab-chevron"),e.appendChild(i)}let i,n;(0,Lt.sr)(c,Lt.X.U,(t=>{c.className+=" ab-swiped-left",null!=e&&null!=e.onclick&&e.onclick(t)})),(0,Lt.sr)(c,Lt.X.V,(t=>{c.className+=" ab-swiped-right",null!=e&&null!=e.onclick&&e.onclick(t)})),t.slideFrom===kt.A.SlideFrom.TOP?(i=Lt.X.De,n=" ab-swiped-up"):(i=Lt.X.Ee,n=" ab-swiped-down"),(0,Lt.sr)(c,i,(t=>{c.className+=n,null!=e&&null!=e.onclick&&e.onclick(t)}))}return c}(t,(()=>{Promise.resolve().then(i.bind(i,4643)).then((t=>{e.Ay.so()?t.showFeed():N.A.error(_.xE)}))}),(i=>{if(t.xe()&&t.do()){const n=document.createElement("div");if(n.className="ab-page-blocker",t.be()||(n.style.backgroundColor=Ut(t.frameColor)),e.Ay.nn(e.lw.bo)&&(n.style.zIndex=e.Ay.nn(e.lw.bo).toString()),o.appendChild(n),!e.Ay.nn(e.lw.Lh)){const e=(new Date).valueOf();n.onclick=n=>{(new Date).valueOf()-e>kt.A.fh&&(t.he(i),n.stopPropagation())}}o.appendChild(i),i.focus(),t.Oh(o)}else if(a){const e=document.querySelectorAll(".ab-slideup");let n=null;for(let t=e.length-1;t>=0;t--)if(e[t]!==i){n=e[t];break}if(t.slideFrom===kt.A.SlideFrom.TOP){let t=0;null!=n&&(t=n.offsetTop+n.offsetHeight),i.style.top=Math.max(t,0)+"px"}else{let t=0;null!=n&&(t=(window.innerHeight||document.documentElement.clientHeight)-n.offsetTop),i.style.bottom=Math.max(t,0)+"px"}}else if(r&&!e.Ay.nn(e.lw.Lh)){const e=t;(0,Ht.B)(i)&&i.contentWindow&&i.contentWindow.addEventListener("keydown",(function(t){t.keyCode===Yt.c.mh&&e.closeMessage()}))}Bt(t),t.dismissType===kt.A.DismissType.AUTO_DISMISS&&setTimeout((()=>{o.contains(i)&&t.he(i)}),t.duration),"function"==typeof s&&s()}),(t=>{N.A.info(t)}),e.Ay.nn(e.lw.wo),e.Ay.nn(e.lw.bo),e.Ay.nn(e.lw.ho),n);return(r||a)&&(o.appendChild(l),t.Oh(o)),!0}function Jt(){if(!e.Ay.X())return;Mt();const t=s.A.m();if(null==t.Qe()){const e=r((t=>Vt(t)));t.Ue(e)}return t.Qe()}function Zt(t){if(e.Ay.X())return t instanceof Tt.A?(N.A.info("Not deferring since this is a ControlMessage."),!1):t instanceof kt.A?s.A.m().de(t):(N.A.info("Not an instance of InAppMessage, ignoring."),!1)}function Qt(){if(e.Ay.X())return s.A.m().Ge()}var te=i(691);function ee(){if(e.Ay.X())return te.A.isPushBlocked()}function ie(){if(e.Ay.X())return te.A.isPushPermissionGranted()}function ne(){if(e.Ay.X())return te.A.isPushSupported()}var se=i(1380),re=i(2045),oe=i(312),ae=i(8826),le=i(3799),ue=i(457);function ce(t){if(!e.Ay.X())return;const i=e.Ay.ir();if(i&&!i.yi())return N.A.info("Feature flags are not enabled."),null;const n=ue.A.rr().Ci();return n[t]?n[t]:null}function he(){if(!e.Ay.X())return;const t=[],i=e.Ay.ir();if(i&&!i.yi())return N.A.info("Feature flags are not enabled."),t;const n=ue.A.rr().Ci();for(const e in n)t.push(n[e]);return t}function de(t){if(!e.Ay.X())return;const i=ue.A.rr();if(i.Ai()){const e=he();e&&"function"==typeof t&&t(e)}return i.ei(t)}function pe(t){if(!e.Ay.X())return;if(!t)return!1;const i="Not logging a feature flag impression. The feature flag was not part of any matching experiment.",n=ue.A.rr().Ci();if(!n[t])return N.A.info(i),!1;const s=n[t].trackingString;if(!s)return N.A.info(i),!1;const r=ue.A.rr().Di();if(r[s])return N.A.info("Not logging another feature flag impression. This ID was already logged this session."),!1;r[s]=!0,ue.A.rr().Ri(r);const o={fid:t,fts:s};return C.A.q(I.w.Fr,o).L}function fe(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class be{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;fe(this,"_lpauth_authStateChanged",(()=>{const t=this._braze.getUser().getUserId();this._lpauth.currentUser()&&t!==this._lpauth.currentUser().uid&&(this._logger.debug('LP-BrazeAuthFirebaseBridge: fixes Braze identity for "'+this._lpauth.currentUser().uid+'"'),this._braze.changeUser(this._lpauth.currentUser().uid))})),fe(this,"_lpauth_loginSuccess",(t=>{this._logger.debug('LP-BrazeAuthFirebaseBridge: loginSuccess for "'+t.user.uid+'"'),this._braze.logCustomEvent("WEB_LOGIN_CLOSE",{result:"success"}),this._braze.changeUser(t.user.uid),this._raiseOnLoginSuccess()})),fe(this,"_lpauth_loginCancelled",(()=>{this._logger.debug("LP-BrazeAuthFirebaseBridge: loginCancelled"),this._braze.logCustomEvent("WEB_LOGIN_CLOSE",{result:"cancel"})})),fe(this,"_raiseOnLoginSuccess",(()=>{this._logger.debug("LP-BrazeAuthFirebaseBridge: "+this._loginSuccessCallbacks.length.toString()+" callback(s) registered");for(var t=0;t<this._loginSuccessCallbacks.length;t++)this._loginSuccessCallbacks[t]()})),this._logger=i||console,this._loginSuccessCallbacks=[],this._braze=t,this._lpauth=e,this._lpauth.onAuthStateChanged(this._lpauth_authStateChanged),this._lpauth.onLoginSuccess(this._lpauth_loginSuccess),this._lpauth.onLoginCancelled(this._lpauth_loginCancelled)}triggerLoginForm(){this._lpauth.login()}onLoginSuccess(t){this._logger.debug("LP-BrazeAuthFirebaseBridge: registering callback for login success"),this._loginSuccessCallbacks.push(t)}}function ge(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function me(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function Ae(t,e){return t.get(we(t,e))}function ve(t,e,i){return t.set(we(t,e),i),i}function we(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var ye=new WeakMap,xe=new WeakMap,Ee=new WeakMap,Ce=new WeakMap,Se=new WeakMap,ke=new WeakMap,_e=new WeakMap,Te=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,De=new WeakMap,Oe=new WeakMap,Pe=new WeakMap;class Re{constructor(){me(this,ye,void 0),me(this,xe,void 0),me(this,Ee,void 0),me(this,Ce,void 0),me(this,Se,void 0),me(this,ke,void 0),ge(this,"setStoryId",(t=>{ve(xe,this,t)})),ge(this,"setStoryFormat",(t=>{ve(Ee,this,t)})),ge(this,"setSectionId",(t=>{ve(Ce,this,t)})),ge(this,"setRootSectionId",(t=>{ve(Se,this,t)})),ge(this,"setLocation",(t=>{ve(ke,this,t)})),ge(this,"getCard",(t=>{ve(ye,this,t),Ae(_e,this).call(this);for(let e of t)if(Ae(Ie,this).call(this,e))return e;return null})),me(this,_e,(()=>{Ae(ye,this).sort(((t,e)=>{let i=1e3,n=1e3;return t.extras&&t.extras.priority&&(i=Ae(Te,this).call(this,t.extras.priority)),e.extras&&e.extras.priority&&(n=Ae(Te,this).call(this,e.extras.priority)),i<n?1:i>n?-1:0}))})),me(this,Te,(t=>Ae(Ne,this).call(this,t)?1e3:Number(t)||0)),me(this,Ne,(t=>/^\s*$/.test(t))),me(this,Ie,(t=>!!Ae(De,this).call(this,t)&&!Ae(Oe,this).call(this,t)&&Ae(Pe,this).call(this,t))),me(this,De,(t=>{if(!t.extras||!t.extras.location)return!1;let e=!1;return t.extras.location.split(",").forEach((t=>{Ae(ke,this).toLowerCase().trim()===t.toLowerCase().trim()&&(e=!0)})),e})),me(this,Oe,(t=>{if(!t.extras||!t.extras.exclusions)return!1;const e=t.extras.exclusions;let i=!1;return e.split(",").forEach((t=>{const e=t.split(":")[0].toLowerCase().trim(),n=t.split(":")[1].toLowerCase().trim();switch(e){case"section":Ae(Ce,this)!==n&&Ae(Se,this)!==n||(i=!0);break;case"format":Ae(Ee,this)===n&&(i=!0);break;case"storyid":Ae(xe,this)===n&&(i=!0);break;case"platform":"lpca"===n&&(i=!0)}})),i})),me(this,Pe,(t=>{if(!t.extras||!t.extras.inclusions)return!0;const e=t.extras.inclusions;let i=!1;return e.split(",").forEach((t=>{const e=t.split(":")[0].toLowerCase().trim(),n=t.split(":")[1].toLowerCase().trim();switch(e){case"section":Ae(Ce,this)!==n&&Ae(Se,this)!==n||(i=!0);break;case"format":Ae(Ee,this)===n&&(i=!0);break;case"storyid":Ae(xe,this)===n&&(i=!0);break;case"platform":"lpca"===n&&(i=!0)}})),i}))}}function Me(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Le(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function ze(t,e){return t.get(Be(t,e))}function Ue(t,e,i){return t.set(Be(t,e),i),i}function Be(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var Fe=new WeakMap,Ge=new WeakMap;class je{constructor(t,e){Le(this,Fe,void 0),Le(this,Ge,void 0),Me(this,"areContentCardsRefreshed",!1),Me(this,"getCards",(()=>{var t;return null!==(t=ze(Fe,this).getCachedContentCards().cards)&&void 0!==t?t:[]})),Me(this,"refreshCards",(()=>new Promise(((t,e)=>{const i=setTimeout((()=>{ze(Ge,this).debug("ContentCard: Repository - requestContentCardsRefresh TIMEOUT."),e()}),3e3);ze(Fe,this).requestContentCardsRefresh((()=>{clearTimeout(i),ze(Ge,this).debug("ContentCard: Repository - requestContentCardsRefresh SUCCESS.",this.getCards()),t()}),(()=>{clearTimeout(i),ze(Ge,this).debug("ContentCard: Repository - requestContentCardsRefresh FAIL."),e()}))})).finally((()=>{this.areContentCardsRefreshed=!0})))),Ue(Fe,this,t),Ue(Ge,this,e)}}function qe(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function $e(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function He(t,e){return t.get(Ye(t,e))}function We(t,e,i){return t.set(Ye(t,e),i),i}function Ye(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var Xe=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,Je=new WeakMap,Ze=new WeakMap,Qe=new WeakMap,ti=new WeakMap,ei=new WeakMap;class ii{constructor(t){$e(this,Xe,"https:"),$e(this,Ke,"braze.lapresse.ca"),$e(this,Ve,"/triggerevent"),$e(this,Je,void 0),$e(this,Ze,void 0),qe(this,"shouldShowButtonWithTriggerEvent",(()=>He(ti,this).call(this)&&He(Qe,this).call(this))),qe(this,"shouldShowUrlButton",(()=>He(ti,this).call(this)&&He(ei,this).call(this))),qe(this,"shouldShowUrlImage",(()=>He(ei,this).call(this))),$e(this,Qe,(()=>He(Je,this).protocol.toLowerCase()===He(Xe,this)&&He(Je,this).hostname.toLowerCase()===He(Ke,this)&&He(Je,this).pathname.toLowerCase()===He(Ve,this))),$e(this,ti,(()=>!!He(Ze,this).extras.buttonText)),$e(this,ei,(()=>He(Je,this).protocol.toLowerCase()===He(Xe,this)&&He(Je,this).hostname.toLowerCase()!==He(Ke,this))),qe(this,"getTriggerEventId",(()=>He(Je,this).searchParams.get("id"))),We(Ze,this,t),We(Je,this,new URL(He(Ze,this).url))}}function ni(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function si(t,e,i){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,i)}function ri(t,e){return t.get(ai(t,e))}function oi(t,e,i){return t.set(ai(t,e),i),i}function ai(t,e,i){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:i;throw new TypeError("Private element is not present on this object")}var li=new WeakMap,ui=new WeakMap,ci=new WeakMap,hi=new WeakMap,di=new WeakMap,pi=new WeakMap,fi=new WeakMap,bi=new WeakMap,gi=new WeakMap,mi=new WeakMap,Ai=new WeakMap,vi=new WeakMap,wi=new WeakMap,yi=new WeakMap,xi=new WeakMap,Ei=new WeakMap;class Ci{constructor(t,e,i,n,s){si(this,li,void 0),si(this,ui,void 0),si(this,ci,void 0),si(this,hi,void 0),si(this,di,void 0),si(this,pi,!1),si(this,fi,void 0),ni(this,"show",(()=>{ri(di,this).debug("LP-Braze: filling content card spot:",ri(li,this));let t=ri(hi,this).getCards();if(!t.length)throw new Error("No content cards from Braze");const e=ri(fi,this).getCard(t);if(!e)throw new Error("No content cards applies to spot");ri(mi,this).call(this,e),ri(bi,this).call(this,e),ri(gi,this).call(this,e)})),si(this,bi,(t=>{const e=ri(ci,this).getElementsByTagName("a");for(const i of e)i.addEventListener("click",(()=>{ri(ui,this).logContentCardClick(t),ri(Ai,this).call(this,t),ri(di,this).debug("LP-Braze: Logged event card click to braze.",ri(li,this))}))})),si(this,gi,(t=>{if(ri(Ei,this).call(this,ri(ci,this)))return ri(ui,this).logContentCardImpressions([t]),oi(pi,this,!0),void ri(di,this).debug("LP-Braze: Logged event card impression to braze.",ri(li,this));const e=()=>{ri(Ei,this).call(this,ri(ci,this))&&(ri(ui,this).logContentCardImpressions([t]),oi(pi,this,!0),document.removeEventListener("scroll",e),ri(di,this).debug("LP-Braze: Logged card impression to braze (after scroll event).",ri(li,this)))};document.addEventListener("scroll",e,{passive:!0})})),si(this,mi,(t=>{var e,i;oi(ci,this,document.querySelector('[data-content-card-location="'.concat(ri(li,this),'"]')));const n=new ii(t),s=["contentCard--visible"],r=null!==(e=null==t||null===(i=t.extras)||void 0===i?void 0:i.style)&&void 0!==e?e:"default";if(s.push("contentCard--"+r),n.shouldShowButtonWithTriggerEvent())ri(yi,this).call(this,t,n.getTriggerEventId(),r),s.push("contentCard--withButton");else if(n.shouldShowUrlButton())ri(wi,this).call(this,t,r),s.push("contentCard--withButton");else{if(!n.shouldShowUrlImage())throw new Error("Content card configuration not supported.");ri(vi,this).call(this,t),s.push("contentCard--imageOnly")}ri(ci,this).classList.add(...s)})),si(this,Ai,(t=>{var e;"true"!==(null==t||null===(e=t.extras)||void 0===e?void 0:e.alwaysVisible)&&ri(ui,this).logCardDismissal(t)})),si(this,vi,(t=>{ri(ci,this).innerHTML='\n                <a class="contentCard__link" href="'.concat(t.url,'" target="_blank">\n                    <img class="contentCard__image" src="').concat(t.imageUrl,'" />\n                </a>\n            ')})),si(this,wi,((t,e)=>{ri(ci,this).innerHTML='\n                <img class="contentCard__image" src="'.concat(t.imageUrl,'" />\n                <div class="contentCard__btn">\n                    <a href="').concat(t.url,'" class="contentCard__link contentCard__link--').concat(e,'" rel="noopener" target="_blank">').concat(t.extras.buttonText,"</a>\n                </div>\n            ")})),si(this,yi,((t,e,i)=>{ri(ci,this).innerHTML='\n                <img class="contentCard__image" src="'.concat(t.imageUrl,'" />\n                <div class="contentCard__btn">\n                    <a class="contentCard__link contentCard__link--').concat(i,'" id="contentCard__link" data-tracking="false">').concat(t.extras.buttonText,"</a>\n                </div>\n            "),document.getElementById("contentCard__link").addEventListener("click",(()=>{ri(xi,this).call(this,e)}))})),si(this,xi,(t=>{const e={id:encodeURI(t)};ri(di,this).debug('LP-Braze: send EVENT_LPCA_TRIGGER event ("'+encodeURI(t)+'")',ri(li,this)),ri(ui,this).logCustomEvent("EVENT_LPCA_TRIGGER",e)})),si(this,Ei,(t=>{const e=t.getBoundingClientRect();return e.top>=-t.offsetHeight&&(e.bottom<=(window.innerHeight||document.documentElement.clientHeight)||e.top<=(window.innerHeight||document.documentElement.clientHeight))})),ni(this,"hasContentCardLoggedImpression",(()=>ri(pi,this))),oi(li,this,t),oi(ui,this,e),oi(hi,this,i),oi(di,this,s),oi(fi,this,n)}}class Si{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._logger=i||console,this._logger.debug("CustomHTMLBridge: initialize"),this._domWindow=t,this._domDocument=this._domWindow.document,this._authBridge=e,this._domWindow.addEventListener("message",this.customHTMLModalEventListener.bind(this),!1)}customHTMLModalEventListener(t){if(t.origin!==this._domDocument.location.origin)return;let e=t.data;if("string"!=typeof e)return;if(!e.startsWith("LP.BRZ:"))return;let i={name:"unknown"};try{i=JSON.parse(e.substring(7))}catch(t){return console.error(t),void console.warn("CustomHTMLBridge: skipping message processing due to previous exception.")}this._logger.debug("CustomHTMLBridge: processing message %o",i.name),"TRIGGER-LOGIN-FORM"===i.name&&this._handleTriggerLoginForm(i.params)}_handleTriggerLoginForm(){this._authBridge.triggerLoginForm()}}function ki(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class _i{constructor(t){ki(this,"disable",(()=>{null===this._scrollReset&&(this._scrollReset={overflow:this._domDocument.body.style.overflow,touchAction:this._domDocument.body.style.touchAction},this._domDocument.body.style.overflow="hidden",this._domDocument.body.style.touchAction="none",this._domDocument.body.addEventListener("touchmove",this._touchMoveGobber,{capture:!0,passive:!1}))})),ki(this,"reset",(()=>{null!==this._scrollReset&&(this._domDocument.body.style.overflow=this._scrollReset.overflow,this._domDocument.body.style.touchAction=this._scrollReset.touchAction,this._domDocument.body.removeEventListener("touchmove",this._touchMoveGobber,{capture:!0,passive:!1}),this._scrollReset=null)})),ki(this,"_touchMoveGobber",(t=>{t.preventDefault(),t.stopImmediatePropagation()})),this._domDocument=t,this._scrollReset=null}}function Ti(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Ni{constructor(t,e,i){Ti(this,"show",(t=>{this._createContainerDiv();var e=this._braze,i=this._authBridge,n=this,s=this._containerDiv;window.NGBridge={message:{logClick:i=>{e.logInAppMessageHtmlClick(t,i)},close:()=>{n._destroy()},disableScroll:()=>{n._disableScroll()},setMessageHeight:t=>{s.style.height=t}},getUser:e.getUser,auth:i},this._containerDiv.innerHTML=this._getMessageHead(t.message)+this._getMessageBody(t.message),this._domDocument.body.appendChild(this._containerDiv),this._activateScriptTags(this._containerDiv),e.logInAppMessageImpression(t)})),Ti(this,"_disableScroll",(()=>{this._scrollControl.disable()})),Ti(this,"_destroy",(()=>{this._scrollControl.reset(),this._domDocument.body.removeChild(this._containerDiv)})),this._domDocument=e,this._braze=t,this._authBridge=i,this._containerDiv=null,this._scrollControl=new _i(e)}_activateScriptTags(t){if("SCRIPT"===t.tagName)t.parentNode.replaceChild(this._recreateScriptElement(t),t);else for(var e=-1,i=t.childNodes;++e<i.length;)this._activateScriptTags(i[e]);return t}_recreateScriptElement(t){var e=this._domDocument.createElement("script");e.text=t.innerHTML;for(var i,n=-1,s=t.attributes;++n<s.length;)e.setAttribute((i=s[n]).name,i.value);return e}_createContainerDiv(){var t=this._domDocument.createElement("div");t.style.position="fixed",t.style.bottom="0px",t.style.height="100px",t.style.width="100%",t.style.backgroundColor="transparent",t.style.border="none",t.style.overflow="auto",t.style.boxSizing="border-box",t.style.boxShadow="0 0 4px rgba(0,0,0,.3)",t.style.lineHeight="normal",t.style.letterSpacing="normal",t.style.zIndex=1050,t.style.maxWidth="100%",t.style.display="inline-block",t.style.pointerEvents="all",t.style.color="#333",t.style.webkitTapHighlightColor="transparent",t.style.outline="none",t.style.fontSize="16px",this._containerDiv=t}_getMessageHead(t){return t.match(/<head>([\s\S]+)<[/]head>/im)[1]}_getMessageBody(t){return t.match(/<body>([\s\S]+)<[/]body>/im)[1]}}class Ii{constructor(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;var s,r,o,a;s=this,o=(t,e,i)=>{const n={newsletterId:t,isLoggedIn:e,userAgent:i};this._logger.debug('LP-Braze: send WEB_NEWSLETTER_SUBSCRIPTION_COMPLETE event ("'+t+'", "'+e+'", "'+i+'")'),this._braze.logCustomEvent("WEB_NEWSLETTER_SUBSCRIPTION_COMPLETED",n)},(r="symbol"==typeof(a=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r="_notifyNewsletterSubscription"))?a:a+"")in s?Object.defineProperty(s,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[r]=o,this._logger=n||console,this._braze=t,this._lpauth=e,this._navigator=i,this._subscribeToEventNewsletterSubscriptionCompleted()}async identifyFromEmail(t){let e=await this._getExistingAccount(t);e||(e=await this._createGhostAccount(t)),this._identifyBrazeProfile(e.id,t)}async _getExistingAccount(t){var e;let i=await this._lpauth.authService().findFromEmail(t);return null==i||null===(e=i.data)||void 0===e||null===(e=e.items)||void 0===e?void 0:e[0]}async _createGhostAccount(t){let e=await this._lpauth.authService().createGhostAccount(t);if(!e)throw new Error;return e}subscribeToGroupWithEmail(t,e){this._addToSubscriptionGroup(t),this._publishSubscriptionCompletedEvent(t.id,e)}_addToSubscriptionGroup(t){const e=this._braze.getUser().addToSubscriptionGroup(t.subscriptionGroupId);if(this._braze.requestImmediateDataFlush((()=>{})),!e)throw console.warn("Erreur lors de l'inscription  l'infolettre %o",t),new Error("Problem adding to subscription group."+(null==t?void 0:t.subscriptionGroupId))}_identifyBrazeProfile(t,e){this._braze.changeUser(t),this._braze.getUser().setEmail(e)}_subscribeToEventNewsletterSubscriptionCompleted(){window.addEventListener("newsletter.subscriptionCompleted",function(t){this._notifyNewsletterSubscription(t.detail.newsletterId,this._lpauth.isLoggedIn(),this._navigator.userAgent)}.bind(this),!1)}_publishSubscriptionCompletedEvent(t,e){window.dispatchEvent(new CustomEvent("newsletter.subscriptionCompleted",{detail:{userEmail:e,newsletterId:t}}))}}function Di(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Oi{constructor(t,e){Di(this,"evaluateReferrer",(()=>{var t=this._getApplicationReferrerFromLocation(this._domDocument.location);return t&&(this._sessionStorage.setItem("appReferrer",t),this._removeReferrerFromUrl(this._domDocument.location,t)),this._sessionStorage.getItem("appReferrer")&&(this._appReferrer=this._sessionStorage.getItem("appReferrer")),this._appReferrer})),Di(this,"_getApplicationReferrerFromLocation",(t=>{var e=t.search.match(/(?:&|\?)referrer=(?<ref>lpp)(?:&|$)/);return e?e.groups.ref:""})),Di(this,"_removeReferrerFromUrl",((t,e)=>{var i;if(""!==t.search){for(var n=t.search.substring(1).split("&"),s=n.length-1;s>=0;s-=1)"referrer"===(i=n[s].split("="))[0]&&i[1]===e&&n.splice(s,1);var r=n.length>0?"?"+n.join("&"):"";this._window.history.replaceState({},this._domDocument.title,t.pathname+r)}})),this._window=t,this._domDocument=t.document,this._sessionStorage=e,this._appReferrer=null}}var Pi=function(t,e,i,n){return new(i||(i=Promise))((function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}l((n=n.apply(t,e||[])).next())}))};function Ri(){return Pi(this,void 0,void 0,(function*(){return(yield function(){return Pi(this,void 0,void 0,(function*(){if(!window.navigator.userAgentData||!window.navigator.userAgentData.getHighEntropyValues)return null;try{return(yield window.navigator.userAgentData.getHighEntropyValues(["architecture"])).architecture}catch(t){return null}}))}())||function(){try{const t=document.createElement("canvas").getContext("webgl"),e=t.getExtension("WEBGL_debug_renderer_info"),i=e&&t.getParameter(e.UNMASKED_RENDERER_WEBGL)||"";return i.match(/Apple/)&&!i.match(/Apple GPU/)?"arm":null}catch(t){return null}}()||null}))}function Mi(t,e,i){var n;return(e="symbol"==typeof(n=function(t,e){if("object"!=typeof t||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?n:n+"")in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class Li{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Mi(this,"internalBraze",void 0),Mi(this,"automaticallyShowMessages",(()=>{this._logger.debug("LP-Braze: subscribe to in app message"),r(this._showInAppMessage)})),Mi(this,"_fillAllContentCardSpots",(()=>{this._logger.debug("LP-Braze: filling all contentCard spots"),this._contentCardSpots.forEach((t=>{let{location:e,filters:i,successCallback:n,errorCallback:s}=t;try{this._fillContentCardSpot(e,i),n&&n()}catch(t){this._logger.debug("LP-Braze: Problem trying to show content card - "+t.message),s&&s(t)}}))})),Mi(this,"registerContentCardSpot",(t=>{let{location:e,filters:i,successCallback:n,errorCallback:s}=t;if(this._logger.debug("LP-Braze: Registering contentCard spot: ",e),this._contentCardRepository.areContentCardsRefreshed)try{this._fillContentCardSpot(e,i),n&&n()}catch(t){this._logger.debug("LP-Braze: Problem trying to show content card - "+t.message,e),s&&s(t)}else this._contentCardSpots.push({location:e,filters:i,successCallback:n,errorCallback:s})})),Mi(this,"_fillContentCardSpot",((e,i)=>{let n=new Re;i.storyId&&n.setStoryId(i.storyId),i.storyFormat&&n.setStoryFormat(i.storyFormat),i.section&&(n.setSectionId(i.section.id),n.setRootSectionId(i.section.rootSectionId)),n.setLocation(e),new Ci(e,t,this._contentCardRepository,n,this._logger).show()})),Mi(this,"_showInAppMessage",(e=>{if(this._logger.debug("LP-Braze: show message"),"slide_up"===e.extras.CUSTOM_DISPLAY_TYPE){this._logger.debug("LP-Braze: custom slide up");var i=new Ni(t,this._domDocument,window.authBridge);this._displayedMessage=i,i.show(e)}else this._logger.debug("LP-Braze: standard message"),this._displayedMessage=e,Vt(e)})),Mi(this,"openSession",(()=>{ot()})),Mi(this,"handlePageView",(async t=>{let{contentCategory:e,contentType:i,isLoggedIn:n,userAgent:s,podcastId:r=null}=t;if(this._pageViewTriggered)return;const o=new URLSearchParams(window.location.search),a={contentCategory:e,contentType:i,isLoggedIn:n,podcastId:r,appReferrer:this._appReferrer,cpuArchitecture:await Ri(),userAgent:s,utmSource:o.get("utm_source"),utmMedium:o.get("utm_medium"),utmCampaign:o.get("utm_campaign"),utmContent:o.get("utm_content")};this._logger.debug("LP-Braze: send WEB_PAGE_VIEW event: %o",a),it.logCustomEvent("WEB_PAGE_VIEW",a),this._pageViewTriggered=!0})),this._logger=i||console,this._domDocument=e,this._pageViewTriggered=!1,this._appReferrer=new Oi(window,window.sessionStorage).evaluateReferrer(),this.internalBraze=t,this._contentCardRepository=new je(t,this._logger),this._contentCardSpots=[]}init(e,i,n,s,r,o){tt(n,{baseUrl:s,allowUserSuppliedJavascript:!0,minimumIntervalBetweenTriggerActionsInSeconds:0,enableLogging:r,sessionTimeoutInSeconds:o,requireExplicitInAppMessageDismissal:!0}),this._domDocument.addEventListener("visibilitychange",(()=>{ut.requestImmediateDataFlush((t=>{t||this._logger.warn("%c nuglif%c braze immediate data flush %o","color: #1EAEFD;background: #000; padding: 0 1em 0 0; border-radius:1em; font-size: 1em;","",t?"succeed":"failed")}))})),window.newsletterAdapter=new Ii(t,e,navigator),window.authBridge=new be(t,e),new Si(window,window.authBridge),this._initAnalytics(i),window.nuglif.ngApp.deviceInstanceId.get((function(t){window.ngBraze.updateDeviceInstanceId(t)})),this.automaticallyShowMessages(),this.openSession(),this._addConsentChangedListener(),this._contentCardRepository.refreshCards().finally(this._fillAllContentCardSpots)}_initAnalytics(t){t.state.setBrazeDeviceId(Z())}_addConsentChangedListener(){window.nuglif.consentHandler.onConsentChanged((t=>{Q.w().setCustomUserAttribute("consentement_sollicitation_mktg",t.productAndPhilanthropy)}))}updateDeviceInstanceId(t){this._logger.debug('LP-Braze: add device_instance_id alias of "'+t+'"'),Q.w().addAlias(t,"device_instance_id")}getFeatureFlag(t){const e=ce(t),i=pe(t);return this._logger.debug("logFeatureFlagImpression",i),e}printDeviceId(){console.log(Z())}printExternalId(){console.log(Q.w().getUserId())}}}(),(nuglif=void 0===nuglif?{}:nuglif).ngBraze=n}();
//# sourceMappingURL=ngBraze.242dbbcff34702800647.js.map
</script>

</body>
</html>
