<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>user.DxscuPka.html</title>
</head>
<body>

<script>
function g(e){return Object.getOwnPropertyNames(console).reduce((n,i)=>(typeof console[i]=="function"&&(n[i]=Function.prototype.bind.call(console[i],console,`[${e}]:`)),n),{})}const d={},c={},s=g("script-loader");function E(e,n={}){return typeof document>"u"?Promise.reject():(c[e]||(s.debug("need to load",e),c[e]=new Promise(i=>{s.debug("loading",e);const o=document.createElement("script");if(o.src=e,Object.keys(n).length>0)for(const[l,u]of Object.entries(n))o.setAttribute(l,u);o.onload=()=>{s.debug("loaded",e),i()},document==null||document.body.appendChild(o)})),c[e])}const S=()=>{};function P({src:e,onload:n=S}){if(typeof document>"u")return Promise.reject();if(d[e]==="done")return s.debug("already loaded. running onload",e),n();if(d[e])d[e].push(n);else{s.debug("need to load",e),d[e]=[n];const i=document.createElement("script");i.src=e,i.onload=()=>{s.debug(`finished loading. running ${d[e].length} onloads`,e),d[e].forEach(o=>o()),d[e]="done"},document==null||document.body.appendChild(i)}}const _="https://api.food.com",b="https://www.food.com",I="//forms.dds.discovery.com/1-1-1/",y="//accounts.dds.discovery.com/accounts-proxy-prod/v1",D="//buffet.identityservices.io/sso/api/1",A="https://api.digitalstudios.discovery.com/fdc-web/v1",U="AwUEJIX8j17uBcBz9OT9qlwj48SxeBX6oINoHTd0",v="A6x6UxJTDSEenRnl6jrIsz",L="https://img.sndimg.com/food/image/upload/v1/",O="production",N="https://assets.adobedtm.com/e090d2ba2d7e/fbb645d4812f/launch-ENe37f8b8d568443619b43fb72877cfc3d.min.js",k="https://api.food.com/external/v1/feed/home?pn=1&size=12",C="https://img.sndimg.com/food/image/upload/v1/gk-static/gk/img/recipe-default-images/",j="https://img.sndimg.com/food/image/upload/v1/gk-static/gk/img/avatar/",q="18ivl0rjdhi5lrcmvn369ue0g",R="55ec37d6-291e-4be5-86b3-55bf80eca493",r=g("dalton.js");function T(){return typeof window>"u"?(r.warn("loadDaltonScript(): window is undefined, quitting"),Promise.resolve()):(typeof globalThis.IDSP>"u"?(r.debug("loadDaltonScript(): loading IDSP js library"),P({src:I+"main.js"})):r.debug("loadDaltonScript(): IDSP already exists, not loading it again."),new Promise((e,n)=>{document.addEventListener("IDSP:is-ready",()=>(r.debug("IDSP:is-ready, event: ",event),globalThis.IDSP==="undefined"?n(new Error("IDSP is undefined")):e())),globalThis.__IDSP_isReady=()=>typeof globalThis.IDSP>"u"?n(new Error("IDSP is undefined")):e()}))}const t=g("user");function f(){}let m=!1,a=!1;async function p(){if(typeof window>"u"){t.warn("initUser(): window is undefined, so we aren't loading IDSP (Dalton)");return}if(a){t.debug("initUser(): initialized");return}if(m)return t.debug("initUser(): already initializing"),new Promise((e,n)=>{document.addEventListener("fdc:init-user-complete",()=>{e()})});if(m=!0,await T(),typeof globalThis.IDSP>"u"){t.warn("initUser(): globalThis.IDSP is undefined, exiting early, failed to setup IDSP (users may not be able to login or logout)");return}await globalThis.IDSP.init({autoLoadCss:!0,formsLoc:I,api:y,dalton:D,brand:"fdc"}),w(e=>{e?fetch(b+"/v2/login-verify",{method:"GET",headers:{Authorization:`Bearer ${e}`},credentials:"include"}).then(n=>{n.ok?(t.debug("initUser(): IDSP:logged-in event listener, /v2/login-verify request",{response:n}),document.dispatchEvent(new CustomEvent("fdc:login-verified",{token:e}))):t.warn("initUser(): IDSP:logged-in event listener, /v2/login-verify request: ruh roh, something went wrong when trying to request the login cookie, the user may not be able to access certain protected paths",{response:n})}):fetch(b+"/logout",{method:"GET",credentials:"include"}).then(n=>{n.ok?t.debug("initUser(): onUser(): /logout request: login cookie should have been deleted and logout successful",{response:n}):t.warn("initUser(): onUser(): /logout request: request failed, login cookie may not have been deleted!",{response:n})})}),a=!0,document.dispatchEvent(new CustomEvent("fdc:init-user-complete"))}function z(){if(globalThis.IDSP==="undefined"){t.warn("logout(): globalThis.IDSP is undefined, exiting early, failed to log out user");return}globalThis.IDSP.logoutUser()}async function x(e=f){(!a||typeof globalThis.IDSP>"u")&&(t.debug("optionalUser(): initialization has not happened yet, calling initUser()"),await p()),globalThis.IDSP.checkSessionLocal({cb:n=>{const{isLoggedIn:i,token:o}=n;e(o)}})}async function F(e=f){t.debug("requireUser(): requiring user"),typeof e!="function"&&(e=f),(!a||typeof globalThis.IDSP>"u")&&(t.debug("requireUser(): initialization has not happened yet, calling initUser()"),await p()),globalThis.IDSP.checkSessionLocal({cb:n=>{const{isLoggedIn:i,token:o}=n;!i||typeof o>"u"?globalThis.IDSP.showLogin({cb:function(l){let{isLoggedIn:u,token:h}=l;u&&typeof h<"u"?e(h):t.debug("requireUser(): IDSP.showLogin callback: login failed, not running callback: ",{result:l})}}):i&&typeof o<"u"&&e(o)}})}async function w(e){typeof window>"u"||typeof document>"u"||((!a||typeof globalThis.IDSP>"u")&&(t.debug("onUser(): not initializing, running initUser() now"),await p()),document.addEventListener("IDSP:logged-in",n=>{var i;return e((i=n==null?void 0:n.detail)==null?void 0:i.token)}),document.addEventListener("IDSP:logged-out",()=>e(void 0)),globalThis.IDSP.checkSessionLocal({cb:n=>{const{isLoggedIn:i,token:o}=n;i&&typeof o<"u"&&e(o)}}))}export{_ as A,b as C,L as F,g as L,q as M,R as O,C as R,A as S,N as a,O as b,j as c,k as d,v as e,P as f,x as g,U as h,p as i,z as l,w as o,E as p,F as r};

</script>

</body>
</html>
