<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>kustomer.min.html</title>
</head>
<body>

<script>
!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t=t=>"en"===t,e=t=>"zh_tw"===t,n=t=>e(t)||(t=>"zh_cn"===t)(t),r=t=>"nl"===t,a=t=>"de"===t,o=t=>"fr"===t,i=t=>"es_us"===t,s=t=>"es_eu"===t,c=t=>"it"===t,u=t=>"ja"===t,d=(t,e={})=>{localStorage&&"true"===localStorage.getItem("kustomerDebug")&&(e.error?console.error("Kustomer Chat: ",e.error):console.debug("Kustomer Chat: ",t,e))},l=(t,e)=>{t&&(t instanceof NodeList?t.forEach((t=>t.addEventListener("click",e))):t.addEventListener("click",e))},g=0,h=6,m=e=>t(e)||i(e),f=t=>o(t)||a(t)||s(t)||r(t)||c(t),p=1,w=2,S=10,v=11,y=12,b=(t,e)=>{const n=new Date(t).toLocaleString("en-US",{timeZone:e,dateStyle:"full",timeStyle:"full"});return n.indexOf("Daylight")>-1||n.indexOf("Summer")>-1};const D=()=>{try{if(!window.digitalData)return void d("Data Bridge Not Found for Kustomer Settings");if(localStorage&&"true"===localStorage.getItem("kustomerEnabledV2")&&(d("Local Storage Override Found, enabling"),digitalData.set("chatSettings.enabledV2",!0)),window.digitalData.get("flag.kustomer-chat-v2-enabled",!1)&&(d("Launch Darkly Override found, enabling"),digitalData.set("chatSettings.enabledV2",!0)),!digitalData.get("chatSettings.enabledV2",!1))return d("Kustomer Chat V2 Not Enabled"),void digitalData.set("chatSettings.isOnline",!1);d("Kustomer Chat Activated");const D=digitalData.get("chatSettings.country"),[C,k]=((t,e)=>{let n=t,r=t;return"zh"===t&&(n="cn"===e?"zh_cn":"zh_tw",r="cn"===e?"zh_cn":"zh_tw"),"es"===t&&(n="us"===e||"world"===e?"es_us":"es_eu"),[n,r]})(digitalData.get("chatSettings.language"),D);if((t=>{d("Inside emergencyShutoff",{data:window.utag?.data});const e=window.utag&&(window.utag?.data?.kustomer_emergency_shutoff||window.utag?.data?.kustomer_shutoff||window.digitalData.get("flag.kustomer-chat-emergency-shutoff",""));if(e&&(d("Emergency Shutoff Defined",{kustomerEmergencyShutoff:e}),e.split("|").indexOf(t)>-1))return!0;if(window.digitalData.get("flag.kustomer-chat-emergency-shutoff","")&&(d("Emergency Shutoff Defined",{kustomer_emergency_shutoff:window.digitalData.get("flag.kustomer-chat-emergency-shutoff")}),window.digitalData.get("flag.kustomer-chat-emergency-shutoff").split("|").indexOf(t)>-1))return!0;return!1})(C))return void digitalData.set("chatSettings.isOnline",!1);const{host:E,pathname:I}=window.location,L=E.split(".")[0],K=digitalData.get("page.brand"),O=["anf","kids"].indexOf(K)>-1?"Abercrombie & Fitch":"Hollister Co.",A=digitalData.get("page.pageName"),_=digitalData.get("page.pageKind"),T=A||_||"",q=function(t,e=""){if("home"===e)return"";const n=t.split("/");return 3===n.length?n[2]:n.length>3?n.slice(3).join("/"):t}(I,A),x="www"===L?digitalData.get("chatSettings.assistantId"):"",N=digitalData.get("chatSettings.apiKey"),U=digitalData.get("chatSettings.brandId"),z=digitalData.get("page.storeId"),H=digitalData.get("page.cookie.rxVisitor")||"",M=localStorage&&localStorage.getItem("kustomerDateOverride")?new Date(localStorage.getItem("kustomerDateOverride")):new Date,V=M.getUTCHours(),F=M.getUTCDate(),$=M.getUTCMonth()+1,j=M.getUTCDay(),B=(t=>{const e=`${t}=`,n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t+=1){let r=n[t];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return""})("geoLocation");let P,[R,W]=((e,d)=>{if(t(e))return[12,5];if(i(e))return[12,5];if(s(e))return[7,19];if(o(e))return[7,19];if(a(e))return[7,19];if(c(e))return[8,17];if(r(e))return[8,17];if(n(e))return[0,12];if(u(e))return[0,8];throw new Error("No configuration defined")})(C);[R,W]=function(t,e,n,r,i){return m(t)&&e===v&&28===n?[23,5]:(o(t)||a(t)||s(t))&&e===y&&24===n||(o(t)||a(t)||s(t))&&e===y&&31===n?[7,17]:[r,i]}(C,$,F,R,W),((t,e,n)=>m(e)?b(t,"America/New_York"):!!f(e)&&b(t,"Europe/Berlin"))(M,C)&&(0===R?R=23:R-=1,0===W?W=23:W-=1),P=(()=>{if(((a=j)===h||a===g)&&(e(C)||u(C)||c(C)||r(C)))return!1;var a;if((n(C)||u(C))&&$===w&&[10,11,12].indexOf(F)>-1)return!1;if((n(C)||u(C))&&$===S&&1===F)return!1;if(t(C)&&$===v&&[29,30].includes(F))return!0;if(t(C)&&$===y&&[1,2].includes(F))return!0;if((t(C)||i(C))&&$===y&&24===F){if(V>=0&&V<5)return R=0,W=5,!0;if(V>=5&&V<12)return R=12,W=22,!1;if(V>=12&&V<22)return R=12,W=22,!0;if(V>=22)return R=22,W=24,!1}if(f(C)&&$===y&&25===F)return!1;if(m(C)&&$===y&&(25===F||26===F&&V<5))return!1;if((t(C)||i(C))&&$===y&&31===F){if(V>=0&&V<5)return R=0,W=5,!0;if(V>=5&&V<12)return R=5,W=22,!1;if(V>=12&&V<22)return R=12,W=22,!0;if(V>=22)return R=22,W=24,!1}return m(C)&&$===p&&(1===F||2===F&&V<5)&&(R=15,W=23),(!(f(C)||u(C)||n(C))||$!==p||1!==F)&&(d("Hours of operation",{openingHour:R,closingHour:W,currentHour:V}),W>R?V>=R&&V<W:V>=R||V<W)})(),localStorage&&"true"===localStorage.getItem("kustomerForceOpen")&&(P=!0),P||(d("Kustomer Chat is closed"),document.querySelectorAll(".help-chat-button-container,.shopping-bag-chat-button").forEach((t=>t.remove())));const Y=(()=>{if(W>R){if(!(V>=R&&V<W+1))return!1}else if(!(V>=R||V<W+1))return!1;try{if(function(t){const e=sessionStorage.getItem("chatActive");if(!e)return!1;const n=new Date(e).getTime(),r=t.getTime()-n;return r<36e5&&r>=0}(M))return!0}catch(t){d("Kustomer Chat failed to run properly: isAlreadyChatting",t)}return!1})(),Z=(()=>{try{return"homepage"!==_&&("checkout"!==_&&!(window.location.href.indexOf("/FastEnroll")>-1))}catch(t){return!1}})(),G=document.querySelectorAll(".chat-icon-button"),J=document.querySelectorAll(".chat-icon-button-container"),Q=G.length<=0,X=()=>{const t=document.querySelectorAll(".userMessage, .customerMessage").length,e=document.querySelector(".kustomer-app-container");t>0&&e.classList.add("active-chat")},tt=()=>{if(document.querySelectorAll(".kustomer-app-thread div").length>0&&0===document.querySelectorAll(".kustomer-app-container.active-chat").length){const t={childList:!0,subtree:!0},e=new MutationObserver((function(t){t.forEach((t=>{"childList"===t?.type&&X()}))}));window.setTimeout((()=>{const n=document.querySelector(".kustomer-app-thread div");e.observe(n,t)}),100)}else d("not adding a mutation observer")},et=()=>{const t=new CustomEvent("kustomerChat:loaded");window.dispatchEvent(t),J.forEach((t=>t.classList.remove("has-unread-messages"))),Kustomer.getOpenConversations((t=>{d(`open conversations:${t.length}`),t.length>0?Kustomer.openConversationById({conversationId:t[0].conversationId}):(d(`creating chat with assistantId=${x}`),x?Kustomer.createConversation({assistantId:x}):Kustomer.createConversation())}));const e=new CustomEvent("analytics.kustomerChat");window.dispatchEvent(e),function(t){sessionStorage.setItem("chatActive",t)}(M),window.setTimeout((()=>{X()}),100),window.setTimeout((()=>{tt()}),100)};let nt=!1;const rt=t=>{if(d("inside loadKustomerChat",{openMe:t}),nt)d("No need to load library? typeof Kustomer=="+typeof Kustomer),t&&et();else{nt=!0,window.addEventListener("kustomerLoaded",(()=>{d("Calling Kustomer Start");const e={brandId:U,hideChatIcon:!Q,lang:k,assistantId:x,hideHistory:!0};x&&(e.assistantId=x),d("kustomerOptions",{kustomerOptions:e}),Kustomer.start(e,(()=>{d("Callback for Kustomer.start"),Kustomer.addListener("onUnread",(t=>{let e;d("Inside onUnread Listener",{response:t});try{e=t?.change?.count}catch(t){e=0}var n,r;d("Kustomer says unread msgs count",{count:e}),e>0&&(r="has-unread-messages",(n=J)instanceof NodeList?n.forEach((t=>t.classList.add(r))):n.classList.add(r),document.dispatchEvent(new CustomEvent("setPoliteText",{detail:digitalData.get("chatSettings.newMessageText","")}))),0===e&&J.forEach((t=>t.classList.remove("has-unread-messages")));const a=new CustomEvent("kustomerChat:loaded");window.dispatchEvent(a),X(),tt()})),Kustomer.addListener("onConversationCreate",((t,e)=>{e&&d("Error in onConversationCreate handler",{error:e});const n={conversationId:t.conversationId,customAttributes:{chatLocationStr:B,pageNameStr:q,pageTypeStr:T,pdpDeptIdStr:digitalData.get("chatSettings.pdpDepartmentId",""),brandStr:O,regionStr:D,webstoreIdStr:`${z}`,sessionIdStr:H,brandCollectionStr:K,hashedUserIdStr:digitalData.get("user.hashedEmail","")}};d("Conversation Options",{conversationOptions:n}),Kustomer.describeConversation(n)})),t&&et()})),d("After Kustomer Start")})),d("creating Kustomer script element");const e=document.createElement("script");e.src="https://cdn.kustomerapp.com/chat-web/widget.js",e.setAttribute("data-kustomer-api-key",N),window.document.body.appendChild(e)}},at=()=>{rt(!0)};digitalData.subscribe("event:chat.openChatWindow",at),l(document.querySelector("#kustomer-root .kustomer-app-header-close-button"),(()=>{var t,e;e="has-unread-messages",(t=J)instanceof NodeList?t.forEach((t=>t.classList.remove(e))):t.classList.remove(e)})),l(document.querySelector("#kustomer-root .kustomer-app-new-conversation-button"),(()=>{document.querySelector(".kustomer-app-container").classList.remove("active-chat")})),l(G,(()=>{d("inside bound click for chat bubble"),at()})),P&&Z||Y?(digitalData.set("chatSettings.isOnline",!0),X(),tt(),Y&&rt(),J.forEach((t=>t.classList.add("show-icon")))):(J.forEach((t=>t.classList.remove("show-icon"))),digitalData.set("chatSettings.isOnline",!1),d("Kustomer Chat not installed on this page",{isChatOpen:P,isChatAllowed:Z,isAlreadyChatting:Y}))}catch(t){d("Kustomer Chat failed to run properly",{error:t})}};document.addEventListener("DOMContentLoaded",(()=>{D()}),!1)}));

</script>

</body>
</html>
