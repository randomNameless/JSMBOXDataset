<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>searchFormBugFix100.html</title>
</head>
<body>

<script>
if(FormularController){FormularController.prototype=jQuery.extend(new BaseController,{createObject:function(){var that=this;this.inputs=this.getCtrlRelatedObjects(FormularController.NODE_TYPE_INPUT,this.rootNode);this.triggers=this.getCtrlRelatedObjects(FormularController.NODE_TYPE_TRIGGER,this.rootNode);this.datepicker=this.getCtrlRelatedObjects(FormularController.NODE_TYPE_DATEPICKER,this.rootNode);this.captcha=this.getCtrlRelatedObjects(FormularController.NODE_TYPE_CAPTCHA,this.rootNode);if(this.captcha.length>0&&this.rootConfig.captcha&&this.rootConfig.captcha.url!==""){if(!this.rootConfig.captcha.initLoad){var _captcha=that.captcha[0].node;app.jq(this.rootNode).on("submit",function(e){e.preventDefault();e.stopPropagation();return false});app.jq(this.rootNode).on("focus, click","input:not(.quizresult), select, textarea",function(){that.initCaptcha(_captcha,function(){app.jq(that.rootNode).off("focus, click","input:not(.quizresult), select, textarea");app.jq(that.rootNode).off("submit");app.jq(that.rootNode).on("submit",that.preventPlayerButtonSubmit)})})}else{this.initCaptcha(this.captcha[0].node)}}else{app.jq(this.rootNode).on("submit",this.preventPlayerButtonSubmit)}for(var i in this.inputs)this.initInput(this.inputs[i]);for(var i in this.datepicker)this.initDatepicker(this.datepicker[i]);this.bindEventToObjects(this.triggers,"click",function(obj,index){return that.handleTriggerAction(obj,index)});this.bindEventToObjects(this.inputs,"focus",function(obj,index){return that.handleInputFocusAction(obj,index)});this.bindEventToObjects(this.inputs,"blur",function(obj,index){return that.handleInputBlurAction(obj,index)})},handleViewUpdatedEvent:function(view){},handleViewDiedEvent:function(view){},handleTriggerAction:function(trigger,index){var that=this;var action=this.getActiveAction(trigger.config.action,this.app.currentView);for(var i in action){switch(action[i]){case"submit":this.rootConfig.ajaxSubmit?function(){var submitButton=app.jq(that.rootNode).find('input[type="submit"]'),formCont=app.jq(that.rootNode).parent();submitButton.click(function(e){e.preventDefault();return false});app.jq.post(app.jq(that.rootNode).attr("action").split("#")[0],app.jq(that.rootNode).serialize()+"&"+submitButton.attr("name")+"="+submitButton.val()).done(function(data){formCont.html(app.jq(data).find("form"));if(formCont.find("#commentAnswerFormSuccess").length===0){app.registerController(FormularController,formCont.find("form")[0])}else{formCont.closest("li.box").find(".answerComment").remove()}}).fail(function(){app.jq(that.rootNode).html('<p class="error">Fehler aufgetreten.</p>')})}():function(){var tmpNode=app.jq(that.rootNode).find("input.searchInput");if(tmpNode&&(tmpNode.is("#header .mnHolder .searchBox input.searchInput")||tmpNode.is("#header .mnHolder .searchCont input.searchInput"))&&tmpNode.val()===""){return false}else{that.rootNode.submit()}}();break}}return false},handleInputFocusAction:function(input,index){var action=this.getActiveAction(input.config.action,this.app.currentView);for(var i in action){switch(action[i]){case"switchValue":this.switchInputValue(input,true);break}}return false},handleInputBlurAction:function(input,index){var action=this.getActiveAction(input.config.action,this.app.currentView);for(var i in action){switch(action[i]){case"switchValue":this.switchInputValue(input,false);break}}return false},switchInputValue:function(input,onFocus){if(onFocus){if(input.node.val()===input["defaultValue"]){input.node.val("");this.makeActive(input.node)}}else{if(objectUtil.stringTrim(input.node.val())===""){input.node.val(input["defaultValue"]);this.makeInactive(input.node)}}},initInput:function(input){input["defaultValue"]=input.node.val()},initDatepicker:function(picker){var options={showOn:"button",buttonText:"WÃ¤hle Datum",dateFormat:"dd.mm.yy"};if(!app.jq("body").hasClass("wdr")){options.buttonImage=picker.config.calendarUrl!=""?picker.config.calendarUrl:"/resources/img/external/jquery-ui/datepicker/calendar.gif";options.buttonImageOnly=true}picker.node.datepicker(options)},initCaptcha:function(captchaNode,callback){var that=this;app.jq(captchaNode).append("<p><strong>Bitte warten...</strong><br/>Sicherheitsfrage wird geladen</p>");app.jq.get(this.rootConfig.captcha.url+"?"+this.guid(),function(res){var _res=app.jq("<div></div>");_res.html(res);if(_res.find("p.text.error").length===0){app.jq(captchaNode).html(res);if(callback!==undefined){callback()}}else{app.jq(that.rootNode).closest(".modForm").prepend(_res.find("p.text.error"));app.jq(that.rootNode).find('input[type="submit"]').replaceWith(_res.find('[type="submit"]'));if(callback!==undefined){callback()}app.jq(that.rootNode).find('input[type="submit"]').click(function(e){e.preventDefault();window.location.reload(true)});app.jq(captchaNode).remove()}})},guid:function(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},preventPlayerButtonSubmit:function(e){if(app.jq(e.originalEvent.submitter).closest("#playerCont").length>0){e.preventDefault();e.stopPropagation();return false}else{return true}}})}







	


</script>

</body>
</html>
