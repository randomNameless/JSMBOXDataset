<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main.d4cdb8f48.html</title>
</head>
<body>

<script>
angular.module("gmgApp",["ngAnimate","ngCookies","gmg.shared","ngResource","rzModule","ngSanitize","ngFileUpload","infinite-scroll","ngRoute","duScroll","ui.bootstrap","angular-bind-html-compile"]).constant("OPTIN","optin").constant("BANNERSTATE",{COLLAPSED:0,EXPANDED:1}).constant("ORDER_STATUS_URL","/order").constant("ACCOUNT_ACTIVATED","account-activated").constant("MAX_RETRY",40).constant("DEFAULT_DELAY",1500).constant("HTTP_ACCEPTED",202).constant("ENTER_KEY_CODE",13).constant("USER_COOKIE_NAME",".fUserStore").constant("USERNAME_REGEX","^[a-zA-Z0-9_]{3,15}$").constant("USERNAME_START_REGEX","^[^_]").constant("NOT_USERNAME_REGEX",/[^a-zA-Z0-9_]/g).constant("XSRF_TOKEN","XSRF-TOKEN").constant("XSRF_FIELD_NAME","X-XSRF-TOKEN").constant("MINIMUM_USER_AGE",16).constant("SOFT_OPT_IN_COOKIE","SoftOptInCookie").constant("paymentMethodConstants",{HOSTED:"AdyenHosted",NON_HOSTED:"AdyenNonHosted",RECURRING_CONTRACT:"AdyenRecurringContract",PAYPAL_BILLING_AGREEMENT:"PaypalBillingAgreement",PAYPAL:"Paypal",BOACOMPRA:"BoaCompra",BOACOMPRA_EUR:"BoaCompraEuro",CREDIT:"Credit",ALIPAY:"alipay",KCP_PAYCO:"kcp_payco",KCP_BANKTRANSFER:"kcp_banktransfer",KCP_CREDITCARD:"kcp_creditcard",UNIONPAY:"unionpay",WECHATPAY:"wechatpay",GOOGLE_PAY:"GooglePay",APPLE_PAY:"ApplePay",PHONE:"Phone",BILLING_ADDRESS_EXEMPTED_METHOD:["Paypal"]}).constant("EXCLUDE_BILLING_ADDRESS_FROM_PAYMENT_METHODS",{PAYPAL:"Paypal"}).constant("DESTROY_EVENT_NAME","$destroy").constant("AVATAR_UPLOADER_BUSY_STATUS_CHANGED","AvatarUploaderBusyStatusChanged").constant("BIO_SECTION_UPLOADER_BUSY_STATUS_CHANGED","BioSectionBusyStatusChanged").constant("AVATAR_UPLOAD_RESPONSIBILITY_OWNER_CHANGED","AvatarUploadResponsibilityOwnerChanged").constant("AVATAR_UPDATED","AvatarUpdated").constant("IS_CURRENT_USERS_PROFILE","IsCurrentUsersProfile").constant("USER_PROFILE_SET_EVENT","UserProfileSetEvent").constant("AVATAR_ERROR_UPDATED","AvatarErrorUpdated").constant("AVATAR_ERROR_CLEARED","AvatarErrorCleared").constant("ERROR_INTERCEPTED","ErrorIntercepted").constant("ACTIVITY_UPDATED","activityUpdated").constant("ACTIVITY_ERROR_UPDATED","activityErrorUpdated").constant("IS_PROFILE_PUBLIC","isProfilePublic").constant("STEAM_USER_ID_UPDATED","steamUserIdUpdated").constant("PAYPAL_BUTTON_SHOWING_UPDATED","paypalButtonShowingUpdated").constant("IS_FORUM_MODERATOR_UPDATED","isForumModeratorUpdated").constant("BAN_TIME",Math.floor(378680832)).constant("UPDATE_BIO_TEXT","updateBioText").constant("VOUCHER_ERROR_CONTAINER_SELECTOR","#voucher-error-message-container").constant("SECRET_VOUCHER_CLAIM_SOURCE",{PDP:"Pdp",SECRET_VOUCHER_OFFER_BLOCK:"SecretVoucherOfferBlock",BASKET:"Basket"}).constant("UPLAY_CONSTANTS",{UPLAY_AVATAR_BASE_URL:"https://ubisoft-avatars.akamaized.net/",UPLAY_BROADCAST_TICKET_TEXT:"uplayBroadCastTicket",UPLAY_BROADCAST_PROFILE_TEXT:"uplayBroadCastProfile",UPLAY_BROADCAST_LOG_OUT:"uplayBroadCastLogout",UPLAY_WINDOW_NAME:"Ubisoft Connect",UPLAY_WINDOW_WIDTH:400,UPLAY_WINDOW_HEIGHT:650,UPLAY_AVATAR_QUERY:"/default_146_146.png?appId=",UPLAY_GET_TICKET_FAILED_STATUS:"error",UPLAY_OPEN_MODAL:"uplayOpenModal",UPLAY_MODAL_SELECTOR:"#uplay-modal",UPLAY_MODAL_ORIGIN_QUERY_STRING_PARAMETER:"modalOrigin",AUTO_TRIGGER_UPLAY_POPUP_ON_PAGE_LOAD:"triggerredemption",GIFT_CODE_QUERY_STRING_PARAMETER:"giftCode",UPLAY_MODAL_TOGGLE:"toggle",UPLAY_MODAL_ORIGIN:{YOUR_PURCHASE_PAGE:1,YOUR_ORDER_PAGE:2,YOUR_ORDER_MOBILE_PAGE:3,PRIZE_WHEEL_PAGE:4},KEY_NAME:"keyname",UPLAY_BROADCAST_REFRESH_URL:"broadcastRefreshUrl",RELOAD_YOUR_PURCHASE_LIST:"reloadYourPurchaseList",UPLAY_REFRESH_PARAMETER:"uplayRefresh",CLEAR_PRE_PURCHASED_GAME_REDEMPTION_ERROR:"clearPrePurchasedGameRedemptionError",PRE_PURCHASED_GAME_REDEMPTION_ERROR:"prePurchasedGameRedemptionError",WINDOW_TIMEOUT:6e5,POLL_INTERVAL:500}).constant("BLIZZARD_CONSTANTS",{BLIZZARD_MODAL_SELECTOR:"#blizzard-modal",BLIZZARD_OPEN_MODAL:"blizzardOpenModal:",BLIZZARD_MODAL_ORIGIN:{YOUR_PURCHASE_PAGE:1,YOUR_ORDER_PAGE:2,YOUR_ORDER_MOBILE_PAGE:3,PRIZE_WHEEL_PAGE:4},AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD:"triggerblizzardredemption",BLIZZARD_MODAL_TOGGLE:"toggle",BLIZZARD_MODAL_ORIGIN_QUERY_STRING_PARAMETER:"modalOrigin",BLIZZARD_BROADCAST_SWITCH_USER:"blizzardBroadcastSwitchUser",BLIZZARD_BROADCAST_KEY_ACTIVATED:"blizzardBroadcastKeyActivated",BLIZZARD_BROADCAST_AUTHENTICATION_ERROR:"blizzardBroadcastAuthenticationErrorMessage",BLIZZARD_BROADCAST_REAUTHORIZE:"blizzardBroadcastReauthorize"}).constant("ZTORM_CONSTANTS",{ACCOUNT_LINK:{MODAL_ID:"#ztorm-account-link-modal",RETRY_MODAL_ID:"#ztorm-account-link-retry-modal",IFRAME_ID:"#ztorm-account-link-iframe",MODAL_OPEN:"ZtormAccountLinkModalOpenEvent",MODAL_CLOSED:"ZtormAccountLinkModalClosedEvent",RESULT_USER_CANCELLED:"ZtormAccountLinkUserCancelled",RESULT_SUCCESS:"ZtormAccountLinkSuccess"}}).constant("HIDDEN_KEY_CONSTANTS",{MODAL_SELECTOR:"#hidden-key-modal",MODAL_TOGGLE:"toggle",BROADCAST_OPEN_HIDDEN_KEY_MODAL:"broadcastOpenHiddenKeyModal",BROADCAST_HIDDEN_KEY_ACTIVATED:"broadcastHiddenKeyActivated",AUTO_TRIGGER_HIDDEN_KEY_MODAL_ON_PAGE_LOAD:"triggerHiddenKeyModalOnLoad"}).constant("PURCHASE_HISTORY_CONSTANTS",{PURCHASE_HISTORY_PAGE_BOX_ID_POSTFIX:"-additional-keys",ITEMS_COUNT:"items",BOX_ID_QUERY_STRING_PARAMETER:"boxId"}).constant("FUNCTION","Function").constant("PIXEL_UNIT_TEXT","px").constant("EVENTS",{RESIZE:"resize",REMOTE_BLOCK_LOADED:"remoteBlockLoaded",ERROR_LOADING_REMOTE_BLOCK:"errorLoadingRemoteBlock",OPEN_CANCEL_PENDING_ORDER:"openCancelPendingOrder",CLOSE_CANCEL_PENDING_ORDER:"closeCancelPendingOrder",SCROLL_TO_LOAD_REMOTE_BLOCK:"scrollToLoadRemoteBlock",COMMUNITY_LOAD_FAILED:"CommunityLoadFailed",COMMUNITY_LOAD_YET:"IsCommunityLoadedYet",CLICK_WITH_SPINNER_GROUP_STATUS:"clickWithSpinnerGroupStatus",RELOAD_BASKET:"ReloadBasket"}).constant("QUERY",{START_CHARACTER:"?",ASSIGN_CHARACTER:"=",ASSIGN_BOACOMPRA_CHARACTER:":=",DELIMITER:"&",RETURN_URL_PLACEHOLDER:"{{returnUrl}}",NAMES:{RETURN_URL:"returnUrl"}}).constant("PLAYER",{PLAY:"play",PAUSE:"pause",TEXT_TRACK_PLUGIN:"textTrackPlugin"}).constant("JQUERY",{VISIBLE:":visible"}).constant("PAYMENT_BUTTON_SECTION",{MAIN:"main",HEADER:"header"}).constant("PAYMENT_BUTTON_RESOURCE",{GOOGLE_PAY_BUTTON_MAIN_PLACE_HOLDER_ID:"google_pay_button_place_holder",GOOGLE_PAY_BUTTON_HEADER_PLACE_HOLDER_ID:"google_pay_button_header_place_holder",GOOGLE_PAY_BUTTON_HEADER_ID:"google_pay_button_header",GOOGLE_PAY_BUTTON_ID:"google_pay_button",CUSTOM_BUTTON_LOAD_DELAY:20}).constant("OWN_HOSTED_VIDEOS",{CLASS_NAMES:{COLLAPSIBLE:"collapsible",COLLAPSED:"collapsed"},SELECTORS:{OVERLAY_TEXT_ID:"overlay-text",COLLAPSIBLE:".collapsible",VIDEO_ASIDE:".video-aside",VIDEO_ELEMENT_ID:"hosted-video-element",OVERLAY_BUTTON_CONTAINER:".overlay-btn-container"}}).constant("GAME_GIFTING",{GAME_GIFT_PATTERN:new RegExp("^[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}$"),SELECTORS:{GAME_DETAILS_MODAL:"#game-details-container",KEY_DISPLAY_MODAL:"#key-display-container",CODE_INPUT:".code-input"},CONSTANTS:{WARNING_PLACEHOLDER:"WARNING: ",GENERIC_PLACEHOLDER:"{0}",SHOW:"show",HIDE:"hide",TRUE:"true",KEYPRESS:"keypress",MESSAGE_SEPARATOR:" | "},THIRD_PARTY:{POPUP_DIMENSION:{height:.6,width:.5},REDEMPTION_URL_QUERY:"?isThirdPartyRedemption=true",LOGIN_SUCCESS:"third_party_login_success",REGISTER_SUCCESS:"third_party_register_success",REDEMPTION_CANCELLED:"redemption_cancelled",LOGOUT:"third_party_logout",IS_THIRD_PARTY_REDEMPTION:"isThirdPartyRedemption",URL:"/third-party-redemption-page"},AUTO_INJECTION_ERROR_PAGE:"Error",AUTO_INJECTION_PAGE:"AutoInject"}).constant("MONTHS",{0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"}).constant("GIFT_CARD_CODE","GiftCardCode").constant("GAME_LIBRARY_SORT_ORDER",{0:"LibrarySortOrder.PLAYTIME",1:"LibrarySortOrder.NAME",2:"LibrarySortOrder.LASTPLAYED"}).constant("GAME_LIBRARY_ORDER_TO_INT",{PLAYTIME:0,NAME:1,LASTPLAYED:2}).constant("SCORE",{1:"Bad",2:"Poor",3:"Average",4:"Great",5:"Excellent"}).constant("REVIEW_VOTE",{UP_VOTE:0,DOWN_VOTE:1}).constant("GAME_LIBRARY_CONSTANTS",{NOT_TRACKED:"Not tracked",NOT_AVAILABLE:"N/A"}).constant("ACHIEVEMENT","Achievement").constant("ACTIVITY_ERROR_UPDATED","activityErrorUpdated").constant("PLAYED_ICON","../static/img/Played.png").constant("TIME_ICON","../static/img/Time.png").constant("PLAY_FIRST_TIME","Play_first_time").constant("PLAY_TIME","Play_time").constant("GIFTCARD_REDEEMED","GiftCardRedeemed").constant("DATE_OF_BIRTH_FORM_CLOSED","DateOfBirthFormClosed").constant("UPDATE_EMAIL_FORM_CLOSED","UpdateEmailFormClosed").constant("BILLING_ADDRESS_FORM_CLOSED","BillingAddressFormClosed").constant("UPDATE_PASSWORD_FORM_CLOSED","UpdatePasswordFormClosed").constant("ALL_FORM_CLOSED","AllFormClosed").constant("DISPLAY_COMMUNITY_TAB","DisplayCommunityTab").constant("COMMUNITY_SEGMENT_ADDED_TO_URL","CommunitySegmentAddedToUrl").constant("GMG_LOCALE_COOKIE","gmg_locale").constant("PRIVATE_MESSAGE_PAGE_CLASS",{list:"inbox-all-messages",empty:"inbox-all-messages",reply:"inbox-reply-messages",send:"send-new-messages"}).constant("MIN_MUUT_SEARCH_LENGTH",3).constant("MAX_MUUT_BODY_LENGTH",1018).constant("PRIVATE_MESSAGE_NOT_LOGGED_IN_KEY","PrivateMessageNotLoggedIn").constant("UNAVAILABLE_EMAIL","unavailableEmail").constant("INVALID_PASSWORD_LENGTH","invalidPasswordLength").constant("INVALID_USERNAME_PATTERN","invalidUsernamePattern").constant("UNAVAILABLE_USERNAME","unavailableUsername").constant("MIN_LENGTH","minlength").constant("MAX_LENGTH","maxlength").constant("INVALID_FORM","Please fix the errors highlighted").constant("SCREEN_SM",768).constant("LANGUAGE_SEGMENT_POSITION",0).constant("LOYALTY_SWITCH","loyalty_programme").constant("BOA_COMPRA_RETURN_QUERY_STRING","BoaCompraReturnStatus").constant("ADYEN_RETURN_QUERY_STATUS_STRING","adyenReturnStatus").constant("ADYEN_SUCCESS_QUERY_STATUS_STRING_VALUE","adyenAuthorized").constant("ADYEN_PENDING_QUERY_STATUS_STRING_VALUE","adyenPending").constant("CANCELING_PENDING_ORDER_SUCCESS","CANCELING_PENDING_ORDER_SUCCESS").constant("CANCELING_PENDING_ORDER_FAIL","CANCELING_PENDING_ORDER_FAIL").constant("TOKEN_INVALID_FLAG","TokenInvalid").constant("TOKEN_EXPIRED_FLAG","TokenExpired").constant("CUSTOM_MESSAGES_KEYS",{VOUCHER_REQUIRES_SIGN_IN:"iVoucherRequiresSignIn"}).constant("MODALS",{DISPLAY:{SHOW:"show",HIDE:"hide",TOGGLE:"toggle"},ELEMENTS:{CANCEL_PENDING_ORDER:"#cancelPendingOrderModal",AGE_VERIFICATION_MODAL:"#birth-date-modal",TOO_YOUNG_MODAL:"#underage-user-modal",SOCIAL_MODAL:"#social-modal"},EVENTS:{OPEN_AGE_VERIFICATION:"OPEN_AGE_VERIFICATION",OPEN_TOO_YOUNG:"OPEN_TOO_YOUNG",OPEN_CANCEL_PENDING_ORDER:"OPEN_CANCEL_PENDING_ORDER",AGE_VERIFIED:"AGE_VERIFIED",CLOSE_CANCEL_PENDING_ORDER:"CLOSE_CANCEL_PENDING_ORDER",OPEN_SIGN_IN_MODAL:"OPEN_SIGN_IN_MODAL",OPEN_SIGN_UP_MODAL:"OPEN_SIGN_UP_MODAL",OPEN_EMAIL_VERIFICATION_MODAL:"OPEN_EMAIL_VERIFICATION_MODAL",CLOSE_SIGN_UP_MODAL:"CLOSE_SIGN_UP_MODAL",OPEN_SOCIAL_MODAL:"OPEN_SOCIAL_MODAL",OPEN_ALGOLIA_SEARCH_MODAL:"OPEN_ALGOLIA_SEARCH_MODAL",CLOSE_ALGOLIA_SEARCH_MODAL:"CLOSE_ALGOLIA_SEARCH_MODAL"},TOO_YOUNG_MODAL_TYPE:{ACCOUNT:"ACCOUNT",PDP:"PDP",REGISTRATION:"REGISTRATION",BASKET:"BASKET"}}).constant("PROFILE_PUBLIC_UPDATED","profilePublicUpdated").constant("GREEN_GUARD_MODAL_URL","//images.greenmangaming.com/static/templates/modals/green-guard-modal.817c85b2a.html").constant("PDP_SCROLL_PERCENTAGE_OF_PAGE",{MIN:.4,MAX:.8,INCREASE:.05}).constant("PRODUCT_CHANGED","PRODUCT_CHANGED").constant("PRODUCT_DISCUSSION_LOAD_REQUIRED","PRODUCT_DISCUSSION_LOAD_REQUIRED").constant("TIME_RECEIVED","TIME_RECEIVED").constant("STATS_MAX_COST_PER_HOUR",{GBP:10,EUR:12,EUR2:12,USD:12,USD2:12,RUB:750,INR:880,CZK:290,KWD:4,ARS:260,BRL:45,CLP:8350,CNY:90,COP:39300,MXN:255,MYR:55,PEN:45,PHP:700,KRW:14750,TRY:55,CAD:17.5,JPY:1450}).constant("ASSOCIATED_PRODUCT_LIMIT",{MIN:2,MAX:8}).constant("DEFAULT_AVATAR_URL","/static/img/defaultAvatar.jpg").constant("REVIEW_SCORE_DIVIDER",10).constant("REVIEWS_IN_FIVE",2).constant("DAYS_IN_WEEK",7).constant("PDP_SECTION_ON_LOAD_EVENT",{TWITCH:"twitchLoaded",STATS:"statsLoaded",REVIEWS:"reviewsLoaded",RELOAD_ALL_SECTIONS:"reloadAllSections"}).constant("REVIEWS_LOADED","REVIEWS_LOADED").constant("RELOAD_REQUIREMENT","RELOAD_REQUIREMENT").constant("GAME_STATS_METHOD","Gameplay.GameplaySummary").constant("STATS_HISTORY_LOADED","STATS_HISTORY_LOADED").constant("KEYS_EXPAND_ANIMATION_TIME",300).constant("PDP_EVENTS",{IS_LOGGED_IN:"IsLoggedIn",LOGGED_OUT_USER_WISH_LIST_ERROR_MESSAGE:"loggedOutUserWishListErrorMessage",CURRENCY:"pdpCurrency"}).constant("GOOGLE_PAY_CONSTANTS",{ALLOWED_AUTH_METHODS:["PAN_ONLY","CRYPTOGRAM_3DS"],BASE_CARD_PAYMENT_METHOD_TYPE:"CARD",TOKENIZATION_SPECIFICATION_TYPE:"PAYMENT_GATEWAY",GATEWAY:"adyen",BUTTON_COLOR:"white",EVENTS:{INITIALIZATION_COMPLETED:"GooglePayInitializationComplete",INITIALIZATION_TRIGGERED:"GooglePayInitializationTriggered"}}).constant("BOA_COMPRA_EVENTS",{REQUEST_FORM_SUBMISSION:"requestBoaCompraFormSubmission"}).constant("PAYMENT_METHOD_EVENTS",{RESET_SELECTED_PAYMENT_METHOD:"ResetSelectedPaymentMethod",PAYMENT_METHODS_LOADING_STATUS_CHANGED:"PaymentMethodsLoadingStatusChanged",SELECTED_PAYMENT_METHOD_GROUP_CHANGED:"SelectedPaymentMethodGroupChanged",SELECTED_PAYMENT_METHOD_DETAILS_CHANGED:"SelectedPaymentMethodDetailsChanged",SELECTED_PAYMENT_METHOD_TYPE_CHANGED:"SelectedPaymentMethodTypeChanged",SELECTED_PAYMENT_METHOD_CHANGED:"SelectedPaymentMethodChanged",LOADING_COMPLETE:"LoadingComplete",BASKET_RELOAD_COMPLETE:"BasketReloadComplete",DESELECT_RECURRING_PAYMENT_RADIO_BUTTON:"deselectRecurringPaymentRadioButton",DESELECTED_TARGET_RECURRING_PAYMENT_RADIO_BUTTON:"deselectedTargetRecurringPaymentRadioButton",SELECT_RECURRING_PAYMENT_RADIO_BUTTON:"selectRecurringPaymentRadioButton",IS_SUBMISSION_READY_FUNC:"IsSubmissionReadyFunc",REQUEST_IS_SUBMISSION_READY_FUNC:"RequestIsSubmissionReadyFunc",PAYMENT_METHOD_ACCORDION_CHANGED:"PaymentMethodAccordionChanged",BILLING_ADDRESS_PROMISE:"BillingAddressPromise",ADYEN_CHECKOUT_OBJECT_READY:"AdyenCheckoutObjectReady",ADYEN_SCRIPT_AND_CSS_LOADED:"AdyenScriptAndCssLoaded",ADYEN_CHECKOUT_COMPONENT_ADDED:"AdyenCheckoutComponentAdded",ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE:"AdyenCheckoutComponentSavedCardsAvailable"}).constant("PAYMENT_EVENTS",{UPDATED_DISABLE_PLACE_ORDER_BUTTON:"UpdateDisablePlaceOrderButton",HIDE_PAYPAL_BUTTON:"HidePaypalButton",CONSTRUCT_ORDER_PAYMENT_DATA:"ConstructOrderPaymentData",RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA:"ReturnConstructedOrderPaymentData",PENDING_ORDER_EXISTS:"PendingOrderExists",PLACE_ORDER_IN_PROGRESS:"PlaceOrderInProgress",PLACE_ORDER_PROCESS_FAILED:"PlaceOrderProcessFailed",PAYMENT_TRANSACTION_INFO_READY:"PaymentTransactionInfoReady",PAYPAL_LOADED:"PaypalLoaded",PAYPAL_SELECTED:"PaypalSelected",TRIGGER_COMPONENT_SUBMIT:"TriggerComponentSubmit"}).constant("BILLING_ADDRESS_EVENTS",{COUNTRY_CHANGED:"CountryChanged",ADDRESS_UPDATED:"BillingAddressUpdated",ADDRESS_LOAD_COMPLETED:"AddressLoadCompleted",UPDATE_EDITED_ADDRESS:"UpdateEditedAddress"}).constant("VALIDATION_MODEL_HANDLER_EVENTS",{BROADCAST_VALIDATION_MODEL:"BroadcastValidationModel",CLEAR_VALIDATION_MODEL:"ClearValidationModel",BROADCAST_VALIDATION_ERROR:"BroadcastValidationError"}).constant("APPLE_PAY_CONSTANTS",{GATEWAY:"adyen",SUPPORTS_3DS:"supports3DS",LABEL:"Green Man Gaming",EVENTS:{APPLE_PAY_CANCEL:"ApplePayCancel",APPLE_PAY_SUPPORTED:"ApplePaySupported"}}).constant("AMAZON_PAY_CONSTANTS",{GATEWAY:"adyen",EVENTS:{APPLE_PAY_AUTHORIZE:"ApplePayAuthorize"}}).constant("YOUR_CART_CONSTANTS",{ORDER_PAGE:"/your-cart---order",BILLING_PAGE:"/your-cart---billing-details",CONFIRMATION_PAGE:"/your-cart---confirmation"}).constant("PAGE_NAMES_CONSTANTS",{CHECKOUT_PAGE:"CheckoutPage",ACCOUNT_SETTINGS:"AccountSettings"}).constant("URL_PARAMETER_CONSTANTS",{RETURN_URL:"returnUrl",RE_LOGIN_IN:"reLoginIn",CART_EXPIRED:"cartExpired",PAYMENT_FAILED:"paymentfailed",PAYMENT_CANCELLED:"paymentCancelled",PAYMENT_ERROR_MESSAGES:"paymentErrorMessages",OPEN_SIGN_IN_MODAL:"openModalSigninWithError",OPEN_SIGN_UP_MODAL:"openModalSignupWithError",VERIFY:"verify",NUMBER:"number",DIAL_CODE:"dialCode",AUTHORIZE_PAYMENT_ERROR:"authorizePayError",ADD_TO_BASKET:"addToBasket"}).constant("UNSUBSCRIBE_URL_PARAMETER",{TOKEN:"token",COMM_TYPE:"type",CAMPAIGN_ID:"campaign-id"}).constant("LINK_FROM_EMAIL_COOKIE_NAME","pdp_gate_token").constant("ALGOLIA_HITS_PER_PAGE",24).constant("SCREEN_SIZE_BREAKPOINTS",{DESKTOP:1200,TABLET:768}).constant("ALGOLIA_HITS_BREAKPOINTS",{DESKTOP:9999,TABLET:999,MOBILE:99}).constant("BASKET_UPDATED_EVENT","basket_updated").constant("ORDER_UPDATED_EVENT","order_updated").constant("FINGERPRINT_CONSTS",{CACHE_KEY:"gmg-fp",QUERY_PARAM:"fp"}).constant("AWS_COGNITO_SWITCH","enable-aws-cognito").config(["$locationProvider",function(e){e.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:"client-navigation"})}]).config(["$provide",function(e){e.decorator("$q",["$delegate",function(e){var n=e.defer;return e.defer=function(){var t=n();return t.promise.success=function(e){return t.promise.then(e),t.promise},t.promise.error=function(e){return t.promise.then(null,e),t.promise},t},e}])}]).config(["$httpProvider",function(e){e.interceptors.push("httpResponseInterceptor"),e.defaults.headers.common["Gmg-Accept-Language"]=GMGSettings&&GMGSettings.languageCode||"en"}]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","http*://images*.greenmangaming.com/**"])}]).config(["$compileProvider","DEBUG",function(e,t){e.debugInfoEnabled(t)}]).config(["$templateRequestProvider","XSRF_FIELD_NAME",function(e,t){var n={headers:{Accept:"text/html","X-Requested-With":void 0},withCredentials:!1};n.headers[t]=void 0,e.httpOptions(n)}]),angular.module("gmgApp").factory("XSRFInterceptor",["$cookies","XSRF_FIELD_NAME","XSRF_TOKEN",function(n,r,i){return{request:function(e){var t;return e.headers.hasOwnProperty(r)||(t=n.get(i))&&(e.headers[r]=t),e}}}]),angular.module("gmgApp").config(["$httpProvider",function(e){e.interceptors.push("XSRFInterceptor"),e.defaults.withCredentials=!0,e.defaults.headers.post.withCredentials=!0,e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",e.defaults.headers.common["Current-Url"]=window.location.href}]),angular.module("gmgApp").config(["$cookiesProvider",function(e){e.defaults.secure=!0}]),angular.module("gmgApp").run(["$rootScope",function(e){e.initElements=initElements}]),angular.module("gmgApp").constant("CONTENT_LOCATION",{cdn:"//images.greenmangaming.com"}).constant("DEBUG",!1).constant("LOCAL_HOST",""),angular.module("gmgApp").controller("Adyen3DSecureController",["$scope","$window","$compile","$location",function(d,p,t,h){d.isReturningFrom3DSecure=!1,d.loading=!0;function f(e){return'<form action="'+e+'" method="post">'}function m(e,t){return'<input name="'+e+'" type="hidden" value="'+t+'" />'}function g(e){e=t(e+="</form>")(d),$("#paymentForm").append(e),angular.element(e).submit()}d.initialize=function(e,t,n,r,i,o){var a,s,l,c,u=new URL(p.location.href);p.history.replaceState({},document.title,h.path()),u.searchParams.get("threeDsComplete")?(d.isReturningFrom3DSecure=!0,d.loading=!1,r=r,u=u.searchParams,l=f(n+"?cartId="+u.get("cartId")+"&threeDsCategory="+u.get("threeDsCategory")),c=angular.fromJson(r),angular.forEach(Object.keys(c),function(e){l+=m(e,c[e])}),g(l)):(d.loading=!1,n=e,u=t,r=i,e=o,a=!1,t=p.sessionStorage.getItem(n),p.sessionStorage.removeItem(n),a=!t,s=f(t),angular.forEach(angular.fromJson(u),function(e){var t=p.sessionStorage.getItem(e);t?(s+=m(e,t),p.sessionStorage.removeItem(e)):a=!0}),a&&((n=new URL(r)).searchParams.set("paymentErrorMessages",e),p.location.href=n.toString()),g(s))}}]),angular.module("gmgApp").controller("AgeVerificationController",["$scope","$window","User","MODALS","ApiService","AgeVerificationService",function(r,n,e,i,o,t){function a(e){r.loadAgeVerificationModal=!0,e=e,"undefined"!=typeof utag&&utag.link({tealium_event:"age_gate",product_id:e})}var s=(new Date).getFullYear(),l=(r.tooYoungModalTypes=i.TOO_YOUNG_MODAL_TYPE,r.isLoading=!1,r.loadAgeVerificationModal=!1,r.loadTooYoungModal="",r.tooYoungModalLoaded=!1,r.initialize=function(e){r.userMinimumAge=e},r.ageVerification={days:t.getDateOfBirthSelectValues(1,31),months:t.getDateOfBirthSelectValues(1,12),years:t.getDateOfBirthSelectValues(s,s-100),dateOfBirth:{day:null,month:null,year:null}},r.ageVerification.validate=function(){var e=r.ageVerification.dateOfBirth;r.ageVerification.invalidDate=null===e.day||null===e.month||null===e.year,new Date(e.year,e.month-1,e.day)>Date.now()&&(r.ageVerification.invalidDate=!0)},r.ageVerification.setDateOfBirth=function(){var e,t;r.ageVerification.validate(),r.ageVerification.invalidDate||(e=r.ageVerification.dateOfBirth,(t=moment(new Date(e.year+"/"+e.month+"/"+e.day))).year()===parseInt(e.year)&&t.month()===parseInt(e.month)-1&&t.date()===parseInt(e.day)?(t={day:e.day,month:e.month,year:e.year},o.setDateOfBirth(t).then(function(){n.location.reload()})):r.ageVerification.invalidDate=!0)},r.$on(i.EVENTS.OPEN_AGE_VERIFICATION,function(e,t){a(t)}),r.$on(i.EVENTS.OPEN_TOO_YOUNG,function(e,t){var n;r.isLoading=!0,n=t===i.TOO_YOUNG_MODAL_TYPE.REGISTRATION,!0===r.tooYoungModalLoaded?l(n):(r.loadTooYoungModal=t,r.isLoading=!1,r.$$phase||r.$apply())}),e.getWhenReady().then(function(e){e.username&&"true"!==sessionStorage.getItem("modalDismissed")&&t.verifyAge(r.minimumUserAge,i.TOO_YOUNG_MODAL_TYPE.ACCOUNT)}),function(e){var t=e?"false":"static";$("#underage-user-modal").modal({backdrop:t,keyboard:!1}),e||angular.element("#blur-background").addClass("blur-background"),r.isLoading=!1});r.onLoadTriggerAgeVerificationModal=function(){angular.element(i.ELEMENTS.AGE_VERIFICATION_MODAL).modal({backdrop:"static",keyboard:!1}),angular.element("#blur-background").addClass("blur-background")},r.onLoadTriggerTooYoungModal=function(e){r.tooYoungModalLoaded=!0,l(e)},r.dismissModal=function(){$("#underage-user-modal").modal("hide"),sessionStorage.setItem("modalDismissed","true"),angular.element("#blur-background").removeClass("blur-background")},r.dismissModalWithoutSessionItem=function(){$("#underage-user-modal").modal("hide"),angular.element("#blur-background").removeClass("blur-background")}}]),angular.module("gmgApp").controller("AlgoliaItemHitController",["$scope","ApiService","LanguageService","Currency","User","$q","base64Service","tealiumLoggingService","$element",function(a,r,i,s,o,l,t,c,u){a.fetchingPrices=!1;var d=new Date;function p(e){a.productDataPerCode[e]?a.product.selectedEdition=a.productDataPerCode[e]:(a.product.selectedEdition.disableButton=!0,a.product.selectedEdition.freeToPlayLink="",a.product.selectedEdition.buttonLabel=a.$parent.buttonLabels.NotAvailable,a.product.selectedEdition.icon=null,a.product.selectedEdition.showPrices=!1)}a.productDataPerCode=null,a.product={selectedEdition:{sku:"",imageUrl:"",drmId:"",discountPercentOff:"",rrp:"",currentPrice:"",currentPriceInDecimal:0,cornerFlashDisplayOptionMedium:"",cornerFlashDisplayOptionSmall:"",cornerFlashText:"",cornerFlashColor:"",cornerFlashBackgroundColor:"",cornerFlashCustomDesign:"",cornerFlashIcon:"",cornerFlashIconDesign:"",cornerFlashIconDesignMedium:"",cornerFlashIconDesignSmall:"",cornerFlashOverrideVip:!1,hasCornerFlash:!1,drmColour:"",url:""},drmTabs:[],drmCountClass:"",displayName:"",position:0},a.init=function(e){a.product=JSON.parse(t.decode(e))},a.switchDrm=function(t,e){var n=u[0].querySelector(".game-drm.active").dataset.drmName;c.logDrmButtonClicked(t,n,e),t!==a.product.selectedEdition.sku&&(null!==a.productDataPerCode?p(t):(a.fetchingPrices=!0,r.pdpDetails({GameVariantCodes:[a.product.selectedEdition.sku],LanguageCode:i.getCurrentLanguageCode(),VariableCornerFlash:!0}).then(function(e){var n,e=e.data;a.productDataPerCode={},n=e,l(function(e,t){o.getWhenReady().then(function(t){function o(e){return s.displayPrice(t.currency,e,t.hideDecimalsForCurrency)}n.forEach(function(e){e.Drms.forEach(function(i){i.Editions.forEach(function(e){var t,n=null,r=!0;e.IsComingSoon?(t=a.$parent.buttonLabels.ComingSoon,r=!(n="glyphicon-calendar")):e.IsOutOfStock?t=a.$parent.buttonLabels.OutOfStock:e.IsFreeToPlay?(t=a.$parent.buttonLabels.FreeToPlay,r=!1):n=(t=e.IsPrepurchase?a.$parent.buttonLabels.PrePurchase:a.$parent.buttonLabels.AddToBasket,"glyphicon-shopping-cart"),a.productDataPerCode[e.Code]={drmId:i.Id,sku:e.Code,imageUrl:e.ImageForPdpBlock,discountPercentOff:e.DiscountPercentOff,rrp:o(e.OldPrice),currentPrice:o(e.Price),currentPriceInDecimal:e.Price,buttonLabel:t,icon:n,freeToPlayLink:e.FreeToPlayLink,disableButton:e.IsOutOfStock||e.IsComingSoon,showPrices:r,releaseDate:new Date(e.ReleaseDateIso)>d?e.ReleaseDateShort:"",cornerFlashText:e.CornerFlashInfo.cornerFlashText,cornerFlashColor:e.CornerFlashInfo.cornerFlashColor,cornerFlashBackgroundColor:e.CornerFlashInfo.cornerFlashBackgroundColor,cornerFlashCustomDesign:e.CornerFlashInfo.cornerFlashBackgroundColor?e.CornerFlashInfo.cornerFlashCustomDesign+"; border-color: "+e.CornerFlashInfo.cornerFlashBackgroundColor:e.CornerFlashInfo.cornerFlashCustomDesign,cornerFlashIcon:e.CornerFlashInfo.cornerFlashIcon,cornerFlashIconDesign:e.CornerFlashInfo.cornerFlashIconDesignMedium,cornerFlashOverrideVip:e.CornerFlashInfo.cornerFlashOverrideVip,hasCornerFlash:e.CornerFlashInfo.hasCornerFlash,drmColour:e.DrmColour,url:e.Url}})})}),e()})}).then(function(){p(t)}).finally(function(){a.fetchingPrices=!1})}).finally(function(){a.fetchingPrices=!1})))},a.drmClassName=function(e){return GMGSettings.drmSettingsByDrmId[e]?GMGSettings.drmSettingsByDrmId[e].ClassName:null},a.drmColourName=function(e){return GMGSettings.drmSettingsByDrmId[e]?GMGSettings.drmSettingsByDrmId[e].Colour:null},a.reportClick=function(e){return a.$parent.reportClick(a.product.selectedEdition.sku,a.product.position,e,a.product.selectedEdition.currentPriceInDecimal),!0},a.formatDiscount=function(e){return"-"+e+"%"},a.drmName=function(e){return GMGSettings.drmSettingsByDrmId[e]?GMGSettings.drmSettingsByDrmId[e].Name:null},a.drmPlatformDropdownName=function(e){return e&&GMGSettings.platformDrmDropdown[e]},a.showPlatformToDrm=function(e){return e.Platform&&GMGSettings.platformDrmDropdown[e.Platform]&&e.ShowPlatform}}]),angular.module("gmgApp").controller("AlgoliaSearchController",["$scope","$window","$interval","AlgoliaSearchService","$rootScope",function(h,f,m,g,v){h.init=function(e,t,n,r,i,o,a,s,l,c){function u(){var e=angular.element(".search-main-image");e.length&&(d.innerHTML=".search-main-image { min-height: "+155*e[0].parentElement.parentElement.parentElement.scrollWidth/276+"px; }")}v.isCustomQuery=""!==r,i?g.initAlgoliaSearchModal(e,t,r,h,n,o,a,s,l,c):g.initAlgoliaSearch(e,t,r,h,n,o,a,s,l,c);var d=document.createElement("style"),p=(document.head.appendChild(d),$(f).on("resize",u),m(function(){angular.element(".search-main-image").length&&(m.cancel(p),u())},1e3))}}]),angular.module("gmgApp").controller("AlgoliaSearchModalController",["$scope","modalService","MODALS","DESTROY_EVENT_NAME","$rootScope",function(e,t,n,r,i){var o=$("#algolia-search-modal"),a="",s="",l="";e.init=function(e,t,n){a=e,s=t,l=n},i.algoliaUrlForModal=function(){return"/"+l+"/"+s+"/"+a},e.algoliaSearchModal=new function(e,t){var n=this;n.shouldLoad=!1,n.isLoading=!1,n.modalLoaded=!1,n.modalElement=e,n.onOpen=t,n.loadModal=function(){n.shouldLoad=!0,n.modalLoaded?(e.addClass("open in"),$(".modal-backdrop").css({display:"none"})):n.isLoading=!0},n.hide=function(){e.removeClass("open in"),n.isOpen=!1},n.onModalLoaded=function(){n.isLoading=!1,n.modalLoaded=!0,n.loadModal()}}(o);var c=e.$on(n.EVENTS.OPEN_ALGOLIA_SEARCH_MODAL,function(){e.algoliaSearchModal.loadModal()});e.$on(r,function(){c()})}]),angular.module("gmgApp").controller("AuthenticationBlockController",["$scope","modalService","$location","User",function(r,i,e,o){r.linkReturnUrl=e.search().returnUrl?"?returnUrl="+encodeURIComponent(e.search().returnUrl):"",r.returnUrlOverride="/",r.init=function(e,t,n){n||o.getWhenReady().then(function(e){e.isAuthenticated&&(window.location.href="/")}),e&&(r.phoneNumberModal=new i.Modal(e)),t&&(r.cognitoVerificationCodeModal=new i.Modal(t)),r.phoneNumber={number:null,dialCode:null},r.isOnPage=!0}}]),angular.module("gmgApp").controller("AuthenticationController",["$rootScope","$scope","$location","$window","ErrorHandler","ApiService","Utils","GAME_GIFTING","modalService","tealiumLoggingService","User","fingerprintService","FINGERPRINT_CONSTS",function(n,a,r,i,s,l,c,u,o,d,p,h,f){a.redirectToThirdPartyLogin=function(t,n,r,i){h.getFingerprint().then(function(e){e&&(t=c.appendQueryKeyValue(t,f.QUERY_PARAM,e)),c.redirect(t,n,r,i)})},a.signIn={email:"",password:"",rememberMe:!0,returnUrl:"/",disabled:!1,isThirdPartyLogin:!1,phoneNumber:""},a.phoneNumberInput={selectedCountry:""},a.isEmailLogin=!0,a.phoneNumberLoading=!0,a.init=function(e,t){e||p.getWhenReady().then(function(e){0==$(".checkout-pages").length&&e.isAuthenticated&&(window.location.href="/")}),t&&(a.cognitoVerificationCodeModal=new o.Modal(t))},a.signInErrors=s.createValidationModel(),a.signIn.externalAccountId=r.search().externalAccountId,a.signIn.externalProvider=r.search().externalProvider,a.signIn.isExternalSignUp="true"===r.search().isExternalSignUp,a.signIn.isThirdPartyLogin="true"===r.search().isThirdPartyRedemption,a.signIn.ReturnUrl=c.getExternalLoginReturnUrl(),a.signIn.isOnApi=!!r.absUrl().match(GMGSettings.apiBaseUrl);a.returnUrl="&returnUrl="+a.signIn.ReturnUrl+"&isThirdPartyRedemption="+a.signIn.isThirdPartyLogin,a.signIn.isOnApi&&(a.returnUrl+="&isOnApi="+a.signIn.isOnApi),a.linkReturnUrl=r.search().returnUrl?"?returnUrl="+encodeURIComponent(r.search().returnUrl):"",a.doSignIn=function(){if(a.signInForm.$setSubmitted(),s.clearErrors(a.signInErrors),a.isEmailLogin||a.signIn.phoneNumber){var t,o,e=Object.keys(a.signInForm.$error),e=a.signInForm.$error.email&&1===e.length;if(!a.signInForm.$invalid||!a.isEmailLogin&&e)return a.signIn.ReturnUrl=c.getExternalLoginReturnUrl(a.returnUrlOverride),a.signIn.disabled=!0,null!=a.phoneNumberInput.selectedCountry&&(a.signIn.countryDialCode="+"+a.phoneNumberInput.selectedCountry.CallingCode),t=a.isEmailLogin?l.signIn:l.phoneSignIn,o="",o=a.isEmailLogin?"email":"phone",h.getFingerprint().then(function(e){return a.signIn.Fingerprint=e,t(a.signIn).success(function(e){var t;d.logSignInAttempt("success",o),e?(t=r.path(),-1!==e.ReturnUrl.lastIndexOf(t)&&a.signIn.isThirdPartyLogin||(i.location.href=e.ReturnUrl),n.$broadcast(u.THIRD_PARTY.LOGIN_SUCCESS,{response:e})):(l.updateApiData(),a.signIn.disabled=!1)}).error(function(e,t,n){switch(d.logSignInAttempt("fail",o),e){case"COGNITO_UNCONFIRMED_EMAIL":return $("#modalLoginRegister").modal("hide"),a.cognitoVerificationCodeModal.open({email:a.signIn.email,confirmSignup:!0}),void(a.signIn.disabled=!1);case"COGNITO_UNCONFIRMED_PHONE_NUMBER":var r={phoneNumber:{number:a.signIn.phoneNumber,dialCode:a.signIn.countryDialCode},returnUrl:a.returnUrlOverride?a.signIn.ReturnUrl:null,confirmSignup:!0};return a.phoneNumberModal.open(r),void(a.signIn.disabled=!1)}var i={data:e,status:t,headers:n};429!==t&&500!==t&&s.handleResponse(a.signInErrors,i=e?i:{data:"We're currently having a small issue. Please try again. Sorry!",status:t,headers:n}),a.signIn.disabled=!1})})}},a.getReturnUrlValues=function(){return o.returnUrlValues},a.getReturnUrlValues()&&(a.returnUrl=a.getReturnUrlValues()+"&isThirdPartyRedemption="+a.signIn.isThirdPartyLogin),a.$watch("getReturnUrlValues()",function(e,t){e!==t&&(a.returnUrl=e+"&isThirdPartyRedemption="+a.signIn.isThirdPartyLogin)}),a.toggleIsEmailLogin=function(){a.isEmailLogin=!a.isEmailLogin,a.signInForm.$submitted=!1}}]),angular.module("gmgApp").controller("AvatarAwsS3UploaderController",["$scope","$location","ApiService","ObjectValidator","User","ErrorHandler","profileBioAvatarService","errorInterceptorDetectorService","awsS3UploadService","AVATAR_UPLOADER_BUSY_STATUS_CHANGED","AVATAR_UPLOAD_RESPONSIBILITY_OWNER_CHANGED","AVATAR_UPDATED","IS_CURRENT_USERS_PROFILE","IS_FORUM_MODERATOR_UPDATED",function(o,t,a,s,l,n,c,r,i,e,u,d,p,h){function f(e){E(e.bucket,e.key)}function m(e){_(e),c.setAvatarUploadState(!1)}var g=!(o.isBusy=!0),v=(o.avatarUrl="",o.avatarValidation=n.createValidationModel(),l.getWhenReady().then(function(e){switch(e.group){case"Gold":o.avatarOutlineImg="/static/img/loyalty-badge-gold.png";break;case"Silver":o.avatarOutlineImg="/static/img/loyalty-badge-silver.png";break;case"Bronze":o.avatarOutlineImg="/static/img/loyalty-badge-bronze.png";break;default:o.avatarOutlineImg=null}}),o.$on(d,function(e,t){s.isNullOrEmptyString(t)?(o.avatarUrl=o.defaultAvatarUrl,s.isNullOrEmptyString(o.avatarUrl)||c.setAvatar(o.avatarUrl)):o.avatarUrl=t})),y=o.$on(e,function(e,t){o.isBusy=t}),b=o.$on(u,function(e,t){g=t}),S=o.$on(p,function(e,t){o.isCurrentUserProfile=t}),_=(o.$on("$destroy",function(){v(),b(),S(),y()}),function(e){g?c.setAvatarManagementError(e):n.handleResponse(o.avatarValidation,e),r.setErrorIntercepted(!1)}),E=function(e,t){a.setUserAvatar(e,t,o.isCurrentUserProfile?null:o.userName).then(function(e){e=e.data;o.avatarUrl=e.AvatarUrl,c.setAvatar(o.avatarUrl)},function(e){_(e)}).finally(function(){c.setAvatarUploadState(!1)})};o.setFile=function(e){s.isNullOrUndefined(e)||(g?c.clearAvatarError():n.clearErrors(o.avatarValidation),o.file=e,o.successActionRedirect=t.$$absUrl,c.setAvatarUploadState(!0),a.getAvatarAwsS3FormInfo(o.file.name).then(function(e){i.uploadToS3(e.data,o.file,f,m)},function(e){_(e),c.setAvatarUploadState(!1)}))};o.validateFileSize=function(e){e=o.avatarMaxFileSizeInBytes<=0||e.size<=o.avatarMaxFileSizeInBytes;return e||_({data:o.maxFileSizeExceededErrorMessage}),e},o.initialize=function(n,e,t,r,i){o.maxFileSizeExceededErrorMessage=i,o.avatarMaxFileSizeInBytes=r,o.isMouseEffectOn=e,g=t,o.isCurrentUserProfile=!1,o.defaultAvatarUrl=n,t||(c.setIsCurrentUsersProfile(!1),c.setAvatarUploadState(o.isBusy),l.getWhenReady().then(function(){var t,e=l.get();o.userName=e.username,s.isNullOrEmptyString(e.username)?(o.avatarUrl=n,c.setAvatar(o.avatarUrl),c.setAvatarUploadState(!1),c.setIsCurrentUsersProfile(!1)):(t=n,a.getCommunityDetails(e.username).then(function(e){e=e.data;s.isNullOrUndefined(e)||s.isNullOrEmptyString(e.AvatarUrl)?(o.avatarUrl=t,c.setAvatar(t)):(o.avatarUrl=e.AvatarUrl,c.setAvatar(e.AvatarUrl))},function(e){_(e)}).finally(function(){c.setAvatarUploadState(!1),c.setIsCurrentUsersProfile(!0),c.shouldParentGetInitialAvatar(g)}))}))}}]),angular.module("gmgApp").controller("BannerCarouselController",["$scope","$rootScope","ApiService","MODALS","User","tealiumLoggingService",function(i,e,n,t,r,o){i.changeSlide=function(e){i.previousSelectedId=i.selectedId,i.selectedId=e,i.bannerLoading=!0,s[e]?(i.product=s[e],i.bannerLoading=!1,c()):(t=>{var e;return a[t]||(e=n.getBannerItemInfo(t).then(function(e){s[t]=e.data}),a[t]=e)})(e).then(function(){e===i.selectedId&&(i.product=s[e],c()),i.bannerLoading=!1})},i.playerReady=function(e){i.playerLoading=!1,i.player=e.target,i.player.mute(),r.getWhenReady().then(function(e){e.autoplay&&i.player.playVideo()})},i.init=function(e,t,n){l=e,i.blockId=t,i.blockTypeName=n},i.selectedId=-1,i.previousSelected=-1,i.product=null,i.player=null,i.bannerOpen=!1,i.bannerLoading=!1,i.playerLoading=!0;var a={},s={},l=null;function c(){var e=i.product.media;null!==i.player&&(e.type===l?(i.playerLoading=!1,i.player.pauseVideo()):(i.previousSelectedId<0||i.selectedId!==i.previousSelectedId)&&i.player.loadVideoById(e.youtubeId))}i.$on("banner:toggle",function(){i.bannerOpen=!i.bannerOpen}),i.selectItemGaEvent=function(e,t,n,r){""!==n&&null!=n&&(i.blockId=n),""!==n&&null!=n&&(i.blockTypeName=r),o.logSelectItemClicked(e,t,i.blockId,i.blockTypeName)}}]),angular.module("gmgApp").controller("BannerCarouselControllerOverwolf",["$scope","$element","$location","ApiService","User","BANNERSTATE","$window","URL_PARAMETER_CONSTANTS","tealiumLoggingService",function(a,e,s,r,t,n,i,l,o){a.changeSlide=p,a.playerReady=function(e){a.playerLoading=!1,a.player=e.target,a.player.mute(),t.getWhenReady().then(function(e){e.autoplay&&a.player.playVideo()})},a.init=function(e,t,n,r,i,o){d=e,a.basketSummaryUrl=n,a.blockUrlQueryString=r,p(t),a.blockId=i,a.blockTypeName=o,window.addEventListener("message",function(e){"https://content.overwolf.com"===e.origin&&e.data.isGameSummaryMessage})},a.selectedId=-1,a.previousSelected=-1,a.product=null,a.player=null,a.bannerOpen=!1,a.bannerLoading=!1,a.playerLoading=!0,a.displayReleaseDate=m,a.transferToCart=function(){var e=v(a.blockUrlQueryString,!0),t=a.basketSummaryUrl;g(),i.open(t+e,"_blank")},a.transferToPdp=function(){var e=v(a.blockUrlQueryString),t=(e=>e=e&&"/"===e[e.length-1]?e.slice(0,-1):e)(a.product.url);g(),i.open(t+e,"_blank")},a.affiliateClick=function(e){g(),i.open(e,"_blank")},a.blockId=0,a.blockTypeName="";var c={},u={},d=null;function p(e){var t,n;a.previousSelectedId=a.selectedId,a.selectedId=e,a.bannerLoading=!0,u[e]?(a.product=u[e],h(),a.bannerLoading=!1):(c[t=e]||(n=r.getBannerItemInfo(t).then(function(e){u[t]=e.data}),c[t]=n,f("loaded"),f("ready"),n)).then(function(){e===a.selectedId&&(a.product=u[e],h()),a.bannerLoading=!1})}function h(){a.displayReleaseDate=m();var e=a.product.media;null!==a.player&&(e.type===d?(a.playerLoading=!1,a.player.pauseVideo()):(a.previousSelectedId<0||a.selectedId!==a.previousSelectedId)&&a.player.loadVideoById(e.youtubeId))}function f(e,t){parent&&parent.postMessage({isOverwolfShelf:!0,message:e,extra:t},"*")}function m(){return!!a.product&&!!a.product.releaseDate&&moment(a.product.releaseDate)>new moment}function g(){"undefined"!=typeof utag&&a.product&&(utag.link({ga_events:[{eventCategory:"Drop Shop External",eventAction:"Click",eventLabel:a.product.code}]}),o.logSelectItemClicked(a.product.code,a.product.price,a.blockId,a.blockTypeName))}function v(e,t){var n,r=s.search(),i=(e&&(n=(e=>{if(!(e=e&&e.trim()))return{};e=(e=e.replace(/\?/g,"").replace(/\"/g,"")).replace(/&/g,'","').replace(/=/g,'":"');try{return JSON.parse('{"'+e+'"}')}catch(e){return{}}})(e),Object.keys(n).forEach(function(e){r[e]=n[e]})),r.utm_term=a.product.code,t&&(r[l.ADD_TO_BASKET]=a.product.code),"?"),o=Object.keys(r);return o.forEach(function(e,t){e=e+"="+encodeURIComponent(r[e]);t!==o.length-1&&(e+="&"),i+=e}),i}a.$on("banner:toggle",function(){a.bannerOpen=!a.bannerOpen}),$(function(){var e=angular.element(".banner-carousel-offers-widget .first .expand-button"),t=angular.element(".banner-carousel-offers-widget .collapse");-1<s.absUrl().toString().indexOf("expanded="+n.EXPANDED)?(e.click(function(){t.addClass("in")}),e.click()):-1<s.absUrl().toString().indexOf("expanded="+n.COLLAPSED)&&t.removeClass("in")})}]),angular.module("gmgApp").controller("BillingAddressController",["$scope","ApiService","$q","validationHandlerService",function(t,n,r,i){t.isEditingBillingAddress=!1,t.initBillingAddress=function(e){e&&e.BillingAddress&&(e.BillingAddress.isEditable=!0),t.editedBillingAddress=angular.copy(e.BillingAddress)},t.toggleBillingsViewsMode=function(e){t.isEditingBillingAddress=!t.isEditingBillingAddress,t.SetCountryHasSubAreasFlag(),e&&e.preventDefault()},t.resetBillingAddressForm=function(e){t.toggleBillingsViewsMode(),t.editedBillingAddress=angular.copy(t.userProfile.BillingAddress),t.billingAddressForm&&(t.billingAddressForm.$setPristine(),t.billingAddressForm.$dirty=!1,t.billingAddressForm.$submitted=!1),e&&e.preventDefault()},t.updateBillingAddress=function(){var e;return angular.equals(t.editedBillingAddress,t.userProfile.BillingAddress)?(t.toggleBillingsViewsMode(),(e=r.defer()).resolve(),e.promise):(t.hasSubAreas||(t.editedBillingAddress.StateCode="",t.editedBillingAddress.StateName=""),n.updateBillingAddress(t.editedBillingAddress).then(function(){t.userProfile.BillingAddress=t.editedBillingAddress,t.resetBillingAddressForm(),i.requestValidationModelErrorClearing()},function(e){t.billingAddressForm&&(t.billingAddressForm.$submitted=!1),i.broadcastExistingValidationModel(e)}))},t.IsCountryChanged=function(){t.SetCountryHasSubAreasFlag(),t.editedBillingAddress.StateCode="",t.editedBillingAddress.StateName=""},t.SetCountryHasSubAreasFlag=function(){t.hasSubAreas="true"===angular.element(document.getElementById("countryCode")).find("option:selected").attr("hasSubAreas")},t.init=function(){n.userProfile().then(function(e){t.initBillingAddress(e.data)})}}]),angular.module("gmgApp").controller("BlizzardController",["$scope","$window","blizzardService","BLIZZARD_CONSTANTS","Utils","$location","DESTROY_EVENT_NAME","$document","PURCHASE_HISTORY_CONSTANTS","ApiService","purchaseHistoryCountService",function(r,n,t,i,o,a,e,s,l,c,u){r.broadCastingUserDetailsInProgress=!1,r.autoTriggeringBlizzardModal=!1,r.autoStartSpinning=!1,r.isBoxIdMatching=!1,r.isModalOriginMatching=!1,r.modalOrigin="",r.initializing=!1;function d(e){var t=r.returnUrl||n.location.href,t=o.updateUrlParameter(t,i.AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD,e);return t=o.updateUrlParameter(t,l.BOX_ID_QUERY_STRING_PARAMETER,r.boxId),t=r.isYourPurchaseMode||r.isPurchaseHistoryMode?o.updateUrlParameter(t,l.ITEMS_COUNT,u.getBoxCount()):t}function p(e){a.search(i.AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD,null),a.search(l.BOX_ID_QUERY_STRING_PARAMETER,null),a.search(i.BLIZZARD_MODAL_ORIGIN_QUERY_STRING_PARAMETER,null),a.search(l.ITEMS_COUNT,null),t.broadcastOpenModal(e)}function h(e,t){var n;r.redeemed||(n={gameInfo:{sku:r.sku,name:r.gameName,image:r.gameImage,boxId:r.boxId,keyName:r.keyName},userInfo:{accountId:e,battleTag:t}},a.search()[i.AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD]&&r.isPurchaseHistoryMode?(e=angular.element("#"+r.boxId),s.scrollToElement(e,400,1e3).then(function(){p(n)})):p(n))}function f(){var e;r.isBoxIdMatching=(e=a.search()[l.BOX_ID_QUERY_STRING_PARAMETER],r.boxId===e||n.boxId===e),r.isKeyNameMatching=r.keyName===a.search().keyname,r.autoTriggeringBlizzardModal=a.search().hasOwnProperty(i.AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD),r.isModalOriginMatching=!!a.search().hasOwnProperty(i.BLIZZARD_MODAL_ORIGIN_QUERY_STRING_PARAMETER)&&r.modalOrigin.toString()===a.search()[i.BLIZZARD_MODAL_ORIGIN_QUERY_STRING_PARAMETER]}var m=r.$on(i.BLIZZARD_OPEN_MODAL,function(){r.autoTriggeringBlizzardModal=!1,r.autoStartSpinning=!1,r.initializing=!1}),g=r.$on(i.BLIZZARD_BROADCAST_SWITCH_USER,function(){t.switchUser(d(!0))}),v=r.$on(i.BLIZZARD_BROADCAST_KEY_ACTIVATED,function(e,t){t.boxId===r.boxId&&t.keyname===r.keyName&&(r.redeemed=!0,r.battleTag=t.battleTag)}),y=r.$on(i.BLIZZARD_BROADCAST_REAUTHORIZE,function(){t.logon(d(!0))});r.$on(e,function(){g(),v(),m(),y()}),r.redeemBlizzardGame=function(){return c.getBlizzardProfile().success(function(e){e?r.autoTriggeringBlizzardModal||e.Username&&e.AccountId?h(e.AccountId,e.Username):t.logon(d(!0)):r.autoTriggeringBlizzardModal?(t.broadcastAuthenticationError(),h()):(e=d(!0),t.logon(e))}).error(function(e){t.broadcastAuthenticationError(e),h()})},r.init=function(){r.redeemed||((r.isYourPurchaseMode||r.isPurchaseHistoryMode)&&(r.modalOrigin=i.BLIZZARD_MODAL_ORIGIN.YOUR_PURCHASE_PAGE),r.isPrizeWheelMode&&(r.modalOrigin=i.BLIZZARD_MODAL_ORIGIN.PRIZE_WHEEL_PAGE),r.isYourOrderMode&&(r.modalOrigin=i.BLIZZARD_MODAL_ORIGIN.YOUR_ORDER_PAGE),r.isYourOrderMobileMode&&(r.modalOrigin=i.BLIZZARD_MODAL_ORIGIN.YOUR_ORDER_MOBILE_PAGE),f(),r.initializing=!0,r.autoStartSpinning=!0,r.autoTriggeringBlizzardModal&&r.redeemBlizzardGame(),r.initializing=!1,r.autoStartSpinning=!1)}}]),angular.module("gmgApp").controller("BlizzardKeyActivationBlockController",["$scope","DESTROY_EVENT_NAME","ApiService","blizzardService","BLIZZARD_CONSTANTS","ErrorHandler",function(n,e,t,r,i,o){function a(){s.modal(i.BLIZZARD_MODAL_TOGGLE),n.isSuccessful=!1,n.attemptMade=!1,n.authenticationFailed=!1,n.blizzardGeneralError=!1,n.blizzardMaximumGrants=!1}var s=angular.element(i.BLIZZARD_MODAL_SELECTOR),l={},c=(n.userInfo={},n.attemptMade=!1,n.isSuccessful=!1,n.authenticationFailed=!1,n.$on(i.BLIZZARD_OPEN_MODAL,function(e,t){l=l=l=t,n.gameInfo=l.gameInfo,n.userInfo=l.userInfo,s.modal({backdrop:"static",keyboard:!1})}));n.activateBlizzardKey=function(){var e={keyName:n.gameInfo.keyName,blizzardAccountId:n.userInfo.accountId,blizzardBattleTag:n.userInfo.battleTag,boxId:n.gameInfo.boxId};return t.activateBlizzardKey(e).then(function(e){n.isSuccessful=!0,r.broadcastKeyActivated({keyname:n.gameInfo.keyName,battleTag:e.data.username,boxId:n.gameInfo.boxId})},function(e){n.isSuccessful=!1,n.errorMessage=o.getErrorMessage(e)}).catch(function(){n.isSuccessful=!1}).finally(function(){n.attemptMade=!0})},n.cancel=a,n.continue=a,n.close=a,n.reauthorize=function(){a(),r.broadcastReauthorize()},n.switchUser=function(){r.broadcastSwitchUser()},n.$on(i.BLIZZARD_BROADCAST_SWITCH_USER,function(){a()}),n.$on(i.BLIZZARD_BROADCAST_AUTHENTICATION_ERROR,function(e,t){n.isSuccessful=!1,n.attemptMade=!0,n.authenticationFailed=!0,n.errorMessage=t}),n.$on(e,function(){c()})}]),angular.module("gmgApp").controller("BlizzardLoginCallbackController",["$scope","$window","ApiService","Utils","base64Service",function(e,t,n,r,i){r=r.getQueryString(t.location.href);t.location=i.decode(r.returnUrl)}]),angular.module("gmgApp").controller("BoaCompraPaymentFormController",["$scope","paymentFormGeneratorService","$timeout","QUERY","BOA_COMPRA_EVENTS","DESTROY_EVENT_NAME",function(n,r,i,o,e,t){var a=n.$on(e.REQUEST_FORM_SUBMISSION,function(e,t){r.generatePaymentForm(n,t,o.ASSIGN_BOACOMPRA_CHARACTER),i(function(){$("#boaCompraPostForm").submit()},Number(n.paymentTimeout))});n.$on(t,function(){a()})}]),angular.module("gmgApp").controller("CancelPendingOrderModalController",["$rootScope","$scope","ApiService","CANCELING_PENDING_ORDER_SUCCESS","CANCELING_PENDING_ORDER_FAIL","MODALS","EVENTS","DESTROY_EVENT_NAME",function(t,e,n,r,i,o,a,s){var l=null,c=(e.loadCancelPendingOrderModal=!1,e.openModal=function(){(l=angular.element(o.ELEMENTS.CANCEL_PENDING_ORDER)).modal(o.DISPLAY.SHOW)},e.$on(a.OPEN_CANCEL_PENDING_ORDER,function(){e.loadCancelPendingOrderModal||null===l?(null===l&&(l=angular.element(o.ELEMENTS.CANCEL_PENDING_ORDER)),e.loadCancelPendingOrderModal=!0,l.modal(o.DISPLAY.SHOW)):e.loadCancelPendingOrderModal=!0}));e.$on(s,function(){c()}),e.closeCancelPendingOrderModal=function(){t.$broadcast(a.CLOSE_CANCEL_PENDING_ORDER)},e.cancelBoaCompraPendingOrder=function(){return n.cancelPendingOrder([]).then(function(){t.$broadcast(r)},function(e){t.$broadcast(i,e)}).finally(function(){null!==l&&(l.modal(o.DISPLAY.HIDE),t.$broadcast(a.CLOSE_CANCEL_PENDING_ORDER))})}}]),angular.module("gmgApp").controller("ChangePasswordController",["$rootScope","$scope","ApiService","ErrorHandler","UPDATE_PASSWORD_FORM_CLOSED","myAccountService",function(e,t,n,r,i,o){var a=$("#changePasswordFormShowMode"),s=$("#changePasswordFormEditMode");e.$on(i,function(){t.closePanel()}),t.openPanel=function(){a.hide(),s.slideDown(),o.openUpdatePasswordForm()},t.closePanel=function(){s.slideUp(),a.slideDown("10")},t.clear=function(){t.closePanel(),o.closeForm(),t.oldPassword="",t.newPassword="",t.confirmPassword="",t.ChangePasswordForm.$setPristine(),r.clearErrors(t)},t.save=function(){var e={OldPassword:t.oldPassword,Password:t.newPassword,ConfirmedPassword:t.confirmPassword};return n.changePassword(e).then(function(){t.clear()},function(e){500!==e.status&&r.handleResponse(t,e)})},t.$watchGroup(["oldPassword","newPassword","confirmPassword"],function(){r.clearErrors(t)}),r.clearErrors(t)}]),angular.module("gmgApp").controller("CheckoutController",["$scope","$location","$window","ErrorHandler","ApiService","Basket","User","$anchorScroll","SCREEN_SM","GIFT_CARD_CODE","$rootScope","MODALS","billingAddressService","paymentService","PAYMENT_METHOD_EVENTS","paymentMethodsService","PAYMENT_EVENTS","DESTROY_EVENT_NAME","VALIDATION_MODEL_HANDLER_EVENTS","validationHandlerService","paymentMethodConstants","ScreenSize","$timeout","$q","USER_PROFILE_SET_EVENT","userProfileService","BILLING_ADDRESS_EVENTS","paymentBillingAddressHtmlService","YOUR_CART_CONSTANTS","GlobalMessageBarService","newsletterOptInService","URL_PARAMETER_CONSTANTS","tealiumLoggingService","SECRET_VOUCHER_CLAIM_SOURCE","CUSTOM_MESSAGES_KEYS","fingerprintService",function(i,o,a,n,s,l,c,e,t,r,u,d,p,h,f,m,g,v,y,b,S,_,E,C,w,T,A,x,P,O,I,R,U,F,B,M){function D(){i.newCredit.value=void 0,n.clearErrors(i.creditValidation)}function G(){i.newVoucher.value=void 0,D(),i.newGiftCard.value=void 0,i.newPromotionalCode.value=void 0}var N,k="Basket empty",V=(i.paymentMethodsLoading=!0,i.userDetailsLoading=!0,i.showLoadingBar=!0,i.basket={},i.voucherPattern=new RegExp("^[a-zA-Z0-9-#]{1,21}$"),i.giftCardPattern=new RegExp("^[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}$"),i.giftCardSuccess=!1,i.giftCardSuccessMessage=void 0,i.billingAddressValidation=n.createValidationModel(),i.creditValidation=n.createValidationModel(),i.voucherGiftCardValidation=n.createValidationModel(),i.newCredit={},i.newVoucher={},i.newGiftCard={},i.newPromotionalCode={},i.paymentCancelled=!1,i.paymentFailed=!1,i.hasAbsoluteCreditAndTriedToPayWithCard=!1,i.showGiftBasket=!1,i.buttonDisabled=!1,i.clearSpinnerOnSuccess=!0,i.addToBasketLoading=!0,i.setSecretVoucherErrorMessage=function(e,t,n){i.secretVoucherBadCodeErrorMessage=e,i.secretVoucherInternalErrorMessage=t,i.secretVoucherGeneralErrorMessage=n},i.MakeMeBusy=function(e){i.buttonDisabled=e,i.clearSpinnerOnSuccess=!e,e&&n.clearErrors(i)},i.displayAbsoluteCreditOrVoucherMessage=function(){return i.basket.items&&0<i.basket.items.length&&0===i.basket.total.final&&!0===i.hasAbsoluteCreditAndTriedToPayWithCard},i.openVouchers=function(){angular.element(".vouchers-gifts-header.collapsed").click()},i.saveCart=function(e){if(h.updatedDisablePlaceOrderButton(!0),0!==i.basket.items.length)return n.clearErrors(i),s.saveCart(i.basket.isGiftBasket).then(function(){e||(a.location.href="/")},function(e){i.basket.isGiftBasket=!i.basket.isGiftBasket,401===e.status?a.location.href=i.YourOrderPageUrl:(n.handleResponse(i,e),i.MakeMeBusy(!1),i.basket.showMesssageBar())}).finally(function(){h.updatedDisablePlaceOrderButton(!1),i.updatingCart=!1});a.location.href="/"},i.checkGiftBasket=function(){i.updatingCart||(i.updatingCart=!0,i.basket.checkItemsAreNotGiftable(!0)&&i.saveCart(!0))},i.ProceedToPaymentOrPlaceOrder=function(){return i.user.username?(i.MakeMeBusy(!0),n.clearErrors(i),M.getFingerprint().then(function(e){e={isGift:i.basket.isGiftBasket,fingerprint:e};return s.proceedToPayment(e).then(function(e){e=e.data.ReturnUrl;a.location.href=e,i.MakeMeBusy(!1)},function(e){401===e.status?a.location.href=i.YourOrderPageUrl:e.data===k?a.location.reload():(n.handleResponse(i,e),i.MakeMeBusy(!1))})})):(a.innerWidth>t?e("signin"):e("vertical-scroll-signin"),!1)},i.displaySignInModal=function(){u.$broadcast(d.EVENTS.OPEN_SIGN_IN_MODAL)},i.ProceedToPaymentOrPlaceOrderModal=function(){if(b.requestValidationModelErrorClearing(),i.user.username)return i.MakeMeBusy(!0),n.clearErrors(i),M.getFingerprint().then(function(e){e={isGift:i.basket.isGiftBasket,fingerprint:e};return s.proceedToPayment(e).then(function(e){e=e.data.ReturnUrl;a.location.href=e,i.MakeMeBusy(!1)},function(e){angular.isString(e.data)?401===e.status?a.location.href=i.YourOrderPageUrl:e.data===k?a.location.reload():(n.handleResponse(i,e),i.MakeMeBusy(!1)):(n.handleResponse(i,e),i.MakeMeBusy(!1),e.data&&!0===e.data.IsUserTooYoung&&(u.$broadcast(d.EVENTS.OPEN_TOO_YOUNG,d.TOO_YOUNG_MODAL_TYPE.BASKET),$("#underage-user-modal").modal("show"),angular.element("#blur-background").addClass("blur-background")))})});i.displaySignInModal()},i.isCtaDisabled=function(){return!!l.isCtaDisabled&&l.isCtaDisabled()},new URL(a.location.href),i.newsletterCheckbox=I.getNewsletterCheckbox(),i.checkboxClicked=function(){i.newsletterCheckbox=!i.newsletterCheckbox,I.setNewsletterCheckbox(i.newsletterCheckbox)},i.init=function(e,t,n,r){i.isYourOrderPage=e,i.boaCompraCheckoutTimeout=t,i.BILLING_ADDRESS_ERROR=angular.fromJson(n),p.setBillingMessages(i.BILLING_ADDRESS_ERROR),x.setBillingAddressHtmlUrl(r),C.all([l.getWhenReady(),c.getWhenReady()]).then(function(e){i.basket=e[0],i.user=e[1],i.productDiscountDto=[],i.showGiftBasket=i.user.isGiftingAllowed,-1!==o.url().indexOf("?authorizePayError")&&(e=new URL(window.location.href).searchParams.get("authorizePayError"),b.broadcastNewValidationModel({data:e})),-1!==o.url().indexOf("?error")&&i.basket.getRestoreCartError(),i.payingByOnlyCredits()&&(i.paymentMethodsLoading=!1),i.user.hideDecimalsForCurrency&&(i.creditStep=1),E(function(){_.greaterThan("xs")&&i.openVouchers()}),i.user.isAuthenticated&&(0===i.basket.items.length&&-1<a.location.href.indexOf(P.BILLING_PAGE)?a.location.href="/":(-1!==a.location.href.indexOf(P.ORDER_PAGE)&&"true"===o.search().absoluteCredit&&(i.hasAbsoluteCreditAndTriedToPayWithCard=!0),s.userProfile().then(function(e){T.setUserProfile(e.data)}),s.isBillingAddressValid().then(function(e){i.isBillingAddressValid=e.data}))),o.search()[R.ADD_TO_BASKET]?s.addProduct(o.search()[R.ADD_TO_BASKET]).then(function(e){i.basket.applyApiBasketData(e.data.Basket)},function(e){var t=O.globalMessage;t.isError=!0,t.message=null,angular.isArray(e.data)?(t.errors=e.data,t.hideClose=!0):t.message=e.data,t.visible=!0}).finally(function(){o.search(R.ADD_TO_BASKET,null),i.addToBasketLoading=!1}):i.addToBasketLoading=!1,i.user.isAuthenticated&&o.search().applyVoucherCode&&(i.newPromotionalCode.value=o.search().applyVoucherCode,E(function(){i.promotionalCodeForm.$setDirty(),angular.element("#promotionalCodeApplyButton").click()}))});e=h.readPaymentRelatedUrlQuerys();i.paymentFailed=e.paymentFailed,i.paymentCancelled=e.paymentCancelled,"true"!==i.paymentFailed&&"true"!==i.paymentCancelled||(t=o.search().paymentErrorMessages,o.search(R.PAYMENT_ERROR_MESSAGES,null),b.broadcastNewValidationModel({data:decodeURI(t)}))},i.setStep=function(e){i.step=e},i.applyPromotionalCode=function(){return i.basket.applyPromotionalCode(i.newPromotionalCode.value.toUpperCase()).then(function(e){e.PromotionalCodeType===r&&(i.user.credit=e.Credit,i.giftCardSuccess=!0,i.giftCardSuccessMessage=e.RedemptionMessage),e.ShowLoginModal?(a.returnUrl=a.location.pathname+"?applyVoucherCode="+i.newPromotionalCode.value.toUpperCase(),o.search("openModal","true"),o.search("cMsg",B.VOUCHER_REQUIRES_SIGN_IN),u.$broadcast(d.EVENTS.OPEN_SIGN_IN_MODAL,{returnUrl:returnUrl})):(G(),n.clearErrors(i.voucherGiftCardValidation))},function(e){angular.isArray(e.data)||(e.data={ExceptionMessage:e.data}),n.handleResponse(i.voucherGiftCardValidation,e)})},i.payingByOnlyCredits=function(){return i.basket&&i.basket.total&&0===i.basket.total.final},i.skipPayment=function(){return i.payingByOnlyCredits()&&i.isBillingAddressValid},i.applyCredit=function(){return i.basket.applyCredit(i.newCredit.value).then(function(){D()},function(e){n.handleResponse(i.creditValidation,e)})},i.removeCredit=function(){return i.basket.removeCredit().catch(function(e){n.handleResponse(i.creditValidation,e)})},i.RedirectIfNotAuthenticated=function(t){c.getWhenReady().then(function(e){e.username||o.search()[R.RE_LOGIN_IN]||((e=new a.URL(t,new a.URL(a.location.origin))).searchParams.append(R.RE_LOGIN_IN,!0),e.searchParams.append(R.RETURN_URL,t),a.location.href=e.toString())})},i.$on(f.PAYMENT_METHODS_LOADING_STATUS_CHANGED,function(e,t){i.paymentMethodsLoading=t})),j=i.$on(A.ADDRESS_LOAD_COMPLETED,function(){i.userDetailsLoading=!1}),H=i.$watchGroup(["userDetailsLoading","paymentMethodsLoading","addToBasketLoading"],function(e,t){e!==t&&(i.showLoadingBar=e.every(function(e){return!0===e})||e[2],N=e.every(function(e){return!1===e}),E(function(){i.displayAccordionSection=!i.showLoadingBar,N&&h.updatedDisablePlaceOrderButton(!1)},5))}),Y=i.$on(w,function(e,t){i.isYourOrderPage&&(i.userDetailsLoading=!1),i.userProfile=t}),z=m.paymentMethodDetailsSelectedListener(i),W=i.$on(g.PENDING_ORDER_EXISTS,function(e,t){i.hasPendingOrder=t}),q=i.$on(y.BROADCAST_VALIDATION_MODEL,function(e,t){E(function(){i.billingValidation=t})}),K=i.$on(y.BROADCAST_VALIDATION_ERROR,function(e,t){n.handleResponse(i.billingValidation,t)}),Q=i.$on(y.CLEAR_VALIDATION_MODEL,function(e){E(function(){n.clearAllErrors()})}),X=i.$on(f.BASKET_RELOAD_COMPLETE,function(e){i.basket=l.get()}),L=(i.isPayPal=function(){var e=i.selectedPaymentMethodGroup&&i.selectedPaymentMethodGroup.category===S.PAYPAL;return e&&(i.userDetailsLoading=!1),e},i.$on(v,function(){z(),V(),W(),q(),K(),Q(),X(),Y(),j(),H()}),i.promotionalCodePattern={test:function(e){var t=i.giftCardPattern.test(e),e=i.voucherPattern.test(e);return t||e}},i.claimSecretOffers=function(){angular.element(".box-spinner-cart").show(),$(".claim-offer").addClass("hidden"),i.basket.apiCallInProgress=!0,s.claimAndApplySecretVouchers(i.basket.secretVoucherOfferIds,F.BASKET).then(function(e){0===e.data.SecretVoucherClaimDetails.Errors.length?(i.basket.applyApiBasketData(e.data.PromotionalCodeInCartRedemptionResult.Basket),J(e.data.SecretVoucherClaimDetails.Games),Z()):0<e.data.SecretVoucherClaimDetails.Errors.filter(function(e){if(400===e.ErrorCode)return e}).length?L(i.secretVoucherBadCodeErrorMessage,!0):($(".claim-offer").removeClass("hidden"),L(i.secretVoucherInternalErrorMessage,!1))},function(){L(i.secretVoucherGeneralErrorMessage,!0)}).finally(function(){angular.element(".box-spinner-cart").hide(),i.basket.apiCallInProgress=!1})},function(e,t){O.globalMessage.visible=!0,O.globalMessage.isError=t,O.globalMessage.message=e,i.secretVoucherHasError=t}),Z=function(){O.globalMessage.visible=!1,O.globalMessage.isError=!1,i.secretVoucherHasError=!1},J=function(e){e.forEach(function(e){U.logSecretVoucherClaimed(e&&e.VoucherConfigId?e.VoucherConfigId:"")})}}]),angular.module("gmgApp").controller("ClearCookieBlockController",["$scope","ApiService",function(e,t){e.loading=!0,t.clearTooYoung().then(function(){e.success=!0}).finally(function(){e.loading=!1})}]),angular.module("gmgApp").controller("ClonedGameViewController",["$scope","tealiumLoggingService",function(r,n){r.setClonesLoading=function(e,t){r.$broadcast("set-game-view-loading",e,t)},r.setClonesProduct=function(e,t,n){r.$broadcast("set-game-view-product",e,t,n)},r.init=function(e,t){r.blockId=e,r.blockTypeName=t},r.selectItemGaEvent=function(e,t){n.logSelectItemClicked(e,t,r.blockId,r.blockTypeName)}}]),$("#share-code-modal").on("show.bs.modal",function(e){var t=$(e.relatedTarget).data("code-share-modal");$(e.currentTarget).find('div[name="modal-content"]').val(t)}),angular.module("gmgApp").controller("CognitoConfirmForgotPasswordController",["$scope","ApiService","ErrorHandler","$rootScope","MODALS","User","TOKEN_INVALID_FLAG","TOKEN_EXPIRED_FLAG",function(o,e,i,t,n,r,a,s){o.resetPasswordConfirm={token:"",password:"",confirmPassword:"",isEmailAccount:localStorage.getItem("isEmailAccount"),email:localStorage.getItem("email"),number:localStorage.getItem("number"),countryDialCode:localStorage.getItem("countryDialCode")},o.emptyError=function(){$("#confirm-section :input").on("input",function(){$("#staff-error").empty()})},o.codeExpiredMessage="",o.codeInvalidMessage="",o.pleaseRequestNewOneMessage="",o.forgottenPasswordUrl="",o.isPageInEditMode=!1,o.errorOccured=!1,o.errorMessage="",o.isStaffError=!1,o.stateVariables={disabled:!1,clearSpinner:!0},o.init=function(e,t,n,r,i){o.isPageInEditMode=e,o.codeExpiredMessage=t,o.codeInvalidMessage=n,o.pleaseRequestNewOneMessage=r,o.forgottenPasswordUrl=i},r.getWhenReady().then(function(e){o.isPageInEditMode||e.isAuthenticated&&(window.location.href="/"),document.body.classList.add("phone-number-reset")}),o.resetPassword=function(){return o.setLoading(!0),o.errorOccured=!1,o.isStaffError=!1,o.resetPasswordConfirm.token=o.resetPasswordVerify.token,i.clearErrors(o),e.cognitoConfirmForgotPassword(o.resetPasswordConfirm).success(function(){o.setLoading(!1),i.clearErrors(o),o.success=!0}).error(function(e,t,n){e===s&&(e=o.codeExpiredMessage+" <a href='+"+o.forgottenPasswordUrl+"+'>"+o.pleaseRequestNewOneMessage,o.errorMessage=o.codeExpiredMessage,o.errorOccured=!0),e===a&&(e=o.codeInvalidMessage+" <a href='+"+o.forgottenPasswordUrl+"+'>"+o.pleaseRequestNewOneMessage,o.errorMessage=o.codeInvalidMessage,o.errorOccured=!0),angular.isArray(e)&&1<=e.length&&((r=$("#staff-error")).empty(),angular.forEach(e,function(e){var t;""!==e.ErrorMessage&&((t=document.createElement("small")).className="help-block label-error",t.textContent="*"+e.ErrorMessage,r.append(t))}),o.isStaffError=!0);var r,e={data:e,status:t,headers:n};i.handleResponse(o,e),o.setLoading(!1)})},o.setLoading=function(e){o.stateVariables.disabled=e,o.stateVariables.clearSpinner=e,o.success=!1},o.displaySignInModal=function(){t.$broadcast(n.EVENTS.OPEN_SIGN_IN_MODAL)},o.sendVerificationCode=function(){return i.clearErrors(o),o.retryCodeInProgress=!0,o.forgottenPassword={email:localStorage.getItem("email"),number:localStorage.getItem("number"),countryDialCode:localStorage.getItem("countryDialCode"),isEmailAccount:localStorage.getItem("isEmailAccount")},("true"===o.forgottenPassword.isEmailAccount?e.forgottenPasswordCognitoEmail(o.forgottenPassword):e.forgottenPasswordCognitoSms(o.forgottenPassword)).success(function(){i.clearErrors(o),o.retryCodeInProgress=!1}).error(function(e,t,n){o.retryCodeInProgress=!1})}}]),angular.module("gmgApp").controller("CommunityTabController",["$scope","$window","Product","Tealium",function(e,t,n,r){n=n.initForPdp(t.games.platforms);t.gameVariantCode&&(e.product=n.find(function(e){return e.sku===t.gameVariantCode})),e.product||(e.product=n[0])}]),angular.module("gmgApp").controller("ContentPageController",["User","$scope",function(t,e){e.initialize=function(e){e&&t.getWhenReady().then(function(e){e.isAuthenticated&&(window.location.href="/")})}}]),angular.module("gmgApp").controller("CreateLazyVoucherController",["$rootScope","$scope","$q","ApiService","User","ObjectValidator","GlobalMessageBarService","$window","VOUCHER_ERROR_CONTAINER_SELECTOR","MODALS",function(e,a,t,n,r,i,o,s,l,c){function u(){this.visible=!1}var d=null;a.voucherCode="",a.isLoggedIn=!1,a.startDate="",a.endDate="",a.showCountdown=!1,a.revealPersonalCode=!1,a.codeShareModal=[],a.revealingCode=!1,a.revealButtonsGroup="";u.prototype.open=function(e){this.codeShareModal=e,this.visible=!0},u.prototype.close=function(){this.visible=!1},a.multipleCodeModal=new u,r.getWhenReady().then(function(e){a.isLoggedIn=!i.isNullOrEmptyString(e.username)}),a.revealVoucherCode=function(){var e=a.getVoucherCodes();return a.revealPersonalCode=!0,e},a.displaySignInModal=function(){e.$broadcast(c.EVENTS.OPEN_SIGN_IN_MODAL)},a.getVoucherCodes=function(){var e=t.defer();return a.voucherCode||0<a.voucherCode.length?e.resolve(!1):(a.revealingCode=!0,e.resolve(n.generateOfferVoucherCode(d).success(function(e){e.IsRestricted?(o.globalMessage.visible=!0,o.globalMessage.isError=!0,o.globalMessage.message=angular.element(l)[0].innerHTML,s.scrollTo(0,0)):(a.voucherCode=e.VoucherCode,a.codeShareModal.extraVoucherCodes=e.ExtraVoucherCodes)}).finally(function(){a.revealingCode=!1}))),e.promise},a.selectItemGaEvent=function(e,t,n,r){tealiumLoggingService.logSelectItemClicked(e,t,n,r)},a.copyVoucher=function(e){var t=document.createElement("span"),e=(t.appendChild(document.createTextNode(e)),t.id="tempCopyToClipboard",angular.element(document.body.append(t)),document.createRange());e.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),document.execCommand("copy"),window.getSelection().removeAllRanges(),t.remove()},a.onStart=function(){a.showCountdown=!0},a.onFinish=function(){a.showCountdown=!1},a.init=function(e,t,n,r,i,o){d=e,a.revealButtonsGroup="revealButtons"+e,a.startDate=t,a.endDate=n,a.codeShareModal.extraVoucherModalHeaderImageUrl=r,a.codeShareModal.extraVoucherModalMessageText=i,a.codeShareModal.extraVoucherModalCopyButtonLabel=o}}]),angular.module("gmgApp").directive("codeShareModal",[function(){return{restrict:"EA",scope:{model:"=",copyVoucher:"&"},link:function(t,n,e){t.$watch("model.visible",function(e){t.model.codeShareModal&&null!==t.model.codeShareModal.extraVoucherCodes&&n.find("#share-code-modal").modal(e?"show":"hide")}),n.on("shown.bs.modal",function(){t.$apply(function(){t.model.visible=!0})}),n.on("hidden.bs.modal",function(){t.$apply(function(){t.model.visible=!1})})},templateUrl:"//images.greenmangaming.com/static/templates/directives/code-share-modal.c518f3027.html"}}]),angular.module("gmgApp").controller("DateOfBirthController",["$rootScope","$scope","$q","ErrorHandler","ApiService","myAccountService","DATE_OF_BIRTH_FORM_CLOSED","ALL_FORM_CLOSED","AgeVerificationService",function(e,r,n,i,o,t,a,s,l){var c={currentYear:(new Date).getFullYear(),dateFormat:"MM-DD-YYYY"},u=function(){r.dateOfBirth=r.userProfile.DateOfBirth;var e=new moment(r.dateOfBirth);e.isValid()?r.register={day:e.format("DD"),month:e.format("MM"),year:e.format("YYYY")}:r.register=r.register||{day:"",month:"",year:""}},d=function(){var e=r.register.month,t=r.register.day,n=r.register.year;return new moment(e+"-"+t+"-"+n,c.dateFormat)},p=$("#dateOfBirthShowMode"),h=$("#dateOfBirthEditMode");r.isLoadingDateOfBirth=!0,e.$on(s,function(){r.userProfile.DateOfBirth||r.openForm()}),e.$on(a,function(){r.closeForm()}),r.openForm=function(){p.hide(),h.slideDown(),t.openDateOfBirthForm()},r.closeForm=function(){h.slideUp(),p.slideDown("10")},r.dateOfBirthValidation=i.createValidationModel(),r.register=r.register||{day:"",month:"",year:""},r.$watchGroup(["register.month","register.day","register.year"],function(){var e=new Date(r.register.year,r.register.month,0).getDate();e<=r.register.day&&(r.register.day=e.toString())}),r.comboData={days:[],months:[],years:[]},r.comboData.days=l.getDateOfBirthSelectValues(1,31),r.comboData.months=l.getDateOfBirthSelectValues(1,12),r.comboData.years=l.getDateOfBirthSelectValues(c.currentYear,c.currentYear-100),r.hasUserData=function(){return r.isLoadingDateOfBirth&&(r.userProfile=t.loadUserProfile(),r.userProfile)&&(u(),r.userProfile.DateOfBirth||r.openForm(),r.isLoadingDateOfBirth=!1),r.userProfile},r.resetDateOfBirth=function(){r.closeForm(),r.dateOfBirthForm.$setPristine(),r.dateOfBirthForm.$pristine=!0,u(),i.clearErrors(r.dateOfBirthValidation)},r.updateDateOfBirth=function(){var e=d(),t=new moment(r.userProfile.DateOfBirth);return e.isSame(t)?(r.closeForm(),(t=n.defer()).resolve(),t.promise):(i.clearErrors(r.dateOfBirthValidation),o.updateDateOfBirth({dateOfBirth:e.format(c.dateFormat)}).then(function(){r.userProfile.DateOfBirth=e.toISOString(),r.resetDateOfBirth(),u()},function(e){r.dateOfBirthForm.$submitted=!1,i.handleResponse(r.dateOfBirthValidation,e)}))},r.isDateValid=function(){return d().isValid()}}]),angular.module("gmgApp").controller("ErrorModalController",["$scope",function(r){var i=$("#moreinfo-modal");r.$on("openModal",function(e,t,n){t=t,r.header=n,r.text=t,i.modal("show")})}]),angular.module("gmgApp").controller("FacebookLoginCallbackController",["$scope","$window","ApiService","Utils",function(e,t,n,r){r=r.getQueryString(t.location.href);n.facebookLoginCallback(r.returnUrl).then(function(e){t.location.href=e.data})}]),angular.module("gmgApp").controller("FooterController",["$rootScope","$scope","$http","LanguageService","MODALS","modalService","$window",function(t,n,r,i,o,a,s){n.newsletterEmail={},n.clearSpinnerOnSuccess=!0,n.currentLanguageCode=i.getCurrentLanguageCode();function l(){n.error=!1,n.invalidEmail=!1,n.subscribedSuccess=!1;var e=document.getElementById("trustbox");null!=s.Trustpilot&&null!=e&&s.Trustpilot.loadFromElement(e)}function c(){n.error=!0,n.invalidEmail=!1,n.subscribedSuccess=!1}l();n.displaySocialModal=function(e){a.socialModalImageUrl=e,t.$broadcast(o.EVENTS.OPEN_SOCIAL_MODAL)},n.subscribe=function(e){var t={email:n.newsletterEmail.email};return l(),r({method:"POST",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},data:t}).then(function(e){var t=e.data.status;if(t){if("ok"===t)return n.subscribedSuccess=!0,n.invalidEmail=!1,void(n.error=!1);if("error"===t)return n.invalidEmail=!0,n.subscribedSuccess=!1,void(n.error=!1)}return c(),e.data},function(e){return c(),e.data}).finally(function(){n.spinning=!1})},n.changeLanguage=function(e){n.currentLanguageCode=e,i.setLanguage(e)},n.scrollDown=function(){$("#language").on("shown.bs.collapse",function(e){$("html,body").animate({scrollTop:$("#language").offset().top},"slow")})}}]),angular.module("gmgApp").controller("FormTextFieldController",["$scope",function(e){e.errorState=!1;e.checkError=function(e){0},$(".fieldInput").on("change keyup",function(){var e,t;t="#fieldLabel-"+(e=this).id,t=$(t),0<$(e).val().length?t.css("display","block"):t.css("display","none")})}]),angular.module("gmgApp").controller("GameAreaChartsController",["$scope","ObjectValidator","STATS_HISTORY_LOADED","pdpChartsService","$window",function(a,s,l,o,c){function u(e,t,n,r,i,o){if(!e||0===e.length)return[];for(var a,s,l=[],c=0;c<r;c++){switch(c){case 0:a=i;break;case r-1:a=o;break;default:a=""}for(var u=t-n*c,d=0,p=e.length-1;1<p-d;){var h=Math.floor((d+p)/2);e[h][0]<u?d=h:p=h}s=u-e[d][0]<=e[p][0]-u?e[d]:e[p],l[c]=Math.abs(s[0]-u)>n?{label:a}:{label:a,toolText:s[1],value:s[1]}}return l}function d(e){if(e)if((e=>{if(e&&0<e.length)for(var t=0;t<e.length;t++)if(e[t]&&0<e[t].length&&0<e[t][1])return!0;return!1})(e)){var t=[];if(t[0]=u(e,Date.now(),36e5,25,"0",a.chartModes[0]),t[1]=u(e,Date.now(),36e5,49,"0",a.chartModes[1]),t[2]=u(e,Date.now(),36e5,169,"0",a.chartModes[2]),t[3]=u(e,Date.now(),864e5,31,"0",a.chartModes[3]),t[4]=u(e,Date.now(),864e5,92,"0",a.chartModes[4]),t[5]=u(e,Date.now(),26298e5,7,"0",a.chartModes[5]),t[6]=u(e,Date.now(),26298e5,13,"0",a.chartModes[6]),(e=>{if(e&&0<e.length)for(var t=0;t<e.length;t++)if(e[t]&&0<e[t].length)for(var n=0;n<e[t].length;n++)if(0<e[t][n].value)return!0;return!1})(t)){a.loading=!0,a.display=!0;for(var n={showShadow:"0",showValues:"0",labelDisplay:"none",baseFont:"rawline, Arial",baseFontColor:"#E8E5E0",baseFontSize:"12",xAxisName:p.timeLabel,xAxisNameFontSize:"14",yAxisName:p.playersLabel,yAxisNameFontSize:"14",paletteColors:"#00e205",bgAlpha:"0",canvasBgAlpha:"0",showBorder:"0",showCanvasBorder:"0",plotBorderAlpha:"10",usePlotGradientColor:"1",plotGradientColor:"#003800",plotFillAlpha:"90",plotFillAngle:"90",showXAxisLine:"1",divLineAlpha:"100",divLineColor:"#999999",showAlternateHGridColor:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderColor:"#FFFFFF",toolTipBorderRadius:"2",toolTipPadding:"5"},r=[],i=0;i<a.chartModes.length;i++)r[i]={},$.extend(r[i],n);o.disposeCharts(),c.FusionCharts.ready(function(){for(i=0;i<a.chartModes.length;i++){var e=new FusionCharts({type:"area2d",renderAt:"chart-container-"+i,width:"100%",height:"300",dataFormat:"json",dataSource:{chart:r[i],data:t[i]}});e.setTransparent(!0),e.render(),o.addToPdpCharts(e)}a.loading=!1})}else a.display=!1,a.loading=!1}else a.display=!1,a.loading=!1;else a.display=!1,a.loading=!1}var p={hourAbbreviation:"h",dayAbbreviation:"d",monthAbbreviation:"M",playersLabel:"Players",timeLabel:"Time"};a.init=function(e,t,n,r,i){s.isNullOrEmptyString(e)||(p.hourAbbreviation=e),s.isNullOrEmptyString(t)||(p.dayAbbreviation=t),s.isNullOrEmptyString(n)||(p.monthAbbreviation=n),s.isNullOrEmptyString(r)||(p.playersLabel=r),s.isNullOrEmptyString(i)||(p.timeLabel=i),a.chartMode=0,a.chartModes=["24"+p.hourAbbreviation,"48"+p.hourAbbreviation,"7"+p.dayAbbreviation,"30"+p.dayAbbreviation,"3"+p.monthAbbreviation,"6"+p.monthAbbreviation,"12"+p.monthAbbreviation];var o=a.$on(l,function(e,t){d(t)});a.$on("$destroy",function(){o()})}}]),angular.module("gmgApp").controller("GameGiftingHistoryController",["$scope","ApiService",function(n,e){function t(t){e.gameGiftingHistory(r).success(function(e){t?Array.prototype.push.apply(n.games,e.GiftGameDetailsDtos):n.games=e.GiftGameDetailsDtos,n.showLoadMore=e.LoadMore,r=e.Pagination,n.IsGameGiftExists=0===e.GiftGameDetailsDtos.length}).finally(function(){n.gamesLoading=!1})}var r;n.showLoadMore=!1,n.gamesLoading=!0,n.IsGameGiftExists=!1;t(!(n.loadMore=function(){return t(!0)}))}]),angular.module("gmgApp").controller("GameGiftRedemptionBlockController",["$scope","$rootScope","$timeout","ObjectValidator","ApiService","UserCookie","Utils","ErrorHandler","$http","User","GAME_GIFTING","$document","$location","$window","UPLAY_CONSTANTS","newsletterOptInService",function(i,e,t,o,n,r,a,s,l,c,u,d,p,h,f,m){function g(e,t,n){var r;i.isThirdPartyRedemption?(r=e,i.redemptionError=r):(i.isError=!0,(r=!o.isNullOrEmptyString(e)&&-1!==e.indexOf(E.WARNING_PLACEHOLDER))&&(i.isError=!1,e=a.removeWarningPlaceHolder(e)),e=e.split(E.MESSAGE_SEPARATOR)[0],s.handleError(i,e,t,n,!0,r),C.modal(E.HIDE))}function v(e){if(i.gameDetails=e,i.userName=e.UserName,i.redemptionInstructions=i.gameDetails.RedemptionInstructions,i.isDetailsReload=i.gameDetails.HasBeenRedeemed,h.boxId=e.BoxId,i.isDetailsReload)return i.redeem();t(function(){C.modal(E.SHOW)},0)}function y(){i.isError=!1,s.clearErrors(i,!0)}function b(e){i.congratulationsMessage=S.replace(E.GENERIC_PLACEHOLDER,i.gameDetails.Name),i.isDetailsReload||C.modal(E.HIDE),angular.element(_.KEY_DISPLAY_MODAL).modal(E.SHOW);var t=(e=>{var t=[];if(!o.isNullOrUndefined(e))for(var n in e)e.hasOwnProperty(n)&&t.push({Label:n,GameKey:e[n]});return t})(e.GameKeys);i.gameKeys=t,i.missingGameKeys=e.MissingGameKeys,i.isGreenCode=e.IsGreenCode,i.hasNoKeyGroups=(o.isNullOrUndefined(i.missingGameKeys)||0===i.missingGameKeys.length)&&(o.isNullOrUndefined(i.gameKeys)||0===i.gameKeys.length)}var S,_=u.SELECTORS,E=u.CONSTANTS,C=angular.element(_.GAME_DETAILS_MODAL);i.parentControllerHasAlreadyGotGameDetails=!o.isNullOrUndefined(i.$parent.gameDetails),i.showBlockHeading=!1,i.isThirdPartyRedemption=!1,i.isSignedIn=!1,i.isRedeeming=!1,i.isError=!1,i.giftCode="",i.gameKeys={},i.missingGameKeys={},i.hasNoKeyGroups=!1,i.newsletterCheckbox=m.getNewsletterCheckbox(),i.newsletterCheckboxClicked=function(){i.newsletterCheckbox=!i.newsletterCheckbox,m.setNewsletterCheckbox(i.newsletterCheckbox)},i.gameDetails={ImageUrl:"",Name:"",Platform:"",Drm:"",Region:""},angular.element(_.KEY_DISPLAY_MODAL).on("shown.bs.modal",function(){d.find("body").addClass("modal-open")}),i.gameGiftPattern=u.GAME_GIFT_PATTERN,i.init=function(e,t,n){o.isNullOrEmptyString(e)||(S=e),o.isNullOrEmptyString(t)||(i.showBlockHeading=t===E.TRUE),o.isNullOrEmptyString(n)||(i.isThirdPartyRedemption=n===E.TRUE)},c.getWhenReady().then(function(e){!o.isNullOrUndefined(e)&&e.isAuthenticated&&(i.isSignedIn=!0)}),i.getGameDetails=function(e){return o.isNullOrUndefined(e)&&(e=i.giftCode),y(),h.giftCode=e,n.getGameDetails(e).success(v).error(g)};if(i.redeem=function(e){return o.isNullOrUndefined(e)&&(e=i.gameDetails.GiftCode),y(),n.redeemGift(e,m.getNewsletterCheckbox()).success(b).error(g)},i.cancelRedemption=function(){e.$broadcast(u.THIRD_PARTY.REDEMPTION_CANCELLED)},i.logOut=function(){n.logout().then(function(){C.modal(E.HIDE),d.find("body").removeClass("modal-open"),r.delete(),e.$broadcast(u.THIRD_PARTY.LOGOUT)})},angular.element(_.CODE_INPUT).on(E.KEYPRESS,function(){y()}),i.parentControllerHasAlreadyGotGameDetails&&(v(i.$parent.gameDetails),i.isDetailsReload))return i.redeem();c=p.search()[f.AUTO_TRIGGER_UPLAY_POPUP_ON_PAGE_LOAD],p=p.search()[f.GIFT_CODE_QUERY_STRING_PARAMETER],c&&i.getGameDetails(p).then(function(){i.redeem()})}]),angular.module("gmgApp").controller("GameLibraryController",["$scope","ApiServiceMock","ApiService","User","$window","GAME_LIBRARY_SORT_ORDER","GAME_LIBRARY_ORDER_TO_INT","GAME_LIBRARY_CONSTANTS","Utils","ObjectValidator",function(a,e,r,s,l,c,u,d,t,n){a.returnUrl=t.getExternalLoginReturnUrl(),a.go=t.redirect,a.model=[],a.lastBookmark="",angular.module("infinite-scroll").value("THROTTLE_MILLISECONDS",1e3),a.getOwnedGames=function(){if(a.bookmark===a.lastBookmark&&""!==a.bookmark)return null;a.lastBookmark=a.bookmark,a.loaded=!1,r.gamerDetails({id:"1",method:"Gamer.LibraryOrdered",params:[{by:a.order,steamId:a.steamId,limit:a.limit,bookmark:a.bookmark,descending:a.descending}]}).then(function(e){e=n.isNullOrUndefined(e)||n.isNullOrUndefined(e.data)?null:e.data;return n.isNullOrUndefined(e)||n.isNullOrUndefined(e.result)||n.isNullOrUndefined(e.result.value)||(a.bookmark=e.result.value.bookmark,a.totalGames=e.result.value.totalGames),a.fillModel(e),a.loaded=!0,e})};function i(e){var t;null!==e.result.value.games?e.result.value.games.length<=0?!0===a.isFirstTime&&(a.isEmpty=!0):(a.isEmpty=!1,o(t=e).then(function(e){var n=e.data;angular.forEach(t.result.value.games,function(e){var t=h(e.appId,n),e={title:e.title,lastPlayed:e.lastPlayed,playtimeTotal:e.playtimeTotal,achievements:e.achievements,achievementsPossible:e.achievementsPossible,appId:e.appId,pdpLink:t};a.model.push(e)})})):(0===a.totalGames&&(a.isEmpty=!0),a.loaded=!1)}function p(e,t){return e+t+(1===parseInt(e)?"":"s")}var o=function(e){var t=[],n=[];return 0<e.result.value.games.length&&(angular.forEach(e.result.value.games,function(e){n.push(e.appId)}),t=r.postPdpUrlsFromAppIds(n)),t},h=function(e,t){for(var n=0;n<t.length;n++)if(parseInt(t[n].SteamAppId)===e)return t[n].PdpUrl;return null};a.fillModel=function(e){i(e)},a.getYourProgressBar=function(e,t){return 0===t?0:(e/t*100).toFixed(0)},a.getYourProgressMessage=function(e,t){e=a.getYourProgressBar(e,t);return 0===e?d.NOT_AVAILABLE:e+"%"},a.getTimeMessage=function(e){var t,n;return 0===e?d.NOT_TRACKED:(t=moment.duration(e,"minutes").asHours(),t=Math.floor(t),e=moment.duration(60*e*1e3).minutes(),n="",0<t&&(n+=p(t,"hr")),0!==e&&(0<t&&0<e&&(n+=" "),0<e)&&(n+=p(e,"min")),n)},a.getLastTimePlayedMessage=function(e,t){var n,r,i,o,a,s,l,c;return 0===e?d.NOT_TRACKED:0===t?d.NOT_AVAILABLE:(t=moment(new Date),n=moment(e),t=t.diff(n),n=moment.duration(t).minutes(),r=moment.duration(t).hours(),i=moment.duration(t).weeks(),o=moment.duration(t).days()-7*i,a=moment.duration(t).months(),t=moment.duration(t).years(),s=0,l="",c=function(e,t){s++,l+=p(e,t),1===s&&(l+=", "),2===s&&(l+=" ago")},t<1&&a<1&&i<1&&o<1&&r<1&&n<1?moment(e).fromNow():(0<t&&c(t,"yr"),0<a&&c(a,"mo"),0<i&&s<2&&c(i,"wk"),0<o&&s<2&&c(o,"day"),0<r&&s<2&&c(r,"hr"),0<n&&s<2&&c(n,"min"),l))},a.redirect=function(e){e&&(l.location.href=e)};a.changedValue=function(e){a.order=c[e.id],a.descending=e.id!==u.NAME,a.loaded=!1,a.bookmark="",a.model=[],a.getOwnedGames()},l.onbeforeunload=function(){l.scrollTo(0,0)},a.initialization=function(n,r){var i=l.profileUsername,o=l.isProfilePublic;s.getWhenReady().then(function(){var e,t=s.get().username===i;t||o?(e=l.profileSteamId,a.steamId=e,a.limit=n,a.order=c[u.LASTPLAYED],a.descending=!0,a.isFirstTime=!0,a.orderByList=[{id:u.NAME,name:r.sortAlphabeticallyLabel},{id:u.PLAYTIME,name:r.sortByTimePlayedLabel},{id:u.LASTPLAYED,name:r.sortByLastPlayedTimeLabel}],a.orderBySelected=a.orderByList[u.LASTPLAYED],a.isCurrentLoginUser=t,a.doesSteamIdExist=e&&0<e.length,a.doesSteamIdExist&&(a.bookmark="",a.getOwnedGames(),a.isFirstTime=!1)):a.hidden=!0})}}]),angular.module("gmgApp").controller("GameOwnershipRestrictionsBlockController",["$scope","ApiService","ObjectValidator","User",function(n,r,i,o){n.init=function(e){var t;i.isNullOrUndefined(e)||(e=JSON.parse(e),t=e,o.getWhenReady().then(function(e){i.isNullOrUndefined(e)||i.isNullOrEmptyString(e.username)?n.isLoading=!1:r.hasAnyOwnedGames(t).then(function(e){n.ownsGame=e.data,n.isLoading=!1})}))},n.ownsGame=!1,n.isLoading=!0}]),angular.module("gmgApp").controller("GameRedemptionAutoInjectController",["$scope","$window","$document","$timeout","GAME_GIFTING","ApiService",function(t,n,r,i,o,a){t.injectCode=function(e,t){localStorage.ThirdPartyRedemptionCode=e,localStorage.ThirdPartyRedemptionAutoInjection=!0,localStorage.ThirdPartyRedemptionLanguageCode=t,a.switchLanguageContext(localStorage.ThirdPartyRedemptionLanguageCode).then(function(e){"en"!==localStorage.ThirdPartyRedemptionLanguageCode.toLowerCase()?n.location.href="/"+localStorage.ThirdPartyRedemptionLanguageCode+o.THIRD_PARTY.URL:n.location.href=o.THIRD_PARTY.URL})},t.closeWindow=function(){n.close()},t.errorHandler=function(){var e=angular.element("#error-block-container");t.error=JSON.parse(localStorage.ThirdPartyRedemptionError),i(function(){e.modal("show")}),e.on("shown.bs.modal",function(){r.find("body").addClass("modal-open")})}}]),angular.module("gmgApp").controller("GameStatsController",["$scope","$rootScope","ApiService","STATS_MAX_COST_PER_HOUR","pdpProductService","ObjectValidator","PDP_SECTION_ON_LOAD_EVENT","GAME_STATS_METHOD","STATS_HISTORY_LOADED",function(d,n,r,c,i,p,o,a,h){d.statsLoaded=!1,d.unavailableStats=!1,d.stats={};function u(){d.product=i.getPdpProduct();var e=d.product.mainCommunityProductDetails.steam_app_id,t=d.product.sku,e={id:1,method:a,params:[{appId:parseInt(e)}]};m=d.product.price,r.wantsForGame(t).then(function(e){d.stats.wishlist=e.data,d.stats.wishlistFormated=e.data.toLocaleString()}),0===e.params[0].appId?(d.unavailableStats=!0,d.display=!1,d.loading=!1,d.statsLoaded=!0,n.statsAppIdIsNotValid=!0,n.$broadcast(o.STATS)):r.getGameStats(e).success(function(e){var t=e;if(p.isNullOrUndefined(t)||p.isNullOrUndefined(t.result)||p.isNullOrUndefined(t.result.value)||p.isNullOrUndefined(t.result.value.steamAppStats))d.unavailableStats=!0;else{for(var n=t.result.value.steamAppStats,t=n.minutes_played||0,r=n.players||0,t=t/r,i=0,o=n.hotcoffee_game_schema.game.availableGameStats.achievements||[],a=o.length,s=a*r,l=0;l<a;l++){var c=o[l],u=n.achievement_counts[c.name]||0;i+=c.numEarned=u,c.percentageEarned=u/r*100}d.stats.numPlayers=r.toLocaleString(),t<60?(d.stats.averageTimePlayed=t.toFixed(1),d.stats.averageTimePlayedInHours=!1):(d.stats.averageTimePlayed=(t/60).toFixed(1),d.stats.averageTimePlayedInHours=!0),0<d.stats.averageTimePlayed?(d.stats.costPerHour=(m/(t/60)).toFixed(2),d.stats.showCostPerHour=d.stats.costPerHour<f):d.stats.showCostPerHour=!1,d.stats.totalAchievementsEarned=i,d.stats.MonthlyPlayers=n.monthly_players.toLocaleString(),d.stats.averageEarned=0==s?0:(i/s*100).toFixed(0),0<a&&(d.stats.achievements=o,d.stats.displayedAchievements=[o[0]],y())}(t=e)&&t.result&&t.result.value&&t.result.value.currentPlayers&&t.result.value.currentPlayers.history?null!==(t=t.result.value.currentPlayers.history)&&d.$broadcast(h,t):(d.display=!1,d.loading=!1)}).error(function(){d.unavailableStats=!0,d.display=!1,d.loading=!1}).complete(function(){d.statsLoaded=!0,n.$broadcast(o.STATS)})}var f=d.loadMore=0,m=0,g=0,v=d.loadMoreText="",y=function(){d.loadMore=Math.min(g,d.stats.achievements.length-d.stats.displayedAchievements.length),d.loadMoreText=v.replace("{0}",d.loadMore)};d.loadMoreAchievements=function(){var e=d.stats.displayedAchievements.length,e=d.stats.achievements.slice(e,e+d.loadMore);Array.prototype.push.apply(d.stats.displayedAchievements,e),y()},d.init=function(e,t,n,r,i,o,a,s,l){f=c[e]||0,g=n||0,v=r||"",u()}}]),angular.module("gmgApp").controller("GameTaggingController",["$scope",function(e){e.showAddTagsSection=!1,e.isFocus=!1}]),angular.module("gmgApp").controller("GameViewController",["$scope","$element","ApiService","LanguageService","Product","$timeout","dynamicWidthService","tealiumLoggingService",function(i,o,r,a,s,l,c,u){function d(e,t){e&&(i.product=e,i.$parent.isSharedGameView&&(i.$parent.product=i.product),p)&&t&&i.$parent.setClonesProduct&&i.$parent.setClonesProduct(p,e,i.products)}var p;i.initialize=function(e,t){d(s.productFromEdition(e,t.SecondaryPlatformNames,t.SecondaryPlatformIds,t));e=o.closest("[index]");e.length&&(p=angular.element(e[0]).attr("index"),i.$on("set-game-view-product",function(e,t,n,r){t===p&&(d(n),r)&&(i.products=r)}),i.$on("set-game-view-loading",function(e,t,n){var r;t===p&&(t=angular.element(o[0].querySelector(".drm-buttons")),(r=angular.element(o[0].querySelector(".drm-buttons .spinning"))).css("line-height",t.outerHeight()+"px"),r.css("min-height",t.outerHeight()),i.apiCallStarted=!!n,i.apiCallFinished=!n)}))},i.changeVariant=function(t,e){var n=o[0].querySelector(".drm-button.active").dataset.drmName;i.product.sku===t||i.apiCallStartedSwitchDrm&&!i.apiCallFinishedSwitchDrm||(u.logDrmButtonClicked(t,n,e),o[0].querySelector(".release-date").style.visibility="hidden",i.apiCallFinishedSwitchDrm?(d(i.products.find(function(e){return e.sku===t}),!0),l(function(){c.setDynamicWidthToAllDiv(".release-date")})):i.apiCallStartedSwitchDrm||(n=angular.element(o[0].querySelector(".drm-buttons")),(e=angular.element(o[0].querySelector(".drm-buttons .spinning"))).css("line-height",n.outerHeight()+"px"),e.css("min-height",n.outerHeight()),i.apiCallStartedSwitchDrm=!0,p&&i.$parent.setClonesLoading&&i.$parent.setClonesLoading(p,!0),r.pdpDetails({GameVariantCodes:[t],LanguageCode:a.getCurrentLanguageCode(),VariableCornerFlash:!0}).then(function(e){i.products=s.initForPdp(e.data),i.apiCallFinishedSwitchDrm=!0,p&&i.$parent.setClonesLoading&&i.$parent.setClonesLoading(p,!1);e=i.products.find(function(e){return e.sku===t});e&&(d(e,!0),l(function(){c.setDynamicWidthToAllDiv(".release-date")}))})))}}]),angular.module("gmgApp").controller("GdprOptInOptOutController",["$scope","$window","ApiService","httpResponseInterceptor",function(t,e,n,r){t.spinnerIsActivatedOptIn=!1,t.spinnerIsActivatedOptOut=!1,t.thankYou=!1,t.changeSetting=function(e){return n.gdprUpdateNewsletterOptIn(e).then(function(){t.thankYou=!0},function(e){r.responseError(e)})}}]),angular.module("gmgApp").controller("GiftCardHistoryController",["$scope","ApiService","User","ObjectValidator","$q","$rootScope","GIFTCARD_REDEEMED",function(n,e,t,r,i,o,a){n.load=function(){var t=i.defer();return n.spinning=!0,e.giftcardRedemptionHistory(n.startKeyDocId,n.date).then(function(e){r.isNullOrUndefined(e)||r.isNullOrUndefined(e.data)||(Array.prototype.push.apply(n.cards,e.data.GiftCards),l(),n.loadMore=e.data.LoadMore),n.spinning=!1,n.blockSpinner=!1,t.resolve()}),t.promise};function s(){n.cards=[],n.loadMore=!1,n.blockSpinner=!0,l(),n.load()}var l=function(){var e;r.isNullOrUndefined(n.cards)||0===n.cards.length?(n.startKeyDocId="",n.date=""):(e=n.cards[n.cards.length-1],n.startKeyDocId=e.OrderId,n.date=e.Date)},o=o.$on(a,function(){s()});n.$on("$destroy",o),s()}]),angular.module("gmgApp").controller("GlobalMessageBarController",["$scope","GlobalMessageBarService","$location","ObjectValidator","ApiService","ErrorHandler","ADYEN_PENDING_QUERY_STATUS_STRING_VALUE","BOA_COMPRA_RETURN_QUERY_STRING","ADYEN_RETURN_QUERY_STATUS_STRING","ADYEN_SUCCESS_QUERY_STATUS_STRING_VALUE","ACCOUNT_ACTIVATED",function(r,e,t,i,n,o,a,s,l,c,u){r.msgBar=e.globalMessage;function d(e,t){n.customMessage({key:e}).success(function(e){p(!0,e.Message,t)}).error(function(e,t,n){o.handleResponse(r,{data:e,status:t,headers:n})})}var p=function(e,t,n){i.isNullOrEmptyString(t)||(r.msgBar.visible=e,r.msgBar.message=t,r.msgBar.isError=n,r.msgBar.isErrorOnModal=-1!==window.location.href.indexOf("openModal"))};t.search().hasOwnProperty(u)&&p(!0,window.GMGSettings.accountActivatedText,!1);e=t.search().cMsg,t.search().hasOwnProperty(s)&&d(t.search()[s],!1),t.search().hasOwnProperty(l)&&(u=t.search()[l],d(u,c!==u&&a!==u)),i.isNullOrEmptyString(e)||"e"!==e.charAt(0)&&"i"!==e.charAt(0)||d(e.substring(1),"e"===e.charAt(0))}]),angular.module("gmgApp").controller("GreenGuardModalController",["$scope","ApiService","ErrorHandler","$location","$window","GREEN_GUARD_MODAL_URL",function(r,e,i,t,n,o){r.verification={},r.showInstructions=!0,r.showEmailSent=!1,r.showTooManyAttemptsError=!1,r.allowGreenGuard=!1,r.openModal=function(){(a=a||$("#green-guard-modal")).modal("show")},r.url=o;var a=null;r.$on("openGreenGuardModal",function(e,t,n){r.allowGreenGuard=!0}),r.verifyCode=function(){return e.greenGuardVerifyUser(r.verification.newCode).success(function(e){!0===e?(-1<(e=t.path()).indexOf("?")?e+="&":e+="?",n.location.href=e+="verified=true"):(r.showTooManyAttemptsError=!0,r.showInstructions=!1)}).error(function(e,t,n){i.handleResponse(r,{data:e,status:t,headers:n})})},r.resendCode=function(){e.greenGuardResendCode().then(function(){r.showInstructions=!1,r.showEmailSent=!0})}}]),angular.module("gmgApp").controller("HeaderController",["$rootScope","$scope","$location","ApiService","MODALS","Basket","$window","User","UserCookie","GlobalMessageBarService","QuickSearchResults","Utils","CommunityMenu","LanguageService","pdpGateService","ObjectValidator","$q","EVENTS","DESTROY_EVENT_NAME","$cookies","SCREEN_SIZE_BREAKPOINTS","dynamicWidthService",function(i,o,e,t,n,r,a,s,l,c,u,d,p,h,f,m,g,v,y,b,S,_){f.checkUrlAndCreateCookie();var f=c.globalMessage,E="#search-input",C=$("#algolia-search-modal"),w=$("#site-content-wrapper"),T=$("#navbar-collapse-mobile"),A=$("#algolia-mobile-initial-interaction-notice");function P(e){R(),$(E).blur()}i.searchFromHeader=function(){return $(E).val()},i.isFromHeader=!1,i.noResultFromAlgolia=!1,i.isAlgoliaSearchPage=function(){return 0<$("#algolia-search-page").length},o.currentLanguageCode=h.getCurrentLanguageCode(),o.algoliaModalOpen=!1;function O(){var e=o.quickSearch.query||"";return encodeURI(e.replace(/["#%&*+/:<=>?\\|]/g," ").replace(/\s+/g," ").trim().replace(/[\s.]+$/,""))}var I,R=function(e){window.innerWidth<=S.TABLET&&(A.removeClass("open"),$("body").removeClass("modal-open"),window.removeEventListener("touchmove",P))},c=(i.isAlgoliaSearchPage()||$(E).focus(function(e){window.innerWidth<=S.TABLET&&(A.addClass("open"),T.collapse("hide"),$("body").addClass("modal-open"),window.addEventListener("touchmove",P,{passive:!1}))}).blur(R),o.closeAlgoliaModal=function(){i.$broadcast(n.EVENTS.CLOSE_ALGOLIA_SEARCH_MODAL),C.css({position:"fixed"}),w.css({display:"block"}),$("html, body").scrollTop(I),o.algoliaModalOpen=!1,i.isFromHeader=!1,o.quickSearch.query="",C.removeClass("open in")},o.openAlgoliaModal=function(){I=$(window).scrollTop(),i.$broadcast(n.EVENTS.OPEN_ALGOLIA_SEARCH_MODAL),o.algoliaModalOpen=!0,C.one("transitionend",function(){C.css({position:"relative"}),w.css({display:"none"}),R()}),$(document).one("keyup",k)},o.communityPadding=function(){return p.isCommunityPage?"community-pages":""},e.search().cartExpired),M=e.search().currencyChanged,D=e.search().cartEmpty,e=e.search().verified,N=(o.selectedIndex=-1,o.quickSearchResults=u,o.userLoading=!0,"true"!==c&&"true"!==M&&"true"!==D||(f.visible=!0,f.hideClose=!1,f.isError=!1,"true"===c?f.message="Unfortunately your basket has expired. ":"true"===M?f.message="Unfortunately your currency has changed. ":"true"===D&&(f.message="Unfortunately your basket is empty. "),f.message+="If you still wish to place your order, please add the game(s) to your basket again and complete your order."),"true"===e&&(f.visible=!0,f.hideClose=!1,f.isError=!1,f.message="Thank you! Your account has been successfully verified."),l.init(),o.returnUrl="?returnUrl="+d.getExternalLoginReturnUrl(),o.basket=r.get(),s.getWhenReady().then(function(e){o.userLoading=!1,(o.user=e).isAuthenticated&&("/"===(e=new URL(a.location.href)).pathname||e.pathname.includes("/games/"))&&t.logoutIfCognitoEnabledAndUserNotMigrated().then(function(e){!0===e.data&&(l.delete(),a.location.href="/sign-in")})}),o.displaySignUpModal=function(){i.$broadcast(n.EVENTS.OPEN_SIGN_UP_MODAL)},o.displaySignInModal=function(){i.$broadcast(n.EVENTS.OPEN_SIGN_IN_MODAL)},o.checkKey=function(e,t,n){e=e||window.event,3<=t.length&&n(),38===e.keyCode?-1<o.selectedIndex&&(o.selectedIndex=o.selectedIndex-1):40===e.keyCode&&o.selectedIndex<o.quickSearch.results.length-1&&(o.selectedIndex=o.selectedIndex+1)},o.hoverSearchItem=function(e){o.selectedIndex=e},o.trackQuickSearchHit=function(e){return m.isNullOrEmptyString(e.searchHitId)||m.isNullOrEmptyString(o.quickSearch.trackId)||m.isNullOrEmptyString(o.quickSearch.query)?g.resolve():(e={hitId:e.searchHitId,trackId:o.quickSearch.trackId,query:o.quickSearch.query},t.trackSearchHit(e))},o.quickSearch={results:[],query:"",execute:function(){var e;i.isAlgoliaSearchPage()||(o.selectedIndex=-1,e=O(),!o.algoliaModalOpen&&e.length<3)||(o.algoliaModalOpen&&!e?o.closeAlgoliaModal():(i.isFromHeader=!0,o.algoliaModalOpen||(o.openAlgoliaModal(),C.on("shown.bs.modal",function(){C.css({"padding-right":"0"}),$(window).resize(function(e){0<C.length&&C.css({"padding-right":"0"})})}))))},onEnter:function(){var e,t=o.quickSearch.results.length,n=$(E).val(),r=-1<o.selectedIndex,t=1===t&&o.quickSearch.query===n;r||t?(e=t?o.quickSearch.results[0]:o.quickSearch.results[o.selectedIndex],o.trackQuickSearchHit(e).then(function(){window.location.href=e.pageUrl})):(o.quickSearch.query=n,(r="")===(r=void 0!==i.getAlgoliaQueryString?i.getAlgoliaQueryString():r)&&""!==n&&(r="?query="+O()),a.location.href="/search"+r)},loading:!1},o.logout=function(){t.logout().then(function(){l.delete(),a.location.href="/"})},o.changeLanguage=function(e){o.currentLanguageCode=e,h.setLanguage(e)},o.$on(v.RELOAD_BASKET,function(){t.getUserInfo().then(function(e){o.basket=r.get(),o.basket.applyApiBasketData(e.data.Basket)})})),k=function(e){"Escape"==e.key&&o.closeAlgoliaModal()};o.$on(y,function(){N()}),o.init=function(e){o.isAlgoliaModalHeader=e},$(window).bind("load",function(){_.setDynamicWidthToAllDiv(".release-date")}),$(window).resize(function(e){_.setDynamicWidthToAllDiv(".release-date")})}]),angular.module("gmgApp").controller("HiddenKeyActivationModalBlockController",["$scope","DESTROY_EVENT_NAME","HIDDEN_KEY_CONSTANTS","HiddenKeyRedemptionFactory","modalService",function(n,e,t,r,i){function o(){return n.isSuccessful=!1,n.attemptMade=!1,n.authenticationFailed=!1,i.hidePromise(a)}var a=null,s={},l=(n.userInfo={},n.attemptMade=!1,n.isSuccessful=!1,n.authenticationFailed=!1,n.$on(t.BROADCAST_OPEN_HIDDEN_KEY_MODAL,function(e,t){t.keyRedemptionPlatform.toLowerCase()===n.keyRedemptionPlatform.toLowerCase()&&(c(s=t),a.modal({backdrop:"static",keyboard:!1}))})),c=(n.cancel=o,n.continue=o,n.close=o,n.$on(e,function(){l()}),n.switchUser=function(){o().then(function(){n.hiddenKeyRedemption.switchUser(s.returnUrl).then(function(e){s.userInfo=e,n.userInfo=e,a.modal({backdrop:"static",keyboard:!1})})})},n.setModal=function(e,t){a=angular.element("#"+e),n.keyRedemptionPlatform=t,n.hiddenKeyRedemption=r.GetHiddenKeyRedemption(t),n.hiddenKeyRedemption.init(n)},function(e){s=e,n.gameInfo=s.gameInfo,n.userInfo=s.userInfo})}]),angular.module("gmgApp").controller("HiddenKeyController",["$scope","$window","$document","$location","$q","$timeout","hiddenKeyRedemptionService","Utils","HIDDEN_KEY_CONSTANTS","DESTROY_EVENT_NAME","PURCHASE_HISTORY_CONSTANTS","HiddenKeyRedemptionFactory","purchaseHistoryCountService","base64Service",function(i,n,o,t,a,e,r,s,l,c,u,d,p,h){var f=d.GetHiddenKeyRedemption(i.keyRedemptionPlatform),m=!1;function g(e){return{gameInfo:{sku:i.sku,name:i.gameName,image:i.gameImage,boxId:i.boxId,keyName:i.keyName},userInfo:e,keyRedemptionPlatform:i.keyRedemptionPlatform,returnUrl:window.location.href}}i.autoStartSpinning=!1,i.initializing=!1;function v(e){e=g(e),sessionStorage&&sessionStorage.removeItem(l.AUTO_TRIGGER_HIDDEN_KEY_MODAL_ON_PAGE_LOAD),t.search(u.BOX_ID_QUERY_STRING_PARAMETER,null),t.search(u.ITEMS_COUNT,null),r.broadcastOpenModal(e)}var y=i.$on(l.BROADCAST_HIDDEN_KEY_ACTIVATED,function(e,t){t.boxId===i.boxId&&t.keyname===i.keyName&&(i.redeemed=!0,i.username=t.username)});i.$on(c,function(){hiddenKeyOpenModalListener(),y()}),i.iconClass=f.iconClass,i.redeemHiddenKey=function(){var e,t;if(!i.redeemed)return i.redemptionInProgress=!0,t=i.returnUrl||n.location.href,sessionStorage&&(e=JSON.stringify(g(null)),sessionStorage.setItem(l.AUTO_TRIGGER_HIDDEN_KEY_MODAL_ON_PAGE_LOAD,e)),t=s.updateUrlParameter(t,u.BOX_ID_QUERY_STRING_PARAMETER,i.boxId),e=t=i.isYourPurchaseMode||i.isPurchaseHistoryMode?s.updateUrlParameter(t,u.ITEMS_COUNT,p.getBoxCount()):t,f.authorize(e).then(v).finally(function(){i.redemptionInProgress=!1})},e(function(){var t,e,n,r;!m&&sessionStorage&&(e=sessionStorage.getItem(l.AUTO_TRIGGER_HIDDEN_KEY_MODAL_ON_PAGE_LOAD))&&(t=JSON.parse(e)).keyRedemptionPlatform.toLowerCase()===i.keyRedemptionPlatform.toLowerCase()&&t.gameInfo.boxId===i.boxId&&(e=f.authorize(),n=t.gameInfo.boxId,r=a.defer(),i.isYourPurchaseMode||i.isPurchaseHistoryMode?(n=angular.element("#"+n),o.scrollToElement(n,400,1e3).then(function(){r.resolve()})):r.resolve(),n=r.promise,a.all([e,n]).then(function(e){m=!0,t.userInfo=e[0],v(t)}))})}]),angular.module("gmgApp").controller("HiddenKeyPrePurchasedController",["$scope","HiddenKeyRedemptionFactory",function(t,n){var r=null;t.autoTriggeringRedemption=!1,t.autoStartSpinning=!1,t.initializing=!0,t.authenticationFailed=!1,t.init=function(e){r=e,t.redeemed||(t.redemption=n.GetHiddenKeyRedemption(t.keyActivationPlatformId),t.redemption.prepurchaseInit(t,e).catch(function(){t.authenticationFailed=!0}).finally(function(){t.initializing=!1}))},t.retry=function(){return t.redemption.prepurchaseInit(t,r).then(function(){t.authenticationFailed=!1}).catch(function(){t.authenticationFailed=!0})}}]),angular.module("gmgApp").controller("HostedVideoController",["$scope","$window","PLAYER","JQUERY","OWN_HOSTED_VIDEOS","EVENTS",function(e,t,n,r,i,o){var a,s=i.SELECTORS,l=$(s.VIDEO_ASIDE).find(s.COLLAPSIBLE);e.isDescriptionContainerCollapsed=!1,videojs.plugin(n.TEXT_TRACK_PLUGIN,function(){this.on(n.PLAY,p),this.on(n.PAUSE,d)});function c(){var e=document.getElementById(s.OVERLAY_TEXT_ID);return angular.element(e)}var u=videojs(s.VIDEO_ELEMENT_ID,{},function(){}),d=function(e){(a=a||c()).show()},p=function(e){(a=a||c()).hide()},h=(e.collapse=function(){$(s.OVERLAY_BUTTON_CONTAINER).is(r.VISIBLE)&&(e.isDescriptionContainerCollapsed=!e.isDescriptionContainerCollapsed,(e.isDescriptionContainerCollapsed?h:f)())},function(){l.addClass(i.CLASS_NAMES.COLLAPSED)}),f=function(){l.removeClass(i.CLASS_NAMES.COLLAPSED)};angular.element(t).bind(o.RESIZE,function(){e.isDescriptionContainerCollapsed&&(f(),e.isDescriptionContainerCollapsed=!1)}),u.textTrackPlugin()}]),angular.module("gmgApp").controller("LazyVoucherOfferController",["$scope","ApiService","$location","User",function(t,n,e,r){t.spinning=!0,t.loadingUser=!0,t.isLoggedIn=!1,t.offerId=e.search().o;r.getWhenReady().then(function(e){t.loadingUser=!1,t.isLoggedIn=null!=e&&e.isAuthenticated,t.isLoggedIn&&n.redeemLazyVoucherOffer(t.offerId).success(function(e){e&&(t.voucherCode=e.Vouchercode,t.decodedUsername=e.Username)}).error(function(){t.error=!0}).finally(function(){t.spinning=!1})})}]),angular.module("gmgApp").controller("LazyVouchersController",["$scope","ApiService","$location","Utils",function(t,e,n,r){t.spinning=!0,t.offerId=n.search().o,t.token=n.search().t,t.queryUsername=n.search().u,t.decodedUsername=r.hexDecode(t.queryUsername);e.redeemLazyVoucher(t.offerId,t.token,t.queryUsername).success(function(e){e&&e.VoucherCode&&(t.voucherCode=e.VoucherCode)}).error(function(){t.error=!0}).finally(function(){t.spinning=!1})}]),angular.module("gmgApp").controller("LogGa4EventController",["$scope","tealiumLoggingService",function(i,o){i.blockId=0,i.blockTypeName="",i.init=function(e,t){i.blockId=e,i.blockTypeName=t},i.selectItemGaEvent=function(e,t,n,r){""!==n&&null!=n&&(i.blockId=n),""!==r&&null!=r&&(i.blockTypeName=r),o.logSelectItemClicked(e,t,i.blockId,i.blockTypeName)}}]),angular.module("gmgApp").controller("ModalController",["$rootScope","$scope","modalService","Utils","AgeVerificationService","MODALS","URL_PARAMETER_CONSTANTS","$window","$location","tealiumLoggingService",function(t,n,r,i,o,a,e,s,l,c){n.modal={modalTab:""},n.dialogClosing=function(){l.search()[e.RE_LOGIN_IN]&&(s.location.href=s.location.href.split("?")[0])},n.closeSignUpModalAndOpenTooYoung=function(){n.modalLoaded&&($(modalName).modal("hide"),t.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,a.TOO_YOUNG_MODAL_TYPE.REGISTRATION))},n.$on(a.EVENTS.CLOSE_SIGN_UP_MODAL_AND_SHOW_TOO_YOUNG,function(){n.closeSignUpModalAndOpenTooYoung()});function u(e){c.logSignInModalOpen(e),"#registerTab"===e&&o.hasUnderAgeCookie()?(t.$broadcast(a.EVENTS.CLOSE_SIGN_UP_MODAL),t.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,a.TOO_YOUNG_MODAL_TYPE.REGISTRATION)):$('a[data-toggle=tab][href="'+e+'"]').tab("show")}function d(t){var e=$("youtube-video iframe");Array.prototype.forEach.call(e,function(e){e.contentWindow.postMessage(JSON.stringify({event:"command",func:t}),"*")})}$(".modal").on("hidden.bs.modal",function(){0==$(".modal.in:visible").length&&d("playVideo")}),$(".modal").on("shown.bs.modal",function(){1<=$(".modal.in:visible").length&&d("pauseVideo")}),n.modal.openedModal=function(e){n.modal.modalTab=e,n.modal.returnUrl=i.getExternalLoginReturnUrl(),r.returnUrlValues="&modalTab="+e+"&returnUrl="+n.modal.returnUrl},$("[data-toggle=modal][data-target]").click(function(){var e=$(this).attr("href");n.modal.openedModal(e.substring(1,e.length)),u(e),$(this).attr("data-target")}),$("a[data-toggle=tab]").click(function(){var e=$(this).attr("href");n.modal.openedModal(e.substring(1,e.length)),u(e)}),-1!==s.location.href.indexOf("cMsg=eErrorSocialAuthentication")&&(-1!==s.location.href.indexOf(e.OPEN_SIGN_UP_MODAL)?(n.modal.openedModal("registerTab"),t.$broadcast(a.EVENTS.OPEN_SIGN_UP_MODAL)):-1!==s.location.href.indexOf(e.OPEN_SIGN_IN_MODAL)&&(n.modal.openedModal("signinTab"),t.$broadcast(a.EVENTS.OPEN_SIGN_IN_MODAL)))}]),angular.module("gmgApp").controller("MyAccountBodyController",["$scope","ObjectValidator","User","Utils","QUERY",function(t,n,r,i,o){t.isProcessingRedirectToSignInPage=!0,t.shouldRedirectToSignInPage=!1;function a(e){!n.isNullOrUndefined(e)&&e.isAuthenticated||(t.shouldRedirectToSignInPage=!0),t.shouldRedirectToSignInPage&&(e=i.appendQueryKeyValue(t.loginPageUrl,o.NAMES.RETURN_URL,i.getPathAndQuery()),i.redirect(e)),t.isProcessingRedirectToSignInPage=!1}t.initialize=function(e){t.loginPageUrl=e,n.isNullOrEmptyString(e)||r.getWhenReady().then(a)}}]),angular.module("gmgApp").controller("MyAccountCommunicationPreferencesController",["$scope","$location","ApiService","$q","ProfileService","Utils","$timeout","OPTIN","PAGE_NAMES_CONSTANTS","phoneNumberModalService","User",function(r,e,t,n,i,o,a,s,l,c,u){"scrollRestoration"in history&&(history.scrollRestoration="manual");var d=angular.element("html, body"),e=(-1<e.absUrl().toString().indexOf("source="+s)&&(r.scroll=a(function(){d.animate({scrollTop:$("#settings-email").offset().top-$(".sticky-header").height()},800)},2e3),r.scroll=a(function(){angular.element($("#communication-panel")).addClass("highlight")},3e3)),r.isLoading=!0,r.communityNewsLetterOptedIn=!1,t.getCommsMethodPreferences().then(function(e){r.preferredCommsEmail=e.data.Email,r.preferredCommsSms=e.data.Sms})),s=u.getWhenReady().then(function(e){r.newsletterOptIn=e.newsletterOptIn,r.hasEmail=!!e.email.address});function p(){return r.hasPhoneNumber?n.resolve():t.getPhoneNumber().then(function(e){r.hasPhoneNumber=e.data&&e.data.Number})}n.all([e,s]).then(function(){r.isLoading=!1}),r.getCommunicationPreferences=function(){return i.getCommunicationPreferences().success(function(e){r.communityNewsLetterOptedIn=e.CommunityNewsletter}).error(function(e,t,n){e=o.getErrorResponseObject(e,t,n);errorHandler.handleResponse(r,e)})},r.getCommunicationPreferences(),r.toggleNewsletterOptIn=function(){r.newsletterDisabled=!0,t.updateNewsletterOptIn(!r.newsletterOptIn,l.ACCOUNT_SETTINGS).then(function(){r.newsletterOptIn=!r.newsletterOptIn,r.newsletterDisabled=!1},function(){r.newsletterDisabled=!1})},r.toggleCommunicationPreferences=function(){r.communicationPreferenceDisabled=!0,t.setCommunicationPreferences({CommunityNewsletter:!r.communityNewsLetterOptedIn}).then(function(){r.communityNewsLetterOptedIn=!r.communityNewsLetterOptedIn}).finally(function(){r.communicationPreferenceDisabled=!1})},r.toggleSmsPreference=function(){r.preferredCommsSms||r.preferredCommsEmail?(m(),p().then(function(){r.preferredCommsSms&&!r.hasPhoneNumber?(r.preferredCommsSms=!1,c.getModal().then(function(e){return e.open()}).then(p).then(function(){if(r.hasPhoneNumber)return r.preferredCommsSms=!0,f()})):f()})):(r.preferredCommsSms=!0,r.showAtLeastOneCommsMethodError=!0)},r.toggleEmailPreference=function(){r.preferredCommsSms||r.preferredCommsEmail?r.preferredCommsEmail&&!r.hasEmail?(r.preferredCommsEmail=!1,r.showEmailRequiredError=!0):(m(),f()):(r.preferredCommsEmail=!0,r.showAtLeastOneCommsMethodError=!0)};var h=null,f=function(){clearTimeout(h),h=setTimeout(function(){h=null,t.setCommsMethodPreferences({Email:r.preferredCommsEmail,Sms:r.preferredCommsSms})},1e3)},m=function(){r.showAtLeastOneCommsMethodError=!1,r.showEmailRequiredError=!1}}]),angular.module("gmgApp").controller("MyAccountController",["$scope","ApiService","ErrorHandler","ObjectValidator","$window","DESTROY_EVENT_NAME","USER_PROFILE_SET_EVENT","VALIDATION_MODEL_HANDLER_EVENTS",function(n,t,r,i,o,e,a,s){n.userProfileLoading=!0,n.toggleDetailsViewsMode=function(){n.detailsReadViewMode=!n.detailsReadViewMode},n.isUserNameEmpty=function(e){return i.isNullOrEmptyString(e)},n.userProfileValidation=r.createValidationModel();var l=n.$on(s.BROADCAST_VALIDATION_ERROR,function(e,t){r.handleResponse(n.userProfileValidation,t)}),c=n.$on(s.CLEAR_VALIDATION_MODEL,function(e){n.userProfileValidation&&r.clearErrors(n.userProfileValidation)}),u=n.$on(a,function(e,t){n.username=t.UserName,n.dateOfBirth=t.DateOfBirth,n.email=t.EmailAddress,n.editedCredentials={},n.editedCredentials.email=t.EmailAddress,n.newsletterOptIn=t.NewsletterOptIn,n.userProfileLoading=!1});n.resetCredentialsForm=function(){n.toggleDetailsViewsMode(),n.editedCredentials=null,n.credentialsForm.$setPristine(),n.credentialsForm.$dirty=!1,n.credentialsForm.$submitted=!1,n.editedCredentials={},n.editedCredentials.email=n.email},n.$watch("editedCredentials.email",function(){n.editedCredentials&&n.editedCredentials.email&&(n.editedCredentials.email=n.editedCredentials.email.toLowerCase().replace(/\s+/g,""))}),n.changePassword=function(){var e={Password:n.editedCredentials.password,OldPassword:n.editedCredentials.oldPassword,ConfirmedPassword:n.editedCredentials.confirmedPassword};return t.changePassword(e).then(function(){n.resetCredentialsForm(),r.clearErrors(n.userProfileValidation)},function(e){500!==e.status&&(n.credentialsForm.$submitted=!1,r.handleResponse(n.userProfileValidation,e))})},n.updateEmail=function(){var e={Email:n.editedCredentials.email,Password:n.editedCredentials.confirmPassword};return r.clearErrors(n.userProfileValidation),t.updateEmail(e).then(function(e){o.location.href=e.data},function(e){500!==e.status&&(n.credentialsForm.$submitted=!1,r.handleResponse(n.userProfileValidation,e))})},n.toggleNewsletterOptIn=function(){n.newletterDisabled=!0,t.updateNewsletterOptIn(!n.newsletterOptIn).then(function(){n.newsletterOptIn=!n.newsletterOptIn,n.newletterDisabled=!1},function(){n.newletterDisabled=!1})},n.$on(e,function(){u(),c(),l()}),n.detailsReadViewMode=!0,$("div:not(.notifications-check)").removeClass("hidden"),$("h4").removeClass("hidden")}]),angular.module("gmgApp").controller("MyAccountHeaderController",["$scope","$window","ApiService","UserCookie","User",function(e,t,n,r,i){e.logout=function(){n.logout().then(function(){r.delete(),t.location.href="/"})},i.getWhenReady().then(function(e){e.isAuthenticated&&n.logoutIfCognitoEnabledAndUserNotMigrated().then(function(e){!0===e.data&&(r.delete(),t.location.href="/sign-in")})})}]),angular.module("gmgApp").controller("MyAccountPreferenceController",["$scope","$window","$q","ErrorHandler","ApiService","ProfileService","Utils","User",function(r,e,t,i,n,o,a,s){r.isLoadingLanguagePreferences=!0,r.initialize=function(e){r.availableLanguages=e};function l(n){e.jQuery.each(r.availableLanguages,function(e,t){t.LanguageCode==n&&(r.preferredLanguage=t.Label,c())})}var c=function(){e.jQuery.each(r.availableLanguages,function(e,t){t.Label==r.preferredLanguage&&(r.selectedLanguage={LanguageCode:t.LanguageCode})})};r.cancel=function(){c()},r.save=function(){var e=r.selectedLanguage.LanguageCode;if(r.isLoadingLanguagePreferences=!0,r.selectedLanguage)n.setCommunicationPreferences({Language:e}).success(function(){r.isLoadingLanguagePreferences=!1,l(r.selectedLanguage.LanguageCode)}).error(function(e,t,n){r.isLoadingLanguagePreferences=!1,c();t=a.getErrorResponseObject(err,t,n);i.handleResponse(r,t)})},o.getCommunicationPreferences().success(function(e){r.isLoadingLanguagePreferences=!1,l(e.Language)}).error(function(e,t,n){r.isLoadingLanguagePreferences=!1;e=a.getErrorResponseObject(e,t,n);i.handleResponse(r,e)}),s.getWhenReady().then(function(e){r.autoplay=e.autoplay}),r.setAutoplay=function(e){return r.autoplay!==e?(r.autoplay=e,n.setAutoplay(e)):t.resolve(!1)}}]),angular.module("gmgApp").controller("MyAccountProfileController",["$scope","myAccountService",function(e,t){e.isLoadingMyAccountPersonalDetails=!0,e.hasUserData=function(){return e.isLoadingMyAccountPersonalDetails&&(e.userProfile=t.loadUserProfile(),e.userProfile)&&(e.userName=e.userProfile.UserName,e.isLoadingMyAccountPersonalDetails=!1),e.userProfile},t.init()}]),angular.module("gmgApp").controller("NewBillingAddressController",["$rootScope","$scope","ApiService","ErrorHandler","$q","myAccountService","BILLING_ADDRESS_FORM_CLOSED",function(e,t,n,r,i,o,a){var s=$("#billingAddressFormShowMode"),l=$("#billingAddressFormEditMode");t.isLoadingBillingAddress=!0,e.$on(a,function(){t.closeForm()}),t.openBillingAddressForm=function(){s.hide(),l.slideDown(),t.SetCountryHasSubAreasFlag(),o.openBillingAddressForm()},t.closeForm=function(){l.slideUp(),s.slideDown("10")},t.hasUserData=function(){return t.isLoadingBillingAddress&&(t.userProfile=o.loadUserProfile(),t.userProfile)&&(t.initBillingAddress(),t.isLoadingBillingAddress=!1),t.userProfile},t.initBillingAddress=function(){t.editedBillingAddress=angular.copy(t.userProfile.BillingAddress)},t.billingAddressValidation=r.createValidationModel(),t.resetBillingAddressForm=function(){t.closeForm(),o.closeForm(),t.initBillingAddress(),t.billingAddressForm&&(t.billingAddressForm.$setPristine(),t.billingAddressForm.$dirty=!1,t.billingAddressForm.$submitted=!1)},t.updateBillingAddress=function(){var e;return angular.equals(t.editedBillingAddress,t.userProfile.BillingAddress)?(t.resetBillingAddressForm(),(e=i.defer()).resolve(),e.promise):(t.hasSubAreas||(t.editedBillingAddress.StateCode="",t.editedBillingAddress.StateName=""),n.updateBillingAddress(t.editedBillingAddress).then(function(){var e=!1;r.clearErrors(t.billingAddressValidation),t.userProfile.BillingAddress&&t.userProfile.BillingAddress.CountryCode===t.editedBillingAddress.CountryCode||(e=!0),t.userProfile.BillingAddress=t.editedBillingAddress,t.resetBillingAddressForm(),e&&t.onCountryChanged&&t.onCountryChanged()},function(e){r.handleResponse(t.billingAddressValidation,e)}))},t.IsCountryChanged=function(){t.SetCountryHasSubAreasFlag(),t.editedBillingAddress.StateCode="",t.editedBillingAddress.StateName=""},t.SetCountryHasSubAreasFlag=function(){t.hasSubAreas="true"===angular.element(document.getElementById("countryCode")).find("option:selected").attr("hasSubAreas")},t.$watchGroup(["editedBillingAddress.FirstName","editedBillingAddress.LastName","editedBillingAddress.AddressLine1","editedBillingAddress.Town","editedBillingAddress.Postcode","editedBillingAddress.countryCode"],function(){r.clearErrors(t.billingAddressValidation)})}]),angular.module("gmgApp").controller("NewRegistrationController",["$scope",function(e){var t=["username","phonenumber"];function n(e){var t=document.getElementById(e);null!==t.value&&""!==t.value||(document.getElementById(e+"-error").style.display="block",document.getElementById("errorDot-"+e).style.display="inline-block",0)}e.doRegister=function(){t.forEach(n)}}]),angular.module("gmgApp").controller("OptedInBlockController",["$scope","$document","User",function(t,e,n){t.optedIn=!1,t.loading=!0,e.ready(function(){n.getWhenReady().then(function(e){e&&e.username&&e.newsletterOptIn&&(t.optedIn=!0),t.loading=!1,angular.element(".opt-in-content").collapse("show")})})}]),angular.module("gmgApp").controller("OrderController",["$scope","$sce","$location","retryRequest","ORDER_STATUS_URL","MAX_RETRY","DEFAULT_DELAY","Order","Tealium","User","$window","ObjectValidator","URL_PARAMETER_CONSTANTS",function(n,t,r,e,i,o,a,s,l,c,u,d,p){var h=r.search().ordernumber,d=d.isNullOrUndefined(window.GMGSettings.apiServiceUrl)?window.GMGSettings.apiBaseUrl:window.GMGSettings.apiServiceUrl;n.cleanGiftCodeName=function(e){return"GIFT_CODE"===e?"GIFT CODE":e},e(d+i,"GET",o,a,h).then(function(e){s.setApiData(e),s.getWhenReady().then(function(t){n.order=t,l.setOrder(t),GMGSettings.googleAnalyticsTrackingId&&c.getWhenReady().then(function(e){ga("gmgTracker.require","ecommerce");e={id:t.id,revenue:t.total.final,currency:e.currency};ga("gmgTracker.ecommerce:addTransaction",e),ga("gmgTracker.ecommerce:send")})}),null!==e.ErrorMessage&&0<e.ErrorMessage.length&&(n.error=t.trustAsHtml(e.ErrorMessage))}).catch(function(e){n.error=t.trustAsHtml(e)}),c.getWhenReady().then(function(e){n.user=e}),n.RedirectIfNotAuthenticated=function(t){c.getWhenReady().then(function(e){e.username||r.search()[p.RE_LOGIN_IN]||(e=new u.URL(t,new u.URL(u.location.origin)),r.search().ordernumber?e.searchParams.append(p.RETURN_URL,u.location.href):e.searchParams.append(p.RETURN_URL,t),e.searchParams.append(p.RE_LOGIN_IN,!0),u.location.href=e.toString())})},n.init=function(e){n.isOrderConfirmationPage=e,n.isOrderConfirmationPage&&(n.displayAccordionSection=!0)}}]),angular.module("gmgApp").controller("OverridenDefaultSettingsController",["$scope","$location","$window","ErrorHandler","ApiService","Utils",function(r,e,t,i,n,o){i.clearErrors(r),r.model={country:""},r.doOverride=function(){return i.clearErrors(r),n.setDefaultSettings(r.model).success(function(){t.location.href="/"}).error(function(e,t,n){i.handleError(r,e,t,n)})},r.doClearCache=function(){return i.clearErrors(r),n.clearSettings().success(function(){t.location.reload(!0)}).error(function(e,t,n){i.handleError(r,e,t,n)})}}]),angular.module("gmgApp").controller("PasswordFieldController",["$scope","$filter",function(r,i){var e=document.getElementById("passwordFieldCriteria"),o=document.getElementById("uppercaseIcon"),a=document.getElementById("lowercaseIcon"),s=document.getElementById("characterIcon"),l=!1,c=!1,u=!(r.dotDataStrength=0);function d(e){e.classList.remove("circleIconPass"),e.classList.add("circleIconFail")}function p(e){e.classList.remove("circleIconFail"),e.classList.add("circleIconPass")}r.finalScore=function(e,t){var n,t=document.getElementById("passwordStrengthText-"+t);if(e)return null!==t&&(t.style.height=""),u=!1,((n=e).search(/[a-z]/g)<0?(l=!1,d):(l=!0,p))(a),(n.search(/[A-Z]/g)<0?(c=!1,d):(c=!0,p))(o),n=i("PasswordFieldFilter")(e),r.dotDataStrength=1<n&&l&&c?4:1,n;d(s),d(a),d(o),r.dotDataStrength=1,u=!0,null!==t&&(t.style.height=0)},$("#passwordField").focusin(function(){e.style.height="40px"}).focusout(function(){u&&(e.style.height="0px")}),r.showHidePasswordToggle=function(){var e="glyphicon-eye-open",t="glyphicon-eye-close",n=document.getElementById("passwordField"),r=document.getElementById("eyeIcon");"password"===n.type?(n.type="text",n.spellcheck="false",n.autocomplete="off",r.classList.add(t),r.classList.remove(e)):(n.type="password",n.removeAttribute("autocomplete"),n.removeAttribute("spellcheck"),r.classList.add(e),r.classList.remove(t))}}]),angular.module("gmgApp").controller("PaymentButtonsController",["$rootScope","$scope","ApiService","paymentMethodConstants","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","pendingOrderService","$window","Basket","billingAddressService","EVENTS","paymentService","PAYMENT_EVENTS","$location","paymentTealiumTagService","$q","paymentMethodsService","CANCELING_PENDING_ORDER_SUCCESS","boaCompraFormService","validationHandlerService","CANCELING_PENDING_ORDER_FAIL","$timeout","PAYMENT_BUTTON_SECTION","APPLE_PAY_CONSTANTS","$filter","Process3DSecureFactory","PAYMENT_BUTTON_RESOURCE","newsletterOptInService","adyenCheckoutService",function(e,i,o,a,t,n,r,s,l,c,u,d,p,h,f,m,g,v,y,b,S,_,E,C,w,T,A,P,O){i.PAYMENT_BUTTON_SECTION=E,i.PAYMENT_BUTTON_RESOURCE=A,i.PAYMENT_METHODS=a,i.initCompleted=!1,i.paymentMethodsLoaded=!1,i.paypalLoaded=!1,i.paypalSelected=!1;function I(){r.getPendingOrdersByUserPromise().then(function(e){i.hasPendingOrder=0<e.data.length,d.broadcastExistenceOfPendingOrder(i.hasPendingOrder)}).finally(function(){i.initCompleted=!0})}var R=null,M=(i.pendingOrderCancellationSpin=!1,i.openCancelPendingOrderModal=function(){e.$broadcast(u.OPEN_CANCEL_PENDING_ORDER),i.pendingOrderCancellationSpin=!0},i.renderCancelPendingOrderButton=function(){i.hasPendingOrder=!1,i.selectedPaymentMethod&&i.selectedPaymentMethod.allowsPaymentNotifications&&I()},i.$on(v,function(){r.clearPendingOrdersByUserPromise(),I()})),D=i.$on(S,function(e,t){b.broadcastNewValidationModel(t)}),N=(i.makePlaceOrderRequest=function(){return R=m.defer(),d.placeOrderInProgressButton(!0),d.setCurrentPlaceOrderRequestOwner(i.owner),0===i.basket.total.final?e.$broadcast(p.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,{paymentMethodCategory:a.CREDIT,paymentMethodId:"0"}):(i.selectedPaymentMethod.category===a.NON_HOSTED||i.selectedPaymentMethod.category===a.RECURRING_CONTRACT)&&!O.isCardsSessionAvailable()||i.selectedPaymentMethod.category===a.HOSTED&&!O.isHppSessionDataAvailable()||i.selectedPaymentMethod.category!==a.HOSTED&&i.selectedPaymentMethod.category!==a.NON_HOSTED&&i.selectedPaymentMethod.category!==a.RECURRING_CONTRACT?d.requestOrderPaymentData():d.triggerComponentSubmit({softOptIn:!P.getNewsletterCheckbox(),paymentRequestDeferred:R,paymentButtonScope:i}),R.promise},i.$on(p.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,function(e,t){var n,r=d.getCurrentPlaceOrderRequestOwner();r&&r!==i.owner||(R=R||m.defer(),t&&(h.url(h.path()),b.requestValidationModelErrorClearing(),(r=w("filter")(a.BILLING_ADDRESS_EXEMPTED_METHOD,function(e){return i.selectedPaymentMethod&&e===i.selectedPaymentMethod.category}))&&0!==r.length||(t.address=c.getUserAddress(),t.address&&t.address.AddressLine1&&t.address.CountryCode&&t.address.Postcode&&t.address.LastName&&t.address.FirstName&&t.address.Town)||(t.address=c.getCurrentEditingBillingAddress(),!c.isBillingAddressFormInvalid()))?((n=t).softOptIn=!P.getNewsletterCheckbox(),o.placeOrder(n).then(function(t){n.paymentMethodCategory===a.BOACOMPRA||n.paymentMethodCategory===a.BOACOMPRA_EUR?l.getWhenReady().then(function(e){f.updateTealiumTagsForBoaCompraPayment(i,t,e),y.requestBoaCompraFormSubmission(t.data.RedirectUrl),R.resolve()}):n.paymentMethodId===a.ALIPAY||n.paymentMethodId===a.UNIONPAY||n.paymentMethodId===a.WECHATPAY||n.paymentMethodId===a.KCP_PAYCO||n.paymentMethodId===a.KCP_BANKTRANSFER||n.paymentMethodId===a.KCP_CREDITCARD?l.getWhenReady().then(function(e){f.updateTealiumTagsForDeferredPayment(i,t,e),T.ProcessResponse(t.data),R.resolve()}):(T.ProcessResponse(t.data),R.resolve())},function(e){b.broadcastNewValidationModel(e),R.reject(),s.scrollTo(0,0),d.placeOrderProcessFailed(),d.placeOrderInProgressButton(!1)}).finally(function(){d.setCurrentPlaceOrderRequestOwner(null)})):R.reject())})),k=i.$on(n.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){i.selectedPaymentMethodGroup!==t.selectedPaymentMethodGroup?(i.previousButtonCleared=!1,_(function(){i.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,i.selectedPaymentMethod=t.selectedPaymentMethod,i.previousButtonCleared=!0},1)):(i.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,i.selectedPaymentMethod=t.selectedPaymentMethod)}),L=g.resetSelectedPaymentMethodGroupListener(i),x=i.$on(n.LOADING_COMPLETE,function(e,t){i.previousButtonCleared=!1,_(function(){i.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,i.selectedPaymentMethod=t.selectedPaymentMethod,!i.selectedPaymentMethod||i.selectedPaymentMethod.isNotReadyToSubmit&&angular.isFunction(i.selectedPaymentMethod.isNotReadyToSubmit)||g.broadCastRequestForButtonValidationFunc(),i.paymentMethodsLoaded=!0,i.previousButtonCleared=!0},1)}),$=i.$on(p.UPDATED_DISABLE_PLACE_ORDER_BUTTON,function(e,t){i.disablePlaceOrder=t}),U=i.$on(p.HIDE_PAYPAL_BUTTON,function(e,t){i.hidePaypalButton=t}),F=i.$on(n.IS_SUBMISSION_READY_FUNC,function(e,t){_(function(){i.selectedPaymentMethod&&(i.selectedPaymentMethod.isNotReadyToSubmit=t)},0)}),B=i.$on(u.CLOSE_CANCEL_PENDING_ORDER,function(){i.pendingOrderCancellationSpin=!1}),G=i.$on(C.EVENTS.APPLE_PAY_CANCEL,function(){R.resolve()});i.$on(p.PAYPAL_LOADED,function(){i.paypalLoaded=!0}),i.$on(p.PAYPAL_SELECTED,function(e,t){i.paypalSelected=!!t}),i.$on(t,function(){k(),$(),B(),L(),x(),M(),N(),D(),F(),G(),U()}),i.init=function(e){i.owner=e,I(),l.getWhenReady().then(function(e){i.basket=e}),i.disablePlaceOrder=d.getDisablePlaceOrderButton()}}]),angular.module("gmgApp").controller("PaymentMethodBillingAddressController",["$scope","ApiService","ErrorHandler","$q","billingAddressService","userProfileService","DESTROY_EVENT_NAME","$window","BILLING_ADDRESS_EVENTS","PAYMENT_METHOD_EVENTS","paymentService","validationHandlerService","ObjectValidator","paymentMethodsService","USER_PROFILE_SET_EVENT","Basket","ENTER_KEY_CODE",function(r,t,i,n,o,a,e,s,l,c,u,d,p,h,f,m,g){function v(e){var t=e.target;e.which!==g||"INPUT"!=t.nodeName&&"SELECT"!=t.nodeName||(e.preventDefault(),e.stopPropagation())}function y(){var n,e=i.createValidationModel();return w(e)?(e.header=r.BILLING_ADDRESS_ERROR.HEADER_TEXT,e.hasServerError=0!==e.validationErrors.length,d.broadcastExistingValidationModel(e),u.updatedDisablePlaceOrderButton(!0),u.placeOrderInProgressButton(!1),!0):(h.getPaymentMethodsLoadingStatus()?n=r.$on(c.PAYMENT_METHODS_LOADING_STATUS_CHANGED,function(e,t){t||(d.requestValidationModelErrorClearing(),n())}):d.requestValidationModelErrorClearing(),u.updatedDisablePlaceOrderButton(!1),!1)}function b(t){m.getWhenReady().then(function(e){r.basket=e,r.initBillingAddress(t),r.billingAddressFormElementListener=r.$watchGroup(S,function(e){var t=!1;angular.forEach(e,function(e){e&&(t=!0)}),t&&(o.broadcastAddressLoadCompleted(r.selectedPaymentMethodGroupHeaderId),r.billingAddressFormElementListener())}),angular.element("#cartForm").on("keypress",v)})}var S=["billingAddressForm.firstName","billingAddressForm.lastName","billingAddressForm.address1","billingAddressForm.address2","billingAddressForm.postcode","billingAddressForm.towncity","billingAddressForm.countryCode","billingAddressForm.stateCode"],_=["billingAddressForm.firstName.$invalid","billingAddressForm.firstName.$touched","billingAddressForm.lastName.$invalid","billingAddressForm.lastName.$touched","billingAddressForm.address1.$invalid","billingAddressForm.address1.$touched","billingAddressForm.postcode.$invalid","billingAddressForm.postcode.$touched","billingAddressForm.towncity.$invalid","billingAddressForm.towncity.$touched","billingAddressForm.countryCode.$invalid","billingAddressForm.countryCode.$touched","billingAddressForm.stateCode.$invalid","billingAddressForm.stateCode.$touched"],E=(r.toggleBillingsViewsMode=function(e){r.isEditingBillingAddress=!r.isEditingBillingAddress,r.SetCountryHasSubAreasFlag(),e&&e.preventDefault()},r.invalidStateCode=function(){return!!r.billingAddressForm&&r.billingAddressForm.stateCode.$invalid&&!r.billingAddressForm.stateCode.$pristine},r.invalidCountryCode=function(){return!!r.billingAddressForm&&r.billingAddressForm.countryCode.$invalid&&!r.billingAddressForm.countryCode.$pristine},r.resetBillingAddressForm=function(e){r.toggleBillingsViewsMode(),angular.equals(r.editedBillingAddress,a.getUserProfile().BillingAddress)||(r.editedBillingAddress=angular.copy(a.getUserProfile().BillingAddress)),(r.billingAddressForm||r.billingAddressForm.$dirty||r.billingAddressForm.$submitted)&&(r.billingAddressForm.$setPristine(),r.billingAddressForm.$dirty=!1,r.billingAddressForm.$submitted=!1),e&&e.preventDefault()},r.updateBillingAddress=function(){var e;return angular.equals(r.editedBillingAddress,a.getUserProfile().BillingAddress)?(r.toggleBillingsViewsMode(),(e=n.defer()).resolve(),e.promise):(r.hasSubAreas||(r.editedBillingAddress.StateCode="",r.editedBillingAddress.StateName=""),t.updateBillingAddress(r.editedBillingAddress).then(function(){a.getUserProfile().BillingAddress=angular.copy(r.editedBillingAddress),r.payingByOnlyCredits()||o.setUserBillingAddress(r.editedBillingAddress),r.toggleBillingsViewsMode(),(r.billingAddressForm||r.billingAddressForm.$dirty||r.billingAddressForm.$submitted)&&(r.billingAddressForm.$setPristine(),r.billingAddressForm.$dirty=!1,r.billingAddressForm.$submitted=!1),d.requestValidationModelErrorClearing()},function(e){r.billingAddressForm&&(r.billingAddressForm.$submitted=!1),d.broadcastExistingValidationModel(e)}))},r.IsCountryChanged=function(){r.SetCountryHasSubAreasFlag(),r.editedBillingAddress.StateCode="",r.editedBillingAddress.StateName=""},r.SetCountryHasSubAreasFlag=function(){r.hasSubAreas="true"===angular.element("#"+r.billingViewCountryCodeDropdownId).find("option:selected").attr("hasSubAreas")},function(){return"true"===angular.element("#"+r.billingViewCountryCodeDropdownId).find("option:selected").attr("hasSubAreas")}),C=function(e,t,n,r){return!(!p.isNullOrEmptyString(t)||r.$pristine||!r.$touched||(e.validationErrors.push({ErrorMessage:n}),0))},w=function(e){var t=o.getCurrentEditingBillingAddress();return!!t&&(C(e,t.FirstName,r.BILLING_ADDRESS_ERROR.FIRST_NAME,r.billingAddressForm.firstName),C(e,t.LastName,r.BILLING_ADDRESS_ERROR.LAST_NAME,r.billingAddressForm.lastName),C(e,t.AddressLine1,r.BILLING_ADDRESS_ERROR.ADDRESS_LINE_1,r.billingAddressForm.address1),C(e,t.Town,r.BILLING_ADDRESS_ERROR.TOWN,r.billingAddressForm.towncity),C(e,t.Postcode,r.BILLING_ADDRESS_ERROR.POSTCODE,r.billingAddressForm.postcode),C(e,t.CountryCode,r.BILLING_ADDRESS_ERROR.COUNTRY_CODE,r.billingAddressForm.countryCode),E()&&C(e,t.StateCode,r.BILLING_ADDRESS_ERROR.STATE_CODE,r.billingAddressForm.stateCode),0<e.validationErrors.length)},T=r.$on(c.LOADING_COMPLETE,function(e,t){r.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup}),A=r.$on(f,function(e,t){b(t)}),P=r.$on(c.PAYMENT_METHOD_ACCORDION_CHANGED,function(e){r.isEditingBillingAddress&&r.resetBillingAddressForm()}),O=r.$on(l.UPDATE_EDITED_ADDRESS,function(e,t){r.editedBillingAddress=t}),I=(r.payingByOnlyCredits=function(){return r.basket&&r.basket.total&&0===r.basket.total.final},r.isEditingBillingAddress=!1,r.$on(l.ADDRESS_LOAD_COMPLETED,function(){r.editedBillingAddressListener=r.$watch("editedBillingAddress",function(e,t){e!==t&&o.setCurrentEditingBillingAddress(e)},!0),r.billingAddressFormInvalidListener=r.$watchGroup(_,function(e,t){var n;(e!==t&&r.selectedPaymentMethodGroup&&r.selectedPaymentMethodGroup.uniqueHeaderId&&r.selectedPaymentMethodGroup.uniqueHeaderId===r.selectedPaymentMethodGroupHeaderId||r.payingByOnlyCredits()&&!r.selectedPaymentMethodGroup)&&(n=!1,angular.forEach(e,function(e){e&&(n=e)}),n)&&!y()&&d.requestValidationModelErrorClearing()})}));r.$on(e,function(){T(),P(),A(),O(),r.editedBillingAddressListener(),r.billingAddressFormInvalidListener(),I(),r.billingAddressFormElementListener&&r.billingAddressFormElementListener()}),r.initBillingAddress=function(e){angular.equals(o.getUserAddress(),e.BillingAddress)?r.editedBillingAddress=o.getUserAddress():(r.editedBillingAddress=angular.copy(e.BillingAddress),o.setUserBillingAddress(r.editedBillingAddress,!0),o.setBillingAddressForm(r.billingAddressForm),o.setBillingAddressFormValidationFunc(y))},r.init=function(e){r.BILLING_ADDRESS_ERROR=o.getBillingMessages(),r.selectedPaymentMethodGroupHeaderId=e,r.billingViewCountryCodeDropdownId=e?e+"countryCode":"countryCode";e=a.getUserProfile();e&&b(e)}}]),angular.module("gmgApp").controller("PaymentMethodBillingAddressV2Controller",["$scope","ApiService","ErrorHandler","$q","billingAddressService","userProfileService","DESTROY_EVENT_NAME","BILLING_ADDRESS_EVENTS","PAYMENT_METHOD_EVENTS","paymentService","validationHandlerService","ObjectValidator","paymentMethodsService","USER_PROFILE_SET_EVENT","Basket","ENTER_KEY_CODE",function(r,t,i,n,o,a,e,s,l,c,u,d,p,h,f,m){function g(e){var t=e.target;e.which!==m||"INPUT"!=t.nodeName&&"SELECT"!=t.nodeName||(e.preventDefault(),e.stopPropagation())}function v(){var n,e=i.createValidationModel();return C(e)?(e.header=r.BILLING_ADDRESS_ERROR.HEADER_TEXT,e.hasServerError=0!==e.validationErrors.length,e.isError=e.hasServerError,u.broadcastExistingValidationModel(e),c.updatedDisablePlaceOrderButton(!0),c.placeOrderInProgressButton(!1),!0):(p.getPaymentMethodsLoadingStatus()?n=r.$on(l.PAYMENT_METHODS_LOADING_STATUS_CHANGED,function(e,t){t||(u.requestValidationModelErrorClearing(),n())}):u.requestValidationModelErrorClearing(),c.updatedDisablePlaceOrderButton(!1),!1)}function y(){f.getWhenReady().then(function(e){r.basket=e,r.initBillingAddress(),r.billingAddressFormElementListener=r.$watchGroup(b,function(e){var t=!1;angular.forEach(e,function(e){e&&(t=!0)}),t&&(o.broadcastAddressLoadCompleted(r.selectedPaymentMethodGroupHeaderId),r.billingAddressFormElementListener())}),angular.element("#cartForm").on("keypress",g)})}var b=["billingAddressForm.firstName","billingAddressForm.lastName","billingAddressForm.address1","billingAddressForm.address2","billingAddressForm.postcode","billingAddressForm.towncity","billingAddressForm.countryCode","billingAddressForm.stateCode"],S=["billingAddressForm.firstName.$invalid","billingAddressForm.firstName.$touched","billingAddressForm.lastName.$invalid","billingAddressForm.lastName.$touched","billingAddressForm.address1.$invalid","billingAddressForm.address1.$touched","billingAddressForm.postcode.$invalid","billingAddressForm.postcode.$touched","billingAddressForm.towncity.$invalid","billingAddressForm.towncity.$touched","billingAddressForm.countryCode.$invalid","billingAddressForm.countryCode.$touched","billingAddressForm.stateCode.$invalid","billingAddressForm.stateCode.$touched"],_=(r.toggleBillingsViewsMode=function(e){r.isEditingBillingAddress=!r.isEditingBillingAddress,r.SetCountryHasSubAreasFlag(),e&&e.preventDefault()},r.resetBillingAddressForm=function(e){r.toggleBillingsViewsMode(),angular.equals(r.editedBillingAddress,a.getUserProfile().BillingAddress)||(r.editedBillingAddress=angular.copy(a.getUserProfile().BillingAddress)),(r.billingAddressForm||r.billingAddressForm.$dirty||r.billingAddressForm.$submitted)&&(r.billingAddressForm.$setPristine(),r.billingAddressForm.$dirty=!1,r.billingAddressForm.$submitted=!1),e&&e.preventDefault()},r.updateBillingAddress=function(){var e;return angular.equals(r.editedBillingAddress,a.getUserProfile().BillingAddress)?(r.toggleBillingsViewsMode(),(e=n.defer()).resolve(),e.promise):(r.hasSubAreas||(r.editedBillingAddress.StateCode="",r.editedBillingAddress.StateName=""),t.updateBillingAddress(r.editedBillingAddress).then(function(){r.userProfile=a.getUserProfile(),r.userProfile.BillingAddress=angular.copy(r.editedBillingAddress),r.payingByOnlyCredits()||o.setUserBillingAddress(r.editedBillingAddress),r.toggleBillingsViewsMode(),(r.billingAddressForm||r.billingAddressForm.$dirty||r.billingAddressForm.$submitted)&&(r.billingAddressForm.$setPristine(),r.billingAddressForm.$dirty=!1,r.billingAddressForm.$submitted=!1),u.requestValidationModelErrorClearing()},function(e){r.billingAddressForm&&(r.billingAddressForm.$submitted=!1);var t=i.createValidationModel();i.handleResponse(t,e),t.hasServerError=!0,t.isError=!0,u.broadcastExistingValidationModel(t)}))},r.IsCountryChanged=function(){r.SetCountryHasSubAreasFlag(),r.editedBillingAddress.StateCode="",r.editedBillingAddress.StateName=""},r.SetCountryHasSubAreasFlag=function(){r.hasSubAreas="true"===angular.element("#"+r.billingViewCountryCodeDropdownId).find("option:selected").attr("hasSubAreas")},function(){return"true"===angular.element("#"+r.billingViewCountryCodeDropdownId).find("option:selected").attr("hasSubAreas")}),E=function(e,t,n,r){return!(!d.isNullOrEmptyString(t)||r.$pristine||!r.$touched||(e.validationErrors.push({ErrorMessage:n}),0))},C=function(e){var t=o.getCurrentEditingBillingAddress();return!!t&&(E(e,t.FirstName,r.BILLING_ADDRESS_ERROR.FIRST_NAME,r.billingAddressForm.firstName),E(e,t.LastName,r.BILLING_ADDRESS_ERROR.LAST_NAME,r.billingAddressForm.lastName),E(e,t.AddressLine1,r.BILLING_ADDRESS_ERROR.ADDRESS_LINE_1,r.billingAddressForm.address1),E(e,t.Town,r.BILLING_ADDRESS_ERROR.TOWN,r.billingAddressForm.towncity),E(e,t.Postcode,r.BILLING_ADDRESS_ERROR.POSTCODE,r.billingAddressForm.postcode),E(e,t.CountryCode,r.BILLING_ADDRESS_ERROR.COUNTRY_CODE,r.billingAddressForm.countryCode),_()&&E(e,t.StateCode,r.BILLING_ADDRESS_ERROR.STATE_CODE,r.billingAddressForm.stateCode),0<e.validationErrors.length)},w=r.$on(l.LOADING_COMPLETE,function(e,t){r.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup}),T=r.$on(h,function(e,t){r.userProfile=t,y()}),A=r.$on(l.PAYMENT_METHOD_ACCORDION_CHANGED,function(e){r.isEditingBillingAddress&&r.resetBillingAddressForm()}),P=r.$on(s.UPDATE_EDITED_ADDRESS,function(e,t){r.editedBillingAddress=t}),O=(r.payingByOnlyCredits=function(){return r.basket&&r.basket.total&&0===r.basket.total.final},r.isEditingBillingAddress=!1,r.$on(s.ADDRESS_LOAD_COMPLETED,function(){r.editedBillingAddressListener=r.$watch("editedBillingAddress",function(e,t){e!==t&&o.setCurrentEditingBillingAddress(e)},!0),r.billingAddressFormInvalidListener=r.$watchGroup(S,function(e,t){var n;(e!==t&&r.selectedPaymentMethodGroup&&r.selectedPaymentMethodGroup.uniqueHeaderId&&r.selectedPaymentMethodGroup.uniqueHeaderId===r.selectedPaymentMethodGroupHeaderId||r.payingByOnlyCredits()&&!r.selectedPaymentMethodGroup)&&(n=!1,angular.forEach(e,function(e){e&&(n=e)}),n)&&!v()&&u.requestValidationModelErrorClearing()})}));r.$on(e,function(){w(),A(),T(),P(),r.editedBillingAddressListener(),r.billingAddressFormInvalidListener(),O(),r.billingAddressFormElementListener&&r.billingAddressFormElementListener()}),r.initBillingAddress=function(){angular.equals(o.getUserAddress(),r.userProfile.BillingAddress)?r.editedBillingAddress=o.getUserAddress():(r.editedBillingAddress=angular.copy(r.userProfile.BillingAddress),o.setUserBillingAddress(r.editedBillingAddress,!0),o.setBillingAddressForm(r.billingAddressForm),o.setBillingAddressFormValidationFunc(v))},r.init=function(e){r.BILLING_ADDRESS_ERROR=o.getBillingMessages(),r.selectedPaymentMethodGroupHeaderId=e,r.billingViewCountryCodeDropdownId=e?e+"countryCode":"countryCode",r.userProfile=a.getUserProfile(),r.userProfile&&y()}}]),angular.module("gmgApp").controller("AdyenHostedPaymentMethodController",["$scope","DESTROY_EVENT_NAME","paymentMethodsService","paymentService","adyenCheckoutService","PAYMENT_METHOD_EVENTS","$timeout","PAYMENT_EVENTS","BILLING_ADDRESS_EVENTS",function(n,e,r,t,i,o,a,s,l){n.isComponentMounted=!1,n.isUserDetailsLoaded=!1;function c(){var e,t;n.isHppSessionDataAvailable=i.isHppSessionDataAvailable(),n.isHppSessionDataAvailable&&(e=i.getCheckoutComponent(),t=e)?a(function(){var e=t.create(n.methodId);e.mount("#"+n.containerId),i.storeComponentMap({postData:v(),component:e,containerId:n.containerId,category:n.paymentMethodsGroup.methods[0].category,methodId:n.methodId}),n.isComponentMounted=!0,n.selectedPaymentMethod&&n.selectedPaymentMethod.id===n.methodId&&r.broadCastButtonValidationFunc(u)},0):(n.isComponentMounted=!0,n.selectedPaymentMethod&&n.selectedPaymentMethod.id===n.methodId&&r.broadCastButtonValidationFunc(u))}var u=function(e){return n.isPlaceOrderInProgess||!n.isComponentMounted},d=r.selectingPaymentMethodOnGroupChangedListener(n,u),p=r.paymentMethodDetailsSelectedListener(n,u),h=r.resetSelectedPaymentMethodGroupListener(n),f=t.createOrderPaymentPostData(n,function(){return{paymentMethodId:n.selectedPaymentMethod.id,paymentMethodCategory:n.selectedPaymentMethod.category,paymentIssuerId:n.selectedPaymentMethod.issuerId}},function(e,t){return t.id===e.selectedPaymentMethod.id}),m=r.requestForButtonValidationFuncListener(n,u),g=t.listenForPlaceOrderInProgress(n),v=function(){return{paymentMethodId:"",paymentMethodCategory:""}},y=n.$on(l.ADDRESS_LOAD_COMPLETED,function(){a(function(){n.isUserDetailsLoaded=!0},10)}),b=n.$on(s.TRIGGER_COMPONENT_SUBMIT,function(e,t){n.paymentMethodsGroup===n.selectedPaymentMethodGroup&&n.selectedPaymentMethod&&i.submitComponent(t,n.selectedPaymentMethod.category,n.selectedPaymentMethod.id)});n.$on(e,function(){h(),f(),d(),p(),m(),g(),y(),b()});n.init=function(e){(n.paymentMethodsGroup=e).methods[0]&&(e=e.methods[0],n.methodId=e.id,n.containerId="adyen-host-container-"+n.methodId,e.handlingTotal||(e.description=e.description.replace("<p>",'<p class="hidden">'))),n.selectedPaymentMethod&&n.selectedPaymentMethod.id===n.methodId&&r.broadCastButtonValidationFunc(u);e=i.adyenCheckoutBuildPromise();e?e.then(function(){c()}):c()}}]),angular.module("gmgApp").controller("AdyenNonHostedPaymentMethodController",["$scope","paymentMethodsService","paymentMethodConstants","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","paymentService","$timeout","adyenCheckoutService","BILLING_ADDRESS_EVENTS","PAYMENT_EVENTS",function(a,i,n,e,t,r,o,s,l,c){a.isUserDetailsLoaded=!1,a.PAYMENT_METHODS=n;function u(){-1!==a.paymentMethodsGroup.methods.indexOf(a.selectedPaymentMethod)&&a.selectedPaymentMethod.category===n.NON_HOSTED&&(a.selectedPaymentMethod.isNotReadyToSubmit=m)}function d(){var e=s.retrieveComponentMapsByCategory(n.RECURRING_CONTRACT);a.isCancelButtonVisible=e&&0<e.length}function p(){if(a.isSessionDataAvailable=s.isCardsSessionAvailable(),a.isSessionDataAvailable)(r=s.getCheckoutComponent())&&w(r);else{a.months=["1","2","3","4","5","6","7","8","9","10","11","12"];var e=(new Date).getFullYear();a.yearsPast=[],a.yearsFuture=[];for(var t=0;t<f+1;t++)a.yearsPast.push(e-t+"");for(var n=0;n<h+1;n++)a.yearsFuture.push(e+n+"");a.isComponentMounted=!0,a.selectedPaymentMethod&&a.selectedPaymentMethod.id===a.methodId&&i.broadCastButtonValidationFunc(m)}var r;a.adyenMethodDecided=!0}var h=20,f=10,m=function(e){return!a.isSessionDataAvailable&&(a.cartForm.newCardForm.$invalid||a.isPlaceOrderInProgess)||a.isSessionDataAvailable&&!s.isCardFieldsValid()},g=a.$on(t.SELECTED_PAYMENT_METHOD_GROUP_CHANGED,function(e,t){a.selectedPaymentMethodGroup=t,(a.paymentMethodsGroup.toggleRequired&&a.paymentMethodsGroup.groupToggleButton||!a.paymentMethodsGroup.toggleRequired)&&a.paymentMethodsGroup.uniqueBodyId===a.selectedPaymentMethodGroup.uniqueBodyId&&(a.selectedPaymentMethod=a.selectedPaymentMethodGroup.methods[0],u(),i.broadcastSelectedPaymentMethodDetails(a.selectedPaymentMethodGroup,a.selectedPaymentMethod))}),v=a.$on(t.SELECTED_PAYMENT_METHOD_CHANGED,function(e,t){o(function(){a.selectedPaymentMethod=t,u(),-1!==a.paymentMethodsGroup.methods.indexOf(a.selectedPaymentMethod)&&a.selectedPaymentMethod.category===n.NON_HOSTED&&i.broadcastSelectedPaymentMethodDetails(a.selectedPaymentMethodGroup,a.selectedPaymentMethod)},0)}),y=i.paymentMethodDetailsSelectedListener(a,m,function(e){return e.selectedPaymentMethod.category===n.NON_HOSTED}),b=i.resetSelectedPaymentMethodGroupListener(a),S=r.createOrderPaymentPostData(a,function(){var e="",t="",n="",r="",i=a.selectedPaymentMethod.editedFields,o=i.SaveCardDetails;if(a.cartForm.newCardForm){if(a.cartForm.newCardForm.$invalid)return a.cartForm.newCardForm.showErrors=!0,null;i={number:i.CardNumber,cvc:i.SecurityCode,holderName:i.NameOnCard,expiryMonth:i.ExpiryMonth,expiryYear:i.ExpiryYear,startMonth:i.StartMonth,startYear:i.StartYear,issueNumber:i.IssueNumber,generationtime:a.selectedPaymentMethod.formGenerationTime},e=adyen.encrypt.createEncryption(key,{enableValidations:!1}).encrypt(i),t=i.number.replace(/\s+/g,"").slice(0,6),n=i.number.replace(/\s+/g,"").slice(-4),r=i.holderName}return{paymentMethodId:a.selectedPaymentMethod.id,paymentMethodCategory:a.selectedPaymentMethod.category,adyenData:e,saveCardDetails:o,cardBin:t,last4Numbers:n,nameOnCard:r}},function(e,t){return t.id===e.selectedPaymentMethod.id&&t.category===n.NON_HOSTED}),_=i.requestForButtonValidationFuncListener(a,m),E=r.listenForPlaceOrderInProgress(a),C=function(){return{paymentMethodId:"",paymentMethodCategory:"",cardBin:"",last4Numbers:"",nameOnCard:"",paymentBrand:"",saveCardDetails:!1}},w=function(t){var n;a.isSessionDataAvailable&&(t?(n={hasHolderName:!0,holderNameRequired:!0,enableStoreDetails:!0,positionHolderNameOnTop:!0,styles:{base:{fontSize:"16px",fontWeight:"700"},placeholder:{fontSize:"16px"}},onFieldValid:function(e){var t=s.retrieveComponentMapByMethodId(a.methodId);"encryptedCardNumber"===e.encryptedFieldName&&e.valid?t.postData.last4Numbers=e.endDigits:"encryptedCardNumber"!==e.encryptedFieldName||e.valid||(t.postData.last4Numbers="")},onChange:function(e,t){e=e.valid.encryptedCardNumber&&e.valid.encryptedExpiryMonth&&e.valid.encryptedExpiryYear&&e.valid.encryptedSecurityCode&&e.valid.holderName;s.setCardFieldsValidation(e),a.selectedPaymentMethod&&a.selectedPaymentMethod.id===a.methodId&&i.broadCastButtonValidationFunc(m)},onBrand:function(e){s.retrieveComponentMapByMethodId(a.methodId).postData.paymentBrand=e.brand},onBinValue:function(e){var t=s.retrieveComponentMapByMethodId(a.methodId);e.encryptedBin?t.postData.cardBin=e.binValue:t.postData.cardBin=""}},o(function(){var e=t.create("card",n);e.mount("#"+a.containerId),s.storeComponentMap({postData:C(),component:e,containerId:a.containerId,category:a.method.category,methodId:a.methodId}),a.isComponentMounted=!0,a.selectedPaymentMethod&&a.selectedPaymentMethod.id===a.methodId&&i.broadCastButtonValidationFunc(m)},0)):(a.isComponentMounted=!0,a.selectedPaymentMethod&&a.selectedPaymentMethod.id===a.methodId&&i.broadCastButtonValidationFunc(m)))},T=a.$on(c.TRIGGER_COMPONENT_SUBMIT,function(e,t){a.paymentMethodsGroup===a.selectedPaymentMethodGroup&&a.selectedPaymentMethod&&s.submitComponent(t,a.selectedPaymentMethod.category,a.selectedPaymentMethod.id)}),A=a.$on(l.ADDRESS_LOAD_COMPLETED,function(){o(function(){a.isUserDetailsLoaded=!0})}),P=a.$on(t.ADYEN_CHECKOUT_COMPONENT_ADDED,function(e){d()}),O=a.$on(t.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,function(){d()});a.$on(e,function(){v(),b(),S(),g(),y(),_(),E(),A(),T(),P(),O()});a.init=function(e){a.paymentMethodsGroup=e,a.method=e.methods[0],a.methodId=a.method.id,a.containerId="adyen-non-host-container-"+a.methodId,a.paymentMethodsGroup===a.selectedPaymentMethodGroup&&a.selectedPaymentMethod&&a.selectedPaymentMethod.category===n.NON_HOSTED&&i.broadCastButtonValidationFunc(m),a.adyenMethodDecided=!1;e=s.adyenCheckoutBuildPromise();e?e.then(function(){p()}):p()}}]),angular.module("gmgApp").controller("AdyenRecurringPaymentMethodController",["$scope","$filter","ApiService","paymentMethodConstants","DESTROY_EVENT_NAME","adyenCheckoutService","PAYMENT_METHOD_EVENTS","paymentMethodsService","paymentService","$timeout","ObjectValidator","PAYMENT_EVENTS","BILLING_ADDRESS_EVENTS",function(s,l,e,i,t,c,n,u,r,d,o,a,p){s.isAddedCardButtonVisible=!1,s.savedCardError=null,s.PAYMENT_METHODS=i,s.adyenMethodDecided=!1;function h(e){return e.selectedPaymentMethod.category===i.RECURRING_CONTRACT}function f(){-1!==s.paymentMethodsGroup.methods.indexOf(s.selectedPaymentMethod)&&h(s)&&(s.selectedPaymentMethod.isNotReadyToSubmit=y)}function m(){var r;s.isCardsSessionAvailable=c.isCardsSessionAvailable(),s.isCardsSessionAvailable?(s.isAddedCardButtonVisible=!0,(r=c.getCheckoutComponent())?(s.recurringPaymentMethods.forEach(function(e,t,n){var o,a;t===n.length-1&&(s.lastMethod=e),o=r,a=e,d(function(){var e,t=I(o.paymentMethodsResponse.storedPaymentMethods,a.id);t?(a.isExpired&&(t.hideCVC=!0),t.styles={base:{fontSize:"16px",fontWeight:"700"},placeholder:{fontSize:"16px"}},t.onChange=function(e,t){var n,r,i=c.retrieveComponentMapByMethodId(e.data.paymentMethod.storedPaymentMethodId);i&&(n=I(o.paymentMethodsResponse.storedPaymentMethods,a.id),r=l("filter")(s.recurringPaymentMethods,function(e){return e.id===a.id})[0],e.valid.encryptedSecurityCode?(i.postData.last4Numbers=n.lastFour,i.postData.nameOnCard=n.holderName,i.postData.paymentBrand=n.brand,i.postData.cardBin=r.cardBin,r.isValid=!0):(i.postData.last4Numbers="",i.postData.nameOnCard="",i.postData.paymentBrand="",i.postData.cardBin="",r.isValid=!1),c.setCardFieldsValidation(e.valid.encryptedSecurityCode),s.selectedPaymentMethod)&&s.selectedPaymentMethod.id===a.id&&u.broadCastButtonValidationFunc(y)},t.onFocus=function(e){var t;e.focus&&(e=c.retrieveComponentMapByContainerId(e.rootNode.parentNode.id))&&((t=s.selectedPaymentMethod)?u.broadcastDeselectRecurringPaymentRadioButton({oldSelectionId:t.id,newSelectionId:e.methodId}):u.broadcastSelectRecurringPaymentRadioButton(e.methodId))},(t=o.create("card",t)).mount("#"+a.containerId),e=s.lastMethod.id===a.id,c.storeComponentMap({postData:R(),component:t,containerId:a.containerId,category:a.category,methodId:a.id,isLastMethod:e}),e&&(s.isComponentMounted=!0),s.isComponentMounted&&s.selectedPaymentMethod&&s.selectedPaymentMethod.id===s.methodId&&u.broadCastButtonValidationFunc(y)):(a.hide=!0,s.lastMethod.id===a.id&&(s.isComponentMounted=!0,s.isRenderedSavedCardsAvailable=!0,(t=c.retrieveComponentMapsByCategory(i.RECURRING_CONTRACT))&&0!==t.length||(s.paymentMethodsGroup.toggleRequired=!1,b())))},0)}),s.adyenMethodDecided=!0):(s.isComponentMounted=!0,s.adyenMethodDecided=!0,s.recurringPaymentMethods&&0<s.recurringPaymentMethods.length&&(s.isRenderedSavedCardsAvailable=!0),s.selectedPaymentMethod&&s.selectedPaymentMethod.id===s.methodId&&u.broadCastButtonValidationFunc(y))):(s.adyenMethodDecided=!0,s.recurringPaymentMethods&&0<s.recurringPaymentMethods.length&&(s.isRenderedSavedCardsAvailable=!0))}var g=function(e,t){return!t||e.selectedPaymentMethod!==t||!e.selectedPaymentMethod.isValid||e.isPlaceOrderInProgess},v=function(e,t){return!t||e.selectedPaymentMethod!==t||!t.enteredCode||t.enteredCode.length<3||e.isPlaceOrderInProgess},y=function(e){return(s.isCardsSessionAvailable?g:v)(s,e)},b=(s.selectRecurringMethod=function(t){d(function(){s.selectedPaymentMethod=l("filter")(s.selectedPaymentMethodGroup.methods,function(e){return e.id===t})[0],f(),u.broadcastSelectedPaymentMethodDetails(s.selectedPaymentMethodGroup,s.selectedPaymentMethod)},0)},function(){var e=l("filter")(s.selectedPaymentMethodGroup.methods,function(e){return e.category===i.NON_HOSTED})[0];u.broadcastSelectedPaymentMethodChange(e)}),S=(s.removeCard=function(){s.selectedPaymentMethod&&s.selectedPaymentMethod.category===i.RECURRING_CONTRACT&&(s.savedCardError=null,e.removeCard(s.selectedPaymentMethod.id).then(function(e){d(function(){s.selectedPaymentMethodGroup.methods=l("filter")(s.selectedPaymentMethodGroup.methods,function(e){return s.selectedPaymentMethod!==e}),s.isCardsSessionAvailable&&(s.selectedPaymentMethodGroup.methods=l("filter")(s.selectedPaymentMethodGroup.methods,function(e){return e.category!==i.RECURRING_CONTRACT||c.retrieveComponentMapByMethodId(e.id)})),s.recurringPaymentMethods=l("filter")(s.selectedPaymentMethodGroup.methods,function(e){return e.category===i.RECURRING_CONTRACT}),o.isNullOrUndefined(s.recurringPaymentMethods)||0===s.recurringPaymentMethods.length?(s.selectedPaymentMethodGroup.toggleRequired=!1,s.isCardsSessionAvailable&&c.deleteComponentMap(s.selectedPaymentMethod.id),b()):u.broadcastSelectedPaymentMethodGroup(s.selectedPaymentMethodGroup)},0)},function(e){s.savedCardError=e.data}))},s.$on(n.SELECTED_PAYMENT_METHOD_GROUP_CHANGED,function(e,t){s.selectedPaymentMethodGroup=t,s.paymentMethodsGroup.toggleRequired&&!s.paymentMethodsGroup.groupToggleButton&&s.paymentMethodsGroup.uniqueBodyId===s.selectedPaymentMethodGroup.uniqueBodyId?(s.selectedPaymentMethod=null,u.broadcastSelectedPaymentMethodDetails(s.selectedPaymentMethodGroup,s.selectedPaymentMethod)):u.broadcastDeselectRecurringPaymentRadioButton()})),_=s.$on(n.SELECTED_PAYMENT_METHOD_CHANGED,function(e,t){d(function(){s.selectedPaymentMethod=t,f(),(-1!==s.paymentMethodsGroup.methods.indexOf(s.selectedPaymentMethod)&&s.selectedPaymentMethod.category===i.RECURRING_CONTRACT||s.paymentMethodsGroup===s.selectedPaymentMethodGroup&&!s.selectedPaymentMethod)&&(u.broadcastSelectedPaymentMethodDetails(s.selectedPaymentMethodGroup,s.selectedPaymentMethod),s.selectedPaymentMethod)||u.broadcastDeselectRecurringPaymentRadioButton()},0)}),E=r.createOrderPaymentPostData(s,function(){return{paymentMethodId:s.selectedPaymentMethod.id,paymentMethodCategory:s.selectedPaymentMethod.category,adyenData:(e={cvc:s.selectedPaymentMethod.enteredCode,generationtime:s.selectedPaymentMethod.formGenerationTime},adyen.encrypt.createEncryption(key,{enableValidations:!1}).encrypt(e)),cardBin:s.selectedPaymentMethod.cardBin,last4Numbers:s.selectedPaymentMethod.last4Number,nameOnCard:s.selectedPaymentMethod.nameOnCard};var e},function(e,t){return t.id===e.selectedPaymentMethod.id&&t.category===i.RECURRING_CONTRACT}),C=u.paymentMethodDetailsSelectedListener(s,y,h),w=u.resetSelectedPaymentMethodGroupListener(s),T=s.$on(a.PLACE_ORDER_IN_PROGRESS,function(e,t){s.isPlaceOrderInProgress=t}),A=s.$on(n.ADYEN_CHECKOUT_COMPONENT_ADDED,function(e){var t=c.retrieveComponentMapsByCategory(i.NON_HOSTED);s.isAddedCardButtonVisible=t&&0<t.length}),P=u.requestForButtonValidationFuncListener(s,y),O=r.listenForPlaceOrderInProgress(s),I=function(e,t){return l("filter")(e,function(e){return e.id===t})[0]},R=function(){return{paymentMethodId:"",paymentMethodCategory:"",cardBin:"",last4Numbers:"",nameOnCard:""}},M=s.$on(n.DESELECTED_TARGET_RECURRING_PAYMENT_RADIO_BUTTON,function(e,t){var n=l("filter")(s.recurringPaymentMethods,function(e){return e.category===i.RECURRING_CONTRACT&&t.newSelectionId===e.id});n&&0<n.length&&u.broadcastSelectRecurringPaymentRadioButton(t.newSelectionId)}),D=s.$on(p.ADDRESS_LOAD_COMPLETED,function(){d(function(){s.isUserDetailsLoaded=!0},10)}),N=s.$on(n.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,function(e,t){s.isCardsSessionAvailable&&(s.isRenderedSavedCardsAvailable=t)});s.$on(t,function(){_(),w(),E(),S(),C(),T(),P(),O(),A(),setCheckoutViewUpdate(),D(),M(),N()});s.init=function(e){s.paymentMethodsGroup=e,s.paymentMethodsGroup===s.selectedPaymentMethodGroup&&s.selectedPaymentMethod&&s.selectedPaymentMethod.category===i.RECURRING_CONTRACT&&u.broadCastButtonValidationFunc(y),s.recurringPaymentMethods=l("filter")(s.paymentMethodsGroup.methods,function(e){return e.category===i.RECURRING_CONTRACT});e=c.adyenCheckoutBuildPromise();e?(angular.forEach(s.recurringPaymentMethods,function(e){e.containerId="stored-card"+e.id}),e.then(function(){m()})):m()}}]),angular.module("gmgApp").controller("ApplePayPaymentMethodController",["$scope","DESTROY_EVENT_NAME","paymentMethodsService","$rootScope","ApplePayService","APPLE_PAY_CONSTANTS","ApiService","$filter","PAYMENT_EVENTS","paymentService","validationHandlerService",function(i,e,t,o,n,a,s,r,l,c,u){i.transactionInfoObject=null,i.transactionInfo=null,i.allowedCardNetworks=null,i.lineItems=null,i.isSessionActive=!1,i.applePaySession=n.getApplePaySession();function d(e){return i.isPlaceOrderInProgess}function p(){c.placeOrderInProgressButton(!0),i.isSessionActive=!0,i.transactionInfoObject=n.getApplePayTransactionInfo(),i.transactionInfo=JSON.parse(i.transactionInfoObject.ApplePayTransactionInfo),i.allowedCardNetworks=i.transactionInfoObject.AllowedCardNetworks.trim().split(/\s*,\s*/).filter(Boolean),i.lineItems=JSON.parse(i.transactionInfoObject.LineItems);var e={currencyCode:i.transactionInfo.currencyCode,countryCode:i.transactionInfo.countryCode,total:{label:a.LABEL,amount:i.transactionInfo.totalPrice},supportedNetworks:i.allowedCardNetworks,merchantCapabilities:[a.SUPPORTS_3DS]},r=new ApplePaySession(1,e);r.onvalidatemerchant=function(e){s.getApplePayMerchantSession(i.transactionInfo.merchantIdentifier,i.transactionInfoObject.MerchantAccount).then(function(e){e.data.CheckoutSessionResponse&&(e=JSON.parse(e.data.CheckoutSessionResponse),r.completeMerchantValidation(e))},function(e){u.broadcastNewValidationModel(e)})},r.onpaymentmethodselected=function(e){var t={label:a.LABEL,amount:i.transactionInfo.totalPrice};r.completePaymentMethodSelection(t,i.lineItems)},r.onpaymentauthorized=function(e){var t={paymentMethodId:i.selectedPaymentMethod.id,paymentMethodCategory:i.selectedPaymentMethod.category},n=e.payment.token.paymentMethod.displayName;t.applePayToken=btoa(JSON.stringify(e.payment.token.paymentData)),t.paymentIssuerId=e.payment.token.paymentMethod.network,t.last4Numbers=n.substr(n.length-4),o.$broadcast(l.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,t),r.completePayment(status),i.isSessionActive=!1},r.oncancel=function(e){i.isSessionActive=!1,c.placeOrderInProgressButton(!1),o.$broadcast(a.EVENTS.APPLE_PAY_CANCEL)},r.begin()}var h=t.selectingPaymentMethodOnGroupChangedListener(i,d),f=t.paymentMethodDetailsSelectedListener(i,d),m=t.resetSelectedPaymentMethodGroupListener(i),g=(i.init=function(e){i.paymentMethodsGroup=e,i.paymentMethodsGroup===i.selectedPaymentMethodGroup&&i.selectedPaymentMethod&&t.broadCastButtonValidationFunc(d)},i.$on(l.CONSTRUCT_ORDER_PAYMENT_DATA,function(){i.selectedPaymentMethodGroup.uniqueBodyId===i.paymentMethodsGroup.uniqueBodyId&&r("filter")(i.selectedPaymentMethodGroup.methods,function(e){return e.id===i.selectedPaymentMethod.id})[0]&&p()})),v=c.listenForPlaceOrderInProgress(i);i.$on(e,function(){m(),h(),f(),g(),v()})}]),angular.module("gmgApp").controller("BasePaymentMethodsController",["$scope","$filter","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","paymentMethodsService","Basket","APPLE_PAY_CONSTANTS","paymentMethodConstants","paymentService","PAYMENT_EVENTS","$rootScope","$timeout",function(n,e,t,r,i,o,a,s,l,c,u,d){n.PAYMENT_METHODS=s,n.selectedPaymentMethod=null,n.selectedPaymentMethodGroup=null,n.paymentMethodsGroups=[],i.broadcastPaymentMethodsLoadingStatus(n.hideApplePay=!0);function p(t){d(function(){o.getWhenReady().then(function(e){e.setHandlingTotal(t)})})}var h=n.$on(r.LOADING_COMPLETE,function(e,t){t=t,n.paymentMethodsGroups=t.paymentMethodsGroups,n.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,n.selectedPaymentMethod=t.selectedPaymentMethod,i.broadcastSelectedPaymentMethodDetails(n.selectedPaymentMethodGroup,n.selectedPaymentMethod,!0),i.broadcastPaymentMethodsLoadingStatus(!1)}),f=l.listenForPlaceOrderInProgress(n),m=n.$on(a.EVENTS.APPLE_PAY_SUPPORTED,function(){n.hideApplePay=!1}),g=n.$on(r.SELECTED_PAYMENT_METHOD_TYPE_CHANGED,function(e,t,n){p(n.HandlingCharge)}),v=n.$on(r.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){t.selectedPaymentMethod&&!t.selectedPaymentMethod.methodTypes&&p(t.selectedPaymentMethod.handlingTotal)}),y=n.$on(r.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,function(e,t){n.isRenderedSavedCardsAvailable=t});n.$on(t,function(){h(),f(),m(),v(),g(),y()}),n.changePaymentMethodId=function(t){n.selectedPaymentMethodGroup=e("filter")(n.paymentMethodsGroups,function(e){return e.uniqueBodyId===t})[0],n.selectedPaymentMethodGroup?("Paypal"===n.selectedPaymentMethodGroup.category?u.$broadcast(c.PAYPAL_SELECTED,!0):"Paypal"!==n.selectedPaymentMethodGroup.category&&u.$broadcast(c.PAYPAL_SELECTED,!1),n.selectedPaymentMethod=null,n.selectedMethodType=null,(1<n.selectedPaymentMethodGroup.methods.length||n.selectedPaymentMethodGroup.methods[0].methodTypes&&0<n.selectedPaymentMethodGroup.methods[0].methodTypes.length)&&o.getWhenReady().then(function(e){e.setHandlingTotal(0)}),i.broadcastSelectedPaymentMethodGroup(n.selectedPaymentMethodGroup)):(o.getWhenReady().then(function(e){e.setHandlingTotal(0)}),i.broadcastResetSelectedPaymentMethod()),i.broadCastPaymentAccordionChanged()}}]),angular.module("gmgApp").controller("BoaCompraPaymentMethodController",["$rootScope","$scope","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","paymentMethodsService","paymentService","$filter",function(t,n,e,r,i,o,a){n.selectedMethodTypeClick=function(e){n.selectedMethodType=e,t.$broadcast(r.SELECTED_PAYMENT_METHOD_TYPE_CHANGED,n.selectedPaymentMethod,n.selectedMethodType)};function s(e){return!(n.selectedMethodType&&!n.isPlaceOrderInProgess)||-1===e.methodTypes.indexOf(n.selectedMethodType)}function l(e){var t=a("filter")(e.selectedPaymentMethod.methodTypes,{UsedForCustomersLastPurchase:!0});t&&0<t.length&&e.selectedMethodTypeClick(t[0])}var c=i.selectingPaymentMethodOnGroupChangedListener(n,s),u=i.paymentMethodDetailsSelectedListener(n,s,null,l),d=i.resetSelectedPaymentMethodGroupListener(n),p=o.createOrderPaymentPostData(n,function(){return{paymentMethodId:n.selectedPaymentMethod.id,paymentMethodCategory:n.selectedPaymentMethod.category,boaCompraPaymentMethodId:n.selectedMethodType.Id}},function(e,t){return t.id===e.selectedPaymentMethod.id}),h=i.requestForButtonValidationFuncListener(n,s),f=o.listenForPlaceOrderInProgress(n);n.$on(e,function(){u(),d(),p(),c(),h(),f()}),n.init=function(e,t){n.paymentMethodsGroup=e,n.serviceChargeText=t,n.paymentMethodsGroup===n.selectedPaymentMethodGroup&&n.selectedPaymentMethod&&l(n)}}]),angular.module("gmgApp").controller("GooglePayPaymentMethodController",["$scope","DESTROY_EVENT_NAME","paymentMethodsService","googlePayService","$filter","$rootScope","PAYMENT_EVENTS","paymentService","validationHandlerService",function(r,e,n,t,i,o,a,s,l){function c(e){return r.isPlaceOrderInProgess}function u(){l.requestValidationModelErrorClearing();var e,n={paymentMethodId:r.selectedPaymentMethod.id,paymentMethodCategory:r.selectedPaymentMethod.category};(e=Object.assign({},t.getBaseRequest())).allowedPaymentMethods=[t.getCardPaymentMethod()],e.transactionInfo=t.getGoogleTransactionInfo(),e.merchantInfo={merchantId:t.getGooglePayMerchantId(),merchantName:t.getGooglePayMerchantName()},e.emailRequired=!0,t.getPaymentsClient().loadPaymentData(e).then(function(e){var t;e.paymentMethodData&&(t=e.paymentMethodData,n.googlePayToken=t.tokenizationData.token,n.googlePayEmail=e.email,t.info)&&(e=t.info,n.last4Numbers=e.cardDetails,n.paymentIssuerId=e.cardNetwork,e.billingAddress)&&(n.userPaymentProviderAddress={addressLine1:e.billingAddress.address1,addressLine2:e.billingAddress.address2,addressLine3:e.billingAddress.address3,countryCode:e.billingAddress.countryCode,postcode:e.billingAddress.postalCode,fullName:e.billingAddress.name,town:e.billingAddress.locality,stateCode:e.billingAddress.administrativeArea}),o.$broadcast(a.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,n)}).catch(function(e){"DEVELOPER_ERROR"===e.statusCode&&l.broadcastNewValidationModel({data:d}),console.error(e)})}var d="",p=r.$on(a.CONSTRUCT_ORDER_PAYMENT_DATA,function(){r.selectedPaymentMethodGroup.uniqueBodyId===r.paymentMethodsGroup.uniqueBodyId&&i("filter")(r.selectedPaymentMethodGroup.methods,function(e){return e.id===r.selectedPaymentMethod.id})[0]&&u()}),h=n.selectingPaymentMethodOnGroupChangedListener(r,c),f=n.paymentMethodDetailsSelectedListener(r,c),m=n.resetSelectedPaymentMethodGroupListener(r),g=n.requestForButtonValidationFuncListener(r,c),v=s.listenForPlaceOrderInProgress(r);r.$on(e,function(){m(),h(),f(),g(),p(),v()}),r.init=function(e,t){d=t,r.paymentMethodsGroup=e,r.paymentMethodsGroup===r.selectedPaymentMethodGroup&&r.selectedPaymentMethod&&n.broadCastButtonValidationFunc(c)}}]),angular.module("gmgApp").controller("PaymentMethodsController",["$scope","payPalService","$controller",function(e,t,n){e.init=function(e){t.setPaypalLoadingErrorMessage(e)},n("BasePaymentMethodsController",{$scope:e})}]),angular.module("gmgApp").controller("PaymentMethodsController",["$scope","$controller",function(e,t){e.init=function(e){},t("BasePaymentMethodsController",{$scope:e})}]),angular.module("gmgApp").controller("PaymentMethodsV2Controller",["$scope","$filter","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","paymentMethodsService","Basket","APPLE_PAY_CONSTANTS","paymentMethodConstants","paymentService","PAYMENT_EVENTS","payPalService","$rootScope","$timeout","paymentBillingAddressHtmlService","billingAddressService","userProfileService","ApiService","validationHandlerService",function(r,n,e,t,i,o,a,s,l,c,u,d,p,h,f,m,g,v){r.PAYMENT_METHODS=s,r.selectedPaymentMethod=null,r.selectedPaymentMethodGroup=null,r.paymentMethodsGroups=[];function y(t){p(function(){o.getWhenReady().then(function(e){e.setHandlingTotal(t)})})}var b="",S=(i.broadcastPaymentMethodsLoadingStatus(r.hideApplePay=!0),r.$on(t.LOADING_COMPLETE,function(e,t){t=t,r.paymentMethodsGroups=t.paymentMethodsGroups,r.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,r.selectedPaymentMethod=t.selectedPaymentMethod,i.broadcastSelectedPaymentMethodDetails(r.selectedPaymentMethodGroup,r.selectedPaymentMethod,!0),i.broadcastPaymentMethodsLoadingStatus(!1)})),_=l.listenForPlaceOrderInProgress(r),E=r.$on(a.EVENTS.APPLE_PAY_SUPPORTED,function(){r.hideApplePay=!1}),C=r.$on(t.SELECTED_PAYMENT_METHOD_TYPE_CHANGED,function(e,t,n){y(n.HandlingCharge)}),w=r.$on(t.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){t.selectedPaymentMethod&&!t.selectedPaymentMethod.methodTypes&&y(t.selectedPaymentMethod.handlingTotal)}),T=r.$on(c.PENDING_ORDER_EXISTS,function(e,t){r.hasPendingOrder=t}),A=r.$watchGroup(["hasPendingOrder","selectedPaymentMethod.allowsPaymentNotifications"],function(){r.hasPendingOrder&&r.selectedPaymentMethod&&r.selectedPaymentMethod.allowsPaymentNotifications&&v.broadcastNewValidationModel({data:b},!1)});r.$on(e,function(){S(),_(),E(),w(),C(),T(),A()}),r.hasBoaCompraPaymentMethod=function(){var e=n("filter")(r.paymentMethodsGroups,function(e){return e.category===r.PAYMENT_METHODS.BOACOMPRA_EUR||e.category===r.PAYMENT_METHODS.BOACOMPRA});return e&&0<e.length},r.changePaymentMethodId=function(t){r.selectedPaymentMethodGroup=n("filter")(r.paymentMethodsGroups,function(e){return e.uniqueBodyId===t})[0],r.selectedPaymentMethodGroup?("Paypal"===r.selectedPaymentMethodGroup.category?d.$broadcast(c.PAYPAL_SELECTED,!0):"Paypal"!==r.selectedPaymentMethodGroup.category&&d.$broadcast(c.PAYPAL_SELECTED,!1),r.selectedPaymentMethod=null,r.selectedMethodType=null,(1<r.selectedPaymentMethodGroup.methods.length||r.selectedPaymentMethodGroup.methods[0].methodTypes&&0<r.selectedPaymentMethodGroup.methods[0].methodTypes.length)&&o.getWhenReady().then(function(e){e.setHandlingTotal(0)}),i.broadcastSelectedPaymentMethodGroup(r.selectedPaymentMethodGroup)):(o.getWhenReady().then(function(e){e.setHandlingTotal(0)}),i.broadcastResetSelectedPaymentMethod()),i.broadCastPaymentAccordionChanged()},r.init=function(e,t,n){u.setPaypalLoadingErrorMessage(e);e=angular.fromJson(t);r.BILLING_ADDRESS_ERROR=e.BillingAddressErrorMessages,b=e.PendingOrderRestrictionDisclaimerMessage,f.setBillingMessages(r.BILLING_ADDRESS_ERROR),g.userProfile().then(function(e){m.setUserProfile(e.data),h.setBillingAddressHtmlUrl(n)})}}]),angular.module("gmgApp").controller("PayPalPaymentMethodController",["$scope","ApiService","paymentMethodsService","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","billingAddressService","paymentService","$timeout","validationHandlerService","paymentMethodConstants","payPalService",function(n,e,r,t,i,o,a,s,l,c,u){n.PAYMENT_METHODS=c,n.cancelPayPalBillingAgreement=function(t){s(function(){n.selectedPaymentMethodGroup.cancellingPayPalBillingAgreement=!0},0),e.cancelPayPalBillingAgreement().then(function(){var e=n.selectedPaymentMethodGroup.methods.indexOf(t);-1!==e&&n.selectedPaymentMethodGroup.methods.splice(e,1),n.selectedPaymentMethodGroup.usePayPalBillingAgreement=!1,n.selectedPaymentMethodGroup.savePayPalDetails=!1},function(e){l.broadcastNewValidationModel(e)}).finally(function(){s(function(){n.selectedPaymentMethodGroup.cancellingPayPalBillingAgreement=!0},0)})};function d(e){return n.isPlaceOrderInProgess}var p=n.$on(i.SELECTED_PAYMENT_METHOD_GROUP_CHANGED,function(e,t){n.selectedPaymentMethodGroup=t,n.paymentMethodsGroup.uniqueBodyId===n.selectedPaymentMethodGroup.uniqueBodyId&&(n.selectedPaymentMethod=n.selectedPaymentMethodGroup.methods[0],-1!==n.paymentMethodsGroup.methods.indexOf(n.selectedPaymentMethod)&&(n.selectedPaymentMethod.isNotReadyToSubmit=d),r.broadcastSelectedPaymentMethodDetails(n.selectedPaymentMethodGroup,n.selectedPaymentMethod))}),h=r.paymentMethodDetailsSelectedListener(n,d),f=r.resetSelectedPaymentMethodGroupListener(n),m=(n.$watch("paymentMethodsGroup.usePayPalBillingAgreement",function(e,t){e!==t&&(n.paymentMethodsGroup.previousButtonCleared=!1,s(function(){n.paymentMethodsGroup.previousButtonCleared=!0},1))}),a.createOrderPaymentPostData(n,function(){return{paymentMethodId:n.selectedPaymentMethod.id,paymentMethodCategory:n.selectedPaymentMethodGroup.category,savePayPalDetails:n.selectedPaymentMethodGroup.savePayPalDetails,usePayPalBillingAgreement:n.selectedPaymentMethodGroup.usePayPalBillingAgreement,riskSessionCorrelationId:u.getRiskSessionCorrelationId()}},function(e,t){return t.id===e.selectedPaymentMethod.id})),g=r.requestForButtonValidationFuncListener(n,d),v=a.listenForPlaceOrderInProgress(n);n.$on(t,function(){f(),m(),p(),h(),g(),v()}),n.init=function(e){n.paymentMethodsGroup=e,n.paymentMethodsGroup.previousButtonCleared=!0,n.BILLING_ADDRESS_ERROR=o.getBillingMessages(),n.paymentMethodsGroup===n.selectedPaymentMethodGroup&&n.selectedPaymentMethod&&r.broadCastButtonValidationFunc(d)}}]),angular.module("gmgApp").controller("PhonePaymentMethodController",["$scope","DESTROY_EVENT_NAME","paymentMethodsService","paymentService",function(t,e,n,r){function i(e){return t.isPlaceOrderInProgess}var o=n.selectingPaymentMethodOnGroupChangedListener(t,i),a=n.paymentMethodDetailsSelectedListener(t,i),s=n.resetSelectedPaymentMethodGroupListener(t),l=r.createOrderPaymentPostData(t,function(){return{paymentMethodId:t.selectedPaymentMethod.id,paymentMethodCategory:t.selectedPaymentMethod.category}},function(e,t){return t.id===e.selectedPaymentMethod.id}),c=n.requestForButtonValidationFuncListener(t,i),u=r.listenForPlaceOrderInProgress(t);t.$on(e,function(){s(),l(),o(),a(),c(),u()}),t.init=function(e){t.paymentMethodsGroup=e,t.paymentMethodsGroup===t.selectedPaymentMethodGroup&&t.selectedPaymentMethod&&n.broadCastButtonValidationFunc(i)}}]),angular.module("gmgApp").controller("PdpAssociatedProductController",["$scope","WantListService","pdpAssociatedProductsService","PDP_EVENTS","MODALS","$rootScope",function(r,i,e,t,n,o){var a="",s=!1,l=(r.associatedVariantId="",r.saveToWishList=function(t,n){i.saveToWishList(t,s,a).then(function(e){e&&(r.associatedProduct.IsGameWant=!0,utag.link({tealium_event:"wishlist",product_id:t,product_price:n,product_quantity:"1",currency:r.currency}))})},r.unsaveToWishList=function(e){i.unsaveToWishList(e,s,a).then(function(e){e&&(r.associatedProduct.IsGameWant=!1)})},r.displaySignInModal=function(){o.$broadcast(n.EVENTS.OPEN_SIGN_IN_MODAL)},r.$on(t.LOGGED_OUT_USER_WISH_LIST_ERROR_MESSAGE,function(e){a=e})),c=r.$on(t.IS_LOGGED_IN,function(e){s=e}),u=r.$on(t.CURRENCY,function(e){r.currency=e});r.$on("$destroy",function(){l(),c(),u()}),r.hideButtons=function(){return r.$parent.isBundle()},a=e.getLoggedOutUserWishListErrorMessage(),s=e.getLoggedInStatus(),r.currency=e.getCurrency()}]),angular.module("gmgApp").controller("PdpAssociatedProductsController",["$scope","ApiService","PRODUCT_CHANGED","ASSOCIATED_PRODUCT_LIMIT","ObjectValidator","User","OwlCarousalCustomNavigationService","pdpProductService",function(n,t,e,r,i,o,a,s){n.switchToApiAssociatedProducts=!1;function l(){var e;n.associatedProducts=n.product.allAssociatedProducts.slice(0,r.MAX),!i.isNullOrUndefined(n.associatedProducts)&&0!==n.associatedProducts.length&&n.loggedIn&&(e=n.associatedProducts.map(function(e){return e.Code}).join(","),t.areGamesWanted(e).then(function(t){n.associatedProducts.forEach(function(e){e.IsGameWant=t.data[e.Code]})}))}var c=$("#server-side-associated-carousel"),u=(n.associatedProducts=null,n.minAssociatedProductLimit=r.MIN,n.$on(e,function(e,t){n.product=t,(c=$("#client-side-associated-carousel")).data("owl.carousel")&&c.trigger("destroy.owl.carousel"),l(),n.switchToApiAssociatedProducts=!0}));n.$on("$destroy",function(){u()}),n.initCarousel=function(){c.owlCarousel({loop:!1,margin:18,navText:["<i class='glyphicon glyphicon-menu-left'></i>","<i class='glyphicon glyphicon-menu-right'></i>"],nav:!0,responsiveClass:!1,responsive:{0:{nav:!1,stagePadding:66,items:1},480:{nav:!1,stagePadding:66,items:2},768:{items:2},991:{items:3},1200:{margin:25,items:4}}});var e=c.find(".owl-dot.active").index();c.find(".owl-next").on("click",function(){e=a.moveNextPage(c,e)}),c.find(".owl-prev").on("click",function(){e=a.movePrevPage(c,e)})},n.product=s.getPdpProduct(),n.isBundle=function(){return"Bundles"===n.product.platform.name},n.selectItemGaEvent=function(e,t,n,r){tealiumLoggingService.logSelectItemClicked(e,t,n,r)},o.getWhenReady().then(function(e){n.user=e,n.loggedIn=e.isAuthenticated,l()})}]),angular.module("gmgApp").controller("PdpController",["$rootScope","$scope","Product","$window","$location","$cookies","$timeout","ApiService","User","WantListService","ObjectValidator","serverTimeService","TIME_RECEIVED","RELOAD_REQUIREMENT","AgeVerificationService","MODALS","pdpProductService","pdpAssociatedProductsService","LanguageService","GlobalMessageBarService","tealiumLoggingService","globalVariablesService","SECRET_VOUCHER_CLAIM_SOURCE","$element",function(e,d,p,h,i,x,n,f,r,o,a,s,t,l,c,u,m,g,v,y,b,S,_,E){d.useDynamicGmgPrices=!1,d.hasPdpApiUpdateBeenDone=!1,d.initLoading=!0,d.gamesLoaded=!1,d.products=[],d.productsByKey={},d.currency=h.games.Currency,d.visiblePlatformId="",d.visibleDrmId="",d.visibleEditionId="",d.showCampaignCountdown=!1,d.showComingSoonCountdown=!1,d.countdownEndTime=null,d.countdownStartTime=null,d.countdownEndTimeForComingSoon=null,d.countdownStartTimeForComingSoon=null,d.vrNames="",d.loggedIn=!1,d.voucherOfferId=null,d.loginLink=window.location.pathname,d.isGameWant=!1,d.loadingWant=!0,d.regionalRestrictions={collapsed:!0,loaded:!1},d.loadingEditions=!1,d.loadingPlatforms=!1,d.DEFAULT_PROD_IMG=S.getDefaultProdImg(),d.DEFAULT_VERTICAL_PROD_IMG=S.getDefaultVerticalProdImg(),d.DEFAULT_LARGE_PROD_IMG=S.getDefaultLargeProdImg(),d.DEFAULT_MAIN_PROD_IMG=S.getDefaultMainProdImg(),d.drmMouseOver=function(e,t){e.target.style.backgroundColor=t},d.drmMouseLeave=function(e){e.target.style.backgroundColor="transparent"};function C(e,t,n,r){e=U(e,t,n,r)||L(t,n,r),d.visiblePlatformId=e.platform.compoundId,d.visibleDrmId=e.drmId,d.visibleEditionId=e.edition.id,d.product=e,I()}function w(){f.getCurrentCampaign(d.product.sku).success(function(e){e=e,d.product.price=e.Price,d.product.mrpPrice=e.MrpPrice,d.product.oldPrice=e.OldPrice,d.product.discount=e.DiscountPercentOff,d.product.campaignInfo=e.CampaignInfo,d.updateCampaign()}).error(function(){d.showCampaignCountdown=!1})}var T=!(d.setSecretVoucherErrorMessage=function(e,t,n){d.secretVoucherBadCodeErrorMessage=e,d.secretVoucherInternalErrorMessage=t,d.secretVoucherGeneralErrorMessage=n}),A={},P=function(){d.loggedIn&&f.isWanted(d.product.sku).then(function(e){d.isGameWant=e.data}).finally(function(){d.loadingWant=!1})},O=function(){d.vrNames=d.product.supportedVrs.map(function(e){return e.Name}).join(", "),c.verifyAge(d.product.ageRatingMinimumAge,u.TOO_YOUNG_MODAL_TYPE.PDP,d.product.sku)},I=function(){O(),d.gamesLoaded=!0,d.initLoading=!1},R=function(n){return n.filter(function(e,t){return n.indexOf(e)!==t})},M=function(e){d.drms=[];var t=[],n=(e.map(function(e){return e.Drms.map(function(e){t.push(e.Id)})}),R(t));e.forEach(function(t){t.Drms.forEach(function(e){d.drms.push({id:e.Id,className:e.ClassName,colour:e.Colour,sortPriority:e.SortPriority,platformCompoundId:t.CompoundId,drmPlatformDropdownName:e.DrmPlatformDropdownName,showPlatformToDrm:n.includes(e.Id.toString()),name:e.Name})})}),d.drms.sort(function(e,t){return e.sortPriority>t.sortPriority||e.sortPriority===t.sortPriority&&e.drmPlatformDropdownName<t.drmPlatformDropdownName?1:-1})},$=function(e){var t=document.createElement("a");return t.href=e,t},D=function(e){if(e)for(var t in e)A[t]||(A[t]={discounts:{},expended:e[t]});var n=d.product.secretVoucher?d.product.secretVoucher[d.user.group]:null;n&&A[n]&&!A[n].expended?(d.voucherOfferId=n,A[d.voucherOfferId].claimed&&A[d.voucherOfferId].discounts[d.product.sku]?(d.product.discount=A[d.voucherOfferId].discounts[d.product.sku].discountPercent,d.product.price=A[d.voucherOfferId].discounts[d.product.sku].discountedPrice,d.finishDiscountAnimation()):d.resetDiscountAnimation&&d.resetDiscountAnimation()):d.voucherOfferId=null},N=function(e){var t=p.getProductKey(d.visiblePlatformId,d.visibleDrmId,d.visibleEditionId),t=(d.product=d.productsByKey[t],O(),P(),$(d.product.pageUrl));if(i.path(t.pathname),m.broadcastPdpProductChange(d.product),T=!1,d.useDynamicGmgPrices=!0,d.updateCampaign(),d.updateComingSoonCountDownBlock(),e){var n,r=[];for(n in d.products)n.secretVoucher&&n.secretVoucher[d.user.group]&&!A[n.secretVoucher[d.user.group]]&&r.push(n.secretVoucher[d.user.group]);r.length?(d.voucherOfferId=null,f.areSecretVoucherOffersExpended(r.join(",")).then(function(e){D(e.data)})):D()}else D()},U=(d.showLoggedOutMrp=function(){return!(d.user&&d.user.username||"INR"===(!d.user||d.user.currency)||d.product.isOutOfStock||d.product.isComingSoon||!(d.product.price>d.product.mrpPrice)||d.product.hideLoggedOutMrp)},d.saveToWishList=function(t,n,r){o.saveToWishList(t,d.loggedIn,d.loggedOutUserWishlistErrorMessage).then(function(e){e&&(d.isGameWant=!0,utag.link({tealium_event:"wishlist",product_id:t,product_price:r,product_quantity:"1",currency:n}))})},d.unsaveToWishList=function(e){o.unsaveToWishList(e,d.loggedIn,d.loggedOutUserWishlistErrorMessage).then(function(e){e&&(d.isGameWant=!1)})},d.editionFilter=function(e){return e.platform.compoundId===d.product.platform.compoundId&&e.drmId===d.product.drmId&&e.edition.display},function(e,t,n,r){return M(e),d.products=p.initForPdp(e),d.productsByKey=p.getByKey(d.products),d.productsByKey[p.getProductKey(t,n,r)]}),k=(d.changePlatform=function(e){k(e,null,null)},d.changeDrm=function(e,t,n){var r=E[0].querySelector(".drm-button.active").dataset.drmName;b.logDrmButtonClicked(d.product.sku,r,n),k(t,e,null)},d.changeEdition=function(e,t){t.preventDefault(),k(null,null,e)},function(e,t,n){if(d.closeRegionalRestrictions(),d.resetRegionalRestrictions(),e&&d.product.platform.compoundId!==e||t&&d.product.drmId!==t||n&&d.product.edition.id!==n){var r,i,o,a,s,l=e||d.product.platform.compoundId,c=t||d.product.drmId,u=n||d.product.edition.id;if(d.productsByKey[p.getProductKey(l,c,u)])d.visiblePlatformId=l,d.visibleDrmId=c,d.visibleEditionId=u;else{if(!d.hasPdpApiUpdateBeenDone)return e&&(d.loadingPlatforms=!0),t&&(d.loadingDrms=!0),n&&(d.loadingEditions=!0),r=e,i=t,o=n,a=C,s=function(){d.loadingPlatforms=!1,d.loadingDrms=!1,d.loadingEditions=!1},void f.pdpDetails({GameVariantCodes:[h.gameVariantCode],LanguageCode:v.getCurrentLanguageCode(),VariableCornerFlash:!0}).then(function(e){a(e.data,r,i,o),d.updateCampaign(),d.updateComingSoonCountDownBlock(),N(!0),d.closeRegionalRestrictions()}).finally(function(){s(),d.hasPdpApiUpdateBeenDone=!0});l=L(e,t,n);d.visiblePlatformId=l.platform.compoundId,d.visibleDrmId=l.drmId,d.visibleEditionId=l.edition.id}N()}}),L=function(n,r,i){var o=n||d.product.platform.compoundId,a=r||d.product.drmId,s=i||d.product.edition.id,e=d.productsByKey[p.getProductKey(o,a,s)];return e||(e=d.products.filter(function(e){return!(e.sku===d.product.sku||n&&e.platform.compoundId!==n||r&&e.drmId!==r||i&&e.edition.id!==i)})).find(function(e,t){return!n&&e.platform.compoundId===o||!r&&e.drmId===a||!i&&e.edition.id===s})||(e.length?e[0]:null)};d.updateCampaign=function(){var e,t=s.getServerTime(),n=d.product,r=n.campaignInfo;n.disableCampaignCountdown||a.isNullOrUndefined(t)||a.isNullOrUndefined(r)||a.isNullOrUndefined(n)||a.isNullOrUndefined(r.EndDate)?d.showCampaignCountdown=!1:(e=(n=new moment(r.EndDate)).clone().subtract(1,"days"),t<=n?(d.showCampaignCountdown=!r.IsBaseCampaign&&e<=t,d.countdownEndTime=r.EndDate,d.countdownStartTime=e.toJSON()):T||(T=!0,d.showCampaignCountdown=!1,w()))},d.updateShowMore=function(){e.$broadcast(l)},d.showCountdown=function(){d.showCampaignCountdown=!0},d.updateComingSoonCountDownBlock=function(){var e,t=s.getServerTime(),n=d.product;!n.displayReleaseCountdown||!n.isComingSoon||a.isNullOrUndefined(t)||a.isNullOrUndefined(n)||a.isNullOrUndefined(n.releaseDateAndTime)?d.showComingSoonCountdown=!1:(e=(n=new moment(n.releaseDateAndTime)).clone().subtract(7,"days"),t<=n&&(d.showComingSoonCountdown=e<=t,d.countdownEndTimeForComingSoon=n,d.countdownStartTimeForComingSoon=e.toJSON()))},d.onDiscountAction=function(){return f.claimSecretVouchers([d.voucherOfferId],d.product.sku,_.PDP).then(function(e){0===e.data.Errors.length?(d.product.discount=e.data.Games[0].DiscountPercent,d.product.price=e.data.Games[0].DiscountedPrice,d.useDynamicGmgPrices=!0,A[d.voucherOfferId].claimed=!0,A[d.voucherOfferId].discounts[e.data.Games[0].GameVariantCode]={discountPercent:e.data.Games[0].DiscountPercent,discountedPrice:e.data.Games[0].DiscountedPrice},y.globalMessage.visible=!1,y.globalMessage.isError=!1,d.secretVoucherHasError=!1,b.logSecretVoucherClaimed(e.data.Games[0]&&e.data.Games[0].VoucherConfigId?e.data.Games[0].VoucherConfigId:"")):400===e.data.Errors[0].ErrorCode?showError(d,d.secretVoucherBadCodeErrorMessage,!0):showError(d,d.secretVoucherInternalErrorMessage,!1)})},e.$on(t,d.updateCampaign),e.$on(t,d.updateComingSoonCountDownBlock),d.init=function(e,t){d.loggedOutUserWishlistErrorMessage=e,m.twitchAvailable=t,d.showSelectors=!0,n(function(){angular.element(".pdp-selectors").collapse("show")}),t=h.games.platforms,M(t),d.products=p.initForPdp(t),d.visiblePlatformId=h.visiblePlatformId,d.visibleDrmId=h.visibleDrmId,d.visibleEditionId=h.visibleEditionId,d.productsByKey=p.getByKey(d.products),d.product=d.productsByKey[p.getProductKey(d.visiblePlatformId,d.visibleDrmId,d.visibleEditionId)],m.broadcastPdpProductChange(d.product),T=!1,d.updateCampaign(),d.updateComingSoonCountDownBlock(),I(),g.setLoggedOutUserWishListErrorMessage(e),g.setCurrency(d.currency),r.getWhenReady().then(function(e){d.user=e,d.loggedIn=e.isAuthenticated,h.secretVoucherOfferIdsByTier&&h.secretVoucherOfferIdsByTier[e.group]&&h.secretVoucherOfferIdsByTier[e.group].length&&f.areSecretVoucherOffersExpended(h.secretVoucherOfferIdsByTier[e.group].join(",")).then(function(e){D(e.data)}),P()})},d.getRegionalRestrictions=function(){d.regionalRestrictions.loading=!0,f.pdpRegionalRestrictions(d.product.sku).success(function(e){d.regionalRestrictions.loadedSku=d.product.sku,d.regionalRestrictions.loaded=!0,angular.extend(d.regionalRestrictions,e),d.regionalRestrictions.loading=!1})},d.openRegionalRestrictions=function(){var e;d.regionalRestrictions.collapsing||(e=angular.element(".giftable-region-toggle"),d.regionalRestrictions.collapsing=!0,e.collapse("show"),e.on("shown.bs.collapse",function(){d.regionalRestrictions.collapsing=!1,d.regionalRestrictions.collapsed=!1}))},d.closeRegionalRestrictions=function(){var e;d.regionalRestrictions.collapsing||(e=angular.element(".giftable-region-toggle"),d.regionalRestrictions.collapsing=!0,e.collapse("hide"),e.on("hidden.bs.collapse",function(){d.regionalRestrictions.collapsing=!1,d.regionalRestrictions.collapsed=!0}))},d.toggleRegionalRestrictions=function(){d.regionalRestrictions.collapsed||d.regionalRestrictions.loading?(d.regionalRestrictions.loadedSku===d.product.sku||d.regionalRestrictions.loading||(d.resetRegionalRestrictions(),d.getRegionalRestrictions()),d.openRegionalRestrictions()):d.closeRegionalRestrictions()},angular.element(window).on("resize",function(){d.regionalRestrictions.collapsed||d.closeRegionalRestrictions()}),d.resetRegionalRestrictions=function(){d.regionalRestrictions={collapsed:!0,loaded:!1,loadedSku:""}},d.displaySignInModal=function(){e.$broadcast(u.EVENTS.OPEN_SIGN_IN_MODAL)},d.getXperience=function(){return d.user&&d.product.regionalXperience&&d.user.regionCode&&d.product.regionalXperience[d.user.regionCode]?d.product.regionalXperience[d.user.regionCode]:d.product.xperience}}]),angular.module("gmgApp").controller("PdpGalleryController",["$scope","User","ScreenSize","PRODUCT_CHANGED","ObjectValidator","pdpProductService","MODALS",function(r,t,i,e,o,n,a){function s(e){for(var t=0;t<e.length;t++){var n=e[t];n.TrustUrl=n.Type===u&&window.innerWidth<i.SCREEN_XS_MAX?n.Src:n.ThumbnailSrc}}function l(){r.loadingGalleryItem=!0,r.galleryItem=r.product.gallery[0],r.galleryItemId=0,r.galleryItems=r.product.gallery,s(r.galleryItems)}var c=$("#pdp-gallery-carousel"),u="",d="",p=(r.galleryItem=null,r.galleryItemId=0,r.galleryItems=null,r.player=null,r.loadingGalleryItem=!1,r.initCarousel=function(){c.owlCarousel({loop:!0,autoplay:!1,margin:25,center:!0,nav:!0,navText:['<i class="glyphicon glyphicon-menu-left"></i>','<i class="glyphicon glyphicon-menu-right"></i>'],responsive:{0:{items:3},1200:{items:7}}}),c.on("changed.owl.carousel",function(e){var t,n,e=e.page.index;e<0||(t=!o.isNullOrUndefined(r.player),n=r.galleryItem,r.galleryItem=r.product.gallery[e],r.galleryItemId=e,r.galleryItem.Type===u?(r.loadingGalleryItem=n.Src!==r.galleryItem.Src,t&&r.player.pauseVideo()):(r.loadingGalleryItem=!1,t&&n.YoutubeId!==r.galleryItem.YoutubeId&&r.player.loadVideoById(r.galleryItem.YoutubeId)))}),c.on("click",".video-item,.image-item",function(){var e=$(this).data("item");c.trigger("to.owl.carousel",e)})},r.playerReady=function(e){r.loadingGalleryItem=!1,r.player=e.target,r.player.mute(),t.getWhenReady().then(function(e){e.autoplay&&r.player.playVideo()})},r.playerStateChangeEventHandler=function(e){o.isNullOrUndefined(e.data)||0!==e.data||c.trigger("next.owl.carousel"),1<=$(".modal.in:visible").length&&r.player.pauseVideo()},r.onImageLoad=function(){r.loadingGalleryItem=!1},r.init=function(e,t){u=e,d=t,r.product=n.getPdpProduct(),l()},r.$on(e,function(e,t){r.product=t,c.data("owl.carousel")&&c.trigger("destroy.owl.carousel"),l(),r.loadingGalleryItem=!1,r.galleryItem.Type===d&&(r.player.loadVideoById(r.galleryItem.YoutubeId),r.player.mute())}));$(window).on("resize.doResize",function(){var e=r.galleryItems;r.$apply(function(){s(e)})}),r.$on("$destroy",function(){p()}),r.$on(a.EVENTS.OPEN_ALGOLIA_SEARCH_MODAL,function(){r.player.pauseVideo()}),r.$on(a.EVENTS.CLOSE_ALGOLIA_SEARCH_MODAL,function(){r.player.playVideo()})}]),angular.module("gmgApp").controller("PdpManualThirdOneBlockController",["$scope","$rootScope","ApiService","User","WantListService","MODALS","ObjectValidator","Product","tealiumLoggingService",function(o,e,a,s,i,t,l,c,n){o.showDefault=!0,o.blockId=0,o.blockTypeName="",o.setDefaultWishedGamesContenLinkIds=function(e,t,n,r,i){o.defaultWishedGamesContentLinkIds=e,o.addToWishlist=t,o.savedToWishlist=n,s.getWhenReady().then(function(e){e.isAuthenticated&&!l.isNullOrUndefined(o.defaultWishedGamesContentLinkIds)&&""!==o.defaultWishedGamesContentLinkIds&&a.getWishedGameForThirdOneblock(o.defaultWishedGamesContentLinkIds).then(function(e){e&&e.data&&(o.product=c.initForWantlist(e.data),o.showDefault=!1,o.loggedIn=!0,o.isGameWant=!0)})}),o.blockId=r,o.blockTypeName=i},o.saveToWishList=function(t,n,r){i.saveToWishList(t,o.loggedIn,"").then(function(e){e&&(o.isGameWant=!0,utag.link({tealium_event:"wishlist",product_id:t,product_price:r,product_quantity:"1",currency:n}))})},o.unsaveToWishList=function(e){i.unsaveToWishList(e,o.loggedIn,"").then(function(e){e&&(o.isGameWant=!1)})},o.selectItemGaEvent=function(e,t){n.logSelectItemClicked(e,t,o.blockId,o.blockTypeName)},o.displaySignInModal=function(){e.$broadcast(t.EVENTS.OPEN_SIGN_IN_MODAL)}}]),angular.module("gmgApp").controller("PdpPreDescriptionController",["$scope","PRODUCT_CHANGED","ObjectValidator",function(r,e,i){var t=r.$on(e,function(e,t){var n;r.productChanged=!0,n=t.preDescriptions,t=t.preDescriptionHeader,r.preDescriptions=n,r.preDescriptionHeader=t,r.showPreDescriptionHeader=!i.isNullOrEmptyString(r.preDescriptionHeader),r.showPreDescription=0<r.preDescriptions.length});r.$on("$destroy",function(){t()}),r.initPredescription=function(){r.productChanged=!1}}]),angular.module("gmgApp").controller("PdpRelatedArticlesController",["$scope","PRODUCT_CHANGED",function(e,t){var n=e.$on(t,function(){e.currentProductRelatedArticles=games.relatedArticles});e.$on("$destroy",function(){n()}),e.initRelatedArticles=function(){e.currentProductRelatedArticles=games.relatedArticles}}]),angular.module("gmgApp").controller("PdpReviewsController",["$rootScope","$scope","$window","$q","ApiService","REVIEW_VOTE","SCORE","ErrorHandler","Review","PRODUCT_CHANGED","DEFAULT_AVATAR_URL","REVIEW_SCORE_DIVIDER","REVIEWS_IN_FIVE","DAYS_IN_WEEK","REVIEWS_LOADED","pdpProductService","PDP_SECTION_ON_LOAD_EVENT","User",function(o,a,t,n,s,l,e,r,c,i,u,d,p,h,f,m,g,v){a.userIsAbleToDoAReview=!0,a.currentProductReview={},a.allGameReviews={},a.review={},a.reviewValidation=r.createValidationModel(),a.UP_VOTE=l.UP_VOTE,a.DOWN_VOTE=l.DOWN_VOTE;function y(e,t,n){angular.isArray(e)?r.handleResponse(a.reviewValidation,{data:e,status:t,headers:n}):429!==t&&500!==t&&(a.reviewValidation.exceptionMessage=e.Message||e,a.reviewValidation.hasServerError=!0)}function b(e,t){var n,r,i,o;return e.processingVote=!0,e.CurrentUserVote===t?(n=e,r=t,s.deleteReviewVote({Sku:a.product.sku,ReviewId:n.Id,VoteType:r}).success(function(){n.CurrentUserVote=null,n.processingVote=!1,r===l.UP_VOTE&&n.PositiveVotesCount--}).error(function(){n.processingVote=!1})):(i=e,o=t,s.postReviewVote({Sku:a.product.sku,ReviewId:i.Id,VoteType:o}).success(function(){o===l.UP_VOTE?i.PositiveVotesCount++:i.CurrentUserVote===l.UP_VOTE&&i.PositiveVotesCount--,i.CurrentUserVote=o,i.processingVote=!1}).error(function(){i.processingVote=!1}))}var S="#reviewForm",_="#rateForm",E=(moment.locale("en",{relativeTime:{future:"in %s",past:"%s",s:t.aFewSecondsAgo,m:"%d"+t.minutesSingularLabel,mm:"%d"+t.minutesPluralLabel,h:"%d"+t.hoursSingularLabel,hh:"%d"+t.hoursPluralLabel,d:"%d"+t.daySingularLabel,dd:function(e){return e<h?e+t.dayPluralLabel:(e=Math.round(e/h))+(1<e?t.weekPluralLabel:t.weekSingularLabel)},M:"%d"+t.monthSingularLabel,MM:"%d"+t.monthPluralLabel,y:"%d"+t.yearSingularLabel,yy:"%d"+t.yearPluralLabel}}),a.timeDifference=function(e){e=new Date(e);return moment(e).fromNow()},a.convertScore=function(){a.totalScoreStars=Math.ceil(a.totalScore/p),a.totalScoreText=e[a.totalScoreStars]},a.resetReviewForm=function(){a.userIsAbleToDoAReview=!0,a.reviewValidation.hasServerError=!1,a.review={}},a.loadMoreReviews=function(){return s.reviewsBySku(a,a.product.sku,a.currentProductReview.reviewBookmark).get(function(e){Array.prototype.push.apply(a.allGameReviews[a.product.sku].Reviews,e.Reviews),a.allGameReviews[a.product.sku].Bookmark=e.Bookmark,a.currentProductReview=c.init(a.allGameReviews[a.product.sku])}).$promise},a.$on(i,function(e){a.product=e,a.currentProductReview=c.init(a.allGameReviews[a.product.sku])}));a.$on("$destroy",function(){E()}),a.initReviewsScore=function(e,t,n,r,i){a.people=r,a.person=i,a.allGameReviews=e,a.product=m.getPdpProduct(),a.currentProductReview=c.init(a.allGameReviews[a.product.sku]),a.unableToReviewMessage=n,a.totalScore=t/d,a.convertScore(),v.getWhenReady().then(function(e){a.loggedIn=e.isAuthenticated}),o.$broadcast(g.REVIEWS)},a.postReview=function(e){if(a.review.showErrors=!0,r.clearErrors(a.reviewValidation),e){if(e.$invalid)return n.reject()}else a.review.Text="",a.review.Title="";return a.review.AvatarUrl=u,a.review.SkuId=a.product.sku,s.postReview(a.review).success(function(){var e,t;a.review.thanks=!0,a.review.showErrors=!1,a.review.ReviewDateTime=(new Date).toISOString(),a.review.Username=a.user.username,a.review.CloudNineId=a.user.cloudNineId,a.review.Text||(e=a.review,t=a.totalScore*a.currentProductReview.totalReviews*d,a.currentProductReview.totalReviews++,a.currentProductReview.reviewScore=(t+e.Score)/a.currentProductReview.totalReviews,a.totalScore=a.currentProductReview.reviewScore/d,a.convertScore())}).error(y)};a.VoteReviewUp=function(e){return a.currentVote=l.UP_VOTE,b(e,a.currentVote)},a.VoteReviewDown=function(e){return a.currentVote=l.DOWN_VOTE,b(e,a.currentVote)},a.updateShowMore=function(){o.$broadcast(f)},a.tryToAddReview=function(){return a.userIsAbleToDoAReview?s.canUserReviewTheGame(a.product.sku).success(function(e){a.userIsAbleToDoAReview=e.CanReview,!0===e.CanReview?a.showReviewForm():(a.reviewValidation.exceptionMessage=a.unableToReviewMessage,a.reviewValidation.hasServerError=!0)}).error(y):n.reject()},a.showReviewForm=function(){$(_).hide(),$(S).slideDown()},a.closeReviewForm=function(){$(S).hide(),$(_).slideDown()}}]),angular.module("gmgApp").controller("PdpReviewsSectionController",["$rootScope","$scope","PRODUCT_CHANGED","pdpProductService","$window","PDP_SECTION_ON_LOAD_EVENT",function(n,r,e,t,i,o){r.product=t.getPdpProduct(),r.reviewUrl=i.reviewUrl,r.selectionId="reviews";var a=r.$on(e,function(e,t){r.product=t;t=r.reviewUrl.split("/");t[t.length-1]=r.product.sku,r.reviewUrl=t.join("/"),n.$broadcast(o.RELOAD_ALL_SECTIONS,r.selectionId)});r.$on("$destroy",function(){a()})}]),angular.module("gmgApp").controller("PdpStatsSectionController",["$rootScope","$scope","PRODUCT_CHANGED","$window","PDP_SECTION_ON_LOAD_EVENT","pdpProductService",function(n,r,e,t,i,o){r.statsUrl=t.statsUrl,r.selectionId="stats",r.product=o.getPdpProduct();var a=r.$on(e,function(e,t){r.product=t,n.$broadcast(i.RELOAD_ALL_SECTIONS,r.selectionId)});r.$on("$destroy",function(){a()})}]),angular.module("gmgApp").controller("PdpTwitchSectionController",["$rootScope","$scope","PRODUCT_CHANGED","$window","PDP_SECTION_ON_LOAD_EVENT","pdpProductService",function(n,r,e,t,i,o){r.selectionId="twitch-streams",r.twitchUrl=t.twitchUrl,r.product=o.getPdpProduct();var a=r.$on(e,function(e,t){r.product=t,n.$broadcast(i.RELOAD_ALL_SECTIONS,r.selectionId)});r.$on("$destroy",function(){a()})}]),angular.module("gmgApp").controller("PhoneNumberBlockController",["$scope","modalService","ApiService","phoneNumberModalService",function(t,n,r,i){t.phoneNumberModal=null,t.isLoading=!0,t.init=function(e){t.phoneNumberModal=new n.Modal(e),i.setModal(t.phoneNumberModal),r.getPhoneNumber().then(function(e){t.phoneNumberModal.currentPhoneNumber=e.data&&e.data.Number?e.data.CountryDialCode+e.data.Number:"",t.isLoading=!1})}}]),angular.module("gmgApp").controller("PrePurchasedGameRedemptionController",["$scope","Product","$window","DESTROY_EVENT_NAME","ErrorHandler",function(e,t,n,r,i){e.gamesLoaded=!1,e.$on(r,function(){uplayClearErrorListener(),uplayErrorListener()}),e.initGames=function(){e.prePurchasedRedemptionValidation=i.createValidationModel(),e.product=t.initForPrePurchaseRedemption(n.game),e.gamesLoaded=!0}}]),angular.module("gmgApp").controller("PrizeWheelController",["$scope","$element","User","ApiService","Utils","$rootScope","MODALS",function(i,t,o,n,r,e,a){i.config={},i.winGameUrl=null,i.winGameName=null,i.keys=null,i.confetti=!1,i.IsUserLoggedIn=!1,i.isVoucherReserved=!1,i.voucherError=!1,i.isInactive=!1;var s="",l=(i.init=function(e,t,n,r){o.getWhenReady().then(function(e){e.isAuthenticated&&(i.IsUserLoggedIn=!0)}),i.config=e,i.isInactive=e.Inactive,i.twitterUrl=t,i.twitterShareTextTemplate=n||"",s=r},angular.element("#credit-modal"),angular.element("#winner-modal")),c=angular.element("#error-modal"),u=angular.element("#loser-modal"),d=angular.element("#voucher-modal");l.on("hide.bs.modal",function(){i.confetti=!1,i.$apply()}),l.on("shown.bs.modal",function(){i.confetti=!0,i.$apply()}),i.canSpin=function(){var e;return i.IsUserLoggedIn?((e=!i.config.Inactive&&i.IsUserLoggedIn&&i.isVoucherReserved)||d.modal("show"),e):(i.displaySignInModal(),!1)},i.applyWheelVoucher=function(e,t){n.applyWheelVoucher(e,t).then(function(e){1==e.data&&(i.isVoucherReserved=!0,i.disableButton=!1,i.voucherCode=null,i.voucherError=!1),!e.data.ErrorMessage&&e.data||(i.voucherError=!0)})},i.getResult=function(e){e=n.spinWheel(e,s);return e.then(function(e){e.data.ErrorMessage&&(i.error={message:e.data.ErrorMessage,imageUrl:e.data.ErrorImageUrl,hasHeader:null!==e.data.ErrorImageUrl},c.modal("show"),5==e.data.TypeOfError&&(i.isVoucherReserved=!1),i.disableButton=!e.data.CanRespin)}),e},i.onResult=function(n){var e;i.winGameUrl=n.value,i.gameName=n.name,i.segmentIndex=n.segmentIndex,n.keys&&(i.keys=Object.keys(n.keys).map(function(e){var t=n.keys[e];return t.keyName=e,t})),i.drm=n.drm,i.drmHelp=n.drmHelp,i.isHiddenKeys=n.isHiddenKeys,i.isFinal=n.final,i.boxId=n.boxId,i.twitterUrl&&i.twitterShareTextTemplate&&(i.twitterShareText=r.namedReplace(i.twitterUrl,{0:encodeURIComponent(r.namedReplace(i.twitterShareTextTemplate,{gameName:i.gameName}))})),(1==n.loser?u:l).modal("show"),i.isVoucherReserved=!1,n.final&&(i.disableButton=!0,i.isInactive=!0,(e=t.find(".wheel-mystery-section")).removeClass("active-wheel-mode"),e.addClass("inactive-wheel-mode"))},i.onError=function(e){alert(e.msg)},i.displaySignInModal=function(){e.$broadcast(a.EVENTS.OPEN_SIGN_IN_MODAL)}}]),angular.module("gmgApp").controller("ProductsController",["$scope",function(e){}]),angular.module("gmgApp").controller("ProfileBackgroundSelectorController",["$scope","ApiService",function(t,e){t.backgrounds=[];var n="",r=(t.more=!1,t.loading=!0,null);t.load=function(){return t.loading=!0,t.more=!1,e.getProfileBackgrounds(12,n).success(function(e){Array.prototype.push.apply(t.backgrounds,e.Backgrounds),n=e.Bookmark,t.more=e.More,t.loading=!1})},t.save=function(){t.$parent.selectedBackground&&(e.setProfileBackground(t.$parent.selectedBackground.Id),r=t.$parent.selectedBackground,t.$parent.setBackground(t.$parent.selectedBackground))},t.initialization=function(e){r=e,t.$parent.selectedBackground=e},angular.element("#profile-background-modal").on("shown.bs.modal",function(){n||t.load()}),angular.element("#profile-background-modal").on("hide.bs.modal",function(){angular.element(".background-options").scrollTop(0)}),angular.element("#profile-background-modal").on("hidden.bs.modal",function(){r&&(t.$parent.selectedBackground=r)})}]),angular.module("gmgApp").controller("ProfileBioController",["$rootScope","$scope","$location","ApiService","User","ErrorHandler","ObjectValidator","profileBioAvatarService","ProfileService","steamService","AVATAR_UPLOADER_BUSY_STATUS_CHANGED","AVATAR_UPDATED","AVATAR_ERROR_UPDATED","AVATAR_ERROR_CLEARED","UPDATE_BIO_TEXT","$timeout",function(r,c,e,a,u,s,d,p,h,f,t,n,i,o,l,m){function g(e){s.handleResponse(c.profileBioValidation,e)}"scrollRestoration"in history&&(history.scrollRestoration="manual"),angular.element("html, body"),c.isBioEditModeDisabled=!0,c.profileBioValidation=s.createValidationModel(),c.isLoggedIn=!1,c.showAbout=!1;function v(){c.isPrivacyDisabled=!0,c.settingViewToggle=!1,c.isPublicUserRadioButton=!c.isPrivateUser}function y(){c.isBioEditModeDisabled=!0,c.bioEditMode=!1,c.bioTextEditMode=c.bioText}function b(e,t,n){p.shouldParentGetInitialAvatar(!0),c.defaultBioText=e,c.defaultBioTextForOtherUser=n,c.bioText="",c.isPublicUserRadioButton=!1,c.bioEditMode=!1,d.isNullOrUndefined(t)?p.setAvatar(""):(d.isNullOrEmptyString(t.Bio)||r.$broadcast(l,t.Bio),d.isNullOrEmptyString(t.AvatarUrl)?p.setAvatar(""):p.setAvatar(t.AvatarUrl),c.isPublicUserRadioButton=t.IsProfilePublic,p.setIsProfilePublic(c.isPublicUserRadioButton),c.isProfilePrivateSetByModerator=t.IsProfilePrivateSetByModerator),c.isPrivateUser=!c.isPublicUserRadioButton}function S(e,t,n,r,i,o){return a.setCommunityDetails(e,t,n,r).then(function(e){s.clearErrors(c.profileBioValidation),b(c.defaultBioText,e.data,c.defaultBioTextForOtherUser)},function(e){d.isNullOrUndefined(i)||i(),g(e)}).catch(function(e){d.isNullOrUndefined(i)||i(),g(e)}).finally(function(){d.isNullOrUndefined(o)||o()})}function _(){c.isBioSectionBusy=!1,c.isBioTextBusy=!1,c.isSettingsBusy=!1}var E=c.$on(t,function(e,t){c.isAvatarUploaderBusy=t}),C=c.$on(i,function(e,t){g(t)}),w=c.$on(o,function(){s.clearErrors(c.profileBioValidation)}),T=c.$on(n,function(e,t){c.avatarUrl=t});r.$on(l,function(e,t){c.bioText=t}),c.$on("$destroy",function(){T(),w(),C(),E()}),c.$watch("isBioSectionBusy",function(e,t){e!==t&&p.setBioSectionUploadState(c.isBioSectionBusy)}),c.onParentClick=function(){v()},c.setSettingsTabToggle=function(e){e.stopPropagation(),c.isPrivacyDisabled=!c.isPrivacyDisabled,c.settingViewToggle=!c.settingViewToggle,c.bioEditMode&&c.bioEditModeToggle()},c.settingViewCancelButton=function(){v(),s.clearErrors(c.profileBioValidation)},c.bioEditModeToggle=function(){(c.isCurrentUserProfile||c.isCurrentUserForumModerator)&&(c.isBioEditModeDisabled=!c.isBioEditModeDisabled,c.bioEditMode=!c.bioEditMode,s.clearErrors(c.profileBioValidation))},c.bioEditModeCancelButton=function(){s.clearErrors(c.profileBioValidation),y()},c.settingViewUpdateButton=function(){c.isPrivacyDisabled=!0,c.isSettingsBusy=!0,c.isBioSectionBusy=c.isSettingsBusy;var e=c.defaultBioText===c.bioText?"":c.bioText;return S(c.avatarUrl,e,c.isPublicUserRadioButton,c.userName,function(){c.isPublicUserRadioButton=!c.isPrivateUser},function(){c.isSettingsBusy=!1,c.isBioSectionBusy=c.isBioTextBusy,c.settingViewToggle=!1})},c.bioEditModeUpdateButton=function(){c.isBioEditModeDisabled=!0,c.isBioTextBusy=!0,c.isBioSectionBusy=c.isBioTextBusy;return S(c.avatarUrl,c.bioTextEditMode,c.isPublicUserRadioButton,c.userName,null,function(){c.isBioTextBusy=!1,c.isBioSectionBusy=c.isBioTextBusy})},c.isBioTextEmpty=function(){return d.isNullOrEmptyString(c.bioText)},c.bioSectionCreationCondition=function(){return c.isCurrentUserProfile||!c.isPrivateUser};c.initialization=function(o,a,s,e,t,l){c.bioMaximumCharacterCount=t,c.isOnlineStatus=!1,c.isAvatarUploaderBusy=!0,p.setAvatarUploadState(c.isAvatarUploaderBusy),c.isBioSectionBusy=!0,c.isBioTextBusy=!0,c.isSettingsBusy=!0,c.isMuutStatusInitialLoadingBusy=!0,c.disabledByForumModeratorText=e,c.steamIsNotLinked=!1,u.getWhenReady().then(function(e){var t,n,r,i;e=a||e.username,t=u.get(),c.userName=e,d.isNullOrEmptyString(t.username)?(c.isCurrentUserProfile=!1,c.isLoggedIn=!1):(c.isCurrentUserProfile=c.userName.toLowerCase()===t.username.toLowerCase(),c.isLoggedIn=!0),p.setIsCurrentUsersProfile(c.isCurrentUserProfile),s&&(n=angular.fromJson(s)),c.isCurrentUserProfile||c.isCurrentUserForumModerator?(r=o,i=l,h.getCommunityDetails(c.userName).then(function(e){b(r,e.data,i)},function(e){g(e)}).catch(function(e){g(e)}).finally(function(){_(),y(),v(),p.setAvatarUploadState(!1)})):(b(o,n,l),_(),y(),v(),p.setAvatarUploadState(!1)),c.isCurrentUserProfile&&(e=f.getSteamId(),c.steamIsNotLinked=!(e&&0<e.length)),c.showAbout=!0})}}]),angular.module("gmgApp").controller("ProfileController",["$scope","activityService","steamService","User","profileBioAvatarService",function(o,a,s,l,c){o.bookmark="",o.isForumModerator=!1,o.initialization=function(t,n,r,i){l.getWhenReady().then(function(){s.setSteamUserId(t);var e=l.get().username===n;c.setIsCurrentUsersProfile(e),c.setIsProfilePublic(r),o.doesSteamIdExist=t&&0<t.length,o.doesSteamIdExist&&(r||e||o.isForumModerator)&&a.getOrUpdateActivity(t,o.bookmark,i)})}}]),angular.module("gmgApp").controller("ProfileHeaderController",["$scope","$window","ApiService","User","UserCookie","ErrorHandler","ObjectValidator","profileBioAvatarService","ProfileService","AVATAR_UPLOADER_BUSY_STATUS_CHANGED","AVATAR_UPDATED","AVATAR_ERROR_UPDATED","AVATAR_ERROR_CLEARED","$rootScope",function(o,i,a,s,e,l,c,u,d,t,n,r,p,h){function f(e){l.handleResponse(o.profileValidation,e)}h.username="",o.displayButtons="",o.profileValidation=l.createValidationModel(),o.isLoggedIn=!1;function m(){o.isPrivacyDisabled=!0,o.settingViewToggle=!1,o.isPublicUserRadioButton=!o.isPrivateUser}function g(e){u.shouldParentGetInitialAvatar(!0),o.isPublicUserRadioButton=!1,o.badges=[],c.isNullOrUndefined(e)?u.setAvatar(""):(c.isNullOrEmptyString(e.AvatarUrl)?u.setAvatar(""):u.setAvatar(e.AvatarUrl),c.isNullOrUndefined(e.Badges)||(o.badges=e.Badges),o.isPublicUserRadioButton=e.IsProfilePublic,u.setIsProfilePublic(o.isPublicUserRadioButton),e.ProfileBackgroundDetails&&o.setBackground(e.ProfileBackgroundDetails)),o.isPrivateUser=!o.isPublicUserRadioButton,o.isPrivateUserInfoBusy=!1,b=e}function v(){o.isHeaderSectionBusy=!1,o.isSettingsBusy=!1}function y(e){var t,n,r;e?t=!0:e=angular.element(".profile-header"),(t||e[0].style.background)&&(t=e.offset().top+e.height(),n=e.width(),r=(t=(r=angular.element(i).height())<t?r:t)/450*1158,e[0].style.backgroundSize=r<n?n+"px auto":"auto "+t+"px")}var b,S=o.$on(t,function(e,t){o.isAvatarUploaderBusy=t}),_=o.$on(r,function(e,t){f(t)}),E=o.$on(p,function(){l.clearErrors(o.profileValidation)}),C=o.$on(n,function(e,t){o.avatarUrl=t});o.$on("$destroy",function(){C(),E(),_(),S()}),o.$watch("isHeaderSectionBusy",function(e,t){e!==t&&u.setBioSectionUploadState(o.isHeaderSectionBusy)}),o.onParentClick=function(){m()},o.setSettingsTabToggle=function(e){e.stopPropagation(),o.isPrivacyDisabled=!o.isPrivacyDisabled,o.settingViewToggle=!o.settingViewToggle},o.settingViewCancelButton=function(){m(),l.clearErrors(o.profileValidation)},o.settingViewUpdateButton=function(){var e,t,n,r,i;return o.isPrivacyDisabled=!0,o.isSettingsBusy=!0,o.isHeaderSectionBusy=o.isSettingsBusy,e=o.avatarUrl,t=o.isPublicUserRadioButton,n=o.userName,r=function(){o.isPublicUserRadioButton=!o.isPrivateUser},i=function(){o.isSettingsBusy=!1,o.isHeaderSectionBusy=!1,o.settingViewToggle=!1},a.setCommunityDetails(e,b.Bio,t,n).then(function(e){l.clearErrors(o.profileValidation),g(e.data)},function(e){c.isNullOrUndefined(r)||r(),f(e)}).catch(function(e){c.isNullOrUndefined(r)||r(),f(e)}).finally(function(){c.isNullOrUndefined(i)||i()})},o.logout=function(){a.logout().then(function(){e.delete(),i.location.href="/"})};o.setBackground=function(e){o.selectedBackground=e;var t=angular.element(".profile-header");t[0].style.background="url("+e.ImageUrl+") fixed center top/0 0 no-repeat",y(t)},o.isVisible=function(e){return e||o.displayButtons},o.initialization=function(n,r){y(),o.isPrivateUser=!0,o.isCurrentUserProfile=!1,o.badges=[],o.isOnlineStatus=!1,o.isAvatarUploaderBusy=!0,u.setAvatarUploadState(o.isAvatarUploaderBusy),o.isHeaderSectionBusy=!0,o.isSettingsBusy=!0,o.isMuutStatusInitialLoadingBusy=!0,o.isPrivateUserInfoBusy=!0,s.getWhenReady().then(function(e){var t;o.displayButtons=!0,n=n||e.username,e=n,t=s.get(),o.userName=e,c.isNullOrEmptyString(t.username)?(o.isCurrentUserProfile=!1,o.isLoggedIn=!1):(o.isCurrentUserProfile=o.userName===t.username,o.isLoggedIn=!0),u.setIsCurrentUsersProfile(o.isCurrentUserProfile),o.isCurrentUserProfile||o.isCurrentUserForumModerator?d.getCommunityDetails(o.userName).then(function(e){g(e.data)},function(e){f(e)}).catch(function(e){f(e)}).finally(function(){v(),m(),u.setAvatarUploadState(!1)}):(b=angular.fromJson(r),g(b),v(),m(),u.setAvatarUploadState(!1))}),angular.element(i).on("resize",function(){y()})}}]),angular.module("gmgApp").controller("ProfileLeftOverRightController",["$scope","ACTIVITY_ERROR_UPDATED","ErrorHandler",function(n,e,r){n.activityValidation=r.createValidationModel();var t=n.$on(e,function(e,t){r.handleResponse(n.activityValidation,t)});n.$on("$destroy",function(){t()})}]),angular.module("gmgApp").controller("PromoBlockController",["$scope",function(i){i.init=function(e,t,n,r){i.hasLink=e,i.hasDiscount=t,i.hasViewMoreButton=n,i.hasFooterText=r}}]),angular.module("gmgApp").controller("PurchaseHistoryController",["$scope","$timeout","ApiService","$location","KEYS_EXPAND_ANIMATION_TIME","PURCHASE_HISTORY_CONSTANTS","BLIZZARD_CONSTANTS","purchaseHistoryCountService","HIDDEN_KEY_CONSTANTS",function(r,i,o,a,s,l,c,u,d){function e(t){var n,e;r.loading||(r.loading=!0,n=a.search()[l.BOX_ID_QUERY_STRING_PARAMETER],e=a.search()[c.AUTO_TRIGGER_BLIZZARD_MODAL_ON_PAGE_LOAD]||a.search()[d.AUTO_TRIGGER_HIDDEN_KEY_MODAL_ON_PAGE_LOAD],a.search()[l.ITEMS_COUNT]&&e&&(e={limit:a.search()[l.ITEMS_COUNT],docId:"",date:""},p=e),o.getPurchaseHistory(p).success(function(e){t?Array.prototype.push.apply(r.games,e.Games):r.games=e.Games,n&&!r.games.map(function(e){return e.BoxId}).includes(n)&&a.search({}),r.showLoadMore=e.LoadMore,p=e.Pagination}).finally(function(){r.loading=!1,u.setBoxCount(r.games.length)}))}var p;r.purchaseHistoryPageBoxIdPostFix=l.PURCHASE_HISTORY_PAGE_BOX_ID_POSTFIX,r.showLoadMore=!1,r.loading=!1,r.gameCount=0,r.getGameKeys=function(t){t.Keys||t.keysPromise||(t.loadingKeys=!0,t.keysPromise=o.getBoxKeys(t.BoxId).then(function(e){var n=e.data;t.Keys=Object.keys(n).map(function(e){var t=n[e];return t.keyName=e,t}),t.HasKeys=0<t.Keys.length,i(function(){var e;e=t,$("#"+e.BoxId+r.purchaseHistoryPageBoxIdPostFix).each(function(){$(this).height(this.scrollHeight),i(function(){$("#"+e.BoxId+r.purchaseHistoryPageBoxIdPostFix).css("height","auto")},s)})})}).finally(function(){t.loadingKeys=!1}))},r.isGameToRedeemAccordion=function(e){var t=a.search()[l.BOX_ID_QUERY_STRING_PARAMETER];return e.BoxId===t};r.loadMore=function(){e(!0)},e(!1)}]),angular.module("gmgApp").controller("ApplyCreditController",["$scope","$q","DESTROY_EVENT_NAME","Basket","User","ErrorHandler",function(t,e,n,r,i,o){t.creditValidation=o.createValidationModel(),t.newCredit={};t.removeCredit=function(){return t.basket.removeCredit().catch(function(e){o.handleResponse(t.creditValidation,e)})},t.applyCredit=function(){return t.basket.applyCredit(t.newCredit.value).then(function(){t.newCredit.value=void 0,o.clearErrors(t.creditValidation)},function(e){o.handleResponse(t.creditValidation,e)})},t.init=function(){e.all([r.getWhenReady(),i.getWhenReady()]).then(function(e){t.basket=e[0],t.user=e[1]})}}]),angular.module("gmgApp").controller("ApplyVoucherController",["$scope","$q","DESTROY_EVENT_NAME","Basket","User","ErrorHandler","$window","$location","YOUR_CART_CONSTANTS","CUSTOM_MESSAGES_KEYS","MODALS","$cookies","$rootScope","GIFT_CARD_CODE","SECRET_VOUCHER_CLAIM_SOURCE","ApiService","GlobalMessageBarService","tealiumLoggingService","$timeout","ScreenSize","BASKET_UPDATED_EVENT",function(r,i,e,o,a,t,n,s,l,c,u,d,p,h,f,m,g,v,y,b,S){r.voucherPattern=new RegExp("^[a-zA-Z0-9-#]{1,21}$"),r.giftCardPattern=new RegExp("^[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}$"),r.giftCardSuccess=!1,r.giftCardSuccessMessage=void 0,r.voucherGiftCardValidation=t.createValidationModel(),r.newVoucher={},r.newGiftCard={},r.newPromotionalCode={},r.secretVoucherHasError=!1;function _(e,t){g.globalMessage.visible=!0,g.globalMessage.isError=t,g.globalMessage.message=e,r.secretVoucherHasError=t}function E(){r.newVoucher.value=void 0,r.newGiftCard.value=void 0,r.newPromotionalCode.value=void 0}function C(){n.returnUrl=n.location.pathname+"?applyVoucherCode="+r.newPromotionalCode.value.toUpperCase(),s.search("openModal","true"),s.search("cMsg",c.VOUCHER_REQUIRES_SIGN_IN),p.$broadcast(u.EVENTS.OPEN_SIGN_IN_MODAL,{returnUrl:returnUrl})}r.claimSecretOffers=function(){angular.element(".box-spinner-cart").show(),$(".claim-offer").addClass("hidden"),r.basket.apiCallInProgress=!0,p.$broadcast(S,r.basket.apiCallInProgress),m.claimAndApplySecretVouchers(r.basket.secretVoucherOfferIds,f.BASKET).then(function(e){0===e.data.SecretVoucherClaimDetails.Errors.length?(r.basket.applyApiBasketData(e.data.PromotionalCodeInCartRedemptionResult.Basket),e.data.SecretVoucherClaimDetails.Games.forEach(function(e){v.logSecretVoucherClaimed(e&&e.VoucherConfigId?e.VoucherConfigId:"")}),g.globalMessage.visible=!1,g.globalMessage.isError=!1,r.secretVoucherHasError=!1):0<e.data.SecretVoucherClaimDetails.Errors.filter(function(e){if(400===e.ErrorCode)return e}).length?_(r.secretVoucherBadCodeErrorMessage,!0):($(".claim-offer").removeClass("hidden"),_(r.secretVoucherInternalErrorMessage,!1))},function(){_(r.secretVoucherGeneralErrorMessage,!0)}).finally(function(){angular.element(".box-spinner-cart").hide(),r.basket.apiCallInProgress=!1,p.$broadcast(S,r.basket.apiCallInProgress)})},r.setSecretVoucherErrorMessage=function(e,t,n){r.secretVoucherBadCodeErrorMessage=e,r.secretVoucherInternalErrorMessage=t,r.secretVoucherGeneralErrorMessage=n};r.applyPromotionalCode=function(){return d.getObject(l.VOUCHERS_WITHOUT_SIGN_IN_COOKIE)||r.user&&r.user.isAuthenticated?r.basket.applyPromotionalCode(r.newPromotionalCode.value.toUpperCase()).then(function(e){e.PromotionalCodeType===h&&(r.user.credit=e.Credit,r.giftCardSuccess=!0,r.giftCardSuccessMessage=e.RedemptionMessage),e.ShowLoginModal?C():(E(),t.clearErrors(r.voucherGiftCardValidation))},function(e){angular.isArray(e.data)||(e.data={ExceptionMessage:e.data}),t.handleResponse(r.voucherGiftCardValidation,e)}):(C(),0)},r.openVouchers=function(){angular.element(".vouchers-gifts-header.collapsed").click()},r.displaySignInModal=function(){p.$broadcast(u.EVENTS.OPEN_SIGN_IN_MODAL)};var w=r.$on(S,function(e,t){t||(r.basket=o.get())});r.$on(e,function(){w()}),r.promotionalCodePattern={test:function(e){var t=r.giftCardPattern.test(e),e=r.voucherPattern.test(e);return t||e}},r.init=function(e,t){var n=[a.getWhenReady()];r.isCartPage=t,r.isConfirmationPage=e,r.isConfirmationPage||n.push(o.getWhenReady()),i.all(n).then(function(e){r.user=e[0],r.isConfirmationPage||(r.basket=e[1],y(function(){b.greaterThan("xs")&&r.openVouchers()}),r.user.isAuthenticated&&s.search().applyVoucherCode&&(r.newPromotionalCode.value=s.search().applyVoucherCode,y(function(){r.promotionalCodeForm.$setDirty(),angular.element("#promotionalCodeApplyButton").click()})))})}}]),angular.module("gmgApp").controller("BillingPageController",["$scope","PAYMENT_METHOD_EVENTS","DESTROY_EVENT_NAME",function(t,e,n){t.showLoadingBar=!0;var r=t.$on(e.LOADING_COMPLETE,function(e){t.showLoadingBar=!1});t.$on(n,function(){r()})}]),angular.module("gmgApp").controller("CartItemsController",["$scope","$q","$window","DESTROY_EVENT_NAME","Basket","User","ErrorHandler","ApiService","paymentService","globalVariablesService","validationHandlerService","BASKET_UPDATED_EVENT",function(n,r,t,e,i,o,a,s,l,c,u,d){n.showGiftBasket=!1,n.buttonDisabled=!1,n.clearSpinnerOnSuccess=!0;function p(){n.basket.giftYourBasketTouched&&n.basket.isNotBasketGiftable&&u.broadcastNewValidationModel({data:f+n.basket.nonGiftableList},!1,!1)}var h="",f="",m=(n.DEFAULT_PROD_IMG=c.getDefaultProdImg(),n.selectItemGaEvent=function(e,t,n,r){tealiumLoggingService.logSelectItemClicked(e,t,n,r)},n.saveCart=function(e){if(0!==n.basket.items.length)return a.clearErrors(n),s.saveCart(n.basket.isGiftBasket).then(function(){e||(t.location.href="/")},function(e){n.basket.isGiftBasket=!n.basket.isGiftBasket,401===e.status?t.location.href=h:(a.handleResponse(n,e),n.MakeMeBusy(!1),n.basket.showMesssageBar())}).finally(function(){l.updatedDisablePlaceOrderButton(!1),n.updatingCart=!1});t.location.href="/"},n.$on(d,function(e,t){t||(n.basket=i.get(),p())}));n.$on(e,function(){m()}),n.checkGiftBasket=function(){n.updatingCart||(n.updatingCart=!0,n.basket.checkItemsAreNotGiftable(!0)&&n.saveCart(!0))},n.MakeMeBusy=function(e){n.buttonDisabled=e,n.clearSpinnerOnSuccess=!e,e&&a.clearErrors(n)},n.onCartItemsHideShow=function(){n.showCartItems=!n.showCartItems},n.init=function(e,t){h=t,f=e,r.all([i.getWhenReady(),o.getWhenReady()]).then(function(e){n.basket=e[0],n.user=e[1],n.showGiftBasket=n.user.isGiftingAllowed,p(),n.showCartItems=!1})}}]),angular.module("gmgApp").controller("CartSummaryController",["$scope","DESTROY_EVENT_NAME","Basket","Order","BASKET_UPDATED_EVENT","newsletterOptInService","$window","paymentMethodsService","PAYMENT_METHOD_EVENTS","BILLING_ADDRESS_EVENTS","paymentService","$timeout","userProfileService","ApiService","User","$q","ORDER_UPDATED_EVENT",function(n,e,r,t,i,o,a,s,l,c,u,d,p,h,f,m,g){n.isConfirmationPage=!1,n.paymentMethodsLoading=!0,n.userDetailsLoading=!0,new a.URL(a.location.href);var v,y=n.$on(l.PAYMENT_METHODS_LOADING_STATUS_CHANGED,function(e,t){n.paymentMethodsLoading=t}),b=n.$on(c.ADDRESS_LOAD_COMPLETED,function(){n.userDetailsLoading=!1}),S=n.$watchGroup(["userDetailsLoading","paymentMethodsLoading"],function(e,t){e!==t&&(n.showLoadingBar=e.every(function(e){return!0===e}),v=e.every(function(e){return!1===e}),d(function(){v&&u.updatedDisablePlaceOrderButton(!1)},5))}),_=s.paymentMethodDetailsSelectedListener(n),E=(n.isBillingPageAndPayPal=function(e){return!!e&&n.selectedPaymentMethodGroup&&n.selectedPaymentMethodGroup.category===paymentMethodConstants.PAYPAL},n.openVouchers=function(){angular.element(".vouchers-gifts-header.collapsed").click()},n.newsletterCheckbox=o.getNewsletterCheckbox(),n.checkboxClicked=function(){n.newsletterCheckbox=!n.newsletterCheckbox,o.setNewsletterCheckbox(n.newsletterCheckbox)},n.$on(i,function(e,t){t||(n.basket=r.get())})),C=n.$on(g,function(e){n.order=t.get()});n.$on(e,function(){E(),_(),S(),b(),y(),C()}),n.init=function(e,t){n.isConfirmationPage=e,n.isConfirmationPage||(e=[r.getWhenReady()],t&&e.push(f.getWhenReady()),m.all(e).then(function(e){n.basket=e[0],1<e.length&&(n.user=e[1],h.userProfile().then(function(e){p.setUserProfile(e.data)}))}))}}]),angular.module("gmgApp").controller("ConfirmationBlockController",["$scope","$sce","$location","retryRequest","ORDER_STATUS_URL","MAX_RETRY","DEFAULT_DELAY","Order","Tealium","User","$window","ObjectValidator","URL_PARAMETER_CONSTANTS","$rootScope","ORDER_UPDATED_EVENT",function(n,t,e,r,i,o,a,s,l,c,u,d,p,h,f){e=e.search().ordernumber,d=d.isNullOrUndefined(u.GMGSettings.apiServiceUrl)?u.GMGSettings.apiBaseUrl:u.GMGSettings.apiServiceUrl;n.cleanGiftCodeName=function(e){return"GIFT_CODE"===e?"GIFT CODE":e},r(d+i,"GET",o,a,e).then(function(e){s.setApiData(e),s.getWhenReady().then(function(t){n.order=t,l.setOrder(t),h.$broadcast(f),GMGSettings.googleAnalyticsTrackingId&&c.getWhenReady().then(function(e){ga("gmgTracker.require","ecommerce");e={id:t.id,revenue:t.total.final,currency:e.currency};ga("gmgTracker.ecommerce:addTransaction",e),ga("gmgTracker.ecommerce:send")})}),null!==e.ErrorMessage&&0<e.ErrorMessage.length&&(n.error=t.trustAsHtml(e.ErrorMessage))}).catch(function(e){n.error=t.trustAsHtml(e)}),n.init=function(){n.isCartPage=!1,n.isOrderConfirmationPage=!0,n.displayAccordionSection=!0,n.basket=n.basket||{};var e=[c.getWhenReady()];$q.all(e).then(function(e){n.user=e[0]})}}]),angular.module("gmgApp").controller("ProceedToPaymentController",["$scope","$q","DESTROY_EVENT_NAME","Basket","User","ErrorHandler","MODALS","validationHandlerService","ApiService","$window","$rootScope","BASKET_UPDATED_EVENT","signInSignUpDefaultTabService","fingerprintService",function(n,t,e,r,i,o,a,s,l,c,u,d,p,h){function f(e){n.buttonDisabled=e,n.clearSpinnerOnSuccess=!e,e&&o.clearErrors(n)}n.buttonDisabled=!1,n.clearSpinnerOnSuccess=!0,n.payingByOnlyCredits=function(){return n.basket&&n.basket.total&&0===n.basket.total.final},n.skipPayment=function(){return n.payingByOnlyCredits()&&n.isBillingAddressValid},n.isCtaDisabled=function(){return!!r.isCtaDisabled&&r.isCtaDisabled()};n.displaySignInModal=function(){p.getDefaultTabSignIn()?u.$broadcast(a.EVENTS.OPEN_SIGN_IN_MODAL):u.$broadcast(a.EVENTS.OPEN_SIGN_UP_MODAL)},n.proceedToPaymentOrPlaceOrderModal=function(){if(s.requestValidationModelErrorClearing(),n.user.username)return f(!0),o.clearErrors(n),h.getFingerprint().then(function(e){e={isGift:n.basket.isGiftBasket,fingerprint:e};return l.proceedToPayment(e).then(function(e){e=e.data.ReturnUrl;c.location.href=e,f(!1)},function(e){angular.isString(e.data)?401===e.status?c.location.href=n.cartPageUrl:"Basket empty"===e.data?c.location.reload():(o.handleResponse(n,e),f(!1)):(o.handleResponse(n,e),f(!1),e.data&&!0===e.data.IsUserTooYoung&&(u.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,a.TOO_YOUNG_MODAL_TYPE.BASKET),$("#underage-user-modal").modal("show"),angular.element("#blur-background").addClass("blur-background")))})});n.displaySignInModal()};var m=n.$on(d,function(e,t){t?f(!0):(n.basket=r.get(),0<n.basket.items.length&&f(!1))});n.$on(e,function(){m()}),n.init=function(e){n.cartPageUrl=e,f(!0),t.all([r.getWhenReady(),i.getWhenReady()]).then(function(e){n.basket=e[0],n.user=e[1],n.user.isAuthenticated?l.isBillingAddressValid().then(function(e){n.isBillingAddressValid=e.data}).finally(function(){0<n.basket.items.length&&f(!1)}):0<n.basket.items.length&&f(!1)})}}]),angular.module("gmgApp").controller("PurchasePageController",["$scope","$location","$q","Basket","User","signInSignUpDefaultTabService",function(n,t,r,i,o,a){n.showLoadingBar=!0,n.passedInitRedirectChecks=!1;function s(e){e||-1!==t.url().indexOf("?error")&&n.basket.getRestoreCartError(),n.user.hideDecimalsForCurrency&&(n.creditStep=1),n.showLoadingBar=!1}n.init=function(t,e){a.setDefaultTabSignIn(!e);e=[o.getWhenReady()];t||e.push(i.getWhenReady()),r.all(e).then(function(e){n.user=e[0],t||(n.basket=e[1]),s(t)})}}]),angular.module("gmgApp").controller("PurchasePageErrorMessageHandlerController",["$scope","$timeout","$q","$window","$location","DESTROY_EVENT_NAME","VALIDATION_MODEL_HANDLER_EVENTS","Basket","validationHandlerService","paymentMethodsService","User","ErrorHandler","paymentService","URL_PARAMETER_CONSTANTS",function(r,n,i,o,a,e,t,s,l,c,u,d,p,h){r.showAbsoluteCreditOrVoucherMessage=!1,r.validationModel={};var f,m,g=r.$on(t.BROADCAST_VALIDATION_MODEL,function(e,t){n(function(){r.validationModel=t})}),v=r.$on(t.BROADCAST_VALIDATION_ERROR,function(e,t){d.handleResponse(r.billingValidation,t)}),y=r.$on(t.CLEAR_VALIDATION_MODEL,function(e){n(function(){d.clearAllErrors()})}),b=c.paymentMethodDetailsSelectedListener(r);r.$on(e,function(){r.basketListener(),y(),v(),g(),b()}),r.init=function(e,t,n){f=angular.fromJson(e),m=angular.fromJson(t),(r.isConfirmationPage=n)||i.all([s.getWhenReady(),u.getWhenReady()]).then(function(e){var t,n;r.basket=e[0],r.user=e[1],0===r.basket.items.length&&l.broadcastNewValidationModel({data:m.ShoppingCartIsEmptyText},!0),o.location.href.indexOf(f.BillingDetailsPage)&&(e="",t=new o.URL(o.location.href),-1!==a.url().indexOf("?"+h.AUTHORIZE_PAYMENT_ERROR)?(e=t.searchParams.get(h.AUTHORIZE_PAYMENT_ERROR),l.broadcastNewValidationModel({data:e},!0)):"true"!==(n=p.readPaymentRelatedUrlQuerys()).paymentFailed&&"true"!==n.paymentCancelled||(e=t.searchParams.get(h.PAYMENT_ERROR_MESSAGES),a.search(h.PAYMENT_ERROR_MESSAGES,null),l.broadcastNewValidationModel({data:e},!0))),r.basket.items&&0<r.basket.items.length&&0===r.basket.total.final&&-1!==o.location.href.indexOf(f.CartPage)&&"true"===a.search().absoluteCredit&&l.broadcastNewValidationModel({data:m.AttemptedCardPaymentOnAbsoluteCreditCartText},!1),r.basket.bonusGamesInfoMessage&&l.broadcastNewValidationModel({data:newValue.bonusGamesInfoMessage},!1)})}}]),angular.module("gmgApp").controller("UpsellV2ProductsController",["$scope","ApiService","PRODUCT_CHANGED","ObjectValidator","User","OwlCarousalCustomNavigationService","Basket",function(n,r,e,i,t,o,a){function s(){var t;n.loadingUpsell=!0,n.basket.items.length&&(t=[],n.basket.items.forEach(function(e){t.push(e.product.sku)}),r.getAssociatedProducts(t,12).then(function(e){n.upsellProducts=e.data,!i.isNullOrUndefined(n.upsellProducts)&&0!==n.upsellProducts.length&&n.loggedIn&&(e=n.upsellProducts.map(function(e){return e.Code}).join(","),r.areGamesWanted(e).then(function(t){n.upsellProducts.forEach(function(e){e.IsGameWant=t.data[e.Code]})})),n.loadingUpsell=!1}))}var l=$("#upsell-carousel"),c=(n.upsellProducts=null,n.$on(e,function(e,t){n.product=t,(l=$("#upsell-carousel")).data("owl.carousel")&&l.trigger("destroy.owl.carousel"),updateAssociatedProduct()}));n.$on("$destroy",function(){c()}),n.initCarousel=function(){l.owlCarousel({loop:!1,margin:18,navText:["<i class='glyphicon glyphicon-menu-left'></i>","<i class='glyphicon glyphicon-menu-right'></i>"],nav:!0,responsiveClass:!1,responsive:{0:{nav:!1,stagePadding:66,items:1},480:{nav:!1,stagePadding:66,items:2},768:{items:2},991:{items:3},1200:{margin:25,items:4}}});var e=l.find(".owl-dot.active").index();l.find(".owl-next").on("click",function(){e=o.moveNextPage(l,e)}),l.find(".owl-prev").on("click",function(){e=o.movePrevPage(l,e)})},n.basket=a.get(),t.getWhenReady().then(function(e){n.user=e,n.loggedIn=e.isAuthenticated,s()})}]),angular.module("gmgApp").controller("RedeemGiftCartOutOfBasketController",["$scope","User","ApiService","ErrorHandler","$rootScope","GIFTCARD_REDEEMED","$window",function(r,e,t,i,n,o,a){r.giftCardPattern=new RegExp("^[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}-[a-zA-Z0-9]{5}$"),r.newGiftCard=void 0,r.success=!1,e.getWhenReady().then(function(e){r.user=e}),r.redeemGiftCard=function(){return r.success=!1,t.redeemGiftCardOutOfBasket(r.newGiftCard.toUpperCase()).success(function(e){i.clearErrors(r),r.success=!0,a.userData.Credit=e.Credit,r.user.credit=e.Credit,r.newGiftCard=void 0,n.$broadcast(o)}).error(function(e,t,n){i.handleResponse(r,{data:e,status:t,headers:n})})}}]),angular.module("gmgApp").controller("RegisterController",["$rootScope","$scope","$location","$window","ErrorHandler","ApiService","Utils","INVALID_FORM","LANGUAGE_SEGMENT_POSITION","GAME_GIFTING","ObjectValidator","MODALS","modalService","tealiumLoggingService","User","signInSignUpDefaultTabService","fingerprintService","FINGERPRINT_CONSTS","AWS_COGNITO_SWITCH",function(a,s,n,l,r,t,c,e,i,u,o,d,p,h,f,m,g,v,y){function b(){s.forms.registerForm&&(s.register.username="",s.register.email="",s.register.password="",s.register.confirmPassword="",s.register.newsletterOptIn=!1,s.register.isEmailFromExternal=!1,s.register.languagePreferenceCode="",s.register.isThirdPartyRegister=!1,s.register.communityNewsletter=!1,s.register.termsAndConditions=!1,s.register.day=null,s.register.month=null,s.register.year=null,s.register.externalProvider=null,s.register.externalAccountId=null,s.register.isExternalSignUp=!1,s.register.isPlayfireSignUp=!1,s.register.isThirdPartyRegister=!1,s.register.hasBirthday=!1,s.register.hideBirthdayForm=!1,s.forms.registerForm.$setPristine())}s.redirectToThirdPartyLogin=function(t,n,r,i){g.getFingerprint().then(function(e){e&&(t=c.appendQueryKeyValue(t,v.QUERY_PARAM,e)),c.redirect(t,n,r,i)})},s.showRegisterOptions=!0,s.isEmailSignUp=!0,s.checkingValidCountry=!0,s.forms={},f.getWhenReady().then(function(e){s.phoneNumberRegisterEnabled=GMGSettings.phoneNumberSignInAllowedCountries.split(",").includes(e.currentCountry)}).finally(function(){s.checkingValidCountry=!1});function S(){s.register.confirmPassword=s.register.password,s.register.languagePreferenceCode=(e=n.path().split("/"),$.grep(e,function(e){return 0<e.length})[i]||""),s.register.ReturnUrl=c.getExternalLoginReturnUrl(s.returnUrlOverride),s.spinnerIsActivatedRegister=!0,s.isEmailSignUp||(e=s.registerFormState.selectedCountry?"+"+s.registerFormState.selectedCountry.CallingCode:null,s.register.PhoneCountryDialCode=e,s.phoneNumber.dialCode=e,s.phoneNumber.number=s.register.phoneNumber,s.register.email="");var e,o=t.isFeatureSwitchActive(y);return s.register.isThirdPartyRegister?g.getFingerprint().then(function(e){return s.register.Fingerprint=e,t.thirdPartyRegister(s.register).then(function(e){b();var t=n.path();-1===e.data.ReturnUrl.lastIndexOf(t)&&(l.location.href=e.data.ReturnUrl),a.$broadcast(u.THIRD_PARTY.REGISTER_SUCCESS,{response:e})},function(e){s.errorHandler(e)}).catch(function(e){s.errorHandler(e)}).finally(function(){s.isRegistrationActivity=!1})}):g.getFingerprint().then(function(e){s.register.Fingerprint=e;var n=s.register.email,r=s.register.ReturnUrl,i=s.register.newsletterOptIn;return t.register(s.register).then(function(t){var e;s.isModal?(e=$(E),s.register.email?o.success(function(e){!0===e?s.cognitoVerificationCodeModal.open({confirmSignup:!0,email:n,newsletterOptIn:i}):(h.logRegisterAttempt(t,"email"),s.returnUrlOverride?l.location.href=r+"?verify=email":a.$broadcast(d.EVENTS.OPEN_EMAIL_VERIFICATION_MODAL))}):o.success(function(e){1==e?s.phoneNumberModal.open({phoneNumber:{number:s.phoneNumber.number,dialCode:s.registerFormState.selectedCountry.CallingCode},returnUrl:s.returnUrlOverride?r:null,confirmSignup:!0,newsletterOptIn:i}):(h.logRegisterAttempt(t,"phone"),s.phoneNumberModal.open({phoneNumber:{number:s.phoneNumber.number,dialCode:s.registerFormState.selectedCountry.CallingCode},returnUrl:s.returnUrlOverride?r:null}))}),e.modal("hide"),e.find("input").val(""),e.find("select").val(""),b()):o.success(function(e){!0===e&&!1===s.register.isEmailFromExternal&&!0===s.register.isExternalSignUp?s.cognitoVerificationCodeModal.open({confirmSignup:!0,email:n,newsletterOptIn:i}):(l.location.href=t.data.ReturnUrl,b())})},function(e){h.logRegisterAttempt(e),s.errorHandler(e)}).catch(function(e){s.errorHandler(e)}).finally(function(){s.isRegistrationActivity=!1})})}s.register={username:"",email:"",password:"",confirmPassword:"",isEmailFromExternal:!1,languagePreferenceCode:"",isThirdPartyRegister:!1,communityNewsletter:!1,currentLocationUrl:"",radioCommunityEmailsOptIn:null,radioMarketingEmailsOptIn:null},s.registerFormState={selectedCountry:null,userNameCheckPromise:null},s.registerErrors=r.createValidationModel(),null==a.isSessionExpired&&(a.isSessionExpired=!1),s.getErrorMessage=function(){return s.registerErrors.hasServerError?s.registerErrors.exceptionMessage:o.isNullOrEmptyString(_)?e:_},null!==n.search().email&&(s.register.email=n.search().email),s.register.isEmailFromExternal="true"===n.search().isEmailFromExternal,s.register.externalAccountId=n.search().externalAccountId,s.register.hideBirthdayForm=!1;var _,E="#modalLoginRegister";s.register.externalProvider=n.search().externalProvider,s.register.isExternalSignUp="true"===n.search().isExternalSignUp,s.register.isPlayfireSignUp="true"===n.search().isPlayfireSignUp,s.register.isThirdPartyRegister="true"===n.search().isThirdPartyRedemption,s.register.ReturnUrl=c.getExternalLoginReturnUrl(s.returnUrlOverride),s.returnUrl="&returnUrl="+s.register.ReturnUrl+"&isThirdPartyRedemption="+s.register.isThirdPartyRegister,s.register.isPlayfireSignUp&&(s.register.username=n.search().name),s.linkReturnUrl=n.search().returnUrl?"?returnUrl="+encodeURIComponent(n.search().returnUrl):"",s.errorHandler=function(e){"Too Young"===e.data&&(a.$broadcast(d.EVENTS.OPEN_TOO_YOUNG,d.TOO_YOUNG_MODAL_TYPE.REGISTRATION),$(E).modal("hide")),500!==status&&r.handleResponse(s.registerErrors,e)},s.registrationPromise=null;s.doRegister=function(e){if(!s.isRegistrationActivity){r.clearErrors(s.registerErrors),s.forms.registerForm.$setSubmitted();var t=Object.keys(s.forms.registerForm.$error),t=s.forms.registerForm.$error.email&&1===t.length;if(s.forms.registerForm.$invalid&&(s.isEmailSignUp||!t))return null;s.isModal=e,s.isRegistrationActivity=!0,s.isUsernameChecked||s.validateUsername(s.usernameScope),s.isEmailChecked||s.validateEmail(s.emailScope),s.registrationPromise=s.registerFormState.usernameCheckPromise.then(function(){return S(s.forms.registerForm)}).finally(function(){s.isRegistrationActivity=!1})}return s.registrationPromise},s.validationAccessorEmail=function(e,t){s.validateEmail=e,s.emailScope=t},s.validationAccessorUsername=function(e,t){s.validateUsername=e,s.usernameScope=t},s.getReturnUrlValues=function(){return p.returnUrlValues},s.getReturnUrlValues()&&(s.returnUrl=s.getReturnUrlValues()+"&isThirdPartyRedemption="+s.register.isThirdPartyRegister),s.$watch("getReturnUrlValues()",function(e,t){e!==t&&(s.returnUrl=e+"&isThirdPartyRedemption="+s.register.isThirdPartyRegister)}),s.initialization=function(e,t,n,r){n||f.getWhenReady().then(function(e){0==$(".checkout-pages").length&&e.isAuthenticated&&(window.location.href="/")}),s.verticalLayout=e,s.register.newsletterOptIn=!1,s.register.termsAndConditions=!1,s.register.communityNewsletter=!1,s.register.currentLocationUrl=window.location.pathname,_=t,s.isOnPage=!m.getDefaultTabSignIn(),r&&(s.cognitoVerificationCodeModal=new p.Modal(r))},s.toggleForm=function(e){s.showRegisterOptions=!s.showRegisterOptions,s.isEmailSignUp="email"===e}}]),angular.module("gmgApp").controller("RegisterModalController",["$rootScope","$scope","modalService","ErrorHandler","MODALS","User","ObjectValidator","tealiumLoggingService","AgeVerificationService","DESTROY_EVENT_NAME","$location","URL_PARAMETER_CONSTANTS","signInSignUpDefaultTabService",function(r,i,o,e,a,t,n,s,l,c,u,d,p){var h="#modalLoginRegister",f="#registerTab";function m(e,t){var n=this;n.shouldLoad=!1,n.isLoading=!1,n.modalLoaded=!1,n.modalId=e,n.onOpen=t,n.loadModal=function(){n.shouldLoad=!0,n.modalLoaded?("function"==typeof n.onOpen&&n.onOpen(),$(e).modal(a.DISPLAY.SHOW),o.AddOrRemoveModalOpenClass()):n.isLoading=!0},n.hide=function(){$(e).modal(a.DISPLAY.HIDE)},n.onModalLoaded=function(){n.isLoading=!1,n.modalLoaded=!0,n.loadModal(),$(n.modalId)[0].classList.add("fade")}}t.getWhenReady().then(function(e){i.isLoggedIn=!n.isNullOrEmptyString(e.username)}),i.accountVerificationModal=new m("#account-verification-modal"),i.signUpModal=new m(h,function(){s.logSignInModalOpen(i.tabToOpen),l.hasUnderAgeCookie()&&i.tabToOpen===f?(r.$broadcast(a.EVENTS.CLOSE_SIGN_UP_MODAL),r.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,a.TOO_YOUNG_MODAL_TYPE.REGISTRATION)):$('a[data-toggle=tab][href="'+i.tabToOpen+'"]').tab("show")}),i.registerErrors=e.createValidationModel();function g(){i.tabToOpen="#signinTab",i.signUpModal.loadModal()}function v(){i.tabToOpen=f,i.signUpModal.loadModal()}var y=i.$on(a.EVENTS.OPEN_SIGN_IN_MODAL,function(){g()}),b=i.$on(a.EVENTS.OPEN_SIGN_UP_MODAL,function(){l.hasUnderAgeCookie()?r.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,a.TOO_YOUNG_MODAL_TYPE.REGISTRATION):v()}),S=i.$on(a.EVENTS.CLOSE_SIGN_UP_MODAL,function(){$(h).modal("hide")}),_=i.$on(a.EVENTS.OPEN_EMAIL_VERIFICATION_MODAL,function(){i.accountVerificationModal.loadModal()});i.$on(c,function(){_(),S(),b(),y()}),i.init=function(e,t){var n=u.search();n[d.RE_LOGIN_IN]||n[d.OPEN_SIGN_IN_MODAL]?(p.getDefaultTabSignIn()?g:v)():n[d.OPEN_SIGN_UP_MODAL]&&v(),i.phoneNumberModal=new o.Modal(e),i.cognitoVerificationCodeModal=new o.Modal(t),i.phoneNumber={number:null,dialCode:null},"email"===n[d.VERIFY]&&r.$broadcast(a.EVENTS.OPEN_EMAIL_VERIFICATION_MODAL)}}]),angular.module("gmgApp").controller("ResendVerificationController",["$scope","User","ApiService","ErrorHandler",function(r,e,t,i){r.resendVerification={email:""},i.clearErrors(r),r.resendEmail=function(){return i.clearErrors(r),r.Success=!1,t.resendVerification({email:r.resendVerification.email}).success(function(){r.Success=!0}).error(function(e,t,n){i.handleResponse(r,{data:e,status:t,headers:n})})},e.getWhenReady().then(function(e){e.isAuthenticated&&!r.IsEditMode&&(location.href="/")})}]),angular.module("gmgApp").controller("ResetPasswordCodeController",["$scope","$location","ApiService","ErrorHandler","$rootScope","MODALS","User","TOKEN_INVALID_FLAG","TOKEN_EXPIRED_FLAG",function(i,e,t,r,n,o,a,s,l){i.resetPasswordVerify={token:""},i.resetPasswordUrl="",i.codeExpiredMessage="",i.codeInvalidMessage="",i.IsPageInEditMode=!1,i.retryCodeInProgress=!1,i.init=function(e,t,n,r){i.resetPasswordUrl=e,i.codeExpiredMessage=t,i.codeInvalidMessage=n,i.IsPageInEditMode=r},i.stateVariables={disabled:!1,clearSpinner:!0},a.getWhenReady().then(function(e){i.IsPageInEditMode||e.isAuthenticated&&(window.location.href="/"),document.body.classList.add("phone-number-reset")}),i.doResetPasswordCodeVerification=function(){return r.clearErrors(i),i.makeMeBusy(!0),t.resetPasswordCodeVerify(i.resetPasswordVerify).success(function(){i.makeMeBusy(!1),r.clearErrors(i),i.success=!0;var e=i.resetPasswordVerify.token.replace(/-/g,"");window.location.href=i.resetPasswordUrl+"?token="+e}).error(function(e,t,n){(e=e==l?i.codeExpiredMessage:e)==s&&(e=i.codeInvalidMessage),r.handleResponse(i,{data:e,status:t,headers:n}),i.makeMeBusy(!1)})},i.makeMeBusy=function(e){i.stateVariables.disabled=e,i.stateVariables.clearSpinner=e,i.success=!1},i.displaySignInModal=function(){n.$broadcast(o.EVENTS.OPEN_SIGN_IN_MODAL)},i.sendVerificationCode=function(){return r.clearErrors(i),i.retryCodeInProgress=!0,i.forgottenPassword={email:localStorage.getItem("email"),number:localStorage.getItem("number"),countryDialCode:localStorage.getItem("countryDialCode"),isEmailAccount:localStorage.getItem("isEmailAccount")},("true"===i.forgottenPassword.isEmailAccount?t.forgottenPasswordEmail(i.forgottenPassword):t.forgottenPasswordSms(i.forgottenPassword)).success(function(){r.clearErrors(i),i.retryCodeInProgress=!1}).error(function(e,t,n){i.retryCodeInProgress=!1})}}]),angular.module("gmgApp").controller("ResetPasswordConfirmController",["$scope","$location","ApiService","ErrorHandler","$rootScope","MODALS","User","TOKEN_INVALID_FLAG","TOKEN_EXPIRED_FLAG",function(o,e,t,r,n,i,a,s,l){o.resetPasswordConfirm={token:"",password:"",confirmPassword:""},o.codeExpiredMessage="",o.codeInvalidMessage="",o.pleaseRequestNewOneMessage="",o.forgottenPasswordUrl="",o.isPageInEditMode=!1,o.stateVariables={disabled:!1,clearSpinner:!0},o.init=function(e,t,n,r,i){o.isPageInEditMode=e,o.codeExpiredMessage=t,o.codeInvalidMessage=n,o.pleaseRequestNewOneMessage=r,o.forgottenPasswordUrl=i},a.getWhenReady().then(function(e){o.isPageInEditMode||e.isAuthenticated&&(window.location.href="/"),document.body.classList.add("phone-number-reset")}),o.doResetPassword=function(){return o.makeMeBusy(!0),o.resetPasswordConfirm.token=e.search().token,t.resetPassword(o.resetPasswordConfirm).success(function(){o.makeMeBusy(!1),r.clearErrors(o),o.success=!0}).error(function(e,t,n){(e=e==l?o.codeExpiredMessage+" <a href='+"+o.forgottenPasswordUrl+"+'>"+o.pleaseRequestNewOneMessage:e)==s&&(e=o.codeInvalidMessage+" <a href='+"+o.forgottenPasswordUrl+"+'>"+o.pleaseRequestNewOneMessage),r.handleResponse(o,{data:e,status:t,headers:n}),o.makeMeBusy(!1)})},o.makeMeBusy=function(e){o.stateVariables.disabled=e,o.stateVariables.clearSpinner=e,o.success=!1},o.displaySignInModal=function(){n.$broadcast(i.EVENTS.OPEN_SIGN_IN_MODAL)}}]),angular.module("gmgApp").controller("ResetPasswordController",["$rootScope","$scope","ApiService","ErrorHandler","MODALS","User","AWS_COGNITO_SWITCH",function(e,i,o,a,t,n,s){i.forgottenPassword={email:"",number:"",countryDialCode:"",storeLanguagePreference:""},i.resetPasswordCodeUrl="",i.stateVariables={disabled:!1,clearSpinner:!0,isEmailAccount:!0},i.init=function(e,t){i.resetPasswordCodeUrl=e,i.cognitoResetPasswordUrl=t},n.getWhenReady().then(function(e){e.isAuthenticated&&(window.location.href="/"),document.body.classList.add("phone-number-reset")}),i.success=!1,i.doForgottenPassword=function(){a.clearErrors(i),i.forgottenPassword.countryDialCode=null==i.selectedCountry?"":"+"+i.selectedCountry.CallingCode;var t=i.stateVariables.isEmailAccount,e=i.forgottenPassword.email,n=i.forgottenPassword.number,r=i.forgottenPassword.countryDialCode;return localStorage.setItem("isEmailAccount",t),localStorage.setItem("email",e),localStorage.setItem("number",n),localStorage.setItem("countryDialCode",r),i.forgottenPassword.storeLanguagePreference=GMGSettings.languageCode,i.makeMeBusy(!0),(t?o.isFeatureSwitchActiveByEmail(s,i.forgottenPassword.email):o.isFeatureSwitchActiveByPhone(s,i.forgottenPassword.countryDialCode,i.forgottenPassword.number)).success(function(e){return!0===e?(t?o.forgottenPasswordCognitoEmail(i.forgottenPassword):o.forgottenPasswordCognitoSms(i.forgottenPassword)).success(function(){i.handleSuccess(i.cognitoResetPasswordUrl)}).error(function(e,t,n){i.handleError(e,t,n)}):(t?o.forgottenPasswordEmail(i.forgottenPassword):o.forgottenPasswordSms(i.forgottenPassword)).success(function(){i.handleSuccess(i.resetPasswordCodeUrl)}).error(function(e,t,n){i.handleError(e,t,n)})})},i.makeMeBusy=function(e){i.stateVariables.disabled=e,i.stateVariables.clearSpinner=e,i.success=!1},i.displaySignInModal=function(){e.$broadcast(t.EVENTS.OPEN_SIGN_IN_MODAL)},i.onTabChange=function(e){i.stateVariables.isEmailAccount=e,a.clearErrors(i)},i.handleSuccess=function(e){a.clearErrors(i),i.makeMeBusy(!1),i.success=!0,window.location.href=e},i.handleError=function(e,t,n){a.handleResponse(i,{data:e,status:t,headers:n}),i.makeMeBusy(!1)}}]),angular.module("gmgApp").controller("SearchController",["$scope","ApiService","$window","User","Product","$location",function(a,t,s,e,i,o){e.getWhenReady().then(function(e){a.user=e});function l(e,t){var n,r={};if(t)for(n=0;n<t.length;n++)void 0!==e[t[n].Key]&&0<e[t[n].Key].length&&(r[t[n].Key]=e[t[n].Key]);return r}function c(n,e){var r={Term:u(),Dlc:o.search().dlc,PageIndex:n?a.search.page+1:0,PageSize:a.search.pageSize,SearchPageUrl:a.search.url,PromotedSearchNode:a.search.promotedSearchNode,IsAscending:a.search.isAscending,ComingSoon:a.search.comingSoon,EarlyAccess:a.search.earlyAccess,Released:a.search.released,Prepurchased:a.search.prePurchased,HideReleasedProducts:a.search.hideReleasedProducts,MultiBuyOnly:a.search.multiBuyOnly,GameTypesToShow:a.search.GameTypesToShow,SortByBestSelling:a.search.isSortByBestSelling};return e&&(e={Platforms:d("PlatformFacets"),Drms:d("DrmFacets"),Genres:d("GenreFacets"),Franchises:d("FranchiseFacets"),SupportedVrs:d("SupportedVrsFacets")},angular.extend(r,e)),a.search.loading=!0,t.search(r).success(function(e){var t=e.Products.map(i.initForSearch);n?Array.prototype.push.apply(a.search.results,t):a.search.results=t,a.search.facets=l(e,a.search.facetsTitles),a.search.anyFilterOptions=(e=>{if(s.facetsLabels)for(var t=0;t<s.facetsLabels.length;t++){var n=e[s.facetsLabels[t].Key];if(void 0!==n&&0<n.length)return!0}return!1})(e),a.search.resultsLength=e.TotalResults,a.search.suggestions=e.Suggestions,a.search.page=e.PageIndex,a.search.pageSize=e.PageSize,a.search.url=e.SearchPageUrl,a.search.promotedSearchNode=e.PromotedSearchNode,a.search.comingSoon=e.ComingSoon,a.search.earlyAccess=e.EarlyAccess,a.search.released=e.Released,a.search.prePurchased=e.PrePurchased,a.search.multiBuyOnly=e.MultiBuyOnly,a.search.GameTypesToShow=e.GameTypesToShow,a.search.isSortByBestSelling=e.SortByBestSelling,a.search.isEarlyAccessOnly=3===s.initialSearchResults.GameTypesToShow,t={platforms:d("PlatformFacets"),drms:d("DrmFacets"),genres:d("GenreFacets"),franchises:d("FranchiseFacets"),supportedVR:d("SupportedVrsFacets"),dlc:o.search().dlc,comingSoon:a.search.comingSoon.toString(),earlyAccess:a.search.earlyAccess.toString(),released:a.search.released.toString(),prePurchased:a.search.prePurchased.toString(),bestSelling:a.search.isSortByBestSelling.toString(),pageSize:a.search.pageSize},o.path(a.search.url+u()).search(t),a.showSelectedPanels(),a.search.last=decodeURIComponent(r.Term),a.search.loading=!1}).error(function(){a.search.loading=!1})}var u=function(){var e=a.search.query||"";return e=decodeURIComponent(e.replace(/["#%&*+/:<=>?\\|]/g," ").replace(/\s+/g," ").trim().replace(/[\s.]+$/,""))},d=function(e){var t=[],n=a.search.facets[e];if(void 0!==n&&0<n.length)for(var r=0;r<n.length;r++)!0===n[r].IsSelected&&t.push(n[r].Code);return t};a.search={results:s.initialSearchResults.Products.map(i.initForSearch),execute:c,removeElement:function(e,t){for(var n,r=0;r<a.search.facets[e].length;r++)if((n=a.search.facets[e][r]).Code===t){n.IsSelected=!1;break}return c(!1,!0)},toggleElement:function(){return c(!1,!0)},reset:function(){var e,t=a.search.facets;for(e in t)if(t.hasOwnProperty(e))for(var n=0;n<t[e].length;n++)t[e][n].IsSelected=!1;return a.search.comingSoon=!1,a.search.released=!0,a.search.prePurchased=!0,a.search.earlyAccess=!0,c(!1,!1)},loadMore:function(){return c(!0,!0)},hideOnLoad:!0,hideReleasedProducts:s.initialSearchResults.HideReleasedProducts,suggestions:s.initialSearchResults.Suggestions,query:s.initialSearchResults.Term,url:s.initialSearchResults.SearchPageUrl,promotedSearchNode:s.initialSearchResults.PromotedSearchNode,resultsLength:s.initialSearchResults.TotalResults,page:s.initialSearchResults.PageIndex,pageSize:s.initialSearchResults.PageSize,comingSoon:s.initialSearchResults.ComingSoon,earlyAccess:s.initialSearchResults.EarlyAccess,released:s.initialSearchResults.Released,prePurchased:s.initialSearchResults.PrePurchased,multiBuyOnly:s.initialSearchResults.MultiBuyOnly,GameTypesToShow:s.initialSearchResults.GameTypesToShow,isAscending:s.initialSearchResults.IsAscending,isSortByBestSelling:s.initialSearchResults.SortByBestSelling,isEarlyAccessOnly:3===s.initialSearchResults.GameTypesToShow,facets:l(s.initialSearchResults,s.facetsLabels),facetsTitles:s.facetsLabels},a.showAll=function(){$(".panel-collapse").collapse("show")},a.showSelectedPanels=function(){for(var e,t,n=s.facetsLabels.length,r=0;r<n;r++){var i=s.facetsLabels[r].Key,o=a.search.facets[i];if(void 0!==o&&0<o.length){for(t=!1,e=0;e<o.length;e++)if(o[e].IsSelected){$("#collapse"+i).collapse("show"),t=!0;break}t||0===r||$("#collapse"+i).collapse({toggle:!1}).collapse("hide")}}}}]),angular.module("gmgApp").controller("SecretVoucherOfferBlockController",["$scope","$window","$timeout","$q","ScreenSize","User","Product","ApiService","GlobalMessageBarService","SecretVoucherClaimCheckService","tealiumLoggingService","SECRET_VOUCHER_CLAIM_SOURCE",function(u,d,p,e,h,f,m,t,r,g,i,n){var v,y=!1;u.onDiscountAction=function(){return y?e.resolve(!1):t.claimSecretVouchers([u.offerId],null,n.SECRET_VOUCHER_OFFER_BLOCK).then(function(e){y=!0;for(var t,n=0;n<e.data.Games.length;n++)u.products[e.data.Games[n].GameVariantCode]&&(u.products[e.data.Games[n].GameVariantCode].price=e.data.Games[n].DiscountedPrice,u.products[e.data.Games[n].GameVariantCode].discount=e.data.Games[n].DiscountPercent,i.logSecretVoucherClaimed(e.data.Games[n]&&e.data.Games[n].VoucherConfigId?e.data.Games[n].VoucherConfigId:""));if(v&&e.data.Errors&&e.data.Errors.length)throw(t=r.globalMessage).visible=!0,t.hideClose=!1,t.isError=!0,t.message=v})},u.selectItemGaEvent=function(e,t,n,r){i.logSelectItemClicked(e,t,n,r)},u.init=function(e,t,n,r,i,o,a,s){u.offerId=e,u.products={},v=o,u.containerElementId="container-"+e,u.claimOfferElementId="claim-offer-"+e,u.spinnerElementId="spinner-"+e,u.appliedSectionElementId="applied-section-"+e,u.discountConfettiContainerClass="confetti-container-discount-"+e;o=Date.now();if(i<o||o<r)p(function(){angular.element("#"+u.containerElementId).collapse("hide")});else{n&&n.length&&f.getWhenReady().then(function(e){-1===n.indexOf(e.group)?a||p(function(){angular.element("#"+u.containerElementId).collapse("hide")}):a&&p(function(){angular.element("#"+u.containerElementId).collapse("show")})}),g.getClaim(u.offerId).then(function(t){t&&!y&&(y=!0,p(function(){if(t.Expended&&s)angular.element("#"+u.containerElementId).collapse("hide");else{for(var e=0;e<t.Products.length;e++)u.products[t.Products[e].Code]&&(u.products[t.Products[e].Code].price=t.Products[e].DiscountedPrice,u.products[t.Products[e].Code].discount=t.Products[e].DiscountPercent);u.finishDiscountAnimation()}}))});for(var l=0;l<t.length;l++){var c=m.initForSecretVoucherOffer(t[l]);u.products[c.sku]=c}u.products&&Object.keys(u.products).length<3&&(u.showSingleProduct=Object.keys(u.products).length<2,e=function(){u.showLargeProducts=h.greaterThan("xs")},angular.element(d).on("resize",e),e());i=function(){u.mobileView=h.lessThanOrEqual("xs")};angular.element(d).on("resize",i),i()}}}]),angular.module("gmgApp").controller("SharedGameViewController",["$scope","tealiumLoggingService",function(e,i){e.isSharedGameView=!0,e.selectItemGaEvent=function(e,t,n,r){i.logSelectItemClicked(e,t,n,r)}}]),angular.module("gmgApp").controller("SignInWithMessageController",["$rootScope","$scope","User","Utils","MODALS",function(e,t,n,r,i){t.returnUrl="?returnUrl="+r.getExternalLoginReturnUrl(),t.userLoaded=!1,n.getWhenReady().then(function(e){t.loggedIn=e.isAuthenticated,t.userLoaded=!0}),t.displaySignInModal=function(){e.$broadcast(i.EVENTS.OPEN_SIGN_IN_MODAL)},t.displaySignUpModal=function(){e.$broadcast(i.EVENTS.OPEN_SIGN_UP_MODAL)}}]),angular.module("gmgApp").controller("SocialLinkingBlockController",["$scope","$window","$q","ApiService","Utils","User","IS_CURRENT_USERS_PROFILE","$rootScope",function(n,r,i,t,e,o,a,s){var l=n.$on(a,function(e,t){n.isCurrentUserProfile=t,n.isCurrentUserProfile&&!n.isWaiting&&(n.isWaiting=!0,n.getLinkedAccounts)&&!n.initStarted&&n.getLinkedAccounts()});s.modalNetwork=void 0;function c(e,t){return e[t]||("facebook"===e.name.toLowerCase()?n.connect(e):addSetting(e,t)),i.resolve(!0)}n.$on("$destroy",function(){l()}),n.go=e.redirect,n.returnUrl="&returnUrl="+e.getExternalLoginReturnUrl(),n.isLoading=!0,o.getWhenReady().then(function(e){n.checkNetwork=c,n.networks={},n.getLinkInfo=function(){return n.isError=!1,n.isLoading=!0,t.getLinkInfo().success(function(e){n.networks=e,n.isError=!1,n.isLoading=!1}).error(function(){n.isError=!0,n.isLoading=!1})},n.getLinkInfo()}),n.openUnlinkModal=function(e,t){(s.modalNetwork=e).isDisconnectable?angular.element("#unlink-modal").modal():t&&r.open(t,"_blank")},n.connect=function(e){e.spinning=!0,n.go(e.connectUrl,n.returnUrl,!1)},n.unlinkNetwork=function(){var e=s.modalNetwork;e.spinning=!0,t.unlinkNetwork(s.modalNetwork.name).then(function(){e.connected=!1}).finally(function(){e.spinning=!1}),s.modalNetwork=null}}]),angular.module("gmgApp").controller("SocialLinkingVerificationController",["$scope","$location","$window","ErrorHandler","ApiService",function(i,e,t,o,n){i.linkingDetails={password:"",verifyUser:!0,disabled:!1,redirectUrl:e.search().returnUrl},i.providerName=e.search().externalProvider,i.verificationErrors=o.createValidationModel(),i.successCallback=function(e){e?t.location.href=i.linkingDetails.redirectUrl:n.updateApiData(),i.linkingDetails.disabled=!1,i.linkingDetails.verifyUser=!1},i.errorCallback=function(e,t,n){var r={data:e,status:t,headers:n};429!==t&&500!==t&&o.handleResponse(i.verificationErrors,r=e?r:{data:"We're currently having a small issue. Please try again. Sorry!",status:t,headers:n}),i.error=!0,i.linkingDetails.disabled=!1},i.linkAccount=function(){if(i.error=!1,o.clearErrors(i.verificationErrors),!i.verificationForm.$invalid)return i.linkingDetails.disabled=!0,n.linkAccount(i.linkingDetails).success(function(e){i.successCallback(e)}).error(function(e,t,n){i.errorCallback(e,t,n)})}}]),angular.module("gmgApp").controller("SocialModalController",["$scope","MODALS","modalService",function(t,e,n){var r,i,o="#social-modal",a=(t.loadModal=!1,t.isLoading=!1,t.$on(e.EVENTS.OPEN_SOCIAL_MODAL,function(e,t){a(e)}),function(e){t.loadModal=!0,t.modalLoaded?s():t.isLoading=!0}),s=function(){r.modal(e.DISPLAY.SHOW),i.attr("src",n.socialModalImageUrl)};t.onModalLoaded=function(){r=$(o),i=$("#social-modal-image"),s(),t.isLoading=!1,t.modalLoaded=!0,$(o)[0].classList.add("fade")}}]),angular.module("gmgApp").controller("SsoConfirmationPageController",["$scope","$window","ApiService","User","UserCookie","Utils",function(a,s,e,l,t,c){a.loading=!0,a.cancel=function(){s.location.href="/"},a.logout=function(){a.loading=!0,e.logout().then(function(){t.delete(),s.location.href=GMGSettings.signInUrl+"?returnUrl="+encodeURIComponent(s.location.href)})},a.init=function(e,t,n,r){a.action=e+location.search;for(var e=c.getQueryString(s.location.href),i=(e.client_id&&e.redirect_uri||(s.location.href="/"),a.scopes=[],e.scope?e.scope.split(" "):[]),o=0;o<i.length;o++)r[i[o]]&&a.scopes.push(r[i[o]]);a.siteBaseUrl=e.redirect_uri,a.site=a.siteBaseUrl.split("/")[2].split(":")[0],a.scopesText=n.replace("{0}",a.site),l.getWhenReady().then(function(e){e.isSignedOut||(a.avatarUrl=e.avatarUrl,a.username=e.username,a.profileUrl=t+e.username,a.loading=!1)})}}]),angular.module("gmgApp").controller("SsoManagementBlockController",["$scope","ApiService",function(r,e){r.loading=!0,r.networks=[],r.init=function(n){e.getSsoInfo().then(function(e){if(r.networks=e.data,0===r.networks.length)r.empty=!0;else for(var t=0;t<r.networks.length;t++)r.networks[t].connectedOnText=n.replace("{0}",r.networks[t].ConnectedOn);r.loading=!1})},r.disconnectNetwork=function(){r.loading=!0,e.deleteSso(r.currentNetwork).then(function(e){r.networks.splice(r.networks.indexOf(r.currentNetwork),1),0===r.networks.length&&(r.empty=!0),r.loading=!1})},r.setCurrent=function(e){r.currentNetwork=e}}]),angular.module("gmgApp").controller("StaffReviewController",["$scope","$window",function(r,e){r.ShowMore=function(){var e=$("#staff-review"),t=parseFloat(e.css("line-height")),n=parseFloat(e.css("height"));r.big=e[0].scrollHeight>e[0].clientHeight||4<n/t||e[0].scrollHeight===e[0].clientHeight&&n/t==4},angular.element(e).bind("resize",function(){r.ShowMore()})}]),angular.module("gmgApp").controller("steamController",["$scope","$window",function(t,n){t.openWindow=function(){var e=t.steamUrl+t.keyValue;n.open(e,"_blank")}}]),angular.module("gmgApp").controller("ThirdPartyGameGiftRedemptionBlockController",["$scope","$window","$location","ObjectValidator","Utils","GAME_GIFTING",function(t,e,n,i,r,o){function a(){t.isError=!1,t.isWarning=!1,t.errorMessage="",t.errorMessageSm=""}function s(){var e,t,n,r;null==f||f.closed?f=window.open(d,"",(e=screen.availWidth,t=screen.availHeight,n=parseFloat(h.width)*e,r=parseFloat(h.height)*t,"width="+n+", height="+r+", top="+(t-r)/2+", left="+(e-n)/2)):f.location.replace(d),setInterval(function(){var e;f.closed&&(e=null,i.isNullOrEmptyString(localStorage.ThirdPartyRedemptionError)||(e=JSON.parse(localStorage.ThirdPartyRedemptionError),localStorage.ThirdPartyRedemptionError=""),m(e),$("#manualTrigger").click(),0)},200)}var l=i.isNullOrUndefined(GMGSettings.apiServiceUrl)?GMGSettings.apiBaseUrl.split(".com")[0]+".com":GMGSettings.apiServiceUrl.split(".com")[0]+".com",c=o.SELECTORS,u=o.CONSTANTS,d="",p=o.THIRD_PARTY.REDEMPTION_URL_QUERY,h=o.THIRD_PARTY.POPUP_DIMENSION,f=null,m=(t.gameGiftPattern=o.GAME_GIFT_PATTERN,t.isError=!1,t.isWarning=!1,t.errorMessage="",t.errorMessageSm="",t.showBrand="true"===n.search().showBrand,t.giftCode="",t.init=function(e){d=l+e+p,localStorage.ThirdPartyRedemptionAutoInjection=!1},function(e){i.isNullOrUndefined(e)||i.isNullOrEmptyString(e.responseText)||(!i.isNullOrEmptyString(e.responseText)&&-1!==e.responseText.indexOf(u.WARNING_PLACEHOLDER)?(t.isWarning=!0,e.responseText=r.removeWarningPlaceHolder(e.responseText)):t.isError=!0,t.errorMessage=e.responseText.split(u.MESSAGE_SEPARATOR)[0],t.errorMessageSm=e.responseText.split(u.MESSAGE_SEPARATOR)[1])});t.openWindow=function(){a(),localStorage.ThirdPartyRedemptionCode=t.giftCode,s()},angular.element(c.CODE_INPUT).on(u.KEYPRESS,function(){a()}),t.ShowMessageAfterReceivingError=function(){t.isError=t.isError,t.isWarning=t.isWarning}}]),angular.module("gmgApp").controller("ThirdPartyLazyVoucherController",["$scope","$rootScope","modalService","ApiService","ThirdPartyLazyVoucherService","User","MODALS","serverTimeService","TIME_RECEIVED",function(s,t,l,n,c,u,e,r,i){var d=null,p=null;s.voucherCode="",s.isLoggedIn=!1,s.startDate="",s.endDate="",s.thirdPartyLazyVoucherModal=[],s.isUserValidForGroup=!0,s.displaySignInModal=function(){t.$broadcast(e.EVENTS.OPEN_SIGN_IN_MODAL)},s.canSpin=function(){return!!s.isLoggedIn||(s.displaySignInModal(),!1)};s.getResult=function(){var e;if(!s.disableButton&&!s.loadingModal)return s.loadingModal=!0,s.canSpin()?((e=n.spinWheel(p,d)).then(function(e){(e.data.ErrorMessage?(s.error={message:e.data.ErrorMessage,imageUrl:e.data.ErrorImageUrl,hasHeader:null!==e.data.ErrorImageUrl},s.disableButton=!e.data.CanRespin,t.$emit("callThirdPartyLazyVoucherErrorModalDirective",s.error),s.errorModal):(s.winGameUrl=e.value||"",s.gameName=e.name||"",t.$emit("callThirdPartyLazyVoucherModalDirective",e.data),s.thirdPartyCodeModal)).open(),s.loadingModal=!1}),e):void 0},s.getButtonText=function(){return s.disableButton?s.outOfStockText:s.revealCodeText},t.$on(i,function(){var e=r.getServerTime();s.startDate&&e.isBefore(s.startDate)||s.endDate&&e.isAfter(s.endDate)?s.isInDate=!1:s.isInDate=!0}),s.init=function(e,t,n,r,i,o,a){d=e,p=t,s.startDate=n,s.endDate=r,s.expiredCodeText=i.ExpiredCodeText,s.revealCodeText=i.RevealCodeButtonText,s.outOfStockText=i.OutOfStockButtonText,s.xpTiers=o,s.thirdPartyCodeModal=new l.Modal(a),s.errorModal=new l.Modal,s.disableButton=!1,s.loadingModal=!1,u.getWhenReady().then(function(e){s.isLoggedIn=null!=e&&e.isAuthenticated,null!=e&&s.xpTiers&&s.xpTiers.length&&(s.isUserValidForGroup=-1!==s.xpTiers.indexOf(e.group)),s.loadedUsers=!0}),c.getPrizeLevel(t).then(function(e){e&&e.Prizes&&(s.disableButton=0==e.Prizes[0]),s.loadedPrizeLevels=!0})}}]),angular.module("gmgApp").directive("thirdPartyLazyVoucherModal",["modalService",function(e){return $.extend({restrict:"EA",scope:{model:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/third-party-lazy-voucher-modal.ce5e36264.html",controller:"thirdPartyLazyVoucherModalController"},e.modalDirectiveBase)}]).controller("thirdPartyLazyVoucherModalController",["$scope","$rootScope","$window",function(t,e,r){e.$on("callThirdPartyLazyVoucherModalDirective",function(e,n){n.Keys&&(t.keys=Object.keys(n.Keys).map(function(e){var t=n.Keys[e];return t.keyName=e,t})),t.hasAffiliateUrl=!(!t.model.AffiliateUrl||0===t.model.AffiliateUrl.length),t.drm=n.Drm,t.drmHelp=n.DrmHelp,t.isHiddenKeys=n.IsHiddenKeys,t.isFinal=n.Final,t.boxId=n.BoxId,t.openAffiliateUrl=function(e){r.open(e,"_blank")}})}]),angular.module("gmgApp").directive("thirdPartyLazyVoucherErrorModal",["modalService",function(e){return $.extend({restrict:"EA",scope:{error:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/error-modal.b180ba09f.html",controller:"thirdPartyLazyVoucherErrorModalController"},e.modalDirectiveBase)}]).controller("thirdPartyLazyVoucherErrorModalController",["$scope","$rootScope",function(n,e){e.$on("callThirdPartyLazyVoucherErrorModalDirective",function(e,t){n.error=t})}]),angular.module("gmgApp").controller("ThirdPartyRedemptionController",["$rootScope","$scope","$window","$location","ApiService","GAME_GIFTING","AgeVerificationService","MODALS","User",function(e,n,t,r,i,o,a,s,l){n.signInTabActive=!0,n.loadingUser=!0,n.waitingForData=!0,n.gameDetails=null,n.giftCode=null,n.isAuthenticated=!1,n.isGreenGuardBlocked=!1;function c(e,t){401===t?(n.isAuthenticated=!1,n.waitingForData=!1):403===t&&"Green Guard Check"===e.Message?(n.isGreenGuardBlocked=!0,n.waitingForData=!1):(localStorage.ThirdPartyRedemptionError=JSON.stringify({status:t,responseText:e,statusText:e}),"true"===localStorage.ThirdPartyRedemptionAutoInjection?((t=window.location.href.split("/")).push(o.AUTO_INJECTION_ERROR_PAGE),window.location.href=t.join("/").toString()):window.close())}function u(){i.getGameDetails(n.giftCode).success(function(e){n.isAuthenticated=!0,n.gameDetails=e,n.waitingForData=!1}).error(c)}e.$on(o.THIRD_PARTY.REDEMPTION_CANCELLED,function(){window.close()}),e.$on(o.THIRD_PARTY.LOGIN_SUCCESS,function(){i.getUserInfo().success(function(e){t.userData=e,a.verifyAge(n.minimumUserAge,s.TOO_YOUNG_MODAL_TYPE.ACCOUNT)})}),e.$on(o.THIRD_PARTY.REGISTER_SUCCESS,function(){u()}),e.$on(s.EVENTS.AGE_VERIFIED,function(){u()}),e.$on(o.THIRD_PARTY.LOGOUT,function(){i.getUserInfo().success(function(){n.isAuthenticated=!1})}),n.giftCode=localStorage.ThirdPartyRedemptionCode,u()}]),angular.module("gmgApp").controller("TwitchFollowingController",["$scope","ObjectValidator","$location","$window","COMMUNITY_SEGMENT_ADDED_TO_URL","$rootScope",function(t,n,e,r,i,o){var a="",s=(t.loginRegisterUrl="",t.init=function(e){n.isNullOrEmptyString(e)||(t.loginRegisterUrl=e,s())},t.socialRedirect=function(){r.location=a},function(){a=t.loginRegisterUrl+"&returnUrl="+e.url()+"&isTwitchFollowing=true"});o.$on(i,function(e,t){s()})}]),angular.module("gmgApp").controller("TwitchRedirectCustomMessageController",["$scope","$window","ApiService","Utils",function(e,t,n,r){e.init=function(){var e=r.getQueryString(t.location.href);n.redirectCustomMessage(e.returnUrl).then(function(e){t.location.href=e.data})}}]),angular.module("gmgApp").controller("TwitchVideoController",["$rootScope","$scope","TwitchService","ObjectValidator","DISPLAY_COMMUNITY_TAB","PDP_SECTION_ON_LOAD_EVENT","pdpProductService","PRODUCT_CHANGED",function(n,r,i,o,e,a,s,t){r.loading=!0,r.streams=[],r.numberOfStreams=0,r.gameName="";var l,c,u,d=r.$on(t,function(e){r.product=e}),p=(r.load=function(e,t){r.product=s.getPdpProduct(),l||(r.numberOfStreams=t,r.gameName=(e=e,o.isNullOrUndefined(r.product)||o.isNullOrUndefined(r.product.mainCommunityProductDetails)?e:r.product.twitchGameName),i.getGameStreams({gameName:r.gameName,limit:t},function(e){r.streams=angular.isArray(e)?e:[],0===r.streams.length&&n.$broadcast(a.TWITCH),r.loading=!1}),i.getFollowers(function(e){r.numberOfFollowers=e}),l=!0)},r.onTwitchLoad=function(){n.$broadcast(a.TWITCH)},r.loadVideo=function(e){r.videoUrl=i.getVideoUrl(e),r.chatUrl=i.getChatUrl(e),(u=u||$("#twitchVideo-modal")).modal("show"),c||(u.on("hidden.bs.modal",function(){r.videoUrl=null,r.chatUrl=null}),c=!0)},r.$on(e,function(e,t){o.isNullOrEmptyString(t.gameName)||r.gameName===t.gameName||(l=!1,r.load(t.gameName,r.numberOfStreams))}));r.$on("$destroy",function(){d(),p()})}]),angular.module("gmgApp").controller("UnsubscribeLandingBlockController",["$scope","ErrorHandler","$location","UNSUBSCRIBE_URL_PARAMETER","ApiService","$window","ObjectValidator",function(r,i,o,a,s,l,c){r.requestOptOut=function(){var e=o.search()[a.TOKEN],t=o.search()[a.COMM_TYPE],n=o.search()[a.CAMPAIGN_ID];32<n.length&&(n=n.substring(0,32)),c.isNullOrEmptyString(e)||c.isNullOrEmptyString(t)||c.isNullOrEmptyString(n)||!/^[0-9a-fA-F]{32}$/.test(n)?l.location.href=r.failedPageUrl:s.optOutCommsPref(e,t,n).then(function(e){l.location.href=e.data.redirectUrl},function(e){i.handleResponse(r,e)})},r.init=function(e){r.failedPageUrl=e}}]),angular.module("gmgApp").controller("UpdateEmailController",["$rootScope","$scope","$window","ApiService","ErrorHandler","myAccountService","UPDATE_EMAIL_FORM_CLOSED","modalService","cognitoVerificationCodeModalService","AWS_COGNITO_SWITCH",function(e,r,i,t,o,n,a,s,l,c){var u=$("#updateEmailFormShowMode"),d=$("#updateEmailFormEditMode");r.cognitoVerificationCodeModal=null,r.init=function(e){r.cognitoVerificationCodeModal=new s.Modal(e),l.setModal(r.cognitoVerificationCodeModal)},r.isLoadingEmail=!0,e.$on(a,function(){r.closeForm()}),r.openUpdateEmailForm=function(){u.hide(),d.slideDown(),n.openUpdateEmailForm()},r.closeForm=function(){d.slideUp(),u.slideDown("10")},r.updateEmailValidation=o.createValidationModel(),r.hasUserData=function(){return r.isLoadingEmail&&(r.userProfile=n.loadUserProfile(),r.userProfile)&&(r.email=r.userProfile.EmailAddress,r.editedCredentials={},r.editedCredentials.email=r.userProfile.EmailAddress,r.isLoadingEmail=!1),r.userProfile},r.$watch("editedCredentials.email",function(){o.clearErrors(r.updateEmailValidation),r.editedCredentials&&r.editedCredentials.email&&(r.editedCredentials.email=r.editedCredentials.email.toLowerCase().replace(/\s+/g,""))}),r.$watch("editedCredentials.confirmPassword",function(){o.clearErrors(r.updateEmailValidation)}),r.resetCredentialsForm=function(){r.closeForm(),n.closeForm(),o.clearErrors(r.updateEmailValidation),r.editedCredentials=null,r.credentialsForm.$setPristine(),r.credentialsForm.$dirty=!1,r.credentialsForm.$submitted=!1,r.editedCredentials={},r.editedCredentials.email=r.email},r.updateEmail=function(){var n={Email:r.editedCredentials.email,Password:r.editedCredentials.confirmPassword},e=(o.clearErrors(r.updateEmailValidation),r.oldEmail=r.email,t.isFeatureSwitchActiveByCloud9Id(c,i.userData.CloudNineId));return t.updateEmail(n).then(function(t){e.success(function(e){1==e?r.cognitoVerificationCodeModal.open({confirmSignup:!1,email:n.Email}):i.location.href=t.data})},function(e){500!==e.status&&o.handleResponse(r.updateEmailValidation,e)})}}]),angular.module("gmgApp").controller("UplayReturnController",["$scope","$window","$q","ApiService","UPLAY_CONSTANTS","uplayConnectSdkService",function(n,r,e,i,o,a){function t(){n.$apply(function(){n.isCloseButtonVisible=!0})}var s,l,c=null;n.isCloseButtonVisible=!1,n.closeWindow=function(){(r.opener||n.isCloseButtonVisible)&&r.close(),setTimeout(t,1e3)},n.init=function(){var t;(c?e.resolve(c):(t=e.defer(),i.getUplayThirdPartyCookiesDisabledRedirectPage().success(function(e){c=e,t.resolve(e)}).error(function(e){t.reject(e)}),t.promise)).then(function(e){e=encodeURIComponent(r.location.origin+e);a.initializeConnectInstance(e,!0).then(function(t){void 0!==t.getTicket&&t.getTicket().subscribe(function(e){e.status===o.UPLAY_GET_TICKET_FAILED_STATUS?n.closeWindow():(s=e.payload,t.getProfiles(s.ticket,s.sessionId,s.userId).subscribe(function(e){l=e.payload.profiles.filter(function(e){return"uplay"==e.platformType})[0],window.opener&&(window.opener.setUplayProfileResponse(l),window.opener.setUplayTicketResponse(s)),n.closeWindow()}))})}).catch(function(){n.closeWindow()})})}}]),angular.module("gmgApp").controller("UplayThirdPartyCookiesDisabledRedirectController",["$scope","$window","ApiService","uplayConnectSdkService",function(e,n,r,i){e.init=function(){var e=i.initializeConnectInstance(null,!0),t=r.getUplayReturnPage();Promise.all([e,t]).then(function(e){e[0].getTicketFromSsoId(function(){window.location.href=n.location.origin+e[1].data})})}}]),angular.module("gmgApp").controller("UpsellProductController",["$scope","WantListService","pdpAssociatedProductsService","PDP_EVENTS","MODALS","$rootScope","User",function(i,o,e,t,n,r,a){var s="",l=!1,c=(i.currency=userData.Currency,i.saveToWishList=function(t,n,r){o.saveToWishList(t,l,s).then(function(e){e&&(i.upsellProduct.IsGameWant=!0,utag.link({tealium_event:"wishlist",product_id:t,product_price:r,product_quantity:"1",currency:n}))})},i.unsaveToWishList=function(e){o.unsaveToWishList(e,l,s).then(function(e){e&&(i.upsellProduct.IsGameWant=!1)})},i.displaySignInModal=function(){userData.Username||r.$broadcast(n.EVENTS.OPEN_SIGN_IN_MODAL)},i.$on(t.LOGGED_OUT_USER_WISH_LIST_ERROR_MESSAGE,function(e){s=e})),u=i.$on(t.IS_LOGGED_IN,function(e){l=e});i.$on("$destroy",function(){c(),u()}),s=e.getLoggedOutUserWishListErrorMessage(),l=e.getLoggedInStatus()}]),angular.module("gmgApp").controller("UpsellProductsController",["$scope","ApiService","PRODUCT_CHANGED","ObjectValidator","User","OwlCarousalCustomNavigationService","Basket",function(n,r,e,i,t,o,a){function s(){var t;n.loadingUpsell=!0,n.basket.items.length&&(t=[],n.basket.items.forEach(function(e){t.push(e.product.sku)}),r.getAssociatedProducts(t,12).then(function(e){n.upsellProducts=e.data,!i.isNullOrUndefined(n.upsellProducts)&&0!==n.upsellProducts.length&&n.loggedIn&&(e=n.upsellProducts.map(function(e){return e.Code}).join(","),r.areGamesWanted(e).then(function(t){n.upsellProducts.forEach(function(e){e.IsGameWant=t.data[e.Code]})})),n.loadingUpsell=!1}))}var l=$("#upsell-carousel"),c=(n.upsellProducts=null,n.$on(e,function(e,t){n.product=t,(l=$("#upsell-carousel")).data("owl.carousel")&&l.trigger("destroy.owl.carousel"),updateAssociatedProduct()}));n.$on("$destroy",function(){c()}),n.initCarousel=function(){l.owlCarousel({loop:!1,margin:18,navText:["<i class='glyphicon glyphicon-menu-left'></i>","<i class='glyphicon glyphicon-menu-right'></i>"],nav:!0,responsiveClass:!1,responsive:{0:{nav:!1,stagePadding:66,items:1},480:{nav:!1,stagePadding:66,items:2},768:{items:2},991:{items:3},1200:{margin:25,items:4}}});var e=l.find(".owl-dot.active").index();l.find(".owl-next").on("click",function(){e=o.moveNextPage(l,e)}),l.find(".owl-prev").on("click",function(){e=o.movePrevPage(l,e)})},n.basket=a.get(),t.getWhenReady().then(function(e){n.user=e,n.loggedIn=e.isAuthenticated,s()})}]),angular.module("gmgApp").controller("UserActivityChartsController",["$scope","$window","ACTIVITY_UPDATED","ACTIVITY_ERROR_UPDATED","IS_PROFILE_PUBLIC","IS_CURRENT_USERS_PROFILE","STEAM_USER_ID_UPDATED","IS_FORUM_MODERATOR_UPDATED","steamService","ObjectValidator",function(i,o,e,t,n,r,a,s,l,c){function u(e){return(e=Math.round(e/60))<1?"<1":e+""}function d(e){var t=$("#"+e.args.renderAt).width();e.setChartAttribute("doughnutRadius",Math.min(Math.floor(t/4.5),100)),e.setChartAttribute("pieRadius",Math.min(Math.floor(t/3),150))}i.isBusyLoadingTotal=!0,i.isBusyLoadingRecent=!0,i.isEmptyTotal=!0,i.isEmptyRecent=!0;function p(e,t,n,r,i){if(!t)return null;for(var o=[],a=0;a<t.mostPlayed.length;a++)o[a]={label:t.mostPlayed[a].name,value:t.mostPlayed[a].playtime,displayValue:u(t.mostPlayed[a].playtime)};var s,l={defaultCenterLabel:u(t.playtimeTotal)+" hours"};return $.extend(l,e),0<o.length&&r(),s=i,new FusionCharts({type:"doughnut2d",renderAt:n,width:"100%",height:"600",dataFormat:"json",dataSource:{chart:l,data:o},events:{rendered:function(){setTimeout(s,1e3)}}})}var h=i.$on(t,function(){i.isError=!0,i.populated=!0,i.isBusyLoadingTotal=!1,i.isBusyLoadingRecent=!1}),f=i.$on(n,function(e,t){i.isProfilePublic=t}),m=i.$on(r,function(e,t){i.isCurrentUserProfile=t}),g=i.$on(a,function(e,t){i.steamId=t,i.steamId?i.doesSteamIdExist=!0:(i.doesSteamIdExist=!1,i.isBusyLoadingTotal=!1,i.isBusyLoadingRecent=!1)}),v=i.$on(e,function(e,t){var n,r;i.isError=!1,i.populated||(i.populated=!0,!i.doesSteamIdExist||(n=c.isNullOrUndefined(t)||c.isNullOrUndefined(t.data)||c.isNullOrUndefined(t.data.result)?null:t.data.result.value,c.isNullOrUndefined(n))||!n.recent&&!n.alltime?(i.isBusyLoadingTotal=!1,i.isBusyLoadingRecent=!1):(i.displayCharts=!0,i.showRecent=!1,r={numberPrefix:"",startingAngle:"90",decimals:"0",centerLabel:"$label",paletteColors:"#41D5C3, #FF5003, #4178BD, #673C86, #DB2780, #327C75, #913A15, #324E72, #4B325F, #7F2554",enableSmartLabels:"1",smartLineColor:"#E8E5E0",smartLineThickness:"1",baseFontColor:"#ffffff",baseFont:"rawline, Arial",bgAlpha:"0",showShadow:"0",showLegend:"1",legendNumColumns:"2",legendBgColor:"#161618",legendBorderAlpha:"0",legendItemFontSize:"14",legendIconBorderThickness:"0",legendShadow:"0",toolTipColor:"#000000",toolTipBgColor:"#ffffff",use3dlighting:"0",valueFontColor:"#ffffff",valueFontSize:"16",centerLabelFontSize:"16",centerLabelBold:"1",centerLabelFontColor:"#ffffff",animateClockwise:"1",pieRadius:"150",doughnutRadius:"100",borderAlpha:"0",drawCustomLegendIcon:"1",showPlotBorder:"1",plotBorderColor:"#1F2025",plotBorderThickness:"4",alignLegendWithCanvas:"1"},FusionCharts.ready(function(){i.recentChart=p(r,n.recent,"chart-container-recent",function(){i.isEmptyRecent=!1},function(){d(i.recentChart)}),i.totalChart=p(r,n.alltime,"chart-container-total",function(){i.isEmptyTotal=!1},function(){d(i.totalChart)}),i.recentChart&&(i.recentChart.setTransparent(!0),i.recentChart.render(),i.isBusyLoadingRecent=!1),i.totalChart&&(i.totalChart.setTransparent(!0),i.totalChart.render(),i.isBusyLoadingTotal=!1),angular.element(o).bind("resize",function(){i.recentChart&&d(i.recentChart),i.totalChart&&d(i.totalChart)})})))});i.initialization=function(){i.steamId=l.getSteamId(),i.steamId||(i.doesSteamIdExist=!1)},i.$on("$destroy",function(){f(),m(),v(),g(),h()})}]),angular.module("gmgApp").controller("UserActivityController",["$scope","ApiService","ObjectValidator","activityService","steamService","ErrorHandler","ACTIVITY_UPDATED","ACTIVITY_ERROR_UPDATED","$sce","MONTHS","PLAYED_ICON","TIME_ICON","PLAY_FIRST_TIME","PLAY_TIME","ACHIEVEMENT","IS_PROFILE_PUBLIC","IS_CURRENT_USERS_PROFILE","STEAM_USER_ID_UPDATED","IS_FORUM_MODERATOR_UPDATED",function(o,e,n,t,r,i,a,s,l,c,u,d,p,h,f,m,g,v,y){o.model={dates:[]},o.loadedAtLeastOnce=!1,o.isEmpty=!0,o.showMore=!0,o.isError=!1,o.activityValidation=i.createValidationModel();var b=o.$on(a,function(e,t){n.isNullOrUndefined(t)||n.isNullOrUndefined(t.data)||(t=t.data.result,o.fillDictionary(t),n.isNullOrUndefined(t))||n.isNullOrUndefined(t.value)||(o.bookmark=t.value.bookmark,o.showMore=!n.isNullOrUndefined(t.value.timeline)&&t.value.timeline.length>=o.numberOfActivities),o.loadedAtLeastOnce=!0}),S=o.$on(v,function(e,t){o.steamId=t,o.doesSteamIdExist=!!o.steamId}),_=o.$on(s,function(){o.showMore=!1,o.isError=!0,o.loadedAtLeastOnce=!0}),E=o.$on(m,function(e,t){o.isProfilePublic=t}),C=o.$on(g,function(e,t){o.isCurrentUserProfile=t});o.$on("$destroy",function(){E(),C(),b(),S(),_()}),o.gamerDetails=function(){return o.isProfilePublic||!o.isProfilePublic&&o.isCurrentUserProfile?t.getOrUpdateActivity(o.steamId,o.bookmark,o.numberOfActivities):null},o.fillDictionary=function(e){n.isNullOrUndefined(e)||n.isNullOrUndefined(e.value)||n.isNullOrUndefined(e.value.timeline)||e.value.timeline.length<=0?o.loadedAtLeastOnce||(o.isEmpty=!0):(o.isEmpty=!1,angular.forEach(e.value.timeline,function(e){for(var t=e.playtime||e.achievement,t=new Date(t.timestamp),n=o.getDateString(t),r=-1,i=0;i<o.model.dates.length;i++)if(o.model.dates[i].date===n){r=i;break}-1===r&&(o.model.dates.push({date:n,items:[]}),r=o.model.dates.length-1);t={time:t.toTimeString().substr(0,5),imageURL:o.getImageUrl(e),text:l.trustAsHtml(o.getItemText(e)),belowText:o.getAchievementDescription(e)};o.model.dates[r].items.push(t)}))},o.getItemText=function(e){switch(o.getTypeOfMessage(e)){case p:return"Played <b>"+e.playtime.title+"</b> for the first time, for a total of <b>"+o.getTimeMessage(e.playtime.playtimeTotal)+"</b>";case h:return"Played <b>"+e.playtime.title+"</b> for <b>"+o.getTimeMessage(e.playtime.playtime)+"</b>, bringing the total time played to a total of <b>"+o.getTimeMessage(e.playtime.playtimeTotal)+" </b>";case f:return"Unlocked achievement <b>"+e.achievement.achievement+"</b> in <b>"+e.achievement.title+"</b></br>";default:return""}},o.getAchievementDescription=function(e){return e.achievement?e.achievement.displayName:""},o.getImageUrl=function(e){switch(o.getTypeOfMessage(e)){case p:return u;case h:return d;case f:return e.achievement.iconURL;default:return""}},o.getTypeOfMessage=function(e){return e.playtime?e.playtime.playtimeTotal&&e.playtime.playtimeTotal!==e.playtime.playtime?h:p:f},o.getTimeMessage=function(e){var t=Math.floor(e/60),e=e%60,n="",n=0===t?"":1===t?t+" hour":t+" hours";return 0!=e&&(0<t&&0<e&&(n+=" and "),n+=1==e?e+" minute":e+" minutes"),n},o.initialization=function(e){o.isProfilePublic=!1,o.isCurrentUserProfile=!1,o.numberOfActivities=e,o.showMore=!1,o.steamId=r.getSteamId(),o.steamId||(o.doesSteamIdExist=!1)},o.getDateString=function(e){return c[e.getMonth()]+" "+e.getDate()+", "+e.getFullYear()}}]),angular.module("gmgApp").controller("UserReviewsController",["$scope","$window","ApiService","IS_PROFILE_PUBLIC","IS_CURRENT_USERS_PROFILE",function(i,e,t,n,r){i.init=function(e,t,n){i.isProfilePublic=!1,i.isCurrentUserProfile=!1,i.reviews=e,i.bookmarkReview=t,o=n},i.checkSizes=function(){i.reviews.map(function(e){var t=i.reviews.indexOf(e),t=$(".review-text").eq(t),n=parseFloat(t.css("line-height")),r=parseFloat(t.css("height"));e.big=t[0].scrollHeight>t[0].clientHeight||4<r/n})};var o,a=i.$on(n,function(e,t){i.isProfilePublic=t}),s=i.$on(r,function(e,t){i.isCurrentUserProfile=t});i.loadMoreReviews=function(){return t.reviewsByUsername(o,i.bookmarkReview).get(function(e){Array.prototype.push.apply(i.reviews,e.Reviews),i.bookmarkReview=e.Bookmark}).$promise},angular.element(e).bind("resize",function(){0<i.reviews.length&&i.checkSizes()}),i.$on("$destroy",function(){a(),s()})}]),angular.module("gmgApp").controller("WantsController",["$scope","$window","ApiService","Product","User","IS_CURRENT_USERS_PROFILE","ObjectValidator","$q","tealiumLoggingService",function(i,e,o,a,t,n,s,l,r){i.showLoadMore=!1,i.wantlist=[],i.wishlistDealGames=[],i.wantCount=0,i.bookmark="",i.hidden=!0,i.loading=!0;var c=[],u=(i.blockId=0,i.blockTypeName="",i.loadMore=function(){return o.wantlist(i.username,100,i.bookmark).success(function(e){e&&(i.hidden=!1,Array.prototype.push.apply(i.wantlist,e.Games.map(a.initForWantlist)),i.bookmark=e.Bookmark,i.showLoadMore=e.More,i.wantCount=e.Count)})},i.getCurrentUserLatestList=function(){var t=document.getElementsByClassName("refreshing-games");return angular.element(t).addClass("loading"),o.wantlist(i.username,100,"").success(function(e){e&&(i.hidden=!1,angular.element(t).removeClass("loading"),i.wantlist=e.Games.map(a.initForWantlist),i.bookmark=e.Bookmark,i.showLoadMore=e.More,i.wantCount=e.Count)})},i.unwant=function(e){o.unwant({GameVariantCode:e});for(var t=0;t<i.wantlist.length;t++)i.wantlist[t].sku===e&&(i.wantlist.splice(t,1),t--,i.wantCount--)},i.$on(n,function(e,t){(i.isCurrentUserProfile=t)&&i.getCurrentUserLatestList()}));i.$on("$destroy",function(){u()}),i.username=e.profileUsername,t.getWhenReady().then(function(){var r;i.user=t.get(),!e.isProfilePublic&&i.username!==i.user.username||(i.hidden=!1),c&&0<c.length?(r=c,l(function(e,t){i.user.isAuthenticated&&s.isNullOrUndefined(r);var n=document.getElementsByClassName("refreshing-games");angular.element(n).addClass("loading"),i.loading=!0,o.getWishlistDealBlockGames(100,r.join()).then(function(e){void 0!==e&&void 0!==e.data&&angular.forEach(e.data.Games,function(e,t){e=a.initForWantlist(e);e.blockId=i.blockId,e.blockTypeName=i.blockTypeName,i.wishlistDealGames.push(e)})}).finally(function(){angular.element(n).removeClass("loading"),e({success:!0})})}).then(function(){i.loading=!1})):i.loading=!1}),i.init=function(e,t,n){n&&(Array.prototype.push.apply(i.wantlist,n.Games.map(a.initForWantlist)),i.bookmark=n.Bookmark,i.showLoadMore=n.More,i.wantCount=n.Count),i.blockId=e,i.blockTypeName=t},i.selectItemGaEvent=function(e,t){r.logSelectItemClicked(e,t,i.blockId,i.blockTypeName)},i.discountInit=function(e,t,n){c=e,i.blockId=t,i.blockTypeName=n}}]),angular.module("gmgApp").controller("WhirligigBackgroundController",["$scope",function(n){n.edgePanelColor="#000",n.init=function(){n.backgroundElement=$(".whirligig-background-fullwidth")[0],n.infoBarExtensionElement=$(".info-bar-extension")[0],$(n.backgroundElement).css("background-color",n.edgePanelColor)},n.$on("slideChange",function(e,t){e.stopPropagation(),n.onSlideChange(t.color,!t.hasProductInfoBar)}),n.onSlideChange=function(e,t){e=e||"#000",$(n.backgroundElement).css("background-color",e);e=t?"0":"1";$(n.infoBarExtensionElement).css("opacity",e)}}]),angular.module("gmgApp").controller("WhirligigCountdownController",["$scope","User","GlobalMessageBarService","$window","Product","ApiService","LanguageService",function(a,e,t,n,r,s,i){a.startDate="",a.endDate="",a.showTime=!1,a.countdownReady=!1,a.onStart=function(){a.showTime=!0,a.hideObscuringElements()},a.onFinish=function(){a.showTime=!1,a.showObscuringElements()},a.init=function(e,t,n,r,i){a.blockId=i,a.countdownReady=!1;var i="D/M/YYYY hh:mm:ss a",o="YYYY-MM-DDTHH:mm:ss";(a.usingPriceSheet=n)?s.getCurrentCampaign(r).success(function(e){!e.CampaignInfo.EndDate||(a.currentCampaign=e.CampaignInfo,a.currentCampaign.IsBaseCampaign)||(a.startDate=new moment(e.CampaignInfo.StartDate,o),a.endDate=new moment(e.CampaignInfo.EndDate,o),a.lazyVoucher=null,a.hideDays=!0,a.countdownReady=!0,24<=moment.duration(a.endDate.diff(moment())).asHours())||moment().isBefore(a.startDate)?a.showObscuringElements():a.hideObscuringElements()}).error(function(){a.currentCampaign=null}):(a.currentCampaign=null,a.startDate=new moment(e,i),a.endDate=new moment(t,i),a.lazyVoucher=null,a.hideDays=!1,a.countdownReady=!0,24<=moment.duration(a.endDate.diff(moment())).asHours()||moment().isBefore(a.startDate)?a.showObscuringElements():a.hideObscuringElements())},a.$on("hideObscuringElements",function(e,t){e.stopPropagation(),a.hideObscuringElements()}),a.$on("showObscuringElements",function(e,t){e.stopPropagation(),a.showObscuringElements()}),a.hideObscuringElements=function(){angular.element(".countdown-hide-"+a.blockId).hide()},a.showObscuringElements=function(){angular.element(".countdown-hide-"+a.blockId).show()}}]),angular.module("gmgApp").controller("XPProgressionBlockController",["$scope","ApiService","IS_CURRENT_USERS_PROFILE","User",function(o,e,t,n){o.error=!1,o.loading=!0,o.hideNewUserSection=!0,o.hideLoyaltyDatesSection=!0,o.userName="",n.getWhenReady().then(function(e){e.isAuthenticated&&(o.userName=e.username)});var r=!(o.init=function(e,t,n,r,i){o.levelMap=[{enumText:"Normal",displayText:e,cssClass:"none",orderCSS:""},{enumText:"Bronze",displayText:t,cssClass:"bronze",orderCSS:"first"},{enumText:"Silver",displayText:n,cssClass:"silver",orderCSS:"second"},{enumText:"Gold",displayText:r,cssClass:"gold",orderCSS:"third"}],i&&a()}),i=o.$on(t,function(e,t){o.isCurrentUserProfile=t,0==r&&t&&(r=!0,a())});function a(){e.getUserXP().success(function(e){var t;o.currentLevel=o.levelMap[e.CurrentLevel],o.nextLevel=o.levelMap[e.NextLevel],o.xpToNextLevel=e.NextLevelProgressXP,o.lastEvaluated=e.LastEvaluated,o.expiryDays=e.ExpiryDays,o.progressBar=(t=(t=33*e.CurrentLevel)+e.NextLevelProgressPercent/3,Math.min(2+t,100)+"%"),o.totalXp=e.TotalXp}).finally(function(){o.loading=!1,o.hideNewUserSection=o.error||o.lastEvaluated&&0<o.totalXp,o.hideLoyaltyDatesSection=o.error||!o.lastEvaluated||0==o.totalXp}).catch(function(){o.error=!0})}o.$on("$destroy",function(){i()})}]),angular.module("gmgApp").controller("ZtormAccountLinkModalBlockController",["$rootScope","$scope","$sce","ApiService","ZTORM_CONSTANTS","MODALS","modalService",function(t,n,r,i,e,o,a){var s=e.ACCOUNT_LINK,l=angular.element(s.MODAL_ID),c=angular.element(s.IFRAME_ID);function u(){c[0].src=c[0].src}c.on("load",function(){n.loading=!1,n.$apply()}),n.iframeData=null,n.loading=!0,n.accountLinkingFailed=!1,n.prepurchaseCode=null,n.$on(s.MODAL_OPEN,function(e,t){n.loading=!0,n.accountLinkingFailed=!1,n.prepurchaseCode=t,l.modal({backdrop:"static",keyboard:!1}),i.getOriginIframeDetails(t).then(function(e){var t=!!n.iframeData;n.iframeData=e.data,n.iframeData.Url=r.trustAsResourceUrl(n.iframeData.Url),t&&u()})}),n.close=function(){return i.getOriginAccountDetails(n.prepurchaseCode).then(function(e){e.data?a.hidePromise(l).then(function(){t.$broadcast(s.MODAL_CLOSED,s.RESULT_SUCCESS,e.data)}):n.accountLinkingFailed=!0})},n.cancel=function(){a.hidePromise(l).then(function(){t.$broadcast(s.MODAL_CLOSED,s.RESULT_USER_CANCELLED)})},n.retry=function(){n.loading=!0,n.accountLinkingFailed=!1,u()}}]),angular.module("gmgApp").directive("activityLine",function(){return{restrict:"E",scope:{time:"=",imageUrl:"=",text:"=",belowText:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/activity_line.4168106de.html"}}),angular.module("gmgApp").directive("addGlobalVariables",["CONTENT_LOCATION","globalVariablesService",function(t,n){return{restrict:"A",scope:{cdn:"@?"},link:function(e){e.cdn||(e.cdn=t.cdn),n.setCdnUrl(e.cdn),n.setDefaultProdImg(e.cdn+"/static/img/default/gameslist.jpg"),n.setDefaultVerticalProdImg(e.cdn+"/static/img/default/vertical.jpg"),n.setDefaultLargeProdImg(e.cdn+"/static/img/default/large.jpg"),n.setDefaultMainProdImg(e.cdn+"/static/img/default/main.jpg")}}}]),angular.module("gmgApp").directive("addToBasket",["$rootScope","ApiService","Basket","GlobalMessageBarService","User","UserAgent","$window","CANCELING_PENDING_ORDER_SUCCESS","CANCELING_PENDING_ORDER_FAIL","ObjectValidator","MODALS",function(t,c,u,e,d,n,p,r,i,h,o){function f(e){400===e.status?(g.isError=!0,g.message=null,angular.isArray(e.data)?(g.errors=e.data,g.hideClose=!0):g.message=e.data,angular.isObject(g.message)&&!0===g.message.IsUserTooYoung?(g.visible=!1,t.$broadcast(o.EVENTS.OPEN_TOO_YOUNG,o.TOO_YOUNG_MODAL_TYPE.BASKET),$("#underage-user-modal").modal("show"),angular.element("#blur-background").addClass("blur-background")):g.visible=!0):g.visible=!1}var m,g=e.globalMessage;t.$on(r,function(){g.visible=!1}),t.$on(i,function(e,t){f(t)}),d.getWhenReady().then(function(e){m=n.isMobile()});return{restrict:"A",scope:{productId:"=",freeToPlayLink:"=",scrollToHeader:"=",isSearchPage:"=",callback:"&"},link:function(i,o){function t(){var e=u.get();e.addingToBasket=!1,m?!0==!g.visible?p.location.href=e.basketUrl:(l(),a()):l()}function e(){var e;r=o.html(),s(),o.html(""),o.append(n),i.spinnerIsActivated=!0,o.addClass("spinning"),o.attr("disabled",!0),e=u.get(),m||(e.open=!0),e.addingToBasket=!0,d.getWhenReady().then(function(e){e.isAuthenticated&&c.logoutIfCognitoEnabledAndUserNotMigrated().then(function(e){!0===e.data&&(UserCookie.delete(),p.location.href="/sign-in")})}),m||a(),c.addProduct(i.productId).then(function(e){var t,n,r=u.get(),e=(r.applyApiBasketData(e.data.Basket),!h.isNullOrUndefined(i.isSearchPage)&&i.isSearchPage&&(e=o.attr("hit-id"),n=o.attr("track-id"),t=o.attr("query"),h.isNullOrEmptyString(e)||h.isNullOrEmptyString(t)||h.isNullOrEmptyString(n)||c.trackSearchHit({hitId:e,trackId:n,query:t})),r.productIdToItem[i.productId]);n={sku:e.product.sku,price:(e.product.price/e.quantity).toFixed(2),currency:r.currency},"undefined"!=typeof utag&&utag.link({tealium_event:"cart_add",product_id:n.sku,product_price:n.price,product_quantity:1,currency:n.currency}),g.visible=!1,i.callback&&i.callback()},f).finally(t)}var n=angular.element('<span class="glyphicon glyphicon-refresh"></span>'),r=o.html(),a=function(){var e="scrollBehavior"in document.documentElement.style;$("#GMG_header").hasClass("sticky-header")||(e?window.scrollTo({behavior:"smooth",top:0}):$("html, body").animate({scrollTop:0},600))},s=function(){o.css("min-width",o.outerWidth())},l=function(){o.find("span.glyphicon-refresh").remove(),o.append(r),i.spinnerIsActivated=!1,o.removeClass("spinning"),o.removeAttr("disabled"),o.prop("style").removeProperty("min-width")};o.click(function(){i.freeToPlayLink?p.open(i.freeToPlayLink):e()})}}}]),angular.module("gmgApp").directive("adyenComponentTagsLoader",["$rootScope","PAYMENT_METHOD_EVENTS","adyenCheckoutService","$timeout",function(s,l,c,u){function d(e,t){e.readyState?e.onreadystatechange=function(){"loaded"!==e.readyState&&"complete"!==e.readyState||(e.onreadystatechange=null,t())}:e.onload=function(){t()}}var p=null;return{restrict:"EA",scope:{environment:"<",isAdyenAvailable:"="},link:function(e){var t,n,r,i,o,a;e.isAdyenAvailable&&e.environment&&((p=e).scriptLoaded=!1,p.cssLoaded=!1,o=(e="https://checkoutshopper-"+e.environment+".adyen.com/checkoutshopper/sdk/5.13.1/")+"adyen.js",n="sha384-M3DQX1ovYxJTUt7n1uN1IyRvhCtILxV+AwB5hHntGwmiYW2uRr4lmJnj0ToaqyFy",r="anonymous",t=function(){u(function(){p.scriptLoaded=!0},10)},i=document.createElement("script"),document.body.append(i),d(i,t),i.integrity=n,i.crossOrigin=r,i.src=o,t="stylesheet",n=e+"adyen.css",r="sha384-r7Ye68dqFoSnkRA9wgyLKiVNga2c+G98mIVq4FT+Rmi6ba0EH2/YI3ZGYvpZ3zIM",i="anonymous",o=function(){u(function(){p.cssLoaded=!0},10)},e=document.createElement("link"),document.body.append(e),e.rel=t,d(e,o),e.integrity=r,e.crossOrigin=i,e.href=n,a=p.$watchGroup(["scriptLoaded","cssLoaded"],function(e,t){e!==t&&!0===e[0]&&!0===e[1]&&(c.setCanLoadAdyenComponent(),s.$broadcast(l.ADYEN_SCRIPT_AND_CSS_LOADED),a())}))}}}]),angular.module("gmgApp").directive("animationOnDiscount",["$timeout","$window","$rootScope","User","GlobalMessageBarService","MODALS",function(_,E,o,a,e,s){var C=60,w=15,T=["blue","green","yellow","red","pink"],A=["square","circle","rectangle"];function P(e){return e[Math.floor(Math.random()*e.length)]}function O(e,t){return Math.floor(Math.random()*(t-e))+e}function I(e,t){return Math.random()*(t-e)+e}function R(){return Math.floor(360*Math.random())+1}return{link:function(r,e,i){_(function(){var t=r.claimOfferElementId?angular.element("#"+r.claimOfferElementId):angular.element(".claim-offer"),n=r.spinnerElementId?angular.element("#"+r.spinnerElementId):angular.element(".spinner"),e=r.appliedSectionElementId?angular.element("#"+r.appliedSectionElementId):angular.element(".applied-section");r.resetDiscountAnimation=function(){t.show(),n.hide(),e.hide()},r.$parent.resetDiscountAnimation=r.resetDiscountAnimation,r.finishDiscountAnimation=function(){var S;t.hide(),n.hide(),e.show(),S=r,_(function(){for(var e=S.discountConfettiContainerClass?angular.element("."+S.discountConfettiContainerClass+":visible"):angular.element(".confetti-container-discount:visible"),t=0;t<e.length;t++){var n=e[t].getBoundingClientRect();if(0<n.bottom&&n.top<E.innerHeight){for(var r=n.left,i=n.top+window.scrollY,o=n.right-n.left,n=n.bottom-n.top,a=r+o/2,s=i+n/2,l=i+n+w,c=i-w,u=r+o+w,d=r-w,p=document.createDocumentFragment(),h=0;h<C;h++){var f=document.createElement("div"),m=P(T),g=P(A),v=O(8,4),y=O(d,u),b=O(c,l);f.className+="confetti "+m+" "+g,f.style.top=s+"px",f.style.left=a+"px",f.style.height=v+"px",f.style.width=v+"px",f.style.transform="rotate("+R()+"deg)",p.appendChild(f),_(function(e,t,n){e.style.transition="all "+I(1.5,.5)+"s ease",e.style.top=n+"px",e.style.left=t+"px",e.style.transform="rotate("+R()+"deg)",e.addEventListener("transitionend",function(){this.style.transition="all "+I(1.25,1)+" ease",this.style.opacity=0,this.style.transform="rotate("+R()+"deg)",this.style.top=parseInt(this.style.top)+10+"px",_(function(e){e.remove()},1e3,!0,e)})},1,!0,f,y,b)}document.body.appendChild(p)}}})},r.$parent.finishDiscountAnimation=r.finishDiscountAnimation,r.showDiscountAnimation=function(){i.hasOwnProperty("requireAuthentication")?a.getWhenReady().then(function(e){e&&e.username?(t.hide(),n.show(),r.onDiscountAction().then(function(){r.finishDiscountAnimation()})):o.$broadcast(s.EVENTS.OPEN_SIGN_IN_MODAL)}):(t.hide(),n.show(),r.onDiscountAction().then(function(){r.finishDiscountAnimation()}))}})}}}]),angular.module("gmgApp").directive("avatarModeSwitch",["profileBioAvatarService","User","ObjectValidator","AVATAR_UPLOADER_BUSY_STATUS_CHANGED","BIO_SECTION_UPLOADER_BUSY_STATUS_CHANGED","AVATAR_UPLOAD_RESPONSIBILITY_OWNER_CHANGED",function(l,u,d,p,c,h){function f(e,t,n){"avatar"!==t.className&&(t.removeClass("avatar-edit"),t.addClass("avatar"))}function m(e,t,n,r){var i,o,a,s,l,c;v(n),f(0,t),i=n,a=(o=r).$on(p,function(e,t){(o.isAvatarUploaderBusy=t)?v(i):(y(i,o),angular.element(i).trigger("mouseout"))}),o.$on("$destroy",function(){a()}),s=n,l=e,c=r,angular.element(s).on("click",function(e){g(e),c.isAvatarUploaderBusy||angular.element(l).trigger("click")}),angular.element(s).on("mouseout",function(){!c.isAvatarUploaderBusy&&c.isMouseEffectOn&&angular.element(s).hide()}),angular.element(s).on("mouseover",function(e){g(e),angular.element(s).show()}),angular.element(s).on("blur",function(e){g(e),!c.isAvatarUploaderBusy&&c.isMouseEffectOn&&(angular.element(s).hide(),angular.element(s).prop("disabled",!1))}),u.getWhenReady().then(function(){var e=u.get();d.isNullOrEmptyString(e.username)&&angular.element(n).hide()})}var g=function(e){e&&(e.preventDefault(),e.stopPropagation())},v=function(e){angular.element(e).show();var t=angular.element(e).find(".background-icon"),t=(angular.element(t).hide(),angular.element(e).prop("disabled",!0),angular.element(e).find(".glyphicon"));angular.element(t).show(),angular.element(e).addClass("spinning")},y=function(e,t){angular.element(e).prop("disabled",!1);var n=angular.element(e).find(".glyphicon"),n=(angular.element(n).hide(),angular.element(e).removeClass("spinning"),angular.element(e).find(".background-icon"));angular.element(n).show(),t.isMouseEffectOn&&angular.element(e).hide()};return{restrict:"A",scope:{isMouseEffectOn:"=isMouseEffectOn",isCurrentUserProfile:"=isCurrentUserProfile",isCurrentUserForumModerator:"=isCurrentUserForumModerator"},link:function(n,e){var t,r,i=e.find("img#avatarImage"),o=e.find("button"),e=e.find("#fileExplorer"),a=n.$on(c,function(e,t){n.isBioSectionUploaderBusy=t}),s=n.$on(h,function(e,t){n.isDataLoadingParentsJob=t,n.isCurrentUserProfile||n.isCurrentUserForumModerator?angular.element(o).show():angular.element(o).hide()});n.$on("$destroy",function(){s(),a()}),n.isDataLoadingParentsJob=l.isAvatarLoadParentsJob(),n.isBioSectionUploaderBusy=l.getBioSectionUploadState(),n.isAvatarUploaderBusy=l.getAvatarUploadState(),m(e,i,o,n),r=n,(t=i).on("mouseover",function(e){g(e),r.isCurrentUserProfile&&r.isMouseEffectOn&&"avatar-edit"!==(e=t).className&&(e.removeClass("avatar"),e.addClass("avatar-edit"))}),t.on("mouseout",function(e){g(e),r.isCurrentUserProfile&&r.isMouseEffectOn&&f(0,t)})}}}]),angular.module("gmgApp").directive("avoidDropdownMenuClose",function(){return{link:function(e,t){t.on("click","ul.dropdown-menu a",function(e){e.stopPropagation()})}}}),angular.module("gmgApp").directive("bannerCarousel",["$compile",function(i){return{restrict:"A",link:function(n,t){var r=null;function e(){var e=t.find(".owl-item.active");t.find(".owl-item").removeClass("first").removeClass("last"),e.first().addClass("first"),e.last().addClass("last")}t.on("initialized.owl.carousel",function(){r=t.find(".owl-stage"),t.removeClass("owl-static").addClass("owl-carousel"),t.find(".owl-item").each(function(e,t){i(t)(n)}),e()}),t.on("resized.owl.carousel",e),t.on("translated.owl.carousel",e),t.find(".fake-item").remove(),t.owlCarousel({stagePadding:60,loop:!0,mouseDrag:!1,dots:!1,lazyLoad:!0,lazyLoadEager:1,margin:10,navText:['<i class="glyphicon glyphicon-menu-left"></i>','<i class="glyphicon glyphicon-menu-right"></i>'],responsive:{0:{items:1,nav:!1},600:{items:2},768:{items:3,stagePadding:80},1200:{items:4,slideBy:4,stagePadding:80,nav:!0},1500:{items:5,slideBy:5,stagePadding:80,nav:!0}}}),t.find(".owl-item").on("mouseenter",function(){var e=angular.element(this);r.addClass("item-hovered"),t.find(".owl-item").removeClass("selected"),e.addClass("selected"),r.toggleClass("last-selected",e.hasClass("last")),r.toggleClass("first-selected",e.hasClass("first"))}).on("mouseleave",function(){r.removeClass("item-hovered")}),t.on("mouseleave",".owl-item",function(){r.removeClass("item-hovered")}),n.$on("banner:toggle",function(){t.find(".owl-item").toggleClass("display-container-open"),t.find(".owl-stage-outer").toggleClass("display-container-open")})},terminal:!0,priority:100}}]).directive("bannerToggle",function(){return{restrict:"A",require:"?^^bannerCarousel",link:function(e,t){t.on("click",function(){e.$broadcast("banner:toggle")})}}}).directive("bannerCollapsible",function(){return{restrict:"A",require:"?^^bannerCarousel",link:function(e,t){e.$on("banner:toggle",function(){t.collapse("toggle")})}}}),angular.module("gmgApp").directive("bannerCarouselOverwolf",["$compile",function(o){return{restrict:"A",link:function(n,t){var r=null;function i(){var e=t.find(".owl-item.active");t.find(".owl-item").removeClass("first").removeClass("last"),e.first().addClass("first"),e.last().addClass("last")}t.on("initialized.owl.carousel",function(){var e;r=t.find(".owl-stage"),t.removeClass("owl-static").addClass("owl-carousel"),t.find(".owl-item").each(function(e,t){o(t)(n)}),i(),e=angular.element(".owl-item.first"),r.addClass("item-hovered-overwolf"),e.addClass("selected"),r.toggleClass("last-selected",e.hasClass("last")),r.toggleClass("first-selected",e.hasClass("first")),e.on("mouseleave",function(){r.removeClass("item-hovered-overwolf")}),t.find(".owl-item").addClass("display-container-open"),t.find(".owl-stage-outer").addClass("display-container-open"),n.$broadcast("banner:show")}),t.on("resized.owl.carousel",i),t.on("translated.owl.carousel",i),t.find(".fake-item").remove(),t.owlCarousel({checkVisible:!1,stagePadding:60,loop:!0,mouseDrag:!0,dots:!1,lazyLoad:!0,lazyLoadEager:8,margin:10,navText:['<i class="glyphicon glyphicon-menu-left"></i>','<i class="glyphicon glyphicon-menu-right"></i>'],responsive:{0:{items:1,nav:!0},600:{items:3,slideBy:3,nav:!0},768:{items:3,slideBy:3,stagePadding:80,nav:!0},1200:{items:4,slideBy:4,stagePadding:80,nav:!0},1500:{items:5,slideBy:5,stagePadding:80,nav:!0}}}),t.find(".owl-item").on("mouseenter",function(){var e=angular.element(this);r.addClass("item-hovered-overwolf"),t.find(".owl-item").removeClass("selected"),e.addClass("selected"),r.toggleClass("last-selected",e.hasClass("last")),r.toggleClass("first-selected",e.hasClass("first"))}).on("mouseleave",function(){r.removeClass("item-hovered-overwolf")}),n.$on("banner:toggle",function(){t.find(".owl-item").toggleClass("display-container-open"),t.find(".owl-stage-outer").toggleClass("display-container-open")})},terminal:!0,priority:100}}]).directive("bannerToggleOverwolf",function(){return{restrict:"A",require:"?^^bannerCarouselOverwolf",link:function(e,t){t.on("click",function(){e.$broadcast("banner:toggle")})}}}).directive("bannerCollapsibleOverwolf",function(){return{restrict:"A",require:"?^^bannerCarouselOverwolf",link:function(e,t){e.$on("banner:toggle",function(){t.collapse("toggle")}),e.$on("banner:show",function(){t.collapse("show")})}}}),angular.module("gmgApp").directive("bindCompileHtml",["$compile",function(i){return function(t,n,r){t.$watch(function(e){return e.$eval(r.bindCompileHtml)},function(e){n.html(e),i(n.contents())(t)})}}]),angular.module("gmgApp").directive("blizzardRedemption",function(){return{controller:"BlizzardController",restrict:"E",scope:{userAccountNameLabelText:"=",redeemOnButtonText:"=",redeemedOnLabelText:"=",connectionError:"=?",displayName:"=?",redeemed:"=?",battleTag:"=",isYourOrderMode:"=?",isYourPurchaseMode:"=?",isYourOrderMobileMode:"=?",isGameGiftRedemptionMode:"=?",isPurchaseHistoryMode:"=?",isPrizeWheelMode:"=?",sku:"=?",gameName:"=?",gameImage:"=?",boxId:"=",keyName:"=",gameHasMultipleKeys:"=?",returnUrl:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/blizzard-redemption.97ab51ced.html"}}),angular.module("gmgApp").directive("boaCompraPaymentForm",function(){return{controller:"BoaCompraPaymentFormController",restrict:"E",templateUrl:"//images.greenmangaming.com/static/templates/directives/boa-compra-payment-form.20abd52e8.html",scope:{paymentTimeout:"="}}}),angular.module("gmgApp").directive("cancelOrder",["ApiService","GlobalMessageBarService","EVENTS","$rootScope",function(n,r,i,o){return{restrict:"A",link:function(e,t){t.on("click",function(){n.cancelOrder().then(function(){r.globalMessage.isError=!1,r.globalMessage.message="",r.globalMessage.visible=!1,o.$broadcast(i.RELOAD_BASKET)})})}}}]),angular.module("gmgApp").directive("cardToolTip",[function(){return{restrict:"E",scope:{isCardExpired:"=",cardId:"@",cardExpiredInstruction:"@",cardCvcInstruction:"@"},templateUrl:"//images.greenmangaming.com/static/templates/directives/card_tool_tip.11e89e082.html"}}]),angular.module("gmgApp").directive("cartSummary",["$window","ScreenSize","$timeout",function(n,o,a){return{restrict:"A",link:function(e,i){function t(){var e=i.find(".cart-section > div"),t=i.find(".order-summary-header > .row > .col-xs-10"),n=i.find(".order-summary-header"),r=$("footer");n.unbind("click"),o.lessThan("lg")?(t.removeClass("text-center"),n.addClass("cursor"),e.addClass("navbar-fixed-bottom").addClass("nopadding"),r.css("display","none"),n.click(function(){i.find(".reveal").slideToggle("slow"),i.find("span.glyphicon").toggleClass("glyphicon-menu-down").toggleClass("glyphicon-menu-right")}),a(function(){var e=$(".navbar-fixed-bottom").height()+20;$(".container.main").css("padding-bottom",e+"px")})):(t.addClass("text-center"),n.removeClass("cursor"),e.removeClass("navbar-fixed-bottom").removeClass("nopadding"),r.css("display","block"),$(".container.main").css("padding-bottom","0px"))}$(n).on("resize",t),t()}}}]),angular.forEach(["src","srcset","href"],function(o){var n="cdn"+o[0].toUpperCase()+o.slice(1);angular.module("gmgApp").directive(n,["globalVariablesService",function(i){return{priority:99,link:function(e,t,r){r.$observe(n,function(e){var t,n;e?((t=i.getCdnUrl())&&"/"===e[0]&&(e=e.slice(1)),t&&((n=document.createElement("a")).href=t,n.href=n.href+e,e=n.href),r.$set(o,e)):"href"===o&&r.$set(o,null)})}}}])}),angular.module("gmgApp").directive("changeStatusWanting",["ApiService","GlobalMessageBarService","User","$window",function(u,e,r,d){return{restrict:"A",scope:{productCode:"=",isWant:"=",isIcon:"=",onPdp:"=",accountLink:"="},link:function(a,s){function t(){if(l.isAuthenticated){var e=s.parent(),t=d.document.getElementsByName("valueSku"),n={GameVariantCode:a.productCode},r=(a.onPdp&&(e=angular.element(d.document.getElementsByClassName("pdp-tabs")[0]),n.GameVariantCode=t[0].value),u.want(n),e.find(".want-it").hide(),e.find(".wanted").show(),e.find(".number-want"));if(0<r.length)for(var i=0;r.length&&null!==r.get(i);i++){var o=r.get(i).innerHTML;-1===o.indexOf("k")&&(o=Number(o),r.get(i).innerHTML=999===o?"1k":Number(r.get(i).innerHTML)+1)}}else c.message="Please log in to add games to your want list",c.isError=!1,c.visible=!0,d.scrollTo(0,0)}function n(){c.message='You already have this game in your want list. Head over to your <a href="'+a.accountLink+'">account</a> to manage your want list!',c.isError=!1,c.visible=!0,d.scrollTo(0,0)}var l=r.get(),c=e.globalMessage;s.click(function(){var e;a.isIcon?!0!==(e=s.parent()).find(".want-it").is(":visible")&&!0!==e.find(".wanted").is(":visible")||(!0===e.find(".want-it").is(":visible")?t:n)():(a.isWant?t:n)()})}}}]),angular.module("gmgApp").directive("characterCounterWithMaxLimiter",["ObjectValidator",function(i){return{restrict:"A",require:"ngModel",scope:{charactersCount:"=charactersCount",charactersLeftCount:"=charactersLeftCount",maxLength:"=maxLength"},link:function(t,e,n,r){t.textarea=e[0],r.$parsers.push(function(e){return!i.isNullOrUndefined(e)&&e.length>t.maxLength&&(e=e.substr(0,t.maxLength),r.$setViewValue(e),r.$render()),e}),r.$viewChangeListeners.push(function(){t.charactersCount=r.$viewValue.length,t.charactersLeftCount=t.maxLength-t.charactersCount}),r.$formatters.push(function(e){return i.isNullOrUndefined(e)?"":(e.length>t.maxLength&&(e=e.substr(0,t.maxLength)),r.$setViewValue(e),r.$render(),t.charactersCount=t.textarea.value.length,t.charactersLeftCount=t.maxLength-t.charactersCount,e)})}}}]),angular.module("gmgApp").directive("checkoutHeader",["$window","$timeout","ScreenSize",function(s,e,l){return{restrict:"A",link:function(o,a){e(function(){function e(){l.lessThan("lg")?(0<a.outerHeight()&&(i=a.outerHeight()),r.offset().top<=t.scrollTop()+t.outerHeight()||t.scrollTop()<n.outerHeight()?(a.removeClass("navbar-fixed-top"),n.css("margin-bottom","0")):(a.addClass("navbar-fixed-top"),n.css("margin-bottom",i+"px"))):n.css("margin-bottom","0")}var t=angular.element(s),n=angular.element("header"),r=angular.element(".order-summary"),i=0;t.on("resize",e),t.on("scroll",e),t.on("touchmove",e),r&&o.$watch(function(){if(r.offset())return r.offset().top},function(){e()}),e()})}}}]),angular.module("gmgApp").directive("clickCopy",["clipboardService",function(r){return{restrict:"A",link:function(e,t,n){t.click(function(){r.copy(n.clickCopy,this)})}}}]),angular.module("gmgApp").directive("clickWithSpinner",["$rootScope","ObjectValidator","clickWithSpinnerService","EVENTS","DESTROY_EVENT_NAME",function(d,p,h,f,m){return{restrict:"A",transclude:!0,template:'<span ng-hide="spinnerIsActivated"><ng-transclude></ng-transclude></span>',scope:{clickWithSpinner:"&",spinnerIsActivated:"=?",validateForm:"=",clearSpinnerOnSuccess:"=?",autoStartSpinning:"=",isValidFormRequired:"=",stopSpinningEventName:"@",keepSpinning:"=",groupTag:"@?",hideSpinnerFunctionality:"=?"},link:function(n,t,e){n.$element=t;function r(e){n.spinnerIsActivated=!0,n.hideSpinnerFunctionality||($(".icon-add").hide(),t.append(c),t.addClass("spinning")),e||h.broadCastGroupSpinnerStatus(n.groupTag,n.spinnerIsActivated)}function i(e){n.spinnerIsActivated=!1,n.hideSpinnerFunctionality||(t.find("span.glyphicon-refresh").remove(),t.removeClass("spinning"),$(".icon-add").show()),e||h.broadCastGroupSpinnerStatus(n.groupTag,n.spinnerIsActivated)}function o(){n.hideSpinnerFunctionality||(t.css("min-height",t.outerHeight()),t.css("min-width",t.outerWidth()))}function a(){var e;n.hideSpinnerFunctionality||(e=t.prop("style"))&&(e.removeProperty("min-height"),e.removeProperty("min-width"))}function s(){n.$apply(function(){var e;!0!==n.isValidFormRequired||n.validateForm?n.validateForm&&(n.validateForm.$invalid||n.validateForm.$pristine)?(a(),n.validateForm.$submitted=!0):(r(),(e=n.clickWithSpinner())?e.then(function(){!angular.isUndefined(n.clearSpinnerOnSuccess)&&!0!==n.clearSpinnerOnSuccess||(i(),a())},function(){i(),a()}):(i(),a())):a()})}function l(e){13===e.which&&(e.preventDefault(),e.stopPropagation(),s())}var c=angular.element('<span class="glyphicon glyphicon-refresh"></span>'),u=(p.isNullOrEmptyString(n.stopSpinningEventName)||d.$on(n.stopSpinningEventName,i),n.autoStartSpinning&&(o(),r()),t.click(function(e){e.preventDefault(),e.stopPropagation(),"disabled"!==angular.element(e.currentTarget).attr("disabled")&&(o(),s())}),e.enterWithSpinner&&angular.element("body").on("keypress",e.enterWithSpinner,l),n.keepSpinning||(n.spinnerIsActivated=!1),n.$on(f.CLICK_WITH_SPINNER_GROUP_STATUS,function(e,t){t.groupTag===n.groupTag&&(t.status?(o(),r(!0)):(i(!0),a()))}));n.$on(m,function(){u(),angular.element("body").off("keypress",l)})}}}]),angular.module("gmgApp").directive("closeMiniCartOnClick",["QuickSearchResults","Basket",function(n,r){return{restrict:"A",link:function(e,t){t.click(function(){var e=r.get();e.open&&!e.addingToBasket&&(e.open=!1),$(".search-results").is(":visible")&&(n.display=!1)})}}}]),angular.module("gmgApp").directive("cognitoVerificationCodeModal",["modalService",function(e){return $.extend({restrict:"E",controller:"cognitoVerificationCodeModalController",templateUrl:"//images.greenmangaming.com/static/templates/directives/cognito-verification-code-modal.0d792ca36.html"},e.modalDirectiveBase)}]).controller("cognitoVerificationCodeModalController",["$scope","ApiService","$window","tealiumLoggingService",function(t,e,n,r){t.isLoading=!0,t.confirmationRequired=!1,t.email="",t.phoneNumber="",t.newsletterOptIn=!1;t.onOpenModal=function(){t.isLoading=!0,t.verificationCode="",t.showCodeSentMessage=!1,t.verificationCodeError=null,t.phoneNumber="",t.confirmSignup=!1,t.email="",t.phoneNumber="",t.newsletterOptIn=!1,t.showCodeSentMessage=!0,t.showVerificationModal=!0,t.isLoading=!1,t.confirmSignup=t.model.confirmSignup,t.email=t.model.email,t.newsletterOptIn=t.model.newsletterOptIn},t.verify=function(){return!0===t.confirmSignup?e.confirmCognitoEmailSignup(t.verificationCode,t.email).then(function(){r.logCognitoRegisterAttempt("success",t.newsletterOptIn,"email"),t.model.close(),n.location.href="/"}).catch(function(e){t.verificationCodeError=e.data}):e.verifyCognitoEmail(t.verificationCode).then(function(e){t.model.close(),n.location.href=e.data}).catch(function(e){t.verificationCodeError=e.data})},t.resendConfirmationCode=function(){return!(t.showCodeSentMessage=!1)===t.confirmSignup?e.resendConfirmationCode(t.email).then(function(){t.showCodeSentMessage=!0}).catch(function(e){t.showCodeSentMessage=!0,t.verificationCodeError=e.data}):e.resendVerificationCode(t.email).then(function(){t.showCodeSentMessage=!0}).catch(function(e){t.showCodeSentMessage=!0,t.verificationCodeError=e.data})}}]),angular.module("gmgApp").directive("communityUrlReplace",["$rootScope","$location","$window",function(e,r,i){return{restrict:"A",controller:function(){e.$on("$locationChangeStart",function(e,t){var n=r.absUrl();decodeURIComponent(n)===t&&(t=n.split("#")[1])&&i.history.replaceState(null,null,"#"+t)})}}}]),angular.module("gmgApp").directive("confetti",[function(){return{restrict:"AE",link:function(e,t,n){var c=t[0],u=null,d=["#fce18a","#ff726d","#b48def","#f4306d"],p=["slow","medium","fast"],t=(u=document.createElement("div"),c.style.position);function h(){u&&(u.innerHTML="")}"relative"===t&&"absolute"===t||(c.style.position="relative"),u.classList.add("confetti-container"),c.appendChild(u),n.$observe("confetti",function(e){if("true"===e){for(var t=0,n=document.createDocumentFragment(),r=0;r<150;++r){var i=document.createElement("div"),o=Math.floor(3*Math.random())+7+"px",a=d[Math.floor(Math.random()*d.length)],s=Math.floor(Math.random()*c.offsetWidth)+"px",l=p[Math.floor(Math.random()*p.length)];i.classList.add("confetti"),i.classList.add("confetti--animation-"+l),i.style.left=s,i.style.width=o,i.style.height=o,i.style.backgroundColor=a,i.style.animationDelay=t+"ms",n.appendChild(i),t+=25}u.appendChild(n)}else h()}),e.$on("$destroy",h)}}}]),angular.module("gmgApp").directive("countdown",["$interval","serverTimeService","ObjectValidator",function(p,h,f){return{restrict:"E",scope:{startDate:"=",endDate:"=",hideDays:"=",showTime:"=",daysLabel:"@",hoursLabel:"@",minutesLabel:"@",secondsLabel:"@",lazyVoucher:"@",onStart:"&",countdownLabel:"@",onFinish:"&"},templateUrl:"//images.greenmangaming.com/static/templates/directives/countdown.798f16770.html",link:function(n){function e(){var e,t=h.getServerTime();f.isNullOrUndefined(t)||(e=l(t),t=c(t),e<=0?(n.onFinish(),p.cancel(a),a=null):t<=0||(u(e,t),d(t)))}function r(){t=new moment(n.startDate),i=new moment(n.endDate),o=i.diff(t),s=!1,t.isValid()&&i.isValid()&&(null==a&&(a=p(e,1e3)),e())}n.days=n.hours=n.minutes=n.seconds=n.currentProgress=0;var t,i,o,a,s,l=function(e){return i.diff(e)},c=function(e){return e.diff(t)},u=function(e){e=moment.duration(e);n.days=Math.floor(e.asDays()),n.hours=e.hours(),n.minutes=e.minutes(),n.seconds=e.seconds(),s||(s=!0,n.onStart())},d=function(e){e=Math.round(e/o*100);n.currentProgress=100<e?100:e};n.$watchGroup(["startDate","endDate"],function(e,t){e!==t&&r()}),r()}}}]),angular.module("gmgApp").directive("countdownWhirligig",["whirligigCountdownService",function(t){return{restrict:"E",scope:{startDate:"=",endDate:"=",hideDays:"=",showTime:"=",daysLabel:"@",hoursLabel:"@",minutesLabel:"@",secondsLabel:"@",lazyVoucher:"@",onStart:"&",countdownLabel:"@",onFinish:"&",usingPriceSheet:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/countdown_whirligig_product_slide.a692c1094.html",link:function(e){return t.whirligigCountdownTimer(e)}}}]),angular.module("gmgApp").directive("csrf",["$cookies","XSRF_TOKEN","XSRF_FIELD_NAME",function(n,r,i){return{restrict:"A",link:function(e,t){t.submit(function(){var e=n.get(r);if(!e)throw"XSRFCookieNotSet";t.append('<input type="hidden" id="'+i+'" name="'+i+'" value="'+e+'">')})}}}]),angular.module("gmgApp").directive("customPayButtonLoadingDelayManager",["$timeout","PAYMENT_BUTTON_RESOURCE","GOOGLE_PAY_CONSTANTS","DESTROY_EVENT_NAME","googlePayService",function(r,i,t,o,a){function s(e,t,n){t&&r(function(){e.triggerDelayedResponse=!0,n&&n()},i.CUSTOM_BUTTON_LOAD_DELAY)}return{restrict:"A",scope:{triggerDelayedResponse:"="},link:function(n){var r,e=a.getButtonInitTriggered();e?s(n,e):(r=n.$on(t.EVENTS.INITIALIZATION_TRIGGERED,function(e,t){s(n,t,r)}),n.$on(o,function(){r()}))}}}]),angular.module("gmgApp").directive("debounce",["$timeout",function(r){return{restrict:"A",scope:{ngModel:"=",ngCall:"="},link:function(e){var t,n=!1;e.$watch(function(){return e.ngModel},function(){!1===n?n=!0:(t&&r.cancel(t),t=r(function(){e.ngCall()},800))})}}}]),angular.module("gmgApp").directive("disableAnimations",["$animate",function(n){return function(e,t){n.enabled(t,!1)}}]),angular.module("gmgApp").directive("dynamicGmgPrice",["GmgPriceHandlerFactory",function(r){return{restrict:"A",scope:{type:"@",product:"=",currency:"=",useDynamicValue:"="},link:function(t,n){function e(){var e;t.useDynamicValue&&((e=r.GetHandlerForType(t.type))?e(t,n):console.error("<gmgPrices> 'type' not recognised: "+t.type))}e(),t.$watch(function(){return t.product.price},e),t.$watch(function(){return t.product.oldPrice},e),t.$watch(function(){return t.product.discount},e),t.$watch(function(){return t.currency},e),t.$watch(function(){return t.useDynamicValue},e)}}}]),angular.module("gmgApp").directive("ellipsis",["$window","$interval",function(o,a){function s(){return void 0===window.webkitURL}return{restrict:"A",link:function(n,c){function r(){var e;t=c.text(),$(c).removeClass("css-ellipsis"),e=a(function(){""!==(t=c.text())&&($(c).attr("title",t),i(),a.cancel(e))},100)}var t,i=function(){if(""!==c[0].title){s=c[0],l=window.getComputedStyle(s,null).getPropertyValue("line-height"),l=parseFloat(l),s.style.height=1.2*l*2+"px";var e=c[0],t=c[0].title;if(e.textContent=t,!(e.scrollHeight<=e.clientHeight)){for(var n,r,i="",o=0,a=t.length;o<=a;)r=t.slice(0,(n=o+(a-o>>1))+1).trim()+"",e.textContent=r,e.clientHeight<e.scrollHeight?a=n-1:(o=n+1,i=i.length>r.length?i:r);e.textContent=t.length<=i.length?t:i}}var s,l};$(window).bind("load",function(){s()&&i()}),$(document).ready(function(){var t,e;s()&&(angular.element(o).bind("resize",function(){0!=c[0].offsetHeight&&(i(),n.$digest())}),angular.element(o).on("shown.bs.modal",function(){var e;0==$(c).clientHeight?e=a(function(){t()&&(i(),a.cancel(e))},100):i()}),r(),0===c[0].parentElement.offsetHeight)&&(t=function(){return $(c).is(":visible")&&c[0].parentElement.offsetHeight},e=a(function(){t()&&(i(),a.cancel(e))},100))})}}}]),angular.module("gmgApp").directive("filterList",function(){return{link:function(e,t,n){var r=Array.prototype.slice.call(t[0].children);e.$watch(n.filterList,function(e,t){var n;e!==t&&(n=e,r.forEach(function(e){e.className=-1!==e.textContent.toLowerCase().indexOf(n.toLowerCase())?"ng-show":"ng-hide"}),$("ul.drop-down-area li.ng-show").filter(":gt(5)").removeClass().addClass("ng-hide"))})}}}),angular.module("gmgApp").directive("focusOn",["$parse","$timeout",function(r,i){return{restrict:"A",link:function(e,t,n){n=r(n.focusOn);e.$watch(n,function(e){e&&i(function(){t.focus()},0)})}}}]),angular.module("gmgApp").directive("formtextfield",function(){return{restrict:"E",scope:{labelText:"@labelText",errorText:"@errorText",fieldId:"@fieldId",fieldModel:"@fieldModel"},templateUrl:"//images.greenmangaming.com/static/templates/directives/form_text_field.60a00be6d.html"}}),angular.module("gmgApp").directive("gameAccordionManager",["$timeout","$document",function(e,r){return{restrict:"A",scope:{game:"<",expandCondition:"&",onExpand:"&"},link:function(t,n){n.bind("click",function(){t.onExpand({game:t.game})}),t.expandCondition({game:t.game})&&e(function(){var e=angular.element(n).data("target");angular.element(r).find(e).collapse("show"),t.onExpand({game:t.game})})}}}]),angular.module("gmgApp").controller("GoogleOptimizeSwitchController",["$scope","$cookies",function(t,n){t.googleOptimizeShowingContent=!!t.googleOptimizeOverride,t.$watch(function(){return n.getObject(t.googleOptimizeSwitch)},function(){var e;void 0===t.googleOptimizeOverride&&(e=t.googleOptimizeFlag&&t.googleOptimizeValues.includes(t.googleOptimizeFlag),t.googleOptimizeShowingContent=t.googleOptimizeFlag&&!e||(void 0!==t.googleOptimizeReverse?!n.getObject(t.googleOptimizeSwitch):!!n.getObject(t.googleOptimizeSwitch)))})}]).directive("googleOptimizeSwitch",function(){return{restrict:"A",transclude:!0,template:'<ng-transclude ng-if="googleOptimizeShowingContent"></ng-transclude>',scope:{googleOptimizeSwitch:"@",googleOptimizeFlag:"@",googleOptimizeValues:"@",googleOptimizeShowingContent:"=?",googleOptimizeOverride:"<?",googleOptimizeReverse:"@"},controller:"GoogleOptimizeSwitchController"}}),angular.module("gmgApp").directive("googlePayButtonManager",["PAYMENT_EVENTS","googlePayService","DESTROY_EVENT_NAME","Basket","PAYMENT_METHOD_EVENTS","paymentService",function(s,l,c,u,d,p){return{restrict:"A",scope:{processing:"=",isSelectedMethodGooglePay:"="},link:function(n){function r(t){var e=l.getGooglePayButtons();e&&0!==e.length&&e.forEach(function(e){t?angular.element(e).find("button").attr("disabled","disabled"):angular.element(e).find("button").removeAttr("disabled")})}function t(t){var e=l.getGooglePayButtons();e&&0!==e.length&&e.forEach(function(e){$(e).find("button").attr("hidden",t)})}var e=n.$on(d.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(){n.isSelectedMethodGooglePay&&0===u.get().items.length&&r(!1)}),i=n.$on(s.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,function(e){n.isSelectedMethodGooglePay&&(p.placeOrderInProgressButton(!0),n.processing=!0,r(n.processing),t(n.processing))}),o=n.$on(s.PLACE_ORDER_PROCESS_FAILED,function(){n.processing=!1,r(n.processing),t(n.processing)}),a=n.$on(s.UPDATED_DISABLE_PLACE_ORDER_BUTTON,function(e,t){n.isSelectedMethodGooglePay&&r(t)});n.$on(c,function(){i(),o(),e(),a()})}}}]),angular.module("gmgApp").directive("googleTranslate",["$window","$document","$cookies",function(i,o,a){return{restrict:"A",link:function(e,t,n){var r=n.googleTranslate;i.googleTranslate=function(){new google.translate.TranslateElement({pageLanguage:r,layout:google.translate.TranslateElement.InlineLayout.VERTICAL},"google_translate");function e(){var r=$(".goog-te-combo");if(!r.html())return setTimeout(e,50);$(".goog-te-combo option:not(:first-child)").each(function(){var e=$(this);t.append("<li value='"+e.val()+"'>"+e.text()+"</li>")}),t.find("li").click(function(){var e,t,n;r.val($(this).attr("value")),e=r[0],t="change",o[0].createEventObject?(n=o[0].createEventObject(),e.fireEvent("on"+t,n)):((n=o[0].createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(n)),i()}),i()}function i(){t.find("li span").remove();var e=$(".goog-te-combo").val()||(/(?:\/|%2F).+?(?:\/|%2F)(.+)/.exec(a.get("googtrans"))||[])[1]||r;t.find("li[value="+e+"]").append('<span class="glyphicon glyphicon-ok"></span>')}var t=$(".langs");e(),$(".navbar-top li.dropdown:last-child").on("mouseenter",function(){i()})}}}}]),angular.module("gmgApp").directive("goToAnchor",["$location",function(c){return{restrict:"A",link:function(e,t,n){var r=n.goToAnchor,i=n.time||800,o=void 0!==n.addToUrl,a=n.offset||0,s=n.additionalOffsetId,l=0;""!==r&&t.click(function(e){e.preventDefault(),s&&(l=parseInt(angular.element("#"+s).height())),$("html, body").animate({scrollTop:$("#"+r).offset().top-(a+l)},i,function(){o&&c.hash(r)})})}}}]),angular.module("gmgApp").directive("hiddenKeyPrePurchasedRedemption",function(){return{controller:"HiddenKeyPrePurchasedController",restrict:"E",scope:{userAccountNameLabelText:"=",redeemOnButtonText:"=",redeemedOnLabelText:"=",redemptionCodeParameterName:"=",returnUrl:"=",keyActivationPlatformId:"=",accountOwnerLabelText:"=",notYourAccountText:"=",switchUserText:"=",gameName:"=",defaultErrorMessage:"=",sku:"=?",retryButtonText:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/hidden-key-pre-purchased-redemption.35b28a1da.html"}}),angular.module("gmgApp").directive("hiddenKeyRedemption",function(){return{controller:"HiddenKeyController",restrict:"E",scope:{userAccountNameLabelText:"=",redeemOnButtonText:"=",redeemedOnLabelText:"=",displayName:"=?",isYourOrderMode:"=?",isYourPurchaseMode:"=?",isYourOrderMobileMode:"=?",isGameGiftRedemptionMode:"=?",isPurchaseHistoryMode:"=?",isPrizeWheelMode:"=?",redeemed:"=?",hasHiddenKeys:"=?",username:"=",sku:"=?",gameName:"=?",gameImage:"=?",boxId:"=",keyName:"=",keyRedemptionPlatform:"=",returnUrl:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/hidden-key-redemption.86c75b08c.html"}}),angular.module("gmgApp").directive("input",[function(){function r(){$(e).hide()}function i(){$(e).show()}var e="#cart-section .navbar-fixed-bottom";return{restrict:"E",link:function(e,t,n){n.noHide||"checkbox"!==t[0].type&&t.focus(r).blur(i)}}}]),angular.module("gmgApp").directive("hideUntilPfCounterLoaded",["$timeout",function(o){return{restrict:"A",link:function(e,n){n.css("display","none");function r(t){o(function(){var e;e=!1,i.find(".playfire-wishlist-count").each(function(){$(this).text()&&(e=!0)}),e?n.css("display","block"):0<t&&r(t-1)},1e3)}var i=$(n.find(".playfire-wishlist")[0]);r(20)}}}]),angular.module("gmgApp").directive("initGooglePay",["googlePayService","GOOGLE_PAY_CONSTANTS","ObjectValidator","paymentService","$document","PAYMENT_BUTTON_SECTION","$window","$timeout","PAYMENT_METHOD_EVENTS","paymentMethodConstants","DESTROY_EVENT_NAME","PAYMENT_BUTTON_RESOURCE","paymentMethodsService",function(a,s,n,e,l,t,r,c,i,o,u,d,p){function h(e,t){!a.getButtonInitTriggered()&&e.selectedPaymentMethod&&e.selectedPaymentMethod.category===o.GOOGLE_PAY&&(a.broadcastButtonInitTriggered(!0),c(function(){E(e.selectedPaymentMethod),t&&t()},d.CUSTOM_BUTTON_LOAD_DELAY))}var f=null,m=function(e,t){return{apiVersion:e.apiVersion,apiVersionMinor:e.apiVersionMinor,allowedPaymentMethods:[t]}},g=function(e,t){return{tokenizationSpecification:{type:s.TOKENIZATION_SPECIFICATION_TYPE,parameters:{gateway:s.GATEWAY,gatewayMerchantId:e}},parameters:t.parameters,type:t.type}},v=function(){e.setCurrentPlaceOrderRequestOwner(t.MAIN),e.requestOrderPaymentData()},y=function(){e.setCurrentPlaceOrderRequestOwner(t.HEADER),e.requestOrderPaymentData()},b=function(e){return r.google&&r.google.payments&&r.google.payments.api?new r.google.payments.api.PaymentsClient({environment:e.toUpperCase()}):null},S=function(r,i,o){c(function(){var e,t,n=l[0].getElementById(r);n&&(e=f.createButton({onClick:i,buttonColor:s.BUTTON_COLOR}),(t=l[0].getElementById(o))&&n.removeChild(t),a.addGooglePayButton(e),n.appendChild(e))},5)},_=function(e,t){var n={apiVersion:2,apiVersionMinor:0},e=(a.setBaseRequest(n),e.toUpperCase().replace(/\s+/g,"").split(",").filter(Boolean)),r={type:s.BASE_CARD_PAYMENT_METHOD_TYPE,parameters:{allowedAuthMethods:s.ALLOWED_AUTH_METHODS,allowedCardNetworks:e,billingAddressRequired:!0,billingAddressParameters:{format:"FULL"}}},e=m(n,r);f.isReadyToPay(e).then(function(e){e.result&&(e=g(t,r),a.setCardPaymentMethod(e),S(d.GOOGLE_PAY_BUTTON_HEADER_ID,y,d.GOOGLE_PAY_BUTTON_HEADER_PLACE_HOLDER_ID),S(d.GOOGLE_PAY_BUTTON_ID,v,d.GOOGLE_PAY_BUTTON_MAIN_PLACE_HOLDER_ID),a.setInitializationSuccessfulFlag(!0))}).finally(function(){a.setInitializationCompletedFlag()})},E=function(e){var t;f=b(e.environment),n.isNullOrUndefined(f)?a.setInitializationCompletedFlag():(a.setPaymentsClient(f),t=JSON.parse(e.additionalTransactionInfo),a.setGoogleTransactionInfo(t.googlePayTransactionInfo),a.setGooglePayMerchantName(t.googlePayMerchantName),a.setGooglePayMerchantId(e.merchantId),_(t.allowedCardNetworks,t.merchantAccount))};return{restrict:"EA",scope:!0,link:function(e){var n,t=p.getSelectedPaymentMethodDetails();t&&t.selectedPaymentMethod&&t.selectedPaymentMethod.category===o.GOOGLE_PAY?h(t):(n=e.$on(i.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){h(t,n)}),e.$on(u,function(){n()}))}}}]),angular.module("gmgApp").directive("initModelFromAutoComplete",["$timeout",function(e){return{restrict:"A",scope:{ngModel:"="},link:function(n,r){function i(t){e(function(){var e;!!(!(e=r.val())||n.ngModel||(n.ngModel=e,0))&&0<t&&i(t-1)},500)}i(4)}}}]),angular.module("gmgApp").directive("initPaymentMethods",["$rootScope","$window","$filter","ApiService","PaymentMethod","paymentMethodConstants","DESTROY_EVENT_NAME","PAYMENT_METHOD_EVENTS","BILLING_ADDRESS_EVENTS","validationHandlerService","$q","paymentMethodsService","Basket","User","userProfileService","PAYMENT_EVENTS","Currency","$injector","adyenCheckoutService",function(o,c,a,s,l,u,e,d,p,n,h,f,t,r,m,g,v,y,b){var S,_=null,E=null,C=null,w=function(e,t,n,r,i){var o=null;return(o=e&&0<e.length?a("filter")(e,function(e){e=a("filter")(e.methods,function(e){return e.category===n});return e&&0<e.length})[0]:o)&&o.methods&&0<o.methods.length?o.methods.push(t):(o={header:t.name,uniqueHeaderId:"header"+t.id+i,uniqueBodyId:"body"+t.id+i,images:t.images,category:t.category,methodTypes:t.methodTypes,methods:[t]},e.push(o)),t.category===r&&(o.uniqueHeaderId="header"+t.id+i,o.uniqueBodyId="body"+t.id+i,o.images=t.images,o.category=t.category,o.methodTypes=t.methodTypes),o},T=function(e,t,n,r,i){t=v.displayPrice(t,n,r);return i.replace("{0}",e).replace("{1}",t)},i=function(e){e=a("filter")(e,function(e){return e.category===u.NON_HOSTED});return e&&0<e.length?e[0].name:""},A=function(e,t,n){return t.category===u.RECURRING_CONTRACT&&(n=n||i(e))||t.name},P=function(i,o,a,s){var l=[];return angular.forEach(i,function(e){var t,n=Math.random().toString().replace(".",""),r=null;e.methodTypes&&s&&angular.forEach(e.methodTypes,function(e){e.HandlingCharge&&(e.serviceChargeFormattedMessage=T(e.Name,o.currency,e.HandlingCharge,a.hideDecimalsForCurrency,s))}),e.handlingTotal&&s&&(t=A(i,e,null),e.serviceChargeFormattedMessage=T(t,o.currency,e.handlingTotal,a.hideDecimalsForCurrency,s)),e.category===u.RECURRING_CONTRACT?((r=w(l,e,u.NON_HOSTED,u.NON_HOSTED,n)).groupToggleButton=!1,r.toggleRequired=!0):e.category===u.NON_HOSTED?w(l,e,u.RECURRING_CONTRACT,u.NON_HOSTED,n):e.category===u.PAYPAL_BILLING_AGREEMENT?((r=w(l,e,u.PAYPAL,u.PAYPAL,n)).usePayPalBillingAgreement=e.usePayPalBillingAgreement,r.savePayPalDetails=e.savePayPalDetails,r.hasSavedBillingAgreement=!0,r.hasCustomButton=!0):e.category===u.PAYPAL?((r=w(l,e,u.PAYPAL_BILLING_AGREEMENT,u.PAYPAL,n)).hasCustomButton=!0,_.deleteExistingPaypal(),_.setUpPaypalPaymentCheckout({paymentMethodGroup:r,paymentMethod:e}),1===r.methods.length&&(r.usePayPalBillingAgreement=!1,r.savePayPalDetails=!1)):e.category===u.GOOGLE_PAY?c.isGooglePayScriptAvailable&&l.push({header:e.name,uniqueHeaderId:"header"+e.id+n,uniqueBodyId:"body"+e.id+n,images:e.images,category:e.category,methodTypes:e.methodTypes,methods:[e],hasCustomButton:!0}):(e.category===u.APPLE_PAY&&(E.setApplePayTransactionInfo(e.additionalTransactionInfo),E.checkIfApplePayIsAvailable()),l.push({header:e.name,uniqueHeaderId:"header"+e.id+n,uniqueBodyId:"body"+e.id+n,images:e.images,category:e.category,methodTypes:e.methodTypes,methods:[e],hasCustomButton:f.hasCustomButton(e.category)}))}),l},O=function(t,n){var r=[];return angular.forEach(t,function(e){e.service&&void 0!==e.service.getFilter&&(t=a("filter")(t,e.service.getFilter(t)))}),angular.forEach(t,function(e){e.IsRecurringPaymentMethod=!1,e.category===u.NON_HOSTED&&(e.formGenerationTime=n,e.includeHorizationalRule=!0),e.category===u.RECURRING_CONTRACT?(e.IsRecurringPaymentMethod=!0,e.isMultiOptionType=!0,e.includeHorizationalRule=!0,e.formGenerationTime=n):e.category===u.PAYPAL_BILLING_AGREEMENT&&(e.usePayPalBillingAgreement=!0,e.savePayPalDetails=!1),r.push(e)}),r},I=function(e,t,n,r){t.data.CartExpired&&(c.location.href="/?cartExpired=true"),t.data.SessionResponse&&(b.canLoadAdyenComponent()?b.makeAdyenComponentRequest(t.data.SessionResponse,r):C=e.$on(d.ADYEN_SCRIPT_AND_CSS_LOADED,function(e){b.makeAdyenComponentRequest(t.data.SessionResponse,r)})),n.setServiceChargeToolTip(t.data.ServiceChargeTooltipText);var i=t.data.PaymentMethods.map(l.init),i=O(i,t.data.AdyenNonHostedFormGenerationTime),i=(e.paymentMethodsGroups=P(i,n,r,t.data.ServiceChargeMessageTemplate),a("filter")(e.paymentMethodsGroups,function(e){e=a("filter")(e.methods,function(e){return e.id===t.data.DefaultPaymentMethodId});return e&&0<e.length}));i&&0<i.length&&(e.selectedPaymentMethodGroup=i[0]),!e.selectedPaymentMethodGroup||e.selectedPaymentMethodGroup.category===u.NON_HOSTED&&1<e.selectedPaymentMethodGroup.methods.length||((i=a("filter")(e.selectedPaymentMethodGroup.methods,function(e){return e.id===t.data.DefaultPaymentMethodId}))&&0<i.length&&(e.selectedPaymentMethod=i[0],e.selectedPaymentMethod.handlingTotal)&&n.setHandlingTotal(e.selectedPaymentMethod.handlingTotal),e.selectedPaymentMethodGroup&&"Paypal"===e.selectedPaymentMethodGroup.category&&o.$broadcast(g.PAYPAL_SELECTED,!0))},R=function(e,t){n.broadcastNewValidationModel(t),e.paymentMethodsGroups=[],e.selectedPaymentMethodGroup=null,e.selectedPaymentMethod=null},M=function(e){t.get().applyApiBasketData(e.data.Basket),o.$broadcast(d.BASKET_RELOAD_COMPLETE)},D=null;return{restrict:"A",scope:{paymentMethodsGroups:"="},link:function(a){h.all([t.getWhenReady(),r.getWhenReady()]).then(function(e){GMGSettings.isApplePaySupportedCurrentCountry&&(E=y.get("ApplePayService")),GMGSettings.isPaypalSupportedCurrentCountry&&(_=y.get("payPalService"));var t,n,r,i,o=e[0];S=e[1],o&&o.total&&0===o.total.final||(t=a,n=o,r=S,f.broadcastPaymentMethodsLoadingStatus(!0),s.getPaymentDetails(null,null,null).then(function(e){I(t,e,n,r)},function(e){R(t,e)}).finally(function(){f.broadcastPaymentMethodsLoaded(t.paymentMethodsGroups,t.selectedPaymentMethodGroup,t.selectedPaymentMethod)}),D=D||(i=a).$on(p.COUNTRY_CHANGED,function(e){f.broadcastPaymentMethodsLoadingStatus(!0),h.all([s.getPaymentDetails(null,null),s.getUserInfo(),s.userProfile()]).then(function(e){I(i,e[0]),M(e[1]),m.setUserProfile(e[2].data)},function(e){R(i,e)}).finally(function(){f.broadcastPaymentMethodsLoaded(i.paymentMethodsGroups,i.selectedPaymentMethodGroup,i.selectedPaymentMethod)})}))}),a.$on(e,function(){D&&D(),C&&C()})}}}]),angular.module("gmgApp").directive("loadingBars",function(){return{restrict:"E",templateUrl:"//images.greenmangaming.com/static/templates/directives/loading_bars.6690ec016.html"}}),angular.module("gmgApp").directive("loadingBox",[function(){return{restrict:"A",link:function(e,t){function n(e){e?t.addClass("box-loading"):t.removeClass("box-loading")}t.append('<div class="row text-center box-spinner"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div>');n(!0),e.$watch(function(){return e.loadingBox},n)},scope:{loadingBox:"="}}}]),angular.module("gmgApp").directive("loadMegamenuContent",["ApiService","$compile","$http","User",function(e,o,a,s){return{restrict:"A",scope:{heading:"="},link:function(r,t){var i=angular.element('<span class="glyphicon glyphicon-refresh"></span>');function n(n){var e;(e=n).html(i),e.addClass("spinning"),t.attr("disabled",!0),r.compile=o,s.getWhenReady().then(function(e){var t=r.heading;e.extractedCodes&&e.extractedCodes.CountryCode&&e.extractedCodes.CurrencyCode&&(t.includes("?")?t+="&":t+="?",t+="countryCode="+e.extractedCodes.CountryCode+"&currencyCode="+e.extractedCodes.CurrencyCode),a.get(t).success(function(e){n.html(r.compile(e)(r)),n.find(".nav-pills-megamenu > li > a").hover(function(){$(this).tab("show")}),r.removeSpinner()})})}r.removeSpinner=function(){t.parent().find(".megamenu-content").removeClass("spinning"),t.removeAttr("disabled")},t.bind("mouseover",function(){var e;void 0===t.attr("disabled")&&0<(e=t.parent().find(".megamenu-content")).length&&0===e[0].children.length&&n(e)})}}}]),angular.module("gmgApp").directive("loadWanting",["ApiService","User","$compile",function(i,o,n){function a(e,t){t.html(n(e.buttonContent.html())(e)),t.removeClass("spinning"),t.removeClass("cursor-default")}var s=angular.element('<span class="glyphicon glyphicon-refresh" style="color:white;"></span>');function r(n,r){i.wantsForGame(n.productCode).then(function(e){-1===e.data?(n.buttonContent.find(".number-column").hide(),n.onHover&&(n.buttonContent.find(".want-it").addClass("col-xs-12"),n.buttonContent.find(".wanted").addClass("col-xs-12"),n.buttonContent.find(".want-it").removeClass("col-xs-7"),n.buttonContent.find(".wanted").removeClass("col-xs-7"),r.find(".want").css({width:"90px",padding:"0 3px"}))):(n.buttonContent.find(".number-column").show(),n.onHover&&(n.buttonContent.find(".want-it").addClass("col-xs-7"),n.buttonContent.find(".wanted").addClass("col-xs-7"),n.buttonContent.find(".want-it").removeClass("col-xs-12"),n.buttonContent.find(".wanted").removeClass("col-xs-12"),r.find(".want").css({width:"143px",padding:"0"})));var t=n.buttonContent.find(".number-want");0<t.length&&(t.get(0).innerHTML=(t=e.data,parseInt(t)<1e3?t:(e="0"!==(e=(t=(t+="").substr(0,t.length-2)).substr(t.length-1,1))?"."+e:"",t.substr(0,t.length-1)+e+"k"))),n.buttonContent.find(".want-dock").show(),n.ready?a(n,r.find(".want")):n.ready=!0})}function l(t,n){r=t,e=n.find(".want"),r.buttonContent=e.clone(),e.html(s),e.addClass("spinning"),e.addClass("cursor-default"),e.attr("load",!0);var e,r=o.get();r&&r.username?i.isWanted(t.productCode).then(function(e){e.data?(t.buttonContent.find(".want-it").hide(),t.buttonContent.find(".wanted").show()):(t.buttonContent.find(".want-it").show(),t.buttonContent.find(".wanted").hide()),t.ready?a(t,n.find(".want")):t.ready=!0}):(t.ready=!0,t.buttonContent.find(".want-it").show(),t.buttonContent.find(".wanted").hide())}return{restrict:"A",scope:{productCode:"=",onHover:"="},link:function(e,t){e.$watch(function(){return e.productCode},function(){e.onHover?t.hover(function(){void 0===t.find(".want").attr("load")&&(l(e,t),r(e,t))}):(l(e,t),r(e,t))})}}}]),angular.module("gmgApp").directive("manualChangeEventTrigger",function(){return{restrict:"A",link:function(e,t,n){e.$watch(n.ngModel,function(){var e;"createEvent"in document?((e=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),document.getElementById(n.id).dispatchEvent(e)):document.getElementById(n.id).fireEvent("onchange")})}}}),angular.module("gmgApp").directive("messageBar",function(){return{restrict:"E",scope:{message:"=",visible:"=?",errors:"=?",isError:"=",hideClose:"=",headerText:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/message-bar.f9c85e496.html",link:function(e){angular.isUndefined(e.visible)&&(e.visible=!0),e.closeMessage=function(){e.visible=!1};var t,n,r,i=angular.element(".global-message-bar-controller");0<i.length&&(t=i.offset().top,n=angular.element("header").hasClass("sticky-header"),r=0<angular.element("#persistent").length,$(window).scroll(function(){!n&&e.visible&&window.pageYOffset>t&&!r?i.addClass("sticky"):n&&0<=window.pageYOffset?i.addClass("sticky-messsage"):i.removeClass("sticky sticky-messsage")}))}}}),angular.module("gmgApp").directive("miniCarousel",["$compile",function(a){return{restrict:"A",link:function(n,e){var t=null;e.removeClass("owl-static").addClass("owl-carousel"),e.parent(".carousel-container").addClass("no-margin"),e.on("initialized.owl.carousel",function(){e.find(".owl-item.cloned").each(function(e,t){a(t)(n)})}),e.on("drag.owl.carousel",i),e.on("translate.owl.carousel",i),e.on("dragged.owl.carousel",o),e.on("translated.owl.carousel",o);var r=e.find(".item").length<=10;function i(){(t=e.find(".owl-stage")).addClass("moving")}function o(){t.removeClass("moving")}e.toggleClass("has-dots",r),e.owlCarousel({loop:!0,margin:18,navText:["<i class='glyphicon glyphicon-menu-left'></i>","<i class='glyphicon glyphicon-menu-right'></i>"],nav:!0,responsiveClass:!1,stagePadding:95,slideBy:"page",smartSpeed:110,responsive:{0:{stagePadding:66,margin:10,items:1,dots:r},400:{stagePadding:25,margin:10,items:2,dots:r},499:{stagePadding:70,items:2,dots:r},768:{stagePadding:80,items:3},992:{items:4},1200:{items:5}}})}}}]),angular.module("gmgApp").directive("navPills",["$timeout","Utils",function(r,i){function o(e,t){f(),e=$(e).find(".megamenu-content"),n?d(e):(s=e,(t?p:c)())}var e,a,s,t=300,l=5,n=!1,c=function(){var e;n=!0,null!=s&&(s.css("display","block"),(e=s.parent().find("> a")).addClass("hover-link"),e.find("span.caret").removeClass("caret").addClass("caret-up"))},u=function(e){var t;null!=s&&(s.css("display","none"),(t=s.parent().find("> a")).removeClass("hover-link"),t.find("span.caret-up").removeClass("caret-up").addClass("caret")),e||(n=!1)},d=function(e){u(!0),s=e,c()},p=function(){e&&2!==e.$$state.status&&1!==e.$$state.status||(e=r(function(){c()},t))},h=function(){e&&r.cancel(e)},f=function(){a&&r.cancel(a)};$("body").click(function(e){null!=e.target.closest(".megamenu-list")&&0!=e.target.closest(".megamenu-list").length||u()});return{restrict:"A",link:function(e,t){var n="li.dropdown";t.on("mouseenter",n,function(e){i.isTouchDevice(e)?e.preventDefault():o(this,!0)}).on("mouseleave",n,function(){a&&2!==a.$$state.status&&1!==a.$$state.status||(a=r(function(){h(),u()},l))}).on("click",n,function(e){var t;!i.isTouchDevice(e)||(t=$(this).find(".megamenu-content")).is(s)&&"block"===t.css("display")||(o(this,!1),1<=$(this).find("ul").length&&e.preventDefault())})}}}]),angular.module("gmgApp").directive("nintendoRedemption",function(){return{restrict:"E",scope:{redeemOnButtonText:"@?",nintendoUrl:"@",keyValue:"=",isPurchaseHistoryMode:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/nintendo-redemption.ec51b3e00.html"}}),angular.module("gmgApp").directive("noParentScroll",[function(){return{restrict:"A",link:function(e,t,n){var r=$(n.noParentScroll);t.on({mouseenter:function(){r.addClass("no-scroll")},mouseleave:function(){r.removeClass("no-scroll")}})}}}]);var initialized=!1,initialized=(angular.module("gmgApp").directive("oembed",function(){return{restrict:"A",priority:10,controller:function(){this.$onInit=function(){initialized||(initialized=!0,$.fn.updateOEmbedProvider("Spotify","rich",["open.spotify.com/(track|album|playlist)/"],"https://open.spotify.com/embed/$1",{templateRegex:/.*open\.spotify\.com\/(track|album|playlist)/,embedtag:{tag:"iframe",width:300,height:380},nocache:1}))}},link:function(e,t,n){e.$watch(n.bindHtmlCompile,function(e){e&&t.find("a.c-external-link").oembed(void 0,{embedMethod:"append",includeHandle:!1,afterEmbed:function(e){var t=$(this);e&&"video"===e.type?t.siblings("iframe").wrap('<div class="video-wrapper">'):t.insertBefore(t.parent())}})})}}}),angular.module("gmgApp").directive("oneAccordionOpen",[function(){return{restrict:"A",link:function(e,t){t.on("show.bs.collapse",function(){t.find(".in").collapse("hide")})}}}]),angular.module("gmgApp").directive("onEnter",function(){return function(t,e,n){e.bind("keydown keypress",function(e){13===e.which&&(e.preventDefault(),t.$apply(function(){t.$eval(n.onEnter)}))})}}),angular.module("gmgApp").directive("onFileChange",function(){return{restrict:"A",link:function(e,t,n){e=e.$eval(n.onFileChange);t.bind("change",e)}}}),angular.module("gmgApp").directive("onFileDrop",function(){return{restrict:"A",link:function(t,e,n){e.bind("dragover",function(e){e.preventDefault()}),e.bind("drop",function(e){e.preventDefault(),t.$eval(n.onFileDrop)(e)})}}}),angular.module("gmgApp").directive("onLoadImage",function(){return{restrict:"A",link:function(e,t,n){t.bind("load",function(){e.$apply(n.onLoadImage)})}}}),angular.module("gmgApp").directive("onRepeatFinish",["$timeout",function(t){return{restrict:"A",scope:{onRepeatFinish:"&"},link:function(e){!0===e.$parent.$last&&t(function(){e.onRepeatFinish()})}}}]),angular.module("gmgApp").directive("openCancelPendingOrderModal",["EVENTS","$rootScope",function(n,r){return{restrict:"A",link:function(e,t){t.click(function(){r.$broadcast(n.OPEN_CANCEL_PENDING_ORDER)})}}}]),angular.module("gmgApp").directive("openLanguageDropdown",["$timeout","Utils",function(o,a){var s,l=!1;return{restrict:"A",link:function(e,t){function n(){l=!0,t.addClass("opened")}function r(){l=!1,t.removeClass("opened")}function i(){s&&o.cancel(s)}t.on("mouseenter",function(){s&&2!==s.$$state.status&&1!==s.$$state.status||(s=o(function(){n()},500))}).on("mouseleave",function(){i(),r()}).on("click",function(e){a.isTouchDevice(e)&&(i(),(l?r:n)(),e.preventDefault())})}}}]),!1);function initElements(e){function t(e,t){e.hover(function(){t.fadeIn(250),n.hide()},function(){t.hide(),n.show()})}var e=$(e),n=(e.find("#mycart").scroll(function(){}),e.find('[rel="tooltip"]').tooltip({container:"body"}),e.find(".your-credit")),r=e.find("#reviews-display"),i=e.find("#refer-display"),o=e.find("#reviews-info"),e=e.find("#refer-friend-info");t(r,o),t(i,e),$(function(){function e(){var e,t=$(".show-cta:visible");0!==t.length&&(t=t.offset().top,e=$("#persistent"),$(window).scrollTop()>=t?e.fadeIn("fast"):e.is(":visible")&&e.fadeOut("fast"))}$(window).scroll(e),$(window).resize(e),e()})}function goToTop(){$("html,body").animate({scrollTop:0},"slow")}angular.module("gmgApp").directive("openSignInModal",["$rootScope","User","MODALS",function(n,r,i){return{restrict:"A",controller:["$scope","$attrs",function(t,e){e.openSignInModal&&(t.user=t.$eval(e.openSignInModal,t)),t.user||r.getWhenReady().then(function(e){t.user=e})}],link:function(t,e){e.on("click",function(e){t.user&&!t.user.username&&(e.stopImmediatePropagation(),n.$broadcast(i.EVENTS.OPEN_SIGN_IN_MODAL))})}}}]),angular.module("gmgApp").directive("owlCarousel",["ScreenSize",function(i){return{restrict:"A",link:function(e,t,n){t.removeClass("owl-loading").addClass("owl-carousel");var r={};r[i.SCREEN_LG_MIN]={items:parseInt(n.itemsDesktop)||5},r[i.SCREEN_SM_MAX]={items:parseInt(n.itemsDesktopSmall)||4},r[i.SCREEN_XS_MAX]={items:parseInt(n.itemsTablet)||3},r[i.SCREEN_XXXS_MIN]={items:parseInt(n.itemsMobile)||2},t.owlCarousel({autoplay:n.autoPlay,items:n.items,responsive:r})}}}]),angular.module("gmgApp").directive("passwordfield",function(){return{restrict:"E",scope:{passwordLabel:"@passwordLabel",passwordFieldId:"@passwordFieldId"},templateUrl:"//images.greenmangaming.com/static/templates/directives/password_field.b9b0f81d7.html"}}),angular.module("gmgApp").directive("paymentAccordion",[function(){return{restrict:"A",scope:{panelChange:"="},link:function(n,e){var r=$(e);r.on("shown.bs.collapse",function(e){var e=$(e.target),t=(r.find(".panel-collapse.in").not(e).collapse("hide"),$(e).collapse("show"),e.data("paymentMethodUniqueBodyId")),e=e.find(".panel-body").data("paymentMethodId");n.panelChange(t,e)}),r.on("hidden.bs.collapse",function(e){e=$(e.target),e=r.find(".panel-collapse.in").not(e);void 0!==e&&0!==e.length||n.panelChange(0)})}}}]),angular.module("gmgApp").directive("paymentBillingAddressViewRemoteLoad",["$http","$compile","paymentBillingAddressHtmlService","PAYMENT_METHOD_EVENTS","DESTROY_EVENT_NAME","paymentMethodsService","$timeout",function(a,s,l,c,u,d,p){return{restrict:"A",scope:{paymentMethodGroupId:"=?"},link:function(n,r){n.billingAddressHtmlSet=!1;function i(){var e=l.getBillingAddressPromise();e||(e=a.get(l.getBillingAddressHtmlUrl()),l.setBillingAddressPromise(e)),e.then(function(e){var t=s(e.data)(n.$parent);p(function(){r.html(t),n.billingAddressHtmlSet=!0},1)})}var e,t=n.$on(c.BILLING_ADDRESS_PROMISE,function(e){i()}),o=(n.paymentMethodGroupId&&(e=n.$on(c.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){n.billingAddressHtmlSet||t.selectedPaymentMethodGroup.uniqueBodyId===n.paymentMethodGroupId&&i()}),n.$on(u,function(){e&&e(),t()})),d.getSelectedPaymentMethodDetails());(!n.paymentMethodGroupId||o&&o.selectedPaymentMethodGroup&&o.selectedPaymentMethodGroup.uniqueBodyId===n.paymentMethodGroupId)&&i()}}}]),angular.module("gmgApp").directive("paymentHeader",[function(){return{restrict:"A",link:function(e,t){$(t).on("click",function(e){$(this).siblings(".panel-collapse").hasClass("in")&&(e.preventDefault(),e.stopPropagation())})}}}]),angular.module("gmgApp").directive("paymentMethodGroupToggle",["$filter","paymentMethodsService",function(r,i){return{restrict:"A",scope:{switchToPaymentMethodCategory:"=",paymentMethodGroup:"="},link:function(n,e){$(e).on("click",function(e){n.paymentMethodGroup.groupToggleButton=!n.paymentMethodGroup.groupToggleButton;var t=r("filter")(n.paymentMethodGroup.methods,function(e){return e.category===n.switchToPaymentMethodCategory})[0];n.$apply(),t&&!t.isMultiOptionType?i.broadcastSelectedPaymentMethodChange(t):i.broadcastSelectedPaymentMethodChange(null)})}}}]),angular.module("gmgApp").directive("paypalSdkScript",["User","ApiService",function(e,t){return{restrict:"EA",link:function(){t.getPaypalClientId().then(function(n){e.getWhenReady().then(function(e){var e="https://www.paypal.com/sdk/js?client-id="+n.data+"&currency="+e.currency+"&intent=authorize&disable-funding=credit",t=document.createElement("script");t.type="text/javascript",t.src=e,document.body.append(t)})})}}}]),angular.module("gmgApp").directive("pdpAssociatedProduct",function(){return{controller:"PdpAssociatedProductController",restrict:"E",transclude:!0,scope:{associatedProduct:"=?",currencyCode:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/pdp_associated_product.a99d4c988.html"}}),angular.module("gmgApp").directive("pdpSectionsLoader",["$window","$rootScope","EVENTS","PDP_SCROLL_PERCENTAGE_OF_PAGE","$timeout","PDP_SECTION_ON_LOAD_EVENT","ObjectValidator","REVIEWS_LOADED","$http","$compile","pdpProductService",function(s,i,l,o,a,c,t,u,e,n,d){function p(){var e=s.innerHeight,t=w.height(),n=T.height(),r=A.height(),i=(C.scrollTop()||w.scrollTop())+n,n=e<(t=t-n-r);if(d.twitchAvailable){if(n&&(i/t<_||t===m))return}else if(i/t<_)return;_<E&&n&&(_+=o.INCREASE),m=t,f++,s.requestAnimationFrame(O)}function h(e){(e=e.blockId)===S&&!t.isNullOrUndefined(i.statsAppIdIsNotValid)&&i.statsAppIdIsNotValid&&(v.loadedBlocks[e]=!0),R()}var f=0,m=0,g=[],v=null,y="",b="reviews",S="stats",_=o.MIN,E=o.MAX,C=angular.element("html"),w=angular.element("body"),T=angular.element("header"),A=angular.element("footer"),P=angular.element("html, body"),O=function(){angular.forEach(g,function(e){var t=e.id,e=angular.element(e).index();v.loadableBlocks[t]=e<f,v.$$phase||v.$apply()})},r=function(){P.css({overflow:"auto"}),v.showLoader=!1},I=function(){t.isNullOrEmptyString(y)||P.animate({scrollTop:$("#"+y).offset().top-parseInt(angular.element("#persistent").height())},800,function(){r(),y=""})},R=function(){for(var e=0;e<g.length;e++){var t=g[e].id;if(!v.loadedBlocks[t])return;var n=$("#"+t+" .loading-bars"),r=$("#"+t+" .section-content");""===y?(r.slideDown(function(){v.$$phase||v.$apply(),!0===v.loadableBlocks[b]&&a(function(){i.$broadcast(u)},0)}),n.slideUp()):(r.show(),n.hide()),t===y&&a(I)}};return{restrict:"A",link:function(t,e){g=e.find("div.pdp-async-section"),t.loadableBlocks=[],t.loadedBlocks=[],t.showLoader=!1,v=t,s.addEventListener("scroll",p),t.goToSection=function(e){y=e,(t.loadedBlocks[e]?I:(P.css({overflow:"hidden"}),v.showLoader=!0,(()=>{for(var e=0;e<g.length;e++)if(g[e].id===y)return f=e+1})(),O))()};var n=t.$on(l.REMOTE_BLOCK_LOADED,function(e,t){h(t),p()}),r=t.$on(l.ERROR_LOADING_REMOTE_BLOCK,function(e,t){h(t),f++,O()}),i=t.$on(c.STATS,function(){v.loadedBlocks[S]=!0,R()}),o=t.$on(c.TWITCH,function(){v.loadedBlocks["twitch-streams"]=!0,R()}),a=t.$on(c.REVIEWS,function(){v.loadedBlocks[b]=!0,R()});t.$on("$destroy",function(){n(),r(),i(),o(),a()}),p()}}}]),angular.module("gmgApp").directive("pdpViewRemoteLoad",["$http","$compile","$rootScope","EVENTS","PDP_SECTION_ON_LOAD_EVENT","$timeout",function(t,o,a,s,l,c){var u={};return{restrict:"A",scope:{viewUrl:"=viewUrl",blockId:"="},link:function(n,r){u.blockId=n.blockId;function i(){t.get(n.viewUrl).then(function(e){e=o(e.data)(n);r.html(e),a.$broadcast(s.REMOTE_BLOCK_LOADED,u)},function(){a.$broadcast(s.ERROR_LOADING_REMOTE_BLOCK,u)})}var e=n.$on(l.RELOAD_ALL_SECTIONS,function(e,t){n.blockId===t&&c(function(){n.$apply(function(){r.html(""),i()})},0)});n.$on("$destroy",function(){e()}),i()}}}]),angular.module("gmgApp").directive("phoneNumberInput",function(){return{restrict:"E",controller:"phoneNumberInputController",scope:{phoneNumber:"=",selectedCountry:"=",error:"=",required:"=",loading:"=?",enabled:"&"},templateUrl:"//images.greenmangaming.com/static/templates/directives/phone-number-input.5f0dceaee.html",link:function(e,t){t.addClass("phone-number")}}}).controller("phoneNumberInputController",["$scope","$element","$q","CountryService","User",function(n,e,t,r,i){function o(){t.all([i.getWhenReady(),r.getAllWithCallingCode().$promise]).then(function(e){var t=e[0].country;n.countries=e[1],s=n.countries.filter(function(e){return e.CountryCode===t})[0],n.selectedCountry=s,n.loading=!1})}var a,s=null;n.countries=[],n.selectedCountry=null,n.loading=!0;void 0===e.attr("enabled")?o():a=n.$watch(n.enabled,function(e){e&&(o(),a())}),n.selectCountry=function(e){n.selectedCountry=e}}]),angular.module("gmgApp").directive("phoneNumberModal",["modalService",function(e){return $.extend({restrict:"E",controller:"phoneNumberModalController",templateUrl:"//images.greenmangaming.com/static/templates/directives/phone-number-modal.70cc30b3c.html"},e.modalDirectiveBase)}]).controller("phoneNumberModalController",["$scope","CountryService","$q","User","ApiService","$window","tealiumLoggingService",function(n,e,t,r,i,o,a){n.isLoading=!0;var s=null;n.countries=[],n.hideBackButton=!1;t.all([r.getWhenReady(),e.getAllWithCallingCode().$promise]).then(function(e){var t=e[0].country;n.countries=e[1],s=n.countries.filter(function(e){return e.CountryCode===t})[0],n.selectedCountry=s}),n.selectCountry=function(e){n.selectedCountry=e},n.onOpenModal=function(){n.isLoading=!0,n.selectedCountry=s,n.dialCode="",n.phoneNumber="",n.showVerificationModal=!1,n.verificationCode="",n.phoneNumberError=null,n.showCodeSentMessage=!1,n.verificationCodeError=null,n.showCodeSentMessage=!1,n.hideBackButton=!1,n.confirmSignup=!1,n.newsletterOptIn=!1,n.model.phoneNumber&&(n.showCodeSentMessage=!0,n.showVerificationModal=!0,n.phoneNumber=n.model.phoneNumber.number,n.dialCode=n.model.phoneNumber.dialCode,n.selectedCountry=n.countries.filter(function(e){return e.CallingCode===n.model.phoneNumber.dialCode})[0],n.hideBackButton=!0),n.isLoading=!1,n.confirmSignup=n.model.confirmSignup,n.newsletterOptIn=n.model.newsletterOptIn},n.sendVerificationCode=function(){var e;return n.phoneNumberError=null,!(n.showCodeSentMessage=!1)===n.confirmSignup?(e={Number:n.phoneNumber,CountryDialCode:n.dialCode},i.resendConfirmationCodePhone(e).then(function(){n.showCodeSentMessage=!0,n.showVerificationModal=!0}).catch(function(e){e.data.Message?n.phoneNumberError=e.data.Message:n.phoneNumberError=e.data})):(e={Number:n.phoneNumber,CountryDialCode:"+"+n.selectedCountry.CallingCode},i.validateAndSendVerificationCode(e).then(function(){n.showCodeSentMessage=!0,n.showVerificationModal=!0}).catch(function(e){e.data.Message?n.phoneNumberError=e.data.Message:n.phoneNumberError=e.data}))},n.back=function(){n.phoneNumberError=null,n.showVerificationModal=!1,n.verificationCode="",n.verificationCodeError=null},n.verify=function(){return!0===n.confirmSignup?i.confirmCognitoPhoneNumberSignup(n.verificationCode,n.dialCode,n.phoneNumber).then(function(){a.logCognitoRegisterAttempt("success",n.newsletterOptIn,"phone"),n.model.close(),o.location.href="/"}).catch(function(e){n.verificationCodeError=e.data}):i.setPhoneNumber(n.verificationCode).then(function(){n.model.currentPhoneNumber="+"+n.selectedCountry.CallingCode+n.phoneNumber,n.model.returnUrl?o.location.href=n.model.returnUrl:(n.model.phoneNumber&&o.location.reload(),n.model.close())}).catch(function(e){n.verificationCodeError=e.data})},n.getWeJustSentATextMessage=function(){return"0"==n.phoneNumber[0]&&(n.phoneNumber=n.phoneNumber.slice(1)),n.model.WeJustSentATextMessage.replace("{0}","+"+n.dialCode+n.phoneNumber)}}]),angular.module("gmgApp").directive("platformNames",function(){return{restrict:"E",scope:{platform:"=platform",secondaryPlatforms:"=secondaryPlatforms"},templateUrl:"//images.greenmangaming.com/static/templates/directives/platform_names.e814c3799.html"}}),angular.module("gmgApp").directive("price",["$compile","Currency","User",function(r,i,o){return{restrict:"E",scope:{currency:"=",amount:"="},link:function(t,n){function e(){o.getWhenReady().then(function(){var e=o.get();n.html(i.displayPrice(t.currency,t.amount,e.hideDecimalsForCurrency)).show(),n.addClass("notranslate"),r(n.contents())(t)})}e(),t.$watch(function(){return t.amount},e),t.$watch(function(){return t.currency},e)}}}]),angular.module("gmgApp").directive("prizeSpinner",[function(){return{restrict:"E",scope:{buttonClass:"@",config:"=",getCanSpin:"&",getResult:"&",onResult:"&",onError:"&"},link:function(i,x){function e(e){return x[0].querySelector(e)}function t(e){if("ThrowPropsLoaded"===e&&(te=!0),(ee="TweenMaxLoaded"===e?!0:ee)&&te){window.onresize=me;for(var t=0;t<i.config.Prizes.length;t++)O[t]={borderColor:i.config.Prizes[t].BorderColour,segmentColor:i.config.Prizes[t].SegmentColour,type:"image",value:i.config.Prizes[t].ImageUrl,resultText:i.config.Prizes[t].Name,resultSku:i.config.Prizes[t].Id};l=O.length,u=(c=360/l)/2;e=angular.element(".".concat(i.buttonClass));Array.prototype.push.apply(L,e),fe(),a.setAttribute("viewBox","0 0 "+v+" "+y),J&&(s.setAttributeNS(null,"filter","url(#shadow)"),m.setAttributeNS(null,"filter","url(#shadow)"),g.setAttributeNS(null,"filter","url(#shadow)"),f.setAttributeNS(null,"filter","url(#shadow)")),ne(),ae(),s.appendChild(se()),g.appendChild(le()),me()}}var n,l,c,u,r,o,d="http://www.w3.org/2000/svg",$="http://www.w3.org/1999/xlink",a=e(".wheelSVG"),p=e(".wheel"),s=e(".wheelOutline"),h=e(".peg"),f=e(".pegContainer"),U=e(".mainContainer"),m=e(".valueContainer"),F=e(".wheelContainer"),g=e(".centerCircle"),v=1024,y=1024,b=v/2,S=y/2,B="#505050",G=10,V="transparent",_=890,E=_/2,j="#EDEDED",H=80,C=55,Y="2.3em",w=210,T=237,A=178,z="#505050",W=10,q="#00e225",K=120,Q="#505050",P=4,O=[],I=0,R=0,M=0,D=M,N=[],k=!!i.config.ClickSound,L=[e(".spinBtn")],X=[],Z=1080,J=!0,ee=!1,te=!1,ne=(i.spinning=!1,k&&(o=new Audio(i.config.ClickSound)),i.centerX=b,i.centerY=S,function(){TweenMax.set("svg",{visibility:"visible"}),TweenMax.set(p,{svgOrigin:b+" "+S,x:0,y:0}),TweenMax.set(h,{x:b-h.getBBox().width/2,y:S-E-h.getBBox().height/2,transformOrigin:"50% 25%",visibility:"visible"}),TweenMax.set(f,{transformOrigin:"50% 100%",scale:_/600}),TweenMax.set(U,{svgOrigin:b+" "+S,rotation:-90,x:0,y:0})}),re=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},ie=function(){for(var e=0;e<l;e++){var t=document.createElementNS(d,"line");t.setAttributeNS(null,"x1",b),t.setAttributeNS(null,"x2",N[e].x2),t.setAttributeNS(null,"y1",S),t.setAttributeNS(null,"y2",N[e].y2),t.setAttributeNS(null,"stroke",Q),t.setAttributeNS(null,"stroke-width",P),J&&t.setAttributeNS(null,"filter","url(#stroke-shadow)"),p.appendChild(t),TweenMax.set(t,{svgOrigin:b+" "+S,rotation:e*c})}},oe=function(){for(var e=0;e<l;e++){var t,n,r,i,o=document.createElementNS(d,"g");"image"===O[e].type?(O[e].borderColor&&(t=document.createElementNS(d,"rect"),o.appendChild(t),t.setAttributeNS(null,"x",b-(w*A/T+8)/2),t.setAttributeNS(null,"y",S-E+C-4),t.setAttributeNS(null,"height",w+8),t.setAttributeNS(null,"width",w*A/T+8),t.setAttributeNS(null,"style","fill: "+O[e].borderColor+";")),t=document.createElementNS(d,"image"),o.appendChild(t),t.setAttribute("class","wheelImage"),t.setAttributeNS(null,"x",b-w/2),t.setAttributeNS(null,"y",S-E+C),t.setAttributeNS(null,"height",w),t.setAttributeNS(null,"width",w),t.setAttributeNS($,"xlink:href",O[e].value)):"string"===O[e].type&&(n=document.createElementNS(d,"text"),O[e].value.split("^").forEach(function(e,t){r=document.createTextNode(e),(i=document.createElementNS(d,"tspan")).setAttributeNS(null,"dy",t?"1.2em":0),i.setAttributeNS(null,"x",b),i.setAttributeNS(null,"text-anchor","middle"),i.appendChild(r),n.appendChild(i)}),o.appendChild(n),n.setAttribute("class","wheelText"),n.setAttributeNS(null,"fill",j),n.setAttributeNS(null,"x",b),n.setAttributeNS(null,"y",S-E+H),n.style.fontSize=Y),m.appendChild(o),TweenMax.set(o,{svgOrigin:b+" "+S,rotation:e*c})}TweenMax.set(m,{svgOrigin:b+" "+S})},ae=function(){for(var e,t,n,r,i,o,a,s=0;s<l;s++)D=(M=-u)+c,e=b+E*Math.cos(Math.PI*M/180),n=S+E*Math.sin(Math.PI*M/180),t=b+E*Math.cos(Math.PI*D/180),r=S+E*Math.sin(Math.PI*D/180),i="M"+b+", "+S+"  L"+e+", "+n+"  A"+E+", "+E+" 0 0,1 "+t+", "+r+"z",a=document.createElementNS(d,"g"),o=document.createElementNS(d,"path"),a.appendChild(o),p.appendChild(a),TweenMax.set(o,{rotation:s*c,svgOrigin:b+" "+S}),o.setAttributeNS(null,"d",i),o.setAttributeNS(null,"fill",O[s].segmentColor),o.setAttributeNS(null,"stroke",0),N.push({path:o,x1:e,x2:t,y1:n,y2:r});0<P&&ie(),oe()},se=function(){var e=document.createElementNS(d,"g"),t=document.createElementNS(d,"circle");return s.appendChild(e),t.setAttributeNS(null,"fill",V),t.setAttributeNS(null,"stroke",B),t.setAttributeNS(null,"stroke-width",G),t.setAttributeNS(null,"cx",b),t.setAttributeNS(null,"cy",S),t.setAttributeNS(null,"r",E),e.appendChild(t),e},le=function(){var e=document.createElementNS(d,"circle");return e.setAttributeNS(null,"fill",q),e.setAttributeNS(null,"stroke",z),e.setAttributeNS(null,"stroke-width",W),e.setAttributeNS(null,"cx",b),e.setAttributeNS(null,"cy",S),e.setAttributeNS(null,"r",K),e},ce=function(){i.spinning=!0},ue=function(){var e;r=I,(I=Math.round(p._gsTransform.rotation/c))<r&&(TweenMax.fromTo(h,.2,{rotation:35},{rotation:0,ease:Back.easeOut}),k)&&(e=o.play())&&e.catch(function(e){if("NotAllowedError"!==e.name)throw e}),TweenMax.set(m,{rotation:p._gsTransform.rotation})},de=function(e,t){isNaN(e)||(t.target=this,t.type="result",t.spinCount=R,t.name=O[e].resultText,t.value=O[e].value,t.prizeSku=O[e].resultSku,t.segmentIndex=e,i.onResult({result:t}),X.push(t))},pe=function(e){n=p._gsTransform.rotation;var t=Math.round(n%360),t=(TweenMax.set(p,{rotation:t}),t=0<t?360-t:t,Math.round((t<0?-1*t:t)/c));de(t=t===l?0:t,e),R++,i.spinning=!1},he=function(){return function(){var e,r;!i.spinning&&i.getCanSpin({id:i.config.Id})&&(e=p._gsTransform.rotation,r=TweenMax.to(p,.5,{rotation:e-360,timeScale:1,ease:Linear.easeNone,onStart:ce,onUpdate:ue,repeat:-1}),i.getResult({id:i.config.Id}).then(function(e){var t,n;e.data.ErrorMessage?(r.kill(),i.spinning=!e.data.CanRespin):(t=-(c*e.data.WinningSegmentIndex+Z),n={keys:e.data.Keys,isHiddenKeys:e.data.IsHiddenKeys,drm:e.data.Drm,drmHelp:e.data.DrmHelp,remainingBalance:e.data.RemainingBalance,final:e.data.IsFinal,loser:e.data.IsLoser,boxId:e.data.BoxId},r.kill(),ThrowPropsPlugin.to(p,{throwProps:{rotation:{velocity:re(-700,-500),end:t}},repeat:-1,onStart:ce,onUpdate:ue,ease:Back.easeOut.config(.2),overshootTolerance:0,onComplete:function(){pe(n)}}))}))}},fe=function(){if(L)for(var e=0;e<L.length;e++)L[e].onclick=he()},me=function(){a.style.height=String(F.clientWidth*y/v).concat("px")};ObserverService.subscribe("TweenMax.min.js",t),ObserverService.subscribe("ThrowPropsPlugin.0.9.2.min.js",t)},templateUrl:"//images.greenmangaming.com/static/templates/directives/prize_spinner.24983183d.html"}}]),angular.module("gmgApp").directive("productCornerFlash",function(){return{restrict:"E",scope:{product:"=",classvip:"=",useSmall:"&?",useMedium:"&?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/product_corner_flash.a4adaf699.html",controller:["$scope",function(e){e.$watch("product",function(){e.borderColor=e.product&&e.product.cornerFlashBackgroundColor?e.product.cornerFlashBackgroundColor+" transparent transparent":""})}]}}),angular.module("gmgApp").directive("profileCheckbox",[function(){return{restrict:"E",scope:{value:"=",disabled:"=",onRemove:"&",onOk:"&"},templateUrl:"//images.greenmangaming.com/static/templates/directives/profileCheckbox.f7d7d3c34.html",controller:["$scope",function(t){t.onClickRemove=function(){if(t.onRemove){t.loading=!0;var e=t.onRemove();if(!e||!e.finally)throw new Error("Must return promise-like object");e.finally(function(){t.loading=!1})}},t.onClickOk=function(){if(t.onOk){t.loading=!0;var e=t.onOk();if(!e||!e.finally)throw new Error("Must return promise-like object");e.finally(function(){t.loading=!1})}},t.loading=!1}]}}]),angular.module("gmgApp").directive("profileRedirect",["$window","User","ObjectValidator",function(n,e,r){return{link:function(t){e.getWhenReady().then(function(e){e.isAuthenticated?(e=t.profileUrl+e.username,r.isNullOrEmptyString(t.urlSegment)||(e=e+"/"+t.urlSegment),n.location.href=e):n.location.href=t.loginUrl+"?returnUrl="+t.profileSectionUrl})},restrict:"A",scope:{loginUrl:"=",profileSectionUrl:"=",profileUrl:"=",urlSegment:"=?"}}}]),angular.module("gmgApp").directive("progressBar",function(){return{restrict:"E",scope:{filled:"@"},template:'<div class="progress-bar"><div class="filled"></div></div>',link:function(e,t){e.$watch(function(){return e.filled},function(e){e=(parseInt(e)||0).toFixed(0);t.find("div.filled").css("width",e+"%")})}}}),angular.module("gmgApp").directive("promoBanner",["$compile",function(n){return{restrict:"E",scope:{preDescription:"="},link:function(e,t){e=n(e.preDescription)(e);t.append(e)}}}]),angular.module("gmgApp").directive("promoCountdownWhirligig",["whirligigCountdownService",function(t){return{restrict:"E",scope:{startDate:"=",endDate:"=",hideDays:"=",showTime:"=",daysLabel:"@",hoursLabel:"@",minutesLabel:"@",secondsLabel:"@",lazyVoucher:"@",onStart:"&",countdownLabel:"@",onFinish:"&",usingPriceSheet:"=",viewmoreLabel:"@",address:"@"},templateUrl:"//images.greenmangaming.com/static/templates/directives/countdown_whirligig_promo_slide.3f2609d3e.html",link:function(e){return t.whirligigCountdownTimer(e)}}}]),angular.module("gmgApp").directive("purchasePageRedirector",["$window","$location","URL_PARAMETER_CONSTANTS","$q","User","Basket",function(o,a,s,e,l,c){return{restrict:"E",scope:{purchasePageUrls:"<",passedInitRedirectChecks:"@",isConfirmationPage:"="},link:function(t){function n(e,t){var n;return n=t,!!(e.isAuthenticated&&0===n.items.length&&-1<o.location.href.indexOf(i.BillingDetailsPage)&&(o.location.href="/"))||!!(0!==(e=t).items.length&&e.total&&0===e.total.final&&-1<o.location.href.indexOf(i.BillingDetailsPage))&&(o.location.href=i.CartPage,!0)}function r(e){return!(e=e).isAuthenticated&&!a.search()[s.RE_LOGIN_IN]&&-1===o.location.href.indexOf(i.CartPage)&&((e=new o.URL(i.CartPage,new o.URL(o.location.origin))).searchParams.append(s.RE_LOGIN_IN,!0),e.searchParams.append(s.RETURN_URL,i.CartPage),o.location.href=e.toString(),!0)}var i=angular.fromJson(t.purchasePageUrls);t.isConfirmationPage?l.getWhenReady().then(function(e){(e=e).isAuthenticated||a.search()[s.RE_LOGIN_IN]||-1!==o.location.href.indexOf(i.ConfirmationPage)?t.passedInitRedirectChecks=!0:((e=new o.URL(i.ConfirmationPage,new o.URL(o.location.origin))).searchParams.append(s.RE_LOGIN_IN,!0),a.search().ordernumber?e.searchParams.append(s.RETURN_URL,o.location.href):e.searchParams.append(s.RETURN_URL,i.ConfirmationPage),o.location.href=e.toString())}):e.all([c.getWhenReady(),l.getWhenReady()]).then(function(e){r(e[1])||n(e[1],e[0])||(t.passedInitRedirectChecks=!0)})}}}]),angular.module("gmgApp").directive("reloadTealiumTags",["$window","$timeout",function(n,r){return{restrict:"A",scope:{tags:"="},link:function(e){var t=e.tags;angular.isArray(t)&&0!==t.length&&r(function(){n.utag.view(n.utag_data,null,t)},0)}}}]),angular.module("gmgApp").directive("replaceHref",["Utils",function(s){return function(e,t,n){var r,i=n.href,o=null;function a(e,t){n.$set("href",s.namedReplace(i,t))}i||(r=n.$observe("href",function(e){r(),a(i=e,o)})),e.$watch(n.replaceHref,function(e){i&&a(0,e),o=e})}}]),angular.module("gmgApp").directive("resizeAccordion",["$window","$q","$timeout","ScreenSize",function(l,c,u,d){return{restrict:"A",link:function(e,r){function t(e){var t=c.defer(),n=o.shift();return void 0===n||void 0===e?t.resolve():a===n?t.resolve(n):t.resolve(s(n)),t.promise}function n(e){e.then(t).then(function(e){return void 0===e?u(function(){return n(c.resolve(a))},500):n(c.resolve(a))})}function i(){o.push(d.greaterThanOrEqual("sm"))}var o=[],a=!0,s=function(e){a=e;var t=r.find(".panel-collapse"),n=r.find(".panel-heading > a");return e?(t.collapse({toggle:!1}),t.collapse("show"),n.attr("data-toggle","")):(t.collapse("hide"),t.collapse({toggle:!0}),n.attr("data-toggle","collapse")),e};angular.element(l).bind("resize",i),u(function(){n(c.resolve(a)),i()},100)}}}]),angular.module("gmgApp").directive("searchFilter",[function(){return{restrict:"A",link:function(){$(".toggle-filters").click(function(){$(".overlay").fadeToggle();var e=$(".filters"),t=(e.slideToggle("fast",function(){"none"===e.css("display")&&e.css("display","")}),$(".toggle-filters")),t=(t.toggleClass("closed"),t.hasClass("closed")?1e3:1900);$(".input-search-inner").css("z-index",t)})}}}]),angular.module("gmgApp").directive("selectOnClick",["PAYMENT_METHOD_EVENTS","DESTROY_EVENT_NAME","paymentMethodsService",function(o,a,s){return{scope:{onRadioClick:"&",methodId:"=",advancedSelectSystem:"=?"},restrict:"A",link:function(n,e){n.$radio=e.find("input[type=radio]");var t=n.$on(o.DESELECT_RECURRING_PAYMENT_RADIO_BUTTON,function(e,t){t&&t.oldSelectionId&&n.$radio[0].id&&(n.$radio.prop("checked",!1),t.newSelectionId?s.broadcastDeselectedTargetRecurringPaymentRadioButton(t):n.$radio.click())}),r=n.$on(o.SELECT_RECURRING_PAYMENT_RADIO_BUTTON,function(e,t){n.$radio[0].id===t&&n.$radio.click()}),i=!1;e.click(function(e){i?(e.preventDefault(),e.stopImmediatePropagation()):(i=!0,(!n.advancedSelectSystem&&n.$radio[0]!==e.target||n.advancedSelectSystem&&!n.$radio.prop("checked"))&&(n.$radio.prop("checked",!0),n.$radio.click(),n.onRadioClick({recurringMethodId:n.methodId}),e.preventDefault(),e.stopImmediatePropagation()),i=!1)}),n.$on(a,function(){r(),t()})}}}]),angular.module("gmgApp").directive("showBox",["$window",function(r){return{restrict:"A",scope:{showRecent:"=showRecent"},link:function(n,e){n.elm=e[0];r.onscroll=function(){var e,t;e=(e=n.elm).getBoundingClientRect(),t=Math.max(document.documentElement.clientHeight,r.innerHeight),e.bottom<0||0<=e.top-t||(n.showRecent=!0)}}}}]),angular.module("gmgApp").directive("showMore",["$window","$timeout","ObjectValidator",function(h,f,m){return{restrict:"E",scope:{description:"=",loadAfter:"@"},link:function(e,t,r){function n(){l.addClass(i),s.text(c),a.show(),o.show(),p();var e=l[0].scrollHeight,t=l[0].clientHeight,n=parseInt(l.css("line-height"),10);l.hasClass("requirement-height-text")&&e<=12*n?(s.hide(),o.hide(),a.hide()):l.hasClass(r.longHeight+"-text")&&e<=6*n||l.hasClass("short-height-text")&&e<=3*n?(s.hide(),o.hide()):t<e&&(s.css("display","block"),o.show(),a.show())}var i="short-height-text",o=t.find(".gradient"),a=t.find(".requirement-show-more-btn"),s=(void 0!==r.longHeight&&(i=r.longHeight+"-text",o=t.find("."+r.longHeight+"-gradient")),t.find(".show-more-btn")),l=t.find(".text-content"),c=void 0===h.readMoreText?"Read More":h.readMoreText,u=void 0===h.showLessText?"Show Less":h.showLessText,d=0,p=function(){var e=l[0].scrollHeight;l.css({"max-height":e+"px"})};s.on({click:function(){var e;p(),s.text()===c?(d=$(window).scrollTop(),l.css({transition:"max-height 0.8s"}),l.removeClass(i),o.hide(),s.text(u)):(e=$(window).scrollTop()===d?.8:0,l.css({transition:"max-height "+e+"s"}),$("html, body").animate({scrollTop:d},200,function(){l.addClass(i),o.show(),s.text(c)}))}}),e.$watch("description",function(e,t){e!==t&&n()}),f(n,0),l.on("transitionend",function(){l.hasClass(i)&&n()}),m.isNullOrUndefined(e.loadAfter)||e.$on(e.loadAfter,function(){f(n,0)}),angular.element(h).bind("resize",n)}}}]),angular.module("gmgApp").directive("signupDynamicInput",function(){return{restrict:"E",scope:{divclass:"=",label:"=",type:"=",fieldRequireText:"=",invalidEmailText:"=",minimumPasswordLabel:"=",maximumPasswordLabel:"=",passwordsNotMatchingText:"=",register:"=",registerForm:"=",errors:"=",minLength:"=",maxLength:"=",ngBlur:"&",ngKeypress:"&",ngFocus:"=",isChecking:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/signup_dynamic_input.9f5a9839d.html"}}),angular.module("gmgApp").directive("signupDynamicInputCognito",function(){return{restrict:"E",scope:{divclass:"=",label:"=",type:"=",fieldRequireText:"=",invalidEmailText:"=",minimumPasswordLabel:"=",maximumPasswordLabel:"=",passwordsNotMatchingText:"=",register:"=",registerForm:"=",errors:"=",minLength:"=",maxLength:"=",ngBlur:"&",ngKeypress:"&",ngFocus:"=",isChecking:"=",isStaffError:"=",emptyError:"="},templateUrl:"//images.greenmangaming.com/static/templates/directives/signup_dynamic_input_cognito.f6c653d9e.html"}}),angular.module("gmgApp").directive("signupEmailInput",["ApiService","ErrorHandler","UNAVAILABLE_EMAIL",function(e,t,r){function i(e){e.emailFocus=!1,e.registerForm.email.$invalid&&e.registerForm.email.$setValidity(r,!0)}return{restrict:"E",scope:{model:"=model",emailLabel:"=emailLabel",registerForm:"=registerForm",requiredErrorMessage:"=requiredErrorMessage",invalidEmailErrorMessage:"=invalidEmailErrorMessage",verticalLayout:"=verticalLayout",errorHandler:"&",registerErrors:"=registerErrors",validationAccessor:"&validationAccessor",mdLayoutControlLabel:"=mdLayoutControlLabel",mdLayoutFormControl:"=mdLayoutFormControl",required:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/signup_email_input.194e77526.html",link:function(n,e){e=e.find("input");angular.element(e).on("blur",function(){n.$apply(function(){i(n)})}),n.validationAccessor({validator:i,directiveScope:n}),angular.element(e).on("keydown",function(){n.$apply(function(){n.registerForm.email.$setValidity(r,!0),n.emailFocus=!0}),t.clearErrors(n.registerErrors)}),n.$watch("model",function(e,t){(e=e&&e.toLowerCase().replace(/\s+/g,""))!==t&&(n.isEmailChecked=!1)})}}}]),angular.module("gmgApp").directive("signupPasswordInput",["ErrorHandler",function(n){return{restrict:"E",scope:{model:"=model",passwordLabel:"=passwordLabel",registerForm:"=registerForm",requiredErrorMessage:"=requiredErrorMessage",minimumErrorMessage:"=minimumErrorMessage",maximumErrorMessage:"=maximumErrorMessage",verticalLayout:"=verticalLayout",registerErrors:"=registerErrors",mdLayoutControlLabel:"=mdLayoutControlLabel",mdLayoutFormControl:"=mdLayoutFormControl"},templateUrl:"//images.greenmangaming.com/static/templates/directives/signup_password_input.b75726f4f.html",link:function(e,t){e.passwordFocus=!1;t=t.find("input");angular.element(t).on("blur",function(){e.$apply(function(){e.passwordFocus=!1})}),angular.element(t).on("keydown",function(){e.$apply(function(){e.passwordFocus=!0}),n.clearErrors(e.registerErrors)})}}}]),angular.module("gmgApp").directive("signupUsernameInput",["ApiService","ErrorHandler","USERNAME_REGEX","NOT_USERNAME_REGEX","USERNAME_START_REGEX","INVALID_USERNAME_PATTERN","UNAVAILABLE_USERNAME","ObjectValidator",function(i,o,a,s,l,c,u,d){function t(t){var e,n,r;t.usernameFocus=!1,!t.isCheckingUsername&&(t.isCheckingUsername=!0,(e=t).registerForm.username.$setValidity(u,!0),e.registerForm.username.$setValidity(c,!0),d.isNullOrEmptyString(e.model)?e.isCheckingUsername=!1:(n=new RegExp(a).test(e.model),r=new RegExp(l).test(e.model),!(!n||!r)||(e.verticalLayout?e.registerForm.username.$setValidity(c,!1):(e.registerForm.username.$setValidity(c,!1),e.usernameError=r?p(e):e.mustNotStartWithUnderscoreError),e.isCheckingUsername=!1)))&&(t.registerForm.username.$setValidity(c,!0),t.usernameCheckPromise=i.checkUsername(t.model).then(function(){t.registerForm.username.$setValidity(u,!0)},function(e){t.usernameError=o.getErrorMessage(e),t.registerForm.username.$setValidity(u,!1),t.isRegistrationActivity=!1}).catch(function(e){t.errorHandler({err:e}),t.registerForm.username.$setValidity(u,!1),t.isRegistrationActivity=!1}).finally(function(){t.isUsernameChecked=!0,t.isCheckingUsername=!1}))}var p=function(e){if(void 0!==e.model){var t=n(e);if(t)return e.invalidUsernameCharactersError+" "+t+"."}return""},n=function(e){var t="",n=!1,r=e.model.match(s);return r?(r.forEach(function(e){n=n||" "===e," "===e||t.includes(e)||(t+=e)}),n&&(t+=(t?" "+e.orText+" ":"")+e.spacesText),t):null};return{restrict:"E",scope:{model:"=model",usernameLabel:"@usernameLabel",registerForm:"=registerForm",invalidUsernamePatternError:"@invalidUsernamePatternError",requiredErrorMessage:"@requiredErrorMessage",verticalLayout:"=verticalLayout",errorHandler:"&",usernameCheckPromise:"=usernameCheckPromise",registerErrors:"=registerErrors",validationAccessor:"&validationAccessor",isRegistrationActivity:"=isRegistrationActivity",isUsernameChecked:"=isUsernameChecked",mdLayoutControlLabel:"=mdLayoutControlLabel",mdLayoutFormControl:"=mdLayoutFormControl",invalidUsernameCharactersError:"@invalidUsernameCharactersError",mustNotStartWithUnderscoreError:"@mustNotStartWithUnderscoreError",orText:"@orText",spacesText:"@spacesText"},templateUrl:"//images.greenmangaming.com/static/templates/directives/signup_username_input.20dde4b66.html",link:function(n,e){n.usernameFocus=!1;e=e.find("input");angular.element(e).on("blur",function(){n.$apply(function(){t(n)})}),angular.element(e).on("keydown",function(){n.$apply(function(){n.registerForm.username.$setValidity(c,!0),n.registerForm.username.$setValidity(u,!0),n.usernameFocus=!0}),o.clearErrors(n.registerErrors)}),n.$watch("model",function(e,t){e!==t&&(n.isUsernameChecked=!1)}),n.validationAccessor({validator:t,directiveScope:n})}}}]),angular.module("gmgApp").directive("simplifiedClickWithSpinner",[function(){return{restrict:"A",transclude:!0,template:'<span ng-hide="isSpinning"><ng-transclude></ng-transclude></span>',scope:{simplifiedClickWithSpinner:"&?",isSpinning:"=?"},link:function(t,n,e){function r(){t.$apply(function(){t.isSpinning=!0;var e=t.simplifiedClickWithSpinner();e?e.finally(function(){t.isSpinning=!1}):t.isSpinning=!1})}var i=!1,o=angular.element('<span class="glyphicon glyphicon-refresh"></span>');t.$watch("isSpinning",function(e){!i&&e?(n.css("min-width",n.innerWidth()),n.append(o),i=!0,n.addClass("spinning")):i&&!e&&(n.find("span.glyphicon").remove(),i=!1,n.removeClass("spinning"),e=n.prop("style"))&&e.removeProperty("min-width")});n.click(function(e){e.preventDefault(),e.stopPropagation(),r()}),e.enterWithSpinner&&angular.element("body").on("keypress",e.enterWithSpinner,function(e){13===e.which&&(e.preventDefault(),e.stopPropagation(),r())})}}}]),angular.module("gmgApp").directive("socialSharePopUp",["$window",function(n){var r=500,i=300;return{restrict:"A",link:function(e,t){t.click(function(e){e.preventDefault();var t,e=$(this).attr("href");t=screen.width/2-r/2,n.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+r+",height="+i+",top="+(screen.height/2-i/2)+",left="+t)})}}}]),angular.module("gmgApp").directive("steamRedemption",function(){return{controller:"steamController",restrict:"E",scope:{redeemOnButtonText:"@?",steamUrl:"@?",keyValue:"=?",isPurchaseHistoryMode:"=?",isCheckoutOrderMode:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/steam-redemption.88b1fa7fa.html"}}),angular.module("gmgApp").directive("tabletSearch",["$window","$document","ScreenSize",function(s,l,c){return{restrict:"A",link:function(n,r){function e(){var e=n.isTablet;n.isTablet=c.is("sm"),e===n.isTablet||n.isTablet||o()}var t=r.find(".search-input"),i=r.find(".search-icon"),o=function(){t.removeClass("show"),l.unbind("mousedown",a).unbind("mouseup",a),n.searching=!1,i.removeClass("glyphicon-ok")},a=function(e){var t;!n.isTablet||(t=r).is(e.target)||0!==t.has(e.target).length||o()};$(s).resize(e),e(),r.click(function(){n.isTablet&&(t.addClass("show").focus(),l.bind("mousedown",a).bind("mouseup",a),n.searching=!0,i.addClass("glyphicon-ok"))})}}}]),angular.module("gmgApp").directive("tealium",["Tealium","$window","PageType","$q",function(r,i,o,a){return{restrict:"A",link:function(){var n=!1,e=a.defer(),e=(e.resolve(),e.promise);if(!i.utag||"True"===i.utag.data.Utag_PreLoad_Wait)try{e=r.getUtagData().then(function(e){i.utag_data=e})}catch(e){console.log(e)}var t=o.getWhenReady().then(function(e){var t=a.defer();return(n=e===o.CONFIRMATION_PAGE)?r.getOrderToTrackData().then(function(e){i.order_to_track=e,t.resolve()}):t.resolve(),t.promise});a.all([e,t]).then(function(){i.utag&&n&&(i.utag.data.Utag_PreLoad_Wait="False",angular.extend(i.utag.data,i.utag_data),i.utag.view(i.utag_data),i.utag.link(i.order_to_track))})}}}]),angular.module("gmgApp").directive("tooltip",[function(){return{restrict:"E",link:function(e,t,n){function r(){t.find(".gmg-tooltip").removeClass("in"),o=!1}function i(){t.find(".gmg-tooltip").addClass("in"),o=!0}var n='<div class="gmg-tooltip" role="tooltip"><img class="icon-info" src="/static/img/css/icon-moreinfo.png"><div class="gmg-tooltip-inner">'+n.text+'</div><span class="glyphicon glyphicon-menu-up icon-arrow-up" aria-hidden="true"></span></div>',o=(t.append(n),!0);t.click(function(){return(o?r:i)()}),t.mouseenter(i),t.mouseleave(r)},scope:!1}}]),angular.module("gmgApp").directive("tooltipTrigger",[function(){return{restrict:"A",link:function(e,t,n){t.attr("data-toggle","tooltip"),t.attr("title",n.tooltipTrigger),t.attr("data-placement",n.messagePosition),t.tooltip({trigger:n.messageTrigger,container:"body",template:'<div class="tooltip copy-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',html:!0,delay:{show:0,hide:500}})}}}]),angular.module("gmgApp").directive("trackSearchHit",["ApiService","ObjectValidator","$q",function(i,o,a){return{restrict:"A",scope:{hitId:"@",query:"@",trackId:"@"},link:function(t,n){function r(){var e;return o.isNullOrEmptyString(t.hitId)||o.isNullOrEmptyString(t.query)||o.isNullOrEmptyString(t.trackId)?a.resolve():(e={hitId:t.hitId,trackId:t.trackId,query:t.query},i.trackSearchHit(e))}n.click(function(e){var t=e.ctrlKey||!o.isNullOrUndefined(e.browserEvent)&&e.browserEvent.ctrlKey;t||e.preventDefault(),r().then(function(){t||(window.location.href=n.attr("href"))})}),n.mouseup(function(e){1!==e.which&&r()})}}}]),angular.module("gmgApp").directive("upsellProduct",function(){return{controller:"UpsellProductController",restrict:"E",scope:{upsellProduct:"=?",currency:"=?"},templateUrl:"//images.greenmangaming.com/static/templates/directives/upsell_product.8273cd59f.html"}}),angular.module("gmgApp").directive("dateInFuture",[function(){return{restrict:"A",require:"ngModel",scope:!1,link:function(t,e,n,r){var i=moment(new Date),o=t.$eval(n.dateInFuture);function a(e){var t=0<=moment(new Date(e,o-1,1)).endOf("month").diff(i,"days")||!e||!o;return r.$setValidity("dateInFuture",t),e}t.$watch(n.dateInFuture,function(e){o=e,a(t.$eval(n.ngModel))}),r.$parsers.push(a)}}}]),angular.module("gmgApp").directive("dateInPast",[function(){return{restrict:"A",require:"ngModel",scope:!1,link:function(t,e,n,i){var o=moment(),a=t.$eval(n.dateInPast);function r(e){i.$setValidity("validDateSelection",!0),i.$setValidity("dateInPast",!0);var t=null!=a,n=null!=e,r=!t&&!n,t=t&&n||r;return i.$setValidity("validDateSelection",t),t&&(n=moment(new Date(e,a-1,1)),t=0<=o.diff(n,"days")||r,i.$setValidity("dateInPast",t)),e}t.$watch(n.dateInPast,function(e){a=e,r(t.$eval(n.ngModel))}),i.$parsers.push(r)}}}]),angular.module("gmgApp").directive("luhnCheck",["Utils",function(i){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$parsers.push(function(e){return r.$setValidity("luhnCheck",i.isCardNumberValid(e)),e})}}}]),angular.module("gmgApp").directive("minimumAge",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i,o,a,s=parseInt(n.minAgeValue)||0;function l(e){a=parseInt(e);var t=((e,t,n)=>{if(!(isNaN(e)||isNaN(t)||isNaN(n)))return(n=moment(new Date(n,t-1,e)))<(t=moment())?t.diff(n,"years"):-1})(i,o,a);return r.$setValidity("minimumAge",void 0===t||s<=t),e}e.$watch(n.minimumAge,function(e){!e||i===e.day&&o===e.month&&a===parseInt(e.year)||(i=e.day,o=e.month,l(e.year))},!0),r.$parsers.push(l)}}}]),angular.module("gmgApp").directive("passwordConfirm",[function(){return{restrict:"A",require:"ngModel",scope:!1,link:function(e,t,n,r){var i=e.$eval(n.passwordConfirm);e.$watch(n.passwordConfirm,function(e){i=e,r.$validate()});r.$validators.match=function(e,t){return t===i||(!t||!i)}}}}]),angular.module("gmgApp").directive("securityCodeLength",["Utils",function(a){return{restrict:"A",require:"ngModel",link:function(t,e,n,r){var i=t.$eval(n.securityCodeLength);function o(e){var t,n;if(void 0!==e)return t=a.getCreditCardType(i),n=e.length,r.$setValidity("securityCodeLength",("amex"===t?4:3)===n),e}t.$watch(n.securityCodeLength,function(e){i=e,o(t.$eval(n.ngModel))}),r.$parsers.push(o)}}}]),angular.module("gmgApp").directive("stepValidation",[function(){return Number.isNaN=Number.isNaN||function(e){return e!=e},{restrict:"A",require:"?ngModel",link:function(e,t,n,r){var i,o;(angular.isDefined(n.min)||n.ngMin)&&n.$observe("min",function(e){i=a(e),r.$validate()});(angular.isDefined(n.step)||n.ngStep)&&(r.$validators.step=function(e,t){return r.$isEmpty(t)||angular.isUndefined(o)||((e,t,n)=>{var r,i,o,a=!c(e=Number(e)),s=!c(t),l=!c(n);return(a||s||l)&&(i=a?u(e):0,o=s?u(t):0,r=l?u(n):0,i=Math.max(i,o,r),o=Math.pow(10,i),e*=o,t*=o,n*=o,a&&(e=Math.round(e)),s&&(t=Math.round(t)),l)&&(n=Math.round(n)),(e-t)%n==0})(t,i||0,o)},n.$observe("step",function(e){o=a(e),r.$validate()}))}};function c(e){return(0|e)===e}function a(e){return angular.isDefined(e)&&!angular.isNumber(e)&&(e=parseFloat(e)),Number.isNaN(e)?void 0:e}function u(e){var t=e.toString(),n=t.indexOf(".");if(-1!==n)return t.length-n-1;if(-1<e&&e<1){n=/e-(\d+)$/.exec(t);if(n)return Number(n[1])}return 0}}]),angular.module("gmgApp").directive("wantButton",["$rootScope","MODALS","WantService",function(a,s,l){return{restrict:"A",link:function(n,e){var t=e.find("[want]"),r=e.find("[unwant]"),i=angular.element('<span class="glyphicon glyphicon-refresh inline-spinning" style="color: white; display: none;"></span>');function o(){t.toggle(!n.loading&&!n.isWanted),r.toggle(!n.loading&&n.isWanted),i.toggle(n.loading)}e.append(i),n.loading=!0,o(),n.$on("want:loading",function(e,t){t.code===n.wantButton&&(n.loading=t.status,o())}),n.$on("want:toggle",function(e,t){t.code===n.wantButton&&(n.isWanted=t.status,o())}),n.$watch("wantButton",function(e,t){e!==t&&l.isWanted(n.wantButton).then(function(e){n.isWanted=e,o()})}),e.on("click",function(){n.loading||(a.$broadcast(s.EVENTS.OPEN_SIGN_IN_MODAL),l.toggleWant(n.wantButton,n.wantButtonPrice,n.wantButtonCurrency))})},scope:{wantButton:"=",wantButtonPrice:"=",wantButtonCurrency:"="}}}]).directive("loadWantButton",["$parse","WantService",function(i,o){return{restrict:"A",link:function(e,t,n){var r=i(n.loadWantButton)(e);n.hasOwnProperty("hover")?t.one("mouseenter",function(){o.isWanted(r)}):o.isWanted(r)}}}]),angular.module("gmgApp").directive("whirligigCarousel",["$compile","MODALS","DESTROY_EVENT_NAME",function(s,l,c){return{restrict:"A",link:function(n,e){e.removeClass("owl-static").addClass("owl-carousel");function t(e){var t=(e=e?r.find(".owl-item").eq(e.item.index):r.find(".owl-item.active")).find(".item").attr("data-edge-panel-color"),e=0<e.find(".product-block").length;n.$emit("slideChange",{color:t,hasProductInfoBar:e})}e.on("initialized.owl.carousel",function(){e.find(".owl-item.cloned").each(function(e,t){s(t)(n)})});var r=e.owlCarousel({navText:["<i class='glyphicon glyphicon-menu-left arrow-left'></i>","<i class='glyphicon glyphicon-menu-right arrow-right'></i>"],nav:!0,items:1,loop:!0,autoplay:!0,autoplayHoverPause:!0,autoplaySpeed:550,autoplayTimeout:3e3,fallbackEasing:"linear",navSpeed:550,dotsSpeed:1,responsiveRefreshRate:0,slideTransition:"ease-in-out",animateOut:""}),i=(t(),r.on("translate.owl.carousel",t),!1),o=(e.find(".prevent-drag").on("touchstart mousedown",function(e){e.stopPropagation()}),$(e).mouseover(function(){e.trigger("stop.owl.autoplay")}),$(e).mouseout(function(){i||e.trigger("play.owl.autoplay")}),$(".owl-dot").click(function(){a()}),$(".owl-next").mouseout(function(){a()}),$(".owl-prev").mouseout(function(){a()}),$(".owl-prev").addClass("btn-carousel btn-arrow-left"),$(".owl-next").addClass("btn-carousel btn-arrow-right"),n.$on(l.EVENTS.OPEN_ALGOLIA_SEARCH_MODAL,function(){a()}));function a(){e.trigger("stop.owl.autoplay"),i=!0}n.$on(c,function(){o()}),setTimeout(function(){e.data("owl.carousel").options.autoplayTimeout=5e3,e.trigger("refresh.owl.carousel")},3e3)}}}]),angular.module("gmgApp").directive("wishedThirdOneBlock",function(){return{restrict:"E",templateUrl:"//images.greenmangaming.com/static/templates/directives/wished-third-one-block.a206a1bd8.html"}}),angular.module("gmgApp").directive("wishlistDealBlock",function(){return{restrict:"E",templateUrl:"//images.greenmangaming.com/static/templates/directives/wishlist-deal-block.eb62ee88e.html",product:"="}}),angular.module("gmgApp").directive("youtubeVideo",["$window","YoutubeApiLoader",function(e,r){return{restrict:"E",scope:{stateChange:"&",playerReady:"&",playbackQualityChange:"&",playbackRateChange:"&",error:"&",apiChange:"&",videoId:"@",width:"@",height:"@",autoHide:"@",autoPlay:"@",ccLoadPolicy:"@",color:"@",controls:"@",disableKb:"@",enableJsApi:"@",end:"@",fs:"@",hl:"@",ivLoadPolicy:"@",list:"@",listType:"@",loop:"@",modestBranding:"@",origin:"@",playerApiId:"@",playlist:"@",playsinline:"@",rel:"@",showInfo:"@",start:"@",theme:"@"},template:"<div></div>",link:function(t,e,n){r.ready.then(function(){t.player=new YT.Player(e.children()[0],{playerVars:{autohide:t.autoHide,autoplay:t.autoPlay,cc_load_policy:t.ccLoadPolicy,color:t.color,controls:t.controls,disablekb:t.disableKb,enablejsapi:t.enableJsApi,end:t.end,fs:t.fs,hl:t.hl,iv_load_policy:t.ivLoadPolicy,list:t.list,listType:t.listType,loop:t.loop,modestbranding:t.modestBranding,origin:t.origin,playerapiid:t.playerApiId,playlist:t.playlist,playsinline:t.playsinline,rel:t.rel,showinfo:t.showInfo,start:t.start,theme:t.theme},height:t.height,width:t.width,videoId:t.videoId,events:{onReady:function(e){t.thumbnailQualityAdjusted||userData.AutoPlay||($(e.target.a).attr("src",$(e.target.a).attr("src")+"&vq=hd720"),t.thumbnailQualityAdjusted=!0),t.playerReady({event:e})},onStateChange:function(e){t.stateChange({event:e})},onPlaybackQualityChange:function(e){t.playbackQualityChange({event:e})},onPlaybackRateChange:function(e){t.playbackRateChange({event:e})},onError:function(e){t.error({event:e})},onApiChange:function(e){t.apiChange({event:e})}}})})}}}]),angular.module("gmgApp").factory("AlgoliaCustomToggleRefinement",[function(){return instantsearch.connectors.connectToggleRefinement(function(t,e){var n=t.value.isRefined?"checked":"",r=t.value.onFacetValue.count||"";e||r?(e&&t.widgetParams.container.addEventListener("change",function(e){t.refine({isRefined:!e.target.checked})}),t.widgetParams.container.innerHTML='<label class="ais-RefinementList-label"> <input type="checkbox" class="ais-RefinementList-checkbox"'+n+'><div class="item-wrap"><span class="ais-RefinementList-labelText">'+t.widgetParams.checkboxLabel+'</span><span class="ais-RefinementList-count"> '+r+"</span ><div> </label>"):t.widgetParams.container.innerHTML=""})}]),angular.module("gmgApp").factory("ApiService",["$rootScope","$http","$q","$resource","Error","Product","$window","httpResponseInterceptor","$location","LOCAL_HOST","ObjectValidator","$timeout",function(t,o,e,n,r,i,a,s,l,c,u,d){var c=l.host()===c,p=u.isNullOrUndefined(GMGSettings.apiServiceUrl)?GMGSettings.apiBaseUrl:GMGSettings.apiServiceUrl,u=GMGSettings.backendApiUrl;function h(e){for(var n=e,r=429,t=void 0,e=void 0,i=n(),o=e||500,a=o,s=1;s<(t||5);s++)i=i.catch(function(e){var t;if(!r||Array.isArray(r)&&r.includes(e.status)||r===e.status)return t=o,o+=a,d(n,a=t);throw e});return i}var f={dataUpdatedEvent:"apiDataUpdated",urls:{userStatus:p+"/user_info",userGames:p+"/my_games",purchaseHistory:p+"/purchase_history",activateUplayKey:p+"/activate_uplay_key",activatePrePurchasedUplayKey:p+"/activate_pre_purchased_uplay_key",gameGiftingHistory:p+"/gift_game_history",hasBought:p+"/has_bought",changeQuantity:p+"/cart/change_quantity",removeVoucher:p+"/remove_voucher",addProduct:p+"/cart/add_to_basket/",getRestoreCartError:p+"/cart/restore_cart_error/",applyCredit:p+"/cart/add_credit",removeCredit:p+"/cart/clear_credit",cancelOrder:p+"/cart/cancel_order",userProfile:p+"/user_profile",updateEmail:p+"/update_email",updateDateOfBirth:p+"/update_dateOfBirth",changePassword:p+"/change_password",updateBillingAddress:p+"/update_billing_address",countryStatesList:p+"/list_country_states",countries:p+"/list_countries",quickSearch:p+"/quick_search_results/",search:p+"/search_results",register:p+"/register",thirdPartyRegister:p+"/third_party_register",signIn:p+"/sign_in",phoneSignIn:p+"/phone_sign_in",logout:p+"/log_out",updateNewsletterOptIn:p+"/update_newsletter_opt_in",gdprUpdateNewsletterOptIn:p+"/gdpr_update_newsletter_opt_in",reviewsBySku:p+"/query_reviews_by_sku/:skuId/:bookmark",reviewsByUser:p+"/query_reviews_by_user/:cloudNineId/:bookmark",reviewsByUsername:p+"/query_reviews_by_username/:username/:bookmark",postReview:p+"/post_review",postReviewVote:p+"/vote_review",deleteReviewVote:p+"/remove_review_vote",canUserReviewTheGame:p+"/can_user_review_the_game",paymentMethods:p+"/payment_methods",deleteLineItem:p+"/cart/delete_lineitem",pdpDetails:p+"/pdp_details",resetPassword:p+"/password/reset",resetPasswordCodeVerify:p+"/password/verify-password-reset-code",forgottenPasswordEmail:p+"/password/forgotten/email",forgottenPasswordSms:p+"/password/forgotten/sms",want:p+"/wants/want",unwant:p+"/wants/unwant",wantlist:p+"/wants/wantlist",getWishedGameForThirdOneblock:p+"/wants/get_wished_game_for_third_one_block",getWishlistDealBlockGames:p+"/wants/get_wishlist_deal_block_games",wantsForGame:p+"/wants/wants_for_game",isWanted:p+"/wants/is_wanted",areGamesWanted:p+"/wants/are_games_wanted",placeOrder:p+"/place_order",proceedToPayment:p+"/proceed_to_payment",saveCart:p+"/save_cart",resendVerification:p+"/resend_verification",isBillingAddressValid:p+"/is_billing_address_valid",redeemLazyVoucher:p+"/redeem_lazy_voucher",redeemLazyVoucherOffer:p+"/redeem_lazy_voucher_offer",setCommunityDetails:p+"/community/set_community_details",redeemGiftCardOutOfBasket:p+"/redeem_gift_card",linkAccount:p+"/mobile_social_linking",getLinkedAccounts:p+"/get_linked_accounts",customMessage:p+"/get_custom_message",checkUsername:p+"/check_username",greenGuardVerifyUser:p+"/green_guard/verify",greenGuardResendCode:p+"/green_guard/resend_code",getCommunityDetails:p+"/community/get_community_details",avatarS3FormInfo:p+"/avatar-aws-s3-form",setAvatar:p+"/community/set_avatar",gamer:u+"/gamer/",giftcardRedemptionHistory:p+"/get_gift_card_redemption_history",setDefaultSettings:p+"/setDefaultSettings",clearSettings:p+"/clearSettings",postPdpUrlsFromAppIdsEndpoint:p+"/pdp_urls",cancelPayPalBillingAgreement:p+"/payment_methods/cancel_paypal_billing_agreement",getPaypalClientId:p+"/payment_methods/get_paypal_client_id",authorizePayPalOrder:p+"/authorize_paypal_order",applyPromotionalCodeInCart:p+"/apply_promotional_code_in_cart",getGameDetails:p+"/gift_game_details",redeemGift:p+"/gift_game_redeem",getCommunicationPreferences:p+"/get_communicationpreferences",setCommunicationPreferences:p+"/set_communicationpreferences",cancelPendingOrder:p+"/cancel_pending_order",getPendingOrdersByUser:p+"/get_pending_orders_by_user",generateOfferVoucherCode:p+"/generate_offer_voucher",getProfileBackgrounds:p+"/get_profile_backgrounds",setProfileBackground:p+"/set_profile_background",spinWheel:p+"/spin_wheel",applyWheelVoucher:p+"/apply_wheel_voucher",getPrizeLevels:p+"/get_prize_levels",gameStats:(c?p:u)+"/gameplay/",getCurrentCampaign:p+"/current_campaign",getBannerItemInfo:p+"/banner_item_info",trackSearchHit:p+"/track_search_hit",hasAnyOwnedGames:p+"/has_any_owned_games",redirectCustomMessage:p+"/twitch/redirect_custom_message",boxKeys:p+"/box_keys",switchLanguageContext:p+"/switch_language_context",setAutoplay:p+"/community/set_autoplay",pdpRegionalRestrictions:p+"/pdp_regional_restrictions",getLinkInfo:p+"/get_link_info",unlinkNetwork:p+"/unlink_network",setDateOfBirth:p+"/set_date_of_birth",facebookLoginCallback:p+"/facebook/facebook_login_callback",clearTooYoung:p+"/clear_too_young",getSsoInfo:p+"/get_sso_info",deleteSso:p+"/delete_sso",userXp:p+"/my_xp",getBlizzardProfile:p+"/blizzard/get_user_info",getAssociatedProducts:p+"/get_associated_products",activateBlizzardKey:p+"/activate_blizzard_key",activatePrePurchasedBlizzardKey:p+"/activate_pre_purchased_blizzard_key",getApplePayTransactionInfo:p+"/get_apple_pay_transaction_info",getApplePayMerchantSession:p+"/create_apple_pay_merchant_session",activateZtormKey:p+"/activate_ztorm_key",activatePrepurchasedZtormKey:p+"/activate_pre_purchased_ztorm_key",getUplayReturnPage:p+"/get_uplay_return_page",getUplayThirdPartyCookiesDisabledRedirectPage:p+"/get_uplay_third_party_cookies_disabled_redirect_page",getEpicProfile:p+"/epic/get_user_info",clearEpicProfile:p+"/epic/clear_user_info",activateEpicPrepurchaseKey:p+"/activate_pre_purchased_epic_key",activateEpicKey:p+"/activate_epic_key",getCommunityImageAwsS3FormInfo:p+"/get_community_image_aws_s3_form_info",getForumSubscriptions:p+"/community/get_forum_subscriptions",addForumSubscription:p+"/community/add_forum_subscription",removeForumSubscription:p+"/community/remove_forum_subscription",claimAndApplySecretVouchers:p+"/claim_and_apply_secret_vouchers",claimSecretVouchers:p+"/claim_secret_vouchers",getSecretOfferIds:p+"/get_secret_voucher_offers",areSecretVoucherOffersExpended:p+"/are_secret_voucher_offers_expended",getSecretVoucherOfferDiscountsIfClaimed:p+"/get_secret_voucher_offer_discounts_if_claimed",getPhoneNumber:p+"/get_phone_number",setPhoneNumber:p+"/set_phone_number",validateAndSendVerificationCode:p+"/validate_phone_number_and_send_verification_code",getCommsMethodPreferences:p+"/get_comms_method_preferences",setCommsMethodPreferences:p+"/set_comms_method_preferences",optOutCommsPref:p+"/opt_out_comms_pref",getIndexName:p+"/index_name",reportAlgoliaSearch:p+"/report_algolia_search",processPaymentAdditionalResponse:p+"/process_payment_additional_response",logoutIfCognitoEnabledAndUserNotMigrated:p+"/logout_if_cognito_enabled_and_user_not_migrated",isFeatureSwitchActive:p+"/is_feature_switch_active",isFeatureSwitchActiveByPhone:p+"/is_feature_switch_active_by_phone",isFeatureSwitchActiveByEmail:p+"/is_feature_switch_active_by_email",isFeatureSwitchActiveByCloud9Id:p+"/is_feature_switch_active_by_cloud9id",cognitoConfirmForgotPassword:p+"/password/cognito_confirm_forgot_password",verifyCognitoEmail:p+"/verify_cognito_email",confirmCognitoEmailSignup:p+"/confirm_cognito_email_signup",confirmCognitoPhoneNumberSignup:p+"/confirm_cognito_phone_number_signup",resendConfirmationCode:p+"/resend_confirmation_code",resendVerificationCode:p+"/resend_verification_code",forgottenPasswordCognitoEmail:p+"/password/forgotten/cognito/email",forgottenPasswordCognitoSms:p+"/password/forgotten/cognito/sms",resendConfirmationCodePhone:p+"/resend_confirmation_code_phone"},getApplePayMerchantSession:function(e,t){return h(function(){return o({url:f.urls.getApplePayMerchantSession,method:"GET",params:{merchantId:e,displayName:t}})})},pdpRegionalRestrictions:function(e){return o({url:f.urls.pdpRegionalRestrictions,method:"GET",params:{sku:e}})},getApplePayTransactionInfo:function(){return o({url:f.urls.getApplePayTransactionInfo,method:"GET"})},setDateOfBirth:function(e){return o.post(f.urls.setDateOfBirth,e)},trackSearchHit:function(e){return o.post(f.urls.trackSearchHit,e)},activateUplayKey:function(e){return o.post(f.urls.activateUplayKey,e)},activatePrePurchasedUplayKey:function(e){return o.post(f.urls.activatePrePurchasedUplayKey,e)},authorizePayPalOrder:function(e){return h(function(){return o.post(f.urls.authorizePayPalOrder,e)})},gamerDetails:function(e){return o.post(f.urls.gamer,e)},postPdpUrlsFromAppIds:function(e){return o.post(f.urls.postPdpUrlsFromAppIdsEndpoint,e)},clearSettings:function(){return o.post(f.urls.clearSettings)},setDefaultSettings:function(e){return o.post(f.urls.setDefaultSettings,e)},updateApiData:function(){a.getUserInfo(function(e){t.$broadcast(f.dataUpdatedEvent,e)},function(e){s.responseError(e)})},updateBillingAddress:function(e){return o.post(f.urls.updateBillingAddress,e)},placeOrder:function(e){return h(function(){return o.post(f.urls.placeOrder,e)})},deleteLineItem:function(e){return h(function(){return o.post(f.urls.deleteLineItem,e)})},changeItemQuantity:function(e){return h(function(){return o.post(f.urls.changeQuantity,e)})},applyCredit:function(e){return o.post(f.urls.applyCredit,{credit:e})},removeCredit:function(){return h(function(){return o.post(f.urls.removeCredit,{})})},cancelOrder:function(){return h(function(){return o.post(f.urls.cancelOrder,{})})},removeVoucher:function(e){return o.post(f.urls.removeVoucher,{code:e})},redeemGiftCardOutOfBasket:function(e){return o.post(f.urls.redeemGiftCardOutOfBasket,{code:e})},redeemPromotionalCodeInCart:function(e){return o.post(f.urls.applyPromotionalCodeInCart,{code:e})},greenGuardVerifyUser:function(e){return o.post(f.urls.greenGuardVerifyUser,{code:e})},greenGuardResendCode:function(){return o.get(f.urls.greenGuardResendCode)},addProduct:function(e){var t={catalogId:e};return h(function(){return o.post(f.urls.addProduct,t)})},getRestoreCartError:function(){return h(function(){return o.get(f.urls.getRestoreCartError)})},userProfile:function(){return o.get(f.urls.userProfile)},updateEmail:function(e){return o.post(f.urls.updateEmail,e)},updateDateOfBirth:function(e){return o.post(f.urls.updateDateOfBirth,e)},changePassword:function(e){return o.post(f.urls.changePassword,e)},countriesList:function(){return o.get(f.urls.countries)},countryStatesList:function(e){return o.post(f.urls.countryStatesList,e)},quickSearch:function(e){return o.get(f.urls.quickSearch.concat(e)).then(function(e){return{products:e.data.results.map(i.initForQuickSearch),trackId:e.data.trackId}})},search:function(e){return o.post(f.urls.search,e)},getIndexName:function(){return o.get(f.urls.getIndexName)},register:function(e){return o.post(f.urls.register,e)},thirdPartyRegister:function(e){return o.post(f.urls.thirdPartyRegister,e)},signIn:function(e){return o.post(f.urls.signIn,e)},phoneSignIn:function(e){return o.post(f.urls.phoneSignIn,e)},logout:function(){return o.post(f.urls.logout)},reviewsBySku:function(e,t){return n(f.urls.reviewsBySku,{skuId:e,bookmark:t})},reviewsByUser:function(e,t){return n(f.urls.reviewsByUser,{cloudNineId:e,bookmark:t})},reviewsByUsername:function(e,t){return n(f.urls.reviewsByUsername,{username:e,bookmark:t})},postReview:function(e){return o.post(f.urls.postReview,e)},canUserReviewTheGame:function(e){return o({url:f.urls.canUserReviewTheGame,method:"GET",params:{gameVariantCode:e}})},postReviewVote:function(e){return o.post(f.urls.postReviewVote,e)},deleteReviewVote:function(e){return o.post(f.urls.deleteReviewVote,e)},getPaymentDetails:function(e,t,n){return h(function(){return o({url:f.urls.paymentMethods,method:"GET",params:{countryCode:e,paymentMethodId:t,paymentMethodName:n}})})},updateNewsletterOptIn:function(e,t){return o.post(f.urls.updateNewsletterOptIn,{optIn:e,source:t})},gdprUpdateNewsletterOptIn:function(e){return o.post(f.urls.gdprUpdateNewsletterOptIn,e)},removeCard:function(e){return o.delete(f.urls.paymentMethods+("/"+e))},getUserInfo:function(){return o.get(f.urls.userStatus)},getUserGames:function(e){return o.get(f.urls.userGames,{params:e})},getUserXP:function(){return o.get(f.urls.userXp)},getPurchaseHistory:function(e){return o.get(f.urls.purchaseHistory,{params:e})},gameGiftingHistory:function(e){return o.get(f.urls.gameGiftingHistory,{params:e})},hasBought:function(e){e="?"+$.param({gameVariantCode:e});return o({url:f.urls.hasBought+e,method:"GET"})},getCurrentCampaign:function(e){e="?"+$.param({gameVariantCode:e});return o({url:f.urls.getCurrentCampaign+e,method:"GET"})},pdpDetails:function(e){return o.post(f.urls.pdpDetails,e)},resetPassword:function(e){return o.post(f.urls.resetPassword,e)},resetPasswordCodeVerify:function(e){return o.post(f.urls.resetPasswordCodeVerify,e)},forgottenPasswordEmail:function(e){return o.post(f.urls.forgottenPasswordEmail,e)},forgottenPasswordSms:function(e){return o.post(f.urls.forgottenPasswordSms,e)},forgottenPasswordCognitoEmail:function(e){return o.post(f.urls.forgottenPasswordCognitoEmail,e)},forgottenPasswordCognitoSms:function(e){return o.post(f.urls.forgottenPasswordCognitoSms,e)},want:function(e){return o.post(f.urls.want,e)},unwant:function(e){return o.post(f.urls.unwant,e)},getAvatarAwsS3FormInfo:function(e){e="?"+$.param({fileName:e});return o({url:f.urls.avatarS3FormInfo+e,method:"GET"})},setUserAvatar:function(e,t,n){return o.post(f.urls.setAvatar,{bucket:e,key:t,username:n})},wantsForGame:function(e){e="?"+$.param({gameVariantCode:e});return o({url:f.urls.wantsForGame+e,method:"GET"})},wantlist:function(e,t,n){e="?"+$.param({username:e,limit:t,bookmark:n});return o({url:f.urls.wantlist+e,method:"GET"})},getWishedGameForThirdOneblock:function(e){return o({url:f.urls.getWishedGameForThirdOneblock,method:"GET",params:{contentLinkIds:e}})},getWishlistDealBlockGames:function(e,t){return o({url:f.urls.getWishlistDealBlockGames,method:"GET",params:{limit:e,contentLinkIds:t}})},isWanted:function(e){e="?"+$.param({gameVariantCode:e});return o({url:f.urls.isWanted+e,method:"GET"})},areGamesWanted:function(e){e="?"+$.param({gameVariantCodes:e});return o({url:f.urls.areGamesWanted+e,method:"GET"})},getAreGamesWantedApiServiceUrl:function(){var e="?"+$.param({gameVariantCodes:""});return window.location.href.split("/")[0]+f.urls.areGamesWanted+e},redeemLazyVoucher:function(e,t,n){return o({url:f.urls.redeemLazyVoucher+("?o="+e+"&t="+t+"&u="+n),method:"GET"})},redeemLazyVoucherOffer:function(e){return o.post(f.urls.redeemLazyVoucherOffer,JSON.stringify({Code:e}))},getCommunityDetails:function(e){return o({url:f.urls.getCommunityDetails+("?userName="+e),method:"GET"})},setCommunityDetails:function(e,t,n,r){return o.post(f.urls.setCommunityDetails,JSON.stringify({CommunityDetails:{AvatarUrl:e,Bio:t,IsProfilePublic:n},UserName:r}))},saveCart:function(e){return o.post(f.urls.saveCart,e)},proceedToPayment:function(e){return h(function(){return o.post(f.urls.proceedToPayment,e)})},resendVerification:function(e){return o.post(f.urls.resendVerification,e)},isBillingAddressValid:function(){return o.get(f.urls.isBillingAddressValid)},giftcardRedemptionHistory:function(e,t,n,r,i){return o.post(f.urls.giftcardRedemptionHistory,{username:e,startKeyDocId:t,date:n,limit:r,descending:i})},linkAccount:function(e){return o.post(f.urls.linkAccount,e)},getLinkedAccounts:function(){return o.get(f.urls.getLinkedAccounts)},customMessage:function(e){return o.post(f.urls.customMessage,e)},checkUsername:function(e){e="?username="+encodeURIComponent(e);return o({url:f.urls.checkUsername+e,method:"GET"})},getGameDetails:function(e){return o({url:f.urls.getGameDetails+("?giftCode="+e),method:"GET"})},generateOfferVoucherCode:function(e){return o({url:f.urls.generateOfferVoucherCode,method:"GET",params:{voucherBlockReferenceId:e}})},redeemGift:function(e,t){return o.post(f.urls.redeemGift,{GiftCode:e,NewsletterOptOut:t})},getGameplay:function(e){return o.post(f.urls.gameplay,e)},getGameStats:function(e){return $.ajax({type:"POST",url:f.urls.gameStats,data:JSON.stringify(e),dataType:"json"})},cancelPayPalBillingAgreement:function(){return h(function(){return o.post(f.urls.cancelPayPalBillingAgreement)})},getPaypalClientId:function(){return h(function(){return o.get(f.urls.getPaypalClientId)})},setCommunicationPreferences:function(e){return o.post(f.urls.setCommunicationPreferences,e)},getCommunicationPreferences:function(){return o.get(f.urls.getCommunicationPreferences)},cancelPendingOrder:function(e){return h(function(){return o.post(f.urls.cancelPendingOrder,e)})},getPendingOrdersByUser:function(){return o({url:f.urls.getPendingOrdersByUser,method:"GET"})},getProfileBackgrounds:function(e,t){return o({url:f.urls.getProfileBackgrounds+("?limit="+e+"&bookmark="+t),method:"GET"})},setProfileBackground:function(e){return o.post(f.urls.setProfileBackground,{Id:e})},spinWheel:function(e,t){return o.post(f.urls.spinWheel,{WheelName:e,WheelContentId:t})},applyWheelVoucher:function(e,t){return o.post(f.urls.applyWheelVoucher,{WheelName:e,VoucherCode:t})},getPrizeLevels:function(e){return o.post(f.urls.getPrizeLevels,{WheelNames:e})},getBannerItemInfo:function(e){return o.get(f.urls.getBannerItemInfo,{params:{slideId:e}})},hasAnyOwnedGames:function(e){return o.post(f.urls.hasAnyOwnedGames,e)},redirectCustomMessage:function(e){return o.get(f.urls.redirectCustomMessage+("?returnUrl="+e))},getBlizzardProfile:function(){return o.get(f.urls.getBlizzardProfile)},activateBlizzardKey:function(e){return o.post(f.urls.activateBlizzardKey,e)},activatePrePurchasedBlizzardKey:function(e){return o.post(f.urls.activatePrePurchasedBlizzardKey,e)},getOriginIframeDetails:function(e){return o.get(p+"/get_origin_iframe_details",{params:{prepurchaseCode:e}})},getOriginAccountDetails:function(e){return o.get(p+"/get_origin_account_details",{params:{prepurchaseCode:e}})},activateZtormKey:function(e){return o.post(f.urls.activateZtormKey,e)},activatePrepurchaseZtormKey:function(e){return o.post(f.urls.activatePrepurchasedZtormKey,e)},getEpicProfile:function(){return o.get(f.urls.getEpicProfile)},clearEpicProfile:function(){return o.post(f.urls.clearEpicProfile)},activateEpicKey:function(e){return o.post(f.urls.activateEpicKey,e)},activateEpicPrepurchaseKey:function(e){return o.post(f.urls.activateEpicPrepurchaseKey,e)},facebookLoginCallback:function(e){return o.post(f.urls.facebookLoginCallback+("?returnUrl="+e))},getBoxKeys:function(e){return o.get(f.urls.boxKeys,{params:{boxId:e}})},switchLanguageContext:function(e){return o.post(f.urls.switchLanguageContext,JSON.stringify({LanguageCode:e}))},setAutoplay:function(e){return o.post(f.urls.setAutoplay,e)},getLinkInfo:function(){return o.get(f.urls.getLinkInfo)},unlinkNetwork:function(e){return o.post(f.urls.unlinkNetwork,JSON.stringify(e))},clearTooYoung:function(){return o.post(f.urls.clearTooYoung)},getSsoInfo:function(){return o.get(f.urls.getSsoInfo)},deleteSso:function(e){return o.post(f.urls.deleteSso,e)},getAssociatedProducts:function(e,t){e="?skus="+e.join();return o.get(f.urls.getAssociatedProducts+(e+="&limit="+t))},claimAndApplySecretVouchers:function(e,t){e={VoucherOfferIds:e,Source:t,PageUrl:l.absUrl().split("?")[0]};return o.post(f.urls.claimAndApplySecretVouchers,JSON.stringify(e))},claimSecretVouchers:function(e,t,n){e={VoucherOfferIds:e,GameCode:t,Source:n,PageUrl:l.absUrl().split("?")[0]};return o.post(f.urls.claimSecretVouchers,JSON.stringify(e))},areSecretVoucherOffersExpended:function(e){return o.get(f.urls.areSecretVoucherOffersExpended+"?offerIds="+e)},getSecretVoucherOfferDiscountsIfClaimed:function(e){return o.get(f.urls.getSecretVoucherOfferDiscountsIfClaimed,{params:{offerIds:e}})},getCommunityImageAwsS3FormInfo:function(e){e="?"+$.param({fileName:e});return o.get(f.urls.getCommunityImageAwsS3FormInfo+e)},getForumSubscriptions:function(){return o.get(f.urls.getForumSubscriptions)},addForumSubscription:function(e){return o.post(f.urls.addForumSubscription,JSON.stringify(e))},removeForumSubscription:function(e){return o.post(f.urls.removeForumSubscription,JSON.stringify(e))},getUplayReturnPage:function(){return o.get(f.urls.getUplayReturnPage)},getUplayThirdPartyCookiesDisabledRedirectPage:function(){return o.get(f.urls.getUplayThirdPartyCookiesDisabledRedirectPage)},getPhoneNumber:function(){return o.get(f.urls.getPhoneNumber)},setPhoneNumber:function(e){return o.post(f.urls.setPhoneNumber,JSON.stringify(e))},validateAndSendVerificationCode:function(e){return o.post(f.urls.validateAndSendVerificationCode,JSON.stringify(e))},getCommsMethodPreferences:function(){return o.get(f.urls.getCommsMethodPreferences)},setCommsMethodPreferences:function(e){return o.post(f.urls.setCommsMethodPreferences,JSON.stringify(e))},optOutCommsPref:function(e,t,n){return o.post(f.urls.optOutCommsPref,{token:e,communicationsType:t,campaignId:n})},reportAlgoliaSearch:function(e){return o.post(f.urls.reportAlgoliaSearch,{term:e})},processPaymentAdditionalResponse:function(e){return o.get(f.urls.processPaymentAdditionalResponse+("?payload="+e))}};return f.updateApiData(),f.logoutIfCognitoEnabledAndUserNotMigrated=function(){return o.get(f.urls.logoutIfCognitoEnabledAndUserNotMigrated)},f.isFeatureSwitchActive=function(e){return o.get(f.urls.isFeatureSwitchActive+("?featureSwitchName="+e))},f.isFeatureSwitchActiveByPhone=function(e,t,n){e="?featureSwitchName="+e;return e+="&countryDialCode="+encodeURIComponent(t),o.get(f.urls.isFeatureSwitchActiveByPhone+(e+="&number="+n))},f.isFeatureSwitchActiveByEmail=function(e,t){e="?featureSwitchName="+e;return e+="&email="+encodeURIComponent(t),o.get(f.urls.isFeatureSwitchActiveByEmail+e)},f.isFeatureSwitchActiveByCloud9Id=function(e,t){e="?featureSwitchName="+e;return e+="&cloudNineId="+encodeURIComponent(t),o.get(f.urls.isFeatureSwitchActiveByCloud9Id+e)},f.verifyCognitoEmail=function(e){return o.get(f.urls.verifyCognitoEmail+("?verificationCode="+e))},f.confirmCognitoEmailSignup=function(e,t){e="?confirmationCode="+e;return e+="&email="+encodeURIComponent(t),o.post(f.urls.confirmCognitoEmailSignup+e)},f.confirmCognitoPhoneNumberSignup=function(e,t,n){e="?confirmationCode="+e;return e+="&countryDialCode="+encodeURIComponent(t),o.post(f.urls.confirmCognitoPhoneNumberSignup+(e+="&number="+n))},f.cognitoConfirmForgotPassword=function(e){return o.post(f.urls.cognitoConfirmForgotPassword,e)},f.resendConfirmationCode=function(e){e="?emailAddress="+encodeURIComponent(e);return o.post(f.urls.resendConfirmationCode+e)},f.resendConfirmationCodePhone=function(e){return o.post(f.urls.resendConfirmationCodePhone,JSON.stringify(e))},f.resendVerificationCode=function(e){e="?newEmailAddress="+encodeURIComponent(e);return o.post(f.urls.resendVerificationCode+e)},f}]),angular.module("gmgApp").factory("ApiServiceMock",[function(){var e={dataUpdatedEvent:"apiDataUpdated"},t=[{title:"Dota 2",iconURL:"",lastPlayed:0,playtimeTotal:4536,achievements:5,achievementsPossible:7,appId:570},{title:"Batman: Arkham Origins",iconURL:"",lastPlayed:1485893992e3,playtimeTotal:53,achievements:65,achievementsPossible:100,appId:209e3},{title:"Grand Theft Auto V",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:271590},{title:"Team Fortress 2",iconURL:"",lastPlayed:1454346739e3,playtimeTotal:41e3,achievements:65,achievementsPossible:100,appId:440},{title:"ARK: Survival Evolved",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:346110},{title:"Sakura Fantasy Chapter 1",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:375200},{title:"Rust",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:252490},{title:"Sid Meier's Civilization V",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:8930},{title:"Warframe",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:230410},{title:"Tales from the Borderlands",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:330830},{title:"Garry's ModC",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:4e3},{title:"Zombie Pirates",iconURL:"",lastPlayed:1428636385e3,playtimeTotal:76,achievements:65,achievementsPossible:100,appId:46850}];return e.gamerDetails=function(e){if("Gamer.LibraryOrdered"!==e.method)return{};switch(e.params.bookmark){case"1":return{id:1,result:{value:{games:t,bookmark:"2",totalGames:72}},error:null};case"2":return{id:1,result:{value:{games:t,bookmark:"3",totalGames:72}},error:null};case"3":return{id:1,result:{value:{games:t,bookmark:"4",totalGames:72}},error:null};case"4":return{id:1,result:{value:{games:t,bookmark:"5",totalGames:72}},error:null};default:return{id:1,result:{value:{games:t,bookmark:"1",totalGames:72}},error:null}}},e.postPdpUrlsFromAppIds=function(e){return[{SteamAppId:"209000",PdpUrl:"/games/batman-origins-deluxe-pc/"},{SteamAppId:"330830",PdpUrl:"/games/borderlands-gold-pc/"},{SteamAppId:"8930",PdpUrl:"/games/sid-meiers-civilization-v-pc/"}]},e}]),angular.module("gmgApp").factory("Basket",["ApiService","BasketItem","Voucher","BonusGame","$q","$rootScope","Currency","GlobalMessageBarService","$timeout","$window","$anchorScroll","ObjectValidator","User","LOYALTY_SWITCH","validationHandlerService","BASKET_UPDATED_EVENT",function(i,r,o,a,s,l,e,c,t,u,n,d,p,h,f,m){var g=c.globalMessage,v=!1;function y(){}this.giftYourBasketTouched=!1,this.isNotBasketGiftable=!1,this.nonGiftableList="";function b(e){_.willBeChangingQty=!0,A=e,S&&t.cancel(S),S=t(function(){_.changingQty=!0,P(e).finally(function(){_.changingQty=!1,_.willBeChangingQty=!1,l.$broadcast(m,_.apiCallInProgress)}),A=S=null},T)}var S,_=new y,E=s.defer(),C=(y.get=function(){return _},y.getWhenReady=function(){return u.userData&&!u.userData.basketPopulated&&(_.setApiData(u.userData),u.userData.basketPopulated=!0),E.promise},y.isCtaDisabled=function(){return v},p.getWhenReady().then(function(e){d.isNullOrUndefined(e)||l.$broadcast(m,_.apiCallInProgress)}),function(e){400===e.status?(g.isError=!0,g.message=null,angular.isArray(e.data)?(g.errors=e.data,g.hideClose=!0):g.message=e.data,g.visible=!0):g.visible=!1}),w=function(e){_.applyApiBasketData(e),e.CartRefreshed||(g.visible=!1)},T=(_.addingToBasket=!1,_.open=!1,y.prototype.applyApiBasketData=function(e){var t,n;this.total.basket=e.TotalWithoutDiscount,this.total.credit=-1*e.AppliedCredit,this.total.additionalVat=e.AdditionalVat||0,this.total.discounted=-e.DiscountedValue,this.vouchers=e.Vouchers.map(o.init),this.items=e.LineItemDtos.map(r.init),this.productIdToItem=(n=this.items,t={},angular.forEach(n,function(e){this[e.product.id]=e},t),t),this.bonusGames=e.BonusGames.map(a.init),this.bonusGamesInfoMessage=e.BonusGamesInfoMessage,this.totalBasketQuantity=e.TotalBasketQuantity,this.id=e.Id,this.categories=e.Categories,this.isGiftBasket=e.IsGiftBasket,this.basketUrl=e.BasketUrl,this.xp=e.TotalXp,this.secretVoucherOfferIds=e.AvailableSecretVoucherOfferIds||[],this.hasClaimedSecretVoucherOffers=e.ClaimedSecretVoucherOfferIds&&0<e.ClaimedSecretVoucherOfferIds.length,e.CountryVatRate&&(this.countryVatRate=e.CountryVatRate/1e4),this.singleUseVoucherWarningGames=this.items.filter(function(e){return e.product.voucherDisplayWarning}).map(function(e){return e.product.name}),this.showSingleUseVoucherWarning=0<this.singleUseVoucherWarningGames.length,this.singleUseVoucherWarningMessage=function(e){return e+"<br>"+this.singleUseVoucherWarningGames.join("<br>")},e.CartRefreshed&&((n=c.globalMessage).isError=!1,n.message="Unfortunately your basket has expired. If you still wish to place your order, please add the game(s) to your basket again and complete your order.",n.visible=!0,n.hideClose=!1),this.onPricesChange()},y.prototype.setApiData=function(e){_.user=e.Username,_.currency=e.Currency,_.initTotals(),_.applyApiBasketData(e.Basket),E.resolve(_)},l.$on("apiDataUpdated",function(e,t){_.setApiData(t)}),y.prototype.setCookieData=function(e,t){void 0===this.total&&(this.total={basket:t},this.currency=e)},y.prototype.initTotals=function(){this.total={basket:0,credit:0,savings:0,handlingTotal:0,discounted:0}},800),A=null,P=(y.prototype.recountTotals=function(){this.total.savings=e.add(this.total.credit,this.total.discounted),this.total.final=e.add(e.add(e.add(this.total.basket,this.total.savings),this.total.handlingTotal),this.total.additionalVat)},y.prototype.onPricesChange=function(){this.recountTotals()},_.willBeChangingQty=!(y.prototype.setHandlingTotal=function(e){this.total.handlingTotal=e,this.onPricesChange()}),_.getRestoreCartError=function(){return _.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),i.getRestoreCartError().then(function(e){var t;g.isError=!0,g.message=(e=e.data,t="",e.split(";").forEach(function(e){t=e.indexOf(".")!==e.length-1?t+e+".<br/>":t+e+"<br/>"}),t),g.visible=!0,g.hideClose=!1},function(e){return C(e),s.reject()}).finally(function(){_.apiCallInProgress=!1,l.$broadcast(m,_.apiCallInProgress)})},function(t){t.quantity<0&&s(function(e,t){t("Invalid Quantity")});var e={catalogId:t.product.id,quantity:t.quantity};return _.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),i.changeItemQuantity(e).then(function(e){return w(e.data.Basket),e.data},function(e){return t.quantity=t.lastQuantity,C(e),s.reject()}).finally(function(){_.apiCallInProgress=!1,l.$broadcast(m,_.apiCallInProgress)})});function O(e){return e.filter(function(e){return e.product.notGiftable}).map(function(e){return e.product.name})}return y.prototype.increaseItemQuantity=function(e){var t=e.quantity+1;!_.validateMaxBasketQty(1)||A&&e!==A||(null===A&&(e.lastQuantity=e.quantity),e.quantity=t,b(e),utag.link({tealium_event:"cart_add",product_id:e.product.id,product_price:e.totalPrice,product_quantity:1,currency:_.currency}))},y.prototype.decreaseItemQuantity=function(e){var t=e.quantity-1;t<1||A&&e!==A||(null===A&&(e.lastQuantity=e.quantity),e.quantity=t,b(e),utag.link({tealium_event:"cart_remove",product_id:e.product.id,product_price:e.totalPrice,product_quantity:1,currency:_.currency}))},y.prototype.validateMaxBasketQty=function(e){for(var t=0,n=0;n<this.items.length;n++)t+=this.items[n].quantity;return t+e<=13},y.prototype.removeItem=function(t,e){var n=0,r=0;if(_.items.filter(function(e){e.product.id==t&&(n=e.totalPrice,r=e.quantity)}),!_.changingQty)return v=!0,_.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),f.requestValidationModelErrorClearing(),i.deleteLineItem({gameVariantCode:t,isFromCart:e}).then(function(e){w(e.data.Basket),utag.link({tealium_event:"cart_remove",product_id:t,product_price:n,product_quantity:r,currency:e.data.Currency})},function(e){C(e)}).finally(function(){v=!1,_.apiCallInProgress=!1,_.checkItemsAreNotGiftable(!1,!0),l.$broadcast(m,_.apiCallInProgress)})},y.prototype.removeVoucher=function(e){return _.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),i.removeVoucher(e).then(function(e){_.applyApiBasketData(e.data.Basket)},function(e){C(e)}).finally(function(){_.apiCallInProgress=!1,l.$broadcast(m,_.apiCallInProgress)})},y.prototype.applyPromotionalCode=function(e){return _.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),i.redeemPromotionalCodeInCart(e).then(function(e){var t;return _.applyApiBasketData(e.data.Basket),d.isNullOrEmptyString(e.data.InfoMessage)||((t=c.globalMessage).isError=!1,t.message=e.data.InfoMessage,t.visible=!0,t.hideClose=!1,u.scrollTo(0,0)),e.data}).finally(function(){_.apiCallInProgress=!1,l.$broadcast(m,_.apiCallInProgress)})},y.prototype.applyCredit=function(e){var n;return 0<e?((n=this).apiCallInProgress=!0,l.$broadcast(m,n.apiCallInProgress),i.applyCredit(e).then(function(e){var t;return n.applyApiBasketData(e.data.Basket),n.apiCallInProgress=!1,d.isNullOrEmptyString(e.data.InfoMessage)||((t=c.globalMessage).isError=!1,t.message=e.data.InfoMessage,t.visible=!0,t.hideClose=!1,u.scrollTo(0,0)),e.data}).finally(function(){n.apiCallInProgress=!1,l.$broadcast(m,n.apiCallInProgress)})):s(function(e,t){t({getMessage:function(){return"Please enter a positive value"}})})},y.prototype.removeCredit=function(){return _.apiCallInProgress=!0,l.$broadcast(m,_.apiCallInProgress),i.removeCredit().then(function(e){_.applyApiBasketData(e.data.Basket)}).finally(function(){_.apiCallInProgress=!1,l.$broadcast(m,_.apiCallInProgress)})},y.prototype.setServiceChargeToolTip=function(e){_.serviceChargeTooltipText=e,l.$broadcast(m,_.apiCallInProgress)},y.prototype.checkItemsAreNotGiftable=function(e,t){e&&(_.giftYourBasketTouched=!0),_.nonGiftableList="",_.isNotBasketGiftable=!1;var e=O(_.items).concat(O(_.bonusGames)),n=(0<e.length&&(_.isGiftBasket=!1,_.isNotBasketGiftable=!0),1<e.length?"s: ":": ");return _.nonGiftableList+=n+e.join(", ").concat("."),t||l.$broadcast(m,_.apiCallInProgress),!_.isNotBasketGiftable},y.prototype.showMesssageBar=function(){n.yOffset=0,n()},y}]),angular.module("gmgApp").factory("BasketItem",["Product","ObjectValidator",function(i,o){function a(e,t,n,r,i,o,a){this.product=e,this.quantity=t,this.totalPrice=n,this.totalOldPrice=r,this.totalDiscount=i,this.keys=o,this.subNostroAmount=a}return a.init=function(e){return new a(i.initForBasket(e),e.Quantity,e.Price,e.RrpPrice,null,e.SubNostroAmount)},a.initForOrder=function(e){var r,t=i.initForOrder(e),n=(n=e.Purchases,r=[],o.isNullOrUndefined(n)||angular.forEach(n,function(n){angular.forEach(n.Keys,function(e,t){e.BoxId=n.BoxId,r.push({name:t,value:e})})}),r);return new a(t,e.Quantity,e.Price,e.Rrp,e.Discount,n)},a}]),angular.module("gmgApp").factory("BonusGame",["Product",function(t){function n(e,t,n){this.product=e,this.quantity=t,this.isVoucher=n}return n.init=function(e){return new n(t.initForBasket(e),e.Quantity,e.IsVoucher)},n}]),angular.module("gmgApp").service("CommunityMenu",[function(){var e={isCommunityPage:!1,initialized:!1,menuLinks:[]};return e}]),angular.module("gmgApp").factory("CountryStatePair",["ApiService","ObjectValidator",function(t,n){function e(){}var r=new e;return e.get=function(){return r},e.prototype.GetStatesList=function(e){return n.isNullOrUndefined(e)?r.stateList=null:(e={CountryCode:e.CountryCode},t.countryStatesList(e).success(function(e){return r.stateList=e}))},e.prototype.GetCountriesList=function(){return t.countriesList().success(function(e){return r.countriesList=e})},e}]),angular.module("gmgApp").factory("Currency",["$window",function(r){function e(){}return e.normMinionAmount=function(e){return r.normMinionAmount(e)},e.add=function(e,t){return r.additionReadable(e,t)},e.displayMinionPrice=function(e,t){return r.displayPrice(e,t,!0)},e.displayPrice=function(e,t,n){return r.displayPrice(e,t,!1,n)},e}]),angular.module("gmgApp").factory("Error",[function(){function e(e,t){this.message=e,this.apiData=t}return e.prototype.getMessage=function(){return this.message||"Oops, something went wrong. Please try again."},e}]),angular.module("gmgApp").factory("GmgPriceHandlerFactory",["$compile","Currency","User","ObjectValidator",function(r,i,o,e){function a(e,t,n){e.html(n),r(e.contents())(t)}function s(n,r){return new Promise(function(t,e){o.getWhenReady().then(function(e){t(i.displayPrice(n,r,e.hideDecimalsForCurrency))})})}function t(e,t){var n="";a(t,e,n=e.product.discount?"-"+e.product.discount+"%":n)}function n(t,n){var e;t.product.discount?(e=t.product.oldPrice,n.addClass("notranslate"),s(t.currency,e).then(function(e){a(n,t,e)})):a(n,t,"")}function l(t,n){var e=t.product.price;n.addClass("notranslate"),s(t.currency,e).then(function(e){a(n,t,e)})}function c(){}return c.GetHandlerForType=function(e){switch(e){case"discount":return t;case"rrp":return n;case"currentPrice":return l;default:return}},c}]),angular.module("gmgApp").factory("HiddenKeyRedemptionFactory",["blizzardHiddenKeyRedemption","ztormHiddenKeyRedemption","uplayHiddenKeyRedemption","epicHiddenKeyRedemption",function(t,n,r,i){function e(){}return e.GetHiddenKeyRedemption=function(e){switch(e.toLowerCase()){case"blizzard":return t;case"ztorm":return n;case"uplay":return r;case"epic":return i;default:throw"unknown key redemption platform"}},e}]),angular.module("gmgApp").factory("httpResponseInterceptor",["$rootScope","$q","$timeout","errorInterceptorDetectorService","$injector","$window","USER_COOKIE_NAME","$cookies","URL_PARAMETER_CONSTANTS","$location",function(o,a,s,l,c,u,d,p,h,f){var m=0,g=0,v=0;return{responseError:function(e){var t,n,r;switch(e.status){case 401:!f.search()[h.RE_LOGIN_IN]&&e.data&&e.data.IsReloginRequired&&(p.remove(d),i=u.location.href.replace(/(^\w+:|^)\/\//,""),f.search()[h.RETURN_URL]&&(i=f.search()[h.RETURN_URL],f.search(h.RETURN_URL,null)),f.search()[h.RE_LOGIN_IN]&&f.search(h.RE_LOGIN_IN,null),(r=new u.URL(u.location.origin)).searchParams.append(h.RE_LOGIN_IN,!0),r.searchParams.append(h.RETURN_URL,i),u.location.href=r.toString());break;case 403:"Green Guard Check"===e.data.Message?s(function(){o.$broadcast("openGreenGuardModal","Green Guard","Green Guard")},500):t="Sorry, you don't have the rights to make this request!",l.setErrorIntercepted(!0);break;case 405:t="Oops! A small issue occurred, please contact Customer Services.",l.setErrorIntercepted(!0);break;case 408:t="Sorry, your request timed out! Please try again.",l.setErrorIntercepted(!0);break;case 456:l.setErrorIntercepted(!0);var i=u.GMGSettings.distilBotTrafficRedirectUrl;u.location.href=i;break;case 500:t="We're currently having a small issue. Please try again. Sorry!",l.setErrorIntercepted(!0);break;case 503:if(v<10)return n=e.config,m<13e3&&(g=0===m?m=1e3:(r=m,m+=g,r)),13e3===m&&v++,s(function(){return c.get("$http")(n)},m);t="We're currently having a small issue. Please try again. Sorry!",l.setErrorIntercepted(!0);break;default:l.setErrorIntercepted(!1)}return t&&s(function(){o.$broadcast("openModal",t,"A small issue")},500),a.reject(e)}}}]),angular.module("gmgApp").factory("Order",["BasketItem","$q","Currency","Voucher","User","ObjectValidator","LOYALTY_SWITCH",function(t,e,n,r,i,o,a){function s(){}var l=new s,c=e.defer();s.get=function(){return l},s.getWhenReady=function(){return c.promise};return s.setApiData=function(e){l.currency=e.Currency,l.id=e.OrderId,l.items=e.PurchasedGames.map(t.initForOrder),l.bonusGames=e.BonusGames.map(t.initForOrder),l.credit=-1*e.AppliedCredit,l.total=l.getTotals(e),l.displayOutOfKeysMessage=e.DisplayOutOfKeysMessage,l.displayPrePurchaseOutOfKeysMessage=e.DisplayPrePurchaseOutOfKeysMessage,l.vouchers=e.Vouchers.map(r.init),l.isFirstPurchase=e.IsFirstPurchase,l.missingKeyGameName=e.MissingKeyGameName,l.isGift=e.IsGift,l.xp=e.TotalXp,l.trustpilotLink=e.TrustpilotLink,l.serviceChargeTooltipText=e.ServiceChargeTooltipText,l.countryVatRate=e.CountryVatRate/1e4,c.resolve(l)},s.prototype.getTotals=function(e){return{credit:l.credit,discounted:-e.DiscountedValue,basket:e.TotalWithoutDiscount,savings:-e.SavingsTotal,handlingTotal:e.HandlingTotal,final:e.FinalTotal,additionalVat:e.AddedTaxAmount}},s.prototype.init=function(e){return e.replace("{0}",l.missingKeyGameName)},s}]),angular.module("gmgApp").factory("OwlCarousalCustomNavigationService",[function(){var e={moveNextPage:function(e,t){return t!==e.find(".owl-dot").length-1&&e.trigger("to.owl.carousel",[t+=1]),t},movePrevPage:function(e,t){return 0!==t&&e.trigger("to.owl.carousel",[t-=1]),t}};return e}]),angular.module("gmgApp").factory("PageType",["$q",function(e){var t,n=e.defer();function r(){}return r.PRODUCT_PAGE="product_page",r.CHECKOUT_PAGE="checkout_page",r.CONFIRMATION_PAGE="confirmation_page",r.DEFAULT_PAGE="default_page",r.set=function(e){t=e,n.resolve(e)},r.get=function(){return t},r.getWhenReady=function(){return n.promise},angular.element(document).ready(function(){r.set($("html").data("page-type"))}),r}]),angular.module("gmgApp").filter("PasswordFieldFilter",[function(){return function(e){if(e){var t=(e=>{var t=0;if(!e)return t;for(var n=new Object,r=0;r<e.length;r++)n[e[r]]=(n[e[r]]||0)+1,t+=5/n[e[r]];var i,o={digits:/\d/.test(e),lower:/[a-z]/.test(e),upper:/[A-Z]/.test(e),nonWords:/\W/.test(e)},a=0;for(i in o)a+=!0===o[i]?1:0;return t+=10*(a-1),parseInt(t)})(e),n=(document.getElementById("charactersCriterium"),document.getElementById("characterIcon"));if(!(e<1))return 1===e.length?0:e.length<8?(n.classList.remove("circleIconPass"),n.classList.add("circleIconFail"),1):(n.classList.remove("circleIconFail"),n.classList.add("circleIconPass"),80<t?4:60<t?3:30<=t?2:"")}}}]),angular.module("gmgApp").factory("PaymentMethod",[function(){function t(e,t,n,r,i,o,a,s,l,c,u,d,p,h,f,m,g,v,y,b){var S=Math.random().toString().replace(".","");this.paymentMethodId=e,this.name=t,this.isDefault=r,this.images=i,this.type=n,this.description=o,this.category=a,this.expiryDate=s,this.isExpired=l,this.issuerId=c,this.description=o,this.importantServiceChargeMessage=u,this.handlingTotal=d,this.cardBin=p,this.last4Number=h,this.nameOnCard=f,this.merchantId=m,this.environment=g,this.methodTypes=v,this.uniqueId=e+S,this.additionalTransactionInfo=b,this.id=c||e,this.editedFields={},this.allowsPaymentNotifications=y}return t.init=function(e){return new t(e.Id,e.Name,e.Keyword,e.IsDefault,e.Icons,(e.Details||e).Description,e.Category,e.ExpiryDate,e.IsExpired,e.IssuerId,e.ImportantServiceChargeMessage,e.HandlingCharge,e.CardBin,e.Last4Number,e.NameOnCard,e.MerchantId,e.Environment,e.MethodTypes,e.AllowsPaymentNotifications,e.AdditionalTransactionInfo)},t}]),angular.module("gmgApp").factory("Process3DSecureFactory",["$window",function(n){function e(){}return e.ProcessResponse=function(t){t.SessionStoreFields&&angular.forEach(Object.keys(t.SessionStoreFields),function(e){n.sessionStorage.setItem(e,t.SessionStoreFields[e])}),n.location.href=t.RedirectUrl},e}]),angular.module("gmgApp").factory("Product",["$window","ObjectValidator",function(i,t){function c(e){this.id=e.id,this.sku=e.sku,this.name=e.name,this.platform={name:e.platformName,id:e.platformId,compoundId:c.generateCompoundPlatformId(e.platformId,e.secondaryPlatformIds)},this.secondaryPlatforms={name:e.secondaryPlatformNames,id:e.secondaryPlatformIds},this.price=e.price,this.oldPrice=e.oldPrice,this.image=e.image,this.pageUrl=e.pageUrl,this.activationLink=e.activationLink,this.customActivationLink=e.customActivationLink,this.availablePlatforms=e.availablePlatforms,this.fromPrice=e.fromPrice,this.buyUrl=e.buyUrl,this.edition={name:e.editionName,id:e.editionId,display:e.displayEditionSelector},this.description=e.description,this.gallery=e.gallery,this.bannerImage=e.bannerImage,this.fullDescription=e.fullDescription,this.metacriticScore=e.metacriticScore,this.ratingScore=e.ratingScore,this.ageRatingImage=e.ageRatingImage,this.publisher=e.publisher,this.developer=e.developer,this.genres=e.genres,this.modes=e.modes,this.languages=e.languages,this.additionalInfo=e.additionalInfo,this.legalInfo=e.legalInfo,this.minRequirements=e.minRequirements,this.recRequirements=e.recRequirements,this.releaseDate=e.releaseDate,this.releaseDateObject=e.showCustomReleaseDate?e.releaseDate:null!==e.releaseDateIso?new Date(e.releaseDateIso):null,this.releaseDateTitle=e.releaseDateTitle,this.releaseDateGameView=e.releaseDateGameView,this.isFutureReleaseDate=!e.releaseDateIso||new Date(e.releaseDateIso)>Date.now(),this.openGraph=e.openGraph,this.deals=e.deals,this.buttonText=e.buttonText,this.key=c.getProductKey(e.platformId,e.drm,e.editionId),this.reviewScore=e.reviewScore,this.totalReviews=e.totalReviews,this.reviews=e.reviews,this.reviewBookmark=e.reviewBookmark,this.isOutOfStock=e.isOutOfStock,this.isComingSoon=e.isComingSoon,this.isPrepurchase=e.isPrepurchase,this.isFreeToPlay=e.isFreeToPlay,this.freeToPlayLink=e.freeToPlayLink,this.source=e.source,this.drm=e.drm,this.discount=e.discount,this.allAssociatedProducts=e.allAssociatedProducts,this.bestSellingRank=e.bestSellingRank,this.searchHitId=e.searchHitId,this.supportedVrs=e.supportedVrs,this.mrpPrice=e.mrpPrice,this.disableTwitchSection=e.disableTwitchSection,this.disableGameStatsSection=e.disableGameStatsSection,this.shouldShowStatsOnPdp=e.shouldShowStatsOnPdp,this.shouldShowRegionalRestrictionsOnPdp=e.shouldShowRegionalRestrictionsOnPdp,this.steamAppId=e.steamAppId,this.mainCommunityProductDetails=e.mainCommunityProductDetails,this.twitchGameName=e.twitchGameName,this.drmFormats=e.drmFormats,this.notGiftable=e.notGiftable,this.mainImage=e.mainImage,this.disabledPrePurchaseNotice=e.disabledPrePurchaseNotice,this.isEarlyAccess=e.isEarlyAccess,this.displayCurrentOfferBanner=e.displayCurrentOfferBanner,this.currentOfferBannerHeader=e.currentOfferBannerHeader,this.currentOfferBannerLink=e.currentOfferBannerLink,this.currentOfferBannerImageUrl=e.currentOfferBannerImageUrl,this.disabledDlcNotice=e.disabledDlcNotice,this.disabledUplayNotice=e.disabledUplayNotice,this.systemRequirements=e.systemRequirements,this.developerImageUrl=e.developerImageUrl,this.publisherImageUrl=e.publisherImageUrl,this.staffReview=e.staffReview,this.isReleased=e.isReleased,this.disableCampaignCountdown=e.disableCampaignCountdown,this.campaignInfo=e.campaignInfo,this.prePurchaseRedemptionImage=e.prePurchaseRedemptionImage,this.displayReleaseCountdown=e.displayReleaseCountdown,this.showTimeInReleaseCountdown=e.showTimeInReleaseCountdown,this.releaseDateAndTime=e.releaseDateAndTime,this.isVoucher=e.isVoucher,this.voucherPercentage=e.voucherPercentage,this.voucherCode=e.voucherCode,this.disableVoucherFeature=e.disableVoucherFeature,this.hasCornerFlash=e.hasCornerFlash,this.cornerFlashDisplayOption=e.cornerFlashDisplayOption,this.cornerFlashDisplayOptionMedium=e.cornerFlashDisplayOptionMedium,this.cornerFlashDisplayOptionSmall=e.cornerFlashDisplayOptionSmall,this.cornerFlashText=e.cornerFlashText,this.cornerFlashColor=e.cornerFlashColor,this.cornerFlashBackgroundColor=e.cornerFlashBackgroundColor,null!==this.cornerFlashBackgroundColor&&""!==this.cornerFlashBackgroundColor?this.cornerFlashCustomDesign=e.cornerFlashCustomDesign+"; border-color : "+this.cornerFlashBackgroundColor:this.cornerFlashCustomDesign=e.cornerFlashCustomDesign,this.cornerFlashIcon=e.cornerFlashIcon,this.cornerFlashIconDesign=e.cornerFlashIconDesign,this.cornerFlashIconDesignMedium=e.cornerFlashIconDesignMedium,this.cornerFlashIconDesignSmall=e.cornerFlashIconDesignSmall,this.cornerFlashOverrideVip=e.cornerFlashOverrideVip,this.ageRatingMinimumAge=e.ageRatingMinimumAge,t.isNullOrUndefined(i.voucherFeaturePercentageText)||(this.voucherFeaturePercentageText=i.voucherFeaturePercentageText.replace("{0}",e.voucherPercentage)),this.preDescriptions=e.preDescriptions,this.preDescriptionHeader=e.preDescriptionHeader,this.metaTitle=e.metaTitle,this.metaDescription=e.metaDescription,this.xperience=e.xperience,this.regionalXperience=e.regionalXperience,this.dropshopOnly=e.dropshopOnly,this.secretVoucher=e.secretVoucher,this.secretOfferId=e.secretOfferId,this.voucherPrice=e.voucherPrice,this.voucherDiscount=e.voucherDiscount,this.voucherDisplayWarning=e.voucherDisplayWarning,this.drmId=e.drmId,this.drmClassName=e.drmClassName,this.drmColour=e.drmColour,this.carouselDesktopImage=e.carouselDesktopImage,this.carouselTabletImage=e.carouselTabletImage,this.carouselMobileImage=e.carouselMobileImage,this.bigModuleHalfImage=e.bigModuleHalfImage,this.drmPlatformDropdownName=e.drmPlatformDropdownName,this.showPlatformToDrm=e.showPlatformToDrm,this.editionName=e.editionName,this.currencyCode=e.currencyCode,this.priceAmount=e.priceAmount}return c.initForBasket=function(e){var t="",n="",r="",r=null!==e.CornerFlashBackgroundColor&&""!==e.CornerFlashBackgroundColor?(t=e.CornerFlashCustomDesign+"; border-color : "+e.CornerFlashBackgroundColor,n=e.CornerFlashIcon,e.CornerFlashIconSmallDesign):(t=e.CornerFlashCustomDesign,n="background: url(/static/img/XP_Offer.svg) no-repeat;","height: 20px; width:20px; top: -37px; left: 5px; transform: rotate(-45deg);");return new c({id:e.CatalogItemId,sku:e.CatalogItemId,name:e.ProductName,platformName:e.Platform,secondaryPlatformNames:e.SecondaryPlatformNames,secondaryPlatformIds:e.SecondaryPlatformIds,price:e.ProductPrice,oldPrice:e.ProductRrpPrice,image:e.BoxImage,pageUrl:e.PageUrl,fromPrice:!1,discount:e.Discount,mainImage:e.MainImageUrl,notGiftable:e.NotGiftable,hasCornerFlash:e.HasCornerFlash,cornerFlashText:e.CornerFlashText,cornerFlashColor:e.CornerFlashColor,cornerFlashBackgroundColor:e.CornerFlashBackgroundColor,ageRatingMinimumAge:e.AgeRatingMinimumAge,dropshopOnly:e.DropshopOnly,cornerFlashCustomDesign:t,cornerFlashIcon:n,cornerFlashIconDesign:r,cornerFlashOverrideVip:e.CornerFlashOverrideVip,secretOfferId:e.SecretOfferId,voucherPrice:e.VoucherPrice,voucherDiscount:e.VoucherDiscount,voucherDisplayWarning:e.VoucherDisplayWarning,drmClassName:e.DrmClassName,drmId:e.DrmId,editionName:e.EditionName})},c.initForOrder=function(e){return new c({sku:e.Sku,name:e.Name,platformName:e.Platform,secondaryPlatformNames:e.SecondaryPlatformNames,secondaryPlatformIds:e.SecondaryPlatformIds,price:e.Price||e.Amount,oldPrice:e.Rrp,image:e.ImageUrl,pageUrl:e.PageUrl,activationLink:e.ActivationLink,customActivationLink:e.CustomActivationLink,availablePlatorms:null,fromPrice:null,discount:e.Discount,mainImage:e.MainImageUrl,isVoucher:e.IsVoucher,ageRatingMinimumAge:e.AgeRatingMinimumAge,dropshopOnly:e.DropshopOnly,voucherPrice:e.VoucherPrice,voucherDiscount:e.VoucherDiscount,voucherDisplayWarning:e.VoucherDisplayWarning,editionName:e.EditionName,drmClassName:e.DrmClassName,drmId:e.DrmId})},c.initForQuickSearch=function(e){return new c({name:e.Name,secondaryPlatformNames:e.SecondaryPlatformNames,secondaryPlatformIds:e.SecondaryPlatformIds,price:e.Price,image:e.Image,cornerFlash:e.CornerFlash,pageUrl:e.Url,availablePlatforms:e.Editions,fromPrice:e.FromPrice,searchHitId:e.HitId})},c.initForSearch=function(e){var t="",n="",r="",r=null!==e.DefaultVariant.CornerFlashBackgroundColor&&""!==e.DefaultVariant.CornerFlashBackgroundColor?(t=e.DefaultVariant.CornerFlashCustomDesign+"; border-color : "+e.DefaultVariant.CornerFlashBackgroundColor,n=e.DefaultVariant.CornerFlashIcon,e.DefaultVariant.CornerFlashIconDesign):(t=e.DefaultVariant.CornerFlashCustomDesign,n="background: url('/static/img/XP_Offer.svg') no-repeat;","height: 20px; width:20px; top: -37px; left: 5px; transform: rotate(-45deg);");return new c({sku:e.DefaultVariant.Code,name:e.Name,isOutOfStock:e.DefaultVariant.IsOutOfStock,isComingSoon:e.DefaultVariant.IsComingSoon,isPrepurchase:e.DefaultVariant.IsPrepurchase,buttonText:e.DefaultVariant.ButtonText,platformName:e.DefaultVariant.PlatformName,secondaryPlatformNames:e.DefaultVariant.SecondaryPlatformNames,secondaryPlatformIds:e.SecondaryPlatformIds,price:e.DefaultVariant.CurrentPrice,oldPrice:e.DefaultVariant.PreviousPrice,image:e.ImageUrl,pageUrl:e.DefaultVariant.Url,releaseDate:e.DefaultVariant.ReleasedDateText,discount:e.DefaultVariant.DiscountPercentOff,bestSellingRank:e.BestSellingRank,searchHitId:e.HitId,isFreeToPlay:e.DefaultVariant.IsFreeToPlay,freeToPlayLink:e.DefaultVariant.FreeToPlayLink,hasCornerFlash:e.DefaultVariant.HasCornerFlash,cornerFlashText:e.DefaultVariant.CornerFlashText,cornerFlashColor:e.DefaultVariant.CornerFlashColor,cornerFlashCustomDesign:t,cornerFlashIcon:n,cornerFlashIconDesign:r,cornerFlashOverrideVip:e.DefaultVariant.CornerFlashOverrideVip,cornerFlashBackgroundColor:e.DefaultVariant.CornerFlashBackgroundColor,drmClassName:i.drmClassNameMap?i.drmClassNameMap[e.DefaultVariant.DrmId]:null})},c.initForPrePurchaseRedemption=function(e){var t={title:e.OpenGraphTitle,url:e.OpenGraphUrl};return new c({sku:e.Code,name:e.GameName,isPrepurchase:e.IsPrepurchase,image:e.Image,pageUrl:e.Url,editionId:e.Id,editionName:e.Name,description:e.Description,bannerImage:e.ProductBannerImageUrl,languages:e.Languages,openGraph:t,mainImage:e.ImageForPdpBlock,prePurchaseRedemptionImage:e.PrePurchaseRedemptionImage})},c.productFromEdition=function(e,t,n,r){var i="",o="",a="",s="",l="",l=null!==e.CornerFlashInfo.cornerFlashBackgroundColor&&""!==e.CornerFlashInfo.cornerFlashBackgroundColor?(i=e.CornerFlashInfo.cornerFlashCustomDesign+"; border-color : "+e.CornerFlashInfo.cornerFlashBackgroundColor,o=e.CornerFlashInfo.cornerFlashIcon,a=e.CornerFlashInfo.cornerFlashIconDesign,s=e.CornerFlashInfo.cornerFlashIconDesignMedium,e.CornerFlashInfo.cornerFlashIconDesignSmall):(i=e.CornerFlashInfo.cornerFlashCustomDesign,o="background: url('/static/img/XP_Offer.svg') no-repeat;",a="height: 37px; width: 37px; top: -73px; left: 10px; transform: rotate(-45deg);",s="height: 32px; width: 32px; top: -63px; left: 8px; transform: rotate(-45deg);","height: 20px; width: 20px; top: -37px; left: 5px; transform: rotate(-45deg);");return new c({sku:e.Code,name:e.GameName,platformName:r.Name,secondaryPlatformNames:t,secondaryPlatformIds:n,platformId:r.Id,isOutOfStock:e.IsOutOfStock,isFreeToPlay:e.IsFreeToPlay,freeToPlayLink:e.FreeToPlayLink,isComingSoon:e.IsComingSoon,isPrepurchase:e.IsPrepurchase,price:e.Price,oldPrice:e.OldPrice,image:e.Image,hasCornerFlash:e.CornerFlashInfo.hasCornerFlash,cornerFlashDisplayOption:e.CornerFlashInfo.cornerFlashDisplayOption,cornerFlashDisplayOptionMedium:e.CornerFlashInfo.cornerFlashDisplayOptionMedium,cornerFlashDisplayOptionSmall:e.CornerFlashInfo.cornerFlashDisplayOptionSmall,cornerFlashText:e.CornerFlashInfo.cornerFlashText,cornerFlashColor:e.CornerFlashInfo.cornerFlashColor,cornerFlashBackgroundColor:e.CornerFlashInfo.cornerFlashBackgroundColor,cornerFlashCustomDesign:i,cornerFlashIcon:o,cornerFlashIconDesign:a,cornerFlashIconDesignMedium:s,cornerFlashIconDesignSmall:l,cornerFlashOverrideVip:e.CornerFlashInfo.cornerFlashOverrideVip,pageUrl:e.Url,buyUrl:e.BuyUrl,editionId:e.Id,editionName:e.Name,displayEditionSelector:e.DisplayEditionSelector,description:e.Description,gallery:e.Gallery,bannerImage:e.ProductBannerImageUrl,ogTitle:e.OpenGraphTitle,ogUrl:e.OpenGraphUrl,fullDescription:e.FullDescription,metacriticScore:e.MetaCriticScore,ratingScore:e.Rating,ageRatingImage:e.AgeRatingImageUrl,publisher:e.Publisher,developer:e.Developer,genres:e.Genres,modes:e.Modes,languages:e.Languages,additionalInfo:e.AdditionalInfo,legalInfo:e.LegalInfo,minRequirements:e.MinimalRequirements,recRequirements:e.RecommendedRequirements,releaseDate:e.ReleaseDate,releaseDateTitle:e.ReleaseDatePdpTitle,releaseDateGameView:e.ReleaseDateGameView,showCustomReleaseDate:e.ShowCustomReleaseDate,deals:e.Deals,buttonText:e.ButtonText,reviewScore:e.ReviewScore,totalReviews:e.TotalReviews,reviews:e.Reviews,reviewBookmark:e.ReviewBookmark,source:e.Source,drm:e.Drm,discount:e.DiscountPercentOff,allAssociatedProducts:e.AssociatedVariants,supportedVrs:e.SupportedVrs,mrpPrice:e.MrpPrice,disableTwitchSection:e.DisableTwitchSection,disableGameStatsSection:e.DisableGameStatsSection,shouldShowStatsOnPdp:e.ShouldShowStatsOnPdp,shouldShowRegionalRestrictionsOnPdp:e.ShouldShowRegionalRestrictionsOnPdp,steamAppId:e.SteamAppId,mainCommunityProductDetails:e.MainCommunityProductDetails,twitchGameName:e.GameNameInTwitch,drmFormats:e.DrmFormats,disabledPrePurchaseNotice:e.DisabledPrePurchaseNotice,isEarlyAccess:e.IsEarlyAccess,displayBanner:e.DisplayCurrentOfferBanner,bannerHeader:e.CurrentOfferBannerHeader,bannerLink:e.CurrentOfferBannerLink,bannerImageUrl:e.CurrentOfferBannerImageUrl,disabledDlcNotice:e.DisabledDlcNotice,disabledUplayNotice:e.DisabledUplayNotice,systemRequirements:e.SystemRequirements,developerImageUrl:e.DeveloperImageUrl,publisherImageUrl:e.PublisherImageUrl,mainImage:e.ImageForPdpBlock,staffReview:e.StaffReview,releaseDateIso:e.ReleaseDateIso,isReleased:e.IsReleased,disableCampaignCountdown:e.DisableCampaignCountdown,campaignInfo:e.CampaignInfo,displayReleaseCountdown:e.DisplayReleaseCountdown,showTimeInReleaseCountdown:e.ShowTimeInReleaseCountdown,releaseDateAndTime:e.ReleaseDateAndTime,voucherPercentage:e.VoucherPercentage,voucherCode:e.VoucherCode,disableVoucherFeature:e.DisableVoucherFeature,ageRatingMinimumAge:e.AgeRatingMinimumAge,openGraph:{title:"",url:""},preDescriptions:e.PreDescriptions,preDescriptionHeader:e.PreDescriptionHeader,metaTitle:e.MetaTitle,metaDescription:e.MetaDescription,xperience:e.Xperience,regionalXperience:e.RegionalXperience,secretVoucher:e.SecretVoucher,drmId:e.DrmId,drmClassName:e.DrmClassName,drmColour:e.DrmColour,carouselDesktopImage:e.CarouselDesktopImage,carouselTabletImage:e.CarouselTabletImage,carouselMobileImage:e.CarouselMobileImage,bigModuleHalfImage:e.BigModuleHalfImage,drmPlatformDropdownName:void 0!==r.Drms?r.Drms[0].DrmPlatformDropdownName:"",showPlatformToDrm:void 0!==r.Drms&&r.Drms[0].ShowPlatformToDrm})},c.initForPdp=function(e){var i=[];return e.forEach(function(t){var n=[],r=[];t.SecondaryPlatforms.forEach(function(e){n.push(e.Name),r.push(e.Id)}),t.Drms.forEach(function(e){e.Editions.forEach(function(e){e=c.productFromEdition(e,n,r,t);i.push(e)})})}),i},c.initForWantlist=function(e){var t,n,r;if(null!==e)return r=n=t="",r=null!==e.CornerFlashBackgroundColor&&""!==e.CornerFlashBackgroundColor?(t=e.CornerFlashCustomDesign+"; border-color : "+e.CornerFlashBackgroundColor,n=e.cornerFlashIcon,e.cornerFlashIconDesign):(t=e.CornerFlashCustomDesign,n="background: url('/static/img/XP_Offer.svg') no-repeat;","height: 20px; width:20px; top: -37px; left: 5px; transform: rotate(-45deg);"),new c({sku:e.Code,name:e.Name,isOutOfStock:e.IsOutOfStock,isComingSoon:e.IsComingSoon,isFreeToPlay:e.IsFreeToPlay,buttonText:e.ButtonText,platformName:e.PlatformName,secondaryPlatformNames:e.secondaryPlatformNames,secondaryPlatformIds:e.secondaryPlatformIds,price:e.CurrentPrice,oldPrice:e.PreviousPrice,image:e.ImageUrl,pageUrl:e.Url,releaseDate:e.ReleaseDate,discount:e.DiscountPercent,hasCornerFlash:e.HasCornerFlash,cornerFlashText:e.CornerFlashText,cornerFlashColor:e.CornerFlashColor,cornerFlashBackgroundColor:e.CornerFlashBackgroundColor,cornerFlashCustomDesign:t,cornerFlashIcon:n,cornerFlashIconDesign:r,cornerFlashOverrideVip:e.CornerFlashOverrideVip,drm:e.Drm,priceAmount:e.CurrentAmount,currencyCode:e.CurrencyCode})},c.initForSecretVoucherOffer=function(e){var t="",n="",r="",i="",o="",o=null!==e.CornerFlashInfo.cornerFlashBackgroundColor&&""!==e.CornerFlashInfo.cornerFlashBackgroundColor?(t=e.CornerFlashInfo.cornerFlashCustomDesign+"; border-color : "+e.CornerFlashInfo.cornerFlashBackgroundColor,n=e.CornerFlashInfo.cornerFlashIcon,r=e.CornerFlashInfo.cornerFlashIconDesign,i=e.CornerFlashInfo.cornerFlashIconDesignMedium,e.CornerFlashInfo.cornerFlashIconDesignSmall):(t=e.CornerFlashInfo.cornerFlashCustomDesign,n="background: url('/static/img/XP_Offer.svg') no-repeat;",r="height: 37px; width: 37px; top: -73px; left: 10px; transform: rotate(-45deg);",i="height: 32px; width: 32px; top: -63px; left: 8px; transform: rotate(-45deg);","height: 20px; width: 20px; top: -37px; left: 5px; transform: rotate(-45deg);");return new c({sku:e.Code,name:e.GameName,isOutOfStock:e.IsOutOfStock,isComingSoon:e.IsComingSoon,isFreeToPlay:e.IsFreeToPlay,buttonText:e.ButtonText,price:e.Price,oldPrice:e.OldPrice,image:e.ImageForPdpBlock,pageUrl:e.Url,discount:e.DiscountPercentOff,hasCornerFlash:e.CornerFlashInfo.hasCornerFlash,cornerFlashDisplayOption:e.CornerFlashInfo.cornerFlashDisplayOption,cornerFlashDisplayOptionMedium:e.CornerFlashInfo.cornerFlashDisplayOptionMedium,cornerFlashDisplayOptionSmall:e.CornerFlashInfo.cornerFlashDisplayOptionSmall,cornerFlashText:e.CornerFlashInfo.cornerFlashText,cornerFlashColor:e.CornerFlashInfo.cornerFlashColor,cornerFlashBackgroundColor:e.CornerFlashInfo.cornerFlashBackgroundColor,cornerFlashCustomDesign:t,cornerFlashIcon:n,cornerFlashIconDesign:r,cornerFlashIconDesignMedium:i,cornerFlashIconDesignSmall:o,cornerFlashOverrideVip:e.CornerFlashInfo.cornerFlashOverrideVip,drm:e.Drm})},c.getProductKey=function(e,t,n){return e+";;;"+t+";;;"+n},c.getByKey=function(e){for(var t,n={},r=0;r<e.length;r++)n[c.getProductKey(c.generateCompoundPlatformId((t=e[r]).platform.id,t.secondaryPlatforms.id),t.drmId,t.edition.id)]=t;return n},c.getByUrl=function(e){for(var t,n={},r=0;r<e.length;r++)n[(t=e[r]).pageUrl]=t;return n},c.generateCompoundPlatformId=function(e,t){if(!t)return e;for(var n=e,r=0;r<Object.keys(t).length;r++)n+="_"+t[r];return n},c}]),angular.module("gmgApp").factory("QuickSearchResults",[function(){return{display:!1}}]),angular.module("gmgApp").factory("retryRequest",["$http","$q","$timeout","DEFAULT_DELAY","HTTP_ACCEPTED",function(l,c,u,d,p){return function(e,t,n,r,i){r=r||d,n=void 0===n?0:n;function o(){l({method:t,url:e,params:{orderId:i}}).success(function(e,t){t===p?a<n&&(a++,u(function(){o()},r)):s.resolve(e)}).error(function(e){s.reject(e)})}var a=0,s=c.defer();return o(),s.promise}}]),angular.module("gmgApp").factory("Review",["ObjectValidator",function(n){function t(e){var t=[];return n.isNullOrUndefined(e)||(t.reviewScore=e.Score,t.totalReviews=e.TotalReviews,t.reviews=e.Reviews,t.reviewBookmark=e.Bookmark,t.ratingsBookmark=e.RatingsBookmark,t.ratings=e.Ratings,t.isSucess=e.IsSuccess),t}return t.init=function(e){return new t(e)},t}]),angular.module("gmgApp").factory("ScreenSize",["$window",function(n){function r(){}return r.SCREEN_XXS=374,r.SCREEN_XS=480,r.SCREEN_SM=768,r.SCREEN_MD=992,r.SCREEN_LG=1200,r.SCREEN_XXXS_MIN=0,r.SCREEN_XXS_MIN=r.SCREEN_XXS,r.SCREEN_XS_MIN=r.SCREEN_XS,r.SCREEN_SM_MIN=r.SCREEN_SM,r.SCREEN_MD_MIN=r.SCREEN_MD,r.SCREEN_LG_MIN=r.SCREEN_LG,r.SCREEN_XXXS_MAX=r.SCREEN_XXS_MIN-1,r.SCREEN_XXS_MAX=r.SCREEN_XS_MIN-1,r.SCREEN_XS_MAX=r.SCREEN_SM_MIN-1,r.SCREEN_SM_MAX=r.SCREEN_MD_MIN-1,r.SCREEN_MD_MAX=r.SCREEN_LG_MIN-1,r.SCREEN_LG_MAX=1/0,r.is=function(e){e=e.toUpperCase();var t=n.innerWidth;return r["SCREEN_"+e+"_MIN"]<=t&&t<=r["SCREEN_"+e+"_MAX"]},r.lessThan=function(e){return e=e.toUpperCase(),n.innerWidth<r["SCREEN_"+e+"_MIN"]},r.lessThanOrEqual=function(e){return e=e.toUpperCase(),n.innerWidth<=r["SCREEN_"+e+"_MAX"]},r.greaterThan=function(e){return r["SCREEN_"+(e=e.toUpperCase())+"_MAX"]<n.innerWidth},r.greaterThanOrEqual=function(e){return r["SCREEN_"+(e=e.toUpperCase())+"_MIN"]<=n.innerWidth},r}]),angular.module("gmgApp").factory("Tealium",["User","$q","Currency","PageType","$window","ObjectValidator",function(e,n,o,t,r,i){var a;function s(){}function l(e){c.resolve(e)}var c=n.defer(),u=(s.setOrder=function(e){l(e)},t.getWhenReady().then(function(e){e!==t.CONFIRMATION_PAGE&&l()}),s.getTagsForConfirmation=function(){var e,n,r;return void 0===a?{}:(e=i(a.total.final),n=a.countryVatRate,r={order_id:a.id,confirmation_purchased_amounts:[],confirmation_purchased_discount:[],confirmation_purchased_items:[],confirmation_purchased_quantities:[],confirmation_purchased_subnostro_amounts:[],confirmation_purchased_voucher_discounts:[],confirmation_purchased_voucher_prices:[],confirmation_purchased_voucher_displayWarning:[],order_confirmation_nostro:e,confirmation_is_first_purchase:a.isFirstPurchase?"True":"False",vat_rate:n,order_confirmation_subnostro:u(e,n)},a.items.forEach(function(e){function t(e,t){r["confirmation_purchased_"+e].push(t)}t("amounts",i(e.totalPrice)),t("items",e.product.sku),t("discount",i(-1*e.totalDiscount)),t("quantities",e.quantity+""),t("subnostro_amounts",u(i(e.totalPrice),n)),t("voucher_discounts",i(-1*e.product.voucherDiscount)),t("voucher_prices",i(e.product.voucherPrice)),t("voucher_displayWarning",e.product.voucherDisplayWarning)}),r);function i(e){return o.displayPrice(void 0,e)}},s.getTagsForCommissionJunction=function(){if(void 0===a)return{};for(var e,t={amounts:[],discounts:[],skus:[],tradein_only:0===a.items.length},n=0,r=0;r<a.items.length;r++)e=a.items[r],t.amounts.push(o.displayPrice(void 0,e.totalPrice)),t.skus.push(e.product.sku),t.discounts.push(o.displayPrice(void 0,-1*e.totalDiscount)),n=o.add(n,-1*e.totalDiscount);return t.total_discount=o.displayPrice(void 0,n),t},s.getTagsForOrderToTrack=function(){for(var e,t=[],n=[],r=0;r<a.items.length;r++)e={name:(e=a.items[r]).product.name,slug:e.product.pageUrl,amount:o.normMinionAmount(e.totalPrice)},t.push(e);return a.vouchers.forEach(function(e){n.push(null!=e.shortcode?e.shortcode:e.code)}),{id:a.id,amount:o.displayMinionPrice(void 0,a.total.final),purchases:t,original_amount:o.displayMinionPrice(void 0,a.total.basket),order_coupon:n}},s.setRequirements=function(){var t=n.defer();return n.all({user:e.getWhenReady(),order:c.promise}).then(function(e){a=e.order,t.resolve()}),t.promise},s.getUtagData=function(){var t=n.defer();return s.setRequirements().then(function(){var e={};angular.extend(e,r.getRequestTags()),angular.extend(e,r.getUserTags()),angular.extend(e,r.getProductTags()),angular.extend(e,r.getBasketTags()),angular.extend(e,s.getTagsForConfirmation()),angular.extend(e,s.getTagsForCommissionJunction()),t.resolve(e)}),t.promise},s.getOrderToTrackData=function(){var t=n.defer();return s.setRequirements().then(function(){var e=s.getTagsForOrderToTrack();t.resolve(e)}),t.promise},function(e,t){return i.isNullOrUndefined(e)||i.isNullOrUndefined(t)?"":(e/(1+t)).toFixed(2).toString()});return s}]),angular.module("gmgApp").factory("User",["$rootScope","$q","$window",function(e,t,n){function r(){}var i=new r,o=t.defer();return r.get=function(){return i},r.getWhenReady=function(){return n.userData&&!n.userData.userPopulated&&(i.apiDataUpdated(n.userData),n.userData.userPopulated=!0),o.promise},r.prototype.setCookieData=function(e,t,n){void 0===this.username&&(this.username=e,this.currency=t,this.credit=n)},r.prototype.setApiData=function(e){this.avatarUrl=e.AvatarUrl,this.autoplay=e.AutoPlay,this.username=e.Username,this.email={md5:e.EmailMd5,sha1:e.EmailSha1,address:e.Email},this.currency=e.Currency,this.displayCurrencyCode=e.DisplayCurrencyCode,this.country=e.Country,this.city=e.City,this.ip=e.Ip,this.credit=e.Credit,this.library=e.LibraryTotal,this.dateJoined=e.DateJoined,this.isAuthenticated=Boolean(this.username),this.c9id=e.CloudNineId,this.userSessionId=e.UserSessionId,this.currentCountry=e.CurrentCountry,this.activeSwitches=e.ActiveSwitches,this.firstName=e.FirstName,this.lastName=e.LastName,this.isSignedOut=e.IsSignedOut,this.extractedCodes=e.ExtractedCodes,this.languageCode=e.Language,this.hideDecimalsForCurrency=e.HideDecimalsForCurrency,this.currentTime=e.CurrentTime,this.dateOfBirth=e.DateOfBirth,this.newsletterOptIn=e.NewsletterOptIn,this.group=e.Group,this.isGiftingAllowed=e.IsGiftingAllowed,this.regionCode=e.RegionCode,o.resolve(this)},r.prototype.apiDataUpdated=function(e){i.setApiData(e),!e.IsActive&&e.IsSignedOut&&n.location.href!==n.location.origin+"/"&&(n.location.href="/")},e.$on("apiDataUpdated",function(e,t){n.userData||(n.userData=t),i.apiDataUpdated(t)}),r}]),angular.module("gmgApp").factory("UserAgent",["$window",function(e){var n=["android","iphone","windows phone","bb10","meego"],r=e.navigator.userAgent;function t(){}var i=new t;return t.get=function(){return i},t.isMobile=function(){for(var e=r.toLowerCase(),t=0;t<n.length;t++)if(-1!==e.indexOf(n[t]))return!0;return!1},t}]),angular.module("gmgApp").factory("UserCookie",["$q","$cookies","USER_COOKIE_NAME","Currency","User","Basket",function(e,i,o,n,a,s){function t(){}var r=new t;return t.get=function(){return r},t.prototype.getCookieData=function(){var e,t,n,r=i.get(o);r&&(e=(r=r.split(":"))[0],t=r[1],n=parseFloat(r[2]),r=parseFloat(r[3]),a.get().setCookieData(e,t,n),s.get().setCookieData(t,r))},t.prototype.setCookieData=function(e,t){e=[e.username,e.currency,n.displayPrice(void 0,e.credit),t.total.basket].join(":");i.put(o,e)},t.delete=function(){i.remove(o)},t.init=function(){r.getCookieData(),e.all({user:a.getWhenReady(),basket:s.getWhenReady()}).then(function(e){r.setCookieData(e.user,e.basket)})},t}]),angular.module("gmgApp").factory("Utils",["ObjectValidator","$location","$window","QUERY","GAME_GIFTING",function(i,t,o,a,n){var s,r={};return r.isCardNumberValid=(s=[0,2,4,6,8,1,3,5,7,9],function(e){if(/[^0-9-\s]+/.test(e))return!1;for(var t,n=(e=e.replace(/\D/g,"")).length,r=1,i=0;n;)t=parseInt(e.charAt(--n),10),i+=(r^=1)?s[t]:t;return i&&i%10==0}),r.getCreditCardType=function(e){var t="unknown";return/[^0-9-\s]+/.test(e)||(e=e.replace(/\D/g,""),/^5[1-5]/.test(e)?t="mastercard":/^4/.test(e)?t="visa":/^3[47]/.test(e)&&(t="amex")),t},r.isTouchDevice=function(e){return void 0!==e&&void 0!==e.originalEvent.sourceCapabilities?e.originalEvent.sourceCapabilities.firesTouchEvents:"ontouchstart"in window||1==navigator.maxTouchPoints},r.hexDecode=function(e){var t="";if(e&&e.length)for(var n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},r.isNullOrWhitespace=function(e){return!e||!e.trim()},r.ContainsCaseInsensitive=function(e,t){return!i.isNullOrUndefined(e)&&!i.isNullOrUndefined(t)&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},r.getExternalLoginReturnUrl=function(e){return o.returnUrl||(i.isNullOrUndefined(t.search().returnUrl)||"/"===t.path()?e||(i.isNullOrUndefined(t.url())?t.path():t.url()):t.search().returnUrl)},r.redirect=function(e,t,n,r){e=e||"",i.isNullOrEmptyString(t)||(e=e.replace(a.RETURN_URL_PLACEHOLDER,t)),r&&(e=e.replace("http:","https:")),n?o.open(e):o.location=e},r.appendQueryKeyValue=function(e,t,n){var r;return e=e||"",n=n||"",i.isNullOrEmptyString(t)?e:(t=t+a.ASSIGN_CHARACTER+n,n=e,r=a.START_CHARACTER,i.isNullOrEmptyString(n)||i.isNullOrEmptyString(r)||-1===n.indexOf(r)?e+a.START_CHARACTER+t:e+a.DELIMITER+t)},r.namedReplace=function(e,n){return i.isNullOrUndefined(e)||i.isNullOrUndefined(n)?e:e.replace(/\{.+\}/g,function(e){var t=e.substr(1,e.length).substr(0,e.length-2);return n[t]||e})},r.removeWarningPlaceHolder=function(e){if(!i.isNullOrEmptyString(e))return e.replace(n.CONSTANTS.WARNING_PLACEHOLDER,"")},r.getPathAndQuery=function(){return t.url()},r.getUrlDomain=function(e){var e=e.split("."),t=e.length;return e[t-2]+"."+e[t-1]},r.updateUrlParameter=function(e,t,n){var r=e.indexOf("#"),i=-1===r?"":e.substr(r),r=(e=-1===r?e:e.substr(0,r),new RegExp("([?&])"+t+"=.*?(&|$)","i")),o=-1!==e.indexOf("?")?"&":"?";return(e=e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n)+i},r.updateUrlParameters=function(e,t){if(!i.isNullOrUndefined(t))for(var n in t)e=r.updateUrlParameter(e,n,t[n]);return e},r.getQueryString=function(e){if(!e)return{};for(var t=document.createElement("a"),e=(t.href=e,t.search),n=(e=e[0]===a.START_CHARACTER?e.substr(1):e).split(a.DELIMITER),r={},i=0;i<n.length;++i){var o=n[i].split(a.ASSIGN_CHARACTER,2);1===o.length?r[o[0]]="":r[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return r},r.setObjectInLocalStorageAsJson=function(e,t){i.isNullOrUndefined(e)||i.isNullOrEmptyString(t)||(e=JSON.stringify(e),localStorage.setItem(t,e))},r.getObjectFromLocalStorageSavedJson=function(e){if(!i.isNullOrEmptyString(e)){e=localStorage.getItem(e);if(!i.isNullOrEmptyString(e))return JSON.parse(e)}},r}]),angular.module("gmgApp").factory("Voucher",[function(){function t(e,t,n,r){this.displaytext=e,this.code=t,this.discount=n,this.shortcode=r,this.codeToDisplay=r||t}return t.init=function(e){return new t(e.FrontendText,e.Code,e.DiscountAmount,e.ShortCode)},t}]),angular.module("gmgApp").factory("WantListService",["ApiService","$rootScope","MODALS",function(n,r,i){var e={saveToWishList:function(e,t){if(t)return n.want({GameVariantCode:e}).then(function(){return!0});r.$broadcast(i.EVENTS.OPEN_SIGN_IN_MODAL)},unsaveToWishList:function(e,t){if(t)return n.unwant({GameVariantCode:e}).then(function(){return!0});r.$broadcast(i.EVENTS.OPEN_SIGN_IN_MODAL)}};return e}]),angular.module("gmgApp").factory("YoutubeApiLoader",["$q","$window","$rootScope",function(e,t,n){var r=document.createElement("script"),i=(r.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("head")[0].getElementsByTagName("script")[0]),o=(i.parentNode.insertBefore(r,i),e.defer());return t.onYouTubeIframeAPIReady=function(){o.resolve()},{ready:o.promise}}]),angular.module("gmgApp").filter("colorMatch",["$sce",function(n){return function(e,t){return n.trustAsHtml((e=e||"").replace(new RegExp(t,"gi"),'<span class="color-match">$&</span>'))}}]).filter("selectedFacetElements",[function(){return function(e){var t,n=[];for(t in e)if(e.hasOwnProperty(t))for(var r=0;r<e[t].length;r++)e[t][r].IsSelected&&(e[t][r].Type=t,n.push(e[t][r]));return n}}]).filter("toTrustedHtml",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]).filter("toTrustedUrl",["$sce",function(t){return function(e){return t.trustAsResourceUrl(e)}}]).filter("toUrl",["$location",function(t){return function(e){return t.protocol()+"://"+t.host()+(80!==t.port()?":"+t.port():"")+e}}]).filter("toPrice",["Currency",function(n){return function(e,t){return n.displayPrice(t,e)}}]).filter("reverse",[function(){return function(e){return void 0===e?[]:e.slice().reverse()}}]).filter("isGreaterThanZero",[function(){return function(e){return 0<e}}]).filter("fromNow",[function(){return function(e){return moment(e).fromNow()}}]).filter("fromNowLive",[function(){function e(e){return moment(e).fromNow()}return e.$stateful=!0,e}]).filter("toScore",[function(){return function(e){return 10<(e=Math.round(10*e)/10)?10:e}}]).filter("toScoreDecimal",[function(){return function(e){return 10<=(e=(Math.round(10*e)/10).toFixed(1))?10:e}}]).filter("decodeBase64",[function(){return function(t){try{return atob(t)}catch(e){return t}}}]).filter("timeInTwoDigits",[function(){return function(e){var t=parseInt(e);return isNaN(e)?"":0<=e&&e<10?"0"+t:t}}]),angular.module("gmgApp").service("activityService",["$rootScope","ApiService","ACTIVITY_UPDATED","ACTIVITY_ERROR_UPDATED",function(r,i,o,a){var s,l,c=null;return{getOrUpdateActivity:function(e,t,n){return s===t&&e===l&&null!==c?c:(s=t,l=e,i.gamerDetails({id:"1",method:"Gamer.Activity",params:[{steamId:e,limit:n,bookmark:t}]}).then(function(e){e.error&&r.$broadcast(a,e),r.$broadcast(o,e),c=e},function(e){r.$broadcast(a,e)}))}}}]),angular.module("gmgApp").service("adyenCheckoutService",["$rootScope","PAYMENT_METHOD_EVENTS","$q","ApiService","$window","paymentService","Basket","billingAddressService","$timeout","$filter","validationHandlerService","paymentTealiumTagService","paymentMethodConstants",function(t,n,e,i,o,a,s,l,r,c,u,d,p){function h(t){return c("filter")(E,function(e){return e.category===t})}function f(t){return c("filter")(E,function(e){return e.methodId===t})[0]}function m(e){return e&&e.Environment&&e.ClientKey&&e.SessionData&&e.Id}function g(e){m(e)?(e={environment:e.Environment,clientKey:e.ClientKey,showPayButton:!1,session:{id:e.Id,sessionData:e.SessionData},onSubmit:function(e,t){var r;e=e,(t=(r=A(t=t)).postData).softOptIn=_.softOptIn,t.address=l.getUserAddress(),t.stateData=angular.toJson(e.data.paymentMethod),t.paymentMethodId=e.data.paymentMethod.type,"scheme"===e.data.paymentMethod.type&&p.NON_HOSTED&&(t.saveCardDetails=e.data.storePaymentMethod,t.nameOnCard=e.data.paymentMethod.holderName),i.placeOrder(t).then(function(t){var n;t&&t.data?t.data.Action?(n=angular.fromJson(t.data.Action),o.adyenHostedPendingPaymentMethods.includes(n.paymentMethodType)?s.getWhenReady().then(function(e){d.updateTealiumTagsForAdyenComponentDeferredPayment(t.data,e,n),_.paymentRequestDeferred.resolve(),T(n,r)}):T(n,r)):o.location.href=t.data.RedirectUrl:w({data:o.unableToPlaceOrderMessage})},function(e){w(e)}).finally(function(){a.setCurrentPlaceOrderRequestOwner(null)})},onAdditionalDetails:function(e,t){var n=null;e&&e.data&&e.data.details&&(n=e.data.details.payload),i.processPaymentAdditionalResponse(n).then(function(e){o.location.href=e.data})}},o.AdyenCheckout(e).then(function(e){v=e,y.resolve(),t.$broadcast(n.ADYEN_CHECKOUT_OBJECT_READY,e)}).finally(function(){y.resolve()})):(y.resolve(),t.$broadcast(n.ADYEN_CHECKOUT_OBJECT_READY))}var v=null,y=e.defer(),b=!1,S=!1,_=null,E=[],C=!1,w=function(e){u.broadcastNewValidationModel(e),_.paymentRequestDeferred.reject(),o.scrollTo(0,0),a.placeOrderProcessFailed(),a.placeOrderInProgressButton(!1)},T=function(e,t){r(function(){v.createFromAction(e).mount("#"+t.containerId)})},A=function(t){return c("filter")(E,function(e){return e.component===t})[0]};return{isCardFieldsValid:function(){return C},setCardFieldsValidation:function(e){C=e},isHppSessionDataAvailable:function(){return S},isCardsSessionAvailable:function(){return S},setCanLoadAdyenComponent:function(){b=!0},canLoadAdyenComponent:function(){return b},retrieveComponentMapsByCategory:h,storeComponentMap:function(e){E.push(e),t.$broadcast(n.ADYEN_CHECKOUT_COMPONENT_ADDED),e.category===p.RECURRING_CONTRACT&&(e=(e=h(p.RECURRING_CONTRACT))&&0<e.length,t.$broadcast(n.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,e))},deleteComponentMap:function(e){e=f(e),e=E.indexOf(e),E.splice(e,1),e=h(p.RECURRING_CONTRACT),e=e&&0<e.length;t.$broadcast(n.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,e)},retrieveComponentMap:function(e){return A(e)},retrieveComponentMapByMethodId:f,retrieveComponentMapByContainerId:function(e){return t=e,c("filter")(E,function(e){return e.containerId===t})[0];var t},getCheckoutComponent:function(){return v},isComponentBuilding:function(){return y},adyenCheckoutBuildPromise:function(){return y?y.promise:null},makeAdyenComponentRequest:function(e,t){S=m(e),g(e)},submitComponent:function(e,t,n){_=e;e=f(n);e.postData.paymentMethodCategory=t,e.component.submit()},isRenderedSavedCardsAvailable:function(){var e=h(p.RECURRING_CONTRACT),e=e&&0<e.length;return t.$broadcast(n.ADYEN_CHECKOUT_COMPONENT_SAVED_CARDS_AVAILABLE,e),e}}}]),angular.module("gmgApp").service("AgeVerificationService",["$rootScope","ObjectValidator","MODALS","User","$cookies","pdpGateService",function(i,o,a,e,t,s){var l=this;return l.verifyAge=function(t,n,r){s.hasPdpGateCookie()?i.$broadcast(a.EVENTS.AGE_VERIFIED):(t=parseInt(t),(o.isNullOrUndefined(t)||isNaN(t))&&(t=16),e.getWhenReady().then(function(e){0===t?i.$broadcast(a.EVENTS.AGE_VERIFIED):o.isNullOrUndefined(e.dateOfBirth)?i.$broadcast(a.EVENTS.OPEN_AGE_VERIFICATION,r):l.calculateAge(e.dateOfBirth)<t?i.$broadcast(a.EVENTS.OPEN_TOO_YOUNG,n):i.$broadcast(a.EVENTS.AGE_VERIFIED)}))},l.calculateAge=function(e){return o.isNullOrUndefined(e)?null:(e=moment(e),moment(new Date).diff(e,"years"))},l.getDateOfBirthSelectValues=function(e,t){for(var n=e<t,r=[],i=e;n?i<=t:t<=i;n?i++:i--)r.push(0<i&&i-10<0?"0"+i.toString():i.toString());return r},l.hasUnderAgeCookie=function(){return"True"===t.get("too_young")},l}]),angular.module("gmgApp").service("AlgoliaSearchItemMapperService",["$window","base64Service",function(h,f){function m(e,t,n,r,i){return e=!!e,t=!!t,r&&!t&&n?"Mrp":e?"Rrp":"Drp"}function g(e,t){return GMGSettings.drmSettingsByDrmId[e.Drm]?GMGSettings.drmSettingsByDrmId[t.Drm]?GMGSettings.drmSettingsByDrmId[e.Drm].Order-GMGSettings.drmSettingsByDrmId[t.Drm].Order:1:-1}return{fetchPriceFields:m,itemMap:function(e,t,n,r,i,o,a){var s,l,c,u,d,p=e.Regions[t];return null==e.Regions||null==p?null:(r=m(p.IsHideDrp,p.IsHideMrp,r,i),s=new Date(p.ReleaseDate).getTime(),d=new Date(p.UnlockDate).getTime(),l=(new Date).getTime(),u=e.OutOfStockRegions?!!e.OutOfStockRegions[t]:!!p.IsOutOfStock,c=!!p.IsComingSoon||l<s&&l<d,d=!p.IsComingSoon&&l<s&&d<=l,d=c?n.ComingSoon:u?n.OutOfStock:e.IsFreeToPlay?n.FreeToPlay:d?n.PrePurchase:n.AddToBasket,n="Mrp"===r&&p.Mrp<p.Drp,t=((e,t)=>{for(var n=[{Drm:e.DrmId,Code:e.objectID,Platform:e.PlatformId}],r=null,r=null!=e.DrmId?e.RegionalRelatedVariantsByDrmId&&e.RegionalRelatedVariantsByDrmId[t]?e.RegionalRelatedVariantsByDrmId[t]:[]:e.RegionalRelatedVariants&&e.RegionalRelatedVariants[t]?e.RegionalRelatedVariants[t]:[],i=n.concat(r),o={},a=0;a<i.length;a++)void 0===o[i[a].Drm]&&(o[i[a].Drm]=1<i.filter(function(e){return i[a].Drm===e.Drm}).length),i[a].ShowPlatform=o[i[a].Drm];return i})(e,t).sort(g),c={selectedEdition:{sku:e.objectID,drmId:e.DrmId,drmColour:GMGSettings.drmSettingsByDrmId[e.DrmId]?GMGSettings.drmSettingsByDrmId[e.DrmId].Colour:null,url:e.Url,freeToPlayLink:e.FreeToPlayLink,disableButton:c||u,buttonLabel:d,icon:c?"glyphicon-calendar":"glyphicon-shopping-cart",showPrices:!c&&!e.FreeToPlayLink,releaseDate:l<s?p.ReleaseDateDisplayText:"",imageUrl:(u=e.ImageUrl,(d=h.GMGSettings.cdn)&&u?("/"===d.charAt(d.length-1)&&"/"===u.charAt(0)?d=d.slice(0,-1):"/"!==d.charAt(d.length-1)&&"/"!==u.charAt(0)&&(d+="/"),d+u):u),rrp:h.displayPrice(p.CurrencyCode,p.Rrp,!1,o),currentPrice:h.displayPrice(p.CurrencyCode,p[r],!1,o),currentPriceInDecimal:p[r],discountPercentOff:0!==p.Rrp?Math.round((p.Rrp-p[r])/p.Rrp*100):0,cornerFlashText:p.CornerFlashText,cornerFlashColor:p.CornerFlashColor,cornerFlashBackgroundColor:p.CornerFlashBackgroundColor,cornerFlashIcon:p.CornerFlashIcon,cornerFlashIconDesign:p.CornerFlashIconDesign,cornerFlashOverrideVip:p.CornerFlashOverrideVip,cornerFlashVipUsersOnly:p.CornerFlashVipUsersOnly,cornerFlashCustomDesign:p.cornerFlashBackgroundColor?p.cornerFlashCustomDesign+"; border-color: "+p.cornerFlashBackgroundColor:p.cornerFlashCustomDesign,hasCornerFlash:p.hasCornerFlash&&(i||p.cornerFlashOverrideVip)||n&&i},displayName:e.DisplayName,position:e.__position,drmTabs:t.slice(0,3),drmCountClass:"drm-count-"+(3<t.length?"more":t.length),queryId:a},{hitBase64:f.encode(JSON.stringify(c))})}}}]),angular.module("gmgApp").service("AlgoliaSearchService",["$rootScope","$q","ApiService","$window","User","AlgoliaSearchItemMapperService","ALGOLIA_HITS_PER_PAGE","SCREEN_SIZE_BREAKPOINTS","ALGOLIA_HITS_BREAKPOINTS","AlgoliaCustomToggleRefinement","$http","MODALS","tealiumLoggingService",function(v,a,s,Ae,l,Pe,Oe,n,r,Ie,Re,Me,De){function y(e,t){var n=e.showMore;null!==(e=document.getElementById(t))&&e.addEventListener("click",function(){n()})}function c(t,e){var n,r=$("#"+Be).get()[0];v.isCustomQuery&&(r=$("#custom-search-box").get()[0]),e&&r.addEventListener("input",function(e){t.refine(e.target.value)}),t.query&&(r.value=t.query,!v.isCustomQuery)&&Le&&(n=t.query,clearTimeout(i),i=setTimeout(function(){s.reportAlgoliaSearch(n)},o))}var i,b="",Ne="",ke="",Le=!1,xe=!1,$e=!1,Ue="",Fe="",Be="search-input",Ge=function(e,t){var n=e.isRefined?"checked":"";return t&&"function"==typeof t&&(e.label=t(e)),'<label class="ais-RefinementList-label"> <input type="checkbox" class="ais-RefinementList-checkbox" value="'+e.value+'" '+n+'><div class="item-wrap"><span class="ais-RefinementList-labelText">'+e.label+'</span><span class="ais-RefinementList-count"> '+e.count+"</span ><div> </label>"},o=GMGSettings.reportAlgoliaSearchDebounceTimeout||300;function S(e){var t=0;return e.forEach(function(e){e()&&t++}),t}function _(j,H,Y,z,W,q,K,Q,X,n,r,i,o,Z,J,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,de,pe,he,fe,me,ge,ve,ye,be,Se,_e,Ee,Ce,we,Te){var e=fetch("//images.greenmangaming.com/static/templates/directives/algolia_item_hits.8568f27c6.html").then(function(e){return e.text()}),t=s.getIndexName();a.all([e,t]).then(function(e){b=e[0],j=instantsearch.connectors.connectSearchBox(c),H=instantsearch.connectors.connectInfiniteHits(n),Y=instantsearch.connectors.connectInfiniteHits(r),i&&(z=instantsearch.connectors.connectInfiniteHits(i)),o&&(W=instantsearch.connectors.connectInfiniteHits(o)),ke=e[1].data.IndexName;var t=e[1].data.Prefix;l.getWhenReady().then(function(e){e.isAuthenticated&&(Le=!0),Ue=e.currency,$e=e.hideDecimalsForCurrency,"Normal"!==e.group&&(xe=!0),Ne=e.country,Fe=Pe.fetchPriceFields(!1,!1,Le,xe),Q.isVipUser=xe,Q.sortSelected=ke,Q.indexName=ke,Q.priceAscIndex=t+"_"+Ne+"_"+Fe+"_ASC",Q.priceDescIndex=t+"_"+Ne+"_"+Fe+"_DESC",Q.releaseDateNewestFirstIndex=t+"_"+Ne+"_ReleaseDateForSort_Newest_First",Q.releaseDateOldestFirstIndex=t+"_"+Ne+"_ReleaseDateForSort_Oldest_First",Q.sortChange=function(e){if(e){Q.sortSelected=e.target.dataset.value;for(var t=e.currentTarget.children,n=0;n<t.length;n++)t[n].classList.remove("selected");e.target.classList.add("selected")}Q.sortSelected===Q.priceAscIndex?Q.currentSort="asc":Q.sortSelected===Q.priceDescIndex?Q.currentSort="dsc":Q.sortSelected===Q.releaseDateNewestFirstIndex?Q.currentSort="releasedate_newest":Q.sortSelected===Q.releaseDateOldestFirstIndex?Q.currentSort="releasedate_oldest":Q.currentSort=void 0,Q.dlcWidget.getHelper().setIndex(Q.sortSelected),Q.nonDlcWidget.getHelper().setIndex(Q.sortSelected),Q.search.helper.setIndex(Q.sortSelected).search()};{var n=j,o=ke,r=H,i=Y,a=q,s=K,l=Q,c=X,u=Z,d=J,p=ee,h=te,f=ne,m=re,g=ie,v=oe,y=ae,b=se,S=le,_=ce,E=ue,C=de,w=pe,T=he,A=fe,P=me,O=ge,I=ve,U=ye,F=be,R=Se,M=_e,D=Ee,B=Ce,G=we,V=Te;function N(e){return"Regions."+Ne+"."+e}E.isFromHeader&&(c=E.searchFromHeader());var k,L={IsEarlyAccess:function(e){e.label=R.facetItemLabels.EarlyAccess},DrmName:function(e){e.label=e.label},SupportedVrs:function(e){e.label=M[e.label]}},x=(L[N("IsXpOffer")]=function(e){e.label=R.facetItemLabels.XpOffer},L[N("IsOnSale")]=function(e){e.label=R.facetItemLabels.OnSale},L[N("IsOnSaleVip")]=function(e){e.label=R.facetItemLabels.OnSale},L[N("ReleaseDateStatus")]=function(e){"InStock"==e.label&&(e.label=D.Released),"PreOrder"==e.label&&(e.label=D.PrePurchase),"ComingSoon"==e.label&&(e.label=D.ComingSoon)},AlgoliaAnalytics.createInsightsClient(function(e,t){Re.post(e,t,{withCredentials:!1})}));x.init({appId:a,apiKey:s}),e.isAuthenticated?x.setUserToken(e.c9id):x.setAnonymousUserToken();let t=function(e){k&&clearTimeout(k),k=setTimeout(function(){e.search()},500)};l.search=instantsearch({indexName:o,searchClient:algoliasearch(a,s),routing:{stateMapping:{stateToRoute:function(e){var e=e[o],t=e.refinementList||{};return{query:e.query,genre:t.Genre,platform:t.PlatformName,earlyaccess:t.IsEarlyAccess,franchise:t.Franchise,price:(e.range||{})["Regions."+Ne+"."+Fe],sort:l.currentSort,drm:e.menu?e.menu.DrmName:void 0,vr:t.SupportedVrs}},routeToState:function(e){e.sort!==l.currentSort&&("asc"===e.sort?l.sortSelected=l.priceAscIndex:"dsc"===e.sort?l.sortSelected=l.priceDescIndex:"releasedate_newest"===e.sort?l.sortSelected=l.releaseDateNewestFirstIndex:"releasedate_oldest"===e.sort?l.sortSelected=l.releaseDateOldestFirstIndex:l.sortSelected=l.indexName,l.currentSort=e.sort);var t={},n=(t["Regions."+Ne+"."+Fe]=e.price,{});return n[o]={query:e.query,refinementList:{Genre:He(e.genre),PlatformName:He(e.platform),IsEarlyAccess:e.earlyaccess,Franchise:He(e.franchise),SupportedVrs:He(e.vr)},menu:e.drm?{DrmName:e.drm}:void 0,range:t},n}},router:instantsearch.routers.history({createURL:function(e){var t=e.qsModule.stringify(e.routeState,{addQueryPrefix:!0,arrayFormat:"repeat"});return E.isAlgoliaSearchPage()||l.queryParamsOverride?e.location.href.split("?")[0]+t:e.location.href}})},searchFunction:function(e){e.getIndex()!==l.sortSelected?(l.dlcWidget.getHelper().setIndex(l.sortSelected),l.nonDlcWidget.getHelper().setIndex(l.sortSelected),e.setIndex(l.sortSelected).search()):(2<e.state.query.length||0===e.state.query.length)&&t(e)}}),l.dlcWidget=instantsearch.widgets.index({indexName:o,indexId:"dlc"}),l.nonDlcWidget=instantsearch.widgets.index({indexName:o,indexId:"nondlc"}),l.search.addWidgets([n(),instantsearch.widgets.configure({query:""!==c?c:void 0,filters:je(),hitsPerPage:Oe,distinct:!0,analytics:B,clickAnalytics:!0,ruleContexts:[Ue,Ue+"_"+Ne,Ne]}),instantsearch.widgets.refinementList({container:S,attribute:"Franchise",searchable:!0,limit:5,templates:{item:function(e){return Ge(e)}}}),instantsearch.widgets.refinementList({container:_,attribute:"IsEarlyAccess",limit:5,templates:{item:function(e){return Ge(e,function(e){return"true"==e.value?R.facetItemLabels.EarlyAccess:R.facetItemLabels.HideEarlyAccess})}}}),instantsearch.widgets.refinementList({container:b,attribute:"Genre",searchable:!0,limit:5,templates:{item:function(e){return Ge(e)}}}),instantsearch.widgets.refinementList({container:v,attribute:"PlatformName",templates:{item:function(e){return Ge(e)}},transformItems:function(e){return e.filter(function(e){return"Clothing"!=e.value})}}),instantsearch.widgets.refinementList({container:R.elementIds.publisherList,attribute:"PublisherName",templates:{item:function(e){return Ge(e)}}}),instantsearch.widgets.refinementList({container:R.elementIds.vrList,attribute:"SupportedVrs",templates:{item:function(e){return Ge(e)}},transformItems:function(e){return e.map(function(e){return e.label=M&&M[e.value]?M[e.value]:null,e}).filter(function(e){return!!e.value})}}),instantsearch.widgets.refinementList({container:R.elementIds.releaseStatusList,attribute:N("ReleaseDateStatus"),templates:{item:function(e){return"FreeToPlay"==e.label||"OutOfStock"==e.label?null:Ge(e,function(e){return"InStock"==e.label?D.Released:"PreOrder"==e.label?D.PrePurchase:"ComingSoon"==e.label?D.ComingSoon:void 0})}}}),instantsearch.widgets.rangeSlider({container:C,attribute:N(Fe),tooltips:{format:function(e){return Ae.displayPrice(Ue,e,!1,!0)}}}),instantsearch.widgets.menu({container:y,attribute:"DrmName",templates:{item:function(e){var t=e.url,n="",r="",i=GMGSettings.drmSettingsByDrmName[e.value],o=i?i.Colour:null,i=i?i.ClassName:null,a="onMouseOver=\"this.style.backgroundColor='"+o+"'\"";return e.isRefined?(r="background-color: "+o+"; opacity: 1",n="active"):a+=" onMouseOut=\"this.style.backgroundColor='#494a4f'\"",'<li class="game-drm '+n+'" style="'+r+'" '+a+'>                         <a href="'+t+'">                           <div class="'+i+'-drm-icon-sm item-center"></div>                         </a>                       </li>'}},sortBy:function(e,t){return t.isRefined?1:GMGSettings.drmSettingsByDrmName[e.path].Order===GMGSettings.drmSettingsByDrmName[t.path].Order?0:GMGSettings.drmSettingsByDrmName[e.path].Order>GMGSettings.drmSettingsByDrmName[t.path].Order?1:-1}}),instantsearch.widgets.clearRefinements({container:T}),l.dlcWidget.addWidgets([instantsearch.widgets.configure({filters:je(!0),distinct:!0,analytics:!1}),i(),instantsearch.widgets.stats({container:g,templates:{text:"{{nbHits}}"}})]),l.nonDlcWidget.addWidgets([instantsearch.widgets.configure({filters:je(!1),distinct:!0,analytics:!1}),r(),instantsearch.widgets.stats({container:m,templates:{text:"{{nbHits}}"}})]),instantsearch.widgets.currentRefinements({container:w,transformItems:function(e){return e.filter(function(e){return e.refinements.forEach(function(e){L[e.attribute]&&L[e.attribute](e)}),e.refinements})}})]),l.search.addWidgets(xe?[Ie({attribute:N("IsOnSaleVip"),container:document.querySelector(R.elementIds.isOnSaleVipContainer),checkboxLabel:R.facetItemLabels.OnSale}),Ie({attribute:N("IsXpOffer"),container:document.querySelector(R.elementIds.isXpOfferContainer),checkboxLabel:R.facetItemLabels.XpOffer})]:[Ie({attribute:N("IsOnSale"),container:document.querySelector(R.elementIds.isOnSaleContainer),checkboxLabel:R.facetItemLabels.OnSale})]),l.reportClick=function(e,t,n,r){var i=l.search.helper.lastResults.queryID;E.isCustomQuery||utag.link({tealium_event:"search_click",product_id:e}),E.isCustomQuery&&De.logSelectItemClicked(e,r,G,V),x.clickedObjectIDsAfterSearch({index:o,eventName:n,queryID:i,objectIDs:[e],positions:[t]})},l.search.start(),E.getAlgoliaQueryString=function(){l.queryParamsOverride=!0;var e=l.search.createURL(),e=(l.queryParamsOverride=!1,e.split("?")[1]);return e?"?"+e:""},l.$on(Me.EVENTS.CLOSE_ALGOLIA_SEARCH_MODAL,function(){l.search.helper.clearRefinements(),l.search.helper.setQuery("")}),l.search.on("render",function(){var e=$("#"+Be);function t(){$(I).removeClass("adjust-width").removeClass("adjust-height"),$("#algolia-search-modal").removeClass("overflow-hidden-class").removeClass("filter-popout-open"),$("body").removeClass("overflow-hidden-class")}$(".ais-SearchBox-submit").on("click",function(){Ae.location.href="/search"+l.algoliaQueryString}),""===l.hits&&""!==l.dlcHits||e.val().toLowerCase().includes("dlc")?(l.gameTabActive=!1,$("#"+d).click()):""!==l.hits&&""===l.dlcHits&&(l.gameTabActive=!0,$("#"+p).click()),$(u).find("a[data-toggle=tab]").on("click",function(){this.id===d?l.gameTabActive=!1:l.gameTabActive=!0}),$(A).on("click",function(){$(I).addClass("adjust-width"),$("body").addClass("overflow-hidden-class"),$("#algolia-search-modal").addClass("overflow-hidden-class").addClass("filter-popout-open"),0<$("#algolia-search-modal:visible").size()&&$(I).addClass("adjust-height")}),$(P+","+F).on("click",function(){t()}),$(document).click(function(e){0<$(e.target).closest(O).length&&0<!$(e.target).closest(U).length&&t()}),Ve(m,h),Ve(g,f);var e=parseInt($(m).find(".ais-Stats-text").text()),n=parseInt($(g).find(".ais-Stats-text").text());l.totalResultCount=e+n,l.nonDlcSinglePage=e<=Oe,l.dlcSinglePage=n<=Oe,$(window).resize(function(e){Ve(m,h),Ve(g,f)})})}z&&W&&(e=ke,a=z,s=W,(n=Q).searchNoResults=instantsearch({indexName:e,searchClient:algoliasearch(q,K)}),n.dlcWidgetNoResults=instantsearch.widgets.index({indexName:e,indexId:"dlc"}),n.nonDlcWidgetNoResults=instantsearch.widgets.index({indexName:e,indexId:"nondlc"}),n.searchNoResults.addWidgets([instantsearch.widgets.configure({filters:je(),hitsPerPage:12,distinct:!0,analytics:!1}),n.dlcWidgetNoResults.addWidgets([instantsearch.widgets.configure({filters:je(!0),distinct:!0,analytics:!1}),s()]),n.nonDlcWidgetNoResults.addWidgets([instantsearch.widgets.configure({filters:je(!1),distinct:!0,analytics:!1}),a()])]))})})}var Ve=function(e,t){e=parseInt($(e).find(".ais-Stats-text").text());$(window).width()>=n.DESKTOP&&u(t,e,r.DESKTOP),$(window).width()<=n.DESKTOP-1&&$(window).width()>=n.TABLET&&u(t,e,r.TABLET),$(window).width()<n.TABLET&&u(t,e,r.MOBILE)},u=function(e,t,n){n<(t=Number.isNaN(t)?0:t)&&(t=n+"+"),$(e).html('<div class="ais-Stats"><span class="ais-Stats-text">'+t+"</span></div>")},je=function(e){var t="IsSellable:true AND AvailableRegions:"+Ne+" AND NOT ExcludeCountryCodes:"+Ne;return void 0!==e&&(t+=" AND IsDlc:"+e.toString()),t},He=function(e){return e&&!Array.isArray(e)?[e]:e};return{initAlgoliaSearch:function(e,t,n,r,i,o,a,s,l,c){r.hits="",r.dlcHits="",r.isLastPage=!1,r.isLastDlcPage=!1,r.gameTabActive=!0,r.totalResultCount=0;function u(e){return'<div class="ais-Hits"><ol class="ais-Hits-list">'+e.hits.map(function(e){var t=r.search.helper.lastResults.queryID;return(e=Pe.itemMap(e,Ne,r.buttonLabels,Le,xe,$e,t))?'<li class="ais-Hits-item">'+Mustache.render(b,e)+"</li>":""}).join("")+"</ol></div>"}var d="#platform-list",p="#drm-list",h="#genre-list",f="#franchise-list",m="#early-access-collapse",g={facetItemLabels:o,elementIds:{publisherList:"#publisher-list",releaseStatusList:"#release-status-list",salesList:"#sales-collapse",isOnSaleContainer:"#is-on-sale",isOnSaleVipContainer:"#is-on-sale-vip",isXpOfferContainer:"#is-xp-offer",vrList:"#vr-list"}};r.loadingAlgoliaHits=!0,r.noOfPlatformsSelected=function(){return $(d).find("input:checked").size()},r.noOfPublisherSelected=function(){return $(g.elementIds.publisherList).find("input:checked").size()},r.noOfDrmSelected=function(){return $(p+" ul li.ais-Menu-item--selected").size()},r.noOfGenreSelected=function(){return $(h).find("input:checked").size()},r.noOfFranchiseSelected=function(){return $(f).find("input:checked").size()},r.noOfReleaseStatusSelected=function(){return $(g.elementIds.releaseStatusList).find("input:checked").size()},r.noOfEarlyAccessSelected=function(){return $(m).find("input:checked").size()},r.noOfSalesSelected=function(){return $(g.elementIds.salesList).find("input:checked").size()},r.isPriceRangeSliderActive=function(){var e=parseInt($(".rheostat-handle-upper").attr("aria-valuemax")),t=parseInt($(".rheostat-handle-lower").attr("aria-valuemin")),n=parseInt($(".rheostat-handle-upper").attr("aria-valuenow")),r=parseInt($(".rheostat-handle-lower").attr("aria-valuenow"));return n<e||t<r},r.totalNumberOfFacetsSelected=function(){return S([r.noOfPlatformsSelected,r.noOfDrmSelected,r.noOfGenreSelected,r.noOfFranchiseSelected,r.noOfEarlyAccessSelected,r.isPriceRangeSliderActive,r.noOfSalesSelected,r.noOfPublisherSelected,r.noOfReleaseStatusSelected])},r.hidePlatformsFilter=function(){return 0<$(d).find(".ais-RefinementList--noRefinement").length},r.hidePublisherFilter=function(){return 0<$(g.elementIds.publisherList).find(".ais-RefinementList--noRefinement").length},r.hideReleaseStatusFilter=function(){return 0<$(g.elementIds.releaseStatusList).find(".ais-RefinementList--noRefinement").length},r.hideDrmFilter=function(){return 0<$(p).find(".ais-RefinementList--noRefinement").length},r.hideGenreFilter=function(){return 0<$(h).find(".ais-RefinementList--noRefinement").length&&0===$(h).find(".ais-RefinementList-noResults").length},r.hideFranchiseFilter=function(){return 0<$(f).find(".ais-RefinementList--noRefinement").length&&0===$(f).find(".ais-RefinementList-noResults").length},r.hideEarlyAccessFilter=function(){return 0===$(m).find("input").length},r.hideSalesFilter=function(){return 0===$(g.elementIds.salesList).find("input").length},r.hideVrFilter=function(){return 0===$(g.elementIds.vrList).find("input").length},r.showFilterSection=function(){return!(r.hidePlatformsFilter()&&r.hideDrmFilter()&&r.hideGenreFilter()&&r.hideFranchiseFilter()&&r.hideEarlyAccessFilter()&&r.hideSalesFilter()&&r.hideVrFilter()&&r.hidePublisherFilter()&&r.hideReleaseStatusFilter)};r.buttonLabels=i,r.drmDrmNameToDrmIdMap={},Object.keys(GMGSettings.drmSettingsByDrmId).forEach(function(e){r.drmDrmNameToDrmIdMap[GMGSettings.drmSettingsByDrmId[e].Name]=e}),_(0,0,0,void 0,void 0,e,t,r,n,function(e,t){t||(0!==e.hits.length?(v.noResultFromAlgolia=!1,e.isFirstPage&&y(e,"show-more"),r.isLastPage=!!e.isLastPage,r.hits=u(e)):(r.hits="",v.noResultFromAlgolia=!0,!r.noResultsSearchStarted&&r.searchNoResults&&(r.noResultsSearchStarted=!0,r.searchNoResults.start())),r.loadingAlgoliaHits=!1)},function(e){0!==e.hits.length?(e.isFirstPage&&y(e,"show-more-dlc"),r.isLastDlcPage=!!e.isLastPage,r.dlcHits=u(e)):(r.dlcHits="",!r.noResultsSearchStarted&&r.searchNoResults&&(r.searchNoResults.start(),r.noResultsSearchStarted=!0))},function(e,t){t||(r.hitsNoResults=0===e.hits.length?"":u(e),r.noResultsSearchLoaded=!0)},function(e,t){t||(r.dlcHitsNoResults=0===e.hits.length?"":u(e))},"#algolia-tab","dlc-hits-tab","hits-tab","#non-dlc-stats","#dlc-stats","#non-dlc-stats-hidden","#dlc-stats-hidden",d,p,h,f,m,v,"#price-range","#current-refinements","#clear-refinements",".filter",".close-filter","#filter",".filter-expand",".filter-expand-inner",".show-result",g,a,i,s,l,c)},initAlgoliaSearchModal:function(e,t,n,r,i,o,a,s,l,c){r.hits="",r.dlcHits="",r.isLastPage=!1,r.isLastDlcPage=!1,r.gameTabActive=!0,r.totalResultCount=0;function u(e){return'<div class="ais-Hits"><ol class="ais-Hits-list">'+e.hits.map(function(e){var t=r.search.helper.lastResults.queryID;return(e=Pe.itemMap(e,Ne,r.buttonLabels,Le,xe,$e,t))?'<li class="ais-Hits-item">'+Mustache.render(b,e)+"</li>":""}).join("")+"</ol></div>"}var d="#modal-platform-list",p="#modal-drm-list",h="#modal-genre-list",f="#modal-franchise-list",m="#modal-early-access",g={facetItemLabels:o,elementIds:{publisherList:"#modal-publisher-list",releaseStatusList:"#modal-release-status-list",salesList:"#modal-sales-collapse",isOnSaleContainer:"#modal-is-on-sale",isOnSaleVipContainer:"#modal-is-on-sale-vip",isXpOfferContainer:"#modal-is-xp-offer",vrList:"#modal-vr-list"}};r.loadingAlgoliaHits=!0,r.noOfPlatformsSelected=function(){return $(d).find("input:checked").size()},r.noOfPublisherSelected=function(){return $(g.elementIds.publisherList).find("input:checked").size()},r.noOfDrmSelected=function(){return $(p+" ul li.ais-Menu-item--selected").size()},r.noOfGenreSelected=function(){return $(h).find("input:checked").size()},r.noOfFranchiseSelected=function(){return $(f).find("input:checked").size()},r.noOfReleaseStatusSelected=function(){return $(g.elementIds.releaseStatusList).find("input:checked").size()},r.noOfEarlyAccessSelected=function(){return $(m).find("input:checked").size()},r.noOfSalesSelected=function(){return $(g.elementIds.salesList).find("input:checked").size()},r.isPriceRangeSliderActive=function(){var e=parseInt($(".rheostat-handle-upper").attr("aria-valuemax")),t=parseInt($(".rheostat-handle-lower").attr("aria-valuemin")),n=parseInt($(".rheostat-handle-upper").attr("aria-valuenow")),r=parseInt($(".rheostat-handle-lower").attr("aria-valuenow"));return n<e||t<r},r.totalNumberOfFacetsSelected=function(){return S([r.noOfPlatformsSelected,r.noOfDrmSelected,r.noOfGenreSelected,r.noOfFranchiseSelected,r.noOfEarlyAccessSelected,r.isPriceRangeSliderActive,r.noOfSalesSelected,r.noOfPublisherSelected,r.noOfReleaseStatusSelected])},r.hidePlatformsFilter=function(){return 0<$(d).find(".ais-RefinementList--noRefinement").length},r.hidePublisherFilter=function(){return 0<$(g.elementIds.publisherList).find(".ais-RefinementList--noRefinement").length},r.hideReleaseStatusFilter=function(){return 0<$(g.elementIds.releaseStatusList).find(".ais-RefinementList--noRefinement").length},r.hideDrmFilter=function(){return 0<$(p).find(".ais-RefinementList--noRefinement").length},r.hideGenreFilter=function(){return 0<$(h).find(".ais-RefinementList--noRefinement").length&&0===$(h).find(".ais-RefinementList-noResults").length},r.hideFranchiseFilter=function(){return 0<$(f).find(".ais-RefinementList--noRefinement").length&&0===$(f).find(".ais-RefinementList-noResults").length},r.hideEarlyAccessFilter=function(){return 0===$(m).find("input").length},r.hideSalesFilter=function(){return 0===$(g.elementIds.salesList).find("input").length},r.hideVrFilter=function(){return 0===$(g.elementIds.vrList).find("input").length},r.showFilterSection=function(){return!(r.hidePlatformsFilter()&&r.hideDrmFilter()&&r.hideGenreFilter()&&r.hideFranchiseFilter()&&r.hideEarlyAccessFilter()&&r.hideSalesFilter()&&r.hidePublisherFilter()&&r.hideVrFilter()&&r.hideReleaseStatusFilter())};r.buttonLabels=i,r.drmDrmNameToDrmIdMap={},Object.keys(GMGSettings.drmSettingsByDrmId).forEach(function(e){r.drmDrmNameToDrmIdMap[GMGSettings.drmSettingsByDrmId[e].Name]=e}),_(0,0,0,void 0,void 0,e,t,r,n,function(e,t){t||(0!==e.hits.length?(e.isFirstPage&&y(e,"modal-show-more"),r.isLastPage=!!e.isLastPage,r.hits=u(e)):(r.hits="",!r.noResultsSearchStarted&&r.searchNoResults&&(r.noResultsSearchStarted=!0,r.searchNoResults.start())),r.loadingAlgoliaHits&&(r.loadingAlgoliaHits=!1))},function(e){0!==e.hits.length?(e.isFirstPage&&y(e,"modal-show-more-dlc"),r.isLastDlcPage=!!e.isLastPage,r.dlcHits=u(e)):(r.dlcHits="",!r.noResultsSearchStarted&&r.searchNoResults&&(r.noResultsSearchStarted=!0,r.searchNoResults.start()))},function(e,t){t||(r.hitsNoResults=0===e.hits.length?"":u(e),r.noResultsSearchLoaded=!0)},function(e,t){t||(r.dlcHitsNoResults=0===e.hits.length?"":u(e))},"#modal-algolia-tab","modal-dlc-hits-tab","modal-hits-tab","#modal-non-dlc-stats","#modal-dlc-stats","#modal-non-dlc-stats-hidden","#modal-dlc-stats-hidden",d,p,h,f,m,v,"#modal-price-range","#modal-current-refinements","#modal-clear-refinements",".modal-filter",".modal-close-filter","#modal-filter",".modal-filter-expand",".modal-filter-expand-inner",".modal-show-result",g,a,i,s,l,c)}}}]),angular.module("gmgApp").service("ApplePayService",["$rootScope","APPLE_PAY_CONSTANTS","$window","$interval",function(t,n,e,r){var i=null,o=e.ApplePaySession;return{checkIfApplePayIsAvailable:function(){var e;e=JSON.parse(JSON.parse(i).ApplePayTransactionInfo).merchantIdentifier,o&&ApplePaySession.canMakePaymentsWithActiveCard(e).then(function(e){e&&((e=function(){t.$broadcast(n.EVENTS.APPLE_PAY_SUPPORTED)})(),r(e,250,20))})},setApplePayTransactionInfo:function(e){i=e},getApplePayTransactionInfo:function(){return JSON.parse(i)},getApplePaySession:function(){return o}}}]),angular.module("gmgApp").service("awsS3UploadService",["Upload","ObjectValidator",function(i,o){return{uploadToS3:function(e,t,n,r){t={key:e.Key,acl:e.Acl,policy:e.Policy,success_action_status:e.SuccessActionStatus,"Content-Type":o.isNullOrEmptyString(t.type)?"application/octet-stream":t.type,"x-amz-date":e.XAmzDate,"x-amz-credential":e.XAmzCredential,"x-amz-algorithm":e.XAmzAlgorithm,"x-amz-security-token":e.Token,"x-amz-signature":e.XAmzSignature,file:t},i.upload({url:e.BucketUrl,method:"POST",data:t}).then(function(e){e=$.parseXML(e.data),e=$(e),e={bucket:e.find("Bucket").text(),key:e.find("Key").text(),location:e.find("Location").text()};n(e)},r)}}}]),angular.module("gmgApp").service("base64Service",[function(){return{encode:function(e){return btoa((e=>{for(var t=new Uint16Array(e.length),n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return String.fromCharCode.apply(null,new Uint8Array(t.buffer))})(e))},decode:function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(n.buffer))}}}]),angular.module("gmgApp").service("billingAddressService",["$rootScope","BILLING_ADDRESS_EVENTS",function(n,r){var i=null,t=null,o=null,a=null,s=null,l=[];return{broadcastCountryChanged:function(){n.$broadcast(r.COUNTRY_CHANGED)},broadcastAddressLoadCompleted:function(e){l.push(e),n.$broadcast(r.ADDRESS_LOAD_COMPLETED,e)},isAddressLoadCompleted:function(e){return-1<l.indexOf(e)},setBillingMessages:function(e){t=e},getBillingMessages:function(){return t},getUserAddress:function(){return i},setCurrentEditingBillingAddress:function(e){o=e,n.$broadcast(r.UPDATE_EDITED_ADDRESS,e)},getCurrentEditingBillingAddress:function(){return o},setUserBillingAddress:function(e,t){t?o=i=e:(i&&i.CountryCode===e.CountryCode||n.$broadcast(r.COUNTRY_CHANGED,e),o=i=e,n.$broadcast(r.UPDATE_EDITED_ADDRESS,o),n.$broadcast(r.ADDRESS_UPDATED,i))},setBillingAddressForm:function(e){a=e},setBillingAddressFormValidationFunc:function(e){s=e},isBillingAddressFormInvalid:function(){return!a||(a.firstName.$setDirty(),a.firstName.$setTouched(),a.lastName.$setDirty(),a.lastName.$setTouched(),a.address1.$setDirty(),a.address1.$setTouched(),a.postcode.$setDirty(),a.postcode.$setTouched(),a.towncity.$setDirty(),a.towncity.$setTouched(),a.countryCode.$setDirty(),a.countryCode.$setTouched(),a.stateCode.$setDirty(),a.stateCode.$setTouched(),s())}}}]),angular.module("gmgApp").service("blizzardHiddenKeyRedemption",["ApiService","blizzardService","$location","ObjectValidator","ErrorHandler","$q",function(n,e,r,t,i,o){var a=null,s=null,l=null,c=!1,u=null;function d(){e.logon(window.location)}return{iconClass:"blizzard-logo",prepurchaseRedeem:function(e,t){return e={AccountId:a,BattleTag:s,RedemptionCode:r.search()[e],Sku:t},n.activatePrePurchasedBlizzardKey(e).success(function(e){s=e.username,c=!0}).error(function(e){var t={hasServerError:!0};e.IsDefaultErrorMessage&&e.ErrorCode?t.message=e.ErrorCode+e.ErrorMessage:t.message=e.ErrorMessage,u.$parent.prePurchasedRedemptionValidation=t})},prepurchaseInit:function(e){u=e;var t=o.defer();return n.getBlizzardProfile().success(function(e){e?(a=e.AccountId,s=e.Username,t.resolve()):d()}).error(function(e){l=e,t.reject()}),t.promise},switchUser:function(){u.initializing=!0,e.switchUser(window.location)},username:function(){return s},redeemed:function(){return c},authenticationErrorMessage:function(){return l},authorize:d}}]),angular.module("gmgApp").factory("blizzardService",["$rootScope","BLIZZARD_CONSTANTS","base64Service","$window",function(t,n,r,i){return{logon:function(e){e=e||i.location,i.location="/Account/BlizzardLogin?returnUrl="+r.encode(e)},switchUser:function(e){e=e||i.location,i.location="/Account/BlizzardSwitchUser?returnUrl="+r.encode(e)},broadcastOpenModal:function(e){t.$broadcast(n.BLIZZARD_OPEN_MODAL,e)},broadcastKeyActivated:function(e){t.$broadcast(n.BLIZZARD_BROADCAST_KEY_ACTIVATED,e)},broadcastAuthenticationError:function(e){t.$broadcast(n.BLIZZARD_BROADCAST_AUTHENTICATION_ERROR,e)},broadcastSwitchUser:function(){t.$broadcast(n.BLIZZARD_BROADCAST_SWITCH_USER)},broadcastReauthorize:function(){t.$broadcast(n.BLIZZARD_BROADCAST_REAUTHORIZE)}}}]),angular.module("gmgApp").service("boaCompraFormService",["$rootScope","BOA_COMPRA_EVENTS",function(t,n){return{requestBoaCompraFormSubmission:function(e){t.$broadcast(n.REQUEST_FORM_SUBMISSION,e)}}}]),angular.module("gmgApp").service("clickWithSpinnerService",["$rootScope","EVENTS",function(n,r){return{broadCastGroupSpinnerStatus:function(e,t){e&&n.$broadcast(r.CLICK_WITH_SPINNER_GROUP_STATUS,{groupTag:e,status:t})}}}]),angular.module("gmgApp").service("clipboardService",["$window","$document",function(e,n){var r=angular.element("<textarea/>");r.css({position:"fixed",opacity:"0"});return{copy:function(e,t){$(t).append(r),r.val(e),r.focus(),r.select(),n[0].execCommand("copy")||prompt("Copy to clipboard: Ctrl+C, Enter",e),r.remove()}}}]),angular.module("gmgApp").service("cognitoVerificationCodeModalService",["$q",function(e){var t=e.defer();return{setModal:function(e){t.resolve(e)},getModal:function(){return t.promise}}}]),angular.module("gmgApp").service("dynamicWidthService",[function(){function r(e){var t,n,r;for(e.style.removeProperty("width"),n=e.offsetWidth,r=e.offsetHeight,t=n;t&&(e.style.width=t+"px",e.offsetHeight===r);t--);e.style.width=t<e.scrollWidth?e.style.maxWidth=e.scrollWidth+"px":t+2+"px",e.style.visibility="visible"}return{setDynamicWidthToAllDiv:function(e){for(var t=document.querySelectorAll(e),n=0;n<t.length;n++)r(t[n])},setDynamicWidthToElement:function(e){r(e)}}}]),angular.module("gmgApp").service("epicHiddenKeyRedemption",["$location","ApiService","ErrorHandler","$q","hiddenKeyRedemptionService","base64Service","$window",function(r,i,e,o,t,n,a){var s=null,l=null,c=!1,u=null,d=function(e){e=e||a.location.href,a.location="/Account/EpicLogin?providerName=Epic&returnUrl="+n.encode(e)};function p(t){var n=o.defer();return i.getEpicProfile().then(function(e){e.data&&e.data.AccountId?(s=e.data.AccountId,l=e.data.Username,n.resolve(e.data)):d(t)},function(e){n.reject(e)}),n.promise}return{iconClass:"epic-logo",redeem:function(){var e={Keyname:u.gameInfo.keyName,IdentityId:s,Username:l,BoxId:u.gameInfo.boxId};return i.activateEpicKey(e).then(function(e){u.isSuccessful=!0,t.broadcastKeyActivated({keyname:u.gameInfo.keyName,username:e.data.username,boxId:u.gameInfo.boxId})},function(e){u.isSuccessful=!1,u.errorMessage=e.data.ErrorMessage,u.errorCode=e.data.ErrorCode,u.isDefaultErrorMessage=e.data.IsDefaultErrorMessage}).catch(function(){u.isSuccessful=!1}).finally(function(){u.attemptMade=!0})},prepurchaseRedeem:function(e,t){var n={IdentitiyId:s,Username:l,RedemptionCode:r.search()[e],Sku:t};return p().then(function(){return i.activateEpicPrepurchaseKey(n).success(function(e){l=e.username,c=!0}).error(function(e){var t={hasServerError:!0};e.IsDefaultErrorMessage&&e.ErrorCode?t.message=e.ErrorCode+e.ErrorMessage:t.message=e.ErrorMessage,u.$parent.prePurchasedRedemptionValidation=t})})},init:function(e){return u=e,o.resolve()},prepurchaseInit:function(e){return u=e,p()},switchUser:function(){var e=o.defer();return window.open("https://accounts.epicgames.com/logout")?i.clearEpicProfile().then(function(){e.reject()}):e.resolve({username:l,accountId:s}),e.promise},username:function(){return l||null},redeemed:function(){return c},authenticationErrorMessage:function(){return null},authorize:p}}]),angular.module("gmgApp").service("fingerprintService",["$q","FINGERPRINT_CONSTS",function(r,i){return{getFingerprint:function(){var n=r.defer();function e(){n.resolve("")}window.fpPromise||e();var t=JSON.parse(localStorage.getItem(i.CACHE_KEY));return t&&new Date(t.timeout)>new Date?n.resolve(t.data):window.fpPromise.then(function(e){return e.get()},e).then(function(e){var t=new Date((new Date).getTime()+864e5),t=JSON.stringify({data:e.visitorId,timeout:t});localStorage.setItem(i.CACHE_KEY,t),n.resolve(e.visitorId)},e),n.promise}}}]),angular.module("gmgApp").service("globalVariablesService",[function(){var t="",n="",r="",i="",o="";return{getDefaultProdImg:function(){return t},getDefaultVerticalProdImg:function(){return n},getDefaultLargeProdImg:function(){return r},getDefaultMainProdImg:function(){return i},setDefaultProdImg:function(e){t=e},setDefaultVerticalProdImg:function(e){n=e},setDefaultLargeProdImg:function(e){r=e},setDefaultMainProdImg:function(e){i=e},setCdnUrl:function(e){o=e},getCdnUrl:function(){return o}}}]),angular.module("gmgApp").service("googlePayService",["$rootScope","GOOGLE_PAY_CONSTANTS",function(t,n){var r=null,i=null,o=null,a=null,s=!1,l=null,c=null,u=[],d=!1,p=!1;return{getPaymentsClient:function(){return r},setPaymentsClient:function(e){r=e},setCardPaymentMethod:function(e){i=e},getCardPaymentMethod:function(){return i},getGoogleTransactionInfo:function(){return o},setGoogleTransactionInfo:function(e){o=e},getGooglePayMerchantName:function(){return l},setGooglePayMerchantName:function(e){l=e},getGooglePayMerchantId:function(){return c},setGooglePayMerchantId:function(e){c=e},getBaseRequest:function(){return a},setBaseRequest:function(e){a=e},setInitializationCompletedFlag:function(){t.$broadcast(n.EVENTS.INITIALIZATION_COMPLETED)},setInitializationSuccessfulFlag:function(e){s=e},getInitializationSuccessfulFlag:function(){return s},getGooglePayButtons:function(){return u},addGooglePayButton:function(e){u.push(e)},setGooglePayIsAvailable:function(e){d=e},getGooglePayIsAvailable:function(){return d},broadcastButtonInitTriggered:function(e){p=e,t.$broadcast(n.EVENTS.INITIALIZATION_TRIGGERED,e)},getButtonInitTriggered:function(){return p}}}]),angular.module("gmgApp").factory("hiddenKeyRedemptionService",["$rootScope","HIDDEN_KEY_CONSTANTS",function(t,n){return{broadcastOpenModal:function(e){t.$broadcast(n.BROADCAST_OPEN_HIDDEN_KEY_MODAL,e)},broadcastKeyActivated:function(e){t.$broadcast(n.BROADCAST_HIDDEN_KEY_ACTIVATED,e)}}}]),angular.module("gmgApp").service("LanguageService",["$cookies","GMG_LOCALE_COOKIE",function(n,r){var t;function i(){return GMGSettings&&GMGSettings.languageCode?(o(GMGSettings.languageCode),GMGSettings.languageCode):t}function o(e){var t=new Date;t.setFullYear(t.getFullYear()+1),n.put(r,e,{path:"/",expires:t})}return{getCurrentLanguageCode:i,setLanguage:function(e){t=e,i()!==e&&(o(e),e=buildUrlWithLanguageCode(e),location.href=e)}}}]),angular.module("gmgApp").service("modalService",["$q","MODALS",function(n,r){this.returnUrlValues="",this.proceedToPaymentClicked=!1,this.socialModalImageUrl="";function e(e){e&&$.extend(!0,this,e),this.loadModalInDOM=!1,this.visible=!1}e.prototype.open=function(e){return e&&$.extend(!0,this,e),this.visible=!0,this.loadModalInDOM=!0,this.deferred=n.defer(),this.deferred.promise},e.prototype.close=function(){this.visible=!1};return{AddOrRemoveModalOpenClass:function(){function e(){$(r).addClass(i)}function t(){1<=n?e():$(r).removeClass(i)}var n=0,r="body",i="modal-open";$(".modal").on("shown.bs.modal",function(){n++,t()}),$("#account-verification-modal").on("shown.bs.modal",function(){e()}),$(".modal").on("hide.bs.modal",function(){n--,t(),$("#modalLoginRegister").focus()}),$("#moreinfo-modal").on("hidden.bs.modal",function(){t()})},hidePromise:function(e){var t=n.defer();return e.unbind("hidden.bs.modal").on("hidden.bs.modal",function(){t.resolve()}),e.modal(r.DISPLAY.HIDE),t.promise},Modal:e,modalDirectiveBase:{scope:{model:"="},link:function(e,r){e.$watch("model.visible",function(e,t,n){e&&n.onOpenModal&&n.onOpenModal(),e||(n.onCloseModal&&n.onCloseModal(),n.model.deferred&&(n.model.deferred.resolve(),n.model.deferred=null)),r.find(".modal").modal(e?"show":"hide")}),r.on("shown.bs.modal",function(){e.$apply(function(){e.model.visible=!0})}),r.on("hidden.bs.modal",function(){e.$apply(function(){e.model.visible=!1})})}}}}]),angular.module("gmgApp").service("myAccountService",["$rootScope","ApiService","DATE_OF_BIRTH_FORM_CLOSED","UPDATE_EMAIL_FORM_CLOSED","BILLING_ADDRESS_FORM_CLOSED","UPDATE_PASSWORD_FORM_CLOSED","ALL_FORM_CLOSED",function(e,t,n,r,i,o,a){var s=!1,l=!1,c=null;return{init:function(){s=!0},loadUserProfile:function(){return l||(l=!0,t.userProfile().success(function(e){c=e})),c},openDateOfBirthForm:function(){s&&(e.$broadcast(i),e.$broadcast(r),e.$broadcast(o))},openUpdateEmailForm:function(){s&&(e.$broadcast(n),e.$broadcast(i),e.$broadcast(o))},openBillingAddressForm:function(){s&&(e.$broadcast(r),e.$broadcast(n),e.$broadcast(o))},openUpdatePasswordForm:function(){s&&(e.$broadcast(r),e.$broadcast(n),e.$broadcast(i))},closeForm:function(){s&&e.$broadcast(a)}}}]),angular.module("gmgApp").service("newsletterOptInService",["$window",function(t){var n="marketingCheckboxMarked",r=!1;return{setNewsletterCheckbox:function(e){r=e,t.sessionStorage&&(e?t.sessionStorage.setItem(n,!0):t.sessionStorage.removeItem(n))},getNewsletterCheckbox:function(){return r=t.sessionStorage&&t.sessionStorage.getItem(n)?!0:r}}}]),angular.module("gmgApp").service("paymentBillingAddressHtmlService",["PAYMENT_METHOD_EVENTS","$rootScope",function(t,n){var r=null,i=null,o=null;return{setBillingAddressHtml:function(e){r=e},getBillingAddressHtml:function(){return r},setBillingAddressPromise:function(e){i=e,n.$broadcast(t.BILLING_ADDRESS_PROMISE)},getBillingAddressPromise:function(){return i},setBillingAddressHtmlUrl:function(e){o=e},getBillingAddressHtmlUrl:function(){return o}}}]),angular.module("gmgApp").service("paymentFormGeneratorService",["QUERY",function(r){return{generatePaymentForm:function(t,e,n){e.split(r.DELIMITER).forEach(function(e){e=e.split(n);t[e[0]]=e[1]})}}}]),angular.module("gmgApp").service("paymentMethodsService",["$rootScope","PAYMENT_METHOD_EVENTS","$timeout","paymentMethodConstants",function(i,a,s,t){function o(e,t,n,r){c=t,u=n,i.$broadcast(e,{selectedPaymentMethodGroup:c,selectedPaymentMethod:u,initialSetup:r})}function l(e,t,n){-1!==e.paymentMethodsGroup.methods.indexOf(e.selectedPaymentMethod)&&(!angular.isFunction(n)||angular.isFunction(n)&&n(e))&&(e.selectedPaymentMethod.isNotReadyToSubmit=t)}var c=null,u=null,n=!1;return{broadcastPaymentMethodsLoaded:function(e,t,n){i.$broadcast(a.LOADING_COMPLETE,{paymentMethodsGroups:e,selectedPaymentMethodGroup:t,selectedPaymentMethod:n})},broadcastPaymentMethodsLoadingStatus:function(e){n=e,i.$broadcast(a.PAYMENT_METHODS_LOADING_STATUS_CHANGED,e)},getPaymentMethodsLoadingStatus:function(){return n},broadcastSelectedPaymentMethodDetails:function(e,t,n){o(a.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,e,t,n)},broadcastSelectedPaymentMethodGroup:function(e){i.$broadcast(a.SELECTED_PAYMENT_METHOD_GROUP_CHANGED,e)},broadcastResetSelectedPaymentMethod:function(){i.$broadcast(a.RESET_SELECTED_PAYMENT_METHOD)},broadcastSelectedPaymentMethodChange:function(e){u=e,i.$broadcast(a.SELECTED_PAYMENT_METHOD_CHANGED,u)},broadcastPaymentTransactionInfoReady:function(e){i.$broadcast(a.PAYMENT_TRANSACTION_INFO_READY,e)},getSelectedPaymentMethodDetails:function(){return{selectedPaymentMethodGroup:c,selectedPaymentMethod:u}},selectingPaymentMethodOnGroupChangedListener:function(n,r,i){return n.$on(a.SELECTED_PAYMENT_METHOD_GROUP_CHANGED,function(e,t){n.selectedPaymentMethodGroup=t,n.paymentMethodsGroup.uniqueBodyId===n.selectedPaymentMethodGroup.uniqueBodyId&&(n.selectedPaymentMethod=n.selectedPaymentMethodGroup.methods[0],l(n,r),angular.isFunction(i)&&i(n),o(a.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,n.selectedPaymentMethodGroup,n.selectedPaymentMethod))})},resetSelectedPaymentMethodGroupListener:function(t){return t.$on(a.RESET_SELECTED_PAYMENT_METHOD,function(e){s(function(){t.selectedPaymentMethodGroup=null,t.selectedPaymentMethod=null,t.selectedMethodType=null},0)})},paymentMethodDetailsSelectedListener:function(n,r,i,o){return n.$on(a.SELECTED_PAYMENT_METHOD_DETAILS_CHANGED,function(e,t){s(function(){n.selectedPaymentMethodGroup=t.selectedPaymentMethodGroup,n.selectedPaymentMethod=t.selectedPaymentMethod,n.selectedMethodType=null,t.initialSetup&&r&&(l(n,r,i),angular.isFunction(o))&&o(n)},0)})},broadcastDeselectRecurringPaymentRadioButton:function(e){i.$broadcast(a.DESELECT_RECURRING_PAYMENT_RADIO_BUTTON,e)},broadcastSelectRecurringPaymentRadioButton:function(e){i.$broadcast(a.SELECT_RECURRING_PAYMENT_RADIO_BUTTON,e)},broadcastDeselectedTargetRecurringPaymentRadioButton:function(e){i.$broadcast(a.DESELECTED_TARGET_RECURRING_PAYMENT_RADIO_BUTTON,e)},broadCastButtonValidationFunc:function(e){i.$broadcast(a.IS_SUBMISSION_READY_FUNC,e)},broadCastRequestForButtonValidationFunc:function(){i.$broadcast(a.REQUEST_IS_SUBMISSION_READY_FUNC)},broadCastPaymentAccordionChanged:function(){i.$broadcast(a.PAYMENT_METHOD_ACCORDION_CHANGED)},hasCustomButton:function(e){return e===t.PAYPAL},requestForButtonValidationFuncListener:function(t,n){return t.$on(a.REQUEST_IS_SUBMISSION_READY_FUNC,function(e){t.paymentMethodsGroup===t.selectedPaymentMethodGroup&&i.$broadcast(a.IS_SUBMISSION_READY_FUNC,n)})}}}]),angular.module("gmgApp").service("paymentService",["$rootScope","PAYMENT_EVENTS","$location","$filter","URL_PARAMETER_CONSTANTS",function(r,i,n,o,a){var t=!0,s=null;return{readPaymentRelatedUrlQuerys:function(){var e=n.search().paymentfailed,t=n.search().paymentCancelled;return e&&(e=e.toLowerCase(),n.search(a.PAYMENT_FAILED,null)),t&&(t=t.toLowerCase(),n.search(a.PAYMENT_CANCELLED,null)),{paymentFailed:e,paymentCancelled:t}},broadcastExistenceOfPendingOrder:function(e){r.$broadcast(i.PENDING_ORDER_EXISTS,e)},requestOrderPaymentData:function(){r.$broadcast(i.CONSTRUCT_ORDER_PAYMENT_DATA)},updatedDisablePlaceOrderButton:function(e){t=e,r.$broadcast(i.UPDATED_DISABLE_PLACE_ORDER_BUTTON,e)},placeOrderInProgressButton:function(e){r.$broadcast(i.PLACE_ORDER_IN_PROGRESS,e)},listenForPlaceOrderInProgress:function(n){return n.$on(i.PLACE_ORDER_IN_PROGRESS,function(e,t){n.isPlaceOrderInProgess=t})},getDisablePlaceOrderButton:function(){return t},placeOrderProcessFailed:function(){r.$broadcast(i.PLACE_ORDER_PROCESS_FAILED)},createOrderPaymentPostData:function(t,e,n){return t.$on(i.CONSTRUCT_ORDER_PAYMENT_DATA,function(){t.selectedPaymentMethodGroup.uniqueBodyId===t.paymentMethodsGroup.uniqueBodyId&&o("filter")(t.selectedPaymentMethodGroup.methods,function(e){return n(t,e)})[0]&&r.$broadcast(i.RETURN_CONSTRUCTED_ORDER_PAYMENT_DATA,e(t))})},setCurrentPlaceOrderRequestOwner:function(e){s=e},getCurrentPlaceOrderRequestOwner:function(){return s},triggerComponentSubmit:function(e){r.$broadcast(i.TRIGGER_COMPONENT_SUBMIT,e)}}}]),angular.module("gmgApp").service("paymentTealiumTagService",["$window","Currency","QUERY","paymentFormGeneratorService",function(r,n,i,o){function a(e){var t=[];return e.items.forEach(function(e){t.push({amounts:n.displayPrice(null,e.totalPrice),discount:n.displayPrice(null,e.quantity*e.product.discount*-1),id:e.product.sku,quantity:e.quantity+"",subnostroAmount:n.displayPrice(null,e.subNostroAmount),voucherDiscount:n.displayPrice(null,-1*e.product.voucherDiscount),voucherPrice:n.displayPrice(null,e.product.voucherPrice),voucherDisplayWarning:e.product.voucherDisplayWarning})}),t}return{updateTealiumTagsForBoaCompraPayment:function(e,t,n){o.generatePaymentForm(e,t.data.RedirectUrl,i.ASSIGN_BOACOMPRA_CHARACTER),r.utag&&(r.deferredPaymentToTrack={id:e.OrderId,isFirstPurchase:"true"===e.IsFirstPurchase,amount:t.data.Amount,clientEmail:e.ClientEmail,currency:e.CurrencyCode,country:e.CountryPayment,items:a(n)},r.utag.view(r.utag_data))},updateTealiumTagsForDeferredPayment:function(e,t,n){o.generatePaymentForm(e,t.data.RedirectUrl,i.ASSIGN_CHARACTER),r.utag&&(r.deferredPaymentToTrack={id:t.data.OrderId,isFirstPurchase:"true"===t.data.IsFirstPurchase,amount:t.data.Amount,clientEmail:decodeURIComponent(e.shopperEmail),currency:e.currencyCode,country:e.countryCode,paymentMethod:e.brandCode,items:a(n)},r.utag.view(r.utag_data))},updateTealiumTagsForAdyenComponentDeferredPayment:function(e,t,n){r.utag&&(r.deferredPaymentToTrack={id:e.OrderId,isFirstPurchase:"true"===e.IsFirstPurchase,amount:e.Amount,clientEmail:e.ShopperEmail,currency:t.currency,country:e.CountryCode,paymentMethod:n.paymentMethodType,items:a(t)},r.utag.view(r.utag_data))}}}]),angular.module("gmgApp").service("payPalService",["billingAddressService","paymentMethodConstants","$window","$timeout","$location","validationHandlerService","Utils","ApiService","$rootScope","PAYMENT_EVENTS","newsletterOptInService","URL_PARAMETER_CONSTANTS","$q","GlobalMessageBarService",function(e,a,o,r,s,l,c,u,d,p,h,t,n,i){var f="",m="",g=function(e,t){return{paymentMethodId:t.id,paymentMethodCategory:e.category,savePayPalDetails:e.savePayPalDetails,usePayPalBillingAgreement:e.usePayPalBillingAgreement,riskSessionCorrelationId:f}},v=(d.$on(a.PAYPAL_BILLING_AGREEMENT,function(e,t){d.useBillingAgreement=t}),function(e){var t=n.defer();return t.resolve(e),t.promise}),y=function(e,r,i){"undefined"!=typeof paypal&&(d.$broadcast(p.PAYPAL_LOADED),paypal.Buttons({style:{layout:"horizontal",tagline:"false",size:"medium"},funding:{allowed:[paypal.FUNDING.CARD],disallowed:[paypal.FUNDING.CREDIT]},createOrder:function(e,t){var n=g(r,i);return s.url(s.path()),l.requestValidationModelErrorClearing(),n.softOptIn=!h.getNewsletterCheckbox(),u.placeOrder(n).then(function(t){"/?cartExpired=true"===t.data.RedirectUrl&&(o.location.href=t.data.RedirectUrl);var e=c.getQueryString(t.data.RedirectUrl);return n.usePayPalBillingAgreement?(angular.element(document.querySelector("#blackout")).css("display","block"),b(),v(e.ordernumber).then(function(e){o.location.href=t.data.RedirectUrl})):e.token},function(e){l.broadcastNewValidationModel(e)})},onApprove:function(e){return angular.element(document.querySelector("#blackout")).css("display","block"),b(),u.authorizePayPalOrder({orderId:e.orderID}).then(function(e){o.location.href=e.data.RedirectUrl})}}).render(e))},b=function(){d.$broadcast(p.UPDATED_DISABLE_PLACE_ORDER_BUTTON,!0),d.$broadcast(p.HIDE_PAYPAL_BUTTON,!0),angular.element(document.querySelector("#smartPaypal")).css("display","none"),angular.element(document.querySelector("#smartPaypalHeader")).css("display","none")},S=function(e,t,n){0<n?r(function(){"undefined"!=typeof paypal?_(e,t):S(e,t,n-1)},1e3):(E(m,!0),d.$broadcast(p.PAYPAL_LOADED))},_=function(e,t){y("#smartPaypal",e,t),document.querySelector("#smartPaypalHeader")&&y("#smartPaypalHeader",e,t)},E=(angular.element("#paypal-error-modal"),function(e,t){i.globalMessage.visible=!0,i.globalMessage.isError=t,i.globalMessage.message=e});return{deleteExistingPaypal:function(){var e=document.getElementById("smartPaypalHeader"),e=(e&&(e.innerHTML=""),document.getElementById("smartPaypal"));e&&(e.innerHTML="")},setUpPaypalPaymentCheckout:function(e){t=e.paymentMethodGroup,o=e.paymentMethod,"undefined"==typeof paypal?S(t,o,20):_(t,o);var t=e.paymentMethod;if(t.category===a.PAYPAL){f="";for(var n=0;n<32;n++)f+=12===n?"4":(16===n?-5&Math.floor(16*Math.random()|8):Math.floor(16*Math.random())).toString(16);var r,i,t={},o=(t.f=f,t.s="GMG_VPNFYC4TWF3VE_Payment",document.createElement("script")),t=(o.type="application/json",o.setAttribute("fncls","fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99"),o.text=JSON.stringify(t),document.head.appendChild(o),document.createElement("iframe"));t.src="about:blank",t.title="",t.role="presentation",(t.frameElement||t).style.cssText="width: 0; height: 0; border: 0;",(o=(o=document.getElementsByTagName("script"))[o.length-1]).parentNode.insertBefore(t,o);try{i=t.contentWindow.document}catch(e){r=document.domain,t.src='javascript:var d=document.open();d.domain="'+r+'";void(0);',i=t.contentWindow.document}i.open()._l=function(){var e=this.createElement("script");r&&(this.domain=r),e.id="js-iframe-async",e.src="https://www.paypalobjects.com/webstatic/r/fb/fb-all-prod.pp.min.js",this.body.appendChild(e)},i.write('<body onload="document._l();">'),i.close()}},getRiskSessionCorrelationId:function(){return f},setPaypalLoadingErrorMessage:function(e){m=e}}}]),angular.module("gmgApp").service("pdpAssociatedProductsService",["$rootScope","User","PDP_EVENTS",function(t,e,n){var r=!1,i="",o="";return e.getWhenReady().then(function(e){r=e.isAuthenticated,t.$broadcast(n.IS_LOGGED_IN,r)}),{getLoggedInStatus:function(){return r},setLoggedOutUserWishListErrorMessage:function(e){i=e,t.$broadcast(n.LOGGED_OUT_USER_WISH_LIST_ERROR_MESSAGE,i)},getLoggedOutUserWishListErrorMessage:function(){return i},getCurrency:function(){return o},setCurrency:function(e){o=e,t.$broadcast(n.CURRENCY)}}}]),angular.module("gmgApp").service("pdpChartsService",[function(){var t=[];return{disposeCharts:function(){t.forEach(function(e){e.dispose()}),t=[]},addToPdpCharts:function(e){t.push(e)}}}]),angular.module("gmgApp").service("pdpGateService",["$rootScope","ObjectValidator","User","$cookies","$location","LINK_FROM_EMAIL_COOKIE_NAME",function(e,t,n,r,i,o){return this.hasPdpGateCookie=function(){return"True"===r.get(o)},this.checkUrlAndCreateCookie=function(){var e=i.search();if(e.pdpgatetoken&&"true"==e.pdpgatetoken)return(e=new Date).setMinutes(e.getMinutes()+60),r.put(o,"True",{path:"/",expires:e}),!0},this}]),angular.module("gmgApp").service("pdpProductService",["$rootScope","PRODUCT_CHANGED","pdpChartsService",function(t,n,r){var i=null;return{getPdpProduct:function(){return i},broadcastPdpProductChange:function(e){i=e,r.disposeCharts(),t.$broadcast(n,i)}}}]),angular.module("gmgApp").service("pendingOrderService",["ApiService",function(e){var t=null;return{getPendingOrdersByUserPromise:function(){return t=t||e.getPendingOrdersByUser()},clearPendingOrdersByUserPromise:function(){t=null}}}]),angular.module("gmgApp").service("phoneNumberModalService",["$q",function(e){var t=e.defer();return{setModal:function(e){t.resolve(e)},getModal:function(){return t.promise}}}]),angular.module("gmgApp").service("profileBioAvatarService",["$rootScope","AVATAR_UPLOADER_BUSY_STATUS_CHANGED","BIO_SECTION_UPLOADER_BUSY_STATUS_CHANGED","AVATAR_UPLOAD_RESPONSIBILITY_OWNER_CHANGED","AVATAR_UPDATED","IS_CURRENT_USERS_PROFILE","AVATAR_ERROR_UPDATED","AVATAR_ERROR_CLEARED","IS_PROFILE_PUBLIC",function(t,n,r,i,o,a,s,e,l){var c=!1,u=!1,d=!1,p="",h=!1;return{setAvatarUploadState:function(e){c=e,t.$broadcast(n,c)},setBioSectionUploadState:function(e){d=e,t.$broadcast(r,d)},shouldParentGetInitialAvatar:function(e){u=e,t.$broadcast(i,u)},setAvatar:function(e){p=e,t.$broadcast(o,p)},setIsCurrentUsersProfile:function(e){h=e,t.$broadcast(a,e)},setIsProfilePublic:function(e){t.$broadcast(l,e)},setAvatarManagementError:function(e){t.$broadcast(s,e)},clearAvatarError:function(){t.$broadcast(e)},getIsCurrentUsersProfileValue:function(){return h},getAvatarUploadState:function(){return c},getBioSectionUploadState:function(){return d},getAvatar:function(){return p},isAvatarLoadParentsJob:function(){return u}}}]),angular.module("gmgApp").service("profilePublicService",["$rootScope","PROFILE_PUBLIC_UPDATED",function(t,n){var r=null;return{IsProfilePublic:function(e){return"boolean"==typeof e&&(r=e,t.$broadcast(n,data)),r}}}]),angular.module("gmgApp").service("ProfileService",["ApiService",function(e){function t(e){var t=this,n=null;return function(){return n=n||e.apply(t,arguments)}}return{getCommunityDetails:t(e.getCommunityDetails),getCommunicationPreferences:t(e.getCommunicationPreferences)}}]),angular.module("gmgApp").factory("purchaseHistoryCountService",[function(){var t=0;return{setBoxCount:function(e){t=e},getBoxCount:function(){return t}}}]),angular.module("gmgApp").service("SecretVoucherClaimCheckService",["$q","$timeout","ApiService","User",function(t,n,r,i){var o=null,a=[],s=[],l=1e3;return{getClaim:function(e){return a[e]||(a[e]=t.defer(),s.push(e),o&&n.cancel(o),o=n(function(){l*=2;var n=s;s=[],i.getWhenReady().then(function(e){if(!e.isAuthenticated)for(var t=0;t<n.length;t++)a[n[t]].resolve(!1);r.getSecretVoucherOfferDiscountsIfClaimed(n.join(",")).then(function(e){for(var t=0;t<n.length;t++)a[n[t]]&&e.data[n[t]]?a[n[t]].resolve(e.data[n[t]]):a[n[t]].resolve(!1)})},l)})),a[e].promise}}}]),angular.module("gmgApp").service("serverTimeService",["$rootScope","$interval","User","ObjectValidator","TIME_RECEIVED",function(t,e,n,r,i){var o;return n.getWhenReady().then(function(e){o=new moment(e.currentTime),t.$broadcast(i)}),e(function(){r.isNullOrUndefined(o)||o.add(1,"second")},1e3),{getServerTime:function(){return o}}}]),angular.module("gmgApp").service("signInSignUpDefaultTabService",[function(){var t=!0;return{setDefaultTabSignIn:function(e){t=e},getDefaultTabSignIn:function(){return t}}}]),angular.module("gmgApp").service("steamService",["STEAM_USER_ID_UPDATED","$rootScope",function(t,n){var r;return{setSteamUserId:function(e){r=e,n.$broadcast(t,e)},getSteamId:function(){return r}}}]),angular.module("gmgApp").service("tealiumLoggingService",["$window",function(i){return{logSignInAttempt:function(e,t){i.utag&&i.utag.link({tealium_event:"loginRegister",action_type:"sign_in",result:e,method:t})},logRegisterAttempt:function(e,t){var n;i.utag&&(n=200===e.status?"success":"fail",e=!!e.config.data.newsletterOptIn,i.utag.link({tealium_event:"loginRegister",action_type:"register",result:n,method:t,opt_in:e}))},logCognitoRegisterAttempt:function(e,t,n){i.utag&&i.utag.link({tealium_event:"loginRegister",action_type:"register",result:e,method:n,opt_in:!!t})},logSignInModalOpen:function(e){i.utag&&("#signinTab"===e?e="sign_in":"#registerTab"===e&&(e="register"),i.utag.link({tealium_event:"view_loginRegister",modal_type:e}))},logSecretVoucherClaimed:function(e){i.utag&&i.utag.link({tealium_event:"secret_voucher",voucher_config:e})},logDrmButtonClicked:function(e,t,n){i.utag&&i.utag.link({tealium_event:"drm_switch",product_id:e,current_drm:t,requested_drm:n})},logSelectItemClicked:function(e,t,n,r){i.utag&&i.utag.link({tealium_event:"select_item",product_id:e,product_price:parseFloat(t),currency:userData.Currency,item_list_id:n,item_list_name:r})}}}]),angular.module("gmgApp").service("ThirdPartyLazyVoucherService",["$q","$timeout","User","ApiService",function(t,n,r,i){var o=null,a=1e3,s=[],l=[];return{getPrizeLevel:function(e){if(e&&0!==e.length)return s[e]||(s[e]=t.defer(),l.push(e),o&&n.cancel(o),o=n(function(){a*=2;var n=l;l=[],r.getWhenReady().then(function(e){if(!e.isAuthenticated)for(var t=0;t<n.length;t++)s[n[t]].resolve(!1);i.getPrizeLevels(n.join(",")).then(function(e){for(var t=0;t<n.length;t++)s[n[t]]&&e.data[n[t]]?s[n[t]].resolve(e.data[n[t]]):s[n[t]].resolve(!1)})},a)})),s[e].promise}}}]),angular.module("gmgApp").factory("TwitchService",["$window","$sce",function(t,n){function r(e){return e&&e.channel?e.channel.name:null}var i={clientId:GMGSettings.twitchClientId,twitchUrl:"https://api.twitch.tv/kraken/streams/",greenManGamingChannel:"greenmangaming",greenManGamingId:"76465019",getChannelUrl:"https://api.twitch.tv/kraken/channels/{0}/follows"},o={Accept:"application/vnd.twitchtv.v5+json"};o["Client-ID"]=i.clientId;return{getGameStreams:function(e,t){return $.ajax({url:i.twitchUrl,headers:o,data:{game:e.gameName,limit:e.limit},success:function(e){e=e&&e.streams?e.streams:[];t(e)}})},getVideoUrl:function(e){return n.trustAsResourceUrl("https://player.twitch.tv/?channel="+r(e)+"&parent="+t.location.host.split(":")[0])},getChatUrl:function(e){return n.trustAsResourceUrl("https://www.twitch.tv/embed/"+r(e)+"/chat?parent="+t.location.host.split(":")[0])},getFollowers:function(t){var e=i.getChannelUrl.replace("{0}",i.greenManGamingId);return $.ajax({url:e,headers:o,success:function(e){e=e&&e._total||0;t(e)}})}}}]),angular.module("gmgApp").service("uplayConnectSdkService",["$window","$q","UPLAY_CONSTANTS",function(e,s,t){var l=1e3,c=12e3,u=e.GMGSettings.uplayEnvironment,d=e.GMGSettings.uplayConnectAppId,p=e.GMGSettings.uplayGenomeId,h=e.GMGSettings.languageCode,f=function(){return!!Connect};return{isSdkLoaded:f,initializeConnectInstance:function(o,a){return s(function(t,n){var e,r,i={env:u,appId:d,genomeId:p,lang:h,nextUrl:o,thirdPartyCookiesSupport:void 0===a||a};e=s.defer(),r=setInterval(function(){f()&&(e.resolve(),clearInterval(r))},l),setTimeout(function(){clearInterval(r),e.reject("Unable to load Connect SDK")},c),e.promise.then(function(){Connect.init(i),Connect.sdk.subscribe(function(e){t(e)})}).catch(function(e){n(e)})})}}}]),angular.module("gmgApp").service("uplayHiddenKeyRedemption",["$q","$location","uplayService","ErrorHandler","hiddenKeyRedemptionService","$window","ApiService","UPLAY_CONSTANTS",function(t,n,r,e,i,o,a,s){var l=!1,c=null;function u(){return r.getUplayResponse()}function d(e){return c.userInfo=e}return{iconClass:"uplay-logo",redeem:function(){var e={keyName:c.gameInfo.keyName,uplayUserId:c.userInfo.userId,uplayUsername:c.userInfo.username,boxId:c.gameInfo.boxId,uplayUserTicket:c.userInfo.ticket};return a.activateUplayKey(e).then(function(e){c.isSuccessful=!0,i.broadcastKeyActivated({keyname:c.gameInfo.keyName,username:e.data.username,boxId:c.gameInfo.boxId})},function(e){c.isSuccessful=!1,c.errorMessage=e.data.ErrorMessage,c.errorCode=e.data.ErrorCode,c.isDefaultErrorMessage=e.data.IsDefaultErrorMessage}).catch(function(){c.isSuccessful=!1}).finally(function(){c.attemptMade=!0})},prepurchaseRedeem:function(e,t){return e={redemptionCode:n.search()[e],sku:t,uplayUserId:c.userInfo.userId,uplayUsername:c.userInfo.username,uplayUserTicket:c.userInfo.ticket},a.activatePrePurchasedUplayKey(e).success(function(e){l=!0}).error(function(e){var t={hasServerError:!0};e.IsDefaultErrorMessage&&e.ErrorCode?t.message=e.ErrorCode+e.ErrorMessage:t.message=e.ErrorMessage,c.$parent.prePurchasedRedemptionValidation=t})},init:function(e){return c=e,t.resolve()},prepurchaseInit:function(e){return c=e,r.getUplayResponse().then(d)},switchUser:function(){return r.logout().then(u).then(d)},username:function(){return c.userInfo?c.userInfo.username:null},redeemed:function(){return l},authenticationErrorMessage:function(){return null},authorize:u,avatar:function(){return c.userInfo&&c.userInfo.userId?s.UPLAY_AVATAR_BASE_URL+c.userInfo.userId+s.UPLAY_AVATAR_QUERY+o.GMGSettings.uplayConnectAppId:null}}}]),angular.module("gmgApp").service("uplayService",["$window","$rootScope","ObjectValidator","User","$q","UPLAY_CONSTANTS","GlobalMessageBarService","PIXEL_UNIT_TEXT","windowService","ApiService","uplayConnectSdkService",function(n,t,e,r,i,o,a,s,l,c,u){var d=null,p=null,h=null,f=null,m=null,g=encodeURIComponent(n.location.href),v=function(){var t;return m?i.resolve(m):(t=i.defer(),c.getUplayReturnPage().success(function(e){m=e,t.resolve(e)}).error(function(e){t.reject(e)}),t.promise)},y=function(){window.setUplayProfileResponse=function(e){h=e},window.setUplayTicketResponse=function(e){p=e}},b=function(){window.setUplayProfileResponse=void 0,window.setUplayTicketResponse=void 0},S=function(e,t){e=_(e,t),t=E();return window.open(e,o.UPLAY_WINDOW_NAME,t)},_=function(e,t){t=n.GMGSettings.uplayConnectBaseUrl+"/login?lang="+t.languageCode+"&nextUrl="+encodeURIComponent(n.location.origin+e)+"&appId="+n.GMGSettings.uplayConnectAppId;return n.GMGSettings.uplayGenomeId&&(t+="&genomeId="+n.GMGSettings.uplayGenomeId),t},E=function(){return"width="+o.UPLAY_WINDOW_WIDTH+",height="+o.UPLAY_WINDOW_HEIGHT+",top="+(n.innerHeight/2-o.UPLAY_WINDOW_HEIGHT/2)+s+",left="+(n.innerWidth/2-o.UPLAY_WINDOW_WIDTH/2)+s},C=function(){e.isNullOrUndefined(h)||e.isNullOrUndefined(p)?w("Failed to get response from Uplay Connect. Please try again."):d.resolve({ticket:p.ticket,userId:h.userId,username:h.nameOnPlatform})},w=function(e){d.reject(e),T(e)},T=function(e){a.globalMessage.visible=!0,a.globalMessage.isError=!0,a.globalMessage.message=e,n.scrollTo(0,0)};return{logout:function(){var t,n=i.defer();return t=i.defer(),f&&t.resolve(f),u.initializeConnectInstance(g,!1).then(function(e){f=e,t.resolve(e)}).catch(function(e){t.reject(e)}),t.promise.then(function(e){e.logout(p.ticket,p.sessionId).subscribe(function(){d=h=null,n.resolve()})}).catch(function(e){n.reject(e)}),n.promise},getUplayResponse:function(){var e,t;return d=i.defer(),p&&h?C():(e=v(),t=r.getWhenReady(),Promise.all([e,t]).then(function(e){e=S(e[0],e[1]);y(),l.waitForWindowClose(e,o.POLL_INTERVAL,o.WINDOW_TIMEOUT).then(C,w).finally(b)}).catch(w)),d.promise},broadcastKeyActivated:function(e){t.$broadcast(o.BROADCAST_UPLAY_KEY_ACIVATED,e)},broadcastOpenModal:function(e){t.$broadcast(o.UPLAY_OPEN_MODAL,e)},sdkLoaded:function(){return u.isSdkLoaded()}}}]),angular.module("gmgApp").service("userProfileService",["USER_PROFILE_SET_EVENT","$rootScope",function(t,n){var r;return{setUserProfile:function(e){r=e,n.$broadcast(t,e)},getUserProfile:function(){return r}}}]),angular.module("gmgApp").service("validationHandlerService",["$rootScope","ErrorHandler","VALIDATION_MODEL_HANDLER_EVENTS",function(i,o,a){return{broadcastNewValidationModel:function(e,t,n){var r=o.createValidationModel();o.handleResponse(r,e),r.hasServerError=null==n||n,r.isError=t,i.$broadcast(a.BROADCAST_VALIDATION_MODEL,r)},broadcastExistingValidationModel:function(e){i.$broadcast(a.BROADCAST_VALIDATION_MODEL,e)},broadcastValidationError:function(e){i.$broadcast(a.BROADCAST_VALIDATION_ERROR,e)},requestValidationModelErrorClearing:function(){i.$broadcast(a.CLEAR_VALIDATION_MODEL)}}}]),angular.module("gmgApp").service("WantService",["$q","$rootScope","$window","ApiService","User",function(n,o,i,a,e){var s=[],l=[],c=[],u=50,d=2048-a.getAreGamesWantedApiServiceUrl().length,p=null,h=!1;function f(e){for(var t,n,r="",i=[];i.push(e.shift()),0<e.length&&(t=r,n=e[0],r=0==t.length?encodeURIComponent(n):t+encodeURIComponent(","+n)),r.length<=d&&0<e.length;);return i.join(",")}function m(e){o.$broadcast("want:toggle",{code:e,status:c[e]})}return{isWanted:function(t){return s[t]?s[t].promise:e.getWhenReady().then(function(e){return e.isAuthenticated||(c[t]=!1),t in c?(m(t),o.$broadcast("want:loading",{code:t,status:!1}),n.resolve(c[t])):(o.$broadcast("want:loading",{code:t,status:!0}),e=t,r(),s[e]||(s[e]=n.defer()),s[e].promise);function r(){p&&clearTimeout(p),p=setTimeout(i,u)}function i(){h&&r(),h=!0;var e,t=[];for(e in s)s.hasOwnProperty(e)&&t.push(e);var n="";for(0<t.length&&(n=f(t));n&&l.push(new Promise(function(t){a.areGamesWanted(n).then(function(e){t(e)})})),0<(n=0<t.length?f(t):"").length;);Promise.all(l).then(function(e){for(var t=0;t<e.length;t++)for(var n in e[t].data)c[n]=e[t].data[n],s.hasOwnProperty(n)&&(s[n].resolve(e[t].data[n]),delete s[n]),m(n),o.$broadcast("want:loading",{code:n,status:!1});h=i=!1})}})},toggleWant:function(t,n,r){e.getWhenReady().then(function(e){e.isAuthenticated?(c[t]?a.unwant({GameVariantCode:t}):a.want({GameVariantCode:t}).then(function(){utag.link({tealium_event:"wishlist",product_id:t,product_price:n,product_quantity:"1",currency:r})}),c[t]=!c[t],m(t)):(c[t]=!1,m(t),i.scrollTo(0,0))})}}}]),angular.module("gmgApp").service("whirligigCountdownService",["$interval","serverTimeService","ObjectValidator",function(p,h,f){this.whirligigCountdownTimer=function(r){function e(){var e,t,n=new moment(h.getServerTime(),"L HH:m:s");f.isNullOrUndefined(n)||(r.days<1?r.hideDays=!0:r.hideDays=!1,e=l(n),t=c(n),e<=0?(r.onFinish(),p.cancel(a),a=null):t<=0||(u(e,t,n),d(t)))}function n(){r.usingPriceSheet&&!r.endDate||(r.countdownReady=!1,t=r.startDate,o=(i=r.endDate).diff(t),s=!1,t.isValid()&&i.isValid()&&(null==a&&(a=p(e,1e3)),e()))}r.days=r.hours=r.minutes=r.seconds=r.currentProgress=0;var t,i,o,a,s,l=function(e){return i.diff(e)},c=function(e){return e.diff(t)},u=function(e,t){e=moment.duration(e);r.days=Math.floor(e.asDays()),r.hours=e.hours(),r.minutes=e.minutes(),r.seconds=e.seconds(),!s&&0<t&&(s=!0,r.onStart())},d=function(e){e=Math.round(e/o*100);r.currentProgress=100<e?100:e};r.$watchGroup(["startDate","endDate"],function(e,t){e!==t&&n()}),n(),r.shouldBeHidden=function(){return r.timeToEnd<=0}}}]),angular.module("gmgApp").service("ztormHiddenKeyRedemption",["$q","$location","ztormService","ErrorHandler","hiddenKeyRedemptionService",function(t,n,r,e,i){var o=!1,a=null,s=null;function l(e){return a.userInfo=e}return{iconClass:"origin-logo",redeem:function(){var e={keyName:a.gameInfo.keyName,providerAccountId:a.userInfo.Id,providerAccountName:a.userInfo.Name,boxId:a.gameInfo.boxId};return r.redeem(e).then(function(e){a.isSuccessful=!0,i.broadcastKeyActivated({keyname:a.gameInfo.keyName,username:e.data.username,boxId:a.gameInfo.boxId})},function(e){a.isSuccessful=!1,a.errorMessage=e.data.ErrorMessage,a.errorCode=e.data.ErrorCode,a.isDefaultErrorMessage=e.data.IsDefaultErrorMessage}).catch(function(){a.isSuccessful=!1}).finally(function(){a.attemptMade=!0})},prepurchaseRedeem:function(e,t){return e={ProviderAccountId:a.userInfo.Id,ProviderAccountName:a.userInfo.Name,RedemptionCode:n.search()[e],Sku:t},r.prepurchaseRedeem(e).success(function(e){o=!0}).error(function(e){var t={hasServerError:!0};e.IsDefaultErrorMessage&&e.ErrorCode?t.message=e.ErrorCode+e.ErrorMessage:t.message=e.ErrorMessage,a.$parent.prePurchasedRedemptionValidation=t})},init:function(e){return a=e,t.resolve()},prepurchaseInit:function(e,t){return a=e,s=n.search()[t],a.initializing=!1,r.logon(s).then(l)},switchUser:function(){return r.switchUser(s).then(l)},username:function(){return a.userInfo?a.userInfo.Name:null},redeemed:function(){return o},authenticationErrorMessage:function(){return null},authorize:function(){return r.logon(s)}}}]),angular.module("gmgApp").factory("ztormService",["$rootScope","$q","ApiService","ZTORM_CONSTANTS",function(n,r,i,e){var o=e.ACCOUNT_LINK,a=null,s=null;n.$on(o.MODAL_CLOSED,function(e,t,n){t===o.RESULT_USER_CANCELLED&&a.reject(o.RESULT_USER_CANCELLED),t===o.RESULT_SUCCESS&&(s=n,a.resolve(s))});return{logon:function(t){return a=r.defer(),null!=s?a.resolve(s):i.getOriginAccountDetails(t).then(function(e){e.data?(s=e.data,a.resolve(s)):n.$broadcast(o.MODAL_OPEN,t)}),a.promise},switchUser:function(e){return a=r.defer(),n.$broadcast(o.MODAL_OPEN,e),a.promise},redeem:function(e){return i.activateZtormKey(e)},prepurchaseRedeem:function(e){return i.activatePrepurchaseZtormKey(e)}}}]),$(document).ready(function(){initElements(":root")});var ScreenSize={SCREEN_MD_MIN:992},addedPixels=6;if($(document).ready(function(){$(this).width()>=ScreenSize.SCREEN_MD_MIN?$(function(){$(".hidden-sm #edition-list > li").each(function(){var e=$(this).width()+addedPixels;$(this).css("width",e+"px")})}):$(this).width()<ScreenSize.SCREEN_MD_MIN&&$(function(){$(".visible-sm #edition-list > li").each(function(){var e=$(this).width()+addedPixels;$(this).css("width",e+"px")})})}),$(document).ready(function(){$(this).width()>=ScreenSize.SCREEN_MD_MIN?$(function(){$(".hidden-sm #platform-list > li").each(function(){var e=$(this).width()+addedPixels;$(this).css("width",e+"px")})}):$(this).width()<ScreenSize.SCREEN_MD_MIN&&$(function(){$(".visible-sm #platform-list > li").each(function(){var e=$(this).width()+addedPixels;$(this).css("width",e+"px")})})}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return i;i++}return-1}}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{enumerable:!1,writable:!0,value:function(e,t){return!((t="number"!=typeof t?0:t)+e.length>this.length)&&-1!==this.indexOf(e,t)}}),(t=>{function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}function o(e){return decodeURIComponent(String(e).replace(/\+/g," "))}function e(){function a(e){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var t=typeof e;if("undefined"!=t)if("string"==t)""!==e&&this._fromString(e);else if(e instanceof a){var n=this;e.forEach(function(e,t){n.append(t,e)})}else{if(null===e||"object"!=t)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(e))for(var r=0;r<e.length;r++){var i=e[r];if("[object Array]"!==Object.prototype.toString.call(i)&&2===i.length)throw new TypeError("Expected [string, any] as entry at index "+r+" of URLSearchParams's input");this.append(i[0],i[1])}else for(var o in e)e.hasOwnProperty(o)&&this.append(o,e[o])}}var e=a.prototype;e.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},e.delete=function(e){delete this._entries[e]},e.get=function(e){return e in this._entries?this._entries[e][0]:null},e.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},e.has=function(e){return e in this._entries},e.set=function(e,t){this._entries[e]=[String(t)]},e.forEach=function(e,t){for(var n in this._entries)if(this._entries.hasOwnProperty(n))for(var r=this._entries[n],i=0;i<r.length;i++)e.call(t,r[i],n,this)},e.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),r(n)},e.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},e.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),r(n)},n&&(e[Symbol.iterator]=e.entries),e.toString=function(){var n=[];return this.forEach(function(e,t){n.push(i(t)+"="+i(e))}),n.join("&")},t.URLSearchParams=a}var n=(()=>{try{return!!Symbol.iterator}catch(e){return!1}})(),a=((()=>{try{var e=t.URLSearchParams;return"a=1"===new e("?a=1").toString()&&"function"==typeof e.prototype.set}catch(e){return!1}})()||e(),t.URLSearchParams.prototype);"function"!=typeof a.sort&&(a.sort=function(){var n=this,r=[];this.forEach(function(e,t){r.push([t,e]),n._entries||n.delete(t)}),r.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),n._entries&&(n._entries={});for(var e=0;e<r.length;e++)this.append(r[e][0],r[e][1])}),"function"!=typeof a._fromString&&Object.defineProperty(a,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var n=[];this.forEach(function(e,t){n.push(t)});for(var t=0;t<n.length;t++)this.delete(n[t])}for(var r,i=(e=e.replace(/^\?/,"")).split("&"),t=0;t<i.length;t++)r=i[t].split("="),this.append(o(r[0]),1<r.length?o(r[1]):"")}})})("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),(c=>{function e(){function e(e,t){"string"!=typeof e&&(e=String(e));var n,r=document;if(t&&(void 0===c.location||t!==c.location.href)){(n=(r=document.implementation.createHTMLDocument("")).createElement("base")).href=t,r.head.appendChild(n);try{if(0!==n.href.indexOf(t))throw new Error(n.href)}catch(e){throw new Error("URL unable to set base "+t+" due to "+e)}}if((t=r.createElement("a")).href=e,n&&(r.body.appendChild(t),t.href=t.href),":"===t.protocol||!/:/.test(t.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:t});var i=new c.URLSearchParams(this.search),o=!0,a=!0,s=this,l=(["append","delete","set"].forEach(function(e){var t=i[e];i[e]=function(){t.apply(i,arguments),o&&(a=!1,s.search=i.toString(),a=!0)}}),Object.defineProperty(this,"searchParams",{value:i,enumerable:!0}),void 0);Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==l&&(l=this.search,a)&&(o=!1,this.searchParams._fromString(this.search),o=!0)}})}var t=c.URL,n=e.prototype;["hash","host","hostname","port","protocol"].forEach(function(e){var t;t=e,Object.defineProperty(n,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}),Object.defineProperty(n,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(n,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],e=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(e?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),e.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},e.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},c.URL=e}if((()=>{try{var e=new c.URL("b","http://a");return e.pathname="c d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}})()||e(),void 0!==c.location&&!("origin"in c.location)){var t=function(){return c.location.protocol+"//"+c.location.hostname+(c.location.port?":"+c.location.port:"")};try{Object.defineProperty(c.location,"origin",{get:t,enumerable:!0})}catch(e){setInterval(function(){c.location.origin=t()},100)}}})("undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}},configurable:!0,writable:!0}),angular.module("gmg.shared",["ngResource"]).constant("ERROR_INTERCEPTED","ErrorIntercepted").constant("GENERIC_ERROR_MESSAGE","We're currently having a small issue. Please try again. Sorry!"),angular.module("gmg.shared").directive("countryDropdown",["CountryDropdownService",function(e){return{restrict:"E",require:"ngModel",template:function(e,t){return'<select id="'+t.id+'" name="'+t.name+'" class="form-control" disabled="disabled"><option value="">{{ defaultTextValue }}</option><option ng-repeat="country in countries" value="{{country.CountryCode}}" hasSubAreas={{country.HasSubAreas}}  ng-selected="{{country.CountryCode === model}}">{{ country.CountryName }}</option></select>'},replace:!0,scope:{model:"=ngModel",countryName:"=?",defaultText:"@"},link:function(t,n){t.disabled=!0,t.defaultTextValue="Loading...",e.getAllCountries().then(function(e){t.countries=e,t.defaultTextValue=t.defaultText,t.disabled=!1}),t.$watch("disabled",function(e){e?n.attr("disabled","disabled"):n.removeAttr("disabled")}),n.change(function(){""!==n.val()?t.countryName=n.find("option:selected").text():t.countryName=""})}}}]),angular.module("gmg.shared").directive("stateDropdown",["StatesDropdownService",function(l){return{restrict:"E",require:"ngModel",replace:"true",template:function(e,t){return'<select id="'+t.id+'" name="'+t.name+'" class="form-control" disabled="disabled"><option value="">{{ defaultText }}</option><option ng-repeat="state in states" value="{{state.Code}}" ng-selected="{{state.Code === ngModel }}">{{ state.Name }}</option></select>'},scope:{ngModel:"=ngModel",defaultText:"@",stateName:"=?",watchCountry:"="},link:function(n,t,e,r){var i=[],o=n.disabled=!0;function a(){r.$setViewValue(""),n.stateName=null}function s(){var e=0===n.states.length;(n.disabled=e)&&a()}n.$watch(function(){return n.watchCountry},function(){var t;(t=n.watchCountry)&&(i[t]?(n.states=i[t],s()):(o||a(),l.getCountryStates(t).then(function(e){i[t]=e,n.states=e},function(){n.states=[]}).finally(function(){s(),o=!1})))}),n.$watch("disabled",function(e){e?t.attr("disabled","disabled"):t.removeAttr("disabled")}),t.change(function(){""!==t.val()?n.stateName=t.find("option:selected").text():n.stateName=null})}}}]),angular.module("gmg.shared").factory("GlobalMessageBarService",function(){return{globalMessage:{isError:!1,message:"",visible:!1}}}),angular.module("gmg.shared").factory("ObjectValidator",[function(){function t(){}return t.isNullOrUndefined=function(e){return null==e},t.isNullOrEmptyString=function(e){return t.isNullOrUndefined(e)||!e||!angular.isString(e)||0===e.length||!e.trim()},t}]),angular.module("gmg.shared").service("CountryDropdownService",["CountryService",function(e){var t=null;return{getAllCountries:function(){return t=t||e.getAll({}).$promise}}}]),angular.module("gmg.shared").factory("CountryService",["$resource","$q","$window",function(e,n,r){var t=null==GMGSettings.apiServiceUrl?GMGSettings.apiBaseUrl:GMGSettings.apiServiceUrl;return e(t+"/list_countries",{},{getAll:{method:"GET",isArray:!0},getAllWithCallingCode:{method:"GET",isArray:!0,url:t+"/list_countries_with_calling_code",cache:{get:function(e){var t=r.localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;r.localStorage.removeItem(e)}},put:function(t,e){n.when(e).then(function(e){e={value:e.data||e[1],expiry:Date.now()+6e5};r.localStorage.setItem(t,JSON.stringify(e))})}}}})}]),angular.module("gmg.shared").factory("ErrorHandler",["errorInterceptorDetectorService","$rootScope","ERROR_INTERCEPTED","GlobalMessageBarService","ObjectValidator","GENERIC_ERROR_MESSAGE",function(n,e,t,s,l,c){function r(e){return e.data?e.data.ExceptionMessage||e.data.Message||(angular.isString(e.data)&&0<e.data.length?e.data:c):e.statusText||c}function u(e,t){angular.isArray(t.data)?e.validationErrors=t.data:e.exceptionMessage=r(t),i||(e.hasServerError=!0),o.push(e)}var i=!1,o=[];e.$on(t,function(e,t){i=t});return{handleResponse:u,handleError:function(e,t,n,r,i,o){a=t,r=r;var a=500===(n=n)||a?{data:a,status:n,headers:r}:{data:c,status:n,headers:r};u(e,a),!l.isNullOrEmptyString(t)&&i&&(n=t,r=o,l.isNullOrEmptyString(n)||((e=s.globalMessage).visible=!0,e.hideClose=!1,e.isError=!r,e.message=n))},getErrorMessage:r,clearErrors:function(e,t){e.validationErrors=[],e.exceptionMessage="",n.setErrorIntercepted(e.hasServerError=!1),t&&(s.globalMessage.visible=!1)},clearAllErrors:function(e){o.forEach(function(e){e.validationErrors=[],e.exceptionMessage="",e.hasServerError=!1}),o=[],n.setErrorIntercepted(!1),e&&(s.globalMessage.visible=!1)},createValidationModel:function(){return{validationErrors:[],exceptionMessage:"",hasServerError:!1}}}}]),angular.module("gmg.shared").service("errorInterceptorDetectorService",["$rootScope","ERROR_INTERCEPTED",function(t,n){return{setErrorIntercepted:function(e){t.$broadcast(n,e)}}}]),angular.module("gmg.shared").service("StatesDropdownService",["StateService","$filter",function(n,r){var i=[];return{getCountryStates:function(t){var e=r("filter")(i,function(e){return e.countryCode===t})[0];return e||(e={countryCode:t,statesPromise:n.getCountryStates({countryCode:t}).$promise},i.push(e)),e.statesPromise||(e.statesPromise=n.getCountryStates({countryCode:t}).$promise),e.statesPromise}}}]),angular.module("gmg.shared").factory("StateService",["$resource",function(e){return e((null==GMGSettings.apiServiceUrl?GMGSettings.apiBaseUrl:GMGSettings.apiServiceUrl)+"/list_country_states/:countryCode",{countryCode:"@countryCode"},{getCountryStates:{method:"POST",isArray:!0}})}]),angular.module("gmg.shared").factory("windowService",["$window","$q",function(a,s){return{waitForWindowClose:function(e,t,n){var r=s.defer(),i=0,o=a.setInterval(function(){i+=t,e.closed?(r.resolve(),a.clearInterval(o)):n&&n<=i&&(r.reject(),a.clearInterval(o))},t);return r.promise}}}]),!function(root,fnDefine){var define,exports,df=function(){return""},b64map=((()=>{try{new Uint8Array(1),new Uint32Array(1),new Int32Array(1);return}catch(e){}function r(e,t){return this.slice(e,t)}function i(e,t){arguments.length<2&&(t=0);for(var n=0,r=e.length;n<r;++n,++t)this[t]=255&e[n]}function e(e){if("number"==typeof e)for(var t=new Array(e),n=0;n<e;++n)t[n]=0;else t=e.slice(0);return t.subarray=r,(t.buffer=t).byteLength=t.length,t.set=i,"object"==typeof e&&e.buffer&&(t.buffer=e.buffer),t}try{window.Uint8Array=e}catch(e){}try{window.Uint32Array=e}catch(e){}try{window.Int32Array=e}catch(e){}})(),(()=>{var l;"btoa"in window||(l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",window.btoa=function(e){for(var t="",n=0,r=e.length;n<r;n+=3){var i=255&e.charCodeAt(n),o=255&e.charCodeAt(n+1),a=255&e.charCodeAt(n+2),s=(3&i)<<4|o>>4,o=n+1<r?(15&o)<<2|a>>6:64,a=n+2<r?63&a:64;t+=l.charAt(i>>2)+l.charAt(s)+l.charAt(o)+l.charAt(a)}return t})})(),"object"!=typeof JSON&&(JSON={}),!function(){function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),typeof(l="function"==typeof rep?rep.call(t,e,l):l)){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;n<o;n+=1)a[n]=str(n,l)||"null";i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]"}else{if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],l))&&a.push(quote(r)+(gap?": ":":")+i);else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l))&&a.push(quote(r)+(gap?": ":":")+i);i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}"}return gap=s,i}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=t)||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),b64padchar="=",dbits;function hex2b64(e){for(var t,n="",r=0;r+3<=e.length;r+=3)t=parseInt(e.substring(r,r+3),16),n+=b64map.charAt(t>>6)+b64map.charAt(63&t);for(r+1==e.length?(t=parseInt(e.substring(r,r+1),16),n+=b64map.charAt(t<<2)):r+2==e.length&&(t=parseInt(e.substring(r,r+2),16),n+=b64map.charAt(t>>2)+b64map.charAt((3&t)<<4));0<(3&n.length);)n+=b64padchar;return n}function b64tohex(e){for(var t,n="",r=0,i=0;i<e.length&&e.charAt(i)!=b64padchar;++i)(v=b64map.indexOf(e.charAt(i)))<0||(r=0==r?(n+=int2char(v>>2),t=3&v,1):1==r?(n+=int2char(t<<2|v>>4),t=15&v,2):2==r?(n=(n+=int2char(t))+int2char(v>>2),t=3&v,3):(n=(n+=int2char(t<<2|v>>4))+int2char(15&v),0));return 1==r&&(n+=int2char(t<<2)),n}function b64toBA(e){for(var t=b64tohex(e),n=new Array,r=0;2*r<t.length;++r)n[r]=parseInt(t.substring(2*r,2*r+2),16)}var canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);function BigInteger(e,t,n){null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function nbi(){return new BigInteger(null)}function am1(e,t,n,r,i,o){for(;0<=--o;){var a=t*this[e++]+n[r]+i;i=Math.floor(a/67108864),n[r++]=67108863&a}return i}function am2(e,t,n,r,i,o){for(var a=32767&t,s=t>>15;0<=--o;){var l=32767&this[e],c=this[e++]>>15,u=s*l+c*a;i=((l=a*l+((32767&u)<<15)+n[r]+(1073741823&i))>>>30)+(u>>>15)+s*c+(i>>>30),n[r++]=1073741823&l}return i}function am3(e,t,n,r,i,o){for(var a=16383&t,s=t>>14;0<=--o;){var l=16383&this[e],c=this[e++]>>14,u=s*l+c*a;i=((l=a*l+((16383&u)<<14)+n[r]+i)>>28)+(u>>14)+s*c,n[r++]=268435455&l}return i}dbits=j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,26):(BigInteger.prototype.am=am3,28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;for(var BI_FP=52,BI_RM=(BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP,"0123456789abcdefghijklmnopqrstuvwxyz"),BI_RC=new Array,rr,vv,rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(e){return BI_RM.charAt(e)}function intAt(e,t){e=BI_RC[e.charCodeAt(t)];return null==e?-1:e}function bnpCopyTo(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function bnpFromInt(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function nbv(e){var t=nbi();return t.fromInt(e),t}function bnpFromString(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void this.fromRadix(e,t);n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var a=8==n?255&e[r]:intAt(e,r);a<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=a:o+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this[this.t++]=a>>this.DB-o):this[this.t-1]|=a<<o,(o+=n)>=this.DB&&(o-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,0<o)&&(this[this.t-1]|=(1<<this.DB-o)-1<<o),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t}function bnToString(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var n,r=(1<<t)-1,i=!1,o="",a=this.t,s=this.DB-a*this.DB%t;if(0<a--)for(s<this.DB&&0<(n=this[a]>>s)&&(i=!0,o=int2char(n));0<=a;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&r,s<=0&&(s+=this.DB,--a)),(i=0<n?!0:i)&&(o+=int2char(n));return i?o:"0"}function bnNegate(){var e=nbi();return BigInteger.ZERO.subTo(this,e),e}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0}function nbits(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function bnpDRShiftTo(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function bnpLShiftTo(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM,s=this.t-1;0<=s;--s)t[s+o+1]=this[s]>>r|a,a=(this[s]&i)<<n;for(s=o-1;0<=s;--s)t[s]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()}function bnpRShiftTo(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&o)<<i,t[a-n]=this[a]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}}function bnpSubTo(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()}function bnpMultiplyTo(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&BigInteger.ZERO.subTo(t,t)}function bnpSquareTo(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function bnpDivRemTo(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)null!=t&&t.fromInt(0),null!=n&&this.copyTo(n);else{null==n&&(n=nbi());var o=nbi(),a=this.s,e=e.s,s=this.DB-nbits(r[r.t-1]),l=(0<s?(r.lShiftTo(s,o),i.lShiftTo(s,n)):(r.copyTo(o),i.copyTo(n)),o.t),c=o[l-1];if(0!=c){var r=c*(1<<this.F1)+(1<l?o[l-2]>>this.F2:0),u=this.FV/r,d=(1<<this.F1)/r,p=1<<this.F2,h=n.t,f=h-l,m=null==t?nbi():t;for(o.dlShiftTo(f,m),0<=n.compareTo(m)&&(n[n.t++]=1,n.subTo(m,n)),BigInteger.ONE.dlShiftTo(l,m),m.subTo(o,o);o.t<l;)o[o.t++]=0;for(;0<=--f;){var g=n[--h]==c?this.DM:Math.floor(n[h]*u+(n[h-1]+p)*d);if((n[h]+=o.am(0,g,n,f,0,l))<g)for(o.dlShiftTo(f,m),n.subTo(m,n);n[h]<--g;)n.subTo(m,n)}null!=t&&(n.drShiftTo(l,t),a!=e)&&BigInteger.ZERO.subTo(t,t),n.t=l,n.clamp(),0<s&&n.rShiftTo(s,n),a<0&&BigInteger.ZERO.subTo(n,n)}}}}function bnMod(e){var t=nbi();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(BigInteger.ZERO)&&e.subTo(t,t),t}function Classic(e){this.m=e}function cConvert(e){return e.s<0||0<=e.compareTo(this.m)?e.mod(this.m):e}function cRevert(e){return e}function cReduce(e){e.divRemTo(this.m,null,e)}function cMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function cSqrTo(e,t){e.squareTo(t),this.reduce(t)}function bnpInvDigit(){var e,t;return this.t<1||0==(1&(e=this[0]))?0:0<(t=(t=(t=(t=(t=3&e)*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t}function Montgomery(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function montConvert(e){var t=nbi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(BigInteger.ZERO)&&this.m.subTo(t,t),t}function montRevert(e){var t=nbi();return e.copyTo(t),this.reduce(t),t}function montReduce(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)}function montSqrTo(e,t){e.squareTo(t),this.reduce(t)}function montMulTo(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function bnpIsEven(){return 0==(0<this.t?1&this[0]:this.s)}function bnpExp(e,t){if(4294967295<e||e<1)return BigInteger.ONE;var n,r=nbi(),i=nbi(),o=t.convert(this),a=nbits(e)-1;for(o.copyTo(r);0<=--a;)t.sqrTo(r,i),0<(e&1<<a)?t.mulTo(i,o,r):(n=r,r=i,i=n);return t.revert(r)}function bnModPowInt(e,t){t=new(e<256||t.isEven()?Classic:Montgomery)(t);return this.exp(e,t)}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(e){for(var t,n,r=0;r<256;++r)this.S[r]=r;for(r=t=0;r<256;++r)t=t+this.S[r]+e[r%e.length]&255,n=this.S[r],this.S[r]=this.S[t],this.S[t]=n;this.i=0,this.j=0}function ARC4next(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;function rng_seed_int(e){rng_pool[rng_pptr++]^=255&e,rng_pool[rng_pptr++]^=e>>8&255,rng_pool[rng_pptr++]^=e>>16&255,rng_pool[rng_pptr++]^=e>>24&255,rng_psize<=rng_pptr&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}if(null==rng_pool){var t,rng_pool=[],rng_pptr=0;try{if(window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);for(window.crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if(window.msCrypto&&window.msCrypto.getRandomValues){var ua=new Uint8Array(32);for(window.msCrypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}else if(window.crypto&&window.crypto.random){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}}catch(e){}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),(rng_state=prng_newstate()).init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(e){for(var t=0;t<e.length;++t)e[t]=rng_get_byte()}function SecureRandom(){}function parseBigInt(e,t){return new BigInteger(e,t)}function pkcs1pad2(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=e.length-1;0<=r&&0<t;)n[--t]=e[r--];n[--t]=0;for(var i=new SecureRandom,o=new Array;2<t;){for(o[0]=0;0==o[0];)i.nextBytes(o);n[--t]=o[0]}return n[--t]=2,n[--t]=0,new BigInteger(n)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(e,t){null!=e&&null!=t&&0<e.length&&0<t.length?(this.n=parseBigInt(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function RSADoPublic(e){return e.modPowInt(this.e,this.n)}function RSAEncrypt(e){var e=pkcs1pad2(e,this.n.bitLength()+7>>3);return null==e||null==(e=this.doPublic(e))?null:0==(1&(e=e.toString(16)).length)?e:"0"+e}function RSAEncryptB64(e){e=this.encrypt(e);return e?hex2b64(e):null}function q(e){throw e}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encrypt_b64=RSAEncryptB64;var t=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}},F,G,H,I,J,K,evLog;function y(e,t,n){4!==t.length&&q(new sjcl.exception.invalid("invalid aes block size"));var r=e.b[n],i=t[0]^r[0],o=t[n?3:1]^r[1],a=t[2]^r[2];t=t[n?1:3]^r[3];for(var s,l,c=r.length/4-2,u=4,d=[0,0,0,0],p=e.k[n],h=(e=p[0],p[1]),f=p[2],m=p[3],g=p[4],v=0;v<c;v++)p=e[i>>>24]^h[o>>16&255]^f[a>>8&255]^m[255&t]^r[u],s=e[o>>>24]^h[a>>16&255]^f[t>>8&255]^m[255&i]^r[u+1],l=e[a>>>24]^h[t>>16&255]^f[i>>8&255]^m[255&o]^r[u+2],t=e[t>>>24]^h[i>>16&255]^f[o>>8&255]^m[255&a]^r[u+3],u+=4,i=p,o=s,a=l;for(v=0;v<4;v++)d[n?3&-v:v]=g[i>>>24]<<24^g[o>>16&255]<<16^g[a>>8&255]<<8^g[255&t]^r[u++],p=i,i=o,o=a,a=t,t=p;return d}function z(e,t){for(var n,r,i=t.slice(0),t=e.r,o=e.b,a=t[0],s=t[1],l=t[2],c=t[3],u=t[4],d=t[5],p=t[6],h=t[7],f=0;f<64;f++)n=(n=f<16?i[f]:(n=i[f+1&15],r=i[f+14&15],i[15&f]=(n>>>7^n>>>18^n>>>3^n<<25^n<<14)+(r>>>17^r>>>19^r>>>10^r<<15^r<<13)+i[15&f]+i[f+9&15]|0))+h+(u>>>6^u>>>11^u>>>25^u<<26^u<<21^u<<7)+(p^u&(d^p))+o[f],h=p,p=d,d=u,u=c+n|0,c=l,l=s,a=n+((s=a)&l^c&(s^l))+(s>>>2^s>>>13^s>>>22^s<<30^s<<19^s<<10)|0;t[0]=t[0]+a|0,t[1]=t[1]+s|0,t[2]=t[2]+l|0,t[3]=t[3]+c|0,t[4]=t[4]+u|0,t[5]=t[5]+d|0,t[6]=t[6]+p|0,t[7]=t[7]+h|0}function C(e,t){var n,r=sjcl.random.w[e],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n]);for(n=0;n<i.length;n++)i[n](t)}function E(e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),e,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),e,"loadtime")}function A(e){e.b=B(e).concat(B(e)),e.A=new sjcl.cipher.aes(e.b)}function B(e){for(var t=0;t<4&&(e.f[t]=e.f[t]+1|0,!e.f[t]);t++);return e.A.encrypt(e.f)}function D(e,t){return function(){t.apply(e,arguments)}}"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),"function"==typeof define&&define([],function(){return sjcl}),sjcl.cipher.aes=function(e){this.k[0][0][0]||this.D();var t,n,r,i=this.k[0][4],o=this.k[1],a=e.length,s=1;for(4!==a&&6!==a&&8!==a&&q(new sjcl.exception.invalid("invalid aes key size")),this.b=[n=e.slice(0),r=[]],e=a;e<4*a+28;e++)t=n[e-1],(0==e%a||8===a&&4==e%a)&&(t=i[t>>>24]<<24^i[t>>16&255]<<16^i[t>>8&255]<<8^i[255&t],0==e%a)&&(t=t<<8^t>>>24^s<<24,s=s<<1^283*(s>>7)),n[e]=n[e-a]^t;for(a=0;e;a++,e--)t=n[3&a?e:e-4],r[a]=e<=4||a<4?t:o[0][i[t>>>24]]^o[1][i[t>>16&255]]^o[2][i[t>>8&255]]^o[3][i[255&t]]},sjcl.cipher.aes.prototype={encrypt:function(e){return y(this,e,0)},decrypt:function(e){return y(this,e,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){for(var e,t,n,r,i,o,a=this.k[0],s=this.k[1],l=a[4],c=s[4],u=[],d=[],p=0;p<256;p++)d[(u[p]=p<<1^283*(p>>7))^p]=p;for(e=t=0;!l[e];e^=n||1,t=d[t]||1)for(o=16843009*(r=u[p=u[n=u[c[l[e]=i=(i=t^t<<1^t<<2^t<<3^t<<4)>>8^255&i^99]=e]]])^65537*p^257*n^16843008*e,r=257*u[i]^16843008*i,p=0;p<4;p++)a[p][e]=r=r<<24^r>>>8,s[p][i]=o=o<<24^o>>>8;for(p=0;p<5;p++)a[p]=a[p].slice(0),s[p]=s[p].slice(0)}},sjcl.bitArray={bitSlice:function(e,n,r){return e=sjcl.bitArray.P(e.slice(n/32),32-(31&n)).slice(1),r===t?e:sjcl.bitArray.clamp(e,r-n)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){var n,r;return 0===e.length||0===t.length||32===(r=sjcl.bitArray.getPartial(n=e[e.length-1]))?e.concat(t):sjcl.bitArray.P(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+sjcl.bitArray.getPartial(e[t-1])},clamp:function(e,t){var n;return 32*e.length<t||(n=(e=e.slice(0,Math.ceil(t/32))).length,t&=31,0<n&&t&&(e[n-1]=sjcl.bitArray.partial(t,e[n-1]&2147483648>>t-1,1))),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(sjcl.bitArray.bitLength(e)!==sjcl.bitArray.bitLength(t))return u;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},P:function(e,n,r,i){var o=0;for(i===t&&(i=[]);32<=n;n-=32)i.push(r),r=0;if(0===n)return i.concat(e);for(o=0;o<e.length;o++)i.push(r|e[o]>>>n),r=e[o]<<32-n;return o=e.length?e[e.length-1]:0,e=sjcl.bitArray.getPartial(o),i.push(sjcl.bitArray.partial(n+e&31,32<n+e?r:i.pop(),1)),i},l:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){for(var t,n=0;n<e.length;++n)e[n]=(t=e[n])>>>24|t>>>8&65280|(65280&t)<<8|t<<24;return e}},sjcl.codec.utf8String={fromBits:function(e){for(var t,n="",r=sjcl.bitArray.bitLength(e),i=0;i<r/8;i++)0==(3&i)&&(t=e[i/4]),n+=String.fromCharCode(t>>>24),t<<=8;return decodeURIComponent(escape(n))},toBits:function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0,r=0;r<e.length;r++)n=n<<8|e.charCodeAt(r),3==(3&r)&&(t.push(n),n=0);return 3&r&&t.push(sjcl.bitArray.partial(8*(3&r),n)),t}},sjcl.codec.hex={fromBits:function(e){for(var t="",n=0;n<e.length;n++)t+=(0xf00000000000+(0|e[n])).toString(16).substr(4);return t.substr(0,sjcl.bitArray.bitLength(e)/4)},toBits:function(e){var t,n=[],r=(e=e.replace(/\s|0x/g,"")).length;for(e+="00000000",t=0;t<e.length;t+=8)n.push(0^parseInt(e.substr(t,8),16));return sjcl.bitArray.clamp(n,4*r)}},sjcl.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r="",i=0,o=sjcl.codec.base64.J,a=0,s=sjcl.bitArray.bitLength(e);for(n&&(o=o.substr(0,62)+"-_"),n=0;6*r.length<s;)r+=o.charAt((a^e[n]>>>i)>>>26),i<6?(a=e[n]<<6-i,i+=26,n++):(a<<=6,i-=6);for(;3&r.length&&!t;)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,r,i=[],o=0,a=sjcl.codec.base64.J,s=0;for(t&&(a=a.substr(0,62)+"-_"),n=0;n<e.length;n++)(r=a.indexOf(e.charAt(n)))<0&&q(new sjcl.exception.invalid("this isn't base64!")),26<o?(i.push(s^r>>>(o-=26)),s=r<<32-o):s^=r<<32-(o+=6);return 56&o&&i.push(sjcl.bitArray.partial(56&o,s,1)),i}},sjcl.codec.base64url={fromBits:function(e){return sjcl.codec.base64.fromBits(e,1,1)},toBits:function(e){return sjcl.codec.base64.toBits(e,1)}},sjcl.hash.sha256=function(e){this.b[0]||this.D(),e?(this.r=e.r.slice(0),this.o=e.o.slice(0),this.h=e.h):this.reset()},sjcl.hash.sha256.hash=function(e){return(new sjcl.hash.sha256).update(e).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t=this.o=sjcl.bitArray.concat(this.o,e),n=this.h;for(e=this.h=n+sjcl.bitArray.bitLength(e),n=512+n&-512;n<=e;n+=512)z(this,t.splice(0,16));return this},finalize:function(){for(var e=this.o,t=this.r,n=(e=sjcl.bitArray.concat(e,[sjcl.bitArray.partial(1,1)])).length+2;15&n;n++)e.push(0);for(e.push(Math.floor(this.h/4294967296)),e.push(0|this.h);e.length;)z(this,e.splice(0,16));return this.reset(),t},N:[],b:[],D:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,n=0,r=2;e:for(;n<64;r++){for(t=2;t*t<=r;t++)if(0==r%t)continue e;n<8&&(this.N[n]=e(Math.pow(r,.5))),this.b[n]=e(Math.pow(r,1/3)),n++}}},sjcl.mode.ccm={name:"ccm",encrypt:function(e,t,n,r,i){var o,a=t.slice(0),s=sjcl.bitArray,l=s.bitLength(n)/8,c=s.bitLength(a)/8;for(i=i||64,r=r||[],l<7&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),o=2;o<4&&c>>>8*o;o++);return n=s.clamp(n,8*(15-(o=o<15-l?15-l:o))),t=sjcl.mode.ccm.L(e,t,n,r,i,o),a=sjcl.mode.ccm.p(e,a,n,t,i,o),s.concat(a.data,a.tag)},decrypt:function(e,t,n,r,i){i=i||64,r=r||[];var o=sjcl.bitArray,a=o.bitLength(n)/8,s=o.bitLength(t),l=o.clamp(t,s-i),c=o.bitSlice(t,s-i),s=(s-i)/8;for(a<7&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),t=2;t<4&&s>>>8*t;t++);return n=o.clamp(n,8*(15-(t=t<15-a?15-a:t))),l=sjcl.mode.ccm.p(e,l,n,c,i,t),e=sjcl.mode.ccm.L(e,l.data,n,r,i,t),o.equal(l.tag,e)||q(new sjcl.exception.corrupt("ccm: tag doesn't match")),l.data},L:function(e,t,n,r,i,o){var a=[],s=sjcl.bitArray,l=s.l;if(((i/=8)%2||i<4||16<i)&&q(new sjcl.exception.invalid("ccm: invalid tag length")),(4294967295<r.length||4294967295<t.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data")),o=[s.partial(8,(r.length?64:0)|i-2<<2|o-1)],(o=s.concat(o,n))[3]|=s.bitLength(t)/8,o=e.encrypt(o),r.length)for((n=s.bitLength(r)/8)<=65279?a=[s.partial(16,n)]:n<=4294967295&&(a=s.concat([s.partial(16,65534)],[n])),a=s.concat(a,r),r=0;r<a.length;r+=4)o=e.encrypt(l(o,a.slice(r,r+4).concat([0,0,0])));for(r=0;r<t.length;r+=4)o=e.encrypt(l(o,t.slice(r,r+4).concat([0,0,0])));return s.clamp(o,8*i)},p:function(e,t,n,r,i,o){var a=sjcl.bitArray,s=a.l,l=t.length,c=a.bitLength(t);if(n=a.concat([a.partial(8,o-1)],n).concat([0,0,0]).slice(0,4),r=a.bitSlice(s(r,e.encrypt(n)),0,i),!l)return{tag:r,data:[]};for(s=0;s<l;s+=4)n[3]++,i=e.encrypt(n),t[s]^=i[0],t[s+1]^=i[1],t[s+2]^=i[2],t[s+3]^=i[3];return{tag:r,data:a.clamp(t,c)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(e,t,n,r,i,o){128!==sjcl.bitArray.bitLength(n)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var a,s=sjcl.mode.ocb2.H,l=sjcl.bitArray,c=l.l,u=[0,0,0,0];n=s(e.encrypt(n));var d,p=[];for(r=r||[],i=i||64,a=0;a+4<t.length;a+=4)u=c(u,d=t.slice(a,a+4)),p=p.concat(c(n,e.encrypt(c(n,d)))),n=s(n);return d=t.slice(a),t=l.bitLength(d),a=e.encrypt(c(n,[0,0,0,t])),d=l.clamp(c(d.concat([0,0,0]),a),t),u=c(u,c(d.concat([0,0,0]),a)),u=e.encrypt(c(u,c(n,s(n)))),r.length&&(u=c(u,o?r:sjcl.mode.ocb2.pmac(e,r))),p.concat(l.concat(d,l.clamp(u,i)))},decrypt:function(e,t,n,r,i,o){128!==sjcl.bitArray.bitLength(n)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits")),i=i||64;var a,s,l=sjcl.mode.ocb2.H,c=sjcl.bitArray,u=c.l,d=[0,0,0,0],p=l(e.encrypt(n)),h=sjcl.bitArray.bitLength(t)-i,f=[];for(r=r||[],n=0;n+4<h/32;n+=4)a=u(p,e.decrypt(u(p,t.slice(n,n+4)))),d=u(d,a),f=f.concat(a),p=l(p);return a=e.encrypt(u(p,[0,0,0,s=h-32*n])),a=u(a,c.clamp(t.slice(n),s).concat([0,0,0])),d=u(d,a),d=e.encrypt(u(d,u(p,l(p)))),r.length&&(d=u(d,o?r:sjcl.mode.ocb2.pmac(e,r))),c.equal(c.clamp(d,i),c.bitSlice(t,h))||q(new sjcl.exception.corrupt("ocb: tag doesn't match")),f.concat(c.clamp(a,s))},pmac:function(e,t){for(var n=sjcl.mode.ocb2.H,r=sjcl.bitArray,i=r.l,o=[0,0,0,0],a=i(a=e.encrypt([0,0,0,0]),n(n(a))),s=0;s+4<t.length;s+=4)a=n(a),o=i(o,e.encrypt(i(a,t.slice(s,s+4))));return s=t.slice(s),r.bitLength(s)<128&&(a=i(a,n(a)),s=r.concat(s,[-2147483648,0,0,0])),o=i(o,s),e.encrypt(i(n(i(a,n(a))),o))},H:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(e,t,n,r,i){var o=t.slice(0);return t=sjcl.bitArray,e=sjcl.mode.gcm.p(!0,e,o,r=r||[],n,i||128),t.concat(e.data,e.tag)},decrypt:function(e,t,n,r,i){var o=t.slice(0),a=sjcl.bitArray,s=a.bitLength(o);return r=r||[],o=(i=i||128)<=s?(t=a.bitSlice(o,s-i),a.bitSlice(o,0,s-i)):(t=o,[]),e=sjcl.mode.gcm.p(u,e,o,r,n,i),a.equal(e.tag,t)||q(new sjcl.exception.corrupt("gcm: tag doesn't match")),e.data},Z:function(e,t){for(var n,r,i=sjcl.bitArray.l,o=[0,0,0,0],a=t.slice(0),s=0;s<128;s++){for((n=0!=(e[Math.floor(s/32)]&1<<31-s%32))&&(o=i(o,a)),r=0!=(1&a[3]),n=3;0<n;n--)a[n]=a[n]>>>1|(1&a[n-1])<<31;a[0]>>>=1,r&&(a[0]^=-520093696)}return o},g:function(e,t,n){var r,i=n.length;for(t=t.slice(0),r=0;r<i;r+=4)t[0]^=4294967295&n[r],t[1]^=4294967295&n[r+1],t[2]^=4294967295&n[r+2],t[3]^=4294967295&n[r+3],t=sjcl.mode.gcm.Z(t,e);return t},p:function(e,t,n,r,i,o){var a,s,l,c=sjcl.bitArray,u=n.length,d=c.bitLength(n),p=c.bitLength(r),h=c.bitLength(i),f=t.encrypt([0,0,0,0]);for(i=96===h?(i=i.slice(0),c.concat(i,[1])):(i=sjcl.mode.gcm.g(f,[0,0,0,0],i),sjcl.mode.gcm.g(f,i,[0,0,Math.floor(h/4294967296),4294967295&h])),h=sjcl.mode.gcm.g(f,[0,0,0,0],r),l=i.slice(0),r=h.slice(0),e||(r=sjcl.mode.gcm.g(f,h,n)),s=0;s<u;s+=4)l[3]++,a=t.encrypt(l),n[s]^=a[0],n[s+1]^=a[1],n[s+2]^=a[2],n[s+3]^=a[3];return n=c.clamp(n,d),e&&(r=sjcl.mode.gcm.g(f,h,n)),e=[Math.floor(p/4294967296),4294967295&p,Math.floor(d/4294967296),4294967295&d],r=sjcl.mode.gcm.g(f,r,e),a=t.encrypt(i),r[0]^=a[0],r[1]^=a[1],r[2]^=a[2],r[3]^=a[3],{tag:c.bitSlice(r,0,o),data:n}}},sjcl.misc.hmac=function(e,t){this.M=t=t||sjcl.hash.sha256;var n,r=[[],[]],i=t.prototype.blockSize/32;for(this.n=[new t,new t],e.length>i&&(e=t.hash(e)),n=0;n<i;n++)r[0][n]=909522486^e[n],r[1][n]=1549556828^e[n];this.n[0].update(r[0]),this.n[1].update(r[1]),this.G=new t(this.n[0])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(e){return this.Q&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!")),this.update(e),this.digest(e)},sjcl.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=u},sjcl.misc.hmac.prototype.update=function(e){this.Q=!0,this.G.update(e)},sjcl.misc.hmac.prototype.digest=function(){var e=this.G.finalize(),e=new this.M(this.n[1]).update(e).finalize();return this.reset(),e},sjcl.misc.pbkdf2=function(e,t,n,r,i){n=n||1e3,(r<0||n<0)&&q(sjcl.exception.invalid("invalid params to pbkdf2")),"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),e=new(i=i||sjcl.misc.hmac)(e);for(var o,a,s,l=[],c=sjcl.bitArray,u=1;32*l.length<(r||1);u++){for(i=o=e.encrypt(c.concat(t,[u])),a=1;a<n;a++)for(o=e.encrypt(o),s=0;s<o.length;s++)i[s]^=o[s];l=l.concat(i)}return l=r?c.clamp(l,r):l},sjcl.prng=function(e){this.c=[new sjcl.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=t,this.B=e,this.q=u,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},sjcl.prng.prototype={randomWords:function(e,t){var n=[];if((i=this.isReady(t))===this.m&&q(new sjcl.exception.notReady("generator isn't seeded")),i&this.u){var r,i=!(i&this.t),o=[],a=0;for(this.O=o[0]=(new Date).valueOf()+this.T,r=0;r<16;r++)o.push(4294967296*Math.random()|0);for(r=0;r<this.c.length&&(o=o.concat(this.c[r].finalize()),a+=this.i[r],this.i[r]=0,i||!(this.F&1<<r));r++);for(this.F>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.i.push(0)),this.d-=a,a>this.j&&(this.j=a),this.F++,this.b=sjcl.hash.sha256.hash(this.b.concat(o)),this.A=new sjcl.cipher.aes(this.b),i=0;i<4&&(this.f[i]=this.f[i]+1|0,!this.f[i]);i++);}for(i=0;i<e;i+=4)0==(i+1)%this.S&&A(this),o=B(this),n.push(o[0],o[1],o[2],o[3]);return A(this),n.slice(0,e)},setDefaultParanoia:function(e,t){0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t&&q("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=e},addEntropy:function(e,n,r){r=r||"user";var i,o=(new Date).valueOf(),a=this.s[r],s=this.isReady(),l=0,c=this.K[r];switch(c===t&&(c=this.K[r]=this.W++),a===t&&(a=this.s[r]=0),this.s[r]=(this.s[r]+1)%this.c.length,typeof e){case"number":n===t&&(n=1),this.c[a].update([c,this.C++,1,n,o,1,0|e]);break;case"object":if("[object Uint32Array]"===(r=Object.prototype.toString.call(e))){for(i=[],r=0;r<e.length;r++)i.push(e[r]);e=i}else for("[object Array]"!==r&&(l=1),r=0;r<e.length&&!l;r++)"number"!=typeof e[r]&&(l=1);if(!l){if(n===t)for(r=n=0;r<e.length;r++)for(i=e[r];0<i;)n++,i>>>=1;this.c[a].update([c,this.C++,2,n,o,e.length].concat(e))}break;case"string":n===t&&(n=e.length),this.c[a].update([c,this.C++,3,n,o,e.length]),this.c[a].update(e);break;default:l=1}l&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[a]+=n,this.d+=n,s===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.j,this.d)),C("progress",this.getProgress()))},isReady:function(e){return e=this.I[e!==t?e:this.B],this.j&&this.j>=e?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=e?this.u|this.m:this.m},getProgress:function(e){return e=this.I[e||this.B],this.j>=e||this.d>e?1:this.d/e},startCollectors:function(){this.q||(this.a={loadTimeCollector:D(this,this.aa),mouseCollector:D(this,this.ba),keyboardCollector:D(this,this.$),accelerometerCollector:D(this,this.U)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=u)},addEventListener:function(e,t){this.w[e][this.V++]=t},removeEventListener:function(e,t){var n,r,i=this.w[e],o=[];for(r in i)i.hasOwnProperty(r)&&i[r]===t&&o.push(r);for(n=0;n<o.length;n++)delete i[r=o[n]]},$:function(){E(1)},ba:function(e){var t,n;try{t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0}catch(e){n=t=0}0!=t&&0!=n&&sjcl.random.addEntropy([t,n],2,"mouse"),E(0)},aa:function(){E(2)},U:function(e){var t;e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation&&"number"==typeof(t=window.orientation)&&sjcl.random.addEntropy(t,1,"accelerometer"),e&&sjcl.random.addEntropy(e,2,"accelerometer"),E(0)}},sjcl.random=new sjcl.prng(6);e:try{if(I="undefined"!=typeof module){if(J=module.exports){try{K=require("crypto")}catch(L){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array(new Uint8Array(F).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(H=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(H)}sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(M){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(M))}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(e,t,n,r){n=n||{},r=r||{};var i,o=sjcl.json,a=o.e({iv:sjcl.random.randomWords(4,0)},o.defaults);return o.e(a,n),n=a.adata,"string"==typeof a.salt&&(a.salt=sjcl.codec.base64.toBits(a.salt)),"string"==typeof a.iv&&(a.iv=sjcl.codec.base64.toBits(a.iv)),(!sjcl.mode[a.mode]||!sjcl.cipher[a.cipher]||"string"==typeof e&&a.iter<=100||64!==a.ts&&96!==a.ts&&128!==a.ts||128!==a.ks&&192!==a.ks&&256!==a.ks||a.iv.length<2||4<a.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters")),"string"==typeof e?(e=(i=sjcl.misc.cachedPbkdf2(e,a)).key.slice(0,a.ks/32),a.salt=i.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.publicKey&&(i=e.kem(),a.kemtag=i.tag,e=i.key.slice(0,a.ks/32)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),"string"==typeof n&&(n=sjcl.codec.utf8String.toBits(n)),i=new sjcl.cipher[a.cipher](e),o.e(r,a),r.key=e,a.ct=sjcl.mode[a.mode].encrypt(i,t,a.iv,n,a.ts),a},encrypt:function(e,t,n,r){var i=sjcl.json,o=i.Y.apply(i,arguments);return i.encode(o)},X:function(e,t,n,r){n=n||{},r=r||{};var i,o=sjcl.json,a=(t=o.e(o.e(o.e({},o.defaults),t),n,!0)).adata;return"string"==typeof t.salt&&(t.salt=sjcl.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=sjcl.codec.base64.toBits(t.iv)),(!sjcl.mode[t.mode]||!sjcl.cipher[t.cipher]||"string"==typeof e&&t.iter<=100||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||t.iv.length<2||4<t.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters")),"string"==typeof e?(e=(i=sjcl.misc.cachedPbkdf2(e,t)).key.slice(0,t.ks/32),t.salt=i.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.secretKey&&(e=e.unkem(sjcl.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof a&&(a=sjcl.codec.utf8String.toBits(a)),i=new sjcl.cipher[t.cipher](e),a=sjcl.mode[t.mode].decrypt(i,t.ct,t.iv,a,t.ts),o.e(r,t),r.key=e,1===n.raw?a:sjcl.codec.utf8String.fromBits(a)},decrypt:function(e,t,n,r){var i=sjcl.json;return i.X(e,i.decode(t),n,r)},encode:function(e){var t,n="{",r="";for(t in e)if(e.hasOwnProperty(t))switch(t.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),n+=r+'"'+t+'":',r=",",typeof e[t]){case"number":case"boolean":n+=e[t];break;case"string":n+='"'+escape(e[t])+'"';break;case"object":n+='"'+sjcl.codec.base64.fromBits(e[t],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return n+"}"},decode:function(e){(e=e.replace(/\s/g,"")).match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!")),e=e.replace(/^\{|\}$/g,"").split(/,/);for(var t,n={},r=0;r<e.length;r++)(t=e[r].match(/^(?:(["']?)([a-z][a-z0-9]*)\1):(?:(\d+)|"([a-z0-9+\/%*_.@=\-]*)")$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),n[t[2]]=t[3]?parseInt(t[3],10):t[2].match(/^(ct|salt|iv)$/)?sjcl.codec.base64.toBits(t[4]):unescape(t[4]);return n},e:function(e,n,r){if(e===t&&(e={}),n!==t)for(var i in n)n.hasOwnProperty(i)&&(r&&e[i]!==t&&e[i]!==n[i]&&q(new sjcl.exception.invalid("required parameter overridden")),e[i]=n[i]);return e},ea:function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(r[n]=e[n]);return r},da:function(e,n){for(var r={},i=0;i<n.length;i++)e[n[i]]!==t&&(r[n[i]]=e[n[i]]);return r}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.ca={},sjcl.misc.cachedPbkdf2=function(e,n){var r=sjcl.misc.ca,i=(n=n||{}).iter||1e3;return(i=(r=r[e]=r[e]||{})[i]=r[i]||{firstSalt:n.salt&&n.salt.length?n.salt.slice(0):sjcl.random.randomWords(2,0)})[r=n.salt===t?i.firstSalt:n.salt]=i[r]||sjcl.misc.pbkdf2(e,r,n.iter),{key:i[r].slice(0),salt:r.slice(0)}},(o=>{var e=o.codec.bytes=o.codec.bytes||{};e.fromBits=e.fromBits||function(e){for(var t,n=[],r=o.bitArray.bitLength(e),i=0;i<r/8;i++)0==(3&i)&&(t=e[i/4]),n.push(t>>>24),t<<=8;return n},e.toBits=e.toBits||function(e){for(var t=[],n=0,r=0;r<e.length;r++)n=n<<8|e[r],3==(3&r)&&(t.push(n),n=0);return 3&r&&t.push(o.bitArray.partial(8*(3&r),n)),t}})(sjcl),(()=>{var a,s=(new Date).getTime();function l(e,t,n,r){if("function"==typeof e.addEventListener)e.addEventListener(t,n,r);else{if(!e.attachEvent)throw new Error(encrypt.errors.UNABLETOBIND+": Unable to bind "+t+"-event");e.attachEvent("on"+t,n)}}evLog=evLog||(a={},function(e,t,n){var r,i;if("bind"===e)evLog(n+"Bind"),l(t,"change",function(){evLog(n+"FieldChangeCount"),evLog("log",n,"ch")},!0),l(t,"click",function(){evLog(n+"FieldClickCount"),evLog("log",n,"cl")},!0),l(t,"focus",function(){evLog(n+"FieldFocusCount"),evLog("log",n,"fo")},!0),l(t,"blur",function(){evLog(n+"FieldBlurCount"),evLog("log",n,"bl")},!0),l(t,"keyup",function(e){16==e.keyCode?evLog("log",n,"Su"):17==e.keyCode?evLog("log",n,"Cu"):18==e.keyCode&&evLog("log",n,"Au")}),l(t,"keydown",function(e){switch(evLog(n+"FieldKeyCount"),e&&e.keyCode){case 8:evLog("log",n,"Kb");break;case 16:evLog("log",n,"Sd");break;case 17:evLog("log",n,"Cd");break;case 18:evLog("log",n,"Ad");break;case 37:evLog("log",n,"Kl");break;case 39:evLog("log",n,"Kr");break;case 46:evLog("log",n,"Kd");break;case 32:evLog("log",n,"Ks");break;default:48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105?evLog("log",n,"KN"):65<=e.keyCode&&e.keyCode<=90&&evLog("log",n,"KL")}},!0);else if("set"===e)a[t]=n;else if("log"===e)r=t+"FieldLog",i=(new Date).getTime()-s,i=Math.round(i/100),a.hasOwnProperty(r)?a[r]+=","+n+"@"+i:a[r]=n+"@"+i,1500<a[r].length&&(a[r]=a[r].substring(a[r].length-1500),a[r]=a[r].substring(a[r].indexOf(",")+1));else if("extend"===e)for(var o in a)"number"!==o&&"expiryMonth"!==o&&"expiryYear"!==o&&"generationtime"!==o&&"holderName"!==o&&"cvc"!==o&&a.hasOwnProperty(o)&&(t[o]=""+a[o]);else a.hasOwnProperty(e)?a[e]++:a[e]=1}),window&&(window.attachEvent||window.addEventListener)&&(l(window,"focus",function(){evLog("activate")}),l(window,"blur",function(){evLog("deactivate")}))})();var adyen=root.adyen=root.adyen||{},encrypt=adyen.encrypt=adyen.encrypt||{createEncryptedForm:function(e,t,n){return new EncryptedForm(e,t,n)},createEncryption:function(e,t){return new Encryption(e,t)}};function addEvent(e,t,n,r){if("function"==typeof e.addEventListener)e.addEventListener(t,n,r);else{if(!e.attachEvent)throw new Error(encrypt.errors.UNABLETOBIND+": Unable to bind "+t+"-event");e.attachEvent("on"+t,n)}}function hasClass(e,t){return e&&new RegExp(" "+t+" ").test(" "+(e.className||"")+" ")}function addClass(e,t){!e||hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){if(e){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(hasClass(e,t)){for(;0<=n.indexOf(" "+t+" ");)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}}}function getAttribute(e,t,n){return e&&e.getAttribute&&e.getAttribute(t)||n}"function"==typeof fnDefine&&fnDefine.amd&&fnDefine("adyen/encrypt",[],function(){return encrypt}),!function(document,window){function dfGetPlug(){var e="",t=0;try{if(navigator.plugins){for(var n=navigator.plugins,r=[],i=0;i<n.length;i++){r[i]=n[i].name+"; ",r[i]+=n[i].description+"; ",r[i]+=n[i].filename+";";for(var o=0;o<n[i].length;o++)r[i]+=" ("+n[i][o].description+"; "+n[i][o].type+"; "+n[i][o].suffixes+")";r[i]+=". "}for(t+=n.length,r.sort(),i=0;i<n.length;i++)e+="Plugin "+i+": "+r[i]}if(""===e){for(var a,s=["QuickTime","Shockwave","Flash","WindowsMediaplayer","Silverlight","RealPlayer"],l=0;l<s.length;l++)(a=PluginDetect.getVersion(s[l]))&&(e+=s[l]+" "+a+"; ",t++);e+=dfGetIEAV(),t++}}catch(e){}return{nr:t,obj:e}}function dfGetIEAV(){try{if(window.ActiveXObject){for(var x=2;x<10;x++)try{if(oAcro=eval("new ActiveXObject('PDF.PdfCtrl."+x+"');"),oAcro)return"Adobe Acrobat version"+x+".?"}catch(ex){}try{if(oAcro4=new ActiveXObject("PDF.PdfCtrl.1"),oAcro4)return"Adobe Acrobat version 4.?"}catch(ex){}try{if(oAcro7=new ActiveXObject("AcroPDF.PDF.1"),oAcro7)return"Adobe Acrobat version 7.?"}catch(ex){}}}catch(e){}return""}function dfGetFonts(){var e="";try{try{var t=document.getElementById("df_jfh");if(t&&null!==t){for(var n=t.getFontList(),r=0;r<n.length;r++)e=e+n[r]+", ";e+=" (Java)"}}catch(e){}""===e&&(e="No Flash or Java")}catch(e){}e.split(",").length}function dfInitDS(){try{localStorage.dfValue="value"}catch(e){}try{sessionStorage.dfValue="value"}catch(e){}}function dfGetDS(){var t="";try{"value"===localStorage.dfValue?t+="DOM-LS: Yes":t+="DOM-LS: No"}catch(e){t+="DOM-LS: No"}try{"value"===sessionStorage.dfValue?t+=", DOM-SS: Yes":t+=", DOM-SS: No"}catch(e){t+=", DOM-SS: No"}return t}function dfGetIEUD(){try{return oPersistDiv.setAttribute("cache","value"),oPersistDiv.save("oXMLStore"),oPersistDiv.setAttribute("cache","new-value"),oPersistDiv.load("oXMLStore"),"value"==oPersistDiv.getAttribute("cache")?", IE-UD: Yes":", IE-UD: No"}catch(e){return", IE-UD: No"}}function getWebglFp(){var e=document.createElement("canvas"),t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){return padString("",10)}if(null==t)return padString("",10);var e=[],n=t.canvas.width/t.canvas.height;try{r(t,-.7,.7,.2,n),r(t,.2-.7,.7-.2*n,.2,n),r(t,.2-.7,.7-.4*n,.2,n),r(t,-.7,.7-.4*n,.2,n),r(t,-.7-.2,.7-.4*n,.2,n)}catch(e){}null!==t.canvas&&e.push(t.canvas.toDataURL()+"");try{e.push(t.getParameter(t.RED_BITS)),e.push(t.getParameter(t.GREEN_BITS)),e.push(t.getParameter(t.BLUE_BITS)),e.push(t.getParameter(t.DEPTH_BITS)),e.push(t.getParameter(t.ALPHA_BITS)),e.push(t.getContextAttributes().antialias?"1":"0"),e.push(i(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),e.push(i(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),e.push(i(t.getParameter(t.MAX_VIEWPORT_DIMS))),e.push(t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),e.push(t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),e.push(t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),e.push(t.getParameter(t.MAX_RENDERBUFFER_SIZE)),e.push(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),e.push(t.getParameter(t.MAX_TEXTURE_SIZE)),e.push(t.getParameter(t.MAX_VARYING_VECTORS)),e.push(t.getParameter(t.MAX_VERTEX_ATTRIBS)),e.push(t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),e.push(t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),e.push(t.getParameter(t.RENDERER)),e.push(t.getParameter(t.SHADING_LANGUAGE_VERSION)),e.push(t.getParameter(t.STENCIL_BITS)),e.push(t.getParameter(t.VENDOR)),e.push(t.getParameter(t.VERSION)),e.push(t.getSupportedExtensions().join(""))}catch(e){return padString("",10)}return e.join("");function r(e,t,n,r,i){t=new Float32Array([t,n,t,n-r*i,t+r,n-r*i,t,n,t+r,n,t+r,n-r*i]),n=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),n.itemSize=2,n.numItems=t.length/n.itemSize,r=e.createProgram(),i=e.createShader(e.VERTEX_SHADER),t=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,"attribute vec2 attrVert;varying vec2 varyTexCoord;uniform vec2 unifOffset;void main(){varyTexCoord=attrVert+unifOffset;gl_Position=vec4(attrVert,0,1);}"),e.shaderSource(t,"precision mediump float;varying vec2 varyTexCoord;void main() {gl_FragColor=vec4(varyTexCoord*0.55,0,1);}"),e.compileShader(i),e.compileShader(t),e.attachShader(r,i),e.attachShader(r,t),e.linkProgram(r),e.useProgram(r),r.vertexPosAttrib=e.getAttribLocation(r,"attrVert"),r.offsetUniform=e.getUniformLocation(r,"unifOffset"),e.enableVertexAttribArray(r.vertexPosArray),e.vertexAttribPointer(r.vertexPosAttrib,n.itemSize,e.FLOAT,!1,0,0),e.uniform2f(r.offsetUniform,1,1),e.drawArrays(e.TRIANGLE_STRIP,0,n.numItems)}function i(e){return t.clearColor(0,.5,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),e[0]+e[1]}}function getJsFonts(){function e(){return(new Date).getTime()}var t=e()+3e3;try{var n=["monospace","sans-serif","serif"],r=document.body||document.getElementsByTagName("body")[0],i=document.createElement("span"),o=(i.style.fontSize="80px",i.innerHTML="abcdefghijklmnopqrstuvwxyz",{}),a={},s=0;for(s=0;s<n.length;s++)i.style.fontFamily=n[s],r.appendChild(i),o[n[s]]=i.offsetWidth,a[n[s]]=i.offsetHeight,r.removeChild(i);for(var l=["Abril Fatface","Adobe Caslon","Adobe Garamond","ADOBE GARAMOND PRO","Affair","Ailerons","Alegreya","Aller","Altus","Amatic","Ambassador","American Typewriter","American Typewriter Condensed","Americane","Amsi Pro","Andale Mono","Anivers","Anonymous Pro","Arca Majora","Archivo Narrow","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Arimo","Arvo","Asfalto","Asia","Audimat","AvantGarde Bk BT","AvantGarde Md BT","Bank Gothic","BankGothic Md BT","Barkentina","Baskerville","Baskerville Old Face","Bassanova","Batang","BatangChe","Bauhaus 93","Beauchef","Bebas Neue","Bellaboo","Berlin Sans FB","Berlin Sans FB Demi","Betm","Bitter","Blackout","Blox","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bomb","Book Antiqua","Bookman Old Style","Bookshelf Symbol 7","Bosque","Bowling Script","Box","Brandon Text","Brandon Text Medium","Bree Serif","Bremen Bd BT","Britannic Bold","Broadway","Brooklyn Samuels","Brotherhood Script","Bukhari Script","Burford","Byker","Cabin","Caecilia","Calibri","Cambria","Cambria Math","Cathedral","Century","Century Gothic","Century Schoolbook","Cervo","Chalfont","Chaucer","Chivo","Chunk","Clarendon","Clarendon Condensed","Clavo","Clavo Regular","Clear Sans Screen","Code","Comic Sans","Comic Sans MS","Conifer","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Core Sans NR","Courier","Courier New","Curely","D Sert","Delicate","Delicious","DIN","Directors Gothic","Dogtown","Domine","Donau","Dosis","Droid Sans","Droid Serif","Emblema Headline","Endless Bummer","English 111 Vivace BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","Exo","Exo 2","Fabfelt Script","Fanwood","Fedra Sans","Fela","Felice","Felice Regular","Fertigo Pro","FFF TUSJ","Fins","Fjalla One","Fontin","Franchise","Franklin Gothic","Franklin Gothic Book","Franklin Gothic Demi","Franklin Gothic Demi Cond","Franklin Gothic Heavy","Franklin Gothic Medium","Franklin Gothic Medium Cond","Free Spirit","FS Clerkenwell","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Galano Classic","Garamond","GEOM","Georgia","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Giant","Gibbs","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Glaser Stencil","Glober","Gloucester MT Extra Condensed","Gotham","GOTHAM","GOTHAM BOLD","Goudy Bookletter 1911","Goudy Old Style","Gravitas One","Hamster","Harman","Helena","Helvetica","Helvetica Neue","Herald","Hero","Hogshead","Home Brush","Horizontes Script","Hoverage","Humanst 521 Cn BT","HWT Artz","Ikaros","Impact","Inconsolata","Into The Light","Istok Web","Itoya","Ivory","Jack","Jekyll and Hyde","Jimmy","Josefin Slab","Junction","Kapra","Karla","Karol","Karol Regular","Karol Semi Bold Italic","Kautiva","Kelso","Knewave","Kurversbrug","Lato","League Gothic","League Script Number One","League Spartan","Libre Baskerville","Linden Hill","Linotte","Lobster","Lombok","Lora","Louize","Louize Italic","Louize Medium","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Lulo Clean","Manifesto","Maxwell","Merel","Merlo","Merriweather","Metro Nova","Metro Nova Light","Metro Nova Regular","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Sans Serif","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","Modern Brush","Modern No. 20","MONO","Monthoers","Montserrat","Moon","Mrs Eaves","MS Gothic","MS LineDraw","MS Mincho","MS Outlook","MS PGothic","MS PMincho","MS Reference Sans Serif","MS Reference Specialty","MS Sans Serif","MS Serif","MS UI Gothic","MTT Milano","Muli","Museo Slab","Myriad Pro","Neo Sans","Neo-Noire","Neutron","News Gothic","News GothicMT","NewsGoth BT","Nickainley Script","Nobile","Old Century","Old English Text MT","Old Standard TT","Open Sans","Orbitron","Ostrich Sans","Oswald","Palatino","Palatino Linotype","Papyrus","Parchment","Pegasus","Perfograma","Perpetua","Perpetua Titling MT","Petala Pro","Petala Semi Light","Pipeburn","Playfair Display","Prociono","PT Sans","PT Serif","Pythagoras","Qandon","Qandon Regular","Questrial","Raleway","Razor","Reef","Roboto","Roboto Slab","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Runaway","Sartorius","Schist","Scripta Pro","Seaside Resort","Selfie","Serendipity","Serifa","Serifa BT","Serifa Th BT","Shine Pro","Shoebox","Signika","Silver","Skolar","Skyward","Sniglet","Sortdecai","Sorts Mill Goudy","Source Sans Pro","Sparkle","Splandor","Springtime","Spruce","Spumante","Squoosh Gothic","Stadt","Stencil","Streamster","Sunday","Sunn","Swis721 BlkEx BT","Swiss911 XCm BT","Symbol","Tahoma","Technical","Texta","Ticketbook","Timber","Times","Times New Roman","Times New Roman PS","Titillium Web","Trajan","TRAJAN PRO","Trebuchet MS","Trend Rough","Troika","Twist","Ubuntu","Uniform","Univers","Univers CE 55 Medium","Univers Condensed","Unveil","Uomo","Varela Round","Verdana","Visby","Vollkorn","Wahhabi Script","Waterlily","Wayback","Webdings","Wendy","Wingdings","Wingdings 2","Wingdings 3","Woodland","Yonder","Zodiaclaw"],c=[];0<l.length;){for(var u=l.pop(),d=!1,s=0;s<n.length&&!d;s++){if(e()>t)return padString("",10);i.style.fontFamily=u+","+n[s],r.appendChild(i);var p=i.offsetWidth!==o[n[s]]||i.offsetHeight!==a[n[s]];r.removeChild(i),d=d||p}d&&c.push(u)}return c.join(";")}catch(e){return padString("",10)}}function dfGetProp(){var t={},n={plugins:10,nrOfPlugins:3,fonts:10,nrOfFonts:3,timeZone:10,video:10,superCookies:10,userAgent:10,mimeTypes:10,nrOfMimeTypes:3,canvas:10,cpuClass:5,platform:5,doNotTrack:5,webglFp:10,jsFonts:10};try{try{var e=dfGetPlug();t.plugins=padString(calculateMd5_b64(e.obj),n.plugins),t.nrOfPlugins=padString(String(e.nr),n.nrOfPlugins)}catch(e){t.plugins=padString("",n.plugins),t.nrOfPlugins=padString("",n.nrOfPlugins)}t.fonts=padString("",n.fonts),t.nrOfFonts=padString("",n.nrOfFonts);try{var r=new Date,i=(r.setDate(1),r.setMonth(5),r.getTimezoneOffset()),o=(r.setMonth(11),r.getTimezoneOffset());t.timeZone=padString(calculateMd5_b64(i+"**"+o),n.timeZone)}catch(e){t.timeZone=padString("",n.timeZone)}try{t.video=padString(String((screen.width+7)*(screen.height+7)*screen.colorDepth),n.video)}catch(e){t.video=padString("",n.video)}t.superCookies=padString(calculateMd5_b64(dfGetDS()),Math.floor(n.superCookies/2))+padString(calculateMd5_b64(dfGetIEUD()),Math.floor(n.superCookies/2)),t.userAgent=padString(calculateMd5_b64(navigator.userAgent),n.userAgent);var a="",s=0;if(navigator.mimeTypes)for(var s=navigator.mimeTypes.length,l=0;l<s;l++){var c=navigator.mimeTypes[l];a+=c.description+c.type+c.suffixes}t.mimeTypes=padString(calculateMd5_b64(a),n.mimeTypes),t.nrOfMimeTypes=padString(String(s),n.nrOfMimeTypes),t.canvas=padString(calculateMd5_b64(dfCanvasFingerprint()),n.canvas),t.cpuClass=navigator.cpuClass?padString(calculateMd5_b64(navigator.cpuClass),n.cpuClass):padString("",n.cpuClass),t.platform=padString(navigator.platform?calculateMd5_b64(navigator.platform):"",n.platform),t.doNotTrack=padString(navigator.doNotTrack?calculateMd5_b64(navigator.doNotTrack):"",n.doNotTrack),t.jsFonts=padString(calculateMd5_b64(getJsFonts()),n.jsFonts),t.webglFp=padString(calculateMd5_b64(getWebglFp()),n.webglFp);var u,d=0;for(u in t)if(t.hasOwnProperty(u)){d=0;try{d=t[u].length}catch(e){}null!=t[u]&&d===n[u]||(t[u]=padString("",n[u]))}}catch(e){}return t}function dfCanvasFingerprint(){var e,t,n=document.createElement("canvas");return n.getContext&&n.getContext("2d")?(n="#&*(sdfjlSDFkjls28270(",(t=(e=document.createElement("canvas")).getContext("2d")).font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f61",t.fillRect(138,2,63,20),t.fillStyle="#068",t.fillText(n,3,16),t.fillStyle="rgba(105, 194, 1, 0.6)",t.fillText(n,5,18),e.toDataURL()):padString("",10)}function populateFontList(e){}function dfGetEntropy(){var e=["iPad","iPhone","iPod"],t=navigator.userAgent;if(t)for(var n=0;n<e.length;n++)if(0<=t.indexOf(e[n]))return"20";return"40"}function dfSet(e,t){try{var n=dfHashConcat(dfGetProp()),r=dfGetEntropy();_.G(e).value=n+":"+r}catch(e){}}function dfHashConcat(e){try{return(e.plugins+e.nrOfPlugins+e.fonts+e.nrOfFonts+e.timeZone+e.video+e.superCookies+e.userAgent+e.mimeTypes+e.nrOfMimeTypes+e.canvas+e.cpuClass+e.platform+e.doNotTrack+e.webglFp+e.jsFonts).replace(/\+/g,"G").replace(/\//g,"D")}catch(e){return""}}function dfDo(e){try{var t=_.G(e);!t||t.value||(dfInitDS(),_.R(function(){setTimeout(function(){dfSet(e,0)},500)}))}catch(e){}}function padString(e,t){if(e.length>=t)return e.substring(0,t);for(var n="";n.length<t-e.length;n+="0");return n.concat(e)}function calculateMd5_b64(e){return md5_binl2b64(md5_cmc5(md5_s2b(e),8*e.length))}function md5_cmc5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,l=r,c=i,u=o,n=md5_ff(n,r,i,o,e[a+0],7,-680876936),o=md5_ff(o,n,r,i,e[a+1],12,-389564586),i=md5_ff(i,o,n,r,e[a+2],17,606105819),r=md5_ff(r,i,o,n,e[a+3],22,-1044525330);n=md5_ff(n,r,i,o,e[a+4],7,-176418897),o=md5_ff(o,n,r,i,e[a+5],12,1200080426),i=md5_ff(i,o,n,r,e[a+6],17,-1473231341),r=md5_ff(r,i,o,n,e[a+7],22,-45705983),n=md5_ff(n,r,i,o,e[a+8],7,1770035416),o=md5_ff(o,n,r,i,e[a+9],12,-1958414417),i=md5_ff(i,o,n,r,e[a+10],17,-42063),r=md5_ff(r,i,o,n,e[a+11],22,-1990404162),n=md5_ff(n,r,i,o,e[a+12],7,1804603682),o=md5_ff(o,n,r,i,e[a+13],12,-40341101),i=md5_ff(i,o,n,r,e[a+14],17,-1502002290),n=md5_gg(n,r=md5_ff(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=md5_gg(o,n,r,i,e[a+6],9,-1069501632),i=md5_gg(i,o,n,r,e[a+11],14,643717713),r=md5_gg(r,i,o,n,e[a+0],20,-373897302),n=md5_gg(n,r,i,o,e[a+5],5,-701558691),o=md5_gg(o,n,r,i,e[a+10],9,38016083),i=md5_gg(i,o,n,r,e[a+15],14,-660478335),r=md5_gg(r,i,o,n,e[a+4],20,-405537848),n=md5_gg(n,r,i,o,e[a+9],5,568446438),o=md5_gg(o,n,r,i,e[a+14],9,-1019803690),i=md5_gg(i,o,n,r,e[a+3],14,-187363961),r=md5_gg(r,i,o,n,e[a+8],20,1163531501),n=md5_gg(n,r,i,o,e[a+13],5,-1444681467),o=md5_gg(o,n,r,i,e[a+2],9,-51403784),i=md5_gg(i,o,n,r,e[a+7],14,1735328473),n=md5_hh(n,r=md5_gg(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=md5_hh(o,n,r,i,e[a+8],11,-2022574463),i=md5_hh(i,o,n,r,e[a+11],16,1839030562),r=md5_hh(r,i,o,n,e[a+14],23,-35309556),n=md5_hh(n,r,i,o,e[a+1],4,-1530992060),o=md5_hh(o,n,r,i,e[a+4],11,1272893353),i=md5_hh(i,o,n,r,e[a+7],16,-155497632),r=md5_hh(r,i,o,n,e[a+10],23,-1094730640),n=md5_hh(n,r,i,o,e[a+13],4,681279174),o=md5_hh(o,n,r,i,e[a+0],11,-358537222),i=md5_hh(i,o,n,r,e[a+3],16,-722521979),r=md5_hh(r,i,o,n,e[a+6],23,76029189),n=md5_hh(n,r,i,o,e[a+9],4,-640364487),o=md5_hh(o,n,r,i,e[a+12],11,-421815835),i=md5_hh(i,o,n,r,e[a+15],16,530742520),n=md5_ii(n,r=md5_hh(r,i,o,n,e[a+2],23,-995338651),i,o,e[a+0],6,-198630844),o=md5_ii(o,n,r,i,e[a+7],10,1126891415),i=md5_ii(i,o,n,r,e[a+14],15,-1416354905),r=md5_ii(r,i,o,n,e[a+5],21,-57434055),n=md5_ii(n,r,i,o,e[a+12],6,1700485571),o=md5_ii(o,n,r,i,e[a+3],10,-1894986606),i=md5_ii(i,o,n,r,e[a+10],15,-1051523),r=md5_ii(r,i,o,n,e[a+1],21,-2054922799),n=md5_ii(n,r,i,o,e[a+8],6,1873313359),o=md5_ii(o,n,r,i,e[a+15],10,-30611744),i=md5_ii(i,o,n,r,e[a+6],15,-1560198380),r=md5_ii(r,i,o,n,e[a+13],21,1309151649),n=md5_ii(n,r,i,o,e[a+4],6,-145523070),o=md5_ii(o,n,r,i,e[a+11],10,-1120210379),i=md5_ii(i,o,n,r,e[a+2],15,718787259),r=md5_ii(r,i,o,n,e[a+9],21,-343485551),n=md5_safe_add(n,s),r=md5_safe_add(r,l),i=md5_safe_add(i,c),o=md5_safe_add(o,u)}return Array(n,r,i,o)}function md5_cmn(e,t,n,r,i,o){return md5_safe_add(md5_bit_rol(md5_safe_add(md5_safe_add(t,e),md5_safe_add(r,o)),i),n)}function md5_ff(e,t,n,r,i,o,a){return md5_cmn(t&n|~t&r,e,t,i,o,a)}function md5_gg(e,t,n,r,i,o,a){return md5_cmn(t&r|n&~r,e,t,i,o,a)}function md5_hh(e,t,n,r,i,o,a){return md5_cmn(t^n^r,e,t,i,o,a)}function md5_ii(e,t,n,r,i,o,a){return md5_cmn(n^(t|~r),e,t,i,o,a)}function md5_safe_add(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function md5_bit_rol(e,t){return e<<t|e>>>32-t}function md5_s2b(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function md5_binl2b64(e){for(var t="",n=0;n<4*e.length;n+=3)for(var r=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255,i=0;i<4;i++)8*n+6*i>32*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6*(3-i)&63);return t}var _,PluginDetect;df=document&&window&&"function"==typeof document.getElementsByTagName?(_=_||{},_.X=function(e,t,n,r){(r=new(window.ActiveXObject?ActiveXObject:XMLHttpRequest)("Microsoft.XMLHTTP")).open(n?"POST":"GET",e,1),n&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){3<r.readyState&&t&&t(r.responseText,r)},r.send(n)},_.E=function(e,t,n,r){(e.attachEvent?!r||e.detachEvent("on"+t,e[t+n]):r?e.removeEventListener(t,n,!1):e.addEventListener(t,n,!1))&&(e["e"+t+n]=n,e[t+n]=function(){e["e"+t+n](window.event)},e.attachEvent("on"+t,e[t+n]))},_.G=function(e){return e.style?e:document.getElementById(e)},_.A=function(e,t,n,r,i){return void 0===r&&((r=new Object).value=0),r.value||(r.value=0),i.value=setInterval(function(){n(r.value/e),++r.value>e&&clearInterval(i.value)},t)},_.F=function(t,n,e,r){t="in"==t,_.A(e||15,r||50,function(e){e=(t?0:1)+(t?1:-1)*e,n.style.opacity=e,n.style.filter="alpha(opacity="+100*e+")"})},_.S=function(t,n,e,r,i,o,a){t="in"==t,_.A(e||15,r||50,function(e){e=(t?0:1)+(t?1:-1)*e,n.style.width=parseInt(e*i)+"px"},a,o)},_.Q=function(e){for(var t=new Object,r=new Array,i=0;i<e.elements.length;i++)try{if(l=e.elements[i],""!=(n=l.name))switch(l.type.split("-")[0]){case"select":for(var o=0;o<l.options.length;o++)l.options[o].selected&&(void 0===t[n]&&(t[n]=new Array),t[n][t[n].length]=encodeURIComponent(l.options[o].value));break;case"radio":case"checkbox":l.checked&&(void 0===t[n]&&(t[n]=new Array),t[n][t[n].length]=encodeURIComponent(l.value));break;case"submit":break;default:void 0===t[n]&&(t[n]=new Array),t[n][t[n].length]=encodeURIComponent(l.value)}}catch(e){}for(x in t)r[r.length]=x+"="+t[x].join(",");return r.join("&")},_.R=function(e){null!=document.documentElement.style.scrollbar3dLightColor?setTimeout(e,0):_.E(document,"DOMContentLoaded",e)},PluginDetect={version:"0.7.5",name:"PluginDetect",handler:function(e,t,n){return function(){e(t,n)}},isDefined:function(e){return void 0!==e},isArray:function(e){return/array/i.test(Object.prototype.toString.call(e))},isFunc:function(e){return"function"==typeof e},isString:function(e){return"string"==typeof e},isNum:function(e){return"number"==typeof e},isStrNum:function(e){return"string"==typeof e&&/\d/.test(e)},getNumRegx:/[\d][\d\.\_,-]*/,splitNumRegx:/[\.\_,-]/g,getNum:function(e,t){t=this.isStrNum(e)?(this.isDefined(t)?new RegExp(t):this.getNumRegx).exec(e):null;return t?t[0]:null},compareNums:function(e,t,n){var r,i,o,a=parseInt;if(this.isStrNum(e)&&this.isStrNum(t)){if(this.isDefined(n)&&n.compareNums)return n.compareNums(e,t);for(r=e.split(this.splitNumRegx),i=t.split(this.splitNumRegx),o=0;o<Math.min(r.length,i.length);o++){if(a(r[o],10)>a(i[o],10))return 1;if(a(r[o],10)<a(i[o],10))return-1}}return 0},formatNum:function(e,t){var n,r;if(!this.isStrNum(e))return null;for(this.isNum(t)||(t=4),t--,r=e.replace(/\s/g,"").split(this.splitNumRegx).concat(["0","0","0","0"]),n=0;n<4;n++)/^(0+)(.+)$/.test(r[n])&&(r[n]=RegExp.$2),(t<n||!/\d/.test(r[n]))&&(r[n]="0");return r.slice(0,4).join(",")},$hasMimeType:function(o){return function(e){if(!o.isIE&&e){var t,n,r,i=o.isString(e)?[e]:e;if(!i||!i.length)return null;for(r=0;r<i.length;r++)if(/[^\s]/.test(i[r])&&(t=navigator.mimeTypes[i[r]])&&(n=t.enabledPlugin)&&(n.name||n.description))return t}return null}},findNavPlugin:function(e,t,n){for(var r,i,o=new RegExp(e,"i"),a=!this.isDefined(t)||t?/\d/:0,s=n?new RegExp(n,"i"):0,l=navigator.plugins,c=0;c<l.length;c++)if(i=l[c].description||"",r=l[c].name||"",(o.test(i)&&(!a||a.test(RegExp.leftContext+RegExp.rightContext))||o.test(r)&&(!a||a.test(RegExp.leftContext+RegExp.rightContext)))&&(!s||!s.test(i)&&!s.test(r)))return l[c];return null},getMimeEnabledPlugin:function(e,t){t=new RegExp(t,"i");return(e=(e=this.hasMimeType(e))&&e.enabledPlugin)&&(t.test(e.description||"")||t.test(e.name||""))?e:0},getPluginFileVersion:function(e,t){var n,r,i,o,a=-1;if(2<this.OS||!e||!e.version||!(n=this.getNum(e.version)))return t;if(t)for(n=this.formatNum(n),r=(t=this.formatNum(t)).split(this.splitNumRegx),i=n.split(this.splitNumRegx),o=0;o<r.length;o++){if(-1<a&&a<o&&"0"!=r[o])return t;if(i[o]!=r[o]&&(-1==a&&(a=o),"0"!=r[o]))return t}return n},AXO:window.ActiveXObject,getAXO:function(e){var t=null;try{t=new this.AXO(e)}catch(e){}return t},convertFuncs:function(e){var t,n,r=/^[\$][\$]/,i={};for(t in e)r.test(t)&&(i[t]=1);for(t in i)try{0<(n=t.slice(2)).length&&!e[n]&&(e[n]=e[t](e),delete e[t])}catch(e){}},initScript:function(){var e=this,t=navigator,n=t.userAgent||"",r=t.vendor||"",i=t.platform||"",t=t.product||"";if(e.OS=100,i){var o=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(a=o.length-2;0<=a;a-=2)if(o[a]&&new RegExp(o[a],"i").test(i)){e.OS=o[a+1];break}}if(e.convertFuncs(e),e.isIE=new Function("return /*@cc_on!@*/false")(),e.verIE=e.isIE&&/MSIE\s*(\d+\.?\d*)/i.test(n)?parseFloat(RegExp.$1,10):null,e.ActiveXEnabled=!1,e.isIE){var a,s=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(a=0;a<s.length;a++)if(e.getAXO(s[a])){e.ActiveXEnabled=!0;break}e.head=e.isDefined(document.getElementsByTagName)?document.getElementsByTagName("head")[0]:null}e.isGecko=/Gecko/i.test(t)&&/Gecko\s*\/\s*\d/i.test(n),e.verGecko=e.isGecko?e.formatNum(/rv\s*\:\s*([\.\,\d]+)/i.test(n)?RegExp.$1:"0.9"):null,e.isSafari=/Safari\s*\/\s*\d/i.test(n)&&/Apple/i.test(r),e.isChrome=/Chrome\s*\/\s*(\d[\d\.]*)/i.test(n),e.verChrome=e.isChrome?e.formatNum(RegExp.$1):null,e.isOpera=/Opera\s*[\/]?\s*(\d+\.?\d*)/i.test(n),e.verOpera=e.isOpera&&(/Version\s*\/\s*(\d+\.?\d*)/i.test(n),1)?parseFloat(RegExp.$1,10):null,e.addWinEvent("load",e.handler(e.runWLfuncs,e))},init:function(e){var t,n=this;return n.isString(e)?1==e.length?(n.getVersionDelimiter=e,-3):(t=n[e=e.toLowerCase().replace(/\s/g,"")])&&t.getVersion?(n.plugin=t,n.isDefined(t.installed)||(t.installed=t.version=t.version0=t.getVersionDone=null,t.$=n,t.pluginName=e),n.garbage=!1,n.isIE&&!n.ActiveXEnabled&&t!==n.java?-2:1):-3:-3},fPush:function(e,t){this.isArray(t)&&(this.isFunc(e)||this.isArray(e)&&0<e.length&&this.isFunc(e[0]))&&t.push(e)},callArray:function(e){var t;if(this.isArray(e))for(t=0;t<e.length;t++){if(null===e[t])return;this.call(e[t]),e[t]=null}},call:function(e){var t=this.isArray(e)?e.length:-1;0<t&&this.isFunc(e[0])?e[0](this,1<t?e[1]:0,2<t?e[2]:0,3<t?e[3]:0):this.isFunc(e)&&e(this)},getVersionDelimiter:",",$getVersion:function(r){return function(e,t,n){return r.init(e)<0?null:(1!=(e=r.plugin).getVersionDone&&(e.getVersion(null,t,n),null===e.getVersionDone)&&(e.getVersionDone=1),r.cleanup(),(t=e.version||e.version0)&&t.replace(r.splitNumRegx,r.getVersionDelimiter))}},cleanup:function(){this.garbage&&this.isDefined(window.CollectGarbage)&&window.CollectGarbage()},isActiveXObject:function(e,t){var n=this,r=!1,t='<object width="1" height="1" style="display:none" '+e.getCodeBaseVersion(t)+">"+e.HTML+"</object>";if(n.head){n.head.firstChild?n.head.insertBefore(document.createElement("object"),n.head.firstChild):n.head.appendChild(document.createElement("object")),n.head.firstChild.outerHTML=t;try{n.head.firstChild.classid=e.classID}catch(e){}try{n.head.firstChild.object&&(r=!0)}catch(e){}try{r&&n.head.firstChild.readyState<4&&(n.garbage=!0)}catch(e){}n.head.removeChild(n.head.firstChild)}return r},codebaseSearch:function(r,e){var i=this;if(!i.ActiveXEnabled||!r)return null;r.BIfuncs&&r.BIfuncs.length&&null!==r.BIfuncs[r.BIfuncs.length-1]&&i.callArray(r.BIfuncs);var t,n=r.SEARCH;if(i.isStrNum(e))return!!(n.match&&n.min&&i.compareNums(e,n.min)<=0)||!(n.match&&n.max&&0<=i.compareNums(e,n.max))&&((t=i.isActiveXObject(r,e))&&(!n.min||0<i.compareNums(e,n.min))&&(n.min=e),t||n.max&&!(i.compareNums(e,n.max)<0)||(n.max=e),t);function o(e,t){var n=[].concat(d);return n[e]=t,i.isActiveXObject(r,n.join(","))}var a,s,l,c,u,d=[0,0,0,0],p=[].concat(n.digits),h=n.min?1:0;if(n.max){for(c=n.max.split(i.splitNumRegx),a=0;a<c.length;a++)c[a]=parseInt(c[a],10);c[0]<p[0]&&(p[0]=c[0])}if(n.min){for(u=n.min.split(i.splitNumRegx),a=0;a<u.length;a++)u[a]=parseInt(u[a],10);u[0]>d[0]&&(d[0]=u[0])}if(u&&c)for(a=1;a<u.length&&u[a-1]==c[a-1];a++)c[a]<p[a]&&(p[a]=c[a]),u[a]>d[a]&&(d[a]=u[a]);if(n.max)for(a=1;a<p.length;a++)if(0<c[a]&&0==p[a]&&p[a-1]<n.digits[a-1]){p[a-1]+=1;break}for(a=0;a<p.length;a++){for(l={},s=0;s<20&&!(p[a]-d[a]<1)&&!l["a"+(t=Math.round((p[a]+d[a])/2))];s++)l["a"+t]=1,o(a,t)?(d[a]=t,h=1):p[a]=t;if(p[a]=d[a],!(h=!h&&o(a,d[a])?1:h))break}return h?d.join(","):null},addWinEvent:function(e,t){var n,r=window;this.isFunc(t)&&(r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent?r.attachEvent("on"+e,t):(n=r["on"+e],r["on"+e]=this.winHandler(t,n)))},winHandler:function(e,t){return function(){e(),"function"==typeof t&&t()}},WLfuncs0:[],WLfuncs:[],runWLfuncs:function(e){e.winLoaded=!0,e.callArray(e.WLfuncs0),e.callArray(e.WLfuncs),e.onDoneEmptyDiv&&e.onDoneEmptyDiv()},winLoaded:!1,$onWindowLoaded:function(t){return function(e){t.winLoaded?t.call(e):t.fPush(e,t.WLfuncs)}},div:null,divWidth:50,pluginSize:1,emptyDiv:function(){var e,t,n;if(this.div&&this.div.childNodes)for(e=this.div.childNodes.length-1;0<=e;e--)if((n=this.div.childNodes[e])&&n.childNodes){for(t=n.childNodes.length-1;0<=t;t--)n.removeChild(n.childNodes[t]);this.div.removeChild(n)}},DONEfuncs:[],onDoneEmptyDiv:function(){var e,t,n=this;if(n.winLoaded&&(!n.WLfuncs||!n.WLfuncs.length||null===n.WLfuncs[n.WLfuncs.length-1])){for(e in n)if((t=n[e])&&t.funcs){if(3==t.OTF)return;if(t.funcs.length&&null!==t.funcs[t.funcs.length-1])return}for(e=0;e<n.DONEfuncs.length;e++)n.callArray(n.DONEfuncs);n.emptyDiv()}},getWidth:function(e){if(e){e=e.scrollWidth||e.offsetWidth;if(this.isNum(e))return e}return-1},getTagStatus:function(e,t,n,r){var i=this,o=e.span,a=i.getWidth(o),n=n.span,s=i.getWidth(n),t=t.span,l=i.getWidth(t);if(!(o&&n&&t&&i.getDOMobj(e)))return-2;if(!(s<l||a<0||s<0||l<0||l<=i.pluginSize||i.pluginSize<1)){if(l<=a)return-1;try{if(a==i.pluginSize&&(!i.isIE||4==i.getDOMobj(e).readyState)){if(!e.winLoaded&&i.winLoaded)return 1;if(e.winLoaded&&i.isNum(r)&&(i.isNum(e.count)||(e.count=r),10<=r-e.count))return 1}}catch(e){}}return 0},getDOMobj:function(e,t){var e=e?e.span:0,n=e&&e.firstChild?1:0;try{n&&t&&e.firstChild.focus()}catch(e){}return n?e.firstChild:null},setStyle:function(e,t){var n,r=e.style;if(r&&t)for(n=0;n<t.length;n+=2)try{r[t[n]]=t[n+1]}catch(e){}},insertDivInBody:function(e){var t="pd33993399",n=null,r=document,i=r.getElementsByTagName("body")[0]||r.body;if(!i)try{r.write('<div id="'+t+'">o</div>'),n=r.getElementById(t)}catch(e){}(i=r.getElementsByTagName("body")[0]||r.body)&&(i.firstChild&&this.isDefined(i.insertBefore)?i.insertBefore(e,i.firstChild):i.appendChild(e),n)&&i.removeChild(n)},insertHTML:function(e,t,n,r,i){var o,a,s=document,l=this,c=s.createElement("span"),u=["outlineStyle","none","borderStyle","none","padding","0px","margin","0px","visibility","visible"];if(l.isDefined(r)||(r=""),l.isString(e)&&/[^\s]/.test(e)){for(o="<"+e+' width="'+l.pluginSize+'" height="'+l.pluginSize+'" ',a=0;a<t.length;a+=2)/[^\s]/.test(t[a+1])&&(o+=t[a]+'="'+t[a+1]+'" ');for(o+=">",a=0;a<n.length;a+=2)/[^\s]/.test(n[a+1])&&(o+='<param name="'+n[a]+'" value="'+n[a+1]+'" />');o+=r+"</"+e+">"}else o=r;if(l.div||(l.div=s.createElement("div"),(r=s.getElementById("plugindetect"))?l.div=r:(l.div.id="plugindetect",l.insertDivInBody(l.div)),l.setStyle(l.div,u.concat(["width",l.divWidth+"px","height",l.pluginSize+3+"px","fontSize",l.pluginSize+3+"px","lineHeight",l.pluginSize+3+"px","verticalAlign","baseline","display","block"])),r)||l.setStyle(l.div,["position","absolute","right","0px","top","0px"]),l.div&&l.div.parentNode){l.div.appendChild(c),l.setStyle(c,u.concat(["fontSize",l.pluginSize+3+"px","lineHeight",l.pluginSize+3+"px","verticalAlign","baseline","display","inline"]));try{c&&c.parentNode&&c.focus()}catch(e){}try{c.innerHTML=o}catch(e){}return 1!=c.childNodes.length||l.isGecko&&l.compareNums(l.verGecko,"1,5,0,0")<0||l.setStyle(c.firstChild,u.concat(["display","inline"])),{span:c,winLoaded:l.winLoaded,tagName:l.isString(e)?e:""}}return{span:null,winLoaded:l.winLoaded,tagName:""}},quicktime:{mimeType:["video/quicktime","application/x-quicktimeplayer","image/x-macpaint","image/x-quicktime"],progID:"QuickTimeCheckObject.QuickTimeCheck.1",progID0:"QuickTime.QuickTime",classID:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",minIEver:7,HTML:'<param name="src" value="" /><param name="controller" value="false" />',getCodeBaseVersion:function(e){return'codebase="#version='+e+'"'},SEARCH:{min:0,max:0,match:0,digits:[16,128,128,0]},getVersion:function(e){var t,n=this,r=n.$,i=null,o=null;if(r.isIE){if(r.isStrNum(e)&&(3<(t=e.split(r.splitNumRegx)).length&&0<parseInt(t[3],10)&&(t[3]="9999"),e=t.join(",")),r.isStrNum(e)&&r.verIE>=n.minIEver&&0<n.canUseIsMin())return n.installed=n.isMin(e),void(n.getVersionDone=0);n.getVersionDone=1,(i=!i&&r.verIE>=n.minIEver?n.CDBASE2VER(r.codebaseSearch(n)):i)||(o=r.getAXO(n.progID))&&o.QuickTimeVersion&&(i=o.QuickTimeVersion.toString(16),i=parseInt(i.charAt(0),16)+"."+parseInt(i.charAt(1),16)+"."+parseInt(i.charAt(2),16))}else r.hasMimeType(n.mimeType)&&(o=3!=r.OS?r.findNavPlugin("QuickTime.*Plug-?in",0):null)&&o.name&&(i=r.getNum(o.name));n.installed=i?1:o?0:-1,n.version=r.formatNum(i,3)},cdbaseUpper:["7,60,0,0","0,0,0,0"],cdbaseLower:["7,50,0,0",null],cdbase2ver:[function(e,t){t=t.split(e.$.splitNumRegx);return[t[0],t[1].charAt(0),t[1].charAt(1),t[2]].join(",")},null],CDBASE2VER:function(e){var t,n=this.$,r=this.cdbaseUpper,i=this.cdbaseLower;if(e)for(e=n.formatNum(e),t=0;t<r.length;t++)if(r[t]&&n.compareNums(e,r[t])<0&&i[t]&&0<=n.compareNums(e,i[t])&&this.cdbase2ver[t])return this.cdbase2ver[t](this,e);return e},canUseIsMin:function(){var e,t=this.$,n=this.canUseIsMin,r=this.cdbaseUpper,i=this.cdbaseLower;if(!n.value)for(n.value=-1,e=0;e<r.length;e++){if(r[e]&&t.codebaseSearch(this,r[e])){n.value=1;break}if(i[e]&&t.codebaseSearch(this,i[e])){n.value=-1;break}}return this.SEARCH.match=1==n.value?1:0,n.value},isMin:function(e){return this.$.codebaseSearch(this,e)?.7:-1}},flash:{mimeType:["application/x-shockwave-flash","application/futuresplash"],progID:"ShockwaveFlash.ShockwaveFlash",classID:"clsid:D27CDB6E-AE6D-11CF-96B8-444553540000",getVersion:function(){function e(e){return(e=e&&/[\d][\d\,\.\s]*[rRdD]{0,1}[\d\,]*/.exec(e))?e[0].replace(/[rRdD\.]/g,",").replace(/\s/g,""):null}var t,n,r=this.$,i=null,o=null,a=null;if(r.isIE){for(n=15;2<n;n--)if(o=r.getAXO(this.progID+"."+n)){a=n.toString();break}if("6"==a)try{o.AllowScriptAccess="always"}catch(e){return"6,0,21,0"}try{i=e(o.GetVariable("$version"))}catch(e){}!i&&a&&(i=a)}else i=(i=(t=r.findNavPlugin("Flash"))&&t.description&&r.hasMimeType(this.mimeType)?e(t.description):i)&&r.getPluginFileVersion(t,i);return this.installed=i?1:-1,this.version=r.formatNum(i),!0}},shockwave:{mimeType:"application/x-director",progID:"SWCtl.SWCtl",classID:"clsid:166B1BCA-3F9C-11CF-8075-444553540000",getVersion:function(){var e=null,t=null,n=this.$;if(n.isIE){try{t=n.getAXO(this.progID).ShockwaveVersion("")}catch(e){}n.isString(t)&&0<t.length?e=n.getNum(t):n.getAXO(this.progID+".8")?e="8":n.getAXO(this.progID+".7")?e="7":n.getAXO(this.progID+".1")&&(e="6")}else e=(e=(t=n.findNavPlugin("Shockwave\\s*for\\s*Director"))&&t.description&&n.hasMimeType(this.mimeType)?n.getNum(t.description):e)&&n.getPluginFileVersion(t,e);this.installed=e?1:-1,this.version=n.formatNum(e)}},windowsmediaplayer:{mimeType:["application/x-mplayer2","application/asx","application/x-ms-wmp"],progID:"wmplayer.ocx",classID:"clsid:6BF52A52-394A-11D3-B153-00C04F79FAA6",getVersion:function(){var e,t=null,n=this.$,r=null;this.installed=-1,n.isIE?(r=n.getAXO(this.progID))&&(t=r.versionInfo):n.hasMimeType(this.mimeType)&&(r=n.findNavPlugin("Windows\\s*Media.*Plug-?in",0,"Totem")||n.findNavPlugin("Flip4Mac.*Windows\\s*Media.*Plug-?in",0,"Totem"),!(n.isGecko&&n.compareNums(n.verGecko,n.formatNum("1.8"))<0||n.isOpera&&n.verOpera<10))&&n.getMimeEnabledPlugin(this.mimeType[2],"Windows\\s*Media.*Firefox.*Plug-?in")&&(e=n.getDOMobj(n.insertHTML("object",["type",this.mimeType[2],"data",""],["src",""],"",this)))&&(t=e.versionInfo),this.installed=r&&t?1:r?0:-1,this.version=n.formatNum(t)}},silverlight:{mimeType:"application/x-silverlight",progID:"AgControl.AgControl",digits:[20,20,9,12,31],getVersion:function(){var e,t,n,r,i,o=this.$,a=null,s=null,l=!0,c=[1,0,1,1,1],u=[1,0,1,1,1],d=function(e){return(e<10?"0":"")+e.toString()},p=function(e,t,n,r,i){return e+"."+t+"."+n+d(r)+d(i)+".0"},h=function(e,t,n,r,i,o){try{return e.IsVersionSupported(p(t,n,r,i,o))}catch(o){}return!1};if(o.isIE){if((n=o.getAXO(this.progID))&&h(n,c[0],c[1],c[2],c[3],c[4])){for(e=0;e<this.digits.length;e++){for(t=u[e]+(0==e?0:1);t<=this.digits[e]&&(i=t,h(n,0==(r=e)?i:u[0],1==r?i:u[1],2==r?i:u[2],3==r?i:u[3],4==r?i:u[4]));t++)l=!0,u[e]=t;if(!l)break}l&&(a=p(u[0],u[1],u[2],u[3],u[4]))}this.installed=n&&l&&a?1:n&&l?0:n?-.2:-1}else o.hasMimeType(this.mimeType)&&(c=o.isGecko&&o.compareNums(o.verGecko,o.formatNum("1.6"))<=0,o.isGecko&&c&&(l=!1),a=(s=o.findNavPlugin("Silverlight.*Plug-?in",0))&&s.description?o.formatNum(s.description):a)&&(u=a.split(o.splitNumRegx),30226<=parseInt(u[2],10)&&parseInt(u[0],10)<2&&(u[0]="2"),a=u.join(",")),this.installed=s&&l&&a?1:s&&l?0:s?-.2:-1;this.version=o.formatNum(a)}},realplayer:{mimeType:["audio/x-pn-realaudio-plugin"],progID:["rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer"],classID:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA",INSTALLED:{},q1:[[11,0,0],[999],[663],[663],[663],[660],[468],[468],[468],[468],[468],[468],[431],[431],[431],[372],[180],[180],[172],[172],[167],[114],[0]],q3:[[6,0],[12,99],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,69],[12,46],[12,46],[12,46],[11,3006],[11,2806],[11,2806],[11,2804],[11,2804],[11,2799],[11,2749],[11,2700]],compare:function(e,t){for(var n,r,i=e.length,o=t.length,a=0;a<Math.max(i,o);a++){if(n=a<i?e[a]:0,(r=a<o?t[a]:0)<n)return 1;if(n<r)return-1}return 0},convertNum:function(e,t,n){var r,i,o,a=this.$;if(!e||!(r=a.formatNum(e)))return null;for(r=r.split(a.splitNumRegx),o=0;o<r.length;o++)r[o]=parseInt(r[o],10);if(0!=this.compare(r.slice(0,Math.min(t[0].length,r.length)),t[0]))return null;if(i=r.length>t[0].length?r.slice(t[0].length):[],0<this.compare(i,t[1])||this.compare(i,t[t.length-1])<0)return null;for(o=t.length-1;1<=o&&1!=o&&(0!=this.compare(t[o],i)||0!=this.compare(t[o],t[o-1]))&&!(0<=this.compare(i,t[o])&&this.compare(i,t[o-1])<0);o--);return n[0].join(".")+"."+n[o].join(".")},getVersion:function(e,t){var n,r=this,i=null,o=0,a=0,s=r.$,l=s.isString(t)&&/[^\s]/.test(t)?t:(t=null,r.mimeType[0]);if(s.isDefined(r.INSTALLED[l]))r.installed=r.INSTALLED[l];else{if(s.isIE){for(p=null,n=0;n<r.progID.length;n++)if(p=s.getAXO(r.progID[n]))try{i=s.getNum(p.GetVersionInfo());break}catch(e){}r.installed=i?1:-1}else{var c="RealPlayer.*Plug-?in",u=s.hasMimeType(r.mimeType),d=s.findNavPlugin(c,0);if(u&&d&&(o=1,a=!t||s.getMimeEnabledPlugin(t,c)?1:0),0!==r.getVersionDone){if(r.getVersionDone=0,u){var p,d=1,t=null,c=null;if((p=s.hasMimeType("application/vnd.rn-realplayer-javascript"))&&(t=s.formatNum(s.getNum(p.enabledPlugin.description))),!1===(c=1==s.OS&&t&&(u=t.split(s.splitNumRegx),c=!0,r.compare(u,[6,0,12,200])<0||r.compare(u,[6,0,12,1739])<=0&&0<=r.compare(u,[6,0,12,857]))?!1:c)&&(d=0),d=!(s.OS<=2)||(s.isGecko&&s.compareNums(s.verGecko,s.formatNum("1,8"))<0&&(d=0),s.isChrome&&(d=0),s.isOpera&&s.verOpera<10)?0:d){p=s.insertHTML("object",["type",r.mimeType[0]],["src","","autostart","false","imagestatus","false","controls","stopbutton"],"",r),p=s.getDOMobj(p);try{i=s.getNum(p.GetVersionInfo())}catch(e){}s.setStyle(p,["display","none"])}!i&&t&&!1===c&&(i=(p=r.convertNum(t,r.q3,r.q1))||t)}}else i=r.version;r.installed=o&&a&&i?1:o&&a?0:o?-.2:-1}r.version||(r.version=s.formatNum(i)),r.INSTALLED[l]=r.installed}}},zz:0},PluginDetect.initScript(),function(){var t;return df=function(){return t},setTimeout(function(){var e=document.createElement("input");dfInitDS(),dfSet(e,0),t=e.value},10),""}):function(){return""}}(document,window),encrypt.errors=encrypt.errors||{},encrypt.errors.UNABLETOBIND="CSEB01",encrypt.version="0_1_15",Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function t(){return r.apply(this instanceof i&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),r=this,i=function(){};return i.prototype=this.prototype,t.prototype=new i,t}),Date.prototype.toISOString||(()=>{function e(e){return e<10?"0"+e:e}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}})();var validations={},Encryption=(validations.luhnCheck=(()=>{var c={};return function(){var e=arguments,t=0<arguments.length?e[0]:this.cardnumber;if(isNaN(parseInt(t,10)))return!1;var n=t.length,r=1&n,i=0;if(void 0===c[t]){14<=n&&evLog("luhnCount");for(var o=0;o<n;o++){var a=parseInt(t.charAt(o),10);1&o^r||9<(a*=2)&&(a-=9),i+=a}i%10==0?(evLog("luhnOkCount"),c[t]=!0):(evLog("luhnFailCount"),c[t]=!1)}var s,l=0;for(s in c)c.hasOwnProperty(s)&&s.length===n&&l++;return evLog("set","luhnSameLengthCount",l),c[t]}})(),validations.numberCheck=function(e){return!(!(e||"").replace(/[^\d]/g,"").match(/^\d{10,20}$/)||!validations.luhnCheck(e))},validations.cvcCheck=function(e){return!!(e&&e.match&&e.match(/^\d{3,4}$/))},validations.yearCheck=function(e){return!!(e&&e.match&&e.match(/^\d{4}$/))},validations.monthCheck=function(e){e=(e||"").replace(/^0(\d)$/,"$1");return!!(e.match(/^([1-9]|10|11|12)$/)&&1<=parseInt(e,10)&&parseInt(e,10)<=12)},validations.holderNameCheck=function(e){return!!(e&&e.match&&e.match(/\S/))},function(e,t){try{sjcl.random.startCollectors()}catch(e){}try{df()}catch(e){}var n;this.key=e,this.options=t||{},void 0===this.options.numberIgnoreNonNumeric&&(this.options.numberIgnoreNonNumeric=!0),void 0!==this.options.cvcIgnoreFornumber&&delete this.options.cvcIgnoreFornumber,"string"==typeof this.options.cvcIgnoreBins?(n=[],this.options.cvcIgnoreBins.replace(/\d+/g,function(e){return 0<e.length&&!isNaN(parseInt(e,10))&&n.push(e),e}),0<n.length&&(this.options.cvcIgnoreFornumber=new RegExp("^\\s*("+n.join("|")+")"))):void 0!==this.options.cvcIgnoreBins&&delete this.options.cvcIgnoreBins,evLog("initializeCount")}),DEFAULT_FIELDNAME_ATTRIBUTE=(Encryption.prototype.createRSAKey=function(){var e=this.key.split("|");if(2!=e.length)throw"Malformed public key";var t=e[0],e=e[1],n=new RSAKey;return n.setPublic(e,t),n},Encryption.prototype.createAESKey=function(){return new AESKey},Encryption.prototype.encrypt=function(e){var t,n={number:e.number||"",cvc:e.cvc||"",month:e.expiryMonth||"",year:e.expiryYear||""};if(!1!==this.options.enableValidations&&!1===this.validate(n).valid)return!1;evLog("extend",e);try{e.dfValue=df()}catch(e){}return n=this.createRSAKey(),e=(t=this.createAESKey()).encrypt(JSON.stringify(e)),t=sjcl.codec.bytes.fromBits(t.key),n=n.encrypt_b64(t),["adyenjs_"+encrypt.version+"$",n,"$",e].join("")},Encryption.prototype.validate=function(e){var t={valid:!0};if("object"==typeof e){for(var n in e)if(e.hasOwnProperty(n)){var r,i,o=e[n],a=(this.options[n+"IgnoreNonNumeric"]&&(o=o.replace(/\D/g,"")),!1);for(r in e)e.hasOwnProperty(r)&&(i=this.options[n+"IgnoreFor"+r])&&e[r].match(i)&&(a=!0);if(a)t[n]=!0,t.valid=t.valid&&t[n];else switch(n){case"number":t.number=validations.numberCheck(o),t.luhn=t.number,t.valid=t.valid&&t.number;break;case"expiryYear":case"year":t.year=validations.yearCheck(o),t.expiryYear=t.year,t.valid=t.valid&&t.year;break;case"cvc":t.cvc=validations.cvcCheck(o),t.valid=t.valid&&t.cvc;break;case"expiryMonth":case"month":t.month=validations.monthCheck(o),t.expiryMonth=t.month,t.valid=t.valid&&t.month;break;case"holderName":t.holderName=validations.holderNameCheck(o),t.valid=t.valid&&t.holderName;break;default:t.unknown=t.unknown||[],t.unknown.push(n),t.valid=!1}}}else t.valid=!1;return t},validations.createChangeHandler=function(i,o,a){return function(e){var t=e.target||e.srcElement,n=(t||{}).value||"",e="boolean"==typeof e.isInitializing&&e.isInitializing,r=(t.options&&void 0!==t.selectedIndex&&(n=t.options[t.selectedIndex].value),i.options[o+"IgnoreNonNumeric"]&&(n=n.replace(/\D/g,"")),i.toJSON(i.getEncryptedFields(i.element))),r={year:r.expiryYear,month:r.expiryMonth,number:r.number,cvc:r.cvc,holderName:r.holderName};(i.encryption.validate(r)[o]?(i.validity[o]=!0,removeClass(t,"invalid-"+o),addClass):(i.validity[o]=!1,e&&""===n||addClass(t,"invalid-"+o),removeClass))(t,"valid-"+o),i.validity.luhn=i.validity.number,(t.className||"").match(/invalid-number/)?(addClass(t,"invalid-luhn"),removeClass(t,"valid-luhn")):(t.className||"").match(/valid-number/)&&(removeClass(t,"invalid-luhn"),addClass(t,"valid-luhn")),a&&""===n&&(removeClass(t,"valid-"+o),removeClass(t,"invalid-"+o)),((t.className||"").match(/invalid-/)?addClass:removeClass)(t,"invalid"),!0!==i.options.disabledValidClass&&((t.className||"").match(/invalid-/)?removeClass:addClass)(t,"valid"),i.toggleSubmit()}},"data-encrypted-name"),EncryptedForm=function(e,t,n){if("object"!=typeof e||"object"!=typeof e.ownerDocument)throw new Error("Expected target element to be a HTML Form element");if("form"!==(e.nodeName||e.tagName||"").toLowerCase())throw new Error("Expected target element to be a HTML Form element");if(this.element=e,this.key=t,this.validity={},evLog("initializeFormCount"),this.options=n=n||{},"object"!=typeof n)throw new Error("Expected options to be an object");void 0===n.numberIgnoreNonNumeric&&(n.numberIgnoreNonNumeric=!0),"string"==typeof n.fieldNameAttribute&&n.fieldNameAttribute.match(/^data(-\w+)+$/i)||(n.fieldNameAttribute=DEFAULT_FIELDNAME_ATTRIBUTE),this.name=n.name||"adyen-encrypted-data",this.fieldNameAttribute=n.fieldNameAttribute||DEFAULT_FIELDNAME_ATTRIBUTE,this.onsubmit=n.onsubmit||function(){},this.encryption=new Encryption(t,n),this.element.addEventListener?this.element.addEventListener("submit",this.handleSubmit.bind(this),!1):this.element.attachEvent&&this.element.attachEvent("onsubmit",this.handleSubmit.bind(this)),!1!==n.enableValidations&&this.addValidations();for(var r,i=0,o=e.elements.length;i<o;i++)e.elements[i]&&null!=(r=getAttribute(e.elements[i],this.options.fieldNameAttribute))&&""!==r&&evLog("bind",e.elements[i],r)},AESKey=(EncryptedForm.prototype={constructor:EncryptedForm,hasAttribute:document&&document.documentElement&&document.documentElement.hasAttribute?function(e,t){return e.hasAttribute(t)}:function(e,t){return e.attributes&&e.attributes[t]},handleSubmit:function(e){if(!1!==this.options.enableValidations&&!this.isValid())return this.createEncryptedField("false"),e.preventDefault&&e.preventDefault(),window.event&&(window.event.returnValue=!1),e.originalEvent&&(e.originalEvent.returnValue=!1),e.returnValue=!1;this.createEncryptedField(this.encrypt()),this.onsubmit(e)},getEncryptedFields:function(e,t){if(e.querySelectorAll)return e.querySelectorAll("["+this.fieldNameAttribute+"]");t=t||[];for(var n,r=e.children,i=0;i<r.length;i++)n=r[i],this.hasAttribute(n,this.fieldNameAttribute)?t.push(n):this.getEncryptedFields(n,t);return t},toJSON:function(e){for(var t,n,r,i={},o=e.length-1;0<=o;o--)(t=e[o]).removeAttribute("name"),n=t.getAttribute(this.fieldNameAttribute),r=t.value,t.options&&void 0!==t.selectedIndex&&(r=t.options[t.selectedIndex].value),i[n]=r;return i},encrypt:function(){return this.encryption.encrypt(this.toJSON(this.getEncryptedFields(this.element)))},createEncryptedField:function(e){var t=document.getElementById(this.name);t||((t=document.createElement("input")).type="hidden",t.name=t.id=this.name,this.element.appendChild(t)),t.setAttribute("value",e)},addValidations:function(){for(var e,t=this.element.elements,n=t.length,r={};0<n--;)(e=t[n])&&e.getAttribute&&("number"===e.getAttribute(this.fieldNameAttribute)?(r.luhnHandler=r.luhnHandler||validations.createChangeHandler(this,"number",!0),addEvent(e,"change",r.luhnHandler,!1),addEvent(e,"keyup",r.luhnHandler,!1),addEvent(e,"blur",r.luhnHandler,!1),r.luhnHandler({target:e,isInitializing:!0})):"cvc"===e.getAttribute(this.fieldNameAttribute)?(r.cvcHandler=r.cvcHandler||validations.createChangeHandler(this,"cvc",!0),addEvent(e,"change",r.cvcHandler,!1),addEvent(e,"keyup",r.cvcHandler,!1),addEvent(e,"blur",r.cvcHandler,!1),r.cvcHandler({target:e,isInitializing:!0})):"expiryYear"===e.getAttribute(this.fieldNameAttribute)?(r.expiryYearHandler=r.expiryYearHandler||validations.createChangeHandler(this,"year",!0),addEvent(e,"change",r.expiryYearHandler,!1),addEvent(e,"keyup",r.expiryYearHandler,!1),addEvent(e,"blur",r.expiryYearHandler,!1),r.expiryYearHandler({target:e,isInitializing:!0})):"expiryMonth"===e.getAttribute(this.fieldNameAttribute)?(r.expiryMonthHandler=r.expiryMonthHandler||validations.createChangeHandler(this,"month",!0),addEvent(e,"change",r.expiryMonthHandler,!1),addEvent(e,"keyup",r.expiryMonthHandler,!1),addEvent(e,"blur",r.expiryMonthHandler,!1),r.expiryMonthHandler({target:e,isInitializing:!0})):"holderName"===e.getAttribute(this.fieldNameAttribute)&&(r.holderNameHandler=r.holderNameHandler||validations.createChangeHandler(this,"holderName",!1),addEvent(e,"change",r.holderNameHandler,!1),addEvent(e,"keyup",r.holderNameHandler,!1),addEvent(e,"blur",r.holderNameHandler,!1),r.holderNameHandler({target:e,isInitializing:!0})))},addCardTypeDetection:function(e){if(void 0===adyen.CardTypeDetection||"function"!=typeof adyen.CardTypeDetection.getHandler)return window.console&&window.console.warn("[CSE] Card type detection not available");for(var t,n=adyen.CardTypeDetection.getHandler(e),r=this.element.elements,i=r.length;0<i--;)(t=r[i])&&t.getAttribute&&"number"===t.getAttribute(this.fieldNameAttribute)&&(addEvent(t,"change",n,!1),addEvent(t,"input",n,!1),addEvent(t,"keyup",n,!1),n({target:t}))},validate:function(){var e=this.toJSON(this.getEncryptedFields(this.element));return delete e.generationtime,this.encryption.validate(e)||{valid:!1}},isValid:function(){var e,t=this.validate().valid;for(e in this.validity)this.validity.hasOwnProperty(e)&&(t=t&&this.validity[e]);return t},toggleSubmit:function(){for(var e=this.isValid(),t=this.element.elements,n=!0===e||this.options&&!0===this.options.submitButtonAlwaysEnabled,r=t.length;0<r--;)t[r]&&"submit"===(t[r].type||"").toLowerCase()&&(t[r].disabled=!n);return e},getVersion:function(){return encrypt.version}},function(){});AESKey.prototype={constructor:AESKey,key:sjcl.random.randomWords(8,0),encrypt:function(e){return this.encryptWithIv(e,sjcl.random.randomWords(3,0))},encryptWithIv:function(e,t){var n=new sjcl.cipher.aes(this.key),e=sjcl.codec.utf8String.toBits(e),n=sjcl.mode.ccm.encrypt(n,e,t),e=sjcl.bitArray.concat(t,n);return sjcl.codec.base64.fromBits(e)}}}(this,"function"==typeof define?define:null),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()})(this,function(){function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function v(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,n;t=r,n=i[e=e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function a(e,t){if(null==e)return{};var n,r=((e,t)=>{if(null==e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r})(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function c(e,t){return(e=>{if(Array.isArray(e))return e})(e)||((e,t)=>{if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}})(e,t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function y(e){return(e=>{if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}})(e)||(e=>{if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)})(e)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance")})()}function u(e){var o=0<arguments.length&&void 0!==e?e:{serializable:!0},a={};return{get:function(e,t){var n,r,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},e=JSON.stringify(e);return e in a?Promise.resolve(o.serializable?JSON.parse(a[e]):a[e]):(n=t(),r=i&&i.miss||function(){return Promise.resolve()},n.then(function(e){return r(e)}).then(function(){return n}))},set:function(e,t){return a[JSON.stringify(e)]=o.serializable?JSON.stringify(t):t,Promise.resolve(t)},delete:function(e){return delete a[JSON.stringify(e)],Promise.resolve()},clear:function(){return a={},Promise.resolve()}}}function d(t,n){return Object.keys(void 0!==n?n:{}).forEach(function(e){t[e]=n[e](t)}),t}function i(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(n[i++])})}var p={WithinQueryParameters:0,WithinHeaders:1};function h(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach(function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])}),{data:0<Object.entries(r).length?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var f={Read:1,Write:2,Any:3},b=1,S=2,_=3;function E(e,t){t=1<arguments.length&&void 0!==t?t:b;return v(v({},e),{},{status:t,lastUpdate:Date.now()})}function C(e){return"string"==typeof e?{protocol:"https",url:e,accept:f.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||f.Any}}var w="GET",o="POST";function m(s,e,l,c){function u(n,r){var i=n.pop();if(void 0===i)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:A(d)};function o(e){return e={request:t,response:e,host:i,triesLeft:n.length},d.push(e),e}var t={data:p,headers:h,method:f,url:((e,t,n)=>(n=T(n),e="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t),n.length&&(e+="?".concat(n)),e))(i,l.path,m),connectTimeout:r(g,s.timeouts.connect),responseTimeout:r(g,c.timeout)},a={onSucess:function(t){try{return JSON.parse(t.content)}catch(e){throw{name:"DeserializationError",message:e.message,response:t}}},onRetry:function(e){var t=o(e);return e.isTimedOut&&g++,Promise.all([s.logger.info("Retryable failure",P(t)),s.hostsCache.set(i,E(i,e.isTimedOut?_:S))]).then(function(){return u(n,r)})},onFail:function(e){throw o(e),((e,t)=>{var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return{name:"ApiError",message:i,status:r,transporterStackTrace:t}})(e,A(d))}};return s.requester.send(t).then(function(e){return t=a,r=(n=e=e).status,n.isTimedOut||!n.isTimedOut&&0==~~n.status||2!=~~(r/100)&&4!=~~(r/100)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e);var t,n,r})}var n,r,t,i,d=[],p=((e,t)=>{if(e.method!==w&&(void 0!==e.data||void 0!==t.data))return e=Array.isArray(e.data)?e.data:v(v({},e.data),t.data),JSON.stringify(e)})(l,c),h=(o=c,n=v(v({},s.headers),o.headers),r={},Object.keys(n).forEach(function(e){var t=n[e];r[e.toLowerCase()]=t}),r),f=l.method,o=l.method!==w?{}:v(v({},l.data),c.data),m=v(v(v({"x-algolia-agent":s.userAgent.value},s.queryParameters),o),c.queryParameters),g=0;return t=s.hostsCache,i=e,Promise.all(i.map(function(e){return t.get(e,function(){return Promise.resolve(E(e))})})).then(function(e){var t=e.filter(function(e){return(e=e).status===b||12e4<Date.now()-e.lastUpdate}),n=e.filter(function(e){return(e=e).status===_&&Date.now()-e.lastUpdate<=12e4}),e=[].concat(y(t),y(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:0<e.length?e.map(C):i}}).then(function(e){return u(y(e.statelessHosts).reverse(),e.getTimeout)})}function T(n){return Object.keys(n).map(function(e){return i("%s=%s",e,(t=n[e],"[object Object]"===Object.prototype.toString.call(t)||"[object Array]"===Object.prototype.toString.call(t)?JSON.stringify(n[e]):n[e]));var t}).join("&")}function A(e){return e.map(P)}function P(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return v(v({},e),{},{request:v(v({},e.request),{},{headers:v(v({},e.request.headers),t)})})}function g(e){var t,n,o,r,i,a=e.appId,s=(r=void 0!==e.authMode?e.authMode:p.WithinHeaders,i={"x-algolia-api-key":e.apiKey,"x-algolia-application-id":a},{headers:function(){return r===p.WithinHeaders?i:{}},queryParameters:function(){return r===p.WithinQueryParameters?i:{}}}),l=(s=v(v({hosts:[{url:"".concat(a,"-dsn.algolia.net"),accept:f.Read},{url:"".concat(a,".algolia.net"),accept:f.Write}].concat((e=>{for(var t=e.length-1;0<t;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e})([{url:"".concat(a,"-1.algolianet.com")},{url:"".concat(a,"-2.algolianet.com")},{url:"".concat(a,"-3.algolianet.com")}]))},e),{},{headers:v(v(v({},s.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:v(v({},s.queryParameters()),e.queryParameters)}),t=s.hostsCache,n=s.hosts,o={hostsCache:t,logger:s.logger,requester:s.requester,requestsCache:s.requestsCache,responsesCache:s.responsesCache,timeouts:s.timeouts,userAgent:s.userAgent,headers:s.headers,queryParameters:s.queryParameters,hosts:n.map(C),read:function(e,t){function n(){return m(o,o.hosts.filter(function(e){return 0!=(e.accept&f.Read)}),e,i)}var r,i=h(t,o.timeouts.read);return!0!==(void 0!==i.cacheable?i:e).cacheable?n():o.responsesCache.get(r={request:e,mappedRequestOptions:i,transporter:{queryParameters:o.queryParameters,headers:o.headers}},function(){return o.requestsCache.get(r,function(){return o.requestsCache.set(r,n()).then(function(e){return Promise.all([o.requestsCache.delete(r),e])},function(e){return Promise.all([o.requestsCache.delete(r),Promise.reject(e)])}).then(function(e){e=c(e,2);return e[0],e[1]})})},{miss:function(e){return o.responsesCache.set(r,e)}})},write:function(e,t){return m(o,o.hosts.filter(function(e){return 0!=(e.accept&f.Write)}),e,h(t,o.timeouts.write))}});return d({transporter:l,appId:a,addAlgoliaAgent:function(e,t){l.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([l.requestsCache.clear(),l.responsesCache.clear()]).then(function(){})}},e.methods)}function O(n){return function(e,t){e=e.map(function(e){return v(v({},e),{},{params:T(e.params||{})})});return n.transporter.read({method:o,path:"1/indexes/*/queries",data:{requests:e},cacheable:!0},t)}}function I(o){return function(e,i){return Promise.all(e.map(function(e){var t=e.params,n=t.facetName,r=t.facetQuery,t=a(t,["facetName","facetQuery"]);return M(o)(e.indexName,{methods:{searchForFacetValues:D}}).searchForFacetValues(n,r,v(v({},i),t))}))}}function R(n){return function(e,t){return n.transporter.read({method:o,path:i("1/indexes/%s/query",n.indexName),data:{query:e},cacheable:!0},t)}}var M=function(t){return function(e){return d({transporter:t.transporter,appId:t.appId,indexName:e},(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).methods)}},D=function(r){return function(e,t,n){return r.transporter.read({method:o,path:i("1/indexes/%s/facets/%s/query",r.indexName,e),data:{facetQuery:t},cacheable:!0},n)}};function e(e,t,n){var r,i,o,a,t={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(o){return new Promise(function(n){var r=new XMLHttpRequest;r.open(o.method,o.url,!0),Object.keys(o.headers).forEach(function(e){return r.setRequestHeader(e,o.headers[e])});function e(e,t){return setTimeout(function(){r.abort(),n({status:0,content:t,isTimedOut:!0})},1e3*e)}var t,i=e(o.connectTimeout,"Connection timeout");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===t&&(clearTimeout(i),t=e(o.responseTimeout,"Socket timeout"))},r.onerror=function(){0===r.status&&(clearTimeout(i),clearTimeout(t),n({content:r.responseText||"Network request failed",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(i),clearTimeout(t),n({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(o.data)})}},logger:{debug:function(e,t){return Promise.resolve()},info:function(e,t){return Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}},responsesCache:u(),requestsCache:u({serializable:!1}),hostsCache:function r(e){var i=y(e.caches),o=i.shift();return void 0===o?{get:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then(function(e){return Promise.all([e,n.miss(e)])}).then(function(e){return c(e,1)[0]})},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return o.get(e,t,n).catch(function(){return r({caches:i}).get(e,t,n)})},set:function(e,t){return o.set(e,t).catch(function(){return r({caches:i}).set(e,t)})},delete:function(e){return o.delete(e).catch(function(){return r({caches:i}).delete(e)})},clear:function(){return o.clear().catch(function(){return r({caches:i}).clear()})}}}({caches:[(i={key:"".concat("4.5.1","-").concat(e)},a="algoliasearch-client-js-".concat(i.key),{get:function(t,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var e=JSON.stringify(t),e=l()[e];return Promise.all([e||n(),void 0!==e])}).then(function(e){var e=c(e,2),t=e[0];return Promise.all([t,e[1]||r.miss(t)])}).then(function(e){return c(e,1)[0]})},set:function(t,n){return Promise.resolve().then(function(){var e=l();return e[JSON.stringify(t)]=n,s().setItem(a,JSON.stringify(e)),n})},delete:function(t){return Promise.resolve().then(function(){var e=l();delete e[JSON.stringify(t)],s().setItem(a,JSON.stringify(e))})},clear:function(){return Promise.resolve().then(function(){s().removeItem(a)})}}),u()]}),userAgent:(r={value:"Algolia for JavaScript (".concat("4.5.1",")"),add:function(e){e="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===r.value.indexOf(e)&&(r.value="".concat(r.value).concat(e)),r}}).add({segment:"Browser",version:"lite"}),authMode:p.WithinQueryParameters};function s(){return o=void 0===o?i.localStorage||window.localStorage:o}function l(){return JSON.parse(s().getItem(a)||"{}")}return g(v(v(v({},t),n),{},{methods:{search:O,searchForFacetValues:I,multipleQueries:O,multipleSearchForFacetValues:I,initIndex:function(t){return function(e){return M(t)(e,{methods:{search:R,searchForFacetValues:D}})}}}}))}return e.version="4.5.1",e}),(()=>{var e=window.angular.module("angular-bind-html-compile",[]);e.directive("bindHtmlCompile",["$compile",function(i){return{restrict:"A",link:function(t,n,r){t.$watch(function(){return t.$eval(r.bindHtmlCompile)},function(e){n.html(e&&e.toString());e=t;r.bindHtmlScope&&(e=t.$eval(r.bindHtmlScope)),i(n.contents())(e)})}}}]),"undefined"!=typeof module&&module.exports&&(module.exports=e.name)})(),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(h,f,m,e){var g=e.has("$animateCss")?e.get("$animateCss"):null;return{link:function(t,n,e){var r=m(e.expanding),i=m(e.expanded),o=m(e.collapsing),a=m(e.collapsed),s=!1,l={},c={};function u(e){return s?{width:e.scrollWidth+"px"}:{height:e.scrollHeight+"px"}}function d(){n.removeClass("collapsing").addClass("collapse").css(l),i(t)}function p(){n.css(c),n.removeClass("collapsing").addClass("collapse"),a(t)}c=(s=!!("horizontal"in e))?(l={width:""},{width:"0"}):(l={height:""},{height:"0"}),t.$eval(e.uibCollapse)||n.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(l),t.$watch(e.uibCollapse,function(e){e?n.hasClass("collapse")||n.hasClass("in")?f.resolve(o(t)).then(function(){n.css(u(n[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),g?g(n,{removeClass:"in",to:c}).start().finally(p):h.removeClass(n,"in",{to:c}).then(p)},angular.noop):p():n.hasClass("collapse")&&n.hasClass("in")||f.resolve(r(t)).then(function(){n.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),g?g(n,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:u(n[0])}).start().finally(d):h.addClass(n,"in",{css:{overflow:"hidden"},to:u(n[0])}).then(d)},angular.noop)})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(e,t,n){n.$observe("disabled",function(e){n.$set("tabindex",e?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,n,r){this.groups=[],this.closeOthers=function(t){(angular.isDefined(n.closeOthers)?e.$eval(n.closeOthers):r.closeOthers)&&angular.forEach(this.groups,function(e){e!==t&&(e.isOpen=!1)})},this.addGroup=function(t){var n=this;this.groups.push(t),t.$on("$destroy",function(e){n.removeGroup(t)})},this.removeGroup=function(e){e=this.groups.indexOf(e);-1!==e&&this.groups.splice(e,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(t,n,e,r){n.addClass("panel"),r.addGroup(t),t.openClass=e.openClass||"panel-open",t.panelClass=e.panelClass||"panel-default",t.$watch("isOpen",function(e){n.toggleClass(t.openClass,!!e),e&&r.closeOthers(t)}),t.toggleOpen=function(e){t.isDisabled||e&&32!==e.which||(t.isOpen=!t.isOpen)};e="accordiongroup-"+t.$id+"-"+Math.floor(1e4*Math.random());t.headingId=e+"-tab",t.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,n,t,r){e.$watch(function(){return r[t.uibAccordionTransclude]},function(e){var t;e&&((t=angular.element(n[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"))).html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,n,r,i){e.closeable=!!n.close,t.addClass("alert"),n.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");t=angular.isDefined(n.dismissOnTimeout)?r(n.dismissOnTimeout)(e.$parent):null;t&&i(function(){e.close()},parseInt(t,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,r,e){var i=e[0],o=e[1],e=a(r.uibUncheckable);n.find("input").css({display:"none"}),o.$render=function(){n.toggleClass(i.activeClass,angular.equals(o.$modelValue,t.$eval(r.uibBtnRadio)))},n.on(i.toggleEvent,function(){var e;r.disabled||(e=n.hasClass(i.activeClass))&&!angular.isDefined(r.uncheckable)||t.$apply(function(){o.$setViewValue(e?null:t.$eval(r.uibBtnRadio)),o.$render()})}),r.uibUncheckable&&t.$watch(e,function(e){r.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(n,e,t,r){var i=r[0],o=r[1];function a(){return s(t.btnCheckboxTrue,!0)}function s(e,t){return angular.isDefined(e)?n.$eval(e):t}e.find("input").css({display:"none"}),o.$render=function(){e.toggleClass(i.activeClass,angular.equals(o.$modelValue,a()))},e.on(i.toggleEvent,function(){t.disabled||n.$apply(function(){o.$setViewValue(e.hasClass(i.activeClass)?s(t.btnCheckboxFalse,!1):a()),o.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(r,i,t,e,o){var n,a,s=this,l=s.slides=r.slides=[],c="uib-slideDirection",u=r.active,d=!1;function p(e){for(var t=0;t<l.length;t++)l[t].slide.active=t===e}function h(e){for(var t=0;t<l.length;t++)if(l[t].slide===e)return t}function f(){n&&(t.cancel(n),n=null)}function m(){f();var e=+r.interval;!isNaN(e)&&0<e&&(n=t(g,e))}function g(){var e=+r.interval;a&&!isNaN(e)&&0<e&&l.length?r.next():r.pause()}i.addClass("carousel"),s.addSlide=function(e,t){l.push({slide:e,element:t}),l.sort(function(e,t){return+e.slide.index-+t.slide.index}),e.index!==r.active&&(1!==l.length||angular.isNumber(r.active))||(r.$currentTransition&&(r.$currentTransition=null),u=e.index,r.active=e.index,p(u),s.select(l[h(e)]),1!==l.length)||r.play()},s.getCurrentIndex=function(){for(var e=0;e<l.length;e++)if(l[e].slide.index===u)return e},s.next=r.next=function(){var e=(s.getCurrentIndex()+1)%l.length;if(0!=e||!r.noWrap())return s.select(l[e],"next");r.pause()},s.prev=r.prev=function(){var e=s.getCurrentIndex()-1<0?l.length-1:s.getCurrentIndex()-1;if(!r.noWrap()||e!=l.length-1)return s.select(l[e],"prev");r.pause()},s.removeSlide=function(e){e=h(e);l.splice(e,1),0<l.length&&u===e?e>=l.length?(u=l.length-1,p(r.active=u),s.select(l[l.length-1])):(u=e,p(r.active=u),s.select(l[e])):e<u&&(u--,r.active=u),0===l.length&&(u=null,r.active=null)},s.select=r.select=function(e,t){var n=h(e.slide);void 0===t&&(t=n>s.getCurrentIndex()?"next":"prev"),e.slide.index===u||r.$currentTransition||(e=e.slide,n=n,t=t,d)||(angular.extend(e,{direction:t}),angular.extend(l[u].slide||{},{direction:t}),o.enabled(i)&&!r.$currentTransition&&l[n].element&&1<s.slides.length&&(l[n].element.data(c,e.direction),t=s.getCurrentIndex(),angular.isNumber(t)&&l[t].element&&l[t].element.data(c,e.direction),r.$currentTransition=!0,o.on("addClass",l[n].element,function(e,t){"close"===t&&(r.$currentTransition=null,o.off("addClass",e))})),r.active=e.index,u=e.index,p(n),m())},r.indexOfSlide=function(e){return+e.slide.index},r.isActive=function(e){return r.active===e.slide.index},r.isPrevDisabled=function(){return 0===r.active&&r.noWrap()},r.isNextDisabled=function(){return r.active===l.length-1&&r.noWrap()},r.pause=function(){r.noPause||(a=!1,f())},r.play=function(){a||(a=!0,m())},i.on("mouseenter",r.pause),i.on("mouseleave",r.play),r.$on("$destroy",function(){d=!0,f()}),r.$watch("noTransition",function(e){o.enabled(i,!e)}),r.$watch("interval",m),r.$watchCollection("slides",function(e){e.length||(r.$currentTransition=null)}),r.$watch("active",function(e){if(angular.isNumber(e)&&u!==e){for(var t=0;t<l.length;t++)if(l[t].slide.index===e){e=t;break}l[e]&&(p(e),s.select(l[e]),u=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(i){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(e,t,n,r){t.addClass("item"),r.addSlide(e,t),e.$on("$destroy",function(){r.removeSlide(e)}),e.$watch("active",function(e){i[e?"addClass":"removeClass"](t,"active")})}}}]).animation(".item",["$animateCss",function(o){var a="uib-slideDirection";function s(e,t,n){e.removeClass(t),n&&n()}return{beforeAddClass:function(e,t,n){var r,i;if("active"===t)return t=e.data(a),i=s.bind(this,e,(r="next"===t?"left":"right")+" "+t,n),e.addClass(t),o(e,{addClass:r}).start().done(i),function(){};n()},beforeRemoveClass:function(e,t,n){var r;if("active"===t)return t="next"===e.data(a)?"left":"right",r=s.bind(this,e,t,n),o(e,{addClass:t}).start().done(r),function(){};n()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(p,h,n,f,t){var m,g,v=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function r(e){return t(g,{key:e},!0)[0]}function i(e){for(var t,n,r=[],i=0;i<e.length;)if(angular.isNumber(n)){if("'"===e.charAt(i))(i+1>=e.length||"'"!==e.charAt(i+1))&&(r.push(((e,t,n)=>function(){return e.substr(t+1,n-t-1)})(e,n,i)),n=null);else if(i===e.length)for(;n<e.length;)t=o(e,n),r.push(t),n=t.endIdx;i++}else"'"===e.charAt(i)?(n=i,i++):(t=o(e,i),r.push(t.parser),i=t.endIdx);return r}function o(e,t){for(var n,r=e.substr(t),i=0;i<g.length;i++)if(new RegExp("^"+g[i].key).test(r))return{endIdx:t+(n=g[i]).key.length,parser:n.formatter};return{endIdx:t+1,parser:function(){return r.charAt(0)}}}function a(e){return parseInt(e,10)}function s(e,t){e=e.replace(/:/g,"");e=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(e)?t:e}function l(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function c(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return l(e,n*(s(t,r)-r))}this.init=function(){m=h.id,this.parsers={},this.formatters={},g=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){this.year=(e=+e)<69?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:h.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=h.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:h.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=h.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:h.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:h.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:h.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var e=e.match(/([+-])(\d{2})(\d{2})/),t=e[1],n=e[3];this.hours+=a(t+e[2]),this.minutes+=a(t+n)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:h.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:h.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:h.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:h.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}],1<=angular.version.major&&4<angular.version.minor&&g.push({key:"LLLL",regex:h.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=h.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return n(e,"LLLL")}})},this.init(),this.getParser=function(e){e=r(e);return e&&e.apply||null},this.overrideParser=function(e,t){e=r(e);e&&angular.isFunction(t)&&(this.parsers={},e.apply=t)}.bind(this),this.filter=function(n,e){return angular.isDate(n)&&!isNaN(n)&&e?(e=h.DATETIME_FORMATS[e]||e,h.id!==m&&this.init(),this.formatters[e]||(this.formatters[e]=i(e)),this.formatters[e].reduce(function(e,t){return e+t(n)},"")):""},this.parse=function(e,t,n){if(!angular.isString(e)||!t)return e;t=(t=h.DATETIME_FORMATS[t]||t).replace(v,"\\$&"),h.id!==m&&this.init(),this.parsers[t]||(this.parsers[t]=(i=>{var o=[],a=i.split(""),e=i.indexOf("'");if(-1<e){var t=!1;i=i.split("");for(var n=e;n<i.length;n++)t?("'"===i[n]&&(n+1<i.length&&"'"===i[n+1]?(i[n+1]="$",a[n+1]=""):(a[n]="",t=!1)),i[n]="$"):"'"===i[n]&&(i[n]="$",t=!(a[n]=""));i=i.join("")}return angular.forEach(g,function(e){var t=i.indexOf(e.key);if(-1<t){i=i.split(""),a[t]="("+e.regex+")",i[t]="$";for(var n=t+1,r=t+e.key.length;n<r;n++)a[n]="",i[n]="$";i=i.join(""),o.push({index:t,key:e.key,apply:e.apply,matcher:e.regex})}}),{regex:new RegExp("^"+a.join("")+"$"),map:f(o,"index")}})(t));var t=this.parsers[t],r=t.regex,i=t.map,o=e.match(r),a=!1;if(o&&o.length){for(var s,l=angular.isDate(n)&&!isNaN(n.getTime())?{year:n.getFullYear(),month:n.getMonth(),date:n.getDate(),hours:n.getHours(),minutes:n.getMinutes(),seconds:n.getSeconds(),milliseconds:n.getMilliseconds()}:(n&&p.warn("dateparser:","baseDate is not a valid date"),{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0}),c=1,u=o.length;c<u;c++){var d=i[c-1];"Z"===d.matcher&&(a=!0),d.apply&&d.apply.call(l,o[c])}t=a?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,e=a?Date.prototype.setUTCHours:Date.prototype.setHours;return((e,t,n)=>!(n<1)&&(1===t&&28<n?29===n&&(e%4==0&&e%100!=0||e%400==0):3!==t&&5!==t&&8!==t&&10!==t||n<31))(l.year,l.month,l.date)&&(!angular.isDate(n)||isNaN(n.getTime())||a?(s=new Date(0),t.call(s,l.year,l.month,l.date),e.call(s,l.hours||0,l.minutes||0,l.seconds||0,l.milliseconds||0)):(s=new Date(n),t.call(s,l.year,l.month,l.date),e.call(s,l.hours,l.minutes,l.seconds,l.milliseconds))),s}},this.toTimezone=function(e,t){return e&&t?c(e,t):e},this.fromTimezone=function(e,t){return e&&t?c(e,t,!0):e},this.timezoneToOffset=s,this.addDateMinutes=l,this.convertTimezoneToLocal=c}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(d){var o=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,p=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(e,t){var r=[],l=[],c={},t=t.uibIsClass.match(o),u=t[2],n=t[1].split(",");return function(s,e,t){r.push(s),l.push({scope:s,element:e}),n.forEach(function(e,t){var n,r=s,i=e.match(p),o=r.$eval(i[1]),i=i[2],a=c[e];a||(n=function(t){var n=null;l.some(function(e){if(e.scope.$eval(u)===t)return n=e,!0}),a.lastActivated!==n&&(a.lastActivated&&d.removeClass(a.lastActivated.element,o),n&&d.addClass(n.element,o),a.lastActivated=n)},c[e]=a={lastActivated:null,scope:r,watchFn:n,compareWithExp:i,watcher:r.$watch(i,n)}),a.watchFn(r.$eval(i))}),s.$on("$destroy",i)};function i(e){var t,n=e.targetScope,e=r.indexOf(n);r.splice(e,1),l.splice(e,1),r.length?(t=r[0],angular.forEach(c,function(e){e.scope===n&&(e.watcher=t.$watch(e.compareWithExp,e.watchFn),e.scope=t)})):c={}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(i,e,t,n,r,o,a,s,l,c,u,d){var p=this,h={$setViewValue:angular.noop},f={},m=[];e.addClass("uib-datepicker"),t.$set("role","application"),i.datepickerOptions||(i.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":i[t]=i.datepickerOptions[t]||angular.noop;break;case"datepickerMode":i.datepickerMode=(angular.isDefined(i.datepickerOptions.datepickerMode)?i.datepickerOptions:l).datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":p[t]=angular.isDefined(i.datepickerOptions[t])?r(i.datepickerOptions[t])(i.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":p[t]=(angular.isDefined(i.datepickerOptions[t])?i.datepickerOptions:l)[t];break;case"startingDay":angular.isDefined(i.datepickerOptions.startingDay)?p.startingDay=i.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?p.startingDay=l.startingDay:p.startingDay=(o.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":i.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?p[t]=d.fromTimezone(new Date(e),f.getOption("timezone")):(c&&a.warn("Literal date support has been deprecated, please switch to date object usage"),p[t]=new Date(s(e,"medium"))):p[t]=l[t]?d.fromTimezone(new Date(l[t]),f.getOption("timezone")):null,p.refreshView()});break;case"maxMode":case"minMode":i.datepickerOptions[t]?i.$watch(function(){return i.datepickerOptions[t]},function(e){p[t]=i[t]=angular.isDefined(e)?e:i.datepickerOptions[t],("minMode"===t&&p.modes.indexOf(i.datepickerOptions.datepickerMode)<p.modes.indexOf(p[t])||"maxMode"===t&&p.modes.indexOf(i.datepickerOptions.datepickerMode)>p.modes.indexOf(p[t]))&&(i.datepickerMode=p[t],i.datepickerOptions.datepickerMode=p[t])}):p[t]=i[t]=l[t]||null}}),i.uniqueId="datepicker-"+i.$id+"-"+Math.floor(1e4*Math.random()),i.disabled=angular.isDefined(t.disabled)||!1,angular.isDefined(t.ngDisabled)&&m.push(i.$parent.$watch(t.ngDisabled,function(e){i.disabled=e,p.refreshView()})),i.isActive=function(e){return 0===p.compare(e.date,p.activeDate)&&(i.activeDateId=e.uid,!0)},this.init=function(e){f=(e=>{var t,n;return angular.version.minor<6?(t=e.$options||i.datepickerOptions.ngModelOptions||l.ngModelOptions||{}).getOption=function(e){return t[e]}:(n=e.$options.getOption("timezone")||(i.datepickerOptions.ngModelOptions?i.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null),t=e.$options.createChild(l.ngModelOptions).createChild(i.datepickerOptions.ngModelOptions).createChild(e.$options).createChild({timezone:n})),t})(h=e),i.datepickerOptions.initDate?(p.activeDate=d.fromTimezone(i.datepickerOptions.initDate,f.getOption("timezone"))||new Date,i.$watch("datepickerOptions.initDate",function(e){e&&(h.$isEmpty(h.$modelValue)||h.$invalid)&&(p.activeDate=d.fromTimezone(e,f.getOption("timezone")),p.refreshView())})):p.activeDate=new Date;e=h.$modelValue?new Date(h.$modelValue):new Date;this.activeDate=isNaN(e)?d.fromTimezone(new Date,f.getOption("timezone")):d.fromTimezone(e,f.getOption("timezone")),h.$render=function(){p.render()}},this.render=function(){var e;h.$viewValue&&(e=new Date(h.$viewValue),!isNaN(e)?this.activeDate=d.fromTimezone(e,f.getOption("timezone")):u||a.error('Datepicker directive: "ng-model" value must be a Date object')),this.refreshView()},this.refreshView=function(){var e;this.element&&(i.selectedDt=null,this._refreshView(),i.activeDt&&(i.activeDateId=i.activeDt.uid),e=h.$viewValue?new Date(h.$viewValue):null,e=d.fromTimezone(e,f.getOption("timezone")),h.$setValidity("dateDisabled",!e||this.element&&!this.isDisabled(e)))},this.createDateObject=function(e,t){var n=h.$viewValue?new Date(h.$viewValue):null,n=d.fromTimezone(n,f.getOption("timezone")),r=new Date,r=d.fromTimezone(r,f.getOption("timezone")),r=this.compare(e,r),t={date:e,label:d.filter(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),past:r<0,current:0===r,future:0<r,customClass:this.customClass(e)||null};return n&&0===this.compare(e,n)&&(i.selectedDt=t),p.activeDate&&0===this.compare(t.date,p.activeDate)&&(i.activeDt=t),t},this.isDisabled=function(e){return i.disabled||this.minDate&&this.compare(e,this.minDate)<0||this.maxDate&&0<this.compare(e,this.maxDate)||i.dateDisabled&&i.dateDisabled({date:e,mode:i.datepickerMode})},this.customClass=function(e){return i.customClass({date:e,mode:i.datepickerMode})},this.split=function(e,t){for(var n=[];0<e.length;)n.push(e.splice(0,t));return n},i.select=function(e){var t;i.datepickerMode===p.minMode?((t=h.$viewValue?d.fromTimezone(new Date(h.$viewValue),f.getOption("timezone")):new Date(0,0,0,0,0,0,0)).setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t=d.toTimezone(t,f.getOption("timezone")),h.$setViewValue(t),h.$render()):(p.activeDate=e,g(p.modes[p.modes.indexOf(i.datepickerMode)-1]),i.$emit("uib:datepicker.mode")),i.$broadcast("uib:datepicker.focus")},i.move=function(e){var t=p.activeDate.getFullYear()+e*(p.step.years||0),e=p.activeDate.getMonth()+e*(p.step.months||0);p.activeDate.setFullYear(t,e,1),p.refreshView()},i.toggleMode=function(e){e=e||1,i.datepickerMode===p.maxMode&&1===e||i.datepickerMode===p.minMode&&-1===e||(g(p.modes[p.modes.indexOf(i.datepickerMode)+e]),i.$emit("uib:datepicker.mode"))},i.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};function g(e){i.datepickerMode=e,i.datepickerOptions.datepickerMode=e}i.$on("uib:datepicker.focus",function(){p.element[0].focus()}),i.keydown=function(e){var t=i.keys[e.which];!t||e.shiftKey||e.altKey||i.disabled||(e.preventDefault(),p.shortcutPropagation||e.stopPropagation(),"enter"===t||"space"===t?p.isDisabled(p.activeDate)||i.select(p.activeDate):!e.ctrlKey||"up"!==t&&"down"!==t?(p.handleKeyDown(t,e),p.refreshView()):i.toggleMode("up"===t?1:-1))},e.on("keydown",function(e){i.$apply(function(){i.keydown(e)})}),i.$on("$destroy",function(){for(;m.length;)m.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(d,e,p){var n=[31,28,31,30,31,30,31,31,30,31,30,31];function i(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?n[t]:29}this.step={months:1},this.element=e,this.init=function(e){angular.extend(e,this),d.showWeeks=e.showWeeks,e.refreshView()},this.getDates=function(e,t){for(var n,r=new Array(t),i=new Date(e),o=0;o<t;)n=new Date(i),r[o++]=n,i.setDate(i.getDate()+1);return r},this._refreshView=function(){for(var e=this.activeDate.getFullYear(),t=this.activeDate.getMonth(),n=new Date(this.activeDate),e=(n.setFullYear(e,t,1),this.startingDay-n.getDay()),e=0<e?7-e:-e,n=new Date(n),r=(0<e&&n.setDate(1-e),this.getDates(n,42)),i=0;i<42;i++)r[i]=angular.extend(this.createDateObject(r[i],this.formatDay),{secondary:r[i].getMonth()!==t,uid:d.uniqueId+"-"+i});d.labels=new Array(7);for(var o,a,s=0;s<7;s++)d.labels[s]={abbr:p(r[s].date,this.formatDayHeader),full:p(r[s].date,"EEEE")};if(d.title=p(this.activeDate,this.formatDayTitle),d.rows=this.split(r,7),d.showWeeks){d.weekNumbers=[];for(var l=(11-this.startingDay)%7,c=d.rows.length,u=0;u<c;u++)d.weekNumbers.push((o=d.rows[u][l].date,a=void 0,(o=new Date(o)).setDate(o.getDate()+4-(o.getDay()||7)),a=o.getTime(),o.setMonth(0),o.setDate(1),Math.floor(Math.round((a-o)/864e5)/7)+1))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n,r=this.activeDate.getDate();"left"===e?r-=1:"up"===e?r-=7:"right"===e?r+=1:"down"===e?r+=7:"pageup"===e||"pagedown"===e?(n=this.activeDate.getMonth()+("pageup"===e?-1:1),this.activeDate.setMonth(n,1),r=Math.min(i(this.activeDate.getFullYear(),this.activeDate.getMonth()),r)):"home"===e?r=1:"end"===e&&(r=i(this.activeDate.getFullYear(),this.activeDate.getMonth())),this.activeDate.setDate(r)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(i,e,o){this.step={years:1},this.element=e,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var e,t=new Array(12),n=this.activeDate.getFullYear(),r=0;r<12;r++)(e=new Date(this.activeDate)).setFullYear(n,r,1),t[r]=angular.extend(this.createDateObject(e,this.formatMonth),{uid:i.uniqueId+"-"+r});i.title=o(this.activeDate,this.formatMonthTitle),i.rows=this.split(t,this.monthColumns),i.yearHeaderColspan=3<this.monthColumns?this.monthColumns-2:1},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),r=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n,r=this.activeDate.getMonth();"left"===e?r-=1:"up"===e?r-=this.monthColumns:"right"===e?r+=1:"down"===e?r+=this.monthColumns:"pageup"===e||"pagedown"===e?(n=this.activeDate.getFullYear()+("pageup"===e?-1:1),this.activeDate.setFullYear(n)):"home"===e?r=0:"end"===e&&(r=11),this.activeDate.setMonth(r)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(i,e,t){var o,a;function s(e){return parseInt((e-1)/a,10)*a+1}this.element=e,this.yearpickerInit=function(){o=this.yearColumns,a=this.yearRows*o,this.step={years:a}},this._refreshView=function(){for(var e,t=new Array(a),n=0,r=s(this.activeDate.getFullYear());n<a;n++)(e=new Date(this.activeDate)).setFullYear(r+n,0,1),t[n]=angular.extend(this.createDateObject(e,this.formatYear),{uid:i.uniqueId+"-"+n});i.title=[t[0].label,t[a-1].label].join(" - "),i.rows=this.split(t,o),i.columns=o},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=o:"right"===e?n+=1:"down"===e?n+=o:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*a:"home"===e?n=s(this.activeDate.getFullYear()):"end"===e&&(n=s(this.activeDate.getFullYear())+a-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,r){r[0].init(r[1])}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,n,r){var i=r[0];angular.extend(i,r[1]),i.yearpickerInit(),i.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(l,c){var t,n,u={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},d={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},i=/(HTML|BODY)/;return{getRawNode:function(e){return!e.nodeName&&e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(e){var t,n=(e=this.getRawNode(e)).offsetParent||l[0].documentElement;for(;n&&n!==l[0].documentElement&&(t=n,"static"===(c.getComputedStyle(t).position||"static"));)n=n.offsetParent;return n||l[0].documentElement},scrollbarWidth:function(e){return e?(angular.isUndefined(n)&&((e=l.find("body")).addClass("uib-position-body-scrollbar-measure"),n=c.innerWidth-e[0].clientWidth,n=isFinite(n)?n:0,e.removeClass("uib-position-body-scrollbar-measure")),n):(angular.isUndefined(t)&&(e=angular.element('<div class="uib-position-scrollbar-measure"></div>'),l.find("body").append(e),t=e[0].offsetWidth-e[0].clientWidth,t=isFinite(t)?t:0,e.remove()),t)},scrollbarPadding:function(e){e=this.getRawNode(e);var t=c.getComputedStyle(e),n=this.parseStyle(t.paddingRight),t=this.parseStyle(t.paddingBottom),e=this.scrollParent(e,!1,!0),r=this.scrollbarWidth(i.test(e.tagName));return{scrollbarWidth:r,widthOverflow:e.scrollWidth>e.clientWidth,right:n+r,originalRight:n,heightOverflow:e.scrollHeight>e.clientHeight,bottom:t+r,originalBottom:t}},isScrollable:function(e,t){e=this.getRawNode(e);t=t?u.hidden:u.normal,e=c.getComputedStyle(e);return t.test(e.overflow+e.overflowY+e.overflowX)},scrollParent:function(e,t,n){e=this.getRawNode(e);var r=t?u.hidden:u.normal,i=l[0].documentElement,t=c.getComputedStyle(e);if(n&&r.test(t.overflow+t.overflowY+t.overflowX))return e;var o="absolute"===t.position,a=e.parentElement||i;if(a===i||"fixed"===t.position)return i;for(;a.parentElement&&a!==i;){var s=c.getComputedStyle(a);if(!(o=o&&"static"!==s.position?!1:o)&&r.test(s.overflow+s.overflowY+s.overflowX))break;a=a.parentElement}return a},position:function(e,t){e=this.getRawNode(e);var n=this.offset(e),t=(t&&(t=c.getComputedStyle(e),n.top-=this.parseStyle(t.marginTop),n.left-=this.parseStyle(t.marginLeft)),this.offsetParent(e)),r={top:0,left:0};return t!==l[0].documentElement&&((r=this.offset(t)).top+=t.clientTop-t.scrollTop,r.left+=t.clientLeft-t.scrollLeft),{width:Math.round(angular.isNumber(n.width)?n.width:e.offsetWidth),height:Math.round(angular.isNumber(n.height)?n.height:e.offsetHeight),top:Math.round(n.top-r.top),left:Math.round(n.left-r.left)}},offset:function(e){var t=(e=this.getRawNode(e)).getBoundingClientRect();return{width:Math.round(angular.isNumber(t.width)?t.width:e.offsetWidth),height:Math.round(angular.isNumber(t.height)?t.height:e.offsetHeight),top:Math.round(t.top+(c.pageYOffset||l[0].documentElement.scrollTop)),left:Math.round(t.left+(c.pageXOffset||l[0].documentElement.scrollLeft))}},viewportOffset:function(e,t,n){n=!1!==n;var r=(e=this.getRawNode(e)).getBoundingClientRect(),i={top:0,left:0,bottom:0,right:0},t=t?l[0].documentElement:this.scrollParent(e),e=t.getBoundingClientRect();return i.top=e.top+t.clientTop,i.left=e.left+t.clientLeft,t===l[0].documentElement&&(i.top+=c.pageYOffset,i.left+=c.pageXOffset),i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,n&&(e=c.getComputedStyle(t),i.top+=this.parseStyle(e.paddingTop),i.bottom-=this.parseStyle(e.paddingBottom),i.left+=this.parseStyle(e.paddingLeft),i.right-=this.parseStyle(e.paddingRight)),{top:Math.round(r.top-i.top),bottom:Math.round(i.bottom-r.bottom),left:Math.round(r.left-i.left),right:Math.round(i.right-r.right)}},parsePlacement:function(e){var t=d.auto.test(e);return(e=(e=t?e.replace(d.auto,""):e).split("-"))[0]=e[0]||"top",d.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",d.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,t,n,r){e=this.getRawNode(e),t=this.getRawNode(t);var i,o=angular.isDefined(t.offsetWidth)?t.offsetWidth:t.prop("offsetWidth"),a=angular.isDefined(t.offsetHeight)?t.offsetHeight:t.prop("offsetHeight"),s=(n=this.parsePlacement(n),r?this.offset(e):this.position(e)),l={top:0,left:0,placement:""};switch(n[2]&&(e=this.viewportOffset(e,r),r=c.getComputedStyle(t),t=o+Math.round(Math.abs(this.parseStyle(r.marginLeft)+this.parseStyle(r.marginRight))),r=a+Math.round(Math.abs(this.parseStyle(r.marginTop)+this.parseStyle(r.marginBottom))),n[0]="top"===n[0]&&r>e.top&&r<=e.bottom?"bottom":"bottom"===n[0]&&r>e.bottom&&r<=e.top?"top":"left"===n[0]&&t>e.left&&t<=e.right?"right":"right"===n[0]&&t>e.right&&t<=e.left?"left":n[0],n[1]="top"===n[1]&&r-s.height>e.bottom&&r-s.height<=e.top?"bottom":"bottom"===n[1]&&r-s.height>e.top&&r-s.height<=e.bottom?"top":"left"===n[1]&&t-s.width>e.right&&t-s.width<=e.left?"right":"right"===n[1]&&t-s.width>e.left&&t-s.width<=e.right?"left":n[1],"center"===n[1])&&(d.vertical.test(n[0])?(i=s.width/2-o/2,e.left+i<0&&t-s.width<=e.right?n[1]="left":e.right+i<0&&t-s.width<=e.left&&(n[1]="right")):(i=s.height/2-r/2,e.top+i<0&&r-s.height<=e.bottom?n[1]="top":e.bottom+i<0&&r-s.height<=e.top&&(n[1]="bottom"))),n[0]){case"top":l.top=s.top-a;break;case"bottom":l.top=s.top+s.height;break;case"left":l.left=s.left-o;break;case"right":l.left=s.left+s.width}switch(n[1]){case"top":l.top=s.top;break;case"bottom":l.top=s.top+s.height-a;break;case"left":l.left=s.left;break;case"right":l.left=s.left+s.width-o;break;case"center":d.vertical.test(n[0])?l.left=s.left+s.width/2-o/2:l.top=s.top+s.height/2-a/2}return l.top=Math.round(l.top),l.left=Math.round(l.left),l.placement="center"===n[1]?n[0]:n[0]+"-"+n[1],l},adjustTop:function(e,t,n,r){if(-1!==e.indexOf("top")&&n!==r)return{top:t.top-r+"px"}},positionArrow:function(e,t){var n=(e=this.getRawNode(e)).querySelector(".tooltip-inner, .popover-inner");if(n){var r=angular.element(n).hasClass("tooltip-inner"),i=r?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(i){var o={top:"",bottom:"",left:"",right:""};if("center"!==(t=this.parsePlacement(t))[1]){var a="border-"+t[0]+"-width",s=c.getComputedStyle(i)[a],a="border-",n=(d.vertical.test(t[0])?a+=t[0]+"-"+t[1]:a+=t[1]+"-"+t[0],a+="-radius",c.getComputedStyle(r?n:e)[a]);switch(t[0]){case"top":o.bottom=r?"0":"-"+s;break;case"bottom":o.top=r?"0":"-"+s;break;case"left":o.right=r?"0":"-"+s;break;case"right":o.left=r?"0":"-"+s}o[t[1]]=n}angular.element(i).css(o)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(r,i,n,t,o,e,a,s,l,c,u,d,p,h,L,f){var m,g,v,y,b,S,_,E,C,w,T,A,P=!1,O=[];function I(e){var t=d.parse(e,m,r.date);if(isNaN(t))for(var n=0;n<A.length;n++)if(t=d.parse(e,A[n],r.date),!isNaN(t))return t;return t}function R(e){if(!(e=angular.isNumber(e)?new Date(e):e))return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=I(e);if(!isNaN(t))return d.toTimezone(t,w.getOption("timezone"))}return w.getOption("allowInvalid")?e:void 0}function M(e,t){e=e||t;return!n.ngRequired&&!e||!(e=angular.isNumber(e)?new Date(e):e)||!(!angular.isDate(e)||isNaN(e))||!!angular.isString(e)&&!isNaN(I(e))}function D(e){var t,n;!r.isOpen&&r.disabled||(n=T[0],t=i[0].contains(e.target),n=void 0!==n.contains&&n.contains(e.target),!r.isOpen)||t||n||r.$apply(function(){r.isOpen=!1})}function N(e){27===e.which&&r.isOpen?(e.preventDefault(),e.stopPropagation(),r.$apply(function(){r.isOpen=!1}),i[0].focus()):40!==e.which||r.isOpen||(e.preventDefault(),e.stopPropagation(),r.$apply(function(){r.isOpen=!0}))}function k(){var e,t;r.isOpen&&(e=angular.element(T[0].querySelector(".uib-datepicker-popup")),t=n.popupPlacement||p.placement,t=c.positionElements(i,e,t,v),e.css({top:t.top+"px",left:t.left+"px"}),e.hasClass("uib-position-measure"))&&e.removeClass("uib-position-measure")}this.init=function(e){if(w=(e=>{var t;return angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null}).getOption=function(e){return t[e]}:t=e.$options,t})(C=e),g=angular.isDefined(n.closeOnDateSelection)?r.$parent.$eval(n.closeOnDateSelection):p.closeOnDateSelection,v=angular.isDefined(n.datepickerAppendToBody)?r.$parent.$eval(n.datepickerAppendToBody):p.appendToBody,y=angular.isDefined(n.onOpenFocus)?r.$parent.$eval(n.onOpenFocus):p.onOpenFocus,_=(angular.isDefined(n.datepickerPopupTemplateUrl)?n:p).datepickerPopupTemplateUrl,b=(angular.isDefined(n.datepickerTemplateUrl)?n:p).datepickerTemplateUrl,A=angular.isDefined(n.altInputFormats)?r.$parent.$eval(n.altInputFormats):p.altInputFormats,r.showButtonBar=angular.isDefined(n.showButtonBar)?r.$parent.$eval(n.showButtonBar):p.showButtonBar,p.html5Types[n.type]?(m=p.html5Types[n.type],P=!0):(m=n.uibDatepickerPopup||p.datepickerPopup,n.$observe("uibDatepickerPopup",function(e,t){e=e||p.datepickerPopup;if(e!==m&&(m=e,C.$modelValue=null,!m))throw new Error("uibDatepickerPopup must have a date format specified.")})),!m)throw new Error("uibDatepickerPopup must have a date format specified.");if(P&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");(S=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>")).attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":_}),(_=angular.element(S.children()[0])).attr("template-url",b),r.datepickerOptions||(r.datepickerOptions={}),P&&"month"===n.type&&(r.datepickerOptions.datepickerMode="month",r.datepickerOptions.minMode="month"),_.attr("datepicker-options","datepickerOptions"),P?C.$formatters.push(function(e){return r.date=d.fromTimezone(e,w.getOption("timezone")),e}):(C.$$parserName="date",C.$validators.date=M,C.$parsers.unshift(R),C.$formatters.push(function(e){return C.$isEmpty(e)?r.date=e:(angular.isNumber(e)&&(e=new Date(e)),r.date=d.fromTimezone(e,w.getOption("timezone")),d.filter(r.date,m))})),C.$viewChangeListeners.push(function(){r.date=I(C.$viewValue)}),i.on("keydown",N),T=t(S)(r),S.remove(),v?s.find("body").append(T):i.after(T),r.$on("$destroy",function(){for(!0!==r.isOpen||l.$$phase||r.$apply(function(){r.isOpen=!1}),T.remove(),i.off("keydown",N),s.off("click",D),E&&E.off("scroll",k),angular.element(a).off("resize",k);O.length;)O.shift()()})},r.getText=function(e){return r[e+"Text"]||p[e+"Text"]},r.isDisabled=function(e){"today"===e&&(e=d.fromTimezone(new Date,w.getOption("timezone")));var t={};return angular.forEach(["minDate","maxDate"],function(e){r.datepickerOptions[e]?angular.isDate(r.datepickerOptions[e])?t[e]=new Date(r.datepickerOptions[e]):(f&&o.warn("Literal date support has been deprecated, please switch to date object usage"),t[e]=new Date(u(r.datepickerOptions[e],"medium"))):t[e]=null}),r.datepickerOptions&&t.minDate&&r.compare(e,t.minDate)<0||t.maxDate&&0<r.compare(e,t.maxDate)},r.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},r.dateSelection=function(e){r.date=e;e=r.date?d.filter(r.date,m):null;i.val(e),C.$setViewValue(e),g&&(r.isOpen=!1,i[0].focus())},r.keydown=function(e){27===e.which&&(e.stopPropagation(),r.isOpen=!1,i[0].focus())},r.select=function(e,t){t.stopPropagation(),"today"===e&&(t=new Date,angular.isDate(r.date)?(e=new Date(r.date)).setFullYear(t.getFullYear(),t.getMonth(),t.getDate()):(e=d.fromTimezone(t,w.getOption("timezone"))).setHours(0,0,0,0)),r.dateSelection(e)},r.close=function(e){e.stopPropagation(),r.isOpen=!1,i[0].focus()},r.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&O.push(r.$parent.$watch(e(n.ngDisabled),function(e){r.disabled=e})),r.$watch("isOpen",function(e){e?r.disabled?r.isOpen=!1:h(function(){k(),y&&r.$broadcast("uib:datepicker.focus"),s.on("click",D);var e=n.popupPlacement||p.placement;v||c.parsePlacement(e)[2]?(E=E||angular.element(c.scrollParent(i)))&&E.on("scroll",k):E=null,angular.element(a).on("resize",k)},0,!1):(s.off("click",D),E&&E.off("scroll",k),angular.element(a).off("resize",k))}),r.$on("uib:datepicker.mode",function(){h(k,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(o){return function(n,r){var i;return function(){var e=this,t=Array.prototype.slice.call(arguments);i&&o.cancel(i),i=o(function(){n.apply(e,t)},r)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var r={};return{entries:function(){return Object.keys(r).map(function(e){return{key:e,value:r[e]}})},get:function(e){return r[e]},hasKey:function(e){return!!r[e]},keys:function(){return Object.keys(r)},put:function(e,t){r[e]||(r[e]=[]),r[e].push(t)},remove:function(e,t){var n=r[e];n&&(-1!==(t=n.indexOf(t))&&n.splice(t,1),n.length||delete r[e])}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(i,n,e){var o=null,a=e.createNew(),s=(this.isOnlyOpen=function(n,e){e=a.get(e);if(e&&e.reduce(function(e,t){return t.scope===n?t:e},{}))return 1===e.length;return!1},this.open=function(e,t,n){var r;o||i.on("click",s),o&&o!==e&&(o.isOpen=!1),o=e,!n||(r=a.get(n))&&-1!==r.map(function(e){return e.scope}).indexOf(e)||a.put(n,{scope:e})},this.close=function(n,e,t){var r;o===n&&(i.off("click",s),i.off("keydown",this.keybindFilter),o=null),t&&(r=a.get(t))&&(r=r.reduce(function(e,t){return t.scope===n?t:e},{}))&&a.remove(t,r)},function(e){var t;o&&o.isOpen&&(e&&"disabled"===o.getAutoClose()||e&&3===e.which||(t=o.getToggleElement(),e&&t&&t[0].contains(e.target))||(t=o.getDropdownElement(),e&&"outsideClick"===o.getAutoClose()&&t&&t[0].contains(e.target))||(o.focusToggleElement(),o.isOpen=!1,n.$$phase)||o.$apply())});this.keybindFilter=function(e){var t,n;o&&(t=o.getDropdownElement(),n=o.getToggleElement(),t=t&&t[0].contains(e.target),n=n&&n[0].contains(e.target),27===e.which?(e.stopPropagation(),o.focusToggleElement(),s()):o.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&o.isOpen&&(t||n)&&(e.preventDefault(),e.stopPropagation(),o.focusDropdownEntry(e.which)))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(c,u,d,p,e,h,f,m,g,v,y){var b,t,S=this,_=c.$new(),E=e.appendToOpenClass,C=e.openClass,w=angular.noop,T=d.onToggle?p(d.onToggle):angular.noop,n=!1,A=g.find("body");function P(){u.append(S.dropdownMenu)}u.addClass("dropdown"),this.init=function(){d.isOpen&&(t=p(d.isOpen),w=t.assign,c.$watch(t,function(e){_.isOpen=!!e})),n=angular.isDefined(d.keyboardNav)},this.toggle=function(e){return _.isOpen=arguments.length?!!e:!_.isOpen,angular.isFunction(w)&&w(_,_.isOpen),_.isOpen},this.isOpen=function(){return _.isOpen},_.getToggleElement=function(){return S.toggleElement},_.getAutoClose=function(){return d.autoClose||"always"},_.getElement=function(){return u},_.isKeynavEnabled=function(){return n},_.focusDropdownEntry=function(e){var t=(S.dropdownMenu?angular.element(S.dropdownMenu):u.find("ul").eq(0)).find("a");switch(e){case 40:angular.isNumber(S.selectedOption)?S.selectedOption=S.selectedOption===t.length-1?S.selectedOption:S.selectedOption+1:S.selectedOption=0;break;case 38:angular.isNumber(S.selectedOption)?S.selectedOption=0===S.selectedOption?0:S.selectedOption-1:S.selectedOption=t.length-1}t[S.selectedOption].focus()},_.getDropdownElement=function(){return S.dropdownMenu},_.focusToggleElement=function(){S.toggleElement&&S.toggleElement[0].focus()},_.$watch("isOpen",function(e,t){var n,r,i=null,o=!1,a=(angular.isDefined(d.dropdownAppendTo)&&(a=p(d.dropdownAppendTo)(_))&&(i=angular.element(a)),(i=(o=angular.isDefined(d.dropdownAppendToBody)&&!1!==p(d.dropdownAppendToBody)(_)?!0:o)&&!i?A:i)&&S.dropdownMenu&&(e?(i.append(S.dropdownMenu),u.on("$destroy",P)):(u.off("$destroy",P),P())),i&&S.dropdownMenu&&(n={top:(l=m.positionElements(u,S.dropdownMenu,"bottom-left",!(a=0))).top+"px",display:e?"block":"none"},(s=S.dropdownMenu.hasClass("dropdown-menu-right"))?(n.left="auto",(r=m.scrollbarPadding(i)).heightOverflow&&r.scrollbarWidth&&(a=r.scrollbarWidth),n.right=window.innerWidth-a-(l.left+u.prop("offsetWidth"))+"px"):(n.left=l.left+"px",n.right="auto"),o||(r=m.offset(i),n.top=l.top-r.top+"px",s?n.right=window.innerWidth-(l.left-r.left+u.prop("offsetWidth"))+"px":n.left=l.left-r.left+"px"),S.dropdownMenu.css(n)),i||u),o=i?E:C,s=a.hasClass(o),l=h.isOnlyOpen(c,i);s===!e&&f[i?l?"removeClass":"addClass":e?"addClass":"removeClass"](a,o).then(function(){angular.isDefined(e)&&e!==t&&T(c,{open:!!e})}),e?(S.dropdownMenuTemplateUrl?y(S.dropdownMenuTemplateUrl).then(function(e){b=_.$new(),v(e.trim())(b,function(e){S.dropdownMenu.replaceWith(e),S.dropdownMenu=e,g.on("keydown",h.keybindFilter)})}):g.on("keydown",h.keybindFilter),_.focusToggleElement(),h.open(_,u,i)):(h.close(_,u,i),S.dropdownMenuTemplateUrl&&(b&&b.$destroy(),r=angular.element('<ul class="dropdown-menu"></ul>'),S.dropdownMenu.replaceWith(r),S.dropdownMenu=r),S.selectedOption=null),angular.isFunction(w)&&w(c,e)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){!r||angular.isDefined(n.dropdownNested)||(t.addClass("dropdown-menu"),(n=n.templateUrl)&&(r.dropdownMenuTemplateUrl=n),r.dropdownMenu)||(r.dropdownMenu=t)}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(t,n,r,i){var e;i&&(n.addClass("dropdown-toggle"),(i.toggleElement=n).on("click",e=function(e){e.preventDefault(),n.hasClass("disabled")||r.disabled||t.$apply(function(){i.toggle()})}),n.attr({"aria-haspopup":!0,"aria-expanded":!1}),t.$watch(i.isOpen,function(e){n.attr("aria-expanded",!!e)}),t.$on("$destroy",function(){n.off("click",e)}))}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var r=[];return{add:function(e,t){r.push({key:e,value:t})},get:function(e){for(var t=0;t<r.length;t++)if(e===r[t].key)return r[t]},keys:function(){for(var e=[],t=0;t<r.length;t++)e.push(r[t].key);return e},top:function(){return r[r.length-1]},remove:function(e){for(var t=-1,n=0;n<r.length;n++)if(e===r[n].key){t=n;break}return r.splice(t,1)[0]},removeTop:function(){return r.pop()},length:function(){return r.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(o,a){var s=e.resolver?o.get(e.resolver):null;return{resolve:function(e,t,n,r){var i;return s?s.resolve(e,t,n,r):(i=[],angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?i.push(a.resolve(o.invoke(e))):angular.isString(e)?i.push(a.resolve(o.get(e))):i.push(a.resolve(e))}),a.all(i).then(function(n){var r={},i=0;return angular.forEach(e,function(e,t){r[t]=n[i++]}),r}))}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(o,e,t){return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),n}};function n(n,r,i){i.modalInClass&&(o.addClass(r,i.modalInClass),n.$on(t.NOW_CLOSING_EVENT,function(e,t){t=t();n.modalOptions.animation?o.removeClass(r,i.modalInClass).then(t):t()}))}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(i,o,a,s){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(t,n,r){n.addClass(r.windowTopClass||""),t.size=r.size,t.close=function(e){var t=i.getTop();t&&t.value.backdrop&&"static"!==t.value.backdrop&&e.target===e.currentTarget&&(e.preventDefault(),e.stopPropagation(),i.dismiss(t.key,"backdrop click"))},n.on("click",t.close),t.$isRendered=!0;var e=o.defer();t.$$postDigest(function(){e.resolve()}),e.promise.then(function(){var e=null;r.modalInClass&&(e=a(n,{addClass:r.modalInClass}).start(),t.$on(i.NOW_CLOSING_EVENT,function(e,t){t=t();a(n,{removeClass:r.modalInClass}).start().then(t)})),o.when(e).then(function(){var e=i.getTop();e&&i.modalRendered(e.key),s[0].activeElement&&n[0].contains(s[0].activeElement)||(n[0].querySelector("[autofocus]")||n[0]).focus()})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(o){return{link:function(e,t,n,r,i){i(e.$parent,function(e){t.empty(),o.enter(e,t)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(s,e,a,l,c,u,t,n,d){var p,h,f,m="modal-open",g=n.createNew(),v=t.createNew(),y={NOW_CLOSING_EVENT:"modal.stack.now-closing"},b=0,S=null,_="data-bootstrap-modal-aria-hidden-count",E=/[A-Z]/g;function C(){for(var e=-1,t=g.keys(),n=0;n<t.length;n++)g.get(t[n]).value.backdrop&&(e=n);return e=-1<e&&e<b?b:e}function r(n,e){var r=g.get(n).value,i=r.appendTo;g.remove(n),(S=g.top())&&(b=parseInt(S.value.modalDomEl.attr("index"),10)),o(r.modalDomEl,r.modalScope,function(){var e=r.openedClass||m,t=(v.remove(e,n),v.hasKey(e));i.toggleClass(e,t),!t&&f&&f.heightOverflow&&f.scrollbarWidth&&(f.originalRight?i.css({paddingRight:f.originalRight+"px"}):i.css({paddingRight:""}),f=null),w(!0)},r.closedDeferred),p&&-1===C()&&(o(p,h,function(){0}),h=p=void 0),e&&e.focus?e.focus():i.focus&&i.focus()}function w(e){var t;0<g.length()&&(t=g.top().value).modalDomEl.toggleClass(t.windowTopClass||"",e)}function o(e,t,n,r){var i,o=null;function a(){a.done||(a.done=!0,s.leave(e).then(function(){n&&n(),e.remove(),r&&r.resolve()}),t.$destroy())}t.$broadcast(y.NOW_CLOSING_EVENT,function(){return i||(i=u.defer(),o=i.promise),function(){i.resolve()}}),u.when(o).then(a)}function i(e){if(e.isDefaultPrevented())return e;var t=g.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),c.$apply(function(){y.dismiss(t.key,"escape key press")}));break;case 9:var n=y.loadFocusElementList(t),r=!1;e.shiftKey?(y.isFocusInFirstItem(e,n)||y.isModalFocused(e,t))&&(r=y.focusLastFocusableElement(n)):y.isFocusInLastItem(e,n)&&(r=y.focusFirstFocusableElement(n)),r&&(e.preventDefault(),e.stopPropagation())}}function T(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function A(){Array.prototype.forEach.call(document.querySelectorAll("["+_+"]"),function(e){var t=parseInt(e.getAttribute(_),10)-1;e.setAttribute(_,t),t||(e.removeAttribute(_),e.removeAttribute("aria-hidden"))})}return c.$watch(C,function(e){h&&(h.index=e)}),a.on("keydown",i),c.$on("$destroy",function(){a.off("keydown",i)}),y.open=function(e,t){var n,r=a[0].activeElement,i=t.openedClass||m,e=(w(!1),S=g.top(),g.add(e,{deferred:t.deferred,renderDeferred:t.renderDeferred,closedDeferred:t.closedDeferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard,openedClass:t.openedClass,windowTopClass:t.windowTopClass,animation:t.animation,appendTo:t.appendTo}),v.put(i,e),t.appendTo),o=C(),o=(0<=o&&!p&&((h=c.$new(!0)).modalOptions=t,h.index=o,(p=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),t.backdropClass&&p.addClass(t.backdropClass),t.animation&&p.attr("modal-animation","true"),l(p)(h),s.enter(p,e),d.isScrollable(e))&&(f=d.scrollbarPadding(e)).heightOverflow&&f.scrollbarWidth&&e.css({paddingRight:f.right+"px"}),t.component?(n=document.createElement(t.component.name.replace(E,function(e,t){return(t?"-":"")+e.toLowerCase()})),(n=angular.element(n)).attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):n=t.content,b=S?parseInt(S.value.modalDomEl.attr("index"),10)+1:0,angular.element('<div uib-modal-window="modal-window"></div>'));o.attr({class:"modal","template-url":t.windowTemplateUrl,"window-top-class":t.windowTopClass,role:"dialog","aria-labelledby":t.ariaLabelledBy,"aria-describedby":t.ariaDescribedBy,size:t.size,index:b,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(n),t.windowClass&&o.addClass(t.windowClass),t.animation&&o.attr("modal-animation","true"),e.addClass(i),t.scope&&(t.scope.$$topModalIndex=b),s.enter(l(o)(t.scope),e),g.top().value.modalDomEl=o,g.top().value.modalOpener=r,function e(t){if(!t||"BODY"===t[0].tagName)return;n(t).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(_),10);n=n||(t?1:0),e.setAttribute(_,n+1),e.setAttribute("aria-hidden","true")});return e(t.parent());function n(t){var e=t.parent()?t.parent().children():[];return Array.prototype.filter.call(e,function(e){return e!==t[0]})}}(o)},y.close=function(e,t){var n=g.get(e);return A(),n&&T(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),r(e,n.value.modalOpener),!0):!n},y.dismiss=function(e,t){var n=g.get(e);return A(),n&&T(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),r(e,n.value.modalOpener),!0):!n},y.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},y.getTop=function(){return g.top()},y.modalRendered=function(e){e=g.get(e);e&&e.value.renderDeferred.resolve()},y.focusFirstFocusableElement=function(e){return 0<e.length&&(e[0].focus(),!0)},y.focusLastFocusableElement=function(e){return 0<e.length&&(e[e.length-1].focus(),!0)},y.isModalFocused=function(e,t){if(e&&t){t=t.value.modalDomEl;if(t&&t.length)return(e.target||e.srcElement)===t[0]}return!1},y.isFocusInFirstItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[0]},y.isFocusInLastItem=function(e,t){return 0<t.length&&(e.target||e.srcElement)===t[t.length-1]},y.loadFocusElementList=function(e){if(e){var e=e.value.modalDomEl;if(e&&e.length)return(e=e[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]"))&&Array.prototype.filter.call(e,function(e){return!!((e=e).offsetWidth||e.offsetHeight||e.getClientRects().length)})}},y}]).provider("$uibModal",function(){var y={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(f,i,o,a,m,s,g){var e={};var v=null;return e.getPromiseChain=function(){return v},e.open=function(l){var e,t,n,c=i.defer(),u=i.defer(),d=i.defer(),p=i.defer(),h={result:c.promise,opened:u.promise,closed:d.promise,rendered:p.promise,close:function(e){return g.close(h,e)},dismiss:function(e){return g.dismiss(h,e)}};if((l=angular.extend({},y.options,l)).resolve=l.resolve||{},l.appendTo=l.appendTo||o.find("body").eq(0),!l.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(l.component||l.template||l.templateUrl)return e=l.component?i.when(s.resolve(l.resolve,{},null,null)):i.all([(t=l).template?i.when(t.template):a(angular.isFunction(t.templateUrl)?t.templateUrl():t.templateUrl),s.resolve(l.resolve,{},null,null)]),n=v=i.all([v]).then(r,r).then(function(i){var e,t=l.scope||f,o=t.$new(),n=(o.$close=h.close,o.$dismiss=h.dismiss,o.$on("$destroy",function(){o.$$uibDestructionScheduled||o.$dismiss("$uibUnscheduledDestruction")}),{scope:o,deferred:c,renderDeferred:p,closedDeferred:d,animation:l.animation,backdrop:l.backdrop,keyboard:l.keyboard,backdropClass:l.backdropClass,windowTopClass:l.windowTopClass,windowClass:l.windowClass,windowTemplateUrl:l.windowTemplateUrl,ariaLabelledBy:l.ariaLabelledBy,ariaDescribedBy:l.ariaDescribedBy,size:l.size,openedClass:l.openedClass,appendTo:l.appendTo}),r={},a={};function s(n,e,t,r){n.$scope=o,n.$scope.$resolve={},t?n.$scope.$uibModalInstance=h:n.$uibModalInstance=h;t=e?i[1]:i;angular.forEach(t,function(e,t){r&&(n[t]=e),n.$scope.$resolve[t]=e})}l.component?(s(r,!1,!0,!1),r.name=l.component,n.component=r):l.controller&&(s(a,!0,!1,!0),r=m(l.controller,a,!0,l.controllerAs),l.controllerAs&&l.bindToController&&((e=r.instance).$close=o.$close,e.$dismiss=o.$dismiss,angular.extend(e,{$resolve:a.$scope.$resolve},t)),e=r(),angular.isFunction(e.$onInit))&&e.$onInit(),l.component||(n.content=i[0]),g.open(h,n),u.resolve(!0)},function(e){u.reject(e),c.reject(e)}).finally(function(){v===n&&(v=null)}),h;throw new Error("One of component or template or templateUrl options is required.");function r(){return e}},e}]};return y}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(n,r,i){n.setNumPages=i.numPages?e(i.numPages).assign:angular.noop,n.ngModelCtrl={$setViewValue:angular.noop},n._watchers=[],n.init=function(e,t){n.ngModelCtrl=e,n.config=t,e.$render=function(){n.render()},i.itemsPerPage?n._watchers.push(r.$parent.$watch(i.itemsPerPage,function(e){n.itemsPerPage=parseInt(e,10),r.totalPages=n.calculateTotalPages(),n.updatePage()})):n.itemsPerPage=t.itemsPerPage,r.$watch("totalItems",function(e,t){!angular.isDefined(e)&&e===t||(r.totalPages=n.calculateTotalPages(),n.updatePage())})},n.calculateTotalPages=function(){var e=n.itemsPerPage<1?1:Math.ceil(r.totalItems/n.itemsPerPage);return Math.max(e||0,1)},n.render=function(){r.page=parseInt(n.ngModelCtrl.$viewValue,10)||1},r.selectPage=function(e,t){t&&t.preventDefault(),(!r.ngDisabled||!t)&&r.page!==e&&0<e&&e<=r.totalPages&&(t&&t.target&&t.target.blur(),n.ngModelCtrl.$setViewValue(e),n.ngModelCtrl.$render())},r.getText=function(e){return r[e+"Text"]||n.config[e+"Text"]},r.noPrevious=function(){return 1===r.page},r.noNext=function(){return r.page===r.totalPages},n.updatePage=function(){n.setNumPages(r.$parent,r.totalPages),r.page>r.totalPages?r.selectPage(r.totalPages):n.ngModelCtrl.$render()},r.$on("$destroy",function(){for(;n._watchers.length;)n._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,r){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):r.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(i){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},link:function(e,t,n,r){t.addClass("pager");t=r[0],r=r[1];r&&t.init(r,i)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(t,n,e,r,i){var o=this,l=angular.isDefined(n.maxSize)?t.$parent.$eval(n.maxSize):i.maxSize,c=angular.isDefined(n.rotate)?t.$parent.$eval(n.rotate):i.rotate,u=angular.isDefined(n.forceEllipses)?t.$parent.$eval(n.forceEllipses):i.forceEllipses,d=angular.isDefined(n.boundaryLinkNumbers)?t.$parent.$eval(n.boundaryLinkNumbers):i.boundaryLinkNumbers,p=angular.isDefined(n.pageLabel)?function(e){return t.$parent.$eval(n.pageLabel,{$page:e})}:angular.identity;function h(e,t,n){return{number:e,text:t,active:n}}t.boundaryLinks=angular.isDefined(n.boundaryLinks)?t.$parent.$eval(n.boundaryLinks):i.boundaryLinks,t.directionLinks=angular.isDefined(n.directionLinks)?t.$parent.$eval(n.directionLinks):i.directionLinks,n.$set("role","menu"),r.create(this,t,n),n.maxSize&&o._watchers.push(t.$parent.$watch(e(n.maxSize),function(e){l=parseInt(e,10),o.render()}));var a=this.render;this.render=function(){a(),0<t.page&&t.page<=t.totalPages&&(t.pages=((e,t)=>{var n=[],r=1,i=t,o=angular.isDefined(l)&&l<t;o&&(c?t<(i=(r=Math.max(e-Math.floor(l/2),1))+l-1)&&(r=(i=t)-l+1):(r=(Math.ceil(e/l)-1)*l+1,i=Math.min(r+l-1,t)));for(var a=r;a<=i;a++){var s=h(a,p(a),a===e);n.push(s)}return o&&0<l&&(!c||u||d)&&(1<r&&((!d||3<r)&&n.unshift(h(r-1,"...",!1)),d)&&(3===r&&n.unshift(h(2,"2",!1)),n.unshift(h(1,"1",!1))),i<t)&&((!d||i<t-2)&&n.push(h(i+1,"...",!1)),d)&&(i===t-2&&n.push(h(t-1,t-1,!1)),n.push(h(t,t,!1))),n})(t.page,t.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,i){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},link:function(e,t,n,r){t.addClass("pagination");t=r[0],r=r[1];r&&t.init(r,i)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var s={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},l={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},c={};this.options=function(e){angular.extend(c,e)},this.setTriggers=function(e){angular.extend(l,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,o,V,j,H,a,t,Y,n){var z=n.createNew();function r(e){27===e.which&&(e=z.top())&&e.value.close()}return j.on("keyup",r),t.$on("$destroy",function(){j.off("keyup",r)}),function(U,F,n,B){function G(e){var e=(e||B.trigger||n).split(" "),t=e.map(function(e){return l[e]||e});return{show:e,hide:t}}B=angular.extend({},s,c,B);var e=U.replace(/[A-Z]/g,function(e,t){return(t?"-":"")+e.toLowerCase()}),t=a.startSymbol(),r=a.endSymbol(),i="<div "+e+'-popup uib-title="'+t+"title"+r+'" '+(B.useContentExp?'content-exp="contentExp()" ':'content="'+t+"content"+r+'" ')+'origin-scope="origScope" class="uib-position-measure '+F+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(e,t){var $=o(i);return function(n,i,r,x){var o,e,t,a,s,l,c,u,d=!!angular.isDefined(B.appendToBody)&&B.appendToBody,p=G(void 0),h=angular.isDefined(r[F+"Enable"]),f=n.$new(!0),m=!1,g=!!angular.isDefined(r[F+"IsOpen"])&&Y(r[F+"IsOpen"]),v=!!B.useContentExp&&Y(r[U]),y=[],b=function(){o&&o.html()&&(l=l||V(function(){var e=H.positionElements(i,o,f.placement,d),t=angular.isDefined(o.offsetHeight)?o.offsetHeight:o.prop("offsetHeight"),n=d?H.offset(i):H.position(i),r=(o.css({top:e.top+"px",left:e.left+"px"}),e.placement.split("-"));o.hasClass(r[0])||(o.removeClass(u.split("-")[0]),o.addClass(r[0])),o.hasClass(B.placementClassPrefix+e.placement)||(o.removeClass(B.placementClassPrefix+u),o.addClass(B.placementClassPrefix+e.placement)),c=V(function(){var e=angular.isDefined(o.offsetHeight)?o.offsetHeight:o.prop("offsetHeight"),e=H.adjustTop(r,n,t,e);e&&o.css(e),c=null},0,!1),o.hasClass("uib-position-measure")?(H.positionArrow(o,e.placement),o.removeClass("uib-position-measure")):u!==e.placement&&H.positionArrow(o,e.placement),u=e.placement,l=null},0,!1))};function S(){(f.isOpen?E:_)()}function _(){var e,t;h&&!n.$eval(r[F+"Enable"])||(A(),f.title=r[F+"Title"],f.content=v?v(n):r[U],f.popupClass=r[F+"Class"],f.placement=angular.isDefined(r[F+"Placement"])?r[F+"Placement"]:B.placement,e=H.parsePlacement(f.placement),u=e[1]?e[0]+"-"+e[1]:e[0],e=parseInt(r[F+"PopupDelay"],10),t=parseInt(r[F+"PopupCloseDelay"],10),f.popupDelay=isNaN(e)?B.popupDelay:e,f.popupCloseDelay=isNaN(t)?B.popupCloseDelay:t,f.popupDelay?a=a||V(C,f.popupDelay,!1):C())}function E(){w(),f.popupCloseDelay?s=s||V(T,f.popupCloseDelay,!1):T()}function C(){if(w(),A(),!f.content)return angular.noop;o||(e=f.$new(),o=$(e,function(e){d?j.find("body").append(e):i.after(e)}),z.add(f,{close:T}),y.length=0,v?(y.push(n.$watch(v,function(e){!(f.content=e)&&f.isOpen&&T()})),y.push(e.$watch(function(){m||(m=!0,e.$$postDigest(function(){m=!1,f&&f.isOpen&&b()}))}))):y.push(r.$observe(U,function(e){(!(f.content=e)&&f.isOpen?T:b)()})),y.push(r.$observe(F+"Title",function(e){f.title=e,f.isOpen&&b()})),y.push(r.$observe(F+"Placement",function(e){f.placement=e||B.placement,f.isOpen&&b()}))),f.$evalAsync(function(){O(f.isOpen=!0),b()})}function w(){a&&(V.cancel(a),a=null),l&&(V.cancel(l),l=null)}function T(){f&&f.$evalAsync(function(){f&&(O(f.isOpen=!1),f.animation?t=t||V(P,150,!1):P())})}function A(){s&&(V.cancel(s),s=null),t&&(V.cancel(t),t=null)}function P(){w(),A(),y.length&&(angular.forEach(y,function(e){e()}),y.length=0),o&&(o.remove(),o=null,c)&&V.cancel(c),z.remove(f),e&&(e.$destroy(),e=null)}function O(e){g&&angular.isFunction(g.assign)&&g.assign(n,e)}function I(e){f&&f.isOpen&&o&&(i[0].contains(e.target)||o[0].contains(e.target)||E())}function R(e){27===e.which&&E()}f.origScope=n,f.isOpen=!1,f.contentExp=function(){return f.content},r.$observe("disabled",function(e){e&&w(),e&&f.isOpen&&T()}),g&&n.$watch(g,function(e){f&&!e===f.isOpen&&S()});function M(){p.show.forEach(function(e){"outsideClick"===e?i.off("click",S):(i.off(e,_),i.off(e,S)),i.off("keypress",R)}),p.hide.forEach(function(e){"outsideClick"===e?j.off("click",I):i.off(e,E)})}var D,N,k;D=[],N=[],k=n.$eval(r[F+"Trigger"]),M(),"none"!==(p=angular.isObject(k)?(Object.keys(k).forEach(function(e){D.push(e),N.push(k[e])}),{show:D,hide:N}):G(k)).show&&p.show.forEach(function(e,t){"outsideClick"===e?(i.on("click",S),j.on("click",I)):e===p.hide[t]?i.on(e,S):e&&(i.on(e,_),i.on(p.hide[t],E)),i.on("keypress",R)});var L=n.$eval(r[F+"Animation"]),L=(f.animation=angular.isDefined(L)?!!L:B.animation,F+"AppendToBody"),L=L in r&&void 0===r[L]||n.$eval(r[L]),d=angular.isDefined(L)?L:d;n.$on("$destroy",function(){M(),P(),f=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(u,r,d,p){return{link:function(e,i,t){function o(){n&&(n.remove(),n=null),a&&(a.$destroy(),a=null),s&&(u.leave(s).then(function(){n=null}),n=s,s=null)}var a,n,s,l=e.$eval(t.tooltipTemplateTranscludeScope),c=0;e.$watch(r.parseAsResourceUrl(t.uibTooltipTemplateTransclude),function(n){var r=++c;n?(p(n,!0).then(function(e){var t;r===c&&(t=l.$new(),e=d(e)(t,function(e){o(),u.enter(e,i)}),s=e,(a=t).$emit("$includeContentLoaded",n))},function(){r===c&&(o(),e.$emit("$includeContentError",n))}),e.$emit("$includeContentRequested",n)):o()}),e.$on("$destroy",o)}}}]).directive("uibTooltipClasses",["$uibPosition",function(i){return{restrict:"A",link:function(e,t,n){var r;e.placement&&(r=i.parsePlacement(e.placement),t.addClass(r[0])),e.popupClass&&t.addClass(e.popupClass),e.animation&&t.addClass(n.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){var r=this,i=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;function o(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}this.bars=[],e.max=o(),this.addBar=function(t,e,n){i||e.css({transition:"none"}),this.bars.push(t),t.max=o(),t.title=n&&angular.isDefined(n.title)?n.title:"progressbar",t.$watch("value",function(e){t.recalculatePercentage()}),t.recalculatePercentage=function(){var e=r.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);100<e&&(t.percent-=e-100)},t.$on("$destroy",function(){e=null,r.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){r.bars.forEach(function(e){e.max=o(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(t,n,r){var i={$setViewValue:angular.noop},o=this;this.init=function(e){(i=e).$render=this.render,i.$formatters.push(function(e){return e=angular.isNumber(e)&&e<<0!==e?Math.round(e):e}),this.stateOn=angular.isDefined(n.stateOn)?t.$parent.$eval(n.stateOn):r.stateOn,this.stateOff=angular.isDefined(n.stateOff)?t.$parent.$eval(n.stateOff):r.stateOff,this.enableReset=angular.isDefined(n.enableReset)?t.$parent.$eval(n.enableReset):r.enableReset;e=angular.isDefined(n.titles)?t.$parent.$eval(n.titles):r.titles,this.titles=angular.isArray(e)&&0<e.length?e:r.titles,e=angular.isDefined(n.ratingStates)?t.$parent.$eval(n.ratingStates):new Array(angular.isDefined(n.max)?t.$parent.$eval(n.max):r.max);t.range=this.buildTemplateObjects(e)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},t.rate=function(e){!t.readonly&&0<=e&&e<=t.range.length&&(e=o.enableReset&&i.$viewValue===e?0:e,i.$setViewValue(e),i.$render())},t.enter=function(e){t.readonly||(t.value=e),t.onHover({value:e})},t.reset=function(){t.value=i.$viewValue,t.onLeave()},t.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),t.rate(t.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){t.value=i.$viewValue,t.title=o.getTitle(t.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(e,t,n,r){r[0].init(r[1])}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){var r,i,o=this;function a(e){for(var t=0;t<o.tabs.length;t++)if(o.tabs[t].index===e)return t}o.tabs=[],o.select=function(e,t){if(!i){var n=a(r),n=o.tabs[n];if(n){if(n.tab.onDeselect({$event:t,$selectedIndex:e}),t&&t.isDefaultPrevented())return;n.tab.active=!1}n=o.tabs[e];n?(n.tab.onSelect({$event:t}),n.tab.active=!0,o.active=n.index,r=n.index):!n&&angular.isDefined(r)&&(o.active=null,r=null)}},o.addTab=function(e){o.tabs.push({tab:e,index:e.index}),o.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index!==o.active&&(angular.isDefined(o.active)||1!==o.tabs.length)||(e=a(e.index),o.select(e))},o.removeTab=function(e){for(var t,n,r=0;r<o.tabs.length;r++)if(o.tabs[r].tab===e){t=r;break}o.tabs[t].index===o.active&&(n=t===o.tabs.length-1?t-1:t+1%o.tabs.length,o.select(n)),o.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==r&&o.select(a(e))}),e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("uibTab",["$parse",function(o){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(r,e,t,i,n){r.disabled=!1,t.disable&&r.$parent.$watch(o(t.disable),function(e){r.disabled=!!e}),angular.isUndefined(t.index)&&(i.tabs&&i.tabs.length?r.index=Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:r.index=0),angular.isUndefined(t.classes)&&(r.classes=""),r.select=function(e){if(!r.disabled){for(var t,n=0;n<i.tabs.length;n++)if(i.tabs[n].tab===r){t=n;break}i.select(t,e)}},i.addTab(r),r.$on("$destroy",function(){i.removeTab(r)}),r.$transcludeFn=n}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(e,n,t){var r=e.$eval(t.uibTabContentTransclude).tab;r.$transcludeFn(r.$parent,function(e){angular.forEach(e,function(e){var t;(t=e).tagName&&(t.hasAttribute("uib-tab-heading")||t.hasAttribute("data-uib-tab-heading")||t.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===t.tagName.toLowerCase()||"data-uib-tab-heading"===t.tagName.toLowerCase()||"x-uib-tab-heading"===t.tagName.toLowerCase()||"uib:tab-heading"===t.tagName.toLowerCase())?r.headingElement=e:n.append(e)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(i,e,r,t,n,o,a){var s,l,c,u,d,p=new Date,h=[],f={$setViewValue:angular.noop},m=angular.isDefined(r.meridians)?i.$parent.$eval(r.meridians):a.meridians||o.DATETIME_FORMATS.AMPMS,g=!angular.isDefined(r.padHours)||i.$parent.$eval(r.padHours),v=(i.tabindex=angular.isDefined(r.tabindex)?r.tabindex:0,e.removeAttr("tabindex"),this.init=function(e,t){(f=e).$render=this.render,f.$formatters.unshift(function(e){return e?new Date(e):null});var e=t.eq(0),n=t.eq(1),t=t.eq(2);s=e.controller("ngModel"),l=n.controller("ngModel"),c=t.controller("ngModel"),(angular.isDefined(r.mousewheel)?i.$parent.$eval(r.mousewheel):a.mousewheel)&&this.setupMousewheelEvents(e,n,t),(angular.isDefined(r.arrowkeys)?i.$parent.$eval(r.arrowkeys):a.arrowkeys)&&this.setupArrowkeyEvents(e,n,t),i.readonlyInput=angular.isDefined(r.readonlyInput)?i.$parent.$eval(r.readonlyInput):a.readonlyInput,this.setupInputEvents(e,n,t)},a.hourStep),y=(r.hourStep&&h.push(i.$parent.$watch(t(r.hourStep),function(e){v=+e})),a.minuteStep),b=(r.minuteStep&&h.push(i.$parent.$watch(t(r.minuteStep),function(e){y=+e})),h.push(i.$parent.$watch(t(r.min),function(e){e=new Date(e);u=isNaN(e)?void 0:e})),h.push(i.$parent.$watch(t(r.max),function(e){e=new Date(e);d=isNaN(e)?void 0:e})),!1),S=(r.ngDisabled&&h.push(i.$parent.$watch(t(r.ngDisabled),function(e){b=e})),i.noIncrementHours=function(){var e=O(p,60*v);return b||d<e||e<p&&e<u},i.noDecrementHours=function(){var e=O(p,60*-v);return b||e<u||p<e&&d<e},i.noIncrementMinutes=function(){var e=O(p,y);return b||d<e||e<p&&e<u},i.noDecrementMinutes=function(){var e=O(p,-y);return b||e<u||p<e&&d<e},i.noIncrementSeconds=function(){var e=I(p,S);return b||d<e||e<p&&e<u},i.noDecrementSeconds=function(){var e=I(p,-S);return b||e<u||p<e&&d<e},i.noToggleMeridian=function(){return p.getHours()<12?b||O(p,720)>d:b||O(p,-720)<u},a.secondStep);function _(){var e=+i.hours;if((i.showMeridian?0<e&&e<13:0<=e&&e<24)&&""!==i.hours)return i.showMeridian&&(12===e&&(e=0),i.meridian===m[1])&&(e+=12),e}function E(){var e=+i.minutes;if(0<=e&&e<60&&""!==i.minutes)return e}function C(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function w(e){T(),f.$setViewValue(new Date(p)),A(e)}function T(){s&&s.$setValidity("hours",!0),l&&l.$setValidity("minutes",!0),c&&c.$setValidity("seconds",!0),f.$setValidity("time",!0),i.invalidHours=!1,i.invalidMinutes=!1,i.invalidSeconds=!1}function A(e){var t,n,r;f.$modelValue?(t=p.getHours(),n=p.getMinutes(),r=p.getSeconds(),i.showMeridian&&(t=0===t||12===t?12:t%12),i.hours="h"===e?t:C(t,!g),"m"!==e&&(i.minutes=C(n)),i.meridian=p.getHours()<12?m[0]:m[1],"s"!==e&&(i.seconds=C(r)),i.meridian=p.getHours()<12?m[0]:m[1]):(i.hours=null,i.minutes=null,i.seconds=null,i.meridian=m[0])}function P(e){p=I(p,e),w()}function O(e,t){return I(e,60*t)}function I(e,t){t=new Date(e.getTime()+1e3*t),e=new Date(e);return e.setHours(t.getHours(),t.getMinutes(),t.getSeconds()),e}function R(){return(null===i.hours||""===i.hours)&&!(null!==i.minutes&&""!==i.minutes||i.showSeconds&&(i.showSeconds,null!==i.seconds)&&""!==i.seconds)}r.secondStep&&h.push(i.$parent.$watch(t(r.secondStep),function(e){S=+e})),i.showSeconds=a.showSeconds,r.showSeconds&&h.push(i.$parent.$watch(t(r.showSeconds),function(e){i.showSeconds=!!e})),i.showMeridian=a.showMeridian,r.showMeridian&&h.push(i.$parent.$watch(t(r.showMeridian),function(e){var t;i.showMeridian=!!e,f.$error.time?(e=_(),t=E(),angular.isDefined(e)&&angular.isDefined(t)&&(p.setHours(e),w())):A()})),this.setupMousewheelEvents=function(e,t,n){function r(e){var t=(e=e.originalEvent?e.originalEvent:e).wheelDelta||-e.deltaY;return e.detail||0<t}e.on("mousewheel wheel",function(e){b||i.$apply(r(e)?i.incrementHours():i.decrementHours()),e.preventDefault()}),t.on("mousewheel wheel",function(e){b||i.$apply(r(e)?i.incrementMinutes():i.decrementMinutes()),e.preventDefault()}),n.on("mousewheel wheel",function(e){b||i.$apply(r(e)?i.incrementSeconds():i.decrementSeconds()),e.preventDefault()})},this.setupArrowkeyEvents=function(e,t,n){e.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),i.incrementHours(),i.$apply()):40===e.which&&(e.preventDefault(),i.decrementHours(),i.$apply()))}),t.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),i.incrementMinutes(),i.$apply()):40===e.which&&(e.preventDefault(),i.decrementMinutes(),i.$apply()))}),n.on("keydown",function(e){b||(38===e.which?(e.preventDefault(),i.incrementSeconds(),i.$apply()):40===e.which&&(e.preventDefault(),i.decrementSeconds(),i.$apply()))})},this.setupInputEvents=function(e,t,n){var r;i.readonlyInput?(i.updateHours=angular.noop,i.updateMinutes=angular.noop,i.updateSeconds=angular.noop):(r=function(e,t,n){f.$setViewValue(null),f.$setValidity("time",!1),angular.isDefined(e)&&(i.invalidHours=e,s)&&s.$setValidity("hours",!1),angular.isDefined(t)&&(i.invalidMinutes=t,l)&&l.$setValidity("minutes",!1),angular.isDefined(n)&&(i.invalidSeconds=n,c)&&c.$setValidity("seconds",!1)},i.updateHours=function(){var e=_(),t=E();f.$setDirty(),!angular.isDefined(e)||!angular.isDefined(t)||(p.setHours(e),p.setMinutes(t),p<u)||d<p?r(!0):w("h")},e.on("blur",function(e){f.$setTouched(),R()?T():null===i.hours||""===i.hours?r(!0):!i.invalidHours&&i.hours<10&&i.$apply(function(){i.hours=C(i.hours,!g)})}),i.updateMinutes=function(){var e=E(),t=_();f.$setDirty(),!angular.isDefined(e)||!angular.isDefined(t)||(p.setHours(t),p.setMinutes(e),p<u)||d<p?r(void 0,!0):w("m")},t.on("blur",function(e){f.$setTouched(),R()?T():null===i.minutes?r(void 0,!0):!i.invalidMinutes&&i.minutes<10&&i.$apply(function(){i.minutes=C(i.minutes)})}),i.updateSeconds=function(){var e=0<=(e=+i.seconds)&&e<60?e:void 0;f.$setDirty(),angular.isDefined(e)?(p.setSeconds(e),w("s")):r(void 0,void 0,!0)},n.on("blur",function(e){R()?T():!i.invalidSeconds&&i.seconds<10&&i.$apply(function(){i.seconds=C(i.seconds)})}))},this.render=function(){var e=f.$viewValue;isNaN(e)?(f.$setValidity("time",!1),n.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):((p=e?e:p)<u||d<p?(f.$setValidity("time",!1),i.invalidHours=!0,i.invalidMinutes=!0):T(),A())},i.showSpinners=angular.isDefined(r.showSpinners)?i.$parent.$eval(r.showSpinners):a.showSpinners,i.incrementHours=function(){i.noIncrementHours()||P(60*v*60)},i.decrementHours=function(){i.noDecrementHours()||P(60*-v*60)},i.incrementMinutes=function(){i.noIncrementMinutes()||P(60*y)},i.decrementMinutes=function(){i.noDecrementMinutes()||P(60*-y)},i.incrementSeconds=function(){i.noIncrementSeconds()||P(S)},i.decrementSeconds=function(){i.noDecrementSeconds()||P(-S)},i.toggleMeridian=function(){var e=E(),t=_();i.noToggleMeridian()||(angular.isDefined(e)&&angular.isDefined(t)?P(720*(p.getHours()<12?60:-60)):i.meridian=i.meridian===m[0]?m[1]:m[0])},i.blur=function(){f.$setTouched()},i.$on("$destroy",function(){for(;h.length;)h.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(n){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(e,t){return t.templateUrl||n.templateUrl},link:function(e,t,n,r){var i=r[0],r=r[1];r&&i.init(r,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(n){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(e){var t=e.match(r);if(t)return{itemName:t[3],source:n(t[4]),viewMapper:n(t[2]||t[1]),modelMapper:n(t[1])};throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+e+'".')}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(s,l,a,x,t,$,c,e,n,U,u,r,i){var d,p,h,f,o,m,g,F=[9,13,27,38,40],v=s.$eval(a.typeaheadMinLength),y=(v||0===v||(v=1),s.$watch(a.typeaheadMinLength,function(e){v=e||0===e?e:1}),s.$eval(a.typeaheadWaitMs)||0),b=!1!==s.$eval(a.typeaheadEditable),S=(s.$watch(a.typeaheadEditable,function(e){b=!1!==e}),t(a.typeaheadLoading).assign||angular.noop),B=a.typeaheadShouldSelect?t(a.typeaheadShouldSelect):function(e,t){t=t.$event;return 13===t.which||9===t.which},G=t(a.typeaheadOnSelect),V=!!angular.isDefined(a.typeaheadSelectOnBlur)&&s.$eval(a.typeaheadSelectOnBlur),_=t(a.typeaheadNoResults).assign||angular.noop,E=a.typeaheadInputFormatter?t(a.typeaheadInputFormatter):void 0,C=!!a.typeaheadAppendToBody&&s.$eval(a.typeaheadAppendToBody),w=a.typeaheadAppendTo?s.$eval(a.typeaheadAppendTo):null,j=!1!==s.$eval(a.typeaheadFocusFirst),H=!!a.typeaheadSelectOnExact&&s.$eval(a.typeaheadSelectOnExact),Y=t(a.typeaheadIsOpen).assign||angular.noop,T=s.$eval(a.typeaheadShowHint)||!1,A=t(a.ngModel),z=t(a.ngModel+"($$$p)"),P=i.parse(a.uibTypeahead),O=s.$new(),i=s.$on("$destroy",function(){O.$destroy()}),I=(O.$on("$destroy",i),"typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random())),R=(l.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":I}),T&&((o=angular.element("<div></div>")).css("position","relative"),l.after(o),(m=l.clone()).attr("placeholder",""),m.attr("tabindex","-1"),m.val(""),m.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),l.css({position:"relative","vertical-align":"top","background-color":"transparent"}),m.attr("id")&&m.removeAttr("id"),o.append(m),m.after(l)),angular.element("<div uib-typeahead-popup></div>")),W=(R.attr({id:I,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(a.typeaheadTemplateUrl)&&R.attr("template-url",a.typeaheadTemplateUrl),angular.isDefined(a.typeaheadPopupTemplateUrl)&&R.attr("popup-template-url",a.typeaheadPopupTemplateUrl),function(){T&&m.val("")}),M=function(){O.matches=[],O.activeIdx=-1,l.attr("aria-expanded",!1),W()},D=function(e){return I+"-option-"+e},q=(O.$watch("activeIdx",function(e){e<0?l.removeAttr("aria-activedescendant"):l.attr("aria-activedescendant",D(e))}),function(e,t){return!!(O.matches.length>t&&e)&&e.toUpperCase()===O.matches[t].label.toUpperCase()}),N=function(i,o){var a={$viewValue:i};S(s,!0),_(s,!1),$.when(P.source(s,a)).then(function(e){var t=i===d.$viewValue;if(t&&h)if(e&&0<e.length){O.activeIdx=j?0:-1,_(s,!1);for(var n,r=O.matches.length=0;r<e.length;r++)a[P.itemName]=e[r],O.matches.push({id:D(r),label:P.viewMapper(O,a),model:e[r]});O.query=i,Q(),l.attr("aria-expanded",!0),H&&1===O.matches.length&&q(i,0)&&(angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?u(function(){O.select(0,o)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate.default):O.select(0,o)),T&&(n=O.matches[0].label,angular.isString(i)&&0<i.length&&n.slice(0,i.length).toUpperCase()===i.toUpperCase()?m.val(i+n.slice(i.length)):m.val(""))}else M(),_(s,!0);t&&S(s,!1)},function(){M(),S(s,!1),_(s,!0)})},K=(C&&(angular.element(n).on("resize",k),e.find("body").on("scroll",k)),u(function(){O.matches.length&&Q(),O.moveInProgress=!1},200));function k(){O.moveInProgress||(O.moveInProgress=!0,O.$digest()),K()}function Q(){O.position=C?r.offset(l):r.position(l),O.position.top+=l.prop("offsetHeight")}O.moveInProgress=!1,O.query=void 0;function X(){g&&c.cancel(g)}function Z(e){l[0]!==e.target&&3!==e.which&&0!==O.matches.length&&(M(),U.$$phase||s.$digest())}M(),O.assignIsOpen=function(e){Y(s,e)},O.select=function(e,t){var n,r,i,o={};f=!0,o[P.itemName]=e=O.matches[e].model,n=P.modelMapper(s,o),r=s,i=n,angular.isFunction(A(s))&&p.getOption("getterSetter")?z(r,{$$$p:i}):A.assign(r,i),d.$setValidity("editable",!0),d.$setValidity("parse",!0),G(s,{$item:e,$model:n,$label:P.viewMapper(s,o),$event:t}),M(),!1!==O.$eval(a.typeaheadFocusOnSelect)&&c(function(){l[0].focus()},0,!1)},l.on("keydown",function(e){if(0!==O.matches.length&&-1!==F.indexOf(e.which)){var t,n=B(s,{$event:e});if(-1===O.activeIdx&&n||9===e.which&&e.shiftKey)M(),O.$digest();else switch(e.preventDefault(),e.which){case 27:e.stopPropagation(),M(),s.$digest();break;case 38:O.activeIdx=(0<O.activeIdx?O.activeIdx:O.matches.length)-1,O.$digest(),(t=R[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx]).parentNode.scrollTop=t.offsetTop;break;case 40:O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest(),(t=R[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx]).parentNode.scrollTop=t.offsetTop;break;default:n&&O.$apply(function(){angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?u(function(){O.select(O.activeIdx,e)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate.default):O.select(O.activeIdx,e)})}}}),l.on("focus",function(e){h=!0,0!==v||d.$viewValue||c(function(){N(d.$viewValue,e)},0)}),l.on("blur",function(e){V&&O.matches.length&&-1!==O.activeIdx&&!f&&(f=!0,O.$apply(function(){angular.isObject(O.debounceUpdate)&&angular.isNumber(O.debounceUpdate.blur)?u(function(){O.select(O.activeIdx,e)},O.debounceUpdate.blur):O.select(O.activeIdx,e)})),!b&&d.$error.editable&&(d.$setViewValue(),O.$apply(function(){d.$setValidity("editable",!0),d.$setValidity("parse",!0)}),l.val("")),f=h=!1});e.on("click",Z),s.$on("$destroy",function(){e.off("click",Z),(C||w)&&L.remove(),C&&(angular.element(n).off("resize",k),e.find("body").off("scroll",k)),R.remove(),T&&o.remove()});var L=x(R)(O);C?e.find("body").append(L):w?angular.element(w).eq(0).append(L):l.after(L),this.init=function(e){p=(e=>{var t;return angular.version.minor<6?(t=e.$options||{}).getOption=function(e){return t[e]}:t=e.$options,t})(d=e),O.debounceUpdate=t(p.getOption("debounce"))(s),d.$parsers.unshift(function(e){var t;return h=!0,0===v||e&&e.length>=v?0<y?(X(),t=e,g=c(function(){N(t)},y)):N(e):(S(s,!1),X(),M()),b?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),null)}),d.$formatters.push(function(e){var t,n={};return b||d.$setValidity("editable",!0),E?(n.$model=e,E(s,n)):(n[P.itemName]=e,t=P.viewMapper(s,n),n[P.itemName]=void 0,t!==P.viewMapper(s,n)?t:e)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,n,r){r[1].init(r[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(i){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(r,e,t){r.templateUrl=t.templateUrl,r.isOpen=function(){var e=0<r.matches.length;return r.assignIsOpen({isOpen:e}),e},r.isActive=function(e){return r.active===e},r.selectActive=function(e){r.active=e},r.selectMatch=function(e,t){var n=r.debounce();angular.isNumber(n)||angular.isObject(n)?i(function(){r.select({activeIdx:e,evt:t})},angular.isNumber(n)?n:n.default):r.select({activeIdx:e,evt:t})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(r,i,o){return{scope:{index:"=",match:"=",query:"="},link:function(t,n,e){e=o(e.templateUrl)(t.$parent)||"uib/template/typeahead/typeahead-match.html";r(e).then(function(e){e=angular.element(e.trim());n.replaceWith(e),i(e)(t)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(n,e,r){var i;return i=e.has("$sanitize"),function(e,t){return!i&&/<.*>/g.test(e)&&r.warn("Unsafe use of typeahead please use ngSanitize"),e=t?(""+e).replace(new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"gi"),"<strong>$&</strong>"):e,e=i?e:n.trustAsHtml(e)}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){angular.$$csp().noInlineStyle||angular.$$uibCarouselCss||angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){angular.$$csp().noInlineStyle||angular.$$uibDatepickerCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){angular.$$csp().noInlineStyle||angular.$$uibPositionCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){angular.$$csp().noInlineStyle||angular.$$uibDatepickerpopupCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTooltipCss||angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTimepickerCss||angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){angular.$$csp().noInlineStyle||angular.$$uibTypeaheadCss||angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),(l=>{var x=l.$$minErr("$resource"),s=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;function $(e,t){if(null==(n=t)||""===n||"hasOwnProperty"===n||!s.test("."+n))throw x("badmember",'Dotted member path "@{0}" is invalid.',t);for(var n,r=t.split("."),i=0,o=r.length;i<o&&l.isDefined(e);i++){var a=r[i];e=null!==e?e[a]:void 0}return e}function U(e,n){for(var t in n=n||{},l.forEach(n,function(e,t){delete n[t]}),e)!e.hasOwnProperty(t)||"$"===t.charAt(0)&&"$"===t.charAt(1)||(n[t]=e[t])}l.module("ngResource",["ng"]).provider("$resource",function(){var d=/^https?:\/\/[^/]*/,s=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(P,e,O,I){var R=l.noop,M=l.forEach,D=l.extend,N=l.copy,k=l.isArray,c=l.isDefined,L=l.isFunction,o=l.isNumber;function u(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,t?"%20":"+")}function a(e,t){this.template=e,this.defaults=D({},s.defaults,t),this.urlParams={}}return a.prototype={setUrlParams:function(n,r,e){var i,o,a=this,s=e||a.template,t="",l=a.urlParams={};M(s.split(/\W/),function(e){if("hasOwnProperty"===e)throw x("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(e)&&e&&new RegExp("(^|[^\\\\]):"+e+"(\\W|$)").test(s)&&(l[e]={isQueryParamValue:new RegExp("\\?.*=:"+e+"(?:\\W|$)").test(s)})}),s=(s=s.replace(/\\:/g,":")).replace(d,function(e){return t=e,""}),r=r||{},M(a.urlParams,function(e,t){i=(r.hasOwnProperty(t)?r:a.defaults)[t],s=c(i)&&null!==i?(o=e.isQueryParamValue?u(i,!0):u(i,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),s.replace(new RegExp(":"+t+"(\\W|$)","g"),function(e,t){return o+t})):s.replace(new RegExp("(/?):"+t+"(\\W|$)","g"),function(e,t,n){return"/"===n.charAt(0)?n:t+n})}),s=(s=a.defaults.stripTrailingSlashes?s.replace(/\/+$/,"")||"/":s).replace(/\/\.(?=\w+($|\?))/,"."),n.url=t+s.replace(/\/\\\./,"/."),M(r,function(e,t){a.urlParams[t]||(n.params=n.params||{},n.params[t]=e)})}},function t(n,C,r,i){var w=new a(n,i);function T(e){return e.resource}function A(e){U(e||{},this)}return r=D({},s.defaults.actions,r),A.prototype.toJSON=function(){var e=D({},this);return delete e.$promise,delete e.$resolved,delete e.$cancelRequest,e},M(r,function(y,b){var S=/^(POST|PUT|PATCH)$/i.test(y.method),_=y.timeout,E=(c(y.cancellable)?y:w.defaults).cancellable;_&&!o(_)&&(e.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete y.timeout,_=null),A[b]=function(e,t,n,r){var i,o,a,s={};switch(arguments.length){case 4:a=r,o=n;case 3:case 2:if(!L(t)){s=e,i=t,o=n;break}if(L(e)){o=e,a=t;break}o=t,a=n;case 1:L(e)?o=e:S?i=e:s=e;break;case 0:break;default:throw x("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var l,c,u,d,p=this instanceof A,h=p?i:y.isArray?[]:new A(i),f={},m=y.interceptor&&y.interceptor.response||T,g=y.interceptor&&y.interceptor.responseError||void 0,v=(M(y,function(e,t){switch(t){default:f[t]=N(e);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!p&&E&&(l=O.defer(),f.timeout=l.promise,_)&&(c=I(l.resolve,_)),S&&(f.data=i),w.setUrlParams(f,D({},(u=i,v=y.params||{},d={},v=D({},C,v),M(v,function(e,t){L(e)&&(e=e(u)),d[t]=e&&e.charAt&&"@"===e.charAt(0)?$(u,e.substr(1)):e}),d),s),y.url),P(f).then(function(e){var t,n=e.data;if(n){if(k(n)!==!!y.isArray)throw x("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",b,y.isArray?"array":"object",k(n)?"array":"object",f.method,f.url);y.isArray?(h.length=0,M(n,function(e){"object"==typeof e?h.push(new A(e)):h.push(e)})):(t=h.$promise,U(n,h),h.$promise=t)}return e.resource=h,e},function(e){return(a||R)(e),O.reject(e)}));return v.finally(function(){h.$resolved=!0,!p&&E&&(h.$cancelRequest=R,I.cancel(c),l=c=f.timeout=null)}),v=v.then(function(e){var t=m(e);return(o||R)(t,e.headers,e.status,e.statusText),t},g),p?v:(h.$promise=v,h.$resolved=!1,E&&(h.$cancelRequest=l.resolve),h)},A.prototype["$"+b]=function(e,t,n){return L(e)&&(n=t,t=e,e={}),(e=A[b].call(this,e,this,t,n)).$promise||e}}),A.bind=function(e){return e=D({},C,e),t(n,e,r,i)},A}}]})})((window,window.angular)),(v=>{var o,a,e=v.module("ngRoute",["ng"]).provider("$route",function(){function m(e,t){return v.extend(Object.create(e),t)}o=v.isArray,a=v.isObject;var g={};function r(e,t){var t=t.caseInsensitiveMatch,n={originalPath:e,regexp:e},o=n.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(e,t,n,r){var i="?"===r||"*?"===r?"?":null,r="*"===r||"*?"===r?"*":null;return o.push({name:n,optional:!!i}),t=t||"",(i?"":t)+"(?:"+(i?t:"")+(r?"(.+?)":"([^/]+)")+(i||"")+")"+(i||"")}).replace(/([/$*])/g,"\\$1"),n.regexp=new RegExp("^"+e+"$",t?"i":""),n}this.when=function(e,t){var n,t=((e,t)=>{if(o(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(a(e))for(var i in t=t||{},e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i]);return t||e})(t);return v.isUndefined(t.reloadOnSearch)&&(t.reloadOnSearch=!0),v.isUndefined(t.caseInsensitiveMatch)&&(t.caseInsensitiveMatch=this.caseInsensitiveMatch),g[e]=v.extend(t,e&&r(e,t)),e&&(n="/"===e[e.length-1]?e.substr(0,e.length-1):e+"/",g[n]=v.extend({redirectTo:e},r(n,t))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return this.when(null,e="string"==typeof e?{redirectTo:e}:e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(i,o,r,a,s,l,c){var u,d,p=!1,h={routes:g,reload:function(){var e={defaultPrevented:!(p=!0),preventDefault:function(){this.defaultPrevented=!0,p=!1}};i.$evalAsync(function(){t(e),e.defaultPrevented||n()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw y("norout","Tried updating route when with no current route");e=v.extend({},this.current.params,e),o.path(f(this.current.$$route.originalPath,e)),o.search(e)}};return i.$on("$locationChangeStart",t),i.$on("$locationChangeSuccess",n),h;function t(e){var n,r,t=h.current;v.forEach(g,function(e,t){!r&&(n=((e,t)=>{var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var o=1,a=i.length;o<a;++o){var s=n[o-1],l=i[o];s&&l&&(r[s.name]=l)}return r})(o.path(),e))&&((r=m(e,{params:v.extend({},o.search(),n),pathParams:n})).$$route=e)}),u=r||g.null&&m(g.null,{params:{},pathParams:{}}),(d=u&&t&&u.$$route===t.$$route&&v.equals(u.pathParams,t.pathParams)&&!u.reloadOnSearch&&!p)||!t&&!u||i.$broadcast("$routeChangeStart",u,t).defaultPrevented&&e&&e.preventDefault()}function n(){var t=h.current,n=u;d?(t.params=n.params,v.copy(t.params,r),i.$broadcast("$routeUpdate",t)):(n||t)&&(p=!1,(h.current=n)&&n.redirectTo&&(v.isString(n.redirectTo)?o.path(f(n.redirectTo,n.params)).search(n.params):o.url(n.redirectTo(n.pathParams,o.path(),o.search()))).replace(),a.when(n).then(e).then(function(e){n===h.current&&(n&&(n.locals=e,v.copy(n.params,r)),i.$broadcast("$routeChangeSuccess",n,t))},function(e){n===h.current&&i.$broadcast("$routeChangeError",n,t,e)}))}function e(e){var n;if(e)return n=v.extend({},e.resolve),v.forEach(n,function(e,t){n[t]=v.isString(e)?s.get(e):s.invoke(e,null,null,t)}),e=(e=>{var t,n;return v.isDefined(t=e.template)?v.isFunction(t)&&(t=t(e.params)):v.isDefined(n=e.templateUrl)&&(v.isFunction(n)&&(n=n(e.params)),v.isDefined(n))&&(e.loadedTemplateUrl=c.valueOf(n),t=l(n)),t})(e),v.isDefined(e)&&(n.$template=e),a.all(n)}function f(e,n){var r=[];return v.forEach((e||"").split(":"),function(e,t){0===t?r.push(e):(e=(t=e.match(/(\w+)(?:[?*])?(.*)/))[1],r.push(n[e]),r.push(t[2]||""),delete n[e])}),r.join("")}}]}),y=v.$$minErr("ngRoute");function t(p,h,f){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(r,i,e,t,o){var a,s,n,l=e.autoscroll,c=e.onload||"";function u(){n&&(f.cancel(n),n=null),a&&(a.$destroy(),a=null),s&&((n=f.leave(s)).done(function(e){!1!==e&&(n=null)}),s=null)}function d(){var e,t,n=p.current&&p.current.locals,n=n&&n.$template;v.isDefined(n)?(n=r.$new(),e=p.current,t=o(n,function(e){f.enter(e,null,s||i).done(function(e){!1===e||!v.isDefined(l)||l&&!r.$eval(l)||h()}),u()}),s=t,(a=e.scope=n).$emit("$viewContentLoaded"),a.$eval(c)):u()}r.$on("$routeChangeSuccess",d),d()}}}function n(a,s,l){return{restrict:"ECA",priority:-400,link:function(e,t){var n,r=l.current,i=r.locals,o=(t.html(i.$template),a(t.contents()));r.controller&&(i.$scope=e,n=s(r.controller,i),r.controllerAs&&(e[r.controllerAs]=n),t.data("$ngControllerController",n),t.children().data("$ngControllerController",n)),e[r.resolveAs||"$resolve"]=i,o(e)}}}e.provider("$routeParams",function(){this.$get=function(){return{}}}),e.directive("ngView",t),e.directive("ngView",n),t.$inject=["$route","$anchorScroll","$animate"],n.$inject=["$compile","$controller","$route"]})((window,window.angular)),((m,E)=>{var g,v,y,b,S,C,_,w,T=E.$$minErr("$sanitize");E.module("ngSanitize",[]).provider("$sanitize",function(){var o,t=!1,n=(this.$get=["$$sanitizeUri",function(n){return t&&v(u,l),function(e){var t=[];return _(e,w(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(e){return b(e)?(t=e,this):t},g=E.bind,v=E.extend,y=E.forEach,b=E.isDefined,S=E.lowercase,C=E.noop,_=function(e,t){null==e?e="":"string"!=typeof e&&(e=""+e);o.innerHTML=e;var n=5;do{if(0===n)throw T("uinput","Failed to sanitize html because the input is unstable");n--,m.document.documentMode&&!function e(t){for(;t;){if(t.nodeType===m.Node.ELEMENT_NODE)for(var n=t.attributes,r=0,i=n.length;r<i;r++){var o=n[r],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),r--,i--)}var s=t.firstChild;s&&e(s),t=t.nextSibling}}(o),e=o.innerHTML,o.innerHTML=e}while(e!==o.innerHTML);var r,i=o.firstChild;for(;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),(e=>{for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t})(i.attributes));break;case 3:t.chars(i.textContent)}if(!((r=i.firstChild)||(1===i.nodeType&&t.end(i.nodeName.toLowerCase()),r=i.nextSibling)))for(;null==r&&(i=i.parentNode)!==o;)r=i.nextSibling,1===i.nodeType&&t.end(i.nodeName.toLowerCase());i=r}for(;i=o.firstChild;)o.removeChild(i)},w=function(e,o){var t=!1,a=g(e,e.push);return{start:function(i,e){i=S(i),(t=!t&&c[i]?i:t)||!0!==u[i]||(a("<"),a(i),y(e,function(e,t){var n=S(t),r="img"===i&&"src"===n||"background"===n;!0!==p[n]||!0===d[n]&&!o(e,r)||(a(" "),a(t),a('="'),a(f(e)),a('"'))}),a(">"))},end:function(e){e=S(e),t||!0!==u[e]||!0===i[e]||(a("</"),a(e),a(">")),e==t&&(t=!1)},chars:function(e){t||a(f(e))}}},/[\uD800-\uDBFF][\uDC00-\uDFFF]/g),r=/([^#-~ |!])/g,i=h("area,br,col,hr,img,wbr"),e=h("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),a=h("rp,rt"),s=v({},a,e),e=v({},e,h("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),a=v({},a,h("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),l=h("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),c=h("script,style"),u=v({},i,e,a,s),d=h("background,cite,href,longdesc,src,xlink:href"),e=h("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),a=h("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),p=v({},d,a,e);function h(e,t){for(var n={},r=e.split(","),i=0;i<r.length;i++)n[t?S(r[i]):r[i]]=!0;return n}if(!(s=m).document||!s.document.implementation)throw T("noinert","Can't create an inert html document");function f(e){return e.replace(/&/g,"&amp;").replace(n,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(r,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}1===(a=((s=s.document.implementation.createHTMLDocument("inert")).documentElement||s.getDocumentElement()).getElementsByTagName("body")).length?o=a[0]:(a=s.createElement("html"),o=s.createElement("body"),a.appendChild(o),s.appendChild(a))}),E.module("ngSanitize").filter("linky",["$sanitize",function(f){var m=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,g=/^mailto:/i,v=E.$$minErr("linky"),y=E.isDefined,b=E.isFunction,S=E.isObject,_=E.isString;return function(e,t,n){if(null==e||""===e)return e;if(!_(e))throw v("notstring","Expected string but received: {0}",e);for(var r,i,o,a=b(n)?n:S(n)?function(){return n}:function(){return{}},s=e,l=[];r=s.match(m);){i=r[0],r[2]||r[4]||(i=(r[3]?"http://":"mailto:")+i),h(s.substr(0,o=r.index)),p=c=d=u=void 0;var c,u=i,d=r[0].replace(g,""),p=a(u);for(c in l.push("<a "),p)l.push(c+'="'+p[c]+'" ');!y(t)||"target"in p||l.push('target="',t,'" '),l.push('href="',u.replace(/"/g,"&quot;"),'">'),h(d),l.push("</a>"),s=s.substring(o+r[0].length)}return h(s),f(l.join(""));function h(e){var t;e&&l.push((e=e,w(t=[],C).chars(e),t.join("")))}}}])})(window,window.angular),((e,t)=>{"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(e.angular)})(this,function(s){var e=s.module("rzModule",[]).factory("RzSliderOptions",function(){var t={floor:0,ceil:null,step:1,precision:0,id:null,translate:null,stepsArray:null,draggableRange:!1,draggableRangeOnly:!1,showSelectionBar:!1,hideLimitLabels:!1,readOnly:!1,disabled:!1,interval:350,showTicks:!1,showTicksValues:!1,ticksValuesTooltip:null,vertical:!1,selectionBarColor:null,keyboardSupport:!0,scale:1,onStart:null,onChange:null,onEnd:null},n={},e={options:function(e){s.extend(n,e)},getOptions:function(e){return s.extend({},t,n,e)}};return e}).value("rzThrottle",function(n,r,i){function o(){d=!1===i.leading?0:c(),u=null,l=n.apply(a,s),a=s=null}var a,s,l,c=Date.now||function(){return(new Date).getTime()},u=null,d=0;i=i||{};return function(){var e=c(),t=(d||!1!==i.leading||(d=e),r-(e-d));return a=this,s=arguments,t<=0?(clearTimeout(u),u=null,d=e,l=n.apply(a,s),a=s=null):u||!1===i.trailing||(u=setTimeout(o,t)),l}}).factory("RzSlider",["$timeout","$document","$window","$compile","RzSliderOptions","rzThrottle",function(t,i,o,e,n,a){function r(e,t){this.scope=e,this.sliderElem=t,this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.dragging={active:!1,value:0,difference:0,offset:0,lowDist:0,highDist:0},this.positionProperty="left",this.dimensionProperty="width",this.handleHalfDim=0,this.maxPos=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.valueRange=0,this.initHasRun=!1,this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.ticks=null,this.init()}return r.prototype={init:function(){var n,r,e=s.bind(this,this.calcViewDimensions),i=this;this.applyOptions(),this.initElemHandles(),this.manageElementsStyle(),this.addAccessibility(),this.setDisabledState(),this.calcViewDimensions(),this.setMinAndMax(),t(function(){i.updateCeilLab(),i.updateFloorLab(),i.initHandles(),i.manageEventsBindings()}),this.scope.$on("reCalcViewDimensions",e),s.element(o).on("resize",e),this.initHasRun=!0,n=a(function(){i.setMinAndMax(),i.updateLowHandle(i.valueToOffset(i.scope.rzSliderModel)),i.updateSelectionBar(),i.updateTicksScale(),i.updateAriaAttributes(),i.range&&i.updateCmbLabel()},i.options.interval),r=a(function(){i.setMinAndMax(),i.updateHighHandle(i.valueToOffset(i.scope.rzSliderHigh)),i.updateSelectionBar(),i.updateTicksScale(),i.updateCmbLabel(),i.updateAriaAttributes()},i.options.interval),this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue(),n(),i.range&&r(),i.resetSlider()}),this.scope.$watch("rzSliderModel",function(e,t){e!==t&&n()}),this.scope.$watch("rzSliderHigh",function(e,t){e!==t&&(null!=e&&r(),i.range&&null==e||!i.range&&null!=e)&&(i.applyOptions(),i.resetSlider())}),this.scope.$watch("rzSliderOptions",function(e,t){e!==t&&(i.applyOptions(),i.resetSlider())},!0),this.scope.$on("$destroy",function(){i.unbindEvents(),s.element(o).off("resize",e)})},applyOptions:function(){this.options=n.getOptions(this.scope.rzSliderOptions),this.options.step<=0&&(this.options.step=1),this.range=void 0!==this.scope.rzSliderModel&&void 0!==this.scope.rzSliderHigh,this.options.draggableRange=this.range&&this.options.draggableRange,this.options.draggableRangeOnly=this.range&&this.options.draggableRangeOnly,this.options.draggableRangeOnly&&(this.options.draggableRange=!0),this.options.showTicks=this.options.showTicks||this.options.showTicksValues,this.scope.showTicks=this.options.showTicks,this.options.stepsArray?(this.options.floor=0,this.options.ceil=this.options.stepsArray.length-1,this.options.step=1,this.customTrFn=function(e){return this.options.stepsArray[e]}):this.options.translate?this.customTrFn=this.options.translate:this.customTrFn=function(e){return String(e)},this.options.vertical&&(this.positionProperty="bottom",this.dimensionProperty="height")},resetSlider:function(){this.manageElementsStyle(),this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.unbindEvents(),this.manageEventsBindings(),this.setDisabledState(),this.calcViewDimensions()},initElemHandles:function(){s.forEach(this.sliderElem.children(),function(e,t){var n=s.element(e);switch(t){case 0:this.fullBar=n;break;case 1:this.selBar=n,this.selBarChild=this.selBar.children("rz-selection");break;case 2:this.minH=n;break;case 3:this.maxH=n;break;case 4:this.flrLab=n;break;case 5:this.ceilLab=n;break;case 6:this.minLab=n;break;case 7:this.maxLab=n;break;case 8:this.cmbLab=n;break;case 9:this.ticks=n}},this),this.selBar.rzsp=0,this.minH.rzsp=0,this.maxH.rzsp=0,this.flrLab.rzsp=0,this.ceilLab.rzsp=0,this.minLab.rzsp=0,this.maxLab.rzsp=0,this.cmbLab.rzsp=0},manageElementsStyle:function(){this.range?this.maxH.css("display",null):this.maxH.css("display","none"),this.alwaysHide(this.flrLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.ceilLab,this.options.showTicksValues||this.options.hideLimitLabels),this.alwaysHide(this.minLab,this.options.showTicksValues),this.alwaysHide(this.maxLab,this.options.showTicksValues||!this.range),this.alwaysHide(this.cmbLab,this.options.showTicksValues||!this.range),this.alwaysHide(this.selBar,!this.range&&!this.options.showSelectionBar),this.options.vertical&&this.sliderElem.addClass("vertical"),this.options.draggableRange?this.selBar.addClass("rz-draggable"):this.selBar.removeClass("rz-draggable")},alwaysHide:function(e,t){(e.rzAlwaysHide=t)?this.hideEl(e):this.showEl(e)},manageEventsBindings:function(){this.options.disabled||this.options.readOnly?this.unbindEvents():this.options.disabled&&this.options.readOnly||this.bindEvents()},setDisabledState:function(){this.options.disabled?this.sliderElem.attr("disabled","disabled"):this.sliderElem.attr("disabled",null)},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateSelectionBar(),this.range&&this.updateCmbLabel(),this.updateTicksScale()},translateFn:function(e,t,n){n=void 0===n||n;n=String(n?this.customTrFn(e,this.options.id):e),e=!1;(void 0===t.rzsv||t.rzsv.length!==n.length||0<t.rzsv.length&&0===t.rzsd)&&(e=!0,t.rzsv=n),t.text(n),e&&this.getDimension(t)},setMinAndMax:function(){this.step=+this.options.step,this.precision=+this.options.precision,this.scope.rzSliderModel=this.roundStep(this.scope.rzSliderModel),this.range&&(this.scope.rzSliderHigh=this.roundStep(this.scope.rzSliderHigh)),this.minValue=this.roundStep(+this.options.floor),null!=this.options.ceil?this.maxValue=this.roundStep(+this.options.ceil):this.maxValue=this.options.ceil=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.valueRange=this.maxValue-this.minValue},addAccessibility:function(){this.minH.attr("role","slider"),this.updateAriaAttributes(),this.options.keyboardSupport&&this.minH.attr("tabindex","0"),this.options.vertical&&this.minH.attr("aria-orientation","vertical"),this.range&&(this.maxH.attr("role","slider"),this.options.keyboardSupport&&this.maxH.attr("tabindex","0"),this.options.vertical)&&this.maxH.attr("aria-orientation","vertical")},updateAriaAttributes:function(){this.minH.attr({"aria-valuenow":this.scope.rzSliderModel,"aria-valuetext":this.customTrFn(this.scope.rzSliderModel),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue}),this.range&&this.maxH.attr({"aria-valuenow":this.scope.rzSliderHigh,"aria-valuetext":this.customTrFn(this.scope.rzSliderHigh),"aria-valuemin":this.minValue,"aria-valuemax":this.maxValue})},calcViewDimensions:function(){var e=this.getDimension(this.minH);this.handleHalfDim=e/2,this.barDimension=this.getDimension(this.fullBar),this.maxPos=this.barDimension-e,this.getDimension(this.sliderElem),this.sliderElem.rzsp=this.sliderElem[0].getBoundingClientRect()[this.positionProperty],this.initHasRun&&(this.updateFloorLab(),this.updateCeilLab(),this.initHandles())},updateTicksScale:function(){if(this.options.showTicks&&this.step){var e=Math.round((this.maxValue-this.minValue)/this.step)+1;this.scope.ticks=[];for(var t=0;t<e;t++){var n=this.roundStep(this.minValue+t*this.step),r={selected:this.isTickSelected(n)};r.selected&&this.options.getSelectionBarColor&&(r.style={"background-color":this.getSelectionBarColor()}),this.options.showTicksValues&&(r.value=this.getDisplayValue(n),this.options.ticksValuesTooltip)&&(r.tooltip=this.options.ticksValuesTooltip(n),r.tooltipPlacement=this.options.vertical?"right":"top"),this.scope.ticks.push(r)}}},isTickSelected:function(e){return!!(!this.range&&this.options.showSelectionBar&&e<=this.scope.rzSliderModel)||!!(this.range&&e>=this.scope.rzSliderModel&&e<=this.scope.rzSliderHigh)},updateCeilLab:function(){this.translateFn(this.maxValue,this.ceilLab),this.setPosition(this.ceilLab,this.barDimension-this.ceilLab.rzsd),this.getDimension(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.minValue,this.flrLab),this.getDimension(this.flrLab)},callOnStart:function(){var e;this.options.onStart&&(e=this,t(function(){e.options.onStart(e.options.id)}))},callOnChange:function(){var e;this.options.onChange&&(e=this,t(function(){e.options.onChange(e.options.id)}))},callOnEnd:function(){var e;this.options.onEnd&&(e=this,t(function(){e.options.onEnd(e.options.id)}))},updateHandles:function(e,t){"rzSliderModel"===e?(this.updateLowHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()):"rzSliderHigh"===e?(this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCmbLabel()):(this.updateLowHandle(t),this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.updateCmbLabel())},updateLowHandle:function(e){this.setPosition(this.minH,e),this.translateFn(this.scope.rzSliderModel,this.minLab);e=Math.min(Math.max(e-this.minLab.rzsd/2+this.handleHalfDim,0),this.barDimension-this.ceilLab.rzsd);this.setPosition(this.minLab,e),this.shFloorCeil()},updateHighHandle:function(e){this.setPosition(this.maxH,e),this.translateFn(this.scope.rzSliderHigh,this.maxLab);e=Math.min(e-this.maxLab.rzsd/2+this.handleHalfDim,this.barDimension-this.ceilLab.rzsd);this.setPosition(this.maxLab,e),this.shFloorCeil()},shFloorCeil:function(){var e=!1,t=!1;this.minLab.rzsp<=this.flrLab.rzsp+this.flrLab.rzsd+5?(e=!0,this.hideEl(this.flrLab)):(e=!1,this.showEl(this.flrLab)),this.minLab.rzsp+this.minLab.rzsd>=this.ceilLab.rzsp-this.handleHalfDim-10?(t=!0,this.hideEl(this.ceilLab)):(t=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsp+this.maxLab.rzsd>=this.ceilLab.rzsp-10?this.hideEl(this.ceilLab):t||this.showEl(this.ceilLab),this.maxLab.rzsp<=this.flrLab.rzsp+this.flrLab.rzsd+this.handleHalfDim?this.hideEl(this.flrLab):e||this.showEl(this.flrLab))},updateSelectionBar:function(){var e;this.setDimension(this.selBar,Math.abs(this.maxH.rzsp-this.minH.rzsp)+this.handleHalfDim),this.setPosition(this.selBar,this.range?this.minH.rzsp+this.handleHalfDim:0),this.options.getSelectionBarColor&&(e=this.getSelectionBarColor(),this.scope.barStyle={backgroundColor:e})},getSelectionBarColor:function(){return this.range?this.options.getSelectionBarColor(this.scope.rzSliderModel,this.scope.rzSliderHigh):this.options.getSelectionBarColor(this.scope.rzSliderModel)},updateCmbLabel:function(){var e,t;this.minLab.rzsp+this.minLab.rzsd+10>=this.maxLab.rzsp?(t=this.getDisplayValue(this.scope.rzSliderModel),e=this.getDisplayValue(this.scope.rzSliderHigh),this.translateFn(t+" - "+e,this.cmbLab,!1),t=Math.min(Math.max(this.selBar.rzsp+this.selBar.rzsd/2-this.cmbLab.rzsd/2,0),this.barDimension-this.cmbLab.rzsd),this.setPosition(this.cmbLab,t),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},getDisplayValue:function(e){return this.customTrFn(e,this.options.id)},roundStep:function(e){return+(Math.round(e/this.step)*this.step).toFixed(this.precision)},hideEl:function(e){return e.css({opacity:0})},showEl:function(e){return e.rzAlwaysHide?e:e.css({opacity:1})},setPosition:function(e,t){e.rzsp=t;var n={};return n[this.positionProperty]=t+"px",e.css(n),t},getDimension:function(e){var t=e[0].getBoundingClientRect();return this.options.vertical?e.rzsd=(t.bottom-t.top)*this.options.scale:e.rzsd=(t.right-t.left)*this.options.scale,e.rzsd},setDimension:function(e,t){e.rzsd=t;var n={};return n[this.dimensionProperty]=t+"px",e.css(n),t},valueToOffset:function(e){return(this.sanitizeValue(e)-this.minValue)*this.maxPos/this.valueRange||0},sanitizeValue:function(e){return Math.min(Math.max(e,this.minValue),this.maxValue)},offsetToValue:function(e){return e/this.maxPos*this.valueRange+this.minValue},getEventXY:function(e){var t=this.options.vertical?"clientY":"clientX";return(t in e?e:(void 0===e.originalEvent?e:e.originalEvent).touches[0])[t]},getEventPosition:function(e){var t=this.sliderElem.rzsp;return((this.options.vertical?-this.getEventXY(e)+t:this.getEventXY(e)-t)-this.handleHalfDim)*this.options.scale},getNearestHandle:function(e){return!this.range||(e=this.getEventPosition(e),Math.abs(e-this.minH.rzsp)<Math.abs(e-this.maxH.rzsp))?this.minH:this.maxH},focusElement:function(e){e[0].focus()},bindEvents:function(){var e,t,n;this.options.readOnly||this.options.disabled||(n=this.options.draggableRange?(e="rzSliderDrag",t=this.onDragStart,this.onDragMove):(e="rzSliderModel",t=this.onStart,this.onMove),this.selBar.on("mousedown",s.bind(this,t,null,e)),this.selBar.on("mousedown",s.bind(this,n,this.selBar)),this.options.draggableRangeOnly?(this.minH.on("mousedown",s.bind(this,t,null,e)),this.range&&this.maxH.on("mousedown",s.bind(this,t,null,e))):(this.minH.on("mousedown",s.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",s.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("mousedown",s.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",s.bind(this,this.onMove,this.fullBar)),this.ticks.on("mousedown",s.bind(this,this.onStart,null,null)),this.ticks.on("mousedown",s.bind(this,this.onMove,this.ticks))),this.selBar.on("touchstart",s.bind(this,t,null,e)),this.selBar.on("touchstart",s.bind(this,n,this.selBar)),this.options.draggableRangeOnly?(this.minH.on("touchstart",s.bind(this,t,null,e)),this.range&&this.maxH.on("touchstart",s.bind(this,t,null,e))):(this.minH.on("touchstart",s.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",s.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("touchstart",s.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",s.bind(this,this.onMove,this.fullBar)),this.ticks.on("touchstart",s.bind(this,this.onStart,null,null)),this.ticks.on("touchstart",s.bind(this,this.onMove,this.ticks))),this.options.keyboardSupport&&(this.minH.on("focus",s.bind(this,this.onPointerFocus,this.minH,"rzSliderModel")),this.range)&&this.maxH.on("focus",s.bind(this,this.onPointerFocus,this.maxH,"rzSliderHigh")))},unbindEvents:function(){this.minH.off(),this.maxH.off(),this.fullBar.off(),this.selBar.off(),this.ticks.off()},onStart:function(e,t,n){var r=this.getEventNames(n);n.stopPropagation(),n.preventDefault(),this.calcViewDimensions(),e?this.tracking=t:(e=this.getNearestHandle(n),this.tracking=e===this.minH?"rzSliderModel":"rzSliderHigh"),e.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(e),t=s.bind(this,this.dragging.active?this.onDragMove:this.onMove,e),n=s.bind(this,this.onEnd,t),i.on(r.moveEvent,t),i.one(r.endEvent,n),this.callOnStart()},onMove:function(e,t){var n,t=this.getEventPosition(t);if(t<=0){if(0===e.rzsp)return;n=this.minValue,t=0}else if(t>=this.maxPos){if(e.rzsp===this.maxPos)return;n=this.maxValue,t=this.maxPos}else n=this.offsetToValue(t),n=this.roundStep(n),t=this.valueToOffset(n);this.positionTrackingHandle(n,t)},onEnd:function(e,t){t=this.getEventNames(t).moveEvent;this.options.keyboardSupport||(this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),this.tracking=""),this.dragging.active=!1,i.off(t,e),this.scope.$emit("slideEnded"),this.callOnEnd()},onPointerFocus:function(e,t){this.tracking=t,e.one("blur",s.bind(this,this.onPointerBlur,e)),e.on("keydown",s.bind(this,this.onKeyboardEvent)),e.addClass("rz-active")},onPointerBlur:function(e){e.off("keydown"),this.tracking="",e.removeClass("rz-active")},onKeyboardEvent:function(e){var t=this.scope[this.tracking],n=e.keyCode||e.which,t={UP:t+this.step,DOWN:t-this.step,LEFT:t-this.step,RIGHT:t+this.step,PAGEUP:t+this.valueRange/10,PAGEDOWN:t-this.valueRange/10,HOME:this.minValue,END:this.maxValue}[{38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"}[n]];if(null!=t&&""!==this.tracking){e.preventDefault();n=this.roundStep(this.sanitizeValue(t)),e=this.valueToOffset(n);if(this.options.draggableRangeOnly){var r,i,o,a,t=this.scope.rzSliderHigh-this.scope.rzSliderModel;if("rzSliderModel"===this.tracking){if(r=e,(a=(o=n)+t)>this.maxValue)return;i=this.valueToOffset(a)}else{if(i=e,(o=(a=n)-t)<this.minValue)return;r=this.valueToOffset(o)}this.positionTrackingBar(o,a,r,i)}else this.positionTrackingHandle(n,e)}},onDragStart:function(e,t,n){var r=this.getEventPosition(n);this.dragging={active:!0,value:this.offsetToValue(r),difference:this.scope.rzSliderHigh-this.scope.rzSliderModel,offset:r,lowDist:r-this.minH.rzsp,highDist:this.maxH.rzsp-r},this.onStart(e,t,n)},onDragMove:function(e,t){var n,r,i,o,t=this.getEventPosition(t);if(t<=this.dragging.lowDist){if(e.rzsp===this.dragging.lowDist)return;i=this.minValue,n=0,o=this.minValue+this.dragging.difference,r=this.valueToOffset(o)}else if(t>=this.maxPos-this.dragging.highDist){if(e.rzsp===this.dragging.highDist)return;o=this.maxValue,r=this.maxPos,i=this.maxValue-this.dragging.difference,n=this.valueToOffset(i)}else i=this.offsetToValue(t-this.dragging.lowDist),i=this.roundStep(i),n=this.valueToOffset(i),o=i+this.dragging.difference,r=this.valueToOffset(o);this.positionTrackingBar(i,o,n,r)},positionTrackingBar:function(e,t,n,r){this.scope.rzSliderModel=e,this.scope.rzSliderHigh=t,this.updateHandles("rzSliderModel",n),this.updateHandles("rzSliderHigh",r),this.scope.$apply(),this.callOnChange()},positionTrackingHandle:function(e,t){var n=!1,r=!1;return this.range&&("rzSliderModel"===this.tracking&&e>=this.scope.rzSliderHigh?(r=!0,this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsp),this.updateAriaAttributes(),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.maxH),n=!0):"rzSliderHigh"===this.tracking&&e<=this.scope.rzSliderModel&&(r=!0,this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsp),this.updateAriaAttributes(),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.options.keyboardSupport&&this.focusElement(this.minH),n=!0)),this.scope[this.tracking]!==e&&(this.scope[this.tracking]=e,this.updateHandles(this.tracking,t),this.updateAriaAttributes(),n=!0),n&&(this.scope.$apply(),this.callOnChange()),r},getEventNames:function(e){var t={moveEvent:"",endEvent:""};return e.touches||void 0!==e.originalEvent&&e.originalEvent.touches?(t.moveEvent="touchmove",t.endEvent="touchend"):(t.moveEvent="mousemove",t.endEvent="mouseup"),t}},r}]).directive("rzslider",["RzSlider",function(n){return{restrict:"E",scope:{rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderOptions:"=?",rzSliderTplUrl:"@"},templateUrl:function(e,t){return t.rzSliderTplUrl||"rzSliderTpl.html"},link:function(e,t){return new n(e,t)}}}]);return e.run(["$templateCache",function(e){e.put("rzSliderTpl.html",'<span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection" ng-style=barStyle></span></span> <span class=rz-pointer></span> <span class=rz-pointer></span> <span class="rz-bubble rz-limit"></span> <span class="rz-bubble rz-limit"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span><ul ng-show=showTicks class=rz-ticks><li ng-repeat="t in ticks track by $index" class=tick ng-class="{selected: t.selected}" ng-style=t.style><span ng-if="t.value != null && t.tooltip == null" class=tick-value>{{ t.value }}</span> <span ng-if="t.value != null && t.tooltip != null" class=tick-value uib-tooltip="{{ t.tooltip }}" tooltip-placement={{t.tooltipPlacement}}>{{ t.value }}</span></li></ul>')}]),e}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");(()=>{var e=jQuery.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||3<e[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")})(),(r=>{r.fn.emulateTransitionEnd=function(e){var t=!1,n=this;r(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||r(n).trigger(r.support.transition.end)},e),this},r(function(){r.support.transition=(()=>{var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return{end:n[e]};return!1})(),r.support.transition&&(r.event.special.bsTransitionEnd={bindType:r.support.transition.end,delegateType:r.support.transition.end,handle:function(e){if(r(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})})(jQuery),(o=>{function a(e){o(e).on("click",t,this.close)}var t='[data-dismiss="alert"]',e=(a.VERSION="3.4.1",a.TRANSITION_DURATION=150,a.prototype.close=function(e){var t=o(this),n=t.attr("data-target"),r=(n="#"===(n=n||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]*$)/,""))?[]:n,o(document).find(n));function i(){r.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),(r=r.length?r:t.closest(".alert")).trigger(e=o.Event("close.bs.alert")),e.isDefaultPrevented()||(r.removeClass("in"),o.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(a.TRANSITION_DURATION):i())},o.fn.alert);o.fn.alert=function(n){return this.each(function(){var e=o(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new a(this)),"string"==typeof n&&t[n].call(e)})},o.fn.alert.Constructor=a,o.fn.alert.noConflict=function(){return o.fn.alert=e,this},o(document).on("click.bs.alert.data-api",t,a.prototype.close)})(jQuery),(o=>{function r(e,t){this.$element=o(e),this.options=o.extend({},r.DEFAULTS,t),this.isLoading=!1}function n(n){return this.each(function(){var e=o(this),t=e.data("bs.button");t||e.data("bs.button",t=new r(this,"object"==typeof n&&n)),"toggle"==n?t.toggle():n&&t.setState(n)})}r.VERSION="3.4.1",r.DEFAULTS={loadingText:"loading..."},r.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.is("input")?"val":"html",i=n.data();e+="Text",null==i.resetText&&n.data("resetText",n[r]()),setTimeout(o.proxy(function(){n[r]((null==i[e]?this.options:i)[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(t).attr(t,t).prop(t,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(t).removeAttr(t).prop(t,!1))},this),0)},r.prototype.toggle=function(){var e,t=!0,n=this.$element.closest('[data-toggle="buttons"]');n.length?("radio"==(e=this.$element.find("input")).prop("type")?(e.prop("checked")&&(t=!1),n.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==e.prop("type")&&(e.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),e.prop("checked",this.$element.hasClass("active")),t&&e.trigger("change")):(this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active"))};var e=o.fn.button;o.fn.button=n,o.fn.button.Constructor=r,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=o(e.target).closest(".btn");n.call(t,"toggle"),o(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),(t.is("input,button")?t:t.find("input:visible,button:visible").first()).trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){o(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})})(jQuery),(c=>{function u(e,t){this.$element=c(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",c.proxy(this.keydown,this)),"hover"!=this.options.pause||"ontouchstart"in document.documentElement||this.$element.on("mouseenter.bs.carousel",c.proxy(this.pause,this)).on("mouseleave.bs.carousel",c.proxy(this.cycle,this))}function i(i){return this.each(function(){var e=c(this),t=e.data("bs.carousel"),n=c.extend({},u.DEFAULTS,e.data(),"object"==typeof i&&i),r="string"==typeof i?i:n.slide;t||e.data("bs.carousel",t=new u(this,n)),"number"==typeof i?t.to(i):r?t[r]():n.interval&&t.pause().cycle()})}function e(e){var t,n=c(this),r=(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),r=n.attr("data-target")||r;(r=c(document).find(r)).hasClass("carousel")&&(t=c.extend({},r.data(),n.data()),(n=n.attr("data-slide-to"))&&(t.interval=!1),i.call(r,t),n&&r.data("bs.carousel").to(n),e.preventDefault())}u.VERSION="3.4.1",u.TRANSITION_DURATION=600,u.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},u.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},u.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},u.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},u.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);return("prev"==e&&0===n||"next"==e&&n==this.$items.length-1)&&!this.options.wrap?t:(t=(n+("prev"==e?-1:1))%this.$items.length,this.$items.eq(t))},u.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(n<e?"next":"prev",this.$items.eq(e))},u.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition&&(this.$element.trigger(c.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},u.prototype.next=function(){if(!this.sliding)return this.slide("next")},u.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},u.prototype.slide=function(e,t){var n,r,i,o=this.$element.find(".item.active"),a=t||this.getItemForDirection(e,o),t=this.interval,s="next"==e?"left":"right",l=this;return a.hasClass("active")?this.sliding=!1:(n=a[0],r=c.Event("slide.bs.carousel",{relatedTarget:n,direction:s}),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(this.sliding=!0,t&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),r=c(this.$indicators.children()[this.getItemIndex(a)]))&&r.addClass("active"),i=c.Event("slid.bs.carousel",{relatedTarget:n,direction:s}),c.support.transition&&this.$element.hasClass("slide")?(a.addClass(e),"object"==typeof a&&a.length&&a[0].offsetWidth,o.addClass(s),a.addClass(s),o.one("bsTransitionEnd",function(){a.removeClass([e,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(i)},0)}).emulateTransitionEnd(u.TRANSITION_DURATION)):(o.removeClass("active"),a.addClass("active"),this.sliding=!1,this.$element.trigger(i)),t&&this.cycle(),this))};var t=c.fn.carousel;c.fn.carousel=i,c.fn.carousel.Constructor=u,c.fn.carousel.noConflict=function(){return c.fn.carousel=t,this},c(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),c(window).on("load",function(){c('[data-ride="carousel"]').each(function(){var e=c(this);i.call(e,e.data())})})})(jQuery),(i=>{function o(e,t){this.$element=i(e),this.options=i.extend({},o.DEFAULTS,t),this.$trigger=i('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()}function n(e){e=e.attr("data-target")||(e=e.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"");return i(document).find(e)}function a(r){return this.each(function(){var e=i(this),t=e.data("bs.collapse"),n=i.extend({},o.DEFAULTS,e.data(),"object"==typeof r&&r);!t&&n.toggle&&/show|hide/.test(r)&&(n.toggle=!1),t||e.data("bs.collapse",t=new o(this,n)),"string"==typeof r&&t[r]()})}o.VERSION="3.4.1",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(r=e.data("bs.collapse"))&&r.transitioning)){var t=i.Event("show.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){e&&e.length&&(a.call(e,"hide"),r||e.data("bs.collapse",null));var n=this.dimension(),t=(this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1,function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")});if(!i.support.transition)return t.call(this);var r=i.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",i.proxy(t,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[n](this.$element[0][r])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=i.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var e=this.dimension(),t=(this.$element[e](this.$element[e]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1,function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")});if(!i.support.transition)return t.call(this);this.$element[e](0).one("bsTransitionEnd",i.proxy(t,this)).emulateTransitionEnd(o.TRANSITION_DURATION)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return i(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(i.proxy(function(e,t){t=i(t);this.addAriaAndCollapsedClass(n(t),t)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var e=i.fn.collapse;i.fn.collapse=a,i.fn.collapse.Constructor=o,i.fn.collapse.noConflict=function(){return i.fn.collapse=e,this},i(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=i(this),e=(t.attr("data-target")||e.preventDefault(),n(t)),t=e.data("bs.collapse")?"toggle":t.data();a.call(e,t)})})(jQuery),(i=>{function r(e){i(e).on("click.bs.dropdown",this.toggle)}var o='[data-toggle="dropdown"]';function a(e){var t=e.attr("data-target"),t="#"!==(t=t||(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""))?i(document).find(t):null;return t&&t.length?t:e.parent()}function s(r){r&&3===r.which||(i(".dropdown-backdrop").remove(),i(o).each(function(){var e=i(this),t=a(e),n={relatedTarget:this};!t.hasClass("open")||r&&"click"==r.type&&/input|textarea/i.test(r.target.tagName)&&i.contains(t[0],r.target)||(t.trigger(r=i.Event("hide.bs.dropdown",n)),r.isDefaultPrevented())||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(i.Event("hidden.bs.dropdown",n)))}))}r.VERSION="3.4.1",r.prototype.toggle=function(e){var t=i(this);if(!t.is(".disabled, :disabled")){var n=a(t),r=n.hasClass("open");if(s(),!r){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&i(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(i(this)).on("click",s);r={relatedTarget:this};if(n.trigger(e=i.Event("show.bs.dropdown",r)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(i.Event("shown.bs.dropdown",r))}return!1}},r.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=i(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var n=a(t),r=n.hasClass("open");if(!r&&27!=e.which||r&&27==e.which)return 27==e.which&&n.find(o).trigger("focus"),t.trigger("click");r=n.find(".dropdown-menu li:not(.disabled):visible a");r.length&&(t=r.index(e.target),38==e.which&&0<t&&t--,40==e.which&&t<r.length-1&&t++,r.eq(t=~t?t:0).trigger("focus"))}}};var e=i.fn.dropdown;i.fn.dropdown=function(n){return this.each(function(){var e=i(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new r(this)),"string"==typeof n&&t[n].call(e)})},i.fn.dropdown.Constructor=r,i.fn.dropdown.noConflict=function(){return i.fn.dropdown=e,this},i(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)})(jQuery),(o=>{function a(e,t){this.options=t,this.$body=o(document.body),this.$element=o(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,o.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}function s(r,i){return this.each(function(){var e=o(this),t=e.data("bs.modal"),n=o.extend({},a.DEFAULTS,e.data(),"object"==typeof r&&r);t||e.data("bs.modal",t=new a(this,n)),"string"==typeof r?t[r](i):n.show&&t.show(i)})}a.VERSION="3.4.1",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},a.prototype.show=function(n){var r=this,e=o.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',o.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(e){o(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=o.support.transition&&r.$element.hasClass("fade"),t=(r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),e&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus(),o.Event("shown.bs.modal",{relatedTarget:n}));e?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(a.TRANSITION_DURATION):r.$element.trigger("focus").trigger(t)}))},a.prototype.hide=function(e){e&&e.preventDefault(),e=o.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),o(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),o.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",o.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){o(document).off("focusin.bs.modal").on("focusin.bs.modal",o.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",o.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?o(window).on("resize.bs.modal",o.proxy(this.handleUpdate,this)):o(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(e){var t,n=this,r=this.$element.hasClass("fade")?"fade":"";this.isShown&&this.options.backdrop?(t=o.support.transition&&r,this.$backdrop=o(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",o.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),t&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e&&(t?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):e())):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),r=function(){n.removeBackdrop(),e&&e()},o.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):r()):e&&e()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var e,t=window.innerWidth;t||(t=(e=document.documentElement.getBoundingClientRect()).right-Math.abs(e.left)),this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10),i=(this.originalBodyPad=document.body.style.paddingRight||"",this.scrollbarWidth);this.bodyIsOverflowing&&(this.$body.css("padding-right",e+i),o(this.fixedContent).each(function(e,t){var n=t.style.paddingRight,r=o(t).css("padding-right");o(t).data("padding-right",n).css("padding-right",parseFloat(r)+i+"px")}))},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),o(this.fixedContent).each(function(e,t){var n=o(t).data("padding-right");o(t).removeData("padding-right"),t.style.paddingRight=n||""})},a.prototype.measureScrollbar=function(){var e=document.createElement("div"),t=(e.className="modal-scrollbar-measure",this.$body.append(e),e.offsetWidth-e.clientWidth);return this.$body[0].removeChild(e),t};var e=o.fn.modal;o.fn.modal=s,o.fn.modal.Constructor=a,o.fn.modal.noConflict=function(){return o.fn.modal=e,this},o(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=o(this),n=t.attr("href"),r=t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,""),i=o(document).find(r),r=i.data("bs.modal")?"toggle":o.extend({remote:!/#/.test(n)&&n},i.data(),t.data());t.is("a")&&e.preventDefault(),i.one("show.bs.modal",function(e){e.isDefaultPrevented()||i.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),s.call(i,r,this)})})(jQuery),(h=>{var r=["sanitize","whiteList","sanitizeFn"],f=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],e={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},m=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,g=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function i(e,t,n){if(0===e.length)return e;if(n&&"function"==typeof n)return n(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;for(var n=document.implementation.createHTMLDocument("sanitization"),r=(n.body.innerHTML=e,h.map(t,function(e,t){return t})),i=h(n.body).find("*"),o=0,a=i.length;o<a;o++){var s=i[o],l=s.nodeName.toLowerCase();if(-1===h.inArray(l,r))s.parentNode.removeChild(s);else for(var c=h.map(s.attributes,function(e){return e}),u=[].concat(t["*"]||[],t[l]||[]),d=0,p=c.length;d<p;d++)((e,t)=>{var n=e.nodeName.toLowerCase();if(-1!==h.inArray(n,t))return-1===h.inArray(n,f)||Boolean(e.nodeValue.match(m)||e.nodeValue.match(g));for(var r=h(t).filter(function(e,t){return t instanceof RegExp}),i=0,o=r.length;i<o;i++)if(n.match(r[i]))return 1})(c[d],u)||s.removeAttribute(c[d].nodeName)}return n.body.innerHTML}function l(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)}l.VERSION="3.4.1",l.TRANSITION_DURATION=150,l.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:e},l.prototype.init=function(e,t,n){if(this.enabled=!0,this.type=e,this.$element=h(t),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&h(document).find(h.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),i=r.length;i--;){var o,a=r[i];"click"==a?this.$element.on("click."+this.type,this.options.selector,h.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseleave":"focusout",this.$element.on(("hover"==a?"mouseenter":"focusin")+"."+this.type,this.options.selector,h.proxy(this.enter,this)),this.$element.on(o+"."+this.type,this.options.selector,h.proxy(this.leave,this)))}this.options.selector?this._options=h.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},l.prototype.getDefaults=function(){return l.DEFAULTS},l.prototype.getOptions=function(e){var t,n=this.$element.data();for(t in n)n.hasOwnProperty(t)&&-1!==h.inArray(t,r)&&delete n[t];return(e=h.extend({},this.getDefaults(),n,e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e.sanitize&&(e.template=i(e.template,e.whiteList,e.sanitizeFn)),e},l.prototype.getDelegateOptions=function(){var n={},r=this.getDefaults();return this._options&&h.each(this._options,function(e,t){r[e]!=t&&(n[e]=t)}),n},l.prototype.enter=function(e){var t=e instanceof this.constructor?e:h(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),h(e.currentTarget).data("bs."+this.type,t)),e instanceof h.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},l.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},l.prototype.leave=function(e){var t=e instanceof this.constructor?e:h(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),h(e.currentTarget).data("bs."+this.type,t)),e instanceof h.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},l.prototype.show=function(){var t,e,n,r,i,o,a,s=h.Event("show.bs."+this.type);this.hasContent()&&this.enabled&&(this.$element.trigger(s),i=h.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]),!s.isDefaultPrevented())&&i&&(s=(t=this).tip(),i=this.getUID(this.type),this.setContent(),s.attr("id",i),this.$element.attr("aria-describedby",i),this.options.animation&&s.addClass("fade"),i="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,(a=(e=/\s?auto?\s?/i).test(i))&&(i=i.replace(e,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(i).data("bs."+this.type,this),this.options.container?s.appendTo(h(document).find(this.options.container)):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type),e=this.getPosition(),n=s[0].offsetWidth,r=s[0].offsetHeight,a&&(a=i,o=this.getPosition(this.$viewport),i="bottom"==i&&e.bottom+r>o.bottom?"top":"top"==i&&e.top-r<o.top?"bottom":"right"==i&&e.right+n>o.width?"left":"left"==i&&e.left-n<o.left?"right":i,s.removeClass(a).addClass(i)),o=this.getCalculatedOffset(i,e,n,r),this.applyPlacement(o,i),a=function(){var e=t.hoverState;t.$element.trigger("shown.bs."+t.type),t.hoverState=null,"out"==e&&t.leave(t)},h.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",a).emulateTransitionEnd(l.TRANSITION_DURATION):a())},l.prototype.applyPlacement=function(e,t){var n=this.tip(),r=n[0].offsetWidth,i=n[0].offsetHeight,o=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10),o=(isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top+=o,e.left+=a,h.offset.setOffset(n[0],h.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),n.addClass("in"),n[0].offsetWidth),a=n[0].offsetHeight,s=("top"==t&&a!=i&&(e.top=e.top+i-a),this.getViewportAdjustedDelta(t,e,o,a)),t=(s.left?e.left+=s.left:e.top+=s.top,/top|bottom/.test(t)),r=t?2*s.left-r+o:2*s.top-i+a,o=t?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(r,n[0][o],t)},l.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},l.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();this.options.html?(this.options.sanitize&&(t=i(t,this.options.whiteList,this.options.sanitizeFn)),e.find(".tooltip-inner").html(t)):e.find(".tooltip-inner").text(t),e.removeClass("fade in top bottom left right")},l.prototype.hide=function(e){var t=this,n=h(this.$tip),r=h.Event("hide.bs."+this.type);function i(){"in"!=t.hoverState&&n.detach(),t.$element&&t.$element.removeAttr("aria-describedby").trigger("hidden.bs."+t.type),e&&e()}if(this.$element.trigger(r),!r.isDefaultPrevented())return n.removeClass("in"),h.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",i).emulateTransitionEnd(l.TRANSITION_DURATION):i(),this.hoverState=null,this},l.prototype.fixTitle=function(){var e=this.$element;!e.attr("title")&&"string"==typeof e.attr("data-original-title")||e.attr("data-original-title",e.attr("title")||"").attr("title","")},l.prototype.hasContent=function(){return this.getTitle()},l.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],n="BODY"==t.tagName,r=t.getBoundingClientRect(),t=(null==r.width&&(r=h.extend({},r,{width:r.right-r.left,height:r.bottom-r.top})),window.SVGElement&&t instanceof window.SVGElement),t=n?{top:0,left:0}:t?null:e.offset(),e={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},n=n?{width:h(window).width(),height:h(window).height()}:null;return h.extend({},r,e,n,t)},l.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},l.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i,o,a={top:0,left:0};return this.$viewport&&(i=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport),/right|left/.test(e)?(e=t.top-i-o.scroll,r=t.top+i-o.scroll+r,e<o.top?a.top=o.top-e:r>o.top+o.height&&(a.top=o.top+o.height-r)):(e=t.left-i,r=t.left+i+n,e<o.left?a.left=o.left-e:r>o.right&&(a.left=o.left+o.width-r))),a},l.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},l.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},l.prototype.tip=function(){if(this.$tip||(this.$tip=h(this.options.template),1==this.$tip.length))return this.$tip;throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")},l.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},l.prototype.enable=function(){this.enabled=!0},l.prototype.disable=function(){this.enabled=!1},l.prototype.toggleEnabled=function(){this.enabled=!this.enabled},l.prototype.toggle=function(e){var t=this;e&&!(t=h(e.currentTarget).data("bs."+this.type))&&(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),h(e.currentTarget).data("bs."+this.type,t)),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},l.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})},l.prototype.sanitizeHtml=function(e){return i(e,this.options.whiteList,this.options.sanitizeFn)};var t=h.fn.tooltip;h.fn.tooltip=function(r){return this.each(function(){var e=h(this),t=e.data("bs.tooltip"),n="object"==typeof r&&r;!t&&/destroy|hide/.test(r)||(t||e.data("bs.tooltip",t=new l(this,n)),"string"==typeof r&&t[r]())})},h.fn.tooltip.Constructor=l,h.fn.tooltip.noConflict=function(){return h.fn.tooltip=t,this}})(jQuery),(i=>{function o(e,t){this.init("popover",e,t)}if(!i.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.4.1",o.DEFAULTS=i.extend({},i.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((o.prototype=i.extend({},i.fn.tooltip.Constructor.prototype)).constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var e,t=this.tip(),n=this.getTitle(),r=this.getContent();this.options.html?(e=typeof r,this.options.sanitize&&(n=this.sanitizeHtml(n),"string"==e)&&(r=this.sanitizeHtml(r)),t.find(".popover-title").html(n),t.find(".popover-content").children().detach().end()["string"==e?"html":"append"](r)):(t.find(".popover-title").text(n),t.find(".popover-content").children().detach().end().text(r)),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=i.fn.popover;i.fn.popover=function(r){return this.each(function(){var e=i(this),t=e.data("bs.popover"),n="object"==typeof r&&r;!t&&/destroy|hide/.test(r)||(t||e.data("bs.popover",t=new o(this,n)),"string"==typeof r&&t[r]())})},i.fn.popover.Constructor=o,i.fn.popover.noConflict=function(){return i.fn.popover=e,this}})(jQuery),(i=>{function r(e,t){this.$body=i(document.body),this.$scrollElement=i(e).is(document.body)?i(window):i(e),this.options=i.extend({},r.DEFAULTS,t),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i.proxy(this.process,this)),this.refresh(),this.process()}function t(n){return this.each(function(){var e=i(this),t=e.data("bs.scrollspy");t||e.data("bs.scrollspy",t=new r(this,"object"==typeof n&&n)),"string"==typeof n&&t[n]()})}r.VERSION="3.4.1",r.DEFAULTS={offset:10},r.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},r.prototype.refresh=function(){var e=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),i.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=i(this),e=e.data("target")||e.attr("href"),t=/^#./.test(e)&&i(e);return t&&t.length&&t.is(":visible")?[[t[n]().top+r,e]]:null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},r.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),r<=t)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)a!=o[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(o[e])},r.prototype.activate=function(e){this.activeTarget=e,this.clear();e=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',e=i(e).parents("li").addClass("active");(e=e.parent(".dropdown-menu").length?e.closest("li.dropdown").addClass("active"):e).trigger("activate.bs.scrollspy")},r.prototype.clear=function(){i(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var e=i.fn.scrollspy;i.fn.scrollspy=t,i.fn.scrollspy.Constructor=r,i.fn.scrollspy.noConflict=function(){return i.fn.scrollspy=e,this},i(window).on("load.bs.scrollspy.data-api",function(){i('[data-spy="scroll"]').each(function(){var e=i(this);t.call(e,e.data())})})})(jQuery),(a=>{function s(e){this.element=a(e)}function t(n){return this.each(function(){var e=a(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new s(this)),"string"==typeof n&&t[n]()})}function e(e){e.preventDefault(),t.call(a(this),"show")}s.VERSION="3.4.1",s.TRANSITION_DURATION=150,s.prototype.show=function(){var e,t,n,r=this.element,i=r.closest("ul:not(.dropdown-menu)"),o=(o=r.data("target"))||(o=r.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"");r.parent("li").hasClass("active")||(e=i.find(".active:last a"),t=a.Event("hide.bs.tab",{relatedTarget:r[0]}),n=a.Event("show.bs.tab",{relatedTarget:e[0]}),e.trigger(t),r.trigger(n),n.isDefaultPrevented())||t.isDefaultPrevented()||(n=a(document).find(o),this.activate(r.closest("li"),i),this.activate(n,n.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:r[0]}),r.trigger({type:"shown.bs.tab",relatedTarget:e[0]})}))},s.prototype.activate=function(e,t,n){var r=t.find("> .active"),i=n&&a.support.transition&&(r.length&&r.hasClass("fade")||!!t.find("> .fade").length);function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),i?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}r.length&&i?r.one("bsTransitionEnd",o).emulateTransitionEnd(s.TRANSITION_DURATION):o(),r.removeClass("in")};var n=a.fn.tab;a.fn.tab=t,a.fn.tab.Constructor=s,a.fn.tab.noConflict=function(){return a.fn.tab=n,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)})(jQuery),(a=>{function s(e,t){this.options=a.extend({},s.DEFAULTS,t),t=this.options.target===s.DEFAULTS.target?a(this.options.target):a(document).find(this.options.target),this.$target=t.on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()}function n(n){return this.each(function(){var e=a(this),t=e.data("bs.affix");t||e.data("bs.affix",t=new s(this,"object"==typeof n&&n)),"string"==typeof n&&t[n]()})}s.VERSION="3.4.1",s.RESET="affix affix-top affix-bottom",s.DEFAULTS={offset:0,target:window},s.prototype.getState=function(e,t,n,r){var i,o=this.$target.scrollTop(),a=this.$element.offset(),s=this.$target.height();return null!=n&&"top"==this.affixed?o<n&&"top":"bottom"==this.affixed?null!=n?!(o+this.unpin<=a.top)&&"bottom":!(o+s<=e-r)&&"bottom":(a=(i=null==this.affixed)?o:a.top,null!=n&&o<=n?"top":null!=r&&e-r<=a+(i?s:t)&&"bottom")},s.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(s.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},s.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},s.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),t=this.options.offset,n=t.top,r=t.bottom,i=Math.max(a(document).height(),a(document.body).height()),t=("object"!=typeof t&&(r=n=t),"function"==typeof n&&(n=t.top(this.$element)),"function"==typeof r&&(r=t.bottom(this.$element)),this.getState(i,e,n,r));if(this.affixed!=t){null!=this.unpin&&this.$element.css("top","");var n="affix"+(t?"-"+t:""),o=a.Event(n+".bs.affix");if(this.$element.trigger(o),o.isDefaultPrevented())return;this.affixed=t,this.unpin="bottom"==t?this.getPinnedOffset():null,this.$element.removeClass(s.RESET).addClass(n).trigger(n.replace("affix","affixed")+".bs.affix")}"bottom"==t&&this.$element.offset({top:i-e-r})}};var e=a.fn.affix;a.fn.affix=n,a.fn.affix.Constructor=s,a.fn.affix.noConflict=function(){return a.fn.affix=e,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var e=a(this),t=e.data();t.offset=t.offset||{},null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom),null!=t.offsetTop&&(t.offset.top=t.offsetTop),n.call(e,t)})})})(jQuery),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).instantsearch=t()})(this,function(){function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){w(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){if(null==e)return{};var n,r=((e,t)=>{if(null==e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r})(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?A(e):t}function D(e,t){return(e=>{if(Array.isArray(e))return e})(e)||((e,t)=>{if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}})(e,t)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance")})()}function b(e){return(e=>{if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}})(e)||(e=>{if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)})(e)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance")})()}function V(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function j(){return Array.prototype.slice.call(arguments).reduceRight(function(t,n){return Object.keys(Object(n)).forEach(function(e){void 0!==n[e]&&(void 0!==t[e]&&delete t[e],t[e]=n[e])}),t},{})}function H(e){V(e)||(e={});for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];V(r)&&function e(t,n){var r,i;if(t!==n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r=n[o],void 0!==(i=t[o])&&void 0===r||(V(i)&&V(r)?t[o]=e(i,r):t[o]="object"==typeof(i=r)&&null!==i?e(Array.isArray(i)?[]:{},i):i));return t}(e,r)}return e}function Y(n,r){return n.filter(function(e,t){return-1<r.indexOf(e)&&n.indexOf(e)===t})}function z(e){if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);if(Array.isArray(e))return e.map(z);throw new Error("The value should be a number, a parsable string or an array of those.")}function W(e,t){if(null===e)return{};for(var n,r={},i=Object.keys(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||(r[n]=e[n]);return r}function q(e){return e&&0<Object.keys(e).length}var m=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]},K={addRefinement:function(e,t,n){var r;return K.isRefined(e,t,n)?e:(n=""+n,n=e[t]?e[t].concat(n):[n],(r={})[t]=n,j({},r,e))},removeRefinement:function(e,n,t){var r;return void 0===t?K.clearRefinement(e,function(e,t){return n===t}):(r=""+t,K.clearRefinement(e,function(e,t){return n===t&&r===e}))},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return K.isRefined(e,t,n)?K.removeRefinement(e,t,n):K.addRefinement(e,t,n)},clearRefinement:function(i,o,a){var s,e;return void 0===o?q(i)?{}:i:"string"==typeof o?W(i,[o]):"function"==typeof o?(s=!1,e=Object.keys(i).reduce(function(e,t){var n=i[t]||[],r=n.filter(function(e){return!o(e,t,a)});return r.length!==n.length&&(s=!0),e[t]=r,e},{}),s?e:i):void 0},isRefined:function(e,t,n){var r=!!e[t]&&0<e[t].length;return void 0!==n&&r?-1!==e[t].indexOf(""+n):r}},n=K;function Q(e,n){return Array.isArray(e)&&Array.isArray(n)?e.length===n.length&&e.every(function(e,t){return Q(n[t],e)}):e===n}function a(e){var r=e?a._parseNumbers(e):{},i=(this.facets=r.facets||[],this.disjunctiveFacets=r.disjunctiveFacets||[],this.hierarchicalFacets=r.hierarchicalFacets||[],this.facetsRefinements=r.facetsRefinements||{},this.facetsExcludes=r.facetsExcludes||{},this.disjunctiveFacetsRefinements=r.disjunctiveFacetsRefinements||{},this.numericRefinements=r.numericRefinements||{},this.tagRefinements=r.tagRefinements||[],this.hierarchicalFacetsRefinements=r.hierarchicalFacetsRefinements||{},this);Object.keys(r).forEach(function(e){var t=-1!==a.PARAMETERS.indexOf(e),n=void 0!==r[e];!t&&n&&(i[e]=r[e])})}a.PARAMETERS=Object.keys(new a),a._parseNumbers=function(i){var r,o;return i instanceof a?i:(r={},["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(e){var t,n=i[e];"string"==typeof n&&(t=parseFloat(n),r[e]=isNaN(t)?n:t)}),Array.isArray(i.insideBoundingBox)&&(r.insideBoundingBox=i.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),i.numericRefinements&&(o={},Object.keys(i.numericRefinements).forEach(function(n){var r=i.numericRefinements[n]||{};o[n]={},Object.keys(r).forEach(function(e){var t=r[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});o[n][e]=t})}),r.numericRefinements=o),H({},i,r))},a.make=function(e){var n=new a(e);return(e.hierarchicalFacets||[]).forEach(function(e){var t;e.rootPath&&0===(t=(n=0<(t=n.getHierarchicalRefinement(e.name)).length&&0!==t[0].indexOf(e.rootPath)?n.clearRefinements(e.name):n).getHierarchicalRefinement(e.name)).length&&(n=n.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}),n},a.validate=function(e,t){t=t||{};return e.tagFilters&&t.tagRefinements&&0<t.tagRefinements.length?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):0<e.tagRefinements.length&&t.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&t.numericRefinements&&q(t.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):q(e.numericRefinements)&&t.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},a.prototype={constructor:a,clearRefinements:function(e){e={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:n.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:n.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:n.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:n.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return e.numericRefinements===this.numericRefinements&&e.facetsRefinements===this.facetsRefinements&&e.facetsExcludes===this.facetsExcludes&&e.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&e.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(e)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r,n=z(n);return this.isNumericRefined(e,t,n)?this:((r=H({},this.numericRefinements))[e]=H({},r[e]),r[e][t]?(r[e][t]=r[e][t].slice(),r[e][t].push(n)):r[e][t]=[n],this.setQueryParameters({numericRefinements:r}))},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(n,r,i){return void 0!==i?this.isNumericRefined(n,r,i)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r&&Q(e.val,z(i))})}):this:void 0!==r?this.isNumericRefined(n,r)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n&&e.op===r})}):this:this.isNumericRefined(n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(e,t){return t===n})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(a){var s,t,e;return void 0===a?q(this.numericRefinements)?{}:this.numericRefinements:"string"==typeof a?q(this.numericRefinements[a])?W(this.numericRefinements,[a]):this.numericRefinements:"function"==typeof a?(s=!1,t=this.numericRefinements,e=Object.keys(t).reduce(function(e,r){var i=t[r],o={},i=i||{};return Object.keys(i).forEach(function(t){var e=i[t]||[],n=[];e.forEach(function(e){a({val:e,op:t},r,"numeric")||n.push(e)}),n.length!==e.length&&(s=!0),o[t]=n}),e[r]=o,e},{}),s?e:this.numericRefinements):void 0},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:n.addRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:n.addRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},addDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:n.addRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},addTagRefinement:function(e){return this.isTagRefined(e)?this:(e={tagRefinements:this.tagRefinements.concat(e)},this.setQueryParameters(e))},removeFacet:function(t){return this.isConjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({facets:this.facets.filter(function(e){return e!==t})}):this},removeDisjunctiveFacet:function(t){return this.isDisjunctiveFacet(t)?this.clearRefinements(t).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(e){return e!==t})}):this},removeHierarchicalFacet:function(t){return this.isHierarchicalFacet(t)?this.clearRefinements(t).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(e){return e.name!==t})}):this},removeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:n.removeRefinement(this.facetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeExcludeRefinement:function(e,t){if(this.isConjunctiveFacet(e))return n.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:n.removeRefinement(this.facetsExcludes,e,t)}):this;throw new Error(e+" is not defined in the facets attribute of the helper configuration")},removeDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return n.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:n.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this;throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},removeTagRefinement:function(t){var e;return this.isTagRefined(t)?(e={tagRefinements:this.tagRefinements.filter(function(e){return e!==t})},this.setQueryParameters(e)):this},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsRefinements:n.toggleRefinement(this.facetsRefinements,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleExcludeFacetRefinement:function(e,t){if(this.isConjunctiveFacet(e))return this.setQueryParameters({facetsExcludes:n.toggleRefinement(this.facetsExcludes,e,t)});throw new Error(e+" is not defined in the facets attribute of the helper configuration")},toggleDisjunctiveFacetRefinement:function(e,t){if(this.isDisjunctiveFacet(e))return this.setQueryParameters({disjunctiveFacetsRefinements:n.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)});throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration")},toggleHierarchicalFacetRefinement:function(e,t){var n,r;if(this.isHierarchicalFacet(e))return n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={},void 0!==this.hierarchicalFacetsRefinements[e]&&0<this.hierarchicalFacetsRefinements[e].length&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n))?-1===t.indexOf(n)?r[e]=[]:r[e]=[t.slice(0,t.lastIndexOf(n))]:r[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:j({},r,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration")},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");var n;if(this.isHierarchicalFacet(e))return(n={})[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:j({},n,this.hierarchicalFacetsRefinements)});throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.")},removeHierarchicalFacetRefinement:function(e){var t;return this.isHierarchicalFacetRefined(e)?((t={})[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:j({},t,this.hierarchicalFacetsRefinements)})):this},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return-1<this.disjunctiveFacets.indexOf(e)},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return-1<this.facets.indexOf(e)},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&n.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&n.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){return!!this.isHierarchicalFacet(e)&&(e=this.getHierarchicalRefinement(e),t?-1!==e.indexOf(t):0<e.length)},isNumericRefined:function(e,t,n){var r,i;return void 0===n&&void 0===t?!!this.numericRefinements[e]:(r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t],void 0!==n&&r?(n=z(n),t=void 0!==(e=this.numericRefinements[e][t],i=n,m(e,function(e){return Q(e,i)})),r&&t):r)},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var t=this,e=Y(Object.keys(this.numericRefinements).filter(function(e){return 0<Object.keys(t.numericRefinements[e]).length}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(e){return 0<t.disjunctiveFacetsRefinements[e].length}).concat(e).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var t=this;return Y(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(e){return 0<t.hierarchicalFacetsRefinements[e].length}))},getUnrefinedDisjunctiveFacets:function(){var t=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(e){return-1===t.indexOf(e)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var n=this.managedParameters,r={},i=this;return Object.keys(this).forEach(function(e){var t=i[e];-1===n.indexOf(e)&&void 0!==t&&(r[e]=t)}),r},setQueryParameter:function(e,t){var n;return this[e]===t?this:((n={})[e]=t,this.setQueryParameters(n))},setQueryParameters:function(e){if(!e)return this;var t=a.validate(this,e);if(t)throw t;var n=this,i=a._parseNumbers(e),t=Object.keys(this).reduce(function(e,t){return e[t]=n[t],e},{}),e=Object.keys(i).reduce(function(e,t){var n=void 0!==e[t],r=void 0!==i[t];return n&&!r?W(e,[t]):(r&&(e[t]=i[t]),e)},t);return new this.constructor(e)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(t){return m(this.hierarchicalFacets,function(e){return e.name===t})},getHierarchicalFacetBreadcrumb:function(e){var t;return this.isHierarchicalFacet(e)&&(t=this.getHierarchicalRefinement(e)[0])?(e=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),t.split(e).map(function(e){return e.trim()})):[]},toString:function(){return JSON.stringify(this,null,2)}};var X=a;function Z(e){return Array.isArray(e)?e.filter(Boolean):[]}function J(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function ee(e,t){var r=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var n=t.split(":"),t=m(r,function(e){return e[0]===n[0]});return 1<n.length||!t?(e[0].push(n[0]),e[1].push(n[1])):(e[0].push(t[0]),e[1].push(t[1])),e},[[],[]])}function te(f){return function(e,t){function n(e,a,t){var n,s=e;if(0<t){var r=0;for(s=e;r<t;){var i=s&&Array.isArray(s.data)?s.data:[],s=m(i,function(e){return e.isRefined});r++}}return s&&(n=Object.keys(a.data).map(function(e){return[e,a.data[e]]}).filter(function(e){return e=e[0],t=s.path||c,n=d,r=l,o=u,(!(i=c)||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(o||0===e.indexOf(n)));var t,n,r,i,o}),s.data=ne(n.map(function(e){var t,n,r,i,o=e[0];return e=e[1],o=o,t=l,n=d,r=a.exhaustive,{name:(i=o.split(t))[i.length-1].trim(),path:o,count:e,isRefined:n===o||0===n.indexOf(o+t),exhaustive:r,data:null}}),o[0],o[1])),e}var o,l,c,u,d,r=f.hierarchicalFacets[t],i=f.hierarchicalFacetsRefinements[r.name]&&f.hierarchicalFacetsRefinements[r.name][0]||"",a=f._getHierarchicalFacetSeparator(r),s=f._getHierarchicalRootPath(r),p=f._getHierarchicalShowParentLevel(r),r=ee(f._getHierarchicalFacetSortBy(r)),h=e.every(function(e){return e.exhaustive}),r=(o=r,l=a,u=p,d=i,e);return(r=(c=s)?e.slice(s.split(a).length):r).reduce(n,{name:f.hierarchicalFacets[t].name,count:null,isRefined:!0,path:null,exhaustive:h,data:null})}}var ne=function(e,n,i){if(!Array.isArray(e))return[];Array.isArray(i)||(i=[]);e=e.map(function(t,e){return{criteria:n.map(function(e){return t[e]}),index:e,value:t}});return e.sort(function(e,t){for(var n=-1;++n<e.criteria.length;){var r=((e,t)=>{if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,o=null===t;if(!o&&t<e||r&&i||!n)return 1;if(!r&&e<t||o&&n||!i)return-1}return 0})(e.criteria[n],t.criteria[n]);if(r)return!(n>=i.length)&&"desc"===i[n]?-r:r}return e.index-t.index}),e.map(function(e){return e.value})};function re(e){var n={};return e.forEach(function(e,t){n[e]=t}),n}function ie(e,t,n){t&&t[n]&&(e.stats=t[n])}function oe(u,t){var s=t[0],d=(this._rawResults=t,this),e=(Object.keys(s).forEach(function(e){d[e]=s[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=u.hierarchicalFacets.map(function(){return[]}),this.facets=[],u.getRefinedDisjunctiveFacets()),l=re(u.facets),c=re(u.disjunctiveFacets),n=1,p=s.facets||{};Object.keys(p).forEach(function(e){var t,n,r,i,o=p[e],a=(i=u.hierarchicalFacets,t=e,m(i,function(e){return-1<(e.attributes||[]).indexOf(t)}));a?(i=a.attributes.indexOf(e),r=J(u.hierarchicalFacets,function(e){return e.name===a.name}),d.hierarchicalFacets[r][i]={attribute:e,data:o,exhaustive:s.exhaustiveFacetsCount}):(r=-1!==u.disjunctiveFacets.indexOf(e),i=-1!==u.facets.indexOf(e),r&&(n=c[e],d.disjunctiveFacets[n]={name:e,data:o,exhaustive:s.exhaustiveFacetsCount},ie(d.disjunctiveFacets[n],s.facets_stats,e)),i&&(n=l[e],d.facets[n]={name:e,data:o,exhaustive:s.exhaustiveFacetsCount},ie(d.facets[n],s.facets_stats,e)))}),this.hierarchicalFacets=Z(this.hierarchicalFacets),e.forEach(function(e){var i=t[n],o=i&&i.facets?i.facets:{},a=u.getHierarchicalFacetByName(e);Object.keys(o).forEach(function(t){var n,e,r=o[t];a?(n=J(u.hierarchicalFacets,function(e){return e.name===a.name}),-1!==(e=J(d.hierarchicalFacets[n],function(e){return e.attribute===t}))&&(d.hierarchicalFacets[n][e].data=H({},d.hierarchicalFacets[n][e].data,r))):(n=c[t],e=s.facets&&s.facets[t]||{},d.disjunctiveFacets[n]={name:t,data:j({},r,e),exhaustive:i.exhaustiveFacetsCount},ie(d.disjunctiveFacets[n],i.facets_stats,t),u.disjunctiveFacetsRefinements[t]&&u.disjunctiveFacetsRefinements[t].forEach(function(e){!d.disjunctiveFacets[n].data[e]&&-1<u.disjunctiveFacetsRefinements[t].indexOf(e)&&(d.disjunctiveFacets[n].data[e]=0)}))}),n++}),u.getRefinedHierarchicalFacets().forEach(function(e){var a,s=u.getHierarchicalFacetByName(e),l=u._getHierarchicalFacetSeparator(s),c=u.getHierarchicalRefinement(e);0===c.length||c[0].split(l).length<2||(e=t[n],a=e&&e.facets?e.facets:{},Object.keys(a).forEach(function(t){var e,n,r=a[t],i=J(u.hierarchicalFacets,function(e){return e.name===s.name}),o=J(d.hierarchicalFacets[i],function(e){return e.attribute===t});-1!==o&&(e={},0<c.length&&(e[n=c[0].split(l)[0]]=d.hierarchicalFacets[i][o].data[n]),d.hierarchicalFacets[i][o].data=j(e,r,d.hierarchicalFacets[i][o].data))}),n++)}),Object.keys(u.facetsExcludes).forEach(function(t){var e=u.facetsExcludes[t],n=l[t];d.facets[n]={name:t,data:s.facets[t],exhaustive:s.exhaustiveFacetsCount},e.forEach(function(e){d.facets[n]=d.facets[n]||{name:t},d.facets[n].data=d.facets[n].data||{},d.facets[n].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(te(u)),this.facets=Z(this.facets),this.disjunctiveFacets=Z(this.disjunctiveFacets),this._state=u}function ae(t,e){var n;return e.data&&0!==e.data.length?(n=e.data.map(function(e){return ae(t,e)}),n=t(n),H({},e,{data:n})):e}function se(e,t){e=m(e,function(e){return e.name===t});return e&&e.stats}function le(e,t,n,r,i){var i=m(i,function(e){return e.name===n}),o=i&&i.data&&i.data[r]?i.data[r]:0,i=i&&i.exhaustive||!1;return{type:t,attributeName:n,name:r,count:o,exhaustive:i}}oe.prototype.getFacetByName=function(t){function e(e){return e.name===t}return m(this.facets,e)||m(this.disjunctiveFacets,e)||m(this.hierarchicalFacets,e)},oe.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],oe.prototype.getFacetValues=function(e,t){r=e;var n,r,i,o,e=(n=this)._state.isConjunctiveFacet(r)?(i=m(n.facets,a))?Object.keys(i.data).map(function(e){return{name:e,count:i.data[e],isRefined:n._state.isFacetRefined(r,e),isExcluded:n._state.isExcludeRefined(r,e)}}):[]:n._state.isDisjunctiveFacet(r)?(o=m(n.disjunctiveFacets,a))?Object.keys(o.data).map(function(e){return{name:e,count:o.data[e],isRefined:n._state.isDisjunctiveFacetRefined(r,e)}}):[]:n._state.isHierarchicalFacet(r)?m(n.hierarchicalFacets,a):void 0;function a(e){return e.name===r}if(e){var s,l=j({},t,{sortBy:oe.DEFAULT_SORT});if(Array.isArray(l.sortBy))return s=ee(l.sortBy,oe.DEFAULT_SORT),Array.isArray(e)?ne(e,s[0],s[1]):ae(function(e){return ne(e,s[0],s[1])},e);if("function"==typeof l.sortBy)return Array.isArray(e)?e.sort(l.sortBy):ae(function(e){return t=l.sortBy,e.sort(t);var t},e);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}},oe.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?se(this.facets,e):this._state.isDisjunctiveFacet(e)?se(this.disjunctiveFacets,e):void 0},oe.prototype.getRefinements=function(){var a=this._state,s=this,l=[];return Object.keys(a.facetsRefinements).forEach(function(t){a.facetsRefinements[t].forEach(function(e){l.push(le(0,"facet",t,e,s.facets))})}),Object.keys(a.facetsExcludes).forEach(function(t){a.facetsExcludes[t].forEach(function(e){l.push(le(0,"exclude",t,e,s.facets))})}),Object.keys(a.disjunctiveFacetsRefinements).forEach(function(t){a.disjunctiveFacetsRefinements[t].forEach(function(e){l.push(le(0,"disjunctive",t,e,s.disjunctiveFacets))})}),Object.keys(a.hierarchicalFacetsRefinements).forEach(function(o){a.hierarchicalFacetsRefinements[o].forEach(function(e){var t,n,r,i;l.push((t=a,n=o,e=e,r=s.hierarchicalFacets,i=t.getHierarchicalFacetByName(n),t=t._getHierarchicalFacetSeparator(i),i=e.split(t),e=m(r,function(e){return e.name===n}),t=i.reduce(function(e,t){var n=e&&m(e.data,function(e){return e.name===t});return void 0!==n?n:e},e),r=t&&t.count||0,i=t&&t.exhaustive||!1,e=t&&t.path||"",{type:"hierarchical",attributeName:n,name:e,count:r,exhaustive:i}))})}),Object.keys(a.numericRefinements).forEach(function(n){var e=a.numericRefinements[n];Object.keys(e).forEach(function(t){e[t].forEach(function(e){l.push({type:"numeric",attributeName:n,name:e,numericValue:e,operator:t})})})}),a.tagRefinements.forEach(function(e){l.push({type:"tag",attributeName:"_tags",name:e})}),l};var ce=oe;function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var ue=r;function de(e){return"function"==typeof e}function pe(e){return"object"==typeof e&&null!==e}function he(e){return void 0===e}(r.EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||pe(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(he(n=this._events[e]))return!1;if(de(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(pe(n))for(i=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,o=0;o<r;o++)a[o].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){if(de(t))return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,de(t.listener)?t.listener:t),this._events[e]?pe(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,pe(this._events[e])&&!this._events[e].warned&&(t=he(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<t&&this._events[e].length>t&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace)&&console.trace(),this;throw TypeError("listener must be a function")},r.prototype.once=function(e,t){var n;if(de(t))return n=!1,r.listener=t,this.on(e,r),this;throw TypeError("listener must be a function");function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!de(t))throw TypeError("listener must be a function");if(this._events&&this._events[e])if(i=(n=this._events[e]).length,r=-1,n===t||de(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(pe(n)){for(o=i;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(this._events)if(this._events.removeListener)if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);this.removeAllListeners("removeListener"),this._events={}}else{if(de(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);delete this._events[e]}else 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e];return this},r.prototype.listeners=function(e){return this._events&&this._events[e]?de(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(de(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)};function fe(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function me(e,t){this.main=e,this.fn=t,this.lastResults=null}fe(me,ue.EventEmitter),me.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},me.prototype.getModifiedState=function(e){return this.fn(e)};var ge=me,s={_getQueries:function(r,i){var o=[];return o.push({indexName:r,params:s._getHitsSearchParams(i)}),i.getRefinedDisjunctiveFacets().forEach(function(e){o.push({indexName:r,params:s._getDisjunctiveFacetSearchParams(i,e)})}),i.getRefinedHierarchicalFacets().forEach(function(e){var t=i.getHierarchicalFacetByName(e),n=i.getHierarchicalRefinement(e),t=i._getHierarchicalFacetSeparator(t);0<n.length&&1<n[0].split(t).length&&o.push({indexName:r,params:s._getDisjunctiveFacetSearchParams(i,e,!0)})}),o},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(s._getHitsHierarchicalFacetsAttributes(e)),n=s._getFacetFilters(e),r=s._getNumericFilters(e),t={facets:t,tagFilters:s._getTagFilters(e)};return 0<n.length&&(t.facetFilters=n),0<r.length&&(t.numericFilters=r),H({},e.getQueryParams(),t)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=s._getFacetFilters(e,t,n),i=s._getNumericFilters(e,t),o={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:s._getTagFilters(e),analytics:!1,clickAnalytics:!1},a=e.getHierarchicalFacetByName(t);return o.facets=a?s._getDisjunctiveHierarchicalFacetAttribute(e,a,n):t,0<i.length&&(o.numericFilters=i),0<r.length&&(o.facetFilters=r),H({},e.getQueryParams(),o)},_getNumericFilters:function(e,i){var o;return e.numericFilters||(o=[],Object.keys(e.numericRefinements).forEach(function(r){var t=e.numericRefinements[r]||{};Object.keys(t).forEach(function(n){var e=t[n]||[];i!==r&&e.forEach(function(e){var t;Array.isArray(e)?(t=e.map(function(e){return r+n+e}),o.push(t)):o.push(r+n+e)})})}),o)},_getTagFilters:function(e){return e.tagFilters||e.tagRefinements.join(",")},_getFacetFilters:function(a,s,l){var c=[],e=a.facetsRefinements||{},n=(Object.keys(e).forEach(function(t){(e[t]||[]).forEach(function(e){c.push(t+":"+e)})}),a.facetsExcludes||{}),r=(Object.keys(n).forEach(function(t){(n[t]||[]).forEach(function(e){c.push(t+":-"+e)})}),a.disjunctiveFacetsRefinements||{}),u=(Object.keys(r).forEach(function(t){var n,e=r[t]||[];t!==s&&e&&0!==e.length&&(n=[],e.forEach(function(e){n.push(t+":"+e)}),c.push(n))}),a.hierarchicalFacetsRefinements||{});return Object.keys(u).forEach(function(e){var t=(u[e]||[])[0];if(void 0!==t){var n,r=a.getHierarchicalFacetByName(e),i=a._getHierarchicalFacetSeparator(r),o=a._getHierarchicalRootPath(r);if(s===e){if(-1===t.indexOf(i)||!o&&!0===l||o&&o.split(i).length===t.split(i).length)return;t=o?(n=o.split(i).length-1,o):(n=t.split(i).length-2,t.slice(0,t.lastIndexOf(i)))}else n=t.split(i).length-1;(e=r.attributes[n])&&c.push([e+":"+t])}}),c},_getHitsHierarchicalFacetsAttributes:function(i){return i.hierarchicalFacets.reduce(function(e,t){var n,r=i.getHierarchicalRefinement(t.name)[0];return r?(n=i._getHierarchicalFacetSeparator(t),r=r.split(n).length,n=t.attributes.slice(0,r+1),e.concat(n)):(e.push(t.attributes[0]),e)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r,i=e._getHierarchicalFacetSeparator(t);return!0===n?(n=0,(r=e._getHierarchicalRootPath(t))&&(n=r.split(i).length),[t.attributes[n]]):(r=(e.getHierarchicalRefinement(t.name)[0]||"").split(i).length-1,t.attributes.slice(0,1+r))},getSearchForFacetQuery:function(e,t,n,r){r=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,t={facetQuery:t,facetName:e};return"number"==typeof n&&(t.maxFacetHits=n),H({},s._getHitsSearchParams(r),t)}},ve=s;function e(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.2.2)"),this.setClient(e);e=n||{};e.index=t,this.state=X.make(e),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function ye(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function be(){return this.state.page}fe(e,ue.EventEmitter),e.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},e.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},e.prototype.getQuery=function(){var e=this.state;return ve._getHitsSearchParams(e)},e.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,e=ve._getQueries(n.index,n),r=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(e).then(function(e){return r._currentNbQueries--,0===r._currentNbQueries&&r.emit("searchQueueEmpty"),{content:new ce(n,e.results),state:n,_originalResponse:e}},function(e){throw r._currentNbQueries--,0===r._currentNbQueries&&r.emit("searchQueueEmpty"),e});this.client.search(e).then(function(e){r._currentNbQueries--,0===r._currentNbQueries&&r.emit("searchQueueEmpty"),t(null,new ce(n,e.results),n)}).catch(function(e){r._currentNbQueries--,0===r._currentNbQueries&&r.emit("searchQueueEmpty"),t(e,null,n)})},e.prototype.searchForFacetValues=function(t,e,n,r){var i,o,a,s="function"==typeof this.client.searchForFacetValues;if(s||"function"==typeof this.client.initIndex)return i=this.state.setQueryParameters(r||{}),o=i.isDisjunctiveFacet(t),r=ve.getSearchForFacetQuery(t,e,n,i),this._currentNbQueries++,(a=this).emit("searchForFacetValues",{state:i,facet:t,query:e}),(s?this.client.searchForFacetValues([{indexName:i.index,params:r}]):this.client.initIndex(i.index).searchForFacetValues(r)).then(function(e){return a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),(e=Array.isArray(e)?e[0]:e).facetHits.forEach(function(e){e.isRefined=o?i.isDisjunctiveFacetRefined(t,e.value):i.isFacetRefined(t,e.value)}),e},function(e){throw a._currentNbQueries--,0===a._currentNbQueries&&a.emit("searchQueueEmpty"),e});throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues")},e.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},e.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},e.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},e.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},e.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},e.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},e.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},e.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},e.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},e.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},e.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},e.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},e.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},e.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},e.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},e.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},e.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},e.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},e.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},e.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},e.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},e.prototype.nextPage=function(){var e=this.state.page||0;return this.setPage(e+1)},e.prototype.previousPage=function(){var e=this.state.page||0;return this.setPage(e-1)},e.prototype.setCurrentPage=ye,e.prototype.setPage=ye,e.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},e.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},e.prototype.setState=function(e){return this._change({state:X.make(e),isPageReset:!1}),this},e.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new X(e),this},e.prototype.hasRefinements=function(e){return!!q(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},e.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},e.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},e.prototype.hasTag=function(e){return this.state.isTagRefined(e)},e.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},e.prototype.getIndex=function(){return this.state.index},e.prototype.getCurrentPage=be,e.prototype.getPage=be,e.prototype.getTags=function(){return this.state.tagRefinements},e.prototype.getRefinements=function(e){var n=[],r=(this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){n.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){n.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){n.push({value:e,type:"disjunctive"})}),this.state.getNumericRefinements(e));return Object.keys(r).forEach(function(e){var t=r[e];n.push({value:t,operator:e,type:"numeric"})}),n},e.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},e.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},e.prototype._search=function(e){var r=this.state,i=[],t=[],n=(e.onlyWithDerivedHelpers||(t=ve._getQueries(r.index,r),i.push({state:r,queriesCount:t.length,helper:this}),this.emit("search",{state:r,results:this.lastResults})),this.derivedHelpers.map(function(e){var t=e.getModifiedState(r),n=ve._getQueries(t.index,t);return i.push({state:t,queriesCount:n.length,helper:e}),e.emit("search",{state:t,results:e.lastResults}),n})),t=Array.prototype.concat.apply(t,n),n=this._queryId++;this._currentNbQueries++;try{this.client.search(t).then(this._dispatchAlgoliaResponse.bind(this,i,n)).catch(this._dispatchAlgoliaError.bind(this,n))}catch(e){this.emit("error",{error:e})}},e.prototype._dispatchAlgoliaResponse=function(e,t,n){var r;t<this._lastQueryIdReceived||(this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty"),r=n.results.slice(),e.forEach(function(e){var t=e.state,n=e.helper,e=r.splice(0,e.queriesCount),e=n.lastResults=new ce(t,e);n.emit("result",{results:e,state:t})}))},e.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},e.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},e.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&0<this.state.disjunctiveRefinements[e].length},e.prototype._change=function(e){var t=e.state,e=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:e}))},e.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},e.prototype.setClient=function(e){return this.client!==e&&("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.2.2)"),this.client=e),this},e.prototype.getClient=function(){return this.client},e.prototype.derive=function(e){e=new ge(this,e);return this.derivedHelpers.push(e),e},e.prototype.detachDerivedHelper=function(e){e=this.derivedHelpers.indexOf(e);if(-1===e)throw new Error("Derived helper already detached");this.derivedHelpers.splice(e,1)},e.prototype.hasPendingRequests=function(){return 0<this._currentNbQueries};var Se=e;function _e(e,t,n){return new Se(e,t,n)}_e.version="3.2.2",_e.AlgoliaSearchHelper=Se,_e.SearchParameters=X,_e.SearchResults=ce;var Ee=_e;function Ce(r){function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];null===i&&(i=we.then(function(){i=null,o?o=!1:r.apply(void 0,t)}))}var i=null,o=!1;return e.wait=function(){if(null===i)throw new Error("The deferred function should be called before calling `wait()`");return i},e.cancel=function(){null!==i&&(o=!0)},e}var we=Promise.resolve();function P(e){var t="string"==typeof e,n=t?document.querySelector(e):e;if((r=n)instanceof HTMLElement||Boolean(r)&&0<r.nodeType)return n;var r="Container must be `string` or `HTMLElement`.";throw t&&(r+=" Unable to find ".concat(e)),new Error(r)}function Te(e){return 1===e.button||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}function Ae(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function N(e){var t=e.defaultTemplates;return M({templatesConfig:e.templatesConfig},function(e,t){var o=0<arguments.length&&void 0!==e?e:{},a=1<arguments.length&&void 0!==t?t:{};return Ae([].concat(b(Object.keys(o)),b(Object.keys(a)))).reduce(function(e,t){var n=o[t],r=a[t],i=void 0!==r&&r!==n;return e.templates[t]=i?r:n,e.useCustomCompileOptions[t]=i,e},{templates:{},useCustomCompileOptions:{}})}(t,e.templates))}function Pe(e,t){return e(t={exports:{}},t.exports),t.exports}var Oe=Pe(function(e,t){function b(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function S(e,t,n){if(t.charAt(n)==e.charAt(0)){for(var r=1,i=e.length;r<i;r++)if(t.charAt(n+r)!=e.charAt(r))return;return 1}}function r(e){var t,n=[];for(t in e.partials)n.push('"'+i(t)+'":{name:"'+i(e.partials[t].name)+'", '+r(e.partials[t])+"}");return"partials: {"+n.join(",")+"}, subs: "+(e=>{var t,n=[];for(t in e)n.push('"'+i(t)+'": function(c,p,t,i) {'+e[t]+"}");return"{ "+n.join(",")+" }"})(e.subs)}function i(e){return e.replace(d,"\\\\").replace(l,'\\"').replace(c,"\\n").replace(u,"\\r").replace(p,"\\u2028").replace(h,"\\u2029")}function n(e){return~e.indexOf(".")?"d":"f"}function o(e,t){var n="<"+(t.prefix||"")+e.n+m++;return t.partials[n]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+i(n)+'",c,p,"'+(e.indent||"")+'"));',n}function a(e,t){t.code+="t.b(t.t(t."+n(e.n)+'("'+i(e.n)+'",c,p,0)));'}function s(e){return"t.b("+e+");"}var _,E,l,c,u,d,p,h,f,m;E=/\S/,l=/\"/g,c=/\n/g,u=/\r/g,d=/\\/g,p=/\u2028/,h=/\u2029/,(_=t).tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},_.scan=function(e,t){var n,r,i,o,a,s=e.length,l=0,c=null,u="",d=[],p=!1,h=0,f=0,m="{{",g="}}";function v(){0<u.length&&(d.push({tag:"_t",text:new String(u)}),u="")}function y(e,t){if(v(),e&&(()=>{for(var e=!0,t=f;t<d.length;t++)if(!(e=_.tags[d[t].tag]<_.tags._v||"_t"==d[t].tag&&null===d[t].text.match(E)))return;return e})())for(var n,r=f;r<d.length;r++)d[r].text&&((n=d[r+1])&&">"==n.tag&&(n.indent=d[r].text.toString()),d.splice(r,1));else t||d.push({tag:"\n"});p=!1,f=d.length}for(t&&(m=(t=t.split(" "))[0],g=t[1]),h=0;h<s;h++)0==l?S(m,e,h)?(--h,v(),l=1):"\n"==e.charAt(h)?y(p):u+=e.charAt(h):1==l?(h+=m.length-1,l="="==(c=(o=_.tags[e.charAt(h+1)])?e.charAt(h+1):"_v")?(a=h,r=(i=e).indexOf(n="="+g,a),m=(i=b(i.substring(i.indexOf("=",a)+1,r)).split(" "))[0],g=i[i.length-1],h=r+n.length-1,0):(o&&h++,2),p=h):S(g,e,h)?(d.push({tag:c,n:b(u),otag:m,ctag:g,i:"/"==c?p-m.length:h+g.length}),u="",h+=g.length-1,l=0,"{"==c&&("}}"==g?h++:"}"===(a=d[d.length-1]).n.substr(a.n.length-1)&&(a.n=a.n.substring(0,a.n.length-1)))):u+=e.charAt(h);return y(p,!0),d},f={_t:!0,"\n":!0,$:!0,"/":!0},_.stringify=function(e,t,n){return"{code: function (c,p,i) { "+_.wrapMain(e.code)+" },"+r(e)+"}"},m=0,_.generate=function(e,t,n){m=0;var r={code:"",subs:{},partials:{}};return _.walk(e,r),n.asString?this.stringify(r,t,n):this.makeTemplate(r,t,n)},_.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},_.template=_.Template,_.makeTemplate=function(e,t,n){var r=this.makePartials(e);return r.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(r,t,this,n)},_.makePartials=function(e){var t,n={subs:{},partials:e.partials,name:e.name};for(t in n.partials)n.partials[t]=this.makePartials(n.partials[t]);for(t in e.subs)n.subs[t]=new Function("c","p","t","i",e.subs[t]);return n},_.codegen={"#":function(e,t){t.code+="if(t.s(t."+n(e.n)+'("'+i(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',_.walk(e.nodes,t),t.code+="});c.pop();}"},"^":function(e,t){t.code+="if(!t.s(t."+n(e.n)+'("'+i(e.n)+'",c,p,1),c,p,1,0,0,"")){',_.walk(e.nodes,t),t.code+="};"},">":o,"<":function(e,t){var n={partials:{},code:"",subs:{},inPartial:!0},e=(_.walk(e.nodes,n),t.partials[o(e,t)]);e.subs=n.subs,e.partials=n.partials},$:function(e,t){var n={subs:{},code:"",partials:t.partials,prefix:e.n};_.walk(e.nodes,n),t.subs[e.n]=n.code,t.inPartial||(t.code+='t.sub("'+i(e.n)+'",c,p,i);')},"\n":function(e,t){t.code+=s('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+n(e.n)+'("'+i(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=s('"'+i(e.text)+'"')},"{":a,"&":a},_.walk=function(e,t){for(var n,r=0,i=e.length;r<i;r++)(n=_.codegen[e[r].tag])&&n(e[r],t);return t},_.parse=function(e,t,n){return function e(t,n,r,i){for(var o=[],a=null,s=null,l=r[r.length-1];0<t.length;){if(s=t.shift(),l&&"<"==l.tag&&!(s.tag in f))throw new Error("Illegal content in < super tag.");if(_.tags[s.tag]<=_.tags.$||((e,t)=>{for(var n=0,r=t.length;n<r;n++)if(t[n].o==e.n)return e.tag="#"})(s,i))r.push(s),s.nodes=e(t,s.tag,r,i);else{if("/"==s.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+s.n);if(a=r.pop(),s.n==a.n||((e,t,n)=>{for(var r=0,i=n.length;r<i;r++)if(n[r].c==e&&n[r].o==t)return 1})(s.n,a.n,i))return a.end=s.i,o;throw new Error("Nesting error: "+a.n+" vs. "+s.n)}"\n"==s.tag&&(s.last=0==t.length||"\n"==t[0].tag)}o.push(s)}if(0<r.length)throw new Error("missing closing tag: "+r.pop().n);return o}(e,0,[],(n=n||{}).sectionTags||[])},_.cache={},_.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},_.compile=function(e,t){var n=_.cacheKey(e,t=t||{}),r=this.cache[n];if(r){var i,o=r.partials;for(i in o)delete o[i].instance;return r}return r=this.generate(this.parse(this.scan(e,t.delimiters),e,t),e,t),this.cache[n]=r}}),Ie=Pe(function(e,t){function u(e,t,n){var r;return t&&"object"==typeof t&&(void 0!==t[e]?r=t[e]:n&&t.get&&"function"==typeof t.get&&(r=t.get(e))),r}function a(e){return String(null==e?"":e)}var n,r,i,o,s,l,d;(t=t).Template=function(e,t,n,r){this.r=(e=e||{}).code||this.r,this.c=n,this.options=r||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},t.Template.prototype={r:function(e,t,n){return""},v:function(e){return e=a(e),l.test(e)?e.replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"&#39;").replace(s,"&quot;"):e},t:a,render:function(e,t,n){return this.ri([e],t||{},n)},ri:function(e,t,n){return this.r(e,t,n)},ep:function(e,t){var n=this.partials[e],r=t[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[e].base=r,n.subs){for(key in t.stackText||(t.stackText={}),n.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);r=((e,t,n,r,i,o)=>{function a(){}function s(){}s.prototype=(a.prototype=e).subs;var l,c=new a;for(l in c.subs=new s,c.subsText={},c.buf="",c.stackSubs=r=r||{},c.subsText=o,t)r[l]||(r[l]=t[l]);for(l in r)c.subs[l]=r[l];for(l in c.stackPartials=i=i||{},n)i[l]||(i[l]=n[l]);for(l in i)c.partials[l]=i[l];return c})(r,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=r},rp:function(e,t,n,r){e=this.ep(e,n);return e?e.ri(t,n,r):""},rs:function(e,t,n){var r=e[e.length-1];if(d(r))for(var i=0;i<r.length;i++)e.push(r[i]),n(e,t,this),e.pop();else n(e,t,this)},s:function(e,t,n,r,i,o,a){return(!d(e)||0!==e.length)&&(n=!!(e="function"==typeof e?this.ms(e,t,n,r,i,o,a):e),!r&&n&&t&&t.push("object"==typeof e?e:t[t.length-1]),n)},d:function(e,t,n,r){var i,o=e.split("."),a=this.f(o[0],t,n,r),s=this.options.modelGet,l=null;if("."===e&&d(t[t.length-2]))a=t[t.length-1];else for(var c=1;c<o.length;c++)a=void 0!==(i=u(o[c],a,s))?(l=a,i):"";return!(r&&!a)&&(r||"function"!=typeof a||(t.push(l),a=this.mv(a,t,n),t.pop()),a)},f:function(e,t,n,r){for(var i=!1,o=!1,a=this.options.modelGet,s=t.length-1;0<=s;s--)if(void 0!==(i=u(e,t[s],a))){o=!0;break}return o?i=r||"function"!=typeof i?i:this.mv(i,t,n):!r&&""},ls:function(e,t,n,r,i){var o=this.options.delimiters;return this.options.delimiters=i,this.b(this.ct(a(e.call(t,r)),t,n)),this.options.delimiters=o,!1},ct:function(e,t,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,n)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,n,r,i,o,a){t=t[t.length-1],e=e.call(t);return"function"==typeof e?!!r||(r=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(e,t,n,r.substring(i,o),a)):e},mv:function(e,t,n){t=t[t.length-1],e=e.call(t);return"function"==typeof e?this.ct(a(e.call(t)),t,n):e},sub:function(e,t,n,r){var i=this.subs[e];i&&(this.activeSub=e,i(t,n,this,r),this.activeSub=!1)}},n=/&/g,r=/</g,i=/>/g,o=/\'/g,s=/\"/g,l=/[&<>\"\']/,d=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),Re=(Oe.Template=Ie.Template,Oe.template=Oe.Template,Oe);function Me(e){var t=e.templates,n=e.templateKey,r=e.compileOptions,i=e.helpers,o=e.data,e=e.bindEvent,t=t[n],a=F(t),s="function"===a;if("string"===a||s)return s?t(o,e):(s=function(e,t,n){var r=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length?t:void 0,o=2<arguments.length?n:void 0;return Object.keys(r).reduce(function(e,n){return M({},e,w({},n,function(){var t=this;return function(e){return r[n].call(o,e,function(e){return Re.compile(e,i).render(t)})}}))},{})}(i,r,o),Re.compile(t,r).render(M({},o,{helpers:s})).replace(/[ \n\r\t\f\xA0]+/g,function(e){return e.replace(/(^|\xA0+)[^\xA0]+/g,"$1 ")}).trim());throw new Error("Template must be 'string' or 'function', was '".concat(a,"' (key: ").concat(n,")"))}function De(e,t,n){return Array.prototype.find?e.find(t,n):e.filter(t,n)[0]}function Ne(e){return String(e).replace(/^\\-/,"-")}function ke(e,t,n,r,i){var o,a={type:t,attribute:n,name:r},s=De(4<arguments.length&&void 0!==i?i:[],function(e){return e.name===n});if("hierarchical"===t){for(var i=e.getHierarchicalFacetByName(n),l=r.split(i.separator),c=0;void 0!==s&&c<l.length;++c)(t=>{var n;s=s&&s.data&&De(Object.keys(s.data).map((n=s.data,function(e){return n[e]})),function(e){return e.name===l[t]})})(c);o=s&&s.count}else o=s&&s.data&&s.data[a.name];t=s&&s.exhaustive;return void 0!==o&&(a.count=o),void 0!==t&&(a.exhaustive=t),a}function Le(n,r,e){var e=2<arguments.length&&void 0!==e&&e,i=[],t=r.facetsRefinements,o=void 0===t?{}:t,t=r.facetsExcludes,a=void 0===t?{}:t,t=r.disjunctiveFacetsRefinements,s=void 0===t?{}:t,t=r.hierarchicalFacetsRefinements,l=void 0===t?{}:t,t=r.numericRefinements,c=void 0===t?{}:t,t=r.tagRefinements,t=void 0===t?[]:t;return Object.keys(o).forEach(function(t){o[t].forEach(function(e){i.push(ke(r,"facet",t,e,n.facets))})}),Object.keys(a).forEach(function(t){a[t].forEach(function(e){i.push({type:"exclude",attribute:t,name:e,exclude:!0})})}),Object.keys(s).forEach(function(t){s[t].forEach(function(e){i.push(ke(r,"disjunctive",t,Ne(e),n.disjunctiveFacets))})}),Object.keys(l).forEach(function(t){l[t].forEach(function(e){i.push(ke(r,"hierarchical",t,e,n.hierarchicalFacets))})}),Object.keys(c).forEach(function(n){var r=c[n];Object.keys(r).forEach(function(e){var t=e,e=r[t];(Array.isArray(e)?e:[e]).forEach(function(e){i.push({type:"numeric",attribute:n,name:"".concat(e),numericValue:e,operator:t})})})}),t.forEach(function(e){i.push({type:"tag",attribute:"_tags",name:e})}),e&&r.query&&r.query.trim()&&i.push({attribute:"query",type:"query",name:r.query,query:r.query}),i}function xe(e){var t=e.helper,e=e.attributesToClear,e=void 0===e?[]:e,n=t.state.setPage(0),n=e.reduce(function(e,t){return n.isNumericRefined(t)?e.removeNumericRefinement(t):n.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):n.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):n.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},n);return n=-1!==e.indexOf("query")?n.setQuery(""):n}function $e(e){return e="number"==typeof e&&e<0?String(e).replace(/^-/,"\\-"):e}function h(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(Object.prototype.toString.call(e).slice(8,-1),").\n\n").concat(t))}function O(){}function Ue(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function v(e){return"number"==typeof e&&isFinite(e)}function Fe(e){if("object"===F(t=e)&&null!==t&&"[object Object]"===(null===e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e))){var t;if(null===Object.getPrototypeOf(e))return 1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}}function Be(e){var t=e.start,n=void 0===t?0:t,t=e.step,t=void 0===t?1:t,r=0===t?1:t,t=Math.round((e.end-n)/r);return b(Array(t)).map(function(e,t){return n+t*r})}function Ge(e){return e!==Object(e)}function Ve(e,t){if(e===t)return 1;if(Ge(e)||Ge(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length===Object.keys(t).length){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!(i in t))return;if(!Ve(e[i],t[i]))return}return 1}}var je={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=/[&<>"']/g,Ye=RegExp(He.source);function ze(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,n){var t=(e=>{if(Array.isArray(e))for(var t=0;t<e.length;t++)if(e[t].name===n.name)return t;return-1})(e);return-1===t?e.concat(n):((e=e.slice()).splice(t,1,n),e)},e.hierarchicalFacets)})}function We(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){var e=e.setQueryParameters({hierarchicalFacetsRefinements:M({},e.hierarchicalFacetsRefinements,{},t.hierarchicalFacetsRefinements)}),e=(e=((e,t)=>0<(t=Ae([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean))).length?e.setQueryParameters({ruleContexts:t}):e)((e=ze(e,t),e=t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},e),e=e.setQueryParameters({numericRefinements:M({},e.numericRefinements,{},t.numericRefinements)}),e=e.setQueryParameters({disjunctiveFacetsRefinements:M({},e.disjunctiveFacetsRefinements,{},t.disjunctiveFacetsRefinements)}),e=e.setQueryParameters({facetsExcludes:M({},e.facetsExcludes,{},t.facetsExcludes)}),e=e.setQueryParameters({facetsRefinements:M({},e.facetsRefinements,{},t.facetsRefinements)}),t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e)),t),t.facets.reduce(function(e,t){return e.addFacet(t)},e));return t.facets,t=T(t,["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"]),e.setQueryParameters(t)})}function qe(e){return Array.isArray(e)?e:[e]}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return t=e.name,e=e.connector,["https://www.algolia.com/doc/api-reference/widgets/",t,"/js/",void 0!==e&&e?"#connector":""].join("");var t}).join(", ");return function(e){return[e,"See documentation: ".concat(r)].filter(Boolean).join("\n\n")}}var Ke=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function Qe(e){return(Array.isArray(e)?e=>{var t=D(e,1)[0],n=(t=D(void 0===t?[void 0,void 0,void 0,void 0]:t,4))[0],r=t[1],i=t[2],t=t[3];if(n&&r&&i&&t)return{northEast:{lat:n,lng:r},southWest:{lat:i,lng:t}};throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(e,"]"))}:e=>{var t=(i=D(e.split(",").map(parseFloat),4))[0],n=i[1],r=i[2],i=i[3];if(t&&n&&r&&i)return{northEast:{lat:t,lng:n},southWest:{lat:r,lng:i}};throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(e,'"'))})(e)}function Xe(e,n,r){return e.map(function(e,t){return M({},e,{__position:r*n+t+1})})}function Ze(e,t){return t?e.map(function(e){return M({},e,{__queryID:t})}):e}function Je(e){var c=e.instantSearchInstance,u=e.helper,d=e.attribute,p=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o,a=t[0],s=t[1],l=t[2],l=void 0===l?"Filter Applied":l;1===t.length&&"object"===F(t[0])?c.sendEventToInsights(t[0]):"click"!==a||2!==t.length&&3!==t.length||(i=d,o=s,(r=u).state.isHierarchicalFacet(i)?r.state.isHierarchicalFacetRefined(i,o):r.state.isConjunctiveFacet(i)?r.state.isFacetRefined(i,o):r.state.isDisjunctiveFacetRefined(i,o))||c.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:p,eventType:a,payload:{eventName:l,index:u.getIndex(),filters:["".concat(d,":").concat(JSON.stringify(s))]}})}}function et(e){var t,n,r,i,o=e.index,a=e.widgetType,e=e.args;return 1===e.length&&"object"===F(e[0])?e[0]:(t=e[0],n=e[2],!(e=e[1])||!("click"!==t&&"conversion"!==t||n)||0===(e=Array.isArray(e)?e:[e]).length?null:(r=e[0].__queryID,i=e.map(function(e){return e.objectID}),e=e.map(function(e){return e.__position}),"view"===t?{insightsMethod:"viewedObjectIDs",widgetType:a,eventType:t,payload:{eventName:n||"Hits Viewed",index:o,objectIDs:i}}:"click"===t?{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:a,eventType:t,payload:{eventName:n,index:o,queryID:r,objectIDs:i,positions:e}}:"conversion"===t?{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:a,eventType:t,payload:{eventName:n,index:o,queryID:r,objectIDs:i}}:null))}function tt(e){var i=e.instantSearchInstance,o=e.index,a=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=et({widgetType:a,index:o,methodName:"sendEvent",args:t});r&&i.sendEventToInsights(r)}}function nt(e){var i=e.index,o=e.widgetType;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=et({widgetType:o,index:i,methodName:"bindEvent",args:t});return r?"data-insights-event=".concat(btoa(JSON.stringify(r))):""}}function rt(e,n){var r,i;return e?(r=e.numericRefinements[n],i=[],Object.keys(r).filter(function(e){return Array.isArray(r[e])&&0<r[e].length}).forEach(function(t){r[t].forEach(function(e){i.push("".concat(n).concat(t).concat(e))})}),i):null}var it=c({name:"index-widget"});function ot(e){return"ais.index"===e.$$type}function at(e,t){var n=t.state,r=t.isPageReset,t=t._uiState;n!==e.state&&(e.state=n,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:r,_uiState:t}))}function st(e,n,t){t=2<arguments.length&&void 0!==t?t:{};return e.filter(function(e){return!ot(e)}).reduce(function(e,t){return t.getWidgetState?t.getWidgetState(e,n):e},t)}function lt(e,t){var n=t.initialSearchParameters,r=T(t,["initialSearchParameters"]);return e.filter(function(e){return!ot(e)}).reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,r):e},n)}function ct(e){if(void 0===e||void 0===e.indexName)throw new Error(it("The `indexName` option is required."));function o(e){return u._createURL(w({},s,st(l,{searchParameters:e,helper:p})))}var a=e.indexName,e=e.indexId,s=void 0===e?a:e,l=[],c={},u=null,d=null,p=null,h=null;return{$$type:"ais.index",getIndexName:function(){return a},getIndexId:function(){return s},getHelper:function(){return p},getResults:function(){return h&&h.lastResults},getParent:function(){return d},getWidgets:function(){return l},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(it("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(it("The widget definition expects a `render` and/or an `init` method."));return l=l.concat(e),u&&Boolean(e.length)&&(at(p,{state:lt(l,{uiState:c,initialSearchParameters:p.state}),_uiState:c}),e.forEach(function(e){u&&e.init&&e.init({helper:p,parent:t,uiState:u._initialUiState,instantSearchInstance:u,state:p.state,templatesConfig:u.templatesConfig,createURL:o})}),u.scheduleSearch()),this},removeWidgets:function(t){if(!Array.isArray(t))throw new Error(it("The `removeWidgets` method expects an array of widgets."));if(t.some(function(e){return"function"!=typeof e.dispose}))throw new Error(it("The widget definition expects a `dispose` method."));var e;return l=l.filter(function(e){return-1===t.indexOf(e)}),u&&Boolean(t.length)&&(e=t.reduce(function(e,t){return t.dispose({helper:p,state:e})||e},p.state),c=st(l,{searchParameters:e,helper:p}),p.setState(lt(l,{uiState:c,initialSearchParameters:e})),l.length)&&u.scheduleSearch(),this},init:function(e){var t=this,n=e.instantSearchInstance,r=e.uiState,i=(u=n,d=e.parent,c=r[s]||{},n.mainHelper),e=lt(l,{uiState:c,initialSearchParameters:new Ee.SearchParameters({index:a})});(p=Ee({},e.index,e)).search=function(){return n.onStateChange?(n.onStateChange({uiState:n.mainIndex.getWidgetState({}),setUiState:n.setUiState.bind(n)}),i):i.search()},p.searchWithoutTriggeringOnStateChange=function(){return i.search()},p.searchForFacetValues=function(e,t,n,r){r=p.state.setQueryParameters(r);return i.searchForFacetValues(e,t,n,r)},h=i.derive(function(){return We.apply(void 0,b((e=>{for(var t=e.getParent(),n=[e.getHelper().state];null!==t;)n=[t.getHelper().state].concat(n),t=t.getParent();return n})(t)))}),p.on("change",function(e){e.isPageReset&&!function n(e){e=e.filter(ot);0!==e.length&&e.forEach(function(e){var t=e.getHelper();at(t,{state:t.state.resetPage(),isPageReset:!0}),n(e.getWidgets())})}(l)}),h.on("search",function(){n.scheduleStalledRender()}),h.on("result",function(e){e=e.results;n.scheduleRender(),p.lastResults=e}),l.forEach(function(e){e.init&&e.init({uiState:r,helper:p,parent:t,instantSearchInstance:n,state:p.state,templatesConfig:n.templatesConfig,createURL:o})}),p.on("change",function(e){var t=e.state;c=st(l,{searchParameters:t,helper:p},e._uiState||{}),n.onStateChange||n.onInternalStateChange()})},render:function(e){var n=this,r=e.instantSearchInstance;l.forEach(function(e){var t;e.render&&h.lastResults&&e.render({helper:p,instantSearchInstance:r,results:h.lastResults,scopedResults:function n(e){return e.filter(ot).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(b(n(t.getWidgets()))))},[])}((t=(e=n).getParent())?t.getWidgets():[e]),state:h.lastResults._state,templatesConfig:r.templatesConfig,createURL:o,searchMetadata:{isSearchStalled:r._isSearchStalled}})})},dispose:function(){l.forEach(function(e){e.dispose&&e.dispose({helper:p,state:p.state})}),d=u=null,p.removeAllListeners(),p=null,h.detach(),h=null},getWidgetState:function(e){return l.filter(ot).reduce(function(e,t){return t.getWidgetState(e)},M({},e,w({},this.getIndexId(),c)))},getWidgetSearchParameters:function(e,t){t=t.uiState;return lt(l,{uiState:t,initialSearchParameters:e})},refreshUiState:function(){c=st(l,{searchParameters:this.getHelper().state,helper:this.getHelper()})}}}var ut={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},dt={highlightPreTag:"<mark>",highlightPostTag:"</mark>"};function pt(e){return((e=e)&&Ye.test(e)?e.replace(He,function(e){return je[e]}):e).replace(new RegExp(ut.highlightPreTag,"g"),dt.highlightPreTag).replace(new RegExp(ut.highlightPostTag,"g"),dt.highlightPostTag)}function ht(n){return Fe(n)&&"string"!=typeof n.value?Object.keys(n).reduce(function(e,t){return M({},e,w({},t,ht(n[t])))},{}):Array.isArray(n)?n.map(ht):M({},n,{value:pt(n.value)})}function ft(e){return void 0===e.__escaped&&((e=e.map(function(e){e=d({},e);return e._highlightResult&&(e._highlightResult=ht(e._highlightResult)),e._snippetResult&&(e._snippetResult=ht(e._snippetResult)),e})).__escaped=!0),e}function t(n){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.descendantName,e=e.modifierName,t=t?"-".concat(t):"",e=e?"--".concat(e):"";return"".concat("ais","-").concat(n).concat(t).concat(e)}}var mt=t("Highlight");function gt(e){var t=e.attribute,n=e.highlightedTagName,n=void 0===n?"mark":n,r=e.cssClasses,r=void 0===r?{}:r,e=Ue(e.hit,"_highlightResult.".concat(t,".value"))||"",t=mt({descendantName:"highlighted"})+(r.highlighted?" ".concat(r.highlighted):"");return e.replace(new RegExp(dt.highlightPreTag,"g"),"<".concat(n,' class="').concat(t,'">')).replace(new RegExp(dt.highlightPostTag,"g"),"</".concat(n,">"))}var vt=t("Snippet");function yt(e){var t=e.attribute,n=e.highlightedTagName,n=void 0===n?"mark":n,r=e.cssClasses,r=void 0===r?{}:r,e=Ue(e.hit,"_snippetResult.".concat(t,".value"))||"",t=vt({descendantName:"highlighted"})+(r.highlighted?" ".concat(r.highlighted):"");return e.replace(new RegExp(dt.highlightPreTag,"g"),"<".concat(n,' class="').concat(t,'">')).replace(new RegExp(dt.highlightPostTag,"g"),"</".concat(n,">"))}function bt(e,t){var n,r={method:e,payload:t},e=r.method,t=r.payload;if("object"!==F(t))throw new Error("The insights helper expects the payload to be an object.");try{n=btoa(JSON.stringify(t))}catch(r){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(e,'" data-insights-payload="').concat(n,'"')}function St(e){return e.configure,T(e,["configure"])}function _t(){return{stateToRoute:function(n){return Object.keys(n).reduce(function(e,t){return M({},e,w({},t,St(n[t])))},{})},routeToState:function(e){var n=0<arguments.length&&void 0!==e?e:{};return Object.keys(n).reduce(function(e,t){return M({},e,w({},t,St(n[t])))},{})}}}function Et(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n}function Ct(e,t){$t.apply(e,xt(t)?t:[t])}function wt(e){var t=e.qsModule,n=e.location,r=n.protocol,i=n.hostname,o=n.port,o=void 0===o?"":o,a=n.pathname,n=n.hash,t=t.stringify(e.routeState),e=""===o?"":":".concat(o);return(t?"".concat(r,"//").concat(i).concat(e).concat(a,"?").concat(t):"".concat(r,"//").concat(i).concat(e).concat(a)).concat(n)}function Tt(e){var t=e.qsModule,e=e.location;return t.parse(e.search.slice(1),{arrayLimit:99})}function At(e){e&&(window.document.title=e)}var Pt=Object.prototype.hasOwnProperty,Ot=Array.isArray,It=(()=>{for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Rt={arrayToObject:Et,assign:function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var l=a[s],c=o[l];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(t.push({obj:o,prop:l}),n.push(c))}for(var u=t;1<u.length;){var d=u.pop(),p=d.obj[d.prop];if(Ot(p)){for(var h=[],f=0;f<p.length;++f)void 0!==p[f]&&h.push(p[f]);d.obj[d.prop]=h}}return e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",o=0;o<r.length;++o){var a=r.charCodeAt(o);45===a||46===a||95===a||126===a||48<=a&&a<=57||65<=a&&a<=90||97<=a&&a<=122?i+=r.charAt(o):a<128?i+=It[a]:a<2048?i+=It[192|a>>6]+It[128|63&a]:a<55296||57344<=a?i+=It[224|a>>12]+It[128|a>>6&63]+It[128|63&a]:(o+=1,a=65536+((1023&a)<<10|1023&r.charCodeAt(o)),i+=It[240|a>>18]+It[128|a>>12&63]+It[128|a>>6&63]+It[128|63&a])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function r(i,o,a){if(!o)return i;if("object"!=typeof o){if(Ot(i))i.push(o);else{if(!i||"object"!=typeof i)return[i,o];(a&&(a.plainObjects||a.allowPrototypes)||!Pt.call(Object.prototype,o))&&(i[o]=!0)}return i}var e;return i&&"object"==typeof i?(Ot(e=i)&&!Ot(o)&&(e=Et(i,a)),Ot(i)&&Ot(o)?(o.forEach(function(e,t){var n;Pt.call(i,t)?(n=i[t])&&"object"==typeof n&&e&&"object"==typeof e?i[t]=r(n,e,a):i.push(e):i[t]=e}),i):Object.keys(o).reduce(function(e,t){var n=o[t];return Pt.call(e,t)?e[t]=r(e[t],n,a):e[t]=n,e},e)):[i].concat(o)}},Mt=String.prototype.replace,Dt=/%20/g,Ie={RFC1738:"RFC1738",RFC3986:"RFC3986"},Nt=Rt.assign({default:Ie.RFC3986,formatters:{RFC1738:function(e){return Mt.call(e,Dt,"+")},RFC3986:function(e){return String(e)}}},Ie),kt=Object.prototype.hasOwnProperty,Lt={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},xt=Array.isArray,$t=Array.prototype.push,Ut=Date.prototype.toISOString,Oe=Nt.default,S={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Rt.encode,encodeValuesOnly:!1,format:Oe,formatter:Nt.formatters[Oe],indices:!1,serializeDate:function(e){return Ut.call(e)},skipNulls:!1,strictNullHandling:!1},Ft=Object.prototype.hasOwnProperty,p={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Rt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Bt={formats:Nt,parse:function(e,t){var n=(e=>{if(!e)return p;if(null!=e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=(void 0===e.charset?p:e).charset;return{allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,allowPrototypes:("boolean"==typeof e.allowPrototypes?e:p).allowPrototypes,arrayLimit:("number"==typeof e.arrayLimit?e:p).arrayLimit,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:p).charsetSentinel,comma:("boolean"==typeof e.comma?e:p).comma,decoder:("function"==typeof e.decoder?e:p).decoder,delimiter:("string"==typeof e.delimiter||Rt.isRegExp(e.delimiter)?e:p).delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:p.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:("boolean"==typeof e.interpretNumericEntities?e:p).interpretNumericEntities,parameterLimit:("number"==typeof e.parameterLimit?e:p).parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:("boolean"==typeof e.plainObjects?e:p).plainObjects,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:p).strictNullHandling}})(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?((e,t)=>{var n,r,i,o,a={},e=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,l=e.split(t.delimiter,s),c=-1,u=t.charset;if(t.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?u="utf-8":"utf8=%26%2310003%3B"===l[n]&&(u="iso-8859-1"),c=n,n=l.length);for(n=0;n<l.length;++n)n!==c&&((i=(i=-1===(o=-1===(o=(i=l[n]).indexOf("]="))?i.indexOf("="):o+1)?(r=t.decoder(i,p.decoder,u),t.strictNullHandling?null:""):(r=t.decoder(i.slice(0,o),p.decoder,u),t.decoder(i.slice(o+1),p.decoder,u)))&&t.interpretNumericEntities&&"iso-8859-1"===u?i.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))}):i)&&t.comma&&-1<i.indexOf(",")&&(i=i.split(",")),Ft.call(a,r)?a[r]=Rt.combine(a[r],i):a[r]=i);return a})(e,n):e,i=n.plainObjects?Object.create(null):{},o=Object.keys(r),a=0;a<o.length;++a)var s=o[a],s=((e,t,n)=>{if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,o=0<n.depth&&/(\[[^[\]]*])/.exec(r),e=o?r.slice(0,o.index):r,a=[];if(e){if(!n.plainObjects&&Ft.call(Object.prototype,e)&&!n.allowPrototypes)return;a.push(e)}for(var s=0;0<n.depth&&null!==(o=i.exec(r))&&s<n.depth;){if(s+=1,!n.plainObjects&&Ft.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;a.push(o[1])}o&&a.push("["+r.slice(o.index)+"]");for(var l=a,c=n,u=t,d=l.length-1;0<=d;--d){var p,h,f,m=l[d];"[]"===m&&c.parseArrays?p=[].concat(u):(p=c.plainObjects?Object.create(null):{},h="["===m.charAt(0)&&"]"===m.charAt(m.length-1)?m.slice(1,-1):m,f=parseInt(h,10),c.parseArrays||""!==h?!isNaN(f)&&m!==h&&String(f)===h&&0<=f&&c.parseArrays&&f<=c.arrayLimit?(p=[])[f]=u:p[h]=u:p={0:u}),u=p}return u}})(s,r[s],n),i=Rt.merge(i,s,n);return Rt.compact(i)},stringify:function(e,t){var n=e,r=(e=>{if(!e)return S;if(null!=e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||S.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Nt.default;if(void 0!==e.format){if(!kt.call(Nt.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var n=Nt.formatters[n],r=S.filter;return"function"!=typeof e.filter&&!xt(e.filter)||(r=e.filter),{addQueryPrefix:("boolean"==typeof e.addQueryPrefix?e:S).addQueryPrefix,allowDots:void 0===e.allowDots?S.allowDots:!!e.allowDots,charset:t,charsetSentinel:("boolean"==typeof e.charsetSentinel?e:S).charsetSentinel,delimiter:(void 0===e.delimiter?S:e).delimiter,encode:("boolean"==typeof e.encode?e:S).encode,encoder:("function"==typeof e.encoder?e:S).encoder,encodeValuesOnly:("boolean"==typeof e.encodeValuesOnly?e:S).encodeValuesOnly,filter:r,formatter:n,serializeDate:("function"==typeof e.serializeDate?e:S).serializeDate,skipNulls:("boolean"==typeof e.skipNulls?e:S).skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:("boolean"==typeof e.strictNullHandling?e:S).strictNullHandling}})(t);"function"==typeof r.filter?n=(0,r.filter)("",n):xt(r.filter)&&(a=r.filter);var i=[];if("object"!=typeof n||null===n)return"";var e=t&&t.arrayFormat in Lt?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat",o=Lt[e],a=a||Object.keys(n);r.sort&&a.sort(r.sort);for(var s=0;s<a.length;++s){var l=a[s];r.skipNulls&&null===n[l]||Ct(i,function e(t,n,r,i,o,a,s,l,c,u,d,p,h){var f=t;if("function"==typeof s?f=s(n,f):f instanceof Date?f=u(f):"comma"===r&&xt(f)&&(f=f.join(",")),null===f){if(i)return a&&!p?a(n,S.encoder,h):n;f=""}if("string"==typeof f||"number"==typeof f||"boolean"==typeof f||"symbol"==typeof f||"bigint"==typeof f||Rt.isBuffer(f))return a?[d(p?n:a(n,S.encoder,h))+"="+d(a(f,S.encoder,h))]:[d(n)+"="+d(String(f))];var m,g=[];if(void 0!==f){m=xt(s)?s:(t=Object.keys(f),l?t.sort(l):t);for(var v=0;v<m.length;++v){var y=m[v];o&&null===f[y]||(xt(f)?Ct(g,e(f[y],"function"==typeof r?r(n,y):n,r,i,o,a,s,l,c,u,d,p,h)):Ct(g,e(f[y],n+(c?"."+y:"["+y+"]"),r,i,o,a,s,l,c,u,d,p,h)))}}return g}(n[l],l,o,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.formatter,r.encodeValuesOnly,r.charset))}t=i.join(r.delimiter),e=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?e+="utf8=%26%2310003%3B&":e+="utf8=%E2%9C%93&"),0<t.length?e+t:""}},Gt=(E(Vt,[{key:"read",value:function(){return this.parseURL({qsModule:Bt,location:window.location})}},{key:"write",value:function(e){var t=this,n=this.createURL(e),r=this.windowTitle&&this.windowTitle(e);this.writeTimer&&window.clearTimeout(this.writeTimer),this.writeTimer=window.setTimeout(function(){At(r),window.history.pushState(e,r||"",n),t.writeTimer=void 0},this.writeDelay)}},{key:"onUpdate",value:function(t){var n=this;this._onPopState=function(e){n.writeTimer&&(window.clearTimeout(n.writeTimer),n.writeTimer=void 0);e=e.state;t(e||n.read())},window.addEventListener("popstate",this._onPopState)}},{key:"createURL",value:function(e){return this._createURL({qsModule:Bt,routeState:e,location:window.location})}},{key:"dispose",value:function(){this._onPopState&&window.removeEventListener("popstate",this._onPopState),this.writeTimer&&window.clearTimeout(this.writeTimer),this.write({})}}]),Vt);function Vt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.windowTitle,n=e.writeDelay,n=void 0===n?400:n,r=e.createURL,r=void 0===r?wt:r,e=e.parseURL,e=void 0===e?Tt:e;_(this,Vt),w(this,"windowTitle",void 0),w(this,"writeDelay",void 0),w(this,"_createURL",void 0),w(this,"parseURL",void 0),w(this,"writeTimer",void 0),this.windowTitle=t,this.writeTimer=void 0,this.writeDelay=n,this._createURL=r,this.parseURL=e,At(this.windowTitle&&this.windowTitle(this.read()))}function jt(e){return new Gt(e)}function Ht(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.router,r=void 0===t?jt():t,t=e.stateMapping,o=void 0===t?_t():t;return function(e){var i=e.instantSearchInstance,t=(i._createURL=function(n){var e=Object.keys(n).reduce(function(e,t){return M({},e,w({},t,n[t]))},i.mainIndex.getWidgetState({})),e=o.stateToRoute(e);return r.createURL(e)},i._initialUiState=M({},i._initialUiState,{},o.routeToState(r.read())),void 0);return{onStateChange:function(e){e=e.uiState,e=o.stateToRoute(e);void 0!==t&&Ve(t,e)||(r.write(e),t=e)},subscribe:function(){r.onUpdate(function(e){var r=o.routeToState(e);!function t(e,n){n(e),e.getWidgets().filter(function(e){return"ais.index"===e.$$type}).forEach(function(e){t(e,n)})}(i.mainIndex,function(e){var t=e.getWidgets(),n=r[e.getIndexId()]||{},t=t.reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,{uiState:n}):e},e.getHelper().state);e.getHelper().overrideStateWithoutTriggeringChangeEvent(t),i.scheduleSearch()})})},unsubscribe:function(){r.dispose()}}}}var f=c({name:"instantsearch"});function Yt(){return"#"}function zt(d,e){var n=1<arguments.length&&void 0!==e?e:O;return h(d,qt()),function(i){var e=i||{},t=e.includedAttributes,o=void 0===t?[]:t,t=e.excludedAttributes,a=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;if(i.includedAttributes&&i.excludedAttributes)throw new Error(qt("The options `includedAttributes` and `excludedAttributes` cannot be used together."));function l(){return u.refine()}function c(){return u.createURL()}var u={refine:O,createURL:function(){return""}};return{$$type:"ais.clearRefinements",init:function(e){e=e.instantSearchInstance;d({hasRefinements:!1,refine:l,createURL:c,instantSearchInstance:e,widgetParams:i},!0)},render:function(e){var t=e.scopedResults,n=e.createURL,e=e.instantSearchInstance,r=t.reduce(function(e,t){return e.concat((t=(e={scopedResult:t,includedAttributes:o,excludedAttributes:a,transformItems:s}).scopedResult,n=e.includedAttributes,r=e.excludedAttributes,e=e.transformItems,i=-1!==n.indexOf("query")||-1===r.indexOf("query"),{helper:t.helper,items:e(Ae(Le(t.results,t.helper.state,i).map(function(e){return e.attribute}).filter(function(e){return 0===n.length||-1!==n.indexOf(e)}).filter(function(e){return"query"===e&&i||-1===r.indexOf(e)})))}));var n,r,i},[]);u.refine=function(){r.forEach(function(e){var t=e.helper;t.setState(xe({helper:t,attributesToClear:e.items})).search()})},u.createURL=function(){return n(We.apply(void 0,b(r.map(function(e){return xe({helper:e.helper,attributesToClear:e.items})}))))},d({hasRefinements:r.some(function(e){return 0<e.items.length}),refine:l,createURL:c,instantSearchInstance:e,widgetParams:i},!1)},dispose:function(){n()}}}}B(Kt,ue),E(Kt,[{key:"use",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.map(function(e){e=e({instantSearchInstance:t});return t.middleware.push(e),e});return this.started&&i.forEach(function(e){e.subscribe()}),this}},{key:"EXPERIMENTAL_use",value:function(){return this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(f("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(f("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(f("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(f("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var n=this;if(this.started)throw new Error(f("The `start` method has already been called once."));var r,i=Ee(this.client,this.indexName);i.search=function(){return i.searchOnlyWithDerivedHelpers()},this._searchFunction&&(r={search:function(){return new Promise(O)}},this._mainHelperSearch=i.search.bind(i),i.search=function(){var t=n.mainIndex.getHelper(),e=Ee(r,t.state.index,t.state);return e.once("search",function(e){e=e.state;t.overrideStateWithoutTriggeringChangeEvent(e),n._mainHelperSearch()}),e.on("change",function(e){e=e.state;t.setState(e)}),n._searchFunction(e),i}),i.on("error",function(e){e=e.error;n.emit("error",{error:e})}),this.mainHelper=i,this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this.middleware.forEach(function(e){e.subscribe()}),i.search(),this.helper=this.mainIndex.getHelper(),this.started=!0}},{key:"dispose",value:function(){this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),this.mainHelper.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e._isSearchStalled=!0,e.scheduleRender()},this._stalledSearchDelay))}},{key:"createURL",value:function(e){if(this.started)return this._createURL(0<arguments.length&&void 0!==e?e:{});throw new Error(f("The `start` method needs to be called before `createURL`."))}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(f("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}]);var Wt=Kt,qt=c({name:"clear-refinements",connector:!0});function Kt(e){_(this,Kt),w(A(r=G(this,C(Kt).call(this))),"client",void 0),w(A(r),"indexName",void 0),w(A(r),"insightsClient",void 0),w(A(r),"onStateChange",null),w(A(r),"helper",void 0),w(A(r),"mainHelper",void 0),w(A(r),"mainIndex",void 0),w(A(r),"started",void 0),w(A(r),"templatesConfig",void 0),w(A(r),"_stalledSearchDelay",void 0),w(A(r),"_searchStalledTimer",void 0),w(A(r),"_isSearchStalled",void 0),w(A(r),"_initialUiState",void 0),w(A(r),"_createURL",void 0),w(A(r),"_searchFunction",void 0),w(A(r),"_mainHelperSearch",void 0),w(A(r),"middleware",[]),w(A(r),"sendEventToInsights",void 0),w(A(r),"scheduleSearch",Ce(function(){r.started&&r.mainHelper.search()})),w(A(r),"scheduleRender",Ce(function(){r.mainHelper.hasPendingRequests()||(clearTimeout(r._searchStalledTimer),r._searchStalledTimer=null,r._isSearchStalled=!1),r.mainIndex.render({instantSearchInstance:A(r)}),r.emit("render")})),w(A(r),"setUiState",function(e){if(!r.mainHelper)throw new Error(f("The `start` method needs to be called before `setUiState`."));r.mainIndex.refreshUiState();var n="function"==typeof e?e(r.mainIndex.getWidgetState({})):e;!function e(t){t.getHelper().overrideStateWithoutTriggeringChangeEvent(t.getWidgetSearchParameters(t.getHelper().state,{uiState:n[t.getIndexId()]})),t.getWidgets().filter(ot).forEach(e)}(r.mainIndex),r.scheduleSearch(),r.onInternalStateChange()}),w(A(r),"onInternalStateChange",function(){var t=r.mainIndex.getWidgetState({});r.middleware.forEach(function(e){e.onStateChange({uiState:t})})});var r,n,t=e.indexName,t=void 0===t?null:t,i=e.numberLocale,o=e.initialUiState,o=void 0===o?{}:o,a=e.routing,a=void 0===a?null:a,s=e.searchFunction,l=e.stalledSearchDelay,l=void 0===l?200:l,c=e.searchClient,c=void 0===c?null:c,u=e.insightsClient,u=void 0===u?null:u,e=e.onStateChange,e=void 0===e?null:e;if(null===t)throw new Error(f("The `indexName` option is required."));if(null===c)throw new Error(f("The `searchClient` option is required."));if("function"!=typeof c.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof c.addAlgoliaAgent&&c.addAlgoliaAgent("instantsearch.js (".concat("4.8.3",")")),u&&"function"!=typeof u)throw new Error(f("The `insightsClient` option should be a function."));return r.client=c,r.insightsClient=u,r.indexName=t,r.helper=null,r.mainHelper=null,r.mainIndex=ct({indexName:t}),r.onStateChange=e,r.started=!1,r.templatesConfig={helpers:(n={numberLocale:i}.numberLocale,{formatNumber:function(e,t){return Number(t(e)).toLocaleString(n)},highlight:function(e,t){try{return t(gt(M({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},snippet:function(e,t){try{return t(yt(M({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},insights:function(e,t){try{var n=JSON.parse(e),r=n.method,i=n.payload;return t(bt(r,M({objectIDs:[this.objectID]},i)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}),compileOptions:{}},r._stalledSearchDelay=l,r._searchStalledTimer=null,r._isSearchStalled=!1,r._createURL=Yt,r._initialUiState=o,s&&(r._searchFunction=s),r.sendEventToInsights=O,a&&r.use(Ht("boolean"==typeof a?void 0:a)),r}function Qt(l,e){var n=1<arguments.length&&void 0!==e?e:O;return h(l,Xt()),function(i){if((i||{}).includedAttributes&&(i||{}).excludedAttributes)throw new Error(Xt("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var e=i||{},o=e.includedAttributes,t=e.excludedAttributes,a=void 0===t?["query"]:t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.currentRefinements",init:function(e){var t=e.helper,n=e.createURL,e=e.instantSearchInstance,r=s(Zt({results:{},helper:t,includedAttributes:o,excludedAttributes:a}));l({items:r,refine:function(e){return en(t,e)},createURL:function(e){return n(Jt(t.state,e))},instantSearchInstance:e,widgetParams:i},!0)},render:function(e){var t=e.scopedResults,n=e.helper,r=e.createURL,e=e.instantSearchInstance,t=t.reduce(function(e,t){return e.concat(s(Zt({results:t.results,helper:t.helper,includedAttributes:o,excludedAttributes:a})))},[]);l({items:t,refine:function(e){return en(n,e)},createURL:function(e){return r(Jt(n.state,e))},instantSearchInstance:e,widgetParams:i},!1)},dispose:function(){n()}}}}var Xt=c({name:"current-refinements",connector:!0});function Zt(e){var t=e.results,n=e.helper,r=e.includedAttributes,i=e.excludedAttributes,e=-1!==(r||[]).indexOf("query")||-1===(i||[]).indexOf("query"),o=r?function(e){return-1!==r.indexOf(e.attribute)}:function(e){return-1===i.indexOf(e.attribute)},a=Le(t,n.state,e).map(tn).filter(o);return a.reduce(function(e,t){return[].concat(b(e.filter(function(e){return e.attribute!==t.attribute})),[{indexName:n.state.index,attribute:t.attribute,label:t.attribute,refinements:a.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return en(n,e)}}])},[])}function Jt(e,t){switch(t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return e}}function en(e,t){e.setState(Jt(e.state,t)).search()}function tn(e){var t="numeric"===e.type?Number(e.name):e.name,n=e.operator?"".concat((e=>{switch(e){case">=":return"";case"<=":return"";default:return e}})(e.operator)," ").concat(e.name):e.name,t={attribute:e.attribute,type:e.type,value:t,label:n};return void 0!==e.operator&&(t.operator=e.operator),void 0!==e.count&&(t.count=e.count),void 0!==e.exhaustive&&(t.exhaustive=e.exhaustive),t}var nn=c({name:"hierarchical-menu",connector:!0});function rn(m){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(m,nn()),function(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=l.attributes,e=l.separator,i=void 0===e?" > ":e,e=l.rootPath,o=void 0===e?null:e,e=l.showParentLevel,a=void 0===e||e,e=l.limit,s=void 0===e?10:e,e=l.showMore,c=void 0!==e&&e,e=l.showMoreLimit,u=void 0===e?20:e,e=l.sortBy,d=void 0===e?["name:asc"]:e,e=l.transformItems,p=void 0===e?function(e){return e}:e;if(!r||!Array.isArray(r)||0===r.length)throw new Error(nn("The `attributes` option expects an array of strings."));if(!0===c&&u<=s)throw new Error(nn("The `showMoreLimit` option must be greater than `limit`."));var h,f=D(r,1)[0];return{$$type:"ais.hierarchicalMenu",isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){this.toggleShowMore()},createToggleShowMore:function(e){var t=this;return function(){t.isShowingMore=!t.isShowingMore,t.render(e)}},getLimit:function(){return this.isShowingMore?u:s},init:function(e){var t=e.helper,n=e.createURL,e=e.instantSearchInstance;h=Je({instantSearchInstance:e,helper:t,attribute:f,widgetType:this.$$type}),this.cachedToggleShowMore=this.cachedToggleShowMore.bind(this),this._refine=function(e){h("click",e),t.toggleRefinement(f,e).search()},m({items:[],createURL:function(e){return n(t.state.toggleRefinement(f,e))},refine:this._refine,sendEvent:h,instantSearchInstance:e,widgetParams:l,isShowingMore:!1,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:!1},!0)},_prepareFacetValues:function(e,r){var i=this;return e.slice(0,this.getLimit()).map(function(e){var t=e.name,n=e.path,e=T(e,["name","path"]);return Array.isArray(e.data)&&(e.data=i._prepareFacetValues(e.data,r)),M({},e,{label:t,value:n})})},render:function(e){var t=e.results,n=e.state,r=e.createURL,i=e.instantSearchInstance,t=t.getFacetValues(f,{sortBy:d}).data||[],o=p(this._prepareFacetValues(t),n),a=n.maxValuesPerFacet,s=this.getLimit(),a=s<a?t.length<=s:t.length<s;this.toggleShowMore=this.createToggleShowMore(e),m({items:o,refine:this._refine,sendEvent:h,createURL:function(e){return r(n.toggleRefinement(f,e))},instantSearchInstance:i,widgetParams:l,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:c&&(this.isShowingMore||!a)},!1)},dispose:function(e){e=e.state;return t(),e.removeHierarchicalFacet(f).setQueryParameter("maxValuesPerFacet",void 0)},getWidgetState:function(e,t){t=t.searchParameters.getHierarchicalFacetBreadcrumb(f);return t.length?M({},e,{hierarchicalMenu:M({},e.hierarchicalMenu,w({},f,t))}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,t=t.hierarchicalMenu&&t.hierarchicalMenu[f],e=(e.isHierarchicalFacet(f)&&e.getHierarchicalFacetByName(f),e.removeHierarchicalFacet(f).addHierarchicalFacet({name:f,attributes:r,separator:i,rootPath:o,showParentLevel:a})),n=e.maxValuesPerFacet||0,n=Math.max(n,c?u:s),e=e.setQueryParameter("maxValuesPerFacet",n);return t?e.addHierarchicalFacetRefinement(f,t.join(i)):e.setQueryParameters({hierarchicalFacetsRefinements:M({},e.hierarchicalFacetsRefinements,w({},f,[]))})}}}}function on(l,e){var n=1<arguments.length&&void 0!==e?e:O;return h(l,sn()),function(r){var i,o,e=r||{},t=e.escapeHTML,a=void 0===t||t,t=e.transformItems,s=void 0===t?function(e){return e}:t;return{$$type:"ais.hits",init:function(e){var t=e.instantSearchInstance,e=e.helper;i=tt({instantSearchInstance:t,index:e.getIndex(),widgetType:this.$$type}),o=nt({index:e.getIndex(),widgetType:this.$$type}),l({hits:[],results:void 0,sendEvent:i,bindEvent:o,instantSearchInstance:t,widgetParams:r},!0)},render:function(e){var t=e.results,e=e.instantSearchInstance,n=(a&&0<t.hits.length&&(t.hits=ft(t.hits)),t.hits.__escaped);t.hits=Xe(t.hits,t.page,t.hitsPerPage),t.hits=Ze(t.hits,t.queryID),t.hits=s(t.hits),t.hits.__escaped=n,i("view",t.hits),l({hits:t.hits,results:t,sendEvent:i,bindEvent:o,instantSearchInstance:e,widgetParams:r},!1)},dispose:function(e){e=e.state;return n(),a?e.setQueryParameters(Object.keys(ut).reduce(function(e,t){return M({},e,w({},t,void 0))},{})):e},getWidgetSearchParameters:function(e){return a?e.setQueryParameters(ut):e}}}}function an(e){var n,t=e.method,r=e.objectIDs,i=e.results.index,o=(n=e.hits,r.map(function(t){var e=De(n,function(e){return e.objectID===t});if(void 0===e)throw new Error('Could not find objectID "'.concat(t,'" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.'));return e})),a=(()=>{var e=Ae(o.map(function(e){return e.__queryID}));if(1<e.length)throw new Error("Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.");if("string"!=typeof(e=e[0]))throw new Error("Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\n\nSee: https://alg.li/lNiZZ7");return e})();switch(t){case"clickedObjectIDsAfterSearch":return{index:i,queryID:a,objectIDs:r,positions:o.map(function(e){return e.__position})};case"convertedObjectIDsAfterSearch":return{index:i,queryID:a,objectIDs:r};default:throw new Error('Unsupported method passed to insights: "'.concat(t,'".'))}}var sn=c({name:"hits",connector:!0});function ln(n){function r(l){return function(e,t){var r,i,o,n=e.results,a=e.hits,s=e.instantSearchInstance;return n&&a&&s?(r=s.insightsClient,i=n,o=a,l(M({},e,{insights:function(e,t){if(!r)throw n=c({name:"instantsearch"}),new Error(n("The `insightsClient` option has not been provided to `instantsearch`."));if(!Array.isArray(t.objectIDs))throw new TypeError("Expected `objectIDs` to be an array.");var n=an({method:e,results:i,hits:o,objectIDs:t.objectIDs});r(e,M({},n,{},t))}}),t)):l(e,t)}}return function(e,t){return n(r(e),t)}}var I,cn,un,dn,pn={},hn=[],fn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function mn(e,t){for(var n in t)e[n]=t[n];return e}function gn(e){var t=e.parentNode;t&&t.removeChild(e)}function k(e,t,n){var r,i,o,a,s=arguments;if(t=mn({},t),3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===t[i]&&(t[i]=e.defaultProps[i]);return a=t.key,null!=(o=t.ref)&&delete t.ref,null!=a&&delete t.key,vn(e,t,a,o)}function vn(e,t,n,r){e={type:e,props:t,key:n,ref:r,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return I.vnode&&I.vnode(e),e}function yn(e){return e.children}function R(e,t){this.props=e,this.context=t}function bn(e,t){if(null==t)return e.__p?bn(e.__p,e.__p.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?bn(e):null}function Sn(e){(e.__d||(e.__d=!0,1!==cn.push(e)))&&dn===I.debounceRendering||(dn=I.debounceRendering,(I.debounceRendering||un)(_n))}function _n(){var e,t,n,r,i,o;for(cn.sort(function(e,t){return t.__v.__b-e.__v.__b});t=cn.pop();)t.__d&&(0,r=(n=(t=t).__v).__e,i=t.__P,o=t.u,t.u=!1,i)&&(e=[],t=Pn(i,n,mn({},n),t.__n,void 0!==i.ownerSVGElement,null,e,o,null==r?bn(n):r),On(e,n),t!=r)&&function e(t){var n,r;if(null!=(t=t.__p)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(r=t.__k[n])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(n)}function En(t,n,e,r,i,o,a,s,l){var c,u,d,p,h,f,m,g=e&&e.__k||hn,v=g.length;if(s==pn&&(s=null!=o?o[0]:v?bn(e,0):null),c=0,n.__k=Cn(n.__k,function(e){if(null!=e){if(e.__p=n,e.__b=n.__b+1,null===(d=g[c])||d&&e.key==d.key&&e.type===d.type)g[c]=void 0;else for(u=0;u<v;u++){if((d=g[u])&&e.key==d.key&&e.type===d.type){g[u]=void 0;break}d=null}if(p=Pn(t,e,d=d||pn,r,i,o,a,null,s,l),(u=e.ref)&&d.ref!=u&&(m=m||[]).push(u,e.__c||p,e),null!=p){if(null==f&&(f=p),null!=e.l)p=e.l,e.l=null;else if(o==d||p!=s||null==p.parentNode){e:if(null==s||s.parentNode!==t)t.appendChild(p);else{for(h=s,u=0;(h=h.nextSibling)&&u<v;u+=2)if(h==p)break e;t.insertBefore(p,s)}"option"==n.type&&(t.value="")}s=p.nextSibling,"function"==typeof n.type&&(n.l=p)}}return c++,e}),n.__e=f,null!=o&&"function"!=typeof n.type)for(c=o.length;c--;)null!=o[c]&&gn(o[c]);for(c=v;c--;)null!=g[c]&&function e(t,n,r){var i,o,a;if(I.unmount&&I.unmount(t),(i=t.ref)&&In(i,null,n),r||"function"==typeof t.type||(r=null!=(o=t.__e)),t.__e=t.l=null,null!=(i=t.__c)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(t){I.__e(t,n)}i.base=i.__P=null}if(i=t.__k)for(a=0;a<i.length;a++)i[a]&&e(i[a],n,r);null!=o&&gn(o)}(g[c],g[c]);if(m)for(c=0;c<m.length;c++)In(m[c],m[++c],m[++c])}function Cn(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)Cn(e[r],t,n);else n.push(t?t(null==(i=e)||"boolean"==typeof i?null:"string"==typeof i||"number"==typeof i?vn(null,i,null,null):null==i.__e&&null==i.__c?i:((o=vn(i.type,i.props,i.key,null)).__e=i.__e,o)):e);var i,o;return n}function wn(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===fn.test(t)?n+"px":null==n?"":n}function Tn(e,t,n,r,i){var o,a,s,l,c;if("key"!==(t=i?"className"===t?"class":t:"class"===t?"className":t)&&"children"!==t)if("style"===t)if(o=e.style,"string"==typeof n)o.cssText=n;else{if("string"==typeof r&&(o.cssText="",r=null),r)for(a in r)n&&a in n||wn(o,a,"");if(n)for(s in n)r&&n[s]===r[s]||wn(o,s,n[s])}else"o"===t[0]&&"n"===t[1]?(l=t!==(t=t.replace(/Capture$/,"")),t=((c=t.toLowerCase())in e?c:t).slice(2),n?(r||e.addEventListener(t,An,l),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,An,l)):"list"!==t&&"tagName"!==t&&"form"!==t&&!i&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function An(e){return this.t[e.type](I.event?I.event(e):e)}function Pn(e,t,n,r,S,i,o,a,s,l){var c,u,d,p,h,f,m,g,v,y,b=t.type;if(void 0!==t.constructor)return null;(c=I.__b)&&c(t);try{e:if("function"==typeof b){if(g=t.props,v=(c=b.contextType)&&r[c.__c],y=c?v?v.props.value:c.__p:r,n.__c?m=(u=t.__c=n.__c).__p=u.__E:("prototype"in b&&b.prototype.render?t.__c=u=new b(g,y):(t.__c=u=new R(g,y),u.constructor=b,u.render=Rn),v&&v.sub(u),u.props=g,u.state||(u.state={}),u.context=y,u.__n=r,d=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=b.getDerivedStateFromProps&&mn(u.__s==u.state?u.__s=mn({},u.__s):u.__s,b.getDerivedStateFromProps(g,u.__s)),d)null==b.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&o.push(u);else{if(null==b.getDerivedStateFromProps&&null==a&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(g,y),!a&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(g,u.__s,y)){for(u.props=g,u.state=u.__s,u.__d=!1,(u.__v=t).__e=null!=s?s!==n.__e?s:n.__e:null,t.__k=n.__k,c=0;c<t.__k.length;c++)t.__k[c]&&(t.__k[c].__p=t);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(g,u.__s,y)}for(p=u.props,h=u.state,u.context=y,u.props=g,u.state=u.__s,(c=I.__r)&&c(t),u.__d=!1,u.__v=t,u.__P=e,c=u.render(u.props,u.state,u.context),t.__k=Cn(null!=c&&c.type==yn&&null==c.key?c.props.children:c),null!=u.getChildContext&&(r=mn(mn({},r),u.getChildContext())),d||null==u.getSnapshotBeforeUpdate||(f=u.getSnapshotBeforeUpdate(p,h)),En(e,t,n,r,S,i,o,s,l),u.base=t.__e;c=u.__h.pop();)u.__s&&(u.state=u.__s),c.call(u);d||null==p||null==u.componentDidUpdate||u.componentDidUpdate(p,h,f),m&&(u.__E=u.__p=null)}else t.__e=((e,t,n,r,i,o,a,s)=>{var l,c,u,d,p=n.props,h=t.props;if(i="svg"===t.type||S,null==e&&null!=o)for(l=0;l<o.length;l++)if(null!=(c=o[l])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,o[l]=null;break}if(null==e){if(null===t.type)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),o=null}if(null===t.type)p!==h&&(null!=o&&(o[o.indexOf(e)]=null),e.data=h);else if(t!==n){null!=o&&(o=hn.slice.call(e.childNodes)),u=(p=n.props||pn).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,s||!d&&!u||d&&u&&d.__html==u.__html||(e.innerHTML=d&&d.__html||"");var f,m=e,g=h,v=p,y=i,b=s;for(f in v)f in g||Tn(m,f,null,v[f],y);for(f in g)b&&"function"!=typeof g[f]||"value"===f||"checked"===f||v[f]===g[f]||Tn(m,f,g[f],v[f],y);t.__k=t.props.children,d||En(e,t,n,r,"foreignObject"!==t.type&&i,o,a,pn,s),s||("value"in h&&void 0!==h.value&&h.value!==e.value&&(e.value=null==h.value?"":h.value),"checked"in h&&void 0!==h.checked&&h.checked!==e.checked&&(e.checked=h.checked))}return e})(n.__e,t,n,r,0,i,o,l);(c=I.diffed)&&c(t)}catch(e){I.__e(e,t,n)}return t.__e}function On(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(e){I.__e(e,n.__v)}I.__c&&I.__c(t)}function In(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){I.__e(e,n)}}function Rn(e,t,n){return this.constructor(e,n)}function L(e,t,n){var r,i,o;I.__p&&I.__p(e,t),i=(r=n===kn)?null:n&&n.__k||t.__k,e=k(yn,null,[e]),o=[],Pn(t,r?t.__k=e:(n||t).__k=e,i||pn,pn,void 0!==t.ownerSVGElement,n&&!r?[n]:i?null:hn.slice.call(t.childNodes),o,!1,n||pn,r),On(o,e)}function Mn(e,t,n){for(var r=e;r&&!n(r);){if(r===t)return null;r=r.parentElement}return r}function Dn(e){return function(r){return k("div",{onClick:function(e){r.sendEvent&&(t=Mn(e.target,e.currentTarget,function(e){return e.hasAttribute("data-insights-event")}))&&(n=(()=>{var e=t.getAttribute("data-insights-event");if("string"!=typeof e)throw new Error("The insights middleware expects `data-insights-event` to be a base64-encoded JSON string.");try{return JSON.parse(atob(e))}catch(e){throw new Error("The insights middleware was unable to parse `data-insights-event`.")}})(),r.sendEvent(n));var t,n=Mn(e.target,e.currentTarget,function(e){return e.hasAttribute("data-insights-method")});n&&(n=(e=(e=>{var t=e.getAttribute("data-insights-method"),n=e.getAttribute("data-insights-payload");if("string"!=typeof n)throw new Error("The insights helper expects `data-insights-payload` to be a base64-encoded JSON string.");try{return{method:t,payload:JSON.parse(atob(n))}}catch(e){throw new Error("The insights helper was unable to parse `data-insights-payload`.")}})(n)).method,r.insights(n,e.payload))}},k(e,r))}}function Nn(u,e){var r=1<arguments.length&&void 0!==e?e:O;return h(u,Ln()),function(o){var e=o||{},t=e.items,e=e.transformItems,a=void 0===e?function(e){return e}:e,s=t;if(!Array.isArray(s))throw new Error(Ln("The `items` option expects an array of objects."));e=s.filter(function(e){return!0===e.default});if(0===e.length)throw new Error(Ln("A default value must be specified in `items`."));if(1<e.length)throw new Error(Ln("More than one default value is specified in `items`."));function l(e){var t=e.hitsPerPage;return s.map(function(e){return M({},e,{isRefined:Number(e.value)===Number(t)})})}var n=e[0],c={};return{$$type:"ais.hitsPerPage",init:function(e){var t=e.helper,n=e.createURL,r=e.state,e=e.instantSearchInstance,i=s.some(function(e){return Number(r.hitsPerPage)===Number(e.value)});c.setHitsPerPage=function(e){return(e||0===e?t.setQueryParameter("hitsPerPage",e):t.setQueryParameter("hitsPerPage",void 0)).search()},i||(s=[{value:"",label:""}].concat(b(s))),c.createURLFactory=function(t){return function(e){return n(t.setQueryParameter("hitsPerPage",e||0===e?e:void 0))}},u({items:a(l(r)),refine:c.setHitsPerPage,createURL:c.createURLFactory(t.state),hasNoResults:!0,widgetParams:o,instantSearchInstance:e},!0)},render:function(e){var t=e.state,n=e.instantSearchInstance,e=0===e.results.nbHits;u({items:a(l(t)),refine:c.setHitsPerPage,createURL:c.createURLFactory(t),hasNoResults:e,widgetParams:o,instantSearchInstance:n},!1)},dispose:function(e){e=e.state;return r(),e.setQueryParameter("hitsPerPage",void 0)},getWidgetState:function(e,t){t=t.searchParameters.hitsPerPage;return void 0===t||t===n.value?e:M({},e,{hitsPerPage:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameters({hitsPerPage:t.hitsPerPage||n.value})}}}}I={},R.prototype.setState=function(e,t){var n=this.__s!==this.state&&this.__s||(this.__s=mn({},this.state));"function"==typeof e&&!(e=e(n,this.props))||mn(n,e),null!=e&&this.__v&&(this.u=!1,t&&this.__h.push(t),Sn(this))},R.prototype.forceUpdate=function(e){this.__v&&(e&&this.__h.push(e),this.u=!0,Sn(this))},R.prototype.render=yn,cn=[],un="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dn=I.debounceRendering,I.__e=function(e,t,n){for(var r;t=t.__p;)if((r=t.__c)&&!r.__p)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(e));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(e)}return Sn(r.__E=r)}catch(t){e=t}throw e};var kn=pn,Ie=ln(on),Ln=c({name:"hits-per-page",connector:!0}),xn=c({name:"infinite-hits",connector:!0});function $n(e){e=e||{};return e.page,T(e,["page"])}function Un(n){return Object.keys(n).map(Number).sort(function(e,t){return e-t}).reduce(function(e,t){return e.concat(n[t])},[])}function Fn(y,e){var i=1<arguments.length&&void 0!==e?e:O;return h(y,xn()),function(o){function a(){return Math.min.apply(Math,b(Object.keys(v||{}).map(Number)))}function s(){return Math.max.apply(Math,b(Object.keys(v||{}).map(Number)))}function l(e){var n=0<arguments.length&&void 0!==e?e:{};return Object.keys(n).filter(function(e){return(Array.isArray(n[e])?n[e]:Object.keys(n[e])).length}).reduce(function(e,t){return e[t]=n[t],e},{})}var c,u,d,p,h,n,r,e=o||{},t=e.escapeHTML,f=void 0===t||t,t=e.transformItems,m=void 0===t?function(e){return e}:t,t=e.cache,g=void 0===t?(n=null,r=void 0,{read:function(e){e=e.state;return Ve(r,$n(e))?n:null},write:function(e){var t=e.state,e=e.hits;r=$n(t),n=e}}):t,v=void 0;return{$$type:"ais.infiniteHits",init:function(e){var t,n,r=e.instantSearchInstance,e=e.helper;u=function(){n.overrideStateWithoutTriggeringChangeEvent(M({},n.state,{page:a()-1})).searchWithoutTriggeringOnStateChange()},d=function(){t.setPage(s()+1).search()},p=tt({instantSearchInstance:r,index:(t=n=e).getIndex(),widgetType:this.$$type}),h=nt({index:e.getIndex(),widgetType:this.$$type}),y({hits:Un(g.read({state:e.state})||{}),results:void 0,sendEvent:p,bindEvent:h,showPrevious:u,showMore:d,isFirstPage:0===a()||void 0===e.state.page,isLastPage:!0,instantSearchInstance:r,widgetParams:o},!0)},render:function(e){var t=e.results,n=e.state,e=e.instantSearchInstance,r=n.page,r=void 0===r?0:r,i=T(n,["page","facets","hierarchicalFacets","disjunctiveFacets","maxValuesPerFacet"]),i=(i.facetsRefinements=l(i.facetsRefinements),i.hierarchicalFacetsRefinements=l(i.hierarchicalFacetsRefinements),i.disjunctiveFacetsRefinements=l(i.disjunctiveFacetsRefinements),i.numericRefinements=l(i.numericRefinements),Ve(i,c)||(v=g.read({state:n})||{},c=i),f&&0<t.hits.length&&(t.hits=ft(t.hits)),t.hits.__escaped),i=(t.hits=Xe(t.hits,t.page,t.hitsPerPage),t.hits=Ze(t.hits,t.queryID),t.hits=m(t.hits),t.hits.__escaped=i,void 0===(v=void 0===v?g.read({state:n})||{}:v)[r]&&(v[r]=t.hits,g.write({state:n,hits:v})),0===a()),n=t.nbPages<=s()+1;p("view",v[r]),y({hits:Un(v),results:t,sendEvent:p,bindEvent:h,showPrevious:u,showMore:d,isFirstPage:i,isLastPage:n,instantSearchInstance:e,widgetParams:o},!1)},dispose:function(e){e=e.state,i(),e=e.setQueryParameter("page",void 0);return f?e.setQueryParameters(Object.keys(ut).reduce(function(e,t){return M({},e,w({},t,void 0))},{})):e},getWidgetState:function(e,t){t=t.searchParameters.page||0;return t?M({},e,{page:t+1}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,n=e,e=(f&&(n=e.setQueryParameters(ut)),t.page?t.page-1:0);return n.setQueryParameter("page",e)}}}}var Oe=ln(Fn),Bn=c({name:"menu",connector:!0});function Gn(d){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(d,Bn()),function(){var i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=o.attribute,e=o.limit,r=void 0===e?10:e,e=o.showMore,s=void 0!==e&&e,e=o.showMoreLimit,l=void 0===e?20:e,e=o.sortBy,c=void 0===e?["isRefined","name:asc"]:e,e=o.transformItems,u=void 0===e?function(e){return e}:e;if(!a)throw new Error(Bn("The `attribute` option is required."));if(!0===s&&l<=r)throw new Error(Bn("The `showMoreLimit` option must be greater than `limit`."));return{$$type:"ais.menu",isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){this.toggleShowMore()},createToggleShowMore:function(e){var t=this,n=e.results,r=e.instantSearchInstance;return function(){t.isShowingMore=!t.isShowingMore,t.render({results:n,instantSearchInstance:r})}},getLimit:function(){return this.isShowingMore?l:r},refine:function(n){return function(e){var t=D(n.getHierarchicalFacetBreadcrumb(a),1)[0];i("click",e||t),n.toggleRefinement(a,e||t).search()}},init:function(e){var t=e.helper,n=e.createURL,e=e.instantSearchInstance;i=Je({instantSearchInstance:e,helper:t,attribute:a,widgetType:this.$$type}),this.cachedToggleShowMore=this.cachedToggleShowMore.bind(this),this._createURL=function(e){return n(t.state.toggleRefinement(a,e))},this._refine=this.refine(t),d({items:[],createURL:this._createURL,refine:this._refine,sendEvent:i,instantSearchInstance:e,canRefine:!1,widgetParams:o,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:!1},!0)},render:function(e){var t=e.results,e=e.instantSearchInstance,n=t.getFacetValues(a,{sortBy:c}),n=n&&n.data?n.data:[],r=u(n.slice(0,this.getLimit()).map(function(e){var t=e.name,n=e.path;return M({},T(e,["name","path"]),{label:t,value:n})}));this.toggleShowMore=this.createToggleShowMore({results:t,instantSearchInstance:e}),d({items:r,createURL:this._createURL,refine:this._refine,sendEvent:i,instantSearchInstance:e,canRefine:0<r.length,widgetParams:o,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,canToggleShowMore:s&&(this.isShowingMore||n.length>this.getLimit())},!1)},dispose:function(e){e=e.state;return t(),e.removeHierarchicalFacet(a).setQueryParameter("maxValuesPerFacet",void 0)},getWidgetState:function(e,t){t=D(t.searchParameters.getHierarchicalFacetBreadcrumb(a),1)[0];return t?M({},e,{menu:M({},e.menu,w({},a,t))}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,t=t.menu&&t.menu[a],e=e.removeHierarchicalFacet(a).addHierarchicalFacet({name:a,attributes:[a]}),n=e.maxValuesPerFacet||0,n=Math.max(n,s?l:r),e=e.setQueryParameter("maxValuesPerFacet",n);return t?e.addHierarchicalFacetRefinement(a,t):e.setQueryParameters({hierarchicalFacetsRefinements:M({},e.hierarchicalFacetsRefinements,w({},a,[]))})}}}}function Vn(p,e){var r=1<arguments.length&&void 0!==e?e:O;return h(p,jn()),function(i){var o,e=i||{},t=e.attribute,c=void 0===t?"":t,t=e.items,n=void 0===t?[]:t,t=e.transformItems,u=void 0===t?function(e){return e}:t;if(""===c)throw new Error(jn("The `attribute` option is required."));if(n&&0!==n.length)return o={},{$$type:Hn,init:function(e){var t,a,s,l,n=e.helper,r=e.createURL,e=e.instantSearchInstance;o.sendEvent=(a=(t={instantSearchInstance:e,helper:n,attribute:c}).instantSearchInstance,s=t.helper,l=t.attribute,function(){for(var e,t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];1!==i.length?(e=i[0],n=i[1],t=void 0===(t=i[2])?"Filter Applied":t,"click"===e&&(n=rt(zn(s.state,l,n),l))&&0<n.length&&a.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Hn,eventType:e,payload:{eventName:t,index:s.getIndex(),filters:n}})):a.sendEventToInsights(i[0])}),o.refine=function(e){var t=zn(n.state,c,e);o.sendEvent("click",e),n.setState(t).search()},o.createURL=function(t){return function(e){return r(zn(t,c,e))}},p({createURL:o.createURL(n.state),items:u(d(n.state)),hasNoResults:!0,refine:o.refine,sendEvent:o.sendEvent,instantSearchInstance:e,widgetParams:i},!0)},render:function(e){var t=e.results,n=e.state,e=e.instantSearchInstance;p({createURL:o.createURL(n),items:u(d(n)),hasNoResults:0===t.nbHits,refine:o.refine,sendEvent:o.sendEvent,instantSearchInstance:e,widgetParams:i},!1)},dispose:function(e){e=e.state;return r(),e.clearRefinements(c)},getWidgetState:function(e,t){var t=t.searchParameters.getNumericRefinements(c),n=t["="]&&t["="][0];return n||0===n?M({},e,{numericMenu:M({},e.numericMenu,w({},c,"".concat(t["="])))}):(n=t[">="]&&t[">="][0]||"",t=t["<="]&&t["<="][0]||"",""===n&&""===t?e:M({},e,{numericMenu:M({},e.numericMenu,w({},c,"".concat(n,":").concat(t)))}))},getWidgetSearchParameters:function(e,t){var n,t=t.uiState,t=t.numericMenu&&t.numericMenu[c],e=e.clearRefinements(c);return t?-1===t.indexOf(":")?e.addNumericRefinement(c,"=",Number(t)):(n=(t=D(t.split(":").map(parseFloat),2))[0],t=t[1],n=v(n)?e.addNumericRefinement(c,">=",n):e,v(t)?n.addNumericRefinement(c,"<=",t):n):e.setQueryParameters({numericRefinements:M({},e.numericRefinements,w({},c,{}))})}};throw new Error(jn("The `items` option expects an array of objects."));function d(r){return n.map(function(e){var t=e.start,n=e.end,e=e.label;return{label:e,value:window.encodeURI(JSON.stringify({start:t,end:n})),isRefined:Yn(r,c,{start:t,end:n,label:e})}})}}}var jn=c({name:"numeric-menu",connector:!0}),Hn="ais.numericMenu";function Yn(e,t,n){var r=e.getNumericRefinements(t);return void 0!==n.start&&void 0!==n.end&&n.start===n.end?Wn(r,"=",n.start):void 0!==n.start?Wn(r,">=",n.start):void 0!==n.end?Wn(r,"<=",n.end):void 0===n.start&&void 0===n.end&&Object.keys(r).every(function(e){return 0===(r[e]||[]).length})}function zn(e,t,n){var n=JSON.parse(window.decodeURI(n)),r=e.getNumericRefinements(t);if(void 0===n.start&&void 0===n.end)return e.removeNumericRefinement(t);if(Yn(e,t,n)||(e=e.removeNumericRefinement(t)),void 0!==n.start&&void 0!==n.end){if(n.start>n.end)throw new Error("option.start should be > to option.end");if(n.start===n.end)return Wn(r,"=",n.start)?e.removeNumericRefinement(t,"=",n.start):e.addNumericRefinement(t,"=",n.start)}return void 0!==n.start&&(e=Wn(r,">=",n.start)?e.removeNumericRefinement(t,">=",n.start):e.addNumericRefinement(t,">=",n.start)),"number"==typeof(e=void 0!==n.end?Wn(r,"<=",n.end)?e.removeNumericRefinement(t,"<=",n.end):e.addNumericRefinement(t,"<=",n.end):e).page&&(e.page=0),e}function Wn(e,t,n){return void 0!==e[t]&&e[t].includes(n)}E(Qn,[{key:"pages",value:function(){var e,t=this.total,n=this.currentPage,r=this.padding;return 0===t?[0]:Be((e=this.nbPagesDisplayed(r,t))===t?{end:t}:{start:n-(r=this.calculatePaddingLeft(n,r,t,e)),end:n+(e-r)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,n,r){return e<=t?e:n-t<=e?r-(n-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||0===this.total}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}]);var qn=Qn,Kn=c({name:"pagination",connector:!0});function Qn(e){_(this,Qn),this.currentPage=e.currentPage,this.total=e.total,this.padding=e.padding}function Xn(s){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(s,Kn()),function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=o.totalPages,e=o.padding,a=new qn({currentPage:0,total:0,padding:void 0===e?3:e});return{$$type:"ais.pagination",init:function(e){var t=e.helper,n=e.createURL,e=e.instantSearchInstance;this.refine=function(e){t.setPage(e),t.search()},this.createURL=function(t){return function(e){return n(t.setPage(e))}},s({createURL:this.createURL(t.state),currentRefinement:t.state.page||0,nbHits:0,nbPages:0,pages:[],isFirstPage:!0,isLastPage:!0,refine:this.refine,widgetParams:o,instantSearchInstance:e},!0)},getMaxPage:function(e){e=e.nbPages;return void 0!==t?Math.min(t,e):e},render:function(e){var t=e.results,n=e.state,e=e.instantSearchInstance,r=n.page||0,i=this.getMaxPage(t);a.currentPage=r,a.total=i,s({createURL:this.createURL(n),currentRefinement:r,refine:this.refine,nbHits:t.nbHits,nbPages:i,pages:a.pages(),isFirstPage:a.isFirstPage(),isLastPage:a.isLastPage(),widgetParams:o,instantSearchInstance:e},!1)},dispose:function(e){e=e.state;return n(),e.setQueryParameter("page",void 0)},getWidgetState:function(e,t){t=t.searchParameters.page||0;return t?M({},e,{page:t+1}):e},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.page?t.page-1:0;return e.setQueryParameter("page",t)}}}}var Zn=c({name:"range-input",connector:!0},{name:"range-slider",connector:!0});function Jn(l){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(l,Zn()),function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=i.attribute,p=i.min,h=i.max,e=i.precision,o=void 0===e?0:e,f=v(p),m=v(h);if(!d)throw new Error(Zn("The `attribute` option is required."));if(f&&m&&h<p)throw new Error(Zn("The `max` option can't be lower than `min`."));function g(e){return Number(Number(e).toFixed(o))}function c(e,t,n,r){var e=e.state,i=t.min,t=t.max,o=D(e.getNumericRefinement(d,">=")||[],1)[0],a=D(e.getNumericRefinement(d,"<=")||[],1)[0],s=void 0===n||""===n,l=void 0===r||""===r,n=s?void 0:parseFloat(n),r=l?void 0:parseFloat(r),l=m||t!==r?m&&l?h:r:void 0,s=void 0===(r=f||i!==n?f&&s?p:n:void 0),n=v(r),c=v(i),s=s||n&&(!c||i<=r),c=void 0===l,i=v(l),u=v(t);return(o!==r||a!==l)&&s&&(c||i&&(!u||l<=t))?(e=e.removeNumericRefinement(d),n&&(e=e.addNumericRefinement(d,">=",g(r))),e=i?e.addNumericRefinement(d,"<=",g(l)):e):null}function u(e,t,n,r){r=3<arguments.length&&void 0!==r?r:"Filter Applied",e=rt(e,d);e&&0<e.length&&t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:"ais.range",eventType:"click",payload:{eventName:r,index:n.getIndex(),filters:e}})}function a(a,s,l){return function(){for(var e,t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];1!==i.length?(t=i[0],n=i[1],e=i[2],"click"===t&&(n=(t=D(n,2))[0],u(c(s,l,n,t[1]),a,s,e))):a.sendEventToInsights(i[0])}}var s={from:function(e){return e},to:function(e){return g(e).toLocaleString()}};return{$$type:"ais.range",_getCurrentRange:function(e){var t=Math.pow(10,o),n=f?p:v(e.min)?e.min:0,e=m?h:v(e.max)?e.max:0;return{min:Math.floor(n*t)/t,max:Math.ceil(e*t)/t}},_getCurrentRefinement:function(e){var t=D(e.getNumericRefinement(d,">=")||[],1)[0],e=D(e.getNumericRefinement(d,"<=")||[],1)[0];return[v(t)?t:-1/0,v(e)?e:1/0]},_refine:function(n,r,i){return function(){var e=D(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],2),t=e[0],t=c(r,i,t,e[1]);t&&(u(t,n,r),r.setState(t).search())}},init:function(e){var t=e.helper,e=e.instantSearchInstance,n=this._getCurrentRange({}),r=this._getCurrentRefinement(t);l({refine:this._refine(e,t,{}),sendEvent:a(e,t,{}),format:s,range:n,widgetParams:M({},i,{precision:o}),start:r,instantSearchInstance:e},!0)},render:function(e){var t=e.results,n=e.helper,e=e.instantSearchInstance,t=De(t.disjunctiveFacets||[],function(e){return e.name===d}),t=t&&t.stats||{},t=this._getCurrentRange(t),r=this._getCurrentRefinement(n);l({refine:this._refine(e,n,t),sendEvent:a(e,n,t),format:s,range:t,widgetParams:M({},i,{precision:o}),start:r,instantSearchInstance:e},!1)},dispose:function(e){var e=e.state,t=(n(),e.removeDisjunctiveFacet(d));return t.numericRefinements=M({},e.numericRefinements,w({},d,void 0)),t},getWidgetState:function(e,t){var t=t.searchParameters.getNumericRefinements(d),n=t[">="],n=void 0===n?[]:n,t=t["<="],t=void 0===t?[]:t;return 0===n.length&&0===t.length?e:M({},e,{range:M({},e.range,w({},d,"".concat(n,":").concat(t)))})},getWidgetSearchParameters:function(e,t){var n,t=t.uiState,e=e.addDisjunctiveFacet(d).setQueryParameters({numericRefinements:M({},e.numericRefinements,w({},d,{}))}),t=(f&&(e=e.addNumericRefinement(d,">=",p)),m&&(e=e.addNumericRefinement(d,"<=",h)),t.range&&t.range[d]);return e=t&&-1!==t.indexOf(":")&&(n=(t=D(t.split(":").map(parseFloat),2))[0],t=t[1],v(n)&&(e=e.addNumericRefinement(d,">=",n)),v(t))?e.addNumericRefinement(d,"<=",t):e}}}}var er=c({name:"refinement-list",connector:!0});function tr(C){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(C,er()),function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},p=d.attribute,e=d.operator,i=void 0===e?"or":e,e=d.limit,h=void 0===e?10:e,e=d.showMore,f=void 0!==e&&e,e=d.showMoreLimit,o=void 0===e?20:e,e=d.sortBy,l=void 0===e?["isRefined","count:desc","name:asc"]:e,e=d.escapeFacetValues,u=void 0===e||e,e=d.transformItems,m=void 0===e?function(e){return e}:e;if(!p)throw new Error(er("The `attribute` option is required."));if(!/^(and|or)$/.test(i))throw new Error(er('The `operator` must one of: `"and"`, `"or"` (got "'.concat(i,'").')));if(!0===f&&o<=h)throw new Error(er("`showMoreLimit` should be greater than `limit`."));function c(e){var t=e.name;return M({},T(e,["name"]),{label:t,value:t,highlighted:t})}function g(e){return e?o:h}function v(e){var t=e.items,n=e.state,r=e.createURL,i=e.helperSpecializedSearchFacetValues,o=e.refine,a=e.isFromSearch,s=e.isFirstSearch,l=e.isShowingMore,c=e.toggleShowMore,e=e.instantSearchInstance,i=i&&i(n,r,i,o,e,l),u=l&&_.length>h||f&&!a&&!E;C({createURL:function(e){return r(n.toggleRefinement(p,e))},items:t,refine:o,searchForItems:i,instantSearchInstance:e,isFromSearch:a,canRefine:a||0<t.length,widgetParams:d,isShowingMore:l,canToggleShowMore:u,toggleShowMore:c,hasExhaustiveItems:E},s)}var y,b,S,_=[],E=!0;return{$$type:"ais.refinementList",isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){this.toggleShowMore()},createToggleShowMore:function(e){var t=this;return function(){t.isShowingMore=!t.isShowingMore,t.render(e)}},getLimit:function(){return g(this.isShowingMore)},init:function(e){var l,c,t=e.helper,n=e.createURL,e=e.instantSearchInstance;this.cachedToggleShowMore=this.cachedToggleShowMore.bind(this),S=Je({instantSearchInstance:e,helper:t,attribute:p,widgetType:this.$$type}),b=function(e){S("click",e),t.toggleRefinement(p,e).search()},l=t,c=this.cachedToggleShowMore,y=function(n,r,i,o,a,s){return function(e){var t;""===e&&_?v({items:_,state:n,createURL:r,helperSpecializedSearchFacetValues:i,refine:o,isFromSearch:!1,isFirstSearch:!1,instantSearchInstance:a,toggleShowMore:c,isShowingMore:s}):(t={highlightPreTag:(u?ut:dt).highlightPreTag,highlightPostTag:(u?ut:dt).highlightPostTag},l.searchForFacetValues(p,e,Math.min(g(s),100),t).then(function(e){e=u?e.facetHits.map(function(e){return M({},e,{highlighted:pt(e.highlighted)})}):e.facetHits;v({items:m(e.map(function(e){var t=e.value;return M({},T(e,["value"]),{value:t,label:t})})),state:n,createURL:r,helperSpecializedSearchFacetValues:i,refine:o,isFromSearch:!0,isFirstSearch:!1,instantSearchInstance:a,isShowingMore:s})}))}},v({items:[],state:t.state,createURL:n,helperSpecializedSearchFacetValues:y,refine:b,isFromSearch:!1,isFirstSearch:!0,instantSearchInstance:e,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,sendEvent:S})},render:function(e){var t=e.results,n=e.state,r=e.createURL,i=e.instantSearchInstance,t=t.getFacetValues(p,{sortBy:l})||[],o=m(t.slice(0,this.getLimit()).map(c)),a=n.maxValuesPerFacet,s=this.getLimit();E=s<a?t.length<=s:t.length<s,_=o,this.toggleShowMore=this.createToggleShowMore(e),v({items:o,state:n,createURL:r,helperSpecializedSearchFacetValues:y,refine:b,isFromSearch:!1,isFirstSearch:!1,instantSearchInstance:i,isShowingMore:this.isShowingMore,toggleShowMore:this.cachedToggleShowMore,sendEvent:S})},dispose:function(e){e=e.state,t(),e=e.setQueryParameter("maxValuesPerFacet",void 0);return"and"===i?e.removeFacet(p):e.removeDisjunctiveFacet(p)},getWidgetState:function(e,t){t=t.searchParameters,t="or"===i?t.getDisjunctiveRefinements(p):t.getConjunctiveRefinements(p);return t.length?M({},e,{refinementList:M({},e.refinementList,w({},p,t))}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,n="or"===i,t=t.refinementList&&t.refinementList[p],e=e.clearRefinements(p),e=n?e.addDisjunctiveFacet(p):e.addFacet(p),r=e.maxValuesPerFacet||0,r=Math.max(r,f?o:h),e=e.setQueryParameter("maxValuesPerFacet",r);return t?t.reduce(function(e,t){return n?e.addDisjunctiveFacetRefinement(p,t):e.addFacetRefinement(p,t)},e):e.setQueryParameters(w({},r=n?"disjunctiveFacetsRefinements":"facetsRefinements",M({},e[r],w({},p,[]))))}}}}var nr=c({name:"search-box",connector:!0});function rr(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(a,nr()),function(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=r.queryHook;function o(e){return function(){e.setQuery(""),e.search()}}return{$$type:"ais.searchBox",_clear:function(){},_cachedClear:function(){this._clear()},init:function(e){var t=e.helper,e=e.instantSearchInstance;function n(e){e!==t.state.query&&t.setQuery(e).search()}this._cachedClear=this._cachedClear.bind(this),this._clear=o(t),this._refine=function(e){i?i(e,n):n(e)},a({query:t.state.query||"",refine:this._refine,clear:this._cachedClear,widgetParams:r,instantSearchInstance:e},!0)},render:function(e){var t=e.helper,n=e.instantSearchInstance,e=e.searchMetadata;this._clear=o(t),a({query:t.state.query||"",refine:this._refine,clear:this._cachedClear,widgetParams:r,instantSearchInstance:n,isSearchStalled:e.isSearchStalled},!1)},dispose:function(e){e=e.state;return t(),e.setQueryParameter("query",void 0)},getWidgetState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:M({},e,{query:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var ir=c({name:"sort-by",connector:!0});function or(s){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(s,ir()),function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=i.items,e=i.transformItems,a=void 0===e?function(e){return e}:e;if(Array.isArray(o))return{$$type:"ais.sortBy",init:function(e){var t=e.helper,n=e.instantSearchInstance,e=e.parent,r=t.state.index;De(o,function(e){return e.value===r}),this.initialIndex=e.getIndexName(),this.setIndex=function(e){t.setIndex(e).search()},s({currentRefinement:r,options:a(o),refine:this.setIndex,hasNoResults:!0,widgetParams:i,instantSearchInstance:n},!0)},render:function(e){var t=e.helper,n=e.results,e=e.instantSearchInstance;s({currentRefinement:t.state.index,options:a(o),refine:this.setIndex,hasNoResults:0===n.nbHits,widgetParams:i,instantSearchInstance:e},!1)},dispose:function(e){e=e.state;return t(),e.setIndex(this.initialIndex)},getWidgetState:function(e,t){t=t.searchParameters.index;return t===this.initialIndex?e:M({},e,{sortBy:t})},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("index",t.sortBy||this.initialIndex||e.index)}};throw new Error(ir("The `items` option expects an array of objects."))}}var ar=c({name:"rating-menu",connector:!0}),sr="ais.ratingMenu";function lr(g){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(g,ar()),function(){var p,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},f=h.attribute,e=h.max,m=void 0===e?5:e;if(f)return{$$type:sr,init:function(e){var t,a,s,l,c,n=this,r=e.helper,i=e.createURL,e=e.instantSearchInstance;this._toggleRefinement=this._toggleRefinement.bind(this,r),this._createURL=function(t){return function(e){return i(t.toggleRefinement(f,e))}},a=(t={instantSearchInstance:e,helper:r,getRefinedStar:function(){return n._getRefinedStar(r.state)},attribute:f}).instantSearchInstance,s=t.helper,l=t.getRefinedStar,c=t.attribute,p=function(){for(var e,t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];1!==i.length?(e=i[0],t=i[1],n=void 0===(n=i[2])?"Filter Applied":n,"click"===e&&l()!==Number(t)&&a.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:sr,eventType:e,payload:{eventName:n,index:s.getIndex(),filters:["".concat(c,">=").concat(t)]}})):a.sendEventToInsights(i[0])},g({instantSearchInstance:e,items:[],hasNoResults:!0,refine:this._toggleRefinement,sendEvent:p,createURL:this._createURL(r.state),widgetParams:h},!0)},render:function(e){for(var t=e.helper,n=e.results,r=e.state,e=e.instantSearchInstance,i=[],o={},a=m;0<=a;--a)o[a]=0;(n.getFacetValues(f)||[]).forEach(function(e){var t=Math.round(e.name);if(t&&!(m<t))for(var n=t;1<=n;--n)o[n]+=e.count});for(var s=this._getRefinedStar(t.state),l=m-1;1<=l;--l){var c=o[l];if(!s||l===s||0!==c){for(var u=[],d=1;d<=m;++d)u.push(d<=l);i.push({stars:u,name:String(l),value:String(l),count:c,isRefined:s===l})}}g({instantSearchInstance:e,items:i,hasNoResults:0===n.nbHits,refine:this._toggleRefinement,sendEvent:p,createURL:this._createURL(r),widgetParams:h},!1)},dispose:function(e){e=e.state;return t(),e.removeDisjunctiveFacet(f)},getWidgetState:function(e,t){t=t.searchParameters,t=this._getRefinedStar(t);return"number"!=typeof t?e:M({},e,{ratingMenu:M({},e.ratingMenu,w({},f,t))})},getWidgetSearchParameters:function(e,t){t=t.uiState,t=t.ratingMenu&&t.ratingMenu[f],e=e.clearRefinements(f).addDisjunctiveFacet(f);return t?Be({start:Number(t),end:m+1}).reduce(function(e,t){return e.addDisjunctiveFacetRefinement(f,t)},e):e.setQueryParameters({disjunctiveFacetsRefinements:M({},e.disjunctiveFacetsRefinements,w({},f,[]))})},_toggleRefinement:function(e,t){p("click",t);var n=this._getRefinedStar(e.state)===Number(t);if(e.removeDisjunctiveFacetRefinement(f),!n)for(var r=Number(t);r<=m;++r)e.addDisjunctiveFacetRefinement(f,r);e.search()},_getRefinedStar:function(e){e=e.getDisjunctiveRefinements(f);if(e.length)return Math.min.apply(Math,b(e.map(Number)))}};throw new Error(ar("The `attribute` option is required."))}}var cr=c({name:"stats",connector:!0});function ur(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(r,cr()),function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{$$type:"ais.stats",init:function(e){var t=e.helper;r({instantSearchInstance:e.instantSearchInstance,hitsPerPage:t.state.hitsPerPage,nbHits:0,nbPages:0,page:t.state.page||0,processingTimeMS:-1,query:t.state.query||"",widgetParams:n},!0)},render:function(e){var t=e.results;r({instantSearchInstance:e.instantSearchInstance,hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:n},!1)},dispose:function(){e()}}}}var dr=c({name:"toggle-refinement",connector:!0}),pr="ais.toggleRefinement";function hr(v){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O;return h(v,dr()),function(){var d,p,h,f,m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},g=m.attribute,e=m.on,e=void 0===e||e,t=m.off;if(g)return p=void 0!==t,h=void 0!==e?qe(e).map($e):void 0,f=p?qe(t).map($e):void 0,{$$type:pr,_toggleRefinement:function(t,e){e=(1<arguments.length&&void 0!==e?e:{}).isRefined;e?(h.forEach(function(e){return t.removeDisjunctiveFacetRefinement(g,e)}),p&&f.forEach(function(e){return t.addDisjunctiveFacetRefinement(g,e)})):(d("click",e),p&&f.forEach(function(e){return t.removeDisjunctiveFacetRefinement(g,e)}),h.forEach(function(e){return t.addDisjunctiveFacetRefinement(g,e)})),t.search()},init:function(e){var a,s,l,c,t=this,n=e.state,r=e.helper,i=e.createURL,e=e.instantSearchInstance,o=(a=(o={instantSearchInstance:e,attribute:g,on:h,helper:r}).instantSearchInstance,s=o.attribute,l=o.on,c=o.helper,d=function(){for(var e,t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];1!==i.length?(e=i[0],t=i[1],n=i[2],"click"!==e||void 0===l||t||a.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:pr,eventType:e,payload:{eventName:void 0===n?"Filter Applied":n,index:c.getIndex(),filters:l.map(function(e){return"".concat(s,":").concat(JSON.stringify(e))})}})):a.sendEventToInsights(i[0])},this._createURL=function(t){return function(){var e=t?h:f,e=(e&&e.forEach(function(e){n.removeDisjunctiveFacetRefinement(g,e)}),t?f:h);return e&&e.forEach(function(e){n.addDisjunctiveFacetRefinement(g,e)}),i(n)}},this.toggleRefinement=function(e){t._toggleRefinement(r,e)},h&&h.every(function(e){return n.isDisjunctiveFacetRefined(g,e)})),u=(p&&!o&&(u=r.state.page,f&&f.forEach(function(e){return r.addDisjunctiveFacetRefinement(g,e)}),r.setPage(u)),{name:g,isRefined:o,count:null,onFacetValue:{isRefined:o,count:0},offFacetValue:{isRefined:p&&!o,count:0}});v({value:u,createURL:this._createURL(u.isRefined),refine:this.toggleRefinement,sendEvent:d,instantSearchInstance:e,widgetParams:m},!0)},render:function(e){var t=e.helper,n=e.results,r=e.state,e=e.instantSearchInstance,i=h&&h.every(function(e){return t.state.isDisjunctiveFacetRefined(g,e)}),o=qe(void 0!==f&&f),a=n.getFacetValues(g)||[],n=h&&h.map(function(t){return De(a,function(e){return e.name===Ne(t)})}).filter(function(e){return void 0!==e}),n={isRefined:0<n.length&&n.every(function(e){return e.isRefined}),count:0===n.length?null:n.reduce(function(e,t){return e+t.count},0)},o=p?o.map(function(t){return De(a,function(e){return e.name===Ne(t)})}).filter(function(e){return void 0!==e}):[],o={isRefined:0<o.length&&o.every(function(e){return e.isRefined}),count:0===o.length?a.reduce(function(e,t){return e+t.count},0):o.reduce(function(e,t){return e+t.count},0)},i={name:g,isRefined:i,count:(i?o:n).count,onFacetValue:n,offFacetValue:o};v({value:i,state:r,createURL:this._createURL(i.isRefined),refine:this.toggleRefinement,sendEvent:d,helper:t,instantSearchInstance:e,widgetParams:m},!1)},dispose:function(e){e=e.state;return n(),e.removeDisjunctiveFacet(g)},getWidgetState:function(e,t){var n=t.searchParameters,t=h&&h.every(function(e){return n.isDisjunctiveFacetRefined(g,e)});return t?M({},e,{toggle:M({},e.toggle,w({},g,t))}):e},getWidgetSearchParameters:function(e,t){var t=t.uiState,n=e.clearRefinements(g).addDisjunctiveFacet(g);return Boolean(t.toggle&&t.toggle[g])?(h&&h.forEach(function(e){n=n.addDisjunctiveFacetRefinement(g,e)}),n):p?(f&&f.forEach(function(e){n=n.addDisjunctiveFacetRefinement(g,e)}),n):n.setQueryParameters({disjunctiveFacetsRefinements:M({},e.disjunctiveFacetsRefinements,w({},g,[]))})}};throw new Error(dr("The `attribute` option is required."))}}function fr(l,e){var c=1<arguments.length&&void 0!==e?e:O,u=(h(l,mr()),{});return function(i){var o,e=i||{},t=e.attributes,n=e.separator,r=void 0===n?" > ":n,n=e.rootPath,a=void 0===n?null:n,n=e.transformItems,s=void 0===n?function(e){return e}:n;if(t&&Array.isArray(t)&&0!==t.length)return o=D(t,1)[0],{$$type:"ais.breadcrumb",init:function(e){var n=e.createURL,r=e.helper,e=e.instantSearchInstance;u.createURL=function(e){if(!e){var t=r.getHierarchicalFacetBreadcrumb(o);if(0<t.length)return n(r.state.toggleFacetRefinement(o,t[0]))}return n(r.state.toggleFacetRefinement(o,e))},u.refine=function(e){e?r.toggleRefinement(o,e).search():0<(e=r.getHierarchicalFacetBreadcrumb(o)).length&&r.toggleRefinement(o,e[0]).search()},l({createURL:u.createURL,canRefine:!1,instantSearchInstance:e,items:[],refine:u.refine,widgetParams:i},!0)},render:function(e){var n,t=e.instantSearchInstance,r=e.results,e=D(e.state.hierarchicalFacets,1)[0].name,r=r.getFacetValues(e,{}),e=Array.isArray(r.data)?r.data:[],r=s((n=function n(e){return e.reduce(function(e,t){return e=t.isRefined&&(e.push({label:t.name,value:t.path}),Array.isArray(t.data))?e.concat(n(t.data)):e},[])}(e)).map(function(e,t){return{label:e.label,value:t+1===n.length?null:n[t+1].value}}));l({canRefine:0<r.length,createURL:u.createURL,instantSearchInstance:t,items:r,refine:u.refine,widgetParams:i},!1)},dispose:function(){c()},getWidgetSearchParameters:function(e){return e.isHierarchicalFacet(o)?(e.getHierarchicalFacetByName(o),e):e.addHierarchicalFacet({name:o,attributes:t,separator:r,rootPath:a})}};throw new Error(mr("The `attributes` option expects an array of strings."))}}var mr=c({name:"breadcrumb",connector:!0});function gr(C,e){var n=1<arguments.length&&void 0!==e?e:O;return h(C,vr()),function(){function l(e){return e.aroundLatLng&&(e=>{var t=e.match(Ke);if(t)return{lat:parseFloat(t[1]),lng:parseFloat(t[2])};throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'))})(e.aroundLatLng)}function c(e){return e.insideBoundingBox&&Qe(e.insideBoundingBox)}function u(n){return function(e){var t=e.northEast,e=e.southWest,t=[t.lat,t.lng,e.lat,e.lng].join();n.setQueryParameter("insideBoundingBox",t).search(),E.hasMapMoveSinceLastRefine=!1,E.lastRefineBoundingBox=t}}function d(e){return function(){e.setQueryParameter("insideBoundingBox",void 0).search()}}function p(e){return function(){return Boolean(e.insideBoundingBox)}}function h(){return E.internalToggleRefineOnMapMove()}function f(e,t){return function(){E.isRefineOnMapMove=!E.isRefineOnMapMove,e(t)}}function m(){return E.isRefineOnMapMove}function g(){return E.internalSetMapMoveSinceLastRefine()}function v(t,n){return function(){var e=!0!==E.hasMapMoveSinceLastRefine;E.hasMapMoveSinceLastRefine=!0,e&&t(n)}}function y(){return E.hasMapMoveSinceLastRefine}var b,S=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=S.enableRefineOnMapMove,t=S.transformItems,_=void 0===t?function(e){return e}:t,E={isRefineOnMapMove:void 0===e||e,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:O,internalSetMapMoveSinceLastRefine:O};return{$$type:yr,init:function(e){var t=e.state,n=e.helper,r=e.instantSearchInstance;b=tt({instantSearchInstance:r,index:n.getIndex(),widgetType:yr}),E.internalToggleRefineOnMapMove=f(O,e),E.internalSetMapMoveSinceLastRefine=v(O,e),C({items:[],position:l(t),currentRefinement:c(t),refine:u(n),sendEvent:b,clearMapRefinement:d(n),isRefinedWithMap:p(t),toggleRefineOnMapMove:h,isRefineOnMapMove:m,setMapMoveSinceLastRefine:g,hasMapMoveSinceLastRefine:y,widgetParams:S,instantSearchInstance:r},!0)},render:function e(t){var n=t.results,r=t.helper,i=t.instantSearchInstance,o=r.state,a=Boolean(o.aroundLatLng)&&Boolean(E.lastRefinePosition)&&o.aroundLatLng!==E.lastRefinePosition,s=!o.insideBoundingBox&&Boolean(E.lastRefineBoundingBox)&&o.insideBoundingBox!==E.lastRefineBoundingBox,a=((a||s)&&(E.hasMapMoveSinceLastRefine=!1),E.lastRefinePosition=o.aroundLatLng||"",E.lastRefineBoundingBox=o.insideBoundingBox||"",E.internalToggleRefineOnMapMove=f(e,t),E.internalSetMapMoveSinceLastRefine=v(e,t),_(n.hits.filter(function(e){return e._geoloc})));b("view",a),C({items:a,position:l(o),currentRefinement:c(o),refine:u(r),sendEvent:b,clearMapRefinement:d(r),isRefinedWithMap:p(o),toggleRefineOnMapMove:h,isRefineOnMapMove:m,setMapMoveSinceLastRefine:g,hasMapMoveSinceLastRefine:y,widgetParams:S,instantSearchInstance:i},!1)},dispose:function(e){e=e.state;return n(),e.setQueryParameter("insideBoundingBox",void 0)},getWidgetState:function(e,t){t=t.searchParameters.insideBoundingBox;return!t||e&&e.geoSearch&&e.geoSearch.boundingBox===t?e:M({},e,{geoSearch:{boundingBox:t}})},getWidgetSearchParameters:function(e,t){t=t.uiState;return t&&t.geoSearch?e.setQueryParameter("insideBoundingBox",t.geoSearch.boundingBox):e.setQueryParameter("insideBoundingBox",void 0)}}}}var vr=c({name:"geo-search",connector:!0}),yr="ais.geoSearch",br=c({name:"powered-by",connector:!0});function Sr(r){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:O,o=(h(r,br()),"https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&"+"utm_content=".concat("undefined"!=typeof window&&window.location?window.location.hostname:"","&")+"utm_campaign=poweredby");return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=void 0===t?o:t;return{$$type:"ais.poweredBy",init:function(){r({url:n,widgetParams:e},!0)},render:function(){r({url:n,widgetParams:e},!1)},dispose:function(){i()}}}}var _r=c({name:"configure",connector:!0});function Er(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return M({},e,w({},t,void 0))},{}))}function Cr(e,t){var o=0<arguments.length&&void 0!==e?e:O,n=1<arguments.length&&void 0!==t?t:O;return function(r){var i;if(r&&Fe(r.searchParameters))return i={},{$$type:"ais.configure",init:function(e){var n,t=e.instantSearchInstance;i.refine=(n=e.helper,function(e){var t=We(Er(n.state,r),new Ee.SearchParameters(e));n.setState(t).search(),r.searchParameters=e}),o({refine:i.refine,instantSearchInstance:t,widgetParams:r},!0)},render:function(e){e=e.instantSearchInstance;o({refine:i.refine,instantSearchInstance:e,widgetParams:r},!1)},dispose:function(e){e=e.state;return n(),Er(e,r)},getWidgetSearchParameters:function(e,t){t=t.uiState;return We(e,new Ee.SearchParameters(M({},t.configure,{},r.searchParameters)))},getWidgetState:function(e){return M({},e,{configure:M({},e.configure,{},r.searchParameters)})}};throw new Error(_r("The `searchParameters` option expects an object."))}}var wr=c({name:"configure-related-items",connector:!0});function Tr(e){var t=e.attributeName,n=e.attributeValue,e=e.attributeScore;return"".concat(t,":").concat(n,"<score=").concat(e||1,">")}function Ar(n,r){return function(e){var t,e=e||{},o=e.hit,a=e.matchingPatterns,e=e.transformSearchParameters,e=void 0===e?function(e){return e}:e;if(!o)throw new Error(wr("The `hit` option is required."));if(a)return t=Object.keys(a).reduce(function(e,t){var n=a[t],r=Ue(o,t),i=n.score;return Array.isArray(r)?[].concat(b(e),[r.map(function(e){return Tr({attributeName:t,attributeValue:e,attributeScore:i})})]):"string"==typeof r?[].concat(b(e),[Tr({attributeName:t,attributeValue:r,attributeScore:i})]):e},[]),e=M({},e(new Ee.SearchParameters({sumOrFiltersScores:!0,facetFilters:["objectID:-".concat(o.objectID)],optionalFilters:t}))),M({},Cr(n,r)({searchParameters:e}),{$$type:"ais.configureRelatedItems"});throw new Error(wr("The `matchingPatterns` option is required."))}}var Pr=c({name:"autocomplete",connector:!0}),Or=c({name:"query-rules",connector:!0});function Ir(c,e){var u=1<arguments.length&&void 0!==e?e:O;return h(c,Or()),function(r){var e=r||{},t=e.trackedFilters,i=void 0===t?{}:t,t=e.transformRuleContexts,o=void 0===t?function(e){return e}:t,t=e.transformItems,n=void 0===t?function(e){return e}:t;Object.keys(i).forEach(function(e){if("function"!=typeof i[e])throw new Error(Or("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))});var a,s=0<Object.keys(i).length,l=[];return{$$type:"ais.queryRules",init:function(e){var t=e.helper,n=e.state,e=e.instantSearchInstance;l=n.ruleContexts||[],a=function(e){var i,o,a,t=this.helper,n=this.initialRuleContexts,r=this.trackedFilters,s=this.transformRuleContexts,l=(e=e.state).ruleContexts||[],r=(i=(r={helper:t,sharedHelperState:e,trackedFilters:r}).helper,o=r.sharedHelperState,a=r.trackedFilters,Object.keys(a).reduce(function(e,t){var n=Le(i.lastResults||{},o).filter(function(e){return e.attribute===t}).map(function(e){return e.numericValue||e.name}),r=(0,a[t])(n);return[].concat(b(e),b(n.filter(function(e){return r.includes(e)}).map(function(e){return"ais-".concat(t,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])),s=s([].concat(b(n),b(r))).slice(0,10);Ve(l,s)||t.overrideStateWithoutTriggeringChangeEvent(M({},e,{ruleContexts:s}))}.bind({helper:t,initialRuleContexts:l,trackedFilters:i,transformRuleContexts:o}),s&&(([n.disjunctiveFacetsRefinements,n.facetsRefinements,n.hierarchicalFacetsRefinements,n.numericRefinements].some(function(e){return Boolean(e&&0<Object.keys(e).length)})||Boolean(r.transformRuleContexts))&&a({state:n}),t.on("change",a)),c({items:[],instantSearchInstance:e,widgetParams:r},!0)},render:function(e){var t=e.results,e=e.instantSearchInstance,t=t.userData,t=n(void 0===t?[]:t);c({items:t,instantSearchInstance:e,widgetParams:r},!1)},dispose:function(e){var t=e.helper,e=e.state;return u(),s?(t.removeListener("change",a),e.setQueryParameter("ruleContexts",l)):e}}}}function Rr(e){function t(e){return{status:e,transcript:"",isSpeechFinal:!1,errorCode:void 0}}function n(e){m=M({},m,{},0<arguments.length&&void 0!==e?e:{}),h()}function r(e){n(t(0<arguments.length&&void 0!==e?e:"initial"))}function i(){n({status:"waiting"})}function o(e){n({status:"error",errorCode:e.error})}function a(e){n({status:"recognizing",transcript:e.results[0]&&e.results[0][0]&&e.results[0][0].transcript||"",isSpeechFinal:e.results[0]&&e.results[0].isFinal}),u&&m.transcript&&p(m.transcript)}function s(){m.errorCode||!m.transcript||u||p(m.transcript),"error"!==m.status&&n({status:"finished"})}function l(){c&&(c.stop(),c.removeEventListener("start",i),c.removeEventListener("error",o),c.removeEventListener("result",a),c.removeEventListener("end",s),c=void 0)}var c,u=e.searchAsYouSpeak,d=e.language,p=e.onQueryChange,h=e.onStateChange,f=window.webkitSpeechRecognition||window.SpeechRecognition,m=t("initial");return{getState:function(){return m},isBrowserSupported:function(){return Boolean(f)},isListening:function(){return"askingPermission"===m.status||"waiting"===m.status||"recognizing"===m.status},startListening:function(){(c=new f)&&(r("askingPermission"),c.interimResults=!0,d&&(c.lang=d),c.addEventListener("start",i),c.addEventListener("error",o),c.addEventListener("result",a),c.addEventListener("end",s),c.start())},stopListening:function(){l(),r("finished")},dispose:l}}function Mr(u,e){var r=1<arguments.length&&void 0!==e?e:O;return h(u,Dr()),function(s){function i(e){var t=e.isFirstRendering,n=e.instantSearchInstance,e=e.voiceSearchHelper,r=e.isBrowserSupported,i=e.isListening,o=e.startListening,a=e.stopListening,e=e.getState;u({isBrowserSupported:r(),isListening:i(),toggleListening:function(){r()&&(i()?a:o)()},voiceListeningState:e(),widgetParams:s,instantSearchInstance:n},t)}var e=s.searchAsYouSpeak,o=void 0!==e&&e,a=s.language,l=s.additionalQueryParameters,e=s.createVoiceSearchHelper,c=void 0===e?Rr:e;return{$$type:"ais.voiceSearch",init:function(e){var t=this,n=e.helper,r=e.instantSearchInstance;this._refine=function(e){var t;e!==n.state.query&&(t=a?[a.split("-")[0]]:void 0,n.setQueryParameter("queryLanguages",t),"function"==typeof l&&n.setState(n.state.setQueryParameters(M({ignorePlurals:!0,removeStopWords:!0,optionalWords:e},l({query:e})))),n.setQuery(e).search())},this._voiceSearchHelper=c({searchAsYouSpeak:o,language:a,onQueryChange:function(e){return t._refine(e)},onStateChange:function(){i({isFirstRendering:!1,instantSearchInstance:r,voiceSearchHelper:t._voiceSearchHelper})}}),i({isFirstRendering:!0,instantSearchInstance:r,voiceSearchHelper:this._voiceSearchHelper})},render:function(e){i({isFirstRendering:!1,instantSearchInstance:e.instantSearchInstance,voiceSearchHelper:this._voiceSearchHelper})},dispose:function(e){var t,e=e.state,n=(this._voiceSearchHelper.dispose(),r(),e);return"function"==typeof l&&(t=(t=l({query:""}))?Object.keys(t).reduce(function(e,t){return e[t]=void 0,e},{}):{},n=e.setQueryParameters(M({queryLanguages:void 0,ignorePlurals:void 0,removeStopWords:void 0,optionalWords:void 0},t))),n.setQueryParameter("query",void 0)},getWidgetState:function(e,t){t=t.searchParameters.query||"";return t?M({},e,{query:t}):e},getWidgetSearchParameters:function(e,t){t=t.uiState;return e.setQueryParameter("query",t.query||"")}}}}var Dr=c({name:"voice-search",connector:!0}),ue=Object.freeze({__proto__:null,connectClearRefinements:zt,connectCurrentRefinements:Qt,connectHierarchicalMenu:rn,connectHits:on,connectHitsWithInsights:Ie,connectHitsPerPage:Nn,connectInfiniteHits:Fn,connectInfiniteHitsWithInsights:Oe,connectMenu:Gn,connectNumericMenu:Vn,connectPagination:Xn,connectRange:Jn,connectRefinementList:tr,connectSearchBox:rr,connectSortBy:or,connectRatingMenu:lr,connectStats:ur,connectToggleRefinement:hr,connectBreadcrumb:fr,connectGeoSearch:gr,connectPoweredBy:Sr,connectConfigure:Cr,EXPERIMENTAL_connectConfigureRelatedItems:Ar,connectAutocomplete:function(l,e){var t=1<arguments.length&&void 0!==e?e:O;return h(l,Pr()),function(o){var e=(o||{}).escapeHTML,a=void 0===e||e,s={};return{$$type:"ais.autocomplete",init:function(e){var t=e.instantSearchInstance,n=e.helper;s.refine=function(e){n.setQuery(e).search()},l({widgetParams:o,currentRefinement:n.state.query||"",indices:[],refine:s.refine,instantSearchInstance:t},!0)},render:function(e){var n=this,t=e.helper,r=e.scopedResults,i=e.instantSearchInstance,e=r.map(function(e){e.results.hits=a?ft(e.results.hits):e.results.hits;var t=tt({instantSearchInstance:i,index:e.results.index,widgetType:n.$$type});return t("view",e.results.hits),{indexId:e.indexId,indexName:e.results.index,hits:e.results.hits,results:e.results,sendEvent:t}});l({widgetParams:o,currentRefinement:t.state.query||"",indices:e,refine:s.refine,instantSearchInstance:i},!1)},getWidgetState:function(e,t){t=t.searchParameters.query||"";return""===t||e&&e.query===t?e:M({},e,{query:t})},getWidgetSearchParameters:function(e,t){t={query:t.uiState.query||""};return a?e.setQueryParameters(M({},t,{},ut)):e.setQueryParameters(t)},dispose:function(e){e=e.state,t(),e=e.setQueryParameter("query",void 0);return a?e.setQueryParameters(Object.keys(ut).reduce(function(e,t){return M({},e,w({},t,void 0))},{})):e}}}},connectQueryRules:Ir,connectVoiceSearch:Mr}),x=Pe(function(e){function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var i=a.apply(null,n);i&&e.push(i)}else if("object"==r)for(var o in n)s.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}var s={}.hasOwnProperty;e.exports?e.exports=a.default=a:window.classNames=a}),g=(B(Nr,R),E(Nr,[{key:"shouldComponentUpdate",value:function(e){return!Ve(this.props.data,e.data)||this.props.templateKey!==e.templateKey||!Ve(this.props.rootProps,e.rootProps)}},{key:"render",value:function(){var e=this.props.rootTagName,t=this.props.useCustomCompileOptions[this.props.templateKey]?this.props.templatesConfig.compileOptions:{},t=Me({templates:this.props.templates,templateKey:this.props.templateKey,compileOptions:t,helpers:this.props.templatesConfig.helpers,data:this.props.data,bindEvent:this.props.bindEvent});return null===t?null:k(e,d({},this.props.rootProps,{dangerouslySetInnerHTML:{__html:t}}))}}]),Nr);function Nr(){return _(this,Nr),G(this,C(Nr).apply(this,arguments))}function kr(e){var t=e.hasRefinements,n=e.refine,r=e.cssClasses;return k("div",{className:r.root},k(g,d({},e.templateProps,{templateKey:"resetLabel",rootTagName:"button",rootProps:{className:x(r.button,w({},r.disabledButton,!t)),onClick:n,disabled:!t},data:{hasRefinements:t}})))}function Lr(e){var t=e.items,r=e.cssClasses;return k("div",{className:r.root},k("ul",{className:r.list},t.map(function(n,e){return k("li",{key:"".concat(n.indexName,"-").concat(n.attribute,"-").concat(e),className:r.item},k("span",{className:r.label},(e=n.label).toString().charAt(0).toUpperCase()+e.toString().slice(1),":"),n.refinements.map(function(e){return k("span",{key:[e.attribute,e.type,e.value,e.operator].map(function(e){return e}).filter(Boolean).join(":"),className:r.category},k("span",{className:r.categoryLabel},"query"===e.attribute?k("q",null,e.label):e.label),k("button",{className:r.delete,onClick:(t=n.refine.bind(null,e),function(e){Te(e)||(e.preventDefault(),t())})},""));var t}))})))}function xr(e,t){var n=e.items,e=e.widgetParams;t||(t=e.container,L(k(Lr,{cssClasses:e.cssClasses,items:n}),t))}function $r(e){return k("button",{className:e.className,onClick:e.onClick,disabled:e.disabled},e.children)}g.defaultProps={data:{},rootTagName:"div",useCustomCompileOptions:{},templates:{},templatesConfig:{}};var Ur={resetLabel:"Clear refinements"},Fr=c({name:"clear-refinements"}),Br=t("ClearRefinements"),Gr=c({name:"current-refinements"}),Vr=t("CurrentRefinements");function jr(e){var t=e.classNameLabel,n=e.children;return k("label",{className:t},k("input",{className:e.classNameInput,type:"checkbox",checked:e.checked,onChange:e.onToggle}),n)}function Hr(e){var t=e.cssClasses,n=e.enableRefineControl,r=e.enableClearMapRefinement,i=e.isRefineOnMapMove,o=e.isRefinedWithMap,a=e.hasMapMoveSinceLastRefine,s=e.onRefineToggle,l=e.onRefineClick,c=e.onClearClick,u=e.templateProps;return e.enableRefine&&k("div",null,n&&k("div",{className:t.control},i||!a?k(jr,{classNameLabel:x(t.label,w({},t.selectedLabel,i)),classNameInput:t.input,checked:i,onToggle:s},k(g,d({},u,{templateKey:"toggle",rootTagName:"span"}))):k($r,{className:t.redo,disabled:!a,onClick:l},k(g,d({},u,{templateKey:"redo",rootTagName:"span"})))),!n&&!i&&k("div",{className:t.control},k($r,{className:x(t.redo,w({},t.disabledRedo,!a)),disabled:!a,onClick:l},k(g,d({},u,{templateKey:"redo",rootTagName:"span"})))),r&&o&&k($r,{className:t.reset,onClick:c},k(g,d({},u,{templateKey:"reset",rootTagName:"span"}))))}function Yr(e){var t=e.refine,e=e.mapInstance;return t({northEast:e.getBounds().getNorthEast().toJSON(),southWest:e.getBounds().getSouthWest().toJSON()})}function zr(e,t){e.isUserInteraction=!1,t(),e.isUserInteraction=!0}function Wr(e,t){var n,r,i,o,a,s=e.items,l=e.position,c=e.currentRefinement,u=e.refine,d=e.clearMapRefinement,p=e.toggleRefineOnMapMove,h=e.isRefineOnMapMove,f=e.setMapMoveSinceLastRefine,m=e.hasMapMoveSinceLastRefine,g=e.isRefinedWithMap,v=e.widgetParams,e=e.instantSearchInstance,y=v.container,b=v.googleReference,S=v.cssClasses,_=v.templates,E=v.initialZoom,C=v.initialPosition,w=v.enableRefine,T=v.enableClearMapRefinement,A=v.enableRefineControl,P=v.mapOptions,O=v.createMarker,I=v.markerOptions,R=v.renderState;t?(R.isUserInteraction=!0,R.isPendingRefine=!1,R.markers=[],(v=document.createElement("div")).className=S.root,y.appendChild(v),(t=document.createElement("div")).className=S.map,v.appendChild(t),(r=document.createElement("div")).className=S.tree,v.appendChild(r),R.mapInstance=new b.maps.Map(t,M({mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,zoomControlOptions:{position:b.maps.ControlPosition.LEFT_TOP}},P)),b.maps.event.addListenerOnce(R.mapInstance,"idle",function(){function e(){R.isUserInteraction&&w&&(f(),h())&&(R.isPendingRefine=!0)}R.mapInstance.addListener("center_changed",e),R.mapInstance.addListener("zoom_changed",e),R.mapInstance.addListener("dragstart",e),R.mapInstance.addListener("idle",function(){R.isUserInteraction&&R.isPendingRefine&&(R.isPendingRefine=!1,Yr({mapInstance:R.mapInstance,refine:u}))})}),R.templateProps=N({templatesConfig:e.templatesConfig,templates:_})):(v=s.map(function(e){return e.objectID}),P=(t=D((r=R.markers,i=v,r.reduce(function(e,t){var e=D(e,2),n=e[0],e=e[1];return i.includes(t.__id)?[n.concat(t),e]:[n,e.concat(t)]},[[],[]])),2))[0],e=t[1],n=P.map(function(e){return e.__id}),_=s.filter(function(e){return!n.includes(e.objectID)}),e.forEach(function(e){return e.setMap(null)}),R.markers=P.concat(_.map(function(n){var r=O({map:R.mapInstance,item:n});return Object.keys(I.events).forEach(function(t){r.addListener(t,function(e){I.events[t]({map:R.mapInstance,event:e,item:n,marker:r})})}),r})),v=!m(),o=c?0:null,(a=!c&&Boolean(R.markers.length)?(e=>({northEast:(e=R.markers.reduce(function(e,t){return e.extend(t.getPosition())},new e.maps.LatLngBounds)).getNorthEast().toJSON(),southWest:e.getSouthWest().toJSON()}))(b):c)&&v?zr(R,function(){R.mapInstance.fitBounds(new b.maps.LatLngBounds(a.southWest,a.northEast),o)}):v&&zr(R,function(){R.mapInstance.setCenter(l||C),R.mapInstance.setZoom(E)}),L(k(Hr,{cssClasses:S,enableRefine:w,enableRefineControl:A,enableClearMapRefinement:T,isRefineOnMapMove:h(),isRefinedWithMap:g(),hasMapMoveSinceLastRefine:m(),onRefineToggle:p,onRefineClick:function(){return Yr({mapInstance:R.mapInstance,refine:u})},onClearClick:d,templateProps:R.templateProps}),y.querySelector(".".concat(S.tree))))}$r.defaultProps={disabled:!1};var qr={HTMLMarker:"<p>Your custom HTML Marker</p>",reset:"Clear the map refinement",toggle:"Search as I move the map",redo:"Redo search here"},Kr=c({name:"geo-search"}),Qr=t("GeoSearch");function Xr(e){var t=e.className,n=e.handleClick,r=e.facetValueToRefine,i=e.isRefined,o=e.subItems;return k("li",{className:t,onClick:function(e){n({facetValueToRefine:r,isRefined:i,originalEvent:e})}},k(g,d({},e.templateProps,{templateKey:e.templateKey,data:e.templateData})),o)}B(Jr,R),E(Jr,[{key:"resetInput",value:function(){this.setState({query:""})}},{key:"componentWillReceiveProps",value:function(e){this.state.focused||e.query===this.state.query||this.setState({query:e.query})}},{key:"render",value:function(){var t=this,e=this.props,n=e.cssClasses,r=e.showSubmit,i=e.showReset,o=e.showLoadingIndicator,a=e.templates,s=e.isSearchStalled;return k("div",{className:n.root},k("form",{action:"",role:"search",className:n.form,noValidate:!0,onSubmit:this.onSubmit,onReset:this.onReset},k("input",{ref:function(e){return t.input=e},value:this.state.query,disabled:this.props.disabled,className:n.input,type:"search",placeholder:e.placeholder,autoFocus:e.autofocus,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",maxLength:512,onInput:this.onInput,onBlur:this.onBlur,onFocus:this.onFocus}),k(g,{templateKey:"submit",rootTagName:"button",rootProps:{className:n.submit,type:"submit",title:"Submit the search query.",hidden:!r},templates:a,data:{cssClasses:n}}),k(g,{templateKey:"reset",rootTagName:"button",rootProps:{className:n.reset,type:"reset",title:"Clear the search query.",hidden:!(i&&this.state.query.trim()&&!s)},templates:a,data:{cssClasses:n}}),o&&k(g,{templateKey:"loadingIndicator",rootTagName:"span",rootProps:{className:n.loadingIndicator,hidden:!s},templates:a,data:{cssClasses:n}})))}}]);var Zr=Jr;function Jr(){var e,o;_(this,Jr);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(A(o=G(this,(e=C(Jr)).call.apply(e,[this].concat(n)))),"state",{query:o.props.query,focused:!1}),w(A(o),"onInput",function(e){var t=o.props,n=t.searchAsYouType,r=t.refine,t=t.onChange,i=e.target.value;n&&r(i),o.setState({query:i}),t(e)}),w(A(o),"onSubmit",function(e){var t=o.props,n=t.searchAsYouType,r=t.refine,t=t.onSubmit;return e.preventDefault(),e.stopPropagation(),o.input.blur(),n||r(o.state.query),t(e),!1}),w(A(o),"onReset",function(e){var t=o.props,n=t.refine,t=t.onReset;o.input.focus(),n(""),o.setState({query:""}),t(e)}),w(A(o),"onBlur",function(){o.setState({focused:!1})}),w(A(o),"onFocus",function(){o.setState({focused:!0})}),o}w(Zr,"defaultProps",{query:"",showSubmit:!0,showReset:!0,showLoadingIndicator:!0,autofocus:!1,searchAsYouType:!0,isSearchStalled:!1,disabled:!1,onChange:O,onSubmit:O,onReset:O,refine:O});B(ti,R),E(ti,[{key:"shouldComponentUpdate",value:function(e,t){t=this.state!==t,e=!Ve(this.props.facetValues,e.facetValues);return t||e}},{key:"refine",value:function(e,t){this.props.toggleRefinement(e,t)}},{key:"_generateFacetItem",value:function(e){var t,n=e.data&&0<e.data.length,r=(n&&((t=this.props.cssClasses).root,t=T(t,["root"]),t=k(ti,d({},this.props,{cssClasses:t,depth:this.props.depth+1,facetValues:e.data,showMore:!1,className:this.props.cssClasses.childList}))),M({},e,{url:this.props.createURL(e.value),attribute:this.props.attribute,cssClasses:this.props.cssClasses,isFromSearch:this.props.isFromSearch})),i=e.value;return void 0!==e.isRefined&&(i+="/".concat(e.isRefined)),void 0!==e.count&&(i+="/".concat(e.count)),k(Xr,{templateKey:"item",key:i,facetValueToRefine:e.value,handleClick:this.handleItemClick,isRefined:e.isRefined,className:x(this.props.cssClasses.item,(w(i={},this.props.cssClasses.selectedItem,e.isRefined),w(i,this.props.cssClasses.disabledItem,!e.count),w(i,this.props.cssClasses.parentItem,n),i)),subItems:t,templateData:r,templateProps:this.props.templateProps})}},{key:"handleItemClick",value:function(e){var t=e.facetValueToRefine,n=e.originalEvent,e=e.isRefined;if(!(Te(n)||e&&n.target.parentNode.querySelector('input[type="radio"]:checked'))){if("INPUT"!==n.target.tagName){for(var r=n.target;r!==n.currentTarget;){if("LABEL"===r.tagName&&(r.querySelector('input[type="checkbox"]')||r.querySelector('input[type="radio"]')))return;"A"===r.tagName&&r.href&&n.preventDefault(),r=r.parentNode}n.stopPropagation()}this.refine(t,e)}}},{key:"componentWillReceiveProps",value:function(e){this.searchBox&&!e.isFromSearch&&this.searchBox.resetInput()}},{key:"refineFirstValue",value:function(){var e=this.props.facetValues[0];e&&(e=e.value,this.props.toggleRefinement(e))}},{key:"render",value:function(){var t=this,e=x(this.props.cssClasses.list,w({},"".concat(this.props.cssClasses.depth).concat(this.props.depth),this.props.cssClasses.depth)),n=x(this.props.cssClasses.showMore,w({},this.props.cssClasses.disabledShowMore,!(!0===this.props.showMore&&this.props.canToggleShowMore))),n=!0===this.props.showMore&&k(g,d({},this.props.templateProps,{templateKey:"showMoreText",rootTagName:"button",rootProps:{className:n,disabled:!this.props.canToggleShowMore,onClick:this.props.toggleShowMore},data:{isShowingMore:this.props.isShowingMore}})),r=!0!==this.props.searchIsAlwaysActive&&!(this.props.isFromSearch||!this.props.hasExhaustiveItems),r=this.props.searchFacetValues&&k("div",{className:this.props.cssClasses.searchBox},k(Zr,{ref:function(e){return t.searchBox=e},placeholder:this.props.searchPlaceholder,disabled:r,cssClasses:this.props.cssClasses.searchable,templates:this.props.templateProps.templates,onChange:function(e){return t.props.searchFacetValues(e.target.value)},onReset:function(){return t.props.searchFacetValues("")},onSubmit:function(){return t.refineFirstValue()},searchAsYouType:!1})),e=this.props.facetValues&&0<this.props.facetValues.length&&k("ul",{className:e},this.props.facetValues.map(this._generateFacetItem,this)),i=this.props.searchFacetValues&&this.props.isFromSearch&&0===this.props.facetValues.length&&k(g,d({},this.props.templateProps,{templateKey:"searchableNoResults",rootProps:{className:this.props.cssClasses.noResults}}));return k("div",{className:x(this.props.cssClasses.root,w({},this.props.cssClasses.noRefinementRoot,!this.props.facetValues||0===this.props.facetValues.length),this.props.className)},this.props.children,r,e,i,n)}}]);var ei=ti;function ti(e){return _(this,ti),(e=G(this,C(ti).call(this,e))).handleItemClick=e.handleItemClick.bind(A(e)),e}ei.defaultProps={cssClasses:{},depth:0};var ni={item:'<a class="{{cssClasses.link}}" href="{{url}}"><span class="{{cssClasses.label}}">{{label}}</span><span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n  "},ri=c({name:"hierarchical-menu"}),y=t("HierarchicalMenu");function ii(e){var t=e.results,n=e.hits,r=e.bindEvent,i=e.cssClasses,o=e.templateProps;return 0===t.hits.length?k(g,d({},o,{templateKey:"empty",rootProps:{className:x(i.root,i.emptyRoot)},data:t})):k("div",{className:i.root},k("ol",{className:i.list},n.map(function(e,t){return k(g,d({},o,{templateKey:"item",rootTagName:"li",rootProps:{className:i.item},key:e.objectID,data:M({},e,{__hitIndex:t}),bindEvent:r}))})))}ii.defaultProps={results:{hits:[]},hits:[]};var oi={empty:"No results",item:function(e){return JSON.stringify(e,null,2)}},ai=c({name:"hits"}),si=t("Hits"),li=Dn(ii);function ci(e){var t=e.currentValue,n=e.options,r=e.cssClasses,i=e.setValue;return k("select",{className:x(r.select),onChange:function(e){return i(e.target.value)},value:"".concat(t)},n.map(function(e){return k("option",{className:x(r.option),key:e.label+e.value,value:"".concat(e.value)},e.label)}))}var ui=c({name:"hits-per-page"}),di=t("HitsPerPage"),pi={empty:"No results",showPreviousText:"Show previous results",showMoreText:"Show more results",item:function(e){return JSON.stringify(e,null,2)}},hi=c({name:"infinite-hits"}),fi=t("InfiniteHits"),mi=Dn(function(e){var t=e.results,n=e.hits,r=e.bindEvent,i=e.hasShowPrevious,o=e.showPrevious,a=e.showMore,s=e.isFirstPage,l=e.isLastPage,c=e.cssClasses,u=e.templateProps;return 0===t.hits.length?k(g,d({},u,{templateKey:"empty",rootProps:{className:x(c.root,c.emptyRoot)},data:t})):k("div",{className:c.root},i&&k(g,d({},u,{templateKey:"showPreviousText",rootTagName:"button",rootProps:{className:x(c.loadPrevious,w({},c.disabledLoadPrevious,s)),disabled:s,onClick:o}})),k("ol",{className:c.list},n.map(function(e,t){return k(g,d({},u,{templateKey:"item",rootTagName:"li",rootProps:{className:c.item},key:e.objectID,data:M({},e,{__hitIndex:t}),bindEvent:r}))})),k(g,d({},u,{templateKey:"showMoreText",rootTagName:"button",rootProps:{className:x(c.loadMore,w({},c.disabledLoadMore,l)),disabled:l,onClick:a}})))}),gi={item:'<a class="{{cssClasses.link}}" href="{{url}}"><span class="{{cssClasses.label}}">{{label}}</span><span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span></a>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n  "},vi=c({name:"menu"}),yi=t("Menu"),bi={reset:'\n<svg class="{{cssClasses.resetIcon}}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="10" height="10">\n  <path d="M8.114 10L.944 2.83 0 1.885 1.886 0l.943.943L10 8.113l7.17-7.17.944-.943L20 1.886l-.943.943-7.17 7.17 7.17 7.17.943.944L18.114 20l-.943-.943-7.17-7.17-7.17 7.17-.944.943L0 18.114l.943-.943L8.113 10z"></path>\n</svg>\n  ',submit:'\n<svg class="{{cssClasses.submitIcon}}" xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 40 40">\n  <path d="M26.804 29.01c-2.832 2.34-6.465 3.746-10.426 3.746C7.333 32.756 0 25.424 0 16.378 0 7.333 7.333 0 16.378 0c9.046 0 16.378 7.333 16.378 16.378 0 3.96-1.406 7.594-3.746 10.426l10.534 10.534c.607.607.61 1.59-.004 2.202-.61.61-1.597.61-2.202.004L26.804 29.01zm-10.426.627c7.323 0 13.26-5.936 13.26-13.26 0-7.32-5.937-13.257-13.26-13.257C9.056 3.12 3.12 9.056 3.12 16.378c0 7.323 5.936 13.26 13.258 13.26z"></path>\n</svg>\n  ',loadingIndicator:'\n<svg class="{{cssClasses.loadingIcon}}" width="16" height="16" viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg" stroke="#444">\n  <g fill="none" fillRule="evenodd">\n    <g transform="translate(1 1)" strokeWidth="2">\n      <circle strokeOpacity=".5" cx="18" cy="18" r="18" />\n      <path d="M36 18c0-9.94-8.06-18-18-18">\n        <animateTransform\n          attributeName="transform"\n          type="rotate"\n          from="0 18 18"\n          to="360 18 18"\n          dur="1s"\n          repeatCount="indefinite"\n        />\n      </path>\n    </g>\n  </g>\n</svg>\n  '},Si={item:'<label class="{{cssClasses.label}}">\n  <input type="checkbox"\n         class="{{cssClasses.checkbox}}"\n         value="{{value}}"\n         {{#isRefined}}checked{{/isRefined}} />\n  <span class="{{cssClasses.labelText}}">{{#isFromSearch}}{{{highlighted}}}{{/isFromSearch}}{{^isFromSearch}}{{highlighted}}{{/isFromSearch}}</span>\n  <span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>\n</label>',showMoreText:"\n    {{#isShowingMore}}\n      Show less\n    {{/isShowingMore}}\n    {{^isShowingMore}}\n      Show more\n    {{/isShowingMore}}\n    ",searchableNoResults:"No results",searchableReset:bi.reset,searchableSubmit:bi.submit,searchableLoadingIndicator:bi.loadingIndicator},_i=c({name:"refinement-list"}),$=t("RefinementList"),Ei=t("SearchBox"),Ci={item:'<label class="{{cssClasses.label}}">\n  <input type="radio" class="{{cssClasses.radio}}" name="{{attribute}}"{{#isRefined}} checked{{/isRefined}} />\n  <span class="{{cssClasses.labelText}}">{{label}}</span>\n</label>'},wi=c({name:"numeric-menu"}),Ti=t("NumericMenu");function Ai(e){var t=e.cssClasses,n=e.label,r=e.ariaLabel,i=e.url,o=e.handleClick,a=e.pageNumber;return k("li",{className:t.item},e.isDisabled?k("span",{className:t.link,dangerouslySetInnerHTML:{__html:n}}):k("a",{className:t.link,"aria-label":r,href:i,onClick:function(e){return o(a,e)},dangerouslySetInnerHTML:{__html:n}}))}B(Oi,R),E(Oi,[{key:"pageLink",value:function(e){var t=e.label,n=e.ariaLabel,r=e.pageNumber,i=e.additionalClassName,o=e.isDisabled,o=void 0!==o&&o,a=e.isSelected,a=void 0!==a&&a,e=e.createURL,i={item:x(this.props.cssClasses.item,void 0===i?null:i),link:this.props.cssClasses.link},a=(o?i.item=x(i.item,this.props.cssClasses.disabledItem):a&&(i.item=x(i.item,this.props.cssClasses.selectedItem)),e&&!o?e(r):"#");return k(Ai,{ariaLabel:n,cssClasses:i,handleClick:this.handleClick,isDisabled:o,key:t+r+n,label:t,pageNumber:r,url:a})}},{key:"previousPageLink",value:function(e){var t=e.isFirstPage;return this.pageLink({ariaLabel:"Previous",additionalClassName:this.props.cssClasses.previousPageItem,isDisabled:t,label:this.props.templates.previous,pageNumber:e.currentPage-1,createURL:e.createURL})}},{key:"nextPageLink",value:function(e){var t=e.isLastPage;return this.pageLink({ariaLabel:"Next",additionalClassName:this.props.cssClasses.nextPageItem,isDisabled:t,label:this.props.templates.next,pageNumber:e.currentPage+1,createURL:e.createURL})}},{key:"firstPageLink",value:function(e){var t=e.isFirstPage;return this.pageLink({ariaLabel:"First",additionalClassName:this.props.cssClasses.firstPageItem,isDisabled:t,label:this.props.templates.first,pageNumber:0,createURL:e.createURL})}},{key:"lastPageLink",value:function(e){var t=e.isLastPage;return this.pageLink({ariaLabel:"Last",additionalClassName:this.props.cssClasses.lastPageItem,isDisabled:t,label:this.props.templates.last,pageNumber:e.nbPages-1,createURL:e.createURL})}},{key:"pages",value:function(e){var t=this,n=e.currentPage,r=e.pages,i=e.createURL;return r.map(function(e){return t.pageLink({ariaLabel:e+1,additionalClassName:t.props.cssClasses.pageItem,isSelected:e===n,label:e+1,pageNumber:e,createURL:i})})}},{key:"render",value:function(){return k("div",{className:x(this.props.cssClasses.root,w({},this.props.cssClasses.noRefinementRoot,this.props.nbPages<=1))},k("ul",{className:this.props.cssClasses.list},this.props.showFirst&&this.firstPageLink(this.props),this.props.showPrevious&&this.previousPageLink(this.props),this.pages(this.props),this.props.showNext&&this.nextPageLink(this.props),this.props.showLast&&this.lastPageLink(this.props)))}}]);var Pi=Oi;function Oi(){var e,n;_(this,Oi);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return w(A(n=G(this,(e=C(Oi)).call.apply(e,[this].concat(r)))),"handleClick",function(e,t){Te(t)||(t.preventDefault(),n.props.setCurrentPage(e))}),n}Pi.defaultProps={nbHits:0,currentPage:0,nbPages:0};var Ii=c({name:"pagination"}),U=t("Pagination"),Ri={previous:"",next:"",first:"",last:""},Mi=(B(ki,R),E(ki,[{key:"componentWillReceiveProps",value:function(e){this.setState({min:e.values.min,max:e.values.max})}},{key:"render",value:function(){var e=this.state,t=e.min,e=e.max,n=this.props,r=n.min,i=n.max,o=n.step,a=n.cssClasses,n=n.templateProps,s=i<=r,l=Boolean(t||e);return k("div",{className:x(a.root,w({},a.noRefinement,!l))},k("form",{className:a.form,onSubmit:this.onSubmit},k("label",{className:a.label},k("input",{className:x(a.input,a.inputMin),type:"number",min:r,max:i,step:o,value:null!=t?t:"",onInput:this.onInput("min"),placeholder:r,disabled:s})),k(g,d({},n,{templateKey:"separatorText",rootTagName:"span",rootProps:{className:a.separator}})),k("label",{className:a.label},k("input",{className:x(a.input,a.inputMax),type:"number",min:r,max:i,step:o,value:null!=e?e:"",onInput:this.onInput("max"),placeholder:i,disabled:s})),k(g,d({},n,{templateKey:"submitText",rootTagName:"button",rootProps:{type:"submit",className:a.submit,disabled:s}}))))}}]),ki),Di=c({name:"range-input"}),Ni=t("RangeInput");function ki(e){var n;return _(this,ki),w(A(n=G(this,C(ki).call(this,e))),"onInput",function(t){return function(e){n.setState(w({},t,e.currentTarget.value))}}),w(A(n),"onSubmit",function(e){e.preventDefault(),n.props.refine([n.state.min&&Number(n.state.min),n.state.max&&Number(n.state.max)])}),n.state={min:e.values.min,max:e.values.max},n}var Li=c({name:"search-box"}),xi=t("SearchBox");function $i(e,t,n){return(e-t)/(n-t)*100}function Ui(e,t,n){return 0===e?t:100===e?n:Math.round((n-t)*(e/100)+t)}function Fi(e){return["rheostat","vertical"===e.orientation?"rheostat-vertical":"rheostat-horizontal"].concat(e.className.split(" ")).join(" ")}function Bi(e){return Number(e.currentTarget.getAttribute("data-handle-key"))}function Gi(e){e.stopPropagation(),e.preventDefault()}B(Yi,R),E(Yi,[{key:"render",value:function(){return k("button",d({},this.props,{type:"button"}))}}]);var Ie=Yi,Vi=k("div",{className:"rheostat-background"}),ji=(B(Hi,R),E(Hi,[{key:"componentWillReceiveProps",value:function(n){var e=this.props,t=e.className,r=e.disabled,i=e.orientation,o=this.state,a=o.values,o=o.slidingIndex,e=n.min!==e.min||n.max!==e.max,a=a.length!==n.values.length||a.some(function(e,t){return n.values[t]!==e}),t=n.className!==t||n.orientation!==i,i=n.disabled&&!r;t&&this.setState({className:Fi(n)}),(e||a)&&this.updateNewValues(n),i&&null!==o&&this.endSlide()}},{key:"getPublicState",value:function(){var e=this.props,t=e.min;return{max:e.max,min:t,values:this.state.values}}},{key:"getSliderBoundingBox",value:function(){var e=this.rheostat.getDOMNode?this.rheostat.getDOMNode():this.rheostat,t=e.getBoundingClientRect();return{height:t.height||e.clientHeight,left:t.left,top:t.top,width:t.width||e.clientWidth}}},{key:"getProgressStyle",value:function(e){var t=this.state.handlePos,n=t[e];return 0===e?"vertical"===this.props.orientation?{height:"".concat(n,"%"),top:0}:{left:0,width:"".concat(n,"%")}:(t=n-(n=t[e-1]),"vertical"===this.props.orientation?{height:"".concat(t,"%"),top:"".concat(n,"%")}:{left:"".concat(n,"%"),width:"".concat(t,"%")})}},{key:"getMinValue",value:function(e){return this.state.values[e-1]?Math.max(this.props.min,this.state.values[e-1]):this.props.min}},{key:"getMaxValue",value:function(e){return this.state.values[e+1]?Math.min(this.props.max,this.state.values[e+1]):this.props.max}},{key:"getHandleDimensions",value:function(e,t){e=e.currentTarget||null;return e?"vertical"===this.props.orientation?e.clientHeight/t.height*100/2:e.clientWidth/t.width*100/2:0}},{key:"getClosestSnapPoint",value:function(n){return this.props.snapPoints.length?this.props.snapPoints.reduce(function(e,t){return Math.abs(e-n)<Math.abs(t-n)?e:t}):n}},{key:"getSnapPosition",value:function(e){var t,n,r;return this.props.snap?(t=(n=this.props).max,r=Ui(e,n=n.min,t),$i(this.getClosestSnapPoint(r),n,t)):e}},{key:"getNextPositionForKey",value:function(e,t){var n=this.state,r=n.handlePos,n=n.values,i=this.props,o=i.max,a=i.min,i=i.snapPoints,s=this.props.snap,l=n[e],r=r[e],c=r,u=1,d=(100<=o?r=Math.round(r):u=100/(o-a),null),e=(s&&(d=i.indexOf(this.getClosestSnapPoint(n[e]))),w(n={},37,function(e){return-1*e}),w(n,39,function(e){return e}),w(n,38,function(e){return e}),w(n,40,function(e){return-1*e}),w(n,34,function(e){return 1<e?-e:-10*e}),w(n,33,function(e){return 1<e?e:10*e}),n);if(Object.prototype.hasOwnProperty.call(e,t))r+=e[t](u),s&&(c<r?d<i.length-1&&(l=i[d+1]):0<d&&(l=i[d-1]));else if(36===t)r=0,s&&(l=i[0]);else{if(35!==t)return null;r=100,s&&(l=i[i.length-1])}return s?$i(l,a,o):r}},{key:"getNextState",value:function(n,e){var t=this.state.handlePos,r=this.props,i=r.max,o=r.min,a=this.validatePosition(n,e),r=t.map(function(e,t){return t===n?a:e});return{handlePos:r,values:r.map(function(e){return Ui(e,o,i)})}}},{key:"getClosestHandle",value:function(r){var i=this.state.handlePos;return i.reduce(function(e,t,n){return Math.abs(i[n]-r)<Math.abs(i[e]-r)?n:e},0)}},{key:"setStartSlide",value:function(e,t,n){var r=this.getSliderBoundingBox();this.setState({handleDimensions:this.getHandleDimensions(e,r),mousePos:{x:t,y:n},sliderBox:r,slidingIndex:Bi(e)})}},{key:"startMouseSlide",value:function(e){this.setStartSlide(e,e.clientX,e.clientY),"function"==typeof document.addEventListener?(document.addEventListener("mousemove",this.handleMouseSlide,!1),document.addEventListener("mouseup",this.endSlide,!1)):(document.attachEvent("onmousemove",this.handleMouseSlide),document.attachEvent("onmouseup",this.endSlide)),Gi(e)}},{key:"startTouchSlide",value:function(e){var t;1<e.changedTouches.length||(t=e.changedTouches[0],this.setStartSlide(e,t.clientX,t.clientY),document.addEventListener("touchmove",this.handleTouchSlide,!1),document.addEventListener("touchend",this.endSlide,!1),this.props.onSliderDragStart&&this.props.onSliderDragStart(),Gi(e))}},{key:"handleMouseSlide",value:function(e){null!==this.state.slidingIndex&&(this.handleSlide(e.clientX,e.clientY),Gi(e))}},{key:"handleTouchSlide",value:function(e){var t;null!==this.state.slidingIndex&&(1<e.changedTouches.length?this.endSlide():(t=e.changedTouches[0],this.handleSlide(t.clientX,t.clientY),Gi(e)))}},{key:"handleSlide",value:function(e,t){var n=this.state,r=n.slidingIndex,n=n.sliderBox,n="vertical"===this.props.orientation?(t-n.top)/n.height*100:(e-n.left)/n.width*100;this.slideTo(r,n),this.canMove(r,n)&&(this.setState({x:e,y:t}),this.props.onSliderDragMove)&&this.props.onSliderDragMove()}},{key:"endSlide",value:function(){var e,t=this,n=this.state.slidingIndex;this.setState({slidingIndex:null}),"function"==typeof document.removeEventListener?(document.removeEventListener("mouseup",this.endSlide,!1),document.removeEventListener("touchend",this.endSlide,!1),document.removeEventListener("touchmove",this.handleTouchSlide,!1),document.removeEventListener("mousemove",this.handleMouseSlide,!1)):(document.detachEvent("onmousemove",this.handleMouseSlide),document.detachEvent("onmouseup",this.endSlide)),this.props.onSliderDragEnd&&this.props.onSliderDragEnd(),this.props.snap?(e=this.getSnapPosition(this.state.handlePos[n]),this.slideTo(n,e,function(){return t.fireChangeEvent()})):this.fireChangeEvent()}},{key:"handleClick",value:function(e){var t,n=this;e.target.getAttribute("data-handle-key")||(t=this.getSliderBoundingBox(),e=100*("vertical"===this.props.orientation?(e.clientY-t.top)/t.height:(e.clientX-t.left)/t.width),t=this.getClosestHandle(e),e=this.getSnapPosition(e),this.slideTo(t,e,function(){return n.fireChangeEvent()}),this.props.onClick&&this.props.onClick())}},{key:"handleKeydown",value:function(e){var t,n=this,r=Bi(e);27!==e.keyCode?null!==(t=this.getNextPositionForKey(r,e.keyCode))&&(this.canMove(r,t)&&(this.slideTo(r,t,function(){return n.fireChangeEvent()}),this.props.onKeyPress)&&this.props.onKeyPress(),Gi(e)):e.currentTarget.blur()}},{key:"validatePosition",value:function(e,t){var n=this.state,r=n.handlePos,n=n.handleDimensions;return Math.max(Math.min(t,void 0!==r[e+1]?r[e+1]-n:100),void 0!==r[e-1]?r[e-1]+n:0)}},{key:"validateValues",value:function(e,t){var t=t||this.props,r=t.max,i=t.min;return e.map(function(e,t,n){e=Math.max(Math.min(e,r),i);return n.length&&e<n[t-1]?n[t-1]:e})}},{key:"canMove",value:function(e,t){var n=this.state,r=n.handlePos,n=n.handleDimensions;return!(t<0||100<t||(void 0!==r[e+1]?r[e+1]-n:1/0)<t||t<(void 0!==r[e-1]?r[e-1]+n:-1/0))}},{key:"fireChangeEvent",value:function(){var e=this.props.onChange;e&&e(this.getPublicState())}},{key:"slideTo",value:function(e,t,n){var r=this,e=this.getNextState(e,t);this.setState(e,function(){var e=r.props.onValuesUpdated;e&&e(r.getPublicState()),n&&n()})}},{key:"updateNewValues",value:function(e){var t,n,r=this;null===this.state.slidingIndex&&(t=e.max,n=e.min,e=this.validateValues(e.values,e),this.setState({handlePos:e.map(function(e){return $i(e,n,t)}),values:e},function(){return r.fireChangeEvent()}))}},{key:"render",value:function(){var r=this,e=this.props,t=e.children,n=e.disabled,i=e.handle,o=e.max,a=e.min,s=e.orientation,l=e.pitComponent,c=e.pitPoints,u=e.progressBar,e=this.state,d=e.className,p=e.handlePos,h=e.values;return k("div",{className:d,ref:function(e){r.rheostat=e},onClick:!n&&this.handleClick,style:{position:"relative"}},Vi,p.map(function(e,t){e="vertical"===s?{top:"".concat(e,"%"),position:"absolute"}:{left:"".concat(e,"%"),position:"absolute"};return k(i,{"aria-valuemax":r.getMaxValue(t),"aria-valuemin":r.getMinValue(t),"aria-valuenow":h[t],"aria-disabled":n,"data-handle-key":t,className:"rheostat-handle",key:"handle-".concat(t),onClick:r.killEvent,onKeyDown:!n&&r.handleKeydown,onMouseDown:!n&&r.startMouseSlide,onTouchStart:!n&&r.startTouchSlide,role:"slider",style:e,tabIndex:0})}),p.map(function(e,t,n){return 0===t&&1<n.length?null:k(u,{className:"rheostat-progress",key:"progress-bar-".concat(t),style:r.getProgressStyle(t)})}),l&&c.map(function(e){var t=$i(e,a,o),t="vertical"===s?{top:"".concat(t,"%"),position:"absolute"}:{left:"".concat(t,"%"),position:"absolute"};return k(l,{key:"pit-".concat(e),style:t},e)}),t)}}]),Hi);function Hi(e){var t;return _(this,Hi),w(A(t=G(this,C(Hi).call(this,e))),"state",{className:Fi(t.props),handlePos:t.props.values.map(function(e){return $i(e,t.props.min,t.props.max)}),handleDimensions:0,mousePos:null,sliderBox:{},slidingIndex:null,values:t.props.values}),t.getPublicState=t.getPublicState.bind(A(t)),t.getSliderBoundingBox=t.getSliderBoundingBox.bind(A(t)),t.getProgressStyle=t.getProgressStyle.bind(A(t)),t.getMinValue=t.getMinValue.bind(A(t)),t.getMaxValue=t.getMaxValue.bind(A(t)),t.getHandleDimensions=t.getHandleDimensions.bind(A(t)),t.getClosestSnapPoint=t.getClosestSnapPoint.bind(A(t)),t.getSnapPosition=t.getSnapPosition.bind(A(t)),t.getNextPositionForKey=t.getNextPositionForKey.bind(A(t)),t.getNextState=t.getNextState.bind(A(t)),t.handleClick=t.handleClick.bind(A(t)),t.getClosestHandle=t.getClosestHandle.bind(A(t)),t.setStartSlide=t.setStartSlide.bind(A(t)),t.startMouseSlide=t.startMouseSlide.bind(A(t)),t.startTouchSlide=t.startTouchSlide.bind(A(t)),t.handleMouseSlide=t.handleMouseSlide.bind(A(t)),t.handleTouchSlide=t.handleTouchSlide.bind(A(t)),t.handleSlide=t.handleSlide.bind(A(t)),t.endSlide=t.endSlide.bind(A(t)),t.handleKeydown=t.handleKeydown.bind(A(t)),t.validatePosition=t.validatePosition.bind(A(t)),t.validateValues=t.validateValues.bind(A(t)),t.canMove=t.canMove.bind(A(t)),t.fireChangeEvent=t.fireChangeEvent.bind(A(t)),t.slideTo=t.slideTo.bind(A(t)),t.updateNewValues=t.updateNewValues.bind(A(t)),t}function Yi(){return _(this,Yi),G(this,C(Yi).apply(this,arguments))}function zi(e){var t=e.style,e=e.children,n=Math.round(parseFloat(t.left)),r=[0,50,100].includes(n),e=Array.isArray(e)?e[0]:e,e=Math.round(100*parseInt(e,10))/100;return k("div",{style:M({},t,{marginLeft:100===n?"-2px":0}),className:x("rheostat-marker","rheostat-marker-horizontal",{"rheostat-marker-large":r})},r&&k("div",{className:"rheostat-value"},e))}w(ji,"defaultProps",{className:"",children:null,disabled:!1,handle:Ie,max:100,min:0,onClick:null,onChange:null,onKeyPress:null,onSliderDragEnd:null,onSliderDragMove:null,onSliderDragStart:null,onValuesUpdated:null,orientation:"horizontal",pitComponent:null,pitPoints:[],progressBar:"div",snap:!1,snapPoints:[],values:[0]});B(Qi,R),E(Qi,[{key:"computeDefaultPitPoints",value:function(e){var t=e.min,e=e.max,n=(e-t)/34;return[t].concat(b(Be({end:33}).map(function(e){return t+n*(e+1)})),[e])}},{key:"computeSnapPoints",value:function(e){var t=e.min,n=e.max,e=e.step;if(e)return[].concat(b(Be({start:t,end:n,step:e})),[n])}},{key:"render",value:function(){var e=this.props,t=e.tooltips,n=e.pips,r=e.values,i=e.cssClasses,o=this.isDisabled?{min:this.props.min,max:this.props.max+.001}:this.props,a=o.min,o=o.max,e=this.computeSnapPoints({min:a,max:o,step:e.step}),n=!1===n?[]:this.computeDefaultPitPoints({min:a,max:o});return k("div",{className:x(i.root,w({},i.disabledRoot,this.isDisabled))},k(ji,{handle:this.createHandleComponent(t),onChange:this.handleChange,min:a,max:o,pitComponent:zi,pitPoints:n,snap:!0,snapPoints:e,values:this.isDisabled?[a,o]:r,disabled:this.isDisabled}))}},{key:"isDisabled",get:function(){return this.props.min>=this.props.max}}]);var Wi=Qi,qi=c({name:"range-slider"}),Ki=t("RangeSlider");function Qi(){var e,t;_(this,Qi);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return w(A(t=G(this,(e=C(Qi)).call.apply(e,[this].concat(r)))),"handleChange",function(e){e=e.values;t.isDisabled||t.props.refine(e)}),w(A(t),"createHandleComponent",function(n){return function(e){var t=Math.round(100*parseFloat(e["aria-valuenow"]))/100,t=n&&n.format?n.format(t):t;return k("div",d({},e,{className:x(e.className,{"rheostat-handle-lower":0===e["data-handle-key"],"rheostat-handle-upper":1===e["data-handle-key"]})}),n&&k("div",{className:"rheostat-tooltip"},t))}}),t}var Xi=c({name:"sort-by"}),Zi=t("SortBy"),Ji={item:'{{#count}}<a class="{{cssClasses.link}}" aria-label="{{value}} & up" href="{{href}}">{{/count}}{{^count}}<div class="{{cssClasses.link}}" aria-label="{{value}} & up" disabled>{{/count}}\n  {{#stars}}<svg class="{{cssClasses.starIcon}} {{#.}}{{cssClasses.fullStarIcon}}{{/.}}{{^.}}{{cssClasses.emptyStarIcon}}{{/.}}" aria-hidden="true" width="24" height="24">\n    {{#.}}<use xlink:href="#ais-RatingMenu-starSymbol"></use>{{/.}}{{^.}}<use xlink:href="#ais-RatingMenu-starEmptySymbol"></use>{{/.}}\n  </svg>{{/stars}}\n  <span class="{{cssClasses.label}}">& Up</span>\n  {{#count}}<span class="{{cssClasses.count}}">{{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}}</span>{{/count}}\n{{#count}}</a>{{/count}}{{^count}}</div>{{/count}}'},eo=c({name:"rating-menu"}),u=t("RatingMenu"),to=k("path",{d:"M12 .288l2.833 8.718h9.167l-7.417 5.389 2.833 8.718-7.416-5.388-7.417 5.388 2.833-8.718-7.416-5.389h9.167z"}),no=k("path",{d:"M12 6.76l1.379 4.246h4.465l-3.612 2.625 1.379 4.246-3.611-2.625-3.612 2.625 1.379-4.246-3.612-2.625h4.465l1.38-4.246zm0-6.472l-2.833 8.718h-9.167l7.416 5.389-2.833 8.718 7.417-5.388 7.416 5.388-2.833-8.718 7.417-5.389h-9.167l-2.833-8.718z"});function ro(e){var t=e.nbHits,n=e.cssClasses;return k("div",{className:n.root},k(g,d({},e.templateProps,{templateKey:"text",rootTagName:"span",rootProps:{className:n.text},data:{hasManyResults:1<t,hasNoResults:0===t,hasOneResult:1===t,hitsPerPage:e.hitsPerPage,nbHits:t,nbPages:e.nbPages,page:e.page,processingTimeMS:e.processingTimeMS,query:e.query,cssClasses:n}})))}var io={text:"{{#hasNoResults}}No results{{/hasNoResults}}\n    {{#hasOneResult}}1 result{{/hasOneResult}}\n    {{#hasManyResults}}{{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}} results{{/hasManyResults}} found in {{processingTimeMS}}ms"},oo=c({name:"stats"}),ao=t("Stats");function so(e){var t=e.currentRefinement,n=e.refine,r=e.cssClasses,e=e.templateProps;return k("div",{className:r.root},k("label",{className:r.label},k("input",{className:r.checkbox,type:"checkbox",checked:t.isRefined,onChange:function(e){return n(!e.target.checked)}}),k(g,d({},e,{rootTagName:"span",rootProps:{className:r.labelText},templateKey:"labelText",data:t}))))}var lo={labelText:"{{name}}"},co=c({name:"toggle-refinement"}),uo=t("ToggleRefinement");function po(e){var r=e.items,i=e.cssClasses,o=e.templateProps,a=e.createURL,s=e.refine;return k("div",{className:x(i.root,w({},i.noRefinementRoot,0===r.length))},k("ul",{className:i.list},k("li",{className:x(i.item,w({},i.selectedItem,0===r.length))},k(g,d({},o,{templateKey:"home",rootTagName:"a",rootProps:{className:i.link,href:a(void 0),onClick:function(e){e.preventDefault(),s(void 0)}}}))),r.map(function(t,e){var n=e===r.length-1;return k("li",{key:t.label+e,className:x(i.item,w({},i.selectedItem,n))},k(g,d({},o,{templateKey:"separator",rootTagName:"span",rootProps:{className:i.separator,"aria-hidden":!0}})),n?t.label:k("a",{className:i.link,href:a(t.value),onClick:function(e){e.preventDefault(),s(t.value)}},t.label))})))}var ho=c({name:"analytics"}),fo={home:"Home",separator:">"},mo=c({name:"breadcrumb"}),go=t("Breadcrumb");function vo(e){var t=e.cssClasses,n=e.templateProps,r=e.items,i=e.refine,e=(De(r,function(e){return e.isRefined})||{value:""}).value;return k("div",{className:x(t.root,w({},t.noRefinementRoot,0===r.length))},k("select",{className:t.select,value:e,onChange:function(e){i(e.target.value)}},k(g,d({},n,{templateKey:"defaultOption",rootTagName:"option",rootProps:{value:"",className:t.option}})),r.map(function(e){return k(g,d({},n,{templateKey:"item",rootTagName:"option",rootProps:{value:e.value,className:t.option},key:e.value,data:e}))})))}var yo={item:"{{label}} ({{#helpers.formatNumber}}{{count}}{{/helpers.formatNumber}})",defaultOption:"See all"},bo=c({name:"menu-select"}),So=t("MenuSelect");function _o(e){var t=e.url,n=e.theme,e=e.cssClasses;return k("div",{className:e.root},k("a",{href:t,target:"_blank",className:e.link,"aria-label":"Search by Algolia",rel:"noopener noreferrer"},k("svg",{height:"1.2em",className:e.logo,viewBox:"0 0 168 24",style:{width:"auto"}},k("path",{fill:"dark"===n?"#FFF":"#5D6494",d:"M6.97 6.68V8.3a4.47 4.47 0 0 0-2.42-.67 2.2 2.2 0 0 0-1.38.4c-.34.26-.5.6-.5 1.02 0 .43.16.77.49 1.03.33.25.83.53 1.51.83a7.04 7.04 0 0 1 1.9 1.08c.34.24.58.54.73.89.15.34.23.74.23 1.18 0 .95-.33 1.7-1 2.24a4 4 0 0 1-2.6.81 5.71 5.71 0 0 1-2.94-.68v-1.71c.84.63 1.81.94 2.92.94.58 0 1.05-.14 1.39-.4.34-.28.5-.65.5-1.13 0-.29-.1-.55-.3-.8a2.2 2.2 0 0 0-.65-.53 23.03 23.03 0 0 0-1.64-.78 13.67 13.67 0 0 1-1.11-.64c-.12-.1-.28-.22-.46-.4a1.72 1.72 0 0 1-.39-.5 4.46 4.46 0 0 1-.22-.6c-.07-.23-.1-.48-.1-.75 0-.91.33-1.63 1-2.17a4 4 0 0 1 2.57-.8c.97 0 1.8.18 2.47.52zm7.47 5.7v-.3a2.26 2.26 0 0 0-.5-1.44c-.3-.35-.74-.53-1.32-.53-.53 0-.99.2-1.37.58-.38.39-.62.95-.72 1.68h3.91zm1 2.79v1.4c-.6.34-1.38.51-2.36.51a4.02 4.02 0 0 1-3-1.13 4.04 4.04 0 0 1-1.11-2.97c0-1.3.34-2.32 1.02-3.06a3.38 3.38 0 0 1 2.6-1.1c1.03 0 1.85.32 2.46.96.6.64.9 1.57.9 2.78 0 .33-.03.68-.09 1.04h-5.31c.1.7.4 1.24.89 1.61.49.38 1.1.56 1.85.56.86 0 1.58-.2 2.15-.6zm6.61-1.78h-1.21c-.6 0-1.05.12-1.35.36-.3.23-.46.53-.46.89 0 .37.12.66.36.88.23.2.57.32 1.02.32.5 0 .9-.15 1.2-.43.3-.28.44-.65.44-1.1v-.92zm-4.07-2.55V9.33a4.96 4.96 0 0 1 2.5-.55c2.1 0 3.17 1.03 3.17 3.08V17H22.1v-.96c-.42.68-1.15 1.02-2.19 1.02-.76 0-1.38-.22-1.84-.66-.46-.44-.7-1-.7-1.68 0-.78.3-1.38.88-1.81.59-.43 1.4-.65 2.46-.65h1.34v-.46c0-.55-.13-.97-.4-1.25-.26-.29-.7-.43-1.32-.43-.86 0-1.65.24-2.35.72zm9.34-1.93v1.42c.39-1 1.1-1.5 2.12-1.5.15 0 .31.02.5.05v1.53c-.23-.1-.48-.14-.76-.14-.54 0-.99.24-1.34.71a2.8 2.8 0 0 0-.52 1.71V17h-1.57V8.91h1.57zm5 4.09a3 3 0 0 0 .76 2.01c.47.53 1.14.8 2 .8.64 0 1.24-.18 1.8-.53v1.4c-.53.32-1.2.48-2 .48a3.98 3.98 0 0 1-4.17-4.18c0-1.16.38-2.15 1.14-2.98a4 4 0 0 1 3.1-1.23c.7 0 1.34.15 1.92.44v1.44a3.24 3.24 0 0 0-1.77-.5A2.65 2.65 0 0 0 32.33 13zm7.92-7.28v4.58c.46-1 1.3-1.5 2.5-1.5.8 0 1.42.24 1.9.73.48.5.72 1.17.72 2.05V17H43.8v-5.1c0-.56-.14-.99-.43-1.29-.28-.3-.65-.45-1.1-.45-.54 0-1 .2-1.42.6-.4.4-.61 1.02-.61 1.85V17h-1.56V5.72h1.56zM55.2 15.74c.6 0 1.1-.25 1.5-.76.4-.5.6-1.16.6-1.95 0-.92-.2-1.62-.6-2.12-.4-.5-.92-.74-1.55-.74-.56 0-1.05.22-1.5.67-.44.45-.66 1.13-.66 2.06 0 .96.22 1.67.64 2.14.43.47.95.7 1.57.7zM53 5.72v4.42a2.74 2.74 0 0 1 2.43-1.34c1.03 0 1.86.38 2.51 1.15.65.76.97 1.78.97 3.05 0 1.13-.3 2.1-.92 2.9-.62.81-1.47 1.21-2.54 1.21s-1.9-.45-2.46-1.34V17h-1.58V5.72H53zm9.9 11.1l-3.22-7.9h1.74l1 2.62 1.26 3.42c.1-.32.48-1.46 1.15-3.42l.91-2.63h1.66l-2.92 7.87c-.78 2.07-1.96 3.1-3.56 3.1-.28 0-.53-.02-.73-.07v-1.34c.17.04.35.06.54.06 1.03 0 1.76-.57 2.17-1.7z"}),wo,To,k("path",{fill:"dark"===n?"#FFF":"#5468FF",d:"M120.92 18.8c-4.38.02-4.38-3.54-4.38-4.1V1.36l2.67-.42v13.25c0 .32 0 2.36 1.71 2.37v2.24zm-10.84-2.18c.82 0 1.43-.04 1.85-.12v-2.72a5.48 5.48 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.11-.44.28-.58.49a.93.93 0 0 0-.22.65c0 .63.22 1 .61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.62.11 2.23.33.6.22 1.09.53 1.44.92.36.4.61.92.76 1.48.16.56.23 1.17.23 1.85v6.87c-.4.1-1.03.2-1.86.32-.84.12-1.78.18-2.82.18-.69 0-1.32-.07-1.9-.2a4 4 0 0 1-1.46-.63c-.4-.3-.72-.67-.96-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.39-1.53.26-.45.6-.82 1.04-1.1.45-.3.95-.5 1.54-.62a8.8 8.8 0 0 1 3.79.05v-.44c0-.3-.04-.6-.11-.87a1.78 1.78 0 0 0-1.1-1.22c-.31-.12-.7-.2-1.15-.2a9.75 9.75 0 0 0-2.95.46l-.33-2.19c.34-.12.84-.23 1.48-.35.65-.12 1.34-.18 2.08-.18zm52.84 9.63c.82 0 1.43-.05 1.85-.13V13.7a5.42 5.42 0 0 0-1.57-.2c-.3 0-.6.02-.9.07-.3.04-.57.12-.81.24-.24.12-.44.28-.58.5a.93.93 0 0 0-.22.65c0 .63.22.99.61 1.23.4.24.94.36 1.62.36zm-.23-9.7c.88 0 1.63.11 2.23.33.6.22 1.1.53 1.45.92.35.39.6.92.76 1.48.15.56.23 1.18.23 1.85v6.88c-.41.08-1.03.19-1.87.31-.83.12-1.77.18-2.81.18-.7 0-1.33-.06-1.9-.2a4 4 0 0 1-1.47-.63c-.4-.3-.72-.67-.95-1.13a4.3 4.3 0 0 1-.34-1.8c0-.66.13-1.08.38-1.53.26-.45.61-.82 1.05-1.1.44-.3.95-.5 1.53-.62a8.8 8.8 0 0 1 3.8.05v-.43c0-.31-.04-.6-.12-.88-.07-.28-.2-.52-.38-.73a1.78 1.78 0 0 0-.73-.5c-.3-.1-.68-.2-1.14-.2a9.85 9.85 0 0 0-2.95.47l-.32-2.19a11.63 11.63 0 0 1 3.55-.53zm-8.03-1.27a1.62 1.62 0 0 0 0-3.24 1.62 1.62 0 1 0 0 3.24zm1.35 13.22h-2.7V7.27l2.7-.42V18.8zm-4.72 0c-4.38.02-4.38-3.54-4.38-4.1l-.01-13.34 2.67-.42v13.25c0 .32 0 2.36 1.72 2.37v2.24zm-8.7-5.9a4.7 4.7 0 0 0-.74-2.79 2.4 2.4 0 0 0-2.07-1 2.4 2.4 0 0 0-2.06 1 4.7 4.7 0 0 0-.74 2.8c0 1.16.25 1.94.74 2.62a2.4 2.4 0 0 0 2.07 1.02c.88 0 1.57-.34 2.07-1.02.49-.68.73-1.46.73-2.63zm2.74 0a6.46 6.46 0 0 1-1.52 4.23c-.49.53-1.07.94-1.76 1.22-.68.29-1.73.45-2.26.45-.53 0-1.58-.15-2.25-.45a5.1 5.1 0 0 1-2.88-3.13 7.3 7.3 0 0 1-.01-4.84 5.13 5.13 0 0 1 2.9-3.1 5.67 5.67 0 0 1 2.22-.42c.81 0 1.56.14 2.24.42.69.29 1.28.69 1.75 1.22.49.52.87 1.15 1.14 1.89a7 7 0 0 1 .43 2.5zm-20.14 0c0 1.11.25 2.36.74 2.88.5.52 1.13.78 1.91.78a4.07 4.07 0 0 0 2.12-.6V9.33c-.19-.04-.99-.2-1.76-.23a2.67 2.67 0 0 0-2.23 1 4.73 4.73 0 0 0-.78 2.8zm7.44 5.27c0 1.82-.46 3.16-1.4 4-.94.85-2.37 1.27-4.3 1.27-.7 0-2.17-.13-3.34-.4l.43-2.11c.98.2 2.27.26 2.95.26 1.08 0 1.84-.22 2.3-.66.46-.43.68-1.08.68-1.94v-.44a5.2 5.2 0 0 1-2.54.6 5.6 5.6 0 0 1-2.01-.36 4.2 4.2 0 0 1-2.58-2.71 9.88 9.88 0 0 1 .02-5.35 4.92 4.92 0 0 1 2.93-2.96 6.6 6.6 0 0 1 2.43-.46 19.64 19.64 0 0 1 4.43.66v10.6z"}))))}var Eo,Co,wo=k("path",{fill:"#5468FF",d:"M78.99.94h16.6a2.97 2.97 0 0 1 2.96 2.96v16.6a2.97 2.97 0 0 1-2.97 2.96h-16.6a2.97 2.97 0 0 1-2.96-2.96V3.9A2.96 2.96 0 0 1 79 .94"}),To=k("path",{fill:"#FFF",d:"M89.63 5.97v-.78a.98.98 0 0 0-.98-.97h-2.28a.98.98 0 0 0-.97.97V6c0 .09.08.15.17.13a7.13 7.13 0 0 1 3.9-.02c.08.02.16-.04.16-.13m-6.25 1L83 6.6a.98.98 0 0 0-1.38 0l-.46.46a.97.97 0 0 0 0 1.38l.38.39c.06.06.15.04.2-.02a7.49 7.49 0 0 1 1.63-1.62c.07-.04.08-.14.02-.2m4.16 2.45v3.34c0 .1.1.17.2.12l2.97-1.54c.06-.03.08-.12.05-.18a3.7 3.7 0 0 0-3.08-1.87c-.07 0-.14.06-.14.13m0 8.05a4.49 4.49 0 1 1 0-8.98 4.49 4.49 0 0 1 0 8.98m0-10.85a6.37 6.37 0 1 0 0 12.74 6.37 6.37 0 0 0 0-12.74"}),Ao=t("PoweredBy"),Po=c({name:"powered-by"}),Oo=[],Io=I.__r,Ro=(I.__r=function(e){Io&&Io(e),Eo=0,(Co=e.__c).__H&&(Co.__H.t=$o(Co.__H.t))},I.diffed),Mo=(I.diffed=function(e){Ro&&Ro(e);var e=e.__c;e&&(e=e.__H)&&(e.u=(e.u.some(function(e){e.ref&&(e.ref.current=e.createHandle())}),[]),e.i=$o(e.i))},I.unmount);function Do(e){I.__h&&I.__h(Co);var t=Co.__H||(Co.__H={o:[],t:[],i:[],u:[]});return e>=t.o.length&&t.o.push({}),t.o[e]}function No(e){return t=Go,e=e,(n=Do(Eo++)).__c||(n.__c=Co,n.v=[Go(void 0,e),function(e){e=t(n.v[0],e);n.v[0]!==e&&(n.v[0]=e,n.__c.setState({}))}]),n.v;var t,n}I.unmount=function(e){Mo&&Mo(e);var e=e.__c;e&&(e=e.__H)&&e.o.forEach(function(e){return e.l&&e.l()})};var ko,Lo=function(){};function xo(){Oo.some(function(e){e.s=!1,e.__P&&(e.__H.t=$o(e.__H.t))}),Oo=[]}function $o(e){return e.forEach(Uo),e.forEach(Fo),[]}function Uo(e){e.l&&e.l()}function Fo(e){var t=e.v();"function"==typeof t&&(e.l=t)}function Bo(n,e){return!n||e.some(function(e,t){return e!==n[t]})}function Go(e,t){return"function"==typeof t?t(e):t}function Vo(e){var t,n,r,i=D(No(e.isCollapsed),2),o=i[0],a=i[1],i=D(No(!1),2),s=i[0],l=i[1],c=(t=null,i=function(){return{current:t}},r=[],Bo((n=Do(Eo++)).m,r)?(n.m=r,n.p=i,n.v=i()):n.v);return r=[c,e.bodyElement],Bo((i=Do(Eo++)).m,r)&&(i.v=function(){if(c.current)return c.current.appendChild(e.bodyElement),function(){c.current.removeChild(e.bodyElement)}},i.m=r,Co.__H.t.push(i),Lo(Co)),s||e.isCollapsed===o||a(e.isCollapsed),k("div",{className:x(e.cssClasses.root,(w(n={},e.cssClasses.noRefinementRoot,e.hidden),w(n,e.cssClasses.collapsibleRoot,e.collapsible),w(n,e.cssClasses.collapsedRoot,o),n)),hidden:e.hidden},e.templates.header&&k("div",{className:e.cssClasses.header},k(g,{templates:e.templates,templateKey:"header",rootTagName:"span",data:e.data}),e.collapsible&&k("button",{className:e.cssClasses.collapseButton,"aria-expanded":!o,onClick:function(e){e.preventDefault(),l(!0),a(function(e){return!e})}},k(g,{templates:e.templates,templateKey:"collapseButtonText",rootTagName:"span",data:{collapsed:o}}))),k("div",{className:e.cssClasses.body,ref:c}),e.templates.footer&&k(g,{templates:e.templates,templateKey:"footer",rootProps:{className:e.cssClasses.footer},data:e.data}))}function jo(e){var t=e.cssClasses,n=e.isBrowserSupported,r=e.isListening,i=e.toggleListening,o=e.voiceListeningState,e=e.templates,a=o.status,s=o.transcript,l=o.isSpeechFinal,o=o.errorCode;return k("div",{className:t.root},k(g,{templateKey:"buttonText",rootTagName:"button",rootProps:{className:t.button,type:"button",title:"Search by voice".concat(n?"":" (not supported on this browser)"),onClick:function(e){e.currentTarget.blur(),i()},disabled:!n},data:{status:a,errorCode:o,isListening:r,transcript:s,isSpeechFinal:l,isBrowserSupported:n},templates:e}),k(g,{templateKey:"status",rootProps:{className:t.status},data:{status:a,errorCode:o,isListening:r,transcript:s,isSpeechFinal:l,isBrowserSupported:n},templates:e}))}function Ho(e){var t=e.isBrowserSupported,n=e.widgetParams,r=n.container;L(k(jo,{cssClasses:n.cssClasses,templates:n.templates,isBrowserSupported:t,isListening:e.isListening,toggleListening:e.toggleListening,voiceListeningState:e.voiceListeningState}),r)}function Yo(e){var t=e.cssClasses;return k(g,{templateKey:"default",templates:e.templates,rootProps:{className:t.root},data:{items:e.items}})}function zo(e){var t=e.items,e=e.widgetParams,n=e.container;L(k(Yo,{cssClasses:e.cssClasses,templates:e.templates,items:t}),n)}"undefined"!=typeof window&&(ko=I.requestAnimationFrame,Lo=function(e){(e.s||(e.s=!0,1!==Oo.push(e)))&&ko===I.requestAnimationFrame||(ko=I.requestAnimationFrame,(I.requestAnimationFrame||function(e){function t(){clearTimeout(n),cancelAnimationFrame(r),setTimeout(e)}var n=setTimeout(t,100),r=requestAnimationFrame(t)})(xo))});var Wo=c({name:"panel"}),qo=t("Panel"),Ko={buttonText:function(e){var t=e.status,n=e.errorCode,e=e.isListening;return'<svg\n       xmlns="http://www.w3.org/2000/svg"\n       width="16"\n       height="16"\n       viewBox="0 0 24 24"\n       fill="none"\n       stroke="currentColor"\n       stroke-width="2"\n       stroke-linecap="round"\n       stroke-linejoin="round"\n     >\n       '.concat("error"===t&&"not-allowed"===n?'<line x1="1" y1="1" x2="23" y2="23"></line>\n            <path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path>\n            <path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path>\n            <line x1="12" y1="19" x2="12" y2="23"></line>\n            <line x1="8" y1="23" x2="16" y2="23"></line>':'<path\n            d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"\n            fill="'.concat(e?"currentColor":"none",'">\n          </path>\n          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>\n          <line x1="12" y1="19" x2="12" y2="23"></line>\n          <line x1="8" y1="23" x2="16" y2="23"></line>'),"\n     </svg>")},status:"<p>{{transcript}}</p>"},Qo=c({name:"voice-search"}),Xo=t("VoiceSearch"),Zo=c({name:"query-rule-custom-data"}),Jo=t("QueryRuleCustomData"),ea=c({name:"query-rule-context"}),Oe=Object.freeze({__proto__:null,clearRefinements:function(e){var t,i,o,a,s,e=e||{},n=e.container,r=e.templates,r=void 0===r?Ur:r,l=e.includedAttributes,c=e.excludedAttributes,u=e.transformItems,e=e.cssClasses,e=void 0===e?{}:e;if(n)return t=P(n),n={root:x(Br(),e.root),button:x(Br({descendantName:"button"}),e.button),disabledButton:x(Br({descendantName:"button",modifierName:"disabled"}),e.disabledButton)},i=(e={containerNode:t,cssClasses:n,renderState:{},templates:r}).containerNode,o=e.cssClasses,a=e.renderState,s=e.templates,zt(function(e,t){var n=e.refine,r=e.hasRefinements;t?a.templateProps=N({defaultTemplates:Ur,templatesConfig:e.instantSearchInstance.templatesConfig,templates:s}):L(k(kr,{refine:n,cssClasses:o,hasRefinements:r,templateProps:a.templateProps}),i)},function(){return L(null,t)})({includedAttributes:l,excludedAttributes:c,transformItems:u});throw new Error(Fr("The `container` option is required."))},configure:function(e){return Cr(O)({searchParameters:e})},EXPERIMENTAL_configureRelatedItems:function(e){return Ar(O)(e)},currentRefinements:function(e){var t,e=e||{},n=e.container,r=e.includedAttributes,i=e.excludedAttributes,o=e.cssClasses,o=void 0===o?{}:o,e=e.transformItems;if(n)return t=P(n),n={root:x(Vr(),o.root),list:x(Vr({descendantName:"list"}),o.list),item:x(Vr({descendantName:"item"}),o.item),label:x(Vr({descendantName:"label"}),o.label),category:x(Vr({descendantName:"category"}),o.category),categoryLabel:x(Vr({descendantName:"categoryLabel"}),o.categoryLabel),delete:x(Vr({descendantName:"delete"}),o.delete)},Qt(xr,function(){return L(null,t)})({container:t,cssClasses:n,includedAttributes:r,excludedAttributes:i,transformItems:e});throw new Error(Gr("The `container` option is required."))},geoSearch:function(e){var t,n,r,i,o,s,e=0<arguments.length&&void 0!==e?e:{},a=e.initialZoom,a=void 0===a?1:a,l=e.initialPosition,l=void 0===l?{lat:0,lng:0}:l,c=e.templates,c=void 0===c?{}:c,u=e.cssClasses,u=void 0===u?{}:u,d=e.builtInMarker,d=void 0===d?{}:d,p=e.customHTMLMarker,h=e.enableRefine,h=void 0===h||h,f=e.enableClearMapRefinement,f=void 0===f||f,m=e.enableRefineControl,m=void 0===m||m,g=e.container,v=e.googleReference,e=T(e,["initialZoom","initialPosition","templates","cssClasses","builtInMarker","customHTMLMarker","enableRefine","enableClearMapRefinement","enableRefineControl","container","googleReference"]),y={createOptions:O,events:{}},b={createOptions:O,events:{}};if(!g)throw new Error(Kr("The `container` option is required."));if(v)return t=P(g),g={root:x(Qr(),u.root),tree:Qr({descendantName:"tree"}),map:x(Qr({descendantName:"map"}),u.map),control:x(Qr({descendantName:"control"}),u.control),label:x(Qr({descendantName:"label"}),u.label),selectedLabel:x(Qr({descendantName:"label",modifierName:"selected"}),u.selectedLabel),input:x(Qr({descendantName:"input"}),u.input),redo:x(Qr({descendantName:"redo"}),u.redo),disabledRedo:x(Qr({descendantName:"redo",modifierName:"disabled"}),u.disabledRedo),reset:x(Qr({descendantName:"reset"}),u.reset)},n=M({},qr,{},c),r=M({},y,{},d),i=(Boolean(p)||Boolean(c.HTMLMarker))&&M({},b,{},p),B(S,(s=v).maps.OverlayView),E(S,[{key:"onAdd",value:function(){this.getPanes().overlayMouseTarget.appendChild(this.element);var e=this.element.getBoundingClientRect();this.offset={x:this.anchor.x+e.width/2,y:this.anchor.y+e.height},this.element.style.width="".concat(e.width,"px")}},{key:"draw",value:function(){var e=this.getProjection().fromLatLngToDivPixel(this.latLng);this.element.style.left="".concat(Math.round(e.x-this.offset.x),"px"),this.element.style.top="".concat(Math.round(e.y-this.offset.y),"px"),this.element.style.zIndex=String(parseInt(this.element.style.top,10))}},{key:"onRemove",value:function(){var t=this;this.element&&(this.element.parentNode.removeChild(this.element),Object.keys(this.listeners).forEach(function(e){t.element.removeEventListener(e,t.listeners[e])}),delete this.element,delete this.listeners)}},{key:"addListener",value:function(e,t){this.listeners[e]=t;var n=this.element;return n.addEventListener(e,t),{remove:function(){return n.removeEventListener(e,t)}}}},{key:"getPosition",value:function(){return this.latLng}}]),o=S,u=i?function(e){var t=e.item,e=T(e,["item"]);return new o(M({},i.createOptions(t),{},e,{__id:t.objectID,position:t._geoloc,className:x(Qr({descendantName:"marker"})),template:Me({templateKey:"HTMLMarker",templates:n,data:t})}))}:function(e){var t=e.item,e=T(e,["item"]);return new v.maps.Marker(M({},r.createOptions(t),{},e,{__id:t.objectID,position:t._geoloc}))},y=i||r,gr(Wr,function(){return L(null,t)})(M({},e,{renderState:{},container:t,googleReference:v,initialZoom:a,initialPosition:l,templates:n,cssClasses:g,createMarker:u,markerOptions:y,enableRefine:h,enableClearMapRefinement:f,enableRefineControl:m}));throw new Error(Kr("The `googleReference` option is required."));function S(e){var t,n=e.__id,r=e.position,i=e.map,o=e.template,a=e.className,e=e.anchor,e=void 0===e?{x:0,y:0}:e;return _(this,S),w(A(t=G(this,C(S).call(this))),"__id",void 0),w(A(t),"anchor",void 0),w(A(t),"offset",void 0),w(A(t),"listeners",void 0),w(A(t),"latLng",void 0),w(A(t),"element",void 0),t.__id=n,t.anchor=e,t.listeners={},t.latLng=new s.maps.LatLng(r),t.element=document.createElement("div"),t.element.className=a,t.element.style.position="absolute",t.element.innerHTML=o,t.setMap(i),t}},hierarchicalMenu:function(){var e,l,c,u,d,p,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attributes,i=t.separator,o=t.rootPath,a=t.showParentLevel,s=t.limit,h=t.showMore,h=void 0!==h&&h,f=t.showMoreLimit,m=t.sortBy,g=t.transformItems,v=t.templates,v=void 0===v?ni:v,t=t.cssClasses,t=void 0===t?{}:t;if(n)return e=P(n),rn((n={cssClasses:{root:x(y(),t.root),noRefinementRoot:x(y({modifierName:"noRefinement"}),t.noRefinementRoot),list:x(y({descendantName:"list"}),t.list),childList:x(y({descendantName:"list",modifierName:"child"}),t.childList),item:x(y({descendantName:"item"}),t.item),selectedItem:x(y({descendantName:"item",modifierName:"selected"}),t.selectedItem),parentItem:x(y({descendantName:"item",modifierName:"parent"}),t.parentItem),link:x(y({descendantName:"link"}),t.link),label:x(y({descendantName:"label"}),t.label),count:x(y({descendantName:"count"}),t.count),showMore:x(y({descendantName:"showMore"}),t.showMore),disabledShowMore:x(y({descendantName:"showMore",modifierName:"disabled"}),t.disabledShowMore)},containerNode:e,templates:v,showMore:h,renderState:{}},l=n.cssClasses,c=n.containerNode,u=n.showMore,d=n.templates,p=n.renderState,function(e,t){var n=e.createURL,r=e.items,i=e.refine,o=e.isShowingMore,a=e.toggleShowMore,s=e.canToggleShowMore;t?p.templateProps=N({defaultTemplates:ni,templatesConfig:e.instantSearchInstance.templatesConfig,templates:d}):L(k(ei,{createURL:n,cssClasses:l,facetValues:r,templateProps:p.templateProps,toggleRefinement:i,showMore:u,toggleShowMore:a,isShowingMore:o,canToggleShowMore:s}),c)}),function(){return L(null,e)})({attributes:r,separator:i,rootPath:o,showParentLevel:a,limit:s,showMore:h,showMoreLimit:f,sortBy:m,transformItems:g});throw new Error(ri("The `container` option is required."))},hits:function(e){var t,a,s,l,c,e=e||{},n=e.container,r=e.escapeHTML,i=e.transformItems,o=e.templates,o=void 0===o?oi:o,e=e.cssClasses,e=void 0===e?{}:e;if(n)return t=P(n),n={root:x(si(),e.root),emptyRoot:x(si({modifierName:"empty"}),e.emptyRoot),list:x(si({descendantName:"list"}),e.list),item:x(si({descendantName:"item"}),e.item)},a=(e={containerNode:t,cssClasses:n,renderState:{},templates:o}).renderState,s=e.cssClasses,l=e.containerNode,c=e.templates,ln(on)(function(e,t){var n=e.hits,r=e.results,i=e.instantSearchInstance,o=e.insights,e=e.bindEvent;t?a.templateProps=N({defaultTemplates:oi,templatesConfig:i.templatesConfig,templates:c}):L(k(li,{cssClasses:s,hits:n,results:r,templateProps:a.templateProps,insights:o,sendEvent:function(e){i.sendEventToInsights(e)},bindEvent:e}),l)},function(){return L(null,t)})({escapeHTML:r,transformItems:i});throw new Error(ai("The `container` option is required."))},hitsPerPage:function(e){var t,r,i,e=e||{},n=e.container,o=e.items,a=e.cssClasses,a=void 0===a?{}:a,e=e.transformItems;if(n)return t=P(n),n={root:x(di(),a.root),select:x(di({descendantName:"select"}),a.select),option:x(di({descendantName:"option"}),a.option)},r=(a={containerNode:t,cssClasses:n}).containerNode,i=a.cssClasses,Nn(function(e,t){var n=e.items,e=e.refine;t||(t=(De(n,function(e){return e.isRefined})||{}).value,L(k("div",{className:i.root},k(ci,{cssClasses:i,currentValue:t,options:n,setValue:e})),r))},function(){return L(null,t)})({items:o,transformItems:e});throw new Error(ui("The `container` option is required."))},infiniteHits:function(e){var t,u,d,p,h,f,e=0<arguments.length&&void 0!==e?e:{},n=e.container,r=e.escapeHTML,i=e.transformItems,o=e.templates,o=void 0===o?pi:o,a=e.cssClasses,a=void 0===a?{}:a,s=e.showPrevious,e=e.cache;if(n)return t=P(n),n={root:x(fi(),a.root),emptyRoot:x(fi({modifierName:"empty"}),a.emptyRoot),item:x(fi({descendantName:"item"}),a.item),list:x(fi({descendantName:"list"}),a.list),loadPrevious:x(fi({descendantName:"loadPrevious"}),a.loadPrevious),disabledLoadPrevious:x(fi({descendantName:"loadPrevious",modifierName:"disabled"}),a.disabledLoadPrevious),loadMore:x(fi({descendantName:"loadMore"}),a.loadMore),disabledLoadMore:x(fi({descendantName:"loadMore",modifierName:"disabled"}),a.disabledLoadMore)},u=(a={containerNode:t,cssClasses:n,templates:o,showPrevious:s,renderState:{}}).cssClasses,d=a.containerNode,p=a.renderState,h=a.templates,f=a.showPrevious,ln(Fn)(function(e,t){var n=e.hits,r=e.results,i=e.showMore,o=e.showPrevious,a=e.isFirstPage,s=e.isLastPage,l=e.instantSearchInstance,c=e.insights,e=e.bindEvent;t?p.templateProps=N({defaultTemplates:pi,templatesConfig:l.templatesConfig,templates:h}):L(k(mi,{cssClasses:u,hits:n,results:r,hasShowPrevious:f,showPrevious:o,showMore:i,templateProps:p.templateProps,isFirstPage:a,isLastPage:s,insights:c,sendEvent:function(e){l.sendEventToInsights(e)},bindEvent:e}),d)},function(){return L(null,t)})({escapeHTML:r,transformItems:i,showPrevious:s,cache:e});throw new Error(hi("The `container` option is required."))},menu:function(e){var t,l,c,u,d,p,n=e.container,r=e.attribute,i=e.sortBy,o=e.limit,a=e.showMore,s=e.showMoreLimit,h=e.cssClasses,h=void 0===h?{}:h,f=e.templates,f=void 0===f?gi:f,e=e.transformItems;if(n)return t=P(n),n={root:x(yi(),h.root),noRefinementRoot:x(yi({modifierName:"noRefinement"}),h.noRefinementRoot),list:x(yi({descendantName:"list"}),h.list),item:x(yi({descendantName:"item"}),h.item),selectedItem:x(yi({descendantName:"item",modifierName:"selected"}),h.selectedItem),link:x(yi({descendantName:"link"}),h.link),label:x(yi({descendantName:"label"}),h.label),count:x(yi({descendantName:"count"}),h.count),showMore:x(yi({descendantName:"showMore"}),h.showMore),disabledShowMore:x(yi({descendantName:"showMore",modifierName:"disabled"}),h.disabledShowMore)},Gn((l=(h={containerNode:t,cssClasses:n,renderState:{},templates:f,showMore:a}).containerNode,c=h.cssClasses,u=h.renderState,d=h.templates,p=h.showMore,function(e,t){var n=e.refine,r=e.items,i=e.createURL,o=e.isShowingMore,a=e.toggleShowMore,s=e.canToggleShowMore;t?u.templateProps=N({defaultTemplates:gi,templatesConfig:e.instantSearchInstance.templatesConfig,templates:d}):(t=r.map(function(e){return M({},e,{url:i(e.name)})}),L(k(ei,{createURL:i,cssClasses:c,facetValues:t,showMore:p,templateProps:u.templateProps,toggleRefinement:n,toggleShowMore:a,isShowingMore:o,canToggleShowMore:s}),l))}),function(){return L(null,t)})({attribute:r,limit:o,showMore:a,showMoreLimit:s,sortBy:i,transformItems:e});throw new Error(vi("The `container` option is required."))},refinementList:function(){var e,d,p,h,f,m,g,v,y,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attribute,i=t.operator,o=t.sortBy,a=t.limit,s=t.showMore,l=t.showMoreLimit,c=t.searchable,c=void 0!==c&&c,u=t.searchablePlaceholder,u=void 0===u?"Search...":u,b=t.searchableEscapeFacetValues,S=t.searchableIsAlwaysActive,S=void 0===S||S,_=t.cssClasses,_=void 0===_?{}:_,E=t.templates,E=void 0===E?Si:E,t=t.transformItems;if(n)return b=!!c&&Boolean(void 0===b||b),e=P(n),n=(e=>((e=M({},e,{submit:e.searchableSubmit,reset:e.searchableReset,loadingIndicator:e.searchableLoadingIndicator})).searchableReset,T(e,["searchableReset","searchableSubmit","searchableLoadingIndicator"])))(M({},Si,{},E)),E={root:x($(),_.root),noRefinementRoot:x($({modifierName:"noRefinement"}),_.noRefinementRoot),list:x($({descendantName:"list"}),_.list),item:x($({descendantName:"item"}),_.item),selectedItem:x($({descendantName:"item",modifierName:"selected"}),_.selectedItem),searchBox:x($({descendantName:"searchBox"}),_.searchBox),label:x($({descendantName:"label"}),_.label),checkbox:x($({descendantName:"checkbox"}),_.checkbox),labelText:x($({descendantName:"labelText"}),_.labelText),count:x($({descendantName:"count"}),_.count),noResults:x($({descendantName:"noResults"}),_.noResults),showMore:x($({descendantName:"showMore"}),_.showMore),disabledShowMore:x($({descendantName:"showMore",modifierName:"disabled"}),_.disabledShowMore),searchable:{root:x(Ei(),_.searchableRoot),form:x(Ei({descendantName:"form"}),_.searchableForm),input:x(Ei({descendantName:"input"}),_.searchableInput),submit:x(Ei({descendantName:"submit"}),_.searchableSubmit),submitIcon:x(Ei({descendantName:"submitIcon"}),_.searchableSubmitIcon),reset:x(Ei({descendantName:"reset"}),_.searchableReset),resetIcon:x(Ei({descendantName:"resetIcon"}),_.searchableResetIcon),loadingIndicator:x(Ei({descendantName:"loadingIndicator"}),_.searchableLoadingIndicator),loadingIcon:x(Ei({descendantName:"loadingIcon"}),_.searchableLoadingIcon)}},tr((d=(_={containerNode:e,cssClasses:E,templates:n,renderState:{},searchable:c,searchablePlaceholder:u,searchableIsAlwaysActive:S,showMore:s}).containerNode,p=_.cssClasses,h=_.templates,f=_.renderState,m=_.showMore,g=_.searchable,v=_.searchablePlaceholder,y=_.searchableIsAlwaysActive,function(e,t){var n=e.refine,r=e.items,i=e.createURL,o=e.searchForItems,a=e.isFromSearch,s=e.toggleShowMore,l=e.isShowingMore,c=e.hasExhaustiveItems,u=e.canToggleShowMore;t?f.templateProps=N({templatesConfig:e.instantSearchInstance.templatesConfig,templates:h}):L(k(ei,{createURL:i,cssClasses:p,facetValues:r,templateProps:f.templateProps,toggleRefinement:n,searchFacetValues:g?o:void 0,searchPlaceholder:v,searchIsAlwaysActive:y,isFromSearch:a,showMore:m&&!a&&0<r.length,toggleShowMore:s,isShowingMore:l,hasExhaustiveItems:c,canToggleShowMore:u}),d)}),function(){return L(null,e)})({attribute:r,operator:i,limit:a,showMore:s,showMoreLimit:l,sortBy:o,escapeFacetValues:b,transformItems:t});throw new Error(_i("The `container` option is required."))},numericMenu:function(e){var t,o,a,s,l,c,e=e||{},n=e.container,r=e.attribute,i=e.items,u=e.cssClasses,u=void 0===u?{}:u,d=e.templates,d=void 0===d?Ci:d,e=e.transformItems;if(n)return t=P(n),n={root:x(Ti(),u.root),noRefinementRoot:x(Ti({modifierName:"noRefinement"}),u.noRefinementRoot),list:x(Ti({descendantName:"list"}),u.list),item:x(Ti({descendantName:"item"}),u.item),selectedItem:x(Ti({descendantName:"item",modifierName:"selected"}),u.selectedItem),label:x(Ti({descendantName:"label"}),u.label),radio:x(Ti({descendantName:"radio"}),u.radio),labelText:x(Ti({descendantName:"labelText"}),u.labelText)},o=(u={containerNode:t,attribute:r,cssClasses:n,renderState:{},templates:d}).containerNode,a=u.attribute,s=u.cssClasses,l=u.renderState,c=u.templates,Vn(function(e,t){var n=e.createURL,r=e.refine,i=e.items;t?l.templateProps=N({defaultTemplates:Ci,templatesConfig:e.instantSearchInstance.templatesConfig,templates:c}):L(k(ei,{createURL:n,cssClasses:s,facetValues:i,templateProps:l.templateProps,toggleRefinement:r,attribute:a}),o)},function(){return L(null,t)})({attribute:r,items:i,transformItems:e});throw new Error(wi("The `container` option is required."))},pagination:function(){var e,i,o,a,s,l,c,u,d,p,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.templates,r=void 0===r?{}:r,h=t.cssClasses,h=void 0===h?{}:h,f=t.totalPages,m=t.padding,g=t.showFirst,g=void 0===g||g,v=t.showLast,v=void 0===v||v,y=t.showPrevious,y=void 0===y||y,b=t.showNext,b=void 0===b||b,t=t.scrollTo,t=void 0===t?"body":t;if(n)return e=P(n),t=!1!==(n=!0===t?"body":t)&&P(n),n={root:x(U(),h.root),noRefinementRoot:x(U({modifierName:"noRefinement"}),h.noRefinementRoot),list:x(U({descendantName:"list"}),h.list),item:x(U({descendantName:"item"}),h.item),firstPageItem:x(U({descendantName:"item",modifierName:"firstPage"}),h.firstPageItem),lastPageItem:x(U({descendantName:"item",modifierName:"lastPage"}),h.lastPageItem),previousPageItem:x(U({descendantName:"item",modifierName:"previousPage"}),h.previousPageItem),nextPageItem:x(U({descendantName:"item",modifierName:"nextPage"}),h.nextPageItem),pageItem:x(U({descendantName:"item",modifierName:"page"}),h.pageItem),selectedItem:x(U({descendantName:"item",modifierName:"selected"}),h.selectedItem),disabledItem:x(U({descendantName:"item",modifierName:"disabled"}),h.disabledItem),link:x(U({descendantName:"link"}),h.link)},h=M({},Ri,{},r),Xn((i=(r={containerNode:e,cssClasses:n,templates:h,showFirst:g,showLast:v,showPrevious:y,showNext:b,padding:m,scrollToNode:t}).containerNode,o=r.cssClasses,a=r.templates,s=r.totalPages,l=r.showFirst,c=r.showLast,u=r.showPrevious,d=r.showNext,p=r.scrollToNode,function(e,t){var n=e.createURL,r=e.refine;t||L(k(Pi,{createURL:n,cssClasses:o,currentPage:e.currentRefinement,templates:a,nbHits:e.nbHits,nbPages:e.nbPages,pages:e.pages,totalPages:s,isFirstPage:e.isFirstPage,isLastPage:e.isLastPage,setCurrentPage:function(e){r(e),!1!==p&&p.scrollIntoView()},showFirst:l,showLast:c,showPrevious:u,showNext:d}),i)}),function(){return L(null,e)})({totalPages:f,padding:m});throw new Error(Ii("The `container` option is required."))},rangeInput:function(){var e,a,s,l,c,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attribute,i=t.min,o=t.max,u=t.precision,u=void 0===u?0:u,d=t.cssClasses,d=void 0===d?{}:d,t=t.templates,t=void 0===t?{}:t;if(n)return e=P(n),n=M({separatorText:"to",submitText:"Go"},t),t={root:x(Ni(),d.root),noRefinement:x(Ni({modifierName:"noRefinement"})),form:x(Ni({descendantName:"form"}),d.form),label:x(Ni({descendantName:"label"}),d.label),input:x(Ni({descendantName:"input"}),d.input),inputMin:x(Ni({descendantName:"input",modifierName:"min"}),d.inputMin),inputMax:x(Ni({descendantName:"input",modifierName:"max"}),d.inputMax),separator:x(Ni({descendantName:"separator"}),d.separator),submit:x(Ni({descendantName:"submit"}),d.submit)},M({},Jn((a=(d={containerNode:e,cssClasses:t,templates:n,renderState:{}}).containerNode,s=d.cssClasses,l=d.renderState,c=d.templates,function(e,t){var n=e.refine,r=e.range,i=e.start,o=e.widgetParams;t?l.templateProps=N({templatesConfig:e.instantSearchInstance.templatesConfig,templates:c}):(t=r.min,e=r.max,i=(r=D(i,2))[0],r=r[1],o=1/Math.pow(10,o.precision),L(k(Mi,{min:t,max:e,step:o,values:{min:i!==-1/0&&i!==t?i:void 0,max:r!==1/0&&r!==e?r:void 0},cssClasses:s,refine:n,templateProps:l.templateProps}),a))}),function(){return L(null,e)})({attribute:r,min:i,max:o,precision:u}),{$$type:"ais.rangeInput"});throw new Error(Di("The `container` option is required."))},searchBox:function(){var e,n,r,i,o,a,s,l,c,u,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=t.container,p=t.placeholder,p=void 0===p?"":p,h=t.cssClasses,h=void 0===h?{}:h,f=t.autofocus,f=void 0!==f&&f,m=t.searchAsYouType,m=void 0===m||m,g=t.showReset,g=void 0===g||g,v=t.showSubmit,v=void 0===v||v,y=t.showLoadingIndicator,y=void 0===y||y,b=t.queryHook,t=t.templates;if(d)return e=P(d),d={root:x(xi(),h.root),form:x(xi({descendantName:"form"}),h.form),input:x(xi({descendantName:"input"}),h.input),submit:x(xi({descendantName:"submit"}),h.submit),submitIcon:x(xi({descendantName:"submitIcon"}),h.submitIcon),reset:x(xi({descendantName:"reset"}),h.reset),resetIcon:x(xi({descendantName:"resetIcon"}),h.resetIcon),loadingIndicator:x(xi({descendantName:"loadingIndicator"}),h.loadingIndicator),loadingIcon:x(xi({descendantName:"loadingIcon"}),h.loadingIcon)},rr((h={containerNode:e,cssClasses:d,placeholder:p,templates:M({},bi,{},t),autofocus:f,searchAsYouType:m,showReset:g,showSubmit:v,showLoadingIndicator:y},n=h.containerNode,r=h.cssClasses,i=h.placeholder,o=h.templates,a=h.autofocus,s=h.searchAsYouType,l=h.showReset,c=h.showSubmit,u=h.showLoadingIndicator,function(e){var t=e.refine;L(k(Zr,{query:e.query,placeholder:i,autofocus:a,refine:t,searchAsYouType:s,templates:o,showSubmit:c,showReset:l,showLoadingIndicator:u,isSearchStalled:e.isSearchStalled,cssClasses:r}),n)}),function(){return L(null,e)})({queryHook:b});throw new Error(Li("The `container` option is required."))},rangeSlider:function(){var e,o,a,s,l,c,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attribute,i=t.min,u=t.max,d=t.cssClasses,d=void 0===d?{}:d,p=t.step,h=t.pips,h=void 0===h||h,f=t.precision,f=void 0===f?0:f,t=t.tooltips,t=void 0===t||t;if(n)return e=P(n),n={root:x(Ki(),d.root),disabledRoot:x(Ki({modifierName:"disabled"}),d.disabledRoot)},M({},Jn((o=(d={containerNode:e,step:p,pips:h,tooltips:t,renderState:{},cssClasses:n}).containerNode,a=d.cssClasses,s=d.pips,l=d.step,c=d.tooltips,function(e,t){var n,r=e.refine,i=e.range;t||(t=i.min,i=i.max,n=(e=D(e.start,2))[0],L(k(Wi,{cssClasses:a,refine:r,min:t,max:i,values:[i<(r=n===-1/0?t:n)?i:r,(r=(n=e[1])===1/0?i:n)<t?t:r],tooltips:c,step:l,pips:s}),o))}),function(){return L(null,e)})({attribute:r,min:i,max:u,precision:f}),{$$type:"ais.rangeSlider"});throw new Error(qi("The `container` option is required."))},sortBy:function(){var e,r,i,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,o=t.items,a=t.cssClasses,a=void 0===a?{}:a,t=t.transformItems;if(n)return e=P(n),n={root:x(Zi(),a.root),select:x(Zi({descendantName:"select"}),a.select),option:x(Zi({descendantName:"option"}),a.option)},or((r=(a={containerNode:e,cssClasses:n}).containerNode,i=a.cssClasses,function(e,t){var n=e.currentRefinement;t||L(k("div",{className:i.root},k(ci,{cssClasses:i,currentValue:n,options:e.options,setValue:e.refine})),r)}),function(){return L(null,e)})({items:o,transformItems:t});throw new Error(Xi("The `container` option is required."))},ratingMenu:function(){var e,o,a,s,l,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attribute,i=t.max,i=void 0===i?5:i,c=t.cssClasses,c=void 0===c?{}:c,t=t.templates,t=void 0===t?Ji:t;if(n)return e=P(n),n={root:x(u(),c.root),noRefinementRoot:x(u({modifierName:"noRefinement"}),c.noRefinementRoot),list:x(u({descendantName:"list"}),c.list),item:x(u({descendantName:"item"}),c.item),selectedItem:x(u({descendantName:"item",modifierName:"selected"}),c.selectedItem),disabledItem:x(u({descendantName:"item",modifierName:"disabled"}),c.disabledItem),link:x(u({descendantName:"link"}),c.link),starIcon:x(u({descendantName:"starIcon"}),c.starIcon),fullStarIcon:x(u({descendantName:"starIcon",modifierName:"full"}),c.fullStarIcon),emptyStarIcon:x(u({descendantName:"starIcon",modifierName:"empty"}),c.emptyStarIcon),label:x(u({descendantName:"label"}),c.label),count:x(u({descendantName:"count"}),c.count)},lr((o=(c={containerNode:e,cssClasses:n,renderState:{},templates:t}).containerNode,a=c.cssClasses,s=c.templates,l=c.renderState,function(e,t){var n=e.refine,r=e.items,i=e.createURL;t?l.templateProps=N({defaultTemplates:Ji,templatesConfig:e.instantSearchInstance.templatesConfig,templates:s}):L(k(ei,{createURL:i,cssClasses:a,facetValues:r,templateProps:l.templateProps,toggleRefinement:n},k("svg",{xmlns:"http://www.w3.org/2000/svg",style:"display:none;"},k("symbol",{id:u({descendantName:"starSymbol"}),viewBox:"0 0 24 24"},to),k("symbol",{id:u({descendantName:"starEmptySymbol"}),viewBox:"0 0 24 24"},no))),o)}),function(){return L(null,e)})({attribute:r,max:i});throw new Error(eo("The `container` option is required."))},stats:function(){var e,l,c,u,d,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.cssClasses,r=void 0===r?{}:r,t=t.templates,t=void 0===t?io:t;if(n)return e=P(n),n={root:x(ao(),r.root),text:x(ao({descendantName:"text"}),r.text)},ur((l=(r={containerNode:e,cssClasses:n,renderState:{},templates:t}).containerNode,c=r.cssClasses,u=r.renderState,d=r.templates,function(e,t){var n=e.hitsPerPage,r=e.nbHits,i=e.nbPages,o=e.page,a=e.processingTimeMS,s=e.query;t?u.templateProps=N({defaultTemplates:io,templatesConfig:e.instantSearchInstance.templatesConfig,templates:d}):L(k(ro,{cssClasses:c,hitsPerPage:n,nbHits:r,nbPages:i,page:o,processingTimeMS:a,query:s,templateProps:u.templateProps}),l)}),function(){return L(null,e)})();throw new Error(oo("The `container` option is required."))},toggleRefinement:function(){var e,o,a,s,l,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,r=t.attribute,i=t.cssClasses,i=void 0===i?{}:i,c=t.templates,c=void 0===c?lo:c,u=t.on,u=void 0===u||u,t=t.off;if(n)return e=P(n),n={root:x(uo(),i.root),label:x(uo({descendantName:"label"}),i.label),checkbox:x(uo({descendantName:"checkbox"}),i.checkbox),labelText:x(uo({descendantName:"labelText"}),i.labelText)},hr((o=(i={containerNode:e,cssClasses:n,renderState:{},templates:c}).containerNode,a=i.cssClasses,s=i.renderState,l=i.templates,function(e,t){var n=e.value,r=e.createURL,i=e.refine;t?s.templateProps=N({defaultTemplates:lo,templatesConfig:e.instantSearchInstance.templatesConfig,templates:l}):L(k(so,{createURL:r,cssClasses:a,currentRefinement:n,templateProps:s.templateProps,refine:function(e){return i({isRefined:e})}}),o)}),function(){return L(null,e)})({attribute:r,on:u,off:t});throw new Error(co("The `container` option is required."))},analytics:function(e){var n,r,i,o,e=e||{},a=e.pushFunction,t=e.delay,s=void 0===t?3e3:t,t=e.triggerOnUIInteraction,l=void 0!==t&&t,t=e.pushInitialSearch,e=e.pushPagination,c=void 0!==e&&e;if(a)return r=null,o=!(i="")!==(void 0===t||t),{init:function(){!0===l&&(document.addEventListener("click",d),window.addEventListener("beforeunload",p))},render:function(e){var t=e.results;!0!==o?(r={results:t,state:e.state},n&&clearTimeout(n),n=window.setTimeout(function(){return u(r)},s)):o=!1},dispose:function(){!0===l&&(document.removeEventListener("click",d),window.removeEventListener("beforeunload",p))}};throw new Error(ho("The `pushFunction` option is required."));function u(e){var t,n,r;null!==e&&(t=[],n=(e=>{var t,n,r=[];for(t in e)e.hasOwnProperty(t)&&(n=e[t].join("+"),r.push("".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(t),"_").concat(encodeURIComponent(n))));return r.join("&")})(M({},e.state.disjunctiveFacetsRefinements,{},e.state.facetsRefinements,{},e.state.hierarchicalFacetsRefinements)),r=(e=>{var t,n=[];for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(r.hasOwnProperty(">=")&&r.hasOwnProperty("<="))r[">="]&&r[">="][0]===r["<="]&&r["<="][0]?n.push("".concat(t,"=").concat(t,"_").concat(r[">="])):n.push("".concat(t,"=").concat(t,"_").concat(r[">="],"to").concat(r["<="]));else if(r.hasOwnProperty(">="))n.push("".concat(t,"=").concat(t,"_from").concat(r[">="]));else if(r.hasOwnProperty("<="))n.push("".concat(t,"=").concat(t,"_to").concat(r["<="]));else if(r.hasOwnProperty("=")){var i,o=[];for(i in r["="])r["="].hasOwnProperty(i)&&o.push(r["="][i]);n.push("".concat(t,"=").concat(t,"_").concat(o.join("-")))}}return n.join("&")})(e.state.numericRefinements),""!==n&&t.push(n),""!==r&&t.push(r),n=t.join("&"),r="Query: ".concat(e.state.query||"",", ").concat(n),!0===c&&(r+=", Page: ".concat(e.state.page||0)),i!==r)&&(a(n,e.state,e.results),i=r)}function d(){u(r)}function p(){u(r)}},breadcrumb:function(e){var t,a,s,l,c,e=e||{},n=e.container,r=e.attributes,i=e.separator,o=e.rootPath,u=e.transformItems,d=e.templates,d=void 0===d?fo:d,e=e.cssClasses,e=void 0===e?{}:e;if(n)return t=P(n),n={root:x(go(),e.root),noRefinementRoot:x(go({modifierName:"noRefinement"}),e.noRefinementRoot),list:x(go({descendantName:"list"}),e.list),item:x(go({descendantName:"item"}),e.item),selectedItem:x(go({descendantName:"item",modifierName:"selected"}),e.selectedItem),separator:x(go({descendantName:"separator"}),e.separator),link:x(go({descendantName:"link"}),e.link)},a=(e={containerNode:t,cssClasses:n,renderState:{},templates:d}).containerNode,s=e.cssClasses,l=e.renderState,c=e.templates,fr(function(e,t){var n=e.canRefine,r=e.createURL,i=e.items,o=e.refine;t?l.templateProps=N({defaultTemplates:fo,templatesConfig:e.instantSearchInstance.templatesConfig,templates:c}):L(k(po,{canRefine:n,cssClasses:s,createURL:r,items:i,refine:o,templateProps:l.templateProps}),a)},function(){return L(null,t)})({attributes:r,separator:i,rootPath:o,transformItems:u});throw new Error(mo("The `container` option is required."))},menuSelect:function(e){var t,o,a,s,l,n=e.container,r=e.attribute,i=e.sortBy,i=void 0===i?["name:asc"]:i,c=e.limit,c=void 0===c?10:c,u=e.cssClasses,u=void 0===u?{}:u,d=e.templates,d=void 0===d?yo:d,e=e.transformItems;if(n)return t=P(n),n={root:x(So(),u.root),noRefinementRoot:x(So({modifierName:"noRefinement"}),u.noRefinementRoot),select:x(So({descendantName:"select"}),u.select),option:x(So({descendantName:"option"}),u.option)},Gn((o=(u={containerNode:t,cssClasses:n,renderState:{},templates:d}).containerNode,a=u.cssClasses,s=u.renderState,l=u.templates,function(e,t){var n=e.refine,r=e.items,i=e.canRefine;t?s.templateProps=N({defaultTemplates:yo,templatesConfig:e.instantSearchInstance.templatesConfig,templates:l}):L(k(vo,{cssClasses:a,items:r,refine:n,templateProps:s.templateProps,canRefine:i}),o)}),function(){return L(null,t)})({attribute:r,limit:c,sortBy:i,transformItems:e});throw new Error(bo("The `container` option is required."))},poweredBy:function(){var e,r,i,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.container,o=t.cssClasses,o=void 0===o?{}:o,t=t.theme,t=void 0===t?"light":t;if(n)return e=P(n),n={root:x(Ao(),Ao({modifierName:"dark"===t?"dark":"light"}),o.root),link:x(Ao({descendantName:"link"}),o.link),logo:x(Ao({descendantName:"logo"}),o.logo)},Sr((r=(o={containerNode:e,cssClasses:n}).containerNode,i=o.cssClasses,function(e,t){var n=e.url;t&&(t=e.widgetParams.theme,L(k(_o,{cssClasses:i,url:n,theme:t}),r))}),function(){return L(null,e)})({theme:t});throw new Error(Po("The `container` option is required."))},panel:function(e){var e=e||{},t=e.templates,u=void 0===t?{}:t,t=e.hidden,d=void 0===t?function(){return!1}:t,t=e.collapsed,e=e.cssClasses,e=void 0===e?{}:e,p=document.createElement("div"),h=Boolean(t),f="function"==typeof t?t:function(){return!1},m={root:x(qo(),e.root),noRefinementRoot:x(qo({modifierName:"noRefinement"}),e.noRefinementRoot),collapsibleRoot:x(qo({modifierName:"collapsible"}),e.collapsibleRoot),collapsedRoot:x(qo({modifierName:"collapsed"}),e.collapsedRoot),collapseButton:x(qo({descendantName:"collapseButton"}),e.collapseButton),collapseIcon:x(qo({descendantName:"collapseIcon"}),e.collapseIcon),body:x(qo({descendantName:"body"}),e.body),header:x(qo({descendantName:"header"}),e.header),footer:x(qo({descendantName:"footer"}),e.footer)};return function(c){return function(e){var i,t,n,r,o,a,s,l=(e||{}).container;if(l)return t={header:"",footer:"",collapseButtonText:function(e){e=e.collapsed;return'<svg\n          class="'.concat(m.collapseIcon,'"\n          width="1em"\n          height="1em"\n          viewBox="0 0 500 500"\n        >\n        <path d="').concat(e?"M100 250l300-150v300z":"M250 400l150-300H100z",'" fill="currentColor" />\n        </svg>')}},t={containerNode:P(l),bodyContainerNode:p,cssClasses:m,templates:M({},t,{},u)},n=t.containerNode,r=t.bodyContainerNode,o=t.cssClasses,a=t.templates,(i=function(e){var t=e.options;L(k(Vo,{cssClasses:o,hidden:e.hidden,collapsible:e.collapsible,isCollapsed:e.collapsed,templates:a,data:t,bodyElement:r}),n)})({options:{},hidden:!0,collapsible:h,collapsed:!1}),s=c(M({},e,{container:p})),M({},s,{dispose:function(){if(L(null,P(l)),"function"==typeof s.dispose){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=s.dispose).call.apply(e,[this].concat(n))}},render:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];i({options:r,hidden:Boolean(d(r)),collapsible:h,collapsed:Boolean(f(r))}),"function"==typeof s.render&&(r=s.render).call.apply(r,[this].concat(t))}});throw new Error(Wo("The `container` option is required in the widget within the panel."))}}},voiceSearch:function(e){var t,e=0<arguments.length&&void 0!==e?e:{},n=e.container,r=e.cssClasses,r=void 0===r?{}:r,i=e.templates,o=e.searchAsYouSpeak,o=void 0!==o&&o,a=e.language,s=e.additionalQueryParameters,e=e.createVoiceSearchHelper;if(n)return t=P(n),n={root:x(Xo(),r.root),button:x(Xo({descendantName:"button"}),r.button),status:x(Xo({descendantName:"status"}),r.status)},Mr(Ho,function(){return L(null,t)})({container:t,cssClasses:n,templates:M({},Ko,{},i),searchAsYouSpeak:o,language:a,additionalQueryParameters:s,createVoiceSearchHelper:e});throw new Error(Qo("The `container` option is required."))},queryRuleCustomData:function(e){var t,e=0<arguments.length&&void 0!==e?e:{},n=e.container,r=e.cssClasses,r=void 0===r?{}:r,i=e.templates,i=void 0===i?{}:i,e=e.transformItems,e=void 0===e?function(e){return e}:e;if(n)return r={root:x(Jo(),r.root)},i=M({},{default:function(e){e=e.items;return JSON.stringify(e,null,2)}},{},i),t=P(n),M({},Ir(zo,function(){L(null,t)})({container:t,cssClasses:r,templates:i,transformItems:e}),{$$type:"ais.queryRuleCustomData"});throw new Error(Zo("The `container` option is required."))},queryRuleContext:function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.trackedFilters,e=e.transformRuleContexts;if(t)return M({},Ir(O)({trackedFilters:t,transformRuleContexts:e}),{$$type:"ais.queryRuleContext"});throw new Error(ea("The `trackedFilters` option is required."))},index:ct,places:function(e){var e=e||{},t=e.placesReference,t=void 0===t?void 0:t,n=e.defaultPosition,i=void 0===n?[]:n,n=T(e,["placesReference","defaultPosition"]);if("function"!=typeof t)throw new Error("The `placesReference` option requires a valid Places.js reference.");var o=t(n),a={query:"",initialLatLngViaIP:void 0,isInitialLatLngViaIPSet:!1};return{$$type:"ais.places",init:function(e){var r=e.helper;o.on("change",function(e){var e=e.suggestion,t=e.value,e=e.latlng,n=e.lat,e=e.lng;a.query=t,r.setQueryParameter("insideBoundingBox",void 0).setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng","".concat(n,",").concat(e)).search()}),o.on("clear",function(){a.query="",r.setQueryParameter("insideBoundingBox",void 0),1<i.length?r.setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng",i.join(",")):r.setQueryParameter("aroundLatLngViaIP",a.initialLatLngViaIP).setQueryParameter("aroundLatLng",void 0),r.search()})},getWidgetState:function(e,t){t=t.searchParameters.aroundLatLng||i.join(",");return t!==i.join(",")||a.query?M({},e,{places:{query:a.query,position:t}}):(e.places,T(e,["places"]))},getWidgetSearchParameters:function(e,t){var t=t.uiState.places||{},n=t.query,n=void 0===n?"":n,t=t.position,t=void 0===t?i.join(","):t;return a.query=n,a.isInitialLatLngViaIPSet||(a.isInitialLatLngViaIPSet=!0,a.initialLatLngViaIP=e.aroundLatLngViaIP),o.setVal(n),o.close(),e.setQueryParameter("insideBoundingBox",void 0).setQueryParameter("aroundLatLngViaIP",!1).setQueryParameter("aroundLatLng",t||void 0)}}}}),Ie=Object.freeze({__proto__:null,createInsightsMiddleware:function(e){var n,o,e=e||{},r=e.insightsClient,a=e.onEvent;if(null===r||r)return n=Boolean(r),o=null===r?O:r,function(e){var i=e.instantSearchInstance;return o("_get","_hasCredentials",function(e){var t,n,r;e||(n=(t=D((e=i.client).transporter?(t=(n=e.transporter).headers,n=n.queryParameters,[t[r="x-algolia-application-id"]||n[r],t[r="x-algolia-api-key"]||n[r]]):[e.applicationID,e.apiKey],2))[0],r=t[1],o("_get","_userToken",function(e){}),o("init",{appId:n,apiKey:r}))}),{onStateChange:function(){},subscribe:function(){function t(e){e&&i.mainIndex.getHelper().setQueryParameter("userToken",e)}i.mainIndex.getHelper().setQueryParameter("clickAnalytics",!0),n&&t((()=>{for(var e="".concat("_ALGOLIA","="),t=document.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(e))return r.substring(e.length,r.length)}})()),Array.isArray(o.queue)&&o.queue.forEach(function(e){e=D(e,2);"setUserToken"===e[0]&&t(e[1])}),o("onUserTokenChange",t,{immediate:!0}),i.sendEventToInsights=function(e){a?a(e,r):e.insightsMethod&&o(e.insightsMethod,e.payload)}},unsubscribe:function(){o("onUserTokenChange",void 0),i.sendEventToInsights=O}}};throw new Error("The `insightsClient` option is required. To disable, set it to `null`.")},createRouterMiddleware:Ht}),ta=Object.freeze({__proto__:null,history:jt});function na(e){return e.configure,T(e,["configure"])}var ra=Object.freeze({__proto__:null,simple:_t,singleIndex:function(t){return{stateToRoute:function(e){return na(e[t]||{})},routeToState:function(e){return w({},t,na(0<arguments.length&&void 0!==e?e:{}))}}}});function ia(e){e=e||{};return e.page,T(e,["page"])}var oa="ais.infiniteHits";function aa(){return"undefined"!=typeof window&&void 0!==window.sessionStorage}function sa(e){return new Wt(e)}return sa.routers=ta,sa.stateMappings=ra,sa.connectors=ue,sa.widgets=Oe,sa.version="4.8.3",sa.createInfiniteHitsSessionStorageCache=function(){return{read:function(e){var t=e.state;if(!aa())return null;try{var n=JSON.parse(window.sessionStorage.getItem(oa));return n&&Ve(n.state,ia(t))?n.hits:null}catch(e){if(e instanceof SyntaxError)try{window.sessionStorage.removeItem(oa)}catch(e){}return null}},write:function(e){var t=e.state,n=e.hits;if(aa())try{window.sessionStorage.setItem(oa,JSON.stringify({state:ia(t),hits:n}))}catch(e){}}}},sa.highlight=gt,sa.snippet=yt,sa.insights=bt,sa.middlewares=Ie,sa}),((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()})(this,function(){var x;function d(){return x.apply(null,arguments)}function $(e){return"[object Array]"===Object.prototype.toString.call(e)}function U(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){for(var n in t)p(t,n)&&(e[n]=t[n]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function B(e,t,n,r){return je(e,t,n,r,!0).utc()}function h(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),e._pf}function G(e){var t;return null==e._isValid&&(t=h(e),e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict)&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),e._isValid}function V(e){var t=B(NaN);return null!=e?F(h(t),e):h(t).userInvalidated=!0,t}var j=d.momentProperties=[];function H(e,t){var n,r,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=h(t)),void 0!==t._locale&&(e._locale=t._locale),0<j.length)for(n in j)void 0!==(i=t[r=j[n]])&&(e[r]=i);return e}var Y=!1;function z(e){H(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),!1===Y&&(Y=!0,d.updateOffset(this),Y=!1)}function f(e){return e instanceof z||null!=e&&null!=e._isAMomentObject}function s(e){return e<0?Math.ceil(e):Math.floor(e)}function l(e){var e=+e,t=0;return t=0!=e&&isFinite(e)?s(e):t}function W(e,t,n){for(var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0,a=0;a<r;a++)(n&&e[a]!==t[a]||!n&&l(e[a])!==l(t[a]))&&o++;return o+i}function q(){}var K,n={};function Q(e){return e&&e.toLowerCase().replace("_","-")}function X(e){var t;if(!n[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=K._abbr,require("./locale/"+e),Z(t)}catch(e){}return n[e]}function Z(e,t){return(K=e&&(e=void 0===t?m(e):J(e,t))?e:K)._abbr}function J(e,t){return null!==t?(t.abbr=e,n[e]=n[e]||new q,n[e].set(t),Z(e),n[e]):(delete n[e],null)}function m(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return K;if(!$(e)){if(t=X(e))return t;e=[e]}for(var n,r,i,o,a=e,s=0;s<a.length;){for(n=(o=Q(a[s]).split("-")).length,r=(r=Q(a[s+1]))?r.split("-"):null;0<n;){if(i=X(o.slice(0,n).join("-")))return i;if(r&&r.length>=n&&W(o,r,!0)>=n-1)break;n--}s++}return null}var ee={};function e(e,t){var n=e.toLowerCase();ee[n]=ee[n+"s"]=ee[t]=e}function o(e){return"string"==typeof e?ee[e]||ee[e.toLowerCase()]:void 0}function te(e){var t,n,r={};for(n in e)p(e,n)&&(t=o(n))&&(r[t]=e[n]);return r}function ne(t,n){return function(e){return null!=e?(ie(this,t,e),d.updateOffset(this,n),this):re(this,t)}}function re(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function ie(e,t,n){e._d["set"+(e._isUTC?"UTC":"")+t](n)}function oe(e,t){if("object"==typeof e)for(var n in e)this.set(n,e[n]);else if("function"==typeof this[e=o(e)])return this[e](t);return this}function ae(e,t,n){var r=""+Math.abs(e);return(0<=e?n?"+":"":"-")+Math.pow(10,Math.max(0,t-r.length)).toString().substr(1)+r}var se=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,le=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ce={},ue={};function r(e,t,n,r){var i="string"==typeof r?function(){return this[r]()}:r;e&&(ue[e]=i),t&&(ue[t[0]]=function(){return ae(i.apply(this,arguments),t[1],t[2])}),n&&(ue[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function de(e,t){return e.isValid()?(t=pe(t,e.localeData()),ce[t]=ce[t]||(n=>{for(var e,r=n.match(se),i=0,o=r.length;i<o;i++)ue[r[i]]?r[i]=ue[r[i]]:r[i]=(e=r[i]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){var t="";for(i=0;i<o;i++)t+=r[i]instanceof Function?r[i].call(e,n):r[i];return t}})(t),ce[t](e)):e.localeData().invalidDate()}function pe(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(le.lastIndex=0;0<=n&&le.test(e);)e=e.replace(le,r),le.lastIndex=0,--n;return e}var he=/\d/,t=/\d\d/,i=/\d{3}/,a=/\d{4}/,c=/[+-]?\d{6}/,u=/\d\d?/,fe=/\d{1,3}/,g=/\d{1,4}/,v=/[+-]?\d{1,6}/,me=/\d+/,ge=/[+-]?\d+/,ve=/Z|[+-]\d\d:?\d\d/gi,y=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ye={};function b(e,t,n){ye[e]="function"==typeof(e=t)&&"[object Function]"===Object.prototype.toString.call(e)?t:function(e){return e&&n?n:t}}var be={};function S(e,n){var t,r=n;for("string"==typeof e&&(e=[e]),"number"==typeof n&&(r=function(e,t){t[n]=l(e)}),t=0;t<e.length;t++)be[e[t]]=r}function Se(e,i){S(e,function(e,t,n,r){n._w=n._w||{},i(e,n._w,n,r)})}var _=0,E=1,C=2,w=3,T=4,A=5,P=6;function _e(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}r("M",["MM",2],"Mo",function(){return this.month()+1}),r("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),r("MMMM",0,0,function(e){return this.localeData().months(this,e)}),e("month","M"),b("M",u),b("MM",u,t),b("MMM",y),b("MMMM",y),S(["M","MM"],function(e,t){t[E]=l(e)-1}),S(["MMM","MMMM"],function(e,t,n,r){r=n._locale.monthsParse(e,r,n._strict);null!=r?t[E]=r:h(n).invalidMonth=e});var Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Ce="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function we(e,t){var n;"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))||(n=Math.min(e.date(),_e(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n))}function Te(e){return null!=e?(we(this,e),d.updateOffset(this,!0),this):re(this,"Month")}function Ae(e){var t=e._a;return t&&-2===h(e).overflow&&(t=t[E]<0||11<t[E]?E:t[C]<1||t[C]>_e(t[_],t[E])?C:t[w]<0||24<t[w]||24===t[w]&&(0!==t[T]||0!==t[A]||0!==t[P])?w:t[T]<0||59<t[T]?T:t[A]<0||59<t[A]?A:t[P]<0||999<t[P]?P:-1,h(e)._overflowDayOfYear&&(t<_||C<t)&&(t=C),h(e).overflow=t),e}function Pe(e){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function O(e,t){var n=!0;return F(function(){return n&&(Pe(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}var Oe={};d.suppressDeprecationWarnings=!1;var Ie=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Re=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Me=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],De=/^\/?Date\((\-?\d+)/i;function Ne(e){var t,n,r=e._i,i=Ie.exec(r);if(i){for(h(e).iso=!0,t=0,n=Re.length;t<n;t++)if(Re[t][1].exec(r)){e._f=Re[t][0];break}for(t=0,n=Me.length;t<n;t++)if(Me[t][1].exec(r)){e._f+=(i[6]||" ")+Me[t][0];break}r.match(ve)&&(e._f+="Z"),Ge(e)}else e._isValid=!1}function ke(e,t,n,r,i,o,a){t=new Date(e,t,n,r,i,o,a);return e<1970&&t.setFullYear(e),t}function Le(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function xe(e){return $e(e)?366:365}function $e(e){return e%4==0&&e%100!=0||e%400==0}d.createFromInputFallback=O("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),r(0,["YY",2],0,function(){return this.year()%100}),r(0,["YYYY",4],0,"year"),r(0,["YYYYY",5],0,"year"),r(0,["YYYYYY",6,!0],0,"year"),e("year","y"),b("Y",ge),b("YY",u,t),b("YYYY",g,a),b("YYYYY",v,c),b("YYYYYY",v,c),S(["YYYYY","YYYYYY"],_),S("YYYY",function(e,t){t[_]=2===e.length?d.parseTwoDigitYear(e):l(e)}),S("YY",function(e,t){t[_]=d.parseTwoDigitYear(e)});var Ue=ne("FullYear",!(d.parseTwoDigitYear=function(e){return l(e)+(68<l(e)?1900:2e3)}));function I(e,t,n){var t=n-t,n=n-e.day();return t<n&&(n-=7),n<t-7&&(n+=7),t=R(e).add(n,"d"),{week:Math.ceil(t.dayOfYear()/7),year:t.year()}}r("w",["ww",2],"wo","week"),r("W",["WW",2],"Wo","isoWeek"),e("week","w"),e("isoWeek","W"),b("w",u),b("ww",u,t),b("W",u),b("WW",u,t),Se(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=l(e)});function Fe(e,t,n){return null!=e?e:null!=t?t:n}function Be(e){var t,n,r,i,o,a,s,l,c,u=[];if(!e._d){for(r=e,c=new Date,n=r._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()],e._w&&null==e._a[C]&&null==e._a[E]&&(null!=(c=(r=e)._w).GG||null!=c.W||null!=c.E?(s=1,l=4,i=Fe(c.GG,r._a[_],I(R(),1,4).year),o=Fe(c.W,1),a=Fe(c.E,1)):(s=r._locale._week.dow,l=r._locale._week.doy,i=Fe(c.gg,r._a[_],I(R(),s,l).year),o=Fe(c.w,1),null!=c.d?(a=c.d)<s&&++o:a=null!=c.e?c.e+s:s),c=((e,t,n,r,i)=>{var o=Le(e,0,1+(r=6+i-r)).getUTCDay();return o<i&&(o+=7),{year:0<(r=1+r+7*(t-1)-o+(n=null!=n?+n:i))?e:e-1,dayOfYear:0<r?r:xe(e-1)+r}})(i,o,a,l,s),r._a[_]=c.year,r._dayOfYear=c.dayOfYear),e._dayOfYear&&(i=Fe(e._a[_],n[_]),e._dayOfYear>xe(i)&&(h(e)._overflowDayOfYear=!0),o=Le(i,0,e._dayOfYear),e._a[E]=o.getUTCMonth(),e._a[C]=o.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=u[t]=n[t];for(;t<7;t++)e._a[t]=u[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[w]&&0===e._a[T]&&0===e._a[A]&&0===e._a[P]&&(e._nextDay=!0,e._a[w]=0),e._d=(e._useUTC?Le:ke).apply(null,u),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[w]=24)}}function Ge(e){if(e._f===d.ISO_8601)Ne(e);else{e._a=[],h(e).empty=!0;for(var t,n,r,i,o,a=""+e._i,s=a.length,l=0,c=pe(e._f,e._locale).match(se)||[],u=0;u<c.length;u++)t=c[u],(o=(a.match((o=e,p(ye,i=t)?ye[i](o._strict,o._locale):new RegExp(i.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))))||[])[0])&&(0<(i=a.substr(0,a.indexOf(o))).length&&h(e).unusedInput.push(i),a=a.slice(a.indexOf(o)+o.length),l+=o.length),ue[t]?(o?h(e).empty=!1:h(e).unusedTokens.push(t),i=t,r=e,null!=(n=o)&&p(be,i)&&be[i](n,r._a,r,i)):e._strict&&!o&&h(e).unusedTokens.push(t);h(e).charsLeftOver=s-l,0<a.length&&h(e).unusedInput.push(a),!0===h(e).bigHour&&e._a[w]<=12&&0<e._a[w]&&(h(e).bigHour=void 0),e._a[w]=((e,t,n)=>null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((e=e.isPM(n))&&t<12&&(t+=12),t=e||12!==t?t:0):t)(e._locale,e._a[w],e._meridiem),Be(e),Ae(e)}}function Ve(e){var t,n,r=e._i,i=e._f;if(e._locale=e._locale||m(e._l),null===r||void 0===i&&""===r)return V({nullInput:!0});if("string"==typeof r&&(e._i=r=e._locale.preparse(r)),f(r))return new z(Ae(r));if($(i)){var o,a,s,l,c,u=e;if(0===u._f.length)h(u).invalidFormat=!0,u._d=new Date(NaN);else{for(l=0;l<u._f.length;l++)c=0,o=H({},u),null!=u._useUTC&&(o._useUTC=u._useUTC),o._f=u._f[l],Ge(o),G(o)&&(c=(c+=h(o).charsLeftOver)+10*h(o).unusedTokens.length,h(o).score=c,null==s||c<s)&&(s=c,a=o);F(u,a||o)}}else if(i)Ge(e);else if(U(r))e._d=r;else if(void 0===(r=(i=e)._i))i._d=new Date;else U(r)?i._d=new Date(+r):"string"==typeof r?(n=i,null!==(t=De.exec(n._i))?n._d=new Date(+t[1]):(Ne(n),!1===n._isValid&&(delete n._isValid,d.createFromInputFallback(n)))):$(r)?(i._a=((e,t)=>{for(var n=[],r=0;r<e.length;++r)n.push(t(e[r],r));return n})(r.slice(0),function(e){return parseInt(e,10)}),Be(i)):"object"==typeof r?(t=i)._d||(n=te(t._i),t._a=[n.year,n.month,n.day||n.date,n.hour,n.minute,n.second,n.millisecond],Be(t)):"number"==typeof r?i._d=new Date(r):d.createFromInputFallback(i);return e}function je(e,t,n,r,i){var o={};return"boolean"==typeof n&&(r=n,n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=i,o._l=n,o._i=e,o._f=t,o._strict=r,(i=new z(Ae(Ve(i=o))))._nextDay&&(i.add(1,"d"),i._nextDay=void 0),i}function R(e,t,n,r){return je(e,t,n,r,!1)}r("DDD",["DDDD",3],"DDDo","dayOfYear"),e("dayOfYear","DDD"),b("DDD",fe),b("DDDD",i),S(["DDD","DDDD"],function(e,t,n){n._dayOfYear=l(e)}),d.ISO_8601=function(){};var He=O("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=R.apply(null,arguments);return e<this?this:e}),Ye=O("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=R.apply(null,arguments);return this<e?this:e});function ze(e,t){var n,r;if(!(t=1===t.length&&$(t[0])?t[0]:t).length)return R();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function We(e){var e=te(e),t=e.year||0,n=e.quarter||0,r=e.month||0,i=e.week||0,o=e.day||0;this._milliseconds=+(e.millisecond||0)+1e3*(e.second||0)+6e4*(e.minute||0)+36e5*(e.hour||0),this._days=+o+7*i,this._months=+r+3*n+12*t,this._data={},this._locale=m(),this._bubble()}function qe(e){return e instanceof We}function Ke(e,n){r(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+ae(~~(e/60),2)+n+ae(~~e%60,2)})}Ke("Z",":"),Ke("ZZ",""),b("Z",ve),b("ZZ",ve),S(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Xe(e)});var Qe=/([\+\-]|\d\d)/gi;function Xe(e){var e=(e||"").match(ve)||[],e=((e[e.length-1]||[])+"").match(Qe)||["-",0,0],t=60*e[1]+l(e[2]);return"+"===e[0]?t:-t}function Ze(e,t){var n;return t._isUTC?(t=t.clone(),n=(f(e)||U(e)?+e:+R(e))-+t,t._d.setTime(+t._d+n),d.updateOffset(t,!1),t):R(e).local()}function Je(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function et(){return this._isUTC&&0===this._offset}d.updateOffset=function(){};var tt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,nt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function M(e,t){var n,r=e;return qe(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(t=tt.exec(e))?(n="-"===t[1]?-1:1,r={y:0,d:l(t[C])*n,h:l(t[w])*n,m:l(t[T])*n,s:l(t[A])*n,ms:l(t[P])*n}):(t=nt.exec(e))?(n="-"===t[1]?-1:1,r={y:rt(t[2],n),M:rt(t[3],n),d:rt(t[4],n),h:rt(t[5],n),m:rt(t[6],n),s:rt(t[7],n),w:rt(t[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(t=((e,t)=>{var n;return t=Ze(t,e),e.isBefore(t)?n=it(e,t):((n=it(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n})(R(r.from),R(r.to)),(r={}).ms=t.milliseconds,r.M=t.months),n=new We(r),qe(e)&&p(e,"_locale")&&(n._locale=e._locale),n}function rt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function it(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function ot(i,o){return function(e,t){var n,r;return null===t||isNaN(+t)||(r="moment()."+(n=o)+"(period, number) is deprecated. Please use moment()."+o+"(number, period).",Oe[n]||(Pe(r),Oe[n]=!0),r=e,e=t,t=r),at(this,M(e="string"==typeof e?+e:e,t),i),this}}function at(e,t,n,r){var i=t._milliseconds,o=t._days,t=t._months;r=null==r||r,i&&e._d.setTime(+e._d+i*n),o&&ie(e,"Date",re(e,"Date")+o*n),t&&we(e,re(e,"Month")+t*n),r&&d.updateOffset(e,o||t)}M.fn=We.prototype;var st=ot(1,"add"),lt=ot(-1,"subtract");function ct(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():de(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):de(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ut(e){return void 0===e?this._locale._abbr:(null!=(e=m(e))&&(this._locale=e),this)}d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var dt=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function pt(){return this._locale}function ht(e,t){r(0,[e,e.length],0,t)}function ft(e,t,n){return I(R([e,11,31+t-n]),t,n).week}r(0,["gg",2],0,function(){return this.weekYear()%100}),r(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ht("gggg","weekYear"),ht("ggggg","weekYear"),ht("GGGG","isoWeekYear"),ht("GGGGG","isoWeekYear"),e("weekYear","gg"),e("isoWeekYear","GG"),b("G",ge),b("g",ge),b("GG",u,t),b("gg",u,t),b("GGGG",g,a),b("gggg",g,a),b("GGGGG",v,c),b("ggggg",v,c),Se(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=l(e)}),Se(["gg","GG"],function(e,t,n,r){t[r]=d.parseTwoDigitYear(e)}),r("Q",0,0,"quarter"),e("quarter","Q"),b("Q",he),S("Q",function(e,t){t[E]=3*(l(e)-1)}),r("D",["DD",2],"Do","date"),e("date","D"),b("D",u),b("DD",u,t),b("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),S(["D","DD"],C),S("Do",function(e,t){t[C]=l(e.match(u)[0])});g=ne("Date",!0);r("d",0,"do","day"),r("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),r("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),r("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),r("e",0,0,"weekday"),r("E",0,0,"isoWeekday"),e("day","d"),e("weekday","e"),e("isoWeekday","E"),b("d",u),b("e",u),b("E",u),b("dd",y),b("ddd",y),b("dddd",y),Se(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:h(n).invalidWeekday=e}),Se(["d","e","E"],function(e,t,n,r){t[r]=l(e)});a="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");v="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");c="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function mt(e,t){r(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function gt(e,t){return t._meridiemParse}r("H",["HH",2],0,"hour"),r("h",["hh",2],0,function(){return this.hours()%12||12}),mt("a",!0),mt("A",!1),e("hour","h"),b("a",gt),b("A",gt),b("H",u),b("h",u),b("HH",u,t),b("hh",u,t),S(["H","HH"],w),S(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),S(["h","hh"],function(e,t,n){t[w]=l(e),h(n).bigHour=!0});var D,y=ne("Hours",!0),vt=(r("m",["mm",2],0,"minute"),e("minute","m"),b("m",u),b("mm",u,t),S(["m","mm"],T),ne("Minutes",!1)),yt=(r("s",["ss",2],0,"second"),e("second","s"),b("s",u),b("ss",u,t),S(["s","ss"],A),ne("Seconds",!1));for(r("S",0,0,function(){return~~(this.millisecond()/100)}),r(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),r(0,["SSS",3],0,"millisecond"),r(0,["SSSS",4],0,function(){return 10*this.millisecond()}),r(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),r(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),r(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),r(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),r(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),e("millisecond","ms"),b("S",fe,he),b("SS",fe,t),b("SSS",fe,i),D="SSSS";D.length<=9;D+="S")b(D,me);function bt(e,t){t[P]=l(1e3*("0."+e))}for(D="S";D.length<=9;D+="S")S(D,bt);he=ne("Milliseconds",!1);r("z",0,0,"zoneAbbr"),r("zz",0,0,"zoneName");t=z.prototype,t.add=st,t.calendar=function(e,t){var n=Ze(e=e||R(),this).startOf("day"),n=(n=this.diff(n,"days",!0))<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(t&&t[n]||this.localeData().calendar(n,this,R(e)))},t.clone=function(){return new z(this)},t.diff=function(e,t,n){var r,i=6e4*((e=Ze(e,this)).utcOffset()-this.utcOffset());return"year"===(t=o(t))||"month"===t||"quarter"===t?(r=((e,t)=>{var n,r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return e=t-i<0?(n=e.clone().add(r-1,"months"),(t-i)/(i-n)):(n=e.clone().add(1+r,"months"),(t-i)/(n-i)),-(r+e)})(this,e),"quarter"===t?r/=3:"year"===t&&(r/=12)):(e=this-e,r="second"===t?e/1e3:"minute"===t?e/6e4:"hour"===t?e/36e5:"day"===t?(e-i)/864e5:"week"===t?(e-i)/6048e5:e),n?r:s(r)},t.endOf=function(e){return void 0===(e=o(e))||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},t.format=function(e){return e=de(this,e||d.defaultFormat),this.localeData().postformat(e)},t.from=function(e,t){return this.isValid()?M({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.fromNow=function(e){return this.from(R(),e)},t.to=function(e,t){return this.isValid()?M({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},t.toNow=function(e){return this.to(R(),e)},t.get=oe,t.invalidAt=function(){return h(this).overflow},t.isAfter=function(e,t){return"millisecond"===(t=o(void 0!==t?t:"millisecond"))?+(e=f(e)?e:R(e))<+this:(f(e)?+e:+R(e))<+this.clone().startOf(t)},t.isBefore=function(e,t){return"millisecond"===(t=o(void 0!==t?t:"millisecond"))?+this<+(e=f(e)?e:R(e)):(e=f(e)?+e:+R(e),+this.clone().endOf(t)<e)},t.isBetween=function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},t.isSame=function(e,t){return"millisecond"===(t=o(t||"millisecond"))?+this==+(e=f(e)?e:R(e)):(e=+R(e),+this.clone().startOf(t)<=e&&e<=+this.clone().endOf(t))},t.isValid=function(){return G(this)},t.lang=dt,t.locale=ut,t.localeData=pt,t.max=Ye,t.min=He,t.parsingFlags=function(){return F({},h(this))},t.set=oe,t.startOf=function(e){switch(e=o(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},t.subtract=lt,t.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},t.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},t.toDate=function(){return this._offset?new Date(+this):this._d},t.toISOString=ct,t.toJSON=ct,t.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},t.unix=function(){return Math.floor(+this/1e3)},t.valueOf=function(){return+this._d-6e4*(this._offset||0)},t.year=Ue,t.isLeapYear=function(){return $e(this.year())},t.weekYear=function(e){var t=I(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},t.isoWeekYear=function(e){var t=I(this,1,4).year;return null==e?t:this.add(e-t,"y")},t.quarter=t.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},t.month=Te,t.daysInMonth=function(){return _e(this.year(),this.month())},t.week=t.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},t.isoWeek=t.isoWeeks=function(e){var t=I(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},t.weeksInYear=function(){var e=this.localeData()._week;return ft(this.year(),e.dow,e.doy)},t.isoWeeksInYear=function(){return ft(this.year(),1,4)},t.date=g,t.day=t.days=function(e){var t,n,r=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,n=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=n.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-r,"d")):r},t.weekday=function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},t.isoWeekday=function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},t.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},t.hour=t.hours=y,t.minute=t.minutes=vt,t.second=t.seconds=yt,t.millisecond=t.milliseconds=he,t.utcOffset=function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Xe(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=Je(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?at(this,M(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Je(this)},t.utc=function(e){return this.utcOffset(0,e)},t.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e)&&this.subtract(Je(this),"m"),this},t.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Xe(this._i)),this},t.hasAlignedHourOffset=function(e){return e=e?R(e).utcOffset():0,(this.utcOffset()-e)%60==0},t.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},t.isDSTShifted=function(){var e,t;return void 0===this._isDSTShifted&&(H(e={},this),(e=Ve(e))._a?(t=(e._isUTC?B:R)(e._a),this._isDSTShifted=this.isValid()&&0<W(e._a,t.toArray())):this._isDSTShifted=!1),this._isDSTShifted},t.isLocal=function(){return!this._isUTC},t.isUtcOffset=function(){return this._isUTC},t.isUtc=et,t.isUTC=et,t.zoneAbbr=function(){return this._isUTC?"UTC":""},t.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},t.dates=O("dates accessor is deprecated. Use date instead.",g),t.months=O("months accessor is deprecated. Use month instead",Te),t.years=O("years accessor is deprecated. Use year instead",Ue),t.zone=O("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),fe=t;function St(e){return e}i=q.prototype;function _t(e,t,n,r){var i=m(),r=B().set(r,t);return i[n](r,e)}function Et(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return _t(e,t,n,i);for(var o=[],a=0;a<r;a++)o[a]=_t(e,a,n,i);return o}i._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},i.calendar=function(e,t,n){return"function"==typeof(e=this._calendar[e])?e.call(t,n):e},i._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},i._invalidDate="Invalid date",i.invalidDate=function(){return this._invalidDate},i._ordinal="%d",i.ordinal=function(e){return this._ordinal.replace("%d",e)},i._ordinalParse=/\d{1,2}/,i.preparse=St,i.postformat=St,i._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},i.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},i.pastFuture=function(e,t){return"function"==typeof(e=this._relativeTime[0<e?"future":"past"])?e(t):e.replace(/%s/i,t)},i.set=function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},i.months=function(e){return this._months[e.month()]},i._months=Ee,i.monthsShort=function(e){return this._monthsShort[e.month()]},i._monthsShort=Ce,i.monthsParse=function(e,t,n){var r,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=B([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},i.week=function(e){return I(e,this._week.dow,this._week.doy).week},i._week={dow:0,doy:6},i.firstDayOfYear=function(){return this._week.doy},i.firstDayOfWeek=function(){return this._week.dow},i.weekdays=function(e){return this._weekdays[e.day()]},i._weekdays=a,i.weekdaysMin=function(e){return this._weekdaysMin[e.day()]},i._weekdaysMin=c,i.weekdaysShort=function(e){return this._weekdaysShort[e.day()]},i._weekdaysShort=v,i.weekdaysParse=function(e){var t,n;for(this._weekdaysParse=this._weekdaysParse||[],t=0;t<7;t++)if(this._weekdaysParse[t]||(n=R([2e3,1]).day(t),n="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},i.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},i._meridiemParse=/[ap]\.?m?\.?/i,i.meridiem=function(e,t,n){return 11<e?n?"pm":"PM":n?"am":"AM"},Z("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===l(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),d.lang=O("moment.lang is deprecated. Use moment.locale instead.",Z),d.langData=O("moment.langData is deprecated. Use moment.localeData instead.",m);var N=Math.abs;function Ct(e,t,n,r){t=M(t,n);return e._milliseconds+=r*t._milliseconds,e._days+=r*t._days,e._months+=r*t._months,e._bubble()}function wt(e){return e<0?Math.floor(e):Math.ceil(e)}function Tt(e){return 4800*e/146097}function At(e){return 146097*e/4800}function k(e){return function(){return this.as(e)}}st=k("ms"),Ye=k("s"),He=k("m"),lt=k("h"),y=k("d"),vt=k("w"),yt=k("M"),he=k("y");function Pt(e){return function(){return this._data[e]}}g=Pt("milliseconds"),Ue=Pt("seconds"),t=Pt("minutes"),Ee=Pt("hours"),Ce=Pt("days"),a=Pt("months"),c=Pt("years");var Ot=Math.round,L={s:45,m:45,h:22,d:26,M:11};function It(e,t,n){var r=M(e).abs(),i=Ot(r.as("s")),o=Ot(r.as("m")),a=Ot(r.as("h")),s=Ot(r.as("d")),l=Ot(r.as("M")),r=Ot(r.as("y")),i=(i<L.s?["s",i]:1===o&&["m"])||(o<L.m?["mm",o]:1===a&&["h"])||(a<L.h?["hh",a]:1===s&&["d"])||(s<L.d?["dd",s]:1===l&&["M"])||(l<L.M?["MM",l]:1===r&&["y"])||["yy",r];return i[2]=t,i[3]=0<+e,i[4]=n,function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}.apply(null,i)}var Rt=Math.abs;function Mt(){var e=Rt(this._milliseconds)/1e3,t=Rt(this._days),n=Rt(this._months),r=s(e/60),i=s(r/60),o=(e%=60,r%=60,s(n/12)),n=n%=12,a=this.asSeconds();return a?(a<0?"-":"")+"P"+(o?o+"Y":"")+(n?n+"M":"")+(t?t+"D":"")+(i||r||e?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(e?e+"S":""):"P0D"}v=We.prototype;return v.abs=function(){var e=this._data;return this._milliseconds=N(this._milliseconds),this._days=N(this._days),this._months=N(this._months),e.milliseconds=N(e.milliseconds),e.seconds=N(e.seconds),e.minutes=N(e.minutes),e.hours=N(e.hours),e.months=N(e.months),e.years=N(e.years),this},v.add=function(e,t){return Ct(this,e,t,1)},v.subtract=function(e,t){return Ct(this,e,t,-1)},v.as=function(e){var t,n,r=this._milliseconds;if("month"===(e=o(e))||"year"===e)return t=this._days+r/864e5,n=this._months+Tt(t),"month"===e?n:n/12;switch(t=this._days+Math.round(At(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},v.asMilliseconds=st,v.asSeconds=Ye,v.asMinutes=He,v.asHours=lt,v.asDays=y,v.asWeeks=vt,v.asMonths=yt,v.asYears=he,v.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*l(this._months/12)},v._bubble=function(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data;return 0<=e&&0<=t&&0<=n||e<=0&&t<=0&&n<=0||(e+=864e5*wt(At(n)+t),n=t=0),r.milliseconds=e%1e3,e=s(e/1e3),r.seconds=e%60,e=s(e/60),r.minutes=e%60,e=s(e/60),r.hours=e%24,t+=s(e/24),n+=e=s(Tt(t)),t-=wt(At(e)),e=s(n/12),n%=12,r.days=t,r.months=n,r.years=e,this},v.get=function(e){return this[(e=o(e))+"s"]()},v.milliseconds=g,v.seconds=Ue,v.minutes=t,v.hours=Ee,v.days=Ce,v.weeks=function(){return s(this.days()/7)},v.months=a,v.years=c,v.humanize=function(e){var t=this.localeData(),n=It(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},v.toISOString=Mt,v.toString=Mt,v.toJSON=Mt,v.locale=ut,v.localeData=pt,v.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mt),v.lang=dt,r("X",0,0,"unix"),r("x",0,0,"valueOf"),b("x",ge),b("X",/[+-]?\d+(\.\d{1,3})?/),S("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),S("x",function(e,t,n){n._d=new Date(l(e))}),d.version="2.10.6",x=R,d.fn=fe,d.min=function(){return ze("isBefore",[].slice.call(arguments,0))},d.max=function(){return ze("isAfter",[].slice.call(arguments,0))},d.utc=B,d.unix=function(e){return R(1e3*e)},d.months=function(e,t){return Et(e,t,"months",12,"month")},d.isDate=U,d.locale=Z,d.invalid=V,d.duration=M,d.isMoment=f,d.weekdays=function(e,t){return Et(e,t,"weekdays",7,"day")},d.parseZone=function(){return R.apply(null,arguments).parseZone()},d.localeData=m,d.isDuration=qe,d.monthsShort=function(e,t){return Et(e,t,"monthsShort",12,"month")},d.weekdaysMin=function(e,t){return Et(e,t,"weekdaysMin",7,"day")},d.defineLocale=J,d.weekdaysShort=function(e,t){return Et(e,t,"weekdaysShort",7,"day")},d.normalizeUnits=o,d.relativeTimeThreshold=function(e,t){return void 0!==L[e]&&(void 0===t?L[e]:(L[e]=t,!0))},d}),((e,t)=>{"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))})(this,function(M){var t=Object.prototype.toString,D=Array.isArray||function(e){return"[object Array]"===t.call(e)};function u(e){return"function"==typeof e}function N(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var r=/\S/;function k(e){return!n.call(r,e)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var L=/\s*/,x=/\s+/,$=/\s*=/,U=/\s*\}/,F=/#|\^|\/|>|\{|&|=|!/;function o(e,t){if(!e)return[];var n,r,i,o=!1,a=[],s=[],l=[],c=!1,u=!1,d="",p=0;function h(){if(c&&!u)for(;l.length;)delete s[l.pop()];else l=[];u=c=!1}function f(e){if("string"==typeof e&&(e=e.split(x,2)),!D(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(N(e[0])+"\\s*"),r=new RegExp("\\s*"+N(e[1])),i=new RegExp("\\s*"+N("}"+e[1]))}f(t||M.tags);for(var m,g,v,y,b,S,_=new B(e);!_.eos();){if(m=_.pos,v=_.scanUntil(n))for(var E=0,C=v.length;E<C;++E)k(y=v.charAt(E))?(l.push(s.length),d+=y):(o=u=!0,d+=" "),s.push(["text",y,m,m+1]),m+=1,"\n"===y&&(h(),d="",p=0,o=!1);if(!_.scan(n))break;if(c=!0,g=_.scan(F)||"name",_.scan(L),"="===g?(v=_.scanUntil($),_.scan($),_.scanUntil(r)):"{"===g?(v=_.scanUntil(i),_.scan(U),_.scanUntil(r),g="&"):v=_.scanUntil(r),!_.scan(r))throw new Error("Unclosed tag at "+_.pos);if(b=">"==g?[g,v,m,_.pos,d,p,o]:[g,v,m,_.pos],p++,s.push(b),"#"===g||"^"===g)a.push(b);else if("/"===g){if(!(S=a.pop()))throw new Error('Unopened section "'+v+'" at '+m);if(S[1]!==v)throw new Error('Unclosed section "'+S[1]+'" at '+m)}else"name"===g||"{"===g||"&"===g?u=!0:"="===g&&f(v)}if(h(),S=a.pop())throw new Error('Unclosed section "'+S[1]+'" at '+_.pos);for(var w,T=(e=>{for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r})(s),A=[],P=A,O=[],I=0,R=T.length;I<R;++I)switch((w=T[I])[0]){case"#":case"^":P.push(w),O.push(w),P=w[4]=[];break;case"/":O.pop()[5]=w[2],P=0<O.length?O[O.length-1][4]:A;break;default:P.push(w)}return A}function B(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.cache={}}B.prototype.eos=function(){return""===this.tail},B.prototype.scan=function(e){var e=this.tail.match(e);return e&&0===e.index?(e=e[0],this.tail=this.tail.substring(e.length),this.pos+=e.length,e):""},B.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t,n,r,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var o,a,s,l=this,c=!1;l;){if(0<e.indexOf("."))for(o=l.view,a=e.split("."),s=0;null!=o&&s<a.length;)s===a.length-1&&(c=d(o,a[s])||(n=o,r=a[s],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),o=o[a[s++]];else o=l.view[e],c=d(l.view,e);if(c){t=o;break}l=l.parent}i[e]=t}return t=u(t)?t.call(this.view):t},e.prototype.clearCache=function(){this.cache={}},e.prototype.parse=function(e,t){var n=this.cache,r=e+":"+(t||M.tags).join(":"),i=n[r];return i=null==i?n[r]=o(e,t):i},e.prototype.render=function(e,t,n,r){var i=this.parse(e,r),t=t instanceof a?t:new a(t);return this.renderTokens(i,t,n,e,r)},e.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,l="",c=0,u=e.length;c<u;++c)s=void 0,"#"===(a=(o=e[c])[0])?s=this.renderSection(o,t,n,r):"^"===a?s=this.renderInverted(o,t,n,r):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(l+=s);return l},e.prototype.renderSection=function(e,t,n,r){var i=this,o="",a=t.lookup(e[1]);if(a){if(D(a))for(var s=0,l=a.length;s<l;++s)o+=this.renderTokens(e[4],t.push(a[s]),n,r);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)o+=this.renderTokens(e[4],t.push(a),n,r);else if(u(a)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,r.slice(e[3],e[5]),function(e){return i.render(e,t,n)}))&&(o+=a)}else o+=this.renderTokens(e[4],t,n,r);return o}},e.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||D(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},e.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(0<o||!n)&&(i[o]=r+i[o]);return i.join("\n")},e.prototype.renderPartial=function(e,t,n,r){var i,o,a,s;return n&&null!=(i=u(n)?n(e[1]):n[e[1]])?(o=e[6],a=e[4],s=i,0==e[5]&&a&&(s=this.indentPartial(i,a,o)),this.renderTokens(this.parse(s,r),t,n,s)):void 0},e.prototype.unescapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return t},e.prototype.escapedValue=function(e,t){t=t.lookup(e[1]);if(null!=t)return M.escape(t)},e.prototype.rawValue=function(e){return e[1]},M.name="mustache.js",M.version="3.1.0",M.tags=["{{","}}"];var s=new e;return M.clearCache=function(){return s.clearCache()},M.parse=function(e,t){return s.parse(e,t)},M.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(D(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return s.render(e,t,n,r)},M.to_html=function(e,t,n,r){e=M.render(e,t,n);if(!u(r))return e;r(e)},M.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return i[e]})},M.Scanner=B,M.Context=a,M.Writer=e,M}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=(n=>function(e,t){"__setXHR_"===e?(e=t(this))instanceof Function&&e(this):n.apply(this,arguments)})(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.13",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(s,e,l){var u=this,d=(u.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice},this.isResumeSupported());function t(n){n.method=n.method||"POST",n.headers=n.headers||{};var r=n._deferred=n._deferred||e.defer(),i=r.promise;function o(e){r.notify&&r.notify(e),i.progressFunc&&l(function(){i.progressFunc(e)})}function t(e){return null!=n._start&&d?{loaded:e.loaded+n._start,total:n._file&&n._file.size||e.total,type:e.type,config:n,lengthComputable:!0,target:e.target}:e}function a(){s(n).then(function(e){var t;d&&n._chunkSize&&!n._finished&&n._file?(t=n._file&&n._file.size||0,o({loaded:Math.min(n._end,t),total:t,config:n,type:"progress"}),u.upload(n,!0)):(n._finished&&delete n._finished,r.resolve(e))},function(e){r.reject(e)},function(e){r.notify(e)})}return n.disableProgress||(n.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(n.__XHR=e,n.xhrFn&&n.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=n,o(t(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=n,o(t(e)))},!1))}}),d?n._chunkSize&&n._end&&!n._finished?(n._start=n._end,n._end+=n._chunkSize,a()):n.resumeSizeUrl?s.get(n.resumeSizeUrl).then(function(e){n.resumeSizeResponseReader?n._start=n.resumeSizeResponseReader(e.data):n._start=parseInt((null==e.data.size?e.data:e.data.size).toString()),n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):n.resumeSize?n.resumeSize().then(function(e){n._start=e,n._chunkSize&&(n._end=n._start+n._chunkSize),a()},function(e){throw e}):(n._chunkSize&&(n._start=0,n._end=n._start+n._chunkSize),a()):a(),i.success=function(t){return i.then(function(e){t(e.data,e.status,e.headers,n)}),i},i.error=function(t){return i.then(null,function(e){t(e.data,e.status,e.headers,n)}),i},i.progress=function(t){return i.progressFunc=t,i.then(null,null,function(e){t(e)}),i},i.abort=i.pause=function(){return n.__XHR&&l(function(){n.__XHR.abort()}),i},i.xhr=function(e){var t;return n.xhrFn=(t=n.xhrFn,function(){t&&t.apply(i,arguments),e.apply(i,arguments)}),i},u.promisesCount++,i.finally&&i.finally instanceof Function&&i.finally(function(){u.promisesCount--}),i}function n(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}this.isUploadInProgress=function(){return 0<u.promisesCount},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));e=new window.Blob([e],{type:"application/json"});return e._ngfBlob=!0,e},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(l,e){function c(e,t,n){if(void 0!==t)if(angular.isDate(t)&&(t=t.toISOString()),angular.isString(t))e.append(n,t);else if(u.isFile(t)){a=e;a=!(o=t)._ngfBlob&&(l._file=l._file||o,null!=l._start)&&d?(l._end&&l._end>=o.size&&(l._finished=!0,l._end=o.size),(s=o.slice(l._start,l._end||o.size)).name=o.name,s.ngfName=o.ngfName,l._chunkSize&&(a.append("_chunkSize",l._chunkSize),a.append("_currentChunkSize",l._end-l._start),a.append("_chunkNumber",Math.floor(l._start/l._chunkSize)),a.append("_totalSize",l._file.size)),s):o,s=n.split(",");s[1]&&(a.ngfName=s[1].replace(/^\s+|\s+$/g,""),n=s[0]),l._fileKey=l._fileKey||n,e.append(n,a,a.ngfName||a.name)}else if(angular.isObject(t)){if(t.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+n;t.$$ngfCircularDetection=!0;try{for(var r in t){var i;t.hasOwnProperty(r)&&"$$ngfCircularDetection"!==r&&(i=null==l.objectKey?"[i]":l.objectKey,t.length&&-1<parseInt(r)&&(i=null==l.arrayKey?i:l.arrayKey),c(e,t[r],n+i.replace(/[ik]/g,r)))}}finally{delete t.$$ngfCircularDetection}}else e.append(n,t);var o,a,s}return(l=e?l:n(l))._isDigested||(l._isDigested=!0,l._chunkSize=u.translateScalars(l.resumeChunkSize),l._chunkSize=l._chunkSize?parseInt(l._chunkSize.toString()):null,l.headers=l.headers||{},l.headers["Content-Type"]=void 0,l.transformRequest=l.transformRequest?angular.isArray(l.transformRequest)?l.transformRequest:[l.transformRequest]:[],l.transformRequest.push(function(e){var t,n,r=new window.FormData;for(t in e=e||l.fields||{},l.file&&(e.file=l.file),e)e.hasOwnProperty(t)&&(n=e[t],l.formDataAppender?l.formDataAppender(r,t,n):c(r,n,t));return r})),t(l)},this.http=function(e){return(e=n(e)).transformRequest=e.transformRequest||function(e){return window.ArrayBuffer&&e instanceof window.ArrayBuffer||e instanceof window.Blob?e:s.defaults.transformRequest[0].apply(this,arguments)},e._chunkSize=u.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,t(e)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=e.defer();return s({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),e=e.headers("content-type")||"image/WebP",t=new window.Blob([t],{type:e}),e=n.match(/.*\/(.+?)(\?.*)?$/);1<e.length&&(t.name=e[1]),r.resolve(t)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(T,A,e,P,t){var O=t;function I(r,i,o,a,s){var l=[O.emptyPromise()];for(var e=0;e<i.length;e++)((n,t)=>{var e;0!==n.type.indexOf("image")||r.pattern&&!O.validatePattern(n,r.pattern)||(r.resizeIf=function(e,t){return O.attrGetter("ngfResizeIf",o,a,{$width:e,$height:t,$file:n})},e=O.resize(n,r),l.push(e),e.then(function(e){i.splice(t,1,e)},function(e){n.$error="resize",(n.$errorMessages=n.$errorMessages||{}).resize=!0,n.$errorParam=(e?(e.message||e)+": ":"")+(n&&n.name),s.$ngfValidations.push({name:"resize",valid:!1}),O.applyModelValidation(s,i)}))})(i[e],e);return P.all(l)}return O.getAttrWithDefaults=function(e,t){return null!=e[t]?e[t]:null==(e=O.defaults[t])||angular.isString(e)?e:JSON.stringify(e)},O.attrGetter=function(t,n,e,r){n=this.getAttrWithDefaults(n,t);if(!e)return n;try{return r?T(n)(e,r):T(n)(e)}catch(e){if(t.search(/min|max|pattern/i))return n;throw e}},O.shouldUpdateOn=function(e,t,n){t=O.attrGetter("ngfModelOptions",t,n);return!t||!t.updateOn||-1<t.updateOn.split(" ").indexOf(e)},O.emptyPromise=function(){var e=P.defer(),t=arguments;return A(function(){e.resolve.apply(e,t)}),e.promise},O.rejectPromise=function(){var e=P.defer(),t=arguments;return A(function(){e.reject.apply(e,t)}),e.promise},O.happyPromise=function(e,t){var n=P.defer();return e.then(function(e){n.resolve(e)},function(e){A(function(){throw e}),n.resolve(t)}),n.promise},O.updateModel=function(l,c,u,d,p,h,t){function f(e,t,n,r,i){c.$$ngfPrevValidFiles=e,c.$$ngfPrevInvalidFiles=t;var o=e&&e.length?e[0]:null,a=t&&t.length?t[0]:null,s=(l&&(O.applyModelValidation(l,e),l.$setViewValue(i?o:e)),d&&T(d)(u,{$files:e,$file:o,$newFiles:n,$duplicateFiles:r,$invalidFiles:t,$invalidFile:a,$event:h}),O.attrGetter("ngfModelInvalid",c));s&&A(function(){T(s).assign(u,i?a:t)}),A(function(){})}var m,g,e,v=[],y=[],b=[];function n(){function n(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}if(p){C=[],v=[];for(var e=0;e<p.length;e++)((e=>{for(var t=0;t<m.length;t++)if(n(e,m[t]))return 1;for(t=0;t<g.length;t++)if(n(e,g[t]))return 1})(p[e])?v:C).push(p[e])}}function a(){function r(){A(function(){f(E?m.concat(b):b,E?g.concat(y):y,p,v,w)},_&&_.debounce?_.debounce.change||_.debounce:0)}var t,n,i,o,a,e,s=S?C:b;t=s,n=c,i=u,o=l,((e=O.attrGetter("ngfResize",n,i))&&O.isResizeSupported()&&t.length?e instanceof Function?(a=P.defer(),e(t).then(function(e){I(e,t,n,i,o).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})):I(e,t,n,i,o):O.emptyPromise()).then(function(){S?O.validate(C,E?m.length:0,l,c,u).then(function(e){b=e.validsFiles,y=e.invalidsFiles,r()}):r()},function(){for(var e=0;e<s.length;e++){var t,n=s[e];"resize"===n.$error&&(-1<(t=b.indexOf(n))&&(b.splice(t,1),y.push(n)),r())}})}m=c.$$ngfPrevValidFiles||[],g=c.$$ngfPrevInvalidFiles||[],l&&l.$modelValue&&(e=l.$modelValue,m=angular.isArray(e)?e:[e]);var S,_,E=O.attrGetter("ngfKeep",c,u),C=(p||[]).slice(0),w=("distinct"!==E&&!0!==O.attrGetter("ngfKeepDistinct",c,u)||n(),!E&&!O.attrGetter("ngfMultiple",c,u)&&!O.attrGetter("multiple",c));E&&!C.length||(O.attrGetter("ngfBeforeModelChange",c,u,{$files:p,$file:p&&p.length?p[0]:null,$newFiles:C,$duplicateFiles:v,$event:h}),S=O.attrGetter("ngfValidateAfterResize",c,u),_=O.attrGetter("ngfModelOptions",c,u),O.validate(C,E?m.length:0,l,c,u).then(function(e){var n,r,i,o;t?f(C,[],p,v,w):(_&&_.allowInvalid||S?b=C:(b=e.validFiles,y=e.invalidFiles),O.attrGetter("ngfFixOrientation",c,u)&&O.isExifSupported()?(n=b,r=c,i=u,o=[O.emptyPromise()],angular.forEach(n,function(e,t){0===e.type.indexOf("image/jpeg")&&O.attrGetter("ngfFixOrientation",r,i,{$file:e})&&o.push(O.happyPromise(O.applyExifRotation(e),e).then(function(e){n.splice(t,1,e)}))}),P.all(o).then(function(){a()})):a())}))},O}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,i,t,b){var S=[];function o(i,s,l,o,e,t,n,a){var r=function(e,t){return a.attrGetter(e,l,t)};function c(){return"input"===s[0].tagName.toLowerCase()&&l.type&&"file"===l.type.toLowerCase()}function u(){return r("ngfChange")||r("ngfSelect")}function d(e){if(a.shouldUpdateOn("change",l,i)){var t=e.__files_||e.target&&e.target.files,n=[];if(t){for(var r=0;r<t.length;r++)n.push(t[r]);a.updateModel(o,l,i,u(),n.length?n:null,e)}}}a.registerModelChangeValidator(o,l,i);var p=[];function h(){if(c())return s;var e=angular.element('<input type="file">'),t=angular.element("<label>upload</label>"),n=(t.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),e),r=t;function i(e){n.attr("id","ngf-"+e),r.attr("id","ngf-label-"+e)}for(var o=0;o<s[0].attributes.length;o++){var a=s[0].attributes[o];"type"!==a.name&&"class"!==a.name&&"style"!==a.name&&("id"===a.name?(i(a.value),p.push(l.$observe("id",i))):n.attr(a.name,a.value||"required"!==a.name&&"multiple"!==a.name?a.value:a.name))}return S.push({el:s,ref:t}),document.body.appendChild(t.append(e)[0]),e}function f(e){if(s.attr("disabled"))return!1;if(!r("ngfSelectDisabled",i)){var t,n=(e=>{if(n=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches){if("touchstart"===e.type)g=n[0].clientX,m=n[0].clientY;else if("touchend"===e.type){var t=n[0].clientX,n=n[0].clientY;if(20<Math.abs(t-g)||20<Math.abs(n-m))return e.stopPropagation(),e.preventDefault(),!1}return!0}})(e);if(null!=n)return n;y(e);try{c()||document.body.contains(v[0])||(S.push({el:s,ref:v.parent()}),document.body.appendChild(v.parent()[0]),v.bind("change",d))}catch(e){}return n=navigator.userAgent,((e=n.match(/Android[^\d]*(\d+)\.(\d+)/))&&2<e.length?(t=b.defaults.androidFixMinorVersion||4,parseInt(e[1])<4||parseInt(e[1])===t&&parseInt(e[2])<t):-1===n.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(n))?setTimeout(function(){v[0].click()},0):v[0].click(),!1}}r("ngfMultiple")&&p.push(i.$watch(r("ngfMultiple"),function(){v.attr("multiple",r("ngfMultiple",i))})),r("ngfCapture")&&p.push(i.$watch(r("ngfCapture"),function(){v.attr("capture",r("ngfCapture",i))})),r("ngfAccept")&&p.push(i.$watch(r("ngfAccept"),function(){v.attr("accept",r("ngfAccept",i))})),p.push(l.$observe("accept",function(){v.attr("accept",r("accept"))}));var m=0,g=0;var v=s;function y(e){a.shouldUpdateOn("click",l,i)&&v.val()&&(v.val(null),a.updateModel(o,l,i,u(),null,e,!0))}(v=c()?v:h()).bind("change",d),c()?s.bind("click",y):s.bind("click touchstart touchend",f),-1!==navigator.appVersion.indexOf("MSIE 10")&&v.bind("click",function e(t){if(v&&!v.attr("__ngf_ie10_Fix_")){if(v[0].parentNode)return t.preventDefault(),t.stopPropagation(),v.unbind("click"),t=v.clone(),v.replaceWith(t),(v=t).attr("__ngf_ie10_Fix_","true"),v.bind("change",d),v.bind("click",e),v[0].click(),!1;v=null}else v.removeAttr("__ngf_ie10_Fix_")}),o&&o.$formatters.push(function(e){return null!=e&&0!==e.length||v.val()&&v.val(null),e}),i.$on("$destroy",function(){c()||v.parent().remove(),angular.forEach(p,function(e){e()})}),t(function(){for(var e=0;e<S.length;e++){var t=S[e];document.body.contains(t.el[0])||(S.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(s,v,d)}return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){o(e,t,n,r,0,i,0,b)}}}]),(()=>{function a(r,e,i,o,a,s,l,c){function u(t){var n=r.attrGetter("ngfNoObjectUrl",a,i);r.dataUrl(t,n).finally(function(){e(function(){var e=(n?t.$ngfDataUrl:t.$ngfBlobUrl)||t.$ngfDataUrl;c?o.css("background-image","url('"+(e||"")+"')"):o.attr("src",e),e?o.removeClass("ng-hide"):o.addClass("ng-hide")})})}e(function(){var e=i.$watch(a[s],function(n){var e,t=l;if("ngfThumbnail"===s&&0===(t=t||{width:o[0].naturalWidth||o[0].clientWidth,height:o[0].naturalHeight||o[0].clientHeight}).width&&window.getComputedStyle&&(e=getComputedStyle(o[0])).width&&-1<e.width.indexOf("px")&&e.height&&-1<e.height.indexOf("px")&&(t={width:parseInt(e.width.slice(0,-2)),height:parseInt(e.height.slice(0,-2))}),angular.isString(n))return o.removeClass("ng-hide"),c?o.css("background-image","url('"+n+"')"):o.attr("src",n);!n||!n.type||0!==n.type.search("img"===(e=o[0]).tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./)||c&&0!==n.type.indexOf("image")?o.addClass("ng-hide"):t&&r.isResizeSupported()?(t.resizeIf=function(e,t){return r.attrGetter("ngfResizeIf",a,i,{$width:e,$height:t,$file:n})},r.resize(n,t).then(function(e){u(e)},function(e){throw e})):u(n)});i.$on("$destroy",function(){e()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,n,s){var l=e;return l.base64DataUrl=function(n){var r,i;return angular.isArray(n)?(r=s.defer(),i=0,angular.forEach(n,function(e){l.dataUrl(e,!0).finally(function(){var t;++i===n.length&&(t=[],angular.forEach(n,function(e){t.push(e.$ngfDataUrl)}),r.resolve(t,n))})}),r.promise):l.dataUrl(n,!0)},l.dataUrl=function(o,t){var e,a;return o?t&&null!=o.$ngfDataUrl||!t&&null!=o.$ngfBlobUrl?l.emptyPromise(t?o.$ngfDataUrl:o.$ngfBlobUrl,o):((e=t?o.$$ngfDataUrlPromise:o.$$ngfBlobUrlPromise)||(a=s.defer(),n(function(){if(window.FileReader&&o&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||o.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||o.size<4e6)){var r,i=window.URL||window.webkitURL;if(i&&i.createObjectURL&&!t){try{r=i.createObjectURL(o)}catch(e){return void n(function(){o.$ngfBlobUrl="",a.reject()})}n(function(){if(o.$ngfBlobUrl=r){a.resolve(r,o),l.blobUrls=l.blobUrls||[],l.blobUrlsTotalSize=l.blobUrlsTotalSize||0,l.blobUrls.push({url:r,size:o.size}),l.blobUrlsTotalSize+=o.size||0;for(var e=l.defaults.blobUrlsMaxMemory||268435456,t=l.defaults.blobUrlsMaxQueueSize||200;(l.blobUrlsTotalSize>e||l.blobUrls.length>t)&&1<l.blobUrls.length;){var n=l.blobUrls.splice(0,1)[0];i.revokeObjectURL(n.url),l.blobUrlsTotalSize-=n.size}}})}else{var e=new FileReader;e.onload=function(e){n(function(){o.$ngfDataUrl=e.target.result,a.resolve(e.target.result,o),n(function(){delete o.$ngfDataUrl},1e3)})},e.onerror=function(){n(function(){o.$ngfDataUrl="",a.reject()})},e.readAsDataURL(o)}}else n(function(){o[t?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),(e=t?o.$$ngfDataUrlPromise=a.promise:o.$$ngfBlobUrlPromise=a.promise).finally(function(){delete o[t?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]})),e):l.emptyPromise(o,o)},l}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){a(r,i,e,t,n,"ngfSrc",r.attrGetter("ngfResize",n,e),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(r,i){return{restrict:"AE",link:function(e,t,n){a(r,i,e,t,n,"ngfBackground",r.attrGetter("ngfResize",n,e),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(i,o){return{restrict:"AE",link:function(e,t,n){var r=i.attrGetter("ngfSize",n,e);a(i,o,e,t,n,"ngfThumbnail",r,i.attrGetter("ngfAsBackground",n,e))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(i,o){return function(e,t,n){var r;return angular.isString(e)?o.trustAsResourceUrl(e):(r=e&&((t?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl),e&&!r?(!e.$ngfDataUrlFilterInProgress&&angular.isObject(e)&&(e.$ngfDataUrlFilterInProgress=!0,i.dataUrl(e,t)),""):(e&&delete e.$ngfDataUrlFilterInProgress,(e&&r?n?o.trustAsResourceUrl(r):r:e)||""))}}])})(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,y,s){var b=e;return b.validatePattern=function(e,t){if(!t)return!0;for(var n=function e(t){var n="",r=[];if(2<t.length&&"/"===t[0]&&"/"===t[t.length-1])n=t.substring(1,t.length-1);else{var i=t.split(",");if(1<i.length)for(var o=0;o<i.length;o++){var a=e(i[o]);a.regexp?(n+="("+a.regexp+")",o<i.length-1&&(n+="|")):r=r.concat(a.excludes)}else 0===t.indexOf("!")?r.push("^((?!"+e(t.substring(1)).regexp+").)*$"):n=(n="^"+(t=0===t.indexOf(".")?"*"+t:t).replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,".")}return{regexp:n,excludes:r}}(t),r=!0,i=(n.regexp&&n.regexp.length&&(t=new RegExp(n.regexp,"i"),r=null!=e.type&&t.test(e.type)||null!=e.name&&t.test(e.name)),n.excludes.length);i--;){var o=new RegExp(n.excludes[i],"i");r=r&&(null==e.type||o.test(e.type))&&(null==e.name||o.test(e.name))}return r},b.ratioToFloat=function(e){var e=e.toString(),t=e.search(/[x:]/i);return e=-1<t?parseFloat(e.substring(0,t))/parseFloat(e.substring(t+1)):parseFloat(e)},b.registerModelChangeValidator=function(n,r,i){n&&n.$formatters.push(function(e){var t;return n.$dirty&&((t=e)&&!angular.isArray(e)&&(t=[e]),b.validate(t,0,n,r,i).then(function(){b.applyModelValidation(n,t)})),e})},b.applyModelValidation=function(t,e){var n;n=t,null==e||n.$dirty||(n.$setDirty?n.$setDirty():n.$dirty=!0),angular.forEach(t.$ngfValidations,function(e){t.$setValidity(e.name,e.valid)})},b.getValidationAttr=function(e,t,n,r,i){var o="ngf"+n[0].toUpperCase()+n.substr(1),o=b.attrGetter(o,e,t,{$file:i});return o=null==o&&(o=b.attrGetter("ngfValidate",e,t,{$file:i}))&&(o=o[(e=(r||n).split("."))[0]],1<e.length)?o&&o[e[1]]:o},b.validate=function(u,r,d,p,h){(d=d||{}).$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(e){e.valid=!0});var f=function(e,t){return b.attrGetter(e,p,h,t)},m=(b.attrGetter("ngfIgnoreInvalid",p,h)||"").split(" "),g=b.attrGetter("ngfRunAllValidations",p,h);if(null==u||0===u.length)return b.emptyPromise({validFiles:u,invalidFiles:[]});u=void 0===u.length?[u]:u.slice(0);var v=[];function t(e,t,n){if(u){for(var r=u.length,i=null;r--;){var o,a=u[r];!a||null==(o=b.getValidationAttr(p,h,e,t,a))||n(a,o,r)||(-1===m.indexOf(e)?(a.$error=e,(a.$errorMessages=a.$errorMessages||{})[e]=!0,a.$errorParam=o,-1===v.indexOf(a)&&v.push(a),g||u.splice(r,1),i=!1):u.splice(r,1))}null!==i&&d.$ngfValidations.push({name:e,valid:i})}}t("pattern",null,b.validatePattern),t("minSize","size.min",function(e,t){return e.size+.1>=b.translateScalars(t)}),t("maxSize","size.max",function(e,t){return e.size-.1<=b.translateScalars(t)});var n,e,i=0;return t("maxTotalSize",null,function(e,t){if(!((i+=e.size)>b.translateScalars(t)))return 1;u.splice(0,u.length)}),t("validateFn",null,function(e,t){return!0===t||null===t||""===t}),u.length?(n=y.defer(),(e=[]).push(o("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),e.push(o("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),e.push(o("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),e.push(o("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),e.push(o("dimensions",null,/image/,function(e,t){return b.emptyPromise(t)},function(e){return e})),e.push(o("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-b.ratioToFloat(n[i]))<.01&&(r=!0);return r})),e.push(o("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-b.ratioToFloat(t)<1e-4})),e.push(o("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return-1e-4<e.width/e.height-b.ratioToFloat(t)})),e.push(o("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=b.translateScalars(t)})),e.push(o("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=b.translateScalars(t)})),e.push(o("duration",null,/audio|video/,function(e,t){return b.emptyPromise(t)},function(e){return e})),e.push(o("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),y.all(e).then(function(){if(g)for(var e=0;e<u.length;e++)u[e].$error&&u.splice(e--,1);g=!1,t("maxFiles",null,function(e,t,n){return r+n<t}),n.resolve({validFiles:u,invalidFiles:v})}),n.promise):b.emptyPromise({validFiles:[],invalidFiles:v});function o(o,e,r,a,s){function i(t,n,r){function i(e){e()?-1===m.indexOf(o)?(n.$error=o,(n.$errorMessages=n.$errorMessages||{})[o]=!0,n.$errorParam=r,-1===v.indexOf(n)&&v.push(n),g||-1<(e=u.indexOf(n))&&u.splice(e,1),t.resolve(!1)):(-1<(e=u.indexOf(n))&&u.splice(e,1),t.resolve(!0)):t.resolve(!0)}null!=r?a(n,r).then(function(e){i(function(){return!s(e,r)})},function(){i(function(){return f("ngfValidateForce",{$file:n})})}):t.resolve(!0)}var l=[b.emptyPromise(!0)],c=(u&&(u=void 0===u.length?[u]:u,angular.forEach(u,function(t){var n=y.defer();l.push(n.promise),!r||null!=t.type&&0===t.type.search(r)?"dimensions"===o&&null!=b.attrGetter("ngfDimensions",p)?b.imageDimensions(t).then(function(e){i(n,t,f("ngfDimensions",{$file:t,$width:e.width,$height:e.height}))},function(){n.resolve(!1)}):"duration"===o&&null!=b.attrGetter("ngfDuration",p)?b.mediaDuration(t).then(function(e){i(n,t,f("ngfDuration",{$file:t,$duration:e}))},function(){n.resolve(!1)}):i(n,t,b.getValidationAttr(p,h,o,e,t)):n.resolve(!0)})),y.defer());return y.all(l).then(function(e){for(var t=!0,n=0;n<e.length;n++)if(!e[n]){t=!1;break}d.$ngfValidations.push({name:o,valid:t}),c.resolve(t)}),c.promise}},b.imageDimensions=function(o){var e,a;return o.$ngfWidth&&o.$ngfHeight?(e=y.defer(),s(function(){e.resolve({width:o.$ngfWidth,height:o.$ngfHeight})}),e.promise):(o.$ngfDimensionPromise||(a=y.defer(),s(function(){0!==o.type.indexOf("image")?a.reject("not image"):b.dataUrl(o).then(function(e){var n=angular.element("<img>").attr("src",e).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");function t(){var e=n[0].naturalWidth||n[0].clientWidth,t=n[0].naturalHeight||n[0].clientHeight;n.remove(),o.$ngfWidth=e,o.$ngfHeight=t,a.resolve({width:e,height:t})}function r(){n.remove(),a.reject("load error")}n.on("load",t),n.on("error",r);var i=0;!function e(){s(function(){n[0].parentNode&&(n[0].clientWidth?t:10<i++?r:e)()},1e3)}(),angular.element(document.getElementsByTagName("body")[0]).append(n)},function(){a.reject("load error")})}),o.$ngfDimensionPromise=a.promise,o.$ngfDimensionPromise.finally(function(){delete o.$ngfDimensionPromise})),o.$ngfDimensionPromise)},b.mediaDuration=function(i){var e,o;return i.$ngfDuration?(e=y.defer(),s(function(){e.resolve(i.$ngfDuration)}),e.promise):(i.$ngfDurationPromise||(o=y.defer(),s(function(){0!==i.type.indexOf("audio")&&0!==i.type.indexOf("video")?o.reject("not media"):b.dataUrl(i).then(function(e){var t=angular.element(0===i.type.indexOf("audio")?"<audio>":"<video>").attr("src",e).css("visibility","none").css("position","fixed");function n(){var e=t[0].duration;i.$ngfDuration=e,t.remove(),o.resolve(e)}function r(){t.remove(),o.reject("load error")}t.on("loadedmetadata",n),t.on("error",r);!function e(){s(function(){t[0].parentNode&&(t[0].duration?n:e)()},1e3)}(),angular.element(document.body).append(t)},function(){o.reject("load error")})}),i.$ngfDurationPromise=o.promise,i.$ngfDurationPromise.finally(function(){delete i.$ngfDurationPromise})),i.$ngfDurationPromise)},b}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){function a(e,i,o,a,s,l,c,u){var d=t.defer(),p=document.createElement("canvas"),h=document.createElement("img");return h.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(h),h.onload=function(){var e=h.width,t=h.height;if(h.parentNode.removeChild(h),null!=u&&!1===u(e,t))d.reject("resizeIf");else try{l&&(e/t<(n=f.ratioToFloat(l))?o=(i=e)/n:i=(o=t)*n);var n,r=((e,t,n,r,i)=>(i=i?Math.max(n/e,r/t):Math.min(n/e,r/t),{width:e*i,height:t*i,marginX:e*i-n,marginY:t*i-r}))(e,t,i=i||e,o=o||t,c);p.width=Math.min(r.width,i),p.height=Math.min(r.height,o),p.getContext("2d").drawImage(h,Math.min(0,-r.marginX/2),Math.min(0,-r.marginY/2),r.width,r.height),d.resolve(p.toDataURL(s||"image/WebP",a||.934))}catch(e){d.reject(e)}},h.onerror=function(){h.parentNode.removeChild(h),d.reject()},h.src=e,d.promise}var f=e;return f.dataUrltoBlob=function(e,t,n){for(var e=e.split(","),r=e[0].match(/:(.*?);/)[1],i=atob(e[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);e=new window.Blob([a],{type:r});return e.name=t,e.$ngfOrigSize=n,e},f.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},f.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),f.resize=function(r,i){var o;return 0!==r.type.indexOf("image")?f.emptyPromise(r):(o=t.defer(),f.dataUrl(r,!0).then(function(n){a(n,i.width,i.height,i.quality,i.type||r.type,i.ratio,i.centerCrop,i.resizeIf).then(function(e){if("image/jpeg"===r.type&&!1!==i.restoreExif)try{e=f.restoreExif(n,e)}catch(e){setTimeout(function(){throw e},1)}try{var t=f.dataUrltoBlob(e,r.name,r.size);o.resolve(t)}catch(e){o.reject(e)}},function(e){"resizeIf"===e&&o.resolve(r),o.reject(e)})},function(e){o.reject(e)}),o.promise)},f}]),(()=>{function A(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(l,E,C,w,e,T){return{restrict:"AEC",require:"?ngModel",link:function(e,t,n,r){var c,u,d,p,m=e,h=t,g=n,i=r,e=l,f=E,v=C,y=w,b=T,o=A(),S=function(e,t,n){return y.attrGetter(e,g,t,n)};function _(){return h.attr("disabled")||S("ngfDropDisabled",m)}function a(e,t,n){if(e){var r;try{r=e&&e.getData&&e.getData("text/html")}catch(e){}((e,t,n,r)=>{var c=y.getValidationAttr(g,m,"maxFiles"),u=(null==c&&(c=Number.MAX_VALUE),y.getValidationAttr(g,m,"maxTotalSize")),d=(null==u&&(u=Number.MAX_VALUE),S("ngfIncludeDir",m)),p=[],h=0,i=[y.emptyPromise()];if(e&&0<e.length&&"file:"!==v.location.protocol)for(var o=0;o<e.length;o++){if(e[o].webkitGetAsEntry&&e[o].webkitGetAsEntry()&&e[o].webkitGetAsEntry().isDirectory){var a=e[o].webkitGetAsEntry();if(a.isDirectory&&!n)continue;null!=a&&i.push(function t(n,r){var i,e,o,a,s,l=b.defer();return null!=n&&(n.isDirectory?(i=[y.emptyPromise()],d&&((e={type:"directory"}).name=e.path=(r||"")+n.name,p.push(e)),o=n.createReader(),a=[],(s=function(){o.readEntries(function(e){try{e.length?(a=a.concat(Array.prototype.slice.call(e||[],0)),s()):(angular.forEach(a.slice(0),function(e){p.length<=c&&h<=u&&i.push(t(e,(r||"")+n.name+"/"))}),b.all(i).then(function(){l.resolve()},function(e){l.reject(e)}))}catch(e){l.reject(e)}},function(e){l.reject(e)})})()):n.file(function(e){try{e.path=(r||"")+e.name,d&&(e=y.rename(e,e.path)),p.push(e),h+=e.size,l.resolve()}catch(e){l.reject(e)}},function(e){l.reject(e)})),l.promise}(a))}else{a=e[o].getAsFile();null!=a&&(p.push(a),h+=a.size)}if(c<p.length||u<h||!r&&0<p.length)break}else if(null!=t)for(var s=0;s<t.length;s++){var l=t.item(s);if((l.type||0<l.size)&&(p.push(l),h+=l.size),c<p.length||u<h||!r&&0<p.length)break}var f=b.defer();return b.all(i).then(function(){if(r||d||!p.length)f.resolve(p);else{for(var e=0;p[e]&&"directory"===p[e].type;)e++;f.resolve([p[e]])}},function(e){f.reject(e)}),f.promise})(e.items,e.files,!1!==S("ngfAllowDir",m),S("multiple")||S("ngfMultiple",m)).then(function(e){e.length?s(e,t):((e,t)=>{var r,n,i,o;return y.shouldUpdateOn(e,g,m)&&"string"==typeof t?(r=[],t.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){r.push(n)}),n=[],i=[],r.length?(angular.forEach(r,function(e){n.push(y.urlToBlob(e).then(function(e){i.push(e)}))}),o=b.defer(),b.all(n).then(function(){o.resolve(i)},function(e){o.reject(e)}),o.promise):y.emptyPromise()):y.rejectPromise([])})(n,r).then(function(e){s(e,t)})})}}function s(e,t){y.updateModel(i,g,m,S("ngfChange")||S("ngfDrop"),e,t)}S("dropAvailable")&&f(function(){m[S("dropAvailable")]?m[S("dropAvailable")].value=o:m[S("dropAvailable")]=o}),o?(null==S("ngfSelect")&&y.registerModelChangeValidator(i,g,m),c=null,u=e(S("ngfStopPropagation")),d=1,h[0].addEventListener("dragover",function(t){if(!_()&&y.shouldUpdateOn("drop",g,m)&&(t.preventDefault(),u(m)&&t.stopPropagation(),-1<navigator.userAgent.indexOf("Chrome")&&(e=t.dataTransfer.effectAllowed,t.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"),f.cancel(c),!p)){p="C";var e=m,n=t,r=function(e){p=e,h.addClass(p),S("ngfDrag",m,{$isDragging:!0,$class:p,$event:t})},i=S("ngfDragOverClass",e,{$event:n}),o="dragover";if(angular.isString(i))o=i;else if(i&&(i.delay&&(d=i.delay),i.accept||i.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=i.pattern||S("ngfPattern",e,{$event:n}),l=a.length;l--;){if(!y.validatePattern(a[l],s)){o=i.reject;break}o=i.accept}else o=i.accept}r(o)}},!1),h[0].addEventListener("dragenter",function(e){!_()&&y.shouldUpdateOn("drop",g,m)&&(e.preventDefault(),u(m))&&e.stopPropagation()},!1),h[0].addEventListener("dragleave",function(e){!_()&&y.shouldUpdateOn("drop",g,m)&&(e.preventDefault(),u(m)&&e.stopPropagation(),c=f(function(){p&&h.removeClass(p),p=null,S("ngfDrag",m,{$isDragging:!1,$event:e})},d||100))},!1),h[0].addEventListener("drop",function(e){!_()&&y.shouldUpdateOn("drop",g,m)&&(e.preventDefault(),u(m)&&e.stopPropagation(),p&&h.removeClass(p),p=null,a(e.dataTransfer,e,"dropUrl"))},!1),h[0].addEventListener("paste",function(e){-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&S("ngfEnableFirefoxPaste",m)&&e.preventDefault(),!_()&&y.shouldUpdateOn("paste",g,m)&&a(e.clipboardData||e.originalEvent.clipboardData,e,"pasteUrl")},!1),-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&S("ngfEnableFirefoxPaste",m)&&(h.attr("contenteditable",!0),h.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))):!0===S("ngfHideOnDropNotAvailable",m)&&h.css("display","none")}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,t){A()&&t.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(i,o,a){return function(e,t,n){var r;A()&&(r=i(a.attrGetter("ngfDropAvailable",n)),o(function(){r(e),r.assign&&r.assign(e,!0)}))}}])})(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,n){var l=e;return l.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&l.isResizeSupported()},l.readOrientation=function(e){var u=n.defer(),t=new FileReader,e=e.slice?e.slice(0,65536):e;return t.readAsArrayBuffer(e),t.onerror=function(e){return u.reject(e)},t.onload=function(e){var t={orientation:1},n=new DataView(this.result);if(65496===n.getUint16(0,!1))for(var r=n.byteLength,i=2;i<r;){var o=n.getUint16(i,!1);if(i+=2,65505===o){if(1165519206!==n.getUint32(i+=2,!1))return u.resolve(t);var a=18761===n.getUint16(i+=6,!1),s=(i+=n.getUint32(i+4,a),n.getUint16(i,a));i+=2;for(var l,c=0;c<s;c++)if(274===n.getUint16(i+12*c,a))return 2<=(l=n.getUint16(i+12*c+8,a))&&l<=8&&(n.setUint16(i+12*c+8,1,a),t.fixedArrayBuffer=e.target.result),t.orientation=l,u.resolve(t)}else{if(65280!=(65280&o))break;i+=n.getUint16(i,!1)}}return u.resolve(t)},u.promise},l.applyExifRotation=function(a){var s;return 0!==a.type.indexOf("image/jpeg")?l.emptyPromise(a):(s=n.defer(),l.readOrientation(a).then(function(o){if(o.orientation<2||8<o.orientation)return s.resolve(a);l.dataUrl(a,!0).then(function(e){var r=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){try{r.width=4<o.orientation?i.height:i.width,r.height=4<o.orientation?i.width:i.height;var e=r.getContext("2d"),t=(((e,t,n,r)=>{switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:e.transform(0,-1,1,0,0,n)}})(e,o.orientation,i.width,i.height),e.drawImage(i,0,0),r.toDataURL(a.type||"image/WebP",.934)),t=l.restoreExif((e=>{for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)})(o.fixedArrayBuffer),t),n=l.dataUrltoBlob(t,a.name);s.resolve(n)}catch(e){return s.reject(e)}},i.onerror=function(){s.reject()},i.src=e},function(e){s.reject(e)})},function(e){s.reject(e)}),s.promise)},l.restoreExif=function(e,t){var n={KEY_STR:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode64:function(e){for(var t,n,r,i,o,a="",s="",l=0;r=(t=e[l++])>>2,i=(3&t)<<4|(t=e[l++])>>4,o=(15&t)<<2|(n=e[l++])>>6,s=63&n,isNaN(t)?o=s=64:isNaN(n)&&(s=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(s),o=s="",l<e.length;);return a},restore:function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));e=this.decode64(e),e=this.slice2Segments(e),t=this.exifManipulation(t,e);return"data:image/jpeg;base64,"+this.encode64(t)},exifManipulation:function(e,t){t=this.getExifArray(t),e=this.insertExif(e,t);return new Uint8Array(e)},getExifArray:function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},insertExif:function(e,t){var e=e.replace("data:image/jpeg;base64,",""),e=this.decode64(e),n=e.indexOf(255,3),r=e.slice(0,n),e=e.slice(n);return r.concat(t).concat(e)},slice2Segments:function(e){for(var t,n,r=0,i=[];!(255===e[r]&218===e[r+1])&&(255===e[r]&216===e[r+1]?r+=2:(t=r+(256*e[r+2]+e[r+3])+2,n=e.slice(r,t),i.push(n),r=t),!(e.length<r)););return i},decode64:function(e){var t,n,r,i,o,a,s=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");r=this.KEY_STR.indexOf(e.charAt(s++)),t=(15&(i=this.KEY_STR.indexOf(e.charAt(s++))))<<4|(o=this.KEY_STR.indexOf(e.charAt(s++)))>>2,n=(3&o)<<6|(a=this.KEY_STR.indexOf(e.charAt(s++))),l.push(r<<2|i>>4),64!==o&&l.push(t),64!==a&&l.push(n),s<e.length;);return l}};return n.restore(e,t)},l}]),((e,t)=>{"function"==typeof define&&define.amd?define(["module","exports","angular"],t):"undefined"!=typeof exports?t(module,exports,require("angular")):(t(t={exports:{}},t.exports,e.angular),e.infiniteScroll=t.exports)})(this,function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var M=(n=n)&&n.__esModule?n:{default:n};n="infinite-scroll";M.default.module(n,[]).value("THROTTLE_MILLISECONDS",null).directive("infiniteScroll",["$rootScope","$window","$interval","THROTTLE_MILLISECONDS",function(P,O,I,R){return{scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function(r,i,e){var o=M.default.element(O),a=null,s=null,l=null,c=null,t=!0,u=!1,n=null,d=!1;function p(e){e=e[0]||e;return isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function h(e){e=e[0]||e;return isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function f(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+h(e)}function m(){var e,t=void 0,n=void 0,n=c===o?(t=p(c)+h(c[0].document.documentElement),f(i)+p(i)):(t=p(c),void(e=0)!==f(c)&&(e=f(c)),f(i)-e+p(i));(n=u?p((i[0].ownerDocument||i[0].document).documentElement):n)-t<=p(c)*a+1?(l=!0,s&&(r.$$phase||P.$$phase?r.infiniteScroll():r.$apply(r.infiniteScroll))):(d&&I.cancel(d),l=!1)}var g,v,y,b,S=null!=R?(g=m,v=R,y=null,b=0,function(){var e=(new Date).getTime(),t=v-(e-b);t<=0?(I.cancel(y),y=null,b=e,g.call()):y=y||I(_,t,1)}):m;function _(){return b=(new Date).getTime(),I.cancel(y),y=null,g.call()}function E(e){a=parseFloat(e)||0}function C(e){(s=!e)&&l&&(l=!1,S())}function w(e){u=e}function T(e){null!=c&&c.unbind("scroll",S),null!=(c=e)&&c.bind("scroll",S)}function A(e){if(null!=e&&0!==e.length){var t=void 0;if(null==(t=e.nodeType&&1===e.nodeType?M.default.element(e):"function"==typeof e.append?M.default.element(e[e.length-1]):"string"==typeof e?M.default.element(document.querySelector(e)):e))throw new Error("invalid infinite-scroll-container attribute.");T(t)}}return r.$on("$destroy",function(){c.unbind("scroll",S),null!=n&&(n(),n=null),d&&I.cancel(d)}),r.$watch("infiniteScrollDistance",E),E(r.infiniteScrollDistance),r.$watch("infiniteScrollDisabled",C),C(r.infiniteScrollDisabled),r.$watch("infiniteScrollUseDocumentBottom",w),w(r.infiniteScrollUseDocumentBottom),T(o),r.infiniteScrollListenForEvent&&(n=P.$on(r.infiniteScrollListenForEvent,S)),r.$watch("infiniteScrollContainer",A),A(r.infiniteScrollContainer||[]),null!=e.infiniteScrollParent&&T(M.default.element(i.parent())),null!=e.infiniteScrollImmediateCheck&&(t=r.$eval(e.infiniteScrollImmediateCheck)),d=I(function(){return t&&S(),I.cancel(d)})}}}]),t.default=n,e.exports=t.default}),!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojs=e()}(function(){return function r(i,o,a){function s(n,e){if(!o[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}t=o[n]={exports:{}};i[n][0].call(t.exports,function(e){var t=i[n][1][e];return s(t||e)},t,t.exports,r,i,o,a)}return o[n].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){n.__esModule=!0;var r=i(e(2)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).mouseused_=!1,e.on("mousedown",e.handleMouseDown),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-big-play-button"},r.prototype.handleClick=function(e){var t,n=this.player_.play();this.mouseused_&&e.clientX&&e.clientY||(e=this.player_.getChild("controlBar"),(t=e&&e.getChild("playToggle"))?(e=function(){return t.focus()},n&&n.then?n.then(e,function(){}):this.setTimeout(e,1)):this.player_.focus())},r.prototype.handleKeyPress=function(e){this.mouseused_=!1,n.prototype.handleKeyPress.call(this,e)},r.prototype.handleMouseDown=function(e){this.mouseused_=!0},r})(r.default);r.prototype.controlText_="Play Video",e.default.registerComponent("BigPlayButton",r),n.default=r},{2:2,5:5}],2:[function(e,t,n){n.__esModule=!0;var r=s(e(3)),i=s(e(5)),o=s(e(86)),a=e(88);function s(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"button",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=(0,a.assign)({className:this.buildCSSClass()},t),n=("button"!==e&&(o.default.warn("Creating a Button with an HTML element of "+e+" is deprecated; use ClickableComponent instead."),t=(0,a.assign)({tabIndex:0},t),n=(0,a.assign)({role:"button"},n)),(0,a.assign)({type:"button","aria-live":"polite"},n)),e=i.default.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(e),e},r.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return o.default.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),i.default.prototype.addChild.call(this,e,t)},r.prototype.enable=function(){n.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.prototype.disable=function(){n.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&n.prototype.handleKeyPress.call(this,e)},r})(r.default);i.default.registerComponent("Button",e),n.default=e},{3:3,5:5,86:86,88:88}],3:[function(e,t,n){n.__esModule=!0;var r=d(e(5)),i=u(e(81)),o=u(e(82)),a=u(e(83)),s=d(e(86)),l=d(e(94)),c=e(88);function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=n,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function n(e,t){if(this instanceof n)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).emitTapEvents(),e.enable(),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),n.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=(0,c.assign)({className:this.buildCSSClass(),tabIndex:0},t),e=("button"===e&&s.default.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=(0,c.assign)({role:"button","aria-live":"polite"},n),this.tabIndex_=t.tabIndex,r.prototype.createEl.call(this,e,t,n));return this.createControlTextEl(e),e},n.prototype.createControlTextEl=function(e){return this.controlTextEl_=i.createEl("span",{className:"vjs-control-text"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.prototype.controlText=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();return void 0===e?this.controlText_||"Need Text":(t=this.localize(e),this.controlText_=e,this.controlTextEl_.innerHTML=t,this.nonIconControl||n.setAttribute("title",t),this)},n.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},n.prototype.enable=function(){return this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this},n.prototype.disable=function(){return this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this},n.prototype.handleClick=function(e){},n.prototype.handleFocus=function(e){o.on(l.default,"keydown",a.bind(this,this.handleKeyPress))},n.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleClick(e)):r.prototype.handleKeyPress&&r.prototype.handleKeyPress.call(this,e)},n.prototype.handleBlur=function(e){o.off(l.default,"keydown",a.bind(this,this.handleKeyPress))},n})(r.default);r.default.registerComponent("ClickableComponent",e),n.default=e},{5:5,81:81,82:82,83:83,86:86,88:88,94:94}],4:[function(e,t,n){n.__esModule=!0;var r=i(e(2)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).controlText(t&&t.controlText||e.localize("Close")),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},r})(r.default);e.default.registerComponent("CloseButton",r),n.default=r},{2:2,5:5}],5:[function(e,t,n){n.__esModule=!0;var i=p(e(95)),r=d(e(81)),l=d(e(83)),o=d(e(85)),c=d(e(82)),s=p(e(86)),u=p(e(91)),a=p(e(87));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}h.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),r.removeElData(this.el_),this.el_=null},h.prototype.player=function(){return this.player_},h.prototype.options=function(e){return s.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=(0,a.default)(this.options_,e)),this.options_},h.prototype.el=function(){return this.el_},h.prototype.createEl=function(e,t,n){return r.createEl(e,t,n)},h.prototype.localize=function(e){var t,n=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages();return n&&r?(t=r[n])&&t[e]?t[e]:(t=r[n.split("-")[0]])&&t[e]?t[e]:e:e},h.prototype.contentEl=function(){return this.contentEl_||this.el_},h.prototype.id=function(){return this.id_},h.prototype.name=function(){return this.name_},h.prototype.children=function(){return this.children_},h.prototype.getChildById=function(e){return this.childIndex_[e]},h.prototype.getChild=function(e){if(e)return e=(0,u.default)(e),this.childNameIndex_[e]},h.prototype.addChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,r=void 0,i=void 0;if("string"==typeof e){i=(0,u.default)(e),!0===(t=t||{})&&(s.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),t={});var o=t.componentClass||i,a=(t.name=i,h.getComponent(o));if(!a)throw new Error("Component "+o+" does not exist");if("function"!=typeof a)return null;r=new a(this.player_||this,t)}else r=e;return this.children_.splice(n,0,r),"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(i=i||r.name&&(0,u.default)(r.name()))&&(this.childNameIndex_[i]=r),"function"==typeof r.el&&r.el()&&(o=this.contentEl().children[n]||null,this.contentEl().insertBefore(r.el(),o)),r},h.prototype.removeChild=function(e){if((e="string"==typeof e?this.getChild(e):e)&&this.children_){for(var t,n=!1,r=this.children_.length-1;0<=r;r--)if(this.children_[r]===e){n=!0,this.children_.splice(r,1);break}n&&(this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},h.prototype.initChildren=function(){var n,t,e,r=this,i=this.options_.children;i&&(n=this.options_,e=void 0,t=h.getComponent("Tech"),(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t=void 0,n=void 0,n="string"==typeof e?i[t=e]||r.options_[t]||{}:(t=e.name,e);return{name:t,opts:n}}).filter(function(e){e=h.getComponent(e.opts.componentClass||(0,u.default)(e.name));return e&&!t.isTech(e)}).forEach(function(e){var t=e.name,e=e.opts;!1!==(e=void 0!==n[t]?n[t]:e)&&((e=!0===e?{}:e).playerOptions=r.options_.playerOptions,e=r.addChild(t,e))&&(r[t]=e)}))},h.prototype.buildCSSClass=function(){return""},h.prototype.on=function(e,t,n){var r,i,o,a,s=this;return"string"==typeof e||Array.isArray(e)?c.on(this.el_,e,l.bind(this,t)):(r=e,i=t,o=l.bind(this,n),(a=function(){return s.off(r,i,o)}).guid=o.guid,this.on("dispose",a),(t=function(){return s.off("dispose",a)}).guid=o.guid,e.nodeName?(c.on(r,i,o),c.on(r,"dispose",t)):"function"==typeof e.on&&(r.on(i,o),r.on("dispose",t))),this},h.prototype.off=function(e,t,n){var r;return!e||"string"==typeof e||Array.isArray(e)?c.off(this.el_,e,t):(r=e,t=t,n=l.bind(this,n),this.off("dispose",n),e.nodeName?(c.off(r,t,n),c.off(r,"dispose",n)):(r.off(t,n),r.off("dispose",n))),this},h.prototype.one=function(e,t,n){var r,i,o,a=this,s=arguments;return"string"==typeof e||Array.isArray(e)?c.one(this.el_,e,l.bind(this,t)):(r=e,i=t,o=l.bind(this,n),(e=function e(){a.off(r,i,e),o.apply(null,s)}).guid=o.guid,this.on(r,i,e)),this},h.prototype.trigger=function(e,t){return c.trigger(this.el_,e,t),this},h.prototype.ready=function(e){return e&&(this.isReady_?1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.call(this):this.setTimeout(e,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e))),this},h.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},h.prototype.$=function(e,t){return r.$(e,t||this.contentEl())},h.prototype.$$=function(e,t){return r.$$(e,t||this.contentEl())},h.prototype.hasClass=function(e){return r.hasElClass(this.el_,e)},h.prototype.addClass=function(e){return r.addElClass(this.el_,e),this},h.prototype.removeClass=function(e){return r.removeElClass(this.el_,e),this},h.prototype.toggleClass=function(e,t){return r.toggleElClass(this.el_,e,t),this},h.prototype.show=function(){return this.removeClass("vjs-hidden"),this},h.prototype.hide=function(){return this.addClass("vjs-hidden"),this},h.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},h.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},h.prototype.getAttribute=function(e){return r.getAttribute(this.el_,e)},h.prototype.setAttribute=function(e,t){return r.setAttribute(this.el_,e,t),this},h.prototype.removeAttribute=function(e){return r.removeAttribute(this.el_,e),this},h.prototype.width=function(e,t){return this.dimension("width",e,t)},h.prototype.height=function(e,t){return this.dimension("height",e,t)},h.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},h.prototype.dimension=function(e,t,n){return void 0!==t?(-1!==(""+(t=null!==t&&t==t?t:0)).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",n||this.trigger("resize"),this):this.el_?-1!==(n=(t=this.el_.style[e]).indexOf("px"))?parseInt(t.slice(0,n),10):parseInt(this.el_["offset"+(0,u.default)(e)],10):0},h.prototype.currentDimension=function(e){var t,n=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");return"function"==typeof i.default.getComputedStyle&&(n=(t=i.default.getComputedStyle(this.el_)).getPropertyValue(e)||t[e]),0===(n=parseFloat(n))&&(t="offset"+(0,u.default)(e),n=this.el_[t]),n},h.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},h.prototype.currentWidth=function(){return this.currentDimension("width")},h.prototype.currentHeight=function(){return this.currentDimension("height")},h.prototype.focus=function(){this.el_.focus()},h.prototype.blur=function(){this.el_.blur()},h.prototype.emitTapEvents=function(){function e(){r=!1}var t=0,n=null,r=void 0;this.on("touchstart",function(e){1===e.touches.length&&(n={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),r=!0)}),this.on("touchmove",function(e){var t;(1<e.touches.length||n&&(t=e.touches[0].pageX-n.pageX,e=e.touches[0].pageY-n.pageY,10<Math.sqrt(t*t+e*e)))&&(r=!1)});this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(n=null)===r&&(new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap"))})},h.prototype.enableTouchActivity=function(){var t,n,e;this.player()&&this.player().reportUserActivity&&(t=l.bind(this.player(),this.player().reportUserActivity),n=void 0,this.on("touchstart",function(){t(),this.clearInterval(n),n=this.setInterval(t,250)}),e=function(e){t(),this.clearInterval(n)},this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e))},h.prototype.setTimeout=function(e,t){e=l.bind(this,e);function n(){this.clearTimeout(r)}var r=i.default.setTimeout(e,t);return n.guid="vjs-timeout-"+r,this.on("dispose",n),r},h.prototype.clearTimeout=function(e){i.default.clearTimeout(e);function t(){}return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},h.prototype.setInterval=function(e,t){e=l.bind(this,e);function n(){this.clearInterval(r)}var r=i.default.setInterval(e,t);return n.guid="vjs-interval-"+r,this.on("dispose",n),r},h.prototype.clearInterval=function(e){i.default.clearInterval(e);function t(){}return t.guid="vjs-interval-"+e,this.off("dispose",t),e},h.registerComponent=function(e,t){if(e){if(e=(0,u.default)(e),h.components_||(h.components_={}),"Player"===e&&h.components_[e]){var n=h.components_[e];if(n.players&&0<Object.keys(n.players).length&&Object.keys(n.players).map(function(e){return n.players[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return h.components_[e]=t}},h.getComponent=function(e){if(e)return e=(0,u.default)(e),h.components_&&h.components_[e]?h.components_[e]:i.default&&i.default.videojs&&i.default.videojs[e]?(s.default.warn("The "+e+" component was added to the videojs object when it should be registered using videojs.registerComponent(name, component)"),i.default.videojs[e]):void 0},h.extend=function(e){e=e||{},s.default.warn("Component.extend({}) has been deprecated,  use videojs.extend(Component, {}) instead");function t(){r.apply(this,arguments)}var n,r=e.init||this.prototype.init||function(){};for(n in((t.prototype=Object.create(this.prototype)).constructor=t).extend=h.extend,e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n]);return t};e=h;function h(e,t,n){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");!e&&this.play?this.player_=e=this:this.player_=e,this.options_=(0,a.default)({},this.options_),t=this.options_=(0,a.default)(this.options_,t),this.id_=t.id||t.el&&t.el.id,this.id_||(e=e&&e.id&&e.id()||"no_player",this.id_=e+"_component_"+o.newGUID()),this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}e.registerComponent("Component",e),n.default=e},{81:81,82:82,83:83,85:85,86:86,87:87,91:91,95:95}],6:[function(e,t,n){n.__esModule=!0;var r=o(e(36)),i=o(e(5)),a=o(e(7));function o(e){return e&&e.__esModule?e:{default:e}}e=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=o;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");t.tracks=e.audioTracks&&e.audioTracks();n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,i.call(this,e,t));return n.el_.setAttribute("aria-label","Audio Menu"),n}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o.prototype.buildCSSClass=function(){return"vjs-audio-button "+i.prototype.buildCSSClass.call(this)},o.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(this.hideThreshold_=1,this.player_.audioTracks&&this.player_.audioTracks());if(t)for(var n=0;n<t.length;n++){var r=t[n];e.push(new a.default(this.player_,{track:r,selectable:!0}))}return e},o})(r.default);e.prototype.controlText_="Audio Track",i.default.registerComponent("AudioTrackButton",e),n.default=e},{36:36,5:5,7:7}],7:[function(e,t,n){n.__esModule=!0;var r=o(e(48)),i=o(e(5)),s=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83));function o(e){return e&&e.__esModule?e:{default:e}}e=(o=>{var e=a,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function a(e,t){var n,r,i;if(this instanceof a)return n=t.track,r=e.audioTracks(),t.label=n.label||n.language||"Unknown",t.selected=n.enabled,(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,o.call(this,e,t))).track=n,r&&(i=s.bind(e,e.handleTracksChange),r.addEventListener("change",i),e.on("dispose",function(){r.removeEventListener("change",i)})),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),a.prototype.handleClick=function(e){var t=this.player_.audioTracks();if(o.prototype.handleClick.call(this,e),t)for(var n=0;n<t.length;n++){var r=t[n];r.enabled=r===this.track}},a.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},a})(r.default);i.default.registerComponent("AudioTrackMenuItem",e),n.default=e},{48:48,5:5,83:83}],8:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r};e(12),e(32),e(33),e(35),e(34),e(10),e(18),e(9),e(38),e(40),e(11),e(25),e(27),e(29),e(24),e(6),e(13),e(21);e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"},{role:"group"})},r})(r.default);e.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},r.default.registerComponent("ControlBar",e),n.default=e},{10:10,11:11,12:12,13:13,18:18,21:21,24:24,25:25,27:27,29:29,32:32,33:33,34:34,35:35,38:38,40:40,5:5,6:6,9:9}],9:[function(e,t,n){n.__esModule=!0;var r=i(e(2)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"fullscreenchange",t.handleFullscreenChange),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},r})(r.default);r.prototype.controlText_="Fullscreen",e.default.registerComponent("FullscreenToggle",r),n.default=r},{2:2,5:5}],10:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r},i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81));e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=i.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},r})(r.default);r.default.registerComponent("LiveDisplay",e),n.default=e},{5:5,81:81}],11:[function(e,t,n){n.__esModule=!0;var r=a(e(2)),i=a(e(5)),o=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81));function a(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"volumechange",t.update),e.tech_&&!1===e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){this.update(),!1===e.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.player_.muted(!this.player_.muted())},r.prototype.update=function(e){var t=this.player_.volume(),n=3,t=(this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2),this.player_.muted()?"Unmute":"Mute");this.controlText()!==t&&this.controlText(t);for(var r=0;r<4;r++)o.removeElClass(this.el_,"vjs-vol-"+r);o.addElClass(this.el_,"vjs-vol-"+n)},r})(r.default);e.prototype.controlText_="Mute",i.default.registerComponent("MuteToggle",e),n.default=e},{2:2,5:5,81:81}],12:[function(e,t,n){n.__esModule=!0;var r=i(e(2)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"play",t.handlePlay),t.on(e,"pause",t.handlePause),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},r.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.prototype.handlePlay=function(e){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r})(r.default);r.prototype.controlText_="Play",e.default.registerComponent("PlayToggle",r),n.default=r},{2:2,5:5}],13:[function(e,t,n){n.__esModule=!0;var r=l(e(47)),i=l(e(49)),o=l(e(14)),a=l(e(5)),s=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81));function l(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).updateVisibility(),t.updateLabel(),t.on(e,"loadstart",t.updateVisibility),t.on(e,"ratechange",t.updateLabel),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this);return this.labelEl_=s.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),e.appendChild(this.labelEl_),e},r.prototype.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},r.prototype.createMenu=function(){var e=new i.default(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new o.default(this.player(),{rate:t[n]+"x"}));return e},r.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},r.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},r.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},r.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},r})(r.default);e.prototype.controlText_="Playback Rate",a.default.registerComponent("PlaybackRateMenuButton",e),n.default=e},{14:14,47:47,49:49,5:5,81:81}],14:[function(e,t,n){n.__esModule=!0;var r=i(e(48)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e,t){var n,r;if(this instanceof o)return n=t.rate,r=parseFloat(n,10),t.label=n,t.selected=1===r,t.selectable=!0,(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,i.call(this,e,t))).label=n,t.rate=r,t.on(e,"ratechange",t.update),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o.prototype.handleClick=function(e){i.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},o.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},o})(r.default);r.prototype.contentElType="button",e.default.registerComponent("PlaybackRateMenuItem",r),n.default=r},{48:48,5:5}],15:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r},d=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81));e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).partEls_=[],t.on(e,"progress",t.update),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},r.prototype.update=function(e){function t(e,t){return 100*(1<=(e=e/t||0)?1:e)+"%"}var n=this.player_.buffered(),r=this.player_.duration(),i=this.player_.bufferedEnd(),o=this.partEls_;this.el_.style.width=t(i,r);for(var a=0;a<n.length;a++){var s=n.start(a),l=n.end(a),c=o[a];c||(c=this.el_.appendChild(d.createEl()),o[a]=c),c.style.left=t(s,i),c.style.width=t(l-s,i)}for(var u=o.length;u>n.length;u--)this.el_.removeChild(o[u-1]);o.length=n.length},r})(r.default);r.default.registerComponent("LoadProgressBar",e),n.default=e},{5:5,81:81}],16:[function(e,t,n){n.__esModule=!0;var r=c(e(5)),o=i(e(81)),a=i(e(83)),s=c(e(84)),l=c(e(80));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t){var n;if(this instanceof i)return n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t)),t.playerOptions&&t.playerOptions.controlBar&&t.playerOptions.controlBar.progressControl&&t.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=t.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&(n.tooltip=o.createEl("div",{className:"vjs-time-tooltip"}),n.el().appendChild(n.tooltip),n.addClass("vjs-keep-tooltips-inside")),n.update(0,0),e.on("ready",function(){n.on(e.controlBar.progressControl.el(),"mousemove",a.throttle(a.bind(n,n.handleMouseMove),25))}),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.prototype.handleMouseMove=function(e){var t=this.player_.duration(),t=this.calculateDistance(e)*t,e=e.pageX-o.findElPosition(this.el().parentNode).left;this.update(t,e)},i.prototype.update=function(e,t){var n,e=(0,s.default)(e,this.player_.duration());this.el().style.left=t+"px",this.el().setAttribute("data-current-time",e),this.keepTooltipsInside&&(t=t-this.clampPosition_(t)+1,n=parseFloat((0,l.default)(this.tooltip,"width"))/2,this.tooltip.innerHTML=e,this.tooltip.style.right="-"+(n-t)+"px")},i.prototype.calculateDistance=function(e){return o.getPointerPosition(this.el().parentNode,e).x},i.prototype.clampPosition_=function(e){var t,n,r;return this.keepTooltipsInside?(t=parseFloat((0,l.default)(this.player().el(),"width")),(r=e)<(n=parseFloat((0,l.default)(this.tooltip,"width"))/2)?r=Math.ceil(n):t-n<e&&(r=Math.floor(t-n)),r):e},i})(r.default);r.default.registerComponent("MouseTimeDisplay",e),n.default=e},{5:5,80:80,81:81,83:83,84:84}],17:[function(e,t,n){n.__esModule=!0;var r=i(e(5)),o=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),a=i(e(84));function i(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t){var n;if(this instanceof i)return(n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).updateDataAttr(),n.on(e,"timeupdate",n.updateDataAttr),e.ready(o.bind(n,n.updateDataAttr)),t.playerOptions&&t.playerOptions.controlBar&&t.playerOptions.controlBar.progressControl&&t.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=t.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&n.addClass("vjs-keep-tooltips-inside"),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},i.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("data-current-time",(0,a.default)(t,this.player_.duration()))},i})(r.default);r.default.registerComponent("PlayProgressBar",e),n.default=e},{5:5,83:83,84:84}],18:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r};e(19),e(16);e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r})(r.default);e.prototype.options_={children:["seekBar"]},r.default.registerComponent("ProgressControl",e),n.default=e},{16:16,19:19,5:5}],19:[function(e,t,n){n.__esModule=!0;var r=l(e(57)),i=l(e(5)),o=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),a=l(e(84)),s=l(e(80));function l(e){return e&&e.__esModule?e:{default:e}}e(15),e(17),e(20);e=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t){var n;if(this instanceof i)return(n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).on(e,"timeupdate",n.updateProgress),n.on(e,"ended",n.updateProgress),e.ready(o.bind(n,n.updateProgress)),t.playerOptions&&t.playerOptions.controlBar&&t.playerOptions.controlBar.progressControl&&t.playerOptions.controlBar.progressControl.keepTooltipsInside&&(n.keepTooltipsInside=t.playerOptions.controlBar.progressControl.keepTooltipsInside),n.keepTooltipsInside&&(n.tooltipProgressBar=n.addChild("TooltipProgressBar")),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.createEl=function(){return r.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},i.prototype.updateProgress=function(e){var t,n,r;this.updateAriaAttributes(this.el_),this.keepTooltipsInside&&(this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width,t=parseFloat((0,s.default)(this.player().el(),"width")),n=parseFloat((0,s.default)(this.tooltipProgressBar.tooltip,"width")),(r=this.tooltipProgressBar.el().style).maxWidth=Math.floor(t-n/2)+"px",r.minWidth=Math.ceil(n/2)+"px",r.right="-"+n/2+"px")},i.prototype.updateAriaAttributes=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();e.setAttribute("aria-valuenow",(100*this.getPercent()).toFixed(2)),e.setAttribute("aria-valuetext",(0,a.default)(t,this.player_.duration()))},i.prototype.getPercent=function(){var e=this.player_.currentTime()/this.player_.duration();return 1<=e?1:e},i.prototype.handleMouseDown=function(e){this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),r.prototype.handleMouseDown.call(this,e)},i.prototype.handleMouseMove=function(e){e=this.calculateDistance(e)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)},i.prototype.handleMouseUp=function(e){r.prototype.handleMouseUp.call(this,e),this.player_.scrubbing(!1),this.videoWasPlaying&&this.player_.play()},i.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},i.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},i})(r.default);e.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},e.prototype.playerEvent="timeupdate",i.default.registerComponent("SeekBar",e),n.default=e},{15:15,17:17,20:20,5:5,57:57,80:80,83:83,84:84}],20:[function(e,t,n){n.__esModule=!0;var r=a(e(5)),i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),o=a(e(84));function a(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).updateDataAttr(),t.on(e,"timeupdate",t.updateDataAttr),e.ready(i.bind(t,t.updateDataAttr)),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-tooltip-progress-bar vjs-slider-bar",innerHTML:'<div class="vjs-time-tooltip"></div>\n        <span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"});return this.tooltip=e.querySelector(".vjs-time-tooltip"),e},r.prototype.updateDataAttr=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),t=(0,o.default)(t,this.player_.duration());this.el_.setAttribute("data-current-time",t),this.tooltip.innerHTML=t},r})(r.default);r.default.registerComponent("TooltipProgressBar",e),n.default=e},{5:5,83:83,84:84}],21:[function(e,t,n){n.__esModule=!0;var r=i(e(22)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="&nbsp;",e},r})(r.default);e.default.registerComponent("CustomControlSpacer",r),n.default=r},{22:22,5:5}],22:[function(e,t,n){n.__esModule=!0;var e=e(5),e=(e=e)&&e.__esModule?e:{default:e};var r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},r})(e.default);e.default.registerComponent("Spacer",r),n.default=r},{5:5}],23:[function(e,t,n){n.__esModule=!0;var r=i(e(31)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1;e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t));return e.addClass("vjs-texttrack-settings"),e.controlText(", opens "+t.kind+" settings dialog"),e}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").show(),this.player().getChild("textTrackSettings").el_.focus()},r})(r.default);e.default.registerComponent("CaptionSettingsMenuItem",r),n.default=r},{31:31,5:5}],24:[function(e,t,n){n.__esModule=!0;var r=a(e(30)),i=a(e(5)),o=a(e(23));function a(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t,n){if(this instanceof i)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t,n))).el_.setAttribute("aria-label","Captions Menu"),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.buildCSSClass=function(){return"vjs-captions-button "+r.prototype.buildCSSClass.call(this)},i.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||(e.push(new o.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),r.prototype.createItems.call(this,e)},i})(r.default);e.prototype.kind_="captions",e.prototype.controlText_="Captions",i.default.registerComponent("CaptionsButton",e),n.default=e},{23:23,30:30,5:5}],25:[function(e,t,n){n.__esModule=!0;var r=s(e(30)),i=s(e(5)),o=s(e(26)),a=s(e(91));function s(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t,n){if(this instanceof i)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t,n))).el_.setAttribute("aria-label","Chapters Menu"),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.buildCSSClass=function(){return"vjs-chapters-button "+r.prototype.buildCSSClass.call(this)},i.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),r.prototype.update.call(this)},i.prototype.setTrack=function(e){var t,n;this.track_!==e&&(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_&&((t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&t.removeEventListener("load",this.updateHandler_),this.track_=null),this.track_=e,this.track_)&&(this.track_.mode="hidden",n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&n.addEventListener("load",this.updateHandler_)},i.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},i.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize((0,a.default)(this.kind_))},i.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),r.prototype.createMenu.call(this)},i.prototype.createItems=function(){var e=[];if(this.track_){var t=this.track_.cues;if(t)for(var n=0,r=t.length;n<r;n++){var i=t[n],i=new o.default(this.player_,{track:this.track_,cue:i});e.push(i)}}return e},i})(r.default);e.prototype.kind_="chapters",e.prototype.controlText_="Chapters",i.default.registerComponent("ChaptersButton",e),n.default=e},{26:26,30:30,5:5,91:91}],26:[function(e,t,n){n.__esModule=!0;var r=o(e(48)),i=o(e(5)),s=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83));function o(e){return e&&e.__esModule?e:{default:e}}e=(o=>{var e=a,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function a(e,t){var n,r,i;if(this instanceof a)return n=t.track,r=t.cue,i=e.currentTime(),t.selectable=!0,t.label=r.text,t.selected=r.startTime<=i&&i<r.endTime,(i=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,o.call(this,e,t))).track=n,i.cue=r,n.addEventListener("cuechange",s.bind(i,i.update)),i;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),a.prototype.handleClick=function(e){o.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},a.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},a})(r.default);i.default.registerComponent("ChaptersTrackMenuItem",e),n.default=e},{48:48,5:5,83:83}],27:[function(e,t,n){n.__esModule=!0;var r=o(e(30)),i=o(e(5)),s=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83));function o(e){return e&&e.__esModule?e:{default:e}}e=(o=>{var e=a,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function a(e,t,n){var r,i;if(this instanceof a)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,o.call(this,e,t,n))).el_.setAttribute("aria-label","Descriptions Menu"),(r=e.textTracks())&&(i=s.bind(t,t.handleTracksChange),r.addEventListener("change",i),t.on("dispose",function(){r.removeEventListener("change",i)})),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),a.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},a.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+o.prototype.buildCSSClass.call(this)},a})(r.default);e.prototype.kind_="descriptions",e.prototype.controlText_="Descriptions",i.default.registerComponent("DescriptionsButton",e),n.default=e},{30:30,5:5,83:83}],28:[function(e,t,n){n.__esModule=!0;var r=i(e(31)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");t.track={player:e,kind:t.kind,label:t.kind+" off",default:!1,mode:"disabled"},t.selectable=!0;e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t));return e.selected(!0),e}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var o=t[r];if(o.kind===this.track.kind&&"showing"===o.mode){n=!1;break}}this.selected(n)},r})(r.default);e.default.registerComponent("OffTextTrackMenuItem",r),n.default=r},{31:31,5:5}],29:[function(e,t,n){n.__esModule=!0;var r=i(e(30)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t,n){if(this instanceof i)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t,n))).el_.setAttribute("aria-label","Subtitles Menu"),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+r.prototype.buildCSSClass.call(this)},i})(r.default);r.prototype.kind_="subtitles",r.prototype.controlText_="Subtitles",e.default.registerComponent("SubtitlesButton",r),n.default=r},{30:30,5:5}],30:[function(e,t,n){n.__esModule=!0;var r=o(e(36)),i=o(e(5)),a=o(e(31)),s=o(e(28));function o(e){return e&&e.__esModule?e:{default:e}}e=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=o;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");t.tracks=e.textTracks();n=this,r=i.call(this,e,t);if(n)return!r||"object"!=typeof r&&"function"!=typeof r?n:r;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(e.push(new s.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1,this.player_.textTracks());if(t)for(var n=0;n<t.length;n++){var r=t[n];r.kind===this.kind_&&e.push(new a.default(this.player_,{track:r,selectable:!0}))}return e},o})(r.default);i.default.registerComponent("TextTrackButton",e),n.default=e},{28:28,31:31,36:36,5:5}],31:[function(e,t,n){n.__esModule=!0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(e(48)),i=o(e(5)),c=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),u=o(e(95)),d=o(e(94));function o(e){return e&&e.__esModule?e:{default:e}}e=(a=>{var e=s,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(e,t){var n,r,i,o;if(this instanceof s)return n=t.track,r=e.textTracks(),t.label=n.label||n.language||"Unknown",t.selected=n.default||"showing"===n.mode,(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,a.call(this,e,t))).track=n,r&&(i=c.bind(t,t.handleTracksChange),e.on(["loadstart","texttrackchange"],i),r.addEventListener("change",i),t.on("dispose",function(){r.removeEventListener("change",i)})),r&&void 0===r.onchange&&(o=void 0,t.on(["tap","click"],function(){if("object"!==l(u.default.Event))try{o=new u.default.Event("change")}catch(e){}o||(o=d.default.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(o)})),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s.prototype.handleClick=function(e){var t=this.track.kind,n=this.player_.textTracks();if(a.prototype.handleClick.call(this,e),n)for(var r=0;r<n.length;r++){var i=n[r];i.kind===t&&(i===this.track?"showing"!==i.mode&&(i.mode="showing"):"disabled"!==i.mode&&(i.mode="disabled"))}},s.prototype.handleTracksChange=function(e){this.selected("showing"===this.track.mode)},s})(r.default);i.default.registerComponent("TextTrackMenuItem",e),n.default=e},{48:48,5:5,83:83,94:94,95:95}],32:[function(e,t,n){n.__esModule=!0;var r=a(e(5)),i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81)),o=a(e(84));function a(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"timeupdate",t.updateContent),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-control vjs-control"});return this.contentEl_=i.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00'},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),n=this.localize("Current Time"),t=(0,o.default)(t,this.player_.duration());t!==this.formattedTime_&&(this.formattedTime_=t,this.contentEl_.innerHTML='<span class="vjs-control-text">'+n+"</span> "+t)},r})(r.default);r.default.registerComponent("CurrentTimeDisplay",e),n.default=e},{5:5,81:81,84:84}],33:[function(e,t,n){n.__esModule=!0;var r=a(e(5)),i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81)),o=a(e(84));function a(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"durationchange",t.updateContent),t.on(e,"timeupdate",t.updateContent),t.on(e,"loadedmetadata",t.updateContent),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=i.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.updateContent=function(e){var t,n=this.player_.duration();n&&this.duration_!==n&&(this.duration_=n,t=this.localize("Duration Time"),n=(0,o.default)(n),this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> "+n)},r})(r.default);r.default.registerComponent("DurationDisplay",e),n.default=e},{5:5,81:81,84:84}],34:[function(e,t,n){n.__esModule=!0;var r=a(e(5)),i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81)),o=a(e(84));function a(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"timeupdate",t.updateContent),t.on(e,"durationchange",t.updateContent),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){var e=n.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-control vjs-control"});return this.contentEl_=i.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00"},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},r.prototype.updateContent=function(e){var t,n;this.player_.duration()&&(t=this.localize("Remaining Time"),(n=(0,o.default)(this.player_.remainingTime()))!==this.formattedTime_)&&(this.formattedTime_=n,this.contentEl_.innerHTML='<span class="vjs-control-text">'+t+"</span> -"+n)},r})(r.default);r.default.registerComponent("RemainingTimeDisplay",e),n.default=e},{5:5,81:81,84:84}],35:[function(e,t,n){n.__esModule=!0;var e=e(5),e=(e=e)&&e.__esModule?e:{default:e};var r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},r})(e.default);e.default.registerComponent("TimeDivider",r),n.default=r},{5:5}],36:[function(e,t,n){n.__esModule=!0;var r=o(e(47)),i=o(e(5)),a=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e,t){var n,r;if(this instanceof o)return n=t.tracks,(e=s(this,i.call(this,e,t))).items.length<=1&&e.hide(),n?(r=a.bind(e,e.update),n.addEventListener("removetrack",r),n.addEventListener("addtrack",r),e.player_.on("dispose",function(){n.removeEventListener("removetrack",r),n.removeEventListener("addtrack",r)}),e):s(e);throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o})(r.default);i.default.registerComponent("TrackButton",e),n.default=e},{47:47,5:5,83:83}],37:[function(e,t,n){n.__esModule=!0;var r=a(e(57)),i=a(e(5)),o=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83));function a(e){return e&&e.__esModule?e:{default:e}}e(39);e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"volumechange",t.updateARIAAttributes),e.ready(o.bind(t,t.updateARIAAttributes)),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":"volume level"})},r.prototype.handleMouseMove=function(e){this.checkMuted(),this.player_.volume(this.calculateDistance(e))},r.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.prototype.updateARIAAttributes=function(e){var t=(100*this.player_.volume()).toFixed(2);this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},r})(r.default);e.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},e.prototype.playerEvent="volumechange",i.default.registerComponent("VolumeBar",e),n.default=e},{39:39,5:5,57:57,83:83}],38:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r};e(37);e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t)),e.tech_&&!1===e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",function(){!1===e.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},r})(r.default);e.prototype.options_={children:["volumeBar"]},r.default.registerComponent("VolumeControl",e),n.default=e},{37:37,5:5}],39:[function(e,t,n){n.__esModule=!0;var e=e(5),e=(e=e)&&e.__esModule?e:{default:e};var r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},r})(e.default);e.default.registerComponent("VolumeLevel",r),n.default=r},{5:5}],40:[function(e,t,n){n.__esModule=!0;var r=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),i=a(e(5)),s=a(e(54)),o=a(e(53)),l=a(e(11)),c=a(e(37));function a(e){return e&&e.__esModule?e:{default:e}}e=(o=>{var e=a,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=a;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");void 0===t.inline&&(t.inline=!0),void 0===t.vertical&&(t.inline?t.vertical=!1:t.vertical=!0),t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=!!t.vertical;n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,o.call(this,e,t));function i(){e.tech_&&!1===e.tech_.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}return n.on(e,"volumechange",n.volumeUpdate),n.on(e,"loadstart",n.volumeUpdate),i.call(n),n.on(e,"loadstart",i),n.on(n.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),n.on(n.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),n.on(n.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),n.on(n.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),n}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),a.prototype.buildCSSClass=function(){var e="",e=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal";return"vjs-volume-menu-button "+o.prototype.buildCSSClass.call(this)+" "+e},a.prototype.createPopup=function(){var e=new s.default(this.player_,{contentElType:"div"}),t=new c.default(this.player_,this.options_.volumeBar);return e.addChild(t),this.menuContent=e,this.volumeBar=t,this.attachVolumeBarEvents(),e},a.prototype.handleClick=function(e){l.default.prototype.handleClick.call(this),o.prototype.handleClick.call(this)},a.prototype.attachVolumeBarEvents=function(){this.menuContent.on(["mousedown","touchdown"],r.bind(this,this.handleMouseDown))},a.prototype.handleMouseDown=function(e){this.on(["mousemove","touchmove"],r.bind(this.volumeBar,this.volumeBar.handleMouseMove)),this.on(this.el_.ownerDocument,["mouseup","touchend"],this.handleMouseUp)},a.prototype.handleMouseUp=function(e){this.off(["mousemove","touchmove"],r.bind(this.volumeBar,this.volumeBar.handleMouseMove))},a})(o.default);e.prototype.volumeUpdate=l.default.prototype.update,e.prototype.controlText_="Mute",i.default.registerComponent("VolumeMenuButton",e),n.default=e},{11:11,37:37,5:5,53:53,54:54,83:83}],41:[function(e,t,n){n.__esModule=!0;var r=o(e(5)),i=o(e(50)),e=o(e(87));function o(e){return e&&e.__esModule?e:{default:e}}var a=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).on(e,"error",t.open),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},r.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},r})(i.default);a.prototype.options_=(0,e.default)(i.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),r.default.registerComponent("ErrorDisplay",a),n.default=a},{5:5,50:50,87:87}],42:[function(e,t,n){n.__esModule=!0;var r=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(82));function i(){}i.prototype.allowedEvents_={},i.prototype.addEventListener=i.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},r.on(this,e,t),this.addEventListener=n},i.prototype.removeEventListener=i.prototype.off=function(e,t){r.off(this,e,t)},i.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},r.one(this,e,t),this.addEventListener=n},i.prototype.dispatchEvent=i.prototype.trigger=function(e){var t=e.type||e;e=r.fixEvent(e="string"==typeof e?{type:t}:e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),r.trigger(this,e)},n.default=i},{82:82}],43:[function(e,t,n){n.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e(86),s=(r=r)&&r.__esModule?r:{default:r},l=e(88);n.default=function(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=function(){e.apply(this,arguments)},i={},n=((0,l.isObject)(n)?("function"==typeof n.init&&(s.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),n.constructor=n.init),n.constructor!==Object.prototype.constructor&&(r=n.constructor),i=n):"function"==typeof n&&(r=n),r),o=e;if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function, not "+(void 0===o?"undefined":a(o)));for(t in n.prototype=Object.create(o&&o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o&&(n.super_=o),i)i.hasOwnProperty(t)&&(r.prototype[t]=i[t]);return r}},{86:86,88:88}],44:[function(e,t,n){n.__esModule=!0;var e=e(94),r=(e=e)&&e.__esModule?e:{default:e};for(var i={},o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=o[0],s=void 0,l=0;l<o.length;l++)if(o[l][1]in r.default){s=o[l];break}if(s)for(var c=0;c<s.length;c++)i[a[c]]=s[c];n.default=i},{94:94}],45:[function(e,t,n){n.__esModule=!0;var e=e(5),e=(e=e)&&e.__esModule?e:{default:e};var r=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"})},r})(e.default);e.default.registerComponent("LoadingSpinner",r),n.default=r},{5:5}],46:[function(e,t,n){n.__esModule=!0;var r=e(88);function i(e){if(e instanceof i)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:(0,r.isObject)(e)&&("number"==typeof e.code&&(this.code=e.code),(0,r.assign)(this,e)),this.message||(this.message=i.defaultMessages[this.code]||"")}i.prototype.code=0,i.prototype.message="",i.prototype.status=null,i.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],i.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var o=0;o<i.errorTypes.length;o++)i[i.errorTypes[o]]=o,i.prototype[i.errorTypes[o]]=o;n.default=i},{88:88}],47:[function(e,t,n){n.__esModule=!0;var r=u(e(3)),i=u(e(5)),a=u(e(49)),s=o(e(81)),l=o(e(83)),c=u(e(91));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}e=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=o;if(n instanceof r)return(n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,i.call(this,e,t))).update(),n.enabled_=!0,n.el_.setAttribute("aria-haspopup","true"),n.el_.setAttribute("role","menuitem"),n.on("keydown",n.handleSubmenuKeyPress),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},o.prototype.createMenu=function(){var e,t=new a.default(this.player_);if(this.hideThreshold_=0,this.options_.title&&(e=s.createEl("li",{className:"vjs-menu-title",innerHTML:(0,c.default)(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,t.children_.unshift(e),s.insertElFirst(e,t.contentEl())),this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},o.prototype.createItems=function(){},o.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},o.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+i.prototype.buildCSSClass.call(this)},o.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",l.bind(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},o.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault()):38===e.which||40===e.which?this.buttonPressed_||(this.pressButton(),e.preventDefault()):i.prototype.handleKeyPress.call(this,e)},o.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&e.preventDefault())},o.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},o.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.el_.focus())},o.prototype.disable=function(){return this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-expanded","false"),this.enabled_=!1,i.prototype.disable.call(this)},o.prototype.enable=function(){return this.enabled_=!0,i.prototype.enable.call(this)},o})(r.default);i.default.registerComponent("MenuButton",e),n.default=e},{3:3,49:49,5:5,81:81,83:83,91:91}],48:[function(e,t,n){n.__esModule=!0;var r=a(e(3)),i=a(e(5)),o=e(88);function a(e){return e&&e.__esModule?e:{default:e}}e=(r=>{var e=n,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function n(e,t){if(this instanceof n)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).selectable=t.selectable,e.selected(t.selected),e.selectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitem"),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),n.prototype.createEl=function(e,t,n){return this.nonIconControl=!0,r.prototype.createEl.call(this,"li",(0,o.assign)({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label),tabIndex:-1},t),n)},n.prototype.handleClick=function(e){this.selected(!0)},n.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected")):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText("")))},n})(r.default);i.default.registerComponent("MenuItem",e),n.default=e},{3:3,5:5,88:88}],49:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r},i=s(e(81)),o=s(e(83)),a=s(e(82));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).focusedChild_=-1,e.on("keydown",e.handleKeyPress),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.addItem=function(e){this.addChild(e),e.on("click",o.bind(this,function(e){this.unlockShowing()}))},r.prototype.createEl=function(){var e=this.options_.contentElType||"ul",e=(this.contentEl_=i.createEl(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu"),n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"}));return e.setAttribute("role","presentation"),e.appendChild(this.contentEl_),a.on(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},r.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},r.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},r.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},r.prototype.focus=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},r})(r.default);r.default.registerComponent("Menu",e),n.default=e},{5:5,81:81,82:82,83:83}],50:[function(e,t,n){n.__esModule=!0;var i=r(e(81)),o=r(e(83)),e=e(5),e=(e=e)&&e.__esModule?e:{default:e};function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var a="vjs-modal-dialog",s=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=i.createEl("div",{className:a+"-content"},{role:"document"}),e.descEl_=i.createEl("p",{className:a+"-description vjs-offscreen",id:e.el().getAttribute("aria-describedby")}),i.textContent(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.prototype.buildCSSClass=function(){return a+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},r.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},r.prototype.label=function(){return this.options_.label||this.localize("Modal Window")},r.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},r.prototype.open=function(){var e;return this.opened_||(e=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",o.bind(this,this.handleKeyPress)),e.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0),this},r.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},r.prototype.close=function(){var e;return this.opened_&&(e=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",o.bind(this,this.handleKeyPress)),e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary)&&this.dispose(),this},r.prototype.closeable=function(e){var t,n;return"boolean"==typeof e&&(e=this.closeable_=!!e,t=this.getChild("closeButton"),e&&!t&&(n=this.contentEl_,this.contentEl_=this.el_,t=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=n,this.on(t,"close",this.close)),!e)&&t&&(this.off(t,"close",this.close),this.removeChild(t),t.dispose()),this.closeable_},r.prototype.fill=function(){return this.fillWith(this.content())},r.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;return this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),i.insertContent(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t),this},r.prototype.empty=function(){return this.trigger("beforemodalempty"),i.emptyEl(this.contentEl()),this.trigger("modalempty"),this},r.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},r})(e.default);s.prototype.options_={pauseOnOpen:!0,temporary:!0},e.default.registerComponent("ModalDialog",s),n.default=s},{5:5,81:81,83:83}],51:[function(e,t,n){n.__esModule=!0;var a=c(e(5)),r=c(e(94)),u=c(e(95)),i=s(e(82)),d=s(e(81)),l=s(e(83)),p=s(e(85)),h=s(e(78)),f=c(e(86)),m=c(e(91)),o=e(90),g=e(79),v=s(e(89)),y=c(e(44)),b=c(e(46)),S=c(e(97)),_=e(88),E=c(e(87)),C=c(e(69)),w=c(e(50)),T=c(e(62)),A=c(e(63)),P=c(e(76));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}e(61),e(59),e(55),e(68),e(45),e(1),e(4),e(8),e(41),e(71),e(60);var O=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],I=(c=>{var e=s,t=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(e,t,n){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");if(e.id=e.id||"vjs_video_"+p.newGUID(),(t=(0,_.assign)(s.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&(t.language=r.getAttribute("lang"))}else for(var i=e;i&&1===i.nodeType;){if(d.getElAttributes(i).hasOwnProperty("lang")){t.language=i.getAttribute("lang");break}i=i.parentNode}var o,r=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,c.call(this,null,t,n));if(!r.options_||!r.options_.techOrder||!r.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");r.tag=e,r.tagAttributes=e&&d.getElAttributes(e),r.language(r.options_.language),t.languages?(o={},Object.getOwnPropertyNames(t.languages).forEach(function(e){o[e.toLowerCase()]=t.languages[e]}),r.languages_=o):r.languages_=s.prototype.options_.languages,r.cache_={},r.poster_=t.poster||"",r.controls_=!!t.controls,e.controls=!1,r.scrubbing_=!1,r.el_=r.createEl();var a,n=(0,E.default)(r.options_),n=(t.plugins&&(a=t.plugins,Object.getOwnPropertyNames(a).forEach(function(e){"function"==typeof this[e]?this[e](a[e]):f.default.error("Unable to find plugin:",e)},r)),r.options_.playerOptions=n,r.initChildren(),r.isAudio("audio"===e.nodeName.toLowerCase()),r.controls()?r.addClass("vjs-controls-enabled"):r.addClass("vjs-controls-disabled"),r.el_.setAttribute("role","region"),r.isAudio()?r.el_.setAttribute("aria-label","audio player"):r.el_.setAttribute("aria-label","video player"),r.isAudio()&&r.addClass("vjs-audio"),r.flexNotSupported_()&&r.addClass("vjs-no-flex"),h.IS_IOS||r.addClass("vjs-workinghover"),s.players[r.id_]=r,"5.20.5".split(".")[0]);return r.addClass("vjs-v"+n),r.userActive(!0),r.reportUserActivity(),r.listenForUserActivity_(),r.on("fullscreenchange",r.handleFullscreenChange_),r.on("stageclick",r.handleStageClick_),r}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&this.styleEl_.parentNode.removeChild(this.styleEl_),s.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&this.tech_.dispose(),c.prototype.dispose.call(this)},s.prototype.createEl=function(){var e=this.tag,t=void 0,n=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),t=this.el_=n?e.parentNode:c.prototype.createEl.call(this,"div");e.setAttribute("tabindex","-1"),e.removeAttribute("width"),e.removeAttribute("height");for(var r,i,o=d.getElAttributes(e),a=(Object.getOwnPropertyNames(o).forEach(function(e){"class"===e?t.className+=" "+o[e]:t.setAttribute(e,o[e])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",(e.player=t.player=this).addClass("vjs-paused"),!0!==u.default.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=v.createStyleElement("vjs-styles-dimensions"),r=d.$(".vjs-styles-defaults"),(i=d.$("head")).insertBefore(this.styleEl_,r?r.nextSibling:i.firstChild)),this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),e.getElementsByTagName("a")),s=0;s<a.length;s++){var l=a.item(s);d.addElClass(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!n&&e.parentNode.insertBefore(t,e),d.insertElFirst(e,t),this.children_.unshift(e),this.el_=t},s.prototype.width=function(e){return this.dimension("width",e)},s.prototype.height=function(e){return this.dimension("height",e)},s.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)this[n]=void 0;else{var r=parseFloat(t);if(isNaN(r))return f.default.error('Improper value "'+t+'" supplied for for '+e),this;this[n]=r}return this.updateStyleEl_(),this},s.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?this.addClass("vjs-fluid"):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},s.prototype.updateStyleEl_=function(){var e,t,n,r;!0===u.default.VIDEOJS_NO_DYNAMIC_STYLE?(t="number"==typeof this.width_?this.width_:this.options_.width,r="number"==typeof this.height_?this.height_:this.options_.height,(n=this.tech_&&this.tech_.el())&&(0<=t&&(n.width=t),0<=r)&&(n.height=r)):(e=(e=((r=n=t=void 0)!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/e[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/e:this.videoWidth()||300,n=void 0!==this.height_?this.height_:t*e,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),v.setTextContent(this.styleEl_,"\n      ."+r+" {\n        width: "+t+"px;\n        height: "+n+"px;\n      }\n\n      ."+r+".vjs-fluid {\n        padding-top: "+100*e+"%;\n      }\n    "))},s.prototype.loadTech_=function(e,t){var n=this,r=(this.tech_&&this.unloadTech_(),"Html5"!==e&&this.tag&&(T.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=e,(this.isReady_=!1,_.assign)({source:t,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+e+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[e.toLowerCase()]));this.tag&&(r.tag=this.tag),t&&(this.currentType_=t.type,t.src===this.cache_.src&&0<this.cache_.currentTime&&(r.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src);t=(t=T.default.getTech(e))||a.default.getComponent(e);this.tech_=new t(r),this.tech_.ready(l.bind(this,this.handleTechReady_),!0),C.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),O.forEach(function(e){n.on(n.tech_,e,n["handleTech"+(0,m.default)(e)+"_"])}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===e&&this.tag||d.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.prototype.unloadTech_=function(){this.videoTracks_=this.videoTracks(),this.textTracks_=this.textTracks(),this.audioTracks_=this.audioTracks(),this.textTracksJson_=C.default.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1},s.prototype.tech=function(e){if(e&&e.IWillNotUseThisInPlugins)return this.tech_;e="\n      Please make sure that you are not using this inside of a plugin.\n      To disable this alert and error, please pass in an object with\n      `IWillNotUseThisInPlugins` to the `tech` method. See\n      https://github.com/videojs/video.js/issues/2617 for more info.\n    ";throw u.default.alert(e),new Error(e)},s.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},s.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},s.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused()){try{delete this.tag.poster}catch(e){(0,f.default)("deleting tag.poster throws in some browsers",e)}this.play()}},s.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"))},s.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&((this.hasStarted_=e)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):!!this.hasStarted_},s.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},s.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},s.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(f.default.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},s.prototype.handleTechClick_=function(e){0===e.button&&this.controls()&&(this.paused()?this.play():this.pause())},s.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},s.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},s.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},s.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},s.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.prototype.handleStageClick_=function(){this.reportUserActivity()},s.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},s.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},s.prototype.handleTechTextData_=function(){var e=1<arguments.length?arguments[1]:null;this.trigger("textdata",e)},s.prototype.getCache=function(){return this.cache_},s.prototype.techCall_=function(e,t){if(this.tech_&&!this.tech_.isReady_)this.tech_.ready(function(){this[e](t)},!0);else try{this.tech_&&this.tech_[e](t)}catch(e){throw(0,f.default)(e),e}},s.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_)try{return this.tech_[t]()}catch(e){throw void 0===this.tech_[t]?(0,f.default)("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e):"TypeError"===e.name?((0,f.default)("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1):(0,f.default)(e),e}},s.prototype.play=function(){return this.src()||this.currentSrc()?this.techCall_("play"):this.tech_.one("loadstart",function(){this.play()}),this},s.prototype.pause=function(){return this.techCall_("pause"),this},s.prototype.paused=function(){return!1!==this.techGet_("paused")},s.prototype.scrubbing=function(e){return void 0!==e?(this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing"),this):this.scrubbing_},s.prototype.currentTime=function(e){return void 0!==e?(this.techCall_("setCurrentTime",e),this):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.prototype.duration=function(e){return void 0===e?void 0!==this.cache_.duration?this.cache_.duration:NaN:((e=(e=parseFloat(e))<0?1/0:e)!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},s.prototype.remainingTime=function(){return this.duration()-this.currentTime()},s.prototype.buffered=function(){var e;return e=(e=this.techGet_("buffered"))&&e.length?e:(0,o.createTimeRange)(0,0)},s.prototype.bufferedPercent=function(){return(0,g.bufferedPercent)(this.buffered(),this.duration())},s.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),e=e.end(e.length-1);return e=t<e?t:e},s.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),this):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},s.prototype.muted=function(e){return void 0!==e?(this.techCall_("setMuted",e),this):this.techGet_("muted")||!1},s.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},s.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):!!this.isFullscreen_},s.prototype.requestFullscreen=function(){var n=y.default;return this.isFullscreen(!0),n.requestFullscreen?(i.on(r.default,n.fullscreenchange,l.bind(this,function e(t){this.isFullscreen(r.default[n.fullscreenElement]),!1===this.isFullscreen()&&i.off(r.default,n.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},s.prototype.exitFullscreen=function(){var e=y.default;return this.isFullscreen(!1),e.requestFullscreen?r.default[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},s.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=r.default.documentElement.style.overflow,i.on(r.default,"keydown",l.bind(this,this.fullWindowOnEscKey)),r.default.documentElement.style.overflow="hidden",d.addElClass(r.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},s.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},s.prototype.exitFullWindow=function(){this.isFullWindow=!1,i.off(r.default,"keydown",this.fullWindowOnEscKey),r.default.documentElement.style.overflow=this.docOrigOverflow,d.removeElClass(r.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},s.prototype.canPlayType=function(e){for(var t=0,n=this.options_.techOrder;t<n.length;t++){var r=(0,m.default)(n[t]),i=T.default.getTech(r);if(i=i||a.default.getComponent(r)){if(i.isSupported()&&(i=i.canPlayType(e)))return i}else f.default.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.prototype.selectSource=function(e){function t(e,n,r){var i=void 0;return e.some(function(t){return n.some(function(e){if(i=r(t,e))return!0})}),i}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}}var r,i=this,o=this.options_.techOrder.map(m.default).map(function(e){return[e,T.default.getTech(e)||a.default.getComponent(e)]}).filter(function(e){var t=e[0],e=e[1];return e?e.isSupported():(f.default.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,o,(r=n,function(e,t){return r(t,e)})):t(o,e,n))||!1},s.prototype.src=function(e){var t;return void 0===e?this.techGet_("src"):(t=(t=T.default.getTech(this.techName_))||a.default.getComponent(this.techName_),Array.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!t.canPlaySource(e,this.options_[this.techName_.toLowerCase()])?this.sourceList_([e]):(this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src,this.currentType_=e.type||"",this.ready(function(){t.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),"auto"===this.options_.preload&&this.load(),this.options_.autoplay&&this.play()},!0))),this)},s.prototype.sourceList_=function(e){var t=this.selectSource(e);t?(t.tech===this.techName_?this.src(t.source):this.loadTech_(t.tech,t.source),this.cache_.sources=e):(this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),this.triggerReady())},s.prototype.load=function(){return this.techCall_("load"),this},s.prototype.reset=function(){return this.loadTech_((0,m.default)(this.options_.techOrder[0]),null),this.techCall_("reset"),this},s.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},s.prototype.currentSource=function(){var e={},t=this.currentSrc();return t&&(e.src=t),this.cache_.source||e},s.prototype.currentSrc=function(){return this.techGet_("currentSrc")||this.cache_.src||""},s.prototype.currentType=function(){return this.currentType_||""},s.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),this.options_.preload=e,this):this.techGet_("preload")},s.prototype.autoplay=function(e){return void 0!==e?(this.techCall_("setAutoplay",e),this.options_.autoplay=e,this):this.techGet_("autoplay",e)},s.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},s.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),this.options_.loop=e,this):this.techGet_("loop")},s.prototype.poster=function(e){return void 0===e?this.poster_:(this.poster_=e=e||"",this.techCall_("setPoster",e),this.trigger("posterchange"),this)},s.prototype.handleTechPosterChange_=function(){!this.poster_&&this.tech_&&this.tech_.poster&&(this.poster_=this.tech_.poster()||"",this.trigger("posterchange"))},s.prototype.controls=function(e){return void 0!==e?(this.controls_!==(e=!!e)&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},s.prototype.usingNativeControls=function(e){return void 0!==e?(this.usingNativeControls_!==(e=!!e)&&((this.usingNativeControls_=e)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},s.prototype.error=function(e){return void 0===e?this.error_||null:(null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new b.default(e),this.addClass("vjs-error"),f.default.error("(CODE:"+this.error_.code+" "+b.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")),this)},s.prototype.reportUserActivity=function(e){this.userActivity_=!0},s.prototype.userActive=function(e){return void 0!==e?((e=!!e)!==this.userActive_&&((this.userActive_=e)?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},s.prototype.listenForUserActivity_=function(){var t=void 0,n=void 0,r=void 0,i=l.bind(this,this.reportUserActivity),o=(this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===r||(n=e.screenX,r=e.screenY,i())}),this.on("mouseup",function(e){i(),this.clearInterval(t)}),this.on("keydown",i),this.on("keyup",i),void 0);this.setInterval(function(){var e;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o),0<(e=this.options_.inactivityTimeout))&&(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))},250)},s.prototype.playbackRate=function(e){return void 0!==e?(this.techCall_("setPlaybackRate",e),this):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("playbackRate"):1},s.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):!!this.isAudio_},s.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new P.default,this.videoTracks_)},s.prototype.audioTracks=function(){return this.tech_?this.tech_.audioTracks():(this.audioTracks_=this.audioTracks_||new A.default,this.audioTracks_)},s.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},s.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},s.prototype.remoteTextTrackEls=function(){if(this.tech_)return this.tech_.remoteTextTrackEls()},s.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},s.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},s.prototype.removeRemoteTextTrack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;if(this.tech_)return this.tech_.removeRemoteTextTrack(void 0===e?arguments[0]:e)},s.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},s.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.prototype.language=function(e){return void 0===e?this.language_:(this.language_=String(e).toLowerCase(),this)},s.prototype.languages=function(){return(0,E.default)(s.prototype.options_.languages,this.languages_)},s.prototype.toJSON=function(){var e=(0,E.default)(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=(0,E.default)(r)).player=void 0,e.tracks[n]=r}return e},s.prototype.createModal=function(e,t){var n=this,r=((t=t||{}).content=e||"",new w.default(this,t));return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open()},s.getTagSettings=function(e){var t,n={sources:[],tracks:[]},r=d.getElAttributes(e),i=r["data-setup"];if(d.hasElClass(e,"vjs-fluid")&&(r.fluid=!0),null!==i&&(t=(i=(0,S.default)(i||"{}"))[0],i=i[1],t&&f.default.error(t),(0,_.assign)(r,i)),(0,_.assign)(n,r),e.hasChildNodes())for(var o=e.childNodes,a=0,s=o.length;a<s;a++){var l=o[a],c=l.nodeName.toLowerCase();"source"===c?n.sources.push(d.getElAttributes(l)):"track"===c&&n.tracks.push(d.getElAttributes(l))}return n},s.prototype.flexNotSupported_=function(){var e=r.default.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},s})(a.default),e=(I.players={},u.default.navigator);I.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:e&&(e.languages&&e.languages[0]||e.userLanguage||e.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){I.prototype[e]=function(){return this.techGet_(e)}}),O.forEach(function(e){I.prototype["handleTech"+(0,m.default)(e)+"_"]=function(){return this.trigger(e)}}),a.default.registerComponent("Player",I),n.default=I},{1:1,4:4,41:41,44:44,45:45,46:46,5:5,50:50,55:55,59:59,60:60,61:61,62:62,63:63,68:68,69:69,71:71,76:76,78:78,79:79,8:8,81:81,82:82,83:83,85:85,86:86,87:87,88:88,89:89,90:90,91:91,94:94,95:95,97:97}],52:[function(e,t,n){n.__esModule=!0;var e=e(51),r=(e=e)&&e.__esModule?e:{default:e};n.default=function(e,t){r.default.prototype[e]=t}},{51:51}],53:[function(e,t,n){n.__esModule=!0;var r=i(e(3)),e=i(e(5));function i(e){return e&&e.__esModule?e:{default:e}}r=(i=>{var e=o,t=i;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=this,r=o;if(n instanceof r)return(n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,i.call(this,e,t))).update(),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),o.prototype.update=function(){var e=this.createPopup();this.popup&&this.removeChild(this.popup),this.popup=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&1<this.items.length&&this.show()},o.prototype.createPopup=function(){},o.prototype.createEl=function(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},o.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+i.prototype.buildCSSClass.call(this)},o})(r.default);e.default.registerComponent("PopupButton",r),n.default=r},{3:3,5:5}],54:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r},i=s(e(81)),o=s(e(83)),a=s(e(82));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(){var e=this,t=r;if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");e=this,t=n.apply(this,arguments);if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.addItem=function(e){this.addChild(e),e.on("click",o.bind(this,function(){this.unlockShowing()}))},r.prototype.createEl=function(){var e=this.options_.contentElType||"ul",e=(this.contentEl_=i.createEl(e,{className:"vjs-menu-content"}),n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"}));return e.appendChild(this.contentEl_),a.on(e,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),e},r})(r.default);r.default.registerComponent("Popup",e),n.default=e},{5:5,81:81,82:82,83:83}],55:[function(e,t,n){n.__esModule=!0;var r=c(e(3)),i=c(e(5)),o=l(e(83)),a=l(e(81)),s=l(e(78));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(e,t){if(this instanceof r)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t))).update(),e.on("posterchange",o.bind(t,t.update)),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.dispose=function(){this.player().off("posterchange",this.update),n.prototype.dispose.call(this)},r.prototype.createEl=function(){var e=a.createEl("div",{className:"vjs-poster",tabIndex:-1});return s.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=a.createEl("img"),e.appendChild(this.fallbackImg_)),e},r.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},r.prototype.setSrc=function(e){this.fallbackImg_?this.fallbackImg_.src=e:this.el_.style.backgroundImage=e?'url("'+e+'")':""},r.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?this.player_.play():this.player_.pause())},r})(r.default);i.default.registerComponent("PosterImage",e),n.default=e},{3:3,5:5,78:78,81:81,83:83}],56:[function(e,t,n){n.__esModule=!0,n.hasLoaded=n.autoSetupTimeout=n.autoSetup=void 0;var u=a(e(81)),r=a(e(82)),d=o(e(94)),i=o(e(95));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var p=!1,h=void 0,s=function(){if(u.isReal()){var e=d.default.getElementsByTagName("video"),t=d.default.getElementsByTagName("audio"),n=[];if(e&&0<e.length)for(var r=0,i=e.length;r<i;r++)n.push(e[r]);if(t&&0<t.length)for(var o=0,a=t.length;o<a;o++)n.push(t[o]);if(n&&0<n.length)for(var s=0,l=n.length;s<l;s++){var c=n[s];if(!c||!c.getAttribute){f(1);break}void 0===c.player&&null!==c.getAttribute("data-setup")&&h(c)}else p||f(1)}};function f(e,t){t&&(h=t),i.default.setTimeout(s,e)}u.isReal()&&"complete"===d.default.readyState?p=!0:r.one(i.default,"load",function(){p=!0});n.autoSetup=s,n.autoSetupTimeout=f,n.hasLoaded=function(){return p}},{81:81,82:82,94:94,95:95}],57:[function(e,t,n){n.__esModule=!0;var r=e(5),r=(r=r)&&r.__esModule?r:{default:r},i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81)),o=e(88);e=(r=>{var e=n,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function n(e,t){if(this instanceof n)return(t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).bar=t.getChild(t.options_.barName),t.vertical(!!t.options_.vertical),t.on("mousedown",t.handleMouseDown),t.on("touchstart",t.handleMouseDown),t.on("focus",t.handleFocus),t.on("blur",t.handleBlur),t.on("click",t.handleClick),t.on(e,"controlsvisible",t.update),t.on(e,t.playerEvent,t.update),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),n.prototype.createEl=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return t.className=t.className+" vjs-slider",t=(0,o.assign)({tabIndex:0},t),n=(0,o.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),r.prototype.createEl.call(this,e,t,n)},n.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;e.preventDefault(),i.blockTextSelection(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.prototype.handleMouseMove=function(e){},n.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;i.unblockTextSelection(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.prototype.update=function(){var e,t;this.el_&&(t=this.getPercent(),e=this.bar)&&(t=(100*(t="number"!=typeof t||t!=t||t<0||t===1/0?0:t)).toFixed(2)+"%",this.vertical()?e.el().style.height=t:e.el().style.width=t)},n.prototype.calculateDistance=function(e){e=i.getPointerPosition(this.el_,e);return this.vertical()?e.y:e.x},n.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},n.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},n.prototype.vertical=function(e){return void 0===e?this.vertical_||!1:(this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal"),this)},n})(r.default);r.default.registerComponent("Slider",e),n.default=e},{5:5,81:81,88:88}],58:[function(e,t,n){n.__esModule=!0,n.default=function(r){return r.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},r.streamFromParts=function(e,t){return e+"&"+t},r.streamToParts=function(e){var t,n,r={connection:"",stream:""};return e&&(n=void 0,-1!==(t=e.search(/&(?!\w+=)/))?n=t+1:0===(t=n=e.lastIndexOf("/")+1)&&(t=n=e.length),r.connection=e.substring(0,t),r.stream=e.substring(n,e.length)),r},r.isStreamingType=function(e){return e in r.streamingFormats},r.RTMP_RE=/^rtmp[set]?:\/\//i,r.isStreamingSrc=function(e){return r.RTMP_RE.test(e)},r.rtmpSourceHandler={},r.rtmpSourceHandler.canPlayType=function(e){return r.isStreamingType(e)?"maybe":""},r.rtmpSourceHandler.canHandleSource=function(e,t){var n=r.rtmpSourceHandler.canPlayType(e.type);return n||(r.isStreamingSrc(e.src)?"maybe":"")},r.rtmpSourceHandler.handleSource=function(e,t,n){e=r.streamToParts(e.src);t.setRtmpConnection(e.connection),t.setRtmpStream(e.stream)},r.registerSourceHandler(r.rtmpSourceHandler),r}},{}],59:[function(e,t,n){n.__esModule=!0;var r=p(e(62)),i=d(e(81)),o=d(e(92)),a=e(90),s=p(e(58)),l=p(e(5)),c=p(e(95)),u=e(88);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}var h=c.default.navigator,f=(n=>{var e=i,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t){if(this instanceof i)return t=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,e,t)),e.source&&t.ready(function(){this.setSource(e.source)},!0),e.startTime&&t.ready(function(){this.load(),this.play(),this.currentTime(e.startTime)},!0),c.default.videojs=c.default.videojs||{},c.default.videojs.Flash=c.default.videojs.Flash||{},c.default.videojs.Flash.onReady=i.onReady,c.default.videojs.Flash.onEvent=i.onEvent,c.default.videojs.Flash.onError=i.onError,t.on("seeked",function(){this.lastSeekTarget_=void 0}),t;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.createEl=function(){var e=this.options_,t=(e.swf||(e.swf="//vjs.zencdn.net/swf/5.4.1/video-js.swf"),e.techId),n=(0,u.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),r=(0,u.assign)({wmode:"opaque",bgcolor:"#000000"},e.params),t=(0,u.assign)({id:t,name:t,class:"vjs-tech"},e.attributes);return this.el_=i.embed(e.swf,n,r,t),(this.el_.tech=this).el_},i.prototype.play=function(){this.ended()&&this.setCurrentTime(0),this.el_.vjs_play()},i.prototype.pause=function(){this.el_.vjs_pause()},i.prototype.src=function(e){return void 0===e?this.currentSrc():this.setSrc(e)},i.prototype.setSrc=function(e){var t=this;e=o.getAbsoluteURL(e),this.el_.vjs_src(e),this.autoplay()&&this.setTimeout(function(){return t.play()},0)},i.prototype.seeking=function(){return void 0!==this.lastSeekTarget_},i.prototype.setCurrentTime=function(e){var t=this.seekable();t.length&&(e=(e=e>t.start(0)?e:t.start(0))<t.end(t.length-1)?e:t.end(t.length-1),this.lastSeekTarget_=e,this.trigger("seeking"),this.el_.vjs_setProperty("currentTime",e),n.prototype.setCurrentTime.call(this))},i.prototype.currentTime=function(){return this.seeking()?this.lastSeekTarget_||0:this.el_.vjs_getProperty("currentTime")},i.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.vjs_getProperty("currentSrc")},i.prototype.duration=function(){var e;return 0===this.readyState()?NaN:0<=(e=this.el_.vjs_getProperty("duration"))?e:1/0},i.prototype.load=function(){this.el_.vjs_load()},i.prototype.poster=function(){this.el_.vjs_getProperty("poster")},i.prototype.setPoster=function(){},i.prototype.seekable=function(){var e=this.duration();return 0===e?(0,a.createTimeRange)():(0,a.createTimeRange)(0,e)},i.prototype.buffered=function(){var e=this.el_.vjs_getProperty("buffered");return 0===e.length?(0,a.createTimeRange)():(0,a.createTimeRange)(e[0][0],e[0][1])},i.prototype.supportsFullScreen=function(){return!1},i.prototype.enterFullScreen=function(){return!1},i.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return c.default.performance&&"function"==typeof c.default.performance.now?e.creationTime=c.default.performance.now():c.default.performance&&c.default.performance.timing&&"number"==typeof c.default.performance.timing.navigationStart&&(e.creationTime=c.default.Date.now()-c.default.performance.timing.navigationStart),e},i})(r.default),m=f.prototype,g="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),v="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(",");function y(e){m[e]=function(){return this.el_.vjs_getProperty(e)}}for(var b=0;b<g.length;b++)y(g[b]),(t=>{var e=t.charAt(0).toUpperCase()+t.slice(1);m["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}})(g[b]);for(var S=0;S<v.length;S++)y(v[S]);f.isSupported=function(){return 10<=f.version()[0]},r.default.withSourceHandlers(f),f.nativeSourceHandler={},f.nativeSourceHandler.canPlayType=function(e){return e in f.formats?"maybe":""},f.nativeSourceHandler.canHandleSource=function(e,t){var n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():(e=e.src,(e=o.getFileExtension(e))?"video/"+e:""),f.nativeSourceHandler.canPlayType(n)},f.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},f.nativeSourceHandler.dispose=function(){},f.registerSourceHandler(f.nativeSourceHandler),f.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},f.onReady=function(e){e=i.getEl(e),e=e&&e.tech;e&&e.el()&&f.checkReady(e)},f.checkReady=function(e){e.el()&&(e.el().vjs_getProperty?e.triggerReady():this.setTimeout(function(){f.checkReady(e)},50))},f.onEvent=function(e,t){var n=i.getEl(e).tech,r=Array.prototype.slice.call(arguments,2);n.setTimeout(function(){n.trigger(t,r)},1)},f.onError=function(e,t){e=i.getEl(e).tech;if("srcnotfound"===t)return e.error(4);e.error("FLASH: "+t)},f.version=function(){var t="0,0,0";try{t=new c.default.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{h.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(h.plugins["Shockwave Flash 2.0"]||h.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(e){}}return t.split(",")},f.embed=function(e,t,n,r){e=f.getEmbedCode(e,t,n,r);return i.createEl("div",{innerHTML:e}).childNodes[0]},f.getEmbedCode=function(e,t,n,r){var i="",o="",a="";return t&&Object.getOwnPropertyNames(t).forEach(function(e){i+=e+"="+t[e]+"&amp;"}),n=(0,u.assign)({movie:e,flashvars:i,allowScriptAccess:"always",allowNetworking:"all"},n),Object.getOwnPropertyNames(n).forEach(function(e){o+='<param name="'+e+'" value="'+n[e]+'" />'}),r=(0,u.assign)({data:e,width:"100%",height:"100%"},r),Object.getOwnPropertyNames(r).forEach(function(e){a+=e+'="'+r[e]+'" '}),'<object type="application/x-shockwave-flash" '+a+">"+o+"</object>"},(0,s.default)(f),l.default.registerComponent("Flash",f),r.default.registerTech("Flash",f),n.default=f},{5:5,58:58,62:62,81:81,88:88,90:90,92:92,95:95}],60:[function(e,t,n){n.__esModule=!0;(r=["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]).raw=["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."];var d=r,r=u(e(62)),i=u(e(5)),a=c(e(81)),p=c(e(92)),h=c(e(83)),f=u(e(86)),m=u(e(98)),g=c(e(78)),s=u(e(94)),o=u(e(95)),l=e(88),v=u(e(87)),y=u(e(91));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var b=(c=>{var e=u,t=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function u(e,t){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");var r=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,c.call(this,e,t)),t=e.source,n=!1;if(t&&(r.el_.currentSrc!==t.src||e.tag&&3===e.tag.initNetworkState_)?r.setSource(t):r.handleLateInit_(r.el_),r.el_.hasChildNodes()){for(var i=r.el_.childNodes,o=i.length,a=[];o--;){var s=i[o];"track"===s.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(s),r.remoteTextTracks().addTrack_(s.track),n||r.el_.hasAttribute("crossorigin")||!p.isCrossOrigin(s.src)||(n=!0)):a.push(s))}for(var l=0;l<a.length;l++)r.el_.removeChild(a[l])}return["audio","video"].forEach(function(e){var t=r.el()[e+"Tracks"],n=r[e+"Tracks"](),e=(0,y.default)(e);r["featuresNative"+e+"Tracks"]&&t&&t.addEventListener&&(r["handle"+e+"TrackChange_"]=function(e){n.trigger({type:"change",target:n,currentTarget:n,srcElement:n})},r["handle"+e+"TrackAdd_"]=function(e){return n.addTrack(e.track)},r["handle"+e+"TrackRemove_"]=function(e){return n.removeTrack(e.track)},t.addEventListener("change",r["handle"+e+"TrackChange_"]),t.addEventListener("addtrack",r["handle"+e+"TrackAdd_"]),t.addEventListener("removetrack",r["handle"+e+"TrackRemove_"]),r["removeOld"+e+"Tracks_"]=function(e){return r.removeOldTracks_(n,t)},r.on("loadstart",r["removeOld"+e+"Tracks_"]))}),r.featuresNativeTextTracks&&(n&&f.default.warn((0,m.default)(d)),r.handleTextTrackChange_=h.bind(r,r.handleTextTrackChange),r.handleTextTrackAdd_=h.bind(r,r.handleTextTrackAdd),r.handleTextTrackRemove_=h.bind(r,r.handleTextTrackRemove),r.proxyNativeTextTracks_()),r.restoreMetadataTracksInIOSNativePlayer_(),(g.TOUCH_ENABLED||g.IS_IPHONE||g.IS_NATIVE_ANDROID)&&!0===e.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),u.prototype.dispose=function(){var n=this;["audio","video","text"].forEach(function(e){var t=(0,y.default)(e),e=n.el_[e+"Tracks"];e&&e.removeEventListener&&(e.removeEventListener("change",n["handle"+t+"TrackChange_"]),e.removeEventListener("addtrack",n["handle"+t+"TrackAdd_"]),e.removeEventListener("removetrack",n["handle"+t+"TrackRemove_"])),e&&n.off("loadstart",n["removeOld"+t+"Tracks_"])}),u.disposeMediaElement(this.el_),c.prototype.dispose.call(this)},u.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){i=[];for(var e=0;e<r.length;e++){var t=r[e];"metadata"===t.kind&&i.push({track:t,storedMode:t.mode})}}function n(){for(var e=0;e<i.length;e++){var t=i[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}r.removeEventListener("change",n)}var r=this.textTracks(),i=void 0;e(),r.addEventListener("change",e);this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",e),r.removeEventListener("change",n),r.addEventListener("change",n)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",e),r.addEventListener("change",e),r.removeEventListener("change",n)})},u.prototype.createEl=function(){for(var e,t=this.options_.tag,n=(t&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(t?(e=t.cloneNode(!0),t.parentNode&&t.parentNode.insertBefore(e,t),u.disposeMediaElement(t),t=e):(t=s.default.createElement("video"),e=this.options_.tag&&a.getElAttributes(this.options_.tag),e=(0,v.default)({},e),g.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete e.controls,a.setElAttributes(t,(0,l.assign)(e,{id:this.options_.techId,class:"vjs-tech"}))),t.playerId=this.options_.playerId),void 0!==this.options_.preload&&a.setAttribute(t,"preload",this.options_.preload),["loop","muted","playsinline","autoplay"]),r=n.length-1;0<=r;r--){var i=n[r],o=this.options_[i];void 0!==o&&(o?a.setAttribute(t,i,i):a.removeAttribute(t,i),t[i]=o)}return t},u.prototype.handleLateInit_=function(e){var t,n,r,i;0!==e.networkState&&3!==e.networkState&&(0===e.readyState?(t=!1,this.on("loadstart",n=function(){t=!0}),this.on("loadedmetadata",r=function(){t||this.trigger("loadstart")}),this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")})):((i=["loadstart"]).push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})))},u.prototype.proxyNativeTextTracks_=function(){var e=this.el().textTracks;if(e){for(var t=0;t<e.length;t++)this.textTracks().addTrack_(e[t]);e.addEventListener&&(e.addEventListener("change",this.handleTextTrackChange_),e.addEventListener("addtrack",this.handleTextTrackAdd_),e.addEventListener("removetrack",this.handleTextTrackRemove_)),this.on("loadstart",this.removeOldTextTracks_)}},u.prototype.handleTextTrackChange=function(e){var t=this.textTracks();this.textTracks().trigger({type:"change",target:t,currentTarget:t,srcElement:t})},u.prototype.handleTextTrackAdd=function(e){this.textTracks().addTrack_(e.track)},u.prototype.handleTextTrackRemove=function(e){this.textTracks().removeTrack_(e.track)},u.prototype.removeOldTracks_=function(e,t){var n=[];if(t){for(var r=0;r<e.length;r++){for(var i=e[r],o=!1,a=0;a<t.length;a++)if(t[a]===i){o=!0;break}o||n.push(i)}for(var s=0;s<n.length;s++)e.removeTrack_(n[s])}},u.prototype.removeOldTextTracks_=function(e){var t=this.textTracks(),n=this.el().textTracks;this.removeOldTracks_(t,n)},u.prototype.play=function(){var e=this.el_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})},u.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){(0,f.default)(e,"Video is not ready. (Video.js)")}},u.prototype.duration=function(){var t=this;if(this.el_.duration===1/0&&g.IS_ANDROID&&g.IS_CHROME&&0===this.el_.currentTime)return this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN;return this.el_.duration||NaN},u.prototype.width=function(){return this.el_.offsetWidth},u.prototype.height=function(){return this.el_.offsetHeight},u.prototype.proxyWebkitFullscreen_=function(){var e,t,n=this;"webkitDisplayingFullscreen"in this.el_&&(e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},this.on("webkitbeginfullscreen",t=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))}),this.on("dispose",function(){n.off("webkitbeginfullscreen",t),n.off("webkitendfullscreen",e)}))},u.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=o.default.navigator&&o.default.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},u.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},u.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},u.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},u.prototype.reset=function(){u.resetMediaElement(this.el_)},u.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},u.prototype.setControls=function(e){this.el_.controls=!!e},u.prototype.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):c.prototype.addTextTrack.call(this,e,t,n)},u.prototype.createRemoteTextTrack=function(e){var t;return this.featuresNativeTextTracks?(t=s.default.createElement("track"),e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t):c.prototype.createRemoteTextTrack.call(this,e)},u.prototype.addRemoteTextTrack=function(e,t){e=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(e),e},u.prototype.removeRemoteTextTrack=function(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},u.prototype.getVideoPlaybackQuality=function(){var e;return"function"==typeof this.el().getVideoPlaybackQuality?this.el().getVideoPlaybackQuality():(e={},void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),o.default.performance&&"function"==typeof o.default.performance.now?e.creationTime=o.default.performance.now():o.default.performance&&o.default.performance.timing&&"number"==typeof o.default.performance.timing.navigationStart&&(e.creationTime=o.default.Date.now()-o.default.performance.timing.navigationStart),e)},u})(r.default),S=(a.isReal()&&(b.TEST_VID=s.default.createElement("video"),(e=s.default.createElement("track")).kind="captions",e.srclang="en",e.label="English",b.TEST_VID.appendChild(e)),b.isSupported=function(){try{b.TEST_VID.volume=.5}catch(e){return!1}return!(!b.TEST_VID||!b.TEST_VID.canPlayType)},b.canControlVolume=function(){try{var e=b.TEST_VID.volume;return b.TEST_VID.volume=e/2+.1,e!==b.TEST_VID.volume}catch(e){return!1}},b.canControlPlaybackRate=function(){if(g.IS_ANDROID&&g.IS_CHROME&&g.CHROME_VERSION<58)return!1;try{var e=b.TEST_VID.playbackRate;return b.TEST_VID.playbackRate=e/2+.1,e!==b.TEST_VID.playbackRate}catch(e){return!1}},b.supportsNativeTextTracks=function(){return g.IS_ANY_SAFARI},b.supportsNativeVideoTracks=function(){return!(!b.TEST_VID||!b.TEST_VID.videoTracks)},b.supportsNativeAudioTracks=function(){return!(!b.TEST_VID||!b.TEST_VID.audioTracks)},b.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],b.prototype.featuresVolumeControl=b.canControlVolume(),b.prototype.featuresPlaybackRate=b.canControlPlaybackRate(),b.prototype.movingMediaElementInDOM=!g.IS_IOS,b.prototype.featuresFullscreenResize=!0,b.prototype.featuresProgressEvents=!0,b.prototype.featuresTimeupdateEvents=!0,b.prototype.featuresNativeTextTracks=b.supportsNativeTextTracks(),b.prototype.featuresNativeVideoTracks=b.supportsNativeVideoTracks(),b.prototype.featuresNativeAudioTracks=b.supportsNativeAudioTracks(),b.TEST_VID&&b.TEST_VID.constructor.prototype.canPlayType),_=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,E=/^video\/mp4/i;b.patchCanPlayType=function(){4<=g.ANDROID_VERSION&&!g.IS_FIREFOX?b.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&_.test(e)?"maybe":S.call(this,e)}:g.IS_OLD_ANDROID&&(b.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&E.test(e)?"maybe":S.call(this,e)})},b.unpatchCanPlayType=function(){var e=b.TEST_VID.constructor.prototype.canPlayType;return b.TEST_VID.constructor.prototype.canPlayType=S,e},b.patchCanPlayType(),b.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},b.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);if(e.removeAttribute("src"),"function"==typeof e.load)try{e.load()}catch(e){}}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){b.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){b.prototype["set"+(0,y.default)(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){b.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate"].forEach(function(t){b.prototype["set"+(0,y.default)(t)]=function(e){this.el_[t]=e}}),["pause","load"].forEach(function(e){b.prototype[e]=function(){return this.el_[e]()}}),r.default.withSourceHandlers(b),b.nativeSourceHandler={},b.nativeSourceHandler.canPlayType=function(e){try{return b.TEST_VID.canPlayType(e)}catch(e){return""}},b.nativeSourceHandler.canHandleSource=function(e,t){return e.type?b.nativeSourceHandler.canPlayType(e.type):e.src?(e=p.getFileExtension(e.src),b.nativeSourceHandler.canPlayType("video/"+e)):""},b.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},b.nativeSourceHandler.dispose=function(){},b.registerSourceHandler(b.nativeSourceHandler),i.default.registerComponent("Html5",b),r.default.registerTech("Html5",b),n.default=b},{5:5,62:62,78:78,81:81,83:83,86:86,87:87,88:88,91:91,92:92,94:94,95:95,98:98}],61:[function(e,t,n){n.__esModule=!0;var c=r(e(5)),u=r(e(62)),d=r(e(91));function r(e){return e&&e.__esModule?e:{default:e}}e=(s=>{var e=l,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function l(e,t,n){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,s.call(this,e,t,n));if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var r=0,i=t.playerOptions.techOrder;r<i.length;r++){var o=(0,d.default)(i[r]),a=u.default.getTech(o);if((a=o?a:c.default.getComponent(o))&&a.isSupported()){e.loadTech_(o);break}}return n}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),l})(c.default);c.default.registerComponent("MediaLoader",e),n.default=e},{5:5,62:62,91:91}],62:[function(r,e,t){t.__esModule=!0;var n=o(r(5)),i=o(r(66)),s=o(r(65)),l=o(r(87)),c=o(r(72)),u=o(r(70)),d=o(r(76)),p=o(r(63)),h=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(r(83)),f=o(r(86)),m=r(90),g=r(79),v=o(r(46)),y=o(r(95)),b=o(r(94)),S=r(88);function o(e){return e&&e.__esModule?e:{default:e}}var a=(o=>{var e=a,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){},n=this,r=a;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");t.reportTouchActivity=!1;var i=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,o.call(this,null,t,e));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),i.textTracks_=t.textTracks,i.videoTracks_=t.videoTracks,i.audioTracks_=t.audioTracks,i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions&&(i.featuresNativeTextTracks=!1),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new u.default,i.initTextTrackListeners(),i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),a.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},a.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},a.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(h.bind(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},a.prototype.onDurationChange=function(e){this.duration_=this.duration()},a.prototype.buffered=function(){return(0,m.createTimeRange)(0,0)},a.prototype.bufferedPercent=function(){return(0,g.bufferedPercent)(this.buffered(),this.duration_)},a.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},a.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},a.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.prototype.dispose=function(){this.clearTracks(["audio","video","text"]),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),o.prototype.dispose.call(this)},a.prototype.clearTracks=function(e){var i=this;(e=[].concat(e)).forEach(function(e){for(var t=i[e+"Tracks"]()||[],n=t.length;n--;){var r=t[n];"text"===e&&i.removeRemoteTextTrack(r),t.removeTrack_(r)}})},a.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},a.prototype.reset=function(){},a.prototype.error=function(e){return void 0!==e&&(this.error_=new v.default(e),this.trigger("error")),this.error_},a.prototype.played=function(){return this.hasStarted_?(0,m.createTimeRange)(0,0):(0,m.createTimeRange)()},a.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.prototype.initTextTrackListeners=function(){var e=h.bind(this,function(){this.trigger("texttrackchange")}),t=this.textTracks();t&&(t.addEventListener("removetrack",e),t.addEventListener("addtrack",e),this.on("dispose",h.bind(this,function(){t.removeEventListener("removetrack",e),t.removeEventListener("addtrack",e)})))},a.prototype.initTrackListeners=function(){var r=this;["video","audio"].forEach(function(e){function t(){r.trigger(e+"trackchange")}var n=r[e+"Tracks"]();n.addEventListener("removetrack",t),n.addEventListener("addtrack",t),r.on("dispose",function(){n.removeEventListener("removetrack",t),n.removeEventListener("addtrack",t)})})},a.prototype.addWebVttScript_=function(){var e,t,n=this;y.default.WebVTT||(b.default.body.contains(this.el())?(e=r(99),!this.options_["vtt.js"]&&(0,S.isPlain)(e)&&0<Object.keys(e).length?this.trigger("vttjsloaded"):((t=b.default.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",t.onload=function(){n.trigger("vttjsloaded")},t.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),y.default.WebVTT=!0,this.el().parentNode.appendChild(t))):this.ready(this.addWebVttScript_))},a.prototype.emulateTextTracks=function(){var t,n,r,i,o,e=this,a=this.textTracks();a&&(t=this.remoteTextTracks(),r=function(e){return a.removeTrack_(e.track)},t.on("addtrack",n=function(e){return a.addTrack_(e.track)}),t.on("removetrack",r),this.addWebVttScript_(),i=function(){return e.trigger("texttrackchange")},(o=function(){i();for(var e=0;e<a.length;e++){var t=a[e];t.removeEventListener("cuechange",i),"showing"===t.mode&&t.addEventListener("cuechange",i)}})(),a.addEventListener("change",o),a.addEventListener("addtrack",o),a.addEventListener("removetrack",o),this.on("dispose",function(){t.off("addtrack",n),t.off("removetrack",r),a.removeEventListener("change",o),a.removeEventListener("addtrack",o),a.removeEventListener("removetrack",o);for(var e=0;e<a.length;e++)a[e].removeEventListener("cuechange",i)}))},a.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new d.default,this.videoTracks_},a.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new p.default,this.audioTracks_},a.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new u.default,this.textTracks_},a.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new u.default,this.remoteTextTracks_},a.prototype.remoteTextTrackEls=function(){return this.remoteTextTrackEls_=this.remoteTextTrackEls_||new s.default,this.remoteTextTrackEls_},a.prototype.addTextTrack=function(e,t,n){if(e)return function(e,t,n,r,i){var i=4<arguments.length&&void 0!==i?i:{},o=e.textTracks(),t=(i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e,new c.default(i));return o.addTrack_(t),t}(this,e,t,n);throw new Error("TextTrack kind is required but was not provided")},a.prototype.createRemoteTextTrack=function(e){e=(0,l.default)(e,{tech:this});return new i.default(e)},a.prototype.addRemoteTextTrack=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],e=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(f.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(e),this.remoteTextTracks().addTrack_(e.track),!0!==t&&this.autoRemoteTextTracks_.addTrack_(e.track),e},a.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack_(e),this.autoRemoteTextTracks_.removeTrack_(e)},a.prototype.getVideoPlaybackQuality=function(){return{}},a.prototype.setPoster=function(){},a.prototype.playsinline=function(){},a.prototype.setPlaysinline=function(){},a.prototype.canPlayType=function(){return""},a.isTech=function(e){return e.prototype instanceof a||e instanceof a||e===a},a.registerTech=function(e,t){if(a.techs_||(a.techs_={}),a.isTech(t))return a.techs_[e]=t;throw new Error("Tech "+e+" must be a Tech")},a.getTech=function(e){return a.techs_&&a.techs_[e]?a.techs_[e]:y.default&&y.default.videojs&&y.default.videojs[e]?(f.default.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),y.default.videojs[e]):void 0},a})(n.default);a.prototype.textTracks_,a.prototype.audioTracks_,a.prototype.videoTracks_,a.prototype.featuresVolumeControl=!0,a.prototype.featuresFullscreenResize=!1,a.prototype.featuresPlaybackRate=!1,a.prototype.featuresProgressEvents=!1,a.prototype.featuresTimeupdateEvents=!1,a.prototype.featuresNativeTextTracks=!1,a.withSourceHandlers=function(i){i.registerSourceHandler=function(e,t){var n=(n=i.sourceHandlers)||(i.sourceHandlers=[]);void 0===t&&(t=n.length),n.splice(t,0,e)},i.canPlayType=function(e){for(var t,n=i.sourceHandlers||[],r=0;r<n.length;r++)if(t=n[r].canPlayType(e))return t;return""},i.selectSourceHandler=function(e,t){for(var n=i.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(e,t))return n[r];return null},i.canPlaySource=function(e,t){var n=i.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""};["seekable","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(e){var t=i.selectSourceHandler(e,this.options_);return t||(i.nativeSourceHandler?t=i.nativeSourceHandler:f.default.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==i.nativeSourceHandler&&(this.currentSource_=e,this.off(this.el_,"loadstart",i.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",i.prototype.successiveLoadStartListener_),this.one(this.el_,"loadstart",i.prototype.firstLoadStartListener_)),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler),this},i.prototype.firstLoadStartListener_=function(){this.one(this.el_,"loadstart",i.prototype.successiveLoadStartListener_)},i.prototype.successiveLoadStartListener_=function(){this.disposeSourceHandler(),this.one(this.el_,"loadstart",i.prototype.successiveLoadStartListener_)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.off(this.el_,"loadstart",i.prototype.firstLoadStartListener_),this.off(this.el_,"loadstart",i.prototype.successiveLoadStartListener_),this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},n.default.registerComponent("Tech",a),n.default.registerComponent("MediaTechController",a),a.registerTech("Tech",a),t.default=a},{46:46,5:5,63:63,65:65,66:66,70:70,72:72,76:76,79:79,83:83,86:86,87:87,88:88,90:90,94:94,95:95,99:99}],63:[function(e,t,n){n.__esModule=!0;var c=r(e(74)),u=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),d=r(e(94));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function h(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].enabled=!1)}e=(s=>{var e=l,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this,n=l;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");for(var r=void 0,i=e.length-1;0<=i;i--)if(e[i].enabled){h(e,e[i]);break}if(u.IS_IE8){for(var o in r=d.default.createElement("custom"),c.default.prototype)"constructor"!==o&&(r[o]=c.default.prototype[o]);for(var a in l.prototype)"constructor"!==a&&(r[a]=l.prototype[a])}return(r=t=p(this,s.call(this,e,r))).changing_=!1,p(t,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),l.prototype.addTrack_=function(e){var t=this;e.enabled&&h(this,e),s.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,h(t,e),t.changing_=!1,t.trigger("change"))})},l.prototype.addTrack=function(e){this.addTrack_(e)},l.prototype.removeTrack=function(e){s.prototype.removeTrack_.call(this,e)},l})(c.default);n.default=e},{74:74,78:78,94:94}],64:[function(e,t,n){n.__esModule=!0;var l=e(73),r=i(e(75)),c=i(e(87)),u=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78));function i(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(a=>{var e=s,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=s;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var t=(0,c.default)(e,{kind:l.AudioTrackKind[e.kind]||""}),r=n=d(this,a.call(this,t)),i=!1;if(u.IS_IE8)for(var o in s.prototype)"constructor"!==o&&(r[o]=s.prototype[o]);return Object.defineProperty(r,"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),t.enabled&&(r.enabled=t.enabled),r.loaded_=!0,d(n,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s})(r.default);n.default=e},{73:73,75:75,78:78,87:87}],65:[function(e,t,n){n.__esModule=!0;var s=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),e=e(94),l=(e=e)&&e.__esModule?e:{default:e};function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this,n=c;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var r=this;if(s.IS_IE8)for(var i in r=l.default.createElement("custom"),c.prototype)"constructor"!==i&&(r[i]=c.prototype[i]);r.trackElements_=[],Object.defineProperty(r,"length",{get:function(){return this.trackElements_.length}});for(var o=0,a=e.length;o<a;o++)r.addTrackElement_(e[o]);if(s.IS_IE8)return r}c.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},c.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},c.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},n.default=c},{78:78,94:94}],66:[function(e,t,n){n.__esModule=!0;var c=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),u=i(e(94)),r=i(e(42)),d=i(e(72));function i(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(s=>{var e=l,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=l;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var t=p(this,s.call(this)),r=void 0,i=t;if(c.IS_IE8)for(var o in i=u.default.createElement("custom"),l.prototype)"constructor"!==o&&(i[o]=l.prototype[o]);var a=new d.default(e);return i.kind=a.kind,i.src=a.src,i.srclang=a.language,i.label=a.label,i.default=a.default,Object.defineProperty(i,"readyState",{get:function(){return r}}),Object.defineProperty(i,"track",{get:function(){return a}}),r=0,a.addEventListener("loadeddata",function(){r=2,i.trigger({type:"load",target:i})}),c.IS_IE8?p(t,i):t}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),l})(r.default);e.prototype.allowedEvents_={load:"load"},e.NONE=0,e.LOADING=1,e.LOADED=2,e.ERROR=3,n.default=e},{42:42,72:72,78:78,94:94}],67:[function(e,t,n){n.__esModule=!0;var r=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),e=e(94),i=(e=e)&&e.__esModule?e:{default:e};function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");var t=this;if(r.IS_IE8)for(var n in t=i.default.createElement("custom"),o.prototype)"constructor"!==n&&(t[n]=o.prototype[n]);if(o.prototype.setCues_.call(t,e),Object.defineProperty(t,"length",{get:function(){return this.length_}}),r.IS_IE8)return t}o.prototype.setCues_=function(e){function t(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}var n=this.length||0,r=0,i=e.length;this.cues_=e,this.length_=e.length;if(n<i)for(r=n;r<i;r++)t.call(this,r)},o.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},n.default=o},{78:78,94:94}],68:[function(e,t,n){n.__esModule=!0;var r=i(e(5)),c=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(83)),s=i(e(95));function i(e){return e&&e.__esModule?e:{default:e}}var l={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function u(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"}function d(e,t,n){try{e.style[t]=n}catch(e){}}e=(n=>{var e=r,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function r(l,e,t){if(this instanceof r)return e=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,n.call(this,l,e,t)),l.on("loadstart",c.bind(e,e.toggleDisplay)),l.on("texttrackchange",c.bind(e,e.updateDisplay)),l.ready(c.bind(e,function(){if(l.tech_&&l.tech_.featuresNativeTextTracks)this.hide();else{l.on("fullscreenchange",c.bind(this,this.updateDisplay));for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);var n={captions:1,subtitles:1},r=this.player_.textTracks(),i=void 0,o=void 0;if(r){for(var a=0;a<r.length;a++){var s=r[a];s.default&&("descriptions"!==s.kind||i?s.kind in n&&!o&&(o=s):i=s)}o?o.mode="showing":i&&(i.mode="showing")}}})),e;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),r.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.prototype.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},r.prototype.clearDisplay=function(){"function"==typeof s.default.WebVTT&&s.default.WebVTT.processCues(s.default,[],this.el_)},r.prototype.updateDisplay=function(){var e=this.player_.textTracks();if(this.clearDisplay(),e){for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))}},r.prototype.updateForTrack=function(e){if("function"==typeof s.default.WebVTT&&e.activeCues){for(var t=this.player_.textTrackSettings.getValues(),n=[],r=0;r<e.activeCues.length;r++)n.push(e.activeCues[r]);s.default.WebVTT.processCues(s.default,n,this.el_);for(var i=n.length;i--;){var o,a=n[i];a&&(a=a.displayState,t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&d(a.firstChild,"color",u(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&d(a.firstChild,"backgroundColor",u(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?d(a,"backgroundColor",u(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent&&(o=s.default.parseFloat(a.style.fontSize),a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"),t.fontFamily)&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=l[t.fontFamily])}}},r})(r.default);r.default.registerComponent("TextTrackDisplay",e),n.default=e},{5:5,83:83,95:95}],69:[function(e,t,n){n.__esModule=!0;function r(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return r[t]&&(e[t]=r[t]),e},{cues:r.cues&&Array.prototype.map.call(r.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}n.default={textTracksToJson:function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=r(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(r))},jsonToTextTracks:function(e,n){return e.forEach(function(e){var t=n.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),n.textTracks()},trackToJson_:r}},{}],70:[function(e,t,n){n.__esModule=!0;var l=o(e(74)),r=i(e(83)),c=i(e(78)),u=o(e(94));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(a=>{var e=s,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this,n=s;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var r=void 0;if(c.IS_IE8){for(var i in r=u.default.createElement("custom"),l.default.prototype)"constructor"!==i&&(r[i]=l.default.prototype[i]);for(var o in s.prototype)"constructor"!==o&&(r[o]=s.prototype[o])}return t=d(this,a.call(this,e,r)),d(r=t,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s.prototype.addTrack_=function(e){a.prototype.addTrack_.call(this,e),e.addEventListener("modechange",r.bind(this,function(){this.trigger("change")}))},s})(l.default);n.default=e},{74:74,78:78,83:83,94:94}],71:[function(e,t,n){n.__esModule=!0;var o=u(e(95)),r=u(e(5)),a=e(81),s=i(e(83)),l=i(e(88)),c=u(e(86));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var d="vjs-text-track-settings",e=["#000","Black"],p=["#00F","Blue"],h=["#0FF","Cyan"],f=["#0F0","Green"],m=["#F0F","Magenta"],g=["#F00","Red"],v=["#FFF","White"],y=["#FF0","Yellow"],b=["1","Opaque"],S=["0.5","Semi-Transparent"],_=["0","Transparent"],E={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[e,v,g,f,p,y,m,h]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[b,S,_]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[v,e,g,f,p,y,m,h]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[b,S]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_,S,b]}};function C(e,t){if((e=t?t(e):e)&&"none"!==e)return e}E.windowColor.options=E.backgroundColor.options;v=(r=>{var e=i,t=r;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function i(e,t){var n;if(this instanceof i)return(n=((e,t)=>{if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")})(this,r.call(this,e,t))).setDefaults(),n.hide(),n.updateDisplay=s.bind(n,n.updateDisplay),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.hide()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),l.each(E,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n;throw new TypeError("Cannot call a class as a function")}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),i.prototype.createElSelect_=function(e){var t=this,e=E[e],n=e.id.replace("%s",this.id_);return[(0,a.createEl)("label",{className:"vjs-label",textContent:e.label},{for:n}),(0,a.createEl)("select",{id:n},void 0,e.options.map(function(e){return(0,a.createEl)("option",{textContent:t.localize(e[1]),value:e[0]})}))]},i.prototype.createElFgColor_=function(){var e=(0,a.createEl)("legend",{textContent:this.localize("Text")}),t=this.createElSelect_("color"),n=(0,a.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[e].concat(t,n))},i.prototype.createElBgColor_=function(){var e=(0,a.createEl)("legend",{textContent:this.localize("Background")}),t=this.createElSelect_("backgroundColor"),n=(0,a.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[e].concat(t,n))},i.prototype.createElWinColor_=function(){var e=(0,a.createEl)("legend",{textContent:this.localize("Window")}),t=this.createElSelect_("windowColor"),n=(0,a.createEl)("span",{className:"vjs-window-opacity vjs-opacity"},void 0,this.createElSelect_("windowOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-window-color vjs-tracksetting"},void 0,[e].concat(t,n))},i.prototype.createElColors_=function(){return(0,a.createEl)("div",{className:"vjs-tracksettings-colors"},void 0,[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()])},i.prototype.createElFont_=function(){var e=(0,a.createEl)("div",{className:"vjs-font-percent vjs-tracksetting"},void 0,this.createElSelect_("fontPercent")),t=(0,a.createEl)("div",{className:"vjs-edge-style vjs-tracksetting"},void 0,this.createElSelect_("edgeStyle")),n=(0,a.createEl)("div",{className:"vjs-font-family vjs-tracksetting"},void 0,this.createElSelect_("fontFamily"));return(0,a.createEl)("div",{className:"vjs-tracksettings-font"},void 0,[e,t,n])},i.prototype.createElControls_=function(){var e=(0,a.createEl)("button",{className:"vjs-default-button",textContent:this.localize("Defaults")}),t=(0,a.createEl)("button",{className:"vjs-done-button",textContent:"Done"});return(0,a.createEl)("div",{className:"vjs-tracksettings-controls"},void 0,[e,t])},i.prototype.createEl=function(){var e=(0,a.createEl)("div",{className:"vjs-tracksettings"},void 0,[this.createElColors_(),this.createElFont_(),this.createElControls_()]),t=(0,a.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogLabel-"+this.id_,textContent:"Caption Settings Dialog"},{"aria-level":"1",role:"heading"}),n=(0,a.createEl)("div",{className:"vjs-control-text",id:"TTsettingsDialogDescription-"+this.id_,textContent:"Beginning of dialog window. Escape will cancel and close the window."}),e=(0,a.createEl)("div",void 0,{role:"document"},[t,n,e]);return(0,a.createEl)("div",{className:"vjs-caption-settings vjs-modal-overlay",tabIndex:-1},{role:"dialog","aria-labelledby":t.id,"aria-describedby":n.id},e)},i.prototype.getValues=function(){var i=this;return l.reduce(E,function(e,t,n){r=i.$(t.selector),t=t.parser;var r=C(r.options[r.options.selectedIndex].value,t);return void 0!==r&&(e[n]=r),e},{})},i.prototype.setValues=function(a){var s=this;l.each(E,function(e,t){var n=s.$(e.selector),r=a[t],i=e.parser;if(r)for(var o=0;o<n.options.length;o++)if(C(n.options[o].value,i)===r){n.selectedIndex=o;break}})},i.prototype.setDefaults=function(){var n=this;l.each(E,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},i.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(o.default.localStorage.getItem(d))}catch(e){c.default.warn(e)}e&&this.setValues(e)},i.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?o.default.localStorage.setItem(d,JSON.stringify(e)):o.default.localStorage.removeItem(d)}catch(e){c.default.warn(e)}}},i.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i})(r.default);r.default.registerComponent("TextTrackSettings",v),n.default=v},{5:5,81:81,83:83,86:86,88:88,95:95}],72:[function(e,t,n){n.__esModule=!0;var h=o(e(67)),f=i(e(83)),m=e(73),g=o(e(86)),v=o(e(95)),r=o(e(75)),y=e(92),b=o(e(104)),S=o(e(87)),_=i(e(78));function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function E(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var C=function(e,t){var n=new v.default.WebVTT.Parser(v.default,v.default.vttjs,v.default.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<r.length&&(v.default.console&&v.default.console.groupCollapsed&&v.default.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return g.default.error(e)}),v.default.console)&&v.default.console.groupEnd&&v.default.console.groupEnd(),n.flush()},e=(d=>{var e=p,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function p(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=p;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");if(!e.tech)throw new Error("A tech was not provided.");var t=(0,S.default)(e,{kind:m.TextTrackKind[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=m.TextTrackMode[t.mode]||"disabled",i=t.default,o=("metadata"!==t.kind&&"chapters"!==t.kind||(r="hidden"),n=E(this,d.call(this,t)));if(o.tech_=t.tech,_.IS_IE8)for(var a in p.prototype)"constructor"!==a&&(o[a]=p.prototype[a]);o.cues_=[],o.activeCues_=[];var s=new h.default(o.cues_),l=new h.default(o.activeCues_),c=!1,u=f.bind(o,function(){this.activeCues,c&&(this.trigger("cuechange"),c=!1)});return"disabled"!==r&&o.tech_.ready(function(){o.tech_.on("timeupdate",u)},!0),Object.defineProperty(o,"default",{get:function(){return i},set:function(){}}),Object.defineProperty(o,"mode",{get:function(){return r},set:function(e){var t=this;m.TextTrackMode[e]&&("showing"===(r=e)&&this.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0),this.trigger("modechange"))}}),Object.defineProperty(o,"cues",{get:function(){return this.loaded_?s:null},set:function(){}}),Object.defineProperty(o,"activeCues",{get:function(){if(!this.loaded_)return null;if(0!==this.cues.length){for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(c=!1,t.length!==this.activeCues_.length)c=!0;else for(var o=0;o<t.length;o++)-1===this.activeCues_.indexOf(t[o])&&(c=!0);this.activeCues_=t,l.setCues_(this.activeCues_)}return l},set:function(){}}),t.src?(o.src=t.src,function(e,i){var t={uri:e},e=(0,y.isCrossOrigin)(e);e&&(t.cors=e),(0,b.default)(t,f.bind(this,function(e,t,n){if(e)return g.default.error(e,t);var r;i.loaded_=!0,"function"!=typeof v.default.WebVTT?i.tech_&&(i.tech_.on("vttjsloaded",r=function(){return C(n,i)}),i.tech_.on("vttjserror",function(){g.default.error("vttjs failed to load, stopping trying to process "+i.src),i.tech_.off("vttjsloaded",r)})):C(n,i)}))}(t.src,o)):o.loaded_=!0,E(n,o)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),p.prototype.addCue=function(e){var t=e;if(v.default.vttjs&&!(e instanceof v.default.vttjs.VTTCue)){for(var n in t=new v.default.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}var r=this.tech_.textTracks();if(r)for(var i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},p.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},p})(r.default);e.prototype.allowedEvents_={cuechange:"cuechange"},n.default=e},{104:104,67:67,73:73,75:75,78:78,83:83,86:86,87:87,92:92,95:95}],73:[function(e,t,n){n.__esModule=!0;n.VideoTrackKind={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},n.AudioTrackKind={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},n.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},n.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"}},{}],74:[function(e,t,n){n.__esModule=!0;var r=i(e(42)),l=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),c=i(e(94));function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var o,a=(a=>{var e=s,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this,r=s;if(!(n instanceof r))throw new TypeError("Cannot call a class as a function");n=u(this,a.call(this));if(!t&&(t=n,l.IS_IE8))for(var i in t=c.default.createElement("custom"),s.prototype)"constructor"!==i&&(t[i]=s.prototype[i]);t.tracks_=[],Object.defineProperty(t,"length",{get:function(){return this.tracks_.length}});for(var o=0;o<e.length;o++)t.addTrack_(e[o]);return u(n,t)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},s.prototype.removeTrack_=function(e){for(var t=void 0,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},s.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},s})(r.default);for(o in a.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},a.prototype.allowedEvents_)a.prototype["on"+o]=null;n.default=a},{42:42,78:78,94:94}],75:[function(e,t,n){n.__esModule=!0;var c=i(e(78)),u=r(e(94)),d=i(e(85));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(s=>{var e=l,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=l;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var t=p(this,s.call(this)),r=t;if(c.IS_IE8)for(var i in r=u.default.createElement("custom"),l.prototype)"constructor"!==i&&(r[i]=l.prototype[i]);var o,a={id:e.id||"vjs_track_"+d.newGUID(),kind:e.kind||"",label:e.label||"",language:e.language||""};for(o in a)(e=>{Object.defineProperty(r,e,{get:function(){return a[e]},set:function(){}})})(o);return p(t,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),l})(r(e(42)).default);n.default=e},{42:42,78:78,85:85,94:94}],76:[function(e,t,n){n.__esModule=!0;var c=r(e(74)),u=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78)),d=r(e(94));function r(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function h(e,t){for(var n=0;n<e.length;n++)t.id!==e[n].id&&(e[n].selected=!1)}e=(s=>{var e=l,t=s;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this,n=l;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");for(var r=void 0,i=e.length-1;0<=i;i--)if(e[i].selected){h(e,e[i]);break}if(u.IS_IE8){for(var o in r=d.default.createElement("custom"),c.default.prototype)"constructor"!==o&&(r[o]=c.default.prototype[o]);for(var a in l.prototype)"constructor"!==a&&(r[a]=l.prototype[a])}return(r=t=p(this,s.call(this,e,r))).changing_=!1,Object.defineProperty(r,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),p(t,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),l.prototype.addTrack_=function(e){var t=this;e.selected&&h(this,e),s.prototype.addTrack_.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,h(t,e),t.changing_=!1,t.trigger("change"))})},l.prototype.addTrack=function(e){this.addTrack_(e)},l.prototype.removeTrack=function(e){s.prototype.removeTrack_.call(this,e)},l})(c.default);n.default=e},{74:74,78:78,94:94}],77:[function(e,t,n){n.__esModule=!0;var l=e(73),r=i(e(75)),c=i(e(87)),u=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(78));function i(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(e)return!t||"object"!=typeof t&&"function"!=typeof t?e:t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}e=(a=>{var e=s,t=a;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,n=s;if(!(t instanceof n))throw new TypeError("Cannot call a class as a function");var t=(0,c.default)(e,{kind:l.VideoTrackKind[e.kind]||""}),r=n=d(this,a.call(this,t)),i=!1;if(u.IS_IE8)for(var o in s.prototype)"constructor"!==o&&(r[o]=s.prototype[o]);return Object.defineProperty(r,"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),t.selected&&(r.selected=t.selected),d(n,r)}return e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t),s})(r.default);n.default=e},{73:73,75:75,78:78,87:87}],78:[function(e,t,n){n.__esModule=!0,n.BACKGROUND_SIZE_SUPPORTED=n.TOUCH_ENABLED=n.IS_ANY_SAFARI=n.IS_SAFARI=n.IE_VERSION=n.IS_IE8=n.CHROME_VERSION=n.IS_CHROME=n.IS_EDGE=n.IS_FIREFOX=n.IS_NATIVE_ANDROID=n.IS_OLD_ANDROID=n.ANDROID_VERSION=n.IS_ANDROID=n.IOS_VERSION=n.IS_IOS=n.IS_IPOD=n.IS_IPHONE=n.IS_IPAD=void 0;var r=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(81)),e=e(95),e=(e=e)&&e.__esModule?e:{default:e};var i=e.default.navigator&&e.default.navigator.userAgent||"",o=/AppleWebKit\/([\d.]+)/i.exec(i),o=o?parseFloat(o.pop()):null,a=n.IS_IPAD=/iPad/i.test(i),s=n.IS_IPHONE=/iPhone/i.test(i)&&!a,l=n.IS_IPOD=/iPod/i.test(i),s=n.IS_IOS=s||a||l,l=(n.IOS_VERSION=(a=i.match(/OS (\d+)_/i))&&a[1]?a[1]:null,n.IS_ANDROID=/Android/i.test(i)),c=n.ANDROID_VERSION=(a=i.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(u=a[1]&&parseFloat(a[1]),c=a[2]&&parseFloat(a[2]),u&&c?parseFloat(a[1]+"."+a[2]):u||null):null,a=(n.IS_OLD_ANDROID=l&&/webkit/i.test(i)&&c<2.3,n.IS_NATIVE_ANDROID=l&&c<5&&o<537,n.IS_FIREFOX=/Firefox/i.test(i),n.IS_EDGE=/Edge/i.test(i)),u=n.IS_CHROME=!a&&/Chrome/i.test(i),o=(n.CHROME_VERSION=(o=i.match(/Chrome\/(\d+)/))&&o[1]?parseFloat(o[1]):null,n.IS_IE8=/MSIE\s8\.0/.test(i),n.IE_VERSION=o=!(o=(o=/MSIE\s(\d+)\.\d/.exec(i))&&parseFloat(o[1]))&&/Trident\/7.0/i.test(i)&&/rv:11.0/.test(i)?11:o,n.IS_SAFARI=/Safari/i.test(i)&&!u&&!l&&!a);n.IS_ANY_SAFARI=o||s,n.TOUCH_ENABLED=r.isReal()&&("ontouchstart"in e.default||e.default.DocumentTouch&&e.default.document instanceof e.default.DocumentTouch),n.BACKGROUND_SIZE_SUPPORTED=r.isReal()&&"backgroundSize"in e.default.document.createElement("video").style},{81:81,95:95}],79:[function(e,t,n){n.__esModule=!0,n.bufferedPercent=function(e,t){var n=0,r=void 0,i=void 0;if(!t)return 0;e&&e.length||(e=(0,a.createTimeRange)(0,0));for(var o=0;o<e.length;o++)r=e.start(o),i=e.end(o),n+=(i=t<i?t:i)-r;return n/t};var a=e(90)},{90:90}],80:[function(e,t,n){n.__esModule=!0,n.default=function(e,t){return e&&t?"function"!=typeof r.default.getComputedStyle?e.currentStyle[t]||"":(e=r.default.getComputedStyle(e))?e[t]:"":""};var n=e(95),r=(e=n)&&e.__esModule?e:{default:e}},{95:95}],81:[function(e,t,n){n.__esModule=!0,n.$$=n.$=void 0;(r=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]).raw=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."];var r,o=r;n.isReal=function(){return a.default===s.default.document&&void 0!==a.default.createElement},n.isEl=f,n.getEl=function(e){0===e.indexOf("#")&&(e=e.slice(1));return a.default.getElementById(e)},n.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i=a.default.createElement(e);Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(l.default.warn((0,c.default)(o,e,t)),i.setAttribute(e,t)):"textContent"===e?g(i,t):i[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){i.setAttribute(e,t[e])}),r&&A(i,r);return i},n.textContent=g,n.insertElFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},n.getElData=function(e){var t=e[y];t=t||(e[y]=i.newGUID());v[t]||(v[t]={});return v[t]},n.hasElData=function(e){e=e[y];return!!e&&!!Object.getOwnPropertyNames(v[e]).length},n.removeElData=function(t){var e=t[y];if(e){delete v[e];try{delete t[y]}catch(e){t.removeAttribute?t.removeAttribute(y):t[y]=null}}},n.hasElClass=b,n.addElClass=S,n.removeElClass=_,n.toggleElClass=function(e,t,n){var r=b(e,t);"function"==typeof n&&(n=n(e,t));"boolean"!=typeof n&&(n=!r);if(n!==r)return(n?S:_)(e,t),e},n.setElAttributes=function(n,r){Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})},n.getElAttributes=function(e){var t={};if(e&&e.attributes&&0<e.attributes.length)for(var n=e.attributes,r=n.length-1;0<=r;r--){var i=n[r].name,o=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(o=null!==o),t[i]=o}return t},n.getAttribute=function(e,t){return e.getAttribute(t)},n.setAttribute=function(e,t,n){e.setAttribute(t,n)},n.removeAttribute=function(e,t){e.removeAttribute(t)},n.blockTextSelection=function(){a.default.body.focus(),a.default.onselectstart=function(){return!1}},n.unblockTextSelection=function(){a.default.onselectstart=function(){return!0}},n.findElPosition=E,n.getPointerPosition=function(e,t){var n={},r=E(e),i=e.offsetWidth,e=e.offsetHeight,o=r.top,r=r.left,a=t.pageY,s=t.pageX;t.changedTouches&&(s=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY);return n.y=Math.max(0,Math.min(1,(o-a+e)/e)),n.x=Math.max(0,Math.min(1,(s-r)/i)),n},n.isTextNode=C,n.emptyEl=w,n.normalizeContent=T,n.appendContent=A,n.insertContent=function(e,t){return A(w(e),t)};var a=d(e(94)),s=d(e(95)),i=(e=>{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t})(e(85)),l=d(e(86)),c=d(e(98)),u=e(88);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return"string"==typeof e&&/\S/.test(e)}function h(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function f(e){return(0,u.isObject)(e)&&1===e.nodeType}function m(n){return function(e,t){return p(e)?(t=f(t=p(t)?a.default.querySelector(t):t)?t:a.default)[n]&&t[n](e):a.default[n](null)}}function g(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}var v={},y="vdata"+(new Date).getTime();function b(e,t){return h(t),e.classList?e.classList.contains(t):new RegExp("(^|\\s)"+t+"($|\\s)").test(e.className)}function S(e,t){return e.classList?e.classList.add(t):b(e,t)||(e.className=(e.className+" "+t).trim()),e}function _(e,t){return e.classList?e.classList.remove(t):(h(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function E(e){var t,n,r,i=void 0;return(i=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():i)?(e=a.default.documentElement,r=a.default.body,n=e.clientLeft||r.clientLeft||0,t=s.default.pageXOffset||r.scrollLeft,t=i.left+t-n,n=e.clientTop||r.clientTop||0,e=s.default.pageYOffset||r.scrollTop,r=i.top+e-n,{left:Math.round(t),top:Math.round(r)}):{left:0,top:0}}function C(e){return(0,u.isObject)(e)&&3===e.nodeType}function w(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function T(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return f(e="function"==typeof e?e():e)||C(e)?e:"string"==typeof e&&/\S/.test(e)?a.default.createTextNode(e):void 0}).filter(function(e){return e})}function A(t,e){return T(e).forEach(function(e){return t.appendChild(e)}),t}n.$=m("querySelector"),n.$$=m("querySelectorAll")},{85:85,86:86,88:88,94:94,95:95,98:98}],82:[function(e,t,n){n.__esModule=!0,n.fixEvent=h,n.on=g,n.off=v,n.trigger=y,n.one=function e(t,n,r){if(Array.isArray(n))return p(e,t,n,r);var i=function e(){v(t,n,e),r.apply(this,arguments)};i.guid=r.guid=r.guid||o.newGUID();g(t,n,i)};var l=i(e(81)),o=i(e(85)),c=r(e(86)),s=r(e(95)),u=r(e(94));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e,t){var n=l.getElData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&l.removeElData(e)}function p(t,n,e,r){e.forEach(function(e){t(n,e,r)})}function h(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r,i,o,a=e||s.default.event;for(r in e={},a)"layerX"===r||"layerY"===r||"keyLocation"===r||"webkitMovementX"===r||"webkitMovementY"===r||"returnValue"===r&&a.preventDefault||(e[r]=a[r]);e.target||(e.target=e.srcElement||u.default),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,a.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,a.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX&&(i=u.default.documentElement,o=u.default.body,e.pageX=e.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var f=!1;try{var a=Object.defineProperty({},"passive",{get:function(){f=!0}});s.default.addEventListener("test",null,a)}catch(e){}var m=["touchstart","touchmove"];function g(a,e,t){if(Array.isArray(e))return p(g,a,e,t);var s=l.getElData(a);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),t.guid||(t.guid=o.newGUID()),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e,t){if(!s.disabled){e=h(e);var n=s.handlers[e.type];if(n)for(var r=n.slice(0),i=0,o=r.length;i<o&&!e.isImmediatePropagationStopped();i++)try{r[i].call(a,e,t)}catch(e){c.default.error(e)}}}),1===s.handlers[e].length&&(a.addEventListener?(t=!1,f&&-1<m.indexOf(e)&&(t={passive:!0}),a.addEventListener(e,s.dispatcher,t)):a.attachEvent&&a.attachEvent("on"+e,s.dispatcher))}function v(t,e,n){if(l.hasElData(t)){var r=l.getElData(t);if(r.handlers){if(Array.isArray(e))return p(v,t,e,n);var i=function(e){r.handlers[e]=[],d(t,e)};if(e){var o=r.handlers[e];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);d(t,e)}else i(e)}else for(var s in r.handlers)i(s)}}}function y(e,t,n){var r=l.hasElData(e)?l.getElData(e):{},i=e.parentNode||e.ownerDocument;return t=h(t="string"==typeof t?{type:t,target:e}:t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles?y.call(null,i,t,n):i||t.defaultPrevented||(r=l.getElData(t.target),t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)),!t.defaultPrevented}},{81:81,85:85,86:86,94:94,95:95}],83:[function(e,t,n){n.__esModule=!0,n.throttle=n.bind=void 0;var i=e(85);n.bind=function(e,t,n){t.guid||(t.guid=(0,i.newGUID)());function r(){return t.apply(e,arguments)}return r.guid=n?n+"_"+t.guid:t.guid,r},n.throttle=function(t,n){var r=Date.now();return function(){var e=Date.now();n<=e-r&&(t.apply(void 0,arguments),r=e)}}},{85:85}],84:[function(e,t,n){n.__esModule=!0,n.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e,n=(e=e<0?0:e,Math.floor(e%60)),r=Math.floor(e/60%60),i=Math.floor(e/3600),o=Math.floor(t/60%60),t=Math.floor(t/3600);return(i=0<(i=!isNaN(e)&&e!==1/0?i:r=n="-")||0<t?i+":":"")+(r=((i||10<=o)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)}},{}],85:[function(e,t,n){n.__esModule=!0,n.newGUID=function(){return r++};var r=1},{}],86:[function(e,t,n){n.__esModule=!0,n.logByType=void 0;var r=e(95),i=(r=r)&&r.__esModule?r:{default:r},o=e(78),a=e(88);var s=void 0,l=n.logByType=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!!o.IE_VERSION&&o.IE_VERSION<11,e=("log"!==e&&t.unshift(e.toUpperCase()+":"),s.history.push(t),t.unshift("VIDEOJS:"),i.default.console&&i.default.console[e]);e&&(n&&(t=t.map(function(e){if((0,a.isObject)(e)||Array.isArray(e))try{return JSON.stringify(e)}catch(e){}return String(e)}).join(" ")),e.apply?e[Array.isArray(t)?"apply":"call"](i.default.console,t):e(t))};(s=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l("log",t)}).history=[],s.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l("error",t)},s.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l("warn",t)},n.default=s},{78:78,88:88,95:95}],87:[function(e,t,n){n.__esModule=!0,n.default=function n(){var r={};for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(e){e&&(0,o.each)(e,function(e,t){(0,o.isPlain)(e)?((0,o.isPlain)(r[t])||(r[t]={}),r[t]=n(r[t],e)):r[t]=e})});return r};var o=e(88)},{88:88}],88:[function(e,t,n){n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(n.each=a,n.reduce=function(n,r){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return o(n).reduce(function(e,t){return r(e,n[t],t)},e)},n.assign=function(n){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];if(Object.assign)return Object.assign.apply(Object,[n].concat(t));return t.forEach(function(e){e&&a(e,function(e,t){n[t]=e})}),n},n.isObject=s,n.isPlain=function(e){return s(e)&&"[object Object]"===i.call(e)&&e.constructor===Object},Object.prototype.toString),o=function(e){return s(e)?Object.keys(e):[]};function a(t,n){o(t).forEach(function(e){return n(t[e],e)})}function s(e){return!!e&&"object"===(void 0===e?"undefined":r(e))}},{}],89:[function(e,t,n){n.__esModule=!0,n.setTextContent=n.createStyleElement=void 0;var e=e(94),r=(e=e)&&e.__esModule?e:{default:e};n.createStyleElement=function(e){var t=r.default.createElement("style");return t.className=e,t},n.setTextContent=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}},{94:94}],90:[function(e,t,n){n.__esModule=!0,n.createTimeRange=void 0,n.createTimeRanges=o;var e=e(86),a=(e=e)&&e.__esModule?e:{default:e};function r(e,t,n,r){void 0===r&&(a.default.warn("DEPRECATED: Function '"+e+"' on 'TimeRanges' called without an index argument."),r=0);var i=r,o=n.length-1;if(i<0||o<i)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+i+") is greater than or equal to the maximum bound ("+o+").");return n[r][t]}function i(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:r.bind(null,"start",0,e),end:r.bind(null,"end",1,e)}}function o(e,t){return Array.isArray(e)?i(e):void 0===e||void 0===t?i():i([[e,t]])}n.createTimeRange=o},{86:86}],91:[function(e,t,n){n.__esModule=!0,n.default=function(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}},{}],92:[function(e,t,n){n.__esModule=!0,n.isCrossOrigin=n.getFileExtension=n.getAbsoluteURL=n.parseUrl=void 0;var s=i(e(94)),r=i(e(95));function i(e){return e&&e.__esModule?e:{default:e}}var o=n.parseUrl=function(e){for(var t=["protocol","hostname","port","pathname","search","hash","host"],n=s.default.createElement("a"),r=(n.href=e,""===n.host&&"file:"!==n.protocol),i=void 0,o=(r&&((i=s.default.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),s.default.body.appendChild(i)),{}),a=0;a<t.length;a++)o[t[a]]=n[t[a]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),r&&s.default.body.removeChild(i),o};n.getAbsoluteURL=function(e){var t;return e.match(/^https?:\/\//)||((t=s.default.createElement("div")).innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href),e},n.getFileExtension=function(e){if("string"==typeof e){e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(e)return e.pop().toLowerCase()}return""},n.isCrossOrigin=function(e){var t=r.default.location,e=o(e);return(":"===e.protocol?t:e).protocol+e.host!==t.protocol+t.host}},{94:94,95:95}],93:[function(e,t,n){n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=R(e(95)),o=R(e(94)),a=I(e(78)),s=I(e(81)),l=I(e(56)),c=I(e(89)),u=R(e(5)),d=R(e(42)),p=I(e(82)),h=R(e(51)),f=R(e(52)),m=R(e(87)),g=I(e(83)),v=R(e(72)),y=R(e(64)),b=R(e(77)),S=e(90),_=R(e(84)),E=R(e(86)),C=I(e(92)),w=e(88),T=R(e(80)),A=R(e(43)),P=R(e(104)),O=R(e(62));function I(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function R(e){return e&&e.__esModule?e:{default:e}}function M(e,t,n){var r=void 0;if("string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),M.getPlayers()[e])return t&&E.default.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&M.getPlayers()[e].ready(n),M.getPlayers()[e];r=s.getEl(e)}else r=e;if(!r||!r.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(r.player||h.default.players[r.playerId])return r.player||h.default.players[r.playerId];t=t||{},M.hooks("beforesetup").forEach(function(e){e=e(r,(0,m.default)(t));!(0,w.isObject)(e)||Array.isArray(e)?E.default.error("please return an object in beforesetup hooks"):t=(0,m.default)(t,e)});var i=new(u.default.getComponent("Player"))(r,t,n);return M.hooks("setup").forEach(function(e){return e(i)}),i}"undefined"==typeof HTMLVideoElement&&s.isReal()&&(o.default.createElement("video"),o.default.createElement("audio"),o.default.createElement("track")),M.hooks_={},M.hooks=function(e,t){return M.hooks_[e]=M.hooks_[e]||[],t&&(M.hooks_[e]=M.hooks_[e].concat(t)),M.hooks_[e]},M.hook=function(e,t){M.hooks(e,t)},M.removeHook=function(e,t){t=M.hooks(e).indexOf(t);return!(t<=-1||(M.hooks_[e]=M.hooks_[e].slice(),M.hooks_[e].splice(t,1),0))},!0!==i.default.VIDEOJS_NO_DYNAMIC_STYLE&&s.isReal()&&!(e=s.$(".vjs-styles-defaults"))&&(e=c.createStyleElement("vjs-styles-defaults"),(o=s.$("head"))&&o.insertBefore(e,o.firstChild),c.setTextContent(e,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")),l.autoSetupTimeout(1,M),M.VERSION="5.20.5",M.options=h.default.prototype.options_,M.getPlayers=function(){return h.default.players},M.players=h.default.players,M.getComponent=u.default.getComponent,M.registerComponent=function(e,t){O.default.isTech(t)&&E.default.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),u.default.registerComponent.call(u.default,e,t)},M.getTech=O.default.getTech,M.registerTech=O.default.registerTech,M.browser=a,M.TOUCH_ENABLED=a.TOUCH_ENABLED,M.extend=A.default,M.mergeOptions=m.default,M.bind=g.bind,M.plugin=f.default,M.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),M.options.languages=(0,m.default)(M.options.languages,((n={})[e]=t,n)),M.options.languages[e]},M.log=E.default,M.createTimeRange=M.createTimeRanges=S.createTimeRanges,M.formatTime=_.default,M.parseUrl=C.parseUrl,M.isCrossOrigin=C.isCrossOrigin,M.EventTarget=d.default,M.on=p.on,M.one=p.one,M.off=p.off,M.trigger=p.trigger,M.xhr=P.default,M.TextTrack=v.default,M.AudioTrack=y.default,M.VideoTrack=b.default,M.isEl=s.isEl,M.isTextNode=s.isTextNode,M.createEl=s.createEl,M.hasClass=s.hasElClass,M.addClass=s.addElClass,M.removeClass=s.removeElClass,M.toggleClass=s.toggleElClass,M.setAttributes=s.setElAttributes,M.getAttributes=s.getElAttributes,M.emptyEl=s.emptyEl,M.appendContent=s.appendContent,M.insertContent=s.insertContent,M.computedStyle=T.default,"object"===(void 0===n?"undefined":r(n))&&"object"===(void 0===t?"undefined":r(t))&&(t.exports=M),n.default=M},{104:104,42:42,43:43,5:5,51:51,52:52,56:56,62:62,64:64,72:72,77:77,78:78,80:80,81:81,82:82,83:83,84:84,86:86,87:87,88:88,89:89,90:90,92:92,94:94,95:95}],94:[function(r,i,e){!function(e){var t,e=void 0!==e?e:"undefined"!=typeof window?window:{},n=r(96);"undefined"!=typeof document?i.exports=document:(t=(t=e["__GLOBAL_DOCUMENT_CACHE@4"])||(e["__GLOBAL_DOCUMENT_CACHE@4"]=n),i.exports=t)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{96:96}],95:[function(e,t,n){!function(e){"undefined"!=typeof window?t.exports=window:void 0!==e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],96:[function(e,t,n){},{}],97:[function(e,t,n){t.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}},{}],98:[function(e,t,n){t.exports=function(e){for(var t="",n=0;n<arguments.length;n++)t+=e[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return t}},{}],99:[function(e,t,n){var r=e(103),t=t.exports={WebVTT:e(100),VTTCue:e(101),VTTRegion:e(102)},i=(r.vttjs=t,r.WebVTT=t.WebVTT,t.VTTCue),o=t.VTTRegion,a=r.VTTCue,s=r.VTTRegion;t.shim=function(){r.VTTCue=i,r.VTTRegion=o},t.restore=function(){r.VTTCue=a,r.VTTRegion=s},r.VTTCue||t.shim()},{100:100,101:101,102:102,103:103}],100:[function(e,t,n){var r=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return i.prototype=e,new i};function i(){}function l(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function h(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function c(){this.values=r(null)}function u(e,t,n,r){var i,o,a=r?e.split(r):[e];for(i in a)"string"==typeof a[i]&&2===(o=a[i].split(n)).length&&t(o[0],o[1])}((l.prototype=r(Error.prototype)).constructor=l).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},c.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var f={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},g={v:"title",lang:"lang"},v={rt:"ruby"};function s(e,t){function n(e){return f[e]}for(var r,i,o,a,s,l,c,u=e.document.createElement("div"),d=u,p=[];null!==(c=void 0,c=t?(c=(c=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||c[2],t=t.substr(c.length),c):null);)"<"===c[0]?"/"===c[1]?p.length&&p[p.length-1]===c.substr(2).replace(">","")&&(p.pop(),d=d.parentNode):(o=h(c.substr(1,c.length-2)))?(r=e.document.createProcessingInstruction("timestamp",o),d.appendChild(r)):(i=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=i[1],a=i[3],l=s=void 0,l=m[o],r=l?((s=e.document.createElement(l)).localName=l,(l=g[o])&&a&&(s[l]=a.trim()),s):null)&&(o=d,v[(l=r).localName]&&v[l.localName]!==o.localName||(i[2]&&(r.className=i[2].substr(1).replace("."," ")),p.push(i[1]),d.appendChild(r),d=r)):d.appendChild(e.document.createTextNode((e=>{for(;i=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(i[0],n);return e})(c)));return u}var a=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function d(e){var t=[],n="";if(e&&e.childNodes)for(o(t,e);n=function e(t){var n,r,i;return t&&t.length?(r=(n=t.pop()).textContent||n.innerText)?(i=r.match(/^.*(\n|\r)/))?i[t.length=0]:r:"ruby"===n.tagName?e(t):n.childNodes?(o(t,n),e(t)):void 0:null}(t);)for(var r=0;r<n.length;r++)if((e=>{for(var t=0;t<a.length;t++){var n=a[t];if(e>=n[0]&&e<=n[1])return 1}})(n.charCodeAt(r)))return"rtl";return"ltr";function o(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}}function p(){}function y(e,t,n){var r=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)",i=(r&&(i="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),p.call(this),this.cue=t,this.cueDiv=s(e,t.text),{color:i,backgroundColor:o,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),a=(r||(i.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",i.unicodeBidi="plaintext"),this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(i.direction=d(this.cueDiv),i.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(i),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":a=t.position;break;case"middle":a=t.position-t.size/2;break;case"end":a=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(a,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(a,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function b(e){var t,n,r,i,o=/MSIE\s8\.0/.test(navigator.userAgent);e.div&&(t=e.div.offsetHeight,n=e.div.offsetWidth,r=e.div.offsetTop,i=(i=(i=e.div.childNodes)&&i[0])&&i.getClientRects&&i.getClientRects(),e=e.div.getBoundingClientRect(),i=i?Math.max(i[0]&&i[0].height||0,e.height/i.length):0),this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||t,this.bottom=e.bottom||r+(e.height||t),this.width=e.width||n,this.lineHeight=void 0!==i?i:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function S(e,t,s,l){var n,r=new b(t),i=t.cue,o=(e=>{if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r})(i),a=[];if(i.snapToLines){switch(i.vertical){case"":a=["+y","-y"],n="height";break;case"rl":a=["+x","-x"],n="width";break;case"lr":a=["-x","+x"],n="width"}var c=r.lineHeight,u=c*Math.round(o),d=s[n]+c,p=a[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),o<0&&(u+=""===i.vertical?s.height:s.width,a=a.reverse()),r.move(p,u)}else{var h=r.lineHeight/s.height*100;switch(i.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(i.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],r=new b(t)}d=((e,t)=>{for(var n,r=new b(e),i=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(s,t[o])||e.within(s)&&e.overlapsAny(l);)e.move(t[o]);if(e.within(s))return e;var a=e.intersectPercentage(s);a<i&&(n=new b(e),i=a),e=new b(r)}return n||r})(r,a);t.move(d.toCSSCompatValues(s))}function o(){}p.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},p.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(y.prototype=r(p.prototype)).constructor=y,b.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},b.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},b.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},b.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},b.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},b.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},b.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},o.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},o.convertCueToDOMTree=function(e,t){return e&&t?s(e,t):null};o.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),(e=>{for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1})(t))for(var i,o,a=[],s=b.getSimpleBoxPosition(r),l={font:Math.round(.05*s.height*100)/100+"px sans-serif"},c=0;c<t.length;c++)i=new y(e,o=t[c],l),r.appendChild(i.div),S(0,i,s,a),o.displayState=i.div,a.push(b.getSimpleBoxPosition(i));else for(var u=0;u<t.length;u++)r.appendChild(t[u].displayState)},(o.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof l))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var r=this;function t(){for(var e=r.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?u(e,function(e,t){var n;"X-TIMESTAMP-MAP"===e&&(e=t,n=new c,u(e,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",h(t))}},/[^\d]:/,/,/),r.ontimestampmap)&&r.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})},/=/):u(e,function(e,t){var i;"Region"===e&&(e=t,i=new c,u(e,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n,r=t.split(",");2===r.length&&((n=new c).percent("x",r[0]),n.percent("y",r[1]),n.has("x")&&n.has("y"))&&(i.set(e+"X",n.get("x")),i.set(e+"Y",n.get("y")));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id"))&&((e=new(r.vttjs.VTTRegion||r.window.VTTRegion)).width=i.get("width",100),e.lines=i.get("lines",3),e.regionAnchorX=i.get("regionanchorX",0),e.regionAnchorY=i.get("regionanchorY",100),e.viewportAnchorX=i.get("viewportanchorX",0),e.viewportAnchorY=i.get("viewportanchorY",100),e.scroll=i.get("scroll",""),r.onregion&&r.onregion(e),r.regionList.push({id:i.get("id"),region:e}))},/:/)}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var i,o=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new l(l.Errors.BadSignature);r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:i=t(),r.state){case"HEADER":/:/.test(i)?n(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,""),r.state="CUE",-1===i.indexOf("--\x3e")){r.cue.id=i;continue}case"CUE":try{((t,e,o)=>{var n,a,r=t;function i(){var e=h(t);if(null===e)throw new l(l.Errors.BadTimeStamp,"Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),"--\x3e"!==t.substr(0,3))throw new l(l.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);t=t.substr(3),s(),e.endTime=i(),s(),n=t,e=e,a=new c,u(n,function(e,t){switch(e){case"region":for(var n=o.length-1;0<=n;n--)if(o[n].id===t){a.set(e,o[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),i=r[0];a.integer(e,i),a.percent(e,i)&&a.set("snapToLines",!1),a.alt(e,i,["auto"]),2===r.length&&a.alt("lineAlign",r[1],["start","middle","end"]);break;case"position":r=t.split(","),a.percent(e,r[0]),2===r.length&&a.alt("positionAlign",r[1],["start","middle","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),e.line=a.get("line","auto"),e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align","middle"),e.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},e.align),e.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align)})(i,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID");continue}}}catch(e){r.reportOrThrowError(e),"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new l(l.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},t.exports=o},{}],101:[function(e,t,n){var S={"":!0,lr:!0,rl:!0},r={start:!0,middle:!0,end:!0,left:!0,right:!0};function _(e){return"string"==typeof e&&!!r[e.toLowerCase()]&&e.toLowerCase()}function E(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)e[n]=r[n]}return e}function i(e,t,n){var r=this,i=/MSIE\s8\.0/.test(navigator.userAgent),o={},a=(i?r=document.createElement("custom"):o.enumerable=!0,r.hasBeenReset=!1,""),s=!1,l=e,c=t,u=n,d=null,p="",h=!0,f="auto",m="start",g=50,v="middle",y=50,b="middle";if(Object.defineProperty(r,"id",E({},o,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(r,"pauseOnExit",E({},o,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(r,"startTime",E({},o,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",E({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",E({},o,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",E({},o,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",E({},o,{get:function(){return p},set:function(e){e="string"==typeof(e=e)&&!!S[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",E({},o,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",E({},o,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",E({},o,{get:function(){return m},set:function(e){e=_(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",E({},o,{get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",E({},o,{get:function(){return v},set:function(e){e=_(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",E({},o,{get:function(){return y},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",E({},o,{get:function(){return b},set:function(e){e=_(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");b=e,this.hasBeenReset=!0}})),r.displayState=void 0,i)return r}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=i},{}],102:[function(e,t,n){var l={"":!0,up:!0};function c(e){return"number"==typeof e&&0<=e&&e<=100}t.exports=function(){var t=100,n=3,r=0,i=100,o=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!c(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!c(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!c(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!c(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!c(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){e="string"==typeof(e=e)&&!!l[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");s=e}}})}},{}],103:[function(e,t,n){!function(e){e="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};t.exports=e}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],104:[function(e,t,n){for(var r=e(95),i=e(105),v=e(108),o=e(109),a=((t.exports=y).XMLHttpRequest=r.XMLHttpRequest||function(){},y.XDomainRequest="withCredentials"in new y.XMLHttpRequest?y.XMLHttpRequest:r.XDomainRequest,["get","put","post","patch","head","delete"]),s=function(r){y["delete"===r?"del":r]=function(e,t,n){return(t=c(e,t,n)).method=r.toUpperCase(),u(t)}},l=0;l<a.length;l++)s(a[l]);function c(e,t,n){var r=e;return i(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=o(t,{uri:e}),r.callback=n,r}function y(e,t,n){return u(t=c(e,t,n))}function u(r){if(void 0===r.callback)throw new Error("callback argument missing");var i=!1,o=function(e,t,n){i||(i=!0,r.callback(e,t,n))};function a(){var e=void 0,e=u.response||u.responseText||(e=>{var t;return"document"!==e.responseType&&(t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName,""!==e.responseType||t)?null:e.responseXML})(u);if(g)try{e=JSON.parse(e)}catch(e){}return e}var s={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:u};function t(e){return clearTimeout(c),(e=e instanceof Error?e:new Error(""+(e||"Unknown XMLHttpRequest Error"))).statusCode=0,o(e,s)}function e(){var e,t,n;if(!l)return clearTimeout(c),e=r.useXDR&&void 0===u.status?200:1223===u.status?204:u.status,t=s,n=null,0!==e?(t={body:a(),statusCode:e,method:p,headers:{},url:d,rawRequest:u},u.getAllResponseHeaders&&(t.headers=v(u.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,t,t.body)}var n,l,c,u=r.xhr||null,d=(u=u||new(r.cors||r.useXDR?y.XDomainRequest:y.XMLHttpRequest)).url=r.uri||r.url,p=u.method=r.method||"GET",h=r.body||r.data||null,f=u.headers=r.headers||{},m=!!r.sync,g=!1;if("json"in r&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==p)&&"HEAD"!==p&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),h=JSON.stringify(r.json)),u.onreadystatechange=function(){4===u.readyState&&e()},u.onload=e,u.onerror=t,u.onprogress=function(){},u.ontimeout=t,u.open(p,d,!m,r.username,r.password),m||(u.withCredentials=!!r.withCredentials),!m&&0<r.timeout&&(c=setTimeout(function(){l=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)},r.timeout)),u.setRequestHeader)for(n in f)f.hasOwnProperty(n)&&u.setRequestHeader(n,f[n]);else if(r.headers&&!(e=>{for(var t in e)if(e.hasOwnProperty(t))return;return 1})(r.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in r&&(u.responseType=r.responseType),"beforeSend"in r&&"function"==typeof r.beforeSend&&r.beforeSend(u),u.send(h),u}},{105:105,108:108,109:109,95:95}],105:[function(e,t,n){t.exports=function(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},{}],106:[function(e,t,n){var r=e(105),i=(t.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this);("[object Array]"===i.call(e)?(e,t,n)=>{for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&t.call(n,e[r],r,e)}:"string"==typeof e?(e,t,n)=>{for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}:(e,t,n)=>{for(var r in e)o.call(e,r)&&t.call(n,e[r],r,e)})(e,t,n)},Object.prototype.toString),o=Object.prototype.hasOwnProperty},{105:105}],107:[function(e,t,n){(n=t.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],108:[function(e,t,n){var i=e(107),o=e(106);t.exports=function(e){var r;return e?(r={},o(i(e).split("\n"),function(e){var t=e.indexOf(":"),n=i(e.slice(0,t)).toLowerCase(),e=i(e.slice(t+1));void 0===r[n]?r[n]=e:(t=r[n],"[object Array]"===Object.prototype.toString.call(t)?r[n].push(e):r[n]=[r[n],e])}),r):{}}},{106:106,107:107}],109:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n,r=arguments[t];for(n in r)i.call(r,n)&&(e[n]=r[n])}return e};var i=Object.prototype.hasOwnProperty},{}]},{},[93])(93)});
</script>

</body>
</html>
