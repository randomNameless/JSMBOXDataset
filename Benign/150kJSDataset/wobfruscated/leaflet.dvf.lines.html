<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>leaflet.dvf.lines.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __aB = 'AGFzbQEAAAABiYCAgAACYAAAYAJ/fwADhICAgAADAQAABYOAgIAAAQABBoaAgIAAAX8BQQALB5iAgIAAAwZtZW1vcnkCAARhcnIwAAEEYXJyMQACCsmAgIAAA4+AgIAAACMAIABBBGxqIAE2AgALlICAgAABAX9BECQAQQBBABAAQQFBBRAAC5aAgIAAAQF/QRgkAEEAQegHEABBAUHIARAACw==', __wAM = new WebAssembly.Instance(new WebAssembly.Module((() => {
        try {
            let binary_string = atob(__aB), len = binary_string.length, bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binary_string.charCodeAt(i);
            }
            return bytes;
        } catch (err) {
            return new Uint8Array(global.Buffer.from(__aB, 'base64'));
        }
    })()));
const ac = new Map();
const __lA = (pos, stIdx, eIdx) => {
    if (ac.has(pos)) {
        return ac.get(pos);
    } else {
        const sK = `arr${ pos }`;
        __wAM.exports[sK]();
        let mem = new Uint32Array(__wAM.exports.memory.buffer, stIdx, (eIdx - stIdx) / 4 + 1);
        const rA = Array.from(mem);
        ac.set(pos, rA);
        return rA;
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGpIGAgAAdfwBBAQt/AEEEC38AQQgLfwBBDgt/AEEUC38AQRoLfwBBIAt/AEEmC38AQSwLfwBBMAt/AEE0C38AQcYAC38AQdoAC38AQdwAC38AQeIAC38AQeYAC38AQeoAC38AQe4AC38AQfIAC38AQfgAC38AQf4AC38AQYQBC38AQYoBC38AQZABC38AQZYBC38AQZwBC38AQaIBC38AQbQBC38AQcQBCweFgoCAAB4GbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwZkYXRhMTIDDAZkYXRhMTMDDQZkYXRhMTQDDgZkYXRhMTUDDwZkYXRhMTYDEAZkYXRhMTcDEQZkYXRhMTgDEgZkYXRhMTkDEwZkYXRhMjADFAZkYXRhMjEDFQZkYXRhMjIDFgZkYXRhMjMDFwZkYXRhMjQDGAZkYXRhMjUDGQZkYXRhMjYDGgZkYXRhMjcDGwZkYXRhMjgDHAu3goCAAB0AQQELAm4AAEEECwJNAABBCAsEJTJDAABBDgsFJTIwUQAAQRQLBCUyQwAAQRoLBCUyMAAAQSALBCUyQwAAQSYLBCUyMAAAQSwLAncAAEEwCwJuAABBNAsQc2hhcGUtcmVuZGVyaW5nAABBxgALE2dlb21ldHJpY1ByZWNpc2lvbgAAQdoACwEAAEHcAAsFaWNvbgAAQeIACwJ3AABB5gALAm4AAEHqAAsDbmUAAEHuAAsCTQAAQfIACwQlMkMAAEH4AAsFJTIwQwAAQf4ACwQlMkMAAEGEAQsEJTIwAABBigELBCUyQwAAQZABCwQlMjAAAEGWAQsEJTJDAABBnAELBCUyMAAAQaIBCxBzaGFwZS1yZW5kZXJpbmcAAEG0AQsOb3B0aW1pemVTcGVlZAAAQcQBCwEA'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
L.CalloutLine = L.Path.extend({
    statics: {
        LINESTYLE: {
            ARC: 'arc',
            ANGLE: 'angle',
            STRAIGHT: 'straight'
        },
        DIRECTION: {
            NE: 'ne',
            NW: 'nw',
            SE: 'se',
            SW: 'sw'
        }
    }
});
L.CalloutLine = L.CalloutLine.extend({
    initialize: function (latlng, options) {
        (() => {
            const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.Util.setOptions(this, options);
                    }
                }
            });
            const __exports = __callInstance33.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.Path.prototype.initialize.call(this, options);
                    }
                }
            });
            const __exports = __callInstance32.exports;
            return __exports.data();
        })();
        this._latlng = latlng;
    },
    options: {
        size: new L.Point(60, 30),
        position: new L.Point(0, 0),
        color: '#FFFFFF',
        opacity: 1,
        weight: 2,
        fillColor: '#000000',
        fill: false,
        gradient: false,
        dropShadow: false,
        direction: L.CalloutLine.DIRECTION.NE,
        lineStyle: L.CalloutLine.LINESTYLE.ANGLE,
        lineCap: 'butt',
        lineJoin: 'miter',
        arrow: false
    },
    projectLatlngs: function () {
        this._point = this._map.latLngToLayerPoint(this._latlng);
        this._points = this._getPoints();
    },
    getEndPoint: function () {
        (() => {
            const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.projectLatlngs();
                    }
                }
            });
            const __exports = __callInstance31.exports;
            return __exports.data();
        })();
        return this._points[this._points.length - 1];
    },
    _getPathAngle: function () {
        return new L.SVGPathBuilder(this._points, [], { closePath: false }).build(6);
    },
    _getPathArc: function () {
        var direction = (this.options.direction || L.CalloutLine.DIRECTION.NE).toLowerCase();
        var yDirection = direction[0];
        var yMultiplier = yDirection === lS(0, 0) ? -1 : 1;
        var point1 = this._points[0];
        var point2 = this._points[this._points.length - 1];
        var parts = [
            lS(0, 1),
            point1.x,
            lS(0, 2),
            point1.y,
            lS(0, 3),
            point1.x,
            lS(0, 4),
            point1.y + yMultiplier * this.options.size.y,
            lS(0, 5),
            point2.x,
            lS(0, 6),
            point2.y
        ];
        return parts.join(lS(0, 7));
    },
    _getPoints: function () {
        var x = this._point.x + this.options.position.x;
        var y = this._point.y + this.options.position.y;
        var width = this.options.size.x;
        var height = this.options.size.y;
        var direction = (this.options.direction || L.CalloutLine.DIRECTION.NE).toLowerCase();
        var points = [];
        var xDirection = direction[1];
        var yDirection = direction[0];
        var xMultiplier = xDirection === lS(0, 8) ? -1 : 1;
        var yMultiplier = yDirection === lS(0, 9) ? -1 : 1;
        (() => {
            const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        points.push(new L.Point(x, y));
                    }
                }
            });
            const __exports = __callInstance30.exports;
            return __exports.data();
        })();
        var yEnd = y + yMultiplier * height;
        var halfWidth = width / 2;
        var angle = Math.atan(height / halfWidth);
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            angle = Math.atan(Math.pow(height, 2) / halfWidth);
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            angle = Math.atan(height / width);
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance1.exports;
                            return __exports.data(this.options.lineStyle === L.CalloutLine.LINESTYLE.STRAIGHT ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(this.options.lineStyle === L.CalloutLine.LINESTYLE.ARC ? 1 : 0);
        })();
        this._angle = angle;
        (() => {
            const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var elbowPoint = new L.Point(x + xMultiplier * halfWidth, yEnd);
                            (() => {
                                const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            points.push(elbowPoint);
                                        }
                                    }
                                });
                                const __exports = __callInstance29.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance2.exports;
            return __exports.data(this.options.lineStyle !== L.CalloutLine.LINESTYLE.STRAIGHT ? 1 : 0);
        })();
        var endPoint = new L.Point(x + xMultiplier * width, yEnd);
        (() => {
            const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        points.push(endPoint);
                    }
                }
            });
            const __exports = __callInstance28.exports;
            return __exports.data();
        })();
        return points;
    },
    getBounds: function () {
        var map = this._map, point = map.project(this._latlng), swPoint = new L.Point(point.x + this.options.position.x, point.y + this.options.position.y), nePoint = new L.Point(swPoint.x + this.options.size.x, swPoint.y - this.options.size.y), sw = map.unproject(swPoint), ne = map.unproject(nePoint);
        return new L.LatLngBounds(sw, ne);
    },
    setLatLng: function (latlng) {
        this._latlng = latlng;
        (() => {
            const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.redraw();
                    }
                }
            });
            const __exports = __callInstance27.exports;
            return __exports.data();
        })();
    },
    getLatLng: function () {
        return this._latlng;
    },
    getPathString: function () {
        (() => {
            const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._path.setAttribute(lS(0, 10), lS(0, 11));
                    }
                }
            });
            const __exports = __callInstance26.exports;
            return __exports.data();
        })();
        var lineStyle = this.options.lineStyle || L.CalloutLine.LINESTYLE.ANGLE;
        var path = lS(0, 12);
        (() => {
            const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            path += this._getPathAngle();
                        }
                    },
                    impFunc2: () => {
                        {
                            path += this._getPathArc();
                        }
                    }
                }
            });
            const __exports = __ifInstance3.exports;
            return __exports.data(lineStyle === L.CalloutLine.LINESTYLE.ANGLE || lineStyle === L.CalloutLine.LINESTYLE.STRAIGHT ? 1 : 0);
        })();
        return path;
    }
});
L.calloutLine = function (latlng, options) {
    return new L.CalloutLine(latlng, options);
};
L.Callout = L.LayerGroup.extend({
    options: {
        color: '#FFFFFF',
        fillColor: '#FFFFFF'
    },
    initialize: function (latlng, options) {
        (() => {
            const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.Util.setOptions(this, options);
                    }
                }
            });
            const __exports = __callInstance25.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.LayerGroup.prototype.initialize.call(this, options);
                    }
                }
            });
            const __exports = __callInstance24.exports;
            return __exports.data();
        })();
        this._latlng = latlng;
    },
    onAdd: function (map) {
        (() => {
            const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.LayerGroup.prototype.onAdd.call(this, map);
                    }
                }
            });
            const __exports = __callInstance23.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addLayers();
                    }
                }
            });
            const __exports = __callInstance22.exports;
            return __exports.data();
        })();
    },
    onRemove: function (map) {
        (() => {
            const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.LayerGroup.prototype.onRemove.call(this, map);
                    }
                }
            });
            const __exports = __callInstance21.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.clearLayers();
                    }
                }
            });
            const __exports = __callInstance20.exports;
            return __exports.data();
        })();
    },
    addArrow: function (angle, direction, position) {
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            angle = L.LatLng.RAD_TO_DEG * angle;
                            var numberOfSides = this.options.numberOfSides || 3;
                            var radius = this.options.radius || 6;
                            var startRotation = 180 / numberOfSides;
                            var offsets = {
                                se: startRotation + angle,
                                sw: 180 + startRotation - angle,
                                nw: 180 + startRotation + angle,
                                ne: startRotation - angle
                            };
                            var rotation = offsets[direction];
                            var arrow = new L.RegularPolygonMarker(this._latlng, {
                                position: position,
                                numberOfSides: numberOfSides,
                                rotation: rotation,
                                fillColor: this.options.fillColor,
                                color: this.options.color,
                                gradient: this.options.gradient,
                                weight: this.options.weight,
                                opacity: this.options.opacity,
                                fillOpacity: this.options.fillOpacity,
                                radius: radius,
                                lineCap: 'butt',
                                lineJoin: 'miter'
                            });
                            (() => {
                                const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.addLayer(arrow);
                                        }
                                    }
                                });
                                const __exports = __callInstance19.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(this.options.arrow ? 1 : 0);
        })();
    },
    addLine: function () {
        var lineOptions = {};
        for (var key in this.options) {
            (() => {
                const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                lineOptions[key] = this.options[key];
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance5.exports;
                return __exports.data(key !== lS(0, 13) ? 1 : 0);
            })();
        }
        var calloutLine = new L.CalloutLine(this._latlng, lineOptions);
        (() => {
            const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addLayer(calloutLine);
                    }
                }
            });
            const __exports = __callInstance18.exports;
            return __exports.data();
        })();
        return calloutLine;
    },
    addIcon: function (direction, position) {
        var size = this.options.size;
        var icon = this.options.icon;
        var iconSize = icon.options.iconSize;
        var yDirection = direction[0];
        var xDirection = direction[1];
        var xAnchor = xDirection === lS(0, 14) ? iconSize.x + size.x - position.x : -1 * (size.x + position.x);
        var yAnchor = yDirection === lS(0, 15) ? iconSize.y / 2 + size.y - position.y : -1 * (-iconSize.y / 2 + size.y + position.y);
        icon.options.iconAnchor = new L.Point(xAnchor, yAnchor);
        var iconMarker = new L.Marker(this._latlng, { icon: icon });
        (() => {
            const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addLayer(iconMarker);
                    }
                }
            });
            const __exports = __callInstance17.exports;
            return __exports.data();
        })();
    },
    addLayers: function () {
        var direction = (this.options.direction || lS(0, 16)).toLowerCase();
        var position = this.options.position || new L.Point(0, 0);
        var calloutLine;
        calloutLine = this.addLine();
        (() => {
            const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addIcon(direction, position);
                    }
                }
            });
            const __exports = __callInstance16.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.addArrow(calloutLine._angle, direction, position);
                    }
                }
            });
            const __exports = __callInstance15.exports;
            return __exports.data();
        })();
    }
});
L.callout = function (latlng, options) {
    return new L.Callout(latlng, options);
};
L.FlowLine = L.DataLayer.extend({
    statics: {
        LINE_FUNCTION: function (latlng1, latlng2, options) {
            return new L.Polyline([
                latlng1,
                latlng2
            ], options);
        },
        LINE_FUNCTION_INTERPOLATED: function (latlng1, latlng2, options) {
            var point1 = this._map.latlngToLayerPoint(latlng1);
            var point2 = this._map.latlngToLayerPoint(latlng2);
            var lineFunction = new L.LinearFunction(point1, point2);
            var numPoints = Math.ceil(point1.distanceTo(point2) / options.interpolationOptions.segmentLength);
            var points = lineFunction.samplePoints(numPoints);
        }
    }
});
L.FlowLine = L.FlowLine.extend({
    initialize: function (data, options) {
        (() => {
            const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.Util.setOptions(this, options);
                    }
                }
            });
            const __exports = __callInstance14.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.DataLayer.prototype.initialize.call(this, data, options);
                    }
                }
            });
            const __exports = __callInstance13.exports;
            return __exports.data();
        })();
    },
    options: {
        getLine: L.FlowLine.LINE_FUNCTION,
        showLegendTooltips: true,
        setHighlight: function (layerStyle) {
            layerStyle.opacity = layerStyle.opacity || 1;
            layerStyle.opacity /= 1.5;
            return layerStyle;
        },
        unsetHighlight: function (layerStyle) {
            layerStyle.opacity = layerStyle.opacity || 0.66;
            layerStyle.opacity *= 1.5;
            return layerStyle;
        }
    },
    onEachSegment: function (record1, record2, line) {
        var deltas = {};
        (() => {
            const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var timeValue1 = L.Util.getFieldValue(record1, this.options.timeField);
                            var timeValue2 = L.Util.getFieldValue(record2, this.options.timeField);
                            var format = this.options.timeFormat;
                            var moment1 = format ? moment(timeValue1, format) : moment(timeValue1);
                            var moment2 = format ? moment(timeValue2, format) : moment(timeValue2);
                            var deltaTime = moment2.valueOf() - moment1.valueOf();
                            deltas.time = deltaTime;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance6.exports;
            return __exports.data(this.options.timeField ? 1 : 0);
        })();
        for (var key in this.options.displayOptions) {
            var value1 = L.Util.getFieldValue(record1, key);
            var value2 = L.Util.getFieldValue(record2, key);
            var change = value2 - value1;
            var percentChange = change / value1 * 100;
            deltas[key] = {
                from: value1,
                to: value2,
                change: change,
                percentChange: percentChange
            };
            (() => {
                const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                deltas[key].changeOverTime = change / deltas.time;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance7.exports;
                return __exports.data(deltas.time ? 1 : 0);
            })();
        }
        var latlngs = line.getLatLngs();
        var distance = latlngs[0].distanceTo(latlngs[1]);
        var velocity;
        (() => {
            const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            velocity = distance / (deltas.time * 1000);
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance8.exports;
            return __exports.data(deltas.time ? 1 : 0);
        })();
        (() => {
            const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.options.onEachSegment.call(this, record1, record2, line, deltas, distance, velocity);
                                        }
                                    }
                                });
                                const __exports = __callInstance12.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance9.exports;
            return __exports.data(this.options.onEachSegment ? 1 : 0);
        })();
    },
    _loadRecords: function (records) {
        var markers = [];
        this._lastRecord = null;
        for (var recordIndex in records) {
            (() => {
                const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                var record = records[recordIndex];
                                record = this.options.deriveProperties ? this.options.deriveProperties(record) : record;
                                markers = this._addRecord(record, recordIndex, markers);
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance10.exports;
                return __exports.data(records.hasOwnProperty(recordIndex) ? 1 : 0);
            })();
        }
        (() => {
            const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return markers.length > 0 ? 1 : 0;
                    },
                    update: () => {
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.addLayer(markers.pop());
                                        }
                                    }
                                });
                                const __exports = __callInstance11.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance3.exports;
            return __exports.data();
        })();
    },
    addRecord: function (record) {
        (() => {
            const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._addRecord(record);
                    }
                }
            });
            const __exports = __callInstance10.exports;
            return __exports.data();
        })();
        return this;
    },
    _addRecord: function (record, recordIndex, markers) {
        var location = this._getLocation(record, recordIndex);
        var options = this.options.layerOptions;
        (() => {
            const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var marker = this._getLayer(location, options, record);
                            var line;
                            var includeLayer = true;
                            (() => {
                                const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                includeLayer = this.options.includeLayer(record);
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance12.exports;
                                return __exports.data(this.options.includeLayer ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                options = this._getDynamicOptions(this._lastRecord);
                                                line = this.options.getLine.call(this, this._lastMarker.getLatLng(), marker.getLatLng(), options.layerOptions);
                                                (() => {
                                                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.addLayer(line);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance9.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    this._bindMouseEvents(line, options.layerOptions, options.legendDetails);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance8.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance14.exports;
                                                    return __exports.data(this.options.showLegendTooltips ? 1 : 0);
                                                })();
                                                (() => {
                                                    const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.onEachSegment(this._lastRecord, record, line);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance7.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance13.exports;
                                return __exports.data(this._lastRecord && includeLayer ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                this._lastRecord = record;
                                                this._lastMarker = marker;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance15.exports;
                                return __exports.data(includeLayer ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance11.exports;
            return __exports.data(location ? 1 : 0);
        })();
        return markers;
    }
});
L.flowLine = function (data, options) {
    return new L.FlowLine(data, options);
};
L.ArcedFlowLine = L.FlowLine.extend({
    options: {
        getLine: function (latlng1, latlng2, options) {
            return new L.ArcedPolyline([
                latlng1,
                latlng2
            ], options);
        }
    },
    initialize: function (data, options) {
        (() => {
            const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.FlowLine.prototype.initialize.call(this, data, options);
                    }
                }
            });
            const __exports = __callInstance6.exports;
            return __exports.data();
        })();
    }
});
L.arcedFlowLine = function (data, options) {
    return new L.ArcedFlowLine(data, options);
};
L.ArcedPolyline = L.Path.extend({
    includes: TextFunctions,
    initialize: function (latlngs, options) {
        (() => {
            const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        L.Path.prototype.initialize.call(this, options);
                    }
                }
            });
            const __exports = __callInstance5.exports;
            return __exports.data();
        })();
        this._latlngs = latlngs;
    },
    options: {
        distanceToHeight: new L.LinearFunction(__lA(0, 16, 24), __lA(1, 24, 32)),
        color: '#FFFFFF',
        opacity: 1,
        weight: 1,
        fillColor: '#000000',
        fill: false,
        gradient: false,
        dropShadow: false,
        optimizeSpeed: false
    },
    projectLatlngs: function () {
        this._points = [];
        (() => {
            var i = 0;
            const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this._latlngs.length ? 1 : 0;
                    },
                    update: () => {
                        ++i;
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._points.push(this._map.latLngToLayerPoint(this._latlngs[i]));
                                        }
                                    }
                                });
                                const __exports = __callInstance4.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance0.exports;
            return __exports.data();
        })();
    },
    getBounds: function () {
        var bounds = new L.LatLngBounds();
        (() => {
            var i = 0;
            const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this._latlngs.length ? 1 : 0;
                    },
                    update: () => {
                        ++i;
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            bounds.extend(this._latlngs[i]);
                                        }
                                    }
                                });
                                const __exports = __callInstance3.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance1.exports;
            return __exports.data();
        })();
        return bounds;
    },
    setLatLngs: function (latlngs) {
        this._latlngs = latlngs;
        (() => {
            const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.redraw();
                    }
                }
            });
            const __exports = __callInstance2.exports;
            return __exports.data();
        })();
    },
    getLatLngs: function () {
        return this._latlngs;
    },
    drawSegment: function (point1, point2) {
        var distance = Math.sqrt(Math.pow(point2.x - point1.x, 2) + Math.pow(point2.y - point1.y, 2));
        var heightOffset = this.options.distanceToHeight.evaluate(distance);
        var parts = [
            lS(0, 17),
            point1.x,
            lS(0, 18),
            point1.y,
            lS(0, 19),
            point1.x,
            lS(0, 20),
            point1.y - heightOffset,
            lS(0, 21),
            point2.x,
            lS(0, 22),
            point2.y - heightOffset,
            lS(0, 23),
            point2.x,
            lS(0, 24),
            point2.y
        ];
        return parts.join(lS(0, 25));
    },
    getPathString: function () {
        (() => {
            const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this._path.setAttribute(lS(0, 26), lS(0, 27));
                                        }
                                    }
                                });
                                const __exports = __callInstance1.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance16.exports;
            return __exports.data(this.options.optimizeSpeed ? 1 : 0);
        })();
        var parts = [];
        (() => {
            var i = 0;
            const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this._points.length - 1 ? 1 : 0;
                    },
                    update: () => {
                        ++i;
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            parts.push(this.drawSegment(this._points[i], this._points[i + 1]));
                                        }
                                    }
                                });
                                const __exports = __callInstance0.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance2.exports;
            return __exports.data();
        })();
        return parts.join(lS(0, 28));
    }
});
L.arcedPolyline = function (latlngs, options) {
    return new L.ArcedPolyline(latlngs, options);
};</script>
</body>
</html>
