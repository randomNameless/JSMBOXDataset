<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>index_sp.html</title>
</head>
<body>

<script>
function isIE(){
    if(!!window.ActiveXObject || "ActiveXObject" in window){
        return true;
    }else{
        return false;
    }
}

   var banner = new Swiper('.slide-banner', {
speed:1000,
paginationClickable: true,
        autoplay: {
		delay: 5000,
		stopOnLastSlide: false,
		disableOnInteraction: false
	},
	loop: true,
	effect: "fade",
	fadeEffect: {
		crossFade: true
	},
        pagination: {el: ".banner .pgba",clickable: !0, bulletActiveClass: 'active', renderBullet: function (index, className) {
                return '<span class="' + className + '"><i></i></span>';
              }},
        navigation: {nextEl: '.banner .next',prevEl: '.banner .prev',},
         on: {
         
              slideChangeTransitionStart : function(swiper){
                var swiper = this;
                delay = this.params.autoplay.delay;
                 //}
                 anime({
                   targets: ".banner .pgba .active i",
                   delay: 0,
                   width: ["0", "100%"],
                   easing: "linear",
                   duration: delay
                 });
                
                // 判断swiper-slide-active是否有视频
                if($(".main-visual-slider .swiper-slide-active video").length>0){
                        console.log(1)
                        // 停止自动切换
                        swiper.autoplay.stop();
                        // 动态增加id
                        setTimeout(function(){
                            swiper.autoplay.stop();
                            $(".main-visual-slider .swiper-slide-active video").attr("id","video_01");
                            
                            var _video=document.getElementById("video_01");
                            
                            // 播放视频
                            _video.play();
                            // 切换后重新播放视频
                            _video.currentTime = 0;
                            // 静音
                            _video.volume = 0;
                            // 监听视频播放结束
                            _video.addEventListener('ended', function () {  
                                swiper.slideNext();
                                //重新开始轮播banner
                                swiper.autoplay.start();
                            });
                        }, 10);
                    }
              },
              slideChangeTransitionEnd: function(swiper){
                    //动态移除id
                    setTimeout(function(){
                        $(".main-visual-slider .swiper-slide-active video").attr("id","");
                    }, 10);
                },
         }
        });
        anime({
            targets: ".banner .pgba .active i",
            width: ["0", "100%"],
            easing: "linear",
            duration:7000
          });  

$(function(){

 
        


var slideNews = new Swiper('.slide-news', {
            speed:1000,
           delay: 4000,
            spaceBetween : 20,
            loop:true,
            autoplay:true,
            observer: true,
            observeParents: true, 
            slidesPerView: 1,
            watchSlidesVisibility: true,
          //   navigation: {
          //      nextEl: '.homea .next',
          //      prevEl: '.homea .prev',
          //    },
             pagination: {el: ".homea .pgba",clickable: !0, bulletActiveClass: 'active'},

      });
})
</script>

</body>
</html>
