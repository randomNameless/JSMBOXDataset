<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>ext-shapes.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['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'].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
(() => {
    const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
        env: {
            impFunc: () => {
                methodDraw.addExtension(lS(0, 0), function () {
                    var current_d, cur_shape_id;
                    var canv = methodDraw.canvas;
                    var cur_shape;
                    var start_x, start_y;
                    var svgroot = canv.getRootElem();
                    var lastBBox = {};
                    var categories = {
                        basic: 'Basic',
                        object: 'Objects',
                        symbol: 'Symbols',
                        arrow: 'Arrows',
                        flowchart: 'Flowchart',
                        nature: 'Nature',
                        game: 'Cards & Chess',
                        dialog_balloon: 'Dialog balloons',
                        music: 'Music',
                        weather: 'Weather &amp; Time',
                        ui: 'User Interface',
                        social: 'Social Web'
                    };
                    var library = {
                        'basic': {
                            data: {
                                'star_points_5': 'm1,116.58409l113.82668,0l35.17332,-108.13487l35.17334,108.13487l113.82666,0l-92.08755,66.83026l35.17514,108.13487l-92.08759,-66.83208l-92.08757,66.83208l35.17515,-108.13487l-92.08758,-66.83026z',
                                'donut': 'm1,150l0,0c0,-82.29042 66.70958,-149 149,-149l0,0c39.51724,0 77.41599,15.69816 105.35889,43.64108c27.94293,27.94293 43.64111,65.84165 43.64111,105.35892l0,0c0,82.29041 -66.70958,149 -149,149l0,0c-82.29041,0 -149,-66.70959 -149,-149zm74.5,0l0,0c0,41.1452 33.35481,74.5 74.5,74.5c41.14522,0 74.5,-33.3548 74.5,-74.5c0,-41.1452 -33.3548,-74.5 -74.5,-74.5l0,0c-41.14519,0 -74.5,33.35481 -74.5,74.5z',
                                'triangle': 'm1,280.375l149,-260.75l149,260.75z',
                                'right_triangle': 'm1,299l0,-298l298,298z',
                                'diamond': 'm1,150l149,-149l149,149l-149,149l-149,-149z',
                                'pentagon': 'm1.00035,116.97758l148.99963,-108.4053l148.99998,108.4053l-56.91267,175.4042l-184.1741,0l-56.91284,-175.4042z',
                                'hexagon': 'm1,149.99944l63.85715,-127.71428l170.28572,0l63.85713,127.71428l-63.85713,127.71428l-170.28572,0l-63.85715,-127.71428z',
                                'septagon1': 'm0.99917,191.06511l29.51249,-127.7108l119.48833,-56.83673l119.48836,56.83673l29.51303,127.7108l-82.69087,102.41679l-132.62103,0l-82.69031,-102.41679z',
                                'heptagon': 'm1,88.28171l87.28172,-87.28171l123.43653,0l87.28172,87.28171l0,123.43654l-87.28172,87.28172l-123.43653,0l-87.28172,-87.28172l0,-123.43654z',
                                'decagon': 'm1,150.00093l28.45646,-88.40318l74.49956,-54.63682l92.08794,0l74.50002,54.63682l28.45599,88.40318l-28.45599,88.40318l-74.50002,54.63681l-92.08794,0l-74.49956,-54.63681l-28.45646,-88.40318z',
                                'dodecagon': 'm1,110.07421l39.92579,-69.14842l69.14842,-39.92579l79.85159,0l69.14842,39.92579l39.92578,69.14842l0,79.85159l-39.92578,69.14842l-69.14842,39.92578l-79.85159,0l-69.14842,-39.92578l-39.92579,-69.14842l0,-79.85159z',
                                'trapezoid': 'm1,299l55.875,-298l186.25001,0l55.87498,298z',
                                'dialog_balloon_1': 'm0.99786,35.96579l0,0c0,-19.31077 15.28761,-34.96524 34.14583,-34.96524l15.52084,0l0,0l74.50001,0l139.68748,0c9.05606,0 17.74118,3.68382 24.14478,10.24108c6.40356,6.55726 10.00107,15.45081 10.00107,24.72416l0,87.41311l0,0l0,52.44785l0,0c0,19.31078 -15.2876,34.96524 -34.14584,34.96524l-139.68748,0l-97.32507,88.90848l22.82506,-88.90848l-15.52084,0c-18.85822,0 -34.14583,-15.65446 -34.14583,-34.96524l0,0l0,-52.44785l0,0z',
                                'heart': 'm150,73c61,-175 300,0 0,225c-300,-225 -61,-400 0,-225z',
                                'cylinder': 'm299.0007,83.77844c0,18.28676 -66.70958,33.11111 -149.00002,33.11111m149.00002,-33.11111l0,0c0,18.28676 -66.70958,33.11111 -149.00002,33.11111c-82.29041,0 -148.99997,-14.82432 -148.99997,-33.11111m0,0l0,0c0,-18.28674 66.70956,-33.1111 148.99997,-33.1111c82.29044,0 149.00002,14.82436 149.00002,33.1111l0,132.44449c0,18.28674 -66.70958,33.11105 -149.00002,33.11105c-82.29041,0 -148.99997,-14.82431 -148.99997,-33.11105z',
                                'arrow_up': 'm1.49805,149.64304l148.50121,-148.00241l148.50121,148.00241l-74.25061,0l0,148.71457l-148.5012,0l0,-148.71457z',
                                'arrow_u_turn': 'm1.00059,299.00055l0,-167.62497l0,0c0,-72.00411 58.37087,-130.37499 130.375,-130.37499l0,0l0,0c34.57759,0 67.73898,13.7359 92.18906,38.18595c24.45006,24.45005 38.18593,57.61144 38.18593,92.18904l0,18.625l37.24997,0l-74.49995,74.50002l-74.50002,-74.50002l37.25,0l0,-18.625c0,-30.8589 -25.0161,-55.87498 -55.87498,-55.87498l0,0l0,0c-30.85892,0 -55.875,25.01608 -55.875,55.87498l0,167.62497z',
                                'arrow_left_up': 'm0.99865,224.5l74.50004,-74.5l0,37.25l111.74991,0l0,-111.75l-37.25,0l74.5,-74.5l74.5,74.5l-37.25,0l0,186.25l-186.24989,0l0,37.25l-74.50005,-74.5z',
                                'plaque': 'm-0.00197,49.94376l0,0c27.5829,0 49.94327,-22.36036 49.94327,-49.94327l199.76709,0l0,0c0,27.5829 22.36037,49.94327 49.94325,49.94327l0,199.7671l0,0c-27.58289,0 -49.94325,22.36034 -49.94325,49.94325l-199.76709,0c0,-27.58292 -22.36037,-49.94325 -49.94327,-49.94325z',
                                'page': 'm249.3298,298.99744l9.9335,-39.73413l39.73413,-9.93355l-49.66763,49.66768l-248.33237,0l0,-298.00001l298.00001,0l0,248.33234',
                                'cross': 'm0.99844,99.71339l98.71494,0l0,-98.71495l101.26279,0l0,98.71495l98.71495,0l0,101.2628l-98.71495,0l0,98.71494l-101.26279,0l0,-98.71494l-98.71494,0z',
                                'divide': 'm150,0.99785l0,0c25.17819,0 45.58916,20.41097 45.58916,45.58916c0,25.17821 -20.41096,45.58916 -45.58916,45.58916c-25.17822,0 -45.58916,-20.41093 -45.58916,-45.58916c0,-25.1782 20.41093,-45.58916 45.58916,-45.58916zm0,296.25203c-25.17822,0 -45.58916,-20.41095 -45.58916,-45.58917c0,-25.17819 20.41093,-45.58916 45.58916,-45.58916c25.17819,0 45.58916,20.41096 45.58916,45.58916c0,25.17822 -20.41096,45.58917 -45.58916,45.58917zm-134.06754,-193.71518l268.13507,0l0,91.17833l-268.13507,0z',
                                'minus': 'm0.99887,102.39503l297.49445,0l0,95.2112l-297.49445,0z',
                                'times': 'm1.00089,73.36786l72.36697,-72.36697l76.87431,76.87368l76.87431,-76.87368l72.36765,72.36697l-76.87433,76.87431l76.87433,76.87431l-72.36765,72.36765l-76.87431,-76.87433l-76.87431,76.87433l-72.36697,-72.36765l76.87368,-76.87431l-76.87368,-76.87431z'
                            },
                            buttons: []
                        }
                    };
                    var cur_lib = library.basic;
                    var mode_id = lS(0, 1);
                    function loadIcons() {
                        (() => {
                            const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        $(lS(0, 2)).empty();
                                    }
                                }
                            });
                            const __exports = __callInstance43.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        $(lS(0, 3)).append(cur_lib.buttons);
                                    }
                                }
                            });
                            const __exports = __callInstance42.exports;
                            return __exports.data();
                        })();
                    }
                    function loadLibrary(cat_id) {
                        var lib = library[cat_id];
                        if (!lib) {
                            (() => {
                                const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 4)).html(lS(0, 5));
                                        }
                                    }
                                });
                                const __exports = __callInstance41.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $.getJSON(lS(0, 6) + cat_id + lS(0, 7), function (result, textStatus) {
                                                cur_lib = library[cat_id] = {
                                                    data: result.data,
                                                    size: result.size,
                                                    fill: result.fill
                                                };
                                                (() => {
                                                    const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                makeButtons(cat_id, result);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance39.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                loadIcons();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance38.exports;
                                                    return __exports.data();
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance40.exports;
                                return __exports.data();
                            })();
                            return;
                        }
                        cur_lib = lib;
                        (() => {
                            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        makeButtons(cat_id, lib);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance37.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance0.exports;
                            return __exports.data(!lib.buttons.length ? 1 : 0);
                        })();
                        (() => {
                            const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        loadIcons();
                                    }
                                }
                            });
                            const __exports = __callInstance36.exports;
                            return __exports.data();
                        })();
                    }
                    function makeButtons(cat, shapes) {
                        var size = cur_lib.size || 300;
                        var fill = cur_lib.fill || false;
                        var off = size * 0.05;
                        var vb = [
                            -off,
                            -off,
                            size + off * 2,
                            size + off * 2
                        ].join(lS(0, 8));
                        var stroke = fill ? 0 : size / 30;
                        var shape_icon = new DOMParser().parseFromString(lS(0, 9) + vb + lS(0, 10) + stroke + lS(0, 11), lS(0, 12));
                        var width = 40;
                        var height = 40;
                        (() => {
                            const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        shape_icon.documentElement.setAttribute(lS(0, 13), width);
                                    }
                                }
                            });
                            const __exports = __callInstance35.exports;
                            return __exports.data();
                        })();
                        (() => {
                            const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        shape_icon.documentElement.setAttribute(lS(0, 14), height);
                                    }
                                }
                            });
                            const __exports = __callInstance34.exports;
                            return __exports.data();
                        })();
                        var svg_elem = $(document.importNode(shape_icon.documentElement, true));
                        var data = shapes.data;
                        cur_lib.buttons = [];
                        for (var id in data) {
                            var path_d = data[id];
                            var icon = svg_elem.clone();
                            (() => {
                                const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            icon.find(lS(0, 15)).attr(lS(0, 16), path_d);
                                        }
                                    }
                                });
                                const __exports = __callInstance33.exports;
                                return __exports.data();
                            })();
                            var icon_btn = icon.wrap(lS(0, 17)).parent().attr({
                                id: mode_id + lS(0, 18) + id,
                                title: id
                            });
                            (() => {
                                const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            cur_lib.buttons.push(icon_btn[0]);
                                        }
                                    }
                                });
                                const __exports = __callInstance32.exports;
                                return __exports.data();
                            })();
                        }
                    }
                    return {
                        svgicons: 'extensions/ext-shapes.xml',
                        buttons: [{
                                id: 'tool_shapelib',
                                type: 'mode_flyout',
                                position: 6,
                                title: 'Shape library',
                                icon: 'extensions/ext-shapes.png',
                                events: {
                                    'click': function () {
                                        (() => {
                                            const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        canv.setMode(mode_id);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance31.exports;
                                            return __exports.data();
                                        })();
                                    }
                                }
                            }],
                        callback: function () {
                            var btn_div = $(lS(0, 19));
                            (() => {
                                const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 20)).wrapAll(btn_div);
                                        }
                                    }
                                });
                                const __exports = __callInstance30.exports;
                                return __exports.data();
                            })();
                            var shower = $(lS(0, 21));
                            (() => {
                                const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            loadLibrary(lS(0, 22));
                                        }
                                    }
                                });
                                const __exports = __callInstance29.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 23)).mouseup(function (evt) {
                                                var btn = $(evt.target).closest(lS(0, 24));
                                                if (!btn.length)
                                                    return;
                                                var copy = btn.children().clone().attr({
                                                    width: 24,
                                                    height: 24
                                                });
                                                (() => {
                                                    const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                shower.children(lS(0, 25)).remove();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance27.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                shower.append(copy).attr(lS(0, 26), lS(0, 27) + btn[0].id).mouseup();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance26.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                canv.setMode(mode_id);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance25.exports;
                                                    return __exports.data();
                                                })();
                                                cur_shape_id = btn[0].id.substr((mode_id + lS(0, 28)).length);
                                                current_d = cur_lib.data[cur_shape_id];
                                                (() => {
                                                    const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                $(lS(0, 29)).fadeOut();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance24.exports;
                                                    return __exports.data();
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance28.exports;
                                return __exports.data();
                            })();
                            var shape_cats = $(lS(0, 30));
                            var cat_str = lS(0, 31);
                            (() => {
                                const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $.each(categories, function (id, label) {
                                                cat_str += lS(0, 32) + id + lS(0, 33) + label + lS(0, 34);
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance23.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            shape_cats.html(cat_str).children().bind(lS(0, 35), function () {
                                                var catlink = $(this);
                                                (() => {
                                                    const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                catlink.siblings().removeClass(lS(0, 36));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance21.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                catlink.addClass(lS(0, 37));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance20.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                loadLibrary(catlink.attr(lS(0, 38)));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance19.exports;
                                                    return __exports.data();
                                                })();
                                                return false;
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance22.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            shape_cats.children().eq(0).addClass(lS(0, 39));
                                        }
                                    }
                                });
                                const __exports = __callInstance18.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 40)).prepend(shape_cats);
                                        }
                                    }
                                });
                                const __exports = __callInstance17.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            shower.mouseup(function () {
                                                (() => {
                                                    const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                canv.setMode(current_d ? mode_id : lS(0, 41));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance15.exports;
                                                    return __exports.data();
                                                })();
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance16.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 42)).remove();
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                            var h = $(lS(0, 43)).height();
                            (() => {
                                const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            $(lS(0, 44)).css({
                                                'margin-top': -(h / 2),
                                                'margin-left': 3
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance13.exports;
                                return __exports.data();
                            })();
                        },
                        mouseDown: function (opts) {
                            var mode = canv.getMode();
                            if (mode !== mode_id)
                                return;
                            var e = opts.event;
                            var x = start_x = opts.start_x;
                            var y = start_y = opts.start_y;
                            var cur_style = canv.getStyle();
                            cur_shape = canv.addSvgElementFromJson({
                                'element': 'path',
                                'curStyles': true,
                                'attr': {
                                    'd': current_d,
                                    'id': canv.getNextId(),
                                    'opacity': cur_style.opacity / 2,
                                    'style': 'pointer-events:none'
                                }
                            });
                            (() => {
                                const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            cur_shape.setAttribute(lS(0, 45), current_d);
                                        }
                                    }
                                });
                                const __exports = __callInstance12.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                current_d = cur_lib.data[cur_shape_id] = canv.pathActions.convertPath(cur_shape);
                                                (() => {
                                                    const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                cur_shape.setAttribute(lS(0, 46), current_d);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance11.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                canv.pathActions.fixEnd(cur_shape);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance10.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance1.exports;
                                return __exports.data(/[a-z]/.test(current_d) ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            cur_shape.setAttribute(lS(0, 47), lS(0, 48) + x + lS(0, 49) + y + lS(0, 50) + -x + lS(0, 51) + -y + lS(0, 52));
                                        }
                                    }
                                });
                                const __exports = __callInstance9.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            canv.recalculateDimensions(cur_shape);
                                        }
                                    }
                                });
                                const __exports = __callInstance8.exports;
                                return __exports.data();
                            })();
                            var tlist = canv.getTransformList(cur_shape);
                            lastBBox = cur_shape.getBBox();
                            totalScale = {
                                sx: 1,
                                sy: 1
                            };
                            return { started: true };
                        },
                        mouseMove: function (opts) {
                            var mode = canv.getMode();
                            if (mode !== mode_id)
                                return;
                            var zoom = canv.getZoom();
                            var evt = opts.event;
                            var x = opts.mouse_x / zoom;
                            var y = opts.mouse_y / zoom;
                            var tlist = canv.getTransformList(cur_shape), box = cur_shape.getBBox(), left = box.x, top = box.y, width = box.width, height = box.height;
                            var dx = x - start_x, dy = y - start_y;
                            var newbox = {
                                'x': Math.min(start_x, x),
                                'y': Math.min(start_y, y),
                                'width': Math.abs(x - start_x),
                                'height': Math.abs(y - start_y)
                            };
                            var ts = null, tx = 0, ty = 0, sy = height ? (height + dy) / height : 1, sx = width ? (width + dx) / width : 1;
                            var sx = newbox.width / lastBBox.width;
                            var sy = newbox.height / lastBBox.height;
                            sx = sx || 1;
                            sy = sy || 1;
                            (() => {
                                const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                tx = lastBBox.width;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance2.exports;
                                return __exports.data(x < start_x ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            ty = lastBBox.height;
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance3.exports;
                                return __exports.data(y < start_y ? 1 : 0);
                            })();
                            var translateOrigin = svgroot.createSVGTransform(), scale = svgroot.createSVGTransform(), translateBack = svgroot.createSVGTransform();
                            (() => {
                                const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            translateOrigin.setTranslate(-(left + tx), -(top + ty));
                                        }
                                    }
                                });
                                const __exports = __callInstance7.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                replaced = true;
                                                var max = Math.min(Math.abs(sx), Math.abs(sy));
                                                sx = max * (sx < 0 ? -1 : 1);
                                                sy = max * (sy < 0 ? -1 : 1);
                                                (() => {
                                                    const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    var multiplierX = totalScale.sx > totalScale.sy ? 1 : totalScale.sx / totalScale.sy;
                                                                    var multiplierY = totalScale.sy > totalScale.sx ? 1 : totalScale.sy / totalScale.sx;
                                                                    sx *= multiplierY;
                                                                    sy *= multiplierX;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance5.exports;
                                                    return __exports.data(totalScale.sx != totalScale.sy ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance4.exports;
                                return __exports.data(evt.shiftKey ? 1 : 0);
                            })();
                            totalScale.sx *= sx;
                            totalScale.sy *= sy;
                            (() => {
                                const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            scale.setScale(sx, sy);
                                        }
                                    }
                                });
                                const __exports = __callInstance6.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            translateBack.setTranslate(left + tx, top + ty);
                                        }
                                    }
                                });
                                const __exports = __callInstance5.exports;
                                return __exports.data();
                            })();
                            var N = tlist.numberOfItems;
                            (() => {
                                const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            tlist.appendItem(translateBack);
                                        }
                                    }
                                });
                                const __exports = __callInstance4.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            tlist.appendItem(scale);
                                        }
                                    }
                                });
                                const __exports = __callInstance3.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            tlist.appendItem(translateOrigin);
                                        }
                                    }
                                });
                                const __exports = __callInstance2.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            canv.recalculateDimensions(cur_shape);
                                        }
                                    }
                                });
                                const __exports = __callInstance1.exports;
                                return __exports.data();
                            })();
                            lastBBox = cur_shape.getBBox();
                        },
                        mouseUp: function (opts) {
                            var mode = canv.getMode();
                            if (mode !== mode_id)
                                return;
                            if (opts.mouse_x == start_x && opts.mouse_y == start_y) {
                                return {
                                    keep: false,
                                    element: cur_shape,
                                    started: false
                                };
                            }
                            (() => {
                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            canv.setMode(lS(0, 53));
                                        }
                                    }
                                });
                                const __exports = __callInstance0.exports;
                                return __exports.data();
                            })();
                            return {
                                keep: true,
                                element: cur_shape,
                                started: false
                            };
                        }
                    };
                });
            }
        }
    });
    const __exports = __callInstance44.exports;
    return __exports.data();
})();</script>
</body>
</html>
