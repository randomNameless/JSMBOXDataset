<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>connectionManagers.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEG5YKAgAA8fwBBAQt/AEEQC38AQTQLfwBBNgt/AEHGAAt/AEHMAAt/AEHkAAt/AEHqAAt/AEH0AAt/AEH6AAt/AEH8AAt/AEGCAQt/AEGgAQt/AEGsAQt/AEHkAQt/AEGOAgt/AEG8Agt/AEHEAgt/AEHMAgt/AEHUAgt/AEHcAgt/AEHgAgt/AEHqAgt/AEH0Agt/AEH+Agt/AEGIAwt/AEGMAwt/AEGQAwt/AEGUAwt/AEGaAwt/AEGeAwt/AEGkAwt/AEGoAwt/AEGuAwt/AEGyAwt/AEG4Awt/AEG8Awt/AEHCAwt/AEHGAwt/AEHMAwt/AEHQAwt/AEHWAwt/AEHaAwt/AEHgAwt/AEGwBAt/AEHUBAt/AEHQBQt/AEGeBgt/AEGgBgt/AEGoBgt/AEHMBgt/AEHqBgt/AEHCBwt/AEHuBwt/AEG2CAt/AEHSCAt/AEGmCQt/AEGqCQt/AEGuCQt/AEGyCQsHnISAgAA9Bm1lbW9yeQIABWRhdGEwAwAFZGF0YTEDAQVkYXRhMgMCBWRhdGEzAwMFZGF0YTQDBAVkYXRhNQMFBWRhdGE2AwYFZGF0YTcDBwVkYXRhOAMIBWRhdGE5AwkGZGF0YTEwAwoGZGF0YTExAwsGZGF0YTEyAwwGZGF0YTEzAw0GZGF0YTE0Aw4GZGF0YTE1Aw8GZGF0YTE2AxAGZGF0YTE3AxEGZGF0YTE4AxIGZGF0YTE5AxMGZGF0YTIwAxQGZGF0YTIxAxUGZGF0YTIyAxYGZGF0YTIzAxcGZGF0YTI0AxgGZGF0YTI1AxkGZGF0YTI2AxoGZGF0YTI3AxsGZGF0YTI4AxwGZGF0YTI5Ax0GZGF0YTMwAx4GZGF0YTMxAx8GZGF0YTMyAyAGZGF0YTMzAyEGZGF0YTM0AyIGZGF0YTM1AyMGZGF0YTM2AyQGZGF0YTM3AyUGZGF0YTM4AyYGZGF0YTM5AycGZGF0YTQwAygGZGF0YTQxAykGZGF0YTQyAyoGZGF0YTQzAysGZGF0YTQ0AywGZGF0YTQ1Ay0GZGF0YTQ2Ay4GZGF0YTQ3Ay8GZGF0YTQ4AzAGZGF0YTQ5AzEGZGF0YTUwAzIGZGF0YTUxAzMGZGF0YTUyAzQGZGF0YTUzAzUGZGF0YTU0AzYGZGF0YTU1AzcGZGF0YTU2AzgGZGF0YTU3AzkGZGF0YTU4AzoGZGF0YTU5AzsL04uAgAA8AEEBCw11c2UlMjBzdHJpY3QAAEEQCyNyZ2JhKDI1NSUyQyUyMDE1MyUyQyUyMDAlMkMlMjAwLjgpAABBNAsBAABBNgsOJTBBQ09OTkVDVE9SUwAAQcYACwQlMEEAAEHMAAsXJTBBQ09OTkVDVElPTiUyMFBPSU5UUwAAQeQACwQlMEEAAEHqAAsJJTBBR0xVRVMAAEH0AAsEJTBBAABB+gALAQAAQfwACwVsaW1lAABBggELHVByb2JsZW0lMjBjb25uZWN0b3IlMjBoYXMlMjAAAEGgAQsKJTIwcG9pbnRzAABBrAELN2Nvbm5lY3RvckFkanVzdEJ5Q29ubmVjdGlvblBvaW50KCklMjAtJTIwQ3AlMjBpcyUyMCUzQQAAQeQBCyhjb25uZWN0aW9uTWFuYWdlciUzQSUyMGNvbm5lY3RvcjJQb2ludHMAAEGOAgssQ29ubmVjdGlvbk1hbmFnZXIlM0ElMjBjb25uZWN0b3IyUG9pbnRzJTIwKAAAQbwCCwclMkMlMjAAAEHEAgsHJTJDJTIwAABBzAILByUyQyUyMAAAQdQCCwclMkMlMjAAAEHcAgsCKQAAQeACCwlzdHJhaWdodAAAQeoCCwlzdHJhaWdodAAAQfQCCwlObyUyMHdheQAAQf4CCwlObyUyMHdheQAAQYgDCwNzMAAAQYwDCwNzMAAAQZADCwNzMQAAQZQDCwVzMV8xAABBmgMLA3MxAABBngMLBXMxXzIAAEGkAwsDczIAAEGoAwsFczJfMQAAQa4DCwNzMgAAQbIDCwVzMl8yAABBuAMLA3MyAABBvAMLBXMyXzMAAEHCAwsDczIAAEHGAwsFczJfNAAAQcwDCwNzMgAAQdADCwVzMl81AABB1gMLA3MyAABB2gMLBXMyXzYAAEHgAwtORmlsdGVyJTIwb3J0aG9nb25hbCUyMHNvbHV0aW9ucy4lMjBJbml0aWFsJTIwbnVtYmVyJTIwb2YlMjBzb2x1dGlvbnMlMjAlM0QlMjAAAEGwBAsjJTBBJTA5T3J0aG9nb25hbFNvbHV0aW9ucyUyMCUzRCUyMAAAQdQEC3pTdGFydCUyMGFuZCUyMGVuZCUyMHBvaW50JTIwY29pbmNpZGUuLi5za2lwJTIwYmFja3dhcmQlMjBzb2x1dGlvbi4lMjBJJTIwdGhpbmslMjB3ZSUyMHdpbGwlMjBqdXN0JTIwZmFsbCUyMG9uJTIwczAlMjAlM0EpAABB0AULTEZpbHRlciUyMGJhY2t3YXJkJTIwc29sdXRpb25zLiUyMEluaXRpYWwlMjBudW1iZXIlMjBvZiUyMHNvbHV0aW9ucyUyMCUzRCUyMAAAQZ4GCwEAAEGgBgsHJTBBJTA5AABBqAYLIyUwQSUwOSUyMEZvcndhcmRTb2x1dGlvbnMlMjAlM0QlMjAAAEHMBgscRGlzY2FyZGVkJTIwc29sdXRpb25zJTNBJTIwAABB6gYLVkZpbHRlciUyMG5vbiUyMGludGVyc2VjdGluZyUyMHNvbHV0aW9ucy4lMjBJbml0aWFsJTIwbnVtYmVyJTIwb2YlMjBzb2x1dGlvbnMlMjAlM0QlMjAAAEHCBwsrJTBBJTA5JTIwbm9uSW50ZXJzZWN0aW9uU29sdXRpb25zJTIwJTNEJTIwAABB7gcLRkdldCUyMGZpcnN0JTIwY2xhc3MlMjBvZiUyMHNvbHV0aW9ucyUyMHdpdGglMjBzYW1lJTIwbnIlMjBvZiUyMHBvaW50cwAAQbYICxtUaGlzJTIwaXMlMjBub3QlMjBwb3NzaWJsZQAAQdIIC1NwaWNrJTIwdGhlJTIwZmlyc3QlMjBzb2x1dGlvbiUyMHdpdGglMjA5MCUyMGRlZ3JlZSUyMGFuZ2xlcyUyMChsZXNzJTIwdHVybmFyb3VuZHMpAABBpgkLA3MxAABBqgkLA3MyAABBrgkLA3MxAABBsgkLB251bWJlcgA='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
lS(0, 0);
function ConnectorManager() {
    this.connectors = [];
    this.connectionPoints = [];
    this.connectionPointCurrentId = 0;
    this.glues = [];
    this.connectionMode = ConnectorManager.MODE_DISABLED;
}
ConnectorManager.CLOUD_RADIUS = 12;
ConnectorManager.CLOUD_LINEWIDTH = 3;
ConnectorManager.CLOUD_STROKE_STYLE = lS(0, 1);
ConnectorManager.load = function (o) {
    var newConnectionManager = new ConnectorManager();
    var localLog = lS(0, 2);
    localLog += lS(0, 3);
    newConnectionManager.connectors = Connector.loadArray(o.connectors);
    (() => {
        var i = 0;
        const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < newConnectionManager.connectors.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        localLog += lS(0, 4) + newConnectionManager.connectors[i].toString();
                    }
                }
            }
        });
        const __exports = __forInstance0.exports;
        return __exports.data();
    })();
    localLog += lS(0, 5);
    newConnectionManager.connectionPoints = ConnectionPoint.loadArray(o.connectionPoints);
    (() => {
        var i = 0;
        const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < newConnectionManager.connectionPoints.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        localLog += lS(0, 6) + newConnectionManager.connectionPoints[i].toString();
                    }
                }
            }
        });
        const __exports = __forInstance1.exports;
        return __exports.data();
    })();
    newConnectionManager.connectionPointCurrentId = o.connectionPointCurrentId;
    localLog += lS(0, 7);
    newConnectionManager.glues = Glue.loadArray(o.glues);
    (() => {
        var i = 0;
        const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < newConnectionManager.glues.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        localLog += lS(0, 8) + newConnectionManager.glues[i].toString();
                    }
                }
            }
        });
        const __exports = __forInstance2.exports;
        return __exports.data();
    })();
    newConnectionManager.connectionMode = o.connectionMode;
    return newConnectionManager;
};
ConnectorManager.prototype = {
    constructor: ConnectorManager,
    equals: function (anotherConnectionManager) {
        if (!anotherConnectionManager instanceof ConnectorManager) {
            return false;
        }
        for (var i = 0; i < this.connectors.length; i++) {
            if (!this.connectors[i].equals(anotherConnectionManager.connectors[i])) {
                return false;
            }
        }
        for (var i = 0; i < this.connectionPoints.length; i++) {
            if (!this.connectionPoints[i].equals(anotherConnectionManager.connectionPoints[i])) {
                return false;
            }
        }
        for (var i = 0; i < this.glues.length; i++) {
            if (!this.glues[i].equals(anotherConnectionManager.glues[i])) {
                return false;
            }
        }
        return this.connectionPointCurrentId == anotherConnectionManager.connectionPointCurrentId && this.connectionMode == anotherConnectionManager.connectionMode;
    },
    toSVG: function () {
        var r = lS(0, 9);
        (() => {
            var i = 0;
            const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.connectors.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            r += this.connectors[i].toSVG();
                        }
                    }
                }
            });
            const __exports = __forInstance3.exports;
            return __exports.data();
        })();
        return r;
    },
    connectorCreate: function (startPoint, endPoint, type) {
        var id = STACK.generateId();
        (() => {
            const __callInstance107 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectors.push(new Connector(startPoint, endPoint, type, id));
                    }
                }
            });
            const __exports = __callInstance107.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance106 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectionPointCreate(id, startPoint, ConnectionPoint.TYPE_CONNECTOR);
                    }
                }
            });
            const __exports = __callInstance106.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance105 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectionPointCreate(id, endPoint, ConnectionPoint.TYPE_CONNECTOR);
                    }
                }
            });
            const __exports = __callInstance105.exports;
            return __exports.data();
        })();
        var c = this.connectorGetById(id);
        return id;
    },
    connectorRemove: function (connector) {
        (() => {
            const __callInstance104 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectorRemoveById(connector.id, true);
                    }
                }
            });
            const __exports = __callInstance104.exports;
            return __exports.data();
        })();
    },
    connectorRemoveById: function (connectorId, cascade) {
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var cCPs = this.connectionPointGetAllByParent(connectorId);
                            (() => {
                                var k = 0;
                                const __forInstance4 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return k < cCPs.length ? 1 : 0;
                                        },
                                        update: () => {
                                            k++;
                                        },
                                        body: () => {
                                            {
                                                (() => {
                                                    const __callInstance103 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.glueRemoveAllBySecondId(cCPs[k].id);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance103.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance4.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __callInstance102 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.connectionPointRemoveAllByParent(connectorId);
                                        }
                                    }
                                });
                                const __exports = __callInstance102.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(cascade ? 1 : 0);
        })();
        for (var i = 0; i < this.connectors.length; i++) {
            if (this.connectors[i].id == connectorId) {
                (() => {
                    const __callInstance101 = new WebAssembly.Instance(__callWasmModule, {
                        env: {
                            impFunc: () => {
                                this.connectors.splice(i, 1);
                            }
                        }
                    });
                    const __exports = __callInstance101.exports;
                    return __exports.data();
                })();
                break;
            }
        }
    },
    connectorPaint: function (context, highlightedConnectorId) {
        (() => {
            var i = 0;
            const __forInstance5 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.connectors.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance100 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.save();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance100.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    this.connectors[i].style.lineWidth = 1;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance2.exports;
                                                    return __exports.data(this.connectors[i].style.lineWidth == null ? 1 : 0);
                                                })();
                                                var oldStyle = this.connectors[i].style.clone();
                                                var oldWidth = this.connectors[i].style.lineWidth;
                                                this.connectors[i].style = new Style();
                                                this.connectors[i].style.lineWidth = parseInt(oldWidth) + 2;
                                                this.connectors[i].style.strokeStyle = lS(0, 10);
                                                (() => {
                                                    const __callInstance99 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.connectors[i].paint(context);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance99.exports;
                                                    return __exports.data();
                                                })();
                                                this.connectors[i].style = oldStyle;
                                                (() => {
                                                    const __callInstance98 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.restore();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance98.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance1.exports;
                                return __exports.data(this.connectors[i].id == highlightedConnectorId ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance97 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.connectors[i].paint(context);
                                        }
                                    }
                                });
                                const __exports = __callInstance97.exports;
                                return __exports.data();
                            })();
                            (() => {
                                const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance96 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.connectionPointPaint(context, this.connectors[i].id);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance96.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance3.exports;
                                return __exports.data(this.connectors[i].id == highlightedConnectorId ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance5.exports;
            return __exports.data();
        })();
    },
    connectorDisconnect: function (conectionPointId) {
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance95 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.glueRemove(conectionPointId);
                                        }
                                    }
                                });
                                const __exports = __callInstance95.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(this.connectionPointHasGlues(conectionPointId) ? 1 : 0);
        })();
    },
    connectorConnect: function (connectionPoint1, connectionPoint2) {
        connectionPoint1.color = ConnectionPoint.CONNECTED_COLOR;
        connectionPoint2.color = ConnectionPoint.CONNECTED_COLOR;
        var figurePoint;
        var nonFigurePoint;
        (() => {
            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            figurePoint = connectionPoint1;
                            nonFigurePoint = connectionPoint2;
                        }
                    },
                    impFunc2: () => {
                        {
                            figurePoint = connectionPoint2;
                            nonFigurePoint = connectionPoint1;
                        }
                    }
                }
            });
            const __exports = __ifInstance5.exports;
            return __exports.data(connectionPoint1.type == ConnectionPoint.TYPE_FIGURE ? 1 : 0);
        })();
        nonFigurePoint.point.x = figurePoint.point.x;
        nonFigurePoint.point.y = figurePoint.point.y;
        (() => {
            const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance94 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.glueCreate(nonFigurePoint.id, figurePoint.id, false);
                                        }
                                    }
                                });
                                const __exports = __callInstance94.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance6.exports;
            return __exports.data(!this.connectionPointIsConnected(nonFigurePoint.id, figurePoint.id) ? 1 : 0);
        })();
        var connector = this.connectorGetById(nonFigurePoint.parentId);
        (() => {
            const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance93 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                alert(lS(0, 11) + connector.turningPoints.length + lS(0, 12));
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance93.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance92 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                connector.jaggedReloaded();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance92.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance91 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                connector.redraw();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance91.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance8.exports;
                                return __exports.data(this.connectionPointHasGlues(this.connectionPointGetAllByParent(connector.id)[0].id) && this.connectionPointHasGlues(this.connectionPointGetAllByParent(connector.id)[1].id) && connector.type == Connector.TYPE_JAGGED ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance7.exports;
            return __exports.data(connector != null ? 1 : 0);
        })();
    },
    connectorSelectXY: function (x, y) {
        this.connectorSelectedIndex = -1;
        for (var i = 0; i < this.connectors.length; i++) {
            if (this.connectors[i].contains(x, y)) {
                this.connectorSelectedIndex = i;
                break;
            }
        }
    },
    connectorGetSelected: function () {
        if (this.connectorSelectedIndex != -1) {
            return this.connectors[this.connectorSelectedIndex];
        }
        return null;
    },
    connectorGetById: function (connectorId) {
        for (var i = 0; i < this.connectors.length; i++) {
            if (this.connectors[i].id == connectorId) {
                return this.connectors[i];
            }
        }
        return null;
    },
    connectorGetByXY: function (x, y) {
        var id = -1;
        for (var i = 0; i < this.connectors.length; i++) {
            if (this.connectors[i].near(x, y, 3)) {
                id = this.connectors[i].id;
                break;
            }
        }
        return id;
    },
    connectorGetByTextXY: function (x, y) {
        var connectorsLength = this.connectors.length;
        for (var i = connectorsLength - 1; i >= 0; i--) {
            var connector = this.connectors[i];
            if (connector.middleText.contains(x, y)) {
                return connector.id;
            }
        }
        return -1;
    },
    connectorAdjustByConnectionPoint: function (cpId, x, y) {
        var cp = this.connectionPointGetById(cpId);
        (() => {
            const __callInstance90 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        Log.debug(lS(0, 13) + cp);
                    }
                }
            });
            const __exports = __callInstance90.exports;
            return __exports.data();
        })();
        var con = this.connectorGetById(cp.parentId);
        var conCps = this.connectionPointGetAllByParent(con.id);
        (() => {
            const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var start = conCps[0].point.clone();
                            var end = conCps[1].point.clone();
                            con.turningPoints = [
                                start,
                                end
                            ];
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            var startPoint = conCps[0].point.clone();
                                            var endPoint = conCps[1].point.clone();
                                            var sFigure = STACK.figureGetAsFirstFigureForConnector(con.id);
                                            var sBounds = sFigure == null ? null : sFigure.getBounds();
                                            var eFigure = STACK.figureGetAsSecondFigureForConnector(con.id);
                                            var eBounds = eFigure == null ? null : eFigure.getBounds();
                                            var solutions = this.connector2Points(Connector.TYPE_JAGGED, startPoint, endPoint, sBounds, eBounds);
                                            (() => {
                                                const __callInstance89 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            con.applySolution(solutions);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance89.exports;
                                                return __exports.data();
                                            })();
                                            conCps[0].point = con.turningPoints[0].clone();
                                            conCps[1].point = con.turningPoints[con.turningPoints.length - 1].clone();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance10.exports;
                            return __exports.data(con.type === Connector.TYPE_JAGGED || con.type === Connector.TYPE_ORGANIC ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance9.exports;
            return __exports.data(con.type === Connector.TYPE_STRAIGHT ? 1 : 0);
        })();
    },
    connectionPointGetFirstForConnector: function (connectorId) {
        return this.connectionPointGetAllByParentIdAndType(connectorId, ConnectionPoint.TYPE_CONNECTOR)[0];
    },
    connectionPointGetSecondForConnector: function (connectorId) {
        return this.connectionPointGetAllByParentIdAndType(connectorId, ConnectionPoint.TYPE_CONNECTOR)[1];
    },
    getClosestPointsOfConnection: function (startAutomatic, endAutomatic, startFigureId, startPoint, endFigureId, endPoint) {
        if (!startAutomatic && !endAutomatic) {
            return this.closestPointsFixed2Fixed(startPoint, endPoint);
        }
        if (startAutomatic && !endAutomatic) {
            return this.closestPointsAuto2Fixed(startFigureId, endPoint);
        }
        if (!startAutomatic && endAutomatic) {
            return this.closestPointsFixed2Auto(startPoint, endFigureId);
        }
        if (startAutomatic && endAutomatic) {
            return this.closestPointsAuto2Auto(startFigureId, startPoint, endFigureId, endPoint);
        }
    },
    closestPointsAuto2Auto: function (startFigureId, startPoint, endFigureId, endPoint) {
        if (startFigureId == endFigureId) {
            var candidate = this.closestPointsAuto2Fixed(startFigureId, startPoint, endFigureId, endPoint);
            candidate[1] = candidate[0];
            candidate[3] = candidate[2];
            return candidate;
        }
        var startFCps = this.connectionPointGetAllByParent(startFigureId), startFCpLength = startFCps.length, curStartPoint, closestStartPoint = startFCps[0].point, closestStartConnectionPointId = startFCps[0].id, endFCps = this.connectionPointGetAllByParent(endFigureId), endFCpLength = endFCps.length, curEndPoint, closestEndPoint = endFCps[0].point, closestEndConnectionPointId = endFCps[0].id, minDistance = Util.distance(closestStartPoint, closestEndPoint), curDistance;
        (() => {
            var i = 0;
            const __forInstance6 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < startFCpLength ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            curStartPoint = startFCps[i].point;
                            (() => {
                                var j = 0;
                                const __forInstance7 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return j < endFCpLength ? 1 : 0;
                                        },
                                        update: () => {
                                            j++;
                                        },
                                        body: () => {
                                            {
                                                curEndPoint = endFCps[j].point;
                                                curDistance = Util.distance(curStartPoint, curEndPoint);
                                                (() => {
                                                    const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    minDistance = curDistance;
                                                                    closestStartPoint = curStartPoint;
                                                                    closestStartConnectionPointId = startFCps[i].id;
                                                                    closestEndPoint = curEndPoint;
                                                                    closestEndConnectionPointId = endFCps[j].id;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance11.exports;
                                                    return __exports.data(curDistance < minDistance ? 1 : 0);
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance7.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance6.exports;
            return __exports.data();
        })();
        return [
            closestStartPoint.clone(),
            closestEndPoint.clone(),
            closestStartConnectionPointId,
            closestEndConnectionPointId
        ];
    },
    closestPointsFixed2Auto: function (startPoint, endFigureId) {
        var fCps = this.connectionPointGetAllByParent(endFigureId), fCpLength = fCps.length, closestPoint = fCps[0].point, closestConnectionPointId = fCps[0].id, minDistance = Util.distance(startPoint, closestPoint), curPoint, curDistance;
        (() => {
            var i = 1;
            const __forInstance8 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < fCpLength ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            curPoint = fCps[i].point;
                            curDistance = Util.distance(startPoint, curPoint);
                            (() => {
                                const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                minDistance = curDistance;
                                                closestPoint = curPoint;
                                                closestConnectionPointId = fCps[i].id;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance12.exports;
                                return __exports.data(curDistance < minDistance ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance8.exports;
            return __exports.data();
        })();
        return [
            startPoint,
            closestPoint.clone(),
            -1,
            closestConnectionPointId
        ];
    },
    closestPointsAuto2Fixed: function (startFigureId, endPoint) {
        var fCps = this.connectionPointGetAllByParent(startFigureId), fCpLength = fCps.length, closestPoint = fCps[0].point, closestConnectionPointId = fCps[0].id, minDistance = Util.distance(closestPoint, endPoint), curPoint, curDistance;
        (() => {
            var i = 1;
            const __forInstance9 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < fCpLength ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            curPoint = fCps[i].point;
                            curDistance = Util.distance(curPoint, endPoint);
                            (() => {
                                const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                minDistance = curDistance;
                                                closestPoint = curPoint;
                                                closestConnectionPointId = fCps[i].id;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance13.exports;
                                return __exports.data(curDistance < minDistance ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance9.exports;
            return __exports.data();
        })();
        return [
            closestPoint.clone(),
            endPoint,
            closestConnectionPointId,
            -1
        ];
    },
    closestPointsFixed2Fixed: function (startPoint, endPoint) {
        return [
            startPoint,
            endPoint,
            -1,
            -1
        ];
    },
    connector2Points: function (type, startPoint, endPoint, sBounds, eBounds) {
        var oldLogLevel = Log.level;
        (() => {
            const __callInstance88 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        Log.group(lS(0, 14));
                    }
                }
            });
            const __exports = __callInstance88.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance87 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        Log.info(lS(0, 15) + type + lS(0, 16) + startPoint + lS(0, 17) + endPoint + lS(0, 18) + sBounds + lS(0, 19) + eBounds + lS(0, 20));
                    }
                }
            });
            const __exports = __callInstance87.exports;
            return __exports.data();
        })();
        var solutions = [];
        switch (type) {
        case Connector.TYPE_STRAIGHT:
            var points = [
                startPoint.clone(),
                endPoint.clone()
            ];
            (() => {
                const __callInstance86 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 21),
                                lS(0, 22),
                                points
                            ]);
                        }
                    }
                });
                const __exports = __callInstance86.exports;
                return __exports.data();
            })();
            break;
        case Connector.TYPE_ORGANIC:
        case Connector.TYPE_JAGGED:
            var startExitPoint = null;
            var endExitPoint = null;
            (() => {
                const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                var potentialExits = [];
                                (() => {
                                    const __callInstance85 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(startPoint.x, sBounds[1] - FIGURE_ESCAPE_DISTANCE));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance85.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance84 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(sBounds[2] + FIGURE_ESCAPE_DISTANCE, startPoint.y));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance84.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance83 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(startPoint.x, sBounds[3] + FIGURE_ESCAPE_DISTANCE));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance83.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance82 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(sBounds[0] - FIGURE_ESCAPE_DISTANCE, startPoint.y));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance82.exports;
                                    return __exports.data();
                                })();
                                startExitPoint = potentialExits[0];
                                (() => {
                                    var i = 1;
                                    const __forInstance10 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return i < potentialExits.length ? 1 : 0;
                                            },
                                            update: () => {
                                                i++;
                                            },
                                            body: () => {
                                                {
                                                    (() => {
                                                        const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        startExitPoint = potentialExits[i];
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance15.exports;
                                                        return __exports.data(Util.distance(startPoint, potentialExits[i]) < Util.distance(startPoint, startExitPoint) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance10.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance81 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    alert(lS(0, 23));
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance81.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance16.exports;
                                    return __exports.data(startExitPoint == null ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance14.exports;
                return __exports.data(sBounds != null ? 1 : 0);
            })();
            (() => {
                const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                var potentialExits = [];
                                (() => {
                                    const __callInstance80 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(endPoint.x, eBounds[1] - FIGURE_ESCAPE_DISTANCE));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance80.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance79 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(eBounds[2] + FIGURE_ESCAPE_DISTANCE, endPoint.y));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance79.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance78 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(endPoint.x, eBounds[3] + FIGURE_ESCAPE_DISTANCE));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance78.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __callInstance77 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                potentialExits.push(new Point(eBounds[0] - FIGURE_ESCAPE_DISTANCE, endPoint.y));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance77.exports;
                                    return __exports.data();
                                })();
                                endExitPoint = potentialExits[0];
                                (() => {
                                    var i = 1;
                                    const __forInstance11 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return i < potentialExits.length ? 1 : 0;
                                            },
                                            update: () => {
                                                i++;
                                            },
                                            body: () => {
                                                {
                                                    (() => {
                                                        const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        endExitPoint = potentialExits[i];
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance18.exports;
                                                        return __exports.data(Util.distance(endPoint, potentialExits[i]) < Util.distance(endPoint, endExitPoint) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance11.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance76 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    alert(lS(0, 24));
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance76.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance19.exports;
                                    return __exports.data(endExitPoint == null ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance17.exports;
                return __exports.data(eBounds != null ? 1 : 0);
            })();
            var s = [startPoint];
            var gapIndex = 0;
            (() => {
                const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance75 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                s.push(startExitPoint);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance75.exports;
                                    return __exports.data();
                                })();
                                gapIndex = 1;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance20.exports;
                return __exports.data(startExitPoint ? 1 : 0);
            })();
            (() => {
                const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance74 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                s.push(endExitPoint);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance74.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance21.exports;
                return __exports.data(endExitPoint ? 1 : 0);
            })();
            (() => {
                const __callInstance73 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s.push(endPoint);
                        }
                    }
                });
                const __exports = __callInstance73.exports;
                return __exports.data();
            })();
            var s0 = Point.cloneArray(s);
            (() => {
                const __callInstance72 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 25),
                                lS(0, 26),
                                s0
                            ]);
                        }
                    }
                });
                const __exports = __callInstance72.exports;
                return __exports.data();
            })();
            var s1 = Point.cloneArray(s);
            var s1_1 = Point.cloneArray(s1);
            (() => {
                const __callInstance71 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s1_1.splice(gapIndex + 1, 0, new Point(s1_1[gapIndex].x, s1_1[gapIndex + 1].y));
                        }
                    }
                });
                const __exports = __callInstance71.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance70 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 27),
                                lS(0, 28),
                                s1_1
                            ]);
                        }
                    }
                });
                const __exports = __callInstance70.exports;
                return __exports.data();
            })();
            var s1_2 = Point.cloneArray(s1);
            (() => {
                const __callInstance69 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s1_2.splice(gapIndex + 1, 0, new Point(s1_2[gapIndex + 1].x, s1_2[gapIndex].y));
                        }
                    }
                });
                const __exports = __callInstance69.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance68 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 29),
                                lS(0, 30),
                                s1_2
                            ]);
                        }
                    }
                });
                const __exports = __callInstance68.exports;
                return __exports.data();
            })();
            var s2_1 = Point.cloneArray(s);
            var s2_1_1 = new Point((s2_1[gapIndex].x + s2_1[gapIndex + 1].x) / 2, s2_1[gapIndex].y);
            var s2_1_2 = new Point((s2_1[gapIndex].x + s2_1[gapIndex + 1].x) / 2, s2_1[gapIndex + 1].y);
            (() => {
                const __callInstance67 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_1.splice(gapIndex + 1, 0, s2_1_1, s2_1_2);
                        }
                    }
                });
                const __exports = __callInstance67.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance66 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 31),
                                lS(0, 32),
                                s2_1
                            ]);
                        }
                    }
                });
                const __exports = __callInstance66.exports;
                return __exports.data();
            })();
            var s2_2 = Point.cloneArray(s);
            var s2_2_1 = new Point(s2_2[gapIndex].x, (s2_2[gapIndex].y + s2_2[gapIndex + 1].y) / 2);
            var s2_2_2 = new Point(s2_2[gapIndex + 1].x, (s2_2[gapIndex].y + s2_2[gapIndex + 1].y) / 2);
            (() => {
                const __callInstance65 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_2.splice(gapIndex + 1, 0, s2_2_1, s2_2_2);
                        }
                    }
                });
                const __exports = __callInstance65.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance64 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 33),
                                lS(0, 34),
                                s2_2
                            ]);
                        }
                    }
                });
                const __exports = __callInstance64.exports;
                return __exports.data();
            })();
            var s2_3 = Point.cloneArray(s);
            var eastExits = [
                s2_3[gapIndex].x + 20,
                s2_3[gapIndex + 1].x + 20
            ];
            (() => {
                const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance63 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                eastExits.push(sBounds[2] + 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance63.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance22.exports;
                return __exports.data(sBounds ? 1 : 0);
            })();
            (() => {
                const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance62 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                eastExits.push(eBounds[2] + 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance62.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance23.exports;
                return __exports.data(eBounds ? 1 : 0);
            })();
            var eastExit = Util.max(eastExits);
            var s2_3_1 = new Point(eastExit, s2_3[gapIndex].y);
            var s2_3_2 = new Point(eastExit, s2_3[gapIndex + 1].y);
            (() => {
                const __callInstance61 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_3.splice(gapIndex + 1, 0, s2_3_1, s2_3_2);
                        }
                    }
                });
                const __exports = __callInstance61.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance60 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 35),
                                lS(0, 36),
                                s2_3
                            ]);
                        }
                    }
                });
                const __exports = __callInstance60.exports;
                return __exports.data();
            })();
            var s2_4 = Point.cloneArray(s);
            var northExits = [
                s2_4[gapIndex].y - 20,
                s2_4[gapIndex + 1].y - 20
            ];
            (() => {
                const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance59 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                northExits.push(sBounds[1] - 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance59.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance24.exports;
                return __exports.data(sBounds ? 1 : 0);
            })();
            (() => {
                const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance58 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                northExits.push(eBounds[1] - 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance58.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance25.exports;
                return __exports.data(eBounds ? 1 : 0);
            })();
            var northExit = Util.min(northExits);
            var s2_4_1 = new Point(s2_4[gapIndex].x, northExit);
            var s2_4_2 = new Point(s2_4[gapIndex + 1].x, northExit);
            (() => {
                const __callInstance57 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_4.splice(gapIndex + 1, 0, s2_4_1, s2_4_2);
                        }
                    }
                });
                const __exports = __callInstance57.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance56 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 37),
                                lS(0, 38),
                                s2_4
                            ]);
                        }
                    }
                });
                const __exports = __callInstance56.exports;
                return __exports.data();
            })();
            var s2_5 = Point.cloneArray(s);
            var westExits = [
                s2_5[gapIndex].x - 20,
                s2_5[gapIndex + 1].x - 20
            ];
            (() => {
                const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance55 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                westExits.push(sBounds[0] - 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance55.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance26.exports;
                return __exports.data(sBounds ? 1 : 0);
            })();
            (() => {
                const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance54 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                westExits.push(eBounds[0] - 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance54.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance27.exports;
                return __exports.data(eBounds ? 1 : 0);
            })();
            var westExit = Util.min(westExits);
            var s2_5_1 = new Point(westExit, s2_5[gapIndex].y);
            var s2_5_2 = new Point(westExit, s2_5[gapIndex + 1].y);
            (() => {
                const __callInstance53 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_5.splice(gapIndex + 1, 0, s2_5_1, s2_5_2);
                        }
                    }
                });
                const __exports = __callInstance53.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance52 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 39),
                                lS(0, 40),
                                s2_5
                            ]);
                        }
                    }
                });
                const __exports = __callInstance52.exports;
                return __exports.data();
            })();
            var s2_6 = Point.cloneArray(s);
            var southExits = [
                s2_6[gapIndex].y + 20,
                s2_6[gapIndex + 1].y + 20
            ];
            (() => {
                const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance51 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                southExits.push(sBounds[3] + 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance51.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance28.exports;
                return __exports.data(sBounds ? 1 : 0);
            })();
            (() => {
                const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance50 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                southExits.push(eBounds[3] + 20);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance50.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance29.exports;
                return __exports.data(eBounds ? 1 : 0);
            })();
            var southExit = Util.max(southExits);
            var s2_6_1 = new Point(s2_6[gapIndex].x, southExit);
            var s2_6_2 = new Point(s2_6[gapIndex + 1].x, southExit);
            (() => {
                const __callInstance49 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            s2_6.splice(gapIndex + 1, 0, s2_6_1, s2_6_2);
                        }
                    }
                });
                const __exports = __callInstance49.exports;
                return __exports.data();
            })();
            (() => {
                const __callInstance48 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            solutions.push([
                                lS(0, 41),
                                lS(0, 42),
                                s2_6
                            ]);
                        }
                    }
                });
                const __exports = __callInstance48.exports;
                return __exports.data();
            })();
            (() => {
                const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance47 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 43) + solutions.length);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance47.exports;
                                    return __exports.data();
                                })();
                                var orthogonalSolution = [];
                                (() => {
                                    var l = 0;
                                    const __forInstance12 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return l < solutions.length ? 1 : 0;
                                            },
                                            update: () => {
                                                l++;
                                            },
                                            body: () => {
                                                {
                                                    var solution = solutions[l][2];
                                                    (() => {
                                                        const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        (() => {
                                                                            const __callInstance46 = new WebAssembly.Instance(__callWasmModule, {
                                                                                env: {
                                                                                    impFunc: () => {
                                                                                        orthogonalSolution.push(solutions[l]);
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __callInstance46.exports;
                                                                            return __exports.data();
                                                                        })();
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance31.exports;
                                                        return __exports.data(Util.orthogonalPath(solution) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance12.exports;
                                    return __exports.data();
                                })();
                                solutions = orthogonalSolution;
                                (() => {
                                    const __callInstance45 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 44) + solutions.length);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance45.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance30.exports;
                return __exports.data(true ? 1 : 0);
            })();
            (() => {
                const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance44 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    Log.info(lS(0, 45));
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance44.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                                {
                                                    (() => {
                                                        const __callInstance43 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    Log.info(lS(0, 46) + solutions.length);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance43.exports;
                                                        return __exports.data();
                                                    })();
                                                    var forwardSolutions = [];
                                                    var temp = lS(0, 47);
                                                    (() => {
                                                        var l = 0;
                                                        const __forInstance13 = new WebAssembly.Instance(__forWasmModule, {
                                                            env: {
                                                                test: () => {
                                                                    return l < solutions.length ? 1 : 0;
                                                                },
                                                                update: () => {
                                                                    l++;
                                                                },
                                                                body: () => {
                                                                    {
                                                                        var solution = solutions[l][2];
                                                                        (() => {
                                                                            const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
                                                                                env: {
                                                                                    impFunc1: () => {
                                                                                        {
                                                                                            (() => {
                                                                                                const __callInstance42 = new WebAssembly.Instance(__callWasmModule, {
                                                                                                    env: {
                                                                                                        impFunc: () => {
                                                                                                            forwardSolutions.push(solutions[l]);
                                                                                                        }
                                                                                                    }
                                                                                                });
                                                                                                const __exports = __callInstance42.exports;
                                                                                                return __exports.data();
                                                                                            })();
                                                                                        }
                                                                                    },
                                                                                    impFunc2: () => {
                                                                                        {
                                                                                            temp = temp + lS(0, 48) + solution;
                                                                                        }
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __ifInstance34.exports;
                                                                            return __exports.data(Util.forwardPath(solution) ? 1 : 0);
                                                                        })();
                                                                    }
                                                                }
                                                            }
                                                        });
                                                        const __exports = __forInstance13.exports;
                                                        return __exports.data();
                                                    })();
                                                    solutions = forwardSolutions;
                                                    (() => {
                                                        const __callInstance41 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    Log.info(lS(0, 49) + solutions.length);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance41.exports;
                                                        return __exports.data();
                                                    })();
                                                    (() => {
                                                        const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        (() => {
                                                                            const __callInstance40 = new WebAssembly.Instance(__callWasmModule, {
                                                                                env: {
                                                                                    impFunc: () => {
                                                                                        Log.info(lS(0, 50) + temp);
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __callInstance40.exports;
                                                                            return __exports.data();
                                                                        })();
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance35.exports;
                                                        return __exports.data(solutions.length == 0 ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance33.exports;
                                    return __exports.data(startPoint.equals(endPoint) ? 1 : 0);
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance32.exports;
                return __exports.data(true ? 1 : 0);
            })();
            (() => {
                const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance39 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 51) + solutions.length);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance39.exports;
                                    return __exports.data();
                                })();
                                var nonIntersectionSolutions = [];
                                (() => {
                                    var l = 0;
                                    const __forInstance14 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return l < solutions.length ? 1 : 0;
                                            },
                                            update: () => {
                                                l++;
                                            },
                                            body: () => {
                                                {
                                                    var solution = solutions[l][2];
                                                    var intersect = false;
                                                    var innerLines = solution.slice();
                                                    (() => {
                                                        const __ifInstance37 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        innerLines = innerLines.slice(1, innerLines.length - 1);
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance37.exports;
                                                        return __exports.data(eBounds || sBounds ? 1 : 0);
                                                    })();
                                                    (() => {
                                                        const __ifInstance38 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        intersect = intersect || Util.polylineIntersectsRectangle(innerLines, sBounds);
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance38.exports;
                                                        return __exports.data(sBounds ? 1 : 0);
                                                    })();
                                                    (() => {
                                                        const __ifInstance39 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        intersect = intersect || Util.polylineIntersectsRectangle(innerLines, eBounds);
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance39.exports;
                                                        return __exports.data(eBounds ? 1 : 0);
                                                    })();
                                                    (() => {
                                                        const __ifInstance40 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        (() => {
                                                                            const __callInstance38 = new WebAssembly.Instance(__callWasmModule, {
                                                                                env: {
                                                                                    impFunc: () => {
                                                                                        nonIntersectionSolutions.push(solutions[l]);
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __callInstance38.exports;
                                                                            return __exports.data();
                                                                        })();
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance40.exports;
                                                        return __exports.data(!intersect ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance14.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance41 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    solutions = nonIntersectionSolutions;
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance41.exports;
                                    return __exports.data(nonIntersectionSolutions.length != 0 ? 1 : 0);
                                })();
                                (() => {
                                    const __callInstance37 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 52) + solutions.length);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance37.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance36.exports;
                return __exports.data(true ? 1 : 0);
            })();
            (() => {
                const __ifInstance42 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance36 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 53));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance36.exports;
                                    return __exports.data();
                                })();
                                (() => {
                                    const __ifInstance43 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    alert(lS(0, 54));
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance35.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance43.exports;
                                    return __exports.data(solutions.length == 0 ? 1 : 0);
                                })();
                                var firstSolution = solutions[0][2];
                                var nrOfPoints = firstSolution.length;
                                var sameNrPointsSolution = [];
                                (() => {
                                    var l = 0;
                                    const __forInstance15 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return l < solutions.length ? 1 : 0;
                                            },
                                            update: () => {
                                                l++;
                                            },
                                            body: () => {
                                                {
                                                    var solution = solutions[l][2];
                                                    (() => {
                                                        const __ifInstance44 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        (() => {
                                                                            const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
                                                                                env: {
                                                                                    impFunc: () => {
                                                                                        sameNrPointsSolution.push(solutions[l]);
                                                                                    }
                                                                                }
                                                                            });
                                                                            const __exports = __callInstance34.exports;
                                                                            return __exports.data();
                                                                        })();
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance44.exports;
                                                        return __exports.data(solution.length == nrOfPoints ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance15.exports;
                                    return __exports.data();
                                })();
                                solutions = sameNrPointsSolution;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance42.exports;
                return __exports.data(true ? 1 : 0);
            })();
            (() => {
                const __ifInstance45 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                Log.info(lS(0, 55));
                                            }
                                        }
                                    });
                                    const __exports = __callInstance33.exports;
                                    return __exports.data();
                                })();
                                var solIndex = 0;
                                (() => {
                                    var l = 0;
                                    const __forInstance16 = new WebAssembly.Instance(__forWasmModule, {
                                        env: {
                                            test: () => {
                                                return l < solutions.length ? 1 : 0;
                                            },
                                            update: () => {
                                                l++;
                                            },
                                            body: () => {
                                                {
                                                    var solution = solutions[l][2];
                                                    (() => {
                                                        const __ifInstance46 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        solIndex = l;
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance46.exports;
                                                        return __exports.data(Util.scorePath(solutions[solIndex][2]) < Util.scorePath(solutions[l][2]) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    });
                                    const __exports = __forInstance16.exports;
                                    return __exports.data();
                                })();
                                solutions = [solutions[solIndex]];
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance45.exports;
                return __exports.data(true ? 1 : 0);
            })();
            break;
        }
        (() => {
            const __ifInstance47 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.smoothOrganic(solutions);
                                        }
                                    }
                                });
                                const __exports = __callInstance32.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance47.exports;
            return __exports.data(type === Connector.TYPE_ORGANIC ? 1 : 0);
        })();
        (() => {
            const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        Log.groupEnd();
                    }
                }
            });
            const __exports = __callInstance31.exports;
            return __exports.data();
        })();
        Log.level = oldLogLevel;
        return solutions;
    },
    smoothOrganic: function (solutions) {
        var option = 3;
        switch (option) {
        case 0:
            break;
        case 1:
            (() => {
                var s = 0;
                const __forInstance17 = new WebAssembly.Instance(__forWasmModule, {
                    env: {
                        test: () => {
                            return s < solutions.length ? 1 : 0;
                        },
                        update: () => {
                            s++;
                        },
                        body: () => {
                            {
                                var solTurningPoints = solutions[s][2];
                                var a1 = solTurningPoints[0];
                                var a2 = solTurningPoints[1];
                                var startMiddlePoint = Util.getMiddle(a1, a2);
                                (() => {
                                    const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                solTurningPoints.splice(1, 0, startMiddlePoint);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance30.exports;
                                    return __exports.data();
                                })();
                                var a3 = solTurningPoints[solTurningPoints.length - 2];
                                var a4 = solTurningPoints[solTurningPoints.length - 1];
                                var endMiddlePoint = Util.getMiddle(a3, a4);
                                (() => {
                                    const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                solTurningPoints.splice(solTurningPoints.length - 1, 0, endMiddlePoint);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance29.exports;
                                    return __exports.data();
                                })();
                            }
                        }
                    }
                });
                const __exports = __forInstance17.exports;
                return __exports.data();
            })();
            break;
        case 2:
            (() => {
                var s = 0;
                const __forInstance18 = new WebAssembly.Instance(__forWasmModule, {
                    env: {
                        test: () => {
                            return s < solutions.length ? 1 : 0;
                        },
                        update: () => {
                            s++;
                        },
                        body: () => {
                            {
                                var solType = solutions[s][0];
                                (() => {
                                    const __ifInstance48 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    var solTurningPoints = solutions[s][2];
                                                    (() => {
                                                        const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    solTurningPoints.splice(1, 1);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance28.exports;
                                                        return __exports.data();
                                                    })();
                                                    (() => {
                                                        const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    solTurningPoints.splice(solTurningPoints.length - 2, 1);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance27.exports;
                                                        return __exports.data();
                                                    })();
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance48.exports;
                                    return __exports.data(solType == lS(0, 56) || solType == lS(0, 57) ? 1 : 0);
                                })();
                            }
                        }
                    }
                });
                const __exports = __forInstance18.exports;
                return __exports.data();
            })();
            break;
        case 3:
            (() => {
                var s = 0;
                const __forInstance19 = new WebAssembly.Instance(__forWasmModule, {
                    env: {
                        test: () => {
                            return s < solutions.length ? 1 : 0;
                        },
                        update: () => {
                            s++;
                        },
                        body: () => {
                            {
                                var solType = solutions[s][0];
                                (() => {
                                    const __ifInstance49 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    var solTurningPoints = solutions[s][2];
                                                    var reducedSolution = Util.collinearReduction(solTurningPoints);
                                                    solutions[s][2] = reducedSolution;
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance49.exports;
                                    return __exports.data(solType == lS(0, 58) ? 1 : 0);
                                })();
                            }
                        }
                    }
                });
                const __exports = __forInstance19.exports;
                return __exports.data();
            })();
            break;
        }
    },
    _scorePath: function (v, smooth) {
        var n = v.length;
        if (n < 3) {
            return -1;
        }
        var score = 0;
        for (var i = 1; i < n - 1; i++) {
            if (v[i - 1].x == v[i].x && v[i].x == v[i + 1].x) {
                if (signum(v[i + 1].y - v[i].y) == signum(v[i].y - v[i - 1].y)) {
                    (() => {
                        const __ifInstance50 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        score++;
                                    }
                                },
                                impFunc2: () => {
                                }
                            }
                        });
                        const __exports = __ifInstance50.exports;
                        return __exports.data(smooth ? 1 : 0);
                    })();
                } else {
                    return -1;
                }
            } else if (v[i - 1].y == v[i].y && v[i].y == v[i + 1].y) {
                if (signum(v[i + 1].x - v[i].x) == signum(v[i].x - v[i - 1].x)) {
                    (() => {
                        const __ifInstance51 = new WebAssembly.Instance(__ifWasmModule, {
                            env: {
                                impFunc1: () => {
                                    {
                                        score++;
                                    }
                                },
                                impFunc2: () => {
                                }
                            }
                        });
                        const __exports = __ifInstance51.exports;
                        return __exports.data(smooth ? 1 : 0);
                    })();
                } else {
                    return -1;
                }
            } else {
                (() => {
                    const __ifInstance52 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    score++;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance52.exports;
                    return __exports.data(!smooth ? 1 : 0);
                })();
            }
        }
        return score;
    },
    _validPath: function (v) {
        var n = v.length;
        if (n < 3) {
            return false;
        }
        for (var i = 1; i < n - 1; i++) {
            if (v[i - 1].x == v[i].x && v[i].x == v[i + 1].x) {
                if (signum(v[i + 1].y - v[i].y) != signum(v[i].y - v[i - 1].y)) {
                    return false;
                }
            } else if (v[i - 1].y == v[i].y && v[i].y == v[i + 1].y) {
                if (signum(v[i + 1].x - v[i].x) != signum(v[i].x - v[i - 1].x)) {
                    return false;
                }
            }
        }
        return true;
    },
    reset: function () {
        this.connectors = [];
        this.connectorSelectedIndex = -1;
        this.connectionPoints = [];
        this.connectionPointSelectedIndex = -1;
        this.connectionPointCurrentId = 0;
    },
    connectionPointGetSelected: function () {
        if (this.connectionPointSelectedIndex == -1) {
            return null;
        }
        return this.connectionPoints[this.connectionPointSelectedIndex];
    },
    connectionPointGetByXY: function (x, y, type) {
        var id = -1;
        for (var i = 0; i < this.connectionPoints.length; i++) {
            if (this.connectionPoints[i].contains(x, y) && this.connectionPoints[i].type == type) {
                id = this.connectionPoints[i].id;
                break;
            }
        }
        return id;
    },
    connectionPointGetByXYRadius: function (x, y, radius, type, ignoreConPoint) {
        var curId = -1, closestId = -1, curX, curY, minDistance = -1, curDistance;
        (() => {
            curX = x - radius;
            const __forInstance20 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return curX <= x + radius ? 1 : 0;
                    },
                    update: () => {
                        curX++;
                    },
                    body: () => {
                        {
                            (() => {
                                curY = y - radius;
                                const __forInstance21 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return curY <= y + radius ? 1 : 0;
                                        },
                                        update: () => {
                                            curY++;
                                        },
                                        body: () => {
                                            {
                                                (() => {
                                                    const __ifInstance53 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    curId = this.connectionPointGetByXY(curX, curY, type);
                                                                    (() => {
                                                                        const __ifInstance54 = new WebAssembly.Instance(__ifWasmModule, {
                                                                            env: {
                                                                                impFunc1: () => {
                                                                                    {
                                                                                        curDistance = Math.sqrt(Math.pow(curX - x, 2) + Math.pow(curY - y, 2));
                                                                                        (() => {
                                                                                            const __ifInstance55 = new WebAssembly.Instance(__ifWasmModule, {
                                                                                                env: {
                                                                                                    impFunc1: () => {
                                                                                                        {
                                                                                                            minDistance = curDistance;
                                                                                                            closestId = curId;
                                                                                                        }
                                                                                                    },
                                                                                                    impFunc2: () => {
                                                                                                    }
                                                                                                }
                                                                                            });
                                                                                            const __exports = __ifInstance55.exports;
                                                                                            return __exports.data(minDistance === -1 || curDistance < minDistance ? 1 : 0);
                                                                                        })();
                                                                                    }
                                                                                },
                                                                                impFunc2: () => {
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __ifInstance54.exports;
                                                                        return __exports.data(curId !== -1 ? 1 : 0);
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance53.exports;
                                                    return __exports.data(!ignoreConPoint.contains(curX, curY) ? 1 : 0);
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance21.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance20.exports;
            return __exports.data();
        })();
        return closestId;
    },
    connectionPointsResetColor: function () {
        (() => {
            var i = 0;
            const __forInstance22 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.connectionPoints.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            this.connectionPoints[i].color = ConnectionPoint.NORMAL_COLOR;
                        }
                    }
                }
            });
            const __exports = __forInstance22.exports;
            return __exports.data();
        })();
    },
    connectionPointCreate: function (parentId, point, type) {
        var conPoint = new ConnectionPoint(parentId, point.clone(), this.connectionPointCurrentId++, type);
        (() => {
            const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectionPoints.push(conPoint);
                    }
                }
            });
            const __exports = __callInstance26.exports;
            return __exports.data();
        })();
        return conPoint;
    },
    connectionPointAdd: function (connectionPoint) {
        (() => {
            const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.connectionPoints.push(connectionPoint);
                    }
                }
            });
            const __exports = __callInstance25.exports;
            return __exports.data();
        })();
    },
    connectionPointRemoveAllByParent: function (parentId) {
        (() => {
            var i = 0;
            const __forInstance23 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.connectionPoints.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance56 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.connectionPoints.splice(i, 1);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance24.exports;
                                                    return __exports.data();
                                                })();
                                                i--;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance56.exports;
                                return __exports.data(this.connectionPoints[i].parentId == parentId ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance23.exports;
            return __exports.data();
        })();
    },
    connectionPointGetById: function (connectionPointId) {
        for (var i = 0; i < this.connectionPoints.length; i++) {
            if (this.connectionPoints[i].id == connectionPointId) {
                return this.connectionPoints[i];
            }
        }
        return null;
    },
    connectionPointGetByParentAndCoordinates: function (parentId, x, y) {
        for (var i = 0; i < this.connectionPoints.length; i++) {
            if (this.connectionPoints[i].parentId == parentId && this.connectionPoints[i].point.x == x && this.connectionPoints[i].point.y == y) {
                return this.connectionPoints[i];
            }
        }
        return null;
    },
    connectionPointGetAllByParent: function (parentId) {
        var collectedPoints = [];
        for (var connectionPoint in this.connectionPoints) {
            (() => {
                const __ifInstance57 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                collectedPoints.push(this.connectionPoints[connectionPoint]);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance23.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance57.exports;
                return __exports.data(this.connectionPoints[connectionPoint].parentId == parentId ? 1 : 0);
            })();
        }
        return collectedPoints;
    },
    connectionPointGetAllByParentIdAndType: function (parentId, type) {
        var collectedPoints = [];
        for (var cpIndex in this.connectionPoints) {
            (() => {
                const __ifInstance58 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                (() => {
                                    const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                collectedPoints.push(this.connectionPoints[cpIndex]);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance22.exports;
                                    return __exports.data();
                                })();
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance58.exports;
                return __exports.data(this.connectionPoints[cpIndex].parentId == parentId && this.connectionPoints[cpIndex].type == type ? 1 : 0);
            })();
        }
        return collectedPoints;
    },
    connectionPointOver: function (x, y, parentFigureId) {
        var foundedConnectionPoint = null;
        (() => {
            const __ifInstance59 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance60 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                for (var canvasConnectionPoint in this.connectionPoints) {
                                                    (() => {
                                                        const __ifInstance61 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        this.connectionPoints[canvasConnectionPoint].color = ConnectionPoint.OVER_COLOR;
                                                                        foundedConnectionPoint = this.connectionPoints[canvasConnectionPoint];
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance61.exports;
                                                        return __exports.data(this.connectionPoints[canvasConnectionPoint].parentId != -parentFigureId && this.connectionPoints[canvasConnectionPoint].contains(x, y) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                var figureConnectionPoints = this.connectionPointGetAllByParent(parentFigureId);
                                                for (var figureConnectionPoint in figureConnectionPoints) {
                                                    (() => {
                                                        const __ifInstance62 = new WebAssembly.Instance(__ifWasmModule, {
                                                            env: {
                                                                impFunc1: () => {
                                                                    {
                                                                        figureConnectionPoints[figureConnectionPoint].color = ConnectionPoint.OVER_COLOR;
                                                                        foundedConnectionPoint = figureConnectionPoints[figureConnectionPoint];
                                                                    }
                                                                },
                                                                impFunc2: () => {
                                                                }
                                                            }
                                                        });
                                                        const __exports = __ifInstance62.exports;
                                                        return __exports.data(figureConnectionPoints[figureConnectionPoint].contains(x, y) ? 1 : 0);
                                                    })();
                                                }
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance60.exports;
                                return __exports.data(parentFigureId < 0 ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            for (var connectionPoint in this.connectionPoints) {
                                (() => {
                                    const __ifInstance63 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    this.connectionPoints[connectionPoint].color = ConnectionPoint.OVER_COLOR;
                                                    foundedConnectionPoint = this.connectionPoints[connectionPoint];
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance63.exports;
                                    return __exports.data(this.connectionPoints[connectionPoint].contains(x, y) ? 1 : 0);
                                })();
                            }
                        }
                    }
                }
            });
            const __exports = __ifInstance59.exports;
            return __exports.data(typeof parentFigureId == lS(0, 59) ? 1 : 0);
        })();
        return foundedConnectionPoint;
    },
    connectionPointPaint: function (context, parentFigureId) {
        var figureConnectionPoints = this.connectionPointGetAllByParent(parentFigureId);
        for (var conPoint in figureConnectionPoints) {
            (() => {
                const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            figureConnectionPoints[conPoint].paint(context);
                        }
                    }
                });
                const __exports = __callInstance21.exports;
                return __exports.data();
            })();
        }
    },
    connectionPointTransform: function (fId, matrix) {
        var fCps = this.connectionPointGetAllByParent(fId);
        var currentFigure = STACK.figureGetById(fId);
        (() => {
            var i = 0;
            const __forInstance24 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < fCps.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            fCps[i].transform(matrix);
                                        }
                                    }
                                });
                                const __exports = __callInstance20.exports;
                                return __exports.data();
                            })();
                            var glues = this.glueGetByFirstConnectionPointId(fCps[i].id);
                            var gluesLength = glues.length;
                            (() => {
                                var j = 0;
                                const __forInstance25 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return j < gluesLength ? 1 : 0;
                                        },
                                        update: () => {
                                            j++;
                                        },
                                        body: () => {
                                            {
                                                var firstCP = this.connectionPointGetById(glues[j].id2);
                                                var connector = this.connectorGetById(firstCP.parentId);
                                                var cCPs = this.connectionPointGetAllByParent(connector.id);
                                                var startPoint = cCPs[0].point;
                                                var endPoint = cCPs[1].point;
                                                var startFigure;
                                                var endFigure;
                                                var startBounds;
                                                var endBounds;
                                                var automaticStart;
                                                var automaticEnd;
                                                (() => {
                                                    const __ifInstance64 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    cCPs[0].transform(matrix);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance19.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                    startFigure = currentFigure;
                                                                    var endGlue = this.glueGetBySecondConnectionPointId(cCPs[1].id)[0];
                                                                    var endFigureCP = endGlue ? this.connectionPointGetById(endGlue.id1) : null;
                                                                    endFigure = endFigureCP ? STACK.figureGetById(endFigureCP.parentId) : null;
                                                                    automaticStart = glues[j].automatic;
                                                                    automaticEnd = endGlue && endGlue.automatic;
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    cCPs[1].transform(matrix);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance18.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                    endFigure = currentFigure;
                                                                    var startGlue = this.glueGetBySecondConnectionPointId(cCPs[0].id)[0];
                                                                    var startFigureCP = startGlue ? this.connectionPointGetById(startGlue.id1) : null;
                                                                    startFigure = startFigureCP ? STACK.figureGetById(startFigureCP.parentId) : null;
                                                                    automaticStart = startGlue && startGlue.automatic;
                                                                    automaticEnd = glues[j].automatic;
                                                                }
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance64.exports;
                                                    return __exports.data(firstCP.id == cCPs[0].id ? 1 : 0);
                                                })();
                                                startBounds = startFigure ? startFigure.getBounds() : null;
                                                endBounds = endFigure ? endFigure.getBounds() : null;
                                                var candidate = CONNECTOR_MANAGER.getClosestPointsOfConnection(automaticStart, automaticEnd, startFigure ? startFigure.id : -1, startPoint, endFigure ? endFigure.id : -1, endPoint);
                                                DIAGRAMO.debugSolutions = CONNECTOR_MANAGER.connector2Points(connector.type, candidate[0], candidate[1], startBounds, endBounds);
                                                (() => {
                                                    const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                connector.applySolution(DIAGRAMO.debugSolutions);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance17.exports;
                                                    return __exports.data();
                                                })();
                                                cCPs[0].point = connector.turningPoints[0].clone();
                                                cCPs[1].point = connector.turningPoints[connector.turningPoints.length - 1].clone();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance25.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance24.exports;
            return __exports.data();
        })();
    },
    connectionPointIsConnected: function (id1, id2) {
        for (var i = 0; i < this.glues.length; i++) {
            if (id1 == this.glues[i].id1 && id2 == this.glues[i].id2 || id1 == this.glues[i].id2 && id2 == this.glues[i].id1) {
                return true;
            }
        }
        return false;
    },
    connectionPointHasGlues: function (conectionPointId) {
        for (var i = 0; i < this.glues.length; i++) {
            if (conectionPointId == this.glues[i].id1 || conectionPointId == this.glues[i].id2) {
                return true;
            }
        }
        return false;
    },
    glueGetByFirstConnectionPointId: function (pointId) {
        var collectedGlues = [];
        var currentGlue;
        (() => {
            var i = 0;
            const __forInstance26 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            currentGlue = this.glues[i];
                            (() => {
                                const __ifInstance65 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                collectedGlues.push(currentGlue);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance16.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance65.exports;
                                return __exports.data(currentGlue.id1 == pointId ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance26.exports;
            return __exports.data();
        })();
        return collectedGlues;
    },
    glueGetBySecondConnectionPointId: function (pointId) {
        var collectedGlues = [];
        (() => {
            var i = 0;
            const __forInstance27 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance66 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                collectedGlues.push(this.glues[i]);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance15.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance66.exports;
                                return __exports.data(this.glues[i].id2 == pointId ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance27.exports;
            return __exports.data();
        })();
        return collectedGlues;
    },
    glueCreate: function (firstId, secondId, automatic) {
        var glue = new Glue(firstId, secondId, automatic);
        (() => {
            const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.glues.push(glue);
                    }
                }
            });
            const __exports = __callInstance14.exports;
            return __exports.data();
        })();
        return glue;
    },
    glueAdd: function (glue) {
        (() => {
            const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.glues.push(glue);
                    }
                }
            });
            const __exports = __callInstance13.exports;
            return __exports.data();
        })();
    },
    glueRemoveByIds: function (id1, id2) {
        (() => {
            var i = 0;
            const __forInstance28 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance67 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.glues.splice(i, 1);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance12.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance67.exports;
                                return __exports.data(id1 == this.glues[i].id1 && id2 == this.glues[i].id2 ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance28.exports;
            return __exports.data();
        })();
    },
    glueRemoveAllByFirstId: function (id) {
        (() => {
            var i = 0;
            const __forInstance29 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance68 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.glues.splice(i, 1);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance11.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance68.exports;
                                return __exports.data(id == this.glues[i].id1 ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance29.exports;
            return __exports.data();
        })();
    },
    glueRemoveAllBySecondId: function (id) {
        (() => {
            var i = 0;
            const __forInstance30 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance69 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                this.glues.splice(i, 1);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance10.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance69.exports;
                                return __exports.data(id == this.glues[i].id2 ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance30.exports;
            return __exports.data();
        })();
    },
    glueGetAllByIds: function (firstId, secondId) {
        var collectedGlues = [];
        (() => {
            var i = 0;
            const __forInstance31 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return i < this.glues.length ? 1 : 0;
                    },
                    update: () => {
                        i++;
                    },
                    body: () => {
                        {
                            (() => {
                                const __ifInstance70 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                collectedGlues.push(this.glues[i]);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance9.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance70.exports;
                                return __exports.data(this.glues[i].id1 == firstId && this.glues[i].id2 == secondId ? 1 : 0);
                            })();
                        }
                    }
                }
            });
            const __exports = __forInstance31.exports;
            return __exports.data();
        })();
        return collectedGlues;
    },
    connectionCloudPaint: function (context) {
        (() => {
            const __ifInstance71 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance72 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var conPoint1 = this.connectionPointGetById(currentCloud[0]);
                                                var conPoint2 = this.connectionPointGetById(currentCloud[1]);
                                                var centerX = (conPoint2.point.x + conPoint1.point.x) / 2;
                                                var centerY = (conPoint2.point.y + conPoint1.point.y) / 2;
                                                var radiusX = ConnectorManager.CLOUD_RADIUS;
                                                var radiusY = ConnectorManager.CLOUD_RADIUS / 2;
                                                var rotationAngle = Math.atan((conPoint2.point.y - conPoint1.point.y) / (conPoint2.point.x - conPoint1.point.x));
                                                (() => {
                                                    const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.save();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance8.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.beginPath();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance7.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __ifInstance73 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    context.ellipse(centerX, centerY, radiusX, radiusY, rotationAngle, 0, 2 * Math.PI, false);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance6.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                                {
                                                                    var width_two_thirds = radiusX * 4 / 3;
                                                                    var dx1 = Math.sin(rotationAngle) * radiusY;
                                                                    var dy1 = Math.cos(rotationAngle) * radiusY;
                                                                    var dx2 = Math.cos(rotationAngle) * width_two_thirds;
                                                                    var dy2 = Math.sin(rotationAngle) * width_two_thirds;
                                                                    var P3x = centerX - dx1;
                                                                    var P3y = centerY + dy1;
                                                                    var P2x = P3x + dx2;
                                                                    var P2y = P3y + dy2;
                                                                    var P4x = P3x - dx2;
                                                                    var P4y = P3y - dy2;
                                                                    var P6x = centerX + dx1;
                                                                    var P6y = centerY - dy1;
                                                                    var P1x = P6x + dx2;
                                                                    var P1y = P6y + dy2;
                                                                    var P5x = P6x - dx2;
                                                                    var P5y = P6y - dy2;
                                                                    (() => {
                                                                        const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    context.moveTo(P6x, P6y);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance5.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                    (() => {
                                                                        const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    context.bezierCurveTo(P1x, P1y, P2x, P2y, P3x, P3y);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance4.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                    (() => {
                                                                        const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    context.bezierCurveTo(P4x, P4y, P5x, P5y, P6x, P6y);
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance3.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance73.exports;
                                                    return __exports.data(context.ellipse ? 1 : 0);
                                                })();
                                                context.lineWidth = ConnectorManager.CLOUD_LINEWIDTH;
                                                context.strokeStyle = ConnectorManager.CLOUD_STROKE_STYLE;
                                                (() => {
                                                    const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.stroke();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance2.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.closePath();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance1.exports;
                                                    return __exports.data();
                                                })();
                                                (() => {
                                                    const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                context.restore();
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance0.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance72.exports;
                                return __exports.data(currentCloud.length ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance71.exports;
            return __exports.data(DIAGRAMO.visualMagnet ? 1 : 0);
        })();
    }
};</script>
</body>
</html>
