<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>player.user.manager.service.html</title>
</head>
<body>

<script>
(self.cnx_webpack_global_elements_545253=self.cnx_webpack_global_elements_545253||[]).push([["user.manager.service"],{7501:function(t,e,s){var i;t=s.nmd(t),function(n){var r=e,o=(t&&t.exports,"object"==typeof s.g&&s.g);o.global!==o&&o.window;var a=function(t){this.message=t};(a.prototype=new Error).name="InvalidCharacterError";var c=function(t){throw new a(t)},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,u={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var e,s,i,n,r=t.length%3,o="",a=-1,l=t.length-r;++a<l;)e=t.charCodeAt(a)<<16,s=t.charCodeAt(++a)<<8,i=t.charCodeAt(++a),o+=h.charAt((n=e+s+i)>>18&63)+h.charAt(n>>12&63)+h.charAt(n>>6&63)+h.charAt(63&n);return 2==r?(e=t.charCodeAt(a)<<8,s=t.charCodeAt(++a),o+=h.charAt((n=e+s)>>10)+h.charAt(n>>4&63)+h.charAt(n<<2&63)+"="):1==r&&(n=t.charCodeAt(a),o+=h.charAt(n>>2)+h.charAt(n<<4&63)+"=="),o},decode:function(t){var e=(t=String(t).replace(l,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var s,i,n=0,r="",o=-1;++o<e;)i=h.indexOf(t.charAt(o)),s=n%4?64*s+i:i,n++%4&&(r+=String.fromCharCode(255&s>>(-2*n&6)));return r},version:"0.1.0"};void 0===(i=function(){return u}.call(e,s,e,t))||(t.exports=i)}()},6658:(t,e,s)=>{"use strict";var i=s(3090),n=i.decodeBitsToIds,r=i.decodeFromBase64;t.exports={decodeConsentString:function(t){var e=r(t),s=e.version,i=e.cmpId,o=e.vendorListVersion,a=e.purposeIdBitString,c=e.maxVendorId,h=e.created,l=e.lastUpdated,u=e.isRange,d=e.defaultConsent,p=e.vendorIdBitString,g=e.vendorRangeList,f=e.cmpVersion,m=e.consentScreen,v=e.consentLanguage,w={version:s,cmpId:i,vendorListVersion:o,allowedPurposeIds:n(a),maxVendorId:c,created:h,lastUpdated:l,cmpVersion:f,consentScreen:m,consentLanguage:v};if(u){var S=g.reduce((function(t,e){for(var s=e.isRange,i=e.startVendorId,n=e.endVendorId,r=s?n:i,o=i;o<=r;o+=1)t[o]=!0;return t}),{});w.allowedVendorIds=[];for(var C=1;C<=c;C+=1)(d&&!S[C]||!d&&S[C])&&-1===w.allowedVendorIds.indexOf(C)&&w.allowedVendorIds.push(C)}else w.allowedVendorIds=n(p);return w}}},8462:(t,e,s)=>{"use strict";var i=s(6658).decodeConsentString;t.exports={decodeConsentString:i}},3090:(t,e,s)=>{"use strict";var i=s(7501),n=s(3977),r=n.versionNumBits,o=n.vendorVersionMap;function a(t,e,s){return parseInt(t.substr(e,s),2)}function c(t,e,s){return new Date(100*a(t,e,s))}function h(t){var e=a(t);return String.fromCharCode(e+65).toLowerCase()}function l(t,e,s){var i=t.substr(e,s);return h(i.slice(0,s/2))+h(i.slice(s/2))}function u(t){var e=t.input,s=t.output,i=t.startPosition,n=t.field,r=n.type,o=n.numBits,h=n.decoder,u=n.validator,p=n.listCount;if("function"==typeof u&&!u(s))return{newPosition:i};if("function"==typeof h)return h(e,s,i);var g,f,m="function"==typeof o?o(s):o;switch(r){case"int":return{fieldValue:a(e,i,m)};case"bool":return{fieldValue:(g=e,f=i,1===parseInt(g.substr(f,1),2))};case"date":return{fieldValue:c(e,i,m)};case"bits":return{fieldValue:e.substr(i,m)};case"list":return function(t,e,s,i,n){var r=0;"function"==typeof n?r=n(e):"number"==typeof n&&(r=n);for(var o=s,a=[],c=0;c<r;c+=1){var h=d({input:t,fields:i.fields,startPosition:o});o=h.newPosition,a.push(h.decodedObject)}return{fieldValue:a,newPosition:o}}(e,s,i,n,p);case"language":return{fieldValue:l(e,i,m)};default:throw new Error("ConsentString - Unknown field type "+r+" for decoding")}}function d(t){var e=t.input,s=t.fields,i=t.startPosition,n=void 0===i?0:i;return{decodedObject:s.reduce((function(t,s){var i=s.name,r=s.numBits,o=u({input:e,output:t,startPosition:n,field:s}),a=o.fieldValue,c=o.newPosition;return void 0!==a&&(t[i]=a),void 0!==c?n=c:"number"==typeof r&&(n+=r),t}),{}),newPosition:n}}t.exports={decodeBitsToIds:function(t){return t.split("").reduce((function(t,e,s){return"1"===e&&-1===t.indexOf(s+1)&&t.push(s+1),t}),[])},decodeFromBase64:function(t,e){for(var s=t;s.length%4!=0;)s+="=";s=s.replace(/-/g,"+").replace(/_/g,"/");for(var n,c,h=i.decode(s),l="",u=0;u<h.length;u+=1){var p=h.charCodeAt(u).toString(2);l+=(n=p,c=8-p.length,function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",s="",i=0;i<t;i+=1)s+=e;return s}(Math.max(0,c))+n)}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,s=a(t,0,r);if("number"!=typeof s)throw new Error("ConsentString - Unknown version number in the string to decode");if(!o[s])throw new Error("ConsentString - Unsupported version "+s+" in the string to decode");return d({input:t,fields:e[s].fields}).decodedObject}(l,e)}}},3977:t=>{"use strict";t.exports={versionNumBits:6,vendorVersionMap:{1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(t){return t.maxVendorId},validator:function(t){return!t.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(t){return t.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(t){return t.isRange}},{name:"vendorRangeList",type:"list",listCount:function(t){return t.numEntries},validator:function(t){return t.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(t){return t.isRange}}]}]}}}},2047:(t,e,s)=>{"use strict";s.d(e,{C:()=>i});class i{constructor(){this.i=!1,this.promise=new Promise(((t,e)=>{this.o=t,this.L=e}))}get isPending(){return!this.i}resolve(t){this.V(),this.o(t)}reject(t){this.V(),this.L(t)}V(){this.i||(this.i=!0)}}},6127:(t,e,s)=>{"use strict";s.r(e),s.d(e,{UserManagerService:()=>Pt});var i=s(7582),n=s(6716),r=s(8671),o=s(6345);const a={ccpaSubdivisions:[5332921,6254928,4831725,5417618,5549030],country:{US:6252001}};var c=s(6418),h=s(2047),l=s(235),u=s(7823),d=s(574);const p=["1YNY","1YNN"],g="Y";var f=s(8243),m=s(6637),v=s(3997),w=s(2206);class S{constructor(t,e){this.Z=t,this.os=1,this.xs="__uspapi",this.Fs="getUSPData",this.ti={isPending:!0,isRejected:!1,isDelayed:!1,promise:new Promise((()=>{}))},this.ri(e)}getUsPrivacyString(){if(this.Z.usPrivacyString||this.Z.isCcpaApplicable)return this.Z.usPrivacyString}isCcpaApplicable(){return this.Z.isCcpaApplicable}isSellUserAllowed(){return!this.Z.isCcpaApplicable||this.hi()}setGeoLocation(t){this.gn=t}fetchUsPrivacyString(){return this.Nn()&&this.Yn(),this.isCcpaApplicable()?new Promise((t=>{this.getUsPrivacyString()?t():t(this.rr())})):Promise.resolve()}ccpaInfoLogging(t){this.isCcpaApplicable()&&this.cr&&(this.ti.isPending?((0,v.FH)({message:"CCPA Pending",exception:"CCPA_Pending_At_Start_AdRequest",level:"Info",callStack:t}),this.ti.isDelayed=!0,this.no=t):this.ti.isRejected&&(0,v.FH)({message:"CCPA Error",exception:"CCPA_Error_At_Start_AdRequest",level:"Info",callStack:t}))}rr(){return this.ti.promise=new Promise(((t,e)=>{const s=this.Z.getScope()[this.xs];s?(this.cr=!0,s(this.Fs,this.os,((s,i)=>{i?(this.ri(s.uspString),t()):e()}))):e()})),this.ao(this.ti),this.ti.promise}hi(){return!this.Z.usPrivacyString||(0,f.d3)(this.Z.usPrivacyString,p)}lo(t){this.Z.usPrivacyString=t}ri(t){let e=t;window.navigator.globalPrivacyControl&&(t?this.hi()&&(e=function(t,e){return(null==t?void 0:t.slice(0,2))+e+t.slice(3)}(t,g)):e="1-Y-"),this.lo(e)}Nn(){if(!(0,m.Vm)([95,5]))return!1;const t=new Date(2020,10,16,12,0,0).getTime(),e=new Date(2020,10,17,12,0,0).getTime();return(0,w.k$)(t,e)}Yn(){const{countryGeoId:t,subdivisionId:e}=this.gn;t===a.country.US&&(0,v.FH)({message:"UserCcpaManager_logCCPA",level:"Info",callStack:JSON.stringify(e),exception:this.Z.usPrivacyString})}ao(t){t.promise.then((()=>{t.isPending=!1,t.isDelayed&&(0,v.FH)({message:"CCPA Delayed Success",exception:"CCPA_Success_After_Delay",level:"Info",callStack:this.no})})).catch((e=>{throw t.isRejected=!0,t.isPending=!1,t.isDelayed&&(0,v.FH)({message:"CCPA Delayed Failure",exception:"CCPA_Failed_After_Delay",level:"Info",callStack:this.no}),e}))}}var C=s(822),y=s(8839);class _{constructor(t,e){this.Ro=t,this.Fo=e,this.apiType=0,this.He={},this.qo=null,this.ua=t=>new Promise(((e,s)=>{try{const s="string"==typeof t.data?JSON.parse(t.data):t.data;if("object"==typeof s&&s.__cmpReturn)if(s.__cmpReturn.callId===this.sc){const t=s.__cmpReturn.returnValue&&s.__cmpReturn.returnValue.vendorConsents;this.nc(t).then((()=>e(this.sc)))}else if(s.__cmpReturn.callId===this.oc){const t=s.__cmpReturn.returnValue&&s.__cmpReturn.returnValue.consentData;this.cc(t).then((()=>e(this.oc)))}}catch(t){s()}}))}isApiOnPage(){return null!==this.Ro||null!==this.Fo}bindToApi(){return null!==this.Ro?new Promise(((t,e)=>{this.uc(this.Ro).then((()=>t())).catch((t=>e(t)))})):null!==this.Fo?this.Lc(this.Fo):Promise.reject()}isConsentForVendor(t){return!!this.He[t]}getConsentPayload(){return this.qo}setInAppConsentData(t){this.nc(t),this.cc(t.consentString)}hasIvtConsent(){return this.isConsentForVendor("143")}isConsentForPurposes(t){return!0}getApiObjectFromWindow(){const{windowPropertyName:t}=y.USER_CONSENT_API_MAPPING[0];return this.Ro[t]}Lc(t){this.oc=(0,m.qs)(),this.sc=(0,m.qs)();const e={};return new Promise((s=>{const i=t=>{this.ua(t).then((t=>{e[t]=!0,e[this.oc]&&e[this.sc]&&(window.removeEventListener("message",i,!1),s())})).catch((t=>{}))};window.addEventListener("message",i,!1);const{getVendorConsentDataMethodName:n,getConsentDataMethodName:r}=y.USER_CONSENT_API_MAPPING[0];t.postMessage({__cmpCall:{command:n,parameter:null,callId:this.sc}},"*"),t.postMessage({__cmpCall:{command:r,parameter:null,callId:this.oc}},"*")}))}uc(t){const{windowPropertyName:e,getConsentDataMethodName:s,getVendorConsentDataMethodName:i}=y.USER_CONSENT_API_MAPPING[0];if(t&&t[e]){const n=new Promise((s=>{t[e](i,null,((t,e)=>{if(e){const{vendorConsents:e}=t;this.nc(e).then((()=>s()))}}))})),r=new Promise((i=>{t[e](s,null,((t,e)=>{if(e){const{consentData:e}=t;this.cc(e).then((()=>i()))}}))}));return Promise.all([n,r])}return Promise.reject()}nc(t){return(0,C.as)(t)?(this.He=t,Promise.resolve()):Promise.reject()}cc(t){return(0,C.HD)(t)?(this.qo=t,Promise.resolve()):Promise.reject()}}var b,I,P,A,L=s(8462);class V extends Error{constructor(t){super(t),this.name="EncodingError"}}class E extends Error{constructor(t){super(t),this.name="DecodingError"}}class N{static DICT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";static REVERSE_DICT=new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]]);static BASIS=6;static LCM=24;static encode(t){if(!/^[0-1]+$/.test(t))throw new V("Invalid bitField");const e=t.length%this.LCM;t+=e?"0".repeat(this.LCM-e):"";let s="";for(let e=0;e<t.length;e+=this.BASIS)s+=this.DICT[parseInt(t.substr(e,this.BASIS),2)];return s}static decode(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new E("Invalidly encoded Base64URL string");let e="";for(let s=0;s<t.length;s++){const i=this.REVERSE_DICT.get(t[s]).toString(2);e+="0".repeat(this.BASIS-i.length)+i}return e}}class U{static langSet=new Set(["BG","CA","CS","DA","DE","EL","EN","ES","ET","FI","FR","HR","HU","IT","JA","LT","LV","MT","NL","NO","PL","PT","RO","RU","SK","SL","SV","TR","ZH"]);has(t){return U.langSet.has(t)}forEach(t){U.langSet.forEach(t)}get size(){return U.langSet.size}}class D{static cmpId="cmpId";static cmpVersion="cmpVersion";static consentLanguage="consentLanguage";static consentScreen="consentScreen";static created="created";static supportOOB="supportOOB";static isServiceSpecific="isServiceSpecific";static lastUpdated="lastUpdated";static numCustomPurposes="numCustomPurposes";static policyVersion="policyVersion";static publisherCountryCode="publisherCountryCode";static publisherCustomConsents="publisherCustomConsents";static publisherCustomLegitimateInterests="publisherCustomLegitimateInterests";static publisherLegitimateInterests="publisherLegitimateInterests";static publisherConsents="publisherConsents";static publisherRestrictions="publisherRestrictions";static purposeConsents="purposeConsents";static purposeLegitimateInterests="purposeLegitimateInterests";static purposeOneTreatment="purposeOneTreatment";static specialFeatureOptins="specialFeatureOptins";static useNonStandardStacks="useNonStandardStacks";static vendorConsents="vendorConsents";static vendorLegitimateInterests="vendorLegitimateInterests";static vendorListVersion="vendorListVersion";static vendorsAllowed="vendorsAllowed";static vendorsDisclosed="vendorsDisclosed";static version="version"}class O{clone(){const t=new this.constructor;return Object.keys(this).forEach((e=>{const s=this.deepClone(this[e]);void 0!==s&&(t[e]=s)})),t}deepClone(t){const e=typeof t;if("number"===e||"string"===e||"boolean"===e)return t;if(null!==t&&"object"===e){if("function"==typeof t.clone)return t.clone();if(t instanceof Date)return new Date(t.getTime());if(void 0!==t[Symbol.iterator]){const e=[];for(const s of t)e.push(this.deepClone(s));return t instanceof Array?e:new t.constructor(e)}{const e={};for(const s in t)t.hasOwnProperty(s)&&(e[s]=this.deepClone(t[s]));return e}}}}class M extends Error{constructor(t,e,s=""){super(`invalid value ${e} passed for ${t} ${s}`),this.name="TCModelError"}}!function(t){t[t.NOT_ALLOWED=0]="NOT_ALLOWED",t[t.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",t[t.REQUIRE_LI=2]="REQUIRE_LI"}(b||(b={}));class T extends O{static hashSeparator="-";purposeId_;restrictionType;constructor(t,e){super(),void 0!==t&&(this.purposeId=t),void 0!==e&&(this.restrictionType=e)}static unHash(t){const e=t.split(this.hashSeparator),s=new T;if(2!==e.length)throw new M("hash",t);return s.purposeId=parseInt(e[0],10),s.restrictionType=parseInt(e[1],10),s}get hash(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return`${this.purposeId}${T.hashSeparator}${this.restrictionType}`}get purposeId(){return this.purposeId_}set purposeId(t){this.purposeId_=t}isValid(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===b.NOT_ALLOWED||this.restrictionType===b.REQUIRE_CONSENT||this.restrictionType===b.REQUIRE_LI)}isSameAs(t){return this.purposeId===t.purposeId&&this.restrictionType===t.restrictionType}}class R extends O{root=null;getRoot(){return this.root}isEmpty(){return!this.root}add(t){const e={value:t,left:null,right:null};let s;if(this.isEmpty())this.root=e;else for(s=this.root;;)if(t<s.value){if(null===s.left){s.left=e;break}s=s.left}else{if(!(t>s.value))break;if(null===s.right){s.right=e;break}s=s.right}}get(){const t=[];let e=this.root;for(;e;)if(e.left){let s=e.left;for(;s.right&&s.right!=e;)s=s.right;s.right==e?(s.right=null,t.push(e.value),e=e.right):(s.right=e,e=e.left)}else t.push(e.value),e=e.right;return t}contains(t){let e=!1,s=this.root;for(;s;){if(s.value===t){e=!0;break}t>s.value?s=s.right:t<s.value&&(s=s.left)}return e}min(t=this.root){let e;for(;t;)t.left?t=t.left:(e=t.value,t=null);return e}max(t=this.root){let e;for(;t;)t.right?t=t.right:(e=t.value,t=null);return e}remove(t,e=this.root){let s=null,i="left";for(;e;)if(t<e.value)s=e,e=e.left,i="left";else if(t>e.value)s=e,e=e.right,i="right";else{if(e.left||e.right)if(e.left)if(e.right){const t=this.min(e.right);this.remove(t,e.right),e.value=t}else s?s[i]=e.left:this.root=e.left;else s?s[i]=e.right:this.root=e.right;else s?s[i]=null:this.root=null;e=null}}static build(t){if(t&&0!==t.length){if(1===t.length){const e=new R;return e.add(t[0]),e}{const e=t.length>>1,s=new R;s.add(t[e]);const i=s.getRoot();if(i){if(e+1<t.length){const s=R.build(t.slice(e+1));i.right=s?s.getRoot():null}if(e-1>0){const s=R.build(t.slice(0,e-1));i.left=s?s.getRoot():null}}return s}}return null}}class x extends O{bitLength=0;map=new Map;gvl_;has(t){return this.map.has(t)}isOkToHave(t,e,s){let i=!0;if(this.gvl?.vendors){const n=this.gvl.vendors[s];if(n)if(t===b.NOT_ALLOWED)i=n.legIntPurposes.includes(e)||n.purposes.includes(e);else if(n.flexiblePurposes.length)switch(t){case b.REQUIRE_CONSENT:i=n.flexiblePurposes.includes(e)&&n.legIntPurposes.includes(e);break;case b.REQUIRE_LI:i=n.flexiblePurposes.includes(e)&&n.purposes.includes(e)}else i=!1;else i=!1}return i}add(t,e){if(this.isOkToHave(e.restrictionType,e.purposeId,t)){const s=e.hash;this.has(s)||(this.map.set(s,new R),this.bitLength=0),this.map.get(s).add(t)}}restrictPurposeToLegalBasis(t){const e=this.gvl.vendorIds,s=t.hash,i=function(){let t;for(t of e);return t}(),n=[...Array(i).keys()].map((t=>t+1));for(let t=1;t<=i;t++)this.has(s)||(this.map.set(s,R.build(n)),this.bitLength=0),this.map.get(s).add(t)}getVendors(t){let e=[];if(t){const s=t.hash;this.has(s)&&(e=this.map.get(s).get())}else{const t=new Set;this.map.forEach((e=>{e.get().forEach((e=>{t.add(e)}))})),e=Array.from(t)}return e}getRestrictionType(t,e){let s;return this.getRestrictions(t).forEach((t=>{t.purposeId===e&&(void 0===s||s>t.restrictionType)&&(s=t.restrictionType)})),s}vendorHasRestriction(t,e){let s=!1;const i=this.getRestrictions(t);for(let t=0;t<i.length&&!s;t++)s=e.isSameAs(i[t]);return s}getMaxVendorId(){let t=0;return this.map.forEach((e=>{t=Math.max(e.max(),t)})),t}getRestrictions(t){const e=[];return this.map.forEach(((s,i)=>{t?s.contains(t)&&e.push(T.unHash(i)):e.push(T.unHash(i))})),e}getPurposes(){const t=new Set;return this.map.forEach(((e,s)=>{t.add(T.unHash(s).purposeId)})),Array.from(t)}remove(t,e){const s=e.hash,i=this.map.get(s);i&&(i.remove(t),i.isEmpty()&&(this.map.delete(s),this.bitLength=0))}set gvl(t){this.gvl_||(this.gvl_=t,this.map.forEach(((t,e)=>{const s=T.unHash(e);t.get().forEach((e=>{this.isOkToHave(s.restrictionType,s.purposeId,e)||t.remove(e)}))})))}get gvl(){return this.gvl_}isEmpty(){return 0===this.map.size}get numRestrictions(){return this.map.size}}!function(t){t.COOKIE="cookie",t.WEB="web",t.APP="app"}(I||(I={})),function(t){t.CORE="core",t.VENDORS_DISCLOSED="vendorsDisclosed",t.VENDORS_ALLOWED="vendorsAllowed",t.PUBLISHER_TC="publisherTC"}(P||(P={}));class F{static ID_TO_KEY=[P.CORE,P.VENDORS_DISCLOSED,P.VENDORS_ALLOWED,P.PUBLISHER_TC];static KEY_TO_ID={[P.CORE]:0,[P.VENDORS_DISCLOSED]:1,[P.VENDORS_ALLOWED]:2,[P.PUBLISHER_TC]:3}}class k extends O{bitLength=0;maxId_=0;set_=new Set;*[Symbol.iterator](){for(let t=1;t<=this.maxId;t++)yield[t,this.has(t)]}values(){return this.set_.values()}get maxId(){return this.maxId_}has(t){return this.set_.has(t)}unset(t){Array.isArray(t)?t.forEach((t=>this.unset(t))):"object"==typeof t?this.unset(Object.keys(t).map((t=>Number(t)))):(this.set_.delete(Number(t)),this.bitLength=0,t===this.maxId&&(this.maxId_=0,this.set_.forEach((t=>{this.maxId_=Math.max(this.maxId,t)}))))}isIntMap(t){let e="object"==typeof t;return e=e&&Object.keys(t).every((e=>{let s=Number.isInteger(parseInt(e,10));return s=s&&this.isValidNumber(t[e].id),s=s&&void 0!==t[e].name,s})),e}isValidNumber(t){return parseInt(t,10)>0}isSet(t){let e=!1;return t instanceof Set&&(e=Array.from(t).every(this.isValidNumber)),e}set(t){if(Array.isArray(t))t.forEach((t=>this.set(t)));else if(this.isSet(t))this.set(Array.from(t));else if(this.isIntMap(t))this.set(Object.keys(t).map((t=>Number(t))));else{if(!this.isValidNumber(t))throw new M("set()",t,"must be positive integer array, positive integer, Set<number>, or IntMap");this.set_.add(t),this.maxId_=Math.max(this.maxId,t),this.bitLength=0}}empty(){this.set_=new Set}forEach(t){for(let e=1;e<=this.maxId;e++)t(this.has(e),e)}get size(){return this.set_.size}setAll(t){this.set(t)}}class G{static[D.cmpId]=12;static[D.cmpVersion]=12;static[D.consentLanguage]=12;static[D.consentScreen]=6;static[D.created]=36;static[D.isServiceSpecific]=1;static[D.lastUpdated]=36;static[D.policyVersion]=6;static[D.publisherCountryCode]=12;static[D.publisherLegitimateInterests]=24;static[D.publisherConsents]=24;static[D.purposeConsents]=24;static[D.purposeLegitimateInterests]=24;static[D.purposeOneTreatment]=1;static[D.specialFeatureOptins]=12;static[D.useNonStandardStacks]=1;static[D.vendorListVersion]=12;static[D.version]=6;static anyBoolean=1;static encodingType=1;static maxId=16;static numCustomPurposes=6;static numEntries=12;static numRestrictions=12;static purposeId=6;static restrictionType=2;static segmentType=3;static singleOrRange=1;static vendorId=16}class B{static encode(t){return String(Number(t))}static decode(t){return"1"===t}}class ${static encode(t,e){let s;if("string"==typeof t&&(t=parseInt(t,10)),s=t.toString(2),s.length>e||t<0)throw new V(`${t} too large to encode into ${e}`);return s.length<e&&(s="0".repeat(e-s.length)+s),s}static decode(t,e){if(e!==t.length)throw new E("invalid bit length");return parseInt(t,2)}}class j{static encode(t,e){return $.encode(Math.round(t.getTime()/100),e)}static decode(t,e){if(e!==t.length)throw new E("invalid bit length");const s=new Date;return s.setTime(100*$.decode(t,e)),s}}class W{static encode(t,e){let s="";for(let i=1;i<=e;i++)s+=B.encode(t.has(i));return s}static decode(t,e){if(t.length!==e)throw new E("bitfield encoding length mismatch");const s=new k;for(let i=1;i<=e;i++)B.decode(t[i-1])&&s.set(i);return s.bitLength=t.length,s}}class J{static encode(t,e){const s=(t=t.toUpperCase()).charCodeAt(0)-65,i=t.charCodeAt(1)-65;if(s<0||s>25||i<0||i>25)throw new V(`invalid language code: ${t}`);if(e%2==1)throw new V(`numBits must be even, ${e} is not valid`);e/=2;return $.encode(s,e)+$.encode(i,e)}static decode(t,e){let s;if(e!==t.length||t.length%2)throw new E("invalid bit length for language");{const e=65,i=t.length/2,n=$.decode(t.slice(0,i),i)+e,r=$.decode(t.slice(i),i)+e;s=String.fromCharCode(n)+String.fromCharCode(r)}return s}}class H{static encode(t){let e=$.encode(t.numRestrictions,G.numRestrictions);return t.isEmpty()||t.getRestrictions().forEach((s=>{e+=$.encode(s.purposeId,G.purposeId),e+=$.encode(s.restrictionType,G.restrictionType);const i=t.getVendors(s),n=i.length;let r=0,o=0,a="";for(let e=0;e<n;e++){const s=i[e];0===o&&(r++,o=s);const c=i[n-1],h=t.gvl.vendorIds,l=t=>{for(;++t<=c&&!h.has(t););return t};if(e===n-1||i[e+1]>l(s)){const t=!(s===o);a+=B.encode(t),a+=$.encode(o,G.vendorId),t&&(a+=$.encode(s,G.vendorId)),o=0}}e+=$.encode(r,G.numEntries),e+=a})),e}static decode(t){let e=0;const s=new x,i=$.decode(t.substr(e,G.numRestrictions),G.numRestrictions);e+=G.numRestrictions;for(let n=0;n<i;n++){const i=$.decode(t.substr(e,G.purposeId),G.purposeId);e+=G.purposeId;const n=$.decode(t.substr(e,G.restrictionType),G.restrictionType);e+=G.restrictionType;const r=new T(i,n),o=$.decode(t.substr(e,G.numEntries),G.numEntries);e+=G.numEntries;for(let i=0;i<o;i++){const i=B.decode(t.substr(e,G.anyBoolean));e+=G.anyBoolean;const n=$.decode(t.substr(e,G.vendorId),G.vendorId);if(e+=G.vendorId,i){const i=$.decode(t.substr(e,G.vendorId),G.vendorId);if(e+=G.vendorId,i<n)throw new E(`Invalid RangeEntry: endVendorId ${i} is less than ${n}`);for(let t=n;t<=i;t++)s.add(t,r)}else s.add(n,r)}}return s.bitLength=e,s}}!function(t){t[t.FIELD=0]="FIELD",t[t.RANGE=1]="RANGE"}(A||(A={}));class Y{static encode(t){const e=[];let s,i=[],n=$.encode(t.maxId,G.maxId),r="";const o=G.maxId+G.encodingType,a=o+t.maxId,c=2*G.vendorId+G.singleOrRange+G.numEntries;let h=o+G.numEntries;return t.forEach(((n,o)=>{if(r+=B.encode(n),s=t.maxId>c&&h<a,s&&n){t.has(o+1)?0===i.length&&(i.push(o),h+=G.singleOrRange,h+=G.vendorId):(i.push(o),h+=G.vendorId,e.push(i),i=[])}})),s?(n+=String(A.RANGE),n+=this.buildRangeEncoding(e)):(n+=String(A.FIELD),n+=r),n}static decode(t,e){let s,i=0;const n=$.decode(t.substr(i,G.maxId),G.maxId);i+=G.maxId;const r=$.decode(t.charAt(i),G.encodingType);if(i+=G.encodingType,r===A.RANGE){if(s=new k,1===e){if("1"===t.substr(i,1))throw new E("Unable to decode default consent=1");i++}const n=$.decode(t.substr(i,G.numEntries),G.numEntries);i+=G.numEntries;for(let e=0;e<n;e++){const e=B.decode(t.charAt(i));i+=G.singleOrRange;const n=$.decode(t.substr(i,G.vendorId),G.vendorId);if(i+=G.vendorId,e){const e=$.decode(t.substr(i,G.vendorId),G.vendorId);i+=G.vendorId;for(let t=n;t<=e;t++)s.set(t)}else s.set(n)}}else{const e=t.substr(i,n);i+=n,s=W.decode(e,n)}return s.bitLength=i,s}static buildRangeEncoding(t){const e=t.length;let s=$.encode(e,G.numEntries);return t.forEach((t=>{const e=1===t.length;s+=B.encode(!e),s+=$.encode(t[0],G.vendorId),e||(s+=$.encode(t[1],G.vendorId))})),s}}function q(){return{[D.version]:$,[D.created]:j,[D.lastUpdated]:j,[D.cmpId]:$,[D.cmpVersion]:$,[D.consentScreen]:$,[D.consentLanguage]:J,[D.vendorListVersion]:$,[D.policyVersion]:$,[D.isServiceSpecific]:B,[D.useNonStandardStacks]:B,[D.specialFeatureOptins]:W,[D.purposeConsents]:W,[D.purposeLegitimateInterests]:W,[D.purposeOneTreatment]:B,[D.publisherCountryCode]:J,[D.vendorConsents]:Y,[D.vendorLegitimateInterests]:Y,[D.publisherRestrictions]:H,segmentType:$,[D.vendorsDisclosed]:Y,[D.vendorsAllowed]:Y,[D.publisherConsents]:W,[D.publisherLegitimateInterests]:W,[D.numCustomPurposes]:$,[D.publisherCustomConsents]:W,[D.publisherCustomLegitimateInterests]:W}}class z{1={[P.CORE]:[D.version,D.created,D.lastUpdated,D.cmpId,D.cmpVersion,D.consentScreen,D.consentLanguage,D.vendorListVersion,D.purposeConsents,D.vendorConsents]};2={[P.CORE]:[D.version,D.created,D.lastUpdated,D.cmpId,D.cmpVersion,D.consentScreen,D.consentLanguage,D.vendorListVersion,D.policyVersion,D.isServiceSpecific,D.useNonStandardStacks,D.specialFeatureOptins,D.purposeConsents,D.purposeLegitimateInterests,D.purposeOneTreatment,D.publisherCountryCode,D.vendorConsents,D.vendorLegitimateInterests,D.publisherRestrictions],[P.PUBLISHER_TC]:[D.publisherConsents,D.publisherLegitimateInterests,D.numCustomPurposes,D.publisherCustomConsents,D.publisherCustomLegitimateInterests],[P.VENDORS_ALLOWED]:[D.vendorsAllowed],[P.VENDORS_DISCLOSED]:[D.vendorsDisclosed]}}class K{1=[P.CORE];2=[P.CORE];constructor(t,e){if(2===t.version)if(t.isServiceSpecific)this[2].push(P.PUBLISHER_TC);else{const s=!(!e||!e.isForVendors);s&&!0!==t[D.supportOOB]||this[2].push(P.VENDORS_DISCLOSED),s&&(t[D.supportOOB]&&t[D.vendorsAllowed].size>0&&this[2].push(P.VENDORS_ALLOWED),this[2].push(P.PUBLISHER_TC))}}}class Q{static fieldSequence=new z;static encode(t,e){let s;try{s=this.fieldSequence[String(t.version)][e]}catch(s){throw new V(`Unable to encode version: ${t.version}, segment: ${e}`)}let i="";e!==P.CORE&&(i=$.encode(F.KEY_TO_ID[e],G.segmentType));const n=q();return s.forEach((s=>{const r=t[s],o=n[s];let a=G[s];void 0===a&&this.isPublisherCustom(s)&&(a=Number(t[D.numCustomPurposes]));try{i+=o.encode(r,a)}catch(t){throw new V(`Error encoding ${e}->${s}: ${t.message}`)}})),N.encode(i)}static decode(t,e,s){const i=N.decode(t);let n=0;s===P.CORE&&(e.version=$.decode(i.substr(n,G[D.version]),G[D.version])),s!==P.CORE&&(n+=G.segmentType);const r=this.fieldSequence[String(e.version)][s],o=q();return r.forEach((t=>{const s=o[t];let r=G[t];if(void 0===r&&this.isPublisherCustom(t)&&(r=Number(e[D.numCustomPurposes])),0!==r){const o=i.substr(n,r);if(e[t]=s===Y?s.decode(o,e.version):s.decode(o,r),Number.isInteger(r))n+=r;else{if(!Number.isInteger(e[t].bitLength))throw new E(t);n+=e[t].bitLength}}})),e}static isPublisherCustom(t){return 0===t.indexOf("publisherCustom")}}class Z{static processor=[t=>t,(t,e)=>{t.publisherRestrictions.gvl=e,t.purposeLegitimateInterests.unset(1);const s=new Map;return s.set("legIntPurposes",t.vendorLegitimateInterests),s.set("purposes",t.vendorConsents),s.forEach(((s,i)=>{s.forEach(((n,r)=>{if(n){const n=e.vendors[r];if(!n||n.deletedDate)s.unset(r);else if(0===n[i].length)if("legIntPurposes"===i&&0===n.purposes.length&&0===n.legIntPurposes.length&&n.specialPurposes.length>0);else if(t.isServiceSpecific)if(0===n.flexiblePurposes.length)s.unset(r);else{const e=t.publisherRestrictions.getRestrictions(r);let n=!1;for(let t=0,s=e.length;t<s&&!n;t++)n=e[t].restrictionType===b.REQUIRE_CONSENT&&"purposes"===i||e[t].restrictionType===b.REQUIRE_LI&&"legIntPurposes"===i;n||s.unset(r)}else s.unset(r)}}))})),t.vendorsDisclosed.set(e.vendors),t}];static process(t,e){const s=t.gvl;if(!s)throw new V("Unable to encode TCModel without a GVL");if(!s.isReady)throw new V("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");(t=t.clone()).consentLanguage=s.language.toUpperCase(),e?.version>0&&e?.version<=this.processor.length?t.version=e.version:t.version=this.processor.length;const i=t.version-1;if(!this.processor[i])throw new V(`Invalid version: ${t.version}`);return this.processor[i](t,s)}}class X extends Error{constructor(t){super(t),this.name="GVLError"}}class tt{static absCall(t,e,s,i){return new Promise(((n,r)=>{const o=new XMLHttpRequest;o.withCredentials=s,o.addEventListener("load",(()=>{if(o.readyState==XMLHttpRequest.DONE)if(o.status>=200&&o.status<300){let t=o.response;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}n(t)}else r(new Error(`HTTP Status: ${o.status} response type: ${o.responseType}`))})),o.addEventListener("error",(()=>{r(new Error("error"))})),o.addEventListener("abort",(()=>{r(new Error("aborted"))})),null===e?o.open("GET",t,!0):o.open("POST",t,!0),o.responseType="json",o.timeout=i,o.ontimeout=()=>{r(new Error("Timeout "+i+"ms "+t))},o.send(e)}))}static post(t,e,s=!1,i=0){return this.absCall(t,JSON.stringify(e),s,i)}static fetch(t,e=!1,s=0){return this.absCall(t,null,e,s)}}class et extends O{static LANGUAGE_CACHE=new Map;static CACHE=new Map;static LATEST_CACHE_KEY=0;static DEFAULT_LANGUAGE="EN";static consentLanguages=new U;static baseUrl_;static set baseUrl(t){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(t))throw new X("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this.baseUrl_=t}static get baseUrl(){return this.baseUrl_}static latestFilename="vendor-list.json";static versionedFilename="archives/vendor-list-v[VERSION].json";static languageFilename="purposes-[LANG].json";readyPromise;gvlSpecificationVersion;vendorListVersion;tcfPolicyVersion;lastUpdated;purposes;specialPurposes;features;specialFeatures;isReady_=!1;vendors_;vendorIds;fullVendorList;byPurposeVendorMap;bySpecialPurposeVendorMap;byFeatureVendorMap;bySpecialFeatureVendorMap;stacks;lang_;isLatest=!1;constructor(t){super();let e=et.baseUrl;if(this.lang_=et.DEFAULT_LANGUAGE,this.isVendorList(t))this.populate(t),this.readyPromise=Promise.resolve();else{if(!e)throw new X("must specify GVL.baseUrl before loading GVL json");if(t>0){const s=t;et.CACHE.has(s)?(this.populate(et.CACHE.get(s)),this.readyPromise=Promise.resolve()):(e+=et.versionedFilename.replace("[VERSION]",String(s)),this.readyPromise=this.fetchJson(e))}else et.CACHE.has(et.LATEST_CACHE_KEY)?(this.populate(et.CACHE.get(et.LATEST_CACHE_KEY)),this.readyPromise=Promise.resolve()):(this.isLatest=!0,this.readyPromise=this.fetchJson(e+et.latestFilename))}}static emptyLanguageCache(t){let e=!1;return void 0===t&&et.LANGUAGE_CACHE.size>0?(et.LANGUAGE_CACHE=new Map,e=!0):"string"==typeof t&&this.consentLanguages.has(t.toUpperCase())&&(et.LANGUAGE_CACHE.delete(t.toUpperCase()),e=!0),e}static emptyCache(t){let e=!1;return Number.isInteger(t)&&t>=0?(et.CACHE.delete(t),e=!0):void 0===t&&(et.CACHE=new Map,e=!0),e}cacheLanguage(){et.LANGUAGE_CACHE.has(this.lang_)||et.LANGUAGE_CACHE.set(this.lang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks})}async fetchJson(t){try{this.populate(await tt.fetch(t))}catch(t){throw new X(t.message)}}getJson(){return JSON.parse(JSON.stringify({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,vendors:this.fullVendorList}))}async changeLanguage(t){const e=t.toUpperCase();if(!et.consentLanguages.has(e))throw new X(`unsupported language ${t}`);if(e!==this.lang_)if(this.lang_=e,et.LANGUAGE_CACHE.has(e)){const t=et.LANGUAGE_CACHE.get(e);for(const e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}else{const e=et.baseUrl+et.languageFilename.replace("[LANG]",t);try{await this.fetchJson(e),this.cacheLanguage()}catch(t){throw new X("unable to load language: "+t.message)}}}get language(){return this.lang_}isVendorList(t){return void 0!==t&&void 0!==t.vendors}populate(t){this.purposes=t.purposes,this.specialPurposes=t.specialPurposes,this.features=t.features,this.specialFeatures=t.specialFeatures,this.stacks=t.stacks,this.isVendorList(t)&&(this.gvlSpecificationVersion=t.gvlSpecificationVersion,this.tcfPolicyVersion=t.tcfPolicyVersion,this.vendorListVersion=t.vendorListVersion,this.lastUpdated=t.lastUpdated,"string"==typeof this.lastUpdated&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=t.vendors,this.fullVendorList=t.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&et.CACHE.set(et.LATEST_CACHE_KEY,this.getJson()),et.CACHE.has(this.vendorListVersion)||et.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}mapVendors(t){this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach((t=>{this.byPurposeVendorMap[t]={legInt:new Set,consent:new Set,flexible:new Set}})),Object.keys(this.specialPurposes).forEach((t=>{this.bySpecialPurposeVendorMap[t]=new Set})),Object.keys(this.features).forEach((t=>{this.byFeatureVendorMap[t]=new Set})),Object.keys(this.specialFeatures).forEach((t=>{this.bySpecialFeatureVendorMap[t]=new Set})),Array.isArray(t)||(t=Object.keys(this.fullVendorList).map((t=>+t))),this.vendorIds=new Set(t),this.vendors_=t.reduce(((t,e)=>{const s=this.vendors_[String(e)];return s&&void 0===s.deletedDate&&(s.purposes.forEach((t=>{this.byPurposeVendorMap[String(t)].consent.add(e)})),s.specialPurposes.forEach((t=>{this.bySpecialPurposeVendorMap[String(t)].add(e)})),s.legIntPurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].legInt.add(e)})),s.flexiblePurposes&&s.flexiblePurposes.forEach((t=>{this.byPurposeVendorMap[String(t)].flexible.add(e)})),s.features.forEach((t=>{this.byFeatureVendorMap[String(t)].add(e)})),s.specialFeatures.forEach((t=>{this.bySpecialFeatureVendorMap[String(t)].add(e)})),t[e]=s),t}),{})}getFilteredVendors(t,e,s,i){const n=t.charAt(0).toUpperCase()+t.slice(1);let r;const o={};return r="purpose"===t&&s?this["by"+n+"VendorMap"][String(e)][s]:this["by"+(i?"Special":"")+n+"VendorMap"][String(e)],r.forEach((t=>{o[String(t)]=this.vendors[String(t)]})),o}getVendorsWithConsentPurpose(t){return this.getFilteredVendors("purpose",t,"consent")}getVendorsWithLegIntPurpose(t){return this.getFilteredVendors("purpose",t,"legInt")}getVendorsWithFlexiblePurpose(t){return this.getFilteredVendors("purpose",t,"flexible")}getVendorsWithSpecialPurpose(t){return this.getFilteredVendors("purpose",t,void 0,!0)}getVendorsWithFeature(t){return this.getFilteredVendors("feature",t)}getVendorsWithSpecialFeature(t){return this.getFilteredVendors("feature",t,void 0,!0)}get vendors(){return this.vendors_}narrowVendorsTo(t){this.mapVendors(t)}get isReady(){return this.isReady_}clone(){const t=new et(this.getJson());return this.lang_!==et.DEFAULT_LANGUAGE&&t.changeLanguage(this.lang_),t}static isInstanceOf(t){return"object"==typeof t&&"function"==typeof t.narrowVendorsTo}}class st extends O{static consentLanguages=et.consentLanguages;isServiceSpecific_=!1;supportOOB_=!0;useNonStandardStacks_=!1;purposeOneTreatment_=!1;publisherCountryCode_="AA";version_=2;consentScreen_=0;policyVersion_=2;consentLanguage_="EN";cmpId_=0;cmpVersion_=0;vendorListVersion_=0;numCustomPurposes_=0;gvl_;created;lastUpdated;specialFeatureOptins=new k;purposeConsents=new k;purposeLegitimateInterests=new k;publisherConsents=new k;publisherLegitimateInterests=new k;publisherCustomConsents=new k;publisherCustomLegitimateInterests=new k;customPurposes;vendorConsents=new k;vendorLegitimateInterests=new k;vendorsDisclosed=new k;vendorsAllowed=new k;publisherRestrictions=new x;constructor(t){super(),t&&(this.gvl=t),this.updated()}set gvl(t){et.isInstanceOf(t)||(t=new et(t)),this.gvl_=t,this.publisherRestrictions.gvl=t}get gvl(){return this.gvl_}set cmpId(t){if(t=Number(t),!(Number.isInteger(t)&&t>1))throw new M("cmpId",t);this.cmpId_=t}get cmpId(){return this.cmpId_}set cmpVersion(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new M("cmpVersion",t);this.cmpVersion_=t}get cmpVersion(){return this.cmpVersion_}set consentScreen(t){if(t=Number(t),!(Number.isInteger(t)&&t>-1))throw new M("consentScreen",t);this.consentScreen_=t}get consentScreen(){return this.consentScreen_}set consentLanguage(t){this.consentLanguage_=t}get consentLanguage(){return this.consentLanguage_}set publisherCountryCode(t){if(!/^([A-z]){2}$/.test(t))throw new M("publisherCountryCode",t);this.publisherCountryCode_=t.toUpperCase()}get publisherCountryCode(){return this.publisherCountryCode_}set vendorListVersion(t){if((t=Number(t)>>0)<0)throw new M("vendorListVersion",t);this.vendorListVersion_=t}get vendorListVersion(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_}set policyVersion(t){if(this.policyVersion_=parseInt(t,10),this.policyVersion_<0)throw new M("policyVersion",t)}get policyVersion(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_}set version(t){this.version_=parseInt(t,10)}get version(){return this.version_}set isServiceSpecific(t){this.isServiceSpecific_=t}get isServiceSpecific(){return this.isServiceSpecific_}set useNonStandardStacks(t){this.useNonStandardStacks_=t}get useNonStandardStacks(){return this.useNonStandardStacks_}set supportOOB(t){this.supportOOB_=t}get supportOOB(){return this.supportOOB_}set purposeOneTreatment(t){this.purposeOneTreatment_=t}get purposeOneTreatment(){return this.purposeOneTreatment_}setAllVendorConsents(){this.vendorConsents.set(this.gvl.vendors)}unsetAllVendorConsents(){this.vendorConsents.empty()}setAllVendorsDisclosed(){this.vendorsDisclosed.set(this.gvl.vendors)}unsetAllVendorsDisclosed(){this.vendorsDisclosed.empty()}setAllVendorsAllowed(){this.vendorsAllowed.set(this.gvl.vendors)}unsetAllVendorsAllowed(){this.vendorsAllowed.empty()}setAllVendorLegitimateInterests(){this.vendorLegitimateInterests.set(this.gvl.vendors)}unsetAllVendorLegitimateInterests(){this.vendorLegitimateInterests.empty()}setAllPurposeConsents(){this.purposeConsents.set(this.gvl.purposes)}unsetAllPurposeConsents(){this.purposeConsents.empty()}setAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.set(this.gvl.purposes)}unsetAllPurposeLegitimateInterests(){this.purposeLegitimateInterests.empty()}setAllSpecialFeatureOptins(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}unsetAllSpecialFeatureOptins(){this.specialFeatureOptins.empty()}setAll(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}unsetAll(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}get numCustomPurposes(){let t=this.numCustomPurposes_;if("object"==typeof this.customPurposes){const e=Object.keys(this.customPurposes).sort(((t,e)=>Number(t)-Number(e)));t=parseInt(e.pop(),10)}return t}set numCustomPurposes(t){if(this.numCustomPurposes_=parseInt(t,10),this.numCustomPurposes_<0)throw new M("numCustomPurposes",t)}updated(){const t=new Date,e=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()));this.created=e,this.lastUpdated=e}}class it{static encode(t,e){let s,i="";return t=Z.process(t,e),s=Array.isArray(e?.segments)?e.segments:new K(t,e)[""+t.version],s.forEach(((e,n)=>{let r="";n<s.length-1&&(r="."),i+=Q.encode(t,e)+r})),i}static decode(t,e){const s=t.split("."),i=s.length;e||(e=new st);for(let t=0;t<i;t++){const i=s[t],n=N.decode(i.charAt(0)).substr(0,G.segmentType),r=F.ID_TO_KEY[$.decode(n,G.segmentType).toString()];Q.decode(i,e,r)}return e}}var nt=s(6288);const rt=(t,e)=>{const{windowPropertyName:s}=y.USER_CONSENT_API_MAPPING[e];return(0,nt.uq)(t,s)},ot=(t,e)=>{const{framePropertyName:s}=y.USER_CONSENT_API_MAPPING[e];return(0,nt.wl)(t,s)},at=(t,e)=>null!==rt(t,e)||null!==ot(t,e),ct=t=>{const e=it.decode(t),s={},i={},n=e.cmpId;return e.vendorConsents.forEach(((t,e)=>{s[e]=t})),e.purposeConsents.forEach(((t,e)=>{i[e]=t})),{vendorConsents:s,purposeConsents:i,tcString:t,cmpId:n}},ht=t=>{const e=L.decodeConsentString(t);let s="";const i=e.maxVendorId;for(let t=1;t<=i;t++)s+="0";const n=[...s];e.allowedVendorIds.forEach((t=>{n[t-1]="1"}));return(t=>{const e={consentString:t};for(let s=0;s<t.length;s++)e[s+1]="1"===t[s];return e})(n.join(""))},lt=(t,e,s)=>{let i;try{i=e(t)}catch(t){}if((0,C.as)(i))return i;try{i=s(t)}catch(t){}return i},ut=t=>(0,C.QM)(null==t?void 0:t.tcString),dt=t=>(0,C.QM)(null==t?void 0:t.consentString),pt=({cmpEncodedString:t,tcfEncodedString:e})=>{if(!(0,C.QM)(t)&&!(0,C.QM)(e))return null;let s=null;return(0,C.QM)(e)&&(s=lt(e,ct,ht)),(0,C.as)(s)?s:(0,C.QM)(t)?(s=lt(t,ht,ct),(0,C.as)(s)?s:((0,v.FH)({message:"UserManagerService_getDecodedConsentData",exception:"cmpEncodedString failed to decode",callStack:JSON.stringify({cmpEncodedString:t,tcfEncodedString:e}),level:"Critical"}),null)):((0,v.FH)({message:"UserManagerService_getDecodedConsentData",exception:"tcfEncodedString failed to decode",callStack:JSON.stringify({tcfEncodedString:e}),level:"Critical"}),null)};class gt{constructor(t,e,s){this.Tc=t,this.Xc=e,this.th=s,this.apiType=1,this.eh=t=>new Promise(((e,s)=>{try{let i=t.data;if("string"==typeof t.data)try{i=JSON.parse(t.data)}catch(t){i=void 0}if("object"==typeof i&&i.__tcfapiReturn&&i.__tcfapiReturn.callId===this.sh){const t=i.__tcfapiReturn.returnValue.tcString;this.nc(t).then((()=>e(this.sh))).catch((t=>s()))}}catch(t){s()}}))}isApiOnPage(){return null!==this.Tc||null!==this.Xc}bindToApi(){return null!==this.Tc?new Promise(((t,e)=>{this.uc(this.Tc).then((()=>t())).catch((t=>e(t)))})):null!==this.Xc?this.Lc(this.Xc):Promise.reject()}isConsentForVendor(t){var e,s;return!!(null===(e=this.ih)||void 0===e?void 0:e.vendorConsents)&&!!(null===(s=this.ih)||void 0===s?void 0:s.vendorConsents[t])}getConsentPayload(){var t;const e=null===(t=this.ih)||void 0===t?void 0:t.tcString;return(0,C.QM)(e)?e:null}setInAppConsentData(t){this.nh(t.cmpId)&&(this.ih=Object.assign(Object.assign({},this.ih),t))}hasIvtConsent(){return!0}isConsentForPurposes(t){var e;return!!(null===(e=this.ih)||void 0===e?void 0:e.purposeConsents)&&t.every((t=>!!this.ih.purposeConsents[t]))}getApiObjectFromWindow(){const{windowPropertyName:t}=y.USER_CONSENT_API_MAPPING[1];return this.Tc[t]}nh(t){const e=this.th.includes(parseInt(t.toString(),10));return e||(0,v.FH)({exception:`CMP with Id ${t} not in GCL`,message:"TcfApi_CMP_Id_not_in_Global_CMP_List",level:"Info"},{pacing:5}),e}Lc(t){this.sh=(0,m.qs)();const e={};return new Promise((s=>{const i=t=>{this.eh(t).then((t=>{e[t]=!0,e[this.sh]&&(window.removeEventListener("message",i,!1),s())})).catch((t=>{}))};window.addEventListener("message",i,!1);const{getVendorConsentDataMethodName:n}=y.USER_CONSENT_API_MAPPING[1];t.postMessage({__tcfapiCall:{command:n,parameter:null,callId:this.sh}},"*")}))}uc(t){const{windowPropertyName:e,consentUpdateMethodName:s,removeUpdateListenerMethodName:i}=y.USER_CONSENT_API_MAPPING[1];return t&&t[e]?new Promise(((t,n)=>{this.Tc[e](s,2,((s,r)=>{if(r&&("useractioncomplete"===s.eventStatus||"tcloaded"===s.eventStatus)){const r=s.tcString;this.nc(r).then((()=>t())).catch((()=>n())),this.Tc[e](i,2,(()=>{}),s.listenerId)}}))})):Promise.reject()}nc(t){const e=pt({tcfEncodedString:t});return ut(e)&&this.nh(e.cmpId)?(this.ih=e,Promise.resolve()):Promise.reject()}}var ft=s(4582);class mt{constructor(t,e,s={}){var i,n;this.rh=t,this.W=e,this._appSettings=s,this.oh=null;const r=pt({cmpEncodedString:null===(i=s.cmp)||void 0===i?void 0:i.consentString,tcfEncodedString:null===(n=s.tcf)||void 0===n?void 0:n.tcString}),o=this.ah(r);null!==o?(this.hh(o),(ut(r)||dt(r))&&this.lh.setInAppConsentData(r)):(0,v.FH)({message:"UserManagerService_UserConsentApiManager",exception:"failed to find the right api, no consent string and no framework on page was found",callStack:JSON.stringify({_appSettings:s}),level:"Critical"})}setPageUrl(t){this.Rl=t}setAmpUserConsent(t){var e,s;if(!this.isConsentRequired())return;const i=null===(e=t.consentMetadata)||void 0===e?void 0:e.consentStringType,n=t.encodeConsentString||(null===(s=t.consentMetadata)||void 0===s?void 0:s.additionalConsent);let r;if(!(0,C.QM)(n))return void(0,v.FH)({level:"Info",message:"AMP_no_consent_string_provided",callStack:JSON.stringify(t),exception:this.Rl});if(i===t.consentStringTypeEnum.US_PRIVACY_STRING)return void(0,v.FH)({message:"UserConsentApiManager_CCPA_encoded_string_from_amp_not_used",level:"Warn",callStack:n,exception:`${JSON.stringify(t)}__pageURL_${this.Rl}`},{throttle:2,shouldSendMaxLog:!1});const o=pt({tcfEncodedString:n,cmpEncodedString:n});ut(o)?r=new gt(null,null,this._appSettings.cmpIds):dt(o)&&(r=new _(null,null)),r||i===t.consentStringTypeEnum.GLOBAL_PRIVACY_PLATFORM?r?(this.lh=r,this.lh.setInAppConsentData(o)):(0,v.FH)({message:"UserConsentApiManager_amp_userConsentApi_not_found",level:"Warn",callStack:n,exception:`${JSON.stringify(t)}__pageURL__${this.Rl}`},{shouldSendMaxLog:!1,throttle:2}):(0,v.FH)({message:"UserConsentApiManager_encoded_string_not_tcf_and_not_cmp_and_not_gpp",level:"Warn",callStack:n,exception:`${JSON.stringify(t)}__pageURL__${this.Rl}`},{throttle:2,shouldSendMaxLog:!1})}isConsentRequired(){return this.rh}isConsent(t,e=[]){if(this.isConsentRequired()){return this.lh.isConsentForVendor(t)&&this.lh.isConsentForPurposes(e)}return!0}isConsentConnatix(){return this.isConsent("143",ft.m)}isConsentForPersonalisedAds(){return 0!==this.getConsentApiType()&&this.lh.isConsentForPurposes(ft.m)}getConsentDataPayload(){return this.lh.getConsentPayload()}bindToConsentApi(){return this.lh.isApiOnPage()?this.lh.bindToApi():new Promise((t=>{this.oh=setInterval((()=>{const{apiWindow:e,apiLocatorFrame:s}=this.uh(this.lh.apiType);(e||s)&&(clearInterval(this.oh),this.hh(this.lh.apiType),t(this.lh.bindToApi()))}),1e3)}))}getConsentApiFromWindow(){return this.lh.getApiObjectFromWindow()}isConsentApiOnPage(){return this.lh.isApiOnPage()}hasIVTConsent(){return this.lh.hasIvtConsent()}getConsentApiType(){return this.lh.apiType}destroy(){clearInterval(this.oh)}hh(t){const{apiWindow:e,apiLocatorFrame:s}=this.uh(t);this.lh=1===t?new gt(e,s,this._appSettings.cmpIds):new _(e,s)}uh(t){return{apiWindow:rt(this.W,t),apiLocatorFrame:ot(this.W,t)}}ah(t){if(ut(t))return 1;if(dt(t))return 0;if(at(this.W,1))return 1;return at(this.W,0)?0:1}}class vt{constructor(t,e,s){this.Z=t,this.W=e,this.dh=s,this.ph={cnx_userId:30}}getFirstPartyCookie(t){try{const e=t+"=",s=decodeURIComponent(this.W.document.cookie).split(";");for(let t of s){for(;" "===t.charAt(0);)t=t.substring(1);if(t.includes(e))return this.gh(t.substring(e.length,t.length))}}catch(t){}return""}getUserId(){if(!(0,l.kF)(this.dh))return this.Z.userId}syncFirstPartyCookie(t){const e={name:t,value:"",timestamp:BigInt((0,w.XF)(this.ph[t]))};"cnx_userId"===t&&(e.value=this.Z.userId),(0,C.QM)(e.value)&&this.fh(e)}setUserId(t){t&&this.mh({name:"cnx_userId",value:t})}mh({name:t,value:e}){"cnx_userId"===t&&(this.Z.userId=this.gh(e))}fh(t){let e="";const s=this.ph[t.name];if(s){e=`; expires=${new Date((0,w.XF)(s)).toUTCString()}`}this.W.document.cookie=`${t.name}=${t.value}${e}; path=/`}gh(t){return t.split("_")[0]}}class wt{constructor(t){this.Fe=t,this.wh=!0,this.Sh="",this.Ch=!0,this.yh=!1,this._h=[]}get isCcpaApplicable(){return this.wh}get isGppApplicable(){return this.Ch}get gppSid(){return this.Ih}get usPrivacyString(){return this.Sh}get gppString(){return this.bh}get userId(){if((0,C.QM)(this.Je))return this.Je.split("_")[0]}set isCcpaApplicable(t){this.wh=t}set isGppApplicable(t){this.Ch=t}set gppSid(t){this.Ih=t}set usPrivacyString(t){this.Sh=t}set gppString(t){this.bh=t}set userId(t){this.Je=t}static getInstance(t){const e="cnx_player_usr_storage",s=(0,m.pE)(t).topFrame;return s[e]||(s[e]=new wt(s)),s[e]}getScope(){return this.Fe}registerPlsCall(t){return this.yh?(this._h.push(t),()=>{}):this.userId?(t(),()=>{}):(this.yh=!0,t(),()=>{this.yh=!1,this._h.forEach((t=>t())),this._h=[]})}}var St=s(5394),Ct=s(1749);const yt="listenerRegistered",_t="sectionChange";class bt{constructor(t,e){this.Z=t,this.Ah=null,this.Lh(null==e?void 0:e.gppString),this.Vh((0,Ct.af)(null==e?void 0:e.gppSid))}getGppString(){if(this.Z.isGppApplicable)return this.Z.gppString}getGppSid(){if(this.Z.isGppApplicable)return this.Z.gppSid}isGppApplicable(){return this.Z.isGppApplicable}fetchGPPString(){return(0,i.mG)(this,void 0,void 0,(function*(){this.isGppApplicable()&&!this.getGppString()&&(yield this.Eh())}))}setAmpUserConsent(t){var e,s,i,n;if(!this.isGppApplicable())return;const r=null===(e=t.consentMetadata)||void 0===e?void 0:e.consentStringType,o=t.encodeConsentString||(null===(s=t.consentMetadata)||void 0===s?void 0:s.additionalConsent);r===(null===(i=null==t?void 0:t.consentStringTypeEnum)||void 0===i?void 0:i.GLOBAL_PRIVACY_PLATFORM)&&(this.Vh((0,Ct.af)(null===(n=t.consentMetadata)||void 0===n?void 0:n.gppSectionId)),this.Lh(o))}destroy(){const t=this.Uh();t&&this.Ah&&(t("removeEventListener",null,this.Ah),this.Ah=null)}Eh(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,m.Up)((()=>new Promise(((t,e)=>{const s=this.Uh();s&&(s("ping",(e=>{this.getGppString()||(0,v.FH)({level:"Info",message:"GPP_API Found on page",callStack:JSON.stringify(e)},{pacing:5}),"ready"===e.signalStatus&&(this.Lh(e.gppString),this.Vh(e.applicableSections),t())})),this.Ah||s("addEventListener",(t=>this.Nh(t)))),setTimeout((()=>e(Error("Gpp Not found"))),1e3)}))),7)}))}Nh(t){var e;switch(t.eventName){case yt:this.Ah=t.listenerId;break;case _t:this.Lh(`${null===(e=t.pingData)||void 0===e?void 0:e.gppString}`)}}Lh(t){this.Z.gppString=t}Vh(t){this.Z.gppSid=t}Uh(){return this.Z.getScope().__gpp}}const It=[1,3,5,7,8,9,10];class Pt{constructor(t,e,s,i={}){this.al=e,this.Dh=s,this._appSettings=i,this.gdprConsentMode=r.mI.CONSENT_MODE_UNSPECIFIED,this.Oh=new n.x,this.Mh=!1,this.Th=!1,this.Rh={},this.xh=!1,this.Fh=0,this.kh=!1,this.Vn=!1,this.Gh=!1,this.Bh=()=>{!this.$h.isConsentRequired()||this.al?this.jh("consentDataUpdate"):(this.gdprConsentMode=this.$h.isConsentApiOnPage()||this.Dh?r.mI.NO_CONSENT:r.mI.NO_CMP,this.$h.bindToConsentApi().then((()=>{this.gdprConsentMode=r.mI.NO_CONSENT,this.isConsentConnatix()||(this.gdprConsentMode=r.mI.NO_CONNATIX_CONSENT),this.jh("consentDataUpdate")})).catch((t=>{})))},this.Wh=()=>{this.isConsentConnatix()&&this.onEvent(["thirdPartySyncUrlsReceived","consentDataUpdate","ccpaInfoReceived","nonBotDetected","userSetupComplete"]).then((()=>{var t;if(this.isConsentConnatix()&&this.Jh.isSellUserAllowed())try{if((0,C.$K)(this.Hh)&&(0,C.$K)(this.Yh)){const e=this.$h.isConsentRequired(),s=this.$h.getConsentDataPayload(),i=e&&(0,C.QM)(s)?s:null,n=this.Jh.isCcpaApplicable(),r=this.Jh.getUsPrivacyString(),o=n&&(0,C.QM)(r)?r:null;this.Hh.playerSync(this.Yh,{isCcpaApplicable:n,isGdprApplicable:e,gdprConsent:i,usPrivacy:o,gppString:this.getGppString(),gppSid:null===(t=this.getGppSid())||void 0===t?void 0:t.toString()})}}catch(t){const{message:e,stack:s}=(0,m.W$)(t);(0,v.FH)({level:"Warn",message:"UserManager_syncUrls",exception:e,callStack:s})}}))};try{this.$e=t,this.Z=wt.getInstance(t),this.al||(this.qh=new vt(this.Z,t,this._appSettings.publisherExclusionLevel));const{cmp:e,tcf:s,cmpIds:i,gpp:n,usPrivacyString:r,isEu:o}=this._appSettings;this.$h=new mt(o,t,{cmp:e,tcf:s,cmpIds:i}),this.Jh=new S(this.Z,r),this.zh=new bt(this.Z,n),this.Ts()}catch(t){const{message:e,stack:s}=(0,m.W$)(t);(0,v.FH)({callStack:s,exception:e,message:"UserManager_constructor",level:"Critical"})}}get coreSyncResolved(){return this.Oh.asObservable()}get userIdentificationPending(){return this.xh}get coreSyncTimestamp(){return this.Fh}get lotamePanorama(){return this.Kh}get userAudienceIdList(){return this.Qh}get isCoreSyncResolved(){return this.kh}get isIdentityEnhanced(){return this.Vn}get isIvt(){return this.Gh}get syncedPanoIndivId(){return this.Zh}set lotamePanorama(t){this.Kh=t}set userAudienceIdList(t){this.Qh=t}set isIdentityEnhanced(t){this.Vn=t}setApplyUsPrivacyInAllUs(t){this.Th=t}fetchUserIdentification(t,e,s){return(0,i.mG)(this,void 0,void 0,(function*(){this.xh=!0;const{clientAb0:{value:i},clientAb1:{value:n},clientAb2:{value:r},clientAb3:{value:a},clientAb4:{value:h},clientAb5:{value:l},abId:p,part:g}=c.ABService;try{const c=yield u.c.getInstance().load(),f=null==c?void 0:c.UserSync;if(!f)return null;const{publisherExclusionLevel:m,deviceID:v}=this._appSettings,w={implementationType:t,isInApp:this.al,playerBundleNumber:o.g.version,tier:d.n.tier,publisherExclusionLevel:m,pageUrl:s,pageDomain:(0,St.ge)(s),abSettings:{abId:p,part:g},IDFV:this.getForcedIDFV()};this.Hh=new f(this.$e,w);const S={useUserScore:e,deviceId:v,clientAb0:i,clientAb1:n,clientAb2:r,clientAb3:a,clientAb4:h,clientAb5:l};return this.Yh=yield this.Hh.fetchUserSyncData(S),this.kh=!0,this.Oh.next(this.Yh),this.Yh}catch(t){throw t}finally{this.xh=!1,this.Fh=Date.now()}}))}resolveBotEvent(t){this.Gh=t,t||this.jh("nonBotDetected")}resolveUserSetupEvent(){this.jh("userSetupComplete")}setupLotameService(t){return(0,i.mG)(this,void 0,void 0,(function*(){if(!(0,C.$K)(this.Hh)||(0,l.E4)(this._appSettings.publisherExclusionLevel))return;const{outcome:e}=yield this.Hh.setupLotameService(t);3===e&&(0,v.FH)({message:"LotameService_missing_lotamePanoramaId",level:"Info"},{pacing:1})}))}setAmpUserConsent(t){this.$h.setAmpUserConsent(t),this.zh.setAmpUserConsent(t),this.jh("consentDataUpdate")}setPageUrl(t){this.$h&&this.$h.setPageUrl(t)}onEvent(t){const e=t.map((t=>this.Xh(t).promise));return Promise.all(e)}isConsent(t,e){return this.$h.isConsent(t,e)}isConsentConnatix(){return this.$h.isConsentConnatix()}ccpaInfoLogging(t){this.Jh.ccpaInfoLogging(t)}getConsentPayload(){return this.$h.getConsentDataPayload()}getGppString(){var t;return null===(t=this.zh)||void 0===t?void 0:t.getGppString()}getGppSid(){var t;return null===(t=this.zh)||void 0===t?void 0:t.getGppSid()}isConsentRequired(){return this.$h.isConsentRequired()}isPersonalisedAdsAllowed(){return this.isConsentRequired()?this.$h.isConsentForPersonalisedAds():!this.isCcpaApplicable()||this.Jh.isSellUserAllowed()}isConsentLotame(){return this.isConsentRequired()?this.$h.isConsent("95",It):!this.isCcpaApplicable()||this.Jh.isSellUserAllowed()}isConsentForVendorAndConnatix(t){return this.isConsentRequired()?this.isConsent(t)&&this.isConsentConnatix():!this.isCcpaApplicable()||this.Jh.isSellUserAllowed()}setThirdPartySyncUrls(t){this.al||this.Mh||(this.Mh=!0,this.jh("thirdPartySyncUrlsReceived"))}setGeoLocation(t){this.Pl(t),this.Jh.setGeoLocation(t),this.Jh.fetchUsPrivacyString().then((()=>{this.jh("ccpaInfoReceived")})).catch((()=>{this.jh("ccpaInfoReceived")})),this.zh.fetchGPPString().then((()=>{this.jh("gppInfoReceived")})).catch((()=>{this.jh("gppInfoReceived")}))}getUserId(){if(this.isConsentConnatix()&&!(0,l.kF)(this._appSettings.publisherExclusionLevel))return this.al?this.Z.userId:this.qh.getUserId()}setUserId(t,e=!1){(0,l.kF)(this._appSettings.publisherExclusionLevel)||(this.isIdentityEnhanced=e,this.al?this.Gl(t):this.Bl(t))}isGDPR(){return this._appSettings.isEu}getUsPrivacyString(){return this.Jh.getUsPrivacyString()}isCcpaApplicable(){return this.Jh.isCcpaApplicable()}isSellUserAllowed(){return this.Jh.isSellUserAllowed()}isGppApplicable(){return this.zh.isGppApplicable()}getDeviceId(){if(this.isConsentConnatix()&&!(0,l.kF)(this._appSettings.publisherExclusionLevel))return this._appSettings.deviceID}getForcedIDFV(){return this._appSettings.idfv}getPublisherExclusionLevel(){return this._appSettings.publisherExclusionLevel}getTrackableUser(){return this.getUserId()||this.getDeviceId()}getForcedTrackableUser(){if(!(0,l.kF)(this._appSettings.publisherExclusionLevel))return this.jl()||this.Wl()}getGdprConsentApiType(){return this.$h.getConsentApiType()}getConsentApiFromWindow(){if(this.isConsentRequired())return this.$h.getConsentApiFromWindow()}destroy(){this.$h.destroy(),this.zh.destroy()}Ts(){this.Bh(),this.onEvent(["consentDataUpdate"]).then((()=>{setTimeout((()=>{try{if(this.al)return;this.Wh()}catch(t){const{message:e,stack:s}=(0,m.W$)(t);(0,v.FH)({callStack:s,exception:e,message:"UserManager_consent_data_received",level:"Critical"})}}),0)}))}Xh(t){return void 0===this.Rh[t]&&(this.Rh[t]=new h.C,this.Rh[t].promise.catch((()=>this.Rh[t].reject()))),this.Rh[t]}jh(t,e){this.Xh(t).resolve(e)}Pl(t){this.Th||(0,f.d3)(t.subdivisionId,a.ccpaSubdivisions)?this.Z.isCcpaApplicable=!0:this.Z.isCcpaApplicable=!1,this.Z.isGppApplicable=this.Z.isCcpaApplicable||this.isGDPR()}jl(){return this.al?this.Z.userId:this.qh.getUserId()}Gl(t){this.Vn&&(this.Z.userId=t,this.jh("userInfoReceived"))}Bl(t){this.qh.setUserId(t),this.jh("userInfoReceived"),this.jh("userInfoReceived"),this.isConsentConnatix()&&this.qh.syncFirstPartyCookie("cnx_userId")}Wl(){return this._appSettings.deviceID}}},4582:(t,e,s)=>{"use strict";s.d(e,{m:()=>i});const i=[1,2,4,7,8]},8839:(t,e,s)=>{"use strict";s.d(e,{USER_CONSENT_API_MAPPING:()=>i});const i={0:{windowPropertyName:"__cmp",framePropertyName:"__cmpLocator",getVendorConsentDataMethodName:"getVendorConsents",getConsentDataMethodName:"getConsentData"},1:{windowPropertyName:"__tcfapi",framePropertyName:"__tcfapiLocator",getVendorConsentDataMethodName:"getTCData",consentUpdateMethodName:"addEventListener",removeUpdateListenerMethodName:"removeEventListener"}}}}]);
</script>

</body>
</html>
