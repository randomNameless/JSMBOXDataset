<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>js_BKJ0nKG2sjJarquTrjaCcPBBqPigw6-HKGiYHatvs7E.html</title>
</head>
<body>

<script>
/**
 * @file
 * The Lazy-load behavior.
 */

((Drupal) => {
  Drupal.behaviors.lazy = {
    attach(context, settings) {
      const utils = {
        extend(obj, src) {
          Object.keys(src).forEach((key) => {
            obj[key] = src[key];
          });
          return obj;
        },
        once(selector) {
          return (context || document).querySelector(selector);
        },
        loadScript(url) {
          if (document.querySelectorAll(`script[src="${url}"]`).length === 0) {
            const script = document.createElement('script');
            const scripts = document.getElementsByTagName('script')[0];
            script.src = url;
            script.async = true;
            scripts.parentNode.insertBefore(script, scripts);
          }
        },
      };

      if (utils.once('body', context)) {
        const lazysizes = settings.lazy.lazysizes || {};

        if (!settings.lazy.preferNative) {
          // 1. Lazysizes configuration.
          window.lazySizesConfig = window.lazySizesConfig || {};
          window.lazySizesConfig = utils.extend(
            window.lazySizesConfig,
            lazysizes,
          );
          // 2. Load all selected lazysizes plugins.
          if (!Object.entries) {
            Object.entries = (obj) => {
              const ownProps = Object.keys(obj);
              let i = ownProps.length;
              const resArray = new Array(i);
              while (i--) {
                resArray[i] = [ownProps[i], obj[ownProps[i]]];
              }
              return resArray;
            };
          }
          const min = settings.lazy.minified ? '.min' : '';
          Object.entries(lazysizes.plugins).forEach((path) => {
            utils.loadScript(
              `${settings.lazy.libraryPath}/plugins/${path[1]}${min}.js`,
            );
          });
          // 3. Load the lazysizes library.
          utils.loadScript(`${settings.lazy.libraryPath}/lazysizes${min}.js`);
        }
      }
    },
  };
})(Drupal);
;
function docReady(fn) {
    // see if DOM is already available
    if (document.readyState === "complete" || document.readyState === "interactive") {
        // call on next available tick
        setTimeout(fn, 1);
    } else {
        document.addEventListener("DOMContentLoaded", fn);
    }
}

docReady(function() {
    var names = 'open-live-account-btn';
    var elements = document.getElementsByClassName(names);
    var arr = Array.from(elements);
    arr.forEach(function(element, index) {
        if ("undefined" !== typeof (reg_btn_url)) {
            element.href = reg_btn_url;
        }
    });
});
;
function docReady(fn) {
    // see if DOM is already available
    if (document.readyState === "complete" || document.readyState === "interactive") {
        // call on next available tick
        setTimeout(fn, 1);
    } else {
        document.addEventListener("DOMContentLoaded", fn);
    }
}

docReady(function() {
    var names = 'modal-popup';
    var elements = document.getElementsByClassName(names);
    var arr = Array.from(elements);
    var modalWindow = document.getElementById('modalPopup');

    arr.forEach(function(element, index) {
        element.addEventListener("click", function (e) {
           e.preventDefault();
           loadXMLDoc(this.href);

            modalWindow.style.display = "block";
            modalWindow.classList.add("show");

        });
    });

    var modalDialog = document.getElementById ('modal-dialog');
    var closeButton = document.getElementById ('close-modal-button');

    if (modalDialog) {
      document.addEventListener('click', function(event) {
          try {
              var clickInside = modalDialog.contains(event.target);

              if (!clickInside && modalWindow.contains(event.target)
                ||  closeButton.contains(event.target)) {
                  document.getElementById ('myModalLabel').innerHTML = '';
                  document.getElementById ('myModalBody').innerHTML = "Loading...";

                  modalWindow.style.display = "none";
                  modalWindow.classList.remove("show");
              }
          } catch (err) {
              console.log("fxtm popup requires #myModalLabel and #myModalBody elements");
          }
      });
    }

});

/**
 *
 * @param url
 */
function loadXMLDoc(url) {

    var http = new XMLHttpRequest();

    http.onreadystatechange = function() {
        if (http.readyState == XMLHttpRequest.DONE) {
            if (http.status == 200) {
                try {
                    var el = document.createElement( 'html' );
                    el.innerHTML = http.responseText;
                    //we need to get title
                    let titles = el.getElementsByTagName( 'title');
                    let titlesArray = Array.from(titles);
                    let title = titlesArray[0].innerText.split(' | FXTM')[0];

                    let articles = el.getElementsByTagName( 'article');
                    let articlesArray = Array.from(articles);
                    let article = articlesArray[0];

                    document.getElementById ('myModalLabel').innerHTML = title;
                    document.getElementById ('myModalBody').innerHTML = article.innerHTML;
                } catch (err) {
                    console.log("fxtm popup requires <title> element on the page, and also #myModalLabel #myModalBody elements");
                }
            }
            else {
                alert('An error occurred.');
            }
        }
    };

    http.open("GET", url, true);
    http.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    http.send();
}
;

</script>

</body>
</html>
