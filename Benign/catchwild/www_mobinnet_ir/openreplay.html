<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openreplay.html</title>
</head>
<body>

<script>
!function(){"use strict";function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,s){return[12,t,e,s]}function i(t,e){return[13,t,e]}function j(t,e){return[19,t,e]}function n(t,e,s){return[25,t,e,s]}function P(t,e,s,n,i,r,o,a){return[53,t,e,s,n,i,r,o,a]}function h(t,e,s,n){return[60,t,e,s,n]}function U(t,e){return[63,t,e]}function z(t,e){return[70,t,e]}function B(t,e,s){return[71,t,e,s]}function O(t,e,s,n){return[73,t,e,s,n]}function H(t,e){return[75,t,e]}function W(t,e){return[76,t,e]}const F={htmlmasked:"hidden",masked:"obscured"},_=!("undefined"==typeof window),$=_&&navigator.userAgent.match(/firefox|fxios/i),K=_&&performance.timing.navigationStart||performance.timeOrigin,u=_&&performance.now()&&K?()=>Math.round(performance.now()+K):()=>Date.now(),s="repeat"in String.prototype?t=>"*".repeat(t.length):t=>t.replace(/./g,"*");function V(t){return t.trim().replace(/\s+/g," ")}function J(t){return t.startsWith("https://")||t.startsWith("http://")}const D="https://docs.openreplay.com",q={};function C(t,e,s="/"){q[t]||(console.warn(`OpenReplay: ${t} is deprecated. ${e?`Please, use ${e} instead.`:""} Visit ${D}${s} for more information.`),q[t]=!0)}function d(t){let e=t.getAttribute("data-openreplay-label");return null!==e||null!==(e=t.getAttribute("data-asayer-label"))&&C('"data-asayer-label" attribute','"data-openreplay-label" attribute',"/"),e}function o(t,e){var s="data-openreplay-"+e;return t.hasAttribute(s)&&(F[e]&&C(`"${s}" attribute`,`"${F[e]}" attribute`,"/installation/sanitize-data"),1)}class G{constructor(t){this.node_id=t,this.nodes=[],this.nodeCallbacks=[],this.elementListeners=new Map}attachNodeCallback(t){this.nodeCallbacks.push(t)}attachNodeListener(e,s,n){var i=this.getID(e);if(void 0!==i){e.addEventListener(s,n);let t=this.elementListeners.get(i);void 0===t&&(t=[],this.elementListeners.set(i,t)),t.push([s,n])}}registerNode(t){let e=t[this.node_id];var s=void 0===e;return s&&(e=this.nodes.length,(this.nodes[e]=t)[this.node_id]=e),[e,s]}unregisterNode(e){var t=e[this.node_id];if(void 0!==t){delete e[this.node_id],delete this.nodes[t];const s=this.elementListeners.get(t);void 0!==s&&(this.elementListeners.delete(t),s.forEach(t=>e.removeEventListener(t[0],t[1])))}return t}cleanTree(){for(let t=0;t<this.nodes.length;t++){var e=this.nodes[t];e&&!document.contains(e)&&this.unregisterNode(e)}}callNodeCallbacks(e,s){this.nodeCallbacks.forEach(t=>t(e,s))}getID(t){return t[this.node_id]}getNode(t){return this.nodes[t]}clear(){for(let t=0;t<this.nodes.length;t++){var e=this.nodes[t];void 0!==e&&this.unregisterNode(e)}this.nodes.length=0}}function p(t){return"http://www.w3.org/2000/svg"===t.namespaceURI}function f(t){return t.nodeType===Node.ELEMENT_NODE}function m(t){return t.nodeType===Node.TEXT_NODE}function g(t){return t.nodeType===Node.DOCUMENT_NODE}function v(t){return t.nodeType===Node.DOCUMENT_NODE||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function R(t,e){return t.nodeName===e}function r(t){if(!m(t)){if(!f(t))return 1;var e=t.tagName.toUpperCase();if("LINK"!==e)return"SCRIPT"===e||"NOSCRIPT"===e||"META"===e||"TITLE"===e||"BASE"===e;{const s=t.getAttribute("rel");e=t.getAttribute("as");return!(null!==s&&void 0!==s&&s.includes("stylesheet")||"style"===e||"font"===e)}}}function a(t){return v(t)||!r(t)}var b,y,S,t;(t=b=b||{})[t.New=0]="New",t[t.Removed=1]="Removed",t[t.Changed=2]="Changed";class e{constructor(t,e=!1){this.app=t,this.isTopContext=e,this.commited=[],this.recents=new Map,this.indexes=[],this.attributesMap=new Map,this.textSet=new Set,this.observer=new MutationObserver(this.app.safe(t=>{for(const i of t){var e=i.target,s=i.type;if(a(e))if("childList"===s){for(let t=0;t<i.removedNodes.length;t++)a(i.removedNodes[t])&&this.bindNode(i.removedNodes[t]);for(let t=0;t<i.addedNodes.length;t++)this.bindTree(i.addedNodes[t])}else{e=this.app.nodes.getID(e);if(void 0!==e)if(this.recents.has(e)||this.recents.set(e,b.Changed),"attributes"===s){var n=i.attributeName;if(null===n)continue;let t=this.attributesMap.get(e);void 0===t&&this.attributesMap.set(e,t=new Set),t.add(n)}else"characterData"===s&&this.textSet.add(e)}}this.commitNodes()}))}clear(){this.commited.length=0,this.recents.clear(),this.indexes.length=1,this.attributesMap.clear(),this.textSet.clear()}sendNodeAttribute(t,e,s,n){if(p(e))return"xlink:"===s.substr(0,6)&&(s=s.substr(6)),void(null===n?this.app.send(i(t,s)):"href"===s?(1e5<n.length&&(n=""),this.app.send(h(t,s,n,this.app.getBaseHref()))):this.app.send(c(t,s,n)));"src"===s||"srcset"===s||"integrity"===s||"crossorigin"===s||"autocomplete"===s||"on"===s.substr(0,2)||"value"===s&&R(e,"INPUT")&&"button"!==e.type&&"reset"!==e.type&&"submit"!==e.type||(null===n?this.app.send(i(t,s)):"style"===s||"href"===s&&R(e,"LINK")?this.app.send(h(t,s,n,this.app.getBaseHref())):(("href"===s||1e5<n.length)&&(n=""),this.app.send(c(t,s,n))))}sendNodeData(t,e,s){R(e,"STYLE")||R(e,"style")?this.app.send([61,t,s,this.app.getBaseHref()]):(s=this.app.sanitizer.sanitize(t,s),this.app.send([14,t,s]))}bindNode(t){var[t,e]=this.app.nodes.registerNode(t);e?this.recents.set(t,b.New):this.recents.get(t)!==b.New&&this.recents.set(t,b.Removed)}bindTree(t){if(a(t)){this.bindNode(t);const e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:t=>r(t)||void 0!==this.app.nodes.getID(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},!1);for(;e.nextNode();)this.bindNode(e.currentNode)}}unbindTree(t){var e=this.app.nodes.unregisterNode(t);if(void 0!==e&&this.recents.get(e)===b.Removed){this.app.send([11,e]);const s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT+NodeFilter.SHOW_TEXT,{acceptNode:t=>r(t)||void 0===this.app.nodes.getID(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},!1);for(;s.nextNode();)this.app.nodes.unregisterNode(s.currentNode)}}_commitNode(s,t){if(v(t))return!0;var e=t.parentNode;let n;if(!R(t,"HTML")||!this.isTopContext){if(null===e)return this.unbindTree(t),!1;if(void 0===(n=this.app.nodes.getID(e)))return this.unbindTree(t),!1;if(!this.commitNode(n))return this.unbindTree(t),!1;if(this.app.sanitizer.handleNode(s,n,t),this.app.sanitizer.isHidden(n))return!1}let i=t.previousSibling;for(;null!==i;){var r=this.app.nodes.getID(i);if(void 0!==r){this.commitNode(r),this.indexes[s]=this.indexes[r]+1;break}i=i.previousSibling}null===i&&(this.indexes[s]=0);var o,a=this.recents.get(s),c=a===b.New,h=this.indexes[s];if(void 0===h)throw"commitNode: missing node index";if(c){if(f(t)){let e=t;void 0!==n&&(this.app.sanitizer.isHidden(s)&&(c=e.clientWidth,o=e.clientHeight,(e=t.cloneNode()).style.width=c+"px",e.style.height=o+"px"),this.app.send([8,s,n,h,e.tagName,p(t)]));for(let t=0;t<e.attributes.length;t++){const u=e.attributes[t];this.sendNodeAttribute(s,e,u.nodeName,u.value)}}else m(t)&&(this.app.send([9,s,n,h]),this.sendNodeData(s,e,t.data));return!0}a===b.Removed&&void 0!==n&&this.app.send([10,s,n,h]);const u=this.attributesMap.get(s);if(void 0!==u){if(!f(t))throw"commitNode: node is not an element";for(const l of u)this.sendNodeAttribute(s,t,l,t.getAttribute(l))}if(this.textSet.has(s)){if(!m(t))throw"commitNode: node is not a text";this.sendNodeData(s,e,t.data)}return!0}commitNode(t){var e=this.app.nodes.getNode(t);if(void 0===e)return!1;var s=this.commited[t];return void 0!==s?s:this.commited[t]=this._commitNode(t,e)}commitNodes(s=!1){let n;this.recents.forEach((t,e)=>{this.commitNode(e),t===b.New&&(n=this.app.nodes.getNode(e))&&this.app.nodes.callNodeCallbacks(n,s)}),this.clear()}observeRoot(t,e,s=t){this.observer.observe(t,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),this.bindTree(s),e(this.app.nodes.getID(t)),this.commitNodes(!0)}disconnect(){this.observer.disconnect(),this.clear()}}class X extends e{observe(t){var e=t.contentDocument;const s=this.app.nodes.getID(t);e&&void 0!==s&&this.observeRoot(e,t=>{void 0===t?console.log("OpenReplay: Iframe document not bound"):this.app.send(z(s,t))})}}class Y extends e{observe(t){var e=t.shadowRoot;const s=this.app.nodes.getID(t);e&&void 0!==s&&this.observeRoot(e,t=>{void 0===t?console.log("OpenReplay: Shadow Root was not bound"):this.app.send(z(s,t))})}}class Q{constructor(){this.states=new Map}calcOffset(t){let e=0,s=0;if(t.parent&&([e,s]=this.calcOffset(t.parent)),!t.offset){const{left:n,top:i}=t.iFrame.getBoundingClientRect();t.offset=[n,i]}const[n,i]=t.offset;return[e+n,s+i]}getDocumentOffset(t){t=this.states.get(t);return t?this.calcOffset(t):[0,0]}observe(t){var e=t.contentDocument;if(!e)return;const s=t.ownerDocument,n={offset:null,iFrame:t,parent:this.states.get(s)||null,clear:()=>{var t;s.removeEventListener("scroll",i),null!=(t=s.defaultView)&&t.removeEventListener("resize",i)}},i=()=>{n.offset=null};s.addEventListener("scroll",i),null!=(t=s.defaultView)&&t.addEventListener("resize",i),this.states.set(e,n)}clear(){this.states.forEach(t=>t.clear()),this.states.clear()}}const Z=_?Element.prototype.attachShadow:()=>new ShadowRoot;class tt extends e{constructor(t,e){super(t,!0),this.iframeOffsets=new Q,this.contextCallbacks=[],this.contextsSet=new Set,this.iframeObservers=[],this.shadowRootObservers=[],this.options=Object.assign({captureIFrames:!0},e),this.app.nodes.attachNodeCallback(t=>{R(t,"IFRAME")&&(this.options.captureIFrames&&!o(t,"obscured")||o(t,"capture"))&&this.handleIframe(t)}),this.app.nodes.attachNodeCallback(t=>{f(t)&&null!==t.shadowRoot&&this.handleShadowRoot(t.shadowRoot)})}attachContextCallback(t){this.contextCallbacks.push(t)}getDocumentOffset(t){return this.iframeOffsets.getDocumentOffset(t)}handleIframe(n){let i=null;const t=this.app.safe(()=>setTimeout(()=>{var t=this.app.nodes.getID(n);if(void 0!==t){const e=n.contentWindow;t=n.contentDocument;if(t&&t!==i){const s=new X(this.app);this.iframeObservers.push(s),s.observe(n),i=t,this.iframeOffsets.observe(n)}e&&e===e.window&&!this.contextsSet.has(e)&&(this.contextsSet.add(e),this.contextCallbacks.forEach(t=>t(e)))}},0));n.addEventListener("load",t),t()}handleShadowRoot(t){const e=new Y(this.app);this.shadowRootObservers.push(e),e.observe(t.host)}observe(){const e=this;Element.prototype.attachShadow=function(){var t=Z.apply(this,arguments);return e.handleShadowRoot(t),t},this.observeRoot(window.document,()=>{this.app.send([7])},window.document.documentElement)}disconnect(){this.iframeOffsets.clear(),Element.prototype.attachShadow=Z,this.iframeObservers.forEach(t=>t.disconnect()),this.iframeObservers=[],this.shadowRootObservers.forEach(t=>t.disconnect()),this.shadowRootObservers=[],super.disconnect()}}(t=y=y||{})[t.Plain=0]="Plain",t[t.Obscured=1]="Obscured",t[t.Hidden=2]="Hidden";class et{constructor(t,e){this.app=t,this.obscured=new Set,this.hidden=new Set,this.options=Object.assign({obscureTextEmails:!0,obscureTextNumbers:!1},e)}handleNode(t,e,s){(this.obscured.has(e)||f(s)&&(o(s,"masked")||o(s,"obscured")))&&this.obscured.add(t),(this.hidden.has(e)||f(s)&&(o(s,"htmlmasked")||o(s,"hidden")))&&this.hidden.add(t),void 0!==this.options.domSanitizer&&f(s)&&((e=this.options.domSanitizer(s))===y.Obscured&&this.obscured.add(t),e===y.Hidden&&this.hidden.add(t))}sanitize(t,e){return this.obscured.has(t)?e.trim().replace(/[^\f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/g,"â–ˆ"):(this.options.obscureTextNumbers&&(e=e.replace(/\d/g,"0")),this.options.obscureTextEmails?e.replace(/([^\s]+)@([^\s]+)\.([^\s]+)/g,(...t)=>s(t[1])+"@"+s(t[2])+"."+s(t[3])):e)}isObscured(t){return this.obscured.has(t)}isHidden(t){return this.hidden.has(t)}getInnerTextSecure(t){var e=this.app.nodes.getID(t);return e?this.sanitize(e,t.innerText):""}clear(){this.obscured.clear(),this.hidden.clear()}}class st{constructor(t){this.app=t,this.timer=null,this.callbacks=[]}attach(t,e=0,s=!0,n){n&&(t=t.bind(n)),s&&(t=this.app.safe(t)),this.callbacks.unshift(e?function(t,e){let s=0;return()=>{s++>=e&&(s=0,t())}}(t,e):t)}start(){null===this.timer&&(this.timer=setInterval(()=>this.callbacks.forEach(t=>{t&&t()}),30))}stop(){null!==this.timer&&(clearInterval(this.timer),this.timer=null)}}const w={Verbose:5,Log:4,Warnings:3,Errors:2,Silent:0};function N(t){return"object"==typeof t}class nt{constructor(t=w.Silent){this.options=!0===t?{level:w.Verbose}:"number"==typeof t?{level:t}:t}log(...t){(N(this.options.level)?this.options.level.log:this.options.level>=w.Log)&&console.log(...t)}warn(...t){(N(this.options.level)?this.options.level.warn:this.options.level>=w.Warnings)&&console.warn(...t)}error(...t){(N(this.options.level)?this.options.level.error:this.options.level>=w.Errors)&&console.error(...t)}}class it{constructor(t,e){this.app=t,this.options=e,this.metadata={},this.userID=null,this.callbacks=[],this.timestamp=0}attachUpdateCallback(t){this.callbacks.push(t)}handleUpdate(e){null==e.userID&&delete e.userID,null==e.sessionID&&delete e.sessionID,this.callbacks.forEach(t=>t(e))}update(t){void 0!==t.userID&&(this.userID=t.userID),void 0!==t.metadata&&Object.entries(t.metadata).forEach(([t,e])=>this.metadata[t]=e),void 0!==t.sessionID&&(this.sessionID=t.sessionID),void 0!==t.timestamp&&(this.timestamp=t.timestamp),void 0!==t.projectID&&(this.projectID=t.projectID),this.handleUpdate(t)}setMetadata(t,e){this.metadata[t]=e,this.handleUpdate({metadata:{[t]:e}})}setUserID(t){this.userID=t,this.handleUpdate({userID:t})}getPageNumber(){var t=this.app.sessionStorage.getItem(this.options.session_pageno_key);if(null!=t)return parseInt(t)}incPageNo(){let t=this.getPageNumber();return void 0===t?t=0:t++,this.app.sessionStorage.setItem(this.options.session_pageno_key,t.toString()),t}getSessionToken(){return this.app.sessionStorage.getItem(this.options.session_token_key)||void 0}setSessionToken(t){this.app.sessionStorage.setItem(this.options.session_token_key,t)}applySessionHash(t){var e=decodeURI(t).split("&");let s=t,n="100500";2==e.length&&([n,s]=e),n&&s&&(this.app.sessionStorage.setItem(this.options.session_token_key,s),this.app.sessionStorage.setItem(this.options.session_pageno_key,n))}getSessionHash(){var t=this.getPageNumber(),e=this.getSessionToken();if(void 0!==t&&void 0!==e)return encodeURI(String(t)+"&"+e)}getInfo(){return{sessionID:this.sessionID,metadata:this.metadata,userID:this.userID,timestamp:this.timestamp,projectID:this.projectID}}reset(){this.app.sessionStorage.removeItem(this.options.session_token_key),this.metadata={},this.userID=null,this.sessionID=void 0,this.timestamp=0}}const L=_&&"performance"in window&&"memory"in performance?performance:{memory:{}},rt=_?1024*(navigator.deviceMemory||0):0,ot=L.memory.jsHeapSizeLimit||0;const k="canceled",E=t=>({reason:t,success:!1}),at=((t=S=S||{})[t.NotActive=0]="NotActive",t[t.Starting=1]="Starting",t[t.Active=2]="Active","https://api.openreplay.com/ingest");class ct{constructor(t,e,s){this.messages=[],this.startCallbacks=[],this.stopCallbacks=[],this.commitCallbacks=[],this.activityState=S.NotActive,this.version="4.0.1",this.projectKey=t,this.options=Object.assign({revID:"",node_id:"__openreplay_id",session_token_key:"__openreplay_token",session_pageno_key:"__openreplay_pageno",session_reset_key:"__openreplay_reset",local_uuid_key:"__openreplay_uuid",ingestPoint:at,resourceBaseHref:null,verbose:!1,__is_snippet:!1,__debug_report_edp:null,localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage},s),this.revID=this.options.revID,this.sanitizer=new et(this,s),this.nodes=new G(this.options.node_id),this.observer=new tt(this,s),this.ticker=new st(this),this.ticker.attach(()=>this.commit()),this.debug=new nt(this.options.__debug__),this.notify=new nt(this.options.verbose?w.Warnings:w.Silent),this.localStorage=this.options.localStorage||window.localStorage,this.sessionStorage=this.options.sessionStorage||window.sessionStorage,this.session=new it(this,this.options),this.session.attachUpdateCallback(({userID:t,metadata:e})=>{null!=t&&this.send([28,t]),null!=e&&Object.entries(e).forEach(([t,e])=>this.send([30,t,e]))}),null!=e&&this.session.applySessionHash(e);try{this.worker=new Worker(URL.createObjectURL(new Blob(['"use strict";class t{constructor(t,i,s,e=10,n=1e3){this.onUnauthorised=i,this.onFailure=s,this.MAX_ATTEMPTS_COUNT=e,this.ATTEMPT_TIMEOUT=n,this.attemptsCount=0,this.busy=!1,this.queue=[],this.token=null,this.ingestURL=t+"/v1/web/i"}authorise(t){this.token=t}push(t){this.busy||!this.token?this.queue.push(t):this.sendBatch(t)}retry(t){this.attemptsCount>=this.MAX_ATTEMPTS_COUNT?this.onFailure():(this.attemptsCount++,setTimeout(()=>this.sendBatch(t),this.ATTEMPT_TIMEOUT*this.attemptsCount))}sendBatch(t){this.busy=!0,fetch(this.ingestURL,{body:t,method:"POST",headers:{Authorization:"Bearer "+this.token},keepalive:t.length<65536}).then(i=>{if(401===i.status)return this.busy=!1,void this.onUnauthorised();if(i.status>=400)return void this.retry(t);this.attemptsCount=0;const s=this.queue.shift();s?this.sendBatch(s):this.busy=!1}).catch(i=>{console.warn("OpenReplay:",i),this.retry(t)})}clean(){this.queue.length=0}}const i="function"==typeof TextEncoder?new TextEncoder:{encode(t){const i=t.length,s=new Uint8Array(3*i);let e=-1;for(let n=0,r=0,h=0;h!==i;){if(n=t.charCodeAt(h),h+=1,n>=55296&&n<=56319){if(h===i){s[e+=1]=239,s[e+=1]=191,s[e+=1]=189;break}if(r=t.charCodeAt(h),!(r>=56320&&r<=57343)){s[e+=1]=239,s[e+=1]=191,s[e+=1]=189;continue}if(n=1024*(n-55296)+r-56320+65536,h+=1,n>65535){s[e+=1]=240|n>>>18,s[e+=1]=128|n>>>12&63,s[e+=1]=128|n>>>6&63,s[e+=1]=128|63&n;continue}}n<=127?s[e+=1]=0|n:n<=2047?(s[e+=1]=192|n>>>6,s[e+=1]=128|63&n):(s[e+=1]=224|n>>>12,s[e+=1]=128|n>>>6&63,s[e+=1]=128|63&n)}return s.subarray(0,e+1)}};class s extends class{constructor(t){this.size=t,this.offset=0,this.checkpointOffset=0,this.data=new Uint8Array(t)}getCurrentOffset(){return this.offset}checkpoint(){this.checkpointOffset=this.offset}isEmpty(){return 0===this.offset}skip(t){return this.offset+=t,this.offset<=this.size}set(t,i){this.data.set(t,i)}boolean(t){return this.data[this.offset++]=+t,this.offset<=this.size}uint(t){for((t<0||t>Number.MAX_SAFE_INTEGER)&&(t=0);t>=128;)this.data[this.offset++]=t%256|128,t=Math.floor(t/128);return this.data[this.offset++]=t,this.offset<=this.size}int(t){return t=Math.round(t),this.uint(t>=0?2*t:-2*t-1)}string(t){const s=i.encode(t),e=s.byteLength;return!(!this.uint(e)||this.offset+e>this.size)&&(this.data.set(s,this.offset),this.offset+=e,!0)}reset(){this.offset=0,this.checkpointOffset=0}flush(){const t=this.data.slice(0,this.checkpointOffset);return this.reset(),t}}{encode(t){switch(t[0]){case 81:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.int(t[4])&&this.string(t[5]);case 82:return this.uint(t[1])&&this.uint(t[2]);case 0:return this.uint(t[1]);case 4:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3]);case 5:return this.uint(t[1])&&this.uint(t[2]);case 6:return this.int(t[1])&&this.int(t[2]);case 7:return!0;case 8:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.string(t[4])&&this.boolean(t[5]);case 9:case 10:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3]);case 11:return this.uint(t[1]);case 12:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3]);case 13:case 14:return this.uint(t[1])&&this.string(t[2]);case 16:return this.uint(t[1])&&this.int(t[2])&&this.int(t[3]);case 17:return this.uint(t[1])&&this.string(t[2]);case 18:return this.uint(t[1])&&this.string(t[2])&&this.int(t[3]);case 19:return this.uint(t[1])&&this.boolean(t[2]);case 20:return this.uint(t[1])&&this.uint(t[2]);case 22:return this.string(t[1])&&this.string(t[2]);case 23:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7])&&this.uint(t[8])&&this.uint(t[9]);case 24:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3]);case 25:return this.string(t[1])&&this.string(t[2])&&this.string(t[3]);case 27:return this.string(t[1])&&this.string(t[2]);case 28:case 29:return this.string(t[1]);case 30:return this.string(t[1])&&this.string(t[2]);case 37:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3]);case 38:return this.uint(t[1])&&this.uint(t[2]);case 39:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.uint(t[7]);case 40:return this.string(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 41:return this.string(t[1])&&this.string(t[2]);case 42:return this.string(t[1]);case 44:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3]);case 45:case 46:return this.string(t[1])&&this.string(t[2]);case 47:return this.string(t[1])&&this.string(t[2])&&this.uint(t[3]);case 48:return this.string(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 49:return this.int(t[1])&&this.int(t[2])&&this.uint(t[3])&&this.uint(t[4]);case 53:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.uint(t[5])&&this.uint(t[6])&&this.string(t[7])&&this.string(t[8]);case 54:return this.uint(t[1])&&this.string(t[2]);case 55:return this.boolean(t[1]);case 59:return this.uint(t[1])&&this.uint(t[2])&&this.uint(t[3])&&this.uint(t[4])&&this.string(t[5])&&this.string(t[6])&&this.string(t[7]);case 60:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3])&&this.string(t[4]);case 61:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3]);case 63:case 64:return this.string(t[1])&&this.string(t[2]);case 67:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 69:return this.uint(t[1])&&this.uint(t[2])&&this.string(t[3])&&this.string(t[4]);case 70:return this.uint(t[1])&&this.uint(t[2]);case 71:return this.uint(t[1])&&this.string(t[2])&&this.string(t[3]);case 73:return this.uint(t[1])&&this.string(t[2])&&this.uint(t[3])&&this.string(t[4]);case 75:case 76:case 77:return this.uint(t[1])&&this.uint(t[2]);case 79:return this.string(t[1])&&this.string(t[2])}}}class e{constructor(t,i,e,n){this.pageNo=t,this.timestamp=i,this.url=e,this.onBatch=n,this.nextIndex=0,this.beaconSize=2e5,this.encoder=new s(this.beaconSize),this.sizeBuffer=new Uint8Array(3),this.isEmpty=!0,this.beaconSizeLimit=1e6,this.prepare()}writeType(t){return this.encoder.uint(t[0])}writeFields(t){return this.encoder.encode(t)}writeSizeAt(t,i){for(let i=0;i<3;i++)this.sizeBuffer[i]=t>>8*i;this.encoder.set(this.sizeBuffer,i)}prepare(){if(!this.encoder.isEmpty())return;const t=[81,1,this.pageNo,this.nextIndex,this.timestamp,this.url];this.writeType(t),this.writeFields(t),this.isEmpty=!0}writeWithSize(t){const i=this.encoder;if(!this.writeType(t)||!i.skip(3))return!1;const s=i.getCurrentOffset(),e=this.writeFields(t);if(e){const e=i.getCurrentOffset()-s;if(e>16777215)return console.warn("OpenReplay: max message size overflow."),!1;this.writeSizeAt(e,s-3),i.checkpoint(),this.isEmpty=this.isEmpty&&0===t[0],this.nextIndex++}return e}setBeaconSizeLimit(t){this.beaconSizeLimit=t}writeMessage(t){if(0===t[0]&&(this.timestamp=t[1]),4===t[0]&&(this.url=t[1]),!this.writeWithSize(t))for(this.finaliseBatch();!this.writeWithSize(t);){if(this.beaconSize===this.beaconSizeLimit)return console.warn("OpenReplay: beacon size overflow. Skipping large message.",t,this),this.encoder.reset(),void this.prepare();this.beaconSize=Math.min(2*this.beaconSize,this.beaconSizeLimit),this.encoder=new s(this.beaconSize),this.prepare()}}finaliseBatch(){this.isEmpty||(this.onBatch(this.encoder.flush()),this.prepare())}clean(){this.encoder.reset()}}var n;!function(t){t[t.NotActive=0]="NotActive",t[t.Starting=1]="Starting",t[t.Stopping=2]="Stopping",t[t.Active=3]="Active"}(n||(n={}));let r=null,h=null;function u(){h&&h.finaliseBatch()}function a(){n.Stopping,null!==f&&(clearInterval(f),f=null),h&&(h.clean(),h=null),r&&(r.clean(),r=null),n.NotActive}function o(){self.postMessage("restart"),a()}n.NotActive;let c,f=null;self.onmessage=({data:i})=>{if(null!=i){if("stop"===i)return u(),void a();if(Array.isArray(i)){if(!h)throw new Error("WebWorker: writer not initialised. Service Should be Started.");const t=h;i.forEach(i=>{55===i[0]&&(i[1]?c=setTimeout(()=>o(),18e5):clearTimeout(c)),t.writeMessage(i)})}else{if("start"===i.type)return n.Starting,r=new t(i.ingestPoint,()=>{o()},()=>{self.postMessage("failed"),a()},i.connAttemptCount,i.connAttemptGap),h=new e(i.pageNo,i.timestamp,i.url,t=>r&&r.push(t)),null===f&&(f=setInterval(u,1e4)),n.Active;if("auth"===i.type){if(!r)throw new Error("WebWorker: sender not initialised. Received auth.");if(!h)throw new Error("WebWorker: writer not initialised. Received auth.");return r.authorise(i.token),void(i.beaconSizeLimit&&h.setBeaconSizeLimit(i.beaconSizeLimit))}}}else u()};'],{type:"text/javascript"}))),this.worker.onerror=t=>{this._debug("webworker_error",t)},this.worker.onmessage=({data:t})=>{"failed"===t?(this.stop(!1),this._debug("worker_failed",{})):"restart"===t&&(this.stop(!1),this.start({forceNew:!0}))};var n=()=>{this.worker&&this.worker.postMessage(null)};this.attachEventListener(window,"beforeunload",n,!1),this.attachEventListener(document.body,"mouseleave",n,!1,!1),this.attachEventListener(document,"visibilitychange",n,!1)}catch(t){this._debug("worker_start",t)}}_debug(t,e){null!==this.options.__debug_report_edp&&fetch(this.options.__debug_report_edp,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:t,error:""+e})}),this.debug.error("OpenReplay error: ",t,e)}send(t,e=!1){this.activityState!==S.NotActive&&(this.messages.push(t),this.activityState===S.Active&&e&&this.commit())}commit(){this.worker&&this.messages.length&&(this.messages.unshift([0,u()]),this.worker.postMessage(this.messages),this.commitCallbacks.forEach(t=>t(this.messages)),this.messages.length=0)}safe(e){const s=this;return function(...t){try{e.apply(this,t)}catch(t){s._debug("safe_fn_call",t)}}}attachCommitCallback(t){this.commitCallbacks.push(t)}attachStartCallback(t,e=!1){e&&(t=this.safe(t)),this.startCallbacks.push(t)}attachStopCallback(t,e=!1){e&&(t=this.safe(t)),this.stopCallbacks.push(t)}attachEventListener(t,e,s,n=!0,i=!0){n&&(s=this.safe(s)),this.attachStartCallback(()=>t.addEventListener(e,s,i),n),this.attachStopCallback(()=>t.removeEventListener(e,s,i),n)}checkRequiredVersion(t){var e=t.split(/[.-]/),s=this.version.split(/[.-]/);for(let t=0;t<3;t++){if(isNaN(Number(s[t]))||isNaN(Number(e[t])))return!1;if(Number(s[t])>Number(e[t]))return!0;if(Number(s[t])<Number(e[t]))return!1}return!0}getTrackerInfo(){return{userUUID:this.localStorage.getItem(this.options.local_uuid_key),projectKey:this.projectKey,revID:this.revID,trackerVersion:this.version,isSnippet:this.options.__is_snippet}}getSessionInfo(){return Object.assign(Object.assign({},this.session.getInfo()),this.getTrackerInfo())}getSessionToken(){return this.session.getSessionToken()}getSessionID(){return this.session.getInfo().sessionID||void 0}getSessionURL(){var{projectID:t,sessionID:e}=this.session.getInfo();if(t&&e)return this.options.ingestPoint.replace(/ingest$/,t+"/session/"+e);this.debug.error("OpenReplay error: Unable to build session URL")}getHost(){return new URL(this.options.ingestPoint).hostname}getProjectKey(){return this.projectKey}getBaseHref(){var t;return"string"==typeof this.options.resourceBaseHref?this.options.resourceBaseHref:(this.options.resourceBaseHref,document.baseURI||(null==(t=null==(t=document.head)?void 0:t.getElementsByTagName("base")[0])?void 0:t.getAttribute("href"))||location.origin+location.pathname)}resolveResourceURL(t){const e=new URL(this.getBaseHref());return e.pathname+="/"+new URL(t).pathname,e.pathname.replace(/\/+/g,"/"),e.toString()}isServiceURL(t){return t.startsWith(this.options.ingestPoint)}active(){return this.activityState===S.Active}resetNextPageSession(t){t?this.sessionStorage.setItem(this.options.session_reset_key,"t"):this.sessionStorage.removeItem(this.options.session_reset_key)}_start(t){if(!this.worker)return Promise.resolve(E("No worker found: perhaps, CSP is not set."));if(this.activityState!==S.NotActive)return Promise.resolve(E("OpenReplay: trying to call `start()` on the instance that has been started already."));this.activityState=S.Starting,t.sessionHash&&this.session.applySessionHash(t.sessionHash);const c=u();var e={type:"start",pageNo:this.session.incPageNo(),ingestPoint:this.options.ingestPoint,timestamp:c,url:document.URL,connAttemptCount:this.options.connAttemptCount,connAttemptGap:this.options.connAttemptGap},e=(this.worker.postMessage(e),this.session.update({metadata:t.metadata||this.session.getInfo().metadata,userID:t.userID}),this.sessionStorage.getItem(this.options.session_reset_key)),t=(this.sessionStorage.removeItem(this.options.session_reset_key),t.forceNew||null!==e);return window.fetch(this.options.ingestPoint+"/v1/web/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign(Object.assign({},this.getTrackerInfo()),{timestamp:c,userID:this.session.getInfo().userID,token:t?void 0:this.session.getSessionToken(),deviceMemory:rt,jsHeapSizeLimit:ot}))}).then(e=>200===e.status?e.json():e.text().then(t=>t===k?Promise.reject(k):Promise.reject(`Server error: ${e.status}. `+t))).then(t=>{if(!this.worker)return Promise.reject("no worker found after start request (this might not happen)");if(this.activityState===S.NotActive)return Promise.reject("Tracker stopped during authorisation");var{token:e,userUUID:s,sessionID:n,projectID:i,beaconSizeLimit:r,startTimestamp:o}=t;if("string"!=typeof e||"string"!=typeof s||"number"!=typeof r&&void 0!==r)return Promise.reject("Incorrect server response: "+JSON.stringify(t));n!==this.session.getInfo().sessionID&&this.session.reset(),this.session.setSessionToken(e),this.session.update({sessionID:n,timestamp:o||c,projectID:i}),this.localStorage.setItem(this.options.local_uuid_key,s),this.worker.postMessage({type:"auth",token:e,beaconSizeLimit:r});const a={sessionToken:e,userUUID:s,sessionID:n};return this.startCallbacks.forEach(t=>t(a)),this.observer.observe(),this.ticker.start(),this.activityState=S.Active,this.notify.log("OpenReplay tracking started."),"function"==typeof this.options.onStart&&this.options.onStart(a),t=a,Object.assign(Object.assign({},t),{success:!0})}).catch(t=>(this.stop(),this.session.reset(),t===k?E(k):(this.notify.log("OpenReplay was unable to start. ",t),this._debug("session_start",t),E(":("))))}start(s={}){return document.hidden?new Promise(t=>{const e=()=>{document.hidden||(document.removeEventListener("visibilitychange",e),t(this._start(s)))};document.addEventListener("visibilitychange",e)}):this._start(s)}stop(t=!0){if(this.activityState!==S.NotActive)try{this.sanitizer.clear(),this.observer.disconnect(),this.nodes.clear(),this.ticker.stop(),this.stopCallbacks.forEach(t=>t()),this.notify.log("OpenReplay tracking stopped."),this.worker&&t&&this.worker.postMessage("stop")}finally{this.activityState=S.NotActive}}restart(){this.stop(!1),this.start({forceNew:!1})}}const ht=_&&"InstallTrigger"in window?t=>t.message+"\n"+t.stack:t=>t.stack||t.message;function I(t){return void 0===t?"undefined":null===t?"null":t instanceof Error?ht(t):Array.isArray(t)?`Array(${t.length})`:String(t)}function ut(e){if(void 0===e)return"undefined";if(null===e)return"null";if(e instanceof Error)return ht(e);if(Array.isArray(e))return`Array(${e.length})[${e.slice(0,10).map(I).join(", ")}]`;if("object"!=typeof e)return e.toString();{const n=[];let t=0;for(const i in e){if(10==++t)break;var s=e[i];n.push(i+": "+I(s))}return"{"+n.join(", ")+"}"}}function lt(i){return"string"==typeof i[0]&&i.unshift(i.shift().replace(/%(o|s|f|d|i)/g,(t,e)=>{var s,n=i.shift();if(void 0===n)return t;switch(e){case"o":return ut(n);case"s":return I(n);case"f":return"number"!=typeof(s=n)?"NaN":s.toString();case"d":case"i":return"number"!=typeof(s=n)?"NaN":Math.floor(s).toString();default:return t}})),i.map(ut).join(" ")}const dt=["log","info","warn","error","debug","assert"];function pt(i,t){const r=Object.assign({consoleMethods:dt,consoleThrottling:30},t);if(Array.isArray(r.consoleMethods)&&0!==r.consoleMethods.length){const o=i.safe((t,e)=>i.send([22,t,lt(e)]));let n;t=()=>{n=0};i.attachStartCallback(t),i.ticker.attach(t,33,!1);const e=i.safe(t=>(t=>r.consoleMethods.forEach(e=>{if(-1===dt.indexOf(e))i.debug.error(`OpenReplay: unsupported console method "${e}"`);else{const s=t[e];t[e]=function(...t){s.apply(this,t),n++>r.consoleThrottling||o(e,t)}}}))(t.console));e(window),i.observer.attachContextCallback(e)}}function ft(t,e){return t(e={exports:{}},e.exports),e.exports}var mt=ft(function(t,e){t.exports=function(){function s(t){return!isNaN(parseFloat(t))&&isFinite(t)}function n(t){return t.charAt(0).toUpperCase()+t.substring(1)}function t(t){return function(){return this[t]}}var e=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],r=["fileName","functionName","source"],o,a,c=e.concat(i,r,["args"],["evalOrigin"]);function l(t){if(!t)return;for(var e=0;e<c.length;e++)if(t[c[e]]!==undefined)this["set"+n(c[e])](t[c[e]])}l.prototype={getArgs:function(){return this.args},setArgs:function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof l)this.evalOrigin=t;else if(t instanceof Object)this.evalOrigin=new l(t);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var t=this.getFileName()||"";var e=this.getLineNumber()||"";var s=this.getColumnNumber()||"";var n=this.getFunctionName()||"";if(this.getIsEval()){if(t)return"[eval] ("+t+":"+e+":"+s+")";return"[eval]:"+e+":"+s}if(n)return n+" ("+t+":"+e+":"+s+")";return t+":"+e+":"+s}},l.fromString=function t(e){var s=e.indexOf("(");var n=e.lastIndexOf(")");var i=e.substring(0,s);var r=e.substring(s+1,n).split(",");var o=e.substring(n+1);if(o.indexOf("@")===0){var a=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(o,"");var c=a[1];var h=a[2];var u=a[3]}return new l({functionName:i,args:r||undefined,fileName:c,lineNumber:h||undefined,columnNumber:u||undefined})};for(var h=0;h<e.length;h++){l.prototype["get"+n(e[h])]=t(e[h]);l.prototype["set"+n(e[h])]=function(e){return function(t){this[e]=Boolean(t)}}(e[h])}for(var u=0;u<i.length;u++){l.prototype["get"+n(i[u])]=t(i[u]);l.prototype["set"+n(i[u])]=function(e){return function(t){if(!s(t))throw new TypeError(e+" must be a Number");this[e]=Number(t)}}(i[u])}for(var d=0;d<r.length;d++){l.prototype["get"+n(r[d])]=t(r[d]);l.prototype["set"+n(r[d])]=function(e){return function(t){this[e]=String(t)}}(r[d])}return l}()}),gt=ft(function(t,e){t.exports=function(c){var n=/(^|@)\S+:\d+/;var i=/^\s*at .*(\S+:\d+|\(native\))/m;var r=/^(eval@)?(\[native code])?$/;return{parse:function t(e){if(typeof e.stacktrace!=="undefined"||typeof e["opera#sourceloc"]!=="undefined")return this.parseOpera(e);else if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);else if(e.stack)return this.parseFFOrSafari(e);else throw new Error("Cannot parse given Error object")},extractLocation:function t(e){if(e.indexOf(":")===-1)return[e];var s=/(.+?)(?::(\d+))?(?::(\d+))?$/;var n=s.exec(e.replace(/[()]/g,""));return[n[1],n[2]||undefined,n[3]||undefined]},parseV8OrIE:function t(e){var s=e.stack.split("\n").filter(function(t){return!!t.match(i)},this);return s.map(function(t){if(t.indexOf("(eval ")>-1)t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,"");var e=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");var s=e.match(/ (\(.+\)$)/);e=s?e.replace(s[0],""):e;var n=this.extractLocation(s?s[1]:e);var i=s&&e||undefined;var r=["eval","<anonymous>"].indexOf(n[0])>-1?undefined:n[0];return new c({functionName:i,fileName:r,lineNumber:n[1],columnNumber:n[2],source:t})},this)},parseFFOrSafari:function t(e){var s=e.stack.split("\n").filter(function(t){return!t.match(r)},this);return s.map(function(t){if(t.indexOf(" > eval")>-1)t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1");if(t.indexOf("@")===-1&&t.indexOf(":")===-1)return new c({functionName:t});else{var e=/((.*".+"[^@]*)?[^@]*)(?:@)/;var s=t.match(e);var n=s&&s[1]?s[1]:undefined;var i=this.extractLocation(t.replace(e,""));return new c({functionName:n,fileName:i[0],lineNumber:i[1],columnNumber:i[2],source:t})}},this)},parseOpera:function t(e){if(!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length)return this.parseOpera9(e);else if(!e.stack)return this.parseOpera10(e);else return this.parseOpera11(e)},parseOpera9:function t(e){var s=/Line (\d+).*script (?:in )?(\S+)/i;var n=e.message.split("\n");var i=[];for(var r=2,o=n.length;r<o;r+=2){var a=s.exec(n[r]);if(a)i.push(new c({fileName:a[2],lineNumber:a[1],source:n[r]}))}return i},parseOpera10:function t(e){var s=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;var n=e.stacktrace.split("\n");var i=[];for(var r=0,o=n.length;r<o;r+=2){var a=s.exec(n[r]);if(a)i.push(new c({functionName:a[3]||undefined,fileName:a[2],lineNumber:a[1],source:n[r]}))}return i},parseOpera11:function t(e){var s=e.stack.split("\n").filter(function(t){return!!t.match(n)&&!t.match(/^Error created at/)},this);return s.map(function(t){var e=t.split("@");var s=this.extractLocation(e.pop());var n=e.shift()||"";var i=n.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||undefined;var r;if(n.match(/\(([^)]*)\)/))r=n.replace(/^[^(]+\(([^)]*)\)$/,"$1");var o=r===undefined||r==="[arguments not available]"?undefined:r.split(",");return new c({functionName:i,args:o,fileName:s[0],lineNumber:s[1],columnNumber:s[2],source:t})},this)}}}(mt)});function vt(t){return[{columnNumber:t.colno,lineNumber:t.lineno,fileName:t.filename,functionName:"",source:""}]}function x(t,e){let s=e;try{s=gt.parse(t)}catch(t){}return n(t.name,t.message,JSON.stringify(s))}function bt(s,t=window){if(s instanceof ErrorEvent){if(s.error instanceof Error)return x(s.error,vt(s));{let[t,e]=s.message.split(":");return e||(t="Error",e=s.message),n(t,e,JSON.stringify(vt(s)))}}if("PromiseRejectionEvent"in t&&s instanceof t.PromiseRejectionEvent){if(s.reason instanceof Error)return x(s.reason,[]);{let e;try{e=JSON.stringify(s.reason)}catch(t){e=String(s.reason)}return n("Unhandled Promise Rejection",e,"[]")}}return null}function yt(t,e=document.location){return(t=t.trim()).startsWith("/")?e.origin+t:t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:")?t:e.origin+e.pathname+t}function St(i){function n(t,e){i.send(c(t,"src","https://static.openreplay.com/tracker/placeholder.jpeg"));var{width:s,height:n}=e.getBoundingClientRect();e.hasAttribute("width")||i.send(c(t,"width",String(s))),e.hasAttribute("height")||i.send(c(t,"height",String(n)))}function r(t,e){const s=e["srcset"];s&&(e=s.split(",").map(t=>yt(t)).join(","),i.send(c(t,"srcset",e)))}function o(t,e){1e5<e.src.length&&n(t,e),i.send(h(t,"src",e.src,i.getBaseHref()))}const a=i.safe(function(t){t=yt(t.src||"");J(t)&&i.send(P(u(),0,0,0,0,0,t,"img"))}),e=i.safe(function(t){var e,s=i.nodes.getID(t);void 0!==s&&t.complete&&(0!==t.naturalHeight||0!==t.naturalWidth||(e=t.src,$&&(e.startsWith("data:image/svg+xml")||e.match(/.svg$|/i)))?i.sanitizer.isHidden(s)||i.sanitizer.isObscured(s)?n(s,t):(o(s,t),r(s,t)):a(t))}),s=new MutationObserver(t=>{for(const n of t)if("attributes"===n.type){var e=n.target,s=i.nodes.getID(e);if(void 0===s)return;"src"===n.attributeName&&o(s,e),"srcset"===n.attributeName&&r(s,e)}});i.attachStopCallback(()=>{s.disconnect()}),i.nodes.attachNodeCallback(t=>{R(t,"IMG")&&(i.nodes.attachNodeListener(t,"error",()=>a(t)),i.nodes.attachNodeListener(t,"load",()=>e(t)),e(t),s.observe(t,{attributes:!0,attributeFilter:["src","srcset"]}))})}const wt=["text","password","email","search","number","range","date"];function Nt(t){return R(t,"TEXTAREA")||R(t,"INPUT")&&wt.includes(t.type)}function kt(t){if(R(t,"INPUT"))return t=t.type,"checkbox"===t||"radio"===t}const Et=_&&"labels"in HTMLInputElement.prototype?t=>{let e=t;for(;null!==(e=e.parentNode);)if(R(e,"LABEL"))return e;t=t.labels;if(null!==t&&1===t.length)return t[0]}:t=>{let e=t;for(;null!==(e=e.parentNode);)if(R(e,"LABEL"))return e;var s=t.id;if(s){t=t.ownerDocument.querySelectorAll('label[for="'+s+'"]');if(null!==t&&1===t.length)return t[0]}};function It(t){let e=d(t);var s;return null===e&&(s=Et(t),e=s&&s.innerText||t.placeholder||t.name||t.id||t.className||t.type),V(e).slice(0,100)}function Tt(r,t){const o=Object.assign({obscureInputNumbers:!0,obscureInputEmails:!0,defaultInputMode:0,obscureInputDates:!1},t);function i(t,e){let s=e.value,n=o.defaultInputMode,i=("password"===e.type||r.sanitizer.isHidden(t)?n=2:(r.sanitizer.isObscured(t)||0===n&&(o.obscureInputNumbers&&"date"!==e.type&&/\d\d\d\d/.test(s)||o.obscureInputDates&&"date"===e.type||o.obscureInputEmails&&("email"===e.type||~s.indexOf("@"))))&&(n=1),0);switch(n){case 2:i=-1,s="";break;case 1:i=s.length,s=""}r.send([18,t,s,i])}const a=new Map,n=new Map,c=new Set;r.attachStopCallback(()=>{a.clear(),n.clear(),c.clear()}),r.ticker.attach(()=>{a.forEach((t,e)=>{var s,n=r.nodes.getNode(e);n&&(Nt(n)?t!==n.value&&(a.set(e,n.value),c.has(e)||(c.add(e),t=e,""!==(s=It(s=n))&&r.send([17,t,s])),i(e,n)):a.delete(e))}),n.forEach((t,e)=>{var s=r.nodes.getNode(e);s&&(kt(s)?t!==s.checked&&(n.set(e,s.checked),r.send(j(e,s.checked))):n.delete(e))})}),r.ticker.attach(Set.prototype.clear,100,!1,c),r.nodes.attachNodeCallback(r.safe(t=>{const e=r.nodes.getID(t);if(void 0!==e){if(R(t,"SELECT")&&(i(e,t),r.attachEventListener(t,"change",()=>{i(e,t)})),Nt(t))return a.set(e,t.value),void i(e,t);kt(t)&&(n.set(e,t.checked),r.send(j(e,t.checked)))}}))}function Ot(t){var e=t.tagName.toUpperCase();return"BUTTON"===e||"A"===e||"LI"===e||"SELECT"===e||null!=t.onclick||"button"===t.getAttribute("role")}function _t(e,s){if(e instanceof Element){var n=e;var i=s;let t=n;for(;null!==t&&t!==i.documentElement;){if(o(t,"masked"))return null;t=t.parentElement}if(p(n)){let t=n.ownerSVGElement;for(;null!==t;)t=(n=t).ownerSVGElement}t=n;for(;null!==t&&t!==i.documentElement;){var r=t.tagName.toUpperCase();if("LABEL"===r)return null;if("INPUT"===r)return t;if(Ot(t)||null!==d(t))return t;t=t.parentElement}return n===i.documentElement?null:n}return null}function Dt(i){let r=-1,o=-1,a=!1,c=null,h=0,u={};i.attachStopCallback(()=>{r=-1,o=-1,a=!1,c=null,u={}});const l=()=>{a&&(i.send([20,r,o]),a=!1)},e=(n,t=!1)=>{function s(t,e){return u[t]=u[t]||function(t,e){let s=t,n=null;do{if(s.id)return"#"+s.id+(n?" > "+n:"");if(n=s.className.split(" ").map(t=>t.trim()).filter(t=>""!==t).reduce((t,e)=>t+"."+e,s.tagName.toLowerCase())+(n?" > "+n:""),s===e.body)return n}while((s=s.parentElement)!==e.body&&null!==s);return n}(e,n)}const e=t?i.attachEventListener.bind(i):i.nodes.attachNodeListener.bind(i.nodes);e(n.documentElement,"mouseover",t=>{t=_t(t.target,n);t!==c&&(c=t,h=performance.now())}),e(n,"mousemove",t=>{var[e,s]=i.observer.getDocumentOffset(n);r=t.clientX+e,o=t.clientY+s,a=!0},!1),e(n,"click",t=>{var e=_t(t.target,n);(t.clientX||t.clientY)&&null!==e&&(void 0!==(t=i.nodes.getID(e))&&(l(),i.send([69,t,c===e?Math.round(performance.now()-h):0,function(e){var t=d(e);if(null!==t)return t;if(R(e,"INPUT"))return It(e);if(Ot(e)){let t="";return V(t=(t=e instanceof HTMLElement?i.sanitizer.getInnerTextSecure(e):t)||e.id||e.className).slice(0,100)}return""}(e),s(t,e)],!0)),c=null)})};i.nodes.attachNodeCallback(t=>{g(t)&&e(t)}),e(document,!0),i.ticker.attach(l,10)}function Ct(l,t){const s=Object.assign({captureResourceTimings:!0,capturePageLoadTimings:!0,capturePageRenderTimings:!0},t);if("PerformanceObserver"in window||(s.captureResourceTimings=!1),s.captureResourceTimings){let a={};const i=new PerformanceObserver(t=>t.getEntries().forEach(n));let e,h=(l.attachStartCallback(function({sessionID:t}){t!==e&&(performance.getEntriesByType("resource").forEach(n),e=t),i.observe({entryTypes:["resource"]})}),l.attachStopCallback(function(){i.disconnect()}),0),u=0;if(s.capturePageLoadTimings){let c=!1;l.ticker.attach(()=>{var t,e,s,n,i,r,o,a;c||(0!==h&&0!==u||performance.getEntriesByType("paint").forEach(t=>{var{name:t,startTime:e}=t;switch(t){case"first-paint":h=e;break;case"first-contentful-paint":u=e}}),(performance.timing.loadEventEnd||3e4<performance.now())&&(c=!0,{navigationStart:t,requestStart:e,responseStart:s,responseEnd:n,domContentLoadedEventStart:i,domContentLoadedEventEnd:r,loadEventStart:o,loadEventEnd:a}=performance.timing,l.send([23,e-t||0,s-t||0,n-t||0,i-t||0,r-t||0,o-t||0,a-t||0,h,u])))},30)}if(s.capturePageRenderTimings){let s=0,n=0,i=0,r=null,o=!1;l.ticker.attach(()=>{var t,e;o||(t=performance.now(),null!==a&&1e3<t-(s=Math.max.apply(null,Object.keys(a).map(t=>a[t])))&&(r=function(s){const n=[];var i,r,o,a,c,h=document.getElementsByTagName("*");const u=/url\(("[^"]*"|'[^']*'|[^)]*)\)/i;for(let e=0;e<h.length;e++){const l=h[e];let t="";(t=R(l,"IMG")?l.currentSrc||l.src:t)||(i=getComputedStyle(l).getPropertyValue("background-image"))&&null!==(i=u.exec(i))&&((t=i[1]).startsWith('"')||t.startsWith("'"))&&(t=t.substr(1,t.length-2)),t&&(void 0!==(i="data:image"===t.substr(0,10)?0:s[t])&&(c=l.getBoundingClientRect(),r=Math.max(c.top,0),o=Math.max(c.left,0),a=Math.min(c.bottom,window.innerHeight||document.documentElement&&document.documentElement.clientHeight||0),c=Math.min(c.right,window.innerWidth||document.documentElement&&document.documentElement.clientWidth||0),a<=r||c<=o||n.push({time:i,area:(a-r)*(c-o)})))}return n}(a),a=null),null!==i&&(50<t-i&&(n=t),i=5e3<t-n?null:t),(null!==r&&null===i||3e4<t)&&(o=!0,t=(a=null)===r?0:function(e,s){let n=Math.max(document.documentElement&&document.documentElement.clientWidth||0,window.innerWidth||0)*Math.max(document.documentElement&&document.documentElement.clientHeight||0,window.innerHeight||0)/10,i=n*e;for(let t=0;t<s.length;t++){var{time:r,area:o}=s[t];n+=o,i+=o*(e<r?r:e)}return 0===n?0:i/n}(u||h,r),e=null===i?Math.max(n,u,performance.timing.domContentLoadedEventEnd-performance.timing.navigationStart||0):0,l.send([24,t,u>s?u:s,e])))})}function n(t){t.duration<0||!J(t.name)||l.isServiceURL(t.name)||(null!==a&&(a[t.name]=t.startTime+t.duration),l.send(P(t.startTime+performance.timing.navigationStart,t.duration,t.responseStart&&t.startTime?t.responseStart-t.startTime:0,t.transferSize>t.encodedBodySize?t.transferSize-t.encodedBodySize:0,t.encodedBodySize||0,t.decodedBodySize||0,t.name,t.initiatorType)))}}}function T(t){var e=t.defaultView;return[e&&e.pageXOffset||t.documentElement&&t.documentElement.scrollLeft||t.body&&t.body.scrollLeft||0,e&&e.pageYOffset||t.documentElement&&t.documentElement.scrollTop||t.body&&t.body.scrollTop||0]}function Rt(s){let e=!1;const n=new Map;function i(t){var e;(e=t)&&null!=e.nodeType&&(f(t)&&n.set(t,[t.scrollLeft,t.scrollTop]),g(t)&&n.set(t,T(t)))}const t=s.safe(()=>s.send(function(t,e){return[6,t,e]}(...T(document)))),r=s.safe((t,e)=>{e=s.nodes.getID(e);void 0!==e&&s.send([16,e,t[0],t[1]])});s.attachStartCallback(t),s.attachStopCallback(()=>{e=!1,n.clear()}),s.nodes.attachNodeCallback((t,e)=>{e&&(f(t)&&0<t.scrollLeft+t.scrollTop?n.set(t,[t.scrollLeft,t.scrollTop]):g(t)&&n.set(t,T(t))),v(t)&&s.nodes.attachNodeListener(t,"scroll",t=>{i(t.target)})}),s.attachEventListener(document,"scroll",t=>{t=t.target;t===document?e=!0:i(t)}),s.ticker.attach(()=>{e&&(t(),e=!1),n.forEach(r),n.clear()},5,!1)}function Lt(t){return v(t)&&t.adoptedStyleSheets}let xt=15;const A=new Map;const M="/installation/setup-or";class At{constructor(t){if(this.options=t,this.app=null,this.handleError=t=>{null!==this.app&&(t instanceof Error?this.app.send(x(t,[])):(t instanceof ErrorEvent||"PromiseRejectionEvent"in window&&t instanceof PromiseRejectionEvent)&&null!=(t=bt(t))&&this.app.send(t))},_&&function(t){if(null!=t){if("string"!=typeof t.projectKey)if("number"!=typeof t.projectKey){if("number"!=typeof t.projectID)return console.error(`OpenReplay: projectKey is missing or wrong type (string is expected). Please, check ${D}${M} for more information.`),0;t.projectKey=t.projectID.toString(),C("`projectID` option","`projectKey` option",M)}else console.warn("OpenReplay: projectKey is expected to have a string type."),t.projectKey=t.projectKey.toString();return null!=t.sessionToken&&C("`sessionToken` option","`sessionHash` start() option","/"),1}console.error("OpenReplay: invalid options argument type. Please, check documentation on "+D+M)}(t))if(window.__OPENREPLAY__)console.error("OpenReplay: one tracker instance has been initialised already");else if(t.__DISABLE_SECURE_MODE||"https:"===location.protocol){var s,e=t.respectDoNotTrack&&("1"==navigator.doNotTrack||"1"==window.doNotTrack);const p=this.app=!e&&"Map"in window&&"Set"in window&&"MutationObserver"in window&&"performance"in window&&"timing"in performance&&"startsWith"in String.prototype&&"Blob"in window&&"Worker"in window?new ct(t.projectKey,t.sessionToken,t):null;if(null!==p){{var r=p;let e,s,n,i=performance.timing.navigationStart;const f=r.safe(()=>{var t=document["URL"];t!==e&&(e=t,r.send([4,e,document.referrer,i]),i=0)}),m=r.safe(()=>{var{innerWidth:t,innerHeight:e}=window;t===s&&e===n||(s=t,n=e,r.send([5,s,n]))}),g=void 0===document.hidden?Function.prototype:r.safe(()=>r.send([55,document.hidden]));r.attachStartCallback(()=>{e="",s=n=-1,f(),m(),g()}),void 0!==document.hidden&&r.attachEventListener(document,"visibilitychange",g,!1,!1),r.ticker.attach(f,1,!1),r.ticker.attach(m,5,!1)}var o=p;if(null!==o)if(window.CSSStyleSheet){const v=o.safe((t,e,s)=>{t=A.get(t);t&&("string"==typeof s?o.send(O(t,s,e,o.getBaseHref())):o.send(H(t,e)))}),b=o.safe(t=>{let e=t;for(;e.parentRule;)e=e.parentRule;var s,n,i,r=e.parentStyleSheet;r?(s=A.get(r))?(n=e.cssText,i=r.cssRules,0<=(i=Array.from(i).indexOf(e))?(o.send(O(s,n,i,o.getBaseHref())),o.send(H(s,i+1))):o.debug.warn("Rule index not found in",r,e)):o.debug.warn("No sheedID found for",r,A):o.debug.warn("No parent StyleSheet found for",e,t)});var n=t=>{const{insertRule:s,deleteRule:e}=t.CSSStyleSheet.prototype,{insertRule:n,deleteRule:i}=t.CSSGroupingRule.prototype;t.CSSStyleSheet.prototype.insertRule=function(t,e=0){return v(this,e,t),s.call(this,t,e)},t.CSSStyleSheet.prototype.deleteRule=function(t){return v(this,t),e.call(this,t)},t.CSSGroupingRule.prototype.insertRule=function(t,e=0){t=n.call(this,t,e);return b(this),t},t.CSSGroupingRule.prototype.deleteRule=function(t=0){t=i.call(this,t);return b(this),t}};n(window),o.observer.attachContextCallback(n),o.nodes.attachNodeCallback(t=>{if((R(t,"STYLE")||R(t,"style"))&&t.sheet&&!(null!==t.textContent&&0<t.textContent.trim().length)){var e=o.nodes.getID(t);if(e){var s=t.sheet,t=xt++,n=(A.set(s,t),o.send(W(t,e)),s.cssRules);for(let t=0;t<n.length;t++)v(s,t,n[t].cssText)}}})}else o.send(U("no_stylesheet_prototype_in_window",""));var c=p;if(null!==c)if(Lt(document)){const y=new Map,S=new Map,w=e=>{let s=c.nodes.getID(e);if(s=e===document?0:s){let t=S.get(s);t=t||[];const r=[];for(const o of e.adoptedStyleSheets){let e=y.get(o);var n=!e;if(e=e||xt++,r.push(e),t.includes(e)||c.send(W(e,s)),n){var i=o.cssRules;for(let t=0;t<i.length;t++)c.send(O(e,i[t].cssText,t,c.getBaseHref()))}}for(const a of t)r.includes(a)||c.send([77,a,s]);S.set(s,r)}};n=t=>{if(!t.__openreplay_adpss_patched__){t.__openreplay_adpss_patched__=!0,i(t.Document.prototype),i(t.ShadowRoot.prototype);const{replace:e,replaceSync:s}=t.CSSStyleSheet.prototype;t.CSSStyleSheet.prototype.replace=function(s){return e.call(this,s).then(t=>{var e=y.get(this);return e&&c.send(B(e,s,c.getBaseHref())),t})},t.CSSStyleSheet.prototype.replaceSync=function(t){var e=y.get(this);return e&&c.send(B(e,t,c.getBaseHref())),s.call(this,t)}}};function i(t){const e=Object.getOwnPropertyDescriptor(t,"adoptedStyleSheets");e&&Object.defineProperty(t,"adoptedStyleSheets",Object.assign(Object.assign({},e),{set:function(t){t=e.set.call(this,t);return w(this),t}}))}n(window),c.observer.attachContextCallback(n),c.attachStopCallback(()=>{y.clear(),S.clear()}),c.attachStartCallback(()=>{w(document)}),c.nodes.attachNodeCallback(t=>{Lt(t)&&w(t)})}else c.attachStartCallback(()=>{c.send(U("no_adopted_stylesheets",""))});{var a=p;const N=navigator.connection||navigator.mozConnection||navigator.webkitConnection;void 0!==N&&((u=()=>a.send([54,Math.round(1e3*N.downlink),N.type||"unknown"]))(),N.addEventListener("change",u))}pt(p,t),s=p,Object.assign({captureExceptions:!0},t).captureExceptions&&(s.observer.attachContextCallback(d),d(window)),St(p),Tt(p,t),Dt(p),Ct(p,t);var h=p,u=t;if(Object.assign({capturePerformance:!0},u).capturePerformance){let t,e;const k=()=>{void 0!==t&&-1!==t&&(t++,requestAnimationFrame(k))},E=(h.ticker.attach(()=>{void 0!==e&&-1!==e&&e++},0,!1),()=>{void 0!==t&&void 0!==e&&(h.send([49,t,e,L.memory.totalJSHeapSize||0,L.memory.usedJSHeapSize||0]),e=t=document.hidden?-1:0)});h.attachStartCallback(()=>{e=t=-1,E(),k()}),h.attachStopCallback(()=>{e=t=void 0}),h.ticker.attach(E,40,!1),void 0!==document.hidden&&h.attachEventListener(document,"visibilitychange",E,!1,!1)}if(Rt(p),window.__OPENREPLAY__=this,t.autoResetOnWindowOpen){const I=window.open;p.attachStartCallback(()=>{window.open=function(...t){p.resetNextPageSession(!0),I.call(window,...t),p.resetNextPageSession(!1)}}),p.attachStopCallback(()=>{window.open=I})}}else{console.log("OpenReplay: browser doesn't support API required for tracking or doNotTrack is set to 1.");const T=new XMLHttpRequest;var l=t.ingestPoint||at;T.open("POST",l+"/v1/web/not-started"),T.send(JSON.stringify({trackerVersion:"4.0.1",projectKey:t.projectKey,doNotTrack:e}))}function d(e){function t(t){t=bt(t,e);null!=t&&s.send(t)}s.attachEventListener(e,"unhandledrejection",t),s.attachEventListener(e,"error",t)}}else console.error("OpenReplay: Your website must be publicly accessible and running on SSL in order for OpenReplay to properly capture and replay the user session. You can disable this check by setting `__DISABLE_SECURE_MODE` option to `true` if you are testing in localhost. Keep in mind, that asset files on a local machine are not available to the outside world. This might affect tracking if you use css files.")}use(t){return t(this.app,this.options)}isActive(){return null!==this.app&&this.app.active()}start(t){return _?null===this.app?Promise.reject("Browser doesn't support required api, or doNotTrack is active."):this.app.start(t):(console.error("OpenReplay: you are trying to start Tracker on a node.js environment. If you want to use OpenReplay with SSR, please, use componentDidMount or useEffect API for placing the `tracker.start()` line. Check documentation on "+D+M),Promise.reject("Trying to start not in browser."))}stop(){if(null!==this.app)return this.app.stop(),this.app.session.getSessionHash()}getSessionToken(){return null===this.app?null:this.app.getSessionToken()}getSessionID(){return null===this.app?null:this.app.getSessionID()}sessionID(){return C("'sessionID' method","'getSessionID' method","/"),this.getSessionID()}getSessionURL(){if(null!==this.app)return this.app.getSessionURL()}setUserID(t){"string"==typeof t&&null!==this.app&&this.app.session.setUserID(t)}userID(t){C("'userID' method","'setUserID' method","/"),this.setUserID(t)}setUserAnonymousID(t){"string"==typeof t&&null!==this.app&&this.app.send([29,t])}userAnonymousID(t){C("'userAnonymousID' method","'setUserAnonymousID' method","/"),this.setUserAnonymousID(t)}setMetadata(t,e){"string"==typeof t&&"string"==typeof e&&null!==this.app&&this.app.session.setMetadata(t,e)}metadata(t,e){C("'metadata' method","'setMetadata' method","/"),this.setMetadata(t,e)}event(t,e,s=!1){if("string"==typeof t&&null!==this.app){if(s)return this.issue(t,e);try{e=JSON.stringify(e)}catch(t){return}this.app.send([27,t,e])}}issue(t,e){if("string"==typeof t&&null!==this.app){try{e=JSON.stringify(e)}catch(t){return}this.app.send([64,t,e])}}}!function(t){var t=0<arguments.length&&void 0!==t?t:{},e=window.OpenReplay||window.asayer,s=e.shift(),n=e.shift(),i=e.shift(),s=("object"===l(i="number"==typeof i?{obscureTextEmails:!!(1&i),obscureTextNumbers:!!(i>>1&1),obscureInputNumbers:!!(i>>3&1),obscureInputEmails:!!(i>>4&1),defaultInputMode:i>>5}:i)&&null!==i||(i={}),Object.assign({projectKey:s,sessionToken:n},i,t,{__is_snippet:!0})),r=(e.i&&(s.ingestPoint=e.i),window.OpenReplay=window.asayer=new At(s)),o=r.setUserID.bind(r),a=(r.setUserID=r.userID=function(t){void 0!==l(t)&&null!==t&&o(t.toString())},r.setUserAnonymousID.bind(r)),c=(r.setUserAnonymousID=r.userAnonymousID=function(t){void 0!==l(t)&&null!==t&&a(t.toString())},r.setMetadata.bind(r)),h=(r.setMetadata=r.metadata=function(t,e){"number"==typeof e&&NaN!==e&&(e=e.toString()),"string"==typeof t&&"string"==typeof e&&c(t,e)},r.event.bind(r));for(r.event=function(t,e){"string"==typeof t&&h(t,e)};e.length;){var u=e.shift();switch(u[0]){case 0:r.start(u[1]);break;case 1:r.stop();break;case 2:r.setUserID(u[1]);break;case 3:r.setUserAnonymousID(u[1]);break;case 4:r.setMetadata(u[1],u[2]);break;case 5:r.event(u[1],u[2],u[3]);break;case 6:r.issue(u[1],u[2])}}}()}();
</script>

</body>
</html>
