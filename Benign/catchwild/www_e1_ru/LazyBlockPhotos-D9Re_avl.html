<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LazyBlockPhotos-D9Re_avl.html</title>
</head>
<body>

<script>
import{af as ie,n as re,B as ce,c as de,W as ee,_ as j,ae as ue,s as S,R as _,aU as he}from"./index-DJp284ij.js";import{_ as pe}from"./LazyBlock.vue_vue_type_script_setup_true_lang-3kdFXy1e.js";import{h as K,c as me}from"./vendor-BroXzQGG.js";import{U as ke}from"./BaseBlock-NqlL-UqD.js";import{U as R}from"./SliderButton-BBEjJszp.js";import{U as Q}from"./SliderCounter-CVKEtsRn.js";import{U as se}from"./Slider-DaoXPNss.js";import{l as z,k as b,s as V,C as r,B as g,D as h,E as o,S as y,F as W,L as v,u as c,T as oe,U as te,K as f,J as p,_ as ge,r as B,G as ye,W as ve}from"./vue-BTg2e_qy.js";import{I as fe,U as we}from"./SharingList-0Fv0Cms8.js";import{U as $e}from"./AnnouncementInfo-BnLtJAKO.js";import"./chart.js-D7nawTmG.js";import"./chevron_left_16-BEkScU77.js";import"./chevron_right_16-DfiOCgpa.js";import"./Popover-C0uDoc1W.js";import"./Popover.vue_vue_type_style_index_0_lang.module-DpfXqAwO.js";import"./link_24-CgyapCen.js";import"./SharingSocial.vue_vue_type_script_setup_true_lang-E9b6ywKT.js";import"./SharingList.vue_vue_type_style_index_0_lang.module-B-me5tRk.js";import"./AnnouncementInfo.vue_vue_type_style_index_0_lang.module-FrWjN4F0.js";const Ce=z({__name:"ImageGallery",props:{isMobile:{type:Boolean,default:!1},hasShowOriginal:{type:Boolean,default:!1},currentImageIndex:{default:1},images:{}},emits:["sliderChanged","close"],setup(l,{emit:n}){const t=l,i=b(()=>t.images.length),d=b(()=>{var e;return{groupCells:!1,contain:!1,wrapAround:!0,cellAlign:"center",initialIndex:(e=t.currentImageIndex)!=null?e:0}}),m=n,E=()=>{m("close")},w=e=>{m("sliderChanged",e)},u=V(),a=()=>{u.value&&u.value.prevSlide()},L=()=>{u.value&&u.value.nextSlide()},N=e=>t.hasShowOriginal?{src:e.src,sources:[]}:e,$=b(()=>t.currentImageIndex===0);return(e,C)=>(r(),g("div",{class:o(e.$style.modal)},[h("div",{class:o(e.$style.wrapper)},[h("div",{class:o(e.$style.content)},[h("div",{class:o(e.$style.topBar)},[y(Q,{class:o([e.$style.counter]),"active-index":e.currentImageIndex,"is-dark":!0,"total-slides":i.value},null,8,["class","active-index","total-slides"]),W(e.$slots,"top",{currentIndex:e.currentImageIndex}),y(c(de),{class:o(e.$style.btn),variant:c(re).LINK,size:c(ce).SMALL,onClick:E},{left:v(()=>[y(c(ie),{class:o(["size-6",e.$style.close])},null,8,["class"])]),_:1},8,["class","variant","size"])],2),h("div",{class:o(e.$style.sliderWrap)},[y(c(se),{ref_key:"slider",ref:u,class:o(e.$style.slider),"slider-options":d.value,onSliderChanged:w},{default:v(()=>[(r(!0),g(oe,null,te(e.images,H=>(r(),g("div",{key:`ImageGallery_${H.id}`,class:o(e.$style.slide)},[H.image?(r(),f(ee,{key:0,image:N(H.image)},null,8,["image"])):p("",!0)],2))),128))]),_:1},8,["class","slider-options"]),h("div",{class:o(e.$style.btnWrap)},[$.value?p("",!0):(r(),f(R,{key:0,class:o(e.$style.sliderBtn),background:"dark",direction:"left",onClick:a},null,8,["class"])),y(R,{class:o(e.$style.sliderBtn),background:"dark",direction:"right",onClick:L},null,8,["class"])],2)],2),h("div",{class:o(e.$style.bottomBar)},[y(Q,{class:o([e.$style.counter]),"active-index":e.currentImageIndex,"is-dark":!0,"total-slides":i.value},null,8,["class","active-index","total-slides"]),W(e.$slots,"bottom",{currentIndex:e.currentImageIndex})],2)],2),e.$slots.aside?(r(),g("aside",{key:0,class:o(e.$style.aside)},[W(e.$slots,"aside")],2)):p("",!0)],2)],2))}}),be="modal_wko1C",Ee="counter_wko1C",Pe="topBar_wko1C",Be="bottomBar_wko1C",Se="content_wko1C",_e="aside_wko1C",Ie="wrapper_wko1C",Me="btn_wko1C",Le="close_wko1C",Te="sliderWrap_wko1C",Ue="slider_wko1C",Ne="slide_wko1C",He="btnWrap_wko1C",Oe="sliderBtn_wko1C",Ae={modal:be,counter:Ee,topBar:Pe,bottomBar:Be,content:Se,aside:_e,wrapper:Ie,btn:Me,close:Le,sliderWrap:Te,slider:Ue,slide:Ne,btnWrap:He,sliderBtn:Oe},Ge={$style:Ae},We=j(Ce,[["__cssModules",Ge]]),Re=["href","innerHTML"],ze=["innerHTML"],Je=["href","innerHTML"],De=z({__name:"PhotosItem",props:{photo:{}},emits:["shared","open","titleClick","linkClick"],setup(l,{emit:n}){const t=l,i=n,d=b(()=>K(t.photo.header)?{url:t.photo.header.url,text:"Перейти в материал"}:{url:"",text:"Перейти в материал"}),m=()=>{i("shared",t.photo)},E=()=>{i("open")},w=()=>{i("titleClick")},u=()=>{i("linkClick")};return(a,L)=>(r(),g("div",{class:o(a.$style.photosItem)},[a.photo.image?(r(),f(ee,{key:0,class:o(a.$style.img),"aspect-ratio":c(ue).CLASSIC,image:a.photo.image,onClick:ge(E,["stop"])},null,8,["class","aspect-ratio","image"])):p("",!0),h("div",{class:o(a.$style.description)},[a.photo.header?(r(),g("a",{key:0,class:o(a.$style.header),href:a.photo.header.url,onClick:w,innerHTML:a.photo.header.text},null,10,Re)):p("",!0),a.photo.authorLabel?(r(),g("p",{key:1,class:o(a.$style.author),innerHTML:a.photo.authorLabel},null,10,ze)):p("",!0),h("a",{class:o(a.$style.link),href:d.value.url,onClick:u,innerHTML:d.value.text},null,10,Je),a.photo.info?(r(),f(c($e),{key:2,class:o(a.$style.info),info:a.photo.info,"is-show-comments":!1,"is-show-views":!1,onBtnClicked:m},{default:v(()=>[y(c(fe),{class:"size-6"})]),_:1},8,["class","info"])):p("",!0)],2)],2))}}),Fe="photosItem_jlFnn",Ve="img_jlFnn",je="description_jlFnn",Ke="header_jlFnn",Xe="author_jlFnn",qe="link_jlFnn",Qe="info_jlFnn",Ze={photosItem:Fe,img:Ve,description:je,header:Ke,author:Xe,link:qe,info:Qe},Ye={$style:Ze},xe=j(De,[["__cssModules",Ye]]),I="Фото дня (блок)",M="Продукт";var A=(l=>(l[l.PREV=0]="PREV",l[l.NEXT=1]="NEXT",l))(A||{});const es=()=>{S("viewDayPhotoBlock",[M,_.PAGE_NAME,I,"Просмотр"])},Z=()=>{S("clickDayPhotoBlock",[M,_.PAGE_NAME,I,"Клик","undefined","Фото дня (заголовок)"])},ss=()=>{S("clickDayPhotoBlock",[M,_.PAGE_NAME,I,"Клик","undefined","Переход на материал"])},os=()=>{S("clickDayPhotoBlock",[M,_.PAGE_NAME,I,"Клик","undefined","Смотреть материал"])},ts=l=>{S("clickDayPhotoBlock",[M,_.PAGE_NAME,I,"Клик","undefined","Шаринг",l])},ls=()=>{S("clickDayPhotoBlock",[M,_.PAGE_NAME,I,"Клик","undefined","Выбранное фото (открыть фенсибокс)"])},Y=l=>{const n=l===1?"Листание вправо":"Листание влево";S("navDayPhotoBlock",[M,_.PAGE_NAME,I,"Навигация","undefined",n])},ns=l=>{const n=l.match(/\d{8}/gi);return n?n[0]:"none"},as=(l,n,t)=>[{name:"utm_source",value:l},{name:"utm_medium",value:n},{name:"utm_campaign",value:me(t)?t:ns(n)}],O=(l,n)=>{const t=new URL(l);Object.entries(n).forEach(i=>{t.searchParams.append(i[0],encodeURIComponent(i[1].toString()))}),window.open(t.href,"_blank","width=400,height=400")},is=(l,n="")=>{const t=n||`${window.location.origin}${window.location.pathname}`,i=new URL(t);return K(l)&&l.forEach(d=>{i.searchParams.append(d.name,d.value)}),i.href},rs=l=>{const n="https://vk.com/share.php",t="https://twitter.com/intent/tweet",i="https://connect.ok.ru/dk",d="https://telegram.me/share/url",m="https://wa.me/",E=document.location.href,{socialTarget:w,params:u,title:a,url:L="",utmSource:N,utmCampaign:$}=l,e=[...u,...as(N,E,$)],C=is(e,L);switch(w){case"vk":O(n,{url:C,title:a,noparse:!0});break;case"twitter":O(t,{text:a,url:C});break;case"ok":O(i,{"st.cmd":"WidgetSharePreview","st.shareUrl":C,title:a});break;case"telegram":O(d,{url:C});break;case"wa":O(m,{text:C});break}},cs=17,x=l=>{const n=Math.round(l/cs)+1;window.location.href=`${window.location.href}photos?page=${n}`},ds=l=>{const{socialTarget:n,title:t,id:i}=l,d=[{name:"share",value:`${i}`}];rs({utmCampaign:"",utmSource:"sharephotodayinner",socialTarget:n,params:d,title:t})},us=["href","innerHTML"],hs=["innerHTML"],ps=["innerHTML"],ms=["href"],ks=240,gs=424,ys=z({__name:"BlockPhotos",props:{block:{},isMobile:{type:Boolean}},setup(l){const n=[{url:"",icon:"vk"},{url:"",icon:"telegram"},{url:"",icon:"ok"},{url:"",icon:"twitter"},{url:"",icon:"wa"}],t=l,i=b(()=>t.isMobile?ks:gs),d=s=>{const k=T.value<s?A.NEXT:A.PREV;Y(k),s===t.block.announcements.length&&x(t.block.announcements.length),T.value=s-1},m=s=>{const k=J.value<s?A.NEXT:A.PREV;Y(k),s===t.block.announcements.length&&x(t.block.announcements.length),J.value=s},E=s=>{G.value=!0,T.value=s,ls()},w=B(!1),u=B(null),a=s=>{u.value=s,w.value=!0},L=s=>{if(u.value!==null){const k=K(u.value.header)?u.value.header:{url:"",text:""};ds({socialTarget:s,id:u.value.id,title:k.text}),ts(s)}},N=()=>{u.value=null,w.value=!1},$=b(()=>t.block.header===void 0?{text:"",url:""}:t.block.header),e=V(),C=()=>{e.value&&e.value.prevSlide()},H=()=>{e.value&&e.value.nextSlide()},T=B(1),J=B(1),le=()=>{T.value=0,G.value=!1},G=B(!1),U=b(()=>G.value?t.block.announcements.at(T.value):void 0),D=V(),X=B({top:"0",opacity:0}),ne=()=>{let s=0;const F=t.isMobile?12:24;if(D.value!==void 0){const q=D.value.querySelector("img");q!==null&&(s=q.getBoundingClientRect().height)}X.value={top:`${s/2-F}px`,opacity:1}},ae=b(()=>J.value!==1);return(s,k)=>(r(),g("div",{ref_key:"photosBlock",ref:D,class:o(s.$style.photosBlock)},[y(c(ke),{class:o(s.$style.wrap),header:$.value.text,href:$.value.url,onBlockShown:c(es)},{title:v(()=>[h("a",{class:o(s.$style.label),href:$.value.url,onClick:k[0]||(k[0]=(...P)=>c(Z)&&c(Z)(...P)),innerHTML:$.value.text},null,10,us)]),default:v(()=>[h("div",{class:o(s.$style.sliderWrap)},[y(c(se),{ref_key:"slider",ref:e,class:o(s.$style.slider),"initial-slider-height":i.value,onSliderReady:ne,onSliderChanged:m},{default:v(()=>[(r(!0),g(oe,null,te(s.block.announcements,(P,F)=>(r(),f(c(xe),{key:`PhotosItem_${P.id}`,class:o(s.$style.slide),photo:P,onShared:a,onLinkClick:c(os),onOpen:()=>E(F),onTitleClick:c(ss)},null,8,["class","photo","onLinkClick","onOpen","onTitleClick"]))),128))]),_:1},8,["class","initial-slider-height"]),h("div",{class:o(s.$style.btnWrap),style:ye(X.value)},[ae.value?(r(),f(R,{key:0,direction:"left",size:s.isMobile?"small":"large",onClick:C},null,8,["size"])):p("",!0),y(R,{class:o(s.$style.next),direction:"right",size:s.isMobile?"small":"large",onClick:H},null,8,["class","size"])],6)],2)]),_:1},8,["class","header","href","onBlockShown"]),w.value?(r(),f(c(we),{key:0,class:o(s.$style.sharing),"is-show-modal":s.isMobile,socials:n,"with-copy-link":!1,onClickOutside:N,onSocialClicked:L},null,8,["class","is-show-modal"])):p("",!0),G.value&&U.value?(r(),f(c(We),{key:1,class:o(s.$style.gallery),"current-image-index":T.value,"is-mobile":s.isMobile,"has-show-original":!0,images:s.block.announcements,onSliderChanged:d,onClose:le},{top:v(()=>[U.value.authorLabel?(r(),g("div",{key:0,class:o(s.$style.author)},[k[1]||(k[1]=ve(" Автор: ")),h("span",{class:o(s.$style.authorHighlighted),innerHTML:U.value.authorLabel},null,10,hs)],2)):p("",!0)]),bottom:v(()=>[U.value.header?(r(),g("div",{key:0,class:o(s.$style.description)},[h("div",{class:o(s.$style.title),innerHTML:U.value.header.text},null,10,ps),h("a",{href:U.value.header.url,class:o(s.$style.link)},"Перейти в материал",10,ms)],2)):p("",!0)]),aside:v(()=>[W(s.$slots,"galleryAside")]),_:3},8,["class","current-image-index","is-mobile","images"])):p("",!0)],2))}}),vs="photosBlock_JwENP",fs="wrap_JwENP",ws="label_JwENP",$s="slider_JwENP",Cs="btnWrap_JwENP",bs="next_JwENP",Es="slide_JwENP",Ps="sharing_JwENP",Bs="description_JwENP",Ss="title_JwENP",_s="link_JwENP",Is="author_JwENP",Ms="authorHighlighted_JwENP",Ls="sliderWrap_JwENP",Ts={photosBlock:vs,wrap:fs,label:ws,slider:$s,btnWrap:Cs,next:bs,slide:Es,sharing:Ps,description:Bs,title:Ss,link:_s,author:Is,authorHighlighted:Ms,sliderWrap:Ls},Us={$style:Ts},Ns=j(ys,[["__cssModules",Us]]),eo=z({__name:"LazyBlockPhotos",props:{isMobile:{type:Boolean},isLazy:{type:Boolean},payload:{}},setup(l){const n=l,t=B(null),i=async()=>{var d;if(n.payload!==void 0&&n.isLazy){const m=await he({...n.payload,excludedAnnouncementIds:[]});t.value=((d=m.blockResponse)==null?void 0:d.block)||null}};return(d,m)=>(r(),f(c(pe),{onLazyLoad:i},{default:v(()=>[t.value?(r(),f(Ns,{key:0,block:t.value,"is-mobile":d.isMobile},null,8,["block","is-mobile"])):p("",!0)]),_:1}))}});export{eo as default};

</script>

</body>
</html>
