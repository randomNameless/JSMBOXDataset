<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>92124-762cbb812abf7e39.html</title>
</head>
<body>

<script>
(self.webpackChunkmexcMain=self.webpackChunkmexcMain||[]).push([[92124],{292124:function(e,t,o){"use strict";o.d(t,{C6:function(){return $},jW:function(){return A}});var n=o(691477),i=o(986122),d=o(355676),l=o.n(d),c=o(636842),r=o(251159),a=o(866314),u=o(442598),s=o(54492),m=o.n(s),v=o(663848),p=o(839976),f=o.n(p),_=o(132650),w=o.n(_),b=o(772043),y=o(252167),h=o(248145),g=o(836378),S=o(315114),C=o(850355),k=o(879557),E=o(920123),j=o(608032),O=o(467383),x=o.n(O),I=o(225703),R=o(812807);function T(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function B(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?T(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):T(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function P(e){const t=window.sessionStorage.getItem(e)||0,o=Date.now();return Math.floor((o-t)/1e3)}const D=["REGISTER","LOGIN"];let N=!1,W=!1,M="",L="",Z="",H="",F=Date.now(),V={},G=0,U="";const z={mobile:"SMS",voice:"voice",email:"Email",mobile_email:"SMS, Email",voice_email:"voice, Email"},A=(e,t,o)=>o?W?z.voice:z[o]||z.mobile:t>2?z.email:W?null!==e&&void 0!==e&&e.email?null!==e&&void 0!==e&&e.mobile?z.voice_email:z.email:z.voice:null!==e&&void 0!==e&&e.email?null!==e&&void 0!==e&&e.mobile?z.mobile_email:z.email:z.mobile,X=["REGISTER"],Y=e=>{const t=(null===e||void 0===e?void 0:e.email)||M,o=(null===e||void 0===e?void 0:e.country)||L,n=(null===e||void 0===e?void 0:e.mobile)||Z,i=e.type||H;let d={jira_id:"user-2543",member_id:window._getCookie("u_id")&&!X.includes(i)?sessionStorage.getItem(y.ak):null,uc_device_id:window._getCookie(j.v4)||"",uc_client_ip:localStorage.getItem(k.o)||"",email:t?w()(t):null,country_number:o&&n?o:null,phone_number:n&&o?w()(n):null,service_type:i,code_type:e.sendType||A(V,G),is_success:void 0===e.is_success||e.is_success,fail_code:(null===e||void 0===e?void 0:e.fail_code)||500,fail_reason:void 0===e.fail_reason?null:e.fail_reason};return d.is_success?(0,h.omit)(d,"fail_code","fail_reason"):d},$=(e,t)=>{if(!N&&!t)return;const o=Y(e),n=Date.now();(0,g.Wrk)("User_fillCode",B(B({},o),{},{$event_duration:Math.ceil((n-F)/1e3)})),N=!1};function q(e,t){let{mobileCode:o,sendType:n="email",needCaptcha:d=!1,captchaParams:s={},sendParams:p={},beforeSendCheck:_,countdownTimeLimit:w=60,autoSend:h=!1,buttonType:j="text",captchaSendText:O="mc_common_captcha_send",captchaCountdownText:I="",buttonProps:T={},sendResultCallback:z}=e;const{t:X}=(0,a.Z)("common"),{locale:$}=(0,u.useRouter)(),{user:q}=(0,v.aF)(),{userInfo:K}=(0,y.ZP)(!0,q),{securityInfo:Q,securityLevel:ee,originInfo:te}=(0,E.Z)(),{0:oe,1:ne}=(0,i.useState)(!1),ie=(0,i.useRef)(),{0:de,1:le}=(0,i.useState)(0),{0:ce,1:re}=(0,i.useState)(),ae=(0,i.useRef)(),ue=(0,i.useRef)(),se=function(e,t,o){const n=window._getCookie("u_id"),i=[e,t,null===o||void 0===o?void 0:o.type,n].filter((e=>void 0!==e));return"mexc_captcha_".concat(e,"_").concat(f()(i.join("")).substring(8,24),"_timestamp")}(n,o,p),{0:me,1:ve}=(0,i.useState)(),[pe,fe,_e,we]=(0,S.my)({actions:{setData:re,onFail:D.includes(null===p||void 0===p?void 0:p.type)?()=>{}:void 0},language:$,params:s,needCaptcha:d}),{data:be}=(0,k.Z)(),{data:ye,error:he}=(0,b.ZP)(["/api/platform/country",void 0],(e=>(0,r.WY0)(e)),{revalidateOnFocus:!1}),ge=(0,i.useMemo)((()=>{const e=o||(null===K||void 0===K?void 0:K.country);if(e&&ye){var t;const o=null===ye||void 0===ye||null===(t=ye.data)||void 0===t?void 0:t.find((t=>Number(t.mobileCode)===Number(e)));return 1===(null===o||void 0===o?void 0:o.enableVoice)}return!1}),[o,ye,K]),{0:Se,1:Ce}=(0,i.useState)(!1),ke=e=>{let t=e||w;le(t),ie.current=setInterval((()=>{t<=0||(t--,t<=0&&(clearInterval(ie.current),ie.current=null),le(t))}),1e3)},Ee=async e=>{if(!p||!p.type||de&&de>0||oe||T.disabled)return;let t;try{t=await _()}catch(a){t=!1}if("function"===typeof _&&!t)return;let o,i={};if(d){var l;if(Ce(e),!ce)return window.sessionStorage.setItem(C.Gm,JSON.stringify({country_number:(null===p||void 0===p?void 0:p.country)||(null===K||void 0===K?void 0:K.country),phone_number:(null===p||void 0===p?void 0:p.mobile)||(null===te||void 0===te?void 0:te.mobile),email:(null===p||void 0===p?void 0:p.email)||(null===te||void 0===te?void 0:te.email)})),void(null===pe||void 0===pe||null===(l=pe.showCaptcha)||void 0===l||l.call(pe));i={"captcha-token":ce}}ve(Date.now()),W=Boolean(d&&Se||e),M=(null===te||void 0===te?void 0:te.email)||null,L=(null===K||void 0===K?void 0:K.country)||null,Z=(null===te||void 0===te?void 0:te.mobile)||null,H=null===p||void 0===p?void 0:p.type,V=Q,G=ee,U=null!==be&&void 0!==be&&be.ip?null===be||void 0===be?void 0:be.ip:"\u672a\u83b7\u53d6\u5230ip",(e=>{const t=Y(e);F=Date.now(),(0,g.Wrk)("User_requireCode",B({},t)),N=!0})(B({sendType:A(V,G,n),email:M,country:L,mobile:Z,type:H},p)),"email"===n&&(ne(!0),o=await(0,r.VV1)(p,i)),"mobile"===n&&(ne(!0),o=d&&Se||e?await(0,r.Q4S)(B(B({},p),{},{country:(null===p||void 0===p?void 0:p.country)||void 0}),i):await(0,r.A$t)(B(B({},p),{},{country:(null===p||void 0===p?void 0:p.country)||void 0}),i)),D.includes(null===p||void 0===p?void 0:p.type),null===z||void 0===z||z(o),o&&0===o.code?(c.yw.success(X("mc_common_captcha_send_success"),2),window.sessionStorage.setItem(se,Date.now()),setTimeout((()=>{ke()}),300)):_e&&fe(),setTimeout((()=>{ne(!1)}),300),d&&re(null)},je=()=>{ue.current&&(document.body.removeChild(ue.current),l().unmountComponentAtNode(ue.current),ue.current=null)},Oe=async()=>{if(!p||!p.type||de&&de>0||oe||T.disabled)return;let e;try{e=await _()}catch(t){e=!1}if("function"!==typeof _||e){if("mobile"===n&&ge){if(P(se)<300)return void(()=>{if(!ue.current){const e=document.createElement("div");document.body.appendChild(e),ue.current=e,setTimeout((()=>{l().render((0,R.jsx)(J,{t:X,dropdownButtonRef:ae,isEnableVoice:ge,sendHandle:Ee,destroy:je}),e)}),0)}})()}Ee()}},xe=()=>{le(0);const e=P(se);e<w&&ke(w-e),h&&e>w&&Oe()};return(0,i.useEffect)((()=>(d?(we||_e)&&("mobile"===n?void 0!==ge&&xe():xe()):"mobile"===n?void 0!==ge&&xe():xe(),()=>{je(),ie.current&&(clearInterval(ie.current),ie.current=null)})),[$,ge,we,null===p||void 0===p?void 0:p.type,_e,o,h]),(0,i.useEffect)((()=>{ce&&Ee()}),[ce]),(0,i.useImperativeHandle)(t,(()=>({send:()=>Oe(),sendTimestamp:me}))),(0,R.jsx)("div",{ref:ae,children:"button"===j?(0,R.jsx)(c.zx,B(B({style:{minWidth:88},type:"primary",ghost:!0},T),{},{disabled:oe||T.disabled,onClick:Oe,className:m()(null===T||void 0===T?void 0:T.className,de&&"sending-verification-code"),children:de?I?X(I,{num:de}):"".concat(de,"s"):X(O)})):(0,R.jsx)("span",B(B({},T),{},{className:m()("text"===j&&x().textButton,"link"!==j||de?x().textButton:x().linkButton,(oe||T.disabled)&&x().disabled,T.className,de&&"sending-verification-code"),onClick:Oe,children:de?I?X(I,{num:de}):"".concat(de,"s"):X(O)}))})}function J(e){let{t:t,dropdownButtonRef:o,isEnableVoice:n,sendHandle:d,destroy:l}=e;const{0:c,1:r}=(0,i.useState)({}),{0:a,1:u}=(0,i.useState)(!1),{0:s,1:v}=(0,i.useState)(!1),p=(0,i.useRef)();(0,i.useEffect)((()=>{function e(e){!p.current.contains(e.target)&&a&&(v(!0),setTimeout((()=>{l()}),300))}return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[a]);const f=(0,h.throttle)((()=>{const e=o.current.getBoundingClientRect(),t=p.current.getBoundingClientRect();t.width+e.left>document.body.getBoundingClientRect().width?r({top:Math.ceil(e.top+e.height),left:document.body.getBoundingClientRect().width-t.width,minWidth:e.width}):r({top:Math.ceil(e.top+e.height),left:e.left-(t.width-e.width)/2,minWidth:e.width}),u(!0)}),500);(0,i.useLayoutEffect)((()=>(f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f))),[]);const _=e=>{v(!0),setTimeout((()=>{l()}),300),d(e)};return(0,R.jsxs)("div",{className:m()(x().dropdownWrapper,a&&x().dropdownShow,s&&x().dropdownHide),style:c,ref:p,children:[(0,R.jsx)("div",{className:x().dropdownItem,onClick:()=>_(),children:t("common:mc_common_captcha_sms")}),n&&(0,R.jsx)("div",{className:x().dropdownItem,onClick:()=>_(!0),children:t("common:mc_common_captcha_voice")})]})}t.ZP=(0,I.u)((0,i.forwardRef)(q))},467383:function(e){e.exports={textButton:"send-verification-code_textButton__ZWEEH",disabled:"send-verification-code_disabled__gTTft",linkButton:"send-verification-code_linkButton__9FR98",dropdownWrapper:"send-verification-code_dropdownWrapper__l5OXX",dropdownShow:"send-verification-code_dropdownShow__uFeDU",dropdownHide:"send-verification-code_dropdownHide__4eUdE",dropdownItem:"send-verification-code_dropdownItem__YebrK"}}}]);
</script>

</body>
</html>
