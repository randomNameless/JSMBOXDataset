<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jwplayer-mux.html</title>
</head>
<body>

<script>
/*!
 * @mux/mux-data-jwplayer
 * @version 4.18.1
 * @copyright 2024 Mux, Inc.
 */
!function(){var e,t;e=this,t=function(){return function(){var e={254:function(e,t,a){e.exports=a(615).default},615:function(e,t,a){"use strict";a.d(t,{default:function(){return ua}});var r=Object.create,i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=function(e,t){return function(){return e&&(t=e(e=0)),t}},l=function(e,t){return function(){return t||e((t={exports:{}}).exports,t),t.exports}},c=function(e,t,a){return a=null!=e?r(s(e)):{},function(e,t,a,r){if(t&&"object"==typeof t||"function"==typeof t)for(var s,d=o(t),l=0,c=d.length;l<c;l++)s=d[l],!u.call(e,s)&&s!==a&&i(e,s,{get:function(e){return t[e]}.bind(null,s),enumerable:!(r=n(t,s))||r.enumerable});return e}(!t&&e&&e.__esModule?a:i(a,"default",{value:e,enumerable:!0}),e)},_=l((function(e,t){var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t.exports=a}));function p(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):p(e,t)}var h=d((function(){h()}));function f(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var v=d((function(){})),m=l((function(e,t){var a=Array.prototype.slice;t.exports=function(e,t){for(("length"in e||(e=[e]),e=a.call(e));e.length;){var r=e.shift(),i=t(r);if(i)return i;r.childNodes&&r.childNodes.length&&(e=a.call(r.childNodes).concat(e))}}})),y=l((function(e,t){function a(e,t){if(!p(this,a))return new a(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}h(),t.exports=a,a.prototype.nodeType=8,a.prototype.nodeName="#comment",a.prototype.toString=function(){return"[object Comment]"}})),g=l((function(e,t){function a(e,t){if(!p(this,a))return new a(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}h(),t.exports=a,a.prototype.type="DOMTextNode",a.prototype.nodeType=3,a.prototype.nodeName="#text",a.prototype.toString=function(){return this.data},a.prototype.replaceData=function(e,t,a){var r=this.data,i=r.substring(0,e),n=r.substring(e+t,r.length);this.data=i+a+n,this.length=this.data.length}})),b=l((function(e,t){t.exports=function(e){var t=this,a=e.type;e.target||(e.target=t),t.listeners||(t.listeners={});var r=t.listeners[a];if(r)return r.forEach((function(a){e.currentTarget=t,"function"==typeof a?a(e):a.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)}})),w=l((function(e,t){t.exports=function(e,t){var a=this;a.listeners||(a.listeners={}),a.listeners[e]||(a.listeners[e]=[]),-1===a.listeners[e].indexOf(t)&&a.listeners[e].push(t)}})),T=l((function(e,t){t.exports=function(e,t){var a=this;if(a.listeners&&a.listeners[e]){var r=a.listeners[e],i=r.indexOf(t);-1!==i&&r.splice(i,1)}}})),k=l((function(e,t){v(),t.exports=r;var a=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function r(e){switch(e.nodeType){case 3:return o(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],s=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(s=s.toLowerCase()),t.push("<"+s+function(e){var t=[];for(var a in e)i(e,a)&&t.push({name:a,value:e[a]});for(var r in e._attributes)for(var o in e._attributes[r]){var s=e._attributes[r][o],u=(s.prefix?s.prefix+":":"")+o;t.push({name:u,value:s.value})}return e.className&&t.push({name:"class",value:e.className}),t.length?n(t):""}(e)+function(e){var t=e.dataset,a=[];for(var r in t)a.push({name:"data-"+r,value:t[r]});return a.length?n(a):""}(e)),a.indexOf(s)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(r)):e.textContent||e.innerText?t.push(o(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+s+">")),t.join("")}(e)}}function i(e,t){var a=f(e[t]);return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===a||"boolean"===a||"number"===a)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function n(e){var t=[];return e.forEach((function(e){var a=e.name,r=e.value;"style"===a&&(r=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(a){var r=e[a];a=a.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=a+":"+r+";"})),t}(r)),t.push(a+'="'+function(e){return o(e).replace(/"/g,"&quot;")}(r)+'"')})),t.length?" "+t.join(" "):""}function o(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}})),x=l((function(e,t){h();var a=m(),r=b(),i=w(),n=T(),o=k(),s="http://www.w3.org/1999/xhtml";function u(e,t,a){if(!p(this,u))return new u(e);var r=void 0===a?s:a||null;this.tagName=r===s?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=r,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}t.exports=u,u.prototype.type="DOMElement",u.prototype.nodeType=1,u.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},u.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[a]=e,e.parentNode=this,t},u.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},u.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var a=null==t?-1:this.childNodes.indexOf(t);return a>-1?this.childNodes.splice(a,0,e):this.childNodes.push(e),e.parentNode=this,e},u.prototype.setAttributeNS=function(e,t,a){var r=null,i=t,n=t.indexOf(":");n>-1&&(r=t.substr(0,n),i=t.substr(n+1)),"INPUT"===this.tagName&&"type"===t?this.type=a:(this._attributes[e]||(this._attributes[e]={}))[i]={value:a,prefix:r}},u.prototype.getAttributeNS=function(e,t){var a=this._attributes[e],r=a&&a[t]&&a[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof r?null:r},u.prototype.removeAttributeNS=function(e,t){var a=this._attributes[e];a&&delete a[t]},u.prototype.hasAttributeNS=function(e,t){var a=this._attributes[e];return!!a&&t in a},u.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},u.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},u.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},u.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},u.prototype.removeEventListener=n,u.prototype.addEventListener=i,u.prototype.dispatchEvent=r,u.prototype.focus=function(){},u.prototype.toString=function(){return o(this)},u.prototype.getElementsByClassName=function(e){var t=e.split(" "),r=[];return a(this,(function(e){if(1===e.nodeType){var a=(e.className||"").split(" ");t.every((function(e){return-1!==a.indexOf(e)}))&&r.push(e)}})),r},u.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return a(this.childNodes,(function(a){1===a.nodeType&&("*"===e||a.tagName.toLowerCase()===e)&&t.push(a)})),t},u.prototype.contains=function(e){return a(this,(function(t){return e===t}))||!1}})),E=l((function(e,t){h();var a=x();function r(e){if(!p(this,r))return new r;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}t.exports=r,r.prototype.type="DocumentFragment",r.prototype.nodeType=11,r.prototype.nodeName="#document-fragment",r.prototype.appendChild=a.prototype.appendChild,r.prototype.replaceChild=a.prototype.replaceChild,r.prototype.removeChild=a.prototype.removeChild,r.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")}})),D=l((function(e,t){function a(e){}t.exports=a,a.prototype.initEvent=function(e,t,a){this.type=e,this.bubbles=t,this.cancelable=a},a.prototype.preventDefault=function(){}})),q=l((function(e,t){h();var a=m(),r=y(),i=g(),n=x(),o=E(),s=D(),u=b(),d=w(),l=T();function c(){if(!p(this,c))return new c;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}t.exports=c;var _=c.prototype;_.createTextNode=function(e){return new i(e,this)},_.createElementNS=function(e,t){var a=null===e?null:String(e);return new n(t,this,a)},_.createElement=function(e){return new n(e,this)},_.createDocumentFragment=function(){return new o(this)},_.createEvent=function(e){return new s(e)},_.createComment=function(e){return new r(e,this)},_.getElementById=function(e){return e=String(e),a(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},_.getElementsByClassName=n.prototype.getElementsByClassName,_.getElementsByTagName=n.prototype.getElementsByTagName,_.contains=n.prototype.contains,_.removeEventListener=l,_.addEventListener=d,_.dispatchEvent=u})),O=l((function(e,t){var a=q();t.exports=new a})),S=l((function(e,t){var a,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},i=O();"undefined"!=typeof document?a=document:(a=r["__GLOBAL_DOCUMENT_CACHE@4"])||(a=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),t.exports=a}));function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function P(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if("Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return A(e,t)}}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,i,n=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{!o&&null!=a.return&&a.return()}finally{if(s)throw i}}return n}}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=c(_()),I=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},L=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},C=function(e){if(e&&void 0!==e.nodeName)return e.muxId||(e.muxId=L()),e.muxId;var t;try{t=document.querySelector(e)}catch(e){}return t&&!t.muxId&&(t.muxId=e),(null==t?void 0:t.muxId)||e},j=function(e){var t;e&&void 0!==e.nodeName?e=C(t=e):t=document.querySelector(e);var a=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,a]};function H(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B=0,M=1,U=2,F=3,W=4,V=function(e){var t,a,r,i,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=e?[console,e]:[console],u=(t=console.trace).bind.apply(t,H(s)),d=(a=console.info).bind.apply(a,H(s)),l=(r=console.debug).bind.apply(r,H(s)),c=(i=console.warn).bind.apply(i,H(s)),_=(n=console.error).bind.apply(n,H(s)),p=o;return{trace:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>B))return u.apply(void 0,H(t))},debug:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>M))return l.apply(void 0,H(t))},info:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>U))return d.apply(void 0,H(t))},warn:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>F))return c.apply(void 0,H(t))},error:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!(p>W))return _.apply(void 0,H(t))},get level(){return p},set level(e){e!==this.level&&(p=null!=e?e:o)}}}("[mux]"),Q=c(_());function G(){return"1"===(Q.default.doNotTrack||Q.default.navigator&&Q.default.navigator.doNotTrack)}var J=c(_()),z={now:function(){var e=J.default.performance,t=e&&e.timing,a=t&&t.navigationStart,r="number"==typeof a&&"function"==typeof e.now?a+e.now():Date.now();return Math.round(r)}};function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t){if(!p(e,t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,a){return t&&X(e.prototype,t),a&&X(e,a),e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?K(e):t}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=te(e);if(t){var i=te(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return ae(this,a)}}h(),v();var ie=function(e){return ne(e)[0]},ne=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,a=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return a&&(t=(a.match(/[^\.]+\.[^\.]+$/)||[])[0]),[a,t]},oe=c(_()),se={exists:function(){var e=oe.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=oe.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=oe.default.performance,t=e&&e.timing;return t&&t.navigationStart}};function ue(e,t,a){a=void 0===a?1:a,e[t]=e[t]||0,e[t]+=a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){Z(e,t,a[t])}))}return e}function le(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}var ce=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],_e=["x-cdn","content-type"].concat(ce);function pe(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach((function(e){if(e){var a=e.split(": "),r=a.shift();r&&(_e.indexOf(r.toLowerCase())>=0||0===r.toLowerCase().indexOf("x-litix-"))&&(t[r]=a.join(": "))}})),t}function he(e){if(e){var t=ce.find((function(t){return void 0!==e[t]}));return t?e[t]:void 0}}var fe=function(e){var t={};for(var a in e){var r=e[a];-1!==r["DATA-ID"].search("io.litix.data.")&&(t[r["DATA-ID"].replace("io.litix.data.","")]=r.VALUE)}return t},ve=function(e){if(!e)return{};var t=se.navigationStart(),a=e.loading,r=a?a.start:e.trequest,i=a?a.first:e.tfirst,n=a?a.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+r),responseStart:Math.round(t+i),responseEnd:Math.round(t+n)}},me=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return pe(e.getAllResponseHeaders())},ye=function(e,t){if(!e||!e.requestEndDate)return{};var a,r=ie(e.url),i=e.url,n=e.bytesLoaded,o=new Date(e.requestStartDate).getTime(),s=new Date(e.firstByteDate).getTime(),u=new Date(e.requestEndDate).getTime(),d=isNaN(e.duration)?0:e.duration,l="function"==typeof t.getMetricsFor?t.getMetricsFor(e.mediaType).HttpList:t.getDashMetrics().getHttpRequests(e.mediaType);return l.length>0&&(a=pe(l[l.length-1]._responseHeaders||"")),{requestStart:o,requestResponseStart:s,requestResponseEnd:u,requestBytesLoaded:n,requestResponseHeaders:a,requestMediaDuration:d,requestHostname:r,requestUrl:i,requestId:a?he(a):void 0}},ge=function(e,t){var a=t.getQualityFor(e),r=t.getCurrentTrackFor(e).bitrateList;return r?{currentLevel:a,renditionWidth:r[a].width||null,renditionHeight:r[a].height||null,renditionBitrate:r[a].bandwidth}:{}},be=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]},we=function(e){try{var t,a;return null===(a=e.getVersion)||void 0===a||null===(t=a.call(e))||void 0===t?void 0:t.split(".").map((function(e){return parseInt(e)}))[0]}catch(e){return!1}},Te=0,ke=function(){function e(){Y(this,e),Z(this,"_listeners",void 0)}return $(e,[{key:"on",value:function(e,t,a){return t._eventEmitterGuid=t._eventEmitterGuid||++Te,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],a&&(t=t.bind(a)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var a=this._listeners&&this._listeners[e];a&&a.forEach((function(e,r){e._eventEmitterGuid===t._eventEmitterGuid&&a.splice(r,1)}))}},{key:"one",value:function(e,t,a){var r=this;t._eventEmitterGuid=t._eventEmitterGuid||++Te;var i=function(){r.off(e,i),t.apply(a||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var a=this;if(this._listeners){t=t||{};var r=this._listeners["before*"]||[],i=this._listeners[e]||[],n=this._listeners["after"+e]||[],o=function(t,r){(t=t.slice()).forEach((function(t){t.call(a,{type:e},r)}))};o(r,t),o(i,t),o(n,t)}}}]),e}(),xe=ke,Ee=c(_()),De=function(){function e(t){var a=this;Y(this,e),Z(this,"_playbackHeartbeatInterval",void 0),Z(this,"_playheadShouldBeProgressing",void 0),Z(this,"pm",void 0),this.pm=t,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,t.on("playing",(function(){a._playheadShouldBeProgressing=!0})),t.on("play",this._startPlaybackHeartbeatInterval.bind(this)),t.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),t.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),t.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),t.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),t.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),t.on("seeked",(function(){t.data.player_is_paused?a._stopPlaybackHeartbeatInterval():a._startPlaybackHeartbeatInterval()})),t.on("timeupdate",(function(){null!==a._playbackHeartbeatInterval&&t.emit("playbackheartbeat")})),t.on("devicesleep",(function(e,r){null!==a._playbackHeartbeatInterval&&(Ee.default.clearInterval(a._playbackHeartbeatInterval),t.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),a._playbackHeartbeatInterval=null)}))}return $(e,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=Ee.default.setInterval((function(){e.pm.emit("playbackheartbeat")}),this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(Ee.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e}(),qe=function e(t){var a=this;Y(this,e),Z(this,"viewErrored",void 0),t.on("viewinit",(function(){a.viewErrored=!1})),t.on("error",(function(e,r){try{var i=t.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});i&&(t.data.player_error_code=i.player_error_code||r.player_error_code,t.data.player_error_message=i.player_error_message||r.player_error_message,t.data.player_error_context=i.player_error_context||r.player_error_context,t.data.player_error_severity=i.player_error_severity||r.player_error_severity,t.data.player_error_business_exception=i.player_error_business_exception||r.player_error_business_exception,a.viewErrored=!0)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),a.viewErrored=!0}})),t.on("aftererror",(function(){var e,a,r,i,n;null===(e=t.data)||void 0===e||delete e.player_error_code,null===(a=t.data)||void 0===a||delete a.player_error_message,null===(r=t.data)||void 0===r||delete r.player_error_context,null===(i=t.data)||void 0===i||delete i.player_error_severity,null===(n=t.data)||void 0===n||delete n.player_error_business_exception}))},Oe=function(){function e(t){Y(this,e),Z(this,"_watchTimeTrackerLastCheckedTime",void 0),Z(this,"pm",void 0),this.pm=t,this._watchTimeTrackerLastCheckedTime=null,t.on("playbackheartbeat",this._updateWatchTime.bind(this)),t.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return $(e,[{key:"_updateWatchTime",value:function(e,t){var a=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=a),ue(this.pm.data,"view_watch_time",a-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=a}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e}(),Se=function(){function e(t){var a=this;Y(this,e),Z(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),Z(this,"_lastTime",void 0),Z(this,"_isAdPlaying",void 0),Z(this,"_callbackUpdatePlaybackTime",void 0),Z(this,"pm",void 0),this.pm=t,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=z.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var r=this._startPlaybackTimeTracking.bind(this);t.on("playing",r),t.on("adplaying",r),t.on("seeked",r);var i=this._stopPlaybackTimeTracking.bind(this);t.on("playbackheartbeatend",i),t.on("seeking",i),t.on("adplaying",(function(){a._isAdPlaying=!0})),t.on("adended",(function(){a._isAdPlaying=!1})),t.on("adpause",(function(){a._isAdPlaying=!1})),t.on("adbreakstart",(function(){a._isAdPlaying=!1})),t.on("adbreakend",(function(){a._isAdPlaying=!1})),t.on("adplay",(function(){a._isAdPlaying=!1})),t.on("viewinit",(function(){a._playbackTimeTrackerLastPlayheadPosition=-1,a._lastTime=z.now(),a._isAdPlaying=!1,a._callbackUpdatePlaybackTime=null}))}return $(e,[{key:"_startPlaybackTimeTracking",value:function(){null===this._callbackUpdatePlaybackTime&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=z.now(),a=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?a=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(a=t-this._lastTime),a>0&&a<=1e3&&ue(this.pm.data,"view_content_playback_time",a),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),e}(),Ae=function(){function e(t){Y(this,e),Z(this,"pm",void 0),this.pm=t;var a=this._updatePlayheadTime.bind(this);t.on("playbackheartbeat",a),t.on("playbackheartbeatend",a),t.on("timeupdate",a),t.on("destroy",(function(){t.off("timeupdate",a)}))}return $(e,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var a=this,r=function(){a.pm.currentFragmentPDT&&a.pm.currentFragmentStart&&(a.pm.data.player_program_time=a.pm.currentFragmentPDT+a.pm.data.player_playhead_time-a.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();void 0!==i&&(this.pm.data.player_playhead_time=i,r(),this._updateMaxPlayheadPosition())}}}]),e}(),Pe=3e5,Re=function e(t){if(Y(this,e),!t.disableRebufferTracking){var a,r=function(e,t){i(t),a=void 0},i=function(e){if(a){var r=e.viewer_time-a;ue(t.data,"view_rebuffer_duration",r),a=e.viewer_time,t.data.view_rebuffer_duration>Pe&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(Pe,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",(function(e,t){return i(t)})),t.on("rebufferstart",(function(e,i){a||(ue(t.data,"view_rebuffer_count",1),a=i.viewer_time,t.one("rebufferend",r))})),t.on("viewinit",(function(){a=void 0,t.off("rebufferend",r)}))}},Ne=function(){function e(t){var a=this;Y(this,e),Z(this,"_lastCheckedTime",void 0),Z(this,"_lastPlayheadTime",void 0),Z(this,"_lastPlayheadTimeUpdatedTime",void 0),Z(this,"_rebuffering",void 0),Z(this,"pm",void 0),this.pm=t,!t.disableRebufferTracking&&!t.disablePlayheadRebufferTracking&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,t.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),t.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),t.on("seeking",(function(){a._cleanupRebufferTracker(null,{viewer_time:z.now()})})))}return $(e,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime)if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var a=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&a>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0);else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&r>0&&i-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r}))}a?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e}(),Ie=Ne,Le=function(){function e(t){var a=this;Y(this,e),Z(this,"NAVIGATION_START",void 0),Z(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){var e=t.data,r=e.view_id;if(!e.view_program_changed){var i=function(e,i){var n=i.viewer_time;("playing"===e.type&&void 0===t.data.view_time_to_first_frame||"adplaying"===e.type&&(void 0===t.data.view_time_to_first_frame||a._inPrerollPosition()))&&a.calculateTimeToFirstFrame(n||z.now(),r)};t.one("playing",i),t.one("adplaying",i),t.one("viewend",(function(){t.off("playing",i),t.off("adplaying",i)}))}}))}return $(e,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e}(),Ce=function e(t){var a=this;Y(this,e),Z(this,"_lastPlayerHeight",void 0),Z(this,"_lastPlayerWidth",void 0),Z(this,"_lastPlayheadPosition",void 0),Z(this,"_lastSourceHeight",void 0),Z(this,"_lastSourceWidth",void 0),t.on("viewinit",(function(){a._lastPlayheadPosition=-1})),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach((function(e){t.on(e,(function(){if(a._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&a._lastPlayerWidth>=0&&a._lastSourceWidth>0&&a._lastPlayerHeight>=0&&a._lastSourceHeight>0){var e=t.data.player_playhead_time-a._lastPlayheadPosition;if(e<0)return void(a._lastPlayheadPosition=-1);var r=Math.min(a._lastPlayerWidth/a._lastSourceWidth,a._lastPlayerHeight/a._lastSourceHeight),i=Math.max(0,r-1),n=Math.max(0,1-r);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,n),ue(t.data,"view_total_content_playback_time",e),ue(t.data,"view_total_upscaling",i*e),ue(t.data,"view_total_downscaling",n*e)}a._lastPlayheadPosition=-1}))})),["playing","hb"].forEach((function(e){t.on(e,(function(){a._lastPlayheadPosition=t.data.player_playhead_time,a._lastPlayerWidth=t.data.player_width,a._lastPlayerHeight=t.data.player_height,a._lastSourceWidth=t.data.video_source_width,a._lastSourceHeight=t.data.video_source_height}))}))},je=function e(t){var a=this;Y(this,e),Z(this,"isSeeking",void 0),this.isSeeking=!1;var r=-1,i=function(){var e=z.now(),i=(t.data.viewer_time||e)-(r||e);ue(t.data,"view_seek_duration",i),t.data.view_max_seek_time=Math.max(t.data.view_max_seek_time||0,i),a.isSeeking=!1,r=-1};t.on("seeking",(function(e,n){Object.assign(t.data,n),a.isSeeking&&n.viewer_time-r<=2e3?r=n.viewer_time:(a.isSeeking&&i(),a.isSeeking=!0,r=n.viewer_time,ue(t.data,"view_seek_count",1),t.send("seeking"))})),t.on("seeked",(function(){i()})),t.on("viewend",(function(){a.isSeeking&&(i(),t.send("seeked")),a.isSeeking=!1,r=-1}))},He=function(e,t){e.push(t),e.sort((function(e,t){return e.viewer_time-t.viewer_time}))},Be=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],Me=function(){function e(t){var a=this;Y(this,e),Z(this,"_adHasPlayed",void 0),Z(this,"_adRequests",void 0),Z(this,"_adResponses",void 0),Z(this,"_currentAdRequestNumber",void 0),Z(this,"_currentAdResponseNumber",void 0),Z(this,"_prerollPlayTime",void 0),Z(this,"_wouldBeNewAdPlay",void 0),Z(this,"isAdBreak",void 0),Z(this,"pm",void 0),this.pm=t,t.on("viewinit",(function(){a.isAdBreak=!1,a._currentAdRequestNumber=0,a._currentAdResponseNumber=0,a._adRequests=[],a._adResponses=[],a._adHasPlayed=!1,a._wouldBeNewAdPlay=!0,a._prerollPlayTime=void 0})),Be.forEach((function(e){return t.on(e,a._updateAdData.bind(a))}));var r=function(){a.isAdBreak=!1};t.on("adbreakstart",(function(){a.isAdBreak=!0})),t.on("play",r),t.on("playing",r),t.on("viewend",r),t.on("adrequest",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdRequestNumber++},r),He(a._adRequests,r),ue(t.data,"view_ad_request_count"),a.inPrerollPosition()&&(t.data.view_preroll_requested=!0,a._adHasPlayed||ue(t.data,"view_preroll_request_count"))})),t.on("adresponse",(function(e,r){r=Object.assign({ad_request_id:"generatedAdRequestId"+a._currentAdResponseNumber++},r),He(a._adResponses,r);var i=a.findAdRequest(r.ad_request_id);i&&ue(t.data,"view_ad_request_time",Math.max(0,r.viewer_time-i.viewer_time))})),t.on("adplay",(function(e,r){a._adHasPlayed=!0,a._wouldBeNewAdPlay&&(a._wouldBeNewAdPlay=!1,ue(t.data,"view_ad_played_count")),a.inPrerollPosition()&&!t.data.view_preroll_played&&(t.data.view_preroll_played=!0,a._adRequests.length>0&&(t.data.view_preroll_request_time=Math.max(0,r.viewer_time-a._adRequests[0].viewer_time)),t.data.view_start&&(t.data.view_startup_preroll_request_time=Math.max(0,r.viewer_time-t.data.view_start)),a._prerollPlayTime=r.viewer_time)})),t.on("adplaying",(function(e,r){a.inPrerollPosition()&&void 0===t.data.view_preroll_load_time&&void 0!==a._prerollPlayTime&&(t.data.view_preroll_load_time=r.viewer_time-a._prerollPlayTime,t.data.view_startup_preroll_load_time=r.viewer_time-a._prerollPlayTime)})),t.on("adclicked",(function(e,r){a._wouldBeNewAdPlay||ue(t.data,"view_ad_clicked_count")})),t.on("adskipped",(function(e,r){a._wouldBeNewAdPlay||ue(t.data,"view_ad_skipped_count")})),t.on("adended",(function(){a._wouldBeNewAdPlay=!0})),t.on("aderror",(function(){a._wouldBeNewAdPlay=!0}))}return $(e,[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var a=R(ne(t.ad_tag_url),2),r=a[0],i=a[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var n=R(ne(t.ad_asset_url),2),o=n[0],s=n[1];this.pm.data.view_preroll_ad_asset_domain=s,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}]),e}(),Ue=c(_()),Fe=function e(t){Y(this,e);var a,r,i=function(){t.disableRebufferTracking||a&&(ue(t.data,"view_waiting_rebuffer_duration",z.now()-a),a=!1,Ue.default.clearInterval(r))},n=!1,o=function(){n=!1,i()};t.on("waiting",(function(){n&&(t.disableRebufferTracking||(ue(t.data,"view_waiting_rebuffer_count",1),a=z.now(),r=Ue.default.setInterval((function(){if(a){var e=z.now();ue(t.data,"view_waiting_rebuffer_duration",e-a),a=e}}),250)))})),t.on("playing",(function(){i(),n=!0})),t.on("pause",o),t.on("seeking",o)},We=function e(t){var a=this;Y(this,e),Z(this,"lastWallClockTime",void 0);var r=function(){a.lastWallClockTime=z.now(),t.on("before*",i)},i=function(e){var r=z.now(),i=a.lastWallClockTime;a.lastWallClockTime=r,r-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:r}),Object.assign(t.data,{viewer_time:r}),t.send("devicewake"))};t.one("playbackheartbeat",r),t.on("playbackheartbeatend",(function(){t.off("before*",i),t.one("playbackheartbeat",r)}))},Ve=c(_()),Qe=function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var r in a)t[r]=a[r]}return t};function t(a){function r(t,i,n){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(n=e({path:"/"},r.defaults,n)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*n.expires),n.expires=s}try{o=JSON.stringify(i),/^[\{\[]/.test(o)&&(i=o)}catch(e){}return i=a.write?a.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}t||(o={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,l=0;l<u.length;l++){var c=u[l].split("="),_=c.slice(1).join("=");'"'===_.charAt(0)&&(_=_.slice(1,-1));try{var p=c[0].replace(d,decodeURIComponent);if(_=a.read?a.read(_,p):a(_,p)||_.replace(d,decodeURIComponent),this.json)try{_=JSON.parse(_)}catch(e){}if(t===p){o=_;break}t||(o[p]=_)}catch(e){}}return o}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,a){r(t,"",e(a,{expires:-1}))},r.withConverter=t,r}return t((function(){}))}(),Ge="muxData",Je=function(){var e;try{e=(Qe.get(Ge)||"").split("&").reduce((function(e,t){var a=R(t.split("="),2),r=a[0],i=a[1],n=+i,o=i&&n==i?n:i;return e[r]=o,e}),{})}catch(t){e={}}return e},ze=function(e){try{Qe.set(Ge,(t=e,Object.entries(t).map((function(e){var t=R(e,2),a=t[0],r=t[1];return"".concat(a,"=").concat(r)})).join("&")),{expires:365})}catch(e){}var t},Ke=function(){var e=Je();return e.mux_viewer_id=e.mux_viewer_id||I(),e.msn=e.msn||Math.random(),ze(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}};function Ye(e,t){var a=t.beaconCollectionDomain,r=t.beaconDomain;if(a)return"https://"+a;var i=r||"litix.io";return(e=e||"inferred").match(/^[a-z0-9]+$/)?"https://"+e+"."+i:"https://img.litix.io/a.gif"}var Xe=c(_()),$e=function(){var e;switch(Ze()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},Ze=function(){var e=Xe.default.navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};$e.getConnectionFromAPI=Ze;var et=$e,tt=rt({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),at=rt({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function rt(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t}function it(e){var t={},a={};return Object.keys(e).forEach((function(r){var i=!1;if(e.hasOwnProperty(r)&&void 0!==e[r]){var n=r.split("_"),o=n[0],s=tt[o];s||(V.info("Data key word `"+n[0]+"` not expected in "+r),s=o+"_"),n.splice(1).forEach((function(e){"url"===e&&(i=!0),at[e]?s+=at[e]:Number(e)&&Math.floor(Number(e))===Number(e)?s+=e:(V.info("Data key word `"+e+"` not expected in "+r),s+="_"+e+"_")})),i?a[s]=e[r]:t[s]=e[r]}})),Object.assign(t,a)}var nt=c(_()),ot={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},st=["hb","requestcompleted","requestfailed","requestcanceled"],ut="https://img.litix.io",dt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||ut,this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},ot,t)};dt.prototype.queueEvent=function(e,t){var a=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(a),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},dt.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},dt.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),nt.default.clearTimeout(this._sendTimeout)},dt.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],it({mux_view_message:"event queue truncated"}));var a=this._createPayload(t);ct(this._beaconUrl,a,!0,(function(){}))},dt.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var a=this._createPayload(t),r=z.now();ct(this._beaconUrl,a,!1,(function(a,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,V.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=z.now()-r,e._postInFlight=!1}))}},dt.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},dt.prototype._startBeaconSending=function(){var e=this;nt.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=nt.default.setTimeout((function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()}),this._getNextBeaconTime()))},dt.prototype._createPayload=function(e){var t=this,a={transmission_timestamp:Math.round(z.now())};this._roundTripTime&&(a.rtt_ms=Math.round(this._roundTripTime));var r,i,n,o=function(){r=JSON.stringify({metadata:a,events:i||e}),n=r.length/1024},s=function(){return n<=t._options.maxPayloadKBSize};return o(),s()||(V.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),i=e.filter((function(e){return-1===st.indexOf(e.e)})),o()),s()||(V.info("Payload size still too big ("+n+" kb). Cropping fields.."),i.forEach((function(e){for(var t in e){var a=e[t];"string"==typeof a&&a.length>51200&&(e[t]=a.substring(0,51200))}})),o()),r};var lt=function(e){return e.length<=57344},ct=function(e,t,a,r){if(a&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))r();else if(nt.default.fetch)nt.default.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:lt(t)}).then((function(e){return r(null,e.ok?null:"Error")})).catch((function(e){return r(null,e)}));else{if(nt.default.XMLHttpRequest){var i=new nt.default.XMLHttpRequest;return i.onreadystatechange=function(){if(4===i.readyState)return r(null,200!==i.status?"error":void 0)},i.open("POST",e),i.setRequestHeader("Content-Type","text/plain"),void i.send(t)}r()}},_t=dt,pt=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],ht=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],ft=["ad_id","ad_creative_id","ad_universal_id"],vt=["viewstart","error","ended","viewend"],mt=function(){function e(t,a){var r,i,n,o,s,u,d,l,c,_,p,h,f,v,m,y=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y(this,e),Z(this,"mux",void 0),Z(this,"envKey",void 0),Z(this,"options",void 0),Z(this,"eventQueue",void 0),Z(this,"sampleRate",void 0),Z(this,"disableCookies",void 0),Z(this,"respectDoNotTrack",void 0),Z(this,"previousBeaconData",void 0),Z(this,"lastEventTime",void 0),Z(this,"rateLimited",void 0),Z(this,"pageLevelData",void 0),Z(this,"viewerData",void 0),this.mux=t,this.envKey=a,this.options=y,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new _t(Ye(this.envKey,this.options)),this.sampleRate=null!==(f=this.options.sampleRate)&&void 0!==f?f:1,this.disableCookies=null!==(v=this.options.disableCookies)&&void 0!==v&&v,this.respectDoNotTrack=null!==(m=this.options.respectDoNotTrack)&&void 0!==m&&m,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(r=this.options.platform)||void 0===r?void 0:r.name,viewer_application_version:null===(i=this.options.platform)||void 0===i?void 0:i.version,viewer_application_engine:null===(n=this.options.platform)||void 0===n?void 0:n.layout,viewer_device_name:null===(o=this.options.platform)||void 0===o?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:null===(s=this.options.platform)||void 0===s?void 0:s.manufacturer,viewer_os_family:null===(d=this.options.platform)||void 0===d||null===(u=d.os)||void 0===u?void 0:u.family,viewer_os_architecture:null===(c=this.options.platform)||void 0===c||null===(l=c.os)||void 0===l?void 0:l.architecture,viewer_os_version:null===(p=this.options.platform)||void 0===p||null===(_=p.os)||void 0===_?void 0:_.version,viewer_connection_type:et(),page_url:null===Ve.default||void 0===Ve.default||null===(h=Ve.default.location)||void 0===h?void 0:h.href},this.viewerData=this.disableCookies?{}:Ke()}return $(e,[{key:"send",value:function(e,t){if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&G())return V.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!=typeof t)return V.error("A data object was expected in send() but was not provided");var a=this.disableCookies?{}:function(){var e=Je(),t=z.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=I(),e.sst=t),e.sex=t+15e5,ze(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}(),r=le(de({},this.pageLevelData,t,a,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i,n=(null!==(i=r.mux_sample_number)&&void 0!==i?i:0)>=this.sampleRate,o=it(this._deduplicateBeaconData(e,r));if(this.lastEventTime=this.mux.utils.now(),n)return V.info("Not sending event due to sample rate restriction",e,r,o);if(this.envKey||V.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,o),!this.rateLimited)if(V.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):vt.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",o=it(r),this.eventQueue.queueEvent(r.event,o),V.error("Beaconing disabled due to rate limit.")}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var a=this,r={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)r=de({},t),i&&(this.previousBeaconData=r),i&&"viewend"===e&&(this.previousBeaconData=null);else{var n=0===e.indexOf("request");Object.entries(t).forEach((function(t){var i=R(t,2),o=i[0],s=i[1];a.previousBeaconData&&(s!==a.previousBeaconData[o]||pt.indexOf(o)>-1||a.objectHasChanged(n,o,s,a.previousBeaconData[o])||a.eventRequiresKey(e,o))&&(r[o]=s,a.previousBeaconData[o]=s)}))}return r}},{key:"objectHasChanged",value:function(e,t,a,r){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"==typeof a&&"object"==typeof r&&Object.keys(a||{}).length===Object.keys(r||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return!!("renditionchange"===e&&0===t.indexOf("video_source_")||ft.includes(t)&&ht.includes(e))}}]),e}(),yt=function e(t){Y(this,e);var a=0,r=0,i=0,n=0,o=0,s=0,u=0;t.on("requestcompleted",(function(e,s){var u,d,l=s.request_start,c=s.request_response_start,_=s.request_response_end,p=s.request_bytes_loaded;if(n++,c?(u=c-(null!=l?l:0),d=(null!=_?_:0)-c):d=(null!=_?_:0)-(null!=l?l:0),d>0&&p&&p>0){var h=p/d*8e3;o++,r+=p,i+=d,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,h),t.data.view_average_request_throughput=r/i*8e3,t.data.view_request_count=n,u>0&&(a+=u,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,u),t.data.view_average_request_latency=a/o)}})),t.on("requestfailed",(function(e,a){n++,s++,t.data.view_request_count=n,t.data.view_request_failed_count=s})),t.on("requestcanceled",(function(e,a){n++,u++,t.data.view_request_count=n,t.data.view_request_canceled_count=u}))},gt=function e(t){var a=this;Y(this,e),Z(this,"_lastEventTime",void 0),t.on("before*",(function(e,r){var i=r.viewer_time,n=z.now(),o=a._lastEventTime;if(a._lastEventTime=n,o&&n-o>36e5){var s=Object.keys(t.data).reduce((function(e,a){return 0===a.indexOf("video_")?Object.assign(e,Z({},a,t.data[a])):e}),{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view");var u=t.playbackHeartbeat._playheadShouldBeProgressing;t._resetView(Object.assign({viewer_time:i},s)),t.playbackHeartbeat._playheadShouldBeProgressing=u,t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}}))},bt=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],wt=new Set(["requestcompleted","requestfailed","requestcanceled"]),Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(a,e);var t=re(a);function a(e,r,i){var n;Y(this,a),Z(K(n=t.call(this)),"DOM_CONTENT_LOADED_EVENT_END",void 0),Z(K(n),"NAVIGATION_START",void 0),Z(K(n),"_destroyed",void 0),Z(K(n),"_heartBeatTimeout",void 0),Z(K(n),"adTracker",void 0),Z(K(n),"dashjs",void 0),Z(K(n),"data",void 0),Z(K(n),"disablePlayheadRebufferTracking",void 0),Z(K(n),"disableRebufferTracking",void 0),Z(K(n),"errorTracker",void 0),Z(K(n),"errorTranslator",void 0),Z(K(n),"getAdData",void 0),Z(K(n),"getPlayheadTime",void 0),Z(K(n),"getStateData",void 0),Z(K(n),"hlsjs",void 0),Z(K(n),"id",void 0),Z(K(n),"longResumeTracker",void 0),Z(K(n),"minimumRebufferDuration",void 0),Z(K(n),"mux",void 0),Z(K(n),"oldEmit",void 0),Z(K(n),"playbackEventDispatcher",void 0),Z(K(n),"playbackHeartbeat",void 0),Z(K(n),"playbackHeartbeatTime",void 0),Z(K(n),"playheadTime",void 0),Z(K(n),"seekingTracker",void 0),Z(K(n),"sustainedRebufferThreshold",void 0),Z(K(n),"watchTimeTracker",void 0),Z(K(n),"currentFragmentPDT",void 0),Z(K(n),"currentFragmentStart",void 0),n.DOM_CONTENT_LOADED_EVENT_END=se.domContentLoadedEventEnd(),n.NAVIGATION_START=se.navigationStart(),n.mux=e,n.id=r,null!=i&&i.beaconDomain&&n.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),(i=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},i)).data=i.data||{},i.data.property_key&&(i.data.env_key=i.data.property_key,delete i.data.property_key),V.level=i.debug?M:F,n.getPlayheadTime=i.getPlayheadTime,n.getStateData=i.getStateData||function(){return{}},n.getAdData=i.getAdData||function(){},n.minimumRebufferDuration=i.minimumRebufferDuration,n.sustainedRebufferThreshold=i.sustainedRebufferThreshold,n.playbackHeartbeatTime=i.playbackHeartbeatTime,n.disableRebufferTracking=i.disableRebufferTracking,n.disableRebufferTracking&&n.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),n.disablePlayheadRebufferTracking=i.disablePlayheadRebufferTracking,n.errorTranslator=i.errorTranslator,n.playbackEventDispatcher=new mt(e,i.data.env_key,i),n.data={player_instance_id:I(),mux_sample_rate:i.sampleRate,beacon_domain:i.beaconCollectionDomain||i.beaconDomain},n.data.view_sequence_number=1,n.data.player_sequence_number=1,n.oldEmit=n.emit,n.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var o=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(K(n));if(n.on("viewinit",(function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",o),this.one("adbreakstart",o)})),n.on("videochange",(function(e,t){this._resetView(t)})),n.on("programchange",(function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(t,{view_program_changed:!0})),o(),this.emit("play"),this.emit("playing")})),n.on("fragmentchange",(function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart})),n.on("destroy",n.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var s=function(){var e=void 0!==n.data.view_start;n.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&n.mux.WINDOW_HIDDEN&&(n.data.player_is_paused||n.emit("hb"))};window.addEventListener("visibilitychange",s,!1);var u=function(e){e.persisted||n.destroy()};window.addEventListener("pagehide",u,!1),n.on("destroy",(function(){window.removeEventListener("visibilitychange",s),window.removeEventListener("pagehide",u)}))}return n.on("playerready",(function(e,t){Object.assign(this.data,t)})),bt.forEach((function(e){n.on(e,(function(t,a){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,a),this._sanitizeData()})),n.on("after"+e,(function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)}))})),n.on("viewend",(function(e,t){Object.assign(n.data,t)})),n.one("playerready",(function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time})),n.longResumeTracker=new gt(K(n)),n.errorTracker=new qe(K(n)),new We(K(n)),n.seekingTracker=new je(K(n)),n.playheadTime=new Ae(K(n)),n.playbackHeartbeat=new De(K(n)),new Ce(K(n)),n.watchTimeTracker=new Oe(K(n)),new Se(K(n)),n.adTracker=new Me(K(n)),new Ie(K(n)),new Re(K(n)),new Le(K(n)),new Fe(K(n)),new yt(K(n)),i.hlsjs&&n.addHLSJS(i),i.dashjs&&n.addDashJS(i),n.emit("viewinit",i.data),n}return $(a,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach((function(e){t[e]=void 0})),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var a=R(ne(t.video_source_url),2),r=a[0],i=a[1];t.video_source_domain=i,t.video_source_hostname=r}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,wt.has(e)||this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_resetView",value:function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach((function(t){var a=parseInt(e.data[t],10);e.data[t]=isNaN(a)?void 0:a})),["player_source_url","video_source_url"].forEach((function(t){if(e.data[t]){var a=e.data[t].toLowerCase();(0===a.indexOf("data:")||0===a.indexOf("blob:"))&&(e.data[t]="MSE style URL")}}))}},{key:"_resetVideoData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("video_")&&delete e.data[t]}))}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach((function(t){0===t.indexOf("view_")&&delete e.data[t]})),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=I(),a=function(){t===e.data.view_id&&ue(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",a):a()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout((function(){e.data.player_is_paused||e.emit("hb")}),1e4)}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,a){var r=arguments.length>4?arguments[4]:void 0,i=e.log,n=e.utils.secondsToMs,o=function(e){var t,a=parseInt(r.version);return 1===a&&null!==e.programDateTime&&(t=e.programDateTime),0===a&&null!==e.pdt&&(t=e.pdt),t};if(se.exists()){var s=function(a,r){return e.emit(t,a,r)},u=function(e,t){var a=t.levels,r=t.audioTracks,i=t.url,n=t.stats,o=t.networkDetails,u=t.sessionData,d={},l={};a.forEach((function(e,t){d[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}})),r.forEach((function(e,t){l[t]={name:e.name,language:e.lang,bitrate:e.bitrate}}));var c=ve(n),_=c.bytesLoaded,p=c.requestStart,h=c.responseStart,f=c.responseEnd;s("requestcompleted",le(de({},fe(u)),{request_event_type:e,request_bytes_loaded:_,request_start:p,request_response_start:h,request_response_end:f,request_type:"manifest",request_hostname:ie(i),request_response_headers:me(o),request_rendition_lists:{media:d,audio:l,video:{}}}))};a.on(r.Events.MANIFEST_LOADED,u);var d=function(e,t){var a=t.details,r=t.level,i=t.networkDetails,u=t.stats,d=ve(u),l=d.bytesLoaded,c=d.requestStart,_=d.responseStart,p=d.responseEnd,h=a.fragments[a.fragments.length-1],f=o(h)+n(h.duration);s("requestcompleted",{request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:_,request_response_end:p,request_current_level:r,request_type:"manifest",request_hostname:ie(a.url),request_response_headers:me(i),video_holdback:a.holdBack&&n(a.holdBack),video_part_holdback:a.partHoldBack&&n(a.partHoldBack),video_part_target_duration:a.partTarget&&n(a.partTarget),video_target_duration:a.targetduration&&n(a.targetduration),video_source_is_live:a.live,player_manifest_newest_program_time:isNaN(f)?void 0:f})};a.on(r.Events.LEVEL_LOADED,d);var l=function(e,t){var a=t.details,r=t.networkDetails,i=t.stats,n=ve(i),o=n.bytesLoaded,u=n.requestStart,d=n.responseStart,l=n.responseEnd;s("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:u,request_response_start:d,request_response_end:l,request_type:"manifest",request_hostname:ie(a.url),request_response_headers:me(r)})};a.on(r.Events.AUDIO_TRACK_LOADED,l);var c=function(e,t){var r=t.stats,i=t.networkDetails,n=t.frag;r=r||n.stats;var o=ve(r),u=o.bytesLoaded,d=o.requestStart,l=o.responseStart,c=o.responseEnd,_=i?me(i):void 0,p={request_event_type:e,request_bytes_loaded:u,request_start:d,request_response_start:l,request_response_end:c,request_hostname:i?ie(i.responseURL):void 0,request_id:_?he(_):void 0,request_response_headers:_,request_media_duration:n.duration,request_url:null==i?void 0:i.responseURL};"main"===n.type?(p.request_type="media",p.request_current_level=n.level,p.request_video_width=(a.levels[n.level]||{}).width,p.request_video_height=(a.levels[n.level]||{}).height,p.request_labeled_bitrate=(a.levels[n.level]||{}).bitrate):p.request_type=n.type,s("requestcompleted",p)};a.on(r.Events.FRAG_LOADED,c);var _=function(e,t){var a=t.frag,r=a.start,i={currentFragmentPDT:o(a),currentFragmentStart:n(r)};s("fragmentchange",i)};a.on(r.Events.FRAG_CHANGED,_);var p=function(e,t){var a=t.type,i=t.details,n=t.response,o=t.fatal,u=t.frag,d=t.networkDetails,l=(null==u?void 0:u.url)||t.url||"",c=d?me(d):void 0;if((i===r.ErrorDetails.MANIFEST_LOAD_ERROR||i===r.ErrorDetails.MANIFEST_LOAD_TIMEOUT||i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT||i===r.ErrorDetails.LEVEL_LOAD_ERROR||i===r.ErrorDetails.LEVEL_LOAD_TIMEOUT||i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT)&&s("requestfailed",{request_error:i,request_url:l,request_hostname:ie(l),request_id:c?he(c):void 0,request_type:i===r.ErrorDetails.FRAG_LOAD_ERROR||i===r.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":i===r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||i===r.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":i===r.ErrorDetails.SUBTITLE_LOAD_ERROR||i===r.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":i===r.ErrorDetails.KEY_LOAD_ERROR||i===r.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==n?void 0:n.code,request_error_text:null==n?void 0:n.text}),o){var _,p="".concat(l?"url: ".concat(l,"\n"):"")+"".concat(n&&(n.code||n.text)?"response: ".concat(n.code,", ").concat(n.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(_=t.err)||void 0===_?void 0:_.message,"\n"):"");s("error",{player_error_code:a,player_error_message:i,player_error_context:p})}};a.on(r.Events.ERROR,p);var h=function(e,t){var a=t.frag,r=a&&a._url||"";s("requestcanceled",{request_event_type:e,request_url:r,request_type:"media",request_hostname:ie(r)})};a.on(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h);var f=function(e,t){var r=t.level,n=a.levels[r];if(n&&n.attrs&&n.attrs.BANDWIDTH){var o,u=n.attrs.BANDWIDTH,d=parseFloat(n.attrs["FRAME-RATE"]);isNaN(d)||(o=d),u?s("renditionchange",{video_source_fps:o,video_source_bitrate:u,video_source_width:n.width,video_source_height:n.height,video_source_rendition_name:n.name,video_source_codec:null==n?void 0:n.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};a.on(r.Events.LEVEL_SWITCHED,f),a._stopMuxMonitor=function(){a.off(r.Events.MANIFEST_LOADED,u),a.off(r.Events.LEVEL_LOADED,d),a.off(r.Events.AUDIO_TRACK_LOADED,l),a.off(r.Events.FRAG_LOADED,c),a.off(r.Events.FRAG_CHANGED,_),a.off(r.Events.ERROR,p),a.off(r.Events.FRAG_LOAD_EMERGENCY_ABORTED,h),a.off(r.Events.LEVEL_SWITCHED,f),a.off(r.Events.DESTROYING,a._stopMuxMonitor),delete a._stopMuxMonitor},a.on(r.Events.DESTROYING,a._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){this.hlsjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,a){var r=e.log;if(a&&a.on){var i=we(a),n=function(a,r){return e.emit(t,a,r)},o=function(e){var t=e.type,a=(e.data||{}).url;n("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:ie(a),request_url:a})};a.on("manifestLoaded",o);var s={},u=function(e){if("function"!=typeof e.getRequests)return null;var t=e.getRequests({state:"executed"});return 0===t.length?null:t[t.length-1]},d=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);l({type:t,request:i,chunk:r})},l=function(e){var t=e.type,r=e.chunk,i=e.request,o=(r||{}).mediaInfo||{},u=o.type,d=o.bitrateList,l={};(d=d||[]).forEach((function(e,t){l[t]={},l[t].width=e.width,l[t].height=e.height,l[t].bitrate=e.bandwidth,l[t].attrs={}})),"video"===u?s.video=l:"audio"===u?s.audio=l:s.media=l;var c=ye(i,a),_=c.requestStart,p=c.requestResponseStart,h=c.requestResponseEnd,f=c.requestResponseHeaders,v=c.requestMediaDuration,m=c.requestHostname,y=c.requestUrl,g=c.requestId;n("requestcompleted",{request_event_type:t,request_start:_,request_response_start:p,request_response_end:h,request_bytes_loaded:-1,request_type:u+"_init",request_response_headers:f,request_hostname:m,request_id:g,request_url:y,request_media_duration:v,request_rendition_lists:s})};i>=4?a.on("initFragmentLoaded",l):a.on("initFragmentLoaded",d);var c=function(e){var t=e.type,a=e.fragmentModel,r=e.chunk,i=u(a);_({type:t,request:i,chunk:r})},_=function(e){var t=e.type,r=e.chunk,i=e.request,o=r||{},s=o.mediaInfo,u=o.start,d=(s||{}).type,l=ye(i,a),c=l.requestStart,_=l.requestResponseStart,p=l.requestResponseEnd,h=l.requestBytesLoaded,f=l.requestResponseHeaders,v=l.requestMediaDuration,m=l.requestHostname,y=l.requestUrl,g=l.requestId,b=ge(d,a),w=b.currentLevel,T=b.renditionWidth,k=b.renditionHeight,x=b.renditionBitrate;n("requestcompleted",{request_event_type:t,request_start:c,request_response_start:_,request_response_end:p,request_bytes_loaded:h,request_type:d,request_response_headers:f,request_hostname:m,request_id:g,request_url:y,request_media_start_time:u,request_media_duration:v,request_current_level:w,request_labeled_bitrate:x,request_video_width:T,request_video_height:k})};i>=4?a.on("mediaFragmentLoaded",_):a.on("mediaFragmentLoaded",c);var p={video:void 0,audio:void 0,totalBitrate:void 0},h=function(){if(p.video&&"number"==typeof p.video.bitrate){if(!p.video.width||!p.video.height)return void r.warn("have bitrate info for video but missing width/height");var e=p.video.bitrate;if(p.audio&&"number"==typeof p.audio.bitrate&&(e+=p.audio.bitrate),e!==p.totalBitrate)return p.totalBitrate=e,{video_source_bitrate:e,video_source_height:p.video.height,video_source_width:p.video.width,video_source_codec:be(p.video.codec)}}},f=function(e,t,i){if("number"==typeof e.newQuality){var o=e.mediaType;if("audio"===o||"video"===o){var s=a.getBitrateInfoListFor(o).find((function(t){return t.qualityIndex===e.newQuality}));if(!s||"number"!=typeof s.bitrate)return void r.warn("missing bitrate info for ".concat(o));p[o]=le(de({},s),{codec:a.getCurrentTrackFor(o).codec});var u=h();u&&n("renditionchange",u)}}else r.warn("missing evt.newQuality in qualityChangeRendered event",e)};a.on("qualityChangeRendered",f);var v=function(e){var t=e.request,a=e.mediaType;n("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:a,request_hostname:ie(t.url)})};a.on("fragmentLoadingAbandoned",v);var m=function(e){var t,a,r=e.error,i=(null==r||null===(t=r.data)||void 0===t?void 0:t.request)||{},o=(null==r||null===(a=r.data)||void 0===a?void 0:a.response)||{};27===(null==r?void 0:r.code)&&n("requestfailed",{request_error:i.type+"_"+i.action,request_url:i.url,request_hostname:ie(i.url),request_type:i.mediaType,request_error_code:o.status,request_error_text:o.statusText});var s="".concat(null!=i&&i.url?"url: ".concat(i.url,"\n"):"")+"".concat(null!=o&&o.status||null!=o&&o.statusText?"response: ".concat(null==o?void 0:o.status,", ").concat(null==o?void 0:o.statusText,"\n"):"");n("error",{player_error_code:null==r?void 0:r.code,player_error_message:null==r?void 0:r.message,player_error_context:s})};a.on("error",m),a._stopMuxMonitor=function(){a.off("manifestLoaded",o),a.off("initFragmentLoaded",l),a.off("mediaFragmentLoaded",_),a.off("qualityChangeRendered",f),a.off("error",m),a.off("fragmentLoadingAbandoned",v),delete a._stopMuxMonitor}}else r.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){this.dashjs&&(function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}(this.dashjs),this.dashjs=void 0)}}]),a}(xe),kt=Tt;v();var xt,Et=c(S()),Dt=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],qt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Ot=c(_());Ot.default&&Ot.default.WeakMap&&(xt=new WeakMap);var St="#EXT-X-TARGETDURATION",At="#EXT-X-PART-INF",Pt="#EXT-X-SERVER-CONTROL",Rt="#EXTINF",Nt="#EXT-X-PROGRAM-DATE-TIME",It="#EXT-X-VERSION",Lt="#EXT-X-SESSION-DATA",Ct=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};Ct.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},Ct.prototype.processLine=function(e){var t=e.indexOf(":"),a=Wt(e,t),r=a[0],i=2===a.length?Bt(a[1]):void 0;if("#"!==r[0])this.currentUri.uri=r,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(r){case St:if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case At:jt(this.manifest,a),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case Pt:jt(this.manifest,a),this.setHoldBack();break;case Rt:0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case Nt:var n=i,o=new Date(n);this.manifest.dateTimeString||(this.manifest.dateTimeString=n,this.manifest.dateTimeObject=o),this.currentUri.dateTimeString=n,this.currentUri.dateTimeObject=o;break;case It:jt(this.manifest,a);break;case Lt:var s=Vt(a[1]),u=fe(s);Object.assign(this.manifest.sessionData,u)}},Ct.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,a=e.targetDuration,r=e.partTargetDuration;if(t){var i="holdBack",n="partHoldBack",o=a&&3*a,s=r&&2*r;a&&!t.hasOwnProperty(i)&&(t[i]=o),o&&t[i]<o&&(t[i]=o),r&&!t.hasOwnProperty(n)&&(t[n]=3*r),r&&t[n]<s&&(t[n]=s)}};var jt=function(e,t){var a,r=Ht(t[0].replace("#EXT-X-",""));Ft(t[1])?(a={},a=Object.assign(Ut(t[1]),a)):a=Bt(t[1]),e[r]=a},Ht=function(e){return e.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()}))},Bt=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},Mt=function(e){var t={},a=e.split("=");return a.length>1&&(t[Ht(a[0])]=Bt(a[1])),t},Ut=function(e){for(var t=e.split(","),a={},r=0;t.length>r;r++){var i=t[r],n=Mt(i);a=Object.assign(n,a)}return a},Ft=function(e){return e.indexOf("=")>-1},Wt=function(e,t){return-1===t?[e]:[e.substring(0,t),e.substring(t+1)]},Vt=function(e){var t={};if(e){var a=e.search(",");return[e.slice(0,a),e.slice(a+1)].forEach((function(e,a){for(var r=e.replace(/['"]+/g,"").split("="),i=0;i<r.length;i++)"DATA-ID"===r[i]&&(t["DATA-ID"]=r[1-i]),"VALUE"===r[i]&&(t.VALUE=r[1-i])})),{data:t}}},Qt=Ct,Gt={safeCall:function(e,t,a,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,a)}catch(e){V.info("safeCall error",e)}return i},safeIncrement:ue,getComputedStyle:function(e,t){return e&&t&&Ot.default&&"function"==typeof Ot.default.getComputedStyle?(xt&&xt.has(e)&&(a=xt.get(e)),a||(a=Ot.default.getComputedStyle(e,null),xt&&xt.set(e,a)),a.getPropertyValue(t)):"";var a},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:pe,cdnHeadersToRequestId:he,extractHostnameAndDomain:ne,extractHostname:ie,manifestParser:Qt,generateShortID:L,generateUUID:I,now:z.now},Jt={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},zt={},Kt=function(e){var t=arguments;"string"==typeof e?Kt.hasOwnProperty(e)?N.default.setTimeout((function(){t=Array.prototype.splice.call(t,1),Kt[e].apply(null,t)}),0):V.warn("`"+e+"` is an unknown task"):"function"==typeof e?N.default.setTimeout((function(){e(Kt)}),0):V.warn("`"+e+"` is invalid.")},Yt={loaded:z.now(),NAME:"mux-embed",VERSION:"5.4.1",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,a){var r=R(j(t),3),i=r[0],n=r[1],o=r[2],s=e.log,u=e.utils.getComputedStyle,d=e.utils.secondsToMs;if(!i)return s.error("No element was found with the `"+n+"` query selector.");if("video"!==o&&"audio"!==o)return s.error("The element of `"+n+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,s.warn("Already monitoring this video element, replacing existing event listeners")),(a=Object.assign({automaticErrorTracking:!0},a)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},a.data),a.getPlayheadTime=function(){return d(i.currentTime)},a.getStateData=function(){var e,t=this.hlsjs&&this.hlsjs.url,r=this.dashjs&&f("function"===this.dashjs.getSource)&&this.dashjs.getSource(),n={player_is_paused:i.paused,player_playhead_time:d(i.currentTime),player_width:parseInt(u(i,"width")),player_height:parseInt(u(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:Et.default&&!!(Et.default.fullscreenElement||Et.default.webkitFullscreenElement||Et.default.mozFullScreenElement||Et.default.msFullscreenElement),video_poster_url:i.poster,video_source_url:t||r||i.currentSrc,video_source_duration:d(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null==i||null===(e=i.getVideoPlaybackQuality)||void 0===e?void 0:e.call(i).droppedVideoFrames},o=a.getPlayheadTime();if(i.getStartDate&&o>0){var s=i.getStartDate();if(s&&"function"==typeof s.getTime&&s.getTime()){var l=s.getTime();if(n.player_program_time=l+o,i.seekable.length>0){var c=l+i.seekable.end(i.seekable.length-1);n.player_live_edge_program_time=c}}}return n},i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,a){e.emit(n,t,a)},i.mux.updateData=function(e){i.mux.emit("hb",e)};var l=function(){s.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach((function(e){i.removeEventListener(e,i.mux.listeners[e],!1)})),delete i.mux.listeners,i.mux.destroy=l,i.mux.swapElement=l,i.mux.emit=l,i.mux.addHLSJS=l,i.mux.addDashJS=l,i.mux.removeHLSJS=l,i.mux.removeDashJS=l,i.mux.updateData=l,i.mux.deleted=!0,e.emit(n,"destroy")},i.mux.swapElement=function(t){var a=R(j(t),3),r=a[0],n=a[1],o=a[2];return r?"video"!==o&&"audio"!==o?e.log.error("The element of `"+n+"` was not a media element."):(r.muxId=i.muxId,delete i.muxId,r.mux=r.mux||{},r.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(r.mux.listeners).forEach((function(e){i.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)})),r.mux.swapElement=i.mux.swapElement,r.mux.destroy=i.mux.destroy,delete i.mux,void(i=r)):e.log.error("No element was found with the `"+n+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(n,t)},i.mux.addDashJS=function(t){e.addDashJS(n,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(n)},i.mux.removeDashJS=function(){e.removeDashJS(n)},e.init(n,a),e.emit(n,"playerready"),i.paused||(e.emit(n,"play"),i.readyState>2&&e.emit(n,"playing")),i.mux.listeners={},Dt.forEach((function(t){"error"===t&&!a.automaticErrorTracking||(i.mux.listeners[t]=function(){var a={};if("error"===t){if(!i.error||1===i.error.code)return;a.player_error_code=i.error.code,a.player_error_message=qt[i.error.code]||i.error.message}e.emit(n,t,a)},i.addEventListener(t,i.mux.listeners[t],!1))}))}(Kt,e,t)},destroyMonitor:function(e){var t=R(j(e),1)[0];t&&t.mux&&"function"==typeof t.mux.destroy?t.mux.destroy():V.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var a=C(e);zt[a]?zt[a].addHLSJS(t):V.error("A monitor for `"+a+"` has not been initialized.")},addDashJS:function(e,t){var a=C(e);zt[a]?zt[a].addDashJS(t):V.error("A monitor for `"+a+"` has not been initialized.")},removeHLSJS:function(e){var t=C(e);zt[t]?zt[t].removeHLSJS():V.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=C(e);zt[t]?zt[t].removeDashJS():V.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){G()&&t&&t.respectDoNotTrack&&V.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var a=C(e);zt[a]=new kt(Kt,a,t)},emit:function(e,t,a){var r=C(e);zt[r]?(zt[r].emit(t,a),"destroy"===t&&delete zt[r]):V.error("A monitor for `"+r+"` has not been initialized.")},updateData:function(e,t){var a=C(e);zt[a]?zt[a].emit("hb",t):V.error("A monitor for `"+a+"` has not been initialized.")},checkDoNotTrack:G,log:V,utils:Gt,events:Jt,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Kt,Yt),void 0!==N.default&&"function"==typeof N.default.addEventListener&&N.default.addEventListener("pagehide",(function(e){e.persisted||(Kt.WINDOW_UNLOADING=!0)}),!1);var Xt=Kt;
/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/function $t(e){return $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(e)}var Zt=Xt.log,ea=Xt.utils.manifestParser,ta=Xt.utils,aa=ta.secondsToMs,ra=ta.extractHostname,ia=ta.assign,na=function(e,t){var a=!0,r=!0,i=!1;if("object"===$t(e)&&"function"==typeof e.getHeight){var n=(t=ia({automaticErrorTracking:!0},t)).data&&"live"===t.data.video_stream_type;t.data=ia({player_software_name:"JWPlayer",player_software_version:e.version&&e.version.substring(0,e.version.indexOf("+")),player_mux_plugin_name:"jwplayer-mux",player_mux_plugin_version:"4.18.1"},t.data);var o=e.id+"-"+e.uniqueId;t.getPlayheadTime=function(){if(!i){var t=e.getConfig();if(t){var a=t.mediaElement||e.getContainer().querySelector("video"),r=e.mux.isFlash()||!a?e.getPosition():a.currentTime;return aa(r>=0?r:0)}Zt.error("[jwplayer-mux] Cannot get playhead time because the player instance is not configured.")}},t.getStateData=function(){var t,a;if(!i){var r=e.getConfig();if(r){var n=e.getState(),o=e.getPlaylistItem(),s=o?o.sources[0]:{},u=e.getVisualQuality();return{player_is_paused:"paused"===n||"idle"===n||"error"===n||"complete"===n,player_is_fullscreen:e.getFullscreen(),player_autoplay_on:r.autostart||!1,player_preload_on:"none"!==r.preload,player_width:e.getWidth(),player_height:e.getHeight(),video_poster_url:r.image,video_source_duration:aa(e.getDuration()),video_source_is_live:e.getDuration()===1/0,video_source_height:u&&u.level&&u.level.height,video_source_width:u&&u.level&&u.level.width,video_source_url:s.file,video_source_mime_type:s.type,video_source_format:s.type,view_dropped_frame_count:null===(t=r.mediaElement)||void 0===t||null===(a=t.getVideoPlaybackQuality)||void 0===a?void 0:a.call(t).droppedVideoFrames}}Zt.error("[jwplayer-mux] Cannot get player state because the player instance is not configured.")}},e.mux={},e.mux.shouldSendEvents=!0,e.mux.emit=function(t,a){return e.mux.shouldSendEvents&&Xt.emit(o,t,a)},e.mux.isFlash=function(){return 0===((e.getProvider()||{}).name||"").indexOf("flash")},e.mux.checkShouldSendEvents=function(){e.mux.shouldSendEvents=!(n&&e.mux.isFlash())},e.mux.updateData=function(t){return e.mux.emit("hb",t)},e.mux.onXhrOpen=function(t,a){t.onload=function(r){if(4===t.readyState&&200===t.status&&"text"===t.responseType){var i,n,o,s,u,d,l,c=sa(t),_=new ea(t.responseText);if(_){i=_.partTargetDuration,n=_.targetDuration,o=_.segments;var p=_.serverControl;s=p.partHoldBack,u=p.holdBack;var h=o[o.length-1];h&&h.dateTimeObject&&(d=h.dateTimeObject.getTime()+aa(h.duration)),l=_.sessionData}var f={request_type:"manifest",request_hostname:ra(a),request_url:a,request_response_headers:c,video_holdback:u&&aa(u),video_part_holdback:s&&aa(s),video_part_target_duration:i&&aa(i),video_target_duration:n&&aa(n),player_manifest_newest_program_time:d};l&&(f=ia(f,l)),e.mux.emit("requestcompleted",f)}}},e.on("ready",(function(){e.mux.emit("playerready")})),e.on("play playAttempt buffer",(function(t){e.mux.checkShouldSendEvents(),t&&t.newstate&&"playing"===t.newstate?(a=!1,e.mux.emit("playing")):t&&t.newstate&&"buffering"===t.newstate&&!1===a?e.mux.emit("play"):t&&"playAttempt"===t.type&&(a=!0,e.mux.emit("play"))})),e.on("pause",(function(){e.mux.emit("pause")})),e.on("time",(function(){e.mux.emit("timeupdate")})),e.on("seek",(function(){e.mux.emit("seeking")})),e.on("seeked",(function(){e.mux.emit("seeked")})),e.on("visualQuality",(function(t){null!=t&&t.level?e.mux.emit("renditionchange",{video_source_bitrate:t.level.bitrate,video_source_width:t.level.width,video_source_height:t.level.height,video_source_rendition_name:t.level.label}):Zt.warn("[jwplayer-mux] expected to find level.bitrate when 'visualQuality' event fired.")}));var s=function(t){var a=t.message,r=t.code,i=t.sourceError,n=i.url,o=i.type,s=i.details,u=i.response,d=i.fatal,l="".concat(n?"url: ".concat(n,"\n"):"")+"".concat(null!=u&&u.code||null!=u&&u.text?"response: ".concat(null==u?void 0:u.code,", ").concat(null==u?void 0:u.text,"\n"):"")+"".concat(o?"type: ".concat(o,"\n"):"")+"".concat(s?"details: ".concat(s,"\n"):"")+"".concat(d?"fatal: ".concat(d,"\n"):"");e.mux.emit("error",{player_error_code:r,player_error_message:a,player_error_context:l})};t.automaticErrorTracking&&(e.on("warning",(function(t){var a=t.code,r=t.sourceError;if(a>=333e3&&a<333600){var i=r.details,n=r.response,o=r.frag,s=(null==o?void 0:o._url)||(null==o?void 0:o.baseUrl);e.mux.emit("requestfailed",{request_error:i,request_url:s,request_hostname:ra(s),request_type:"media",request_error_code:null==n?void 0:n.code,request_error_text:null==n?void 0:n.text})}})),e.on("setupError",(function(e){s(e)})),e.on("error",(function(e){s(e)}))),e.on("complete",(function(){e.mux.emit("ended")})),e.on("meta",(function(t){if("program-date-time"===t.metadataType){var a=t.metadata,r={currentFragmentPDT:oa(a),currentFragmentStart:aa(t.metadata.start)};e.mux.emit("fragmentchange",r)}}));var u=null,d=null;e.on("adImpression",(function(t){var a=t.tag,r=t.mediafile,i=t.client;t.adposition,u=a,d="vast"===i&&r?r.file:null,e.mux.emit("adplay",{ad_asset_url:d,ad_tag_url:u})})),e.on("adRequest",(function(){e.mux.emit("adrequest")})),e.on("adMeta",(function(){e.mux.emit("adresponse",{ad_tag_url:u})})),e.on("adPlay",(function(){!1===r&&e.mux.emit("adplay"),e.mux.emit("adplaying")})),e.on("adPause",(function(){r=!1,e.mux.emit("adpause",{ad_asset_url:d})})),e.on("adComplete",(function(){r=!0,e.mux.emit("adended",{ad_asset_url:d})})),e.on("adBreakStart",(function(){e.mux.emit("adbreakstart")})),e.on("adBreakEnd",(function(){e.mux.emit("adbreakend")})),e.on("adSkipped",(function(){e.mux.emit("adended")})),e.on("adError",(function(){e.mux.emit("aderror")})),e.on("remove",(function(){e.off(),i=!0,Xt.emit(o,"destroy")})),Xt.init(o,t)}else Zt.warn("[jwplayer-mux] You must provide a valid JW Player to initJWPlayerMux.")},oa=function(e){return new Date(e.programDateTime).getTime()},sa=function(e){var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),a={};return t.forEach((function(e){var t=e.split(": "),r=t.shift(),i=t.join(": ");a[r]=i})),a};na.utils=Xt.utils;var ua=na}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}return a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a(254)}()},"object"==typeof exports&&"object"==typeof module?module.exports=t():"object"==typeof exports?exports.initJWPlayerMux=t():e.initJWPlayerMux=t()}();
</script>

</body>
</html>
