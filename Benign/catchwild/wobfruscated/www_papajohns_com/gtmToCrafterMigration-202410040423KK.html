<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>gtmToCrafterMigration-202410040423KK.html</title>
</head>
<body>
<script>function papaTrackPersonalizations(){[1052,4858,1517,2705,1037,1455,1472,1473,1474,1477,3595,4492,1042,1044,1045,1046,1051,1054,1055,1056,1057,1102,1457,1458,1460,1461,1462,1466,1469,1476,2704,2706,2710,3518,3921,3944,4036,4224,4255,4258,4448,4639,4761,4818,5099,5202,5211,].includes(+shellData.storeId)&&"DELIVERY"===shellData.orderType&&setInterval(function(){!function e(){if(!document.querySelector('span[aria-label="CO Retail Delivery Fee"]')&&Number(document.querySelector('span[aria-label="Tax"]').parentElement.querySelector('span[aria-label="Tax"]').nextElementSibling.innerHTML.replace("$",""))>0){var t=document.querySelector('span[aria-label="Delivery Fee"]').nextElementSibling.innerHTML.replace("$",""),a=sessionStorage.getItem("co-retail-dlvr")||(t-.29).toFixed(2);sessionStorage.setItem("co-retail-dlvr",a);var n=document.querySelector('span[aria-label="Delivery Fee"]').parentElement,r=document.createElement("li");r.classList.add("cost-summary__item"),r.setAttribute("style","display: flex;flex-direction: row;justify-content: space-between;color: #000;"),r.innerHTML='<span _ngcontent-whu-c127="" tabindex="0" aria-label="CO Retail Delivery Fee"> CO Retail Delivery Fee </span><span _ngcontent-whu-c127="" tabindex="0" aria-label="$0.29"> $0.29 </span>',n.after(r),document.querySelector('span[aria-label="Delivery Fee"]').nextElementSibling.innerHTML="$"+a}}()},500)}function jQueryPersonalizations(){if(/order\/checkout/.test(location.href)&&!/order\/checkout-confirmation/.test(location.href)){if(0!==$("#validate-order").length)$("#validate-order").on("click",function(){sessionStorage.setItem("g81-num",$("#phone-number").val())});else var e,t=setInterval(function(){!$("rwd-preloader .preloader").hasClass("active")&&$(".order-cta-button .button--large, .review-cta-button .button--large").length&&(clearInterval(t),$(".order-cta-button .button--large, .review-cta-button .button--large").on("click",function(){var e=$(".contact-information").text().split("("),t=("("+e[e.length-1]).split(" "),a=t[0]+" "+t[1];sessionStorage.setItem("g81-num",a)}))},500)}if(/order\/checkout-confirmation/.test(location.href)){shellData&&shellData.allowOrderSms&&setTimeout(function(){a()&&r()},2500);var a=function(){return $("#papa-track-opt-in").length>0},n=function(e,t){fetch("/order/"+e+"/subscribeSMSNotification",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"*/*"},body:"notificationNumber="+t}).then(function(e){200===e.status&&(console.log("SMS subscribe: success"),$(`<div class="location-content dashboard-alert" id="sms-auto-submit">
              <div class="page-alert location-alert-success sms-opt-in-msg">
                  <div class="success-message-header">
                      <a href="#" class="close-alert-sms-optin"><i class="icon-close icon">Close</i></a>
                      <p class="opt-in-success-msg">Order updates will be sent to ${t}. <a style="cursor: pointer" id="change-optin-number-sms">Change phone number</a>.</p>
                  </div>
              </div>
          </div>`).prependTo($(".two-column-container-wrap--checkout-confirmation .two-column-container")),$("#change-optin-number-sms").on("click",function(){$("#delivery-alerts-menu").addClass("is-visible"),$("#delivery-alerts-menu .content div").eq(0).addClass("is-visible"),$("#sms-auto-submit").remove()}))}).catch(function(e){console.log("Request failed",e)})},r=function(){var e=sessionStorage.getItem("g81-num");if(e){$("#papa-track-cellphone").val(e);let t=setInterval(()=>{let a=dataLayer.find(e=>e.hasOwnProperty("order")&&e.order.hasOwnProperty("id"))?.order.id;a&&(clearInterval(t),console.log("Order ID found:",a),n(a,e))},100);sessionStorage.removeItem("g81-num"),console.log("Automatically submitted the opt-in form for phone number: "+e)}}}function o(e){var t=Number($(".delivery-amount").text().trim().replace("$","")),a=(t-e).toFixed(2),n=Number($(".tax-total.amount").text().trim().replace("$",""));t>=e&&n>0&&($(".delivery-amount").text("$"+a),$(".delivery").after('<tr class="delivery go-co"><td class="delivery-title">CO Retail Delivery Fee</td><td class="delivery-amount amount">$'+e+"</td></tr>"))}function i(e,t){let a;return function(...n){let r=this;clearTimeout(a),a=setTimeout(()=>e.apply(r,n),t)}}let l=(e,t,a)=>{if(e.disconnect(),$("rwd-cart").length)c();else{let n=$('.pricing-info__breakdown span:contains("Delivery Fee")').parents("div").eq(0),r=$('.pricing-info__breakdown span:contains("Estimated Tax")').parents("div").eq(0),o=Number(n.find(".float-right").text().trim().replace("$","")),i=(o-coFee).toFixed(2),l=Number(r.find(".float-right").text().trim().replace("$",""));o>=coFee&&l>0&&(n.find(".float-right").text("$"+i),n.after('<div><span>CO Retail Delivery Fee</span><span class="float-right">$'+coFee+"</span></div>"))}e.observe(t,a)},d=(e,t,a)=>{e.disconnect(),c(),e.observe(t,a)};if([1052,4858,1517,2705,1037,1455,1472,1473,1474,1477,3595,4492,1042,1044,1045,1046,1051,1054,1055,1056,1057,1102,1457,1458,1460,1461,1462,1466,1469,1476,2704,2706,2710,3518,3921,3944,4036,4224,4255,4258,4448,4639,4761,4818,5099,5202,5211,].includes(+shellData.storeId)&&"DELIVERY"===shellData.orderType){if(/order\/view-cart/.test(location.href)){async function _(){let e=document.querySelector(".cart-content__sidebar");if(e){let t=i(()=>l(r,e,a),1e3);t();let a={attributes:!0,childList:!0,subtree:!0},n=(e,a)=>{for(let n of e)t()},r=new MutationObserver(n);r.observe(e,a)}else setTimeout(_,1e3)}setTimeout(_,1e3),o(.29),$(document).on("freight.afterReplacement:page-cart",function(e,t){o(.29)})}function c(){$(".go-co").remove();let e=$('rwd-pricing-breakdown .row-item__label div:contains("Delivery Fee")').parents(".row-item");if(e.find(".row-item__amount").hasClass("green-free")){e.find(".row-item__amount").text("FREE");return}let t=Number(e.find(".row-item__amount").attr("amount").replace("$",""));if(t>=.29){let a=(t-.29).toFixed(2);sessionStorage.setItem("co-retail-dlvr",a),e.find(".row-item__amount").text("$"+a),e.after('<li class="row-item go-co d-flex" style="margin-top:15px; margin-bottom: 15px;"><div class="row-item__label" style="flex: 1;">CO Retail Delivery Fee</div><div class="row-item__amount" style="font-family: PapaSans-Bold, HelveticaNeue-CondensedBold, Arial Narrow, Arial,sans-serif;">$0.29</div></li>')}}if(/order\/checkout/.test(location.href)&&!/order\/checkout-confirmation/.test(location.href)){async function s(){let e=document.querySelector(".order-summary-container");if(e){let t=i(()=>d(r,e,a),1e3);t();let a={attributes:!0,childList:!0,subtree:!0},n=(e,a)=>{for(let n of e)t()},r=new MutationObserver(n);r.observe(e,a),$(document).on("click",'.order-cta-button, .review-cta-button, a[href="#paymentMethod"], a[href="#contactInfo"], a[href="#planAhead"]',c)}else setTimeout(s,1e3)}setTimeout(s,1e3)}if(/order\/checkout-confirmation/.test(location.href))var m=setInterval(function(){"0"===$(".loading-animation").css("opacity")&&$("#orderContent").length&&(clearInterval(m),setTimeout(function(){var e,t,a,n;$(".go-crd").remove(),t=((e=$(".panel-payment-detail li").eq(1).children("span").text().replace("$",""))-.29).toFixed(2),a=$('div.panel-payment-detail-title:contains("Tax:")').parents("li").eq(0),n=Number(a.find("span.panel-payment-detail-price").text().trim().replace("$","")),e>=.29&&n>0&&($(".panel-payment-detail li").eq(1).children("span").text("$"+t),$(".panel-payment-detail li").eq(1).after('<li class="go-crd"><div class="panel-payment-detail-title">CO Retail Delivery Fee:</div><span class="panel-payment-detail-price">$0.29</span></li>'))},2e3))},500)}function p(e,t){var a=!1,n=`/api/v6/stores/${t}/deals/${e}`,r=jQuery.Deferred();return $.get(n,function(e){a=e.data.carryoutOnlyFlag,r.resolve(a)}).fail(function(e){r.reject(e)}),r.promise()}function u(){$("#dcxd-5025-modal").show(),$("#dcxd-5025-modal").attr("style",""),$("#dcxd-5025-modal").removeClass("nodisplay"),$("body").addClass("modal-open")}function f(){$("body").append("<style>body.modal-open{overflow-y:hidden}.total-mask{z-index:2001}#dcxd-5025-modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2000}#dcxd-5025-modal .modal-window{max-width:375px;width:100%;background:#fff;border-radius:20px;will-change:auto;}#dcxd-5025-modal .modal-window .modal-close-button{right:1.2em;top:1.2em;color:#000}#dcxd-5025-modal .modal-window .modal-header-container{position:relative;margin:auto}#dcxd-5025-modal .modal-window .modal-header-container .pattern-header,#dcxd-5025-modal .modal-window .modal-header-container .papabites-cntr{width:100%;height:100%}#dcxd-5025-modal .modal-window .modal-header-container .text{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:30px auto 0;width:305px;color:#2d5d2a;text-align:center;gap:10px}#dcxd-5025-modal .modal-window .modal-header-container .text img{max-width:95px;animation:zoom0 forwards 1s ease}#dcxd-5025-modal .modal-window .modal-header-container .text .headline{display:flex;justify-content:center;font-size:64px;text-transform:uppercase;margin:0;position:relative}#dcxd-5025-modal .modal-window .modal-header-container .text .headline h2{font-weight:500;font-size:32px;line-height:36px;color:#000;margin-top:12px}#dcxd-5025-modal .modal-window .modal-header-container .text p{color:#000;margin-bottom:12px}#dcxd-5025-modal .modal-window .modal-content{padding:0;max-height:100vh;border-radius:20px}#dcxd-5025-modal .modal-window .modal-content .inner-content{display:flex;text-align:center;margin:24px 20px 30px}#dcxd-5025-modal .modal-window .modal-content .inner-content .frame{flex:1;width:305px}#dcxd-5025-modal .modal-window .modal-content .inner-content .frame a{background:#2d5d2a;font-size:24px;padding:14px 18px;margin-bottom:0;text-decoration:none}</style>"),$("body").append(`<div
      id="dcxd-5025-modal"
      aria-label="Carryout only offer"
      class="modal modal--image"
      role="dialog"
      tabindex="-1"
      style="display: none"
    >
      <div class="modal-window" role="document">
        <div class="modal-content">
            <div class="modal-header-container">
    
                    <div class="text">                   
                       <div class="headline">
                           <h2>Deal Unavailable</h2>
                       </div>
                       <p>This option is available for carryout only.</p>
                    </div>
    
            </div>
          <button
            class="modal-close-button button--unstyled"
            aria-label="Close Dialog"
          >
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="25.7px" height="25.7px" viewBox="0 0 25.7 25.7" style="enable-background: new 0 0 25.7 25.7" xml:space="preserve">
            <style type="text/css">
              .st0 {
                fill: #ffffff;
              }
            </style>
            <circle class="st0" cx="12.9" cy="12.8" r="12.8"></circle>
            <path d="M19.3,6.2c-0.5-0.5-1.3-0.5-1.9,0l-4.6,4.7L8.1,6.2c-0.5-0.5-1.3-0.5-1.8,0s-0.5,1.3,0,1.9l4.7,4.8l-4.7,4.7
            c-0.5,0.5-0.5,1.3,0,1.9c0.3,0.3,0.5,0.4,1,0.4s0.8-0.1,1-0.4l4.6-4.7l4.6,4.7c0.3,0.3,0.8,0.4,1,0.4c0.3,0,0.8-0.1,1-0.4
            c0.5-0.5,0.5-1.3,0-1.9l-4.7-4.8L19.3,8C19.7,7.6,19.7,6.6,19.3,6.2z"></path>
          </svg>
          </button>
          <div class="inner-content">
            <div class="frame">
                <a id="switchToCarryout" class="button" href="/order/stores-near-me">Switch to carryout</a>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-mask"></div>
    </div>`)}function h(e){e?$("#ajaxSpinnerContainer #ajaxSpinnerImage").show():$("#ajaxSpinnerContainer #ajaxSpinnerImage").hide()}function v(){f(),$("rwd-rewards-page").attr("dcxd-5025",!0),($promoCards=$("#redeemables .item-grid li")).each(function(){var e=$(this);if(!e.find(".fake-button").length){var t=e.find(".button"),a=t.clone();a.attr("id","fake-"+t.attr("id")),a.addClass("fake-button"),a.text("Redeem"),a.insertAfter(t),t.hide()}}),$(".fake-button").on("click",async function(){h(!0);var e,t,a,n,r,o,i,l,d=dataLayer.filter(function(e){return e.order})[0].order.storeID,_=await (e=shellData.customerToken,t=d,a=$(this).closest("li").index(),o=`/api/v4/loyalty/balance/${n=shellData.customerId}?storeId=${t}&include-eam=true`,i=jQuery.Deferred(),$.ajax({url:o,method:"GET",async:!1,headers:{"Pj-Authorization":e},success:function(e){r=e.data.loyaltyShopcartDeals[a].dealId,i.resolve(r)},error:function(e){console.log(e),i.reject(e)}}),i.promise()),c=`/order/stores-near-me?target=dealbuilder?dealId=${_}&zipcode=${(l=RegExp(" location=([^;]+)").exec(document.cookie),(null!=l?unescape(l[1]):null)?.split("|")[13].split("=")[1].toLowerCase().replace(/\D/g,""))}&editSearchType=CARRYOUT`;p(_,d).then(e=>{e?(h(!1),u(),$("#dcxd-5025-modal .modal-close-button").on("click",function(){$("#dcxd-5025-modal").hide(),$("body").removeClass("modal-open")}),$("#dcxd-5025-modal .modal-mask").on("click",function(){$("#dcxd-5025-modal").hide(),$("body").removeClass("modal-open")}),$("#dcxd-5025-modal #switchToCarryout").attr("href",c)):(h(!1),$(this).prev().click())}).catch(e=>{console.error(e),h(!1),$(this).prev().click()})})}var x,g=dataLayer.filter(function(e){return e.userStatus});if(dataLayer.filter(function(e){return e.order}),"delivery"===(x=RegExp(" location=([^;]+)").exec(document.cookie),(null!=x?unescape(x[1]):null)?.split("|")[1].split("=")[1].toLowerCase())){if("true"===g[0].userStatus.signedIn&&/order\/account\/my-papa-rewards/.test(location.href)){let w=setInterval(function(){!$("rwd-preloader .preloader").hasClass("active")&&$("rwd-rewards-offers #redeemables").length&&(clearInterval(w),v(),$("rwd-rewards-page .offers-tab").parent().on("click",function(){setTimeout(function(){v()},200)}))},200)}if(/order\/dealbuilder/.test(location.href)){var y=window.location.search,b=new URLSearchParams(y).get("dealId"),k=RegExp("storeId=([^;]+)").exec(document.cookie),C=Number((null!=k?unescape(k[1]):null)?.split("|")[0].split("=")[0]);b&&C&&p(b,C).then(e=>{e&&(f(),$("#dcxd-5025-modal #switchToCarryout").attr("href",`/order/stores-near-me?target=dealbuilder?dealId=${b}&editSearchType=CARRYOUT`),u(),$("#dcxd-5025-modal .modal-close-button").remove())}).catch(e=>{console.error(e)})}}function T(){$('.product-title:contains("Papa Pairings")').parents("li").find('.upsell-button-light:contains("Make it Large")').hide()}function I(){$('.cart-item-content__info:contains("Papa Pairings")').parents("rwd-cart-card").find('.upsell-button-light:contains("Make It Large")').hide()}if(/order\/view-cart/.test(location.href)&&(e=RegExp("storeId=([^;]+)").exec(document.cookie),![1,2,3,4,7,8,9,11,12,14,16,17,18,20,21,22,25,29,31,32,36,40,44,45,48,49,50,53,54,55,56,62,64,65,75,76,78,79,81,83,85,86,87,88,90,92,93,94,95,96,97,98,99,100,117,122,129,133,146,147,150,165,181,182,183,184,185,187,188,189,192,197,199,200,210,224,225,233,235,239,259,260,262,265,266,268,269,274,275,283,292,300,301,302,303,304,305,306,307,308,309,310,311,312,316,329,364,383,392,400,401,402,404,405,406,407,408,410,411,412,413,414,415,416,417,419,420,429,451,455,460,461,463,464,466,469,471,472,482,488,490,495,499,502,503,504,505,506,507,508,509,510,531,544,579,599,601,619,629,639,650,651,652,653,654,655,656,657,658,660,671,682,686,698,744,750,751,752,753,754,758,765,770,771,773,774,775,777,778,779,808,855,857,860,868,869,887,907,908,949,954,966,983,989,1e3,1020,1021,1022,1023,1024,1025,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1070,1073,1074,1085,1103,1104,1121,1129,1139,1150,1178,1180,1214,1231,1237,1245,1260,1328,1331,1388,1399,1406,1408,1421,1437,1438,1439,1446,1449,1450,1482,1483,1485,1486,1487,1488,1489,1490,1491,1545,1554,1576,1578,1579,1580,1581,1583,1584,1585,1605,1625,1626,1627,1628,1629,1630,1656,1689,1698,1700,1702,1704,1705,1707,1708,1709,1710,1711,1712,1713,1723,1724,1731,1732,1733,1734,1735,1736,1737,1738,1771,1772,1774,1802,1815,1840,1859,1898,1906,1925,1964,2e3,2044,2060,2227,2298,2318,2334,2357,2366,2418,2594,2598,2602,2616,2718,2739,2828,2908,2929,2964,2984,3042,3061,3062,3064,3143,3198,3246,3272,3301,3317,3323,3342,3370,3382,3404,3413,3458,3486,3509,3511,3523,3547,3551,3564,3578,3583,3608,3609,3615,3694,3703,3725,3747,3759,3901,3903,3924,3933,3941,3942,3965,4150,4250,4257,4339,4353,4397,4521,4553,4564,4573,4611,4621,4630,4641,4687,4696,4722,4723,4743,4763,4771,4789,4831,4838,4847,4868,4872,4879,4914,4960,5030,5058,5083,5134,5135,5139,5140,5141,5144,5145,5154,5156,5161,5162,5166,5171,5175,5176,5179,5182,5184,5188,5190,5218,5274,5315,5316,5318,5324,5325,5326,5327,5329,5357,].includes(Number((null!=e?unescape(e[1]):null)?.split("|")[0].split("=")[0]))))var S=0,m=setInterval(function(){let e,t;S<10?((!$("rwd-preloader .preloader").hasClass("active")&&$(".cart-product-item").length||$("rwd-cart-card").length)&&(clearInterval(m),$("rwd-cart-card").length?(I(),e=document.getElementsByTagName("rwd-preloader")[0],t=(e,t)=>{for(let a of e)"childList"!==a.type||$("rwd-preloader .preloader").length||I()},new MutationObserver(t).observe(e,{attributes:!0,childList:!0,subtree:!0})):(T(),$(document).on("freight.afterReplacement:page-cart",function(e,t){T()}))),S++):clearInterval(m)},500)}if(/papa-track/.test(location.href))var papaTrackInterval=setInterval(function(){document.getElementsByTagName("rwd-papa-track-order-details").length>0&&(clearInterval(papaTrackInterval),papaTrackPersonalizations())},500);var gtmToCrafterMigrationInterval=setInterval(function(){try{$&&$.fn&&$.fn.jquery&&(clearInterval(gtmToCrafterMigrationInterval),jQueryPersonalizations())}catch(e){}},200);</script>
</body>
</html>
