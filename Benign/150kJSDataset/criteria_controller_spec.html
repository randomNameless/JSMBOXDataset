<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>criteria_controller_spec.html</title>
</head>
<body>

<script>
describe("criteriaController", function(){
  var controller, flickrSearch, twitterSearch, content;

  beforeEach(function(){
    controller = IWitness.criteriaController;
    spyOn(controller, '_executeSearch');
    spyOnProperties(controller.get('content'), { isValid: true, stream: true });
  });

  describe("initiateSearch", function(){
    it("clears result set", function(){
      var clearResultsSpy = spyOn(IWitness.resultSetController, 'clearResults');
      controller.initiateSearch();
      waits(10);
      runs(function() { expect(clearResultsSpy).toHaveBeenCalled(); })
    });

    it("resets the search controller", function(){
      var resetSpy = spyOn(IWitness.searchController, 'reset');
      controller.initiateSearch();
      waits(10);
      runs(function() { expect(resetSpy).toHaveBeenCalled(); });
    });
  });
});

</script>

</body>
</html>
