<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>searchComponent.html</title>
</head>
<body>

<script>
define(["entreprendre/persogeo/components/container","entreprendre/persogeo/components/htmlGenerator","entreprendre/securityUtils","entreprendre/autocomplete-a11y","jquery"],function(e,t,a,n,o){"use strict";function r(e){0!==o("#persogeo-error-message").length&&o("#persogeo-error-message").focus(),e.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").find('button, a, input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])')}function i(e){var t=o("li[data-for="+e+"]");o.each(t,function(e,t){var a=t.parentNode,n=a.parentNode;o(n).removeClass("sp-vhidden")})}function s(e,n){var r=e.charAt(0).toUpperCase()+e.substring(1),s=o("#search"+r).val(),d=t.buildNoCityFoundMarkup(a.replaceXSS(s));n.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").html(d),o("[data-pivot-local-service-en-ligne]").addClass("sp-vhidden"),o("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),o("[data-aNoter-raccordement-demarche]").removeClass("sp-vhidden"),o("[data-aNoter-persogeo-id]").html(""),o("[data-attention-persogeo-id]").removeClass("sp-vhidden"),i(e)}function d(e,a){o("[data-ousadresser-quipeutmaider]").addClass("fr-input-group--error");var n=t.buildNoCitySelectedMarkup(a,e);e.next("[data-persogeo=annuaire-where]").children("[data-persogeo=confirm]").html(n),o("[data-pivot-local-service-en-ligne]").addClass("sp-vhidden"),o("[data-pivot-local-service-en-ligne]").attr("tabindex","-1"),o("[data-aNoter-raccordement-demarche]").removeClass("sp-vhidden"),o("[data-aNoter-persogeo-id]").html(""),o("[data-attention-persogeo-id]").removeClass("sp-vhidden")}function l(e,t){var a=e.find("[data-persogeo=searchGeoAutocomplete]"),n=e.parent().parent().next().next().next().find("a.sp-btn-demarche");a.initAutocompletionV2({cle:"persogeo",minLength:1,url:function(){return"/geo/suggest"},input:function(e){e.data("persogeo-selected-insee",null),0===e.val().length&&n.addClass("sp-vhidden")},hide:function(t,a){if(a&&null===t.data("persogeo-selected-insee")){d(e,t.val());var n=t.val();t.val(""),t.val(n),t.focus()}},select:function(e,a){a.val(""),a.val(e.item.nom+" ("+e.item.codePostal+")"),a.data("persogeo-selected-insee",e.item.insee),a.focus(),a.siblings("button[type=reset]").removeClass("sp-vhidden"),t(e.item.insee)},format:function(e){return e.nom+" ("+e.codePostal+")"},callback:function(e){return e},data:function(e){return{term:e.val()}}})}return{focusOnConfirmation:r,displayNoResultMessage:s,initAutocomplete:l}});
</script>

</body>
</html>
