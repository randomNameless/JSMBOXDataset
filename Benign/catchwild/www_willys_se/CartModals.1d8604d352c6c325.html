<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CartModals.1d8604d352c6c325.html</title>
</head>
<body>

<script>
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2695],{6465:function(e,t,n){var o,i=n(18529),r=["title","titleId"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}t.Z=function(e){var t=e.title,n=e.titleId,a=function(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n={};for(var o in e)if(({}).hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,r);return i.createElement("svg",l({width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},a),t?i.createElement("title",{id:n},t):null,o||(o=i.createElement("path",{d:"M14 6a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM14 27a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5ZM14 16.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z",fill:"currentColor"})))}},31634:function(e,t,n){n.r(t),n.d(t,{default:function(){return eN}});var o=n(48282),i=n(18529),r=n(76924),l=n(61699),a=n(24912),c=n(46612),d=n.n(c),s=n(90610),u=n(70313),h=n(53158),m=n(35073);let p=s.ZP.div.withConfig({componentId:"sc-824786df-0"})(["display:flex;flex-direction:column;min-height:",";padding:"," ",";overflow:hidden;cursor:pointer;&:last-child{margin-bottom:",";}"," "," "," ",""],(0,u.hO)(100),(0,u.hO)(16),(0,u.hO)(12),(0,u.hO)(60),e=>("conflicting"===e.variant||"non-replaceable"===e.variant)&&(0,s.iv)(["border-bottom:"," dashed ",";cursor:default;&:first-child{border-top:"," dashed ",";}&:last-child{border-bottom:0;margin-bottom:0;}"],(0,u.hO)(1),m.Z.colors.mediumGray,(0,u.hO)(1),m.Z.colors.mediumGray),e=>"non-replaceable"===e.variant&&(0,s.iv)(["cursor:initial;"]),e=>"replaceable"===e.variant&&(0,s.iv)(["border:"," solid ",";margin-top:",";&:first-child{margin-top:",";}&:hover{@media (hover:hover) and (pointer:fine){border-color:",";}}&:last-child{margin-bottom:",";}"],(0,u.hO)(1),m.Z.colors.mediumGray,(0,u.hO)(20),(0,u.hO)(8),m.Z.colors.highlight,(0,u.hO)(20)),e=>e.isSelected&&(0,s.iv)(["border-color:",";"],m.Z.colors.highlight)),g=s.ZP.div.withConfig({componentId:"sc-824786df-1"})(["position:relative;display:flex;align-items:center;&:last-child{border-bottom:none;}"]),v=s.ZP.div.withConfig({componentId:"sc-824786df-2"})(["margin:0 ",";display:flex;flex-direction:column;flex:1 1 100%;min-width:0;white-space:nowrap;text-overflow:ellipsis;"],(0,u.hO)(20)),f=(0,s.ZP)(l.Z).withConfig({componentId:"sc-824786df-3"})(["line-height:",";overflow:hidden;text-overflow:ellipsis;margin-bottom:",";&:last-child{margin-bottom:0;}"],(0,u.hO)(16),(0,u.hO)(4));(0,s.ZP)(h.Z).withConfig({componentId:"sc-824786df-4"})(["width:",";"],(0,u.hO)(208));var y=n(71555),Z=n(94579),x=n(85020),w=n(23062);let b=s.ZP.div.withConfig({componentId:"sc-9e45309e-0"})(["min-width:",";min-height:",";width:",";height:",";"],(0,u.hO)(68),(0,u.hO)(68),(0,u.hO)(68),(0,u.hO)(68));var O=e=>{var t,n,a;let{product:c,editable:s=!1,variant:u,selected:h=!1,onClick:m,onQuantityChange:O,mouseEnter:C,mouseLeave:j,pickQuantity:P,availableQuantity:k,partialOutOfStock:I,addToCartDisabled:E=!1}=e,S=(0,i.useRef)(null),{t:T}=(0,r.Z)("conflictListItem"),{productBasketType:_={},name:R,productLine2:A,potentialPromotions:M,price:z,depositPrice:L,image:F}=c,K=L?T("depositPrice"):"",Q=(null==c?void 0:c.pickUnit)?null==c?void 0:null===(t=c.pickUnit)||void 0===t?void 0:t.code:(null==c?void 0:null===(n=c.productBasketType)||void 0===n?void 0:n.code)==="ST"?"pieces":"kilogram",[B,D]=(0,i.useState)(c.replacementQty||0),[U,H]=(0,i.useState)(!1),N=P>1?"".concat(T("partiallyOutOfStock",{amountToReplace:P-k,totalAmount:P})," "):"",G=(e,t)=>{null==t||t.stopPropagation(),null==t||t.preventDefault(),e>=x.Z.PRODUCT.MIN_AMOUNT&&(D(e),O&&O(e))},V=e=>{var t;let n=W(e).toString().length;null===(t=S.current)||void 0===t||t.setSelectionRange(n,n)},W=e=>"kilogram"===Q?parseFloat(e.currentTarget.value.replace(",",".").replace(/[^0-9.]/g,"")):e.currentTarget.value.replace(/[^0-9]/g,""),q=e=>{var t;let n=W(e).toString().length;null===(t=S.current)||void 0===t||t.setSelectionRange(0,n)};return(0,o.jsx)(p,{variant:u,isSelected:h,onClick:m,onMouseEnter:C,onMouseLeave:j,children:(0,o.jsxs)(g,{children:[E&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b,{children:(null==F?void 0:F.url)?(0,o.jsx)(d(),{unoptimized:!0,src:null==F?void 0:F.url,alt:R,layout:"fixed",width:68,height:68}):(0,o.jsx)(w.Z,{})}),(0,o.jsx)(v,{children:(0,o.jsx)(f,{type:"body",children:R})})]}),!E&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b,{children:(null==F?void 0:F.url)?(0,o.jsx)(d(),{unoptimized:!0,src:null==F?void 0:F.url,alt:R,layout:"fixed",width:68,height:68}):(0,o.jsx)(w.Z,{})}),(0,o.jsxs)(v,{children:[(0,o.jsx)(f,{type:"body",children:R}),(0,o.jsx)(f,{type:"detail",size:"small",color:"gray",children:A}),(null==M?void 0:M.length)>0?(0,o.jsx)(f,{type:"subhead",color:"red",children:"".concat(null===(a=M[0].price)||void 0===a?void 0:a.formattedValue," ").concat(K)}):(0,o.jsx)(f,{type:"subhead",children:"".concat(z," ").concat(K)}),"conflicting"===u&&(0,o.jsx)(l.Z,{type:"detail",color:"red",children:N}),"non-replaceable"===u&&I&&(0,o.jsx)(f,{type:"detail",size:"small",color:"gray",children:T("partiallyRemoveItems",{availableQuantity:P-k,unit:{VIKT:"kg",ST:"st"}[_.code],pickQuantity:P})})]}),s&&O&&(0,o.jsx)(y.Z,{inputRef:S,onBlurHandler:e=>{let t=+parseFloat(e.currentTarget.value).toFixed(1);O&&O(t),H(!1)},onChangeHandler:e=>{let t=+W(e);t>x.Z.PRODUCT.MAX_AMOUNT||t<x.Z.PRODUCT.MIN_AMOUNT||D(t)},onFocusHandler:e=>{H(!0),q(e)},onKeyUpHandler:e=>{switch(e.key){case Z.Z.ENTER:case Z.Z.ESCAPE:var t;return null===(t=S.current)||void 0===t?void 0:t.blur();case Z.Z.UP:U&&G(+W(e)+1);break;case Z.Z.DOWN:U&&G(+W(e)-1);break;case Z.Z.LEFT:case Z.Z.RIGHT:break;default:V(e)}return!1},onClickHandler:G,isActive:U,currentQuantity:B,unit:Q,incrementValue:c.incrementValue,outOfStock:c.outOfStock,theme:"secondary",size:"medium",ignoreCartIsUpdating:!0})]})]})})},C=n(91446),j=n(22385),P=n(54735);let k=s.ZP.div.withConfig({componentId:"sc-8389c41c-0"})(["text-align:left;display:flex;flex-flow:column;align-items:stretch;height:100%;max-height:100vh;margin-top:",";","{max-height:calc(100vh - ",");width:100%;}> *{padding:",";","{padding:",";}}"],(0,u.hO)(-38),x.Z.MEDIA.FROM_TABLET_PORTRAIT,(0,u.hO)(128),(0,u.hO)(20),x.Z.MEDIA.FROM_TABLET_PORTRAIT,(0,u.hO)(40)),I=s.ZP.div.withConfig({componentId:"sc-8389c41c-1"})(["z-index:1;flex:0 1 auto;background-color:",";padding-bottom:0;padding-top:",";",""],m.Z.colors.white,(0,u.hO)(20),e=>e.sticky&&(0,s.iv)(["box-shadow:0 "," "," 0 ",";"],(0,u.hO)(-8),(0,u.hO)(28),(0,u.m4)(m.Z.colors.lighterBlack,.5))),E=s.ZP.div.withConfig({componentId:"sc-8389c41c-2"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;border-bottom:"," dashed ",";padding-bottom:",";> h2{margin-right:",";margin-bottom:"," !important;}"],(0,u.hO)(1),m.Z.colors.mediumGray,(0,u.hO)(10),(0,u.hO)(15),(0,u.hO)(4)),S=s.ZP.div.withConfig({componentId:"sc-8389c41c-3"})(["margin-top:",";margin-bottom:",";"],(0,u.hO)(35),(0,u.hO)(25)),T=s.ZP.div.withConfig({componentId:"sc-8389c41c-4"})(["display:flex;flex-direction:column;flex:1;padding-top:0;padding-bottom:0;overflow-y:auto;"]),_=s.ZP.div.withConfig({componentId:"sc-8389c41c-5"})(["flex:0 1 auto;box-shadow:0 "," "," 0 ",";background-color:",";z-index:1;","{padding:"," ",";}"],(0,u.hO)(8),(0,u.hO)(28),(0,u.m4)(m.Z.colors.lighterBlack,.5),m.Z.colors.white,x.Z.MEDIA.FROM_TABLET_PORTRAIT,(0,u.hO)(20),(0,u.hO)(40)),R=s.ZP.div.withConfig({componentId:"sc-8389c41c-6"})(["display:flex;justify-content:center;"]),A=(0,s.ZP)(P.Z).withConfig({componentId:"sc-8389c41c-7"})([""," ",""],e=>e.wide&&(0,s.iv)(["flex:1;"]),e=>e.spacingLeft&&(0,s.iv)(["margin-left:",";"],(0,u.hO)(20))),M=s.ZP.div.withConfig({componentId:"sc-8389c41c-8"})(["display:flex;justify-content:space-between;align-items:center;border-top:"," dashed ",";padding-top:",";margin-bottom:",";"],(0,u.hO)(1),m.Z.colors.mediumGray,(0,u.hO)(20),(0,u.hO)(10)),z=(0,s.ZP)(a.Z).withConfig({componentId:"sc-8389c41c-9"})(["align-self:flex-start;"]);var L=n(88555),F=n(97563),K=n(87e3),Q=n(61961),B=n(56890);let D=(e,t,n)=>{(0,Q.uq)({event:e,ecommerce:{items:(0,B.Vv)(n,void 0,t)}})},U=(e,t)=>{(0,Q.ZP)({event:"Track",category:"outofstock_modal",action:e,label:t,value:0})};var H=n(75840),N=n(80047),G=n(68275),V=()=>{let e=(0,L.T)(),t=(0,L.C)(H.JL),{items:n}=t,{cart:o,refreshCart:r}=(0,G.Z)(),l=(0,i.useRef)(null),a=n.filter(e=>!e.notAllowedB2b&&!e.notAllowedAnonymous&&!e.notAllowedExternalPickupLocation&&!e.notAllowedBulkyProduct&&e.replacementProductsForProduct.length),c=n.filter(e=>e.notAllowedB2b||e.notAllowedAnonymous||e.notAllowedExternalPickupLocation||e.notAllowedBulkyProduct||!e.replacementProductsForProduct.length),[d,s]=(0,i.useState)(0),[u,h]=(0,i.useState)(a.length?a[d]:null),[m,p]=(0,i.useState)(null),[g,v]=(0,i.useState)(void 0),[f,y]=(0,i.useState)(!a.length),[Z,x]=(0,i.useState)(!1),[w,b]=(0,i.useState)(!1),[O,C]=(0,i.useState)(!1),P=()=>{t.resolved&&(t.resolved(""),e((0,H.Zw)({open:!1})))},k=()=>{if(d+1<a.length){let e=d+1;s(e),h(a[e])}else c.length?(h(null),y(!0)):P()},I=e=>{var t;return{productCodePost:e.entryProduct.code,qty:e.availableQuantity||0,pickUnit:(0,N.Z)(null===(t=e.entryProduct.productBasketType)||void 0===t?void 0:t.code)}},E=async(e,n)=>{try{let n=await (0,F.Xq)(e,t.storeId);await r(n),p(null),k()}finally{var o;null==l||null===(o=l.current)||void 0===o||o.scrollTo({top:0,behavior:"smooth"}),n&&n()}},S=async()=>{var e,n,i,r,l;if(b(!0),0===g){await T(!0),b(!1);return}let a={productCodePost:m.code,qty:(g||0)+function(e){let t=null==o?void 0:o.products.find(t=>t.code===e);return(null==t?void 0:t.pickQuantity)||0}(m.code),pickUnit:(0,N.Z)(null===(e=m.productBasketType)||void 0===e?void 0:e.code)};if((null==t?void 0:t.reason)===j.Rv||(null==t?void 0:t.reason)===j.oJ)await E([a],()=>b(!1));else{let e=I(u);await E([a,e],()=>b(!1)),u&&m&&(D(Q.d2.ADD_TO_CART,"outofstock_modal | with_suggestions | ".concat(null===(n=u.entryProduct)||void 0===n?void 0:n.name," | ").concat(null===(i=u.entryProduct)||void 0===i?void 0:i.code),[{...m,pickQuantity:g}]),D(Q.d2.REMOVE_FROM_CART,"outofstock_modal | with_suggestions | ".concat(null===(r=u.entryProduct)||void 0===r?void 0:r.name," | ").concat(null===(l=u.entryProduct)||void 0===l?void 0:l.code),[{...u.entryProduct,pickQuantity:u.pickQuantity}]))}},T=async e=>{e||x(!0);let n=(null==t?void 0:t.reason)!==j.Rv&&(null==t?void 0:t.reason)!==j.oJ?[I(u)]:[];if(await E(n,()=>x(!1)),u){var o,i;D(Q.d2.REMOVE_FROM_CART,"outofstock_modal | with_suggestions | ".concat(null===(o=u.entryProduct)||void 0===o?void 0:o.name," | ").concat(null===(i=u.entryProduct)||void 0===i?void 0:i.code),[{...u.entryProduct,pickQuantity:u.pickQuantity}])}},_=e=>e.notAllowedB2b||e.notAllowedAnonymous||e.notAllowedExternalPickupLocation||e.notAllowedBulkyProduct?0:e.availableQuantity?e.availableQuantity:0,R=async()=>{let e=c.map(e=>({...e.entryProduct,pickQuantity:e.pickQuantity}));C(!0);let t=c.map(e=>{var t;return{productCodePost:e.entryProduct.code,qty:_(e),pickUnit:(0,N.Z)(null===(t=e.entryProduct.productBasketType)||void 0===t?void 0:t.code)}});await E(t,()=>{C(!1),P(),D(Q.d2.REMOVE_FROM_CART,"outofstock_modal | without_suggestions",e)})};return(0,i.useEffect)(()=>{if(U(f?"shown_without_replacement_suggestions":"shown_with_replacement_suggestions",null==t?void 0:t.reason),f){let e=c.map(e=>e.entryProduct);(0,K.v)(e,"outofstock_modal | without_suggestions",0)}},[f]),(0,i.useEffect)(()=>{if(u&&!f){let{entryProduct:e,replacementProductsForProduct:t}=a[d],n="outofstock_modal | with_suggestions | ".concat(e.name," | ").concat(e.code);(0,K.v)(t,n,0)}},[u]),(0,i.useEffect)(()=>()=>{e((0,H.vV)({open:!1,items:[],resolved:null,rejected:null,reason:""}))},[]),{onCloseHandler:()=>{t.rejected&&(t.rejected(Error("Canceled handling conflicts")),e((0,H.Zw)({open:!1})))},onQuantityChange:(e,t)=>{p(t),v(e)},removeProduct:T,replace:S,resolveAndCloseConflictModal:P,removeAllNonReplaceable:R,onConflictListItemHandler:e=>{p(e),v(e.replacementQty)},showNonReplaceable:f,nonReplaceableItems:c,currentItemIndex:d,replaceableItems:a,currentItem:u,selectedReplacementItem:m,dontReplaceLoading:Z,cartConflictModalBody:l,replaceLoading:w,continueLoading:O,conflictingModal:t}},W=()=>{var e;let{t}=(0,r.Z)("cartConflictModal"),[n,c]=(0,i.useState)(null),[d,s]=(0,i.useState)(!1),{onCloseHandler:u,onQuantityChange:h,removeProduct:m,replace:p,resolveAndCloseConflictModal:g,removeAllNonReplaceable:v,onConflictListItemHandler:f,showNonReplaceable:y,nonReplaceableItems:Z,currentItemIndex:x,replaceableItems:w,currentItem:b,selectedReplacementItem:P,dontReplaceLoading:L,cartConflictModalBody:F,replaceLoading:K,continueLoading:Q,conflictingModal:B}=V();return(0,o.jsx)(C.Z,{size:"medium",hasCloseIcon:!0,onClose:u,noPadding:!0,overflowHidden:!0,children:(0,o.jsxs)(k,{"data-testid":"cart-conflict-modal",children:[(0,o.jsxs)(I,{sticky:d,children:[(0,o.jsxs)(E,{children:[(0,o.jsx)(a.Z,{variant:"h2",size:"small",children:t(y?"productsNotAvailable":"productNotInStock")}),y?(0,o.jsx)(l.Z,{size:"small",type:"body",color:"gray",children:Z.length>1?"".concat(t("products",{amount:Z.length})):"".concat(t("singleProduct"))}):(0,o.jsx)(l.Z,{size:"small",type:"body",color:"gray",children:"".concat(x+1," / ").concat(w.length)}),(0,o.jsx)(z,{variant:"h3",label:!0,children:t("outOfStock")})]}),y&&!(null==b?void 0:b.partialOutOfStock)&&(0,o.jsx)(S,{children:(0,o.jsx)(l.Z,{type:"body",children:t("replacementItemsCouldNotBeFound")})}),b&&(0,o.jsx)(O,{product:b.entryProduct,pickQuantity:b.pickQuantity,availableQuantity:b.availableQuantity,partialOutOfStock:b.partialOutOfStock,variant:"conflicting"})]}),(0,o.jsxs)(T,{onScroll:e=>e.currentTarget.scrollTop>0?s(!0):s(!1),ref:F,children:[!y&&(0,o.jsxs)(M,{children:[(0,o.jsx)(a.Z,{variant:"h3",label:!0,children:t("replaceWith")}),(0,o.jsx)(l.Z,{type:"detail",color:"red",children:t("sizeVariation")})]}),b&&!y&&(0,o.jsx)("div",{children:null===(e=b.replacementProductsForProduct)||void 0===e?void 0:e.map(e=>{var t;return(0,o.jsx)(O,{editable:!0,product:e,pickQuantity:e.pickQuantity,availableQuantity:e.availableQuantity,variant:"replaceable",onClick:()=>{f(e)},onQuantityChange:t=>{h(t,e)},selected:(null==P?void 0:P.code)===e.code,mouseEnter:()=>{c(e.code)},mouseLeave:()=>{c(null)}},"replaceable-item-".concat(null===(t=b.entryProduct)||void 0===t?void 0:t.code,"-").concat(e.code))})}),y&&!b&&(0,o.jsx)("div",{children:Z.map(e=>{var t,n;return(0,o.jsx)(O,{product:e.entryProduct,variant:"non-replaceable",partialOutOfStock:e.partialOutOfStock,pickQuantity:e.pickQuantity,availableQuantity:e.availableQuantity,addToCartDisabled:null===(t=e.entryProduct)||void 0===t?void 0:t.addToCartDisabled},null===(n=e.entryProduct)||void 0===n?void 0:n.code)})})]}),(0,o.jsx)(_,{children:(0,o.jsx)(R,{children:y?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A,{theme:"secondary",wide:!0,onClick:u,isSubmitting:Q,children:t("cancel")}),(0,o.jsx)(A,{wide:!0,spacingLeft:!0,onClick:()=>(null==B?void 0:B.reason)===j.Rv||(null==B?void 0:B.reason)===j.oJ?g():v(),isSubmitting:Q,children:t("continue")})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(A,{theme:"secondary",wide:!0,onClick:()=>m(),isSubmitting:L,children:t("dontReplace")}),(0,o.jsx)(A,{wide:!0,spacingLeft:!0,onClick:p,disabled:!y&&!P,isSubmitting:K,children:t("replace")})]})})})]})})},q=n(62219),J=n(81704),Y=n(47228);let X=e=>{(0,Q.ZP)({event:"Track",category:"cart_merge_modal",action:"continue_with_".concat(e),label:"",value:0})},$=()=>{(0,Q.ZP)({event:"Track",category:"cart_merge_modal",action:"merge_modal_closed",label:"",value:0})};var ee=e=>{switch(e){case Y.Z.KEEP_SESSION:X("anonymous_cart");break;case Y.Z.KEEP_PERSISTENT:X("loggedin_cart");break;case Y.Z.MERGE:X("merge_carts")}},et=n(26387);let en=(0,s.ZP)(a.Z).withConfig({componentId:"sc-1202f7f0-0"})(["margin-bottom:"," !important;"],(0,u.hO)(15)),eo=(0,s.ZP)(l.Z).withConfig({componentId:"sc-1202f7f0-1"})(["text-align:left;margin-bottom:",";"],(0,u.hO)(25)),ei=(0,s.ZP)(P.Z).withConfig({componentId:"sc-1202f7f0-2"})(["width:100%;margin-bottom:"," !important;&:last-child{margin-bottom:0 !important;}"],(0,u.hO)(15));var er=n(60167),el=n(42197),ea=n(18788),ec=n(40230),ed=n(48952),es=()=>{let e=(0,et.Z)(),[t,n]=(0,i.useState)(!1),{refreshCustomer:r}=(0,ea.Z)(),[l,a]=(0,i.useState)(!1),{persistedCart:c,clearCache:d}=(0,el.Z)(),{refreshVouchers:s}=(0,ec.Z)(),{cart:u,refreshCart:h}=(0,G.Z)(),m=(0,L.T)(),{refreshStore:p}=(0,ed.Z)(),g=()=>{n(!1),d()},v=async t=>{try{ee(t);let n=await (0,F.Xb)(t);g(),a(n.data.openOrdersClosed),m((0,er.Bd)(!1)),await Promise.all([h(n.data.cart),r(),s(),p()]);let{from:o,name:i,productCode:l,login:c,...d}=e.query,{pathname:u}=e;e.push({pathname:u,query:d},{pathname:u},{shallow:!0})}catch(e){console.error(e)}};return(0,i.useEffect)(()=>{n(!0),(0,Q.ZP)({event:"Track",category:"cart_merge_modal",action:"merge_modal_shown",label:"",value:0})},[]),(0,o.jsxs)(q.Z,{namespaces:["mergeCart"],children:[l&&(0,o.jsxs)(C.Z,{size:"small",onClose:()=>a(!1),confirmButtonText:"Ok",onConfirm:()=>a(!1),children:[(0,o.jsx)(en,{variant:"h2",color:"black",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->closedOrder->title"})}),(0,o.jsx)(eo,{type:"body",color:"black",children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->closedOrder->text"})})]}),t&&c&&(0,o.jsx)(C.Z,{size:"medium",hasCloseIcon:!0,onClose:()=>{$(),v(Y.Z.KEEP_SESSION)},children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(en,{variant:"h2",color:"black",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->title"})}),(0,o.jsx)(eo,{type:"body",color:"black",children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->text->savedCart",values:{count:c.totalPersistedCartProducts,date:c.persistedCartFormattedDate}})}),(0,o.jsx)(eo,{type:"body",color:"black",children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->text->actions"})})]}),!!u&&(0,o.jsxs)("div",{children:[(0,o.jsx)(ei,{onClick:()=>v(Y.Z.KEEP_SESSION),children:u.totalUnitCount>1?(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->actions->continueWithSession",values:{count:u.totalUnitCount}}):(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->actions->continueWithOneItemSession",values:{count:u.totalUnitCount}})}),(0,o.jsx)(ei,{onClick:()=>v(Y.Z.KEEP_PERSISTENT),children:c.totalPersistedCartProducts>1?(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->actions->continueWithPersistent",values:{count:c.totalPersistedCartProducts}}):(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->actions->continueWithOneItemPersistent",values:{count:c.totalPersistedCartProducts}})}),(0,o.jsx)(ei,{onClick:()=>v(Y.Z.MERGE),children:(0,o.jsx)(J.Z,{i18nKey:"mergeCart:mergeCart->actions->continueWithMerged",values:{count:c.totalPersistedCartProducts+u.totalUnitCount}})})]})]})})]})},eu=n(42919),eh=n(18627),em=n(27899),ep=n(97801),eg=n(95329),ev=n(10025),ef=n(16135),ey=n(57362),eZ=n(83107),ex=n(6714),ew=n(61073);let eb=s.ZP.div.withConfig({componentId:"sc-a94555ff-0"})(["margin-left:auto;z-index:",";max-width:0;height:0;width:100%;top:",";background-color:",";transition:max-width ease ",";display:flex;flex-direction:column;overflow-y:auto;overflow-x:hidden;","{position:sticky;}&::-webkit-scrollbar{display:none;}",""],m.Z.zIndex.cart,(0,u.hO)(m.Z.size.toolbarHeight),m.Z.colors.white,m.Z.animation.layout,x.Z.MEDIA.FROM_TABLET_PORTRAIT,e=>e.isOpen&&(0,s.iv)(["display:none;max-width:",";border-left:"," solid ",";","{display:flex;}"],(0,u.hO)(m.Z.size.cartPreviewWidth),(0,u.hO)(1),m.Z.colors.mediumGray,x.Z.MEDIA.FROM_DESKTOP)),eO=s.ZP.header.withConfig({componentId:"sc-a94555ff-1"})(["border-bottom:"," solid ",";"],(0,u.hO)(1),m.Z.colors.mediumGray),eC=s.ZP.div.withConfig({componentId:"sc-a94555ff-2"})(["position:relative;display:flex;padding:"," "," ",";margin:"," "," ",";"],(0,u.hO)(14),(0,u.hO)(0),(0,u.hO)(18),(0,u.hO)(4),(0,u.hO)(16),(0,u.hO)(0)),ej=(0,s.ZP)(ew.Z).withConfig({componentId:"sc-a94555ff-3"})(["align-self:center;height:",";margin-right:",";"],(0,u.hO)(20),(0,u.hO)(15)),eP=(0,s.ZP)(a.Z).withConfig({componentId:"sc-a94555ff-4"})(["flex-grow:1;"]),ek=s.ZP.section.withConfig({componentId:"sc-a94555ff-5"})(["min-width:",";height:100%;overflow-y:auto;&::-webkit-scrollbar{display:none;}"],(0,u.hO)(m.Z.size.cartPreviewWidth)),eI=s.ZP.section.withConfig({componentId:"sc-a94555ff-6"})([""," min-width:",";border-top:"," solid ",";padding:"," "," ",";z-index:",";"],e=>(0,s.iv)(["box-shadow:"," "," "," "," ",";"],(0,u.hO)(0),(0,u.hO)(-5),(0,u.hO)(50),(0,u.hO)(-15),(0,u.m4)(m.Z.colors.lighterBlack,.2*e.shadowFactor)),(0,u.hO)(m.Z.size.cartPreviewWidth),(0,u.hO)(1),m.Z.colors.mediumGray,(0,u.hO)(11),(0,u.hO)(16),(0,u.hO)(16),m.Z.zIndex[1]),eE=s.ZP.div.withConfig({componentId:"sc-a94555ff-7"})(["display:flex;justify-content:space-between;align-items:center;padding-bottom:",";"],(0,u.hO)(8)),eS=(0,s.ZP)(eZ.Z).withConfig({componentId:"sc-a94555ff-8"})(["width:100%;"]),eT=(0,s.ZP)(P.Z).withConfig({componentId:"sc-a94555ff-9"})(["width:100%;"]),e_=s.ZP.div.withConfig({componentId:"sc-a94555ff-10"})(["display:flex;height:100%;text-align:center;justify-content:center;flex-direction:column;padding:0 ",";"],(0,u.hO)(28)),eR=(0,s.ZP)(ex.Z).withConfig({componentId:"sc-a94555ff-11"})(["margin:"," 0;"],(0,u.hO)(12));var eA=n(11785),eM=n(4002),ez=n(89087),eL=n(17810),eF=n(6465),eK=n(40216),eQ=e=>{var t,n,a;let{headerRef:c}=e,[d,s]=(0,i.useState)(!1),[u,h]=(0,i.useState)(0),[m,p]=(0,i.useState)(!1),{cart:g,isCartEmpty:v,hasFetchedCart:f}=(0,G.Z)(),{t:y}=(0,r.Z)(),Z=(0,L.C)(ev.mu),w=(0,ep.g5)(null==g?void 0:g.products),{customer:b}=(0,ea.Z)(),O=(0,i.useRef)(null),C=(0,i.useRef)(null),j={from:eg.z.CART},k=()=>{var e;let t=((null===(e=c.current)||void 0===e?void 0:e.offsetHeight)||60)+x.Z.HEIGHTS.STICKY_TOOLBAR;t&&O.current&&(window.pageYOffset>=t-x.Z.HEIGHTS.STICKY_TOOLBAR?O.current.style.height="calc(100vh - ".concat(x.Z.HEIGHTS.STICKY_TOOLBAR,"px)"):O.current.style.height="calc(100vh - ".concat(t-window.pageYOffset,"px)"))};(0,eu.Z)(c,()=>{k()});let I=e=>{h(Math.min(50,e.scrollHeight-e.scrollTop-e.clientHeight)/50)};return(0,eu.Z)(C,()=>{C.current&&I(C.current)}),(0,i.useEffect)(()=>(document.addEventListener("scroll",k),()=>{document.removeEventListener("scroll",k)}),[]),(0,i.useEffect)(()=>{C.current&&I(C.current)},[null==g?void 0:g.products]),(0,i.useEffect)(()=>{if(C.current){let e=C.current;return e.addEventListener("scroll",()=>I(e)),()=>{e.removeEventListener("scroll",()=>I(e))}}},[C]),(0,i.useEffect)(()=>{if(Z){var e;let t=null==O?void 0:null===(e=O.current)||void 0===e?void 0:e.querySelector("button");null==t||t.focus()}},[Z]),(0,i.useEffect)(()=>{var e;!Z||!f||(null==g?void 0:null===(e=g.products)||void 0===e?void 0:e.length)||(0,eL.n)()},[g,Z,f]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(em.Z,{visible:m,setVisibility:p,tracking:{actionFieldList:"minicart",category:"minicart",action:"removed_all_products_from_cart"}}),(0,o.jsx)(eb,{"data-testid":"cart-preview",ref:O,isOpen:Z,role:"complementary","aria-label":y("cartpreview:minicartLabel"),children:(0,o.jsxs)(q.Z,{namespaces:["cartpreview","cartpage"],children:[(0,o.jsx)(eO,{children:(0,o.jsxs)(eC,{children:[(0,o.jsx)(eP,{variant:"h2",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"cartpreview:cart->heading",values:{count:(null==g?void 0:g.totalUnitCount)||0}})}),(0,o.jsx)(ej,{productEntries:w,align:"top",forceJustify:"right",btnIconSize:20,disabled:(null==w?void 0:w.length)===0,queryParamsIfNotLoggedIn:j,tracking:{parent:"minicart"},addToListCallback:e=>{let{option:t,productEntries:n}=e;ef.Z.eventShoppingListAddedToCart(n.length,t.value),(0,ey.Z)({action:"current",parent:"minicart"})},createNewListCallback:e=>{let{inputValue:t}=e;ef.Z.eventShoppingListCreated(t),(0,ey.Z)({action:"new",parent:"minicart"})}}),(0,o.jsx)(P.Z,{theme:"transparent",onClick:e=>{e.stopPropagation(),s(!0)},"data-testid":"cartpreview-menu","aria-label":y("cartpreview:openMenuLabel"),children:(0,o.jsx)(eA.Z,{svg:eF.Z,size:20})}),(0,o.jsx)(eM.Z,{open:d,handleClose:()=>s(!1),children:(0,o.jsx)(ez.Z,{onClick:()=>{p(!0)},disabled:!(null==g?void 0:null===(t=g.products)||void 0===t?void 0:t.length),children:(0,o.jsx)(J.Z,{i18nKey:"cartpreview:cart->clear"})})})]})}),(0,o.jsx)(ek,{ref:C,children:f?(0,o.jsx)(o.Fragment,{children:(null==g?void 0:null===(n=g.products)||void 0===n?void 0:n.length)?(0,o.jsx)("div",{children:g.products.map(e=>(0,o.jsx)(eh.Z,{product:e},"cart-row-".concat(e.name,"-").concat(e.code)))}):(0,o.jsx)(e_,{children:(0,o.jsx)(eK.Z,{fromCartPage:!1})})}):(0,o.jsxs)(e_,{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(l.Z,{type:"subhead",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"cartpage:loading->title"})}),(0,o.jsx)(eR,{color:"black",size:32})]}),(0,o.jsx)(l.Z,{type:"body",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"cartpage:loading->body"})})]})}),(0,o.jsxs)(eI,{shadowFactor:u,children:[(0,o.jsxs)(eE,{children:[(0,o.jsx)(l.Z,{type:"body",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"cartpreview:cart->totalPrice"})}),(0,o.jsx)(l.Z,{type:"price",children:(null==g?void 0:g.subTotalWithDiscounts)||"0,00 kr"})]}),(0,o.jsxs)(eE,{children:[(0,o.jsx)(l.Z,{type:"body",size:"small",children:(0,o.jsx)(J.Z,{i18nKey:"cartpreview:cart->youSave"})}),(0,o.jsx)(l.Z,{type:"price",size:"small",color:"red",children:(null==g?void 0:g.totalPromotionDiscount)||"0,00 kr"})]}),(0,o.jsx)(eS,{onClick:e=>{v&&e.preventDefault()},href:eg.Z.CART,variant:"secondary",prefetch:!1,children:(0,o.jsx)(eT,{disabled:!(null==g?void 0:null===(a=g.products)||void 0===a?void 0:a.length),children:(0,o.jsx)(J.Z,{i18nKey:"cartpreview:cart->goToCheckout"})})})]})]})})]})},eB=n(9420),eD=e=>{let[t,n]=(0,i.useState)(e),o=(0,L.C)(eB.ju),[r,l]=(0,i.useState)(!1);(0,i.useEffect)(()=>{e===t||o||r||(l(!0),ef.Z.actionDisplayCartCount(e))},[e]),(0,i.useEffect)(()=>{t===e||o||(n(e),ef.Z.eventCartUpdated(e))},[o,e])},eU=n(23688),eH=n(16478),eN=e=>{let{headerRef:t}=e,{isWebOrNativeAndEcommerce:n}=(0,eU.ZP)(),{persistedCart:i}=(0,el.Z)(),{cart:r,isCartEmpty:l}=(0,G.Z)(),a=(0,L.C)(H.JL),{fromDesktop:c}=(0,eH.Z)();return eD((null==r?void 0:r.totalUnitCount)||0),(0,o.jsxs)(o.Fragment,{children:[a.open&&(0,o.jsx)(W,{}),(!l||(null==r?void 0:r.slot)!==null)&&i&&i.totalPersistedCartProducts>0&&(0,o.jsx)(es,{}),n&&c&&(0,o.jsx)(eQ,{headerRef:t})]})}},4002:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(48282),i=n(74602),r=n(90610),l=n(35073),a=n(70313);let c=r.ZP.div.withConfig({componentId:"sc-35968b56-0"})(["position:absolute;top:0;right:0;background-color:",";box-shadow:0 0 "," 0 ",";z-index:",";border:"," solid ",";border-radius:",";"],l.Z.colors.white,(0,a.hO)(28),(0,a.m4)(l.Z.colors.black,.1),l.Z.zIndex.toolbar+1,(0,a.hO)(1),l.Z.colors.mediumGray,(0,a.hO)(18));var d=e=>{let{open:t,handleClose:n,children:r,className:l,...a}=e;return(0,o.jsx)(o.Fragment,{children:t&&(0,o.jsx)(i.Z,{clickHandler:n,children:(0,o.jsx)(c,{"data-testid":a["data-testid"],className:l,onClick:n,children:r})})})}},89087:function(e,t,n){n.d(t,{Z:function(){return m}});var o=n(48282),i=n(90610),r=n(70313),l=n(35073),a=n(54735),c=n(61699),d=n(85020);let s=i.ZP.div.withConfig({componentId:"sc-7a28a02c-0"})(["white-space:nowrap;min-width:",";","{min-width:",";}&:not(:last-child){border-bottom:"," solid;border-color:",";}"],(0,r.hO)(160),d.Z.MEDIA.FROM_DESKTOP,(0,r.hO)(194),(0,r.hO)(1),l.Z.colors.mediumGray),u=(0,i.ZP)(a.Z).withConfig({componentId:"sc-7a28a02c-1"})(["padding:"," ",";width:100%;text-align:left;height:",";"],(0,r.hO)(14),(0,r.hO)(24),(0,r.hO)(52)),h=(0,i.ZP)(c.Z).withConfig({componentId:"sc-7a28a02c-2"})(["width:100%;",""],e=>e.disabled&&(0,i.iv)(["color:",";cursor:default;"],l.Z.colors.darkGray));var m=e=>{let{onClick:t,selected:n,children:i,disabled:r}=e;return(0,o.jsx)(s,{children:(0,o.jsx)(u,{theme:"transparent",onClick:()=>!r&&t(),children:(0,o.jsxs)(h,{type:"body",disabled:r,children:[n&&(0,o.jsx)("strong",{children:i}),!n&&i]})})})}},42197:function(e,t,n){n.d(t,{Z:function(){return d}});var o=n(97563),i=n(18529),r=n(75893),l=n(74162);let a=(0,l.xD)(r.ZP,()=>(e,t,n={})=>{let{mutate:o}=(0,r.kY)(),a=(0,i.useRef)(e),c=(0,i.useRef)(t),d=(0,i.useRef)(n),s=(0,i.useRef)(0),[u,h,m]=(0,l.Iy)({data:l.i_,error:l.i_,isMutating:!1}),p=u.current,g=(0,i.useCallback)(async(e,t)=>{let[n,i]=(0,l.qC)(a.current);if(!c.current)throw Error("Can’t trigger the mutation: missing fetcher.");if(!n)throw Error("Can’t trigger the mutation: missing key.");let r=(0,l.PM)((0,l.PM)({populateCache:!1,throwOnError:!0},d.current),t),u=(0,l.u3)();s.current=u,m({isMutating:!0});try{let t=await o(n,c.current(i,{arg:e}),(0,l.PM)(r,{throwOnError:!0}));return s.current<=u&&(m({data:t,isMutating:!1,error:void 0}),null==r.onSuccess||r.onSuccess(t,n,r)),t}catch(e){if(s.current<=u&&(m({error:e,isMutating:!1}),null==r.onError||r.onError(e,n,r),r.throwOnError))throw e}},[]),v=(0,i.useCallback)(()=>{s.current=(0,l.u3)(),m({data:l.i_,error:l.i_,isMutating:!1})},[]);return(0,l.LI)(()=>{a.current=e,c.current=t,d.current=n}),{trigger:g,reset:v,get data(){return h.data=!0,p.data},get error(){return h.error=!0,p.error},get isMutating(){return h.isMutating=!0,p.isMutating}}}),c="/cart/merge";var d=()=>{let{data:e,mutate:t}=(0,r.ZP)(c,{revalidateOnFocus:!1,revalidateOnMount:!1}),{trigger:n}=a(c,o.Ic,{populateCache:!0,revalidate:!1});return{persistedCart:e,trigger:n,clearCache:()=>{t(void 0)}}}}}]);
//# sourceMappingURL=CartModals.1d8604d352c6c325.js.map
</script>

</body>
</html>
