<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>insuit-app.html</title>
</head>
<body>
<script>window.i4t||((()=>{let e={"[object Undefined]":"undefined","[object Null]":"null","[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Array]":"array","[object Element]":"htmlElement","[object HTMLAnchorElement]":"htmlElement","[object HTMLAppletElement]":"htmlElement","[object HTMLAreaElement]":"htmlElement","[object HTMLAudioElement]":"htmlElement","[object HTMLBaseElement]":"htmlElement","[object HTMLBodyElement]":"htmlElement","[object HTMLBRElement]":"htmlElement","[object HTMLButtonElement]":"htmlElement","[object HTMLCanvasElement]":"htmlElement","[object HTMLDataElement]":"htmlElement","[object HTMLDataListElement]":"htmlElement","[object HTMLDirectoryElement]":"htmlElement","[object HTMLDialogElement]":"htmlElement","[object HTMLDivElement]":"htmlElement","[object HTMLDListElement]":"htmlElement","[object HTMLEmbedElement]":"htmlElement","[object HTMLFieldSetElement]":"htmlElement","[object HTMLFontElement]":"htmlElement","[object HTMLFormElement]":"htmlElement","[object HTMLFrameElement]":"htmlElement","[object HTMLFrameSetElement]":"htmlElement","[object HTMLHeadingElement]":"htmlElement","[object HTMLHeadElement]":"htmlElement","[object HTMLHRElement]":"htmlElement","[object HTMLHtmlElement]":"htmlElement","[object HTMLIFrameElement]":"htmlElement","[object HTMLImageElement]":"htmlElement","[object HTMLInputElement]":"htmlElement","[object HTMLLabelElement]":"htmlElement","[object HTMLLegendElement]":"htmlElement","[object HTMLLIElement]":"htmlElement","[object HTMLLinkElement]":"htmlElement","[object HTMLMapElement]":"htmlElement","[object HTMLMarqueeElement]":"htmlElement","[object HTMLMediaElement]":"htmlElement","[object HTMLMenuElement]":"htmlElement","[object HTMLMetaElement]":"htmlElement","[object HTMLMeterElement]":"htmlElement","[object HTMLModElement]":"htmlElement","[object HTMLObjectElement]":"htmlElement","[object HTMLOListElement]":"htmlElement","[object HTMLOptGroupElement]":"htmlElement","[object HTMLOptionElement]":"htmlElement","[object HTMLOutputElement]":"htmlElement","[object HTMLParagraphElement]":"htmlElement","[object HTMLParamElement]":"htmlElement","[object HTMLPictureElement]":"htmlElement","[object HTMLPreElement]":"htmlElement","[object HTMLProgressElement]":"htmlElement","[object HTMLQuoteElement]":"htmlElement","[object HTMLScriptElement]":"htmlElement","[object HTMLSelectElement]":"htmlElement","[object HTMLSlotElement]":"htmlElement","[object HTMLSourceElement]":"htmlElement","[object HTMLSpanElement]":"htmlElement","[object HTMLStyleElement]":"htmlElement","[object HTMLTableCaptionElement]":"htmlElement","[object HTMLTableCellElement]":"htmlElement","[object HTMLTableColElement]":"htmlElement","[object HTMLTableElement]":"htmlElement","[object HTMLTimeElement]":"htmlElement","[object HTMLTitleElement]":"htmlElement","[object HTMLTableRowElement]":"htmlElement","[object HTMLTableSectionElement]":"htmlElement","[object HTMLTemplateElement]":"htmlElement","[object HTMLTextAreaElement]":"htmlElement","[object HTMLTrackElement]":"htmlElement","[object HTMLUListElement]":"htmlElement","[object HTMLUnknownElement]":"htmlElement","[object HTMLVideoElement]":"htmlElement","[object HTMLDetailsElement]":"htmlElement","[object HTMLElement]":"htmlElement","[object HTMLDocument]":"document","[object SVGElement]":"svgElement","[object SVGTitleElement]":"svgElement","[object SVGPathElement]":"svgElement","[object SVGSVGElement]":"svgElement","[object SVGDefsElement]":"svgElement","[object SVGPolygonElement]":"svgElement","[object SVGCircleElement]":"svgElement","[object SVGStyleElement]":"svgElement","[object SVGAElement]":"svgElement","[object SVGAnimateElement]":"svgElement","[object SVGAnimateMotionElement]":"svgElement","[object SVGAnimateTransformElement]":"svgElement","[object SVGAnimationElement]":"svgElement","[object SVGClipPathElement]":"svgElement","[object SVGCursorElement]":"svgElement","[object SVGDescElement]":"svgElement","[object SVGEllipseElement]":"svgElement","[object SVGFEBlendElement]":"svgElement","[object SVGFEColorMatrixElement]":"svgElement","[object SVGFEComponentTransferElement]":"svgElement","[object SVGFECompositeElement]":"svgElement","[object SVGFEConvolveMatrixElement]":"svgElement","[object SVGFEDiffuseLightingElement]":"svgElement","[object SVGFEDisplacementMapElement]":"svgElement","[object SVGFEDistantLightElement]":"svgElement","[object SVGFEDropShadowElement]":"svgElement","[object SVGFEFloodElement]":"svgElement","[object SVGFEFuncAElement]":"svgElement","[object SVGFEFuncBElement]":"svgElement","[object SVGFEFuncGElement]":"svgElement","[object SVGFEFuncRElement]":"svgElement","[object SVGFEGaussianBlurElement]":"svgElement","[object SVGFEImageElement]":"svgElement","[object SVGFEMergeElement]":"svgElement","[object SVGFEMergeNodeElement]":"svgElement","[object SVGFEMorphologyElement]":"svgElement","[object SVGFEOffsetElement]":"svgElement","[object SVGFEPointLightElement]":"svgElement","[object SVGFESpecularLightingElement]":"svgElement","[object SVGFESpotLightElement]":"svgElement","[object SVGFETileElement]":"svgElement","[object SVGFETurbulenceElement]":"svgElement","[object SVGFilterElement]":"svgElement","[object SVGGElement]":"svgElement","[object SVGImageElement]":"svgElement","[object SVGLineElement]":"svgElement","[object SVGLinearGradientElement]":"svgElement","[object SVGMarkerElement]":"svgElement","[object SVGMaskElement]":"svgElement","[object SVGMetadataElement]":"svgElement","[object SVGMPathElement]":"svgElement","[object SVGPatternElement]":"svgElement","[object SVGPolylineElement]":"svgElement","[object SVGRadialGradientElement]":"svgElement","[object SVGRectElement]":"svgElement","[object SVGScriptElement]":"svgElement","[object SVGStopElement]":"svgElement","[object SVGSwitchElement]":"svgElement","[object SVGSymbolElement]":"svgElement","[object SVGTextElement]":"svgElement","[object SVGTextPathElement]":"svgElement","[object SVGTSpanElement]":"svgElement","[object SVGUseElement]":"svgElement","[object SVGViewElement]":"svgElement"},s={},i=Object.prototype.toString,r=Object.prototype.hasOwnProperty,n=Function.prototype.toString,o,a=/^\[object .+?Constructor\]$/,l=RegExp("^"+String(window.location.reload).replace(/[.*+?^${}()|[\]/\\]/g,"\\$&").replace(/reload|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),c=function getType(t){try{return void 0===t?"undefined":null===t?"null":e[i.call(t)]||"object"}catch(t){return"object"}};var d,u,h,m,g,t=class base{static extend(...t){return insuit.extend.apply(this,t)}static assign(t){"[object Object]"===i.call(t)&&Object.assign(this.prototype,t)}getNativeCode(t){return insuit.getNativeCode(t)}extend(...t){return insuit.extend.apply(this,t)}get type(){let t=this.constructor.toString();return""===(t=t.substring(0,t.indexOf("{")).replace(/\s\s+/gm," ").replace(/^\s+/g,"").replace(/\s+$/g,"").split(" ")[1])||" "===t||"extends"===t?"anonymous":t}},p=class constructor extends t{#value;constructor(t){super(),this.#value=t}get value(){return this.#value}val(t){return void 0!==t&&(this.#value=t),this.#value}keys(){var e=[];return this.each(function(t){e.push(t)}),insuit(e)}values(){var t=[];return this.each(function(){t.push(this.value)}),insuit(t)}set(t,e){if((t=insuit(t)).isString()&&/\w+/.test(t.value)||this.isArray()&&t.isInt()&&0<=t.value)try{return this.value[t.value]=e,!0}catch(t){i4t.logger.error(t)}return!1}remove(t){if((t=insuit(t)).isString()&&/\w+/.test(t.value)&&this.isPlainObject())try{delete this.value[t.value]}catch(t){i4t.logger.error(t)}this.isArray()&&t.isInt()&&0<=t.value&&t.value<this.value.length&&this.value.splice(t.value,1)}get(t){if((t=insuit(t)).isString()&&/\w+/.test(t.value)||this.isArray()&&t.isInt()&&0<=t.value&&t.value<this.value.length)try{return this.value[t.value]}catch(t){i4t.logger.error(t)}return null}containsKey(t){if((t=insuit(t)).isString()&&/\w+/.test(t.value))for(var e in this.value)if(Object.prototype.hasOwnProperty.call(this.value,e)&&e===t.value)return!0;return!1}clone(){var t={};return this.extend(t,this.value),insuit(t)}isElement(){return!(!this.value||1!==this.value.nodeType)}isArray(){return i4t.array.isArray(this.value)}isMap(){return this.value instanceof Map}isFunction(){return"function"==typeof this.value}isString(){return"string"==typeof this.value}isNullOrEmptyString(){return this.isUndefinedOrNull()||this.isString()&&""===this.trim().value}isNumber(){return"number"==typeof this.value&&!isNaN(this.value)}isWindow(){return!this.isObject()&&"setTimeout"in this.value}isBoolean(){return"boolean"==typeof this.value}isObject(){return!this.isUndefinedOrNull()&&"[object Object]"===i.call(this.value)}isRegExp(){return this.value instanceof RegExp}isInt(){var t=parseInt(this.value);return!isNaN(t)&&this.value.toString()===t.toString()}isFloat(){var t=parseFloat(this.value);return!isNaN(t)&&this.value.toString()===t.toString()}isUndefined(){return void 0===this.value}isUndefinedOrNull(){return this.isUndefined()||null===this.value}isNative(){var t=this.value,e=typeof t;return"function"==e?l.test(n.call(t)):t&&"object"==e&&a.test(i.call(t))||!1}isPlainObject(){if(!this.value||!this.isObject()||this.value.nodeType)return!1;try{if(this.value.constructor&&!r.call(this.value,"constructor")&&!r.call(this.value.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(var t in this.value)if(!r.call(this.value,t))return!1;return!0}isEmptyObject(){if(!this.isObject())return!1;for(var t in this.value)if(Object.prototype.hasOwnProperty.call(this.value,t))return!1;return!0}each(t,e){var i=[];if(insuit(t).isFunction()&&!this.isUndefinedOrNull()){var r,n,s,a,l=Array.prototype.splice,o=void 0===this.value.length||void 0===this.value.length&&this.isFunction();if(e){if(s=e.length,o){for(r in this.value)if(l.call(e,s,s,r),a=t.apply(insuit(this.value[r]),e),i.push(a),!1===a)break}else for(n=0;n<this.value.length&&(l.call(e,s,s,n),a=t.apply(insuit(this.value[n]),e),i.push(a),!1!==a);n++);return this}if(o){for(r in this.value)if(a=t.call(insuit(this.value[r]),r),i.push(a),!1===a)break;return this}for(n=0;n<this.value.length&&(a=t.call(insuit(this.value[n]),n),i.push(a),!1!==a);n++);}return insuit(i)}stringify(){return(i4t.string.JSON&&i4t(Array.prototype.toJSON).isUndefinedOrNull()&&i4t(Object.prototype.toJSON).isUndefinedOrNull()?i4t.string.JSON:i4t.insuitJSON).stringify(this.value)}};function insuit(t){return t instanceof insuit.constructor?t:new(insuit[c(t)]||insuit.constructor)(t)}function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return g.lastIndex=0,g.test(t)?'"'+t.replace(g,function(t){var e=h[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}insuit.base=t,insuit.constructor=p,insuit.getNativeClass=function(t,e=insuit.constructor){let i=class extends e{},r=insuit.getNativeCode(t),n=function getAccesibleStaticProperties(e,i){return Object.getOwnPropertyNames(e).filter(t=>"prototype"!==t&&!i.property&&!!Object.getOwnPropertyDescriptor(e,t).writable&&"function"==typeof e[t])}(r,i),s=function getAccesibleOwnProperties(e,i){return Object.getOwnPropertyNames(e.prototype).filter(t=>"constructor"!==t&&!i.prototype[t]&&!!Object.getOwnPropertyDescriptor(e.prototype,t).writable&&"function"==typeof e.prototype[t])}(r,i);return n.forEach(t=>{var e;i[t]=(e=t,function(...t){return r[e].apply(this.value,t)})}),s.forEach(t=>{var e;i.prototype[t]=(e=t,function(...t){return r.prototype[e].apply(this.value,t)})}),i},insuit.createNativeIframe=function(){var t=document.createElement("iframe");return t.setAttribute("id","x-insuit-native-iframe"),t.style.display="none",t.setAttribute("srcdoc","<html></html>"),t.setAttribute("title","Native support iframe"),t.setAttribute("aria-hidden","true"),t},insuit.getNativeIframe=function(){var t;return i4t.nativeIframe||(t=insuit.createNativeIframe(),document.documentElement.appendChild(t),i4t.nativeIframe=t)},insuit.getNativeCode=function(r){if(s[r])return s[r];var n=insuit.getNativeIframe();try{let t,e=r.split("."),i=n.contentWindow;for(t=0;t<e.length;t++)i=i[e[t]];return s[r]=i}catch(t){return null}},insuit.extend=function extend(){var t,e,i,r,n=arguments[0]||{},s=1,a=arguments.length,l=!1;for("boolean"==typeof n&&(l=n,n=arguments[1]||{},s=2),"object"==typeof n||insuit(n).isFunction()||(n={}),a===s&&(n=this,--s);s<a;s++)if(null!==(t=arguments[s]))for(e in t)r=n[e],n!==(i=t[e])&&(l&&i&&(insuit(i).isPlainObject()||insuit(i).isArray())?(r=insuit(i).isArray()?r&&insuit(r).isArray()?r:[]:r&&insuit(r).isPlainObject()?r:{},n[e]=insuit.extend(l,r,i)):void 0!==i&&(n[e]=i));return n},insuit.beIframe=function beIframe(){return window.top!==window.self&&!i4t.config.get("test.integration")},insuit.execute=function execute(t,e,...i){return i4t(t).isNullOrEmptyString()||!/\S/.test(t)?null:(i4t(e).isUndefinedOrNull()&&(e=this),i4t(t).toFunction(e,...i)())},insuit.generateUUID=function generateUUID(){var i=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?e:3&e|8).toString(16)})},insuit.asyncExecute=function asyncExecute(t,e,i,r=10){var n,s,a,l=i4t.insuitIframeBus;i4t(l).isUndefinedOrNull()&&0<r?i4t(()=>insuit.asyncExecute(t,e,i,r-1),400):l.isActive?.()?(n=i4t.generateUUID(),s=i4t(e).isArray()?e:[],a=i4t(t).isFunction()?t.toString():null,i4t(o).isUndefinedOrNull()&&(o={},l.subscribe("execute-async",t=>{o[t.id].call(this,t.result)})),o[n]=i,l.publish("execute-async",{id:n,code:a,args:s})):i(t.apply(this,e))},insuit.md5=function md5(t){function safeAdd(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function md5cmn(t,e,i,r,n,s){return safeAdd(function bitRotateLeft(t,e){return t<<e|t>>>32-e}(safeAdd(safeAdd(e,t),safeAdd(r,s)),n),i)}function md5ff(t,e,i,r,n,s,a){return md5cmn(e&i|~e&r,t,e,n,s,a)}function md5gg(t,e,i,r,n,s,a){return md5cmn(e&r|i&~r,t,e,n,s,a)}function md5hh(t,e,i,r,n,s,a){return md5cmn(e^i^r,t,e,n,s,a)}function md5ii(t,e,i,r,n,s,a){return md5cmn(i^(e|~r),t,e,n,s,a)}return function rstr2hex(t){for(var e,i="0123456789abcdef",r="",n=0;n<t.length;n+=1)e=t.charCodeAt(n),r+=i.charAt(e>>>4&15)+i.charAt(15&e);return r}(function rstrMD5(t){return function binl2rstr(t){for(var e="",i=32*t.length,r=0;r<i;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e}(function binlMD5(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i,r,n,s,a=1732584193,l=-271733879,o=-1732584194,c=271733878,d=0;d<t.length;d+=16)a=md5ff(i=a,r=l,n=o,s=c,t[d],7,-680876936),c=md5ff(c,a,l,o,t[d+1],12,-389564586),o=md5ff(o,c,a,l,t[d+2],17,606105819),l=md5ff(l,o,c,a,t[d+3],22,-1044525330),a=md5ff(a,l,o,c,t[d+4],7,-176418897),c=md5ff(c,a,l,o,t[d+5],12,1200080426),o=md5ff(o,c,a,l,t[d+6],17,-1473231341),l=md5ff(l,o,c,a,t[d+7],22,-45705983),a=md5ff(a,l,o,c,t[d+8],7,1770035416),c=md5ff(c,a,l,o,t[d+9],12,-1958414417),o=md5ff(o,c,a,l,t[d+10],17,-42063),l=md5ff(l,o,c,a,t[d+11],22,-1990404162),a=md5ff(a,l,o,c,t[d+12],7,1804603682),c=md5ff(c,a,l,o,t[d+13],12,-40341101),o=md5ff(o,c,a,l,t[d+14],17,-1502002290),a=md5gg(a,l=md5ff(l,o,c,a,t[d+15],22,1236535329),o,c,t[d+1],5,-165796510),c=md5gg(c,a,l,o,t[d+6],9,-1069501632),o=md5gg(o,c,a,l,t[d+11],14,643717713),l=md5gg(l,o,c,a,t[d],20,-373897302),a=md5gg(a,l,o,c,t[d+5],5,-701558691),c=md5gg(c,a,l,o,t[d+10],9,38016083),o=md5gg(o,c,a,l,t[d+15],14,-660478335),l=md5gg(l,o,c,a,t[d+4],20,-405537848),a=md5gg(a,l,o,c,t[d+9],5,568446438),c=md5gg(c,a,l,o,t[d+14],9,-1019803690),o=md5gg(o,c,a,l,t[d+3],14,-187363961),l=md5gg(l,o,c,a,t[d+8],20,1163531501),a=md5gg(a,l,o,c,t[d+13],5,-1444681467),c=md5gg(c,a,l,o,t[d+2],9,-51403784),o=md5gg(o,c,a,l,t[d+7],14,1735328473),a=md5hh(a,l=md5gg(l,o,c,a,t[d+12],20,-1926607734),o,c,t[d+5],4,-378558),c=md5hh(c,a,l,o,t[d+8],11,-2022574463),o=md5hh(o,c,a,l,t[d+11],16,1839030562),l=md5hh(l,o,c,a,t[d+14],23,-35309556),a=md5hh(a,l,o,c,t[d+1],4,-1530992060),c=md5hh(c,a,l,o,t[d+4],11,1272893353),o=md5hh(o,c,a,l,t[d+7],16,-155497632),l=md5hh(l,o,c,a,t[d+10],23,-1094730640),a=md5hh(a,l,o,c,t[d+13],4,681279174),c=md5hh(c,a,l,o,t[d],11,-358537222),o=md5hh(o,c,a,l,t[d+3],16,-722521979),l=md5hh(l,o,c,a,t[d+6],23,76029189),a=md5hh(a,l,o,c,t[d+9],4,-640364487),c=md5hh(c,a,l,o,t[d+12],11,-421815835),o=md5hh(o,c,a,l,t[d+15],16,530742520),a=md5ii(a,l=md5hh(l,o,c,a,t[d+2],23,-995338651),o,c,t[d],6,-198630844),c=md5ii(c,a,l,o,t[d+7],10,1126891415),o=md5ii(o,c,a,l,t[d+14],15,-1416354905),l=md5ii(l,o,c,a,t[d+5],21,-57434055),a=md5ii(a,l,o,c,t[d+12],6,1700485571),c=md5ii(c,a,l,o,t[d+3],10,-1894986606),o=md5ii(o,c,a,l,t[d+10],15,-1051523),l=md5ii(l,o,c,a,t[d+1],21,-2054922799),a=md5ii(a,l,o,c,t[d+8],6,1873313359),c=md5ii(c,a,l,o,t[d+15],10,-30611744),o=md5ii(o,c,a,l,t[d+6],15,-1560198380),l=md5ii(l,o,c,a,t[d+13],21,1309151649),a=md5ii(a,l,o,c,t[d+4],6,-145523070),c=md5ii(c,a,l,o,t[d+11],10,-1120210379),o=md5ii(o,c,a,l,t[d+2],15,718787259),l=md5ii(l,o,c,a,t[d+9],21,-343485551),a=safeAdd(a,i),l=safeAdd(l,r),o=safeAdd(o,n),c=safeAdd(c,s);return[a,l,o,c]}(function rstr2binl(t){var e=[];for(e[(t.length>>2)-1]=void 0,r=0;r<e.length;r+=1)e[r]=0;for(var i=8*t.length,r=0;r<i;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e}(t),8*t.length))}(unescape(encodeURIComponent(t))))},insuit.version="9.0.14-59-000","%24%7Bfrontend.version%7D"===encodeURIComponent(insuit.version)&&(t=(new Date).getTime().toString(),insuit.version=t.substring(0,2)+"."+t.substring(2,4)+"."+t.substring(4,6)+"-SNAPSHOT"+t.substring(6)),insuit.insuitJSON=(g=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},{stringify(t,e,i){var r;if(u=d="","number"==typeof i)for(r=0;r<i;r+=1)u+=" ";else"string"==typeof i&&(u=i);if(!(m=e)||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return function str(t,e){var i,r,n,s,a,l=d,o=e[t];switch(typeof(o="function"==typeof m?m.call(e,t,o):o)){case"string":return quote(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(d+=u,a=[],"[object Array]"===Object.prototype.toString.apply(o)){for(s=o.length,i=0;i<s;i+=1)a[i]=str(i,o)||"null";n=0===a.length?"[]":d?"[\n"+d+a.join(",\n"+d)+"\n"+l+"]":"["+a.join(",")+"]"}else{if(m&&"object"==typeof m)for(s=m.length,i=0;i<s;i+=1)"string"==typeof m[i]&&(n=str(r=m[i],o))&&a.push(quote(r)+(d?": ":":")+n);else for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(n=str(r,o))&&a.push(quote(r)+(d?": ":":")+n);n=0===a.length?"{}":d?"{\n"+d+a.join(",\n"+d)+"\n"+l+"}":"{"+a.join(",")+"}"}return d=l,n}}("",{"":t});throw new Error("JSON.stringify")}}),insuit(window.i4t).isFunction()||(window.i4t=insuit)})(),i4t.array=class ArrayWrapper extends i4t.getNativeClass("Array"){static globalTimeout=!1;indexOf(e,i=(t,e)=>t===e){for(let t=0;t<this.length();t++)if(i(this.value[t],e))return t;return-1}sort(t){return i4t(super.sort.call(this,t))}first(){return this.at?this.at(0):0===this.length()?null:this.value[0]}last(){return this.at?this.at(-1):0===this.length()?null:this.value[this.length()-1]}clone(){return i4t(this.slice(0))}merge(t){if(i4t(t).isArray()){for(var e=this.value,i=e.length,r=0;r<t.length;r++)(this.indexOf(t[r])<0||i4t(this.indexOf(t[r])).isUndefinedOrNull())&&(e[i++]=t[r]);e.length=i}return this}concat(...t){return i4t(super.concat.apply(this,t))}push(t){this.value.push(t)}length(){return this.value.length}remove(t){return this.splice(t,1)}removeItem(t){t=this.indexOf(t);return this.remove(t)}move(t,e){return this.splice(e,0,this.splice(t,1)[0])}hasDuplicates(){var t=this.value;let e=new Set;return t.some(t=>{if(e.has(t))return!0;e.add(t)})}includes(t){return-1<this.indexOf(t)}reverse(){return super.reverse(),this}filter(t){return i4t(super.filter(t))}map(t){return i4t(super.map(t))}isEmpty(){return 0===this.length()}flat(t){return i4t(super.flat(t))}findLast(e){for(let t=this.length()-1;0<=t;--t){var i=this.value[t];if(e(i))return i}}async forEachTimeout(t,i,...r){let n=!1,e=i4t(()=>{n=!0,i4t.logger.trace(`Se corta la ejecución de ${i.name} por timeout`)}).delay(t);for(let e of this.value)n||await new Promise(t=>{i4t(()=>{i(e,r),t()}).defer()});clearTimeout(e)}static isArray(t){return super.isArray(t)}},i4t.node=class AbstractNodeWrapper extends i4t.getNativeClass("Node"){clone(){return i4t(super.cloneNode.call(this,!0))}},i4t.element=class ElementWrapper extends i4t.getNativeClass("Element",i4t.node){static hasShadows=!1;static focusableElementSelectors=["a","button","input","textarea","select","details","iframe","embed","object","summary dialog","audio[controls]","video[controls]","[contenteditable]","[tabindex]:not([tabindex='-1'])"];static getActiveElement(){var t=document.activeElement;return t.shadowRoot&&i4t(t.shadowRoot.activeElement).isElement()?t.shadowRoot.activeElement:t}#getStyle=(()=>{let n=/([A-Z]|^ms)/g;return document.defaultView&&document.defaultView.getComputedStyle?function(t,e){var i,r;return e=e.replace(n,"-$1").toLowerCase(),i=(r=t.ownerDocument.defaultView)&&(r=r.getComputedStyle(t,null))&&""===(i=r.getPropertyValue(e))?t.style[e]:i}:function(t,e){return t.style[e]}})();#getRelative(t){var e=t;do{if(Node.DOCUMENT_FRAGMENT_NODE===e.nodeType)return null;if("relative"===this.#getStyle(e,"position"))return e}while(e=e.parentNode,!i4t(e).isUndefinedOrNull()&&Node.DOCUMENT_NODE!==e.nodeType&&Node.DOCUMENT_FRAGMENT_NODE!==e.nodeType);return null}#isVisibleInsideParent(t,e){return!(t.left<e.left||t.left>=e.left+e.width||t.top<e.top||t.top>=e.top+e.height)}#isVisible(t,e){for(var i,r,n,s,a=t,l=t.parentNode;l&&9!==l.nodeType;){if(s=a.tagName.toLowerCase(),i=i4t(a).offset(),"0"===this.#getStyle(a,"opacity")||"none"===this.#getStyle(a,"display")||"hidden"===this.#getStyle(a,"visibility"))return!1;if(i.width<=0&&i.height<=0&&"strong"!==s&&"small"!==s&&"a"!==s&&"span"!==s)return!1;if(("hidden"===(s=this.#getStyle(a,"overflow"))||"auto"===s)&&!this.#isVisibleInsideParent(e,i))return!1;if("fixed"===(n=this.#getStyle(a,"position")))return!0;if(r=i4t(this.#getRelative(l)),"absolute"===n)return!r.isElement()||!!r.isVisible()&&!!("hidden"!==(s=this.#getStyle(r.val(),"overflow"))&&"auto"!==s||(i=r.offset(),this.#isVisibleInsideParent(e,i)));if(("right"===(n=this.#getStyle(a,"float"))||"left"===n)&&r.isUndefinedOrNull())return!0;l=(a=l).parentNode}return!0}#isFixed(t){var e=t;do{if("fixed"===this.#getStyle(e,"position"))return!0}while(e=e.parentNode,Node.DOCUMENT_NODE!==e.nodeType&&Node.DOCUMENT_FRAGMENT_NODE!==e.nodeType);return!1}#elementInDocument(t){for(t=t.parentNode;t;){if((t=t instanceof DocumentFragment&&t.host?t.host:t)==document)return!0;t=t.parentNode}return!1}getBox(t){var e=window.document.documentElement,t=t.getBoundingClientRect(),i={},r=window.pageYOffset||e.scrollTop||i4t.scroll.getScrollableElement(this.value,"y").scrollTop,n=window.pageXOffset||e.scrollLeft||i4t.scroll.getScrollableElement(this.value,"x").scrollLeft;return i.y=i.top=t.top+r-(e.clientTop||0),i.x=i.left=t.left+n-(e.clientLeft||0),i.width=t.width+e.scrollWidth-(e.clientWidth||0),i.height=t.height+e.scrollHeight-(e.clientHeight||0),i.bottom=i.top+i.height,i.right=i.left+i.width,i}getBodyBox(){var t=window.document.documentElement,e=this.getBox(document.body),i={};return i.y=i.top=0<e.top?e.top:0,i.x=i.left=0<e.left?e.left:0,i.width=e.width>=t.clientWidth?e.width:t.clientWidth,i.height=e.height>=t.clientHeight?e.height:t.clientHeight,i.bottom=i.top+i.height,i.right=i.left+i.width,i}#camelCase(t){return t.replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(t,e){return(e+"").toUpperCase()})}#isNumberProp(t){return!!{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}[t]}getLang(){let t=this.attr("lang"),e=this;for(;i4t(t).isNullOrEmptyString()&&e.parent().isElement()&&!e.is("html");)e=e.parent(),t=e.attr("lang");return t}#isVisibleCss(t){var e;return"a"===t.tagName.toLowerCase()&&1===this.children().length()&&("img"===(e=this.children().get(0)).tagName.toLowerCase()&&"0"!==this.#getStyle(e,"opacity")||"none"!==this.#getStyle(e,"display")||"hidden"!==this.#getStyle(e,"visibility"))||"0"!==this.#getStyle(t,"opacity")&&"none"!==this.#getStyle(t,"display")&&"hidden"!==this.#getStyle(t,"visibility")}#isVisibleInViewport(t,e){return!(t.left<-e.left||t.top<-e.top||t.left>=e.width||t.top>=e.height)}isInViewport(){var t=this.value.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}isVisible(t){if(i4t(t).isNullOrEmptyString())return this.#isVisibleCss(this.val());if(t.includes("viewport"))return!!this.#isVisibleCss(this.val())&&(e=this.offset(),this.#isVisibleInViewport(e,this.getBodyBox()));if(t.includes("all")&&this.#isVisibleCss(this.val())){var e=this.offset();if(this.#isVisibleInViewport(e,this.getBodyBox()))return this.#isVisible(this.val(),e)}return!1}isFixed(){return!!this.#elementInDocument(this.val())&&this.#isFixed(this.val())}isInDOM(){return this.#elementInDocument(this.val())}css(t){if(i4t(t).isNullOrEmptyString())return"";t=this.#camelCase(t);var e=this.#getStyle(this.val(),t);if("transform"===t&&i4t(e).isNullOrEmptyString()){var i=(t,e)=>(t=this.#camelCase(t),this.#getStyle(e,t)),e=i("-moz-"+t,this.val());if(!i4t(e).isNullOrEmptyString())return e;if(e=i("-webkit-"+t,this.val()),!i4t(e).isNullOrEmptyString())return e;if(e=i("-ms-"+t,this.val()),!i4t(e).isNullOrEmptyString())return e;if(e=i("-o-"+t,this.val()),!i4t(e).isNullOrEmptyString());}return e}addClass(t){return this.hasClass(t)||(this.val().className+=(this.val().className?" ":"")+t),this}hasClass(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.val().className)}removeClass(t){return this.hasClass(t)&&(this.val().className=this.val().className.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," "),this.val().className=i4t(this.val().className).trim().val()),this}toggleClass(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}siblings(){for(var t=[],e=this.val().parentNode.firstChild;e;e=e.nextSibling)1===e.nodeType&&e!==this.val()&&t.push(e);return i4t(t)}children(){for(var t=[],e=this.val().firstChild;e;e=e.nextSibling)1===e.nodeType&&t.push(e);return i4t(t)}previous(){var t=this.previousSibling();return t.isUndefinedOrNull()&&(t=i4t(this.val().parentNode).children().last()),i4t(t)}next(){var t=this.nextSibling();return t.isUndefinedOrNull()&&(t=i4t(this.val().parentNode).children().first()),i4t(t)}previousSibling(){for(var t=this.val();(t=t.previousSibling)&&1!=t.nodeType;);return i4t(t)}nextSibling(){for(var t=this.val();(t=t.nextSibling)&&1!=t.nodeType;);return i4t(t)}offset(){var t,e,i={},r=this.val();return this.isInDOM()?(e=this.getBox(r),t=this.getBodyBox(),i.y=i.top=Math.round(e.top-t.top),i.x=i.left=Math.round(e.left-t.left),i.width=Math.round(r.offsetWidth),i.height=Math.round(r.offsetHeight),i.bottom=i.top+i.height,i.right=i.left+i.width,i):{top:-1,left:-1,width:0,height:0}}outerHTML(){var t,e;return this.val().outerHTML?this.val().outerHTML:((e=i4t(document).createElement("div")).appendChild(this.clone().val()),t=e.innerHTML,e=null,t)}getSelector(){var e=this.val().nodeName.toLowerCase(),t=i4t(this.attr("id"));if(!(e=i4t(e).includes(":")?"":e).match("^(body|html|head)$")){if(t.isString()&&!t.isNullOrEmptyString())return e+="#"+t.trim().val().replace(/(\W)/g,"\\$1");(t=i4t(this.attr("class"))).isString()&&!t.trim().isNullOrEmptyString()&&i4t(t.trim().val().split(" ")).each(function(){var t=this.val();if(/^[A-Za-z][A-Za-z\-_]*$/.test(t))return e+="."+t,!1})}return e}cssPath(){for(var t,e,i=[],r=this;r.isElement();){var n=r.val(),s=r.getSelector(),a=i4t(n.parentNode);if(a.isElement()&&1<i4t(n.parentNode).findAll(a.getSelector()+" > "+s).length()){for(t=r.previousSibling(),e=1;t.isElement();)e++,t=t.previousSibling();s+=":nth-child("+e+")"}i4t(s).isNullOrEmptyString()&&(s="*"),i.unshift(s),r=i4t(n.parentNode)}return i.join(" > ")}findAll(i){if(i.includes(":shadow"))return this.findAllInsideShadow(i);let t;try{t=[...this.querySelectorAll(i)]}catch(e){try{t=i4t.element.Sizzle(i,this.val())}catch(t){i4t.logger.error("[querySelectorAll] No se ha podido ejecutar el selector: "+i,e),i4t.logger.error("[Sizzle] No se ha podido ejecutar el selector: "+i,t)}}return i4t.element.hasShadows?i4t(t).concat(this.findAllInsideShadows(i).value):i4t(t)}findInsideShadow(t){let e=/(.*?):shadow\((.*)\)$/.exec(t),i=e[1],r=e[2],n=i4t.find(i);if(!n.isElement())return n;i4t.element.hasShadows=!0,n.attr("data-insuit-shadow","true");t=i4t([...n.value.shadowRoot.children]).map(t=>!i4t(r).includes(":shadow")&&t.matches(r)?t:i4t(t).find(r)).get(0);return i4t(t)}findAllInsideShadow(t){i4t.element.hasShadows=!0;let e=/(.*?):shadow\((.*)\)/.exec(t),i=e[1],r=e[2];return i4t.findAll(i).filter(t=>t.shadowRoot).map(t=>(i4t.element.hasShadows=!0,i4t(t).attr("data-insuit-shadow","true"),[...t.shadowRoot.children])).flat(1/0).map(t=>!i4t(r).includes(":shadow")&&t.matches(r)?[t,...i4t(t).findAll(r).value]:i4t(t).findAll(r).value).flat(1/0)}find(i){if(i.includes(":shadow"))return this.findInsideShadow(i);let t=null;try{t=this.querySelector(i)}catch(e){try{t=(t=i4t(i4t.element.Sizzle(i,this.val()))).isArray()?t.first():null}catch(t){i4t.logger.error("[querySelector] No se ha podido ejecutar el selector: "+i,e),i4t.logger.error("[Sizzle] No se ha podido ejecutar el selector: "+i,t)}}return i4t(t).isElement()||!i4t.element.hasShadows?i4t(t):i4t(this.findAllInsideShadows(i).get(0))}getAllShadowRootDirectChildren(){return this.findAllShadowRoots().filter(t=>!!t.shadowRoot).flatMap(t=>[...t.shadowRoot.children])}queryOnShadows(t,e){return t.flatMap(t=>i4t(t).findAll(e).value).filter(t=>i4t(t).isElement())}findAllInsideShadows(i){var t=this.getAllShadowRootDirectChildren(),e=this.queryOnShadows(t,i),t=i4t(t).filter(e=>{try{return e.matches(i)}catch(t){return i4t.element.Sizzle.matchesSelector(e,i)}}).value;return i4t(t).concat(e)}findAllShadowRoots(){var t=[...this.value.querySelectorAll("[data-insuit-shadow=true]")];return"DocumentWrapper"!==this.type&&this.matches("[data-insuit-shadow=true]")&&t.push(this.value),t}style(t,e,i){var r,n=this.val();if(3!==n.nodeType&&8!==n.nodeType&&n.style){e=i4t(e);var s=this.#camelCase(t);if(e.isUndefinedOrNull())return this.css(s);r=(e=e.isString()&&(r=/^([-+])=([-+.\de]+)/.exec(e.val()))?i4t(+(r[1]+1)*+r[2]+parseFloat(n.style[s])):e).isString()&&e.isNumeric(),!e.isNumber()&&!r||this.#isNumberProp(s)||(e=i4t(e.val()+"px"));try{i?n.style.setProperty(t,e.value,"important"):n.style[s]=e.val()}catch(t){i4t.logger.trace("No se ha podido setear el estilo: "+s+", value: "+e.val(),t)}}return this}attr(t,e){var i=this.val();if(this.isElement()){if((e=i4t(e)).isUndefinedOrNull())return i.getAttribute(t);if(e=""+e.val(),i.getAttribute(t)!==e)try{i.setAttribute(t,e)}catch(t){i4t.logger.error(t)}}return this}removeAttr(t){var e=this.val();if(this.isElement())try{e.removeAttribute(t)}catch(t){i4t.logger.error(t)}return this}html(t){var e=this.val();return this.isElement()?(t=i4t(t)).isUndefinedOrNull()?e.innerHTML:(e.innerHTML=""+t.val(),this):this}remove(t){(t=i4t(t)).isElement()?this.removeChild(t.val()):(!i4t(this.value.parentNode).isUndefinedOrNull()&&i4t(this.value.parentNode).isElement()&&i4t(this.value.parentNode).removeChild(this.val()),this.value.parentNode instanceof DocumentFragment&&this.value.parentNode.removeChild(this.val()))}before(t){t=i4t(t);var e,i,r=this;return t.isElement()?(i4t(this.val().parentNode).isElement()&&i4t(this.val().parentNode).insertBefore(t.val(),this.val()),t):t.isString()?(e=i4t([]),(i=i4t(i4t(document).createElement("div"))).html(t.val()),i.children().each(function(){e.push(this),r.before(this)}),1===e.length()?i4t(e.first()):e):this}after(t){t=i4t(t);var e,i,r=this;return t.isElement()?(((i=r.parent()).isElement()?i:i.value).insertBefore(t.val(),r.val().nextSibling),t):t.isString()?(e=i4t([]),(i=i4t(i4t(document).createElement("div"))).html(t.val()),i.children().each(function(){e.push(this),r.after(this)}),1===e.length()?i4t(e.first()):e):this}append(t){t=i4t(t);var e,i,r=this;return t.isElement()?(r.appendChild(t.val()),t):t.isString()?(e=i4t([]),(i=i4t(i4t(document).createElement("div"))).html(t.val()),i.children().each(function(){e.push(this),r.append(this)}),1===e.length()?i4t(e.first()):e):this}prepend(t){t=i4t(t);var e,i,r=this;return t.isElement()?(0<this.val().children.length?i4t(r.val()).insertBefore(t.val(),this.val().children[0]):r.append(t.val()),t):t.isString()?(e=i4t([]),(i=i4t(i4t(document).createElement("div"))).html(t.val()),i.children().each(function(){e.push(this),r.prepend(this)}),1===e.length()?i4t(e.first()):e):this}text(){return i4t(this.val().innerText).isNullOrEmptyString()?this.val().textContent:this.val().innerText}replace(t){return(t=i4t(t)).isElement()&&i4t(this.val().parentNode).isElement()&&(i4t(this.val().parentNode).replaceChild(t.val(),this.val()),this.val(t.val())),this}parent(){return i4t(this.val().parentNode)}parentElement(){return this.parent()&&this.parent().value.nodeType===Node.DOCUMENT_FRAGMENT_NODE?i4t(this.parent().value.host):this.parent()}wrap(t){t=this.before(t);return t.isElement()?(t.append(this),t):null}unwrap(){var t=this;this.children().each(function(){t.before(this)}),this.remove()}show(){return this.removeClass("x-insuit-hidden")}hide(){return this.addClass("x-insuit-hidden")}toggle(){return this[this.hasClass("x-insuit-hidden")?"show":"hide"]()}zIndex(){for(var t,e=0,i=this;i.isElement();)t=parseInt(i.css("z-index"),10),!isNaN(t)&&e<t&&(e=t),i=i.parent();return e}href(){var t=this.attr("href");return i4t(t).isNullOrEmptyString()?null:(i4t(this.attr("rel")).isNullOrEmptyString()||0!==this.attr("rel").indexOf("#")?i4t(t):i4t(this.attr("rel"))).trim().val()}id(){var t,e=this.attr("id");if(!i4t(e).isNullOrEmptyString())return e;for(;t="i4t-id-"+Math.random().toString(36).substr(2,9),i4t.find("[id='"+t+"']").isElement(););return this.attr("id",t),t}is(t){return this.val().nodeName.toUpperCase()===t.toUpperCase()}isDescriptedByAttributes(){var t=this.attr("aria-label"),e=this.attr("aria-labelledby"),i=this.attr("aria-describedby"),r=this.attr("title"),n=this.attr("alt");return!(i4t(t).isNullOrEmptyString()&&i4t(e).isNullOrEmptyString()&&i4t(i).isNullOrEmptyString()&&i4t(r).isNullOrEmptyString()&&i4t(n).isNullOrEmptyString())}isBeforeInDOM(t){t=this.val().compareDocumentPosition(t);return!!(t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY)}isContainedBy(t){return!!(this.val().compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS)}addEventListener(t,e,i=!1){return i4t.event.addListener(t,e,this.val(),i),this}dispatchEvent(t,e){return i4t.event.dispatch(t,this.val(),e)}click(){"desktop"!==i4t.userAgent.device.type&&(this.dispatchEvent("touchstart"),this.dispatchEvent("touchend")),this.dispatchEvent("mousedown"),this.dispatchEvent("mouseup"),this.dispatchEvent("click")}removeEventListener(t,e){return i4t.event.removeListener(t,e,this.val()),this}addObserver(t,e,i){return i4t.event.addObserver(this.val(),t,e,i)}isFocusable(){return!!this.value.matches(i4t.element.focusableElementSelectors.join(","))&&!this.hasAttribute("disabled")&&!this.hasAttribute("hidden")&&null!==this.value.offsetParent}insuitEvent=()=>i4t.event.insuit;static#Sizzle;static get Sizzle(){return this.#Sizzle||this.#createSizzle(),this.#Sizzle}static#createSizzle(){this.#Sizzle=(i=>{function R3(t,e){return t="0x"+t.slice(1)-65536,e||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))}function T3(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}function U3(){A()}var t,h,E,s,e,m,u,P,S,o,c,A,w,r,x,g,n,a,p,C="sizzle"+ +new Date,d=i.document,N=0,D=0,F=createCache(),B=createCache(),H=createCache(),f=createCache(),l=function(t,e){return t===e&&(c=!0),0},K={}.hasOwnProperty,v=[],V=v.pop,G=v.push,O=v.push,z=v.slice,y=function(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},b="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",T="[\\x20\\t\\r\\n\\f]",R="(?:\\\\[\\da-fA-F]{1,6}"+T+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",q="\\["+T+"*("+R+")(?:"+T+"*([*^$|!~]?=)"+T+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+T+"*\\]",I=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|.*)\\)|)",W=new RegExp(T+"+","g"),L=new RegExp("^"+T+"+|((?:^|[^\\\\])(?:\\\\.)*)"+T+"+$","g"),_=new RegExp("^"+T+"*,"+T+"*"),$=new RegExp("^"+T+"*([>+~]|"+T+")"+T+"*"),J=new RegExp(T+"|>"),Y=new RegExp(I),Z=new RegExp("^"+R+"$"),j={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+I),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+T+"*(even|odd|(([+-]|)(\\d*)n|)"+T+"*(?:([+-]|)"+T+"*(\\d+)|))"+T+"*\\)|)","i"),bool:new RegExp("^(?:"+b+")$","i"),needsContext:new RegExp("^"+T+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+T+"*((?:-\\d)?\\d*)"+T+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,tt=/^h\d$/i,k=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,M=/[+~]/,U=new RegExp("\\\\[\\da-fA-F]{1,6}"+T+"?|\\\\([^\\r\\n\\f])","g"),it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,rt=addCombinator(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{O.apply(v=z.call(d.childNodes),d.childNodes),v[d.childNodes.length].nodeType}catch(t){O={apply:v.length?function(t,e){G.apply(t,z.call(e))}:function(t,e){for(var i=t.length,r=0;t[i++]=e[r++];);t.length=i-1}}}function Sizzle(e,t,i,r){var n,s,a,l,o,c,d=t&&t.ownerDocument,u=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==u&&9!==u&&11!==u)return i;if(!r&&(A(t),t=t||w,x)){if(11!==u&&(l=et.exec(e)))if(n=l[1]){if(9===u){if(!(c=t.getElementById(n)))return i;if(c.id===n)return i.push(c),i}else if(d&&(c=d.getElementById(n))&&p(t,c)&&c.id===n)return i.push(c),i}else{if(l[2])return O.apply(i,t.getElementsByTagName(e)),i;if((n=l[3])&&h.getElementsByClassName&&t.getElementsByClassName)return O.apply(i,t.getElementsByClassName(n)),i}if(h.qsa&&!f[e+" "]&&(!g||!g.test(e))&&(1!==u||"object"!==t.nodeName.toLowerCase())){if(c=e,d=t,1===u&&(J.test(e)||$.test(e))){for((d=M.test(e)&&testContext(t.parentNode)||t)===t&&h.scope||((a=t.getAttribute("id"))?a=a.replace(it,T3):t.setAttribute("id",a=C)),s=(o=m(e)).length;s--;)o[s]=(a?"#"+a:":scope")+" "+toSelector(o[s]);c=o.join(",")}try{return O.apply(i,d.querySelectorAll(c)),i}catch(t){f(e,!0)}finally{a===C&&t.removeAttribute("id")}}}return P(e.replace(L,"$1"),t,i,r)}function createCache(){var i=[];function cache(t,e){return i.push(t+" ")>E.cacheLength&&delete cache[i.shift()],cache[t+" "]=e}return cache}function markFunction(t){return t[C]=!0,t}function assert(t){var e=w.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e)}}function addHandle(t,e){for(var i=t.split("|"),r=i.length;r--;)E.attrHandle[i[r]]=e}function siblingCheck(t,e){var i=e&&t,r=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function createDisabledPseudo(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&rt(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function createPositionalPseudo(a){return markFunction(function(s){return s=+s,markFunction(function(t,e){for(var i,r=a([],t.length,s),n=r.length;n--;)t[i=r[n]]&&(t[i]=!(e[i]=t[i]))})})}function testContext(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in h=Sizzle.support={},e=Sizzle.isXML=function(t){var e=t&&t.namespaceURI,t=t&&(t.ownerDocument||t).documentElement;return!Q.test(e||t&&t.nodeName||"HTML")},A=Sizzle.setDocument=function(t){var t=t?t.ownerDocument||t:d;return t!=w&&9===t.nodeType&&t.documentElement&&(r=(w=t).documentElement,x=!e(w),d!=w&&(t=w.defaultView)&&t.top!==t&&(t.addEventListener?t.addEventListener("unload",U3,!1):t.attachEvent&&t.attachEvent("onunload",U3)),h.scope=assert(function(t){return r.appendChild(t).appendChild(w.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),h.attributes=assert(function(t){return t.className="i",!t.getAttribute("className")}),h.getElementsByTagName=assert(function(t){return t.appendChild(w.createComment("")),!t.getElementsByTagName("*").length}),h.getElementsByClassName=k.test(w.getElementsByClassName),h.getById=assert(function(t){return r.appendChild(t).id=C,!w.getElementsByName||!w.getElementsByName(C).length}),h.getById?(E.filter.ID=function(t){var e=t.replace(U,R3);return function(t){return t.getAttribute("id")===e}},E.find.ID=function(t,e){if(void 0!==e.getElementById&&x)return(e=e.getElementById(t))?[e]:[]}):(E.filter.ID=function(t){var e=t.replace(U,R3);return function(t){t=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return t&&t.value===e}},E.find.ID=function(t,e){if(void 0!==e.getElementById&&x){var i,r,n,s=e.getElementById(t);if(s){if((i=s.getAttributeNode("id"))&&i.value===t)return[s];for(n=e.getElementsByName(t),r=0;s=n[r++];)if((i=s.getAttributeNode("id"))&&i.value===t)return[s]}return[]}}),E.find.TAG=h.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):h.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,r=[],n=0,s=e.getElementsByTagName(t);if("*"!==t)return s;for(;i=s[n++];)1===i.nodeType&&r.push(i);return r},E.find.CLASS=h.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&x)return e.getElementsByClassName(t)},n=[],g=[],(h.qsa=k.test(w.querySelectorAll))&&(assert(function(t){var e;r.appendChild(t).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+T+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||g.push("\\["+T+"*(?:value|"+b+")"),t.querySelectorAll("[id~="+C+"-]").length||g.push("~="),(e=w.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||g.push("\\["+T+"*name"+T+"*="+T+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||g.push(":checked"),t.querySelectorAll("a#"+C+"+*").length||g.push(".#.+[+~]"),t.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),assert(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=w.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&g.push("name"+T+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),r.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),g.push(",.*:")})),(h.matchesSelector=k.test(a=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&assert(function(t){h.disconnectedMatch=a.call(t,"*"),a.call(t,"[s!='']:x"),n.push("!=",I)}),g=g.length&&new RegExp(g.join("|")),n=n.length&&new RegExp(n.join("|")),t=k.test(r.compareDocumentPosition),p=t||k.test(r.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,e=e&&e.parentNode;return t===e||!(!e||1!==e.nodeType||!(i.contains?i.contains(e):t.compareDocumentPosition&&16&t.compareDocumentPosition(e)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},l=t?function(t,e){var i;return t===e?(c=!0,0):(i=!t.compareDocumentPosition-!e.compareDocumentPosition)||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!h.sortDetached&&e.compareDocumentPosition(t)===i?t==w||t.ownerDocument==d&&p(d,t)?-1:e==w||e.ownerDocument==d&&p(d,e)?1:o?y(o,t)-y(o,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var i,r=0,n=t.parentNode,s=e.parentNode,a=[t],l=[e];if(!n||!s)return t==w?-1:e==w?1:n?-1:s?1:o?y(o,t)-y(o,e):0;if(n===s)return siblingCheck(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)l.unshift(i);for(;a[r]===l[r];)r++;return r?siblingCheck(a[r],l[r]):a[r]==d?-1:l[r]==d?1:0}),w},Sizzle.matches=function(t,e){return Sizzle(t,null,null,e)},Sizzle.matchesSelector=function(t,e){if(A(t),h.matchesSelector&&x&&!f[e+" "]&&(!n||!n.test(e))&&(!g||!g.test(e)))try{var i=a.call(t,e);if(i||h.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){f(e,!0)}return 0<Sizzle(e,w,null,[t]).length},Sizzle.contains=function(t,e){return(t.ownerDocument||t)!=w&&A(t),p(t,e)},Sizzle.attr=function(t,e){(t.ownerDocument||t)!=w&&A(t);var i=E.attrHandle[e.toLowerCase()],i=i&&K.call(E.attrHandle,e.toLowerCase())?i(t,e,!x):void 0;return void 0!==i?i:h.attributes||!x?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},Sizzle.escape=function(t){return(t+"").replace(it,T3)},Sizzle.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},Sizzle.uniqueSort=function(t){var e,i=[],r=0,n=0;if(c=!h.detectDuplicates,o=!h.sortStable&&t.slice(0),t.sort(l),c){for(;e=t[n++];)e===t[n]&&(r=i.push(n));for(;r--;)t.splice(i[r],1)}return o=null,t},s=Sizzle.getText=function(t){var e,i="",r=0,n=t.nodeType;if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===n||4===n)return t.nodeValue}else for(;e=t[r++];)i+=s(e);return i},(E=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:j,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(U,R3),t[3]=(t[3]||t[4]||t[5]||"").replace(U,R3),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Sizzle.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Sizzle.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return j.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&Y.test(i)&&(e=(e=m(i,!0))&&i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(U,R3).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=F[t+" "];return e||(e=new RegExp("(^|"+T+")"+t+"("+T+"|$)"))&&F(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(e,i,r){return function(t){t=Sizzle.attr(t,e);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(W," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(g,t,e,p,f){var v="nth"!==g.slice(0,3),y="last"!==g.slice(-4),b="of-type"===t;return 1===p&&0===f?function(t){return!!t.parentNode}:function(t,e,i){var r,n,s,a,l,o,c=v!=y?"nextSibling":"previousSibling",d=t.parentNode,u=b&&t.nodeName.toLowerCase(),h=!i&&!b,m=!1;if(d){if(v){for(;c;){for(a=t;a=a[c];)if(b?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;o=c="only"===g&&!o&&"nextSibling"}return!0}if(o=[y?d.firstChild:d.lastChild],y&&h){for(m=(l=(r=(n=(s=(a=d)[C]||(a[C]={}))[a.uniqueID]||(s[a.uniqueID]={}))[g]||[])[0]===N&&r[1])&&r[2],a=l&&d.childNodes[l];a=++l&&a&&a[c]||(m=l=0,o.pop());)if(1===a.nodeType&&++m&&a===t){n[g]=[N,l,m];break}}else if(!1===(m=h?l=(r=(n=(s=(a=t)[C]||(a[C]={}))[a.uniqueID]||(s[a.uniqueID]={}))[g]||[])[0]===N&&r[1]:m))for(;(a=++l&&a&&a[c]||(m=l=0,o.pop()))&&((b?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++m||(h&&((n=(s=a[C]||(a[C]={}))[a.uniqueID]||(s[a.uniqueID]={}))[g]=[N,m]),a!==t)););return(m-=f)===p||m%p==0&&0<=m/p}}},PSEUDO:function(t,s){var e,a=E.pseudos[t]||E.setFilters[t.toLowerCase()]||Sizzle.error("unsupported pseudo: "+t);return a[C]?a(s):1<a.length?(e=[t,t,"",s],Object.hasOwnProperty.call(E.setFilters,t.toLowerCase())?markFunction(function(t,e){for(var i,r=a(t,s),n=r.length;n--;)t[i=y(t,r[n])]=!(e[i]=r[n])}):function(t){return a(t,0,e)}):a}},pseudos:{not:markFunction(function(t){var r=[],n=[],l=u(t.replace(L,"$1"));return l[C]?markFunction(function(t,e,i,r){for(var n,s=l(t,null,r,[]),a=t.length;a--;)(n=s[a])&&(t[a]=!(e[a]=n))}):function(t,e,i){return r[0]=t,l(r,null,i,n),r[0]=null,!n.pop()}}),has:markFunction(function(e){return function(t){return 0<Sizzle(e,t).length}}),contains:markFunction(function(e){return e=e.replace(U,R3),function(t){return-1<(t.textContent||s(t)).indexOf(e)}}),lang:markFunction(function(i){return Z.test(i||"")||Sizzle.error("unsupported lang: "+i),i=i.replace(U,R3).toLowerCase(),function(t){var e;do{if(e=x?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===i||0===e.indexOf(i+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===r},focus:function(t){return t===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:createDisabledPseudo(!1),disabled:createDisabledPseudo(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!E.pseudos.empty(t)},header:function(t){return tt.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(t=t.getAttribute("type"))||"text"===t.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(t,e){return[e-1]}),eq:createPositionalPseudo(function(t,e,i){return[i<0?i+e:i]}),even:createPositionalPseudo(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:createPositionalPseudo(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:createPositionalPseudo(function(t,e,i){for(var r=i<0?i+e:e<i?e:i;0<=--r;)t.push(r);return t}),gt:createPositionalPseudo(function(t,e,i){for(var r=i<0?i+e:i;++r<e;)t.push(r);return t})}}).pseudos.nth=E.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})E.pseudos[t]=function createInputPseudo(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(t);for(t in{submit:!0,reset:!0})E.pseudos[t]=function createButtonPseudo(i){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===i}}(t);function setFilters(){}function toSelector(t){for(var e=0,i=t.length,r="";e<i;e++)r+=t[e].value;return r}function addCombinator(a,t,e){var l=t.dir,o=t.next,c=o||l,d=e&&"parentNode"===c,u=D++;return t.first?function(t,e,i){for(;t=t[l];)if(1===t.nodeType||d)return a(t,e,i);return!1}:function(t,e,i){var r,n,s=[N,u];if(i){for(;t=t[l];)if((1===t.nodeType||d)&&a(t,e,i))return!0}else for(;t=t[l];)if(1===t.nodeType||d)if(n=(n=t[C]||(t[C]={}))[t.uniqueID]||(n[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[l]||t;else{if((r=n[c])&&r[0]===N&&r[1]===u)return s[2]=r[2];if((n[c]=s)[2]=a(t,e,i))return!0}return!1}}function elementMatcher(n){return 1<n.length?function(t,e,i){for(var r=n.length;r--;)if(!n[r](t,e,i))return!1;return!0}:n[0]}function condense(t,e,i,r,n){for(var s,a=[],l=0,o=t.length,c=null!=e;l<o;l++)!(s=t[l])||i&&!i(s,r,n)||(a.push(s),c&&e.push(l));return a}function setMatcher(m,g,p,f,v,t){return f&&!f[C]&&(f=setMatcher(f)),v&&!v[C]&&(v=setMatcher(v,t)),markFunction(function(t,e,i,r){var n,s,a,l=[],o=[],c=e.length,d=t||function multipleContexts(t,e,i){for(var r=0,n=e.length;r<n;r++)Sizzle(t,e[r],i);return i}(g||"*",i.nodeType?[i]:i,[]),u=!m||!t&&g?d:condense(d,l,m,i,r),h=p?v||(t?m:c||f)?[]:e:u;if(p&&p(u,h,i,r),f)for(n=condense(h,o),f(n,[],i,r),s=n.length;s--;)(a=n[s])&&(h[o[s]]=!(u[o[s]]=a));if(t){if(v||m){if(v){for(n=[],s=h.length;s--;)(a=h[s])&&n.push(u[s]=a);v(null,h=[],n,r)}for(s=h.length;s--;)(a=h[s])&&-1<(n=v?y(t,a):l[s])&&(t[n]=!(e[n]=a))}}else h=condense(h===e?h.splice(c,h.length):h),v?v(null,e,h,r):O.apply(e,h)})}function matcherFromGroupMatchers(f,v){function oh(t,e,i,r,n){var s,a,l,o=0,c="0",d=t&&[],u=[],h=S,m=t||b&&E.find.TAG("*",n),g=N+=null==h?1:Math.random()||.1,p=m.length;for(n&&(S=e==w||e||n);c!==p&&null!=(s=m[c]);c++){if(b&&s){for(a=0,e||s.ownerDocument==w||(A(s),i=!x);l=f[a++];)if(l(s,e||w,i)){r.push(s);break}n&&(N=g)}y&&((s=!l&&s)&&o--,t)&&d.push(s)}if(o+=c,y&&c!==o){for(a=0;l=v[a++];)l(d,u,e,i);if(t){if(0<o)for(;c--;)d[c]||u[c]||(u[c]=V.call(r));u=condense(u)}O.apply(r,u),n&&!t&&0<u.length&&1<o+v.length&&Sizzle.uniqueSort(r)}return n&&(N=g,S=h),d}var y=0<v.length,b=0<f.length;return y?markFunction(oh):oh}return setFilters.prototype=E.filters=E.pseudos,E.setFilters=new setFilters,m=Sizzle.tokenize=function(t,e){var i,r,n,s,a,l,o,c=B[t+" "];if(c)return e?0:c.slice(0);for(a=t,l=[],o=E.preFilter;a;){for(s in i&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(n=[])),i=!1,(r=$.exec(a))&&(i=r.shift(),n.push({value:i,type:r[0].replace(L," ")}),a=a.slice(i.length)),E.filter)!(r=j[s].exec(a))||o[s]&&!(r=o[s](r))||(i=r.shift(),n.push({value:i,type:s,matches:r}),a=a.slice(i.length));if(!i)break}return e?a.length:a?Sizzle.error(t):B(t,l).slice(0)},u=Sizzle.compile=function(t,e){var i,r=[],n=[],s=H[t+" "];if(!s){for(i=(e=e||m(t)).length;i--;)((s=function matcherFromTokens(t){for(var r,e,i,n=t.length,s=E.relative[t[0].type],a=s||E.relative[" "],l=s?1:0,o=addCombinator(function(t){return t===r},a,!0),c=addCombinator(function(t){return-1<y(r,t)},a,!0),d=[function(t,e,i){return t=!s&&(i||e!==S)||((r=e).nodeType?o:c)(t,e,i),r=null,t}];l<n;l++)if(e=E.relative[t[l].type])d=[addCombinator(elementMatcher(d),e)];else{if((e=E.filter[t[l].type].apply(null,t[l].matches))[C]){for(i=++l;i<n&&!E.relative[t[i].type];i++);return setMatcher(1<l&&elementMatcher(d),1<l&&toSelector(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(L,"$1"),e,l<i&&matcherFromTokens(t.slice(l,i)),i<n&&matcherFromTokens(t=t.slice(i)),i<n&&toSelector(t))}d.push(e)}return elementMatcher(d)}(e[i]))[C]?r:n).push(s);(s=H(t,matcherFromGroupMatchers(n,r))).selector=t}return s},P=Sizzle.select=function(t,e,i,r){var n,s,a,l,o,c="function"==typeof t&&t,d=!r&&m(t=c.selector||t);if(i=i||[],1===d.length){if(2<(s=d[0]=d[0].slice(0)).length&&"ID"===(a=s[0]).type&&9===e.nodeType&&x&&E.relative[s[1].type]){if(!(e=(E.find.ID(a.matches[0].replace(U,R3),e)||[])[0]))return i;c&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(n=j.needsContext.test(t)?0:s.length;n--&&(a=s[n],!E.relative[l=a.type]);)if((o=E.find[l])&&(r=o(a.matches[0].replace(U,R3),M.test(s[0].type)&&testContext(e.parentNode)||e))){if(s.splice(n,1),t=r.length&&toSelector(s))break;return O.apply(i,r),i}}return(c||u(t,d))(r,e,!x,i,!e||M.test(t)&&testContext(e.parentNode)||e),i},h.sortStable=C.split("").sort(l).join("")===C,h.detectDuplicates=!!c,A(),h.sortDetached=assert(function(t){return 1&t.compareDocumentPosition(w.createElement("fieldset"))}),assert(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),h.attributes&&assert(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||addHandle("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),assert(function(t){return null==t.getAttribute("disabled")})||addHandle(b,function(t,e,i){if(!i)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),Sizzle})(window),this.#Sizzle.selectors[":"]=this.#Sizzle.pseudos,this.#Sizzle.selectors.pseudos.hidden=function(t){return!this.#Sizzle.selectors.pseudos.visible(t)},this.#Sizzle.selectors.pseudos.visible=function(t,e,i){return i4t(i[3]).isUndefinedOrNull()?i4t(t).isVisible(""):i4t(t).isVisible(i[3])},this.#Sizzle.selectors.pseudos.overflow=function(t){var e=i4t(t).css("overflow"),i=t.scrollHeight-t.clientHeight;return("auto"===e||"scroll"===e)&&(10<i||10<t.scrollWidth-t.clientWidth)},this.#Sizzle.selectors.pseudos.regex=function(t,e,i){i=i[3].split(",",2)[0];return new RegExp(i,"ig").test(t.textContent)}}},i4t.extend({findAll:function(t){return i4t(document).findAll(t)},find:function(t){return i4t(document).find(t)},findAllIncludingInsuit:function(t){let e=i4t(document.documentElement).findAll(t),i=i4t([]);return i4t.htmlElement.insuitGeneralContainer().isElement()&&(i=i4t.htmlElement.insuitGeneralContainer().findAll(t)),e.merge(i.value)},findIncludingInsuit:function(t){var e=i4t(document.documentElement).find(t);return e.isElement()?e:i4t.htmlElement.insuitGeneralContainer().isElement()?i4t.htmlElement.insuitGeneralContainer().find(t):i4t(null)},isBeforeInDOM:function(t,e){t=t.compareDocumentPosition(e);return!!(t&Node.DOCUMENT_POSITION_FOLLOWING||t&Node.DOCUMENT_POSITION_CONTAINED_BY)}}),i4t.document=class DocumentWrapper extends i4t.getNativeClass("Document",i4t.element){querySelector(t){return document.querySelector(t)}},i4t.htmlElement=class HtmlElementWrapper extends i4t.getNativeClass("HTMLElement",i4t.element){static get insuitShadow(){var t=i4t.find("#"+i4t.config.get("shadowContainer"));return t.isElement()?t.value.shadowRoot:null}static insuitGeneralContainer(){var t=i4t.find("#"+i4t.config.get("shadowContainer"));return!t.isElement()||i4t(t.val().shadowRoot).isUndefinedOrNull()?i4t(null):i4t(t.val().shadowRoot.getElementById(i4t.config.get("generalContainer")))}static get insuitTab(){var t=i4t.find("#"+i4t.config.get("shadowContainer"));return!t.isElement()||i4t(t.val().shadowRoot).isUndefinedOrNull()?i4t(null):i4t(t.value.shadowRoot.getElementById("x-insuit-tab"))}},i4t.svgElement=class SvgElementWrapper extends i4t.getNativeClass("SVGElement",i4t.element){offset(){var t,e,i={},r=this.val();return this.isInDOM()?(e=this.getBox(r),t=this.getBodyBox(),i.y=i.top=Math.round(e.top-t.top),i.x=i.left=Math.round(e.left-t.left),i.width=Math.ceil(r.getBoundingClientRect().width),i.height=Math.ceil(r.getBoundingClientRect().height),i.bottom=i.top+i.height,i.right=i.left+i.width,i):{top:-1,left:-1,width:0,height:0}}isVisible(){return!0}addClass(t){return this.hasClass(t)||this.val().setAttribute("class",(0<this.val().className.baseVal.length?this.val().className.baseVal+" ":"")+t),this}hasClass(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.val().className.baseVal)}removeClass(t){return this.hasClass(t)&&(this.val().setAttribute("class",this.val().className.baseVal.replace(new RegExp("(\\s|^)"+t+"(\\s|$)")," ")),this.val().setAttribute("class",i4t(this.val().className.baseVal).trim().val())),this}static insuitGeneralContainer(){var t=i4t.find("#"+i4t.config.get("shadowContainer"));return!t.isElement()||i4t(t.val().shadowRoot).isUndefinedOrNull()?i4t(null):i4t(t.val().shadowRoot.getElementById(i4t.config.get("generalContainer")))}isFocusable(){return!0}},i4t.function=class FunctionWrapper extends i4t.constructor{static cancelableDelayedFunctions=i4t([]);static interval=i4t.getNativeCode("setInterval");static timeout=i4t.getNativeCode("setTimeout");static clearInterval=i4t.getNativeCode("clearInterval");static clearTimeout=i4t.getNativeCode("clearTimeout");static#argsRegex=/([^(]*)\((.*)\)/;static#fnRegex=/^function[^{]+/i;argumentNames(){var t=this.val().toString().match(/^[\s(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return 1!=t.length||t[0]?t:[]}bind(e,...i){var r=this.value;return i4t(e).isUndefined()?r:(...t)=>{t=i4t(t).concat(i);return r.apply(e,t.value)}}delay(t,...e){var i=this.value;let r=i4t.function.timeout.call(window,function(){return i4t.function.cancelableDelayedFunctions.removeItem(r),i.apply(i,e)},1e3*t);return r}defer(t={},...e){e=i4t([1e-5]).concat(e),e=this.delay.apply(this,e.value);return t.cancelable&&i4t.function.cancelableDelayedFunctions.push(e),e}interval(t,...e){t=i4t([this.value,t]).concat(e);return i4t.function.interval.apply(window,t.value)}setIntervalUntilTimeout(t,e){let i=i4t.function.interval.call(window,this.value,t);return i4t.function.timeout.call(window,()=>{i4t.function.clearInterval.call(window,i)},e),i}static empty(){}static cancelDelayedFunctions(){this.cancelableDelayedFunctions.forEach(t=>{i4t.function.clearTimeout.call(window,t)})}static bindFromEval(t,e,...i){try{return(t=new Function("i",t.replace(this.#fnRegex,""))).bind(e,...i)}catch(t){return i4t.function.empty}}static bindFromNamespace(e,t){let i;if(!i4t(e).startsWith("i4t."+i4t.config.get("project.code")))return i4t.function.empty;this.#argsRegex.test(e)&&(e=(r=this.#argsRegex.exec(e))[1],i=this.#extractArgumentsFromString(r[2]));var r=i4t(e).split(".").filter(t=>!["bind","call","apply"].includes(t)).reduce((t,e)=>t?.[e],window);if(!i4t(r).isFunction())return i4t.function.empty;try{return!i4t(i).isArray()||i4t(i).isEmpty()?r.bind(t):(i=i.filter(t=>"this"!==t).map(t=>t.replace(/["'`]/g,"").trim()),r.bind(t,...i))}catch(t){return i4t.logger.error(`Error al llamar a la función del modelo: ${e}: `+t),i4t.function.empty}}static#extractArgumentsFromString(t){for(var e,i=/(['"])((?:\\.|(?!\1).)*)\1/g,r=[];null!==(e=i.exec(t));)r.push(e[2].replace(/\\/g,""));return r}async asyncWithTimeout(e){return Promise.race([new Promise(t=>setTimeout(t,e)),new Promise(t=>this.value(t))])}},i4t.string=class StringWrapper extends i4t.getNativeClass("String"){static JSON=i4t.getNativeCode("window.JSON");static entities={quot:34,amp:38,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:140,oelig:156,Scaron:138,scaron:154,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,"Rho ":929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:128,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int_:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,grave:96};toJSON(){return i4t.string.JSON.parse(this.trim().val())}trim(){return this.val(this.val().replace(/\s\s+/gm," ").replace(/^\s+/g,"").replace(/\s+$/g,"")),this}contains(t,e,i){return String.prototype.includes?String.prototype.includes.call(i?this.val().toUpperCase():this.val(),i?t.toUpperCase():t,e):!((e="number"!=typeof e?0:e)+t.length>this.length)&&(i?-1!==this.val().toUpperCase().indexOf(t.toUpperCase(),e):-1!==this.val().indexOf(t,e))}clone(){return i4t(this.val().toString())}startsWith(t){return this.val().slice(0,t.length)===t}endsWith(t){return this.val().slice(this.val().length-t.length)===t}HtmlDecode(){for(var t,e,i=this.val(),r="",n="",s="",a=0;a<i.length;a++)n=i.charAt(a),s=0<(e=a+1<i.length&&"&"===n?i.indexOf(";",a+1):-1)?i.substring(a,e+1):"",/&#0x|X\d+;/.test(s)&&(s=s.substring(2,s.length-1),n=String.fromCharCode(parseInt(s,16))),/&#\d+;/.test(s)&&(s=s.substring(2,s.length-1),n=String.fromCharCode(parseInt(s,10))),/&\w+;/.test(s)&&(t=s=s.replace(/&(\w+)[;]/g,"$1"),n=(s=i4t(i4t.string.entities[s])).isUndefinedOrNull()?t:String.fromCharCode(s.val())),a=0<e?e:a,r+=n;return this.val(r),this}makeType(){var e=this.val().toString();if(!isNaN(e)&&e.match(/^-?[0-9]+(\.[0-9]*)?/))return Number(e);switch(e.toLowerCase()){case"true":return!0;case"false":return!1;case"null":return null;case"undefined":return;default:try{return this.toJSON()}catch(t){return e}}}truncated(t){return i4t(t).isNumber()&&this.val().length>t?this.val().substr(0,t-1)+String.fromCharCode(i4t.string.entities.hellip):this.val()}isNumeric(){return!isNaN(this.val())&&!isNaN(parseFloat(this.val()))}withoutLineJumps(){return this.value.replace(/(\r\n|\n|\r)/gm,"")}toFunction(t,...e){var i=i4t.function.bindFromNamespace(this.value,t,...e);return i!=i4t.function.empty?i:i4t.function.bindFromEval(this.value,t,...e)}parseRegex(){var t=/^\(\?(.)\)(.*)$/;let e=this.value,i="";t.test(e)&&(e=t.exec(e),i=e[1],e=e[2]);try{e=new RegExp(e,i)}catch(t){return i4t.logger.warning("No se ha podido parsear la expresión regular "+this.value),null}return e}},i4t.event=class Event extends i4t.getNativeClass("EventTarget"){static#validUserGestures=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];static#checkCode(t){return 0===t.indexOf("on")?t.substring(2):t}static#checkElement(t){return i4t(t).isElement()?t:window}static addListener(t,e,i,r=!1){return i4t(t).isNullOrEmptyString()||!i4t(e).isFunction()?null:this.prototype.addEventListener.call(i4t(this.#checkElement(i)),this.#checkCode(t),e,r)}static removeListener(t,e,i,r=!1){return i4t(t).isNullOrEmptyString()||!i4t(e).isFunction()?null:this.prototype.removeEventListener.call(i4t(this.#checkElement(i)),this.#checkCode(t),e,r)}static dispatch(e,t,i){let r=this.#checkCode(e),n,s={};switch(i4t.extend(s,i),i4t(s.cancelable).isBoolean()||(s.cancelable=!0),i4t(s.bubbles).isBoolean()||(s.bubbles=!0),this.#checkElement(t).getRootNode&&this.#checkElement(t).getRootNode()instanceof ShadowRoot&&(s.inShadowRoot=!0),r){case"animationend":case"animationiteration":case"animationstart":n=i4t.getNativeCode("window.AnimationEvent");break;case"copy":case"cut":case"paste":n=i4t.getNativeCode("window.ClipboardEvent");break;case"compositionstart":case"compositionupdate":case"compositionend":n=i4t.getNativeCode("window.CompositionEvent");break;case"drag":case"dragend":case"dragenter":case"dragleave":case"dragover":case"dragstart":case"drop":n=i4t.getNativeCode("window.DragEvent");break;case"blur":case"DOMFocusIn":case"DOMFocusOut":case"focus":case"focusin":case"focusout":n=i4t.getNativeCode("window.FocusEvent");break;case"keydown":case"keypress":case"keyup":n=i4t.getNativeCode("function KeyboardEvent");break;case"message":case"messageerror":n=i4t.getNativeCode("window.MessageEvent");break;case"click":case"dblclick":case"mousedown":case"mouseenter":case"mouseleave":case"mousemove":case"mouseout":case"mouseover":case"mouseup":case"contextmenu":case"show":n=i4t.getNativeCode("window.MouseEvent");break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointerenter":case"pointerleave":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=i4t.getNativeCode("window.PointerEvent");break;case"resize":case"scroll":case"abort":case"error":case"select":case"load":case"unload":n=i4t.getNativeCode("window.UIEvent");break;case"touchstart":case"touchend":case"touchmove":case"touchenter":case"touchleave":case"touchcancel":n=i4t.getNativeCode("window.TouchEvent");break;case"wheel":n=i4t.getNativeCode("window.WheelEvent");break;case"input":n=i4t.getNativeCode("window.InputEvent");break;default:n=i4t.getNativeCode("window.Event")}try{return(n=new n(r,s)).insuitEvent=!0,i4t.extend(n,s),this.prototype.dispatchEvent.call(i4t(this.#checkElement(t)),n)}catch(t){i4t.logger.warning("No se puede disparar el evento con código: "+e,t)}return!1}static addObserver(n,s,a,l){if(i4t(s).isFunction()){let i,t=i4t.getNativeCode("window.MutationObserver")||i4t.getNativeCode("window.WebKitMutationObserver"),e={attributes:!0,childList:!0,characterData:!0,subtree:!0},r=i4t(a).isFunction()?a:function(){};return i4t(t).isUndefinedOrNull()?null:(i=new t(function(t){var e={element:n};t.forEach(function(t){s.call(e,t,i)}),r.call(e,i)}),i4t(l).isUndefinedOrNull()||i4t.extend(e,l),i.observe(this.#checkElement(n),e),i)}}static addUserGestureListener(e,i){this.#validUserGestures.forEach(t=>{this.addListener(t,e,i)})}static removeUserGestureListener(e,i){this.#validUserGestures.forEach(t=>{this.removeListener(t,e,i)})}static insuit={dispatch:()=>{}}},i4t.logger=class Logger extends i4t.base{static#DEBUG=0;static#TRACE=1;static#INFO=2;static#WARNING=3;static#ERROR=4;static#OFF=5;static#stack=[];static#timeStack=new Map;static#WCAGStack=[];static#level=this.#ERROR;static#isActive=!1;static#getStackTrace(t){return i4t(t).isUndefinedOrNull()||(t=!i4t(t).isUndefinedOrNull()&&(t.stack||t.stacktrace)||"",i4t(t).isNullOrEmptyString())?[]:i4t.userAgent.isMobile?t.split("@"):t.split("\n")}static#getShowMessage(t){var e=t.msg;return i4t(t.stack).each(function(){e=e+"\n\t"+this.val()}),e}static#log(t,e){if(this.#stack.push(t),!i4t(window.console).isUndefinedOrNull()&&this.#isActive){var i=this.#getShowMessage(t);switch(e){case"error":if(i4t(window.console.error).isFunction())return void window.console.error(i);break;case"warn":case"warning":if(i4t(window.console.warn).isFunction())return void window.console.warn(i);break;case"info":if(i4t(window.console.info).isFunction())return void window.console.info(i)}i4t(window.console.log).isFunction()&&window.console.log(i)}}static#set(t,e,i){var r=i4t(e).isUndefinedOrNull()?"":" { "+e.toString()+"}",n=t;i4t(n).isFunction()&&(n=t()),this.#log({msg:i.toUpperCase()+" ["+(new Date).toLocaleString()+"] "+n+r,stack:this.#getStackTrace(e)},i.toLowerCase())}static#setLevel(t){switch(t){case"OFF":this.#level=this.#OFF;break;case"ERROR":this.#level=this.#ERROR;break;case"WARNING":this.#level=this.#WARNING;break;case"INFO":this.#level=this.#INFO;break;case"TRACE":this.#level=this.#TRACE;break;case"DEBUG":this.#level=this.#DEBUG;break;default:this.#level=this.#ERROR}}static#registeredTime(t,e,i){var r,t=this.#timeStack.get(t);i4t(t).isUndefinedOrNull()||(t.lastTime=Date.now(),i={time:(t.lastTime-i)/1e3,called:1},r=t.stack.get(e),i4t(r).isUndefinedOrNull()?t.stack.set(e,i):(r.time+=i.time,r.called++))}static#printTable(i,t){var r=[];t.stack.forEach(function(t,e){t.method=e,t.code=i,r.push(t)}),console.table(r)}static error(t,e){this.#level<=this.#ERROR&&this.#set(t,e,"ERROR")}static warning(t,e){this.#level<=this.#WARNING&&this.#set(t,e,"WARNING")}static info(t,e){this.#level<=this.#INFO&&this.#set(t,e,"INFO")}static trace(t,e){this.#level<=this.#TRACE&&this.#set(t,e,"TRACE")}static debug(t,e){this.#level<=this.#DEBUG&&this.#set(t,e,"DEBUG")}static get(){var t=this,e="";return i4t(this.#stack).each(function(){e+=t.#getShowMessage(this.val())+"\n"}),e}static startTime(t,e=null){if(i4t(t).isNullOrEmptyString())return"Se necesita un código de timer";var i=this.#timeStack.get(t);i4t(i).isUndefinedOrNull()&&this.#timeStack.set(t,i={}),i4t(i.stack).isUndefinedOrNull()&&(i.stack=new Map),i4t(i.lastTime).isUndefinedOrNull()?(i.lastTime=Date.now(),i.initTime=Date.now()):this.time(t,e)}static endTime(t,e=null){if(i4t(t).isNullOrEmptyString())return"Se necesita un código de timer";var i=this.#timeStack.get(t);i4t(i).isUndefinedOrNull()||(this.#registeredTime(t,e,i.initTime),i.lastTime=null,i.initTime=null)}static showTimeTable(t){var e;i4t(t).isNullOrEmptyString()?this.#timeStack.forEach((t,e)=>{this.#printTable(e,t)}):(e=this.#timeStack.get(t),i4t(e).isUndefinedOrNull()||this.#printTable(t,e))}static time(t,e=null){var i;return i4t(t).isNullOrEmptyString()?"Se necesita un código de timer":(i=this.#timeStack.get(t),i4t(i).isUndefinedOrNull()?void 0:i4t(i.lastTime).isUndefinedOrNull()?"Se necesita arrancar el timer con startTime([code])":void this.#registeredTime(t,e||"anonymous",i.lastTime))}static config(t){i4t(t.active).isBoolean()&&(this.#isActive=t.active),i4t(t.level).isString()&&this.#setLevel(t.level)}static isDebugEnabled(){return this.#level<=this.#DEBUG}static isTraceEnabled(){return this.#level<=this.#TRACE}static isInfoEnabled(){return this.#level<=this.#INFO}static isWarningEnabled(){return this.#level<=this.#WARNING}static isErrorEnabled(){return this.#level<=this.#ERROR}},i4t.css=class Css extends i4t.base{static#rotationRegex=/matrix\(\s*[-0-9.e]+,\s*[-0-9.e]+,\s*[-0-9.e]+,\s*[-0-9.e]+,\s*0,\s*0\)/;static getAllPageCSSRules(){return[...document.styleSheets].map(t=>{try{return[...t.cssRules]}catch(t){return null}}).flat(1/0).filter(t=>!!t?.selectorText)}static hasRotation(t){return!!this.#rotationRegex.test(i4t(t).css("transform"))||!(!t.parentElement||t.parentElement===document.documentElement)&&this.hasRotation(t.parentElement)}static getRotationAngle(i){let r=0;if(this.#rotationRegex.test(i4t(i).css("transform"))){let t=i4t(i).css("transform").split("(")[1],e=(t=(t=t.split(")")[0]).split(","))[1];r=Math.round(Math.asin(e)*(180/Math.PI))}return i.parentElement&&i.parentElement!==document.documentElement?r+this.getRotationAngle(i.parentElement):r}static adjustTextSizeToParentElement(t){var e=this.getFirstDomRect(t),i=i4t(t).offset();i4t(e).isUndefinedOrNull()||i4t(i).isUndefinedOrNull()||(i=i.width-4,i4t(t).style("font-size",""),e.width>i&&(i=i/e.width,i4t(t).style("font-size",Math.floor(parseInt(i4t(t).style("font-size"))*i),!0)))}static getFirstDomRect(t){var e=document.createRange();return e.selectNodeContents(t),t=[...e.getClientRects()],!i4t(t).isArray()||i4t(t).isEmpty()?null:i4t(t).first()}static addMeta(t,e){var i=i4t(document).createElement("meta");return i.name=t,i.content=e,i4t.find("head").append(i)}static addLinkInShadow(t,e){var i=i4t(document).createElement("link");return i.type="text/css",i.rel="stylesheet",i.media="screen, print",i.href=t+(-1<t.indexOf("?")?"&":"?")+"V"+i4t.version,e.appendChild(i),i}static async addLink(i,r,n){return new Promise(t=>{let e=i4t(document).createElement("link");e.onload=()=>t(e),e.type="text/css",e.rel="stylesheet",e.media="screen, print",e.href=i+(-1<i.indexOf("?")?"&":"?")+"V"+i4t.version,i4t(n).isNullOrEmptyString()||e.setAttribute("crossorigin",n),i4t.find("head").append(e),r||i4t(e).addClass("insuit-style")})}static async addInsuitLink(i,r,n){return new Promise(t=>{let e=i4t(document).createElement("link");e.onload=()=>t(e),e.type="text/css",e.rel="stylesheet",e.media="screen, print",e.href=i+(-1<i.indexOf("?")?"&":"?")+"V"+i4t.version,i4t(n).isNullOrEmptyString()||e.setAttribute("crossorigin",n),i4t.htmlElement.insuitGeneralContainer().after(e),r||i4t(e).addClass("insuit-style")})}static addInlineStyle(t,e,i){var r=i4t(document).createElement("style"),n={type:"text/css",rel:"stylesheet",charset:"UTF-8",media:"screen, print"};return i4t(i).isUndefinedOrNull()||i4t.extend(n,i),i4t.extend(r,n),(r=i4t.find("head").append(r)).html(t),e||r.addClass("insuit-style"),r}static addInlineInsuitStyle(t,e,i){var r=i4t(document).createElement("style"),n={type:"text/css",rel:"stylesheet",charset:"UTF-8",media:"screen, print"};return i4t(i).isUndefinedOrNull()||i4t.extend(n,i),i4t.extend(r,n),(r=i4t.htmlElement.insuitGeneralContainer().after(r)).html(t),e||r.addClass("insuit-style"),r}static#pauseOwlCarousels(){i4t.findAll(".owl-carousel").forEach(t=>{i4t(this.#getJQuery()).isFunction()&&i4t(this.#getJQuery()(t).owlCarousel).isFunction()&&((t=this.#getJQuery()(t).owlCarousel()).trigger("stop.owl.autoplay"),t.trigger("stop.owl.video"))})}static#pauseSlickCarousels(){i4t.findAll(".evr-slick").each(function stop(){var t=this.val();i4t(this.#getJQuery()).isFunction()&&i4t(this.#getJQuery()(t).slick).isFunction()&&(t=this.#getJQuery()(t)).slick("slickPause")})}static#pauseJssorCarousels(){i4t(window.$JssorSlider$).isFunction()&&i4t.find("[data-jssor-slider],[jssor-slider=true]").isElement()&&Object.values(window).filter(t=>t instanceof window.$JssorSlider$).forEach(t=>{i4t(t.$AutoPlay).isFunction()&&t.$AutoPlay(0),i4t(t.$Pause).isFunction()&&t.$Pause()})}static#pauseDrupalSlideshowCarousels(){i4t(window.Drupal).isUndefinedOrNull()||window.Drupal.settings&&window.Drupal.viewsSlideshow&&i4t(window.Drupal.viewsSlideshow.action).isFunction()&&i4t(window.Drupal.settings.viewsSlideshow).isObject()&&Object.keys(window.Drupal.settings.viewsSlideshow).forEach(t=>window.Drupal.viewsSlideshow.action({slideshowID:t,action:"pause"}))}static#pauseBootstrapCarousels(){i4t(window.bootstrap).isUndefinedOrNull()||i4t(window.bootstrap.Carousel).isUndefinedOrNull()||i4t.findAll(".carousel.slide").forEach(t=>{i4t().isFunction()&&i4t(this.#getJQuery()(t).carousel).isFunction()&&this.#getJQuery()(t).carousel("pause")})}static#pauseRevolutionSliderCarousels(){i4t.findAll(".revslider-initialised").forEach(t=>{i4t(this.#getJQuery()).isFunction()&&i4t(this.#getJQuery()(t).revpause).isFunction()&&this.#getJQuery()(t).revpause()})}static pauseAllCarousels(){this.#pauseOwlCarousels(),this.#pauseSlickCarousels(),this.#pauseJssorCarousels(),this.#pauseDrupalSlideshowCarousels(),this.#pauseBootstrapCarousels(),this.#pauseRevolutionSliderCarousels()}static#setMultiStyle(t,e,i){(t=i4t(t)).style(e,i).style("-moz-"+e,i).style("-webkit-"+e,i).style("-ms-"+e,i).style("-o-"+e,i)}static#resetMultiStyle(t,e,i){(t=i4t(t)).style(e,i),t.style("-moz-"+e,i),t.style("-webkit-"+e,i),t.style("-ms-"+e,i),t.style("-o-"+e,i)}static setEffects(t,e){var i;t=i4t(t),i4t(e).isObject()&&i4t(e.duration).isNumber()&&(i=i4t(e.properties).isNullOrEmptyString()?"transform, -moz-transform, -webkit-transform, -ms-transform, -o-transform, transform-origin, -moz-transform-origin, -webkit-transform-origin, -ms-transform-origin, -o-transform-origin":e.properties,this.#setMultiStyle(t,"transition-property",i),this.#setMultiStyle(t,"transition-duration",e.duration+"ms"),i4t(e.cubicBeizer).isNullOrEmptyString()||this.#setMultiStyle(t,"transition-timing-function",e.cubicBeizer),i4t(e.delay).isNumber())&&this.#setMultiStyle(t,"transition-delay",e.delay+"ms")}static removeEffects(t){t=i4t(t),this.#setMultiStyle(t,"transition-property",""),this.#setMultiStyle(t,"transition-duration",""),this.#setMultiStyle(t,"transition-timing-function",""),this.#setMultiStyle(t,"transition-delay","")}static setScale(t,e){t=i4t(t);let i,r,n,s,a;i4t(e).isNumber()&&(1<arguments.length?2===arguments.length?s=(i4t(e).isNumber()||(a=e),e):(s=e,a=arguments[2]):s=e,i=(i=new i4t.css.CSSMatrix).scale(e,s),r=parseFloat(t.css("width").replace("px",""))*(e-1)/(2*e),n=parseFloat(t.css("height").replace("px",""))*(s-1)/(2*s),0==r&&0==n||(i=i.translate(r,n)),i4t(a).isObject()&&this.setEffects(t,a),this.#setMultiStyle(t,"transform",i.toString(!0)))}static setTranslate(t,e){var i,r,n=new i4t.css.CSSMatrix;i4t(e).isNumber()&&(1<arguments.length?2===arguments.length?i=i4t(e).isNumber()?e:r=e:(i=e,r=arguments[2]):i=e,n=n.translate(e,i),i4t(r).isObject()&&this.setEffects(r),this.#setMultiStyle(t,"transform",n.toString(!0)))}static setRotate(t,e){var i;i4t(t).isUndefinedOrNull()||(i=new i4t.css.CSSMatrix,i4t(e).isObject()&&this.setEffects(e),this.#setMultiStyle.call(this,"transform",i.rotate(t.toString()).toString(!0)))}static removeTransform(){this.#resetMultiStyle.call(this,"transform","")}static#getJQuery(){let t=window.jQuery;return t=i4t(t).isUndefinedOrNull()?window.$:t}},i4t.css.CSSMatrix=class CSSMatrix extends i4t.base{constructor(){super();var t=[].slice.call(arguments),e=this;if(t.length)for(var i=t.length;i--;)Math.abs(t[i])<CSSMatrix.SMALL_NUMBER&&(t[i]=0);if(e.setIdentity(),16==t.length)e.m11=e.a=t[0],e.m12=e.b=t[1],e.m13=t[2],e.m14=t[3],e.m21=e.c=t[4],e.m22=e.d=t[5],e.m23=t[6],e.m24=t[7],e.m31=t[8],e.m32=t[9],e.m33=t[10],e.m34=t[11],e.m41=e.e=t[12],e.m42=e.f=t[13],e.m43=t[14],e.m44=t[15];else if(6==t.length)this.affine=!0,e.m11=e.a=t[0],e.m12=e.b=t[1],e.m14=e.e=t[4],e.m21=e.c=t[2],e.m22=e.d=t[3],e.m24=e.f=t[5];else if(1===t.length&&"string"==typeof t[0])e.setMatrixValue(t[0]);else if(0<t.length)throw new TypeError("Invalid Matrix Value")}static SMALL_NUMBER=1e-6;static Rotate=function(t,e,i){t*=Math.PI/180,e*=Math.PI/180,i*=Math.PI/180;var r=Math.cos(t),t=-Math.sin(t),n=Math.cos(e),e=-Math.sin(e),s=Math.cos(i),i=-Math.sin(i),a=new CSSMatrix;return a.m11=a.a=n*s,a.m12=a.b=-n*i,a.m13=e,a.m21=a.c=t*e*s+r*i,a.m22=a.d=r*s-t*e*i,a.m23=-t*n,a.m31=t*i-r*e*s,a.m32=t*s+r*e*i,a.m33=r*n,a};static RotateAxisAngle=function(t,e,i,r){r*=Math.PI/360;var n=Math.sin(r),r=Math.cos(r),s=n*n,a=Math.sqrt(t*t+e*e+i*i),a=(0===a?(e=t=0,i=1):(t/=a,e/=a,i/=a),t*t),l=e*e,o=i*i,c=new CSSMatrix;return c.m11=c.a=1-2*(l+o)*s,c.m12=c.b=2*(t*e*s+i*n*r),c.m13=2*(t*i*s-e*n*r),c.m21=c.c=2*(e*t*s-i*n*r),c.m22=c.d=1-2*(o+a)*s,c.m23=2*(e*i*s+t*n*r),c.m31=2*(i*t*s+e*n*r),c.m32=2*(i*e*s-t*n*r),c.m33=1-2*(a+l)*s,c.m14=c.m24=c.m34=0,c.m41=c.e=c.m42=c.f=c.m43=0,c.m44=1,c};static ScaleX=function(t){var e=new CSSMatrix;return e.m11=e.a=t,e};static ScaleY=function(t){var e=new CSSMatrix;return e.m22=e.d=t,e};static ScaleZ=function(t){var e=new CSSMatrix;return e.m33=t,e};static Scale=function(t,e,i){var r=new CSSMatrix;return r.m11=r.a=t,r.m22=r.d=e,r.m33=i,r};static SkewX=function(t){t*=Math.PI/180;var e=new CSSMatrix;return e.m21=e.c=Math.tan(t),e};static SkewY=function(t){t*=Math.PI/180;var e=new CSSMatrix;return e.m12=e.b=Math.tan(t),e};static Translate=function(t,e,i){var r=new CSSMatrix;return r.m41=r.e=t,r.m42=r.f=e,r.m43=i,r};static multiply=function(t,e){var i=e.m11*t.m11+e.m12*t.m21+e.m13*t.m31+e.m14*t.m41,r=e.m11*t.m12+e.m12*t.m22+e.m13*t.m32+e.m14*t.m42,n=e.m11*t.m13+e.m12*t.m23+e.m13*t.m33+e.m14*t.m43,s=e.m11*t.m14+e.m12*t.m24+e.m13*t.m34+e.m14*t.m44,a=e.m21*t.m11+e.m22*t.m21+e.m23*t.m31+e.m24*t.m41,l=e.m21*t.m12+e.m22*t.m22+e.m23*t.m32+e.m24*t.m42,o=e.m21*t.m13+e.m22*t.m23+e.m23*t.m33+e.m24*t.m43,c=e.m21*t.m14+e.m22*t.m24+e.m23*t.m34+e.m24*t.m44,d=e.m31*t.m11+e.m32*t.m21+e.m33*t.m31+e.m34*t.m41,u=e.m31*t.m12+e.m32*t.m22+e.m33*t.m32+e.m34*t.m42,h=e.m31*t.m13+e.m32*t.m23+e.m33*t.m33+e.m34*t.m43,m=e.m31*t.m14+e.m32*t.m24+e.m33*t.m34+e.m34*t.m44,g=e.m41*t.m11+e.m42*t.m21+e.m43*t.m31+e.m44*t.m41,p=e.m41*t.m12+e.m42*t.m22+e.m43*t.m32+e.m44*t.m42,f=e.m41*t.m13+e.m42*t.m23+e.m43*t.m33+e.m44*t.m43,e=e.m41*t.m14+e.m42*t.m24+e.m43*t.m34+e.m44*t.m44;return new CSSMatrix(i,r,n,s,a,l,o,c,d,u,h,m,g,p,f,e)};setMatrixValue(t){t=String(t).trim();var e=this;if(e.setIdentity(),"none"!=t){var i,r,n=t.slice(0,t.indexOf("("));if("matrix3d"==n){for(r=(i=t.slice(9,-1).split(",")).length;r--;)i[r]=parseFloat(i[r]);e.m11=e.a=i[0],e.m12=e.b=i[1],e.m13=i[2],e.m14=i[3],e.m21=e.c=i[4],e.m22=e.d=i[5],e.m23=i[6],e.m24=i[7],e.m31=i[8],e.m32=i[9],e.m33=i[10],e.m34=i[11],e.m41=e.e=i[12],e.m42=e.f=i[13],e.m43=i[14],e.m44=i[15]}else{if("matrix"!=n)throw new TypeError("Invalid Matrix Value");for(e.affine=!0,r=(i=t.slice(7,-1).split(",")).length;r--;)i[r]=parseFloat(i[r]);e.m11=e.a=i[0],e.m12=e.b=i[2],e.m41=e.e=i[4],e.m21=e.c=i[1],e.m22=e.d=i[3],e.m42=e.f=i[5]}}return e}multiply(t){return CSSMatrix.multiply(this,t)}inverse(){throw new Error("the inverse() method is not implemented (yet).")}translate(t,e,i){return null==i&&(i=0),CSSMatrix.multiply(this,CSSMatrix.Translate(t,e,i))}scale(t,e,i){return null==e&&(e=t),null==i&&(i=1),CSSMatrix.multiply(this,CSSMatrix.Scale(t,e,i))}rotate(t,e,i){return null==e&&(e=t),null==i&&(i=t),CSSMatrix.multiply(this,CSSMatrix.Rotate(t,e,i))}rotateAxisAngle(t,e,i,r){return null==e&&(e=t),null==i&&(i=t),CSSMatrix.multiply(this,CSSMatrix.RotateAxisAngle(t,e,i,r))}skewX(t){return CSSMatrix.multiply(this,CSSMatrix.SkewX(t))}skewY(t){return CSSMatrix.multiply(this,CSSMatrix.SkewY(t))}toString(t){var e=this;return this.affine||(this.affine=!!t),this.affine?"matrix("+[e.a,e.b,e.c,e.d,e.e,e.f].join(", ")+")":"matrix3d("+[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44].join(", ")+")"}setIdentity(){var t=this;return t.m11=t.a=1,t.m12=t.b=0,t.m13=0,t.m14=0,t.m21=t.c=0,t.m22=t.d=1,t.m23=0,t.m24=0,t.m31=0,t.m32=0,t.m33=1,t.m34=0,t.m41=t.e=0,t.m42=t.f=0,t.m43=0,t.m44=1,this}transform(t){var e=this,i=e.m11*t.x+e.m12*t.y+e.m13*t.z+e.m14*t.w,r=e.m21*t.x+e.m22*t.y+e.m23*t.z+e.m24*t.w,n=e.m31*t.x+e.m32*t.y+e.m33*t.z+e.m34*t.w,e=e.m41*t.x+e.m42*t.y+e.m43*t.z+e.m44*t.w;return t.x=i/e,t.y=r/e,t.z=n/e,t}toFullString(){var t=this;return[[t.m11,t.m12,t.m13,t.m14].join(", "),[t.m21,t.m22,t.m23,t.m24].join(", "),[t.m31,t.m32,t.m33,t.m34].join(", "),[t.m41,t.m42,t.m43,t.m44].join(", ")].join("\n")}},i4t.color=class Color extends i4t.base{static#isAACompliant(t,e,i){i=i?3.1:4.6,t=this.#getL(t),e=this.#getL(e);return i<(Math.max(t,e)+.05)/(Math.min(t,e)+.05).toFixed(2)}static getAAColors(t,e,i){var r=!1,n=!1,s=i4t(t),a=i4t(e);return s.isString()&&(r=i4t(t).startsWith("#"),t=this.#toRgb(t)),a.isString()&&(n=i4t(e).startsWith("#"),e=this.#toRgb(e)),s=this.#checkAAColors(t,e,i),{font:r?this.#rgbToHex(s.font):this.#toRgbString(s.font),background:n?this.#rgbToHex(s.background):this.#toRgbString(s.background)}}static changeLuminance(t,e){function em(t,e){return t=Math.min(255,Math.max(t+t*e,0)),("00"+(t=Math.round(t).toString(16))).substr(t.length)}t=this.#toRgb(t);return"#"+em(t.r,e=e||0)+em(t.g,e)+em(t.b,e)}static hexToRgbString(t){t=this.#toRgb(t);return this.#toRgbString(t)}static focusIsAACompliant(t,e){t=this.#getL(this.#toRgb(t)),e=this.#getL(this.#toRgb(e));return 3.1<(Math.max(t,e)+.05)/(Math.min(t,e)+.05).toFixed(2)}static#parseIntFromHex(t){return parseInt(t,16)}static#inputHexToRGB(t){t=i4t(t).trim().val();var e=0,i=0,r=0,n=255,s=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})?$/.exec(t),t=/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?$/.exec(t);return s&&(e=this.#parseIntFromHex(s[1]+""+s[1]),i=this.#parseIntFromHex(s[2]+""+s[2]),r=this.#parseIntFromHex(s[3]+""+s[3]),s[4])&&(n=this.#parseIntFromHex(s[4]+""+s[4])),t&&(e=this.#parseIntFromHex(t[1]),i=this.#parseIntFromHex(t[2]),r=this.#parseIntFromHex(t[3]),t[4])&&(n=this.#parseIntFromHex(t[4])),{r:Math.min(255,Math.max(e,0)),g:Math.min(255,Math.max(i,0)),b:Math.min(255,Math.max(r,0)),a:Math.min(255,Math.max(n,0))}}static#inputRgbToRGB(t){t=i4t(t).trim().val();var e=0,i=0,r=0,n=255,t=/^rgba?\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})(?:,\s*(\d{1,3}))?\)$/.exec(t);return t&&(e=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10),t[4])&&(n=parseInt(t[4],10)),{r:Math.min(255,Math.max(e,0)),g:Math.min(255,Math.max(i,0)),b:Math.min(255,Math.max(r,0)),a:Math.min(255,Math.max(n,0))}}static#isDark(t){return this.#getBrightness(t)<128}static#isLight(t){return!this.#isDark(t)}static#getBrightness(t){return(299*t.r+587*t.g+114*t.b)/1e3}static#toRgb(t){t=i4t(t).startsWith("#")?this.#inputHexToRGB(t):this.#inputRgbToRGB(t);return{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b),a:Math.round(t.a)}}static#toRgbString(t){return 255!==t.a?"rgba("+t.r+", "+t.g+", "+t.b+", "+t.a+")":"rgb("+t.r+", "+t.g+", "+t.b+")"}static#rgbToHex(t){var e=(256+t.r).toString(16).toUpperCase().substring(1),i=(256+t.g).toString(16).toUpperCase().substring(1),r=(256+t.b).toString(16).toUpperCase().substring(1),t=(256+t.a).toString(16).toUpperCase().substring(1);return"#"+e+i+r+("FF"===t?"":t)}static#checkAAColors(t,e,i){return this.#isAACompliant(t,e,i)?{font:t,background:e}:(this.#isDark(e)||this.#isLight(t)?(t=this.#upLightness(t),e=this.#downLightness(e)):(e=this.#upLightness(e),t=this.#downLightness(t)),this.#checkAAColors(t,e,i))}static#upLightness(t){return t.r=Math.min(255,t.r+1),t.g=Math.min(255,t.g+1),t.b=Math.min(255,t.b+1),t}static#downLightness(t){return t.r=Math.max(t.r-1,0),t.g=Math.max(t.g-1,0),t.b=Math.max(t.b-1,0),t}static#getsRGB(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}static#getL(t){return.2126*this.#getsRGB(t.r)+.7152*this.#getsRGB(t.g)+.0722*this.#getsRGB(t.b)}},i4t.js=class Js extends i4t.base{static addScript(t,e,i,r,n){var s=i4t(document).createElement("script");return s.type="text/javascript",e&&(s.async=!0),n&&i4t(s).attr("crossorigin",n),s=i4t.find("head").append(s),r&&i4t(r).isFunction()&&(s.addEventListener("load",r),s.addEventListener("error",r)),s.val().src=t+(-1<t.indexOf("?")?"&":"?")+"V"+i4t.version,i||s.addClass("insuit-script"),s}static addInlineScript(t,e){var i=i4t(document).createElement("script");return i.type="text/javascript",(i=i4t.find("head").append(i)).html(t),e||i.addClass("insuit-script"),i}},i4t.js.aids={},i4t.js.navigators={},i4t.js.widgets={},i4t.js.services={},i4t.js.services.WCAG={},i4t.js.overwrited=[],i4t.userAgent=class UserAgent extends i4t.base{static device=(e=>{var i={},r=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];function find(t){return-1!==e.indexOf(t)}function findMatch(t){for(var e=0;e<t.length;e++)if(i[t[e]]())return t[e];return"unknown"}return i.macos=function(){return!i.ios()&&find("mac")},i.ios=function(){return i.iphone()||i.ipod()||i.ipad()},i.iphone=function(){return!i.windows()&&find("iphone")},i.linux=function(){return!i.windows()&&!i.android()&&find("linux")},i.ipod=function(){return find("ipod")},i.ipad=function(){return find("ipad")},i.android=function(){return!i.windows()&&find("android")},i.androidPhone=function(){return i.android()&&find("mobile")},i.androidTablet=function(){return i.android()&&!find("mobile")},i.blackberry=function(){return find("blackberry")||find("bb10")||find("rim")},i.blackberryPhone=function(){return i.blackberry()&&!find("tablet")},i.blackberryTablet=function(){return i.blackberry()&&find("tablet")},i.windows=function(){return find("windows")},i.windowsPhone=function(){return i.windows()&&find("phone")},i.windowsTablet=function(){return i.windows()&&find("touch")&&!i.windowsPhone()},i.fxos=function(){return(find("(mobile")||find("(tablet"))&&find(" rv:")},i.fxosPhone=function(){return i.fxos()&&find("mobile")},i.fxosTablet=function(){return i.fxos()&&find("tablet")},i.mobile=function(){return i.androidPhone()||i.iphone()||i.ipod()||i.windowsPhone()||i.blackberryPhone()||i.fxosPhone()},i.tablet=function(){return i.ipad()||i.androidTablet()||i.blackberryTablet()||i.windowsTablet()||i.fxosTablet()},i.desktop=function(){return!i.tablet()&&!i.mobile()},i.television=function(){for(var t=0;t<r.length;){if(find(r[t]))return!0;t++}return!1},{type:findMatch(["mobile","tablet","desktop"]),model:findMatch(["macos","ios","iphone","ipad","ipod","android","blackberry","windows","linux","fxos","television"])}})(window.navigator.userAgent.toLowerCase());static isIE=-1!==navigator.userAgent.indexOf("MSIE")||-1!==navigator.userAgent.indexOf("Trident");static isEdge=-1!==navigator.userAgent.indexOf("Edge");static isOpera=-1!==navigator.userAgent.indexOf("Opera");static isFirefox=-1!==navigator.userAgent.indexOf("Firefox");static isSafari=-1!==navigator.userAgent.indexOf("AppleWebKit")&&-1!==navigator.userAgent.indexOf("Version");static isWin=-1!==this.device.model.indexOf("windows");static isMac=-1!==this.device.model.indexOf("macos");static isLinux=-1!==this.device.model.indexOf("linux");static isMobile=-1!==this.device.type.indexOf("mobile");static isChrome=-1!==navigator.userAgent.indexOf("Chrome")&&!this.isIE&&!this.isEdge;static navVersion=this.#getNavigatorVersion.call(this);static html5AudioExtension=this.#getHtml5AudioExtension.call(this);static html5VideoExtension=this.#getHtml5VideoExtension.call(this);static isWebRtcActive=!(!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)||!window.AudioContext&&!window.webkitAudioContext);static windowHeight(){var t;return document.body&&document.body.offsetWidth&&(t=document.body.offsetHeight),"CSS1Compat"===document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t=document.documentElement.offsetHeight),t=window.innerWidth&&window.innerHeight?window.innerHeight:t}static windowWidth(){var t;return document.body&&document.body.offsetWidth&&(t=document.body.offsetWidth),"CSS1Compat"===document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(t=document.documentElement.offsetWidth),window.innerWidth&&window.innerHeight&&(t=window.innerWidth),this.#getClientHeight()>this.windowHeight()&&(t-=this.#getScrollBarWidth()),t}static#getScrollBarWidth(){var t,e=0,i=0,r=i4t(i4t(document).createElement("p"));return r.style("width","100%").style("height","200px"),(t=i4t(i4t(document).createElement("div"))).style("position","absolute").style("top","0px").style("left","0px").style("visibility","hidden"),t.style("width","200px").style("height","150px").style("overflow","hidden"),i4t(t).append(r),i4t(document.body).isElement()&&(i4t(document.body).append(t),e=r.val().offsetWidth,t.style("overflow","scroll"),e===(i=r.val().offsetWidth)&&(i=t.val().clientWidth),t.remove()),e-i}static#getClientHeight(){return(i4t(document.body).isUndefinedOrNull()||i4t(document.body.clientHeight).isUndefined()||0===document.body.clientHeight?document.documentElement:document.body).clientHeight}static#getNavigatorVersion(){var t=null;return this.isIE&&(t=/\b(MSIE|rv:|Edge\/?)\b\s?(\d+)(\.\d+)/),this.isFirefox&&(t=/(Firefox)[/\s](\d+)(\.\d+)/),this.isChrome&&(t=/(Chrome)[/\s](\d+)(\.\d+)/),this.isOpera&&(t=/(Version)[/\s](\d+)(\.\d+)/),null!==(t=this.isSafari?/(Version)[/\s](\d+)(\.\d+)/:t)&&t.test(navigator.userAgent)?parseInt(RegExp.$2,10):0}static#getHtml5AudioExtension(){return this.isFirefox||this.isChrome?["ogg","mp3"]:this.isOpera?["ogg"]:["mp3"]}static#getHtml5VideoExtension(){return this.isFirefox?["ogg","ogv","webm"]:this.isChrome?["mp4","webm","ogv","ogg"]:this.isOpera?["ogg","webm"]:["mp4"]}},i4t.config=class Config extends i4t.base{static get setupmaster(){return i4t.config.get("setupmaster")&&["insuit.local","insuit.dev"].includes(i4t.config.get("environment"))}static UI={options:{},async saveOption(t,e){i4t(t).isNullOrEmptyString()||i4t(e).isUndefinedOrNull()||!i4t(i4t.js.AppRunner.configIframeBus).isUndefinedOrNull()&&i4t.js.AppRunner.configIframeBus.isActive()&&(i4t.storage.saveOption(t,e),i4t.js.widgets.InsuitBar.refreshTTSButtonState())},getOption(t){return i4t(t).isNullOrEmptyString()||i4t(i4t.config.UI.options).isUndefinedOrNull()?null:i4t.config.UI.options[t]},setOption:async function(t,e){i4t(t).isNullOrEmptyString()||(i4t(i4t.config.UI.options).isUndefinedOrNull()&&(i4t.config.UI.options={}),i4t.config.UI.options[t]=e,i4t.config.UI.saveOption(t,e))},setAllOption:function(t){i4t(i4t.config.UI.options).isUndefinedOrNull()&&(i4t.config.UI.options={}),i4t.config.UI.options=t},get:function(){return i4t.config.UI},set:function(t){Object.entries(t).forEach(t=>{var e=t[0];i4t.config.UI[e]=t[1]})},getDefault:function(){return i4t.config.#params.aids.EXTAID}};static#params={toprole:"html",environment:"insuit.net",tab:{custom:!1,texts:null,type:"default"},bar:{fontcolor:"#FFFFFF",logo:"",backgroundcolor:"#AF0421"},font:{family:'"InsuitABeeZee", Arial, Helvetica, Verdana, sans-serif'},area:{fontcolor:"",backgroundcolor:""},origin:{domain:window.location.host,protocol:window.location.protocol},suit:{protocol:"https:",path:"/i4tservice/",domain:window.location.host},lang:{bydefault:"es-ES",current:null,system:{"sl-SL":null,"hr-HR":null,"es-ES":!0,"es-US":!0,"en-GB":!0,"x-VA":!0,"ca-ES":!0,"eu-EU":!0,"de-DE":!0,"fr-FR":!0,"it-IT":!0,"pt-PT":!0,"gl-ES":!0,"nl-NL":!0}},log:{active:!1,level:"ERROR"},widgetAnimationDelay:.5,configpage:"config_iframe.html",configKey:"x-insuit-config",cacheKey:"x-insuit-cache",shadowContainer:"x-insuit-shadow-container",generalContainer:"x-insuit-container",barContainer:"x-insuit-bar-container",fixedContainer:"x-insuit-fixed-container",relativeContainer:"x-insuit-relative-container",centeredAidsContainer:"x-insuit-aids-centered",barAidsContainer:"x-insuit-bar-aids",modalContainer:"x-insuit-header-modals",helpContainer:"x-insuit-help-container",pdfViewerContainer:"x-insuit-pdf-viewer-container",popoverContainer:"x-insuit-popover-container",tourContainer:"x-insuit-tour-container",asteriscContainer:"x-insuit-asterisc-container",reader:{container:"x-insuit-reader-container",tagAttr:"data-insuit-reader",backgroundcolor:"#0077BE",fontcolor:"#FFFFFF",fontfamily:'"InsuitABeeZee", Arial, Helvetica, Verdana, sans-serif'},aloud:{codeVolume:"aloudVolume",codeRate:"ttsRate",defaultVolume:3,defaultRate:2,showTextOnLocal:!0,forceShowTextOnBar:!1},clear:{fontId:"x-insuit-clear-font",schemeId:"x-insuit-clear-colorscheme",dyslexicId:"x-insuit-clear-dyslexic",cleanIconId:"x-insuit-button-clean-page",magnifyIconId:"x-insuit-button-magnify",downloadPdfId:"x-insuit-download-pdf",clearSchemes:{default:{background:"rgb(255, 255, 255)",fontColor:"rgb(0, 0, 0)"},blueyellow:{background:"rgb(0, 0, 255)",fontColor:"rgb(255, 255, 0)"},navylime:{background:"rgb(0, 0, 128)",fontColor:"rgb(0, 255, 0)"},maroonwhite:{background:"rgb(128, 0, 0)",fontColor:"rgb(255, 255, 255)"},darken:{background:"rgb(45, 45, 45)",fontColor:"rgb(236, 236, 236)"},blackwhite:{background:"rgb(0, 0, 0)",fontColor:"rgb(255, 255, 255)"}},uppercaseButton:"insuit-button-uppercase"},senior:{schemeId:"x-insuit-senior-colorscheme",linksButton:"insuit-button-link",fontButton:"insuit-button-font"},multimedia:{toggleFullscreenButtonId:"insuit-button-fullscreen",codeFullscreen:"fullscreen"},aids:{KEY:{option:"KEY",icon:"insuit-icon-keys",inAids:["KeyWithCancelInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","LinkOutAid","AreaOutAid","ScrollOutAid","ModalOutAid","AloudOutAid","AsteriscOutAid","VisualFormOutAid","FocusOutAid","VisualPdfInfoOutAid","VisualButtonOutAid","PdfViewerOutAid"],devicessupported:["desktop"],manager:"RoleManager"},SPEECH:{option:"SPEECH",icon:"insuit-icon-voice",inAids:["KeyWithCancelInAid","SpeechInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","LinkOutAid","AreaOutAid","ScrollOutAid","ModalOutAid","VisualFormOutAid","VisualPdfInfoOutAid","AloudOutAid","PdfViewerOutAid","VisualButtonOutAid"],devicessupported:["desktop"],manager:"RoleManager"},SOUND:{option:"SOUND",icon:"insuit-icon-sound",inAids:["KeyWithCancelInAid","SoundInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","LinkOutAid","AreaOutAid","ScrollOutAid","ModalOutAid","VisualKeyOutAid","VisualFormOutAid","VisualPdfInfoOutAid","AloudOutAid","PdfViewerOutAid"],devicessupported:["desktop"],manager:"RoleManager"},BUTTON:{option:"BUTTON",icon:"insuit-icon-button",inAids:["KeyWithCancelInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","LinkOutAid","AreaOutAid","ScrollOutAid","ModalOutAid","VisualKeyOutAid","VisualFormOutAid","FocusOutAid","VisualPdfInfoOutAid","AloudOutAid","PdfViewerOutAid"],devicessupported:["desktop","mobile","tablet"],manager:"RoleManager"},PUSH:{option:"PUSH",icon:"insuit-icon-push",inAids:["PushInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","LinkOutAid","AreaOutAid","ScrollOutAid","ModalOutAid","VisualKeyOutAid","VisualFormOutAid","VisualPdfInfoOutAid","AloudOutAid","PdfViewerOutAid"],devicessupported:["desktop"],manager:"RoleManager"},CLEAR:{option:"CLEAR",icon:"insuit-icon-visual",inAids:["KeyWithSeniorInAid","EventInAid"],outAids:["PopoverOutAid","TourOutAid","HelpOutAid","ModalOutAid","ClearOutAid","MagnifyingGlassOutAid","ReadOnHoverOutAid","AloudOutAid","PdfViewerOutAid"],devicessupported:["desktop","mobile","tablet"],manager:"NavManager"},EXTAID:{option:"EXTAID",icon:"insuit-icon-extaid",inAids:["KeyInAid","EventInAid"],outAids:["HelpOutAid","FocusOutAid"],devicessupported:["desktop","mobile","tablet"],manager:"NavManager"},SENIOR:{option:"SENIOR",icon:"insuit-icon-senior",inAids:["KeyWithSeniorInAid","EventInAid"],outAids:["PopoverOutAid","HelpOutAid","FocusOutAid","SeniorOutAid","ModalOutAid","AloudOutAid","ScrollOutAid","PdfViewerOutAid"],devicessupported:["desktop","mobile","tablet"],manager:"NavManager"}},project:{code:"",description:"",isv8:!1,lastmodified:"",v8:{modelservice:!0},accessibilityManager:!1,version:""},cdn:{base:"",path:"i4tservice/",text:{path:"i18nservice/",file:"texts.js"},css:{path:"css/",insuitfile:"insuit.css",tabfile:"insuit-tab.css",visualfile:"insuit-visual.css",pagefile:"insuit-page.css",readerfile:"insuit-reader.css",pdffile:"insuit-pdf.css"},js:{path:"js/",file:"insuit.js",readerfile:"insuit-reader.js"},jsworkers:{path:"jsworkers/",insuit:"insuit-worker.js"},ia:"ia.insuit.net"},url:{services:"https://insuit.net/i4tservice",projects:"https://insuit.net/i4tproject"},session:{timeout:2592e5},globalObserver:{timers:{threshold:.7,watchdog:3,roleSleep:.5}},timeout:{fn:.2,model:2,validators:2},rules:{passive:{regex:[],active:!1}}};static getValidLanguage(e){var i,r,n;return i4t(e).isNullOrEmptyString()?null:(i=this.#extractShortLang(e),e=this.#remapLanguages(e),i4t(this.#params.lang.system).each(function(t){if(t===e)return n=e,!1;!i4t(i).isNullOrEmptyString()&&i4t(t).startsWith(i)&&(r=t),!i4t(i).isNullOrEmptyString()&&i4t(t).startsWith("x-")&&i4t(t).endsWith(i.toUpperCase())&&(r=t)}),i4t(n).isNullOrEmptyString()?i4t(r).isNullOrEmptyString()?void 0:r:n)}static isValidLanguage(e){if(!i4t(e).isNullOrEmptyString()){var i,r,n=this.#extractShortLang(e);if(e=this.#remapLanguages(e),i4t(this.#params.lang.system).each(function(t){if(t===e)return r=e,!1;!i4t(n).isNullOrEmptyString()&&i4t(t).startsWith(n)&&(i=t),!i4t(n).isNullOrEmptyString()&&i4t(t).startsWith("x-")&&i4t(t).endsWith(n.toUpperCase())&&(i=t)}),!i4t(r).isNullOrEmptyString())return this.#params.lang.current=r,!0;if(!i4t(i).isNullOrEmptyString())return this.#params.lang.current=i,!0}return!1}static#extractShortLang(t){return i4t(t).contains("-")?t.substring(0,t.indexOf("-")):/^([a-zA-Z]{2})([^a-zA-Z].*)?$/.test(t)?/^([a-zA-Z]{2})([^a-zA-Z].*)?$/.exec(t)[1]:null}static#remapLanguages(t){if(t.startsWith("es-")&&!/es-es/i.test(t))return"es-US";switch(t){case"ca-valencia":return"x-VA";case"es":case"es-es":return"es-ES"}return t}static getLanguage(){var t;return!i4t(this.#params.lang.current).isNullOrEmptyString()||this.isValidLanguage(document.documentElement.lang)||this.isValidLanguage(document.documentElement.getAttribute("xml:lang"))||(t=i4t.find("meta[http-equiv=content-language], meta[http-equiv=Content-Language]")).isElement()&&this.isValidLanguage(t.attr("content"))||this.isValidLanguage(navigator.language)?this.#params.lang.current:this.#params.lang.current=this.#params.lang.bydefault}static setLanguage(t){return!(i4t(t).isNullOrEmptyString()||!this.isValidLanguage(t))}static setCustomAttributes(t){var e,i;i4t(t).isElement()&&i4t(t.attributes).each(function(){-1<this.val().name.indexOf("data-insuit-")&&(e=this.val().name.replace("data-insuit-","").replace(/-/g,"."),i=i4t(this.val().value).makeType(),i4t.config.set(e,i))})}static get(t){if(i4t(t).isNullOrEmptyString())return null;var e=this.#params,i=t.split(".");do{if(i4t(e).isUndefinedOrNull())return null}while(e=e[i.shift()],0<i.length);return e}static template(t,e={}){t=i4t.config.get("template."+t);return i4t(t).isFunction()?(i4t(i4t.js.services.I18nService.loadTexts).defer(),t(e)):null}static set(t,e){if(!i4t(t).isNullOrEmptyString()){if("rules.passive.regex"===t)try{e=i4t(e).split(",").map(t=>new RegExp(t))}catch(t){i4t.logger.warning("No se ha podido añadir las regex pasivas:"+t.message)}for(var i,r=this.#params,n=t.split(".");1<n.length;)i=n.shift(),i4t(r[i]).isUndefinedOrNull()&&(r[i]={}),r=r[i];r[n.shift()]=e,i4t(i4t.logger).isUndefinedOrNull()||!i4t(t).startsWith("log.")&&"log"!==t||i4t.logger.config(this.#params.log)}}static getSuirUrl(){var t=this.get("suit");return t.protocol+"//"+t.domain+t.path}static removeRTCAids(){delete this.#params.aids.SOUND,delete this.#params.aids.SPEECH}static#loadListener=()=>this.setCustomAttributes(window.document.body);static#init=(window.addEventListener("load",this.#loadListener),void("http:"===window.location.protocol&&this.removeRTCAids()));static destroy(){window.removeEventListener("load",this.#loadListener)}static setKeyAsDefaultConfig(){this.UI.getDefault=()=>{var t,e=("desktop"!==i4t.userAgent.device.type?i4t(i4t.config.#params.aids.BUTTON):i4t(i4t.config.#params.aids.KEY)).clone().val();return i4t.config.#params.lang.current||i4t.config.getLanguage(),("desktop"!==i4t.userAgent.device.type||i4t(i4t.config.#params.lang.system[i4t.config.#params.lang.current]).isUndefinedOrNull())&&-1<(t=i4t(e.outAids).indexOf("AloudOutAid"))&&e.outAids.splice(t,1),e}}static isValidConfig(t){return!i4t(t).isUndefinedOrNull()&&i4t(t.inAids).isArray()&&i4t(t.outAids).isArray()&&i4t.config.get("aids."+i4t(t.option).toUpperCase())&&i4t(i4t.config.get("aids."+i4t(t.option).toUpperCase()).devicessupported).includes(i4t.userAgent.device.type)}static setProjectConfig(t){i4t.config.set("project.code",t.code),i4t.config.set("project.version",t.version),i4t.config.set("project.description",t.description),i4t.config.set("project.lastmodified",t.lastmodified),i4t.config.set("project.isv8",t.isv8),t.isv8&&!i4t(t.config["v8.modelservice"]).isUndefinedOrNull()&&i4t.config.set("project.v8.modelservice",i4t(t.config["v8.modelservice"]).makeType()),i4t.config.set("siteid",t.siteid),i4t.config.set("uuid",t.UUID),i4t.config.set("environment",t.environment),Object.entries(t.config).forEach(([t,e])=>{i4t(t).startsWith(window.location.hostname)&&(t=i4t(t).replace(window.location.hostname+".","")),e=i4t(e).makeType(),i4t.config.set(t,e)})}static get isPassive(){return!0!==i4t.config.get("project.accessibilityManager")&&(!1===i4t.config.get("v8.modelservice")||!!i4t.config.get("rules.passive.active")||i4t.config.get("rules.passive.regex")?.some?.(t=>t.test(window.location.href)))}},i4t.bus=class Bus extends i4t.base{#keys={};subscribe(t,e){!i4t(t).isNullOrEmptyString()&&i4t(e).isFunction()&&(i4t(this.#keys[t]).isUndefinedOrNull()&&(this.#keys[t]=[]),this.#keys[t].push(e))}publish(e,...i){var r;if(!i4t(e).isNullOrEmptyString()&&!i4t(this.#keys[e]).isUndefinedOrNull())for(let t=0;this.#keys[e]&&t<this.#keys[e].length;t++)r=this.#keys[e][t],i4t(r).isFunction()&&r.apply(this,i)}unsubscribe(t,e){var i;if(!i4t(t).isNullOrEmptyString()&&i4t(e).isFunction())for(i=0;i<this.#keys[t].length;i++)if(e==this.#keys[t][i])return i4t(this.#keys[t]).remove(i),!0;return!1}destroy(){this.#keys={}}},i4t.url=class Url extends i4t.base{static get currentHost(){return("x-insuit-pdf-viewer"===i4t(document.documentElement).attr("id")?new this.URL(window.parent.location.href):new this.URL(window.location.href)).host}static URL=i4t.getNativeCode("window.URL");#url;constructor(t){super(),this.setUrl(t)}getOrigin(){return this.#url.origin}getHost(){return this.#url.host}getDomain(){return this.#url.hostname}setDomain(t){!i4t(t).isNullOrEmptyString()&&/[\w\-0-9]\.[\w\-0-9]+/.test(t)&&(this.#url.hostname=t)}getPort(){return this.#url.port}setPort(t){t=i4t(t);t.isInt()&&0<=t.val()&&t.val()<=65535&&(this.#url.port=t.val())}getProtocol(){return this.#url.protocol}setProtocol(t){"https:"!=t&&"http:"!=t||(this.#url.protocol=t)}getPage(){return this.#url.pathname.substring(this.#url.pathname.lastIndexOf("/")+1)}setPage(t){i4t(t).isNullOrEmptyString()||(this.#url.pathname=this.#url.pathname.substring(0,this.#url.pathname.lastIndexOf("/")+1)+t)}getFileName(){var t=/([a-zA-Z0-9_-]+)\.(aac|abw|arc|avi|azw|bin|bz|bz2|csh|css|csv|doc|epub|gif|htm|html|ico|ics|jar|jpeg|jpg|js|json|mid|midi|mpeg|mpkg|odp|ods|odt|oga|ogv|ogx|pdf|ppt|rar|rtf|sh|svg|swf|tar|tif|tiff|ttf|vsd|wav|weba|webm|webp|woff|woff2|xhtml|xls|xml|xul|zip|3gp|3g2|7z)/;return t.test(this.#url)?t.exec(this.#url)[1]:""}addDirectory(t,e){var i=this.#url.pathname.substring(this.#url.pathname.indexOf("/")+1).split("/");i4t(e).isInt()&&e<i.length&&!i4t(t).isNullOrEmptyString()&&(i.splice(e,0,t),this.#url.pathname="/"+i.join("/"))}removeDirectory(t){var e=this.#url.pathname.substring(this.#url.pathname.indexOf("/")+1).split("/");i4t(t).isInt()&&t<e.length-1&&(e.splice(t,1),this.#url.pathname="/"+e.join("/"))}getDirectories(){var t=this.#url.pathname.indexOf("/")+1;return this.#url.pathname.lastIndexOf("/")<t?[]:this.#url.pathname.substring(this.#url.pathname.indexOf("/")+1,this.#url.pathname.lastIndexOf("/")).split("/")}getAllParams(){return this.#url.search}addParam(t,e){this.#url.searchParams.append(t,e)}removeParam(t){this.#url.searchParams.delete(t)}getParam(t){return this.#url.searchParams.get(t)}getAllParam(t){return this.#url.searchParams.getAll(t)}setParam(t,e){return this.#url.searchParams.set(t,e)}toString(){return this.#url.href}getV7Url(){return this.isV7Url()||(this.setProtocol("https:"),this.setDomain(this.getDomain().replace(/\./gi,"--")+"."+("dev.insuit.local"===i4t.config.get("environment")?"insuit.local":i4t.config.get("environment")))),this.toString()}isV7Url(){return/.+--.+\.insuit\.[a-zA-Z]+$/i.test(this.getDomain())}isSameDomainAs(t){t=new i4t.url(t);return this.getDomain()===t.getDomain()}isSameProtocolAs(t){t=new i4t.url(t);return this.getProtocol()===t.getProtocol()}insuitContentType(){var t=document.contentType;return t=i4t(document.body).hasClass("insuit-pdf")?"application/pdf":t}asLegibleString(){var e=/^.*(\s\[a-zA-Z]{2,}).*$/;return/javascript/.test(this.toString())?"":this.getDirectories().map(function(t){return t.replace(/\\-/g," ").replace(/_/g," ")}).filter(function(t){return t.length<64&&e.test(t)}).join(" ")+" "+this.getPage().replace(/\.[a-zA-Z]+$/,"")}setUrl(t){var e,i,r,t=i4t(t).isNullOrEmptyString()?window.location.href:t;/^https?:\/\/.*/.test(t)||(i=(e=document.implementation.createHTMLDocument("")).createElement("base"),r=e.createElement("a"),i.href=window.location.href,e.head.appendChild(i),e.body.appendChild(r),r.href=t,t=r.href),this.#url=new i4t.url.URL(t)}},i4t.ajax=class Ajax extends i4t.base{static fetch=i4t.getNativeCode("window.fetch").bind(window);static async#doRequest(t){return i4t(t.headers).isUndefinedOrNull()&&(t.headers={}),!i4t(t.removeRequestedWithHeader).isUndefinedOrNull()&&t.removeRequestedWithHeader||(t.headers["X-Requested-With"]="XMLHttpRequest"),new this(t).process()}static#serializeForm(t){for(var e,i,r=i4t({}),n=t.elements,s=function(t,e){var i;r.containsKey(t)?((i=i4t(r.get(t))).isArray()||(i=i4t([i.val()]),r.set(t,i.val())),i.val().push(e)):r.set(t,e)},a=0;a<n.length;a++)if(!(i=n[a]).disabled)switch(i.type){case"select-one":0<=i.selectedIndex&&s(i.name,i.options[i.selectedIndex].value);break;case"select-multiple":for(e=0;e<i.options.length;e++)i.options[e].selected&&s(i.name,i.options[e].value);break;case"checkbox":case"radio":i.checked&&s(i.name,i.value);break;default:s(i.name,i.value)}return r.val()}static async get(t){return!i4t(t).isUndefinedOrNull()&&(t.method="GET",this.#doRequest(t))}static async head(t){return!i4t(t).isUndefinedOrNull()&&(t.method="HEAD",t.timeout=5e3,i4t(t.headers).isUndefinedOrNull()&&(t.headers={}),this.#doRequest(t))}static async post(t){return!i4t(t).isUndefinedOrNull()&&(t.method="POST",i4t(t.headers).isUndefinedOrNull()&&(t.headers={},t.headers["Content-type"]="application/x-www-form-urlencoded; charset=UTF-8"),this.#doRequest(t))}static async put(t){return!i4t(t).isUndefinedOrNull()&&(t.method="PUT",i4t(t.headers).isUndefinedOrNull()&&(t.headers={},t.headers["Content-type"]="application/x-www-form-urlencoded; charset=UTF-8"),this.#doRequest(t))}static async deleteHTTP(t){return!i4t(t).isUndefinedOrNull()&&(t.method="DELETE",i4t(t.headers).isUndefinedOrNull()&&(t.headers={}),this.#doRequest(t))}static async options(t){return!i4t(t).isUndefinedOrNull()&&(t.method="OPTIONS",i4t(t.headers).isUndefinedOrNull()&&(t.headers={}),this.#doRequest(t))}static async patch(t){return!i4t(t).isUndefinedOrNull()&&(t.method="PATCH",i4t(t.headers).isUndefinedOrNull()&&(t.headers={}),this.#doRequest(t))}static async submit(t,e){if(i4t(t).isUndefinedOrNull())return!1;(e=i4t(e).isUndefinedOrNull()?{}:e).method=t.method.toUpperCase(),e.url=t.action;t=this.#serializeForm(t);return i4t(e.parameters).isUndefinedOrNull()?e.parameters=t:i4t.extend(e.parameters,t),this.post(e)}constructor(t){super(),i4t(t.headers).isUndefinedOrNull()||(t.headers=new Headers(t.headers)),i4t.extend(this.#Settings,t),this.#transaction.request.url=this.#Settings.url;t=this.#getParameters();"POST"===this.#Settings.method?this.#transaction.request.body=this.#Settings.body=t:0<t.length&&(this.#Settings.url+=(-1<this.#transaction.request.url.indexOf("?")?"&":"?")+t)}#abortController=new AbortController;#promise;#transaction={response:{},request:{},state:0};#Settings={url:window.location.href,method:"GET",headers:new Headers,body:null,mode:"cors",credentials:"same-origin",redirect:"follow",referrer:"about:client",referrerPolicy:"",integrity:"",keepalive:!1,signal:this.#abortController.signal,onSuccess:i4t.function.empty,responseFormat:"text",onError:i4t.function.empty,onTimeout:i4t.function.empty,onComplete:i4t.function.empty,parameters:{},timeout:null};#getParameters(){var i,t,r="",n=function(t,e){if(i4t(e).isArray())for(i=0;i<e.length;i++)n(t,e[i]);else 0<r.length&&(r+="&"),r+=encodeURIComponent(t)+"="+encodeURIComponent(e)};for(t in this.#Settings.parameters)Object.prototype.hasOwnProperty.call(this.#Settings.parameters,t)&&n(t,this.#Settings.parameters[t]);return r}#getAllResponseHeaders(t){var i=i4t({});return t.forEach(function(t,e){i.set(e,t)}),i.val()}destroy(){this.#abortController.abort()}async process(){let t;this.#transaction.response={},this.#Settings.timeout&&(t=i4t(()=>this.destroy).delay(this.#Settings.timeout/1e3));let e;try{e=await i4t.ajax.fetch(this.#Settings.url,this.#Settings)}catch(t){i4t.logger.warning("Error al realizar la petición a "+this.#Settings.url)}return t&&window.clearTimeout(t),e}onComplete(t){this.#promise.then(t)}},i4t.iframeBus=class IframeBus extends i4t.base{#id=Math.round(100*Math.random());#onActivate;#onTimeout;#onMessage=t=>this.#messageFunction(t);#timer;#keys={};#isActive=!1;#iframe={window:null,url:null};currentPage;iframePage;constructor(t){super(),t?this.iframePage=new i4t.url(t.src).getPage():this.currentPage=(new i4t.url).getPage(),this.setIframeComunication(t)}#localPublish(){var t,e,i=[],r=Array.prototype.shift.call(arguments);if(!i4t(r).isNullOrEmptyString()&&!i4t(this.#keys[r]).isUndefinedOrNull())for(t=0;!i4t(this.#keys[r]).isUndefinedOrNull()&&t<this.#keys[r].length;t++)e=this.#keys[r][t],i4t(e).isFunction()&&i.push(e.apply(this,arguments));return i}#messageFunction(t){try{if(this.#iframe.window&&t.source===this.#iframe.window){this.#iframe.window=t.source,this.#iframe.url=t.origin&&t.origin.indexOf("file")<0&&"null"!==t.origin?t.origin:"*";var e,i=t.data;if(!i4t(i).isNullOrEmptyString()&&i4t(i).isString()&&i4t(i).includes("toPublish")){if(e=i4t(i).toJSON(),!i4t(e.toPublish).isNullOrEmptyString()){let t=e.callParameters;return i4t(t).isString()&&!i4t(t).isNullOrEmptyString()&&(t=i4t(t).toJSON()),(t=i4t(t).isArray()?t:[t]).unshift(e.toPublish),this.#localPublish.apply(this,t)}}else i4t.logger.warning("Los datos del iFrame no son un JSON valido: "+i)}}catch(t){i4t.logger.error("Error inesperado el el iframeBus",t)}}#dispatch(t){i4t(t).isFunction()&&Array.prototype.shift.call(arguments).apply(this,arguments)}#executeCall(t){if(i4t(t).isNullOrEmptyString())return null;var e,i=[],r=this.#iframe.url,n=this.#iframe.window;if(n.postMessage){for(e=1;e<arguments.length;e++)i.push(arguments[e]);t=i4t({toPublish:t,callParameters:i}).stringify(),n.postMessage(t,r)}}onActive(t){this.#onActivate=t}isActive(){return this.#isActive}onError(t){this.#onTimeout=t}activate(e){if(!this.#iframe.window)throw new Error("No existe iframe de destino para establecer la comunicación");let i=(new Date).getTime(),t,r=["activate"],n=t=>{try{this.#executeCall.apply(this,t)}catch(t){this.#dispatch(this.#onTimeout)}};for(t=1;t<arguments.length;t++)r.push(arguments[t]);i4t(e).isInt()&&!this.#isActive&&(this.#timer=i4t(()=>{var t;i4t.logger.trace("[IFRAMEBUS] Desde el window padre se intenta activar "+this.iframePage),this.#isActive?clearInterval(this.#timer):(t=(new Date).getTime()-i,e<=t?(this.#isActive=!1,clearInterval(this.#timer),i4t.logger.warning("IFRAME BUS TIMEOUT "+this.#id+this.#iframe.src),this.#dispatch(this.#onTimeout)):n(r))}).interval(100)),n(r)}deActivate(){this.#isActive=!1}publish(){if(!this.#isActive)throw new Error(`El Bus ${this.#id} no está activo`);this.#executeCall.apply(this,arguments)}subscribe(t,e){!i4t(t).isNullOrEmptyString()&&i4t(e).isFunction()&&(i4t(this.#keys[t]).isUndefinedOrNull()&&(this.#keys[t]=[]),this.#keys[t].push(e))}unsubscribe(t,e){var i;if(!i4t(t).isNullOrEmptyString()&&this.#keys[t]&&i4t(e).isFunction())for(i=0;i<this.#keys[t].length;i++)if(e==this.#keys[t][i])return i4t(this.#keys[t]).remove(i),!0;return!1}unsubscribeAll(t){return!(i4t(t).isNullOrEmptyString()||!this.#keys[t]||(delete this.#keys[t],0))}destroy(){i4t(this.currentPage).isNullOrEmptyString()?i4t.logger.trace(`[IFRAMEBUS] Se destruye el iframebus ${this.#id} que conecta a `+this.iframePage):i4t.logger.trace(`[IFRAMEBUS] Se destruye el iframe bus ${this.#id} en `+this.currentPage),window.clearInterval(this.#timer),i4t.event.removeListener("message",this.#onMessage),this.#keys={},this.#isActive=!1}setIframeComunication(t){var e,i;!i4t(t).isElement()&&window.parent===window||((e=this).#iframe.window=(i=t,i4t(i).isElement()?i.contentWindow:window.parent),this.#iframe.url=(i=t,i4t(i).isElement()&&!i4t(i.src).isNullOrEmptyString()&&i.src.indexOf("file")<0?i.src:"*"),i4t.event.removeListener("message",this.#onMessage),i4t.event.addListener("message",this.#onMessage),this.subscribe("destroy",function(){e.destroy()}),i4t(t).isElement()?this.setCommunicationFromParentToIframe():this.setCommunicationFromIframeToParent())}setCommunicationFromParentToIframe(){this.iframePage=new i4t.url(this.#iframe.url).getPage(),i4t.logger.trace("[IFRAMEBUS] Desde el window padre se espera activación de "+this.iframePage),this.subscribe("activate",()=>{if(!this.#isActive){this.#isActive=!0,i4t.logger.trace(`[IFRAMEBUS] Se activa ${this.#id} desde window padre`);for(var t=[this.#onActivate],e=0;e<arguments.length;e++)t.push(arguments[e]);this.#dispatch.apply(this,t)}})}setCommunicationFromIframeToParent(){this.currentPage=(new i4t.url).getPage(),i4t.logger.trace(`[IFRAMEBUS] Desde ${this.currentPage} se espera activación de la window padre`),this.subscribe("activate",(...t)=>{this.#isActive||(this.#isActive=!0,this.publish("activate"),t.unshift(this.#onActivate),this.#dispatch.apply(this,t))})}},i4t.scroll=class Scroller extends i4t.base{static#timer=null;static#resetTimer(){i4t(this.#timer).isUndefinedOrNull()||(clearInterval(this.#timer),this.#timer=null)}static#scrollTO(t,e,i){i4t(t.scrollTop).isNumber()&&i4t(i).isNumber()&&(t.scrollTop=i),i4t(t.scrollLeft).isNumber()&&i4t(e).isNumber()&&(t.scrollLeft=e)}static getScrollableElement(t,e){let i=i4t(t),r,n,s,a,l;for(;t&&t!==document.documentElement&&i.isElement();){switch(n=t.scrollHeight-t.clientHeight,r=t.scrollWidth-t.clientWidth,e){case"x":if(("auto"===(a=i.css("overflow-x"))||"scroll"===a)&&10<r)return t;break;case"y":if(("auto"===(l=i.css("overflow-y"))||"scroll"===l)&&10<n)return t;break;default:if(s=i.css("overflow"),(10<n||10<r)&&(i4t(s).includes("auto")||i4t(s).includes("scroll")))return t}t=t.parentNode,i=i4t(t)}return document.documentElement}static#scroller(t,e,i,r){var n=0,s={x:0,y:0},a={x:0,y:0},l={x:0,y:0},o={x:0,y:0},c={x:0,y:0},d=1500,u=15,h=function(){return d<=n?{x:s.x+o.x,y:s.y+o.y}:{x:o.x*(1-Math.pow(2,-10*n/d))+s.x,y:o.y*(1-Math.pow(2,-10*n/d))+s.y}};(i4t(i).isNumber()||i4t(e).isNumber())&&(this.#resetTimer(),a.y=i4t(i).isNumber()?i:t.scrollTop,a.x=i4t(e).isNumber()?e:t.scrollLeft,a.y<0&&(a.y=0),a.x<0&&(a.x=0),c.y=this.getY(t)-t.clientHeight,c.x=this.getX(t)-t.clientWidth,a.y>c.y&&(a.y=c.y),a.x>c.x&&(a.x=c.x),s.y=this.getTop(t),s.x=this.getLeft(t),o.y=a.y-s.y,o.x=a.x-s.x,(i=Math.max(Math.abs(o.x),Math.abs(o.y)))<2500&&(d=i),this.#timer=i4t(()=>{n+=u,l=h(),a.y===l.y&&a.x===l.x?(clearInterval(this.#timer),this.#scrollTO(t,a.x,a.y),i4t(r).isFunction()&&r.call(a)):this.#scrollTO(t,l.x,l.y)}).interval(u))}static#getHtmlStyle(t,e){try{var i=parseFloat(t.style[e].replace("px",""));return i4t(i).isFloat()?i:0}catch(t){return 0}}static getTop(t){var e=t.scrollTop,t=this.#getHtmlStyle(t,"top");return e<t?t:e}static getLeft(t){var e=t.scrollLeft,t=this.#getHtmlStyle(t,"left");return e<t?t:e}static getX(t){var e=t.scrollWidth,t=this.#getHtmlStyle(t,"width");return e<t?t:e}static getY(t){var e=t.scrollHeight,t=this.#getHtmlStyle(t,"height");return e<t?t:e}static up(t){var t=this.getScrollableElement(t,"y"),e=this.getTop(t)-parseInt(t.clientHeight/2,10);this.#scroller(t,null,e)}static down(t){var t=this.getScrollableElement(t,"y"),e=this.getTop(t)+parseInt(t.clientHeight/2,10);this.#scroller(t,null,e)}static left(t){var t=this.getScrollableElement(t,"x"),e=this.getLeft(t)-parseInt(t.clientWidth/2,10);this.#scroller(t,e,null)}static right(t){var t=this.getScrollableElement(t,"x"),e=this.getLeft(t)+parseInt(t.clientWidth/2,10);this.#scroller(t,e,null)}static toSelected(t,e,i){t=this.getScrollableElement(t);i4t(e.y).isNumber()&&i4t(e.x).isNumber()&&this.#scroller(t,e.x,e.y,i)}},i4t.storage=class UserConfigStorage extends i4t.base{static#thirdPartyBlockedKey="third-party-cookies-blocked";static#savePending;static#config;static#localDB;static#hasThirdPartyCookiesBlocked=!1;static#promiseQueue=[];static childIframes=[];static currentConfig;static get#bus(){return i4t.insuitIframeBus}static get#storage(){return i4t(this.#localDB).isUndefinedOrNull()&&(this.#localDB=new i4t.storage.localDB),this.#localDB}static async sendCurrentConfigToIframe(e){if(i4t(e.data).isString())try{var t;"x-insuit-request-config"===i4t(e.data).toJSON().toPublish&&(i4t(this.childIframes).includes(e.source)||i4t(this.childIframes).push(e.source),t={toPublish:"x-insuit-serve-config",callParameters:await i4t.storage.getConfig()},e.source.postMessage(i4t(t).stringify(),"*"))}catch(t){i4t.logger.info("Se ha recibido un evento que no parece de inSuit "+e.data)}}static async notifyConfigChangeToChildIframes(){var t={toPublish:"x-insuit-change-config",callParameters:await i4t.storage.getConfig()};let e=i4t(t).stringify();this.childIframes.forEach(t=>{t.postMessage(e,"*")})}static async listenConfigChangesFromParentWindow(){i4t.event.addListener("message",async i=>{if(!i4t(i.data).isUndefinedOrNull())try{let t=i4t(i.data).toJSON(),e=t.callParameters;"x-insuit-change-config"===t.toPublish&&(i4t(e).isUndefinedOrNull()&&(e={}),this.currentConfig=e,i4t.config.UI.set(e),i4t.js.InsuitApp.instance.checkUserConfig())}catch(t){i4t.logger.warning("Se ha recibido un mensaje no procendente de inSuit que ha producido un error al parsear el event.data")}})}static async getConfigFromParentWindow(){return i4t(this.currentConfig).isUndefinedOrNull()?new Promise(r=>{let t=i4t({toPublish:"x-insuit-request-config"}).stringify(),n=async t=>{let e=i4t(t.data).toJSON(),i=e.callParameters;"x-insuit-serve-config"===e.toPublish&&(i4t.event.removeListener("message",n),window.clearInterval(s),i4t(i).isUndefinedOrNull()&&(i={}),i4t.config.UI.set(i),this.currentConfig=i,r(i))},s=(i4t.event.addListener("message",n),i4t(()=>{window.parent.postMessage(t,"*")}).interval(1e3))}):this.currentConfig}static async getConfig(){if(this.#savePending&&await new Promise(t=>this.#promiseQueue.push(t)),i4t.beIframe())return this.getConfigFromParentWindow();let t;return this.#checkSessionDB(),t=this.#hasThirdPartyCookiesBlocked?this.#storage.get(i4t.config.get("configKey")):await this.#getConfigFromConfigIframe(),i4t(t).isUndefinedOrNull()?{}:t=i4t(t).isString()?i4t(t).toJSON():t}static async saveConfig(t){i4t.beIframe()||(this.#savePending&&await new Promise(t=>this.#promiseQueue.push(t)),this.#savePending=!0,this.#hasThirdPartyCookiesBlocked?this.#saveConfigInLocalStorage(t):await this.#saveConfigInConfigIframe(t),this.#savePending=!1,0<this.#promiseQueue.length&&this.#promiseQueue.shift()())}static async saveOption(t,e){var i;i4t.beIframe()||(i=await this.getConfig(),i4t(i.options).isUndefinedOrNull()&&(i.options={}),i.options[t]=e,await this.saveConfig(i))}static#saveConfigInLocalStorage(t){this.#storage.save(i4t.config.get("configKey"),i4t(t).stringify())}static async#saveConfigInConfigIframe(e){let i=this.#bus,r,n,t=new Promise(t=>{r=()=>t(!1),n=()=>{this.#hasThirdPartyCookiesBlocked=!0,i4t.storage.sessionDB.set("thirdBlocked","true"),this.#saveConfigInLocalStorage(e),t(!1)},i.subscribe(i4t.config.get("configKey")+"-saved",r),i.subscribe(this.#thirdPartyBlockedKey,n),i.publish(i4t.config.get("configKey")+"-save",e)}),s=new Promise(t=>i4t(t).delay(2,!0));await Promise.race([t,s])&&(this.#saveConfigInLocalStorage(e),i4t.logger.warning("TIMEOUT guardando la configuración en el iframe")),i.unsubscribe(i4t.config.get("configKey"),r),i.unsubscribe(this.#storage,n)}static#checkSessionDB(){"true"===i4t.storage.sessionDB.get("thirdBlocked")&&(this.#hasThirdPartyCookiesBlocked=!0)}static async#getConfigFromConfigIframe(){let t=this.#bus,e,i,r,n=new Promise(e=>{i=t=>e(t),r=()=>{this.#hasThirdPartyCookiesBlocked=!0,i4t.storage.sessionDB.set("thirdBlocked","true"),e(this.#storage.get(i4t.config.get("configKey")))},t.subscribe(i4t.config.get("configKey"),i),t.subscribe(this.#thirdPartyBlockedKey,r),t.publish(i4t.config.get("configKey")+"-get")}),s=new Promise(t=>i4t(t).delay(2));return e=await Promise.race([n,s]),i4t(e).isUndefinedOrNull()&&(i4t.logger.warning("TIMEOUT intentando sacar la configuración del config iframe"),e=this.#storage.get(i4t.config.get("configKey"))),t.unsubscribe(i4t.config.get("configKey"),i),t.unsubscribe(this.#storage,r),e}static get(t){return this.#config[t]}set(t,e){this.#config[t]=e,this.#storage.save(t,e)}delete(t){delete this.#config[t],this.#storage.delete(t)}list(){return i4t(this.#config).clone().val()}},i4t.storage.localDB=class localDB{config={};constructor(){for(var t,e={},i=0;i<=localStorage.length-1;i++)e[t=localStorage.key(i)]=localStorage.getItem(t);this.config=e}get(t){return localStorage.getItem(t)}save(t,e){try{localStorage.setItem(t,e)}catch(t){i4t.logger.error("Guardando en el localstorage",t)}}delete(t){try{localStorage.removeItem(t)}catch(t){i4t.logger.error("Eliminando en el localstorage",t)}}},i4t.storage.sessionDB=class sessionDB{static getConfig(){var t={},e=window.sessionStorage["insuit.config-timeout-date"];return!i4t(e).isNullOrEmptyString()&&Date.now()>parseInt(e)||i4t(window.sessionStorage["insuit.config"]).isNullOrEmptyString()?t:i4t(window.sessionStorage["insuit.config"]).toJSON()}static get(t){return window.sessionStorage["insuit."+t]}static set(t,e){try{window.sessionStorage.setItem("insuit."+t,e)}catch(t){i4t.logger.error("Guardando en el sessionStorage",t)}}static getCDN(){return window.sessionStorage["insuit.cdn"]}},i4t.keyboard=class Keyboard extends i4t.base{static#capture={mapName:"",keys:void 0,listener:void 0};static#file={start:t=>`i4t.keyboard.${t} = (function ${t} () {
    var MAP_${t}, Keyboard = i4t.keyboard; 
    
    i4t.extend(MAP_${t} = {
`,end:t=>`
    });

    return new Keyboard(MAP_${t});
})();`};#map;#modifiers;constructor(t){super(),this.#map=t&&i4t(t).isObject()?t:{},this.#modifiers={ctrlKey:t.ctrl,altKey:t.alt,metaKey:t.meta,shiftKey:t.shift,altGrKey:t.altgr}}static playCapture(t){if(!i4t(t).isString())throw new Error("Debe definir un nombre de mapa");let e=this,i=!1;this.#capture.mapName=t.toUpperCase(),this.#capture.keys=new Map,this.#capture.listener=t=>{"keydown"===t.type&&("AltGraph"===t.key&&(i=!0),e.#capture.keys.set("AltGraph"===t.key?"altgr":'"'===t.key?'\\"':1<t.key.length?t.key.toLowerCase():t.key,"new Keyboard.Key("+t.keyCode+', "'+t.code+'", "'+('"'===t.key?'\\"':t.key)+'"'+(t.ctrlKey?", Keyboard.Key.CTRL":t.altKey?", Keyboard.Key.ALT":t.metaKey?", Keyboard.Key.META":t.shiftKey?", Keyboard.Key.SHIFT":i?", Keyboard.Key.ALTGR":"")+")")),"keyup"===t.type&&"AltGraph"===t.key&&(i=!1),t.preventDefault(),t.stopPropagation()},i4t.event.addListener("keydown",this.#capture.listener),i4t.event.addListener("keyup",this.#capture.listener)}static stopCapture(){if(this.#capture.listener&&(i4t.event.removeListener("keydown",this.#capture.listener),i4t.event.removeListener("keyup",this.#capture.listener),i4t(this.#capture.keys).isMap())){let i="";this.#capture.keys.forEach((t,e)=>{""!==i&&(i+=",\n"),i+='\t\t"'+e+'":'+t},this),i=this.#file.start(this.#capture.mapName)+i+this.#file.end(this.#capture.mapName),this.#download(i,this.#capture.mapName)||console.log(i)}}static#download(t,e){var i,r;return!(!window.Blob||!window.URL&&!window.webkitURL||(t=new Blob(["\ufeff",t],{type:"text/javascript"}),(i=new FileReader).onload=function(t){(r=i4t(document).createElement("a")).href=t.target.result,r.target="_blank",r.download="Keyboard"+e+".js",i4t(r).dispatchEvent("click"),(window.URL||window.webkitURL).revokeObjectURL(r.href)},i.readAsDataURL(t),0))}press(n,t,s){if(i4t(t).isString()){let r=[],e,i;i4t(t).startsWith("{")&&i4t(t).endsWith("}")?(t.substring(1,t.length-1).replaceAll(/\+\+/gi,"+##").split("+").forEach(t=>{if(i=("##"===t?"+":t).toLowerCase(),!(e=this.#map[i])||i4t(e).isArray()||e.isModified&&1===i.length)throw new Error("Las acciones deben de lanzarse con elementos sin modificadores, o sea que no sean combinaciones de por si");r.push(e)},this),this.#pressKeys(n,r,s)):t.split("").forEach(t=>{(e=this.#map[t])&&(e=i4t(e).isArray()?e:[e]).forEach(i=>{r=[i],Object.entries(this.#modifiers).forEach(([t,e])=>{i[t]&&e&&r.unshift(e)},this),this.#pressKeys(n,r,s)},this)},this)}return this}#pressKeys(e,t,i){let r,n,s,a={ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1};t.forEach(t=>{(r=t.keydown(a.ctrlKey,a.altKey,a.shiftKey,a.metaKey))&&(a.ctrlKey=r.ctrlKey,a.altKey=r.altKey,a.shiftKey=r.shiftKey,a.metaKey=t.metaKey||a.metaKey,this.#dispatchEvent(e,r,i)),(n=t.keypress(0,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey))&&this.#dispatchEvent(e,n,i)},this),t.reverse().forEach(t=>{(s=t.keyup(a.ctrlKey,a.altKey,a.shiftKey,a.metaKey))&&(this.#dispatchEvent(e,s,i),a.ctrlKey=s.ctrlKey,a.altKey=s.altKey,a.shiftKey=s.shiftKey,a.metaKey=!(t.metaKey&&a.metaKey))},this)}#dispatchEvent(t,e,i){i=this.#checkProperties(i,e);i4t.event.dispatch(i.type,t,i)}#checkProperties(t={},e){var i={composed:!0,cancelable:!0,bubbles:!0};return i4t.extend(i,t),i4t.extend(i,e),i}},i4t.keyboard.Key=class Key extends i4t.base{static CTRL=1;static META=2;static ALT=4;static SHIFT=8;static ALTGR=16;#keyCode;#code;#key;#defaultCharCode;#hasKeyPress;#modifiers;constructor(t,e,i,r=0){super(),this.#keyCode=t,this.#code=e,this.#key=i,this.#defaultCharCode=1===i.length?i.charCodeAt(0):0,this.#hasKeyPress=1===i.length,this.#modifiers={ctrlKey:!!(r&this.constructor.CTRL),altKey:!!(r&this.constructor.ALT),metaKey:!!(r&this.constructor.META),shiftKey:!!(r&this.constructor.SHIFT),altGrKey:!!(r&this.constructor.ALTGR)}}get keyCode(){return this.#keyCode}get code(){return this.#code}get key(){return this.#key}get defaultCharCode(){return this.#defaultCharCode}get hasKeyPress(){return this.#hasKeyPress}get ctrlKey(){return this.#modifiers.ctrlKey}get altKey(){return this.#modifiers.altKey}get shiftKey(){return this.#modifiers.shiftKey}get metaKey(){return this.#modifiers.metaKey}get altGrKey(){return this.#modifiers.altGrKey}get isModified(){return this.#modifiers.ctrlKey|this.#modifiers.altKey|this.#modifiers.shiftKey|this.#modifiers.metaKey|this.#modifiers.altGrKey}keydown(t=!1,e=!1,i=!1,r=!1){return{type:"keydown",keyCode:this.keyCode,which:this.keyCode,key:this.key,code:this.code,ctrlKey:this.ctrlKey||t,altKey:this.altKey||e,shiftKey:this.shiftKey||i,metaKey:(this.metaKey||r)&&"Meta"!==this.#key,charCode:0}}keypress(t=0,e=!1,i=!1,r=!1,n=!1){if(this.hasKeyPress&&!this.altKey&&!i)return{type:"keypress",keyCode:0!==t?t:this.defaultCharCode,which:0!==t?t:this.defaultCharCode,key:0!==t?String.fromCharCode(t):this.key,code:this.code,ctrlKey:this.ctrlKey||e,altKey:this.altKey||i,shiftKey:this.shiftKey||r,metaKey:this.metaKey||n,charCode:0!==t?t:this.defaultCharCode}}keyup(t=!1,e=!1,i=!1,r=!1){return{type:"keyup",keyCode:this.keyCode,which:this.keyCode,key:this.key,code:this.code,ctrlKey:(this.ctrlKey||t)&&"Control"!==this.#key,altKey:(this.altKey||e)&&"Alt"!==this.#key,shiftKey:(this.shiftKey||i)&&"Shift"!==this.#key,metaKey:this.metaKey||r,charCode:0}}},i4t.htmlElement.assign({pressKey:function(t,e){return i4t.keyboard.ES_SPANISH.press(this.value,t,e),this}}),i4t.keyboard.ES_SPANISH=function ES_SPANISH(){var t,e=i4t.keyboard;return i4t.extend(t={escape:new e.Key(27,"Escape","Escape"),f1:new e.Key(112,"F1","F1"),f2:new e.Key(113,"F2","F2"),f3:new e.Key(114,"F3","F3"),f4:new e.Key(115,"F4","F4"),f5:new e.Key(115,"F5","F5"),f6:new e.Key(117,"F6","F6"),f7:new e.Key(118,"F7","F7"),f8:new e.Key(119,"F8","F8"),f9:new e.Key(120,"F9","F9"),f10:new e.Key(121,"F10","F10"),f11:new e.Key(122,"F11","F11"),f12:new e.Key(123,"F12","F12"),q:new e.Key(81,"KeyQ","q"),w:new e.Key(87,"KeyW","w"),e:new e.Key(69,"KeyE","e"),r:new e.Key(82,"KeyR","r"),t:new e.Key(84,"KeyT","t"),y:new e.Key(89,"KeyY","y"),u:new e.Key(85,"KeyU","u"),i:new e.Key(73,"KeyI","i"),o:new e.Key(79,"KeyO","o"),p:new e.Key(80,"KeyP","p"),a:new e.Key(65,"KeyA","a"),s:new e.Key(83,"KeyS","s"),d:new e.Key(68,"KeyD","d"),f:new e.Key(70,"KeyF","f"),g:new e.Key(71,"KeyG","g"),h:new e.Key(72,"KeyH","h"),j:new e.Key(74,"KeyJ","j"),k:new e.Key(75,"KeyK","k"),l:new e.Key(76,"KeyL","l"),"ñ":new e.Key(192,"Semicolon","ñ"),z:new e.Key(90,"KeyZ","z"),x:new e.Key(88,"KeyX","x"),c:new e.Key(67,"KeyC","c"),v:new e.Key(86,"KeyV","v"),b:new e.Key(66,"KeyB","b"),n:new e.Key(78,"KeyN","n"),m:new e.Key(77,"KeyM","m"),Q:new e.Key(81,"KeyQ","Q",e.Key.SHIFT),W:new e.Key(87,"KeyW","W",e.Key.SHIFT),E:new e.Key(69,"KeyE","E",e.Key.SHIFT),R:new e.Key(82,"KeyR","R",e.Key.SHIFT),T:new e.Key(84,"KeyT","T",e.Key.SHIFT),Y:new e.Key(89,"KeyY","Y",e.Key.SHIFT),U:new e.Key(85,"KeyU","U",e.Key.SHIFT),I:new e.Key(73,"KeyI","I",e.Key.SHIFT),O:new e.Key(79,"KeyO","O",e.Key.SHIFT),P:new e.Key(80,"KeyP","P",e.Key.SHIFT),A:new e.Key(65,"KeyA","A",e.Key.SHIFT),S:new e.Key(83,"KeyS","S",e.Key.SHIFT),D:new e.Key(68,"KeyD","D",e.Key.SHIFT),F:new e.Key(70,"KeyF","F",e.Key.SHIFT),G:new e.Key(71,"KeyG","G",e.Key.SHIFT),H:new e.Key(72,"KeyH","H",e.Key.SHIFT),J:new e.Key(74,"KeyJ","J",e.Key.SHIFT),K:new e.Key(75,"KeyK","K",e.Key.SHIFT),L:new e.Key(76,"KeyL","L",e.Key.SHIFT),"Ñ":new e.Key(192,"Semicolon","Ñ",e.Key.SHIFT),Z:new e.Key(90,"KeyZ","Z",e.Key.SHIFT),X:new e.Key(88,"KeyX","X",e.Key.SHIFT),C:new e.Key(67,"KeyC","C",e.Key.SHIFT),V:new e.Key(86,"KeyV","V",e.Key.SHIFT),B:new e.Key(66,"KeyB","B",e.Key.SHIFT),N:new e.Key(78,"KeyN","N",e.Key.SHIFT),M:new e.Key(77,"KeyM","M",e.Key.SHIFT),"º":new e.Key(220,"Backquote","º"),1:new e.Key(49,"Digit1","1"),2:new e.Key(50,"Digit2","2"),3:new e.Key(51,"Digit3","3"),4:new e.Key(52,"Digit4","4"),5:new e.Key(53,"Digit5","5"),6:new e.Key(54,"Digit6","6"),7:new e.Key(55,"Digit7","7"),8:new e.Key(56,"Digit8","8"),9:new e.Key(57,"Digit9","9"),0:new e.Key(48,"Digit0","0"),"'":new e.Key(219,"Minus","'"),"¡":new e.Key(221,"Equal","¡"),"ª":new e.Key(220,"Backquote","ª",e.Key.SHIFT),"!":new e.Key(49,"Digit1","!",e.Key.SHIFT),'"':new e.Key(50,"Digit2",'"',e.Key.SHIFT),"·":new e.Key(51,"Digit3","·",e.Key.SHIFT),$:new e.Key(52,"Digit4","$",e.Key.SHIFT),"%":new e.Key(53,"Digit5","%",e.Key.SHIFT),"&":new e.Key(54,"Digit6","&",e.Key.SHIFT),"/":new e.Key(55,"Digit7","/",e.Key.SHIFT),"(":new e.Key(56,"Digit8","(",e.Key.SHIFT),")":new e.Key(57,"Digit9",")",e.Key.SHIFT),"=":new e.Key(48,"Digit0","=",e.Key.SHIFT),"?":new e.Key(219,"Minus","?",e.Key.SHIFT),"¿":new e.Key(221,"Equal","¿",e.Key.SHIFT),"<":new e.Key(220,"IntlBackslash","<"),"+":new e.Key(187,"BracketRight","+"),"ç":new e.Key(191,"Backslash","ç"),",":new e.Key(188,"Comma",","),".":new e.Key(190,"Period","."),"-":new e.Key(189,"Slash","-"),">":new e.Key(220,"IntlBackslash",">",e.Key.SHIFT),"*":new e.Key(187,"BracketRight","*",e.Key.SHIFT),"Ç":new e.Key(191,"Backslash","Ç",e.Key.SHIFT),";":new e.Key(188,"Comma",";",e.Key.SHIFT),":":new e.Key(190,"Period",":",e.Key.SHIFT),_:new e.Key(189,"Slash","_",e.Key.SHIFT),graveaccent:new e.Key(219,"BracketLeft","Dead"),acuteaccent:new e.Key(222,"Quote","Dead"),circumflex:new e.Key(219,"BracketLeft","Dead",e.Key.SHIFT),diaeresis:new e.Key(222,"Quote","Dead",e.Key.SHIFT),capsLock:new e.Key(20,"CapsLock","CapsLock"),tab:new e.Key(9,"Tab","Tab"),enter:new e.Key(13,"Enter","Enter"),backspace:new e.Key(8,"Backspace","Backspace"),shift:new e.Key(16,"ShiftRight","Shift",e.Key.SHIFT),ctrl:new e.Key(17,"ControlLeft","Control",e.Key.CTRL),alt:new e.Key(18,"AltLeft","Alt",e.Key.ALT),altgr:new e.Key(225,"AltRight","AltGraph",e.Key.ALTGR),meta:new e.Key(92,"MetaRight","Meta",e.Key.META),ContextMenu:new e.Key(93,"ContextMenu","ContextMenu")," ":new e.Key(32,"Space"," "),printscreen:new e.Key(44,"PrintScreen","PrintScreen"),scrolllock:new e.Key(145,"ScrollLock","ScrollLock"),pause:new e.Key(19,"Pause","Pause"),insert:new e.Key(45,"Insert","Insert"),home:new e.Key(36,"Home","Home"),pageup:new e.Key(33,"PageUp","PageUp"),delete:new e.Key(46,"Delete","Delete"),end:new e.Key(35,"End","End"),pagedown:new e.Key(34,"PageDown","PageDown"),arrowup:new e.Key(38,"ArrowUp","ArrowUp"),arrowleft:new e.Key(37,"ArrowLeft","ArrowLeft"),arrowdown:new e.Key(40,"ArrowDown","ArrowDown"),arrowright:new e.Key(39,"ArrowRight","ArrowRight"),numlock:new e.Key(144,"NumLock","NumLock")},{"`":[t.graveaccent,t.graveaccent],"à":[t.graveaccent,t.a],"è":[t.graveaccent,t.e],"ì":[t.graveaccent,t.i],"ò":[t.graveaccent,t.o],"ù":[t.graveaccent,t.u],"ỳ":[t.graveaccent,t.y],"'":[t.acuteaccent,t.acuteaccent],"á":[t.acuteaccent,t.a],"é":[t.acuteaccent,t.e],"í":[t.acuteaccent,t.i],"ó":[t.acuteaccent,t.o],"ú":[t.acuteaccent,t.u],"ý":[t.acuteaccent,t.y],"^":[t.circumflex,t.circumflex],"â":[t.circumflex,t.a],"ê":[t.circumflex,t.e],"î":[t.circumflex,t.i],"ô":[t.circumflex,t.o],"û":[t.circumflex,t.u],"ŷ":[t.circumflex,t.y],"¨":[t.diaeresis,t.diaeresis],"ä":[t.diaeresis,t.a],"ë":[t.diaeresis,t.e],"ï":[t.diaeresis,t.i],"ö":[t.diaeresis,t.o],"ü":[t.diaeresis,t.u],"ÿ":[t.diaeresis,t.y]}),new e(t)}(),i4t.api=class Api extends i4t.base{static get#projectApiUrl(){switch(i4t.config.get("environment")){case"insuit.local":return"https://insuit.local:8080/i4tproject";case"dev.insuit.local:9443":return"http://localhost:8765/i4tproject";default:return i4t.config.get("url.projects")}}static get#serviceApiUrl(){switch(i4t.config.get("environment")){case"insuit.local":return"https://insuit.dev/i4tservice";case"dev.insuit.local:9443":return"http://localhost:8765/i4tservice";default:return i4t.config.get("url.services")}}static getJSProjectScript({host:t,version:e}){if(t)return e=this.getParamsAsQuery({version:e}),this.#projectApiUrl+`/${t}/resources.js`+e;throw new Error("No se ha pasado el parámetro requerido host")}static async getProjectConfig({host:t,version:e}){if(t)return e=this.getParamsAsQuery({version:e}),i4t.ajax.get({url:this.#projectApiUrl+`/${t}/config`+e});throw new Error("No se ha pasado el parámetro requerido host")}static async checkProjectExist({host:t}){if(t)return i4t.ajax.head({url:this.#projectApiUrl+`/${t}/config`});throw new Error("No se ha pasado el parámetro requerido host")}static async downloadPDF({host:t,url:e,timestamp:i}){if(!t)throw new Error("No se ha pasado el parámetro requerido host");if(e)return e=this.getParamsAsQuery({url:e,timestamp:i}),i4t.ajax.get({url:this.#serviceApiUrl+`/${t}/pdf`+e});throw new Error("No se ha pasado el parámetro requerido url")}static async getHeadersFromURL({host:t,url:e}){if(!t)throw new Error("No se ha pasado el parámetro requerido host");if(e)return e=this.getParamsAsQuery({url:e}),i4t.ajax.get({url:this.#serviceApiUrl+`/${t}/header`+e});throw new Error("No se ha pasado el parámetro requerido url")}static async processAudioInASR({host:t,lang:e,timestamp:i,file:r}){if(!t)throw new Error("No se ha pasado el parámetro requerido host");if(!e)throw new Error("No se ha pasado el parámetro requerido lang");if(r)return i=this.getParamsAsQuery({timestamp:i}),i4t.ajax.post({url:this.#serviceApiUrl+`/${t}/asr/`+e+i,parameters:{file:r}});throw new Error("No se ha pasado el parámetro requerido file")}static async generateAudioFromTTS({host:t,lang:e,contenttype:i,aloud_id:r,ssml:n}){if(!t)throw new Error("No se ha pasado el parámetro requerido host");if(!e)throw new Error("No se ha pasado el parámetro requerido lang");if(!i)throw new Error("No se ha pasado el parámetro requerido contenttype");if(n)return r=this.getParamsAsQuery({aloud_id:r}),i4t.ajax.post({url:this.#serviceApiUrl+`/${t}/tts/${e}/`+i+r,parameters:{ssml:n}});throw new Error("No se ha pasado el parámetro requerido ssml")}static async clientConfig({random:t,i:e,t:i,m:r,p:n,u:s,s:a}){if(!t)throw new Error("No se ha pasado el parámetro requerido random");if(!e)throw new Error("No se ha pasado el parámetro requerido i");if(!i)throw new Error("No se ha pasado el parámetro requerido t");if(!r)throw new Error("No se ha pasado el parámetro requerido m");if(a)return e=this.getParamsAsQuery({i:e,t:i,m:r,p:n,u:s,s:a}),i4t.ajax.get({url:this.#serviceApiUrl+"/config/"+t+e});throw new Error("No se ha pasado el parámetro requerido s")}static getParamsAsQuery(t){return Object.entries(t).length?"?"+Object.entries(t).filter(([,t])=>!!t).map(([t,e])=>t+"="+e).join("&"):""}},i4t.js.roles=class roles extends i4t.base{static insuitUuid="data-insuit-uuid";static getMain(){var t=i4t.find("*[role=main], main:not([role=none]):not([hidden]):not([aria-hidden=true])"),t=this.getRoleByElement(t);return!i4t(t).isUndefinedOrNull()&&t instanceof i4t.js.roles.mainRole?t:null}static getRoleByAnchorHash(e){var i,r,n=t=>{var e,t=t.nextSibling();return i4t(t).isUndefinedOrNull()?i4t(null):(e=this.getRoleByElement(t),!i4t(e).isUndefinedOrNull()&&e instanceof i4t.js.roles.AbstractRole&&!e.isHidden()?i:n(t))};if(!i4t(e).isNullOrEmptyString()&&0===e.indexOf("#")&&1<e.length){e=e.replace("#","");try{r=i4t.find('*[name="'+e+'"], *[id="'+e+'"]')}catch(t){i4t.logger.warning('No se hapodido buscar: *[name="'+e+'"], *[id="'+e+'"]',t),r=i4t(null)}if(r.isElement()&&!i4t(e).isNullOrEmptyString()){if(i=this.getRoleByElement(r),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole)return i;if(i=this.getRoleByElement(r.parent()),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole)return i;if(i=n(r),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole)return i}}return null}static getRoleByElement(t){return i4t(t).isElement()?(t instanceof i4t.constructor?t.val():t)["data-insuit-role-object"]:null}static getParentRole(t){var e,t=(t=i4t(t)).parent();return t.isElement()?(e=i4t.js.roles.getRoleByElement(t.val()),i4t(e).isUndefinedOrNull()?this.getParentRole(t):e):null}},i4t.js.roles.AbstractRole=class AbstractRole extends i4t.base{element;md5;mutations=[];isModified=!1;descendentChildren=[];observerTimeout=!1;timeToLiveSleep=250;liveEvent={timer:null,type:null};children=[];#DATA_LABEL_ARRAY="I4T_DATA_LABEL_ARRAY";#SELECTED_ATTR="data-insuit-selected";#HOVER_ATTR="data-insuit-hover";#roleWhenInsuitLoads=()=>{this.whenInsuitActive()};#roleWhenInsuitUnload=()=>{this.whenInsuitDeactivate()};constructor(t){super(),this.element=t;var e,t=i4t(this.element);t.isElement()&&(e=i4t.js.roles.getRoleByElement(this.element),i4t(e).isUndefinedOrNull()||e.destroy(),this.element["data-insuit-role-object"]=this,t.attr(i4t.js.roles.insuitUuid,i4t.generateUUID()),this.checkStates())}getCleanClone(e,i){try{for(var t=i4t(document).createTreeWalker(e,NodeFilter.SHOW_TEXT),r=t.nextNode();r;)!i4t(r.textContent).trim().isNullOrEmptyString()&&r.parentNode?.dataset&&i4t(r.parentNode?.dataset?.insuitUuid).isUndefinedOrNull()&&(r.parentNode.dataset.insuitUuid=i4t.generateUUID()),r=t.nextNode();i4t(e).findAll("img:not(["+i4t.js.roles.insuitUuid+"])").each(function(){this.isElement()&&this.attr(i4t.js.roles.insuitUuid,i4t.generateUUID())});var n=i4t(e).clone().val();return"html"===n.nodeName.toLowerCase()&&i4t(n).findAll("#"+i4t.config.get("generalContainer")+",head").each(function(){this.remove()}),i4t(n).findAll("script, noscript, style, link, map").each(function(){this.remove()}),this.removeEmptyOrNotVisibleImgs(n),i4t(i).isFunction()&&i(n),i4t([]).each(function(){this.remove()}),i4t.findAll("*[aria-owns]").forEach(t=>this.removeChildrenIfHasOwnsFromOtherParent(t,n)),i4t(document.body).findAll("*[aria-controls]:not([aria-hidden=true])").each(function(){var t=this.attr("aria-controls"),e="*[id='"+t.replace("#","")+"']",i=i4t(n).find(e),e=i4t.find(e),e=i4t.js.roles.getRoleByElement(e),t=i4t.findAll("[aria-controls~='"+t+"']");!i.isElement()||i4t(e).isUndefinedOrNull()||e.isHidden()||1!==t.length()||i.remove()}),i4t(n).findAll("*[aria-labelledby]").each(function(){var t,e="",i=this.attr("aria-labelledby");if(!i4t(i).isNullOrEmptyString()){for(var i=i.split(" "),r=0;r<i.length;r++)t="*[id='"+i[r].replace("#","")+"']",(t=i4t(document.body).find(t)).isElement()&&(e+=t.html());i4t(e).isNullOrEmptyString()||this.html(e)}}),i4t(n).findAll("label[for]").each(function(){var t=this.attr("for");i4t(t).isNullOrEmptyString()||(t="*[id='"+t.replace("#","")+"']",(t=this.find(t)).isElement()&&this.before(t),this.remove())}),i4t(document.body).findAll("*[aria-describedby]").each(function(){var t,e=this.attr("aria-describedby");if(!i4t(e).isNullOrEmptyString())for(var e=e.split(" "),i=0;i<e.length;i++)t="*[id='"+e[i].replace("#","")+"']",(t=i4t(n).find(t)).isElement()&&t.remove()}),i4t(document.body).findAll("*[aria-detail]").each(function(){var t=this.attr("aria-detail");i4t(t).isNullOrEmptyString()||(t="*[id='"+t.replace("#","")+"']",(t=i4t(n).find(t)).isElement()&&t.remove())}),i4t(n).findAll("br").each(function(){this.html(".")}),i4t(n).findAll('*[aria-hidden="true"]').each(function(){this.remove()}),this.#improveTimeElementsReading(n),n}catch(t){i=i4t(e).isElement()?i4t(e).cssPath():"";i4t.logger.warning("No se ha podido clonar y limpiar el elemento: "+i,t)}return null}removeEmptyOrNotVisibleImgs(t){i4t(t).findAll("img").each(function(){"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&""!==this.attr("alt")||this.remove()})}removeChildrenIfHasOwnsFromOtherParent(t,e){var i=i4t(t).attr("aria-owns"),r=i4t.js.roles.getRoleByElement(t);i4t(i).isNullOrEmptyString()||t===this.element||!i4t(r).isUndefinedOrNull()&&r.popupParent===this||(t="*[id='"+i4t(i).trim().val().replace(/\s+/gi,"'], *[id='")+"']",i4t(e).findAll(t).each(function(){this.remove()}))}#improveTimeElementsReading(t){i4t(t).findAll("time").forEach(t=>{var e=/^(([0-9-]+)+).*$/,i=(t=i4t(t)).attr("datetime");i4t(i).isNullOrEmptyString()||(e.test(i)&&(t.value.textContent=i.replace(e,"$1"),/^[0-9]+$/.test()&&t.attr("data-ssml-say-as","date:y"),/^[0-9]+\/[0-9]+$/.test()&&t.attr("data-ssml-say-as","date:ym"),t.attr("data-ssml-say-as","date:ymd")),/^[0-9:.]+$/.test(i)&&(t.value.textContent=i,t.attr("data-ssml-say-as","time")))})}replaceRoles(t,e,r=0){let n=1,s=i4t(t),i,a=s.attr("aria-owns"),l=i4t(e),o;s.findAll('img:not([aria-hidden="true"]):not([role])').forEach(t=>{var e=(t=i4t(t)).attr(i4t.js.roles.insuitUuid),i=new i4t.js.roles.imgRole(t.value),r=t.before('<p class="'+this.#DATA_LABEL_ARRAY+'">'+this.#DATA_LABEL_ARRAY+"</p>");i4t(e).isNullOrEmptyString()?e=t.attr(i4t.js.roles.insuitUuid):(i[i4t.js.roles.insuitUuid]=e,t.attr(i4t.js.roles.insuitUuid,e)),r.attr(i4t.js.roles.insuitUuid,e),r.val()[this.#DATA_LABEL_ARRAY]=i.ssmlLabelList(),t.remove()}),l.isArray()&&l.forEach(t=>{var e,i;(t=i4t(t)).isUndefinedOrNull()||(i=t.val().getId(),(e=i4t(document).createElement("p")).textContent=this.#DATA_LABEL_ARRAY,(i=s.find("*["+i4t.js.roles.insuitUuid+"='"+i+"']")).isElement()?(i.val().dataset.insuitUuid&&(e.dataset.insuitUuid=i.val().dataset.insuitUuid),i.replace(e)):(t.val().element.dataset.insuitUuid&&(e.dataset.insuitUuid=t.val().element.dataset.insuitUuid),s.append(e)),e[this.#DATA_LABEL_ARRAY]=t.val().ssmlLabelList(""+(n+r)),e.id=t.val().element.id,e.roleObject=t.val(),n++)}),i4t(a).isNullOrEmptyString()||(i=(a=i4t(a).trim().val()).replace(/(\S+)(\s|$)/gi,'*[id="$1"],').slice(0,-1),o=i4t(a.split(" ")),(l=(l=s.findAll(i)).sort(function(t,e){t=o.indexOf(t.id),e=o.indexOf(e.id);return e<t?1:t<e?-1:0})).each(function(){s.append(this.val())}))}checkTextRoles(t,e){var i=i4t(t),t=i4t(e);i.findAll('img:not([aria-hidden="true"]):not([role])').each(function(){var t=new i4t.js.roles.imgRole(this.val());this.before("<p>"+t.getStringTitle()+"</p>").attr(i4t.js.roles.insuitUuid,this.attr(i4t.js.roles.insuitUuid)),this.remove()}),t.isUndefinedOrNull()?i.findAll("*[role]").each(function(){this.remove()}):t.isArray()&&t.each(function(){var t,e;this.isUndefinedOrNull()||(e=this.val().getId(),t=i4t(document).createElement("p"),(e=i.find("*["+i4t.js.roles.insuitUuid+"='"+e+"']")).isElement()&&i4t(e.text()).isNullOrEmptyString()&&(e.val().dataset.insuitUuid&&(t.dataset.insuitUuid=e.val().dataset.insuitUuid),e.replace(t),t.textContent=this.val().getStringTitle()))})}getTextContent(i,r){var t=this.getCleanClone(i,t=>{var e=r?i4t(i).findAll('*[role]:not([aria-hidden="true"]), a:not([aria-hidden="true"]):not([role]), select:not([aria-hidden="true"]):not([role]), option:not([aria-hidden="true"]):not([role]), input:not([aria-hidden="true"]):not([role]):not([type=hidden]), textarea:not([aria-hidden="true"]):not([role]), button:not([aria-hidden="true"]):not([role]), video:not([aria-hidden="true"]):not([role]), audio:not([aria-hidden="true"]):not([role]), *[data-insuit-role]:not([aria-hidden="true"]):not([role])').each(function(){return i4t.js.roles.getRoleByElement(this.val())}):null;this.checkTextRoles(t,e)});return i4t(t).isUndefinedOrNull()?"":i4t(i4t(t).text()).trim().val()}#getSayAs(t){if(i4t(t).isElement()){var e=i4t(t).attr("data-ssml-say-as");if(!i4t(e).isNullOrEmptyString())return{interpretedAs:(e=e.split(":"))[0],format:e[1]};switch(t.nodeName.toUpperCase()){case"ADDRESS":return{interpretedAs:"address",format:null};case"TIME":return/^[0-2]?\d:[0-5]\d(:[0-5]\d)?$/.test(t.textContent)?{interpretedAs:"time",type:null}:{interpretedAs:"date",format:null}}}return null}#checkSayAs(t,e,i){var r=i?"]]>":"",i=i?"<![CDATA[":"",t=this.#getSayAs(t);return i4t(t).isUndefinedOrNull()?e:r+'<say-as interpret-as="'+t.interpretedAs+'"'+(i4t(t.format).isUndefinedOrNull()?"":' format="'+t.format+'"')+">"+e+"</say-as>"+i}#checkSub(t,e,i){var r=i?"]]>":"",i=i?"<![CDATA[":"",t=i4t(t).attr("data-ssml-sub-alias");return i4t(t).isNullOrEmptyString()?e:r+'<sub alias="'+t+'"><![CDATA['+e+"]]></sub>"+i}ssmlSentence(t,e,i,r){let n="<![CDATA["+e+"]]>",s=i4t(t).getLang();return i4t(s).isNullOrEmptyString()&&(s=r),i4t(s).isNullOrEmptyString()&&(s=i4t.config.getLanguage()),null!=i4t(t).attr("data-ssml-say-as")||null!=i4t(t).attr("data-ssml-sub-alias")?(n=e,n=this.#checkSub(t,n,!1),{text:n=this.#checkSayAs(t,n,!1),lang:s,textNodes:[t.dataset?.insuitUuid]}):{text:n=i&&0==t.querySelectorAll("*[role]").length&&0<t.querySelectorAll("*[data-ssml-say-as]:not(:empty), *[data-ssml-alias-sub]:not(:empty)").length?this.checkSsmlSentencesOnChildrenNodes(t):n,lang:s,textNodes:[t.dataset?.insuitUuid]}}checkSsmlSentencesOnChildrenNodes(t){for(var e,i,r,n="<![CDATA[";r<t.childNodes.length;r++){if(e=(i=t.childNodes[r]).textContent.trim().concat(" "),i4t(i).isElement()&&null!=i4t(i).attr("data-ssml-sub-alias"))return void(n+=this.#checkSub(i,e,!0));if(i4t(i).isElement()&&null!=i4t(i).attr("data-ssml-say-as"))return void(n+=this.#checkSayAs(i,e,!0));n=n.concat(e)}return n+"]]>"}getPartialSSMLText(t,e,i){var r=[],t=t.currentNode,n=0<e.length?e[e.length-1]:null,s={text:"",textNodes:[t.parentNode?.dataset?.insuitUuid]},i=this.ssmlSentence(t.parentNode,t.textContent.replace(/\s\s+/g," "),!1,i);return!i4t(n).isUndefinedOrNull()&&i4t(n.textNodes).isArray()&&0<n.textNodes.length&&!i4t(n.textNodes[n.textNodes.length-1]).isUndefinedOrNull()&&(i4t(t.parentNode.parentNode).isElement()&&!i4t(t.parentNode.parentNode.dataset?.insuitUuid).isUndefinedOrNull()&&n.textNodes[n.textNodes.length-1]===t.parentNode.parentNode.dataset.insuitUuid||n.textNodes[n.textNodes.length-1]===s.textNodes[s.textNodes.length-1])&&(s=e.at(-1),i4t(s.text).startsWith("<s>"))&&i4t(s.text).endsWith("</s>")&&((s=e.pop()).text=s.text.substring("<s>".length,s.text.length-"</s>".length),r.push(s)),r.push(i),r}getSsmlSentencesList(t,e){let i=[];return(i=i4t(e).isUndefinedOrNull()?i:this.walkCloneAndExtractTexts(e,t)).forEach(function(t){i4t(t.text).startsWith("<s>")&&i4t(t.text).endsWith("</s>")||(t.text="<s>"+t.text+"</s>")}),i}walkCloneAndExtractTexts(t,e){let i,r=[],n,s,a,l,o,c,d=i4t(e).getLang();for(n=i4t(document).createTreeWalker(t,NodeFilter.SHOW_TEXT),i=n.nextNode();i;)(l=i4t(i.parentElement)).isElement()&&l.hasAttribute?.("lang")&&(o=i4t.config.getValidLanguage(l.attr("lang")),c=l.value),i=((s=i4t(i.textContent).trim()).isNullOrEmptyString()||(s.val()===this.#DATA_LABEL_ARRAY?r=r.concat(i.parentNode[this.#DATA_LABEL_ARRAY]):(a=this.getPartialSSMLText(n,r,d),i4t(o).isNullOrEmptyString()||(l.isElement()&&(l.value===c||l.isContainedBy(c))?a.lang=o:(o="",c=null)),r.push(...a))),n.nextNode());return r}#replaceAndRemovedRoles(t){i4t(t).findAll('img:not([aria-hidden="true"]):not([role])').forEach(t=>{var e=new i4t.js.roles.imgRole(t),i=i4t(t).before('<p class="'+this.#DATA_LABEL_ARRAY+'">'+this.#DATA_LABEL_ARRAY+"</p>");i.attr(i4t.js.roles.insuitUuid,i4t(t).attr(i4t.js.roles.insuitUuid)),i.val()[this.#DATA_LABEL_ARRAY]=e.ssmlLabelList(),i4t(t).remove()}),i4t(t).findAll("*[role]:not([role=none]):not([role=presentation])").each(function(){this.remove()})}getCSSValue(t,e){t=(t=i4t(t).css(e)).replace("px","");return t=parseInt(t,10),isNaN(t)?0:t}checkStates(){i4t(this.element).isElement()&&this.element.disabled&&i4t(this.element).attr("aria-disabled","true")}getId(){return i4t(this.element).isElement()?this.element.dataset.insuitUuid:null}isHidden(){let t,e,i=i4t(this.element);do{if(t="true"===i.attr("aria-hidden"),e="true"===i.attr(this.#SELECTED_ATTR),t&&!e)return!0}while((i=i.parent()).isElement());return!1}getRoleText(){var t,e=i4t(this.element).attr("aria-roledescription");return i4t(e).isNullOrEmptyString()?(t=i4t(this.element).attr("role"),t=i4t(t).isNullOrEmptyString()?this.type:t+"Role",i4t.js.services.I18nService.get("role_"+t)):e}toAction(){return this.hasCancelClick()||(i4t(this.element).click(),this.dispatchInsuitClick()),!1}dispatchInsuitClick(){var t=i4t(this.element).attr("data-insuit-click");if(!i4t(t).isNullOrEmptyString())try{i4t.execute(t,this.element)}catch(t){i4t.logger.warning("No se ha podido ejecutar el evento 'data-insuit-click' sobre el elemento: "+this.getPath(),t)}}getElemsInArea(t){var e=[],i=i4t(this.element),r=this;return this.autoParser()&&i.findAll(t).each(function(){(t=>{do{for(var e,i=0;i<r.children.length;i++)if(e=r.children[i].element,t.val()===e)return!1}while(t=t.parent(),i4t(t).isElement()&&t.val()!==r.element);return!0})(this)&&e.push(this.val())}),i4t(e)}autoParser(){var t=i4t(this.element);return!(!t.isElement()||!i4t(t.attr("data-insuit-parser")).isNullOrEmptyString())}getIdFromControl(){var t=i4t(this.element);return t.isElement()?t.attr("aria-controls"):null}isAreaControledBy(t){var e=i4t(this.element);return!!e.isElement()&&(t=i4t(t.getIdFromControl()),e=e.attr("id"),!i4t(e).isNullOrEmptyString())&&!t.isNullOrEmptyString()&&t.contains(e)}text(){return this.getTextContent(this.element,!0)}textContent(){return this.getTextContent(this.element,!1)}getStringTitle(){var t="",e=i4t(this.getLabelObject());return e.isString()&&!e.isNullOrEmptyString()?e.val():e.isElement()?this.getTextContent(e.val(),!1):e.isArray()?(e.each(function(){i4t(t).isNullOrEmptyString()||(t+=" "),t+=this.getTextContent(this.val(),!1)}),t):""}getAriaLabel(){var t,e,i=[],r=i4t(this.element);if(r.isElement()){if(t=r.attr("aria-label"),!i4t(t).isNullOrEmptyString())return t;if(t=r.attr("aria-labelledby"),!i4t(t).isNullOrEmptyString()){for(var n=t.split(" "),s=0;s<n.length;s++)e=n[s],(r=i4t.find('*[id="'+(i4t(e).startsWith("#")?e.substring(1,e.length):e)+'"]')).isElement()&&i.push(r.val());if(0<i.length)return 1===i.length?i[0]:i}}return null}getElementLabel(){var t=i4t(this.element);return t.isElement()&&(t=t.attr("title"),!i4t(t).isNullOrEmptyString())?t:null}getElementsDescribed(){var e=[],t=i4t(this.element).attr("aria-describedby");return i4t(t).isNullOrEmptyString()||i4t(t.split(" ")).each(function(){var t=i4t(document.body).find("[id='"+this.val()+"']");t.isElement()&&e.push(t)}),e}getLabelObject(){var t=this.getAriaLabel();return i4t(t).isUndefinedOrNull()&&(t=this.getElementLabel(),i4t(t).isUndefinedOrNull())?null:t}ssmlLabelList(t="",e=""){var i,r=[],n="",s=this.getRoleText(),a=i4t(this.getLabelObject());return a.isString()&&!a.isNullOrEmptyString()?(a=this.ssmlSentence(this.element,a.val(),!0),i4t(t).isString()&&!i4t(t).isNullOrEmptyString()&&(t+=", "),i4t(s).isNullOrEmptyString()||(t+=s),i4t(t).isNullOrEmptyString()||r.push({text:"<s><![CDATA["+t+"]]></s>",textNodes:[this.element.dataset.insuitUuid],role:this.getUUID()}),r.push(a),i4t(e).isString()&&!i4t(e).isNullOrEmptyString()&&r.push({text:"<s><![CDATA[, "+e+"]]></s>",textNodes:[this.element.dataset.insuitUuid],role:this.getUUID()})):(a.isElement()&&(i=this.getCleanClone(a.val(),t=>this.#replaceAndRemovedRoles(t)),r=this.getSsmlSentencesList(a.val(),i)),a.isArray()&&a.forEach(t=>{i=this.getCleanClone(t,t=>this.#replaceAndRemovedRoles(t)),r=r.concat(this.getSsmlSentencesList(t,i))}),i4t(s).isNullOrEmptyString()?i4t(t).isString()&&!i4t(t).isNullOrEmptyString()&&r.unshift({text:"<s><![CDATA["+t+"]]></s>",role:this.getUUID()}):(i4t(t).isString()&&!i4t(t).isNullOrEmptyString()&&(n=t+", "),r.unshift({text:"<s><![CDATA["+(n+=s)+"]]></s>",role:this.getUUID()})),i4t(e).isString()&&!i4t(e).isNullOrEmptyString()&&r.push({text:"<s><![CDATA["+e+"]]></s>",role:this.getUUID()})),t=i4t(this.element).attr("aria-detail"),i4t(t).isString()&&!i4t(t).isNullOrEmptyString()&&(a=i4t.find('*[id="'+t+'"]')).isElement()?(i=this.getCleanClone(a.val(),t=>this.#replaceAndRemovedRoles(t)),r=r.concat(this.getSsmlSentencesList(a.val(),i))):(s=this.getElementsDescribed(),i4t(s).forEach(t=>{i=this.getCleanClone(t,t=>this.#replaceAndRemovedRoles(t)),r=r.concat(this.getSsmlSentencesList(t,i))}),this.isDisabled()&&r.push({text:"<s><![CDATA["+i4t.js.services.I18nService.get("form_element_disabled")+"]]></s>",role:this.getUUID()}),r)}ssmlContentList(t,e=0){var i=this,r=this.getCleanClone(this.element,t=>this.replaceRoles(t,i.children,e)),n=this.getSsmlSentencesList(this.element,r);return 0===n.length?this.ssmlLabelList():(800<n.length&&(i4t.logger.error("Hay más de 800 elementos con textos en el role actual. Por favor, reduce el tamaño del role, se acorta automaticamente"),n=n.slice(0,800)),i4t(t).isArray()&&i4t(t).reverse().each(function appendDetails(){n.unshift({text:"<s><![CDATA["+this.val()+"]]></s>",role:i.getUUID()})}),r=this.getRoleText(),i4t(r).isNullOrEmptyString()||n.unshift({text:"<s><![CDATA["+r+"]]></s>",role:this.getUUID()}),n)}ssmlContentLang(){var t=i4t.config.getValidLanguage(i4t(this.element).attr("lang"));return i4t(t).isNullOrEmptyString()?i4t.config.getLanguage():t}getSsmlTextContent(){let t={text:"",id:this.getId()},e,i=this,r=this.getCleanClone(this.element,function(t){i.replaceRoles(t,null)});return e=this.getSsmlSentencesList(this.element,r),i4t(e).each(function(){t.text+=this.val().text}),t}getPath(){return i4t(this.element)?.cssPath()??"No se pudo obtener el path del elemento"}isVisible(){var t=i4t(this.element).attr("data-insuit-visibility");return!i4t(t).isNullOrEmptyString()&&"true"===t||"area"===this.element.tagName.toLowerCase()||i4t(this.element).isVisible()}getVisibleLength(){return this.getVisibleChildren().length}getVisibleChildren(){var t=i4t(this.children),e=[];return t.each(function(){this.val().isVisible()&&e.push(this.val())}),e}isFixed(){return i4t(this.element).isFixed()}dispatchEvent(t,e){return i4t.event.dispatch(t,this.element,e)}getMargin(){var t=this.element.getAttribute("data-insuit-margin");return i4t(t).isNullOrEmptyString()?0:t}calculateData(t,e){if(!i4t(e).isNullOrEmptyString()){var i=parseInt(e.replace("%","").replace("px",""),10);if(!isNaN(i))return i4t(e).endsWith("%")&&(i=t*i/100),i4t(e).startsWith("+")||i4t(e).startsWith("-")?t+i:i}return t}zIndex(){var t=i4t(this.element),e=t.zIndex(),t=t.attr("data-insuit-z-index");return i4t(t).isNullOrEmptyString()&&(t="+1"),this.calculateData(e,t)+10}getWidth(){var t,e=this.element.offsetWidth,i=i4t(this.element).attr("data-insuit-width");return i4t.css.hasRotation(this.element)&&(t=i4t.css.getRotationAngle(this.element),t=Math.PI/180*t,e=Math.abs(Math.sin(t))*this.element.offsetHeight+Math.abs(Math.cos(t))*this.element.offsetWidth),this.element instanceof SVGElement?this.calculateData(this.element.getBoundingClientRect().width,i):this.calculateData(e,i)}getHeight(){var t,e=this.element.offsetHeight,i=i4t(this.element).attr("data-insuit-height");return i4t.css.hasRotation(this.element)&&(t=i4t.css.getRotationAngle(this.element),t=Math.PI/180*t,e=this.element.offsetWidth*Math.abs(Math.sin(t))+this.element.offsetHeight*Math.abs(Math.cos(t))),this.element instanceof SVGElement?this.calculateData(this.element.getBoundingClientRect().height,i):this.calculateData(e,i)}getLeft(){var t,e=i4t(this.element).offset().left,i=i4t(this.element).attr("data-insuit-left");return this.element instanceof SVGElement?this.calculateData(this.element.getBoundingClientRect().left,i):"inline"===i4t(this.element).css("display")?(t=i4t.css.getFirstDomRect(this.element),this.calculateData(t?t.left:e,i)):this.calculateData(e,i)}getTop(){var t=i4t(this.element).offset().top,e=i4t(this.element).attr("data-insuit-top");return this.calculateData(t,e)}getTotalLeft(){return this.getLeft()+this.getCSSValue(this.element,"margin-left")+this.getCSSValue(this.element,"padding-left")}getTotalTop(t){return t?this.getTop()+i4t(this.element).offset().height-this.getCSSValue(this.element,"margin-bottom")+this.getCSSValue(this.element,"padding-bottom"):this.getTop()+this.getCSSValue(this.element,"padding-top")}previousSibling(){if(!i4t(this.parent).isUndefinedOrNull()&&this.parent instanceof i4t.js.roles.AbstractRole)for(var t=0;t<this.parent.children.length;t++)if(this.parent.children[t].element===this.element)return 0===t?null:this.parent.children[t-1];return null}isAscendant(t){return!!i4t(this.parent).isObject()&&(t.element===this.parent.element||this.parent.isAscendant(t))}nextSibling(){var t;if(i4t(this.element).hasAttribute("aria-flowto")&&(t=i4t.find("[id='"+i4t(this.element).attr("aria-flowto")+"']"),(t=i4t.js.roles.getRoleByElement(t.val()))instanceof i4t.js.roles.AbstractRole))return t;if(!i4t(this.parent).isUndefinedOrNull()&&this.parent instanceof i4t.js.roles.AbstractRole)for(var e=0;e<this.parent.children.length;e++)if(this.parent.children[e].element===this.element)return e+1===this.parent.children.length?null:this.parent.children[e+1];return null}getChildElem(t){if(i4t(t).isElement())for(var e=0;e<this.children.length;e++)if(this.children[e].element===t)return this.children[e];return null}removeChild(t){if(t instanceof i4t.js.roles.AbstractRole)for(var e=0;e<this.children.length;e++)if(this.children[e].element===t.element)return this.children.splice(e,1),!0;return!1}indexOfChild(t){if(t instanceof i4t.js.roles.AbstractRole)for(var e=0;e<this.children.length;e++)if(this.children[e].element===t.element)return e;return-1}async reload({isForce:t,firstTime:e}={isForce:!1,firstTime:!1}){var i;i4t(this.element).isElement()&&(this.isDynamic()&&this.reloadElementDynamic(),i=this.parent,await i4t.js.services.MapperService.run(this,!!e,t),t&&(this.parent=i,!i4t(this.parent).isUndefinedOrNull())&&this.parent instanceof i4t.js.roles.AbstractRole&&this.parent.indexOfChild(this)<0&&i.children.push(this),e=i4t(i4t(this.element).text()).trim().val(),i4t.asyncExecute(i4t.md5,[e],t=>{this.md5=t}))}removeObserver(){i4t(this.observer).isUndefinedOrNull()||(this.observer.disconnect(),this.observer=null)}isAssertiveLiveZone(){var t=i4t(this.element);return!!t.isElement()&&(t=t.attr("aria-live"),!i4t(t).isNullOrEmptyString())&&"assertive"===t}setObserver(n){if(i4t(this.observer).isUndefinedOrNull()){let t,e=i4t(this.element),i={},r=i4t(e.attr("aria-relevant"));(r=-1<(r=r.isNullOrEmptyString()?i4t(["additions","text"]):i4t(i4t(r).trim().val().split(" "))).indexOf("all")?i4t(["additions","removals","text"]):r).indexOf("text")<0?i.attributes=!1:(t=i4t(e.text()).trim().val(),i4t.asyncExecute(i4t.md5,[t],t=>{this.md5=t})),this.observer=e.addObserver(t=>{let e=!1,i=(t,e)=>("attributes"!==t.type||"title"===t.attributeName||"alt"===t.attributeName||"aria-hidden"===t.attributeName||"aria-label"===t.attributeName||"aria-labelledby"===t.attributeName||"placeholder"===t.attributeName)&&(i4t(e.md5).isNullOrEmptyString()&&(e.md5=i4t.md5(i4t(i4t(this.element).text()).trim().val())),this.md5!==e.md5);-1<r.indexOf("text")&&(e=i(t,this)),-1<r.indexOf("removals")&&0<t.removedNodes.length&&(e=!0,this.mutations.push(t)),-1<r.indexOf("additions")&&0<t.addedNodes.length&&(e=!0,this.mutations.push(t)),e&&(this.isModified=!0,i4t.logger.debug(()=>`Evento de mutación de role: { 
                        roletype:${this.type},
                        element: "${this.getId()},
                        mutation: { type: ${t.type}, attributeName:${t.attributeName},
                        addedNodes: ${t.addedNodes.length},
                        removedNodes: ${t.removedNodes.length}}`))},()=>{this.observerTimeout&&window.clearTimeout(this.observerTimeout),this.observerTimeout=i4t(()=>{this.isModified&&i4t(n).isFunction()&&n.call(this),this.isModified=!1,this.observerTimeout=!1}).delay(.7)},i)}}onLiveEvent(t,e){i4t.js.services.ModelService.isLoading&&"assertive"!==t?i4t(()=>this.onLiveEvent(t,e)).delay(1):(i4t(this.liveEvent.timer).isUndefinedOrNull()||t!==this.liveEvent.type||window.clearTimeout(this.liveEvent.timer),this.liveEvent={timer:i4t(async t=>{this.liveEvent.timer=null,this.liveEvent.type=null,e&&await this.reload(),i4t(i4t.event.insuit).isUndefinedOrNull()||this.#dispatchAriaLiveEvent(t)}).delay(this.timeToLiveSleep/1e3,t),type:t})}setPoliteObserver(){var t=this;this.setObserver(function(){t.onLiveEvent("polite",!0)})}setAssertiveObserver(){var t=this;this.setObserver(function(){t.onLiveEvent("assertive",!0)})}getObjectiveForBusyAriaControlsIfExist(t){var e=this.getAreaSelected();return!e.isElement()||"true"!==e.attr("aria-busy")||i4t(e.attr("aria-controls")).isNullOrEmptyString()?i4t(null):(e=e.attr("aria-controls"),t.attr("id")===e?t:t.find('*[id="'+e+'"]'))}onLoad(t){t()}getMain(){return i4t.js.roles.getMain()}setAreaSelected(){var t=i4t(this.element);if(t.isElement())for(t.attr(this.#SELECTED_ATTR,"true"),t.attr(this.#HOVER_ATTR,"");(t=t.parent()).isElement();)t.attr(this.#HOVER_ATTR,"")}removeAreaSelected(){var t=i4t(this.element);if(t.isElement())for(t.removeAttr(this.#SELECTED_ATTR),t.removeAttr(this.#HOVER_ATTR);(t=t.parent()).isElement();)t.removeAttr(this.#HOVER_ATTR)}getAreaSelected(){return i4t.find("["+this.#SELECTED_ATTR+"=true]")}isAreaSelected(){var t=i4t(this.element);return t.isElement()&&"true"===t.attr(this.#SELECTED_ATTR)}isInForm(){return!!this.isForm()||!!i4t(this.parent).isObject()&&this.parent.isInForm()}isForm(){var t=i4t(this.element).attr("data-insuit-form");return!i4t(t).isNullOrEmptyString()&&"true"===t||this instanceof i4t.js.roles.formRole||this instanceof i4t.js.roles.searchRole}isFormOption(){return this instanceof i4t.js.roles.AbstractRoleForm||this instanceof i4t.js.roles.buttonRole}getNavigatorClass(){return"DefaultNavigator"}getSayAs(){return this.#getSayAs(this.element)}isBusy(){return!i4t(i4t(this.element).attr("aria-busy")).isNullOrEmptyString()&&"true"===i4t(this.element).attr("aria-busy")}isDisabled(){return"true"===i4t(this.element).attr("aria-disabled")}isAtomic(){return"true"===i4t(this.element).attr("aria-atomic")}hasCancelClick(){return"true"===i4t(this.element).attr("data-insuit-cancel-click")}getErrorMessageElement(){var t=i4t(this.element).attr("aria-errormessage");return i4t(t).isNullOrEmptyString()?i4t(null):i4t.find('[id="'+t+'"]')}getAriaInvalidMessage(){let t=i4t(this.element),e=t.attr("aria-invalid"),i=this.getErrorMessageElement(),r="";if(i4t(i).isElement()&&(r=i.text()),!i4t(r).isNullOrEmptyString())return r;switch(e){case"grammar":return i4t.js.services.I18nService.get("aria-invalid-error-spelling");case"spelling":return i4t.js.services.I18nService.get("aria-invalid-error-grammar");default:return""}}checkStatus(){i4t(this.element).isElement()&&this.element.disabled&&i4t(this.element).attr("aria-disabled","true")}destroy(){i4t.event.removeListener("insuit-load",this.#roleWhenInsuitLoads),this.removeObserver(),delete this.element["data-insuit-role-object"]}getUUID(){return i4t(this.element).attr(i4t.js.roles.insuitUuid)}addOwns(t){let e=i4t(this.element),i=i4t(e.attr("aria-owns"));i.isNullOrEmptyString()?e.attr("aria-owns",t):((i=i.split(" ")).includes(t)&&i.splice(i.indexOf(t)),e.attr("aria-owns",i.join(" ")+" "+t))}hasOwns(t){let e=i4t(this.element),i=i4t(e.attr("aria-owns"));return!i.isNullOrEmptyString()&&(i=i.split(" ")).includes(t)}init(){this.setRoleListeners(),i4t.isInsuitActive?this.whenInsuitActive():i4t.event.addListener("insuit-load",this.#roleWhenInsuitLoads),i4t.event.addListener("insuit-deactivate",this.#roleWhenInsuitUnload)}setRoleListeners(){}whenInsuitActive(){}whenInsuitDeactivate(){}#dispatchAriaLiveEvent(t){var e=this.getObjectiveForBusyAriaControlsIfExist(i4t(this.element));e.isElement()?(e=i4t.js.roles.getRoleByElement(e.val()),i4t(e).isUndefinedOrNull()||i4t.event.insuit.dispatch("aria-live-assertive",{dto:{role:e}})):i4t.event.insuit.dispatch("aria-live-"+("busy"===t?"assertive":t),{dto:{role:this}})}isDynamic(){return i4t(this.element).isElement()&&"true"===i4t(this.element).attr("data-insuit-dynamic")&&i4t(this.element).hasAttribute("data-insuit-dynamic-id")}exists(){return!!i4t(this.element).isInDOM()||!!this.isDynamic()&&(this.reloadElementDynamic(),i4t(this.element).isInDOM())}reloadElementDynamic(){let t=i4t(this.element),e="true"===t.attr(this.#SELECTED_ATTR);i4t.js.services.ModelService.setInDOM(),i4t.js.services.MapperService.setDynamicRoles(),(t=i4t.find(`[data-insuit-dynamic-id=${t.attr("data-insuit-dynamic-id")}]`)).isElement()&&t.isInDOM()&&(e&&t.attr(this.#SELECTED_ATTR,"true"),this.element=t.value)}isLandmark(){return/(banner|complementary|contentinfo|main|navigation|region)Role/.test(this.type)}},i4t.js.roles.AbstractRoleForm=class AbstractRoleForm extends i4t.js.roles.AbstractRole{grammar;constructor(t){super(t),t.readOnly&&i4t(t).attr("aria-readonly","true")}getLabelObject(){var t=this.getAriaLabel();return i4t(t).isUndefinedOrNull()&&(t=this.getElementLabel(),i4t(t).isUndefinedOrNull())?null:t}getElementLabel(){var t,e=super.getElementLabel(),i=i4t(this.element);return i.isElement()?i4t(e).isObject()?e:(e=i.attr("id"),!i4t(e).isNullOrEmptyString()&&(e=i4t.find('label[for="'+e+'"]')).isElement()?e.val():(e=i.attr("placeholder"),i4t(e).isNullOrEmptyString()&&("label"!==(t=i.parent()).val().nodeName.toLowerCase()||(i.attr("data-insuit-label-for-id","i4t-label-for-id"),t=t.clone(),i.removeAttr("data-insuit-label-for-id"),(i=t.find("[data-insuit-label-for-id=i4t-label-for-id]")).isElement()&&i.remove(),e=t.text(),i4t(e).isNullOrEmptyString()))?null:e)):null}toAction(){return!this.hasCancelClick()&&(this.element.disabled||this.element.isDisabled?void 0:(i4t(this.element).click(),this.dispatchInsuitClick(),!1))}getValue(){return this.element.value}isReadOnly(){return"true"===i4t(this.element).attr("aria-readonly")}isRequired(){var t=i4t(this.element),e=t.attr("aria-required"),t=t.attr("required");return!i4t(e).isNullOrEmptyString()&&"true"===e||!i4t(t).isUndefinedOrNull()}isInput(){return i4t(this.element).is("input")}getNavigatorClass(){return"AbstractFormNavigator"}},i4t.js.roles.AbstractCommandRole=class AbstractCommandRole extends i4t.js.roles.AbstractRole{#onClickListener=t=>{t.isTrusted&&this.setClickViaInsuit(t)};whenInsuitActive(){this.#rewriteClickBehavior()}whenInsuitDeactivate(){i4t.event.removeListener("click",this.#onClickListener,this.element,!0)}getLabelObject(){var t=this.getAriaLabel();return i4t(t).isUndefinedOrNull()&&(t=this.getElementLabel(),i4t(t).isUndefinedOrNull())?null:t}checkAnchor(t){t=i4t.js.roles.getRoleByAnchorHash(t);return!!i4t(t).isUndefinedOrNull()||(i4t(t.parent).isUndefinedOrNull()&&(t.parent=this.parent),t)}executeHREF(t){var e=t.href();return!i4t(e).isNullOrEmptyString()&&(0===e.toLowerCase().indexOf("javascript:")?(e=i4t.execute(e.replace("javascript:",""),t.val()),!i4t(e).isBoolean()||e):(i4t.event.dispatch("change-href",this.element),!0))}toAction(t){function VA(){n.click(),r.dispatchInsuitClick()}let e,i,r=this,n=i4t(this.getElemToAction());return!!n.isElement()&&(i4t(this.getIdFromControl()).isNullOrEmptyString()?(e=n.href(),i4t(e).isNullOrEmptyString()?(this.hasCancelClick()||VA(),this.children.length<1):0===e.indexOf("#")?(this.hasCancelClick()||VA(),!((i=this.checkAnchor(e))instanceof i4t.js.roles.AbstractRole)||i):(n.hasAttribute("download")?i4t.js.services.ContentTypeService.launchDownloadModal(e,VA):(i4t.event.insuit.dispatch("checking_accesible",{dto:t}),this.checkAccesible(e,function isAccesible(){i4t.event.dispatch("insuit-open-link",window,{element:n.value}),r.hasCancelClick()||VA(),r.executeHREF(n)},function isNotAccesible(){i4t.js.services.DomainService.launchConfirmModal(e,()=>{i4t.event.dispatch("insuit-open-link",window,{element:n.value}),VA()})})),!0)):(this.hasCancelClick()||VA(),!1))}removeTarget(){i4t(this.element).removeAttr("target")}async checkAccesible(t,e,i){if(0===t.indexOf("javascript:"))e();else{var r,n,s;if(await i4t.js.services.DomainService.isUrlAccesible(t))return n=i4t.config.get("project"),r=await i4t.js.services.ContentTypeService.getContentTypeInfo(t),n=!i4t(n).isUndefinedOrNull()&&n.isv8,r.isHTML&&!n?(s=await i4t.js.services.DomainService.getSuitDomain(t),i4t(s).isNullOrEmptyString()?void i():(this.changeDomainInDOMObject(s,t),void e())):void(r.isHTML&&n?e():r.isPdf?i4t.js.services.PdfService.launchPdfViewer(t):i4t.js.services.ContentTypeService.launchDownloadModal(t));i()}}getElemToAction(){var t,e=i4t(this.element);return e.isElement()?i4t(e.attr("onclick")).isNullOrEmptyString()&&i4t(e.attr("href")).isNullOrEmptyString()?(t=i4t(null),e.children().each(function(){if("a"===this.val().tagName.toLowerCase())return t=this,!1}),t.isElement()&&(i4t(t.attr("role")).isNullOrEmptyString()||"presentation"===t.attr("role"))&&i4t(t.attr("aria-owns")).isNullOrEmptyString()?t.val():(1===this.children.length&&"linkRole"===this.children[0].type?this.children[0]:this).element):this.element:null}changeDomainInDOMObject(t,e){var i,r=new i4t.url(e).toString(),n=this.getElemToAction();!i4t(e).isNullOrEmptyString()&&i4t(n).isElement()&&(i=r.match(/:\/\/(.[^/]+)/)[1],e=r.replace(i,t),n.setAttribute("href",e))}#rewriteClickBehavior(){i4t?.htmlElement?.isInsideInsuitBar?.call(i4t(this.element))||i4t(i4t(this.element).href()).isNullOrEmptyString()||(i4t.event.removeListener("click",this.#onClickListener,this.element,!0),i4t(this.element).addEventListener("click",this.#onClickListener,!0))}setClickViaInsuit(t){i4t.runner.lastClickedElement=t.target,t.preventDefault(),t.stopImmediatePropagation(),this.toAction()}destroy(){i4t.event.removeListener("click",this.#onClickListener,this.element),super.destroy()}},i4t.js.roles.AbstractInputRole=class AbstractInputRole extends i4t.js.roles.AbstractRole{constructor(t){super(t),t.readOnly&&i4t(t).attr("aria-readonly","true")}getLabelObject(){var t=this.getAriaLabel();return i4t(t).isUndefinedOrNull()&&(t=this.getElementLabel(),i4t(t).isUndefinedOrNull())?null:t}getElementLabel(){var t,e=super.getElementLabel(),i=i4t(this.element);return i.isElement()?i4t(e).isObject()?e:(e=i.attr("id"),!i4t(e).isNullOrEmptyString()&&(e=i4t.find('label[for="'+e+'"]')).isElement()?e.val():(e=i.attr("placeholder"),i4t(e).isNullOrEmptyString()&&("label"!==(t=i.parent()).val().nodeName.toLowerCase()||(i.attr("data-insuit-label-for-id","i4t-label-for-id"),t=t.clone(),i.removeAttr("data-insuit-label-for-id"),(i=t.find("[data-insuit-label-for-id=i4t-label-for-id]")).isElement()&&i.remove(),e=t.text(),i4t(e).isNullOrEmptyString()))?null:e)):null}getInputType(){return i4t(this.element).attr("type")}getFormat(){var t=i4t(this.element).attr("data-insuit-input-format");return i4t(t).isNullOrEmptyString()?this.defaultFormat[this.grammar]:t}ssmlContentList(){return this.ssmlLabelList()}destroy(){i4t.event.removeListener("change",this.onChange,this.element),super.destroy()}isRequired(){var t=i4t(this.element),e=t.attr("aria-required"),t=t.attr("required");return!i4t(e).isNullOrEmptyString()&&"true"===e||!i4t(t).isUndefinedOrNull()}isReadOnly(){return"true"===i4t(this.element).attr("aria-readonly")}},i4t.js.roles.AbstractRoleRange=class AbstractRoleRange extends i4t.js.roles.AbstractRole{grammar="numeric";setValueEvents=["focus","pointerdown","mousedown","gotpointercapture","pointermove","mousemove","input","pointerup","mouseup","change","click"];#onChangeListener=t=>this.onChange(t);constructor(t){super(t);t=i4t(t);i4t(this.getMin()).isNumber()&&t.attr("aria-valuemin",this.getMin()),i4t(this.getMax()).isNumber()&&t.attr("aria-valuemax",this.getMax()),i4t(this.getValue()).isNumber()&&t.attr("aria-valuenow",this.getValue())}getMax(){var t=parseInt(this.element.max);return i4t(t).isNumber()?t:this.defaultMax}getMin(){var t=parseInt(this.element.min);return i4t(t).isNumber()?t:this.defaultMin}getRangeStep(){return i4t(this.element.step).isNullOrEmptyString()?1:parseInt(this.element.step,10)}getValue(){return i4t(this.element).is("input")&&!i4t(this.element.value).isNullOrEmptyString()?parseInt(this.element.value):this.defaultValue}setValue(t){var e=i4t(this.element);this.getMax()<t&&(t=this.getMax()),this.getMin()>t&&(t=this.getMin()),this.element.value=t,i4t(this.setValueEvents).each(function dispatch(){e.dispatchEvent(this.val())})}setRoleListeners(){i4t.event.addListener("change",this.#onChangeListener,this.element)}onChange(){i4t(this.element).attr("aria-valuenow",this.getValue())}destroy(){i4t.event.removeListener("change",this.#onChangeListener,this.element),super.destroy()}},i4t.js.roles.alertdialogRole=class alertdialogRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.alertRole=class alertRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.articleRole=class articleRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.bannerRole=class bannerRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.buttonRole=class buttonRole extends i4t.js.roles.AbstractCommandRole{grammar="action";#onClickListener=t=>this.onClick(t);isButton(){return"button"===this.element.tagName.toLowerCase()||"input"===this.element.tagName.toLowerCase()&&(t=>{switch(t){case"button":case"image":case"submit":case"reset":case"file":return!0;default:return!1}})(this.element.type)}toAction(){return!this.isToggleButton()&&("file"===this.element.type?(window.confirm(i4t.js.services.I18nService.get("modal_exit_link"),()=>super.toAction(),function(){}),!1):super.toAction())}getElemToAction(){return this.isButton()?this.element:super.getElemToAction()}getElementLabel(){var t=i4t(this.element),e=super.getElementLabel();if(!i4t(e).isUndefinedOrNull())return e;if(t.isElement()){if(e=t.attr("name"),!i4t(e).isNullOrEmptyString())return e;if(e=this.getValue(),!i4t(e).isNullOrEmptyString())return e;if(t=t.attr("id"),!i4t(t).isNullOrEmptyString()&&(e=i4t.find('label[for="'+t+'"]')).isElement())return e.val();if(e=this.element,!i4t(e).isUndefinedOrNull())return e}return null}isPressed(){return"true"===i4t(this.element).attr("aria-pressed")}getValue(){return i4t(this.element.value).isUndefinedOrNull()?"":this.element.value}ssmlLabelList(t,e){return this.isToggleButton()?super.ssmlLabelList(t,i4t.js.services.I18nService.get(this.isPressed()?"pressed":"not_pressed")):super.ssmlLabelList(t,e)}getRoleText(){return this.isToggleButton()?i4t.js.services.I18nService.get("toggle_button"):super.getRoleText()}isToggleButton(){var t=i4t(this.element).attr("aria-pressed");return i4t(["true","false","mixed"]).includes(t)}getNavigatorClass(){return"ButtonFormNavigator"}onClick(){var t;this.isToggleButton()&&(this.element.checked||i4t(this.element).find(":checked,:active").isElement()?i4t(this.element).attr("aria-pressed","true"):i4t(this.element).attr("aria-pressed","true"===i4t(this.element).attr("aria-pressed")?"false":"true"),this.parent instanceof i4t.js.roles.groupRole)&&i4t(this.parent.element).findAll("[aria-pressed=true]").each(function removeCheck(){t=this.val().checked||this.find(":checked,:active").isElement(),this.attr("aria-pressed",t?"true":"false")})}setRoleListeners(){super.setRoleListeners(),i4t.event.addListener("click",this.#onClickListener,this.element)}destroy(){i4t.event.removeListener("click",this.#onClickListener,this.element),super.destroy()}},i4t.js.roles.cellRole=class cellRole extends i4t.js.roles.AbstractRole{constructor(t){super(t);t=i4t(t);i4t(t.attr("colspan")).isNullOrEmptyString()||t.attr("aria-colspan",t.attr("colspan")),i4t(t.attr("rowspan")).isNullOrEmptyString()||t.attr("aria-rowspan",t.attr("rowspan"))}hasRowSpan(){return i4t(parseInt(i4t(this.element).attr("aria-rowspan"))).isNumber()&&1<parseInt(i4t(this.element).attr("aria-rowspan"))}ssmlContentList(t=0){return super.ssmlContentList([this.getElementLabel()],t)}getElementLabel(){var t=this.getCellHeader(),e=[],i=this.getColumnIndex();return i4t(i).isNumber()&&e.push(i+1),i4t(t).isUndefinedOrNull()||e.push(t.text()),e.join()}getCellHeader(){var t=this.getTableParent();return i4t(t).isUndefinedOrNull()||i4t(t.getHeaderRow()).isUndefinedOrNull()?null:t.getHeaderRow().children[this.getColumnIndex()]}getCellInfo(){var t,e=[],i=parseInt(i4t(this.element).attr("aria-colindex")),r=parseInt(i4t(this.element).attr("aria-rowindex")),n=this.getTableParent();return i4t(n).isUndefinedOrNull()||(t=i4t(n.element).attr("colcount")),i4t(t).isNumber()?(i4t(r).isNumber()&&e.push(i4t.js.services.I18nService.get("row_of_total",{row:r,total:t})),i4t(i).isNumber()&&e.push(i4t.js.services.I18nService.get("column_of_total",{column:i,total:t}))):(i4t(i).isNumber()&&e.push(i4t.js.services.I18nService.get("row_number",{row:r})),i4t(r).isNumber()&&e.push(i4t.js.services.I18nService.get("column_number",{column:i}))),e}getTableParent(){for(var t=this.parent;t instanceof i4t.js.roles.tableRole||t instanceof i4t.js.roles.rowRole;){if(t instanceof i4t.js.roles.tableRole)return t;t=t.parent}return null}getColumnIndex(){var t=parseInt(i4t(this.element).attr("aria-colindex"));if(i4t(t).isNumber())return t;t=this.getTableParent();let e=t.children.indexOf(this.parent);var t=t.getTableStructure()[e],i=t.filter(t=>t.row==e)[this.parent.children.indexOf(this)];return t.indexOf(i)}getNavigatorClass(){return"GridNavigator"}},i4t.js.roles.checkboxRole=class checkboxRole extends i4t.js.roles.AbstractRoleForm{grammar="check";#onClickListener=t=>this.onClick(t);#onChangeListener=t=>this.onChange(t);constructor(t){super(t);t=i4t(this.element);this.isInput()&&t.attr("aria-checked",this.element.checked?"true":"false")}get checked(){var t=i4t(this.element);return t.is("input")?t.value.checked:t.find("input[type=check]").isElement()?t.find("input[type=check]").value.checked:"true"===t.attr("aria-checked")}getTextValue(){return i4t.js.services.I18nService.get(this.getElementToAction().checked?"checked":"unchecked")}getElementToAction(){var t=i4t(this.element);if(!t.is("input")){var e=t=>t.isElement()&&t.is("input")?t.value:null,i=t.attr("for");if(!i4t(i).isNullOrEmptyString()){var i=e(i4t.find("#"+i));if(i)return i}if(i=e(t.next()))return i;if(i=e(t.previous()))return i;if(i=e(t.find("input[type=checkbox]")))return i;if((e=t.parent()).isElement()){i=e.findAll("input[type=checkbox]");if(1===i.length)return i[0].value}}return this.element}getElementLabel(){let t=super.getElementLabel(),e=i4t(this.element),i;if(!i4t(t).isUndefinedOrNull())return t;if(e.isElement()){if(t=e.attr("value"),!i4t(t).isNullOrEmptyString())return t;if(t=e.attr("name"),!i4t(t).isNullOrEmptyString())return t}return!this.isInput()&&i4t(e.attr("aria-label")).isNullOrEmptyString()&&i4t(e.attr("aria-labelledby")).isNullOrEmptyString()&&(i=e.attr("title"),i4t(i).isNullOrEmptyString()&&(i=e.text()),e.attr("aria-label",i)),null}getValue(){return i4t(this.element.checked).isUndefinedOrNull()?"":i4t.js.services.I18nService.get(this.element.checked?"checked":"unchecked")}ssmlContentList(){return this.ssmlLabelList()}ssmlLabelList(t){return super.ssmlLabelList(t,this.getValue())}select(){var t=i4t(this.element);t.value.disabled||t.value.isDisabled||t.click()}getNavigatorClass(){return"CheckBoxFormNavigator"}setRoleListeners(){this.isInput()?i4t.event.addListener("change",this.#onChangeListener,this.element):i4t.event.addListener("click",this.#onClickListener,this.element)}onChange(){i4t(this.element).attr("aria-checked",this.element.checked?"true":"false")}onClick(){var t=i4t(this.element);i4t(["true","false"]).includes(t.attr("aria-checked"))&&t.attr("aria-checked","true"===t.attr("aria-checked")?"false":"true")}destroy(){i4t.event.removeListener("change",this.#onChangeListener,this.element),i4t.event.removeListener("click",this.#onClickListener,this.element),super.destroy()}getInputType(){return"checkbox"}},i4t.js.roles.columnheaderRole=class columnheaderRole extends i4t.js.roles.cellRole{getCellHeader(){return null}},i4t.js.roles.comboboxRole=class comboboxRole extends i4t.js.roles.AbstractRoleForm{grammar="list";relatedInput=null;descendentChildren=["optgroup","option","listbox","textbox","tree","grid","dialog"];#onMouseDownListener=()=>this.open();#onClickListener=()=>this.onClick();#onInputListener=()=>this.onInput();#selectState="closed";constructor(t){super(t);var t=i4t(t);this.isAutocompleteWithList()&&(this.grammar="letter"),this.isSelect()&&t.attr("aria-expanded","false"),this.isSelect()||(t.attr("aria-expanded",this.popupIsShown()?"true":"false"),this.relatedInput=t.find("input[type=text], textarea"),this.relatedInput.isElement()&&(t=i4t(this.relatedInput).attr("aria-activedescendant"),i4t(t).isNullOrEmptyString()||(t=i4t.find('*[id="'+t+'"]')).isElement()&&t.attr("aria-selected","true")),this.relatedInput=this.relatedInput.val())}async reload(t){return this.isAutocompleteWithList()&&this.reloadPopup(),super.reload(t)}reloadPopup(){var t=this.getPopup();t.isElement()&&i4t.js.roles.getRoleByElement(t.value).reload()}getElementLabel(){let t=super.getElementLabel(),e=i4t(this.element);if(!i4t(t).isUndefinedOrNull())return t;if(e.isElement()&&(t=e.attr("name"),!i4t(t).isNullOrEmptyString()))return t;if(this.isSelect()){if(t=this.element.selectedOptions[0],i4t(t).isElement())return i4t(t).text();if(t=this.element.options[0],i4t(t).isElement())return i4t(t).text()}return null}getValue(){var t;return this.isAutocompleteInline()?this.element.value:(t=[],this.eachOption(function(){i4t(this.isSelected).isFunction()&&this.isSelected()&&t.push(this.getValue())}),0==t.length?"":t[0])}select(t){t>=this.size()||(this.eachOption(function(){this.deSelect()}),this.isSelect()?this.element.selectedIndex=t:this.getOption(t).select())}isExpanded(){return"true"===i4t(this.element).attr("aria-expanded")}hasPopup(){var t=i4t(this.element).attr("aria-haspopup");return!i4t(t).isNullOrEmptyString()&&i4t(["true","menu","listbox","tree","grid","dialog"]).includes(t)}getPopup(){var t=i4t(this.element).attr("aria-controls");return i4t(t).isNullOrEmptyString()?i4t(null):i4t.findIncludingInsuit("*[id='"+t+"']")}popupIsShown(){var t;return!!this.isSelect()||(t=this.getPopup()).isElement()&&t.isVisible()}deSelect(t){this.size()}resetCurrent(){this.eachOption(function(){this.resetCurrent()})}setCurrent(t){this.isSelect()||null!=(t=this.getOption(t))&&(this.resetCurrent(),t.setCurrent())}isSelect(){return"select"===this.element.nodeName.toLowerCase()}isSelected(t){t=this.getOption(t);if(null!=t)return t.isSelected()}selectedIndex(){var t,e;return this.isSelect()?this.element.selectedIndex:(t=0,e=!1,this.eachOption(function(){e||(i4t(this.isSelected).isFunction()&&this.isSelected()?e=!0:t++)}),e?t:-1)}size(){return this.isSelect()?this.element.options.length:(this.isAutocompleteWithList()&&1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children),this.children.map(t=>"optgroupRole"==t.type||"listboxRole"==t.type?t.children.length:"optionRole"==t.type?1:0).reduce((t,e)=>t+e,0))}isAutocomplete(){var t=i4t(this.element);return i4t(["inline","list","both"]).includes(t.attr("aria-autocomplete"))}isAutocompleteWithList(){var t=i4t(this.element).attr("aria-autocomplete");return!i4t(t).isUndefinedOrNull()&&("list"==t||"both"==t)}isAutocompleteInline(){return"inline"===i4t(this.element).attr("aria-autocomplete")}ssmlContentList(){return this.ssmlLabelList()}getNavigatorClass(){return this.isAutocompleteWithList()?"AutocompleteNavigator":"ComboBoxFormNavigator"}isReactCombobox(){return this.element.matches("[id^='react-select'][class*=dummyInput], [class*='react-select']")&&Object.keys(this.element).some(t=>t.includes("reactInternal"))}getOption(t){if(this.isValidIndex(t)){var e,i=0;if(this.isAutocompleteInline())return(e=i4t.find("[id='"+i4t(this.element).attr("aria-controls")+"']")).isElement()?i4t.js.roles.getRoleByElement(e):null;1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children);for(var r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type&&0<e.children.length){if(!(e.children.length+i<=t))return e.children[t-i];i+=e.children.length}else if("optionRole"==e.type){if(t<=i)return e;i++}}return null}eachOption(t){if(i4t(t).isFunction())for(var e,i,r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type)for(i=0;i<e.children.length;i++)t.apply(e.children[i]);else t.apply(e)}isValidIndex(t){return t<this.size()&&0<=t}onInput(){var t;this.hasPopup()?(t=this.getPopup()).isElement()&&t.isVisible()?i4t(this.element).attr("aria-expanded","true"):i4t(this.element).attr("aria-expanded","false"):i4t(this.element).removeAttr("aria-expanded")}close(){i4t(this.element).attr("aria-expanded","false")}open(){i4t(this.element).attr("aria-expanded","true")}destroy(){i4t.event.removeListener("input",this.onInput,this.element),super.destroy()}setRoleListeners(){this.isSelect()&&i4t.event.addListener("mousedown",this.#onMouseDownListener,this.element),i4t.event.addListener("click",this.#onClickListener,this.element),i4t.event.addListener("input",this.#onInputListener,this.element)}getAutocompleteDescription(){var t=this.size(),e=[];return e.push(i4t.js.services.I18nService.get("number_of_results_autocomplete",{number:t})),t=(t=this.getActiveOption())?t.getValue(this):"",i4t(t).isNullOrEmptyString()||e.push(i4t.js.services.I18nService.get("form_element_value",{value:t})),e}getActiveOption(){return 1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children),this.children.map(t=>"optgroupRole"==t.type?t.children:t).flat(1/0).filter(t=>t.isSelected())[0]}setExpanded(){var t;this.isSelect()||((t=this.getPopup()).isElement()&&t.isVisible()?i4t(this.element).attr("aria-expanded","true"):i4t(this.element).attr("aria-expanded","false"))}onClick(){i4t(()=>this.setExpanded()).defer()}toAction(){return!1}},i4t.js.roles.complementaryRole=class complementaryRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.contentinfoRole=class contentinfoRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.areamapRole=class areamapRole extends i4t.js.roles.AbstractRole{getElementLabel(){var t=i4t(this.element);return t.isElement()&&(t=t.attr("alt"),!i4t(t).isNullOrEmptyString())?t:super.getElementLabel()}},i4t.js.roles.asteriscRole=class asteriscRole extends i4t.js.roles.AbstractRole{ssmlContentList(){return[""]}getNavigatorClass(){return"AsteriscNavigator"}},i4t.js.roles.audioRole=class audioRole extends i4t.js.roles.AbstractRole{parentElement=null;constructor(t){super(t),this.parentElement=i4t(t).parent().val()}ssmlContentList(){return this.ssmlLabelList()}getNavigatorClass(){return"DefaultMultimediaNavigator"}isVisible(){var t=i4t(this.element).attr("data-insuit-visibility");return!i4t(t).isNullOrEmptyString()&&"true"===t||i4t(this.parentElement).isVisible()}isFixed(){return i4t(this.parentElement).isFixed()}zIndex(){var t=i4t(this.element).zIndex(),e=i4t(this.element).attr("data-insuit-z-index");return t<1&&(t=i4t(this.parentElement).zIndex()),i4t(e).isNullOrEmptyString()&&(e="+1"),this.calculateData(t,e)+10}getWidth(){var t=i4t(this.element).offset(),t=0<t.width?t.width:this.parentElement.offsetWidth,e=i4t(this.element).attr("data-insuit-width");return this.calculateData(t,e)}getHeight(){var t=i4t(this.element).offset(),t=0<t.height?t.height:this.parentElement.offsetHeight,e=i4t(this.element).attr("data-insuit-height");return this.calculateData(t,e)}getLeft(){var t=i4t(this.element).offset(),t=(0<t.left?t:i4t(this.parentElement).offset()).left,e=i4t(this.element).attr("data-insuit-left");return this.calculateData(t,e)}getTop(){var t=i4t(this.element).offset(),t=(0<t.top?t:i4t(this.parentElement).offset()).top,e=i4t(this.element).attr("data-insuit-top");return this.calculateData(t,e)}getTotalLeft(){var t=0<this.element.offsetHeight?this.element:this.parentElement;return this.getLeft()+this.getCSSValue(t,"margin-left")+this.getCSSValue(t,"padding-left")}getTotalTop(t){var e=0<this.element.offsetHeight?this.element:this.parentElement;return t?this.getTop()+e.offsetHeight-this.getCSSValue(e,"margin-bottom")+this.getCSSValue(e,"padding-bottom"):this.getTop()+this.getCSSValue(e,"margin-top")+this.getCSSValue(e,"padding-top")}},i4t.js.roles.barRole=class barRole extends i4t.js.roles.AbstractRole{constructor(t){super(t),this.reload()}getNavigatorClass(){return"BarNavigator"}},i4t.js.roles.captchaRole=class captchaRole extends i4t.js.roles.AbstractRole{grammar="captcha";isRequired(){return!0}ssmlContentList(){return this.ssmlLabelList()}getNavigatorClass(){return"CaptchaFormNavigator"}},i4t.js.roles.helpRole=class helpRole extends i4t.js.roles.AbstractRole{openedType(){return i4t(this.element).attr("data-insuit-help-opened")}getNavigatorClass(){return"HelpNavigator"}},i4t.js.roles.htmlRole=class htmlRole extends i4t.js.roles.AbstractRole{static currentPageLink;static pageCSS="";#addedRulesIndexes=[];langObserver;observer;selectedChild;globalObserverTimeout=null;#checkCoverBarTimeout;#adjustFixedElementsTimeout;constructor(){var t=i4t.find(i4t.config.get("toprole"));super(t.isElement()?t.value:document.documentElement),(this.selectedChild=this).setClientCSS(i4t.js.roles.htmlRole.pageCSS),document.documentElement.matches(i4t.config.get("toprole"))||this.setHTMLLangObserver()}setHTMLLangObserver(){i4t(this.langObserver).isUndefinedOrNull()&&(this.langObserver=i4t(document.documentElement).addObserver(()=>{this.onLangChange(),this.checkHTMLOrHeadReloaded()},{childList:!1,subtree:!1,characterData:!1,attributeFilter:["lang","xml:lang"],attributeOldValue:!1}))}async setClientCSS(t){var e=/@[^{]+[^@]*}[^{}]*}/gm,i=""+i4t.config.get("cdn.service")+i4t.config.get("cdn.css.path")+i4t.config.get("cdn.css.pagefile");t=i4t(t).replaceAll(/\/\*.+?(?=\*\/)\*\//gm,""),i4t.js.roles.htmlRole.currentPageLink&&i4t.js.roles.htmlRole.currentPageLink.sheet||(i4t.js.roles.htmlRole.currentPageLink=i4t.find("link[href*=insuit-page]").value),i4t.js.roles.htmlRole.currentPageLink&&i4t.js.roles.htmlRole.currentPageLink.sheet||(i4t.js.roles.htmlRole.currentPageLink=await i4t.css.addLink(i,!0,"anonymous")),this.#addedRulesIndexes.forEach(t=>i4t.js.roles.htmlRole.currentPageLink.sheet.deleteRule(t));let r=t.matchAll(e),n=r.next();for(;!n.done;)try{i4t.js.roles.htmlRole.currentPageLink.sheet.insertRule(n.value[0],i4t.js.roles.htmlRole.currentPageLink.sheet.cssRules.length),this.#addedRulesIndexes.push(i4t.js.roles.htmlRole.currentPageLink.sheet.cssRules.length)}catch(t){i4t.logger.warning("No se ha podido añadir la regla "+n.value[0])}finally{n=r.next()}for(t=i4t(t).replaceAll(e,""),r=t.matchAll(/[^{]+{[^}]*}/gm),n=r.next();!n.done;)try{i4t.js.roles.htmlRole.currentPageLink.sheet.insertRule(n.value[0],i4t.js.roles.htmlRole.currentPageLink.sheet.cssRules.length)}catch(t){i4t.logger.warning("No se ha podido añadir la regla "+n.value[0])}finally{n=r.next()}}async reload(t){return this.setGeneralObserver(),super.reload(t)}async checkTopRoleStatus(){var t;i4t(this.element).matches(i4t.config.get("toprole"))||(t=await this.getNewRootElement(),delete this.element["data-insuit-role-object"],this.element=t.value,(this.element["data-insuit-role-object"]=this).observer.disconnect(),this.observer=null,this.setGeneralObserver(),t.value!==document.documentElement&&this.setHTMLLangObserver(),i4t.topRole.onLiveEvent("assertive",!0))}async getNewRootElement(){let i=i4t.find(i4t.config.get("toprole"));return i.isElement()?i:new Promise(t=>{let e=i4t(()=>{(i=i4t.find(i4t.config.get("toprole"))).isElement()&&(window.clearInterval(e),t(i))}).interval(.5);i4t(()=>t(document.documentElement)).delay(4)})}setGeneralObserver(){var r,n,s,e,a;i4t(this.observer).isUndefinedOrNull()&&(r=this,e=i4t.config.get("generalContainer"),a=function isInInsuitBar(t){for(t=t.parent();t.isElement();){if(t.hasAttribute("aria-live")&&"off"!==t.attr("aria-live")||t.attr("id")===e)return!0;t=t.parent()}return!1},this.observer=i4t(this.element).addObserver(function(t,e){switch(r.checkTopRoleStatus(),t.attributeName){case"aria-live":r.onAriaLiveChange(t,e,a);break;case"lang":case"xml:lang":r.onLangChange(t);break;case"disabled":r.onDisabledChange(t);break;case"readonly":r.onReadOnlyChange(t);break;case"role":r.onRoleChange(t);break;case"aria-hidden":r.onAriaHiddenChange(t);break;case"aria-invalid":r.onAriaInvalidChange(t)}let i=!1;for(n=0;n<t.addedNodes.length;n++)(s=i4t(t.addedNodes[n])).isElement()&&e.i4tArr.indexOf(s.val())<0&&!a(s)&&(e.i4tArr.push(s.val()),i=!0);for(n=0;n<t.removedNodes.length;n++)(s=i4t(t.removedNodes[n])).isElement()&&e.i4tArr.indexOf(s.val())<0&&!a(s)&&(e.i4tArr.push(s.val()),r.observer.checkRemoved=!0);if(i)try{r.checkPossibleElementsCoveredByBar()}catch(t){i4t.logger.warning("Error al detectar elementos que la barra de insuit cubre")}r.checkHTMLOrHeadReloaded(),i4t.logger.debug(function(){return"Evento de mutación general: { type: "+t.type+", attributeName: "+t.attributeName+", addedNodes: "+t.addedNodes.length+", removedNodes: "+t.removedNodes.length+" }, numero de elementos afectados por la mutación:"+e.i4tArr.length()})},e=>{this.globalObserverTimeout&&window.clearTimeout(this.globalObserverTimeout),this.globalObserverTimeout=i4t(()=>{var t=i4t(e.i4tArr);t.isArray()&&0<t.length()&&r.onChange()}).delay(.7)},{characterData:!1,attributeFilter:["aria-live","lang","xml:lang","role","disabled","readonly","aria-invalid","aria-hidden","id","class"],attributeOldValue:!0}),this.observer.i4tArr=i4t([]),this.observer.checkRemoved=!1)}checkPossibleElementsCoveredByBar(){clearTimeout(this.#checkCoverBarTimeout),clearTimeout(this.#adjustFixedElementsTimeout),i4t.js?.widgets?.InsuitBar?.bar?.isElement?.()&&(this.#checkCoverBarTimeout=i4t(()=>i4t.js.widgets.InsuitBar.detectCoveredElementsByBar()).delay(1),this.#adjustFixedElementsTimeout=i4t(()=>i4t.js.widgets.InsuitBar.adjustFixedElementsCoveredByBar()).delay(2))}checkHTMLOrHeadReloaded(){var t=i4t(i4t.js.roles?.htmlRole?.currentPageLink).isElement()&&!i4t.js.roles?.htmlRole?.currentPageLink?.parentElement,e="true"!==i4t(document.documentElement).attr("data-insuit-active")&&i4t.js.widgets.InsuitBar&&i4t.js.widgets.InsuitBar.bar.isElement();(t||e)&&(t&&(i4t.js.roles.htmlRole.currentPageLink=null),e&&i4t(document.documentElement).attr("data-insuit-active","true"),this.setClientCSS(i4t.js.roles.htmlRole.pageCSS),this.reload(),i4t(()=>i4t.event.insuit.dispatch("reload")).delay(.2))}onAriaLiveChange(t,e,i){var r=i4t(t.target);r.isElement()&&e.i4tArr.indexOf(r.val())<0&&!i(r)&&e.i4tArr.push(t.target)}onLangChange(){var t=i4t(i4t(document.documentElement).attr("lang")).isNullOrEmptyString()?i4t(document.documentElement).attr("xml:lang"):i4t(document.documentElement).attr("lang");i4t.config.getValidLanguage(t)!==i4t.config.getLanguage()&&i4t.config.setLanguage(t)&&(i4t.js.services.I18nService.loadLang(i4t.config.getLanguage()),i4t.js.services.I18nService.reloadAllTexts(),i4t.js.services.ModelService.setInDOM(),i4t.beIframe()||(i4t.js.InsuitApp.instance.reloadTabLang(),i4t.js.widgets.InsuitBar.createToolsShortcuts(),i4t.event.insuit.dispatch("reload")))}onDisabledChange(t){t=i4t.js.roles.getRoleByElement(t.target);t instanceof i4t.js.roles.AbstractRole&&i4t(t.element).attr("aria-disabled",t.element.disabled?"true":"false")}onReadOnlyChange(t){let e=i4t.js.roles.getRoleByElement(t.target);["AbstractRoleForm","gridRole","listboxRole","gridcellRole"].some(t=>e instanceof i4t.js.roles[t])&&i4t(e.element).attr("aria-readonly",e.element.readOnly?"true":"false")}onRoleChange(t){this.#attributeChangeAffectVisibility(t)&&(t=this.getParentRole(i4t(t.target)),i4t(t).isUndefinedOrNull()||t.onLiveEvent("polite",!0))}onAriaHiddenChange(t){t=i4t(t.target);"true"===t.attr("aria-hidden")?t.attr("tabindex","-1"):t.removeAttr("tabindex")}onAriaInvalidChange(t){let e=i4t(t.target).attr("aria-invalid"),i=i4t.js.roles.getRoleByElement(t.target),r;t.oldValue!==e&&i instanceof i4t.js.roles.AbstractRole&&((r=i.getErrorMessageElement()).isElement()&&("true"===e?r.removeAttr("aria-hidden"):r.attr("aria-hidden","true")),i4t(e).isNullOrEmptyString()||"false"===e||(r=i.getAriaInvalidMessage(),i4t(r).isNullOrEmptyString())||i4t(i4t.runner).isUndefinedOrNull()||i4t.runner.modal("alert",r))}onChange(){i4t(this.liveEvent.timer).isUndefinedOrNull()||window.clearTimeout(this.liveEvent.timer),this.liveEvent={timer:i4t(()=>this.#onGeneralMutation()).delay(this.timeToLiveSleep/1e3),type:"mutation"}}#onGeneralMutation(){var e,i,t=i4t(this.observer).isUndefinedOrNull()?i4t([]):i4t(this.observer.i4tArr);!i4t(this.observer).isUndefinedOrNull()&&this.observer.checkRemoved&&(this.observer.checkRemoved=!1,this.checkCurrentChildExist()),t.isArray()&&0<t.length()&&(i4t.logger.debug(()=>"Revision de cambios en mutación general, numero de elementos afectados por la mutación:"+t.length()),i4t.js.services.ModelService.setInDOM(),t.map(t=>i4t(t)).forEach(t=>{t.isElement()&&((i=this.getObjectiveForBusyAriaControlsIfExist(t)).isElement()?this.onLiveNode("busy",i):(e=t.attr("aria-live"),i4t(e).isNullOrEmptyString()||"assertive"!==e.toLowerCase()&&"polite"!==e.toLowerCase()?t.findAll("[role][aria-live]").map(t=>i4t(t)).forEach(t=>{e=t.attr("aria-live"),i4t(e).isNullOrEmptyString()||"assertive"!==e.toLowerCase()&&"polite"!==e.toLowerCase()||this.onLiveNode(e,t)}):this.onLiveNode(e,t)))}),this.observer.i4tArr=i4t([]))}checkCurrentChildExist(){if("asteriscRole"!==this.selectedChild.type&&!this.selectedChild.exists()){for(;!i4t(this.selectedChild.element).isInDOM();){let t=this.selectedChild.parent;if(!((t=this.selectedChild.backRole&&this.selectedChild.backRole instanceof i4t.js.roles.AbstractRole?this.selectedChild.backRole:t)instanceof i4t.js.roles.AbstractRole)){this.selectedChild=this;break}this.selectedChild=t}this.selectedChild.reload(),i4t.dispatchIEvent("return-to-last-role")}}async onLiveNode(t,e){var i=i4t.js.roles.getRoleByElement(e.val()),r=this.getParentRole(e),n=i4t(r).isUndefinedOrNull();n&&!i4t(i).isUndefinedOrNull()&&(r=i.parent,n=i4t(r).isUndefinedOrNull()),n||(await r.reload(),i=i4t.js.roles.getRoleByElement(e.val())),i4t(i).isUndefinedOrNull()||i.onLiveEvent(t,!1)}getParentRole(t){var e,t=t.parent();return t.isElement()?(e=i4t.js.roles.getRoleByElement(t.val()),i4t(e).isUndefinedOrNull()?this.getParentRole(t):e):null}getElementLabel(){var t=document.title;return i4t(t).isNullOrEmptyString()?super.getElementLabel():t}#attributeChangeAffectVisibility(t){var e,i;return!i4t(t.attributeName).isUndefinedOrNull()&&"role"===t.attributeName&&"true"!==(e=i4t(t.target)).attr("data-insuit-role-removed")&&(t=i4t.js.roles.getRoleByElement(t.target),i="none"===e.attr("role"),!i4t(t).isUndefinedOrNull())&&i&&(e.attr("data-insuit-role-removed","true"),t.destroy(),!0)}},i4t.js.roles.modalRole=class modalRole extends i4t.js.roles.AbstractRole{constructor(){super(i4t.js.aids.ModalOutAid.modalElement)}async reload(t){return this.element=i4t.js.aids.ModalOutAid.modalElement,super.reload(t)}getNavigatorClass(){return"ModalNavigator"}},i4t.js.roles.pdfRole=class pdfRole extends i4t.js.roles.AbstractRole{#PDF_URL_ATTR="data-insuit-pdf-url";#isPdfLoading=!1;#TextLayerBuilder=function(t){this.textLayerDiv=t.textLayerDiv,this.pageIdx=t.pageIndex,this.viewport=t.viewport,this.textDivs=[],this.textContent=null,this.tmpCanvasCtx=i4t(document).createElement("canvas").getContext("2d"),this.matches=[],this.findController=window.PDFFindController||null,this.appendText=function(t,e){var i,r,n,s,a,e=e[t.fontName],l=i4t(document).createElement("div");this.textDivs.push(l),s=pdfjsLib.Util.transform(this.viewport.transform,t.transform),i=Math.atan2(s[1],s[0]),e.vertical&&(i+=Math.PI/2),r=Math.sqrt(s[2]*s[2]+s[3]*s[3]),n=e.ascent?e.ascent*r:e.descent?(1+e.descent)*r:r,a=s[4]+n*Math.sin(i),s=s[5]-n*Math.cos(i),l.style.position="absolute",l.style.left=a+"px",l.style.top=s+"px",l.style.fontSize=r+"px",l.style.fontFamily=e.fontFamily,l.textContent=t.str,l.dataset.fontName=t.fontName,l.dataset.fontSize=r,l.dataset.angle=i*(180/Math.PI),l.dataset.canvasWidth=(e.vertical?t.height:t.width)*this.viewport.scale,l.dataset.canvasHeight=(e.vertical?t.width:t.height)*this.viewport.scale,l.dataset.top=s,l.dataset.left=a},this.setTextContent=function(t){for(var e=0,i=(this.textContent=t).items.length;e<i;e++)this.appendText(t.items[e],t.styles);this.renderLayer()},this.renderLayer=()=>{var t,e,i,r,n,s=document.createDocumentFragment();if(!(1e5<this.textDivs.length)){for(t=i4t(document.body).hasAttribute("data-insuit-reorder-pdf")?i4t.js.roles.pdfRole.reorder(this.textDivs):this.textDivs,n=0;n<t.length;n++)e=t[n],this.tmpCanvasCtx.font=e.style.fontSize+" "+e.style.fontFamily,0<(r=this.tmpCanvasCtx.measureText(e.textContent).width)&&(s.appendChild(e),i=e.dataset.canvasWidth/r,e.dataset.angle,0);for(this.textLayerDiv.appendChild(s),this.updateMatches(),n=0;n<t.length;n++)i4t(t[n]).addClass("insuit-cursor-text")}},this.updateMatches=function(){for(var t,e=this.matches,i=this.textContent.items,r=-1,n=0,s=e.length;n<s;n++){for(var a=e[n],l=Math.max(r,a.begin.divIdx),o=a.end.divIdx;l<=o;l++)(t=this.textDivs[l]).textContent=i[l].str,t.className="";r=a.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null!==this.findController&&this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))},this.renderMatches=function(t){if(0!==t.length){var s=this.textContent.items,a=this.textDivs,e=null,i=null!==this.findController&&this.pageIdx===this.findController.selected.pageIdx,r=null===this.findController?-1:this.findController.selected.matchIdx,n=null!==this.findController&&this.findController.state.highlightAll,l={divIdx:-1,offset:void 0};if(n||i){var o=r,c=r+1;n&&(o=0,c=t.length);for(var d=o;d<c;d++){var u=t[d],h=u.begin,u=u.end,m=i&&d===r?" selected":"";if(e&&h.divIdx===e.divIdx?appendTextToDiv(e.divIdx,e.offset,h.offset):(null!==e&&appendTextToDiv(e.divIdx,e.offset,l.offset),beginText(h)),h.divIdx===u.divIdx)appendTextToDiv(h.divIdx,h.offset,u.offset,"highlight"+m);else{appendTextToDiv(h.divIdx,h.offset,l.offset,"highlight begin"+m);for(var g=h.divIdx+1,p=u.divIdx;g<p;g++)a[g].className="highlight middle"+m;beginText(u,"highlight end"+m)}e=u}e&&appendTextToDiv(e.divIdx,e.offset,l.offset)}}function beginText(t,e){a[t.divIdx].textContent="",appendTextToDiv(t.divIdx,0,t.offset,e)}function appendTextToDiv(t,e,i,r){var n=a[t],t=s[t].str.substring(e,i),e=document.createTextNode(t);r?((i=i4t(document).createElement("span")).className=r,i.appendChild(e),n.appendChild(i)):n.appendChild(e)}},this.convertMatches=function(t){for(var e=0,i=0,r=this.textContent.items,n=r.length-1,s=null===this.findController?0:this.findController.state.query.length,a=[],l=0,o=t.length;l<o;l++){for(var c=t[l];e!==n&&c>=i+r[e].str.length;)i+=r[e].str.length,e++;e===r.length&&console.error("Could not find a matching mapping");var d={begin:{divIdx:e,offset:c-i}};for(c+=s;e!==n&&c>i+r[e].str.length;)i+=r[e].str.length,e++;d.end={divIdx:e,offset:c-i},a.push(d)}return a}};#AnnotationLayerBuilder=function(t){this.annotationLayerDiv=t.annotationLayerDiv,this.pageIdx=t.pageIndex,this.viewport=t.viewport,this.pdfPage=t.pdfPage,this.renderInteractiveForms=t.renderInteractiveForms,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.render=function(t){t.length}};currentPage=1;defaultScale=.9;currentScale=1;scaleRange={min:1,max:5};data;metadata;pdf;get pdfName(){return new i4t.url(i4t(this.element).attr(this.#PDF_URL_ATTR)).getFileName()}pages=[];scrollFn;scheme;constructor(t){var e;i4t(t).is("iframe")||i4t(t).is("embed")?super(t):(super(i4t(t).find("#x-insuit-pdf").value),t=i4t.config.UI.getOption("clearTransform"),e=i4t.config.UI.get(),i4t(t).isNumber()&&"CLEAR"===e.option&&(this.currentScale=t),i4t.event.addListener("scroll",()=>this.onScroll()),this.setLanguageObserver())}getPdfLength(){return this.pages.length}getRoleText(){return"PDF: "+this.pdfName}async renderPage(t,e){var i,r;!i4t(t).isNumber()||t<1||this.pages.length<t||((i=this.pages[t-1]).isRendered||i.isRendering?i4t(e).isFunction()&&(e.call(this),this.renderPage(t-1),this.renderPage(t+1),this.renderPage(t+2)):(i.isRendering=!0,i4t.logger.trace(`[PDFVIEWER] Se lanza la carga de la página ${t} del PDF`),r=await i.page.getAnnotations({intent:"display"}),i.ctx.annotationLayer.render(r),r=await i.page.getTextContent(),i4t(i.ctx.textLayer.textLayerDiv).removeClass("loading"),i.ctx.textLayer.setTextContent(r),await i.page.render(i.ctx).promise,i4t.logger.trace(`[PDFVIEWER] Finaliza la carga de la página ${t} del PDF`),i.isRendered=!0,i4t(e).isFunction()&&(e(),this.renderPage(t-1),this.renderPage(t+1),this.renderPage(t+2)),i.isRendering=!1))}async reload(t){await super.reload({isForce:!1,firstTime:!!t}),this.children.forEach(t=>this.setPdfMethodsToEachChildPage(t))}setPdfMethodsToEachChildPage(t){t.getNavigatorClass=()=>this.getNavigatorClass(),t.ssmlContentList=()=>this.ssmlContentList(),t.scaleUp=()=>{var t=this.currentScale+.5;t<=this.scaleRange.max&&(this.currentScale=t,this.refresh(parseInt(this.currentPage)))},t.scaleDown=()=>{var t=this.currentScale-.5;t>=this.scaleRange.min&&(this.currentScale=t,this.refresh(parseInt(this.currentPage)))}}onScroll(){let e=i4t.scroll.getTop(document.documentElement);this.pages.filter(t=>!t.isRendered&&Math.abs(t.ctx.pageTop-e)<1.5*t.ctx.viewport.height).forEach(t=>this.renderPage(t.number))}async preloadNextPage(){await this.renderPage(this.currentPage+1),await this.renderPage(this.currentPage+2)}refresh(t,e){for(var i=0;i<this.pages.length;i++)this.pages[i].ctx=this.preparePage(this.pages[i].page),this.pages[i].isRendered=!1;this.renderPage(t,e),1===t&&300<window.scrollY&&this.onScroll()}getElementLabel(){return i4t(this.metadata).isUndefinedOrNull()||i4t(this.metadata.info.Title).isNullOrEmptyString()?super.getElementLabel():this.metadata.info.Title}async#setPage(t){var e=i4t.config.template("pdf.page",{number:t}),e=(i4t(this.element).append(e),await this.pdf.getPage(t));this.pages[t-1]={number:t,page:e,ctx:this.preparePage(e),isRendered:!1},1!==t&&2!==t||await this.renderPage(t)}async loadPdf(){if(this.#isPdfLoading)return!1;var e,t=i4t(document.documentElement).find("#x-insuit-pdf").attr(this.#PDF_URL_ATTR);if(i4t(t).isNullOrEmptyString())return!1;this.#isPdfLoading=!0;t=new i4t.url(t).toString();try{e=await this.getPdfContent(t),this.pdf=e,this.metadata=await e.getMetadata();for(let t=1;t<=e._pdfInfo.numPages;t++)await this.#setPage(t);return await this.reload(),!0}catch(t){return i4t.logger.error(t),!1}finally{this.#isPdfLoading=!1}}async getPdfContent(e){let i;try{i=await i4t.ajax.fetch(e)}catch(t){i=await i4t.api.downloadPDF({host:i4t.url.currentHost,url:e})}return i=await i.arrayBuffer(),pdfjsLib.getDocument(i).promise}getPdfScale(t){var t=t.getViewport({scale:1}).width,t=i4t.userAgent.windowWidth()/t,e=this.defaultScale+this.currentScale/2;return t<e?t:e}preparePage(t){var e=t.getViewport({scale:this.getPdfScale(t)}),i=i4t.find("#pdf-page-"+t.pageNumber),r=i.find(".pdf-canvas-layer"),n=r.val().getContext("2d"),s=i.find(".pdf-text-layer"),a=i.find(".pdf-annotation-layer"),l=new this.#TextLayerBuilder({textLayerDiv:s.val(),viewport:e,pageIndex:t.pageNumber,pdfPage:t}),t=new this.#AnnotationLayerBuilder({annotationLayerDiv:a.val(),viewport:e,pageIndex:t.pageNumber,pdfPage:t}),o=i4t.config.UI.get();return s.html(""),a.html(""),i.style("width",e.width+"px"),i.style("height",e.height+"px"),r.val().height=e.height,r.val().width=e.width,s.style("offset",`${r.value.offsetTop}px ${r.val().offsetLeft}px`),a={canvasContext:n,viewport:e,textLayer:l,annotationLayer:t,pageTop:i4t(l.textLayerDiv).offset().top},"NavManager"!==o.manager&&"CLEAR"!==o.option&&"SENIOR"!==o.option||(this.scheme=i4t.config.UI.getOption("clearScheme"),i=i4t.config.get("clear.clearSchemes")[this.scheme],i4t(i).isUndefinedOrNull())||(a.pageColors={background:i4t.config.get("clear.clearSchemes")[this.scheme].background,foreground:i4t.config.get("clear.clearSchemes")[this.scheme].fontColor}),a}getData(){try{for(var t=this.data,e=atob(t),i=new Uint8Array(e.length),r=0;r<e.length;++r)i[r]=e.charCodeAt(r);return i.buffer}catch(t){return i4t.logger.warning("No se ha podido leer el PDF",t),new Uint8Array(0).buffer}}getNavigatorClass(){return"PdfNavigator"}download(){var i=this;this.pdf.getData().then(function(t){var e=URL.createObjectURL(new Blob([t],{type:"application/pdf"})),t=i4t(document).createElement("a");t.href=e,t.download=i.pdfName,t.click(),i4t(function(){URL.revokeObjectURL(e)}).defer()}).catch(t=>i4t.logger.error(t))}setLanguageObserver(){i4t(document.documentElement).addObserver(function(t){i4t(t.attributeName).isUndefinedOrNull()||"lang"!==t.attributeName||i4t.config.setLanguage(i4t(document.documentElement).attr("lang"))&&(t=i4t.config.get("cdn.service")+i4t.config.get("cdn.text.path")+i4t.config.getLanguage()+"/"+i4t.config.get("cdn.text.file"),i4t.js.services.I18nService.requestTexts(t).then(i4t.js.services.I18nService.reloadAllTexts),i4t.js.services.ModelService.setInDOM())},null,{childList:!1,attributes:!0,characterData:!1,subtree:!1,attributeFilter:["lang"]})}setPdfObserver(){i4t(this.element).addObserver(t=>{i4t(t.attributeName).isUndefinedOrNull()||t.attributeName!==this.#PDF_URL_ATTR||(t=i4t(document.documentElement).find("#x-insuit-pdf").attr(this.#PDF_URL_ATTR),i4t(t).isNullOrEmptyString())||this.checkPdfUrl()},null,{childList:!1,attributes:!0,characterData:!1,subtree:!1,attributeFilter:[this.#PDF_URL_ATTR]})}ssmlContentList(){let t,e,i,r,n=this.getTextDivs(),s=[],a=this instanceof i4t.js.roles.pdfRole?this:this.parent;return s.push(i4t.js.services.I18nService.get("pdf_page_number_of_total",{number:a.currentPage,total:a.pages.length})),n.each(function(){i4t(this.attr(i4t.js.roles.insuitUuid)).isNullOrEmptyString()&&this.attr(i4t.js.roles.insuitUuid,i4t.generateUUID()),r={text:this.text(),textNodes:[this.attr(i4t.js.roles.insuitUuid)]},i=this.val().dataset,e={angle:parseInt(i.angle),height:parseInt(i.canvasHeight),width:parseInt(i.canvasWidth),fontName:i.fontName,fontSize:parseInt(i.fontSize),left:parseInt(i.left),top:parseInt(i.top)},!i4t(t).isUndefinedOrNull()&&t.fontName===e.fontName&&parseInt(e.top)<parseInt(t.top+t.fontSize)&&((r=s.pop()).textNodes.push(this.attr(i4t.js.roles.insuitUuid)),r.text=r.text+(t.left<e.left&&parseInt(t.left+t.width+t.fontSize)>e.left?"":" ")+this.text()),i4t(r.text).isNullOrEmptyString()||/^\s+$/.test(r.text)||(s.push(r),t=e)}),s}getTextDivs(){var t;return i4t(this.element).isElement()&&i4t(this.element).find(".pdf-text-layer").isElement()&&(t=i4t(this.element).find(`#pdf-page-${this.currentPage} .pdf-text-layer`),i4t(t).isElement())?t.children():i4t([])}toAction(){var t;if(i4t(this.element).is("iframe")||i4t(this.element).is("embed"))return t=new i4t.url(i4t(this.element).attr("src")).toString(),i4t.js.services.PdfService.launchPdfViewer(t),!0}static#clearSpaces(e){i4t(e).keys().each(function(){var t=this.val();e[t].lines=e[t].lines.filter(function(t){return!i4t(t.lineDiv.textContent).isNullOrEmptyString()}),e[t].lines.length||delete e[t]})}static#getCorrespondingColumn(e,i,r,n,s){var t,a=null,l=[];return 0===i4t(e).keys().length()?1:(i4t(e).keys().each(function addNewLineToColumn(){var t=this.val();l.push(Math.abs(e[t].start+n-i)+Math.abs(e[t].end+n-r)),e[t].start-n<i&&e[t].end+n>r&&(a=t,s)&&((i4t(e[a].start).isUndefinedOrNull()||e[a].start>i)&&(e[a].start=i),i4t(e[a].end).isUndefinedOrNull()||e[a].end<r)&&(e[a].end=r)}),i4t(a).isUndefinedOrNull()&&(t=Math.min.apply(Math,l),a=-1<l.indexOf(t)?(l.indexOf(t)+1).toString():1),a)}static reorder(t){let c=this;if(i4t(t).isEmpty())return t;t.sort(function sortHorizontally(t,e){return parseInt(i4t(t).attr("data-left"))-parseInt(i4t(e).attr("data-left"))}).sort(function sortVertically(t,e){return parseInt(i4t(t).attr("data-top"))-parseInt(i4t(e).attr("data-top"))});function iI(){e.push(this.val().lines.map(function convertToDiv(t){return t.lineDiv}))}var d,u={},e=[],h=parseInt(i4t(t[0]).attr("data-font-size")),m=1.5*h;return t.forEach(function separateLines(e){var t,i=parseFloat(i4t(e).attr("data-top")),r=parseFloat(i4t(e).attr("data-left")),n=parseFloat(i4t(e).attr("data-canvas-width")),s=r+n,a=parseInt(i4t(e).attr("data-font-size")),l=!i4t(d).isUndefinedOrNull()&&h!==a,o=5<i4t(e).text().trim().length;if(l&&(i4t(u).values().each(iI),u={},h=a),o&&(d=e),/^(\s)?(\S(\S\s|\s\S){3,})(\S?)$/.test(e.textContent)){let t=e.textContent.replace(/^(\s)?(\S(\S\s|\s\S){3,})(\S?)$/i,"$2$4");t=t.replace(/(\S)\s(?=\S)/g,"$1"),e.textContent=t}l=c.#getCorrespondingColumn(u,r,s,m,o),(u[l]||o)&&(u[l]?(t=(a=u[l].lines)[(a=a.length)-1].height,Math.abs(t-i)<2?(c.#clearSpaces(u),u[l]?(a=u[l].lines.length,u[l].end+m>r||!o?(s>u[l].end&&(u[l].end=s),t=i4t(u[l].lines[a-1].lineDiv),o="",/^.*\s$/.test(i4t(t).html())||/^\s.*$/.test(i4t(e).html())||(o=" "),t.html(i4t(t).html()+o+i4t(e).html()),t.attr("data-canvas-width",parseFloat(t.attr("data-canvas-width"))+n)):u[++l]={start:r,end:s,lines:[{height:i,lineDiv:e}]}):u[l]={start:r,end:s,lines:[{height:i,lineDiv:e}]}):u[l].lines.push({height:i,lineDiv:e})):u[l]={start:r,end:s,lines:[{height:i,lineDiv:e}]})}),i4t(u).values().each(function reorderEvery(){e.push(this.val().lines.map(function flat(t){return t.lineDiv}))}),e.flat(1/0)}destroy(){i4t(this.element).attr(this.#PDF_URL_ATTR,"").html(""),this.pages=[],this.pdf=null,this.children=[],this.currentPage=1}},i4t.js.roles.pdfViewerRole=class pdfViewerRole extends i4t.js.roles.AbstractRole{currentPdf;getNavigatorClass(){return"IframeNavigator"}},i4t.js.roles.readerRole=class readerRole extends i4t.js.roles.AbstractRole{getCleanClone(e,i){try{for(var t=i4t(document).createTreeWalker(e,NodeFilter.SHOW_TEXT),r=t.nextNode();r;)!i4t(r.textContent).trim().isNullOrEmptyString()&&r.parentNode&&i4t(r.parentNode.dataset.insuitUuid).isUndefinedOrNull()&&(r.parentNode.dataset.insuitUuid=i4t.generateUUID()),r=t.nextNode();i4t(e).findAll("img:not(["+i4t.js.roles.insuitUuid+"])").each(function(){this.isElement()&&this.attr(i4t.js.roles.insuitUuid,i4t.generateUUID())});var n=i4t(e).clone().val();return"html"===n.nodeName.toLowerCase()&&i4t(n).findAll("#"+i4t.config.get("generalContainer")+",head").each(function(){this.remove()}),i4t(n).findAll("script, noscript, style, link, map").each(function(){this.remove()}),i4t(i).isFunction()&&i(n),i4t([]).each(function(){this.remove()}),i4t(n).findAll("*[aria-labelledby]").each(function(){var t,e="",i=this.attr("aria-labelledby");if(!i4t(i).isNullOrEmptyString()){for(var i=i.split(" "),r=0;r<i.length;r++)t="*[id='"+i[r].replace("#","")+"']",(t=i4t(document.body).find(t)).isElement()&&(e+=t.html());i4t(e).isNullOrEmptyString()||this.html(e)}}),i4t(n).findAll("label[for]").each(function(){var t=this.attr("for");i4t(t).isNullOrEmptyString()||(t="*[id='"+t.replace("#","")+"']",(t=this.find(t)).isElement()&&this.before(t),this.remove())}),i4t(document.body).findAll("*[aria-describedby]").each(function(){var t,e=this.attr("aria-describedby");if(!i4t(e).isNullOrEmptyString())for(var e=e.split(" "),i=0;i<e.length;i++)t="*[id='"+e[i].replace("#","")+"']",(t=i4t(n).find(t)).isElement()&&t.remove()}),i4t(document.body).findAll("*[aria-detail]").each(function(){var t=this.attr("aria-detail");i4t(t).isNullOrEmptyString()||(t="*[id='"+t.replace("#","")+"']",(t=i4t(n).find(t)).isElement()&&t.remove())}),i4t(n).findAll("br").each(function(){this.html(".")}),i4t(n).findAll('*[aria-hidden="true"]').each(function(){this.remove()}),n}catch(t){i=i4t(e).isElement()?i4t(e).cssPath():"";i4t.logger.warning("No se ha podido clonar y limpiar el elemento: "+i,t)}return null}getRoleText(){return i4t.js.services.I18nService.get("role_AbstractRole")}},i4t.js.roles.tourRole=class tourRole extends i4t.js.roles.AbstractRole{constructor(t){super(t),this.reload()}getNavigatorClass(){return"TourNavigator"}},i4t.js.roles.videoRole=class videoRole extends i4t.js.roles.AbstractRole{supportedPlatforms={youtube:"youtube",vimeo:"vimeo",jwplayer:"jwplayer",flowplayer:"flowplayer"};currentPlatform=null;title="";isFullscreen=!1;constructor(t){super(t),this.setAllowFeaturePolice(),this.currentPlatform=this.detectPlatform(),i4t(t).is("iframe")&&i4t(t).addEventListener("load",()=>{this.destroy(),this.parent.reload()}),this.setMediaTitle()}whenInsuitActive(){this.currentPlatform===this.supportedPlatforms.youtube&&this.checkYoutubeParams(this.getMultimediaUrl())}setAllowFeaturePolice(){var t=this.getVideoObject();(t.is("iframe")||t.is("object"))&&(t.removeAttr("allowfullscreen"),t.removeAttr("gesture"),t.attr("allow","fullscreen; autoplay"))}detectPlatform(){var t=this.getMultimediaUrl();if(!i4t(t).isNullOrEmptyString()){if(-1<t.indexOf(this.supportedPlatforms.youtube))return this.supportedPlatforms.youtube;if(-1<t.indexOf(this.supportedPlatforms.vimeo))return this.supportedPlatforms.vimeo}return!i4t(this.element.id).isNullOrEmptyString()&&i4t(window.jwplayer).isFunction()&&i4t(window.jwplayer(this.element.id).getPlaylist).isFunction()&&i4t(window.jwplayer(this.element.id).getPlaylist()).isArray()?this.supportedPlatforms.jwplayer:i4t(window.flowplayer).isFunction()&&!i4t(window.flowplayer(this.element)).isUndefinedOrNull()?this.supportedPlatforms.flowplayer:null}checkYoutubeParams(t){var e=!1,i=this.getVideoObject(),r=new i4t.url(t);(t.indexOf("enablejsapi")<0||-1<t.indexOf("enablejsapi=0"))&&(r.addParam("enablejsapi",1),e=!0),-1<t.indexOf("autoplay")&&(r.removeParam("autoplay"),e=!0),t.indexOf("cc_load_policy=1")<0&&(r.addParam("cc_load_policy",1),e=!0),e&&"iframe"===i.val().nodeName.toLowerCase()&&i.attr("src",r.toString())}getMultimediaUrl(){var t;if(i=i4t(this.element).attr("data-insuit-url"),i4t(i).isNullOrEmptyString()){switch((t=this.getVideoObject()).val().nodeName.toLowerCase()){case"object":var e,i=t.attr("data");i4t(i).isNullOrEmptyString()&&(e=t.find('param[name="movie"]')).isElement()&&(i=e.attr("value"));break;case"embed":case"iframe":case"audio":case"video":i=t.attr("src")}if(i4t(i).isNullOrEmptyString())try{return window.jwplayer(this.element.id).getPlaylist()[0].file}catch(t){i4t.logger.warning("No se encontro elemento JWplayer")}}return i}ssmlContentList(){return this.ssmlLabelList()}getElementLabel(){var t=i4t(this.element).attr("title");return i4t(t).isUndefinedOrNull()&&(t=super.getElementLabel(),i4t(t).isUndefinedOrNull())?i4t.js.services.I18nService.get("video_videoNoTitle"):t}setMediaTitle(){switch(this.currentPlatform){case this.supportedPlatforms.youtube:this.setYoutubeTitle();break;case this.supportedPlatforms.vimeo:this.setVimeoTitle();break;case this.supportedPlatforms.jwplayer:this.setJwplayerTitle();break;case this.supportedPlatforms.flowplayer:this.setFlowplayerTitle()}}setFlowplayerTitle(){var t=window.flowplayer(this.element);i4t(t.video).isUndefinedOrNull()||i4t(t.video.title).isNullOrEmptyString()||i4t(this.element).attr("title",t.video.title)}setYoutubeTitle(){var i,t=this.getMultimediaUrl(),r=this;i4t(t).isNullOrEmptyString()||(i=this.youtubeUrlParser(t),i4t(i).isNullOrEmptyString())||i4t.ajax.get({url:"https://www.googleapis.com/youtube/v3/videos",parameters:{part:"snippet",key:"AIzaSyBazTvd420WOklnrM7nfoBF0TYpriv91Lo",id:i},onSuccess(t){var e;try{e=i4t(t.response.body).toJSON(),!i4t(e.items).isUndefinedOrNull()&&0<e.items.length&&!i4t(e.items[0].snippet).isUndefinedOrNull()&&!i4t(e.items[0].snippet.title).isNullOrEmptyString()?i4t(r.element).attr("title",e.items[0].snippet.title):i4t(i4t(r.element).attr("title")).isUndefinedOrNull()&&i4t(r.element).attr("title",i4t.js.services.I18nService.get("youtube_video"))}catch(t){i4t(i4t(r.element).attr("title")).isUndefinedOrNull()&&i4t(r.element).attr("title",i4t.js.services.I18nService.get("youtube_video")),i4t.logger.warning("Recuperando el título del video youtube: "+i,t)}},onError(){i4t.logger.warning("Recuperando el título del video youtube: "+i)}})}youtubeUrlParser(t){t=t.match(/^.*((youtu\.be\/+)|(v\/+)|(\/u\/\w\/+)|(embed\/+)|(watch\?))\??v?=?([^#&?]*).*/);return t&&11===t[7].length?t[7]:""}setVimeoTitle(){var i=this,r=this.getMultimediaUrl();if(!i4t(r).isNullOrEmptyString())return i4t.ajax.get({url:"https://vimeo.com/api/oembed.json?url="+r,onSuccess(t){var e;try{e=i4t(t.response.body).toJSON(),i4t(i.element).attr("title",e.title)}catch(t){i4t.logger.warning("Recuperando el título del video vimeo: "+r,t)}},onError(){i4t.logger.warning("Recuperando el título del video vimeo: "+r)}})}vimeoUrlParser(t){t=t.match(/^(https?:)?\/\/([^.]*\.)?vimeo.com\/((video\/)|([^?]+\?.*clip_id=))([\d]+).*/);return t?t[6]:""}setJwplayerTitle(){try{i4t(this.element).attr("title",window.jwplayer(this.element.id).getPlaylist()[0].title)}catch(t){i4t.logger.error("Recuperando Titulo del video jwplayer",t)}}getVideoObject(){var t;return!/iframe|object|embed|audio|video/.test(this.element.nodeName.toLowerCase())&&(t=i4t(this.element).find("iframe, object, embed, audio, video")).isElement()?t:i4t(this.element)}getNavigatorClass(){switch(this.currentPlatform){case this.supportedPlatforms.youtube:return"YoutubeMultimediaNavigator";case this.supportedPlatforms.vimeo:return"VimeoMultimediaNavigator";case this.supportedPlatforms.jwplayer:return"JwplayerMultimediaNavigator";case this.supportedPlatforms.flowplayer:return"FlowplayerMultimediaNavigator";default:return"DefaultMultimediaNavigator"}}toggleFullscreen(){this.isFullscreen?this.removeFullscreen():this.activateFullscreen()}activateFullscreen(){let t=i4t(this.element),e=t.attr("style"),i=i4t.find("#x-insuit-full-screen-video-background");this.isFullscreen=!0,i.isElement()||(i=i4t(document).createElement("div"),t.before(i),i4t(i).attr("id","x-insuit-full-screen-video-background")),t.addClass("x-insuit-full-screen"),i4t(e).isNullOrEmptyString()||!i4t(e).includes("height")&&!i4t(e).includes("width")||t.hasAttribute("data-insuit-style")||(t.style("height",""),t.style("width",""),t.attr("data-insuit-style",e)),t.style("height",i4t.userAgent.windowHeight()-i4t.htmlElement.insuitGeneralContainer().find("#x-insuit-bar").offset().height,!0),this.removeTransformsOnParents(this.element)}removeTransformsOnParents(t){let e=i4t(t).parent();for(;e.isElement();)e.addClass("x-insuit-no-transform"),e=e.parent()}removeFullscreen(){var t=i4t(this.element);this.isFullscreen=!1,i4t.findAll(".x-insuit-no-transform").forEach(t=>i4t(t).removeClass("x-insuit-no-transform")),i4t.find("#x-insuit-full-screen-video-background").remove(),t.hasAttribute("data-insuit-style")&&(t.style("height",""),t.attr("style",t.attr("data-insuit-style")),t.removeAttr("data-insuit-style")),t.removeClass("x-insuit-full-screen")}toAction(){return!1}},i4t.js.roles.dialogRole=class dialogRole extends i4t.js.roles.AbstractRole{toAction(){return!1}},i4t.js.roles.documentRole=class documentRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.feedRole=class feedRole extends i4t.js.roles.AbstractRole{descendentChildren=["article"]},i4t.js.roles.formRole=class formRole extends i4t.js.roles.AbstractRole{visibleObserver(t){this.observer=i4t(this.element).addObserver(null,function(){t()}),this.timerLive=i4t(function(){t()}).delay(this.timeToLiveSleep/1e3)}submit(){var t;i4t(this.element.submit).isFunction()?this.element.submit():(t=i4t(this.element).find("input[type=submit]")).isElement()?t.click():i4t.event.dispatch("submit",this.element)}onLoad(t){var e=this.getVisibleLength(),i=this;e<=0&&i4t(this.observer).isUndefinedOrNull()?this.visibleObserver(function(){i4t(i.timerLive).isUndefinedOrNull()||window.clearTimeout(i.timerLive),i.timerLive=i4t(function(){i.timerLive=null,i.removeObserver(),t()}).delay(i.timeToLiveSleep/1e3)}):t()}getNavigatorClass(){return"FormSearchNavigator"}},i4t.js.roles.gridcellRole=class gridcellRole extends i4t.js.roles.cellRole{getTableParent(){for(var t=this.parent;t instanceof i4t.js.roles.gridRole||t instanceof i4t.js.roles.rowRole;){if(t instanceof i4t.js.roles.gridRole)return t;t=t.parent}return null}},i4t.js.roles.groupRole=class groupRole extends i4t.js.roles.AbstractRole{grammar="group";getValue(){return""}getElementLabel(){var t=i4t(this.element);return t.isElement()?(t=t.find("legend")).isElement()?t.val():super.getElementLabel():null}isVisible(){var t=!1;return i4t(this.children).each(function(){if(t=this.val().isVisible())return!1}),t}isGroup(){for(var t,e=0;e<this.children.length;e++)if("input"!==(t=this.children[e]).element.nodeName.toLowerCase()||i4t(t.element.type).isUndefinedOrNull()||"radio"!==t.element.type&&"checkbox"!==t.element.type)return!1;return!0}getNavigatorClass(){return this.isGroup()?(this.grammar="group","GroupFormNavigator"):(this.grammar=null,"DefaultNavigator")}},i4t.js.roles.imgRole=class imgRole extends i4t.js.roles.AbstractRole{getElementLabel(){var t=i4t(this.element);return t.isElement()&&(t=t.attr("alt"),!i4t(t).isNullOrEmptyString())?t:super.getElementLabel()}ssmlContentList(){return this.ssmlLabelList()}},i4t.js.roles.linkRole=class linkRole extends i4t.js.roles.AbstractCommandRole{isAreaMap(){return"area"===this.element.tagName.toLowerCase()}isA(){return"a"===this.element.tagName.toLowerCase()}getElemToAction(){return this.isA()||this.isAreaMap()?this.element:super.getElemToAction()}getLeft(){var t=0;return this.isAreaMap()?(t=this.getCoordinates().x,i4t(this.parent).isUndefinedOrNull()||(t+=this.parent.getLeft()),t):super.getLeft()}getElementLabel(){var t,e=i4t(this.element);if(e.isElement()){if(this.isAreaMap()&&(t=e.attr("alt"),!i4t(t).isNullOrEmptyString()))return t;if(t=e.attr("title"),!i4t(t).isNullOrEmptyString())return t;if(t=this.textContent(),!i4t(t).isUndefinedOrNull())return t}return null}getTop(){var t=0;return this.isAreaMap()?(t=this.getCoordinates().y,i4t(this.parent).isUndefinedOrNull()||(t+=this.parent.getTop()),t):super.getTop()}getCoordinates(){var t,e,i,r={type:"DEFAULT",x:0,y:0},n=i4t(this.element).attr("coords");if(!i4t(n).isNullOrEmptyString())switch(i=n.split(","),r.x=parseInt(i[0],10),r.y=parseInt(i[1],10),i.length){case 3:r.type="CIRCLE",r.radius=i[2];break;case 4:r.type="SQUARE",r.width=parseInt(i[2],10),r.height=parseInt(i[3],10);break;default:if(4<i.length)for(r.type="POLYGON",t=2;t<i.length;t+=2)r["x"+(e=t/2)]=parseInt(i[t],10),r["y"+e]=parseInt(i[t+1],10)}return r}},i4t.js.roles.listboxRole=class listboxRole extends i4t.js.roles.AbstractRole{descendentChildren=["option"];grammar="list";constructor(t){var e=i4t(t);super(t),e.is("select")&&e.hasAttribute("multiple")&&(e.attr("aria-multiselectable","true"),i4t.event.addListener("change",function preventDefaultScrollTopAfterSelection(t){t.preventDefault();var e=this,i=e.scrollTop;i4t(function returnToPreviousScroll(){e.scrollTop=i}).defer()},t))}ssmlContentList(){var t=[];return this.isMultiple()&&t.push(i4t.js.services.I18nService.get("multiselectable")),i4t(t).isEmpty()?super.ssmlContentList():super.ssmlContentList(t)}isMultiple(){return"true"===i4t(this.element).attr("aria-multiselectable")}isRequired(){return"true"===i4t(this.element).attr("aria-required")}getNavigatorClass(){return"ListBoxNavigator"}getOption(t){if(this.isValidIndex(t)){var e,i=0;1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children);for(var r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type&&0<e.children.length){if(!(e.children.length+i<=t))return e.children[t-i];i+=e.children.length}else if("optionRole"==e.type){if(t<=i)return e;i++}}return null}getValue(){var t=[];return this.eachOption(function(){i4t(this.isSelected).isFunction()&&this.isSelected()&&t.push(this.getValue())}),0==t.length?"":this.isMultiple()?t.join(", "):t[0]}select(t){t>=this.length()||(this.isMultiple()||(this.eachOption(function(){this.deSelect()}),i4t(this.element).is("select")&&(this.element.selectedIndex=t)),this.getOption(t).select())}deSelect(t){this.length()}isSelected(t){t=this.getOption(t);if(null!=t)return t.isSelected()}isValidIndex(t){return t<this.length()&&0<=t}eachOption(t){if(i4t(t).isFunction())for(var e,i,r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type&&0<e.children.length)for(i=0;i<e.children.length;i++)t.apply(e.children[i]);else t.apply(e)}length(){return i4t(this.element).is("select")?i4t(this.element).findAll("option").length():this.children.length}setCurrent(t){i4t(this.element).is("select")||null!=(t=this.getOption(t))&&(this.resetCurrent(),t.setCurrent())}resetCurrent(){i4t(this.element).removeAttr("data-insuit-current")}size(){var t,e=i4t(this.element).is("select"),i=0;return e&&this.isMultiple()?this.element.options.length:(!e&&0<this.length()&&(i=this.length(),e=this.children[0],(t=i4t.scroll.getScrollableElement(e.element))!==document.documentElement)&&(t=t.scrollHeight,e=e.getHeight(),i=Math.round(t/e)),i)}isExpanded(){return this.isVisible()}},i4t.js.roles.listitemRole=class listitemRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.listRole=class listRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.logRole=class logRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.mainRole=class mainRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.menubarRole=class menubarRole extends i4t.js.roles.AbstractRole{descendentChildren=["group","menuitem","menuitemcheckbox","menuitemradio"]},i4t.js.roles.menuitemRole=class menuitemRole extends i4t.js.roles.AbstractCommandRole{toAction(){return!(1<this.children.length)&&super.toAction()}getElementLabel(){var t=super.getElementLabel(),e=i4t(this.element);if(!i4t(t).isUndefinedOrNull())return t;if(e.isElement()){for(var i=e.children().val(),r=0;r<i.length;r++)if("a"===i[r].nodeName.toLowerCase())return new i4t.js.roles.linkRole(i[r]).getLabelObject();if(t=this.textContent(),!i4t(t).isUndefinedOrNull())return t}return null}getRoleText(){var t=i4t(this.element).attr("aria-haspopup");return i4t(t).isNullOrEmptyString()||"menu"!==t?super.getRoleText():i4t.js.services.I18nService.get("role_menuitem_with_submenu")}},i4t.js.roles.menuRole=class menuRole extends i4t.js.roles.AbstractRole{descendentChildren=["group","menuitem","menuitemcheckbox","menuitemradio"]},i4t.js.roles.navigationRole=class navigationRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.optgroupRole=class optgroupRole extends i4t.js.roles.AbstractRole{grammar="optgroup";getValue(){return null}getLabel(){var t=i4t(this.element);return i4t(t.attr("label").trim()).isNullOrEmptyString()?"":t.attr("label").trim()}isVisible(){var t=!1;return i4t(this.children).each(function(){if(t=this.val().isVisible())return!1}),t}isOptgroup(){for(var t=0;t<this.children.length;t++)if("option"!==this.children[t].element.nodeName.toLowerCase())return!1;return!0}getNavigatorClass(){return"ComboBoxFormNavigator"}},i4t.js.roles.optionRole=class optionRole extends i4t.js.roles.AbstractRoleForm{grammar="combobox";getElementLabel(){var t=super.getElementLabel();return i4t(t).isUndefinedOrNull()&&(t=this.getValue(),i4t(t).isUndefinedOrNull())?null:t}getOptgroupLabel(){return this.parent&&"optgroupRole"==this.parent.type?i4t.js.services.I18nService.get("combobox_optgroup_prefix",{value:""})+": "+this.parent.getLabel():""}getValue(t){var e,i=i4t(this.element).attr("label");return i4t(i).isNullOrEmptyString()&&(i=this.textContent()),e=this.getSayAs(),t&&null!=e&&(t=i4t(e.format).isUndefinedOrNull()?"":' format="'+e.format+'"',i=']]><say-as interpret-as="'+e.interpretedAs+'"'+t+">"+i+"</say-as><![CDATA["),i}isOption(){return"option"===this.element.nodeName.toLowerCase()}deSelect(){this.isOption()&&(this.element.selected=!1),i4t(this.element).attr("aria-selected","false")}select(){this.isOption()?this.element.selected=!0:this.toAction(),i4t(this.element).attr("aria-selected","true")}isSelected(){this.sincronizeAriaSelected();var t=i4t(this.element).attr("aria-selected");return!i4t(t).isNullOrEmptyString()&&"true"===t||this.isOption()&&this.element.selected}resetCurrent(){i4t(this.element).attr("aria-selected","false").removeAttr("data-insuit-current"),i4t(this.element).dispatchEvent("mouseleave"),this.element.blur()}setCurrent(){i4t(this.element).attr("data-insuit-current","").attr("aria-selected","true"),this.element.focus(),i4t(this.element).dispatchEvent("mouseenter")}ssmlLabelList(){return super.ssmlLabelList(this.getOptgroupLabel(),"")}ssmlContentList(){return this.ssmlLabelList()}sincronizeAriaSelected(){this.isOption()&&i4t(this.element).attr("aria-selected",this.element.selected?"true":"false")}getNavigatorClass(){return"ComboBoxFormNavigator"}onFocus(){this.parent instanceof i4t.js.roles.comboboxRole&&i4t(this.parent.element).attr("aria-activedescendant",i4t(this.element).id())}setRoleListeners(){i4t.event.addListener("focus",this.onFocus,this.element)}destroy(){i4t.event.removeListener("focus",this.onFocus,this.element),super.destroy()}},i4t.js.roles.progressbarRole=class progressbarRole extends i4t.js.roles.AbstractRoleRange{defaultMax=1;defaultMin=0;observer=null;constructor(t){super(t),this.updateValue()}getValue(){var t=i4t(this.element);return i4t(t.attr("aria-valuetext")).isNullOrEmptyString()?i4t(this.element).attr("aria-valuenow"):t.attr("aria-valuetext")}updateValue(){var t=i4t(this.element),e=t.attr("value"),i=i4t.js.services.I18nService.get("progressbar_indeterminate_value");i4t(e).isUndefinedOrNull()?(t.attr("aria-valuetext",i),t.removeAttr("aria-valuenow")):(t.attr("aria-valuetext")===i&&t.removeAttr("aria-valuetext"),t.attr("aria-valuenow",e))}setRoleListeners(){this.observer=i4t(this.element).addObserver(this.onChange,i4t.function.empty,{attributes:!0,attributeFilter:["value"],attributeOldValue:!0}),i4t.event.addListener("change",this.onChange,this.element)}onChange(){this.updateValue(),i4t.dispatchIEvent("Insert")}destroy(){this.observer.disconnect(),super.destroy()}},i4t.js.roles.radiogroupRole=class radiogroupRole extends i4t.js.roles.AbstractRoleForm{descendentChildren=["radio"];grammar="group";#onChangeListener=t=>this.onChange(t);getValue(){return""}isVisible(){var t=!1;return i4t(this.children).each(function(){if(t=this.val().isVisible())return!1}),t}getNavigatorClass(){return"GroupFormNavigator"}checkStatus(){super.checkStatus(),i4t(this.children).forEach(function(t){t?.checkStatus?.()})}onChange(){this.checkStatus()}setRoleListeners(){i4t.event.addListener("change",this.#onChangeListener,this.element)}destroy(){i4t.event.removeListener("change",this.#onChangeListener,this.element),super.destroy()}},i4t.js.roles.radioRole=class radioRole extends i4t.js.roles.AbstractRoleForm{grammar="check";#onChangeListener=t=>i4t(()=>this.onChange(t)).defer();constructor(t){super(t);t=i4t(t);t.is("input")?t.attr("aria-checked",t.value.checked?"true":"false"):t.find("input[type=radio]").isElement()&&t.attr("aria-checked",t.find("input[type=radio]").value.checked?"true":"false")}get checked(){var t,e=i4t(this.element);return e.is("input")?e.value.checked:(t=this.getElementToAction(),i4t(t).is("input")?t.checked:"true"===e.attr("aria-checked"))}getElementToAction(){var t=i4t(this.element);if(!t.is("input")){var e=t=>t.isElement()&&t.is("input")?t.value:null,i=t.attr("for");if(!i4t(i).isNullOrEmptyString()){var i=e(i4t.find("#"+i));if(i)return i}if(i=e(t.next()))return i;if(i=e(t.previous()))return i;if(i=e(t.find("input[type=radio]")))return i;if((e=t.parent()).isElement()){i=e.findAll("input[type=radio]");if(1===i.length)return i[0].value}}return this.element}getElementLabel(){var t=super.getElementLabel(),e=i4t(this.element),i=i4t(this.getElementToAction());if(!i4t(t).isUndefinedOrNull())return t;if(e.isElement()){if(t=i.attr("value"),!i4t(t).isNullOrEmptyString())return t;if(t=i.attr("name"),!i4t(t).isNullOrEmptyString())return t}return!i.is("input")&&i4t(e.attr("aria-label")).isNullOrEmptyString()&&i4t(e.attr("aria-labelledby")).isNullOrEmptyString()&&(t=i.attr("title"),i4t(t).isNullOrEmptyString()&&(t=i.text()),e.attr("aria-label",t)),null}ssmlLabelList(t,e){var i=this.getElementToAction();return i4t(i.checked).isUndefinedOrNull()||(e=i4t.js.services.I18nService.get(i.checked?"checked":"unchecked")),super.ssmlLabelList(t,e)}ssmlContentList(){return this.ssmlLabelList()}deSelect(){this.getElementToAction().checked=!1}select(){var t=i4t(this.getElementToAction());t.value.disabled||t.value.isDisabled||(t.is("input")?(i4t(this.element).click(),t.value.checked=!0):(this.parent instanceof i4t.js.roles.radiogroupRole&&this.parent.children.forEach(t=>t?.deSelect?.()),t.click()))}checkStatus(){super.checkStatus(),i4t(this.element).attr("aria-checked",this.getElementToAction().checked?"true":"false")}getNavigatorClass(){return"RadioFormNavigator"}getTextValue(){return i4t.js.services.I18nService.get(this.getElementToAction().checked?"checked":"unchecked")}setRoleListeners(){i4t.event.removeListener("change",this.#onChangeListener,this.element),i4t.event.removeListener("click",this.#onChangeListener,this.element),i4t.event.addListener("change",this.#onChangeListener,this.element),i4t.event.addListener("click",this.#onChangeListener,this.element)}onChange(){this.checkStatus(),this.parent?.checkStatus?.()}destroy(){i4t.event.removeListener("change",this.#onChangeListener,this.element),i4t.event.removeListener("click",this.#onChangeListener,this.element),super.destroy()}},i4t.js.roles.regionRole=class regionRole extends i4t.js.roles.AbstractRole{},i4t.js.roles.rowgroupRole=class rowgroupRole extends i4t.js.roles.AbstractRole{grammar="group";descendentChildren=["row"];getValue(){return""}getElementLabel(){var t=i4t(this.element);return t.isElement()?(t=t.find("legend")).isElement()?t.val():super.getElementLabel():null}isVisible(){var t=!1;return i4t(this.children).each(function(){if(t=this.val().isVisible())return!1}),t}isGroup(){for(var t,e=0;e<this.children.length;e++)if("input"!==(t=this.children[e]).element.nodeName.toLowerCase()||i4t(t.element.type).isUndefinedOrNull()||"radio"!==t.element.type&&"checkbox"!==t.element.type)return!1;return!0}getNavigatorClass(){return this.isGroup()?(this.grammar="group","GroupFormNavigator"):(this.grammar=null,"DefaultNavigator")}},i4t.js.roles.rowheaderRole=class rowheaderRole extends i4t.js.roles.cellRole{},i4t.js.roles.rowRole=class rowRole extends i4t.js.roles.AbstractRole{descendentChildren=["cell","gridcell","rowheader","columnheader"];getRowTitle(){var t=[],e=parseInt(i4t(this.element).attr("aria-rowindex")),i=this.getTableParent(),r=i.getNumberOfRows(),i=i.children;return i4t(e).isNumber()||(e=i.indexOf(this)+1),i4t(r).isNumber()?i4t(e).isNumber()&&t.push(i4t.js.services.I18nService.get("number_of_total",{number:e,total:r})):i4t(e).isNumber()&&t.push(i4t.js.services.I18nService.get("row_number",{row:e})),t.join(",")}ssmlLabelList(){this.ssmlContentList()}ssmlContentList(t,i=0){var e=super.ssmlLabelList(null,this.getRowTitle()),r=this.getChildrenByStructure(),n=r.map(t=>{var e=i;return i+=t.children.length,t.ssmlContentList(e)}).flat(1/0),e=i4t(e).merge(n).val();return t||i4t(r).isEmpty()||e.push(i4t.js.services.I18nService.get("press_enter_to_navigate_cells")),e}getMaxRowspanChild(t){return t.reduce(function getCellWithMaxRowspan(t,e){var i=parseInt(i4t(t).attr("aria-rowspan")),r=parseInt(i4t(e).attr("aria-rowspan")),i=i4t(i).isNumber()?i:0;return(i4t(r).isNumber()?r:0)<i?t:e})}getTableParent(){for(var t=this.parent;t instanceof i4t.js.roles.tableRole||t instanceof i4t.js.roles.rowRole;){if(t instanceof i4t.js.roles.tableRole)return t;t=t.parent}return null}getNavigatorClass(){return"GridNavigator"}isHeaderRow(){return this.children.some(t=>"columnheaderRole"===t.type)}getRowIndex(){return this.getTableParent().children.indexOf(this)}getChildrenByStructure(){var t=this.getTableParent();let e=t.children;var i=e.indexOf(this);return i<0?[]:t.getTableStructure()[i].map(t=>e[t.row].children[t.cell]).filter(t=>!i4t(t).isUndefinedOrNull()).flat(1/0)}},i4t.js.roles.searchRole=class searchRole extends i4t.js.roles.formRole{},i4t.js.roles.sliderRole=class sliderRole extends i4t.js.roles.AbstractRoleRange{defaultMax=100;defaultMin=0;defaultValue=50;grammar="numeric";setValueEvents=["focus","pointerdown","mousedown","gotpointercapture","pointermove","mousemove","input","pointerup","mouseup","change","click"];getNavigatorClass(){return"SliderFormNavigator"}onChange(){i4t(this.element).attr("aria-valuenow",this.getValue())}destroy(){i4t.event.removeListener("change",this.onChange,this.element),super.destroy()}},i4t.js.roles.spinbuttonRole=class spinbuttonRole extends i4t.js.roles.AbstractRoleRange{defaultValue=0;descendentChildren=["button","textbox"];grammar="numeric";goUp(){var t;i4t(this.element).is("input")?this.setValue(this.getValue()+this.getRangeStep()):(t=i4t(this.children).filter(function getButtons(t){return t instanceof i4t.js.roles.buttonRole}).get(0),i4t(t).isUndefinedOrNull()||t.dispatchEvent("click"))}goDown(){var t;i4t(this.element).is("input")?this.setValue(this.getValue()-this.getRangeStep()):(t=i4t(this.children).filter(function getButtons(t){return t instanceof i4t.js.roles.buttonRole}).get(1),i4t(t).isUndefinedOrNull()||t.dispatchEvent("click"))}getValue(){var t;return i4t(this.element).is("input")?super.getValue():(t=i4t(this.children).filter(function getContent(t){return t instanceof i4t.js.roles.textboxRole}).get(0),i4t(t).isUndefinedOrNull()&&(t=this),parseInt(t.text()))}getNavigatorClass(){return"SpinButtonFormNavigator"}},i4t.js.roles.switchRole=class switchRole extends i4t.js.roles.checkboxRole{},i4t.js.roles.tableRole=class tableRole extends i4t.js.roles.AbstractRole{descendentChildren=["row","rowgroup"];structureMatrix=null;getTableStructure(){return i4t(this.structureMatrix).isUndefinedOrNull()&&(this.structureMatrix=this.#createTableStructureMatrix(this)),this.structureMatrix}getElementLabel(){var t=super.getElementLabel(),e=i4t(this.element);return e.isElement()?(e=e.find("caption")).isElement()?e.text():i4t(t).isObject()?t:null:null}ssmlLabelList(t){var e,i=[],r=parseInt(i4t(this.element).attr("aria-colcount")),n=parseInt(i4t(this.element).attr("aria-rowcount"));return i4t(r).isNumber()||(r=0<(e=this.getNumberOfColumns())?e:i4t(this.element).find("[role=row]").findAll("[role=cell]").length()),i4t(n).isNumber()||(n=i4t(this.element).findAll("[role=row]:not([aria-hidden=true])").length()),i.push(i4t.js.services.I18nService.get("table_total_columns",{number:r})),i.push(i4t.js.services.I18nService.get("table_total_rows",{number:n})),super.ssmlLabelList(t,i.join(","))}getNumberOfColumns(){var t=this.children.reduce((t,e)=>t&&e.children.length<t.children.length?t:e,null);return i4t(t).isUndefinedOrNull()?0:t.children.length}ssmlContentList(){let i=0;var t=this.children.map(t=>{var e=i;return i+=t.getChildrenByStructure().map(t=>t.children).flat(1/0).length,t.ssmlContentList(!0,e)}).flat(1/0);return t.unshift(i4t.js.services.I18nService.get("press_enter_to_navigate_rows")),t}getNumberOfRows(){var t=parseInt(i4t(this.element).attr("aria-rowcount"));return i4t(t).isNumber()?t:this.children.length}getNavigatorClass(){return"GridNavigator"}getHeaderRow(){return this.children.find(t=>t.isHeaderRow())}#createTableStructureMatrix(t){let e=t.children,s=this.#createEmptyMatrix(e.length,t.getNumberOfColumns());return s.forEach((t,r)=>{let n=0;t.forEach((t,i)=>{i4t(t).isUndefinedOrNull()&&(t=e[r].children[n],i4t(t).isUndefinedOrNull()?s[r][i]={row:r,cell:null}:t.hasRowSpan()?[...new Array(parseInt(i4t(t.element).attr("aria-rowspan")))].forEach((t,e)=>{s[r+e][i]={row:r,cell:n}}):s[r][i]={row:r,cell:n},n++)})}),s}#createEmptyMatrix(t,e){let i=[];return[...new Array(t)].forEach(()=>{let t=[];i.push(t),[...new Array(e)].forEach(()=>{t.push(null)})}),i}},i4t.js.roles.tablistRole=class tablistRole extends i4t.js.roles.AbstractCommandRole{descendentChildren=["tab"];deSelectAll(){let t;for(t=0;t<this.children.length;t++)this.children[t].deSelect()}ssmlContentList(){var t=[];return"true"===i4t(this.element).attr("aria-multiselectable")&&t.push(i4t.js.services.I18nService.get("multiselectable")),i4t(t).isEmpty()?super.ssmlContentList():super.ssmlContentList(t)}},i4t.js.roles.tabRole=class tabRole extends i4t.js.roles.AbstractCommandRole{getElementLabel(){var t=super.getElementLabel(),e=i4t(this.element);if(!i4t(t).isUndefinedOrNull())return t;if(e.isElement()){for(var i=e.children().val(),r=0;r<i.length;r++)if("a"===i[r].nodeName.toLowerCase())return new i4t.js.roles.linkRole(i[r]).getLabelObject();if(t=this.textContent(),!i4t(t).isUndefinedOrNull())return t}return null}toAction(){super.toAction()&&this.select()}deSelect(){i4t(this.element).attr("aria-selected","false")}select(){this.parent.deSelectAll(),i4t(this.element).attr("aria-selected","true")}},i4t.js.roles.textboxRole=class textboxRole extends i4t.js.roles.AbstractInputRole{#availableInsuitInputTypes=["date","datetime-local","month","week","time"];get grammar(){var t=this.getInputType(),e=i4t(this.element).attr("data-insuit-input-type");if(!i4t(t).isNullOrEmptyString()){if(!i4t(e).isNullOrEmptyString()&&i4t(this.#availableInsuitInputTypes).includes(e))return e;switch(t){case"number":case"tel":case"range":return"numeric";case"date":case"datetime-local":case"month":case"week":case"time":return t}}return"alphanumeric"}defaultFormat={date:"yyyy-mm-dd","datetime-local":"yyyy-mm-ddThh:MM",month:"yyyy-mm",week:"yyyy-Www",time:"hh:MM"};close(){i4t(this.element).attr("aria-expanded","false")}open(){i4t(this.element).attr("aria-expanded","true")}getOption(t){if(this.isValidIndex(t)){var e,i=0;1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children);for(var r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type&&0<e.children.length){if(!(e.children.length+i<=t))return e.children[t-i];i+=e.children.length}else if("optionRole"==e.type){if(t<=i)return e;i++}}return null}size(){return 1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children),this.children.map(t=>"optgroupRole"==t.type?t.children.length:"optionRole"==t.type?1:0).reduce((t,e)=>t+e,0)}isValidIndex(t){return t<this.size()&&0<=t}resetCurrent(){this.eachOption(function(){this.resetCurrent()})}setCurrent(t){this.isSelect()||null!=(t=this.getOption(t))&&(this.resetCurrent(),t.setCurrent())}constructor(t){super(t),i4t(t).is("textarea")&&"1"!==i4t(t).attr("rows")&&i4t(t).attr("aria-multiline","true")}getElementLabel(){var t=super.getElementLabel(),e=i4t(this.element);return!i4t(t).isUndefinedOrNull()||e.isElement()&&(t=e.attr("name"),!i4t(t).isNullOrEmptyString())?t:""}isAutocompleteWithList(){var t=i4t(this.element).attr("aria-autocomplete");return!i4t(t).isUndefinedOrNull()&&("list"==t||"both"==t)}isAutocompleteInline(){return"inline"===i4t(this.element).attr("aria-autocomplete")}getNavigatorClass(){if(this.isAutocompleteWithList())return"AutocompleteNavigator";switch(this.grammar){case"date":return"DateFormNavigator";case"datetime-local":return"DateTimeLocalFormNavigator";case"month":return"MonthFormNavigator";case"week":return"WeekFormNavigator";case"time":return"TimeFormNavigator";default:return"TextBoxFormNavigator"}}getInputType(){return"true"===i4t(this.element).attr("contenteditable")?"contenteditable":i4t(this.element.type).isNullOrEmptyString()?i4t(this.element).attr("type"):this.element.type}isMultiline(){return"true"===i4t(this.element).attr("aria-multiline")}getValue(){return"password"===this.element.type?i4t.js.services.I18nService.get("hidden"):this.element.value}toAction(){switch(this.grammar){case"date":case"datetime-local":case"month":case"week":case"time":break;default:super.toAction()}}selectedIndex(){var t,e;return i4t(this.element).is("selected")?this.element.selectedIndex:(t=0,e=!1,this.eachOption(function(){e||(i4t(this.isSelected).isFunction()&&this.isSelected()?e=!0:t++)}),e?t:-1)}eachOption(t){if(i4t(t).isFunction())for(var e,i,r=0;r<this.children.length;r++)if("optgroupRole"==(e=this.children[r]).type&&0<e.children.length)for(i=0;i<e.children.length;i++)t.apply(e.children[i]);else t.apply(e)}isExpanded(){return!0}isSelect(){return i4t(this.element).is("select")}getPopup(){var t=i4t(this.element).attr("aria-controls");return i4t(t).isNullOrEmptyString()?i4t(null):i4t.find("*[id='"+t+"']")}reloadChildren(){var t=this.getPopup();i4t.js.roles.getRoleByElement(t.val()).reload()}getActiveOption(){return 1==this.children.length&&"listboxRole"===this.children[0].type&&(this.children=this.children[0].children),this.children.map(t=>"optgroupRole"==t.type?t.children:t).flat(1/0).filter(t=>t.isSelected())[0]}getAutocompleteDescription(){var t=this.size(),e=[];return e.push(i4t.js.services.I18nService.get("number_of_results_autocomplete",{number:t})),t=(t=this.getActiveOption())?t.getValue(this):"",i4t(t).isNullOrEmptyString()||e.push(i4t.js.services.I18nService.get("form_element_value",{value:t})),e}select(t){t>=this.size()||(this.isSelect()?this.element.selectedIndex=t:this.getOption(t).select())}},i4t.js.roles.treeRole=class treeRole extends i4t.js.roles.AbstractRole{ssmlContentList(){var t=[];return"true"===i4t(this.element).attr("aria-multiselectable")&&t.push(i4t.js.services.I18nService.get("multiselectable")),i4t(t).isEmpty()?super.ssmlContentList():super.ssmlContentList(t)}},i4t.js.roles.gridRole=class gridRole extends i4t.js.roles.tableRole{descendentChildren=["row","rowgroup"];ssmlContentList(){var t=[];return"true"===i4t(this.element).attr("aria-multiselectable")&&t.push(i4t.js.services.I18nService.get("multiselectable")),i4t(t).isEmpty()?super.ssmlContentList():super.ssmlContentList(t)}getNavigatorClass(){return"GridNavigator"}},i4t.js.roles.searchboxRole=class searchboxRole extends i4t.js.roles.textboxRole{grammar="alphanumeric";getNavigatorClass(){return"SearchBoxFormNavigator"}},i4t.js.roles.treegridRole=class treegridRole extends i4t.js.roles.gridRole{},i4t.js.services.ContentTypeService=class ContentTypeService extends i4t.base{static#contentTypes={pdf:/application\/pdf/i,html:/text\/html/i};static async getContentTypeInfo(e){let i;try{i=await i4t.ajax.head({url:new i4t.url(e).toString(),removeRequestedWithHeader:!0}),i=Array.from(i.headers.entries()).reduce((t,[e,i])=>({...t,[e]:i}),{}),i=this.#getInfoFromHeaders(i,e)}catch(t){i=this.#getInfoFromHeaders(await this.#retryHeadRequestToHeaderService(e),e)}return i=i4t(i).isUndefinedOrNull()||this.cannotFollowRedirect(i)?this.#extractContentTypeInfoFromUrl(e):i}static cannotFollowRedirect(t){t=/HTTP\S+\s(\d+)\s\S+/.exec(t.response);return!t?.[1]||299<parseInt(t[1])}static#getInfoFromHeaders(t,e){var i=Object.entries(t).reduce((t,[e,i])=>(t[e.toLowerCase()]=i,t),{}),r=i4t(i["content-type"]).isNullOrEmptyString()?"text/html":i["content-type"];return{response:t[""],isPdf:this.#contentTypes.pdf.test(r),isHTML:this.#contentTypes.html.test(r),isDownload:this.#isAttachment(i),name:this.#getDownloadFileName(i,e)}}static launchDownloadModal(t,e=()=>{window.location.href=t},i=i4t.function.empty){var r=new i4t.url(t).getPage();window.confirm(i4t.js.services.I18nService.get("modal_confirm_download",{name:r}),e,i)}static#isAttachment(t){return!i4t(t["content-disposition"]).isUndefinedOrNull()&&i4t(t["content-disposition"].toUpperCase()).contains("ATTACHMENT")}static#getDownloadFileName(t,e){let i="",r=t["content-disposition"];return i4t(r).isUndefinedOrNull()||(i=/.+filename="([^;]+)"/.exec(r)),i4t(i).isNullOrEmptyString()?i=new i4t.url(e).getPage():i[1]}static#extractContentTypeInfoFromUrl(t){return{isPdf:/.*\.pdf.*/.test(t),isHTML:!/.*\.pdf.*/.test(t),isDownload:!1,name:new i4t.url(t).getPage()}}static async#retryHeadRequestToHeaderService(t){t=new i4t.url(t).toString();var e=await i4t.api.getHeadersFromURL({host:i4t.url.currentHost,url:t});return 200<=e.status&&e.status<300?e.json():{isPdf:!1,isHTML:!0,isDownload:!1,name:new i4t.url(t).getPage()}}},i4t.js.services.DictionaryService=class DictionaryService extends i4t.base{static#dictionary={};static set dictionary(t){Object.entries(t).forEach(([t,e])=>{e=Object.entries(e).map(([t,e])=>{try{return[new RegExp(t,"g"),e]}catch{return null}}).filter(t=>!!t),this.#dictionary[t]=e})}static get dictionary(){var t=i4t.config.get("lang.current");return this.#dictionary[t]||[]}static replaceWordsOnText(i){return this.dictionary.forEach(([t,e])=>{t.test(i)&&(i=i.replace(t,e))}),i}},i4t.js.services.DomainService=class DomainService{static async isUrlAccesible(t){var e,i;return 0===t.indexOf("javascript:")||0!==t.indexOf("mailto:")&&0!==t.indexOf("tel:")&&(i=new i4t.url,e=new i4t.url(t),i=i.isSameDomainAs(t)&&i.isSameProtocolAs(t),t=e.isV7Url(),!(!i&&!t)||200===(await i4t.api.checkProjectExist({host:e.getHost()})).status)}static launchConfirmModal(t,e,i=i4t.function.empty){i4t(e).isFunction()||(e=function(){window.location.href=t}),i4t(window.confirm).isNative()?this.#postponeConfirmModal(e,i):window.confirm(i4t.js.services.I18nService.get("modal_exit_link"),e,i)}static#postponeConfirmModal(t,e){let i=i4t(t).delay(5),r=()=>{window.clearTimeout(i),window.confirm(i4t.js.services.I18nService.get("modal_exit_link"),t,e),i4t.event.removeListener("insuit-load",r)};i4t.event.addListener("insuit-load",r)}static#originalOpen;static destroy(){i4t(this.#originalOpen).isUndefinedOrNull()||(XMLHttpRequest.prototype.open=this.#originalOpen)}},i4t.js.services.EasyReadService=class EasyReadService extends i4t.base{#easyReadClass="insuit-easy-read";#path="EasyReadService";constructor(e){super();var i=this,t=i4t.config.get("suit.protocol")+"//"+i4t.config.get("suit.domain")+i4t.config.get("suit.path")+this.#path+"/"+i4t.config.getLanguage(),r=(i4t(i4t.config.get("origin.protocol")).isNullOrEmptyString()?window.location.protocol:i4t.config.get("origin.protocol"))+"//"+(i4t(i4t.config.get("origin.domain")).isNullOrEmptyString()?window.location.host:i4t.config.get("origin.domain"))+window.location.pathname+window.location.search;i4t.ajax.get({url:t,parameters:{src:r},onSuccess:function(t){try{i.texts=i4t(t.response.body).toJSON()}catch(t){i4t.logger.warning("No se ha podido sacar el JSON de los textos de lectura fácil",t)}i4t(i.texts).isArray()||(i.texts=[]),i4t(e).isFunction()&&e.call(i,i.texts)},onError:function(){i.texts=[],i4t.logger.warning("No se ha podido construir el array de los textos de lectura fácil"),i4t(e).isFunction()&&e(i.texts)}})}set(){this.#changeTexts.call(this,!1)}reset(){this.#changeTexts.call(this,!0)}#changeTexts(t){var i,r=this;i4t(this.texts).each(function(){if(!this.isUndefinedOrNull())for(var e in i=this.val())try{r.#changeNode.call(r,e,i[e],t)}catch(t){i4t.logger.warning("Ha fallado la query: "+e+", en el easyreadservice",t)}})}#changeNode(t,e,i){var r=i4t.config.getLanguage(),n=this;i4t.findAll(t).each(function(t){i?(this.parent().removeClass(n.#easyReadClass),this.html(e.old[t][r])):(i4t(e.old).isUndefinedOrNull()&&(e.old={}),i4t(e.old[t]).isUndefinedOrNull()&&(e.old[t]={}),e.old[t][r]=this.html(),this.html(e.languages[r]),this.parent().addClass(n.#easyReadClass))})}},i4t.js.services.I18nService=class I18nService extends i4t.base{static#textDB;static#tiestos={};static#replacersDB={};static replaceWordsOnFunction(e){var t=i4t.config.get("lang.current"),i=i4t.config.get("project.code");return i4t(e).includes(i+"_")&&(this.#replacersDB[t]?.filter?.(t=>e.includes(t.key)))?.forEach?.(t=>{e=i4t(e).replace(t.key,t.value)}),e}static replaceWordsOnText(e){var t=i4t.config.get("lang.current"),i=i4t.config.get("project.code");if(i4t(e).includes(i)){if(i4t(this.#replacersDB[t]).isUndefinedOrNull())return i4t(e).isString()&&i4t(e).startsWith(i)?"":e;i=this.#replacersDB[t].find(t=>e===t.key);i&&(e=i4t(e).replace(i.key,i.value))}return e}static loadTexts(){var t=i4t.htmlElement.insuitGeneralContainer();t.isElement()&&(i4t.js.services.I18nService.#loadAllTitles(t),i4t.js.services.I18nService.#loadAllTextContents(t))}static reloadAllTexts(){var t=i4t.htmlElement.insuitGeneralContainer();t.isElement()&&(i4t.js.services.I18nService.#reloadAllTitles(t),i4t.js.services.I18nService.#reloadAllTextContents(t),i4t.js.widgets.InsuitBar.createToolsShortcuts())}static set(t,e){i4t(t).isUndefinedOrNull()||i4t(e).isNullOrEmptyString()||(this.#tiestos[t]=e)}static get(t,e){var i="";return i4t(t).isUndefinedOrNull()||i4t(this.#tiestos[t]).isNullOrEmptyString()||(i=this.#tiestos[t],i4t(e).isObject()&&i4t(e).each(function(t){i=i.replace("{"+t+"}",this.val())})),i4t(i).HtmlDecode().val()}static loadLang(t){i4t(this.#textDB).isUndefinedOrNull()?i4t(()=>this.loadLang(t)).delay(1):this.setAll(this.#textDB[t])}static setAll(t){this.#tiestos=i4t.extend(this.#tiestos,t)}static async requestTexts(){await new Promise(t=>{i4t.js.addScript(""+i4t.config.get("cdn.service")+i4t.config.get("cdn.text.path")+i4t.config.get("cdn.text.file"),!1,!1,()=>{t()})})}static registerTextDB(t){this.#textDB=t,this.loadLang(i4t.config.getLanguage()),this.reloadAllTexts()}static registerReplacersDB(t){this.#replacersDB=t,Object.keys(t).forEach(t=>{i4t(this.#replacersDB[t]).isArray()||(this.#replacersDB[t]=Object.entries(this.#replacersDB[t]).map(([t,e])=>({key:t,value:e})))})}static#loadAllTitles(t){t.findAll("*[data-insuit-text-title]:not([title])").each(function(){var t=i4t(this),e=t.attr("data-insuit-text-title");t.attr("title",i4t.js.services.I18nService.get(e))})}static#loadAllTextContents(t){t.findAll("*[data-insuit-text-content]:not([data-insuit-text-filled=true])").each(function(){var t=i4t(this),e=t.attr("data-insuit-text-content");t.html(i4t.js.services.I18nService.get(e)),t.attr("data-insuit-text-filled","true")})}static#reloadAllTitles(t){t.findAll("*[data-insuit-text-title]").each(function(){var t=i4t(this),e=t.attr("data-insuit-text-title");t.attr("title",i4t.js.services.I18nService.get(e))})}static#reloadAllTextContents(t){t.findAll("*[data-insuit-text-content]").each(function(){var t=i4t(this),e=t.attr("data-insuit-text-content");t.html(i4t.js.services.I18nService.get(e)),t.attr("data-insuit-text-filled","true")})}},i4t.js.services.IAService=class IAService extends i4t.base{#findElements=["article","aside","footer","main","div","form","header","nav","section"];#landmarkRoles=["banner","complementary","contentinfo","form","main","navigation","region","search"];#mapa={x:74,y:105};#maxElements=100;#minPercentage=15;#urlMaxLength=2e3;#toContainsTagsCount=i4t(["ul","ol","li","img","svg","figure","p","a","h1","h2","h3","h4","h5","h6","form"]).merge(this.#findElements);iaService="iaservice/";predictService="predict";trainService="retrain";url;csvPredict;constructor(){super();var t=i4t(i4t.config.get("origin.protocol")).isNullOrEmptyString()?window.location.protocol:i4t.config.get("origin.protocol"),e=i4t(i4t.config.get("origin.domain")).isNullOrEmptyString()?window.location.host:i4t.config.get("origin.domain");this.url=t+"//"+e+window.location.pathname+window.location.search}showTablePredict(){this.predict(function(t){for(var e=0;e<t.length;e++)console.groupCollapsed(t[e].css_path),console.log(i4t.find(t[e].css_path).val()),delete t[e].css_path,console.table([t[e]]),console.groupEnd()})}static getCurrentPageIAData(){return(new i4t.js.services.IAService).getCSV()}showFinalTablePredict(){this.predict(t=>{for(var e,i=[],r=0;r<t.length;r++)(e=this.#getMaxPredictRole(t[r])).css_path=t[r].css_path,e.predict>this.#minPercentage&&i.push(e);console.table(i)})}getPredictModel(n){var s=this.url;this.predict(t=>{for(var e,i="",r=0;r<t.length;r++)(e=this.#getMaxPredictRole(t[r])).predict>this.#minPercentage&&(i+='new Model("'+s+'", "'+t[r].css_path+'", new String[] {"role='+e.role+'"}),\n');n(i)})}launchPredict(){this.predict(t=>{for(var e,i=0;i<t.length;i++)(e=this.#getMaxPredictRole(t[i])).predict>this.#minPercentage&&i4t.js.services.ModelService.addToModel({query:t[i].css_path,atts:{role:e.role}});i4t.topRole.reload(),i4t(document.body).insuitEvent().dispatch("0")})}predict(e){var i=this;i4t(this.csvPredict).isNullOrEmptyString()?this.#send(this.predictService,this.url,t=>{i4t(t).isNullOrEmptyString()||(i.csvPredict=t,i4t(e).isFunction()&&e(this.#convertPredict(i.csvPredict)))}):i4t(()=>{i4t(e).isFunction()&&e(this.#convertPredict(i.csvPredict))}).delay(.1)}train(e){this.#send(this.trainService,this.url,t=>{i4t(t).isNullOrEmptyString()||i4t(e).isFunction()&&e(t)})}download(){var t=this.getCSV(),e=this.url.replace("://","#").replace(/\//g,"_").replace(/\?/g,"@").replace(/(:|<|>|\*)/g,"");this.#downloadCSV(t,e)}#arrayObjToCSVText(e){for(var t="",i=0;i<e.length;i++)0==i&&(t+=Object.keys(e[i]).join(";")+"\n"),t+=Object.keys(e[i]).map(function(t){return e[i][t]}).join(";")+"\n";return t}#csvTextToArrayObj(t){for(var e,i,r,n=[],s=[],a=t.split("\\n"),l=0;l<a.length;l++)if(r=a[l].split(";"),0==l)s=r;else{for(i={},e=0;e<r.length;e++)i[i4t(s[e]).trim().val()]=i4t(r[e]).trim().val();0<r.length&&n.push(i)}return n}#downloadCSV(t,e){var i,r;window.Blob&&(window.URL||window.webkitURL)?(t=new Blob(["\ufeff",t],{type:"text/csv"}),(i=new FileReader).onload=function(t){(r=i4t(document).createElement("a")).href=t.target.result,r.target="_blank",r.download=e+".csv",i4t(r).dispatchEvent("click"),(window.URL||window.webkitURL).revokeObjectURL(r.href)},i.readAsDataURL(t)):i4t.logger.error("Su navegador no permite esta acción")}#dataOfNode(t,e){var i,r,n,s,a,l,o,c,d,u,h=0,m=0,g=0;if(t.isElement()&&t.isVisible()&&(o=t.cssPath(),!i4t(o).contains("div#x\\-insuit\\-container"))){for(l=t.val().nodeName.toLowerCase(),r=s=t.parent();r.isElement();)g++,r=r.parent();for(g>this.#maxElements&&(g=this.#maxElements),(n=t.offset()).area=n.width*n.height,d=s.cssPath(),(a=s.offset()).area=a.width*a.height,t.siblings().each(function(){m++,this.val().nodeName.toLowerCase()===l&&h++}),m>this.#maxElements&&(m=this.#maxElements),h>this.#maxElements&&(h=this.#maxElements),i={role:i4t(this.#landmarkRoles).indexOf(t.attr("role"))+1,csspath:o,deep:g/this.#maxElements,siblings:m/this.#maxElements,twins:h/this.#maxElements,x:n.x/e.width,y:n.y/e.height,left:n.left/e.width,right:n.right/e.width,top:n.top/e.height,bottom:n.bottom/e.height,width:n.width/e.width,height:n.height/e.height,area:n.area/e.pageArea,childrenCount:t.children().length()/e.elems,descendantCount:t.findAll("*").length()/e.elems,childrenTextNodes:i4t(e.textNodes.elems[o]).isUndefinedOrNull()?0:e.textNodes.elems[o].count/e.textNodes.count,childrenTextNodesLength:i4t(e.textNodes.elems[o]).isUndefinedOrNull()?0:e.textNodes.elems[o].length/e.textNodes.length,descendantsTextLength:t.text().length/e.text,nodeName:i4t(this.#findElements).indexOf(l)+1,parentX:a.x/e.width,parentY:a.y/e.height,parentLeft:a.left/e.width,parentRight:a.right/e.width,parentTop:a.top/e.height,parentBottom:a.bottom/e.height,parentWidth:a.width/e.width,parentHeight:a.height/e.height,parentArea:a.area/e.pageArea,parentChildrenCount:s.children().length()/e.elems,parentDescendantCount:s.findAll("*").length()/e.elems,parentChildrenTextNodes:i4t(e.textNodes.elems[d]).isUndefinedOrNull()?0:e.textNodes.elems[d].count/e.textNodes.count,parentChildrenTextNodesLength:i4t(e.textNodes.elems[d]).isUndefinedOrNull()?0:e.textNodes.elems[d].length/e.textNodes.length,parentDescendantsTextLength:s.text().length/e.text,parentNodeName:i4t(this.#findElements).indexOf(s.val().nodeName.toLowerCase())+1},r=0;r<this.#toContainsTagsCount.length();r++)c=e[this.#toContainsTagsCount.get(r).toUpperCase()],i["childrenTags"+(u=i4t(this.#toContainsTagsCount.get(r)).replaceAll(/[[\]=-]/gi,"").toUpperCase())]=0<c?t.findAll(">"+this.#toContainsTagsCount.at(r)).length()/c:0,i["descendantTags"+u]=0<c?t.findAll(this.#toContainsTagsCount.at(r)).length()/c:0,i["parentChildrenTags"+u]=0<c?s.findAll(">"+this.#toContainsTagsCount.at(r)).length()/c:0,i["parentDescendantsTags"+u]=0<c?s.findAll(this.#toContainsTagsCount.at(r)).length()/c:0;return i=this.#addMap(i,n,e)}}#addMap(t,e,i){var r,n,s,a,l,o,c,d=0,u=this.#mapa.x,h=this.#mapa.y,m=this.#mapa.x/i.width,g=this.#mapa.y/i.height;for(g<m?(l=g,g=Math.round(l*i.width),u=(d=Math.round((this.#mapa.x-g)/2))+g):(l=m,h=Math.round(l*i.height)),r=Math.round(l*e.top),n=Math.round(l*e.left)+d,s=Math.round(l*e.right)+d,a=Math.round(l*e.bottom),c=0;c<this.#mapa.y;c++)for(o=0;o<this.#mapa.x;o++)t["map_"+c+"_"+o]=h<c||o<d||u<o?0:n<=o&&o<=s&&r<=c&&c<=a?1:.5;return t}#getTotals(){for(var t,e,i=i4t(document.body).offset(),r=document.documentElement.offsetWidth<=0?i.width:document.documentElement.offsetWidth,i=document.documentElement.offsetHeight<=0?i.height:document.documentElement.offsetHeight,n=window.location.href.replace(/^https?:\/\/[^/]+(.*)/,"$1"),s={elems:0,urlLength:(n.length>this.#urlMaxLength?this.#urlMaxLength:n.length)/this.#urlMaxLength,text:i4t(document.body).text().length,width:r,height:i,pageArea:i*r,textNodes:{count:0,length:0,elems:{}},totalTexts:0},a=i4t(document).createTreeWalker(document.body,NodeFilter.SHOW_TEXT),l=0;l<this.#toContainsTagsCount.length();l++)s.elems+=s[this.#toContainsTagsCount.get(l).toUpperCase()]=i4t.findAll(this.#toContainsTagsCount.get(l)).length();for(t=a.nextNode();t;)(e=i4t(t.parentNode)).isElement()&&(e=e.cssPath(),i4t(s.textNodes.elems[e]).isUndefinedOrNull()&&(s.textNodes.elems[e]={length:0,count:0}),s.textNodes.elems[e].length+=t.textContent.length,s.textNodes.elems[e].count++,s.textNodes.length+=t.textContent.length,s.textNodes.count++),t=a.nextNode();return s}#getCSVArray(){var t,e=[],i=this.#getTotals(),r=this;return i4t.findAll(this.#findElements.join(",")).each(function(){(t=r.#dataOfNode(this,i))&&e.push(t)}),e}getCSV(){var t=this.#getCSVArray();return this.#arrayObjToCSVText(t)}#send(t,e,i){var r=this.getCSV();let n=new WebSocket(`wss://${i4t.config.get("cdn.ia")}/`+t);n.onmessage=t=>{i(t.data),n.close()},n.onopen=()=>{var t=JSON.stringify({url:e,csv:r});n.send(t)}}#convertPredict(t){return this.#csvTextToArrayObj(t)}#getMaxPredictRole(t){var e,i,r={predict:0,role:""};for(e in t)i=t[e],i4t(i).isFloat()&&"no_rol"!==e&&(i=parseFloat(i),r.predict<i)&&(r.predict=i,r.role=e);return r}},i4t.js.services.MapperService=class MapperService extends i4t.base{static async run(t,e=!1,i=!1){t instanceof i4t.js.roles.AbstractRole&&(i4t.logger.startTime(this.name,"MapperService.run"),await i4t.js.services.ModelService.setInDOM(),this.setDynamicRoles(t.element),i4t.logger.time(this.name,"ModelService.setInDOM"),this.#singleParser(t),this.#applyCustomConfigurationsToValidators(),e&&(await i4t.js.services.WCAG.WCAG21Service.validateGenerals(t.element),i4t.logger.time(this.name,"WCAG21Service.validateGenerals")),i4t.js.services.WaiAria11Service.validate(t.element),i4t.logger.time(this.name,"waiAriaService.validate"),await i4t.js.services.WCAG.WCAG21Service.validate(t.element),i4t.logger.time(this.name,"WCAG21Service.validate"),t=this.#fixDeprecatedRole(t),this.#setTree(t,i),this.#setAreaMaps(t),this.#setOwns(t),this.#setOrphansByHidden(t),this.#setControls(t),this.#setHasPopups(t),this.#setLiveAreas(t,i),this.#removeRedundantLandmarks(t),i4t.logger.endTime(this.name,"MapperService.run"))}static#removeRedundantLandmarks(t){let i=!1;i4t(t.element).findAll("*[role]:not([role=none]):not([role=presentation]), a:not([role]), select:not([role]), option:not([role]),input:not([role]):not([type=hidden]), textarea:not([role]), button:not([role]), video:not([role]), audio:not([role]), *[data-insuit-role]:not([role]), main:not([role])").map(t=>i4t.js.roles.getRoleByElement(t)).filter(t=>!!t&&!t.isHidden()&&t.isLandmark()&&!(t instanceof i4t.js.roles.htmlRole)&&!(t instanceof i4t.js.roles.mainRole)).forEach(e=>{try{this.#checkIfRoleIsRedundant(e)&&(i4t.logger.isWarningEnabled()&&i4t.logger.warning(`Se ha encontrado un role redundante en ${e.getPath()}. Por favor, comprueba si es por las reglas del IADO`),i=!0)}catch(t){i4t.logger.warning("No se ha podido chequear si el role es redundante",e)}}),i&&this.#removeRedundantLandmarks(t)}static#checkIfRoleIsRedundant(e){return!i4t(e.parent).isUndefinedOrNull()&&!(1<e.parent.children.length||i4t(e.parent.element).text()!==i4t(e.element).text()||(i4t(e.element).attr("role","none"),this.#removeChildRole(e.parent,e),e.children.forEach(t=>{t.parent=e.parent,e.parent.children.push(t)}),e.destroy(),0))}static#fixDeprecatedRole(t){var e=i4t.js.roles.getRoleByElement(t.element);return e!==t&&e instanceof i4t.js.roles.AbstractRole?e:t}static setDynamicRoles(){i4t.findAll("[data-insuit-dynamic=true]").forEach((t,e)=>{i4t(t).attr("data-insuit-dynamic-id",e)})}static#setTree(t,e){t.children=[],this.#setChildren(t,e),i4t.logger.time(this.name,"this.setTree(this.baseRole)")}static#setChildren(t,e){var i,r,n=i4t(t.element).findAll("*[role]:not([role=none]):not([role=presentation]), a:not([role]), select:not([role]), option:not([role]), optgroup:not([role]), input:not([role]):not([type=hidden]), textarea:not([role]), button:not([role]), video:not([role]), audio:not([role]), fieldset:not([role]), *[data-insuit-role]:not([role]), main:not([hidden]):not([aria-hidden=true]):not([role=none]),progress:not([role])");for(i4t.logger.startTime(this.name+".addRole","MapperService.setChildren");0<n.length();)r=i4t(n.val().shift()),i=this.#getParentRole(r,t),i4t(i).isUndefinedOrNull()||this.#addRole(r.val(),i,e);i4t.logger.endTime(this.name+".addRole","MapperService.setChildren")}static#getParentRole(t,e){var i,r,n=t.parentElement();return n.isElement()?(i="video"===n.attr("data-insuit-role")||"audio"===n.attr("data-insuit-role"),r=this.#getRoleByElem(n.val()),"option"===t.val().nodeName.toLowerCase()?r:"true"===n.attr("aria-hidden")&&i4t(n.attr("role")).isNullOrEmptyString()||i?null:n.val()!==e.element&&i4t(r).isUndefinedOrNull()?this.#getParentRole(n,e):r):null}static#setLiveAreas(t,i){function qS(t){var e=r.#roleFactory(t.val(),i),t=t.attr("aria-live");if(!i4t(e).isUndefinedOrNull()&&e instanceof i4t.js.roles.AbstractRole&&!i4t(t).isNullOrEmptyString())switch(t.toLowerCase()){case"off":e.removeObserver();break;case"assertive":e.setAssertiveObserver();break;case"polite":e.setPoliteObserver()}}var r=this;i4t(t.element).findAll("*[aria-live]").each(function(){qS(this)}),i4t(t.element).hasAttribute("aria-live")&&qS(i4t(t.element)),i4t.logger.time(this.name,"MapperService.setLiveAreas")}static#setOrphansByHidden(t){let e=i4t(t.element),i;e.findAll("*[aria-hidden=true]").forEach(t=>{i=this.#getRoleByElem(t),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole?(this.#removeChildRole(i.parent,i),i.parent=null):this.#findAndRemoveChildRoles(t)}),i4t.logger.time(this.name,"MapperService.setOrphansByHidden")}static#findAndRemoveChildRoles(t){i4t(t).findAll("*[role]:not([role=none]):not([role=presentation]), a:not([role=none]):not([role=presentation]), select:not([role=none]):not([role=presentation]), option:not([role=none]):not([role=presentation]), input:not([role=none]):not([role=presentation]):not([type=hidden]), textarea:not([role=none]):not([role=presentation]), button:not([role=none]):not([role=presentation]), video:not([role=none]):not([role=presentation]), audio:not([role=none]):not([role=presentation]), fieldset:not([role=none]):not([role=presentation]), *[data-insuit-role]:not([role]), main:not([role=none]):not([role=presentation])").forEach(t=>{t=this.#getRoleByElem(t),!i4t(t).isUndefinedOrNull()&&t instanceof i4t.js.roles.AbstractRole&&(this.#removeChildRole(t.parent,t),t.parent=null)})}static#setControls(r){var n,t=i4t(r.element),s=this,e=t.findAll("*[aria-controls]:not([role=none]):not([role=presentation])");t.hasAttribute("aria-controls")&&e.push(t),e.each(function(){var t,e,i=s.#getRoleByElem(this.val());!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole&&(e=i.getIdFromControl(),i4t(e).isNullOrEmptyString()||((t=i4t(r.element).find("*[id='"+e+"']")).isElement()||(t=i4t.find('*[id="'+e+'"]')).isElement())&&(t=s.#getRoleByElem(t.val()),!i4t(t).isUndefinedOrNull())&&t instanceof i4t.js.roles.AbstractRole&&1===(n=i4t.findAllIncludingInsuit("*[aria-controls~='"+e+"']:not([role=none]):not([role=presentation])")).length()&&(s.#removeChildRole(t.parent,t),i=s.#getRoleByElem(n.get(0)),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole&&!i.isHidden()?(t.parent=i).children.push(t):t.parent=null))}),i4t.logger.time(this.name,"MapperService.setControls")}static#setHasPopups(){let r,n,s,a=this,l;i4t.findAll("*[aria-haspopup]:not([aria-haspopup=false])").each(function(){var t=this.attr("aria-haspopup");if("true"===t&&(t="menu"),n=a.#getRoleByElem(this.val()),l=n instanceof i4t.js.roles.comboboxRole&&n.isAutocompleteWithList(),!i4t(n).isUndefinedOrNull()&&n instanceof i4t.js.roles.AbstractRole)for(var e=0;e<n.children.length;e++)if(s=n.children[e],i4t(s.element).attr("role")===t&&a.#removeChildRole(n,s)){s.popupParent=s.parent,s.parent=null;for(var i=0;i<s.children.length;i++)r=s.children[i],a.#removeChildRole(n,r),n.children.push(r),l?r.parent=n:r.parent=null}}),i4t.logger.time(this.name,"MapperService.setHasPopups")}static#setOwns(){let t,e,i,r=this,n,s,a;i4t.findAllIncludingInsuit("*[aria-owns]").each(function(){e=this.attr("aria-owns"),i4t(e).isNullOrEmptyString()||(i=r.#getRoleByElem(this.val()),!i4t(i).isUndefinedOrNull()&&i instanceof i4t.js.roles.AbstractRole&&(e=i4t(e).trim().val(),t=e.replace(/(\S+)(\s|$)/gi,'*[id="$1"],').slice(0,-1),s=i4t(e.split(" ")),(a=(a=i4t.findAllIncludingInsuit(t)).sort(function(t,e){t=s.indexOf(t.id),e=s.indexOf(e.id);return e<t?1:t<e?-1:0})).each(function(){n=r.#getRoleByElem(this.val()),!i4t(n).isUndefinedOrNull()&&n instanceof i4t.js.roles.AbstractRole&&(r.#removeChildRole(n.parent,n),r.#removeChildRole(i,n),r.#checkChild(i,n))&&(n.parent=i).children.push(n)})))}),i4t.logger.time(this.name,"MapperService.setOwns")}static#removeChildRole(t,e){if(!i4t(t).isUndefinedOrNull()){t=i4t(t.children),e=t.indexOf(e,function(t,e){return t.element===e.element});if(-1<e)return t.remove(e),!0}return!1}static#applyCustomConfigurationsToValidators(){let e=i4t(i4t.config.get("disabledValidators")),i=i4t.js.services.WCAG;e.isString()&&(e=i4t(e.split(",")),["ARIA","HTML","CSS","General"].forEach(t=>{i["Techniques"+t].techniques=i["Techniques"+t].techniques.filter(t=>!e.includes(t.name)),i["Techniques"+t].generalTechniques=i["Techniques"+t].generalTechniques.filter(t=>!e.includes(t.name))}))}static#singleParser(t){var t=i4t(t.element),e=this;t.findAll("*[role=video], *[role=audio], *[role=areamap]").each(function(){this.attr("data-insuit-role",this.attr("role")),this.removeAttr("role")}),t.findAll("video, audio").each(function(){e.#checkSSLUrl(this)}),t.findAll("iframe[src*='//www.youtube']:not([role]), object[data*='//www.youtube']:not([role]), embed[src*='//www.youtube']:not([role])").each(function(){e.#checkSSLUrl(this),i4t(this.attr("data-insuit-parser")).isNullOrEmptyString()&&this.attr("data-insuit-role","video")}),t.findAll("iframe[src*='//player.vimeo.com/video']:not([role]):not([data-insuit-role]), embed[src*='//vimeo.com/moogaloop.swf']:not([role]):not([data-insuit-role])").each(function(){e.#checkSSLUrl(this),i4t(this.attr("data-insuit-parser")).isNullOrEmptyString()&&this.attr("data-insuit-role","video")}),t.findAll(".jwplayer:not([data-insuit-role])").each(function(){i4t(this.attr("data-insuit-parser")).isNullOrEmptyString()&&this.attr("data-insuit-role","video")}),t.findAll(".flowplayer:not([data-insuit-role])").each(function(){i4t(this.attr("data-insuit-parser")).isNullOrEmptyString()&&this.attr("data-insuit-role","video")}),t.findAll("*[usemap]:not([role]):not([data-insuit-role])").each(function(){!i4t(this.attr("data-insuit-parser")).isNullOrEmptyString()||i4t(this.attr("alt")).isNullOrEmptyString()&&i4t(this.attr("title")).isNullOrEmptyString()||this.attr("data-insuit-role","areamap")}),t.findAll("embed[src*='.pdf']:not([role]):not([data-insuit-role]),iframe[src*='.pdf']:not([role]):not([data-insuit-role])").each(function(){this.attr("data-insuit-role","pdf")}),t.findAll("*[role=list] li:not([role])").each(function(){this.attr("role","listitem")}),t.findAll("*[role=listbox] li:not([role])").each(function(){this.attr("role","option")}),t.findAll(`
			*[role=table] > tr:not([role]), *[role=table] > tbody > tr:not([role]),
			*[role=grid] > tr:not([role]), *[role=grid] > tbody > tr:not([role]),
			*[role=table] > thead > tr:not([role]),*[role=grid] > thead > tr:not([role]),
			*[role=table] > tfoot > tr:not([role]),*[role=grid] > tfoot > tr:not([role])`).each(function(){this.attr("role","row")}),t.findAll("*[role=table] > tr > th:not([role]):not([scope=row]), *[role=table] > tbody > tr > th:not([role]):not([scope=row]), *[role=table] > thead > tr > th:not([role]):not([scope=row]),*[role=grid] > tr > th:not([role]):not([scope=row]), *[role=grid] > tbody > tr > th:not([role]):not([scope=row]), *[role=grid] > thead > tr > th:not([role]):not([scope=row])").each(function(){this.attr("role","columnheader")}),t.findAll("*[role=table] > tr > th[scope=row]:not([role]), *[role=table] > tbody > tr > th[scope=row]:not([role]), *[role=table] > thead > tr > th[scope=row]:not([role]),*[role=grid] > tr > th[scope=row]:not([role]), *[role=grid] > tbody > tr > th[scope=row]:not([role]), *[role=grid] > thead > tr > th[scope=row]:not([role])").each(function(){this.attr("role","rowheader")}),t.findAll("*[role=grid] > tr > td:not([role]), *[role=grid] > tbody > tr > td:not([role])").each(function(){this.attr("role","gridcell")}),t.findAll("*[role=table] > tr > td:not([role]), *[role=table] > tbody > tr > td:not([role])").each(function(){this.attr("role","cell")}),t.findAll("*[role=menu] li:not([role]), *[role=menubar] li:not([role])").each(function(){this.attr("role","menuitem")}),i4t.logger.time(this.name,"MapperService.singleParser")}static#setAreaMaps(){var r=this;i4t.findAll("*[usemap]").each(function(){var t,e=this.attr("usemap"),i=r.#getRoleByElem(this.val());i4t(e).isNullOrEmptyString()||i4t(i).isUndefinedOrNull()||((t=i4t.find("*[name="+e.replace("#","")+"]")).isElement()||(t=i4t.find(e)).isElement())&&t.findAll("area").each(function(){r.#setChildrenRole(i,this)})}),i4t.logger.time(this.name,"MapperService.setAreaMaps")}static#setChildrenRole(t,e){var i=t.getChildElem(e.val());return i4t(i).isUndefinedOrNull()&&(i=this.#addRole(e.val(),t)),!i4t(i).isUndefinedOrNull()}static#setRole(t,e,i){t=this.#roleFactory(t,i);return!i4t(t).isUndefinedOrNull()&&t instanceof i4t.js.roles.AbstractRole?(!i4t(e).isUndefinedOrNull()&&this.#checkChild(e,t)&&(t.parent=e).children.push(t),i4t.logger.time(this.name+".addRole","MapperService.setRole"),t):null}static#checkChild(t,e){if(0!==t.descendentChildren.length){if(!t.descendentChildren.map(t=>t+"Role").includes(e.type))return!1;this.#checkOwnedElement(t,e)}return!0}static#checkOwnedElement(t,e){var i=t.element,e=e.element,r=i4t(i).attr("aria-owns");i===e.parentElement&&i4t(r).isNullOrEmptyString()||(this.#checkPreviousParentRoleChildren(t),i4t(r).isUndefinedOrNull(),i=i4t(e).id(),t.hasOwns(i))||t.addOwns(i)}static#checkPreviousParentRoleChildren(e){e.children.some(t=>t.parent===e&&!e.hasOwns(i4t(t.element).id()))&&e.children.forEach(t=>{e.addOwns(i4t(t.element).id())})}static#addRole(t,e,i){t=this.#setRole(t,e,i);return i4t(t).isUndefinedOrNull()||(t.children=[]),t}static#getRoleByElem(t){return i4t.js.roles.getRoleByElement(t)}static#mapRole(t){var e=i4t(t).attr("role");if(!i4t(e).isNullOrEmptyString()&&i4t(i4t(t).attr("data-insuit-role")).isNullOrEmptyString()||(e=i4t(t).attr("data-insuit-role")),i4t(e).isNullOrEmptyString()){switch(t.tagName.toLowerCase()){case"a":case"area":e="link";break;case"option":e="option";break;case"optgroup":e="optgroup";break;case"select":e=i4t(t).hasAttribute("multiple")?"listbox":"combobox";break;case"textarea":e="textbox";break;case"button":e="button";break;case"input":"hidden"!==t.type&&(e="input","button"!==t.type&&"image"!==t.type&&"submit"!==t.type&&"reset"!==t.type&&"file"!==t.type||(e="button"),"checkbox"===t.type&&(e="checkbox"),"radio"===t.type&&(e="radio"),"range"===t.type&&(e="slider"),"number"===t.type&&(e="spinbutton"),i4t(["text","password","email","tel","search","url","date","time"]).includes(t.type))&&(e="textbox");break;case"audio":e="audio";break;case"video":e="video";break;case"fieldset":e="group";break;case"main":e="main";break;case"progress":e="progressbar"}if(i4t(e).isNullOrEmptyString())return null}return i4t.logger.time(this.name+".addRole","MapperService.mapRole"),e+"Role"}static#roleFactory(t,e){if(!i4t(t).isElement())return null;var i,r,n=this.#mapRole(t);if(i4t(n).isNullOrEmptyString())return null;if(i=i4t.js.roles[n],r=this.#getRoleByElem(t),i4t(r).isUndefinedOrNull()||r.type!==n&&"AbstractRole"!==r.type||e){i4t(r).isUndefinedOrNull()||r.removeObserver(),i4t(i).isFunction()||(i=i4t.js.roles.AbstractRole);try{(r=new i(t)).init()}catch(t){return i4t.logger.warning("No se ha podido instanciar la ClassRole: "+n,t),null}}return i4t.logger.time(this.name+".addRole","MapperService.roleFactory"),r}static#checkSSLUrl(t){var e=t.attr("src"),i=this,r=t.val().nodeName.toUpperCase();i4t(e).isNullOrEmptyString()?"VIDEO"!==r&&"AUDIO"!==r||t.findAll("source").each(function(){i.#checkSSLUrl(this)}):i4t(e).startsWith("http:")&&t.attr("src",e.replace("http:",""))}},i4t.js.services.ModelService=class ModelService extends i4t.base{static#model=[];static#currentUrl="";static isLoading=!1;static async changePageListener(){var t=await i4t?.runner?.getProjectConfig?.();t&&i4t?.js?.services?.ModelService&&(i4t.js.services.ModelService.model=t.model)}static get model(){return this.#model}static set model(t){i4t.event.removeListener("popstate",this.changePageListener),i4t.event.addListener("popstate",this.changePageListener),i4t(t).isArray()&&!i4t.config.get("model")&&(this.#model=t.filter(t=>!i4t(t.regex).isUndefinedOrNull()&&this.#ruleAppliesToThisPage(t)))}static#ruleAppliesToThisPage(t){var e=this.#getCurrentUrl(),i=i4t(t.regex).parseRegex();return!i4t(i).isUndefinedOrNull()&&t.contentType===e.insuitContentType()&&i.test(e.toString())}static#getCurrentUrl(){if(!i4t(this.#currentUrl).isNullOrEmptyString())return this.#currentUrl;var e=new i4t.url;if(i4t.config.get("project.isv8"))return this.#currentUrl=e;{let t=i4t.config.get("origin.protocol")+"//"+i4t.config.get("origin.domain");return 0<e.getDirectories().length&&(t+="/"+(new i4t.url).getDirectories().join("/")),i4t(e.getPage()).isNullOrEmptyString()||(t+="/"+(new i4t.url).getPage()),new i4t.url(t)}}static async setInDOM(){var t;this.isLoading=!0,i4t.logger.startTime(this.name,"ModelService.setInDOM"),this.#currentUrl.toString()===window.location.href||i4t(i4t.runner).isUndefinedOrNull()||(t=await i4t.runner.getProjectConfig(),this.setModel(t.model)),await i4t(this.model).forEachTimeout(i4t.config.get("timeout.model"),async function executeModel(e){if(!(i4t(e?.query).isNullOrEmptyString()||i4t(e?.atts).isUndefinedOrNull()&&i4t(e?.fn).isNullOrEmptyString())){try{i4t.js.services.ModelService.#setModelNode(e)}catch(t){i4t.logger.warning("Ha fallado la query: "+e.query+", en el modelservice",t)}i4t.logger.time(i4t.js.services.ModelService.name,e.query)}}),i4t.logger.endTime(this.name,"ModelService.setInDOM"),this.isLoading=!1}static#setModelNodeQueryEach(t,e){var i=i4t(e);this.#modifyElementAttributes(t.atts,i),this.#applyFunctionToElement(t.fn,e)}static#applyFunctionToElement(e,t){if(i4t(e).isString()){e=i4t.js.services.I18nService.replaceWordsOnFunction(e);t=i4t(e).toFunction(t);try{t()}catch(t){i4t.logger.error("Error llamando a la función del modelo: "+e,t)}}}static#modifyElementAttributes(t,e){var i,r;if(i4t(t).isObject())for(var n in t)i=n.replace("_","-").replace("${i}",NaN),r=i4t.js.services.I18nService.replaceWordsOnText(t[i]),Object.hasOwnProperty.call(t,n)&&(i4t(r).isNullOrEmptyString()?e.removeAttr(i):e.attr(i,r))}static#setModelNode(i){i4t.findAll(i.query).forEach((t,e)=>this.#setModelNodeQueryEach(i,t,e))}static addToModel(t){i4t(this.model).isArray()&&this.model.push(t)}static setModel(t){this.model=t}},i4t.js.services.PdfService=class PdfService extends i4t.base{static launchPdfViewer(t){i4t.event.insuit.dispatch("open-pdf",{dto:t})}static getPDFFileNameFromURL(t){if(i4t(t).isNullOrEmptyString())return"document.pdf";var e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,t=/^(?:([^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),t=e.exec(t[1])||e.exec(t[2])||e.exec(t[3]);if(t&&-1!=(t=t[0]).indexOf("%"))try{t=e.exec(decodeURIComponent(t))[0]}catch(t){i4t.logger.error(t)}return t||"document.pdf"}},i4t.js.services.TrackerService=class TrackerService extends i4t.base{static#refreshTimeout;static statsListener=i4t.event.addListener("insuit-statistics",t=>{i4t.config.get("siteid")&&this.#registerStatistics(t)});static#registerStatistics(t,e=!1){clearTimeout(this.#refreshTimeout),this.#refreshTimeout=setTimeout(()=>{this.#registerStatistics(t,!0)},1e3*(Math.floor(61*Math.random())+60));var i=t.dto;i4t.api.clientConfig({random:i4t.generateUUID(),i:i.UUID??i4t.config.UI.get().UUID,t:i.outAids?.includes?.("AloudOutAid")?"true":"false",m:i.option,p:e?"1":"0",u:window.location.href,s:i4t.config.get("siteid")})}},i4t.js.services.WaiAria11Service=class WaiAria11Service extends i4t.base{static landmarkRoles=["banner","complementary","contentinfo","form","main","navigation","region","search"];static#globalAttributes=["aria-atomic","aria-busy","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-live","aria-owns","aria-relevant","aria-roledescription"];static#widgetAttributes=["aria-autocomplete","aria-checked","aria-disabled","aria-errormessage","aria-expanded","aria-haspopup","aria-hidden","aria-invalid","aria-label","aria-level","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-placeholder","aria-pressed","aria-readonly","aria-required","aria-selected","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"];static#liveRegionAttributes=["aria-atomic","aria-busy","aria-live","aria-relevant"];static#dragAndDropAttributes=["aria-dropeffect","aria-grabbed"];static#relationshipAttributes=["aria-activedescendant","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-describedby","aria-details","aria-errormessage","aria-flowto","aria-labelledby","aria-owns","aria-posinset","aria-rowcount","aria-rowindex","aria-rowspan","aria-setsize"];static notAllowedAttributesWithoutRole=i4t(this.#widgetAttributes).concat(this.#relationshipAttributes).filter(t=>!this.#globalAttributes.includes(t));static#implicitRoles={article:["article"],link:["a","area"],slider:["input[type=range]"],radio:["input[type=radio]"],option:["option"],group:["optgroup","fieldset"],combobox:["select:not([multiple])"],listbox:["select[multiple]"],checkbox:["input[type=checkbox]"],button:["button","input[type=button]","input[type=image]","input[type=submit]","input[type=reset]","input[type=file]"],main:["main"],textbox:["textarea","input:not([type])","input[type=text]","input[type=date]","input[type=email]"],table:["table"],progressbar:["progress"],spinbutton:["input[type=number]"],row:["tr"],cell:["td"]};static#phrasingContent=["abbr","audio","b","bdo","br","button","canvas","cite","code","command","data","datalist","dfn","em","embed","i","iframe","img","input","kbd","keygen","label","mark","math","meter","noscript","object","output","picture","progress","q","ruby","samp","script","select","small","span","strong","sub","sup","svg","textarea","time","u","var","video","wbr"];static roles=(()=>{var t,e={alert:{atts:["aria-expanded"],implicitAtts:{"aria-live":"assertive","aria-atomic":"true"}},alertdialog:{atts:["aria-expanded","aria-modal"],implicitAtts:{"aria-modal":"true"}},application:{atts:["aria-activedescendant"]},article:{atts:["aria-expanded","aria-posinset","aria-setsize"]},banner:{atts:["aria-expanded"]},button:{atts:["aria-expanded","aria-pressed"]},cell:{atts:["aria-expanded","aria-colindex","aria-colspan","aria-rowindex","aria-rowspan"]},checkbox:{atts:["aria-checked","aria-readonly"],implicitAtts:{"aria-checked":"false"}},columnheader:{atts:["aria-expanded","aria-sort","aria-readonly","aria-required","aria-selected","aria-colindex","aria-colspan","aria-rowindex","aria-rowspan"]},combobox:{atts:["aria-expanded","aria-autocomplete","aria-readonly","aria-required","aria-orientation","aria-activedescendant","aria-activedescendant"],implicitAtts:{"aria-expanded":"false","aria-haspopup":"listbox"}},complementary:{atts:["aria-expanded"]},contentinfo:{atts:["aria-expanded"]},definition:{atts:["aria-expanded"]},dialog:{atts:["aria-expanded","aria-modal"]},directory:{atts:["aria-expanded"]},document:{atts:["aria-expanded"]},feed:{atts:["aria-expanded"],implicitAtts:{"aria-live":"polite"}},figure:{atts:["aria-expanded"]},form:{atts:["aria-expanded"]},grid:{atts:["aria-expanded","aria-colcount","aria-rowcount","aria-level","aria-multiselectable","aria-readonly","aria-activedescendant"]},gridcell:{atts:["aria-expanded","aria-colindex","aria-colspan","aria-rowindex","aria-rowspan","aria-readonly","aria-required","aria-selected"]},group:{atts:["aria-expanded","aria-activedescendant"]},heading:{atts:["aria-expanded","aria-level"],implicitAtts:{"aria-level":"2"}},img:{atts:["aria-expanded"]},link:{atts:["aria-expanded"]},list:{atts:["aria-expanded"]},listbox:{atts:["aria-expanded","aria-activedescendant","aria-orientation","aria-multiselectable","aria-readonly","aria-required"],implicitAtts:{"aria-orientation":"vertical"}},listitem:{atts:["aria-expanded","aria-level","aria-posinset","aria-setsize"]},log:{atts:["aria-expanded"],implicitAtts:{"aria-live":"polite"}},main:{atts:["aria-expanded"],elements:["main"]},marquee:{atts:["aria-expanded"]},math:{atts:["aria-expanded"]},menu:{atts:["aria-expanded","aria-activedescendant","aria-orientation"],implicitAtts:{"aria-orientation":"vertical"}},menubar:{atts:["aria-expanded","aria-activedescendant","aria-orientation"],implicitAtts:{"aria-orientation":"horizontal"}},menuitem:{atts:["aria-posinset","aria-setsize"]},menuitemcheckbox:{atts:["aria-checked","aria-readonly","aria-posinset","aria-setsize"],implicitAtts:{"aria-checked":"false"}},menuitemradio:{atts:["aria-checked","aria-readonly","aria-posinset","aria-setsize","aria-checked","aria-posinset","aria-setsize"],implicitAtts:{"aria-checked":"false"}},navigation:{atts:["aria-expanded"]},none:null,note:{atts:["aria-expanded"]},option:{atts:["aria-selected","aria-checked","aria-posinset","aria-setsize"],implicitAtts:{"aria-selected":"false"}},presentation:{atts:[]},progressbar:{atts:["aria-expanded","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"]},radio:{atts:["aria-checked","aria-posinset","aria-setsize"],implicitAtts:{"aria-checked":"false"}},radiogroup:{atts:["aria-expanded","aria-activedescendant","aria-orientation","aria-readonly","aria-required"]},region:{atts:["aria-expanded"]},row:{atts:["aria-expanded","aria-activedescendant","aria-level","aria-selected","aria-colindex","aria-rowindex"]},rowgroup:{atts:[]},rowheader:{atts:["aria-expanded","aria-sort","aria-readonly","aria-required","aria-selected","aria-colindex","aria-colspan","aria-rowindex","aria-rowspan"]},scrollbar:{atts:["aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","aria-controls","aria-orientation","aria-valuemax","aria-valuemin","aria-valuenow"],implicitAtts:{"aria-orientation":"vertical","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"50"}},search:{atts:["aria-expanded"]},searchbox:{atts:["aria-activedescendant","aria-autocomplete","aria-multiline","aria-placeholder","aria-readonly","aria-required"]},separator:{atts:["aria-orientation","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],implicitAtts:{"aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"50"}},slider:{atts:["aria-valuetext","aria-valuemax","aria-valuemin","aria-valuenow","aria-orientation","aria-readonly"],implicitAtts:{"aria-orientation":"horizontal","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":"50"}},spinbutton:{atts:["aria-activedescendant","aria-valuetext","aria-valuemax","aria-valuemin","aria-valuenow","aria-required","aria-readonly"],implicitAtts:{"aria-valuenow":"0"}},status:{atts:["aria-expanded"],implicitAtts:{"aria-live":"polite","aria-atomic":"true"}},switch:{atts:["aria-checked","aria-readonly"],implicitAtts:{"aria-checked":"false"}},tab:{atts:["aria-expanded","aria-posinset","aria-selected","aria-setsize"],implicitAtts:{"aria-selected":"false"}},table:{atts:["aria-expanded","aria-colcount","aria-rowcount"]},tablist:{atts:["aria-activedescendant","aria-level","aria-multiselectable","aria-orientation"],implicitAtts:{"aria-orientation":"horizontal"}},tabpanel:{atts:["aria-expanded"]},term:{atts:["aria-expanded"]},textbox:{atts:["aria-activedescendant","aria-autocomplete","aria-multiline","aria-placeholder","aria-readonly","aria-required"]},timer:{atts:["aria-expanded"]},toolbar:{atts:["aria-expanded","aria-activedescendant","aria-orientation"],implicitAtts:{"aria-orientation":"horizontal"}},tooltip:{atts:["aria-expanded"]},tree:{atts:["aria-expanded","aria-activedescendant","aria-orientation","aria-multiselectable","aria-required"],implicitAtts:{"aria-orientation":"vertical"}},treegrid:{atts:["aria-expanded","aria-colcount","aria-rowcount","aria-level","aria-readonly","aria-activedescendant","aria-orientation","aria-multiselectable","aria-required"]},treeitem:{atts:["aria-selected","aria-checked","aria-posinset","aria-setsize","aria-expanded","aria-level"]}};for(t in e){var i=i4t(e[t]);Object.hasOwnProperty.call(e,t)&&!i.isUndefinedOrNull()&&i4t(i.val().atts).isArray()&&i4t(i.val().atts).merge(this.#globalAttributes)}return e})();static validate(t){t=i4t(t),i4t.logger.startTime(this.name,"WaiAria11Service.validate");let e=this.getAllImplicitRoles(),i=this;t.findAll("[role],"+e.join(",")).each(function(){var t=i.#validateRole.call(i,this);i.#validateAttributtes.call(i,t,this),i.#implicitAttributtes.call(i,t,this)}),this.#removeAriaAttributesIfNotRole(t,e),i4t.logger.endTime(this.name,"WaiAria11Service.validate")}static#validateRole(t){var e=t.attr("role");return i4t(e).isNullOrEmptyString()&&(e=this.getImplicitRoleByElement(t)),i4t(e).isNullOrEmptyString()||!Object.hasOwnProperty.call(this.roles,e)?(t.removeAttr("role"),null):e}static getImplicitRoleByElement(t){for(var e in this.#implicitRoles){var i=this.#implicitRoles[e];if(t.val().matches(i))return e}return""}static#validateAttributtes(i,r){let n=this;i4t(r.val().attributes).each(function(){var t=this.val().name,e=n.roles[i];i4t(t).isNullOrEmptyString()||!i4t(t).startsWith("aria-")||Object.hasOwnProperty.call(n.roles,i)&&!i4t(e).isUndefinedOrNull()&&i4t(e.atts).isArray()&&-1!==i4t(e.atts).indexOf(t)||r.removeAttr(t)})}static#implicitAttributtes(t,e){var i,r,n,s;if(Object.hasOwnProperty.call(this.roles,t)&&null!==this.roles[t]&&!i4t(this.roles[t].implicitAtts).isUndefinedOrNull())for(r in i=i4t(e),this.roles[t].implicitAtts)n=this.roles[t].implicitAtts[r],s=i.attr(r),i4t(s).isNullOrEmptyString()&&i.attr(r,n)}static getAllImplicitRoles(){return i4t(this.#implicitRoles).values().flat().val()}static#removeAriaAttributesIfNotRole(e,t){let i=":not([role]):not([data-insuit-role]):not("+t.join(",")+")";i4t(this.notAllowedAttributesWithoutRole).each(function removeAriaAttributesWhenNoRole(){var t=this.val();e.findAll("["+t+"]"+i).each(function removeRole(){this.removeAttr(t)})})}static containsPhrasingContent(t){return i4t(t).findAll(`*:not(${this.#phrasingContent.join(",")})`).length()<1}},i4t.js.services.WCAG.TechniquesARIA=class TechniquesARIA{static generalTechniques=[];static techniques=[this.ARIA1,this.ARIA2,this.ARIA4,this.ARIA5,this.ARIA13,this.ARIA21];static ARIA1(t){i4t(t).findAll("[role][aria-describedby]").each(function checkDescribedByIdsExist(){let t,i=this.attr("aria-describedby");i4t(i).isNullOrEmptyString()||(t=i.split(" "),i=[],t.forEach(t=>{var e=i4t.find(`[id='${t}']`);e.isElement()&&!e.isFocusable()&&i.push(t)}),i4t(i).isEmpty())?this.removeAttr("aria-describedby"):this.attr("aria-describedby",i.join(" "))})}static ARIA2(t){let e,i,r,n=i4t.js.services.I18nService.get("form_required_words");(n=n.split(",")).push("*"),i4t(t).findAll(":required:not([aria-required=true])").each(function setAriaRequired(){this.attr("aria-required","true")}),i4t(t).findAll("input:not([required])").each(function checkIfFieldIsRequired(){e=this.attr("id"),i4t(e).isNullOrEmptyString()||(i=i4t.find("label[for='"+e+"']")).isElement()&&(r=n.some(function containsRequiredValue(t){return i4t(i.text()).contains(t)}))&&this.attr("aria-required","true")})}static ARIA4(t){var e=i4t.js.services.WaiAria11Service.getAllImplicitRoles();i4t(t).findAll("[role],"+e.join(",")).forEach(t=>{let e=i4t(t).attr("role");i4t(e).isNullOrEmptyString()&&(e=i4t.js.services.WaiAria11Service.getImplicitRoleByElement(i4t(t))),!i4t(e).isNullOrEmptyString()&&Object.hasOwnProperty.call(i4t.js.services.WaiAria11Service.roles,e)||i4t(t).removeAttr("role")})}static ARIA5(e){var t=i4t.js.services.WaiAria11Service.getAllImplicitRoles();let a=i4t.js.services.WaiAria11Service.roles,i=(i4t(e).findAll("[role],"+t.join(",")).forEach(n=>{let s=i4t(n).attr("role");if(i4t(s).isNullOrEmptyString()&&(s=i4t.js.services.WaiAria11Service.getImplicitRoleByElement(i4t(n))),!i4t(s).isNullOrEmptyString()){i4t(s.attributes).each(function(){var t=this.val().name,e=a[s];i4t(t).isNullOrEmptyString()||!i4t(t).startsWith("aria-")||Object.hasOwnProperty.call(a,s)&&!i4t(e).isUndefinedOrNull()&&i4t(e.atts).isArray()&&-1!==i4t(e.atts).indexOf(t)||i4t(n).removeAttr(t)});let t,e,i,r;if(Object.hasOwnProperty.call(a,s)&&null!==a[s]&&!i4t(a[s].implicitAtts).isUndefinedOrNull())for(e in t=i4t(n),a[s].implicitAtts)i=a[s].implicitAtts[e],r=t.attr(e),i4t(r).isNullOrEmptyString()&&t.attr(e,i)}}),":not([role]):not([data-insuit-role]):not("+t.join(",")+")");i4t(i4t.js.services.WaiAria11Service.notAllowedAttributesWithoutRole).each(function removeAriaAttributesWhenNoRole(){let t=this.val();i4t(e).findAll("["+t+"]"+i).each(function removeRole(){this.removeAttr(t)})})}static ARIA13(t){var e=i4t.js.services.WaiAria11Service.landmarkRoles.map(t=>`*[role=${t}]:not([aria-labelledby]):not([aria-label])`);i4t(t).findAll("[role][aria-labelledby]").forEach(t=>this.#checkLabelledByIdsExist(t)),i4t(t).findAll(e).forEach(t=>this.#tryToLabelLandmark(t))}static ARIA21(t){i4t(t).findAll("[aria-invalid=false][aria-errormessage]").each(function setAriaHiddenToErrorMessages(){var t=this.attr("aria-errormessage"),t=i4t.find('[id="'+t+'"]');t.isElement()&&t.attr("aria-hidden","true")})}static#tryToLabelLandmark(t){let e=i4t(t),i;[1,2,3,4,5,6].some(t=>{if((i=e.find(`h${t}:not(:empty)`)).isElement())return e.attr("aria-labelledby",i4t(i).id()),!0})||(i=e.previousSibling()).isElement()&&/h[1-6]/.test(i.nodeType)&&0<i4t(i).text().length&&e.attr("aria-labelledby",i4t(i).id())}static#checkLabelledByIdsExist(t){let e=i4t(t),i,r=e.attr("aria-labelledby");i4t(r).isNullOrEmptyString()||(i=r.split(" "),r=i.filter(t=>i4t.find(`*[id="${t}"]`).isElement()).join(" "),i4t(r).isNullOrEmptyString())?i4t(t).removeAttr("aria-labelledby"):i4t(t).attr("aria-labelledby",r)}},i4t.js.services.WCAG.TechniquesCSS=class TechniquesCSS extends i4t.base{static generalTechniques=[];static techniques=[this.C8];static C8(t){var e="'^(\\w\\s\\s?)+\\w?$'";/^(\\w\\s\\s?)+\\w?$/.test(t.textContent)&&i4t(t).findAll("p:regex("+e+"),span:regex("+e+"),h1:regex("+e+"),h2:regex("+e+"),h3:regex("+e+"),h4:regex("+e+"),h5:regex("+e+"),h6:regex("+e+")").each(function changeEmptySpacesToCSSSpacing(){var t=this.html().replace(/\s\s/gi,"_");t=(t=t.replace(/\s/gi,"")).replace(/_/g," "),this.html(t),this.style("letter-spacing","1em")})}},i4t.js.services.WCAG.TechniquesGeneral=class TechniquesGeneral{static#focusableQuery=i4t.element.focusableElementSelectors.map(t=>t+":not([tabindex=-1])").join(",");static generalTechniques=[this.G1,this.G200,this.G214];static techniques=[this.G59,this.G90,this.G124,this.G130,this.G196];static G1(){if("true"!==i4t(document.documentElement).attr("data-insuit-active")){let t=i4t.find("main:not([aria-hidden=true]):not([hidden]):not([role=none]),[role=main]:not([aria-hidden=true])"),e,i=i4t.find("#insuit-jump-main"),r,n;!i.isElement()&&t.isElement()&&(n=i4t.js.services.WCAG.TechniquesGeneral.#jumpLinksText[i4t.config.getLanguage()],e=t.attr("id"),i4t(e).isNullOrEmptyString()&&(t.attr("id","insuit-main"),e="insuit-main"),(i=i4t(i4t(document).createElement("a"))).attr("id","insuit-jump-main").attr("href","#"+e).attr("data-insuit-jumplink","true"),i4t(()=>{i4t.htmlElement.insuitTab.isElement()&&i4t.htmlElement.insuitTab.after(i)}).delay(1),i.val().textContent=n.goToMain,(r=i4t(i4t(document).createElement("a"))).attr("href","#insuit-jump-main").attr("data-insuit-jumplink","true"),r.val().textContent=n.goToTop),i4t.event.addListener("insuit-load",()=>{r?.isElement()&&r.remove(),i?.isElement()&&i.remove()})}}static G200(){i4t.event.addListener("insuit-load",()=>{i4t.event.dispatch("insuit-avoid-window-open")}),i4t.event.addListener("insuit-open-link",t=>{t=i4t(t.element);t.isElement()&&t.removeAttr("target")}),i4t.event.addListener("insuit-window-open",t=>{t.detail.target="_self"})}static G214(){i4t(screen).isUndefinedOrNull()||i4t(screen.orientation).isUndefinedOrNull()||!i4t(screen.orientation.unlock).isFunction()||screen.orientation.unlock()}static G59(t){this.#setTabIndexToFocusableElementsWithAriaHidden(t)}static G90(t){let e,i=[["onmousedown","onkeydown"],["onmouseup","onkeyup"],["onmouseover","onfocus"],["onmouseout","onblur"]];i4t(t).findAll("*[onmousedown], *[onkeydown], *[onmouseup], *[onkeyup], *[onmouseover], *[onfocus], *[onmouseout], *[onblur]").each(function(){e=this,i.forEach(function(t){i4t.js.services.WCAG.TechniquesGeneral.#addRedundantEventPair(e,t)})})}static G124(t){i4t(t).findAll("a[href^='#']:not([href='#'])").each(function checkElementHasCorrectAnchorLink(){var t=this.attr("href").substring(1),e=i4t.find("*[id='"+t+"']"),i=i4t.find("*[name='"+t+"']");!e.isElement()&&i.isElement()&&(!i4t(i.attr("id")).isNullOrEmptyString()?this.attr("href","#"+i.attr("id")):i.attr("id",t))})}static G130(t){i4t(t).findAll("*[role=banner]:not([aria-label]):not([aria-labelledby]), *[role=complementary]:not([aria-label]):not([aria-labelledby]), *[role=contentinfo]:not([aria-label]):not([aria-labelledby]), *[role=form]:not([aria-label]):not([aria-labelledby]), *[role=main]:not([aria-label]):not([aria-labelledby]), *[role=navigation]:not([aria-label]):not([aria-labelledby]), *[role=region]:not([aria-label]):not([aria-labelledby]), *[role=search]:not([aria-label]):not([aria-labelledby]), *[role=article]:not([aria-label]):not([aria-labelledby])").each(function(){var t,e=this.attr("title");if(!i4t(e).isNullOrEmptyString())return this.attr("aria-label",e);for(var i=1;i<7;i++)if((t=this.find("h"+i+':not([aria-hidden="true"])')).isElement())return this.attr("aria-labelledby",t.id())})}static G196(t){i4t(t).findAll("[alt] ~ [alt]").each(function removeRedundantAlts(){function NW(t){return i4t(t).attr("alt")===e}var e=this.parent().find("[alt]").attr("alt"),t=this.findAll("[alt]").val();if(t.some(NW))return!!t.every(NW)&&((t=this.findAll("[alt]")).remove(0),t.each(function(){this.attr("alt","")}),!0)})}static#jumpLinksText={"es-ES":{goToTop:"SUBIR AL PRINCIPIO",goToMain:"IR AL CONTENIDO PRINCIPAL"},"es-US":{goToTop:"SUBIR AL PRINCIPIO",goToMain:"IR AL CONTENIDO PRINCIPAL"},"en-GB":{goToTop:"GO TO TOP",goToMain:"GO TO MAIN"},"x-VA":{goToTop:"PUJAR AL PRINCIPI",goToMain:"ANAR AL CONTINGUT PRINCIPAL"},"ca-ES":{goToTop:"PUJAR AL PRINCIPI",goToMain:"ANAR AL CONTINGUT PRINCIPAL"},"eu-EU":{goToTop:"HASIERARA IGO",goToMain:"EDUKI NAGUSIRA JOAN"},"de-DE":{goToMain:"HOCH ZUM ANFANG",mostrar:"ZUM HAUPTBEREICH"},"it-IT":{goToTop:"VAI ALL'INIZIO",goToMain:"VAI AL CONTENUTO PRINCIPALE"},"fr-FR":{goToTop:"ALLER EN HAUTH",goToMain:"ALLER AU CONTENU PRINCIPAL"},"pt-PT":{goToTop:"SUBIR AO INÍCIO",goToMain:"IR PARA O CONTEÚDO PRINCIPAL"},"gl-ES":{goToTop:"SUBIR AO PRINCIPIO",goToMain:"IR AO CONTIDO PRINCIPAL"},"nl-NL":{goToTop:"GA NAAR BOVEN",goToMain:"GA NAAR HOOFDINHOUD"},"sl-SL":{goToTop:"POJDI NA VRH",goToMain:"POJDI V GLAVNO VSEBINO"},"hr-HR":{goToTop:"IDITE NA VR",goToMain:"IDITE NA GLAVNU STRANICU"}};static#addRedundantEventPair(t,e){t.hasAttribute(e[0])^t.hasAttribute(e[1])&&(t.hasAttribute(e[0])?t.attr(e[1],t.attr(e[0])):t.attr(e[0],t.attr(e[1])))}static#setTabIndexToFocusableElementsWithAriaHidden(t){i4t(t).findAll("[aria-hidden=true]").forEach(t=>{t=i4t(t);t.isFocusable()&&t.attr("tabindex","-1"),t.findAll("a,button,input,textarea,select,details,iframe,embed,object,summary dialog,audio[controls],video[controls],[contenteditable],[tabindex]").forEach(t=>i4t(t).attr("tabindex","-1"))})}},i4t.js.services.WCAG.TechniquesHTML=class TechniquesHTML{static generalTechniques=[this.H57];static techniques=[this.H2,this.H24,this.H25,this.H30,this.H33,this.H37,this.H42,this.H43,this.H44,this.H45,this.H49,this.H56,this.H63,this.H64,this.H67,this.H73,this.H88,this.H90,this.H93,this.H98];static H57(){var t=i4t.config.getLanguage(),e=i4t(document.documentElement);i4t(t).isNullOrEmptyString()&&(t=navigator.language),e.hasAttribute("lang")||e.attr("lang",t),e.removeAttr("xml:lang")}static H2(t){i4t(t).findAll("a[href]>img[href]").each(function removeDuplicatedLinksInImages(){this.attr("href")===this.parent().attr("href")&&this.removeAttr("href")})}static H24(t){i4t(t).findAll("area:not([alt])").each(function setAltToArea(){var t=this.attr("href");i4t(t).isNullOrEmptyString()||(t=new i4t.url(t).asLegibleString(),i4t(t).isNullOrEmptyString())?this.attr("alt",""):this.attr("alt",t)})}static H25(){i4t.js.services.WCAG.TechniquesHTML.#moveBodyTitlesToHead();var t=i4t.findAll("head title");t.filter(t=>i4t(i4t(t).text()).isNullOrEmptyString()).forEach(t=>i4t(t).remove()),t.isEmpty()?i4t.js.services.WCAG.TechniquesHTML.#createTitleElementFromPage():1<t.length()&&t.slice(1).forEach(t=>i4t(t).remove())}static H30(t){}static H33(t){i4t(t).findAll("a[title]").forEachTimeout(i4t.config.get("timeout.fn"),function checkTitleCorrectness(t){t=i4t(t),i4t(t.attr("title")).isNullOrEmptyString()||t.attr("title").trim()!==t.text().trim()||t.removeAttr("title")}),i4t(t).findAll("a[alt]:not([title])").forEachTimeout(i4t.config.get("timeout.fn"),function useAltAsTitle(t){var e=(t=i4t(t)).attr("alt");i4t(e).isNullOrEmptyString()||t.attr("title",e)}),i4t(t).findAll("a:not([role=none]):not([aria-hidden=true]):not([aria-describedby]):not([aria-labelledby]):not([aria-label]):not([title]):has(img)").forEachTimeout(i4t.config.get("timeout.fn"),function checkLinkTextOrTitle(t){var e,i;t=i4t(t),i4t(t.text()).isNullOrEmptyString()&&(i=t.attr("href"),e=function(t){return t=i4t(t),!i4t(t.attr("title")).isNullOrEmptyString()||!i4t(t.text()).isNullOrEmptyString()},1<(i=i4t.findAll("a[href='"+i+"']")).length())&&0<i.val().filter(e).length&&(i=i4t(i.val().filter(e)[0]),t.attr("title",i4t(i.text()).isNullOrEmptyString()?i.attr("title"):i.text().trim()))})}static H37(t){var i=function checkAnchorParent(t){var e=i4t.js.roles.getRoleByElement(document.documentElement).getParentRole(t);e instanceof i4t.js.roles.linkRole&&!i4t(e.element).isDescriptedByAttributes()&&i4t(i4t(e.element).text()).isNullOrEmptyString()&&i4t(e.element).attr("title",t.attr("alt"))},r=function setNullAlt(t){t.attr("alt","")},e=function setAltByFileName(t){var e=t.attr("src"),e=(e=new i4t.url(e).getFileName()).replace(/-/gi," ").replace(/_/gi," ");(!i4t(e).isNullOrEmptyString()&&/[A-Za-z]{3,}/.test(e)?(t.attr("alt",e),i):r)(t)};i4t(t).findAll("img:not([alt]):not([aria-hidden])").each(function tryToGuessAlt(){var t;i4t.js.services.WCAG.TechniquesHTML.#setAltFromOtherAttributes(this)||(t=this.attr("src"),(i4t(t).isNullOrEmptyString()?r:e)(this))})}static H42(t){i4t(t).findAll("static H1,static H2,static H3,static H4,static H5,static H6").each(function(){if(i4t(this.text()).isNullOrEmptyString()&&(!i4t(this.isInsideInsuitBar).isFunction()||!this.isInsideInsuitBar())){for(var t,e=this.before("<span></span>"),i=this.val().attributes,r=0;r<i.length;r++)t=i[r],e.attr(t.name,t.value);e.addClass("i4t-htospan"),e.html(this.html()),this.remove()}})}static H43(t){i4t(t).findAll("table [headers]").each(function checkIdsExists(){var t=this.attr("headers");if(!i4t(t).isNullOrEmptyString()){for(var e=t.split(" "),t="",i=0;i<e.length;i++)0<i4t.findAll('*[id="'+e[i]+'"]').length()&&(i4t(t).isNullOrEmptyString()||(t+=" "),t+=e[i]);i4t(t).isNullOrEmptyString()?this.removeAttr("headers"):this.attr("headers",t)}})}static H44(t){i4t(t).findAll("label").each(function checkLabelIsCorrect(){var t=this.attr("for");this.hasAttribute("for")&&!i4t(t).isNullOrEmptyString()&&i4t.findAll('[id="'+t+'"]').length()<1&&this.removeAttr("for"),this.hasAttribute("for")||(t=this.find("input, textarea, select")).isElement()&&this.attr("for",t.id())})}static H45(t){return i4t(t).findAll("img[longdesc]").each(function removeLongDescIfEmpty(){var t=this.attr("longdesc");i4t(t).isNullOrEmptyString()&&this.removeAttr("longdesc")}),!0}static H49(t){let e=i4t.js.services.WaiAria11Service,i=i4t.js.services.WCAG.TechniquesHTML;i4t(t).findAll("*>b:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementBToStrong(t)),i4t(t).findAll("*>i:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementIToEm(t)),i4t(t).findAll("*>center:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementCenterToTextDecoration(t)),i4t(t).findAll("*>u:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementUToTextDecoration(t)),i4t(t).findAll("*>s:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementSToTextDecoration(t)),i4t(t).findAll("*>strike:not([class])").filter(t=>e.containsPhrasingContent(t)).forEach(t=>i.#changeElementStrikeToTextDecoration(t))}static H56(t){i4t(t).findAll("*:not(html)[lang]:not([dir])").each(function setDirectionToTextOfLang(){var t,e=this.attr("lang");i4t(e).isNullOrEmptyString()||(t=i4t.js.services.WCAG.TechniquesHTML.#rtlLangs.some(function checkLangIsRTL(t){return t.test(e)}),this.attr("dir",t?"rtl":"ltr"))})}static H63(t){i4t(t).findAll("table [scope]").each(function removeWrongScopeValues(){i4t(["row","col","rowgroup","colgroup"]).includes(this.attr("scope"))||this.removeAttr("scope")})}static H64(t){i4t(t).findAll("iframe:not([title])").each(function setIframeTitle(){var t=this.attr("src");i4t(t).isNullOrEmptyString()||this.attr("title",i4t.js.services.I18nService.get("IFRAMETITLE")+t)})}static H67(t){i4t(t).findAll("img[alt='null']").each(function fixWrongNullAlt(){this.attr("alt","")})}static H73(t){return i4t(t).findAll("table[summary] caption").each(function checkSummaryAndCaptionDoNotRepeat(){for(var t=this.parent();"TABLE"!==t.val().nodeName;)t=t.parent();t.attr("summary")===this.text()&&t.removeAttr("summary")}),!0}static H88(t){i4t(t).findAll("[width], [height], [cellpadding], [border], [align], [valign], [cellspacing], [scrolling], [frameborder]").each(function(){var t=this;if(!t.is("canvas")&&"SvgElementWrapper"!==t.type){var e=t.attr("align"),i=t.attr("valign"),r=t.attr("scrolling"),n=t.attr("cellpadding"),s=t.attr("cellspacing"),a=t.attr("border");if(TechniquesHTML.removeAttributeToStyle(t,"frameborder","border"),TechniquesHTML.removeAttributeToStyle(t,"width","width"),TechniquesHTML.removeAttributeToStyle(t,"height","height"),i4t(a).isNullOrEmptyString()||(/^\d+(px)?$/.test(a)&&(a="0"===a||"0px"===a?"none":a+(/^\d+px$/.test(a)?"":"px"),t.css("border-width")===a&&t.style("border",a+("none"==a?"":" solid")),"table"===t.val().tagName.toLowerCase())&&"none"!=a&&t.findAll("td, th").each(function(){"inset"===this.css("border-style")&&i4t(this).style("border","1px solid")}),t.removeAttr("border")),i4t(n).isNullOrEmptyString()||(t.findAll("td, th").each(function(){this.css("padding")===n+"px"&&i4t(this).style("padding",n+"px")}),t.removeAttr("cellpadding")),i4t(s).isNullOrEmptyString()||(t.style("border-spacing",s),t.removeAttr("cellspacing")),!i4t(e).isNullOrEmptyString()){if("table"===t.val().tagName.toLowerCase())switch(e){case"center":("0px"===t.css("margin-left")&&"0px"===t.css("margin-right")||t.css("margin-left")===t.css("margin-right"))&&(t.style("margin-left","auto"),t.style("margin-right","auto"));break;case"right":"right"===t.css("float")&&t.style("float","right");break;case"left":"left"===t.css("float")&&t.style("float","left")}else t.addClass("insuit-align-"+e);t.removeAttr("align")}i4t(i).isNullOrEmptyString()||(t.css("vertical-align")===i&&t.style("vertical-align",i),t.removeAttr("valign")),i4t(r).isNullOrEmptyString()||("visible"===t.css("overflow")&&(t.style("overflow","no"===r?"hidden":"scroll"),t.addClass("i4t-remove-scrolling")),t.removeAttr("scrolling"))}})}static removeAttributeToStyle(t,e,i){var r,n=t.attr(e);i4t(n).isUndefinedOrNull()||(r=t.css(i),t.style(i,e===i?n:r),t.css(i)!==r&&t.style(i,""),t.removeAttr(e))}static H90(t){var e,i;i4t(t).findAll("*[aria-required=true]").each(function checkIfLabelHasRequiredIndicator(){i=this.attr("id"),i4t(i).isNullOrEmptyString()||(e=i4t.find("*[for='"+i+"']")).isElement()&&((i=(i=i4t.js.services.I18nService.get("form_required_words")).split(",")).push("*"),i.some(function containsRequiredValue(t){return i4t(e.text()).contains(t,0,!0)})||(i=[].slice.call(e.val().childNodes).filter(function validText(t){return t.nodeType===Node.TEXT_NODE&&!i4t(t.data).isNullOrEmptyString()})[0],i4t(i).isUndefinedOrNull())||i4t(i.data).isUndefinedOrNull()||(i.data=i.data+" *"))})}static H93(t){var i={};i4t(t).findAll("[id]").each(function(){var t,e=this.attr("id");i4t(e).isNullOrEmptyString()?this.removeAttr("id"):(t=i[e],i4t(t).isNullOrEmptyString()?i[e]=0:(i[e]++,this.attr("id",e+"_i4t"+i[e])))})}static H98(t){var e=["off","on","name","email","username","new-password","current-password","one-time-code","organization-title","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","tel","tel-extension","impp","url","photo"];i4t(t).findAll("[autocomplete]").each(function checkIfValidAutocomplete(){i4t(e).includes(this.attr("autocomplete"))||this.removeAttr("autocomplete")})}static#rtlLangs=[/^ar(-[A-Z]{2})?$/,/^am(-[A-Z]{2})?$/,/^az(-[A-Z]{2})?$/,/^dv(-[A-Z]{2})?$/,/^he(-[A-Z]{2})?$/,/^ku(-[A-Z]{2})?$/,/^fa(-[A-Z]{2})?$/,/^ur(-[A-Z]{2})?$/];static#setAltFromOtherAttributes(t){return i4t(t.attr("title")).isNullOrEmptyString()?i4t(t.attr("value")).isNullOrEmptyString()?i4t(t.attr("label")).isNullOrEmptyString()?!i4t(t.attr("name")).isNullOrEmptyString()&&(t.attr("alt",t.attr("name")),!0):(t.attr("alt",t.attr("label")),!0):(t.attr("alt",t.attr("value")),!0):(t.attr("alt",t.attr("title")),!0)}static#changeElementBToStrong(t){i4t(t).addClass("insuit-b-to-strong"),t.outerHTML=t.outerHTML.replace(/(<\/?)b((\s[^>]*)?>)/gim,"$1strong$2")}static#changeElementIToEm(t){i4t(t).addClass("insuit-i-to-em"),t.outerHTML=t.outerHTML.replace(/(<\/?)i((\s[^>]*)?>)/gim,"$1em$2")}static#changeElementUToTextDecoration(t){i4t(t).addClass("insuit-u"),t.outerHTML=t.outerHTML.replace(/(<\/?)u((\s[^>]*)?>)/gim,"$1span$2")}static#changeElementCenterToTextDecoration(t){i4t(t).addClass("insuit-center"),t.outerHTML=t.outerHTML.replace(/(<\/?)center((\s[^>]*)?>)/gim,"$1span$2")}static#changeElementSToTextDecoration(t){i4t(t).addClass("insuit-strike"),t.outerHTML=t.outerHTML.replace(/(<\/?)s((\s[^>]*)?>)/gim,"$1span$2")}static#changeElementStrikeToTextDecoration(t){i4t(t).addClass("insuit-strike"),t.outerHTML=t.outerHTML.replace(/(<\/?)strike((\s[^>]*)?>)/gim,"$1span$2")}static#moveBodyTitlesToHead(){i4t.findAll("body title").forEach(t=>document.head.appendChild(t))}static#createTitleElementFromPage(){var t=i4t(document).createElement("title"),e=(i4t(document.head).append(t),i4t.find("body>static H1:not(:empty),body>static H2:not(:empty),body>static H3:not(:empty),body static H1:not(:empty),body static H2:not(:empty),body static H3:not(:empty)"));e.isElement()&&!i4t(e.text()).isNullOrEmptyString()?i4t(t).html(e.text()):(e=new i4t.url,i4t(t).html(i4t.js.services.I18nService.get("PAGETITLE")+e.getDomain()))}},i4t.js.services.WCAG.WCAG21Service=class WCAG21Service{static#techniques=[i4t.js.services.WCAG.TechniquesARIA,i4t.js.services.WCAG.TechniquesHTML,i4t.js.services.WCAG.TechniquesGeneral,i4t.js.services.WCAG.TechniquesCSS];static async validateGenerals(t){t=i4t(t),await this.#executeGenerals(t),t.findAll("main[role=main]").each(function(){this.removeAttr("role")}),i4t(document.documentElement).removeAttr("xmlns"),this.#checkEqualLinks(t)}static async validate(t){t=i4t(t),i4t.logger.startTime(this.name,"WCAG21Service.validate"),await this.#executeTechniques("techniques",t.value),i4t.logger.endTime(this.name,"WCAG21Service.validate")}static async#executeGenerals(){i4t.logger.startTime(this.name,"WCAG21Service.executeGenerals"),await this.#executeTechniques("generalTechniques"),i4t.logger.endTime(this.name,"WCAG21Service.executeGenerals")}static async#executeTechniques(e,i){await i4t(this.#techniques).forEachTimeout(i4t.config.get("timeout.validators"),async t=>{t[e].forEach?.(e=>{try{i4t(e).isFunction()&&(e.call(t,i),i4t.logger.time(this.name,e.name))}catch(t){i4t.logger.warning("No se ha podido ejecutar la técnica "+e.name,t)}})})}static#checkEqualLinks(t){var i={};t.findAll('a:not([role="none"]):not([aria-describedby]):not([aria-labelledby]):not([aria-label]):not([title])').val().filter(function(t){return i4t(t).findAll("img[alt]").length()<1&&!i4t(i4t(t).text()).isNullOrEmptyString()}).forEach(function(t){var e=(t=i4t(t)).text();e in i?i[e].push(t):i[e]=[t]}),Object.entries&&Object.entries(i).filter(function(t){return 1<t[1].length}).forEach(function(t){var t=t[1],e=i4t(t[0]).attr("href");t.some(function(t){return i4t(t).attr("href")!==e})&&t.forEach(function(t){var e=new i4t.url(t.attr("href")).asLegibleString();i4t(e).isNullOrEmptyString()||t.attr("title",t.text()+":"+e)})})}},i4t.config.set("template.insuittab",({arrowTitle:t,text:e,microText:i,image:r,title:n}={})=>`
			<div id="x-insuit-tab-container">
				<span accesskey="i" id="x-insuit-tab-title" title="${n}" tabindex="0" role="button">
					${e}
					${i}
				</span>
				${i4t(r).isNullOrEmptyString()||"none"===r?"":`<img alt="inSuit" id="x-tab-custom-image" src="${r}">`}
				<span class="insuit-icon-tab ${"none"===r?"insuit-icon-none":""}" alt="inSuit" aria-hidden="true" id="x-tab-insuit-image"></span>
			</div>
			<div id="x-insuit-tab-arrow" class="insuit-icon-arrow" title="${t}" role="button" tabindex="0"></div>
	`),i4t.config.set("template.reader",({readerid:t,visible:e}={})=>{var i=i4t.config.get("reader.container");return`
    <div id="${i}-${t}" class="${i} ${e?"":"x-insuit-hidden"}">
        <a class="x-insuit-reader-button x-insuit-event-click-button" data-insuit-text-title="listen" href="#${t}" aria-expanded="false" role="button" data-insuit-event="play">
            <div class="insuit-icon-tts-4-3" data-insuit-text-content="listen"></div>
        </a>
        <div class="x-insuit-reader-options x-insuit-hidden">
            <button type="button" class="x-insuit-reader-play x-insuit-event-click-button" data-insuit-text-title="play" data-insuit-event="play">
                <div class="insuit-icon-play" data-insuit-text-content="play"></div>
            </button>
            <button type="button" class="x-insuit-reader-pause x-insuit-event-click-button x-insuit-hidden" data-insuit-text-title="pause" data-insuit-event="pause">
                <div class="insuit-icon-pause" data-insuit-text-content="pause"></div>
            </button>
            <button type="button" class="x-insuit-reader-stop x-insuit-event-click-button" data-insuit-text-title="stop" data-insuit-event="stop">
                <div class="insuit-icon-stop" data-insuit-text-content="stop"></div>
            </button>
            <button type="button" class="x-insuit-reader-volume x-insuit-event-click-button" data-insuit-text-title="volume" data-insuit-event="volume">
                <div class="insuit-icon-volume-on" data-insuit-text-content="volume"></div>
            </button>
            <div class="x-insuit-reader-volume-slider x-insuit-hidden" >
                <input type="range" min="0" max="4" value="2" class="x-insuit-reader-volume-slider-input x-insuit-event-change-input" data-insuit-event="changeVolume" data-insuit-text-title="volume">
            </div>
            <button type="button" class="x-insuit-reader-rate x-insuit-event-click-button" data-insuit-text-title="rate" data-insuit-event="rate">
                <div class="insuit-icon-rate" data-insuit-text-content="rate"></div>
            </button>
            <div class="x-insuit-reader-rate-slider x-insuit-hidden" >
                <input type="range" min="0" max="4" value="2" class="x-insuit-reader-rate-slider-input x-insuit-event-change-input" data-insuit-event="changeRate" data-insuit-text-title="rate">
            </div>
            <button type="button" class="x-insuit-reader-download x-insuit-event-click-button" data-insuit-text-title="download" data-insuit-event="download">
                <div class="insuit-icon-download" data-insuit-text-content="download"></div>
            </button>
            <button type="button" class="x-insuit-reader-change-mark x-insuit-event-click-button" data-insuit-text-title="changemark" data-insuit-event="changeMark">
                <div class="insuit-icon-marker" data-insuit-text-content="changemark"></div>
            </button>
            <button type="button" class="x-insuit-reader-close x-insuit-event-click-button" data-insuit-text-title="close" data-insuit-event="close">
                <div class="insuit-icon-close" data-insuit-text-content="close"></div>
            </button>
        </div>
    </div>`}),i4t.js.widgets.InsuitBar=class InsuitBar extends i4t.base{static#id="x-insuit-bar";static#hideTTSControlsTimeout;static#detectedElements=0;static#onResize=()=>{this.recalculateBackgroundBarHeight(),this.adjustFixedElementsCoveredByBar()};static#onMouseHover=()=>{if(this.bar.isElement()){window.clearTimeout(this.#hideTTSControlsTimeout);let t=this.bar.find(".x-insuit-dialog-option");t.addClass("open"),this.#hideTTSControlsTimeout=i4t(()=>{t.isElement()&&t.removeClass("open")}).delay(2)}};static get bar(){var t=i4t.htmlElement.insuitGeneralContainer();return t.isElement()?t.find("#"+this.#id):i4t(null)}static get bgBar(){return i4t.find("#x-insuit-background-bar")}static async createInsuitBar(){var t;this.bar.isElement()||(await this.addBarCSS(),t=this.createInsuitBarFromTemplate(),this.#resolveChromeBug(t),this.addBarMethods(),this.configureTTS(t),this.addConfigClickEvent(t),this.addInAidEvent(t),t.addObserver(()=>{this.recalculateBackgroundBarHeight(),this.adjustFixedElementsCoveredByBar()}),window.addEventListener("resize",this.#onResize),i4t(this.#onResize).delay(.5),t.find(".x-insuit-config-button-tts").addEventListener("mouseover",this.#onMouseHover),i4t(()=>this.detectCoveredElementsByBar()).delay(.5))}static#ttsIsAvailableForCurrentLanguage(){var t=i4t.config.get("lang.system"),e=i4t.config.getLanguage();return!i4t(t[e]).isUndefinedOrNull()}static configureTTS(t){this.#ttsIsAvailableForCurrentLanguage()&&(this.addTTSClickEvent(t),this.addTTSSlidersEvents(t),this.refreshTTSButtonState())}static addBarMethods(){i4t.extend(i4t.htmlElement,{isInsideInsuitBar(){let t=this;for(;t.value!==document.body&&t.value!==document.documentElement;){if(!t.isElement())return!1;if((e=t).value instanceof DocumentFragment&&i4t(e.value.host).attr("id")===i4t.config.get("shadowContainer")||t.attr("id")===i4t.config.get("generalContainer"))return!0;t=t.parent()}var e;return!1}})}static createInsuitBarFromTemplate(){var t=i4t.config.template("insuitbar");let e,i=i4t.htmlElement.insuitGeneralContainer(),r=i4t(i4t(document).createElement("div"));return(e=i.find("#"+i4t.config.get("barContainer"))).isElement()||(e=i.append('<div id="'+i4t.config.get("barContainer")+'"></div>')),r.attr("id","x-insuit-bar").append(t),e.append(r),r}static#resolveChromeBug(t){let e=t.find("#x-insuit-options");e.style("opacity","0"),e.addClass("open"),i4t(()=>{e.removeClass("open")}).defer(),i4t(()=>{e.style("opacity","")}).delay(.6)}static#canBeCoveredByBar(t){var e;return!!(t=i4t(t)).isElement()&&("fixed"===(e=t.css("position"))||"sticky"===e)&&"0px"!==t.css("top")&&(e=t.offset(),200<i4t.userAgent.windowHeight()-e.height)&&parseInt(t.css("bottom"))<300}static detectCoveredElementsByBar(){var t=i4t(document).createTreeWalker(document.body,NodeFilter.SHOW_ELEMENT);let e=t.nextNode();for(;i4t(e).isElement();)this.#canBeCoveredByBar(e)&&(i4t(e).attr("insuit-border-bottom-bar","true"),this.#detectedElements++),e=t.nextNode()}static closeInterfaceMenu(){var t=this.bar.find(".x-insuit-options");t.removeClass("open"),t.attr("aria-expanded","false")}static openInterfaceMenu(){var t=this.bar.find(".x-insuit-options");t.addClass("open"),t.attr("aria-expanded","true")}static addInAidEvent(t){var e=this.bar.find(".x-insuit-options"),i=()=>{i4t.config.UI.getOption("pendingTourMenu")?(i4t.config.UI.setOption("pendingTourMenu",!1),i4t.dispatchIEvent("aid-tour")):e.hasClass("open")?this.closeInterfaceMenu():this.openInterfaceMenu()};t.findAll(".x-insuit-selected").each(function(){this.addEventListener("click",i)}),this.addOptionAidEvent(t)}static addConfigClickEvent(t){var e=t.find(".x-insuit-config-button-help");e.isElement()&&e.addEventListener("click",function(){i4t(this).insuitEvent().dispatch("F1")}),(e=t.find(".x-insuit-config-button-exit")).isElement()&&e.addEventListener("click",function(){i4t(this).insuitEvent().dispatch("Escape")})}static createBgBar(){var t=i4t(i4t(document).createElement("div"));t.appendChild(i4t(document).createElement("div")),t.attr("id","x-insuit-background-bar-wrapper").find("div").attr("id","x-insuit-background-bar"),document.body.appendChild(t.value)}static recalculateBackgroundBarHeight(){i4t(()=>{if(this.bar.isElement()){this.bgBar.isElement()||this.createBgBar(),document.body.lastElementChild!==this.bgBar.parent().value&&(this.bgBar.parent().remove(),this.createBgBar());let e=this.bar.css("height");try{e=e.replace("px",""),e=parseInt(e)-10,i4t.scroll.getY(document.body)<=document.documentElement.clientHeight&&(e=0)}catch(t){i4t.logger.warning("No se ha podido sacar la altura del contenedor de interfaces: "+e,t),e=0}this.bgBar.style("height",e)}}).delay(.2)}static adjustFixedElementsCoveredByBar(){i4t(()=>{this.bar.isElement()&&i4t.findAll("*[insuit-border-bottom-bar]").forEach(t=>{this.#canBeCoveredByBar(t)?(i4t(t).hasAttribute("data-insuit-original-bottom")||i4t(t).attr("data-insuit-original-bottom",i4t(t).style("bottom")),i4t(t).style("bottom",parseInt(this.bar.css("height")),!0)):i4t(t).hasAttribute("data-insuit-original-bottom")&&(i4t(t).style("bottom",i4t(t).attr("data-insuit-original-bottom")),i4t(t).removeAttr("data-insuit-original-bottom"))})}).delay(.3)}static addTTSSlidersEvents(t){let e=t.find("#volumeSlider"),i=t.find("#rateSlider");e.addEventListener("change",()=>i4t.event.insuit.dispatch("changeVolume",{dto:e.value.value})),i.addEventListener("change",()=>i4t.event.insuit.dispatch("changeRate",{dto:i.value.value}))}static addTTSClickEvent(r){var t=r.find(".x-insuit-config-tts-link");t.isElement()&&t.addEventListener("click",()=>{let t=i4t.runner.isTTSActive(),e=i4t.config.UI.get(),i=i4t.config.UI.get();"EXTAID"!==e.option&&(i4t.event.insuit.dispatch("reconfig"),i4t(async()=>{t?(e.outAids.splice(e.outAids.indexOf("AloudOutAid"),1),r.find(".x-insuit-config-button-tts").attr("data-insuit-state","off"),i4t.event.insuit.dispatch("TTS-OFF")):(e.outAids.push("AloudOutAid"),r.find(".x-insuit-config-button-tts").attr("data-insuit-state","on"),i4t.event.insuit.dispatch("TTS-ON")),i4t.runner.saveConfig(e),this.refreshTTSButtonState(),i4t.runner.execUserConfig(e,i)}).defer())})}static createToolsShortcuts(n=i4t.config.UI.get().option){if(this.bar.isElement()){var t=this.bar.findAll("#x-insuit-bar-tools .insuit-shortcut");if(!(t.length()<1))if("SPEECH"!==n&&"KEY"!==n)t.forEach(t=>i4t(t).hide());else{let e=/.*insuit-(icon-[\w-]+).*/,i,r;t.forEach(t=>{(t=i4t(t)).show(),(i=t.parent().find("[class*='insuit-icon']")).isElement()&&e.test(i.attr("class"))&&(i=e.exec(i.attr("class"))[1],r=i4t.js.services.I18nService.get(`shortcut_${i}_`+n),t.html(r),i4t.css.adjustTextSizeToParentElement(t.value))})}}}static addOptionAidEvent(i){function B$(){var t=i4t(this),e=i.find(".x-insuit-selected");e.html(t.html()),e.attr("title",t.attr("title")),t=e.find("input.x-insuit-option-value").attr("value"),i4t.runner.changeInsuitInterfaceTo(t),"0px"!==i.find(".x-insuit-options").style("height")&&e.dispatchEvent("click")}i.findAll(".x-insuit-options li").each(function(){this.addEventListener("click",B$)})}static async addBarCSS(){await this.addProductCSS(),this.addProductHoverCSS();var t=i4t.userAgent.device.type;"tablet"!==t&&"mobile"!==t||this.addMetaViewport()}static addMetaViewport(){i4t.find("head meta[name=viewport]").remove(),i4t.css.addMeta("viewport","user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1")}static async addProductCSS(){var t=(await i4t.css.addInsuitLink(""+i4t.config.get("cdn.service")+i4t.config.get("cdn.css.path")+i4t.config.get("cdn.css.insuitfile"),!1,"anonymous")).sheet;this.addGeneralCSS(t),this.addAreasCSS(t)}static getBarBackgrounColor(){var t=(new i4t.url).getDomain(),t=i4t.config.get(t+".bar.backgroundcolor");return i4t(t).isNullOrEmptyString()?i4t.config.get("bar.backgroundcolor"):t}static addGeneralCSS(t){var e=this.getBarBackgrounColor(),i=i4t.config.get("bar.fontcolor"),r=i4t.config.get("font.family"),e=i4t.color.getAAColors(i,e),i=e.font;t.insertRule(`
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity),
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity) ::before,
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity) ::after {
                --insuit-font-color: ${i};
                --insuit-background-color: ${e.background};
                --insuit-font-family: ${r};
            }`,t.cssRules.length)}static addAreasCSS(t){var e=i4t.config.get("area.backgroundcolor"),i=i4t.config.get("area.fontcolor"),i=i4t(i).isNullOrEmptyString()?"#FFFFFF":i,e=i4t(e).isNullOrEmptyString()?"#AF0421":e,e=i4t.color.getAAColors(i,e);i=e.font,t.insertRule(`
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity),
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity) ::before,
            #x-insuit-container:not(#addSpecifity):not(#addSpecifity) ::after  {
                --insuit-area-font-color: ${i};
                --insuit-area-background-color: ${e.background};
            }`,t.cssRules.length)}static addProductHoverCSS(){function X$(t,e){for(var i,r="",e=e.substring(e.indexOf("{")),n=t.split(","),s=0;s<n.length;s++)(i=n[s]).match(a)&&(0<r.length&&(r+=", "),r+=i.replace(a,"[data-insuit-hover]"));return r+e}function Y$(e){var t="";if(!(/^https?:\/\/[a-z\-.0-9]+\/i4tservice\/cssresourceservice\/.*/.test(e.href)||e.ownerNode&&i4t(e.ownerNode).hasClass("insuit-style")||e.i4tLoaded))try{i4t(e.cssRules).each(function(){(i=this.val()).styleSheet?t+=Y$(i.styleSheet):i.conditionText&&i.cssText.match(a)?(r=i.cssText.substring(0,i.cssText.indexOf(" ")),t+=r+" "+i.conditionText+" { ",i4t(i.cssRules).each(function(){this.val().selectorText.match(a)&&(t+=X$(this.val().selectorText,this.val().cssText))}),t+=" }\n"):i.selectorText&&i.cssText.match(a)&&(t+=X$(i.selectorText,i.cssText)+"\n")})}catch(t){i4t.logger.info("No se ha podido añadir los estilos de hover a la hoja de estilos "+e.href)}return e.i4tLoaded=!0,t}var i,r,n="i4t-hover-stylesheet",t="",a=/:hover/g;i4t(document.styleSheets).each(function(){t+=Y$(this.val())}),i4t.css.addInlineStyle(t,!0,{id:n}),i4t(function(){var t,e="";i4t(document.styleSheets).each(function(){e+=Y$(this.val())}),i4t(e).isNullOrEmptyString()||(t=i4t.find("#"+n)).isElement()&&t.html(t.html()+e)}).interval(2e3)}static refreshTTSButtonState(){if(this.bar.isElement()){let t=this.bar,e=t.find("#insuit-tts-options"),i,r,n,s=i4t.config.get("aloud.codeVolume"),a=i4t.config.get("aloud.codeRate"),l=i4t.config.UI.get();i4t.runner.isTTSActive()?(e.attr("aria-hidden","false"),t.find(".x-insuit-config-button-tts").attr("data-insuit-state","on"),i=i4t.config.UI.getOption(s),i4t(i).isInt()||(i=i4t.config.get("aloud.defaultVolume"))):(e.attr("aria-hidden","true"),t.find(".x-insuit-config-button-tts").attr("data-insuit-state","off"),i=0),i4t.js.roles.getRoleByElement(t.find("#x-insuit-bar-tools").value)?.reload?.(),r=i4t.config.UI.getOption(a),i4t(r).isInt()||(r=i4t.config.get("aloud.defaultRate")),r+=1,n="EXTAID"===l.option,t.findAll('span[class^="insuit-icon-tts"], span[class*=" insuit-icon-tts"]').each(function(){n?(i=0,this.addClass("insuit-tts-disabled")):this.removeClass("insuit-tts-disabled");var t=(t=this.attr("class")).replace(new RegExp("(\\s|^)insuit-icon-tts-\\d-\\d(\\s|$)")," ");t=i4t(t).trim().val(),this.attr("class",t+" insuit-icon-tts-"+i+"-"+r)});var o=t.find("#volumeSlider"),c=t.find("#rateSlider");o.attr("value",i),c.attr("value",r)}}static removeBorderBottomBar(){i4t.findAll("*[insuit-border-bottom-bar]").forEach(t=>{i4t(t).hasAttribute("data-insuit-original-bottom")&&(i4t(t).style("bottom",i4t(t).attr("data-insuit-original-bottom")),i4t(t).removeAttr("data-insuit-original-bottom"))})}static removeBackgroundBarHeight(){this.bgBar.isElement()&&this.bgBar.parent().remove()}static destroy(){this.removeBorderBottomBar(),this.removeBackgroundBarHeight()}},i4t.js.AppRunner=class AppRunner extends i4t.base{#fnRun;#launchTimeout;#shadowContainer=i4t(null);static configIframeBus=i4t(null);#onPageLoad=()=>this.launchInsuitApp();static get insuitIframeBus(){return this.configIframeBus}#generalContainer=i4t(null);#fixedContainer=i4t(null);#relativeContainer=i4t(null);constructor(){super(),i4t.config.setCustomAttributes(this.scriptElement.value),"complete"===document.readyState?this.#launchTimeout=i4t(this.#onPageLoad).defer():i4t.event.addListener("load",this.#onPageLoad)}async launchInsuitApp(){i4t.event.removeListener("load",this.#onPageLoad),this.#createInsuitContainers(),this.setInsuitCDN(i4t.config.get("cdn.domain")),i4t(i4t.js.AppRunner.configIframeBus).isUndefinedOrNull()&&await this.#createConfigBus();var t=await this.getProjectConfig();i4t.config.setProjectConfig(t),this.run(t)}run(){}get generalContainer(){return this.#generalContainer.isElement()||(this.#generalContainer=i4t.htmlElement.insuitGeneralContainer()),this.#generalContainer}get fixedContainer(){return!this.#fixedContainer.isElement()&&this.generalContainer.isElement()&&(this.#fixedContainer=this.generalContainer.find(i4t.config.get("fixedContainer"))),this.#fixedContainer}get relativeContainer(){return!this.#relativeContainer.isElement()&&this.generalContainer.isElement()&&(this.#relativeContainer=this.generalContainer.find(i4t.config.get("relativeContainer"))),this.#relativeContainer}get scriptElement(){return i4t.find('script[src*="/insuit-app.js"], script[src*="jscm_loader.js"], script[src*="jscm_runner.js"], script[src*="jscm_pdfservice.js"]')}destroy(){var t;this.destroyOverwritedFunctions(),i4t.js.services.DomainService.destroy(),i4t.config.destroy(),i4t(this.#launchTimeout).isUndefinedOrNull()||window.clearTimeout(this.#launchTimeout),i4t(this.#fnRun).isFunction()&&i4t.event.removeListener("load",this.#fnRun),t=this.insuitIframeBus,i4t(t).isUndefinedOrNull()||t.destroy(),t=this.generalContainer,!i4t(t).isUndefinedOrNull()&&t.isElement()&&t.remove(),!i4t(i4t.htmlElement.insuitShadow).isUndefinedOrNull()&&i4t(i4t.htmlElement.insuitShadow.host).isElement()&&i4t(i4t.htmlElement.insuitShadow.host).remove(),i4t.js.AppRunner.configIframeBus=i4t(null),this.#generalContainer=i4t(null),this.#fixedContainer=i4t(null),this.#relativeContainer=i4t(null)}destroyOverwritedFunctions(){i4t.js.overwrited.forEach(t=>{t.target[t.name]=t.native}),i4t.js.overwrited=[]}createInsuitShadowContainer(){let t=i4t.htmlElement.insuitShadow,e=i4t(document.body.firstElementChild);return t=i4t(t).isUndefinedOrNull()?(t=e.isUndefinedOrNull()?i4t(document.body).append(`<div id="${i4t.config.get("shadowContainer")}" aria-hidden="true" class="skiptranslate"></div>`):e.before(`<div id="${i4t.config.get("shadowContainer")}" aria-hidden="true"  class="skiptranslate"></div>`)).value.attachShadow({mode:"open",delegatesFocus:!0}):t}#createInsuitContainers(){this.#shadowContainer=this.createInsuitShadowContainer(),this.#generalContainer=i4t(this.#shadowContainer.getElementById(i4t.config.get("generalContainer"))),this.#generalContainer.isElement()||(this.#generalContainer=i4t(i4t(document).createElement("div")),this.#generalContainer.attr("id",i4t.config.get("generalContainer")).addClass("skiptranslate"),this.#shadowContainer.append(this.#generalContainer.val()),this.createNativeIframeInsideShadowRoot()),this.#fixedContainer=this.#generalContainer.find("#"+i4t.config.get("fixedContainer")),this.#fixedContainer.isElement()||(this.#fixedContainer=this.#generalContainer.append('<div id="'+i4t.config.get("fixedContainer")+'" aria-hidden="true"></div>')),this.#relativeContainer=this.#generalContainer.find("#"+i4t.config.get("relativeContainer")),this.#relativeContainer.isElement()||(this.#relativeContainer=this.#generalContainer.append('<div id="'+i4t.config.get("relativeContainer")+'" aria-hidden="true"></div>'))}createNativeIframeInsideShadowRoot(){var t;i4t.nativeIframe.parentElement===document.documentElement&&document.documentElement.removeChild(i4t.nativeIframe),i4t.nativeIframe?.parentElement!==this.#generalContainer.value&&(t=i4t.createNativeIframe(),i4t.nativeIframe=t,this.#generalContainer.appendChild(i4t.nativeIframe))}async#createConfigBus(){if(!i4t.beIframe())return new Promise((t,e)=>{let i=i4t(i4t(document).createElement("iframe")),r=this.#getConfigIframeSrc();i.attr("aria-hidden","true").attr("title","insuit config iframe").attr("id","x-insuit-config-iframe").attr("allow","autoplay; microphone; speaker").style("display","none"),i.addEventListener("load",()=>{i4t(i.value.src).isNullOrEmptyString()||(i4t(i4t.js.AppRunner.configIframeBus).isUndefinedOrNull()?(i4t.js.AppRunner.configIframeBus=new i4t.iframeBus(i.value),i4t.insuitIframeBus=i4t.js.AppRunner.insuitIframeBus,this.setConfigBus(i4t.js.AppRunner.configIframeBus).then(t)):t())}),i.addEventListener("error",t=>{i4t(i.value.src).isNullOrEmptyString()||(i4t.logger.warning("No se ha podido cargar el iframe de configuración",t),e())}),this.#generalContainer.append(i.value),(r=new i4t.url(r)).addParam("cdn-domain",i4t.config.get("cdn.domain")),i4t.config.setupmaster&&r.addParam("setupmaster",!0),i.attr("src",r.toString()+"&V"+i4t.version)});i4t.storage.listenConfigChangesFromParentWindow()}#getConfigIframeSrc(){return"insuit.local"===i4t.config.get("environment")?"https://insuit.dev"+i4t.config.get("suit.path")+i4t.config.get("configpage"):i4t.config.get("suit.protocol")+"//"+i4t.config.get("environment")+i4t.config.get("suit.path")+i4t.config.get("configpage")}async setConfigBus(e){var t=i4t.config.get("configKey");e.isActive()&&e.unsubscribeAll(t),e.onError(()=>{i4t.logger.warning("No se ha podido establecer el iframeBus en la configuración")}),e.isActive()||await new Promise(t=>{e.onActive(t),e.activate(5e3,i4t.config.get("test.integration")),e.onError(()=>t(null))})}setInsuitCDN(t){i4t(t).isUndefinedOrNull()&&(t=i4t.config.get("suit.domain")),i4t.config.set("suit.service",i4t.config.get("suit.protocol")+"//"+i4t.config.get("suit.domain")+i4t.config.get("suit.path")),i4t.config.set("cdn.domain",t),i4t.config.set("cdn.service",`https://${t}/`+i4t.config.get("cdn.path"))}saveConfigOnSession(t){var e=/(dev.)?insuit.local(:9443)?/.test(i4t.config.get("environment")),i=i4t.config.get("local.timeout");i4t.storage.sessionDB.set("config",i4t(t).stringify()),e&&!i&&i4t.config.set("session.timeout",10),i4t.storage.sessionDB.set("config-timeout-date",Date.now()+parseInt(i4t.config.get("session.timeout")))}async#getConfigFromChromeExtension(){var t=await i4t(t=>{i4t.insuitIframeBus.subscribe("extension-config",t),i4t.insuitIframeBus.publish("extension-config",{domain:window.location.host})}).asyncWithTimeout(2e4);if(t)return t.save=!0,t;throw Error(`No se ha podido cargar la configuración desde la extensión de Chrome.
				Comprueba:
				- Que tienes iniciado el devserver
				- Que el dominio actual esta incluido en Domains`)}async#getConfigFromSetupMaster(){i4t.insuitIframeBus.subscribe("setupmaster",t=>{var e,i,r;t?.config&&(i=(e=t.config[window.location.host])?.timestamp,r=i4t.storage.sessionDB.getConfig()?.timestamp,i&&r&&r<i?(e.save=!0,this.loadResources(e),i4t.topRole?.setClientCSS(e.css),i4t.event.insuit.dispatch("new-config")):t.requests&&(r=t.requests.find(t=>"request-info"===t.action))&&i4t.insuitIframeBus.publish("setupmaster",{code:"setupmaster",domain:window.location.host,url:window.location.href,id:r.id,action:"request-info",response:i4t.js.services.IAService.getCurrentPageIAData()}))});var t=i4t(e=>{i4t.insuitIframeBus.subscribe("setupmaster",function onLoadConfig(t){t.timestamp&&(i4t.insuitIframeBus.unsubscribe("setupmaster",onLoadConfig),e(t))}),i4t.insuitIframeBus.publish("setupmaster",{site:window.location.host,action:"get-config",code:"setupmaster"})}).asyncWithTimeout(2e4);if(t)return t.save=!0,t;throw Error(`No se ha podido cargar la configuración desde la extensión de Chrome.
					Comprueba:
					- Que tienes el SetupMaster abierto
					- Que tienes seleccionado el dominio en el SetupMaster`)}async getProjectConfig(){var e=i4t.storage.sessionDB.getConfig();if(!i4t(e).isUndefinedOrNull()&&!i4t(e).isEmptyObject())return e;if(i4t.config.setupmaster)return(e=await this.#getConfigFromSetupMaster())&&(e.save=!0),e;if(i4t.config.get("local.extension"))return this.#getConfigFromChromeExtension();e=i4t.config.get("url.services")+"/configservice/config.json?V"+i4t.version;try{var t=await(await i4t.api.getProjectConfig({host:i4t.url.currentHost,version:i4t.version})).json();return t.save=!0,t}catch(t){return this.onConfigLoadError(e,t),null}}async loadResources(t={}){i4t(t).isEmptyObject()&&(t=await this.getProjectConfig());var e=i4t.js.services.I18nService.requestTexts(),i=new Promise(e=>{try{this.addClientJsResources(t,e)}catch(t){i4t.logger.error("No se ha podido cargar el archivo resources.js"),e()}});i4t.js.roles.htmlRole.pageCSS=t.css,await i,e.then(()=>{i4t.js.services.I18nService.reloadAllTexts(),i4t.event.insuit.dispatch("reload")}),i4t.js.services.DictionaryService.dictionary=t.dictionary,i4t.js.services.I18nService.registerReplacersDB(t.texts),i4t.js.services.ModelService.model=t.model,i4t.beIframe()&&(i4t.config.setProjectConfig(t),await i4t.js.widgets.InsuitBar.addBarCSS()),t.save&&(delete t.save,this.saveConfigOnSession(t))}addClientJsResources(t,e){if(i4t.config.setupmaster)return i4t.js.addScript(`https://${t.source??"setupmaster.insuit.dev"}/api/setupmaster/js-files/`+(new i4t.url).getHost(),!0,!1,e,"anonymous");i4t.js.addScript(i4t.api.getJSProjectScript({host:i4t.url.currentHost,version:t.version}),!0,!1,e,"anonymous")}},i4t.js.InsuitApp=class InsuitApp extends i4t.js.AppRunner{#onChildIframeMessage=(t,e,i,r)=>{this.#configLoaded&&i4t.storage.sendCurrentConfigToIframe(t,e,i,r)};#configLoaded=!1;#listeners={tab:{onFocus:()=>{i4t(()=>i4t.htmlElement?.insuitTab?.addClass?.("focused")).delay(.2)},onFocusOut:()=>{i4t.htmlElement.insuitTab.matches(":focus-within")||i4t.htmlElement.insuitTab.removeClass("focused")},onClick:t=>{"default"!==this.type&&!i4t.htmlElement.insuitTab.hasClass("focused")||this.launch(t)},onMouseEnter:t=>{"default"===this.tabType||i4t.userAgent.isMobile||i4t(t.currentTarget).addClass("focused")},onMouseLeave:t=>{i4t(t.currentTarget).removeClass("focused")},onKeyDown:t=>{13===t.keyCode&&this.launch(t)}},title:{onClick:t=>{this.launch(t)},onKeyDown:t=>{13===t.keyCode&&this.launch(t)},onFocus:()=>{i4t.htmlElement.insuitTab.addClass("focused")}},customElement:{onClick:t=>{this.launch(t)},onKeyDown:t=>{13===t.keyCode&&this.launch(t)}}};static instance;currentTexts;imgInsuit;tabId="x-insuit-tab";tabVisibleCode="openTab";currentText;topRole;project;isV8=!1;arrowHeight=10;langObserver;resourcesLoaded=!1;launcherObserver;get tabType(){var t=i4t.config.get("tab.size");return i4t(t).isNullOrEmptyString()?i4t.userAgent.windowWidth()<600?"micro":"default":t}#texts={"es-ES":{activar:"HERRAMIENTAS DE",accesibilidad:"ACCESIBILIDAD",mostrar:"MOSTRAR",ocultar:"OCULTAR",title:"Activar herramientas de accesibilidad adicionales, no activar si ya estás usando un lector de pantalla dado que la página ya está optimizada para ello",errorayudaexterna:"Error en la carga, intentelo de nuevo más tarde.",accesibilidadMobile:"HERRAMIENTAS DE ACCESIBILIDAD",activarMobile:"PULSA PARA ACTIVAR"},"es-US":{activar:"HERRAMIENTAS DE",accesibilidad:"ACCESIBILIDAD",mostrar:"MOSTRAR",ocultar:"OCULTAR",title:"Activar herramientas de accesibilidad adicionales, no activar si ya estás usando un lector de pantalla dado que la página ya está optimizada para ello",errorayudaexterna:"Error en la carga, intentelo de nuevo más tarde.",accesibilidadMobile:"HERRAMIENTAS DE ACCESIBILIDAD",activarMobile:"PULSA PARA ACTIVAR"},"en-GB":{invertir:!0,activar:"TOOLS",accesibilidad:"ACCESSIBILITY",mostrar:"SHOW",ocultar:"HIDE",title:"Activate additional accessibility tools, do not activate if you are already using a screen reader since the page is already optimized for it",errorayudaexterna:"Error loading, try again later.",accesibilidadMobile:"ACCESSIBILITY TOOLS",activarMobile:"CLICK TO ACTIVATE"},"x-VA":{activar:"EINES",accesibilidad:"D'ACCESSIBILITAT",mostrar:"MOSTRAR",ocultar:"AMAGAR",title:"Activar ferramentes d'accessibilitat addicionals, no activar si ja estàs usant un lector de pantalla ja que que la pàgina ja està optimitzada per fer-ho",errorayudaexterna:"Error al carregar, intenta-ho més tard.",accesibilidadMobile:"EINES D'ACCESSIBILITAT",activarMobile:"CLICA PER ACTIVAR"},"ca-ES":{activar:"EINES",accesibilidad:"D'ACCESSIBILITAT",mostrar:"MOSTRAR",ocultar:"AMAGAR",title:"Activar eines d'accessibilitat addicionals, no activar si ja estàs usant un lector de pantalla atès que la pàgina ja està optimitzada per fer-ho",errorayudaexterna:"Error en la càrrega, intenteu-ho més tard.",accesibilidadMobile:"EINES D'ACCESSIBILITAT",activarMobile:"CLICA PER ACTIVAR"},"eu-EU":{invertir:!0,activar:"TRESNAK",accesibilidad:"IRISGARRITASUN",mostrar:"ERAKUTSI",ocultar:"EZKUTATU",title:"Aktibatu irisgarritasun-tresna osagarriak, ez aktibatu pantaila-irakurgailua erabiltzen ari bazara, orria horretarako optimizatuta baitago.",errorayudaexterna:"Errorea kargatzean, saiatu berriro geroago.",accesibilidadMobile:"IRISGARRITASUN TRESNAK",activarMobile:"SAKATU AKTIBATZEKO"},"de-DE":{invertir:!0,activar:"TOOLS",accesibilidad:"ZUGÄNGLICHKEITS-",mostrar:"ANZEIGEN",ocultar:"VERSTECKEN",title:"Aktivieren Sie zusätzliche Barrierefreiheitstools. Aktivieren Sie diese nicht, wenn Sie bereits einen Screenreader verwenden, da die Seite bereits dafür optimiert ist",errorayudaexterna:"Fehler beim Laden, versuchen Sie es später erneut.",accesibilidadMobile:"BARRIEREFREIHEITSTOOLS",activarMobile:"ZUM AKTIVIEREN DRÜCKEN"},"it-IT":{activar:"STRUMENTI DI",accesibilidad:"ACCESSIBILITÀ",mostrar:"MOSTRA",ocultar:"NASCONDERE",title:"Attiva strumenti di accessibilità aggiuntivi, non attivarli se stai già utilizzando uno screen reader poiché la pagina è già ottimizzata per questo",errorayudaexterna:"Errore durante il caricamento, riprova più tardi.",accesibilidadMobile:"STRUMENTI DI ACCESSIBILITÀ",activarMobile:"PREMERE PER ATTIVARE"},"fr-FR":{activar:"OUTILS",accesibilidad:"D'ACCESSIBILITÉ",mostrar:"MONTRER",ocultar:"MASQUER",title:"Activez des outils d'accessibilité supplémentaires, ne les activez pas si vous utilisez déjà un lecteur d'écran car la page est déjà optimisée pour celui-ci",errorayudaexterna:"Erreur de chargement, réessayez plus tard.",accesibilidadMobile:"OUTILS D'ACCESSIBILITÉ",activarMobile:"APPUYEZ POUR ACTIVER"},"pt-PT":{activar:"FERRAMENTAS DE",accesibilidad:"ACESSIBILIDADE",mostrar:"MOSTRAR A",ocultar:"ESCONDER A",title:"Ative ferramentas adicionais de acessibilidade, não ative se já estiver usando um leitor de tela, pois a página já está otimizada para isso",errorayudaexterna:"Erro ao carregar, tente novamente mais tarde.",accesibilidadMobile:"FERRAMENTAS DE ACESSIBILIDADE",activarMobile:"PRESSIONE PARA ATIVAR"},"gl-ES":{activar:"FERRAMENTAS DE",accesibilidad:"ACCESIBILIDADE",mostrar:"MOSTRAR",ocultar:"OCULTAR",title:"Activa ferramentas de accesibilidade adicionais, non as actives se xa estás usando un lector de pantalla xa que a páxina xa está optimizada para iso",errorayudaexterna:"Erro ao cargar, ténteo de novo máis tarde.",accesibilidadMobile:"FERRAMENTAS DE ACCESIBILIDADE",activarMobile:"PREME PARA ACTIVAR"},"nl-NL":{invertir:!0,activar:"HULPMIDDELEN",accesibilidad:"TOEGANKELIJKHEID",mostrar:"LATEN ZIEN",ocultar:"ZICH VERSTOPPEN",title:"Activeer extra toegankelijkheidstools, activeer deze niet als u al een schermlezer gebruikt, aangezien de pagina er al voor is geoptimaliseerd",errorayudaexterna:"Upload mislukt, probeer het later opnieuw.",accesibilidadMobile:"TOEGANKELIJKHEID HULPMIDDELEN",activarMobile:"DRUK OP OM TE ACTIVEREN"},"sl-SL":{activar:"ORODJA ZA",accesibilidad:"DOSTOPNOST",mostrar:"Pokaži",ocultar:"Skrij",title:"Aktivirajte dodatna orodja za ljudi s posebnimi potrebami, ne aktivirajte, če že uporabljate bralnik zaslona, ​​saj je stran že optimizirana zanj",errorayudaexterna:"Napaka pri nalaganju, poskusite pozneje.",accesibilidadMobile:"ORODJA ZA DOSTOPNOST",activarMobile:"PRITISNITE ZA AKTIVIRANJE"},"hr-HR":{activar:"ALATI ZA",accesibilidad:"DOSTUPNOSTI",mostrar:"Prikaži",ocultar:"Sakriti",title:"Aktivirajte dodatne alate za pristupačnost, nemojte aktivirati ako već koristite čitač zaslona jer je stranica već optimizirana za njega",errorayudaexterna:"Prijenos nije uspio, pokušajte ponovo kasnije.",accesibilidadMobile:"ALATI ZA PRISTUPAČNOST",activarMobile:"PRITISNITE ZA AKTIVIRANJE"}};getActivationButtonText(){var t=this.currentTexts;return t.invertir?`
				<div class="default-tab">
					<span>${t.accesibilidad}</span>
					<span>${t.activar}</span>
				</div>`:`
			<div class="default-tab">
				<span>${t.activar}</span>
				<span>${t.accesibilidad}</span>
			</div>`}getActivationButtonMobileText(){var t=this.currentTexts;return`
			<div class="little-tab">
				<div>${t.accesibilidadMobile}</div>
				<div>${t.activarMobile}</div>
			</div>`}getArrowText(t){var e=this.currentTexts,t=t?e.mostrar:e.ocultar;return e.invertir?e.accesibilidad+" "+t:t+" "+e.accesibilidad}constructor(){super(),i4t.logger.startTime(this.type,"InsuitApp"),this.scriptElement.isElement()&&this.setConfigurationByScriptAttributes(this.scriptElement),this.checkCustomTabTexts(),i4t.logger.endTime(this.type,"InsuitApp")}checkCustomTabTexts(){let t=i4t.config.getLanguage(),e=i4t.config.get("tab.texts");return this.currentTexts=this.#texts[t],i4t(e).isNullOrEmptyString()||(e=this.extractCustomTexts(e),i4t(e).isUndefinedOrNull())||i4t(e[t]).isUndefinedOrNull()||i4t.extend(this.currentTexts,e[t]),{lang:t,customTexts:e}}extractCustomTexts(t){var e=t.split(".").filter(t=>"window"!=t).reduce((t,e)=>t[e],window);return i4t(e).isObject()?e:i4t.execute(" return "+t)}setConfigurationByScriptAttributes(t){var t=t.val(),e=new i4t.url(t.src),i=e.getPort(),i=e.getDomain()+(i4t(i).isNullOrEmptyString()?"":":"+i);i4t.config.set("suit.domain",i),i4t.config.set("suit.service","https://"+i4t.config.get("suit.domain")+i4t.config.get("suit.path")),i4t.config.set("url.services",`https://${e.getHost()}/i4tservice`),i4t.config.set("url.projects",`https://${e.getHost()}/i4tproject`),i4t.config.setCustomAttributes(t),i4t(t.lang).isNullOrEmptyString()||i4t.config.setLanguage(t.lang),i4t(t.src).contains("/insuit-app.js")&&(this.isV8=!0)}onConfigLoadError(t,e){i4t(e).isNullOrEmptyString()||(i4t.logger.error(e),!i4t(e.message).isNullOrEmptyString()&&i4t(e.message).includes("no es un JSON")&&i4t.logger.error("Posible error en el archivo .properties")),i4t.logger.warning(`No se ha podido recuperar la respuesta a: ${t}, RESPONSE: `+e)}async addInsuitScriptsAndStyle(t){i4t(t).isUndefinedOrNull()||(i4t(this.generalContainer).isUndefinedOrNull()?i4t(i4t(this.addInsuitScriptsAndStyle).bind(this,t)).defer():t.isv8&&!i4t.config.isPassive&&await this.loadResources(t))}async run(t){if(!t.isv8)return this.checkUserConfig();await this.addInsuitScriptsAndStyle(t),this.project=i4t.config.get("project"),i4t.logger.startTime(this.type+"_run","InsuitApp.run"),this.isV8&&this.project.isv8&&!i4t.config.isPassive&&(i4t.topRole=new i4t.js.roles.htmlRole,i4t.topRole.init(),await i4t.topRole.reload(!0),i4t.logger.time(this.type+"_run","i4t.topRole.reload"));t=this.isV8&&this.project.isv8&&!i4t(this.project.version).isNullOrEmptyString();(!this.isV8&&!this.project.isv8&&i4t(this.project.version).isNullOrEmptyString()||t)&&this.checkUserConfig(),this.setChildIframesConfigListener(),i4t.logger.endTime(this.type+"_run","InsuitApp.run")}setChildIframesConfigListener(){i4t.event.addListener("message",this.#onChildIframeMessage)}destroy(){i4t(this.langObserver).isUndefinedOrNull||(this.langObserver.disconnect(),this.langObserver=null),i4t.storage.childIframes=[],i4t.event.removeListener("message",this.#onChildIframeMessage),this.removeTab(),super.destroy()}removeTab(){var t=i4t.find("#"+i4t.config.get("shadowContainer")),e=i4t.htmlElement.insuitTab,i=i4t.find("#"+this.tabId+"-css");t.isElement()&&t.removeEventListener("focusin",this.#listeners.tab.onFocus).removeEventListener("focusout",this.#listeners.tab.onFocusOut),e.isElement()&&e.remove(),i.isElement()&&i.remove()}async checkUserConfig(){var t=i4t.insuitIframeBus;let e=t=>{this.#configLoaded=!0,i4t.logger.trace("Se ejecuta la configuracion de usuario en InsuitApp:"+t.isActive),i4t(t).isObject()&&i4t(t.isActive).isBoolean()&&t.isActive?this.launch():(t=this.isTabClosed(t),this.setLauncher(t))};i4t(t).isUndefinedOrNull()&&!i4t.beIframe()?e({}):i4t.beIframe()||t.isActive()?e(await i4t.storage.getConfig()):(t.onActive(async()=>{var t=await i4t.storage.getConfig();e(t)}),t.activate(1e3,i4t.config.get("test.integration")))}isTabClosed(t){var e=!!i4t.config.get("tab.closed"),i=i4t(t).isObject()&&i4t(t.options).isObject()&&i4t(t.options[this.tabVisibleCode]).isBoolean(),t=i&&t.options[this.tabVisibleCode];return i&&!t||!i&&e}saveConfig(t){try{t.isDefaultConfig=!1,t.version=i4t.version;var e=this.insuitIframeBus;i4t(e).isUndefinedOrNull()||e.publish(i4t.config.get("configKey")+"-save",t)}catch(t){i4t.logger.warning("No se ha podido guardar la configuración en el IframeConfig",t),alert(this.currentTexts.errorayudaexterna)}}getSuitHref(){var t=new i4t.url(window.location.href);return t.setDomain(i4t.config.get("suit.domain")),t.toString()}setLauncher(t){i4t.findAll("*["+i4t.config.get("reader.tagAttr")+"]").isEmpty()||i4t.js.addScript(i4t.config.get("cdn.service")+i4t.config.get("cdn.js.path")+i4t.config.get("cdn.js.readerfile")),i4t.beIframe()||i4t.config.get("project.accessibilityManager")||(i4t(i4t.config.get("id")).isNullOrEmptyString()?this.createTab(t):this.useClientButtonAsInsuitLauncher())}useClientButtonAsInsuitLauncher(){this.launcherObserver=i4t.event.addObserver(document.body,()=>this.setCustomButtonsAsLauncher(),i4t.function.empty,{subtree:!0,childList:!0,attributes:!0,characterData:!1,attributeFilter:["id","class"]}),this.setCustomButtonsAsLauncher()}setCustomButtonsAsLauncher(){var t=i4t.config.get("id");[...document.querySelectorAll(`*[id='${t}'], .`+t)].forEach(t=>{this.launcherObserver?.disconnect?.(),this.launcherObserver=null,i4t.logger.trace(`Se añade como launcher el elemento con id ${t.id} y clases `+t.className),i4t(t).removeEventListener("click",this.#listeners.customElement.onClick).removeEventListener("keydown",this.#listeners.customElement.onKeyDown).addEventListener("click",this.#listeners.customElement.onClick).addEventListener("keydown",this.#listeners.customElement.onKeyDown)})}removeCustomLaunchers(){i4t(this.launcherObserver).isUndefinedOrNull()||(this.launcherObserver.disconnect(),this.launcherObserver=null);var t=i4t.config.get("id");i4t.findAll(`*[id='${t}'], .`+t).forEach(t=>{i4t(t).removeEventListener("click",this.#listeners.customElement.onClick).removeEventListener("keydown",this.#listeners.customElement.onKeyDown)})}getCustomElementLaunchers(){var t=i4t.config.get("id");return i4t(t).isNullOrEmptyString()?i4t([]):i4t.findAll(`#${t}, .`+t)}eventIsFromMouse(t){return t&&"click"===t.type&&(i4t.htmlElement?.insuitTab?.matches?.(":hover")||i4t(t.currentTarget)?.matches?.(":hover"))}async launch(t){this.eventIsFromMouse(t)&&i4t.config.setKeyAsDefaultConfig(),this.#removeLaunchListeners(),t&&(t.stopPropagation(),t.preventDefault()),!i4t(this.project).isUndefinedOrNull()&&this.project.isv8?(this.#removeReaders(),this.removeTab(),i4t.config.isPassive&&await this.loadResources(),this.startInsuit()):(t=this.getSuitHref(),window.location.href!==t&&(window.location.href=t))}async startInsuit(){if(!i4t.config.get("project.accessibilityManager")){var i=await i4t.storage.getConfig();i.isActive=!0,await i4t.storage.saveConfig(i);let e,t=i4t.find('script[src*="/insuit.js"]').isElement();t?(e=this.insuitIframe,i4t(function(t){i4t.runner.run(t,e)}).delay(1)):i4t.js.addScript(i4t.config.get("cdn.service")+i4t.config.get("cdn.js.path")+i4t.config.get("cdn.js.file"))}}async createTab(t){var e=await i4t.css.addInsuitLink(""+i4t.config.get("cdn.service")+i4t.config.get("cdn.css.path")+i4t.config.get("cdn.css.tabfile"),!1,"anonymous"),i=""+i4t.config.get("cdn.service")+i4t.config.get("cdn.css.path")+i4t.config.get("cdn.css.pagefile");await i4t.css.addLink(i,!0,"anonymous");let r=this.createInsuitShadowContainer(),n=i4t(i4t(document).createElement("div")),s=i4t.config.get("tab.custom"),a=i4t.config.get("tab.image"),l=i4t.config.get("tab.size"),o=i4t.config.template("insuittab",{arrowTitle:this.getArrowText(t),text:this.getActivationButtonText(),microText:this.getActivationButtonMobileText(),image:a,title:this.currentTexts.title,type:i4t.config.get("tab.type")}),c=i4t.config.get("position"),d;n.attr("id","x-insuit-tab").attr("tabindex","0").addClass(t?"closed":"open").html(o),i4t(l).isNullOrEmptyString()||n.addClass("insuit-tab-"+l),(!i4t(l).isNullOrEmptyString()||!i4t.userAgent.isMobile&&i4t.userAgent.windowWidth()<600)&&n.addEventListener("mouseenter",this.#listeners.tab.onMouseEnter).addEventListener("mouseleave",this.#listeners.tab.onMouseLeave),this.generalContainer.addEventListener("click",t=>{t.stopImmediatePropagation()}),i4t.find("#"+i4t.config.get("shadowContainer")).addClass("insuit-tab").attr("accesskey","i"),i4t(c).isNullOrEmptyString()||i4t(c).split(" ").forEach(t=>n.addClass("insuit-tab-"+t)),this.#moveAccessKeysToTab(),n.addEventListener("click",this.#listeners.tab.onClick).addEventListener("keydown",this.#listeners.tab.onKeyDown).addEventListener("focusin",this.#listeners.tab.onFocus).addEventListener("focusout",this.#listeners.tab.onFocusOut),n.find("#x-insuit-tab-title").addEventListener("click",this.#listeners.title.onClick).addEventListener("keydown",this.#listeners.title.onKeyDown),d=n.find("#x-insuit-tab-arrow"),n.find("#x-insuit-tab-arrow").addEventListener("click",t=>{this.toggleTabVisibility(d),t.preventDefault(),t.stopImmediatePropagation()}),n.find("#x-insuit-tab-arrow").addEventListener("keydown",t=>{13===t.keyCode&&(this.toggleTabVisibility(d),t.preventDefault(),t.stopImmediatePropagation())}),s&&(n.addClass("insuit-custom-tab"),this.#insertCustomStyleInShadowRoot(e)),r.appendChild(n.value)}#moveAccessKeysToTab(){i4t.findAll("*[accesskey=i], *[accesskey=o]").each(function(){this.removeAttr("accesskey")})}#insertCustomStyleInShadowRoot(e){i4t(e.sheet).isUndefinedOrNull()||i4t.css.getAllPageCSSRules().filter(t=>i4t(t.selectorText).includes("#x-insuit-tab")).map(t=>t).forEach(t=>e.sheet.insertRule(t.cssText.replace(/body/g,"").replace(/html/g,""),e.sheet.cssRules.length))}toggleTabVisibility(t){var e=t.parent(),i=e.hasClass("open"),r=this.getArrowText(i);e.addClass(i?"closed":"open").removeClass(i?"open":"closed"),t.attr("title",r);try{i4t.storage.saveOption(this.tabVisibleCode,!i)}catch(t){i4t.logger.warning("No se ha podido guardar la configuración de la visibilidad de la pestaña",t)}}#removeReaders(){var t=i4t.find('script[src*="/insuit-reader.js"]');t.isElement()&&(i4t.reader&&i4t.reader.remove(),t.remove())}#removeLaunchListeners(){var t=i4t.htmlElement.insuitTab;t.isElement()&&(t.removeEventListener("click",this.#listeners.tab.onClick).removeEventListener("keydown",this.#listeners.tab.onKeyDown).removeEventListener("focusin",this.#listeners.tab.onFocus).removeEventListener("focusout",this.#listeners.tab.onFocusOut).removeEventListener("mouseenter",this.#listeners.tab.onMouseEnter).removeEventListener("mouseleave",this.#listeners.tab.onMouseLeave),t.find("#x-insuit-tab-title").removeEventListener("click",this.#listeners.title.onClick).removeEventListener("keydown",this.#listeners.title.onKeyDown)),this.removeCustomLaunchers()}reloadTabLang(){var t=i4t.config.getLanguage(),e=i4t.htmlElement.insuitTab?.find?.("[role=button]"),i=i4t.htmlElement.insuitTab?.find?.("#x-insuit-tab-arrow");this.checkCustomTabTexts(),this.currentTexts=this.#texts[t],i4t(e).isElement()&&e.html(this.getActivationButtonText()).attr("title",this.currentTexts.title),i4t(i).isElement()&&i.attr("title",this.getArrowText(i4t.htmlElement.insuitTab.hasClass("closed")))}},i4t.js.InsuitApp.instance=new i4t.js.InsuitApp);
i4t.config.set("cdn.domain","cdn.insuit.net");</script>
</body>
</html>
