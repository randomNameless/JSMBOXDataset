<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>native-loader.html</title>
</head>
<body>

<script>
(()=>{"use strict";var n=!1,t="background: black; color: #48D1CC",e="background: black; color: red",o="background: black; color: yellow",r="background: black; color: #8A2BE2",i="background: black; color: #33FF33";function a(n){var t=n.indexOf("?"),e=n.indexOf("event",t),o=n.indexOf("=",e)+1,r=n.indexOf("&",o);return n.substr(o,r-o)}function u(t,e,o){n&&(Object.keys(o).length>0?console.info(t,e,o):console.info(t,e))}function c(n){var t="%cUnruly:: ";return t+=n}var l={init:function(t){n=t},log:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(c(n),t,e)},error:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(c(n),e,t)},warning:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(c(n),o,t)},logPixel:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(c("".concat(n,": ").concat(a(t))),r,t)},logApi:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(c(n),i,t)}};function d(n){try{return JSON.parse(decodeURIComponent(n.replace(/\+/g," ")))}catch(n){}return decodeURIComponent(n.replace(/\+/g," "))}function s(n){var t=n.split("=",2);return{key:t[0],value:t[1]}}var f=function(n){try{if(n&&n.AMP_CONTEXT_DATA)return!0;if(n&&n.name){var t=JSON.parse(n.name);return void 0!==(t._context||t.attributes._context)}if(n&&n.context)return!0}catch(n){}return!1},v=function(){return(new Date).getTime().toString(16)+Math.floor(1e14*Math.random()).toString(16)};function p(n){try{return n!==n.top}catch(n){}return!0}function y(n,t){return n||t}var g=function(n,t){var e=n.siteId?n.siteId:t.siteId,o=function(n,t){var e=y(n.scriptUrl,"https://player.aniview.com/script/custom/unruly/outstream/skin.js"),o=y(n.eventToTrack,"AdImpression,AdError,onError,AdEvent,onEvent,AdLoaded,onLoad,onPlay").split(",");return e=function(n,t){return"".concat(n,"?site_id=").concat(t)}(e,t),{scriptUrl:e,eventToTrack:o}}(n,e);return{scriptUrl:o.scriptUrl,eventToTrack:o.eventToTrack,siteId:e}};function w(n){var t=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(!n.location||!n.location.search||""===n.location.search)return{};var t={};return n.location.search.substring(1).split("&").forEach((function(n){var e=s(n),o=e.key,r=e.value;0===o.indexOf("unruly_")&&r&&(t[o.replace("unruly_","")]=d(r))})),t}(n),e=function(n){var t=v(),e=n.unruly&&n.unruly.native&&n.unruly.native.siteId?n.unruly.native.siteId:void 0;return{pageLoadId:t,sessionId:n.unruly&&n.unruly.native&&"prebid"===n.unruly.native.supplyMode&&n.unruly.native.adSlotId?n.unruly.native.adSlotId:v(),siteId:e}}(n),o=g(t,e);return Object.assign({},e,o,t)}function m(n){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},m(n)}function b(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}var h=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.payload={},this.configuration={},this.pixelsEndPoint="https://aniview-diag-server.1rx.io/pixels?"}var t,e,o;return t=n,e=[{key:"setConfiguration",value:function(n){this.configuration=n,this.setBasePayload()}},{key:"getConfiguration",value:function(){return this.configuration}},{key:"getSiteEnv",value:function(n){return f(t=n)||f(t.parent)?"amp":function(n){return n.unruly&&n.unruly.native&&"prebid"===n.unruly.native.supplyMode}(n)?"prebid":"html";var t}},{key:"setBasePayload",value:function(){this.payload={adslotid:this.configuration.sessionId,siteid:this.configuration.siteId,iframe:p(window),siteenv:this.getSiteEnv(window),page:window.location.href,clientver:"1.0.0",pageloadid:this.configuration.pageLoadId}}},{key:"registerPlacement",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.unruly.native;l.log("registerPlacement",n,t),n&&"object"===m(t)||T("error","You must pass placementId and placementConfig"),e.placements=e.placements||{},e.placements[n]=t}}],e&&b(t.prototype,e),o&&b(t,o),Object.defineProperty(t,"prototype",{writable:!1}),n}();const I=new h;function k(n){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},k(n)}function _(n,t){return void 0!==n[t]&&null!==n[t]&&""!==n[t]}function S(n,t,e){return A(n[t])?P(n[t],e.concat(t)):(o=n[t],[e.concat(t).join("."),o].map((function(n){return encodeURIComponent(n)})).join("="));var o}function P(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(n).filter((function(t){return _(n,t)})).map((function(e){return S(n,e,t)})).join("&")}var A=function(n){return n&&"object"===k(n)};function T(n,t){var e=function(n,t){var e={cb:Date.now(),event:n,message:t,event_time:(new Date).toISOString().replace("T"," ").split(".")[0]};return Object.assign({},I.payload,e)}(n,t);!function(n){(new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.Image)).src=n,l.logPixel("Event",n)}(I.pixelsEndPoint+P(e))}var x=function(n,t){var e=n.scriptUrl,o=n.eventToTrack,r=n.siteId,i=function(n,t){var e=document.createElement("script");return e.src=n,e.setAttribute("id","unruly_skin_script"),e.setAttribute("data-player-api","playerApi".concat(t)),e}(e,r);!function(n,t){window["playerApi".concat(t)]=function(t,e){n.forEach((function(n){e.on(n,(function(t){l.logApi(n,t)}))})),e.on("Inventory",(function(n){l.logApi("event",n),T("aniview_player_load","anviview version ".concat(n.version))}))}}(o,r),t.appendChild(i)};!function(){if(I.setConfiguration(w(window)),window.unruly&&window.unruly.native)if(window.unruly.native.siteId){l.init(I.configuration.isDebug),window.unruly.native.placementId="inArticle",window.unruly.native.rxPayload=I.getConfiguration(),window.unruly.native.registerPlacement=I.registerPlacement,l.log("configuration: ",I.getConfiguration()),function(n,t){try{t.top.__unrulyPageLoadId||(t.top.__unrulyPageLoadId=n),t.__unrulyPageLoadId=t.top.__unrulyPageLoadId}catch(e){t.__unrulyPageLoadId=n}}(I.getConfiguration().pageLoadId,window),T("tag_load","Ani View Wrapper load on the page");try{x(I.configuration,document.head)}catch(n){T("error_av_not_load",n.toString())}}else T("error","window.unruly.native.siteId not defined");else T("error","window.unruly.native not defined")}()})();
//# sourceMappingURL=/dist/sourcemaps/../AniViewWrapper.js.map
</script>

</body>
</html>
