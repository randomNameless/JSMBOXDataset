<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>piano-to-fast.html</title>
</head>
<body>

<script>
// Only if Piano Analytics script is loaded
// Special implementation for Piano privacy - Adapt Piano to FastCMP
window.__tcfapi('addEventListener', 2, function(tcData) {
  if (['tcloaded', 'useractioncomplete'].includes(tcData.eventStatus)) {
    
    // Consent is already defined by user (`tcloaded`) or User has defined his consent (`useractioncomplete`)
    if (
      tcData.gdprApplies &&
      !tcData.custom.vendors.includes('piano')
      ) {
      // If piano privacy mode is already optout, we still optout
      if (window.pa.consent.getMode() === 'opt-out') {
        return;
      }
      // User refuse all vendors consents (with "Refuse" button likely)
      window.pa.consent.setMode('essential');
    } else {
      // User accept all/some vendors consents (with "Accept" button likely) or GDPR doesn't apply for user
      window.pa.consent.setMode('opt-in');
    }
  } else {
    // CMP is open
    window.pa.consent.setMode('essential');
  }
});

</script>

</body>
</html>
