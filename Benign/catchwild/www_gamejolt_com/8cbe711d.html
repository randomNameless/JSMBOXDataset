<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8cbe711d.html</title>
</head>
<body>

<script>
import{j as Q,X as ae,I as r,aD as f,K as te,cz as se,cp as ie,D as Z,bk as le,bQ as J,bh as P,gr as T,o as s,f as i,u as a,aE as M,T as ne,ar as A,w as x,z as p,Z as N,l as $,a9 as oe,cA as re,B as o,O as ue,a8 as ce,x as C,gs as ve,cq as U,_ as Y,gt as de,gu as q,az as X,av as O,a1 as R,$ as W,as as me,gv as _e,q as fe,b1 as H}from"./index-efc70e4a.js";import{_ as j}from"./3c243cab.js";import{G as F,c as he,d as pe}from"./270aab94.js";import{_ as ge}from"./9c5a36f4.js";const ye={key:0,class:"-inner"},xe={class:"-embed"},be=["src"],ke={key:0,class:"-embed"},we=["textContent"],Ie={key:0,class:"-embed"},Me=Q({__name:"AppLightboxItem",props:{item:{type:Object,required:!0},itemIndex:{type:Number,required:!0},activeIndex:{type:Number,required:!0}},setup(D){const L=D,{item:t,itemIndex:g,activeIndex:u}=ae(L),e=r(!1),b=r(!1),m=r(!1),S=r(!1),c=r(0),v=r(0),_=r(),n=r(),E=f(()=>e.value),V=f(()=>l.value.is_animated&&!l.value.mediaserver_url_mp4&&!l.value.mediaserver_url_webm),l=f(()=>t.value.getMediaItem()),k=te(()=>{const y={mp4:l.value.mediaserver_url_mp4,webm:l.value.mediaserver_url_webm};return se(y,"gif",l.value.mediaserver_url)});ie(U,()=>w()),Z(u,()=>h()),le(async()=>{await h(),await w(),S.value=!0});async function w(){if(await J(),!P.isXs&&(c.value=P.width-T.buttonSize*2,v.value=P.height-T.controlsHeight*2,_.value&&(v.value-=_.value.offsetHeight),t.value.getMediaType()==="image")){const y=t.value.getMediaItem().getDimensions(c.value,v.value);c.value=y.width,v.value=y.height}}async function h(){n.value&&(e.value=u.value===g.value,b.value=u.value+1===g.value,m.value=u.value-1===g.value,n.value.classList.remove("active","next","prev"),e.value?n.value.classList.add("active"):m.value?n.value.classList.add("prev"):b.value&&n.value.classList.add("next"),(e.value||b.value||m.value)&&w())}return(y,G)=>(s(),i("div",{ref_key:"rootElem",ref:n,class:"media-bar-lightbox-item"},[e.value||b.value||m.value?(s(),i("div",ye,[a(M)(a(t),a(ne))||a(M)(a(t),a(F))?(s(),i(A,{key:0},[x("div",xe,[p(ce,{"media-item":l.value,style:ue({width:c.value?c.value+"px":void 0,height:v.value?v.value+"px":void 0,marginLeft:"auto",marginRight:"auto",maxWidth:`${l.value.width}px`}),radius:"lg"},{default:N(()=>[!l.value.is_animated||!E.value?(s(),$(oe,{key:0,class:"-img",src:a(t).img_thumbnail},null,8,["src"])):V.value?(s(),i("img",{key:1,class:"img-responsive",src:l.value.img_url,alt:""},null,8,be)):k.value?(s(),$(re,{key:2,class:"-video",player:k.value,"show-loading":""},null,8,["player"])):o("",!0)]),_:1},8,["media-item","style"])]),a(M)(a(t),a(F))&&a(t).caption?(s(),i("div",{key:0,ref_key:"caption",ref:_,class:"-caption"},[x("h4",null,C(a(t).caption),1)],512)):o("",!0)],64)):a(M)(a(t),a(he))?(s(),i(A,{key:1},[e.value?(s(),i("div",ke,[S.value?(s(),$(ve,{key:0,"video-provider":a(t).type,"video-id":a(t).url,"max-video-width":c.value,"max-video-height":v.value,autoplay:""},null,8,["video-provider","video-id","max-video-width","max-video-height"])):o("",!0)])):o("",!0),a(t).title||a(t).description?(s(),i("div",{key:1,ref_key:"caption",ref:_,class:"-caption"},[x("h4",null,C(a(t).title),1),a(t).description?(s(),i("p",{key:0,textContent:C(a(t).description)},null,8,we)):o("",!0)],512)):o("",!0)],64)):a(M)(a(t),a(pe))?(s(),i(A,{key:2},[e.value?(s(),i("div",Ie,[p(ge,{"sketchfab-id":a(t).sketchfab_id,"max-width":c.value,"max-height":v.value,autoplay:!0},null,8,["sketchfab-id","max-width","max-height"])])):o("",!0)],64)):o("",!0)])):o("",!0)],512))}});const $e=Y(Me,[["__scopeId","data-v-31e35039"]]),Ce={class:"-inner"},Le={class:"-controls"},Se={key:1,class:"-prev -hideable"},Pe={key:3,class:"-next -hideable"},K="media-bar-lightbox-open",Ae=Q({__name:"AppLightboxPortal",setup(D){const L=r(null),t=r(null);let g=0;const u=r(!1),e=f(()=>de()),b=f(()=>e.value?e.value.items:[]),m=f(()=>e.value?e.value.index:0),S=f(()=>e.value?m.value<e.value.length-1:!1),c=f(()=>!e.value||!e.value.activeItem?null:e.value.activeItem.getMediaItem()),v=f(()=>!e.value||!e.value.activeItem?null:e.value.activeItem.getMediaType());let _=null,n=null;Z(e,async()=>{var d;if(!e.value||!e.value.length){(d=e.value)==null||d.close(),V();return}E()},{deep:!0});async function E(){document.body.classList.add(K),_=U.subscribe(h),n=()=>w(),q.register(n),await J(),h()}function V(){document.body.classList.remove(K),_==null||_.close(),n&&(q.deregister(n),n=null),g=0,u.value=!1}function l(){e.value&&(e.value.goNext(),h())}function k(){e.value&&(e.value.goPrev(),h())}function w(){e.value&&e.value.close()}function h(){const d=-(P.width*m.value);t.value&&(t.value.style.transform=`translate3d( ${d}px, 0, 0 )`),g=d}function y(){u.value=!0}function G(d){u.value&&t.value&&(t.value.style.transform=`translate3d( ${g+d.deltaX}px, 0, 0 )`)}function ee(d){u.value=!1;const{velocityX:z,deltaX:I,distance:B}=d;if(Math.abs(z)>.55&&B>10||Math.abs(I)>=L.value.clientWidth/3){z>0||I>0?(k(),H.trackEvent("media-bar","swiped-prev")):(l(),H.trackEvent("media-bar","swiped-next"));return}h()}return(d,z)=>e.value?(s(),i("div",{key:0,ref_key:"root",ref:L,class:fe({dragging:u.value})},[p(_e,{class:"media-bar-lightbox theme-dark","pan-options":{threshold:0},onPanstart:y,onPanmove:G,onPanend:ee},{default:N(()=>[p(j,{shortkey:"arrowleft",onPress:k}),p(j,{shortkey:"arrowright",onPress:l}),x("div",Ce,[x("div",Le,[m.value>0?(s(),i("a",{key:0,class:"-prev",onClick:k},[p(X,{icon:"chevron-left"})])):(s(),i("div",Se)),x("div",null,[c.value&&v.value==="image"?(s(),$(O,{key:0,icon:"download",trans:"",href:c.value.img_url,target:"_blank"},{default:N(()=>[R(C(a(W)("Download")),1)]),_:1},8,["href"])):o("",!0),p(O,{onClick:w},{default:N(()=>[R(C(a(W)("Close")),1)]),_:1})]),S.value?(s(),i("a",{key:2,class:"-next",onClick:l},[p(X,{icon:"chevron-right"})])):(s(),i("div",Pe))]),x("div",{ref_key:"slider",ref:t,class:"-slider"},[(s(!0),i(A,null,me(b.value,(I,B)=>(s(),$($e,{key:I.getModelId(),item:I,"item-index":B,"active-index":m.value},null,8,["item","item-index","active-index"]))),128))],512)])]),_:1})],2)):o("",!0)}});const Be=Y(Ae,[["__scopeId","data-v-1705ce4a"]]);export{Be as default};

</script>

</body>
</html>
