<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ott-player-vjs-pack.html</title>
</head>
<body>

<script>
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.videojs=t()}(this,function(){var d="6.13.0",e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){return e.raw=t,e}var i,a,o,s,h="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},u={},l=(Object.freeze||Object)({default:u}),p=l&&u||l,g=void 0!==e?e:"undefined"!=typeof window?window:{},m="undefined"!=typeof document?document:g["__GLOBAL_DOCUMENT_CACHE@4"]||(g["__GLOBAL_DOCUMENT_CACHE@4"]=p),y=h.navigator&&h.navigator.userAgent||"",v=/AppleWebKit\/([\d.]+)/i.exec(y),_=v?parseFloat(v.pop()):null,b=/iPad/i.test(y),T=/iPhone/i.test(y)&&!b,E=/iPod/i.test(y),S=T||b||E,w=(i=y.match(/OS (\d+)_/i))&&i[1]?i[1]:null,A=/Android/i.test(y),C=function(){var e=y.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),R=A&&/webkit/i.test(y)&&C<2.3,I=A&&C<5&&_<537,M=/Firefox/i.test(y),O=/Edge/i.test(y),D=!O&&(/Chrome/i.test(y)||/CriOS/i.test(y)),k=(a=y.match(/(Chrome|CriOS)\/(\d+)/))&&a[2]?parseFloat(a[2]):null,P=/MSIE\s8\.0/.test(y),L=(o=/MSIE\s(\d+)\.\d/.exec(y),!(s=o&&parseFloat(o[1]))&&/Trident\/7.0/i.test(y)&&/rv:11.0/.test(y)&&(s=11),s),x=/Safari/i.test(y)&&!D&&!A&&!O,N=(x||S)&&!D,F=ne()&&("ontouchstart"in h||h.navigator.maxTouchPoints||h.DocumentTouch&&h.document instanceof h.DocumentTouch),B=ne()&&"backgroundSize"in h.document.createElement("video").style,U=(Object.freeze||Object)({IS_IPAD:b,IS_IPHONE:T,IS_IPOD:E,IS_IOS:S,IOS_VERSION:w,IS_ANDROID:A,ANDROID_VERSION:C,IS_OLD_ANDROID:R,IS_NATIVE_ANDROID:I,IS_FIREFOX:M,IS_EDGE:O,IS_CHROME:D,CHROME_VERSION:k,IS_IE8:P,IE_VERSION:L,IS_SAFARI:x,IS_ANY_SAFARI:N,TOUCH_ENABLED:F,BACKGROUND_SIZE_SUPPORTED:B}),j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G=Object.prototype.toString,H=function(e){return K(e)?Object.keys(e):[]};function q(t,n){H(t).forEach(function(e){return n(t[e],e)})}function V(n){for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&q(e,function(e,t){n[t]=e})}),n)}function K(e){return!!e&&"object"===(void 0===e?"undefined":j(e))}function Y(e){return K(e)&&"[object Object]"===G.call(e)&&e.constructor===Object}var W=[],z=function(s,u){return function(e,t,n,r){var i=u.levels[t],a=new RegExp("^("+i+")$");if("log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(s+":"),W&&W.push([].concat(n)),h.console){var o=h.console[e];o||"debug"!==e||(o=h.console.info||h.console.log),o&&i&&a.test(e)&&(r&&(n=n.map(function(t){if(K(t)||Array.isArray(t))try{return JSON.stringify(t)}catch(e){return String(t)}return String(t)}).join(" ")),o.apply?o[Array.isArray(n)?"apply":"call"](h.console,n):o(n))}}};var X=function t(n){function i(){for(var e=i.stringify||L&&L<11,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o("log",a,n,e)}var a="info",o=void 0;return o=z(n,i),i.createLogger=function(e){return t(n+": "+e)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');a=e}return a},(i.history=function(){return W?[].concat(W):[]}).filter=function(t){return(W||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},i.history.clear=function(){W&&(W.length=0)},i.history.disable=function(){null!==W&&(W.length=0,W=null)},i.history.enable=function(){null===W&&(W=[])},i.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("error",a,t)},i.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("warn",a,t)},i.debug=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("debug",a,t)},i}("VIDEOJS"),Q=X.createLogger;var $=function(e){for(var t="",n=0;n<arguments.length;n++)t+=e[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return t};function J(e,t){if(!e||!t)return"";if("function"!=typeof h.getComputedStyle)return e.currentStyle[t]||"";var n=h.getComputedStyle(e);return n?n[t]:""}var Z=r(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);function ee(e){return"string"==typeof e&&/\S/.test(e)}function te(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function ne(){return m===h.document&&void 0!==m.createElement}function re(e){return K(e)&&1===e.nodeType}function ie(){try{return h.parent!==h.self}catch(e){return!0}}function ae(r){return function(e,t){if(!ee(e))return m[r](null);ee(t)&&(t=m.querySelector(t));var n=re(t)?t:m;return n[r]&&n[r](e)}}function oe(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],i=m.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(X.warn($(Z,e,t)),i.setAttribute(e,t)):"textContent"===e?se(i,t):i[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){i.setAttribute(e,t[e])}),r&&Ce(i,r),i}function se(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function ue(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function le(e,t){return te(t),e.classList?e.classList.contains(t):function(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}(t).test(e.className)}function de(e,t){return e.classList?e.classList.add(t):le(e,t)||(e.className=(e.className+" "+t).trim()),e}function ce(e,t){return e.classList?e.classList.remove(t):(te(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function fe(e,t,n){var r=le(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?de(e,t):ce(e,t),e}function he(n,r){Object.getOwnPropertyNames(r).forEach(function(e){var t=r[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function pe(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var r=e.attributes,i=r.length-1;0<=i;i--){var a=r[i].name,o=r[i].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(o=null!==o),t[a]=o}return t}function ge(e,t){return e.getAttribute(t)}function me(e,t,n){e.setAttribute(t,n)}function ye(e,t){e.removeAttribute(t)}function ve(){m.body.focus(),m.onselectstart=function(){return!1}}function _e(){m.onselectstart=function(){return!0}}function be(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n.height||(n.height=parseFloat(J(e,"height"))),n.width||(n.width=parseFloat(J(e,"width"))),n}}function Te(e){var t=void 0;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=m.documentElement,r=m.body,i=n.clientLeft||r.clientLeft||0,a=h.pageXOffset||r.scrollLeft,o=t.left+a-i,s=n.clientTop||r.clientTop||0,u=h.pageYOffset||r.scrollTop,l=t.top+u-s;return{left:Math.round(o),top:Math.round(l)}}function Ee(e,t){var n={},r=Te(e),i=e.offsetWidth,a=e.offsetHeight,o=r.top,s=r.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(o-u+a)/a)),n.x=Math.max(0,Math.min(1,(l-s)/i)),n}function Se(e){return K(e)&&3===e.nodeType}function we(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Ae(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),re(e)||Se(e)?e:"string"==typeof e&&/\S/.test(e)?m.createTextNode(e):void 0}).filter(function(e){return e})}function Ce(t,e){return Ae(e).forEach(function(e){return t.appendChild(e)}),t}function Re(e,t){return Ce(we(e),t)}function Ie(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||(9===L||0===e.button&&1===e.buttons))}var Me=ae("querySelector"),Oe=ae("querySelectorAll"),De=(Object.freeze||Object)({isReal:ne,isEl:re,isInFrame:ie,createEl:oe,textContent:se,prependTo:ue,hasClass:le,addClass:de,removeClass:ce,toggleClass:fe,setAttributes:he,getAttributes:pe,getAttribute:ge,setAttribute:me,removeAttribute:ye,blockTextSelection:ve,unblockTextSelection:_e,getBoundingClientRect:be,findPosition:Te,getPointerPosition:Ee,isTextNode:Se,emptyEl:we,normalizeContent:Ae,appendContent:Ce,insertContent:Re,isSingleLeftClick:Ie,$:Me,$$:Oe}),ke=1;function Pe(){return ke++}var Le={},xe="vdata"+(new Date).getTime();function Ne(e){var t=e[xe];return t=t||(e[xe]=Pe()),Le[t]||(Le[t]={}),Le[t]}function Fe(e){var t=e[xe];return!!t&&!!Object.getOwnPropertyNames(Le[t]).length}function Be(t){var e=t[xe];if(e){delete Le[e];try{delete t[xe]}catch(e){t.removeAttribute?t.removeAttribute(xe):t[xe]=null}}}function Ue(e,t){var n=Ne(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Be(e)}function je(t,n,e,r){e.forEach(function(e){t(n,e,r)})}function Ge(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||h.event;for(var i in e={},r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||m),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=m.documentElement,o=m.body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var He=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){He=!0}});h.addEventListener("test",null,e),h.removeEventListener("test",null,e)}catch(e){}}();var qe=["touchstart","touchmove"];function Ve(o,e,t){if(Array.isArray(e))return je(Ve,o,e,t);var s=Ne(o);if(s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),t.guid||(t.guid=Pe()),s.handlers[e].push(t),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e,t){if(!s.disabled){e=Ge(e);var n=s.handlers[e.type];if(n)for(var r=n.slice(0),i=0,a=r.length;i<a&&!e.isImmediatePropagationStopped();i++)try{r[i].call(o,e,t)}catch(e){X.error(e)}}}),1===s.handlers[e].length)if(o.addEventListener){var n=!1;He&&-1<qe.indexOf(e)&&(n={passive:!0}),o.addEventListener(e,s.dispatcher,n)}else o.attachEvent&&o.attachEvent("on"+e,s.dispatcher)}function Ke(e,t,n){if(Fe(e)){var r=Ne(e);if(r.handlers){if(Array.isArray(t))return je(Ke,e,t,n);function i(e,t){r.handlers[t]=[],Ue(e,t)}if(void 0!==t){var a=r.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Ue(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function Ye(e,t,n){var r=Fe(e)?Ne(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Ge(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Ye.call(null,i,t,n);else if(!i&&!t.defaultPrevented){var a=Ne(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function We(e,t,n){if(Array.isArray(t))return je(We,e,t,n);function r(){Ke(e,t,r),n.apply(this,arguments)}r.guid=n.guid=n.guid||Pe(),Ve(e,t,r)}var ze=(Object.freeze||Object)({fixEvent:Ge,on:Ve,off:Ke,trigger:Ye,one:We}),Xe=!1,Qe=void 0,$e=function(){if(ne()&&!1!==Qe.options.autoSetup){var e=m.getElementsByTagName("video"),t=m.getElementsByTagName("audio"),n=m.getElementsByTagName("video-js"),r=[];if(e&&0<e.length)for(var i=0,a=e.length;i<a;i++)r.push(e[i]);if(t&&0<t.length)for(var o=0,s=t.length;o<s;o++)r.push(t[o]);if(n&&0<n.length)for(var u=0,l=n.length;u<l;u++)r.push(n[u]);if(r&&0<r.length)for(var d=0,c=r.length;d<c;d++){var f=r[d];if(!f||!f.getAttribute){Je(1);break}void 0===f.player&&null!==f.getAttribute("data-setup")&&Qe(f)}else Xe||Je(1)}};function Je(e,t){t&&(Qe=t),h.setTimeout($e,e)}ne()&&"complete"===m.readyState?Xe=!0:We(h,"load",function(){Xe=!0});function Ze(e){var t=m.createElement("style");return t.className=e,t}function et(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t}function tt(e,t,n){function r(){return t.apply(e,arguments)}return t.guid||(t.guid=Pe()),r.guid=n?n+"_"+t.guid:t.guid,r}function nt(t,n){var r=Date.now();return function(){var e=Date.now();n<=e-r&&(t.apply(void 0,arguments),r=e)}}function rt(){}rt.prototype.allowedEvents_={},rt.prototype.addEventListener=rt.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ve(this,e,t),this.addEventListener=n},rt.prototype.removeEventListener=rt.prototype.off=function(e,t){Ke(this,e,t)},rt.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},We(this,e,t),this.addEventListener=n},rt.prototype.dispatchEvent=rt.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Ge(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Ye(this,e)};function it(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length}function at(e){if(!e.nodeName&&!dt(e))throw new Error("Invalid target; must be a DOM node or evented object.")}function ot(e){if(!it(e))throw new Error("Invalid event type; must be a non-empty string or array.")}function st(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")}function ut(e,t){var n=t.length<3||t[0]===e||t[0]===e.eventBusEl_,r=void 0,i=void 0,a=void 0;return a=n?(r=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],t[1]):(r=t[0],i=t[1],t[2]),at(r),ot(i),st(a),{isTargetingSelf:n,target:r,type:i,listener:a=tt(e,a)}}function lt(e,t,n,r){at(e),e.nodeName?ze[t](e,n,r):e[t](n,r)}var dt=function(t){return t instanceof rt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},ct={on:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ut(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(lt(o,"on",s,u),!a){function l(){return e.off(o,s,u)}l.guid=u.guid;function d(){return e.off("dispose",l)}d.guid=u.guid,lt(this,"on","dispose",l),lt(o,"on","dispose",d)}},one:function(){for(var r=this,e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=ut(this,t),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(a)lt(o,"one",s,u);else{function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.off(o,s,l),u.apply(null,t)}l.guid=u.guid,lt(o,"one",s,l)}},off:function(e,t,n){if(!e||it(e))Ke(this.eventBusEl_,e,t);else{var r=e,i=t;at(r),ot(i),st(n),n=tt(this,n),this.off("dispose",n),r.nodeName?(Ke(r,i,n),Ke(r,"dispose",n)):dt(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){return Ye(this.eventBusEl_,e,t)}};function ft(e,t){var n=(1<arguments.length&&void 0!==t?t:{}).eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=oe("span",{className:"vjs-event-bus"});return V(e,ct),e.on("dispose",function(){e.off(),h.setTimeout(function(){e.eventBusEl_=null},0)}),e}var ht={state:{},setState:function(e){var n=this;"function"==typeof e&&(e=e());var r=void 0;return q(e,function(e,t){n.state[t]!==e&&((r=r||{})[t]={from:n.state[t],to:e}),n.state[t]=e}),r&&dt(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function pt(e,t){return V(e,ht),e.state=V({},e.state,t),"function"==typeof e.handleStateChanged&&dt(e)&&e.on("statechanged",e.handleStateChanged),e}function gt(e){return"string"!=typeof e?e:e.charAt(0).toUpperCase()+e.slice(1)}function mt(){for(var n={},e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.forEach(function(e){e&&q(e,function(e,t){Y(e)?(Y(n[t])||(n[t]={}),n[t]=mt(n[t],e)):n[t]=e})}),n}var yt=(vt.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Be(this.el_),this.el_=null),this.player_=null},vt.prototype.player=function(){return this.player_},vt.prototype.options=function(e){return X.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),e&&(this.options_=mt(this.options_,e)),this.options_},vt.prototype.el=function(){return this.el_},vt.prototype.createEl=function(e,t,n){return oe(e,t,n)},vt.prototype.localize=function(e,i,t){var n=2<arguments.length&&void 0!==t?t:e,r=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),o=a&&a[r],s=r&&r.split("-")[0],u=a&&a[s],l=n;return o&&o[e]?l=o[e]:u&&u[e]&&(l=u[e]),i&&(l=l.replace(/\{(\d+)\}/g,function(e,t){var n=i[t-1],r=n;return void 0===n&&(r=e),r})),l},vt.prototype.contentEl=function(){return this.contentEl_||this.el_},vt.prototype.id=function(){return this.id_},vt.prototype.name=function(){return this.name_},vt.prototype.children=function(){return this.children_},vt.prototype.getChildById=function(e){return this.childIndex_[e]},vt.prototype.getChild=function(e){if(e)return e=gt(e),this.childNameIndex_[e]},vt.prototype.addChild=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==n?n:this.children_.length,a=void 0,o=void 0;if("string"==typeof e){o=gt(e);var s=r.componentClass||o;r.name=o;var u=vt.getComponent(s);if(!u)throw new Error("Component "+s+" does not exist");if("function"!=typeof u)return null;a=new u(this.player_||this,r)}else a=e;if(this.children_.splice(i,0,a),"function"==typeof a.id&&(this.childIndex_[a.id()]=a),(o=o||a.name&&gt(a.name()))&&(this.childNameIndex_[o]=a),"function"==typeof a.el&&a.el()){var l=this.contentEl().children[i]||null;this.contentEl().insertBefore(a.el(),l)}return a},vt.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},vt.prototype.initChildren=function(){var i=this,r=this.options_.children;if(r){var a=this.options_,e=void 0,n=vt.getComponent("Tech");(e=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t=void 0,n=void 0;return n="string"==typeof e?r[t=e]||i.options_[t]||{}:(t=e.name,e),{name:t,opts:n}}).filter(function(e){var t=vt.getComponent(e.opts.componentClass||gt(e.name));return t&&!n.isTech(t)}).forEach(function(e){var t=e.name,n=e.opts;if(void 0!==a[t]&&(n=a[t]),!1!==n){!0===n&&(n={}),n.playerOptions=i.options_.playerOptions;var r=i.addChild(t,n);r&&(i[t]=r)}})}},vt.prototype.buildCSSClass=function(){return""},vt.prototype.ready=function(e,t){var n=1<arguments.length&&void 0!==t&&t;if(e)return this.isReady_?void(n?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},vt.prototype.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},vt.prototype.$=function(e,t){return Me(e,t||this.contentEl())},vt.prototype.$$=function(e,t){return Oe(e,t||this.contentEl())},vt.prototype.hasClass=function(e){return le(this.el_,e)},vt.prototype.addClass=function(e){de(this.el_,e)},vt.prototype.removeClass=function(e){ce(this.el_,e)},vt.prototype.toggleClass=function(e,t){fe(this.el_,e,t)},vt.prototype.show=function(){this.removeClass("vjs-hidden")},vt.prototype.hide=function(){this.addClass("vjs-hidden")},vt.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")},vt.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")},vt.prototype.getAttribute=function(e){return ge(this.el_,e)},vt.prototype.setAttribute=function(e,t){me(this.el_,e,t)},vt.prototype.removeAttribute=function(e){ye(this.el_,e)},vt.prototype.width=function(e,t){return this.dimension("width",e,t)},vt.prototype.height=function(e,t){return this.dimension("height",e,t)},vt.prototype.dimensions=function(e,t){this.width(e,!0),this.height(t)},vt.prototype.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+gt(e)],10)},vt.prototype.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof h.getComputedStyle){var n=h.getComputedStyle(this.el_);t=n.getPropertyValue(e)||n[e]}if(0===(t=parseFloat(t))){var r="offset"+gt(e);t=this.el_[r]}return t},vt.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},vt.prototype.currentWidth=function(){return this.currentDimension("width")},vt.prototype.currentHeight=function(){return this.currentDimension("height")},vt.prototype.focus=function(){this.el_.focus()},vt.prototype.blur=function(){this.el_.blur()},vt.prototype.emitTapEvents=function(){var t=0,r=null,i=void 0;function e(){i=!1}this.on("touchstart",function(e){1===e.touches.length&&(r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=(new Date).getTime(),i=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)i=!1;else if(r){var t=e.touches[0].pageX-r.pageX,n=e.touches[0].pageY-r.pageY;10<Math.sqrt(t*t+n*n)&&(i=!1)}}),this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(r=null)===i&&(new Date).getTime()-t<200&&(e.preventDefault(),this.trigger("tap"))})},vt.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t=tt(this.player(),this.player().reportUserActivity),n=void 0;function e(e){t(),this.clearInterval(n)}this.on("touchstart",function(){t(),this.clearInterval(n),n=this.setInterval(t,250)}),this.on("touchmove",t),this.on("touchend",e),this.on("touchcancel",e)}},vt.prototype.setTimeout=function(e,t){var n,r,i=this;return e=tt(this,e),n=h.setTimeout(function(){i.off("dispose",r),e()},t),(r=function(){return i.clearTimeout(n)}).guid="vjs-timeout-"+n,this.on("dispose",r),n},vt.prototype.clearTimeout=function(e){function t(){}return h.clearTimeout(e),t.guid="vjs-timeout-"+e,this.off("dispose",t),e},vt.prototype.setInterval=function(e,t){var n=this;function r(){return n.clearInterval(i)}e=tt(this,e);var i=h.setInterval(e,t);return r.guid="vjs-interval-"+i,this.on("dispose",r),i},vt.prototype.clearInterval=function(e){function t(){}return h.clearInterval(e),t.guid="vjs-interval-"+e,this.off("dispose",t),e},vt.prototype.requestAnimationFrame=function(e){var t,n,r=this;return this.supportsRaf_?(e=tt(this,e),t=h.requestAnimationFrame(function(){r.off("dispose",n),e()}),(n=function(){return r.cancelAnimationFrame(t)}).guid="vjs-raf-"+t,this.on("dispose",n),t):this.setTimeout(e,1e3/60)},vt.prototype.cancelAnimationFrame=function(e){if(this.supportsRaf_){function t(){}return h.cancelAnimationFrame(e),t.guid="vjs-raf-"+e,this.off("dispose",t),e}return this.clearTimeout(e)},vt.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n=vt.getComponent("Tech"),r=n&&n.isTech(t),i=vt===t||vt.prototype.isPrototypeOf(t.prototype);if(r||!i){var a=void 0;throw a=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+a+".")}e=gt(e),vt.components_||(vt.components_={});var o=vt.getComponent("Player");if("Player"===e&&o&&o.players){var s=o.players,u=Object.keys(s);if(s&&0<u.length&&u.map(function(e){return s[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return vt.components_[e]=t},vt.getComponent=function(e){if(e)return e=gt(e),vt.components_&&vt.components_[e]?vt.components_[e]:void 0},vt);function vt(e,t,n){if(c(this,vt),!e&&this.play?this.player_=e=this:this.player_=e,this.options_=mt({},this.options_),t=this.options_=mt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+Pe()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&ft(this,{eventBusKey:this.el_?"el_":null}),pt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}function _t(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function bt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:_t.bind(null,"start",0,e),end:_t.bind(null,"end",1,e)}}function Tt(e,t){return Array.isArray(e)?bt(e):void 0===e||void 0===t?bt():bt([[e,t]])}function Et(e,t){var n=0,r=void 0,i=void 0;if(!t)return 0;e&&e.length||(e=Tt(0,0));for(var a=0;a<e.length;a++)r=e.start(a),t<(i=e.end(a))&&(i=t),n+=i-r;return n/t}yt.prototype.supportsRaf_="function"==typeof h.requestAnimationFrame&&"function"==typeof h.cancelAnimationFrame,yt.registerComponent("Component",yt);for(var St={},wt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],At=wt[0],Ct=void 0,Rt=0;Rt<wt.length;Rt++)if(wt[Rt][1]in m){Ct=wt[Rt];break}if(Ct)for(var It=0;It<Ct.length;It++)St[At[It]]=Ct[It];function Mt(e){if(e instanceof Mt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:K(e)&&("number"==typeof e.code&&(this.code=e.code),V(this,e)),this.message||(this.message=Mt.defaultMessages[this.code]||"")}Mt.prototype.code=0,Mt.prototype.message="",Mt.prototype.status=null,Mt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Mt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ot=0;Ot<Mt.errorTypes.length;Ot++)Mt[Mt.errorTypes[Ot]]=Ot,Mt.prototype[Mt.errorTypes[Ot]]=Ot;var Dt=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]};function kt(e){return null!=e&&"function"==typeof e.then}function Pt(e){kt(e)&&e.then(null,function(e){})}function Lt(r){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t,n){return r[t]&&(e[t]=r[t]),e},{cues:r.cues&&Array.prototype.map.call(r.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})}var xt,Nt=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Lt(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Lt))},Ft=function(e,n){return e.forEach(function(e){var t=n.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),n.textTracks()},Bt="vjs-modal-dialog",Ut=(n(jt,xt=yt),jt.prototype.createEl=function(){return xt.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},jt.prototype.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,xt.prototype.dispose.call(this)},jt.prototype.buildCSSClass=function(){return Bt+" vjs-hidden "+xt.prototype.buildCSSClass.call(this)},jt.prototype.handleKeyPress=function(e){27===e.which&&this.closeable()&&this.close()},jt.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")},jt.prototype.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},jt.prototype.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",tt(this,this.handleKeyPress)),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},jt.prototype.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},jt.prototype.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",tt(this,this.handleKeyPress)),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},jt.prototype.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},jt.prototype.fill=function(){this.fillWith(this.content())},jt.prototype.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Re(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},jt.prototype.empty=function(){this.trigger("beforemodalempty"),we(this.contentEl()),this.trigger("modalempty")},jt.prototype.content=function(e){return void 0!==e&&(this.content_=e),this.content_},jt.prototype.conditionalFocus_=function(){var e=m.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,!t.contains(e)&&t!==e||(this.previouslyActiveEl_=e,this.focus(),this.on(m,"keydown",this.handleKeyDown))},jt.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(m,"keydown",this.handleKeyDown)},jt.prototype.handleKeyDown=function(e){if(9===e.which){for(var t=this.focusableEls_(),n=this.el_.querySelector(":focus"),r=void 0,i=0;i<t.length;i++)if(n===t[i]){r=i;break}m.activeElement===this.el_&&(r=0),e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault())}},jt.prototype.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof h.HTMLAnchorElement||e instanceof h.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof h.HTMLInputElement||e instanceof h.HTMLSelectElement||e instanceof h.HTMLTextAreaElement||e instanceof h.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof h.HTMLIFrameElement||e instanceof h.HTMLObjectElement||e instanceof h.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},jt);function jt(e,t){c(this,jt);var n=f(this,xt.call(this,e,t));return n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=oe("div",{className:Bt+"-content"},{role:"document"}),n.descEl_=oe("p",{className:Bt+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),se(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Ut.prototype.options_={pauseOnOpen:!0,temporary:!0},yt.registerComponent("ModalDialog",Ut);var Gt,Ht=(n(qt,Gt=rt),qt.prototype.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack"}))},qt.prototype.removeTrack=function(e){for(var t=void 0,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack"})},qt.prototype.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},qt);function qt(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;c(this,qt);var n=f(this,Gt.call(this));if(!t&&(t=n,P))for(var r in t=m.createElement("custom"),qt.prototype)"constructor"!==r&&(t[r]=qt.prototype[r]);t.tracks_=[],Object.defineProperty(t,"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)t.addTrack(e[i]);return f(n,t)}for(var Vt in Ht.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Ht.prototype.allowedEvents_)Ht.prototype["on"+Vt]=null;function Kt(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)}var Yt,Wt=(n(zt,Yt=Ht),zt.prototype.addTrack=function(e){var t=this;e.enabled&&Kt(this,e),Yt.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){t.changing_||(t.changing_=!0,Kt(t,e),t.changing_=!1,t.trigger("change"))})},zt);function zt(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];c(this,zt);for(var n=void 0,r=t.length-1;0<=r;r--)if(t[r].enabled){Kt(t,t[r]);break}if(P){for(var i in n=m.createElement("custom"),Ht.prototype)"constructor"!==i&&(n[i]=Ht.prototype[i]);for(var a in zt.prototype)"constructor"!==a&&(n[a]=zt.prototype[a])}return(n=e=f(this,Yt.call(this,t,n))).changing_=!1,f(e,n)}function Xt(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)}var Qt,$t=(n(Jt,Qt=Ht),Jt.prototype.addTrack=function(e){var t=this;e.selected&&Xt(this,e),Qt.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){t.changing_||(t.changing_=!0,Xt(t,e),t.changing_=!1,t.trigger("change"))})},Jt);function Jt(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];c(this,Jt);for(var n=void 0,r=t.length-1;0<=r;r--)if(t[r].selected){Xt(t,t[r]);break}if(P){for(var i in n=m.createElement("custom"),Ht.prototype)"constructor"!==i&&(n[i]=Ht.prototype[i]);for(var a in Jt.prototype)"constructor"!==a&&(n[a]=Jt.prototype[a])}return(n=e=f(this,Qt.call(this,t,n))).changing_=!1,Object.defineProperty(n,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),f(e,n)}var Zt,en=(n(tn,Zt=Ht),tn.prototype.addTrack=function(e){Zt.prototype.addTrack.call(this,e),e.addEventListener("modechange",tt(this,function(){this.trigger("change")})),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",tt(this,function(){this.trigger("selectedlanguagechange")}))},tn);function tn(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];c(this,tn);var n=void 0;if(P){for(var r in n=m.createElement("custom"),Ht.prototype)"constructor"!==r&&(n[r]=Ht.prototype[r]);for(var i in tn.prototype)"constructor"!==i&&(n[i]=tn.prototype[i])}return e=f(this,Zt.call(this,t,n)),f(n=e,n)}var nn=(rn.prototype.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},rn.prototype.getTrackElementByTrack_=function(e){for(var t=void 0,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},rn.prototype.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_.splice(t,1);break}},rn);function rn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];c(this,rn);var t=this;if(P)for(var n in t=m.createElement("custom"),rn.prototype)"constructor"!==n&&(t[n]=rn.prototype[n]);t.trackElements_=[],Object.defineProperty(t,"length",{get:function(){return this.trackElements_.length}});for(var r=0,i=e.length;r<i;r++)t.addTrackElement_(e[r]);if(P)return t}var an=(on.prototype.setCues_=function(e){var t=this.length||0,n=0,r=e.length;function i(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})}if(this.cues_=e,this.length_=e.length,t<r)for(n=t;n<r;n++)i.call(this,n)},on.prototype.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},on);function on(e){c(this,on);var t=this;if(P)for(var n in t=m.createElement("custom"),on.prototype)"constructor"!==n&&(t[n]=on.prototype[n]);if(on.prototype.setCues_.call(t,e),Object.defineProperty(t,"length",{get:function(){return this.length_}}),P)return t}var sn,un={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},ln={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},dn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},cn={disabled:"disabled",hidden:"hidden",showing:"showing"},fn=(n(hn,sn=rt),hn);function hn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,hn);var t=f(this,sn.call(this)),n=t;if(P)for(var r in n=m.createElement("custom"),hn.prototype)"constructor"!==r&&(n[r]=hn.prototype[r]);function i(e){Object.defineProperty(n,e,{get:function(){return a[e]},set:function(){}})}var a={id:e.id||"vjs_track_"+Pe(),kind:e.kind||"",label:e.label||"",language:e.language||""};for(var o in a)i(o);return f(t,n)}function pn(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=m.createElement("a");n.href=e;var r=""===n.host&&"file:"!==n.protocol,i=void 0;r&&((i=m.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),m.body.appendChild(i));for(var a={},o=0;o<t.length;o++)a[t[o]]=n[t[o]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=h.location.protocol),r&&m.body.removeChild(i),a}function gn(e){if(!e.match(/^https?:\/\//)){var t=m.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e}function mn(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(e);if(t)return t.pop().toLowerCase()}return""}function yn(e){var t=h.location,n=pn(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host}var vn=(Object.freeze||Object)({parseUrl:pn,getAbsoluteURL:gn,getFileExtension:mn,isCrossOrigin:yn}),_n=function(e){var t=bn.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},bn=Object.prototype.toString;function Tn(e){try{var t=wn.call(e);return An.test(t)}catch(e){return!1}}function En(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Rn)return function(e){try{return!Tn(e)&&(wn.call(e),!0)}catch(e){return!1}}(e);if(Tn(e))return!1;var t=Cn.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}var Sn=t(function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),wn=Function.prototype.toString,An=/^\s*class\b/,Cn=Object.prototype.toString,Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,In=Object.prototype.toString,Mn=Object.prototype.hasOwnProperty,On=function(e,t,n){if(!En(t))throw new TypeError("iterator must be a function");var r;3<=arguments.length&&(r=n),"[object Array]"===In.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)Mn.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,r):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,r):function(e,t,n){for(var r in e)Mn.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,r)},Dn=function(e){if(!e)return{};var i={};return On(Sn(e).split("\n"),function(e){var t=e.indexOf(":"),n=Sn(e.slice(0,t)).toLowerCase(),r=Sn(e.slice(t+1));void 0===i[n]?i[n]=r:!function(e){return"[object Array]"===Object.prototype.toString.call(e)}(i[n])?i[n]=[i[n],r]:i[n].push(r)}),i},kn=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)Pn.call(n,r)&&(e[r]=n[r])}return e},Pn=Object.prototype.hasOwnProperty;var Ln=Nn;function xn(e,t,n){var r=e;return _n(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=kn(t,{uri:e}),r.callback=n,r}function Nn(e,t,n){return Fn(t=xn(e,t,n))}function Fn(r){if(void 0===r.callback)throw new Error("callback argument missing");var i=!1,a=function(e,t,n){i||(i=!0,r.callback(e,t,n))};function t(e){return clearTimeout(s),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,g)}function e(){if(!o){var e;clearTimeout(s),e=r.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var t=g,n=null;return 0!==e?(t={body:function(){var e=void 0;if(e=u.response?u.response:u.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}(u),p)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:e,method:d,headers:{},url:l,rawRequest:u},u.getAllResponseHeaders&&(t.headers=Dn(u.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),a(n,t,t.body)}}var n,o,s,u=r.xhr||null,l=(u=u||(r.cors||r.useXDR?new Nn.XDomainRequest:new Nn.XMLHttpRequest)).url=r.uri||r.url,d=u.method=r.method||"GET",c=r.body||r.data,f=u.headers=r.headers||{},h=!!r.sync,p=!1,g={body:void 0,headers:{},statusCode:0,method:d,url:l,rawRequest:u};if("json"in r&&!1!==r.json&&(p=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),c=JSON.stringify(!0===r.json?c:r.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(e,0)},u.onload=e,u.onerror=t,u.onprogress=function(){},u.onabort=function(){o=!0},u.ontimeout=t,u.open(d,l,!h,r.username,r.password),h||(u.withCredentials=!!r.withCredentials),!h&&0<r.timeout&&(s=setTimeout(function(){if(!o){o=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},r.timeout)),u.setRequestHeader)for(n in f)f.hasOwnProperty(n)&&u.setRequestHeader(n,f[n]);else if(r.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(r.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in r&&(u.responseType=r.responseType),"beforeSend"in r&&"function"==typeof r.beforeSend&&r.beforeSend(u),u.send(c||null),u}Nn.XMLHttpRequest=h.XMLHttpRequest||function(){},Nn.XDomainRequest="withCredentials"in new Nn.XMLHttpRequest?Nn.XMLHttpRequest:h.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],function(r){Nn["delete"===r?"del":r]=function(e,t,n){return(t=xn(e,t,n)).method=r.toUpperCase(),Fn(t)}});function Bn(e,t){var n=new h.WebVTT.Parser(h,h.vttjs,h.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<r.length&&(h.console&&h.console.groupCollapsed&&h.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(e){return X.error(e)}),h.console&&h.console.groupEnd&&h.console.groupEnd()),n.flush()}var Un,jn=(n(Gn,Un=fn),Gn.prototype.addCue=function(e){var t=e;if(h.vttjs&&!(e instanceof h.vttjs.VTTCue)){for(var n in t=new h.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},Gn.prototype.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},Gn);function Gn(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(c(this,Gn),!t.tech)throw new Error("A tech was not provided.");var n=mt(t,{kind:dn[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=cn[n.mode]||"disabled",i=n.default;"metadata"!==n.kind&&"chapters"!==n.kind||(r="hidden");var a=e=f(this,Un.call(this,n));if(a.tech_=n.tech,P)for(var o in Gn.prototype)"constructor"!==o&&(a[o]=Gn.prototype[o]);a.cues_=[],a.activeCues_=[];var s=new an(a.cues_),u=new an(a.activeCues_),l=!1,d=tt(a,function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)});return"disabled"!==r&&a.tech_.ready(function(){a.tech_.on("timeupdate",d)},!0),Object.defineProperty(a,"default",{get:function(){return i},set:function(){}}),Object.defineProperty(a,"mode",{get:function(){return r},set:function(e){var t=this;cn[e]&&("disabled"!==(r=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",d)},!0):this.tech_.off("timeupdate",d),this.trigger("modechange"))}}),Object.defineProperty(a,"cues",{get:function(){return this.loaded_?s:null},set:function(){}}),Object.defineProperty(a,"activeCues",{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,u.setCues_(this.activeCues_),u},set:function(){}}),n.src?(a.src=n.src,function(e,i){var t={uri:e},n=yn(e);n&&(t.cors=n),Ln(t,tt(this,function(e,t,n){if(e)return X.error(e,t);if(i.loaded_=!0,"function"!=typeof h.WebVTT){if(i.tech_){function r(){return Bn(n,i)}i.tech_.on("vttjsloaded",r),i.tech_.on("vttjserror",function(){X.error("vttjs failed to load, stopping trying to process "+i.src),i.tech_.off("vttjsloaded",r)})}}else Bn(n,i)}))}(n.src,a)):a.loaded_=!0,f(e,a)}jn.prototype.allowedEvents_={cuechange:"cuechange"};var Hn,qn=(n(Vn,Hn=fn),Vn);function Vn(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,Vn);var n=mt(t,{kind:ln[t.kind]||""}),r=e=f(this,Hn.call(this,n)),i=!1;if(P)for(var a in Vn.prototype)"constructor"!==a&&(r[a]=Vn.prototype[a]);return Object.defineProperty(r,"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(r.enabled=n.enabled),r.loaded_=!0,f(e,r)}var Kn,Yn=(n(Wn,Kn=fn),Wn);function Wn(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,Wn);var n=mt(t,{kind:un[t.kind]||""}),r=e=f(this,Kn.call(this,n)),i=!1;if(P)for(var a in Wn.prototype)"constructor"!==a&&(r[a]=Wn.prototype[a]);return Object.defineProperty(r,"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(r.selected=n.selected),f(e,r)}var zn,Xn=(n(Qn,zn=rt),Qn);function Qn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,Qn);var t=f(this,zn.call(this)),n=void 0,r=t;if(P)for(var i in r=m.createElement("custom"),Qn.prototype)"constructor"!==i&&(r[i]=Qn.prototype[i]);var a=new jn(e);return r.kind=a.kind,r.src=a.src,r.srclang=a.language,r.label=a.label,r.default=a.default,Object.defineProperty(r,"readyState",{get:function(){return n}}),Object.defineProperty(r,"track",{get:function(){return a}}),n=0,a.addEventListener("loadeddata",function(){n=2,r.trigger({type:"load",target:r})}),P?f(t,r):t}Xn.prototype.allowedEvents_={load:"load"},Xn.NONE=0,Xn.LOADING=1,Xn.LOADED=2,Xn.ERROR=3;var $n={audio:{ListClass:Wt,TrackClass:qn,capitalName:"Audio"},video:{ListClass:$t,TrackClass:Yn,capitalName:"Video"},text:{ListClass:en,TrackClass:jn,capitalName:"Text"}};Object.keys($n).forEach(function(e){$n[e].getterName=e+"Tracks",$n[e].privateName=e+"Tracks_"});var Jn={remoteText:{ListClass:en,TrackClass:jn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:nn,TrackClass:Xn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Zn=mt($n,Jn);Jn.names=Object.keys(Jn),$n.names=Object.keys($n),Zn.names=[].concat(Jn.names).concat($n.names);var er=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return tr.prototype=e,new tr};function tr(){}function nr(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function rr(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function ir(){this.values=er(null)}function ar(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}function or(t,e,a){var n,r,o,i=t;function s(){var e=rr(t);if(null===e)throw new nr(nr.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function u(){t=t.replace(/^\s+/,"")}if(u(),e.startTime=s(),u(),"--\x3e"!==t.substr(0,3))throw new nr(nr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),u(),e.endTime=s(),u(),n=t,r=e,o=new ir,ar(n,function(e,t){switch(e){case"region":for(var n=a.length-1;0<=n;n--)if(a[n].id===t){o.set(e,a[n].region);break}break;case"vertical":o.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),i=r[0];o.integer(e,i),o.percent(e,i)&&o.set("snapToLines",!1),o.alt(e,i,["auto"]),2===r.length&&o.alt("lineAlign",r[1],["start","middle","end"]);break;case"position":r=t.split(","),o.percent(e,r[0]),2===r.length&&o.alt("positionAlign",r[1],["start","middle","end"]);break;case"size":o.percent(e,t);break;case"align":o.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),r.region=o.get("region",null),r.vertical=o.get("vertical",""),r.line=o.get("line","auto"),r.lineAlign=o.get("lineAlign","start"),r.snapToLines=o.get("snapToLines",!0),r.size=o.get("size",100),r.align=o.get("align","middle"),r.position=o.get("position",{start:0,left:0,middle:50,end:100,right:100},r.align),r.positionAlign=o.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},r.align)}((nr.prototype=er(Error.prototype)).constructor=nr).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ir.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var sr={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},ur={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},lr={v:"title",lang:"lang"},dr={rt:"ruby"};function cr(a,n){function e(){if(!n)return null;var e,t=n.match(/^([^<]*)(<[^>]*>?)?/);return e=t[1]?t[1]:t[2],n=n.substr(e.length),e}function t(e){return sr[e]}function r(e){for(;p=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(p[0],t);return e}function i(e,t){var n=ur[e];if(!n)return null;var r=a.document.createElement(n);r.localName=n;var i=lr[e];return i&&t&&(r[i]=t.trim()),r}for(var o,s,u,l=a.document.createElement("div"),d=l,c=[];null!==(o=e());)if("<"!==o[0])d.appendChild(a.document.createTextNode(r(o)));else{if("/"===o[1]){c.length&&c[c.length-1]===o.substr(2).replace(">","")&&(c.pop(),d=d.parentNode);continue}var f,h=rr(o.substr(1,o.length-2));if(h){f=a.document.createProcessingInstruction("timestamp",h),d.appendChild(f);continue}var p=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p)continue;if(!(f=i(p[1],p[3])))continue;if(s=d,dr[(u=f).localName]&&dr[u.localName]!==s.localName)continue;p[2]&&(f.className=p[2].substr(1).replace("."," ")),c.push(p[1]),d.appendChild(f),d=f}return l}var fr=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function hr(e){for(var t=0;t<fr.length;t++){var n=fr[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function pr(){}function gr(e,t,n){var r=/MSIE\s8\.0/.test(navigator.userAgent),i="rgba(255, 255, 255, 1)",a="rgba(0, 0, 0, 0.8)";r&&(i="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),pr.call(this),this.cue=t,this.cueDiv=cr(e,t.text);var o={color:i,backgroundColor:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};r||(o.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",o.unicodeBidi="plaintext"),this.applyStyles(o,this.cueDiv),this.div=e.document.createElement("div"),o={textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},r||(o.direction=function(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var r=n.match(/^.*(\n|\r)/);return r?r[e.length=0]:n}return"ruby"===t.tagName?a(e):t.childNodes?(i(e,t),a(e)):void 0}for(i(t,e);n=a(t);)for(var r=0;r<n.length;r++)if(hr(n.charCodeAt(r)))return"rtl";return"ltr"}(this.cueDiv),o.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(o),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function mr(e){var t,n,r,i,a=/MSIE\s8\.0/.test(navigator.userAgent);if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var o=(o=e.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();e=e.div.getBoundingClientRect(),t=o?Math.max(o[0]&&o[0].height||0,e.height/o.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight,a&&!this.lineHeight&&(this.lineHeight=13)}function yr(e,t,s,u){var n=new mr(t),r=t.cue,i=function(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(r),a=[];if(r.snapToLines){var o;switch(r.vertical){case"":a=["+y","-y"],o="height";break;case"rl":a=["+x","-x"],o="width";break;case"lr":a=["-x","+x"],o="width"}var l=n.lineHeight,d=l*Math.round(i),c=s[o]+l,f=a[0];Math.abs(d)>c&&(d=d<0?-1:1,d*=Math.ceil(c/l)*l),i<0&&(d+=""===r.vertical?s.height:s.width,a=a.reverse()),n.move(f,d)}else{var h=n.lineHeight/s.height*100;switch(r.lineAlign){case"middle":i-=h/2;break;case"end":i-=h}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(i,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(i,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(i,"%")})}a=["+y","-x","+x","-y"],n=new mr(t)}var p=function(e,t){for(var n,r=new mr(e),i=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(s,t[a])||e.within(s)&&e.overlapsAny(u);)e.move(t[a]);if(e.within(s))return e;var o=e.intersectPercentage(s);o<i&&(n=new mr(e),i=o),e=new mr(r)}return n||r}(n,a);t.move(p.toCSSCompatValues(s))}function vr(){}pr.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},pr.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(gr.prototype=er(pr.prototype)).constructor=gr,mr.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},mr.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},mr.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},mr.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},mr.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},mr.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},mr.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},mr.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},vr.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},vr.convertCueToDOMTree=function(e,t){return e&&t?cr(e,t):null};vr.processCues=function(r,i,e){if(!r||!i||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=r.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin="1.5%",e.appendChild(a),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(i)){var o=[],s=mr.getSimpleBoxPosition(a),u={font:Math.round(.05*s.height*100)/100+"px sans-serif"};!function(){for(var e,t,n=0;n<i.length;n++)t=i[n],e=new gr(r,t,u),a.appendChild(e.div),yr(0,e,s,o),t.displayState=e.div,o.push(mr.getSimpleBoxPosition(e))}()}else for(var t=0;t<i.length;t++)a.appendChild(i[t].displayState)},(vr.Parser=function(e,t,n){n||(n=t,t={}),t=t||{},this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof nr))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var r=this;function t(){for(var e=r.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}function n(e){e.match(/X-TIMESTAMP-MAP/)?ar(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":!function(e){var n=new ir;ar(e,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",rr(t))}},/[^\d]:/,/,/),r.ontimestampmap&&r.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(t)}},/=/):ar(e,function(e,t){switch(e){case"Region":!function(e){var i=new ir;if(ar(e,function(e,t){switch(e){case"id":i.set(e,t);break;case"width":i.percent(e,t);break;case"lines":i.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var r=new ir;if(r.percent("x",n[0]),r.percent("y",n[1]),!r.has("x")||!r.has("y"))break;i.set(e+"X",r.get("x")),i.set(e+"Y",r.get("y"));break;case"scroll":i.alt(e,t,["up"])}},/=/,/\s/),i.has("id")){var t=new(r.vttjs.VTTRegion||r.window.VTTRegion);t.width=i.get("width",100),t.lines=i.get("lines",3),t.regionAnchorX=i.get("regionanchorX",0),t.regionAnchorY=i.get("regionanchorY",100),t.viewportAnchorX=i.get("viewportanchorX",0),t.viewportAnchorY=i.get("viewportanchorY",100),t.scroll=i.get("scroll",""),r.onregion&&r.onregion(t),r.regionList.push({id:i.get("id"),region:t})}}(t)}},/:/)}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var a=(i=t()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new nr(nr.Errors.BadSignature);r.state="HEADER"}for(var o=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:i=t(),r.state){case"HEADER":/:/.test(i)?n(i):i||(r.state="ID");continue;case"NOTE":i||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){r.state="NOTE";break}if(!i)continue;if(r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,""),r.state="CUE",-1===i.indexOf("--\x3e")){r.cue.id=i;continue}case"CUE":try{or(i,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=i;continue;case"BADCUE":i||(r.state="ID");continue}}}catch(e){r.reportOrThrowError(e),"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new nr(nr.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var _r=vr,br={"":!0,lr:!0,rl:!0},Tr={start:!0,middle:!0,end:!0,left:!0,right:!0};function Er(e){return"string"==typeof e&&(!!Tr[e.toLowerCase()]&&e.toLowerCase())}function Sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function wr(e,t,n){var r=this,i=/MSIE\s8\.0/.test(navigator.userAgent),a={};i?r=document.createElement("custom"):a.enumerable=!0,r.hasBeenReset=!1;var o="",s=!1,u=e,l=t,d=n,c=null,f="",h=!0,p="auto",g="start",m=50,y="middle",v=50,_="middle";if(Object.defineProperty(r,"id",Sr({},a,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(r,"pauseOnExit",Sr({},a,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(r,"startTime",Sr({},a,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",Sr({},a,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",Sr({},a,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",Sr({},a,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",Sr({},a,{get:function(){return f},set:function(e){var t=function(e){return"string"==typeof e&&(!!br[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",Sr({},a,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",Sr({},a,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",Sr({},a,{get:function(){return g},set:function(e){var t=Er(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",Sr({},a,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",Sr({},a,{get:function(){return y},set:function(e){var t=Er(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",Sr({},a,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",Sr({},a,{get:function(){return _},set:function(e){var t=Er(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),r.displayState=void 0,i)return r}wr.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ar=wr,Cr={"":!0,up:!0};function Rr(e){return"number"==typeof e&&0<=e&&e<=100}function Ir(){var t=100,n=3,r=0,i=100,a=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Rr(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return n},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!Rr(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!Rr(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!Rr(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(e){if(!Rr(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function(){return s},set:function(e){var t=function(e){return"string"==typeof e&&(!!Cr[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");s=t}}})}var Mr=t(function(e){var t=e.exports={WebVTT:_r,VTTCue:Ar,VTTRegion:Ir};h.vttjs=t,h.WebVTT=t.WebVTT;var n=t.VTTCue,r=t.VTTRegion,i=h.VTTCue,a=h.VTTRegion;t.shim=function(){h.VTTCue=n,h.VTTRegion=r},t.restore=function(){h.VTTCue=i,h.VTTRegion=a},h.VTTCue||t.shim()});var Or,Dr=(n(kr,Or=yt),kr.prototype.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},kr.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},kr.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},kr.prototype.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(tt(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},kr.prototype.onDurationChange=function(e){this.duration_=this.duration()},kr.prototype.buffered=function(){return Tt(0,0)},kr.prototype.bufferedPercent=function(){return Et(this.buffered(),this.duration_)},kr.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},kr.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},kr.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},kr.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},kr.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},kr.prototype.dispose=function(){this.clearTracks($n.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),Or.prototype.dispose.call(this)},kr.prototype.clearTracks=function(e){var i=this;(e=[].concat(e)).forEach(function(e){for(var t=i[e+"Tracks"]()||[],n=t.length;n--;){var r=t[n];"text"===e&&i.removeRemoteTextTrack(r),t.removeTrack(r)}})},kr.prototype.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},kr.prototype.reset=function(){},kr.prototype.error=function(e){return void 0!==e&&(this.error_=new Mt(e),this.trigger("error")),this.error_},kr.prototype.played=function(){return this.hasStarted_?Tt(0,0):Tt()},kr.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},kr.prototype.initTrackListeners=function(){var i=this;$n.names.forEach(function(e){function t(){i.trigger(e+"trackchange")}var n=$n[e],r=i[n.getterName]();r.addEventListener("removetrack",t),r.addEventListener("addtrack",t),i.on("dispose",function(){r.removeEventListener("removetrack",t),r.removeEventListener("addtrack",t)})})},kr.prototype.addWebVttScript_=function(){var e=this;if(!h.WebVTT)if(m.body.contains(this.el())){if(!this.options_["vtt.js"]&&Y(Mr)&&0<Object.keys(Mr).length)return void this.trigger("vttjsloaded");var t=m.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),h.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},kr.prototype.emulateTextTracks=function(){function t(e){return r.addTrack(e.track)}function n(e){return r.removeTrack(e.track)}var e=this,r=this.textTracks(),i=this.remoteTextTracks();function a(){return e.trigger("texttrackchange")}function o(){a();for(var e=0;e<r.length;e++){var t=r[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}}i.on("addtrack",t),i.on("removetrack",n),this.addWebVttScript_(),o(),r.addEventListener("change",o),r.addEventListener("addtrack",o),r.addEventListener("removetrack",o),this.on("dispose",function(){i.off("addtrack",t),i.off("removetrack",n),r.removeEventListener("change",o),r.removeEventListener("addtrack",o),r.removeEventListener("removetrack",o);for(var e=0;e<r.length;e++)r[e].removeEventListener("cuechange",a)})},kr.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){var a=4<arguments.length&&void 0!==i?i:{},o=e.textTracks();a.kind=t,n&&(a.label=n),r&&(a.language=r),a.tech=e;var s=new Zn.text.TrackClass(a);return o.addTrack(s),s}(this,e,t,n)},kr.prototype.createRemoteTextTrack=function(e){var t=mt(e,{tech:this});return new Jn.remoteTextEl.TrackClass(t)},kr.prototype.addRemoteTextTrack=function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:{},i=t,a=this.createRemoteTextTrack(r);return!0!==i&&!1!==i&&(X.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),i=!0),this.remoteTextTrackEls().addTrackElement_(a),this.remoteTextTracks().addTrack(a.track),!0!==i&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(a.track)}),a},kr.prototype.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},kr.prototype.getVideoPlaybackQuality=function(){return{}},kr.prototype.setPoster=function(){},kr.prototype.playsinline=function(){},kr.prototype.setPlaysinline=function(){},kr.prototype.canPlayType=function(){return""},kr.canPlayType=function(){return""},kr.canPlaySource=function(e,t){return kr.canPlayType(e.type)},kr.isTech=function(e){return e.prototype instanceof kr||e instanceof kr||e===kr},kr.registerTech=function(e,t){if(kr.techs_||(kr.techs_={}),!kr.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!kr.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!kr.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=gt(e),kr.techs_[e]=t,"Tech"!==e&&kr.defaultTechOrder_.push(e),t},kr.getTech=function(e){if(e)return e=gt(e),kr.techs_&&kr.techs_[e]?kr.techs_[e]:h&&h.videojs&&h.videojs[e]?(X.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),h.videojs[e]):void 0},kr);function kr(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};c(this,kr),n.reportTouchActivity=!1;var r=f(this,Or.call(this,null,n,e));return r.hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),Zn.names.forEach(function(e){var t=Zn[e];n&&n[t.getterName]&&(r[t.privateName]=n[t.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new Zn.text.ListClass,r.initTrackListeners(),n.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}Zn.names.forEach(function(e){var t=Zn[e];Dr.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Dr.prototype.featuresVolumeControl=!0,Dr.prototype.featuresMuteControl=!0,Dr.prototype.featuresFullscreenResize=!1,Dr.prototype.featuresPlaybackRate=!1,Dr.prototype.featuresProgressEvents=!1,Dr.prototype.featuresSourceset=!1,Dr.prototype.featuresTimeupdateEvents=!1,Dr.prototype.featuresNativeTextTracks=!1,Dr.withSourceHandlers=function(i){i.registerSourceHandler=function(e,t){var n=i.sourceHandlers;n=n||(i.sourceHandlers=[]),void 0===t&&(t=n.length),n.splice(t,0,e)},i.canPlayType=function(e){for(var t=i.sourceHandlers||[],n=void 0,r=0;r<t.length;r++)if(n=t[r].canPlayType(e))return n;return""},i.selectSourceHandler=function(e,t){for(var n=i.sourceHandlers||[],r=0;r<n.length;r++)if(n[r].canHandleSource(e,t))return n[r];return null},i.canPlaySource=function(e,t){var n=i.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""};["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},i.prototype),i.prototype.setSource=function(e){var t=i.selectSourceHandler(e,this.options_);t||(i.nativeSourceHandler?t=i.nativeSourceHandler:X.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==i.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},i.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},yt.registerComponent("Tech",Dr),Dr.registerTech("Tech",Dr),Dr.defaultTechOrder_=[];var Pr={},Lr={},xr={};function Nr(e,t,n){e.setTimeout(function(){return function n(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];var i=arguments[2];var a=arguments[3];var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[];var s=5<arguments.length&&void 0!==arguments[5]&&arguments[5];var t=e[0],u=e.slice(1);if("string"==typeof t)n(r,Pr[t],i,a,o,s);else if(t){var l=Hr(a,t);if(!l.setSource)return o.push(l),n(r,u,i,a,o,s);l.setSource(V({},r),function(e,t){if(e)return n(r,u,i,a,o,s);o.push(l),n(t,r.type===t.type?u:Pr[t.type],i,a,o,s)})}else u.length?n(r,u,i,a,o,s):s?i(r,o):n(r,Pr["*"],i,a,o,!0)}(t,Pr[t.type],n,e)},1)}function Fr(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null,a="call"+gt(n),o=e.reduce(Gr(a),i),s=o===xr,u=s?null:t[n](o);return function(e,t,n,r){for(var i=e.length-1;0<=i;i--){var a=e[i];a[t]&&a[t](r,n)}}(e,n,u,s),u}var Br={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Ur={setCurrentTime:1},jr={play:1,pause:1};function Gr(n){return function(e,t){return e===xr?xr:t[n]?t[n](e):e}}function Hr(e,t){var n=Lr[e.id()],r=null;if(null==n)return r=t(e),Lr[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],o=a[0],s=a[1];o===t&&(r=s)}return null===r&&(r=t(e),n.push([t,r])),r}function qr(e){var t=mn(0<arguments.length&&void 0!==e?e:"");return Vr[t.toLowerCase()]||""}var Vr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"};function Kr(e){var t=qr(e.src);return!e.type&&t&&(e.type=t),e}var Yr,Wr=(n(zr,Yr=yt),zr);function zr(e,t,n){c(this,zr);var r=mt({createEl:!1},t),i=f(this,Yr.call(this,e,r,n));if(t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,o=t.playerOptions.techOrder;a<o.length;a++){var s=gt(o[a]),u=Dr.getTech(s);if(s||(u=yt.getComponent(s)),u&&u.isSupported()){e.loadTech_(s);break}}return i}yt.registerComponent("MediaLoader",Wr);var Xr,Qr=(n($r,Xr=yt),$r.prototype.createEl=function(e,t,n){var r=0<arguments.length&&void 0!==e?e:"div",i=1<arguments.length&&void 0!==t?t:{},a=2<arguments.length&&void 0!==n?n:{};i=V({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},i),"button"===r&&X.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead."),a=V({role:"button"},a),this.tabIndex_=i.tabIndex;var o=Xr.prototype.createEl.call(this,r,i,a);return this.createControlTextEl(o),o},$r.prototype.dispose=function(){this.controlTextEl_=null,Xr.prototype.dispose.call(this)},$r.prototype.createControlTextEl=function(e){return this.controlTextEl_=oe("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},$r.prototype.controlText=function(e,t){var n=1<arguments.length&&void 0!==t?t:this.el();if(void 0===e)return this.controlText_||"Need Text";var r=this.localize(e);this.controlText_=e,se(this.controlTextEl_,r),this.nonIconControl||n.setAttribute("title",r)},$r.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+Xr.prototype.buildCSSClass.call(this)},$r.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},$r.prototype.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},$r.prototype.handleClick=function(e){},$r.prototype.handleFocus=function(e){Ve(m,"keydown",tt(this,this.handleKeyPress))},$r.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):Xr.prototype.handleKeyPress&&Xr.prototype.handleKeyPress.call(this,e)},$r.prototype.handleBlur=function(e){Ke(m,"keydown",tt(this,this.handleKeyPress))},$r);function $r(e,t){c(this,$r);var n=f(this,Xr.call(this,e,t));return n.emitTapEvents(),n.enable(),n}yt.registerComponent("ClickableComponent",Qr);var Jr,Zr=(n(ei,Jr=Qr),ei.prototype.dispose=function(){this.player().off("posterchange",this.update),Jr.prototype.dispose.call(this)},ei.prototype.createEl=function(){var e=oe("div",{className:"vjs-poster",tabIndex:-1});return B||(this.fallbackImg_=oe("img"),e.appendChild(this.fallbackImg_)),e},ei.prototype.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},ei.prototype.setSrc=function(e){if(this.fallbackImg_)this.fallbackImg_.src=e;else{var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t}},ei.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?Pt(this.player_.play()):this.player_.pause())},ei);function ei(e,t){c(this,ei);var n=f(this,Jr.call(this,e,t));return n.update(),e.on("posterchange",tt(n,n.update)),n}yt.registerComponent("PosterImage",Zr);var ti="#222",ni={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function ri(e,t){var n=void 0;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function ii(e,t,n){try{e.style[t]=n}catch(e){return}}var ai,oi=(n(si,ai=yt),si.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},t=this.player_.textTracks(),n=this.player_.cache_.selectedLanguage,r=void 0,i=void 0,a=void 0,o=0;o<t.length;o++){var s=t[o];n&&n.enabled&&n.language===s.language?a=s.kind===n.kind?s:a||s:n&&!n.enabled?i=r=a=null:s.default&&("descriptions"!==s.kind||r?s.kind in e&&!i&&(i=s):r=s)}a?a.mode="showing":i?i.mode="showing":r&&(r.mode="showing")},si.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},si.prototype.createEl=function(){return ai.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},si.prototype.clearDisplay=function(){"function"==typeof h.WebVTT&&h.WebVTT.processCues(h,[],this.el_)},si.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var t=null,n=null,r=e.length;r--;){var i=e[r];"showing"===i.mode&&("descriptions"===i.kind?t=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):t&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(t))},si.prototype.updateForTrack=function(e){if("function"==typeof h.WebVTT&&e.activeCues){for(var t=[],n=0;n<e.activeCues.length;n++)t.push(e.activeCues[n]);if(h.WebVTT.processCues(h,t,this.el_),this.player_.textTrackSettings)for(var r=this.player_.textTrackSettings.getValues(),i=t.length;i--;){var a=t[i];if(a){var o=a.displayState;if(r.color&&(o.firstChild.style.color=r.color),r.textOpacity&&ii(o.firstChild,"color",ri(r.color||"#fff",r.textOpacity)),r.backgroundColor&&(o.firstChild.style.backgroundColor=r.backgroundColor),r.backgroundOpacity&&ii(o.firstChild,"backgroundColor",ri(r.backgroundColor||"#000",r.backgroundOpacity)),r.windowColor&&(r.windowOpacity?ii(o,"backgroundColor",ri(r.windowColor,r.windowOpacity)):o.style.backgroundColor=r.windowColor),r.edgeStyle&&("dropshadow"===r.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+ti:"raised"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+ti:"depressed"===r.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+ti:"uniform"===r.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+ti)),r.fontPercent&&1!==r.fontPercent){var s=h.parseFloat(o.style.fontSize);o.style.fontSize=s*r.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}r.fontFamily&&"default"!==r.fontFamily&&("small-caps"===r.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=ni[r.fontFamily])}}}},si);function si(n,e,t){c(this,si);var r=f(this,ai.call(this,n,e,t)),i=tt(r,r.updateDisplay);return n.on("loadstart",tt(r,r.toggleDisplay)),n.on("texttrackchange",i),n.on("loadstart",tt(r,r.preselectTrack)),n.ready(tt(r,function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",i),n.on("playerresize",i),h.addEventListener&&h.addEventListener("orientationchange",i),n.on("dispose",function(){return h.removeEventListener("orientationchange",i)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),r}yt.registerComponent("TextTrackDisplay",oi);var ui,li=(n(di,ui=yt),di.prototype.createEl=function(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=oe("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),r=ui.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(n),r},di);function di(){return c(this,di),f(this,ui.apply(this,arguments))}yt.registerComponent("LoadingSpinner",li);var ci,fi=(n(hi,ci=Qr),hi.prototype.createEl=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==n?n:{};e="button",r=V({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},r),i=V({type:"button"},i);var a=yt.prototype.createEl.call(this,"button",r,i);return this.createControlTextEl(a),a},hi.prototype.addChild=function(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=this.constructor.name;return X.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead."),yt.prototype.addChild.call(this,e,n)},hi.prototype.enable=function(){ci.prototype.enable.call(this),this.el_.removeAttribute("disabled")},hi.prototype.disable=function(){ci.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},hi.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&ci.prototype.handleKeyPress.call(this,e)},hi);function hi(){return c(this,hi),f(this,ci.apply(this,arguments))}yt.registerComponent("Button",fi);var pi,gi=(n(mi,pi=fi),mi.prototype.buildCSSClass=function(){return"vjs-big-play-button"},mi.prototype.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)Pt(t);else{var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){function i(){return r.focus()}kt(t)?t.then(i,function(){}):this.setTimeout(i,1)}else this.player_.focus()}},mi.prototype.handleKeyPress=function(e){this.mouseused_=!1,pi.prototype.handleKeyPress.call(this,e)},mi.prototype.handleMouseDown=function(e){this.mouseused_=!0},mi);function mi(e,t){c(this,mi);var n=f(this,pi.call(this,e,t));return n.mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}gi.prototype.controlText_="Play Video",yt.registerComponent("BigPlayButton",gi);var yi,vi=(n(_i,yi=fi),_i.prototype.buildCSSClass=function(){return"vjs-close-button "+yi.prototype.buildCSSClass.call(this)},_i.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},_i);function _i(e,t){c(this,_i);var n=f(this,yi.call(this,e,t));return n.controlText(t&&t.controlText||n.localize("Close")),n}yt.registerComponent("CloseButton",vi);var bi,Ti=(n(Ei,bi=fi),Ei.prototype.buildCSSClass=function(){return"vjs-play-control "+bi.prototype.buildCSSClass.call(this)},Ei.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},Ei.prototype.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},Ei.prototype.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},Ei.prototype.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},Ei.prototype.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},Ei);function Ei(e,t){c(this,Ei);var n=f(this,bi.call(this,e,t));return n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),n.on(e,"ended",n.handleEnded),n}Ti.prototype.controlText_="Play",yt.registerComponent("PlayToggle",Ti);function Si(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return!isNaN(e)&&e!==1/0||(i=r=n="-"),(i=0<i||0<o?i+":":"")+(r=((i||10<=a)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)}var wi=Si;function Ai(e){return wi(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:e)}var Ci,Ri=(n(Ii,Ci=yt),Ii.prototype.createEl=function(e){var t=this.buildCSSClass(),n=Ci.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=oe("span",{className:t+"-display"},{"aria-live":"off"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},Ii.prototype.dispose=function(){this.contentEl_=null,this.textNode_=null,Ci.prototype.dispose.call(this)},Ii.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=m.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},Ii.prototype.formatTime_=function(e){return Ai(e)},Ii.prototype.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},Ii.prototype.updateContent=function(e){},Ii);function Ii(e,t){c(this,Ii);var n=f(this,Ci.call(this,e,t));return n.throttledUpdateContent=nt(tt(n,n.updateContent),25),n.on(e,"timeupdate",n.throttledUpdateContent),n}Ri.prototype.labelText_="Time",Ri.prototype.controlText_="Time",yt.registerComponent("TimeDisplay",Ri);var Mi,Oi=(n(Di,Mi=Ri),Di.prototype.buildCSSClass=function(){return"vjs-current-time"},Di.prototype.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},Di.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},Di);function Di(e,t){c(this,Di);var n=f(this,Mi.call(this,e,t));return n.on(e,"ended",n.handleEnded),n}Oi.prototype.labelText_="Current Time",Oi.prototype.controlText_="Current Time",yt.registerComponent("CurrentTimeDisplay",Oi);var ki,Pi=(n(Li,ki=Ri),Li.prototype.buildCSSClass=function(){return"vjs-duration"},Li.prototype.updateContent=function(e){var t=this.player_.duration();t&&this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},Li);function Li(e,t){c(this,Li);var n=f(this,ki.call(this,e,t));return n.on(e,"durationchange",n.updateContent),n.on(e,"loadedmetadata",n.throttledUpdateContent),n}Pi.prototype.labelText_="Duration",Pi.prototype.controlText_="Duration",yt.registerComponent("DurationDisplay",Pi);var xi,Ni=(n(Fi,xi=yt),Fi.prototype.createEl=function(){return xi.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},Fi);function Fi(){return c(this,Fi),f(this,xi.apply(this,arguments))}yt.registerComponent("TimeDivider",Ni);var Bi,Ui=(n(ji,Bi=Ri),ji.prototype.buildCSSClass=function(){return"vjs-remaining-time"},ji.prototype.formatTime_=function(e){return"-"+Bi.prototype.formatTime_.call(this,e)},ji.prototype.updateContent=function(e){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},ji.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},ji);function ji(e,t){c(this,ji);var n=f(this,Bi.call(this,e,t));return n.on(e,"durationchange",n.throttledUpdateContent),n.on(e,"ended",n.handleEnded),n}Ui.prototype.labelText_="Remaining Time",Ui.prototype.controlText_="Remaining Time",yt.registerComponent("RemainingTimeDisplay",Ui);var Gi,Hi=(n(qi,Gi=yt),qi.prototype.createEl=function(){var e=Gi.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=oe("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},qi.prototype.dispose=function(){this.contentEl_=null,Gi.prototype.dispose.call(this)},qi.prototype.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},qi);function qi(e,t){c(this,qi);var n=f(this,Gi.call(this,e,t));return n.updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}yt.registerComponent("LiveDisplay",Hi);var Vi,Ki=(n(Yi,Vi=yt),Yi.prototype.enabled=function(){return this.enabled_},Yi.prototype.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},Yi.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},Yi.prototype.createEl=function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},i=2<arguments.length&&void 0!==n?n:{};return r.className=r.className+" vjs-slider",r=V({tabIndex:0},r),i=V({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),Vi.prototype.createEl.call(this,e,r,i)},Yi.prototype.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||D||e.preventDefault(),ve(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},Yi.prototype.handleMouseMove=function(e){},Yi.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;_e(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},Yi.prototype.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",r=t.el().style;return this.vertical()?r.height=n:r.width=n,e}}},Yi.prototype.calculateDistance=function(e){var t=Ee(this.el_,e);return this.vertical()?t.y:t.x},Yi.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Yi.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},Yi.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},Yi.prototype.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},Yi.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},Yi);function Yi(e,t){c(this,Yi);var n=f(this,Vi.call(this,e,t));return n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}yt.registerComponent("Slider",Ki);var Wi,zi=(n(Xi,Wi=yt),Xi.prototype.createEl=function(){return Wi.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},Xi.prototype.dispose=function(){this.partEls_=null,Wi.prototype.dispose.call(this)},Xi.prototype.update=function(e){function t(e,t){var n=e/t||0;return 100*(1<=n?1:n)+"%"}var n=this.player_.buffered(),r=this.player_.duration(),i=this.player_.bufferedEnd(),a=this.partEls_;this.el_.style.width=t(i,r);for(var o=0;o<n.length;o++){var s=n.start(o),u=n.end(o),l=a[o];l||(l=this.el_.appendChild(oe()),a[o]=l),l.style.left=t(s,i),l.style.width=t(u-s,i)}for(var d=a.length;d>n.length;d--)this.el_.removeChild(a[d-1]);a.length=n.length},Xi);function Xi(e,t){c(this,Xi);var n=f(this,Wi.call(this,e,t));return n.partEls_=[],n.on(e,"progress",n.update),n}yt.registerComponent("LoadProgressBar",zi);var Qi,$i=(n(Ji,Qi=yt),Ji.prototype.createEl=function(){return Qi.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},Ji.prototype.update=function(e,t,n){var r=be(this.el_),i=be(this.player_.el()),a=e.width*t;if(i&&r){var o=e.left-i.left+a,s=e.width-a+(i.right-e.right),u=r.width/2;o<u?u+=u-o:s<u&&(u=s),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px",se(this.el_,n)}},Ji);function Ji(){return c(this,Ji),f(this,Qi.apply(this,arguments))}yt.registerComponent("TimeTooltip",$i);var Zi,ea=(n(ta,Zi=yt),ta.prototype.createEl=function(){return Zi.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},ta.prototype.update=function(r,i){var a=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=a.player_.scrubbing()?a.player_.getCache().currentTime:a.player_.currentTime(),t=Ai(e,a.player_.duration()),n=a.getChild("timeTooltip");n&&n.update(r,i,t)})},ta);function ta(){return c(this,ta),f(this,Zi.apply(this,arguments))}ea.prototype.options_={children:[]},L&&!(8<L)||S||A||ea.prototype.options_.children.push("timeTooltip"),yt.registerComponent("PlayProgressBar",ea);var na,ra=(n(ia,na=yt),ia.prototype.createEl=function(){return na.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},ia.prototype.update=function(n,r){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e=i.player_.duration(),t=Ai(r*e,e);i.el_.style.left=n.width*r+"px",i.getChild("timeTooltip").update(n,r,t)})},ia);function ia(e,t){c(this,ia);var n=f(this,na.call(this,e,t));return n.update=nt(tt(n,n.update),25),n}ra.prototype.options_={children:["timeTooltip"]},yt.registerComponent("MouseTimeDisplay",ra);var aa,oa=(n(sa,aa=Ki),sa.prototype.setEventHandlers_=function(){var e=this;this.update=nt(tt(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval),e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},sa.prototype.createEl=function(){return aa.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},sa.prototype.update_=function(e,t){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ai(e,n),Ai(n,n)],"{1} of {2}")),this.bar.update(be(this.el_),t)},sa.prototype.update=function(e){var t=aa.prototype.update.call(this);return this.update_(this.getCurrentTime_(),t),t},sa.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},sa.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)},sa.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e},sa.prototype.handleMouseDown=function(e){Ie(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),aa.prototype.handleMouseDown.call(this,e))},sa.prototype.handleMouseMove=function(e){if(Ie(e)){var t=this.calculateDistance(e)*this.player_.duration();t===this.player_.duration()&&(t-=.1),this.player_.currentTime(t)}},sa.prototype.enable=function(){aa.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},sa.prototype.disable=function(){aa.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},sa.prototype.handleMouseUp=function(e){aa.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Pt(this.player_.play())},sa.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},sa.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},sa.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},sa.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):aa.prototype.handleKeyPress&&aa.prototype.handleKeyPress.call(this,e)},sa);function sa(e,t){c(this,sa);var n=f(this,aa.call(this,e,t));return n.setEventHandlers_(),n}oa.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},L&&!(8<L)||S||A||oa.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),oa.prototype.playerEvent="timeupdate",yt.registerComponent("SeekBar",oa);var ua,la=(n(da,ua=yt),da.prototype.createEl=function(){return ua.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},da.prototype.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),r=t.el(),i=be(r),a=Ee(r,e).x;1<a?a=1:a<0&&(a=0),n&&n.update(i,a)}},da.prototype.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},da.prototype.enabled=function(){return this.enabled_},da.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},da.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},da.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},da.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},da);function da(e,t){c(this,da);var n=f(this,ua.call(this,e,t));return n.handleMouseMove=nt(tt(n,n.handleMouseMove),25),n.throttledHandleMouseSeek=nt(tt(n,n.handleMouseSeek),25),n.enable(),n}la.prototype.options_={children:["seekBar"]},yt.registerComponent("ProgressControl",la);var ca,fa=(n(ha,ca=fi),ha.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+ca.prototype.buildCSSClass.call(this)},ha.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},ha.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},ha);function ha(e,t){c(this,ha);var n=f(this,ca.call(this,e,t));return n.on(e,"fullscreenchange",n.handleFullscreenChange),!1===m[St.fullscreenEnabled]&&n.disable(),n}fa.prototype.controlText_="Fullscreen",yt.registerComponent("FullscreenToggle",fa);var pa,ga=(n(ma,pa=yt),ma.prototype.createEl=function(){return pa.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},ma);function ma(){return c(this,ma),f(this,pa.apply(this,arguments))}yt.registerComponent("VolumeLevel",ga);var ya,va=(n(_a,ya=Ki),_a.prototype.createEl=function(){return ya.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},_a.prototype.handleMouseDown=function(e){Ie(e)&&ya.prototype.handleMouseDown.call(this,e)},_a.prototype.handleMouseMove=function(e){Ie(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},_a.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},_a.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},_a.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},_a.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},_a.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},_a.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},_a.prototype.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},_a);function _a(e,t){c(this,_a);var n=f(this,ya.call(this,e,t));return n.on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}va.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},va.prototype.playerEvent="volumechange",yt.registerComponent("VolumeBar",va);var ba,Ta=(n(Ea,ba=yt),Ea.prototype.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),ba.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},Ea.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},Ea.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},Ea.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},Ea);function Ea(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c(this,Ea),t.vertical=t.vertical||!1,void 0!==t.volumeBar&&!Y(t.volumeBar)||(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical);var n=f(this,ba.call(this,e,t));return function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(n,e),n.throttledHandleMouseMove=nt(tt(n,n.handleMouseMove),25),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Ta.prototype.options_={children:["volumeBar"]},yt.registerComponent("VolumeControl",Ta);var Sa,wa=(n(Aa,Sa=fi),Aa.prototype.buildCSSClass=function(){return"vjs-mute-control "+Sa.prototype.buildCSSClass.call(this)},Aa.prototype.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},Aa.prototype.update=function(e){this.updateIcon_(),this.updateControlText_()},Aa.prototype.updateIcon_=function(){var e=this.player_.volume(),t=3;S&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)ce(this.el_,"vjs-vol-"+n);de(this.el_,"vjs-vol-"+t)},Aa.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},Aa);function Aa(e,t){c(this,Aa);var n=f(this,Sa.call(this,e,t));return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})}(n,e),n.on(e,["loadstart","volumechange"],n.update),n}wa.prototype.controlText_="Mute",yt.registerComponent("MuteToggle",wa);var Ca,Ra=(n(Ia,Ca=yt),Ia.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},Ia.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},Ia.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},Ia.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),Ca.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},Ia);function Ia(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c(this,Ia),void 0!==t.inline?t.inline=t.inline:t.inline=!0,void 0!==t.volumeControl&&!Y(t.volumeControl)||(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline);var n=f(this,Ca.call(this,e,t));return n.on(e,["loadstart"],n.volumePanelState_),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Ra.prototype.options_={children:["muteToggle","volumeControl"]},yt.registerComponent("VolumePanel",Ra);var Ma,Oa=(n(Da,Ma=yt),Da.prototype.addItem=function(t){this.addChild(t),t.on("click",tt(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},Da.prototype.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=oe(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=Ma.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ve(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},Da.prototype.dispose=function(){this.contentEl_=null,Ma.prototype.dispose.call(this)},Da.prototype.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepForward()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepBack())},Da.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},Da.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},Da.prototype.focus=function(e){var t=0<arguments.length&&void 0!==e?e:0,n=this.children().slice();n.length&&n[0].className&&/vjs-menu-title/.test(n[0].className)&&n.shift(),0<n.length&&(t<0?t=0:t>=n.length&&(t=n.length-1),n[this.focusedChild_=t].el_.focus())},Da);function Da(e,t){c(this,Da);var n=f(this,Ma.call(this,e,t));return t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyPress),n}yt.registerComponent("Menu",Oa);var ka,Pa=(n(La,ka=yt),La.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},La.prototype.createMenu=function(){var e=new Oa(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=oe("li",{className:"vjs-menu-title",innerHTML:gt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,e.children_.unshift(t),ue(t,e.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)e.addItem(this.items[n]);return e},La.prototype.createItems=function(){},La.prototype.createEl=function(){return ka.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},La.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+fi.prototype.buildCSSClass()+" "+ka.prototype.buildCSSClass.call(this)},La.prototype.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+ka.prototype.buildCSSClass.call(this)},La.prototype.controlText=function(e,t){var n=1<arguments.length&&void 0!==t?t:this.menuButton_.el();return this.menuButton_.controlText(e,n)},La.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",tt(this,function(e){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},La.prototype.focus=function(){this.menuButton_.focus()},La.prototype.blur=function(){this.menuButton_.blur()},La.prototype.handleFocus=function(){Ve(m,"keydown",tt(this,this.handleKeyPress))},La.prototype.handleBlur=function(){Ke(m,"keydown",tt(this,this.handleKeyPress))},La.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())},La.prototype.handleSubmenuKeyPress=function(e){27!==e.which&&9!==e.which||(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus()))},La.prototype.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),S&&ie())return;this.menu.focus()}},La.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},La.prototype.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},La.prototype.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},La);function La(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c(this,La);var n=f(this,ka.call(this,e,t));n.menuButton_=new fi(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=fi.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"focus",n.handleFocus),n.on(n.menuButton_,"blur",n.handleBlur),n.on("keydown",n.handleSubmenuKeyPress),n}yt.registerComponent("MenuButton",Pa);var xa,Na=(n(Fa,xa=Pa),Fa);function Fa(e,t){c(this,Fa);var n=t.tracks,r=f(this,xa.call(this,e,t));if(r.items.length<=1&&r.hide(),!n)return f(r);var i=tt(r,r.update);return n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),r.player_.on("ready",i),r.player_.on("dispose",function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)}),r}yt.registerComponent("TrackButton",Na);var Ba,Ua=(n(ja,Ba=Qr),ja.prototype.createEl=function(e,t,n){return this.nonIconControl=!0,Ba.prototype.createEl.call(this,"li",V({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},ja.prototype.handleClick=function(e){this.selected(!0)},ja.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},ja);function ja(e,t){c(this,ja);var n=f(this,Ba.call(this,e,t));return n.selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}yt.registerComponent("MenuItem",Ua);var Ga,Ha=(n(qa,Ga=Ua),qa.prototype.handleClick=function(e){var t=this.track.kind,n=this.track.kinds,r=this.player_.textTracks();if(n=n||[t],Ga.prototype.handleClick.call(this,e),r)for(var i=0;i<r.length;i++){var a=r[i];a===this.track&&-1<n.indexOf(a.kind)?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled")}},qa.prototype.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},qa.prototype.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},qa.prototype.dispose=function(){this.track=null,Ga.prototype.dispose.call(this)},qa);function qa(e,t){c(this,qa);var n=t.track,r=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode;var i=f(this,Ga.call(this,e,t));i.track=n;function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(i,t)}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(i,t)}if(e.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",o),i.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",o)}),void 0===r.onchange){var s=void 0;i.on(["tap","click"],function(){if("object"!==j(h.Event))try{s=new h.Event("change")}catch(e){}s||(s=m.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(s)})}return i.handleTracksChange(),i}yt.registerComponent("TextTrackMenuItem",Ha);var Va,Ka=(n(Ya,Va=Ha),Ya.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},Ya.prototype.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},Ya);function Ya(e,t){return c(this,Ya),t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,f(this,Va.call(this,e,t))}yt.registerComponent("OffTextTrackMenuItem",Ka);var Wa,za=(n(Xa,Wa=Na),Xa.prototype.createItems=function(e,t){var n=0<arguments.length&&void 0!==e?e:[],r=1<arguments.length&&void 0!==t?t:Ha,i=void 0;this.label_&&(i=this.label_+" off"),n.push(new Ka(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;var a=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var o=0;o<a.length;o++){var s=a[o];if(-1<this.kinds_.indexOf(s.kind)){var u=new r(this.player_,{track:s,selectable:!0,multiSelectable:!1});u.addClass("vjs-"+s.kind+"-menu-item"),n.push(u)}}return n},Xa);function Xa(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,Xa),t.tracks=e.textTracks(),f(this,Wa.call(this,e,t))}yt.registerComponent("TextTrackButton",za);var Qa,$a=(n(Ja,Qa=Ua),Ja.prototype.handleClick=function(e){Qa.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},Ja.prototype.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},Ja);function Ja(e,t){c(this,Ja);var n=t.track,r=t.cue,i=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=i&&i<r.endTime;var a=f(this,Qa.call(this,e,t));return a.track=n,a.cue=r,n.addEventListener("cuechange",tt(a,a.update)),a}yt.registerComponent("ChaptersTrackMenuItem",$a);var Za,eo=(n(to,Za=za),to.prototype.buildCSSClass=function(){return"vjs-chapters-button "+Za.prototype.buildCSSClass.call(this)},to.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+Za.prototype.buildWrapperCSSClass.call(this)},to.prototype.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),Za.prototype.update.call(this)},to.prototype.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},to.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},to.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(gt(this.kind_))},to.prototype.createMenu=function(){return this.options_.title=this.getMenuCaption(),Za.prototype.createMenu.call(this)},to.prototype.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new $a(this.player_,{track:this.track_,cue:i});e.push(a)}return e},to);function to(e,t,n){return c(this,to),f(this,Za.call(this,e,t,n))}eo.prototype.kind_="chapters",eo.prototype.controlText_="Chapters",yt.registerComponent("ChaptersButton",eo);var no,ro=(n(io,no=za),io.prototype.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},io.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+no.prototype.buildCSSClass.call(this)},io.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+no.prototype.buildWrapperCSSClass.call(this)},io);function io(e,t,n){c(this,io);var r=f(this,no.call(this,e,t,n)),i=e.textTracks(),a=tt(r,r.handleTracksChange);return i.addEventListener("change",a),r.on("dispose",function(){i.removeEventListener("change",a)}),r}ro.prototype.kind_="descriptions",ro.prototype.controlText_="Descriptions",yt.registerComponent("DescriptionsButton",ro);var ao,oo=(n(so,ao=za),so.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+ao.prototype.buildCSSClass.call(this)},so.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+ao.prototype.buildWrapperCSSClass.call(this)},so);function so(e,t,n){return c(this,so),f(this,ao.call(this,e,t,n))}oo.prototype.kind_="subtitles",oo.prototype.controlText_="Subtitles",yt.registerComponent("SubtitlesButton",oo);var uo,lo=(n(co,uo=Ha),co.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},co);function co(e,t){c(this,co),t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem";var n=f(this,uo.call(this,e,t));return n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}yt.registerComponent("CaptionSettingsMenuItem",lo);var fo,ho=(n(po,fo=za),po.prototype.buildCSSClass=function(){return"vjs-captions-button "+fo.prototype.buildCSSClass.call(this)},po.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+fo.prototype.buildWrapperCSSClass.call(this)},po.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new lo(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),fo.prototype.createItems.call(this,e)},po);function po(e,t,n){return c(this,po),f(this,fo.call(this,e,t,n))}ho.prototype.kind_="captions",ho.prototype.controlText_="Captions",yt.registerComponent("CaptionsButton",ho);var go,mo=(n(yo,go=Ha),yo.prototype.createEl=function(e,t,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),r+="</span>",go.prototype.createEl.call(this,e,V({innerHTML:r},t),n)},yo);function yo(){return c(this,yo),f(this,go.apply(this,arguments))}yt.registerComponent("SubsCapsMenuItem",mo);var vo,_o=(n(bo,vo=za),bo.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+vo.prototype.buildCSSClass.call(this)},bo.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+vo.prototype.buildWrapperCSSClass.call(this)},bo.prototype.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new lo(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=vo.prototype.createItems.call(this,e,mo)},bo);function bo(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c(this,bo);var n=f(this,vo.call(this,e,t));return n.label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(gt(n.label_)),n}_o.prototype.kinds_=["captions","subtitles"],_o.prototype.controlText_="Subtitles",yt.registerComponent("SubsCapsButton",_o);var To,Eo=(n(So,To=Ua),So.prototype.createEl=function(e,t,n){var r='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(r+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),r+="</span>",To.prototype.createEl.call(this,e,V({innerHTML:r},t),n)},So.prototype.handleClick=function(e){var t=this.player_.audioTracks();To.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var r=t[n];r.enabled=r===this.track}},So.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)},So);function So(e,t){c(this,So);var n=t.track,r=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled;var i=f(this,To.call(this,e,t));i.track=n,i.addClass("vjs-"+n.kind+"-menu-item");function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(i,t)}return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}yt.registerComponent("AudioTrackMenuItem",Eo);var wo,Ao=(n(Co,wo=Na),Co.prototype.buildCSSClass=function(){return"vjs-audio-button "+wo.prototype.buildCSSClass.call(this)},Co.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+wo.prototype.buildWrapperCSSClass.call(this)},Co.prototype.createItems=function(e){var t=0<arguments.length&&void 0!==e?e:[];this.hideThreshold_=1;for(var n=this.player_.audioTracks(),r=0;r<n.length;r++){var i=n[r];t.push(new Eo(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return t},Co);function Co(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,Co),t.tracks=e.audioTracks(),f(this,wo.call(this,e,t))}Ao.prototype.controlText_="Audio Track",yt.registerComponent("AudioTrackButton",Ao);var Ro,Io=(n(Mo,Ro=Ua),Mo.prototype.handleClick=function(e){Ro.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},Mo.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)},Mo);function Mo(e,t){c(this,Mo);var n=t.rate,r=parseFloat(n,10);t.label=n,t.selected=1===r,t.selectable=!0,t.multiSelectable=!1;var i=f(this,Ro.call(this,e,t));return i.label=n,i.rate=r,i.on(e,"ratechange",i.update),i}Io.prototype.contentElType="button",yt.registerComponent("PlaybackRateMenuItem",Io);var Oo,Do=(n(ko,Oo=Pa),ko.prototype.createEl=function(){var e=Oo.prototype.createEl.call(this);return this.labelEl_=oe("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},ko.prototype.dispose=function(){this.labelEl_=null,Oo.prototype.dispose.call(this)},ko.prototype.buildCSSClass=function(){return"vjs-playback-rate "+Oo.prototype.buildCSSClass.call(this)},ko.prototype.buildWrapperCSSClass=function(){return"vjs-playback-rate "+Oo.prototype.buildWrapperCSSClass.call(this)},ko.prototype.createMenu=function(){var e=new Oa(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new Io(this.player(),{rate:t[n]+"x"}));return e},ko.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},ko.prototype.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},ko.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},ko.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},ko.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},ko.prototype.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},ko);function ko(e,t){c(this,ko);var n=f(this,Oo.call(this,e,t));return n.updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}Do.prototype.controlText_="Playback Rate",yt.registerComponent("PlaybackRateMenuButton",Do);var Po,Lo=(n(xo,Po=yt),xo.prototype.buildCSSClass=function(){return"vjs-spacer "+Po.prototype.buildCSSClass.call(this)},xo.prototype.createEl=function(){return Po.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},xo);function xo(){return c(this,xo),f(this,Po.apply(this,arguments))}yt.registerComponent("Spacer",Lo);var No,Fo=(n(Bo,No=Lo),Bo.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+No.prototype.buildCSSClass.call(this)},Bo.prototype.createEl=function(){var e=No.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML=" ",e},Bo);function Bo(){return c(this,Bo),f(this,No.apply(this,arguments))}yt.registerComponent("CustomControlSpacer",Fo);var Uo,jo=(n(Go,Uo=yt),Go.prototype.createEl=function(){return Uo.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},Go);function Go(){return c(this,Go),f(this,Uo.apply(this,arguments))}jo.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},yt.registerComponent("ControlBar",jo);var Ho,qo=(n(Vo,Ho=Ut),Vo.prototype.buildCSSClass=function(){return"vjs-error-display "+Ho.prototype.buildCSSClass.call(this)},Vo.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""},Vo);function Vo(e,t){c(this,Vo);var n=f(this,Ho.call(this,e,t));return n.on(e,"error",n.open),n}qo.prototype.options_=mt(Ut.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),yt.registerComponent("ErrorDisplay",qo);var Ko="vjs-text-track-settings",Yo=["#000","Black"],Wo=["#00F","Blue"],zo=["#0FF","Cyan"],Xo=["#0F0","Green"],Qo=["#F0F","Magenta"],$o=["#F00","Red"],Jo=["#FFF","White"],Zo=["#FF0","Yellow"],es=["1","Opaque"],ts=["0.5","Semi-Transparent"],ns=["0","Transparent"],rs={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Yo,Jo,$o,Xo,Wo,Zo,Qo,zo]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[es,ts,ns]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Jo,Yo,$o,Xo,Wo,Zo,Qo,zo]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[es,ts]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ns,ts,es]}};function is(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}rs.windowColor.options=rs.backgroundColor.options;var as,os=(n(ss,as=Ut),ss.prototype.dispose=function(){this.endDialog=null,as.prototype.dispose.call(this)},ss.prototype.createElSelect_=function(e,t,n){var r=this,i=1<arguments.length&&void 0!==t?t:"",a=2<arguments.length&&void 0!==n?n:"label",o=rs[e],s=o.id.replace("%s",this.id_),u=[i,s].join(" ").trim();return["<"+a+' id="'+s+'" class="'+("label"===a?"vjs-label":"")+'">',this.localize(o.label),"</"+a+">",'<select aria-labelledby="'+u+'">'].concat(o.options.map(function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+u+" "+t+'">',r.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},ss.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},ss.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},ss.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},ss.prototype.createElColors_=function(){return oe("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},ss.prototype.createElFont_=function(){return oe("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},ss.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return oe("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},ss.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},ss.prototype.label=function(){return this.localize("Caption Settings Dialog")},ss.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},ss.prototype.buildCSSClass=function(){return as.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},ss.prototype.getValues=function(){var i=this;return function(n,r,e){var t=2<arguments.length&&void 0!==e?e:0;return H(n).reduce(function(e,t){return r(e,n[t],t)},t)}(rs,function(e,t,n){var r=function(e,t){return is(e.options[e.options.selectedIndex].value,t)}(i.$(t.selector),t.parser);return void 0!==r&&(e[n]=r),e},{})},ss.prototype.setValues=function(n){var r=this;q(rs,function(e,t){!function(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(is(e.options[r].value,n)===t){e.selectedIndex=r;break}}(r.$(e.selector),n[t],e.parser)})},ss.prototype.setDefaults=function(){var n=this;q(rs,function(e){var t=e.hasOwnProperty("default")?e.default:0;n.$(e.selector).selectedIndex=t})},ss.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(h.localStorage.getItem(Ko))}catch(e){X.warn(e)}e&&this.setValues(e)},ss.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?h.localStorage.setItem(Ko,JSON.stringify(e)):h.localStorage.removeItem(Ko)}catch(e){X.warn(e)}}},ss.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},ss.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(m,"keydown",this.handleKeyDown);var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},ss);function ss(e,t){c(this,ss),t.temporary=!1;var n=f(this,as.call(this,e,t));return n.updateDisplay=tt(n,n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=oe("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),void 0===t.persistTextTrackSettings&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),q(rs,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}yt.registerComponent("TextTrackSettings",os);var us,ls=(n(ds,us=yt),ds.prototype.createEl=function(){return us.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},ds.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},ds.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&Ke(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},ds);function ds(e,t){c(this,ds);var n=t.ResizeObserver||h.ResizeObserver;null===t.ResizeObserver&&(n=!1);var r=mt({createEl:!n},t),i=f(this,us.call(this,e,r));return i.ResizeObserver=t.ResizeObserver||h.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(r,i,a,e){function t(){var e=this,t=arguments,n=function(){n=s=null,a||r.apply(e,t)};!s&&a&&r.apply(e,t),o.clearTimeout(s),s=o.setTimeout(n,i)}var o=3<arguments.length&&void 0!==e?e:h,s=void 0;return t.cancel=function(){o.clearTimeout(s),s=null},t}(function(){i.resizeHandler()},100,!1,i),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){i.el_&&i.el_.contentWindow&&Ve(i.el_.contentWindow,"resize",i.debouncedHandler_)},i.one("load",i.loadListener_)),i}yt.registerComponent("ResizeManager",ls);function cs(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)}var fs={};P||(fs=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=m.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=m.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",h.Element.prototype.appendChild.call(this,n),this.innerHTML}}));function hs(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n}function ps(a){var o=a.el();if(!o.resetSourceWatch_){function t(i){return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.apply(o,t);return cs(a),r}}var n={},e=function(e){return hs([e.el(),h.HTMLMediaElement.prototype,h.Element.prototype,fs],"innerHTML")}(a);["append","appendChild","insertAdjacentHTML"].forEach(function(e){o[e]&&(n[e]=o[e],o[e]=t(n[e]))}),Object.defineProperty(o,"innerHTML",mt(e,{set:t(e.set)})),o.resetSourceWatch_=function(){o.resetSourceWatch_=null,Object.keys(n).forEach(function(e){o[e]=n[e]}),Object.defineProperty(o,"innerHTML",e)},a.one("sourceset",o.resetSourceWatch_)}}var gs={};P||(gs=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?gn(h.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return h.Element.prototype.setAttribute.call(this,"src",e),e}}));function ms(r){if(r.featuresSourceset){var i=r.el();if(!i.resetSourceset_){var n=function(e){return hs([e.el(),h.HTMLMediaElement.prototype,gs],"src")}(r),a=i.setAttribute,t=i.load;Object.defineProperty(i,"src",mt(n,{set:function(e){var t=n.set.call(i,e);return r.triggerSourceset(i.src),t}})),i.setAttribute=function(e,t){var n=a.call(i,e,t);return/src/i.test(e)&&r.triggerSourceset(i.src),n},i.load=function(){var e=t.call(i);return cs(r)||(r.triggerSourceset(""),ps(r)),e},i.currentSrc?r.triggerSourceset(i.currentSrc):cs(r)||ps(r),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=t,i.setAttribute=a,Object.defineProperty(i,"src",n),i.resetSourceWatch_&&i.resetSourceWatch_()}}}}var ys,vs=r(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),_s=(n(bs,ys=Dr),bs.prototype.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),bs.disposeMediaElement(this.el_),this.options_=null,ys.prototype.dispose.call(this)},bs.prototype.setupSourcesetHandling_=function(){ms(this)},bs.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){function e(){r=[];for(var e=0;e<n.length;e++){var t=n[e];"metadata"===t.kind&&r.push({track:t,storedMode:t.mode})}}var n=this.textTracks(),r=void 0;function i(){for(var e=0;e<r.length;e++){var t=r[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}n.removeEventListener("change",i)}e(),n.addEventListener("change",e),this.on("dispose",function(){return n.removeEventListener("change",e)}),this.on("webkitbeginfullscreen",function(){n.removeEventListener("change",e),n.removeEventListener("change",i),n.addEventListener("change",i)}),this.on("webkitendfullscreen",function(){n.removeEventListener("change",e),n.addEventListener("change",e),n.removeEventListener("change",i)})},bs.prototype.proxyNativeTracks_=function(){var o=this;$n.names.forEach(function(e){var t=$n[e],i=o.el()[t.getterName],a=o[t.getterName]();if(o["featuresNative"+t.capitalName+"Tracks"]&&i&&i.addEventListener){function n(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,r=0;r<i.length;r++)if(i[r]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())}var r={change:function(e){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function(e){a.addTrack(e.track)},removetrack:function(e){a.removeTrack(e.track)}};Object.keys(r).forEach(function(t){var n=r[t];i.addEventListener(t,n),o.on("dispose",function(e){return i.removeEventListener(t,n)})}),o.on("loadstart",n),o.on("dispose",function(e){return o.off("loadstart",n)})}})},bs.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),bs.disposeMediaElement(e),e=t}else{e=m.createElement("video");var n=mt({},this.options_.tag&&pe(this.options_.tag));F&&!0===this.options_.nativeControlsForTouch||delete n.controls,he(e,V(n,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&me(e,"preload",this.options_.preload);for(var r=["loop","muted","playsinline","autoplay"],i=0;i<r.length;i++){var a=r[i],o=this.options_[a];void 0!==o&&(o?me(e,a,a):ye(e,a),e[a]=o)}return e},bs.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){function t(){n=!0}var n=!1;function r(){n||this.trigger("loadstart")}return this.on("loadstart",t),this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",t),this.off("loadedmetadata",r),n||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=e.readyState&&i.push("loadeddata"),3<=e.readyState&&i.push("canplay"),4<=e.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(e){this.trigger(e)},this)})}},bs.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){X(e,"Video is not ready. (Video.js)")}},bs.prototype.duration=function(){var t=this;return this.el_.duration===1/0&&A&&D&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},bs.prototype.width=function(){return this.el_.offsetWidth},bs.prototype.height=function(){return this.el_.offsetHeight},bs.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){function t(){this.trigger("fullscreenchange",{isFullscreen:!1})}function n(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))}this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},bs.prototype.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=h.navigator&&h.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},bs.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},bs.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},bs.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},bs.prototype.reset=function(){bs.resetMediaElement(this.el_)},bs.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},bs.prototype.setControls=function(e){this.el_.controls=!!e},bs.prototype.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):ys.prototype.addTextTrack.call(this,e,t,n)},bs.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return ys.prototype.createRemoteTextTrack.call(this,e);var t=m.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},bs.prototype.addRemoteTextTrack=function(e,t){var n=ys.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},bs.prototype.removeRemoteTextTrack=function(e){if(ys.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},bs.prototype.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),h.performance&&"function"==typeof h.performance.now?e.creationTime=h.performance.now():h.performance&&h.performance.timing&&"number"==typeof h.performance.timing.navigationStart&&(e.creationTime=h.Date.now()-h.performance.timing.navigationStart),e},bs);function bs(e,t){c(this,bs);var n=f(this,ys.call(this,e,t)),r=e.source,i=!1;if(r&&(n.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(r):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,o=a.length,s=[];o--;){var u=a[o];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),i||n.el_.hasAttribute("crossorigin")||!yn(u.src)||(i=!0)):s.push(u))}for(var l=0;l<s.length;l++)n.el_.removeChild(s[l])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&i&&X.warn($(vs)),n.restoreMetadataTracksInIOSNativePlayer_(),(F||T||I)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}if(ne()){_s.TEST_VID=m.createElement("video");var Ts=m.createElement("track");Ts.kind="captions",Ts.srclang="en",Ts.label="English",_s.TEST_VID.appendChild(Ts)}_s.isSupported=function(){try{_s.TEST_VID.volume=.5}catch(e){return!1}return!(!_s.TEST_VID||!_s.TEST_VID.canPlayType)},_s.canPlayType=function(e){return _s.TEST_VID.canPlayType(e)},_s.canPlaySource=function(e,t){return _s.canPlayType(e.type)},_s.canControlVolume=function(){try{var e=_s.TEST_VID.volume;return _s.TEST_VID.volume=e/2+.1,e!==_s.TEST_VID.volume}catch(e){return!1}},_s.canMuteVolume=function(){try{var e=_s.TEST_VID.muted;return _s.TEST_VID.muted=!e,_s.TEST_VID.muted?me(_s.TEST_VID,"muted","muted"):ye(_s.TEST_VID,"muted"),e!==_s.TEST_VID.muted}catch(e){return!1}},_s.canControlPlaybackRate=function(){if(A&&D&&k<58)return!1;try{var e=_s.TEST_VID.playbackRate;return _s.TEST_VID.playbackRate=e/2+.1,e!==_s.TEST_VID.playbackRate}catch(e){return!1}},_s.canOverrideAttributes=function(){if(P)return!1;try{function e(){}Object.defineProperty(m.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(m.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(m.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(m.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},_s.supportsNativeTextTracks=function(){return N||S&&D},_s.supportsNativeVideoTracks=function(){return!(!_s.TEST_VID||!_s.TEST_VID.videoTracks)},_s.supportsNativeAudioTracks=function(){return!(!_s.TEST_VID||!_s.TEST_VID.audioTracks)},_s.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],_s.prototype.featuresVolumeControl=_s.canControlVolume(),_s.prototype.featuresMuteControl=_s.canMuteVolume(),_s.prototype.featuresPlaybackRate=_s.canControlPlaybackRate(),_s.prototype.featuresSourceset=_s.canOverrideAttributes(),_s.prototype.movingMediaElementInDOM=!S,_s.prototype.featuresFullscreenResize=!0,_s.prototype.featuresProgressEvents=!0,_s.prototype.featuresTimeupdateEvents=!0,_s.prototype.featuresNativeTextTracks=_s.supportsNativeTextTracks(),_s.prototype.featuresNativeVideoTracks=_s.supportsNativeVideoTracks(),_s.prototype.featuresNativeAudioTracks=_s.supportsNativeAudioTracks();var Es=_s.TEST_VID&&_s.TEST_VID.constructor.prototype.canPlayType,Ss=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,ws=/^video\/mp4/i;_s.patchCanPlayType=function(){4<=C&&!M&&!D?_s.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Ss.test(e)?"maybe":Es.call(this,e)}:R&&(_s.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&ws.test(e)?"maybe":Es.call(this,e)})},_s.unpatchCanPlayType=function(){var e=_s.TEST_VID.constructor.prototype.canPlayType;return _s.TEST_VID.constructor.prototype.canPlayType=Es,e},_s.patchCanPlayType(),_s.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},_s.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){_s.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){_s.prototype["set"+gt(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){_s.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){_s.prototype["set"+gt(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){_s.prototype[e]=function(){return this.el_[e]()}}),Dr.withSourceHandlers(_s),_s.nativeSourceHandler={},_s.nativeSourceHandler.canPlayType=function(e){try{return _s.TEST_VID.canPlayType(e)}catch(e){return""}},_s.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return _s.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=mn(e.src);return _s.nativeSourceHandler.canPlayType("video/"+n)}return""},_s.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},_s.nativeSourceHandler.dispose=function(){},_s.registerSourceHandler(_s.nativeSourceHandler),Dr.registerTech("Html5",_s);var As=r(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Cs=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Rs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Is=["tiny","xsmall","small","medium","large","xlarge","huge"],Ms={};Is.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ms[e]="vjs-layout-"+t});var Os,Ds={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ks=(n(Ps,Os=yt),Ps.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Ps.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),function(e){Lr[e.id()]=null}(this),Os.prototype.dispose.call(this)},Ps.prototype.createEl=function(){var t=this.tag,n=void 0,e=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();e?n=this.el_=t.parentNode:r||(n=this.el_=Os.prototype.createEl.call(this,"div"));var i=pe(t);if(r){for(n=this.el_=t,t=this.tag=m.createElement("video");n.children.length;)t.appendChild(n.firstChild);le(n,"video-js")||de(n,"video-js"),n.appendChild(t),e=this.playerElIngest_=n,["autoplay","controls","crossOrigin","defaultMuted","defaultPlaybackRate","loop","muted","playbackRate","src","volume"].forEach(function(e){void 0!==n[e]&&(t[e]=n[e])})}if(t.setAttribute("tabindex","-1"),i.tabindex="-1",L&&(t.setAttribute("role","application"),i.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in i&&delete i.width,"height"in i&&delete i.height,Object.getOwnPropertyNames(i).forEach(function(e){"class"===e?(n.className+=" "+i[e],r&&(t.className+=" "+i[e])):(n.setAttribute(e,i[e]),r&&t.setAttribute(e,i[e]))}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused"),!0!==h.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Ze("vjs-styles-dimensions");var a=Me(".vjs-styles-defaults"),o=Me("head");o.insertBefore(this.styleEl_,a?a.nextSibling:o.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var s=t.getElementsByTagName("a"),u=0;u<s.length;u++){var l=s.item(u);de(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!e&&t.parentNode.insertBefore(n,t),ue(t,n),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_=n},Ps.prototype.width=function(e){return this.dimension("width",e)},Ps.prototype.height=function(e){return this.dimension("height",e)},Ps.prototype.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?X.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},Ps.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e,e?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_()},Ps.prototype.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},Ps.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},Ps.prototype.updateStyleEl_=function(){if(!0!==h.VIDEOJS_NO_DYNAMIC_STYLE){var e=void 0,t=void 0,n=void 0,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),i=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),et(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*i+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(0<=a&&(s.width=a),0<=o&&(s.height=o))}},Ps.prototype.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=gt(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Dr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Zn.names.forEach(function(e){var t=Zn[e];a[t.getterName]=n[t.privateName]}),V(a,this.options_[r]),V(a,this.options_[i]),V(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var o=Dr.getTech(e);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(tt(this,this.handleTechReady_),!0),Ft(this.textTracksJson_||[],this.tech_),Cs.forEach(function(e){n.on(n.tech_,e,n["handleTech"+gt(e)+"_"])}),Object.keys(Rs).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Rs[t]+"_"].bind(n),event:e}):n["handleTech"+Rs[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||ue(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},Ps.prototype.unloadTech_=function(){var n=this;Zn.names.forEach(function(e){var t=Zn[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=Nt(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},Ps.prototype.tech=function(e){return void 0===e&&X.warn($(As)),this.tech_},Ps.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},Ps.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_)},Ps.prototype.handleTechReady_=function(){if(this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_(),(this.src()||this.currentSrc())&&this.tag&&this.options_.autoplay&&this.paused())try{delete this.tag.poster}catch(e){X("deleting tag.poster throws in some browsers",e)}},Ps.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},Ps.prototype.manualAutoplay_=function(t){var n=this;if(this.tech_&&"string"==typeof t){function e(){var t=n.muted();n.muted(!0);var e=n.play();if(e&&e.then&&e.catch)return e.catch(function(e){n.muted(t)})}var r=void 0;if("any"===t?(r=this.play())&&r.then&&r.catch&&r.catch(function(){return e()}):r="muted"===t?e():this.play(),r&&r.then&&r.catch)return r.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(e){n.trigger({type:"autoplay-failure",autoplay:t})})}},Ps.prototype.updateSourceCaches_=function(e){var t=0<arguments.length&&void 0!==e?e:"",n=t,r="";"string"!=typeof n&&(n=t.src,r=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!r&&(r=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return qr(t)}(this,n)),this.cache_.source=mt({},t,{src:n,type:r});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===n}),a=[],o=this.$$("source"),s=[],u=0;u<o.length;u++){var l=pe(o[u]);a.push(l),l.src&&l.src===n&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=a:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},Ps.prototype.handleTechSourceset_=function(e){var r=this;if(!this.changingSrc_){var t=function(e){return r.updateSourceCaches_(e)},n=this.currentSource().src,i=e.src;n&&!/^blob:/.test(n)&&/^blob:/.test(i)&&(this.lastSource_&&(this.lastSource_.tech===i||this.lastSource_.player===n)||(t=function(){})),t(i),e.src||this.tech_.one(["sourceset","loadstart"],function e(t){if("sourceset"!==t.type){var n=r.techGet("currentSrc");r.lastSource_.tech=n,r.updateSourceCaches_(n)}r.tech_.off(["sourceset","loadstart"],e)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},Ps.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},Ps.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},Ps.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},Ps.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})},Ps.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},Ps.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},Ps.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},Ps.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},Ps.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},Ps.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(X.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},Ps.prototype.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},Ps.prototype.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},Ps.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},Ps.prototype.handleTechClick_=function(e){Ie(e)&&this.controls_&&(this.paused()?Pt(this.play()):this.pause())},Ps.prototype.handleTechTap_=function(){this.userActive(!this.userActive())},Ps.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},Ps.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},Ps.prototype.handleTechTouchEnd_=function(e){e.preventDefault()},Ps.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},Ps.prototype.handleStageClick_=function(){this.reportUserActivity()},Ps.prototype.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},Ps.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)},Ps.prototype.handleTechTextData_=function(e,t){var n=null;1<arguments.length&&(n=t),this.trigger("textdata",n)},Ps.prototype.getCache=function(){return this.cache_},Ps.prototype.techCall_=function(e,t){this.ready(function(){if(e in Ur)return function(e,t,n,r){return t[n](e.reduce(Gr(n),r))}(this.middleware_,this.tech_,e,t);if(e in jr)return Fr(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw X(e),e}},!0)},Ps.prototype.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Br)return function(e,t,n){return e.reduceRight(Gr(n),t[n]())}(this.middleware_,this.tech_,t);if(t in jr)return Fr(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw X("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw X("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw X(e),e}}},Ps.prototype.play=function(){var t=this,e=this.options_.Promise||h.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},Ps.prototype.play_=function(e){var t=this,n=0<arguments.length&&void 0!==e?e:Pt;if(this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void n(this.techGet_("play"));this.playOnLoadstart_=function(){t.playOnLoadstart_=null,n(t.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){t.playWaitingForReady_=!1,n(t.play())})}},Ps.prototype.pause=function(){this.techCall_("pause")},Ps.prototype.paused=function(){return!1!==this.techGet_("paused")},Ps.prototype.played=function(){return this.techGet_("played")||Tt(0,0)},Ps.prototype.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},Ps.prototype.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},Ps.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&((this.cache_.duration=e)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},Ps.prototype.remainingTime=function(){return this.duration()-this.currentTime()},Ps.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},Ps.prototype.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Tt(0,0)),e},Ps.prototype.bufferedPercent=function(){return Et(this.buffered(),this.duration())},Ps.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},Ps.prototype.volume=function(e){var t=void 0;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},Ps.prototype.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},Ps.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},Ps.prototype.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},Ps.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},Ps.prototype.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},Ps.prototype.requestFullscreen=function(){var n=St;this.isFullscreen(!0),n.requestFullscreen?(Ve(m,n.fullscreenchange,tt(this,function e(t){this.isFullscreen(m[n.fullscreenElement]),!1===this.isFullscreen()&&Ke(m,n.fullscreenchange,e),this.trigger("fullscreenchange")})),this.el_[n.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},Ps.prototype.exitFullscreen=function(){var e=St;this.isFullscreen(!1),e.requestFullscreen?m[e.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},Ps.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=m.documentElement.style.overflow,Ve(m,"keydown",tt(this,this.fullWindowOnEscKey)),m.documentElement.style.overflow="hidden",de(m.body,"vjs-full-window"),this.trigger("enterFullWindow")},Ps.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},Ps.prototype.exitFullWindow=function(){this.isFullWindow=!1,Ke(m,"keydown",this.fullWindowOnEscKey),m.documentElement.style.overflow=this.docOrigOverflow,ce(m.body,"vjs-full-window"),this.trigger("exitFullWindow")},Ps.prototype.canPlayType=function(e){for(var t=void 0,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=Dr.getTech(i);if(a=a||yt.getComponent(i)){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else X.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},Ps.prototype.selectSource=function(e){function t(e,n,r){var i=void 0;return e.some(function(t){return n.some(function(e){if(i=r(t,e))return!0})}),i}function n(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}}var r,i=this,a=this.options_.techOrder.map(function(e){return[e,Dr.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(X.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)});return(this.options_.sourceOrder?t(e,a,(r=n,function(e,t){return r(t,e)})):t(a,e,n))||!1},Ps.prototype.src=function(e){var n=this;if(void 0===e)return this.cache_.src||"";var r=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):K(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[Kr({src:e})]:K(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Kr(e)]:[];return e}(e);r.length?(this.changingSrc_=!0,this.cache_.sources=r,this.updateSourceCaches_(r[0]),Nr(this,r[0],function(e,t){if(n.middleware_=t,n.cache_.sources=r,n.updateSourceCaches_(e),n.src_(e))return 1<r.length?n.src(r.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void n.triggerReady());!function(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}(t,n.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},Ps.prototype.src_=function(e){var t=this,n=this.selectSource([e]);return!n||(function(e,t){return gt(e)===gt(t)}(n.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){t.changingSrc_=!1})),!1)},Ps.prototype.load=function(){this.techCall_("load")},Ps.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},Ps.prototype.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},Ps.prototype.currentSource=function(){return this.cache_.source||{}},Ps.prototype.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},Ps.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""},Ps.prototype.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},Ps.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t=void 0;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=t||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",t)},Ps.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},Ps.prototype.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},Ps.prototype.poster=function(e){if(void 0===e)return this.poster_;(e=e||"")!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},Ps.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},Ps.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},Ps.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},Ps.prototype.error=function(e){return void 0===e?this.error_||null:null===e?(this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new Mt(e),this.addClass("vjs-error"),X.error("(CODE:"+this.error_.code+" "+Mt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},Ps.prototype.reportUserActivity=function(e){this.userActivity_=!0},Ps.prototype.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},Ps.prototype.listenForUserActivity_=function(){var t=void 0,n=void 0,r=void 0,i=tt(this,this.reportUserActivity);this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(e){e.screenX===n&&e.screenY===r||(n=e.screenX,r=e.screenY,i())}),this.on("mouseup",function(e){i(),this.clearInterval(t)}),this.on("keydown",i),this.on("keyup",i);var a=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},Ps.prototype.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},Ps.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},Ps.prototype.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},Ps.prototype.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},Ps.prototype.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},Ps.prototype.removeRemoteTextTrack=function(e){var t=(0<arguments.length&&void 0!==e?e:{}).track,n=void 0===t?e:t;if(this.tech_)return this.tech_.removeRemoteTextTrack(n)},Ps.prototype.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},Ps.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},Ps.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},Ps.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},Ps.prototype.languages=function(){return mt(Ps.prototype.options_.languages,this.languages_)},Ps.prototype.toJSON=function(){var e=mt(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=mt(r)).player=void 0,e.tracks[n]=r}return e},Ps.prototype.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new Ut(this,t);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},Ps.prototype.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Is.length;n++){var r=Is[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Ms[e]),this.addClass(Ms[r]),this.breakpoint_=r;break}}},Ps.prototype.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},Ps.prototype.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=V({},Ds,e),this.updateCurrentBreakpoint_()),V(this.breakpoints_)},Ps.prototype.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},Ps.prototype.currentBreakpoint=function(){return this.breakpoint_},Ps.prototype.currentBreakpointClass=function(){return Ms[this.breakpoint_]||""},Ps.getTagSettings=function(e){var t={sources:[],tracks:[]},n=pe(e),r=n["data-setup"];if(le(e,"vjs-fill")&&(n.fill=!0),le(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=Dt(r||"{}"),a=i[0],o=i[1];a&&X.error(a),V(n,o)}if(V(t,n),e.hasChildNodes())for(var s=e.childNodes,u=0,l=s.length;u<l;u++){var d=s[u],c=d.nodeName.toLowerCase();"source"===c?t.sources.push(pe(d)):"track"===c&&t.tracks.push(pe(d))}return t},Ps.prototype.flexNotSupported_=function(){var e=m.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},Ps);function Ps(e,t,n){if(c(this,Ps),e.id=e.id||t.id||"vjs_video_"+Pe(),(t=V(Ps.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var i=e;i&&1===i.nodeType;){if(pe(i).hasOwnProperty("lang")){t.language=i.getAttribute("lang");break}i=i.parentNode}var a=f(this,Os.call(this,null,t,n));if(a.log=Q(a.id_),a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=e,a.tagAttributes=e&&pe(e),a.language(a.options_.language),t.languages){var o={};Object.getOwnPropertyNames(t.languages).forEach(function(e){o[e.toLowerCase()]=t.languages[e]}),a.languages_=o}else a.languages_=Ps.prototype.options_.languages;a.cache_={},a.poster_=t.poster||"",a.controls_=!!t.controls,a.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),e.hasAttribute("autoplay")?a.options_.autoplay=!0:a.autoplay(a.options_.autoplay),a.scrubbing_=!1,a.el_=a.createEl(),a.cache_.lastPlaybackRate=a.defaultPlaybackRate(),ft(a,{eventBusKey:"el_"});var s=mt(a.options_);if(t.plugins){var u=t.plugins;Object.keys(u).forEach(function(e){if("function"!=typeof this[e])throw new Error('plugin "'+e+'" does not exist');this[e](u[e])},a)}a.options_.playerOptions=s,a.middleware_=[],a.initChildren(),a.isAudio("audio"===e.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),S||a.addClass("vjs-workinghover"),Ps.players[a.id_]=a;var l=d.split(".")[0];return a.addClass("vjs-v"+l),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("fullscreenchange",a.handleFullscreenChange_),a.on("stageclick",a.handleStageClick_),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.changingSrc_=!1,a.playWaitingForReady_=!1,a.playOnLoadstart_=null,a}Zn.names.forEach(function(e){var t=Zn[e];ks.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ks.players={};var Ls=h.navigator;ks.prototype.options_={techOrder:Dr.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:Ls&&(Ls.languages&&Ls.languages[0]||Ls.userLanguage||Ls.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},P||ks.prototype.options_.children.push("resizeManager"),["ended","seeking","seekable","networkState","readyState"].forEach(function(e){ks.prototype[e]=function(){return this.techGet_(e)}}),Cs.forEach(function(e){ks.prototype["handleTech"+gt(e)+"_"]=function(){return this.trigger(e)}}),yt.registerComponent("Player",ks);function xs(e){return Hs.hasOwnProperty(e)}function Ns(e){return xs(e)?Hs[e]:void 0}function Fs(e,t){e[Gs]=e[Gs]||{},e[Gs][t]=!0}function Bs(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)}function Us(i,a){return a.prototype.name=i,function(){Bs(this,{name:i,plugin:a,instance:null},!0);for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new(Function.prototype.bind.apply(a,[null].concat([this].concat(t))));return this[i]=function(){return r},Bs(this,r.getEventHash()),r}}var js="plugin",Gs="activePlugins_",Hs={},qs=(Vs.prototype.version=function(){return this.constructor.VERSION},Vs.prototype.getEventHash=function(e){var t=0<arguments.length&&void 0!==e?e:{};return t.name=this.name,t.plugin=this.constructor,t.instance=this,t},Vs.prototype.trigger=function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return Ye(this.eventBusEl_,e,this.getEventHash(n))},Vs.prototype.handleStateChanged=function(e){},Vs.prototype.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Gs][e]=!1,this.player=this.state=null,t[e]=Us(e,Hs[e])},Vs.isBasic=function(e){var t="string"==typeof e?Ns(e):e;return"function"==typeof t&&!Vs.prototype.isPrototypeOf(t.prototype)},Vs.registerPlugin=function(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+(void 0===e?"undefined":j(e))+".");if(xs(e))X.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(ks.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+(void 0===t?"undefined":j(t))+".");return Hs[e]=t,e!==js&&(Vs.isBasic(t)?ks.prototype[e]=function(t,n){function r(){Bs(this,{name:t,plugin:n,instance:null},!0);var e=n.apply(this,arguments);return Fs(this,t),Bs(this,{name:t,plugin:n,instance:e}),e}return Object.keys(n).forEach(function(e){r[e]=n[e]}),r}(e,t):ks.prototype[e]=Us(e,t)),t},Vs.deregisterPlugin=function(e){if(e===js)throw new Error("Cannot de-register base plugin.");xs(e)&&(delete Hs[e],delete ks.prototype[e])},Vs.getPlugins=function(e){var t=0<arguments.length&&void 0!==e?e:Object.keys(Hs),n=void 0;return t.forEach(function(e){var t=Ns(e);t&&((n=n||{})[e]=t)}),n},Vs.getPluginVersion=function(e){var t=Ns(e);return t&&t.VERSION||""},Vs);function Vs(e){if(c(this,Vs),this.constructor===Vs)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,ft(this),delete this.trigger,pt(this,this.constructor.defaultState),Fs(e,this.name),this.dispose=tt(this,this.dispose),e.on("dispose",this.dispose)}qs.getPlugin=Ns,qs.BASE_PLUGIN_NAME=js,qs.registerPlugin(js,qs),ks.prototype.usingPlugin=function(e){return!!this[Gs]&&!0===this[Gs][e]},ks.prototype.hasPlugin=function(e){return!!xs(e)};"undefined"==typeof HTMLVideoElement&&ne()&&(m.createElement("video"),m.createElement("audio"),m.createElement("track"),m.createElement("video-js"));var Ks=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Ys(e,n,t){var r=Ys.getPlayer(e);if(r)return n&&X.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&r.ready(t),r;var i="string"==typeof e?Me("#"+Ks(e)):e;if(!re(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");m.body.contains(i)||X.warn("The element supplied is not included in the DOM"),n=n||{},Ys.hooks("beforesetup").forEach(function(e){var t=e(i,mt(n));K(t)&&!Array.isArray(t)?n=mt(n,t):X.error("please return an object in beforesetup hooks")});var a=yt.getComponent("Player");return r=new a(i,n,t),Ys.hooks("setup").forEach(function(e){return e(r)}),r}if(Ys.hooks_={},Ys.hooks=function(e,t){return Ys.hooks_[e]=Ys.hooks_[e]||[],t&&(Ys.hooks_[e]=Ys.hooks_[e].concat(t)),Ys.hooks_[e]},Ys.hook=function(e,t){Ys.hooks(e,t)},Ys.hookOnce=function(n,e){Ys.hooks(n,[].concat(e).map(function(t){return function e(){return Ys.removeHook(n,e),t.apply(void 0,arguments)}}))},Ys.removeHook=function(e,t){var n=Ys.hooks(e).indexOf(t);return!(n<=-1)&&(Ys.hooks_[e]=Ys.hooks_[e].slice(),Ys.hooks_[e].splice(n,1),!0)},!0!==h.VIDEOJS_NO_DYNAMIC_STYLE&&ne()){var Ws=Me(".vjs-styles-defaults");if(!Ws){Ws=Ze("vjs-styles-defaults");var zs=Me("head");zs&&zs.insertBefore(Ws,zs.firstChild),et(Ws,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}return Je(1,Ys),Ys.VERSION=d,Ys.options=ks.prototype.options_,Ys.getPlayers=function(){return ks.players},Ys.getPlayer=function(e){var t=ks.players,n=void 0;if("string"==typeof e){var r=Ks(e),i=t[r];if(i)return i;n=Me("#"+r)}else n=e;if(re(n)){var a=n,o=a.player,s=a.playerId;if(o||t[s])return o||t[s]}},Ys.getAllPlayers=function(){return Object.keys(ks.players).map(function(e){return ks.players[e]}).filter(Boolean)},Ys.players=ks.players,Ys.getComponent=yt.getComponent,Ys.registerComponent=function(e,t){Dr.isTech(t)&&X.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),yt.registerComponent.call(yt,e,t)},Ys.getTech=Dr.getTech,Ys.registerTech=Dr.registerTech,Ys.use=function(e,t){Pr[e]=Pr[e]||[],Pr[e].push(t)},!P&&Object.defineProperty?(Object.defineProperty(Ys,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ys.middleware,"TERMINATOR",{value:xr,writeable:!1,enumerable:!0})):Ys.middleware={TERMINATOR:xr},Ys.browser=U,Ys.TOUCH_ENABLED=F,Ys.extend=function(e,t){var n=1<arguments.length&&void 0!==t?t:{},r=function(){e.apply(this,arguments)},i={};for(var a in"object"===(void 0===n?"undefined":j(n))?(n.constructor!==Object.prototype.constructor&&(r=n.constructor),i=n):"function"==typeof n&&(r=n),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":j(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(r,e),i)i.hasOwnProperty(a)&&(r.prototype[a]=i[a]);return r},Ys.mergeOptions=mt,Ys.bind=tt,Ys.registerPlugin=qs.registerPlugin,Ys.deregisterPlugin=qs.deregisterPlugin,Ys.plugin=function(e,t){return X.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),qs.registerPlugin(e,t)},Ys.getPlugins=qs.getPlugins,Ys.getPlugin=qs.getPlugin,Ys.getPluginVersion=qs.getPluginVersion,Ys.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Ys.options.languages=mt(Ys.options.languages,((n={})[e]=t,n)),Ys.options.languages[e]},Ys.log=X,Ys.createLogger=Q,Ys.createTimeRange=Ys.createTimeRanges=Tt,Ys.formatTime=Ai,Ys.setFormatTime=function(e){wi=e},Ys.resetFormatTime=function(){wi=Si},Ys.parseUrl=pn,Ys.isCrossOrigin=yn,Ys.EventTarget=rt,Ys.on=Ve,Ys.one=We,Ys.off=Ke,Ys.trigger=Ye,Ys.xhr=Ln,Ys.TextTrack=jn,Ys.AudioTrack=qn,Ys.VideoTrack=Yn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Ys[e]=function(){return X.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),De[e].apply(null,arguments)}}),Ys.computedStyle=J,Ys.dom=De,Ys.url=vn,Ys}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsContribMediaSources=e()}}(function(){return function a(o,s,u){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,a,o,s,u)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(r,i,o){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});function n(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}var a=t(r("global/window")),s=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);o.default={addTextTrackData:function(r,e,t){var o,i=a.default.WebKitDataCue||a.default.VTTCue;e&&e.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},r),t&&(o=n(r.mediaSource_.duration),t.forEach(function(e){var n=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var t=new i(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return s.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return s.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return s.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(t),this.metadataTrack_.addCue(t)},this)},r),r.metadataTrack_&&r.metadataTrack_.cues&&r.metadataTrack_.cues.length&&function(){for(var e=r.metadataTrack_.cues,t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);var i=t.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),a=Object.keys(i).sort(function(e,t){return Number(e)-Number(t)});a.forEach(function(e,t){var n=i[e],r=Number(a[t+1])||o;n.forEach(function(e){e.endTime=r})})}())},durationOfVideo:n},i.exports=o.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":14}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={isAudioCodec:function(e){return/mp4a\.\d+.\d+/i.test(e)},parseContentType:function(e){var i={type:"",parameters:{}},t=e.trim().split(";");return i.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),r=t[1].replace(/"/g,"").trim();i.parameters[n]=r}}),i},isVideoCodec:function(e){return/avc1\.[\da-f]+/i.test(e)},translateLegacyCodecs:function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}},t.exports=n.default},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t,n){var r=t.player_;if(n.captions&&n.captions.length)for(var i in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);e.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},t.exports=n.default},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},t.exports=n.default},{}],5:[function(f,h,p){(function(e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var i=n(f("global/document")),a=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=n(f("./flash-source-buffer")),s=n(f("./flash-constants")),u=f("./codec-utils"),l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,a.default.EventTarget),t(d,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(e){var t=(0,u.parseContentType)(e),n=void 0;if("video/mp2t"!==t.type&&"audio/mp2t"!==t.type)throw new Error("NotSupportedError (Video.js)");return n=new o.default(this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),d);function d(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(e){t.swfObj=i.default.getElementById(e.swfId),t.player_=(0,a.default)(t.swfObj.parentNode),t.tech_=t.swfObj.tech,t.readyState="open",t.tech_.on("seeking",function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()}),t.swfObj&&t.swfObj.vjs_load()})}p.default=l;try{Object.defineProperty(l.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(e){var t=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),e<n)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(e){l.prototype.duration=NaN}for(var c in s.default)l[c]=s.default[c];h.exports=p.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":2,"./flash-constants":4,"./flash-source-buffer":6,"global/document":13}],6:[function(v,_,b){(function(e){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){u.default.setTimeout(e,g.default.TIME_BETWEEN_CHUNKS)}function a(){return Math.random().toString(36).slice(2,8)}function o(e,t){("number"!=typeof t||t<0)&&(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n}var u=n(v("global/window")),l=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),d=n(v("mux.js/lib/flv")),c=n(v("./remove-cues-from-track")),i=n(v("./create-text-tracks-if-necessary")),f=v("./add-text-track-data"),h=n(v("./flash-transmuxer-worker")),p=n(v("webwackify")),g=n(v("./flash-constants")),m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,l.default.EventTarget),t(y,[{key:"appendBuffer",value:function(e){var t=void 0;if(this.updating)throw(t=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",t.code=11,t;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){if((0,c.default)(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,c.default)(e,t,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(t){var n=this;(0,i.default)(this,this.mediaSource_,t),(0,f.addTextTrackData)(this,t.captions,t.metadata),s(function(){var e=n.convertTagsToData_(t);0===n.buffer_.length&&s(n.processBuffer_.bind(n)),e&&(n.buffer_.push(e),n.bufferSize_+=e.byteLength)})}},{key:"processBuffer_",value:function(){var e=this,t=g.default.BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,t);n.byteLength<t||this.buffer_[0].byteLength===t?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(t),this.bufferSize_-=n.byteLength;for(var r=[],i=n.byteLength,a=0;a<i;a++)r.push(String.fromCharCode(n[a]));var o=u.default.btoa(r.join(""));u.default[this.flashEncodedDataName_]=function(){return s(e.processBuffer_.bind(e)),delete u.default[e.flashEncodedDataName_],o},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource_.tech_,r=0,i=void 0,a=e.tags.videoTags,o=e.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(a.length||o.length)){var s=a[0]||{pts:1/0},u=o[0]||{pts:1/0};this.basePtsOffset_=Math.min(u.pts,s.pts)}n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(r=Math.max(r,n.currentTime()-this.timestampOffset)),r*=1e3,r+=this.basePtsOffset_):r=this.videoBufferEnd_+.1;var l=a.length;if(l&&a[l-1].pts>=r){for(;--l;){var d=a[l];if(!(d.pts>r)&&(d.keyFrame||d.metaDataTag))break}for(;l&&a[l-1].metaDataTag;)l--}var c=a.slice(l),f=void 0;for(f=isNaN(this.audioBufferEnd_)?r:this.audioBufferEnd_+.1,c.length&&(f=Math.min(f,c[0].pts)),l=0;l<o.length&&!(o[l].pts>=f);)l++;var h=o.slice(l);h.length&&(this.audioBufferEnd_=h[h.length-1].pts),c.length&&(this.videoBufferEnd_=c[c.length-1].pts);var p=this.getOrderedTags_(c,h);if(0!==p.length){if(p[0].pts<r&&n.seeking()){var g=n.currentTime()-(r-p[0].pts)/1e3;g<1/30&&(g=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(g)}catch(e){}}for(var m=0;m<p.length;m++)t+=p[m].bytes.byteLength;i=new Uint8Array(t);for(var y=m=0;m<p.length;m++)i.set(p[m].bytes,y),y+=p[m].bytes.byteLength;return i}}},{key:"getOrderedTags_",value:function(e,t){for(var n=void 0,r=[];e.length||t.length;)n=e.length?t.length&&t[0].dts<e[0].dts?t.shift():e.shift():t.shift(),r.push(n);return r}},{key:"onHlsReset_",value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),y);function y(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(y.prototype),"constructor",this).call(this);var n;this.chunkSize_=g.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=e,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=u.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(d.default.getFlvHeader())));var r=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+r+a(),this.flashEncodedDataName_="vjs_flashEncodedData_"+r+a(),u.default[this.flashEncodedHeaderName_]=function(){return delete u.default[t.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,p.default)(h.default,function(){var e=void 0;try{e=v.resolve("./flash-transmuxer-worker")}catch(e){}return e}()),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(e){"data"===e.data.action&&t.receiveBuffer_(e.data.segment)},this.one("updateend",function(){t.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return l.default.createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=o(e[0][0],3),e[0][1]=o(e[0][1],3)),l.default.createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){if((0,c.default)(0,1/0,t.metadataTrack_),t.inbandTextTracks_)for(var e in t.inbandTextTracks_)(0,c.default)(0,1/0,t.inbandTextTracks_[e])});var i=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",i),this.mediaSource_.player_.tech_.hls.on("dispose",function(){t.transmuxer_.terminate(),t.mediaSource_.player_.tech_.off("hls-reset",i)})}b.default=m,_.exports=b.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./create-text-tracks-if-necessary":3,"./flash-constants":4,"./flash-transmuxer-worker":7,"./remove-cues-from-track":9,"global/window":14,"mux.js/lib/flv":22,webwackify:36}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}var o=a(e("global/window")),s=a(e("mux.js/lib/flv")),u=(r(l,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s.default.Transmuxer(this.options),function(e){e.on("data",function(e){o.default.postMessage({action:"data",segment:e})}),e.on("done",function(e){o.default.postMessage({action:"done"})})}(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.options=e||{},this.init()}function d(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new u(e.data.options):(this.messageHandlers||(this.messageHandlers=new u),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}n.default=function(e){return new d(e)},t.exports=n.default},{"global/window":14,"mux.js/lib/flv":22}],8:[function(f,h,p){(function(e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var i=n(f("global/window")),o=n(f("global/document")),s=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=n(f("./virtual-source-buffer")),u=f("./add-text-track-data"),l=f("./codec-utils"),d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s.default.EventTarget),t(c,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=(0,l.parseContentType)(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(r=(0,l.translateLegacyCodecs)(r)).filter(function(e){return(0,l.isAudioCodec)(e)||(0,l.isVideoCodec)(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new a.default(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),c);function c(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);var e=void 0;for(e in this.nativeMediaSource_=new i.default.MediaSource,this.nativeMediaSource_)e in c.prototype||"function"!=typeof this.nativeMediaSource_[e]||(this[e]=this.nativeMediaSource_[e].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?s.default.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,r=0;r<a.player_.audioTracks().length;r++){var i=a.player_.audioTracks()[r];if(i.enabled&&"main"!==i.kind){n=!(t=!0);break}}a.sourceBuffers.forEach(function(e){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=n))return;a.activeSourceBuffers_.push(e)})},this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(e){var t=o.default.querySelector('[src="'+a.url_+'"]');t&&(a.player_=(0,s.default)(t.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))}),this.on("sourceended",function(e){for(var t=(0,u.durationOfVideo)(a.duration),n=0;n<a.sourceBuffers.length;n++){var r=a.sourceBuffers[n],i=r.metadataTrack_&&r.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=t)}}),this.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}p.default=d,h.exports=p.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./codec-utils":2,"./virtual-source-buffer":11,"global/document":13,"global/window":14}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=t&&i.endTime>=e&&n.removeCue(i)},t.exports=n.default},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}var o=a(e("global/window")),s=a(e("mux.js/lib/mp4")),u=(r(l,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s.default.Transmuxer(this.options),function(e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,o.default.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){o.default.postMessage({action:"caption",data:e})}),e.on("done",function(e){o.default.postMessage({action:"done"})}),e.on("gopInfo",function(e){o.default.postMessage({action:"gopInfo",gopInfo:e})})}(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.options=e||{},this.init()}function d(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new u(e.data.options):(this.messageHandlers||(this.messageHandlers=new u),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}n.default=function(e){return new d(e)},t.exports=n.default},{"global/window":14,"mux.js/lib/mp4":30}],11:[function(m,e,y){(function(e){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!t||!e.length)return[];var r=Math.ceil(9e4*(t.currentTime()-n+3)),i=void 0;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}var u=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=n(m("./create-text-tracks-if-necessary")),o=n(m("./remove-cues-from-track")),s=m("./add-text-track-data"),l=n(m("webwackify")),d=n(m("./transmuxer-worker")),c=m("./codec-utils");y.gopsSafeToAlignWith=i;function f(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}y.updateGopBuffer=f;function h(e,t,n,r){for(var i=Math.ceil(9e4*(t-r)),a=Math.ceil(9e4*(n-r)),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var u=s+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),o.splice(u,s-u+1),o}y.removeGopBuffer=h;var p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,u.default.EventTarget),t(g,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),(0,a.default)(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var r=this,i=["audio","video"];i.forEach(function(t){if(r[t+"Codec_"]&&!r[t+"Buffer_"]){var n=null;if(r.mediaSource_[t+"Buffer_"])(n=r.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+r[t+"Codec_"]+'"';n=function(e,t){var n=e.addSourceBuffer(t),r=Object.create(null);function i(t){"function"==typeof n[t]?r[t]=function(){return n[t].apply(n,arguments)}:void 0===r[t]&&Object.defineProperty(r,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})}for(var a in r.updating=!1,r.realBuffer_=n)i(a);return r}(r.mediaSource_.nativeMediaSource_,e),r.mediaSource_[t+"Buffer_"]=n}r[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!r.audioDisabled_)return"updateend"===e&&(r[t+"Buffer_"].updating=!1),i.every(function(e){return!("audio"!==e||!r.audioDisabled_)||t===e||!r[e+"Buffer_"]||!r[e+"Buffer_"].updating})?r.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:i(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=f(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=h(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),(0,o.default)(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,o.default)(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,r=t.data,i=t.initSegment;return e[n].segments.push(r),e[n].bytes+=r.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),(0,s.addTextTrackData)(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(r)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),g);function g(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,u.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=t,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=11<=u.default.browser.IE_VERSION;var r={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(e){(0,c.isAudioCodec)(e)?n.audioCodec_=e:(0,c.isVideoCodec)(e)&&(n.videoCodec_=e)}),this.transmuxer_=(0,l.default)(d.default,function(){var e=void 0;try{e=m.resolve("./transmuxer-worker")}catch(e){}return e}()),this.transmuxer_.postMessage({action:"init",options:r}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,r=[],i=[];if(!this.videoBuffer_&&!this.audioBuffer_)return u.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return u.default.createTimeRange();for(var a=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,s=a.length;s--;)r.push({time:a.start(s),type:"start"}),r.push({time:a.end(s),type:"end"});for(s=o.length;s--;)r.push({time:o.start(s),type:"start"}),r.push({time:o.end(s),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),s=0;s<r.length;s++)"start"===r[s].type?2===++n&&(e=r[s].time):"end"===r[s].type&&1===--n&&(t=r[s].time),null!==e&&null!==t&&(i.push([e,t]),t=e=null);return u.default.createTimeRanges(i)}})}y.default=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":1,"./codec-utils":2,"./create-text-tracks-if-necessary":3,"./remove-cues-from-track":9,"./transmuxer-worker":10,webwackify:36}],12:[function(e,t,n){},{}],13:[function(i,a,e){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},r=i("min-document");t="undefined"!=typeof document?document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(n["__GLOBAL_DOCUMENT_CACHE@4"]=r),a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":12}],14:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js");(r=function(){var s=new Uint8Array,u=0;r.prototype.init.call(this),this.setTimestamp=function(e){u=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},this.push=function(e){var t,n,r,i,a=0,o=0;for(s.length?(i=s.length,(s=new Uint8Array(e.byteLength+i)).set(s.subarray(0,i)),s.set(e,i)):s=e;3<=s.length-o;)if(s[o]!=="I".charCodeAt(0)||s[o+1]!=="D".charCodeAt(0)||s[o+2]!=="3".charCodeAt(0))if(!0&s[o]&&240==(240&s[o+1])){if(s.length-o<7)break;if((a=this.parseAdtsSize(s,o))>s.length)break;r={type:"audio",data:s.subarray(o,o+a),pts:u,dts:u},this.trigger("data",r),o+=a}else o++;else{if(s.length-o<10)break;if((a=this.parseId3TagSize(s,o))>s.length)break;n={type:"timed-metadata",data:s.subarray(o,o+a)},this.trigger("data",n),o+=a}t=s.length-o,s=0<t?s.subarray(o):new Uint8Array}}).prototype=new i,t.exports=r},{"../utils/stream.js":35}],16:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js"),d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(r=function(){var l;r.prototype.init.call(this),this.push=function(e){var t,n,r,i,a,o,s=0,u=0;if("audio"===e.type)for(l?(i=l,(l=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),l.set(e.data,i.byteLength)):l=e.data;s+5<l.length;)if(255===l[s]&&240==(246&l[s+1])){if(n=2*(1&~l[s+1]),t=(3&l[s+3])<<11|l[s+4]<<3|(224&l[s+5])>>5,o=9e4*(a=1024*(1+(3&l[s+6])))/d[(60&l[s+2])>>>2],r=s+t,l.byteLength<r)return;if(this.trigger("data",{pts:e.pts+u*o,dts:e.dts+u*o,sampleCount:a,audioobjecttype:1+(l[s+2]>>>6&3),channelcount:(1&l[s+2])<<2|(192&l[s+3])>>>6,samplerate:d[(60&l[s+2])>>>2],samplingfrequencyindex:(60&l[s+2])>>>2,samplesize:16,data:l.subarray(s+7+n,r)}),l.byteLength===r)return void(l=void 0);u++,l=l.subarray(r)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new i,t.exports=r},{"../utils/stream.js":35}],17:[function(e,t,n){"use strict";var u,l,b,r=e("../utils/stream.js"),T=e("../utils/exp-golomb.js");(l=function(){var n,r,i=0;l.prototype.init.call(this),this.push=function(e){var t;for(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data;i<r.byteLength-3;i++)if(1===r[i+2]){n=i+5;break}for(;n<r.byteLength;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}for(i+3!==n-2&&this.trigger("data",r.subarray(i+3,n-2));1!==r[++n]&&n<r.length;);i=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}this.trigger("data",r.subarray(i+3,n-2)),i=n-2,n+=3;break;default:n+=3}r=r.subarray(i),n-=i,i=0},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(i+3)),r=null,i=0,this.trigger("done")}}).prototype=new r,b={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(u=function(){var n,r,i,a,o,s,_,t=new l;u.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(r=e.trackId,i=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:r,pts:i,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=s(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),this.flush=function(){t.flush()},_=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},o=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},s=function(e){var t,n,r,i,a,o,s,u,l,d,c,f,h,p=0,g=0,m=0,y=0,v=1;if(n=(t=new T(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),b[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(c=3!==a?8:12,h=0;h<c;h++)t.readBoolean()&&_(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),s=t.readUnsignedExpGolomb(),h=0;h<s;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:f=[1,1];break;case 2:f=[12,11];break;case 3:f=[10,11];break;case 4:f=[16,11];break;case 5:f=[40,33];break;case 6:f=[24,11];break;case 7:f=[20,11];break;case 8:f=[32,11];break;case 9:f=[80,33];break;case 10:f=[18,11];break;case 11:f=[15,11];break;case 12:f=[64,33];break;case 13:f=[160,99];break;case 14:f=[4,3];break;case 15:f=[3,2];break;case 16:f=[2,1];break;case 255:f=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}f&&(v=f[0]/f[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(u+1)-2*p-2*g)*v),height:(2-d)*(l+1)*16-2*m-2*y}}}).prototype=new r,t.exports={H264Stream:u,NalByteStream:l}},{"../utils/exp-golomb.js":34,"../utils/stream.js":35}],18:[function(e,t,n){function r(e){for(var t=[];e--;)t.push(0);return t}var i,a=[33,16,5,32,164,27],o=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],s={96e3:[a,[227,64],r(154),[56]],88200:[a,[231],r(170),[56]],64e3:[a,[248,192],r(240),[56]],48e3:[a,[255,192],r(268),[55,148,128],r(54),[112]],44100:[a,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[a,[255,192],r(268),[55,234],r(226),[112]],24e3:[a,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[a,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[o,r(268),[3,121,16],r(47),[7]]};t.exports=(i=s,Object.keys(i).reduce(function(e,t){return e[t]=new Uint8Array(i[t].reduce(function(e,t){return e.concat(t)},[])),e},{}))},{}],19:[function(e,t,n){"use strict";var r=e("../utils/stream.js"),i=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};i.prototype=new r,i.prototype.flush=function(e){var t,n,r,i,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?i=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(i=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(n=this.pendingCaptions[r]).startTime=n.startPts-i,n.startTime/=9e4,n.endTime=n.endPts-i,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)(t=this.pendingMetadata[r]).cueTime=t.pts-i,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},t.exports=i},{"../utils/stream.js":35}],20:[function(e,t,n){"use strict";var u=e("./flv-tag.js");t.exports=function(e,t,n){var r,i,a,o=new Uint8Array(9),s=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),e<=0?((i=new Uint8Array(o.byteLength+4)).set(o),i.set([0,0,0,0],o.byteLength)):((r=new u(u.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",e),a=r.finalize().length,(i=new Uint8Array(o.byteLength+a)).set(o),i.set(s.byteLength,a)),i}},{"./flv-tag.js":21}],21:[function(e,t,n){"use strict";var l;(l=function(e,n){function a(e,t){var n,r=e.position+t;r<e.bytes.byteLength||((n=new Uint8Array(2*r)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))}var t,r=0,i=16384,o=l.widthBytes||new Uint8Array("width".length),s=l.heightBytes||new Uint8Array("height".length),u=l.videocodecidBytes||new Uint8Array("videocodecid".length);if(!l.widthBytes){for(t=0;t<"width".length;t++)o[t]="width".charCodeAt(t);for(t=0;t<"height".length;t++)s[t]="height".charCodeAt(t);for(t=0;t<"videocodecid".length;t++)u[t]="videocodecid".charCodeAt(t);l.widthBytes=o,l.heightBytes=s,l.videocodecidBytes=u}switch(this.keyFrame=!1,e){case l.VIDEO_TAG:this.length=16,i*=6;break;case l.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case l.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(i),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r,i=t||0;r=i+(n=n||e.byteLength),a(this,n),this.bytes.set(e.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(0<r)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:0<r&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,t;switch(this.bytes[0]){case l.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case l.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case l.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return t=this.length-11,this.bytes[1]=(16711680&t)>>>16,this.bytes[2]=(65280&t)>>>8,this.bytes[3]=(255&t)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=l.frameTime(this.bytes),this}}).AUDIO_TAG=8,l.VIDEO_TAG=9,l.METADATA_TAG=18,l.isAudioFrame=function(e){return l.AUDIO_TAG===e[0]},l.isVideoFrame=function(e){return l.VIDEO_TAG===e[0]},l.isMetaData=function(e){return l.METADATA_TAG===e[0]},l.isKeyFrame=function(e){return l.isVideoFrame(e)?23===e[11]:!!l.isAudioFrame(e)||!!l.isMetaData(e)},l.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=l},{}],22:[function(e,t,n){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),getFlvHeader:e("./flv-header")}},{"./flv-header":20,"./flv-tag":21,"./transmuxer":24}],23:[function(e,t,n){"use strict";t.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},{}],24:[function(e,t,n){"use strict";var p,g,m,r,s,u,i=e("../utils/stream.js"),l=e("./flv-tag.js"),y=e("../m2ts/m2ts.js"),v=e("../codecs/adts.js"),_=e("../codecs/h264").H264Stream,b=e("./coalesce-stream.js"),d=e("./tag-list.js");r=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},s=function(e,t){var n=new l(l.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},u=function(e,t){var n,r=new l(l.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),n=0;n<e.pps.length;++n)r.writeShort(e.pps[n].length),r.writeBytes(e.pps[n]);return r},(m=function(i){var a,o=[],s=[];m.prototype.init.call(this),this.push=function(e){r(i,e),i&&(i.audioobjecttype=e.audioobjecttype,i.channelcount=e.channelcount,i.samplerate=e.samplerate,i.samplingfrequencyindex=e.samplingfrequencyindex,i.samplesize=e.samplesize,i.extraData=i.audioobjecttype<<11|i.samplingfrequencyindex<<7|i.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),o.push(e)},this.flush=function(){var e,t,n,r=new d;if(0!==o.length){for(n=-1/0;o.length;)e=o.shift(),s.length&&e.pts>=s[0]&&(n=s.shift(),this.writeMetaDataTags(r,n)),(i.extraData!==a||1e3<=e.pts-n)&&(this.writeMetaDataTags(r,e.pts),a=i.extraData,n=e.pts),(t=new l(l.AUDIO_TAG)).pts=e.pts,t.dts=e.dts,t.writeBytes(e.data),r.push(t.finalize());s.length=0,a=null,this.trigger("data",{track:i,tags:r.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,t){var n;(n=new l(l.METADATA_TAG)).pts=t,n.dts=t,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===i.channelcount),n.writeMetaDataDouble("audiosamplerate",i.samplerate),n.writeMetaDataDouble("audiosamplesize",16),e.push(n.finalize()),(n=new l(l.AUDIO_TAG,!0)).pts=t,n.dts=t,n.view.setUint16(n.position,i.extraData),n.position+=2,n.length=Math.max(n.length,n.position),e.push(n.finalize())},this.onVideoKeyFrame=function(e){s.push(e)}}).prototype=new i,(g=function(i){var a,o,n=[];g.prototype.init.call(this),this.finishFrame=function(e,t){if(t){if(a&&i&&i.newMetadata&&(t.keyFrame||0===e.length)){var n=s(a,t.dts).finalize(),r=u(i,t.dts).finalize();n.metaDataTag=r.metaDataTag=!0,e.push(n),e.push(r),i.newMetadata=!1,this.trigger("keyframe",t.dts)}t.endNalUnit(),e.push(t.finalize()),o=null}},this.push=function(e){r(i,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var e,t=new d;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(e=n.shift()).nalUnitType?(i.newMetadata=!0,a=e.config,i.width=a.width,i.height=a.height,i.sps=[e.data],i.profileIdc=a.profileIdc,i.levelIdc=a.levelIdc,i.profileCompatibility=a.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===e.nalUnitType?(i.newMetadata=!0,i.pps=[e.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===e.nalUnitType?(o&&this.finishFrame(t,o),(o=new l(l.VIDEO_TAG)).pts=e.pts,o.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(e.data);o&&this.finishFrame(t,o),this.trigger("data",{track:i,tags:t.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new i,(p=function(e){var t,n,r,i,a,o,s,u,l,d,c,f,h=this;p.prototype.init.call(this),e=e||{},this.metadataStream=new y.MetadataStream,e.metadataStream=this.metadataStream,t=new y.TransportPacketStream,n=new y.TransportParseStream,r=new y.ElementaryStream,i=new y.TimestampRolloverStream("video"),a=new y.TimestampRolloverStream("audio"),o=new y.TimestampRolloverStream("timed-metadata"),s=new v,u=new _,f=new b(e),t.pipe(n).pipe(r),r.pipe(i).pipe(u),r.pipe(a).pipe(s),r.pipe(o).pipe(this.metadataStream).pipe(f),c=new y.CaptionStream,u.pipe(c).pipe(f),r.on("data",function(e){var t,n,r;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(r=e.tracks[t]);n&&!l&&(f.numberOfTracks++,l=new g(n),u.pipe(l).pipe(f)),r&&!d&&(f.numberOfTracks++,d=new m(r),s.pipe(d).pipe(f),l&&l.on("keyframe",d.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){c.reset()},f.on("data",function(e){h.trigger("data",e)}),f.on("done",function(){h.trigger("done")})}).prototype=new i,t.exports=p},{"../codecs/adts.js":16,"../codecs/h264":17,"../m2ts/m2ts.js":26,"../utils/stream.js":35,"./coalesce-stream.js":19,"./flv-tag.js":21,"./tag-list.js":23}],25:[function(e,t,n){"use strict";var r=e("../utils/stream"),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new o(0,0),new o(0,1),new o(1,0),new o(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};i.prototype=new r,i.prototype.push=function(e){var t,n;"sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,i=r=0}return n}(e.escapedRBSP)).payloadType&&(n=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[2+i]&&(a.ccData=t[3+i]<<8|t[4+i],o.push(a));return o}(e.pts,n)),this.latestDts_=e.dts))},i.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},i.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},i.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},i.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};function s(e){return null===e?"":(e=a[e]||e,String.fromCharCode(e))}function u(){for(var e=[],t=15;t--;)e.push("");return e}var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],o=function(e,t){o.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(t===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(t===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=u();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(t===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(r,i))a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=l.indexOf(7968&t);o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=s(r),a+=s(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};o.prototype=new r,o.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},o.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},o.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},o.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},o.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},o.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},o.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},o.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},o.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},o.prototype.isNormalChar=function(e){return 32<=e&&e<=127},o.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},o.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},o.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},o.prototype.rollUp=function(e,t){var n=this.displayed_[14];n+=t,this.displayed_[14]=n},o.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<14;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[14]=""},o.prototype.paintOn=function(){},t.exports={CaptionStream:i,Cea608Stream:o}},{"../utils/stream":35}],26:[function(e,t,n){"use strict";var r,s,u,i=e("../utils/stream.js"),a=e("./caption-stream"),d=e("./stream-types"),o=e("./timestamp-rollover-stream").TimestampRolloverStream,c=e("./stream-types.js");(r=function(){var i=new Uint8Array(188),a=0;r.prototype.init.call(this),this.push=function(e){var t,n=0,r=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(i.subarray(0,a)),t.set(e,a),a=0):t=e;r<t.byteLength;)71!==t[n]||71!==t[r]?(n++,r++):(this.trigger("data",t.subarray(n,r)),n+=188,r+=188);n<t.byteLength&&(i.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){188===a&&71===i[0]&&(this.trigger("data",i),a=0),this.trigger("done")}}).prototype=new i,(s=function(){var r,i,a,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,r=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?i(e.subarray(n),t):a(e.subarray(n),t)},i=function(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},a=function(e,t){var n,r;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var i=e[r],a=(31&e[r+1])<<8|e[r+2];i===d.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:i===d.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:i===d.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=i),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",r(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",r(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=d.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=d.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new i,s.STREAM_TYPES={h264:27,adts:15},(u=function(){function r(e,t,n){var r,i,a=new Uint8Array(e.size),o={type:t},s=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,s=0;s<e.data.length;s++)i=e.data[s],a.set(i.data,u),u+=i.data.byteLength;!function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])}(a,o),r="video"===t||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&l.trigger("data",o)}}var l=this,i={data:[],size:0},a={data:[],size:0},o={data:[],size:0};u.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case d.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:e=i,t="video";break;case d.ADTS_STREAM_TYPE:e=a,t="audio";break;case d.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&r(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=n.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),l.trigger("data",e)}})[n.type]()},this.flush=function(){r(i,"video"),r(a,"audio"),r(o,"timed-metadata"),this.trigger("done")}}).prototype=new i;var l={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:r,TransportParseStream:s,ElementaryStream:u,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var f in d)d.hasOwnProperty(f)&&(l[f]=d[f]);t.exports=l},{"../utils/stream.js":35,"./caption-stream":25,"./metadata-stream":27,"./stream-types":28,"./stream-types.js":28,"./timestamp-rollover-stream":29}],27:[function(e,t,n){"use strict";function r(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}function i(e,t,n){return decodeURIComponent(r(e,t,n))}function f(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var a,o=e("../utils/stream"),s=e("./stream-types"),h={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.value=i(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.url=i(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(r(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(a=function(e){var t,u={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},l=0,d=[],c=0;if(a.prototype.init.call(this),this.dispatchType=s.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(t=0;t<u.descriptor.length;t++)this.dispatchType+=("00"+u.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,r,i,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(c=0,d.length=0),0===d.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))u.debug&&console.log("Skipping unrecognized metadata packet");else if(d.push(e),c+=e.data.byteLength,1===d.length&&(l=f(e.data.subarray(6,10)),l+=10),!(c<l)){for(t={data:new Uint8Array(l),frames:[],pts:d[0].pts,dts:d[0].dts},a=0;a<l;)t.data.set(d[0].data.subarray(0,l-a),a),a+=d[0].data.byteLength,c-=d[0].data.byteLength,d.shift();n=10,64&t.data[5]&&(n+=4,n+=f(t.data.subarray(10,14)),l-=f(t.data.subarray(16,20)));do{if((r=f(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((i={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+r+10)}).key=i.id,h[i.id]&&(h[i.id](i),"com.apple.streaming.transportStreamTimestamp"===i.owner)){var o=i.data,s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;s*=4,s+=3&o[7],i.timeStamp=s,void 0===t.pts&&void 0===t.dts&&(t.pts=i.timeStamp,t.dts=i.timeStamp),this.trigger("timestamp",i)}t.frames.push(i),n+=10,n+=r}while(n<l);this.trigger("data",t)}}}).prototype=new o,t.exports=a},{"../utils/stream":35,"./stream-types":28}],28:[function(e,t,n){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],29:[function(e,t,n){"use strict";function r(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}var i=e("../utils/stream"),a=function(e){var t,n;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=r(e.dts,n),e.pts=r(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){t=n=void 0}};a.prototype=new i,t.exports={TimestampRolloverStream:a,handleRollover:r}},{"../utils/stream":35}],30:[function(e,t,n){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":31,"./transmuxer":32}],31:[function(e,t,n){"use strict";var s,r,i,a,o,u,l,d,c,f,h,p,g,m,y,v,_,b,T,E,S,w,A,C,R,I,M,O,D,k,P,L,x,N,F,B,U,j,G,H,q,V=Math.pow(2,32)-1;!function(){var e;if(A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in A)A.hasOwnProperty(e)&&(A[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),I=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),R=new Uint8Array([0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:M,audio:O},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),x=new Uint8Array([0,0,0,0,0,0,0,0]),N=x,F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=x,k=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return s(A.dinf,s(A.dref,L))},i=function(e){return s(A.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return s(A.ftyp,C,R,C,I)},v=function(e){return s(A.hdlr,D[e])},o=function(e){return s(A.mdat,e)},y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),s(A.mdhd,t)},m=function(e){return s(A.mdia,y(e),v(e.type),l(e))},u=function(e){return s(A.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return s(A.minf,"video"===e.type?s(A.vmhd,k):s(A.smhd,P),r(),b(e))},d=function(e,t){for(var n=[],r=t.length;r--;)n[r]=E(t[r]);return s.apply(null,[A.moof,u(e)].concat(n))},c=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return s.apply(null,[A.moov,h(4294967295)].concat(n).concat(f(e)))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return s.apply(null,[A.mvex].concat(n))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(A.mvhd,t)},_=function(e){var t,n,r=e.samples||[],i=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,i[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return s(A.sdtp,i)},b=function(e){return s(A.stbl,T(e),s(A.stts,B),s(A.stsc,N),s(A.stsz,F),s(A.stco,x))},T=function(e){return s(A.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):j(e))},U=function(e){var t,n=e.sps||[],r=e.pps||[],i=[],a=[];for(t=0;t<n.length;t++)i.push((65280&n[t].byteLength)>>>8),i.push(255&n[t].byteLength),i=i.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));return s(A.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(A.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(i).concat([r.length]).concat(a))),s(A.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},j=function(e){return s(A.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},g=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return s(A.tkhd,t)},E=function(e){var t,n,r,i,a,o;return t=s(A.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(1+V)),o=Math.floor(e.baseMediaDecodeTime%(1+V)),n=s(A.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=w(e,92),s(A.traf,t,n,r)):(i=_(e),r=w(e,i.length+92),s(A.traf,t,n,r,i))},p=function(e){return e.duration=e.duration||4294967295,s(A.trak,g(e),m(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),s(A.trex,t)},q=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},H=function(e,t){var n,r,i,a;for(t+=20+16*(r=e.samples||[]).length,n=q(r,t),a=0;a<r.length;a++)i=r[a],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size,i.flags.isLeading<<2|i.flags.dependsOn,i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,61440&i.flags.degradationPriority,15&i.flags.degradationPriority,(4278190080&i.compositionTimeOffset)>>>24,(16711680&i.compositionTimeOffset)>>>16,(65280&i.compositionTimeOffset)>>>8,255&i.compositionTimeOffset]);return s(A.trun,new Uint8Array(n))},G=function(e,t){var n,r,i,a;for(t+=20+8*(r=e.samples||[]).length,n=q(r,t),a=0;a<r.length;a++)i=r[a],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size]);return s(A.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?G(e,t):H(e,t)},t.exports={ftyp:a,mdat:o,moof:d,moov:c,initSegment:function(e){var t,n=a(),r=c(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}}},{}],32:[function(e,t,n){"use strict";var f,s,u,l,d,h,p,g,m,c,r=e("../utils/stream.js"),y=e("./mp4-generator.js"),v=e("../m2ts/m2ts.js"),_=e("../codecs/adts.js"),b=e("../codecs/h264").H264Stream,T=e("../aac"),E=e("../data/silence"),S=e("../utils/clock"),w=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],A=["width","height","profileIdc","levelIdc","profileCompatibility"];d=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},m=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},c=function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n},(s=function(i){var a=[],o=0,t=0,l=0,d=1/0;s.prototype.init.call(this),this.push=function(t){h(i,t),i&&w.forEach(function(e){i[e]=t[e]}),a.push(t)},this.setEarliestDts=function(e){t=e-i.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){d=e},this.setAudioAppendStart=function(e){l=e},this.flush=function(){var e,t,n,r;0!==a.length&&(e=this.trimAdtsFramesByEarliestDts_(a),i.baseMediaDecodeTime=g(i),this.prefixWithSilence_(i,e),i.samples=this.generateSampleTable_(e),n=y.mdat(this.concatenateFrameData_(e)),a=[],t=y.moof(o,[i]),r=new Uint8Array(t.byteLength+n.byteLength),o++,r.set(t),r.set(n,t.byteLength),p(i),this.trigger("data",{track:i,boxes:r})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var n,r,i,a,o=0,s=0,u=0;if(t.length&&(n=S.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(9e4/(e.samplerate/1024)),l&&d&&(o=n-Math.max(l,d),u=(s=Math.floor(o/r))*r),!(s<1||45e3<u))){for(i=(i=E[e.samplerate])||t[0].data,a=0;a<s;a++)t.splice(a,0,{data:i});e.baseMediaDecodeTime-=Math.floor(S.videoTsToAudioTs(u,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return i.minSegmentDts>=t?e:(i.minSegmentDts=1/0,e.filter(function(e){return e.dts>=t&&(i.minSegmentDts=Math.min(i.minSegmentDts,e.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},this.concatenateFrameData_=function(e){var t,n,r=0,i=new Uint8Array(c(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}}).prototype=new r,(f=function(s,u){var t,n,l=0,d=[],c=[];u=u||{},f.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(e){h(s,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],A.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,s.pps=[e.data]),d.push(e)},this.flush=function(){for(var e,t,n,r,i,a;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0===d.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=this.groupNalsIntoFrames_(d),(n=this.groupFramesIntoGops_(e))[0][0].keyFrame||((t=this.getGopForFusion_(d[0],s))?(n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=this.extendFirstKeyFrame_(n)),c.length){var o;if(!(o=u.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");p(s),n=o}h(s,n),s.samples=this.generateSampleTable_(n),i=y.mdat(this.concatenateNalData_(n)),s.baseMediaDecodeTime=g(s),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),r=y.moof(l,[s]),a=new Uint8Array(r.byteLength+i.byteLength),l++,a.set(r),a.set(i,r.byteLength),this.trigger("data",{track:s,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){p(s),n=t=void 0},this.getGopForFusion_=function(e){var t,n,r,i,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(i=this.gopCache_[a]).gop,s.pps&&m(s.pps[0],i.pps[0])&&s.sps&&m(s.sps[0],i.sps[0])&&(r.dts<s.timelineStartInfo.dts||-1e4<=(t=e.dts-r.dts-r.duration)&&t<=45e3&&(!n||t<o)&&(n=i,o=t));return n?n.gop:null},this.extendFirstKeyFrame_=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,r=[],i=[];for(t=r.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},this.groupFramesIntoGops_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},this.generateSampleTable_=function(e,t){var n,r,i,a,o,s=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],(i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=s,i.compositionTimeOffset=o.pts-o.dts,i.duration=o.duration,i.size=4*o.length,i.size+=o.byteLength,o.keyFrame&&(i.flags.dependsOn=2),s+=i.size,u.push(i);return u},this.concatenateNalData_=function(e){var t,n,r,i,a,o,s=0,u=e.byteLength,l=e.nalCount,d=new Uint8Array(u+4*l),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],c.setUint32(s,o.data.byteLength),s+=4,d.set(o.data,s),s+=o.data.byteLength;return d},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,s,u;for(a=e.byteLength,o=e.nalCount,s=e.duration,t=n=0;t<c.length&&n<e.length&&(r=c[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,s-=i.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=s,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o,s;for(t=c.length-1,n=e.length-1,a=null,o=!1;0<=t&&0<=n;){if(r=c[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===c.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(s=o?n:a))return e;var u=e.slice(s),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){c=e}}).prototype=new r,h=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},p=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},g=function(e){var t,n=e.minSegmentDts-e.timelineStartInfo.dts;return t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/9e4,t=Math.floor(t)),t},(l=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,l.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new r,l.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,A.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,w.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=y.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=t.startPts-s,t.startTime/=9e4,t.endTime=t.endPts-s,t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(u=function(r){var i,a,o=this,n=!0;u.prototype.init.call(this),r=r||{},this.baseMediaDecodeTime=r.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new v.MetadataStream,t.aacStream=new T,t.audioTimestampRolloverStream=new v.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new v.TimestampRolloverStream("timed-metadata"),t.adtsStream=new _,t.coalesceStream=new l(r,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new s(a),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new v.MetadataStream,n.packetStream=new v.TransportPacketStream,n.parseStream=new v.TransportParseStream,n.elementaryStream=new v.ElementaryStream,n.videoTimestampRolloverStream=new v.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new v.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new v.TimestampRolloverStream("timed-metadata"),n.adtsStream=new _,n.h264Stream=new b,n.captionStream=new v.CaptionStream,n.coalesceStream=new l(r,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)i||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(i=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;i&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new f(i,r),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new s(a),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,p(a),a.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),i&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,p(i),t.captionStream.reset(),i.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=d(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new r,t.exports={Transmuxer:u,VideoSegmentStream:f,AudioSegmentStream:s,AUDIO_PROPERTIES:w,VIDEO_PROPERTIES:A}},{"../aac":15,"../codecs/adts.js":16,"../codecs/h264":17,"../data/silence":18,"../m2ts/m2ts.js":26,"../utils/clock":33,"../utils/stream.js":35,"./mp4-generator.js":31}],33:[function(e,t,n){var r,i,a,o,s,u;r=function(e){return 9e4*e},i=function(e,t){return e*t},a=function(e){return e/9e4},o=function(e,t){return e/t},s=function(e,t){return r(o(e,t))},u=function(e,t){return i(a(e),t)},t.exports={secondsToVideoTs:r,secondsToAudioTs:i,videoTsToSeconds:a,audioTsToSeconds:o,audioTsToVideoTs:s,videoTsToAudioTs:u}},{}],34:[function(e,t,n){"use strict";var r;r=function(r){var i=r.byteLength,a=0,o=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+o},this.loadWord=function(){var e=r.byteLength-i,t=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");t.set(r.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),o=8*n,i-=n},this.skipBits=function(e){var t;e<o||(e-=o,e-=8*(t=Math.floor(e/8)),i-=t,this.loadWord()),a<<=e,o-=e},this.readBits=function(e){var t=Math.min(o,e),n=a>>>32-t;return 0<(o-=t)?a<<=t:0<i&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<o;++e)if(0!=(a&2147483648>>>e))return a<<=e,o-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=r},{}],35:[function(e,t,n){"use strict";function r(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,r,i;if(t=a[e])if(2===arguments.length)for(r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(r=t.length,n=0;n<r;++n)t[n].apply(this,i)}},this.dispose=function(){a={}}}}r.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},t.exports=r},{}],36:[function(e,t,n){var l=arguments[3],d=arguments[4],c=arguments[5],f=JSON.stringify,o=!1;void 0===l&&(o=!0,l=function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=entryModule)},d=__webpack_modules__);t.exports=function(e,t){var n;n=o?function(e,t){var n,r="string"==typeof t;n=r?{}:[],Object.keys(d).forEach(function(e){d[e]&&(n[e]=d[e].toString())});var i,a=__webpack_require__(t);if(!a||a!==e&&a.default!==e){var o=n[t];n[t]=o.substring(0,o.length-1)+"\n"+e.name+"();\n}"}r?(t=f(t),i="{"+Object.keys(n).map(function(e){return f(e)+":"+n[e]}).join(",")+"}"):i="["+n.join(",")+"]";return"var fn = ("+l.toString().replace("entryModule",t)+")("+i+');\n(typeof fn === "function") && fn(self);'}(e,t):function(e){for(var t,n=Object.keys(c),r=0;r<n.length;r++){var i=n[r],a=c[i].exports;if(a===e||a&&a.default===e){t=i;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var o={};for(r=0;r<n.length;r++){o[i=n[r]]=i}d[t]=["function(require,module,exports){"+e+"(self); }",o]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};return u[t]=t,d[s]=["function(require,module,exports){var f = require("+f(t)+");(f.default ? f.default : f)(self);}",u],"("+l+")({"+Object.keys(d).map(function(e){return f(e)+":["+d[e][0]+","+f(d[e][1])+"]"}).join(",")+"},{},["+f(s)+"])"}(e);var r=new Blob([n],{type:"text/javascript"}),i=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(r),a=new Worker(i);return a.objectURL=i,a}},{}],37:[function(f,e,h){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(h,"__esModule",{value:!0});var n=t(f("global/window")),r=t(f("./flash-media-source")),i=t(f("./html-media-source")),a=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=0,s={mode:"auto"};a.default.mediaSources={};function u(e,t){var n=a.default.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})}function l(){return!!n.default.MediaSource&&!!n.default.MediaSource.isTypeSupported&&n.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function d(e){var t=a.default.mergeOptions(s,e);if(this.MediaSource={open:u,supportsNativeMediaSources:l},"html5"===t.mode||"auto"===t.mode&&l())return new i.default;if(a.default.getTech("Flash"))return new r.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")}(h.MediaSource=d).open=u,d.supportsNativeMediaSources=l;var c={createObjectURL:function(e){var t=void 0;return e instanceof i.default?(t=n.default.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof r.default?(t="blob:vjs-media-source/"+o,o++,a.default.mediaSources[t]=e,t):(t=n.default.URL.createObjectURL(e),e.url_=t)}};h.URL=c,a.default.MediaSource=d,a.default.URL=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":5,"./html-media-source":8,"global/window":14}]},{},[37])(37)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsContribHls=e()}}(function(){return function a(o,s,u){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,a,o,s,u)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function h(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null}var r,i=e("global/window"),p=(r=i)&&r.__esModule?r:{default:r};n.default={updateAdCues:function(e,t,n){var r=arguments.length<=2||void 0===n?0:n;if(e.segments)for(var i=r,a=void 0,o=0;o<e.segments.length;o++){var s=e.segments[o];if(a=a||h(t,i+s.duration/2)){if("cueIn"in s){a.endTime=i,a.adEndTime=i,i+=s.duration,a=null;continue}if(i<a.endTime){i+=s.duration;continue}a.endTime+=s.duration}else if("cueOut"in s&&((a=new p.default.VTTCue(i,i+s.duration,s.cueOut)).adStartTime=i,a.adEndTime=i+parseFloat(s.cueOut),t.addCue(a)),"cueOutCont"in s){var u,l,d=s.cueOutCont.split("/").map(parseFloat),c=f(d,2);u=c[0],l=c[1],(a=new p.default.VTTCue(i,i+s.duration,"")).adStartTime=i-u,a.adEndTime=a.adStartTime+l,t.addCue(a)}i+=s.duration}},findAdCue:h},t.exports=n.default},{"global/window":32}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")}function a(e){return 32<=e&&e<126?String.fromCharCode(e):"."}var r={hexDump:function(e){for(var t=Array.prototype.slice.call(e),n="",r=0;r<t.length/16;r++)n+=t.slice(16*r,16*r+16).map(i).join("")+" "+t.slice(16*r,16*r+16).map(a).join("")+"\n";return n},tagDump:function(e){return r.hexDump(e.bytes)},textRanges:function(e){var t,n,r="",i=void 0;for(i=0;i<e.length;i++)r+=(n=i,(t=e).start(n)+"-"+t.end(n)+" ");return r},createTransferableMessage:function(n){var r={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:r[e]=t}),r},initSegmentId:function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")}};n.default=r,t.exports=n.default},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},t.exports=n.default},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){e.onmessage=function(e){var n=e.data,t=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),r=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),i=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new s.Decrypter(t,r,i,function(e,t){o.default.postMessage((0,u.createTransferableMessage)({source:n.source,decrypted:t}),[t.buffer])})}}var i,a=e("global/window"),o=(i=a)&&i.__esModule?i:{default:i},s=e("aes-decrypter"),u=e("./bin-utils");n.default=function(e){return new r(e)},t.exports=n.default},{"./bin-utils":2,"aes-decrypter":25,"global/window":32}],5:[function(C,e,R){(function(e){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return(0,u.translateLegacyCodecs)([e])[0]})}var f=n(C("./playlist-loader")),o=C("./playlist.js"),h=n(C("./segment-loader")),p=n(C("./vtt-segment-loader")),s=n(C("./ranges")),g=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),i=n(C("./ad-cue-tags")),m=n(C("./sync-controller")),u=C("videojs-contrib-media-sources/es5/codec-utils"),y=n(C("webwackify")),v=n(C("./decrypter-worker")),l=n(C("./config")),_=C("./util/codecs.js"),b=C("./media-groups"),T=void 0,E={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},S=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];R.mapLegacyAvcCodecs_=a;function w(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'}function d(e,t){var n=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),r=function(e){var t=e.attributes||{};return t.CODECS?(0,_.parseCodecs)(t.CODECS):E}(t),i=t.attributes||{},a=!0,o=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&i.AUDIO){var s=e.mediaGroups.AUDIO[i.AUDIO];if(s)for(var u in a=!(o=!0),s)if(!s[u].uri){a=!0;break}}o&&!r.audioProfile&&(g.default.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=E.audioProfile);var l={};r.videoCodec&&(l.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(l.audio="mp4a.40."+r.audioProfile);var d=w("audio",n,[l.audio]),c=w("video",n,[l.video]),f=w("video",n,[l.video,l.audio]);return o?!a&&l.video?[c,d]:[f,d]:l.video?[f]:[d]}R.mimeTypesForPlaylist_=d;var c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(A,g.default.EventTarget),t(A,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*r.masterPlaylistLoader_.targetDuration*1e3;(0,o.isLowestEnabledRendition)(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,e.endList&&"none"!==r.tech_.preload()&&(r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load()),(0,b.setupMediaGroups)({segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,mode:r.mode_,hls:r.hls_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),e);try{r.setupSourceBuffers_()}catch(e){return g.default.log.warn("Failed to create SourceBuffers",e),r.mediaSource.endOfStream("decode")}r.setupFirstPlay(),r.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=r.masterPlaylistLoader_.media();if(!e){var t=void 0;return r.enableLowInitialPlaylist&&(t=r.selectInitialPlaylist()),t=t||r.selectPlaylist(),r.initialMedia_=t,void r.masterPlaylistLoader_.media(r.initialMedia_)}function n(){var e=r.seekable();0!==e.length&&r.mediaSource.addSeekableRange_(e.start(0),e.end(0))}r.useCueTags_&&r.updateAdCues_(e),r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.updateDuration(),r.tech_.paused()||r.mainSegmentLoader_.load(),e.endList||(r.duration()!==1/0?r.tech_.one("durationchange",function e(){r.duration()===1/0?n():r.tech_.one("durationchange",e)}):n())}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*r.masterPlaylistLoader_.targetDuration*1e3;(0,o.isLowestEnabledRendition)(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=r.masterPlaylistLoader_.media();r.stuckAtPlaylistEnd_(e)&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),r.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),T.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),T.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&1<Object.keys(n.AUDIO[i[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),r=n.length?n.end(n.length-1)-a.tech_.currentTime():0,i=a.bufferLowWaterLine();(!t.endList||a.duration()<l.default.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||i<=r)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e,t=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_())return!1;if(!n.endList){var r=(e=t.seekable()).length?g.default.browser.IE_VERSION&&"html5"===t.mode_&&0===t.tech_.readyState()?(t.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(e.end(0)),t.hasPlayed_=function(){return!0}}),{v:!1}):(t.trigger("firstplay"),void t.tech_.setCurrentTime(e.end(0))):{v:!1};if("object"==typeof r)return r.v}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return g.default.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(e){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=e&&this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=T.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=s.default.SAFE_TIME_DELTA;var a=i.end(i.length-1);return a-r<=s.default.SAFE_TIME_DELTA&&n-a<=s.default.SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(e,t){void 0===e&&(e={});var n,r=void 0;if(r=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!r){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var i=1===this.masterPlaylistLoader_.master.playlists.filter(o.isEnabled).length;return i?(g.default.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(i)):(r.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),n=this.selectPlaylist(),g.default.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(n))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=s.default.findRange(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length&&"flash"!==this.mode_?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:T.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&0!==(e=T.Playlist.seekable(n,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=T.Playlist.seekable(n,r)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=g.default.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){function e(){t.mediaSource.duration=r,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)}var t=this,n=this.mediaSource.duration,r=T.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered();0<i.length&&(r=Math.max(r,i.end(i.length-1))),n!==r&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",e):e())}},{key:"dispose",value:function(){var r=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=r.mediaTypes_[e].groups;for(var n in t)t[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=d(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(e[0]),e[1]&&this.audioSegmentLoader_.mimeType(e[1]),this.excludeIncompatibleVariants_(t)}}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this.masterPlaylistLoader_.master,r=2,i=null,n=void 0;e.attributes.CODECS&&(n=(0,_.parseCodecs)(e.attributes.CODECS),i=n.videoCodec,r=n.codecCount),t.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){var n=e.attributes.CODECS;t=(0,_.parseCodecs)(n),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+a(n)+'"')&&(e.excludeUntil=1/0)}t.codecCount!==r&&(e.excludeUntil=1/0),t.videoCodec!==i&&(e.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),i.default.updateAdCues(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=l.default.GOAL_BUFFER_LENGTH,n=l.default.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,l.default.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=l.default.BUFFER_LOW_WATER_LINE,n=l.default.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,l.default.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,r)}}]),A);function A(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(A.prototype),"constructor",this).call(this);var n=e.url,r=e.withCredentials,i=e.mode,a=e.tech,o=e.bandwidth,s=e.externHls,u=e.useCueTags,l=e.blacklistDuration,d=e.enableLowInitialPlaylist;if(!n)throw new Error("A non-empty playlist URL is required");T=s,this.withCredentials=r,this.tech_=a,this.hls_=a.hls,this.mode_=i,this.useCueTags_=u,this.blacklistDuration=l,this.enableLowInitialPlaylist=d,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.mediaTypes_=(0,b.createMediaTypes)(),this.mediaSource=new g.default.MediaSource({mode:i}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=g.default.createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new m.default(e),this.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=(0,y.default)(v.default,function(){var e=void 0;try{e=C.resolve("./decrypter-worker")}catch(e){}return e}());var c={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.mediaSource.duration},hasPlayed:function(){return t.hasPlayed_()},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:o,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new f.default(n,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.mainSegmentLoader_=new h.default(g.default.mergeOptions(c,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new h.default(g.default.mergeOptions(c,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new p.default(g.default.mergeOptions(c,{loaderType:"vtt"}),e),this.setupSegmentLoaderListeners_(),S.forEach(function(e){t[e+"_"]=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]}.bind(t,e)}),this.masterPlaylistLoader_.load()}R.MasterPlaylistController=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webwackify:76}],6:[function(r,e,i){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0});function n(){}function d(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)}var y=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),v=t(r("./playlist-loader"));i.stopLoaders=d;function l(e,t){(t.activePlaylistLoader=e).load()}i.startLoaders=l;function c(s,u){return function(){var e=u.segmentLoaders,t=e[s],n=e.main,r=u.mediaTypes[s],i=r.activeTrack(),a=r.activeGroup(i),o=r.activePlaylistLoader;d(t,r),a&&(a.playlistLoader?(t.resyncLoader(),l(a.playlistLoader,r)):o&&n.resetEverything())}}i.onGroupChanged=c;function f(s,u){return function(){var e=u.segmentLoaders,t=e[s],n=e.main,r=u.mediaTypes[s],i=r.activeTrack(),a=r.activeGroup(i),o=r.activePlaylistLoader;d(t,r),a&&(a.playlistLoader?(o!==a.playlistLoader&&(t.track&&t.track(i),t.resetEverything()),l(a.playlistLoader,r)):n.resetEverything())}}i.onTrackChanged=f;var _={AUDIO:function(u,l){return function(){var e=l.segmentLoaders[u],t=l.mediaTypes[u],n=l.blacklistCurrentPlaylist;d(e,t);var r=t.activeTrack(),i=t.activeGroup(),a=(i.filter(function(e){return e.default})[0]||i[0]).id,o=t.tracks[a];if(r!==o){for(var s in y.default.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[s].enabled=t.tracks[s]===o;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(r,i){return function(){var e=i.segmentLoaders[r],t=i.mediaTypes[r];y.default.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),d(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}};i.onError=_;var b={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),i),r.paused()||a.load()}),t.on("error",_[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,i),a.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),i),r.paused()||a.load()}),t.on("error",_[e](e,n))}};i.setupListeners=b;var h={AUDIO:function(e,t){var n,r,i=t.mode,a=t.hls,o=t.segmentLoaders[e],s=t.requestOptions.withCredentials,u=t.master.mediaGroups,l=t.mediaTypes[e],d=l.groups,c=l.tracks;for(var f in u[e]&&0!==Object.keys(u[e]).length&&"html5"===i||(u[e]={main:{default:{default:!0}}}),u[e])for(var h in d[f]||(d[f]=[]),u[e][f]){var p=u[e][f][h],g=void 0;if(g=p.resolvedUri?new v.default(p.resolvedUri,a,s):null,p=y.default.mergeOptions({id:h,playlistLoader:g},p),b[e](e,p.playlistLoader,t),d[f].push(p),void 0===c[h]){var m=new y.default.AudioTrack({id:h,kind:(n=p,r=void 0,r=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(r="main-desc"),r),enabled:!1,language:p.language,default:p.default,label:h});c[h]=m}}o.on("error",_[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.hls,i=t.segmentLoaders[e],a=t.requestOptions.withCredentials,o=t.master.mediaGroups,s=t.mediaTypes[e],u=s.groups,l=s.tracks;for(var d in o[e])for(var c in u[d]||(u[d]=[]),o[e][d])if(!o[e][d][c].forced){var f=o[e][d][c];if(f=y.default.mergeOptions({id:c,playlistLoader:new v.default(f.resolvedUri,r,a)},f),b[e](e,f.playlistLoader,t),u[d].push(f),void 0===l[c]){var h=n.addRemoteTextTrack({id:c,kind:"subtitles",enabled:!1,language:f.language,label:c},!1).track;l[c]=h}}i.on("error",_[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,o=i.tracks;for(var s in r[e])for(var u in a[s]||(a[s]=[]),r[e][s]){var l=r[e][s][u];if(l.instreamId.match(/CC\d/)&&(a[s].push(y.default.mergeOptions({id:u},l)),void 0===o[u])){var d=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",enabled:!1,language:l.language,label:u},!1).track;o[u]=d}}}};i.initialize=h;function p(a,o){return function(t){var e=o.masterPlaylistLoader,n=o.mediaTypes[a].groups,r=e.media();if(!r)return null;var i=null;return r.attributes[a]&&(i=n[r.attributes[a]]),i=i||n.main,void 0===t?i:null===t?null:i.filter(function(e){return e.id===t.id})[0]||null}}i.activeGroup=p;var g={AUDIO:function(n,r){return function(){var e=r.mediaTypes[n].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function(n,r){return function(){var e=r.mediaTypes[n].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}};i.activeTrack=g;i.setupMediaGroups=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){h[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,r=t.tech,i=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){n[e].activeGroup=p(e,t),n[e].activeTrack=g[e](e,t),n[e].onGroupChanged=c(e,t),n[e].onTrackChanged=f(e,t)});var a=n.AUDIO.activeGroup(),o=(a.filter(function(e){return e.default})[0]||a[0]).id;n.AUDIO.tracks[o].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})});function s(){n.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})}for(var u in r.audioTracks().addEventListener("change",s),r.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),i.on("dispose",function(){r.audioTracks().removeEventListener("change",s),r.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),n.AUDIO.tracks)r.audioTracks().addTrack(n.AUDIO.tracks[u])};i.createMediaTypes=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:n,activeTrack:n,onGroupChanged:n,onTrackChanged:n}}),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist-loader":9}],7:[function(r,e,i){(function(e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t,n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,c=(t=n)&&t.__esModule?t:{default:t},u=r("./bin-utils"),f={FAILURE:2,TIMEOUT:-101,ABORTED:-102};i.REQUEST_ERRORS=f;function h(e){var t={};return e.byterange&&(t.Range=function(e){var t;return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t}(e.byterange)),t}function p(e){e.forEach(function(e){e.abort()})}function g(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:f.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:f.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:f.FAILURE,xhr:t}:null}function m(r,i,a){var o=[],s=0;return function(e,t){if(e&&(p(r),o.push(e)),(s+=1)===r.length){if(t.endOfAllRequests=Date.now(),0<o.length){var n=function(e){return e.reduce(function(e,t){return t.code>e.code?t:e})}(o);return a(n,t)}return t.encryptedBytes?function(r,i,a){r.addEventListener("message",function e(t){if(t.data.source===i.requestId){r.removeEventListener("message",e);var n=t.data.decrypted;return i.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),a(null,i)}}),r.postMessage((0,u.createTransferableMessage)({source:i.requestId,encrypted:i.encryptedBytes,key:i.key.bytes,iv:i.key.iv}),[i.encryptedBytes.buffer,i.key.bytes.buffer])}(i,t,a):a(null,t)}}}function y(t,n){return function(e){return t.stats=c.default.mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}i.mediaSegmentRequest=function(e,t,n,r,i,a){var o=[],s=m(o,n,a);if(r.key){var u=e(c.default.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),function(a,o){return function(e,t){var n=t.response,r=g(e,t);if(r)return o(r,a);if(16!==n.byteLength)return o({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:f.FAILURE,xhr:t},a);var i=new DataView(n);return a.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),o(null,a)}}(r,s));o.push(u)}if(r.map&&!r.map.bytes){var l=e(c.default.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:h(r.map)}),function(i,a){return function(e,t){var n=t.response,r=g(e,t);return r?a(r,i):0===n.byteLength?a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:f.FAILURE,xhr:t},i):(i.map.bytes=new Uint8Array(t.response),a(null,i))}}(r,s));o.push(l)}var d=e(c.default.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:h(r)}),function(i,a){return function(e,t){var n=t.response,r=g(e,t);return r?a(r,i):0===n.byteLength?a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:f.FAILURE,xhr:t},i):(i.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(t),i.key?i.encryptedBytes=new Uint8Array(t.response):i.bytes=new Uint8Array(t.response),a(null,i))}}(r,s));return d.addEventListener("progress",y(r,i)),o.push(d),function(){return p(o)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2}],8:[function(a,c,f){(function(e){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var o=n(a("global/window")),s=n(a("./ranges")),u=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),l=["seeking","seeked","pause","playing","error"],i=(t(d,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&o.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=o.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+s.default.SAFE_TIME_DELTA>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),n=this.tech_.currentTime(),r=void 0;return e&&this.afterSeekableWindow_(t,n)&&(r=t.end(t.length-1)),e&&this.beforeSeekableWindow_(t,n)&&(r=t.start(0)+s.default.SAFE_TIME_DELTA),void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+s.default.printableRange(t)+". Seeking to "+r+"."),this.tech_.setCurrentTime(r),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=s.default.findRange(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),i=s.default.findNextRange(r,t);if(this.videoUnderflow_(i,r,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<i.length){var a=i.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t){return!!e.length&&t>e.end(e.length-1)+s.default.SAFE_TIME_DELTA}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-s.default.SAFE_TIME_DELTA)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=s.default.findNextRange(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+s.default.TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=s.default.findGaps(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&2<t-i)return{start:i,end:a}}return null}},{key:"logger_",value:function(){}}]),d);function d(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,e.debug&&(this.logger_=u.default.log.bind(u.default,"playback-watcher ->")),this.logger_("initialize");function n(){return t.monitorCurrentTime_()}function r(){return t.techWaiting_()}function i(){return t.cancelTimer_()}function a(){return t.fixesBadSeeks_()}this.tech_.on("seekablechanged",a),this.tech_.on("waiting",r),this.tech_.on(l,i),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",r),t.tech_.off(l,i),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&o.default.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}f.default=i,c.exports=f.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":12,"global/window":32}],9:[function(m,e,y){(function(e){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t.slice();n=n||0;for(var i=Math.min(e.length,t.length+n),a=n;a<i;a++)r[a-n]=(0,s.mergeOptions)(e[a],r[a-n]);return r}var a=n(m("./resolve-url")),s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,u=n(m("m3u8-parser")),l=n(m("global/window"));y.updateSegments=o;function d(e,t){e.resolvedUri||(e.resolvedUri=(0,a.default)(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=(0,a.default)(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=(0,a.default)(t,e.map.uri))}y.resolveSegmentUris=d;function c(e,t){var n=(0,s.mergeOptions)(e,{}),r=n.playlists.filter(function(e){return e.uri===t.uri})[0];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.mediaSequence===t.mediaSequence)return null;var i=(0,s.mergeOptions)(r,t);r.segments&&(i.segments=o(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),i.segments.forEach(function(e){d(e,i.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=i);return n.playlists[t.uri]=i,n}y.updateMaster=c;function i(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=(0,a.default)(e.uri,n.uri),n.attributes||(n.attributes={},s.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}}y.setupMediaPlaylists=i;function f(i){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in i.mediaGroups[e])for(var n in i.mediaGroups[e][t]){var r=i.mediaGroups[e][t][n];r.uri&&(r.resolvedUri=(0,a.default)(i.uri,r.uri))}})}y.resolveMediaGroupUris=f;function h(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)}y.refreshDelay=h;var p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,s.EventTarget),t(g,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var r=new u.default.Parser;r.push(e.responseText),r.end(),r.manifest.uri=t,r.manifest.attributes=r.manifest.attributes||{};var i=c(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,i?(this.master=i,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(l.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=l.default.setTimeout(function(){n.trigger("mediaupdatetimeout")},h(this.media(),!!i))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(n){var r=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var i=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if((0,a.default)(this.master.uri,n.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:(0,a.default)(this.master.uri,n.uri),withCredentials:this.withCredentials},function(e,t){if(r.request){if(e)return r.playlistRequestError(r.request,n.uri,i);r.haveMetadata(t,n.uri),"HAVE_MASTER"===i?r.trigger("loadedmetadata"):r.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;l.default.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=l.default.setTimeout(function(){return t.load()},r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var r=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(r.request){if(r.request=null,e)return r.error={status:t.status,message:"HLS playlist request error at URL: "+r.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===r.state&&(r.started=!1),r.trigger("error");var n=new u.default.Parser;return n.push(t.responseText),n.end(),r.state="HAVE_MASTER",n.manifest.uri=r.srcUrl,n.manifest.playlists?(r.master=n.manifest,i(r.master),f(r.master),r.trigger("loadedplaylist"),void(r.request||r.media(n.manifest.playlists[0]))):(r.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:l.default.location.href,playlists:[{uri:r.srcUrl}]},r.master.playlists[r.srcUrl]=r.master.playlists[0],r.master.playlists[0].resolvedUri=r.srcUrl,r.master.playlists[0].attributes=r.master.playlists[0].attributes||{},r.haveMetadata(t,r.srcUrl),r.trigger("loadedmetadata"))}})}}]),g);function g(e,t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(g.prototype),"constructor",this).call(this),this.srcUrl=e,this.hls_=t,this.withCredentials=n,!this.srcUrl)throw new Error("A non-empty playlist URL is required");this.state="HAVE_NOTHING",this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:(0,a.default)(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e,t){if(r.request)return e?r.playlistRequestError(r.request,r.media().uri,"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri)}))})}y.default=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function i(e,t){var n;return e&&(n=window.getComputedStyle(e))?n[t]:""}function m(e,r){var i=e.slice();e.sort(function(e,t){var n=r(e,t);return 0===n?i.indexOf(e)-i.indexOf(t):n})}function h(e,t){var n=void 0,r=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||window.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r=r||window.Number.MAX_VALUE)}var y=r(e("./config")),v=r(e("./playlist")),a=e("./util/codecs.js");n.comparePlaylistBandwidth=h;n.comparePlaylistResolution=function(e,t){var n=void 0,r=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||window.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r};function o(e,t,n,r){var i=e.playlists.map(function(e){var t,n;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:n,playlist:e}});m(i,function(e,t){return e.bandwidth-t.bandwidth});var a=(i=i.filter(function(e){return!v.default.isIncompatible(e.playlist)})).filter(function(e){return v.default.isEnabled(e.playlist)});a.length||(a=i.filter(function(e){return!v.default.isDisabled(e.playlist)}));var o=a.filter(function(e){return e.bandwidth*y.default.BANDWIDTH_VARIANCE<t}),s=o[o.length-1],u=o.filter(function(e){return e.bandwidth===s.bandwidth})[0],l=o.filter(function(e){return e.width&&e.height});m(l,function(e,t){return e.width-t.width});var d=l.filter(function(e){return e.width===n&&e.height===r});s=d[d.length-1];var c=d.filter(function(e){return e.bandwidth===s.bandwidth})[0],f=void 0,h=void 0,p=void 0;c||(h=(f=l.filter(function(e){return e.width>n||e.height>r})).filter(function(e){return e.width===f[0].width&&e.height===f[0].height}),s=h[h.length-1],p=h.filter(function(e){return e.bandwidth===s.bandwidth})[0]);var g=p||c||u||a[0]||i[0];return g?g.playlist:null}n.simpleSelector=o;n.lastBandwidthSelector=function(){return o(this.playlists.master,this.systemBandwidth,parseInt(i(this.tech_.el(),"width"),10),parseInt(i(this.tech_.el(),"height"),10))};n.movingAverageBandwidthSelector=function(e){var t=-1;if(e<0||1<e)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,o(this.playlists.master,t,parseInt(i(this.tech_.el(),"width"),10),parseInt(i(this.tech_.el(),"height"),10))}};n.minRebufferMaxBandwidthSelector=function(e){var t=e.master,n=e.currentTime,r=e.bandwidth,i=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,u=e.syncController,l=t.playlists.filter(function(e){return!v.default.isIncompatible(e)}),d=l.filter(v.default.isEnabled);d.length||(d=l.filter(function(e){return!v.default.isDisabled(e)}));var c=d.filter(v.default.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=u.getSyncPoint(e,i,s,n)?1:2;return{playlist:e,rebufferingImpact:v.default.estimateSegmentRequestTime(a,r,e)*t-o}}),f=c.filter(function(e){return e.rebufferingImpact<=0});return m(f,function(e,t){return h(t.playlist,e.playlist)}),f.length?f[0]:(m(c,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),c[0]||null)};n.lowestBitrateCompatibleVariantSelector=function(){var e=this.playlists.master.playlists.filter(v.default.isEnabled);return m(e,function(e,t){return h(e,t)}),e.filter(function(e){return(0,a.parseCodecs)(e.attributes.CODECS).videoCodec})[0]||null}},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(A,e,C){(function(e){"use strict";Object.defineProperty(C,"__esModule",{value:!0});function i(e,t,n){var r,i;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t)).precise?r.result:(i=function(e,t){for(var n=0,r=void 0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(r=e.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?i.result:r.result+n}function a(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return r.default.Infinity}return i(e,t,n)}var t,o="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,n=A("global/window"),r=(t=n)&&t.__esModule?t:{default:t};C.duration=a;function u(e,t,n){var r=0;if(n<t){var i=[n,t];t=i[0],n=i[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)r+=e.targetDuration;t=0}for(a=t;a<n;a++)r+=e.segments[a].duration;return r}C.sumDurations=u;function s(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,r=n+2*e.targetDuration;t--&&!(r<=(n+=e.segments[t].duration)););return Math.max(0,t)}C.safeLiveIndex=s;function l(e,t,n){if(!e||!e.segments)return null;if(e.endList)return a(e);if(null===t)return null;t=t||0;var r=n?s(e):e.segments.length;return i(e,e.mediaSequence+r,t)}C.playlistEnd=l;function d(e,t){var n=t||0,r=l(e,t,!0);return null===r?(0,o.createTimeRange)():(0,o.createTimeRange)(n,r)}C.seekable=d;function c(e){return e-Math.floor(e)==0}function f(e,t){if(c(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),a=t*i;if(c(a)||r===n)return(a+e)/i}}function h(e,t,n,r){var i=void 0,a=void 0,o=e.segments.length,s=t-r;if(s<0){if(0<n)for(i=n-1;0<=i;i--)if(a=e.segments[i],0<(s+=g(a.duration)))return{mediaIndex:i,startTime:r-u(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<o;i++)if(a=e.segments[i],(s-=p(a.duration))<0)return{mediaIndex:i,startTime:r+u(e,n,i)};return{mediaIndex:o-1,startTime:t}}var p=f.bind(null,1),g=f.bind(null,-1);C.getMediaInfoForTime=h;function m(e){return e.excludeUntil&&e.excludeUntil>Date.now()}C.isBlacklisted=m;function y(e){return e.excludeUntil&&e.excludeUntil===1/0}C.isIncompatible=y;function v(e){var t=m(e);return!e.disabled&&!t}C.isEnabled=v;function _(e){return e.disabled}C.isDisabled=_;function b(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1}C.isAes=b;function T(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1}C.isFmp4=T;function E(e,t){return t.attributes&&t.attributes[e]}C.hasAttribute=E;function S(e,t,n,r){var i=arguments.length<=3||void 0===r?0:r;return E("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN}C.estimateSegmentRequestTime=S;function w(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!v(e)&&(e.attributes.BANDWIDTH||0)<n}).length}C.isLowestEnabledRendition=w,C.default={duration:a,seekable:d,safeLiveIndex:s,getMediaInfoForTime:h,isEnabled:v,isDisabled:_,isBlacklisted:m,isIncompatible:y,playlistEnd:l,isAes:b,isFmp4:T,hasAttribute:E,estimateSegmentRequestTime:S,isLowestEnabledRendition:w}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":32}],12:[function(e,i,a){(function(e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e,t){var n=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return l.default.createTimeRanges(n)}function c(e,t){var n=null,r=null,i=0,a=[],o=[];if(!(e&&e.length&&t&&t.length))return l.default.createTimeRange();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),s=0;s<a.length;s++)"start"===a[s].type?2===++i&&(n=a[s].time):"end"===a[s].type&&1===--i&&(r=a[s].time),null!==n&&null!==r&&(o.push([n,r]),r=n=null);return l.default.createTimeRanges(o)}var t,n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=(t=n)&&t.__esModule?t:{default:t};a.default={findRange:function(e,n){return r(e,function(e,t){return e-1/30<=n&&n<=t+1/30})},findNextRange:function(e,t){return r(e,function(e){return t<=e-1/30})},findGaps:function(e){if(e.length<2)return l.default.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return l.default.createTimeRanges(t)},findSoleUncommonTimeRangesEnd:function(e,t){function n(e){return e[0]<=a&&e[1]>=a}var r=void 0,i=void 0,a=void 0,o=[],s=[];if(e)for(r=0;r<e.length;r++)i=e.start(r),a=e.end(r),s.push([i,a]);if(t)for(r=0;r<t.length;r++)i=t.start(r),a=t.end(r),s.some(n)||o.push(a);return 1!==o.length?null:o[0]},getSegmentBufferedPercent:function(e,t,n,r){var i=e+t,a=l.default.createTimeRanges([[e,i]]),o=l.default.createTimeRanges([[function(e,t){var n=u(t,2),r=n[0],i=n[1];return Math.min(Math.max(r,e),i)}(e,[n,i]),i]]);if(o.start(0)===o.end(0))return 0;var s=function(e,t,n,r){for(var i=t.end(0)-t.start(0),a=i-(e.end(0)-e.start(0)),o=c(e,r),s=c(t,r),u=0,l=0,d=o.length;d--;)u+=o.end(d)-o.start(d),o.start(d)===n&&(u+=a);for(d=s.length;d--;)l+=s.end(d)-s.start(d);return Math.max(u,l)/i*100}(o,a,n,r);return isNaN(s)||s===1/0||s===-1/0?0:s},TIME_FUDGE_FACTOR:1/30,SAFE_TIME_DELTA:.1,printableRange:function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},timeUntilRebuffer:function(e,t,n){var r=arguments.length<=2||void 0===n?1:n;return((e.length?e.end(e.length-1):0)-t)/r}},i.exports=a.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,r,i){(function(e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t,n="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,d=(t=n)&&t.__esModule?t:{default:t},c={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};i.default=function(e){!function t(n,e){var r=0,i=0,a=d.default.mergeOptions(c,e);n.ready(function(){n.trigger({type:"usage",name:"hls-error-reload-initialized"})});function o(){i&&n.currentTime(i)}function s(e){null!=e&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",o),n.src(e),n.trigger({type:"usage",name:"hls-error-reload"}),n.play())}function u(){if(Date.now()-r<1e3*a.errorInterval)n.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return r=Date.now(),a.getSource.call(n,s);d.default.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}}function l(){n.off("loadedmetadata",o),n.off("error",u),n.off("dispose",l)}n.on("error",u),n.on("dispose",l),n.reloadSourceOnError=function(e){l(),t(n,e)}}(this,e)},r.exports=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(t.attributes.RESOLUTION){var i=t.attributes.RESOLUTION;this.width=i.width,this.height=i.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=function(i,a,o){return function(e){var t=i.master.playlists[a],n=(0,s.isIncompatible)(t),r=(0,s.isEnabled)(t);return void 0===e?r:(e?delete t.disabled:t.disabled=!0,e===r||n||(o(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)}}(e.playlists,t.uri,r)}var s=e("./playlist.js");n.default=function(n){var e=n.playlists;n.representations=function(){return e.master.playlists.filter(function(e){return!(0,s.isIncompatible)(e)}).map(function(e,t){return new a(n,e,e.uri)})}},t.exports=n.default},{"./playlist.js":11}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e("url-toolkit")),a=r(e("global/window"));n.default=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=i.default.buildAbsoluteURL(a.default.location.href,e)),i.default.buildAbsoluteURL(e,t))},t.exports=n.default},{"global/window":32,"url-toolkit":63}],16:[function(b,e,T){(function(e){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!e||!t)return!1;var r=n===e.segments.length;return e.endList&&"open"===t.readyState&&r}function s(e){return"number"==typeof e&&isFinite(e)}function o(e,t,n){return"main"===e&&t&&n?n.containsAudio||n.containsVideo?t.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}var c=n(b("./playlist")),a=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=n(b("./source-updater")),l=n(b("./config")),d=n(b("global/window")),f=n(b("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),h=b("./bin-utils"),p=b("./media-segment-request"),g=b("./ranges"),m=b("./playlist-selectors");T.illegalMediaSwitch=o;function y(e,t,n){var r=void 0;return r=e.length&&0<e.start(0)&&e.start(0)<t?e.start(0):t-30,Math.min(r,t-n)}T.safeBackBufferTrimTime=y;var v=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_,a.default.EventTarget),t(_,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():a.default.createTimeRanges()}},{key:"initSegment",value:function(e,t){var n=!(arguments.length<=1||void 0===t)&&t;if(!e)return null;var r=(0,h.initSegmentId)(e),i=this.initSegments_[r];return n&&!i&&e.bytes&&(this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new u.default(this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e,t){var n=arguments.length<=1||void 0===t?{}:t;if(e){var r=this.playlist_,i=this.pendingSegment_;if(this.playlist_=e,this.xhrOptions_=n,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(r&&r.uri===e.uri){var a=e.mediaSequence-r.mediaSequence;this.logger_("mediaSequenceDiff",a),null!==this.mediaIndex&&(this.mediaIndex-=a),i&&(i.mediaIndex-=a,0<=i.mediaIndex&&(i.segment=e.segments[i.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(r,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(d.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e){this.mimeType_||(this.mimeType_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t),(0,f.default)(e,t,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&d.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=d.default.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&d.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=d.default.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(i(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():e.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e)))}}},{key:"checkBuffer_",value:function(e,t,n,r,i,a){var o=0,s=void 0;e.length&&(o=e.end(e.length-1));var u,l=Math.max(0,o-i);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!r&&1<=l)return null;if(this.logger_("checkBuffer_","mediaIndex:",n,"hasPlayed:",r,"currentTime:",i,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",l),null===a)return n=this.getSyncSegmentCandidate_(t),this.logger_("getSync","mediaIndex:",n),this.generateSegmentInfo_(t,n,null,!0);if(null===n)return s=(n=this.fetchAtBuffer_?(u=c.default.getMediaInfoForTime(t,o,a.segmentIndex,a.time)).mediaIndex:(u=c.default.getMediaInfoForTime(t,i,a.segmentIndex,a.time)).mediaIndex,u.startTime),this.logger_("getMediaIndexForTime","mediaIndex:",n,"startOfSegment:",s),this.generateSegmentInfo_(t,n,s,!1);this.logger_("walkForward","mediaIndex:",n+1);var d=t.segments[n];return s=d&&d.end?d.end:o,this.generateSegmentInfo_(t,n+1,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,r){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=c.default.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=(0,g.timeUntilRebuffer)(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var o=(0,m.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=i-a-o.rebufferingImpact,u=.5;return a<=g.TIME_FUDGE_FACTOR&&(u=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||s<u)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*l.default.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=(0,p.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=y(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<t&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key={resolvedUri:t.key.resolvedUri,iv:r}}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===p.REQUEST_ERRORS.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===p.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var n=this;if(this.pendingSegment_){var e=this.pendingSegment_,r=e.segment,t=this.syncController_.probeSegmentInfo(e);void 0===this.startingMedia_&&t&&(t.containsAudio||t.containsVideo)&&(this.startingMedia_={containsAudio:t.containsAudio,containsVideo:t.containsVideo});var i=o(this.loaderType_,this.startingMedia_,t);if(i)return this.error({message:i,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(e.timeline);null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",r.map&&function(){var e=(0,h.initSegmentId)(r.map);if(!n.activeInitSegmentId_||n.activeInitSegmentId_!==e){var t=n.initSegment(r.map);n.sourceUpdater_.appendBuffer(t.bytes,function(){n.activeInitSegmentId_=e})}}(),e.byteLength=e.bytes.byteLength,"number"==typeof r.start&&"number"==typeof r.end?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration,this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),i(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(s(n)&&s(r)){(0,f.default)(n,r,this.segmentMetadataTrack_);var i=d.default.WebKitDataCue||d.default.VTTCue,a={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:r},o=new i(n,r,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),_);function _(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(_.prototype),"constructor",this).call(this),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.hls_=e.hls,this.loaderType_=e.loaderType,this.startingMedia_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),this.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),this.fetchAtBuffer_=!1,n.debug&&(this.logger_=a.default.log.bind(a.default,"segment-loader",this.loaderType_,"->"))}T.default=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(e,l,d){(function(e){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){}var n,a="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,o=(n=a)&&n.__esModule?n:{default:n},s=(t(u,[{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:o.default.createTimeRanges()}},{key:"remove",value:function(e,t){var n=this;this.processedAppend_&&this.queueCallback_(function(){n.sourceBuffer_.remove(e,t)},i)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),u);function u(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);function r(){n.sourceBuffer_=e.addSourceBuffer(t),n.onUpdateendCallback_=function(){var e=n.pendingCallback_;n.pendingCallback_=null,e&&e(),n.runCallback_()},n.sourceBuffer_.addEventListener("updateend",n.onUpdateendCallback_),n.runCallback_()}this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,"closed"===e.readyState?e.addEventListener("sourceopen",r):r()}d.default=s,l.exports=d.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(c,e,f){(function(e){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var i=n(c("mux.js/lib/mp4/probe")),a=c("mux.js/lib/tools/ts-inspector.js"),l=c("./playlist"),o=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=[{name:"VOD",run:function(e,t,n,r,i){if(n===1/0)return null;return{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(e,t,n,r,i){return e.datetimeToDisplayTime&&t.dateTimeObject?{time:t.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(e,t,n,r,i){var a=t.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===r&&void 0!==l.start){var d=Math.abs(i-l.start);if(null!==s&&s<d)break;(!o||null===s||d<=s)&&(s=d,o={time:l.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var u=t.discontinuityStarts[s],l=t.discontinuitySequence+s+1,d=e.discontinuities[l];if(d){var c=Math.abs(i-d.time);if(null!==o&&o<c)break;(!a||null===o||c<=o)&&(o=c,a={time:d.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}];f.syncPointStrategies=u;var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,o.default.EventTarget),t(d,[{key:"getSyncPoint",value:function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<r.segmentIndex&&(r.time*=-1),Math.abs(r.time+(0,l.sumDurations)(e,r.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,r){for(var i=[],a=0;a<u.length;a++){var o=u[a],s=o.run(this,e,t,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}),this.logger_("syncPoint found via <"+o.name+">:",s))}return i}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint with strategy <"+i+"> chosen: ",n),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var r=e.segments[n];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist sync:",t.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.dateTimeObject){var t=e.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=e.playlist,r=void 0;return(r=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,r)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),r}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=i.default.timescale(t.map.bytes),r=i.default.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=(0,a.inspect)(e.bytes,this.inspectCache_),n=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,r=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,r=t.audio[1].dtsTime),{start:n,end:r,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)this.logger_("tsO:",e.timestampOffset),r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=i-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var u=void 0;u=o<0?n.start-(0,l.sumDurations)(t,e.mediaIndex,i):n.end+(0,l.sumDurations)(t,e.mediaIndex+1,i),this.discontinuities[a]={time:u,accuracy:s}}}}},{key:"logger_",value:function(){}}]),d);function d(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.inspectCache_=void 0,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null,e.debug&&(this.logger_=o.default.log.bind(o.default,"sync-controller ->"))}f.default=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,"mux.js/lib/tools/ts-inspector.js":59}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.parseCodecs=function(e){var t,n=arguments.length<=0||void 0===e?"":e,r={codecCount:0};return r.codecCount=n.split(",").length,r.codecCount=r.codecCount||2,(t=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(n))&&(r.videoCodec=t[2],r.videoObjectTypeIndicator=t[3]),r.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(n),r.audioProfile=r.audioProfile&&r.audioProfile[2],r}},{}],20:[function(h,p,g){(function(e){"use strict";Object.defineProperty(g,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return String.fromCharCode.apply(null,e)}var i=n(h("./segment-loader")),s=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=n(h("global/window")),a=n(h("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),l=h("./bin-utils"),d=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),c=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,i.default),t(f,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return s.default.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return s.default.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e,t){var n=!(arguments.length<=1||void 0===t)&&t;if(!e)return null;var r=(0,l.initSegmentId)(e),i=this.initSegments_[r];if(n&&!i&&e.bytes){var a=d.byteLength+e.bytes.byteLength,o=new Uint8Array(a);o.set(e.bytes),o.set(d,e.bytes.byteLength),this.initSegments_[r]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:o}}return i||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(e,t){(0,a.default)(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",function(){e.state="READY",e.paused()||e.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof u.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=(t.state="WAITING_ON_VTTJS",t.subtitlesTrack_.tech_.one("vttjsloaded",i),t.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",i),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")}),{v:void 0});if("object"==typeof r)return r.v}n.requested=!0;try{this.parseVTTCues_(e)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY";function i(){t.handleSegment_()}}},{key:"parseVTTCues_",value:function(t){var e=void 0,n=!1;"function"==typeof u.default.TextDecoder?e=new u.default.TextDecoder("utf8"):(e=u.default.WebVTT.StringDecoder(),n=!0);var r=new u.default.WebVTT.Parser(u.default,u.default.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(e){s.default.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var i=t.segment.map.bytes;n&&(i=o(i)),r.parse(i)}var a=t.bytes;n&&(a=o(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-r.duration)}}}else r.empty=!0}}]),f);function f(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,e,t),this.mediaSource_=null,this.subtitlesTrack_=null}g.default=c,p.exports=g.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(e,n,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t,s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,u=(t=s)&&t.__esModule?t:{default:t};r.default=function(){return function e(t,r){t=(0,s.mergeOptions)({timeout:45e3},t);var n=e.beforeRequest||u.default.Hls.xhr.beforeRequest;if(n&&"function"==typeof n){var i=n(t);i&&(t=i)}var a=(0,s.xhr)(t,function(e,t){var n=a.response;!e&&n&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=n.byteLength||n.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(n||a.responseText)))),r(e,a)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},n.exports=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var d=null,i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(c,[{key:"decrypt",value:function(e,t,n,r,i,a){var o=this._key[1],s=e^o[0],u=r^o[1],l=n^o[2],d=t^o[3],c=void 0,f=void 0,h=void 0,p=o.length/4-2,g=void 0,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],T=y[3],E=y[4];for(g=0;g<p;g++)c=v[s>>>24]^_[u>>16&255]^b[l>>8&255]^T[255&d]^o[m],f=v[u>>>24]^_[l>>16&255]^b[d>>8&255]^T[255&s]^o[m+1],h=v[l>>>24]^_[d>>16&255]^b[s>>8&255]^T[255&u]^o[m+2],d=v[d>>>24]^_[s>>16&255]^b[u>>8&255]^T[255&l]^o[m+3],m+=4,s=c,u=f,l=h;for(g=0;g<4;g++)i[(3&-g)+a]=E[s>>>24]<<24^E[u>>16&255]<<16^E[l>>8&255]<<8^E[255&d]^o[m++],c=s,s=u,u=l,l=d,d=c}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d=d||function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],d=void 0,c=void 0,f=void 0,h=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=d||1,s=l[s]||1)for(f=(f=s^s<<1^s<<2^s<<3^s<<4)>>8^255&f^99,p=16843009*u[c=u[d=u[i[r[o]=f]=o]]]^65537*c^257*d^16843008*o,h=257*u[f]^16843008*f,a=0;a<4;a++)t[a][o]=h=h<<24^h>>>8,n[a][f]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}(),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var t=void 0,n=void 0,r=void 0,i=void 0,a=void 0,o=this._tables[0][4],s=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(i=e.slice(0),a=[],this._key=[i,a],t=u;t<4*u+28;t++)r=i[t-1],(t%u==0||8===u&&t%u==4)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],t%u==0&&(r=r<<8^r>>>24^l<<24,l=l<<1^283*(l>>7))),i[t]=i[t-u]^r;for(n=0;t;n++,t--)r=i[3&n?t:t-4],a[n]=t<=4||n<4?r:s[0][o[r>>>24]]^s[1][o[r>>16&255]]^s[2][o[r>>8&255]]^s[3][o[255&r]]}n.default=i,t.exports=n.default},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e("./stream"),s=(a=o)&&a.__esModule?a:{default:a},u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s.default),r(l,[{key:"processJob_",value:function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,s.default),this.jobs=[],this.delay=1,this.timeout_=null}n.default=u,t.exports=n.default},{"./stream":26}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}function m(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24}function o(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new y.default(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0;for(s=n[0],u=n[1],l=n[2],d=n[3],g=0;g<r.length;g+=4)c=m(r[g]),f=m(r[g+1]),h=m(r[g+2]),p=m(r[g+3]),i.decrypt(c,f,h,p,o,g),o[g]=m(o[g]^s),o[g+1]=m(o[g+1]^u),o[g+2]=m(o[g+2]^l),o[g+3]=m(o[g+3]^d),s=c,u=f,l=h,d=p;return a}var y=a(e("./aes")),u=a(e("./async-stream")),l=e("pkcs7");n.decrypt=o;var s=(r(d,[{key:"decryptChunk_",value:function(t,n,r,i){return function(){var e=o(t,n,r);i.set(e,t.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),d);function d(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var i=d.STEP,a=new Int32Array(e.buffer),o=new Uint8Array(e.byteLength),s=0;for(this.asyncStream_=new u.default,this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+i),t,n,o)),s=i;s<a.length;s+=i)n=new Uint32Array([m(a[s-4]),m(a[s-3]),m(a[s-2]),m(a[s-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(s,s+i),t,n,o));this.asyncStream_.push(function(){r(null,(0,l.unpad)(o))})}n.Decrypter=s,n.default={Decrypter:s,decrypt:o}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e("./decrypter"),a=e("./async-stream"),o=(r=a)&&r.__esModule?r:{default:r};n.default={decrypt:i.decrypt,Decrypter:i.Decrypter,AsyncStream:o.default},t.exports=n.default},{"./async-stream":23,"./decrypter":24}],26:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){var n;return!!this.listeners[e]&&(n=this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),-1<n)}},{key:"trigger",value:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;if(n=this.listeners[e])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(a=Array.prototype.slice.call(arguments,1),i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(t){this.on("data",function(e){t.push(e)})}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.listeners={}}n.default=i,t.exports=n.default},{}],27:[function(e,t,n){"use strict";var r;t.exports=function(e){var t=r[e.byteLength%16||0],n=new Uint8Array(e.byteLength+t.length);return n.set(e),n.set(t,e.byteLength),n},r=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(e,t,n){"use strict";n.pad=e("./pad.js"),n.unpad=e("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(e,t,n){"use strict";t.exports=function(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}],30:[function(e,t,n){},{}],31:[function(i,a,e){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},r=i("min-document");t="undefined"!=typeof document?document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(n["__GLOBAL_DOCUMENT_CACHE@4"]=r),a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":30}],32:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t,n){"use strict";var r=o(e("./line-stream")),i=o(e("./parse-stream")),a=o(e("./parser"));function o(e){return e&&e.__esModule?e:{default:e}}t.exports={LineStream:r.default,ParseStream:i.default,Parser:a.default}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e("./stream");var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,((a=o)&&a.__esModule?a:{default:a}).default),r(u,[{key:"push",value:function(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return e.buffer="",e}n.default=s},{"./stream":37}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e("./stream"),s=(a=o)&&a.__esModule?a:{default:a};function c(e){for(var t=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=t.length,i=void 0;r--;)""!==t[r]&&((i=/([^=]*)=(.*)/.exec(t[r]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n}var u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,s.default),r(l,[{key:"push",value:function(e){var t=void 0,n=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0])if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var r=c(t[1]);if(r.URI&&(n.uri=r.URI),r.BYTERANGE){var i=r.BYTERANGE.split("@"),a=d(i,2),o=a[0],s=a[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),s&&(n.byterange.offset=parseInt(s,10))}}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=c(t[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),l={};u[0]&&(l.width=parseInt(u[0],10)),u[1]&&(l.height=parseInt(u[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=c(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=c(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)});else this.trigger("data",{type:"uri",uri:e})}}]),l);function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this))}n.default=u},{"./stream":37}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=o(e("./stream")),f=o(e("./line-stream")),h=o(e("./parse-stream"));function o(e){return e&&e.__esModule?e:{default:e}}var s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(p,a.default),r(p,[{key:"push",value:function(e){this.lineStream.push(e)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),p);function p(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));e.lineStream=new f.default,e.parseStream=new h.default,e.lineStream.pipe(e.parseStream);var i=e,a=[],o={},s=void 0,u=void 0,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var n=void 0,r=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((o.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((o.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(o.duration=t.duration),0===t.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(u.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):u=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,d=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){s={},t.uri&&(s.uri=t.uri),t.byterange&&(s.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(o.attributes||(o.attributes={}),c(o.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},n=e[t.attributes["GROUP-ID"]],(r={default:/yes/i.test(t.attributes.DEFAULT)}).default?r.autoselect=!0:r.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(r.language=t.attributes.LANGUAGE),t.attributes.URI&&(r.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(r.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(r.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(r.forced=/yes/i.test(t.attributes.FORCED)),n[t.attributes.NAME]=r}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){d+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},"cue-out":function(){o.cueOut=t.data},"cue-out-cont":function(){o.cueOutCont=t.data},"cue-in":function(){o.cueIn=t.data}}[t.tagType]||function(){}).call(i)},uri:function(){o.uri=t.uri,a.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),u&&(o.key=u),o.timeline=d,s&&(o.map=s),o={}},comment:function(){}})[t.type].call(i)}),e}n.default=s},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n}},{key:"trigger",value:function(e,t){var n=this.listeners[e],r=void 0,i=void 0,a=void 0;if(n)if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(a=Array.prototype.slice.call(arguments,1),i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(t){this.on("data",function(e){t.push(e)})}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.listeners={}}n.default=i},{}],38:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js");(r=function(){var s=new Uint8Array,u=0;r.prototype.init.call(this),this.setTimestamp=function(e){u=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},this.push=function(e){var t,n,r,i,a=0,o=0;for(s.length?(i=s.length,(s=new Uint8Array(e.byteLength+i)).set(s.subarray(0,i)),s.set(e,i)):s=e;3<=s.length-o;)if(s[o]!=="I".charCodeAt(0)||s[o+1]!=="D".charCodeAt(0)||s[o+2]!=="3".charCodeAt(0))if(!0&s[o]&&240==(240&s[o+1])){if(s.length-o<7)break;if((a=this.parseAdtsSize(s,o))>s.length)break;r={type:"audio",data:s.subarray(o,o+a),pts:u,dts:u},this.trigger("data",r),o+=a}else o++;else{if(s.length-o<10)break;if((a=this.parseId3TagSize(s,o))>s.length)break;n={type:"timed-metadata",data:s.subarray(o,o+a)},this.trigger("data",n),o+=a}t=s.length-o,s=0<t?s.subarray(o):new Uint8Array}}).prototype=new i,t.exports=r},{"../utils/stream.js":62}],39:[function(e,t,n){"use strict";function s(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];t.exports={parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?20+n:10+n},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return r[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=s(e.subarray(10,14)));do{if((n=s(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i)))break;var a=r.subarray(i+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return o*=4,o+=3&a[7]}}t+=10,t+=n}while(t<e.byteLength);return null}}},{}],40:[function(e,t,n){"use strict";var r,i=e("../utils/stream.js"),d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(r=function(){var l;r.prototype.init.call(this),this.push=function(e){var t,n,r,i,a,o,s=0,u=0;if("audio"===e.type)for(l?(i=l,(l=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),l.set(e.data,i.byteLength)):l=e.data;s+5<l.length;)if(255===l[s]&&240==(246&l[s+1])){if(n=2*(1&~l[s+1]),t=(3&l[s+3])<<11|l[s+4]<<3|(224&l[s+5])>>5,o=9e4*(a=1024*(1+(3&l[s+6])))/d[(60&l[s+2])>>>2],r=s+t,l.byteLength<r)return;if(this.trigger("data",{pts:e.pts+u*o,dts:e.dts+u*o,sampleCount:a,audioobjecttype:1+(l[s+2]>>>6&3),channelcount:(1&l[s+2])<<2|(192&l[s+3])>>>6,samplerate:d[(60&l[s+2])>>>2],samplingfrequencyindex:(60&l[s+2])>>>2,samplesize:16,data:l.subarray(s+7+n,r)}),l.byteLength===r)return void(l=void 0);u++,l=l.subarray(r)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new i,t.exports=r},{"../utils/stream.js":62}],41:[function(e,t,n){"use strict";var u,l,b,r=e("../utils/stream.js"),T=e("../utils/exp-golomb.js");(l=function(){var n,r,i=0;l.prototype.init.call(this),this.push=function(e){var t;for(r=r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),t):e.data;i<r.byteLength-3;i++)if(1===r[i+2]){n=i+5;break}for(;n<r.byteLength;)switch(r[n]){case 0:if(0!==r[n-1]){n+=2;break}if(0!==r[n-2]){n++;break}for(i+3!==n-2&&this.trigger("data",r.subarray(i+3,n-2));1!==r[++n]&&n<r.length;);i=n-2,n+=3;break;case 1:if(0!==r[n-1]||0!==r[n-2]){n+=3;break}this.trigger("data",r.subarray(i+3,n-2)),i=n-2,n+=3;break;default:n+=3}r=r.subarray(i),n-=i,i=0},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(i+3)),r=null,i=0,this.trigger("done")}}).prototype=new r,b={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(u=function(){var n,r,i,a,o,s,_,t=new l;u.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(r=e.trackId,i=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:r,pts:i,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=s(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),this.flush=function(){t.flush()},_=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},o=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},s=function(e){var t,n,r,i,a,o,s,u,l,d,c,f,h,p=0,g=0,m=0,y=0,v=1;if(n=(t=new T(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),b[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(c=3!==a?8:12,h=0;h<c;h++)t.readBoolean()&&_(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),s=t.readUnsignedExpGolomb(),h=0;h<s;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:f=[1,1];break;case 2:f=[12,11];break;case 3:f=[10,11];break;case 4:f=[16,11];break;case 5:f=[40,33];break;case 6:f=[24,11];break;case 7:f=[20,11];break;case 8:f=[32,11];break;case 9:f=[80,33];break;case 10:f=[18,11];break;case 11:f=[15,11];break;case 12:f=[64,33];break;case 13:f=[160,99];break;case 14:f=[4,3];break;case 15:f=[3,2];break;case 16:f=[2,1];break;case 255:f=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}f&&(v=f[0]/f[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(u+1)-2*p-2*g)*v),height:(2-d)*(l+1)*16-2*m-2*y}}}).prototype=new r,t.exports={H264Stream:u,NalByteStream:l}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(e,t,n){function r(e){for(var t=[];e--;)t.push(0);return t}var i,a=[33,16,5,32,164,27],o=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],s={96e3:[a,[227,64],r(154),[56]],88200:[a,[231],r(170),[56]],64e3:[a,[248,192],r(240),[56]],48e3:[a,[255,192],r(268),[55,148,128],r(54),[112]],44100:[a,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[a,[255,192],r(268),[55,234],r(226),[112]],24e3:[a,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[a,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[o,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[o,r(268),[3,121,16],r(47),[7]]};t.exports=(i=s,Object.keys(i).reduce(function(e,t){return e[t]=new Uint8Array(i[t].reduce(function(e,t){return e.concat(t)},[])),e},{}))},{}],43:[function(e,t,n){"use strict";var r=e("../utils/stream.js"),i=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};i.prototype=new r,i.prototype.flush=function(e){var t,n,r,i,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?i=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(i=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(n=this.pendingCaptions[r]).startTime=n.startPts-i,n.startTime/=9e4,n.endTime=n.endPts-i,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)(t=this.pendingMetadata[r]).cueTime=t.pts-i,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},t.exports=i},{"../utils/stream.js":62}],44:[function(e,t,n){"use strict";var u=e("./flv-tag.js");t.exports=function(e,t,n){var r,i,a,o=new Uint8Array(9),s=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),e<=0?((i=new Uint8Array(o.byteLength+4)).set(o),i.set([0,0,0,0],o.byteLength)):((r=new u(u.METADATA_TAG)).pts=r.dts=0,r.writeMetaDataDouble("duration",e),a=r.finalize().length,(i=new Uint8Array(o.byteLength+a)).set(o),i.set(s.byteLength,a)),i}},{"./flv-tag.js":45}],45:[function(e,t,n){"use strict";var l;(l=function(e,n){function a(e,t){var n,r=e.position+t;r<e.bytes.byteLength||((n=new Uint8Array(2*r)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))}var t,r=0,i=16384,o=l.widthBytes||new Uint8Array("width".length),s=l.heightBytes||new Uint8Array("height".length),u=l.videocodecidBytes||new Uint8Array("videocodecid".length);if(!l.widthBytes){for(t=0;t<"width".length;t++)o[t]="width".charCodeAt(t);for(t=0;t<"height".length;t++)s[t]="height".charCodeAt(t);for(t=0;t<"videocodecid".length;t++)u[t]="videocodecid".charCodeAt(t);l.widthBytes=o,l.heightBytes=s,l.videocodecidBytes=u}switch(this.keyFrame=!1,e){case l.VIDEO_TAG:this.length=16,i*=6;break;case l.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case l.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(i),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r,i=t||0;r=i+(n=n||e.byteLength),a(this,n),this.bytes.set(e.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===r?0:this.length-(r+4)},this.startNalUnit=function(){if(0<r)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:0<r&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,t;switch(this.bytes[0]){case l.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case l.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case l.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return t=this.length-11,this.bytes[1]=(16711680&t)>>>16,this.bytes[2]=(65280&t)>>>8,this.bytes[3]=(255&t)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=l.frameTime(this.bytes),this}}).AUDIO_TAG=8,l.VIDEO_TAG=9,l.METADATA_TAG=18,l.isAudioFrame=function(e){return l.AUDIO_TAG===e[0]},l.isVideoFrame=function(e){return l.VIDEO_TAG===e[0]},l.isMetaData=function(e){return l.METADATA_TAG===e[0]},l.isKeyFrame=function(e){return l.isVideoFrame(e)?23===e[11]:!!l.isAudioFrame(e)||!!l.isMetaData(e)},l.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=l},{}],46:[function(e,t,n){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),getFlvHeader:e("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(e,t,n){"use strict";t.exports=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})}},{}],48:[function(e,t,n){"use strict";var p,g,m,r,s,u,i=e("../utils/stream.js"),l=e("./flv-tag.js"),y=e("../m2ts/m2ts.js"),v=e("../codecs/adts.js"),_=e("../codecs/h264").H264Stream,b=e("./coalesce-stream.js"),d=e("./tag-list.js");r=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},s=function(e,t){var n=new l(l.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},u=function(e,t){var n,r=new l(l.VIDEO_TAG,!0);for(r.dts=t,r.pts=t,r.writeByte(1),r.writeByte(e.profileIdc),r.writeByte(e.profileCompatibility),r.writeByte(e.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(e.sps[0].length),r.writeBytes(e.sps[0]),r.writeByte(e.pps.length),n=0;n<e.pps.length;++n)r.writeShort(e.pps[n].length),r.writeBytes(e.pps[n]);return r},(m=function(i){var a,o=[],s=[];m.prototype.init.call(this),this.push=function(e){r(i,e),i&&(i.audioobjecttype=e.audioobjecttype,i.channelcount=e.channelcount,i.samplerate=e.samplerate,i.samplingfrequencyindex=e.samplingfrequencyindex,i.samplesize=e.samplesize,i.extraData=i.audioobjecttype<<11|i.samplingfrequencyindex<<7|i.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),o.push(e)},this.flush=function(){var e,t,n,r=new d;if(0!==o.length){for(n=-1/0;o.length;)e=o.shift(),s.length&&e.pts>=s[0]&&(n=s.shift(),this.writeMetaDataTags(r,n)),(i.extraData!==a||1e3<=e.pts-n)&&(this.writeMetaDataTags(r,e.pts),a=i.extraData,n=e.pts),(t=new l(l.AUDIO_TAG)).pts=e.pts,t.dts=e.dts,t.writeBytes(e.data),r.push(t.finalize());s.length=0,a=null,this.trigger("data",{track:i,tags:r.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,t){var n;(n=new l(l.METADATA_TAG)).pts=t,n.dts=t,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===i.channelcount),n.writeMetaDataDouble("audiosamplerate",i.samplerate),n.writeMetaDataDouble("audiosamplesize",16),e.push(n.finalize()),(n=new l(l.AUDIO_TAG,!0)).pts=t,n.dts=t,n.view.setUint16(n.position,i.extraData),n.position+=2,n.length=Math.max(n.length,n.position),e.push(n.finalize())},this.onVideoKeyFrame=function(e){s.push(e)}}).prototype=new i,(g=function(i){var a,o,n=[];g.prototype.init.call(this),this.finishFrame=function(e,t){if(t){if(a&&i&&i.newMetadata&&(t.keyFrame||0===e.length)){var n=s(a,t.dts).finalize(),r=u(i,t.dts).finalize();n.metaDataTag=r.metaDataTag=!0,e.push(n),e.push(r),i.newMetadata=!1,this.trigger("keyframe",t.dts)}t.endNalUnit(),e.push(t.finalize()),o=null}},this.push=function(e){r(i,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var e,t=new d;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(e=n.shift()).nalUnitType?(i.newMetadata=!0,a=e.config,i.width=a.width,i.height=a.height,i.sps=[e.data],i.profileIdc=a.profileIdc,i.levelIdc=a.levelIdc,i.profileCompatibility=a.profileCompatibility,o.endNalUnit()):"pic_parameter_set_rbsp"===e.nalUnitType?(i.newMetadata=!0,i.pps=[e.data],o.endNalUnit()):"access_unit_delimiter_rbsp"===e.nalUnitType?(o&&this.finishFrame(t,o),(o=new l(l.VIDEO_TAG)).pts=e.pts,o.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(o.keyFrame=!0),o.endNalUnit()),o.startNalUnit(),o.writeBytes(e.data);o&&this.finishFrame(t,o),this.trigger("data",{track:i,tags:t.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new i,(p=function(e){var t,n,r,i,a,o,s,u,l,d,c,f,h=this;p.prototype.init.call(this),e=e||{},this.metadataStream=new y.MetadataStream,e.metadataStream=this.metadataStream,t=new y.TransportPacketStream,n=new y.TransportParseStream,r=new y.ElementaryStream,i=new y.TimestampRolloverStream("video"),a=new y.TimestampRolloverStream("audio"),o=new y.TimestampRolloverStream("timed-metadata"),s=new v,u=new _,f=new b(e),t.pipe(n).pipe(r),r.pipe(i).pipe(u),r.pipe(a).pipe(s),r.pipe(o).pipe(this.metadataStream).pipe(f),c=new y.CaptionStream,u.pipe(c).pipe(f),r.on("data",function(e){var t,n,r;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(r=e.tracks[t]);n&&!l&&(f.numberOfTracks++,l=new g(n),u.pipe(l).pipe(f)),r&&!d&&(f.numberOfTracks++,d=new m(r),s.pipe(d).pipe(f),l&&l.on("keyframe",d.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){c.reset()},f.on("data",function(e){h.trigger("data",e)}),f.on("done",function(){h.trigger("done")})}).prototype=new i,t.exports=p},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(e,t,n){"use strict";var r=e("../utils/stream"),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new o(0,0),new o(0,1),new o(1,0),new o(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};i.prototype=new r,i.prototype.push=function(e){var t,n;"sei_rbsp"===e.nalUnitType&&4===(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,i=r=0}return n}(e.escapedRBSP)).payloadType&&(n=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[2+i]&&(a.ccData=t[3+i]<<8|t[4+i],o.push(a));return o}(e.pts,n)),this.latestDts_=e.dts))},i.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},i.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},i.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},i.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};function s(e){return null===e?"":(e=a[e]||e,String.fromCharCode(e))}function u(){for(var e=[],t=15;t--;)e.push("");return e}var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},l=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],o=function(e,t){o.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(t===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(t===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=u();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(t===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(r,i))a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=l.indexOf(7968&t);o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=s(r),a+=s(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};o.prototype=new r,o.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},o.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},o.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},o.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},o.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},o.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},o.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},o.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},o.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},o.prototype.isNormalChar=function(e){return 32<=e&&e<=127},o.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},o.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},o.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},o.prototype.rollUp=function(e,t){var n=this.displayed_[14];n+=t,this.displayed_[14]=n},o.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<14;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[14]=""},o.prototype.paintOn=function(){},t.exports={CaptionStream:i,Cea608Stream:o}},{"../utils/stream":62}],50:[function(e,t,n){"use strict";var r,s,u,i=e("../utils/stream.js"),a=e("./caption-stream"),d=e("./stream-types"),o=e("./timestamp-rollover-stream").TimestampRolloverStream,c=e("./stream-types.js");(r=function(){var i=new Uint8Array(188),a=0;r.prototype.init.call(this),this.push=function(e){var t,n=0,r=188;for(a?((t=new Uint8Array(e.byteLength+a)).set(i.subarray(0,a)),t.set(e,a),a=0):t=e;r<t.byteLength;)71!==t[n]||71!==t[r]?(n++,r++):(this.trigger("data",t.subarray(n,r)),n+=188,r+=188);n<t.byteLength&&(i.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){188===a&&71===i[0]&&(this.trigger("data",i),a=0),this.trigger("done")}}).prototype=new i,(s=function(){var r,i,a,o;s.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=void 0,r=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?i(e.subarray(n),t):a(e.subarray(n),t)},i=function(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},a=function(e,t){var n,r;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var i=e[r],a=(31&e[r+1])<<8|e[r+2];i===d.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:i===d.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:i===d.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=i),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",r(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",r(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=d.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=d.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new i,s.STREAM_TYPES={h264:27,adts:15},(u=function(){function r(e,t,n){var r,i,a=new Uint8Array(e.size),o={type:t},s=0,u=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,s=0;s<e.data.length;s++)i=e.data[s],a.set(i.data,u),u+=i.data.byteLength;!function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])}(a,o),r="video"===t||o.packetLength<=e.size,(n||r)&&(e.size=0,e.data.length=0),r&&l.trigger("data",o)}}var l=this,i={data:[],size:0},a={data:[],size:0},o={data:[],size:0};u.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case d.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:e=i,t="video";break;case d.ADTS_STREAM_TYPE:e=a,t="audio";break;case d.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&r(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=n.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),l.trigger("data",e)}})[n.type]()},this.flush=function(){r(i,"video"),r(a,"audio"),r(o,"timed-metadata"),this.trigger("done")}}).prototype=new i;var l={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:r,TransportParseStream:s,ElementaryStream:u,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var f in d)d.hasOwnProperty(f)&&(l[f]=d[f]);t.exports=l},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(e,t,n){"use strict";function r(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}function i(e,t,n){return decodeURIComponent(r(e,t,n))}function f(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]}var a,o=e("../utils/stream"),s=e("./stream-types"),h={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.value=i(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=i(e.data,1,t),e.url=i(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(r(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(a=function(e){var t,u={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},l=0,d=[],c=0;if(a.prototype.init.call(this),this.dispatchType=s.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(t=0;t<u.descriptor.length;t++)this.dispatchType+=("00"+u.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,r,i,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(c=0,d.length=0),0===d.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))u.debug&&console.log("Skipping unrecognized metadata packet");else if(d.push(e),c+=e.data.byteLength,1===d.length&&(l=f(e.data.subarray(6,10)),l+=10),!(c<l)){for(t={data:new Uint8Array(l),frames:[],pts:d[0].pts,dts:d[0].dts},a=0;a<l;)t.data.set(d[0].data.subarray(0,l-a),a),a+=d[0].data.byteLength,c-=d[0].data.byteLength,d.shift();n=10,64&t.data[5]&&(n+=4,n+=f(t.data.subarray(10,14)),l-=f(t.data.subarray(16,20)));do{if((r=f(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((i={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+r+10)}).key=i.id,h[i.id]&&(h[i.id](i),"com.apple.streaming.transportStreamTimestamp"===i.owner)){var o=i.data,s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;s*=4,s+=3&o[7],i.timeStamp=s,void 0===t.pts&&void 0===t.dts&&(t.pts=i.timeStamp,t.dts=i.timeStamp),this.trigger("timestamp",i)}t.frames.push(i),n+=10,n+=r}while(n<l);this.trigger("data",t)}}}).prototype=new o,t.exports=a},{"../utils/stream":62,"./stream-types":53}],52:[function(e,t,n){"use strict";function r(e){var t=31&e[1];return t<<=8,t|=e[2]}function s(e){return!!(64&e[1])}function u(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t}function o(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}}var i=e("./stream-types.js");t.exports={parseType:function(e,t){var n=r(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=s(e),n=4+u(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=s(e),r=4+u(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var a=12+((15&e[r+10])<<8|e[r+11]);a<i;){var o=r+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:s,parsePesType:function(e,t){switch(t[r(e)]){case i.H264_STREAM_TYPE:return"video";case i.ADTS_STREAM_TYPE:return"audio";case i.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!s(e))return null;var t=4+u(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+u(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}for(i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0);1!==n[++r]&&r<n.length;);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===o(31&n[i+3])&&(a=!0),a}}},{"./stream-types.js":53}],53:[function(e,t,n){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(e,t,n){"use strict";function r(e,t){var n=1;for(t<e&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}var i=e("../utils/stream"),a=function(e){var t,n;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===n&&(n=e.dts),e.dts=r(e.dts,n),e.pts=r(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){t=n=void 0}};a.prototype=new i,t.exports={TimestampRolloverStream:a,handleRollover:r}},{"../utils/stream":62}],55:[function(e,t,n){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(e,t,n){"use strict";var s,r,i,a,o,u,l,d,c,f,h,p,g,m,y,v,_,b,T,E,S,w,A,C,R,I,M,O,D,k,P,L,x,N,F,B,U,j,G,H,q,V=Math.pow(2,32)-1;!function(){var e;if(A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in A)A.hasOwnProperty(e)&&(A[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),I=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),R=new Uint8Array([0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),O=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),D={video:M,audio:O},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),P=new Uint8Array([0,0,0,0,0,0,0,0]),x=new Uint8Array([0,0,0,0,0,0,0,0]),N=x,F=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=x,k=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),s=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return s(A.dinf,s(A.dref,L))},i=function(e){return s(A.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(){return s(A.ftyp,C,R,C,I)},v=function(e){return s(A.hdlr,D[e])},o=function(e){return s(A.mdat,e)},y=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),s(A.mdhd,t)},m=function(e){return s(A.mdia,y(e),v(e.type),l(e))},u=function(e){return s(A.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},l=function(e){return s(A.minf,"video"===e.type?s(A.vmhd,k):s(A.smhd,P),r(),b(e))},d=function(e,t){for(var n=[],r=t.length;r--;)n[r]=E(t[r]);return s.apply(null,[A.moof,u(e)].concat(n))},c=function(e){for(var t=e.length,n=[];t--;)n[t]=p(e[t]);return s.apply(null,[A.moov,h(4294967295)].concat(n).concat(f(e)))},f=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return s.apply(null,[A.mvex].concat(n))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(A.mvhd,t)},_=function(e){var t,n,r=e.samples||[],i=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)t=r[n].flags,i[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return s(A.sdtp,i)},b=function(e){return s(A.stbl,T(e),s(A.stts,B),s(A.stsc,N),s(A.stsz,F),s(A.stco,x))},T=function(e){return s(A.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):j(e))},U=function(e){var t,n=e.sps||[],r=e.pps||[],i=[],a=[];for(t=0;t<n.length;t++)i.push((65280&n[t].byteLength)>>>8),i.push(255&n[t].byteLength),i=i.concat(Array.prototype.slice.call(n[t]));for(t=0;t<r.length;t++)a.push((65280&r[t].byteLength)>>>8),a.push(255&r[t].byteLength),a=a.concat(Array.prototype.slice.call(r[t]));return s(A.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(A.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(i).concat([r.length]).concat(a))),s(A.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},j=function(e){return s(A.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},g=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return s(A.tkhd,t)},E=function(e){var t,n,r,i,a,o;return t=s(A.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(e.baseMediaDecodeTime/(1+V)),o=Math.floor(e.baseMediaDecodeTime%(1+V)),n=s(A.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),92,"audio"===e.type?(r=w(e,92),s(A.traf,t,n,r)):(i=_(e),r=w(e,i.length+92),s(A.traf,t,n,r,i))},p=function(e){return e.duration=e.duration||4294967295,s(A.trak,g(e),m(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),s(A.trex,t)},q=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},H=function(e,t){var n,r,i,a;for(t+=20+16*(r=e.samples||[]).length,n=q(r,t),a=0;a<r.length;a++)i=r[a],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size,i.flags.isLeading<<2|i.flags.dependsOn,i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,61440&i.flags.degradationPriority,15&i.flags.degradationPriority,(4278190080&i.compositionTimeOffset)>>>24,(16711680&i.compositionTimeOffset)>>>16,(65280&i.compositionTimeOffset)>>>8,255&i.compositionTimeOffset]);return s(A.trun,new Uint8Array(n))},G=function(e,t){var n,r,i,a;for(t+=20+8*(r=e.samples||[]).length,n=q(r,t),a=0;a<r.length;a++)i=r[a],n=n.concat([(4278190080&i.duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size]);return s(A.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?G(e,t):H(e,t)},t.exports={ftyp:a,mdat:o,moof:d,moov:c,initSegment:function(e){var t,n=a(),r=c(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}}},{}],57:[function(e,t,n){"use strict";var u,l,r,i;u=function(e,t){var n,r,i,a,o,s=[];if(!t.length)return null;for(n=0;n<e.byteLength;)r=e[n]<<24,r|=e[n+1]<<16,r|=e[n+2]<<8,r|=e[n+3],i=l(e.subarray(n+4,n+8)),a=1<r?n+r:e.byteLength,i===t[0]&&(1===t.length?s.push(e.subarray(n+8,a)):(o=u(e.subarray(n+8,a),t.slice(1))).length&&(s=s.concat(o))),n=a;return s},l=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},r=function(e){return u(e,["moov","trak"]).reduce(function(e,t){var n,r,i,a;return(n=u(t,["tkhd"])[0])?(i=n[r=0===n[0]?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3],(a=u(t,["mdia","mdhd"])[0])?(r=0===a[0]?12:20,e[i]=a[r]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3],e):null):null},{})},i=function(i,e){var t,n,r;return t=u(e,["moof","traf"]),n=[].concat.apply([],t.map(function(r){return u(r,["tfhd"]).map(function(e){var t,n;return t=e[4]<<24|e[5]<<16|e[6]<<8|e[7],n=i[t]||9e4,(u(r,["tfdt"]).map(function(e){var t,n;return t=e[0],n=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(n*=Math.pow(2,32),n+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),n})[0]||1/0)/n})})),r=Math.min.apply(null,n),isFinite(r)?r:0},t.exports={parseType:l,timescale:r,startTime:i}},{}],58:[function(e,t,n){"use strict";var f,s,u,l,d,h,p,g,m,c,r=e("../utils/stream.js"),y=e("./mp4-generator.js"),v=e("../m2ts/m2ts.js"),_=e("../codecs/adts.js"),b=e("../codecs/h264").H264Stream,T=e("../aac"),E=e("../data/silence"),S=e("../utils/clock"),w=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],A=["width","height","profileIdc","levelIdc","profileCompatibility"];d=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},m=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},c=function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n},(s=function(i){var a=[],o=0,t=0,l=0,d=1/0;s.prototype.init.call(this),this.push=function(t){h(i,t),i&&w.forEach(function(e){i[e]=t[e]}),a.push(t)},this.setEarliestDts=function(e){t=e-i.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){d=e},this.setAudioAppendStart=function(e){l=e},this.flush=function(){var e,t,n,r;0!==a.length&&(e=this.trimAdtsFramesByEarliestDts_(a),i.baseMediaDecodeTime=g(i),this.prefixWithSilence_(i,e),i.samples=this.generateSampleTable_(e),n=y.mdat(this.concatenateFrameData_(e)),a=[],t=y.moof(o,[i]),r=new Uint8Array(t.byteLength+n.byteLength),o++,r.set(t),r.set(n,t.byteLength),p(i),this.trigger("data",{track:i,boxes:r})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var n,r,i,a,o=0,s=0,u=0;if(t.length&&(n=S.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),r=Math.ceil(9e4/(e.samplerate/1024)),l&&d&&(o=n-Math.max(l,d),u=(s=Math.floor(o/r))*r),!(s<1||45e3<u))){for(i=(i=E[e.samplerate])||t[0].data,a=0;a<s;a++)t.splice(a,0,{data:i});e.baseMediaDecodeTime-=Math.floor(S.videoTsToAudioTs(u,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return i.minSegmentDts>=t?e:(i.minSegmentDts=1/0,e.filter(function(e){return e.dts>=t&&(i.minSegmentDts=Math.min(i.minSegmentDts,e.dts),i.minSegmentPts=i.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},this.concatenateFrameData_=function(e){var t,n,r=0,i=new Uint8Array(c(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}}).prototype=new r,(f=function(s,u){var t,n,l=0,d=[],c=[];u=u||{},f.prototype.init.call(this),delete s.minPTS,this.gopCache_=[],this.push=function(e){h(s,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,s.sps=[e.data],A.forEach(function(e){s[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,s.pps=[e.data]),d.push(e)},this.flush=function(){for(var e,t,n,r,i,a;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0===d.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=this.groupNalsIntoFrames_(d),(n=this.groupFramesIntoGops_(e))[0][0].keyFrame||((t=this.getGopForFusion_(d[0],s))?(n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=this.extendFirstKeyFrame_(n)),c.length){var o;if(!(o=u.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");p(s),n=o}h(s,n),s.samples=this.generateSampleTable_(n),i=y.mdat(this.concatenateNalData_(n)),s.baseMediaDecodeTime=g(s),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:s.pps,sps:s.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.trigger("baseMediaDecodeTime",s.baseMediaDecodeTime),this.trigger("timelineStartInfo",s.timelineStartInfo),r=y.moof(l,[s]),a=new Uint8Array(r.byteLength+i.byteLength),l++,a.set(r),a.set(i,r.byteLength),this.trigger("data",{track:s,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){p(s),n=t=void 0},this.getGopForFusion_=function(e){var t,n,r,i,a,o=1/0;for(a=0;a<this.gopCache_.length;a++)r=(i=this.gopCache_[a]).gop,s.pps&&m(s.pps[0],i.pps[0])&&s.sps&&m(s.sps[0],i.sps[0])&&(r.dts<s.timelineStartInfo.dts||-1e4<=(t=e.dts-r.dts-r.duration)&&t<=45e3&&(!n||t<o)&&(n=i,o=t));return n?n.gop:null},this.extendFirstKeyFrame_=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,r=[],i=[];for(t=r.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},this.groupFramesIntoGops_=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},this.generateSampleTable_=function(e,t){var n,r,i,a,o,s=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],(i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=s,i.compositionTimeOffset=o.pts-o.dts,i.duration=o.duration,i.size=4*o.length,i.size+=o.byteLength,o.keyFrame&&(i.flags.dependsOn=2),s+=i.size,u.push(i);return u},this.concatenateNalData_=function(e){var t,n,r,i,a,o,s=0,u=e.byteLength,l=e.nalCount,d=new Uint8Array(u+4*l),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],c.setUint32(s,o.data.byteLength),s+=4,d.set(o.data,s),s+=o.data.byteLength;return d},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,s,u;for(a=e.byteLength,o=e.nalCount,s=e.duration,t=n=0;t<c.length&&n<e.length&&(r=c[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,s-=i.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=s,u.nalCount=o,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o,s;for(t=c.length-1,n=e.length-1,a=null,o=!1;0<=t&&0<=n;){if(r=c[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===c.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(s=o?n:a))return e;var u=e.slice(s),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){c=e}}).prototype=new r,h=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},p=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},g=function(e){var t,n=e.minSegmentDts-e.timelineStartInfo.dts;return t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/9e4,t=Math.floor(t)),t},(l=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,l.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new r,l.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,A.forEach(function(e){o.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,w.forEach(function(e){o.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=y.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=t.startPts-s,t.startTime/=9e4,t.endTime=t.endPts-s,t.endTime/=9e4,o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(u=function(r){var i,a,o=this,n=!0;u.prototype.init.call(this),r=r||{},this.baseMediaDecodeTime=r.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new v.MetadataStream,t.aacStream=new T,t.audioTimestampRolloverStream=new v.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new v.TimestampRolloverStream("timed-metadata"),t.adtsStream=new _,t.coalesceStream=new l(r,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:o.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new s(a),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new v.MetadataStream,n.packetStream=new v.TransportPacketStream,n.parseStream=new v.TransportParseStream,n.elementaryStream=new v.ElementaryStream,n.videoTimestampRolloverStream=new v.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new v.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new v.TimestampRolloverStream("timed-metadata"),n.adtsStream=new _,n.h264Stream=new b,n.captionStream=new v.CaptionStream,n.coalesceStream=new l(r,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)i||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime):(i=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=o.baseMediaDecodeTime;i&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new f(i,r),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",o.trigger.bind(o,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new s(a),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,a&&(a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,p(a),a.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),i&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,p(i),t.captionStream.reset(),i.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){i&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=d(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new r,t.exports={Transmuxer:u,VideoSegmentStream:f,AudioSegmentStream:s,AUDIO_PROPERTIES:w,VIDEO_PROPERTIES:A}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,"./mp4-generator.js":56}],59:[function(e,t,n){"use strict";var i=e("../m2ts/stream-types.js"),a=e("../m2ts/timestamp-rollover-stream.js").handleRollover,p={};p.ts=e("../m2ts/probe.js"),p.aac=e("../aac/probe.js");function o(e,t,n){for(var r,i,a,o,s=0,u=188,l=!1;u<e.byteLength;)if(71!==e[s]||71!==e[u])s++,u++;else{switch(r=e.subarray(s,u),p.ts.parseType(r,t.pid)){case"pes":i=p.ts.parsePesType(r,t.table),a=p.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=p.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s+=188,u+=188}for(s=(u=e.byteLength)-188,l=!1;0<=s;)if(71!==e[s]||71!==e[u])s--,u--;else{switch(r=e.subarray(s,u),p.ts.parseType(r,t.pid)){case"pes":i=p.ts.parsePesType(r,t.table),a=p.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=p.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s-=188,u-=188}}function s(e,t,n){for(var r,i,a,o,s,u,l,d=0,c=188,f=!1,h={data:[],size:0};c<e.byteLength;)if(71!==e[d]||71!==e[c])d++,c++;else{switch(r=e.subarray(d,c),p.ts.parseType(r,t.pid)){case"pes":if(i=p.ts.parsePesType(r,t.table),a=p.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!f&&(o=p.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0),!n.firstKeyFrame)){if(a&&0!==h.size){for(s=new Uint8Array(h.size),u=0;h.data.length;)l=h.data.shift(),s.set(l,u),u+=l.byteLength;p.ts.videoPacketContainsKeyFrame(s)&&(n.firstKeyFrame=p.ts.parsePesTime(s),n.firstKeyFrame.type="video"),h.size=0}h.data.push(r),h.size+=r.byteLength}}if(f&&n.firstKeyFrame)break;d+=188,c+=188}for(d=(c=e.byteLength)-188,f=!1;0<=d;)if(71!==e[d]||71!==e[c])d--,c--;else{switch(r=e.subarray(d,c),p.ts.parseType(r,t.pid)){case"pes":i=p.ts.parsePesType(r,t.table),a=p.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(o=p.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0)}if(f)break;d-=188,c-=188}}function r(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=188;i<e.byteLength;)if(71!==e[r]||71!==e[i])r++,i++;else{switch(n=e.subarray(r,i),p.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=p.ts.parsePat(n));break;case"pmt":t.table||(t.table=p.ts.parsePmt(n))}if(t.pid&&t.table)return;r+=188,i+=188}}(e,t),t.table){if(t.table.hasOwnProperty(r))switch(t.table[r]){case i.H264_STREAM_TYPE:n.video=[],s(e,t,n),0===n.video.length&&delete n.video;break;case i.ADTS_STREAM_TYPE:n.audio=[],o(e,t,n),0===n.audio.length&&delete n.audio}}return n}t.exports={inspect:function(e,t){var n;return(n=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)}(e)?function(e){for(var t,n=!1,r=0,i=null,a=null,o=0,s=0;3<=e.length-s;){switch(p.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=p.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=p.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=p.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===i&&(t=e.subarray(s,s+o),i=p.aac.parseSampleRate(t)),r++,s+=o;break;default:s++}if(n)return null}if(null===i||null===a)return null;var u=9e4/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(e):r(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=a(e.dts,n),e.pts=a(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4})}if(e.video&&e.video.length){var r=t;if(void 0===r&&(r=e.video[0].dts),e.video.forEach(function(e){e.dts=a(e.dts,r),e.pts=a(e.pts,r),e.dtsTime=e.dts/9e4,e.ptsTime=e.pts/9e4}),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=a(i.dts,r),i.pts=a(i.pts,r),i.dtsTime=i.dts/9e4,i.ptsTime=i.dts/9e4}}}(n,t),n):null}}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],60:[function(e,t,n){var r,i,a,o,s,u;r=function(e){return 9e4*e},i=function(e,t){return e*t},a=function(e){return e/9e4},o=function(e,t){return e/t},s=function(e,t){return r(o(e,t))},u=function(e,t){return i(a(e),t)},t.exports={secondsToVideoTs:r,secondsToAudioTs:i,videoTsToSeconds:a,audioTsToSeconds:o,audioTsToVideoTs:s,videoTsToAudioTs:u}},{}],61:[function(e,t,n){"use strict";var r;r=function(r){var i=r.byteLength,a=0,o=0;this.length=function(){return 8*i},this.bitsAvailable=function(){return 8*i+o},this.loadWord=function(){var e=r.byteLength-i,t=new Uint8Array(4),n=Math.min(4,i);if(0===n)throw new Error("no bytes available");t.set(r.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),o=8*n,i-=n},this.skipBits=function(e){var t;e<o||(e-=o,e-=8*(t=Math.floor(e/8)),i-=t,this.loadWord()),a<<=e,o-=e},this.readBits=function(e){var t=Math.min(o,e),n=a>>>32-t;return 0<(o-=t)?a<<=t:0<i&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<o;++e)if(0!=(a&2147483648>>>e))return a<<=e,o-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=r},{}],62:[function(e,t,n){"use strict";function r(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var n;return!!a[e]&&(n=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(n,1),-1<n)},this.trigger=function(e){var t,n,r,i;if(t=a[e])if(2===arguments.length)for(r=t.length,n=0;n<r;++n)t[n].call(this,arguments[1]);else{for(i=[],n=arguments.length,n=1;n<arguments.length;++n)i.push(arguments[n]);for(r=t.length,n=0;n<r;++n)t[n].apply(this,i)}},this.dispose=function(){a={}}}}r.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},t.exports=r},{}],63:[function(e,t,n){var r,i,d,a,o,c;r=this,i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,c={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=c.normalizePath(r.path),c.buildURLFromParts(r)}var i=this.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=d.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(s.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var u=a.path,l=u.substring(0,u.lastIndexOf("/")+1)+i.path;s.path=c.normalizePath(l)}else s.path=a.path,i.params||(s.params=a.params,i.query||(s.query=a.query));return null===s.path&&(s.path=n.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(s)},parseURL:function(e){var t=i.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},"object"==typeof n&&"object"==typeof t?t.exports=c:"object"==typeof n?n.URLToolkit=c:r.URLToolkit=c},{}],64:[function(r,i,o){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(o,"__esModule",{value:!0});function n(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}var a=t(r("global/window")),s=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);o.default={addTextTrackData:function(r,e,t){var o,i=a.default.WebKitDataCue||a.default.VTTCue;e&&e.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},r),t&&(o=n(r.mediaSource_.duration),t.forEach(function(e){var n=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var t=new i(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return s.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return s.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return s.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(t),this.metadataTrack_.addCue(t)},this)},r),r.metadataTrack_&&r.metadataTrack_.cues&&r.metadataTrack_.cues.length&&function(){for(var e=r.metadataTrack_.cues,t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);var i=t.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),a=Object.keys(i).sort(function(e,t){return Number(e)-Number(t)});a.forEach(function(e,t){var n=i[e],r=Number(a[t+1])||o;n.forEach(function(e){e.endTime=r})})}())},durationOfVideo:n},i.exports=o.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":32}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={isAudioCodec:function(e){return/mp4a\.\d+.\d+/i.test(e)},parseContentType:function(e){var i={type:"",parameters:{}},t=e.trim().split(";");return i.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),r=t[1].replace(/"/g,"").trim();i.parameters[n]=r}}),i},isVideoCodec:function(e){return/avc1\.[\da-f]+/i.test(e)},translateLegacyCodecs:function(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}},t.exports=n.default},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t,n){var r=t.player_;if(n.captions&&n.captions.length)for(var i in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);e.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},t.exports=n.default},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},t.exports=n.default},{}],68:[function(f,h,p){(function(e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var i=n(f("global/document")),a=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=n(f("./flash-source-buffer")),s=n(f("./flash-constants")),u=f("./codec-utils"),l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,a.default.EventTarget),t(d,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(e){var t=(0,u.parseContentType)(e),n=void 0;if("video/mp2t"!==t.type&&"audio/mp2t"!==t.type)throw new Error("NotSupportedError (Video.js)");return n=new o.default(this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),d);function d(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(d.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(e){t.swfObj=i.default.getElementById(e.swfId),t.player_=(0,a.default)(t.swfObj.parentNode),t.tech_=t.swfObj.tech,t.readyState="open",t.tech_.on("seeking",function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()}),t.swfObj&&t.swfObj.vjs_load()})}p.default=l;try{Object.defineProperty(l.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(e){var t=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),e<n)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(e){l.prototype.duration=NaN}for(var c in s.default)l[c]=s.default[c];h.exports=p.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],69:[function(v,_,b){(function(e){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function s(e){u.default.setTimeout(e,g.default.TIME_BETWEEN_CHUNKS)}function a(){return Math.random().toString(36).slice(2,8)}function o(e,t){("number"!=typeof t||t<0)&&(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n}var u=n(v("global/window")),l=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),d=n(v("mux.js/lib/flv")),c=n(v("./remove-cues-from-track")),i=n(v("./create-text-tracks-if-necessary")),f=v("./add-text-track-data"),h=n(v("./flash-transmuxer-worker")),p=n(v("webwackify")),g=n(v("./flash-constants")),m=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(y,l.default.EventTarget),t(y,[{key:"appendBuffer",value:function(e){var t=void 0;if(this.updating)throw(t=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",t.code=11,t;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(e,t){if((0,c.default)(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,c.default)(e,t,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(t){var n=this;(0,i.default)(this,this.mediaSource_,t),(0,f.addTextTrackData)(this,t.captions,t.metadata),s(function(){var e=n.convertTagsToData_(t);0===n.buffer_.length&&s(n.processBuffer_.bind(n)),e&&(n.buffer_.push(e),n.bufferSize_+=e.byteLength)})}},{key:"processBuffer_",value:function(){var e=this,t=g.default.BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,t);n.byteLength<t||this.buffer_[0].byteLength===t?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(t),this.bufferSize_-=n.byteLength;for(var r=[],i=n.byteLength,a=0;a<i;a++)r.push(String.fromCharCode(n[a]));var o=u.default.btoa(r.join(""));u.default[this.flashEncodedDataName_]=function(){return s(e.processBuffer_.bind(e)),delete u.default[e.flashEncodedDataName_],o},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(e){var t=0,n=this.mediaSource_.tech_,r=0,i=void 0,a=e.tags.videoTags,o=e.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(a.length||o.length)){var s=a[0]||{pts:1/0},u=o[0]||{pts:1/0};this.basePtsOffset_=Math.min(u.pts,s.pts)}n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(r=Math.max(r,n.currentTime()-this.timestampOffset)),r*=1e3,r+=this.basePtsOffset_):r=this.videoBufferEnd_+.1;var l=a.length;if(l&&a[l-1].pts>=r){for(;--l;){var d=a[l];if(!(d.pts>r)&&(d.keyFrame||d.metaDataTag))break}for(;l&&a[l-1].metaDataTag;)l--}var c=a.slice(l),f=void 0;for(f=isNaN(this.audioBufferEnd_)?r:this.audioBufferEnd_+.1,c.length&&(f=Math.min(f,c[0].pts)),l=0;l<o.length&&!(o[l].pts>=f);)l++;var h=o.slice(l);h.length&&(this.audioBufferEnd_=h[h.length-1].pts),c.length&&(this.videoBufferEnd_=c[c.length-1].pts);var p=this.getOrderedTags_(c,h);if(0!==p.length){if(p[0].pts<r&&n.seeking()){var g=n.currentTime()-(r-p[0].pts)/1e3;g<1/30&&(g=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(g)}catch(e){}}for(var m=0;m<p.length;m++)t+=p[m].bytes.byteLength;i=new Uint8Array(t);for(var y=m=0;m<p.length;m++)i.set(p[m].bytes,y),y+=p[m].bytes.byteLength;return i}}},{key:"getOrderedTags_",value:function(e,t){for(var n=void 0,r=[];e.length||t.length;)n=e.length?t.length&&t[0].dts<e[0].dts?t.shift():e.shift():t.shift(),r.push(n);return r}},{key:"onHlsReset_",value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),y);function y(e){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(y.prototype),"constructor",this).call(this);var n;this.chunkSize_=g.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=e,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=u.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(d.default.getFlvHeader())));var r=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+r+a(),this.flashEncodedDataName_="vjs_flashEncodedData_"+r+a(),u.default[this.flashEncodedHeaderName_]=function(){return delete u.default[t.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,p.default)(h.default,function(){var e=void 0;try{e=v.resolve("./flash-transmuxer-worker")}catch(e){}return e}()),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(e){"data"===e.data.action&&t.receiveBuffer_(e.data.segment)},this.one("updateend",function(){t.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return l.default.createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=o(e[0][0],3),e[0][1]=o(e[0][1],3)),l.default.createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){if((0,c.default)(0,1/0,t.metadataTrack_),t.inbandTextTracks_)for(var e in t.inbandTextTracks_)(0,c.default)(0,1/0,t.inbandTextTracks_[e])});var i=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",i),this.mediaSource_.player_.tech_.hls.on("dispose",function(){t.transmuxer_.terminate(),t.mediaSource_.player_.tech_.off("hls-reset",i)})}b.default=m,_.exports=b.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webwackify:76}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}var o=a(e("global/window")),s=a(e("mux.js/lib/flv")),u=(r(l,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s.default.Transmuxer(this.options),function(e){e.on("data",function(e){o.default.postMessage({action:"data",segment:e})}),e.on("done",function(e){o.default.postMessage({action:"done"})})}(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.options=e||{},this.init()}function d(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new u(e.data.options):(this.messageHandlers||(this.messageHandlers=new u),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}n.default=function(e){return new d(e)},t.exports=n.default},{"global/window":32,"mux.js/lib/flv":46}],71:[function(f,h,p){(function(e){"use strict";Object.defineProperty(p,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}var i=n(f("global/window")),o=n(f("global/document")),s=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=n(f("./virtual-source-buffer")),u=f("./add-text-track-data"),l=f("./codec-utils"),d=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,s.default.EventTarget),t(c,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=(0,l.parseContentType)(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(r=(0,l.translateLegacyCodecs)(r)).filter(function(e){return(0,l.isAudioCodec)(e)||(0,l.isVideoCodec)(e)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new a.default(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),c);function c(){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(c.prototype),"constructor",this).call(this);var e=void 0;for(e in this.nativeMediaSource_=new i.default.MediaSource,this.nativeMediaSource_)e in c.prototype||"function"!=typeof this.nativeMediaSource_[e]||(this[e]=this.nativeMediaSource_[e].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){(this.duration_=e)===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?s.default.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,r=0;r<a.player_.audioTracks().length;r++){var i=a.player_.audioTracks()[r];if(i.enabled&&"main"!==i.kind){n=!(t=!0);break}}a.sourceBuffers.forEach(function(e){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=n))return;a.activeSourceBuffers_.push(e)})},this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(e){var t=o.default.querySelector('[src="'+a.url_+'"]');t&&(a.player_=(0,s.default)(t.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))}),this.on("sourceended",function(e){for(var t=(0,u.durationOfVideo)(a.duration),n=0;n<a.sourceBuffers.length;n++){var r=a.sourceBuffers[n],i=r.metadataTrack_&&r.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=t)}}),this.on("sourceclose",function(e){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}p.default=d,h.exports=p.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,"global/document":31,"global/window":32}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=t&&i.endTime>=e&&n.removeCue(i)},t.exports=n.default},{}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e){return e&&e.__esModule?e:{default:e}}var o=a(e("global/window")),s=a(e("mux.js/lib/mp4")),u=(r(l,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s.default.Transmuxer(this.options),function(e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,o.default.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){o.default.postMessage({action:"caption",data:e})}),e.on("done",function(e){o.default.postMessage({action:"done"})}),e.on("gopInfo",function(e){o.default.postMessage({action:"gopInfo",gopInfo:e})})}(this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),l);function l(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.options=e||{},this.init()}function d(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new u(e.data.options):(this.messageHandlers||(this.messageHandlers=new u),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}n.default=function(e){return new d(e)},t.exports=n.default},{"global/window":32,"mux.js/lib/mp4":55}],74:[function(f,e,h){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(h,"__esModule",{value:!0});var n=t(f("global/window")),r=t(f("./flash-media-source")),i=t(f("./html-media-source")),a=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=0,s={mode:"auto"};a.default.mediaSources={};function u(e,t){var n=a.default.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})}function l(){return!!n.default.MediaSource&&!!n.default.MediaSource.isTypeSupported&&n.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function d(e){var t=a.default.mergeOptions(s,e);if(this.MediaSource={open:u,supportsNativeMediaSources:l},"html5"===t.mode||"auto"===t.mode&&l())return new i.default;if(a.default.getTech("Flash"))return new r.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")}(h.MediaSource=d).open=u,d.supportsNativeMediaSources=l;var c={createObjectURL:function(e){var t=void 0;return e instanceof i.default?(t=n.default.URL.createObjectURL(e.nativeMediaSource_),e.url_=t):e instanceof r.default?(t="blob:vjs-media-source/"+o,o++,a.default.mediaSources[t]=e,t):(t=n.default.URL.createObjectURL(e),e.url_=t)}};h.URL=c,a.default.MediaSource=d,a.default.URL=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(m,e,y){(function(e){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(!t||!e.length)return[];var r=Math.ceil(9e4*(t.currentTime()-n+3)),i=void 0;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}var u=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=n(m("./create-text-tracks-if-necessary")),o=n(m("./remove-cues-from-track")),s=m("./add-text-track-data"),l=n(m("webwackify")),d=n(m("./transmuxer-worker")),c=m("./codec-utils");y.gopsSafeToAlignWith=i;function f(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}y.updateGopBuffer=f;function h(e,t,n,r){for(var i=Math.ceil(9e4*(t-r)),a=Math.ceil(9e4*(n-r)),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var u=s+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),o.splice(u,s-u+1),o}y.removeGopBuffer=h;var p=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(g,u.default.EventTarget),t(g,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),(0,a.default)(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var r=this,i=["audio","video"];i.forEach(function(t){if(r[t+"Codec_"]&&!r[t+"Buffer_"]){var n=null;if(r.mediaSource_[t+"Buffer_"])(n=r.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+r[t+"Codec_"]+'"';n=function(e,t){var n=e.addSourceBuffer(t),r=Object.create(null);function i(t){"function"==typeof n[t]?r[t]=function(){return n[t].apply(n,arguments)}:void 0===r[t]&&Object.defineProperty(r,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})}for(var a in r.updating=!1,r.realBuffer_=n)i(a);return r}(r.mediaSource_.nativeMediaSource_,e),r.mediaSource_[t+"Buffer_"]=n}r[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!r.audioDisabled_)return"updateend"===e&&(r[t+"Buffer_"].updating=!1),i.every(function(e){return!("audio"!==e||!r.audioDisabled_)||t===e||!r[e+"Buffer_"]||!r[e+"Buffer_"].updating})?r.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:i(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=f(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=h(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),(0,o.default)(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,o.default)(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,r=t.data,i=t.initSegment;return e[n].segments.push(r),e[n].bytes+=r.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),(0,s.addTextTrackData)(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach(function(e){r.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(r)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),g);function g(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(g.prototype),"constructor",this).call(this,u.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=t,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=11<=u.default.browser.IE_VERSION;var r={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(e){(0,c.isAudioCodec)(e)?n.audioCodec_=e:(0,c.isVideoCodec)(e)&&(n.videoCodec_=e)}),this.transmuxer_=(0,l.default)(d.default,function(){var e=void 0;try{e=m.resolve("./transmuxer-worker")}catch(e){}return e}()),this.transmuxer_.postMessage({action:"init",options:r}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var e=null,t=null,n=0,r=[],i=[];if(!this.videoBuffer_&&!this.audioBuffer_)return u.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return u.default.createTimeRange();for(var a=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,s=a.length;s--;)r.push({time:a.start(s),type:"start"}),r.push({time:a.end(s),type:"end"});for(s=o.length;s--;)r.push({time:o.start(s),type:"start"}),r.push({time:o.end(s),type:"end"});for(r.sort(function(e,t){return e.time-t.time}),s=0;s<r.length;s++)"start"===r[s].type?2===++n&&(e=r[s].time):"end"===r[s].type&&1===--n&&(t=r[s].time),null!==e&&null!==t&&(i.push([e,t]),t=e=null);return u.default.createTimeRanges(i)}})}y.default=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webwackify:76}],76:[function(e,t,n){var l=arguments[3],d=arguments[4],c=arguments[5],f=JSON.stringify,o=!1;void 0===l&&(o=!0,l=function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=entryModule)},d=__webpack_modules__);t.exports=function(e,t){var n;n=o?function(e,t){var n,r="string"==typeof t;n=r?{}:[],Object.keys(d).forEach(function(e){d[e]&&(n[e]=d[e].toString())});var i,a=__webpack_require__(t);if(!a||a!==e&&a.default!==e){var o=n[t];n[t]=o.substring(0,o.length-1)+"\n"+e.name+"();\n}"}r?(t=f(t),i="{"+Object.keys(n).map(function(e){return f(e)+":"+n[e]}).join(",")+"}"):i="["+n.join(",")+"]";return"var fn = ("+l.toString().replace("entryModule",t)+")("+i+');\n(typeof fn === "function") && fn(self);'}(e,t):function(e){for(var t,n=Object.keys(c),r=0;r<n.length;r++){var i=n[r],a=c[i].exports;if(a===e||a&&a.default===e){t=i;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var o={};for(r=0;r<n.length;r++){o[i=n[r]]=i}d[t]=["function(require,module,exports){"+e+"(self); }",o]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};return u[t]=t,d[s]=["function(require,module,exports){var f = require("+f(t)+");(f.default ? f.default : f)(self);}",u],"("+l+")({"+Object.keys(d).map(function(e){return f(e)+":["+d[e][0]+","+f(d[e][1])+"]"}).join(",")+"},{},["+f(s)+"])"}(e);var r=new Blob([n],{type:"text/javascript"}),i=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(r),a=new Worker(i);return a.objectURL=i,a}},{}],77:[function(R,I,e){(function(e){"use strict";var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}function n(e){return e&&e.__esModule?e:{default:e}}var o=n(R("global/document")),i=n(R("./playlist-loader")),s=n(R("./playlist")),u=n(R("./xhr")),l=R("aes-decrypter"),d=n(R("./bin-utils")),c=R("videojs-contrib-media-sources"),f=n(R("m3u8-parser")),h=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),p=R("./master-playlist-controller"),g=n(R("./config")),m=n(R("./rendition-mixin")),y=n(R("global/window")),v=n(R("./playback-watcher")),_=n(R("./reload-source-on-error")),b=R("./playlist-selectors.js"),T={PlaylistLoader:i.default,Playlist:s.default,Decrypter:l.Decrypter,AsyncStream:l.AsyncStream,decrypt:l.decrypt,utils:d.default,STANDARD_PLAYLIST_SELECTOR:b.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:b.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:b.comparePlaylistBandwidth,comparePlaylistResolution:b.comparePlaylistResolution,xhr:(0,u.default)()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(T,t,{get:function(){return h.default.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),g.default[t]},set:function(e){h.default.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?h.default.log.warn("value of Hls."+t+" must be greater than or equal to 0"):g.default[t]=e}})});function E(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.uri){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})}T.canPlaySource=function(){return h.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},T.supportsNativeHls=function(){var t=o.default.createElement("video");if(!h.default.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),T.isSupported=function(){return h.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var S=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(w,h.default.getComponent("Component")),t(w,[{key:"setOptions_",value:function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth,["withCredentials","bandwidth"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(e){var t=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=T,this.masterPlaylistController_=new p.MasterPlaylistController(this.options_),this.playbackWatcher_=new v.default(h.default.mergeOptions(this.options_,{seekable:function(){return t.seekable()}})),this.masterPlaylistController_.on("error",function(){h.default.players[t.tech_.options_.playerId].error(t.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):T.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=T.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){h.default.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return t.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return t.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return t.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,m.default)(t)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return t.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(h.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=h.default.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t,e){e.representations().forEach(function(e){t.addQualityLevel(e)}),E(t,e.playlists)}(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){E(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),a(Object.getPrototypeOf(w.prototype),"dispose",this).call(this)}}]),w);function w(e,t,n){var r=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),a(Object.getPrototypeOf(w.prototype),"constructor",this).call(this,t,n.hls),t.options_&&t.options_.playerId){var i=(0,h.default)(t.options_.playerId);i.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return h.default.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),r}})}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(o.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=o.default.fullscreenElement||o.default.webkitFullscreenElement||o.default.mozFullScreenElement||o.default.msFullscreenElement;t&&t.contains(r.tech_.el())&&r.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}function A(a){return{canHandleSource:function(e,t){var n=arguments.length<=1||void 0===t?{}:t,r=h.default.mergeOptions(h.default.options,n);return(!r.hls||!r.hls.mode||r.hls.mode===a)&&A.canPlayType(e.type,r)},handleSource:function(e,t,n){var r=arguments.length<=2||void 0===n?{}:n,i=h.default.mergeOptions(h.default.options,r,{hls:{mode:a}});return"flash"===a&&t.setTimeout(function(){t.trigger("loadstart")},1),t.hls=new S(e,t,i),t.hls.xhr=(0,u.default)(),t.hls.src(e.src),t.hls},canPlayType:function(e,t){var n=arguments.length<=1||void 0===t?{}:t,r=h.default.mergeOptions(h.default.options,n);return A.canPlayType(e,r)?"maybe":""}}}A.canPlayType=function(e,t){if(h.default.browser.IE_VERSION&&h.default.browser.IE_VERSION<=10)return!1;return!(!t.hls.overrideNative&&T.supportsNativeHls)&&/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)},void 0!==h.default.MediaSource&&void 0!==h.default.URL||(h.default.MediaSource=c.MediaSource,h.default.URL=c.URL);var C=h.default.getTech("Flash");c.MediaSource.supportsNativeMediaSources()&&h.default.getTech("Html5").registerSourceHandler(A("html5"),0),y.default.Uint8Array&&C&&C.registerSourceHandler(A("flash")),h.default.HlsHandler=S,h.default.HlsSourceHandler=A,h.default.Hls=T,h.default.use||h.default.registerComponent("Hls",T),h.default.m3u8=f.default,h.default.options.hls=h.default.options.hls||{},h.default.registerPlugin?h.default.registerPlugin("reloadSourceOnError",_.default):h.default.plugin("reloadSourceOnError",_.default),I.exports={Hls:T,HlsHandler:S,HlsSourceHandler:A}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Hls=t():e.Hls=t()}("undefined"!=typeof self?self:this,function(){return(i={},r.m=n=[function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},o=i;function s(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.forEach(function(e){o[e]=t[e]?t[e].bind(t):function(r){var i=self.console[r];return i?function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0]&&(t[0]=function(e,t){return t="["+e+"] > "+t}(r,t[0])),i.apply(self.console,t)}:a}(e)})}var u=function(e){if(!0===e||"object"===(void 0===e?"undefined":r(e))){s(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=i}}else o=i},l=i},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},i={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){var r,d,i,a,c;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,d=/^([^\/;?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,c={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=c.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=c.normalizePath(r.path),c.buildURLFromParts(r)}var i=c.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return n.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var a=c.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var o=d.exec(a.path);a.netLoc=o[1],a.path=o[2]}a.netLoc&&!a.path&&(a.path="/");var s={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(s.netLoc=a.netLoc,"/"!==i.path[0]))if(i.path){var u=a.path,l=u.substring(0,u.lastIndexOf("/")+1)+i.path;s.path=c.normalizePath(l)}else s.path=a.path,i.params||(s.params=a.params,i.query||(s.query=a.query));return null===s.path&&(s.path=n.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(s)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=c},function(e,t,n){"use strict";n.d(t,"b",function(){return i});var r=(s.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},s.getID3Data=function(e,t){for(var n=t,r=0;s.isHeader(e,t);)r+=10,r+=s._readSize(e,t+6),s.isFooter(e,t+10)&&(r+=10),t+=r;if(0<r)return e.subarray(n,n+r)},s._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},s.getTimeStamp=function(e){for(var t=s.getID3Frames(e),n=0;n<t.length;n++){var r=t[n];if(s.isTimeStampFrame(r))return s._readTimeStamp(r)}},s.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},s._getFrameData=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=s._readSize(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},s.getID3Frames=function(e){for(var t=0,n=[];s.isHeader(e,t);){for(var r=s._readSize(e,t+6),i=(t+=10)+r;t+8<i;){var a=s._getFrameData(e.subarray(t)),o=s._decodeFrame(a);o&&n.push(o),t+=a.size+10}s.isFooter(e,t)&&(t+=10)}return n},s._decodeFrame=function(e){return"PRIV"===e.type?s._decodePrivFrame(e):"T"===e.type[0]?s._decodeTextFrame(e):"W"===e.type[0]?s._decodeURLFrame(e):void 0},s._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=47721858.84),Math.round(r)}},s._decodePrivFrame=function(e){if(!(e.size<2)){var t=s._utf8ArrayToStr(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},s._decodeTextFrame=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=s._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=s._utf8ArrayToStr(e.data.subarray(1));return{key:e.type,data:i}}},s._decodeURLFrame=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=s._utf8ArrayToStr(e.data.subarray(t));t+=n.length+1;var r=s._utf8ArrayToStr(e.data.subarray(t));return{key:e.type,info:n,data:r}}var i=s._utf8ArrayToStr(e.data);return{key:e.type,data:i}},s._utf8ArrayToStr=function(e,t){for(var n=1<arguments.length&&void 0!==t&&t,r=e.length,i=void 0,a=void 0,o=void 0,s="",u=0;u<r;){if(0===(i=e[u++])&&n)return s;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(i);break;case 12:case 13:a=e[u++],s+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e[u++],o=e[u++],s+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&o)<<0)}}return s},s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s)}var i=r._utf8ArrayToStr;t.a=r},function(e,t,n){"use strict";function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.subtle=e,this.aesIV=t}var s=(r.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},r);function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.subtle=e,this.key=t}var u=(i.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},i);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var l=(a.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),r=0;r<4;r++)n[r]=t.getUint32(4*r);return n},a.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,r=n[0],i=n[1],a=n[2],o=n[3],s=this.invSubMix,u=s[0],l=s[1],d=s[2],c=s[3],f=new Uint32Array(256),h=0,p=0,g=0;for(g=0;g<256;g++)f[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99;var y=f[t[e[h]=m]=h],v=f[y],_=f[v],b=257*f[m]^16843008*m;r[h]=b<<24|b>>>8,i[h]=b<<16|b>>>16,a[h]=b<<8|b>>>24,o[h]=b,b=16843009*_^65537*v^257*y^16843008*h,u[m]=b<<24|b>>>8,l[m]=b<<16|b>>>16,d[m]=b<<8|b>>>24,c[m]=b,h?(h=y^f[f[f[_^y]]],p^=f[f[p]]):h=p=1}},a.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,r=0;r<t.length&&n;)n=t[r]===this.key[r],r++;if(!n){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var a=this.ksRows=4*(i+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),d=this.sBox,c=this.rcon,f=this.invSubMix,h=f[0],p=f[1],g=f[2],m=f[3],y=void 0,v=void 0;for(o=0;o<a;o++)o<i?y=u[o]=t[o]:(v=y,o%i==0?(v=d[(v=v<<8|v>>>24)>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v],v^=c[o/i|0]<<24):6<i&&o%i==4&&(v=d[v>>>24]<<24|d[v>>>16&255]<<16|d[v>>>8&255]<<8|d[255&v]),u[o]=y=(u[o-i]^v)>>>0);for(s=0;s<a;s++)o=a-s,v=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?v:h[d[v>>>24]]^p[d[v>>>16&255]]^g[d[v>>>8&255]]^m[d[255&v]],l[s]=l[s]>>>0}},a.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},a.prototype.decrypt=function(e,t,n,r){for(var i=this.keySize+6,a=this.invKeySchedule,o=this.invSBox,s=this.invSubMix,u=s[0],l=s[1],d=s[2],c=s[3],f=this.uint8ArrayToUint32Array_(n),h=f[0],p=f[1],g=f[2],m=f[3],y=new Int32Array(e),v=new Int32Array(y.length),_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,D=void 0,k=void 0,P=this.networkToHostOrderSwap;t<y.length;){for(R=P(y[t]),I=P(y[t+1]),M=P(y[t+2]),O=P(y[t+3]),S=R^a[0],w=O^a[1],A=M^a[2],C=I^a[3],D=4,k=1;k<i;k++)_=u[S>>>24]^l[w>>16&255]^d[A>>8&255]^c[255&C]^a[D],b=u[w>>>24]^l[A>>16&255]^d[C>>8&255]^c[255&S]^a[D+1],T=u[A>>>24]^l[C>>16&255]^d[S>>8&255]^c[255&w]^a[D+2],E=u[C>>>24]^l[S>>16&255]^d[w>>8&255]^c[255&A]^a[D+3],S=_,w=b,A=T,C=E,D+=4;_=o[S>>>24]<<24^o[w>>16&255]<<16^o[A>>8&255]<<8^o[255&C]^a[D],b=o[w>>>24]<<24^o[A>>16&255]<<16^o[C>>8&255]<<8^o[255&S]^a[D+1],T=o[A>>>24]<<24^o[C>>16&255]<<16^o[S>>8&255]<<8^o[255&w]^a[D+2],E=o[C>>>24]<<24^o[S>>16&255]<<16^o[w>>8&255]<<8^o[255&A]^a[D+3],D+=3,v[t]=P(_^h),v[t+1]=P(E^p),v[t+2]=P(T^g),v[t+3]=P(b^m),h=R,p=I,g=M,m=O,t+=4}return r?function(e){var t=e.byteLength,n=t&&new DataView(e).getUint8(t-1);return n?e.slice(0,t-n):e}(v.buffer):v.buffer},a.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},a),o=n(2),d=n(0);var c=(f.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},f.prototype.decrypt=function(t,n,r,i){var a=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(d.b.log("JS AES decrypt"),this.logEnabled=!1);var e=this.decryptor;e||(this.decryptor=e=new l),e.expandKey(n),i(e.decrypt(t,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(d.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==n&&(this.key=n,this.fastAesKey=new u(o,n)),this.fastAesKey.expandKey().then(function(e){new s(o,r).decrypt(t,e).catch(function(e){a.onWebCryptoError(e,t,n,r,i)}).then(function(e){i(e)})}).catch(function(e){a.onWebCryptoError(e,t,n,r,i)})}},f.prototype.onWebCryptoError=function(e,t,n,r,i){this.config.enableSoftwareAES?(d.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,r,i)):(d.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:o.b.MEDIA_ERROR,details:o.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},f.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},f);function f(e,t){var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).removePKCS7Padding,r=void 0===n||n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=r)try{var i=crypto||self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}t.a=c},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function u(e){return"function"==typeof e}function l(e){return"object"==typeof e&&null!==e}function d(e){return void 0===e}((e.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||l(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(d(n=this._events[e]))return!1;if(u(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(l(n))for(i=Array.prototype.slice.call(arguments,1),r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!u(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,u(t.listener)?t.listener:t),this._events[e]?l(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,l(this._events[e])&&!this._events[e].warned&&(n=d(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(e,t){if(!u(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!u(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||u(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(l(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(u(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?u(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(u(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){"use strict";var f=n(0),u=n(1);var s=Math.pow(2,32)-1,r=(g.prototype.resetTimeStamp=function(e){this.initPTS=e},g.prototype.resetInitSegment=function(e,t,n,r){if(e&&e.byteLength){var i=this.initData=g.parseInitSegment(e);null==t&&(t="mp4a.40.5"),null==n&&(n="avc1.42e01e");var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:r?e:null}:(i.audio&&(a.audio={container:"audio/mp4",codec:t,initSegment:r?e:null}),i.video&&(a.video={container:"video/mp4",codec:n,initSegment:r?e:null})),this.observer.trigger(u.a.FRAG_PARSING_INIT_SEGMENT,{tracks:a})}else t&&(this.audioCodec=t),n&&(this.videoCodec=n)},g.probe=function(e){return 0<g.findBox({data:e,start:0,end:Math.min(e.length,16384)},["moof"]).length},g.bin2str=function(e){return String.fromCharCode.apply(null,e)},g.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<8|e[t+1];return n<0?65536+n:n},g.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return n<0?4294967296+n:n},g.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},g.findBox=function(e,t){var n=[],r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0;if(e.data?(s=e.start,a=e.end,e=e.data):(s=0,a=e.byteLength),!t.length)return null;for(r=s;r<a;)u=1<(i=g.readUint32(e,r))?r+i:a,g.bin2str(e.subarray(r+4,r+8))===t[0]&&(1===t.length?n.push({data:e,start:r+8,end:u}):(o=g.findBox({data:e,start:r+8,end:u},t.slice(1))).length&&(n=n.concat(o))),r=u;return n},g.parseSegmentIndex=function(e){var t=g.findBox(e,["moov"])[0],n=t?t.end:null,r=0,i=g.findBox(e,["sidx"]),a=void 0;if(!i||!i[0])return null;a=[];var o=(i=i[0]).data[0],s=g.readUint32(i,r=0===o?8:16);r+=4,r+=0===o?8:16,r+=2;var u=i.end+0,l=g.readUint16(i,r);r+=2;for(var d=0;d<l;d++){var c=r,f=g.readUint32(i,c);c+=4;var h=2147483647&f;if(1==(2147483648&f)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var p=g.readUint32(i,c);c+=4,a.push({referenceSize:h,subsegmentDuration:p,info:{duration:p/s,start:u,end:u+h-1}}),u+=h,r=c+=4}return{earliestPresentationTime:0,timescale:s,version:o,referencesCount:l,references:a,moovEndOffset:n}},g.parseInitSegment=function(e){var c=[];return g.findBox(e,["moov","trak"]).forEach(function(e){var t=g.findBox(e,["tkhd"])[0];if(t){var n=t.data[t.start],r=0===n?12:20,i=g.readUint32(t,r),a=g.findBox(e,["mdia","mdhd"])[0];if(a){n=a.data[a.start];var o=g.readUint32(a,r=0===n?12:20),s=g.findBox(e,["mdia","hdlr"])[0];if(s){var u={soun:"audio",vide:"video"}[g.bin2str(s.data.subarray(s.start+8,s.start+12))];if(u){var l=g.findBox(e,["mdia","minf","stbl","stsd"]);if(l.length){l=l[0];var d=g.bin2str(l.data.subarray(l.start+12,l.start+16));f.b.log("MP4Demuxer:"+u+":"+d+" found")}c[i]={timescale:o,type:u},c[u]={timescale:o,id:i}}}}}}),c},g.getStartDTS=function(i,e){var t,n,r=void 0;return r=g.findBox(e,["moof","traf"]),t=[].concat.apply([],r.map(function(r){return g.findBox(r,["tfhd"]).map(function(e){var t,n;return t=g.readUint32(e,4),n=i[t].timescale||9e4,g.findBox(r,["tfdt"]).map(function(e){var t,n=void 0;return t=e.data[e.start],n=g.readUint32(e,4),1===t&&(n*=Math.pow(2,32),n+=g.readUint32(e,8)),n})[0]/n})})),n=Math.min.apply(null,t),isFinite(n)?n:0},g.offsetStartDTS=function(r,e,o){g.findBox(e,["moof","traf"]).map(function(n){return g.findBox(n,["tfhd"]).map(function(e){var t=g.readUint32(e,4),a=r[t].timescale||9e4;g.findBox(n,["tfdt"]).map(function(e){var t=e.data[e.start],n=g.readUint32(e,4);if(0===t)g.writeUint32(e,4,n-o*a);else{n*=Math.pow(2,32),n+=g.readUint32(e,8),n-=o*a,n=Math.max(n,0);var r=Math.floor(n/(1+s)),i=Math.floor(n%(1+s));g.writeUint32(e,4,r),g.writeUint32(e,8,i)}})})})},g.prototype.append=function(e,t,n,r){var i=this.initData;i||(this.resetInitSegment(e,this.audioCodec,this.videoCodec,!1),i=this.initData);var a,o=this.initPTS;if(void 0===o){var s=g.getStartDTS(i,e);this.initPTS=o=s-t,this.observer.trigger(u.a.INIT_PTS_FOUND,{initPTS:o})}g.offsetStartDTS(i,e,o),a=g.getStartDTS(i,e),this.remuxer.remux(i.audio,i.video,null,null,a,n,r,e)},g.prototype.destroy=function(){},g);function g(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),this.observer=e,this.remuxer=t}t.a=r},function(e,t,n){"use strict";var Z=n(1),ee=n(2),g=n(5),te=n(0);function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function c(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function m(e,t){return!!(t+1<e.length&&i(e,t))}function r(e,t){if(t+1<e.length&&i(e,t)){var n=d(e,t);t+5<e.length&&(n=c(e,t));var r=t+n;if(r===e.length||r+1<e.length&&i(e,r))return!0}return!1}function y(e,t,n,r,i){if(!e.samplerate){var a=function(e,t,n,r){var i,a=void 0,o=void 0,s=void 0,u=void 0,l=navigator.userAgent.toLowerCase(),d=r,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[n+2])>>>6),i=(60&t[n+2])>>>2,!(c.length-1<i))return s=(1&t[n+2])<<2,s|=(192&t[n+3])>>>6,te.b.log("manifest codec:"+r+",ADTS data:type:"+a+",sampleingIndex:"+i+"["+c[i]+"Hz],channelConfig:"+s),o=/firefox/i.test(l)?6<=i?(a=5,u=new Array(4),i-3):(a=2,u=new Array(2),i):-1!==l.indexOf("android")?(a=2,u=new Array(2),i):(a=5,u=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&6<=i?i-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(6<=i&&1==s||/vivaldi/i.test(l))||!r&&1==s)&&(a=2,u=new Array(2)),i)),u[0]=a<<3,u[0]|=(14&i)>>1,u[1]|=(1&i)<<7,u[1]|=s<<3,5===a&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7,u[2]|=8,u[3]=0),{config:u,samplerate:c[i],channelCount:s,codec:"mp4a.40."+a,manifestCodec:d};e.trigger(Event.ERROR,{type:ee.b.MEDIA_ERROR,details:ee.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+i})}(t,n,r,i);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,te.b.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function v(e){return 9216e4/e}function _(e,t,n,r,i){var a=function(e,t,n,r,i){var a,o=void 0,s=e.length;if(a=d(e,t),o=c(e,t),0<(o-=a)&&t+a+o<=s)return{headerLength:a,frameLength:o,stamp:n+r*i}}(t,n,r,i,v(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,u=a.frameLength,l={unit:t.subarray(n+s,n+s+u),pts:o,dts:o};return e.samples.push(l),e.len+=u,{sample:l,length:u+s}}}var p=n(4);function a(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.observer=e,this.config=n,this.remuxer=t}var S=(a.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},a.prototype.resetTimeStamp=function(){},a.probe=function(e){if(!e)return!1;for(var t=(p.a.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r(e,t))return te.b.log("ADTS sync word found !"),!0;return!1},a.prototype.append=function(e,t,n,r){for(var i=this._audioTrack,a=p.a.getID3Data(e,0)||[],o=p.a.getTimeStamp(a),s=o?90*o:9e4*t,u=0,l=s,d=e.length,c=a.length,f=[{pts:l,dts:l,data:a}];c<d-1;)if(m(e,c)&&c+5<d){y(i,this.observer,e,c,i.manifestCodec);var h=_(i,e,c,s,u);if(!h){te.b.log("Unable to parse AAC frame");break}c+=h.length,l=h.sample.pts,u++}else p.a.isHeader(e,c)?(a=p.a.getID3Data(e,c),f.push({pts:l,dts:l,data:a}),c+=a.length):c++;this.remuxer.remux(i,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,r)},a.prototype.destroy=function(){},a),w=n(7),b={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,n,r,i){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=r+i*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),e.len+=a.frameLength,{sample:s,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,r=e[t+1]>>1&3,i=e[t+2]>>4&15,a=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!=n&&0!=i&&15!=i&&3!=a){var s=3==n?3-r:3==r?3:4,u=1e3*b.BitratesMap[14*s+i-1],l=3==n?0:2==n?1:2,d=b.SamplingRateMap[3*l+a],c=e[t+3]>>6==3?1:2,f=b.SamplesCoefficients[n][r],h=b.BytesInSlot[r],p=8*f*h;return{sampleRate:d,channelCount:c,frameLength:parseInt(f*u/d+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=this.parseHeader(e,t),r=4;n&&n.frameLength&&(r=n.frameLength);var i=t+r;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}},T=b;function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var A=(o.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,r=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");r.set(e.subarray(n,n+i)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},o.prototype.skipBits=function(e){var t=void 0;this.bitsAvailable>e||(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},o.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return 32<e&&te.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,0<this.bitsAvailable?this.word<<=t:0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?n<<t|this.readBits(t):n},o.prototype.skipLZ=function(){var e=void 0;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},o.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},o.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},o.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},o.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},o.prototype.readBoolean=function(){return 1===this.readBits(1)},o.prototype.readUByte=function(){return this.readBits(8)},o.prototype.readUShort=function(){return this.readBits(16)},o.prototype.readUInt=function(){return this.readBits(32)},o.prototype.skipScalingList=function(e){var t=8,n=8,r=void 0;for(r=0;r<e;r++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},o.prototype.readSPS=function(){var e,t,n,r,i=0,a=0,o=0,s=0,u=void 0,l=void 0,d=void 0,c=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),g=this.skipBits.bind(this),m=this.skipEG.bind(this),y=this.skipUEG.bind(this),v=this.skipScalingList.bind(this);if(c(),e=c(),f(5),g(3),c(),y(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var _=h();if(3===_&&g(1),y(),y(),g(1),p())for(l=3!==_?8:12,d=0;d<l;d++)p()&&v(d<6?16:64)}y();var b=h();if(0===b)h();else if(1===b)for(g(1),m(),m(),u=h(),d=0;d<u;d++)m();y(),g(1),t=h(),n=h(),0===(r=f(1))&&g(1),g(1),p()&&(i=h(),a=h(),o=h(),s=h());var T=[1,1];if(p()&&p())switch(c()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[c()<<8|c(),c()<<8|c()]}return{width:Math.ceil(16*(t+1)-2*i-2*a),height:(2-r)*(n+1)*16-(r?2:4)*(o+s),pixelRatio:T}},o.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},o);function s(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.decryptdata=n,this.discardEPB=r,this.decrypter=new g.a(e,t,{removePKCS7Padding:!1})}var u=(s.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},s.prototype.decryptAacSample=function(t,n,r,i){var a=t[n].unit,e=a.subarray(16,a.length-a.length%16),o=e.buffer.slice(e.byteOffset,e.byteOffset+e.length),s=this;this.decryptBuffer(o,function(e){e=new Uint8Array(e),a.set(e,16),i||s.decryptAacSamples(t,n+1,r)})},s.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var r=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,r),!r)return}}},s.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),r=0,i=32;i<=e.length-16;i+=160,r+=16)n.set(e.subarray(i,i+16),r);return n},s.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,r=32;r<=e.length-16;r+=160,n+=16)e.set(t.subarray(n,n+16),r);return e},s.prototype.decryptAvcSample=function(t,n,r,i,a,o){var s=this.discardEPB(a.data),e=this.getAvcEncryptedData(s),u=this;this.decryptBuffer(e.buffer,function(e){a.data=u.getAvcDecryptedUnit(s,e),o||u.decryptAvcSamples(t,n,r+1,i)})},s.prototype.decryptAvcSamples=function(e,t,n,r){for(;;t++,n=0){if(t>=e.length)return void r();for(var i=e[t].units;!(n>=i.length);n++){var a=i[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,r,a,o),!o)return}}}},s);var l={video:0,audio:1,id3:2,text:3};function D(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,D),this.observer=e,this.config=n,this.typeSupported=r,this.remuxer=t,this.sampleAes=null}var C=(D.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new u(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},D.probe=function(e){var t=D._syncOffset(e);return!(t<0||(t&&te.b.warn("MPEG2-TS detected but first sync word found @ offset "+t+", junk ahead ?"),0))},D._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1},D.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:l[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},D.prototype.resetInitSegment=function(e,t,n,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=D.createTrack("video",r),this._audioTrack=D.createTrack("audio",r),this._id3Track=D.createTrack("id3",r),this._txtTrack=D.createTrack("text",r),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=r},D.prototype.resetTimeStamp=function(){},D.prototype.append=function(e,t,n,r){var i=void 0,a=e.length,o=void 0,s=void 0,u=void 0,l=void 0,d=!1;this.contiguous=n;var c=this.pmtParsed,f=this._avcTrack,h=this._audioTrack,p=this._id3Track,g=f.pid,m=h.pid,y=p.pid,v=this._pmtId,_=f.pesData,b=h.pesData,T=p.pesData,E=this._parsePAT,S=this._parsePMT,w=this._parsePES,A=this._parseAVCPES.bind(this),C=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),I=this._parseID3PES.bind(this),M=D._syncOffset(e);for(a-=(a+M)%188,i=M;i<a;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2],1<(48&e[i+3])>>4){if((u=i+5+e[i+4])===i+188)continue}else u=i+4;switch(s){case g:o&&(_&&(l=w(_))&&void 0!==l.pts&&A(l,!1),_={data:[],size:0}),_&&(_.data.push(e.subarray(u,i+188)),_.size+=i+188-u);break;case m:o&&(b&&(l=w(b))&&void 0!==l.pts&&(h.isAAC?C(l):R(l)),b={data:[],size:0}),b&&(b.data.push(e.subarray(u,i+188)),b.size+=i+188-u);break;case y:o&&(T&&(l=w(T))&&void 0!==l.pts&&I(l),T={data:[],size:0}),T&&(T.data.push(e.subarray(u,i+188)),T.size+=i+188-u);break;case 0:o&&(u+=e[u]+1),v=this._pmtId=E(e,u);break;case v:o&&(u+=e[u]+1);var O=S(e,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(g=O.avc)&&(f.pid=g),0<(m=O.audio)&&(h.pid=m,h.isAAC=O.isAAC),0<(y=O.id3)&&(p.pid=y),d&&!c&&(te.b.log("reparse from beginning"),d=!1,i=M-188),c=this.pmtParsed=!0;break;case 17:case 8191:break;default:d=!0}}else this.observer.trigger(Z.a.ERROR,{type:ee.b.MEDIA_ERROR,details:ee.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});_&&(l=w(_))&&void 0!==l.pts?(A(l,!0),f.pesData=null):f.pesData=_,b&&(l=w(b))&&void 0!==l.pts?(h.isAAC?C(l):R(l),h.pesData=null):(b&&b.size&&te.b.log("last AAC PES packet truncated,might overlap between fragments"),h.pesData=b),T&&(l=w(T))&&void 0!==l.pts?(I(l),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(h,f,p,this._txtTrack,t,n,r):this.decryptAndRemux(h,f,p,this._txtTrack,t,n,r)},D.prototype.decryptAndRemux=function(e,t,n,r,i,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,r,i,a,o)})}else this.decryptAndRemuxAvc(e,t,n,r,i,a,o)},D.prototype.decryptAndRemuxAvc=function(e,t,n,r,i,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,r,i,a,o)})}else this.remuxer.remux(e,t,n,r,i,a,o)},D.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},D.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},D.prototype._parsePMT=function(e,t,n,r){var i,a=void 0,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){switch(a=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!r){te.b.log("unkown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=a);break;case 21:-1===o.id3&&(o.id3=a);break;case 219:if(!r){te.b.log("unkown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=a);break;case 3:case 4:n?-1===o.audio&&(o.audio=a,o.isAAC=!1):te.b.log("MPEG audio found, not supported in this browser for now");break;case 36:te.b.warn("HEVC stream type found, not supported for now");break;default:te.b.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},D.prototype._parsePES=function(e){var t=0,n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&1<d.length;){var c=new Uint8Array(d[0].length+d[1].length);c.set(d[0]),c.set(d[1],d[0].length),d[0]=c,d.splice(1,1)}if(1!==((n=d[0])[0]<<16)+(n[1]<<8)+n[2])return null;if((i=(n[4]<<8)+n[5])&&i>e.size-6)return null;192&(r=n[7])&&(4294967295<(s=536870912*(14&n[9])+4194304*(255&n[10])+16384*(254&n[11])+128*(255&n[12])+(254&n[13])/2)&&(s-=8589934592),64&r?(4294967295<(u=536870912*(14&n[14])+4194304*(255&n[15])+16384*(254&n[16])+128*(255&n[17])+(254&n[18])/2)&&(u-=8589934592),54e5<s-u&&(te.b.warn(Math.round((s-u)/9e4)+"s delta between PTS and DTS, align them"),s=u)):u=s),l=(a=n[8])+9,e.size-=l,o=new Uint8Array(e.size);for(var f=0,h=d.length;f<h;f++){var p=(n=d[f]).byteLength;if(l){if(p<l){l-=p;continue}n=n.subarray(l),p-=l,l=0}o.set(n,t),t+=p}return i&&(i-=a+3),{data:o,pts:s,dts:u,len:i}},D.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,r=n.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(r||this.contiguous)?(e.id=r,n.push(e)):t.dropped++}e.debug.length&&te.b.log(e.pts+"/"+e.dts+":"+e.debug)},D.prototype._parseAVCPES=function(p,e){function g(e,t,n,r){return{key:e,pts:t,dts:n,units:[],debug:r}}var m=this,y=this._avcTrack,t=this._parseAVCNALu(p.data),v=void 0,_=this.avcSample,b=void 0,T=!1,E=void 0,S=this.pushAccesUnit.bind(this);p.data=null,_&&t.length&&!y.audFound&&(S(_,y),_=this.avcSample=g(!1,p.pts,p.dts,"")),t.forEach(function(e){switch(e.type){case 1:b=!0,(_=_||(m.avcSample=g(!0,p.pts,p.dts,""))).frame=!0;var t=e.data;if(T&&4<t.length){var n=new A(t).readSliceType();2!==n&&4!==n&&7!==n&&9!==n||(_.key=!0)}break;case 5:b=!0,(_=_||(m.avcSample=g(!0,p.pts,p.dts,""))).key=!0,_.frame=!0;break;case 6:b=!0,(v=new A(m.discardEPB(e.data))).readUByte();for(var r=0,i=0,a=!1,o=0;!a&&1<v.bytesAvailable;){for(r=0;r+=o=v.readUByte(),255===o;);for(i=0;i+=o=v.readUByte(),255===o;);if(4===r&&0!==v.bytesAvailable){if(a=!0,181===v.readUByte()&&49===v.readUShort()&&1195456820===v.readUInt()&&3===v.readUByte()){var s=v.readUByte(),u=31&s,l=[s,v.readUByte()];for(E=0;E<u;E++)l.push(v.readUByte()),l.push(v.readUByte()),l.push(v.readUByte());m._insertSampleInOrder(m._txtTrack.samples,{type:3,pts:p.pts,bytes:l})}}else if(i<v.bytesAvailable)for(E=0;E<i;E++)v.readUByte()}break;case 7:if(T=b=!0,!y.sps){var d=(v=new A(e.data)).readSPS();y.width=d.width,y.height=d.height,y.pixelRatio=d.pixelRatio,y.sps=[e.data],y.duration=m._duration;var c=e.data.subarray(1,4),f="avc1.";for(E=0;E<3;E++){var h=c[E].toString(16);h.length<2&&(h="0"+h),f+=h}y.codec=f}break;case 8:b=!0,y.pps||(y.pps=[e.data]);break;case 9:b=!1,y.audFound=!0,_&&S(_,y),_=m.avcSample=g(!1,p.pts,p.dts,"");break;case 12:b=!1;break;default:b=!1,_&&(_.debug+="unknown NAL "+e.type+" ")}_&&b&&_.units.push(e)}),e&&_&&(S(_,y),this.avcSample=null)},D.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(0<n){if(t.pts>=e[n-1].pts)e.push(t);else for(var r=n-1;0<=r;r--)if(t.pts<e[r].pts){e.splice(r,0,t);break}}else e.push(t)},D.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack.samples;e=n[n.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},D.prototype._parseAVCNALu=function(e){var t=0,n=e.byteLength,r=void 0,i=void 0,a=this._avcTrack,o=a.naluState||0,s=o,u=[],l=void 0,d=-1,c=void 0;for(-1===o&&(c=31&e[d=0],o=0,t=1);t<n;)if(r=e[t++],o)if(1!==o)if(r)if(1===r){if(0<=d)l={data:e.subarray(d,t-o-1),type:c},u.push(l);else{var f=this._getLastNalUnit();if(f&&(s&&t<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),0<(i=t-o-1))){var h=new Uint8Array(f.data.byteLength+i);h.set(f.data,0),h.set(e.subarray(0,i),f.data.byteLength),f.data=h}}o=t<n?(c=31&e[d=t],0):-1}else o=0;else o=3;else o=r?0:2;else o=r?0:1;if(0<=d&&0<=o&&(l={data:e.subarray(d,n),type:c,state:o},u.push(l)),0===u.length){var p=this._getLastNalUnit();if(p){var g=new Uint8Array(p.data.byteLength+e.byteLength);g.set(p.data,0),g.set(e,p.data.byteLength),p.data=g}}return a.naluState=o,u},D.prototype.discardEPB=function(e){for(var t,n=e.byteLength,r=[],i=1,a=void 0;i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return e;t=n-r.length,a=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===r[0]&&(o++,r.shift()),a[i]=e[o];return a},D.prototype._parseAACPES=function(e){var t,n,r=this._audioTrack,i=e.data,a=e.pts,o=this.aacOverFlow,s=this.aacLastPTS,u=void 0,l=void 0,d=void 0;if(o){var c=new Uint8Array(o.byteLength+i.byteLength);c.set(o,0),c.set(i,o.byteLength),i=c}for(l=0,n=i.length;l<n-1&&!m(i,l);l++);if(l){var f=void 0,h=void 0;if(h=l<n-1?(f="AAC PES did not start with ADTS header,offset:"+l,!1):(f="no ADTS header found in AAC PES",!0),te.b.warn("parsing error:"+f),this.observer.trigger(Z.a.ERROR,{type:ee.b.MEDIA_ERROR,details:ee.a.FRAG_PARSING_ERROR,fatal:h,reason:f}),h)return}if(y(r,this.observer,i,l,this.audioCodec),u=0,t=v(r.samplerate),o&&s){var p=s+t;1<Math.abs(p-a)&&(te.b.log("AAC: align PTS for overlapping frames by "+Math.round((p-a)/90)),a=p)}for(;l<n;)if(m(i,l)&&l+5<n){var g=_(r,i,l,a,u);if(!g)break;l+=g.length,d=g.sample.pts,u++}else l++;o=l<n?i.subarray(l,n):null,this.aacOverFlow=o,this.aacLastPTS=d},D.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,r=0,i=0,a=e.pts;i<n;)if(T.isHeader(t,i)){var o=T.appendFrame(this._audioTrack,t,i,a,r);if(!o)break;i+=o.length,r++}else i++},D.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},D);function f(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),this.observer=e,this.config=n,this.remuxer=t}var R=(f.prototype.resetInitSegment=function(e,t,n,r){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:r,inputTimeScale:9e4}},f.prototype.resetTimeStamp=function(){},f.probe=function(e){var t=void 0,n=void 0,r=p.a.getID3Data(e,0);if(r&&void 0!==p.a.getTimeStamp(r))for(t=r.length,n=Math.min(e.length-1,t+100);t<n;t++)if(T.probe(e,t))return te.b.log("MPEG Audio sync word found !"),!0;return!1},f.prototype.append=function(e,t,n,r){for(var i=p.a.getID3Data(e,0),a=p.a.getTimeStamp(i),o=a?90*a:9e4*t,s=i.length,u=e.length,l=0,d=0,c=this._audioTrack,f=[{pts:o,dts:o,data:i}];s<u;)if(T.isHeader(e,s)){var h=T.appendFrame(c,e,s,o,l);if(!h)break;s+=h.length,d=h.sample.pts,l++}else p.a.isHeader(e,s)?(i=p.a.getID3Data(e,s),f.push({pts:d,dts:d,data:i}),s+=i.length):s++;this.remuxer.remux(c,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,n,r)},f.prototype.destroy=function(){},f);function h(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h)}var K=(h.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},h);var E=Math.pow(2,32)-1;function I(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,I)}var ne=(I.init=function(){I.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e=void 0;for(e in I.types)I.types.hasOwnProperty(e)&&(I.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);I.HDLR_TYPES={video:t,audio:n};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);I.STTS=I.STSC=I.STCO=i,I.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),I.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),I.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),I.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),s=new Uint8Array([0,0,0,1]);I.FTYP=I.box(I.types.ftyp,a,s,a,o),I.DINF=I.box(I.types.dinf,I.box(I.types.dref,r))},I.box=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=8,r=t.length,i=r,a=void 0;r--;)n+=t[r].byteLength;for((a=new Uint8Array(n))[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),r=0,n=8;r<i;r++)a.set(t[r],n),n+=t[r].byteLength;return a},I.hdlr=function(e){return I.box(I.types.hdlr,I.HDLR_TYPES[e])},I.mdat=function(e){return I.box(I.types.mdat,e)},I.mdhd=function(e,t){t*=e;var n=Math.floor(t/(1+E)),r=Math.floor(t%(1+E));return I.box(I.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},I.mdia=function(e){return I.box(I.types.mdia,I.mdhd(e.timescale,e.duration),I.hdlr(e.type),I.minf(e))},I.mfhd=function(e){return I.box(I.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},I.minf=function(e){return"audio"===e.type?I.box(I.types.minf,I.box(I.types.smhd,I.SMHD),I.DINF,I.stbl(e)):I.box(I.types.minf,I.box(I.types.vmhd,I.VMHD),I.DINF,I.stbl(e))},I.moof=function(e,t,n){return I.box(I.types.moof,I.mfhd(e),I.traf(n,t))},I.moov=function(e){for(var t=e.length,n=[];t--;)n[t]=I.trak(e[t]);return I.box.apply(null,[I.types.moov,I.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(I.mvex(e)))},I.mvex=function(e){for(var t=e.length,n=[];t--;)n[t]=I.trex(e[t]);return I.box.apply(null,[I.types.mvex].concat(n))},I.mvhd=function(e,t){t*=e;var n=Math.floor(t/(1+E)),r=Math.floor(t%(1+E)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return I.box(I.types.mvhd,i)},I.sdtp=function(e){var t=e.samples||[],n=new Uint8Array(4+t.length),r=void 0,i=void 0;for(i=0;i<t.length;i++)r=t[i].flags,n[i+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return I.box(I.types.sdtp,n)},I.stbl=function(e){return I.box(I.types.stbl,I.stsd(e),I.box(I.types.stts,I.STTS),I.box(I.types.stsc,I.STSC),I.box(I.types.stsz,I.STSZ),I.box(I.types.stco,I.STCO))},I.avc1=function(e){var t=[],n=[],r=void 0,i=void 0,a=void 0;for(r=0;r<e.sps.length;r++)a=(i=e.sps[r]).byteLength,t.push(a>>>8&255),t.push(255&a),t=t.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)a=(i=e.pps[r]).byteLength,n.push(a>>>8&255),n.push(255&a),n=n.concat(Array.prototype.slice.call(i));var o=I.box(I.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),s=e.width,u=e.height,l=e.pixelRatio[0],d=e.pixelRatio[1];return I.box(I.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>8&255,255&s,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,I.box(I.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),I.box(I.types.pasp,new Uint8Array([l>>24,l>>16&255,l>>8&255,255&l,d>>24,d>>16&255,d>>8&255,255&d])))},I.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},I.mp4a=function(e){var t=e.samplerate;return I.box(I.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]),I.box(I.types.esds,I.esds(e)))},I.mp3=function(e){var t=e.samplerate;return I.box(I.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,255&t,0,0]))},I.stsd=function(e){return"audio"===e.type?e.isAAC||"mp3"!==e.codec?I.box(I.types.stsd,I.STSD,I.mp4a(e)):I.box(I.types.stsd,I.STSD,I.mp3(e)):I.box(I.types.stsd,I.STSD,I.avc1(e))},I.tkhd=function(e){var t=e.id,n=e.duration*e.timescale,r=e.width,i=e.height,a=Math.floor(n/(1+E)),o=Math.floor(n%(1+E));return I.box(I.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))},I.traf=function(e,t){var n=I.sdtp(e),r=e.id,i=Math.floor(t/(1+E)),a=Math.floor(t%(1+E));return I.box(I.types.traf,I.box(I.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),I.box(I.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a])),I.trun(e,n.length+16+20+8+16+8+8),n)},I.trak=function(e){return e.duration=e.duration||4294967295,I.box(I.types.trak,I.tkhd(e),I.mdia(e))},I.trex=function(e){var t=e.id;return I.box(I.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},I.trun=function(e,t){var n=e.samples||[],r=n.length,i=12+16*r,a=new Uint8Array(i),o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0;for(t+=8+i,a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0),o=0;o<r;o++)u=(s=n[o]).duration,l=s.size,d=s.flags,c=s.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,255&u,l>>>24&255,l>>>16&255,l>>>8&255,255&l,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,61440&d.degradPrio,15&d.degradPrio,c>>>24&255,c>>>16&255,c>>>8&255,255&c],12+16*o);return I.box(I.types.trun,a)},I.initSegment=function(e){I.types||I.init();var t=I.moov(e),n=void 0;return(n=new Uint8Array(I.FTYP.byteLength+t.byteLength)).set(I.FTYP),n.set(t,I.FTYP.byteLength),n},I);function M(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),this.observer=e,this.config=t,this.typeSupported=n;var i=navigator.userAgent;this.isSafari=r&&-1<r.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}var O=(M.prototype.destroy=function(){},M.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},M.prototype.resetInitSegment=function(){this.ISGenerated=!1},M.prototype.remux=function(e,t,n,r,i,a,o){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var s=e.samples.length,u=t.samples.length,l=i,d=i;if(s&&u){var c=(e.samples[0].dts-t.samples[0].dts)/t.inputTimeScale;l+=Math.max(0,c),d+=Math.max(0,-c)}if(s){e.timescale||(te.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var f=this.remuxAudio(e,l,a,o);if(u){var h=void 0;f&&(h=f.endPTS-f.startPTS),t.timescale||(te.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,d,a,h,o)}}else if(u){var p=this.remuxVideo(t,d,a,0,o);p&&e.codec&&this.remuxEmptyAudio(e,l,a,p)}}n.samples.length&&this.remuxID3(n,i),r.samples.length&&this.remuxText(r,i),this.observer.trigger(Z.a.FRAG_PARSED)},M.prototype.generateIS=function(e,t,n){var r=this.observer,i=e.samples,a=t.samples,o=this.typeSupported,s="audio/mp4",u={},l={tracks:u},d=void 0===this._initPTS,c=void 0,f=void 0;if(d&&(c=f=1/0),e.config&&i.length&&(e.timescale=e.samplerate,te.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(o.mpeg?(s="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3")),u.audio={container:s,codec:e.codec,initSegment:!e.isAAC&&o.mpeg?new Uint8Array:ne.initSegment([e]),metadata:{channelCount:e.channelCount}},d&&(c=f=i[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&a.length){var h=t.inputTimeScale;t.timescale=h,u.video={container:"video/mp4",codec:t.codec,initSegment:ne.initSegment([t]),metadata:{width:t.width,height:t.height}},d&&(c=Math.min(c,a[0].pts-h*n),f=Math.min(f,a[0].dts-h*n),this.observer.trigger(Z.a.INIT_PTS_FOUND,{initPTS:c}))}Object.keys(u).length?(r.trigger(Z.a.FRAG_PARSING_INIT_SEGMENT,l),this.ISGenerated=!0,d&&(this._initPTS=c,this._initDTS=f)):r.trigger(Z.a.ERROR,{type:ee.b.MEDIA_ERROR,details:ee.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},M.prototype.remuxVideo=function(e,t,n,r,i){var a,o,s,u=8,l=e.timescale,d=void 0,c=void 0,f=void 0,h=void 0,p=e.samples,g=[],m=p.length,y=this._PTSNormalize,v=this._initDTS,_=this.nextAvcDts,b=this.isSafari;if(0!==m){b&&(n|=p.length&&_&&(i&&Math.abs(t-_/l)<.1||Math.abs(p[0].pts-_-v)<l/5)),n||(_=t*l),p.forEach(function(e){e.pts=y(e.pts-v,_),e.dts=y(e.dts-v,_)}),p.sort(function(e,t){var n=e.dts-t.dts,r=e.pts-t.pts;return n||r||e.id-t.id});var T=p.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(T<0){te.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var E=0;E<p.length;E++)p[E].dts+=T}var S=p[0];h=Math.max(S.dts,0),f=Math.max(S.pts,0);var w=Math.round((h-_)/90);n&&w&&(1<w?te.b.log("AVC:"+w+" ms hole between fragments detected,filling it"):w<-1&&te.b.log("AVC:"+-w+" ms overlapping between fragments detected"),h=_,p[0].dts=h,f=Math.max(f-w,_),p[0].pts=f,te.b.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(h/90)+",delta:"+w+" ms")),S=p[p.length-1],s=Math.max(S.dts,0),o=Math.max(S.pts,0,s),b&&(d=Math.round((s-h)/(p.length-1)));for(var A=0,C=0,R=0;R<m;R++){for(var I=p[R],M=I.units,O=M.length,D=0,k=0;k<O;k++)D+=M[k].data.length;C+=D,A+=O,I.length=D,I.dts=b?h+R*d:Math.max(I.dts,h),I.pts=Math.max(I.pts,I.dts)}var P=C+4*A+8;try{c=new Uint8Array(P)}catch(e){return void this.observer.trigger(Z.a.ERROR,{type:ee.b.MUX_ERROR,details:ee.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:P,reason:"fail allocating video mdat "+P})}var L=new DataView(c.buffer);L.setUint32(0,P),c.set(ne.types.mdat,4);for(var x=0;x<m;x++){for(var N=p[x],F=N.units,B=0,U=void 0,j=0,G=F.length;j<G;j++){var H=F[j],q=H.data,V=H.data.byteLength;L.setUint32(u,V),u+=4,c.set(q,u),u+=V,B+=4+V}if(b)U=Math.max(0,d*Math.round((N.pts-N.dts)/d));else{if(x<m-1)d=p[x+1].dts-N.dts;else{var K=this.config,Y=N.dts-p[0<x?x-1:x].dts;if(K.stretchShortVideoTrack){var W=K.maxBufferHole,z=Math.floor(W*l),X=(r?f+r*l:this.nextAudioPts)-N.pts;z<X?((d=X-Y)<0&&(d=Y),te.b.log("It is approximately "+X/90+" ms to the next segment; using duration "+d/90+" ms for the last video frame.")):d=Y}else d=Y}U=Math.round(N.pts-N.dts)}g.push({size:B,duration:d,cts:U,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:N.key?2:1,isNonSync:N.key?0:1}})}this.nextAvcDts=s+d;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,g.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var $=g[0].flags;$.dependsOn=2,$.isNonSync=0}e.samples=g,a=ne.moof(e.sequenceNumber++,h,e),e.samples=[];var J={data1:a,data2:c,startPTS:f/l,endPTS:(o+d)/l,startDTS:h/l,endDTS:this.nextAvcDts/l,type:"video",hasAudio:!1,hasVideo:!0,nb:g.length,dropped:Q};return this.observer.trigger(Z.a.FRAG_PARSING_DATA,J),J}},M.prototype.remuxAudio=function(e,t,n,r){var i=e.inputTimeScale,a=e.timescale,o=i/a,s=(e.isAAC?1024:1152)*o,u=this._PTSNormalize,l=this._initDTS,d=!e.isAAC&&this.typeSupported.mpeg,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=e.samples,_=[],b=this.nextAudioPts;if(n|=v.length&&b&&(r&&Math.abs(t-b/i)<.1||Math.abs(v[0].pts-b-l)<20*s),v.forEach(function(e){e.pts=e.dts=u(e.pts-l,t*i)}),0!==(v=v.filter(function(e){return 0<=e.pts})).length){if(n||(b=r?t*i:v[0].pts),e.isAAC)for(var T=this.config.maxAudioFramesDrift,E=0,S=b;E<v.length;){var w,A=v[E];w=A.pts-S;var C=Math.abs(1e3*w/i);if(w<=-T*s)te.b.warn("Dropping 1 audio frame @ "+(S/i).toFixed(3)+"s due to "+Math.round(C)+" ms overlap."),v.splice(E,1),e.len-=A.unit.length;else if(T*s<=w&&C<1e4&&S){var R=Math.round(w/s);te.b.warn("Injecting "+R+" audio frame @ "+(S/i).toFixed(3)+"s due to "+Math.round(1e3*w/i)+" ms gap.");for(var I=0;I<R;I++){var M=Math.max(S,0);(h=K.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(te.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),h=A.unit.subarray()),v.splice(E,0,{unit:h,pts:M,dts:M}),e.len+=h.length,S+=s,E++}A.pts=A.dts=S,S+=s,E++}else Math.abs(w),A.pts=A.dts=S,S+=s,E++}for(var O=0,D=v.length;O<D;O++){var k=v[O],P=k.unit,L=k.pts;if(void 0!==y)f.duration=Math.round((L-y)/o);else{var x=Math.round(1e3*(L-b)/i),N=0;if(n&&e.isAAC&&x){if(0<x&&x<1e4)N=Math.round((L-b)/s),te.b.log(x+" ms hole between AAC samples detected,filling it"),0<N&&(h=(h=K.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||P.subarray(),e.len+=N*h.length);else if(x<-12){te.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(b/i).toFixed(3)+"s/"+(L/i).toFixed(3)+"s/"+-x+"ms"),e.len-=P.byteLength;continue}L=b}if(m=L,!(0<e.len))return;var F=d?e.len:e.len+8;c=d?0:8;try{p=new Uint8Array(F)}catch(e){return void this.observer.trigger(Z.a.ERROR,{type:ee.b.MUX_ERROR,details:ee.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}d||(new DataView(p.buffer).setUint32(0,F),p.set(ne.types.mdat,4));for(var B=0;B<N;B++)(h=K.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(te.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),h=P.subarray()),p.set(h,c),c+=h.byteLength,f={size:h.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(f)}p.set(P,c);var U=P.byteLength;c+=U,f={size:U,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},_.push(f),y=L}var j=0,G=_.length;if(2<=G&&(j=_[G-2].duration,f.duration=j),G){this.nextAudioPts=b=y+o*j,e.len=0,e.samples=_,g=d?new Uint8Array:ne.moof(e.sequenceNumber++,m/o,e),e.samples=[];var H=m/i,q=b/i,V={data1:g,data2:p,startPTS:H,endPTS:q,startDTS:H,endDTS:q,type:"audio",hasAudio:!0,hasVideo:!1,nb:G};return this.observer.trigger(Z.a.FRAG_PARSING_DATA,V),V}return null}},M.prototype.remuxEmptyAudio=function(e,t,n,r){var i=e.inputTimeScale,a=i/(e.samplerate?e.samplerate:i),o=this.nextAudioPts,s=(void 0!==o?o:r.startDTS*i)+this._initDTS,u=r.endDTS*i+this._initDTS,l=1024*a,d=Math.ceil((u-s)/l),c=K.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(te.b.warn("remux empty Audio"),c){for(var f=[],h=0;h<d;h++){var p=s+h*l;f.push({unit:c,pts:p,dts:p}),e.len+=c.length}e.samples=f,this.remuxAudio(e,t,n)}else te.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},M.prototype.remuxID3=function(e,t){var n=e.samples.length,r=void 0,i=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(r=e.samples[s]).pts=(r.pts-a)/i,r.dts=(r.dts-o)/i;this.observer.trigger(Z.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},M.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n=e.samples.length,r=void 0,i=e.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(r=e.samples[o]).pts=(r.pts-a)/i;this.observer.trigger(Z.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},M.prototype._PTSNormalize=function(e,t){var n=void 0;if(void 0===t)return e;for(n=t<e?-8589934592:8589934592;4294967296<Math.abs(e-t);)e+=n;return e},M);function k(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),this.observer=e}var P=(k.prototype.destroy=function(){},k.prototype.resetTimeStamp=function(){},k.prototype.resetInitSegment=function(){},k.prototype.remux=function(e,t,n,r,i,a,o,s){var u=this.observer,l="";e&&(l+="audio"),t&&(l+="video"),u.trigger(Z.a.FRAG_PARSING_DATA,{data1:s,startPTS:i,startDTS:i,type:l,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(Z.a.FRAG_PARSED)},k);var L=(x.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},x.prototype.push=function(e,n,r,i,a,o,s,u,l,d,c,f){if(0<e.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var t=this.decrypter;null==t&&(t=this.decrypter=new g.a(this.observer,this.config));var h=this,p=void 0;try{p=performance.now()}catch(e){p=Date.now()}t.decrypt(e,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(e){t=Date.now()}h.observer.trigger(Z.a.FRAG_DECRYPTED,{stats:{tstart:p,tdecrypt:t}}),h.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,a,o,s,u,l,d,c,f)})}else this.pushDecrypted(new Uint8Array(e),n,new Uint8Array(r),i,a,o,s,u,l,d,c,f)},x.prototype.pushDecrypted=function(e,t,n,r,i,a,o,s,u,l,d,c){var f=this.demuxer;if(!f||(o||s)&&!this.probe(e)){for(var h=this.observer,p=this.typeSupported,g=this.config,m=[{demux:C,remux:O},{demux:w.a,remux:P},{demux:S,remux:O},{demux:R,remux:O}],y=0,v=m.length;y<v;y++){var _=m[y],b=_.demux.probe;if(b(e)){var T=this.remuxer=new _.remux(h,g,p,this.vendor);f=new _.demux(h,T,g,p),this.probe=b;break}}if(!f)return void h.trigger(Z.a.ERROR,{type:ee.b.MEDIA_ERROR,details:ee.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=f}var E=this.remuxer;(o||s)&&(f.resetInitSegment(n,r,i,l),E.resetInitSegment()),o&&(f.resetTimeStamp(c),E.resetTimeStamp(c)),"function"==typeof f.setDecryptData&&f.setDecryptData(t),f.append(e,a,u,d)},x);function x(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),this.observer=e,this.typeSupported=t,this.config=n,this.vendor=r}t.a=L},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};n.d(r,"newCue",function(){return Zt});var i=n(3),a=n.n(i),v=n(2),P=n(1),L=n(0),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var s=new Set(["hlsEventGeneric","hlsHandlerDestroying","hlsHandlerDestroyed"]);function u(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.handledEvents=n,this.useGenericHandler=!0,this.registerListeners()}var l=(u.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},u.prototype.onHandlerDestroying=function(){},u.prototype.onHandlerDestroyed=function(){},u.prototype.isEventHandler=function(){return"object"===o(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},u.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(s.has(e))throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},u.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},u.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},u.prototype.onEventGeneric=function(t,e){try{(function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)}).call(this,t,e).call()}catch(e){L.b.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.hls.trigger(P.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!1,event:t,err:e})}},u),d=n(7);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),this.method=null,this.key=null,this.iv=null,this._uri=null}var A=(function(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}(f,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),f),h=function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e};function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this._elementaryStreams=((e={})[g.ElementaryStreamTypes.AUDIO]=!1,e[g.ElementaryStreamTypes.VIDEO]=!1,e)}var C=(g.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},g.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},g.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t},g.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&((n=new A).method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},h(g,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=a.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}],[{key:"ElementaryStreamTypes",get:function(){return{AUDIO:"audio",VIDEO:"video"}}}]),g);var m=/^(\d+)x(\d+)$/,y=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;function _(e){for(var t in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),"string"==typeof e&&(e=_.parseAttrList(e)),e)e.hasOwnProperty(t)&&(this[t]=e[t])}var R=(_.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},_.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),r=0;r<t.length/2;r++)n[r]=parseInt(t.slice(2*r,2*r+2),16);return n}return null},_.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},_.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},_.prototype.enumeratedString=function(e){return this[e]},_.prototype.decimalResolution=function(e){var t=m.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},_.parseAttrList=function(e){var t=void 0,n={};for(y.lastIndex=0;null!==(t=y.exec(e));){var r=t[2];0===r.indexOf('"')&&r.lastIndexOf('"')===r.length-1&&(r=r.slice(1,-1)),n[t[1]]=r}return n},_),b={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function T(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var E=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,S=/#EXT-X-MEDIA:(.*)/g,I=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),M=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/;function w(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w)}var O=(w.findGroup=function(e,t){if(!e)return null;for(var n=null,r=0;r<e.length;r++){var i=e[r];i.id===t&&(n=i)}return n},w.convertAVC1ToAVCOTI=function(e){var t=void 0,n=e.split(".");return 2<n.length?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},w.resolve=function(e,t){return a.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},w.parseMasterPlaylist=function(e,t){var n=[],r=void 0;function i(r,i){["video","audio"].forEach(function(t){var n=r.filter(function(e){return function(e,t){var n=b[t];return!!n&&!0===n[e.slice(0,4)]}(e,t)});if(n.length){var e=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});i[t+"Codec"]=0<e.length?e[0]:n[0],r=r.filter(function(e){return-1===n.indexOf(e)})}}),i.unknownCodecs=r}for(E.lastIndex=0;null!=(r=E.exec(e));){var a={},o=a.attrs=new R(r[1]);a.url=w.resolve(r[2],t);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME,i([].concat((o.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=w.convertAVC1ToAVCOTI(a.videoCodec)),n.push(a)}return n},w.parseMasterPlaylistMedia=function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:[],a=void 0,o=[],s=0;for(S.lastIndex=0;null!==(a=S.exec(e));){var u={},l=new R(a[1]);if(l.TYPE===n){if(u.groupId=l["GROUP-ID"],u.name=l.NAME,u.type=n,u.default="YES"===l.DEFAULT,u.autoselect="YES"===l.AUTOSELECT,u.forced="YES"===l.FORCED,l.URI&&(u.url=w.resolve(l.URI,t)),u.lang=l.LANGUAGE,u.name||(u.name=u.lang),i.length){var d=w.findGroup(i,u.groupId);u.audioCodec=d?d.codec:i[0].codec}u.id=s++,o.push(u)}}return o},w.parseLevelPlaylist=function(e,t,n,r){var i=0,a=0,o={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},s=new A,u=0,l=null,d=new C,c=void 0,f=void 0;for(I.lastIndex=0;null!==(c=I.exec(e));){var h=c[1];if(h){d.duration=parseFloat(h);var p=(" "+c[2]).slice(1);d.title=p||null,d.tagList.push(p?["INF",h,p]:["INF",h])}else if(c[3]){if(!isNaN(d.duration)){var g=i++;d.type=r,d.start=a,d.levelkey=s,d.sn=g,d.level=n,d.cc=u,d.baseurl=t,d.relurl=(" "+c[3]).slice(1),o.programDateTime&&(l?d.rawProgramDateTime?d.pdt=Date.parse(d.rawProgramDateTime):d.pdt=l.pdt+1e3*l.duration:d.pdt=Date.parse(o.programDateTime),d.endPdt=d.pdt+1e3*d.duration),o.fragments.push(d),a+=(l=d).duration,d=new C}}else if(c[4]){if(d.rawByteRange=(" "+c[4]).slice(1),l){var m=l.byteRangeEndOffset;m&&(d.lastByteRangeEndOffset=m)}}else if(c[5])d.rawProgramDateTime=(" "+c[5]).slice(1),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===o.programDateTime&&(o.programDateTime=new Date(new Date(Date.parse(c[5]))-1e3*a));else{for(c=c[0].match(M),f=1;f<c.length&&void 0===c[f];f++);var y=(" "+c[f+1]).slice(1),v=(" "+c[f+2]).slice(1);switch(c[f]){case"#":d.tagList.push(v?[y,v]:[y]);break;case"PLAYLIST-TYPE":o.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":i=o.startSN=parseInt(y);break;case"TARGETDURATION":o.targetduration=parseFloat(y);break;case"VERSION":o.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"DIS":u++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(y);break;case"KEY":var _=new R(y),b=_.enumeratedString("METHOD"),T=_.URI,E=_.hexadecimalInteger("IV");b&&(s=new A,T&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(b)&&(s.method=b,s.baseuri=t,s.reluri=T,s.key=null,s.iv=E));break;case"START":var S=new R(y).decimalFloatingPoint("TIME-OFFSET");isNaN(S)||(o.startTimeOffset=S);break;case"MAP":var w=new R(y);d.relurl=w.URI,d.rawByteRange=w.BYTERANGE,d.baseurl=t,d.level=n,d.type=r,d.sn="initSegment",o.initSegment=d,d=new C;break;default:L.b.warn("line parsed but not handled: "+c)}}}return(d=l)&&!d.relurl&&(o.fragments.pop(),a-=d.duration),o.totalduration=a,o.averagetargetduration=a/o.fragments.length,o.endSN=i-1,o.startCC=o.fragments[0]?o.fragments[0].cc:0,o.endCC=u,!o.initSegment&&o.fragments.length&&o.fragments.every(function(e){return e.relurl.endsWith(".mp4")})&&(L.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(d=new C).relurl=o.fragments[0].relurl,d.baseurl=t,d.level=n,d.type=r,d.sn="initSegment",o.initSegment=d,o.needSidxRanges=!0),o},w),D=function(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),e};function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x,N={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},F={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function B(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,B);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,x.call(this,e,P.a.MANIFEST_LOADING,P.a.LEVEL_LOADING,P.a.AUDIO_TRACK_LOADING,P.a.SUBTITLE_TRACK_LOADING));return t.loaders={},t}var U,j=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(B,x=l),B.canHaveQualityLevels=function(e){return e!==N.AUDIO_TRACK&&e!==N.SUBTITLE_TRACK},B.mapContextToLevelType=function(e){switch(e.type){case N.AUDIO_TRACK:return F.AUDIO;case N.SUBTITLE_TRACK:return F.SUBTITLE;default:return F.MAIN}},B.getResponseUrl=function(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n},B.prototype.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,r=t.loader,i=new(n||r)(t);return e.loader=i,this.loaders[e.type]=i},B.prototype.getInternalLoader=function(e){return this.loaders[e.type]},B.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},B.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},B.prototype.destroy=function(){this.destroyInternalLoaders(),x.prototype.destroy.call(this)},B.prototype.onManifestLoading=function(e){this.load(e.url,{type:N.MANIFEST})},B.prototype.onLevelLoading=function(e){this.load(e.url,{type:N.LEVEL,level:e.level,id:e.id})},B.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:N.AUDIO_TRACK,id:e.id})},B.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:N.SUBTITLE_TRACK,id:e.id})},B.prototype.load=function(e,t){var n=this.hls.config,r=this.getInternalLoader(t);if(r){var i=r.context;if(i&&i.url===e)return L.b.trace("playlist request ongoing"),!1;L.b.warn("aborting previous loader for type: "+t.type),r.abort()}var a,o,s=void 0,u=void 0,l=void 0,d=void 0;switch(t.type){case N.MANIFEST:s=n.manifestLoadingMaxRetry,u=n.manifestLoadingTimeOut,l=n.manifestLoadingRetryDelay,d=n.manifestLoadingMaxRetryTimeout;break;case N.LEVEL:s=0,u=n.levelLoadingTimeOut;break;default:s=n.levelLoadingMaxRetry,u=n.levelLoadingTimeOut,l=n.levelLoadingRetryDelay,d=n.levelLoadingMaxRetryTimeout,L.b.log("Playlist loader for "+t.type+" "+(t.level||t.id))}return r=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"",a={timeout:u,maxRetry:s,retryDelay:l,maxRetryDelay:d},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,a,o),!0},B.prototype.loadsuccess=function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null;if(n.isSidxRequest)return this._handleSidxRequest(e,n),void this._handlePlaylistLoaded(e,t,n,i);this.resetInternalLoader(n.type);var a=e.data;t.tload=performance.now(),0===a.indexOf("#EXTM3U")?0<a.indexOf("#EXTINF:")||0<a.indexOf("#EXT-X-TARGETDURATION:")?this._handleTrackOrLevelPlaylist(e,t,n,i):this._handleMasterPlaylist(e,t,n,i):this._handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},B.prototype.loaderror=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null;this._handleNetworkError(t,r)},B.prototype.loadtimeout=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null;this._handleNetworkError(t,r,!0)},B.prototype._handleMasterPlaylist=function(e,t,n,r){var i=this.hls,a=e.data,o=B.getResponseUrl(e,n),s=O.parseMasterPlaylist(a,o);if(s.length){var u=s.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),l=O.parseMasterPlaylistMedia(a,o,"AUDIO",u),d=O.parseMasterPlaylistMedia(a,o,"SUBTITLES");if(l.length){var c=!1;l.forEach(function(e){e.url||(c=!0)}),!1===c&&s[0].audioCodec&&!s[0].attrs.AUDIO&&(L.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main"}))}i.trigger(P.a.MANIFEST_LOADED,{levels:s,audioTracks:l,subtitles:d,url:o,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"no level found in manifest",r)},B.prototype._handleTrackOrLevelPlaylist=function(e,t,n,r){var i=this.hls,a=n.id,o=n.level,s=n.type,u=B.getResponseUrl(e,n),l=isNaN(o)?isNaN(a)?0:a:o,d=B.mapContextToLevelType(n),c=O.parseLevelPlaylist(e.data,u,l,d);if(c.tload=t.tload,s===N.MANIFEST){var f={url:u,details:c};i.trigger(P.a.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:u,stats:t,networkDetails:r})}if(t.tparsed=performance.now(),c.needSidxRanges){var h=c.initSegment.url;this.load(h,{isSidxRequest:!0,type:s,level:o,levelDetails:c,id:a,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else n.levelDetails=c,this._handlePlaylistLoaded(e,t,n,r)},B.prototype._handleSidxRequest=function(e,i){var t=d.a.parseSegmentIndex(new Uint8Array(e.data));t.references.forEach(function(e,t){var n=e.info,r=i.levelDetails.fragments[t];0===r.byteRange.length&&(r.rawByteRange=String(1+n.end-n.start)+"@"+String(n.start))}),i.levelDetails.initSegment.rawByteRange=String(t.moovEndOffset)+"@0"},B.prototype._handleManifestParsingError=function(e,t,n,r){this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:n,networkDetails:r})},B.prototype._handleNetworkError=function(e,t,n){var r=2<arguments.length&&void 0!==n&&n,i=void 0,a=void 0,o=this.getInternalLoader(e);switch(e.type){case N.MANIFEST:i=r?v.a.MANIFEST_LOAD_TIMEOUT:v.a.MANIFEST_LOAD_ERROR,a=!0;break;case N.LEVEL:i=r?v.a.LEVEL_LOAD_TIMEOUT:v.a.LEVEL_LOAD_ERROR,a=!1;break;case N.AUDIO_TRACK:i=r?v.a.AUDIO_TRACK_LOAD_TIMEOUT:v.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;default:a=!1}o&&(o.abort(),this.resetInternalLoader(e.type)),this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:i,fatal:a,url:o.url,loader:o,context:e,networkDetails:t})},B.prototype._handlePlaylistLoaded=function(e,t,n,r){var i=n.type,a=n.level,o=n.id,s=n.levelDetails;if(s.targetduration)if(B.canHaveQualityLevels(n.type))this.hls.trigger(P.a.LEVEL_LOADED,{details:s,level:a||0,id:o||0,stats:t,networkDetails:r});else switch(i){case N.AUDIO_TRACK:this.hls.trigger(P.a.AUDIO_TRACK_LOADED,{details:s,id:o,stats:t,networkDetails:r});break;case N.SUBTITLE_TRACK:this.hls.trigger(P.a.SUBTITLE_TRACK_LOADED,{details:s,id:o,stats:t,networkDetails:r})}else this._handleManifestParsingError(e,n,"invalid target duration",r)},D(B,null,[{key:"ContextType",get:function(){return N}},{key:"LevelType",get:function(){return F}}]),B);function G(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,G);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,U.call(this,e,P.a.FRAG_LOADING));return t.loaders={},t}var H,q=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(G,U=l),G.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},U.prototype.destroy.call(this)},G.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,r=this.loaders,i=this.hls.config,a=i.fLoader,o=i.loader;t.loaded=0;var s=r[n];s&&(L.b.warn("abort previous fragment loader for type: "+n),s.abort()),s=r[n]=t.loader=i.fLoader?new a(i):new o(i);var u,l,d=void 0;d={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var c=t.byteRangeStartOffset,f=t.byteRangeEndOffset;isNaN(c)||isNaN(f)||(d.rangeStart=c,d.rangeEnd=f),u={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:i.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},s.load(d,u,l)},G.prototype.loadsuccess=function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null,a=e.data,o=n.frag;o.loader=void 0,this.loaders[o.type]=void 0,this.hls.trigger(P.a.FRAG_LOADED,{payload:a,frag:o,stats:t,networkDetails:i})},G.prototype.loaderror=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},G.prototype.loadtimeout=function(e,t,n){var r=2<arguments.length&&void 0!==n?n:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},G.prototype.loadprogress=function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null,a=t.frag;a.loaded=e.loaded,this.hls.trigger(P.a.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:i})},G);function V(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,V);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,H.call(this,e,P.a.KEY_LOADING));return t.loaders={},t.decryptkey=null,t.decrypturl=null,t}var K=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(V,H=l),V.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},l.prototype.destroy.call(this)},V.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,r=this.loaders[n],i=t.decryptdata,a=i.uri;if(a!==this.decrypturl||null===this.decryptkey){var o,s,u,l=this.hls.config;r&&(L.b.warn("abort previous key loader for type:"+n),r.abort()),t.loader=this.loaders[n]=new l.loader(l),this.decrypturl=a,this.decryptkey=null,o={url:a,frag:t,responseType:"arraybuffer"},s={timeout:l.fragLoadingTimeOut,maxRetry:l.fragLoadingMaxRetry,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(o,s,u)}else this.decryptkey&&(i.key=this.decryptkey,this.hls.trigger(P.a.KEY_LOADED,{frag:t}))},V.prototype.loadsuccess=function(e,t,n){var r=n.frag;this.decryptkey=r.decryptdata.key=new Uint8Array(e.data),r.loader=void 0,this.loaders[r.type]=void 0,this.hls.trigger(P.a.KEY_LOADED,{frag:r})},V.prototype.loaderror=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},V.prototype.loadtimeout=function(e,t){var n=t.frag,r=n.loader;r&&r.abort(),this.loaders[t.type]=void 0,this.hls.trigger(P.a.ERROR,{type:v.b.NETWORK_ERROR,details:v.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},V),Y={search:function(e,t){for(var n=0,r=e.length-1,i=null,a=null;n<=r;){var o=t(a=e[i=(n+r)/2|0]);if(0<o)n=i+1;else{if(!(o<0))return a;r=i-1}}return null}},W={isBuffered:function(e,t){try{if(e)for(var n=e.buffered,r=0;r<n.length;r++)if(t>=n.start(r)&&t<=n.end(r))return!0}catch(e){}return!1},bufferInfo:function(e,t,n){try{if(e){var r=e.buffered,i=[],a=void 0;for(a=0;a<r.length;a++)i.push({start:r.start(a),end:r.end(a)});return this.bufferedInfo(i,t,n)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var r=[],i=void 0,a=void 0,o=void 0,s=void 0,u=void 0;for(e.sort(function(e,t){var n=e.start-t.start;return n||t.end-e.end}),u=0;u<e.length;u++){var l=r.length;if(l){var d=r[l-1].end;e[u].start-d<n?e[u].end>d&&(r[l-1].end=e[u].end):r.push(e[u])}else r.push(e[u])}for(i=u=0,a=o=t;u<r.length;u++){var c=r[u].start,f=r[u].end;if(c<=t+n&&t<f)a=c,i=(o=f)-t;else if(t+n<c){s=c;break}}return{len:i,start:a,end:o,nextStart:s}}},z=n(8),X=n(6),Q=n.n(X),$=n(10),J=n.n($);function Z(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}var ee=Z();function te(n,e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,te),this.hls=n,this.id=e;var i=this.observer=new Q.a,t=n.config;i.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var r=function(e,t){(t=t||{}).frag=this.frag,t.id=this.id,n.trigger(e,t)}.bind(this);i.on(P.a.FRAG_DECRYPTED,r),i.on(P.a.FRAG_PARSING_INIT_SEGMENT,r),i.on(P.a.FRAG_PARSING_DATA,r),i.on(P.a.FRAG_PARSED,r),i.on(P.a.ERROR,r),i.on(P.a.FRAG_PARSING_METADATA,r),i.on(P.a.FRAG_PARSING_USERDATA,r),i.on(P.a.INIT_PTS_FOUND,r);var a={mp4:ee.isTypeSupported("video/mp4"),mpeg:ee.isTypeSupported("audio/mpeg"),mp3:ee.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(t.enableWorker&&"undefined"!=typeof Worker){L.b.log("demuxing in webworker");var s=void 0;try{s=this.w=J()(11),this.onwmsg=this.onWorkerMessage.bind(this),s.addEventListener("message",this.onwmsg),s.onerror=function(e){n.trigger(P.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},s.postMessage({cmd:"init",typeSupported:a,vendor:o,id:e,config:JSON.stringify(t)})}catch(e){L.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),s&&URL.revokeObjectURL(s.objectURL),this.demuxer=new z.a(i,a,t,o),this.w=void 0}}else this.demuxer=new z.a(i,a,t,o)}var ne=(te.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},te.prototype.push=function(e,t,n,r,i,a,o,s){var u=this.w,l=isNaN(i.startDTS)?i.start:i.startDTS,d=i.decryptdata,c=this.frag,f=!(c&&i.cc===c.cc),h=!(c&&i.level===c.level),p=c&&i.sn===c.sn+1,g=!h&&p;if(f&&L.b.log(this.id+":discontinuity detected"),h&&L.b.log(this.id+":switch detected"),this.frag=i,u)u.postMessage({cmd:"demux",data:e,decryptdata:d,initSegment:t,audioCodec:n,videoCodec:r,timeOffset:l,discontinuity:f,trackSwitch:h,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var m=this.demuxer;m&&m.push(e,d,t,n,r,l,f,h,g,a,o,s)}},te.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case P.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},te);var re,ie="NOT_LOADED",ae="APPENDING",oe="PARTIAL",se="OK",ue=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(le,re=l),le.prototype.destroy=function(){this.fragments=null,this.timeRanges=null,this.config=null,l.prototype.destroy.call(this),re.prototype.destroy.call(this)},le.prototype.getBufferedFrag=function(r,i){var a=this.fragments,e=Object.keys(a).filter(function(e){var t=a[e];if(t.body.type!==i)return!1;if(!t.buffered)return!1;var n=t.body;return n.startPTS<=r&&r<=n.endPTS});if(0===e.length)return null;var t=e.pop();return a[t].body},le.prototype.detectEvictedFragments=function(i,a){var o=this,s=void 0,u=void 0;Object.keys(this.fragments).forEach(function(e){var t=o.fragments[e];if(!0===t.buffered){var n=t.range[i];if(n){s=n.time;for(var r=0;r<s.length;r++)if(u=s[r],!1===o.isTimeBuffered(u.startPTS,u.endPTS,a)){o.removeFragment(t.body);break}}}})},le.prototype.detectPartialFragments=function(n){var r=this,e=this.getFragmentKey(n),i=this.fragments[e];i&&(i.buffered=!0,Object.keys(this.timeRanges).forEach(function(e){if(!0===n.hasElementaryStream(e)){var t=r.timeRanges[e];i.range[e]=r.getBufferedTimes(n.startPTS,n.endPTS,t)}}))},le.prototype.getBufferedTimes=function(e,t,n){for(var r=[],i=void 0,a=void 0,o=!1,s=0;s<n.length;s++){if(i=n.start(s)-this.bufferPadding,a=n.end(s)+this.bufferPadding,i<=e&&t<=a){r.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))});break}if(e<a&&i<t)r.push({startPTS:Math.max(e,n.start(s)),endPTS:Math.min(t,n.end(s))}),o=!0;else if(t<=i)break}return{time:r,partial:o}},le.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.sn},le.prototype.getPartialFragment=function(n){var r=this,i=void 0,a=void 0,o=void 0,s=null,u=0;return Object.keys(this.fragments).forEach(function(e){var t=r.fragments[e];r.isPartial(t)&&(a=t.body.startPTS-r.bufferPadding,o=t.body.endPTS+r.bufferPadding,a<=n&&n<=o&&(i=Math.min(n-a,o-n),u<=i&&(s=t.body,u=i)))}),s},le.prototype.getState=function(e){var t=this.getFragmentKey(e),n=this.fragments[t],r=ie;return void 0!==n&&(r=n.buffered?!0===this.isPartial(n)?oe:se:ae),r},le.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},le.prototype.isTimeBuffered=function(e,t,n){for(var r=void 0,i=void 0,a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,i=n.end(a)+this.bufferPadding,r<=e&&t<=i)return!0;if(t<=r)return!1}return!1},le.prototype.onFragLoaded=function(e){var t=e.frag;if(!isNaN(t.sn)){var n=this.getFragmentKey(t),r={body:t,range:Object.create(null),buffered:!1};this.fragments[n]=r}},le.prototype.onBufferAppended=function(e){var n=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var t=n.timeRanges[e];n.detectEvictedFragments(e,t)})},le.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},le.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},le.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},le.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},le);function le(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,le);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,re.call(this,e,P.a.BUFFER_APPENDED,P.a.FRAG_BUFFERED,P.a.FRAG_LOADED));return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}function de(e,t,n){var r=e[t],i=e[n],a=i.startPTS;isNaN(a)?i.start=t<n?r.start+r.duration:Math.max(r.start-i.duration,0):t<n?(r.duration=a-r.start,r.duration<0&&L.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!")):(i.duration=r.start-a,i.duration<0&&L.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!"))}function ce(e,t,n,r,i,a){var o=n;if(!isNaN(t.startPTS)){var s=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=s:t.deltaPTS=Math.max(s,t.deltaPTS),o=Math.max(n,t.startPTS),n=Math.min(n,t.startPTS),r=Math.max(r,t.endPTS),i=Math.min(i,t.startDTS),a=Math.max(a,t.endDTS)}var u=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=o,t.endPTS=r,t.startDTS=i,t.endDTS=a,t.duration=r-n;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var d,c=void 0,f=void 0;for(d=l-e.startSN,(c=e.fragments)[d]=t,f=d;0<f;f--)de(c,f,f-1);for(f=d;f<c.length-1;f++)de(c,f,f+1);return e.PTSKnown=!0,u}function fe(e,t){var n=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,a=e.fragments,o=t.fragments,s=0,u=void 0;if(t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment),r<n)t.PTSKnown=!1;else{for(var l=n;l<=r;l++){var d=a[i+l],c=o[l];c&&d&&(s=d.cc-c.cc,isNaN(d.startPTS)||(c.start=c.startPTS=d.startPTS,c.endPTS=d.endPTS,c.duration=d.duration,c.backtracked=d.backtracked,c.dropped=d.dropped,u=c))}if(s)for(L.b.log("discontinuity sliding from playlist, take drift into account"),l=0;l<o.length;l++)o[l].cc+=s;if(u)ce(t,u,u.startPTS,u.endPTS,u.startDTS,u.endDTS);else if(0<=i&&i<a.length){var f=a[i].start;for(l=0;l<o.length;l++)o[l].start+=f}t.PTSKnown=e.PTSKnown}}var he,pe,ge,me={toString:function(e){for(var t="",n=e.length,r=0;r<n;r++)t+="["+e.start(r).toFixed(3)+","+e.end(r).toFixed(3)+"]";return t}};function ye(n,e){e.fragments.forEach(function(e){if(e){var t=e.start+n;e.start=e.startPTS=t,e.endPTS=t+e.duration}}),e.PTSKnown=!0}function ve(e,t,n){if(function(e,t,n){var r=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(r=!0),r}(e,t,n)){var r=function(e,t){var n=e.fragments,r=t.fragments;if(r.length&&n.length){var i=function(e,t){for(var n=null,r=0;r<e.length;r+=1){var i=e[r];if(i&&i.cc===t){n=i;break}}return n}(n,r[0].cc);if(i&&(!i||i.startPTS))return i;L.b.log("No frag in previous level to align on")}else L.b.log("No fragments to align")}(t.details,n);r&&(L.b.log("Adjusting PTS using last level due to CC increase within current level"),ye(r.start,n))}if(!1===n.PTSKnown&&t&&t.details&&t.details.fragments&&t.details.fragments.length){var i=t.details.programDateTime,a=(n.programDateTime-i)/1e3+t.details.fragments[0].start;isNaN(a)||(L.b.log("adjusting PTS using programDateTime delta, sliding:"+a.toFixed(3)),ye(a,n))}}function _e(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_e);for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,he.call.apply(he,[this,e].concat(n)));return i._tickInterval=null,i._tickCallCount=0,i}function be(e){return pe.apply(this,arguments)}function Te(){return ge.apply(this,arguments)}var Ee=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(_e,he=l),_e.prototype.destroy=function(){this.clearInterval(),he.prototype.destroy.call(this)},_e.prototype.hasInterval=function(){return null!==this._tickInterval},_e.prototype.setInterval=(pe=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this.tick.bind(this,!1),e),!0)},be.toString=function(){return pe.toString()},be),_e.prototype.clearInterval=(ge=function(){return!(!this._tickInterval||(clearInterval(this._tickInterval),this._tickInterval=null))},Te.toString=function(){return ge.toString()},Te),_e.prototype.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),1<this._tickCallCount&&setTimeout(this.tick.bind(this),0),this._tickCallCount=0)},_e.prototype.doTick=function(){throw new Error("TaskLoop is abstract and `doLoop` must be implemented")},_e),Se=function(e,t,n){return t&&we(e.prototype,t),n&&we(e,n),e};function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ae,Ce="STOPPED",Re="IDLE",Ie="KEY_LOADING",Me="FRAG_LOADING",Oe="FRAG_LOADING_WAITING_RETRY",De="WAITING_LEVEL",ke="PARSING",Pe="PARSED",Le="BUFFER_FLUSHING",xe="ENDED",Ne="ERROR";function Fe(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Fe);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Ae.call(this,e,P.a.MEDIA_ATTACHED,P.a.MEDIA_DETACHING,P.a.MANIFEST_LOADING,P.a.MANIFEST_PARSED,P.a.LEVEL_LOADED,P.a.KEY_LOADED,P.a.FRAG_LOADED,P.a.FRAG_LOAD_EMERGENCY_ABORTED,P.a.FRAG_PARSING_INIT_SEGMENT,P.a.FRAG_PARSING_DATA,P.a.FRAG_PARSED,P.a.ERROR,P.a.AUDIO_TRACK_SWITCHING,P.a.AUDIO_TRACK_SWITCHED,P.a.BUFFER_CREATED,P.a.BUFFER_APPENDED,P.a.BUFFER_FLUSHED));return n.fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=Ce,n}var Be,Ue=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Fe,Ae=Ee),Fe.prototype.onHandlerDestroying=function(){this.stopLoad()},Fe.prototype.onHandlerDestroyed=function(){this.state=Ce,this.fragmentTracker=null},Fe.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var r=n.startLevel;-1===r&&(r=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=r,this.loadedmetadata=!1}0<t&&-1===e&&(L.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Re,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=Ce},Fe.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.clearInterval(),this.state=Ce,this.forceStartLoad=!1},Fe.prototype.doTick=function(){switch(this.state){case Le:this.fragLoadError=0;break;case Re:this._doTickIdle();break;case De:var e=this.levels[this.level];e&&e.details&&(this.state=Re);break;case Oe:var t=performance.now(),n=this.retryDate;(!n||n<=t||this.media&&this.media.seeking)&&(L.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=Re)}this._checkBuffer(),this._checkFragmentChanged()},Fe.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0!==this.levelLastLoaded&&(n||!this.startFragRequested&&t.startFragPrefetch)){var r=void 0;r=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var u=W.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,r,t.maxBufferHole),l=u.len;if(!(s<=l)){L.b.trace("buffer length of "+l.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var d=a.details;if(void 0===d||!0===d.live&&this.levelLastLoaded!==i)this.state=De;else{var c=this.fragPrevious;if(!d.live&&c&&!c.backtracked&&c.sn===d.endSN&&!u.nextStart&&Math.min(n.duration,c.start+c.duration)-Math.max(u.end,c.start)<=Math.max(.2,c.duration)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(P.a.BUFFER_EOS,f),void(this.state=xe)}this._fetchPayloadOrEos(r,u,d)}}}}},Fe.prototype._fetchPayloadOrEos=function(e,t,n){var r=this.fragPrevious,i=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=t.end,d=void 0;if(n.initSegment&&!n.initSegment.data)d=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(o<c)return void L.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c);if(null===(d=this._ensureFragmentAtLivePoint(n,l,s,u,r,a,o)))return}else l<s&&(d=a[0]);(d=d||this._findFragment(s,r,o,a,l,u,n))&&this._loadFragmentOrKey(d,i,n,e,l)}},Fe.prototype._ensureFragmentAtLivePoint=function(e,t,n,r,i,a,o){var s=this.hls.config,u=this.media,l=void 0,d=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,r-d)){var c=this.liveSyncPosition=this.computeLivePosition(n,e);L.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,u&&u.readyState&&u.duration>c&&(u.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&r<t&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(i)if(e.programDateTime)l=this._findFragmentByPDT(a,i.endPdt+1);else{var f=i.sn+1;if(f>=e.startSN&&f<=e.endSN){var h=a[f-e.startSN];i.cc===h.cc&&(l=h,L.b.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=Y.search(a,function(e){return i.cc-e.cc}))&&L.b.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(o-1,Math.round(o/2))],L.b.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},Fe.prototype._findFragmentByPDT=function(e,t){if(!e||void 0===t)return null;if(t<e[0].pdt)return null;if(t>=e[e.length-1].endPdt)return null;for(var n=0;n<e.length;++n){var r=e[n];if(t<r.endPdt)return r}return null},Fe.prototype._findFragmentBySN=function(e,t,n,r){function i(e){var t=Math.min(o,e.duration+(e.deltaPTS?e.deltaPTS:0));return e.start+e.duration-t<=n?1:e.start-t>n&&e.start?-1:0}var a=void 0,o=this.hls.config.maxFragLookUpTolerance,s=e?t[e.sn-t[0].sn+1]:void 0;return n<r&&(r-o<n&&(o=0),a=s&&!i(s)?s:Y.search(t,i)),a},Fe.prototype._findFragment=function(e,t,n,r,i,a,o){var s=this.hls.config,u=void 0,l=void 0;if(l=i<a?o.programDateTime?this._findFragmentByPDT(r,1e3*i+(o.programDateTime?Date.parse(o.programDateTime):0)-1e3*e):this._findFragmentBySN(t,r,i,a):r[n-1]){var d=(u=l).sn-o.startSN,c=t&&u.level===t.level,f=r[d-1],h=r[1+d];if(t&&u.sn===t.sn)if(c&&!u.backtracked)if(u.sn<o.endSN){var p=t.deltaPTS;p&&p>s.maxBufferHole&&t.dropped&&d?(u=f,L.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(u=h,L.b.log("SN just loaded, load next one: "+u.sn))}else u=null;else u.backtracked&&(h&&h.backtracked?(L.b.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+h.sn),u=h):(L.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,f?(u=f).backtracked=!0:d&&(u=null)))}return u},Fe.prototype._loadFragmentOrKey=function(e,t,n,r,i){if(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key)L.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=Ie,this.hls.trigger(P.a.KEY_LOADING,{frag:e});else{L.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+r.toFixed(3)+",bufferEnd:"+i.toFixed(3));var a=this.fragmentTracker.getState(e);this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),e.backtracked||a===ie?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(P.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new ne(this.hls,"main")),this.state=Me):a===ae&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)}},Fe.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,j.LevelType.MAIN)},Fe.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Fe.prototype._checkFragmentChanged=function(){var e=void 0,t=void 0,n=this.media;if(n&&n.readyState&&!1===n.seeking&&((t=n.currentTime)>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),W.isBuffered(n,t)?e=this.getBufferedFrag(t):W.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var r=e;if(r!==this.fragPlaying){this.hls.trigger(P.a.FRAG_CHANGED,{frag:r});var i=r.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(P.a.LEVEL_SWITCHED,{level:i}),this.fragPlaying=r}}},Fe.prototype.immediateLevelSwitch=function(){if(L.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},Fe.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,W.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},Fe.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,n=void 0,r=void 0;if((t=this.getBufferedFrag(e.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),e.paused)n=0;else{var i=this.hls.nextLoadLevel,a=this.levels[i],o=this.fragLastKbps;n=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(r=(r=this.getBufferedFrag(e.currentTime+n))&&this.followingBufferedFrag(r)){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(r.maxStartPTS,Number.POSITIVE_INFINITY)}}},Fe.prototype.flushMainBuffer=function(e,t){this.state=Le;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(P.a.BUFFER_FLUSHING,n)},Fe.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},Fe.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(L.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},Fe.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;isNaN(t)||L.b.log("media seeking to "+t.toFixed(3));var r=this.mediaBuffer?this.mediaBuffer:e,i=W.bufferInfo(r,t,this.config.maxBufferHole);if(this.state===Me){var a=this.fragCurrent;if(0===i.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,u=a.start+a.duration+o;t<s||u<t?(a.loader&&(L.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=Re):L.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===xe&&(0===i.len&&(this.fragPrevious=0),this.state=Re);e&&(this.lastCurrentTime=t),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},Fe.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||L.b.log("media seeked to "+t.toFixed(3)),this.tick()},Fe.prototype.onMediaEnded=function(){L.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},Fe.prototype.onManifestLoading=function(){L.b.log("trigger BUFFER_RESET"),this.hls.trigger(P.a.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},Fe.prototype.onManifestParsed=function(e){var t=!1,n=!1,r=void 0;e.levels.forEach(function(e){(r=e.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(t=!0),-1!==r.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=t&&n,this.audioCodecSwitch&&L.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},Fe.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,r=this.levels[this.levelLastLoaded],i=this.levels[n],a=t.totalduration,o=0;if(L.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=i.details;s&&0<t.fragments.length?(fe(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&!isNaN(o)?L.b.log("live playlist sliding:"+o.toFixed(3)):(L.b.log("live playlist - outdated PTS, unknown sliding"),ve(this.fragPrevious,r,t))):(L.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ve(this.fragPrevious,r,t))}else t.PTSKnown=!1;if(i.details=t,this.levelLastLoaded=n,this.hls.trigger(P.a.LEVEL_UPDATED,{details:t,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;isNaN(u)?t.live?(this.startPosition=this.computeLivePosition(o,t),L.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(L.b.log("negative start time offset "+u+", count from end of last fragment"),u=o+a+u),L.b.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===De&&(this.state=Re),this.tick()},Fe.prototype.onKeyLoaded=function(){this.state===Ie&&(this.state=Re,this.tick())},Fe.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Me&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var r=e.stats,i=this.levels[t.level],a=i.details;if(L.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=r,!0===n.bitrateTest&&this.hls.nextLoadLevel)this.state=Re,this.startFragRequested=!1,r.tparsed=r.tbuffered=performance.now(),this.hls.trigger(P.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=Re,r.tparsed=r.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(P.a.FRAG_BUFFERED,{stats:r,frag:t,id:"main"}),this.tick();else{this.state=ke;var o=a.totalduration,s=t.level,u=t.sn,l=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(L.b.log("swapping playlist audio codec"),void 0===l&&(l=this.lastAudioCodec),l=l&&(-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,L.b.log("Parsing "+u+" of ["+a.startSN+" ,"+a.endSN+"],level "+s+", cc "+t.cc);var d=this.demuxer;d=d||(this.demuxer=new ne(this.hls,"main"));var c=this.media,f=!(c&&c.seeking)&&(a.PTSKnown||!a.live),h=a.initSegment?a.initSegment.data:[];d.push(e.payload,h,l,i.videoCodec,t,o,f,void 0)}}this.fragLoadError=0},Fe.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ke){var r=e.tracks,i=void 0,a=void 0;if(r.audio&&this.altAudio&&delete r.audio,a=r.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(L.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",L.b.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}for(i in(a=r.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(P.a.BUFFER_CODECS,r),r){a=r[i],L.b.log("main track:"+i+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var u=a.initSegment;u&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(P.a.BUFFER_APPENDING,{type:i,data:u,parent:"main",content:"initSegment"}))}this.tick()}},Fe.prototype.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"main"===t.id&&r.sn===e.sn&&r.level===e.level&&("audio"!==t.type||!this.altAudio)&&this.state===ke){var i=this.levels[this.level],a=e;if(isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),!0===t.hasAudio&&a.addElementaryStream(C.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(C.ElementaryStreamTypes.VIDEO),L.b.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)L.b.warn("Already backtracked on this fragment, appending with the gap");else{var o=i.details;if(!o||a.sn!==o.startSN)return L.b.warn("missing video frame(s), backtracking fragment"),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=Re,this.fragPrevious=a,void this.tick();L.b.warn("missing video frame(s) on first frag, appending with gap")}else a.backtracked=!1;var s=ce(i.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),u=this.hls;u.trigger(P.a.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:s,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&n.state===ke&&(n.appended=!0,n.pendingBuffering=!0,u.trigger(P.a.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},Fe.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ke&&(this.stats.tparsed=performance.now(),this.state=Pe,this._checkAppendedParsed())},Fe.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){L.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var r=this.fragCurrent;r.loader&&(L.b.log("switching to main audio track, cancel main fragment load"),r.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Re}var i=this.hls;i.trigger(P.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),i.trigger(P.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},Fe.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(L.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n,this.tick()},Fe.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,r=void 0,i=!1;for(var a in t){var o=t[a];"main"===o.id?(n=o,"video"===(r=a)&&(this.videoBuffer=t[a].buffer)):i=!0}i&&n?(L.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},Fe.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==ke&&t!==Pe||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},Fe.prototype._checkAppendedParsed=function(){if(!(this.state!==Pe||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;L.b.log("main buffered : "+me.toString(t.buffered)),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(P.a.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=Re}this.tick()}},Fe.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&W.isBuffered(this.media,this.media.currentTime)&&W.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var r=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);L.b.warn("mediaController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=Oe}else L.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ne;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:this.state!==Ne&&(e.fatal?(this.state=Ne,L.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==De||(this.state=Re));break;case v.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==ke&&this.state!==Pe||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=Re):(L.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},Fe.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,L.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},Fe.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,r=(this.mediaBuffer?this.mediaBuffer:e).buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var i=e.seeking?n:this.startPosition;n!==i&&(L.b.log("target start position not buffered, seek to buffered.start(0) "+i+" from current time"+n+" "),e.currentTime=i)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var a=W.bufferInfo(e,n,t.maxBufferHole),o=!(e.paused&&1<e.readyState||e.ended||0===e.buffered.length);if(n!==this.lastCurrentTime)this.stallReported&&(L.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(o){var s=performance.now(),u=this.hls;if(this.stalled){var l=s-this.stalled,d=a.len,c=this.nudgeRetry||0,f=this.fragmentTracker.getPartialFragment(n);if(null!==f)for(var h=0,p=0;p<e.buffered.length;p++){var g=e.buffered.start(p);if(h<=n&&n<g)return e.currentTime=Math.max(g,e.currentTime+.1),L.b.warn("skipping hole, adjusting currentTime from "+n+" to "+e.currentTime),this.stalled=void 0,void u.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+n+" to "+e.currentTime,frag:f});h=e.buffered.end(p)}if(.5<d&&l>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,L.b.warn("playback stalling in high buffer @"+n),u.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:d})),this.stalled=void 0,this.nudgeRetry=++c,c<t.nudgeMaxRetry){var m=e.currentTime,y=m+c*t.nudgeOffset;L.b.log("adjust currentTime from "+m+" to "+y),e.currentTime=y,u.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else L.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),u.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=s,this.stallReported=!1}}}},Fe.prototype.onFragLoadEmergencyAborted=function(){this.state=Re,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},Fe.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this.fragmentTracker.detectEvictedFragments(C.ElementaryStreamTypes.VIDEO,e.buffered),this.state=Re,this.fragPrevious=null},Fe.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},Fe.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},Se(Fe,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,L.b.log("main stream:"+t+"->"+e),this.hls.trigger(P.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),Fe),je=function(e,t,n){return t&&Ge(e.prototype,t),n&&Ge(e,n),e};function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,He);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Be.call(this,e,P.a.MANIFEST_LOADED,P.a.LEVEL_LOADED,P.a.FRAG_LOADED,P.a.ERROR));return t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,t}var qe,Ve=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(He,Be=l),He.prototype.onHandlerDestroying=function(){this.cleanTimer(),this.manualLevelIndex=-1},He.prototype.cleanTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},He.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},He.prototype.stopLoad=function(){this.canload=!1},He.prototype.onManifestLoaded=function(e){var t=[],n=void 0,r={},i=null,a=!1,o=!1,s=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),u=[];if(e.levels.forEach(function(e){e.loadError=0,e.fragmentError=!1,a=a||!!e.videoCodec,o=o||!!e.audioCodec||!(!e.attrs||!e.attrs.AUDIO),!0===s&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),void 0===(i=r[e.bitrate])?(e.url=[e.url],e.urlId=0,r[e.bitrate]=e,t.push(e)):i.url.push(e.url)}),!0===a&&!0===o&&(t=t.filter(function(e){return!!e.videoCodec})),t=t.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||T(t))&&(!n||T(n))}),e.audioTracks&&(u=e.audioTracks.filter(function(e){return!e.audioCodec||T(e.audioCodec,"audio")})),0<t.length){n=t[0].bitrate,t.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=t;for(var l=0;l<t.length;l++)if(t[l].bitrate===n){this._firstLevel=l,L.b.log("manifest loaded,"+t.length+" level(s) found, first bitrate:"+n);break}this.hls.trigger(P.a.MANIFEST_PARSED,{levels:t,audioTracks:u,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:a,altAudio:0<u.length})}else this.hls.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},He.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(0<=e&&e<t.length){if(this.cleanTimer(),this.currentLevelIndex!==e){L.b.log("switching to level "+e);var r=t[this.currentLevelIndex=e];r.level=e,n.trigger(P.a.LEVEL_SWITCHING,r)}var i=t[e],a=i.details;if(!a||!0===a.live){var o=i.urlId;n.trigger(P.a.LEVEL_LOADING,{url:i.url[o],level:e,id:o})}}else n.trigger(P.a.ERROR,{type:v.b.OTHER_ERROR,details:v.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},He.prototype.onError=function(e){if(!0!==e.fatal){var t=!1,n=!1,r=void 0;switch(e.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:r=e.frag.level,n=!0;break;case v.a.LEVEL_LOAD_ERROR:case v.a.LEVEL_LOAD_TIMEOUT:r=e.context.level,t=!0;break;case v.a.REMUX_ALLOC_ERROR:r=e.level,t=!0}void 0!==r&&this.recoverLevel(e,r,t,n)}else e.type===v.b.NETWORK_ERROR&&this.cleanTimer()},He.prototype.recoverLevel=function(e,t,n,r){var i=this,a=this.hls.config,o=e.details,s=this._levels[t],u=void 0,l=void 0,d=void 0;if(s.loadError++,s.fragmentError=r,!0===n){if(!(this.levelRetryCount+1<=a.levelLoadingMaxRetry))return L.b.error("level controller, cannot recover from "+o+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(e.fatal=!0);l=Math.min(Math.pow(2,this.levelRetryCount)*a.levelLoadingRetryDelay,a.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return i.loadLevel()},l),e.levelRetry=!0,this.levelRetryCount++,L.b.warn("level controller, "+o+", retry in "+l+" ms, current retry count is "+this.levelRetryCount)}!0!==n&&!0!==r||(1<(u=s.url.length)&&s.loadError<u?(L.b.warn("level controller, "+o+" for level "+t+": switching to redundant stream id "+s.urlId),s.urlId=(s.urlId+1)%u,s.details=void 0):-1===this.manualLevelIndex?(d=0===t?this._levels.length-1:t-1,L.b.warn("level controller, "+o+": switch to "+d),this.hls.nextAutoLevel=this.currentLevelIndex=d):!0===r&&(L.b.warn("level controller, "+o+": reload a fragment"),this.currentLevelIndex=null))},He.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var n=this._levels[t.level];void 0!==n&&(n.fragmentError=!1,n.loadError=0,this.levelRetryCount=0)}},He.prototype.onLevelLoaded=function(e){var t=this,n=e.level;if(n===this.currentLevelIndex){var r=this._levels[n];!1===r.fragmentError&&(r.loadError=0,this.levelRetryCount=0);var i=e.details;if(i.live){var a=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),o=a,s=r.details;s&&i.endSN===s.endSN&&(o/=2,L.b.log("same live playlist, reload twice faster")),o-=performance.now()-e.stats.trequest,o=Math.max(a/2,Math.round(o)),L.b.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.cleanTimer()}},He.prototype.loadLevel=function(){var e=void 0,t=void 0;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(e=this._levels[this.currentLevelIndex])&&0<e.url.length&&(t=e.urlId,this.hls.trigger(P.a.LEVEL_LOADING,{url:e.url[t],level:this.currentLevelIndex,id:t}))},je(He,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&void 0!==t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0!==this._startLevel)return this._startLevel;var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),He),Ke=n(4);function Ye(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function We(e){if(e&&e.cues)for(;0<e.cues.length;)e.removeCue(e.cues[0])}function ze(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ze);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,qe.call(this,e,P.a.MEDIA_ATTACHED,P.a.MEDIA_DETACHING,P.a.FRAG_PARSING_METADATA));return t.id3Track=void 0,t.media=void 0,t}var Xe=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ze,qe=l),ze.prototype.destroy=function(){l.prototype.destroy.call(this)},ze.prototype.onMediaAttached=function(e){this.media=e.media,this.media},ze.prototype.onMediaDetaching=function(){We(this.id3Track),this.id3Track=void 0,this.media=void 0},ze.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return Ye(n,this.media),n}return this.media.addTextTrack("metadata","id3")},ze.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var r=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<n.length;i++){var a=Ke.a.getID3Frames(n[i].data);if(a){var o=n[i].pts,s=i<n.length-1?n[i+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l=a[u];if(!Ke.a.isTimeStampFrame(l)){var d=new r(o,s,"");d.value=l,this.id3Track.addCue(d)}}}}},ze);function Qe(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Qe),this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var $e=(Qe.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},Qe.prototype.getTotalWeight=function(){return this.totalWeight_},Qe.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},Qe);function Je(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Je),this.hls=e,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new $e(t),this.fast_=new $e(n)}var Ze,et=(Je.prototype.sample=function(e,t){var n=8e3*t/(e=Math.max(e,this.minDelayMs_)),r=e/1e3;this.fast_.sample(r,n),this.slow_.sample(r,n)},Je.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},Je.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},Je.prototype.destroy=function(){},Je),tt=function(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),e};function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,rt);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Ze.call(this,e,P.a.FRAG_LOADING,P.a.FRAG_LOADED,P.a.FRAG_BUFFERED,P.a.ERROR));return t.lastLoadedFragLevel=0,t._nextAutoLevel=-1,t.hls=e,t.timer=null,t._bwEstimator=null,t.onCheck=t._abandonRulesCheck.bind(t),t}var it=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(rt,Ze=l),rt.prototype.destroy=function(){this.clearTimer(),l.prototype.destroy.call(this)},rt.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,r=e.frag.level,i=n.levels[r].details.live,a=n.config,o=void 0,s=void 0;s=i?(o=a.abrEwmaFastLive,a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,a.abrEwmaSlowVoD),this._bwEstimator=new et(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},rt.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,r=n.loader,i=e.minAutoLevel;if(!r||r.stats&&r.stats.aborted)return L.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=r.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var u=e.levels,l=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),d=u[n.level],c=d.realBitrate?Math.max(d.realBitrate,d.bitrate):d.bitrate,f=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*c/8)),h=t.currentTime,p=(f-a.loaded)/l,g=(W.bufferInfo(t,h,e.config.maxBufferHole).end-h)/s;if(g<2*n.duration/s&&g<p){var m=void 0,y=void 0;for(y=n.level-1;i<y;y--){var v=u[y].realBitrate?Math.max(u[y].realBitrate,u[y].bitrate):u[y].bitrate;if((m=n.duration*v/(6.4*l))<g)break}m<p&&(L.b.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(o,a.loaded),r.abort(),this.clearTimer(),e.trigger(P.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},rt.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],r=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,i=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:r,duration:i},n.realBitrate=Math.round(8*r/i)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},rt.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(!0===t.aborted||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var r=t.tparsed-t.trequest;L.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(r,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=r/1e3:this.bitrateTestDelay=0}},rt.prototype.onError=function(e){switch(e.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},rt.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},rt.prototype._findBestLevel=function(e,t,n,r,i,a,o,s,u){for(var l=i;r<=l;l--){var d=u[l].details,c=d?d.totalduration/d.fragments.length:t,f=!!d&&d.live,h=void 0;h=l<=e?o*n:s*n;var p=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,g=p*c/h;if(L.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(h)+"/"+p+"/"+c+"/"+a+"/"+g),p<h&&(!g||f&&!this.bitrateTestDelay||g<a))return l}return-1},tt(rt,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,r=e.config,i=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,u=a?a.currentTime:0,l=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(W.bufferInfo(a,u,r.maxBufferHole).end-u)/l,f=this._findBestLevel(o,s,d,i,t,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor,n);if(0<=f)return f;L.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var h=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(0==c){var m=this.bitrateTestDelay;m&&(h=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,L.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*h)+" ms"),p=g=1)}return f=this._findBestLevel(o,s,d,i,t,c+h,p,g,n),Math.max(f,0)}}]),rt);var at,ot=Z();function st(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,st);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,at.call(this,e,P.a.MEDIA_ATTACHING,P.a.MEDIA_DETACHING,P.a.MANIFEST_PARSED,P.a.BUFFER_RESET,P.a.BUFFER_APPENDING,P.a.BUFFER_CODECS,P.a.BUFFER_EOS,P.a.BUFFER_FLUSHING,P.a.LEVEL_PTS_UPDATED,P.a.LEVEL_UPDATED));return t._msDuration=null,t._levelDuration=null,t._live=null,t._objectUrl=null,t.onsbue=t.onSBUpdateEnd.bind(t),t.onsbe=t.onSBUpdateError.bind(t),t.pendingTracks={},t.tracks={},t}var ut,lt=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(st,at=l),st.prototype.destroy=function(){l.prototype.destroy.call(this)},st.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var r=this.sourceBuffer.audio;if(.1<Math.abs(r.timestampOffset-e.start)){var i=r.updating;try{r.abort()}catch(e){i=!0,L.b.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(L.b.warn("change mpeg audio timestamp offset from "+r.timestampOffset+" to "+e.start),r.timestampOffset=e.start)}}},st.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,r=0;e.altAudio&&(t||n)&&(r=(t?1:0)+(n?1:0),L.b.log(r+" sourceBuffer(s) expected")),this.sourceBufferNb=r},st.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new ot;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n),this._objectUrl=t.src}},st.prototype.onMediaDetaching=function(){L.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){L.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):L.b.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(P.a.MEDIA_DETACHED)},st.prototype.onMediaSourceOpen=function(){L.b.log("media source opened"),this.hls.trigger(P.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},st.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},st.prototype.onMediaSourceClose=function(){L.b.log("media source closed")},st.prototype.onMediaSourceEnded=function(){L.b.log("media source ended")},st.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;L.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var n=this.parent,t=this.segments.reduce(function(e,t){return t.parent===n?e+1:e},0),r={},i=this.sourceBuffer;for(var a in i)r[a]=i[a].buffered;this.hls.trigger(P.a.BUFFER_APPENDED,{parent:n,pending:t,timeRanges:r}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},st.prototype.onSBUpdateError=function(e){L.b.error("sourceBuffer error:",e),this.hls.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_APPENDING_ERROR,fatal:!1})},st.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},st.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},st.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var r in e)if(!t[r]){var i=e[r],a=i.levelCodec||i.codec,o=i.container+";codecs="+a;L.b.log("creating sourceBuffer("+o+")");try{var s=t[r]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[r]={codec:a,container:i.container},i.buffer=s}catch(e){L.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(P.a.BUFFER_CREATED,{tracks:e})},st.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},st.prototype.onBufferAppendFail=function(e){L.b.error("sourceBuffer error:",e.event),this.hls.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:v.a.BUFFER_APPENDING_ERROR,fatal:!1})},st.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var r in t)n&&r!==n||t[r].ended||(t[r].ended=!0,L.b.log(r+" sourceBuffer now EOS"));this.checkEos()},st.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var n in e){var r=e[n];if(!r.ended)return;if(r.updating)return void(this._needsEos=!0)}L.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){L.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},st.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},st.prototype.onLevelUpdated=function(e){var t=e.details;0<t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediaElementDuration())},st.prototype.updateMediaElementDuration=function(){var e,t=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(L.b.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||e===1/0||isNaN(e))&&(L.b.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},st.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var r in n)t+=n[r].buffered.length}catch(e){L.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(P.a.BUFFER_FLUSHED)}},st.prototype.doAppending=function(){var t=this.hls,e=this.sourceBuffer,n=this.segments;if(Object.keys(e).length){if(this.media.error)return this.segments=[],void L.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var r=n.shift();try{var i=e[r.type];i?i.updating?n.unshift(r):(i.ended=!1,this.parent=r.parent,i.appendBuffer(r.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){L.b.error("error while trying to append buffer:"+e.message),n.unshift(r);var a={type:v.b.MEDIA_ERROR,parent:r.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,a.details=v.a.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(L.b.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],a.fatal=!0):a.fatal=!1):(this.segments=[],a.details=v.a.BUFFER_FULL_ERROR,a.fatal=!1),t.trigger(P.a.ERROR,a)}}}},st.prototype.flushBuffer=function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=this.sourceBuffer;if(Object.keys(l).length){if(L.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var d in l)if(!n||d===n){if((r=l[d]).ended=!1,r.updating)return L.b.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<r.buffered.length;i++)if(a=r.buffered.start(i),o=r.buffered.end(i),u=-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,t):(s=Math.max(a,e),Math.min(o,t)),.5<Math.min(u,o)-s)return this.flushBufferCounter++,L.b.log("flush "+d+" ["+s+","+u+"], of ["+a+","+o+"], pos:"+this.media.currentTime),r.remove(s,u),!1}catch(e){L.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else L.b.warn("abort flushing too many retries");L.b.log("buffer flushed")}return!0},st),dt=function(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),e};function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ft),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,ut.call(this,e,P.a.FPS_DROP_LEVEL_CAPPING,P.a.MEDIA_ATTACHING,P.a.MANIFEST_PARSED))}var ht,pt=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(ft,ut=l),ft.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},ft.prototype.onFpsDropLevelCapping=function(e){ft.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},ft.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},ft.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},ft.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},ft.prototype.getMaxLevel=function(n){var r=this;if(!this.levels)return-1;var e=this.levels.filter(function(e,t){return ft.isLevelAllowed(t,r.restrictedLevels)&&t<=n});return ft.getMaxLevelByMediaSize(e,this.mediaWidth,this.mediaHeight)},ft.isLevelAllowed=function(e,t){return-1===(1<arguments.length&&void 0!==t?t:[]).indexOf(e)},ft.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var r,i,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(r=s,!(i=e[o+1])||r.width!==i.width||r.height!==i.height)){a=o;break}}return a},dt(ft,[{key:"mediaWidth",get:function(){var e=void 0,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=ft.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=ft.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),ft);function gt(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,gt),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,ht.call(this,e,P.a.MEDIA_ATTACHING))}var mt=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(gt,ht=l),gt.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},gt.prototype.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},gt.prototype.checkFPS=function(e,t,n){var r=performance.now();if(t){if(this.lastTime){var i=r-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/i,u=this.hls;if(u.trigger(P.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),0<s&&a>u.config.fpsDroppedMonitoringThreshold*o){var l=u.currentLevel;L.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+l),0<l&&(-1===u.autoLevelCapping||u.autoLevelCapping>=l)&&(l-=1,u.trigger(P.a.FPS_DROP_LEVEL_CAPPING,{level:l,droppedLevel:u.currentLevel}),u.autoLevelCapping=l,u.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},gt.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},gt);function yt(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,yt),e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var vt,_t=(yt.prototype.destroy=function(){this.abort(),this.loader=null},yt.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},yt.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},yt.prototype.loadInternal=function(){var t=void 0,n=this.context;t=this.loader=new XMLHttpRequest;var e=this.stats;e.tfirst=0,e.loaded=0;var r=this.xhrSetup;try{if(r)try{r(t,n.url)}catch(e){t.open("GET",n.url,!0),r(t,n.url)}t.readyState||t.open("GET",n.url,!0)}catch(e){return void this.callbacks.onError({code:t.status,text:e.message},n,t)}n.rangeEnd&&t.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=n.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),t.send()},yt.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,r=this.stats,i=this.context,a=this.config;if(!r.aborted&&2<=n)if(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n){var o=t.status;if(200<=o&&o<300){r.tload=Math.max(r.tfirst,performance.now());var s=void 0,u=void 0;u="arraybuffer"===i.responseType?(s=t.response).byteLength:(s=t.responseText).length,r.loaded=r.total=u;var l={url:t.responseURL,data:s};this.callbacks.onSuccess(l,r,i,t)}else r.retry>=a.maxRetry||400<=o&&o<499?(L.b.error(o+" while loading "+i.url),this.callbacks.onError({code:o,text:t.statusText},i,t)):(L.b.warn(o+" while loading "+i.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},yt.prototype.loadtimeout=function(){L.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},yt.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var r=this.callbacks.onProgress;r&&r(n,this.context,null,t)},yt),bt=function(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),e};function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Et(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Et);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,vt.call(this,e,P.a.MANIFEST_LOADING,P.a.MANIFEST_PARSED,P.a.AUDIO_TRACK_LOADED,P.a.ERROR));return t.ticks=0,t.ontick=t.tick.bind(t),t}var St=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Et,vt=l),Et.prototype.destroy=function(){this.cleanTimer(),l.prototype.destroy.call(this)},Et.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},Et.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},Et.prototype.doTick=function(){this.updateTrack(this.trackId)},Et.prototype.onError=function(e){e.fatal&&e.type===v.b.NETWORK_ERROR&&this.cleanTimer()},Et.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},Et.prototype.onManifestParsed=function(e){var t=this,n=e.audioTracks||[],r=!1;this.tracks=n,this.hls.trigger(P.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var i=0;n.forEach(function(e){if(e.default&&!r)return t.audioTrack=i,void(r=!0);i++}),!1===r&&n.length&&(L.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},Et.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(L.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},Et.prototype.setAudioTrackInternal=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,L.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,r=t.type,i=t.url,a={id:e,type:r,url:i};n.trigger(P.a.AUDIO_TRACK_SWITCHING,a);var o=t.details;!i||void 0!==o&&!0!==o.live||(L.b.log("(re)loading playlist for audioTrack "+e),n.trigger(P.a.AUDIO_TRACK_LOADING,{url:i,id:e}))}},Et.prototype.updateTrack=function(e){if(0<=e&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,L.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,r=t.details;!n||void 0!==r&&!0!==r.live||(L.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(P.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},bt(Et,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.trackId===e&&void 0!==this.tracks[e].details||this.setAudioTrackInternal(e)}}]),Et),wt=function(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),e};function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ct,Rt="STOPPED",It="STARTING",Mt="IDLE",Ot="PAUSED",Dt="KEY_LOADING",kt="FRAG_LOADING",Pt="FRAG_LOADING_WAITING_RETRY",Lt="WAITING_TRACK",xt="PARSING",Nt="PARSED",Ft="BUFFER_FLUSHING",Bt="ENDED",Ut="ERROR",jt="WAITING_INIT_PTS";function Gt(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Gt);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Ct.call(this,e,P.a.MEDIA_ATTACHED,P.a.MEDIA_DETACHING,P.a.AUDIO_TRACKS_UPDATED,P.a.AUDIO_TRACK_SWITCHING,P.a.AUDIO_TRACK_LOADED,P.a.KEY_LOADED,P.a.FRAG_LOADED,P.a.FRAG_PARSING_INIT_SEGMENT,P.a.FRAG_PARSING_DATA,P.a.FRAG_PARSED,P.a.ERROR,P.a.BUFFER_RESET,P.a.BUFFER_CREATED,P.a.BUFFER_APPENDED,P.a.BUFFER_FLUSHED,P.a.INIT_PTS_FOUND));return n.fragmentTracker=t,n.config=e.config,n.audioCodecSwap=!1,n._state=Rt,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}function Ht(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var qt=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Gt,Ct=Ee),Gt.prototype.onHandlerDestroying=function(){this.stopLoad()},Gt.prototype.onHandlerDestroyed=function(){this.state=Rt,this.fragmentTracker=null},Gt.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,r=e.initPTS;"main"===t&&(this.initPTS[n]=r,this.videoTrackCC=n,L.b.log("InitPTS for cc: "+n+" found from video track: "+r),this.state===jt&&this.tick())},Gt.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),(this.fragLoadError=0)<t&&-1===e?(L.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Mt):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=It),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=Rt},Gt.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Rt},Gt.prototype.doTick=function(){var e=void 0,t=void 0,n=void 0,r=this.hls,i=r.config;switch(this.state){case Ut:case Ot:case Ft:break;case It:this.state=Lt,this.loadedmetadata=!1;break;case Mt:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!i.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,u=W.bufferInfo(o,e,i.maxBufferHole),l=W.bufferInfo(s,e,i.maxBufferHole),d=u.len,c=u.end,f=this.fragPrevious,h=Math.min(i.maxBufferLength,i.maxMaxBufferLength),p=Math.max(h,l.len),g=this.audioSwitch,m=this.trackId;if((d<p||g)&&m<a.length){if(void 0===(n=a[m].details)){this.state=Lt;break}if(!g&&!n.live&&f&&f.sn===n.endSN&&!u.nextStart&&(!this.media.seeking||this.media.duration-c<f.duration/2)){this.hls.trigger(P.a.BUFFER_EOS,{type:"audio"}),this.state=Bt;break}var y=n.fragments,v=y.length,_=y[0].start,b=y[v-1].start+y[v-1].duration,T=void 0;if(g)if(n.live&&!n.PTSKnown)L.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),c=0;else if(c=e,n.PTSKnown&&e<_){if(!(u.end>_||u.nextStart))return;L.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=_+.05}if(n.initSegment&&!n.initSegment.data)T=n.initSegment;else if(c<=_){if(T=y[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=function(e,t){return Y.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(y,this.videoTrackCC)),n.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var E=u.nextStart?u.nextStart:_;return L.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var S=void 0,w=i.maxFragLookUpTolerance,A=f?y[f.sn-y[0].sn+1]:void 0,C=function(e){var t=Math.min(w,e.duration);return e.start+e.duration-t<=c?1:e.start-t>c&&e.start?-1:0};(S=c<b?(b-w<c&&(w=0),A&&!C(A)?A:Y.search(y,C)):y[v-1])&&(_=(T=S).start,f&&T.level===f.level&&T.sn===f.sn&&(T.sn<n.endSN?(T=y[T.sn+1-n.startSN],L.b.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.decryptdata&&null!=T.decryptdata.uri&&null==T.decryptdata.key?(L.b.log("Loading key for "+T.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+m),this.state=Dt,r.trigger(P.a.KEY_LOADING,{frag:T})):(L.b.log("Loading "+T.sn+", cc: "+T.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+m+", currentTime:"+e+",bufferEnd:"+c.toFixed(3)),this.fragmentTracker.getState(T)===ie&&(this.fragCurrent=T,this.startFragRequested=!0,isNaN(T.sn)||(this.nextLoadPosition=T.start+T.duration),r.trigger(P.a.FRAG_LOADING,{frag:T}),this.state=kt)))}break;case Lt:(t=this.tracks[this.trackId])&&t.details&&(this.state=Mt);break;case Pt:var R=performance.now(),I=this.retryDate,M=(o=this.media)&&o.seeking;(!I||I<=R||M)&&(L.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Mt);break;case jt:var O=this.videoTrackCC;if(void 0===this.initPTS[O])break;var D=this.waitingFragment;if(D){var k=D.frag.cc;O!==k?(t=this.tracks[this.trackId]).details&&t.details.live&&(L.b.warn("Waiting fragment CC ("+k+") does not match video track CC ("+O+")"),this.waitingFragment=null,this.state=Mt):(this.state=kt,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Mt}},Gt.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},Gt.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(L.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},Gt.prototype.onMediaSeeking=function(){this.state===Bt&&(this.state=Mt),this.media&&(this.lastCurrentTime=this.media.currentTime),this.tick()},Gt.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},Gt.prototype.onAudioTracksUpdated=function(e){L.b.log("audio tracks updated"),this.tracks=e.audioTracks},Gt.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=Ot,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Mt),this.tick()},Gt.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,r=this.tracks[n],i=t.totalduration,a=0;if(L.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var o=r.details;o&&0<t.fragments.length?(fe(o,t),a=t.fragments[0].start,t.PTSKnown?L.b.log("live audio playlist sliding:"+a.toFixed(3)):L.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,L.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(r.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(L.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===Lt&&(this.state=Mt),this.tick()},Gt.prototype.onKeyLoaded=function(){this.state===Dt&&(this.state=Mt,this.tick())},Gt.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===kt&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var r=this.tracks[this.trackId],i=r.details,a=i.totalduration,o=t.level,s=t.sn,u=t.cc,l=this.config.defaultAudioCodec||r.audioCodec||"mp4a.40.2",d=this.stats=e.stats;if("initSegment"===s)this.state=Mt,d.tparsed=d.tbuffered=performance.now(),i.initSegment.data=e.payload,this.hls.trigger(P.a.FRAG_BUFFERED,{stats:d,frag:t,id:"audio"}),this.tick();else{this.state=xt,this.appended=!1,this.demuxer||(this.demuxer=new ne(this.hls,"audio"));var c=this.initPTS[u],f=i.initSegment?i.initSegment.data:[];i.initSegment||void 0!==c?(this.pendingBuffering=!0,L.b.log("Demuxing "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.demuxer.push(e.payload,f,l,null,t,a,!1,c)):(L.b.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+s+" of ["+i.startSN+" ,"+i.endSN+"],track "+o),this.waitingFragment=e,this.state=jt)}}this.fragLoadError=0},Gt.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===xt){var r=e.tracks,i=void 0;if(r.video&&delete r.video,i=r.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(P.a.BUFFER_CODECS,r),L.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var a=i.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(P.a.BUFFER_APPENDING,o))}this.tick()}}},Gt.prototype.onFragParsingData=function(t){var n=this,e=this.fragCurrent,r=t.frag;if(e&&"audio"===t.id&&"audio"===t.type&&r.sn===e.sn&&r.level===e.level&&this.state===xt){var i=this.trackId,a=this.tracks[i],o=this.hls;isNaN(t.endPTS)&&(t.endPTS=t.startPTS+e.duration,t.endDTS=t.startDTS+e.duration),e.addElementaryStream(C.ElementaryStreamTypes.AUDIO),L.b.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),ce(a.details,e,t.startPTS,t.endPTS);var s=this.audioSwitch,u=this.media,l=!1;if(s&&u)if(u.readyState){var d=u.currentTime;L.b.log("switching audio track : currentTime:"+d),d>=t.startPTS&&(L.b.log("switching audio track : flushing all audio"),this.state=Ft,o.trigger(P.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),l=!0,this.audioSwitch=!1,o.trigger(P.a.AUDIO_TRACK_SWITCHED,{id:i}))}else this.audioSwitch=!1,o.trigger(P.a.AUDIO_TRACK_SWITCHED,{id:i});var c=this.pendingData;if(!c)return console.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(P.a.ERROR,{type:v.b.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&c.push({type:t.type,data:e,parent:"audio",content:"data"})}),!l&&c.length&&(c.forEach(function(e){n.state===xt&&(n.pendingBuffering=!0,n.hls.trigger(P.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},Gt.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===xt&&(this.stats.tparsed=performance.now(),this.state=Nt,this._checkAppendedParsed())},Gt.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},Gt.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},Gt.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==xt&&t!==Nt||(this.pendingBuffering=0<e.pending,this._checkAppendedParsed())}},Gt.prototype._checkAppendedParsed=function(){if(!(this.state!==Nt||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(P.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var r=this.mediaBuffer?this.mediaBuffer:this.media;L.b.log("audio buffered : "+me.toString(r.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(P.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Mt}this.tick()}},Gt.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case v.a.FRAG_LOAD_ERROR:case v.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var r=this.config;if(n<=r.fragLoadingMaxRetry){this.fragLoadError=n;var i=Math.min(Math.pow(2,n-1)*r.fragLoadingRetryDelay,r.fragLoadingMaxRetryTimeout);L.b.warn("audioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.state=Pt}else L.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ut}break;case v.a.AUDIO_TRACK_LOAD_ERROR:case v.a.AUDIO_TRACK_LOAD_TIMEOUT:case v.a.KEY_LOAD_ERROR:case v.a.KEY_LOAD_TIMEOUT:this.state!==Ut&&(this.state=e.fatal?Ut:Mt,L.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case v.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===xt||this.state===Nt)){var a=this.mediaBuffer,o=this.media.currentTime;if(a&&W.isBuffered(a,o)&&W.isBuffered(a,o+.5)){var s=this.config;s.maxMaxBufferLength>=s.maxBufferLength&&(s.maxMaxBufferLength/=2,L.b.warn("audio:reduce max buffer length to "+s.maxMaxBufferLength+"s")),this.state=Mt}else L.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Ft,this.hls.trigger(P.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},Gt.prototype.onBufferFlushed=function(){var t=this,e=this.pendingData;e&&e.length?(L.b.log("appending pending audio data on Buffer Flushed"),e.forEach(function(e){t.hls.trigger(P.a.BUFFER_APPENDING,e)}),this.appended=!0,this.pendingData=[],this.state=Nt):(this.state=Mt,this.fragPrevious=null,this.tick())},wt(Gt,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,L.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),Gt),Vt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var b={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function T(e){return"string"==typeof e&&(!!t[e.toLowerCase()]&&e.toLowerCase())}function E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(e,t,n){var r=this,i=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),a={};i?r=document.createElement("custom"):a.enumerable=!0,r.hasBeenReset=!1;var o="",s=!1,u=e,l=t,d=n,c=null,f="",h=!0,p="auto",g="start",m=50,y="middle",v=50,_="middle";if(Object.defineProperty(r,"id",E({},a,{get:function(){return o},set:function(e){o=""+e}})),Object.defineProperty(r,"pauseOnExit",E({},a,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(r,"startTime",E({},a,{get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");u=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"endTime",E({},a,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"text",E({},a,{get:function(){return d},set:function(e){d=""+e,this.hasBeenReset=!0}})),Object.defineProperty(r,"region",E({},a,{get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"vertical",E({},a,{get:function(){return f},set:function(e){var t=function(e){return"string"==typeof e&&(!!b[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");f=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"snapToLines",E({},a,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(r,"line",E({},a,{get:function(){return p},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"lineAlign",E({},a,{get:function(){return g},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"position",E({},a,{get:function(){return m},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"positionAlign",E({},a,{get:function(){return y},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(r,"size",E({},a,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(r,"align",E({},a,{get:function(){return _},set:function(e){var t=T(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");_=t,this.hasBeenReset=!0}})),r.displayState=void 0,i)return r}return e.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},e}();function Kt(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Ht,this.regionList=[]}function Yt(){this.values=Object.create(null)}function Wt(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}Yt.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var zt=new Vt(0,0,0),Xt="middle"===zt.align?"middle":"center";function Qt(t,e,o){var n=t;function r(){var e=function(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}(t);if(null===e)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(){t=t.replace(/^\s+/,"")}if(i(),e.startTime=r(),i(),"--\x3e"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);t=t.substr(3),i(),e.endTime=r(),i(),function(e,t){var a=new Yt;Wt(e,function(e,t){switch(e){case"region":for(var n=o.length-1;0<=n;n--)if(o[n].id===t){a.set(e,o[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var r=t.split(","),i=r[0];a.integer(e,i),a.percent(e,i)&&a.set("snapToLines",!1),a.alt(e,i,["auto"]),2===r.length&&a.alt("lineAlign",r[1],["start",Xt,"end"]);break;case"position":r=t.split(","),a.percent(e,r[0]),2===r.length&&a.alt("positionAlign",r[1],["start",Xt,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",Xt,"end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical","");var n=a.get("line","auto");"auto"===n&&-1===zt.line&&(n=-1),t.line=n,t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100),t.align=a.get("align",Xt);var r=a.get("position","auto");"auto"===r&&50===zt.position&&(r="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=r}(t,e)}function $t(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Kt.prototype={parse:function(e){var r=this;function t(){var e=r.buffer,t=0;for(e=$t(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var i=(n=t()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:n=t(),r.state){case"HEADER":/:/.test(n)?Wt(n,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new Vt(0,0,""),r.state="CUE",-1===n.indexOf("--\x3e")){r.cue.id=n;continue}case"CUE":try{Qt(n,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var Jt=Kt;function Zt(e,t,n,r){for(var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=window.VTTCue||window.TextTrackCue,d=0;d<r.rows.length;d++)if(o=!0,s=0,u="",!(i=r.rows[d]).isEmpty()){for(var c=0;c<i.chars.length;c++)i.chars[c].uchar.match(/\s/)&&o?s++:(u+=i.chars[c].uchar,o=!1);(i.cueStartTime=t)===n&&(n+=1e-4),a=new l(t,n,$t(u.trim())),16<=s?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=d+1:a.line=7<d?d-2:d+1,a.align="left",a.position=Math.max(0,Math.min(100,s/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e){var t=e;return rn.hasOwnProperty(e)&&(t=rn[e]),String.fromCharCode(t)}function nn(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}var rn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},an={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},on={17:2,18:4,21:6,22:8,23:10,19:13,20:15},sn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},un={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ln=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],dn={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},cn=(fn.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},fn.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},fn.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},fn.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},fn.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},fn.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},fn);function fn(e,t,n,r,i){en(this,fn),this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var hn=(pn.prototype.reset=function(){this.uchar=" ",this.penState.reset()},pn.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},pn.prototype.setPenState=function(e){this.penState.copy(e)},pn.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},pn.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},pn.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},pn);function pn(e,t,n,r,i,a){en(this,pn),this.uchar=e||" ",this.penState=new cn(t,n,r,i,a)}var gn=(mn.prototype.equals=function(e){for(var t=!0,n=0;n<100;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},mn.prototype.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},mn.prototype.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},mn.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(dn.log("ERROR","Negative cursor position "+this.pos),this.pos=0):100<this.pos&&(dn.log("ERROR","Too large cursor position "+this.pos),this.pos=100)},mn.prototype.moveCursor=function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},mn.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},mn.prototype.insertChar=function(e){144<=e&&this.backSpace();var t=tn(e);100<=this.pos?dn.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},mn.prototype.clearFromPos=function(e){var t=void 0;for(t=e;t<100;t++)this.chars[t].reset()},mn.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},mn.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},mn.prototype.getTextString=function(){for(var e=[],t=!0,n=0;n<100;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},mn.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},mn);function mn(){en(this,mn),this.chars=[];for(var e=0;e<100;e++)this.chars.push(new hn);this.pos=0,this.currPenState=new cn}var yn=(vn.prototype.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},vn.prototype.equals=function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},vn.prototype.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},vn.prototype.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},vn.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},vn.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},vn.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},vn.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},vn.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},vn.prototype.setCursor=function(e){dn.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},vn.prototype.setPAC=function(e){dn.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<15;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[r].cueStartTime;if(a&&a<dn.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(i.rows[r+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var u=e.indent,l=Math.max(u-1,0);s.setCursor(e.indent),e.color=s.chars[l].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},vn.prototype.setBkgData=function(e){dn.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},vn.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},vn.prototype.rollUp=function(){if(null!==this.nrRollUpRows){dn.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),dn.log("INFO","Rolling up")}else dn.log("DEBUG","roll_up but nrRollUpRows not set yet")},vn.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+": '"+a+"'"):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},vn.prototype.getTextAndFormat=function(){return this.rows},vn);function vn(){en(this,vn),this.rows=[];for(var e=0;e<15;e++)this.rows.push(new gn);this.currRow=14,this.nrRollUpRows=null,this.reset()}var _n=(bn.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},bn.prototype.getHandler=function(){return this.outputFilter},bn.prototype.setHandler=function(e){this.outputFilter=e},bn.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},bn.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},bn.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,dn.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},bn.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";dn.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(dn.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},bn.prototype.ccRCL=function(){dn.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},bn.prototype.ccBS=function(){dn.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},bn.prototype.ccAOF=function(){},bn.prototype.ccAON=function(){},bn.prototype.ccDER=function(){dn.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},bn.prototype.ccRU=function(e){dn.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},bn.prototype.ccFON=function(){dn.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},bn.prototype.ccRDC=function(){dn.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},bn.prototype.ccTR=function(){dn.log("INFO","TR"),this.setMode("MODE_TEXT")},bn.prototype.ccRTD=function(){dn.log("INFO","RTD"),this.setMode("MODE_TEXT")},bn.prototype.ccEDM=function(){dn.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},bn.prototype.ccCR=function(){dn.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},bn.prototype.ccENM=function(){dn.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},bn.prototype.ccEOC=function(){if(dn.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,dn.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},bn.prototype.ccTO=function(e){dn.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},bn.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}dn.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},bn.prototype.outputDataUpdate=function(e){var t=0<arguments.length&&void 0!==e&&e,n=dn.time;null!==n&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:n):this.cueStartTime=n,this.lastOutputScreen.copy(this.displayedMemory))},bn.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},bn);function bn(e,t){en(this,bn),this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new yn,this.nonDisplayedMemory=new yn,this.lastOutputScreen=new yn,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}function Tn(e,t,n){en(this,Tn),this.field=e||1,this.outputs=[t,n],this.channels=[new _n(1,t),new _n(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var En=(Tn.prototype.getHandler=function(e){return this.channels[e].getHandler()},Tn.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},Tn.prototype.addData=function(e,t){var n=void 0,r=void 0,i=void 0,a=!1;this.lastTime=e,dn.setTime(e);for(var o=0;o<t.length;o+=2)r=127&t[o],i=127&t[o+1],0!==r||0!==i?(dn.log("DATA","["+nn([t[o],t[o+1]])+"] -> ("+nn([r,i])+")"),(n=(n=(n=(n=this.parseCmd(r,i))||this.parseMidrow(r,i))||this.parsePAC(r,i))||this.parseBackgroundAttributes(r,i))||(a=this.parseChars(r,i))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(a):dn.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,dn.log("WARNING","Couldn't parse cleaned data "+nn([r,i])+" orig: "+nn([t[o],t[o+1]])))):this.dataCounters.padding+=2},Tn.prototype.parseCmd=function(e,t){var n=null;if(!((20===e||28===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,dn.log("DEBUG","Repeated command ("+nn([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var r=this.channels[n-1];return 20===e||28===e?32===t?r.ccRCL():33===t?r.ccBS():34===t?r.ccAOF():35===t?r.ccAON():36===t?r.ccDER():37===t?r.ccRU(2):38===t?r.ccRU(3):39===t?r.ccRU(4):40===t?r.ccFON():41===t?r.ccRDC():42===t?r.ccTR():43===t?r.ccRTD():44===t?r.ccEDM():45===t?r.ccCR():46===t?r.ccENM():47===t&&r.ccEOC():r.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},Tn.prototype.parseMidrow=function(e,t){var n=null;return(17===e||25===e)&&32<=t&&t<=47&&((n=17===e?1:2)!==this.currChNr?(dn.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[n-1].ccMIDROW(t),dn.log("DEBUG","MIDROW ("+nn([e,t])+")"),!0))},Tn.prototype.parsePAC=function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);n=e<=23?1:2,r=64<=t&&t<=95?1==n?an[e]:sn[e]:1==n?on[e]:un[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},Tn.prototype.interpretPAC=function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},Tn.prototype.parseChars=function(e,t){var n=null,r=null,i=null;if(17<=(i=25<=e?(n=2,e-8):(n=1,e))&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,dn.log("INFO","Special char '"+tn(a)+"' in channel "+n),r=[a]}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t]);if(r){var o=nn(r);dn.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return r},Tn.prototype.parseBackgroundAttributes=function(e,t){var n,r=void 0,i=void 0;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(r={},16===e||24===e?(i=Math.floor((t-32)/2),r.background=ln[i],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),n=e<24?1:2,this.channels[n-1].setBkgData(r),this.lastCmdA=null,!(this.lastCmdB=null))},Tn.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},Tn.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},Tn);function Sn(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sn),this.timelineController=e,this.track=t,this.startTime=null,this.endTime=null,this.screen=null}function wn(e,t,n){return e.substr(n||0,t.length)===t}function An(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}var Cn,Rn=(Sn.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues("textTrack"+this.track,this.startTime,this.endTime,this.screen),this.startTime=null)},Sn.prototype.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.track)},Sn),In={parse:function(e,n,r,i,t,a){var o=Object(Ke.b)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),s="00:00.000",u=0,l=0,d=0,c=[],f=void 0,h=!0,p=new Jt;p.oncue=function(e){var t=r[i],n=r.ccOffset;t&&t.new&&(void 0!==l?n=r.ccOffset=t.start:function(e,t,n){var r=e[t],i=e[r.prevCC];if(!i||!i.new&&r.new)return e.ccOffset=e.presentationOffset=r.start,r.new=!1;for(;i&&i.new;)e.ccOffset+=r.start-i.start,r.new=!1,i=e[(r=i).prevCC];e.presentationOffset=n}(r,i,d)),d&&(n=d+r.ccOffset-r.presentationOffset),e.startTime+=n-l,e.endTime+=n-l,e.id=An(e.startTime.toString())+An(e.endTime.toString())+An(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),0<e.endTime&&c.push(e)},p.onparsingerror=function(e){f=e},p.onflush=function(){f&&a?a(f):t(c)},o.forEach(function(t){if(h){if(wn(t,"X-TIMESTAMP-MAP=")){h=!1,t.substr(16).split(",").forEach(function(e){wn(e,"LOCAL:")?s=e.substr(6):wn(e,"MPEGTS:")&&(u=parseInt(e.substr(7)))});try{u-=n=n<0?n+8589934592:n,l=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),r=parseInt(e.substr(-9,2)),i=9<e.length?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)?-1:(t+=1e3*n,t+=6e4*r,t+=36e5*i)}(s)/1e3,d=u/9e4,-1===l&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+t))}catch(e){f=new Error("Malformed X-TIMESTAMP-MAP: "+t)}return}""===t&&(h=!1)}p.parse(t+"\n")}),p.flush()}};function Mn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Mn);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Cn.call(this,e,P.a.MEDIA_ATTACHING,P.a.MEDIA_DETACHING,P.a.FRAG_PARSING_USERDATA,P.a.FRAG_DECRYPTED,P.a.MANIFEST_LOADING,P.a.MANIFEST_LOADED,P.a.FRAG_LOADED,P.a.LEVEL_SWITCHING,P.a.INIT_PTS_FOUND));if(t.hls=e,t.config=e.config,t.enabled=!0,t.Cues=e.config.cueHandler,t.textTracks=[],t.tracks=[],t.unparsedVttFrags=[],t.initPTS=void 0,t.cueRanges=[],t.config.enableCEA708Captions){var n=new Rn(t,1),r=new Rn(t,2);t.cea608Parser=new En(0,n,r)}return t}var On,Dn=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Mn,Cn=l),Mn.prototype.addCues=function(e,t,n,r){for(var i,a,o,s,u=this.cueRanges,l=!1,d=u.length;d--;){var c=u[d],f=(i=c[0],a=c[1],o=t,s=n,Math.min(a,s)-Math.max(i,o));if(0<=f&&(c[0]=Math.min(c[0],t),c[1]=Math.max(c[1],n),l=!0,.5<f/(n-t)))return}l||u.push([t,n]),this.Cues.newCue(this[e],t,n,r)},Mn.prototype.onInitPtsFound=function(e){var t=this;void 0===this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},Mn.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var r=t.textTracks[n];if(!0===r["textTrack"+e])return r}return null},Mn.prototype.createCaptionsTrack=function(e){var t="textTrack"+e;if(!this[t]){var n=this.getExistingTrack(e);if(n)this[t]=n,We(this[t]),Ye(this[t],this.media);else{var r=this.createTextTrack("captions",this.config["captionsTextTrack"+e+"Label"],this.config["captionsTextTrack"+e+"LanguageCode"]);r&&(r[t]=!0,this[t]=r)}}},Mn.prototype.createTextTrack=function(e,t,n){var r=this.media;if(r)return r.addTextTrack(e,t,n)},Mn.prototype.destroy=function(){l.prototype.destroy.call(this)},Mn.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},Mn.prototype.onMediaDetaching=function(){We(this.textTrack1),We(this.textTrack2)},Mn.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0},this._cleanTracks()},Mn.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)We(t[n])}},Mn.prototype.onManifestLoaded=function(e){var i=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var a=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var n=void 0;if(t<a.length){var r=a[t];!function(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}(r,e)||(n=r)}n=n||i.createTextTrack("subtitles",e.name,e.lang),e.default?n.mode=i.hls.subtitleDisplay?"showing":"hidden":n.mode="disabled",i.textTracks.push(n)})}},Mn.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},Mn.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var r=t.sn;if(r!==this.lastSn+1){var i=this.cea608Parser;i&&i.reset()}this.lastSn=r}else if("subtitle"===t.type)if(n.byteLength){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);var a=t.decryptdata;null!=a&&null!=a.key&&"AES-128"===a.method||this._parseVTTs(t,n)}else this.hls.trigger(P.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},Mn.prototype._parseVTTs=function(t,e){var n=this.vttCCs;n[t.cc]||(n[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var i=this.textTracks,a=this.hls;In.parse(e,this.initPTS,n,t.cc,function(e){var r=i[t.trackId];"disabled"!==r.mode?(e.forEach(function(t){if(!r.cues.getCueById(t.id))try{r.addCue(t)}catch(e){var n=new window.TextTrackCue(t.startTime,t.endTime,t.text);n.id=t.id,r.addCue(n)}}),a.trigger(P.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})):a.trigger(P.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},function(e){L.b.log("Failed to parse VTT cue: "+e),a.trigger(P.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})},Mn.prototype.onFragDecrypted=function(e){var t=e.payload,n=e.frag;if("subtitle"===n.type){if(void 0===this.initPTS)return void this.unparsedVttFrags.push(e);this._parseVTTs(n,t)}},Mn.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},Mn.prototype.extractCea608Data=function(e){for(var t=31&e[0],n=2,r=void 0,i=void 0,a=void 0,o=[],s=0;s<t;s++)r=e[n++],i=127&e[n++],a=127&e[n++],0===i&&0===a||0!=(4&r)&&0==(3&r)&&(o.push(i),o.push(a));return o},Mn),kn=function(e,t,n){return t&&Pn(e.prototype,t),n&&Pn(e,n),e};function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}function xn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,xn);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,On.call(this,e,P.a.MEDIA_ATTACHED,P.a.MEDIA_DETACHING,P.a.MANIFEST_LOADING,P.a.MANIFEST_LOADED,P.a.SUBTITLE_TRACK_LOADED));return t.tracks=[],t.trackId=-1,t.media=void 0,t.subtitleDisplay=!1,t}var Nn=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(xn,On=l),xn.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Ln(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack=e}},xn.prototype.destroy=function(){l.prototype.destroy.call(this)},xn.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(void 0!==this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},xn.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},xn.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},xn.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[];this.tracks=n,this.trackId=-1,this.hls.trigger(P.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},xn.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;void 0!==n&&!0!==n.live||(L.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(P.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},xn.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(L.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},xn.prototype.setSubtitleTrackInternal=function(e){if(!(e<-1||e>=this.tracks.length)){this.timer&&(clearInterval(this.timer),this.timer=null);var t=Ln(this.media.textTracks);if(-1!==this.trackId&&(t[this.trackId].mode="disabled"),this.trackId=e,L.b.log("switching to subtitle track "+e),this.hls.trigger(P.a.SUBTITLE_TRACK_SWITCH,{id:e}),-1!==e){var n=this.tracks[e];e<t.length&&(t[e].mode=this.subtitleDisplay?"showing":"hidden");var r=n.details;void 0!==r&&!0!==r.live||(L.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(P.a.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))}}},kn(xn,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),xn),Fn=n(5);var Bn,Un="STOPPED",jn="IDLE",Gn="KEY_LOADING",Hn="FRAG_LOADING";function qn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,qn);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Bn.call(this,e,P.a.MEDIA_ATTACHED,P.a.ERROR,P.a.KEY_LOADED,P.a.FRAG_LOADED,P.a.SUBTITLE_TRACKS_UPDATED,P.a.SUBTITLE_TRACK_SWITCH,P.a.SUBTITLE_TRACK_LOADED,P.a.SUBTITLE_FRAG_PROCESSED));return t.config=e.config,t.vttFragSNsProcessed={},t.vttFragQueues=void 0,t.currentlyProcessing=null,t.state=Un,t.currentTrackId=-1,t.decrypter=new Fn.a(e.observer,e.config),t}var Vn=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(qn,Bn=Ee),qn.prototype.onHandlerDestroyed=function(){this.state=Un},qn.prototype.clearVttFragQueues=function(){var t=this;this.vttFragQueues={},this.tracks.forEach(function(e){t.vttFragQueues[e.id]=[]})},qn.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.fragCurrent=e,this.hls.trigger(P.a.FRAG_LOADING,{frag:e}),this.state=Hn}},qn.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.state=jn,this.nextFrag()},qn.prototype.onMediaAttached=function(){this.state=jn},qn.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},qn.prototype.doTick=function(){var t=this;switch(this.state){case jn:var e,n=this.tracks,r=this.currentTrackId,i=this.vttFragSNsProcessed[r],a=this.vttFragQueues[r],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!n)break;if(r<n.length&&(e=n[r].details),void 0===e)break;e.fragments.forEach(function(e){(function(e){return-1<i.indexOf(e.sn)})(e)||e.sn===o||function(t){return a.some(function(e){return e.sn===t.sn})}(e)||(e.decryptdata&&null!=e.decryptdata.uri&&null==e.decryptdata.key?(L.b.log("Loading key for "+e.sn),t.state=Gn,t.hls.trigger(P.a.KEY_LOADING,{frag:e})):(e.trackId=r,a.push(e),t.nextFrag()))})}},qn.prototype.onSubtitleTracksUpdated=function(e){var t=this;L.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},qn.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,-1===this.currentTrackId||void 0!==this.tracks[this.currentTrackId].details&&this.tick()},qn.prototype.onSubtitleTrackLoaded=function(){this.tick()},qn.prototype.onKeyLoaded=function(){this.state===Gn&&(this.state=jn,this.tick())},qn.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag.decryptdata,r=e.frag,i=this.hls;if(this.state===Hn&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&0<e.payload.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){var a=void 0;try{a=performance.now()}catch(e){a=Date.now()}this.decrypter.decrypt(e.payload,n.key.buffer,n.iv.buffer,function(e){var t=void 0;try{t=performance.now()}catch(e){t=Date.now()}i.trigger(P.a.FRAG_DECRYPTED,{frag:r,payload:e,stats:{tstart:a,tdecrypt:t}})})}},qn),Kn=function(e,t,n){return t&&Yn(e.prototype,t),n&&Yn(e,n),e};function Yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wn,zn="com.widevine.alpha",Xn="com.microsoft.playready";function Qn(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Qn);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,Wn.call(this,e,P.a.MEDIA_ATTACHED,P.a.MANIFEST_PARSED));return t._widevineLicenseUrl=e.config.widevineLicenseUrl,t._licenseXhrSetup=e.config.licenseXhrSetup,t._emeEnabled=e.config.emeEnabled,t._requestMediaKeySystemAccess=e.config.requestMediaKeySystemAccessFunc,t._mediaKeysList=[],t._media=null,t._hasSetMediaKeys=!1,t._isMediaEncrypted=!1,t._requestLicenseFailureCount=0,t}var $n=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Qn,Wn=l),Qn.prototype.getLicenseServerUrl=function(e){var t=void 0;switch(e){case zn:t=this._widevineLicenseUrl;break;default:t=null}return t||(L.b.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},Qn.prototype._attemptKeySystemAccess=function(t,e,n){var r=this,i=function(e,t,n){switch(e){case zn:return function(e,t){var n={videoCapabilities:[]};return t.forEach(function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[n]}(0,n);default:throw Error("Unknown key-system: "+e)}}(t,0,n);i?(L.b.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(t,i).then(function(e){r._onMediaKeySystemAccessObtained(t,e)}).catch(function(e){L.b.error('Failed to obtain key-system "'+t+'" access:',e)})):L.b.warn("Can not create config for key-system (maybe because platform is not supported):",t)},Qn.prototype._onMediaKeySystemAccessObtained=function(t,e){var n=this;L.b.log('Access for key-system "'+t+'" obtained');var r={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:e,mediaKeySystemDomain:t};this._mediaKeysList.push(r),e.createMediaKeys().then(function(e){r.mediaKeys=e,L.b.log('Media-keys created for key-system "'+t+'"'),n._onMediaKeysCreated()}).catch(function(e){L.b.error("Failed to create media-keys:",e)})},Qn.prototype._onMediaKeysCreated=function(){var t=this;this._mediaKeysList.forEach(function(e){e.mediaKeysSession||(e.mediaKeysSession=e.mediaKeys.createSession(),t._onNewMediaKeySession(e.mediaKeysSession))})},Qn.prototype._onNewMediaKeySession=function(t){var n=this;L.b.log("New key-system session "+t.sessionId),t.addEventListener("message",function(e){n._onKeySessionMessage(t,e.message)},!1)},Qn.prototype._onKeySessionMessage=function(t,e){L.b.log("Got EME message event, creating license request"),this._requestLicense(e,function(e){L.b.log("Received license data, updating key-session"),t.update(e)})},Qn.prototype._onMediaEncrypted=function(e,t){L.b.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},Qn.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return L.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_KEYS,fatal:!0});L.b.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},Qn.prototype._generateRequestWithPreferredKeySession=function(){var t=this,e=this._mediaKeysList[0];if(!e)return L.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(e.mediaKeysSessionInitialized)L.b.warn("Key-Session already initialized but requested again");else{var n=e.mediaKeysSession;n||(L.b.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_SESSION,fatal:!0}));var r=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;L.b.log('Generating key-session request for "'+r+'" init data type'),e.mediaKeysSessionInitialized=!0,n.generateRequest(r,i).then(function(){L.b.debug("Key-session generation succeeded")}).catch(function(e){L.b.error("Error generating key-session request:",e),t.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},Qn.prototype._createLicenseXhr=function(t,e,n){var r=new XMLHttpRequest,i=this._licenseXhrSetup;try{if(i)try{i(r,t)}catch(e){r.open("POST",t,!0),i(r,t)}r.readyState||r.open("POST",t,!0)}catch(e){return L.b.error("Error setting up key-system license XHR",e),void this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return r.responseType="arraybuffer",r.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,r,t,e,n),r},Qn.prototype._onLicenseRequestReadyStageChange=function(e,t,n,r){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,L.b.log("License request succeeded"),r(e.response);else{if(L.b.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return L.b.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(n,r)}this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},Qn.prototype._generateLicenseRequestChallenge=function(e,t){var n=void 0;return e.mediaKeySystemDomain===Xn?L.b.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===zn?n=t:L.b.error("Unsupported key-system:",e.mediaKeySystemDomain),n},Qn.prototype._requestLicense=function(e,t){L.b.log("Requesting content license for key-system");var n=this._mediaKeysList[0];if(!n)return L.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(P.a.ERROR,{type:v.b.KEY_SYSTEM_ERROR,details:v.a.KEY_SYSTEM_NO_ACCESS,fatal:!0});var r=this.getLicenseServerUrl(n.mediaKeySystemDomain),i=this._createLicenseXhr(r,e,t);L.b.log("Sending license request to URL: "+r),i.send(this._generateLicenseRequestChallenge(n,e))},Qn.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var n=e.media;(this._media=n).addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},Qn.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),n=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(zn,t,n)}},Kn(Qn,[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}]),Qn),Jn={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:_t,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:it,bufferController:lt,capLevelController:pt,fpsController:mt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null};Jn.subtitleStreamController=Vn,Jn.subtitleTrackController=Nn,Jn.timelineController=Dn,Jn.cueHandler=r,Jn.enableCEA708Captions=!0,Jn.enableWebVTT=!0,Jn.captionsTextTrack1Label="English",Jn.captionsTextTrack1LanguageCode="en",Jn.captionsTextTrack2Label="Spanish",Jn.captionsTextTrack2LanguageCode="es",Jn.audioStreamController=qt,Jn.audioTrackController=St,Jn.emeController=$n;var Zn=function(e,t,n){return t&&er(e.prototype,t),n&&er(e,n),e};function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(12);var tr=(nr.isSupported=function(){return function(){var e=Z(),t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!r}()},Zn(nr,null,[{key:"version",get:function(){return"0.9.1"}},{key:"Events",get:function(){return P.a}},{key:"ErrorTypes",get:function(){return v.b}},{key:"ErrorDetails",get:function(){return v.a}},{key:"DefaultConfig",get:function(){return nr.defaultConfig?nr.defaultConfig:Jn},set:function(e){nr.defaultConfig=e}}]),nr.prototype.destroy=function(){L.b.log("destroy"),this.trigger(P.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},nr.prototype.attachMedia=function(e){L.b.log("attachMedia"),this.media=e,this.trigger(P.a.MEDIA_ATTACHING,{media:e})},nr.prototype.detachMedia=function(){L.b.log("detachMedia"),this.trigger(P.a.MEDIA_DETACHING),this.media=null},nr.prototype.loadSource=function(e){e=a.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),L.b.log("loadSource:"+e),this.url=e,this.trigger(P.a.MANIFEST_LOADING,{url:e})},nr.prototype.startLoad=function(e){var t=0<arguments.length&&void 0!==e?e:-1;L.b.log("startLoad("+t+")"),this.networkControllers.forEach(function(e){e.startLoad(t)})},nr.prototype.stopLoad=function(){L.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},nr.prototype.swapAudioCodec=function(){L.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},nr.prototype.recoverMediaError=function(){L.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Zn(nr,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){L.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){L.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){L.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){L.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){L.b.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){L.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,n=e?e.length:0,r=0;r<n;r++)if(t<(e[r].realBitrate?Math.max(e[r].realBitrate,e[r].bitrate):e[r].bitrate))return r;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),nr);function nr(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,nr);var n=nr.DefaultConfig;if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in n)r in e||(e[r]=n[r]);if(void 0!==e.liveMaxLatencyDurationCount&&e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(e.liveMaxLatencyDuration<=e.liveSyncDuration||void 0===e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(L.a)(e.debug),this.config=e,this._autoLevelCapping=-1;var i=this.observer=new Q.a;i.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))},this.on=i.on.bind(i),this.off=i.off.bind(i),this.trigger=i.trigger.bind(i);var a=this.abrController=new e.abrController(this),o=new e.bufferController(this),s=new e.capLevelController(this),u=new e.fpsController(this),l=new j(this),d=new q(this),c=new K(this),f=new Xe(this),h=this.levelController=new Ve(this),p=new ue(this),g=[h,this.streamController=new Ue(this,p)],m=e.audioStreamController;m&&g.push(new m(this,p)),this.networkControllers=g;var y=[l,d,c,a,o,s,u,f,p];if(m=e.audioTrackController){var v=new m(this);this.audioTrackController=v,y.push(v)}if(m=e.subtitleTrackController){var _=new m(this);this.subtitleTrackController=_,y.push(_)}if(m=e.emeController){var b=new m(this);this.emeController=b,y.push(b)}[e.subtitleStreamController,e.timelineController].forEach(function(e){e&&y.push(new e(t))}),this.coreComponents=y}t.default=tr},function(e,t,l){function u(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=n,i.c=r,i.i=function(e){return e},i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var e=i(i.s=ENTRY_MODULE);return e.default||e}var d="[\\.|\\-|\\+|\\w|/|@]+",c="\\((/\\*.*?\\*/)?s?.*?("+d+").*?\\)";function f(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function h(e,t,n){var r={};r[n]=[];var i=t.toString(),a=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!a)return r;for(var o,s=a[1],u=new RegExp("(\\\\n|\\W)"+f(s)+c,"g");o=u.exec(i);)"dll-reference"!==o[3]&&r[n].push(o[3]);for(u=new RegExp("\\("+f(s)+'\\("(dll-reference\\s('+d+'))"\\)\\)'+c,"g");o=u.exec(i);)e[o[2]]||(r[n].push(o[1]),e[o[2]]=l(o[1]).m),r[o[2]]=r[o[2]]||[],r[o[2]].push(o[4]);return r}function p(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}e.exports=function(e,t){t=t||{};var n={main:l.m},r=t.all?{main:Object.keys(n)}:function(e,t){for(var n={main:[t]},r={main:[]},i={main:{}};p(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s].pop();if(i[s]=i[s]||{},!i[s][u]&&e[s][u]){i[s][u]=!0,r[s]=r[s]||[],r[s].push(u);for(var l=h(e,e[s][u],s),d=Object.keys(l),c=0;c<d.length;c++)n[d[c]]=n[d[c]]||[],n[d[c]]=n[d[c]].concat(l[d[c]])}}return r}(n,e),i="";Object.keys(r).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;r[t][e];)e++;r[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",i=i+"var "+t+" = ("+u.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),i=i+"("+u.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+r.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"})(self);";var a=new window.Blob([i],{type:"text/javascript"});if(t.bare)return a;var o=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(a),s=new window.Worker(o);return s.objectURL=o,s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),s=n(1),u=n(0),r=n(6),l=n.n(r);t.default=function(i){var a=new l.a;a.trigger=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.removeListener.apply(a,[e].concat(n))};function r(e,t){i.postMessage({event:e,data:t})}i.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"init":var n=JSON.parse(t.config);i.demuxer=new o.a(a,t.typeSupported,n,t.vendor);try{Object(u.a)(!0===n.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":i.demuxer.push(t.data,t.decryptdata,t.initSegment,t.audioCodec,t.videoCodec,t.timeOffset,t.discontinuity,t.trackSwitch,t.contiguous,t.duration,t.accurateTimeOffset,t.defaultInitPTS)}}),a.on(s.a.FRAG_DECRYPTED,r),a.on(s.a.FRAG_PARSING_INIT_SEGMENT,r),a.on(s.a.FRAG_PARSED,r),a.on(s.a.ERROR,r),a.on(s.a.FRAG_PARSING_METADATA,r),a.on(s.a.FRAG_PARSING_USERDATA,r),a.on(s.a.INIT_PTS_FOUND,r),a.on(s.a.FRAG_PARSING_DATA,function(e,t){var n=[],r={event:e,data:t};t.data1&&(r.data1=t.data1.buffer,n.push(t.data1.buffer),delete t.data1),t.data2&&(r.data2=t.data2.buffer,n.push(t.data2.buffer),delete t.data2),i.postMessage(r,n)})}},function(e,t){String.prototype.endsWith||function(){"use strict";function e(e){if(null==this)throw TypeError();var t=String(this);if(e&&"[object RegExp]"==l.call(e))throw TypeError();var n=t.length,r=String(e),i=r.length,a=n;if(1<arguments.length){var o=arguments[1];void 0!==o&&(a=o?Number(o):0)!=a&&(a=0)}var s=Math.min(Math.max(a,0),n)-i;if(s<0)return!1;for(var u=-1;++u<i;)if(t.charCodeAt(s+u)!=r.charCodeAt(u))return!1;return!0}var t=function(){try{var e={},t=Object.defineProperty,n=t(e,e,e)&&t}catch(e){}return n}(),l={}.toString;t?t(String.prototype,"endsWith",{value:e,configurable:!0,writable:!0}):String.prototype.endsWith=e}()}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=9)).default;function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i}),function(d,c){if(d&&c){var e={canHandleSource:function(e){return e.skipContribHlsJs?"":/^application\/x-mpegURL$/i.test(e.type)?"probably":/\.m3u8/i.test(e.src)?"maybe":""},handleSource:function(e,t){return new n(e,t)},canPlayType:function(e){return/^application\/x-mpegURL$/i.test(e)?"probably":""}};if(c.isSupported())if(d=d&&d.default||d){var t=d.getTech&&d.getTech("Html5");(t=t||d.getComponent&&d.getComponent("Html5"))&&t.registerSourceHandler(e,0)}else console.warn("videojs-contrib-hls.js: Couldn't find find window.videojs nor require('video.js')")}else console.error("Missing videojs/Hls libraries");function n(e,r){var t=r.options_,n=r.el(),i=null,a=new c(t.hlsjsConfig);if(a.startLevel=1,r.options_&&r.options_.playerId){var o=d(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return a}})}function s(){var t=null,n=null;return function(){var e=Date.now();!t||2e3<e-t?(t=e,a.recoverMediaError()):!n||2e3<e-n?(n=e,a.swapAudioCodec(),a.recoverMediaError()):console.error("Error loading media: File could not be played")}}var u=s(),l=s();n.addEventListener("error",function(e){var t=e.currentTarget.error;t.code===t.MEDIA_ERR_DECODE?l():console.error("Error loading media: File could not be played")}),this.dispose=function(){a.destroy()},this.duration=function(){return i||n.duration||0},a.on(c.Events.LEVEL_LOADED,function(e,t){i=t.details.live?1/0:t.details.totalduration}),a.on(c.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case c.ErrorTypes.NETWORK_ERROR:a.startLoad();break;case c.ErrorTypes.MEDIA_ERROR:u();break;default:console.error("Error loading media: File could not be played")}}),Object.keys(c.Events).forEach(function(e){var n=c.Events[e];a.on(n,function(e,t){r.trigger(n,t)})}),a.attachMedia(n),a.loadSource(e.src)}}(window.videojs,window.Hls),function a(o,s,u){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,a,o,s,u)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,n){"use strict";var o,u,r,i={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?r=(31&r)<<6:(r<240?r=(15&r)<<12:(r=(7&r)<<18,r|=(63&e[n++])<<12),r|=(63&e[n++])<<6),r|=63&e[n++]),t.push(String.fromCharCode(r))}return t.join("")}},l={};function d(e){for(var t=0,n=[],r=0|e.length/3;0<r--;){var i=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push(o.charAt(63&i))}if(2==e.length-t){i=(e[t]<<16)+(e[t+1]<<8);n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push(o.charAt(63&i>>6)),n.push("=")}else if(1==e.length-t){i=e[t]<<16;n.push(o.charAt(63&i>>18)),n.push(o.charAt(63&i>>12)),n.push("==")}return n.join("")}function c(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(u[e.charCodeAt(t)]<<18)+(u[e.charCodeAt(t+1)]<<12)+(u[e.charCodeAt(t+2)]<<6)+u[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n}o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(){for(var e=[],t=0;t<o.length;++t)e[o.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),r={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},l.decodeArray=function(e){var t=c(e);return new Uint8Array(t)},l.encodeASCII=function(e){var t=r.encode(e);return d(t)},l.decodeASCII=function(e){var t=c(e);return r.decode(t)},l.encode=function(e){var t=i.encode(e);return d(t)},l.decode=function(e){var t=c(e);return i.decode(t)},void 0!==n&&(n.decode=l.decode,n.decodeArray=l.decodeArray,n.encode=l.encode,n.encodeASCII=l.encodeASCII)},{}],2:[function(e,t,n){"use strict";!function(e){function s(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)}function u(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t}function o(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1}var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},c={25:2,26:4,29:6,30:8,31:10,27:13,28:15},f=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],h={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}};o.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};function t(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new o(t,n,r,i,a)}t.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};function r(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new t);this.pos=0,this.currPenState=new o}r.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(h.log("ERROR","Negative cursor position "+this.pos),this.pos=0):32<this.pos&&(h.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(1<e)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){144<=e&&this.backSpace();var t=s(e);32<=this.pos?h.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};function i(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new r);this.currRow=14,this.nrRollUpRows=null,this.reset()}i.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){h.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){h.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){h.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){h.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),h.log("INFO","Rolling up")}else h.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return 0<t.length&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};function p(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new i,this.nonDisplayedMemory=new i,this.lastOutputScreen=new i,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,h.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";h.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(h.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){h.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){h.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){h.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){h.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){h.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){h.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){h.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){h.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){h.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){h.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){h.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(h.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,h.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){h.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=46<=e,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}h.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=h.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};function g(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,h.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],16<=r&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,h.log("DEBUG","Repeated command ("+u([r,i])+") is dropped");else if(0!=r||0!=i){if(h.log("DATA","["+u([t[o],t[o+1]])+"] -> ("+u([r,i])+")"),!(n=(n=(n=(n=this.parseCmd(r,i))||this.parseMidrow(r,i))||this.parsePAC(r,i))||this.parseBackgroundAttributes(r,i)))if(a=this.parseChars(r,i))if(this.currChNr&&0<=this.currChNr)this.channels[this.currChNr-1].insertChars(a);else h.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,h.log("WARNING","Couldn't parse cleaned data "+u([r,i])+" orig: "+u([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return h.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),h.log("DEBUG","MIDROW ("+u([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,r=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,r=64<=t&&t<=95?1==n?a[e]:d[e]:1==n?l[e]:c[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=95<t?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var n=null,r=null,i=null;if(17<=(i=25<=e?(n=2,e-8):(n=1,e))&&i<=19){var a=t;a=17===i?t+80:18===i?t+112:t+144,h.log("INFO","Special char '"+s(a)+"' in channel "+n),r=[a],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(r=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(r){var o=u(r);h.log("DEBUG","Char codes =  "+o.join(","))}return r},parseBackgroundAttributes:function(e,t){var n,r,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=f[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=h,e.PenState=o,e.CaptionScreen=i,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[],o=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s};i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var s=i+5,u=-1;s<i+4+r-1;){u=0;for(var l=255;255===l;)u+=l=e.getUint8(s),s++;var d=0;for(l=255;255===l;)d+=l=e.getUint8(s),s++;o(u,d,e,s)&&a.push([s,d]),s+=d}i+=r+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,s&&(127&l)+(127&d)!=0&&(0==u?(r[0].push(l),r[0].push(d)):1==u&&(r[1].push(l),r[1].push(d)))}return r}}(void 0===n?(void 0).cea608parser={}:n)},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(S){S=S||{},function(){void 0===S.escapeMode&&(S.escapeMode=!0);void 0===S.attributePrefix&&(S.attributePrefix="_");S.arrayAccessForm=S.arrayAccessForm||"none",S.emptyNodeForm=S.emptyNodeForm||"text",void 0===S.enableToStringFunc&&(S.enableToStringFunc=!0);S.arrayAccessFormPaths=S.arrayAccessFormPaths||[],void 0===S.skipEmptyTextNodesForObj&&(S.skipEmptyTextNodesForObj=!0);void 0===S.stripWhitespaces&&(S.stripWhitespaces=!0);S.datetimeAccessFormPaths=S.datetimeAccessFormPaths||[],void 0===S.useDoubleQuotes&&(S.useDoubleQuotes=!1);S.xmlElementsFilter=S.xmlElementsFilter||[],S.jsonPropertiesFilter=S.jsonPropertiesFilter||[],void 0===S.keepCData&&(S.keepCData=!1);void 0===S.ignoreRoot&&(S.ignoreRoot=!1)}();var w={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function A(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function u(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function C(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function R(e,t,n){switch(S.arrayAccessForm){case"property":e[t]instanceof Array?e[t+"_asArray"]=e[t]:e[t+"_asArray"]=[e[t]]}!(e[t]instanceof Array)&&0<S.arrayAccessFormPaths.length&&C(S.arrayAccessFormPaths,e,t,n)&&(e[t]=[e[t]])}function I(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),1<r.length&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function M(e,t){if(e.nodeType==w.DOCUMENT_NODE){for(var n=new Object,r=e.childNodes,i=0;i<r.length;i++){if((o=r[i]).nodeType==w.ELEMENT_NODE)if(S.ignoreRoot)n=M(o);else(n={})[s=A(o)]=M(o)}return n}if(e.nodeType==w.ELEMENT_NODE){(n=new Object).__cnt=0;var a=[];for(r=e.childNodes,i=0;i<r.length;i++){var o,s=A(o=r[i]);if(o.nodeType!=w.COMMENT_NODE){var u=t+"."+s;if(_=n,b=o.nodeType,T=s,E=u,!(b==w.ELEMENT_NODE&&0<S.xmlElementsFilter.length)||C(S.xmlElementsFilter,_,T,E))if(n.__cnt++,null==n[s]){var l=M(o,u);if("#text"!=s||/[^\s]/.test(l))(d={})[s]=l,a.push(d);n[s]=l,R(n,s,u)}else{null!=n[s]&&(n[s]instanceof Array||(n[s]=[n[s]],R(n,s,u)));var d;l=M(o,u);if("#text"!=s||/[^\s]/.test(l))(d={})[s]=l,a.push(d);n[s][n[s].length]=l}}}n.__children=a;for(var c=A(e),f=0;f<e.attributes.length;f++){var h=e.attributes[f];n.__cnt++;for(var p=h.value,g=0,m=S.matchers.length;g<m;g++){var y=S.matchers[g];y.test(h,c)&&(p=y.converter(h.value))}n[S.attributePrefix+h.name]=p}var v=function(e){return e.prefix}(e);return null!=v&&""!=v&&(n.__cnt++,n.__prefix=v),null!=n["#text"]&&(n.__text=n["#text"],n.__text instanceof Array&&(n.__text=n.__text.join("\n")),S.stripWhitespaces&&(n.__text=n.__text.trim()),delete n["#text"],"property"==S.arrayAccessForm&&delete n["#text_asArray"],n.__text=function(e,t,n){if(0<S.datetimeAccessFormPaths.length){var r=n.split(".#")[0];return C(S.datetimeAccessFormPaths,e,t,r)?I(e):e}return e}(n.__text,s,t+"."+s)),null!=n["#cdata-section"]&&(n.__cdata=n["#cdata-section"],delete n["#cdata-section"],"property"==S.arrayAccessForm&&delete n["#cdata-section_asArray"]),0==n.__cnt&&"text"==S.emptyNodeForm?n="":1==n.__cnt&&null!=n.__text?n=n.__text:1!=n.__cnt||null==n.__cdata||S.keepCData?1<n.__cnt&&null!=n.__text&&S.skipEmptyTextNodesForObj&&(S.stripWhitespaces&&""==n.__text||""==n.__text.trim())&&delete n.__text:n=n.__cdata,delete n.__cnt,!S.enableToStringFunc||null==n.__text&&null==n.__cdata||(n.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),n}if(e.nodeType==w.TEXT_NODE||e.nodeType==w.CDATA_SECTION_NODE)return e.nodeValue;var _,b,T,E}function l(e,t,n,r){var i="<"+(null!=e&&null!=e.__prefix?e.__prefix+":":"")+t;if(null!=n)for(var a=0;a<n.length;a++){var o=n[a],s=e[o];S.escapeMode&&(s=u(s)),i+=" "+o.substr(S.attributePrefix.length)+"=",S.useDoubleQuotes?i+='"'+s+'"':i+="'"+s+"'"}return i+=r?"/>":">"}function d(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function c(e,t){return!!("property"==S.arrayAccessForm&&function(e,t){return-1!==e.indexOf(t,e.length-t.length)}(t.toString(),"_asArray")||0==t.toString().indexOf(S.attributePrefix)||0==t.toString().indexOf("__")||e[t]instanceof Function)}function f(e){var t=0;if(e instanceof Object)for(var n in e)c(e,n)||t++;return t}function h(e){var t=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf("__")&&0==n.toString().indexOf(S.attributePrefix)&&t.push(n);return t}function p(e){var t="";return e instanceof Object?t+=function(e){var t="";return null!=e.__cdata&&(t+="<![CDATA["+e.__cdata+"]]>"),null!=e.__text&&(S.escapeMode?t+=u(e.__text):t+=e.__text),t}(e):null!=e&&(S.escapeMode?t+=u(e):t+=e),t}function g(e,t){return""===e?t:e+"."+t}function m(e,t,n,r){var i="";if(0==e.length)i+=l(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=l(e[a],t,h(e[a]),!1),i+=y(e[a],g(r,t)),i+=d(e[a],t);return i}function y(e,t){var n,r,i,a="";if(0<f(e))for(var o in e)if(!c(e,o)&&(""==t||(n=e,i=g(t,r=o),0==S.jsonPropertiesFilter.length||""==i||C(S.jsonPropertiesFilter,n,r,i)))){var s=e[o],u=h(s);if(null==s||null==s)a+=l(s,o,u,!0);else if(s instanceof Object)if(s instanceof Array)a+=m(s,o,u,t);else if(s instanceof Date)a+=l(s,o,u,!1),a+=s.toISOString(),a+=d(s,o);else{0<f(s)||null!=s.__text||null!=s.__cdata?(a+=l(s,o,u,!1),a+=y(s,g(t,o)),a+=d(s,o)):a+=l(s,o,u,!0)}else a+=l(s,o,u,!1),a+=p(s),a+=d(s,o)}return a+=p(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{0<(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?I(e):e},this.xml2json=function(e){return M(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return y(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}},t.exports=n.default},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e(5),a=r(e(117)),o=r(e(151)),s=r(e(95)),u=r(e(46));dashjs.Protection=o.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=s.default,dashjs.Debug=u.default,n.default=dashjs,n.MediaPlayer=i.MediaPlayer,n.Protection=o.default,n.MetricsReporting=a.default,n.MediaPlayerFactory=s.default,n.Debug=u.default},{117:117,151:151,46:46,5:5,95:95}],5:[function(u,e,l){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(l,"__esModule",{value:!0});var n=t(u(93)),r=t(u(48)),i=t(u(46)),a=u(49),o="undefined"!=typeof window&&window||e,s=o.dashjs;(s=s||(o.dashjs={})).MediaPlayer=n.default,s.FactoryMaker=r.default,s.Debug=i.default,s.Version=(0,a.getVersionString)(),l.default=s,l.MediaPlayer=n.default,l.FactoryMaker=r.default,l.Debug=i.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{46:46,48:48,49:49,93:93}],6:[function(e,t,n){var i={parseBuffer:function(e){return new a(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(o.prototype._boxProcessors[e]=t)},createFile:function(){return new a},createBox:function(e,t,n){var r=o.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var r=i.createBox(e,t,n);return r.version=0,r.flags=0,r},Utils:{}};i.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?a=(31&a)<<6:(a<240?a=(15&a)<<12:(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12),a|=(63&e.getUint8(i++))<<6),a|=63&e.getUint8(i++)),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},i.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):(r<2048?t.push(192|r>>6):(r<65536?t.push(224|r>>12):(t.push(240|r>>18),t.push(128|63&r>>12)),t.push(128|63&r>>6)),t.push(128|63&r))}return t},i.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},void 0!==n&&(n.parseBuffer=i.parseBuffer,n.addBoxProcessor=i.addBoxProcessor,n.createFile=i.createFile,n.createBox=i.createBox,n.createFullBox=i.createFullBox,n.Utils=i.Utils),i.Cursor=function(e){this.offset=void 0===e?0:e};var a=function(e){this._cursor=new i.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};a.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},a.prototype.fetchAll=function(e,t){var n=[];return a._sweep.call(this,e,n,t),n},a.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=o.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},a._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;a._sweep.call(this.boxes[r],e,t,n)}},a.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,e=this._cursor.offset=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},a.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)};var o=function(){this._cursor=new i.Cursor};o.parse=function(e){var t=new o;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},o.create=function(e){var t=new o;return t.type=e,t.boxes=[],t},o.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],o.prototype._boxProcessors={},o.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},o.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},o.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},o.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},o.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},o.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},o.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(o.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},o.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},o.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(4+n);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},o.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(2+i));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(4+i),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},o.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},o.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},o.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},o.prototype._readData=function(e){var t=0<e?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(0<t){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},o.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return 0<e&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?i.Utils.dataViewToString(t):t},o.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},o.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},o.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(o.parse(this))},o.prototype.append=function(e,t){i.Utils.appendBox(this,e,t)},o.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},o.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},o.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(4+n,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(2+i,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(4+i,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},o.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},o.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},o.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},o.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},o.prototype._writeUTF8String=function(e){var t=i.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),r=0;r<t.length;r++)n.setUint8(r,t[r]);else this.size+=t.length},o.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},o.prototype._boxProcessors.avc1=o.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},o.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)})},o.prototype._boxProcessors.emsg=function(){this._procFullBox(),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("message_data","data",-1)},o.prototype._boxProcessors.free=o.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},o.prototype._boxProcessors.ftyp=o.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},o.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},o.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},o.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},o.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},o.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},o.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},o.prototype._boxProcessors.mp4a=o.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},o.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},o.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},o.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},o.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},o.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},o.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)})},o.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},o.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)})})},o.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},o.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)})})},o.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},o.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},o.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},o.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},o.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},o.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},o.prototype._boxProcessors["url "]=o.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},o.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},o.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},o.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},o.prototype._boxProcessors.vtte=function(){}},{}],7:[function(e,t,n){"use strict";var h=Array.isArray,p=Object.keys,g=Object.prototype.hasOwnProperty;t.exports=function e(t,n){if(t===n)return!0;var r,i,a,o=h(t),s=h(n);if(o&&s){if((i=t.length)!=n.length)return!1;for(r=0;r<i;r++)if(!e(t[r],n[r]))return!1;return!0}if(o!=s)return!1;var u=t instanceof Date,l=n instanceof Date;if(u!=l)return!1;if(u&&l)return t.getTime()==n.getTime();var d=t instanceof RegExp,c=n instanceof RegExp;if(d!=c)return!1;if(d&&c)return t.toString()==n.toString();if(t instanceof Object&&n instanceof Object){var f=p(t);if((i=f.length)!==p(n).length)return!1;for(r=0;r<i;r++)if(!g.call(n,f[r]))return!1;for(r=0;r<i;r++)if(!e(t[a=f[r]],n[a]))return!1;return!0}return!1}},{}],8:[function(e,t,n){!function(e){"use strict";var l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),a="a".charCodeAt(0),o="A".charCodeAt(0),s="-".charCodeAt(0),u="_".charCodeAt(0);function d(e){var t=e.charCodeAt(0);return t===n||t===s?62:t===r||t===u?63:t<i?-1:t<i+10?t-i+26+26:t<o+26?t-o:t<a+26?t-a+26:void 0}e.toByteArray=function(e){var t,n,r,i,a;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.length;i="="===e.charAt(o-2)?2:"="===e.charAt(o-1)?1:0,a=new l(3*e.length/4-i),n=0<i?e.length-4:e.length;var s=0;function u(e){a[s++]=e}for(t=0;t<n;t+=4,3)u((16711680&(r=d(e.charAt(t))<<18|d(e.charAt(t+1))<<12|d(e.charAt(t+2))<<6|d(e.charAt(t+3))))>>16),u((65280&r)>>8),u(255&r);return 2==i?u(255&(r=d(e.charAt(t))<<2|d(e.charAt(t+1))>>4)):1==i&&(u((r=d(e.charAt(t))<<10|d(e.charAt(t+1))<<4|d(e.charAt(t+2))>>2)>>8&255),u(255&r)),a},e.fromByteArray=function(e){var t,n,r,i,a=e.length%3,o="";function s(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,r=e.length-a;t<r;t+=3)n=(e[t]<<16)+(e[t+1]<<8)+e[t+2],o+=s((i=n)>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(a){case 1:o+=s((n=e[e.length-1])>>2),o+=s(n<<4&63),o+="==";break;case 2:o+=s((n=(e[e.length-2]<<8)+e[e.length-1])>>10),o+=s(n>>4&63),o+=s(n<<2&63),o+="="}return o}}(void 0===n?this.base64js={}:n)},{}],9:[function(e,t,n){},{}],10:[function(P,e,L){(function(e){"use strict";var r=P(8),a=P(14),o=P(11);L.Buffer=s,L.SlowBuffer=function e(t,n){if(!(this instanceof e))return new e(t,n);var r=new s(t,n);delete r.parent;return r},L.INSPECT_MAX_BYTES=50,s.poolSize=8192;var n={};function t(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof e?function(e,t){if(e=u(e,t<0?0:0|l(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}(this,e):"string"==typeof e?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|d(t,n);return(e=u(e,r)).write(t,n),e}(this,e,1<arguments.length?arguments[1]:"utf8"):function(e,t){if(s.isBuffer(t))return function(e,t){var n=0|l(t.length);return e=u(e,n),t.copy(e,0,0,n),e}(e,t);if(o(t))return function(e,t){var n=0|l(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return i(e,t);if(t instanceof ArrayBuffer)return function(e,t){e=s.TYPED_ARRAY_SUPPORT?(t.byteLength,s._augment(new Uint8Array(t))):i(e,new Uint8Array(t));return e}(e,t)}return t.length?function(e,t){var n=0|l(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}(e,t):function(e,t){var n,r=0;"Buffer"===t.type&&o(t.data)&&(n=t.data,r=0|l(n.length));e=u(e,r);for(var i=0;i<r;i+=1)e[i]=255&n[i];return e}(e,t)}(this,e)):1<arguments.length?new s(e,arguments[1]):new s(e)}function i(e,t){var n=0|l(t.length);e=u(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function u(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t))).__proto__=s.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=n),e}function l(e){if(e>=t())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t().toString(16)+" bytes");return 0|e}function d(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return D(e).length;default:if(r)return O(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?i<(r=Number(r))&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new Error("Invalid hex string");a/2<r&&(r=a/2);for(var o=0;o<r;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function y(e,t,n,r){return k(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function c(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function f(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],d=null,c=239<l?4:223<l?3:191<l?2:1;if(i+c<=n)switch(c){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[i+1]))&&127<(u=(31&l)<<6|63&a)&&(d=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&2047<(u=(15&l)<<12|(63&a)<<6|63&o)&&(u<55296||57343<u)&&(d=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&65535<(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)&&u<1114112&&(d=u)}null===d?(d=65533,c=1):65535<d&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=h)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=h));return n}(r)}(s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}())?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=void 0,s.prototype.parent=void 0),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a&&e[i]===t[i];)++i;return i!==a&&(n=e[i],r=t[i]),n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!o(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(void 0===t)for(n=t=0;n<e.length;n++)t+=e[n].length;var r=new s(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(r,i),i+=a.length}return r},s.byteLength=d,s.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?f(this,0,e):function(e,t,n){var r=!1;if(e=e||"utf8",(t|=0)<0&&(t=0),(n=void 0===n||n===1/0?this.length:0|n)>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return v(this,t,n);case"utf8":case"utf-8":return f(this,t,n);case"ascii":return p(this,t,n);case"binary":return g(this,t,n);case"base64":return c(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=L.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){if(2147483647<t?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var a=this.length-t;if((void 0===n||a<n)&&(n=a),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,u,l,d,c,f,h,p,g=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return h=t,p=n,k(O(e,(f=this).length-h),f,h,p);case"ascii":return y(this,e,t,n);case"binary":return y(this,e,t,n);case"base64":return l=this,d=t,c=n,k(D(e),l,d,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,u=n,k(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,(o=this).length-s),o,s,u);default:if(g)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var h=4096;function p(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function g(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function v(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",a=t;a<n;a++)i+=M(e[a]);return i}function _(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function b(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(i<t||t<a)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function E(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function S(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function w(e,t,n,r,i,a){if(i<t||t<a)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function A(e,t,n,r,i){return i||w(e,t,n,4,34028234663852886e22,-34028234663852886e22),a.write(e,t,n,r,23,4),n+4}function C(e,t,n,r,i){return i||w(e,t,n,8,17976931348623157e292,-17976931348623157e292),a.write(e,t,n,r,52,8),n+8}s.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)n=s._augment(this.subarray(e,t));else{var i=t-e;n=new s(i,void 0);for(var a=0;a<i;a++)n[a]=this[a+e]}return n.length&&(n.parent=this.parent||this),n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||b(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||b(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||b(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||b(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||b(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||b(e,t,this.length);for(var r=t,i=1,a=this[e+--r];0<r&&(i*=256);)a+=this[e+--r]*i;return(i*=128)<=a&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||b(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||b(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||b(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||b(e,4,this.length),a.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||b(e,4,this.length),a.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||b(e,8,this.length),a.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||b(e,8,this.length),a.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n),0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||T(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,a=1;for(this[t+i]=255&e;0<=--i&&(a*=256);)this[t+i]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):S(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):S(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var a=0,o=1,s=e<0?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=e<0?1:0;for(this[t+a]=255&e;0<=--a&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):E(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):E(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):S(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):S(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return A(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return A(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),t=t||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;0<=i;i--)e[i+t]=this[i+n];else if(a<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<a;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+a),t);return a},s.prototype.fill=function(e,t,n){if(e=e||0,t=t||0,(n=n||this.length)<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=O(e.toString()),a=i.length;for(r=t;r<n;r++)this[r]=i[r%a]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new TypeError("Buffer.toArrayBuffer not supported in this browser");if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var R=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=R.get,e.set=R.set,e.write=R.write,e.toString=R.toString,e.toLocaleString=R.toString,e.toJSON=R.toJSON,e.equals=R.equals,e.compare=R.compare,e.indexOf=R.indexOf,e.copy=R.copy,e.slice=R.slice,e.readUIntLE=R.readUIntLE,e.readUIntBE=R.readUIntBE,e.readUInt8=R.readUInt8,e.readUInt16LE=R.readUInt16LE,e.readUInt16BE=R.readUInt16BE,e.readUInt32LE=R.readUInt32LE,e.readUInt32BE=R.readUInt32BE,e.readIntLE=R.readIntLE,e.readIntBE=R.readIntBE,e.readInt8=R.readInt8,e.readInt16LE=R.readInt16LE,e.readInt16BE=R.readInt16BE,e.readInt32LE=R.readInt32LE,e.readInt32BE=R.readInt32BE,e.readFloatLE=R.readFloatLE,e.readFloatBE=R.readFloatBE,e.readDoubleLE=R.readDoubleLE,e.readDoubleBE=R.readDoubleBE,e.writeUInt8=R.writeUInt8,e.writeUIntLE=R.writeUIntLE,e.writeUIntBE=R.writeUIntBE,e.writeUInt16LE=R.writeUInt16LE,e.writeUInt16BE=R.writeUInt16BE,e.writeUInt32LE=R.writeUInt32LE,e.writeUInt32BE=R.writeUInt32BE,e.writeIntLE=R.writeIntLE,e.writeIntBE=R.writeIntBE,e.writeInt8=R.writeInt8,e.writeInt16LE=R.writeInt16LE,e.writeInt16BE=R.writeInt16BE,e.writeInt32LE=R.writeInt32LE,e.writeInt32BE=R.writeInt32BE,e.writeFloatLE=R.writeFloatLE,e.writeFloatBE=R.writeFloatBE,e.writeDoubleLE=R.writeDoubleLE,e.writeDoubleBE=R.writeDoubleBE,e.fill=R.fill,e.inspect=R.inspect,e.toArrayBuffer=R.toArrayBuffer,e};var I=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function O(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;o++){if(55295<(n=e.charCodeAt(o))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&a.push(239,191,189);continue}if(o+1===r){-1<(t-=3)&&a.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function D(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function k(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{11:11,14:14,8:8}],11:[function(e,t,n){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],12:[function(e,t,n){(function(e){function t(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===t(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===t(e)},n.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e.isBuffer}).call(this,{isBuffer:e(16)})},{16:16}],13:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return void 0===e}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(l(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];n.apply(this,i)}else if(u(n)){for(r=arguments.length,i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];for(r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i)}return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,!u(this._events[e])||this._events[e].warned||(n=l(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace());return this},r.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(a=i;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){return e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},{}],14:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,d=-7,c=n?i-1:0,f=n?-1:1,h=e[t+c];for(c+=f,a=h&(1<<-d)-1,h>>=-d,d+=s;0<d;a=256*a+e[t+c],c+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;0<d;o=256*o+e[t+c],c+=f,d-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=l}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,d=(1<<l)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),2<=(t+=1<=o+c?f/u:f*Math.pow(2,1-c))*u&&(o++,u/=2),d<=o+c?(s=0,o=d):1<=o+c?(s=(t*u-1)*Math.pow(2,i),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,i),o=0));8<=i;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;0<l;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*g}},{}],15:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],16:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],17:[function(e,t,n){(function(s){"use strict";!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,n,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return s.nextTick(e);case 2:return s.nextTick(function(){e.call(null,t)});case 3:return s.nextTick(function(){e.call(null,t,n)});case 4:return s.nextTick(function(){e.call(null,t,n,r)});default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return s.nextTick(function(){e.apply(null,i)})}}}:t.exports=s}).call(this,e(18))},{18:18}],18:[function(e,t,n){var r,i,a=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,d=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?d=l.concat(d):f=-1,d.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=d.length;t;){for(l=d,d=[];++f<t;)l&&l[f].run();f=-1,t=d.length}l=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new g(e,t)),1!==d.length||c||u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],19:[function(e,t,n){t.exports=e(20)},{20:20}],20:[function(e,t,n){"use strict";var r=e(17),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var a=e(12);a.inherits=e(15);var o=e(22),s=e(24);a.inherits(c,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var d=u[l];c.prototype[d]||(c.prototype[d]=s.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},{12:12,15:15,17:17,22:22,24:24}],21:[function(e,t,n){"use strict";t.exports=a;var r=e(23),i=e(12);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=e(15),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},{12:12,15:15,23:23}],22:[function(P,L,e){(function(g,e){"use strict";var m=P(17);L.exports=f;var o,y=P(28);f.ReadableState=a;function v(e,t){return e.listeners(t).length}P(13).EventEmitter;var i=P(27),s=P(34).Buffer,u=e.Uint8Array||function(){};var t=P(12);t.inherits=P(15);var n=P(9),_=void 0;_=n&&n.debuglog?n.debuglog("stream"):function(){};var l,d=P(25),r=P(26);t.inherits(f,i);var c=["error","close","destroy","pause","resume"];function a(e,t){e=e||{};var n=t instanceof(o=o||P(20));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l=l||P(29).StringDecoder,this.decoder=new l(e.encoding),this.encoding=e.encoding)}function f(e){if(o=o||P(20),!(this instanceof f))return new f(e);this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),i.call(this)}function h(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,E(e)}(e,o)):(i||(a=function(e,t){var n;(function(e){return s.isBuffer(e)||e instanceof u})(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&0<t.length?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):p(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?p(e,o,t,!1):w(e,o)):p(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function p(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&E(e)),w(e,t)}Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),f.prototype.destroy=r.destroy,f.prototype._undestroy=r.undestroy,f.prototype._destroy=function(e,t){this.push(null),t(e)},f.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),h(this,e,t,!1,n)},f.prototype.unshift=function(e){return h(this,e,null,!0,!1)},f.prototype.isPaused=function(){return!1===this._readableState.flowing},f.prototype.setEncoding=function(e){return l=l||P(29).StringDecoder,this._readableState.decoder=new l(e),this._readableState.encoding=e,this};var b=8388608;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return b<=e?e=b:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function E(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(_("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?m.nextTick(S,e):S(e))}function S(e){_("emit readable"),e.emit("readable"),I(e)}function w(e,t){t.readingMore||(t.readingMore=!0,m.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(_("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){_("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(_("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(_("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=a.slice(o);break}++r}return t.length-=r,i}(e,t):function(e,t){var n=s.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=a.slice(o);break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,m.nextTick(D,t,e))}function D(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function k(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}f.prototype.read=function(e){_("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return _("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):E(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return _("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&_("length less than watermark",i=!0),t.ended||t.reading?_("reading or ended",i=!1):i&&(_("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(n,t))),null===(r=0<e?M(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},f.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},f.prototype.pipe=function(n,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,_("pipe count=%d opts=%j",i.pipesCount,e);var t=(!e||!1!==e.end)&&n!==g.stdout&&n!==g.stderr?o:p;function a(e,t){_("onunpipe"),e===r&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,_("cleanup"),n.removeListener("close",f),n.removeListener("finish",h),n.removeListener("drain",s),n.removeListener("error",c),n.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",p),r.removeListener("data",d),u=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||s())}function o(){_("onend"),n.end()}i.endEmitted?m.nextTick(t):r.once("end",t),n.on("unpipe",a);var s=function(t){return function(){var e=t._readableState;_("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&v(t,"data")&&(e.flowing=!0,I(t))}}(r);n.on("drain",s);var u=!1;var l=!1;function d(e){_("ondata"),(l=!1)!==n.write(e)||l||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==k(i.pipes,n))&&!u&&(_("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function c(e){_("onerror",e),p(),n.removeListener("error",c),0===v(n,"error")&&n.emit("error",e)}function f(){n.removeListener("finish",h),p()}function h(){_("onfinish"),n.removeListener("close",f),p()}function p(){_("unpipe"),r.unpipe(n)}return r.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?y(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(n,"error",c),n.once("close",f),n.once("finish",h),n.emit("pipe",r),i.flowing||(_("pipe resume"),r.resume()),n},f.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=k(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},f.prototype.addListener=f.prototype.on=function(e,t){var n=i.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):m.nextTick(C,this))}return n},f.prototype.resume=function(){var e=this._readableState;return e.flowing||(_("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,m.nextTick(R,e,t))}(this,e)),this},f.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this},f.prototype.wrap=function(t){var n=this,r=this._readableState,i=!1;for(var e in t.on("end",function(){if(_("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),t.on("data",function(e){_("wrapped data"),r.decoder&&(e=r.decoder.write(e)),r.objectMode&&null==e||(r.objectMode||e&&e.length)&&(n.push(e)||(i=!0,t.pause()))}),t)void 0===this[e]&&"function"==typeof t[e]&&(this[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e));for(var a=0;a<c.length;a++)t.on(c[a],this.emit.bind(this,c[a]));return this._read=function(e){_("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(f.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),f._fromList=M}).call(this,P(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,13:13,15:15,17:17,18:18,20:20,25:25,26:26,27:27,28:28,29:29,34:34,9:9}],23:[function(e,t,n){"use strict";t.exports=a;var r=e(20),i=e(12);function a(e){if(!(this instanceof a))return new a(e);r.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var n=this;"function"==typeof this._flush?this._flush(function(e,t){s(n,e,t)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=e(15),i.inherits(a,r),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},{12:12,15:15,20:20}],24:[function(E,S,e){(function(e,t){"use strict";var s=E(17);function c(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}S.exports=g;var u,l=!e.browser&&-1<["v0.10","v0.9."].indexOf(e.version.slice(0,5))?setImmediate:s.nextTick;g.WritableState=p;var n=E(12);n.inherits=E(15);var r={deprecate:E(37)},i=E(27),d=E(34).Buffer,o=t.Uint8Array||function(){};var a,f=E(26);function h(){}function p(e,t){u=u||E(20),e=e||{};var n=t instanceof u;this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(s.nextTick(i,r),s.nextTick(T,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),T(e,t))}(e,n,r,t,i);else{var a=_(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||v(e,n),r?l(y,e,n,a,i):y(e,n,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function g(e){if(u=u||E(20),!(a.call(g,this)||this instanceof u))return new g(e);this._writableState=new p(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function m(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function y(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),T(e,t)}function v(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,s=!0;n;)(i[o]=n).isBuf||(s=!1),n=n.next,o+=1;i.allBuffers=s,m(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new c(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(m(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(t,n){t._final(function(e){n.pendingcb--,e&&t.emit("error",e),n.prefinished=!0,t.emit("prefinish"),T(t,n)})}function T(e,t){var n=_(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,s.nextTick(b,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}n.inherits(g,i),p.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(p.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===g&&(e&&e._writableState instanceof p)}})):a=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,n){var r=this._writableState,i=!1,a=!r.objectMode&&function(e){return d.isBuffer(e)||e instanceof o}(e);return a&&!d.isBuffer(e)&&(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(n=t,t=null),t=a?"buffer":t||r.defaultEncoding,"function"!=typeof n&&(n=h),r.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),s.nextTick(t,n)}(this,n):(a||function(e,t,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),s.nextTick(r,a),i=!1),i}(this,r,e,n))&&(r.pendingcb++,i=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else m(e,t,!1,s,r,i,a);return u}(this,r,a,e,t,n)),i},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,t=e=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?s.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=f.destroy,g.prototype._undestroy=f.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,E(18),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{12:12,15:15,17:17,18:18,20:20,26:26,27:27,34:34,37:37}],25:[function(e,t,n){"use strict";var s=e(34).Buffer,r=e(9);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}t.exports=(i.prototype.push=function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var t,n,r,i=s.allocUnsafe(e>>>0),a=this.head,o=0;a;)t=a.data,n=i,r=o,t.copy(n,r),o+=a.data.length,a=a.next;return i},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})},{34:34,9:9}],26:[function(e,t,n){"use strict";var a=e(17);function o(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a.nextTick(o,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{17:17}],27:[function(e,t,n){t.exports=e(13).EventEmitter},{13:13}],28:[function(e,t,n){arguments[4][11][0].apply(n,arguments)},{11:11}],29:[function(e,t,n){"use strict";var r=e(34).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}(n.StringDecoder=a).prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=o(t[r])))return 0<i&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=o(t[r])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{34:34}],30:[function(e,t,n){t.exports=e(31).PassThrough},{31:31}],31:[function(e,t,n){(((n=t.exports=e(22)).Stream=n).Readable=n).Writable=e(24),n.Duplex=e(20),n.Transform=e(23),n.PassThrough=e(21)},{20:20,21:21,22:22,23:23,24:24}],32:[function(e,t,n){t.exports=e(31).Transform},{31:31}],33:[function(e,t,n){t.exports=e(24)},{24:24}],34:[function(e,t,n){var r=e(10),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,n),n.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{10:10}],35:[function(e,t,n){t.exports=r;var d=e(13).EventEmitter;function r(){d.call(this)}e(15)(r,d),r.Readable=e(31),r.Writable=e(33),r.Duplex=e(19),r.Transform=e(32),r.PassThrough=e(30),(r.Stream=r).prototype.pipe=function(t,e){var n=this;function r(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),t.on("drain",i),t._isStdio||e&&!1===e.end||(n.on("end",o),n.on("close",s));var a=!1;function o(){a||(a=!0,t.end())}function s(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(e){if(l(),0===d.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",r),t.removeListener("drain",i),n.removeListener("end",o),n.removeListener("close",s),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},{13:13,15:15,19:19,30:30,31:31,32:32,33:33}],36:[function(e,t,n){var r=e(10).Buffer,i=r.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var a=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=o)}this.charBuffer=new r(6),this.charReceived=0,this.charLength=0};function o(e){return e.toString(this.encoding)}function s(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function u(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}a.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!(55296<=(i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var i;r=(t+=e.toString(this.encoding,0,r)).length-1;if(55296<=(i=t.charCodeAt(r))&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,r)}return t},a.prototype.detectIncompleteChar=function(e){for(var t=3<=e.length?3:e.length;0<t;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},a.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{10:10}],37:[function(e,t,n){(function(n){function r(e){try{if(!n.localStorage)return!1}catch(e){return!1}var t=n.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(e,t,n){function b(e){this.node=e}function T(){this.events=[],this.head=null,this.body=null}function E(){this.styling=null,this.layout=null}function S(){this.styles={}}function w(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function A(){this.regions={}}function a(e){this.kind=e,this.begin=null,this.end=null,this.styleAttrs=null,this.regionID=null,this.sets=null,this.timeContainer=null}function C(){a.call(this,"body")}function R(){a.call(this,"div")}function I(){a.call(this,"p")}function M(){a.call(this,"span"),this.space=null}function o(){a.call(this,"span"),this.space=null,this.text=null}function O(){a.call(this,"br")}function D(){this.id=null,this.begin=null,this.end=null,this.styleAttrs=null,this.sets=null}function k(){this.begin=null,this.end=null,this.qname=null,this.value=null}function i(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function s(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function u(e,t){var n={};if(null!==e)for(var r in e.attributes){var i=e.attributes[r].uri+" "+e.attributes[r].local,a=m.byQName[i];if(void 0!==a){var o=a.parse(e.attributes[r].value);null!==o?(n[i]=o,a===m.byName.zIndex&&p(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):L(t,"Cannot parse styling attribute "+i+" --\x3e "+e.attributes[r].value)}}return n}function d(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function c(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function l(e,t,n,r){var i=t&&"seq"===t.timeContainer,a=0;n&&"begin"in n.attributes&&null===(a=c(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&(p(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)"),a=0);var o=i?0:null;n&&"dur"in n.attributes&&null===(o=c(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&p(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;n&&"end"in n.attributes&&null===(s=c(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&p(r,"Malformed end value (ignoring)");var u=0;if(t&&(u=i&&"contents"in t&&0<t.contents.length?t.contents[t.contents.length-1].end:t.begin||0),a+=u,null!==o)s=a+o;else{var l=t&&"end"in t?t.end:Number.POSITIVE_INFINITY;s=null!==s?s+u:l}return{begin:a,end:s}}function f(e,t,n){for(;0<t.styleRefs.length;){var r=t.styleRefs.pop();r in e.styles?(f(e,e.styles[r],n),P(e.styles[r].styleAttrs,t.styleAttrs)):L(n,"Non-existant style id referenced")}}function h(e,t,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a in e.styles?P(e.styles[a].styleAttrs,n):L(r,"Non-existant style id referenced")}}function P(e,t){for(var n in e)n in t||(t[n]=e[n])}function p(e,t){if(e&&e.warn&&e.warn(t))throw t}function L(e,t){if(e&&e.error&&e.error(t))throw t}function x(e,t){throw e&&e.fatal&&e.fatal(t),t}function r(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(t<a))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}var g,N,F,m,y;g=void 0===n?this.imscDoc={}:n,N="undefined"==typeof sax?e(45):sax,F="undefined"==typeof imscNames?e(42):imscNames,m="undefined"==typeof imscStyles?e(43):imscStyles,y="undefined"==typeof imscUtils?e(44):imscUtils,g.fromXML=function(e,h,p){var t=N.parser(!0,{xmlns:!0}),g=[],m=[],y=[],v=0,_=null;t.onclosetag=function(e){if(g[0]instanceof S)for(var t in g[0].styles)f(g[0],g[0].styles[t],h);else if(g[0]instanceof I||g[0]instanceof M){if(1<g[0].contents.length){var n,r=[g[0].contents[0]];for(n=1;n<g[0].contents.length;n++)g[0].contents[n]instanceof o&&r[r.length-1]instanceof o?r[r.length-1].text+=g[0].contents[n].text:r.push(g[0].contents[n]);g[0].contents=r}g[0]instanceof M&&1===g[0].contents.length&&g[0].contents[0]instanceof o&&null===g[0].text&&(g[0].text=g[0].contents[0].text,delete g[0].contents)}else g[0]instanceof b&&(g[0].node.uri===F.ns_tt&&"metadata"===g[0].node.local?v--:0<v&&p&&"onCloseTag"in p&&p.onCloseTag());y.shift(),m.shift(),g.shift()},t.ontext=function(e){if(void 0===g[0]);else if(g[0]instanceof M||g[0]instanceof I){var t=new o;t.initFromText(_,g[0],e,y[0],h),g[0].contents.push(t)}else g[0]instanceof b&&0<v&&p&&"onText"in p&&p.onText(e)},t.onopentag=function(e){var t=e.attributes["xml:space"];t?y.unshift(t.value):0===y.length?y.unshift("default"):y.unshift(y[0]);var n=e.attributes["xml:lang"];if(n?m.unshift(n.value):0===m.length?m.unshift(""):m.unshift(m[0]),e.uri===F.ns_tt)if("tt"===e.local)null!==_&&x("Two <tt> elements at ("+this.line+","+this.column+")"),(_=new T).initFromNode(e,h),g.unshift(_);else if("head"===e.local)g[0]instanceof T||x("Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==_.head&&x("Second <head> element at ("+this.line+","+this.column+")"),_.head=new E,g.unshift(_.head);else if("styling"===e.local)g[0]instanceof E||x("Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==_.head.styling&&x("Second <styling> element at ("+this.line+","+this.column+")"),_.head.styling=new S,g.unshift(_.head.styling);else if("style"===e.local){var r;g[0]instanceof S?((r=new w).initFromNode(e,h),r.id?_.head.styling.styles[r.id]=r:L("<style> element missing @id attribute"),g.unshift(r)):g[0]instanceof D?((r=new w).initFromNode(e,h),P(r.styleAttrs,g[0].styleAttrs),g.unshift(r)):x(h,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)g[0]instanceof E||x(h,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==_.head.layout&&x(h,"Second <layout> element at "+this.line+","+this.column+")"),_.head.layout=new A,g.unshift(_.head.layout);else if("region"===e.local){g[0]instanceof A||x(h,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var i=new D;i.initFromNode(_,e,h),!i.id||i.id in _.head.layout.regions?L(h,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):(_.head.layout.regions[i.id]=i,_._registerEvent(i)),g.unshift(i)}else if("body"===e.local){g[0]instanceof T||x(h,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==_.body&&x(h,"Second <body> element at "+this.line+","+this.column+")");var a=new C;a.initFromNode(_,e,h),_._registerEvent(a),_.body=a,g.unshift(a)}else if("div"===e.local){g[0]instanceof R||g[0]instanceof C||x(h,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var o=new R;o.initFromNode(_,g[0],e,h),_._registerEvent(o),g[0].contents.push(o),g.unshift(o)}else if("p"===e.local){g[0]instanceof R||x(h,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var s=new I;s.initFromNode(_,g[0],e,h),_._registerEvent(s),g[0].contents.push(s),g.unshift(s)}else if("span"===e.local){g[0]instanceof M||g[0]instanceof I||x(h,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var u=new M;u.initFromNode(_,g[0],e,y[0],h),_._registerEvent(u),g[0].contents.push(u),g.unshift(u)}else if("br"===e.local){g[0]instanceof M||g[0]instanceof I||x(h,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var l=new O;l.initFromNode(_,g[0],e,h),_._registerEvent(l),g[0].contents.push(l),g.unshift(l)}else if("set"===e.local){g[0]instanceof M||g[0]instanceof I||g[0]instanceof R||g[0]instanceof C||g[0]instanceof D||g[0]instanceof O||x(h,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var d=new k;d.initFromNode(_,g[0],e,h),_._registerEvent(d),g[0].sets.push(d),g.unshift(d)}else g.unshift(new b(e));else g.unshift(new b(e));if(g[0]instanceof b)if(e.uri===F.ns_tt&&"metadata"===e.local)v++;else if(0<v&&p&&"onOpenTag"in p){var c=[];for(var f in e.attributes)c[e.attributes[f].uri+" "+e.attributes[f].local]={uri:e.attributes[f].uri,local:e.attributes[f].local,value:e.attributes[f].value};p.onOpenTag(e.uri,e.local,c)}},t.write(e).close(),null!==_.head?delete _.head.styling:_.head=new E,null===_.head.layout&&(_.head.layout=new A);var n=!1;for(var r in _.head.layout.regions){n=!0;break}if(!n){var i=D.createDefaultRegion();_.head.layout.regions[i.id]=i}return _},T.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var n=d(e,F.ns_ttp,"cellResolution"),r=15,i=32;if(null!==n){var a=/(\d+) (\d+)/.exec(n);null!==a?(i=parseInt(a[1]),r=parseInt(a[2])):p(t,"Malformed cellResolution value (using initial value instead)")}return{w:i,h:r}}(e,t);var n=function(e,t){var n,r=d(e,F.ns_ttp,"frameRate"),i=30;null!==r&&(null!==(n=/(\d+)/.exec(r))?i=parseInt(n[1]):p(t,"Malformed frame rate attribute (using initial value instead)"));var a=d(e,F.ns_ttp,"frameRateMultiplier"),o=1;null!==a&&(null!==(n=/(\d+) (\d+)/.exec(a))?o=parseInt(n[1])/parseInt(n[2]):p(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var s=o*i,u=1,l=d(e,F.ns_ttp,"tickRate");return null===l?null!==r&&(u=s):null!==(n=/(\d+)/.exec(l))?u=parseInt(n[1]):p(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:s,tickRate:u}}(e,t);this.effectiveFrameRate=n.effectiveFrameRate,this.tickRate=n.tickRate,this.aspectRatio=function(e,t){var n=d(e,F.ns_ittp,"aspectRatio"),r=null;if(null!==n){var i=/(\d+) (\d+)/.exec(n);if(null!==i){var a=parseInt(i[1]),o=parseInt(i[2]);0!==a&&0!==o?r=a/o:L(t,"Illegal aspectRatio values (ignoring)")}else L(t,"Malformed aspectRatio attribute (ignoring)")}return r}(e,t);var r=d(e,F.ns_ttp,"timeBase");null!==r&&"media"!==r&&x(t,"Unsupported time base");var i=function(e,t){var n=d(e,F.ns_tts,"extent");if(null===n)return null;var r=n.split(" ");if(2!==r.length)return p(t,"Malformed extent (ignoring)"),null;var i=y.parseLength(r[0]),a=y.parseLength(r[1]);return a&&i?{h:a,w:i}:(p(t,"Malformed extent values (ignoring)"),null)}(e,t);null===i?this.pxDimensions={h:480,w:640}:("px"===i.h.unit&&"px"===i.w.unit||x(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:i.h.value,w:i.w.value})},T.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=r(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=r(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},T.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},T.prototype.getMediaTimeEvents=function(){return this.events},w.prototype.initFromNode=function(e,t){this.id=i(e),this.styleAttrs=u(e,t),this.styleRefs=s(e)},a.prototype.initFromNode=function(e,t,n,r){var i=l(e,t,n,r);this.begin=i.begin,this.end=i.end,this.styleAttrs=u(n,r),null!==e.head&&null!==e.head.styling&&h(e.head.styling,s(n),this.styleAttrs,r),this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(n),this.sets=[],this.timeContainer=function(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(L(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},C.prototype.initFromNode=function(e,t,n){a.prototype.initFromNode.call(this,e,null,t,n),this.contents=[]},R.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},I.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r),this.contents=[]},M.prototype.initFromNode=function(e,t,n,r,i){a.prototype.initFromNode.call(this,e,t,n,i),this.space=r,this.contents=[]},o.prototype.initFromText=function(e,t,n,r,i){a.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},O.prototype.initFromNode=function(e,t,n,r){a.prototype.initFromNode.call(this,e,t,n,r)},D.createDefaultRegion=function(){var e=new D;return e.id="",e.begin=0,e.end=Number.POSITIVE_INFINITY,e.styleAttrs={},e.sets=[],e},D.prototype.initFromNode=function(e,t,n){this.id=i(t);var r=l(e,null,t,n);this.begin=r.begin,this.end=r.end,this.styleAttrs=u(t,n),this.sets=[],null!==e.head&&null!==e.head.styling&&h(e.head.styling,s(t),this.styleAttrs,n)},k.prototype.initFromNode=function(e,t,n,r){var i=l(e,t,n,r);this.begin=i.begin,this.end=i.end;var a=u(n,r);for(var o in a){if(this.qname){L(r,"More than one style specified on set");break}this.qname=o,this.value=a[o]}}},{42:42,43:43,44:44,45:45}],39:[function(e,t,n){!function(e,t,_){function b(e,t,n){var r;if("region"===n.kind?(r=document.createElement("div")).style.position="absolute":"body"===n.kind?r=document.createElement("div"):"div"===n.kind?r=document.createElement("div"):"p"===n.kind?r=document.createElement("p"):"span"===n.kind?r=document.createElement("span"):"br"===n.kind&&(r=document.createElement("br")),r){for(var i in r.style.margin="0",A){var a=A[i],o=n.styleAttrs[a.qname];void 0!==o&&null!==a.map&&a.map(e,r,n,o)}var s=r,u=n.styleAttrs[_.byName.multiRowAlign.qname];if(u&&"auto"!==u){var l=document.createElement("span");l.style.display="inline-block",l.style.textAlign=u,r.appendChild(l),s=l,e.mra=u}var d=n.styleAttrs[_.byName.linePadding.qname];if(d&&0<d&&(e.lp=d),"span"===n.kind&&n.text)if(e.lp||e.mra)for(var c=0;c<n.text.length;c++){var f=document.createElement("span");f.textContent=n.text.charAt(c),r.appendChild(f)}else r.textContent=n.text;for(var h in t.appendChild(r),n.contents)b(e,s,n.contents[h]);if((e.lp||e.mra)&&"p"===n.kind){var p=[];!function e(t,n,r){if(0===t.childElementCount)n.push({element:t,bgcolor:r});else for(var i=t.style.backgroundColor||r,a=t.firstChild;a;)a.nodeType===Node.ELEMENT_NODE&&e(a,n,i),a=a.nextSibling}(s,p,"red"),function(e,t){for(var n=null,r=!0,i=!1,a=0;a<=e.length;a++)if(a===e.length||"br"!==e[a].element.localName){if(null===n||a===e.length||!E(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height)){if(t&&!r){for(;0<=--a;)if(0!==e[a].element.getBoundingClientRect().width){if(w(e[a].element,e[a].color,t),0!==e[a].element.getBoundingClientRect().width&&E(e[a].element.getBoundingClientRect().top,e[a].element.getBoundingClientRect().height,e[n].element.getBoundingClientRect().top,e[n].element.getBoundingClientRect().height))break;e[a].element.style.paddingRight=null}r=!0;continue}if(a!==e.length&&null!==n&&!i){var o=document.createElement("br");e[a].element.parentElement.insertBefore(o,e[a].element),e.splice(a,0,{element:o}),i=!0;continue}if(a!==e.length&&t)for(;a<e.length;a++)if(0!==e[a].element.getBoundingClientRect().width){S(e[a].element,e[a].color,t);break}i=r=!1,n=a}}else i=!0}(p,e.lp*e.h),e.lp&&delete e.lp,e.mra&&delete e.mra}if("region"===n.kind){var g=[];!function e(t,n){if(0===t.childElementCount&&"span"===t.localName){var r=t.getBoundingClientRect();0!==n.length&&E(r.top,r.height,n[n.length-1].top,n[n.length-1].height)?(r.top<n[n.length-1].top&&(n[n.length-1].top=r.top),r.height>n[n.length-1].height&&(n[n.length-1].height=r.height),n[n.length-1].text+=t.textContent):n.push({top:r.top,height:r.height,text:t.textContent})}else for(var i=t.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&e(i,n),i=i.nextSibling}(s,g);var m=n.styleAttrs[_.byName.writingMode.qname];if(("lrtb"===m||"lr"===m||"rltb"===m||"rl"===m)&&e.enableRollUp&&0<n.contents.length&&"after"===n.styleAttrs[_.byName.displayAlign.qname]){var y=new T(""===n.id?"_":n.id,g);if(e.currentISDState[y.id]=y,e.previousISDState&&y.id in e.previousISDState&&0<e.previousISDState[y.id].plist.length&&1<y.plist.length&&y.plist[y.plist.length-2].text===e.previousISDState[y.id].plist[e.previousISDState[y.id].plist.length-1].text){var v=r.firstElementChild;v.style.bottom="-"+y.plist[y.plist.length-1].height+"px",v.style.transition="transform 0.4s",v.style.position="relative",v.style.transform="translateY(-"+y.plist[y.plist.length-1].height+"px)"}}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+n.kind)}function T(e,t){this.id=e,this.plist=t}function E(e,t,n,r){return e+t<n+r&&n<e||n+r<=e+t&&e<=n}function S(e,t,n){e.style.paddingLeft=n+"px",e.style.backgroundColor=t}function w(e,t,n){e.style.paddingRight=n+"px",e.style.backgroundColor=t}function n(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,r,i,a,o,s,u){var l=r||t.clientHeight,d=i||t.clientWidth;if(null!==e.aspectRatio){var c=l*e.aspectRatio;d<c?l=Math.round(d/e.aspectRatio):d=c}var f=document.createElement("div");f.style.position="relative",f.style.width=d+"px",f.style.height=l+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var h={h:l,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:a||!1,isd:e,errorHandler:o,previousISDState:s,enableRollUp:u||!1,currentISDState:{}};for(var p in t.appendChild(f),e.contents)b(h,f,e.contents[p]);return h.currentISDState};var A=[new n("http://www.w3.org/ns/ttml#styling backgroundColor",function(e,t,n,r){t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling color",function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"}),new n("http://www.w3.org/ns/ttml#styling direction",function(e,t,n,r){t.style.direction=r}),new n("http://www.w3.org/ns/ttml#styling display",function(e,t,n,r){}),new n("http://www.w3.org/ns/ttml#styling displayAlign",function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")}),new n("http://www.w3.org/ns/ttml#styling extent",function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=(o[0]+o[2])*e.h,a=(o[1]+o[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"}),new n("http://www.w3.org/ns/ttml#styling fontFamily",function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",")}),new n("http://www.w3.org/ns/ttml#styling fontSize",function(e,t,n,r){t.style.fontSize=r*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling fontStyle",function(e,t,n,r){t.style.fontStyle=r}),new n("http://www.w3.org/ns/ttml#styling fontWeight",function(e,t,n,r){t.style.fontWeight=r}),new n("http://www.w3.org/ns/ttml#styling lineHeight",function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling opacity",function(e,t,n,r){t.style.opacity=r}),new n("http://www.w3.org/ns/ttml#styling origin",function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"}),new n("http://www.w3.org/ns/ttml#styling overflow",function(e,t,n,r){t.style.overflow=r}),new n("http://www.w3.org/ns/ttml#styling padding",function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")}),new n("http://www.w3.org/ns/ttml#styling showBackground",null),new n("http://www.w3.org/ns/ttml#styling textAlign",function(e,t,n,r){var i,a=n.styleAttrs[_.byName.direction.qname];i="start"===r?"rtl"===a?"right":"left":"end"===r?"rtl"===a?"left":"right":r,t.style.textAlign=i}),new n("http://www.w3.org/ns/ttml#styling textDecoration",function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")}),new n("http://www.w3.org/ns/ttml#styling textOutline",function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"}),new n("http://www.w3.org/ns/ttml#styling unicodeBidi",function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i}),new n("http://www.w3.org/ns/ttml#styling visibility",function(e,t,n,r){t.style.visibility=r}),new n("http://www.w3.org/ns/ttml#styling wrapOption",function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"}),new n("http://www.w3.org/ns/ttml#styling writingMode",function(e,t,n,r){"lrtb"===r||"lr"===r?t.style.writingMode="horizontal-tb":"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")}),new n("http://www.w3.org/ns/ttml#styling zIndex",function(e,t,n,r){t.style.zIndex=r}),new n("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),a=e.imgResolver(r,i);a&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}}),new n("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")})],r={};for(var i in A)r[A[i].qname]=A[i]}(void 0===n?this.imscHTML={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscStyles?e(43):imscStyles)},{42:42,43:43}],40:[function(e,t,n){function P(e,t,n,r,i,a,o,s){if(t<o.begin||t>=o.end)return null;var u="regionID"in o&&""!==o.regionID?o.regionID:a;if(null!==i&&u!==n.id&&(!("contents"in o)||"contents"in o&&0===o.contents.length||""!==u))return null;var l=new L(o);for(var d in o.sets)t<o.sets[d].begin||t>=o.sets[d].end||(l.styleAttrs[o.sets[d].qname]=o.sets[d].value);var c,f={};for(var h in l.styleAttrs)if(f[h]=!0,h===N.byName.writingMode.qname&&!(N.byName.direction.qname in l.styleAttrs)){var p=l.styleAttrs[h];"lrtb"===p||"lr"===p?l.styleAttrs[N.byName.direction.qname]="ltr":"rltb"!==p&&"rl"!==p||(l.styleAttrs[N.byName.direction.qname]="rtl")}if(null!==i)for(var g in N.all){var m=N.all[g];if(m.qname===N.byName.textDecoration.qname){var y=i.styleAttrs[m.qname],v=l.styleAttrs[m.qname],_=[];void 0===v?_=y:-1===v.indexOf("none")?((-1===v.indexOf("noUnderline")&&-1!==y.indexOf("underline")||-1!==v.indexOf("underline"))&&_.push("underline"),(-1===v.indexOf("noLineThrough")&&-1!==y.indexOf("lineThrough")||-1!==v.indexOf("lineThrough"))&&_.push("lineThrough"),(-1===v.indexOf("noOverline")&&-1!==y.indexOf("overline")||-1!==v.indexOf("overline"))&&_.push("overline")):_.push("none"),l.styleAttrs[m.qname]=_}else m.inherit&&m.qname in i.styleAttrs&&!(m.qname in l.styleAttrs)&&(l.styleAttrs[m.qname]=i.styleAttrs[m.qname])}for(var b in N.all){var T=N.all[b];T.qname in l.styleAttrs||("region"===l.kind||!1===T.inherit&&null!==T.initial)&&(l.styleAttrs[T.qname]=T.parse(T.initial),f[T.qname]=!0)}for(var E in N.all){var S=N.all[E];if(S.qname in f&&null!==S.compute){var w=S.compute(e,i,l,l.styleAttrs[S.qname]);null!==w?l.styleAttrs[S.qname]=w:x(s,"Style '"+S.qname+"' on element '"+l.kind+"' cannot be computed")}}if("none"===l.styleAttrs[N.byName.display.qname])return null;for(var A in null===i?c=null===r?[]:[r]:"contents"in o&&(c=o.contents),c){var C=P(e,t,n,r,l,u,c[A]);null!==C&&l.contents.push(C.element)}for(var R in l.styleAttrs){-1===N.byQName[R].applies.indexOf(l.kind)&&delete l.styleAttrs[R]}if("span"===l.kind&&l.text&&"default"===l.space){var I=l.text.replace(/\s+/g," ");l.text=I}if("p"===l.kind){var M=[];!function e(t,n){if("contents"in t)for(var r in t.contents)e(t.contents[r],n);else n.push(t)}(l,M);for(var O=0,D="after_br",k=0;;)if("after_br"===D)O>=M.length||"br"===M[O].kind?(D="before_br",k=O,O--):("preserve"!==M[O].space&&(M[O].text=M[O].text.replace(/^\s+/g,"")),0<M[O].text.length?(D="looking_br",O++):M.splice(O,1));else if("before_br"===D)if(O<0||"br"===M[O].kind){if(D="after_br",(O=k+1)>=M.length)break}else if("preserve"!==M[O].space&&(M[O].text=M[O].text.replace(/\s+$/g,"")),0<M[O].text.length){if(D="after_br",(O=k+1)>=M.length)break}else M.splice(O,1),O--;else O>=M.length||"br"===M[O].kind?(D="before_br",k=O,O--):O++;!function e(t){{if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}}(l)}return"div"===l.kind&&N.byName.backgroundImage.qname in l.styleAttrs||"br"===l.kind||"contents"in l&&0<l.contents.length||"span"===l.kind&&null!==l.text||"region"===l.kind&&"always"===l.styleAttrs[N.byName.showBackground.qname]?{region_id:u,element:l}:null}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function L(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function x(e,t){if(e&&e.error&&e.error(t))throw t}var r,N;r=void 0===n?this.imscISD={}:n,"undefined"==typeof imscNames?e(42):imscNames,N="undefined"==typeof imscStyles?e(43):imscStyles,r.generateISD=function(e,t,n){var r=new o(e);for(var i in e.head.layout.regions){var a=P(e,t,e.head.layout.regions[i],e.body,null,"",e.head.layout.regions[i],n);null!==a&&r.contents.push(a.element)}return r}},{42:42,43:43}],41:[function(e,t,n){n.generateISD=e(40).generateISD,n.fromXML=e(38).fromXML,n.renderHTML=e(39).render},{38:38,39:39,40:40}],42:[function(e,t,n){var r;(r=void 0===n?this.imscNames={}:n).ns_tt="http://www.w3.org/ns/ttml",r.ns_tts="http://www.w3.org/ns/ttml#styling",r.ns_ttp="http://www.w3.org/ns/ttml#parameter",r.ns_xml="http://www.w3.org/XML/1998/namespace",r.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",r.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",r.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",r.ns_ebutts="urn:ebu:tt:style"},{}],43:[function(e,t,n){!function(u,e,a){function t(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var n in u.all=[new t(e.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,a.parseColor,null),new t(e.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null),new t(e.ns_tts,"direction","ltr",["p","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(e){return e},null),new t(e.ns_tts,"displayAlign","before",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"extent","auto",["tt","region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r){var i,a;if("auto"===r)i=1;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)a=1;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:i,w:a}}),new t(e.ns_tts,"fontFamily","default",["span"],!0,!0,function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n},null),new t(e.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,function(e,t,n,r){var i;if("%"===r.unit)i=null!==t?t.styleAttrs[u.byName.fontSize.qname]*r.value/100:r.value/100/e.cellResolution.h;else if("em"===r.unit)i=null!==t?t.styleAttrs[u.byName.fontSize.qname]*r.value:r.value/e.cellResolution.h;else if("c"===r.unit)i=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;i=r.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"fontStyle","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"fontWeight","normal",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"lineHeight","normal",["p"],!0,!0,function(e){return"normal"===e?e:a.parseLength(e)},function(e,t,n,r){var i;if("normal"===r)i=r;else if("%"===r.unit)i=n.styleAttrs[u.byName.fontSize.qname]*r.value/100;else if("em"===r.unit)i=n.styleAttrs[u.byName.fontSize.qname]*r.value;else if("c"===r.unit)i=r.value/e.cellResolution.h;else{if("px"!==r.unit)return null;i=r.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new t(e.ns_tts,"origin","auto",["region"],!1,!0,function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var n=a.parseLength(t[0]),r=a.parseLength(t[1]);return r&&n?{h:r,w:n}:null},function(e,t,n,r){var i,a;if("auto"===r)i=0;else if("%"===r.h.unit)i=r.h.value/100;else{if("px"!==r.h.unit)return null;i=r.h.value/e.pxDimensions.h}if("auto"===r)a=0;else if("%"===r.w.unit)a=r.w.value/100;else{if("px"!==r.w.unit)return null;a=r.w.value/e.pxDimensions.w}return{h:i,w:a}}),new t(e.ns_tts,"overflow","hidden",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"padding","0px",["region"],!1,!0,function(e){var t=e.split(" ");if(4<t.length)return null;var n=[];for(var r in t){var i=a.parseLength(t[r]);if(!i)return null;n.push(i)}return n},function(e,t,n,r){var i;if(1===r.length)i=[r[0],r[0],r[0],r[0]];else if(2===r.length)i=[r[0],r[1],r[0],r[1]];else if(3===r.length)i=[r[0],r[1],r[2],r[1]];else{if(4!==r.length)return null;i=[r[0],r[1],r[2],r[3]]}var a=n.styleAttrs[u.byName.writingMode.qname];if("lrtb"===a||"lr"===a)i=[i[0],i[3],i[2],i[1]];else if("rltb"===a||"rl"===a)i=[i[0],i[1],i[2],i[3]];else if("tblr"===a)i=[i[3],i[0],i[1],i[2]];else{if("tbrl"!==a&&"tb"!==a)return null;i=[i[3],i[2],i[1],i[0]]}var o=[];for(var s in i)if(0===i[s].value)o[s]=0;else if("%"===i[s].unit)o[s]="0"===s||"2"===s?n.styleAttrs[u.byName.extent.qname].h*i[s].value/100:n.styleAttrs[u.byName.extent.qname].w*i[s].value/100;else if("em"===i[s].unit)o[s]=n.styleAttrs[u.byName.fontSize.qname]*i[s].value;else if("c"===i[s].unit)o[s]=i[s].value/e.cellResolution.h;else{if("px"!==i[s].unit)return null;o[s]=i[s].value/e.pxDimensions.h}return o}),new t(e.ns_tts,"showBackground","always",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"textAlign","start",["p"],!0,!0,function(e){return e},function(e,t,n,r){return"left"===r?"start":"right"===r?"end":r}),new t(e.ns_tts,"textDecoration","none",["span"],!0,!0,function(e){return e.split(" ")},null),new t(e.ns_tts,"textOutline","none",["span"],!0,!0,function(e){if("none"===e)return e;var t={},n=e.split(" ");if(0===n.length||2<n.length)return null;var r=a.parseColor(n[0]);if(null!==(t.color=r)&&n.shift(),1!==n.length)return null;var i=a.parseLength(n[0]);return i?(t.thickness=i,t):null},function(e,t,n,r){if("none"===r)return r;var i={};if(null===r.color?i.color=n.styleAttrs[u.byName.color.qname]:i.color=r.color,"%"===r.thickness.unit)i.thickness=n.styleAttrs[u.byName.fontSize.qname]*r.thickness.value/100;else if("em"===r.thickness.unit)i.thickness=n.styleAttrs[u.byName.fontSize.qname]*r.thickness.value;else if("c"===r.thickness.unit)i.thickness=r.thickness.value/e.cellResolution.h;else{if("px"!==r.thickness.unit)return null;i.thickness=r.thickness.value/e.pxDimensions.h}return i}),new t(e.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(e){return e},null),new t(e.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(e){return e},null),new t(e.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(e){return e},null),new t(e.ns_tts,"zIndex","auto",["region"],!1,!0,function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t},null),new t(e.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,function(e,t,n,r){return"c"===r.unit?r.value/e.cellResolution.h:null}),new t(e.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(e){return e},null),new t(e.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(e){return e},null),new t(e.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(e){return"true"===e},null)],u.byQName={},u.all)u.byQName[u.all[n].qname]=u.all[n];for(var r in u.byName={},u.all)u.byName[u.all[r].name]=u.all[r]}(void 0===n?this.imscStyles={}:n,"undefined"==typeof imscNames?e(42):imscNames,"undefined"==typeof imscUtils?e(44):imscUtils)},{42:42,44:44}],44:[function(e,t,n){!function(e){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,i=/rgb\((\d+),(\d+),(\d+)\)/,a=/rgba\((\d+),(\d+),(\d+),(\d+)\)/,o={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var t,n=null;return e in o?n=o[e]:null!==(t=r.exec(e))?n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),void 0!==t[4]?parseInt(t[4],16):255]:null!==(t=i.exec(e))?n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:null!==(t=a.exec(e))&&(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),n};var s=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=s.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(void 0===n?this.imscUtils={}:n)},{}],45:[function(V,e,t){(function(q){!function(u){u.parser=function(e,t){return new i(e,t)},u.SAXParser=i,u.SAXStream=o,u.createStream=function(e,t){return new o(e,t)},u.MAX_BUFFER_LENGTH=65536;var r,l=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function i(e,t){if(!(this instanceof i))return new i(e,t);var n=this;!function(e){for(var t=0,n=l.length;t<n;t++)e[l[t]]=""}(n),n.q=n.c="",n.bufferCheckPosition=u.MAX_BUFFER_LENGTH,n.opt=t||{},n.opt.lowercase=n.opt.lowercase||n.opt.lowercasetags,n.looseCase=n.opt.lowercase?"toLowerCase":"toUpperCase",n.tags=[],n.closed=n.closedRoot=n.sawRoot=!1,n.tag=n.error=null,n.strict=!!e,n.noscript=!(!e&&!n.opt.noscript),n.state=A.BEGIN,n.strictEntities=n.opt.strictEntities,n.ENTITIES=n.strictEntities?Object.create(u.XML_ENTITIES):Object.create(u.ENTITIES),n.attribList=[],n.opt.xmlns&&(n.ns=Object.create(m)),n.trackPosition=!1!==n.opt.position,n.trackPosition&&(n.position=n.line=n.column=0),R(n,"onready")}u.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),i.prototype={end:function(){k(this)},write:function(e){var t=this;if(this.error)throw this.error;if(t.closed)return D(t,"Cannot write after close. Assign an onready handler.");if(null===e)return k(t);"object"==typeof e&&(e=e.toString());var n=0,r="";for(;r=G(e,n++),t.c=r;)switch(t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++),t.state){case A.BEGIN:if(t.state=A.BEGIN_WHITESPACE,"\ufeff"===r)continue;j(t,r);continue;case A.BEGIN_WHITESPACE:j(t,r);continue;case A.TEXT:if(t.sawRoot&&!t.closedRoot){for(var i=n-1;r&&"<"!==r&&"&"!==r;)(r=G(e,n++))&&t.trackPosition&&(t.position++,"\n"===r?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(i,n-1)}"<"!==r||t.sawRoot&&t.closedRoot&&!t.strict?(!E(d,r)||t.sawRoot&&!t.closedRoot||P(t,"Text data outside of root node."),"&"===r?t.state=A.TEXT_ENTITY:t.textNode+=r):(t.state=A.OPEN_WAKA,t.startTagPosition=t.position);continue;case A.SCRIPT:"<"===r?t.state=A.SCRIPT_ENDING:t.script+=r;continue;case A.SCRIPT_ENDING:"/"===r?t.state=A.CLOSE_TAG:(t.script+="<"+r,t.state=A.SCRIPT);continue;case A.OPEN_WAKA:if("!"===r)t.state=A.SGML_DECL,t.sgmlDecl="";else if(T(d,r));else if(T(y,r))t.state=A.OPEN_TAG,t.tagName=r;else if("/"===r)t.state=A.CLOSE_TAG,t.tagName="";else if("?"===r)t.state=A.PROC_INST,t.procInstName=t.procInstBody="";else{if(P(t,"Unencoded <"),t.startTagPosition+1<t.position){var a=t.position-t.startTagPosition;r=new Array(a).join(" ")+r}t.textNode+="<"+r,t.state=A.TEXT}continue;case A.SGML_DECL:(t.sgmlDecl+r).toUpperCase()===h?(I(t,"onopencdata"),t.state=A.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+r==="--"?(t.state=A.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+r).toUpperCase()===p?(t.state=A.DOCTYPE,(t.doctype||t.sawRoot)&&P(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===r?(I(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=A.TEXT):(T(c,r)&&(t.state=A.SGML_DECL_QUOTED),t.sgmlDecl+=r);continue;case A.SGML_DECL_QUOTED:r===t.q&&(t.state=A.SGML_DECL,t.q=""),t.sgmlDecl+=r;continue;case A.DOCTYPE:">"===r?(t.state=A.TEXT,I(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=r,"["===r?t.state=A.DOCTYPE_DTD:T(c,r)&&(t.state=A.DOCTYPE_QUOTED,t.q=r));continue;case A.DOCTYPE_QUOTED:t.doctype+=r,r===t.q&&(t.q="",t.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:t.doctype+=r,"]"===r?t.state=A.DOCTYPE:T(c,r)&&(t.state=A.DOCTYPE_DTD_QUOTED,t.q=r);continue;case A.DOCTYPE_DTD_QUOTED:t.doctype+=r,r===t.q&&(t.state=A.DOCTYPE_DTD,t.q="");continue;case A.COMMENT:"-"===r?t.state=A.COMMENT_ENDING:t.comment+=r;continue;case A.COMMENT_ENDING:"-"===r?(t.state=A.COMMENT_ENDED,t.comment=O(t.opt,t.comment),t.comment&&I(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+r,t.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==r?(P(t,"Malformed comment"),t.comment+="--"+r,t.state=A.COMMENT):t.state=A.TEXT;continue;case A.CDATA:"]"===r?t.state=A.CDATA_ENDING:t.cdata+=r;continue;case A.CDATA_ENDING:"]"===r?t.state=A.CDATA_ENDING_2:(t.cdata+="]"+r,t.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===r?(t.cdata&&I(t,"oncdata",t.cdata),I(t,"onclosecdata"),t.cdata="",t.state=A.TEXT):"]"===r?t.cdata+="]":(t.cdata+="]]"+r,t.state=A.CDATA);continue;case A.PROC_INST:"?"===r?t.state=A.PROC_INST_ENDING:T(d,r)?t.state=A.PROC_INST_BODY:t.procInstName+=r;continue;case A.PROC_INST_BODY:if(!t.procInstBody&&T(d,r))continue;"?"===r?t.state=A.PROC_INST_ENDING:t.procInstBody+=r;continue;case A.PROC_INST_ENDING:">"===r?(I(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=A.TEXT):(t.procInstBody+="?"+r,t.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:T(v,r)?t.tagName+=r:(L(t),">"===r?F(t):"/"===r?t.state=A.OPEN_TAG_SLASH:(E(d,r)&&P(t,"Invalid character in tag name"),t.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===r?(F(t,!0),B(t)):(P(t,"Forward-slash in opening tag not followed by >"),t.state=A.ATTRIB);continue;case A.ATTRIB:if(T(d,r))continue;">"===r?F(t):"/"===r?t.state=A.OPEN_TAG_SLASH:T(y,r)?(t.attribName=r,t.attribValue="",t.state=A.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===r?t.state=A.ATTRIB_VALUE:">"===r?(P(t,"Attribute without value"),t.attribValue=t.attribName,N(t),F(t)):T(d,r)?t.state=A.ATTRIB_NAME_SAW_WHITE:T(v,r)?t.attribName+=r:P(t,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===r)t.state=A.ATTRIB_VALUE;else{if(T(d,r))continue;P(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",I(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===r?F(t):T(y,r)?(t.attribName=r,t.state=A.ATTRIB_NAME):(P(t,"Invalid attribute name"),t.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(T(d,r))continue;T(c,r)?(t.q=r,t.state=A.ATTRIB_VALUE_QUOTED):(P(t,"Unquoted attribute value"),t.state=A.ATTRIB_VALUE_UNQUOTED,t.attribValue=r);continue;case A.ATTRIB_VALUE_QUOTED:if(r!==t.q){"&"===r?t.state=A.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=r;continue}N(t),t.q="",t.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:T(d,r)?t.state=A.ATTRIB:">"===r?F(t):"/"===r?t.state=A.OPEN_TAG_SLASH:T(y,r)?(P(t,"No whitespace between attributes"),t.attribName=r,t.attribValue="",t.state=A.ATTRIB_NAME):P(t,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(E(f,r)){"&"===r?t.state=A.ATTRIB_VALUE_ENTITY_U:t.attribValue+=r;continue}N(t),">"===r?F(t):t.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(t.tagName)">"===r?B(t):T(v,r)?t.tagName+=r:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=A.SCRIPT):(E(d,r)&&P(t,"Invalid tagname in closing tag"),t.state=A.CLOSE_TAG_SAW_WHITE);else{if(T(d,r))continue;E(y,r)?t.script?(t.script+="</"+r,t.state=A.SCRIPT):P(t,"Invalid tagname in closing tag."):t.tagName=r}continue;case A.CLOSE_TAG_SAW_WHITE:if(T(d,r))continue;">"===r?B(t):P(t,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var o,s;switch(t.state){case A.TEXT_ENTITY:o=A.TEXT,s="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:o=A.ATTRIB_VALUE_QUOTED,s="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:o=A.ATTRIB_VALUE_UNQUOTED,s="attribValue"}";"===r?(t[s]+=U(t),t.entity="",t.state=o):T(t.entity.length?b:_,r)?t.entity+=r:(P(t,"Invalid character in entity name"),t[s]+="&"+t.entity+r,t.entity="",t.state=o);continue;default:throw new Error(t,"Unknown state: "+t.state)}t.position>=t.bufferCheckPosition&&function(e){for(var t=Math.max(u.MAX_BUFFER_LENGTH,10),n=0,r=0,i=l.length;r<i;r++){var a=e[l[r]].length;if(t<a)switch(l[r]){case"textNode":M(e);break;case"cdata":I(e,"oncdata",e.cdata),e.cdata="";break;case"script":I(e,"onscript",e.script),e.script="";break;default:D(e,"Max buffer length exceeded: "+l[r])}n=Math.max(n,a)}var o=u.MAX_BUFFER_LENGTH-n;e.bufferCheckPosition=o+e.position}(t);return t},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function(e){M(e),""!==e.cdata&&(I(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(I(e,"onscript",e.script),e.script="")}(this)}};try{r=V(35).Stream}catch(e){r=function(){}}var a=u.EVENTS.filter(function(e){return"error"!==e&&"end"!==e});function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new i(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,a.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){if(!e)return n.removeAllListeners(t),n._parser["on"+t]=e;n.on(t,e)},enumerable:!0,configurable:!1})})}(o.prototype=Object.create(r.prototype,{constructor:{value:o}})).write=function(e){if("function"==typeof q&&"function"==typeof q.isBuffer&&q.isBuffer(e)){if(!this._decoder){var t=V(36).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===a.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),r.prototype.on.call(n,t,e)};var d="\r\n\t ",e="0124356789",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="'\"",f=d+">",h="[CDATA[",p="DOCTYPE",s="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",m={xml:s,xmlns:g};d=n(d),e=n(e),t=n(t);var y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function n(e){return e.split("").reduce(function(e,t){return e[t]=!0,e},{})}function T(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function E(e,t){return!T(e,t)}c=n(c),f=n(f);var S,w,A=0;for(var C in u.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},u.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},u.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(u.ENTITIES).forEach(function(e){var t=u.ENTITIES[e],n="number"==typeof t?String.fromCharCode(t):t;u.ENTITIES[e]=n}),u.STATE)u.STATE[u.STATE[C]]=C;function R(e,t,n){e[t]&&e[t](n)}function I(e,t,n){e.textNode&&M(e),R(e,t,n)}function M(e){e.textNode=O(e.opt,e.textNode),e.textNode&&R(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function D(e,t){return M(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,R(e,"onerror",t),e}function k(e){return e.sawRoot&&!e.closedRoot&&P(e,"Unclosed root tag"),e.state!==A.BEGIN&&e.state!==A.BEGIN_WHITESPACE&&e.state!==A.TEXT&&D(e,"Unexpected end"),M(e),e.c="",e.closed=!0,R(e,"onend"),i.call(e,e.strict,e.opt),e}function P(e,t){if("object"!=typeof e||!(e instanceof i))throw new Error("bad call to strictFail");e.strict&&D(e,t)}function L(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,I(e,"onopentagstart",n)}function x(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function N(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=x(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==s)P(e,"xml: prefix must be bound to "+s+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==g)P(e,"xmlns: prefix must be bound to "+g+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,I(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(t,e){if(t.opt.xmlns){var n=t.tag,r=x(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(P(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){I(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var a=0,o=t.attribList.length;a<o;a++){var s=t.attribList[a],u=s[0],l=s[1],d=x(u,!0),c=d.prefix,f=d.local,h=""===c?"":n.ns[c]||"",p={name:u,value:l,prefix:c,local:f,uri:h};c&&"xmlns"!==c&&!h&&(P(t,"Unbound namespace prefix: "+JSON.stringify(c)),p.uri=c),t.tag.attributes[u]=p,I(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),I(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=A.TEXT:t.state=A.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function B(n){if(!n.tagName)return P(n,"Weird empty close tag."),n.textNode+="</>",void(n.state=A.TEXT);if(n.script){if("script"!==n.tagName)return n.script+="</"+n.tagName+">",n.tagName="",void(n.state=A.SCRIPT);I(n,"onscript",n.script),n.script=""}var e=n.tags.length,t=n.tagName;n.strict||(t=t[n.looseCase]());for(var r=t;e--;){if(n.tags[e].name===r)break;P(n,"Unexpected close tag")}if(e<0)return P(n,"Unmatched closing tag: "+n.tagName),n.textNode+="</"+n.tagName+">",void(n.state=A.TEXT);n.tagName=t;for(var i=n.tags.length;i-- >e;){var a=n.tag=n.tags.pop();n.tagName=n.tag.name,I(n,"onclosetag",n.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=n.tags[n.tags.length-1]||n;n.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach(function(e){var t=a.ns[e];I(n,"onclosenamespace",{prefix:e,uri:t})})}0===e&&(n.closedRoot=!0),n.tagName=n.attribValue=n.attribName="",n.attribList.length=0,n.state=A.TEXT}function U(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&(i="x"===n.charAt(1)?(n=n.slice(2),(t=parseInt(n,16)).toString(16)):(n=n.slice(1),(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(P(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function j(e,t){"<"===t?(e.state=A.OPEN_WAKA,e.startTagPosition=e.position):E(d,t)&&(P(e,"Non-whitespace before first tag."),e.textNode=t,e.state=A.TEXT)}function G(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function H(){var e,t,n=[],r=-1,i=arguments.length;if(!i)return"";for(var a="";++r<i;){var o=Number(arguments[r]);if(!isFinite(o)||o<0||1114111<o||w(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?n.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,n.push(e,t)),(r+1===i||16384<n.length)&&(a+=S.apply(null,n),n.length=0)}return a}A=u.STATE,String.fromCodePoint||(S=String.fromCharCode,w=Math.floor,Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H)}(void 0===t?this.sax={}:t)}).call(this,V(10).Buffer)},{10:10,35:35,36:36}],46:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),h=r(e(53)),a=r(e(48)),o=1,p=2,g=3,m=4,y=5;function s(){var e,t=this.context,s=(0,i.default)(t).getInstance(),u=[],l=void 0,d=void 0,c=void 0,f=void 0;function n(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function r(e,t){var n="",r=null;l&&(r=(new Date).getTime(),n+="["+(r-c)+"]"),d&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),0<n.length&&(n+=" ");for(var i=arguments.length,a=Array(2<i?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];Array.apply(null,a).forEach(function(e){n+=e+" "}),u[e]&&e<=f&&u[e](n),s.trigger(h.default.LOG,{message:n,level:e})}return e={getLogger:function(e){return{fatal:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o,this].concat(t))}.bind(e),error:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[p,this].concat(t))}.bind(e),warn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[g,this].concat(t))}.bind(e),info:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[m,this].concat(t))}.bind(e),debug:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[y,this].concat(t))}.bind(e)}},setLogTimestampVisible:function(e){l=e},setCalleeNameVisible:function(e){d=e},setLogToBrowserConsole:function(e){f=e?y:0},getLogToBrowserConsole:function(){return 0!==f},setLogLevel:function(e){f=e},getLogLevel:function(){return f}},d=l=!0,f=g,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(u[o]=n(window.console.error),u[p]=n(window.console.error),u[g]=n(window.console.warn),u[m]=n(window.console.info),u[y]=n(window.console.debug)),e}s.__dashjs_factory_name="Debug";var u=a.default.getSingletonFactory(s);u.LOG_LEVEL_NONE=0,u.LOG_LEVEL_FATAL=o,u.LOG_LEVEL_ERROR=p,u.LOG_LEVEL_WARNING=g,u.LOG_LEVEL_INFO=m,u.LOG_LEVEL_DEBUG=y,a.default.updateSingletonFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default},{47:47,48:48,53:53}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){var a={};function o(e,n,r){var i=-1;return a[e]&&a[e].some(function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0}),i}return{on:function(n,e,t){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];if(!n)throw new Error("event type cannot be null or undefined");if(!e||"function"!=typeof e)throw new Error("listener must be a function: "+e);if(!(0<=o(n,e,t))){a[n]=a[n]||[];var i={callback:e,scope:t,priority:r};a[n].some(function(e,t){if(e&&r>e.priority)return a[n].splice(t,0,i),!0})||a[n].push(i)}},off:function(e,t,n){if(e&&t&&a[e]){var r=o(e,t,n);r<0||(a[e][r]=null)}},trigger:function(e,t){if(e&&a[e]){if((t=t||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");t.type=e,a[e]=a[e].filter(function(e){return e}),a[e].forEach(function(e){return e&&e.callback.call(e.scope,t)})}},reset:function(){a={}}}}o.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(o);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,a.default.updateSingletonFactory(o.__dashjs_factory_name,s),n.default=s,t.exports=n.default},{48:48}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var u,a,r,i,o=(u=void 0,a=[],r={},i={},u={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:s,setSingletonInstance:function(e,t,n){for(var r in a){var i=a[r];if(i.context===e&&i.name===t)return void(a[r].instance=n)}a.push({name:t,context:e,instance:n})},getSingletonFactory:function(n){var e=l(n.__dashjs_factory_name,r);return e||(e=function(e){var t=void 0;return void 0===e&&(e={}),{getInstance:function(){return(t=t||s(e,n.__dashjs_factory_name))||(t=c(n,e,arguments),a.push({name:n.__dashjs_factory_name,context:e,instance:t})),t}}},r[n.__dashjs_factory_name]=e),e},getSingletonFactoryByName:function(e){return l(e,r)},updateSingletonFactory:function(e,t){d(e,t,r)},getClassFactory:function(t){var e=l(t.__dashjs_factory_name,i);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return c(t,e,arguments)}}},i[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(e){return l(e,i)},updateClassFactory:function(e,t){d(e,t,i)}});function s(e,t){for(var n in a){var r=a[n];if(r.context===e&&r.name===t)return r.instance}return null}function l(e,t){return t[e]}function d(e,t,n){e in n&&(n[e]=t)}function c(e,t,n){var r=void 0,i=e.__dashjs_factory_name,a=t[i];if(a){var o=a.instance;if(!a.override)return o.apply({context:t,factory:u},n);for(var s in r=e.apply({context:t},n),o=o.apply({context:t,factory:u,parent:r},n))r.hasOwnProperty(s)&&(r[s]=o[s])}else r=e.apply({context:t},n);return r.getClassName=function(){return i},r}n.default=o,t.exports=n.default},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getVersionString=function(){return r};var r="2.9.3"},{}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(51);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,this.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_MANIFEST="manifest",this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_CONTENT="content",this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_INITIALIZATION="initialization",this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.DOWNLOAD_ERROR_ID_XLINK="xlink",this.MANIFEST_ERROR_ID_CODEC_CODE=30,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="buffer is not defined",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : "}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{51:51}],51:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.BYTES_APPENDED="bytesAppended",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.DATA_UPDATE_STARTED="dataUpdateStarted",this.INITIALIZATION_LOADED="initializationLoaded",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_REQUESTED="initRequested",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.REPRESENTATION_UPDATED="representationUpdated",this.SEGMENTS_LOADED="segmentsLoaded",this.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_COMPLETED="streamCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIMED_TEXT_REQUESTED="timedTextRequested",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}n.default=a,t.exports=n.default},{54:54}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(52);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).apply(this,arguments)}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{52:52}],54:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],55:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var C=r(e(101)),h=r(e(60)),i=r(e(224)),a=r(e(222)),p=r(e(225)),g=r(e(221)),m=r(e(83)),o=r(e(48)),y=r(e(2)),v=e(208);function s(){var e,_=void 0,b=void 0,T=void 0,l=void 0;function s(e,t){return t&&e?t.getRepresentationForQuality(e.quality):null}function u(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&T[e.streamInfo.id]?T[e.streamInfo.id][e.index]:null}function E(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e.id===i.id)return i}return null}function r(e){var t=new i.default,n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],r=_.getRepresentationFor(e.index,n);return t.id=e.id,t.quality=e.index,t.bandwidth=_.getBandwidth(r),t.DVRWindow=e.segmentAvailabilityRange,t.fragmentDuration=e.segmentDuration||(e.segments&&0<e.segments.length?e.segments[0].duration:NaN),t.MSETimeOffset=e.MSETimeOffset,t.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,t.mediaInfo=S(e.adaptation),t}function S(e){var t,r=new a.default,n=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=o(e.period),r.representationCount=_.getRepresentationCount(n),r.labels=_.getLabelsForAdaptation(n),r.lang=_.getLanguageForAdaptation(n),t=_.getViewpointForAdaptation(n),r.viewpoint=t?t.value:void 0,r.accessibility=_.getAccessibilityForAdaptation(n).map(function(e){var t=e.value,n=t;return e.schemeIdUri&&0<=e.schemeIdUri.search("cea-608")&&void 0!==y.default&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n}),r.audioChannelConfiguration=_.getAudioChannelConfigurationForAdaptation(n).map(function(e){return e.value}),r.roles=_.getRolesForAdaptation(n).map(function(e){return e.value}),r.codec=_.getCodec(n),r.mimeType=_.getMimeType(n),r.contentProtection=_.getContentProtectionData(n),r.bitrateList=_.getBitrateListForAdaptation(n),r.contentProtection&&r.contentProtection.forEach(function(e){e.KID=_.getKID(e)}),r.isText=_.getIsTextTrack(r.mimeType),r}function w(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=C.default.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function o(e){var t=new p.default;return t.id=e.id,t.index=e.index,t.start=e.start,t.duration=e.duration,t.manifestInfo=function(e){var t=new g.default;return t.DVRWindowSize=e.timeShiftBufferDepth,t.loadedTime=e.manifest.loadedTime,t.availableFrom=e.availabilityStartTime,t.minBufferTime=e.manifest.minBufferTime,t.maxFragmentDuration=e.maxSegmentDuration,t.duration=_.getDuration(e.manifest),t.isDynamic=_.getIsDynamic(e.manifest),t}(e.mpd),t.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(t.start+t.duration-t.manifestInfo.duration)<1,t}function d(e,t,n,r){var i,a=_.getAdaptationsForType(e,t,n);if(!a||0===a.length)return null;if(1<a.length&&r){var o=c(r,n);if(l[r.id]&&l[r.id][n])for(var s=0,u=a.length;s<u;s++)if(l[r.id][n].isMediaInfoEqual(o[s]))return a[s];for(s=0,u=a.length;s<u;s++)if(i=a[s],_.getRolesForAdaptation(i).filter(function(e){return e.value===h.default.MAIN})[0])return a[s]}return a[0]}function c(e,t,n){var r,i=b,a=n,o=[],s=void 0,u=void 0,l=void 0,d=void 0,c=void 0;if(a){A();var f=_.getMpd(a);i=_.getRegularPeriods(f)}else{if(!(0<b.length))return o;a=b[0].mpd.manifest}var h=E(e,i),p=h.id,g=_.getAdaptationsForType(a,e.index,t!==C.default.EMBEDDED_TEXT?t:C.default.VIDEO);if(!g)return o;for(T[p]=T[p]||_.getAdaptationsForPeriod(h),d=0,r=g.length;d<r;d++)if(s=g[d],l=_.getIndexForAdaptation(s,a,e.index),u=S(T[p][l]),t===C.default.EMBEDDED_TEXT){var m=u.accessibility.length;for(c=0;c<m;c++)if(u){var y=u.accessibility[c];if(0===y.indexOf("cea-608:")){var v=y.substring(8).split(";");if("CC"===v[0].substring(0,2))for(c=0;c<v.length;c++)w(u=u||S.call(this,T[p][l]),v[c].substring(0,3),v[c].substring(4)),o.push(u),u=null;else for(c=0;c<v.length;c++)w(u=u||S.call(this,T[p][l]),"CC"+(c+1),v[c]),o.push(u),u=null}else 0===y.indexOf("cea-608")&&(w(u,C.default.CC1,"eng"),o.push(u),u=null)}}else t===C.default.IMAGE?(u.type=C.default.IMAGE,o.push(u),u=null):u&&o.push(u);return o}function A(){if(!_||!_.hasOwnProperty("getMpd")||!_.hasOwnProperty("getRegularPeriods"))throw new Error("setConfig function has to be called previously")}function f(e){if(!(e&&e.hasOwnProperty("getRepresentationController")&&e.hasOwnProperty("getIndexHandler")&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getType")&&e.hasOwnProperty("getStreamInfo")))throw new Error("streamProcessor parameter is missing or malformed!")}function t(){b=[],T={},l={}}return e={convertDataToRepresentationInfo:r,getDataForMedia:u,getStreamsInfo:function(e,t){var n=[],r=b;if(e){A();var i=_.getMpd(e);r=_.getRegularPeriods(i)}t=t||r.length;for(var a=0;a<t;a++)n.push(o(r[a]));return n},getMediaInfoForType:function(e,t){if(0===b.length)return null;var n=b[0].mpd.manifest,r=d(n,e.index,t,e);if(!r)return null;var i=E(e,b),a=i.id,o=_.getIndexForAdaptation(r,n,e.index);return T[a]=T[a]||_.getAdaptationsForPeriod(i),S(T[a][o])},getAllMediaInfoForType:c,getRepresentationInfo:function(e,t){!function(e){if(!e||!e.hasOwnProperty("getRepresentationForQuality")||!e.hasOwnProperty("getCurrentRepresentation"))throw new Error("representationController parameter is missing or malformed!")}(e);var n=void 0;return(n=void 0!==t?((0,v.checkInteger)(t),e.getRepresentationForQuality(t)):e.getCurrentRepresentation())?r(n):null},getAdaptationForType:d,updateData:function(e){f(e);var t,n=E(e.getStreamInfo(),b),r=e.getMediaInfo(),i=u(r),a=e.getType(),o=void 0;t=r?r.id:null,0<b.length&&(o=t?_.getAdaptationForId(t,b[0].mpd.manifest,n.index):_.getAdaptationForIndex(r.index,b[0].mpd.manifest,n.index),e.getRepresentationController().updateData(o,i,a))},getInitRequest:function(e,t){var n,r=void 0,i=void 0;return f(e),(0,v.checkInteger)(t),r=e.getRepresentationController(),i=e.getIndexHandler(),n=r?r.getRepresentationForQuality(t):null,i?i.getInitRequest(n):null},getFragmentRequest:function(e,t,n,r){var i,a=void 0,o=null;return f(e),i=s(t,e.getRepresentationController()),(a=e.getIndexHandler())&&(o=void 0!==n&&void 0!==r?a.getSegmentRequestForTime(i,n,r):a.getNextSegmentRequest(i)),o},getIndexHandlerTime:function(e){f(e);var t=e.getIndexHandler();return t?t.getCurrentTime():NaN},setIndexHandlerTime:function(e,t){f(e);var n=e.getIndexHandler();n&&n.setCurrentTime(t)},getEventsFor:function(e,t){var n=[];if(0===b.length)return n;var r=b[0].mpd.manifest;return e instanceof p.default?n=_.getEventsForPeriod(E(e,b)):e instanceof a.default?n=_.getEventStreamForAdaptationSet(r,u(e)):e instanceof i.default&&(n=_.getEventStreamForRepresentation(r,s(e,t.getRepresentationController()))),n},getEvent:function(e,t,n){if(!e||!t)return null;var r=new m.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,u=e.event_duration,l=e.id,d=e.message_data,c=n*o+s;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=u,r.id=l,r.presentationTime=c,r.messageData=d,r.presentationTimeDelta=s,r):null},setConfig:function(e){e&&e.dashManifestModel&&(_=e.dashManifestModel)},updatePeriods:function(e){if(!e)return null;A();var t=_.getMpd(e);b=_.getRegularPeriods(t),T={}},reset:t,resetIndexHandler:function(e){f(e);var t=e.getIndexHandler();t&&t.resetIndex()},setCurrentMediaInfo:function(e,t,n){l[e]=l[e]||{},l[e][t]=l[e][t]||{},l[e][t]=n}},t(),e}s.__dashjs_factory_name="DashAdapter",n.default=o.default.getSingletonFactory(s),t.exports=n.default},{101:101,2:2,208:208,221:221,222:222,224:224,225:225,48:48,60:60,83:83}],56:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var P=r(e(101)),L=r(e(60)),x=r(e(217)),N=r(e(215)),F=e(235),B=r(e(53)),U=r(e(47)),j=r(e(50)),i=r(e(48)),G=r(e(46)),H=r(e(210)),q=r(e(87)),V=e(77),K=r(e(76)),Y=r(e(58)),W=r(e(59));function a(t){t=t||{};var e,n=this.context,l=(0,U.default)(n).getInstance(),o=(0,H.default)(n).getInstance(),a=void 0,d=t.timelineConverter,i=t.dashMetrics,s=t.metricsModel,c=t.mediaPlayerModel,r=t.errHandler,u=t.baseURLController,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0;function _(){return y?y.getType():null}function b(){var e=y?y.getStreamInfo():null;return e?e.manifestInfo.isDynamic:null}function T(){return y?y.getMediaInfo():null}function E(){p=-1}function S(){E(),m=0,v=y=g=null}function w(e,t,n){var r=u.resolve(n.path),i=void 0,a=void 0;return r&&t!==r.url&&o.isRelative(t)?(i=r.url,a=r.serviceLocation,t&&(i=o.resolve(t,i))):i=t,!o.isRelative(i)&&(e.url=i,e.serviceLocation=a,!0)}function A(e){var t=!1,n=b();if(n||p!==e.availableSegmentsNumber){var r=(0,V.getSegmentByIndex)(p,e);if(r){var i=parseFloat((r.presentationStartTime-e.adaptation.period.start).toFixed(5)),a=e.adaptation.period.duration;h.debug(e.segmentInfoType+": "+i+" / "+a),t=(e.segmentInfoType!==L.default.SEGMENT_TIMELINE||!n)&&a<=i}else h.debug("isMediaFinished - no segment found")}else t=!0;return t}function C(e){v.getSegments(e,g,p,R)}function R(e,t){if((e.segments=t)&&0<t.length&&b()){var n=t[t.length-1].presentationStartTime,r=s.getMetricsFor(P.default.STREAM);d.setExpectedLiveEdge(n),s.updateManifestUpdateInfo(i.getCurrentManifestUpdate(r),{presentationStartTime:n})}}function I(e){if(!e)throw new Error("no representation");e.segments=null,C(e)}function M(e,t,n){var r=t.segments,i=r?r.length:null,a=-1,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0;if(r&&0<i)for(n=null==n?c.getSegmentOverlapToleranceTime():n,d=0;d<i;d++)if(u=(s=r[d]).presentationStartTime,l=s.duration,u<=e+(o=null==n?l/2:n)&&e-o<u+l){a=s.availabilityIdx;break}return a}function O(e){if(null==e)return null;var t=new x.default,n=e.representation,r=n.adaptation.period.mpd.manifest.Period_asArray[n.adaptation.period.index].AdaptationSet_asArray[n.adaptation.index].Representation_asArray[n.index].bandwidth,i=e.media;return i=(0,V.replaceTokenForTemplate)(i,"Number",e.replacementNumber),i=(0,V.replaceTokenForTemplate)(i,"Time",e.replacementTime),i=(0,V.replaceTokenForTemplate)(i,"Bandwidth",r),i=(0,V.replaceIDForTemplate)(i,n.id),i=(0,V.unescapeDollarsInTemplate)(i),t.mediaType=_(),t.type=F.HTTPRequest.MEDIA_SEGMENT_TYPE,t.range=e.mediaRange,t.startTime=e.presentationStartTime,t.duration=e.duration,t.timescale=n.timescale,t.availabilityStartTime=e.availabilityStartTime,t.availabilityEndTime=e.availabilityEndTime,t.wallStartTime=e.wallStartTime,t.quality=n.index,t.index=e.availabilityIdx,t.mediaInfo=T(),t.adaptationIndex=n.adaptation.index,t.representationId=n.id,w(t,i,n)?t:void 0}function D(e){var t=e.representation;t.segments&&l.trigger(B.default.REPRESENTATION_UPDATED,{sender:this,representation:t})}function k(e){if(!e.error&&_()===e.mediaType){var t,n=e.segments,r=e.representation,i=[],a=0,o=void 0,s=void 0,u=void 0;for(o=0,t=n.length;o<t;o++)s=n[o],u=(0,V.getTimeBasedSegment)(d,b(),r,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,a),i.push(u),u=null,a++;r.segmentAvailabilityRange={start:i[0].presentationStartTime,end:i[t-1].presentationStartTime},r.availableSegmentsNumber=t,R(r,i),q.default.hasInitialization(r)&&l.trigger(B.default.REPRESENTATION_UPDATED,{sender:this,representation:r})}}return f={initialize:function(e){y=e,a.initialize(),v=(0,K.default)(n).create(t,b())},getStreamProcessor:function(){return y},getInitRequest:function(e){return e?function(e,t){var n=new x.default,r=e.adaptation.period,i=r.start,a=b();if(n.mediaType=t,n.type=F.HTTPRequest.INIT_SEGMENT_TYPE,n.range=e.range,n.availabilityStartTime=d.calcAvailabilityStartTimeFromPresentationTime(i,r.mpd,a),n.availabilityEndTime=d.calcAvailabilityEndTimeFromPresentationTime(i+r.duration,r.mpd,a),n.quality=e.index,n.mediaInfo=T(),n.representationId=e.id,w(n,e.initialization,e))return n}(e,_()):null},getSegmentRequestForTime:function(e,t,n){var r=void 0;if(!e)return null;var i=_(),a=p,o=!!n&&n.keepIdx,s=n?n.timeThreshold:null,u=!(!n||!n.ignoreIsFinished);return g!==t&&(g=t,h.debug("Getting the request for "+i+" time : "+t)),C(e),(p=M(t,e,s))<0&&(C(e),p=M(t,e,s)),0<=p&&h.debug("Index for "+i+" time "+t+" is "+p),!u&&A(e)?((r=new x.default).action=x.default.ACTION_COMPLETE,r.index=p,r.mediaType=i,r.mediaInfo=T(),h.debug("Signal complete in getSegmentRequestForTime -",i)):r=O((0,V.getSegmentByIndex)(p,e)),o&&0<=a&&(p=e.segmentInfoType===L.default.SEGMENT_TIMELINE&&b()?p:a),r},getNextSegmentRequest:function(e){var t=void 0,n=void 0;if(!e||-1===p)return null;var r=_(),i=b();return g=null,p++,h.debug("Getting the next request at index: "+p+", type: "+r),!(0,V.getSegmentByIndex)(p,e)&&i?(h.debug("No segment found at index: "+p+". Wait for next loop"),C(e),p--,null):(A(e)?((t=new x.default).action=x.default.ACTION_COMPLETE,t.index=p,t.mediaType=r,t.mediaInfo=T(),h.debug("Signal complete -",r)):(C(e),t=O(n=(0,V.getSegmentByIndex)(p,e)),!n&&i&&p--),t)},updateRepresentation:function(e,t){var n=q.default.hasInitialization(e),r=q.default.hasSegments(e),i=void 0;if(e.segmentDuration||e.segments||I(e),e.segmentAvailabilityRange=d.calcSegmentAvailabilityRange(e,b()),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)return i=new N.default(j.default.SEGMENTS_UNAVAILABLE_ERROR_CODE,j.default.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end}),void l.trigger(B.default.REPRESENTATION_UPDATED,{sender:this,representation:e,error:i});t||E(),e.segmentDuration&&I(e),n||a.loadInitialization(e),r||a.loadSegments(e,_(),e.indexRange),n&&r&&l.trigger(B.default.REPRESENTATION_UPDATED,{sender:this,representation:e})},updateSegmentList:I,setCurrentTime:function(e){m=e},getCurrentTime:function(){return m},reset:function(){S(),l.off(B.default.INITIALIZATION_LOADED,D,f),l.off(B.default.SEGMENTS_LOADED,k,f)},resetIndex:E},h=(0,G.default)(n).getInstance().getLogger(f),S(),(e=t.mimeType,a="webm"===e.split("/")[1].toLowerCase()?(0,W.default)(n).getInstance():(0,Y.default)(n).getInstance()).setConfig({baseURLController:u,metricsModel:s,mediaPlayerModel:c,errHandler:r}),l.on(B.default.INITIALIZATION_LOADED,D,f),l.on(B.default.SEGMENTS_LOADED,k,f),f}a.__dashjs_factory_name="DashHandler",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,210:210,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,58:58,59:59,60:60,76:76,77:77,87:87}],57:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=e(235),i=r(e(48)),c=r(e(102)),f=r(e(75));function a(e){var u=(e=e||{}).dashManifestModel,n=e.manifestModel;function r(e){var t=n.getValue();return t?t.Period_asArray[e]:-1}function i(e){return t(e,c.default.BUFFER_LEVEL)}function a(e){if(!e)return null;var t=e.HttpList,n=null,r=void 0;if(!t||t.length<=0)return null;for(r=t.length-1;0<=r;){if(t[r].responsecode){n=t[r];break}r--}return n}function o(e){return e&&e.HttpList?e.HttpList:[]}function t(e,t){if(!e)return null;var n=e[t];return!n||n.length<=0?null:n[n.length-1]}function s(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");0<o&&(t[a.substring(0,o)]=a.substring(o+2))}return t}function l(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return{getBandwidthForRepresentation:function(e,t){var n;return null===(n=l(r(t),e))?null:n.bandwidth},getIndexForRepresentation:function(e,t){return function(e,t){var n=l(e,t,!0);return null===n?-1:n}(r(t),e)},getMaxIndexForBufferType:function(e,t){return function(e,t){var n,r=void 0,i=void 0,a=void 0;if(!e||!t)return-1;for(n=e.AdaptationSet_asArray,a=0;a<n.length;a+=1)if(r=n[a],i=r.Representation_asArray,o=r,s=t,u.getIsTypeOf(o,s))return i.length;var o,s;return-1}(r(t),e)},getCurrentRepresentationSwitch:function(e){return t(e,c.default.TRACK_SWITCH)},getLatestBufferLevelVO:i,getCurrentBufferLevel:function(e){var t=i(e);return t?f.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:a,getHttpRequests:o,getCurrentDroppedFrames:function(e){return t(e,c.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return t(e,c.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return t(e,c.default.DVR_INFO)},getCurrentManifestUpdate:function(e){return t(e,c.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=a(e);return r&&(n=s(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e,t){var n,r={},i=void 0,a=void 0;for(a=(n=o(e)).length-1;0<=a;a--)if((i=n[a]).type===d.HTTPRequest.MPD_TYPE){r=s(i._responseHeaders);break}return void 0===r[t]?null:r[t]},getRequestsQueue:function(e){return e?e.RequestsQueue:null}}}a.__dashjs_factory_name="DashMetrics",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{102:102,235:235,48:48,75:75}],58:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(207)),T=r(e(88)),l=r(e(215)),d=r(e(53)),c=r(e(47)),f=r(e(197)),i=r(e(48)),h=r(e(46)),p=e(235),E=r(e(217)),S=r(e(148)),w=r(e(50));function a(){var e=this.context,s=(0,c.default)(e).getInstance(),t=void 0,g=void 0,n=void 0,m=void 0,r=void 0,i=void 0,a=void 0,u=void 0,y=void 0;function v(){if(!y||!y.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function _(e){if(e.url){var t=new E.default;return t.type=e.init?p.HTTPRequest.INIT_SEGMENT_TYPE:p.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}}function b(e,t,n){e?s.trigger(d.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):s.trigger(d.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new l.default(w.default.SEGMENT_BASE_LOADER_ERROR_CODE,w.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return t={setConfig:function(e){e.baseURLController&&(y=e.baseURLController),e.metricsModel&&(i=e.metricsModel),e.mediaPlayerModel&&(a=e.mediaPlayerModel),e.errHandler&&(n=e.errHandler)},initialize:function(){m=(0,f.default)(e).getInstance(),r=(0,o.default)(e).getInstance(),u=(0,S.default)(e).create({errHandler:n,metricsModel:i,mediaPlayerModel:a,requestModifier:r})},loadInitialization:function t(n,e){v();var r=null,i=y.resolve(n.path),a=e||{init:!0,url:i?i.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500};g.debug("Start searching for initialization.");var o=_(a);u.load({request:o,success:function(e){a.bytesLoaded=a.range.end,(r=m.findInitRange(e))?(n.range=r,s.trigger(d.default.INITIALIZATION_LOADED,{representation:n})):(a.range.end=a.bytesLoaded+a.bytesToLoad,t(n,a))},error:function(){s.trigger(d.default.INITIALIZATION_LOADED,{representation:n})}}),g.debug("Perform init search: "+a.url)},loadSegments:function l(d,c,e,t,f){if(v(),e&&(void 0===e.start||void 0===e.end)){var n=e?e.toString().split("-"):null;e=n?{start:parseFloat(n[0]),end:parseFloat(n[1])}:null}f=f||b;var o=null,h=null,r=!!e,i=y.resolve(d.path),p={init:!1,url:i?i.url:void 0,range:r?e:{start:0,end:1500},searching:!r,bytesLoaded:t?t.bytesLoaded:0,bytesToLoad:1500},a=_(p);u.load({request:a,success:function(e){var t=p.bytesToLoad,n=e.byteLength;if(p.bytesLoaded=p.range.end-p.range.start,o=m.parse(e),(h=o.getBox("sidx"))&&h.isComplete){var u=h.references,r=void 0,i=void 0;null!=u&&0<u.length&&(r=1===u[0].reference_type),r?function(){function e(e){e?(a=a.concat(e),n<=++o&&f(a,d,c)):f(null,d,c)}g.debug("Initiate multiple SIDX load."),p.range.end=p.range.start+h.size;var t=void 0,n=void 0,r=void 0,i=void 0,a=[],o=0,s=(h.offset||p.range.start)+h.size;for(t=0,n=u.length;t<n;t++)i=(r=s)+u[t].referenced_size-1,s+=u[t].referenced_size,l(d,null,{start:r,end:i},p,e)}():(g.debug("Parsing segments from SIDX."),i=function(e,t){for(var n=e.references,r=n.length,i=e.timescale,a=e.earliest_presentation_time,o=t.range.start+e.offset+e.first_offset+e.size,s=[],u=void 0,l=void 0,d=void 0,c=void 0,f=0;f<r;f++)d=n[f].subsegment_duration,c=n[f].referenced_size,(u=new T.default).duration=d,u.startTime=a,u.timescale=i,l=o+c-1,u.mediaRange=o+"-"+l,s.push(u),a+=d,o+=c;return s}(h,p),f(i,d,c))}else{if(h)p.range.start=h.offset||p.range.start,p.range.end=p.range.start+(h.size||t);else{if(n<p.bytesLoaded)return void f(null,d,c);var a=o.getLastBox();a&&a.size?(p.range.start=a.offset+a.size,p.range.end=p.range.start+t):p.range.end+=t}l(d,c,p.range,p,f)}},error:function(){f(null,d,c)}}),g.debug("Perform SIDX load: "+p.url)},reset:function(){u.abort(),r=m=n=u=null}},g=(0,h.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="SegmentBaseLoader",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{148:148,197:197,207:207,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,88:88}],59:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var c=r(e(53)),a=r(e(47)),b=r(e(201)),o=r(e(101)),i=r(e(48)),f=r(e(46)),h=r(e(207)),T=r(e(88)),E=e(235),S=r(e(217)),w=r(e(148)),A=r(e(215)),C=r(e(50));function s(){var p=this.context,s=(0,a.default)(p).getInstance(),e=void 0,g=void 0,m=void 0,t=void 0,n=void 0,r=void 0,i=void 0,y=void 0,u=void 0;function v(e,t,n,r){var i,a,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0;for(s=[],l=0,a=(i=function(e){var t=[],n=void 0,r=void 0,i=(0,b.default)(p).create({data:e});for(i.consumeTagAndSize(m.Segment.Cues);i.moreData()&&i.consumeTagAndSize(m.Segment.Cues.CuePoint,!0);){for((n={}).CueTime=i.parseTag(m.Segment.Cues.CuePoint.CueTime),n.CueTracks=[];i.moreData()&&i.consumeTag(m.Segment.Cues.CuePoint.CueTrackPositions,!0);){var a=i.getMatroskaCodedNum(),o=i.getPos();if((r={}).Track=i.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===r.Track)throw new Error("Cue track cannot be 0");r.ClusterPosition=i.parseTag(m.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),n.CueTracks.push(r),i.setPos(o+a)}if(0===n.CueTracks.length)throw new Error("Mandatory cuetrack not found");t.push(n)}if(0===t.length)throw new Error("mandatory cuepoint not found");return t}(e)).length;l<a;l+=1)u=new T.default,o=0,o=l<i.length-1?i[l+1].CueTime-i[l].CueTime:r-i[l].CueTime,u.duration=o,u.startTime=i[l].CueTime,u.timescale=1e3,d=i[l].CueTracks[0].ClusterPosition+t,c=l<i.length-1?i[l+1].CueTracks[0].ClusterPosition+t-1:n-1,u.mediaRange=d+"-"+c,s.push(u);return g.debug("Parsed cues: "+s.length+" cues."),s}function l(){if(!u||!u.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function d(e,t,n){e?s.trigger(c.default.SEGMENTS_LOADED,{segments:e,representation:t,mediaType:n}):s.trigger(c.default.SEGMENTS_LOADED,{segments:null,representation:t,mediaType:n,error:new A.default(C.default.SEGMENT_BASE_LOADER_ERROR_CODE,C.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function _(e){var t=new S.default;return t.type=e.init?E.HTTPRequest.INIT_SEGMENT_TYPE:E.HTTPRequest.MEDIA_SEGMENT_TYPE,t.url=e.url,t.range=e.range.start+"-"+e.range.end,t}return e={setConfig:function(e){if(!(e.baseURLController&&e.metricsModel&&e.mediaPlayerModel&&e.errHandler))throw new Error(o.default.MISSING_CONFIG_ERROR);u=e.baseURLController,r=e.metricsModel,i=e.mediaPlayerModel,t=e.errHandler},initialize:function(){n=(0,h.default)(p).getInstance(),y=(0,w.default)(p).create({errHandler:t,metricsModel:r,mediaPlayerModel:i,requestModifier:n})},loadInitialization:function(e,t){l();var n=null,r=u.resolve(e.path),i=r?r.url:void 0,a=e.range.split("-"),o=t||{range:{start:parseFloat(a[0]),end:parseFloat(a[1])},request:n,url:i,init:!0};g.info("Start loading initialization."),n=_(o),y.load({request:n,success:function(){s.trigger(c.default.INITIALIZATION_LOADED,{representation:e})},error:function(){s.trigger(c.default.INITIALIZATION_LOADED,{representation:e})}}),g.debug("Perform init load: "+o.url)},loadSegments:function(t,n,r,i){l();var e=null,a=u.resolve(t.path),o=a?a.url:void 0;i=i||d,e=_({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:e,url:o,init:!1}),g.debug("Parsing ebml header"),y.load({request:e,success:function(e){!function(e,t,n,r){var i,a=(0,b.default)(p).create({data:e}),o=void 0,s=void 0,u=n.split("-"),l=null,d={url:t,range:{start:parseFloat(u[0]),end:parseFloat(u[1])},request:l},c=void 0;for(g.debug("Parse EBML header: "+d.url),a.skipOverElement(m.EBML),a.consumeTag(m.Segment),c=a.getMatroskaCodedNum(),c+=a.getPos(),i=a.getPos();a.moreData()&&!a.consumeTagAndSize(m.Segment.Info,!0);)if(!(a.skipOverElement(m.Segment.SeekHead,!0)||a.skipOverElement(m.Segment.Tracks,!0)||a.skipOverElement(m.Segment.Cues,!0)||a.skipOverElement(m.Void,!0)))throw new Error("no valid top level element found");for(;void 0===o;){var f=a.getMatroskaCodedNum(!0),h=a.getMatroskaCodedNum();switch(f){case m.Segment.Info.Duration.tag:o=a[m.Segment.Info.Duration.parse](h);break;default:a.setPos(a.getPos()+h)}}l=_(d),y.load({request:l,success:function(e){s=v(e,i,c,o),r(s)},error:function(){g.error("Download Error: Cues "+d.url),r(null)}}),g.debug("Perform cues load: "+d.url+" bytes="+d.range.start+"-"+d.range.end)}(e,o,r,function(e){i(e,t,n)})},error:function(){i(null,t,n)}})},reset:function(){n=t=null}},g=(0,f.default)(p).getInstance().getLogger(e),m={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}s.__dashjs_factory_name="WebmSegmentBaseLoader",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{101:101,148:148,201:201,207:207,215:215,217:217,235:235,46:46,47:47,48:48,50:50,53:53,88:88}],60:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight"}}]),i);n.default=a,t.exports=n.default},{}],61:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var O=r(e(101)),D=r(e(50)),k=r(e(60)),P=r(e(215)),L=r(e(47)),x=r(e(53)),i=r(e(48)),N=r(e(87));function a(){var e=this.context,c=(0,L.default)(e).getInstance(),n=void 0,f=void 0,l=void 0,h=void 0,p=void 0,g=void 0,m=void 0,d=void 0,y=void 0,v=void 0,r=void 0,i=void 0,_=void 0,b=void 0,T=void 0,t=void 0;function E(){return h}function S(){return g}function a(){l=-1,h=!(f=null),p=[],b=_=i=r=v=y=m=null}function w(){var e=new Date,t=S(),n=1e3*y.getTime();v.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function A(){var e=T.getStreamInfo(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=i.calcSegmentAvailabilityRange(g,n);v.addDVRInfo(T.getType(),y.getTime(),t,r)}function C(e){return null==e||e>=p.length?null:p[e]}function R(e){var t=e;h=!1,c.trigger(x.default.AST_IN_FUTURE,{delay:t}),setTimeout(function(){if(!E()){h=!0,c.trigger(x.default.DATA_UPDATE_STARTED,{sender:n}),p.forEach(function(e){e.segmentAvailabilityRange=null});for(var e=0;e<p.length;e++)d.updateRepresentation(p[e],!0)}},t)}function o(e){if(e.sender.getStreamProcessor()===T&&E()){var t=e.representation,n=v.getMetricsFor(O.default.STREAM),r=v.getMetricsFor(S().adaptation.type),i=b.getCurrentManifestUpdate(n),a=!1,o=0,s=void 0,u=void 0;if(t.adaptation.period.mpd.manifest.type===k.default.DYNAMIC&&!t.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var l=t.segmentAvailabilityRange.end-t.segmentAvailabilityRange.start;o=1e3*(y.computeLiveDelay(g.segmentDuration,T.getStreamInfo().manifestInfo.DVRWindowSize)-l)}if(0<o)return A(),R(o),u=new P.default(D.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE,D.default.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE),void c.trigger(x.default.DATA_UPDATE_COMPLETED,{sender:this,data:f,currentRepresentation:g,error:u});if(i){for(var d=0;d<i.representationInfo.length;d++)if((s=i.representationInfo[d]).index===t.index&&s.mediaType===T.getType()){a=!0;break}a||v.addManifestUpdateRepresentationInfo(i,t.id,t.index,t.adaptation.period.index,T.getType(),t.presentationTimeOffset,t.startNumber,t.segmentInfoType)}!function(){for(var e=0,t=p.length;e<t;e++){var n=p[e].segmentInfoType;if(null===p[e].segmentAvailabilityRange||!N.default.hasInitialization(p[e])||(n===k.default.SEGMENT_BASE||n===k.default.BASE_URL)&&!p[e].segments)return!1}return!0}()||(h=!1,m.setPlaybackQuality(T.getType(),T.getStreamInfo(),function(e){return p.indexOf(e)}(g)),v.updateManifestUpdateInfo(i,{latency:g.segmentAvailabilityRange.end-y.getTime()}),b.getCurrentRepresentationSwitch(r)||w(),c.trigger(x.default.DATA_UPDATE_COMPLETED,{sender:this,data:f,currentRepresentation:g}))}}function s(e){e.isDynamic&&function(e){for(var t=void 0,n=0,r=p.length;n<r;n++)(t=p[n]).segmentAvailabilityRange=i.calcSegmentAvailabilityRange(t,e)}(e.isDynamic)}function u(e){e.sender.getStreamProcessor()===T&&(t.getValue().doNotUpdateDVRWindowOnBufferUpdated||A())}function I(e){if(e.mediaType===T.getType()&&T.getStreamInfo().id===e.streamInfo.id&&e.oldQuality!==e.newQuality){g=C(e.newQuality);var t=m.getThroughputHistory().getAverageThroughput(e.mediaType);isNaN(t)||r.setSavedBitrateSettings(e.mediaType,t),w()}}function M(e){if(e.newDuration){var t=S();if(t&&t.adaptation.period)t.adaptation.period.duration=e.newDuration}}return n={initialize:function(){d=T.getIndexHandler()},setConfig:function(e){e.abrController&&(m=e.abrController),e.domStorage&&(r=e.domStorage),e.metricsModel&&(v=e.metricsModel),e.dashMetrics&&(b=e.dashMetrics),e.dashManifestModel&&(_=e.dashManifestModel),e.playbackController&&(y=e.playbackController),e.timelineConverter&&(i=e.timelineConverter),e.manifestModel&&(t=e.manifestModel),e.streamProcessor&&(T=e.streamProcessor)},getData:function(){return f},getDataIndex:function(){return l},isUpdating:E,updateData:function(e,t,n){var r=T.getStreamInfo(),i=m.getTopQualityIndexFor(n,r.id),a=m.getMinAllowedIndexFor(n),o=void 0,s=null;if(h=!0,c.trigger(x.default.DATA_UPDATE_STARTED,{sender:this}),p=function(e){return l=_.getIndexForAdaptation(f,e.period.mpd.manifest,e.period.index),_.getRepresentationsForAdaptation(e)}(t),o=null!==f&&f.id==e.id||n===O.default.FRAGMENTED_TEXT?m.getQualityFor(n,r):(s=m.getThroughputHistory().getAverageThroughput(n)||m.getInitialBitrateFor(n,r),m.getQualityForBitrate(T.getMediaInfo(),s)),void 0!==a&&o<a&&(o=a),i<o&&(o=i),g=C(o),f=e,n!==O.default.VIDEO&&n!==O.default.AUDIO&&n!==O.default.FRAGMENTED_TEXT)return h=!1,void c.trigger(x.default.DATA_UPDATE_COMPLETED,{sender:this,data:f,currentRepresentation:g});for(var u=0;u<p.length;u++)d.updateRepresentation(p[u],!0)},getStreamProcessor:function(){return T},getCurrentRepresentation:S,getRepresentationForQuality:C,reset:function(){c.off(x.default.QUALITY_CHANGE_REQUESTED,I,n),c.off(x.default.REPRESENTATION_UPDATED,o,n),c.off(x.default.WALLCLOCK_TIME_UPDATED,s,n),c.off(x.default.BUFFER_LEVEL_UPDATED,u,n),c.off(x.default.MANIFEST_VALIDITY_CHANGED,M,n),a()}},a(),c.on(x.default.QUALITY_CHANGE_REQUESTED,I,n),c.on(x.default.REPRESENTATION_UPDATED,o,n),c.on(x.default.WALLCLOCK_TIME_UPDATED,s,n),c.on(x.default.BUFFER_LEVEL_UPDATED,u,n),c.on(x.default.MANIFEST_VALIDITY_CHANGED,M,n),n}a.__dashjs_factory_name="RepresentationController",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,215:215,47:47,48:48,50:50,53:53,60:60,87:87}],62:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var w=r(e(101)),A=r(e(60)),C=r(e(87)),R=r(e(81)),I=r(e(86)),i=r(e(85)),a=r(e(89)),M=r(e(83)),O=r(e(82)),D=r(e(84)),k=r(e(206)),P=r(e(210)),o=r(e(48)),L=r(e(46)),x=r(e(215)),N=r(e(50)),F=e(195);function s(e){e=e||{};var t=void 0,l=void 0,o=this.context,s=(0,P.default)(o).getInstance(),c=e.timelineConverter,d=e.errHandler,f=e.BASE64,n="urn:dvb:dash:profile:dvb-dash:2014",h=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function u(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=!1,l=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(a=e.ContentComponent_asArray),o=t!==w.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&0<e.Representation_asArray.length){var d=v(e.Representation_asArray[0]);if(d&&0<d.length&&0<=F.THUMBNAILS_SCHEME_ID_URIS.indexOf(d[0].schemeIdUri))return t===w.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(A.default.CODECS)&&(0===(s=e.Representation_asArray[0].codecs).search(w.default.STPP)||0===s.search(w.default.WVTT)))return t===w.default.FRAGMENTED_TEXT}if(a){if(1<a.length)return t===w.default.MUXED;a[0]&&a[0].contentType===t&&(l=u=!0)}if(e.hasOwnProperty(A.default.MIME_TYPE)&&(u=o.test(e.mimeType),l=!0),!l)for(n=0,r=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!l&&n<r;)(i=e.Representation_asArray[n]).hasOwnProperty(A.default.MIME_TYPE)&&(u=o.test(i.mimeType),l=!0),n++;return u}function p(e){return"text/vtt"===e||"application/ttml+xml"===e}function r(){return function(e,t){return e.bandwidth-t.bandwidth}}function g(e){return e&&void 0!==e.Representation_asArray&&null!==e.Representation_asArray&&e.Representation_asArray.sort(function(e,t){return e.bandwidth-t.bandwidth}),e}function m(e,t){return e&&e.Period_asArray&&h(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function y(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===A.default.DYNAMIC),t}function v(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map(function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}}):null}function _(e){if(e&&e.period&&h(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&h(e.index))return g(t.AdaptationSet_asArray[e.index])}}function b(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||0<=t.r}function T(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=I.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(A.default.ID)&&0<e.id.length&&"__proto__"!==e.id&&(n=e.id),n}function E(e,t){var n=[],r=void 0;if(!e)return n;for(r=0;r<e.length;r++){var i=new D.default;if(i.timescale=1,i.representation=t,!e[r].hasOwnProperty(w.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");i.schemeIdUri=e[r].schemeIdUri,e[r].hasOwnProperty(A.default.TIMESCALE)&&(i.timescale=e[r].timescale),e[r].hasOwnProperty(A.default.VALUE)&&(i.value=e[r].value),n.push(i)}return n}function S(r){var i=[],e=r.BaseURL_asArray||[r.baseUri],a=!1;return e.some(function(e){if(e){var t=new O.default,n=e.__text||e;return s.isRelative(n)&&(a=!0,r.baseUri&&(n=s.resolve(n,r.baseUri))),t.url=n,e.hasOwnProperty(A.default.SERVICE_LOCATION)&&e.serviceLocation.length?t.serviceLocation=e.serviceLocation:t.serviceLocation=n,e.hasOwnProperty(A.default.DVB_PRIORITY)&&(t.dvb_priority=e[A.default.DVB_PRIORITY]),e.hasOwnProperty(A.default.DVB_WEIGHT)&&(t.dvb_weight=e[A.default.DVB_WEIGHT]),e.hasOwnProperty(A.default.AVAILABILITY_TIME_OFFSET)&&(t.availabilityTimeOffset=e[A.default.AVAILABILITY_TIME_OFFSET]),e.hasOwnProperty(A.default.AVAILABILITY_TIME_COMPLETE)&&(t.availabilityTimeComplete="false"!==e[A.default.AVAILABILITY_TIME_COMPLETE]),i.push(t),a}}),i}return t={getIsTypeOf:u,getIsTextTrack:p,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(A.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(A.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(A.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(A.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(A.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=m(t,n);return 0<r.length&&h(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){var r=m(t,n),i=r.length;if(e)for(var a=0;a<i;a++){if((0,k.default)(o).getInstance().areEqual(r[a],e))return a}return-1},getAdaptationForId:function(e,t,n){var r,i=m(t,n),a=void 0;for(a=0,r=i.length;a<r;a++)if(i[a].hasOwnProperty(A.default.ID)&&i[a].id===e)return i[a];return null},getAdaptationsForType:function(e,t,n){var r,i=m(e,t),a=void 0,o=[];for(a=0,r=i.length;a<r;a++)u(i[a],n)&&o.push(g(i[a]));return o},getCodec:function(e,t,n){var r=null;if(e&&e.Representation_asArray&&0<e.Representation_asArray.length){var i=h(t)&&0<=t&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r},getMimeType:function(e){return e&&e.Representation_asArray&&0<e.Representation_asArray.length?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(A.default.CENC_DEFAULT_KID)?e[A.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e.Label_asArray||!e.Label_asArray.length)return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(A.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:y,getIsDVB:function(e){return function(e,t){var n=!1;return e&&e.profiles&&0<e.profiles.length&&(n=-1!==e.profiles.indexOf(t)),n}(e,n)},getDuration:function(e){return e&&e.hasOwnProperty(A.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=NaN;return e&&e.hasOwnProperty(A.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length?g(e).Representation_asArray.map(function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}):null},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&0<t.Representation_asArray.length&&h(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t=[],n=_(e),r=void 0,i=void 0;if(e&&e.period&&h(e.period.index)){var a=S(e.period.mpd.manifest);a&&(i=a[0])}if(n&&n.Representation_asArray)for(var o=0,s=n.Representation_asArray.length;o<s;++o){var u=n.Representation_asArray[o],l=new C.default;if(l.index=o,l.adaptation=e,u.hasOwnProperty(A.default.ID)&&(l.id=u.id),u.hasOwnProperty(A.default.CODECS)&&(l.codecs=u.codecs),u.hasOwnProperty(A.default.CODEC_PRIVATE_DATA)&&(l.codecPrivateData=u.codecPrivateData),u.hasOwnProperty(A.default.BANDWITH)&&(l.bandwidth=u.bandwidth),u.hasOwnProperty(A.default.WIDTH)&&(l.width=u.width),u.hasOwnProperty(A.default.HEIGHT)&&(l.height=u.height),u.hasOwnProperty(A.default.SCAN_TYPE)&&(l.scanType=u.scanType),u.hasOwnProperty(A.default.MAX_PLAYOUT_RATE)&&(l.maxPlayoutRate=u.maxPlayoutRate),u.hasOwnProperty(A.default.SEGMENT_BASE)?(r=u.SegmentBase,l.segmentInfoType=A.default.SEGMENT_BASE):u.hasOwnProperty(A.default.SEGMENT_LIST)?(r=u.SegmentList).hasOwnProperty(A.default.SEGMENT_TIMELINE)?(l.segmentInfoType=A.default.SEGMENT_TIMELINE,l.useCalculatedLiveEdgeTime=b(r.SegmentTimeline)):(l.segmentInfoType=A.default.SEGMENT_LIST,l.useCalculatedLiveEdgeTime=!0):u.hasOwnProperty(A.default.SEGMENT_TEMPLATE)?((r=u.SegmentTemplate).hasOwnProperty(A.default.SEGMENT_TIMELINE)?(l.segmentInfoType=A.default.SEGMENT_TIMELINE,l.useCalculatedLiveEdgeTime=b(r.SegmentTimeline)):l.segmentInfoType=A.default.SEGMENT_TEMPLATE,r.hasOwnProperty(A.default.INITIALIZATION_MINUS)&&(l.initialization=r.initialization.split("$Bandwidth$").join(u.bandwidth).split("$RepresentationID$").join(u.id))):l.segmentInfoType=A.default.BASE_URL,l.essentialProperties=v(u),r){if(r.hasOwnProperty(A.default.INITIALIZATION)){var d=r.Initialization;d.hasOwnProperty(A.default.SOURCE_URL)?l.initialization=d.sourceURL:d.hasOwnProperty(A.default.RANGE)&&(l.range=d.range)}else u.hasOwnProperty(A.default.MIME_TYPE)&&p(u.mimeType)&&(l.range=0);r.hasOwnProperty(A.default.TIMESCALE)&&(l.timescale=r.timescale),r.hasOwnProperty(A.default.DURATION)&&(l.segmentDuration=r.duration/l.timescale),r.hasOwnProperty(A.default.MEDIA)&&(l.media=r.media),r.hasOwnProperty(A.default.START_NUMBER)&&(l.startNumber=r.startNumber),r.hasOwnProperty(A.default.INDEX_RANGE)&&(l.indexRange=r.indexRange),r.hasOwnProperty(A.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=r.presentationTimeOffset/l.timescale),r.hasOwnProperty(A.default.AVAILABILITY_TIME_OFFSET)?l.availabilityTimeOffset=r.availabilityTimeOffset:i&&void 0!==i.availabilityTimeOffset&&(l.availabilityTimeOffset=i.availabilityTimeOffset),r.hasOwnProperty(A.default.AVAILABILITY_TIME_COMPLETE)?l.availabilityTimeComplete="false"!==r.availabilityTimeComplete:i&&void 0!==i.availabilityTimeComplete&&(l.availabilityTimeComplete=i.availabilityTimeComplete)}l.MSETimeOffset=c.calcMSETimeOffset(l),l.path=[e.period.index,e.index,o],t.push(l)}return t},getAdaptationsForPeriod:function(e){var t=e&&h(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],r=void 0,i=void 0,a=void 0;if(t&&t.AdaptationSet_asArray)for(a=0;a<t.AdaptationSet_asArray.length;a++)i=t.AdaptationSet_asArray[a],r=new R.default,i.hasOwnProperty(A.default.ID)&&(r.id=i.id),r.index=a,r.period=e,u(i,w.default.MUXED)?r.type=w.default.MUXED:u(i,w.default.AUDIO)?r.type=w.default.AUDIO:u(i,w.default.VIDEO)?r.type=w.default.VIDEO:u(i,w.default.FRAGMENTED_TEXT)?r.type=w.default.FRAGMENTED_TEXT:u(i,w.default.IMAGE)?r.type=w.default.IMAGE:r.type=w.default.TEXT,n.push(r);return n},getRegularPeriods:function(e){var t,n=!!e&&y(e.manifest),r=[],i=null,a=null,o=null,s=null,u=void 0;for(u=0,t=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;u<t;u++)(a=e.manifest.Period_asArray[u]).hasOwnProperty(A.default.START)?(s=new I.default).start=a.start:null!==i&&i.hasOwnProperty(A.default.DURATION)&&null!==o?(s=new I.default).start=parseFloat((o.start+o.duration).toFixed(5)):0!==u||n||((s=new I.default).start=0),null!==o&&isNaN(o.duration)&&(null!==s?o.duration=parseFloat((s.start-o.start).toFixed(5)):l.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==s&&(s.id=T(a,u),s.index=u,s.mpd=e,a.hasOwnProperty(A.default.DURATION)&&(s.duration=a.duration),r.push(s),i=a,o=s),s=a=null;return 0===r.length||null!==o&&isNaN(o.duration)&&(o.duration=parseFloat((function(e){var t=y(e.mpd.manifest),n=void 0;e.mpd.manifest.mediaPresentationDuration?n=e.mpd.manifest.mediaPresentationDuration:e.duration?n=e.duration:t?n=Number.POSITIVE_INFINITY:d.error(new x.default(N.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return n}(o)-o.start).toFixed(5))),r},getMpd:function(e){var t=new i.default;return e&&((t.manifest=e).hasOwnProperty(A.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):t.availabilityStartTime=new Date(e.loadedTime.getTime()),e.hasOwnProperty(A.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(A.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(A.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(w.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(A.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(A.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,r=n&&e&&h(e.index)?n[e.index].EventStream_asArray:null,i=[],a=void 0,o=void 0;if(r)for(a=0;a<r.length;a++){var s=new D.default;if(s.period=e,s.timescale=1,!r[a].hasOwnProperty(w.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(s.schemeIdUri=r[a].schemeIdUri,r[a].hasOwnProperty(A.default.TIMESCALE)&&(s.timescale=r[a].timescale),r[a].hasOwnProperty(A.default.VALUE)&&(s.value=r[a].value),o=0;r[a].Event_asArray&&o<r[a].Event_asArray.length;o++){var u=new M.default;u.presentationTime=0,u.eventStream=s,r[a].Event_asArray[o].hasOwnProperty(A.default.PRESENTATION_TIME)&&(u.presentationTime=r[a].Event_asArray[o].presentationTime),r[a].Event_asArray[o].hasOwnProperty(A.default.DURATION)&&(u.duration=r[a].Event_asArray[o].duration),r[a].Event_asArray[o].hasOwnProperty(A.default.ID)&&(u.id=r[a].Event_asArray[o].id),r[a].Event_asArray[o].Signal&&r[a].Event_asArray[o].Signal.Binary?u.messageData=f.decodeArray(r[a].Event_asArray[o].Signal.Binary):u.messageData=r[a].Event_asArray[o].messageData||r[a].Event_asArray[o].__text,i.push(u)}}return i},getEventStreamForAdaptationSet:function(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&h(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&h(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),E(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&h(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&h(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&h(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),E(n,t)},getUTCTimingSources:function(e){var t=y(e),n=!!e&&e.hasOwnProperty(A.default.AVAILABILITY_START_TIME),r=e?e.UTCTiming_asArray:null,i=[];return(t||n)&&r&&r.forEach(function(e){var t=new a.default;e.hasOwnProperty(w.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(A.default.VALUE)&&(t.value=e.value.toString(),i.push(t)))}),i},getBaseURLsFromElement:S,getRepresentationSortFunction:r,getLocation:function(e){if(e&&e.hasOwnProperty(w.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=_(e).Representation_asArray[0],n=void 0;return t.hasOwnProperty(A.default.SEGMENT_LIST)?!(n=t.SegmentList).hasOwnProperty(A.default.SEGMENT_TIMELINE)||b(n.SegmentTimeline):!(!t.hasOwnProperty(A.default.SEGMENT_TEMPLATE)||!(n=t.SegmentTemplate).hasOwnProperty(A.default.SEGMENT_TIMELINE))&&b(n.SegmentTimeline)}},l=(0,L.default)(o).getInstance().getLogger(t),t}s.__dashjs_factory_name="DashManifestModel",n.default=o.default.getSingletonFactory(s),t.exports=n.default},{101:101,195:195,206:206,210:210,215:215,46:46,48:48,50:50,60:60,81:81,82:82,83:83,84:84,85:85,86:86,87:87,89:89}],63:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),u=r(e(46)),l=r(e(73)),d=r(e(3)),c=r(e(72)),f=r(e(70)),h=r(e(69)),p=r(e(71)),g=r(e(66)),m=r(e(67));function a(){var e=this.context,t=void 0,a=void 0,n=void 0,o=void 0,s=void 0;return t={parse:function(e){var t,n=window.performance.now();if(!(t=o.xml_str2json(e)))throw new Error("parsing the manifest failed");var r=window.performance.now();s.run(t);var i=window.performance.now();return a.info("Parsing complete: ( xml2json: "+(r-n).toPrecision(3)+"ms, objectiron: "+(i-r).toPrecision(3)+"ms, total: "+((i-n)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return n},getIron:function(){return s}},a=(0,u.default)(e).getInstance().getLogger(t),n=[new f.default,new h.default,new p.default,new c.default],o=new d.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),s=(0,l.default)(e).create({adaptationset:new g.default,period:new m.default}),t}a.__dashjs_factory_name="DashParser",n.default=i.default.getClassFactory(a),t.exports=n.default},{3:3,46:46,48:48,66:66,67:67,69:69,70:70,71:71,72:72,73:73}],64:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var t;this._name=e,this._merge=(t=e)&&t.length&&t.charAt(0)===t.charAt(0).toUpperCase()}n.default=i,t.exports=n.default},{}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e(64),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),l);function l(e,t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this._name=e||"",this._properties=[],this._children=n||[],Array.isArray(t)&&t.forEach(function(e){r._properties.push(new s.default(e))})}n.default=u,t.exports=n.default},{64:64}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(65)),a=r(e(60)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[a.default.PROFILES,a.default.WIDTH,a.default.HEIGHT,a.default.SAR,a.default.FRAMERATE,a.default.AUDIO_SAMPLING_RATE,a.default.MIME_TYPE,a.default.SEGMENT_PROFILES,a.default.CODECS,a.default.MAXIMUM_SAP_PERIOD,a.default.START_WITH_SAP,a.default.MAX_PLAYOUT_RATE,a.default.CODING_DEPENDENCY,a.default.SCAN_TYPE,a.default.FRAME_PACKING,a.default.AUDIO_CHANNEL_CONFIGURATION,a.default.CONTENT_PROTECTION,a.default.ESSENTIAL_PROPERTY,a.default.SUPPLEMENTAL_PROPERTY,a.default.INBAND_EVENT_STREAM];(function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e,[new i.default(a.default.SUB_REPRESENTATION,e)])])}n.default=o,t.exports=n.default},{60:60,65:65}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(65)),a=r(e(60)),o=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,i.default),s);function s(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var e=[a.default.SEGMENT_BASE,a.default.SEGMENT_TEMPLATE,a.default.SEGMENT_LIST];(function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}})(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,a.default.PERIOD,e,[new i.default(a.default.ADAPTATION_SET,e,[new i.default(a.default.REPRESENTATION,e)])])}n.default=o,t.exports=n.default},{60:60,65:65}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),a);function a(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this._test=e,this._converter=t}n.default=i,t.exports=n.default},{}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(68),a=(r=i)&&r.__esModule?r:{default:r},o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,function(e){return o.test(e.value)},function(e){var t=o.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var r=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*60*1e3}return new Date(n)})}n.default=s,t.exports=n.default},{68:68}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(68)),a=r(e(101)),o=r(e(60)),s=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,u=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(l,i.default),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,function(e){for(var t=[o.default.MIN_BUFFER_TIME,o.default.MEDIA_PRESENTATION_DURATION,o.default.MINIMUM_UPDATE_PERIOD,o.default.TIMESHIFT_BUFFER_DEPTH,o.default.MAX_SEGMENT_DURATION,o.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,o.default.START,a.default.START_TIME,o.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return s.test(e.value);return!1},function(e){var t=s.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})}n.default=u,t.exports=n.default},{101:101,60:60,68:68}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(68),a=(r=i)&&r.__esModule?r:{default:r},o=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,a.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,function(e){return o.test(e.value)},function(e){return parseFloat(e)})}n.default=s,t.exports=n.default},{68:68}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=r(e(68)),o=r(e(60)),s=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.default),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(u.prototype),"constructor",this).call(this,function(e,t){var n,r=(a(n={},o.default.MPD,[o.default.ID,o.default.PROFILES]),a(n,o.default.PERIOD,[o.default.ID]),a(n,o.default.BASE_URL,[o.default.SERVICE_LOCATION,o.default.BYTE_RANGE]),a(n,o.default.SEGMENT_BASE,[o.default.INDEX_RANGE]),a(n,o.default.INITIALIZATION,[o.default.RANGE]),a(n,o.default.REPRESENTATION_INDEX,[o.default.RANGE]),a(n,o.default.SEGMENT_LIST,[o.default.INDEX_RANGE]),a(n,o.default.BITSTREAM_SWITCHING,[o.default.RANGE]),a(n,o.default.SEGMENT_URL,[o.default.MEDIA_RANGE,o.default.INDEX_RANGE]),a(n,o.default.SEGMENT_TEMPLATE,[o.default.INDEX_RANGE,o.default.MEDIA,o.default.INDEX,o.default.INITIALIZATION_MINUS,o.default.BITSTREAM_SWITCHING_MINUS]),a(n,o.default.ASSET_IDENTIFIER,[o.default.VALUE,o.default.ID]),a(n,o.default.EVENT_STREAM,[o.default.VALUE]),a(n,o.default.ADAPTATION_SET,[o.default.PROFILES,o.default.MIME_TYPE,o.default.SEGMENT_PROFILES,o.default.CODECS,o.default.CONTENT_TYPE]),a(n,o.default.FRAME_PACKING,[o.default.VALUE,o.default.ID]),a(n,o.default.AUDIO_CHANNEL_CONFIGURATION,[o.default.VALUE,o.default.ID]),a(n,o.default.CONTENT_PROTECTION,[o.default.VALUE,o.default.ID]),a(n,o.default.ESSENTIAL_PROPERTY,[o.default.VALUE,o.default.ID]),a(n,o.default.SUPPLEMENTAL_PROPERTY,[o.default.VALUE,o.default.ID]),a(n,o.default.INBAND_EVENT_STREAM,[o.default.VALUE,o.default.ID]),a(n,o.default.ACCESSIBILITY,[o.default.VALUE,o.default.ID]),a(n,o.default.ROLE,[o.default.VALUE,o.default.ID]),a(n,o.default.RATING,[o.default.VALUE,o.default.ID]),a(n,o.default.VIEWPOINT,[o.default.VALUE,o.default.ID]),a(n,o.default.CONTENT_COMPONENT,[o.default.CONTENT_TYPE]),a(n,o.default.REPRESENTATION,[o.default.ID,o.default.DEPENDENCY_ID,o.default.MEDIA_STREAM_STRUCTURE_ID]),a(n,o.default.SUBSET,[o.default.ID]),a(n,o.default.METRICS,[o.default.METRICS_MINUS]),a(n,o.default.REPORTING,[o.default.VALUE,o.default.ID]),n);if(r.hasOwnProperty(t)){var i=r[t];return void 0!==i&&0<=i.indexOf(e.name)}return!1},function(e){return String(e)})}n.default=s,t.exports=n.default},{60:60,68:68}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(d){function u(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function l(e,t,n){for(var r=0,i=e.length;r<i;++r){var a=e[r];if(t[a.name])if(n[a.name]){if(a.merge){var o=t[a.name],s=n[a.name];"object"==typeof o&&"object"==typeof s?u(o,s):n[a.name]=o+s}}else n[a.name]=t[a.name]}}function c(e,t){for(var n=0,r=e.children.length;n<r;++n){var i=e.children[n],a=t[i.name+"_asArray"];if(a)for(var o=0,s=a.length;o<s;++o){var u=a[o];l(e.properties,t,u),c(i,u)}}}return{run:function(e){if(null===e||"object"!=typeof e)return e;if("period"in d)for(var t=d.period,n=e.Period_asArray,r=0,i=n.length;r<i;++r){var a=n[r];if(c(t,a),"adaptationset"in d){var o=a.AdaptationSet_asArray;if(o)for(var s=d.adaptationset,u=0,l=o.length;u<l;++u)c(s,o[u])}}return e}}}o.__dashjs_factory_name="ObjectIron";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r},m=e(77);function o(e,p){var g=(e=e||{}).timelineConverter;return{getSegments:function(e,t,n,r){var i,a,o,s,u=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,l=u.SegmentURL_asArray.length,d=[],c=void 0,f=void 0,h=void 0;for(s=e.startNumber,i=(0,m.decideSegmentListRangeForTemplate)(g,p,e,t,n,r),a=Math.max(i.start,0),o=Math.min(i.end,u.SegmentURL_asArray.length-1),c=a;c<=o;c++)h=u.SegmentURL_asArray[c],(f=(0,m.getIndexBasedSegment)(g,p,e,c)).replacementTime=(s+c-1)*e.segmentDuration,f.media=h.media?h.media:"",f.mediaRange=h.mediaRange,f.index=h.index,f.indexRange=h.indexRange,d.push(f),f=null;return e.availableSegmentsNumber=l,d}}}o.__dashjs_factory_name="ListSegmentsGetter";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48,77:77}],75:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"round10",value:function(e,t){return function(e,t,n){return void 0!==n&&0!=+n?(n=+n,null===(t=+t)||isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n)))):Math[e](t)}("round",e,t)}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],76:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(60)),i=r(e(48)),a=r(e(80)),o=r(e(78)),c=r(e(74));function s(e,t){var n,r=this.context,s=void 0,u=void 0,l=void 0;return n={getSegments:function(e,t,n,r,i){var a=void 0,o=e.segmentInfoType;o!==d.default.SEGMENT_BASE&&o!==d.default.BASE_URL&&function(e,t){var n=e.segments,r=!1,i=void 0,a=void 0;r=!n||0===n.length||(a=n[0].availabilityIdx,i=n[n.length-1].availabilityIdx,t<a||i<t);return r}(e,n)?(o===d.default.SEGMENT_TIMELINE?a=s.getSegments(e,t,n,i):o===d.default.SEGMENT_TEMPLATE?a=u.getSegments(e,t,n,i):o===d.default.SEGMENT_LIST&&(a=l.getSegments(e,t,n,i)),r&&r(e,a)):a=e.segments}},s=(0,a.default)(r).create(e,t),u=(0,o.default)(r).create(e,t),l=(0,c.default)(r).create(e,t),n}s.__dashjs_factory_name="SegmentsGetter";var u=i.default.getClassFactory(s);n.default=u,t.exports=n.default},{48:48,60:60,74:74,78:78,80:80}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},n.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},n.replaceTokenForTemplate=y,n.getIndexBasedSegment=function(e,t,n,r){var i,a,o=void 0,s=void 0;s=n.segmentDuration,isNaN(s)&&(s=n.adaptation.period.duration);return i=parseFloat((n.adaptation.period.start+r*s).toFixed(5)),a=parseFloat((i+s).toFixed(5)),(o=new g.default).representation=n,o.duration=s,o.presentationStartTime=i,o.mediaStartTime=e.calcMediaTimeFromPresentationTime(o.presentationStartTime,n),o.availabilityStartTime=e.calcAvailabilityStartTimeFromPresentationTime(o.presentationStartTime,n.adaptation.period.mpd,t),o.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(a,n.adaptation.period.mpd,t),o.wallStartTime=e.calcWallTimeForSegment(o,t),o.replacementNumber=m(o,r),o.availabilityIdx=r,o},n.getTimeBasedSegment=function(e,t,n,r,i,a,o,s,u,l){var d,c,f=r/a,h=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),p=void 0;return d=e.calcPresentationTimeFromMediaTime(f,n),c=d+h,(p=new g.default).representation=n,p.duration=h,p.mediaStartTime=f,p.presentationStartTime=d,p.availabilityStartTime=n.adaptation.period.mpd.manifest.loadedTime,p.availabilityEndTime=e.calcAvailabilityEndTimeFromPresentationTime(c,n.adaptation.period.mpd,t),p.wallStartTime=e.calcWallTimeForSegment(p,t),p.replacementTime=l||r,p.replacementNumber=m(p,u),o=y(o=y(o,"Number",p.replacementNumber),"Time",p.replacementTime),p.media=o,p.mediaRange=s,p.availabilityIdx=u,p},n.getSegmentByIndex=v,n.decideSegmentListRangeForTemplate=function(e,t,n,r,i,a){var o=n.segmentDuration,s=n.adaptation.period.mpd.manifest.minBufferTime,u=n.segmentAvailabilityRange,l={start:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.start:NaN),end:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,u?u.end:NaN)},d=n.segments,c=2*o,f=a||Math.max(2*s,10*o),h=NaN,p=null,g=void 0,m=void 0;if(l.start=Math.max(l.start,0),t&&!e.isTimeSyncCompleted())return g=Math.floor(l.start/o),m=Math.floor(l.end/o),{start:g,end:m};h=d&&0<d.length?(p=v(i,n),p?e.calcPeriodRelativeTimeFromMpdRelativeTime(n,p.presentationStartTime):0<i?i*o:e.calcPeriodRelativeTimeFromMpdRelativeTime(n,r)):0<i?i*o:t?l.end:l.start;return g=Math.floor(Math.max(h-c,l.start)/o),m=Math.floor(Math.min(g+f/o,l.end/o)),{start:g,end:m}};var r,i=e(88),g=(r=i)&&r.__esModule?r:{default:r};function c(e,t){for(;e.length<t;)e="0"+e;return e}function m(e,t){return e.representation.startNumber+t}function y(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+l))<0)return e;if(r<(a=e.indexOf("%0",r+l))&&a<i)switch(o=e.charAt(i-1),s=parseInt(e.substring(a+d,i-1),10),o){case"d":case"i":case"u":u=c(n.toString(),s);break;case"x":u=c(n.toString(16),s);break;case"X":u=c(n.toString(16),s).toUpperCase();break;case"o":u=c(n.toString(8),s);break;default:return e}else u=n;e=e.substring(0,r)+u+e.substring(i+1)}}function v(e,t){if(!t||!t.segments)return null;var n=t.segments.length,r=void 0,i=void 0;if(e<n&&(r=t.segments[e])&&r.availabilityIdx===e)return r;for(i=0;i<n;i++)if((r=t.segments[i])&&r.availabilityIdx===e)return r;return null}},{88:88}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r},y=e(77);function o(e,g){var m=e.timelineConverter;return{getSegments:function(e,t,n,r){var i,a,o,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate,u=e.segmentDuration,l=e.segmentAvailabilityRange,d=[],c=null,f=null,h=void 0,p=void 0;for(o=e.startNumber,i=(h=isNaN(u)&&!g?{start:o,end:o}:(0,y.decideSegmentListRangeForTemplate)(m,g,e,t,n,r)).start,a=h.end,p=i;p<=a;p++)(f=(0,y.getIndexBasedSegment)(m,g,e,p)).replacementTime=(o+p-1)*e.segmentDuration,c=s.media,c=(0,y.replaceTokenForTemplate)(c,"Number",f.replacementNumber),c=(0,y.replaceTokenForTemplate)(c,"Time",f.replacementTime),f.media=c,d.push(f),f=null;return isNaN(u)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((l.end-l.start)/u),d}}}o.__dashjs_factory_name="TemplateSegmentsGetter";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48,77:77}],79:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var d=r(e(47)),c=r(e(53)),i=r(e(48));function a(){var e=this.context,t=(0,d.default)(e).getInstance(),i=void 0,u=void 0,n=void 0;function r(e){i=e}function a(e,t,n,r){return r?n&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:n?new Date(t.availabilityStartTime.getTime()+1e3*(e-i)):t.availabilityStartTime}function l(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*i)/1e3}function o(e){u||void 0!==e.offset&&(r(e.offset/1e3),u=!0)}function s(){i=0,u=!1,n=NaN}return{initialize:function(){s(),t.on(c.default.TIME_SYNCHRONIZATION_COMPLETED,o,this)},isTimeSyncCompleted:function(){return u},setTimeSyncCompleted:function(e){u=e},getClientTimeOffset:function(){return i},setClientTimeOffset:r,getExpectedLiveEdge:function(){return n},setExpectedLiveEdge:function(e){n=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return a.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return a.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!u&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),a=l(new Date,n),o=n.start+n.duration;r.start=Math.max(a-n.mpd.timeShiftBufferDepth,n.start);var s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return r.end=o<=a&&a-s<o?o:a-s,r},calcWallTimeForSegment:function(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},calcMSETimeOffset:function(e){var t=e.presentationTimeOffset;return e.adaptation.period.start-t},reset:function(){t.off(c.default.TIME_SYNCHRONIZATION_COMPLETED,o,this),s()}}}a.__dashjs_factory_name="TimelineConverter",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{47:47,48:48,53:53}],80:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),M=r(e(101)),O=e(77);function a(e,R){var I=(e=e||{}).timelineConverter;return{getSegments:function(i,e,t,n){if(function(){if(!I||!I.hasOwnProperty("calcMediaTimeFromPresentationTime")||!I.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(M.default.MISSING_CONFIG_ERROR)}(),!i)throw new Error("no representation");void 0===e&&(e=null);var a=i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].SegmentTemplate||i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].SegmentList,r=a.SegmentTimeline,o=a.SegmentURL_asArray,s=0<i.availableSegmentsNumber,u=void 0;function l(e,t){var n=a.media,r=e.mediaRange;return o&&(n=o[t].media||"",r=o[t].mediaRange),(0,O.getTimeBasedSegment)(I,R,i,h,e.d,A,n,r,g,e.tManifest)}u=n||(-1<t||null!==e?10:1/0);var d,c,f,h=0,p=0,g=-1,m=[],y=null,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0;for(A=i.timescale,d=r.S_asArray,f=t,null!==e&&(y=I.calcMediaTimeFromPresentationTime(e,i)),_=0,c=d.length;_<c;_++){if(T=0,(v=d[_]).hasOwnProperty("r")&&(T=v.r),v.hasOwnProperty("t")&&(p=(h=v.t)/A),T<0){if((S=d[_+1])&&S.hasOwnProperty("t"))E=S.t/A;else{var C=i.segmentAvailabilityRange?i.segmentAvailabilityRange.end:I.calcSegmentAvailabilityRange(i,R).end;E=I.calcMediaTimeFromPresentationTime(C,i),i.segmentDuration=v.d/A}T=Math.ceil((E-p)/(v.d/A))-1}if(w){if(s)break;g+=T+1}else for(b=0;b<=T;b++)if(g++,m.length>u){if(w=!0,s)break}else null!==y?p>=y-v.d/A*1.5&&m.push(l(v,g)):f<=g&&m.push(l(v,g)),p=(h+=v.d)/A}return s||(i.availableSegmentsNumber=g+1),m}}}a.__dashjs_factory_name="TimelineSegmentsGetter";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default},{101:101,48:48,77:77}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null},t.exports=n.default},{}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function i(e,t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.url=e||"",this.serviceLocation=t||e||"",this.dvb_priority=n||1,this.dvb_weight=r||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}i.DEFAULT_DVB_PRIORITY=1,i.DEFAULT_DVB_WEIGHT=1,n.default=i,t.exports=n.default},{}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN},t.exports=n.default},{}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""},t.exports=n.default},{}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN},t.exports=n.default},{}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null}r.DEFAULT_ID="defaultId",n.default=r,t.exports=n.default},{}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a,o=e(60),s=(a=o)&&a.__esModule?a:{default:a},u=(r(l,null,[{key:"hasInitialization",value:function(e){return null!==e.initialization||null!==e.range}},{key:"hasSegments",value:function(e){return e.segmentInfoType!==s.default.BASE_URL&&e.segmentInfoType!==s.default.SEGMENT_BASE&&!e.indexRange}}]),l);function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}n.default=u,t.exports=n.default},{60:60}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null},t.exports=n.default},{}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],90:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(148)),u=r(e(218)),l=r(e(215)),d=r(e(47)),c=r(e(197)),f=r(e(53)),h=r(e(50)),i=r(e(48));function a(e){e=e||{};var t,n=this.context,i=(0,d.default)(n).getInstance(),a=void 0,o=void 0;return a={checkForExistence:function(t){function e(e){i.trigger(f.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:t,exists:e})}if(t){var n=new u.default(t.url);o.load({request:n,success:function(){e(!0)},error:function(){e(!1)}})}else e(!1)},load:function(n){function r(e,t){i.trigger(f.default.LOADING_COMPLETED,{request:n,response:e||null,error:t||null,sender:a})}n?o.load({request:n,progress:function(e){i.trigger(f.default.LOADING_PROGRESS,{request:n,stream:e.stream}),e.data&&i.trigger(f.default.LOADING_DATA_PROGRESS,{request:n,response:e.data||null,error:null,sender:a})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new l.default(h.default.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&i.trigger(f.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:a})}}):r(void 0,new l.default(h.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,h.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){o&&o.abort()},reset:function(){o&&(o.abort(),o=null)}},t=(0,c.default)(n).getInstance(),o=(0,s.default)(n).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:t,useFetch:e.mediaPlayerModel.getLowLatencyEnabled()}),a}a.__dashjs_factory_name="FragmentLoader",n.default=i.default.getClassFactory(a),t.exports=n.default},{148:148,197:197,215:215,218:218,47:47,48:48,50:50,53:53}],91:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(101)),a=r(e(116)),o=r(e(148)),g=r(e(210)),m=r(e(226)),y=r(e(215)),v=e(235),_=r(e(47)),b=r(e(53)),T=r(e(50)),i=r(e(48)),E=r(e(63)),S=r(e(46));function s(e){e=e||{};var s=this.context,u=(0,_.default)(s).getInstance(),l=(0,g.default)(s).getInstance(),t=void 0,d=void 0,n=void 0,c=void 0,f=void 0,h=e.mssHandler,r=e.errHandler;function i(e){u.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(o){var e=new m.default(o,v.HTTPRequest.MPD_TYPE);n.load({request:e,success:function(e,t,n){if(c){var r=void 0,i=void 0,a=void 0;if(n&&n!==o?(i=l.parseBaseUrl(n),r=n):(l.isRelative(o)&&(o=l.resolve(o,window.location.href)),i=l.parseBaseUrl(o)),null===f&&(f=function(e){var t=null;return-1<e.indexOf("SmoothStreamingMedia")?(h&&(t=h.createMssParser(),h.registerEvents()),t):-1<e.indexOf("MPD")?(0,E.default)(s).create():t}(e)),null!==f){c.setMatchers(f.getMatchers()),c.setIron(f.getIron());try{a=f.parse(e)}catch(e){return void u.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)})}a?(a.url=r||o,a.originalUrl||(a.originalUrl=a.url),a.hasOwnProperty(p.default.LOCATION)&&(i=l.parseBaseUrl(a.Location_asArray[0]),d.debug("BaseURI set by Location to: "+i)),a.baseUri=i,a.loadedTime=new Date,c.resolveManifestOnLoad(a)):u.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)})}else u.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+o)})}},error:function(e,t,n){u.trigger(b.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new y.default(T.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,T.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(o+", ")+n)})}})},reset:function(){u.off(b.default.XLINK_READY,i,t),c&&(c.reset(),c=null),n&&(n.abort(),n=null),h&&h.reset()}},d=(0,S.default)(s).getInstance().getLogger(t),u.on(b.default.XLINK_READY,i,t),n=(0,o.default)(s).create({errHandler:r,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),c=(0,a.default)(s).create({errHandler:r,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),f=null,t}s.__dashjs_factory_name="ManifestLoader";var u=i.default.getClassFactory(s);n.default=u,t.exports=n.default},{101:101,116:116,148:148,210:210,215:215,226:226,235:235,46:46,47:47,48:48,50:50,53:53,63:63}],92:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(47)),w=r(e(53)),i=r(e(48)),A=r(e(46)),C=r(e(50));function a(){var e=this.context,r=(0,S.default)(e).getInstance(),t=void 0,i=void 0,a=void 0,n=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0;function h(){a=NaN,o=!(s=!1),p()}function p(){null!==n&&(clearInterval(n),n=null)}function g(e){p(),isNaN(e)&&!isNaN(a)&&(e=1e3*a),isNaN(e)||(i.debug("Refresh manifest in "+e+" milliseconds."),n=setTimeout(v,e))}function m(){s=!0;var e=l.getValue(),t=e.url,n=d.getLocation(e);n&&(t=n),u.load(t)}function y(e){l.setValue(e);var t=new Date,n=(t.getTime()-e.loadedTime.getTime())/1e3;2147483647<1e3*(a=d.getManifestUpdatePeriod(e,n))&&(a=2147483.647),r.trigger(w.default.MANIFEST_UPDATED,{manifest:e}),i.info("Manifest has been refreshed at "+t+"["+t.getTime()/1e3+"] "),o||g()}function v(){o&&!f.getScheduleWhilePaused()||(s?g(f.getManifestUpdateRetryInterval()):m())}function _(e){e.error?e.error.code===C.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&c.error(e.error):y(e.manifest)}function b(){o=!1,g()}function T(){o=!0,p()}function E(){s=!1}return t={initialize:function(){h(),r.on(w.default.STREAMS_COMPOSED,E,this),r.on(w.default.PLAYBACK_STARTED,b,this),r.on(w.default.PLAYBACK_PAUSED,T,this),r.on(w.default.INTERNAL_MANIFEST_LOADED,_,this)},setManifest:function(e){y(e)},refreshManifest:m,setConfig:function(e){e&&(e.manifestModel&&(l=e.manifestModel),e.dashManifestModel&&(d=e.dashManifestModel),e.mediaPlayerModel&&(f=e.mediaPlayerModel),e.manifestLoader&&(u=e.manifestLoader),e.errHandler&&(c=e.errHandler))},reset:function(){r.off(w.default.PLAYBACK_STARTED,b,this),r.off(w.default.PLAYBACK_PAUSED,T,this),r.off(w.default.STREAMS_COMPOSED,E,this),r.off(w.default.INTERNAL_MANIFEST_LOADED,_,this),h()}},i=(0,A.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="ManifestUpdater",n.default=i.default.getClassFactory(a),t.exports=n.default},{46:46,47:47,48:48,50:50,53:53}],93:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(101)),oe=r(e(102)),se=r(e(112)),ue=r(e(114)),le=r(e(110)),de=r(e(105)),ce=r(e(91)),fe=r(e(202)),he=r(e(198)),pe=r(e(193)),ge=r(e(207)),me=r(e(191)),ye=r(e(145)),ve=r(e(142)),_e=r(e(143)),be=r(e(144)),Te=r(e(104)),Ee=r(e(146)),Se=r(e(200)),we=r(e(46)),Ae=r(e(50)),Ce=r(e(47)),Re=r(e(53)),Ie=r(e(94)),Me=r(e(48)),Oe=e(49),De=r(e(55)),ke=r(e(62)),Pe=r(e(57)),Le=r(e(79)),xe=e(235),Ne=r(e(1)),Fe=r(e(6)),Be=r(e(215)),Ue=e(208);function i(){var i="You must first call initialize() and set a source before calling this method",r="You must first call initialize() and set a valid source and view before calling this method",t="You must first call attachView() to set the video element before calling this method",e="You must first call attachSource() with a valid source before calling this method",n="MediaPlayer not initialized!",a="Playback minimum drift has an invalid value! Use a number from 0 to 0.5",o="Playback maximum drift has an invalid value! Use a number greater or equal to 0",s=this.context,u=(0,Ce.default)(s).getInstance(),l=(0,we.default)(s).getInstance(),d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,D=void 0,k=void 0,P=void 0,L=void 0,x=void 0,N=void 0,F=void 0;function B(){return!!f&&!!L.getElement()}function U(){return(0,Oe.getVersionString)()}function j(){if(!m)throw r;return O.isPaused()}function G(e){var t=ne();if(!t)return 0;var n=O.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function H(e){if(!m)throw r;var t=z().currentTime;if(void 0!==e)t=M.getTimeRelativeToStreamId(t,e);else if(O.getIsDynamic()){var n=ne();t=null===n?0:q()-(n.range.end-n.time)}return t}function q(){if(!m)throw r;var e=z().duration;if(O.getIsDynamic()){var t,n=ne();if(!n)return 0;e=(t=n.range.end-n.range.start)<n.manifestInfo.DVRWindowSize?t:n.manifestInfo.DVRWindowSize}return e}function V(e){(0,Ue.checkParameterType)(e,"boolean"),y=e}function K(){C.restoreDefaultUTCTimingSources()}function Y(){return D}function W(e){return A.getReadOnlyMetricsFor(e)}function z(){if(!L.getElement())throw t;return L.getElement()}function X(e){if(!p)throw n;L.setElement(e),e&&(te(),function(){if(E)return;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(s).create();E=t.createMetricsReporting({debug:l,eventBus:u,mediaElement:z(),dashManifestModel:k,metricsModel:A,events:Re.default,constants:ae.default,metricsConstants:oe.default})}}(),function(){if(S)return;var e=dashjs.MssHandler;"function"==typeof e&&(Ae.default.extend(e.errors),S=e(s).create({eventBus:u,mediaPlayerModel:C,metricsModel:A,manifestModel:P,playbackController:O,protectionController:T,baseURLController:(0,de.default)(s).getInstance(),errHandler:R,events:Re.default,constants:ae.default,debug:l,initSegmentType:xe.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Ne.default,ISOBoxer:Fe.default}))}(),M&&M.switchToVideoElement()),m&&Z(),ie()}function Q(e){if(!g)throw i;var t=M.getActiveStreamInfo();return b.getTracksFor(e,t)}function $(e){if(!p)throw n;"string"==typeof e&&N.initialize(e),f=e,(g||m)&&Z(),B()&&ie()}function J(){if(!g)throw i;var e=M.getActiveStreamInfo();return e?M.getStreamById(e.id):null}function Z(){g=m=!1,w.reset(),M.reset(),O.reset(),v.reset(),b.reset(),x.reset(),T&&(C.getKeepProtectionMediaKeys()?T.stop():(T.reset(),T=null,te()))}function ee(){return(0,ce.default)(s).create({errHandler:R,metricsModel:A,mediaPlayerModel:C,requestModifier:(0,ge.default)(s).getInstance(),mssHandler:S})}function te(){if(T)return T;var e=dashjs.Protection;if("function"!=typeof e)return null;var t=e(s).create();return Re.default.extend(e.events),Ie.default.extend(e.events,{publicOnly:!0}),Ae.default.extend(e.errors),I=I||(0,he.default)(s).getInstance(),T=t.createProtectionSystem({debug:l,errHandler:R,videoModel:L,capabilities:I,eventBus:u,events:Re.default,BASE64:Ne.default,constants:ae.default})}function ne(){var e=A.getReadOnlyMetricsFor(ae.default.VIDEO)||A.getReadOnlyMetricsFor(ae.default.AUDIO);return D.getCurrentDVRInfo(e)}function re(e){var t=ne();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function ie(){!g&&f&&(g=!0,c.info("Streaming Initialized"),function(){var e=ee();M=M||(0,ue.default)(s).getInstance(),b.setConfig({domStorage:F}),M.setConfig({capabilities:I,manifestLoader:e,manifestModel:P,dashManifestModel:k,mediaPlayerModel:C,protectionController:T,adapter:w,metricsModel:A,dashMetrics:D,errHandler:R,timelineConverter:_,videoModel:L,playbackController:O,domStorage:F,abrController:v,mediaController:b,textController:x}),O.setConfig({streamController:M,metricsModel:A,dashMetrics:D,manifestModel:P,mediaPlayerModel:C,dashManifestModel:k,adapter:w,videoModel:L,timelineConverter:_,uriFragmentModel:N}),v.setConfig({streamController:M,domStorage:F,mediaPlayerModel:C,metricsModel:A,dashMetrics:D,manifestModel:P,videoModel:L,adapter:w}),v.createAbrRulesCollection(),x.setConfig({errHandler:R,manifestModel:P,dashManifestModel:k,mediaController:b,streamController:M,videoModel:L}),M.initialize(y,h)}(),"string"==typeof f?M.load(f):M.loadWithManifest(f)),!m&&B()&&(m=!0,c.info("Playback Initialized"))}return d={initialize:function(e,t,n){if(I=I||(0,he.default)(s).getInstance(),R=(0,fe.default)(s).getInstance(),!I.supportsMediaSource())return R.capabilityError("mediasource"),void R.error(new Be.default(Ae.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,Ae.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));p||(p=!0,_=(0,Le.default)(s).getInstance(),v=v||(0,Te.default)(s).getInstance(),O=O||(0,se.default)(s).getInstance(),b=b||(0,le.default)(s).getInstance(),w=(0,De.default)(s).getInstance(),k=(0,ke.default)(s).getInstance({timelineConverter:_,errHandler:R,BASE64:Ne.default}),P=(0,ve.default)(s).getInstance(),D=(0,Pe.default)(s).getInstance({manifestModel:P,dashManifestModel:k}),A=(0,be.default)(s).getInstance(),x=(0,me.default)(s).getInstance(),F=(0,Se.default)(s).getInstance({mediaPlayerModel:C}),w.setConfig({dashManifestModel:k}),K(),V(void 0===n||n),e&&X(e),t&&$(t),c.info("[dash.js "+U()+"] MediaPlayer has been initialized"))},setConfig:function(e){e&&(e.capabilities&&(I=e.capabilities),e.streamController&&(M=e.streamController),e.playbackController&&(O=e.playbackController),e.mediaPlayerModel&&(C=e.mediaPlayerModel),e.abrController&&(v=e.abrController),e.mediaController&&(b=e.mediaController))},on:function(e,t,n){u.on(e,t,n)},off:function(e,t,n){u.off(e,t,n)},extend:function(e,t,n){Me.default.extend(e,t,n,s)},attachView:X,attachSource:$,isReady:B,preload:function(){if(L.getElement()||g)return!1;if(!f)throw e;ie()},play:function(){if(!m)throw r;(!y||j()&&m)&&O.play()},isPaused:j,pause:function(){if(!m)throw r;O.pause()},isSeeking:function(){if(!m)throw r;return O.isSeeking()},isDynamic:function(){if(!m)throw r;return O.getIsDynamic()},seek:function(e){if(!m)throw r;if((0,Ue.checkParameterType)(e,"number"),isNaN(e))throw ae.default.BAD_ARGUMENT_ERROR;var t=O.getIsDynamic()?G(e):e;O.seek(t)},setPlaybackRate:function(e){z().playbackRate=e},getPlaybackRate:function(){return z().playbackRate},setMute:function(e){(0,Ue.checkParameterType)(e,"boolean"),z().muted=e},isMuted:function(){return z().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw ae.default.BAD_ARGUMENT_ERROR;z().volume=e},getVolume:function(){return z().volume},time:H,duration:q,timeAsUTC:function(){if(!m)throw r;return H()<0?NaN:re(H())},durationAsUTC:function(){if(!m)throw r;return re(q())},getActiveStream:J,getDVRWindowSize:function(){var e=ne();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:G,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:U,getDebug:function(){return l},getBufferLength:function(e){var t,n=[ae.default.VIDEO,ae.default.AUDIO,ae.default.FRAGMENTED_TEXT];return e?-1===n.indexOf(e)?(c.warn("getBufferLength requested for invalid type"),NaN):(t=Y().getCurrentBufferLevel(W(e)))||NaN:(t=n.map(function(e){return 0<Q(e).length?Y().getCurrentBufferLevel(W(e)):Number.MAX_VALUE}).reduce(function(e,t){return Math.min(e,t)}))===Number.MAX_VALUE?NaN:t},getTTMLRenderingDiv:function(){return L?L.getTTMLRenderingDiv():null},getVideoElement:z,getSource:function(){if(!f)throw e;return f},setLiveDelayFragmentCount:function(e){C.setLiveDelayFragmentCount(e)},setLiveDelay:function(e){C.setLiveDelay(e)},getLiveDelay:function(){return C.getLiveDelay()},getCurrentLiveLatency:function(){if(!p)throw n;return m?O.getCurrentLiveLatency():NaN},useSuggestedPresentationDelay:function(e){C.setUseSuggestedPresentationDelay(e)},enableLastBitrateCaching:function(e,t){C.setLastBitrateCachingInfo(e,t)},enableLastMediaSettingsCaching:function(e,t){C.setLastMediaSettingsCachingInfo(e,t)},setMaxAllowedBitrateFor:function(e,t){v.setMaxAllowedBitrateFor(e,t)},getMaxAllowedBitrateFor:function(e){return v.getMaxAllowedBitrateFor(e)},getTopBitrateInfoFor:function(e){if(!g)throw i;return v.getTopBitrateInfoFor(e)},setMinAllowedBitrateFor:function(e,t){v.setMinAllowedBitrateFor(e,t)},getMinAllowedBitrateFor:function(e){return v.getMinAllowedBitrateFor(e)},setMaxAllowedRepresentationRatioFor:function(e,t){v.setMaxAllowedRepresentationRatioFor(e,t)},getMaxAllowedRepresentationRatioFor:function(e){return v.getMaxAllowedRepresentationRatioFor(e)},setAutoPlay:V,getAutoPlay:function(){return y},setScheduleWhilePaused:function(e){C.setScheduleWhilePaused(e)},getScheduleWhilePaused:function(){return C.getScheduleWhilePaused()},getDashMetrics:Y,getMetricsFor:W,getQualityFor:function(e){if(!g)throw i;if(e!==ae.default.IMAGE)return v.getQualityFor(e,M.getActiveStreamInfo());var t=J();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1},setQualityFor:function(e,t){if(!g)throw i;if(e===ae.default.IMAGE){var n=J();if(!n)return;var r=n.getThumbnailController();r&&r.setTrackByIndex(t)}v.setPlaybackQuality(e,M.getActiveStreamInfo(),t)},updatePortalSize:function(){v.setElementSize(),v.setWindowResizeEventCalled(!0)},getLimitBitrateByPortal:function(){return v.getLimitBitrateByPortal()},setLimitBitrateByPortal:function(e){v.setLimitBitrateByPortal(e)},getUsePixelRatioInLimitBitrateByPortal:function(){return v.getUsePixelRatioInLimitBitrateByPortal()},setUsePixelRatioInLimitBitrateByPortal:function(e){v.setUsePixelRatioInLimitBitrateByPortal(e)},setTextDefaultLanguage:function(e){void 0===x&&(x=(0,me.default)(s).getInstance()),x.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===x&&(x=(0,me.default)(s).getInstance()),x.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===x&&(x=(0,me.default)(s).getInstance()),x.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===x&&(x=(0,me.default)(s).getInstance()),x.getTextDefaultEnabled()},enableText:function(e){void 0===x&&(x=(0,me.default)(s).getInstance()),x.enableText(e)},enableForcedTextStreaming:function(e){void 0===x&&(x=(0,me.default)(s).getInstance()),x.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===x&&(x=(0,me.default)(s).getInstance()),x.isTextEnabled()},setTextTrack:function(e){if(!m)throw r;void 0===x&&(x=(0,me.default)(s).getInstance()),x.setTextTrack(e)},getBitrateInfoListFor:function(e){if(!g)throw i;var t=J();return t?t.getBitrateListFor(e):[]},setInitialBitrateFor:function(e,t){v.setInitialBitrateFor(e,t)},getInitialBitrateFor:function(e){if(!g)throw i;return v.getInitialBitrateFor(e)},setInitialRepresentationRatioFor:function(e,t){v.setInitialRepresentationRatioFor(e,t)},getInitialRepresentationRatioFor:function(e){return v.getInitialRepresentationRatioFor(e)},getStreamsFromManifest:function(e){if(!g)throw i;return w.getStreamsInfo(e)},getTracksFor:Q,getTracksForTypeFromManifest:function(e,t,n){if(!g)throw i;return(n=n||w.getStreamsInfo(t,1)[0])?w.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!g)throw i;var t=M.getActiveStreamInfo();return b.getCurrentTrackFor(e,t)},setInitialMediaSettingsFor:function(e,t){if(!p)throw n;b.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!p)throw n;return b.getInitialSettings(e)},setCurrentTrack:function(e){if(!g)throw i;b.setTrack(e)},getTrackSwitchModeFor:function(e){if(!p)throw n;return b.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!p)throw n;b.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!p)throw n;b.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!p)throw n;return b.getSelectionModeForInitialTrack()},setFastSwitchEnabled:function(e){C.setFastSwitchEnabled(e)},getFastSwitchEnabled:function(){return C.getFastSwitchEnabled()},setMovingAverageMethod:function(e){C.setMovingAverageMethod(e)},getMovingAverageMethod:function(){return C.getMovingAverageMethod()},getAutoSwitchQualityFor:function(e){return v.getAutoSwitchBitrateFor(e)},setAutoSwitchQualityFor:function(e,t){v.setAutoSwitchBitrateFor(e,t)},setABRStrategy:function(e){C.setABRStrategy(e)},getABRStrategy:function(){return C.getABRStrategy()},useDefaultABRRules:function(e){C.setUseDefaultABRRules(e)},addABRCustomRule:function(e,t,n){C.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){C.removeABRCustomRule(e)},removeAllABRCustomRule:function(){C.removeABRCustomRule()},setBandwidthSafetyFactor:function(e){C.setBandwidthSafetyFactor(e)},getBandwidthSafetyFactor:function(){return C.getBandwidthSafetyFactor()},getAverageThroughput:function(e){var t=v.getThroughputHistory();return t?t.getAverageThroughput(e):0},setAbandonLoadTimeout:function(e){C.setAbandonLoadTimeout(e)},retrieveManifest:function(e,n){var r=ee(),i=this;u.on(Re.default.INTERNAL_MANIFEST_LOADED,function e(t){t.error?n(null,t.error):n(t.manifest),u.off(Re.default.INTERNAL_MANIFEST_LOADED,e,i),r.reset()},i),N.initialize(e),r.load(e)},addUTCTimingSource:function(e,t){C.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){C.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){C.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:K,setBufferToKeep:function(e){C.setBufferToKeep(e)},setBufferAheadToKeep:function(e){C.setBufferAheadToKeep(e)},setBufferPruningInterval:function(e){C.setBufferPruningInterval(e)},setStableBufferTime:function(e){C.setStableBufferTime(e)},getStableBufferTime:function(){return C.getStableBufferTime()},setBufferTimeAtTopQuality:function(e){C.setBufferTimeAtTopQuality(e)},getBufferTimeAtTopQuality:function(){return C.getBufferTimeAtTopQuality()},setBufferTimeAtTopQualityLongForm:function(e){C.setBufferTimeAtTopQualityLongForm(e)},getBufferTimeAtTopQualityLongForm:function(){return C.getBufferTimeAtTopQualityLongForm()},setFragmentLoaderRetryAttempts:function(e){C.setRetryAttemptsForType(xe.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setFragmentLoaderRetryInterval:function(e){C.setRetryIntervalForType(xe.HTTPRequest.MEDIA_SEGMENT_TYPE,e)},setManifestLoaderRetryAttempts:function(e){C.setRetryAttemptsForType(xe.HTTPRequest.MPD_TYPE,e)},setManifestLoaderRetryInterval:function(e){C.setRetryIntervalForType(xe.HTTPRequest.MPD_TYPE,e)},setXHRWithCredentialsForType:function(e,t){C.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return C.getXHRWithCredentialsForType(e)},setJumpGaps:function(e){C.setJumpGaps(e)},getJumpGaps:function(){return C.getJumpGaps()},setSmallGapLimit:function(e){C.setSmallGapLimit(e)},getSmallGapLimit:function(){return C.getSmallGapLimit()},setLowLatencyEnabled:function(e){C.setLowLatencyEnabled(e)},getLowLatencyEnabled:function(){return C.getLowLatencyEnabled()},setCatchUpPlaybackRate:function(e){C.setCatchUpPlaybackRate(e)},getCatchUpPlaybackRate:function(){return C.getCatchUpPlaybackRate()},setLowLatencyMinDrift:function(e){if("number"!=typeof e||isNaN(e)||e<0||.5<e)throw a;C.setLowLatencyMinDrift(e)},getLowLatencyMinDrift:function(){return C.getLowLatencyMinDrift()},setLowLatencyMaxDriftBeforeSeeking:function(e){if("number"!=typeof e||isNaN(e)||e<0)throw o;C.setLowLatencyMaxDriftBeforeSeeking(e)},getLowLatencyMaxDriftBeforeSeeking:function(){return C.getLowLatencyMaxDriftBeforeSeeking()},setManifestUpdateRetryInterval:function(e){C.setManifestUpdateRetryInterval(e)},getManifestUpdateRetryInterval:function(){return C.getManifestUpdateRetryInterval()},setLongFormContentDurationThreshold:function(e){C.setLongFormContentDurationThreshold(e)},setSegmentOverlapToleranceTime:function(e){C.setSegmentOverlapToleranceTime(e)},setCacheLoadThresholdForType:function(e,t){C.setCacheLoadThresholdForType(e,t)},getProtectionController:function(){return te()},attachProtectionController:function(e){T=e},setProtectionData:function(e){h=e,M&&M.setProtectionData(h)},enableManifestDateHeaderTimeSource:function(e){C.setUseManifestDateHeaderTimeSource(e)},displayCaptionsOnTop:function(e){var t=(0,pe.default)(s).getInstance();t.setConfig({videoModel:L}),t.initialize(),t.displayCConTop(e)},attachVideoContainer:function(e){c.warn("attachVideoContainer method has been deprecated and will be removed in dash.js v3.0.0")},attachTTMLRenderingDiv:function(e){if(!L.getElement())throw t;L.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return x&&(e=x.getCurrentTrackIdx()),e},getUseDeadTimeLatencyForAbr:function(){return v.getUseDeadTimeLatency()},setUseDeadTimeLatencyForAbr:function(e){v.setUseDeadTimeLatency(e)},getThumbnail:function(e,t){if(e<0)return null;var n=O.getIsDynamic()?G(e):e,r=M.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var a=M.getTimeRelativeToStreamId(n,r.getId());return i.get(a,t)},keepProtectionMediaKeys:function(e){C.setKeepProtectionMediaKeys(e)},reset:function(){$(null),X(null),h=null,T&&(T.reset(),T=null),E&&(E.reset(),E=null)}},c=l.getLogger(d),y=!(g=m=p=!1),w=h=T=null,Re.default.extend(Ie.default),C=(0,_e.default)(s).getInstance(),L=(0,Ee.default)(s).getInstance(),N=(0,ye.default)(s).getInstance(),d}i.__dashjs_factory_name="MediaPlayer";var a=Me.default.getClassFactory(i);a.events=Ie.default,a.errors=Ae.default,Me.default.updateClassFactory(i.__dashjs_factory_name,a),n.default=a,t.exports=n.default},{1:1,101:101,102:102,104:104,105:105,110:110,112:112,114:114,142:142,143:143,144:144,145:145,146:146,191:191,193:193,198:198,200:200,202:202,207:207,208:208,215:215,235:235,46:46,47:47,48:48,49:49,50:50,53:53,55:55,57:57,6:6,62:62,79:79,91:91,94:94}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.AST_IN_FUTURE="astInFuture",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.SOURCE_INITIALIZED="sourceInitialized",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_SEEK_ASKED="playbackSeekAsked",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{54:54}],95:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(93),a=(r=i)&&r.__esModule?r:{default:r};var s,o,u=(s="application/dash+xml",o=void 0,{create:l,createAll:function(e,t){var n=[];e=e||"[data-dashjs-player]";for(var r=(t=t||document).querySelectorAll(e),i=0;i<r.length;i++){var a=l(r[i],null);n.push(a)}var o=t.querySelectorAll('source[type="'+s+'"]');for(i=0;i<o.length;i++)a=l(d(o[i]),null),n.push(a);return n}});function l(e,t,n){if(!e||!/^VIDEO$/i.test(e.nodeName))return null;if(e._dashjs_player)return e._dashjs_player;var r=void 0,i=e.id||e.name||"video element";if(!(t=t||[].slice.call(e.querySelectorAll("source")).filter(function(e){return e.type==s})[0])&&e.src)(t=document.createElement("source")).src=e.src;else if(!t&&!e.src)return null;return n=n||{},(r=(0,a.default)(n).create()).initialize(e,t.src,e.autoplay),(o=o||r.getDebug().getLogger()).debug("Converted "+i+" to dash.js player and added content: "+t.src),e._dashjs_player=r}function d(e){for(var t=!0;t;){var n=e;if(t=!1,/^VIDEO$/i.test(n.nodeName))return n;e=n.parentNode,t=!0}}var c=void 0;"undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate||"undefined"==typeof window||!window||!window.addEventListener||("complete"===window.document.readyState?window.dashjs?u.createAll():c=window.setInterval(function(){window.dashjs&&(window.clearInterval(c),u.createAll())},500):window.addEventListener("load",function e(){window.removeEventListener("load",e),u.createAll()})),n.default=u,t.exports=n.default},{93:93}],96:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(46)),i=r(e(48));function a(e){var t=this.context,n=void 0,r=void 0,i=void 0,a=[],o=e;function s(t,n){a=a.filter(function(e){return!((isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t))})}return n={getAllBufferRanges:function(){for(var t=[],e=0;e<a.length;e++){var n=a[e];0===t.length||n.start>t[t.length-1].end?t.push({start:n.start,end:n.end}):t[t.length-1].end=n.end}var r={start:function(e){return t[e].start},end:function(e){return t[e].end}};return Object.defineProperty(r,"length",{get:function(){return t.length}}),r},append:function(e){i="InitializationSegment"!==e.segmentType?(a.push(e),a.sort(function(e,t){return e.start-t.start}),null):e,r.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),o&&o({chunk:e})},remove:s,abort:function(){},discharge:function(e,t){var n=function(t,n){return a.filter(function(e){return(isNaN(n)||e.start<n)&&(isNaN(t)||e.end>t)})}(e,t);return i&&(n.push(i),i=null),s(e,t),n},reset:function(){a=[],o=i=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1}},r=(0,u.default)(t).getInstance().getLogger(n),n}a.__dashjs_factory_name="PreBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default},{46:46,48:48}],97:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(46)),S=r(e(215)),w=r(e(47)),A=r(e(53)),i=r(e(48)),C=r(e(191)),R=r(e(50));function a(i,r,e,a){var o=this.context,s=(0,w.default)(o).getInstance(),u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,n=[],h=[],p=e;function g(){try{return d.buffered}catch(e){return l.error("getAllBufferRanges exception: "+e.message),null}}function m(e,t,n,r){t&&0<t.length&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}(t,r)&&s.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0})}function y(){if(0<n.length){var e=n.shift();d.updating?T(d,e):(e(),y())}}function v(){d.updating||y()}function _(){d.updating||y()}function b(){l.error("SourceBufferSink error",r.type)}function T(e,t){n.push(t),e.updating||y()}return u={getAllBufferRanges:g,getBuffer:function(){return d},append:function(e){e?(h.push(e),c||T(d,function r(){var i=this;var a=this;0<h.length&&function(){c=!0;var t=h[0];h.splice(0,1);var n=[],e=function(){var e=g();m(a,n,e,t),0<h.length?r.call(this):(c=!1,p&&p({chunk:t}))};try{0===t.bytes.length?e.call(i):(n=g(),d.appendBuffer?d.appendBuffer(t.bytes):d.append(t.bytes,t),T(d,e.bind(i)))}catch(e){l.fatal('SourceBuffer append failed "'+e+'"'),0<h.length?r():c=!1,p&&p({chunk:t,error:new S.default(e.code,e.message)})}}()}.bind(this))):p({chunk:e,error:new S.default(R.default.APPEND_ERROR_CODE,R.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,e){var r=this;T(d,function(){try{0<=t&&t<n&&(e||"ended"!==i.readyState)&&d.remove(t,n),T(d,function(){s.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1})})}catch(e){s.trigger(A.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:r,from:t,to:n,unintended:!1,error:new S.default(e.code,e.message)})}})},abort:function(){try{"open"===i.readyState?d.abort():d.setTextTrack&&"ended"===i.readyState&&d.abort()}catch(e){l.error('SourceBuffer append abort failed: "'+e+'"')}h=[]},reset:function(e){if(d){if("function"==typeof d.removeEventListener&&(d.removeEventListener("updateend",_,!1),d.removeEventListener("error",b,!1),d.removeEventListener("abort",b,!1)),clearInterval(f),!e){try{d.getClassName&&"TextSourceBuffer"===d.getClassName()||i.removeSourceBuffer(d)}catch(e){l.error("Failed to remove source buffer from media source.")}d=null}c=!1}h=[],p=null},updateTimestampOffset:function(e){d.timestampOffset===e||isNaN(e)||T(d,function(){d.timestampOffset=e})},hasDiscontinuitiesAfter:function(e){try{var t=g();if(t&&1<t.length)for(var n=0,r=t.length;n<r;n++)if(0<n&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){l.error("hasDiscontinuities exception: "+e.message)}return!1}},function(){l=(0,E.default)(o).getInstance().getLogger(u),c=!1;var t=r.codec;try{if(t.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(d=a||i.addSourceBuffer(t)).changeType&&a&&(l.debug("Doing period transition with changeType"),d.changeType(t));if("function"==typeof d.addEventListener)try{d.addEventListener("updateend",_,!1),d.addEventListener("error",b,!1),d.addEventListener("abort",b,!1)}catch(e){f=setInterval(v,50)}else f=setInterval(v,50)}catch(e){if(!r.isText&&-1===t.indexOf('codecs="stpp')&&-1===t.indexOf('codecs="wvtt'))throw e;var n=(0,C.default)(o).getInstance();d=n.getTextSourceBuffer()}}(),u}a.__dashjs_factory_name="SourceBufferSink";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default},{191:191,215:215,46:46,47:47,48:48,50:50,53:53}],98:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ne=r(e(101)),re=r(e(99)),ie=r(e(108)),ae=r(e(109)),oe=r(e(194)),se=r(e(47)),ue=r(e(53)),le=r(e(46)),de=r(e(50)),i=r(e(48)),ce=r(e(215));function a(s){s=s||{};var u=this.context,i=(0,se.default)(u).getInstance(),c=s.manifestModel,l=s.dashManifestModel,d=s.mediaPlayerModel,a=s.manifestUpdater,f=s.adapter,o=s.capabilities,h=s.errHandler,p=s.timelineConverter,g=s.metricsModel,m=s.abrController,y=s.playbackController,v=s.mediaController,_=s.textController,b=s.videoModel,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,r=void 0,R=void 0,I=void 0,e=void 0,M=void 0,O=void 0,t=void 0,D=void 0,k=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function n(e){for(var t=S?S.length:0,n=0;n<t;n++){S[n].getFragmentModel().removeExecutedRequestsBeforeTime(N()+x()),S[n].reset(!1,e)}ee(A=w=!(S=[])),i.off(ue.default.CURRENT_TRACK_CHANGED,G,T)}function P(){n(),C=null,R=!(r={})}function L(){y&&y.pause(),e&&(e.reset(),e=null),P(),i.off(ue.default.DATA_UPDATE_COMPLETED,X,T),i.off(ue.default.BUFFERING_COMPLETED,z,T),I&&(i.off(ue.default.KEY_ERROR,U,T),i.off(ue.default.SERVER_CERTIFICATE_UPDATED,U,T),i.off(ue.default.LICENSE_REQUEST_COMPLETE,U,T),i.off(ue.default.KEY_SYSTEM_SELECTED,U,T),i.off(ue.default.KEY_SESSION_CREATED,U,T),i.off(ue.default.KEY_STATUSES_CHANGED,U,T)),ee(!1)}function x(){return C?C.duration:NaN}function N(){return C?C.start:NaN}function F(){return C}function B(){if(!(m&&m.hasOwnProperty("getBitrateList")&&f&&f.hasOwnProperty("getAllMediaInfoForType")&&f.hasOwnProperty("getEventsFor")))throw new Error(ne.default.MISSING_CONFIG_ERROR)}function U(e){e.error&&(h.mediaKeySessionError(e.error.message),h.error(e.error),E.fatal(e.error.message),L())}function j(e){var t,n=e.type,r=void 0;if(n===ne.default.MUXED&&e)return r="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",E.fatal(r),h.manifestError(r,"multiplexedrep",c.getValue()),h.error(new ce.default(de.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,r,c.getValue())),!1;if(n===ne.default.TEXT||n===ne.default.FRAGMENTED_TEXT||n===ne.default.EMBEDDED_TEXT||n===ne.default.IMAGE)return!0;if(t=e.codec,E.debug(n+" codec: "+t),e.contentProtection&&!o.supportsEncryptedMedia())h.capabilityError("encryptedmedia"),h.error(new ce.default(de.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,de.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!o.supportsCodec(t))return r=n+"Codec ("+t+") is not supported.",E.error(r),!1;return!0}function G(e){if(e.newMediaInfo.streamInfo.id===C.id){var t=Q(e.newMediaInfo);if(t){var n=y.getTime();E.info("Stream -  Process track changed at current time "+n);var r=e.newMediaInfo,i=c.getValue();f.setCurrentMediaInfo(C.id,r.type,r),E.debug("Stream -  Update stream controller"),i.refreshManifestOnSwitchTrack?(E.debug("Stream -  Refreshing manifest for switch track"),D=e,a.refreshManifest()):(t.selectMediaInfo(r),r.type!==ne.default.FRAGMENTED_TEXT?(m.updateTopQualityIndex(r),t.switchTrackAsked(),t.getFragmentModel().abortRequests()):(t.getScheduleController().setSeekTarget(NaN),f.setIndexHandlerTime(t,n),f.resetIndexHandler(t)))}}}function H(e,t){var n=f.getAllMediaInfoForType(C,e),r=null,i=void 0;if(n&&0!==n.length){for(var a=0,o=n.length;a<o;a++)if(r=n[a],e===ne.default.EMBEDDED_TEXT)_.addEmbeddedTrack(r);else{if(!j(r))continue;v.addTrack(r)}e!==ne.default.EMBEDDED_TEXT&&0!==v.getTracksFor(e,C).length&&(e!==ne.default.IMAGE?((e!==ne.default.FRAGMENTED_TEXT||e===ne.default.FRAGMENTED_TEXT&&_.getTextDefaultEnabled())&&(v.checkInitialMediaSettingsForType(e,C),i=v.getCurrentTrackFor(e,C)),e!==ne.default.FRAGMENTED_TEXT||_.getTextDefaultEnabled()||(i=v.getTracksFor(e,C)[0]),function(e,t,n,r){var i=(0,re.default)(u).create({type:e.type,mimeType:e.mimeType,timelineConverter:p,adapter:f,manifestModel:c,dashManifestModel:l,mediaPlayerModel:d,metricsModel:g,dashMetrics:s.dashMetrics,baseURLController:s.baseURLController,stream:T,abrController:m,domStorage:s.domStorage,playbackController:y,mediaController:v,streamController:s.streamController,textController:_,errHandler:h});if(i.initialize(n),m.updateTopQualityIndex(e),r?(i.setBuffer(r.buffer),i.getIndexHandler().setCurrentTime(r.currentTime),S[r.replaceIdx]=i):S.push(i),!r||!r.ignoreMediaInfo)if(e.type===ne.default.TEXT||e.type===ne.default.FRAGMENTED_TEXT){for(var a=void 0,o=0;o<t.length;o++)t[o].index===e.index&&(a=o),i.addMediaInfo(t[o]);i.selectMediaInfo(t[a])}else i.addMediaInfo(e,!0)}(i,n,t)):M=(0,oe.default)(u).create({dashManifestModel:l,adapter:f,baseURLController:s.baseURLController,stream:T,timelineConverter:s.timelineConverter}))}else E.info("No "+e+" data.")}function q(){O||((O=(0,ie.default)(u).create()).setConfig({manifestUpdater:a,playbackController:y}),V())}function V(){var e=f.getEventsFor(C);O.addInlineEvents(e)}function K(e){var r=f.getAdaptationForType(c.getValue(),C.index,e,C);r&&Array.isArray(r.Representation_asArray)&&(r.Representation_asArray=r.Representation_asArray.filter(function(e,t){if(0===t)return!0;var n=l.getCodec(r,t,!0);return!!o.supportsCodec(n)||(E.error("[Stream] codec not supported: "+n),!1)}))}function Y(){for(var e=S.length,t=!!r.audio||!!r.video?new ce.default(de.default.DATA_UPDATE_FAILED_ERROR_CODE,de.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(S[n].isUpdating()||R)return;if(A){if(I)for(n=0;n<e&&S[n];n++)S[n].getType()!==ne.default.AUDIO&&S[n].getType()!==ne.default.VIDEO&&S[n].getType()!==ne.default.FRAGMENTED_TEXT||I.initializeForMedia(S[n].getMediaInfo());i.trigger(ue.default.STREAM_INITIALIZED,{streamInfo:C,error:t})}}function W(e){for(var t={},n=0,r=S.length;n<r;n++)t[S[n].getType()]=S[n].createBuffer(e).getBuffer();return t}function z(e){if(e.streamInfo===C){var t=$(),n=t.length;if(0!==n){for(var r=0;r<n;r++)if(!t[r].isBufferingCompleted()&&(t[r].getType()===ne.default.AUDIO||t[r].getType()===ne.default.VIDEO))return void E.warn("onBufferingCompleted - One streamProcessor has finished but",t[r].getType(),"one is not buffering completed");E.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),i.trigger(ue.default.STREAM_BUFFERING_COMPLETED,{streamInfo:C})}else E.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function X(e){var t=e.sender.getStreamProcessor();t.getStreamInfo()===C&&(r[t.getType()]=e.error,Y())}function Q(t){return t?$().filter(function(e){return e.getType()===t.type})[0]:null}function $(){for(var e=S.length,t=[],n=void 0,r=void 0,i=0;i<e;i++)(n=(r=S[i]).getType())!==ne.default.AUDIO&&n!==ne.default.VIDEO&&n!==ne.default.FRAGMENTED_TEXT&&n!==ne.default.TEXT||t.push(r);return t}function J(e,t){if(!e)return!1;var n=e.getStreamInfo(),r=F();if(!n||!r)return!1;var i=f.getAdaptationForType(c.getValue(),n.index,t,n),a=f.getAdaptationForType(c.getValue(),r.index,t,r);return i&&a?!i.ContentProtection&&!a.ContentProtection:!i&&!a}function Z(e,t){if(!e)return!1;var n=e.getStreamInfo(),r=F();if(!n||!r)return!1;var i=f.getAdaptationForType(c.getValue(),n.index,t,n),a=f.getAdaptationForType(c.getValue(),r.index,t,r);if(!i||!a)return!i&&!a;var o=i&&a&&i.mimeType===a.mimeType,s=a.Representation_asArray.map(function(e){return e.codecs}),u=i.Representation_asArray.map(function(e){return e.codecs}),l=u.some(function(e){return-1<s.indexOf(e)}),d=u.some(function(t){return s.some(function(e){return function(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,a=0;a<k.length;a++)if(k[a].codec===n){i=k[a];break}if(i)return r||i.compatibleCodecs.some(function(e){return 0===t.indexOf(e)});return r}(e,t)})});return l||d&&o}function ee(e){t=e}function te(){return t}return T={initialize:function(e,t){C=e,(I=t)&&(i.on(ue.default.KEY_ERROR,U,T),i.on(ue.default.SERVER_CERTIFICATE_UPDATED,U,T),i.on(ue.default.LICENSE_REQUEST_COMPLETE,U,T),i.on(ue.default.KEY_SYSTEM_SELECTED,U,T),i.on(ue.default.KEY_SESSION_CREATED,U,T),i.on(ue.default.KEY_STATUSES_CHANGED,U,T))},activate:function(e,t){if(w)return t;var n=void 0;return i.on(ue.default.CURRENT_TRACK_CHANGED,G,T),n=te()?(function(){if(R=!0,B(),K(ne.default.VIDEO),K(ne.default.AUDIO),R=!(A=!0),0===S.length){var e="No streams to play.";h.manifestError(e,"nostreams",c.getValue()),E.debug(e)}else Y()}(),t):function(e,t){B();var n=b.getElement();q(),R=!0,K(ne.default.VIDEO),K(ne.default.AUDIO),(null===n||n&&/^VIDEO$/i.test(n.nodeName))&&H(ne.default.VIDEO,e);H(ne.default.AUDIO,e),H(ne.default.TEXT,e),H(ne.default.FRAGMENTED_TEXT,e),H(ne.default.EMBEDDED_TEXT,e),H(ne.default.MUXED,e),H(ne.default.IMAGE,e);var r=W(t);if(R=!(A=!0),0===S.length){var i="No streams to play.";h.manifestError(i,"nostreams",c.getValue()),h.error(new ce.default(de.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,c.getValue())),E.fatal(i)}else Y();return r}(e,t),w=!0,n},deactivate:n,isActive:function(){return w},getDuration:x,getStartTime:N,getId:function(){return C?C.id:null},getStreamInfo:F,preload:function(e,t){q(),H(ne.default.VIDEO,e),H(ne.default.AUDIO,e),H(ne.default.TEXT,e),H(ne.default.FRAGMENTED_TEXT,e),H(ne.default.EMBEDDED_TEXT,e),H(ne.default.MUXED,e),H(ne.default.IMAGE,e),W(t),i.on(ue.default.CURRENT_TRACK_CHANGED,G,T);for(var n=0;n<S.length&&S[n];n++)S[n].getScheduleController().start();ee(!0)},getFragmentController:function(){return e},getThumbnailController:function(){return M},getBitrateListFor:function(e){if(B(),e===ne.default.IMAGE)return M?M.getBitrateList():[];var t=function(e){for(var t=S.length,n=null,r=0;r<t;r++)if((n=S[r]).getType()===e)return n.getMediaInfo();return null}(e);return m.getBitrateList(t)},startEventController:function(){O&&O.start()},stopEventController:function(){O&&O.stop()},updateData:function(e){E.info("Manifest updated... updating data system wide."),R=!(w=!1),C=e,O&&V(),K(ne.default.VIDEO),K(ne.default.AUDIO);for(var t=0,n=S.length;t<n;t++){var r=S[t],i=f.getMediaInfoForType(C,r.getType());m.updateTopQualityIndex(i),r.addMediaInfo(i,!0)}if(D&&"fragmentedText"!==(i=D.newMediaInfo).type){var a=Q(D.oldMediaInfo);if(!a)return;a.switchTrackAsked(),D=void 0}R=!1,Y()},reset:L,getProcessors:$,setMediaSource:function(e){for(var t=0;t<S.length;)j(S[t].getMediaInfo())?(S[t].setMediaSource(e),t++):(S[t].reset(),S.splice(t,1));for(t=0;t<S.length;t++)S[t].dischargePreBuffer();if(0===S.length){var n="No streams to play.";h.manifestError(n,"nostreams",c.getValue()),h.error(new ce.default(de.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,n+"nostreams",c.getValue())),E.fatal(n)}},isMediaCodecCompatible:function(e){return Z(e,ne.default.VIDEO)&&Z(e,ne.default.AUDIO)},isProtectionCompatible:function(e){return J(e,ne.default.VIDEO)&&J(e,ne.default.AUDIO)},getPreloaded:te,addInbandEvents:function(e){O&&O.addInbandEvents(e)}},E=(0,le.default)(u).getInstance().getLogger(T),P(),e=(0,ae.default)(u).create({mediaPlayerModel:d,metricsModel:g,errHandler:h}),i.on(ue.default.BUFFERING_COMPLETED,z,T),i.on(ue.default.DATA_UPDATE_COMPLETED,X,T),T}a.__dashjs_factory_name="Stream",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,108:108,109:109,194:194,215:215,46:46,47:47,48:48,50:50,53:53,99:99}],99:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var P=r(e(101)),L=r(e(205)),x=r(e(107)),N=r(e(190)),F=r(e(113)),B=r(e(61)),i=r(e(48)),U=r(e(56));function a(t){t=t||{};var n=this.context,r=t.type,i=t.errHandler,a=t.mimeType,o=t.timelineConverter,s=t.adapter,u=t.manifestModel,l=t.mediaPlayerModel,d=t.stream,c=t.abrController,f=t.playbackController,h=t.streamController,p=t.mediaController,g=t.textController,m=t.domStorage,y=t.metricsModel,v=t.dashMetrics,_=t.dashManifestModel,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0;function e(){I=[]}function O(){E=[],T=null,e()}function D(){return d?d.getStreamInfo():null}function k(){return T}return b={initialize:function(e){(M=(0,U.default)(n).create({mimeType:a,timelineConverter:o,dashMetrics:v,metricsModel:y,mediaPlayerModel:l,baseURLController:t.baseURLController,errHandler:i})).initialize(b),c.registerStreamType(r,b),(R=d.getFragmentController().getModel(r)).setStreamProcessor(b),S=function(e){var t=null;t=e===P.default.VIDEO||e===P.default.AUDIO?(0,x.default)(n).create({type:e,metricsModel:y,mediaPlayerModel:l,manifestModel:u,errHandler:i,streamController:h,mediaController:p,adapter:s,textController:g,abrController:c,playbackController:f,streamProcessor:b}):(0,N.default)(n).create({type:e,mimeType:a,metricsModel:y,mediaPlayerModel:l,manifestModel:u,errHandler:i,streamController:h,mediaController:p,adapter:s,textController:g,abrController:c,playbackController:f,streamProcessor:b});return t}(r),w=(0,F.default)(n).create({type:r,mimeType:a,metricsModel:y,adapter:s,dashMetrics:v,dashManifestModel:_,timelineConverter:o,mediaPlayerModel:l,abrController:c,playbackController:f,streamController:h,textController:g,streamProcessor:b,mediaController:p}),(C=(0,B.default)(n).create()).setConfig({abrController:c,domStorage:m,metricsModel:y,dashMetrics:v,dashManifestModel:_,manifestModel:u,playbackController:f,timelineConverter:o,streamProcessor:b}),S.initialize(e),w.initialize(),C.initialize()},isUpdating:function(){return!!C&&C.isUpdating()},getType:function(){return r},getBufferController:function(){return S},getFragmentModel:function(){return R},getScheduleController:function(){return w},getLiveEdgeFinder:function(){return A},getFragmentController:function(){return d?d.getFragmentController():null},getRepresentationController:function(){return C},getIndexHandler:function(){return M},getRepresentationInfo:function(e){return s.getRepresentationInfo(C,e)},getBufferLevel:function(){return S.getBufferLevel()},switchInitData:function(e,t){S&&S.switchInitData(D().id,e,t)},isBufferingCompleted:function(){return!!S&&S.getIsBufferingCompleted()},timeIsBuffered:function(e){return!!S&&null!==S.getRangeAt(e,0)},createBuffer:function(e){return S.getBuffer()||S.createBuffer(T,e)},getStreamInfo:D,selectMediaInfo:function(e){e===T||e&&T&&e.type!==T.type||(T=e),s.updateData(this)},addMediaInfo:function(e,t){-1===E.indexOf(e)&&E.push(e),t&&this.selectMediaInfo(e)},switchTrackAsked:function(){w.switchTrackAsked()},getMediaInfoArr:function(){return E},getMediaInfo:k,getMediaSource:function(){return S.getMediaSource()},setMediaSource:function(e){S.setMediaSource(e,k())},dischargePreBuffer:function(){S.dischargePreBuffer()},getBuffer:function(){return S.getBuffer()},setBuffer:function(e){S.setBuffer(e)},registerExternalController:function(e){I.push(e)},unregisterExternalController:function(e){var t=I.indexOf(e);-1!==t&&I.splice(t,1)},getExternalControllers:function(){return I},unregisterAllExternalController:e,addInbandEvents:function(e){d&&d.addInbandEvents(e)},reset:function(e,t){M.reset(),S&&(S.reset(e,t),S=null),w&&(w.reset(),w=null),C&&(C.reset(),C=null),c&&c.unRegisterStreamType(r),I.forEach(function(e){e.reset()}),O(),d=r=null,A&&(A.reset(),A=null)}},f&&f.getIsDynamic()&&(A=(0,L.default)(n).create({timelineConverter:o,streamProcessor:b})),O(),b}a.__dashjs_factory_name="StreamProcessor",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,107:107,113:113,190:190,205:205,48:48,56:56,61:61}],100:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(215)),i=r(e(148)),l=e(235),d=r(e(226)),c=r(e(47)),f=r(e(53)),a=r(e(48)),h=r(e(50));function o(e){e=e||{};var a="urn:mpeg:dash:resolve-to-zero:2013",t=this.context,o=(0,c.default)(t).getInstance(),s=(0,i.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(n,r,i){function t(e,t){r.resolved=!0,r.resolvedContent=e||null,o.trigger(f.default.XLINK_ELEMENT_LOADED,{element:r,resolveObject:i,error:e||t?null:new u.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+n)})}if(n===a)t(null,!0);else{var e=new d.default(n,l.HTTPRequest.XLINK_EXPANSION_TYPE);s.load({request:e,success:function(e){t(e)},error:function(){t(null)}})}},reset:function(){s&&(s.abort(),s=null)}}}o.__dashjs_factory_name="XlinkLoader",n.default=a.default.getClassFactory(o),t.exports=n.default},{148:148,215:215,226:226,235:235,47:47,48:48,50:50,53:53}],101:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.UTF8="utf-8",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)"}}]),i);n.default=a,t.exports=n.default},{}],102:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),i);n.default=a,t.exports=n.default},{}],103:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.init()}Object.defineProperty(n,"__esModule",{value:!0});var a=new(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(i,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),i);n.default=a,t.exports=n.default},{}],104:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Z=r(e(179)),ee=r(e(101)),te=r(e(102)),ne=r(e(214)),re=r(e(141)),ie=r(e(47)),ae=r(e(53)),i=r(e(48)),oe=r(e(175)),se=r(e(176)),ue=r(e(177)),le=r(e(174)),de=r(e(178)),ce=e(235),fe=r(e(46)),he=e(208),pe="abandonload",ge="allowload";function a(){var c=this.context,f=(0,fe.default)(c).getInstance(),u=(0,ie.default)(c).getInstance(),h=void 0,p=void 0,g=void 0,o=void 0,n=void 0,i=void 0,l=void 0,a=void 0,s=void 0,m=void 0,y=void 0,d=void 0,v=void 0,t=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,r=void 0,O=void 0,D=void 0,k=void 0,P=void 0;function L(){(g=(0,Z.default)(c).create({metricsModel:D,dashMetrics:k,mediaPlayerModel:A,adapter:S})).initialize()}function e(){n={video:!0,audio:!0},i={},l={},a={},s={},y={},m={},I={},t=!(P=!(v=!(O={}))),void 0===_&&(_=!1),r=M=R=void 0,clearTimeout(d),d=null}function x(e){e.mediaType===ee.default.VIDEO&&(R=e.oldQuality,M.push(R,w.getPlaybackQuality()))}function N(e){e.metric!==te.default.HTTP_REQUEST||!e.value||e.value.type!==ce.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||r.push(e.mediaType,e.value,P),e.metric!==te.default.BUFFER_LEVEL||e.mediaType!==ee.default.AUDIO&&e.mediaType!==ee.default.VIDEO||function(e,t){var n=A.getABRStrategy();{if(n===ee.default.ABR_STRATEGY_BOLA)return O[e]=!0;if(n===ee.default.ABR_STRATEGY_THROUGHPUT)return O[e]=!1}var r=A.getStableBufferTime(),i=r,a=.5*r,o=O[e],s=(o?a:i)<t;(O[e]=s)!==o&&(s?p.info("AbrController ("+e+") switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):p.info("AbrController ("+e+") switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function F(e,t){return i[t]=i[t]||{},i[t].hasOwnProperty(e)||(i[t][e]=0),function(e,t){if(t!==ee.default.VIDEO||!v||!m[t])return e;_||$();var n=E.getValue(),r=S.getAdaptationForType(n,0,t).Representation,i=e;if(0<b&&0<T){for(;0<i&&r[i]&&b<r[i].width&&b-r[i-1].width<r[i].width-b;)i-=1;r.length-2>=i&&r[i].width===r[i+1].width&&(i=Math.min(e,i+1))}return i}(function(e,t,n){var r=H(t);if(isNaN(r)||1<=r||r<0)return e;return Math.min(e,Math.round(n*r))}(function(e,t){var n=e;if(!m[t])return n;var r=G(t);void 0!==r&&(n=Math.max(e,r));var i=j(t);void 0!==i&&(n=Math.min(n,i));return n}(i[t][e],e),e,i[t][e]),e)}function B(e){return a.hasOwnProperty("max")&&a.max.hasOwnProperty(e)?a.max[e]:NaN}function U(e){return a.hasOwnProperty("min")&&a.min.hasOwnProperty(e)?a.min[e]:NaN}function j(e){var t=B(e);return t?W(m[e].getMediaInfo(),t):void 0}function G(e){var t=U(e);if(t){var n=m[e].getMediaInfo(),r=z(n),i=W(n,t);return r[i]&&i<r.length-1&&r[i].bitrate<1e3*t&&i++,i}}function H(e){return s.hasOwnProperty("max")&&s.max.hasOwnProperty(e)?s.max[e]:1}function q(e){return n[e]}function V(e,t,n,r){var i=t.id,a=Q(e);(0,he.checkInteger)(n);var o=F(e,i);n!==a&&0<=n&&n<=o&&K(e,a,n,o,r)}function K(e,t,n,r,i){if(e&&m[e]){var a=m[e].getStreamInfo(),o=a?a.id:null;if(f.getLogToBrowserConsole()){var s=k.getCurrentBufferLevel(D.getReadOnlyMetricsFor(e));p.info("AbrController ("+e+") switch from "+t+" to "+n+"/"+r+" (buffer: "+s+") "+(i?JSON.stringify(i):"."))}!function(e,t,n){l[t]=l[t]||{},l[t][e]=n}(e,o,n),u.trigger(ae.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:a,oldQuality:t,newQuality:n,reason:i})}}function Y(e,t){y[e].state=t}function W(e,t,n){var r=e&&e.type?m[e.type].getRepresentationInfo():null;if(P&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(i<n)return 0;t*=1-n/i}for(var a=z(e),o=a.length-1;0<=o;o--){if(1e3*t>=a[o].bitrate)return o}return 0}function z(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,o=n.length;a<o;a++)(i=new ne.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function X(e){return O[e]}function Q(e){if(e&&m[e]){var t=m[e].getStreamInfo(),n=t?t.id:null;if(n)return l[n]=l[n]||{},l[n].hasOwnProperty(e)||(l[n][e]=0),l[n][e]}return 0}function $(){if(w){var e=t&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;b=w.getClientWidth()*e,T=w.getClientHeight()*e}}function J(e){var t=e.request.mediaType;if(q(t)){var n=m[t];if(!n)return;var r=(0,oe.default)(c).create({abrController:h,streamProcessor:n,currentRequest:e.request,useBufferOccupancyABR:X(t)}),i=g.shouldAbandonFragment(r);if(i.quality>se.default.NO_CHANGE){var a=n.getFragmentModel();a.getRequests({state:re.default.FRAGMENT_MODEL_LOADING,index:e.request.index})[0]&&(a.abortRequests(),Y(t,pe),I[t].reset(),I[t].push({oldValue:Q(t,o.getActiveStreamInfo()),newValue:i.quality,confidence:1,reason:i.reason}),V(t,o.getActiveStreamInfo(),i.quality,i.reason),clearTimeout(d),d=setTimeout(function(){Y(t,ge),d=null},A.getAbandonLoadTimeout()))}}}return h={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=Q(ee.default.AUDIO),r=Q(ee.default.VIDEO);return n===F(ee.default.AUDIO,t)&&r===F(ee.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return function(e,t,n){i[t]=i[t]||{},i[t][e]=n}(t,n,r),r},getThroughputHistory:function(){return r},getBitrateList:z,getQualityForBitrate:W,getMaxAllowedBitrateFor:B,getTopBitrateInfoFor:function(e){if(e&&m&&m[e]){var t=m[e].getStreamInfo();if(t&&t.id){var n=F(e,t.id),r=z(m[e].getMediaInfo());return r[n]?r[n]:null}}return null},getMinAllowedBitrateFor:U,setMaxAllowedBitrateFor:function(e,t){(0,he.checkParameterType)(t,"number"),(0,he.checkIsVideoOrAudioType)(e),a.max=a.max||{},a.max[e]=t},setMinAllowedBitrateFor:function(e,t){(0,he.checkParameterType)(t,"number"),(0,he.checkIsVideoOrAudioType)(e),a.min=a.min||{},a.min[e]=t},getMaxAllowedIndexFor:j,getMinAllowedIndexFor:G,getMaxAllowedRepresentationRatioFor:H,setMaxAllowedRepresentationRatioFor:function(e,t){s.max=s.max||{},s.max[e]=t},getInitialBitrateFor:function(e){!function(){if(!C||!C.hasOwnProperty("getSavedBitrateSettings"))throw new Error(ee.default.MISSING_CONFIG_ERROR)}();var t=C.getSavedBitrateSettings(e);if(!a.hasOwnProperty(e))if(s.hasOwnProperty(e)){var n=E.getValue(),r=S.getAdaptationForType(n,0,e).Representation;if(Array.isArray(r)){var i=Math.max(Math.round(r.length*s[e])-1,0);a[e]=r[i].bandwidth}else a[e]=0}else isNaN(t)?a[e]=e===ee.default.VIDEO?1e3:100:a[e]=t;return a[e]},setInitialBitrateFor:function(e,t){(0,he.checkIsVideoOrAudioType)(e),(0,he.checkParameterType)(t,"number"),a[e]=t},getInitialRepresentationRatioFor:function(e){return s.hasOwnProperty(e)?s[e]:null},setInitialRepresentationRatioFor:function(e,t){s[e]=t},setAutoSwitchBitrateFor:function(e,t){(0,he.checkParameterType)(t,"boolean"),(0,he.checkIsVideoOrAudioType)(e),n[e]=t},getAutoSwitchBitrateFor:q,getUseDeadTimeLatency:function(){return P},setUseDeadTimeLatency:function(e){(0,he.checkParameterType)(e,"boolean"),P=e},setLimitBitrateByPortal:function(e){(0,he.checkParameterType)(e,"boolean"),v=e},getLimitBitrateByPortal:function(){return v},getUsePixelRatioInLimitBitrateByPortal:function(){return t},setUsePixelRatioInLimitBitrateByPortal:function(e){(0,he.checkParameterType)(e,"boolean"),t=e},getQualityFor:Q,getAbandonmentStateFor:function(e){return y[e]?y[e].state:null},setPlaybackQuality:V,checkPlaybackQuality:function(e){if(e&&m&&m[e]){var t=m[e].getStreamInfo(),n=t?t.id:null,r=Q(e),i=(0,oe.default)(c).create({abrController:h,streamProcessor:m[e],currentValue:r,switchHistory:I[e],droppedFramesHistory:M,useBufferOccupancyABR:X(e)});if(M){var a=w.getPlaybackQuality();a&&M.push(R,a)}if(q(e)){var o=G(e),s=F(e,n),u=g.getMaxQuality(i),l=u.quality;if(void 0!==o&&l<o&&(l=o),s<l&&(l=s),I[e].push({oldValue:r,newValue:l}),l>se.default.NO_CHANGE&&l!=r)(y[e].state===ge||r<l)&&K(e,r,l,s,u.reason);else if(f.getLogToBrowserConsole()){var d=k.getCurrentBufferLevel(D.getReadOnlyMetricsFor(e));p.debug("AbrController ("+e+") stay on "+r+"/"+s+" (buffer: "+d+")")}}}},getTopQualityIndexFor:F,setElementSize:$,setWindowResizeEventCalled:function(e){_=e},createAbrRulesCollection:L,registerStreamType:function(e,t){I[e]=(0,ue.default)(c).create(),m[e]=t,y[e]=y[e]||{},y[e].state=ge,O[e]=!1,u.on(ae.default.LOADING_PROGRESS,J,this),e==ee.default.VIDEO&&(u.on(ae.default.QUALITY_CHANGE_RENDERED,x,this),M=(0,le.default)(c).create(),$()),u.on(ae.default.METRIC_ADDED,N,this),u.on(ae.default.PERIOD_SWITCH_COMPLETED,L,this),r=(0,de.default)(c).create({mediaPlayerModel:A})},unRegisterStreamType:function(e){delete m[e]},setConfig:function(e){e&&(e.streamController&&(o=e.streamController),e.domStorage&&(C=e.domStorage),e.mediaPlayerModel&&(A=e.mediaPlayerModel),e.metricsModel&&(D=e.metricsModel),e.dashMetrics&&(k=e.dashMetrics),e.adapter&&(S=e.adapter),e.manifestModel&&(E=e.manifestModel),e.videoModel&&(w=e.videoModel))},reset:function(){e(),u.off(ae.default.LOADING_PROGRESS,J,this),u.off(ae.default.QUALITY_CHANGE_RENDERED,x,this),u.off(ae.default.METRIC_ADDED,N,this),u.off(ae.default.PERIOD_SWITCH_COMPLETED,L,this),g&&g.reset()}},p=f.getLogger(h),e(),h}a.__dashjs_factory_name="AbrController";var o=i.default.getSingletonFactory(a);o.ABANDON_LOAD=pe,o.QUALITY_DEFAULT=0,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,102:102,141:141,174:174,175:175,176:176,177:177,178:178,179:179,208:208,214:214,235:235,46:46,47:47,48:48,53:53}],105:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(140)),l=r(e(196)),d=r(e(210)),c=r(e(82)),i=r(e(48)),f=r(e(47)),h=r(e(53));function a(){var e=void 0,t=void 0,n=this.context,r=(0,f.default)(n).getInstance(),i=(0,d.default)(n).getInstance(),a=void 0,o=void 0;function s(e){a.invalidateSelectedIndexes(e.entry)}return e={reset:function(){a.reset(),o.reset()},initialize:function(e){a.setConfig({dashManifestModel:t}),o.setConfig({dashManifestModel:t}),function(e){a.update(e),o.chooseSelectorFromManifest(e)}(e)},resolve:function(e){var t=a.getForPath(e).reduce(function(e,t){var n=o.select(t);return n?(i.isRelative(n.url)?e.url=i.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new c.default},new c.default);if(!i.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(a=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.dashManifestModel&&(t=e.dashManifestModel)}},a=(0,u.default)(n).create(),o=(0,l.default)(n).create(),r.on(h.default.SERVICE_LOCATION_BLACKLIST_CHANGED,s,e),e}a.__dashjs_factory_name="BaseURLController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{140:140,196:196,210:210,47:47,48:48,53:53,82:82}],106:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),s=r(e(47));function a(e){e=e||{};var t=[],n=(0,s.default)(this.context).getInstance(),r=e.updateEventName,i=e.addBlacklistEventName;function a(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}))}function o(e){a(e.entry)}return function(){i&&n.on(i,o,this)}(),{add:a,contains:function(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[]}}}a.__dashjs_factory_name="BlackListController",n.default=i.default.getClassFactory(a),t.exports=n.default},{47:47,48:48}],107:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var pe=r(e(101)),ge=r(e(141)),me=r(e(97)),ye=r(e(96)),ve=r(e(104)),_e=r(e(110)),be=r(e(47)),Te=r(e(53)),Ee=r(e(197)),i=r(e(48)),Se=r(e(46)),we=r(e(203)),Ae=r(e(215)),Ce=r(e(50)),Re=e(235),Ie="bufferLoaded",Me="bufferStalled",Oe="BufferController";function a(e){e=e||{};var f=this.context,o=(0,be.default)(f).getInstance(),t=e.metricsModel,u=e.mediaPlayerModel,n=e.errHandler,r=e.streamController,i=e.mediaController,h=e.adapter,a=e.textController,s=e.abrController,l=e.playbackController,d=e.type,c=e.streamProcessor,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,D=void 0,k=void 0,P=void 0,L=void 0;function x(e,t){if(!M||!e||!c)return null;if(b)try{"function"==typeof(S=t&&t[d]?(0,me.default)(f).create(b,e,j.bind(this),t[d]):(0,me.default)(f).create(b,e,j.bind(this))).getBuffer().initialize&&S.getBuffer().initialize(d,c)}catch(e){g.fatal("Caught error on create SourceBuffer: "+e),n.mediaSourceError("Error creating "+d+" source buffer."),n.error(new Ae.default(Ce.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Ce.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+d))}else S=(0,ye.default)(f).create(j.bind(this));return ie(c.getRepresentationInfo(m).MSETimeOffset),S}function N(e){e.fragmentModel===c.getFragmentModel()&&(g.info("Init fragment finished loading saving to",d+"'s init cache"),M.save(e.chunk),g.debug("Append Init fragment",d," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),B(e.chunk))}function F(e){if(e.fragmentModel===c.getFragmentModel()){var t=e.chunk,n=t.bytes,r=t.quality,i=c.getRepresentationInfo(r),a=h.getEventsFor(i.mediaInfo,c),o=h.getEventsFor(i,c);if(a&&0<a.length||o&&0<o.length){var s=function(e,t,n,r){for(var i=Math.max(!t||isNaN(t.startTime)?0:t.startTime,0),a=[],o=[],s=n.concat(r),u=0,l=s.length;u<l;u++)a[s[u].schemeIdUri+"/"+s[u].value]=s[u];var d=(0,Ee.default)(f).getInstance().parse(e).getBoxes("emsg");for(u=0,l=d.length;u<l;u++){var c=h.getEvent(d[u],a,i);c&&o.push(c)}return o}(n,c.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],a,o);c.addInbandEvents(s)}if(P){L=t;var u=S&&S.getAllBufferRanges();u&&0<u.length&&.5<l.getTimeToStreamEnd()&&(g.debug("Clearing buffer because track changed - "+(u.end(u.length-1)+.5)),te([{start:0,end:u.end(u.length-1)+.5,force:!0}]))}else B(t)}}function B(e){S.append(e),e.mediaInfo.type===pe.default.VIDEO&&o.trigger(Te.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function U(e){if(e&&0<e.length)for(var t=0,n=e.length;t<n;t++)g.debug("Buffered Range for type:",d,":",e.start(t)," - ",e.end(t)," currentTime = ",l.getTime())}function j(e){if(e.error){if(22===e.error.code&&(_=.8*ce(),g.warn("Quota exceeded for type: "+d+", Critical Buffer: "+_),0<_)){var t=Math.max(.2*_,1),n=_-t;u.setBufferToKeep(parseFloat(t.toFixed(5))),u.setBufferAheadToKeep(parseFloat(n.toFixed(5)))}22!==e.error.code&&fe()||(g.warn("Clearing playback buffer to overcome quota exceed situation for type: "+d),o.trigger(Te.default.QUOTA_EXCEEDED,{sender:p,criticalBufferLevel:_}),V())}else{(C=e.chunk)&&!isNaN(C.index)&&(T=Math.max(C.index,T),$());var r=S.getAllBufferRanges();if(C.segmentType===Re.HTTPRequest.MEDIA_SEGMENT_TYPE)U(r),K();else if(P){var i=l.getTime();g.debug("AppendToBuffer seek target should be "+i),c.getScheduleController().setSeekTarget(i),h.setIndexHandlerTime(c,i)}var a={sender:p,quality:C.quality,startTime:C.start,index:C.index,bufferedRanges:r};C&&!C.endFragment?o.trigger(Te.default.BYTES_APPENDED,a):C&&o.trigger(Te.default.BYTES_APPENDED_END_FRAGMENT,a)}}function G(e){m!==e.newQuality&&d===e.mediaType&&c.getStreamInfo().id===e.streamInfo.id&&(ie(c.getRepresentationInfo(e.newQuality).MSETimeOffset),m=e.newQuality)}function H(){y&&(y=!(D=!0),E=Number.POSITIVE_INFINITY),d!==pe.default.FRAGMENTED_TEXT?V():K()}function q(){O=void 0}function V(){var e=function(){var e=[],t=S.getAllBufferRanges();if(!t||0===t.length)return e;var n=l.getTime(),r=t.end(t.length-1)+.5,i=c.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i){var a={start:0,end:i.startTime-.5},o=c.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0];o&&o.startTime!=i.startTime&&(a.end=o.startTime),a.start<a.end&&a.end>t.start(0)&&e.push(a);var s={start:i.startTime+i.duration+.5,end:r},u=c.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0];u&&u.startTime!==i.startTime&&(s.start=u.startTime+u.duration+.5),s.start<s.end&&s.start<r&&e.push(s)}else g.debug("getAllRangesWithSafetyFactor for",d,"- No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r});return e}();e&&0!==e.length||K(),te(e)}function K(){(!P||d===pe.default.FRAGMENTED_TEXT&&a.isTextEnabled())&&(X(),Q())}function Y(){J()}function W(){J()}function z(e,t){var n=S.getAllBufferRanges(),r=0,i=0,a=null,o=null,s=0,u=void 0,l=void 0,d=t||.15;if(null!=n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===a)s=Math.abs(r-e),r<=e&&e<i?(a=r,o=i):s<=d&&(a=r,o=i);else{if(!((s=r-o)<=d))break;o=i}if(null!==a)return{start:a,end:o}}return null}function X(){l&&(v=function(e,t){var n;return null===(n=z(e,t))?0:n.end-e}(function(){var e=l.getTime();if(O){var t=S.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),O))}return e}()||0),o.trigger(Te.default.BUFFER_LEVEL_UPDATED,{sender:p,bufferLevel:v}),J())}function Q(){c&&r&&c.getStreamInfo()&&(t.addBufferState(d,A,c.getScheduleController().getBufferTarget()),t.addBufferLevel(d,new Date,1e3*v))}function $(){E-1<=T&&!y&&void 0===S.discharge&&(y=!0,g.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),o.trigger(Te.default.BUFFERING_COMPLETED,{sender:p,streamInfo:c.getStreamInfo()}))}function J(){"audio"!==d&&"video"!==d||(D&&!y&&l&&l.getTimeToStreamEnd()-v<.5&&(y=!(D=!1),g.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),o.trigger(Te.default.BUFFERING_COMPLETED,{sender:p,streamInfo:c.getStreamInfo()})),(!u.getLowLatencyEnabled()&&v<.5||0===v)&&!y?Z(Me):(y||v>=u.getStableBufferTime())&&Z(Ie))}function Z(e){A===e||e===Me&&0===l.getTime()||d===pe.default.FRAGMENTED_TEXT&&!a.isTextEnabled()||(A=e,Q(),o.trigger(Te.default.BUFFER_LEVEL_STATE_CHANGED,{sender:p,state:e,mediaType:d,streamInfo:c.getStreamInfo()}),o.trigger(e===Ie?Te.default.BUFFER_LOADED:Te.default.BUFFER_EMPTY,{mediaType:d}),g.debug(e===Ie?"Got enough buffer to start for "+d:"Waiting for more buffer before starting playback for "+d))}function ee(){S&&d!==pe.default.FRAGMENTED_TEXT&&(y||te(function(){var e=[],t=S.getAllBufferRanges();if(!t||0===t.length)return e;var n=l.getTime(),r={start:Math.max(0,n-u.getBufferToKeep()),end:n+u.getBufferAheadToKeep()},i=c.getFragmentModel().getRequests({state:ge.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r.start=Math.min(i.startTime,r.start),r.end=Math.max(i.startTime+i.duration,r.end);else if(0===n&&l.getIsDynamic())return[];if(t.start(0)<=r.start){for(var a={start:0,end:r.start},o=0;o<t.length&&t.end(o)<=r.start;o++)a.end=t.end(o);a.start<a.end&&e.push(a)}if(t.end(t.length-1)>=r.end){var s={start:r.end,end:t.end(t.length-1)+.01};s.start<s.end&&e.push(s)}return e}()))}function te(e){e&&S&&0!==e.length&&(k.push.apply(k,e),I||ne())}function ne(){if(0===k.length||!S)return g.debug("Nothing to prune, halt pruning"),void(I=!(k=[]));var e=S.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return g.debug("SourceBuffer is empty (or does not exist), halt pruning"),void(I=!(k=[]));var t=k.shift();g.debug("Removing",d,"buffer from:",t.start,"to",t.end),I=!0;var n=l.getTime();n<t.end&&(y=!1,T=0,P||(c.getScheduleController().setSeekTarget(n),h.setIndexHandlerTime(c,n))),S.remove(t.start,t.end,t.force)}function re(e){S===e.buffer&&(g.debug("onRemoved buffer from:",e.from,"to",e.to),U(S.getAllBufferRanges()),0===k.length&&(I=!1),e.unintended&&(g.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),h.setIndexHandlerTime(c,e.from)),I?ne():(P?(P=!1,L&&B(L)):(g.debug("onRemoved : call updateBufferLevel"),X()),o.trigger(Te.default.BUFFER_CLEARED,{sender:p,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:fe()})))}function ie(e){S&&S.updateTimestampOffset&&S.updateTimestampOffset(e)}function ae(e){e.sender.getStreamProcessor()!==c||e.error||ie(e.currentRepresentation.MSETimeOffset)}function oe(e){e.fragmentModel===c.getFragmentModel()&&(E=e.request.index,$())}function se(e){var t=S&&S.getAllBufferRanges();t&&e.newMediaInfo.type===d&&e.newMediaInfo.streamInfo.id===c.getStreamInfo().id&&(g.info("Track change asked"),i.getSwitchMode(d)===_e.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&0<t.length&&.5<l.getTimeToStreamEnd()&&(y=!1,E=Number.POSITIVE_INFINITY))}function ue(){++R*(u.getWallclockTimeUpdateInterval()/1e3)>=u.getBufferPruningInterval()&&(R=0,ee())}function le(){J()}function de(e,t){b=e,S&&t&&"function"==typeof S.discharge&&(w=S,x(t))}function ce(){var e,t=S.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function fe(){return ce()<_}function he(e,t){_=Number.POSITIVE_INFINITY,A=void 0,m=ve.default.QUALITY_DEFAULT,E=Number.POSITIVE_INFINITY,C=null,D=I=y=!1,R=v=T=0,k=[],S&&(e||S.abort(),S.reset(t),S=null),P=!1}return p={getBufferControllerType:function(){return Oe},initialize:function(e){de(e),m=s.getQualityFor(d,c.getStreamInfo()),o.on(Te.default.DATA_UPDATE_COMPLETED,ae,this),o.on(Te.default.INIT_FRAGMENT_LOADED,N,this),o.on(Te.default.MEDIA_FRAGMENT_LOADED,F,this),o.on(Te.default.QUALITY_CHANGE_REQUESTED,G,this),o.on(Te.default.STREAM_COMPLETED,oe,this),o.on(Te.default.PLAYBACK_PLAYING,W,this),o.on(Te.default.PLAYBACK_PROGRESS,K,this),o.on(Te.default.PLAYBACK_TIME_UPDATED,K,this),o.on(Te.default.PLAYBACK_RATE_CHANGED,le,this),o.on(Te.default.PLAYBACK_SEEKING,H,this),o.on(Te.default.PLAYBACK_SEEKED,q,this),o.on(Te.default.PLAYBACK_STALLED,Y,this),o.on(Te.default.WALLCLOCK_TIME_UPDATED,ue,this),o.on(Te.default.CURRENT_TRACK_CHANGED,se,this,be.default.EVENT_PRIORITY_HIGH),o.on(Te.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this)},createBuffer:x,dischargePreBuffer:function(){if(S&&w&&"function"==typeof w.discharge){var e=w.getAllBufferRanges();if(0<e.length){for(var t="Beginning "+d+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";g.debug(t)}else g.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=w.discharge(),i=null,a=0;a<r.length;a++){var o=r[a],s=M.extract(o.streamId,o.representationId);s&&(i!==s&&(S.append(s),i=s),S.append(o))}w.reset(),w=null}},getType:function(){return d},getStreamProcessor:function(){return c},setSeekStartTime:function(e){O=e},getBuffer:function(){return S},setBuffer:function(e){S=e},getBufferLevel:function(){return v},getRangeAt:z,setMediaSource:de,getMediaSource:function(){return b},getIsBufferingCompleted:function(){return y},switchInitData:function(e,t,n){var r=M.extract(e,t);P=!0===n&&n,r?(g.info("Append Init fragment",d," with representationId:",r.representationId," and quality:",r.quality,", data size:",r.bytes.byteLength),B(r)):o.trigger(Te.default.INIT_REQUESTED,{sender:p})},getIsPruningInProgress:function(){return I},reset:function(e,t){o.off(Te.default.DATA_UPDATE_COMPLETED,ae,this),o.off(Te.default.QUALITY_CHANGE_REQUESTED,G,this),o.off(Te.default.INIT_FRAGMENT_LOADED,N,this),o.off(Te.default.MEDIA_FRAGMENT_LOADED,F,this),o.off(Te.default.STREAM_COMPLETED,oe,this),o.off(Te.default.CURRENT_TRACK_CHANGED,se,this),o.off(Te.default.PLAYBACK_PLAYING,W,this),o.off(Te.default.PLAYBACK_PROGRESS,K,this),o.off(Te.default.PLAYBACK_TIME_UPDATED,K,this),o.off(Te.default.PLAYBACK_RATE_CHANGED,le,this),o.off(Te.default.PLAYBACK_SEEKING,H,this),o.off(Te.default.PLAYBACK_SEEKED,q,this),o.off(Te.default.PLAYBACK_STALLED,Y,this),o.off(Te.default.WALLCLOCK_TIME_UPDATED,ue,this),o.off(Te.default.SOURCEBUFFER_REMOVE_COMPLETED,re,this),he(e,t)}},g=(0,Se.default)(f).getInstance().getLogger(p),M=(0,we.default)(f).getInstance(),he(),p}a.__dashjs_factory_name=Oe;var o=i.default.getClassFactory(a);o.BUFFER_LOADED=Ie,o.BUFFER_EMPTY=Me,i.default.updateClassFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,104:104,110:110,141:141,197:197,203:203,215:215,235:235,46:46,47:47,48:48,50:50,53:53,96:96,97:97}],108:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),S=r(e(46)),w=r(e(47)),A=r(e(53)),C=r(e(149));function a(){var l="urn:mpeg:dash:event:2012",d=1,c="urn:mpeg:dash:event:callback:2015",f=1,h=this.context,p=(0,w.default)(h).getInstance(),e=void 0,g=void 0,r=void 0,i=void 0,m=void 0,t=void 0,n=void 0,a=void 0,y=void 0,o=void 0,s=void 0;function u(){s=!1,r={},i={},m={},t=null,n=100,a=Date.now()/1e3}function v(){if(!y||!o)throw new Error("setConfig function has to be called previously")}function _(){null!==t&&s&&(clearInterval(t),t=null,s=!1)}function b(e){if(e.eventStream.value==d){var t=e.eventStream.timescale||1,n=e.presentationTime/t,r=void 0;r=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/t,g.info("Manifest validity changed: Valid until: "+n+"; remaining duration: "+r),p.trigger(A.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:r,newManifestValidAfter:NaN})}}function T(){var e=o.getTime(),t=e-a;E(i,t,a=e),E(r,t,e),function(){if(m)for(var e=o.getTime(),t=Object.keys(m),n=0;n<t.length;n++){var r=t[n],i=m[r];null!==i&&(i.duration+i.presentationTime)/i.eventStream.timescale<e&&(g.debug("Remove Event "+r+" at time "+e),i=null,delete m[r])}}()}function E(e,t,n){var r,i;if(e)for(var a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],u=e[s];void 0!==u&&(0==(r=u.presentationTime/u.eventStream.timescale)||r<=n&&n<r+t)&&(g.debug("Start Event "+s+" at "+n),0<u.duration&&(m[s]=u),u.eventStream.schemeIdUri==l&&u.eventStream.value==d?0===u.duration&&0===u.presentationTimeDelta||(v(),y.refreshManifest()):u.eventStream.schemeIdUri==c&&u.eventStream.value==f?(i=u.messageData,(0,C.default)(h).create({}).load({method:"get",url:i,request:{responseType:"arraybuffer"}})):p.trigger(u.eventStream.schemeIdUri,{event:u}),delete e[s])}}return e={addInlineEvents:function(e){if(v(),r={},e)for(var t=0;t<e.length;t++){var n=e[t];r[n.id]=n,g.debug("Add inline event with id "+n.id)}g.debug("Added "+e.length+" inline events")},addInbandEvents:function(e){v();for(var t=0;t<e.length;t++){var n=e[t];n.id in i?g.debug("Repeated event with id "+n.id):(n.eventStream.schemeIdUri===l&&void 0===i[n.id]&&b(n),i[n.id]=n,g.debug("Add inband event with id "+n.id))}},stop:_,start:function(){v(),g.debug("Start Event Controller"),s||isNaN(n)||(s=!0,t=setInterval(T,n))},setConfig:function(e){e&&(e.manifestUpdater&&(y=e.manifestUpdater),e.playbackController&&(o=e.playbackController))},reset:function(){_(),u()}},g=(0,S.default)(h).getInstance().getLogger(e),u(),e}a.__dashjs_factory_name="EventController",n.default=i.default.getClassFactory(a),t.exports=n.default},{149:149,46:46,47:47,48:48,53:53}],109:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(101)),h=e(235),p=r(e(216)),g=r(e(141)),m=r(e(90)),y=r(e(207)),v=r(e(47)),_=r(e(53)),i=r(e(48)),b=r(e(46));function a(e){e=e||{};var n=this.context,o=(0,v.default)(n).getInstance(),r=e.errHandler,i=e.mediaPlayerModel,a=e.metricsModel,t=void 0,s=void 0,u=void 0;function l(e){return e&&e.type&&e.type===h.HTTPRequest.INIT_SEGMENT_TYPE}function d(){for(var e in u)u[e].reset();u={}}function c(e){if(u[e.request.mediaType]===e.sender){var t=e.request,n=e.response,r=l(t),i=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==f.default.AUDIO&&e.request.mediaType!==f.default.VIDEO&&e.request.mediaType!==f.default.FRAGMENTED_TEXT||o.trigger(_.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),n&&i){var a=function(e,t,n,r){var i=new p.default;return i.streamId=n,i.mediaInfo=t.mediaInfo,i.segmentType=t.type,i.start=t.startTime,i.duration=t.duration,i.end=i.start+i.duration,i.bytes=e,i.index=t.index,i.quality=t.quality,i.representationId=t.representationId,i.endFragment=r,i}(n,t,i.id,e.type!==_.default.FRAGMENT_LOADING_PROGRESS);o.trigger(r?_.default.INIT_FRAGMENT_LOADED:_.default.MEDIA_FRAGMENT_LOADED,{chunk:a,fragmentModel:e.sender})}else s.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getModel:function(e){var t=u[e];return t||(t=(0,g.default)(n).create({metricsModel:a,fragmentLoader:(0,m.default)(n).create({metricsModel:a,mediaPlayerModel:i,errHandler:r,requestModifier:(0,y.default)(n).getInstance()})}),u[e]=t),t},isInitializationRequest:l,reset:function(){o.off(_.default.FRAGMENT_LOADING_COMPLETED,c,this),o.off(_.default.FRAGMENT_LOADING_PROGRESS,c,this),d()}},s=(0,b.default)(n).getInstance().getLogger(t),d(),o.on(_.default.FRAGMENT_LOADING_COMPLETED,c,t),o.on(_.default.FRAGMENT_LOADING_PROGRESS,c,t),t}a.__dashjs_factory_name="FragmentController",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,141:141,207:207,216:216,235:235,46:46,47:47,48:48,53:53,90:90}],110:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var E=r(e(101)),S=r(e(53)),w=r(e(47)),i=r(e(48)),A=r(e(46)),C="neverReplace",R="alwaysReplace",I="highestBitrate",M="widestRange",O=I;function a(){var e=this.context,o=(0,w.default)(e).getInstance(),t=void 0,a=void 0,s=void 0,n=void 0,r=void 0,u=void 0,l=void 0,i=[R,C],d=[I,M];function c(e,t){if(!e||!t)return[];var n=t.id;return s[n]&&s[n][e]?s[n][e].list:[]}function f(e,t){return!e||!t||t&&!s[t.id]?null:s[t.id][e].current}function h(e){if(e&&e.streamInfo){var t=e.type,n=e.streamInfo,r=n.id,i=f(t,n);if(s[r]&&s[r][t]&&!v(e,i)){s[r][t].current=e,s[r][t].current&&o.trigger(S.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:i,newMediaInfo:e,switchMode:u[t]});var a=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&0<t.role.length||t.accessibility&&0<t.accessibility.length||t.audioChannelConfiguration&&0<t.audioChannelConfiguration.length?t:null}(e);a&&s[r][t].storeLastSettings&&(a.roles&&(a.role=a.roles[0],delete a.roles),a.accessibility&&(a.accessibility=a.accessibility[0]),a.audioChannelConfiguration&&(a.audioChannelConfiguration=a.audioChannelConfiguration[0]),l.setSavedMediaSettings(t,a))}}}function p(e,t){e&&t&&(n[e]=t)}function g(e){return e?n[e]:null}function m(){return r||O}function y(e){return e===E.default.AUDIO||e===E.default.VIDEO||e===E.default.TEXT||e===E.default.FRAGMENTED_TEXT||e===E.default.IMAGE}function v(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function _(){s={},n={audio:null,video:null},u={audio:R,video:C}}function b(t,e){var n=!t.lang||t.lang===e.lang,r=!t.viewpoint||t.viewpoint===e.viewpoint,i=!t.role||!!e.roles.filter(function(e){return e===t.role})[0],a=!t.accessibility||!!e.accessibility.filter(function(e){return e===t.accessibility})[0],o=!t.audioChannelConfiguration||!!e.audioChannelConfiguration.filter(function(e){return e===t.audioChannelConfiguration})[0];return n&&r&&i&&a&&o}function T(e){function t(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=Math.max.apply(Math,e.bitrateList.map(function(e){return e.bandwidth})),t<r?(t=r,n=[e]):r===t&&n.push(e)}),n}function n(e){var t=0,n=[],r=void 0;return e.forEach(function(e){r=e.representationCount,t<r?(t=r,n=[e]):r===t&&n.push(e)}),n}var r=m(),i=[];switch(r){case I:1<(i=t(e)).length&&(i=n(i));break;case M:1<(i=n(e)).length&&(i=t(e));break;default:a.warn("Track selection mode is not supported: "+r)}return i[0]}return t={checkInitialMediaSettingsForType:function(e,t){var n=g(e),r=c(e,t),i=[];e!==E.default.FRAGMENTED_TEXT?(n||p(e,n=l.getSavedMediaSettings(e)),r&&0!==r.length&&(n&&r.forEach(function(e){b(n,e)&&i.push(e)}),0===i.length?h(T(r)):1<i.length?h(T(i)):h(i[0]))):h(r[0])},addTrack:function(e){if(e){var t=e.type;if(y(t)){var n=e.streamInfo.id;s[n]||(s[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=s[n][t].list,i=0,a=r.length;i<a;++i)if(v(r[i],e))return;r.push(e);var o=g(t);o&&b(o,e)&&!f(t,e.streamInfo)&&h(e)}}},getTracksFor:c,getCurrentTrackFor:f,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return s[n]&&s[n][t]&&v(s[n][t].current,e)},setTrack:h,setInitialSettings:p,getInitialSettings:g,setSwitchMode:function(e,t){-1!==i.indexOf(t)?u[e]=t:a.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return u[e]},setSelectionModeForInitialTrack:function(e){-1!==d.indexOf(e)?r=e:a.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:m,isMultiTrackSupportedByType:y,isTracksEqual:v,setConfig:function(e){e&&e.domStorage&&(l=e.domStorage)},reset:_},a=(0,A.default)(e).getInstance().getLogger(t),_(),t}a.__dashjs_factory_name="MediaController";var o=i.default.getSingletonFactory(a);o.TRACK_SWITCH_MODE_NEVER_REPLACE=C,o.TRACK_SWITCH_MODE_ALWAYS_REPLACE=R,o.TRACK_SELECTION_MODE_HIGHEST_BITRATE=I,o.TRACK_SELECTION_MODE_WIDEST_RANGE=M,o.DEFAULT_INIT_TRACK_SELECTION_MODE=O,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,46:46,47:47,48:48,53:53}],111:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(46));function o(){var e=void 0,i=void 0,t=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&0<=t&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){var t=e.sourceBuffers,n=t.length;if("open"===e.readyState){for(var r=0;r<n;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}i.info("call to mediaSource endOfStream"),e.endOfStream()}}},i=(0,a.default)(t).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{46:46,48:48}],112:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ge=r(e(101)),me=r(e(107)),ye=r(e(47)),ve=r(e(53)),i=r(e(48)),_e=r(e(46));function a(){var e=this.context,i=(0,ye.default)(e).getInstance(),t=void 0,s=void 0,u=void 0,l=void 0,d=void 0,o=void 0,c=void 0,n=void 0,f=void 0,r=void 0,h=void 0,a=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0;function I(e){!v&&e.fromStreamInfo&&void 0!==p[e.fromStreamInfo.id]&&(delete m[e.fromStreamInfo.id],delete p[e.fromStreamInfo.id])}function M(){return parseFloat((O()-N()).toFixed(5))}function O(){var e=V(!0),t=v&&y?e-y.start:0;return e+(y?y.duration-t:t)}function D(){y&&f&&f.getElement()?f.play():b=!0}function k(){return y&&f?f.isPaused():null}function P(){y&&f&&f.pause()}function L(){return y&&f?f.isSeeking():null}function x(e,t,n){y&&f&&(!0===n?e!==f.getTime()&&(f.removeEventListener("seeking",ee),s.info("Requesting seek to time: "+e),f.setCurrentTime(e,t)):(i.trigger(ve.default.PLAYBACK_SEEK_ASKED),s.info("Requesting seek to time: "+e),f.setCurrentTime(e,t)))}function N(){return y&&f?f.getTime():null}function F(){var e=N();if(v&&!isNaN(E)){var t=E/1e3;t<e&&(e-=t)}return e}function B(){return y&&f?f.getPlaybackRate():null}function U(){return y&&f?f.getEnded():null}function j(){return v}function G(){if(!v||isNaN(E))return NaN;var e=F();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*r.getClientTimeOffset();return Math.max(((t-E-1e3*e)/1e3).toFixed(3),0)}function H(){h=NaN,b=!1,p={},E=g=0,m={},f&&(i.off(ve.default.DATA_UPDATE_COMPLETED,z,this),i.off(ve.default.BUFFER_LEVEL_STATE_CHANGED,he,this),i.off(ve.default.BYTES_APPENDED_END_FRAGMENT,ce,this),i.off(ve.default.LOADING_PROGRESS,fe,this),i.off(ve.default.PERIOD_SWITCH_STARTED,I,this),i.off(ve.default.PLAYBACK_PROGRESS,le,this),i.off(ve.default.PLAYBACK_TIME_UPDATED,le,this),i.off(ve.default.PLAYBACK_ENDED,se,this),Y(),f.removeEventListener("canplay",X),f.removeEventListener("play",Q),f.removeEventListener("waiting",$),f.removeEventListener("playing",J),f.removeEventListener("pause",Z),f.removeEventListener("error",ue),f.removeEventListener("seeking",ee),f.removeEventListener("seeked",te),f.removeEventListener("timeupdate",ne),f.removeEventListener("progress",re),f.removeEventListener("ratechange",ie),f.removeEventListener("loadedmetadata",ae),f.removeEventListener("stalled",pe),f.removeEventListener("ended",oe)),v=y=f=a=null}function q(){var e=R.getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);0<=n&&y&&n<y.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-y.manifestInfo.DVRWindowSize,y.manifestInfo.availableFrom.getTime()/1e3+y.start)+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function V(e,t){var n=void 0,r=NaN;if(e)r=y?y.start:r;else{var i=q();r=i?isNaN(i.fragS)?i.fragT:i.fragS:0}if(v)!isNaN(r)&&y&&(n=r-y.manifestInfo.availableFrom.getTime()/1e3,(h<n||n<(isNaN(t)?NaN:t-y.manifestInfo.DVRWindowSize))&&(n=null)),n=n||h;else if(y)if(!isNaN(r)&&r<Math.max(y.manifestInfo.duration,y.duration)&&0<=r)n=r;else{var a=p[y.id];n=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,y.start):y.start}return n}function K(){if(null===a){a=setInterval(function(){i.trigger(ve.default.WALLCLOCK_TIME_UPDATED,{isDynamic:v,time:new Date}),j()&&k()&&function(){var e=Date.now();(!T||T+500<e)&&(T=e,ne())}()},_.getWallclockTimeUpdateInterval())}}function Y(){clearInterval(a),a=null}function W(){if(!k()&&v&&0!==f.getReadyState()){var e=F(),t=function(e){var t=l.getReadOnlyMetricsFor(ge.default.VIDEO)||l.getReadOnlyMetricsFor(ge.default.AUDIO),n=d.getCurrentDVRInfo(t),r=n?n.range:null,i=void 0;if(!r)return NaN;if(e>r.end)i=Math.max(r.end-2*y.manifestInfo.minBufferTime,r.start);else{if(!(e+.25<r.start))return e;i=r.start}return i}(e);!isNaN(t)&&t!==e&&x(t)}}function z(e){if(!e.error){var t=n.convertDataToRepresentationInfo(e.currentRepresentation).mediaInfo.streamInfo;y.id===t.id&&(y=t,W())}}function X(){i.trigger(ve.default.CAN_PLAY)}function Q(){s.info("Native video element event: play"),W(),K(),i.trigger(ve.default.PLAYBACK_STARTED,{startTime:N()})}function $(){s.info("Native video element event: waiting"),i.trigger(ve.default.PLAYBACK_WAITING,{playingTime:N()})}function J(){s.info("Native video element event: playing"),i.trigger(ve.default.PLAYBACK_PLAYING,{playingTime:N()})}function Z(){s.info("Native video element event: pause"),i.trigger(ve.default.PLAYBACK_PAUSED,{ended:U()})}function ee(){var e=N();s.info("Seeking to: "+e),K(),i.trigger(ve.default.PLAYBACK_SEEKING,{seekTime:e})}function te(){s.info("Native video element event: seeked"),i.trigger(ve.default.PLAYBACK_SEEKED),f.addEventListener("seeking",ee)}function ne(){y&&i.trigger(ve.default.PLAYBACK_TIME_UPDATED,{timeToEnd:M(),time:N()})}function re(){i.trigger(ve.default.PLAYBACK_PROGRESS)}function ie(){var e=B();s.info("Native video element event: ratechange: ",e),i.trigger(ve.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ae(){s.info("Native video element event: loadedmetadata"),i.trigger(ve.default.PLAYBACK_METADATA_LOADED),K()}function oe(){s.info("Native video element event: ended"),P(),Y(),i.trigger(ve.default.PLAYBACK_ENDED,{isLast:u.getActiveStreamInfo().isLast})}function se(e){a&&e.isLast&&(s.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),f.setCurrentTime(O()),P(),Y())}function ue(e){var t=e.target||e.srcElement;i.trigger(ve.default.PLAYBACK_ERROR,{error:t.error})}function le(){v&&_.getLowLatencyEnabled()&&0<_.getCatchUpPlaybackRate()&&!k()&&!L()&&(0<_.getCatchUpPlaybackRate()&&0<N()&&Math.abs(G()-_.getLiveDelay())>_.getLowLatencyMinDrift()?function(){if(f){var e=_.getCatchUpPlaybackRate(),t=_.getLiveDelay(),n=G()-t,r=5*n,i=2*e/(1+Math.pow(Math.E,-r)),a=1-e+i;if(A){var o=function(){var n=null;return u.getActiveStreamProcessors().forEach(function(e){var t=e.getBufferLevel();n=null===n?t:Math.min(n,t)}),n}();t/2<o?A=!1:0<n&&(a=1)}Math.abs(f.getPlaybackRate()-a)>C&&f.setPlaybackRate(a),0<_.getLowLatencyMaxDriftBeforeSeeking()&&!w&&n>_.getLowLatencyMaxDriftBeforeSeeking()?(s.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),w=!0,function(){var e=l.getReadOnlyMetricsFor(ge.default.VIDEO)||l.getReadOnlyMetricsFor(ge.default.AUDIO),t=d.getCurrentDVRInfo(e);x((t?t.range:null).end-_.getLiveDelay(),!0,!1)}()):w=!1}}():de())}function de(){f&&f.setPlaybackRate(1)}function ce(e){var t,n=void 0,r=e.bufferedRanges;if(r&&r.length&&(!p[y.id]||!0!==p[y.id].started)){var i=e.sender.getType();void 0===m[y.id]&&(m[y.id]=[]),m[y.id][i]=r,void 0===p[y.id]&&(p[y.id]=[],p[y.id].started=!1),void 0===p[y.id][i]&&(p[y.id][i]=Math.max(r.start(0),y.start));var a=u.isTrackTypePresent(ge.default.VIDEO),o=u.isTrackTypePresent(ge.default.AUDIO);t=V(!1),o&&a?isNaN(p[y.id].audio)||isNaN(p[y.id].video)||(r=p[y.id].audio<p[y.id].video?(n=p[y.id].video>t?p[y.id].video:t,m[y.id].audio):(n=p[y.id].audio>t?p[y.id].audio:t,m[y.id].video),function(e,t){if(t&&0<t.length)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}(n,r)&&(L()||S||0===n||x(n,!0,!0),p[y.id].started=!0)):p[y.id][i]&&(n=p[y.id][i]>t?p[y.id][i]:t,L()||S||x(n,!1,!0),p[y.id].started=!0)}}function fe(e){if(!1===e.stream&&_.getLowLatencyEnabled()&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;t>_.getLiveDelay()&&(s.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2)),_.setLiveDelay(t))}}function he(e){e.streamInfo.id===y.id&&(_.getLowLatencyEnabled()?e.state!==me.default.BUFFER_EMPTY||L()||A||(A=!0,de()):f.setStallState(e.mediaType,e.state===me.default.BUFFER_EMPTY))}function pe(e){i.trigger(ve.default.PLAYBACK_STALLED,{e:e})}return t={initialize:function(e,t){y=e,f.addEventListener("canplay",X),f.addEventListener("play",Q),f.addEventListener("waiting",$),f.addEventListener("playing",J),f.addEventListener("pause",Z),f.addEventListener("error",ue),f.addEventListener("seeking",ee),f.addEventListener("seeked",te),f.addEventListener("timeupdate",ne),f.addEventListener("progress",re),f.addEventListener("ratechange",ie),f.addEventListener("loadedmetadata",ae),f.addEventListener("stalled",pe),f.addEventListener("ended",oe),v=y.manifestInfo.isDynamic,A=w=!1,h=y.start,S=t;var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",r=/safari/.test(n)&&!/chrome/.test(n);C=r?.25:.02,i.on(ve.default.DATA_UPDATE_COMPLETED,z,this),i.on(ve.default.BYTES_APPENDED_END_FRAGMENT,ce,this),i.on(ve.default.LOADING_PROGRESS,fe,this),i.on(ve.default.BUFFER_LEVEL_STATE_CHANGED,he,this),i.on(ve.default.PERIOD_SWITCH_STARTED,I,this),i.on(ve.default.PLAYBACK_PROGRESS,le,this),i.on(ve.default.PLAYBACK_TIME_UPDATED,le,this),i.on(ve.default.PLAYBACK_ENDED,se,this),b&&(b=!1,D())},setConfig:function(e){e&&(e.streamController&&(u=e.streamController),e.metricsModel&&(l=e.metricsModel),e.dashMetrics&&(d=e.dashMetrics),e.manifestModel&&(o=e.manifestModel),e.dashManifestModel&&(c=e.dashManifestModel),e.mediaPlayerModel&&(_=e.mediaPlayerModel),e.adapter&&(n=e.adapter),e.videoModel&&(f=e.videoModel),e.timelineConverter&&(r=e.timelineConverter),e.uriFragmentModel&&(R=e.uriFragmentModel))},getStartTimeFromUriParameters:q,getStreamStartTime:V,getTimeToStreamEnd:M,getTime:N,getNormalizedTime:F,getPlaybackRate:B,getPlayedRanges:function(){return y&&f?f.getPlayedRanges():null},getEnded:U,getIsDynamic:j,getStreamController:function(){return u},setLiveStartTime:function(e){h=e},getLiveStartTime:function(){return h},computeLiveDelay:function(e,t){var n=c.getMpd(o.getValue()),r=void 0,i=void 0;if(r=_.getUseSuggestedPresentationDelay()&&n.hasOwnProperty(ge.default.SUGGESTED_PRESENTATION_DELAY)?n.suggestedPresentationDelay:_.getLowLatencyEnabled()?0:_.getLiveDelay()?_.getLiveDelay():isNaN(e)?2*y.manifestInfo.minBufferTime:e*_.getLiveDelayFragmentCount(),n.availabilityStartTime&&(E=n.availabilityStartTime.getTime()),0<t){var a=Math.max(t-10,t/2);i=Math.min(r,a)}else i=r;return g=i},getLiveDelay:function(){return g},getCurrentLiveLatency:G,play:D,isPaused:k,pause:P,isSeeking:L,seek:x,reset:H},s=(0,_e.default)(e).getInstance().getLogger(t),H(),t}a.__dashjs_factory_name="PlaybackController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,107:107,46:46,47:47,48:48,53:53}],113:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var me=r(e(101)),ye=e(237),ve=r(e(104)),_e=r(e(107)),be=r(e(186)),Te=r(e(187)),Ee=r(e(141)),Se=r(e(47)),we=r(e(53)),i=r(e(48)),Ae=r(e(46)),Ce=r(e(110)),Re=e(77);function a(e){e=e||{};var t=this.context,n=(0,Se.default)(t).getInstance(),s=e.metricsModel,u=e.adapter,l=e.dashMetrics,d=e.dashManifestModel,c=e.timelineConverter,f=e.mediaPlayerModel,h=e.abrController,p=e.playbackController,i=e.streamController,a=e.textController,g=e.type,m=e.streamProcessor,y=e.mediaController,r=void 0,v=void 0,_=void 0,b=void 0,o=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,D=void 0,k=void 0,P=void 0,L=void 0,x=void 0,N=void 0,F=void 0,B=void 0;function U(){b&&!m.isBufferingCompleted()?(v.debug("Schedule Controller starts"),pe(),T=!1,o=o&&!1,H(0)):v.warn("Start denied to Schedule Controller")}function j(){T||(v.debug("Schedule Controller stops"),T=!0,clearTimeout(R))}function G(){var e=m.getBufferController();if(T||A||!e||p.isPaused()&&!f.getScheduleWhilePaused()||!(g!==me.default.FRAGMENTED_TEXT&&g!==me.default.TEXT||a.isTextEnabled()))v.debug("Schedule stop!");else if(e.getIsBufferingCompleted())v.debug("Schedule stop because buffering is completed!");else{!function(){var e=p.getTime(),t=1.5*b.fragmentDuration,n=_.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(n&&-1===L.indexOf(n)&&!d.getIsTextTrack(g)){var r=f.getFastSwitchEnabled(),i=m.getBufferLevel(),a=h.getAbandonmentStateFor(g),o=!y.isCurrentTrack(n.mediaInfo)&&y.getSwitchMode(n.mediaInfo.type)===Ce.default.TRACK_SWITCH_MODE_NEVER_REPLACE,s=n.quality<b.quality;r&&(o||s)&&t<=i&&a!==ve.default.ABANDON_LOAD?(Y(n),B=!0,v.debug("Reloading outdated fragment at index: ",n.index)):n.quality>b.quality&&!N&&ce(p.getTime()+m.getBufferLevel())}}();var t=0<L.length,r=m.getStreamInfo();if(N||isNaN(P)||x||t||function(e,t){k[t]=k[t]||{};var n=h.getTopQualityIndexFor(e,t);return k[t][e]!=n&&(v.info("Top quality "+e+" index has changed from "+k[t][e]+" to "+n),k[t][e]=n,!0)}(b.mediaInfo.type,r.id)||M.execute(m,i.isTrackTypePresent(me.default.VIDEO))){V(!0),t||x||h.checkPlaybackQuality(g),function(){var e=m.getFragmentController();if(b.quality===P&&!x||N){var t=L.shift();if(e.isInitializationRequest(t))m.switchInitData(t.representationId);else{var n=void 0;m.getBufferController().getIsPruningInProgress()||(n=O.execute(m,I,t),ce(NaN),n&&!t&&(isNaN(n.startTime+n.duration)||u.setIndexHandlerTime(m,n.startTime+n.duration),n.delayLoadingTime=(new Date).getTime()+C,fe(0)),!n&&r.manifestInfo&&r.manifestInfo.isDynamic&&v.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),n?(v.debug("Next fragment request url is "+n.url),_.executeRequest(n)):(V(!1),H(f.getLowLatencyEnabled()?100:500))}}else v.debug("Quality has changed, get init request for representationid = "+b.id),x?(N=y.getSwitchMode(g)===Ce.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,v.debug("Switch track has been asked, get init request for "+g+" with representationid = "+b.id+"bufferResetInProgress = "+N),m.switchInitData(b.id,N),x=!1):m.switchInitData(b.id),P=b.quality}()}else H(500)}}function H(e){clearTimeout(R),R=setTimeout(G,e)}function q(e){e.sender&&e.sender.getStreamProcessor()===m&&K(b.quality)}function V(e){A!==e?A=e:v.debug("isFragmentProcessingInProgress is already equal to",e)}function K(e){var t=u.getInitRequest(m,e);t&&(V(!0),t.url=(0,Re.replaceTokenForTemplate)(t.url,"Bandwidth",b?b.bandwidth:null),_.executeRequest(t))}function Y(e){L.push(e)}function W(e){if(g===e.mediaType&&m.getStreamInfo().id===e.streamInfo.id){if(null==(b=m.getRepresentationInfo(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");he(new Date,ye.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),pe()}}function z(e){if(p&&_){var t=_.getRequests({state:Ee.default.FRAGMENT_MODEL_EXECUTED,time:p.getTime(),threshold:0})[0];t&&p.getTime()>=t.startTime&&((!D.mediaInfo||t.mediaInfo.type===D.mediaInfo.type&&t.mediaInfo.id!==D.mediaInfo.id)&&e&&n.trigger(we.default.TRACK_CHANGE_RENDERED,{mediaType:g,oldMediaInfo:D.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===D.quality&&t.adaptationIndex===D.adaptationIndex||!e||n.trigger(we.default.QUALITY_CHANGE_RENDERED,{mediaType:g,oldQuality:D.quality,newQuality:t.quality}),D={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function X(e){e.error||e.sender.getStreamProcessor()!==m||(b=u.convertDataToRepresentationInfo(e.currentRepresentation))}function Q(e){e.error||m.getStreamInfo().id!==e.streamInfo.id||(b=m.getRepresentationInfo(),o&&(p.getIsDynamic()?(c.setTimeSyncCompleted(!0),function(){var e=m.getLiveEdgeFinder();if(e){var t=e.getLiveEdge(),n=b.mediaInfo.streamInfo.manifestInfo.DVRWindowSize/2,r=t-p.computeLiveDelay(b.fragmentDuration,n),i=u.getFragmentRequest(m,b,r,{ignoreIsFinished:!0});if(i)if(f.getLowLatencyEnabled()){var a=i.duration<f.getLiveDelay()?i.startTime:i.startTime+i.duration-f.getLiveDelay();p.setLiveStartTime(a)}else p.setLiveStartTime(i.startTime);else v.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");I=p.getStreamStartTime(!1,t),m.getBufferController().setSeekStartTime(I),I>b.mediaInfo.streamInfo.start+b.mediaInfo.streamInfo.duration&&p.seek(I);var o=l.getCurrentManifestUpdate(s.getMetricsFor(me.default.STREAM));s.updateManifestUpdateInfo(o,{currentTime:I,presentationStartTime:t,latency:t-I,clientTimeOffset:c.getClientTimeOffset()})}}()):(I=p.getStreamStartTime(!1),m.getBufferController().setSeekStartTime(I))),T&&U())}function $(e){e.fragmentModel===_&&(j(),V(!1),v.info("Stream is complete"))}function J(e){e.sender===_&&(v.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),d.getIsTextTrack(g)&&V(!1),e.error&&e.request.serviceLocation&&!T&&(Y(e.request),V(!1),H(0)),N&&(F=e.request))}function Z(){z(!0)}function ee(e){if(e.sender.getStreamProcessor()===m)if(N&&!isNaN(e.startTime)&&(N=!1,_.addExecutedRequest(F)),V(!1),B&&!isNaN(e.startTime)){var t=p.getTime(),n=e.startTime+b.fragmentDuration,r=1.5*b.fragmentDuration;H(n<=t+r?0:1e3*(n-(t+r))),B=!1}else H(0)}function te(e){e.streamProcessor===m&&(v.info("onFragmentLoadingAbandoned for "+g+", request: "+e.request.url+" has been aborted"),p.isSeeking()||x||(v.info("onFragmentLoadingAbandoned for "+g+", request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Y(e.request)),V(!1),H(0))}function ne(e){e.sender.getStreamProcessor()===m&&j()}function re(e){if(e.sender.getStreamProcessor()===m){var t=m.getStreamInfo();t&&(e.unintended?_.removeExecutedRequestsAfterTime(e.from,t.duration):_.syncExecutedRequestsWithBufferedRange(m.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&T&&U()}}function ie(e){e.sender.getStreamProcessor()!==m||e.state!==_e.default.BUFFER_EMPTY||p.isSeeking()||(v.info("Buffer is empty! Stalling!"),he(new Date,ye.PlayListTrace.REBUFFERING_REASON))}function ae(e){e.sender.getStreamProcessor()===m&&(j(),V(!1))}function oe(){_.abortRequests(),j()}function se(e){e.sender.getStreamProcessor()===m&&a.isTextEnabled()&&K(e.index)}function ue(){!T&&f.getScheduleWhilePaused()||U()}function le(e){I=e.seekTime,fe(0),T&&U();var t=l.getCurrentManifestUpdate(s.getMetricsFor(me.default.STREAM)),n=b.DVRWindow&&p?b.DVRWindow.end-p.getTime():NaN;s.updateManifestUpdateInfo(t,{latency:n}),A?(v.debug("onPlaybackSeeking for "+g+", call fragmentModel.abortRequests in order to seek quicker"),_.abortRequests()):H(0)}function de(e){S&&(S.playbackspeed=e.playbackRate.toString())}function ce(e){I=e}function fe(e){C=e}function he(e,t){if(E&&!1===w){var n=S.start,r=e.getTime()-n.getTime();S.duration=r,S.stopreason=t,E.trace.push(S),w=!0}}function pe(){E&&!0===w&&b&&(w=!1,(S=new ye.PlayListTrace).representationid=b.id,S.start=new Date,S.mstart=1e3*p.getTime(),S.playbackspeed=p.getPlaybackRate().toString())}function ge(){D={mediaInfo:void(C=0),quality:P=I=NaN,adaptationIndex:NaN},k={},F=S=E=null,B=N=x=!(T=o=w=!(A=!(L=[])))}return r={initialize:function(){_=m.getFragmentModel(),M=(0,be.default)(t).create({abrController:h,dashMetrics:l,metricsModel:s,mediaPlayerModel:f,textController:a}),O=(0,Te.default)(t).create({adapter:u,textController:a,playbackController:p}),d.getIsTextTrack(e.mimeType)&&n.on(we.default.TIMED_TEXT_REQUESTED,se,this),n.on(we.default.QUALITY_CHANGE_REQUESTED,W,this),n.on(we.default.DATA_UPDATE_STARTED,ne,this),n.on(we.default.DATA_UPDATE_COMPLETED,X,this),n.on(we.default.FRAGMENT_LOADING_COMPLETED,J,this),n.on(we.default.STREAM_COMPLETED,$,this),n.on(we.default.STREAM_INITIALIZED,Q,this),n.on(we.default.BUFFER_LEVEL_STATE_CHANGED,ie,this),n.on(we.default.BUFFER_CLEARED,re,this),n.on(we.default.BYTES_APPENDED_END_FRAGMENT,ee,this),n.on(we.default.INIT_REQUESTED,q,this),n.on(we.default.QUOTA_EXCEEDED,ae,this),n.on(we.default.PLAYBACK_SEEKING,le,this),n.on(we.default.PLAYBACK_STARTED,ue,this),n.on(we.default.PLAYBACK_RATE_CHANGED,de,this),n.on(we.default.PLAYBACK_TIME_UPDATED,Z,this),n.on(we.default.URL_RESOLUTION_FAILED,oe,this),n.on(we.default.FRAGMENT_LOADING_ABANDONED,te,this)},getType:function(){return g},setSeekTarget:ce,setTimeToLoadDelay:fe,replaceRequest:Y,switchTrackAsked:function(){x=!0},isStarted:function(){return!1===T},start:U,stop:j,reset:function(){n.off(we.default.DATA_UPDATE_STARTED,ne,this),n.off(we.default.DATA_UPDATE_COMPLETED,X,this),n.off(we.default.BUFFER_LEVEL_STATE_CHANGED,ie,this),n.off(we.default.QUALITY_CHANGE_REQUESTED,W,this),n.off(we.default.FRAGMENT_LOADING_COMPLETED,J,this),n.off(we.default.STREAM_COMPLETED,$,this),n.off(we.default.STREAM_INITIALIZED,Q,this),n.off(we.default.QUOTA_EXCEEDED,ae,this),n.off(we.default.BYTES_APPENDED_END_FRAGMENT,ee,this),n.off(we.default.BUFFER_CLEARED,re,this),n.off(we.default.INIT_REQUESTED,q,this),n.off(we.default.PLAYBACK_RATE_CHANGED,de,this),n.off(we.default.PLAYBACK_SEEKING,le,this),n.off(we.default.PLAYBACK_STARTED,ue,this),n.off(we.default.PLAYBACK_TIME_UPDATED,Z,this),n.off(we.default.URL_RESOLUTION_FAILED,oe,this),n.off(we.default.FRAGMENT_LOADING_ABANDONED,te,this),d.getIsTextTrack(g)&&n.off(we.default.TIMED_TEXT_REQUESTED,se,this),j(),z(!1),ge()},setPlayList:function(e){E=e},getBufferTarget:function(){return M.getBufferTarget(m,i.isTrackTypePresent(me.default.VIDEO))},finalisePlayList:function(e,t){he(e,t),E=null}},v=(0,Ae.default)(t).getInstance().getLogger(r),ge(),r}a.__dashjs_factory_name="ScheduleController",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,104:104,107:107,110:110,141:141,186:186,187:187,237:237,46:46,47:47,48:48,53:53,77:77}],114:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var Me=r(e(101)),Oe=r(e(102)),De=r(e(98)),ke=r(e(92)),Pe=r(e(47)),Le=r(e(53)),i=r(e(48)),xe=e(237),Ne=r(e(46)),Fe=r(e(203)),Be=r(e(210)),Ue=r(e(94)),je=r(e(115)),Ge=r(e(105)),He=r(e(111)),qe=r(e(215)),Ve=r(e(50));function a(){var t=40,u=this.context,d=(0,Pe.default)(u).getInstance(),l=void 0,c=void 0,f=void 0,h=void 0,n=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,o=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,r=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,i=void 0,a=void 0,s=void 0,D=void 0,k=void 0,P=void 0,L=void 0,x=void 0,N=void 0,F=void 0,B=void 0,U=void 0,j=void 0,G=void 0,H=void 0,q=void 0,V=void 0,K=void 0,Y=void 0,W=void 0,z=void 0,X=void 0,Q=void 0;function $(){if(ve(Me.default.VIDEO)){var e=L.getPlaybackQuality();e&&y.addDroppedFrames(Me.default.VIDEO,e)}}function J(){if(!(!N.getJumpGaps()||0===ue()||x.isSeeking()||F||s||D||k)&&t<=++K){var e=x.getTime();X===e?function(e){for(var t=ue(),n=N.getSmallGapLimit(),r=void 0,i=0;i<t.length;i++){var a=t[i].getBuffer().getAllBufferRanges(),o=void 0;if(a&&!(a.length<=1)){for(var s=0;s<a.length;s++)if(e<a.start(s)){o=a.start(s);break}if(0<o){var u=o-e;0<u&&u<=n&&(void 0===r||r<o)&&(r=o)}}}var l=x.getTimeToStreamEnd();void 0===r&&!isNaN(l)&&l<n&&(r=e+l);0<r&&(!isNaN(l)&&e+l<=r?(c.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),d.trigger(Le.default.PLAYBACK_ENDED,{isLast:Se().isLast})):(c.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",r),x.seek(r,!0,!0)))}(e):X=e,K=0}}function Z(e){var t=se(e.seekTime);q&&(ne(),H=!1),V&&(c.debug("[PreloadTimer] stop period preload timer."),clearTimeout(V),V=void 0),t===M&&z&&z.deactivate(!0),t&&(t!==M||z&&!M.isActive())?(be(xe.PlayListTrace.END_OF_PERIOD_STOP_REASON),ce(M,t,e.seekTime)):be(xe.PlayListTrace.USER_REQUEST_STOP_REASON),Te(xe.PlayList.SEEK_START_REASON)}function ee(){c.debug("[onPlaybackStarted]"),B?(B=!1,Te(xe.PlayList.INITIAL_PLAYOUT_START_REASON)):F&&(F=!1,Te(xe.PlayList.RESUME_FROM_PAUSE_START_REASON),re())}function te(e){c.debug("[onPlaybackPaused]"),e.ended||(F=!0,be(xe.PlayListTrace.USER_REQUEST_STOP_REASON),re())}function ne(){c.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout(q),q=void 0}function re(){if(H)if(q)ne();else{var e=x.getTimeToStreamEnd(),t=0<e?1e3*e:0,n=t<2e3?t/4:t-2e3;c.debug("[toggleEndPeriodTimer] Going to fire preload in",n,"milliseconds"),V=setTimeout(oe,n),c.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",t,"milliseconds"),q=setTimeout(function(){d.trigger(Le.default.PLAYBACK_ENDED,{isLast:Se().isLast})},t)}}function ie(e){if(e.sender&&(e.sender.getType()===Me.default.AUDIO||e.sender.getType()===Me.default.VIDEO)){var t=Se().isLast;P&&!t&&void 0===q&&(c.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),!(H=!0)===F&&re())}}function ae(){var e=Se().isLast;P&&e&&(c.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),o.signalEndOfStream(P))}function oe(){var t,e=Se().isLast;P&&!e&&(t=de(),(W=M.isProtectionCompatible(t)&&(Q||M.isMediaCodecCompatible(t)))&&(c.info("[onStreamCanLoadNext] Preloading next stream"),M.stopEventController(),M.deactivate(!0),t.preload(P,Y),(z=t).getProcessors().forEach(function(e){m.setIndexHandlerTime(e,t.getStartTime())})))}function se(e){var t=0,n=null,r=I.length;0<r&&(t+=I[0].getStartTime());for(var i=0;i<r;i++)if(n=I[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function ue(){return M?M.getProcessors():[]}function le(){var e=de();e?(j=G=void 0,ce(M,e,NaN)):c.debug("StreamController no next stream found"),be(e?xe.PlayListTrace.END_OF_PERIOD_STOP_REASON:xe.PlayListTrace.END_OF_CONTENT_STOP_REASON),q=void 0,H=!1}function de(){if(M){var e=(t=Se().start,n=Se().duration,{v:I.filter(function(e){return e.getStreamInfo().start===parseFloat((t+n).toFixed(5))})[0]});if("object"==typeof e)return e.v}var t,n}function ce(e,t,n){s||!t||e===t&&t.isActive()||(s=!0,d.trigger(Le.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:t.getStreamInfo()}),W=!1,e&&(e.stopEventController(),W=M.isProtectionCompatible(t)&&(Q||M.isMediaCodecCompatible(t))&&!n||t.getPreloaded(),e.deactivate(W)),M=t,z=!1,x.initialize(Se(),W),L.getElement()?fe(n,e,!1,W):function(e){he(e,W)}(n))}function fe(e,t,n,r){var i=void 0;function a(){P&&(c.debug("MediaSource is open!"),window.URL.revokeObjectURL(i),P.removeEventListener("sourceopen",a),P.removeEventListener("webkitsourceopen",a),pe(),t||d.trigger(Le.default.SOURCE_INITIALIZED),n?M.setMediaSource(P):he(e,r))}P?r?(he(e,r),t||d.trigger(Le.default.SOURCE_INITIALIZED)):(o.detachMediaSource(L),P.addEventListener("sourceopen",a,!1),P.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(P,L),c.debug("MediaSource attached to element.  Waiting on open...")):((P=o.createMediaSource()).addEventListener("sourceopen",a,!1),P.addEventListener("webkitsourceopen",a,!1),i=o.attachMediaSource(P,L),c.debug("MediaSource attached to element.  Waiting on open..."))}function he(e,t){if(Y=M.activate(P,t?Y:void 0),G=_e(Me.default.AUDIO),j=_e(Me.default.VIDEO),Y){var n=Object.keys(Y);0<n.length&&Y[n[0]].changeType&&(c.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),Q=!0)}var r;B||(isNaN(e)?(r=x.getStreamStartTime(!0),t||ue().forEach(function(e){m.setIndexHandlerTime(e,r)})):x.seek(e)),M.startEventController(),!a&&B||x.play(),s=!1,d.trigger(Le.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Se()})}function pe(e){var t=e||Se().manifestInfo.duration,n=o.setDuration(P,t);c.debug("Duration successfully set to: "+n)}function ge(e){for(var t=0,n=I.length;t<n;t++)if(I[t].getId()===e.id)return I[t];return null}function me(){var e=p.getValue();O&&(d.trigger(Le.default.PROTECTION_CREATED,{controller:O,manifest:e}),O.setMediaElement(L.getElement()),i&&O.setProtectionData(i)),function(){try{var e=m.getStreamsInfo();if(0===e.length)throw new Error("There are no streams");var t=v.getCurrentManifestUpdate(y.getMetricsFor(Me.default.STREAM));y.updateManifestUpdateInfo(t,{currentTime:x.getTime(),buffered:L.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:R.getClientTimeOffset()});for(var n=0,r=e.length;n<r;n++){var i=e[n],a=ge(i);a?a.updateData(i):(a=(0,De.default)(u).create({manifestModel:p,dashManifestModel:g,mediaPlayerModel:N,metricsModel:y,dashMetrics:v,manifestUpdater:h,adapter:m,timelineConverter:R,capabilities:f,errHandler:C,baseURLController:b,domStorage:T,abrController:E,playbackController:x,mediaController:S,textController:w,videoModel:L,streamController:l}),I.push(a),a.initialize(i,O)),y.addManifestUpdateStreamInfo(t,i.id,i.index,i.start,i.duration)}if(!M){var o=x.getStartTimeFromUriParameters(),s=null;if(o)s=se(isNaN(o.fragS)?o.fragT:o.fragS);ce(null,null!==s?s:I[0],NaN)}d.trigger(Le.default.STREAMS_COMPOSED)}catch(e){C.manifestError(e.message,"nostreamscomposed",p.getValue()),C.error(new qe.default(Ve.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",p.getValue())),k=!0,Re()}}()}function ye(s){s.error?(k=!0,Re()):function(){var e=s.manifest;m.updatePeriods(e);var t=m.getStreamsInfo(void 0,1)[0],n=m.getMediaInfoForType(t,Me.default.VIDEO)||m.getMediaInfoForType(t,Me.default.AUDIO),r=void 0;n&&(r=g.getUseCalculatedLiveEdgeTimeForAdaptation(m.getDataForMedia(n)))&&(c.debug("SegmentTimeline detected using calculated Live Edge Time"),N.setUseManifestDateHeaderTimeSource(!1));var i=g.getUTCTimingSources(s.manifest),a=!g.getIsDynamic(e)||r?i:i.concat(N.getUTCTimingSources()),o=A.isHTTPS(s.manifest.url);a.forEach(function(e){e.value.replace(/.*?:\/\//g,"")===N.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(o?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),o?"https://":"http://"),c.debug("Matching default timing source protocol to manifest protocol: ",e.value))}),b.initialize(e),_.setConfig({metricsModel:y,dashMetrics:v,baseURLController:b}),_.initialize(a,N.getUseManifestDateHeaderTimeSource())}()}function ve(e){var t=void 0;if(!e)return t;switch(e){case Me.default.VIDEO:t=j;break;case Me.default.AUDIO:t=G}return t}function _e(t){var n=!1;return ue().forEach(function(e){e.getMediaInfo().type===t&&(n=!0)}),n}function be(n,r){r=r||new Date,U&&(ue().forEach(function(e){var t=e.getScheduleController();t&&t.finalisePlayList(r,n)}),y.addPlayList(U),U=null)}function Te(e){(U=new xe.PlayList).start=new Date,U.mstart=1e3*x.getTime(),U.starttype=e,ue().forEach(function(e){var t=e.getScheduleController();t&&t.setPlayList(U)})}function Ee(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}D=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),c.fatal("Video Element Error: "+t),e.error&&c.fatal(e.error),C.mediaSourceError(t),C.error(new qe.default(e.error.code,t)),Re()}}function Se(){return M?M.getStreamInfo():null}function we(){if(!(n&&n.hasOwnProperty("load")&&R&&R.hasOwnProperty("initialize")&&R.hasOwnProperty("reset")&&R.hasOwnProperty("getClientTimeOffset")&&p&&C&&y&&x))throw new Error("setConfig function has to be called previously")}function Ae(e){isNaN(e.newDuration)||pe(e.newDuration)}function Ce(){U=M=O=null,q=G=j=void 0,H=!(a=!(F=!(B=!(k=D=s=!(I=[]))))),K=0}function Re(){we(),_.reset(),be(D||k?xe.PlayListTrace.FAILURE_STOP_REASON:xe.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,t=I?I.length:0;e<t;e++){I[e].reset(D)}!function(){d.off(Le.default.PLAYBACK_TIME_UPDATED,$,this),d.off(Le.default.PLAYBACK_SEEKING,Z,this),d.off(Le.default.PLAYBACK_ERROR,Ee,this),d.off(Le.default.PLAYBACK_STARTED,ee,this),d.off(Le.default.PLAYBACK_PAUSED,te,this),d.off(Le.default.PLAYBACK_ENDED,le,this),d.off(Le.default.MANIFEST_UPDATED,ye,this),d.off(Le.default.BUFFERING_COMPLETED,ie,this),d.off(Le.default.STREAM_BUFFERING_COMPLETED,ae,this),d.off(Le.default.MANIFEST_VALIDITY_CHANGED,Ae,this),d.off(Le.default.TIME_SYNCHRONIZATION_COMPLETED,me,this),d.off(Le.default.WALLCLOCK_TIME_UPDATED,J,this),d.off(Ue.default.METRIC_ADDED,Ie,this)}(),b.reset(),h.reset(),y.clearAllCurrentMetrics(),p.setValue(null),n.reset(),R.reset(),r.reset(),P&&(o.detachMediaSource(L),P=null),L=null,O&&(O.setMediaElement(null),i=O=null,p.getValue()&&d.trigger(Le.default.PROTECTION_DESTROYED,{data:p.getValue().url})),d.trigger(Le.default.STREAM_TEARDOWN_COMPLETE),Ce()}function Ie(e){e.metric===Oe.default.DVR_INFO&&e.mediaType===Me.default.AUDIO&&o.setSeekable(P,e.value.range.start,e.value.range.end)}return l={initialize:function(e,t){we(),a=e,i=t,R.initialize(),(h=(0,ke.default)(u).create()).setConfig({manifestModel:p,dashManifestModel:g,mediaPlayerModel:N,manifestLoader:n,errHandler:C}),h.initialize(),b.setConfig({dashManifestModel:g}),function(){d.on(Le.default.PLAYBACK_TIME_UPDATED,$,this),d.on(Le.default.PLAYBACK_SEEKING,Z,this),d.on(Le.default.PLAYBACK_ERROR,Ee,this),d.on(Le.default.PLAYBACK_STARTED,ee,this),d.on(Le.default.PLAYBACK_PAUSED,te,this),d.on(Le.default.PLAYBACK_ENDED,le,this),d.on(Le.default.MANIFEST_UPDATED,ye,this),d.on(Le.default.BUFFERING_COMPLETED,ie,this),d.on(Le.default.STREAM_BUFFERING_COMPLETED,ae,this),d.on(Le.default.MANIFEST_VALIDITY_CHANGED,Ae,this),d.on(Le.default.TIME_SYNCHRONIZATION_COMPLETED,me,this),d.on(Le.default.WALLCLOCK_TIME_UPDATED,J,this),d.on(Ue.default.METRIC_ADDED,Ie,this)}()},getActiveStreamInfo:Se,isTrackTypePresent:ve,switchToVideoElement:function(e){M&&(x.initialize(Se()),fe(e,null,!0,!1))},getStreamById:function(t){return I.filter(function(e){return e.getId()===t})[0]},getStreamForTime:se,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=I.length,s=0;s<o;s++){if(i=(n=I[s]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},load:function(e){we(),n.load(e)},loadWithManifest:function(e){!function(){if(!h||!h.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),h.setManifest(e)},getActiveStreamProcessors:ue,setConfig:function(e){e&&(e.capabilities&&(f=e.capabilities),e.manifestLoader&&(n=e.manifestLoader),e.manifestModel&&(p=e.manifestModel),e.dashManifestModel&&(g=e.dashManifestModel),e.mediaPlayerModel&&(N=e.mediaPlayerModel),e.protectionController&&(O=e.protectionController),e.adapter&&(m=e.adapter),e.metricsModel&&(y=e.metricsModel),e.dashMetrics&&(v=e.dashMetrics),e.errHandler&&(C=e.errHandler),e.timelineConverter&&(R=e.timelineConverter),e.videoModel&&(L=e.videoModel),e.playbackController&&(x=e.playbackController),e.domStorage&&(T=e.domStorage),e.abrController&&(E=e.abrController),e.mediaController&&(S=e.mediaController),e.textController&&(w=e.textController))},setProtectionData:function(e){i=e},reset:Re},c=(0,Ne.default)(u).getInstance().getLogger(l),_=(0,je.default)(u).getInstance(),b=(0,Ge.default)(u).getInstance(),o=(0,He.default)(u).getInstance(),r=(0,Fe.default)(u).getInstance(),A=(0,Be.default)(u).getInstance(),Ce(),l}a.__dashjs_factory_name="StreamController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,102:102,105:105,111:111,115:115,203:203,210:210,215:215,237:237,46:46,47:47,48:48,50:50,53:53,92:92,94:94,98:98}],115:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var S=r(e(101)),w=r(e(215)),A=e(235),C=r(e(47)),R=r(e(53)),I=r(e(50)),i=r(e(48)),M=r(e(46)),O=r(e(210));function a(){var e=this.context,r=(0,C.default)(e).getInstance(),f=(0,O.default)(e).getInstance(),t=void 0,o=void 0,i=void 0,n=void 0,s=void 0,u=void 0,a=void 0,l=void 0,h=void 0;function d(e){n=e}function c(e){i=e}function p(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,n=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function g(e){return Date.parse(e)}function m(e){return Date.parse(e)}function y(e,t,n){n()}function v(e,t,n){var r=p(e);isNaN(r)?n():t(r)}function _(n,e,r,t,i){var a,o,s=!1,u=new XMLHttpRequest,l=i?A.HTTPRequest.HEAD:A.HTTPRequest.GET,d=e.match(/\S+/g);if(e=d.shift(),a=function(){s||(s=!0,d.length?_(n,d.join(" "),r,t,i):t())},o=function(){var e=void 0,t=void 0;200===u.status&&(e=i?u.getResponseHeader("Date"):u.response,t=n(e),isNaN(t)||(r(t),s=!0))},f.isRelative(e)){var c=h.resolve();c&&(e=f.resolve(e,c.url))}u.open(l,e),u.timeout=5e3,u.onload=o,u.onloadend=a,u.send()}function b(e,t,n){_(m,e,t,n,!0)}function T(){var e=a.getReadOnlyMetricsFor(S.default.STREAM),t=l.getLatestMPDRequestHeaderValueByID(e,"Date"),n=null!==t?new Date(t).getTime():Number.NaN;isNaN(n)?E(!0):(c(n-(new Date).getTime()),E(!1,n/1e3,i))}function E(e,t,n){d(!1),r.trigger(R.default.TIME_SYNCHRONIZATION_COMPLETED,{time:t,offset:n,error:e?new w.default(I.default.TIME_SYNC_FAILED_ERROR_CODE,I.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}return t={initialize:function(e,t){s=t,i=0,n=!1,u={"urn:mpeg:dash:utc:http-head:2014":b,"urn:mpeg:dash:utc:http-xsdate:2014":_.bind(null,p),"urn:mpeg:dash:utc:http-iso:2014":_.bind(null,g),"urn:mpeg:dash:utc:direct:2014":v,"urn:mpeg:dash:utc:http-head:2012":b,"urn:mpeg:dash:utc:http-xsdate:2012":_.bind(null,p),"urn:mpeg:dash:utc:http-iso:2012":_.bind(null,g),"urn:mpeg:dash:utc:direct:2012":v,"urn:mpeg:dash:utc:http-ntp:2014":y,"urn:mpeg:dash:utc:ntp:2014":y,"urn:mpeg:dash:utc:sntp:2014":y},n||function e(t,n){var r=n||0;var i=t[r];var a=function(e,t){var n=!e||!t;n&&s?T():E(n,e,t)};d(!0);i?u.hasOwnProperty(i.schemeIdUri)?u[i.schemeIdUri](i.value,function(e){var t=(new Date).getTime(),n=e-t;c(n),o.info("Local time: "+new Date(t)),o.info("Server time: "+new Date(e)),o.info("Server Time - Local Time (ms): "+n),a(e,n)},function(){e(t,r+1)}):e(t,r+1):(c(0),a())}(e)},getOffsetToDeviceTimeMs:function(){return i},setConfig:function(e){e&&(e.metricsModel&&(a=e.metricsModel),e.dashMetrics&&(l=e.dashMetrics),e.baseURLController&&(h=e.baseURLController))},reset:function(){d(!1)}},o=(0,M.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TimeSyncController";var o=i.default.getSingletonFactory(a);o.HTTP_TIMEOUT_MS=5e3,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{101:101,210:210,215:215,235:235,46:46,47:47,48:48,50:50,53:53}],116:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(100)),g=r(e(47)),m=r(e(53)),i=r(e(48)),y=r(e(3)),v=r(e(210)),_=r(e(60)),b="onLoad";function a(e){e=e||{};var t=this.context,i=(0,g.default)(t).getInstance(),s=(0,v.default)(t).getInstance(),n=void 0,r=void 0,u=void 0,l=void 0,a=void 0,d=void 0;function o(e,t,n){var r={},i=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&f(r);for(var o=0;o<r.elements.length;o++)i=r.elements[o],a=s.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,d.load(a,i,r)}function c(e){var t,n=void 0,r="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var i=0;0===n.resolvedContent.indexOf("<?xml")&&(i=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,i)+"<response>"+n.resolvedContent.substr(i)+"</response>",n.resolvedContent=a.xml_str2json(r)}!function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0}(t)||f(t)}function f(e){var t=[],n=void 0,r=void 0;if(function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;0<=a;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}0<e.elements.length&&u.run(l)}(e),"onActuate"===e.resolveType&&i.trigger(m.default.XLINK_READY,{manifest:l}),e.resolveType===b)switch(e.type){case _.default.PERIOD:for(n=0;n<l[_.default.PERIOD+"_asArray"].length;n++)(r=l[_.default.PERIOD+"_asArray"][n]).hasOwnProperty(_.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(h(r[_.default.ADAPTATION_SET+"_asArray"],r,_.default.ADAPTATION_SET,b))),r.hasOwnProperty(_.default.EVENT_STREAM+"_asArray")&&(t=t.concat(h(r[_.default.EVENT_STREAM+"_asArray"],r,_.default.EVENT_STREAM,b)));o(t,_.default.ADAPTATION_SET,b);break;case _.default.ADAPTATION_SET:i.trigger(m.default.XLINK_READY,{manifest:l})}}function h(e,t,n,r){var i=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;0<=o;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===r&&(s={url:a["xlink:href"],parentElement:t,type:n,index:o,resolveType:r,originalContent:a,resolvedContent:null,resolved:!1},i.push(s));return i}return n={resolveManifestOnLoad:function(e){a=new y.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:r}),o(h((l=e).Period_asArray,l,_.default.PERIOD,b),_.default.PERIOD,b)},setMatchers:function(e){e&&(r=e)},setIron:function(e){e&&(u=e)},reset:function(){i.off(m.default.XLINK_ELEMENT_LOADED,c,n),d&&(d.reset(),d=null)}},i.on(m.default.XLINK_ELEMENT_LOADED,c,n),d=(0,p.default)(t).create({errHandler:e.errHandler,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),n}a.__dashjs_factory_name="XlinkController",n.default=i.default.getClassFactory(a),t.exports=n.default},{100:100,210:210,3:3,47:47,48:48,53:53,60:60}],117:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(131)),a=r(e(118)),o=r(e(119)),s=r(e(124)),u=r(e(129));function l(){var t=this.context;return{createMetricsReporting:function(e){return(0,i.default)(t).getInstance({eventBus:e.eventBus,metricsModel:e.metricsModel,metricsConstants:e.metricsConstants,events:e.events}),(0,o.default)(t).create(e)},getReportingFactory:function(){return(0,u.default)(t).getInstance()},getMetricsHandlerFactory:function(){return(0,s.default)(t).getInstance()}}}l.__dashjs_factory_name="MetricsReporting";var d=dashjs.FactoryMaker.getClassFactory(l);d.events=a.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,d),n.default=d,t.exports=n.default},{118:118,119:119,124:124,129:129,131:131}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{54:54}],119:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(120)),u=r(e(133)),l=r(e(118));function i(i){i=i||{};var a={},o=this.context,t=i.eventBus,e=i.events;function n(e){if(!e.error){var r=Object.keys(a);(0,u.default)(o).getInstance({dashManifestModel:i.dashManifestModel,constants:i.constants}).getMetrics(e.manifest).forEach(function(e){var t=JSON.stringify(e);if(a.hasOwnProperty(t))r.splice(t,1);else try{var n=(0,s.default)(o).create(i);n.initialize(e),a[t]=n}catch(e){}}),r.forEach(function(e){a[e].reset(),delete a[e]}),t.trigger(l.default.METRICS_INITIALISATION_COMPLETE)}}function r(){Object.keys(a).forEach(function(e){a[e].reset()}),a={}}return t.on(e.MANIFEST_UPDATED,n),t.on(e.STREAM_TEARDOWN_COMPLETE,r),{reset:function(){t.off(e.MANIFEST_UPDATED,n),t.off(e.STREAM_TEARDOWN_COMPLETE,r)}}}i.__dashjs_factory_name="MetricsCollectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{118:118,120:120,133:133}],120:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var s=r(e(122)),u=r(e(123)),l=r(e(121));function i(t){t=t||{};var n=void 0,r=void 0,i=void 0,a=this.context;function o(){n&&n.reset(),r&&r.reset(),i&&i.reset()}return{initialize:function(e){try{(i=(0,s.default)(a).create({mediaElement:t.mediaElement})).initialize(e.Range),(r=(0,u.default)(a).create({debug:t.debug,metricsConstants:t.metricsConstants})).initialize(e.Reporting,i),(n=(0,l.default)(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(e.metrics,r)}catch(e){throw o(),e}},reset:o}}i.__dashjs_factory_name="MetricsController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{121:121,122:122,123:123}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(124),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var o=[],t=void 0,n=this.context,r=e.eventBus,i=e.events,s=(0,a.default)(n).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(t){o.forEach(function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)})}return t={initialize:function(e,a){e.split(",").forEach(function(e,t,n){var r;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var i=n[t+1];i&&-1===i.indexOf("(")&&-1!==i.indexOf(")")&&(e+=","+i,delete n[t+1])}(r=s.create(e,a))&&o.push(r)}),r.on(i.METRIC_ADDED,u,t),r.on(i.METRIC_UPDATED,u,t)},reset:function(){r.off(i.METRIC_ADDED,u,t),r.off(i.METRIC_UPDATED,u,t),o.forEach(function(e){return e.reset()}),o=[]}}}o.__dashjs_factory_name="MetricsHandlersController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{124:124}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(199),u=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var t,a=!1,n=this.context,o=void 0,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach(function(e){var t=e.starttime,n=t+e.duration;o.add(t,n)}),a=!!e[0]._useWallClockTime)},reset:function(){o.clear()},isEnabled:function(){var e,t=o.length;if(!t)return!0;e=a?(new Date).getTime()/1e3:s.currentTime;for(var n=0;n<t;n+=1){var r=o.start(n),i=o.end(n);if(r<=e&&e<i)return!0}return!1}},o=(0,u.default)(n).create(),t}a.__dashjs_factory_name="RangeController",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{199:199}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(129),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=[],i=(0,a.default)(this.context).getInstance(e);return{initialize:function(e,n){e.some(function(e){var t=i.create(e,n);if(t)return r.push(t),!0})},reset:function(){r.forEach(function(e){return e.reset()}),r=[]},report:function(t,n){r.forEach(function(e){return e.report(t,n)})}}}o.__dashjs_factory_name="ReportingController",n.default=dashjs.FactoryMaker.getClassFactory(o),t.exports=n.default},{129:129}],124:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(125)),d=r(e(126)),c=r(e(128)),f=r(e(127));function i(i){var a=(i=i||{}).debug,o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,s=this.context,u={BufferLevel:l.default,DVBErrors:d.default,HttpList:c.default,PlayList:f.default,RepSwitchList:f.default,TcpList:f.default};return{create:function(e,t){var n,r=e.match(o);if(r){try{(n=u[r[1]](s).create({eventBus:i.eventBus,metricsConstants:i.metricsConstants})).initialize(r[1],t,r[3],r[5])}catch(e){n=null,a.error("MetricsHandlerFactory: Could not create handler for type "+r[1]+" with args "+r[3]+", "+r[5]+" ("+e.message+")")}return n}},register:function(e,t){u[e]=t},unregister:function(e){delete u[e]}}}i.__dashjs_factory_name="MetricsHandlerFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{125:125,126:126,127:127,128:128}],125:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(132),c=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r=void 0,i=void 0,a=void 0,o=void 0,t=void 0,n=this.context,s=(0,c.default)(n).getInstance(),u=[],l=e.metricsConstants;function d(){var e=function(){try{return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,t){return e.level<t.level?e:t})}catch(e){return}}();e&&t!==e.t&&(t=e.t,r.report(a,e))}return{initialize:function(e,t,n){t&&(i=s.validateN(n),r=t,a=s.reconstructFullMetricName(e,n),o=setInterval(d,i))},reset:function(){clearInterval(o),i=0,t=r=o=null},handleNewMetric:function(e,t,n){e===l.BUFFER_LEVEL&&(u[n]=t)}}}a.__dashjs_factory_name="BufferLevelHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{132:132}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(118),o=(r=i)&&r.__esModule?r:{default:r};n.default=dashjs.FactoryMaker.getClassFactory(function(e){var n=void 0,r=(e=e||{}).eventBus,i=e.metricsConstants;function a(){r.off(o.default.METRICS_INITIALISATION_COMPLETE,a,this),r.trigger(o.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,t){t&&(n=t,r.on(o.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){n=null},handleNewMetric:function(e,t){e===i.DVB_ERRORS&&n&&n.report(e,t)}}}),t.exports=n.default},{118:118}],127:[function(e,t,n){"use strict";function r(){var n=void 0,r=void 0;return{initialize:function(e,t){n=e,r=t},reset:function(){r=null,n=void 0},handleNewMetric:function(e,t){e===n&&r&&r.report(n,t)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",n.default=dashjs.FactoryMaker.getClassFactory(r),t.exports=n.default},{}],128:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(132),c=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,n=[],l=(0,c.default)(this.context).getInstance(),r=e.metricsConstants;function d(){var e=n;e.length&&i&&i.report(s,e),n=[]}return{initialize:function(e,t,n,r){t&&(a=l.validateN(n),i=t,r&&r.length&&(o=r),s=l.reconstructFullMetricName(e,n,r),u=setInterval(d,a))},reset:function(){clearInterval(u),n=[],i=o=a=u=null},handleNewMetric:function(e,t){e===r.HTTP_REQUEST&&(o&&o!==t.type||n.push(t))}}}a.__dashjs_factory_name="HttpListHandler",n.default=dashjs.FactoryMaker.getClassFactory(a),t.exports=n.default},{132:132}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(130),s=(r=i)&&r.__esModule?r:{default:r};function a(e){e=e||{};var r={"urn:dvb:dash:reporting:2014":s.default},i=this.context,a=e.debug,o=e.metricsConstants;return{create:function(t,e){var n=void 0;try{(n=r[t.schemeIdUri](i).create({metricsConstants:o})).initialize(t,e)}catch(e){n=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri "+t.schemeIdUri+" ("+e.message+")")}return n},register:function(e,t){r[e]=t},unregister:function(e){delete r[e]}}}a.__dashjs_factory_name="ReportingFactory",n.default=dashjs.FactoryMaker.getSingletonFactory(a),t.exports=n.default},{130:130}],130:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(134)),h=r(e(135));function i(e){e=e||{};var t,n=this.context,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=[],d=e.metricsConstants;function c(){o=a=!1,u=s=null}return t={report:function(n,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach(function(e){var t=r.serialise(e);n!==d.DVB_ERRORS&&(t="metricname="+n+"&"+t),function(e,t,n){function r(){var e=l.indexOf(i);-1!==e&&(l.splice(e,1),200<=i.status&&i.status<300?t&&t():n&&n())}var i=new XMLHttpRequest;l.push(i);try{i.open("GET",e),i.onloadend=r,i.onerror=r,i.send()}catch(e){i.onerror()}}(t=s+"?"+t,null,function(){o=!1})})},initialize:function(e,t){var n=void 0;if(u=t,!(s=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");a||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=i.random())&&(o=!0),a=!0)},reset:function(){c()}},r=(0,f.default)(n).getInstance(),i=(0,h.default)(n).getInstance(),c(),t}i.__dashjs_factory_name="DVBReporting",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{134:134,135:135}],131:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(136)),g=r(e(118));function i(e){var t=void 0,r=void 0,n=(e=e||{}).eventBus,i=e.metricsModel,a=e.metricsConstants,o=e.events;function s(e){var t=new p.default;if(r){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.mpdurl||(t.mpdurl=r.originalUrl||r.url),t.terror||(t.terror=new Date),i.addDVBErrors(t)}}function u(e){e.error||(r=e.manifest)}function l(e){s({errorcode:p.default.BASE_URL_CHANGED,servicelocation:e.entry})}function d(){s({errorcode:p.default.BECAME_REPORTER})}function c(e){switch(e.metric){case a.HTTP_REQUEST:!function(e){(0===e.responsecode||400<=e.responsecode||e.responsecode<100||600<=e.responsecode)&&s({errorcode:e.responsecode||p.default.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}(e.value)}}function f(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=p.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=p.default.CORRUPT_MEDIA_OTHER;break;default:return}s({errorcode:t})}function h(){n.on(o.MANIFEST_UPDATED,u,t),n.on(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.on(o.METRIC_ADDED,c,t),n.on(o.METRIC_UPDATED,c,t),n.on(o.PLAYBACK_ERROR,f,t),n.on(g.default.BECAME_REPORTING_PLAYER,d,t)}return t={initialise:h,reset:function(){n.off(o.MANIFEST_UPDATED,u,t),n.off(o.SERVICE_LOCATION_BLACKLIST_CHANGED,l,t),n.off(o.METRIC_ADDED,c,t),n.off(o.METRIC_UPDATED,c,t),n.off(o.PLAYBACK_ERROR,f,t),n.off(g.default.BECAME_REPORTING_PLAYER,d,t)}},h(),t}i.__dashjs_factory_name="DVBErrorsTranslator",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{118:118,136:136}],132:[function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],133:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(137)),o=r(e(138)),l=r(e(139));function i(e){var s=(e=e||{}).dashManifestModel,u=e.constants;return{getMetrics:function(i){var t=[];return i.Metrics_asArray&&i.Metrics_asArray.forEach(function(e){var r=new a.default,n=s.getIsDynamic(i);e.hasOwnProperty("metrics")&&(r.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(e){var t=new o.default;t.starttime=function(e,t,n){var r,i,a=s.getMpd(e),o=0;return t?o=a.availabilityStartTime.getTime()/1e3:(r=this.getRegularPeriods(a)).length&&(o=r[0].start),i=o,n&&n.hasOwnProperty(u.START_TIME)&&(i+=n.starttime),i}(i,n,e),e.hasOwnProperty("duration")?t.duration=e.duration:t.duration=s.getDuration(i),t._useWallClockTime=n,r.Range.push(t)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(e){var t=new l.default;if(e.hasOwnProperty(u.SCHEME_ID_URI)){for(var n in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.Reporting.push(t)}}),t.push(r)))}),t}}}i.__dashjs_factory_name="ManifestParsing",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{137:137,138:138,139:139}],134:[function(e,t,n){"use strict";function r(){return{serialise:function n(e){var t=[],r=[],i=void 0,a=void 0;for(i in e)if(e.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(a=e[i])&&(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach(function(e){var t="Object"!==Object.prototype.toString.call(e).slice(8,-1);r.push(t?e:n(e))}),a=r.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));t.push(i+"="+a)}return t.join("&")}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],135:[function(e,t,n){"use strict";function r(){var e,r=window.crypto||window.msCrypto,t=Uint32Array,i=Math.pow(2,8*t.BYTES_PER_ELEMENT)-1,n=10,a=void 0,o=void 0;function s(){r&&(a=a||new t(n),r.getRandomValues(a),o=0)}return e={random:function(e,t){var n=void 0;return e=e||0,t=t||1,r?(o===a.length&&s(),n=a[o]/i,o+=1):n=Math.random(),n*(t-e)+e}},s(),e}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",n.default=r,t.exports=n.default},{}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]},t.exports=n.default},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},t.exports=n.default},{}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""},t.exports=n.default},{}],140:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.data={baseUrls:e||null,selectedIdx:t||NaN},this.children=[]}var l=r(e(206)),i=r(e(48));function a(){var e,i=void 0,a=void 0,t=this.context,o=(0,l.default)(t).getInstance();function s(e,t,n){var r=a.getBaseURLsFromElement(n);e[t]?o.areEqual(r,e[t].data.baseUrls)||(e[t].data.baseUrls=r,e[t].data.selectedIdx=NaN):e[t]=new u(r)}function n(e){!function(){if(!a||!a.hasOwnProperty("getBaseURLsFromElement")||!a.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var t=a.getBaseURLsFromElement(e);o.areEqual(t,i.data.baseUrls)||(i.data.baseUrls=t,i.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach(function(e,r){s(i.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach(function(e,n){s(i.children[r].children,n,e),e.Representation_asArray&&e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach(function(e,t){s(i.children[r].children[n].children,t,e)})})})}function r(){i=new u}return e={reset:r,update:function(e){n(e)},getForPath:function(e){var t=i,n=[t.data];return e&&e.forEach(function(e){(t=t.children[e])&&n.push(t.data)}),n.filter(function(e){return e.baseUrls.length})},invalidateSelectedIndexes:function(t){!function t(n,e){var r=e||i;n(r.data),r.children&&r.children.forEach(function(e){return t(n,e)})}(function(e){isNaN(e.selectedIdx)||t===e.baseUrls[e.selectedIdx].serviceLocation&&(e.selectedIdx=NaN)})},setConfig:function(e){e.dashManifestModel&&(a=e.dashManifestModel)}},r(),e}a.__dashjs_factory_name="BaseURLTreeModel",n.default=i.default.getClassFactory(a),t.exports=n.default},{206:206,48:48}],141:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(47)),b=r(e(53)),i=r(e(48)),T=r(e(217)),E=r(e(46)),S="loading",w="executed";function a(e){e=e||{};var t=this.context,n=(0,_.default)(t).getInstance(),r=e.metricsModel,i=e.fragmentLoader,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;function d(t){var n;return!!t&&(n=!1,u.some(function(e){if(function(e,t){return!isNaN(e.index)&&e.startTime===t.startTime&&e.adaptationIndex===t.adaptationIndex&&e.type===t.type}(t,e)||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(t,e)||function(e,t){return e.action===T.default.ACTION_COMPLETE&&e.action===t.action}(t,e))return n=!0}),n)}function c(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function f(n){u=u.filter(function(e){var t=c(e);return isNaN(e.startTime)||void 0!==n&&e.startTime>=n-t})}function h(n,r){r<=n+.5||(u=u.filter(function(e){var t=c(e);return isNaN(e.startTime)||e.startTime>=r-t||isNaN(e.duration)||e.startTime+e.duration<=n+t}))}function p(e,t){r.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t),r.addRequestsQueue(e.mediaType,l,u)}function g(e){e.sender===i&&(l.splice(l.indexOf(e.request),1),e.response&&!e.error&&u.push(e.request),p(e.request,e.error?"failed":w),n.trigger(b.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function m(e){e.sender===i&&n.trigger(b.default.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function y(e){e.sender===i&&n.trigger(b.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function v(){u=[],l=[]}return a={setStreamProcessor:function(e){s=e},getStreamProcessor:function(){return s},getRequests:function(n){var e=n?n.state instanceof Array?n.state:[n.state]:[],r=[];return e.forEach(function(e){var t=function(e){var t=void 0;switch(e){case S:t=l;break;case w:t=u;break;default:t=[]}return t}(e);r=r.concat(function(e,n){if(n.hasOwnProperty("time"))return[function(e,t,n){for(var r=e.length-1;0<=r;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?c(i):n,!isNaN(a)&&!isNaN(o)&&a<=t+n&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}(e,n.time,n.threshold)];return e.filter(function(e){for(var t in n)if("state"!==t&&n.hasOwnProperty(t)&&e[t]!=n[t])return!1;return!0})}(t,n))}),r},isFragmentLoaded:d,isFragmentLoadedOrPending:function(e){var t=!1,n=0,r=void 0;if(!(t=d(e)))for(n=0;n<l.length;n++)r=l[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:f,removeExecutedRequestsAfterTime:function(t){u=u.filter(function(e){return isNaN(e.startTime)||void 0!==t&&e.startTime+e.duration<t})},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)h(n,e.start(r)),n=e.end(r);0<t&&h(n,t)}else f()},abortRequests:function(){i.abort(),l=[]},executeRequest:function(e){switch(e.action){case T.default.ACTION_COMPLETE:u.push(e),p(e,w),o.debug("executeRequest trigger STREAM_COMPLETED"),n.trigger(b.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case T.default.ACTION_DOWNLOAD:p(e,S),l.push(e),function(e){n.trigger(b.default.FRAGMENT_LOADING_STARTED,{sender:a,request:e}),i.load(e)}(e);break;default:o.warn("Unknown request action.")}},reset:function(){n.off(b.default.LOADING_COMPLETED,g,this),n.off(b.default.LOADING_DATA_PROGRESS,m,this),n.off(b.default.LOADING_ABANDONED,y,this),i&&i.reset(),v()},addExecutedRequest:function(e){u.push(e)}},o=(0,E.default)(t).getInstance().getLogger(a),v(),n.on(b.default.LOADING_COMPLETED,g,a),n.on(b.default.LOADING_DATA_PROGRESS,m,a),n.on(b.default.LOADING_ABANDONED,y,a),a}a.__dashjs_factory_name="FragmentModel";var o=i.default.getClassFactory(a);o.FRAGMENT_MODEL_LOADING=S,o.FRAGMENT_MODEL_EXECUTED=w,o.FRAGMENT_MODEL_CANCELED="canceled",o.FRAGMENT_MODEL_FAILED="failed",i.default.updateClassFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{217:217,46:46,47:47,48:48,53:53}],142:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(47)),a=r(e(53)),o=r(e(48));function s(){var e=this.context,t=(0,i.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){(n=e)&&t.trigger(a.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",n.default=o.default.getSingletonFactory(s),t.exports=n.default},{47:47,48:48,53:53}],143:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var Y=r(e(89)),i=r(e(48)),W=e(235),z=r(e(101)),X=r(e(179)),Q=e(208);function a(){var e,t,n,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0,b=void 0,T=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0,D=void 0,k=void 0,P=void 0,L=void 0,x=void 0,N=void 0,F=void 0,B=void 0,U={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"};function j(e){var t=void 0;for(t=0;t<I.length;t++)if(I[t].rulename===e)return t;return-1}function G(){return P?s||3:s}function H(e,t){q(e,t);var n=new Y.default;n.schemeIdUri=e,n.value=t,a.push(n)}function q(n,r){(0,Q.checkParameterType)(n,"string"),(0,Q.checkParameterType)(r,"string"),a.forEach(function(e,t){e.schemeIdUri===n&&e.value===r&&a.splice(t,1)})}function V(){return P}return e={setABRStrategy:function(e){if(e!==z.default.ABR_STRATEGY_DYNAMIC&&e!==z.default.ABR_STRATEGY_BOLA&&e!==z.default.ABR_STRATEGY_THROUGHPUT)throw z.default.BAD_ARGUMENT_ERROR;w=e},getABRStrategy:function(){return w},setUseDefaultABRRules:function(e){(0,Q.checkParameterType)(e,"boolean"),A=e},getUseDefaultABRRules:function(){return A},getABRCustomRules:function(){return I},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==X.default.ABANDON_FRAGMENT_RULES&&e!==X.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw z.default.BAD_ARGUMENT_ERROR;var r=j(t);-1===r?I.push({type:e,rulename:t,rule:n}):(I[r].type=e,I[r].rule=n)},removeABRCustomRule:function(e){if(e){var t=j(e);-1!==t&&I.splice(t,1)}else I=[]},setBandwidthSafetyFactor:function(e){(0,Q.checkParameterType)(e,"number"),_=e},getBandwidthSafetyFactor:function(){return _},setAbandonLoadTimeout:function(e){(0,Q.checkParameterType)(e,"number"),b=e},getAbandonLoadTimeout:function(){return b},setLastBitrateCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw z.default.BAD_ARGUMENT_ERROR;f.enabled=e,void 0!==t&&(f.ttl=t)},getLastBitrateCachingInfo:function(){return f},setLastMediaSettingsCachingInfo:function(e,t){if("boolean"!=typeof e||void 0!==t&&("number"!=typeof t||isNaN(t)))throw z.default.BAD_ARGUMENT_ERROR;h.enabled=e,void 0!==t&&(h.ttl=t)},getLastMediaSettingsCachingInfo:function(){return h},setStableBufferTime:function(e){(0,Q.checkParameterType)(e,"number"),p=e},getStableBufferTime:function(){return V()?.6*G():isNaN(p)?R?20:12:p},setBufferTimeAtTopQuality:function(e){(0,Q.checkParameterType)(e,"number"),g=e},getBufferTimeAtTopQuality:function(){return g},setBufferTimeAtTopQualityLongForm:function(e){(0,Q.checkParameterType)(e,"number"),m=e},getBufferTimeAtTopQualityLongForm:function(){return m},setLongFormContentDurationThreshold:function(e){(0,Q.checkParameterType)(e,"number"),y=e},getLongFormContentDurationThreshold:function(){return y},setSegmentOverlapToleranceTime:function(e){(0,Q.checkParameterType)(e,"number"),v=e},getSegmentOverlapToleranceTime:function(){return v},getCacheLoadThresholdForType:function(e){return O[e]},setCacheLoadThresholdForType:function(e,t){(0,Q.checkParameterType)(t,"number"),(0,Q.checkIsVideoOrAudioType)(e),O[e]=t},setBufferToKeep:function(e){(0,Q.checkParameterType)(e,"number"),l=e},getBufferToKeep:function(){return l},setBufferAheadToKeep:function(e){(0,Q.checkParameterType)(e,"number"),d=e},getBufferAheadToKeep:function(){return d},setBufferPruningInterval:function(e){(0,Q.checkParameterType)(e,"number"),c=e},getBufferPruningInterval:function(){return c},setRetryAttemptsForType:function(e,t){if("number"!=typeof t||"string"!=typeof e||e!==W.HTTPRequest.MPD_TYPE&&e!==W.HTTPRequest.MEDIA_SEGMENT_TYPE)throw z.default.BAD_ARGUMENT_ERROR;T[e]=t},getRetryAttemptsForType:function(e){return V()?5*T[e]:T[e]},setRetryIntervalForType:function(e,t){(0,Q.checkParameterType)(t,"number"),E[e]=t},getRetryIntervalForType:function(e){return V()?E[e]/10:E[e]},setWallclockTimeUpdateInterval:function(e){(0,Q.checkParameterType)(e,"number"),S=e},getWallclockTimeUpdateInterval:function(){return S},setScheduleWhilePaused:function(e){(0,Q.checkParameterType)(e,"boolean"),u=e},getScheduleWhilePaused:function(){return u},getUseSuggestedPresentationDelay:function(){return i},setUseSuggestedPresentationDelay:function(e){(0,Q.checkParameterType)(e,"boolean"),i=e},setLiveDelayFragmentCount:function(e){(0,Q.checkParameterType)(e,"number"),o=e},getLiveDelayFragmentCount:function(){return o},getLiveDelay:G,setLiveDelay:function(e){void 0!==e&&(0,Q.checkParameterType)(e,"number"),s=e},setUseManifestDateHeaderTimeSource:function(e){(0,Q.checkParameterType)(e,"boolean"),r=e},getUseManifestDateHeaderTimeSource:function(){return r},addUTCTimingSource:H,removeUTCTimingSource:q,getUTCTimingSources:function(){return a},clearDefaultUTCTimingSources:function(){a=[]},restoreDefaultUTCTimingSources:function(){H(U.scheme,U.value)},setXHRWithCredentialsForType:function t(e,n){e?C[e]=!!n:Object.keys(C).forEach(function(e){t(e,n)})},getXHRWithCredentialsForType:function(e){var t=C[e];return void 0===t?C.default:t},setFastSwitchEnabled:function(e){(0,Q.checkParameterType)(e,"boolean"),R=e},getFastSwitchEnabled:function(){return R},setMovingAverageMethod:function(e){if(e!==z.default.MOVING_AVERAGE_SLIDING_WINDOW&&e!==z.default.MOVING_AVERAGE_EWMA)throw z.default.BAD_ARGUMENT_ERROR;M=e},getMovingAverageMethod:function(){return M},setJumpGaps:function(e){(0,Q.checkParameterType)(e,"boolean"),D=e},getJumpGaps:function(){return D},setSmallGapLimit:function(e){(0,Q.checkParameterType)(e,"number"),k=e},getSmallGapLimit:function(){return k},getLowLatencyEnabled:V,setLowLatencyEnabled:function(e){(0,Q.checkParameterType)(e,"boolean"),P=e},setCatchUpPlaybackRate:function(e){(0,Q.checkParameterType)(e,"number"),(0,Q.checkRange)(e,0,.5),B=e},getCatchUpPlaybackRate:function(){return B},setLowLatencyMinDrift:function(e){(0,Q.checkParameterType)(e,"number"),N=e},getLowLatencyMinDrift:function(){return N},setLowLatencyMaxDriftBeforeSeeking:function(e){(0,Q.checkParameterType)(e,"number"),F=e},getLowLatencyMaxDriftBeforeSeeking:function(){return F},setManifestUpdateRetryInterval:function(e){(0,Q.checkParameterType)(e,"number"),L=e},getManifestUpdateRetryInterval:function(){return L},setKeepProtectionMediaKeys:function(e){(0,Q.checkParameterType)(e,"boolean"),x=e},getKeepProtectionMediaKeys:function(){return x},getDefaultUtcTimingSource:function(){return U},reset:function(){}},u=r=!(i=!(a=[])),w=z.default.ABR_STRATEGY_DYNAMIC,f={enabled:!(R=!(A=!0)),ttl:36e4},h={enabled:!0,ttl:36e4},o=4,s=void 0,l=20,d=80,c=10,p=NaN,g=30,m=60,y=600,v=.2,_=.9,b=1e4,D=!(S=50),k=.8,C={default:!(L=100)},I=[],M=z.default.MOVING_AVERAGE_SLIDING_WINDOW,P=!1,N=.02,F=0,B=.5,K(t={},W.HTTPRequest.MPD_TYPE,3),K(t,W.HTTPRequest.XLINK_EXPANSION_TYPE,1),K(t,W.HTTPRequest.MEDIA_SEGMENT_TYPE,3),K(t,W.HTTPRequest.INIT_SEGMENT_TYPE,3),K(t,W.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),K(t,W.HTTPRequest.INDEX_SEGMENT_TYPE,3),K(t,W.HTTPRequest.OTHER_TYPE,3),T=t,K(n={},W.HTTPRequest.MPD_TYPE,500),K(n,W.HTTPRequest.XLINK_EXPANSION_TYPE,500),K(n,W.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),K(n,W.HTTPRequest.INIT_SEGMENT_TYPE,1e3),K(n,W.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),K(n,W.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),K(n,W.HTTPRequest.OTHER_TYPE,1e3),E=n,(O={})[z.default.VIDEO]=50,O[z.default.AUDIO]=5,x=!1,e}a.__dashjs_factory_name="MediaPlayerModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,179:179,208:208,235:235,48:48,89:89}],144:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var h=r(e(101)),y=r(e(102)),u=r(e(223)),v=e(235),d=r(e(238)),p=r(e(231)),g=r(e(232)),_=r(e(233)),b=r(e(234)),T=e(236),E=r(e(240)),S=r(e(47)),w=r(e(239)),A=r(e(53)),i=r(e(48));function a(){var e,i=1e3,t=this.context,r=(0,S.default)(t).getInstance(),n=void 0;function a(){r.trigger(A.default.METRICS_CHANGED)}function o(e){r.trigger(A.default.METRIC_CHANGED,{mediaType:e}),a()}function l(e,t,n){r.trigger(A.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),o(e)}function c(e,t,n){r.trigger(A.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),o(e)}function s(e){var t=void 0;return n.hasOwnProperty(e)?t=n[e]:(t=new u.default,n[e]=t),t}function f(e,t,n){var r=s(e);r[t].push(n),r[t].length>i&&r[t].shift()}function m(e,t,n){f(e,t,n),c(e,t,n)}return e={clearCurrentMetricsForType:function(e){delete n[e],o(e)},clearAllCurrentMetrics:function(){n={},a()},getReadOnlyMetricsFor:function(e){return n.hasOwnProperty(e)?n[e]:null},getMetricsFor:s,addHttpRequest:function e(t,n,r,i,a,o,s,u,l,d,c,f,h,p){var g=new v.HTTPRequest;a&&a!==i&&(e(t,null,r,i,null,null,s,u,null,null,null,f,null,null),g.actualurl=a),g.tcpid=n,g.type=r,g.url=i,g.range=s,g.trequest=u,g.tresponse=l,g.responsecode=c,g._tfinish=d,g._stream=t,g._mediaduration=f,g._responseHeaders=h,g._serviceLocation=o,p?p.forEach(function(e){!function(e,t,n,r){var i=new v.HTTPRequestTrace;i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n}(g,e.s,e.d,e.b)}):(delete g.interval,delete g.trace),m(t,y.default.HTTP_REQUEST,g)},addRepresentationSwitch:function(e,t,n,r,i){var a=new d.default;a.t=t,a.mt=n,a.to=r,i?a.lto=i:delete a.lto,m(e,y.default.TRACK_SWITCH,a)},addBufferLevel:function(e,t,n){var r=new p.default;r.t=t,r.level=n,m(e,y.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new g.default;r.target=n,r.state=t,m(e,y.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var i=new _.default;i.time=t,i.range=r,i.manifestInfo=n,m(e,y.default.DVR_INFO,i)},addDroppedFrames:function(e,t){var n=new b.default,r=s(e).DroppedFrames;n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,0<r.length&&r[r.length-1]==n||m(e,y.default.DROPPED_FRAMES,n)},addSchedulingInfo:function(e,t,n,r,i,a,o,s,u){var l=new E.default;l.mediaType=e,l.t=t,l.type=n,l.startTime=r,l.availabilityStartTime=i,l.duration=a,l.quality=o,l.range=s,l.state=u,m(e,y.default.SCHEDULING_INFO,l)},addRequestsQueue:function(e,t,n){var r=new w.default;r.loadingRequests=t,r.executedRequests=n,s(e).RequestsQueue=r,c(e,y.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,r,i,a,o,s,u,l){var d=new T.ManifestUpdate;d.mediaType=e,d.type=t,d.requestTime=n,d.fetchTime=r,d.availabilityStartTime=i,d.presentationStartTime=a,d.clientTimeOffset=o,d.currentTime=s,d.buffered=u,d.latency=l,f(h.default.STREAM,y.default.MANIFEST_UPDATE,d),c(e,y.default.MANIFEST_UPDATE,d)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];l(e.mediaType,y.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,i){if(e){var a=new T.ManifestUpdateStreamInfo;a.id=t,a.index=n,a.start=r,a.duration=i,e.streamInfo.push(a),l(e.mediaType,y.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,n,r,i,a,o,s){if(e){var u=new T.ManifestUpdateRepresentationInfo;u.id=t,u.index=n,u.streamIndex=r,u.mediaType=i,u.startNumber=o,u.fragmentInfoType=s,u.presentationTimeOffset=a,e.representationInfo.push(u),l(e.mediaType,y.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){var t=h.default.STREAM;e.trace&&Array.isArray(e.trace)?e.trace.forEach(function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel}):delete e.trace,m(t,y.default.PLAY_LIST,e)},addDVBErrors:function(e){m(h.default.STREAM,y.default.DVB_ERRORS,e)}},n={},e}a.__dashjs_factory_name="MetricsModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,102:102,223:223,231:231,232:232,233:233,234:234,235:235,236:236,238:238,239:239,240:240,47:47,48:48,53:53}],145:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(230)),i=r(e(48));function a(){var u=void 0;return{initialize:function(e){if(u=new l.default,!e)return null;var t=e.indexOf("#");if(-1!==t)for(var n=e.substr(t+1).split("&"),r=0,i=n.length;r<i;++r){var a=n[r],o=a.indexOf("=");if(-1!==o){var s=a.substring(0,o);u.hasOwnProperty(s)&&(u[s]=a.substr(o+1))}}},getURIFragmentData:function(){return u}}}a.__dashjs_factory_name="URIFragmentModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{230:230,48:48}],146:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),p=r(e(47)),g=r(e(53)),m=r(e(46));function a(){var e=void 0,t=void 0,o=void 0,n=void 0,r=void 0,i="element is not video or audio DOM type!",a=this.context,s=(0,p.default)(a).getInstance(),u=[];function l(){o&&(o.playbackRate=r||1,o.removeEventListener("canplay",l))}function d(e){o&&(o.readyState<=2&&0<e?o.addEventListener("canplay",l):o.playbackRate=e)}function c(){return 0<u.length}function f(){if(o&&c()&&0===o.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),o.dispatchEvent(e)}}function h(){return o?o.buffered:null}return e={initialize:function(){s.on(g.default.PLAYBACK_PLAYING,f,this)},setCurrentTime:function(t,e){if(o){if(o.currentTime==t)return;try{t=e?function(e){var t=h(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(a<=e&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o)}return n}(t):t,o.currentTime=t}catch(e){0===o.readyState&&e.code===e.INVALID_STATE_ERR&&setTimeout(function(){o.currentTime=t},400)}}},play:function(){if(o){o.autoplay=!0;var e=o.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch(function(e){"NotAllowedError"===e.name&&s.trigger(g.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")})}},isPaused:function(){return o?o.paused:null},pause:function(){o&&(o.pause(),o.autoplay=!1)},isSeeking:function(){return o?o.seeking:null},getTime:function(){return o?o.currentTime:null},getPlaybackRate:function(){return o?o.playbackRate:null},setPlaybackRate:d,getPlayedRanges:function(){return o?o.played:null},getEnded:function(){return o?o.ended:null},setStallState:function(e,t){!function(e,t){t?function(e){var t=void 0;if(null===e||o.seeking||-1!==u.indexOf(e))return;u.push(e),o&&1===u.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),r=o.playbackRate,d(0),o.dispatchEvent(t))}(e):function(e){var t=u.indexOf(e),n=void 0;if(null===e)return;-1!==t&&u.splice(t,1);o&&!1===c()&&0===o.playbackRate&&(d(r||1),o.paused||((n=document.createEvent("Event")).initEvent("playing",!0,!1),o.dispatchEvent(n)))}(e)}(e,t)},getElement:function(){return o},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw i;(o=e)&&(o.preload="auto")},setSource:function(e){o&&(e?o.src=e:(o.removeAttribute("src"),o.load()))},getSource:function(){return o?o.src:null},getTTMLRenderingDiv:function(){return n},setTTMLRenderingDiv:function(e){(n=e).style.position="absolute",n.style.display="flex",n.style.overflow="hidden",n.style.pointerEvents="none",n.style.top=0,n.style.left=0},getPlaybackQuality:function(){if(!o)return null;var e="webkitDroppedFrameCount"in o&&"webkitDecodedFrameCount"in o,t=null;return"getVideoPlaybackQuality"in o?t=o.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:o.webkitDroppedFrameCount,totalVideoFrames:o.webkitDroppedFrameCount+o.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){o&&o.addEventListener(e,t)},removeEventListener:function(e,t){o&&o.removeEventListener(e,t)},getReadyState:function(){return o?o.readyState:NaN},getBufferRange:h,getClientWidth:function(){return o?o.clientWidth:NaN},getClientHeight:function(){return o?o.clientHeight:NaN},getTextTracks:function(){return o?o.textTracks:[]},getTextTrack:function(e,t,n,r,i){if(o)for(var a=0;a<o.textTracks.length;a++)if(o.textTracks[a].kind===e&&(!t||o.textTracks[a].label==t)&&o.textTracks[a].language===n&&o.textTracks[a].isTTML===r&&o.textTracks[a].isEmbedded===i)return o.textTracks[a];return null},addTextTrack:function(e,t,n){return o?o.addTextTrack(e,t,n):null},appendChild:function(e){o&&(o.appendChild(e),void 0!==e.isTTML&&(o.textTracks[o.textTracks.length-1].isTTML=e.isTTML,o.textTracks[o.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){o&&o.removeChild(e)},getVideoWidth:function(){return o?o.videoWidth:NaN},getVideoHeight:function(){return o?o.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return o&&o.parentNode?o.getBoundingClientRect().top-o.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return o&&o.parentNode?o.getBoundingClientRect().left-o.parentNode.getBoundingClientRect().left:NaN},reset:function(){s.off(g.default.PLAYBACK_PLAYING,f,this)}},t=(0,m.default)(a).getInstance().getLogger(e),e}a.__dashjs_factory_name="VideoModel",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{46:46,47:47,48:48,53:53}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var a=(e=e||{}).requestModifier,g=e.boxParser;function m(t,e){t.reader.read().then(e).catch(function(e){t.onerror&&200===t.response.status&&t.onerror(e)})}function y(i,t){if(1<(i=i.filter(function(e){return e.bytes>t/4/i.length})).length){var e=(a=0,o=(i[i.length-1].ts-i[0].ts)/i.length,i.forEach(function(e,t){var n=i[t+1];if(n){var r=n.ts-e.ts;a+=r<o?r:0}}),{v:a});if("object"==typeof e)return e.v}var a,o;return null}return{load:function(p){var e=new Date,t=p.request,n=new Headers;t.range&&n.append("Range","bytes="+t.range),t.requestStartDate||(t.requestStartDate=e),a&&a.modifyRequestHeader({setRequestHeader:function(e,t){n.append(e,t)}});var r=void 0;"function"==typeof window.AbortController&&(r=new AbortController,p.abortController=r);var i={method:p.method,headers:n,credentials:p.withCredentials?"include":void 0,signal:r?r.signal:void 0};fetch(p.url,i).then(function(e){p.response||(p.response={}),p.response.status=e.status,p.response.statusText=e.statusText,p.response.responseURL=e.url,e.ok||p.onerror();var t="",n=!0,r=!1,i=void 0;try{for(var a,o=e.headers.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t+=s+": "+e.headers.get(s)+"\n"}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}if(p.response.responseHeaders=t,!e.body)return e.arrayBuffer().then(function(e){var t={loaded:(p.response.response=e).byteLength,total:e.byteLength,stream:!1};p.progress(t),p.onload(),p.onend()});var u=parseInt(e.headers.get("Content-Length"),10),l=0,d=!1,c=new Uint8Array,f=0;p.reader=e.body.getReader();var h=[];m(p,function e(t){var n=t.value;if(t.done)return c&&(p.progress({loaded:l,total:isNaN(u)?l:u,lengthComputable:!0,time:y(h,l),stream:!0}),p.response.response=c.buffer),p.onload(),void p.onend();if(n&&0<n.length){c=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(c,n),l+=n.length,h.push({ts:Date.now(),bytes:n.length});var r=g.findLastTopIsoBoxCompleted(["moov","mdat"],c,f);if(r.found){var i=r.lastCompletedOffset+r.size,a=void 0;c=i===c.length?(a=c,new Uint8Array):(a=new Uint8Array(c.subarray(0,i)),c.subarray(i)),p.progress({data:a.buffer,lengthComputable:!1,noTrace:!0}),f=0}else f=r.lastCompletedOffset,d||(p.progress({lengthComputable:!1,noTrace:!0}),d=!0)}m(p,e)})}).catch(function(e){p.onerror&&p.onerror(e)})},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:y}}o.__dashjs_factory_name="FetchLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48}],148:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0});var D=r(e(149)),k=r(e(147)),P=e(235),a=r(e(48)),o=r(e(50)),L=r(e(215));function s(e){e=e||{};var t,n,r,_=this.context,b=e.errHandler,T=e.metricsModel,E=e.mediaPlayerModel,S=e.requestModifier,w=e.boxParser,A=e.useFetch||!1,C=void 0,R=void 0,I=void 0,M=void 0,O=void 0;return t={load:function(e){e.request&&!function t(n,r){var i=n.request,a=[],o=!0,s=!0,u=new Date,l=u,d=0,c=void 0;if(!S||!T||!b)throw new Error("config object is not correct or missing");function e(e){s=!1,i.requestStartDate=u,i.requestEndDate=new Date,i.firstByteDate=i.firstByteDate||u,i.checkExistenceOnly||(T.addHttpRequest(i.mediaType,null,i.type,i.url,c.response?c.response.responseURL:null,i.serviceLocation||null,i.range||null,i.requestStartDate,i.firstByteDate,i.requestEndDate,c.response?c.response.status:null,i.duration,c.response&&c.response.getAllResponseHeaders?c.response.getAllResponseHeaders():c.response?c.response.responseHeaders:[],e?a:null),i.type===P.HTTPRequest.MPD_TYPE&&T.addManifestUpdate("stream",i.type,i.requestStartDate,i.requestEndDate))}function f(){-1!==C.indexOf(c)&&(C.splice(C.indexOf(c),1),s&&(e(!1),0<r?function(){r--;var e={config:n};I.push(e),e.timeout=setTimeout(function(){-1!==I.indexOf(e)&&(I.splice(I.indexOf(e),1),t(n,r))},E.getRetryIntervalForType(i.type))}():(b.downloadError(M[i.type],i.url,i),b.error(new L.default(O[i.type],i.url+" is not available",{request:i,response:c.response})),n.error&&n.error(i,"error",c.response.statusText),n.complete&&n.complete(i,c.response.statusText))))}var h=void 0;h=A&&window.fetch&&"arraybuffer"===i.responseType&&i.type===P.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,k.default)(_).create({requestModifier:S,boxParser:w}):(0,D.default)(_).create({requestModifier:S,boxParser:w});var p=S.modifyRequestURL(i.url),g=i.checkExistenceOnly?P.HTTPRequest.HEAD:P.HTTPRequest.GET,m=E.getXHRWithCredentialsForType(i.type);c={url:p,method:g,withCredentials:m,request:i,onload:function(){200<=c.response.status&&c.response.status<=299&&(e(!0),n.success&&n.success(c.response.response,c.response.statusText,c.response.responseURL),n.complete&&n.complete(i,c.response.statusText))},onend:f,onerror:f,progress:function(e){var t=new Date;o&&(o=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(i.firstByteDate=t)),e.lengthComputable&&(i.bytesLoaded=e.loaded,i.bytesTotal=e.total),e.noTrace||(a.push({s:l,d:e.time?e.time:t.getTime()-l.getTime(),b:[e.loaded?e.loaded-d:0]}),l=t,d=e.loaded),n.progress&&e&&n.progress(e)},onabort:function(){n.abort&&n.abort(i)},loader:h};var y,v=(new Date).getTime();isNaN(i.delayLoadingTime)||v>=i.delayLoadingTime?(C.push(c),h.load(c)):(y={httpRequest:c},R.push(y),y.delayTimeout=setTimeout(function(){if(-1!==R.indexOf(y)){R.splice(R.indexOf(y),1);try{u=new Date,l=u,C.push(y.httpRequest),h.load(y.httpRequest)}catch(e){y.httpRequest.onerror()}}},i.delayLoadingTime-v))}(e,E.getRetryAttemptsForType(e.request.type))},abort:function(){I.forEach(function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)}),I=[],R.forEach(function(e){return clearTimeout(e.delayTimeout)}),R=[],C.forEach(function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e),e.onabort()}),C=[]}},C=[],R=[],I=[],i(n={},P.HTTPRequest.MPD_TYPE,o.default.DOWNLOAD_ERROR_ID_MANIFEST),i(n,P.HTTPRequest.XLINK_EXPANSION_TYPE,o.default.DOWNLOAD_ERROR_ID_XLINK),i(n,P.HTTPRequest.INIT_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_INITIALIZATION),i(n,P.HTTPRequest.MEDIA_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,P.HTTPRequest.INDEX_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,P.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),i(n,P.HTTPRequest.OTHER_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT),M=n,i(r={},P.HTTPRequest.MPD_TYPE,o.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),i(r,P.HTTPRequest.XLINK_EXPANSION_TYPE,o.default.DOWNLOAD_ERROR_ID_XLINK_CODE),i(r,P.HTTPRequest.INIT_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),i(r,P.HTTPRequest.MEDIA_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,P.HTTPRequest.INDEX_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,P.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),i(r,P.HTTPRequest.OTHER_TYPE,o.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),O=r,t}s.__dashjs_factory_name="HTTPLoader";var u=a.default.getClassFactory(s);n.default=u,t.exports=n.default},{147:147,149:149,215:215,235:235,48:48,50:50}],149:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var i=(e=e||{}).requestModifier;return{load:function(e){var t=new Date,n=e.request,r=new XMLHttpRequest;r.open(e.method,e.url,!0),n.responseType&&(r.responseType=n.responseType),n.range&&r.setRequestHeader("Range","bytes="+n.range),n.requestStartDate||(n.requestStartDate=t),i&&(r=i.modifyRequestHeader(r)),r.withCredentials=e.withCredentials,r.onload=e.onload,r.onloadend=e.onend,r.onerror=e.onerror,r.onprogress=e.progress,r.onabort=e.onabort,r.send(),e.response=r},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}o.__dashjs_factory_name="XHRLoader";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48}],150:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,0<r&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(e,t){var n=a.parsePSSHList(t);return n.hasOwnProperty(e.uuid.toLowerCase())?n[e.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";var u=void 0,l=void 0;for(u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i}else r=i;else r=i}return n}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}n.default=i,t.exports=n.default},{}],151:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(153)),a=r(e(154)),o=r(e(152)),s=r(e(159)),l=r(e(161)),d=r(e(162)),c=r(e(160)),f=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],h=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function u(){var o=void 0,s=this.context;function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return o={createProtectionSystem:function(e){var t=null,n=(0,a.default)(s).getInstance();n.setConfig({debug:e.debug,BASE64:e.BASE64}),n.initialize();var r=function(e){var t=e.debug,n=t.getLogger(o),r=e.eventBus,i=e.errHandler,a=e.videoModel?e.videoModel.getElement():null;return a&&void 0===a.onencrypted||a&&void 0===a.mediaKeys?u(a,h)?(n.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,d.default)(s).create({debug:t,eventBus:r,events:e.events,api:u(a,h)})):u(a,f)?(n.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,c.default)(s).create({debug:t,eventBus:r,errHandler:i,events:e.events,api:u(a,f)})):(n.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(n.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,l.default)(s).create({debug:t,eventBus:r,events:e.events}))}(e);return!t&&r&&(t=(0,i.default)(s).create({protectionModel:r,protectionKeyController:n,eventBus:e.eventBus,debug:e.debug,events:e.events,BASE64:e.BASE64,constants:e.constants}),e.capabilities.setEncryptedMediaSupported(!0)),t}}}u.__dashjs_factory_name="Protection";var p=dashjs.FactoryMaker.getClassFactory(u);p.events=o.default,p.errors=s.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,p),n.default=p,t.exports=n.default},{152:152,153:153,154:154,159:159,160:160,161:161,162:162}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(54);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{54:54}],153:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var I=r(e(150)),M=r(e(172)),O=r(e(171)),D=r(e(159)),k=r(e(215));function i(e){var t,b=(e=e||{}).protectionKeyController,T=e.protectionModel,E=e.eventBus,S=e.events,n=e.debug,d=e.BASE64,l=e.constants,s=[],w=void 0,c=void 0,f=void 0,u=void 0,r=void 0,h=void 0,A=void 0;function p(e,t){var n=I.default.getPSSHForKeySystem(A,e),r=C(A);if(n){for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(b.initDataEquals(n,i[a]))return void w.warn("DRM: Ignoring initData because we have already seen it!");try{T.createKeySession(n,r,y(A),t)}catch(e){E.trigger(S.KEY_SESSION_CREATED,{data:null,error:new k.default(D.default.KEY_SESSION_CREATED_ERROR_CODE,D.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?T.createKeySession(e,r,y(A),t):E.trigger(S.KEY_SESSION_CREATED,{data:null,error:new k.default(D.default.KEY_SESSION_CREATED_ERROR_CODE,D.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+A.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function g(e,t){T.loadKeySession(e,t,y(A))}function i(e){e?(T.setMediaElement(e),E.on(S.NEED_KEY,_,this)):null===e&&(T.setMediaElement(e),E.off(S.NEED_KEY,_,this))}function C(e){var t=null;if(e){var n=e.systemString;u&&(t=n in u?u[n]:null)}return t}function m(e){var t=C(e),n=[],r=[],i=t&&t.audioRobustness&&0<t.audioRobustness.length?t.audioRobustness:h,a=t&&t.videoRobustness&&0<t.videoRobustness.length?t.videoRobustness:h,o=y(e),s=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",u=t&&t.persistentState?t.persistentState:"temporary"===o?"optional":"required";return f.forEach(function(e){e.type===l.AUDIO?n.push(new M.default(e.codec,i)):e.type===l.VIDEO&&r.push(new M.default(e.codec,a))}),new O.default(n,r,s,u,[o])}function y(e){var t=C(e);return t&&t.sessionType?t.sessionType:r}function v(n,s){var u=this,t=[],l=void 0;if(A)for(l=0;l<n.length;l++){if(A===n[l].ks)if("break"===function(){t.push({ks:n[l].ks,configs:[m(A)]});return E.on(S.KEY_SYSTEM_ACCESS_COMPLETE,function e(t){E.off(S.KEY_SYSTEM_ACCESS_COMPLETE,e,u),t.error?s||E.trigger(S.KEY_SYSTEM_SELECTED,{error:new k.default(D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)}):(w.info("DRM: KeySystem Access Granted"),E.trigger(S.KEY_SYSTEM_SELECTED,{data:t.data}),n[l].sessionId?g(n[l].sessionId,n[l].initData):n[l].initData&&p(n[l].initData,n[l].cdmData))},u),T.requestKeySystemAccess(t),"break"}())break}else if(void 0===A){var r;!function(){A=null,c.push(n);for(var e=0;e<n.length;e++)t.push({ks:n[e].ks,configs:[m(n[e].ks)]});function a(e){E.off(S.KEY_SYSTEM_ACCESS_COMPLETE,a,u),e.error?(A=void 0,E.off(S.INTERNAL_KEY_SYSTEM_SELECTED,r,u),s||E.trigger(S.KEY_SYSTEM_SELECTED,{data:null,error:new k.default(D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+e.error)})):(o=e.data,w.info("DRM: KeySystem Access Granted ("+o.keySystem.systemString+")!  Selecting key system..."),T.selectKeySystem(o))}var o=void 0;r=function e(t){if(E.off(S.INTERNAL_KEY_SYSTEM_SELECTED,e,u),E.off(S.KEY_SYSTEM_ACCESS_COMPLETE,a,u),t.error)A=void 0,s||E.trigger(S.KEY_SYSTEM_SELECTED,{data:null,error:new k.default(D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,D.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+t.error)});else{if(!T)return;A=T.getKeySystem(),E.trigger(S.KEY_SYSTEM_SELECTED,{data:o});var n=C(A);n&&n.serverCertificate&&0<n.serverCertificate.length&&T.setServerCertificate(d.decodeArray(n.serverCertificate).buffer);for(var r=0;r<c.length;r++)for(l=0;l<c[r].length;l++)if(A===c[r][l].ks){if(b.isClearKey(A)&&n&&n.hasOwnProperty("clearkeys")){var i={kids:Object.keys(n.clearkeys)};c[r][l].initData=(new TextEncoder).encode(JSON.stringify(i))}c[r][l].sessionId?g(c[r][l].sessionId,c[r][l].initData):null!==c[r][l].initData&&p(c[r][l].initData,c[r][l].cdmData);break}}},E.on(S.INTERNAL_KEY_SYSTEM_SELECTED,r,u),E.on(S.KEY_SYSTEM_ACCESS_COMPLETE,a,u),T.requestKeySystemAccess(t)}()}else c.push(n)}function R(e,t){E.trigger(S.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function a(e){e.error?E.trigger(S.KEY_STATUSES_CHANGED,{data:null,error:e.error}):w.debug("DRM: key status = "+e.status)}function o(e){w.debug("DRM: onKeyMessage");var t=e.data;E.trigger(S.KEY_MESSAGE,{data:t});var n=t.messageType?t.messageType:"license-request",r=t.message,i=t.sessionToken,a=C(A),o=A?A.systemString:null,s=b.getLicenseServer(A,a,n),u={sessionToken:i,messageType:n};if(r&&0!==r.byteLength){if(!s)return w.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+i.getSessionID()),void R(u);if(b.isClearKey(A)){var l=b.processClearKeyLicenseRequest(A,a,r);if(l)return w.debug("DRM: ClearKey license request handled by application!"),R(u),void T.updateKeySession(i,l)}var d=null;if(a&&a.serverURL){var c=a.serverURL;"string"==typeof c&&""!==c?d=c:"object"==typeof c&&c.hasOwnProperty(n)&&(d=c[n])}else d=a&&a.laURL&&""!==a.laURL?a.laURL:(d=A.getLicenseServerURLFromInitData(I.default.getPSSHData(i.initData)))||e.data.laURL;if(d=s.getServerURLFromMessage(d,r,n)){var f={},h=!1,p=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(h=!0),f[t]=e[t]};a&&p(a.httpRequestHeaders),p(A.getRequestHeadersFromMessage(r)),a&&"boolean"==typeof a.withCredentials&&(h=a.withCredentials);var g=function(e,t,n,r){var i=e.response?s.getErrorResponse(e.response,n,r):"NONE";R(t,new k.default(D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i))},m=A.getLicenseRequestFromMessage(r),y=s.getHTTPMethod(n),v=s.getResponseType(o,n),_=a&&!isNaN(a.httpTimeout)?a.httpTimeout:8e3;!function e(t,n,r,i,a,o,s,u,l,d,c){var f=new XMLHttpRequest;f.open(r,t,!0);f.responseType=i;f.withCredentials=a;0<u&&(f.timeout=u);for(var h in n)f.setRequestHeader(h,n[h]);var p=function(){s--,setTimeout(function(){e(t,n,r,i,a,o,s,u,l,d,c)},1e3)};f.onload=function(){200===this.status||s<=0?l(this):(w.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p())};f.ontimeout=f.onerror=function(){s<=0?c(this):(w.warn("License request network request failed . Retrying it... Pending retries: "+s),p())};f.onabort=function(){d(this)};f.send(o)}(d,f,y,v,h,m,3,_,function(e){if(T)if(200===e.status){var t=s.getLicenseMessage(e.response,o,n);null!==t?(R(u),T.updateKeySession(i,t)):g(e,u,o,n)}else g(e,u,o,n)},function(e){R(u,new k.default(D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},function(e){R(u,new k.default(D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+o+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))})}else R(u,new k.default(D.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else R(u,new k.default(D.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function _(e,t){if(w.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===f.length&&(w.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))s.push(setTimeout(function(){_(e,t)},500));else{var n=e.key.initData;if(ArrayBuffer.isView(n)&&(n=n.buffer),A){var r=I.default.getPSSHForKeySystem(A,n);if(r)for(var i=T.getAllInitData(),a=0;a<i.length;a++)if(b.initDataEquals(r,i[a]))return void w.warn("DRM: Ignoring initData because we have already seen it!")}w.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(n)));var o=b.getSupportedKeySystems(n,u);0!==o.length?v(o,!1):w.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else w.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");!function(){if(!(E&&E.hasOwnProperty("on")&&b&&b.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}(),E.on(S.INTERNAL_KEY_MESSAGE,o,this),E.on(S.INTERNAL_KEY_STATUS_CHANGED,a,this),f.push(e);var t=b.getSupportedKeySystemsFromContentProtection(e.contentProtection);t&&0<t.length&&v(t,!0)},createKeySession:p,loadKeySession:g,removeKeySession:function(e){T.removeKeySession(e)},closeKeySession:function(e){T.closeKeySession(e)},setServerCertificate:function(e){T.setServerCertificate(e)},setMediaElement:i,setSessionType:function(e){r=e},setRobustnessLevel:function(e){h=e},setProtectionData:function(e){u=e,b.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return b.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return b?b.getKeySystems():[]},stop:function(){T&&T.stop()},reset:function(){E.off(S.INTERNAL_KEY_MESSAGE,o,this),E.off(S.INTERNAL_KEY_STATUS_CHANGED,a,this),i(null),A=void 0,T&&(T.reset(),T=null),s.forEach(function(e){return clearTimeout(e)}),s=[],f=[]}},w=n.getLogger(t),c=[],f=[],r="temporary",h="",t}i.__dashjs_factory_name="ProtectionController",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{150:150,159:159,171:171,172:172,215:215}],154:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(150)),d=r(e(155)),c=r(e(157)),f=r(e(158)),h=r(e(156)),p=r(e(164)),g=r(e(165)),m=r(e(166)),y=r(e(163)),v=r(e(103));function i(){var i=this.context,t=void 0,n=void 0,r=void 0,u=void 0,a=void 0,o=void 0,s=void 0;return t={initialize:function(){u=[];var e=void 0;e=(0,h.default)(i).getInstance({BASE64:a}),u.push(e),e=(0,f.default)(i).getInstance({BASE64:a}),u.push(e),e=(0,d.default)(i).getInstance({BASE64:a}),u.push(e),o=e,e=(0,c.default)(i).getInstance({BASE64:a,debug:n}),u.push(e),s=e},setProtectionData:function(e){for(var t,n,r=0;r<u.length;r++){var i=u[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}},isClearKey:function(e){return e===o||e===s},initDataEquals:function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},getKeySystems:function(){return u},getKeySystemBySystemString:function(e){for(var t=0;t<u.length;t++)if(u[t].systemString===e)return u[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=[];if(e)for(r=0;r<u.length;++r)for(n=u[r],i=0;i<e.length;++i)if((t=e[i]).schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);o?a.push({ks:u[r],initData:o,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)}):this.isClearKey(n)&&a.push({ks:n,initData:null})}return a},getSupportedKeySystems:function(e,t){for(var n=[],r=l.default.parsePSSHList(e),i=void 0,a=void 0,o=void 0,s=0;s<u.length;++s)a=(i=u[s]).systemString,o=!t||a in t,i.uuid in r&&o&&n.push({ks:i,initData:r[i.uuid],cdmData:i.getCDMData(),sessionId:i.getSessionId()});return n},getLicenseServer:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=(0,p.default)(i).getInstance({BASE64:a}):e.systemString===v.default.WIDEVINE_KEYSTEM_STRING?r=(0,m.default)(i).getInstance():e.systemString===v.default.PLAYREADY_KEYSTEM_STRING?r=(0,g.default)(i).getInstance():e.systemString===v.default.CLEARKEY_KEYSTEM_STRING&&(r=(0,y.default)(i).getInstance()),r},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return r.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,r=n.getLogger(t)),e.BASE64&&(a=e.BASE64))}}}i.__dashjs_factory_name="ProtectionKeyController",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{103:103,150:150,155:155,156:156,157:157,158:158,163:163,164:164,165:165,166:166}],155:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var u=r(e(169)),l=r(e(167)),i=r(e(150)),a=r(e(103)),o="e2719d58-a985-b3c9-781a-b030af78d30e",s=a.default.CLEARKEY_KEYSTEM_STRING;function d(e){var t=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new u.default(o,s))}n=new l.default(i)}return n}}}d.__dashjs_factory_name="KeySystemClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(d),t.exports=n.default},{103:103,150:150,167:167,169:169}],156:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(150)),i=r(e(103)),a="9a04f079-9840-4286-ab92-e65be0885f95",o=i.default.PLAYREADY_KEYSTEM_STRING,s=void 0;function u(e){var l="utf16",d=(e=e||{}).BASE64;function c(){if(!d||!d.hasOwnProperty("decodeArray")||!d.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:a,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:o,getInitData:function(e){var t,n,r,i=new Uint8Array([112,115,115,104,0,0,0,0]),a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=0,s=null,u=void 0,l=void 0;if(c(),"pssh"in e)return f.default.parseInitDataFromContentProtection(e,d);if("pro"in e)s=d.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;s=d.decodeArray(e.prheader.__text)}return t=s.length,n=4+i.length+a.length+4+t,r=new ArrayBuffer(n),u=new Uint8Array(r),(l=new DataView(r)).setUint32(o,n),o+=4,u.set(i,o),o+=i.length,u.set(a,o),o+=a.length,l.setUint32(o,t),o+=4,u.set(s,o),o+=t,u.buffer},getRequestHeadersFromMessage:function(e){var t,n=void 0,r={},i=new DOMParser,a="utf16"===l?new Uint16Array(e):new Uint8Array(e);t=String.fromCharCode.apply(null,a);for(var o=(n=i.parseFromString(t,"application/xml")).getElementsByTagName("name"),s=n.getElementsByTagName("value"),u=0;u<o.length;u++)r[o[u].childNodes[0].nodeValue]=s[u].childNodes[0].nodeValue;return r.hasOwnProperty("Content")&&(r["Content-Type"]=r.Content,delete r.Content),r.hasOwnProperty("Content-Type")||(r["Content-Type"]="text/xml; charset="+l),r},getLicenseRequestFromMessage:function(e){var t=null,n=new DOMParser,r="utf16"===l?new Uint16Array(e):new Uint8Array(e);c();var i=String.fromCharCode.apply(null,r),a=n.parseFromString(i,"application/xml");if(a.getElementsByTagName("Challenge")[0]){var o=a.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;o&&(t=d.decode(o))}else if(a.getElementsByTagName("parsererror").length)return e;return t},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var f=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=s}return null},getCDMData:function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(c(),s&&s.cdmData){for(e=[],r=0;r<s.cdmData.length;++r)e.push(s.cdmData.charCodeAt(r)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=d.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),n=[],r=0;r<t.length;++r)n.push(t.charCodeAt(r)),n.push(0);return new Uint8Array(n).buffer}return null},getSessionId:function(e){return s&&s.sessionId?s.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf8"!==e&&"utf16"!==e)throw new Error("Illegal PlayReady message format! -- "+e);l=e},init:function(e){e&&(s=e)}}}u.__dashjs_factory_name="KeySystemPlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{103:103,150:150}],157:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(169)),d=r(e(167)),i=r(e(150)),a=r(e(103)),o="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",s=a.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t=void 0,n=e.BASE64,u=e.debug.getLogger(t);return t={uuid:o,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:s,getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var r=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),i=[],a=0;a<r.kids.length;a++){var o=r.kids[a],s=e.clearkeys&&e.clearkeys.hasOwnProperty(o)?e.clearkeys[o]:null;if(!s)throw new Error("DRM: ClearKey keyID ("+o+") is not known!");i.push(new l.default(o,s))}n=new d.default(i),u.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}u.__dashjs_factory_name="KeySystemW3CClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{103:103,150:150,167:167,169:169}],158:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(150)),a=r(e(103)),o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",s=a.default.WIDEVINE_KEYSTEM_STRING;function u(e){var t=null,n=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:s,init:function(e){e&&(t=e)},getInitData:function(e){return i.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}u.__dashjs_factory_name="KeySystemWidevine",n.default=dashjs.FactoryMaker.getSingletonFactory(u),t.exports=n.default},{103:103,150:150}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(51);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(a.prototype),"constructor",this).call(this),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}var o=new(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,((r=i)&&r.__esModule?r:{default:r}).default),a);n.default=o,t.exports=n.default},{51:51}],160:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var b=r(e(154)),T=r(e(173)),E=r(e(215)),S=r(e(168)),w=r(e(171)),A=r(e(170)),C=r(e(159));function i(e){e=e||{};var t=this.context,f=e.eventBus,h=e.events,n=e.debug,o=e.api,s=e.errHandler,r=void 0,u=void 0,p=void 0,i=void 0,g=void 0,l=void 0,d=void 0,c=void 0,a=void 0;function m(){p&&_();for(var e=0;e<d.length;e++)y(d[e]);f.trigger(h.TEARDOWN_COMPLETE)}function y(t){try{p[o.cancelKeyRequest](i.systemString,t.sessionID)}catch(e){f.trigger(h.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.sessionID+") "+e.message})}}function v(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function _(){p.removeEventListener(o.keyerror,a),p.removeEventListener(o.needkey,a),p.removeEventListener(o.keymessage,a),p.removeEventListener(o.keyadded,a)}return r={getAllInitData:function(){for(var e=[],t=0;t<l.length;t++)e.push(l[t].initData);for(t=0;t<d.length;t++)e.push(d[t].initData);return e},requestKeySystemAccess:function(e){var t=p;t=t||document.createElement("video");for(var n=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=0;s<a.length;s++){var u=a[s].videoCapabilities;if(u&&0!==u.length){o=[];for(var l=0;l<u.length;l++)""!==t.canPlayType(u[l].contentType,i)&&o.push(u[l])}if(o&&(!o||0!==o.length)){n=!0;var d=new w.default(null,o),c=g.getKeySystemBySystemString(i);f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{data:new A.default(c,d)});break}}n||f.trigger(h.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return i},selectKeySystem:function(e){i=e.keySystem,f.trigger(h.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(p!==e){if(p){_();for(var t=0;t<d.length;t++)y(d[t]);d=[]}(p=e)&&(p.addEventListener(o.keyerror,a),p.addEventListener(o.needkey,a),p.addEventListener(o.keymessage,a),p.addEventListener(o.keyadded,a),f.trigger(h.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!i)throw new Error("Can not create sessions until you have selected a key system");if(c||0===d.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return l.push(t),p[o.generateKeyRequest](i.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(g.isClearKey(i))for(var r=0;r<t.keyPairs.length;r++)p[o.addKey](i.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else p[o.addKey](i.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:y,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:m,reset:m},u=n.getLogger(r),i=p=null,l=[],d=[],g=(0,b.default)(t).getInstance(),a={handleEvent:function(e){var t=null;switch(e.type){case o.needkey:var n=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;f.trigger(h.NEED_KEY,{key:new T.default(n,"cenc")});break;case o.keyerror:if(t=(t=v(d,e.sessionId))||v(l,e.sessionId)){var r=C.default.MEDIA_KEYERR_CODE,i="";switch(e.errorCode.code){case 1:r=C.default.MEDIA_KEYERR_UNKNOWN_CODE,i+="MEDIA_KEYERR_UNKNOWN - "+C.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:r=C.default.MEDIA_KEYERR_CLIENT_CODE,i+="MEDIA_KEYERR_CLIENT - "+C.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:r=C.default.MEDIA_KEYERR_SERVICE_CODE,i+="MEDIA_KEYERR_SERVICE - "+C.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:r=C.default.MEDIA_KEYERR_OUTPUT_CODE,i+="MEDIA_KEYERR_OUTPUT - "+C.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:r=C.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,i+="MEDIA_KEYERR_HARDWARECHANGE - "+C.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:r=C.default.MEDIA_KEYERR_DOMAIN_CODE,i+="MEDIA_KEYERR_DOMAIN - "+C.default.MEDIA_KEYERR_DOMAIN_MESSAGE}i+="  System Code = "+e.systemCode,f.trigger(h.KEY_ERROR,{data:new E.default(r,i,t)})}else u.error("No session token found for key error");break;case o.keyadded:(t=(t=v(d,e.sessionId))||v(l,e.sessionId))?(u.debug("DRM: Key added."),f.trigger(h.KEY_ADDED,{data:t})):u.debug("No session token found for key added");break;case o.keymessage:if((c=null!==e.sessionId&&void 0!==e.sessionId)?!(t=v(d,e.sessionId))&&0<l.length&&(t=l.shift(),d.push(t),t.sessionID=e.sessionId,f.trigger(h.KEY_SESSION_CREATED,{data:t})):0<l.length&&(t=l.shift(),d.push(t),0!==l.length&&(s.mediaKeyMessageError(C.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE),s.error(new E.default(C.default.MEDIA_KEY_MESSAGE_ERROR_CODE,C.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE)))),t){var a=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=a,f.trigger(h.INTERNAL_KEY_MESSAGE,{data:new S.default(t,a,e.defaultURL)})}else u.warn("No session token found for key message")}}},r}i.__dashjs_factory_name="ProtectionModel_01b",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{154:154,159:159,168:168,170:170,171:171,173:173,215:215}],161:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(154)),v=r(e(173)),_=r(e(159)),b=r(e(215)),T=r(e(168)),E=r(e(170)),S=r(e(103));function i(e){e=e||{};var t=this.context,o=e.eventBus,s=e.events,n=e.debug,r=void 0,u=void 0,l=void 0,i=void 0,d=void 0,c=void 0,a=void 0,f=void 0;function h(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function p(e){for(var t=0;t<c.length;t++)if(c[t]===e){c.splice(t,1);break}}function g(e){var t=void 0,n=void 0;return e&&0<e.length&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function m(t,e,n,r){var i={session:t,initData:e,sessionId:r,handleEvent:function(e){switch(e.type){case"keystatuseschange":o.trigger(s.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach(function(){var e=g(arguments);switch(e.status){case"expired":o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,{error:new b.default(_.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,_.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:o.trigger(s.INTERNAL_KEY_STATUS_CHANGED,e)}});break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;o.trigger(s.INTERNAL_KEY_MESSAGE,{data:new T.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return t.sessionId},getExpirationTime:function(){return t.expiration},getKeyStatuses:function(){return t.keyStatuses},getUsable:function(){var e=!1;return t.keyStatuses.forEach(function(){"usable"===g(arguments).status&&(e=!0)}),e},getSessionType:function(){return n}};return t.addEventListener("keystatuseschange",i),t.addEventListener("message",i),t.closed.then(function(){p(i),u.debug("DRM: Session closed.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CLOSED,{data:i.getSessionID()})}),c.push(i),i}return r={getAllInitData:function(){for(var e=[],t=0;t<c.length;t++)c[t].initData&&e.push(c[t].initData);return e},requestKeySystemAccess:function(e){!function i(a,e){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(t){var r=a[t].ks,e=a[t].configs,n=r.systemString;n===S.default.PLAYREADY_KEYSTEM_STRING&&"required"===e[0].persistentState&&(n+=".recommendation"),navigator.requestMediaKeySystemAccess(n,e).then(function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,n=new E.default(r,t);n.mksa=e,o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{data:n})}).catch(function(e){++t<a.length?i(a,t):o.trigger(s.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+e.message})})}(e)}(e,0)},getKeySystem:function(){return l},selectKeySystem:function(t){t.mksa.createMediaKeys().then(function(e){l=t.keySystem,d=e,i?i.setMediaKeys(d).then(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED)}):o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){o.trigger(s.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+t.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})},setMediaElement:function(e){i!==e&&(i&&(i.removeEventListener("encrypted",a),i.setMediaKeys&&i.setMediaKeys(null)),(i=e)&&(i.addEventListener("encrypted",a),i.setMediaKeys&&d&&i.setMediaKeys(d)))},setServerCertificate:function(e){if(!l||!d)throw new Error("Can not set server certificate until you have selected a key system");d.setServerCertificate(e).then(function(){u.info("DRM: License server certificate successfully updated."),o.trigger(s.SERVER_CERTIFICATE_UPDATED)}).catch(function(e){o.trigger(s.SERVER_CERTIFICATE_UPDATED,{error:new b.default(_.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,_.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})})},createKeySession:function(e,t,n){if(!l||!d)throw new Error("Can not create sessions until you have selected a key system");var r=d.createSession(n),i=m(r,e,n),a=this.getKeySystem().systemString===S.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";r.generateRequest(a,e).then(function(){u.debug("DRM: Session created.  SessionID = "+i.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:i})}).catch(function(e){p(i),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new b.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})})},updateKeySession:function(t,e){var n=t.session;f.isClearKey(l)&&(e=e.toJWK()),n.update(e).catch(function(e){o.trigger(s.KEY_ERROR,{data:new b.default(_.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+e.name,t)})})},loadKeySession:function(t,e,n){if(!l||!d)throw new Error("Can not load sessions until you have selected a key system");for(var r=0;r<c.length;r++)if(t===c[r].sessionId)return void u.warn("DRM: Ignoring session ID because we have already seen it!");var i=d.createSession(n),a=m(i,e,n,t);i.load(t).then(function(e){e?(u.debug("DRM: Session loaded.  SessionID = "+a.getSessionID()),o.trigger(s.KEY_SESSION_CREATED,{data:a})):(p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new b.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))}).catch(function(e){p(a),o.trigger(s.KEY_SESSION_CREATED,{data:null,error:new b.default(_.default.KEY_SESSION_CREATED_ERROR_CODE,_.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})})},removeKeySession:function(t){t.session.remove().then(function(){u.debug("DRM: Session removed.  SessionID = "+t.getSessionID()),o.trigger(s.KEY_SESSION_REMOVED,{data:t.getSessionID()})},function(e){o.trigger(s.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+t.getSessionID()+"). "+e.name})})},closeKeySession:function(t){h(t).catch(function(e){p(t),o.trigger(s.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+t.getSessionID()+") "+e.name})})},stop:function(){for(var e=void 0,t=0;t<c.length;t++)(e=c[t]).getUsable()||h(e).catch(function(){p(e)})},reset:function(){var n=c.length,r=void 0;0!==n?function(){for(var t=function(e){p(e),0===c.length&&(i?(i.removeEventListener("encrypted",a),i.setMediaKeys(null).then(function(){o.trigger(s.TEARDOWN_COMPLETE)})):o.trigger(s.TEARDOWN_COMPLETE))},e=0;e<n;e++)!function(e){r.session.closed.then(function(){t(e)}),h(r).catch(function(){t(e)})}(r=c[e])}():o.trigger(s.TEARDOWN_COMPLETE)}},u=n.getLogger(r),d=i=l=null,c=[],f=(0,y.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;o.trigger(s.NEED_KEY,{key:new v.default(t,e.initDataType)})}}}},r}i.__dashjs_factory_name="ProtectionModel_21Jan2015",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{103:103,154:154,159:159,168:168,170:170,173:173,215:215}],162:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(154)),_=r(e(173)),b=r(e(215)),T=r(e(159)),E=r(e(168)),S=r(e(171)),w=r(e(170));function i(e){e=e||{};var t=this.context,p=e.eventBus,g=e.events,n=e.debug,m=e.api,r=void 0,u=void 0,i=void 0,l=void 0,d=void 0,c=void 0,f=void 0,a=void 0,y=void 0;function o(){try{for(var e=0;e<f.length;e++)s(f[e]);i&&i.removeEventListener(m.needkey,a),p.trigger(g.TEARDOWN_COMPLETE)}catch(e){p.trigger(g.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function s(e){var t=e.session;t.removeEventListener(m.error,e),t.removeEventListener(m.message,e),t.removeEventListener(m.ready,e),t.removeEventListener(m.close,e);for(var n=0;n<f.length;n++)if(f[n]===e){f.splice(n,1);break}t[m.release]()}function h(){function e(){i.removeEventListener("loadedmetadata",t),i[m.setMediaKeys](d),p.trigger(g.VIDEO_ELEMENT_SELECTED)}var t=null;1<=i.readyState?e():(t=e.bind(this),i.addEventListener("loadedmetadata",t))}return r={getAllInitData:function(){for(var e=[],t=0;t<f.length;t++)e.push(f[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,n=0;n<e.length;n++)for(var r=e[n].ks.systemString,i=e[n].configs,a=null,o=null,s=0;s<i.length;s++){var u=i[s].audioCapabilities,l=i[s].videoCapabilities;if(u&&0!==u.length){a=[];for(var d=0;d<u.length;d++)window[m.MediaKeys].isTypeSupported(r,u[d].contentType)&&a.push(u[d])}if(l&&0!==l.length){o=[];for(var c=0;c<l.length;c++)window[m.MediaKeys].isTypeSupported(r,l[c].contentType)&&o.push(l[c])}if(!(!a&&!o||a&&0===a.length||o&&0===o.length)){t=!0;var f=new S.default(a,o),h=y.getKeySystemBySystemString(r);p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{data:new w.default(h,f)});break}}t||p.trigger(g.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return l},selectKeySystem:function(e){try{d=e.mediaKeys=new window[m.MediaKeys](e.keySystem.systemString),l=e.keySystem,c=e,i&&h(),p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){p.trigger(g.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+l.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){i!==e&&(i&&i.removeEventListener(m.needkey,a),(i=e)&&(i.addEventListener(m.needkey,a),d&&h()))},createKeySession:function(e,t,n,r){if(!l||!d||!c)throw new Error("Can not create sessions until you have selected a key system");var i=null;if(c.ksConfiguration.videoCapabilities&&0<c.ksConfiguration.videoCapabilities.length&&(i=c.ksConfiguration.videoCapabilities[0]),null===i&&c.ksConfiguration.audioCapabilities&&0<c.ksConfiguration.audioCapabilities.length&&(i=c.ksConfiguration.audioCapabilities[0]),null===i)throw new Error("Can not create sessions for unknown content types.");var a=i.contentType,o=d.createSession(a,new Uint8Array(e),r?new Uint8Array(r):null),s=function(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case m.error:p.trigger(g.KEY_ERROR,{data:new b.default(T.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case m.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;p.trigger(g.INTERNAL_KEY_MESSAGE,{data:new E.default(this,t,e.destinationURL)});break;case m.ready:u.debug("DRM: Key added."),p.trigger(g.KEY_ADDED);break;case m.close:u.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),p.trigger(g.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(o,e);o.addEventListener(m.error,s),o.addEventListener(m.message,s),o.addEventListener(m.ready,s),o.addEventListener(m.close,s),f.push(s),u.debug("DRM: Session created.  SessionID = "+s.getSessionID()),p.trigger(g.KEY_SESSION_CREATED,{data:s})},updateKeySession:function(e,t){var n=e.session;y.isClearKey(l)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:s,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:o,reset:o},u=n.getLogger(r),c=d=l=i=null,f=[],y=(0,v.default)(t).getInstance(),a={handleEvent:function(e){switch(e.type){case m.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;p.trigger(g.NEED_KEY,{key:new _.default(t,"cenc")})}}}},r}i.__dashjs_factory_name="ProtectionModel_3Feb2014",n.default=dashjs.FactoryMaker.getClassFactory(i),t.exports=n.default},{154:154,159:159,168:168,170:170,171:171,173:173,215:215}],163:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=r(e(169)),s=r(e(167));function i(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var r=e.keys[n],i=r.kid.replace(/=/g,""),a=r.k.replace(/=/g,"");t.push(new o.default(i,a))}return new s.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}i.__dashjs_factory_name="ClearKey",n.default=dashjs.FactoryMaker.getSingletonFactory(i),t.exports=n.default},{167:167,169:169}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(103),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).BASE64,r={};r[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return n.decodeArray(e.license)},getErrorResponse:function(e){return e}},r[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return r[e].responseType},getLicenseMessage:function(e,t){return function(){if(!n||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),r[t].getLicenseMessage(e)},getErrorResponse:function(e,t){return r[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",n.default=dashjs.FactoryMaker.getSingletonFactory(o),t.exports=n.default},{103:103}],165:[function(e,t,n){"use strict";function r(){var g="http://schemas.xmlsoap.org/soap/envelope/";function m(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return function(e){if(window.DOMParser){var t=m(e),n=(new window.DOMParser).parseFromString(t,"text/xml"),r=n?n.getElementsByTagNameNS(g,"Envelope")[0]:null,i=r?r.getElementsByTagNameNS(g,"Body")[0]:null;if(i?i.getElementsByTagNameNS(g,"Fault")[0]:null)return null}return e}.call(this,e)},getErrorResponse:function(e){return function(e){var t="",n="",r="",i=-1,a=-1;if(window.DOMParser){var o=m(e),s=(new window.DOMParser).parseFromString(o,"text/xml"),u=s?s.getElementsByTagNameNS(g,"Envelope")[0]:null,l=u?u.getElementsByTagNameNS(g,"Body")[0]:null,d=l?l.getElementsByTagNameNS(g,"Fault")[0]:null,c=d?d.getElementsByTagName("detail")[0]:null,f=c?c.getElementsByTagName("Exception")[0]:null,h=null;if(null===d)return o;t=(h=d.getElementsByTagName("faultstring")[0].firstChild)?h.nodeValue:null,null!==f&&(n=(h=f.getElementsByTagName("StatusCode")[0])?h.firstChild.nodeValue:null,i=(r=(h=f.getElementsByTagName("Message")[0])?h.firstChild.nodeValue:null)?r.lastIndexOf("[")+1:-1,a=r?r.indexOf("]"):-1,r=r?r.substring(i,a):"")}var p="code: "+n+", name: "+t;return r&&(p+=", message: "+r),p}.call(this,e)}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],166:[function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(n,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",n.default=dashjs.FactoryMaker.getSingletonFactory(r),t.exports=n.default},{}],167:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),a);function a(e,t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t&&"persistent"!==t&&"temporary"!==t)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=t}n.default=i,t.exports=n.default},{}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"},t.exports=n.default},{}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n},t.exports=n.default},{}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n},t.exports=n.default},{}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a},t.exports=n.default},{}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n},t.exports=n.default},{}],173:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n},t.exports=n.default},{}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){var o=[],s=0,u=0;return{push:function(e,t){var n=t&&t.droppedVideoFrames?t.droppedVideoFrames:0,r=t&&t.totalVideoFrames?t.totalVideoFrames:0,i=n-s;s=n;var a=r-u;u=r,isNaN(e)||(o[e]?(o[e].droppedVideoFrames+=i,o[e].totalVideoFrames+=a):o[e]={droppedVideoFrames:i,totalVideoFrames:a})},getFrameHistory:function(){return o},reset:function(e){o=[],s=e.droppedVideoFrames,u=e.totalVideoFrames}}}o.__dashjs_factory_name="DroppedFramesHistory";var s=a.default.getClassFactory(o);n.default=s,t.exports=n.default},{48:48}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.streamProcessor?e.streamProcessor.getScheduleController():null,s=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function u(){return s?s.mediaInfo:null}return{getMediaType:function(){var e=u();return e?e.type:null},getMediaInfo:u,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=u();return e?e.streamInfo:null},getScheduleController:function(){return o},getAbrController:function(){return t},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return a}}}o.__dashjs_factory_name="RulesContext",n.default=a.default.getClassFactory(o),t.exports=n.default},{48:48}],176:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r},o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){var r,i;return(r=n)!==(i=o.DEFAULT)&&r!==o.STRONG&&r!==o.WEAK||(i=r),{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:i}}s.__dashjs_factory_name="SwitchRequest";var u=a.default.getClassFactory(s);u.NO_CHANGE=-1,u.PRIORITY=o,a.default.updateClassFactory(s.__dashjs_factory_name,u),n.default=u,t.exports=n.default},{48:48}],177:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),u=r(e(176));function a(){var o=[],s=[];return{push:function(e){e.newValue===u.default.NO_CHANGE&&(e.newValue=e.oldValue),o[e.oldValue]||(o[e.oldValue]={noDrops:0,drops:0,dropSize:0});var t=e.newValue-e.oldValue,n=t<0?1:0,r=n?-t:0,i=n?0:1;if(o[e.oldValue].drops+=n,o[e.oldValue].dropSize+=r,o[e.oldValue].noDrops+=i,s.push({idx:e.oldValue,noDrop:i,drop:n,dropSize:r}),8<s.length){var a=s.shift();o[a.idx].drops-=a.drop,o[a.idx].dropSize-=a.dropSize,o[a.idx].noDrops-=a.noDrop}},getSwitchRequests:function(){return o},reset:function(){o=[],s=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";var o=i.default.getClassFactory(a);n.default=o,t.exports=n.default},{176:176,48:48}],178:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var b=r(e(101)),i=r(e(48));function a(e){var s=3,u=4,l=4,d=1.3,c=1.3,f=(e=e||{}).mediaPlayerModel,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0;function v(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function n(e,t,n){return f.getMovingAverageMethod()!==b.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?y.throughputHalfLife:y.latencyHalfLife,r=e?g[t]:m[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),a=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,a):Math.max(i,a)}(e,t):function(e,t,n){var r=function(e,t,n){var r=void 0,i=void 0;if(i=e?(r=h[t],n?s:u):(r=p[t],l),r){if(i>=r.length)i=r.length;else if(e)for(var a=1;a<i;++a){var o=r[a]/r[a-1];if((c<=o||o<=1/d)&&(i+=1)===r.length)break}}else i=0;return i}(e,t,n),i=(e?h:p)[t];return 0!==r&&i&&0!==i.length?(i=i.slice(-r)).reduce(function(e,t){return e+t})/i.length:NaN}(e,t,n)}function r(e,t){return n(!0,e,t)}function _(e){h[e]=h[e]||[],p[e]=p[e]||[],g[e]=g[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},m[e]=m[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function t(){h={},p={},g={},m={}}var i={push:function(e,t,n){if(t.trace&&t.trace.length){var r=t.tresponse.getTime()-t.trequest.getTime()||1,i=t._tfinish.getTime()-t.tresponse.getTime()||1,a=t.trace.reduce(function(e,t){return e+t.b[0]},0),o=void 0;o=f.getLowLatencyEnabled()?t.trace.reduce(function(e,t){return e+t.d},0):n?i:r+i;var s=Math.round(8*a/o);if(_(e),function(e,t,n){return e===b.default.VIDEO?n<f.getCacheLoadThresholdForType(b.default.VIDEO):e===b.default.AUDIO?n<f.getCacheLoadThresholdForType(b.default.AUDIO):void 0}(e,0,i)){if(0<h[e].length&&!h[e].hasCachedEntries)return;h[e].hasCachedEntries=!0}else h[e]&&h[e].hasCachedEntries&&function(e){delete h[e],delete p[e],delete g[e],delete m[e],_(e)}(e);h[e].push(s),20<h[e].length&&h[e].shift(),p[e].push(r),20<p[e].length&&p[e].shift(),v(g[e],s,.001*i,y.throughputHalfLife),v(m[e],r,1,y.latencyHalfLife)}},getAverageThroughput:r,getSafeAverageThroughput:function(e,t){var n=r(e,t);return isNaN(n)||(n*=f.getBandwidthSafetyFactor()),n},getAverageLatency:function(e){return n(!1,e)},reset:t};return y={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},t(),i}a.__dashjs_factory_name="ThroughputHistory",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,48:48}],179:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(185)),d=r(e(183)),c=r(e(180)),f=r(e(182)),h=r(e(184)),p=r(e(181)),i=r(e(48)),g=r(e(176)),m="qualitySwitchRules",y="abandonFragmentRules";function a(e){e=e||{};var s=this.context,t=e.mediaPlayerModel,n=e.metricsModel,r=e.dashMetrics,i=void 0,a=void 0;function o(e){return e.filter(function(e){return e.quality>g.default.NO_CHANGE})}function u(e){var t,n={},r=void 0,i=void 0,a=void 0,o=void 0;if(0!==e.length){for(n[g.default.PRIORITY.STRONG]=g.default.NO_CHANGE,n[g.default.PRIORITY.WEAK]=g.default.NO_CHANGE,n[g.default.PRIORITY.DEFAULT]=g.default.NO_CHANGE,r=0,t=e.length;r<t;r+=1)(i=e[r]).quality!==g.default.NO_CHANGE&&(n[i.priority]=n[i.priority]>g.default.NO_CHANGE?Math.min(n[i.priority],i.quality):i.quality);return n[g.default.PRIORITY.WEAK]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.WEAK]),n[g.default.PRIORITY.DEFAULT]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.DEFAULT]),n[g.default.PRIORITY.STRONG]!==g.default.NO_CHANGE&&(a=n[g.default.PRIORITY.STRONG]),a!==g.default.NO_CHANGE&&(o=a),(0,g.default)(s).create(o)}}return{initialize:function(){i=[],a=[],t.getUseDefaultABRRules()&&(i.push((0,p.default)(s).create({metricsModel:n,dashMetrics:r,mediaPlayerModel:t})),i.push((0,l.default)(s).create({metricsModel:n,dashMetrics:r})),i.push((0,d.default)(s).create({metricsModel:n,dashMetrics:r})),i.push((0,h.default)(s).create()),i.push((0,f.default)(s).create()),a.push((0,c.default)(s).create({metricsModel:n,dashMetrics:r,mediaPlayerModel:t}))),t.getABRCustomRules().forEach(function(e){e.type===m&&i.push(e.rule(s).create()),e.type===y&&a.push(e.rule(s).create())})},reset:function(){[i,a].forEach(function(e){e&&e.length&&e.forEach(function(e){return e.reset&&e.reset()})}),i=[],a=[]},getMaxQuality:function(t){return u(o(i.map(function(e){return e.getMaxIndex(t)})))||(0,g.default)(s).create()},shouldAbandonFragment:function(t){return u(o(a.map(function(e){return e.shouldAbandon(t)})))||(0,g.default)(s).create()}}}a.__dashjs_factory_name="ABRRulesCollection";var o=i.default.getClassFactory(a);o.QUALITY_SWITCH_RULES=m,o.ABANDON_FRAGMENT_RULES=y,i.default.updateSingletonFactory(a.__dashjs_factory_name,o),n.default=o,t.exports=n.default},{176:176,180:180,181:181,182:182,183:183,184:184,185:185,48:48}],180:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(176)),i=r(e(48)),a=r(e(46));function b(e){e=e||{};var c=this.context,f=e.mediaPlayerModel,h=e.metricsModel,p=e.dashMetrics,t=void 0,g=void 0,m=void 0,y=void 0,v=void 0;function n(){m={},y={},v=[]}return t={shouldAbandon:function(e){var t=(0,_.default)(c).create(_.default.NO_CHANGE,{name:b.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var n=e.getMediaInfo(),r=e.getMediaType(),i=e.getCurrentRequest();if(!isNaN(i.index)){if(function(e,t){m[e]=m[e]||{},m[e][t]=m[e][t]||{}}(r,i.index),f.getStableBufferTime()<p.getCurrentBufferLevel(h.getReadOnlyMetricsFor(r)))return t;var a=m[r][i.index];if(null===a||null===i.firstByteDate||y.hasOwnProperty(a.id))return t;if(void 0===a.firstByteTime&&(v[r]=[],a.firstByteTime=i.firstByteDate.getTime(),a.segmentDuration=i.duration,a.bytesTotal=i.bytesTotal,a.id=i.index),a.bytesLoaded=i.bytesLoaded,a.elapsedTime=(new Date).getTime()-a.firstByteTime,0<a.bytesLoaded&&0<a.elapsedTime&&function(e,t){v[e]=v[e]||[],v[e].push(t)}(r,Math.round(8*a.bytesLoaded/a.elapsedTime)),5<=v[r].length&&500<a.elapsedTime&&a.bytesLoaded<a.bytesTotal){var o=v[r].reduce(function(e,t){return e+t},0);if(a.measuredBandwidthInKbps=Math.round(o/v[r].length),a.estimatedTimeOfDownload=+(8*a.bytesTotal/a.measuredBandwidthInKbps/1e3).toFixed(2),a.estimatedTimeOfDownload<1.8*a.segmentDuration||0===e.getRepresentationInfo().quality)return t;if(!y.hasOwnProperty(a.id)){var s=e.getAbrController(),u=a.bytesTotal-a.bytesLoaded,l=s.getBitrateList(n),d=s.getQualityForBitrate(n,a.measuredBandwidthInKbps*f.getBandwidthSafetyFactor());a.bytesTotal*l[d].bitrate/l[s.getQualityFor(r,n.streamInfo)].bitrate<u&&(t.quality=d,t.reason.throughput=a.measuredBandwidthInKbps,t.reason.fragmentID=a.id,y[a.id]=a,g.debug("( ",r,"frag id",a.id,") is asking to abandon and switch to quality to ",d," measured bandwidth was",a.measuredBandwidthInKbps),delete m[r][a.id])}}else a.bytesLoaded===a.bytesTotal&&delete m[r][a.id]}return t},reset:n},g=(0,a.default)(c).getInstance().getLogger(t),n(),t}b.__dashjs_factory_name="AbandonRequestsRule",n.default=i.default.getClassFactory(b),t.exports=n.default},{176:176,46:46,48:48}],181:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var p=r(e(102)),O=r(e(176)),i=r(e(48)),g=e(235),m=r(e(47)),y=r(e(53)),v=r(e(46));function a(e){e=e||{};var b=this.context,T=e.dashMetrics,E=e.metricsModel,o=e.mediaPlayerModel,t=(0,m.default)(b).getInstance(),n=void 0,S=void 0,w=void 0;function s(e,t,r){var n=r.reduce(function(e,t,n){return t>r[e]?n:e},0);if(0===n)return null;var i=Math.max(e,10+2*t.length),a=(r[n]-1)/(i/10-1);return{gp:a,Vp:10/a}}function A(e){var t={},n=e.getMediaInfo().bitrateList.map(function(e){return e.bandwidth}),r=function(e){return e.map(function(e){return Math.log(e)})}(n);r=r.map(function(e){return e-r[0]+1});var i=o.getStableBufferTime(),a=s(i,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,C(t)):t.state=0,t}function C(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function R(e,t){var n=o.getStableBufferTime();if(e.stableBufferTime!==n){var r=s(n,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var i=T.getCurrentBufferLevel(E.getReadOnlyMetricsFor(t)),a=i+e.placeholderBuffer;a-=10,a*=r.Vp/e.Vp,a+=10,e.stableBufferTime=n,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,a-i)}}}function I(e,t){return e.Vp*(e.utilities[t]+e.gp)}function M(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,a=t-1;0<=a;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],u=e.Vp*(e.gp+(n*s-o*r)/(n-o));i=Math.max(i,u)}return i}function r(){for(var e in w)w.hasOwnProperty(e)&&2===w[e].state&&(w[e].placeholderBuffer=0)}function i(){for(var e in w)if(w.hasOwnProperty(e)){var t=w[e];0!==t.state&&(t.state=1,C(t))}}function a(){}function u(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=w[e.chunk.mediaInfo.type];if(t&&0!==t.state){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,d(t,e.chunk.mediaInfo.type)}}}function l(e){if(e&&e.metric===p.default.HTTP_REQUEST&&e.value&&e.value.type===g.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=w[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),d(t,e.mediaType))}}function d(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var n=T.getCurrentBufferLevel(E.getReadOnlyMetricsFor(t))+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=I(e,e.lastQuality),i=Math.max(0,r-n);e.placeholderBuffer=Math.min(i,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function c(e){if(e){var t=w[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function f(e){if(e){var t=w[e.mediaType];if(t&&0!==t.state){var n=T.getCurrentBufferLevel(E.getReadOnlyMetricsFor(e.mediaType)),r=void 0;r=0<t.abrQuality?M(t,t.abrQuality):10;var i=Math.max(0,r-n);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function h(){w={}}return n={getMaxIndex:function(e){var t=e.getMediaInfo(),n=e.getMediaType(),r=E.getReadOnlyMetricsFor(n),i=e.getScheduleController(),a=e.getStreamInfo(),o=e.getAbrController(),s=o.getThroughputHistory(),u=a?a.id:null,l=a&&a.manifestInfo&&a.manifestInfo.isDynamic,d=e.useBufferOccupancyABR(),c=(0,O.default)(b).create();if(c.reason=c.reason||{},!d)return c;i.setTimeToLoadDelay(0);var f=function(e){var t=e.getMediaType(),n=w[t];return n?0!==n.state&&R(n,t):(n=A(e),w[t]=n),n}(e);if(0===f.state)return c;var h=T.getCurrentBufferLevel(r),p=s.getAverageThroughput(n,l),g=s.getSafeAverageThroughput(n,l),m=s.getAverageLatency(n),y=void 0;if(c.reason.state=f.state,c.reason.throughput=p,c.reason.latency=m,isNaN(p))return c;switch(f.state){case 1:y=o.getQualityForBitrate(t,g,m),c.quality=y,c.reason.throughput=g,f.placeholderBuffer=Math.max(0,M(f,y)-h),f.lastQuality=y,!isNaN(f.lastSegmentDurationS)&&h>=f.lastSegmentDurationS&&(f.state=2);break;case 2:!function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var r=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,r)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,R(e,t)}(f,n),y=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||i<=o)&&(i=o,r=a)}return r}(f,h+f.placeholderBuffer);var v=o.getQualityForBitrate(t,g,m);y>f.lastQuality&&v<y&&(y=Math.max(v,f.lastQuality));var _=Math.max(0,h+f.placeholderBuffer-I(f,y));_<=f.placeholderBuffer?(f.placeholderBuffer-=_,_=0):(_-=f.placeholderBuffer,f.placeholderBuffer=0,y<o.getTopQualityIndexFor(n,u)?i.setTimeToLoadDelay(1e3*_):_=0),c.quality=y,c.reason.throughput=p,c.reason.latency=m,c.reason.bufferLevel=h,c.reason.placeholderBuffer=f.placeholderBuffer,c.reason.delay=_,f.lastQuality=y;break;default:S.debug("BOLA ABR rule invoked in bad state."),c.quality=o.getQualityForBitrate(t,g,m),c.reason.state=f.state,c.reason.throughput=g,c.reason.latency=m,f.state=1,C(f)}return c},reset:function(){h(),t.off(y.default.BUFFER_EMPTY,r,n),t.off(y.default.PLAYBACK_SEEKING,i,n),t.off(y.default.PERIOD_SWITCH_STARTED,a,n),t.off(y.default.MEDIA_FRAGMENT_LOADED,u,n),t.off(y.default.METRIC_ADDED,l,n),t.off(y.default.QUALITY_CHANGE_REQUESTED,c,n),t.off(y.default.FRAGMENT_LOADING_ABANDONED,f,n)}},S=(0,v.default)(b).getInstance().getLogger(n),h(),t.on(y.default.BUFFER_EMPTY,r,n),t.on(y.default.PLAYBACK_SEEKING,i,n),t.on(y.default.PERIOD_SWITCH_STARTED,a,n),t.on(y.default.MEDIA_FRAGMENT_LOADED,u,n),t.on(y.default.METRIC_ADDED,l,n),t.on(y.default.QUALITY_CHANGE_REQUESTED,c,n),t.on(y.default.FRAGMENT_LOADING_ABANDONED,f,n),n}a.__dashjs_factory_name="BolaRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{102:102,176:176,235:235,46:46,47:47,48:48,53:53}],182:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),l=r(e(176)),a=r(e(46));function o(){var s=this.context,e=void 0,u=void 0;return e={getMaxIndex:function(e){var t=e.getDroppedFramesHistory();if(t){for(var n=t.getFrameHistory(),r=0,i=0,a=l.default.NO_CHANGE,o=1;o<n.length;o++)if(n[o]&&(r=n[o].droppedVideoFrames,375<(i=n[o].totalVideoFrames)&&.15<r/i)){a=o-1,u.debug("index: "+a+" Dropped Frames: "+r+" Total Frames: "+i);break}return(0,l.default)(s).create(a,{droppedFrames:r})}return(0,l.default)(s).create()}},u=(0,a.default)(s).getInstance().getLogger(e),e}o.__dashjs_factory_name="DroppedFramesRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{176:176,46:46,48:48}],183:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(107)),a=r(e(47)),o=r(e(53)),i=r(e(48)),s=r(e(46)),b=r(e(176)),T=r(e(101));function u(e){e=e||{};var h=.5,p=this.context,t=(0,a.default)(p).getInstance(),g=e.metricsModel,m=e.dashMetrics,n=void 0,y=void 0,v=void 0;function r(){v={}}function i(){r()}return n={getMaxIndex:function(e){var t=(0,b.default)(p).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!(g&&g.hasOwnProperty("getReadOnlyMetricsFor")&&m&&m.hasOwnProperty("getCurrentBufferLevel")))throw new Error(T.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaType(),r=g.getReadOnlyMetricsFor(n),i=0<r.BufferState.length?r.BufferState[r.BufferState.length-1]:null,a=e.getRepresentationInfo().fragmentDuration;if(!i||!function(e,t){v[e]=v[e]||{};var n=!1;v[e].firstBufferLoadedEvent?n=!0:t&&t.state===_.default.BUFFER_LOADED&&(v[e].firstBufferLoadedEvent=!0,n=!0);return n}(n,i)||!a)return t;if(i.state===_.default.BUFFER_EMPTY)y.debug("Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var o=e.getMediaInfo(),s=e.getAbrController(),u=s.getThroughputHistory(),l=m.getCurrentBufferLevel(r),d=u.getAverageThroughput(n),c=u.getAverageLatency(n),f=d*(l/a)*h;t.quality=s.getQualityForBitrate(o,f,c),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){r(),t.off(o.default.PLAYBACK_SEEKING,i,n)}},y=(0,s.default)(p).getInstance().getLogger(n),r(),t.on(o.default.PLAYBACK_SEEKING,i,n),n}u.__dashjs_factory_name="InsufficientBufferRule",n.default=i.default.getClassFactory(u),t.exports=n.default},{101:101,107:107,176:176,46:46,47:47,48:48,53:53}],184:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(46)),d=r(e(176));function o(){var u=this.context,e=void 0,l=void 0;return e={getMaxIndex:function(e){for(var t=e?e.getSwitchHistory():null,n=t?t.getSwitchRequests():[],r=0,i=0,a=0,o=(0,d.default)(u).create(),s=0;s<n.length;s++)if(void 0!==n[s]&&(r+=n[s].drops,i+=n[s].noDrops,a+=n[s].dropSize,6<=r+i&&.075<r/i)){o.quality=0<s&&0<n[s].drops?s-1:s,o.reason={index:o.quality,drops:r,noDrops:i,dropSize:a},l.debug("Switch history rule index: "+o.quality+" samples: "+(r+i)+" drops: "+r);break}return o}},l=(0,a.default)(u).getInstance().getLogger(e),e}o.__dashjs_factory_name="SwitchHistoryRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{176:176,46:46,48:48}],185:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(107)),v=r(e(104)),i=r(e(48)),a=r(e(46)),_=r(e(176)),b=r(e(101));function o(e){e=e||{};var p=this.context,g=e.metricsModel,t=void 0,m=void 0;return t={getMaxIndex:function(e){var t=(0,_.default)(p).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return t;!function(){if(!g||!g.hasOwnProperty("getReadOnlyMetricsFor"))throw new Error(b.default.MISSING_CONFIG_ERROR)}();var n=e.getMediaInfo(),r=e.getMediaType(),i=g.getReadOnlyMetricsFor(r),a=e.getScheduleController(),o=e.getAbrController(),s=e.getStreamInfo(),u=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,l=o.getThroughputHistory(),d=l.getSafeAverageThroughput(r,u),c=l.getAverageLatency(r),f=0<i.BufferState.length?i.BufferState[i.BufferState.length-1]:null,h=e.useBufferOccupancyABR();return!i||isNaN(d)||!f||h||o.getAbandonmentStateFor(r)!==v.default.ABANDON_LOAD&&(f.state!==y.default.BUFFER_LOADED&&!u||(t.quality=o.getQualityForBitrate(n,d,c),a.setTimeToLoadDelay(0),m.debug("requesting switch to index: ",t.quality,"type: ",r,"Average throughput",Math.round(d),"kbps"),t.reason={throughput:d,latency:c})),t},reset:function(){}},m=(0,a.default)(p).getInstance().getLogger(t),t}o.__dashjs_factory_name="ThroughputRule",n.default=i.default.getClassFactory(o),t.exports=n.default},{101:101,104:104,107:107,176:176,46:46,48:48}],186:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var f=r(e(101)),i=r(e(48));function a(e){var s=(e=e||{}).dashMetrics,u=e.metricsModel,l=e.mediaPlayerModel,d=e.textController,c=e.abrController;function n(e,t){var n=NaN;if(!e)return n;var r=e.getType(),i=e.getRepresentationInfo();if(r===f.default.FRAGMENTED_TEXT)n=d.isTextEnabled()?i.fragmentDuration:0;else if(r===f.default.AUDIO&&t){var a=s.getCurrentBufferLevel(u.getReadOnlyMetricsFor(f.default.VIDEO));n=isNaN(i.fragmentDuration)?a:Math.max(a,i.fragmentDuration)}else{var o=i.mediaInfo.streamInfo;if(c.isPlayingAtTopQuality(o))n=o.manifestInfo.duration>=l.getLongFormContentDurationThreshold()?l.getBufferTimeAtTopQualityLongForm():l.getBufferTimeAtTopQuality();else n=l.getStableBufferTime()}return n}return{execute:function(e,t){return!e||s.getCurrentBufferLevel(u.getReadOnlyMetricsFor(e.getType()))<n(e,t)},getBufferTarget:n}}a.__dashjs_factory_name="BufferLevelRule",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,48:48}],187:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var v=r(e(101)),i=r(e(46)),a=r(e(48)),_=r(e(217));function o(e){e=e||{};var t=this.context,p=e.adapter,g=e.textController,m=e.playbackController,n=void 0,y=void 0;return n={execute:function(e,t,n){if(!e)return null;var r=e.getRepresentationInfo(),i=e.getType(),a=!isNaN(t),o=e.getBufferController(),s=m.getNormalizedTime(),u=a?t:p.getIndexHandlerTime(e),l=!1,d=void 0;if(isNaN(u)||i===v.default.FRAGMENTED_TEXT&&!g.isTextEnabled())return null;if(o){var c=o.getRangeAt(u),f=o.getRangeAt(s),h=o.getBuffer().hasDiscontinuitiesAfter(s);null===c&&null===f||a||((!c||f&&f.start!=c.start&&f.end!=c.end)&&(h&&i!==v.default.FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(f.end),l=!0),c=f),u!==c.end&&(y.debug("Prior to making a request for time, NextFragmentRequestRule is aligning index handler's currentTime with bufferedRange.end for",i,".",u,"was changed to",c.end),u=c.end))}if(n)u=n.startTime+n.duration/2,d=p.getFragmentRequest(e,r,u,{timeThreshold:0,ignoreIsFinished:!0});else for(d=p.getFragmentRequest(e,r,u,{keepIdx:!a&&!l});d&&d.action!==_.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(d);)d=p.getFragmentRequest(e,r);return d}},y=(0,i.default)(t).getInstance().getLogger(n),n}o.__dashjs_factory_name="NextFragmentRequestRule",n.default=a.default.getClassFactory(o),t.exports=n.default},{101:101,217:217,46:46,48:48}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){var j=0;function G(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function H(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}return{createHTMLCaptionsFromScreen:function(e,t,n,r){var i=null,a=!1,o=-1,s={start:t,end:n,spans:[]},u="style_cea608_white_black",l={},d={},c=[],f=void 0,h=void 0;for(f=0;f<15;++f){var p=r.rows[f],g="",m=null;if(!1===p.isEmpty()){var y=G(p.chars);null===i&&(i={x:y,y1:f,y2:f+1,p:[]}),y!==o&&a&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=f,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i={x:y,y1:f,y2:f+1,p:[]});for(var v=0;v<p.chars.length;++v){var _=p.chars[v],b=_.penState;if(null===m||!b.equals(m)){0<g.trim().length&&(s.spans.push({name:u,line:g,row:f}),g="");var T="style_cea608_"+b.foreground+"_"+b.background;b.underline&&(T+="_underline"),b.italics&&(T+="_italics"),d.hasOwnProperty(T)||(d[T]=JSON.parse(JSON.stringify(b))),m=b,u=T}g+=_.uchar}0<g.trim().length&&s.spans.push({name:u,line:g,row:f}),a=!0,o=y}else a=!1,o=-1,i&&(i.p.push(s),s={start:t,end:n,spans:[]},i.y2=f,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null)}i&&(i.p.push(s),i.y2=f+1,i.name="region_"+i.x+"_"+i.y1+"_"+i.y2,!1===l.hasOwnProperty(i.name)?(c.push(i),l[i.name]=i):l[i.name].p.contat(i.p),i=null);var E,S=[];for(f=0;f<c.length;++f){var w=c[f],A="sub_cea608_"+j++,C=document.createElement("div");C.id=A;var R="left: "+3.125*(E=w).x+"%; top: "+6.66*E.y1+"%; width: "+(100-3.125*E.x)+"%; height: "+6.66*Math.max(E.y2-1-E.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;";C.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+R;var I=document.createElement("div");I.className="paragraph bodyStyle",I.style.cssText=H(e);var M=document.createElement("div");M.className="cueUniWrapper",M.style.cssText="unicode-bidi: normal; direction: ltr;";for(var O=0;O<w.p.length;++O){var D=w.p[O],k=0;for(h=0;h<D.spans.length;++h){var P=D.spans[h];if(0<P.line.length){if(0!==h&&k!=P.row){var L=document.createElement("br");L.className="lineBreak",M.appendChild(L)}var x=!1;k===P.row&&(x=!0),k=P.row;var N=d[P.name],F=document.createElement("span");F.className="spanPadding "+P.name+" customSpanColor",F.style.cssText=H(e,N),0!==h&&x?h===D.spans.length-1?F.textContent=P.line.replace(/\s+$/g,""):F.textContent=P.line:1<D.spans.length&&h<D.spans.length-1&&P.row===D.spans[h+1].row?F.textContent=P.line.replace(/^\s+/g,""):F.textContent=P.line.trim(),M.appendChild(F)}}}I.appendChild(M),C.appendChild(I);var B={bodyStyle:["%",90]};for(var U in d)d.hasOwnProperty(U)&&(B[U]=["%",90]);S.push({type:"html",start:t,end:n,cueHTMLElement:C,cueID:A,cellResolution:[32,15],isFromCEA608:!0,fontSize:B,lineHeight:{},linePadding:{}})}return S}}}o.__dashjs_factory_name="EmbeddedTextHtmlRender",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{48:48}],189:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var y=r(e(101)),v=r(e(47)),_=r(e(53)),i=r(e(48)),b=r(e(203)),T=r(e(97)),E=r(e(191)),S=r(e(215)),w=r(e(50)),A="NotFragmentedTextBufferController";function a(e){e=e||{};var n=this.context,r=(0,v.default)(n).getInstance(),i=(0,E.default)(n).getInstance(),a=e.errHandler,o=e.type,s=e.mimeType,u=e.streamProcessor,l=void 0,t=void 0,d=void 0,c=void 0,f=void 0,h=void 0;function p(e){c=e}function g(e){e.sender.getStreamProcessor()===u&&(h.extract(u.getStreamInfo().id,e.sender.getCurrentRepresentation().id)||r.trigger(_.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender}))}function m(e){e.fragmentModel===u.getFragmentModel()&&e.chunk.bytes&&(h.save(e.chunk),f.append(e.chunk),r.trigger(_.default.STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}return l={getBufferControllerType:function(){return A},initialize:function(e){p(e),h=(0,b.default)(n).getInstance()},createBuffer:function(t){try{if(f=(0,T.default)(n).create(c,t),!d){var e=f.getBuffer();e.hasOwnProperty(y.default.INITIALIZE)&&e.initialize(s,u),d=!0}return f}catch(e){if(t.isText||-1!==t.codec.indexOf('codecs="stpp')||-1!==t.codec.indexOf('codecs="wvtt'))try{f=i.getTextSourceBuffer()}catch(e){a.mediaSourceError("Error creating "+o+" source buffer."),a.error(new S.default(w.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,w.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+o+" : "+e.message))}else a.mediaSourceError("Error creating "+o+" source buffer."),a.error(new S.default(w.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,w.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+o))}},getType:function(){return o},getStreamProcessor:function(){return u},setSeekStartTime:function(){},getBuffer:function(){return f},getBufferLevel:function(){return 0},setMediaSource:p,getMediaSource:function(){return c},getIsBufferingCompleted:function(){return t},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){h.extract(e,t)||r.trigger(_.default.TIMED_TEXT_REQUESTED,{index:0,sender:l})},getRangeAt:function(){return null},reset:function(e){r.off(_.default.DATA_UPDATE_COMPLETED,g,l),r.off(_.default.INIT_FRAGMENT_LOADED,m,l),!e&&f&&(f.abort(),f.reset(),f=null)},updateTimestampOffset:function(e){f.timestampOffset===e||isNaN(e)||(f.timestampOffset=e)}},c=null,t=d=!1,r.on(_.default.DATA_UPDATE_COMPLETED,g,l),r.on(_.default.INIT_FRAGMENT_LOADED,m,l),l}a.__dashjs_factory_name=A,n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,191:191,203:203,215:215,47:47,48:48,50:50,53:53,97:97}],190:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(101)),i=r(e(48)),o=r(e(107)),s=r(e(189));function u(e){e=e||{};var t,n=this.context,r=void 0;function i(){return r.getBuffer()}return t={getBufferControllerType:function(){return r.getBufferControllerType()},initialize:function(e,t){return r.initialize(e,t)},createBuffer:function(e){return r.createBuffer(e)},getType:function(){return r.getType()},getStreamProcessor:function(){r.getStreamProcessor()},setSeekStartTime:function(e){r.setSeekStartTime(e)},getBuffer:i,setBuffer:function(e){r.setBuffer(e)},getBufferLevel:function(){return r.getBufferLevel()},setMediaSource:function(e){r.setMediaSource(e)},getMediaSource:function(){return r.getMediaSource()},getIsBufferingCompleted:function(){return r.getIsBufferingCompleted()},getIsPruningInProgress:function(){return r.getIsPruningInProgress()},dischargePreBuffer:function(){return r.dischargePreBuffer()},switchInitData:function(e,t){r.switchInitData(e,t)},getRangeAt:function(e){return r.getRangeAt(e)},reset:function(e){r.reset(e)},updateTimestampOffset:function(e){var t=i();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)}},r=e.type===a.default.FRAGMENTED_TEXT?(0,o.default)(n).create({type:e.type,metricsModel:e.metricsModel,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor}):(0,s.default)(n).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),t}u.__dashjs_factory_name="TextBufferController",n.default=i.default.getClassFactory(u),t.exports=n.default},{101:101,107:107,189:189,48:48}],191:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var T=r(e(101)),i=r(e(48)),E=r(e(192)),S=r(e(193)),w=r(e(211)),A=r(e(209)),C=r(e(47)),R=r(e(53)),I=e(208);function a(){var e=this.context,t=void 0,h=void 0,n=void 0,r=void 0,i=void 0,p=void 0,a=void 0,g=void 0,m=void 0,o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,y=void 0,f=void 0;function v(e){var n=this,t=e.tracks,r=e.index;t.some(function(e,t){if(e.lang===l)return n.setTextTrack(t),r=t,!0}),c||this.setTextTrack(-1),d=r,u.trigger(R.default.TEXT_TRACKS_ADDED,{enabled:_(),index:r,tracks:t})}function _(){var e=!0;return y&&!f&&(e=!1),e}function b(){y=!1}return t={setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.dashManifestModel&&(r=e.dashManifestModel),e.manifestModel&&(i=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(a=e.videoModel),e.streamController&&(g=e.streamController),e.textTracks&&(m=e.textTracks),e.vttParser&&(o=e.vttParser),e.ttmlParser&&(s=e.ttmlParser),h.setConfig({errHandler:n,dashManifestModel:r,manifestModel:i,mediaController:p,videoModel:a,streamController:g,textTracks:m,vttParser:o,ttmlParser:s}))},getTextSourceBuffer:function(){return h},getAllTracksAreDisabled:function(){return y},addEmbeddedTrack:function(e){h.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return l},setTextDefaultLanguage:function(e){(0,I.checkParameterType)(e,"string"),l=e},setTextDefaultEnabled:function(e){(0,I.checkParameterType)(e,"boolean"),(c=e)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return c},enableText:function(e){(0,I.checkParameterType)(e,"boolean"),_()!==e&&(e&&this.setTextTrack(d),e||(d=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:_,setTextTrack:function(e){var t=h.getConfig(),n=t.fragmentModel,r=t.fragmentedTracks,i=t.videoModel,a=void 0,o=void 0;y=-1===e;var s=m.getCurrentTrackIdx();if(s!==e){m.setModeForTrackIdx(s,T.default.TEXT_HIDDEN),m.setCurrentTrackIdx(e),m.setModeForTrackIdx(e,T.default.TEXT_SHOWING);var u=m.getCurrentTrackInfo();if(u&&u.isFragmented&&!u.isEmbedded)for(var l=0;l<r.length;l++){var d=r[l];if(u.lang===d.lang&&u.index===d.index&&(d.id?u.id===d.id:u.id===d.index))if(d!==p.getCurrentTrackFor(T.default.FRAGMENTED_TEXT,g.getActiveStreamInfo()))n.abortRequests(),n.removeExecutedRequestsBeforeTime(),h.remove(),m.deleteCuesFromTrackIdx(s),p.setTrack(d),h.setCurrentFragmentedTrackIdx(l);else if(-1===s){for(var c=g.getActiveStreamProcessors(),f=0;f<c.length;f++)if(c[f].getType()===T.default.FRAGMENTED_TEXT){o=c[f];break}o.getIndexHandler().setCurrentTime(i.getTime()),o.getScheduleController().start()}}else if(u&&!u.isFragmented){for(c=g.getActiveStreamProcessors(),l=0;l<c.length;l++)if(c[l].getType()===T.default.TEXT){a=(o=c[l]).getMediaInfoArr();break}if(o&&a)for(l=0;l<a.length;l++)if(a[l].index===u.index&&a[l].lang===u.lang){o.selectMediaInfo(a[l]);break}}}},getCurrentTrackIdx:function(){return m.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,I.checkParameterType)(e,"boolean"),f=e},reset:function(){b(),h.resetEmbedded(),h.reset()}},d=-1,f=!(c=!(l="")),m=(0,S.default)(e).getInstance(),o=(0,w.default)(e).getInstance(),s=(0,A.default)(e).getInstance(),h=(0,E.default)(e).getInstance(),u=(0,C.default)(e).getInstance(),m.initialize(),u.on(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,v,t),b(),t}a.__dashjs_factory_name="TextController",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,192:192,193:193,208:208,209:209,211:211,47:47,48:48,53:53}],192:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var ae=r(e(101)),oe=e(235),y=r(e(227)),v=r(e(197)),_=r(e(199)),i=r(e(48)),b=r(e(46)),T=r(e(193)),E=r(e(188)),se=r(e(6)),ue=r(e(2)),S=r(e(47)),w=r(e(53)),le=r(e(215)),de=r(e(50));function a(){var a=this.context,n=(0,S.default)(a).getInstance(),r=!1,o=void 0,B=void 0,U=void 0,j=void 0,s=void 0,G=void 0,u=void 0,H=void 0,i=void 0,l=void 0,d=void 0,q=void 0,V=void 0,K=void 0,Y=void 0,c=void 0,W=void 0,f=void 0,z=void 0,X=void 0,Q=void 0,$=void 0,J=void 0,Z=void 0,ee=void 0,te=void 0,ne=void 0;function e(){Y=NaN,z=V=null,K=!(c=[]),d=[],H=null}function h(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&m(t.bytes,t)}function p(){Q=[],(q=(0,T.default)(a).getInstance()).setConfig({videoModel:W}),q.initialize(),U=(0,v.default)(a).getInstance(),!1,ee=[],Z=[],r=!(J=X=null),te=($=0,E.default)(a).getInstance();var e=f.getActiveStreamProcessors();for(var t in e)if("video"===e[t].getType()){ne=e[t].getRepresentationInfo().MSETimeOffset;break}n.on(w.default.VIDEO_CHUNK_RECEIVED,h,this)}function g(e){X=e}function re(e,t){var n,r,i=new y.default,a={subtitle:"subtitles",caption:"captions"};i.captionData=e,i.lang=t.lang,i.labels=t.labels,i.id=t.id?t.id:t.index,i.index=t.index,i.isTTML=(n=!1,t.codec&&0<=t.codec.search(ae.default.STPP)&&(n=!0),t.mimeType&&0<=t.mimeType.search(ae.default.TTML)&&(n=!0),n),i.defaultTrack=function(e){var t=!1;1<Q.length&&e.isEmbedded?t=e.id&&e.id===ae.default.CC1:1===Q.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===Q.length&&(t=e.index===d[0].index);return t}(t),i.isFragmented=!s.getIsTextTrack(t.mimeType),i.isEmbedded=!!t.isEmbedded,i.kind=r=(r=0<t.roles.length?a[t.roles[0]]:a.caption)===a.caption||r===a.subtitle?r:a.caption,i.roles=t.roles,i.accessibility=t.accessibility;var o=(d?d.length:0)+Q.length;q.addTextTrack(i,o)}function m(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=t.mediaInfo,d=l.type,c=l.mimeType,f=l.codec||c;if(f){if(d===ae.default.FRAGMENTED_TEXT)if(K)if(r=(s=U.getSamplesInfo(e)).sampleList,null===z&&0<r.length&&(z=r[0].cts-t.start*Y),0<=f.search(ae.default.STPP))for(H=null!==H?H:ie(f),i=0;i<r.length;i++){var h=(E=r[i]).cts,p=h-z;this.buffered.add(p/Y,(p+E.duration)/Y);var g=new DataView(e,E.offset,E.subSizes[0]);u=se.default.Utils.dataViewToString(g,ae.default.UTF8);var m=[],y=E.offset+E.subSizes[0];for(a=1;a<E.subSizes.length;a++){var v=new Uint8Array(e,y,E.subSizes[a]),_=String.fromCharCode.apply(null,v);m.push(_),y+=E.subSizes[a]}try{var b=G.getValue().ttmlTimeIsRelative?h/Y:0;n=H.parse(u,b,h/Y,(h+E.duration)/Y,m),q.addCaptions(X,z/Y,n)}catch(e){V.removeExecutedRequestsBeforeTime(),this.remove(),B.error("TTML parser error: "+e.message)}}else{var T=[];for(i=0;i<r.length;i++){var E;(E=r[i]).cts-=z,this.buffered.add(E.cts/Y,(E.cts+E.duration)/Y);var S=e.slice(E.offset,E.offset+E.size),w=se.default.parseBuffer(S);for(a=0;a<w.boxes.length;a++){var A=w.boxes[a];if(B.debug("VTT box1: "+A.type),"vtte"!==A.type&&"vttc"===A.type)for(B.debug("VTT vttc boxes.length = "+A.boxes.length),o=0;o<A.boxes.length;o++){var C=A.boxes[o];if(B.debug("VTT box2: "+C.type),"payl"===C.type){var R=C.cue_text;B.debug("VTT cue_text = "+R);var I=E.cts/Y,M=(E.cts+E.duration)/Y;T.push({start:I,end:M,data:R,styles:{}}),B.debug("VTT "+I+"-"+M+" : "+R)}}}}0<T.length&&q.addCaptions(X,0,T)}else K=!0,Y=U.getMediaTimescaleFromMoov(e);else if(d===ae.default.TEXT){g=new DataView(e,0,e.byteLength);u=se.default.Utils.dataViewToString(g,ae.default.UTF8);try{n=ie(f).parse(u,0),q.addCaptions(q.getCurrentTrackIdx(),0,n)}catch(e){j.timedTextError(e,"parse",u),j.error(new le.default(de.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,de.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,u))}}else if(d===ae.default.VIDEO)if(t.segmentType===oe.HTTPRequest.INIT_SEGMENT_TYPE){if(0===$)for($=U.getMediaTimescaleFromMoov(e),i=0;i<Q.length;i++)re(null,Q[i])}else{if(0===$)return void B.warn("CEA-608: No timescale for embeddedTextTrack yet");var O=function(e,i){return function(e,t,n){var r=null;r=W.getTTMLRenderingDiv()?te.createHTMLCaptionsFromScreen(W.getElement(),e,t,n):[{start:e,end:t,data:n.getDisplayText(),styles:{}}],r&&q.addCaptions(i,0,r)}},D=(s=U.getSamplesInfo(e)).lastSequenceNumber;if(!ee[0]&&!ee[1]){var k=void 0,P=void 0;for(i=0;i<Q.length;i++){if(Q[i].id===ae.default.CC1?(0,P=q.getTrackIdxForId(ae.default.CC1)):Q[i].id===ae.default.CC3&&(1,P=q.getTrackIdxForId(ae.default.CC3)),-1===P)return void B.warn("CEA-608: data before track is ready.");k=O(0,P),ee[i]=new ue.default.Cea608Parser(i+1,{newCue:k},null)}}if($&&-1==Z.indexOf(D)){if(null!==J&&D!==J+s.numSequences)for(i=0;i<ee.length;i++)ee[i]&&ee[i].reset();for(var L=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=ue.default.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var d=ue.default.extractCea608DataFromRange(r,o[l]),c=0;c<2;c++)0<d[c].length&&(a.cts!==s?u=0:u+=1,n.fields[c].push([a.cts+ne*$,d[c],u]),s=a.cts);return n.fields.forEach(function(e){e.sort(function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]})}),n}(e,s.sampleList),x=0;x<ee.length;x++){var N=L.fields[x],F=ee[x];if(F)for(i=0;i<N.length;i++)F.addData(N[i][0]/$,N[i][1])}J=D,Z.push(D)}}}else B.error("No text type defined")}function ie(e){var t=void 0;return 0<=e.search(ae.default.VTT)?t=i:(0<=e.search(ae.default.TTML)||0<=e.search(ae.default.STPP))&&(t=l),t}return o={initialize:function(e,t){r||p(),q.setConfig({videoModel:W}),q.initialize(),U=U||(0,v.default)(a).getInstance(),function(e,t){var n=!s.getIsTextTrack(e);if(t){if(d=d.concat(t.getMediaInfoArr()),n){V=t.getFragmentModel(),o.buffered=(0,_.default)(a).create(),c=u.getTracksFor(ae.default.FRAGMENTED_TEXT,f.getActiveStreamInfo());for(var r=u.getCurrentTrackFor(ae.default.FRAGMENTED_TEXT,f.getActiveStreamInfo()),i=0;i<c.length;i++)if(c[i]===r){g(i);break}}for(i=0;i<d.length;i++)re(null,d[i])}}(e,t)},append:m,abort:function(){q.deleteAllTextTracks(),V=U=null,K=!(d=[]),c=[]},addEmbeddedTrack:function(e){if(r||p(),e)if(e.id===ae.default.CC1||e.id===ae.default.CC3){for(var t=0;t<Q.length;t++)if(Q[t].id===e.id)return;Q.push(e)}else B.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){n.off(w.default.VIDEO_CHUNK_RECEIVED,h,this),q&&q.deleteAllTextTracks(),r=!1,Q=[],ee=[null,null],Z=[],J=null},setConfig:function(e){e&&(e.errHandler&&(j=e.errHandler),e.dashManifestModel&&(s=e.dashManifestModel),e.manifestModel&&(G=e.manifestModel),e.mediaController&&(u=e.mediaController),e.videoModel&&(W=e.videoModel),e.streamController&&(f=e.streamController),e.textTracks&&(q=e.textTracks),e.vttParser&&(i=e.vttParser),e.ttmlParser&&(l=e.ttmlParser))},getConfig:function(){return{fragmentModel:V,fragmentedTracks:c,videoModel:W}},setCurrentFragmentedTrackIdx:g,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){e(),q=W=f=null}},B=(0,b.default)(a).getInstance().getLogger(o),e(),o}a.__dashjs_factory_name="TextSourceBuffer",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,188:188,193:193,197:197,199:199,2:2,215:215,227:227,235:235,46:46,47:47,48:48,50:50,53:53,6:6}],193:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var _=r(e(101)),s=r(e(47)),O=r(e(53)),i=r(e(48)),D=r(e(46)),k=e(41);function a(){var e=this.context,b=(0,s.default)(e).getInstance(),t=void 0,u=void 0,l=void 0,T=void 0,d=void 0,c=void 0,f=void 0,E=void 0,S=void 0,w=void 0,A=void 0,C=void 0,r=void 0,R=void 0,I=void 0,n=void 0,M=void 0;function h(e){var t=d[e].kind,n=void 0!==d[e].id?d[e].id:d[e].lang,r=d[e].lang,i=d[e].isTTML,a=d[e].isEmbedded,o=T.addTextTrack(t,n,r);return o.isEmbedded=a,o.isTTML=i,o}function i(e,t){var n=T.getClientWidth(),r=T.getClientHeight(),i=T.getVideoWidth(),a=T.getVideoHeight(),o=T.getVideoRelativeOffsetTop(),s=T.getVideoRelativeOffsetLeft(),u=i/a,l=!1;e.isFromCEA608&&(u=3.5/3,l=!0);var d=function(e,t,n,r,i,a){var o=0,s=0;n/r<e/t?o=(s=t)/r*n:s=(o=e)/n*r;var u,l,d=0,c=0;return i<o/s?d=(c=s)*i:c=(d=o)/i,u=(e-d)/2,l=(t-c)/2,a?{x:u+.1*d,y:l+.1*c,w:.8*d,h:.8*c}:{x:u,y:l,w:d,h:c}}.call(this,n,r,i,a,u,l),c=d.w,f=d.h,h=d.x,p=d.y;if(c!=w||f!=A||h!=E||p!=S||t){if(E=h+s,S=p+o,w=c,A=f,C){var g=C.style;g.left=E+"px",g.top=S+"px",g.width=w+"px",g.height=A+"px",g.zIndex=R&&document[R]||I?M:null,b.trigger(O.default.CAPTION_CONTAINER_RESIZE,{})}var m=e.activeCues;if(m)for(var y=m.length,v=0;v<y;++v){var _=m[v];_.scaleCue(_)}}}function p(e){var t=w,n=A,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e.cellResolution){var u=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){i=(e.linePadding[r]*u[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),d=0;d<l.length;d++)l[d].style.cssText=l[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),l[d].style.cssText=l[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?a=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.fontSize[r][1]),i=(a*u[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var c=0;c<s.length;c++)s[c].style.cssText=s[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?o=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.lineHeight[r][1]),i=(o*u[1]).toString(),s=document.getElementsByClassName(r);for(var f=0;f<s.length;f++)s[f].style.cssText=s[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var h=document.getElementById(e.cueID);h&&C.removeChild(h),g(e)}}function g(a){if(C){var e=document.createElement("div");C.appendChild(e),n=(0,k.renderHTML)(a.isd,e,function(e){var t=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,n=/^#(.*)$/;if(t.test(e)){var r=t.exec(e),i=parseInt(r[4],10)-1;return"data:image/png;base64,"+btoa(a.images[i])}if(n.test(e)){i=(r=n.exec(e))[1];return"data:image/png;base64,"+a.embeddedImages[i]}return null},C.clientHeight,C.clientWidth,!1,function(e){u.info("renderCaption :",e)},n,!0),e.id=a.cueID,b.trigger(O.default.CAPTION_RENDERED,{captionDiv:e,currentTrackIdx:f})}}function m(e){return 0<=e&&d[e]?T.getTextTrack(d[e].kind,d[e].id,d[e].lang,d[e].isTTML,d[e].isEmbedded):null}function y(e){if(e!==f){var t=m(f=e);(function(e){o.call(this),e&&"html"===e.renderingType?function(){var e=document.getElementById("native-cue-style");if(e)return;(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=T.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){u.info(""+e.message)}}.call(this):a.call(this)}).call(this,t),r&&(clearInterval(r),r=null),t&&"html"===t.renderingType&&(i.call(this,t,!0),r=setInterval(i.bind(this,t),500))}}function v(e){if(e.cues)for(var t=e.cues,n=t.length-1;0<=n;n--)e.removeCue(t[n])}function a(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function o(){if(C)for(;C.firstChild;)C.removeChild(C.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(l=window.VTTCue||window.TextTrackCue,d=[],c=[],I=!(f=-1),M=2147483647,n=r=C=null,void(A=w=S=E=0)!==document.fullscreenElement?R="fullscreenElement":void 0!==document.webkitIsFullScreen?R="webkitIsFullScreen":document.msFullscreenElement?R="msFullscreenElement":document.mozFullScreen&&(R="mozFullScreen"))},displayCConTop:function(e){I=e,C&&!document[R]&&(C.style.zIndex=e?M:null)},addTextTrack:function(e,t){if(d.length!==t){if(d.push(e),d.length===t){d.sort(function(e,t){return e.index-t.index}),C=T.getTTMLRenderingDiv();for(var n=-1,r=0;r<d.length;r++){var i=h.call(this,r);c.push(i),d[r].defaultTrack&&(i.default=!0,n=r);var a=m(r);a&&(a.mode=_.default.TEXT_SHOWING,C&&(d[r].isTTML||d[r].isEmbedded)?a.renderingType="html":a.renderingType="default"),this.addCaptions(r,0,d[r].captionData),b.trigger(O.default.TEXT_TRACK_ADDED)}if(y.call(this,n),0<=n)for(var o=0;o<d.length;o++){var s=m(o);s&&(s.mode=o===n?_.default.TEXT_SHOWING:_.default.TEXT_HIDDEN)}b.trigger(O.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:d})}}else u.error("Trying to add too many tracks.")},addCaptions:function(e,t,n){var r=m(e),i=this;if(r&&n&&0!==n.length)for(var a=0;a<n.length;a++){var o=void 0,s=n[a];r.cellResolution=s.cellResolution,r.isFromCEA608=s.isFromCEA608,"html"===s.type&&C?((o=new l(s.start-t,s.end-t,"")).cueHTMLElement=s.cueHTMLElement,o.isd=s.isd,o.images=s.images,o.embeddedImages=s.embeddedImages,o.cueID=s.cueID,o.scaleCue=p.bind(i),o.cellResolution=s.cellResolution,o.lineHeight=s.lineHeight,o.linePadding=s.linePadding,o.fontSize=s.fontSize,C.style.left=E+"px",C.style.top=S+"px",C.style.width=w+"px",C.style.height=A+"px",o.onenter=function(){r.mode===_.default.TEXT_SHOWING&&(this.isd?(g(this),u.debug("Cue enter id:"+this.cueID)):(C.appendChild(this.cueHTMLElement),p.call(i,this),b.trigger(O.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},o.onexit=function(){if(C)for(var e=C.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(u.debug("Cue exit id:"+e[t].id),C.removeChild(e[t]))}):s.data&&(o=new l(s.start-t,s.end-t,s.data),s.styles&&(void 0!==s.styles.align&&"align"in o&&(o.align=s.styles.align),void 0!==s.styles.line&&"line"in o&&(o.line=s.styles.line),void 0!==s.styles.position&&"position"in o&&(o.position=s.styles.position),void 0!==s.styles.size&&"size"in o&&(o.size=s.styles.size)),o.onenter=function(){r.mode===_.default.TEXT_SHOWING&&b.trigger(O.default.CAPTION_RENDERED,{currentTrackIdx:f})});try{o?r.addCue(o):u.error("impossible to display subtitles.")}catch(e){throw v(r),r.addCue(o),e}}},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:y,getTrackIdxForId:function(e){for(var t=-1,n=0;n<d.length;n++)if(d[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return d[f]},setModeForTrackIdx:function(e,t){var n=m(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e){var t=m(e);t&&v(t)},deleteAllTextTracks:function(){for(var e=c?c.length:0,t=0;t<e;t++){var n=m(t);n&&(v.call(this,n),n.mode="disabled")}c=[],d=[],r&&(clearInterval(r),r=null),f=-1,o.call(this)},deleteTextTrack:function(e){T.removeChild(c[e]),c.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(T=e.videoModel)}},u=(0,D.default)(e).getInstance().getLogger(t),t}a.__dashjs_factory_name="TextTracks",n.default=i.default.getSingletonFactory(a),t.exports=n.default},{101:101,41:41,46:46,47:47,48:48,53:53}],194:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(101)),u=r(e(228)),o=r(e(195)),l=r(e(214)),d=e(77);function s(e){var t,n=this.context,s=void 0;function r(){s&&s.reset()}return t={get:function(e,t){var n=s.getCurrentTrack();if(!n||n.segmentDuration<=0||null==e)return null;var r=Math.floor(e/n.segmentDuration),i=e%n.segmentDuration,a=Math.floor(i*n.tilesHor*n.tilesVert/n.segmentDuration),o=new u.default;return o.width=Math.floor(n.widthPerTile),o.height=Math.floor(n.heightPerTile),o.x=Math.floor(a%n.tilesHor)*n.widthPerTile,o.y=Math.floor(a/n.tilesHor)*n.heightPerTile,"readThumbnail"in n?n.readThumbnail(e,function(e){o.url=e,t&&t(o)}):(o.url=function(e,t){var n=t+e.startNumber,r=(0,d.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=(0,d.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration),r=(0,d.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),(0,d.unescapeDollarsInTemplate)(r)}(n,r),t&&t(o),o)},setTrackByIndex:function(e){s.setTrackByIndex(e)},getCurrentTrackIndex:function(){return s.getCurrentTrackIndex()},getBitrateList:function(){var e=s.getTracks(),n=0;return e.map(function(e){var t=new l.default;return t.mediaType=a.default.IMAGE,t.qualityIndex=n++,t.bitrate=e.bitrate,t.width=e.width,t.height=e.height,t})},reset:r},r(),s=(0,o.default)(n).create({dashManifestModel:e.dashManifestModel,adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter}),t}s.__dashjs_factory_name="ThumbnailController",n.default=i.default.getClassFactory(s),t.exports=n.default},{101:101,195:195,214:214,228:228,48:48,77:77}],195:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var b=r(e(101)),T=r(e(60)),i=r(e(48)),E=r(e(229)),S=r(e(210)),w=e(77),A=r(e(58)),C=r(e(197)),R=r(e(149)),I=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function a(e){var t,n=this.context,u=e.dashManifestModel,i=e.adapter,s=e.baseURLController,a=e.stream,l=e.timelineConverter,r=e.metricsModel,o=e.mediaPlayerModel,d=e.errHandler,c=(0,S.default)(n).getInstance(),f=void 0,h=void 0,p=void 0,g=void 0,m=void 0;function y(){_(),p=(0,R.default)(n).create({}),m=(0,C.default)(n).getInstance(),(g=(0,A.default)(n).getInstance()).setConfig({baseURLController:s,metricsModel:r,mediaPlayerModel:o,errHandler:d}),function(){if(!a||!u||!i)return;var e=a.getStreamInfo();if(!e)return;var t=i.getMediaInfoForType(e,b.default.IMAGE);if(!t)return;var n=i.getDataForMedia(t);if(!n)return;var r=u.getRepresentationsForAdaptation(n);r&&0<r.length&&r.forEach(function(e){e.segmentInfoType===T.default.SEGMENT_TEMPLATE&&0<e.segmentDuration&&e.media&&v(e),e.segmentInfoType===T.default.SEGMENT_BASE&&v(e,!0)});0<f.length&&(f.sort(function(e,t){return e.bitrate-t.bitrate}),h=f.length-1)}()}function v(e,t){var n=new E.default;n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach(function(e){if(0<=I.indexOf(e.schemeIdUri)&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}}),t?g.loadSegments(e,b.default.IMAGE,e.indexRange,{},function(e,r){var o=[];e=function(e,t){var n,r=[],i=0,a=void 0,o=void 0,s=void 0;for(a=0,n=e.length;a<n;a++)o=e[a],s=(0,w.getTimeBasedSegment)(l,u.getIsDynamic(),t,o.startTime,o.duration,o.timescale,o.media,o.mediaRange,i),r.push(s),s=null,i++;return r}(e,r),n.segmentDuration=e[0].duration,n.readThumbnail=function(t,a){var n=null;o.some(function(e){if(e.start<=t&&e.end>t)return n=e.url,!0}),n?a(n):e.some(function(i){if(i.mediaStartTime<=t&&i.mediaStartTime+i.duration>t){var e=s.resolve(r.path);return p.load({method:"get",url:e.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=m.getSamplesInfo(e.target.response),n=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),r=window.URL.createObjectURL(n);o.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:r}),a&&a(r)}}),!0}})}}):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=function(e){var t=c.isRelative(e.media)?c.resolve(e.media,s.resolve(e.path).url):e.media;return t?(0,w.replaceIDForTemplate)(t,e.id):""}(e)),0<n.tilesHor&&0<n.tilesVert&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,f.push(n))}function _(){f=[],h=-1}return t={initialize:y,getTracks:function(){return f},reset:_,setTrackByIndex:function(e){f&&0!==f.length&&(e>=f.length&&(e=f.length-1),h=e)},getCurrentTrack:function(){return h<0?null:f[h]},getCurrentTrackIndex:function(){return h}},y(),t}n.THUMBNAILS_SCHEME_ID_URIS=I,a.__dashjs_factory_name="ThumbnailTracks",n.default=i.default.getClassFactory(a)},{101:101,149:149,197:197,210:210,229:229,48:48,58:58,60:60,77:77}],196:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var l=r(e(50)),d=r(e(47)),c=r(e(53)),f=r(e(106)),h=r(e(213)),p=r(e(212)),i=r(e(48)),g=r(e(215)),m=r(e(101));function a(){var e,t=this.context,i=(0,d.default)(t).getInstance(),n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;function u(){r.reset()}return e={chooseSelectorFromManifest:function(e){!function(){if(!n||!n.hasOwnProperty("getIsDVB"))throw new Error(m.default.MISSING_CONFIG_ERROR)}(),s=n.getIsDVB(e)?o:a},select:function(e){if(e){var t=e.baseUrls,n=e.selectedIdx;if(!isNaN(n))return t[n];var r=s.select(t);return r?(e.selectedIdx=t.indexOf(r),r):(i.trigger(c.default.URL_RESOLUTION_FAILED,{error:new g.default(l.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,l.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(s===a&&u()))}},reset:u,setConfig:function(e){e.selector&&(s=e.selector),e.dashManifestModel&&(n=e.dashManifestModel)}},r=(0,f.default)(t).create({updateEventName:c.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:c.default.SERVICE_LOCATION_BLACKLIST_ADD}),a=(0,p.default)(t).create({blacklistController:r}),o=(0,h.default)(t).create({blacklistController:r}),s=a,e}a.__dashjs_factory_name="BaseURLSelector",n.default=i.default.getClassFactory(a),t.exports=n.default},{101:101,106:106,212:212,213:213,215:215,47:47,48:48,50:50,53:53}],197:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(46)),o=r(e(204)),a=r(e(48)),s=r(e(6)),f=r(e(220));function u(){var a=void 0,e=void 0,r=this.context;function P(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=s.default.parseBuffer(e),n=(0,o.default)(r).create();return n.setData(t),n}return e={parse:P,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new f.default(0,!1);for(var r,i,a,o,s=t instanceof ArrayBuffer?new Uint8Array(t):t,u=void 0,l=0;n<s.byteLength;){var d=(a=s)[(o=n)+3]>>>0|a[o+2]<<8>>>0|a[o+1]<<16>>>0|a[o]<<24>>>0,c=(r=s,i=n+4,String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i++])+String.fromCharCode(r[i]));if(0==d)break;n+d<=s.byteLength&&(0<=e.indexOf(c)?u=new f.default(n,!0,d):l=n+d),n+=d}return u||new f.default(l,!1)},getMediaTimescaleFromMoov:function(e){var t=P(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,r=P(e),i=r.getBoxes("moof"),a=r.getBoxes("mfhd"),o=void 0,s=void 0,u=void 0,l=void 0,d=void 0,c=void 0,f=void 0,h=void 0,p=void 0,g=void 0,m=void 0,y=void 0,v=void 0,_=void 0;n=r.getBoxes("moof").length,t=a[a.length-1].sequence_number,d=[];var b=-1,T=-1;for(g=s=0;g<i.length;g++){var E=i[g],S=E.getChildBoxes("traf");for(h=0;h<S.length;h++){var w=S[h],A=w.getChildBox("tfhd"),C=w.getChildBox("tfdt");l=C.baseMediaDecodeTime;var R=w.getChildBoxes("trun"),I=w.getChildBoxes("subs");for(p=0;p<R.length;p++){var M=R[p];for(s=M.sample_count,v=(A.base_data_offset||0)+(M.data_offset||0),f=0;f<s;f++){o=void 0!==(c=M.samples[f]).sample_duration?c.sample_duration:A.default_sample_duration,u=void 0!==c.sample_size?c.sample_size:A.default_sample_size;var O={dts:l,cts:l+(void 0!==c.sample_composition_time_offset?c.sample_composition_time_offset:0),duration:o,offset:E.offset+v,size:u,subSizes:[u]};if(I)for(m=0;m<I.length;m++){var D=I[m];if(b<D.entry_count-1&&T<f&&(b++,T+=D.entries[b].sample_delta),f==T){O.subSizes=[];var k=D.entries[b];for(y=0;y<k.subsample_count;y++)O.subSizes.push(k.subsamples[y].subsample_size)}}d.push(O),v+=u,l+=o}}_=l-C.baseMediaDecodeTime}}return{sampleList:d,lastSequenceNumber:t,totalDuration:_,numSequences:n}},findInitRange:function(e){var t=null,n=P(e);if(!n)return t;var r=n.getBox("ftyp"),i=n.getBox("moov");return a.debug("Searching for initialization."),i&&i.isComplete&&(t=(r?r.offset:i.offset)+"-"+(i.offset+i.size-1),a.debug("Found the initialization.  Range: "+t)),t}},a=(0,i.default)(r).getInstance().getLogger(e),e}u.__dashjs_factory_name="BoxParser",n.default=a.default.getSingletonFactory(u),t.exports=n.default},{204:204,220:220,46:46,48:48,6:6}],198:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e,t=void 0;return t=!(e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}}),e}o.__dashjs_factory_name="Capabilities",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{48:48}],199:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r},o=e(208);function s(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",n.default=a.default.getClassFactory(s),t.exports=n.default},{208:208,48:48}],200:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),d=r(e(46)),c=r(e(101)),f=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],h="dashjs_?_bitrate",p="dashjs_?_settings",g="localStorage",m="LastBitrate",y="LastMediaSettings";function a(e){e=e||{};var t=this.context,o=e.mediaPlayerModel,n=void 0,s=void 0,r=void 0;function i(e){if(void 0!==r)return r;r=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return s.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==g&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0}catch(e){s.warn("DOMStorage is supported, but cannot be used: "+e.message)}return r}function a(){return 6e5*Math.round((new Date).getTime()/6e5)}function u(e,t){return i(e)&&o["get"+t+"CachingInfo"]().enabled}function l(){if(!o||!o.hasOwnProperty("getLastMediaSettingsCachingInfo"))throw new Error(c.default.MISSING_CONFIG_ERROR)}return n={getSavedBitrateSettings:function(e){var t=NaN;if(l(),u(g,m)){var n=h.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.getLastMediaSettingsCachingInfo().ttl||!1,a=parseFloat(r.bitrate);isNaN(a)||i?i&&localStorage.removeItem(n):(t=a,s.debug("Last saved bitrate for "+e+" was "+a))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(u(g,m)&&t){var n=h.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:a()}))}catch(e){s.error(e.message)}}},getSavedMediaSettings:function(e){if(l(),!u(g,y))return null;var t=null,n=p.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=o.getLastMediaSettingsCachingInfo().ttl||!1;t=r.settings,i&&(localStorage.removeItem(n),t=null)}catch(e){return null}return t},setSavedMediaSettings:function(e,t){if(u(g,y)){var n=p.replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:a()}))}catch(e){s.error(e.message)}}}},s=(0,d.default)(t).getInstance().getLogger(n),i(g)&&f.forEach(function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){s.error(e.message)}}}),n}a.__dashjs_factory_name="DOMStorage";var o=i.default.getSingletonFactory(a);n.default=o,t.exports=n.default},{101:101,46:46,48:48}],201:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var n=void 0,s=new DataView(e.data),u=0;function i(e,t){var n=!0,r=0;if(void 0===t&&(t=!1),r=16777215<e.tag?(s.getUint32(u)!==e.tag&&(n=!1),4):65535<e.tag?(256*s.getUint16(u)+s.getUint8(u+2)!==e.tag&&(n=!1),3):255<e.tag?(s.getUint16(u)!==e.tag&&(n=!1),2):(s.getUint8(u)!==e.tag&&(n=!1),1),!n&&e.required&&!t)throw new Error("required tag not found");return n&&(u+=r),n}function a(e){var t=1,n=128,r=-1,i=0,a=s.getUint8(u),o=0;for(o=0;o<8;o+=1){if((a&n)===n){i=void 0===e?a&~n:a,r=o;break}n>>=1}for(o=0;o<r;o+=1,t+=1)i=i<<8|255&s.getUint8(u+t);return u+=t,i}return n={getPos:function(){return u},setPos:function(e){u=e},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var t;return i(e),t=a(),n[e.parse](t)},skipOverElement:function(e,t){var n=i(e,t),r=void 0;return n&&(r=a(),u+=r),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=s.getFloat32(u),u+=4;break;case 8:t=s.getFloat64(u),u+=8}return t},getMatroskaUint:function(e){for(var t=0,n=0;n<e;n+=1)t<<=8,t|=255&s.getUint8(u+n);return u+=e,t},moreData:function(){return u<s.byteLength}}}o.__dashjs_factory_name="EBMLParser",n.default=a.default.getClassFactory(o),t.exports=n.default},{48:48}],202:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var a=r(e(47)),o=r(e(53)),i=r(e(48));function s(){var e=this.context,i=(0,a.default)(e).getInstance();return{capabilityError:function(e){i.trigger(o.default.ERROR,{error:"capability",event:e})},downloadError:function(e,t,n){i.trigger(o.default.ERROR,{error:"download",event:{id:e,url:t,request:n}})},manifestError:function(e,t,n,r){i.trigger(o.default.ERROR,{error:"manifestError",event:{message:e,id:t,manifest:n,event:r}})},timedTextError:function(e,t,n){i.trigger(o.default.ERROR,{error:"cc",event:{message:e,id:t,cc:n}})},mediaSourceError:function(e){i.trigger(o.default.ERROR,{error:"mediasource",event:e})},mediaKeySessionError:function(e){i.trigger(o.default.ERROR,{error:"key_session",event:e})},mediaKeyMessageError:function(e){i.trigger(o.default.ERROR,{error:"key_message",event:e})},error:function(e){i.trigger(o.default.ERROR,{error:e})}}}s.__dashjs_factory_name="ErrorHandler",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{47:47,48:48,53:53}],203:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){var r={};return{save:function(e){var t=e.streamId,n=e.representationId;r[t]=r[t]||{},r[t][n]=e},extract:function(e,t){return r&&r[e]&&r[e][t]?r[e][t]:null},reset:function(){r={}}}}o.__dashjs_factory_name="InitCache",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{48:48}],204:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(219)),a=r(e(48));function o(){var o=void 0;function t(e){var t=[];if(!e||!o||"function"!=typeof o.fetchAll)return t;for(var n=o.fetchAll(e),r=void 0,i=0,a=n.length;i<a;i++)(r=s(n[i]))&&t.push(r);return t}function s(e){if(!e)return null;var t=new i.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(e){return e&&o&&o.boxes&&0!==o.boxes.length&&"function"==typeof o.fetch?s(o.fetch(e)):null},getBoxes:t,setData:function(e){o=e},getLastBox:function(){if(!o||!o.boxes||!o.boxes.length)return null;var e=t(o.boxes[o.boxes.length-1].type);return 0<e.length?e[e.length-1]:null}}}o.__dashjs_factory_name="IsoFile",n.default=a.default.getClassFactory(o),t.exports=n.default},{219:219,48:48}],205:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(101));function o(e){var r=(e=e||{}).timelineConverter,i=e.streamProcessor;return{getLiveEdge:function(){!function(){if(!(r&&r.hasOwnProperty("getExpectedLiveEdge")&&i&&i.hasOwnProperty("getRepresentationInfo")))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var e=i.getRepresentationInfo(),t=e.DVRWindow?e.DVRWindow.end:0,n=t;return e.useCalculatedLiveEdgeTime&&(n=r.getExpectedLiveEdge(),r.setClientTimeOffset(n-t)),n},reset:function(){i=r=null}}}o.__dashjs_factory_name="LiveEdgeFinder",n.default=i.default.getClassFactory(o),t.exports=n.default},{101:101,48:48}],206:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(7));function o(){return{areEqual:function(e,t){return(0,a.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{48:48,7:7}],207:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}o.__dashjs_factory_name="RequestModifier",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{48:48}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkParameterType=function(e,t){if(typeof e!==t)throw a.default.BAD_ARGUMENT_ERROR},n.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw a.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},n.checkRange=function(e,t,n){if(e<t||n<e)throw a.default.BAD_ARGUMENT_ERROR+" : argument out of range"},n.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==a.default.AUDIO&&e!==a.default.VIDEO)throw a.default.BAD_ARGUMENT_ERROR};var r,i=e(101),a=(r=i)&&r.__esModule?r:{default:r}},{101:101}],209:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(46)),o=r(e(47)),E=r(e(53)),S=e(41);function s(){var e=this.context,_=(0,o.default)(e).getInstance(),t=void 0,b=void 0,T=0;return t={parse:function(e,t,n,r,i){var a="",o=[],s=void 0,u=void 0,l=void 0,d={},c={},f="",h="",p={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void b.warn("smpte-tt imagetype != PNG. Discarded");f=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){f&&(c[f]=h.trim()),f=h=""},onText:function(e){f&&(h+=e)}};if(!e)throw a="no ttml data to parse",new Error(a);d.data=e,_.trigger(E.default.TTML_TO_PARSE,d);var g=(0,S.fromXML)(d.data,function(e){a=e},p);_.trigger(E.default.TTML_PARSED,{ttmlString:d.data,ttmlDoc:g});var m,y=g.getMediaTimeEvents();for(l=0;l<y.length;l++){var v=(0,S.generateISD)(g,y[l],function(e){a=e});v.contents.some(function(e){return e.contents.length})&&(s=y[l]+t<n?n:y[l]+t)<(u=y[l+1]+t>r?r:y[l+1]+t)&&o.push({start:s,end:u,type:"html",cueID:(void 0,m="cue_TTML_"+T,T++,m),isd:v,images:i,embeddedImages:c})}if(""!==a)throw b.error(a),new Error(a);return o}},b=(0,a.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="TTMLParser",n.default=i.default.getSingletonFactory(s),t.exports=n.default},{41:41,46:46,47:47,48:48,53:53}],210:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(){function e(t,e){try{return new window.URL(t,e).toString()}catch(e){return t}}function t(e,t){var n=s;if(!t)return e;if(!d(e))return e;c(e)&&(n=u),f(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)}var n=void 0,r=/^[a-z][a-z0-9+\-.]*:/i,i=/^https?:\/\//i,a=/^https:\/\//i,o=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i;function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(o);return t?t[1]:""}function l(e){var t=e.match(r);return t?t[0]:""}function d(e){return!r.test(e)}function c(e){return d(e)&&"/"===e.charAt(0)}function f(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y");n=e}catch(e){}finally{n=n||t}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:c,isSchemeRelative:f,isHTTPURL:function(e){return i.test(e)},isHTTPS:function(e){return a.test(e)},resolve:function(e,t){return n(e,t)}}}o.__dashjs_factory_name="URLUtils",n.default=a.default.getSingletonFactory(o),t.exports=n.default},{48:48}],211:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(e(48)),a=r(e(46));function o(){var e=this.context,t=void 0,f=void 0,h=void 0,p=void 0,g=void 0,r=void 0;function m(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2==n&&(e+=3600*parseInt(t[0],10)),e}function y(e){var t=e.split(p),n=t[1].split(r);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:function(e){var n={};return e.forEach(function(e){if(1<e.split(/:/).length){var t=e.split(/:/)[1];t&&-1!=t.search(/%/)&&(t=parseInt(t.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(n.align=t),(e.match(/line/)||e.match(/L/))&&(n.line=t),(e.match(/position/)||e.match(/P/))&&(n.position=t),(e.match(/size/)||e.match(/S/))&&(n.size=t)}}),n}(n)}}function v(e,t){for(var n,r=t,i="",a="";""!==e[r]&&r<e.length;)r++;if(1<(n=r-t))for(var o=0;o<n;o++){if((a=e[t+o]).match(p)){i="";break}i+=a,o!==n-1&&(i+="\n")}else(a=e[t]).match(p)||(i=a);return i}return t={parse:function(e){var t,n=[],r=void 0;if(!e)return n;t=(e=e.split(h)).length,r=-1;for(var i=0;i<t;i++){var a=e[i];if(0<a.length&&"WEBVTT"!==a&&a.match(p)){var o=y(a),s=o.cuePoints,u=o.styles,l=v(e,i+1),d=m(s[0].replace(g,"")),c=m(s[1].replace(g,""));!isNaN(d)&&!isNaN(c)&&r<=d&&d<c?""!==l?(r=d,n.push({start:d,end:c,data:l,styles:u})):f.error("Skipping cue due to empty/malformed cue text"):f.error("Skipping cue due to incorrect cue timing")}}return n}},f=(0,a.default)(e).getInstance().getLogger(t),h=/(?:\r\n|\r|\n)/gm,p=/-->/,g=/(^[\s]+|[\s]+$)/g,r=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",n.default=i.default.getSingletonFactory(o),t.exports=n.default},{46:46,48:48}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var r=(e=e||{}).blacklistController;return{select:function(e){var n=0,t=void 0;return e&&e.some(function(e,t){return n=t,!r.contains(e.serviceLocation)})&&(t=e[n]),t}}}o.__dashjs_factory_name="BasicSelector",n.default=a.default.getClassFactory(o),t.exports=n.default},{48:48}],213:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(48),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var n=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],r=0,i=void 0,a=void 0;if((a=e.sort(function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n}).filter(function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})).length)return 1<a.length&&(a.forEach(function(e){t+=e.dvb_weight,n.push(t)}),i=Math.floor(Math.random()*(t-1)),n.every(function(e,t){return r=t,!(i<e)})),a[r]}(function(e){var t=[];return e.filter(function(e){return!n.contains(e.serviceLocation)||(e.dvb_priority&&t.push(e.dvb_priority),!1)}).filter(function(e){return!t.length||!e.dvb_priority||-1===t.indexOf(e.dvb_priority)})}(e))}}}o.__dashjs_factory_name="DVBSelector",n.default=a.default.getClassFactory(o),t.exports=n.default},{48:48}],214:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN},t.exports=n.default},{}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null},t.exports=n.default},{}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null},t.exports=n.default},{}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.action=r.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}r.ACTION_DOWNLOAD="download",r.ACTION_COMPLETE="complete",n.default=r,t.exports=n.default},{}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(217),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,((r=i)&&r.__esModule?r:{default:r}).default),o);function o(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.url=e||null,this.checkForExistenceOnly=!0}n.default=a,t.exports=n.default},{217:217}],219:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),a);function a(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var t=0;t<e.boxes.length;t++)this.boxes.push(new a(e.boxes[t]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(t=0;t<e.references.length;t++){var n={reference_type:e.references[t].reference_type,referenced_size:e.references[t].referenced_size,subsegment_duration:e.references[t].subsegment_duration};this.references.push(n)}}break;case"emsg":this.id=e.id,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=1===e.version?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];t=0;for(var r=e.samples.length;t<r;t++){var i={sample_size:e.samples[t].sample_size,sample_duration:e.samples[t].sample_duration,sample_composition_time_offset:e.samples[t].sample_composition_time_offset};this.samples.push(i)}}}}n.default=i,t.exports=n.default},{}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r},t.exports=n.default},{}],221:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null},t.exports=n.default},{}],222:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(a,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&a&&o}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}n.default=i,t.exports=n.default},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]},t.exports=n.default},{}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null},t.exports=n.default},{}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0},t.exports=n.default},{}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return e&&e.__esModule?e:{default:e}}var i=r(e(101)),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r(e(217)).default),o);function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=a,n=o,r=!0,s=l=void 0}}(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.url=e||null,this.type=t||null,this.mediaType=i.default.STREAM,this.responseType=""}n.default=a,t.exports=n.default},{101:101,217:217}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1},t.exports=n.default},{}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null},t.exports=n.default},{}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""},t.exports=n.default},{}],230:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null},t.exports=n.default},{}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null},t.exports=n.default},{}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=e(107),a=(r=i)&&r.__esModule?r:{default:r};n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY},t.exports=n.default},{107:107}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null},t.exports=n.default},{}],234:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null},t.exports=n.default},{}],235:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null}i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",n.HTTPRequest=i,n.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[]}},{}],236:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});n.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},n.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},n.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},{}],237:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});function i(){r(this,i),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";function a(){r(this,a),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",n.PlayList=i,n.PlayListTrace=a},{}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null},t.exports=n.default},{}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]},t.exports=n.default},{}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null},t.exports=n.default},{}]},{},[4]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsDash=e()}}(function(){return function a(o,s,u){function l(n,e){if(!s[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};o[n][0].call(i.exports,function(e){var t=o[n][1][e];return l(t||e)},i,i.exports,a,o,s,u)}return s[n].exports}for(var d="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){(function(e){"use strict";r.__esModule=!0,r.default=function(e,t){e.dash.mediaPlayer.on(n.default.MediaPlayer.events.PLAYBACK_METADATA_LOADED,function(e,t){var r=e.dash.mediaPlayer,i=r.getTracksFor("audio"),a=e.audioTracks();function n(e){return"dash-audio-"+e}function o(e,t){return e.find(function(e){return n(e.index)===t.id})}a.length&&t.clearTracks(["audio"]);var s=r.getCurrentTrackFor("audio");i.forEach(function(e){var t=e.lang;e.roles&&e.roles.length&&(t+=" ("+e.roles.join(", ")+")"),a.addTrack(new u.default.AudioTrack({enabled:e===s,id:n(e.index),kind:e.kind||"main",label:t,language:e.lang}))}),a.addEventListener("change",function(){for(var e=0;e<a.length;e++){var t=a[e];if(t.enabled){var n=o(i,t);r.setCurrentTrack(n)}else;}})}.bind(null,e,t))};var n=t("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),u=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);function t(e){return e&&e.__esModule?e:{default:e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){(function(e){"use strict";n.__esModule=!0,n.default=function(n,e,t){window.VTTCue&&!/\[native code\]/.test(window.VTTCue.toString())&&(window.VTTCue=!1);var r=[];if(e.featuresNativeTextTracks)return void u.default.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");var i=n.dash.mediaPlayer;function a(){r.forEach(n.removeRemoteTextTrack.bind(n)),r=[]}function o(e){e.index;var t=e.tracks;i.off(s.default.MediaPlayer.events.TEXT_TRACKS_ADDED,o),a(),t.length&&(r=function(o,e,s){var u=[],t=s.map(function(e){return{dashTrack:e,trackConfig:{label:e.lang,language:e.lang,srclang:e.lang}}}).map(function(e){var t=e.trackConfig,n=e.dashTrack,r=o.addRemoteTextTrack(t,!0);return u.push({textTrack:r.track,dashTrack:n}),r});function n(){for(var e=o.dash.mediaPlayer,i=o.textTracks(),a=-1,t=function(e){var t=i[e];if("showing"===t.mode){var n=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}(u,function(e){return e.textTrack===t}),r=n?n.dashTrack:null;r&&(a=s.indexOf(r))}},n=0;n<i.length;n+=1)t(n);a!==e.getCurrentTextTrackIndex()&&e.setTextTrack(a)}return o.textTracks().on("change",n),o.one("loadstart",function(){o.textTracks().off("change",n)}),n(),t}(n,0,t))}i.on(s.default.MediaPlayer.events.TEXT_TRACKS_ADDED,o),i.on(s.default.MediaPlayer.events.CAN_PLAY,function(){i.off(s.default.MediaPlayer.events.TEXT_TRACKS_ADDED,o),n.one("loadstart",a)})};var s=t("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),u=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null);function t(e){return e&&e.__esModule?e:{default:e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,n,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,e,d){(function(e){"use strict";d.__esModule=!0;var t=n(a("global/window")),o=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),r=n("undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null),s=n(a("./setup-audio-tracks")),u=n(a("./setup-text-tracks"));function n(e){return e&&e.__esModule?e:{default:e}}var i=(l.buildDashJSProtData=function(e){var t={};if(!e||!Array.isArray(e))return null;for(var n=0;n<e.length;n++){var r=e[n],i=o.default.mergeOptions({},r.options);i.licenseUrl&&(i.serverURL=i.licenseUrl,delete i.licenseUrl),t[r.name]=i}return t},l.prototype.dispose=function(){this.mediaPlayer_&&(this.mediaPlayer_.off(r.default.MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash},l.prototype.duration=function(){var e=this.el_.duration;return e===Number.MAX_VALUE?1/0:e},l.hooks=function(e,t){return l.hooks_[e]=l.hooks_[e]||[],t&&(l.hooks_[e]=l.hooks_[e].concat(t)),l.hooks_[e]},l.hook=function(e,t){l.hooks(e,t)},l.removeHook=function(e,t){var n=l.hooks(e).indexOf(t);return-1!==n&&(l.hooks_[e]=l.hooks_[e].slice(),l.hooks_[e].splice(n,1),!0)},l);function l(t,e,i){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i=i||e.options_,this.player=(0,o.default)(i.playerId),this.player.dash=this.player.dash||{},this.tech_=e,this.el_=e.el(),this.elParent_=this.el_.parentNode,t.src){e.isReady_=!1,l.updateSourceData&&(o.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=l.updateSourceData(t)),l.hooks("updatesource").forEach(function(e){t=e(t)});var n=t.src;this.keySystemOptions_=l.buildDashJSProtData(t.keySystemOptions),this.player.dash.mediaPlayer=r.default.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,l.useVideoJSDebug&&(o.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),l.useVideoJSDebug(this.mediaPlayer_)),l.beforeInitialize&&(o.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),l.beforeInitialize(this.player,this.mediaPlayer_)),l.hooks("beforeinitialize").forEach(function(e){e(a.player,a.mediaPlayer_)}),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("capability"===e.error&&"mediasource"===e.event)a.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id)if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?a.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?a.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?a.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?a.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?a.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),a.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)a.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)a.player.error({code:5,message:e.event});else{if("download"!==e.error)return;a.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."})}else a.player.error({code:4,message:e.event.message});setTimeout(function(){a.mediaPlayer_.reset()},10)},this.mediaPlayer_.on(r.default.MediaPlayer.events.ERROR,this.retriggerError_),i.dash&&Object.keys(i.dash).forEach(function(e){var t,n="set"+e.charAt(0).toUpperCase()+e.slice(1),r=i.dash[e];a.mediaPlayer_.hasOwnProperty(n)&&(o.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+n+"'"),e=n),a.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(r)||(r=[r]),(t=a.mediaPlayer_)[e].apply(t,r)):o.default.log.warn("Warning: dash configuration option unrecognized: "+e)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),s.default.call(null,this.player,e),u.default.call(null,this.player,e,i),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(n),this.tech_.triggerReady()}}i.hooks_={};o.default.DashSourceHandler=function(){return{canHandleSource:function(e){return function(t){t=JSON.parse(JSON.stringify(t)),i.updateSourceData&&(o.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=i.updateSourceData(t)),i.hooks("updatesource").forEach(function(e){t=e(t)});var e=document.createElement("video");return!(t.keySystemOptions&&!navigator.requestMediaKeySystemAccess&&!e.msSetMediaKeys)}(e)?o.default.DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,t,n){return new i(e,t,n)},canPlayType:function(e){return o.default.DashSourceHandler.canPlayType(e)}}},o.default.DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},t.default.MediaSource&&o.default.getTech("Html5").registerSourceHandler(o.default.DashSourceHandler(),0),o.default.Html5DashJS=i,d.default=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./setup-audio-tracks":1,"./setup-text-tracks":2,"global/window":3}]},{},[4])(4)}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return i={},n.m=r=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(1)),r=l(n(36)),i=l(n(37)),a=n(41),o=l(n(42)),s=l(n(43));function l(e){return e&&e.__esModule?e:{default:e}}var d=void 0,c=!1,f=void 0,h=((0,i.default)(p,null,[{key:"setLogToBrowserConsole",value:function(e){c=0<arguments.length&&void 0!==e&&e}}]),(0,i.default)(p,[{key:"createKeySession",value:function(e,t){if(this.log("createKeySession()"),!this.el_.webkitKeys){if(!WebKitMediaKeys.isTypeSupported(e,"video/mp4"))throw new Error("Key System not supported");this.el_.webkitSetMediaKeys(new WebKitMediaKeys(e))}if(!this.el_.webkitKeys)throw new Error("Could not create MediaKeys");var n=this.el_.webkitKeys.createSession("video/mp4",t);if(!n)throw new Error("Could not create key session");return n}},{key:"fetchCertificate",value:function(e){var t=this,n=e.callback;this.log("fetchCertificate()");var r=this.protection_,i=r.certificateUrl,a=r.certificateRequestHeaders,o=r.certificateRequestCredentials,s=new XMLHttpRequest;s.responseType="arraybuffer",o&&(s.withCredentials=!0),s.addEventListener("error",this.onCertificateError,!1),s.addEventListener("load",function(e){t.onCertificateLoad(e,{callback:n})},!1),s.open("GET",i,!0),a&&(0,u.default)(a).forEach(function(e){s.setRequestHeader(e,a[e])}),s.send()}},{key:"fetchLicense",value:function(e){var t=e.target,n=e.message;this.log("fetchLicense()");var r=this.protection_,i=r.licenseUrl,a=r.licenseRequestHeaders,o=r.licenseRequestCredentials,s=new XMLHttpRequest;s.responseType="arraybuffer",o&&(s.withCredentials=!0),s.session=t,s.addEventListener("error",this.onLicenseError,!1),s.addEventListener("load",this.onLicenseLoad,!1),s.open("POST",i,!0),s.setRequestHeader("Content-type","application/octet-stream"),a&&(0,u.default)(a).forEach(function(e){s.setRequestHeader(e,a[e])}),s.send(n)}},{key:"getErrorResponse",value:function(e){return e?String.fromCharCode.apply(null,new Uint8Array(e)):"NONE"}},{key:"hasProtection",value:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=t.certificateUrl,r=t.keySystem,i=t.licenseUrl;return this.log("hasProtection()"),n&&r&&i}},{key:"log",value:function(){var e;if(c){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.length&&Array.prototype.unshift.call(n,"[FAIRPLAY]"),(e=console).log.apply(e,n)}}},{key:"onCertificateError",value:function(){this.log("onCertificateError()"),this.player_.error({code:0,message:"Failed to retrieve the server certificate."})}},{key:"onCertificateLoad",value:function(e,t){var n=t.callback;this.log("onCertificateLoad()");var r=e.target,i=r.response;200===r.status?(d=new Uint8Array(i),n()):this.onRequestError(e.target,s.default.FETCH_CERTIFICATE)}},{key:"onRequestError",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:s.default.UNKNOWN;this.log("onRequestError()");var r=n+" - DRM: com.apple.fps.1_0 update,\n      XHR status is '"+e.statusText+"("+e.status+")', expected to be 200.\n      readyState is '"+e.readyState+"'.\n      Response is "+this.getErrorResponse(e.response);this.player_.error({code:0,message:r})}},{key:"onKeySessionWebkitKeyAdded",value:function(){this.log("onKeySessionWebkitKeyAdded()"),this.log("Decryption key was added to the session.")}},{key:"onKeySessionWebkitKeyError",value:function(){this.log("onKeySessionWebkitKeyError()"),this.player_.error({code:0,message:"A decryption key error was encountered."})}},{key:"onKeySessionWebkitKeyMessage",value:function(e){this.log("onKeySessionWebkitKeyMessage()");var t=e.message,n=e.target;this.fetchLicense({message:t,target:n})}},{key:"onLicenseError",value:function(){this.log("onLicenseError()"),this.player_.error({code:0,message:"The license request failed."})}},{key:"onLicenseLoad",value:function(e){this.log("onLicenseLoad()");var t=e.target,n=t.response,r=t.session;200===t.status?r.update(new Uint8Array(n)):this.onRequestError(e.target,s.default.FETCH_LICENCE)}},{key:"onVideoError",value:function(){this.log("onVideoError()"),this.player_.error({code:0,message:"A video playback error occurred."})}},{key:"onVideoWebkitNeedKey",value:function(e){this.log("onVideoWebkitNeedKey()");var t=this.protection_.keySystem,n=(0,a.getHostnameFromURI)((0,a.arrayToString)(e.initData)),r=(0,o.default)(e.initData,d),i=this.createKeySession(t,r);i.contentId=n,i.addEventListener("webkitkeyadded",this.onKeySessionWebkitKeyAdded,!1),i.addEventListener("webkitkeyerror",this.onKeySessionWebkitKeyError,!1),i.addEventListener("webkitkeymessage",this.onKeySessionWebkitKeyMessage,!1)}},{key:"src",value:function(e){var t=this,n=e.src;if(this.hasProtection(this.protection_)){if(f&&this.el_.removeEventListener("webkitneedkey",f),f=this.onVideoWebkitNeedKey,this.el_.addEventListener("webkitneedkey",f,!1),d)return this.tech_.src(n),void this.player_.trigger("fairplay-source-changed");this.fetchCertificate({callback:function(){t.tech_.src(n)}})}else this.tech_.src(n)}}]),p);function p(e,t,n){(0,r.default)(this,p),n=n||t.options_,e.src&&(this.el_=t.el(),this.player_=videojs(n.playerId),this.protection_=e&&e.protection,this.tech_=t,this.onCertificateError=this.onCertificateError.bind(this),this.onCertificateLoad=this.onCertificateLoad.bind(this),this.onKeySessionWebkitKeyAdded=this.onKeySessionWebkitKeyAdded.bind(this),this.onKeySessionWebkitKeyError=this.onKeySessionWebkitKeyError.bind(this),this.onKeySessionWebkitKeyMessage=this.onKeySessionWebkitKeyMessage.bind(this),this.onLicenseError=this.onLicenseError.bind(this),this.onLicenseLoad=this.onLicenseLoad.bind(this),this.onVideoError=this.onVideoError.bind(this),this.onVideoWebkitNeedKey=this.onVideoWebkitNeedKey.bind(this),t.isReady_=!1,this.src(e),t.triggerReady())}videojs.fairplaySourceHandler=function(){return{canHandleSource:function(e){if(!window.WebKitMediaKeys)return"";var t=e&&e.protection&&e.protection.keySystem;return WebKitMediaKeys.isTypeSupported(t,"video/mp4")?"probably":""},handleSource:function(e,t,n){return new h(e,t,n)},canPlayType:function(e){return videojs.fairplaySourceHandler.canPlayType(e)}}};var g=!(videojs.fairplaySourceHandler.canPlayType=function(e){return/application\/x-mpegURL/i.test(e)?"maybe":""}),m=window.navigator.userAgent;if((m.match(/iPad/i)||m.match(/iPhone/i))&&(g=!0),window.MediaSource||g)if(videojs=videojs&&videojs.default||videojs,videojs){var y=videojs.getTech&&videojs.getTech("Html5");(y=y||videojs.getComponent&&videojs.getComponent("Html5"))&&y.registerSourceHandler(videojs.fairplaySourceHandler(),0)}else console.warn("videojs-fairplay.js: Couldn't find find window.videojs nor require('video.js')");videojs.Html5Fairplay=h,t.default=h},function(e,t,n){e.exports={default:n(2),__esModule:!0}},function(e,t,n){n(3),e.exports=n(23).Object.keys},function(e,t,n){var r=n(4),i=n(6);n(21)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(7),i=n(20);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var o=n(8),s=n(9),u=n(12)(!1),l=n(16)("IE_PROTO");e.exports=function(e,t){var n,r=s(e),i=0,a=[];for(n in r)n!=l&&o(r,n)&&a.push(n);for(;t.length>i;)o(r,n=t[i++])&&(~u(a,n)||a.push(n));return a}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(10),i=n(5);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(11);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var u=n(9),l=n(13),d=n(15);e.exports=function(s){return function(e,t,n){var r,i=u(e),a=l(i.length),o=d(n,a);if(s&&t!=t){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===t)return s||o||0;return!s&&-1}}},function(e,t,n){var r=n(14),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?r:n)(e)}},function(e,t,n){var r=n(14),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(17)("keys"),i=n(19);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(18),i="__core-js_shared__",a=r[i]||(r[i]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(22),a=n(23),o=n(32);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],r={};r[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",r)}},function(e,t,n){var g=n(18),m=n(23),y=n(24),v=n(26),_="prototype",b=function(e,t,n){var r,i,a,o=e&b.F,s=e&b.G,u=e&b.S,l=e&b.P,d=e&b.B,c=e&b.W,f=s?m:m[t]||(m[t]={}),h=f[_],p=s?g:u?g[t]:(g[t]||{})[_];for(r in s&&(n=t),n)(i=!o&&p&&void 0!==p[r])&&r in f||(a=i?p[r]:n[r],f[r]=s&&"function"!=typeof p[r]?n[r]:d&&i?y(a,g):c&&p[r]==a?function(r){function e(e,t,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,n)}return r.apply(this,arguments)}return e[_]=r[_],e}(a):l&&"function"==typeof a?y(Function.call,a):a,l&&((f.virtual||(f.virtual={}))[r]=a,e&b.R&&h&&!h[r]&&v(h,r,a)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,e.exports=b},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var a=n(25);e.exports=function(r,i,e){if(a(r),void 0===i)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(27),i=n(35);e.exports=n(31)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(28),i=n(30),a=n(34),o=Object.defineProperty;t.f=n(31)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(29);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(31)&&!n(32)(function(){return 7!=Object.defineProperty(n(33)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(29),i=n(18).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var i=n(29);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(38),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}t.default=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},function(e,t,n){e.exports={default:n(39),__esModule:!0}},function(e,t,n){n(40);var r=n(23).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(22);r(r.S+r.F*!n(31),"Object",{defineProperty:n(27).f})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayToString=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.base64DecodeUint8Array=function(e){for(var t=atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r},t.base64EncodeUint8Array=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=0,d="";for(;l<e.length;)n=e[l++],r=l<e.length?e[l++]:Number.NaN,i=l<e.length?e[l++]:Number.NaN,a=n>>2,o=(3&n)<<4|r>>4,s=(15&r)<<2|i>>6,u=63&i,isNaN(r)?s=u=64:isNaN(i)&&(u=64),d+=t.charAt(a)+t.charAt(o)+t.charAt(s)+t.charAt(u);return d},t.removeProtocol=function(e){return e.replace(/^.*:\/\//,"")},t.getHostnameFromURI=function(e){var t=document.createElement("a");return t.href=e,t.hostname},t.stringToArray=function(e){for(var t=e.length,n=new ArrayBuffer(2*t),r=new Uint16Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,l.removeProtocol)((0,l.arrayToString)(e));"string"==typeof n&&(n=(0,l.stringToArray)(n));var r=e.byteLength+4+n.byteLength+4+t.byteLength,i=0,a=new ArrayBuffer(r),o=new DataView(a),s=new Uint8Array(a,i,e.byteLength);s.set(e),i+=s.byteLength,o.setUint32(i,n.byteLength,!0),i+=4;var u=new Uint16Array(a,i,n.length);return u.set(n),i+=u.byteLength,o.setUint32(i,t.byteLength,!0),i+=4,new Uint8Array(a,i,t.byteLength).set(t),new Uint8Array(a,0,a.byteLength)};var l=n(41)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={FETCH_CERTIFICATE:"FETCH CERTIFICATE",FETCH_LICENCE:"FETCH LICENCE",UNKNOWN:"UNKNOWN"}}],n.c=i,n.p="",n(0);function n(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return r[e].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var r,i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["video.js","global/window","global/document"],t):(e=e||self).videojsContribAds=t(e.videojs,e.window,e.document)}(this,function(h,l,o){"use strict";h=h&&h.hasOwnProperty("default")?h.default:h,l=l&&l.hasOwnProperty("default")?l.default:l,o=o&&o.hasOwnProperty("default")?o.default:o;function r(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}}function n(e,t,n){r(0,n),e.trigger({type:t+n.type,originalEvent:n})}function a(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&n(e,"content",t):n(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(r(0,t),e.trigger("resumeended")):n(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(n(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())n(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;n(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?n(e,"ad",t):e.ads.isContentResuming()&&n(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?n(this,"content",e):n(this,"ad",e))}function d(e,t){return t?encodeURIComponent(e):e}function c(e,t,n){if(e&&e[n])for(var r=e[n],i=Object.keys(r),a=0;a<i.length;a++){t["{mediainfo."+n+"."+i[a]+"}"]=r[i[a]]}}var s={processMetadataTracks:function(t,n){for(var e=t.textTracks(),r=function(e){"metadata"===e.kind&&(t.ads.cueTextTracks.setMetadataTrackMode(e),n(t,e))},i=0;i<e.length;i++)r(e[i]);e.addEventListener("addtrack",function(e){r(e.track)})},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}};function u(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}s.processAdTrack=function(e,t,n,r){e.ads.includedCues={};for(var i=0;i<t.length;i++){var a=t[i],o=this.getSupportedAdCue(e,a);if(!this.isSupportedAdCue(e,a))return void h.log.warn("Skipping as this is not a supported ad cue.",a);var s=this.getCueId(e,a),u=a.startTime;if(c=e,void 0!==(f=s)&&c.ads.includedCues[f])return void h.log("Skipping ad already seen with ID "+s);r&&r(e,o,s,u),n(e,o,s,u),l=e,void 0!==(d=s)&&""!==d&&(l.ads.includedCues[d]=!0)}var l,d,c,f};var e={},t=h;e.isMiddlewareMediatorSupported=function(){return!t.browser.IS_IOS&&!t.browser.IS_ANDROID&&!!(t.use&&t.middleware&&t.middleware.TERMINATOR)},e.playMiddleware=function(n){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(n.ads&&!0===n.ads._shouldBlockPlay)return n.ads.debug("Using playMiddleware to block content playback"),n.ads._playBlocked=!0,t.middleware.TERMINATOR},play:function(e,t){n.ads&&n.ads._playBlocked&&e?(n.ads.debug("Play call to Tech was terminated."),n.trigger("play"),n.addClass("vjs-has-started"),n.ads._playBlocked=!1):t&&t.catch&&t.catch(function(e){"NotAllowedError"!==e.name||h.browser.IS_SAFARI||n.trigger("pause")})}}},e.testHook=function(e){t=e};var i=e.playMiddleware,f=e.isMiddlewareMediatorSupported;var p=function(){function n(){}return n.getState=function(e){if(e)return n.states_&&n.states_[e]?n.states_[e]:void 0},n.registerState=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal state name, "'+e+'"; must be a non-empty string.');return n.states_||(n.states_={}),n.states_[e]=t},n}(),g=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var r=arguments.length,i=new Array(1<r?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];n.init.apply(n,[t].concat(i))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){h.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){h.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){h.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){h.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){h.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function m(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}p.registerState("State",g);var y=function(n){function e(e){var t;return(t=n.call(this,e)||this).contentResuming=!1,t.waitingForAdBreak=!1,t}m(e,n);var t=e.prototype;return t.isAdState=function(){return!0},t.onPlaying=function(){var e=p.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},t.onContentResumed=function(){var e=p.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},t.isWaitingForAdBreak=function(){return this.waitingForAdBreak},t.isContentResuming=function(){return this.contentResuming},t.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},e}(g);p.registerState("AdState",y);var v=function(e){function t(){return e.apply(this,arguments)||this}m(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=p.getState("BeforePreroll"),n=p.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(g);p.registerState("ContentState",v);var _,b=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){h.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(p.getState("ContentState"));p.registerState("AdsDone",b);var T={start:function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=h.browser.IS_IOS&&e.ads.isLive(e)&&0<e.seekable().length?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),r=e.textTracks?e.textTracks():[],i=[],a={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(a.style=n.getAttribute("style"));for(var o=0;o<r.length;o++){var s=r[o];i.push({track:s,mode:s.mode}),s.mode="disabled"}return a.suppressedTracks=i,a}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},end:function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(r,e){var i=r.ads.snapshot;if(void 0===e&&(e=function(){}),!0===r.ads.disableNextSnapshotRestore)return r.ads.disableNextSnapshotRestore=!1,delete r.ads.snapshot,e();function t(){for(var e=0;e<l.length;e++)(o=l[e]).track.mode=o.mode}function n(){var e;if(h.browser.IS_IOS&&r.ads.isLive(r)){if(i.currentTime<0&&(e=0<r.seekable().length?r.seekable().end(0)+i.currentTime:r.currentTime(),r.currentTime(e)),r.paused()){var t=r.play();t&&t.catch&&t.catch(function(e){h.log.warn("Play promise rejected in IOS snapshot resume",e)})}}else if(i.ended)r.currentTime(r.duration());else{r.currentTime(i.currentTime);var n=r.play();n&&n.catch&&n.catch(function(e){h.log.warn("Play promise rejected in snapshot resume",e)})}r.ads.shouldRemoveAutoplay_&&(r.autoplay(!1),r.ads.shouldRemoveAutoplay_=!1)}function a(){if(r.off("contentcanplay",a),_&&r.clearTimeout(_),1<(s=r.el().querySelector(".vjs-tech")).readyState)return n();if(void 0===s.seekable)return n();if(0<s.seekable.length)return n();if(u--)r.setTimeout(a,50);else try{n()}catch(e){h.log.warn("Failed to resume the content after an advertisement",e)}}var o,s=r.$(".vjs-tech"),u=20,l=i.suppressedTracks;if("style"in i&&s.setAttribute("style",i.style||""),r.ads.videoElementRecycled())r.one("resumeended",function(){delete r.ads.snapshot,e()}),r.one("contentloadedmetadata",t),h.browser.IS_IOS&&!r.autoplay()&&(r.autoplay(!0),r.ads.shouldRemoveAutoplay_=!0),r.src(i.sources),r.one("contentcanplay",a),_=r.setTimeout(a,2e3);else{if(t(),!r.ended()){var d=r.play();d&&d.catch&&d.catch(function(e){h.log.warn("Play promise rejected in snapshot restore",e)})}delete r.ads.snapshot,e()}}(e,t):(e.volume(e.ads.preAdVolume_),t())}},E=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var r=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(r=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout(function(){e.trigger("adtimeout")},r),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?h.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",function(){t.ads.debug("Received loadstart event"),e()}))},n.noPreroll=function(){var e=this;this.afterLoadStart(function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)})},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart(function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")})},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},n.onAdsError=function(e){var t=this;h.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart(function(){t.resumeAfterNoPreroll(e)})},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?h.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,T.start(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,T.end(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?h.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart(function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)})},n.onAdTimeout=function(e){var t=this;this.afterLoadStart(function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)})},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?h.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.paused()&&(e.ads._playRequested||e.ads._pausedOnContentupdate)){var t=e.play();t&&t.then&&t.then(null,function(e){})}},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||h.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(p.getState("AdState"));p.registerState("Preroll",E);var S=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!0},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=p.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(p.getState("ContentState"));p.registerState("BeforePreroll",S);var w=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",T.start(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),T.end(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(p.getState("AdState"));p.registerState("Midroll",w);var A=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=p.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout(function(){e.trigger("adtimeout")},n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?h.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,T.start(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=p.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),T.end(t,function(){e.transitionTo(n)}))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?h.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=p.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=p.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?h.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=p.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(p.getState("AdState"));p.registerState("Postroll",A);var C=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=p.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=p.getState("Midroll");this.transitionTo(e)},t}(p.getState("ContentState"));p.registerState("ContentPlayback",C);var R=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=p.getState("StitchedAdRoll");this.transitionTo(e)},t}(p.getState("ContentState"));p.registerState("StitchedContentPlayback",R);var I=function(e){function t(){return e.apply(this,arguments)||this}m(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",T.start(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=p.getState("StitchedContentPlayback");T.end(this.player),this.transitionTo(e)},t}(p.getState("AdState"));p.registerState("StitchedAdRoll",I);function M(e){var r=this,t=h.mergeOptions(P,e),n=[];function i(){var e=r.textTracks();if(!r.ads.shouldPlayContentBehindAd(r)&&r.ads.inAdBreak()&&r.tech_.featuresNativeTextTracks&&h.browser.IS_IOS&&!Array.isArray(r.textTracks()))for(var t=0;t<e.length;t++){var n=e[t];"showing"===n.mode&&(n.mode="disabled")}}k.concat(["firstplay","loadedalldata"]).forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),r.on(n,a),D()||function(e,t){t&&h.log("Using cancelContentPlay to block content playback"),e.on("play",u)}(r,t.debug),r.setTimeout(function(){r.ads._hasThereBeenALoadStartDuringPlayerLife||""===r.src()||h.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")},5e3),r.on("ended",function(){r.hasClass("vjs-has-started")||r.addClass("vjs-has-started")}),r.on("contenttimeupdate",function(){r.removeClass("vjs-waiting")}),r.on(["addurationchange","adcanplay"],function(){if(!r.ads.settings.stitchedAds&&!r.hasStarted()&&(!r.ads.snapshot||r.currentSrc()!==r.ads.snapshot.currentSrc)&&r.ads.inAdBreak()){var e=r.play();e&&e.catch&&e.catch(function(e){h.log.warn("Play promise rejected when playing ad",e)})}}),r.on("nopreroll",function(){r.ads.debug("Received nopreroll event"),r.ads.nopreroll_=!0}),r.on("nopostroll",function(){r.ads.debug("Received nopostroll event"),r.ads.nopostroll_=!0}),r.on("playing",function(){r.ads._cancelledPlay=!1,r.ads._pausedOnContentupdate=!1}),r.on("play",function(){r.ads._playRequested=!0}),r.one("loadstart",function(){r.ads._hasThereBeenALoadStartDuringPlayerLife=!0}),r.on("loadeddata",function(){r.ads._hasThereBeenALoadedData=!0}),r.on("loadedmetadata",function(){r.ads._hasThereBeenALoadedMetaData=!0}),r.ads=function(n){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:"6.6.5",reset:function(){n.ads.disableNextSnapshotRestore=!1,n.ads._contentEnding=!1,n.ads._contentHasEnded=!1,n.ads.snapshot=null,n.ads.adType=null,n.ads._hasThereBeenALoadedData=!1,n.ads._hasThereBeenALoadedMetaData=!1,n.ads._cancelledPlay=!1,n.ads._shouldBlockPlay=!1,n.ads._playBlocked=!1,n.ads.nopreroll_=!1,n.ads.nopostroll_=!1,n.ads._playRequested=!1},startLinearAdMode:function(){n.ads._state.startLinearAdMode()},endLinearAdMode:function(){n.ads._state.endLinearAdMode()},skipLinearAdMode:function(){n.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(h.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(n.ads.shouldPlayContentBehindAd(n))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var e=n.tech_.src()!==this.snapshot.src,t=n.currentSrc()!==this.snapshot.currentSrc;return e||t},isLive:function(e){return void 0===e&&(e=n),"boolean"==typeof e.ads.settings.contentIsLive?e.ads.settings.contentIsLive:e.duration()===1/0||"8"===h.browser.IOS_VERSION&&0===e.duration()},shouldPlayContentBehindAd:function(e){if(void 0===e&&(e=n),e)return!!e.ads.settings.liveCuePoints&&(!h.browser.IS_IOS&&!h.browser.IS_ANDROID&&e.duration()===1/0);throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(e){return void 0===e&&(e=n),!this.shouldPlayContentBehindAd(e)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var e=n.$(".vjs-tech");e&&e.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?h.log("ADS: "+t[0]):h.log.apply(h,["ADS:"].concat(t))}}}}(r),(r.ads.settings=t).stitchedAds=!!t.stitchedAds,t.stitchedAds?r.ads._state=new(p.getState("StitchedContentPlayback"))(r):r.ads._state=new(p.getState("BeforePreroll"))(r),r.ads._state.init(r),r.ads.cueTextTracks=s,r.ads.adMacroReplacement=function(e,s,t){var n=this,u={};e=e.replace(/{([^}=]+)=([^}]+)}/g,function(e,t,n){return u["{"+t+"}"]=n,"{"+t+"}"}),void 0===s&&(s=!1);var r={};for(var i in void 0!==t&&(r=t),r["{player.id}"]=this.options_["data-player"],r["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",r["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",r["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",r["{player.duration}"]=this.duration(),r["{timestamp}"]=(new Date).getTime(),r["{document.referrer}"]=o.referrer,r["{window.location.href}"]=l.location.href,r["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach(function(e){n.mediainfo&&n.mediainfo[e]?r["{mediainfo."+e+"}"]=n.mediainfo[e]:u["{mediainfo."+e+"}"]?r["{mediainfo."+e+"}"]=u["{mediainfo."+e+"}"]:r["{mediainfo."+e+"}"]=""}),c(this.mediainfo,r,"custom_fields"),c(this.mediainfo,r,"customFields"),r)e=e.split(i).join(d(r[i],s));for(var a in e=e.replace(/{pageVariable\.([^}]+)}/g,function(e,t){for(var n,r=l,i=t.split("."),a=0;a<i.length;a++)a===i.length-1?n=r[i[a]]:r=r[i[a]];var o=typeof n;return null===n?"null":void 0===n?u["{pageVariable."+t+"}"]?u["{pageVariable."+t+"}"]:(h.log.warn('Page variable "'+t+'" not found'),""):"string"!=o&&"number"!=o&&"boolean"!=o?(h.log.warn('Page variable "'+t+'" is not a supported type'),""):d(String(n),s)}),u)e=e.replace(a,u[a]);return e}.bind(r),function(t){t.ads.contentSrc=t.currentSrc(),t.ads._seenInitialLoadstart=!1,t.on("loadstart",function(){if(!t.ads.inAdBreak()){var e=t.currentSrc();e!==t.ads.contentSrc&&(t.ads._seenInitialLoadstart&&t.trigger({type:"contentchanged"}),t.trigger({type:"contentupdate",oldValue:t.ads.contentSrc,newValue:e}),t.ads.contentSrc=e),t.ads._seenInitialLoadstart=!0}})}(r),r.on("contentchanged",r.ads.reset),r.ready(function(){r.textTracks().addEventListener("change",i)}),r.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],function(e){r.ads._state.handleEvent(e.type)}),r.on("dispose",function(){r.ads.reset(),r.textTracks().removeEventListener("change",i)})}var O,D=e.isMiddlewareMediatorSupported,k=h.getTech("Html5").Events,P={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0};return M.VERSION="6.6.5",O=M,function(){if(h.getPlugin)return Boolean(h.getPlugin("ads"));var e=h.getComponent("Player");return Boolean(e&&e.prototype.ads)}()||((h.registerPlugin||h.plugin)("ads",O),f()&&!h.usingContribAdsMiddleware_&&(h.use("*",i),h.usingContribAdsMiddleware_=!0,h.log.debug("Play middleware has been registered with videojs"))),M}),function(){!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("video.js"));else{var n=t("object"==typeof exports?require("video.js"):e.videojs);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,function(Xbh){return $bh={},Zbh.m=Ybh=[function(ich,jch,kch){"undefined"!=typeof self&&self,ich.exports=function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=18)}([function(n,e,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(e,t(6))},function(e,t){function u(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function n(e,t){var n=S(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&f(e)}(e)&&y.call(e,"callee")&&(!_.call(e,"callee")||v.call(e)==o)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!y.call(e,a)||i&&("length"==a||d(a,r))||n.push(a);return n}function l(e,t,n){var r=e[t];y.call(e,t)&&c(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function d(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||g.test(e))&&-1<e&&e%1==0&&e<t}function r(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||m)}function c(e,t){return e===t||e!=e&&t!=t}function f(e){return null!=e&&function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=a}(e.length)&&!function(e){var t=h(e)?v.call(e):"";return t==s||t==p}(e)}function h(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){return f(e)?n(e):function(e){if(!r(e))return b(e);var t=[];for(var n in Object(e))y.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}var a=9007199254740991,o="[object Arguments]",s="[object Function]",p="[object GeneratorFunction]",g=/^(?:0|[1-9]\d*)$/,m=Object.prototype,y=m.hasOwnProperty,v=m.toString,_=m.propertyIsEnumerable,b=function(t,n){return function(e){return t(n(e))}}(Object.keys,Object),T=Math.max,E=!_.call({valueOf:1},"valueOf"),S=Array.isArray,w=function(s){return function(a,o){return o=T(void 0===o?a.length-1:o,0),function(){for(var e=arguments,t=-1,n=T(e.length-o,0),r=Array(n);++t<n;)r[t]=e[o+t];t=-1;for(var i=Array(o+1);++t<o;)i[t]=e[t];return i[o]=r,u(a,this,i)}}(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:void 0,a=2<r?t[2]:void 0;for(i=3<s.length&&"function"==typeof i?(r--,i):void 0,a&&function(e,t,n){if(!h(n))return!1;var r=typeof t;return!!("number"==r?f(n)&&d(t,n.length):"string"==r&&t in n)&&c(n[t],e)}(t[0],t[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var o=t[n];o&&s(e,o)}return e})}(function(e,t){if(E||r(t)||f(t))!function(e,t,n,r){n=n||{};for(var i=-1,a=t.length;++i<a;){var o=t[i],s=r?r(n[o],e[o],o,n,e):void 0;l(n,o,void 0===s?e[o]:s)}}(t,i(t),e);else for(var n in t)y.call(t,n)&&l(e,n,t[n])});e.exports=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n=void 0===n?1:n,e[t]=e[t]||0,e[t]+=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a={now:function(){var e=i.default.performance,t=e&&e.timing;return t&&"number"==typeof t.navigationStart&&"function"==typeof e.now?t.navigationStart+e.now():Date.now()}};t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=i.default.methodFactory;i.default.methodFactory=function(e,t,n){var r=a(e,t,n);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);r.apply(void 0,e)}},i.default.setLevel(i.default.getLevel()),t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if("string"!=typeof e||""===e)return["localhost"];var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[],n=t[4],r=void 0;return n&&(r=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,r]};t.extractHostnameAndDomain=r,t.extractHostname=function(e){return r(e)[0]},t.extractDomain=function(e){return r(e)[1]}},function(ofh,pfh){var qfh;qfh=function(){return this}();try{qfh=qfh||Function("return this")()||eval("this")}catch(ofh){"object"==typeof window&&(qfh=window)}ofh.exports=qfh},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},t.generateShortID=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=(e=e||"").match(/[^\r\n]+/g)||[];for(var t={},n=0;n<e.length;n++){var r=e[n].split(/\s*:\s*(.+)/);3===r.length&&(t[r[0]]=r[1])}return t}},function(e,t,n){"use strict";var s=Object.prototype.hasOwnProperty,u=Array.isArray,l=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),d=function(e){for(;1<e.length;){var t=e.pop(),n=t.obj[t.prop];if(u(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}},c=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:c,assign:function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var u=o[s],l=a[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:u}),n.push(l))}return d(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r=e;if("symbol"==typeof e?r=Symbol.prototype.toString.call(e):"string"!=typeof e&&(r=String(e)),"iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",a=0;a<r.length;++a){var o=r.charCodeAt(a);45===o||46===o||95===o||126===o||48<=o&&o<=57||65<=o&&o<=90||97<=o&&o<=122?i+=r.charAt(a):o<128?i+=l[o]:o<2048?i+=l[192|o>>6]+l[128|63&o]:o<55296||57344<=o?i+=l[224|o>>12]+l[128|o>>6&63]+l[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&r.charCodeAt(a)),i+=l[240|o>>18]+l[128|o>>12&63]+l[128|o>>6&63]+l[128|63&o])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function r(i,a,o){if(!a)return i;if("object"!=typeof a){if(u(i))i.push(a);else{if(!i||"object"!=typeof i)return[i,a];(o&&(o.plainObjects||o.allowPrototypes)||!s.call(Object.prototype,a))&&(i[a]=!0)}return i}if(!i||"object"!=typeof i)return[i].concat(a);var e=i;return u(i)&&!u(a)&&(e=c(i,o)),u(i)&&u(a)?(a.forEach(function(e,t){if(s.call(i,t)){var n=i[t];n&&"object"==typeof n&&e&&"object"==typeof e?i[t]=r(n,e,o):i.push(e)}else i[t]=e}),i):Object.keys(a).reduce(function(e,t){var n=a[t];return s.call(e,t)?e[t]=r(e[t],n,o):e[t]=n,e},e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaElement=t.getMuxPlayerId=void 0;var r=n(7),i=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||(0,r.generateShortID)()),e.muxId):e};t.getMuxPlayerId=i,t.findMediaElement=function(e){var t=void 0;return e&&void 0!==e.nodeName?e=i(t=e):t=document.querySelector(e),[t,e,t&&t.nodeName?t.nodeName.toLowerCase():""]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"1"===(i.default.doNotTrack||i.default.navigator&&(i.default.navigator.doNotTrack||i.default.navigator.msDoNotTrack))};var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a={exists:function(){var e=i.default.performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=i.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=i.default.performance,t=e&&e.timing;return t&&t.navigationStart}};t.default=a},function(i,e,a){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},r=a(23);"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=r),i.exports=t}).call(e,a(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r=n(42),i=n(43),a=n(16);e.exports={formats:a,parse:i,stringify:r}},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g,a=n(9),o={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=a.assign({default:o.RFC3986,formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return String(e)}}},o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(a){var o={},s={};return Object.keys(a).forEach(function(t){var n=!1;if(a.hasOwnProperty(t)&&void 0!==a[t]){var e=t.split("_"),r=e[0],i=d[r];i||(u.default.info("Data key word `"+e[0]+"` not expected in "+t),i=r+"_"),e.splice(1).forEach(function(e){"url"===e&&(n=!0),c[e]?i+=c[e]:(u.default.info("Data key word `"+e+"` not expected in "+t),i+="_"+e+"_")}),n?s[i]=a[t]:o[i]=a[t]}}),(0,l.default)(o,s)};var a=n(4),u=r(a),o=n(1),l=r(o),d=i({a:"env",b:"beacon",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),c=i({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",po:"poster",pr:"preload",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"})},function(e,t,n){"use strict";e.exports=n(19).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),o=r(a),s=n(10),u=n(4),l=r(u),d=n(11),c=r(d),f=n(3),h=r(f),p=n(21),g=r(p),m=n(50),y=r(m),v=n(51),_=r(v),b={},T=function e(t){var n=arguments;"string"==typeof t?e.hasOwnProperty(t)?o.default.setTimeout(function(){n=Array.prototype.splice.call(n,1),e[t].apply(null,n)},0):l.default.warn("`"+t+"` is an unknown task"):"function"==typeof t?o.default.setTimeout(function(){t(e)},0):l.default.warn("`"+t+"` is invalid.")};T.loaded=h.default.now(),T.VERSION="3.0.0",T.API_VERSION="2.1",T.PLAYER_TRACKED=!1,T.monitor=function(e,t){return(0,y.default)(T,e,t)},T.destroyMonitor=function(e){var t=(0,s.findMediaElement)(e),n=i(t,1),r=n[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():l.default.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},T.addHLSJS=function(e,t){var n=(0,s.getMuxPlayerId)(e);b[n]?b[n].addHLSJS(t):l.default.error("A monitor for `"+n+"` has not been initialized.")},T.addDashJS=function(e,t){var n=(0,s.getMuxPlayerId)(e);b[n]?b[n].addDashJS(t):l.default.error("A monitor for `"+n+"` has not been initialized.")},T.removeHLSJS=function(e){var t=(0,s.getMuxPlayerId)(e);b[t]?b[t].removeHLSJS():l.default.error("A monitor for `"+t+"` has not been initialized.")},T.removeDashJS=function(e,t){var n=(0,s.getMuxPlayerId)(e);b[n]?b[n].removeDashJS(t):l.default.error("A monitor for `"+n+"` has not been initialized.")},T.init=function(e,t){(0,c.default)()&&t&&t.respectDoNotTrack&&l.default.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var n=(0,s.getMuxPlayerId)(e);b[n]=new g.default(T,n,t)},T.emit=function(e,t,n){var r=(0,s.getMuxPlayerId)(e);b[r]?(b[r].emit(t,n),"destroy"===t&&delete b[r]):l.default.error("A monitor for `"+r+"` has not been initialized.")},void 0!==o.default&&"function"==typeof o.default.addEventListener&&o.default.addEventListener("unload",function(){T.WINDOW_UNLOADING=!0},!1),T.checkDoNotTrack=c.default,T.log=l.default,T.utils=_.default,t.default=T},function(e,t,n){var r,i;!function(){"use strict";void 0!==(i="function"==typeof(r=function(){function i(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(e,t){for(var n=0;n<f.length;n++){var r=f[n];this[r]=n<e?s:this.methodFactory(r,e,t)}this.log=this.debug}function o(e,t,n){return function(){typeof console!==c&&(l.call(this,t,n),this[e].apply(this,arguments))}}function d(e,t,n){return"debug"===(r=e)&&(r="log"),typeof console!==c&&("trace"===r&&u?a:void 0!==console[r]?i(console,r):void 0!==console.log?i(console,"log"):s)||o.apply(this,arguments);var r}function n(n,e,t){function r(e){var t=(f[e]||"silent").toUpperCase();if(typeof window!==c){try{return window.localStorage[s]=t}catch(e){}try{window.document.cookie=encodeURIComponent(s)+"="+t+";"}catch(e){}}}function i(){var e;if(typeof window!==c){try{e=window.localStorage[s]}catch(e){}if(typeof e===c)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(s)+"=");-1!==n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}var a,o=this,s="loglevel";n&&(s+=":"+n),o.name=n,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=t||d,o.getLevel=function(){return a},o.setLevel=function(e,t){if("string"==typeof e&&void 0!==o.levels[e.toUpperCase()]&&(e=o.levels[e.toUpperCase()]),!("number"==typeof e&&0<=e&&e<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(a=e,!1!==t&&r(e),l.call(o,e,n),typeof console===c&&e<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){i()||o.setLevel(e,!1)},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var u=i();null==u&&(u=null==e?"WARN":e),o.setLevel(u,!1)}var s=function(){},c="undefined",u=typeof window!==c&&typeof window.navigator!==c&&/Trident\/|MSIE /.test(window.navigator.userAgent),f=["trace","debug","info","warn","error"],r=new n,h={};r.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t=t||(h[e]=new n(e,r.getLevel(),r.methodFactory))};var e=typeof window!==c?window.log:void 0;return r.noConflict=function(){return typeof window!==c&&window.log===r&&(window.log=e),r},r.getLoggers=function(){return h},r})?r.call(t,n,t,e):r)&&(e.exports=i)}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(4),s=r(i),a=n(1),u=r(a),l=n(7),d=n(5),c=n(0),f=r(c),h=n(12),p=r(h),g=n(2),m=r(g),y=n(22),v=r(y),_=n(25),b=n(26),T=n(27),E=r(T),S=n(28),w=r(S),A=n(29),C=r(A),R=n(30),I=r(R),M=n(31),O=r(M),D=n(32),k=r(D),P=n(33),L=r(P),x=n(34),N=r(x),F=n(35),B=r(F),U=n(36),j=r(U),G=n(37),H=r(G),q=n(38),V=r(q),K=n(39),Y=r(K),W=n(40),z=r(W),X=n(49),Q=r(X),$=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled"],J=function(e,t,n){var r=this;this.DOM_CONTENT_LOADED_EVENT_END=p.default.domContentLoadedEventEnd(),this.NAVIGATION_START=p.default.navigationStart(),this.mux=e,this.id=t,(n=(0,u.default)({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,errorTranslator:function(e){return e}},n)).data=n.data||{},n.data.property_key&&(n.data.env_key=n.data.property_key,delete n.data.property_key),s.default.setLevel(n.debug?"debug":"warn"),this.getPlayheadTime=n.getPlayheadTime,this.getStateData=n.getStateData||function(){},this.getAdData=n.getAdData||function(){},this.minimumRebufferDuration=n.minimumRebufferDuration,this.sustainedRebufferThreshold=n.sustainedRebufferThreshold,this.playbackHeartbeatTime=n.playbackHeartbeatTime,this.errorTranslator=n.errorTranslator,this.playbackEventDispatcher=new z.default(e,n.data.env_key,n),this.data={player_instance_id:(0,l.generateUUID)(),mux_sample_rate:n.sampleRate,beacon_domain:n.beaconDomain},this.data.view_sequence_number=1,this.data.player_sequence_number=1,this.oldEmit=this.emit,this.emit=function(e,t){t=(0,u.default)({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var i=function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}.bind(this);this.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),(0,u.default)(this.data,t),this._initializeViewData(),this.one("play",i),this.one("adbreakstart",i)});var a=function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}.bind(this);this.on("videochange",function(e,t){a(t)}),this.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),a((0,u.default)(t,{view_program_changed:!0})),i()}),this.on("destroy",this.destroy);var o=this.destroy.bind(this);f.default.addEventListener("unload",o,!1),this.on("destroy",function(){f.default.removeEventListener("unload",o)}),this.on("playerready",function(e,t){(0,u.default)(this.data,t)}),$.forEach(function(n){r.on(n,function(e,t){0!==n.indexOf("ad")&&this._updateStateData(),(0,u.default)(this.data,t),this._sanitizeData()}),r.on("after"+n,function(){"error"===n&&!this.viewErrored||this.send(n)})}),this.on("viewend",function(e,t){(0,u.default)(r.data,t)}),this.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),C.default.apply(this),Y.default.apply(this),j.default.apply(this),k.default.apply(this),w.default.apply(this),B.default.apply(this),I.default.apply(this),O.default.apply(this),H.default.apply(this),L.default.apply(this),N.default.apply(this),V.default.apply(this),Q.default.apply(this),n.hlsjs&&this.addHLSJS(n),n.dashjs&&this.addDashJS(n),this.emit("viewinit",n.data)};(0,u.default)(J.prototype,E.default.prototype),(0,u.default)(J.prototype,k.default.prototype),(0,u.default)(J.prototype,j.default.prototype),(0,u.default)(J.prototype,w.default.prototype),(0,u.default)(J.prototype,I.default.prototype),(0,u.default)(J.prototype,O.default.prototype),(0,u.default)(J.prototype,H.default.prototype),(0,u.default)(J.prototype,L.default.prototype),(0,u.default)(J.prototype,N.default.prototype),J.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),f.default.clearTimeout(this._heartBeatTimeout))},J.prototype.send=function(e){var t=(0,u.default)({},this.data);if(1===t.player_error_code&&(delete t.player_error_code,delete t.player_error_message),t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(0<t.player_source_duration||0<t.video_source_duration)&&(t.video_source_is_live=!1),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var n=(0,d.extractHostnameAndDomain)(t.video_source_url),r=o(n,2),i=r[0],a=r[1];t.video_source_domain=a,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat()},J.prototype._updateStateData=function(){(0,u.default)(this.data,this.getStateData()),this.getPlayheadTime&&(this.data.player_playhead_time=this.getPlayheadTime()),this._sanitizeData()},J.prototype._sanitizeData=function(){var n=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time"].forEach(function(e){var t=parseInt(n.data[e],10);n.data[e]=isNaN(t)?void 0:t}),["player_source_url","video_source_url"].forEach(function(e){n.data[e]&&0===n.data[e].toLowerCase().indexOf("data:")&&(n.data[e]="MSE style URL")})},J.prototype._resetVideoData=function(e,t){var n=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete n.data[e]})},J.prototype._resetViewData=function(){var t=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("view_")&&delete t.data[e]}),this.data.view_sequence_number=1},J.prototype._resetErrorData=function(e,t){delete this.data.player_error_code,delete this.data.player_error_message},J.prototype._initializeViewData=function(){var e=this,t=this.data.view_id=(0,l.generateUUID)();this.data.video_id||(this.data.video_id=(0,v.default)(this.data.player_source_url));var n=function(){t===e.data.view_id&&(0,m.default)(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",n):n()},J.prototype._restartHeartBeat=function(){var e=this;f.default.clearTimeout(this._heartBeatTimeout),this.viewErrored||(this._heartBeatTimeout=f.default.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))},J.prototype.addHLSJS=function(e){return e.hlsjs?this.hlsjs?void this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,void(0,_.monitorHlsJs)(this.mux,this.id,e.hlsjs,{},e.Hls||f.default.Hls)):void this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")},J.prototype.removeHLSJS=function(){this.hlsjs&&((0,_.stopMonitoringHlsJs)(this.hlsjs),this.hlsjs=void 0)},J.prototype.addDashJS=function(e){return e.dashjs?this.dashjs?void this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,void(0,b.monitorDashJS)(this.mux,this.id,e.dashjs)):void this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")},J.prototype.removeDashJS=function(){this.dashjs&&((0,b.stopMonitoringDashJS)(this.dashjs),this.dashjs=void 0)},t.default=J},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=a.default.createElement("a");t.href=e;var n=t.pathname.replace(/\.[^\/.]+$/,"");return s.default.encode(t.host+n).split("=")[0]};var i=n(13),a=r(i),o=n(24),s=r(o)},function(e,t){},function(e,i,a){(function(n,e){var r;!function(){var t=("object"==typeof n&&n&&n.exports,function(e){this.message=e});t.prototype=new Error,t.prototype.name="InvalidCharacterError";var l=function(e){throw new t(e)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,e={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,a=e.length%3,o="",s=-1,u=e.length-a;++s<u;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),o+=d.charAt((i=t+n+r)>>18&63)+d.charAt(i>>12&63)+d.charAt(i>>6&63)+d.charAt(63&i);return 2==a?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=d.charAt((i=t+n)>>10)+d.charAt(i>>4&63)+d.charAt(i<<2&63)+"="):1==a&&(i=e.charCodeAt(s),o+=d.charAt(i>>2)+d.charAt(i<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(s,"")).length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),t%4!=1&&!/[^+a-zA-Z0-9\/]/.test(e)||l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,a="",o=-1;++o<t;)r=d.indexOf(e.charAt(o)),n=i%4?64*n+r:r,i++%4&&(a+=String.fromCharCode(255&n>>(-2*i&6)));return a},version:"0.1.0"};void 0!==(r=function(){return e}.call(i,a,i,n))&&(n.exports=r)}()}).call(i,a(14)(e),a(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var i=n(8),a=r(i),o=n(12),d=r(o),g=n(5),m=function(e){if(!e)return{};var t=d.default.navigationStart();return{bytesLoaded:e.total,requestStart:Math.round(t+e.trequest),responseStart:Math.round(t+e.tfirst),responseEnd:Math.round(t+e.tload)}},y=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return(0,a.default)(e.getAllResponseHeaders())};t.monitorHlsJs=function(n,r,c){var s=arguments[4],e=n.log;if(d.default.exists()){var p=function(e,t){return n.emit(r,e,t)},t=function(e,t){var n=t.levels,r=t.audioTracks,i=t.url,a=t.stats,o=t.networkDetails,s={},u={};n.forEach(function(e,t){s[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),r.forEach(function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var l=m(a),d=l.bytesLoaded,c=l.requestStart,f=l.responseStart,h=l.responseEnd;p("requestcompleted",{request_event_type:e,request_bytes_loaded:d,request_start:c,request_response_start:f,request_response_end:h,request_type:"manifest",request_hostname:(0,g.extractHostname)(i),request_response_headers:y(o),request_rendition_lists:{media:s,audio:u,video:{}}})};c.on(s.Events.MANIFEST_LOADED,t);var i=function(e,t){var n=t.details,r=t.level,i=t.networkDetails,a=t.stats,o=m(a),s=o.bytesLoaded,u=o.requestStart,l=o.responseStart,d=o.responseEnd;p("requestcompleted",{request_event_type:e,request_bytes_loaded:s,request_start:u,request_response_start:l,request_response_end:d,request_current_level:r,request_type:"manifest",request_hostname:(0,g.extractHostname)(n.url),request_response_headers:y(i)})};c.on(s.Events.LEVEL_LOADED,i);var a=function(e,t){var n=t.details,r=t.networkDetails,i=t.stats,a=m(i),o=a.bytesLoaded,s=a.requestStart,u=a.responseStart,l=a.responseEnd;p("requestcompleted",{request_event_type:e,request_bytes_loaded:o,request_start:s,request_response_start:u,request_response_end:l,request_type:"manifest",request_hostname:(0,g.extractHostname)(n.url),request_response_headers:y(r)})};c.on(s.Events.AUDIO_TRACK_LOADED,a);var o=function(e,t){var n=t.stats,r=t.networkDetails,i=t.frag,a=m(n),o=a.bytesLoaded,s=a.requestStart,u=a.responseStart,l=a.responseEnd,d={request_event_type:e,request_bytes_loaded:o,request_start:s,request_response_start:u,request_response_end:l,request_hostname:r?(0,g.extractHostname)(r.responseURL):void 0,request_response_headers:y(r),request_media_duration:i.duration};"main"===i.type?(d.request_type="media",d.request_current_level=i.level,d.request_video_width=(c.levels[i.level]||{}).width,d.request_video_height=(c.levels[i.level]||{}).height):d.request_type=i.type,p("requestcompleted",d)};c.on(s.Events.FRAG_LOADED,o);var u=function(e,t){var n=t.details,r=t.response,i=t.context,a=t.frag;if(n===s.ErrorDetails.MANIFEST_LOAD_ERROR||n===s.ErrorDetails.MANIFEST_LOAD_TIMEOUT||n===s.ErrorDetails.FRAG_LOAD_ERROR||n===s.ErrorDetails.FRAG_LOAD_TIMEOUT||n===s.ErrorDetails.LEVEL_LOAD_ERROR||n===s.ErrorDetails.LEVEL_LOAD_TIMEOUT){var o=a&&a.url||i&&i.url||"";p("requestfailed",{request_error:n,request_url:o,request_hostname:(0,g.extractHostname)(o),request_type:n===s.ErrorDetails.FRAG_LOAD_ERROR||n===s.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":"manifest",request_error_code:r&&r.code,request_error_text:r&&r.text})}};c.on(s.Events.ERROR,u);var l=function(e,t){var n=t.frag,r=n&&n._url||"";p("requestcanceled",{request_cancel:e,request_url:r,request_type:"media",request_hostname:(0,g.extractHostname)(r)})};c.on(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,l),c._stopMuxMonitor=function(){c.off(s.Events.MANIFEST_LOADED,t),c.off(s.Events.LEVEL_LOADED,i),c.off(s.Events.AUDIO_TRACK_LOADED,a),c.off(s.Events.FRAG_LOADED,o),c.off(s.Events.ERROR,u),c.off(s.Events.FRAG_LOAD_EMERGENCY_ABORTED,l),c.off(s.Events.DESTROYING,c._stopMuxMonitor),delete c._stopMuxMonitor},c.on(s.Events.DESTROYING,c._stopMuxMonitor)}else e.warn("performance timing not supported. Not tracking HLS.js.")},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringDashJS=t.monitorDashJS=void 0;var i=n(0),s=r(i),a=n(8),f=r(a),h=n(5),I=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var n=e.getRequests({state:"executed"});if(0===n.length)return{};var r=n[n.length-1],i=(0,h.extractHostname)(r.url),a=r.bytesLoaded,o=new Date(r.requestStartDate).getTime(),s=new Date(r.firstByteDate).getTime(),u=new Date(r.requestEndDate).getTime(),l=isNaN(r.duration)?0:r.duration,d="function"==typeof t.getMetricsFor?t.getMetricsFor(r.mediaType).HttpList:t.getDashMetrics().getHttpRequests(r.mediaType),c=void 0;return 0<d.length&&(c=(0,f.default)(d[d.length-1]._responseHeaders||"")),{requestStart:o,requestResponseStart:s,requestResponseEnd:u,requestBytesLoaded:a,requestResponseHeaders:c,requestMediaDuration:l,requestHostname:i}};t.monitorDashJS=function(n,r,C){var e=n.log;if(C&&C.on){var R=function(e,t){return n.emit(r,e,t)},t=function(e){var t=e.type,n=e.data,r=n||{},i=r.url;R("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:(0,h.extractHostname)(i)})};C.on("manifestLoaded",t);var y={},i=function(e){var t=e.type,n=e.fragmentModel,r=e.chunk,i=r||{},a=i.mediaInfo,o=a||{},s=o.type,u=o.bitrateList,l={};(u=u||[]).forEach(function(e,t){l[t]={},l[t].width=e.width,l[t].height=e.height,l[t].bitrate=e.bandwidth,l[t].attrs={}}),"video"===s?y.video=l:"audio"===s?y.audio=l:y.media=l;var d=I(n,C),c=d.requestStart,f=d.requestResponseStart,h=d.requestResponseEnd,p=d.requestResponseHeaders,g=d.requestMediaDuration,m=d.requestHostname;R("requestcompleted",{request_event_type:t,request_start:c,request_response_start:f,request_response_end:h,request_bytes_loaded:-1,request_type:s+"_init",request_response_headers:p,request_hostname:m,request_media_duration:g,request_rendition_lists:y})};C.on("initFragmentLoaded",i);var a=function(e){var t,n,r,i,a=e.type,o=e.fragmentModel,s=e.chunk,u=s||{},l=u.mediaInfo,d=u.start,c=l||{},f=c.type,h=I(o,C),p=h.requestStart,g=h.requestResponseStart,m=h.requestResponseEnd,y=h.requestBytesLoaded,v=h.requestResponseHeaders,_=h.requestMediaDuration,b=h.requestHostname,T=(t=f,r=(n=C).getQualityFor(t),(i=n.getCurrentTrackFor(t).bitrateList)?{currentLevel:r,renditionWidth:i[r].width||null,renditionHeight:i[r].height||null,renditionBitrate:i[r].bandwidth}:{}),E=T.currentLevel,S=T.renditionWidth,w=T.renditionHeight,A=T.renditionBitrate;R("requestcompleted",{request_event_type:a,request_start:p,request_response_start:g,request_response_end:m,request_bytes_loaded:y,request_type:f,request_response_headers:v,request_hostname:b,request_media_start_time:d,request_media_duration:_,request_current_level:E,request_labeled_bitrate:A,request_video_width:S,request_video_height:w})};C.on("mediaFragmentLoaded",a);var o=function(e){var t=e.error,n=e.event,r=(n=n||{}).request||{},i=s.default.event&&s.default.event.currentTarget||{};R("requestfailed",{request_error:t+"_"+n.id+"_"+r.type,request_url:n.url,request_hostname:(0,h.extractHostname)(n.url),request_type:r.mediaType,request_error_code:i.status,request_error_type:i.statusText})};C.on("error",o),C._stopMuxMonitor=function(){C.off("manifestLoaded",t),C.off("initFragmentLoaded",i),C.off("mediaFragmentLoaded",a),C.off("error",o),delete C._stopMuxMonitor}}else e.warn("Invalid dash.js player reference. Monitoring blocked.")},t.stopMonitoringDashJS=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){},a=0;r.prototype.on=function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++a,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t},r.prototype.off=function(e,n){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,t){e._eventEmitterGuid===n._eventEmitterGuid&&r.splice(t,1)})},r.prototype.one=function(t,n,r){var i=this;n._eventEmitterGuid=n._eventEmitterGuid||++a;var e=function e(){i.off(t,e),n.apply(r||this,arguments)};e._eventEmitterGuid=n._eventEmitterGuid,this.on(t,e)},r.prototype.emit=function(n,e){var r=this;if(this._listeners){e=e||{};var t=this._listeners["before*"]||[],i=this._listeners[n]||[],a=this._listeners["after"+n]||[],o=function(e,t){(e=e.slice()).forEach(function(e){e.call(r,{type:n},t)})};o(t,e),o(i,e),o(a,e)}},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,this.on("playing",function(){this._playheadShouldBeProgressing=!0}),this.on("play",this._startPlaybackHeartbeatInterval),this.on("playing",this._startPlaybackHeartbeatInterval),this.on("adbreakstart",this._startPlaybackHeartbeatInterval),this.on("adplay",this._startPlaybackHeartbeatInterval),this.on("adplaying",this._startPlaybackHeartbeatInterval),this.on("seeking",this._startPlaybackHeartbeatInterval),this.on("devicewake",this._startPlaybackHeartbeatInterval),this.on("viewstart",this._startPlaybackHeartbeatInterval),this.on("pause",this._stopPlaybackHeartbeatInterval),this.on("ended",this._stopPlaybackHeartbeatInterval),this.on("viewend",this._stopPlaybackHeartbeatInterval),this.on("error",this._stopPlaybackHeartbeatInterval),this.on("aderror",this._stopPlaybackHeartbeatInterval),this.on("adpause",this._stopPlaybackHeartbeatInterval),this.on("adended",this._stopPlaybackHeartbeatInterval),this.on("adbreakend",this._stopPlaybackHeartbeatInterval),this.on("seeked",function(){this.data.player_is_paused?this._stopPlaybackHeartbeatInterval():this._startPlaybackHeartbeatInterval()}),this.on("timeupdate",function(){null!==this._playbackHeartbeatInterval&&this.emit("playbackheartbeat")}),this.on("devicesleep",function(e,t){null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend",{viewer_time:t.viewer_time}),this._playbackHeartbeatInterval=null)})};a.prototype._startPlaybackHeartbeatInterval=function(){var e=this;null===this._playbackHeartbeatInterval&&(this.emit("playbackheartbeat"),this._playbackHeartbeatInterval=i.default.setInterval(function(){e.emit("playbackheartbeat")},this.playbackHeartbeatTime))},a.prototype._stopPlaybackHeartbeatInterval=function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(i.default.clearInterval(this._playbackHeartbeatInterval),this.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=this;this.on("viewinit",function(){t.viewErrored=!1}),this.on("error",function(){try{var e=t.errorTranslator({player_error_code:t.data.player_error_code,player_error_message:t.data.player_error_message});e?(t.data.player_error_code=e.player_error_code,t.data.player_error_message=e.player_error_message,t.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message)}catch(e){t.mux.log.warn("Exception in error translator callback.",e),t.viewErrored=!0}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._watchTimeTrackerLastCheckedTime=null,this.on("playbackheartbeat",this._updateWatchTime),this.on("playbackheartbeatend",this._clearWatchTimeState)};a.prototype._updateWatchTime=function(e,t){var n=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=n),(0,i.default)(this.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n},a.prototype._clearWatchTimeState=function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this._playbackTimeTrackerLastPlayheadPosition=-1,this.on("playbackheartbeat",this._updatePlaybackTime),this.on("playbackheartbeatend",this._clearPlaybackTimeState),this.on("seeking",this._clearPlaybackTimeState)};a.prototype._updatePlaybackTime=function(){var e=this.data.player_playhead_time;if(0<=this._playbackTimeTrackerLastPlayheadPosition&&e>this._playbackTimeTrackerLastPlayheadPosition){var t=e-this._playbackTimeTrackerLastPlayheadPosition;t<=1e3&&(0,i.default)(this.data,"view_content_playback_time",t)}this._playbackTimeTrackerLastPlayheadPosition=e},a.prototype._clearPlaybackTimeState=function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.on("playbackheartbeat",this._updatePlayheadTime),this.on("playbackheartbeatend",this._updatePlayheadTime),this.on("timeupdate",this._updatePlayheadTime),this.on("destroy",function(){this.off("timeupdate",this._updatePlayheadTime)})};r.prototype._updatePlayheadTime=function(e,t){if(t.player_playhead_time)this.data.player_playhead_time=t.player_playhead_time;else if(this.getPlayheadTime){var n=this.getPlayheadTime();void 0!==n&&(this.data.player_playhead_time=n)}},t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a=r(i),o=n(2),s=r(o),u=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,this.on("playbackheartbeat",this._checkIfRebuffering),this.on("playbackheartbeatend",this._cleanupRebufferTracker),this.on("seeking",function(){this._cleanupRebufferTracker(null,{viewer_time:a.default.now()})})};u.prototype._checkIfRebuffering=function(e,t){if(this.isSeeking||this.isAdBreak||!this._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else{if(null===this._lastCheckedTime)return this._prepareRebufferTrackerState(t.viewer_time),void this._updateRebufferMetrics();if(this._lastPlayheadTime===this.data.player_playhead_time){var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;n>=this.sustainedRebufferThreshold&&(this._rebuffering?this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime):(this._rebuffering=!0,(0,s.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(n),this.emit("rebufferstart"))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}},u.prototype._clearRebufferTrackerState=function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null},u.prototype._prepareRebufferTrackerState=function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e},u.prototype._cleanupRebufferTracker=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this._updateRebufferMetrics(t.viewer_time-this._lastCheckedTime),this.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return void this._updateRebufferMetrics();var r=this.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;0<r&&i-r>this.minimumRebufferDuration?((0,s.default)(this.data,"view_rebuffer_count",1),this._updateRebufferMetrics(i-r),this.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-r})):this._updateRebufferMetrics()}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()},u.prototype._updateRebufferMetrics=function(e){0<e&&(0,s.default)(this.data,"view_rebuffer_duration",e),0<=this.data.view_watch_time&&0<this.data.view_rebuffer_count&&(this.data.view_rebuffer_frequency=this.data.view_rebuffer_count/this.data.view_watch_time,this.data.view_rebuffer_percentage=this.data.view_rebuffer_duration/this.data.view_watch_time)},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(){this.on("viewinit",function(){var e=this.data,r=e.view_id;if(!e.view_program_changed){var t=function(e,t){var n=t.viewer_time;"playing"===e.type&&void 0===this.data.view_time_to_first_frame?this.calculateTimeToFirstFrame(n||i.default.now(),r):"adplaying"!==e.type||void 0!==this.data.view_time_to_first_frame&&!this.inPrerollPosition()||this.calculateTimeToFirstFrame(n||i.default.now(),r)};this.one("playing",t),this.one("adplaying",t),this.one("viewend",function(){this.off("playing",t),this.off("adplaying",t)})}})};a.prototype.calculateTimeToFirstFrame=function(e,t){t===this.data.view_id&&(this._updateWatchTime(null,{viewer_time:e}),this.data.view_time_to_first_frame=this.data.view_watch_time,(this.data.player_autoplay_on||this.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.data.view_aggregate_startup_time=this.data.view_start+this.data.view_watch_time-this.NAVIGATION_START))},t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=this;this.on("viewinit",function(){this._lastPlayheadPosition=-1});var e=["pause","rebufferstart","seeking","error","adbreakstart","hb"],n=["playing","hb"];e.forEach(function(e){t.on(e,function(){if(0<=this._lastPlayheadPosition&&0<=this.data.player_playhead_time&&0<=this._lastPlayerWidth&&0<this._lastSourceWidth&&0<=this._lastPlayerHeight&&0<this._lastSourceHeight){var e=this.data.player_playhead_time-this._lastPlayheadPosition;if(e<0)return void(this._lastPlayheadPosition=-1);var t=Math.min(this._lastPlayerWidth/this._lastSourceWidth,this._lastPlayerHeight/this._lastSourceHeight),n=Math.max(0,t-1),r=Math.max(0,1-t);this.data.view_max_upscale_percentage=Math.max(this.data.view_max_upscale_percentage||0,n),this.data.view_max_downscale_percentage=Math.max(this.data.view_max_downscale_percentage||0,r),(0,i.default)(this.data,"view_total_content_playback_time",e),(0,i.default)(this.data,"view_total_upscaling",n*e),(0,i.default)(this.data,"view_total_downscaling",r*e)}this._lastPlayheadPosition=-1})}),n.forEach(function(e){t.on(e,function(){this._lastPlayheadPosition=this.data.player_playhead_time,this._lastPlayerWidth=this.data.player_width,this._lastPlayerHeight=this.data.player_height,this._lastSourceWidth=this.data.video_source_width,this._lastSourceHeight=this.data.video_source_height})})};var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){this.isSeeking=!1,this.on("seeking",function(e,t){(0,l.default)(this.data,t),this._lastSeekingTime=a.default.now(),!1===this.isSeeking&&(this.isSeeking=!0,this.send("seeking"))}),this.on("seeked",function(){this.isSeeking=!1;var e=this._lastSeekingTime||a.default.now(),t=a.default.now()-e;(0,s.default)(this.data,"view_seek_count",1),(0,s.default)(this.data,"view_seek_duration",t);var n=this.data.view_max_seek_time||0;this.data.view_max_seek_time=Math.max(n,t)}),this.on("viewend",function(){this.isSeeking=!1})};var i=n(3),a=r(i),o=n(2),s=r(o),u=n(1),l=r(u)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(2),a=r(i),c=n(5),o=n(1),s=r(o),u=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},l=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],f=function(){var t=this;this.on("viewinit",function(){this.isAdBreak=!1,this._currentAdRequestNumber=0,this._currentAdResponseNumber=0,this._adRequests=[],this._adResponses=[],this._adHasPlayed=!1,this._wouldBeNewAdPlay=!0,this._prerollPlayTime=void 0}),l.forEach(function(e){return t.on(e,t._updateAdData)});var e=function(){t.isAdBreak=!1};this.on("adbreakstart",function(){this.isAdBreak=!0}),this.on("play",e),this.on("playing",e),this.on("viewend",e),this.on("adrequest",function(e,t){t=(0,s.default)({ad_request_id:"generatedAdRequestId"+this._currentAdRequestNumber++},t),u(this._adRequests,t),(0,a.default)(this.data,"view_ad_request_count"),this.inPrerollPosition()&&(this.data.view_preroll_requested=!0,this._adHasPlayed||(0,a.default)(this.data,"view_preroll_request_count"))}),this.on("adresponse",function(e,t){t=(0,s.default)({ad_request_id:"generatedAdRequestId"+this._currentAdResponseNumber++},t),u(this._adResponses,t);var n=this.findAdRequest(t.ad_request_id);n&&(0,a.default)(this.data,"view_ad_request_time",Math.max(0,t.viewer_time-n.viewer_time))}),this.on("adplay",function(e,t){this._adHasPlayed=!0,this._wouldBeNewAdPlay&&(this._wouldBeNewAdPlay=!1,(0,a.default)(this.data,"view_ad_played_count")),this.inPrerollPosition()&&!this.data.view_preroll_played&&(this.data.view_preroll_played=!0,0<this._adRequests.length&&(this.data.view_preroll_request_time=Math.max(0,t.viewer_time-this._adRequests[0].viewer_time)),this.data.view_start&&(this.data.view_startup_preroll_request_time=Math.max(0,t.viewer_time-this.data.view_start)),this._prerollPlayTime=t.viewer_time)}),this.on("adplaying",function(e,t){this.inPrerollPosition()&&void 0===this.data.view_preroll_load_time&&void 0!==this._prerollPlayTime&&(this.data.view_preroll_load_time=t.viewer_time-this._prerollPlayTime,this.data.view_startup_preroll_load_time=t.viewer_time-this._prerollPlayTime)}),this.on("adended",function(){this._wouldBeNewAdPlay=!0}),this.on("aderror",function(){this._wouldBeNewAdPlay=!0})};f.prototype.inPrerollPosition=function(){return void 0===this.data.view_content_playback_time||this.data.view_content_playback_time<=1e3},f.prototype.findAdRequest=function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]},f.prototype._updateAdData=function(e,t){if(this.inPrerollPosition()){if(!this.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=(0,c.extractHostnameAndDomain)(t.ad_tag_url),r=d(n,2),i=r[0],a=r[1];this.data.view_preroll_ad_tag_domain=a,this.data.view_preroll_ad_tag_hostname=i}if(!this.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var o=(0,c.extractHostnameAndDomain)(t.ad_asset_url),s=d(o,2),u=s[0],l=s[1];this.data.view_preroll_ad_asset_domain=l,this.data.view_preroll_ad_asset_hostname=u}}},t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){r&&((0,s.default)(n.data,"view_waiting_rebuffer_duration",o.default.now()-r),r=!1,window.clearInterval(i))}function t(){a=!1,e()}var n=this,r=void 0,i=void 0,a=!1;this.on("waiting",function(){a&&((0,s.default)(n.data,"view_waiting_rebuffer_count",1),r=o.default.now(),i=window.setInterval(function(){if(r){var e=o.default.now();(0,s.default)(n.data,"view_waiting_rebuffer_duration",e-r),r=e}},250))}),this.on("playing",function(){e(),a=!0}),this.on("pause",t),this.on("seeking",t)};var i=n(3),o=r(i),a=n(2),s=r(a)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this;this.one("playbackheartbeat",u),this.on("playbackheartbeatend",function(){e.off("before*",l),e.one("playbackheartbeat",u)})};var i=n(1),a=r(i),o=n(3),s=r(o),u=function(){this.lastWallClockTime=s.default.now(),this.on("before*",l)},l=function(e){var t=s.default.now(),n=this.lastWallClockTime;3e4<(this.lastWallClockTime=t)-n&&(this.emit("devicesleep",{viewer_time:n}),(0,a.default)(this.data,{viewer_time:n}),this.send("devicesleep"),this.emit("devicewake",{viewer_time:t}),(0,a.default)(this.data,{viewer_time:t}),this.send("devicewake"))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(41),i=n(4),l=r(i),a=n(45),o=r(a),d=n(11),c=r(d),f=n(17),h=r(f),p=n(46),g=r(p),m=n(48),y=r(m),v=n(1),_=r(v),b=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],T=["viewstart","error","ended","viewend"],E=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.mux=e,this.envKey=t,this.eventQueue=new g.default((0,o.default)(t,n.beaconDomain)),this.previousBeaconData=null,this.lastEventTime=null,this.sampleRate=n.sampleRate,this.disableCookies=n.disableCookies,this.respectDoNotTrack=n.respectDoNotTrack,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed_version:this.mux.VERSION,page_url:window.location.href,viewer_application_name:y.default.name,viewer_application_version:y.default.version,viewer_application_engine:y.default.layout,viewer_device_name:y.default.product,viewer_device_category:"",viewer_device_manufacturer:y.default.manufacturer,viewer_os_family:y.default.os&&y.default.os.family,viewer_os_architecture:y.default.os&&y.default.os.architecture,viewer_os_version:y.default.os&&y.default.os.version},this.viewerData=this.disableCookies?{}:(0,u.getAndUpdateViewerData)()};E.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,c.default)())return l.default.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==(void 0===t?"undefined":s(t)))return l.default.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:(0,u.getAndUpdateSessionData)(),r={};(0,_.default)(r,this.pageLevelData),(0,_.default)(r,t),(0,_.default)(r,n),(0,_.default)(r,this.viewerData),r.event=e,r.env_key=this.envKey,r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var i=r.mux_sample_number>=this.sampleRate,a=this._deduplicateBeaconData(e,r),o=(0,h.default)(a);if(this.lastEventTime=this.mux.utils.now(),i)return l.default.info("Not sending event due to sample rate restriction",e,r,o);if(!this.envKey)return l.default.info("Not sending event due to missing environment key",e,r,o);if(!this.rateLimited)if(l.default.info("Sending event",e,r,o),this.rateLimited=!this.eventQueue.queueEvent(e,o),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(0<=T.indexOf(e)&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",o=(0,h.default)(r),this.eventQueue.queueEvent(r.event,o),l.default.error("Beaconing disabled due to rate limit.")}},E.prototype.destroy=function(){this.eventQueue.destroy(!1)},E.prototype._deduplicateBeaconData=function(e,n){var r=this,i={},t=n.view_id;if(!t||"viewstart"===e||"viewend"===e||!this.previousBeaconData||6e5<=this.mux.utils.now()-this.lastEventTime)i=(0,_.default)({},n),t&&(this.previousBeaconData=i),t&&"viewend"===e&&(this.previousBeaconData=null);else{var a=0===e.indexOf("request");Object.keys(n).forEach(function(e){var t=n[e];(t!==r.previousBeaconData[e]||-1<b.indexOf(e)||function(e,t,n,r){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===(void 0===n?"undefined":s(n))&&"object"===(void 0===r?"undefined":s(r))&&Object.keys(n||{}).length===Object.keys(r||{}).length)}(a,e,t,r.previousBeaconData[e]))&&(i[e]=t,r.previousBeaconData[e]=t)})}return i},t.default=E},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAndUpdateSessionData=t.getAndUpdateViewerData=void 0;var i=n(15),a=r(i),o=n(44),s=r(o),u=n(7),l=n(3),d=r(l),c=function(){var t=void 0;try{t=a.default.parse(s.default.get("muxData")||"")}catch(e){t={}}return t},f=function(e){s.default.set("muxData",a.default.stringify(e),{expires:7300})};t.getAndUpdateViewerData=function(){var e=c();return e.mux_viewer_id=e.mux_viewer_id||(0,u.generateUUID)(),e.msn=e.msn||Math.random(),f(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},t.getAndUpdateSessionData=function(){var e=c(),t=d.default.now();return e.session_start&&(e.sst=e.session_start,delete e.session_start),e.session_id&&(e.sid=e.session_id,delete e.session_id),e.session_expires&&(e.sex=e.session_expires,delete e.session_expires),(!e.sex||e.sex<t)&&(e.sid=(0,u.generateUUID)(),e.sst=t),e.sex=t+15e5,f(e),{session_id:e.sid,session_start:e.sst,session_expires:e.sex}}},function(e,t,n){"use strict";var b=n(9),h=n(16),p=Object.prototype.hasOwnProperty,g={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},T=Array.isArray,r=Array.prototype.push,E=function(e,t){r.apply(e,T(t)?t:[t])},i=Date.prototype.toISOString,a=h.default,S={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:b.encode,encodeValuesOnly:!1,format:a,formatter:h.formatters[a],indices:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},m=function e(t,n,r,i,a,o,s,u,l,d,c,f,h){var p=t;if("function"==typeof s?p=s(n,p):p instanceof Date?p=d(p):"comma"===r&&T(p)&&(p=p.join(",")),null===p){if(i)return o&&!f?o(n,S.encoder,h,"key"):n;p=""}if(function(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}(p)||b.isBuffer(p))return o?[c(f?n:o(n,S.encoder,h,"key"))+"="+c(o(p,S.encoder,h,"value"))]:[c(n)+"="+c(String(p))];var g,m=[];if(void 0===p)return m;if(T(s))g=s;else{var y=Object.keys(p);g=u?y.sort(u):y}for(var v=0;v<g.length;++v){var _=g[v];a&&null===p[_]||(T(p)?E(m,e(p[_],"function"==typeof r?r(n,_):n,r,i,a,o,s,u,l,d,c,f,h)):E(m,e(p[_],n+(l?"."+_:"["+_+"]"),r,i,a,o,s,u,l,d,c,f,h)))}return m};e.exports=function(e,t){var n,r,i=e,a=function(e){if(!e)return S;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||S.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=h.default;if(void 0!==e.format){if(!p.call(h.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=h.formatters[n],i=S.filter;return"function"!=typeof e.filter&&!T(e.filter)||(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:S.addQueryPrefix,allowDots:void 0===e.allowDots?S.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:S.charsetSentinel,delimiter:void 0===e.delimiter?S.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:S.encode,encoder:"function"==typeof e.encoder?e.encoder:S.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:S.encodeValuesOnly,filter:i,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:S.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:S.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:S.strictNullHandling}}(t);"function"==typeof a.filter?(r=a.filter,i=r("",i)):T(a.filter)&&(r=a.filter,n=r);var o,s=[];if("object"!=typeof i||null===i)return"";o=t&&t.arrayFormat in g?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var u=g[o];n=n||Object.keys(i),a.sort&&n.sort(a.sort);for(var l=0;l<n.length;++l){var d=n[l];a.skipNulls&&null===i[d]||E(s,m(i[d],d,u,a.strictNullHandling,a.skipNulls,a.encode?a.encoder:null,a.filter,a.sort,a.allowDots,a.serializeDate,a.formatter,a.encodeValuesOnly,a.charset))}var c=s.join(a.delimiter),f=!0===a.addQueryPrefix?"?":"";return a.charsetSentinel&&("iso-8859-1"===a.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),0<c.length?f+c:""}},function(e,t,n){"use strict";var p=n(9),g=Object.prototype.hasOwnProperty,m=Array.isArray,y={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:p.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},v=function(e,t){return e&&"string"==typeof e&&t.comma&&-1<e.indexOf(",")?e.split(","):e},_=function(e,t){if(m(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},l=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=0<n.depth&&/(\[[^[\]]*])/.exec(i),s=o?i.slice(0,o.index):i,u=[];if(s){if(!n.plainObjects&&g.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var l=0;0<n.depth&&null!==(o=a.exec(i))&&l<n.depth;){if(l+=1,!n.plainObjects&&g.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(o[1])}return o&&u.push("["+i.slice(o.index)+"]"),function(e,t,n,r){for(var i=r?t:v(t,n),a=e.length-1;0<=a;--a){var o,s=e[a];if("[]"===s&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(u,10);n.parseArrays||""!==u?!isNaN(l)&&s!==u&&String(l)===u&&0<=l&&n.parseArrays&&l<=n.arrayLimit?(o=[])[l]=i:o[u]=i:o={0:i}}i=o}return i}(u,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return y;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?y.charset:e.charset;return{allowDots:void 0===e.allowDots?y.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:y.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:y.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:y.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:y.comma,decoder:"function"==typeof e.decoder?e.decoder:y.decoder,delimiter:"string"==typeof e.delimiter||p.isRegExp(e.delimiter)?e.delimiter:y.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:y.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:y.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:y.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:y.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:y.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,a),s=-1,u=t.charset;if(t.charsetSentinel)for(n=0;n<o.length;++n)0===o[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[n]?u="utf-8":"utf8=%26%2310003%3B"===o[n]&&(u="iso-8859-1"),s=n,n=o.length);for(n=0;n<o.length;++n)if(n!==s){var l,d,c=o[n],f=c.indexOf("]="),h=-1===f?c.indexOf("="):f+1;(d=-1===h?(l=t.decoder(c,y.decoder,u,"key"),t.strictNullHandling?null:""):(l=t.decoder(c.slice(0,h),y.decoder,u,"key"),_(v(c.slice(h+1),t),function(e){return t.decoder(e,y.decoder,u,"value")})))&&t.interpretNumericEntities&&"iso-8859-1"===u&&(d=d.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),-1<c.indexOf("[]=")&&(d=m(d)?[d]:d),g.call(r,l)?r[l]=p.combine(r[l],d):r[l]=d}return r}(e,n):e,i=n.plainObjects?Object.create(null):{},a=Object.keys(r),o=0;o<a.length;++o){var s=a[o],u=l(s,r[s],n,"string"==typeof e);i=p.merge(i,u,n)}return p.compact(i)}},function(i,a,o){"use strict";var s,u,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=!1;if(void 0!==(u="function"==typeof(s=e)?s.call(a,o,a,i):s)&&(i.exports=u),t=!0,"object"===l(a)&&(i.exports=e(),t=!0),!t){var n=window.Cookies,r=window.Cookies=e();r.noConflict=function(){return window.Cookies=n,r}}}(function(){var h=function(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t};return function e(c){function f(e,t,n){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=h({path:"/"},f.defaults,n)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i}try{r=JSON.stringify(t),/^[\{\[]/.test(r)&&(t=r)}catch(e){}return t=c.write?c.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[e,"=",t,n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}e||(r={});for(var a=document.cookie?document.cookie.split("; "):[],o=/(%[0-9A-Z]{2})+/g,s=0;s<a.length;s++){var u=a[s].split("="),l=u.slice(1).join("=");'"'===l.charAt(0)&&(l=l.slice(1,-1));try{var d=u[0].replace(o,decodeURIComponent);if(l=c.read?c.read(l,d):c(l,d)||l.replace(o,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch(e){}if(e===d){r=l;break}e||(r[d]=l)}catch(e){}}return r}}return(f.set=f).get=function(e){return f.call(f,e)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(e,t){f(e,"",h(t,{expires:-1}))},f.withConverter=e,f}(function(){})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return t=t||"litix.io",(e=e||"").match(/^[a-z0-9]+$/)?"https://"+e+"."+t:"https://img.litix.io/a.gif"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a=r(i),o=n(4),s=r(o),u=n(47),l=r(u),d=n(1),c=r(d),f=n(17),h=r(f),p=!!a.default.XMLHttpRequest&&"withCredentials"in new a.default.XMLHttpRequest,g={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:5e3},m=function(e,t){this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=(0,c.default)({},g,t)};m.prototype.queueEvent=function(e,t){var n=(0,c.default)({},t);return p?(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(n),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):(l.default.send(this._beaconUrl,n),!0)},m.prototype.flushEvents=function(){p&&(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},m.prototype.destroy=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),a.default.clearTimeout(this._sendTimeout)},m.prototype._clearBeaconQueue=function(){var e=a.default.navigator,t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,n=this._eventQueue.slice(t);if(0<t&&(0,c.default)(n[n.length-1],(0,h.default)({mux_view_message:"event queue truncated"})),e.sendBeacon)e.sendBeacon(this._beaconUrl,JSON.stringify({events:n}));else if(a.default.XMLHttpRequest){var r=new a.default.XMLHttpRequest;r.open("POST",this._beaconUrl),r.setRequestHeader("Content-Type","application/json"),r.send(JSON.stringify({events:n}))}else l.default.send(this._beaconUrl,n[n.length-1])},m.prototype._sendBeaconQueue=function(){var e=this;if(a.default.XMLHttpRequest&&!this._postInFlight){var t=new a.default.XMLHttpRequest,n=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0,t.onreadystatechange=function(){4===t.readyState&&(200!==t.status?(e._eventQueue=n.concat(e._eventQueue),e._failureCount+=1,s.default.info("Error sending beacon: "+t.status),s.default.info(t.responseText)):e._failureCount=0,e._postInFlight=!1)},t.open("POST",this._beaconUrl),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify({events:n}))}},m.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},m.prototype._startBeaconSending=function(){var e=this;a.default.clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=a.default.setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=r(i),a=n(0),s=r(a),u={send:function(e,t){function n(){r.src=a+(i?"&rc="+i:"")}var r=new Image,i=0,a=e+"?"+o.default.stringify(t);return r.addEventListener("error",function(){3<i||s.default.setTimeout(function(){i++,n()},5e3*i)}),n(),r}};t.default=u},function(e,f,h){(function(l,d){var c;(function(){"use strict";function t(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function N(e){return e=G(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:t(e)}function F(e,t){for(var n in e)s.call(e,n)&&t(e[n],n,e)}function B(e){return null==e?t(e):V.call(e).slice(8,-1)}function U(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function j(n,r){var i=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&-1<r&&r<=a)for(;++n<r;)t(e[n],n,e);else F(e,t)}(n,function(e,t){i=r(i,e,t,n)}),i}function G(e){return String(e).replace(/^ +| +$/g,"")}var e={function:!0,object:!0},H=e[typeof window]&&window||this,n=e[typeof f]&&f,r=e[typeof l]&&l&&!l.nodeType&&l,i=n&&r&&"object"==typeof d&&d;!i||i.global!==i&&i.window!==i&&i.self!==i||(H=i);var a=Math.pow(2,53)-1,q=/\bOpera/,o=Object.prototype,s=o.hasOwnProperty,V=o.toString,u=function e(s){function t(e){return j(e,function(e,t){var n=t.pattern||U(t);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(s)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(s)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(s))&&((e=String(t.label&&!RegExp(n,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=N(e[0].replace(RegExp(n,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e})}function n(){return this.description||""}var r=H,i=s&&"object"==typeof s&&"String"!=B(s);i&&(r=s,s=null);var a=r.navigator||{},o=a.userAgent||"";s=s||o;var u,l,d,c,f,h=i?!!a.likeChrome:/\bChrome\b/.test(s)&&!/internal|\n/i.test(V.toString()),p=i?"Object":"ScriptBridgingProxyObject",g=i?"Object":"Environment",m=i&&r.java?"JavaPackage":B(r.java),y=i?"Object":"RuntimeObject",v=/\bJava/.test(m)&&r.java,_=v&&B(r.environment)==g,b=v?"a":"α",T=v?"b":"β",E=r.document||{},S=r.operamini||r.opera,w=q.test(w=i&&S?S["[[Class]]"]:B(S))?w:S=null,A=s,C=[],R=null,I=s==o,M=I&&S&&"function"==typeof S.version&&S.version(),O=function(e){return j(e,function(e,t){return e||RegExp("\\b"+(t.pattern||U(t))+"\\b","i").exec(s)&&(t.label||t)})}([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),D=function(e){return j(e,function(e,t){return e||RegExp("\\b"+(t.pattern||U(t))+"\\b","i").exec(s)&&(t.label||t)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),k=t([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),P=function(e){return j(e,function(e,t,n){return e||(t[k]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(k)]||RegExp("\\b"+U(n)+"(?:\\b|\\w*\\d)","i").exec(s))&&n})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),L=function(e){return j(e,function(e,t){var n,r,i,a,o=t.pattern||U(t);return!e&&(e=RegExp("\\b"+o+"(?:/[\\d.]+|[ \\w.]*)","i").exec(s))&&(n=e,r=o,i=t.label||t,a={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},r&&i&&/^Win/i.test(n)&&!/^Windows Phone /i.test(n)&&(a=a[/[\d.]+$/.exec(n)])&&(n="Windows "+a),n=String(n),r&&i&&(n=n.replace(RegExp(r,"i"),i)),e=n=N(n.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),e})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(O=O&&[O],P&&!k&&(k=t([P])),(u=/\bGoogle TV\b/.exec(k))&&(k=u[0]),/\bSimulator\b/i.test(s)&&(k=(k?k+" ":"")+"Simulator"),"Opera Mini"==D&&/\bOPiOS\b/.test(s)&&C.push("running in Turbo/Uncompressed mode"),"IE"==D&&/\blike iPhone OS\b/.test(s)?(u=e(s.replace(/like iPhone OS/,"")),P=u.manufacturer,k=u.product):/^iP/.test(k)?(D=D||"Safari",L="iOS"+((u=/ OS ([\d_]+)/i.exec(s))?" "+u[1].replace(/_/g,"."):"")):"Konqueror"!=D||/buntu/i.test(L)?P&&"Google"!=P&&(/Chrome/.test(D)&&!/\bMobile Safari\b/i.test(s)||/\bVita\b/.test(k))||/\bAndroid\b/.test(L)&&/^Chrome/.test(D)&&/\bVersion\//i.test(s)?(D="Android Browser",L=/\bAndroid\b/.test(L)?L:"Android"):"Silk"==D?(/\bMobi/i.test(s)||(L="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(s)&&C.unshift("accelerated")):"PaleMoon"==D&&(u=/\bFirefox\/([\d.]+)\b/.exec(s))?C.push("identifying as Firefox "+u[1]):"Firefox"==D&&(u=/\b(Mobile|Tablet|TV)\b/i.exec(s))?(L=L||"Firefox OS",k=k||u[1]):!D||(u=!/\bMinefield\b/i.test(s)&&/\b(?:Firefox|Safari)\b/.exec(D))?(D&&!k&&/[\/,]|^[^(]+?\)/.test(s.slice(s.indexOf(u+"/")+8))&&(D=null),(u=k||P||L)&&(k||P||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(L))&&(D=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(L)?L:u)+" Browser")):"Electron"==D&&(u=(/\bChrome\/([\d.]+)\b/.exec(s)||0)[1])&&C.push("Chromium "+u):L="Kubuntu",M=M||function(e){return j(e,function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(s)||0)[1]||null})}(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",U(D),"(?:Firefox|Minefield|NetFront)"]),(u=("iCab"==O&&3<parseFloat(M)?"WebKit":/\bOpera\b/.test(D)&&(/\bOPR\b/.test(s)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(s)&&!/^(?:Trident|EdgeHTML)$/.test(O)&&"WebKit"||!O&&/\bMSIE\b/i.test(s)&&("Mac OS"==L?"Tasman":"Trident")||"WebKit"==O&&/\bPlayStation\b(?! Vita\b)/i.test(D)&&"NetFront")&&(O=[u]),"IE"==D&&(u=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(s)||0)[1])?(D+=" Mobile",L="Windows Phone "+(/\+$/.test(u)?u:u+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(s)?(D="IE Mobile",L="Windows Phone 8.x",C.unshift("desktop mode"),M=M||(/\brv:([\d.]+)/.exec(s)||0)[1]):"IE"!=D&&"Trident"==O&&(u=/\brv:([\d.]+)/.exec(s))&&(D&&C.push("identifying as "+D+(M?" "+M:"")),D="IE",M=u[1]),I){if(c="global",f=null!=(d=r)?typeof d[c]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!d[c])B(u=r.runtime)==p?(D="Adobe AIR",L=u.flash.system.Capabilities.os):B(u=r.phantom)==y?(D="PhantomJS",M=(u=u.version||null)&&u.major+"."+u.minor+"."+u.patch):"number"==typeof E.documentMode&&(u=/\bTrident\/(\d+)/i.exec(s))?(M=[M,E.documentMode],(u=+u[1]+4)!=M[1]&&(C.push("IE "+M[1]+" mode"),O&&(O[1]=""),M[1]=u),M="IE"==D?String(M[1].toFixed(1)):M[0]):"number"==typeof E.documentMode&&/^(?:Chrome|Firefox)\b/.test(D)&&(C.push("masking as "+D+" "+M),D="IE",M="11.0",O=["Trident"],L="Windows");else if(v&&(u=v.lang.System,A=u.getProperty("os.arch"),L=L||u.getProperty("os.name")+" "+u.getProperty("os.version")),_){try{M=r.require("ringo/engine").version.join("."),D="RingoJS"}catch(s){(u=r.system)&&u.global.system==r.system&&(D="Narwhal",L=L||u[0].os||null)}D=D||"Rhino"}else"object"==typeof r.process&&!r.process.browser&&(u=r.process)&&("object"==typeof u.versions&&("string"==typeof u.versions.electron?(C.push("Node "+u.versions.node),D="Electron",M=u.versions.electron):"string"==typeof u.versions.nw&&(C.push("Chromium "+M,"Node "+u.versions.node),D="NW.js",M=u.versions.nw)),D||(D="Node.js",A=u.arch,L=u.platform,M=(M=/[\d.]+/.exec(u.version))?M[0]:null));L=L&&N(L)}if(M&&(u=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(s+";"+(I&&a.appMinorVersion))||/\bMinefield\b/i.test(s)&&"a")&&(R=/b/i.test(u)?"beta":"alpha",M=M.replace(RegExp(u+"\\+?$"),"")+("beta"==R?T:b)+(/\d+\+?/.exec(u)||"")),"Fennec"==D||"Firefox"==D&&/\b(?:Android|Firefox OS)\b/.test(L))D="Firefox Mobile";else if("Maxthon"==D&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(k))"Xbox 360"==k&&(L=null),"Xbox 360"==k&&/\bIEMobile\b/.test(s)&&C.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(D)&&(!D||k||/Browser|Mobi/.test(D))||"Windows CE"!=L&&!/Mobi/i.test(s))if("IE"==D&&I)try{null===r.external&&C.unshift("platform preview")}catch(s){C.unshift("embedded")}else(/\bBlackBerry\b/.test(k)||/\bBB10\b/.test(s))&&(u=(RegExp(k.replace(/ +/g," *")+"/([.\\d]+)","i").exec(s)||0)[1]||M)?(u=[u,/BB10/.test(s)],L=(u[1]?(k=null,P="BlackBerry"):"Device Software")+" "+u[0],M=null):this!=F&&"Wii"!=k&&(I&&S||/Opera/.test(D)&&/\b(?:MSIE|Firefox)\b/i.test(s)||"Firefox"==D&&/\bOS X (?:\d+\.){2,}/.test(L)||"IE"==D&&(L&&!/^Win/.test(L)&&5.5<M||/\bWindows XP\b/.test(L)&&8<M||8==M&&!/\bTrident\b/.test(s)))&&!q.test(u=e.call(F,s.replace(q,"")+";"))&&u.name&&(u="ing as "+u.name+((u=u.version)?" "+u:""),q.test(D)?(/\bIE\b/.test(u)&&"Mac OS"==L&&(L=null),u="identify"+u):(u="mask"+u,D=w?N(w.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(u)&&(L=null),I||(M=null)),O=["Presto"],C.push(u));else D+=" Mobile";(u=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(s)||0)[1])&&(u=[parseFloat(u.replace(/\.(\d)$/,".0$1")),u],"Safari"==D&&"+"==u[1].slice(-1)?(D="WebKit Nightly",R="alpha",M=u[1].slice(0,-1)):M!=u[1]&&M!=(u[2]=(/\bSafari\/([\d.]+\+?)/i.exec(s)||0)[1])||(M=null),u[1]=(/\bChrome\/([\d.]+)/i.exec(s)||0)[1],537.36==u[0]&&537.36==u[2]&&28<=parseFloat(u[1])&&"WebKit"==O&&(O=["Blink"]),u=I&&(h||u[1])?(O&&(O[1]="like Chrome"),u[1]||((u=u[0])<530?1:u<532?2:u<532.05?3:u<533?4:u<534.03?5:u<534.07?6:u<534.1?7:u<534.13?8:u<534.16?9:u<534.24?10:u<534.3?11:u<535.01?12:u<535.02?"13+":u<535.07?15:u<535.11?16:u<535.19?17:u<536.05?18:u<536.1?19:u<537.01?20:u<537.11?"21+":u<537.13?23:u<537.18?24:u<537.24?25:u<537.36?26:"Blink"!=O?"27":"28")):(O&&(O[1]="like Safari"),(u=u[0])<400?1:u<500?2:u<526?3:u<533?4:u<534?"4+":u<535?5:u<537?6:u<538?7:u<601?8:"8"),O&&(O[1]+=" "+(u+="number"==typeof u?".x":/[.+]/.test(u)?"":"+")),"Safari"==D&&(!M||45<parseInt(M))&&(M=u)),"Opera"==D&&(u=/\bzbov|zvav$/.exec(L))?(D+=" ",C.unshift("desktop mode"),"zvav"==u?(D+="Mini",M=null):D+="Mobile",L=L.replace(RegExp(" *"+u+"$"),"")):"Safari"==D&&/\bChrome\b/.exec(O&&O[1])&&(C.unshift("desktop mode"),D="Chrome Mobile",M=null,L=/\bOS X\b/.test(L)?(P="Apple","iOS 4.3+"):null),M&&0==M.indexOf(u=/[\d.]+$/.exec(L))&&-1<s.indexOf("/"+u+"-")&&(L=G(L.replace(u,""))),O&&!/\b(?:Avant|Nook)\b/.test(D)&&(/Browser|Lunascape|Maxthon/.test(D)||"Safari"!=D&&/^iOS/.test(L)&&/\bSafari\b/.test(O[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(D)&&O[1])&&(u=O[O.length-1])&&C.push(u),C.length&&(C=["("+C.join("; ")+")"]),P&&k&&k.indexOf(P)<0&&C.push("on "+P),k&&C.push((/^on /.test(C[C.length-1])?"":"on ")+k),L&&(u=/ ([\d.+]+)$/.exec(L),l=u&&"/"==L.charAt(L.length-u[0].length-1),L={architecture:32,family:u&&!l?L.replace(u[0],""):L,version:u?u[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(u=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(A))&&!/\bi686\b/i.test(A)?(L&&(L.architecture=64,L.family=L.family.replace(RegExp(" *"+u),"")),D&&(/\bWOW64\b/i.test(s)||I&&/\w(?:86|32)$/.test(a.cpuClass||a.platform)&&!/\bWin64; x64\b/i.test(s))&&C.unshift("32-bit")):L&&/^OS X/.test(L.family)&&"Chrome"==D&&39<=parseFloat(M)&&(L.architecture=64),s=s||null;var x={};return x.description=s,x.layout=O&&O[0],x.manufacturer=P,x.name=D,x.prerelease=R,x.product=k,x.ua=s,x.version=D&&M,x.os=L||{architecture:null,family:null,version:null,toString:function(){return"null"}},x.parse=e,x.toString=n,x.version&&C.unshift(M),x.name&&C.unshift(D),L&&D&&(L!=String(L).split(" ")[0]||L!=D.split(" ")[0]&&!k)&&C.push(k?"("+L+")":"on "+L),C.length&&(x.description=C.join(" ")),x}();H.platform=u,void 0!==(c=function(){return u}.call(f,h,f,l))&&(l.exports=c)}).call(this)}).call(f,h(14)(e),h(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e,t){var n=t.request_start,r=t.request_response_start,i=t.request_response_end,a=t.request_bytes_loaded;f++;var o=void 0,s=void 0;if(0<(s=r?(o=r-n,i-r):i-n)&&0<a){var u=a/s*8e3;h++,d+=a,c+=s,this.data.view_min_request_throughput=Math.min(this.data.view_min_request_throughput||1/0,u),this.data.view_average_request_throughput=d/c*8e3,this.data.view_request_count=f,0<o&&(l+=o,this.data.view_max_request_latency=Math.max(this.data.view_max_request_latency||0,o),this.data.view_average_request_latency=l/h)}}function t(e,t){f++,r++,this.data.view_request_count=f,this.data.view_request_failed_count=r}function n(e,t){f++,i++,this.data.view_request_count=f,this.data.view_request_canceled_count=i}var l=0,d=0,c=0,f=0,h=0,r=0,i=0;this.on("requestcompleted",e),this.on("requestfailed",t),this.on("requestcanceled",n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(o,e,n){var t=(0,g.findMediaElement)(e),r=h(t,3),s=r[0],i=r[1],a=r[2],u=o.log,l=o.utils.getComputedStyle,d=o.utils.secondsToMs,c={automaticErrorTracking:!0};return s?"video"!==a&&"audio"!==a?u.error("The element of `"+i+"` was not a media element."):((n=(0,p.default)(c,n)).data=(0,p.default)({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"3.0.0"},n.data),n.getPlayheadTime=function(){return d(s.currentTime)},n.getStateData=function(){var e=this.hlsjs&&this.hlsjs.url,t=this.dashjs&&f("function"===this.dashjs.getSource)&&this.dashjs.getSource();return{player_is_paused:s.paused,player_playhead_time:d(s.currentTime),player_width:parseInt(l(s,"width")),player_height:parseInt(l(s,"height")),player_autoplay_on:s.autoplay,player_preload_on:s.preload,video_poster_url:s.poster,video_source_url:e||t||s.currentSrc,video_source_duration:d(s.duration),video_source_height:s.videoHeight,video_source_width:s.videoWidth}},s.mux=s.mux||{},s.mux.emit=function(e,t){o.emit(i,e,t)},s.mux.destroy=function(){Object.keys(s.mux.listeners).forEach(function(e){s.removeEventListener(e,s.mux.listeners[e],!1)}),delete s.mux.listeners,o.emit(i,"destroy")},s.mux.swapElement=function(e){var t=(0,g.findMediaElement)(e),n=h(t,3),r=n[0],i=n[1],a=n[2];return r?"video"!==a&&"audio"!==a?o.log.error("The element of `"+i+"` was not a media element."):(r.muxId=s.muxId,delete s.muxId,r.mux=r.mux||{},r.mux.listeners=(0,p.default)({},s.mux.listeners),delete s.mux.listeners,Object.keys(r.mux.listeners).forEach(function(e){s.removeEventListener(e,r.mux.listeners[e],!1),r.addEventListener(e,r.mux.listeners[e],!1)}),r.mux.swapElement=s.mux.swapElement,r.mux.destroy=s.mux.destroy,delete s.mux,void(s=r)):o.log.error("No element was found with the `"+i+"` query selector.")},s.mux.addHLSJS=function(e){o.addHLSJS(i,e)},s.mux.addDashJS=function(e){o.addDashJS(i,e)},s.mux.removeHLSJS=function(){o.removeHLSJS(i)},s.mux.removeDashJS=function(){o.removeDashJS(i)},o.init(i,n),o.emit(i,"playerready"),s.paused||(o.emit(i,"play"),2<s.readyState&&o.emit(i,"playing")),s.mux.listeners={},void m.forEach(function(t){"error"===t&&!n.automaticErrorTracking||(s.mux.listeners[t]=function(){var e={};"error"===t&&(e.player_error_code=s.error&&s.error.code,e.player_error_message=s.error&&y[s.error.code]),o.emit(i,t,e)},s.addEventListener(t,s.mux.listeners[t],!1))})):u.error("No element was found with the `"+i+"` query selector.")};var r=n(1),p=function(e){return e&&e.__esModule?e:{default:e}}(r),g=n(10),m=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],y={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(52),a=r(i),o=n(2),s=r(o),u=n(53),l=r(u),d=n(54),c=r(d),f=n(1),h=r(f),p=n(8),g=r(p),m=n(5),y=n(3),v=r(y),_={};_.safeCall=a.default,_.safeIncrement=s.default,_.getComputedStyle=l.default,_.secondsToMs=c.default,_.assign=h.default,_.headersStringToObject=g.default,_.extractHostnameAndDomain=m.extractHostnameAndDomain,_.extractHostname=m.extractHostname,_.now=v.default.now,t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,n)}catch(e){a.default.info("safeCall error",e)}return i};var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.default.defaultView&&i.default.defaultView.getComputedStyle)return i.default.defaultView.getComputedStyle(e,null).getPropertyValue(t)};var r=n(13),i=function(e){return e&&e.__esModule?e:{default:e}}(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return Math.floor(1e3*e)}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(a,o){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:function(){return{}},u=!1;function n(){function r(){var e=l.default.utils.now(),t=d(o.currentTime());if(u){if(i<t){var n=s();n.viewer_time=e-Math.max(0,t-i),o.off("timeupdate",r),a.mux.emit("adplaying",n)}}else o.off("timeupdate",r)}var i=d(o.currentTime());function t(){o.off("timeupdate",r),e.forEach(function(e){o.off(e,t)})}o.on("timeupdate",r),e.forEach(function(e){o.on(e,t)})}a.on("adstart",function(){u=!0}),a.on("adend",function(){u=!1}),a.on("adserror",function(){u=!1}),t.forEach(function(e){o.on(e,n)})};var r,i=n(0),l=(r=i)&&r.__esModule?r:{default:r},d=l.default.utils.secondsToMs},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var s=r(n(3)),u=r(n(0)),l=r(n(4)),d=r(n(6)),c=r(n(7)),f=r(n(8)),h=r(n(9)),i=r(n(10)),p=u.default.log,g=u.default.utils.assign,m=u.default.utils.safeCall,y=u.default.utils.getComputedStyle,v=u.default.utils.secondsToMs,_=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"];(s.default.registerPlugin||s.default.plugin||function(){u.default.log.error("No valid method to register videojs plugin available.")})("mux",function(e){if(s.default.IS_IE8)return!1;var r=this,n=r.id();function t(){i||r.mux.emit("playerready"),i=!0}(e=g({automaticErrorTracking:!0},e)).data=g({player_software_name:"Video.js",player_software_version:s.default.VERSION||"< 4.11",player_mux_plugin_name:"videojs-mux",player_mux_plugin_version:"3.0.0"},e.data),e.getPlayheadTime=function(){return v(r.currentTime())},e.getStateData=function(){var e=m(r,"videoHeight"),t=m(r,"videoWidth");if(void 0===t||void 0===e){var n=r.el().firstChild;n&&"VIDEO"===n.nodeName.toUpperCase()&&(e=n.videoHeight,t=n.videoWidth)}return{player_is_paused:m(r,"paused"),player_is_fullscreen:m(r,"isFullscreen"),player_autoplay_on:!!m(r,"autoplay"),player_preload_on:m(r,"preload"),player_width:y(r.el(),"width"),player_height:y(r.el(),"height"),player_language_code:m(r,"language"),video_poster_url:m(r,"poster"),video_source_url:m(r,"currentSrc"),video_source_mime_type:m(r,"currentType"),video_source_duration:v(m(r,"duration")||0),video_source_height:e,video_source_width:t}},r.mux=function(){p.error("[videojs-mux] The plugin was initialized more than once.")},r.mux.emit=function(e,t){u.default.emit(n,e,t)},r.mux.log=p,r.mux.utils=u.default.utils,u.default.init(n,e);var i=!1;r.ready(function(){r.addClass("vjs-mux"),l.default.setTimeout(t,0)});var a=!1;r.one("play",t),_.forEach(function(n){"error"===n&&!e.automaticErrorTracking||r.on(n,function(){if(!a){var e={};if("error"===n){var t=m(r,"error");e.player_error_code=t&&t.code,e.player_error_message=t&&t.message}r.mux.emit(n,e)}})});var o=!1;r.on("play",function(){o=!0}),r.on("pause",function(){o=!1}),r.on("adstart",function(){a=!0,o&&r.mux.emit("pause"),r.mux.emit("adbreakstart")}),r.on("adend",function(){r.mux.emit("adbreakend"),a=!1,m(r,"paused")||(r.mux.emit("play"),o=!0,r.onceux&&r.mux.emit("playing"))}),r.ima&&(0,d.default)(r),r.onceux&&(0,h.default)(r),r.ima3&&"function"==typeof r.ima3.ready&&(0,c.default)(r),r.FreeWheelPlugin&&r.FreeWheelPlugin.VERSION&&(0,f.default)(r),r.on("dispose",function(){r.mux.emit("destroy")})}),(0,i.default)(s.default)},function(e,t){e.exports=Xbh},function(n,e,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(e,t(5))},function(yGh,zGh){var AGh;AGh=function(){return this}();try{AGh=AGh||Function("return this")()||eval("this")}catch(yGh){"object"==typeof window&&(AGh=window)}yGh.exports=AGh},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(o){function n(e){var t="function"==typeof(e=e||{}).getAdData?e.getAdData():{},n="function"==typeof e.getAd?e.getAd():{},r="function"==typeof n.getMediaUrl?n.getMediaUrl():t.mediaUrl,i=o.ima.settings||{},a={};return r&&(a.ad_asset_url=r),i.adTagUrl&&(a.ad_tag_url=i.adTagUrl),a}var t=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0;try{var e=window.google.ima.AdEvent.Type;t=e.LOADED,r=e.STARTED,i=e.COMPLETE,a=e.PAUSED,s=e.RESUMED,u=e.SKIPPED}catch(o){t="loaded",r="start",i="complete",a="pause",s="resume",u="skip"}var l=0;o.mux.triggerAdRequest=function(){l++,o.mux.emit("adrequest",n())},o.on("adsready",function(){var e=o.ima.addEventListener||function(){};e(t,function(e){var t=n(e);0<l&&(l--,o.mux.emit("adresponse",t)),o.mux.emit("adplay",t)}),e(r,function(e){var t=n(e);o.mux.emit("adplaying",t)}),e(s,function(e){var t=n(e);o.mux.emit("adplay",t),o.mux.emit("adplaying",t)}),e(a,function(e){var t=n(e);o.mux.emit("adpause",t)}),e(i,function(e){var t=n(e);o.mux.emit("adended",t)}),e(u,function(e){var t=n(e);o.mux.emit("adended",t)}),o.on("adserror",function(){0<l&&(l--,o.mux.emit("adresponse")),o.mux.emit("aderror")})})}},function(e,t,n){"use strict";function i(e){if("string"!=typeof e)return!1;var t=e.split(".").map(function(e){return parseInt(e)}),n=t[0],r=t[1];return 2<n||2===n&&3<=r}Object.defineProperty(t,"__esModule",{value:!0}),t.brightcoveImaAdsEventsSupported=i,t.default=function(r){function e(){var e=r.ima3.currentAd,t=r.ima3.settings,n={};return e&&(n.ad_asset_url=e.mediaUrl),t&&(n.ad_tag_url=t.serverUrl),n}if(i(r.ima3.version)){var t=0,n=function(){0<t&&(t--,r.mux.emit("adresponse",e()))};r.on("ads-request",function(){t++,r.mux.emit("adrequest",e())}),r.on("ads-load",function(){n(),r.mux.emit("adplay",e())}),r.on("adserror",function(){n(),r.mux.emit("aderror")}),r.on("ads-play",function(){r.mux.emit("adplay",e())}),r.on("ads-pause",function(){r.mux.emit("adpause",e())}),r.on("ads-ad-ended",function(){r.mux.emit("adended",e())})}r.ima3.ready(function(){if(r.ima3.adPlayer){i(r.ima3.version)||(r.ima3.adPlayer.on("play",function(){r.mux.emit("adplay")}),r.ima3.adPlayer.on("pause",function(){r.mux.emit("adpause")}),r.ima3.adPlayer.on("ended",function(){r.mux.emit("adended")}));(0,o.default)(r,r.ima3.adPlayer,["pause","ended","adserror"],["play"],e)}else r.mux.log("Legacy IMA3 plugin found, ad events may not track correctly."),r.on("ads-ad-started",function(){r.mux.emit("adplaying",e())}),r.on("ads-play",function(){r.mux.emit("adplaying",e())})})};var r,a=n(1),o=(r=a)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(r){function e(e){var t=r.FreeWheelPlugin,n={};switch(e){case"adplay":case"adplaying":case"adpause":n.ad_asset_url=r.currentSrc()}return t&&(n.ad_tag_url="html5"===t.tech.toLowerCase()?t.settings.Html5.serverUrl:t.settings.Flash.serverUrl),n}r.on("ads-request",function(){r.mux.emit("adrequest",e("adrequest"))}),r.on("ads-load",function(){r.mux.emit("adresponse",e("adresponse"))}),r.on("adserror",function(){r.mux.emit("aderror")}),r.on("ads-ad-started",function(){r.mux.emit("adplay",e("adplay")),r.mux.emit("adplaying",e("adplaying"))}),r.on("ads-play",function(){r.mux.emit("adplay",e("adplay")),r.mux.emit("adplaying",e("adplaying"))}),r.on("ads-pause",function(){r.mux.emit("adpause",e("adpause"))}),r.on("ads-ad-ended",function(){r.mux.emit("adended",e("adended"))}),r.on("adend",function(){r.mux.emit("play")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){(0,a.default)(t,t,["onceux-linearad-pause","onceux-linearad-skipped","onceux-linearad-complete","adserror"],["adstart","onceux-linearad-resume"]),t.on("adstart",function(){t.mux.emit("adplay")}),t.on("onceux-linearad-start",function(e){e.linearAd&&0<e.linearAd.index&&(t.mux.emit("adplay"),t.mux.emit("adplaying"))}),t.on("onceux-linearad-resume",function(){t.mux.emit("adplay")}),t.on("onceux-linearad-pause",function(){t.mux.emit("adpause")}),t.on("onceux-linearad-complete",function(){t.mux.emit("adended")}),t.on("onceux-linearad-skipped",function(){t.mux.emit("adended")})};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(l){if(!a&&"function"==typeof l.getTech){for(var t=(l.getTech("Html5")||{}).sourceHandlers,n=0;n<t.length;n++)!function(){var e=t[n],u=e.handleSource;e.handleSource=function(e,t){var n=u(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});if(n&&"function"==typeof n.xhr)try{var r=l.VERSION.split("."),i=d(r,2),a=i[0],o=i[1];a=parseInt(a),o=parseInt(o);var s=7<=a&&4<=o?n.player().id():n.player_.el_.parentNode.id;(0,c.default)(l(s),n.xhr)}catch(e){}return n}}();a=!0}};var r,i=n(11),c=(r=i)&&r.__esModule?r:{default:r},a=!1},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(i,e){function n(n){return function(e){var t=o.default.utils.now();try{n(e)}catch(e){}try{e.onreadystatechange=function(e,t,n){var r=(0,a.default)(i,e,t);return function(){try{r()}catch(e){}try{n()}catch(e){}}}(e,t,e.onreadystatechange||function(){})}catch(e){}}}var r;e.beforeRequest=(r=e.beforeRequest||function(e){return e},function(e){var t=r(e);return t.beforeSend=n(t.beforeSend||function(){}),t})};var a=r(n(12)),o=r(n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(u,l,d){var c=u.mux.utils.extractHostnameAndDomain,f=u.mux.utils.headersStringToObject,h=0;return function(){var e=l.readyState;if(2<=e){if(h=h||g.default.utils.now(),4!==e)return;if(200<=l.status&&l.status<300){var t=g.default.utils.now(),n="arraybuffer"===l.responseType?l.response.byteLength:l.responseText.length,r=c(l.responseURL),i=p(r,1)[0],a=f(l.getAllResponseHeaders?l.getAllResponseHeaders():""),o=function(e){var t=e["content-type"];return t?t.match(/^audio\/mpegurl/i)?"manifest":t.match(/^audio.*/i)?"audio":t.match(/^video.*/)?"video":t.match(/^application\/x-mpegurl/i)?"manifest":t.match(/^application\/vnd.apple.mpegurl/i)?"manifest":t.match(/^application\/dash+xml/i)?"manifest":"unknown":"unknown"}(a),s={request_start:d,request_response_start:h,request_response_end:t,request_bytes_loaded:n,request_hostname:i,request_response_headers:a,request_type:o};u.mux.emit("requestcompleted",s)}else u.mux.emit("requestfailed")}}};var r,i=n(0),g=(r=i)&&r.__esModule?r:{default:r}}],Zbh.c=$bh,Zbh.d=function(e,t,n){Zbh.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},Zbh.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Zbh.d(t,"a",t),t},Zbh.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Zbh.p="",Zbh(Zbh.s=2);function Zbh(e){if($bh[e])return $bh[e].exports;var t=$bh[e]={i:e,l:!1,exports:{}};return Ybh[e].call(t.exports,t,t.exports,Zbh),t.l=!0,t.exports}var Ybh,$bh})}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):e.videojsIma=t(e.videojs)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;function i(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(t)}i.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},i.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},i.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},i.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},i.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},i.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},i.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},i.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},i.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},i.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},i.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},i.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},i.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},i.prototype.getContentPlayer=function(){return this.h5Player},i.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},i.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},i.prototype.unmute=function(){this.vjsPlayer.muted(!1)},i.prototype.mute=function(){this.vjsPlayer.muted(!0)},i.prototype.play=function(){this.vjsPlayer.play()},i.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},i.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},i.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},i.prototype.getPlayerId=function(){return this.vjsPlayer.id()},i.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},i.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},i.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},i.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},i.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},i.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},i.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},i.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},i.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},i.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},i.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},i.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},i.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},i.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};function a(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",!(this.showCountdown=!0)===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.createAdContainer()}a.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},a.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},a.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},a.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},a.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},a.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},a.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},a.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},a.prototype.updateAdUi=function(e,t,n,r,i){var a=Math.floor(t/60),o=Math.floor(t%60);o.toString().length<2&&(o="0"+o);var s=": ";1<i&&(s=" ("+r+" "+this.controller.getSettings().adLabelNofN+" "+i+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+a+":"+o;var u=100*(e/n);this.progressDiv.style.width=u+"%"},a.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},a.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},a.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},a.prototype.onMouseMove=function(e){this.changeVolume(e)},a.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},a.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},a.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},a.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},a.prototype.reset=function(){this.hideAdContainer()},a.prototype.onAdError=function(){this.hideAdContainer()},a.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},a.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();null!=e&&!e.isLinear()||this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},a.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},a.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container")},a.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container")},a.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},a.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},a.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},a.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},a.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},a.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},a.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},a.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},a.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},a.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},a.prototype.getAdContainerDiv=function(){return this.adContainerDiv},a.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};function o(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},!(this.autoPlayAdBreaks=!0)===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid)}var t="1.8.0",r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(t),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},o.prototype.requestAds=function(){var t=new google.ima.AdsRequest;this.controller.getSettings().adTagUrl?t.adTagUrl=this.controller.getSettings().adTagUrl:t.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(t.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(t.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),t.linearAdSlotWidth=this.controller.getPlayerWidth(),t.linearAdSlotHeight=this.controller.getPlayerHeight(),t.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),t.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),t.setAdWillAutoPlay(this.controller.adsWillAutoplay()),t.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===(void 0===n?"undefined":r(n))&&Object.keys(n).forEach(function(e){t[e]=n[e]}),this.adsLoader.requestAds(t),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:t})},o.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.controller.getIsMobile()&&(this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this))),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},o.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},o.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},o.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},o.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},o.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},o.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},o.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},o.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},o.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},o.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},o.prototype.onAdPaused=function(){this.controller.onAdsPaused()},o.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},o.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},o.prototype.onAdLog=function(e){this.controller.onAdLog(e)},o.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=0<n?n:0;var r=0,i=void 0;this.currentAd.getAdPodInfo()&&(i=this.currentAd.getAdPodInfo().getAdPosition(),r=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,i,r)}},o.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},o.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},o.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},o.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},o.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},o.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},o.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},o.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},o.prototype.getCurrentAd=function(){return this.currentAd},o.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},o.prototype.isAdPlaying=function(){return this.adPlaying},o.prototype.isAdMuted=function(){return this.adMuted},o.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},o.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},o.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},o.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},o.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},o.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},o.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},o.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},o.prototype.getAdsManager=function(){return this.adsManager};function n(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},r=this.extend({},n,t.contribAdsSettings||{});this.playerWrapper=new i(e,r,this),this.adUi=new a(this),this.sdkImpl=new o(this)}n.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!(o.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1}),disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},n.prototype.initWithSettings=function(e){this.settings=this.extend({},n.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),!(this.showCountdown=!0)===this.settings.showCountdown&&(this.showCountdown=!1)},n.prototype.warnAboutDeprecatedSettings=function(){var t=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach(function(e){void 0!==t.settings[e]&&console.warn("WARNING: videojs.ima setting "+e+" is deprecated")})},n.prototype.getSettings=function(){return this.settings},n.prototype.getIsMobile=function(){return this.isMobile},n.prototype.getIsIos=function(){return this.isIos},n.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},n.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},n.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},n.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},n.prototype.requestAds=function(){this.sdkImpl.requestAds()},n.prototype.setSetting=function(e,t){this.settings[e]=t},n.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},n.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},n.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},n.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},n.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},n.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},n.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},n.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},n.prototype.showAdContainer=function(){this.adUi.showAdContainer()},n.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},n.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},n.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},n.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},n.prototype.onAdPlayheadUpdated=function(e,t,n,r,i){this.adUi.updateAdUi(e,t,n,r,i)},n.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},n.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},n.prototype.playContent=function(){this.playerWrapper.play()},n.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},n.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},n.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},n.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},n.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},n.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},n.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},n.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},n.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},n.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},n.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},n.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},n.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},n.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},n.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},n.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},n.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},n.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},n.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},n.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},n.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},n.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},n.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},n.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},n.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},n.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},n.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},n.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},n.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},n.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},n.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},n.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},n.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},n.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},n.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},n.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)},n.prototype.extend=function(e){for(var t=void 0,n=void 0,r=void 0,i=arguments.length,a=Array(1<i?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];for(n=0;n<a.length;n++)for(r in t=a[n])t.hasOwnProperty(r)&&(e[r]=t[r]);return e};function s(e,t){this.controller=new n(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)}return(e.registerPlugin||e.plugin)("ima",function(e){this.ima=new s(this,e)}),s}),videojs.addLanguage("cs",{Play:"Přehrát","Play Video":"Přehrát video",Pause:"Pauza","Current Time":"Aktuální čas","Duration Time":"Doba trvání","Remaining Time":"Zbývající čas","Stream Type":"Stream Type",LIVE:"LIVE",Loaded:"Načteno",Progress:"Stav",Fullscreen:"Celá obrazovka","Non-Fullscreen":"Zmenšená obrazovka","Full width":"Plná šířka","Default size":"Výchozí velikost","Audio channels 6":"Zvuk 5.1","Audio channels 8":"Zvuk 7.1","UHD profile":"Kvalita UHD",Mute:"Ztlumit zvuk",Unmute:"Přehrát zvuk","Playback Rate":"Rychlost přehrávání",Subtitles:"Titulky","subtitles off":"Titulky vypnuty",Captions:"Popisky","captions off":"OFF",Chapters:"Kapitoly","You aborted the media playback":"Přehrávání videa je přerušeno.","A network error caused the media download to fail part-way.":"Video nemohlo být načteno, kvůli chybě v síti. Zkuste prosím znovu načíst stránku.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video nemohlo být načteno, buď kvůli chybě serveru nebo sítě nebo proto, že daný formát není podporován. Zkuste prosím znovu načíst stránku.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Váš prohlížeč nepodporuje formát videa.","The media playback was aborted because too many consecutive download errors occurred.":"Přehrávání médií bylo přerušeno, jelikož došlo k mnoha chybám při stahování. Zkuste prosím znovu načíst stránku.","No compatible source was found for this video.":"Špatně zadaný zdroj videa.","The media is encrypted and we do not have the keys to decrypt it.":"Nebyl nalezen klíč k dešifrování zabezpečeného obsahu. Zkuste prosím znovu načíst stránku, případně kontaktovat zákaznickou podporu.","DRM not supported":"DRM neni podporované","The media cannot be played because it requires encryption features that your browser does not support.":"Média nelze přehrát, protože vyžadují funkce šifrování, které váš prohlížeč nepodporuje.","Manifest type unsupported":"Typ manifestu není podporován","Codec is not supported":"Kodek není podporován","No streams to play.":"Žádné streamy k přehrávání.","Error creating stream.":"Při vytváření streamu došlo k chybě.","Parsing the manifest failed":"Parsování manifestu selhalo","Manifest error.":"Chyba manifestu","Share video":"Sdílet video",Next:"Následující",Previous:"Předchozí",Auto:"Auto","quality level":"Úroveň kvality","Video quality":"Kvalita videa","Video language":"Jazyk videa","Player version":"Verze přehrávače",MIN:"MIN",MAX:"MAX","Seek hints":"Doporučené",Settings:"Nastavení","TT OFF":"OFF","cancel timeshifting":"Přehrát živě","h ago":"h zpět",delay:"zpoždění","- 2 .. 48h":"- 2 .. 48h","48h ago":"48h zpět","No playable source found. Is your browser up to date?":"Žádný podporovaný zdroj videa nenalezen. Používáte aktuální verzi browseru?","No source found. Please contact our web support when this error occurs.":"Žádný zdroj nenalezen. Prosím kontaktujte naší podporu, pokud tato chyba nastane.","Play next":"Přehrát následující","Cancel autoplay":"Zrušit autoplay","To copy to clipboard, click on link.":"Pro zkopírování klikněte na odkaz","Link copied successfully.":"Link úspěšně zkopírován",Advertisement:"Reklama","Skip ad in":"Přeskočit reklamu za","Skip ad":"Přeskočit reklamu","Close Ad":"Zavřít reklamu","Ad playing":"Přehrává se reklama","Ad playing (skip ad in {countdown}s)":"Reklama (Přeskočit za {countdown}s)","{curr}/{count} ad playing (skip ad in {countdown}s)":"{curr}. reklama ze {count} (Přeskočit za {countdown}s)","{curr}. ad playing":"Přehrává se {curr}. reklama","Continue to play the ad":"Pokračovat v reklamě","Ad playing {curr}/{count}":"Přehrává se reklama {curr}/{count}","Ads will be played":"Za chvíli se začnou přehrávat reklamy","{adCount} ad will be played after {time}s":"{adCount} reklama se začne přehrávat za {time}s","{>1<5adCount} ad will be played after {time}s":"{>1<5adCount} reklamy se začnou přehrávat za {time}s","{>=5adCount} ad will be played after {time}s":"{>=5adCount} reklam se začne přehrávat za {time}s","Ad will be played after {time}s":"Reklama se začne přehrávat za {time}s","Ads will be played after {time}s":"Reklamy se začnou přehrávat za {time}s","Turn off ads":"Vypnout reklamy","Nielsen Measurement":"Měření Nielsen",'This application includes Nielsen Digital Measurement software. For more information or for deactivation continue to <a target="_blank" href="http://cdn-gl.imrworldwide.com/priv/browser/cz/cs/optout.html">Nielsen Digital Measurement</a>':'Tato aplikace obsahuje měřicí software společnosti Nielsen. Pro více informací nebo pro deaktivaci pokračujte na <a target="_blank" href="http://cdn-gl.imrworldwide.com/priv/browser/cz/cs/optout.html">Nielsen Digital Measurement</a>',"This application includes Nielsen Digital Measurement software, which allows users to contribute to market research.":"Tato aplikace obsahuje měřicí software společnosti Nielsen, který uživatelům umožňuje přispívat k průzkumu trhu.",'If you want to know more about data which can be Nielsen software gathering and about your possibilities of deactivating the measurement, read please rules of personal information protection from <a target="_blank" href="http://cdn-gl.imrworldwide.com/priv/browser/cz/cs/optout.html">Nielsen Digital Measurement</a>.':'Chcete-li se dozvědět více o informacích, které může software Nielsen shromažďovat a o vaší možnosti měření deaktivovat, přečtěte si zásady ochrany osobních údajů <a target="_blank" href="http://cdn-gl.imrworldwide.com/priv/browser/cz/cs/optout.html">Nielsen Digital Measurement</a>.',"Measurement of playback quality":"Měření kvality přehrávání","Copied to clipboard":"Zkopírováno do schránky","Please reload browser to view your ID":"Pro zobrazení vašeho ID prosím obnovte prohlížeč","With the help of targeted quality measurement, we are able to diagnose a possible source of the problem directly on your device in case of problems with video playback.":"Pomoci cíleného měření kvality jsme schopní v případě potíží s přehráváním videí diagnostikovat možný zdroj problémů přímo na vašem zařízení.","If you enable this option, our technical support staff will be able to assist you more effectively in resolving issues.":"Pokud aktivujete tuto volbu, budou pracovníci naší technické podpory schopní vám efektivněji asistovat při řešení problémů","Send user report":"Odeslat uživatelský report chyb","Turn on the sound":"Zapnout zvuk","Live restart":"Live restart","Timeshift is not allowed":"Časový posun není povolen","The provided user cannot use the timeshift feature, the product does not allow the timeshift feature or the timeshift feature cannot be used at the specific moment.":"Poskytovaný uživatel nemůže použít funkci časového posunu, produkt neumožňuje funkci časového posunu nebo funkci časového posunu nelze použít v konkrétním okamžiku.","Key System not supported":"Systém ochrany obsahu není podporován, prosíme zkuste v jiném prohlížeči.","Could not create MediaKeys":"Nelze vytvořit klíč k dešifrování obsahu, prosíme zkuste načíst znovu stránku.","Could not create key session":"Nelze vytvořit relaci klíčů k dešifrování obsahu, prosíme zkuste načíst znovu stránku.","Failed to retrieve the server certificate.":"Nepodařilo se načíst certifikát serveru, prosíme zkuste načíst znovu stránku.","Decryption key was added to the session.":"Do relace byl přidán dešifrovací klíč.","A decryption key error was encountered.":"Došlo k chybě licence pro přehrání nebo vypršela, prosíme zkuste načíst znovu stránku.","The license request failed.":"Žádost o licenci se nezdařila, prosíme zkuste načíst znovu stránku.","A video playback error occurred.":"Došlo k chybě přehrávání videa, prosíme zkuste načíst znovu stránku."}),videojs.addLanguage("en",{"Key System not supported":"Content protection system is not supported, please try in another browser.","Could not create MediaKeys":"Unable to create content decryption key, please try to reload the page.","Could not create key session":"Unable to create content decryption key session, please try to reload the page.","Failed to retrieve the server certificate.":"Failed to retrieve the server certificate, please try to reload the page.","Decryption key was added to the session.":"Decryption key was added to the session.","A decryption key error was encountered.":"A playback license error was encountered or the license expired, please try to reload the page.","The license request failed.":"The license request failed, please try to reload the page.","A video playback error occurred.":"A video playback error occurred, please try to reload the page."});
</script>

</body>
</html>
