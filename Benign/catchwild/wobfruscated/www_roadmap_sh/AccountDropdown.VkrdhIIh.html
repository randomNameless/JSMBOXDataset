<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>AccountDropdown.VkrdhIIh.html</title>
</head>
<body>
<script>import{j as e}from"./jsx-runtime.CAnB4H9Z.js";import{r as a}from"./index.qVDZzPEr.js";import{s as A,g as D,i as C}from"./jwt.sIZnHaRF.js";import{l as E}from"./navigation.CQfjFOY2.js";import{c as g}from"./classname.UU0x-ExZ.js";import"./js.cookie.Cz0CWeBA.js";import{c as v}from"./createLucideIcon.B2f9aZIW.js";import{U as S}from"./users-round.DrvJMUeI.js";import{P as R}from"./plus.CqHoaI-B.js";import{M as $}from"./map.3xYtpeBB.js";import{C as _}from"./chevron-right.DxEHZRzj.js";import{c as I}from"./team.MAkNnuzh.js";import{b as L,a as T}from"./http.CB1FD-eS.js";import{u as O}from"./use-toast.BdCcSTJE.js";import{u as U}from"./index.CPYs184K.js";import{C as z}from"./chevron-left.BUG50K49.js";import{U as H}from"./users.C3W42wgN.js";import{u as G}from"./use-outside-click.DwmohMvh.js";import{C as W}from"./CreateRoadmapModal.N0IPf1L3.js";import{M as q}from"./Modal.DMBlPTZH.js";import{i as Y,p as j}from"./page.D5N0TZSR.js";import{C as B}from"./check.BMbSwrck.js";import{A as K}from"./arrow-up-right.B4DreX1B.js";import{u as V}from"./use-scroll-position.C3vF9jlf.js";import{X}from"./x.sFylzpJT.js";import{C as J}from"./chevron-down.CkbxXVDT.js";import"./bundle-mjs.mQ1NDWkS.js";import"./index.BPwFWaRy.js";import"./index.3whys8t3.js";import"./toast.DlejBBdi.js";import"./loader-circle.C7OHkwSZ.js";import"./use-keydown.DHXzDwpw.js";/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=v("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("SquareUserRound",[["path",{d:"M18 21a6 6 0 0 0-12 0",key:"kaz2du"}],["circle",{cx:"12",cy:"11",r:"4",key:"1gt34v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=v("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);function M(p){const{className:s=""}=p;return e.jsxs("span",{className:g("absolute -top-1 right-0 h-3 w-3 text-xs uppercase tracking-wider",s),children:[e.jsx("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-green-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex h-3 w-3 rounded-full bg-green-500"})]})}function se(p){const{setIsTeamsOpen:s,onCreateRoadmap:o,onOnboardingClick:r,isConfigLoading:n=!0,shouldShowOnboardingStatus:d=!1,onboardingConfigCount:u,doneConfigCount:m}=p;return e.jsxs("ul",{children:[d&&e.jsx("li",{className:"mb-1 px-1",children:e.jsxs("button",{className:g("flex h-9 w-full items-center rounded py-1 pl-3 pr-2 text-sm font-medium text-slate-100 hover:opacity-80",n?"striped-loader-darker flex border-slate-800 opacity-70":"border-slate-600 bg-slate-700"),onClick:r,disabled:n,children:[e.jsx(M,{className:"-left-0.5 -top-0.5"}),n?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 text-slate-400 group-hover:text-white"}),e.jsx("span",{children:"Onboarding"}),e.jsxs("span",{className:"ml-auto flex items-center gap-1.5 text-xs text-slate-400",children:[m," of ",u]})]})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(te,{className:"h-4 w-4 stroke-[2.5px] text-slate-400 group-hover:text-white"}),"Account"]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account/update-profile",className:"group flex items-center justify-between gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4 stroke-[2.5px] text-slate-400 group-hover:text-white"}),"My Profile"]}),e.jsx("span",{className:"rounded-sm bg-yellow-300 px-1 text-xs uppercase tracking-wide text-black",children:"New"})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("a",{href:"/account/friends",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(S,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Friends"]})}),e.jsx("li",{className:"mt-1 border-t border-t-gray-700/60 px-1 pt-1",children:e.jsxs("button",{onClick:()=>{o()},className:"group flex w-full items-center gap-2 rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx(R,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"New Roadmap"]})}),e.jsx("li",{className:"border-b border-b-gray-700/60 px-1 pb-1",children:e.jsxs("a",{href:"/account/roadmaps",className:"group flex items-center gap-2 rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:[e.jsx($,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Roadmaps"]})}),e.jsx("li",{className:"px-1 pt-1",children:e.jsxs("button",{className:"group flex w-full items-center justify-between rounded py-2 pl-3 pr-2 text-sm font-medium text-slate-100 hover:bg-slate-700",onClick:()=>s(!0),children:[e.jsxs("span",{className:"flex items-center gap-2.5",children:[e.jsx(S,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Teams"]}),e.jsx(_,{className:"h-4 w-4 shrink-0 stroke-[2.5px] text-slate-400 group-hover:text-white"})]})}),e.jsx("li",{className:"px-1",children:e.jsxs("button",{className:"group flex w-full items-center gap-2 rounded py-2 pl-3 pr-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",type:"button",onClick:E,children:[e.jsx(Z,{className:"h-4 w-4 stroke-[2px] text-slate-400 group-hover:text-white"}),"Logout"]})})]})}function ae(p){const{setIsTeamsOpen:s}=p,o=O(),r=U(I),[n,d]=a.useState(!0);async function u(){if(r.length>0)return;d(!0);const{response:i,error:l}=await L("https://roadmap.sh/api/v1-get-user-teams");if(l||!i){o.error(l?.message||"Something went wrong");return}I.set(i)}a.useEffect(()=>{u().finally(()=>d(!1))},[]);const m=n&&e.jsxs("div",{className:"mt-2 flex animate-pulse flex-col gap-1 px-1 text-center",children:[e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("button",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",onClick:()=>s(!1),children:e.jsx(z,{className:"h-4 w-4 stroke-[2.5px]"})}),e.jsx("a",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",href:"/team/new",children:e.jsx(R,{className:"h-4 w-4 stroke-[2.5px]"})})]}),m,!n&&e.jsxs("ul",{className:"mt-2",children:[r?.map(i=>{let l="";return i.status==="invited"?l=`/respond-invite?i=${i.memberId}`:i.status==="joined"&&(l=`/team/activity?t=${i._id}`),e.jsx("li",{className:"px-1",children:e.jsx("a",{href:l,className:"block truncate rounded px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:i.name})},i._id)}),r.length===0&&!n&&e.jsx("li",{className:"mt-2 px-1 text-center",children:e.jsxs("p",{className:"block rounded px-4 py-2 text-sm font-medium text-slate-500",children:[e.jsx(H,{className:"mx-auto mb-2 h-7 w-7 text-slate-600"}),"No teams found."," ",e.jsx("a",{className:"font-medium text-slate-400 underline underline-offset-2 hover:text-slate-300",href:"/team/new",children:"Create a team"}),"."]})})]})]})}const y="should_nudge_onboarding";function re(p){const{onStartOnboarding:s}=p,[o,r]=a.useState(!1),n=U(Y),{y:d}=V();return a.useEffect(()=>{localStorage.getItem(y)===null&&localStorage.setItem(y,"true")},[]),localStorage.getItem(y)!=="true"||d<100||n?null:e.jsx("div",{className:g("fixed left-0 right-0 top-0 z-[91] flex w-full items-center justify-center border-b border-b-yellow-500/30 bg-yellow-300 pb-2 pt-1.5",{"striped-loader":o}),children:e.jsxs("p",{className:"text-base font-semibold text-yellow-950",children:["Welcome! Please take a moment to"," ",e.jsx("button",{type:"button",onClick:()=>{r(!0),localStorage.setItem(y,"false"),s()},className:"underline",children:"complete onboarding"}),e.jsx("button",{type:"button",className:"relative top-[3px] ml-1 px-1 py-1 text-yellow-600 hover:text-yellow-950",onClick:u=>{u.stopPropagation(),localStorage.setItem(y,"false"),r(!0)},children:e.jsx(X,{className:"h-4 w-4",strokeWidth:3})})]})})}function oe(p){const{onboardingConfig:s,onClose:o,onIgnoreTask:r}=p,n=O(),[d,u]=a.useState(null),m=a.useMemo(()=>[{id:"updateProgress",title:"Update your Progress",description:"Mark your progress on roadmaps",status:s?.onboarding?.updateProgress||"pending",url:"/roadmaps",urlText:"Roadmaps List"},{id:"publishProfile",title:"Claim a Username",description:"Optionally create a public profile to share your skills",status:s?.onboarding?.publishProfile||"pending",url:"/account/update-profile",urlText:"Update Profile"},{id:"customRoadmap",title:"Custom Roadmaps",description:"Create your own roadmap from scratch",status:s?.onboarding?.customRoadmap||"pending",url:"https://draw.roadmap.sh",urlText:"Create Roadmap"},{id:"addFriends",title:"Invite your Friends",description:"Invite friends to join you on roadmaps",status:s?.onboarding?.addFriends||"pending",url:"/account/friends",urlText:"Add Friends",onClick:()=>{i("addFriends","done","Updating status..").finally(()=>j.set(""))}},{id:"roadCard",title:"Create your Roadmap Card",description:"Embed your skill card on your github or website",status:s?.onboarding?.roadCard||"pending",url:"/account/road-card",urlText:"Create Road Card",onClick:()=>{i("roadCard","done","Updating status..").finally(()=>j.set(""))}},{id:"inviteTeam",title:"Invite your Team",description:"Invite your team to collaborate on roadmaps",status:s?.onboarding?.inviteTeam||"pending",url:"/team/new",urlText:"Create Team"}],[s]),i=async(t,c,h="Ignoring Task")=>{j.set(h);const{response:w,error:f}=await T("https://roadmap.sh/api/v1-update-onboarding-config",{id:t,status:c});if(f||!w){n.error(f?.message||"Failed to ignore task");return}r?.(t,c),u(null)},l=async()=>{const{response:t,error:c}=await T("https://roadmap.sh/api/v1-ignore-onboarding-forever",{});if(c||!t){n.error(c?.message||"Failed to ignore onboarding");return}A(t.token),window.location.reload()},b=m.every(t=>t.status==="done"||t.status==="ignored");return a.useEffect(()=>{b&&(j.set("Finishing Onboarding"),l().finally(()=>{}))},[b]),e.jsxs(q,{onClose:o,bodyClassName:"text-black h-auto",children:[e.jsxs("div",{className:"px-4 pb-2 pl-11 pt-4",children:[e.jsx("h2",{className:"mb-0.5 text-xl font-semibold",children:"Welcome to roadmap.sh"}),e.jsx("p",{className:"text-balance text-sm text-gray-500",children:"Complete the tasks below to get started!"})]}),e.jsx("ul",{className:g("flex flex-col divide-y",{"border-b":m[m.length-1]?.status==="done"}),children:m.map((t,c)=>{const h=t.status==="done",w=d?.id===t.id;return e.jsx("li",{"data-active":w,"data-status":t.status,className:g("group/task px-4 py-2.5",{"bg-gray-100":h,"border-t":c===0&&h}),children:e.jsxs("div",{className:g("flex items-start gap-2",{"opacity-50":t.status==="done"}),children:[e.jsx("span",{className:"relative top-px flex h-5 w-5 items-center justify-center",children:h?e.jsx(B,{className:"h-4 w-4 stroke-[3px] text-green-500"}):e.jsx("div",{className:g("h-4 w-4 rounded-md border border-gray-300",t.status==="ignored"?"bg-gray-200":"bg-transparent")})}),e.jsxs("div",{className:"group-data-[status=ignored]/task:text-gray-400",children:[e.jsxs("h3",{className:"flex items-center text-sm font-semibold group-data-[status=done]/task:line-through",children:[t.title,e.jsxs("a",{href:t.url,target:"_blank",className:g("ml-1 inline-block rounded-xl border border-black bg-white pl-1.5 pr-1 text-xs font-normal text-black hover:bg-black hover:text-white"),"aria-label":"Open task in new tab",onClick:()=>{t?.onClick&&t.onClick()},children:[t.urlText,e.jsx(K,{className:"relative -top-[0.5px] ml-0.5 inline-block h-3.5 w-3.5 stroke-[2px]"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 group-data-[status=ignored]/task:text-gray-400",children:t.description})]})]})},t.id)})}),e.jsxs("div",{className:"mt-2 px-11 pb-5",children:[e.jsx("button",{className:"w-full rounded-md bg-gradient-to-r from-purple-500 to-purple-700 px-4 py-2 text-sm font-medium text-white hover:from-purple-500 hover:to-purple-600",onClick:o,children:"Do it later"}),e.jsx("button",{className:"mt-3 text-sm text-gray-500 underline underline-offset-2 hover:text-black",onClick:()=>{j.set("Ignoring Onboarding"),l().finally()},children:"Ignore forever"})]})]})}function Ee(){const p=O(),s=a.useRef(null),[o,r]=a.useState(!1),[n,d]=a.useState(!1),[u,m]=a.useState(!1),[i,l]=a.useState(!1),[b,t]=a.useState(!1),[c,h]=a.useState(void 0),f=D()?.onboardingStatus==="pending"||c?.onboardingStatus==="pending",N=async()=>{if(!C()||!f)return;l(!0);const{response:x,error:k}=await L("https://roadmap.sh/api/v1-get-onboarding-config");(k||!x)&&p.error(k?.message||"Failed to load onboarding config"),h(x)};if(G(s,()=>{r(!1),d(!1),l(!0)}),a.useEffect(()=>{!C()||!o||N().finally(()=>{l(!1)})},[o]),a.useEffect(()=>{const x=()=>{N().finally(()=>{l(!1)})};return window.addEventListener("visibilitychange",x),()=>{window.removeEventListener("visibilitychange",x)}},[]),!C())return null;const F=Object.values(c?.onboarding||{}).filter(x=>x!=="pending").length,P=Object.keys(c?.onboarding||{}).length;return e.jsxs(e.Fragment,{children:[f&&!b&&e.jsx(re,{onStartOnboarding:()=>{N().then(()=>{t(!0)})}}),e.jsxs("div",{className:"relative z-[90] animate-fade-in",children:[b&&c&&e.jsx(oe,{onboardingConfig:c,onClose:()=>{t(!1)},onIgnoreTask:(x,k)=>{N().finally(()=>{})}}),u&&e.jsx(W,{onClose:()=>{m(!1)}}),e.jsxs("button",{className:"relative flex h-8 w-40 items-center justify-center gap-1.5 rounded-full bg-gradient-to-r from-purple-500 to-purple-700 px-4 py-2 text-sm font-medium text-white hover:from-purple-500 hover:to-purple-600",onClick:()=>{d(!1),r(!o)},children:[e.jsxs("span",{className:"inline-flex items-center",children:["Account ",e.jsx("span",{className:"text-gray-300",children:"/"})," Teams"]}),e.jsx(J,{className:"h-4 w-4 shrink-0 stroke-[2.5px]"}),f&&!o&&e.jsx(M,{})]}),o&&e.jsx("div",{ref:s,className:"absolute right-0 z-50 mt-2 min-h-[152px] w-48 rounded-md bg-slate-800 py-1 shadow-xl",children:n?e.jsx(ae,{setIsTeamsOpen:d}):e.jsx(se,{onCreateRoadmap:()=>{m(!0),r(!1)},setIsTeamsOpen:d,onOnboardingClick:()=>{t(!0),r(!1)},shouldShowOnboardingStatus:f,isConfigLoading:i,onboardingConfigCount:P,doneConfigCount:F})})]})]})}export{Ee as AccountDropdown};</script>
</body>
</html>
