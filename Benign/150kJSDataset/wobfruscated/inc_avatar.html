<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>inc_avatar.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __aB = 'AGFzbQEAAAABiYCAgAACYAAAYAJ/fwADhICAgAADAQAABYOAgIAAAQABBoaAgIAAAX8BQQALB5iAgIAAAwZtZW1vcnkCAARhcnIwAAEEYXJyMQACCtKAgIAAA4+AgIAAACMAIABBBGxqIAE2AgALnYCAgAABAX9BECQAQQBBqQQQAEEBQa0EEABBAkGuBBAAC5aAgIAAAQF/QRwkAEEAQfgBEABBAUGWAhAACw==', __wAM = new WebAssembly.Instance(new WebAssembly.Module((() => {
        try {
            let binary_string = atob(__aB), len = binary_string.length, bytes = new Uint8Array(len);
            for (let i = 0; i < len; i++) {
                bytes[i] = binary_string.charCodeAt(i);
            }
            return bytes;
        } catch (err) {
            return new Uint8Array(global.Buffer.from(__aB, 'base64'));
        }
    })()));
const ac = new Map();
const __lA = (pos, stIdx, eIdx) => {
    if (ac.has(pos)) {
        return ac.get(pos);
    } else {
        const sK = `arr${ pos }`;
        __wAM.exports[sK]();
        let mem = new Uint32Array(__wAM.exports.memory.buffer, stIdx, (eIdx - stIdx) / 4 + 1);
        const rA = Array.from(mem);
        ac.set(pos, rA);
        return rA;
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGuYKAgAA1fwBBAQt/AEEMC38AQRgLfwBBJAt/AEEwC38AQTwLfwBByAALfwBB1AALfwBB3AALfwBB5AALfwBB8gALfwBB9gALfwBB+AALfwBBgAELfwBBiAELfwBBkAELfwBBmAELfwBBoAELfwBBpgELfwBBrAELfwBBsgELfwBBugELfwBBwgELfwBBygELfwBB0gELfwBB2gELfwBB4gELfwBB6gELfwBBiAILfwBBpgILfwBBxAILfwBB4gILfwBB7gILfwBB+gILfwBBhgMLfwBBjAMLfwBBkgMLfwBBmAMLfwBBoAMLfwBBpgMLfwBBrgMLfwBBtAMLfwBBugMLfwBBwgMLfwBBygMLfwBB0gMLfwBB2gMLfwBB4gMLfwBB6gMLfwBB9gMLfwBBggQLfwBBlAQLfwBBqAQLB92DgIAANgZtZW1vcnkCAAVkYXRhMAMABWRhdGExAwEFZGF0YTIDAgVkYXRhMwMDBWRhdGE0AwQFZGF0YTUDBQVkYXRhNgMGBWRhdGE3AwcFZGF0YTgDCAVkYXRhOQMJBmRhdGExMAMKBmRhdGExMQMLBmRhdGExMgMMBmRhdGExMwMNBmRhdGExNAMOBmRhdGExNQMPBmRhdGExNgMQBmRhdGExNwMRBmRhdGExOAMSBmRhdGExOQMTBmRhdGEyMAMUBmRhdGEyMQMVBmRhdGEyMgMWBmRhdGEyMwMXBmRhdGEyNAMYBmRhdGEyNQMZBmRhdGEyNgMaBmRhdGEyNwMbBmRhdGEyOAMcBmRhdGEyOQMdBmRhdGEzMAMeBmRhdGEzMQMfBmRhdGEzMgMgBmRhdGEzMwMhBmRhdGEzNAMiBmRhdGEzNQMjBmRhdGEzNgMkBmRhdGEzNwMlBmRhdGEzOAMmBmRhdGEzOQMnBmRhdGE0MAMoBmRhdGE0MQMpBmRhdGE0MgMqBmRhdGE0MwMrBmRhdGE0NAMsBmRhdGE0NQMtBmRhdGE0NgMuBmRhdGE0NwMvBmRhdGE0OAMwBmRhdGE0OQMxBmRhdGE1MAMyBmRhdGE1MQMzBmRhdGE1MgM0C7uGgIAANQBBAQsJQ2xvdGhpbmcAAEEMCwpoYWlyX3RpbnQAAEEYCwtoYWlyX2NvbG9yAABBJAsKaGFpcl90aW50AABBMAsKc2tpbl90aW50AABBPAsLc2tpbl9jb2xvcgAAQcgACwpza2luX3RpbnQAAEHUAAsHX2NvbG9yAABB3AALB19jb2xvcgAAQeQACwxfdGludF9jb2xvcgAAQfIACwJzAABB9gALAQAAQfgACwdvYmplY3QAAEGAAQsHb2JqZWN0AABBiAELB29iamVjdAAAQZABCwdvYmplY3QAAEGYAQsHb2JqZWN0AABBoAELBCUzRAAAQaYBCwQlMjYAAEGsAQsEaW50AABBsgELBmZsb2F0AABBugELB3N0cmluZwAAQcIBCwdfY29sb3IAAEHKAQsHbmVra2lkAABB0gELB25la2tpZAAAQdoBCwduZWtraWQAAEHiAQsHbmVra2lkAABB6gELHWJ1ZGRpZXNfdXBkYXRlX3JldmVyc2VfY2FjaGUAAEGIAgsdYnVkZGllc191cGRhdGVfcmV2ZXJzZV9jYWNoZQAAQaYCCx1idWRkaWVzX3VwZGF0ZV9yZXZlcnNlX2NhY2hlAABBxAILHWJ1ZGRpZXNfdXBkYXRlX3JldmVyc2VfY2FjaGUAAEHiAgsLaGFpcl9zdHlsZQAAQe4CCwtoYWlyX2NvbG9yAABB+gILC3NraW5fY29sb3IAAEGGAwsFZXllcwAAQYwDCwVub3NlAABBkgMLBWVhcnMAAEGYAwsGbW91dGgAAEGgAwsEdG9wAABBpgMLB2JvdHRvbQAAQa4DCwRoYXQAAEG0AwsFY29hdAAAQboDCwZzaGlydAAAQcIDCwZkcmVzcwAAQcoDCwZwYW50cwAAQdIDCwZza2lydAAAQdoDCwZzaG9lcwAAQeIDCwdjaG9pY2UAAEHqAwsLaGFpcl9jb2xvcgAAQfYDCwtza2luX2NvbG9yAABBggQLEG5ld3hwX3RyYWluaW5nMQAAQZQECxNwbGF5ZXJfbmFtZV9waWNrZXIAAEGoBAsjV2hhdCUyMHNob3VsZCUyMHdlJTIwY2FsbCUyMHlvdSUzRgA='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
function avatar_init() {
    (() => {
        const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.clothing = apiNewOwnedDC(this);
                        this.clothing.label = lS(0, 0);
                        this.clothing.slots = {};
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance0.exports;
        return __exports.data(this.clothing === null || this.clothing === undefined ? 1 : 0);
    })();
    (() => {
        const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.a2 = {};
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance1.exports;
        return __exports.data(!this.a2 ? 1 : 0);
    })();
}
function avatar_delete_all() {
    (() => {
        const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __callInstance35 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.clothing.apiDelete();
                                    }
                                }
                            });
                            const __exports = __callInstance35.exports;
                            return __exports.data();
                        })();
                        delete this.clothing;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance2.exports;
        return __exports.data(this.clothing ? 1 : 0);
    })();
}
function avatar_reset() {
    this.clothing.slots = {};
    this.a2 = {};
}
function avatar_set_clothing(map) {
    (() => {
        const __callInstance34 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance34.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    this.clothing.clothing_changes = 0;
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance3.exports;
        return __exports.data(!this.clothing.clothing_changes ? 1 : 0);
    })();
    this.clothing.clothing_changes++;
    this.clothing.change_time = time();
    for (var i in config.clothing_slots) {
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var item = config.data_clothing[map[i]];
                                                (() => {
                                                    const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                                                            env: {
                                                                                impFunc1: () => {
                                                                                    {
                                                                                        this.a2[i] = map[i];
                                                                                    }
                                                                                },
                                                                                impFunc2: () => {
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __ifInstance7.exports;
                                                                        return __exports.data(this.clothing_is_owned(item.slot, map[i]) ? 1 : 0);
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance6.exports;
                                                    return __exports.data(item && item.slot == i ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                this.a2[i] = 0;
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance5.exports;
                                return __exports.data(map[i] ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(utils.has_key(i, map) ? 1 : 0);
        })();
    }
    var base_hash = this.avatar_base_hash();
    var sum = this.avatar_checksum(base_hash);
    return {
        'hash': this.avatar_hash(),
        'base_hash': base_hash,
        'checksum': sum
    };
}
function avatar_set_face(map) {
    (() => {
        const __callInstance33 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance33.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    this.clothing.face_changes = 0;
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance8.exports;
        return __exports.data(!this.clothing.face_changes ? 1 : 0);
    })();
    this.clothing.face_changes++;
    this.clothing.change_time = time();
    for (var i in config.face_slots) {
        (() => {
            const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var item = config.data_faces[map[i]];
                                                (() => {
                                                    const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    this.a2[i] = map[i];
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance11.exports;
                                                    return __exports.data(item && item.slot == i ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                this.a2[i] = 0;
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance10.exports;
                                return __exports.data(map[i] ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance9.exports;
            return __exports.data(utils.has_key(i, map) ? 1 : 0);
        })();
    }
    (() => {
        const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    map[lS(0, 2)] = map[lS(0, 3)];
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance12.exports;
        return __exports.data(map[lS(0, 1)] ? 1 : 0);
    })();
    (() => {
        const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    map[lS(0, 5)] = map[lS(0, 6)];
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance13.exports;
        return __exports.data(map[lS(0, 4)] ? 1 : 0);
    })();
    for (var i in config.face_color_slots) {
        (() => {
            const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var item = config.data_avatar_colors[map[i]];
                                                (() => {
                                                    const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    this.a2[i] = map[i];
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance16.exports;
                                                    return __exports.data(item && item.slot + lS(0, 7) == i ? 1 : 0);
                                                })();
                                            }
                                        },
                                        impFunc2: () => {
                                            {
                                                this.a2[i] = 0;
                                            }
                                        }
                                    }
                                });
                                const __exports = __ifInstance15.exports;
                                return __exports.data(map[i] ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance14.exports;
            return __exports.data(utils.has_key(i, map) ? 1 : 0);
        })();
    }
    for (var slot in config.face_scaling_params) {
        var settings = config.face_scaling_params[slot];
        (() => {
            const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var v = floatval(map[slot]);
                            (() => {
                                const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            v = settings[0];
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance18.exports;
                                return __exports.data(v < settings[0] ? 1 : 0);
                            })();
                            (() => {
                                const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            v = settings[1];
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance19.exports;
                                return __exports.data(v > settings[1] ? 1 : 0);
                            })();
                            this.a2[slot] = v;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance17.exports;
            return __exports.data(utils.has_key(slot, map) ? 1 : 0);
        })();
    }
    var base_hash = this.avatar_base_hash();
    var sum = this.avatar_checksum(base_hash);
    return {
        'hash': this.avatar_hash(),
        'base_hash': base_hash,
        'checksum': sum
    };
}
function avatar_admin_get() {
    (() => {
        const __callInstance32 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance32.exports;
        return __exports.data();
    })();
    return {
        'ok': 1,
        'base': this.a2,
        'hash': this.avatar_hash()
    };
}
function avatar_hash() {
    (() => {
        const __callInstance31 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance31.exports;
        return __exports.data();
    })();
    return this.avatar_format_hash(this.a2);
}
function avatar_format_hash(cur) {
    var out = {
        'ver': '01.01.11',
        'articles': {}
    };
    for (var slot in config.face_scaling_params) {
        (() => {
            const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            out[slot] = floatval(cur[slot]);
                        }
                    },
                    impFunc2: () => {
                        {
                            out[slot] = config.face_scaling_params[slot][2];
                        }
                    }
                }
            });
            const __exports = __ifInstance20.exports;
            return __exports.data(cur[slot] ? 1 : 0);
        })();
    }
    for (var slot in config.clothing_slots) {
        out.articles[slot] = {
            'package_swf_url': '',
            'article_class_name': 'none'
        };
        var id = cur[slot];
        (() => {
            const __ifInstance21 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var hash = utils.copy_hash(config.data_clothing[id]);
                            var package_name = config.data_swfs_avatar.assets[hash.asset];
                            var package_url = config.data_swfs_avatar.packages[package_name];
                            (() => {
                                const __ifInstance22 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                hash.package_swf_url = package_url;
                                                delete hash.slot;
                                                delete hash.asset;
                                                out.articles[slot] = hash;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance22.exports;
                                return __exports.data(package_url ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance21.exports;
            return __exports.data(config.data_clothing[id] ? 1 : 0);
        })();
    }
    for (var slot in config.face_slots) {
        out.articles[slot] = {
            'package_swf_url': '',
            'article_class_name': 'none'
        };
        var id = cur[slot];
        (() => {
            const __ifInstance23 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            var hash = utils.copy_hash(config.data_faces[id]);
                            var package_name = config.data_swfs_avatar.assets[hash.asset];
                            var package_url = config.data_swfs_avatar.packages[package_name];
                            (() => {
                                const __ifInstance24 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                hash.package_swf_url = package_url;
                                                delete hash.slot;
                                                delete hash.asset;
                                                out.articles[slot] = hash;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance24.exports;
                                return __exports.data(package_url ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance23.exports;
            return __exports.data(config.data_faces[id] ? 1 : 0);
        })();
    }
    for (var slot in config.face_color_slots) {
        var old_key = slot.replace(lS(0, 8), lS(0, 9));
        var new_key = slot + lS(0, 10);
        out[old_key] = lS(0, 11);
        out[new_key] = {};
        var id = cur[slot];
        (() => {
            const __ifInstance25 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            out[old_key] = config.data_avatar_colors[id].color;
                            out[new_key] = config.data_avatar_colors[id].colors;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance25.exports;
            return __exports.data(config.data_avatar_colors[id] ? 1 : 0);
        })();
    }
    return out;
}
function clothing_admin_add_multi(args) {
    var out = {};
    for (var id in args) {
        out[id] = this.clothing_add(id, args[id]);
    }
    return {
        ok: 1,
        items: out
    };
}
function clothing_add(id, info) {
    var item = config.data_clothing[id];
    if (!item)
        return false;
    (() => {
        const __callInstance30 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance30.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance26 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.clothing.slots[item.slot] = {};
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance26.exports;
        return __exports.data(!this.clothing.slots[item.slot] ? 1 : 0);
    })();
    this.clothing.slots[item.slot][id] = { 'when': time() };
    for (var i in info) {
        this.clothing.slots[item.slot][id][i] = info[i];
    }
    return true;
}
function clothing_is_owned(slot, id) {
    (() => {
        const __callInstance29 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance29.exports;
        return __exports.data();
    })();
    if (!this.clothing.slots[slot])
        return false;
    if (!this.clothing.slots[slot][id])
        return false;
    return true;
}
function clothing_admin_get_owned(args) {
    return {
        'ok': 1,
        'items': this.clothing_get_owned(args.slot)
    };
}
function clothing_admin_get_owned_when() {
    (() => {
        const __callInstance28 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance28.exports;
        return __exports.data();
    })();
    var list = [];
    for (var i in this.clothing.slots) {
        for (var j in this.clothing.slots[i]) {
            (() => {
                const __callInstance27 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            list.push([
                                j,
                                this.clothing.slots[i][j]
                            ]);
                        }
                    }
                });
                const __exports = __callInstance27.exports;
                return __exports.data();
            })();
        }
    }
    (() => {
        const __callInstance26 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    list.sort(function (a, b) {
                        return a[1] - b[1];
                    });
                }
            }
        });
        const __exports = __callInstance26.exports;
        return __exports.data();
    })();
    var flat = {};
    (() => {
        var i = 0;
        const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < list.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        (() => {
                            const __ifInstance27 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            flat[list[i][0]] = list[i][1].when;
                                        }
                                    },
                                    impFunc2: () => {
                                        {
                                            flat[list[i][0]] = list[i][1];
                                        }
                                    }
                                }
                            });
                            const __exports = __ifInstance27.exports;
                            return __exports.data(typeof list[i][1] == lS(0, 12) ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance0.exports;
        return __exports.data();
    })();
    return flat;
}
function clothing_admin_get_recycled() {
    (() => {
        const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance25.exports;
        return __exports.data();
    })();
    if (this.clothing.recycled) {
        return this.clothing.recycled;
    } else {
        return {};
    }
}
function clothing_expand() {
    (() => {
        const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance24.exports;
        return __exports.data();
    })();
    for (var slot in this.clothing.slots) {
        for (var id in this.clothing.slots[slot]) {
            (() => {
                const __ifInstance28 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                this.clothing.slots[slot][id] = { 'when': this.clothing.slots[slot][id] };
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance28.exports;
                return __exports.data(typeof this.clothing.slots[slot][id] != lS(0, 13) ? 1 : 0);
            })();
        }
    }
    for (var key in this.clothing.recycled) {
        (() => {
            const __ifInstance29 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            this.clothing.recycled[key] = {
                                'when': 0,
                                'id': key,
                                'recycled': this.clothing.recycled[key]
                            };
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance29.exports;
            return __exports.data(typeof this.clothing.recycled[key] != lS(0, 14) ? 1 : 0);
        })();
    }
}
function clothing_get_owned(slot) {
    (() => {
        const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance23.exports;
        return __exports.data();
    })();
    var list = [];
    var slots = utils.copy_hash(this.clothing.slots);
    (() => {
        const __ifInstance30 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __ifInstance31 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            for (var i in slots[slot]) {
                                                var hash = slots[slot][i];
                                                (() => {
                                                    const __ifInstance32 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                hash = { 'when': hash };
                                                            },
                                                            impFunc2: () => {
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance32.exports;
                                                    return __exports.data(typeof hash != lS(0, 15) ? 1 : 0);
                                                })();
                                                hash.id = i;
                                                (() => {
                                                    const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                list.push(hash);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance22.exports;
                                                    return __exports.data();
                                                })();
                                            }
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance31.exports;
                            return __exports.data(slots[slot] ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                    {
                        for (var i in slots) {
                            for (var j in slots[i]) {
                                var hash = slots[i][j];
                                (() => {
                                    const __ifInstance33 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                hash = { 'when': hash };
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance33.exports;
                                    return __exports.data(typeof hash != lS(0, 16) ? 1 : 0);
                                })();
                                hash.id = j;
                                (() => {
                                    const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                        env: {
                                            impFunc: () => {
                                                list.push(hash);
                                            }
                                        }
                                    });
                                    const __exports = __callInstance21.exports;
                                    return __exports.data();
                                })();
                            }
                        }
                    }
                }
            }
        });
        const __exports = __ifInstance30.exports;
        return __exports.data(slot ? 1 : 0);
    })();
    (() => {
        const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    list.sort(function (a, b) {
                        return a.when - b.when;
                    });
                }
            }
        });
        const __exports = __callInstance20.exports;
        return __exports.data();
    })();
    return list;
}
function clothing_admin_remove(args) {
    var ret = this.clothing_remove(args.id, args.info);
    var base_hash = this.avatar_base_hash();
    var sum = this.avatar_checksum(base_hash);
    return {
        'ok': 1,
        'removed': !!ret.ok,
        'paid_credits': ret.paid_credits,
        'hash': this.avatar_hash(),
        'base_hash': base_hash,
        'checksum': sum
    };
}
function clothing_remove(id, info) {
    var item = config.data_clothing[id];
    if (!item) {
        return {
            ok: 0,
            error: 'item_not_found'
        };
    }
    (() => {
        const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance19.exports;
        return __exports.data();
    })();
    if (!this.clothing.slots[item.slot]) {
        return {
            ok: 0,
            error: 'not_owned'
        };
    }
    (() => {
        const __ifInstance34 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.clothing.recycled = {};
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance34.exports;
        return __exports.data(!this.clothing.recycled ? 1 : 0);
    })();
    var key = time();
    (() => {
        const __forInstance5 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return this.clothing.recycled[key] ? 1 : 0;
                },
                update: () => {
                },
                body: () => {
                    key++;
                }
            }
        });
        const __exports = __forInstance5.exports;
        return __exports.data();
    })();
    this.clothing.recycled[key] = utils.copy_hash(this.clothing.slots[item.slot][id]);
    this.clothing.recycled[key].id = id;
    this.clothing.recycled[key].recycled = time();
    for (var i in info) {
        this.clothing.recycled[key][i] = info[i];
    }
    var paid_credits = intval(this.clothing.slots[item.slot][id].cost_credits);
    delete this.clothing.slots[item.slot][id];
    (() => {
        const __ifInstance35 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.a2[item.slot] = 0;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance35.exports;
        return __exports.data(this.a2[item.slot] == id ? 1 : 0);
    })();
    return {
        ok: 1,
        paid_credits: paid_credits
    };
}
function avatar_checksum(hash) {
    var pairs = [];
    for (var i in hash) {
        (() => {
            const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        pairs.push(encodeURIComponent(i) + lS(0, 17) + encodeURIComponent(hash[i]));
                    }
                }
            });
            const __exports = __callInstance18.exports;
            return __exports.data();
        })();
    }
    (() => {
        const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    pairs.sort();
                }
            }
        });
        const __exports = __callInstance17.exports;
        return __exports.data();
    })();
    var base = pairs.join(lS(0, 18));
    return apiMD5(base);
}
function avatar_base_hash() {
    (() => {
        const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance16.exports;
        return __exports.data();
    })();
    return this.avatar_format_base_hash(this.a2);
}
function avatar_format_base_hash(a) {
    var keys = {
        'hat': 'int',
        'coat': 'int',
        'shirt': 'int',
        'pants': 'int',
        'dress': 'int',
        'skirt': 'int',
        'shoes': 'int',
        'eyes': 'int',
        'ears': 'int',
        'nose': 'int',
        'mouth': 'int',
        'hair': 'int',
        'skin_color': 'int',
        'hair_color': 'int',
        'eye_scale': 'float',
        'eye_height': 'float',
        'eye_dist': 'float',
        'ears_scale': 'float',
        'ears_height': 'float',
        'nose_scale': 'float',
        'nose_height': 'float',
        'mouth_scale': 'float',
        'mouth_height': 'float'
    };
    var out = {};
    for (var key in keys) {
        var val = a[key];
        (() => {
            const __ifInstance36 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        val = intval(a[key]);
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance36.exports;
            return __exports.data(keys[key] == lS(0, 19) ? 1 : 0);
        })();
        (() => {
            const __ifInstance37 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        val = floatval(a[key]);
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance37.exports;
            return __exports.data(keys[key] == lS(0, 20) ? 1 : 0);
        })();
        (() => {
            const __ifInstance38 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        val = str(a[key]);
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance38.exports;
            return __exports.data(keys[key] == lS(0, 21) ? 1 : 0);
        })();
        out[key] = val;
    }
    return out;
}
function avatar_get_hashes() {
    var base_hash = this.avatar_base_hash();
    var sum = this.avatar_checksum(base_hash);
    return {
        'hash': this.avatar_hash(),
        'base_hash': base_hash,
        'checksum': sum
    };
}
function avatar_initial_setup(args) {
    (() => {
        const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance15.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_reset();
                }
            }
        });
        const __exports = __callInstance14.exports;
        return __exports.data();
    })();
    var clothes = {};
    for (var i in args.owned) {
        clothes[args.owned[i]] = {};
    }
    var r1 = this.clothing_admin_add_multi(clothes);
    var r2 = this.avatar_set_clothing(args.base);
    var r3 = this.avatar_set_face(args.base);
    this.clothing.clothing_changes = 0;
    this.clothing.face_changes = 0;
    return r3;
}
function avatar_is_valid_facial_feature(id, slot) {
    if (!id)
        return true;
    var item = config.data_faces[id];
    if (item && item.slot == slot) {
        return true;
    }
    return false;
}
function avatar_is_valid_color(id, slot) {
    var item = config.data_avatar_colors[id];
    if (item && item.slot + lS(0, 22) == slot) {
        return true;
    }
    return false;
}
function avatar_get_pc_msg_props() {
    var out = { a2011: this.avatar_hash() };
    (() => {
        const __ifInstance39 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        out.sheet_url = this.av_meta.sheets;
                        out.singles_url = this.av_meta.singles;
                        out.sheet_pending = this.av_meta.pending;
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance39.exports;
        return __exports.data(this.av_meta ? 1 : 0);
    })();
    return out;
}
function avatar_set_sheets(args) {
    delete this.avatar_sheets;
    delete this.avatar_pending;
    (() => {
        const __ifInstance40 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    this.av_meta = {};
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance40.exports;
        return __exports.data(!this.av_meta ? 1 : 0);
    })();
    (() => {
        const __ifInstance41 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.av_meta.sheets = args.url;
                        this.av_meta.version = args.version;
                        this.av_meta.pending = false;
                    }
                },
                impFunc2: () => {
                    {
                        this.av_meta.pending = true;
                    }
                }
            }
        });
        const __exports = __ifInstance41.exports;
        return __exports.data(args.url ? 1 : 0);
    })();
    (() => {
        const __ifInstance42 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        var msg = {
                            'type': 'avatar_update',
                            'tsid': this.tsid
                        };
                        var props = this.avatar_get_pc_msg_props();
                        for (var i in props)
                            msg[i] = props[i];
                        (() => {
                            const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.location.apiSendMsg(msg);
                                    }
                                }
                            });
                            const __exports = __callInstance13.exports;
                            return __exports.data();
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance42.exports;
        return __exports.data(apiIsPlayerOnline(this.tsid) ? 1 : 0);
    })();
    (() => {
        const __ifInstance43 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __ifInstance44 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        this.buffs_remove(lS(0, 24));
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance12.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance44.exports;
                            return __exports.data(this.buffs_has(lS(0, 23)) && !this.avatar_is_nekkid() ? 1 : 0);
                        })();
                        (() => {
                            const __ifInstance45 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        this.buffs_apply(lS(0, 26));
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance11.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance45.exports;
                            return __exports.data(!this.buffs_has(lS(0, 25)) && this.avatar_is_nekkid() ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance43.exports;
        return __exports.data(args.url ? 1 : 0);
    })();
    (() => {
        const __ifInstance46 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    (() => {
                        const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    this.apiSetTimer(lS(0, 28), 1000);
                                }
                            }
                        });
                        const __exports = __callInstance10.exports;
                        return __exports.data();
                    })();
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance46.exports;
        return __exports.data(!this.apiTimerExists(lS(0, 27)) ? 1 : 0);
    })();
}
function avatar_get_singles() {
    if (this.av_meta) {
        return this.av_meta.singles;
    }
}
function avatar_set_singles(args) {
    (() => {
        const __ifInstance47 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    this.av_meta = {};
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance47.exports;
        return __exports.data(!this.av_meta ? 1 : 0);
    })();
    (() => {
        const __ifInstance48 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        this.av_meta.singles = args.url;
                        (() => {
                            const __ifInstance49 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        (() => {
                                            const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                                                env: {
                                                    impFunc: () => {
                                                        this.apiSetTimer(lS(0, 30), 1000);
                                                    }
                                                }
                                            });
                                            const __exports = __callInstance9.exports;
                                            return __exports.data();
                                        })();
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance49.exports;
                            return __exports.data(!this.apiTimerExists(lS(0, 29)) ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance48.exports;
        return __exports.data(args.url ? 1 : 0);
    })();
}
function avatar_get_meta() {
    return this.av_meta;
}
function avatar_is_nekkid() {
    var hash = this.avatar_base_hash();
    return hash.coat + (in_array_real(hash.shirt, __lA(0, 16, 28)) ? 0 : hash.shirt) + hash.pants + (in_array_real(hash.dress, __lA(1, 28, 36)) ? 0 : hash.dress) + hash.skirt > 0 ? false : true;
}
function avatar_preview(args) {
    (() => {
        const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance8.exports;
        return __exports.data();
    })();
    var base = {};
    for (var i in this.a2)
        base[i] = this.a2[i];
    for (var i in args.a)
        base[i] = args.a[i];
    var hash = this.avatar_format_hash(base);
    var base_hash = this.avatar_format_base_hash(base);
    var checksum = this.avatar_checksum(base_hash);
    return {
        'hash': hash,
        'base_hash': base_hash,
        'checksum': checksum
    };
}
function clothing_fix_state(args) {
    (() => {
        const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance7.exports;
        return __exports.data();
    })();
    for (var slot in this.clothing.slots) {
        for (var id in this.clothing.slots[slot]) {
            if (id == args.id) {
                for (var i in args.info) {
                    this.clothing.slots[slot][id][i] = args.info[i];
                }
                return true;
            }
        }
    }
    for (var uid in this.clothing.recycled) {
        if (this.clothing.recycled[uid].id == args.id) {
            for (var i in args.info) {
                this.clothing.recycled[uid][i] = args.info[i];
            }
            return true;
        }
    }
    return false;
}
function clothing_find_sub_only() {
    var owned_hash = {};
    (() => {
        const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_init();
                }
            }
        });
        const __exports = __callInstance6.exports;
        return __exports.data();
    })();
    for (var slot in this.clothing.slots) {
        for (var id in this.clothing.slots[slot]) {
            var info = this.clothing.slots[slot][id];
            if (info.cost_credits && intval(info.cost_credits) > 0)
                continue;
            if (info.staff_gift)
                continue;
            owned_hash[id] = 1;
        }
    }
    var matches = [];
    (() => {
        var i = 0;
        const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < config.data_clothing_sub_only.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        (() => {
                            const __ifInstance50 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            (() => {
                                                const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            matches.push(config.data_clothing_sub_only[i]);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance5.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance50.exports;
                            return __exports.data(owned_hash[config.data_clothing_sub_only[i]] ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance1.exports;
        return __exports.data();
    })();
    return matches;
}
function clothing_expire_sub() {
    var remove_ids = this.clothing_find_sub_only();
    var pre_sum = this.avatar_checksum(this.avatar_base_hash());
    (() => {
        var i = 0;
        const __forInstance2 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < remove_ids.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        var id = remove_ids[i];
                        (() => {
                            const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        this.clothing_remove(id, { 'sub_expired': 1 });
                                    }
                                }
                            });
                            const __exports = __callInstance4.exports;
                            return __exports.data();
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance2.exports;
        return __exports.data();
    })();
    var post_sum = this.avatar_checksum(this.avatar_base_hash());
    return {
        'ok': 1,
        'num_removed': remove_ids.length,
        'avatar_update': pre_sum == post_sum ? false : true,
        'checksum': post_sum
    };
}
function avatar_admin_set_full(args) {
    var r1 = this.avatar_set_clothing(args.hash);
    var r2 = this.avatar_set_face(args.hash);
    return r2;
}
function avatar_build_default(args) {
    var def = config.default_avatars;
    var hash = {};
    var owned = {};
    var keys = [
        lS(0, 31),
        lS(0, 32),
        lS(0, 33),
        lS(0, 34),
        lS(0, 35),
        lS(0, 36),
        lS(0, 37),
        lS(0, 38),
        lS(0, 39)
    ];
    var ckeys = [
        lS(0, 40),
        lS(0, 41),
        lS(0, 42),
        lS(0, 43),
        lS(0, 44),
        lS(0, 45),
        lS(0, 46)
    ];
    (() => {
        var i = 0;
        const __forInstance3 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < keys.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        var key = keys[i];
                        var val = intval(args[key]);
                        (() => {
                            const __ifInstance51 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        val = 0;
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance51.exports;
                            return __exports.data(val < 0 ? 1 : 0);
                        })();
                        (() => {
                            const __ifInstance52 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        val = 0;
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance52.exports;
                            return __exports.data(val > 3 ? 1 : 0);
                        })();
                        val = str(val);
                        var bits = def[key][val];
                        for (var j in bits) {
                            hash[j] = bits[j];
                        }
                    }
                }
            }
        });
        const __exports = __forInstance3.exports;
        return __exports.data();
    })();
    (() => {
        var i = 0;
        const __forInstance4 = new WebAssembly.Instance(__forWasmModule, {
            env: {
                test: () => {
                    return i < ckeys.length ? 1 : 0;
                },
                update: () => {
                    i++;
                },
                body: () => {
                    {
                        var ckey = ckeys[i];
                        var val = hash[ckey];
                        (() => {
                            const __ifInstance53 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            val = str(val);
                                            owned[val] = val;
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance53.exports;
                            return __exports.data(val ? 1 : 0);
                        })();
                    }
                }
            }
        });
        const __exports = __forInstance4.exports;
        return __exports.data();
    })();
    return this.avatar_initial_setup({
        'base': hash,
        'owned': owned
    });
}
function avatar_default_choices() {
    var choices = config.default_avatars;
    var out = {};
    for (var slot in choices) {
        out[slot] = {};
        for (var idx in choices[slot]) {
            var idx2 = lS(0, 47) + idx;
            out[slot][idx2] = { 'articles': {} };
            var temp = this.avatar_format_hash(choices[slot][idx]);
            for (var i in choices[slot][idx]) {
                (() => {
                    const __ifInstance54 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                out[slot][idx2][i] = temp[i];
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance54.exports;
                    return __exports.data(temp[i] ? 1 : 0);
                })();
                (() => {
                    const __ifInstance55 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                out[slot][idx2].articles[i] = temp.articles[i];
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance55.exports;
                    return __exports.data(temp.articles[i] ? 1 : 0);
                })();
                (() => {
                    const __ifInstance56 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    out[slot][idx2].hair_tint_color = temp.hair_tint_color;
                                    out[slot][idx2].hair_colors = temp.hair_colors;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance56.exports;
                    return __exports.data(i == lS(0, 48) ? 1 : 0);
                })();
                (() => {
                    const __ifInstance57 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    out[slot][idx2].skin_tint_color = temp.skin_tint_color;
                                    out[slot][idx2].skin_colors = temp.skin_colors;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance57.exports;
                    return __exports.data(i == lS(0, 49) ? 1 : 0);
                })();
            }
        }
    }
    return out;
}
function avatar_admin_set_default(args) {
    var hash = {};
    var code = {};
    var choices = config.default_avatars;
    for (var i in choices) {
        var key = args.choices[i];
        for (var j in choices[i][key]) {
            hash[j] = choices[i][key][j];
        }
        code[i] = key;
    }
    this.a2 = hash;
    delete this.quickstart_needs_avatar;
    (() => {
        const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_set_singles({
                        'url': args.singles,
                        'version': args.version
                    });
                }
            }
        });
        const __exports = __callInstance3.exports;
        return __exports.data();
    })();
    (() => {
        const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
            env: {
                impFunc: () => {
                    this.avatar_set_sheets({
                        'url': args.sheets,
                        'version': args.version
                    });
                }
            }
        });
        const __exports = __callInstance2.exports;
        return __exports.data();
    })();
    (() => {
        const __ifInstance58 = new WebAssembly.Instance(__ifWasmModule, {
            env: {
                impFunc1: () => {
                    {
                        (() => {
                            const __ifInstance59 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            var flamingo = this.location.getFlamingo();
                                            (() => {
                                                const __ifInstance60 = new WebAssembly.Instance(__ifWasmModule, {
                                                    env: {
                                                        impFunc1: () => {
                                                            {
                                                                (() => {
                                                                    const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                                                        env: {
                                                                            impFunc: () => {
                                                                                this.openInputBox(lS(0, 51), lS(0, 52), {
                                                                                    check_user_name: true,
                                                                                    input_max_chars: 19,
                                                                                    cancelable: false,
                                                                                    itemstack_tsid: flamingo.tsid,
                                                                                    follow: true,
                                                                                    input_label: 'What should we call you?'
                                                                                });
                                                                            }
                                                                        }
                                                                    });
                                                                    const __exports = __callInstance1.exports;
                                                                    return __exports.data();
                                                                })();
                                                            }
                                                        },
                                                        impFunc2: () => {
                                                        }
                                                    }
                                                });
                                                const __exports = __ifInstance60.exports;
                                                return __exports.data(flamingo ? 1 : 0);
                                            })();
                                        }
                                    },
                                    impFunc2: () => {
                                        {
                                            (() => {
                                                const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            this.location.runTutorialStep(this.location.getNextStep(this.location.current_step), null);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance0.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                }
                            });
                            const __exports = __ifInstance59.exports;
                            return __exports.data(this.quickstart_needs_player ? 1 : 0);
                        })();
                    }
                },
                impFunc2: () => {
                }
            }
        });
        const __exports = __ifInstance58.exports;
        return __exports.data(this.location.class_tsid == lS(0, 50) ? 1 : 0);
    })();
}</script>
</body>
</html>
