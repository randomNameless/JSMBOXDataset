<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bootstrapConsent.dba160539405ae6f007c.html</title>
</head>
<body>

<script>
var nuglif;!function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}};void 0!==e&&Object.defineProperty(e,"p",{get:function(){try{if("string"!=typeof __nuglif__webpack_public_path__)throw new Error("WebpackRequireFrom: '__nuglif__webpack_public_path__' is not a string or not available at runtime. See https://github.com/agoldis/webpack-require-from#troubleshooting");return __nuglif__webpack_public_path__}catch(e){return console.error(e),""}},set:function(e){console.warn("WebpackRequireFrom: something is trying to override webpack public path. Ignoring the new value"+e+".")}});var t={};e.r(t),e.d(t,{BootstrapConsent:function(){return m}});var n,r=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};n=new WeakMap;var o,i,s,a=class{constructor(e){n.set(this,void 0),function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?o.call(e,n):o?o.value=n:t.set(e,n)}(this,n,e,"f")}getCurrentConsent(){const e=localStorage.getItem("lp.consent.currentConsent");return e?JSON.parse(e):(localStorage.setItem("lp.consent.currentConsent",JSON.stringify(r(this,n,"f").getCurrentConsent())),r(this,n,"f").getCurrentConsent())}onReady(e){r(this,n,"f").onReady((t=>{localStorage.setItem("lp.consent.currentConsent",JSON.stringify(t)),e(t)}))}onConsentChanged(e){r(this,n,"f").onConsentChanged((t=>{localStorage.setItem("lp.consent.currentConsent",JSON.stringify(t)),e(t)}))}show(){r(this,n,"f").show()}},d=class{constructor(e){e.onAuthStateChanged((()=>{e.isLoggedIn()&&(localStorage.setItem("lp.auth.lastUserId",e.currentUser().uid),this._needToRefreshUserIdAuthDigest()&&this._setUserIdAuthDigest(e)),e.isLoggedIn()||(localStorage.removeItem("lp.auth.lastUserId"),localStorage.removeItem("lp.auth.lastUserIdAuthDigest"))}))}getUserId(){return localStorage.getItem("lp.auth.lastUserId")}getUserIdAuthDigest(){return localStorage.getItem("lp.auth.lastUserIdAuthDigest")}_needToRefreshUserIdAuthDigest(){return this._isAuthDigestInvalid()}_isAuthDigestInvalid(){return!localStorage.getItem("lp.auth.lastUserIdAuthDigest")}_setUserIdAuthDigest(e){e.currentUser().getIdToken().then((t=>{this._callToGetUserIdAuthDigest(e,t)}))}_callToGetUserIdAuthDigest(e,t){const n=new XMLHttpRequest;n.onload=()=>{this._setUserIdAuthDigestFromResponse(n)},n.onerror=e=>{console.error("Erreur %o lors de la génération du authdigest pour le token %o.",e,t)},n.open("GET","/consent/user/"+e.currentUser().uid+"/auth-digest",!0),n.setRequestHeader("Authorization","Bearer "+t),n.send()}_setUserIdAuthDigestFromResponse(e){const t=JSON.parse(e.response);localStorage.setItem("lp.auth.lastUserIdAuthDigest",t.authDigest)}},u=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},l=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};o=new WeakMap,i=new WeakMap,s=new WeakMap;var c,h,p=class{constructor(e,t,n,r,a,d,l,c,h,p){o.set(this,void 0),i.set(this,void 0),s.set(this,void 0),u(this,o,p,"f"),u(this,i,n,"f"),u(this,s,r,"f"),window.didomiConfig={user:{organizationUserId:c,organizationUserIdAuthDigest:h,organizationUserIdAuthSid:a,organizationUserIdAuthAlgorithm:"hash-md5"},sync:{enabled:d,frequency:l,delayNotice:!0}},function(e,t){window.gdprAppliesGlobally=!0;const n=document.createElement("link");n.rel="preload",n.as="script";const r=document.createElement("script");r.id="spcloader",r.type="text/javascript",r.async=!0,r.charset="utf-8";const o="https://sdk.privacy-center.org/"+e+"/loader.js?target_type=notice&target="+t;n.href=o,r.src=o;const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),i.parentNode.insertBefore(r,i)}(e,t),this.initListeners()}getCurrentConsent(){if(!window.Didomi)return{advertising:null,productAndPhilanthropy:null};function e(e,t){return null==e&&null==t?null:!0===e&&!0===t}const t=window.Didomi.getUserConsentStatusForPurpose("publicitaire"),n=window.Didomi.getUserConsentStatusForVendor("c:partenaires-publicitaire"),r=window.Didomi.getUserConsentStatusForPurpose("philanthropie"),o=window.Didomi.getUserConsentStatusForVendor("c:partenaires-philanthropie");return{advertising:e(t,n),productAndPhilanthropy:e(r,o)}}initListeners(){window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push({event:"notice.shown",listener:function(){document.getElementById("didomi-host").setAttribute("data-location","consentPopup")}}),l(this,o,"f").onAuthStateChanged((()=>{l(this,o,"f").isLoggedIn()||window.Didomi&&window.Didomi.reset()}))}onConsentChanged(e){window.didomiEventListeners=window.didomiEventListeners||[],window.didomiEventListeners.push({event:"consent.changed",listener:()=>{try{e(this.getCurrentConsent())}catch(e){console.error(e)}}})}onReady(e){window.didomiOnReady=window.didomiOnReady||[],window.didomiOnReady.push((()=>{e(this.getCurrentConsent())}))}show(){window.Didomi.preferences.show()}},g=class{constructor(){}getCurrentConsent(){return{advertising:null,productAndPhilanthropy:null}}onReady(e){e({advertising:null,productAndPhilanthropy:null})}onConsentChanged(){}show(){}},w=function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},f=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class m{constructor(e,t,n,r,o,i,s,u,l,f,m){c.set(this,void 0),h.set(this,void 0);let y=null,v=null;if(e){const e=new d(l);v=e.getUserId(),y=e.getUserIdAuthDigest()}w(this,c,f,"f"),w(this,h,m,"f"),this.consentHandler=new a(v&&y?new p(t,n,r,o,i,s,u,v,y,l):new g),this.initListeners()}initListeners(){this.consentHandler.onReady((e=>{f(this,c,"f").push({readerConsent:e}),f(this,h,"f").state.setReaderConsentAdvertising(e.advertising),f(this,h,"f").state.setReaderConsentProductAndPhilanthropy(e.productAndPhilanthropy)})),this.consentHandler.onConsentChanged((e=>{f(this,c,"f").push({readerConsent:e}),f(this,h,"f").pubSub.publish("readerConsentChanged",e),f(this,h,"f").state.setReaderConsentAdvertising(e.advertising),f(this,h,"f").state.setReaderConsentProductAndPhilanthropy(e.productAndPhilanthropy)}))}}c=new WeakMap,h=new WeakMap,(nuglif=void 0===nuglif?{}:nuglif).bootstrapConsent=t}();
//# sourceMappingURL=bootstrapConsent.dba160539405ae6f007c.js.map
</script>

</body>
</html>
