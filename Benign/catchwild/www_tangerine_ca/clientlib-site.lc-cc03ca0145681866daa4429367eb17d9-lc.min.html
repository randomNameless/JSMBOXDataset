<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clientlib-site.lc-cc03ca0145681866daa4429367eb17d9-lc.min.html</title>
</head>
<body>

<script>
!function(){var t={562:function(){var t=document.querySelector(".cmp-page__skiptomaincontent"),e=document.querySelectorAll(".cmp-page__skipmaincontent-link,.cmp-page__skiptochatbot-link"),n=document.getElementById("privacy_preference");e.forEach((function(e){e.addEventListener("focus",(function(){t.classList.add("skiptomainnav-focus")})),e.addEventListener("blur",(function(){t.classList.remove("skiptomainnav-focus")}))})),n&&n.addEventListener("click",(function(){window.Optanon&&window.Optanon.ToggleInfoDisplay()}))},629:function(){var t,e,n;t=window.history,e=t.replaceState,n=t.pushState,t.pushState=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.apply(this,t),window.dispatchEvent(new Event("pushState"))},t.replaceState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.apply(this,t),window.dispatchEvent(new Event("replaceState"))}},975:function(){function t(t){if(t.hasOwnProperty("eventInfo")&&t.eventInfo.hasOwnProperty("path")){var e=window.adobeDataLayer.getState(t.eventInfo.path),n=t.eventInfo.path.split(".")[1];e.id=n,e.event=t.event,"tangerine/components/text"!=e["@type"]&&window.dataLayer.push(e)}}window.adobeDataLayer=window.adobeDataLayer||[],window.dataLayer=window.dataLayer||[],window.adobeDataLayer.push((function(e){e.addEventListener("cmp:show",t)})),window.adobeDataLayer.push((function(e){e.addEventListener("cmp:click",t)}))},822:function(){!function(){function t(t){var e=function(t){var e=t.dataset.cmpDataLayer;return e?JSON.parse(e):void 0}(t),n=Object.keys(e)[0];if(e&&e[n]&&t.parentNode&&!e[n].parentId){var i=t.parentNode.closest("[data-cmp-data-layer], body");i&&(e[n].parentId=i.id)}return e}function e(t){var e=function(t){if(t.dataset.cmpDataLayer)return Object.keys(JSON.parse(t.dataset.cmpDataLayer))[0];var e=t.closest("[data-cmp-data-layer]");return Object.keys(JSON.parse(e.dataset.cmpDataLayer))[0]}(t.currentTarget);window.adobeDataLayer.push({event:"cmp:click",eventInfo:{path:"component."+e}})}window.addComponentEventListener=function(n){window.adobeDataLayer.push({component:t(n)}),n.addEventListener("click",e)},window.processTextLinks=function(t){t.forEach((function(t,e){var n,i=t.getAttribute("title");i&&t.setAttribute("aria-label",i);var o=(null===(n=t.textContent)||void 0===n?void 0:n.trim())||"",a=t.getAttribute("href"),s=t.closest(".cmp-text"),r=t.closest(".cmp-contentfragment");if(s||r){var c=s?s.id:r.id,l="".concat(c,"_").concat(e);t.setAttribute("id",l);var d={};d[l]={"@type":"tangerine/components/text/link","xdm:linkURL":a,title:o,parentId:c},t.setAttribute("data-cmp-data-layer",JSON.stringify(d)),window.addComponentEventListener(t)}}))}}()},413:function(){var t=document.querySelector("#social-shares");if(t)for(var e=window.location.href,n={facebook:{el:t.querySelector("#facebook-share a"),url:"https://www.facebook.com/sharer/sharer.php?u="},linkedin:{el:t.querySelector("#linkedin-share a"),url:"https://www.linkedin.com/shareArticle?mini=true&url="},twitter:{el:t.querySelector("#twitter-share a"),url:"https://www.twitter.com/intent/tweet?url="}},i=0,o=Object.entries(n);i<o.length;i++){var a=o[i],s=a[0],r=a[1],c=r.el;if(c){var l="".concat(r.url).concat(e);c.setAttribute("href",l),c.setAttribute("data-sharer-social-network",s)}}},29:function(){var t="accessibility-focus-enabled",e=document.querySelector("body");document.addEventListener("keydown",(function(n){"Tab"===n.code&&e.classList.add(t)})),document.addEventListener("mousedown",(function(n){0!=n.detail&&e.classList.remove(t)}))},40:function(){var t=document.getElementById("takeaways-toc");t&&0===t.children.length&&(t.style.display="none")},68:function(){var t=function(t,e){return document.documentElement.style.setProperty(t,e)},e=function(){t("--app-height","".concat(window.innerHeight,"px"));var e=document.getElementById("main-navigation");t("--nav-height","".concat(e?"".concat(e.clientHeight,"px"):"0px"))};window.addEventListener("resize",e),e()},663:function(){!function(){var t=document.querySelector("#maincontent"),e=document.querySelector("main");try{!t&&e&&(e.id="maincontent")}catch(t){console.warn(t)}}()}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}!function(){"use strict";var t={},e=new XMLHttpRequest;function i(){if(200===this.status){if(t=JSON.parse(this.response),window.GLOBAL_KEYS=t,document.dispatchEvent(new CustomEvent("GLOBAL_KEYS_LOADED")),o()){console.log("AD || getGlocalKeys() - isEvtUAT : ".concat(o()));var e=document.createElement("script");e.setAttribute("src",t.uat_config_url),document.getElementsByName("head")[0].appendChild(e)}}else console.log("ERROR loading global config")}function o(){return!!t.uat_config_url}e.onload=i,e.open("GET","/etc.clientlibs/tangerine/clientlibs/clientlib-site/resources/conf/global.json",!1),e.send();var a,s,r,c={get:function(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},set:function(t,e,n,i,o,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;a||(a="https:"===location.protocol);var s="";if(n)switch(n.constructor){case Number:s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+s+(o?"; domain="+o:"")+(i?"; path="+i:"")+(a?"; secure":""),!0},set_raw:function(t,e,n,i,o,a){if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))return!1;a||(a="https:"===location.protocol);var s="";if(n)switch(n.constructor){case Number:s=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:s="; expires="+n;break;case Date:s="; expires="+n.toUTCString()}return document.cookie=t+"="+e+s+(o?"; domain="+o:"")+(i?"; path="+i:"")+(a?"; secure":""),!0},remove:function(t,e,n){return!(!t||!this.has(t))&&(console.log("AD | cookie.remove | sKey: ".concat(t,", sPath: ").concat(e,", sDomain: ").concat(n)),document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(e?"; path="+e:""),!0)},has:function(t){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var t=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),e=0;e<t.length;e++)t[e]=decodeURIComponent(t[e]);return t}},l="fr"===document.querySelector("html").getAttribute("lang")?"fr":"en",d=!!c.get("LG"),u=t.CHATBOT_URI.URI_CHATBOT_AVAILABILITY,p=t.CHATBOT_URI.URI_CHATBOT_MESSAGE,h=t.CHATBOT_URI.URI_CHATBOT_USER_TOKEN,m=t.CHATBOT_URI.URI_END_CHAT_SESSION,f=t.CHATBOT_URI.URI_POST_CHATBOT_ESCALATION,y=t.COMPANY_ID,v=t.ACCOUNT_TYPE,b=(t.APPLICATION_JSON,t.JSON_CON,t.TRANSACTION_TOKEN),g={USER_CLOSED:t.CHAT_STATUS.USER_CLOSED,ESCALATED:t.CHAT_STATUS.ESCALATED,CHATBOT_CLOSED:t.CHAT_STATUS.CHATBOT_CLOSED,ACTIVE:t.CHAT_STATUS.ACTIVE,TIMED_OUT:t.CHAT_STATUS.TIMED_OUT},E={WIDE:t.WINDOW_LAYOUT.WIDE,NARROW:t.WINDOW_LAYOUT.NARROW},S=(t.chatbotConfig,{ONLINE_MESSAGE:t.ESCALATION_OPTIONS.ONLINE_MESSAGE,ONLINE_MSG:t.ESCALATION_OPTIONS.ONLINE_MSG,LOGIN_TO_ONLINE_MESSAGE:t.ESCALATION_OPTIONS.LOGIN_TO_ONLINE_MESSAGE,CHAT:t.ESCALATION_OPTIONS.CHAT,DIAL:t.ESCALATION_OPTIONS.DIAL,LOGIN:t.ESCALATION_OPTIONS.LOGIN,NO_THANKS:t.ESCALATION_OPTIONS.NO_THANKS}),L=t.chatbot_appID,A=t.secureurl,w=t.chatbot_proxy_url,C=t.chat_availability_appID,k=t.chat_availability_rest_url,T=t.GOOGLE_ANALYTICS_CONFIG_PATH,I=t.google_analytics_javascript_library,_=t.unsubscribe_rest_url,O=t.unsubscribe_appID,x=(t.unsubscribe_fail_redirect,t.email_activation_rest_url),D=t.email_activation_appID,M=t.email_validation_rest_url,q=t.email_validation_appID,N=t.ewt_availability_rest_url,B=t.ewt_availability_appID,P=t.newsletter_submission_url,F=t.newsletter_submision_endpoint,U=t.bankshot_lead_path,H=t.bankshot_lead_emailexists,R=t.bankshot_domain,W=t.domain,j=function(){return j=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},j.apply(this,arguments)},V=function(){function t(){}return t.prototype.get=function(t,e){return fetch(t,j({method:"GET"},e))},t.prototype.post=function(t,e){return fetch(t,j({method:"POST"},e))},t.prototype.put=function(t,e){return fetch(t,j({method:"PUT"},e))},t.prototype.loadScript=function(t,e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=!0),new Promise((function(o,a){var s=document.createElement("script"),r=e||document.getElementsByTagName("script")[0];function c(t,e){(e||!s.readyState||/loaded|complete/.test(s.readyState))&&(s.onload=null,s.onreadystatechange=null,s=void 0,e?a():o(""))}s.async=n,s.defer=i,s.onload=c,s.onreadystatechange=c,s.src=t,r.parentNode.insertBefore(s,r)}))},t}(),G=new V;function J(){var t=document.querySelector("body");t.classList.remove("is-visitor"),t.classList.remove("LG"),t.classList.remove("LGB");var e=(c.get("CTOK")?c.get("CTOK").split("|"):[null,null])[0];c.get("LG")?t.classList.add("B"===e?"LGB":"LG"):t.classList.add("is-visitor")}function K(t){void 0===t&&(t=!1);var e="".concat(A,"/web/Tangerine.html?command=invSession");G.get(e,{credentials:"include",headers:{"x-web-flavour":"fbe"}}).then((function(e){c.remove("LG","/",W),c.remove("CTOK","/",W),localStorage.removeItem("headerData"),sessionStorage.removeItem("vaMessages"),sessionStorage.removeItem("vaUserToken"),sessionStorage.removeItem("vaMinimized"),sessionStorage.removeItem("vaFirstLoadAnimation"),sessionStorage.removeItem("vaPromotionMode"),J(),t&&("fr"==l?window.location.replace("/fr/logout"):window.location.replace("/en/logout"))}))}J(),window.location.pathname.indexOf("/logout")>-1?K():d&&(a="".concat(A,"/web/rest/v1/customers/my"),s="",r={},G.get(a,{credentials:"include",headers:{"Content-Type":"application/json"}}).then((function(t){return s=t.headers.get("x-transaction-token"),t.json()})).then((function(t){t&&"SUCCESS"===t.response_status.status_code?(r.firstName=t.customer.first_name,r.lastInitial=t.customer.last_name.substring(0,1)+".",r.transactionToken=s,localStorage.setItem("headerData",JSON.stringify(r)),localStorage.removeItem("errLogout"),document.dispatchEvent(new CustomEvent("HEADER_DATA_LOADED"))):K()}),(function(t){K()})));var z,$=(z=/android\s([0-9.]*)/i.exec(navigator.userAgent))?z[1]:void 0,Y=function(){var t=/iPhone OS (\d+)_(\d+)\s+/i.exec(navigator.userAgent);return t?t[1]:void 0}(),Z=null!=/iPad/i.exec(navigator.userAgent)||/Mac/i.exec(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0,X=!!$||!!Y||Z,Q=!!($&&parseInt($)>=7||Y&&parseInt(Y)>=14||Z),tt=["/en/personal/spend/credit-cards","/fr/particuliers/depenses/carte-de-credit"],et=function(t,e){var n=window.location.origin.replace("www.","");return"".concat(n,"/deeplink?goToStore=").concat(t,"&lang=").concat(l,"&flow=").concat(e,"&utm_source=tng&utm_medium=deeplink&utm_campaign=login&utm_content=").concat(l)},nt=function(t,e,n){if(n||2===arguments.length)for(var i,o=0,a=e.length;o<a;o++)!i&&o in e||(i||(i=Array.prototype.slice.call(e,0,o)),i[o]=e[o]);return t.concat(i||Array.prototype.slice.call(e))},it=function(){function t(t){this.mobileTabSelectors=["personal-nav-hb","business-nav-hb"],this.desktopTabSelectors=["personal-navigation-menu","business-navigation-menu"],this.hbSubNavBackIds=["personal-back-save-hb","personal-back-spend-hb","personal-back-invest-hb","personal-back-borrow-hb","personal-back-learn-hb","business-back-save-hb","business-back-invest-hb","business-back-learn-hb"],this.businessPagesPath=["/en/business","/fr/affaires"],this.personalPagesPath=["/en/personal","/fr/particuliers"],this.logoutIds=["logout","logout-hamburger"],this.activeTab="cmp-tabs__tab--active",this.activeTabPanel="cmp-tabs__tabpanel--active",this.ariaSelected="aria-selected",this.hbMenuId="hamburger-menu",this.closeBtnId="close-hamburger",this.header=document.querySelector(t),this.htmlEle=document.querySelector("html");var e=document.body;this.actionVisitorText=e.dataset.cmpActionVisitorText?e.dataset.cmpActionVisitorText:null,this.actionVisitorLink=e.dataset.cmpActionVisitorLink?e.dataset.cmpActionVisitorLink:null,this.actionVisitorAria=e.dataset.cmpActionVisitorAria?e.dataset.cmpActionVisitorAria:null,this.actionClientText=e.dataset.cmpActionClientText?e.dataset.cmpActionClientText:null,this.actionClientLink=e.dataset.cmpActionClientLink?e.dataset.cmpActionClientLink:null,this.actionClientAria=e.dataset.cmpActionClientAria?e.dataset.cmpActionClientAria:null,this.actionBusinessClientText=e.dataset.cmpActionBusinessClientText?e.dataset.cmpActionBusinessClientText:null,this.actionBusinessClientLink=e.dataset.cmpActionBusinessClientLink?e.dataset.cmpActionBusinessClientLink:null,this.actionBusinessClientAria=e.dataset.cmpActionBusinessClientAria?e.dataset.cmpActionBusinessClientAria:null,this.header&&(this.primaryActionsVisitor=this.header.querySelectorAll(".cmp-button--header-primary-visitor"),this.primaryActionsClient=this.header.querySelectorAll(".cmp-button--header-primary-client"),this.primaryActionsBusiness=this.header.querySelectorAll(".cmp-button--header-primary-business"))}return t.prototype.init=function(){if(this.header){var t=window.location.pathname;try{window.innerWidth>=1280&&this.setUtilityLinks(this.desktopTabSelectors),this.unselectDefaultTabs(nt(nt([],this.desktopTabSelectors,!0),this.mobileTabSelectors,!0),this.activeTab,this.activeTabPanel),this.listenMouseHoverMainNav(this.desktopTabSelectors),this.listenHbClick(this.hbMenuId,this.closeBtnId),this.keepFocusInContainer(this.getMobileHbElem()),this.listenHbSubNavClicks(this.mobileTabSelectors),this.listenHbSubNavBackClicks(this.hbSubNavBackIds),this.listenPageScroll(),this.listenLogout(this.logoutIds),this.listenToFeedback("feedback-hamburger"),this.handleActionOverrides(),tt.includes(t)||this.addProductCode()}catch(t){console.error("Error in loading Header fragment",t)}}},t.prototype.setUtilityLinks=function(t){for(var e=this.header.querySelectorAll("#navigation-tabs .cmp-list__item .cmp-list__item-link"),n=e[0],i=e[1],o=this.header.querySelector("#".concat(t[0])),a=this.header.querySelector("#".concat(t[1])),s=window.location.pathname,r=0;r<this.personalPagesPath.length;r++)if(s.match(this.personalPagesPath[r])){n.classList.add("bold");break}for(r=0;r<this.businessPagesPath.length;r++)if(s.match(this.businessPagesPath[r])){i.classList.add("bold"),n.classList.remove("bold"),o.classList.add("hide"),a.classList.add("show");break}},t.prototype.unselectDefaultTabs=function(t,e,n){var i=this;t.forEach((function(t){var o=i.header.querySelector("#".concat(t," .").concat(e)),a=i.header.querySelector("#".concat(t," .").concat(n));o&&(o.classList.remove(e),o.setAttribute(i.ariaSelected,"false")),a&&a.classList.remove(n);var s=i.header.querySelector("#".concat(t));s&&s.classList.add("tabs-loaded")}))},t.prototype.listenMouseHoverMainNav=function(t){var e=this;t.forEach((function(t){var n;e.header.querySelectorAll("#".concat(t," .cmp-tabs__tablist .cmp-tabs__tab")).forEach((function(i){i.addEventListener("mouseover",(function(){n=i.id,e.refreshActiveTab(t,i.id)})),i.addEventListener("mouseleave",(function(){n=null,setTimeout((function(){n||e.refreshActiveTab(t)}),1e3)}));var o=e.header.querySelector("[aria-labelledby=".concat(i.id,"] .container .cmp-container"));o.addEventListener("mouseleave",(function(){n=null,setTimeout((function(){n||e.refreshActiveTab(t)}),1e3)})),o.addEventListener("mouseover",(function(){n=i.id,e.refreshActiveTab(t,i.id)})),i.addEventListener("focusin",(function(){n=i.id,e.refreshActiveTab(t,i.id)}))})),e.header.querySelector("#".concat(t)).addEventListener("mouseleave",(function(){n=null,setTimeout((function(){n||e.refreshActiveTab(t)}),1e3)}))}))},t.prototype.listenHbClick=function(t,e){var n=this,i=this.header.querySelector("#".concat(t)),o=this.header.querySelector("#".concat(e)),a=this.header.querySelector("#overlay-container"),s=this.header.querySelector("#main-menu"),r=function(){a.classList.add("show"),s.classList.add("slide-in"),document.body.classList.add("noscroll"),n.htmlEle.classList.add("noscroll")};i.addEventListener("click",(function(){r()})),i.addEventListener("touchstart",(function(t){r(),t.stopPropagation()}));var c=function(){s.classList.remove("slide-in"),setTimeout((function(){var t=n.header.querySelector("#utility-links-hb .cmp-tabs__tabpanel.slide-in");t&&n.refreshActiveTabHb("utility-links-hb",t.id),a.classList.remove("show"),document.body.classList.remove("noscroll"),n.htmlEle.classList.remove("noscroll"),i.focus()}),350)};o.addEventListener("click",(function(){c()})),o.addEventListener("touchend",(function(){c()}))},t.prototype.keepFocusInContainer=function(t){var e=t[0],n=t[1];n.addEventListener("keydown",(function(t){"Tab"!==t.key||t.shiftKey||(t.preventDefault(),e.focus())})),e.addEventListener("keydown",(function(t){"Tab"===t.key&&t.shiftKey&&(t.preventDefault(),n.focus())}))},t.prototype.getMobileHbElem=function(){var t=this.header.querySelector("#tangerine-logo-hamburger .cmp-image__link"),e=this.header.querySelector("#search-hamburger"),n=this.header.querySelector("#login-hamburger");return[window.innerWidth<768?t:e,n]},t.prototype.listenHbSubNavClicks=function(t){var e=this;t.forEach((function(t){var n=e.header.querySelectorAll("#".concat(t," .cmp-tabs__tab"));n.forEach((function(i,o){i.addEventListener("click",(function(){e.refreshActiveTabHb(t,i.id)})),i.addEventListener("keydown",(function(i){var a=-1;"ArrowUp"===i.code||"ArrowLeft"===i.code?o>0&&(a=o-1):"ArrowDown"===i.code||"ArrowRight"===i.code?o<n.length-1&&(a=o+1):"Enter"!==i.code&&"Space"!==i.code||(a=o),a>=0&&e.refreshActiveTabHb(t,n[a].id)}))}))}))},t.prototype.listenHbSubNavBackClicks=function(t){var e=this;t.forEach((function(t){var n=e.header.querySelector("#".concat(t));if(n){var i=n.closest(".cmp-tabs__tabpanel"),o=e.header.querySelector("#".concat(i.getAttribute("aria-labelledby")));n.addEventListener("click",(function(){o.classList.remove(e.activeTab),o.setAttribute(e.ariaSelected,"false"),i.classList.remove("slide-in"),setTimeout((function(){i.classList.remove(e.activeTabPanel),o.focus()}),350)}));var a=i.querySelectorAll(".cmp-list__item-link");e.keepFocusInContainer([n,a[a.length-1]])}}))},t.prototype.refreshActiveTabHb=function(t,e){var n=this.header.querySelector("#".concat(t," .cmp-tabs__tabpanel.slide-in"));if(n){n.classList.remove("slide-in"),n.classList.remove(this.activeTabPanel),n.setAttribute("aria-hidden","true");var i=this.header.querySelector("#".concat(n.getAttribute("aria-labelledby"),".").concat(this.activeTab));i.classList.remove(this.activeTab),i.setAttribute(this.ariaSelected,"false")}var o=this.header.querySelector("#".concat(e));o.classList.add(this.activeTab),o.setAttribute(this.ariaSelected,"true");var a=this.header.querySelector("[aria-labelledby=".concat(e,"]"));if(a){a.classList.add(this.activeTabPanel),a.classList.add("slide-in");var s=a.querySelector("button[id*=-back-]");setTimeout((function(){s.focus()}),350)}},t.prototype.refreshActiveTab=function(t,e){void 0===e&&(e="");var n=this.header.querySelector("#".concat(t," .cmp-tabs__tab.").concat(this.activeTab)),i=this.header.querySelector("#".concat(t," .cmp-tabs__tabpanel.").concat(this.activeTabPanel));if(n&&i&&(n.classList.remove(this.activeTab),n.setAttribute(this.ariaSelected,"false"),i.classList.remove(this.activeTabPanel)),e){var o=this.header.querySelector("#".concat(e));o.classList.add(this.activeTab),o.setAttribute(this.ariaSelected,"true"),this.header.querySelector("[aria-labelledby=".concat(o.id,"]")).classList.add(this.activeTabPanel)}},t.prototype.listenPageScroll=function(){var t=this.header.querySelector("#main-navigation-container"),e=this.header.querySelector("#main-navigation-scrolled"),n=window.innerWidth<1280?0:50,i=window.innerWidth<768,o=this.header.querySelector("#cta-container-scroll-hb"),a=this.header.querySelector("#tangerine-logo");window.addEventListener("scroll",(function(){window.scrollY>n?(t.classList.add("stick-top"),e.style.display="block",i&&(o.classList.add("show"),a.classList.add("hide"))):(t.classList.remove("stick-top"),e.style.display="none",i&&(o.classList.remove("show"),a.classList.remove("hide")))}))},t.prototype.listenLogout=function(t){var e=this;t.forEach((function(t){var n=e.header.querySelector("#".concat(t));n&&n.addEventListener("click",(function(t){t.preventDefault(),K(!0)}))}))},t.prototype.listenToFeedback=function(t){var e=this.header.querySelector("#".concat(t)),n=document.querySelector(".medallia-feedback-button");e&&e.addEventListener("click",(function(t){t.preventDefault(),n.click()}))},t.prototype.overrideActionText=function(t,e){var n=t.querySelector(".cmp-button"),i=t.querySelector(".cmp-button__text");i&&(i.innerText=e);var o=n.dataset.cmpDataLayer,a=n.id;try{var s=JSON.parse(o);"object"==typeof s&&s&&s[a]&&(s[a]["dc:title"]=e,window.adobeDataLayer.push(s),n.dataset.cmpDataLayer=JSON.stringify(s))}catch(t){console.warn(t)}},t.prototype.overrideActionAria=function(t,e){var n=t.querySelector(".cmp-button");n&&(n.ariaLabel=e)},t.prototype.overrideActionLink=function(t,e){var n=t.querySelector(".cmp-button");if(n&&(n.href=e),"#"===e.charAt(0)){var i=document.querySelector(e);i&&i.dispatchEvent(new CustomEvent("rebind-triggers"))}var o=n.dataset.cmpDataLayer,a=n.id;try{var s=JSON.parse(o);"object"==typeof s&&s&&s[a]&&(s[a]["xdm:linkURL"]=e,window.adobeDataLayer.push(s),n.dataset.cmpDataLayer=JSON.stringify(s))}catch(t){console.warn(t)}},t.prototype.handleActionOverrides=function(){this.visitorActionOverride(),this.clientActionOverride(),this.businessActionOverride(),this.mobileActionOverride()},t.prototype.visitorActionOverride=function(){var t=this;this.primaryActionsVisitor&&this.primaryActionsVisitor.length>0&&this.primaryActionsVisitor.forEach((function(e){null!==t.actionVisitorText&&t.overrideActionText(e,t.actionVisitorText),null!==t.actionVisitorAria&&t.overrideActionAria(e,t.actionVisitorAria),null!==t.actionVisitorLink&&t.overrideActionLink(e,t.actionVisitorLink)}))},t.prototype.clientActionOverride=function(){var t=this;this.primaryActionsClient&&this.primaryActionsClient.length>0&&this.primaryActionsClient.forEach((function(e){null!==t.actionClientText&&t.overrideActionText(e,t.actionClientText),null!==t.actionClientAria&&t.overrideActionAria(e,t.actionClientAria),null!==t.actionClientLink&&t.overrideActionLink(e,t.actionClientLink)}))},t.prototype.businessActionOverride=function(){var t=this;this.primaryActionsBusiness&&this.primaryActionsBusiness.length>0&&this.primaryActionsBusiness.forEach((function(e){null!==t.actionBusinessClientText&&t.overrideActionText(e,t.actionBusinessClientText),null!==t.actionBusinessClientAria&&t.overrideActionAria(e,t.actionBusinessClientAria),null!==t.actionBusinessClientLink&&t.overrideActionLink(e,t.actionBusinessClientLink)}))},t.prototype.mobileActionOverride=function(){X&&this.header.querySelectorAll("#login, #login-hamburger").forEach((function(t){var e=et(!1,Q?"download-app":"login");t.href=e;var n=t.dataset.cmpDataLayer,i=t.id;try{var o=JSON.parse(n);"object"==typeof o&&o&&o[i]&&(o[i]["xdm:linkURL"]=e,window.adobeDataLayer.push(o),t.dataset.cmpDataLayer=JSON.stringify(o))}catch(t){console.warn(t)}}))},t.prototype.addProductCode=function(){var t="products=",e=document.getElementById("maincontent").querySelector('a[href*="'.concat(t,'"]'));if(e){var n=e.getAttribute("href");if(e.getAttribute("href")&&n.indexOf(t)>0){var i=n.indexOf(t)+9,o=n.substring(i).indexOf("&"),a=n.substring(i).substring(0,o>0?o:n.length),s=document.getElementById("become-a-client"),r=function(e){var n=e.getAttribute("href");if(n){var i="?";n.indexOf("?")>0&&(i="&"),e.setAttribute("href","".concat(n).concat(i).concat(t).concat(a)),function(t){var e="data-cmp-data-layer";if(t.getAttribute(e)){var n=JSON.parse(t.getAttribute(e));n[t.id]["xdm:linkURL"]=t.getAttribute("href")||"",t.setAttribute(e,JSON.stringify(n))}else console.warn("utils: Attempted to update data-layer of link with no data-layer")}(e)}};s?r(s):console.error("Header: Could not fetch adaptive CTA");var c=document.getElementById("get-started");c?r(c):console.error("Header: Could not fetch main CTA")}}},t}();window.addEventListener("load",(function(){new it("header.experiencefragment").init()}));n(413),n(29);!function(){var t=window.location.search,e=new V,n=new URLSearchParams(t),i="afflres",o="extres",a="tngres",s="default",r="search",l=14,d=n.get("utm_source"),u=n.get("utm_medium"),p=n.get("utm_content"),h=n.get("utm_campaign"),m=n.get("shrtag"),f=n.get("site"),y=n.get("banner"),v=n.get("acid"),b={},g=n.get("site_id"),E=n.get("interact_zone"),S=n.get("offer_id"),L=n.get("tngod"),A=n.get("sitegclid_id"),w=document.referrer&&document.referrer.indexOf(".google.")>-1,C=!!A;if(m&&f&&y){var k=void 0;""===(k=document.referrer)&&(k=0);var T=new Date((new Date).setDate((new Date).getDate()+14)),I="utm_source="+encodeURIComponent(d);I+="|utm_medium="+encodeURIComponent(u),I+="|utm_campaign="+encodeURIComponent(h),I+="|utm_content="+encodeURIComponent(p),I+="|shrtag="+encodeURIComponent(m),I+="|site="+encodeURIComponent(f),I+="|banner="+encodeURIComponent(y),I+="|acid="+encodeURIComponent(v),I+="|referrer="+encodeURIComponent(k),c.set_raw("shrres",I,T,"/","","")}function _(t){var e=b[t],n=(b[s]||{}).lifespan||l,i=e&&e.lifespan||n,o=new Date;return o.setTime(o.getTime()+60*i*60*1e3*24),o.toUTCString()}function O(t,e,n){c&&c.set(t,n,e,"/","","")}(m||g||E||S||C||w)&&e.get("/content/dam/tangerine-shared/json/site-id-map.json",{}).then((function(t){return t.json()})).then((function(t){b=t,function(){var t=(new Date).getTime(),e=window.location.href;if(m)O(i,_(d),[t,e].join("|"));else if(g)O(o,_(g),[t,e].join("|"));else if(E||S){var n=L;e=e.replace("tngod="+n,""),O(a,_(""),[t,e].join("|"))}else{var s=_(r),c=document.referrer&&document.referrer.indexOf(".google.")>-1;(!!A||c)&&O(o,s,[t,e].join("|"))}}()}))}();n(40),n(68),n(663);var ot="cmp-accordion__panel",at="".concat(ot,"--expanded"),st=function(){function t(t){this.accordionEl=t,this.panelContainer=this.accordionEl.querySelector(".".concat(ot)),this.panelObserverConfig={attributes:!0,childList:!1,subtree:!1}}return t.prototype.init=function(){this.panelObserver=new MutationObserver(this.observerCallback),this.panelObserver.observe(this.panelContainer,this.panelObserverConfig)},t.prototype.observerCallback=function(t,e){for(var n=function(t){if("attributes"===t.type&&"class"===t.attributeName){var e=t.target;if(e.classList.contains(at)){e.style.visibility="hidden",e.style.maxHeight="none";var n=e.clientHeight>0?e.clientHeight+50+"px":"1000px";e.style.maxHeight="0px",e.style.display="block",setTimeout((function(){e.style.visibility="visible",e.style.maxHeight=n}),50)}else e.style.maxHeight="0px",setTimeout((function(){e.classList.contains("cmp-accordion__panel--hidden")&&(e.style.display="none")}),500)}},i=0,o=t;i<o.length;i++){n(o[i])}},t}();function rt(){var t=document.querySelectorAll("[data-".concat("cmp","-hook-").concat("accordion",'="item"]'));t&&t.length&&t.forEach((function(t){new st(t).init()}))}"loading"!==document.readyState?rt():document.addEventListener("DOMContentLoaded",rt);var ct=function(){function t(t){this.barElement=t,this.browserSession="alertBarDismissed"}return t.prototype.init=function(){var t=this;null==sessionStorage.getItem(this.browserSession)&&dt(this.barElement),this.barElement.querySelector(".cmp-button--icon button").addEventListener("click",(function(){sessionStorage.setItem(t.browserSession,"true"),ut(t.barElement)}))},t}(),lt=function(){function t(t){this.browserCookie="offerBarDismissed",this.barElement=t,this.cookieLength=2592e3,this.xfRoot=this.barElement.closest(".cmp-experiencefragment")}return t.prototype.shouldBeSticky=function(){var t="hero-content-wrapper",e=document.getElementById(t);return e?e.getBoundingClientRect().bottom<0:(console.error("Offer bar: no ".concat(t," ID found on page")),!0)},t.prototype.applySticky=function(){if(!c.get(this.browserCookie)){this.barElement.style.cssText=this.shouldBeSticky()?"\n      position: fixed;\n      display: flex;\n      top: calc(var(--nav-height) - 1px);\n    ":"\n      display: flex;\n    "}},t.prototype.stickyBar=function(){var t=this;this.xfRoot.style.height="".concat(this.barElement.clientHeight-1,"px"),window.addEventListener("scroll",(function(){return t.applySticky()})),this.applySticky(),window.addEventListener("scroll",(function(){return t.adjustSpacing()})),this.adjustSpacing()},t.prototype.adjustSpacing=function(){var t=document.getElementById("utility-bar");t&&window.scrollY<=t.clientHeight?this.barElement.style.top="calc(var(--nav-height) - 1px + ".concat(t.clientHeight-window.scrollY,"px)"):this.barElement.style.top="calc(var(--nav-height) - 1px)"},t.prototype.init=function(){var t=this;c.get(this.browserCookie)||(this.barElement.querySelector(".cmp-button--icon button").addEventListener("click",(function(){c.set(t.browserCookie,"true",t.cookieLength,"/","",""),t.xfRoot.style.height="",ut(t.barElement)})),this.stickyBar())},t}(),dt=function(t){t.style.display="flex",window.scrollTo(0,0)},ut=function(t){t.style.display="none"};function pt(){var t="container";!function(t,e,n){var i=".".concat(t,"-").concat(e,"--").concat(n,"__warning, .").concat(t,"-").concat(e,"--").concat(n,"__info"),o=document.querySelector(i);o&&new ct(o).init()}("cmp",t,"alert-bar");!function(t,e,n){var i=".".concat(t,"-").concat(e,"--").concat(n,"__offer-subdued, .").concat(t,"-").concat(e,"--").concat(n,"__offer-secondary"),o=document.querySelector(i);o&&new lt(o).init()}("cmp",t,"offer-bar")}"loading"!==document.readyState?pt():document.addEventListener("DOMContentLoaded",pt);var ht=function(){function t(t){this.elements=t,t.length||console.error("Download App CTA: could not be found")}return t.prototype.init=function(){this.elements.forEach((function(t){t.addEventListener("click",(function(){window.location.href=et(Q,"login")}))}))},t}();function mt(){var t=".".concat("cmp","-").concat("button","--").concat("download-app-cta"," button"),e=document.querySelectorAll(t);e.length&&new ht(e).init()}"loading"!==document.readyState?mt():document.addEventListener("DOMContentLoaded",mt);var ft=function(){function t(t){this.containerModalEl=t,this.modalEl=this.containerModalEl.childNodes[1],this.closeBtn=this.modalEl.querySelector(".cmp-container--modal-header button"),this.closeModalBtns=this.modalEl.querySelectorAll(".cmp-container--modal-button-container .cmp-button--modal-close button"),this.modalTriggers,this.boundModalTriggers=[]}return t.prototype.init=function(){this.modalEl.id;this.bindTriggers(),this.bindClose(),this.trapTabbing(),this.bindWindowListeners()},t.prototype.bindTriggers=function(){var t=this;this.modalTriggers=document.querySelectorAll('[href="#'.concat(this.modalEl.id,'"]')),this.modalTriggers.forEach((function(e){t.boundModalTriggers.includes(e)||(e.addEventListener("click",(function(e){t.showModal(e),t.closeBtn.focus()})),t.boundModalTriggers.push(e))}))},t.prototype.bindWindowListeners=function(){this.modalEl.addEventListener("rebind-triggers",function(t){this.bindTriggers()}.bind(this))},t.prototype.bindClose=function(){var t=this;this.closeBtn.addEventListener("click",(function(){t.closeModal()})),this.containerModalEl.addEventListener("keydown",(function(e){"Escape"==e.key&&t.closeModal()})),this.closeModalBtns.forEach((function(e){e.addEventListener("click",(function(){t.closeModal()}))}))},t.prototype.showModal=function(t){this.containerModalEl.style.display="flex",window.modalSource=t.target},t.prototype.closeModal=function(){this.containerModalEl.style.display="none",window.modalSource.focus(),delete window.modalSource},t.prototype.trapTabbing=function(){var t=this,e=this.modalEl.querySelectorAll("a, button"),n=e[e.length-1];this.closeBtn.addEventListener("keydown",(function(t){"Tab"==t.key&&t.shiftKey&&(t.preventDefault(),n.focus())})),n.addEventListener("keydown",(function(e){"Tab"!=e.key||e.shiftKey||(e.preventDefault(),t.closeBtn.focus())}))},t}(),yt=function(){function t(t){this.containsInsightClass="cmp-container--default-card-row-insights",this.containerEl=t}return t.prototype.init=function(){this.containerEl.querySelector(".insightcard")&&this.containerEl.classList.add(this.containsInsightClass)},t}();function vt(){var t,e,n,i,o;t="container",e=".".concat("cmp","-").concat(t,"--modal-container"),(n=document.querySelectorAll(e))&&n.length&&n.forEach((function(t){new ft(t).init()})),i="cmp",o="container",["default-card-row-sextuple","default-card-row-double","default-card-row-triple"].forEach((function(t){var e=".".concat(i,"-").concat(o,"--").concat(t);document.querySelectorAll(e).forEach((function(t){new yt(t).init()}))}))}"loading"!==document.readyState?vt():document.addEventListener("DOMContentLoaded",vt);var bt=function(){function t(t,e){this.textElement=t,this.triggerHref=e}return t.prototype.init=function(){this.textElement.setAttribute("href",this.triggerHref);var t=this.textElement.getAttribute("data-cmp-data-layer"),e=JSON.parse(t);e[this.textElement.id]["xdm:linkURL"]=this.triggerHref,this.textElement.setAttribute("data-cmp-data-layer",JSON.stringify(e))},t}();function gt(){var t=".".concat("cmp","-").concat("button","[id^=").concat("feedback-trigger","]"),e=document.querySelectorAll(t);e&&e.length&&e.forEach((function(t){new bt(t,"javascript:document.querySelector('.medallia-feedback-button').click();").init()}))}"loading"!==document.readyState?gt():document.addEventListener("DOMContentLoaded",gt);var Et=function(t,e,n){var i=document.createElement("div");i.classList.add("cmp-text","cmp-forms-validity-error"),i.setAttribute("data-cmp-forms-validity-message-type",e),i.setAttribute("data-cmp-forms-validity-input-bind",n);var o=document.createElement("i");o.classList.add("cmp-forms-validity-error--icon");var a=document.createElement("p");return a.textContent=t,i.appendChild(o),i.appendChild(a),i};function St(){return document.head.querySelector("[name=wcmmode]").getAttribute("content")}var Lt=function(){function t(t){this.componentEl=t,this.selectEl=this.componentEl.querySelector("select"),this.options=this.selectEl.querySelectorAll("option"),this.parentEl=this.componentEl.parentNode,this.labelEl=this.parentEl.querySelector("label"),this.selectId=this.selectEl.id,this.disableActions=!1}return t.prototype.init=function(){var t=this,e=this.labelEl.getAttribute("for");if(this.labelEl.id=e.replace("options","label"),this.customSelectedEl=document.createElement("div"),this.selectEl.insertAdjacentElement("afterend",this.customSelectedEl),this.customSelectedEl.classList.add("cmp-form-options__field--drop-down-custom-selected"),this.customSelectedEl.insertAdjacentElement("beforeend",this.selectEl),this.parentEl.classList.contains("cmp-form-options--force-disabled")&&(this.selectEl.setAttribute("disabled","disabled"),this.parentEl.classList.add("cmp-form-options--disabled"),this.disableActions=!0),this.parentEl.classList.contains("cmp-form-options--force-readonly")&&(this.selectEl.setAttribute("readonly","readonly"),this.parentEl.classList.add("cmp-form-options--readonly"),this.disableActions=!0),"FORM"!=this.parentEl.parentElement.tagName&&this.parentEl.parentElement.classList.contains("cmp-container")){this.parentEl.parentElement.querySelectorAll('[class^="text cmp-form-support--error"]').forEach((function(e){var n=e.classList.value.replace("text cmp-form-support--error-",""),i=e.querySelector("p")?e.querySelector("p").innerText:"";t.appendValidityMessage(i,n),"EDIT"!=St()&&e.remove()}));var n=this.parentEl.parentNode.querySelector(".cmp-text-form-info-message");if(n&&n.querySelector("p")){var i='<div class="cmp-form-options--tooltip">\n                    <span class="cmp-form-options--tooltip-text">'.concat(n.querySelector("p").innerText,"</span>\n                </div>");this.parentEl.querySelector("label").insertAdjacentHTML("beforeend",i),"EDIT"!=St()&&n.remove()}}this.disableActions||(this.selectEl.addEventListener("input",this.onInput.bind(this)),this.selectEl.addEventListener("invalid",this.onInvalid.bind(this))),this.parentEl.classList.contains("cmp-form-options--force-custom-error")&&(this.componentEl.classList.add("cmp-form-support--error-customError"),this.selectEl.reportValidity())},t.prototype.onInput=function(t){this.componentEl.classList.value="cmp-form-options cmp-form-options--drop-down";var e=t.target.validity;0==e.valid&&(e.patternMismatch&&this.componentEl.classList.add("cmp-form-support--error-patternMismatch"),e.typeMismatch&&this.componentEl.classList.add("cmp-form-support--error-typeMismatch"),e.tooLong&&this.componentEl.classList.add("cmp-form-support--error-tooLong"),e.tooShort&&this.componentEl.classList.add("cmp-form-support--error-tooShort"),e.customError&&this.componentEl.classList.add("cmp-form-support--error-customError"),e.rangeOverflow&&this.componentEl.classList.add("cmp-form-support--error-rangeOverflow"),e.rangeUnderflow&&this.componentEl.classList.add("cmp-form-support--error-rangeUnderflow"))},t.prototype.onInvalid=function(t){t.preventDefault();var e=t.target.validity;0==e.valid&&(1==e.valueMissing&&this.componentEl.classList.add("cmp-form-support--error-valueMissing"),e.patternMismatch&&this.componentEl.classList.add("cmp-form-support--error-patternMismatch"),e.badInput&&this.componentEl.classList.add("cmp-form-support--error-badInput"),e.customError&&this.componentEl.classList.add("cmp-form-support--error-customError"),e.rangeOverflow&&this.componentEl.classList.add("cmp-form-support--error-rangeOverflow"),e.rangeUnderflow&&this.componentEl.classList.add("cmp-form-support--error-rangeUnderflow"),e.stepMismatch&&this.componentEl.classList.add("cmp-form-support--error-stepMismatch"),e.tooLong&&this.componentEl.classList.add("cmp-form-support--error-tooLong"),e.tooShort&&this.componentEl.classList.add("cmp-form-support--error-tooShort"),e.typeMismatch&&this.componentEl.classList.add("cmp-form-support--error-typeMismatch"))},t.prototype.appendValidityMessage=function(t,e){var n=Et(t,e,this.selectId);this.selectEl.insertAdjacentElement("afterend",n)},t}(),At=function(){function t(t){this.componentEl=t,this.parentEl=this.componentEl.parentNode,this.checkBoxEls=this.componentEl.querySelectorAll(".cmp-form-options__field--checkbox")}return t.prototype.init=function(){var t=this;(this.parentEl.classList.contains("cmp-form-options--force-disabled")?(this.checkBoxEls.forEach((function(t){t.setAttribute("disabled","disabled")})),this.parentEl.classList.add("cmp-form-options--disabled")):this.checkBoxEls.forEach((function(t){t.hasAttribute("disabled")&&t.parentElement.classList.add("cmp-form-options--disabled")})),"FORM"!=this.parentEl.parentElement.tagName&&this.parentEl.parentElement.classList.contains("cmp-container"))&&this.parentEl.parentElement.querySelectorAll('[class^="text cmp-form-support--error"]').forEach((function(e){var n=e.classList.value.replace("text cmp-form-support--error-",""),i=e.querySelector("p")?e.querySelector("p").innerText:"";t.appendValidityMessage(i,n),"EDIT"!=St()&&e.remove()}));this.checkBoxEls.forEach((function(t){if(t.setAttribute("tabindex","-1"),!t.hasAttribute("disabled")){var e=t.parentElement;"LABEL"==e.tagName&&(e.setAttribute("tabindex","0"),e.addEventListener("keypress",(function(e){"Enter"!=e.code&&"Space"!=e.code||(e.preventDefault(),"true"!=t.getAttribute("checked")?t.setAttribute("checked","true"):t.removeAttribute("checked"))})))}})),this.checkBoxEls.forEach((function(e){e.addEventListener("input",t.onInput.bind(t)),e.addEventListener("invalid",t.onInvalid.bind(t))})),this.parentEl.classList.contains("cmp-form-options--force-custom-error")&&(this.componentEl.classList.add("cmp-form-support--error-customError"),this.checkBoxEls.forEach((function(t){t.reportValidity()})))},t.prototype.onInput=function(t){this.componentEl.classList.value="cmp-form-options cmp-form-options--checkbox";var e=t.target.validity;0==e.valid&&(e.patternMismatch&&this.componentEl.classList.add("cmp-form-support--error-patternMismatch"),e.typeMismatch&&this.componentEl.classList.add("cmp-form-support--error-typeMismatch"),e.tooLong&&this.componentEl.classList.add("cmp-form-support--error-tooLong"),e.tooShort&&this.componentEl.classList.add("cmp-form-support--error-tooShort"),e.customError&&this.componentEl.classList.add("cmp-form-support--error-customError"),e.rangeOverflow&&this.componentEl.classList.add("cmp-form-support--error-rangeOverflow"),e.rangeUnderflow&&this.componentEl.classList.add("cmp-form-support--error-rangeUnderflow"))},t.prototype.onInvalid=function(t){t.preventDefault();var e=t.target.validity;0==e.valid&&(1==e.valueMissing&&this.componentEl.classList.add("cmp-form-support--error-valueMissing"),e.patternMismatch&&this.componentEl.classList.add("cmp-form-support--error-patternMismatch"),e.badInput&&this.componentEl.classList.add("cmp-form-support--error-badInput"),e.customError&&this.componentEl.classList.add("cmp-form-support--error-customError"),e.rangeOverflow&&this.componentEl.classList.add("cmp-form-support--error-rangeOverflow"),e.rangeUnderflow&&this.componentEl.classList.add("cmp-form-support--error-rangeUnderflow"),e.stepMismatch&&this.componentEl.classList.add("cmp-form-support--error-stepMismatch"),e.tooLong&&this.componentEl.classList.add("cmp-form-support--error-tooLong"),e.tooShort&&this.componentEl.classList.add("cmp-form-support--error-tooShort"),e.typeMismatch&&this.componentEl.classList.add("cmp-form-support--error-typeMismatch"))},t.prototype.appendValidityMessage=function(t,e){this.checkBoxEls.forEach((function(n){var i=Et(t,e,"");n.parentElement.insertAdjacentElement("afterend",i)}))},t}(),wt=function(){function t(t){this.componentEl=t,this.parentEl=this.componentEl.parentNode,this.radioEls=this.componentEl.querySelectorAll(".cmp-form-options__field--radio")}return t.prototype.init=function(){this.parentEl.classList.contains("cmp-form-options--force-disabled")?(this.radioEls.forEach((function(t){t.setAttribute("disabled","disabled")})),this.parentEl.classList.add("cmp-form-options--disabled")):this.radioEls.forEach((function(t){t.hasAttribute("disabled")&&t.parentElement.classList.add("cmp-form-options--disabled")}))},t}();function Ct(){for(var t={self:".cmp-form-options"},e=document.querySelectorAll(t.self),n=0;n<e.length;n++){if(e[n].classList.contains("cmp-form-options--drop-down"))new Lt(e[n]).init();if(e[n].classList.contains("cmp-form-options--checkbox"))new At(e[n]).init();if(e[n].classList.contains("cmp-form-options--radio"))new wt(e[n]).init()}}function kt(t,e,n){var i=n.dataset,o=[],a=t,s=["is","hook"+(a=a.charAt(0).toUpperCase()+a.slice(1))];for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var c=i[r];0===r.indexOf(e)&&(r=(r=r.slice(e.length)).charAt(0).toLowerCase()+r.substring(1),-1===s.indexOf(r)&&(o[r]=c))}return o}"loading"!==document.readyState?Ct():document.addEventListener("DOMContentLoaded",Ct);var Tt=function(){function t(t,e){this.componentEl=t,this.inputEl=this.componentEl.querySelector("input"),this.inputOptions=e,this.inputID=this.inputEl.id,this.parentEl=this.componentEl.parentNode,this.supportingInputTypes=[{class:"cmp-form-text--currency",icon:!0,position:"afterbegin",pattern:"^d+(.|,)d{2}$"},{class:"cmp-form-text--currency-invert",icon:!0,position:"beforeend",pattern:"^d+(.|,)d{2}$"}]}return t.prototype.init=function(){var t=this;(this.inputOptions.requiredMessage&&this.appendValidityMessage(this.inputOptions.requiredMessage,"valueMissing"),"FORM"!=this.parentEl.parentElement.tagName&&this.parentEl.parentElement.classList.contains("cmp-container"))&&this.parentEl.parentElement.querySelectorAll('[class^="text cmp-form-support--error"]').forEach((function(e){var n=e.classList.value.replace("text cmp-form-support--error-",""),i=e.querySelector("p")?e.querySelector("p").innerText:"";t.appendValidityMessage(i,n),"EDIT"!=St()&&e.remove()}));"tel"==this.inputEl.getAttribute("type")&&this.inputEl.addEventListener("keyup",this.formatToPhone.bind(this)),"firstName"!=this.inputEl.getAttribute("name")&&"lastName"!=this.inputEl.getAttribute("name")||(this.inputEl.addEventListener("keyup",this.nameValidation.bind(this)),this.inputEl.maxLength=32),this.parentEl.classList.contains("cmp-form-text--force-disabled")&&(this.inputEl.setAttribute("disabled","disabled"),this.parentEl.classList.add("cmp-form-text--disabled")),this.checkPartentSupportingClasses(),this.inputEl.hasAttribute("readonly")&&this.parentEl.classList.add("cmp-form-text--readonly"),this.inputEl.addEventListener("invalid",this.onInvalid.bind(this)),this.inputEl.addEventListener("input",this.onInput.bind(this)),this.inputEl.addEventListener("keydown",this.onKeydown.bind(this)),this.parentEl.classList.contains("cmp-form-text--force-custom-error")&&(this.componentEl.classList.add("cmp-form-support--error-customError"),this.inputEl.reportValidity())},t.prototype.formatToPhone=function(t){this.componentEl.classList.remove("cmp-form-support--error-customError");var e=t.target,n=t.target.value.replace(/\D/g,"").substring(0,10),i=n.substring(0,3),o=n.substring(3,6),a=n.substring(6,10);if(n.length>6?e.value="(".concat(i,")").concat(o,"-").concat(a):n.length>3?e.value="(".concat(i,")").concat(o):n.length>0&&(e.value="(".concat(i)),!/^[(]?[0-9]{3}[)]?[ ,-\.]?[2-9]{1}[0-9]{2}[ ,-\.]?[0-9]{4}$/.test(this.inputEl.value)){var s=this.componentEl.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"] p').innerText;this.inputEl.setCustomValidity(s),this.componentEl.classList.add("cmp-form-support--error-customError")}},t.prototype.nameValidation=function(t){this.componentEl.classList.remove("cmp-form-support--error-customError");if(!/^([a-z A-Z-.\'/(/)àçéèëœùûìòáúýâêîôäïöüÿíóÀÇÉÈËŒÙÛÌÒÁÚÝÂÊÎÔÄÏÖÜŸÍÓ]){1,32}$/.test(t.target.value)){var e=this.componentEl.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"] p').innerText;this.inputEl.setCustomValidity(e),this.componentEl.classList.add("cmp-form-support--error-customError")}},t.prototype.onInvalid=function(t){t.preventDefault(),this.componentEl.classList.value="cmp-form-text",this.testValidity(t)},t.prototype.onInput=function(t){this.componentEl.classList.value="cmp-form-text",this.testValidity(t)},t.prototype.onKeydown=function(t){"Enter"==t.code&&(this.componentEl.classList.value="cmp-form-text",this.testValidity(t))},t.prototype.testValidity=function(t){var e=this,n=t.target.validity;0==n.valid&&(n.valueMissing&&this.componentEl.classList.add("cmp-form-support--error-valueMissing"),n.patternMismatch&&this.componentEl.classList.add("cmp-form-support--error-patternMismatch"),n.badInput&&this.componentEl.classList.add("cmp-form-support--error-badInput"),n.rangeOverflow&&this.componentEl.classList.add("cmp-form-support--error-rangeOverflow"),n.rangeUnderflow&&this.componentEl.classList.add("cmp-form-support--error-rangeUnderflow"),n.stepMismatch&&this.componentEl.classList.add("cmp-form-support--error-stepMismatch"),n.tooLong&&this.componentEl.classList.add("cmp-form-support--error-tooLong"),n.tooShort&&this.componentEl.classList.add("cmp-form-support--error-tooShort"),n.typeMismatch&&this.componentEl.classList.add("cmp-form-support--error-typeMismatch"),setTimeout((function(){n.customError&&e.componentEl.classList.add("cmp-form-support--error-customError")}),250))},t.prototype.appendValidityMessage=function(t,e){var n=Et(t,e,this.inputID);this.inputEl.insertAdjacentElement("afterend",n)},t.prototype.checkPartentSupportingClasses=function(){var t=this;this.supportingInputTypes.forEach((function(e){if(t.parentEl.classList.contains(e.class)){if(e.icon){var n=document.createElement("div");n.classList.add("cmp-form-text--input-wrapper"),t.inputEl.parentElement.insertBefore(n,t.inputEl),n.appendChild(t.inputEl)}e.pattern&&t.inputEl.setAttribute("pattern",e.pattern)}}))},t}();function It(){for(var t="formText",e={self:'[data-cmp-is="'+t+'"]'},n=document.querySelectorAll(e.self),i=0;i<n.length;i++){new Tt(n[i],kt(t,"cmp",n[i])).init()}}"loading"!==document.readyState?It():document.addEventListener("DOMContentLoaded",It);var _t=function(t,e,n){["b","a","p","span","li","h1","h2","h3","h4","h5","h6","th","td"].map((function(i){t.querySelectorAll(i).forEach((function(t){var i=t.innerText.match(e);i&&i.length>0&&i.forEach((function(e){t.innerText=t.innerText.replace(e,n)}))}))}))},Ot=function(){function t(t){this.componentEl=t,this.http=new V;var e=new Headers;e.append("Content-Type","application/json"),this.headers=e,this.successMessage=null,this.failMessage=null,this.successMessageID="activateFormSuccessWrapper",this.failMessageID="activateFormFailWrapper",this.name=""}return t.prototype.init=function(){var t=this;"EDIT"==St()&&this.componentEl.querySelectorAll("[id^=".concat(this.successMessageID,"],[id^=").concat(this.failMessageID,"]")).forEach((function(t){t.style.display="block"}));var e=new URLSearchParams(document.location.search);this.requestID=e.get("id"),this.requestType=e.get("type"),this.requestVersion=e.get("version"),this.requestVersion&&(this.successMessage=this.componentEl.querySelector("#".concat(this.successMessageID,"-").concat(this.requestVersion)),this.failMessage=this.componentEl.querySelector("#".concat(this.failMessageID,"-").concat(this.requestVersion))),null==this.successMessage&&(this.successMessage=this.componentEl.querySelector("#".concat(this.successMessageID))),null==this.failMessage&&(this.failMessage=this.componentEl.querySelector("#".concat(this.failMessageID))),this.initialCallActivate().then((function(){_t(t.successMessage,/resp.name/g,t.name),null!==t.successMessage?t.successMessage.style.display="block":console.warn("Form is missing authored success field")})).catch((function(){null!==t.failMessage?t.failMessage.style.display="block":console.warn("Form is missing authored fail field")}))},t.prototype.initialCallActivate=function(){var t=this;return new Promise((function(e,n){t.http.put("".concat(x,"?appId=").concat(D),{headers:t.headers,body:JSON.stringify({id:t.requestID,type:t.requestType})}).then((function(i){i.json().then((function(i){return i.error||"SUCCESS"!=i.response_status.status_code?n():e(t.name=i.name)}))}))}))},t}(),xt=function(){function t(t){this.componentEl=t,this.http=new V;var e=new Headers;e.append("Content-Type","application/json"),e.append("x-web-flavour","fbe"),this.headers=e,this.successMessage=this.componentEl.querySelector("#verificationFormSuccessWrapper"),this.failMessage=this.componentEl.querySelector("#verificationFormFailWrapper"),this.name=""}return t.prototype.init=function(){var t=this;"EDIT"==St()&&(this.successMessage.style.display="block",this.failMessage.style.display="block");var e=new URLSearchParams(document.location.search);this.requestID=e.get("id"),this.requestCustomerKey=e.get("ok"),this.name=e.get("firstname"),this.initialCallActivate().then((function(){_t(t.successMessage,/resp.name/g,t.name),t.successMessage.style.display="block"})).catch((function(){t.failMessage.style.display="block"}))},t.prototype.initialCallActivate=function(){var t=this;return new Promise((function(e,n){t.http.put("".concat(M,"?appId=").concat(q),{headers:t.headers,body:JSON.stringify({encrypted_email:t.requestID,customer_key:t.requestCustomerKey})}).then((function(t){t.json().then((function(t){return t.error||"SUCCESS"!=t.response_status.status_code?n():e()}))}))}))},t}(),Dt=function(t){window.addEventListener("load",(function(){var e={},n={"@type":"tangerine/components/button","dc:title":t.innerText};if(e[t.id]=n,window.adobeDataLayer&&window.adobeDataLayer.getState){var i=window.adobeDataLayer.getState();i&&i.component&&!i.component[t.id]&&(t.setAttribute("data-cmp-clickable","true"),t.setAttribute("data-cmp-data-layer",JSON.stringify(e)),window.addComponentEventListener(t))}}))},Mt=function(){function t(t){this.componentEl=t,this.http=new V;var e=new Headers;e.append("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.headers=e,this.emailField=t.querySelector("[name='emailAddress']"),this.lang=t.querySelector("[name='lang']"),this.consent=t.querySelector("[name='consent']"),this.isClient=t.querySelector("[name='isClient']"),this.productType=t.querySelector("[name='productType']"),this.submitBtn=t.querySelector("[type='submit']"),this.newsletterFormWrapper=this.componentEl.querySelector("#newsletterFormWrapper"),this.successMessage=this.componentEl.querySelector("#newsletterFormSuccessWrapper"),this.failMessage=this.componentEl.querySelector("#newsletterFormFailWrapper"),this.forceFail=!1}return t.prototype.init=function(){var t=this,e=new URLSearchParams(document.location.search);this.forceFail=!!e.get("forcefail"),Dt(this.submitBtn),this.submitBtn.addEventListener("click",this.handleSubmit.bind(this)),this.submitBtn.addEventListener("keydown",(function(e){"Space"!=e.code&&"Enter"!=e.code||t.handleSubmit.bind(t)}))},t.prototype.handleSubmit=function(t){var e=this;this.componentEl.classList.remove("cmp-form-support--error-customError"),t.preventDefault(),1==this.emailField.validity.valid?this.submitData().then((function(){e.successMessage.style.display="flex",e.newsletterFormWrapper.style.display="none"})).catch((function(){e.failMessage.style.display="flex";var t=e.componentEl.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"] p').innerText;e.emailField.setCustomValidity(t),e.emailField.parentElement.classList.add("cmp-form-support--error-customError")})):this.emailField.reportValidity()},t.prototype.submitData=function(){var t=this,e="emailAddress=".concat(this.emailField.value,"&firstName=&lastName=&isClient=").concat(this.isClient.value,"&productType=").concat(this.productType.value,"&lang=").concat(this.lang.value,"&consent=").concat(this.consent.value);return this.forceFail&&(e="failtest"),new Promise((function(n,i){t.http.post(P+F,{headers:t.headers,body:e}).then((function(t){t.json().then((function(t){return t||"success"==t.result?n():i()})).catch((function(){return i()}))})).catch((function(){return i()}))}))},t}(),qt=function(){function t(t){this.componentEl=t,this.http=new V;var e=new Headers;e.append("Content-Type","application/json"),"fr"==document.documentElement.lang||"fr-CA"==document.documentElement.lang?(e.append("Content-Language","fr_CA"),e.append("Accept-Language","fr_CA")):(e.append("Content-Language",document.documentElement.lang),e.append("Accept-Language",document.documentElement.lang)),this.headers=e,this.successMessage="#unsubscribeFormSuccessWrapper",this.failMessage="#unsubscribeFormFailWrapper",this.UNSUBSCRIBE_CONSTANTS=[{category:"REFR",class:"reFr"},{category:"FRWD",class:"frWd"},{category:"MFPROD",class:"mfProd"},{category:"_ALL_",class:"tbNk"},{category:"PARTNER",class:"partnEr",id:"partnErCb"},{category:"NEWS",class:"neWs",id:"neWsCb"},{category:"OFFR",class:"ofFr",id:"ofFrCb"},{category:"PROD",class:"prOd",id:"prOdCb"}],this.submitButton="#unsubSubmitButton",this.cancelButton="#unsubCancelButton",this.formFieldWrapper="#unsubFormFieldsWrapper",this.unsubscribe_fail_redirect=this.componentEl.querySelector(this.cancelButton).getAttribute("href")}return t.prototype.init=function(){var t=this;"EDIT"==St()&&(this.componentEl.querySelector(this.successMessage).style.display="block",this.componentEl.querySelector(this.failMessage).style.display="block",this.componentEl.querySelectorAll(".dn").forEach((function(t){t.classList.remove("dn")}))),this.componentEl.querySelector(this.submitButton).disabled=!0;var e=new URLSearchParams(document.location.search);this.requestID=e.get("id"),this.requestType=e.get("type"),this.requestCategory=e.get("category"),this.initialCallUnsub().then((function(e){if(_t(t.componentEl,/resp.email/g,t.email),_t(t.componentEl,/resp.TypeDesc/g,t.categories[0].desc),t.legalEntity&&t.legalEntityDesc){"Fonds d'investissement Tangerine Limitée"===t.legalEntityDesc?t.legalEntityDesc="Fonds d'investissement Tangerine ltée":"Banque Tangerine"===t.legalEntityDesc&&(t.legalEntityDesc="la Banque Tangerine"),_t(t.componentEl,/resp.legalEntityDesc/g,t.legalEntityDesc);var n=t.componentEl.querySelector('input[name="allPromotionsCb"]').value;t.componentEl.querySelector('input[name="allPromotionsCb"]').value="".concat(n," ").concat(t.legalEntityDesc)}t.legalEntity&&"TIFL"===t.legalEntity.toUpperCase()&&t.componentEl.querySelectorAll(".tIflDesc").forEach((function(t){t.classList.remove("dn")})),t.legalEntity&&"TBNK"===t.legalEntity.toUpperCase()&&t.categories&&"_ALL_"===t.categories[0].type.toUpperCase()&&t.componentEl.querySelectorAll(".tBnkDesc").forEach((function(t){t.classList.remove("dn")})),t.UNSUBSCRIBE_CONSTANTS.forEach((function(e){t.categories[0].type.toUpperCase()===e.category&&t.showCategoryEls(e)})),t.componentEl.querySelectorAll('input[type="checkbox"]').forEach((function(e){e.addEventListener("change",(function(e){var n=!1;"allPromotionsCb"==e.target.name&&1==e.target.checked?(n=!0,t.componentEl.querySelectorAll('input[type="checkbox"]').forEach((function(t){t.closest(".options").classList.contains("dn")||(t.checked=!0)}))):t.componentEl.querySelectorAll('input[type="checkbox"]').forEach((function(t){t.checked&&(n=!0)})),t.setSubmitButton(n)}))})),t.componentEl.querySelector(t.cancelButton).addEventListener("click",t.cancelEventHandler.bind(t)),t.componentEl.querySelector(t.cancelButton).addEventListener("keydown",(function(e){"Space"!=e.code&&"Enter"!=e.code||t.cancelEventHandler(e)})),Dt(t.componentEl.querySelector(t.submitButton)),t.componentEl.querySelector(t.submitButton).addEventListener("click",t.handleSubmit.bind(t)),t.componentEl.querySelector(t.submitButton).addEventListener("keydown",(function(e){"Space"!=e.code&&"Enter"!=e.code||t.handleSubmit(e)}))})).catch((function(){console.warn("Inital Unsubscribe Call Error"),t.cancel()}))},t.prototype.setSubmitButton=function(t){this.componentEl.querySelector("#unsubSubmitButton").disabled=!t},t.prototype.cancelEventHandler=function(t){t.preventDefault(),this.cancel()},t.prototype.cancel=function(){"EDIT"!=St()&&window.location.replace(this.unsubscribe_fail_redirect)},t.prototype.getCategories=function(){var t=this,e=[],n=[];if(this.componentEl.querySelectorAll('input[type="checkbox"]').forEach((function(t){t.checked&&e.push(t.value)})),e.length>0)return this.selectedCategoryDesc=e[0],e.forEach((function(e){e.includes("Marketing Communications from")||e.includes("toutes les communications marketing")?n.push({type:"_ALL_",desc:"All promotions message"}):n.push({type:t.categories[0].type,desc:encodeURI(t.categories[0].desc)})})),n;this.cancel()},t.prototype.handleSubmit=function(t){var e=this;t.preventDefault(),this.http.put("".concat(_,"?appId=").concat(O),{headers:this.headers,body:JSON.stringify({id:this.requestID,legal_entity:this.requestType,categories:this.getCategories()})}).then((function(t){t.json().then((function(t){if("SUCCESS"!=t.response_status.status_code)return e.cancel();t.categories&&t.categories[0].desc&&(_t(e.componentEl,/resp.ConfirmTypeDesc/g,e.selectedCategoryDesc),e.componentEl.querySelector(e.successMessage).style.display="block",e.componentEl.querySelector(e.formFieldWrapper).style.display="none")})).catch((function(){e.cancel()}))}))},t.prototype.showCategoryEls=function(t){t.id&&this.componentEl.querySelectorAll(".spCase").forEach((function(t){t.classList.remove("dn")})),this.componentEl.querySelectorAll(".".concat(t.class)).forEach((function(t){t.classList.remove("dn")}))},t.prototype.initialCallUnsub=function(){var t=this;return new Promise((function(e,n){t.http.post("".concat(_,"?appId=").concat(O),{headers:t.headers,body:JSON.stringify({id:t.requestID,legal_entity:t.requestType,type:t.requestCategory})}).then((function(i){i.json().then((function(i){return"SUCCESS"==i.response_status.status_code&&i.email&&i.categories&&i.other_legal_entities?(t.email=i.email,t.categories=i.categories,t.legalEntity=i.legal_entity,t.legalEntityDesc=i.legal_entity_desc,t.otherLegalEntities=i.other_legal_entities,e()):n()}))})).catch((function(){return n()}))}))},t}(),Nt=function(){function t(t){this.componentEl=t,this.http=new V;var e=new Headers;e.append("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),this.headers=e,this.emailField=t.querySelector("[name='emailAddress']"),this.emailFieldParent=this.emailField.parentElement,this.fnameField=t.querySelector("[name='firstName']"),this.lnameField=t.querySelector("[name='lastName']"),this.phoneField=t.querySelector("[name='phone']"),this.source=t.querySelector("[name='source']"),this.lang=t.querySelector("[name='lang']"),this.partnerSubscribed=t.querySelector("[name='partnerSubscribed']"),this.offerSubscribed=t.querySelector("[name='offerSubscribed']"),this.submitBtn=t.querySelector("[type='submit']"),this.bankshotFormWrapper=this.componentEl.querySelector("#bankshotFormWrapper"),this.successMessage=this.componentEl.querySelector("#bankshotFormSuccessWrapper"),this.failMessage=this.componentEl.querySelector("#bankshotFormFailWrapper"),this.forceFail=!1,this.emailDupe=!1}return t.prototype.init=function(){var t=this;this.submitBtn.disabled=!0;var e=new URLSearchParams(document.location.search);this.forceFail=!!e.get("forcefail"),Dt(this.submitBtn),this.submitBtn.addEventListener("click",this.handleSubmit.bind(this)),this.submitBtn.addEventListener("keydown",(function(e){"Space"!=e.code&&"Enter"!=e.code||t.handleSubmit.bind(t)})),this.emailField.addEventListener("keyup",this.emailValidation.bind(this)),this.emailField.addEventListener("keyup",this.canSubmit.bind(this)),this.fnameField.addEventListener("keyup",this.canSubmit.bind(this)),this.lnameField.addEventListener("keyup",this.canSubmit.bind(this)),this.phoneField.addEventListener("keyup",this.canSubmit.bind(this))},t.prototype.canSubmit=function(){1!=this.emailField.validity.valid||1!=this.fnameField.validity.valid||1!=this.lnameField.validity.valid||1!=this.phoneField.validity.valid?this.submitBtn.disabled=!0:this.submitBtn.disabled=!1},t.prototype.handleSubmit=function(t){var e=this;if(t.preventDefault(),1!=this.emailField.validity.valid||1!=this.fnameField.validity.valid||1!=this.lnameField.validity.valid||1!=this.phoneField.validity.valid)return this.fnameField.reportValidity(),this.lnameField.reportValidity(),this.phoneField.reportValidity(),1!=this.emailDupe&&(this.emailFieldParent.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"]').style.maxHeight="0",this.emailFieldParent.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"]').style.visibility="hidden",setTimeout((function(){e.emailFieldParent.classList.remove("cmp-form-support--error-customError"),e.emailFieldParent.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"]').style.visibility="visible",e.emailFieldParent.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"]').style.maxHeight="unset"}),400)),void this.emailField.reportValidity();this.submitData().then((function(){e.successMessage.style.display="block",e.bankshotFormWrapper.style.display="none",e.failMessage.style.display="none"})).catch((function(){e.failMessage.style.display="flex",e.successMessage.style.display="none"}))},t.prototype.submitData=function(){var t=this,e=this.phoneField.value.replace(/\D/g,""),n=this.getDate(),i=c.get("_ga"),o="emailAddress=".concat(this.emailField.value,"&phone=").concat(e,"&created=").concat(n,"&lang=").concat(this.lang.value,"&firstName=").concat(this.fnameField.value,"&lastName=").concat(this.lnameField.value,"&source=").concat(this.source.value,"&partnerSubscribed=").concat(this.partnerSubscribed.checked?"1":"0","&offerSubscribed=").concat(this.offerSubscribed.value,"&gaId=").concat(i,"&hasConsented=1");return this.forceFail&&(o="failtest"),new Promise((function(e,n){t.http.post(R+U,{headers:t.headers,body:o}).then((function(t){t.json().then((function(t){return t||"success"==t.result?e():n()})).catch((function(){return n()}))})).catch((function(){return n()}))}))},t.prototype.getDate=function(){var t=new Date;return t.getFullYear()+"-"+(1===(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(1===t.getDate().toString().length?"0"+t.getDate():t.getDate())+" "+(1===t.getHours().toString().length?"0"+t.getHours():t.getHours())+":"+(1===t.getMinutes().toString().length?"0"+t.getMinutes():t.getMinutes())},t.prototype.emailValidation=function(t){var e=this;this.emailField.setCustomValidity(""),this.emailFieldParent.classList.remove("cmp-form-support--error-customError"),this.emailDupe=!1;/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.target.value)&&this.isDuplicateEmail().then((function(){})).catch((function(){var t=e.emailFieldParent.querySelector('.cmp-forms-validity-error[data-cmp-forms-validity-message-type="customError"] p').innerText;e.emailField.setCustomValidity(t),e.emailFieldParent.classList.add("cmp-form-support--error-customError"),e.emailDupe=!0,e.submitBtn.disabled=!0}))},t.prototype.isDuplicateEmail=function(){var t=this,e="emailAddress=".concat(this.emailField.value,"&targetTable=tbl_bankshot");return new Promise((function(n,i){t.http.post(R+H,{headers:t.headers,body:e}).then((function(t){t.json().then((function(t){return t&&"no"==t.result?n():i()})).catch((function(){return i()}))})).catch((function(){return i()}))}))},t}(),Bt=function(){function t(t){this.componentEl=t}return t.prototype.init=function(){console.log("basic form loaded")},t}();function Pt(){for(var t={self:".".concat("cmp","-").concat("form")},e=document.querySelectorAll(t.self),n=0;n<e.length;n++){var i;switch(e[n].id){case"activateForm":i=new Ot(e[n]);break;case"verificationForm":i=new xt(e[n]);break;case"newsLetterForm":i=new Mt(e[n]);break;case"unsubscribeForm":i=new qt(e[n]);break;case"bankshotForm":i=new Nt(e[n]);break;default:i=new Bt(e[n])}i.init()}}"loading"!==document.readyState?Pt():document.addEventListener("DOMContentLoaded",Pt);var Ft=function(){function t(t){this.activeAlternativeClass=".cmp-languagenavigation__item--active",this.langAlternativeClass="a.cmp-languagenavigation__item-link",this.componentEl=t,this.langAlternativeLinks=this.componentEl.querySelectorAll(this.langAlternativeClass)}return t.prototype.updateLinkHref=function(t){var e=this;this.windowHash=window.location.hash,t&&(this.windowSearch=window.location.search),(this.windowHash||this.windowSearch)&&this.langAlternativeLinks.forEach((function(t){if(t.href){var n=!1,i=new URL(t.href);e.windowHash&&(n=!0,i.hash=e.windowHash),e.windowSearch&&(n=!0,i.search=e.windowSearch),n&&(t.href=i.toString(),e.pushUpdateToDL(t,i.toString()))}}))},t.prototype.init=function(){this.updateLinkHref(!0),this.activeAlternative=this.componentEl.querySelector(this.activeAlternativeClass),this.activeAlternative&&this.activeAlternative.setAttribute("aria-hidden","true")},t.prototype.pushUpdateToDL=function(t,e){var n=t.parentElement.getAttribute("data-cmp-data-layer");if(n)try{var i=JSON.parse(n),o=Object.keys(i);if(o.length){var a='{\n                        "component": {\n                            "'.concat(o[0],'": {\n                                "@type": "tangerine/components/languagenavigation/item",\n                                "xdm:linkURL": "').concat(e,'"\n                            }\n                        }\n                    }');"object"==typeof(a=JSON.parse(a))&&window.adobeDataLayer&&window.adobeDataLayer.push(a)}}catch(t){console.warn(t)}},t}();function Ut(){for(var t={self:".".concat("cmp","-").concat("languagenavigation")},e=document.querySelectorAll(t.self),n=function(){var t=new Ft(e[i]);t.init(),window.addEventListener("replaceState",(function(){t.updateLinkHref(!1)})),window.addEventListener("pushState",(function(){t.updateLinkHref(!1)})),window.addEventListener("hashchange",(function(){t.updateLinkHref(!1)}))},i=0;i<e.length;i++)n()}"loading"!==document.readyState?Ut():document.addEventListener("DOMContentLoaded",Ut);n(562);var Ht=function(t,e,n){void 0===e&&(e=Rt()),void 0===n&&(n=Rt());var i=t.getBoundingClientRect(),o=i.top,a=i.bottom;return o<e&&!(a<n)},Rt=function(){return parseInt(document.documentElement.style.getPropertyValue("--nav-height"))},Wt=function(){function t(t){this.tableWrapper=t}return t.prototype.init=function(){this.tableWrapper.querySelectorAll("table").forEach((function(t){var e=t.querySelector("thead th");document.addEventListener("scroll",(function(n){var i=Rt()+48;Ht(t,void 0,i)?e.classList.add("stickied"):e.classList.remove("stickied")}))}))},t}();function jt(){var t=document.getElementById("performance-table");t&&new Wt(t).init()}"loading"!==document.readyState?jt():document.addEventListener("DOMContentLoaded",jt);var Vt=function(){function t(t){var e=this;this.scrollTo=function(t){return e.tabsContainer.scrollTo({left:t,behavior:"smooth"})},this.tabsElementEl=t,this.tabsWrapper=this.tabsElementEl.querySelector(".cmp-tabs"),this.tabsContainer=this.tabsElementEl.querySelector(".cmp-tabs__tablist")}return t.prototype.makeTabVisible=function(t){var e=this.tabsContainer.getBoundingClientRect(),n=t.getBoundingClientRect();e.right<n.right&&this.scrollTo(this.tabsContainer.scrollLeft+n.width),n.left<e.left&&this.scrollTo(this.tabsContainer.scrollLeft-n.width)},t.prototype.init=function(){var t=this,e=document.createElement("div");e.id="leftArrow",e.style.width="48px",e.style.height="48px",e.innerHTML='<span class="leftArrow--icon" aria-hidden="true" ></span>',e.setAttribute("class","left-arrow arrow"),e.setAttribute("disabled","");var n=document.createElement("div");n.id="rightArrow",n.style.width="48px",n.style.height="48px",n.innerHTML='<span class="rightArrow--icon" aria-hidden="false"></span>',n.setAttribute("class","right-arrow arrow"),n.setAttribute("disabled",""),this.prependChild(this.tabsWrapper,e),this.prependChild(this.tabsWrapper,n);var i=document.getElementById("leftArrow"),o=document.getElementById("rightArrow"),a=this.tabsElementEl.querySelectorAll(".cmp-tabs__tab")[0],s=this.tabsContainer.scrollWidth,r=this.tabsContainer.clientWidth;this.tabsContainer&&(i.addEventListener("click",(function(){o.removeAttribute("disabled"),t.scrollTo(t.tabsContainer.scrollLeft-a.offsetWidth)})),o.addEventListener("click",(function(){i.removeAttribute("disabled"),t.scrollTo(t.tabsContainer.scrollLeft+a.offsetWidth)})),s>r&&o.removeAttribute("disabled"),this.tabsContainer.addEventListener("scroll",(function(){var e=t.tabsContainer.scrollWidth,n=t.tabsContainer.clientWidth;i.removeAttribute("disabled"),o.removeAttribute("disabled"),t.tabsContainer.scrollLeft<=0&&i.setAttribute("disabled","");var a=t.tabsContainer.scrollLeft;(a=Math.round(a))===e-n&&o.setAttribute("disabled","")})),this.tabsContainer.addEventListener("keyup",(function(e){var n;"Tab"===e.key&&window.addEventListener("keydown",(function(e){if("ArrowLeft"==e.key)n=document.activeElement,document.activeElement.className.match("cmp-tabs__tab cmp-tabs__tab--active")&&(300>t.getPageTopLeft(document.activeElement).left+n.offsetWidth?i.click():i.setAttribute("disabled",""));else if("ArrowRight"==e.key){if(n=document.activeElement,document.activeElement.className.match("cmp-tabs__tab cmp-tabs__tab--active"))n.nextSibling&&t.scrollTo(t.tabsContainer.scrollLeft+10),t.getPageTopLeft(document.activeElement).left+n.offsetWidth>t.tabsContainer.clientWidth?o.click():o.setAttribute("disabled","")}}))})),this.tabsContainer.querySelectorAll(".cmp-tabs__tab").forEach((function(e){e.addEventListener("click",(function(){t.makeTabVisible(e)}))})))},t.prototype.getPageTopLeft=function(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.scrollX||n.scrollLeft||0),top:e.top+(window.scrollY||n.scrollTop||0)}},t.prototype.prependChild=function(t,e){t.insertBefore(e,t.firstChild)},t}(),Gt=function(){function t(t){this.tabsElement=t}return t.prototype.init=function(){var t=this;document.addEventListener("scroll",(function(e){Ht(t.tabsElement)?t.tabsElement.classList.add("stickied"):t.tabsElement.classList.remove("stickied")}))},t}(),Jt=function(t,e){var n=document.querySelectorAll(t);n&&n.length&&n.forEach((function(t){new e(t).init()}))};function Kt(){var t="tabs",e=".".concat("cmp","-").concat(t,"--scrollable-tab"),n=".".concat("cmp","-").concat(t,"--sticky");Jt(e,Vt),Jt(n,Gt)}"loading"!==document.readyState?Kt():document.addEventListener("DOMContentLoaded",Kt);var zt=function(){function t(){this.waitTimes={"ewt-edb":!1,"ewt-mortgages":!1,"ewt-investments":!1}}return t.prototype.getIDforEWT=function(t){return{SAVINGS_AND_CHEQUING:"ewt-edb",MORTGAGES:"ewt-mortgages",INVESTMENTS:"ewt-investments"}[t]||!1},t.prototype.stringifyEWT=function(t){return t>=30?"en"==l?"Over 30 minutes":"30 min ou plus":t>=0&&t?"".concat(t,"en"==l?" minutes":" min"):"en"==l?"Closed":"Fermé"},t.prototype.injectEWT=function(){var t=this,e=function(e){document.querySelectorAll("[id^=".concat(e,"]")).forEach((function(n){var i=document.createElement("b");i.innerText=t.stringifyEWT(t.waitTimes[e]),n.querySelector("p").append(i)}))};for(var n in this.waitTimes)e(n)},t.prototype.init=function(){var t=this,e={appId:B,type:"CALL_EWT","logged-in":"true",language:l.toUpperCase()};fetch("".concat(N,"?").concat(new URLSearchParams(e))).then((function(t){return t.json()})).then((function(e){void 0!==e&&e&&void 0!==e.services&&e.services&&e.services.length>0&&e.services.forEach((function(e){var n;n=!!e.available&&(e.intends[0].available&&"-1"!==e.intends[0].wait_time&&""!==e.intends[0].wait_time?parseInt(e.intends[0].wait_time):30),t.getIDforEWT(e.product)&&(t.waitTimes[t.getIDforEWT(e.product)]=n)})),t.injectEWT()})).catch((function(e){console.error("EWT: EWT service currently unavailable"),t.injectEWT()}))},t}();function $t(){var t=document.querySelectorAll(".cmp-text a,.cmp-contentfragment a");t&&window.processTextLinks(t);var e=".".concat("cmp","-").concat("text"),n=document.querySelectorAll("".concat(e,"#").concat(["ewt-edb","ewt-mortgages","ewt-investments"].join(", ".concat(e,"#"))));n&&n.length&&(new zt).init();var i=document.querySelectorAll(".aria-hidden");i&&i.length&&i.forEach((function(t){!function(t){t.setAttribute("aria-hidden","true")}(t)}))}"loading"!==document.readyState?$t():document.addEventListener("DOMContentLoaded",$t);var Yt=function(){function t(t,e){this.cardElement=t,this.className=e,window.dataLayer=window.dataLayer||[],this.cardButton=this.cardElement.querySelector(".button")}return t.prototype.init=function(){var t=this.cardElement.querySelector("[href]"),e="aria-label",n=t.getAttribute("href")||null;if(this.cardButton&&!this.cardButton.querySelector(".cmp-button__text")?this.cardButton.classList.add("cmp-button--default-card-circlebutton"):this.cardButton.classList.add("cmp-button--default-card-normalbutton"),null!==n){t.querySelector("span")||t.setAttribute("aria-hidden","true");var i=document.createElement("a");if(i.setAttribute("href",n),i.setAttribute("class",this.className),t.getAttribute(e))i.setAttribute(e,t.getAttribute(e));else{var o=this.cardElement.querySelector("[id]").id;i.setAttribute("aria-labelledby",o)}var a=JSON.parse(t.getAttribute("data-cmp-data-layer"));i.id="".concat(t.id,"-card");var s={};s[i.id]=a[t.id],i.setAttribute("data-cmp-data-layer",JSON.stringify(s)),window.addComponentEventListener(i),t.addEventListener("click",(function(t){t.stopPropagation()})),this.cardElement.parentNode.insertBefore(i,this.cardElement),i.appendChild(this.cardElement),t.setAttribute("tabindex","-1")}else console.warn("Default Card: not provided with a linked element")},t}();function Zt(){Xt(),document.addEventListener("RELOAD_DEFAULT_CARDS",(function(t){Xt(t.detail)}))}function Xt(t){void 0===t&&(t="");var e="container--default-card",n=".".concat("cmp","-").concat(e),i=t.split(",").map((function(t){return"".concat(t," ").concat(n)})).join(","),o=document.querySelectorAll(i||n);o&&o.length&&o.forEach((function(t){new Yt(t,"".concat("cmp","-").concat(e,"-wrapper")).init()}))}function Qt(){var t=".".concat("cmp","-").concat("button","[id^=").concat("chatbot-trigger","]"),e=document.querySelectorAll(t);e&&e.length&&e.forEach((function(t){new bt(t,"javascript:document.querySelector('#ChatbotFABIcon').click();").init()}))}"loading"!==document.readyState?Zt():document.addEventListener("DOMContentLoaded",Zt),"loading"!==document.readyState?Qt():document.addEventListener("DOMContentLoaded",Qt);var te=function(t){var e={phone:320,phoneMedium:375,phoneLarge:480,"tablet-small":640,tablet:768,laptop:980,desktop:1024,desktopMedium:1191,desktopLarge:1280,desktopHuge:1440,widescreen:1600,desktopExtraLarge:1800},n=function(){var e=navigator.userAgent,n={isTouchDevice:!1,layoutEngine:"",model:"",msMaxTouchPoints:0,platform:""};n.isTouchDevice="ontouchstart"in t||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,e.indexOf("Edge")>=0?n.layoutEngine="Edge":e.indexOf("Chrome")>=0?n.layoutEngine="Chromium":e.indexOf("AppleWebKit")>=0&&(n.layoutEngine="WebKit",n.platform="Safari");e.indexOf("Android")>=0?(n.platform="Android",e.search(/ (GT|SHV|SGH|SCH|SPH|SM)-[\d\w]+ Build/)>=0&&(n.model="SamsungGalaxy")):e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("macintosh")>-1&&"ontouchend"in document?(n.platform="iOS",n.model=e.indexOf("iPad")>=0?"iPad":"iPhone"):e.indexOf("BB10;")>=0?n.platform="BB10":e.indexOf("BlackBerry;")>=0?n.platform="BlackBerry":e.indexOf("Trident")>=0?n.platform="IE":e.indexOf("Firefox")>=0&&(n.platform="FF");return n}();return{isIOS:function(){return n&&"iOS"===n.platform},isAndroid:function(){return n&&"Android"===n.platform},isBB10:function(){return n&&"BB10"===n.platform},isBlackBerry:function(){return n&&"BlackBerry"===n.platform},isMobile:function(){return this.isIOS()||this.isAndroid()||this.isBB10()||this.isBlackBerry()},isResponsiveLaptopSize:function(){t.addEventListener("resize",(function(){return t.innerWidth<=e.laptop}))},isResponsiveDesktopMediumSize:function(){t.addEventListener("resize",(function(){return t.innerWidth<=e.desktopMedium}))},breakpoints:e}}(window),ee="chatbot",ne="/app/#/",ie="?locale=",oe="ChatbotVS",ae="message sent",se="choice recieved",re="escalate recieved",ce="content recieved",le="weblink clicked",de="escalate clicked",ue="opened",pe=function(t,e,n,i){return new(n||(n=Promise))((function(o,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function r(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,r)}c((i=i.apply(t,e||[])).next())}))},he=function(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}},me="CTOK",fe=c.get("dev"),ye=!fe&&d,ve=ye?A+"/web/rest":w,be="?appId="+L,ge="".concat(l,"_CA"),Ee={messageCounter:0,choiceCount:0,chatBotLanguage:l,isEscalated:!1,userInputsEnabled:!0,oldMessage:"",transactiontoken:"",vaMinimized:!0,transactionalFlows:!0,isScrollDown:!1,browserInfo:window.navigator.userAgent,promotionMode:!1,isOnlineMessageAvailable:!1,primaryAccount:"",chatbotResource:null,securePageLinks:null,setSessionId:null},Se=[null,null],Le="";c.get(me)&&(Se=c.get(me).split("|"),Le="&orangeKey="+Se[1]);var Ae=function(){function t(t,e){this.http=new V,this.chatbot=t,this.ga=e}return t.prototype.initChatbotModule=function(){var t=this;this.http.get("/content/dam/tangerine-shared/json/chatbotConfigurations.json",{headers:{"Content-Type":"application/json"}}).then((function(n){n.json().then((function(n){t.loadMessages(n),e&&t.getChatbotAvailability(!0)}))})).catch((function(t){console.log(t.responseText)}));var e=document.getElementById("chatbot"),n=document.querySelector(".cmp-page__skiptochatbot-link"),i=document.getElementById("contact-us-chatbot-button");n?n.addEventListener("click",(function(){t.addCSSLink(),document.getElementById("ChatbotFABIcon").focus()})):n&&n.remove(),i&&i.addEventListener("click",(function(){t.addCSSLink(),t.chatbot.openChat()}))},t.prototype.loadMessages=function(t){Ee.chatbotResource=t[ee][ge],Ee.securePageLinks=t[ee].securePageLinks},t.prototype.getChatbotAvailability=function(t){var e=this;if(sessionStorage.chatbotAvailable&&t){if("available"===sessionStorage.chatbotAvailable){this.chatBotInit(),this.configureChatbot()}}else if(t){var n=ve+u+be+Le;this.http.get(n,{credentials:ye?"include":"same-origin",headers:{"Content-Type":"application/json"}}).then((function(t){t.json().then((function(t){1==t.chatbotAvailable&&(e.chatBotInit(),e.addChatbotCSS(),e.configureChatbot())}))})).catch((function(t){console.log(t.responseText)}))}},t.prototype.chatBotInit=function(){this.chatbot.install({actionDecorators:{generatePrimaryAccountCallback:function(t){return t.token&&(t.token="TNGVA"+t.token),t}},config:{API_CONFIG:{apiKey:"",c:219,baseUrl:"",primaryAccountType:"webchat_wysdom_test",endPoints:{dialogue:null,token:null}},PREFETCH_CONFIG:{numberOfAcctTypes:0,customerLoggedIn:1,layout:"Narrow",promotionMode:!1},CHATBOT_CONFIG:{idleDelay:null,delayRender:0,disablePersistentMenu:!0},LABELS:{en:{DialogServiceInitialMessage:"test"}}}})},t.prototype.configureChatbot=function(){var t=this;this.setTransactionToken(),this.loadChatbotHandler(),this.isOnlineMessageAvailable(),sessionStorage.vaUserToken&&(Ee.primaryAccount=JSON.parse(sessionStorage.vaUserToken)),this.http.loadScript(I,"").then((function(){t.ga=t.ga||function(t){(this.ga.q=this.ga.q||[]).push(t)},t.ga.l=+new Date,t.ga("create",T,"auto")}))},t.prototype.setTransactionToken=function(){var t=this;ye&&(this.doesHeaderDataExist()?this.getTransactionToken():document.addEventListener("HEADER_DATA_LOADED",(function(e){t.doesHeaderDataExist()&&t.getTransactionToken()})))},t.prototype.loadChatbotHandler=function(){var t=this;this.chatbot.eventHandler=function(e){return pe(t,void 0,void 0,(function(){var t,n,i,o,a,s,r=this;return he(this,(function(c){switch(t=e.eventName,n=e.eventData,t){case"dialogue":this.sendMessageCall(e);break;case"buttonsRendered":this.assignClickEvents(n),this.focusChatbotIconKeyboard();break;case"weblinksReceived":if(n.buttons)for(i=0,o=n.buttons;i<o.length;i++)o[i].onclick=function(t){r.isMobileDevice()&&r.minimizeChatbot()};break;case"weblinkClicked":this.isMobileDevice()&&this.minimizeChatbot(),a=ye?"Authenticated":"UnAuthenticated",this.sendChatbotAnalyticsExternalLink(a+"-"+le,n.buttonText);break;case"conversationEnd":this.endChatSession(g.USER_CLOSED,null,Ee.setSessionId),sessionStorage.removeItem("vaUserToken"),Ee.primaryAccount="";break;case"chatbotUIMaximized":s=this.currentPage(),this.sendChatbotAnalyticsWithLabel(ue,s);break;case"messageSent":this.sendChatbotAnalytics(ae);break;case"choicesReceived":this.sendChatbotAnalytics(se);break;case"escalationReceived":this.sendChatbotAnalytics(re);break;case"responseReceived":this.sendChatbotAnalytics(ce)}return[2]}))}))}},t.prototype.addChatbotCSS=function(){var t=this,e=document.getElementById("ChatbotFABIcon");this.CSSLinkAdded=!1,e&&(this.addCSSLink(),e.addEventListener("click",(function(){t.hideChatbotIcon()})))},t.prototype.hideChatbotIcon=function(){document.getElementById("ChatbotFABIcon").style.setProperty("display","none","important")},t.prototype.addCSSLink=function(){if(!1===this.CSSLinkAdded){var t=document.createElement("link");t.href="/etc.clientlibs/tangerine/clientlibs/clientlib-chatbot.min.css",t.rel="stylesheet",t.type="text/css",document.head.appendChild(t),this.CSSLinkAdded=!0}},t.prototype.sendMessageCall=function(t){var e=this,n=t.eventData,i=t.callback;this.verifyPrimaryAccount().then((function(){var t={c:y,language:Ee.chatBotLanguage,primaryAccount:Ee.primaryAccount,primaryAccountType:v,query:n.query,params:{prefetchedInfo:{browserInfo:Ee.browserInfo,layout:e.getLayout(),context:v}}};n.newConversation&&(t.query=Ee.chatbotResource.messages.startSession),e.http.post(ve+p+be,{credentials:ye?"include":"same-origin",body:JSON.stringify(t),headers:e.setWysdomHeaders()}).then((function(t){t.json().then((function(t){e.setSessionId(t.sessionId),i(t)}))})).catch((function(t){i(e.createChatMessageError()),console.log(t.responseText)}))}))},t.prototype.createChatMessageError=function(){return{response:[{rulesetIndex:0,rulesetUuid:"",rulesetIndexUuid:"",rulesetClass:"B",resultId:0,msg:Ee.chatbotResource.messages.error,title:"",weblinks:[],responseId:""}],sessionSent:!0,nlu:{intents:[{name:"",confidence:1}],entities:[]},pinReference:"",messageId:"0",language:"en",isEscalated:"N",lastActivity:0,sessionId:""}},t.prototype.assignClickEvents=function(t){for(var e=[],n=0,i=t.buttons;n<i.length;n++){var o=i[n];o.escalation?(e.push(o.CHAT_ESCALATION_OPTION_CODE),this.tangerineEscalationButtonEvents(o)):o.internalLink?this.tangerineInternalLinkEvents(o):!1===o.internalLink&&this.tangerineUnAuthLinkEvents(o)}e.length>=1&&this.updateEscalationOptions(e,Ee.setSessionId)},t.prototype.tangerineInternalLinkEvents=function(t){var e=this,n=t.eventName,i=t.buttonElement;this.ga("send","event",oe,"internal link displayed - ".concat(n)),i.onclick=function(i){i.preventDefault(),e.silentSendMessageCall("$internalLinkClicked:".concat(n),t,!0)}},t.prototype.processInternalLinkEvent=function(t){var e=t.eventName,n=t.url;this.sendInternalLinkChatbotAnalytics(e),this.isMobileDevice()&&this.minimizeChatbot(),n&&!n.includes("locale=")?this.securePageRedirect("".concat(ne).concat(n).concat(ie).concat(ge)):this.securePageRedirect("".concat(ne).concat(n).concat(ge))},t.prototype.tangerineUnAuthLinkEvents=function(t){var e=this,n=t.buttonElement,i=t.url;n.onclick=function(t){t.preventDefault(),e.isMobileDevice()&&e.minimizeChatbot(),i&&e.securePageRedirect("".concat(ne).concat(i).concat(ie).concat(ge))}},t.prototype.securePageRedirect=function(t){window.location.href=t},t.prototype.focusChatbotIconKeyboard=function(){document.getElementById("ChatbotExitButton").addEventListener("keydown",(function(t){13===t.keyCode&&setTimeout((function(){document.getElementById("ChatbotFABIcon").focus()}),1e3)}))},t.prototype.minimizeChatbot=function(){this.chatbot&&"open"===this.chatbot.getChatMode()&&this.chatbot.toggleChatbox()},t.prototype.currentPage=function(){return location.pathname.substring(1).split("/")[1]},t.prototype.tangerineEscalationButtonEvents=function(t){var e=this,n=t.buttonElement;switch(t.CHAT_ESCALATION_OPTION_CODE){case S.DIAL:n.onclick=function(t){e.sendChatbotEscalateAnalytics(de,"Give Us a Call"),e.endChatSession(g.ESCALATED,S.DIAL,Ee.setSessionId),e.startNewSessionAfterEscalation()};break;case S.ONLINE_MSG:n.onclick=function(t){e.sendChatbotEscalateAnalytics(de,"Send Message"),e.ga("send","event","OnlineMessage",de+" - Send Message"),e.endChatSession(g.ESCALATED,S.ONLINE_MESSAGE,Ee.setSessionId),e.startNewSessionAfterEscalation(),e.isMobileDevice()&&e.minimizeChatbot(),e.escalateToOnlineMessage()};break;case S.LOGIN_TO_ONLINE_MESSAGE:n.onclick=function(t){e.sendChatbotEscalateAnalytics(de,"Log In to Send Message"),e.endChatSession(g.ESCALATED,S.LOGIN_TO_ONLINE_MESSAGE,Ee.setSessionId),e.startNewSessionAfterEscalation(),e.isMobileDevice()&&e.minimizeChatbot(),e.escalateToLoginToOnlineMessage()};break;case S.NO_THANKS:n.onclick=function(t){e.sendChatbotEscalateAnalytics(de,"No, Thanks")}}},t.prototype.startNewSessionAfterEscalation=function(){Ee.primaryAccount="",sessionStorage.removeItem("vaUserToken"),this.silentSendMessageCall(Ee.chatbotResource.messages.startSession,null,!1)},t.prototype.escalateToOnlineMessage=function(){this.isMobileDevice()&&this.minimizeChatbot(),window.location.href=Ee.securePageLinks.escalateToOnlineMessageLink},t.prototype.escalateToLoginToOnlineMessage=function(){this.isMobileDevice()&&this.minimizeChatbot(),window.location.href=Ee.securePageLinks.escalateToLoginToOnlineMessageLink+ge},t.prototype.sendChatbotAnalyticsExternalLink=function(t,e){console.log("AD || sendChatbotAnalytics(), key: ".concat(t,", buttonText: ").concat(e)),this.ga("send","event",oe,"".concat(t," - ").concat(e))},t.prototype.sendChatbotEscalateAnalytics=function(t,e){this.ga("send","event",oe,t),this.ga("send","event",oe,"".concat(t," - ").concat(e))},t.prototype.sendChatbotAnalyticsWithLabel=function(t,e){this.ga("send","event",oe,t,e)},t.prototype.sendChatbotAnalytics=function(t){console.log("AD || sendChatbotAnalytics(), key: ".concat(t)),this.ga("send","event",oe,t)},t.prototype.sendInternalLinkChatbotAnalytics=function(t){console.log("AD || sendChatbotAnalytics(), key: ".concat(t)),this.ga("send","event",oe,"internal link clicked - ".concat(t))},t.prototype.isOnlineMessageAvailable=function(){var t="".concat(k,"?appId=").concat(C,"&type=WEB_MAIL&logged-in=").concat(d,"&language=EN");this.http.get(t,{headers:{"Content-Type":"application/json"},cache:"no-cache"}).then((function(t){t.json().then((function(t){t&&t.services&&(Ee.isOnlineMessageAvailable=t.services[0].available)}))})).catch((function(t){console.log(t.responseText)}))},t.prototype.silentSendMessageCall=function(t,e,n){var i=this;this.verifyPrimaryAccount().then((function(){var o={c:y,language:Ee.chatBotLanguage,primaryAccount:Ee.primaryAccount,primaryAccountType:v,query:t,params:{prefetchedInfo:{browserInfo:Ee.browserInfo,layout:i.getLayout(),context:v}}};i.http.post(ve+p+be,{credentials:ye?"include":"same-origin",body:JSON.stringify(o),headers:i.setWysdomHeaders()}).then((function(t){t.json().then((function(t){i.setSessionId(t.sessionId),n&&i.processInternalLinkEvent(e)}))})).catch((function(t){console.log(t.responseText)}))}))},t.prototype.getTransactionToken=function(){Ee.transactiontoken=JSON.parse(localStorage.getItem("headerData")).transactionToken},t.prototype.doesHeaderDataExist=function(){return localStorage.getItem("headerData")&&JSON.parse(localStorage.getItem("headerData")).transactionToken},t.prototype.verifyPrimaryAccount=function(){var t=this;return new Promise((function(e,n){Ee.primaryAccount||sessionStorage.vaUserToken?e(Ee.primaryAccount):t.generateUserToken().then((function(){e(Ee.primaryAccount)}))}))},t.prototype.updateEscalationOptions=function(t,e){var n={sessionId:e||sessionStorage.getItem("tangerine-sessionId"),options:t};this.http.post(ve+f+be,{credentials:ye?"include":"same-origin",body:JSON.stringify(n),headers:this.setWysdomHeaders()}).then((function(t){})).catch((function(t){console.log(t.responseText)}))},t.prototype.getLayout=function(){return window.innerWidth>te.breakpoints.desktopMedium?E.WIDE:E.NARROW},t.prototype.generateUserToken=function(){var t=this;return new Promise((function(e,n){t.http.get(ve+h+be,{headers:{"Content-Type":"application/json"},credentials:ye?"include":"same-origin"}).then((function(t){t.json().then((function(t){Ee.primaryAccount="TNGVA"+t.token,sessionStorage.vaUserToken=JSON.stringify(Ee.primaryAccount),e(Ee.primaryAccount)}))})).catch((function(t){console.warn(t.responseText),n(t.responseText)}))}))},t.prototype.setSessionId=function(t){Ee.setSessionId=t},t.prototype.endChatSession=function(t,e,n,i){var o={chatStatus:t,sessionId:n||sessionStorage.getItem("tangerine-sessionId"),saveTranscript:i||ye,chatEscalationOption:e};this.http.post(ve+m+be,{credentials:ye?"include":"same-origin",body:JSON.stringify(o),headers:this.setWysdomHeaders()}).then((function(t){})).catch((function(t){console.log(t.responseText)}))},t.prototype.isMobileDevice=function(){return te.isIOS()||te.isAndroid()},t.prototype.isMobileDeviceWeb=function(){return te.breakpoints.tablet>=window.innerWidth&&te.breakpoints.desktop>=window.innerHeight},t.prototype.setWysdomHeaders=function(){var t=new Headers;return t.append(b,Ee.transactiontoken),t.append("Content-Type","application/json"),t},t}();window.addEventListener("load",(function(){var t=setInterval((function(){if(window.hasOwnProperty("chatbot")&&null!=window.chatbot){clearInterval(t);var e=window.chatbot,n=window.ga;new Ae(e,n).initChatbotModule()}}),200)}));n(629),n(975),n(822)}()}();
</script>

</body>
</html>
