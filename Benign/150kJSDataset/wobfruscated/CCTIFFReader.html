<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>CCTIFFReader.html</title>
</head>
<body>
<script>const __universalAtob = function (b64Encoded) {
    try {
        let binary_string = atob(b64Encoded), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(b64Encoded, 'base64'));
    }
};
const __forWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAABfwKkgICAAAMDZW52BHRlc3QAAQNlbnYGdXBkYXRlAAADZW52BGJvZHkAAAOCgICAAAEABISAgIAAAXAAAAWDgICAAAEAAQeRgICAAAIGbWVtb3J5AgAEZGF0YQADCpmAgIAAAZOAgIAAAAJAA0AQAEUNARACEAEMAAsLCw==';
const __forWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__forWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__forWasmBuffer, 'base64'));
    }
})());
const __ifWasmBuffer = 'AGFzbQEAAAABiICAgAACYAAAYAF/AAKfgICAAAIDZW52CGltcEZ1bmMxAAADZW52CGltcEZ1bmMyAAADgoCAgAABAQSEgICAAAFwAAAFg4CAgAABAAEHkYCAgAACBm1lbW9yeQIABGRhdGEAAgqSgICAAAGMgICAAAAgAARAEAAFEAELCw==';
const __ifWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__ifWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__ifWasmBuffer, 'base64'));
    }
})());
const __callWasmBuffer = 'AGFzbQEAAAABhICAgAABYAAAAo+AgIAAAQNlbnYHaW1wRnVuYwAAA4KAgIAAAQAEhICAgAABcAAABYOAgIAAAQABB5GAgIAAAgZtZW1vcnkCAARkYXRhAAEKioCAgAABhICAgAAAEAAL';
const __callWasmModule = new WebAssembly.Module((() => {
    try {
        let binary_string = atob(__callWasmBuffer), len = binary_string.length, bytes = new Uint8Array(len);
        for (let i = 0; i < len; i++) {
            bytes[i] = binary_string.charCodeAt(i);
        }
        return bytes;
    } catch (err) {
        return new Uint8Array(global.Buffer.from(__callWasmBuffer, 'base64'));
    }
})());
const __wasmStringModules = ['AGFzbQEAAAAFg4CAgAABAAEGyYKAgAA3fwBBAQt/AEEiC38AQcAAC38AQdoAC38AQeAAC38AQeYAC38AQe4AC38AQfYAC38AQYIBC38AQYoBC38AQZIBC38AQZgBC38AQaABC38AQagBC38AQbIBC38AQb4BC38AQcYBC38AQdABC38AQdwBC38AQY4CC38AQZYCC38AQa4CC38AQc4CC38AQeYCC38AQYYDC38AQY4DC38AQZoDC38AQagDC38AQbYDC38AQcQDC38AQdYDC38AQeYDC38AQfQDC38AQYYEC38AQZgEC38AQbQEC38AQeoEC38AQZwFC38AQc4FC38AQYAGC38AQYQGC38AQagGC38AQbYGC38AQcQGC38AQeAGC38AQe4GC38AQfwGC38AQYYHC38AQZAHC38AQboHC38AQeYHC38AQe4HC38AQfYHC38AQf4HC38AQYYICwfvg4CAADgGbWVtb3J5AgAFZGF0YTADAAVkYXRhMQMBBWRhdGEyAwIFZGF0YTMDAwVkYXRhNAMEBWRhdGE1AwUFZGF0YTYDBgVkYXRhNwMHBWRhdGE4AwgFZGF0YTkDCQZkYXRhMTADCgZkYXRhMTEDCwZkYXRhMTIDDAZkYXRhMTMDDQZkYXRhMTQDDgZkYXRhMTUDDwZkYXRhMTYDEAZkYXRhMTcDEQZkYXRhMTgDEgZkYXRhMTkDEwZkYXRhMjADFAZkYXRhMjEDFQZkYXRhMjIDFgZkYXRhMjMDFwZkYXRhMjQDGAZkYXRhMjUDGQZkYXRhMjYDGgZkYXRhMjcDGwZkYXRhMjgDHAZkYXRhMjkDHQZkYXRhMzADHgZkYXRhMzEDHwZkYXRhMzIDIAZkYXRhMzMDIQZkYXRhMzQDIgZkYXRhMzUDIwZkYXRhMzYDJAZkYXRhMzcDJQZkYXRhMzgDJgZkYXRhMzkDJwZkYXRhNDADKAZkYXRhNDEDKQZkYXRhNDIDKgZkYXRhNDMDKwZkYXRhNDQDLAZkYXRhNDUDLQZkYXRhNDYDLgZkYXRhNDcDLwZkYXRhNDgDMAZkYXRhNDkDMQZkYXRhNTADMgZkYXRhNTEDMwZkYXRhNTIDNAZkYXRhNTMDNQZkYXRhNTQDNguBioCAADcAQQELIEludmFsaWQlMjBieXRlJTIwb3JkZXIlMjB2YWx1ZS4AAEEiCx1Zb3UlMjBmb3Jnb3QlMjB5b3VyJTIwdG93ZWwhAABBwAALGVVua25vd24lMjBGaWVsZCUyMFRhZyUzQQAAQdoACwRUYWcAAEHgAAsFQllURQAAQeYACwZBU0NJSQAAQe4ACwZTQllURQAAQfYACwpVTkRFRklORUQAAEGCAQsGU0hPUlQAAEGKAQsHU1NIT1JUAABBkgELBUxPTkcAAEGYAQsGU0xPTkcAAEGgAQsGRkxPQVQAAEGoAQsJUkFUSU9OQUwAAEGyAQsKU1JBVElPTkFMAABBvgELB0RPVUJMRQAAQcYBCwlSQVRJT05BTAAAQdABCwpTUkFUSU9OQUwAAEHcAQsxQ2FuJ3QlMjBoYW5kbGUlMjB0aGlzJTIwZmllbGQlMjB0eXBlJTIwb3IlMjBzaXplAABBjgILBkFTQ0lJAABBlgILF05vJTIwYnl0ZXMlMjByZXF1ZXN0ZWQAAEGuAgsfVG9vJTIwbWFueSUyMGJ5dGVzJTIwcmVxdWVzdGVkAABBzgILFk5vJTIwYml0cyUyMHJlcXVlc3RlZAAAQeYCCx5Ub28lMjBtYW55JTIwYml0cyUyMHJlcXVlc3RlZAAAQYYDCwdjYW52YXMAAEGOAwsLSW1hZ2VXaWR0aAAAQZoDCwxJbWFnZUxlbmd0aAAAQagDCwxDb21wcmVzc2lvbgAAQbYDCwxDb21wcmVzc2lvbgAAQcQDCxBTYW1wbGVzUGVyUGl4ZWwAAEHWAwsOQml0c1BlclNhbXBsZQAAQeYDCw1TdHJpcE9mZnNldHMAAEH0AwsQU3RyaXBCeXRlQ291bnRzAABBhgQLEFN0cmlwQnl0ZUNvdW50cwAAQZgECxtNaXNzaW5nJTIwU3RyaXBCeXRlQ291bnRzIQAAQbQECzRDYW5ub3QlMjByZWNvdmVyJTIwZnJvbSUyMG1pc3NpbmclMjBTdHJpcEJ5dGVDb3VudHMAAEHqBAsxQ2Fubm90JTIwaGFuZGxlJTIwc3ViLWJ5dGUlMjBiaXRzJTIwcGVyJTIwc2FtcGxlAABBnAULMENhbm5vdCUyMGhhbmRsZSUyMHN1Yi1ieXRlJTIwYml0cyUyMHBlciUyMHBpeGVsAABBzgULMUNhbm5vdCUyMGhhbmRsZSUyMHN1Yi1ieXRlJTIwYml0cyUyMHBlciUyMHNhbXBsZQAAQYAGCwMyZAAAQYQGCyNyZ2JhKDI1NSUyQyUyMDI1NSUyQyUyMDI1NSUyQyUyMDApAABBqAYLDVJvd3NQZXJTdHJpcAAAQbYGCw1Sb3dzUGVyU3RyaXAAAEHEBgsaUGhvdG9tZXRyaWNJbnRlcnByZXRhdGlvbgAAQeAGCw1FeHRyYVNhbXBsZXMAAEHuBgsNRXh0cmFTYW1wbGVzAABB/AYLCUNvbG9yTWFwAABBhgcLCUNvbG9yTWFwAABBkAcLKFBhbGV0dGUlMjBpbWFnZSUyMG1pc3NpbmclMjBjb2xvciUyMG1hcAAAQboHCypVbmtub3duJTIwUGhvdG9tZXRyaWMlMjBJbnRlcnByZXRhdGlvbiUzQQAAQeYHCwZyZ2JhKAAAQe4HCwclMkMlMjAAAEH2BwsHJTJDJTIwAABB/gcLByUyQyUyMAAAQYYICwIpAA=='].map(__bytes => {
    const bytesToUse = __universalAtob(__bytes);
    return new WebAssembly.Instance(new WebAssembly.Module(bytesToUse));
});
const lS = (wI, pos, iWC) => {
    let __str = '';
    if (!Array.isArray(wI)) {
        let __targetModule = __wasmStringModules[wI];
        let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
        const __stringKey = `data${ pos }`;
        let __start = __targetModule.exports[__stringKey] - 1;
        let __str = '';
        let i = __start;
        let __c = __mem[i++];
        while (!(parseInt(__c) & 128) && __mem[i]) {
            __str += __c;
            __c = String.fromCharCode(__mem[i++]);
        }
        __str += __c;
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    } else {
        for (const __wasmIndex of wI) {
            let __targetModule = __wasmStringModules[__wasmIndex];
            let __mem = new Uint8Array(__targetModule.exports.memory.buffer);
            const __stringKey = `data${ pos }`;
            let __start = __targetModule.exports[__stringKey] - 1;
            let i = __start;
            let __c = __mem[i++];
            while (!(parseInt(__c) & 128) && __mem[i]) {
                __str += __c;
                __c = String.fromCharCode(__mem[i++]);
            }
            __str += __c;
        }
        __str = decodeURIComponent(__str.substring(1));
        return __str;
    }
};
cc.tiffReader = {
    _littleEndian: false,
    _tiffData: null,
    _fileDirectories: [],
    getUint8: function (offset) {
        return this._tiffData[offset];
    },
    getUint16: function (offset) {
        if (this._littleEndian)
            return this._tiffData[offset + 1] << 8 | this._tiffData[offset];
        else
            return this._tiffData[offset] << 8 | this._tiffData[offset + 1];
    },
    getUint32: function (offset) {
        var a = this._tiffData;
        if (this._littleEndian)
            return a[offset + 3] << 24 | a[offset + 2] << 16 | a[offset + 1] << 8 | a[offset];
        else
            return a[offset] << 24 | a[offset + 1] << 16 | a[offset + 2] << 8 | a[offset + 3];
    },
    checkLittleEndian: function () {
        var BOM = this.getUint16(0);
        if (BOM === 18761) {
            this.littleEndian = true;
        } else if (BOM === 19789) {
            this.littleEndian = false;
        } else {
            (() => {
                const __callInstance25 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            console.log(BOM);
                        }
                    }
                });
                const __exports = __callInstance25.exports;
                return __exports.data();
            })();
            throw TypeError(lS(0, 0));
        }
        return this.littleEndian;
    },
    hasTowel: function () {
        if (this.getUint16(2) !== 42) {
            throw RangeError(lS(0, 1));
            return false;
        }
        return true;
    },
    getFieldTypeName: function (fieldType) {
        var typeNames = this.fieldTypeNames;
        if (fieldType in typeNames) {
            return typeNames[fieldType];
        }
        return null;
    },
    getFieldTagName: function (fieldTag) {
        var tagNames = this.fieldTagNames;
        if (fieldTag in tagNames) {
            return tagNames[fieldTag];
        } else {
            (() => {
                const __callInstance24 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            console.log(lS(0, 2), fieldTag);
                        }
                    }
                });
                const __exports = __callInstance24.exports;
                return __exports.data();
            })();
            return lS(0, 3) + fieldTag;
        }
    },
    getFieldTypeLength: function (fieldTypeName) {
        if ([
                lS(0, 4),
                lS(0, 5),
                lS(0, 6),
                lS(0, 7)
            ].indexOf(fieldTypeName) !== -1) {
            return 1;
        } else if ([
                lS(0, 8),
                lS(0, 9)
            ].indexOf(fieldTypeName) !== -1) {
            return 2;
        } else if ([
                lS(0, 10),
                lS(0, 11),
                lS(0, 12)
            ].indexOf(fieldTypeName) !== -1) {
            return 4;
        } else if ([
                lS(0, 13),
                lS(0, 14),
                lS(0, 15)
            ].indexOf(fieldTypeName) !== -1) {
            return 8;
        }
        return null;
    },
    getFieldValues: function (fieldTagName, fieldTypeName, typeCount, valueOffset) {
        var fieldValues = [];
        var fieldTypeLength = this.getFieldTypeLength(fieldTypeName);
        var fieldValueSize = fieldTypeLength * typeCount;
        (() => {
            const __ifInstance0 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __ifInstance1 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            (() => {
                                                const __callInstance23 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            fieldValues.push(valueOffset >>> (4 - fieldTypeLength) * 8);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance23.exports;
                                                return __exports.data();
                                            })();
                                        },
                                        impFunc2: () => {
                                            (() => {
                                                const __callInstance22 = new WebAssembly.Instance(__callWasmModule, {
                                                    env: {
                                                        impFunc: () => {
                                                            fieldValues.push(valueOffset);
                                                        }
                                                    }
                                                });
                                                const __exports = __callInstance22.exports;
                                                return __exports.data();
                                            })();
                                        }
                                    }
                                });
                                const __exports = __ifInstance1.exports;
                                return __exports.data(this.littleEndian === false ? 1 : 0);
                            })();
                        }
                    },
                    impFunc2: () => {
                        {
                            (() => {
                                var i = 0;
                                const __forInstance0 = new WebAssembly.Instance(__forWasmModule, {
                                    env: {
                                        test: () => {
                                            return i < typeCount ? 1 : 0;
                                        },
                                        update: () => {
                                            i++;
                                        },
                                        body: () => {
                                            {
                                                var indexOffset = fieldTypeLength * i;
                                                (() => {
                                                    const __ifInstance2 = new WebAssembly.Instance(__ifWasmModule, {
                                                        env: {
                                                            impFunc1: () => {
                                                                {
                                                                    (() => {
                                                                        const __ifInstance3 = new WebAssembly.Instance(__ifWasmModule, {
                                                                            env: {
                                                                                impFunc1: () => {
                                                                                    {
                                                                                        (() => {
                                                                                            const __callInstance21 = new WebAssembly.Instance(__callWasmModule, {
                                                                                                env: {
                                                                                                    impFunc: () => {
                                                                                                        fieldValues.push(this.getUint32(valueOffset + indexOffset));
                                                                                                    }
                                                                                                }
                                                                                            });
                                                                                            const __exports = __callInstance21.exports;
                                                                                            return __exports.data();
                                                                                        })();
                                                                                        (() => {
                                                                                            const __callInstance20 = new WebAssembly.Instance(__callWasmModule, {
                                                                                                env: {
                                                                                                    impFunc: () => {
                                                                                                        fieldValues.push(this.getUint32(valueOffset + indexOffset + 4));
                                                                                                    }
                                                                                                }
                                                                                            });
                                                                                            const __exports = __callInstance20.exports;
                                                                                            return __exports.data();
                                                                                        })();
                                                                                    }
                                                                                },
                                                                                impFunc2: () => {
                                                                                    {
                                                                                        (() => {
                                                                                            const __callInstance19 = new WebAssembly.Instance(__callWasmModule, {
                                                                                                env: {
                                                                                                    impFunc: () => {
                                                                                                        cc.log(lS(0, 18));
                                                                                                    }
                                                                                                }
                                                                                            });
                                                                                            const __exports = __callInstance19.exports;
                                                                                            return __exports.data();
                                                                                        })();
                                                                                    }
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __ifInstance3.exports;
                                                                        return __exports.data([
                                                                            lS(0, 16),
                                                                            lS(0, 17)
                                                                        ].indexOf(fieldTypeName) !== -1 ? 1 : 0);
                                                                    })();
                                                                }
                                                            },
                                                            impFunc2: () => {
                                                                {
                                                                    (() => {
                                                                        const __callInstance18 = new WebAssembly.Instance(__callWasmModule, {
                                                                            env: {
                                                                                impFunc: () => {
                                                                                    fieldValues.push(this.getBytes(fieldTypeLength, valueOffset + indexOffset));
                                                                                }
                                                                            }
                                                                        });
                                                                        const __exports = __callInstance18.exports;
                                                                        return __exports.data();
                                                                    })();
                                                                }
                                                            }
                                                        }
                                                    });
                                                    const __exports = __ifInstance2.exports;
                                                    return __exports.data(fieldTypeLength >= 8 ? 1 : 0);
                                                })();
                                            }
                                        }
                                    }
                                });
                                const __exports = __forInstance0.exports;
                                return __exports.data();
                            })();
                        }
                    }
                }
            });
            const __exports = __ifInstance0.exports;
            return __exports.data(fieldValueSize <= 4 ? 1 : 0);
        })();
        (() => {
            const __ifInstance4 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance17 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            fieldValues.forEach(function (e, i, a) {
                                                a[i] = String.fromCharCode(e);
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance17.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance4.exports;
            return __exports.data(fieldTypeName === lS(0, 19) ? 1 : 0);
        })();
        return fieldValues;
    },
    getBytes: function (numBytes, offset) {
        if (numBytes <= 0) {
            (() => {
                const __callInstance16 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            cc.log(lS(0, 20));
                        }
                    }
                });
                const __exports = __callInstance16.exports;
                return __exports.data();
            })();
        } else if (numBytes <= 1) {
            return this.getUint8(offset);
        } else if (numBytes <= 2) {
            return this.getUint16(offset);
        } else if (numBytes <= 3) {
            return this.getUint32(offset) >>> 8;
        } else if (numBytes <= 4) {
            return this.getUint32(offset);
        } else {
            (() => {
                const __callInstance15 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            cc.log(lS(0, 21));
                        }
                    }
                });
                const __exports = __callInstance15.exports;
                return __exports.data();
            })();
        }
    },
    getBits: function (numBits, byteOffset, bitOffset) {
        bitOffset = bitOffset || 0;
        var extraBytes = Math.floor(bitOffset / 8);
        var newByteOffset = byteOffset + extraBytes;
        var totalBits = bitOffset + numBits;
        var shiftRight = 32 - numBits;
        var shiftLeft, rawBits;
        (() => {
            const __ifInstance5 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance14 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            console.log(lS(0, 22));
                                        }
                                    }
                                });
                                const __exports = __callInstance14.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                        (() => {
                            const __ifInstance6 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            shiftLeft = 24 + bitOffset;
                                            rawBits = this.getUint8(newByteOffset);
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance7 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            shiftLeft = 16 + bitOffset;
                                                            rawBits = this.getUint16(newByteOffset);
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                        (() => {
                                                            const __ifInstance8 = new WebAssembly.Instance(__ifWasmModule, {
                                                                env: {
                                                                    impFunc1: () => {
                                                                        {
                                                                            shiftLeft = bitOffset;
                                                                            rawBits = this.getUint32(newByteOffset);
                                                                        }
                                                                    },
                                                                    impFunc2: () => {
                                                                        {
                                                                            (() => {
                                                                                const __callInstance13 = new WebAssembly.Instance(__callWasmModule, {
                                                                                    env: {
                                                                                        impFunc: () => {
                                                                                            console.log(lS(0, 23));
                                                                                        }
                                                                                    }
                                                                                });
                                                                                const __exports = __callInstance13.exports;
                                                                                return __exports.data();
                                                                            })();
                                                                        }
                                                                    }
                                                                }
                                                            });
                                                            const __exports = __ifInstance8.exports;
                                                            return __exports.data(totalBits <= 32 ? 1 : 0);
                                                        })();
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance7.exports;
                                            return __exports.data(totalBits <= 16 ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance6.exports;
                            return __exports.data(totalBits <= 8 ? 1 : 0);
                        })();
                    }
                }
            });
            const __exports = __ifInstance5.exports;
            return __exports.data(totalBits <= 0 ? 1 : 0);
        })();
        return {
            'bits': rawBits << shiftLeft >>> shiftRight,
            'byteOffset': newByteOffset + Math.floor(totalBits / 8),
            'bitOffset': totalBits % 8
        };
    },
    parseFileDirectory: function (byteOffset) {
        var numDirEntries = this.getUint16(byteOffset);
        var tiffFields = [];
        (() => {
            var i = byteOffset + 2, entryCount = 0;
            const __forInstance1 = new WebAssembly.Instance(__forWasmModule, {
                env: {
                    test: () => {
                        return entryCount < numDirEntries ? 1 : 0;
                    },
                    update: () => {
                        i += 12, entryCount++;
                    },
                    body: () => {
                        {
                            var fieldTag = this.getUint16(i);
                            var fieldType = this.getUint16(i + 2);
                            var typeCount = this.getUint32(i + 4);
                            var valueOffset = this.getUint32(i + 8);
                            var fieldTagName = this.getFieldTagName(fieldTag);
                            var fieldTypeName = this.getFieldTypeName(fieldType);
                            var fieldValues = this.getFieldValues(fieldTagName, fieldTypeName, typeCount, valueOffset);
                            tiffFields[fieldTagName] = {
                                type: fieldTypeName,
                                values: fieldValues
                            };
                        }
                    }
                }
            });
            const __exports = __forInstance1.exports;
            return __exports.data();
        })();
        (() => {
            const __callInstance12 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this._fileDirectories.push(tiffFields);
                    }
                }
            });
            const __exports = __callInstance12.exports;
            return __exports.data();
        })();
        var nextIFDByteOffset = this.getUint32(i);
        (() => {
            const __ifInstance9 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            (() => {
                                const __callInstance11 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            this.parseFileDirectory(nextIFDByteOffset);
                                        }
                                    }
                                });
                                const __exports = __callInstance11.exports;
                                return __exports.data();
                            })();
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance9.exports;
            return __exports.data(nextIFDByteOffset !== 0 ? 1 : 0);
        })();
    },
    clampColorSample: function (colorSample, bitsPerSample) {
        var multiplier = Math.pow(2, 8 - bitsPerSample);
        return Math.floor(colorSample * multiplier + (multiplier - 1));
    },
    parseTIFF: function (tiffData, canvas) {
        canvas = canvas || cc.newElement(lS(0, 24));
        this._tiffData = tiffData;
        this.canvas = canvas;
        (() => {
            const __callInstance10 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.checkLittleEndian();
                    }
                }
            });
            const __exports = __callInstance10.exports;
            return __exports.data();
        })();
        if (!this.hasTowel()) {
            return;
        }
        var firstIFDByteOffset = this.getUint32(4);
        this._fileDirectories.length = 0;
        (() => {
            const __callInstance9 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        this.parseFileDirectory(firstIFDByteOffset);
                    }
                }
            });
            const __exports = __callInstance9.exports;
            return __exports.data();
        })();
        var fileDirectory = this._fileDirectories[0];
        var imageWidth = fileDirectory[lS(0, 25)].values[0];
        var imageLength = fileDirectory[lS(0, 26)].values[0];
        this.canvas.width = imageWidth;
        this.canvas.height = imageLength;
        var strips = [];
        var compression = fileDirectory[lS(0, 27)] ? fileDirectory[lS(0, 28)].values[0] : 1;
        var samplesPerPixel = fileDirectory[lS(0, 29)].values[0];
        var sampleProperties = [];
        var bitsPerPixel = 0;
        var hasBytesPerPixel = false;
        (() => {
            const __callInstance8 = new WebAssembly.Instance(__callWasmModule, {
                env: {
                    impFunc: () => {
                        fileDirectory[lS(0, 30)].values.forEach(function (bitsPerSample, i, bitsPerSampleValues) {
                            sampleProperties[i] = {
                                bitsPerSample: bitsPerSample,
                                hasBytesPerSample: false,
                                bytesPerSample: undefined
                            };
                            (() => {
                                const __ifInstance10 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                sampleProperties[i].hasBytesPerSample = true;
                                                sampleProperties[i].bytesPerSample = bitsPerSample / 8;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance10.exports;
                                return __exports.data(bitsPerSample % 8 === 0 ? 1 : 0);
                            })();
                            bitsPerPixel += bitsPerSample;
                        }, this);
                    }
                }
            });
            const __exports = __callInstance8.exports;
            return __exports.data();
        })();
        (() => {
            const __ifInstance11 = new WebAssembly.Instance(__ifWasmModule, {
                env: {
                    impFunc1: () => {
                        {
                            hasBytesPerPixel = true;
                            var bytesPerPixel = bitsPerPixel / 8;
                        }
                    },
                    impFunc2: () => {
                    }
                }
            });
            const __exports = __ifInstance11.exports;
            return __exports.data(bitsPerPixel % 8 === 0 ? 1 : 0);
        })();
        var stripOffsetValues = fileDirectory[lS(0, 31)].values;
        var numStripOffsetValues = stripOffsetValues.length;
        if (fileDirectory[lS(0, 32)]) {
            var stripByteCountValues = fileDirectory[lS(0, 33)].values;
        } else {
            (() => {
                const __callInstance7 = new WebAssembly.Instance(__callWasmModule, {
                    env: {
                        impFunc: () => {
                            cc.log(lS(0, 34));
                        }
                    }
                });
                const __exports = __callInstance7.exports;
                return __exports.data();
            })();
            if (numStripOffsetValues === 1) {
                var stripByteCountValues = [Math.ceil(imageWidth * imageLength * bitsPerPixel / 8)];
            } else {
                throw Error(lS(0, 35));
            }
        }
        for (var i = 0; i < numStripOffsetValues; i++) {
            var stripOffset = stripOffsetValues[i];
            strips[i] = [];
            var stripByteCount = stripByteCountValues[i];
            for (var byteOffset = 0, bitOffset = 0, jIncrement = 1, getHeader = true, pixel = [], numBytes = 0, sample = 0, currentSample = 0; byteOffset < stripByteCount; byteOffset += jIncrement) {
                switch (compression) {
                case 1:
                    for (var m = 0, pixel = []; m < samplesPerPixel; m++) {
                        if (sampleProperties[m].hasBytesPerSample) {
                            var sampleOffset = sampleProperties[m].bytesPerSample * m;
                            (() => {
                                const __callInstance6 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            pixel.push(this.getBytes(sampleProperties[m].bytesPerSample, stripOffset + byteOffset + sampleOffset));
                                        }
                                    }
                                });
                                const __exports = __callInstance6.exports;
                                return __exports.data();
                            })();
                        } else {
                            var sampleInfo = this.getBits(sampleProperties[m].bitsPerSample, stripOffset + byteOffset, bitOffset);
                            (() => {
                                const __callInstance5 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            pixel.push(sampleInfo.bits);
                                        }
                                    }
                                });
                                const __exports = __callInstance5.exports;
                                return __exports.data();
                            })();
                            byteOffset = sampleInfo.byteOffset - stripOffset;
                            bitOffset = sampleInfo.bitOffset;
                            throw RangeError(lS(0, 36));
                        }
                    }
                    (() => {
                        const __callInstance4 = new WebAssembly.Instance(__callWasmModule, {
                            env: {
                                impFunc: () => {
                                    strips[i].push(pixel);
                                }
                            }
                        });
                        const __exports = __callInstance4.exports;
                        return __exports.data();
                    })();
                    if (hasBytesPerPixel) {
                        jIncrement = bytesPerPixel;
                    } else {
                        jIncrement = 0;
                        throw RangeError(lS(0, 37));
                    }
                    break;
                case 2:
                    break;
                case 3:
                    break;
                case 4:
                    break;
                case 5:
                    break;
                case 6:
                    break;
                case 7:
                    break;
                case 32773:
                    if (getHeader) {
                        getHeader = false;
                        var blockLength = 1;
                        var iterations = 1;
                        var header = this.getInt8(stripOffset + byteOffset);
                        (() => {
                            const __ifInstance12 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            blockLength = header + 1;
                                        }
                                    },
                                    impFunc2: () => {
                                        (() => {
                                            const __ifInstance13 = new WebAssembly.Instance(__ifWasmModule, {
                                                env: {
                                                    impFunc1: () => {
                                                        {
                                                            iterations = -header + 1;
                                                        }
                                                    },
                                                    impFunc2: () => {
                                                        {
                                                            getHeader = true;
                                                        }
                                                    }
                                                }
                                            });
                                            const __exports = __ifInstance13.exports;
                                            return __exports.data(header >= -127 && header <= -1 ? 1 : 0);
                                        })();
                                    }
                                }
                            });
                            const __exports = __ifInstance12.exports;
                            return __exports.data(header >= 0 && header <= 127 ? 1 : 0);
                        })();
                    } else {
                        var currentByte = this.getUint8(stripOffset + byteOffset);
                        for (var m = 0; m < iterations; m++) {
                            if (sampleProperties[sample].hasBytesPerSample) {
                                currentSample = currentSample << 8 * numBytes | currentByte;
                                numBytes++;
                                (() => {
                                    const __ifInstance14 = new WebAssembly.Instance(__ifWasmModule, {
                                        env: {
                                            impFunc1: () => {
                                                {
                                                    (() => {
                                                        const __callInstance3 = new WebAssembly.Instance(__callWasmModule, {
                                                            env: {
                                                                impFunc: () => {
                                                                    pixel.push(currentSample);
                                                                }
                                                            }
                                                        });
                                                        const __exports = __callInstance3.exports;
                                                        return __exports.data();
                                                    })();
                                                    currentSample = numBytes = 0;
                                                    sample++;
                                                }
                                            },
                                            impFunc2: () => {
                                            }
                                        }
                                    });
                                    const __exports = __ifInstance14.exports;
                                    return __exports.data(numBytes === sampleProperties[sample].bytesPerSample ? 1 : 0);
                                })();
                            } else {
                                throw RangeError(lS(0, 38));
                            }
                            (() => {
                                const __ifInstance15 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                (() => {
                                                    const __callInstance2 = new WebAssembly.Instance(__callWasmModule, {
                                                        env: {
                                                            impFunc: () => {
                                                                strips[i].push(pixel);
                                                            }
                                                        }
                                                    });
                                                    const __exports = __callInstance2.exports;
                                                    return __exports.data();
                                                })();
                                                pixel = [];
                                                sample = 0;
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance15.exports;
                                return __exports.data(sample === samplesPerPixel ? 1 : 0);
                            })();
                        }
                        blockLength--;
                        (() => {
                            const __ifInstance16 = new WebAssembly.Instance(__ifWasmModule, {
                                env: {
                                    impFunc1: () => {
                                        {
                                            getHeader = true;
                                        }
                                    },
                                    impFunc2: () => {
                                    }
                                }
                            });
                            const __exports = __ifInstance16.exports;
                            return __exports.data(blockLength === 0 ? 1 : 0);
                        })();
                    }
                    jIncrement = 1;
                    break;
                default:
                    break;
                }
            }
        }
        if (canvas.getContext) {
            var ctx = this.canvas.getContext(lS(0, 39));
            ctx.fillStyle = lS(0, 40);
            var rowsPerStrip = fileDirectory[lS(0, 41)] ? fileDirectory[lS(0, 42)].values[0] : imageLength;
            var numStrips = strips.length;
            var imageLengthModRowsPerStrip = imageLength % rowsPerStrip;
            var rowsInLastStrip = imageLengthModRowsPerStrip === 0 ? rowsPerStrip : imageLengthModRowsPerStrip;
            var numRowsInStrip = rowsPerStrip;
            var numRowsInPreviousStrip = 0;
            var photometricInterpretation = fileDirectory[lS(0, 43)].values[0];
            var extraSamplesValues = [];
            var numExtraSamples = 0;
            (() => {
                const __ifInstance17 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                extraSamplesValues = fileDirectory[lS(0, 45)].values;
                                numExtraSamples = extraSamplesValues.length;
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance17.exports;
                return __exports.data(fileDirectory[lS(0, 44)] ? 1 : 0);
            })();
            (() => {
                const __ifInstance18 = new WebAssembly.Instance(__ifWasmModule, {
                    env: {
                        impFunc1: () => {
                            {
                                var colorMapValues = fileDirectory[lS(0, 47)].values;
                                var colorMapSampleSize = Math.pow(2, sampleProperties[0].bitsPerSample);
                            }
                        },
                        impFunc2: () => {
                        }
                    }
                });
                const __exports = __ifInstance18.exports;
                return __exports.data(fileDirectory[lS(0, 46)] ? 1 : 0);
            })();
            for (var i = 0; i < numStrips; i++) {
                (() => {
                    const __ifInstance19 = new WebAssembly.Instance(__ifWasmModule, {
                        env: {
                            impFunc1: () => {
                                {
                                    numRowsInStrip = rowsInLastStrip;
                                }
                            },
                            impFunc2: () => {
                            }
                        }
                    });
                    const __exports = __ifInstance19.exports;
                    return __exports.data(i + 1 === numStrips ? 1 : 0);
                })();
                var numPixels = strips[i].length;
                var yPadding = numRowsInPreviousStrip * i;
                for (var y = 0, j = 0; y < numRowsInStrip, j < numPixels; y++) {
                    for (var x = 0; x < imageWidth; x++, j++) {
                        var pixelSamples = strips[i][j];
                        var red = 0;
                        var green = 0;
                        var blue = 0;
                        var opacity = 1;
                        if (numExtraSamples > 0) {
                            for (var k = 0; k < numExtraSamples; k++) {
                                if (extraSamplesValues[k] === 1 || extraSamplesValues[k] === 2) {
                                    opacity = pixelSamples[3 + k] / 256;
                                    break;
                                }
                            }
                        }
                        switch (photometricInterpretation) {
                        case 0:
                            (() => {
                                const __ifInstance20 = new WebAssembly.Instance(__ifWasmModule, {
                                    env: {
                                        impFunc1: () => {
                                            {
                                                var invertValue = Math.pow(16, sampleProperties[0].bytesPerSample * 2);
                                            }
                                        },
                                        impFunc2: () => {
                                        }
                                    }
                                });
                                const __exports = __ifInstance20.exports;
                                return __exports.data(sampleProperties[0].hasBytesPerSample ? 1 : 0);
                            })();
                            (() => {
                                const __callInstance1 = new WebAssembly.Instance(__callWasmModule, {
                                    env: {
                                        impFunc: () => {
                                            pixelSamples.forEach(function (sample, index, samples) {
                                                samples[index] = invertValue - sample;
                                            });
                                        }
                                    }
                                });
                                const __exports = __callInstance1.exports;
                                return __exports.data();
                            })();
                        case 1:
                            red = green = blue = this.clampColorSample(pixelSamples[0], sampleProperties[0].bitsPerSample);
                            break;
                        case 2:
                            red = this.clampColorSample(pixelSamples[0], sampleProperties[0].bitsPerSample);
                            green = this.clampColorSample(pixelSamples[1], sampleProperties[1].bitsPerSample);
                            blue = this.clampColorSample(pixelSamples[2], sampleProperties[2].bitsPerSample);
                            break;
                        case 3:
                            if (colorMapValues === undefined) {
                                throw Error(lS(0, 48));
                            }
                            var colorMapIndex = pixelSamples[0];
                            red = this.clampColorSample(colorMapValues[colorMapIndex], 16);
                            green = this.clampColorSample(colorMapValues[colorMapSampleSize + colorMapIndex], 16);
                            blue = this.clampColorSample(colorMapValues[2 * colorMapSampleSize + colorMapIndex], 16);
                            break;
                        default:
                            throw RangeError(lS(0, 49), photometricInterpretation);
                            break;
                        }
                        ctx.fillStyle = lS(0, 50) + red + lS(0, 51) + green + lS(0, 52) + blue + lS(0, 53) + opacity + lS(0, 54);
                        (() => {
                            const __callInstance0 = new WebAssembly.Instance(__callWasmModule, {
                                env: {
                                    impFunc: () => {
                                        ctx.fillRect(x, yPadding + y, 1, 1);
                                    }
                                }
                            });
                            const __exports = __callInstance0.exports;
                            return __exports.data();
                        })();
                    }
                }
                numRowsInPreviousStrip = numRowsInStrip;
            }
        }
        return this.canvas;
    },
    fieldTagNames: {
        315: 'Artist',
        258: 'BitsPerSample',
        265: 'CellLength',
        264: 'CellWidth',
        320: 'ColorMap',
        259: 'Compression',
        33432: 'Copyright',
        306: 'DateTime',
        338: 'ExtraSamples',
        266: 'FillOrder',
        289: 'FreeByteCounts',
        288: 'FreeOffsets',
        291: 'GrayResponseCurve',
        290: 'GrayResponseUnit',
        316: 'HostComputer',
        270: 'ImageDescription',
        257: 'ImageLength',
        256: 'ImageWidth',
        271: 'Make',
        281: 'MaxSampleValue',
        280: 'MinSampleValue',
        272: 'Model',
        254: 'NewSubfileType',
        274: 'Orientation',
        262: 'PhotometricInterpretation',
        284: 'PlanarConfiguration',
        296: 'ResolutionUnit',
        278: 'RowsPerStrip',
        277: 'SamplesPerPixel',
        305: 'Software',
        279: 'StripByteCounts',
        273: 'StripOffsets',
        255: 'SubfileType',
        263: 'Threshholding',
        282: 'XResolution',
        283: 'YResolution',
        326: 'BadFaxLines',
        327: 'CleanFaxData',
        343: 'ClipPath',
        328: 'ConsecutiveBadFaxLines',
        433: 'Decode',
        434: 'DefaultImageColor',
        269: 'DocumentName',
        336: 'DotRange',
        321: 'HalftoneHints',
        346: 'Indexed',
        347: 'JPEGTables',
        285: 'PageName',
        297: 'PageNumber',
        317: 'Predictor',
        319: 'PrimaryChromaticities',
        532: 'ReferenceBlackWhite',
        339: 'SampleFormat',
        559: 'StripRowCounts',
        330: 'SubIFDs',
        292: 'T4Options',
        293: 'T6Options',
        325: 'TileByteCounts',
        323: 'TileLength',
        324: 'TileOffsets',
        322: 'TileWidth',
        301: 'TransferFunction',
        318: 'WhitePoint',
        344: 'XClipPathUnits',
        286: 'XPosition',
        529: 'YCbCrCoefficients',
        531: 'YCbCrPositioning',
        530: 'YCbCrSubSampling',
        345: 'YClipPathUnits',
        287: 'YPosition',
        37378: 'ApertureValue',
        40961: 'ColorSpace',
        36868: 'DateTimeDigitized',
        36867: 'DateTimeOriginal',
        34665: 'Exif IFD',
        36864: 'ExifVersion',
        33434: 'ExposureTime',
        41728: 'FileSource',
        37385: 'Flash',
        40960: 'FlashpixVersion',
        33437: 'FNumber',
        42016: 'ImageUniqueID',
        37384: 'LightSource',
        37500: 'MakerNote',
        37377: 'ShutterSpeedValue',
        37510: 'UserComment',
        33723: 'IPTC',
        34675: 'ICC Profile',
        700: 'XMP',
        42112: 'GDAL_METADATA',
        42113: 'GDAL_NODATA',
        34377: 'Photoshop'
    },
    fieldTypeNames: {
        1: 'BYTE',
        2: 'ASCII',
        3: 'SHORT',
        4: 'LONG',
        5: 'RATIONAL',
        6: 'SBYTE',
        7: 'UNDEFINED',
        8: 'SSHORT',
        9: 'SLONG',
        10: 'SRATIONAL',
        11: 'FLOAT',
        12: 'DOUBLE'
    }
};</script>
</body>
</html>
