<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>core-0.2.0.min.html</title>
</head>
<body>

<script>
/* Vytvoreno Wed Feb 13 2019 16:10:45 GMT+0100 (CET) */
!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){module.exports=function(b){var self=this;this.elementBindings=[],this.value=b.object[b.property],this.valueGetter=function(){return self.value},this.valueSetter=function(val){self.value=val;for(var i=0;i<self.elementBindings.length;i++){var binding=self.elementBindings[i];binding.element[binding.attribute]=val}},this.addBinding=function(element,attribute,event){var binding={element:element,attribute:attribute};return event&&(element.addEventListener(event,function(event){self.valueSetter(element[attribute])}),binding.event=event),this.elementBindings.push(binding),element[attribute]=self.value,self},Object.defineProperty(b.object,b.property,{get:this.valueGetter,set:this.valueSetter}),b.object[b.property]=this.value}},{}],2:[function(require,module,exports){var Bus=function(){this.eventMap={},this.routeMap={},this.busContext={}},Identity={create:function(){return Math.random().toString().substring(2)}},isArray=function(v){return"[object Array]"===Object.prototype.toString.call(v)},isEmpty=function(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0},InvalidEventStringError=function(eventString){this.name="InvalidEventStringError",this.message="Invalid event string given: "+eventString},InvalidRouteStringError=function(routeString){this.name="InvalidRouteStringError",this.message="Invalid route string given: "+routeString},InvalidEventHandlerError=function(eventHandler){this.name="InvalidEventHandlerError",this.message="Invalid event handler function given: "+eventHandler},_emit=function(eventString){var emitArgs,i,subRouteMap,routeString,eventHandlers,busContext;for(isArray(eventString)||(eventString=[eventString]),i=0;i<eventString.length;i+=1)if("string"!=typeof eventString[i])throw new InvalidEventStringError(eventString[i]);for(emitArgs=[],i=1;i<arguments.length;i+=1)emitArgs.push(arguments[i]);for(eventHandlers=[],i=0;i<eventString.length;i+=1)if(this.eventMap.hasOwnProperty(eventString[i])){subRouteMap=this.eventMap[eventString[i]];for(routeString in subRouteMap)subRouteMap.hasOwnProperty(routeString)&&eventHandlers.push(subRouteMap[routeString].eventHandler)}for(busContext=this.busContext,i=0;i<eventHandlers.length;i+=1)eventHandlers[i].apply(busContext,emitArgs)};Bus.prototype.emit=_emit,Bus.prototype.trigger=_emit;var _on=function(eventString,eventHandler){var wasArray,i,routeObject,routeString,routeStringArray;for((wasArray=isArray(eventString))||(eventString=[eventString]),i=0;i<eventString.length;i+=1)if("string"!=typeof eventString[i])throw new InvalidEventStringError(eventString[i]);if("function"!=typeof eventHandler)throw new InvalidEventHandlerError(eventHandler);for(routeStringArray=[],i=0;i<eventString.length;i+=1)routeObject={eventString:eventString[i],eventHandler:eventHandler},routeString=Identity.create(),routeStringArray.push(routeString),this.eventMap.hasOwnProperty(eventString[i])||(this.eventMap[eventString[i]]={}),this.eventMap[eventString[i]][routeString]=routeObject,this.routeMap[routeString]=routeObject;return wasArray?routeStringArray:routeStringArray[0]};Bus.prototype.on=_on,Bus.prototype.listen=_on;Bus.prototype.once=function(eventString,eventHandler){var that,routeString,called;if("function"!=typeof eventHandler)throw new InvalidEventHandlerError(eventHandler);return that=this,called=!1,routeString=this.on(eventString,function(){called||(called=!0,that.off(routeString),eventHandler.apply(this,arguments))})};var _off=function(routeString){var i,routeObject,eventString,subRouteMap,rs;if(void 0===routeString)return this.routeMap={},void(this.eventMap={});isArray(routeString)||(routeString=[routeString]);var flat=[];for(routeString=flat=flat.concat.apply(flat,routeString),i=0;i<routeString.length;i+=1)if("string"!=typeof routeString[i])throw new InvalidRouteStringError(routeString[i]);for(i=0;i<routeString.length;i+=1)if(this.routeMap.hasOwnProperty(routeString[i]))routeObject=this.routeMap[routeString[i]],delete this.routeMap[routeString[i]],delete this.eventMap[routeObject.eventString][routeString[i]],isEmpty(this.eventMap[routeObject.eventString])&&delete this.eventMap[routeObject.eventString];else if(eventString=routeString[i],this.eventMap.hasOwnProperty(eventString)){subRouteMap=this.eventMap[eventString];for(rs in subRouteMap)subRouteMap.hasOwnProperty(rs)&&delete this.routeMap[rs];delete this.eventMap[eventString]}};Bus.prototype.off=_off,Bus.prototype.removeListener=_off,module.exports=new Bus},{}],3:[function(require,module,exports){var cQuery={search:function(query,direction){function find(query){var match=null,queryItems=query.split(".");return"parents"!==queryItems[0]&&"children"!==queryItems[0]&&"siblings"!==queryItems[0]||("parents"===queryItems[0]&&(direction=1),"children"===queryItems[0]&&(direction=-1),"siblings"===queryItems[0]&&(direction=0),queryItems.splice(0,1)),"this"===queryItems[0]&&queryItems.splice(0,1),(match=self.$$findComponentProperty(queryItems,[self],!0))?match:(match||(match=self.$$findComponents(queryItems[0],direction)),queryItems.length>1&&queryItems.splice(0,1),self.$$findComponentProperty(queryItems,match))}direction=direction||null;var self=this,result=[];return query.split(";").forEach(function(queryItem){queryItem.length>0&&(queryItem=queryItem.trim(),self.$$query=queryItem,result=result.concat(find(queryItem)))}),result},findComponents:function(componentQuery,direction){var components=null,query=componentQuery.split(".")[0];if(components||(components=this.$$findComponentById(query)),components||(components=this.$$findComponentsByName(query,direction)),!components)throw new Error("Na dotaz '"+componentQuery+"' nebyla nalezena zadna komponenta!");return components},findComponentProperty:function(props,components,silent){function index(obj,i){var split=i.split(/\(.*?\)/);return split.length>1&&(params=prepareParams(i)),obj?obj[split[0]]:null}function prepareParams(parameters){var match=parameters.match(/\(([^)]+)\)/);if(match&&match[1])return match[1].split(",").map(function(i){return inferType(i)})}function inferType(param){return+param?+param:"'"===param[0]?param.replace(/[{\'\'}]/g,""):param}var match,prop,matches=[],params=[];if(components.forEach(function(component){(prop=props.reduce(index,component))&&void 0!==prop&&("function"==typeof prop&&(match=function(){prop.apply(component,params)}),matches.push(match||prop))}),0===matches.length&&!silent)throw new Error("Nemuzu najit vlastnost / metodu na dotaz '"+this.$$query+"'");return matches.length>0?matches:null},findComponentsByName:function(componentName,direction){function search(direction){for(var target=1===direction?"$$parents":"$$children",i=0;i<self[target].length;i++)(component=self[target][i])&&component.name===componentName&&result.push(component)}var component,self=this,result=[];return search(direction),direction||search(1),0!==result.length?result:null},findComponentById:function(componentId){var result=this.$$components[componentId];return result?[result]:null},findChildren:function(query){return[this.$$findComponentsByName(query,-1)]},findParents:function(query){return[this.$$findComponentsByName(query,1)]}};module.exports=cQuery},{}],4:[function(require,module,exports){function Component(options){"use strict";this.$element=options.element,this.$$id=options.id,this.$$components=options.components,this.$$bus=options.bus,this.$$bindings=options.bindings,this.$$parents=[],this.$$children=[],this.$$siblings=[],this.$$options=this.$$options=this.$element.data()||{},this.show=this.$$show,this.hide=this.$$hide,this.emit=this.$$emit}var cQuery=require("./cQuery/cQuery.js");Component.prototype={$$onInit:function(){this.$$registerListeners(),this.$$setupBindings(),this.$$applyOptions()},$$applyOptions:function(){for(var option in this.$$options)console.log(this.$$options[option],option)},$$setupBindings:function(){var bindingQuery=this.$$options.bind;if(bindingQuery){var split=bindingQuery.split(".");"this"===split[0]||1===split.length?this:this.$$findComponents(bindingQuery)}},$$on:function(event,callback,context){"click"===event&&this.$$attachClickListener([callback]),event.split(":").length>1&&this.$$bus.on(event,callback.bind(context||callback))},$$emit:function(event,data){this.$$bus.emit(event,{id:this.$$id,data:data})},$$registerListeners:function(){var query,handlers,self=this,options=this.$$options;for(var option in options)options.hasOwnProperty(option)&&("string"==typeof options[option]&&(options[option]=options[option].trim()),query=options[option],"click"===option&&(handlers=this.$$search(query))&&self.$$attachClickListener(handlers),option.indexOf("on:")>-1&&(handlers=this.$$search(query))&&self.$$attachBusListener(option.substring(3),handlers))},$$attachClickListener:function(handlers){var self=this;handlers.forEach(function(handler){if("function"!=typeof handler)throw new Error("Handler '"+handler+"' neni funkce!");self.$element.on("click",handler)})},$$attachBusListener:function(event,handlers){var self=this;handlers.forEach(function(handler){if("function"!=typeof handler)throw new Error("Handler '"+handler+"' neni funkce!");self.$$on(event,handler)})},$$search:function(query,direction){return cQuery.search.call(this,query,direction)},$$findComponents:function(componentQuery,direction){return cQuery.findComponents.call(this,componentQuery,direction)},$$findComponentProperty:function(props,components,silent){return cQuery.findComponentProperty.call(this,props,components,silent)},$$findComponentsByName:function(componentName,direction){return cQuery.findComponentsByName.call(this,componentName,direction)},$$findComponentById:function(componentId){return cQuery.findComponentById.call(this,componentId)},$$findChildren:function(query){return cQuery.findChildren.call(this,query)},$$findParents:function(query){return cQuery.findParents.call(this,query)},$$show:function(){this.$element.show()},$$hide:function(){this.$element.hide()}},module.exports=Component},{"./cQuery/cQuery.js":3}],5:[function(require,module,exports){var generic={name:"generic"};module.exports=generic},{}],6:[function(require,module,exports){module.exports=[require("./generic/generic.js"),require("./input/input.js")]},{"./generic/generic.js":5,"./input/input.js":7}],7:[function(require,module,exports){var input={name:"input",value:""};module.exports=input},{}],8:[function(require,module,exports){var Bus=require("./bus/bus.js"),utils=require("./utils/utils.js"),Binding=require("./binding/binding.js"),Component=require("./component/component.js"),defaultComponents=require("./components/index.js"),errors={BIND_NO_COMPONENT:function(binding){return"Nemuzu registrovat binding pro hodnotu '"+binding+"'; v dosahu neni zadna registrovana komponenta."},INSTANCE_ERROR:function(componentName){return"Pri instancovani komponenty '"+componentName+"' doslo k chybe: "},NAME_CLASH:function(componentName){return"Nazev komponenty '"+componentName+"' koliduje s nazvem jine komponenty!"},NAME_TYPE_ERROR:"Komponenta predana k registraci musi byt object!",NO_TEMPLATE:"Komponenta neexistuje!"};window.Core=window.Core||{},function($){function createComponent($ref){var name=$ref.attr("data-component");if(""===name)return null;var binding=$ref.attr("data-bind");if(!name&&binding)switch($ref.prop("nodeName")){case"INPUT":name="input";break;default:name="generic"}var id=$ref.attr("data-id")||utils.makeId(),componentTemplate=componentTemplates.find(function(component){return component.name===name});if(!componentTemplate)throw new Error(errors.INSTANCE_ERROR(name)+errors.NO_TEMPLATE);$ref.data("component-id",id),bindings[id]={bindings:[]};var baseComponent=new Component({id:id,bus:Bus,element:$ref,bindings:bindings[id].bindings,components:components});return $.extend(!0,baseComponent,componentTemplate)}function createNeighborTree(){function handle(component,target,i,node){var nodeId=$(node).data("component-id");nodeId&&component[target].push(components[nodeId])}var selector=componentSelector+","+bindSelector;for(var component in components)if(components.hasOwnProperty(component)){var $el=components[component].$element;$el.parents(selector).each(handle.bind(null,components[component],"$$parents")),$el.find(selector).each(handle.bind(null,components[component],"$$children")),$el.nextAll(selector).each(handle.bind(null,components[component],"$$siblings")),$el.prevAll(selector).each(handle.bind(null,components[component],"$$siblings"))}}function createBindings(){function getComponentBinding(component,property){var result=null,compBinds=bindings[component.$$id];return compBinds?result=compBinds.bindings.find(function(binding){return binding.property===property}):result}var bindQuery,comp;for(var component in components)(bindQuery=(comp=components[component]).$$options.bind)&&function(query,component){var targetComponent,element=component.$element[0],split=query.split("."),id=(targetComponent="this"===split[0]||1===split.length?component:component.$$findComponents(query)[0]).$$id,property=split.length>1?split[1]:split[0],binding=getComponentBinding(targetComponent,property);switch(binding||(binding=new Binding({object:targetComponent,property:property}),bindings[id].bindings.push(Object.assign(binding,{property:property}))),element.nodeName){case"INPUT":binding.addBinding(element,"value","keyup");break;default:binding.addBinding(element,"innerHTML")}}(bindQuery,comp)}function checkForNameClash(newComponent){componentTemplates.forEach(function(component){if(component.name===newComponent.name)throw new Error(errors.NAME_CLASH(newComponent.name))})}function initializeComponents(){for(var component in components)components.hasOwnProperty(component)&&(components[component].$$onInit(),components[component].onInit&&components[component].onInit())}function registerComponent(component){if("object"!=typeof component)throw new Error(errors.NAME_TYPE_ERROR);checkForNameClash(component),componentTemplates.push(component)}var components={},bindings={},componentTemplates=[],componentSelector="[data-component]",bindSelector="[data-bind]";defaultComponents.forEach(function(component){registerComponent(component)}),$(document).ready(function(){utils.benchmark(function(){$(componentSelector+","+bindSelector).each(function(i,elem){var $elem=$(elem);if(!$elem.data("component-id")){var component=createComponent($elem);component&&(components[component.$$id]=component)}}),createNeighborTree(),createBindings(),initializeComponents()})}),Core.bindings=bindings,Core.register=registerComponent,Core.components=components,Core.componentTemplates=componentTemplates}(jQuery)},{"./binding/binding.js":1,"./bus/bus.js":2,"./component/component.js":4,"./components/index.js":6,"./utils/utils.js":9}],9:[function(require,module,exports){var utils={makeId:function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<12;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return"$$"+text},benchmark:function(callback){var startTime=new Date;callback();var elapsedTime=new Date-startTime,style="color: green;";elapsedTime>50&&(style="color: orange;"),elapsedTime>100&&(style="color: red;"),console.log("%c[CORE]%c Komponenty vytvoreny. Uplynuty cas: %c"+elapsedTime+"ms","color: orange;","color: black;",style)}};module.exports=utils},{}]},{},[8]);
</script>

</body>
</html>
