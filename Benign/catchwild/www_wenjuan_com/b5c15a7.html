<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>b5c15a7.html</title>
</head>
<body>

<script>
(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{2348:function(e,t,n){e.exports={}},2349:function(e,t,n){var r=n(182),o=n(164),c=n(70);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(52),n(17),n(50),n(5),n(87),n(88),n(89),n(30),n(32),n(44),n(57),n(357),n(22),n(371),n(372),n(60),n(43),n(49),n(106),n(693),n(45),n(694),n(695),n(696),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(38),n(61),n(14),n(13),n(68),n(37),n(9),n(31),n(19),n(99),n(90),e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===c(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(object,e){return Object.prototype.hasOwnProperty.call(object,e)},n.p="/",n(n.s=274)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,c,l,d){var v,m="function"==typeof e?e.options:e;if(t&&(m.render=t,m.staticRenderFns=n,m._compiled=!0),r&&(m.functional=!0),c&&(m._scopeId="data-v-"+c),l?(v=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},m._ssrRegister=v):o&&(v=d?function(){o.call(this,(m.functional?this.parent:this).$root.$options.shadowRoot)}:o),v)if(m.functional){m._injectStyles=v;var f=m.render;m.render=function(e,t){return v.call(t),f(e,t)}}else{var _=m.beforeCreate;m.beforeCreate=_?[].concat(_,v):[v]}return{exports:e,options:m}}n.d(t,"a",(function(){return r}))},1:function(e,t){e.exports=n(1)},128:function(e,t){e.exports=n(480)},13:function(e,t){e.exports=n(82)},131:function(e,t){e.exports=n(300)},133:function(e,t){e.exports=n(298)},147:function(e,t){e.exports=n(483)},15:function(e,t){e.exports=n(178)},16:function(e,t){e.exports=n(204)},22:function(e,t){e.exports=n(185)},274:function(e,t,n){"use strict";var d;n.r(t);var v=function(){var e=this,t=e._self._c;return e.visible?t("div",{staticClass:"sample-dialog mask",style:{zIndex:e.zIndex}},[t("div",{staticClass:"inner"},[t("div",{staticClass:"dialog-header"},[t("div",{staticClass:"title"},[t("img",{attrs:{src:"".concat(e.appendUrl,"sample-logo.png"),alt:""}}),e._v(" "),e._m(0)]),e._v(" "),t("span",{staticClass:"close-icon wj-icon-close",on:{click:function(t){return e.$emit("update:visible",!1)}}})]),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"content"},[t("PackageDetail",{staticClass:"pkgs",attrs:{"active-service":e.innerActiveService,"project-type":e.projectType,"sample-size":e.innerSampleSize,"online-data":e.onlineData,"coupon-list":e.coupons.slice(0,12),"project-id":e.projectId,"price-info":e.priceInfo,"show-error-map":e.showErrorMap,loading:e.loading},on:{"update:activeService":function(t){e.innerActiveService=t},"update:active-service":function(t){e.innerActiveService=t},"update:sampleSize":function(t){e.innerSampleSize=t},"update:sample-size":function(t){e.innerSampleSize=t},getCouponsAndPackage:e.getCouponsAndPackage}}),e._v(" "),t("payment",{attrs:{"coupon-list":e.coupons,"active-service":e.innerActiveService,"sample-size":e.innerSampleSize,"online-data":e.onlineData,"confirm-zindex":e.confirmZindex,"project-question-num":e.projectQuestionNum,"sample-unit-price":e.priceInfo.base_cost,"project-id":e.projectId,"price-info":e.priceInfo,"show-error-map":e.showErrorMap,loading:e.loading}})],1)])]):e._e()};v._withStripped=!0;n(15);var f=n(4),_=n.n(f),h=n(1),y=n.n(h),w=y.a.prototype.commonRequest;function C(e){return(w=y.a.prototype.commonRequest).post("/member/api/validate_payorder/",{order_id:e})}function S(e){return(w=y.a.prototype.commonRequest).post("/pconvert/api/pconvert_paid/",m({},e))}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w=y.a.prototype.commonRequest,e.redErrorMsg=!0,w.post("/member/api/validate_payorder/",e)}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(w=y.a.prototype.commonRequest).get("/member/api/payredirect/",e)}w&&w.get&&w.post||console.log("%c项目没有注入http封装","color:red;");var P=function(){var e=this,t=e._self._c;return t("div",{class:["package-payment",{"hidden-error":e.hiddenError}]},["person-service"==e.activeService?t("div",{staticClass:"artificial"},[t("div",{staticClass:"title"},[e._v("\n            获取专业服务\n        ")]),e._v(" "),t("div",{staticClass:"content"},[t("div",{staticClass:"service-info member-info"},[t("span",[e._v("样本顾问")]),t("span",[e._v(e._s(e.onlineData.name))])]),e._v(" "),t("img",{attrs:{src:e.onlineData.qrCode,alt:""}}),e._v(" "),e._m(0),e._v(" "),e._m(1),e._v(" "),t("div",{staticClass:"service-info phone-info"},[t("span",[e._v("电话联系")]),e._v(" "),t("span",[e._v(e._s(e.onlineData.phone))])])])]):t("div",{staticClass:"dis-artificial"},[t("div",{staticClass:"cost"},[t("span",{staticClass:"symbol"},[e._v("￥")]),e._v(" "),t("span",{staticClass:"price"},[e._v(e._s(e.hiddenError?0:e.sampleRealPrice))])]),e._v(" "),t("div",{staticClass:"info"},[t("div",{staticClass:"item-price info-item common-color-333"},[t("span",[e._v("实付单价（每样本）")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:!e.hiddenError,expression:"!hiddenError"}]},[e._v("约"+e._s(e.sampleRealUnitPrice)+"元")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.hiddenError,expression:"hiddenError"}]},[e._v("暂无")])]),e._v(" "),t("div",{staticClass:"hr"}),e._v(" "),t("div",{staticClass:"total-price info-item font-bold"},[t("span",[e._v("样本总价")]),e._v(" "),t("span",[e._v(e._s(e.sampleTotalPrice)+"元")])]),e._v(" "),t("div",{staticClass:"total-detail font-lighter"},[t("div",{staticClass:"item-price info-item"},[t("span",[e._v("基础单价（"+e._s(e.priceInfo.total_question_num||0)+"题）")]),e._v(" "),t("span",[e._v(e._s(e.priceInfo.base_cost)+"元")])]),e._v(" "),t("div",{staticClass:"total-num info-item"},[t("span",[e._v("回收数量")]),e._v(" "),t("span",[e._v("×"+e._s(e.sampleSize))])])]),e._v(" "),t("div",{staticClass:"coupon info-item"},[t("wd-dropdown",{attrs:{trigger:"click"},on:{command:e.selectCoupon}},[t("div",{staticClass:"coupon"},[t("span",{staticClass:"font-lighter"},[e._v("\n                            优惠券"),t("i",{staticClass:"wd-icon-caret-bottom"})]),e._v(" "),t("span",{staticClass:"font-red"},[e._v(e._s(Number(e.couponDeduction)?"-".concat(e.couponDeduction):0)+"元")])]),e._v(" "),t("wd-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.avaliableCoupons,(function(n,i){return t("wd-dropdown-item",{key:"coupon-".concat(i),attrs:{command:n}},[t("span",[e._v("优惠券")]),e._v(" "),t("span",[e._v("-"+e._s(n.value)+"元")])])})),1)],1)],1),e._v(" "),t("div",{staticClass:"actual-delivery info-item"},[t("span",{staticClass:"font-lighter"},[e._v("账户余额"+e._s(e.priceInfo.available_rmb||0)+" 元")]),e._v(" "),t("span",{staticClass:"font-red"},[e._v(e._s(Number(e.userSubPrice)?"-".concat(e.userSubPrice):0)+"元")])]),e._v(" "),t("div",{staticClass:"info-item font-bold info-footer"},[t("span",[e._v("实际支付")]),e._v(" "),t("span",[e._v(e._s(e.sampleRealPrice)+"元")])])]),e._v(" "),t("div",{staticClass:"pay-area"},[t("button",{staticClass:"pay_way alipay",class:{inactive:"wechatpay"===e.payWay},on:{click:function(t){return e.changePayWay("alipay")}}}),e._v(" "),t("button",{staticClass:"pay_way wechat",class:{inactive:"alipay"===e.payWay},on:{click:function(t){return e.changePayWay("wechatpay")}}})])]),e._v(" "),t("wd-button",{staticClass:"submit",attrs:{type:e.hiddenError?"info":"primary",disabled:e.hiddenError},on:{click:e.sampleOrder}},[e._v("\n        "+e._s("person-service"==e.activeService?"登记需求":e.hiddenError?"暂不支持下单":"立即下单")+"\n    ")]),e._v(" "),t("div",{staticClass:"tip"},[e._v("\n        "+e._s("person-service"==e.activeService?"下单有优惠，欢迎联系我":"现在下单预计 3 天完成收集")+"\n    ")])],1)};P._withStripped=!0;n(37);var j=n(13),z=n.n(j),T=(n(59),n(28)),O=n.n(T),I=(n(60),n(29)),E=n.n(I),D=(n(61),n(30)),R=n.n(D),M=(n(43),n(22)),N=n.n(M),$=(n(8),n(3)),L=n.n($),A={components:(d={},o(d,L.a.name,L.a),o(d,N.a.name,N.a),o(d,R.a.name,R.a),o(d,E.a.name,E.a),o(d,O.a.name,O.a),d),props:{projectId:{type:String,default:""},couponList:{type:Array,default:function(){return[]}},activeService:{type:String,default:"person-service"},onlineData:{type:Object,default:function(){}},sampleSize:{type:Number,default:50},confirmZindex:{type:Number,default:null},priceInfo:{type:Object,default:function(){return{}}},showErrorMap:{type:Object,default:null}},data:function(){return{payWay:"alipay",IconQuestion:"//s1.wenjuan.com/assets/images/business/package-dialog/question.png",checkedCoupon:0,orderId:""}},computed:{tooltipText:function(){return"sale-sample"==this.activeService?"题目数15题及以下，限时补贴3折优惠":"满100打9折，满200打8折，满300打7折，满500打6折"},sampleTotalPrice:function(){return(this.priceInfo.base_cost*this.sampleSize).toFixed(2)},sampleOriginPrice:function(){return Number(this.sampleTotalPrice).toFixed(2)||0},avaliableCoupons:function(){var e=this;return this.couponList.filter((function(t){var n=Number.isNaN(Number.parseFloat(t.satisfy_value))?0:Number.parseFloat(t.satisfy_value);return e.sampleOriginPrice>=n}))},couponDeduction:function(){var e;return null===(e=this.checkedCoupon)||void 0===e?void 0:e.value},userSubPrice:function(){var e=this.sampleOriginPrice-this.couponDeduction;return(e>0?Math.min(e,this.priceInfo.available_rmb):0).toFixed(2)},sampleRealPrice:function(){return Math.max(this.sampleOriginPrice-this.couponDeduction-this.priceInfo.available_rmb||0,0).toFixed(2)},sampleRealUnitPrice:function(){return(this.sampleRealPrice/this.sampleSize).toFixed(2)},predictTime:function(){var e=Math.ceil(.9*this.sampleSize/100);return e<2?2:e},hiddenError:function(){return this.showErrorMap.open&&"person-service"!==this.activeService}},watch:{avaliableCoupons:{handler:function(e){if(e.length>0){var t,n,r=1/0,o=1/0,c=l(e);try{for(c.s();!(n=c.n()).done;){var d=n.value,v=d.value-this.sampleOriginPrice;if(0===v){t=d;break}v>0&&v<r&&(r=v,t=d),v<0&&Math.abs(v)<o&&r===1/0&&(o=Math.abs(v),t=d)}}catch(e){c.e(e)}finally{c.f()}this.selectCoupon(t)}else this.selectCoupon({value:0,oid:""})},immediate:!0}},methods:{changePayWay:function(e){this.payWay=e},selectCoupon:function(e){console.log("选中的优惠券",e,this.avaliableCoupons);var t=this.avaliableCoupons.length&&e.value&&this.avaliableCoupons.filter((function(t){return t.value==e.value})).reduce((function(e,t){return new Date(null==t?void 0:t.expire_date).getTime()<new Date(e.expire_date).getTime()||new Date(null==t?void 0:t.expire_date).getTime()==new Date(e.expire_date).getTime()&&new Date(null==t?void 0:t.from_date).getTime()<new Date(e.from_date).getTime()?t:e}));console.log("最终使用的优惠券",t),this.checkedCoupon=t||e},sampleOrder:function(){var e=this;return r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"sale-sample"===e.activeService?e.handlePay():window.open(e.onlineData.register);case 1:case"end":return t.stop()}}),t)})))()},checkPayment:function(e){return r(regeneratorRuntime.mark((function t(){var n,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(e);case 3:if(n=t.sent,1!==(null==(data=n.data)?void 0:data.order_status)){t.next=8;break}return console.log("购买成功"),t.abrupt("return",!0);case 8:return t.abrupt("return",Promise.reject(new Error("checkPayment faild.")));case 11:return t.prev=11,t.t0=t.catch(0),t.abrupt("return",Promise.reject(t.t0));case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},afterPayment:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(_()({message:"支付成功",type:"success"}),this.$parent.$emit("update:visible",!1),this.$parent.$emit("payment",!0),this.$parent.needReload&&window.location.reload()):(_()({message:"您未完成支付",type:"warning"}),this.$parent.$emit("payment",!1))},handlePay:function(){var e=this;return r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.paymentSubmit()}catch(e){console.log(e)}case 1:case"end":return t.stop()}}),t)})))()},handleReload:function(){sessionStorage.setItem("projectCollectType","GeneralCollect"),location.reload()},paymentSubmit:function(){var e=arguments,t=this;return r(regeneratorRuntime.mark((function n(){var r,o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=!(e.length>0&&void 0!==e[0])||e[0],!(t.sampleRealPrice>0&&r)){n.next=6;break}console.log("调起第三方支付"),t.getMemberPayorder(),n.next=21;break;case 6:return console.log("直接支付"),n.prev=7,o={act:"comfirm_order",pid:t.projectId,sample_type:1,estimated_collection_time:t.predictTime,community_info_list:[]},c={community_name:"答题人群",person_num:t.sampleSize,feature_en_name_list:[],features_cost:.9},o.community_info_list.push(c),t.couponDeduction&&(o.c_id=t.checkedCoupon.oid,o.c_type=t.checkedCoupon.c_type),n.next=14,S(o);case 14:200===(l=n.sent).status&&1===l.status_code&&l.data.success&&t.afterPayment(!0),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(7),console.log(n.t0);case 21:case"end":return n.stop()}}),n,null,[[7,18]])})))()},getMemberPayorder:function(){var e=this;(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w=y.a.prototype.commonRequest,e.redErrorMsg=!0,w.post("/member/api/payorder/",e)})({amount_cent:(100*this.sampleRealPrice).toFixed()-0,pay_channel:this.payWay}).then((function(t){e.orderId=t.data.order_id,e.getPayredirect(t.data.order_id)})).catch((function(){}))},validatePayorder:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){var r,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x({order_id:e});case 3:if(r=n.sent,1!==(null==(data=r.data)?void 0:data.order_status)){n.next=10;break}return console.log("购买成功"),n.next=9,t.paymentSubmit(!1);case 9:return n.abrupt("return",!0);case 10:return n.abrupt("return",Promise.reject(new Error("checkPayment faild.")));case 13:return n.prev=13,n.t0=n.catch(0),console.log("there"),n.abrupt("return",Promise.reject(n.t0));case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()},getPayredirect:function(e){var t=this;return r(regeneratorRuntime.mark((function n(){var o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k({order_id:e});case 3:return l=n.sent,(null===(c=l.data)||void 0===c?void 0:c.redirect_to)&&window.open(l.data.redirect_to,"_blank"),o=setInterval(r(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("在轮询检查支付状态-特价样本"),n.next=4,t.validatePayorder(e);case 4:clearInterval(o),z.a.close(),t.afterPayment(!0),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])}))),3e3),n.next=8,z.a.confirm("支付完成前，请勿关闭此窗口<br />支付完成后，请根据支付情况点击以下按钮","支付成功确认",m({confirmButtonText:"支付成功",closeOnPressEscape:!1,dangerouslyUseHTMLString:!0},t.confirmZindex||t.zIndex?{zIndex:t.confirmZindex||t.zIndex+1}:null));case 8:return n.next=10,t.validatePayorder(e);case 10:n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),"cancel"!==n.t0&&t.afterPayment(!1),console.log("payment errors: ",n.t0);case 16:clearInterval(o);case 17:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}},U=A,B=n(0),F=Object(B.a)(U,P,[function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-info skill-info"},[t("span",[e._v("专业能力")]),e._v(" "),t("span",[e._v("录入/检查/清洗/交付")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"service-info skill-info"},[t("span",[e._v("有效交付")]),e._v(" "),t("span",[e._v("400+项目")])])}],!1,null,"ce4264ee",null).exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"package-detail"},[t("ul",{staticClass:"tabs",class:e.borderStyle?"left":"right"},[e._l(e.showServiceList,(function(n){return t("li",{key:n.key,staticClass:"tab",on:{click:function(t){return e.changeService(n)}}},[t("h3",{staticClass:"name"},[e._v(e._s(n.name))]),e._v(" "),t("p",{staticClass:"intro"},[e._v(e._s(n.intro))])])})),e._v(" "),1==e.showServiceList.length?t("li",{staticStyle:{width:"300px"}}):e._e()],2),e._v(" "),t("div",{staticClass:"detail-part",class:e.borderStyle?"right":"left"},[t("div",{staticClass:"back-block"}),e._v(" "),e.loading?e._e():[e.showErrorMap.open&&"person-service"!==e.activeService?t("section",{staticClass:"detail-waring"},[1===e.showErrorMap.type?t("div",{staticClass:"error-label"},[t("i",{staticClass:"wd-message__icon wd-icon-error color-red"}),e._v(" "),t("span",[e._v("特价样本服务暂不支持题目数量大于50题的项目，您可以对项目题目数量进行精简或使用人工服务")])]):e._e(),e._v(" "),2===e.showErrorMap.type?t("div",{staticClass:"warnning-label"},[t("i",{staticClass:"wd-icon-warning color-yellow"}),e._v(" "),t("div",[e._v("\n                        项目已开启了\n                        "),e._l(e.showErrorMap.labelList,(function(n,r){return t("span",{key:"label-".concat(r)},[e._v("【"+e._s(n.label||"")+"】 ")])})),e._v("设置，暂不支持使用特价样本服务。您需要关闭上述设置才可使用特价样本\n                        "),t("div",{staticClass:"close-warning"},[t("span",{staticClass:"close-warning-label",on:{click:e.waringClose}},[e._v("关闭冲突设置")])])],2)]):e._e()]):t("section",{staticClass:"detail-content"},[t("div",{staticClass:"detail-part-wrap"},[t("ul",{staticClass:"amount-part",class:e.borderStyle?"right":"left"},e._l(e.samplePackageList,(function(n,r){return t("li",{key:n.goods_id,class:e.activePackge.goods_id==n.goods_id?"active-part":"",on:{click:function(t){return e.changeCount(n.sampleSize,r)}}},[t("div",{staticClass:"total"},[e._v(e._s(n.info))]),e._v(" "),t("div",{staticClass:"price"},[n.price?t("div",{staticClass:"real-price"},[e._v("\n                                    ￥"),t("span",[e._v(e._s(n.price))]),e._v(" 起\n                                ")]):t("div",{on:{click:function(t){return e.changeCusromSize(t)}}},[t("wd-input-number",{attrs:{"controls-position":"right","custom-error-tip":e.customErrorTips,"hide-error-message":!0,min:50,max:99999,label:"描述文字"},on:{change:e.changeCusromSize},model:{value:e.customSize,callback:function(t){e.customSize=t},expression:"customSize"}})],1)]),e._v(" "),n.dsc?t("div",{staticClass:"intro"},[e._v("\n                                "+e._s(n.dsc)+"\n                            ")]):t("div",{staticClass:"intro"},[e._v("\n                                "+e._s(e.AISamplePackageDsc)+"\n                            ")])])})),0),e._v(" "),e.couponList.length?[t("div",{directives:[{name:"show",rawName:"v-show",value:e.borderStyle&&"person-service"!==e.activeService,expression:"\n                                borderStyle &&\n                                    activeService !== 'person-service'\n                            "}],staticClass:"coupon"},[t("div",{staticClass:"coupon-title"},[t("h2",{staticClass:"title"},[e._v("优惠券再减价格更低")]),e._v(" "),t("section",{staticClass:"paging-icon"},[t("span",{staticClass:"paging-icon-item",on:{click:function(t){return e.pageHander("left")}}},["left"===e.criticalType?t("img",{attrs:{"data-type":"left-disabled",src:"".concat(e.cndurlbase,"向左-线.png"),alt:"问卷网"}}):t("img",{staticClass:"right-rotate180",attrs:{src:"".concat(e.cndurlbase,"向右-线.png"),alt:"问卷网"}})]),e._v(" "),t("span",{staticClass:"paging-text"},[e._v("\n                                        "+e._s(e.currentPage)+"/"+e._s(e.pageTotal)+"\n                                    ")]),e._v(" "),t("span",{staticClass:"paging-icon-item",on:{click:function(t){return e.pageHander("right")}}},["right"===e.criticalType?t("img",{staticClass:"right-rotate180",attrs:{src:"".concat(e.cndurlbase,"向左-线.png"),alt:"问卷网"}}):t("img",{attrs:{src:"".concat(e.cndurlbase,"向右-线.png"),alt:"问卷网"}})])])]),e._v(" "),t("div",{ref:"coupon-list",staticClass:"coupon-list"},e._l(e.couponList,(function(n,r){return t("div",{key:r,staticClass:"coupon-list-item"},[t("section",{staticClass:"item-left item-block"},[t("span",[e._v("优惠券")]),e._v(" "),t("span",[e._v(e._s(n.expired)+"到期")])]),e._v(" "),t("section",{staticClass:"item-right item-block"},[t("span",[t("img",{staticClass:"unit",attrs:{src:"".concat(e.cndurlbase,"unit.png"),width:"9px",height:"auto"}}),e._v(" "),t("span",{staticClass:"item-right_price"},[e._v("\n                                                "+e._s(n.value)+"\n                                            ")])]),e._v(" "),t("span",[e._v("\n                                            "+e._s(n.satisfy_value?"满".concat(n.satisfy_value,"可用"):"全场通用")+"\n                                        ")])])])})),0)])]:e._e(),e._v(" "),t("div",{staticClass:"service-detail-part"},[t("div",{directives:[{name:"show",rawName:"v-show",value:"person-service"===e.activeService,expression:"activeService === 'person-service'"}],staticClass:"select-description"},[t("span",{staticClass:"targer"},[e._v("*")]),e._v("样本若有特殊定制，价格有些许差异，具体以顾问报价为准\n                        ")]),e._v(" "),t("div",{staticClass:"title"},[e._v("\n                            服务详情\n                            "),"person-service"!==e.activeService?t("img",{staticClass:"detail-part-title_icon",attrs:{src:"".concat(e.cndurlbase,"提示-线 .png"),alt:"问卷网",width:"14px"},on:{click:function(t){e.suderVisible=!0}}}):e._e()]),e._v(" "),"person-service"==e.activeService?t("div",{staticClass:"detail"},[t("div",{staticClass:"service-detail left-detail"},[t("div",{staticClass:"service-header"},[t("img",{attrs:{src:"".concat(e.appendUrl,"account.png"),alt:""}}),e._v(" "),t("span",{staticClass:"service-title"},[e._v("收集定制")])]),e._v(" "),t("div",{staticClass:"service-intro"},[e._v("\n                                    人群标签定制，城市、年龄、职业、收入、兴趣等；样本配额定制\n                                ")])]),e._v(" "),t("div",{staticClass:"service-detail right-detail"},[t("div",{staticClass:"service-header"},[t("img",{attrs:{src:"".concat(e.appendUrl,"group.png"),alt:""}}),e._v(" "),t("span",{staticClass:"service-title"},[e._v("样本清洗")])]),e._v(" "),t("div",{staticClass:"service-intro"},[e._v("\n                                    数据人工审核，有效样本才收费\n                                ")])])]):t("div",{staticClass:"detail"},[t("div",{staticClass:"service-detail service-check"},[t("div",{staticClass:"service-header"},[t("img",{attrs:{src:"".concat(e.appendUrl,"account.png"),alt:""}}),e._v(" "),t("span",{staticClass:"service-title"},[e._v("人群要求")])]),e._v(" "),t("div",[t("wd-checkbox-group",{attrs:{size:"medium",horizontal:""},model:{value:e.check1,callback:function(t){e.check1=t},expression:"check1"}},[t("wd-checkbox",{attrs:{label:"没有要求"}}),e._v(" "),t("div",{staticClass:"check-change",on:{click:e.changeCheck}},[t("wd-checkbox",{staticClass:"dis-click",attrs:{label:"特殊要求"}})],1)],1)],1)]),e._v(" "),t("div",{staticClass:"service-detail service-check"},[t("div",{staticClass:"service-header"},[t("img",{attrs:{src:"".concat(e.appendUrl,"group.png"),alt:""}}),e._v(" "),t("span",{staticClass:"service-title"},[e._v("样本清洗")])]),e._v(" "),t("div",[t("wd-checkbox-group",{attrs:{size:"medium",horizontal:""},model:{value:e.check2,callback:function(t){e.check2=t},expression:"check2"}},[t("wd-checkbox",{attrs:{label:"自我清洗"}}),e._v(" "),t("div",{staticClass:"check-change",on:{click:e.changeCheck}},[t("wd-checkbox",{attrs:{label:"委托清洗"}})],1)],1)],1)])])])],2),e._v(" "),t("div",{staticClass:"utils"},[t("div",{staticClass:"contact-service utils-bnt",on:{click:function(t){e.serviceShow=!0}}},[t("span",{staticClass:"service-icon"}),e._v(" "),t("span",[e._v("联系样本顾问")])]),e._v(" "),t("div",{staticClass:"contact-service utils-bnt",on:{click:e.goSampleIntroduce}},[t("span",{staticClass:"sample-icon"}),e._v(" "),t("span",[e._v("查看样本介绍")])])])])]],2),e._v(" "),t("wd-dialog",{staticClass:"contact-service-counselor",attrs:{title:"专属样本顾问",visible:e.serviceShow,"show-close":!1,width:"280px",center:""},on:{"update:visible":function(t){e.serviceShow=t}}},[t("div",{staticClass:"content-contact"},[t("p",{staticClass:"line-title"},[e._v("电话联系")]),e._v(" "),t("p",{staticClass:"phone"},[e._v(e._s(e.onlineData.phone))]),e._v(" "),t("p",{staticClass:"line-title"},[e._v("微信联系")]),e._v(" "),t("img",{staticClass:"wx-ercode",attrs:{src:e.onlineData.qrCode,alt:"服务顾问"}}),e._v(" "),t("button",{staticClass:"ok-btn",on:{click:function(t){e.serviceShow=!1}}},[e._v("\n                好的\n            ")])])]),e._v(" "),e.suderVisible?t("SuderDialog",{on:{close:function(t){e.suderVisible=!1}}}):e._e()],1)};W._withStripped=!0;n(128);var G=n(50),V=n.n(G),Z=(n(147),n(131)),H=n.n(Z),Q=(n(133),n(46)),X=n.n(Q),J=(n(16),n(7)),K=n.n(J),Y=[{name:"特价样本",key:"sale-sample",intro:"自助清洗/样本性价比高",show:["sale-sample"]},{name:"精准样本服务",key:"accurate-sample",intro:"样本顾问协助筛查，收集多有折扣",show:["accurate-sample"]},{name:"人工服务",key:"person-service",intro:"免费清洗/有效样本才收费",show:["sale-sample","accurate-sample","person-service"]}],ee=[{goods_id:1,info:"50份 有效样本",sampleSize:50,price:150,dsc:"体验样本服务"},{goods_id:2,info:"200份 有效样本",sampleSize:200,price:480,dsc:"补充有效样本"},{goods_id:3,info:"300份 有效样本",sampleSize:300,price:630,dsc:"科学的样本数据"},{goods_id:4,sampleSize:500,info:"自定义 有效样本"}],te=[{goods_id:1,info:"50份",sampleSize:50,price:45,dsc:"体验样本服务"},{goods_id:2,info:"300份",sampleSize:300,price:270,dsc:"科学的样本数据"},{goods_id:3,info:"500份",sampleSize:500,price:450,dsc:"留有余量适合清洗"},{goods_id:4,info:"自定义",sampleSize:600,dsc:"需要多少收多少"}],ne=[{goods_id:1,info:"50份",sampleSize:50,discount:1,dsc:"体验样本服务"},{goods_id:2,info:"300份",sampleSize:300,discount:.7,dsc:"科学的样本数据"},{goods_id:3,info:"500份",sampleSize:500,discount:.6,dsc:"留有余量适合清洗"},{goods_id:4,info:"自定义",sampleSize:600,dsc:"需要多少收多少"}],ie=function(){var e=this,t=e._self._c;return t("WdDialog",{attrs:{title:"特价样本服务详情",visible:!0},on:{close:function(t){return e.$emit("close")}}},[t("div",{staticClass:"suder-dialog"},e._l(e.content,(function(n){var title=n.title,desc=n.desc;return t("section",{key:title,staticClass:"section-block"},[t("h2",{staticClass:"title"},[e._v(e._s(title))]),e._v(" "),t("div",{staticClass:"desc"},[e._v(e._s(desc))])])})),0)])};ie._withStripped=!0;var ae={name:"SuderDialog",components:{WdDialog:K.a},data:function(){return{content:[{title:"什么是特价样本服务",desc:"为了让大部分用户能以更低廉的价格使用样本服务，问卷网特此推出普通样本服务，该服务弱化了样本人群的可定制性，以此向用户提供远低于人工样本服务的报价。"},{title:"如何收集样本",desc:"问卷网与国内众多网站合作，在您成功下单样本服务后，会将您的问卷投放到合作网站上，以帮助您收集答卷数据。"},{title:"如何指定答题者所在城市",desc:"普通样本服务暂不支持指定样本答卷人群的城市、职业、婚姻情况、家庭收入等信息，如果您对此有强烈需要，建议使用人工服务。"},{title:"样本收集速度",desc:"样本收集速度因问卷而异。通常来说，题目数量越少，选择题占比越高，人群要求越低的问卷，样本收集速度越快。大部分满足上述描述的问卷能在一周内完成收集"}]}}},re=Object(B.a)(ae,ie,[],!1,null,"3dde2cd8",null).exports,se={name:"PackageDetail",components:{"wd-dialog":K.a,"wd-input-number":X.a,"wd-checkbox-group":H.a,"wd-checkbox":V.a,SuderDialog:re},props:{projectType:{type:[Number,String],default:"person-service"},activeService:{type:String,default:""},projectId:{type:String,default:""},sampleSize:{type:Number,default:50},onlineData:{type:Object,default:function(){}},couponList:{type:Array,default:function(){return[]}},priceInfo:{type:Object,default:function(){return{}}},showErrorMap:{type:Object,default:null},loading:{type:Boolean,default:!0}},data:function(){return{appendUrl:this.$parent.appendUrl||"",serviceShow:!1,check1:["没有要求"],check2:["自我清洗"],customErrorTips:"50~99999",customSize:50,cndurlbase:"//s1.wenjuan.com/assets/images/business/sample-dialog/",currentPage:1,suderVisible:!1,detailWarnLabel:"",labelMap:{1:"特价样本服务暂不支持题目数量大于50题的项目，您可以对项目题目数量进行精简或使用人工服务"}}},computed:{showServiceList:function(){var e=this,t=Y.filter((function(t){return t.show.includes(e.projectType)}));return t},samplePackageList:function(){return{"person-service":ee,"sale-sample":te,"accurate-sample":ne}[this.activeService]},AISamplePackageDsc:function(){var e=this,t=[{min:50,max:99,discount:1,text:"无折扣"},{min:100,max:199,discount:.9,text:"享9折优惠"},{min:200,max:299,discount:.8,text:"享8折优惠"},{min:300,max:499,discount:.7,text:"享7折优惠"},{min:500,max:99999,discount:.6,text:"享6折优惠"}].find((function(t){return e.customSize>=t.min&&e.customSize<=t.max}));if(t){var n=3*this.customSize*t.discount;return"".concat(t.text," ").concat(n.toFixed(),"元起")}return"样本数量不在有效范围内"},activePackge:function(){var e=this;return this.samplePackageList.filter((function(t){return t.sampleSize==e.sampleSize}))[0]||this.samplePackageList[3]},borderStyle:function(){return"person-service"!==this.activeService||1==this.showServiceList.length},pageTotal:function(){var e=this.couponList.length;return Math.ceil(e/2)},criticalType:function(){var e=this.currentPage,t=this.pageTotal;return 1===e?"left":e===t?"right":""}},watch:{samplePackageList:{handler:function(e){var t=this;e&&(this.customSize=e[3].sampleSize,e.filter((function(e){return e.sampleSize==t.sampleSize})).length||(this.customSize=this.sampleSize,this.$emit("update:sampleSize",this.customSize)))},immediate:!0}},methods:{changeService:function(e){var t=document.querySelector(".detail-part-wrap");t&&(t.scrollTop=0),this.$emit("update:activeService",e.key)},changeCount:function(e,t){this.$emit("update:sampleSize",3==t?this.customSize:e)},changeCheck:function(){var e=this;z.a.confirm("特价样本/精准样本不支持更改要求，是否切换为人工服务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){e.$emit("update:activeService","person-service")})).catch((function(){}))},goSampleIntroduce:function(){window.open("/inner_collect_post","_blank")},changeCusromSize:function(e){e.stopPropagation&&e.stopPropagation(),this.$emit("update:sampleSize",this.customSize)},pageHander:function(e){var t=this,n=this.$refs["coupon-list"],r=this.currentPage,o=this.pageTotal;new Map([["left",function(){1!==r&&(t.currentPage--,Object.assign(n.style,{transform:"translateX(-".concat(506*(t.currentPage-1),"px)")}))}],["right",function(){r!==o&&(Object.assign(n.style,{transform:"translateX(-".concat(506*r,"px)")}),t.currentPage++)}]]).get(e)()},waringClose:function(){var e,t,n=this,r={quota_limit:!0,answer_end_early:!0},o={quota_limit:!1,answer_end_early:!1},data=this.showErrorMap.labelList.filter((function(e){var t=e.key;return r[t]&&(o[t]=!0),!r[t]})).map((function(e){return e.key})),c={false_false:{tip:"一键关闭设置成功！",btnText:"确定"},true_false:{tip:"一键关闭设置成功！但【配额】设置仍需您手动清除",btnText:"打开配额设置"},false_true:{tip:"一键关闭设置成功！但【项目内设置[提前结束]】仍需您手动清除",btnText:"确定"},true_true:{tip:"一键关闭设置成功！但【配额】和【项目内设置[提前结束]】设置仍需您手动清除",btnText:"打开配额设置"}}["".concat(o.quota_limit,"_").concat(o.answer_end_early)],l=c.tip,d=c.btnText,v=function(e){var t=e.tip,r=e.btnText;z.a.confirm(t||"","提示",{showCancelButton:!1,confirmButtonText:r||"确定"}).then((function(){o.quota_limit?location.href="/project/quota_setting/".concat(n.projectId,"/"):location.reload()})).catch((function(e){console.log(e)}))};data.length?(e=this.projectId,t={data:data},(w=y.a.prototype.commonRequest).post("/pconvert/api/close_conflict_settings/".concat(e,"/"),t)).then((function(e){200===e.status&&1===e.status_code&&v({tip:l,btnText:d})})):v({tip:l,btnText:d})}}},oe={name:"SampleDialog",components:{payment:F,PackageDetail:Object(B.a)(se,W,[],!1,null,"3a602812",null).exports},props:{visible:{type:Boolean,default:!1},zIndex:{type:Number,default:1e3},confirmZindex:{type:Number,default:null},projectId:{type:String,default:""},personServer:{type:Boolean,default:!1},projectQuestionNum:{type:Number,default:1},activeService:{type:String,default:""},sampleSize:{type:Number,default:50},cunstomer:{type:[String,Number],default:1},needReload:{type:Boolean,default:!0},source:{type:String,default:""}},data:function(){return{appendUrl:"//s1.wenjuan.com/assets/images/business/sample-dialog/",coupons:[],innerActiveService:"",innerSampleSize:50,priceInfo:{base_cost:0,total_question_num:0,available_rmb:0,available_ticket:0,support:!1},showErrorMap:{open:!0,type:0,labelList:[]},loading:!0,preData:{}}},computed:{projectType:function(){return this.personServer?"person-service":"sale-sample"},onlineData:function(){return{0:{qrCode:"https://s1.wenjuan.com/assets/images/business/sample-dialog/qrcode-whx.png",phone:"181-1736-5784",name:"王老师",realname:"王慧心",register:"https://www.wenjuan.com/s/Qn2qqiM/"},1:{qrCode:"https://s1.wenjuan.com/assets/images/business/sample-dialog/qrcode-yzz.png",phone:"159-2141-9095",name:"俞老师",realname:"俞知止",register:"https://www.wenjuan.com/s/BBZF7rc/#"}}[this.cunstomer]},sampleType:function(){return"sale-sample"===this.projectType?1:2}},watch:{visible:{handler:function(e){e&&(this.innerActiveService=this.activeService||this.projectType,this.innerSampleSize=this.sampleSize,this.source&&window.zytrack&&window.zytrack("custom",this.source),this.init())},immediate:!0}},methods:{init:function(){var e,t=this;this.loading=!0,this.showErrorMap=null===(e=this.$options.data())||void 0===e?void 0:e.showErrorMap,this.personServer?this.loading=!1:this.httpGetInitialPrice().then(this.httpGetSampleService).then((function(){Object.assign(t.priceInfo,t.preData),t.httpGetPconvertPrice(),t.getCouponsAndPackage(),t.priceInfo.support=!0,t.loading=!1,t.showErrorMap.open=!1})).catch((function(){t.loading=!1}))},httpGetSampleService:function(){var e,t,n=this;return(e=this.projectId,t={check_type:"sample"},(w=y.a.prototype.commonRequest).get("/common/api/publish_sample_service_status/".concat(e,"/"),t)).then((function(e){if(n.showErrorMap.labelList=[],e.data){var t={answer_end_early:"提前结束",asw_white_list:"答题白名单",begin_finish_date:"开始/结束时间",force_get_weixinuserinfo_btn:"获取微信头像与昵称",is_email_rspd_only:"只有邮件邀请的受访者可回答",password:"访问密码",quality_control:"无效答卷筛选",quota_limit:"配额",restrict_dingding_rspd:"仅限钉钉答题",restrict_email_rspd:"答题名单-邮箱",restrict_feishu_rspd:"仅限飞书答题",restrict_mobile_rspd:"答题名单-手机号",restrict_weixin_rspd:"答题名单-微信",restrict_wxwork_rspd:"仅限企业微信答题",survey_count:"设定答题数据上限"},data=e.data;if(n.showErrorMap.labelList=Object.keys(data).reduce((function(p,e){return data[e]&&t[e]&&p.push({key:e,label:t[e]}),p}),[]),n.showErrorMap.labelList.length)return n.showErrorMap.open=!0,n.showErrorMap.type=2,Promise.reject()}}))},getCouponsAndPackage:function(){var e=this;if("person-service"!==this.projectType){var t={sample_type:this.sampleType};"sale-sample"===this.projectType&&(t.is_sort_created=1),function(e){return(w=y.a.prototype.commonRequest).get("/pconvert/api/get_coupon_list/",e)}(t).then((function(t){e.coupons=t.data.voc_info})).catch((function(e){if("object"!==c(e)||!e.data.err_msg)return Promise.reject(e);_()({message:e.data.err_msg,type:"warning"})}))}},httpGetInitialPrice:function(){var e=this;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(w=y.a.prototype.commonRequest).get("/pconvert/api/get_initial_price/",e)}({project_id:this.projectId,sample_type:this.sampleType}).then((function(t){if(200===t.status&&1===t.status_code&&(e.preData=t.data,e.preData.total_question_num>50))return e.showErrorMap.open=!0,e.showErrorMap.type=1,Promise.reject()})).catch((function(e){return console.log(e,"获取基础单价接口报错"),Promise.reject(e)}))},httpGetPconvertPrice:function(){var e=this;(w=y.a.prototype.commonRequest).get("/pconvert/api/get_pconvert_price/").then((function(t){200===t.status&&1===t.status_code&&Object.assign(e.priceInfo,t.data||{})})).catch((function(e){return console.log(e,"获取账户余额失败"),Promise.reject(e)}))}},getEndNumber:function(e){return parseInt(e.match(/\d+(?=\D*$)/)[0])%2==0?1:0}},ce=oe,le=Object(B.a)(ce,v,[function(){var e=this,t=e._self._c;return t("div",{staticClass:"dsc"},[t("span",{staticClass:"font-bold"},[e._v("样本服务")]),e._v(" "),t("span",{staticClass:"font-lighter"},[e._v("已为客户采集 3193 万份商业有效样本")])])}],!1,null,"30eec996",null).exports;le.install=function(e){e.component(le.name,le)};t.default=le},28:function(e,t){e.exports=n(257)},29:function(e,t){e.exports=n(258)},3:function(e,t){e.exports=n(136)},30:function(e,t){e.exports=n(259)},37:function(e,t){e.exports=n(254)},4:function(e,t){e.exports=n(75)},43:function(e,t){e.exports=n(293)},46:function(e,t){e.exports=n(261)},50:function(e,t){e.exports=n(186)},59:function(e,t){e.exports=n(295)},60:function(e,t){e.exports=n(296)},61:function(e,t){e.exports=n(297)},7:function(e,t){e.exports=n(181)},8:function(e,t){e.exports=n(203)}}).default}}]);
//# sourceMappingURL=b5c15a7.js.map
</script>

</body>
</html>
